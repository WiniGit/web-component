(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(`._checkbox-container_1xus0_1{position:relative;border-radius:.4rem;border:var(--neutral-bolder-border, 1px solid #D7D7DB);background-color:transparent;transition:border,background-color .4s;cursor:pointer}._checkbox-container_1xus0_1>input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}._checkbox-container_1xus0_1>svg{width:100%;height:100%;visibility:hidden;opacity:0!important;transition:visibility,opacity .4s}._checkbox-container_1xus0_1>svg>path{fill:var(--check-color, #fff)}._checkbox-container_1xus0_1>input:checked~svg,._checkbox-container_1xus0_1[is-null-value=true]>svg{visibility:visible;opacity:1!important}._checkbox-container_1xus0_1:has(>input:checked),._checkbox-container_1xus0_1[is-null-value=true]{background-color:var(--primary-main-color);border:none!important}._checkbox-container_1xus0_1[is-null-value=true]>svg>path:first-child{display:block!important}._checkbox-container_1xus0_1[is-null-value=true]>svg>path:last-child{display:none}._checkbox-container_1xus0_1:has(>input:disabled){background-color:var(--neutral-disable-background-color)!important}._checkbox-container_1xus0_1:has(>input:disabled)>svg>path{fill:var(--neutral-text-disabled-color)!important}._select1-container_1pgte_1,._select1-simple-style_1pgte_1{position:relative;box-sizing:border-box}._select1-container_1pgte_1{width:100%;padding:.8rem 1.6rem;border:var(--neutral-bolder-border, 1px solid #D7D7DB);border-radius:.8rem;gap:.8rem}._select1-container_1pgte_1:focus-within{border-color:var(--primary-main-color, #287CF0)}._select1-container_1pgte_1._disabled_1pgte_37{background-color:var(--neutral-disable-background-color, #F4F4F5);pointer-events:none}._select1-container_1pgte_1._helper-text_1pgte_47,._select1-simple-style_1pgte_1._helper-text_1pgte_47{overflow:visible!important;border-color:var(--helper-text-color)}._select1-container_1pgte_1._helper-text_1pgte_47:after,._select1-simple-style_1pgte_1._helper-text_1pgte_47:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._select1-container_1pgte_1>input,._select1-simple-style_1pgte_1>input{flex:1;width:100%;border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit}._select1-container_1pgte_1:has(input:read-only){cursor:pointer}._select1-popup_1pgte_129{background-color:var(--neutral-absolute-background-color, #FFFFFF);border-radius:.8rem;border:var(--neutral-main-border, 1px solid #EAEAEC);height:fit-content;min-width:8rem;box-shadow:0 0 12px #00204d1f;align-items:center}._select1-popup_1pgte_129>._select-body_1pgte_149{gap:2px;max-height:100%;flex:1;align-items:start;max-height:28rem;min-height:calc(7.6rem + 2px);width:100%;overflow:hidden auto}._select1-popup_1pgte_129>._select-body_1pgte_149::-webkit-scrollbar{width:.5rem}._select1-popup_1pgte_129>._select-body_1pgte_149 ._select-tile_1pgte_179{justify-content:start;align-items:center;padding:.8rem 1.2rem;border-radius:.8rem;gap:.8rem;width:100%;cursor:pointer}._select1-popup_1pgte_129>._select-body_1pgte_149 ._select-tile_1pgte_179:hover{background-color:var(--neutral-hover-background-color, #18181B0A)}._select1-popup_1pgte_129>._select-body_1pgte_149 ._select-tile_1pgte_179._disabled_1pgte_37{background-color:var(--neutral-disable-background-color, #F4F4F5)}._select1-popup_1pgte_129>._select-body_1pgte_149 ._select-tile_1pgte_179._disabled_1pgte_37 *{color:var(--neutral-text-disabled-color, #878792)}._no-results-found_1pgte_223{padding:.8rem;font:400 1.4rem/2rem Inter;color:var(--neutral-text-subtitle-color, #61616B)}._wini-icon_1q12e_1{display:flex;justify-content:center;align-items:center;width:fit-content;height:fit-content;padding:.2rem;font-size:1.6rem;color:var(--neutral-text-subtitle-color, #61616B)}._wini-icon_1q12e_1 *{color:inherit}._wini-icon_1q12e_1>svg{width:1em!important;height:1em!important}._wini-icon_1q12e_1[class~=link-icon]>svg{width:auto!important;height:auto!important}._wini-icon_1q12e_1[class~=fill-icon]>svg>*[fill^="#"]{fill:currentColor}._wini-icon_1q12e_1[class~=outline-icon]>svg>*[stroke^="#"]{stroke:currentColor}._wini-icon_1q12e_1._clickable_1q12e_67{cursor:pointer}._wini-icon_1q12e_1[class~=icon-button]{border-radius:50%;background-color:var(--neutral-main-background-color)}._wini-icon_1q12e_1[class~=icon-button][class~=light]{background-color:transparent}._wini-icon_1q12e_1[class~=border]{border:var(--neutral-bolder-border)}._wini-icon_1q12e_1[class~=dashed]{border-style:dashed}._wini-icon_1q12e_1[class~=size64]{width:6.4rem;height:6.4rem;font-size:1.6rem}._wini-icon_1q12e_1[class~=size56]{width:5.6rem;height:5.6rem;font-size:1.6rem}._wini-icon_1q12e_1[class~=size48]{width:4.8rem;height:4.8rem;font-size:1.6rem}._wini-icon_1q12e_1[class~=size40]{width:4rem;height:4rem;font-size:1.4rem}._wini-icon_1q12e_1[class~=size32]{width:3.2rem;height:3.2rem;font-size:1.4rem}._wini-icon_1q12e_1[class~=size24]{width:2.4rem;height:2.4rem;font-size:1.2rem}@keyframes _on-open-tooltip_1q12e_1{0%{opacity:0}to{opacity:1}}._tooltip-container_1q12e_201{position:fixed;z-index:999;animation:_on-open-tooltip_1q12e_1 .2s ease-in-out;animation-fill-mode:forwards}._tooltip-container_1q12e_201>._tooltip-message_1q12e_215{color:var(--neutral-text-body-reverse-color);background-color:var(--neutral-main-reverse-background-color);padding:.4rem 1.2rem;border-radius:.8rem;max-width:21.2rem;text-align:center}._wini-icon_1q12e_1[class~=icon-button]:hover{background-color:var(--neutral-hover-background-color)}._wini-icon_1q12e_1[class~=icon-button][class~=light]:hover{background-color:transparent;opacity:.8;box-shadow:0 4px 12px #00000017}.comp-text{display:inline-block;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-line);word-break:break-word;overflow:hidden;text-overflow:ellipsis;-webkit-box-pack:center;text-align:start;vertical-align:middle;display:-webkit-box}.comp-text.type-button{cursor:pointer}.comp-text-innerhtml{overflow:hidden}.popup-overlay{position:fixed;top:0!important;left:0!important;right:0!important;bottom:0!important;width:100dvw!important;height:100dvh!important;background-color:#000000b2;display:flex!important;justify-content:center;align-items:center;z-index:99}.popup-overlay>div{background-color:var(--neutral-absolute-background-color);border-radius:.8rem}.popup-container{position:relative;border:var(--neutral-main-border);overflow:visible;max-width:86%;max-height:80%}.popup-header{align-items:center;justify-content:start;padding:1.6rem 2.4rem;border-bottom:var(--neutral-main-border)}.popup-footer{column-gap:.8rem;justify-content:end;padding:1.2rem 2.4rem;border-top:var(--neutral-main-border)}.popup-container>.popup-close-btn{position:absolute;right:0;top:0;transform:translate(50%,-50%);width:3.2rem;height:3.2rem;padding:.6rem;border-radius:50%;align-items:center;justify-content:center;background-color:var(--neutral-absolute-background-color);box-shadow:0 15px 50px #1b20321a}.popup-overlay.hidden-overlay{background-color:transparent;width:fit-content!important;height:fit-content!important}.popup-overlay.hidden-overlay>*{position:fixed!important;z-index:99;border-radius:.8rem;background-color:var(--neutral-absolute-background-color)}.popup-overlay>*{transition:width .8s ease-in-out,max-width .8s ease-in-out,height .8s ease-in-out,max-height .8s ease-in-out,border-radius .8s ease-in-out;box-shadow:2px 0 16px #0000000a}.popup-overlay.hidden-overlay>.popup-container{position:absolute;width:max-content;height:max-content;background-color:transparent}.popup-overlay.hidden-overlay>.popup-container .popup-close-btn{display:none!important}@keyframes open-drawer-right-to-left{0%{transform:translate(100%)}to{transform:translate(0)}}.right-drawer{position:fixed;top:0;right:0;height:100dvh;border-radius:0;animation:open-drawer-right-to-left .6s ease-in-out;animation-fill-mode:forwards}@keyframes open-drawer-left-to-right{0%{transform:translate(-100%)}to{transform:translate(0)}}.left-drawer{position:fixed;top:0;left:0;height:100dvh;border-radius:0;animation:open-drawer-left-to-right .6s ease-in-out;animation-fill-mode:forwards}@keyframes show-dropdown-popup{0%{opacity:0;height:0;width:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}.dropdown-popup{animation:show-dropdown-popup .4s ease-in-out;position:fixed;border:var(--neutral-main-border);border-radius:.8rem;padding:4px}._switch-container_1bsgu_1{--off-bg: var(--neutral-main-background-color, #EFEFF0);--on-bg: var(--primary-main-color, #287CF0);--dot-color: var(--neutral-text-stable-color, #ffffff);position:relative;display:inline-block;background-color:var(--off-bg)!important;border-radius:50vw!important;border:none;outline:none}._switch-container_1bsgu_1>input{opacity:0;width:0;height:0;border:none;outline:none}._switch-container_1bsgu_1>._slider_1bsgu_41{font-size:var(--size);position:absolute;height:calc(100% - .2em);aspect-ratio:1 / 1;left:.1em;top:.1em;background-color:var(--dot-color);transition:.4s;border-radius:50%}._switch-container_1bsgu_1>input:checked+._slider_1bsgu_41{-webkit-transform:translateX(calc(.8*(100% + .2em)));-ms-transform:translateX(calc(.8*(100% + .2em)));transform:translate(calc(.8*(100% + .2em)))}._switch-container_1bsgu_1:has(>input:checked){background-color:var(--on-bg)!important}._switch-container_1bsgu_1:has(>input:disabled:not(*:checked)){pointer-events:none;border:var(--neutral-bolder-border);background-color:var(--neutral-disable-background-color)!important}._switch-container_1bsgu_1:has(>input:disabled:not(*:checked)) ._slider_1bsgu_41{background-color:var(--neutral-text-disabled-color)!important}._switch-container_1bsgu_1:has(>input:disabled:checked){pointer-events:none;background-color:var(--primary-lighter-color)!important}._dialog-overlay_19n83_1{position:fixed;top:0;left:0;width:100dvw;height:100dvh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:100}._dialog-container_19n83_27{position:relative;background-color:var(--neutral-absolute-background-color);padding:2.4rem;border-radius:8px;box-shadow:0 2px 8px #00000040;gap:2.4rem;overflow:visible}._dialog-container_19n83_27 button{outline:none;padding:0;border:none}._dialog-body_19n83_59{gap:1.6rem}._dialog-body_19n83_59>div:last-child{width:100%;align-items:inherit;gap:8px}._dialog-body_19n83_59>div:last-child>*{width:100%}._dialog-body_19n83_59>._dialog-status_19n83_87{width:5.6rem;height:5.6rem;border-radius:50%;align-items:center;justify-content:center}._dialog-footer_19n83_103{gap:8px;justify-content:end;width:100%}._dialog-footer_19n83_103>._dialog-action_19n83_115{height:4rem;justify-content:center;padding:0 1.6rem;border-radius:.8rem;background-color:var(--neutral-main-background-color)}._dialog-footer_19n83_103>._dialog-action_19n83_115>*{color:var(--neutral-text-subtitle-color)}._dialog-footer_19n83_103>._dialog-submit_19n83_139>*{color:var(--neutral-text-title-reverse-color)}._dialog-container_19n83_27[dialog-type="1"] ._dialog-status_19n83_87{background-color:var(--infor-background)}._dialog-container_19n83_27[dialog-type="2"] ._dialog-status_19n83_87{background-color:var(--error-background)}._dialog-container_19n83_27[dialog-type="3"] ._dialog-status_19n83_87{background-color:var(--warning-background)}._dialog-container_19n83_27[dialog-type="4"] ._dialog-status_19n83_87{background-color:var(--success-background)}._dialog-container_19n83_27[dialog-type="1"] ._dialog-footer_19n83_103>._dialog-submit_19n83_139{background-color:var(--infor-main-color)}._dialog-container_19n83_27[dialog-type="2"] ._dialog-footer_19n83_103>._dialog-submit_19n83_139{background-color:var(--error-main-color)}._dialog-container_19n83_27[dialog-type="3"] ._dialog-footer_19n83_103>._dialog-submit_19n83_139{background-color:var(--warning-main-color)}._dialog-container_19n83_27[dialog-type="4"] ._dialog-footer_19n83_103>._dialog-submit_19n83_139{background-color:var(--success-main-color)}._date-time-picker_oydxy_1{padding:.8rem 1.6rem;gap:.4rem;border-radius:.8rem;text-align:start}._date-time-picker_oydxy_1>._prefix-icon_oydxy_15{padding:.5rem;margin-right:.8rem;border-radius:50%;border:1px dashed var(--neutral-text-subtitle-color)}._date-time-picker_oydxy_1>._value_oydxy_29,._simple-date-time-picker_oydxy_31>._value_oydxy_29{flex:1;width:100%;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._date-time-picker_oydxy_1>input,._simple-date-time-picker_oydxy_31>input{outline:none;border:none;background-color:transparent!important}._date-time-picker_oydxy_1:has(>input){padding:.7rem 1.6rem;border:var(--neutral-main-border)}._date-time-picker_oydxy_1:has(>input):focus-within{border-color:var(--primary-main-color)}._date-time-picker_oydxy_1:has(>input:disabled),._date-time-picker_oydxy_1:disabled{background-color:var(--neutral-disable-background-color)!important;pointer-events:none!important}button._date-time-picker_oydxy_1:hover{background-color:var(--neutral-hover-background-color, #18181B0A)}button._date-time-picker_oydxy_1:focus{box-shadow:0 4px 20px #0000001a inset}._date-time-picker_oydxy_1._helper-text_oydxy_123,._simple-date-time-picker_oydxy_31._helper-text_oydxy_123{position:relative;overflow:visible!important;border-color:var(--helper-text-color)!important}._date-time-picker_oydxy_1._helper-text_oydxy_123:after,._simple-date-time-picker_oydxy_31._helper-text_oydxy_123:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._popup-actions_oydxy_165{max-height:28rem;min-width:10rem;background-color:var(--neutral-absolute-background-color, #ffffff)}._popup-actions_oydxy_165>button{padding:.8rem 1.2rem;border-radius:.8rem}._popup-actions_oydxy_165>button:hover{background-color:var(--neutral-hover-background-color, #18181B0A)}._simple-text-field_xkh95_1,._text-field-container_xkh95_3{position:relative;box-sizing:border-box}._text-field-container_xkh95_3{padding:.8rem 1.5rem;border:var(--neutral-main-border, 1px solid #D7D7DB);border-radius:.8rem;gap:.8rem}._text-field-container_xkh95_3[class~=size48]{padding:1.2rem 1.5rem}._text-field-container_xkh95_3[class~=size32]{padding:.4rem 1.1rem}._text-field-container_xkh95_3[class~=size24]{padding:0 .7rem}._text-field-container_xkh95_3:has(>input:disabled){background-color:var(--neutral-disable-background-color, #F4F4F5)!important;color:var(--neutral-text-disabled-color, #B4B4B7)!important;pointer-events:none!important}._text-field-container_xkh95_3:focus-within{border-color:var(--primary-main-color, #287CF0)}._text-field-container_xkh95_3>input,._simple-text-field_xkh95_1>input{flex:1;width:100%;border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._text-field-container_xkh95_3._helper-text_xkh95_125,._simple-text-field_xkh95_1._helper-text_xkh95_125{overflow:visible!important;border-color:var(--helper-text-color)!important}._text-field-container_xkh95_3._helper-text_xkh95_125:after,._simple-text-field_xkh95_1._helper-text_xkh95_125:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._calendar-container_1hxld_1{background-color:var(--neutral-absolute-background-color);border-radius:.8rem;align-items:stretch;border:var(--neutral-main-border);width:fit-content}._calendar-sidebar-options_1hxld_17{padding:.8rem 2.4rem .8rem 0;border-right:var(--neutral-main-border)}._calendar-sidebar-options_1hxld_17>._calendar-sidebar-option-buttton_1hxld_27{color:var(--neutral-text-title-color);padding:.8rem 1.6rem}._picker-time-container_1hxld_37{border-left:var(--neutral-main-border);height:34.2rem;align-items:center}._picker-time-container_1hxld_37>div[class*=heading-7]:first-child{width:100%;padding:1.2rem 1.6rem;border-bottom:var(--neutral-main-border);text-align:center}._picker-time-container_1hxld_37 div[class*=scroll-picker-]{flex:1;height:100%;gap:.4rem;padding:.4rem 0;overflow:hidden auto;scrollbar-width:thin}._picker-time-container_1hxld_37 ._scroll-picker-minutes_1hxld_81{border-left:var(--neutral-main-border);border-right:var(--neutral-main-border)}._picker-time-container_1hxld_37 div[class*=scroll-picker-]>button{width:5.6rem;padding:.4rem 0}._picker-time-container_1hxld_37 div[class*=scroll-picker-]>button._selected_1hxld_101{background-color:var(--primary-background);color:var(--primary-main-color)}._picker-date-header_1hxld_111{padding:1.2rem 1.6rem;gap:1.2rem;background-color:transparent!important;border-bottom:var(--neutral-main-border);justify-content:space-between}._picker-date-header_1hxld_111>span{width:100%;max-width:15rem;flex:1;text-align:center;cursor:pointer;border-radius:.8rem}._picker-date-header_1hxld_111>span:hover{background-color:var(--neutral-hover-background-color)}._picker-date-header_1hxld_111>button{width:1.6rem;height:1.6rem;display:flex;align-items:center;justify-content:center}._picker-date-header_1hxld_111>button>svg{font-size:1.4rem;color:var(--neutral-text-title-color);pointer-events:none}._picker-date-body_1hxld_181{padding:1.2rem 1.6rem;width:31.2rem;flex-wrap:wrap;gap:.8rem 0}._picker-date-body_1hxld_181>div{height:3.2rem;padding:0 .4rem;display:flex}._picker-date-body_1hxld_181>div>*{border:1px solid transparent;justify-content:center;height:100%;width:100%}._date-picker-circle_1hxld_221{width:calc(100% / 7)}._date-picker-circle_1hxld_221>*{border-radius:50%}._month-picker-circle_1hxld_237,._year-picker-circle_1hxld_239{width:calc(100% / 3)}._month-picker-circle_1hxld_237>*,._year-picker-circle_1hxld_239>*{border-radius:2.4rem}._picker-date-body_1hxld_181>._in-range_1hxld_257{background-color:var(--neutral-main-background-color)}._picker-date-body_1hxld_181:has(>._in-range_1hxld_257,>._end-range_1hxld_265)>._start-range_1hxld_265{background-image:linear-gradient(to right,transparent 50%,var(--neutral-main-background-color) 50%)}._end-range_1hxld_265{background-image:linear-gradient(to left,transparent 50%,var(--neutral-main-background-color) 50%)!important}._picker-date-body_1hxld_181>._today_1hxld_281>*{border-color:var(--primary-main-color)}._picker-date-body_1hxld_181>._selected_1hxld_101>*{background-color:var(--primary-main-color);color:var(--neutral-absolute-background-color)}._picker-date-body_1hxld_181>._invalid_1hxld_299{opacity:.24!important;pointer-events:none!important}._button-container_i431i_1{padding:.5rem 1.2rem;border-radius:.8rem;gap:.8rem;justify-content:center;color:var(--neutral-text-subtitle-color, #61616B);width:fit-content;outline:none}._button-container_i431i_1[class~=border]{padding:.4rem 1.2rem;border:1px solid var(--neutral-bolder-border-color, #D7D7DB)}._button-container_i431i_1[class~=size64]{padding:2.1rem 2.4rem}._button-container_i431i_1[class~=size64][class~=border]{padding:2rem 2.4rem;border:1px solid var(--neutral-bolder-border-color, #D7D7DB)}._button-container_i431i_1[class~=size56]{padding:1.7rem 2rem}._button-container_i431i_1[class~=size56][class~=border]{padding:1.6rem 2rem;border:1px solid var(--neutral-bolder-border-color, #D7D7DB)}._button-container_i431i_1[class~=size48]{padding:1.2rem 2rem}._button-container_i431i_1[class~=size48][class~=border]{padding:1.1rem 2rem;border:1px solid var(--neutral-bolder-border-color, #D7D7DB)}._button-container_i431i_1[class~=size40]{padding:.9rem 1.6rem}._button-container_i431i_1[class~=size40][class~=border]{padding:.8rem 1.6rem;border:1px solid var(--neutral-bolder-border-color, #D7D7DB)}._button-container_i431i_1[class~=size24]{padding:.4rem .8rem}._button-container_i431i_1[class~=size24][class~=border]{padding:.3rem .8rem;border:1px solid var(--neutral-bolder-border-color, #D7D7DB)}._button-container_i431i_1[class~=dashed]{border:1px dashed var(--neutral-bolder-border-color, #D7D7DB)}._button-label_i431i_129{font:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._button-container_i431i_1[class~=button-grey]{background-color:var(--neutral-main-background-color, #EFEFF0)!important;border-color:var(--neutral-main-background-color, #EFEFF0)!important}._button-container_i431i_1[class~=button-grey] *{color:var(--neutral-text-subtitle-color, #61616B)!important}._button-container_i431i_1[class~=button-primary]{background-color:var(--primary-main-color, #287CF0)!important;border-color:var(--primary-main-color, #287CF0)!important}._button-container_i431i_1[class~=button-primary] *{color:var(--neutral-text-stable-color, #FFFFFF)!important}._button-container_i431i_1[class~=button-neutral]{border-color:var(--neutral-bolder-border-color)!important}._button-container_i431i_1[class~=button-neutral] *{color:var(--neutral-text-subtitle-color, #61616B)!important}._button-container_i431i_1[class~=button-neutral]{border-color:var(--neutral-bolder-border-color, #D7D7DB)!important}._button-container_i431i_1[class~=button-black] *{color:var(--neutral-text-title-reverse-color, #F4F4F5)!important}._button-container_i431i_1[class~=button-black]{background-color:var(--neutral-absolute-reverse-background-color, #000000)!important;border-color:var(--neutral-bolder-reverse-border-color, #000000)!important}._button-container_i431i_1[class~=button-white] *{color:var(--neutral-text-title-color, #18181B)!important}._button-container_i431i_1[class~=button-white]{background-color:var(--neutral-absolute-background-color, #FFFFFF)!important;border-color:var(--neutral-bolder-border-color, #D7D7DB)!important}._button-container_i431i_1[class~=button-infor]{border-color:var(--infor-main-color, #287CF0)!important}._button-container_i431i_1[class~=button-infor] *{color:var(--infor-main-color, #287CF0)!important}._button-container_i431i_1[class~=button-warning]{border-color:var(--warning-main-color, #FC7A1C)!important}._button-container_i431i_1[class~=button-warning] *{color:var(--warning-main-color, #FC7A1C)!important}._button-container_i431i_1[class~=button-error]{border-color:var(--error-main-color, #E14337)!important}._button-container_i431i_1[class~=button-error] *{color:var(--error-main-color, #E14337)!important}._button-container_i431i_1[class~=button-success]{border-color:var(--success-main-color, #3AAC6D)!important}._button-container_i431i_1[class~=button-success] *{color:var(--success-main-color, #3AAC6D)!important}._button-container_i431i_1[class~=button-infor-main]{background-color:var(--infor-main-color, #287CF0)!important;border-color:var(--infor-main-color, #287CF0)!important}._button-container_i431i_1[class~=button-warning-main]{background-color:var(--warning-main-color, #FC7A1C)!important;border-color:var(--warning-main-color, #FC7A1C)!important}._button-container_i431i_1[class~=button-error-main]{background-color:var(--error-main-color, #E14337)!important;border-color:var(--error-main-color, #E14337)!important}._button-container_i431i_1[class~=button-success-main]{background-color:var(--success-main-color, #3AAC6D)!important;border-color:var(--success-main-color, #3AAC6D)!important}._button-container_i431i_1[class~=button-infor-main] *,._button-container_i431i_1[class~=button-warning-main] *,._button-container_i431i_1[class~=button-error-main] *,._button-container_i431i_1[class~=button-success-main] *{color:var(--neutral-text-stable-color, #FFFFFF)!important}button:has(>._button-label_i431i_129):hover{opacity:.86}button:has(>._button-label_i431i_129):focus{box-shadow:0 4px 20px #0000001a inset}button:has(>._button-label_i431i_129):disabled{pointer-events:none;background-color:var(--neutral-disable-background-color, #dddde1)!important;border-color:var(--neutral-bolder-border-color, #D7D7DB)!important}button:has(>._button-label_i431i_129):disabled *{color:var(--neutral-text-disabled-color, #A2A2AA)!important}._select-multi-container_ihcj6_1,._select-multi-simple-style_ihcj6_1{position:relative;box-sizing:border-box}._select-multi-container_ihcj6_1{width:100%;max-height:100%;padding:.8rem 1.6rem;border:var(--neutral-bolder-border, 1px solid #D7D7DB);border-radius:.8rem;gap:.8rem}._select-multi-container_ihcj6_1:focus-within{border-color:var(--primary-main-color, #287CF0)}._select-multi-container_ihcj6_1._disabled_ihcj6_39{background-color:var(--neutral-disable-background-color, #F4F4F5);pointer-events:none}._select-multi-container_ihcj6_1._helper-text_ihcj6_49,._select-multi-simple-style_ihcj6_1._helper-text_ihcj6_49{overflow:visible!important;border-color:var(--helper-text-color)}._select-multi-container_ihcj6_1._helper-text_ihcj6_49:after,._select-multi-simple-style_ihcj6_1._helper-text_ihcj6_49:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._select-multi-container_ihcj6_1 *:has(input),._select-multi-container_ihcj6_1 *:has(._selected-item-value_ihcj6_91),._select-multi-simple-style_ihcj6_1 *:has(input),._select-multi-simple-style_ihcj6_1 *:has(._selected-item-value_ihcj6_91){font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit}._select-multi-container_ihcj6_1 input,._select-multi-simple-style_ihcj6_1 input{min-width:6rem;flex:1;width:100%;border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit}._select-multi-container_ihcj6_1 ._selected-item-value_ihcj6_91,._select-multi-simple-style_ihcj6_1 ._selected-item-value_ihcj6_91{border-radius:10rem;padding:.4rem .8rem;background-color:var(--neutral-selected-background-color, #18181B14);gap:.8rem}._select-multi-container_ihcj6_1 ._selected-item-value_ihcj6_91:hover,._select-multi-simple-style_ihcj6_1 ._selected-item-value_ihcj6_91:hover{background-color:var(--neutral-hover-background-color, #18181B0A)}._select-multi-popup_ihcj6_181{background-color:var(--neutral-absolute-background-color, #FFFFFF);border-radius:.8rem;border:var(--neutral-main-border, 1px solid #EAEAEC);height:fit-content;box-shadow:0 0 12px #00204d1f;align-items:center;gap:2px;padding:4px 0!important}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203{padding:0 4px;gap:2px;max-height:100%;flex:1;align-items:start;max-height:28rem;min-height:calc(7.6rem + 2px);width:100%;overflow:hidden auto}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203::-webkit-scrollbar{width:.5rem}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203 ._select-tile_ihcj6_235{justify-content:start;align-items:center;padding:.8rem 1.2rem;gap:.8rem;width:100%;border-radius:.8rem;cursor:pointer}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203 ._select-tile_ihcj6_235:hover{background-color:var(--neutral-hover-background-color, #18181B0A)}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203 ._select-tile_ihcj6_235:has(input:checked){background-color:var(--neutral-selected-background-color, #18181B14)}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203 ._select-tile_ihcj6_235._disabled_ihcj6_39{background-color:var(--neutral-disable-background-color, #F4F4F5)}._select-multi-popup_ihcj6_181>._select-body_ihcj6_203 ._select-tile_ihcj6_235._disabled_ihcj6_39 *{color:var(--neutral-text-disabled-color, #A2A2AA)}._no-results-found_ihcj6_287{padding:.8rem;font:400 1.4rem/2rem Inter;color:var(--neutral-text-subtitle-color, #6b6b6b)}._progress-bar-container_17113_1{row-gap:1.2rem;width:38.2rem}._progress-bar-container_17113_1>._progress-bar-title_17113_11{justify-content:space-between;width:100%}._progress-bar-container_17113_1>._progress-bar-tile_17113_21{column-gap:1.6rem;width:100%;height:2.2rem}._progress-bar-container_17113_1>._progress-bar-tile_17113_21>._progress-bar-value_17113_33{width:100%;flex:1}._progress-bar-value_17113_33{border-radius:10rem;height:.6rem;position:relative;overflow:hidden;background-color:var(--full-color, #EFEFF0)}._progress-bar-value_17113_33:after{content:"";position:absolute;top:0;left:0;width:var(--percent);height:inherit;border-radius:10rem;background-color:var(--percent-color, #287CF0);transition:width ease-in-out 1s}._status-icon_17113_83>div{width:1.6rem!important;height:1.6rem!important}._custom-pagination_1ovf2_1{width:100%;height:100%;justify-content:space-between;gap:1.6rem}._custom-pagination_1ovf2_1>._row_1ovf2_15{gap:1.6rem;height:100%}._items-per-page-container_1ovf2_25{gap:8px;height:100%}._pagination_1ovf2_35{gap:.8rem}._pagination_1ovf2_35>li{width:2.4rem;height:2.4rem;color:#161c2499;justify-content:center;border-radius:.4rem;font-weight:600}._pagination_1ovf2_35>li *{color:inherit;font:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit}._pagination_1ovf2_35>li._active_1ovf2_83{background-color:var(--infor-background)}._pagination_1ovf2_35>li._active_1ovf2_83{color:var(--infor-main-color)}._radio-btn-container_1j36q_1{--off-color: var(--neutral-text-disabled-color, #A2A2AA);--active-color: var(--primary-main-color, #287CF0);height:max(var(--size),1.2rem);width:max(var(--size),1.2rem);aspect-ratio:1 / 1!important;border-radius:50%;box-sizing:border-box;border:2px solid var(--off-color);background-color:transparent!important;transition:border-color ease-in-out .5s;justify-content:center;cursor:pointer}._radio-btn-container_1j36q_1>input{display:none;opacity:0;cursor:pointer}._radio-btn-container_1j36q_1>._checkmark_1j36q_43{height:inherit;width:inherit;scale:.5;transform-origin:center center;border-radius:50%;aspect-ratio:1 / 1;visibility:hidden;opacity:0;transition:visibility,opacity ease-in-out .5s}._radio-btn-container_1j36q_1>input:checked~._checkmark_1j36q_43{visibility:visible;opacity:1;background-color:var(--active-color)}._radio-btn-container_1j36q_1:has(>input:checked){border-color:var(--active-color)}._radio-btn-container_1j36q_1:has(input:disabled){pointer-events:none;border-color:var(--off-color);background-color:var(--neutral-disable-background-color, #494950)}._radio-btn-container_1j36q_1>input:disabled~._checkmark_1j36q_43{display:block;background-color:var(--neutral-text-disabled-color, #878792)}._simple-text-area_1djxf_1,._text-area-container_1djxf_3{position:relative;box-sizing:border-box}._text-area-container_1djxf_3{height:4.8rem;position:relative;gap:.8rem;border-radius:.8rem;border:var(--neutral-bolder-border, 1px solid #D7D7DB);padding:.8rem 1.6rem;align-items:start}._text-area-container_1djxf_3:has(>textarea:disabled){background-color:var(--neutral-disable-background-color, #F4F4F5)!important;color:var(--neutral-text-disabled-color, #B2B2B8)!important;pointer-events:none!important}._text-area-container_1djxf_3:focus-within{border-color:var(--primary-main-color, #287CF0)}._text-area-container_1djxf_3>textarea,._simple-text-area_1djxf_1>textarea{flex:1;padding:0;width:100%;height:inherit;max-height:100%;border:none;outline:none;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit;resize:inherit}._text-area-container_1djxf_3._helper-text_1djxf_95,._simple-text-area_1djxf_1._helper-text_1djxf_95{overflow:visible!important;border-color:var(--helper-text-color)!important}._text-area-container_1djxf_3._helper-text_1djxf_95:after,._simple-text-area_1djxf_1._helper-text_1djxf_95:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._import-file-container_1jfp2_1,._import-file-simple-style_1jfp2_1{position:relative}._import-file-container_1jfp2_1:has(input:disabled){background-color:var(--neutral-disable-background-color)!important;pointer-events:none!important}._import-file-container_1jfp2_1:not(._button-only_1jfp2_19){max-width:57rem;padding:2.4rem;gap:1.6rem;border-radius:.8rem;border:var(--neutral-bolder-border)}._import-file-container_1jfp2_1:not(._button-only_1jfp2_19):has(svg._preview-icon_1jfp2_35){border-style:dashed}._import-file-prefix_1jfp2_43:not(*:has(>img)){width:4.8rem;height:4.8rem;border-radius:50%;background-color:var(--primary-background, #ECF3FE)}._import-file-prefix_1jfp2_43>img{max-width:14rem;max-height:8.8rem;border-radius:.8rem}._file-preview-content_1jfp2_69{max-width:100%;flex:1;gap:.4rem;display:flex;flex-direction:inherit;align-items:inherit;flex-wrap:wrap}._remove-preview-file_1jfp2_89{width:1.6rem;height:1.6rem;margin-left:.6rem}div[class*=Toastify__toast-body]>div:last-child{font:500 1.2rem/1.6rem}._import-file-container_1jfp2_1._helper-text_1jfp2_109,._import-file-simple-style_1jfp2_1._helper-text_1jfp2_109{overflow:visible!important;border-color:var(--helper-text-color)}._import-file-container_1jfp2_1._helper-text_1jfp2_109:after,._import-file-simple-style_1jfp2_1._helper-text_1jfp2_109:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #287CF0;--toastify-color-success: #3AAC6D;--toastify-color-warning: #FC7A1C;--toastify-color-error: #E14337;--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);transform:translateZ(var(--toastify-z-index));position:fixed;padding:4px;width:var(--toastify-toast-width);box-sizing:border-box;color:#fff}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%)}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right)}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%)}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right)}@media only screen and (max-width : 480px){.Toastify__toast-container{width:100vw;padding:0;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}}.Toastify__toast{--y: 0;position:relative;-ms-touch-action:none;touch-action:none;min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:8px;border-radius:var(--toastify-toast-bd-radius);box-shadow:0 4px 12px #0000001a;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);cursor:default;direction:ltr;z-index:0;overflow:hidden}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-body{margin:auto 0;-ms-flex:1 1 auto;flex:1 1 auto;padding:6px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.Toastify__toast-body>div:last-child{word-break:break-word;-ms-flex:1;flex:1}.Toastify__toast-icon{-webkit-margin-end:10px;margin-inline-end:10px;width:20px;-ms-flex-negative:0;flex-shrink:0;display:-ms-flexbox;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}@media only screen and (max-width : 480px){.Toastify__toast{margin-bottom:0;border-radius:0}}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;-ms-flex-item-align:start;align-self:flex-start;z-index:1}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:var(--toastify-z-index);opacity:.7;transform-origin:left;border-bottom-left-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial;border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp{position:absolute;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._infinite-scroll_1o3yx_1._loading_1o3yx_1:after{content:"";position:sticky;width:1.2rem;height:1.2rem;border:.4rem solid var(--neutral-absolute-background-color);border-radius:50%;border-top:.4rem solid var(--infor-main-color);-webkit-animation:_spin_1o3yx_1 2s linear infinite;animation:_spin_1o3yx_1 2s linear infinite;order:100000}@-webkit-keyframes _spin_1o3yx_1{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@keyframes _spin_1o3yx_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._rating-container_i1js0_1{gap:.8rem;height:fit-content;width:fit-content}._rating-container_i1js0_1 svg{cursor:pointer}._rating-container_i1js0_1 svg>*{pointer-events:none!important}.awssld{--organic-arrow-thickness: 4px;--organic-arrow-height: 40px;--slider-height-percentage: 60%;--loader-bar-color: #851515;--loader-bar-height: 6px;--control-button-width: 10%;--control-button-height: 25%;--control-button-opacity: .5;--control-button-hover-opacity: .75;--control-button-background: transparent;--transition-bezier: cubic-bezier(.5, .075, .25, .95);--slider-transition-duration: 575ms;--organic-arrow-color: #6a6a6a;--organic-arrow-border-radius: 0;--control-bullet-color: #6a6a6a;--control-bullet-active-color: #6a6a6a;--content-background-color: #2f2f2f}.awssld__container figure,.awssld__content,.awssld__box{display:block;position:absolute;width:100%;height:100%;top:0;left:0}.awssld__controls button,.awssld__bullets button{outline-color:0;outline-style:none;outline-width:0}.awssld{--organic-arrow-thickness: 4px;--organic-arrow-height: 40px;--slider-height-percentage: 60%;--loader-bar-color: var(--primary-main-color, #851515);--loader-bar-height: 6px;--control-button-width: 10%;--control-button-height: 25%;--control-button-opacity: .5;--control-button-hover-opacity: .75;--control-button-background: transparent;--transition-bezier: cubic-bezier(.5, .075, .25, .95);--slider-transition-duration: 575ms;--organic-arrow-color: #6a6a6a;--organic-arrow-border-radius: 0;--control-bullet-color: #6a6a6a;--control-bullet-active-color: #6a6a6a;--content-background-color: #2f2f2f}.awssld{display:block;position:relative;width:100%;max-width:100%}.awssld__wrapper{display:block;overflow:hidden;position:relative;height:100%;width:100%}.awssld__container{display:block;width:100%;height:0;padding-bottom:var(--slider-height-percentage)}@media all and (max-width: 500px){.awssld__container{padding-bottom:calc(var(--slider-height-percentage) * 1.25)}}.awssld__startUp{background-color:red;height:100%;width:100%}.awssld__startUp>div{height:100%;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.awssld__startUp img{width:35%;height:auto}.awssld__content{background-color:var(--content-background-color);overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.awssld__content>img,.awssld__content>video{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;position:absolute;top:0;left:0}.awssld__controls button{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:var(--control-button-width);height:var(--control-button-height);position:absolute;z-index:10;top:calc(50% - (.5 * var(--control-button-height)));border:none;background-color:var(--control-button-background);color:#fff;cursor:pointer}.awssld__controls button .awssld__controls__arrow-left,.awssld__controls button .awssld__controls__arrow-right{opacity:var(--control-button-opacity)}.awssld__controls button:hover .awssld__controls__arrow-left,.awssld__controls button:hover .awssld__controls__arrow-right{opacity:var(--control-button-opacity-hover)}.awssld__controls--active .awssld__controls__arrow-left{opacity:var(--control-button-opacity-hover);-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.awssld__controls--active .awssld__controls__arrow-right{opacity:var(--control-button-opacity-hover);-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.awssld__controls--hidden{display:none}@media all and (max-width: 520px){.awssld__controls{visibility:hidden}}.awssld__bar{display:block;width:100%;height:var(--loader-bar-height);background-color:var(--loader-bar-color);position:absolute;top:0;left:0;z-index:101;-webkit-transition:-webkit-transform 3s var(--transition-bezier);transition:-webkit-transform 3s var(--transition-bezier);transition:transform 3s var(--transition-bezier);transition:transform 3s var(--transition-bezier),-webkit-transform 3s var(--transition-bezier);-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.awssld__bar--active{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0)}.awssld__bar--end{-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}.awssld__next{right:0}.awssld__prev{left:0}.awssld__box{z-index:1;visibility:hidden}.awssld--animated{will-change:transform;visibility:visible}.awssld--animated-mobile{will-change:transform;-webkit-transition:-webkit-transform 325ms cubic-bezier(.15,.65,.1,1);transition:-webkit-transform 325ms cubic-bezier(.15,.65,.1,1);transition:transform 325ms cubic-bezier(.15,.65,.1,1);transition:transform 325ms cubic-bezier(.15,.65,.1,1),-webkit-transform 325ms cubic-bezier(.15,.65,.1,1)}.awssld--active{visibility:visible;z-index:2;-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}.awssld--moveRight,.awssld--moveLeft{-webkit-backface-visibility:hidden;backface-visibility:hidden}.awssld--moveRight{-webkit-animation:slideFromRight var(--slider-transition-duration) both var(--transition-bezier);animation:slideFromRight var(--slider-transition-duration) both var(--transition-bezier)}.awssld--moveLeft{-webkit-animation:slideFromLeft var(--slider-transition-duration) both var(--transition-bezier);animation:slideFromLeft var(--slider-transition-duration) both var(--transition-bezier)}.awssld--exit{z-index:0}.awssld--exit.awssld--moveLeft{-webkit-animation:slideToLeft var(--slider-transition-duration) both var(--transition-bezier);animation:slideToLeft var(--slider-transition-duration) both var(--transition-bezier)}.awssld--exit.awssld--moveRight{-webkit-animation:slideToRight var(--slider-transition-duration) both var(--transition-bezier);animation:slideToRight var(--slider-transition-duration) both var(--transition-bezier)}.awssld--first .awssld__prev,.awssld--last .awssld__next{visibility:hidden}.awssld--fill-parent{position:absolute!important;width:100%!important;height:100%!important;top:0;left:0}.awssld--fill-parent .awssld__container{height:100%;padding:0}.awssld__bullets{position:absolute;bottom:-40px;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.awssld__bullets button{padding:0;display:block;width:16px;height:16px;margin:5px;border-radius:50%;background:var(--control-bullet-color);text-indent:-9999px;overflow:hidden;cursor:pointer;border:none;-webkit-transition:background-color .175s ease-out,-webkit-transform .225s cubic-bezier(.8,1.35,.75,1.45);transition:background-color .175s ease-out,-webkit-transform .225s cubic-bezier(.8,1.35,.75,1.45);transition:transform .225s cubic-bezier(.8,1.35,.75,1.45),background-color .175s ease-out;transition:transform .225s cubic-bezier(.8,1.35,.75,1.45),background-color .175s ease-out,-webkit-transform .225s cubic-bezier(.8,1.35,.75,1.45)}.awssld__bullets button:hover,.awssld__bullets .awssld__bullets--loading{-webkit-transform:scale(1.2);transform:scale(1.2)}.awssld__bullets .awssld__bullets--active{-webkit-transform:scale(1.5);transform:scale(1.5);background:var(--control-bullet-active-color)}.awssld__bullets .awssld__bullets--active:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}.awssld__controls__arrow-left,.awssld__controls__arrow-right{width:100%;height:var(--organic-arrow-height);position:relative;display:block;-webkit-transition:opacity .2s ease-out,-webkit-transform .2s ease-out .125s;transition:opacity .2s ease-out,-webkit-transform .2s ease-out .125s;transition:transform .2s ease-out .125s,opacity .2s ease-out;transition:transform .2s ease-out .125s,opacity .2s ease-out,-webkit-transform .2s ease-out .125s}.awssld__controls__arrow-left:before,.awssld__controls__arrow-left:after,.awssld__controls__arrow-right:before,.awssld__controls__arrow-right:after{content:" ";position:absolute;right:calc(50% - (.7071 * (var(--organic-arrow-height) + var(--organic-arrow-thickness))) / 2);height:100%;border-radius:var(--organic-arrow-border-radius);width:var(--organic-arrow-thickness);background-color:var(--organic-arrow-color);-webkit-transition:background-color .15s ease-out,-webkit-transform .15s ease-out;transition:background-color .15s ease-out,-webkit-transform .15s ease-out;transition:transform .15s ease-out,background-color .15s ease-out;transition:transform .15s ease-out,background-color .15s ease-out,-webkit-transform .15s ease-out}.awssld__controls__arrow-left:before,.awssld__controls__arrow-right:before{-webkit-transform-origin:100% 100% 0;transform-origin:100% 100% 0;top:-50%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.awssld__controls__arrow-left:after,.awssld__controls__arrow-right:after{-webkit-transform-origin:100% 0% 0;transform-origin:100% 0% 0;top:50%;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.awssld__controls__arrow-right--active{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.awssld__controls__arrow-right--active:after{-webkit-transform:rotate(90deg) translate3d(50%,0,0)!important;transform:rotate(90deg) translate3d(50%,0,0)!important}.awssld__controls__arrow-right--active:before{-webkit-transform:rotate(-90deg) translate3d(50%,0,0)!important;transform:rotate(-90deg) translate3d(50%,0,0)!important}.awssld__controls__arrow-left:before,.awssld__controls__arrow-left:after{right:auto;left:calc(50% - (.7071 * (var(--organic-arrow-height) + var(--organic-arrow-thickness))) / 2)}.awssld__controls__arrow-left:before{-webkit-transform-origin:0 100% 0;transform-origin:0 100% 0;top:-50%;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.awssld__controls__arrow-left:after{-webkit-transform-origin:0 0 0;transform-origin:0 0 0;top:50%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.awssld__controls__arrow-left--active{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.awssld__controls__arrow-left--active:after{-webkit-transform:rotate(-90deg) translate3d(-50%,0,0)!important;transform:rotate(-90deg) translate3d(-50%,0,0)!important}.awssld__controls__arrow-left--active:before{-webkit-transform:rotate(90deg) translate3d(-50%,0,0)!important;transform:rotate(90deg) translate3d(-50%,0,0)!important}.awssld__controls button:hover .awssld__controls__arrow-left:before{opacity:1;-webkit-transform:rotate(30deg);transform:rotate(30deg)}.awssld__controls button:hover .awssld__controls__arrow-left:after{opacity:1;-webkit-transform:rotate(-30deg);transform:rotate(-30deg)}.awssld__controls button:hover .awssld__controls__arrow-right:before{opacity:1;-webkit-transform:rotate(-30deg);transform:rotate(-30deg)}.awssld__controls button:hover .awssld__controls__arrow-right:after{opacity:1;-webkit-transform:rotate(30deg);transform:rotate(30deg)}.awssld__timer{--timer-delay: 2s;--timer-release: .2s;--timer-height: 4px;--timer-background-color: rgba(0, 0, 0, .15);width:100%;height:var(--timer-height);background-color:var(--timer-background-color);position:absolute;top:0;left:0;z-index:100;-webkit-transform:translateX(-100%);transform:translate(-100%)}.awssld__timer--animated{will-change:transform;-webkit-transition:-webkit-transform var(--timer-delay) linear;transition:-webkit-transform var(--timer-delay) linear;transition:transform var(--timer-delay) linear;transition:transform var(--timer-delay) linear,-webkit-transform var(--timer-delay) linear}.awssld__timer--run{-webkit-transform:translateX(0);transform:translate(0)}.awssld__timer--fast{-webkit-transition:-webkit-transform calc(var(--timer-release) / 2) linear;transition:-webkit-transform calc(var(--timer-release) / 2) linear;transition:transform calc(var(--timer-release) / 2) linear;transition:transform calc(var(--timer-release) / 2) linear,-webkit-transform calc(var(--timer-release) / 2) linear;-webkit-transform:translateX(-.00001px);transform:translate(-.00001px)}.awssld__timer--end{-webkit-transform:translateX(-.0001px);transform:translate(-.0001px);-webkit-transition:-webkit-transform var(--timer-release) linear;transition:-webkit-transform var(--timer-release) linear;transition:transform var(--timer-release) linear;transition:transform var(--timer-release) linear,-webkit-transform var(--timer-release) linear}.awssld__timer--hidden{display:none}@-webkit-keyframes slideFromLeft{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes slideFromLeft{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@-webkit-keyframes slideFromRight{0%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes slideFromRight{0%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@-webkit-keyframes slideToLeft{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes slideToLeft{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@-webkit-keyframes slideToRight{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}@keyframes slideToRight{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}.custom-slider-container{--content-background-color: #00000000 !important}.custom-slider-container .awssld__content>*{width:100%;height:100%}.custom-slider-container .awssld__controls button{padding:2.4rem;width:fit-content;height:fit-content;top:50%;transform:translateY(-50%)}.awssld--scaleOutAnimation{--scale-out-scale: .85}.awssld--scaleOutAnimation .awssld--exit.awssld--moveRight,.awssld--scaleOutAnimation .awssld--exit.awssld--moveLeft{-webkit-animation:scaleOut var(--slider-transition-duration) both var(--transition-bezier);animation:scaleOut var(--slider-transition-duration) both var(--transition-bezier)}@-webkit-keyframes scaleOut{to{-webkit-transform:scale(var(--scale-out-scale));transform:scale(var(--scale-out-scale))}}@keyframes scaleOut{to{-webkit-transform:scale(var(--scale-out-scale));transform:scale(var(--scale-out-scale))}}.awssld--foldOutAnimation{--fold-out-perspective: 2000px;--fold-out-angle: 90deg}.awssld--foldOutAnimation .awssld__container{-webkit-perspective:var(--fold-out-perspective);perspective:var(--fold-out-perspective)}.awssld--foldOutAnimation .awssld--exit.awssld--moveLeft,.awssld--foldOutAnimation .awssld--exit.awssld--moveRight{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.awssld--foldOutAnimation .awssld--exit.awssld--moveLeft{-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-animation:foldLeft var(--slider-transition-duration) both var(--transition-bezier);animation:foldLeft var(--slider-transition-duration) both var(--transition-bezier)}.awssld--foldOutAnimation .awssld--exit.awssld--moveRight{-webkit-transform-origin:0% 50%;transform-origin:0% 50%;-webkit-animation:foldRight var(--slider-transition-duration) both var(--transition-bezier);animation:foldRight var(--slider-transition-duration) both var(--transition-bezier)}@-webkit-keyframes foldLeft{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1));transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1))}}@keyframes foldLeft{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1));transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1))}}@-webkit-keyframes foldRight{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle));transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle))}}@keyframes foldRight{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle));transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle))}}.awssld--cubeAnimation{--cube-animation-duration: 675ms;--cube-animation-perspective: 1800px;--cube-animation-ease-in: cubic-bezier(.8, 0, 1, .8);--cube-animation-ease-out: cubic-bezier(0, .2, .2, 1);--cube-translateZ-distance: -225px}.awssld--cubeAnimation .awssld__container{-webkit-perspective:var(--cube-animation-perspective);perspective:var(--cube-animation-perspective)}.awssld--cubeAnimation .awssld--moveRight{-webkit-transform-origin:0% 50%;transform-origin:0% 50%;-webkit-animation:cubeLeftIn var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeLeftIn var(--cube-animation-duration) both var(--cube-animation-ease-in)}.awssld--cubeAnimation .awssld--moveLeft{-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-animation:cubeRightIn var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeRightIn var(--cube-animation-duration) both var(--cube-animation-ease-in)}.awssld--cubeAnimation .awssld--exit.awssld--moveLeft{-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-animation:cubeLeftOut var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeLeftOut var(--cube-animation-duration) both var(--cube-animation-ease-in)}.awssld--cubeAnimation .awssld--exit.awssld--moveRight{-webkit-transform-origin:0% 50%;transform-origin:0% 50%;-webkit-animation:cubeRightOut var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeRightOut var(--cube-animation-duration) both var(--cube-animation-ease-in)}@-webkit-keyframes cubeLeftOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}to{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}}@keyframes cubeLeftOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}to{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}}@-webkit-keyframes cubeRightOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}to{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}}@keyframes cubeRightOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}to{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}}@-webkit-keyframes cubeLeftIn{0%{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}}@keyframes cubeLeftIn{0%{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}}@-webkit-keyframes cubeRightIn{0%{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}}@keyframes cubeRightIn{0%{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}}.awssld--fallAnimation{--fall-animation-angle: 16deg;--fall-scaling-in-from: .9}.awssld--fallAnimation .awssld--moveRight,.awssld--fallAnimation .awssld--moveLeft{-webkit-animation:scaleUp calc(var(--slider-transition-duration) / 2) var(--transition-bezier) both;animation:scaleUp calc(var(--slider-transition-duration) / 2) var(--transition-bezier) both}.awssld--fallAnimation .awssld--exit{z-index:100}.awssld--fallAnimation .awssld--exit.awssld--moveLeft{-webkit-transform-origin:0% 0%;transform-origin:0% 0%;-webkit-animation:rotateFallRight var(--slider-transition-duration) both ease-in-out;animation:rotateFallRight var(--slider-transition-duration) both ease-in-out}.awssld--fallAnimation .awssld--exit.awssld--moveRight{-webkit-transform-origin:100% 0%;transform-origin:100% 0%;-webkit-animation:rotateFallLeft var(--slider-transition-duration) both ease-in-out;animation:rotateFallLeft var(--slider-transition-duration) both ease-in-out}@-webkit-keyframes scaleUp{0%{-webkit-transform:scale(var(--fall-scaling-in-from));transform:scale(var(--fall-scaling-in-from))}75%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes scaleUp{0%{-webkit-transform:scale(var(--fall-scaling-in-from));transform:scale(var(--fall-scaling-in-from))}75%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes rotateFallRight{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(var(--fall-animation-angle));transform:rotate(var(--fall-animation-angle))}60%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) - 2deg));transform:rotate(calc(var(--fall-animation-angle) - 2deg))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * 2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * 2))}}@keyframes rotateFallRight{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(var(--fall-animation-angle));transform:rotate(var(--fall-animation-angle))}60%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) - 2deg));transform:rotate(calc(var(--fall-animation-angle) - 2deg))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * 2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * 2))}}@-webkit-keyframes rotateFallLeft{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) * -1));transform:rotate(calc(var(--fall-animation-angle) * -1))}60%{-webkit-transform:rotateZ(calc((var(--fall-animation-angle) - 2deg) * -1));transform:rotate(calc((var(--fall-animation-angle) - 2deg) * -1))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * -2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * -2))}}@keyframes rotateFallLeft{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) * -1));transform:rotate(calc(var(--fall-animation-angle) * -1))}60%{-webkit-transform:rotateZ(calc((var(--fall-animation-angle) - 2deg) * -1));transform:rotate(calc((var(--fall-animation-angle) - 2deg) * -1))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * -2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * -2))}}._tag-container_13a7m_1{padding:3px 7px;border-radius:100rem;gap:6px;justify-content:center;color:var(--neutral-text-subtitle-color, #61616B);border:var(--neutral-bolder-border)}._tag-container_13a7m_1[class~=dashed]{border-style:dashed}._tag-container_13a7m_1[class~=size32]{padding:4px 11px;gap:8px}._tag-container_13a7m_1._type-button_13a7m_37{cursor:pointer}._tag-container_13a7m_1>._tag-label_13a7m_45{color:inherit;font:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit}._tag-container_13a7m_1._disabled_13a7m_67{color:var(--neutral-text-disabled-color);background-color:var(--neutral-disable-background-color)!important;border-color:var(--neutral-disable-background-color)!important;pointer-events:none!important}._tag-container_13a7m_1[class~=tag-primary]{background-color:var(--primary-main-color)!important;border-color:var(--primary-main-color)!important}._tag-container_13a7m_1[class~=tag-primary] *{color:var(--neutral-text-stable-color)!important;--color: var(--neutral-text-stable-color) !important}._tag-container_13a7m_1[class~=tag-grey]{border-color:var(--neutral-bolder-border-color)!important;background-color:var(--neutral-main-background-color)!important}._tag-container_13a7m_1[class~=tag-grey] *{color:var(--neutral-text-subtitle-color)!important;--color: var(--neutral-text-subtitle-color) !important}._tag-container_13a7m_1[class~=tag-neutral]{border-color:var(--neutral-bolder-border-color)!important}._tag-container_13a7m_1[class~=tag-neutral] *{color:var(--neutral-text-subtitle-color)!important;--color: var(--neutral-text-subtitle-color) !important}._tag-container_13a7m_1[class~=tag-infor]{background-color:var(--infor-background);border-color:var(--infor-main-color)!important}._tag-container_13a7m_1[class~=tag-infor] *{color:var(--infor-main-color)!important;--color: var(--infor-main-color) !important}._tag-container_13a7m_1[class~=tag-warning]{background-color:var(--warning-background);border-color:var(--warning-main-color)!important}._tag-container_13a7m_1[class~=tag-warning] *{color:var(--warning-main-color)!important;--color: var(--warning-main-color) !important}._tag-container_13a7m_1[class~=tag-error]{background-color:var(--error-background);border-color:var(--error-main-color)!important}._tag-container_13a7m_1[class~=tag-error] *{color:var(--error-main-color)!important;--color: var(--error-main-color) !important}._tag-container_13a7m_1[class~=tag-success]{background-color:var(--success-background);border-color:var(--success-main-color)!important}._tag-container_13a7m_1[class~=tag-success] *{color:var(--success-main-color)!important;--color: var(--success-main-color) !important}._number-picker-container_1q4pn_1,._simple-number-picker_1q4pn_1{position:relative}._number-picker-container_1q4pn_1{gap:.4rem}._number-picker-container_1q4pn_1[number-picker-type=outline]{border-radius:.8rem;padding:0 .6rem;border:var(--neutral-bolder-border, 1px solid #D7D7DB)}._number-picker-container_1q4pn_1[number-picker-type=outline]>div:has(>svg),._simple-number-picker_1q4pn_1[number-picker-type=outline]>div:has(>svg){padding:.6rem;border-radius:0}._number-picker-container_1q4pn_1[class~=size40]>div>svg{width:1.6rem;height:1.6rem}._number-picker-container_1q4pn_1[class~=size40]>div:has(>svg){padding:1.1rem}._number-picker-container_1q4pn_1[class~=size40][number-picker-type=outline]>div:has(>svg){padding:1rem}._number-picker-container_1q4pn_1[class~=size24]>div:has(>svg){padding:.5rem}._number-picker-container_1q4pn_1[class~=size24][number-picker-type=outline]>div:has(>svg){padding:.4rem}._number-picker-container_1q4pn_1[class~=size24]>div>svg{width:1.2rem;height:1.2rem}._number-picker-container_1q4pn_1[number-picker-type=icon-button]>div:has(>svg),._simple-number-picker_1q4pn_1[number-picker-type=icon-button]>div:has(>svg){color:var(--neutral-text-subtitle-color, #61616B);border:1px solid currentColor}._number-picker-container_1q4pn_1>input,._simple-number-picker_1q4pn_1>input{flex:1;width:100%;min-width:5.6rem;border:none;border-color:transparent;color:inherit;outline:none;padding:0 .4rem;background-color:transparent!important;font:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:center;text-overflow:inherit}._number-picker-container_1q4pn_1 *,._simple-number-picker_1q4pn_1 *{font-size:inherit!important}._number-picker-container_1q4pn_1>input:focus{border-color:var(--primary-main-color, #2F80ED);border-radius:.8rem}._number-picker-container_1q4pn_1[number-picker-type=outline]:focus-within{border-color:var(--primary-main-color, #2F80ED)}._number-picker-container_1q4pn_1:has(>input:disabled){pointer-events:none!important;color:var(--neutral-text-disabled-color)}._number-picker-container_1q4pn_1[number-picker-type=outline]:has(>input:disabled){background-color:var(--neutral-disable-background-color)}._number-picker-container_1q4pn_1:has(>input:disabled)>div:has(>svg){background-color:var(--neutral-disable-background-color)}._number-picker-container_1q4pn_1._helper-text_1q4pn_197,._simple-number-picker_1q4pn_1._helper-text_1q4pn_197{overflow:visible!important;border-color:var(--helper-text-color)}._number-picker-container_1q4pn_1._helper-text_1q4pn_197:after,._simple-number-picker_1q4pn_1._helper-text_1q4pn_197:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._input-opt-container_gu2t8_1{height:4.8rem;gap:.8rem}._input-opt-container_gu2t8_1>input{border:var(--neutral-bolder-border);height:100%;aspect-ratio:1 / 1;border-radius:.8rem;text-align:center;min-width:3.2rem;font:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;font-style:inherit}._input-opt-container_gu2t8_1:focus-within>input{border-color:var(--primary-main-color)}._input-opt-container_gu2t8_1._helper-text_gu2t8_49{overflow:visible!important;border-color:var(--helper-text-color)!important}._input-opt-container_gu2t8_1._helper-text_gu2t8_49:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._login-view-container_161cl_1{gap:4.8rem;align-items:center;min-width:320px;max-width:460px}._login-view-form-container_161cl_15{gap:2rem;align-items:inherit;width:100%}._login-view-form-container_161cl_15>div:last-child{padding:.4rem 3.2rem;gap:inherit;align-items:inherit;width:100%}._login-view-form-container_161cl_15>div:last-child>div{width:100%}button._login-btn_161cl_49{height:4.8rem;width:100%;justify-content:center;background-color:var(--primary-main-color);color:var(--neutral-text-stable-color)}button:disabled._login-btn_161cl_49{background-color:var(--neutral-disable-background-color);color:var(--neutral-text-disabled-color);cursor:context-menu}._forgot-password-btn_161cl_77{color:var(--neutral-text-subtitle-color)}._forgot-password-btn_161cl_77:hover,._register-btn_161cl_95:hover{text-decoration:underline;cursor:pointer}._login-social-media_161cl_105{gap:1.6rem;flex-wrap:wrap}._login-social-media_161cl_105>button{height:4.8rem;width:calc((100% - 1.6rem)/2);gap:1.6rem;justify-content:center;border:var(--neutral-bolder-border);background-color:transparent}._or-spacing_161cl_133{gap:1.2rem}._or-spacing_161cl_133>div:nth-child(odd){height:1px;width:100%;flex:1;background-color:var(--neutral-text-body-reverse-color)}._or-spacing_161cl_133>div:nth-child(2n){color:var(--neutral-text-subtitle-color)}.editor-container{position:relative;--ck-color-text: var(--neutral-text-title-color);width:100%;height:400px;max-height:600px;border-radius:.8rem;border:var(--neutral-bolder-border);overflow:hidden visible}.editor-container:has(.ck-read-only){background-color:var(--neutral-disable-background-color)!important;pointer-events:none!important}.editor-container:focus-within{border-color:var(--primary-main-color)}.editor-container.helper-text{overflow:visible!important;border-color:var(--helper-text-color)!important}.editor-container.helper-text:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}.ck-content{font-family:Inter;line-height:1.6;word-break:break-word}.ck-content h3.category{font-family:Inter;font-size:20px;font-weight:700;color:#555;letter-spacing:10px;margin:0;padding:0}.ck-content h2.document-title{font-family:Inter;font-size:50px;font-weight:700;margin:0;padding:0;border:0}.ck-content h3.document-subtitle{font-family:Inter;font-size:20px;color:#555;margin:0 0 1em;font-weight:700;padding:0}.ck-content blockquote.side-quote{font-family:Inter;font-style:normal;float:right;width:35%;position:relative;border:0;overflow:visible;z-index:1;margin-left:1em}.ck-content blockquote.side-quote:before{content:"“";position:absolute;top:-37px;left:-10px;display:block;font-size:200px;color:#e7e7e7;z-index:-1;line-height:1}.ck-content blockquote.side-quote p{font-size:2em;line-height:1}.ck-content blockquote.side-quote p:last-child:not(:first-child){font-size:1.3em;text-align:right;color:#555}.ck-content span.marker{background:#ff0}.ck-content span.spoiler{background:#000;color:#000}.ck-content span.spoiler:hover{background:#000;color:#fff}.ck-content pre.fancy-code{border:0;margin-left:2em;margin-right:2em;border-radius:10px}.ck-content pre.fancy-code:before{content:"";display:block;height:13px;background:url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NCAxMyI+CiAgPGNpcmNsZSBjeD0iNi41IiBjeT0iNi41IiByPSI2LjUiIGZpbGw9IiNGMzZCNUMiLz4KICA8Y2lyY2xlIGN4PSIyNi41IiBjeT0iNi41IiByPSI2LjUiIGZpbGw9IiNGOUJFNEQiLz4KICA8Y2lyY2xlIGN4PSI0Ny41IiBjeT0iNi41IiByPSI2LjUiIGZpbGw9IiM1NkM0NTMiLz4KPC9zdmc+Cg==);margin-bottom:8px;background-repeat:no-repeat}.ck-content pre.fancy-code-dark{background:#272822;color:#fff;box-shadow:5px 5px #0000001f}.ck-content pre.fancy-code-bright{background:#dddfe0;color:#000;box-shadow:5px 5px #b3b3b3}.editor-container_classic-editor .editor-container__editor .ck-editor .ck-editor__editable{border-radius:0}.ck-editor-container{--ck-font-size-base: 1.4rem}.editor-container__editor{flex:1;height:100%;overflow:hidden!important;display:flex;flex-direction:column}.editor-container__editor>div,.ck.ck-reset.ck-editor.ck-rounded-corners{flex:1;height:100%;overflow:hidden!important;display:flex;flex-direction:column}.ck.ck-editor__main>.ck.ck-content.ck-rounded-corners{min-height:100%}.ck.ck-toolbar{background-color:var(--neutral-absolute-background-color);border-radius:.8rem .8rem 0 0!important}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content{height:40px;border:none!important;border-radius:.8rem .8rem 0 0!important;border-bottom:var(--neutral-bolder-border)!important}.ck.ck-editor__main{flex:1;height:100%!important;overflow:hidden auto!important}.ck.ck-editor__main>div{background-color:transparent!important;border:none!important;font-size:16px!important}.ck.ck-color-grid>button{border:var(--neutral-bolder-border);border-radius:.4rem!important}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/:root{--ck-color-base-foreground: hsl(0, 0%, 98%);--ck-color-base-background: hsl(0, 0%, 100%);--ck-color-base-border: hsl(220, 6%, 81%);--ck-color-base-action: hsl(104, 50.2%, 42.5%);--ck-color-base-focus: hsl(209, 92%, 70%);--ck-color-base-text: hsl(0, 0%, 20%);--ck-color-base-active: hsl(218.1, 100%, 58%);--ck-color-base-active-focus: hsl(218.2, 100%, 52.5%);--ck-color-base-error: hsl(15, 100%, 43%);--ck-color-focus-border-coordinates: 218, 81.8%, 56.9%;--ck-color-focus-border: hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow: hsl(212.4, 89.3%, 89%);--ck-color-focus-disabled-shadow: hsla(209, 90%, 72%,.3);--ck-color-focus-error-shadow: hsla(9,100%,56%,.3);--ck-color-text: var(--ck-color-base-text);--ck-color-shadow-drop: hsla(0, 0%, 0%, .15);--ck-color-shadow-drop-active: hsla(0, 0%, 0%, .2);--ck-color-shadow-inner: hsla(0, 0%, 0%, .1);--ck-color-button-default-background: transparent;--ck-color-button-default-hover-background: hsl(0, 0%, 94.1%);--ck-color-button-default-active-background: hsl(0, 0%, 94.1%);--ck-color-button-default-disabled-background: transparent;--ck-color-button-on-background: hsl(212, 100%, 97.1%);--ck-color-button-on-hover-background: hsl(211.7, 100%, 92.9%);--ck-color-button-on-active-background: hsl(211.7, 100%, 92.9%);--ck-color-button-on-disabled-background: hsl(211, 15%, 95%);--ck-color-button-on-color: hsl(218.1, 100%, 58%);--ck-color-button-action-background: var(--ck-color-base-action);--ck-color-button-action-hover-background: hsl(104, 53.2%, 40.2%);--ck-color-button-action-active-background: hsl(104, 53.2%, 40.2%);--ck-color-button-action-disabled-background: hsl(104, 44%, 58%);--ck-color-button-action-text: var(--ck-color-base-background);--ck-color-button-save: hsl(120, 100%, 27%);--ck-color-button-cancel: hsl(15, 100%, 43%);--ck-color-switch-button-off-background: hsl(0, 0%, 57.6%);--ck-color-switch-button-off-hover-background: hsl(0, 0%, 49%);--ck-color-switch-button-on-background: var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background: hsl(104, 53.2%, 40.2%);--ck-color-switch-button-inner-background: var(--ck-color-base-background);--ck-color-switch-button-inner-shadow: hsla(0, 0%, 0%, .1);--ck-color-dropdown-panel-background: var(--ck-color-base-background);--ck-color-dropdown-panel-border: var(--ck-color-base-border);--ck-color-dialog-background: var(--ck-custom-background);--ck-color-dialog-form-header-border: var(--ck-custom-border);--ck-color-input-background: var(--ck-color-base-background);--ck-color-input-border: var(--ck-color-base-border);--ck-color-input-error-border: var(--ck-color-base-error);--ck-color-input-text: var(--ck-color-base-text);--ck-color-input-disabled-background: hsl(0, 0%, 95%);--ck-color-input-disabled-border: var(--ck-color-base-border);--ck-color-input-disabled-text: hsl(0, 0%, 46%);--ck-color-list-background: var(--ck-color-base-background);--ck-color-list-button-hover-background: var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background: var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus: var(--ck-color-button-on-color);--ck-color-list-button-on-text: var(--ck-color-base-background);--ck-color-panel-background: var(--ck-color-base-background);--ck-color-panel-border: var(--ck-color-base-border);--ck-color-toolbar-background: var(--ck-color-base-background);--ck-color-toolbar-border: var(--ck-color-base-border);--ck-color-tooltip-background: var(--ck-color-base-text);--ck-color-tooltip-text: var(--ck-color-base-background);--ck-color-engine-placeholder-text: hsl(0, 0%, 44%);--ck-color-upload-bar-background: hsl(209, 92%, 70%);--ck-color-link-default: hsl(240, 100%, 47%);--ck-color-link-selected-background: hsla(201, 100%, 56%, .1);--ck-color-link-fake-selection: hsla(201, 100%, 56%, .3);--ck-color-highlight-background: hsl(60, 100%, 50%);--ck-color-light-red: hsl(0, 100%, 90%)}:root{--ck-disabled-opacity: .5}:root{--ck-focus-outer-shadow-geometry: 0 0 0 3px;--ck-focus-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring: 1px solid var(--ck-color-focus-border)}:root{--ck-font-size-base: 13px;--ck-line-height-base: 1.84615;--ck-font-face: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;--ck-font-size-tiny: .7em;--ck-font-size-small: .75em;--ck-font-size-normal: 1em;--ck-font-size-big: 1.4em;--ck-font-size-large: 1.8em}:root{--ck-ui-component-min-height: 2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck-reset_all *:not(.ck-reset_all-excluded *){box-sizing:border-box;width:auto;height:auto;position:static;margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck-reset_all *:not(.ck-reset_all-excluded *){border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck-reset_all .ck-rtl *:not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all textarea:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){padding:10px;border:2px groove hsl(255,7%,88%)}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius: 2px}:root{--ck-inner-shadow: 2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow: 0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active: 0 3px 6px 1px var(--ck-color-shadow-drop-active)}:root{--ck-spacing-unit: .6em;--ck-spacing-large: calc(var(--ck-spacing-unit) * 1.5);--ck-spacing-standard: var(--ck-spacing-unit);--ck-spacing-medium: calc(var(--ck-spacing-unit) * .8);--ck-spacing-small: calc(var(--ck-spacing-unit) * .5);--ck-spacing-tiny: calc(var(--ck-spacing-unit) * .3);--ck-spacing-extra-tiny: calc(var(--ck-spacing-unit) * .16)}.ck.ck-autocomplete>.ck-search__results{border-radius:0;max-height:200px;overflow-y:auto;background:var(--ck-color-base-background);border:1px solid var(--ck-color-dropdown-panel-border);min-width:auto}.ck-rounded-corners .ck.ck-autocomplete>.ck-search__results,.ck.ck-autocomplete>.ck-search__results.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-autocomplete>.ck-search__results{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{border-top-left-radius:0;border-top-right-radius:0;margin-top:-1px}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background);border-radius:0;white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion: reduce){.ck.ck-button,a.ck.ck-button{transition:none}}.ck.ck-button:active,a.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit;opacity:.5}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-medium)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background);color:var(--ck-color-button-on-color)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background);color:var(--ck-color-button-action-text)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}:root{--ck-switch-button-toggle-width: 2.6153846154em;--ck-switch-button-toggle-inner-size: calc(1.0769230769em + 1px);--ck-switch-button-translation: calc( var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px );--ck-switch-button-inner-hover-shadow: 0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton:hover,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:active{color:inherit;background:transparent}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2 * var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2 * var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;border:1px solid transparent;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0;width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(.5 * var(--ck-border-radius))}@media (prefers-reduced-motion: reduce){.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{transition:none}}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;outline:none;box-shadow:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline-offset:1px;outline:var(--ck-focus-ring)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translate(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translate(calc(-1 * var( --ck-switch-button-translation )))}.ck.ck-button.ck-list-item-button{padding:var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard))}.ck.ck-button.ck-list-item-button,.ck.ck-button.ck-list-item-button.ck-on{background:var(--ck-color-list-background);color:var(--ck-color-text)}[dir=ltr] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-right:var(--ck-spacing-small)}.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover,.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable),.ck.ck-button.ck-list-item-button.ck-on:hover{background:var(--ck-color-list-button-hover-background)}.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled):not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable):not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:hover:not(.ck-disabled){color:var(--ck-color-text)}:root{--ck-collapsible-arrow-size: calc(.5 * var(--ck-icon-size))}.ck.ck-collapsible>.ck.ck-button{width:100%;font-weight:700;border-radius:0;color:inherit}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:not(:focus),.ck.ck-collapsible>.ck.ck-button:hover:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:var(--ck-spacing-medium) var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}:root{--ck-color-grid-tile-size: 24px;--ck-color-color-grid-check-icon: hsl(212, 81%, 46%)}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{transition:.2s ease box-shadow}@media (forced-colors: none){.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;border:0}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}}@media (forced-colors: active){.ck.ck-color-grid__tile{width:unset;height:unset;min-width:unset;min-height:unset;padding:0 var(--ck-spacing-small)}.ck.ck-color-grid__tile .ck-button__label{display:inline-block}}@media (prefers-reduced-motion: reduce){.ck.ck-color-grid__tile{transition:none}}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{width:100%}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{padding:calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker{padding:8px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker{height:100px;min-width:180px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer),.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer){width:15px;height:15px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{padding:0 8px 8px}:root{--ck-dialog-overlay-background-color: hsla( 0, 0%, 0%, .5 );--ck-dialog-drop-shadow: 0px 0px 6px 2px hsl(0deg 0% 0% / 15%);--ck-dialog-max-width: 100vw;--ck-dialog-max-height: 90vh;--ck-color-dialog-background: var(--ck-color-base-background);--ck-color-dialog-form-header-border: var(--ck-color-base-border)}.ck.ck-dialog-overlay{animation:ck-dialog-fade-in .3s;background:var(--ck-dialog-overlay-background-color);z-index:var(--ck-z-dialog)}.ck.ck-dialog{border-radius:0;--ck-drop-shadow: var(--ck-dialog-drop-shadow);background:var(--ck-color-dialog-background);max-height:var(--ck-dialog-max-height);max-width:var(--ck-dialog-max-width);border:1px solid var(--ck-color-base-border);overscroll-behavior:contain}.ck-rounded-corners .ck.ck-dialog,.ck.ck-dialog.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dialog{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dialog .ck.ck-form__header{border-bottom:1px solid var(--ck-color-dialog-form-header-border)}.ck-dialog-scroll-locked{overflow:hidden}@keyframes ck-dialog-fade-in{0%{background:#0000}to{background:var(--ck-dialog-overlay-background-color)}}.ck.ck-dialog .ck.ck-dialog__actions{padding:var(--ck-spacing-large)}.ck.ck-dialog .ck.ck-dialog__actions>*+*{margin-left:var(--ck-spacing-large)}:root{--ck-dropdown-arrow-size: calc(.5 * var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}.ck.ck-dropdown__panel:focus{outline:none}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}:root{--ck-color-split-button-hover-background: hsl(0, 0%, 92%);--ck-color-split-button-hover-border: hsl(0, 0%, 70%)}[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-top-width:0px;border-bottom-width:0px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border: var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button{width:100%;padding:var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));border-radius:0}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus{border-color:transparent;box-shadow:none}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-icon-spacing:not(:has(.ck-button__icon))>.ck-button__label{margin-left:calc(var(--ck-icon-size) - var(--ck-spacing-small))}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{transform:rotate(-90deg);margin-right:calc(-1 * var(--ck-spacing-small))}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{transform:rotate(90deg);margin-left:calc(-1 * var(--ck-spacing-small))}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-dropdown-menu-list__nested-menu__button__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}:root{--ck-dropdown-menu-menu-item-min-width: 18em}.ck.ck-dropdown-menu-list__nested-menu__item{min-width:var(--ck-dropdown-menu-menu-item-min-width)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button{border-radius:0}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container,.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size: 20px}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container{margin-left:calc(-1 * var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus{border-color:transparent;box-shadow:none}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}:root{--ck-dropdown-menu-menu-panel-max-width: 75vw}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;height:fit-content;max-width:var(--ck-dropdown-menu-menu-panel-max-width)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:after,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:before{display:none}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_es,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_se{border-top-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ws,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_sw{border-top-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_en,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ne{border-bottom-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_wn,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_nw{border-bottom-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:focus{outline:none}:root{--ck-accessibility-help-dialog-max-width: 600px;--ck-accessibility-help-dialog-max-height: 400px;--ck-accessibility-help-dialog-border-color: hsl(220, 6%, 81%);--ck-accessibility-help-dialog-code-background-color: hsl(0deg 0% 92.94%);--ck-accessibility-help-dialog-kbd-shadow-color: hsl(0deg 0% 61%)}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content{padding:var(--ck-spacing-large);max-width:var(--ck-accessibility-help-dialog-max-width);max-height:var(--ck-accessibility-help-dialog-max-height);overflow:auto;-webkit-user-select:text;user-select:text;border:1px solid transparent}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content *{white-space:normal}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content .ck-label{display:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3{font-weight:700;font-size:1.2em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4{font-weight:700;font-size:1em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content p,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content table{margin:1em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl{display:grid;grid-template-columns:2fr 1fr;border-top:1px solid var(--ck-accessibility-help-dialog-border-color);border-bottom:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{border-bottom:1px solid var(--ck-accessibility-help-dialog-border-color);padding:.4em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{grid-column-start:1}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{grid-column-start:2;text-align:right}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{display:inline-block;background:var(--ck-accessibility-help-dialog-code-background-color);padding:.4em;vertical-align:middle;line-height:1;border-radius:2px;text-align:center;font-size:.9em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{font-family:monospace}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{min-width:1.8em;box-shadow:0 1px 1px var(--ck-accessibility-help-dialog-kbd-shadow-color);margin:0 1px}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd+kbd{margin-left:2px}:root{--ck-color-editable-blur-selection: hsl(0, 0%, 85%)}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>*:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>*:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background)}:root{--ck-form-header-height: 44px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-form__header>.ck-icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-form__header>.ck-icon{margin-left:var(--ck-spacing-medium)}.ck.ck-form__header .ck-form__header__label{--ck-font-size-base: 15px;font-weight:700}:root{--ck-icon-size: calc(var(--ck-line-height-base) * var(--ck-font-size-normal));--ck-icon-font-size: .8333350694em}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:var(--ck-icon-font-size);cursor:inherit}.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color *:not([fill]){fill:currentColor}:root{--ck-input-width: 18em;--ck-input-text-width: var(--ck-input-width)}.ck.ck-input{border-radius:0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion: reduce){.ck.ck-input{transition:none}}.ck.ck-input:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-input-shake .3s ease both}@media (prefers-reduced-motion: reduce){.ck.ck-input.ck-error{animation:none}}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translate(-2px)}40%{transform:translate(2px)}60%{transform:translate(-1px)}80%{transform:translate(1px)}}.ck.ck-label{font-weight:700}:root{--ck-labeled-field-view-transition: .1s cubic-bezier(0, 0, .24, .95);--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x: var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y: calc(.6 * var(--ck-font-size-base));--ck-color-labeled-field-label-background: var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0;pointer-events:none;background:var(--ck-color-labeled-field-label-background);padding:0 calc(.5 * var(--ck-font-size-tiny));line-height:initial;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75)}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0;transform-origin:100% 0;transform:translate(calc(-1 * var(--ck-spacing-medium)),-6px) scale(.75)}@media (prefers-reduced-motion: reduce){.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transition:none}}.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(-1 * var(--ck-labeled-field-label-default-position-x)),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}.ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}.ck.ck-list{border-radius:0;list-style-type:none;background:var(--ck-color-list-background);padding:var(--ck-spacing-small) 0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list__item{cursor:default;min-width:15em}.ck.ck-list__item>.ck-button:not(.ck-list-item-button){padding:var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));min-height:unset;width:100%;border-radius:0}[dir=ltr] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:left}[dir=rtl] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:right}.ck.ck-list__item>.ck-button:not(.ck-list-item-button) .ck-button__label{line-height:calc(var(--ck-line-height-base) * var(--ck-font-size-base))}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button){background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck-list .ck-list__group{padding-top:var(--ck-spacing-medium)}.ck-list .ck-list__group:first-child{padding-top:0}*:not(.ck-hidden)~.ck-list .ck-list__group{border-top:1px solid var(--ck-color-base-border)}.ck-list .ck-list__group>.ck-label{font-size:11px;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large) 0}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border);margin:var(--ck-spacing-small) 0}.ck.ck-menu-bar{display:flex;flex-wrap:wrap;justify-content:flex-start;background:var(--ck-color-base-background);padding:var(--ck-spacing-small);gap:var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border);width:100%}.ck.ck-menu-bar__menu{font-size:inherit}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level{max-width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button{width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button{padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-height:unset}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-button__label{width:unset;line-height:unset;overflow:visible}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-icon{display:none}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button{border-radius:0}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{transform:rotate(-90deg);margin-left:var(--ck-spacing-standard);margin-right:calc(-1 * var(--ck-spacing-small))}[dir=rtl] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{transform:rotate(90deg);left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small);margin-left:calc(-1 * var(--ck-spacing-small))}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button.ck-disabled>.ck-menu-bar__menu__button__arrow{opacity:var(--ck-disabled-opacity)}:root{--ck-menu-bar-menu-item-min-width: 18em}.ck.ck-menu-bar__menu .ck.ck-menu-bar__menu__item{min-width:var(--ck-menu-bar-menu-item-min-width)}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button{border-radius:0}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container,.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size: 20px}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{font-size:var(--ck-icon-font-size)}[dir=ltr] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-left:var(--ck-spacing-medium)}:root{--ck-menu-bar-menu-panel-max-width: 75vw}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{border-radius:0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;height:fit-content;max-width:var(--ck-menu-bar-menu-panel-max-width)}.ck-rounded-corners .ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{border-top-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{border-top-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne{border-bottom-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw{border-bottom-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel:focus{outline:none}.ck.ck-menu-bar .ck-list-item-button:focus,.ck.ck-menu-bar .ck-list-item-button:active{border-color:transparent;box-shadow:none}.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:focus,.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:active{position:relative;z-index:2;outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}:root{--ck-balloon-border-width: 1px;--ck-balloon-arrow-offset: 2px;--ck-balloon-arrow-height: 10px;--ck-balloon-arrow-half-width: 8px;--ck-balloon-arrow-drop-shadow: 0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0;min-height:15px;background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border)}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:before,.ck.ck-balloon-panel[class*=arrow_n]:after{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:before,.ck.ck-balloon-panel[class*=arrow_s]:after{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:before,.ck.ck-balloon-panel[class*=arrow_e]:after{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:before,.ck.ck-balloon-panel[class*=arrow_w]:after{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after{left:50%;margin-left:calc(-1 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after{left:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after{right:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after{left:50%;margin-left:calc(-1 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after{left:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after{right:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after{right:25%;margin-right:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after{left:25%;margin-left:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after{right:25%;margin-right:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after{left:25%;margin-left:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after{right:calc(-1 * var(--ck-balloon-arrow-height));margin-top:calc(-1 * var(--ck-balloon-arrow-half-width));top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after{left:calc(-1 * var(--ck-balloon-arrow-height));margin-top:calc(-1 * var(--ck-balloon-arrow-half-width));top:50%}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}:root{--ck-balloon-fake-panel-offset-horizontal: 6px;--ck-balloon-fake-panel-offset-vertical: 6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:nth-child(1){margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal) * 2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical) * 2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal) * 3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical) * 3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical: -6px}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child){margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width: 600px){.ck.ck-responsive-form{padding:0;width:calc(.8 * var(--ck-input-width))}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text,.ck.ck-responsive-form .ck-labeled-field-view .ck-input-number{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:nth-last-child(1),.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0}.ck.ck-responsive-form>.ck-button:nth-last-child(1):not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(1),[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(1),[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(1):last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}:root{--ck-search-field-view-horizontal-spacing: calc(var(--ck-icon-size) + var(--ck-spacing-medium))}.ck.ck-search>.ck-labeled-field-view .ck-input{width:100%}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon{--ck-labeled-field-label-default-position-x: var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon>.ck-labeled-field-view__input-wrapper>.ck-icon{opacity:.5;pointer-events:none}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{padding-left:var(--ck-search-field-view-horizontal-spacing)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input:not(.ck-input-text_empty){padding-left:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset{--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset.ck-labeled-field-view_empty{--ck-labeled-field-empty-unfocused-max-width: 100% - var(--ck-search-field-view-horizontal-spacing) - var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{min-width:auto;min-height:auto;background:none;opacity:.5;padding:0}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{left:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset:hover{opacity:1}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input:not(.ck-input-text_empty){padding-right:var(--ck-search-field-view-horizontal-spacing)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{padding-right:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-search__results{min-width:100%}.ck.ck-search>.ck-search__results>.ck-search__info{width:100%;padding:var(--ck-spacing-medium) var(--ck-spacing-large)}.ck.ck-search>.ck-search__results>.ck-search__info *{white-space:normal}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{font-weight:700}.ck.ck-search>.ck-search__results>.ck-search__info>span:last-child{margin-top:var(--ck-spacing-medium)}.ck.ck-spinner-container{width:var(--ck-toolbar-spinner-size);height:var(--ck-toolbar-spinner-size);animation:1.5s infinite ck-spinner-rotate linear}@media (prefers-reduced-motion: reduce){.ck.ck-spinner-container{animation-duration:3s}}.ck.ck-spinner{width:var(--ck-toolbar-spinner-size);height:var(--ck-toolbar-spinner-size);border-radius:50%;border:2px solid var(--ck-color-text);border-top-color:transparent}@keyframes ck-spinner-rotate{to{transform:rotate(360deg)}}.ck-textarea{overflow-x:hidden}:root{--ck-color-block-toolbar-button: var(--ck-color-text);--ck-block-toolbar-button-size: var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}.ck.ck-toolbar{border-radius:0;background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar .ck.ck-toolbar__separator{height:var(--ck-icon-size);width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>*:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck.ck-toolbar:focus{outline:none}.ck-toolbar-container .ck.ck-toolbar{border:0}[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck,.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck{margin-right:0}[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child{margin-left:0}[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator,.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child{margin-right:0}[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator,.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}.ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width: 0px;--ck-balloon-arrow-offset: 0px;--ck-balloon-arrow-half-width: 4px;--ck-balloon-arrow-height: 4px;--ck-tooltip-text-padding: 4px;--ck-color-panel-background: var(--ck-color-tooltip-background);padding:0 var(--ck-spacing-medium);box-shadow:none}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text)}.ck.ck-balloon-panel.ck-tooltip.ck-tooltip_multi-line .ck-tooltip__text{white-space:break-spaces;display:inline-block;padding:var(--ck-tooltip-text-padding) 0;max-width:200px}.ck.ck-balloon-panel.ck-tooltip:before{display:none}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content{border-radius:0;border:1px solid var(--ck-color-base-border);border-bottom-width:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-sticky-panel__content_sticky{border-bottom-width:1px}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-menu-bar{border:0;border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-toolbar{border:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}.ck .ck-fake-bookmark-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-bookmark-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:solid 1px hsla(0,0%,100%,.5)}:root{--ck-clipboard-drop-target-dot-width: 12px;--ck-clipboard-drop-target-dot-height: 8px;--ck-clipboard-drop-target-color: var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(-.5 * var(--ck-clipboard-drop-target-dot-height));top:calc(-.5 * var(--ck-clipboard-drop-target-dot-height));border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(-.5 * var(--ck-clipboard-drop-target-dot-height));transform:translate(-50%);border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width));border-style:solid}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}.ck.ck-clipboard-drop-target-line{height:0;border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-top:-1px}.ck.ck-clipboard-drop-target-line:before{content:"";position:absolute;top:calc(-.5 * var(--ck-clipboard-drop-target-dot-width));width:0;height:0;border-style:solid}[dir=ltr] .ck.ck-clipboard-drop-target-line:before{left:-1px;border-width:calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width)) var(--ck-clipboard-drop-target-dot-height);border-color:transparent transparent transparent var(--ck-clipboard-drop-target-color)}[dir=rtl] .ck.ck-clipboard-drop-target-line:before{right:-1px;border-width:calc(.5 * var(--ck-clipboard-drop-target-dot-width)) var(--ck-clipboard-drop-target-dot-height) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0;border-color:transparent var(--ck-clipboard-drop-target-color) transparent transparent}:root{--ck-color-code-block-label-background: hsl(0, 0%, 46%)}.ck.ck-editor__editable pre[data-language]:after{top:-1px;right:10px;background:var(--ck-color-code-block-label-background);font-size:10px;font-family:var(--ck-font-face);line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);color:#fff;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}@media (forced-colors: active){.ck.ck-placeholder,.ck .ck-placeholder{forced-color-adjust:preserve-parent-color}}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text}@media (forced-colors: none){.ck.ck-placeholder:before,.ck .ck-placeholder:before{color:var(--ck-color-engine-placeholder-text)}}@media (forced-colors: active){.ck.ck-placeholder:before,.ck .ck-placeholder:before{font-style:italic;margin-left:1px}}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{flex:1 1 auto;flex-direction:row;flex-wrap:wrap;align-items:center;align-content:stretch;padding:var(--ck-spacing-large);margin:0}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*,[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*,[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view .ck-input,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view .ck-input{width:100%;min-width:50px}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{align-items:flex-start}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{top:50%;transform:translateY(-50%);color:var(--ck-color-base-border)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{flex:0 0 100%;padding-top:var(--ck-spacing-standard)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-right:0}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(-1 * var(--ck-spacing-large))}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form .ck-switchbutton{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}@media screen and (max-width: 600px){.ck.ck-find-and-replace-form{width:300px;max-width:100%}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input{flex-wrap:wrap}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input .ck-labeled-field-view{flex:1 0 auto;width:100%;margin-bottom:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type .ck-button__label{width:100%;text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view){flex-wrap:wrap;flex:1 1 auto}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button .ck-button__label{width:100%;text-align:center}}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}:root{--ck-html-embed-content-width: calc(100% - 1.5 * var(--ck-icon-size));--ck-html-embed-source-height: 10em;--ck-html-embed-unfocused-outline-width: 1px;--ck-html-embed-content-min-height: calc(var(--ck-icon-size) + var(--ck-spacing-standard));--ck-html-embed-source-disabled-background: var(--ck-color-base-foreground);--ck-html-embed-source-disabled-color: hsl(0deg 0% 45%)}.ck-widget.raw-html-embed{font-size:var(--ck-font-size-base);background-color:var(--ck-color-base-foreground)}.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.raw-html-embed[dir=ltr]{text-align:left}.ck-widget.raw-html-embed[dir=rtl]{text-align:right}.ck-widget.raw-html-embed:before{content:attr(data-html-embed-label);top:calc(-1 * var(--ck-html-embed-unfocused-outline-width));left:var(--ck-spacing-standard);background:#999;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);font-size:var(--ck-font-size-tiny);font-family:var(--ck-font-face)}.ck-widget.raw-html-embed[dir=rtl]:before{left:auto;right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed[dir=ltr] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected:before{top:0;padding:var(--ck-spacing-tiny) var(--ck-spacing-small)}.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected:before{top:0;padding:var(--ck-spacing-tiny) var(--ck-spacing-small);background:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover:before{top:0;padding:var(--ck-spacing-tiny) var(--ck-spacing-small)}.ck-widget.raw-html-embed .raw-html-embed__content-wrapper{padding:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{top:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button{color:var(--ck-color-button-save)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button{color:var(--ck-color-button-cancel)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child){margin-top:var(--ck-spacing-small)}.ck-widget.raw-html-embed[dir=rtl] .raw-html-embed__buttons-wrapper{left:var(--ck-spacing-standard);right:auto}.ck-widget.raw-html-embed .raw-html-embed__source{box-sizing:border-box;height:var(--ck-html-embed-source-height);width:var(--ck-html-embed-content-width);resize:none;min-width:0;padding:var(--ck-spacing-standard);font-family:monospace;-moz-tab-size:4;tab-size:4;white-space:pre-wrap;font-size:var(--ck-font-size-base);text-align:left;direction:ltr}.ck-widget.raw-html-embed .raw-html-embed__source[disabled]{background:var(--ck-html-embed-source-disabled-background);color:var(--ck-html-embed-source-disabled-color);-webkit-text-fill-color:var(--ck-html-embed-source-disabled-color);opacity:1}.ck-widget.raw-html-embed .raw-html-embed__preview{min-height:var(--ck-html-embed-content-min-height);width:var(--ck-html-embed-content-width)}.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview{pointer-events:none}.ck-widget.raw-html-embed .raw-html-embed__preview-content{box-sizing:border-box;background-color:var(--ck-color-base-foreground)}.ck-widget.raw-html-embed .raw-html-embed__preview-content>*{margin-left:auto;margin-right:auto}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{color:var(--ck-html-embed-source-disabled-color)}:root{--ck-image-insert-insert-by-url-width: 250px}.ck.ck-image-insert-url{--ck-input-width: 100%}.ck.ck-image-insert-url .ck-image-insert-url__action-row{grid-column-gap:var(--ck-spacing-large);margin-top:var(--ck-spacing-large)}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-save,.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-cancel{justify-content:center;min-width:auto}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}.ck.ck-image-insert-form>.ck.ck-button{display:block;width:100%}[dir=ltr] .ck.ck-image-insert-form>.ck.ck-button{text-align:left}[dir=rtl] .ck.ck-image-insert-form>.ck.ck-button{text-align:right}.ck.ck-image-insert-form>.ck.ck-collapsible{min-width:var(--ck-image-insert-insert-by-url-width)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:first-child){border-top:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:last-child){border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-image-insert-url{min-width:var(--ck-image-insert-insert-by-url-width);padding:var(--ck-spacing-large)}.ck.ck-image-insert-form:focus{outline:none}:root{--ck-color-image-upload-icon: hsl(0, 0%, 100%);--ck-color-image-upload-icon-background: hsl(120, 100%, 27%);--ck-image-upload-icon-size: 20;--ck-image-upload-icon-width: 2px;--ck-image-upload-icon-is-visible: clamp(0px, 100% - 50px, 1px)}.ck-image-upload-complete-icon{opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:calc(1px * var(--ck-image-upload-icon-size));animation-delay:0ms,3s;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@media (prefers-reduced-motion: reduce){.ck-image-upload-complete-icon{animation-duration:0ms}.ck-image-upload-complete-icon:after{animation:none;opacity:1;width:.3em;height:.45em}}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}:root{--ck-color-upload-placeholder-loader: hsl(0, 0%, 70%);--ck-upload-placeholder-loader-size: 32px;--ck-upload-placeholder-image-aspect-ratio: 2.8}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-image-upload-placeholder.image-inline{width:calc(2 * var(--ck-upload-placeholder-loader-size) * var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(360deg)}}.ck.ck-editor__editable .image.ck-appear,.ck.ck-editor__editable .image-inline.ck-appear{animation:fadeIn .7s}@media (prefers-reduced-motion: reduce){.ck.ck-editor__editable .image.ck-appear,.ck.ck-editor__editable .image-inline.ck-appear{opacity:1;animation:none}}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:solid 1px hsla(0,0%,100%,.5)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child){margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width: 600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical>.ck-button{padding:var(--ck-spacing-standard);margin:0;width:50%;border-radius:0}.ck.ck-link-form_layout-vertical>.ck-button:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:0 var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}:root{--ck-link-image-indicator-icon-size: 20;--ck-link-image-indicator-icon-is-visible: clamp(0px, 100% - 50px, 1px)}.ck.ck-editor__editable figure.image>a:after,.ck.ck-editor__editable a span.image-inline:after{content:"";top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);background-color:#0006;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+);background-size:14px;background-repeat:no-repeat;background-position:center;border-radius:100%;overflow:hidden;width:calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));height:calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size))}.ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;padding-left:0;padding-right:0;margin-bottom:calc(-1 * var(--ck-spacing-tiny))}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{box-shadow:none;border-color:transparent;background:none}:root{--ck-list-style-button-size: 44px}.ck.ck-list-styles-list{grid-template-columns:repeat(3,auto);row-gap:var(--ck-spacing-medium);column-gap:var(--ck-spacing-medium);padding:var(--ck-spacing-large)}.ck.ck-list-styles-list .ck-button{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size);padding:0;margin:0;box-sizing:content-box}.ck.ck-list-styles-list .ck-button .ck-icon{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size)}:root{--ck-media-embed-placeholder-icon-size: 3em;--ck-color-media-embed-placeholder-url-text: hsl(0, 0%, 46%);--ck-color-media-embed-placeholder-url-text-hover: var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3 * var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:center;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMCAwIDMuNzggMS42MWg0OS42MjFjMS42OTQgMCAzLjE5LS43OTggNC4xNDYtMi4wMzd6IiBmaWxsPSIjNWM4OGM1Ii8+PHBhdGggZD0iTTIyNi43NDIgMjIyLjk4OGMtOS4yNjYgMC0xNi43NzcgNy4xNy0xNi43NzcgMTYuMDE0LjAwNyAyLjc2Mi42NjMgNS40NzQgMi4wOTMgNy44NzUuNDMuNzAzLjgzIDEuNDA4IDEuMTkgMi4xMDcuMzMzLjUwMi42NSAxLjAwNS45NSAxLjUwOC4zNDMuNDc3LjY3My45NTcuOTg4IDEuNDQgMS4zMSAxLjc2OSAyLjUgMy41MDIgMy42MzcgNS4xNjguNzkzIDEuMjc1IDEuNjgzIDIuNjQgMi40NjYgMy45OSAyLjM2MyA0LjA5NCA0LjAwNyA4LjA5MiA0LjYgMTMuOTE0di4wMTJjLjE4Mi40MTIuNTE2LjY2Ni44NzkuNjY3LjQwMy0uMDAxLjc2OC0uMzE0LjkzLS43OTkuNjAzLTUuNzU2IDIuMjM4LTkuNzI5IDQuNTg1LTEzLjc5NC43ODItMS4zNSAxLjY3My0yLjcxNSAyLjQ2NS0zLjk5IDEuMTM3LTEuNjY2IDIuMzI4LTMuNCAzLjYzOC01LjE2OS4zMTUtLjQ4Mi42NDUtLjk2Mi45ODgtMS40MzkuMy0uNTAzLjYxNy0xLjAwNi45NS0xLjUwOC4zNTktLjcuNzYtMS40MDQgMS4xOS0yLjEwNyAxLjQyNi0yLjQwMiAyLTUuMTE0IDIuMDA0LTcuODc1IDAtOC44NDQtNy41MTEtMTYuMDE0LTE2Ljc3Ni0xNi4wMTR6IiBmaWxsPSIjZGQ0YjNlIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxlbGxpcHNlIHJ5PSI1LjU2NCIgcng9IjUuODI4IiBjeT0iMjM5LjAwMiIgY3g9IjIyNi43NDIiIGZpbGw9IiM4MDJkMjciIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTE5MC4zMDEgMjM3LjI4M2MtNC42NyAwLTguNDU3IDMuODUzLTguNDU3IDguNjA2czMuNzg2IDguNjA3IDguNDU3IDguNjA3YzMuMDQzIDAgNC44MDYtLjk1OCA2LjMzNy0yLjUxNiAxLjUzLTEuNTU3IDIuMDg3LTMuOTEzIDIuMDg3LTYuMjkgMC0uMzYyLS4wMjMtLjcyMi0uMDY0LTEuMDc5aC04LjI1N3YzLjA0M2g0Ljg1Yy0uMTk3Ljc1OS0uNTMxIDEuNDUtMS4wNTggMS45ODYtLjk0Mi45NTgtMi4wMjggMS41NDgtMy45MDEgMS41NDgtMi44NzYgMC01LjIwOC0yLjM3Mi01LjIwOC01LjI5OSAwLTIuOTI2IDIuMzMyLTUuMjk5IDUuMjA4LTUuMjk5IDEuMzk5IDAgMi42MTguNDA3IDMuNTg0IDEuMjkzbDIuMzgxLTIuMzhjMC0uMDAyLS4wMDMtLjAwNC0uMDA0LS4wMDUtMS41ODgtMS41MjQtMy42Mi0yLjIxNS01Ljk1NS0yLjIxNXptNC40MyA1LjY2bC4wMDMuMDA2di0uMDAzeiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjE1LjE4NCAyNTEuOTI5bC03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVjLjI4Ny0uNjQ5LjQ0OS0xLjM2Ni40NDktMi4xMjN2LTMxLjE2NWMtLjQ2OS42NzUtLjkzNCAxLjM0OS0xLjM4MiAyLjAwNS0uNzkyIDEuMjc1LTEuNjgyIDIuNjQtMi40NjUgMy45OS0yLjM0NyA0LjA2NS0zLjk4MiA4LjAzOC00LjU4NSAxMy43OTQtLjE2Mi40ODUtLjUyNy43OTgtLjkzLjc5OS0uMzYzLS4wMDEtLjY5Ny0uMjU1LS44NzktLjY2N3YtLjAxMmMtLjU5My01LjgyMi0yLjIzNy05LjgyLTQuNi0xMy45MTQtLjc4My0xLjM1LTEuNjczLTIuNzE1LTIuNDY2LTMuOTktMS4xMzctMS42NjYtMi4zMjctMy40LTMuNjM3LTUuMTY5bC0uMDAyLS4wMDN6IiBmaWxsPSIjYzNjM2MzIi8+PHBhdGggZD0iTTIxMi45ODMgMjQ4LjQ5NWwtMzYuOTUyIDM2Ljk1M3YuODEyYTUuMjI3IDUuMjI3IDAgMCAwIDUuMjM4IDUuMjM4aDEuMDE1bDM1LjY2Ni0zNS42NjZhMTM2LjI3NSAxMzYuMjc1IDAgMCAwLTIuNzY0LTMuOSAzNy41NzUgMzcuNTc1IDAgMCAwLS45ODktMS40NGMtLjI5OS0uNTAzLS42MTYtMS4wMDYtLjk1LTEuNTA4LS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjExLjk5OCAyNjEuMDgzbC02LjE1MiA2LjE1MSAyNC4yNjQgMjQuMjY0aC43ODFhNS4yMjcgNS4yMjcgMCAwIDAgNS4yMzktNS4yMzh2LTEuMDQ1eiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48L2c+PC9zdmc+)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxMDI0cHgiIGhlaWdodD0iMTAyNHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICAgICAgPHRpdGxlPkZpbGwgMTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9ImZMb2dvX1doaXRlIiBmaWxsPSIjRkZGRkZFIj4gICAgICAgICAgICA8cGF0aCBkPSJNOTY3LjQ4NCwwIEw1Ni41MTcsMCBDMjUuMzA0LDAgMCwyNS4zMDQgMCw1Ni41MTcgTDAsOTY3LjQ4MyBDMCw5OTguNjk0IDI1LjI5NywxMDI0IDU2LjUyMiwxMDI0IEw1NDcsMTAyNCBMNTQ3LDYyOCBMNDE0LDYyOCBMNDE0LDQ3MyBMNTQ3LDQ3MyBMNTQ3LDM1OS4wMjkgQzU0NywyMjYuNzY3IDYyNy43NzMsMTU0Ljc0NyA3NDUuNzU2LDE1NC43NDcgQzgwMi4yNjksMTU0Ljc0NyA4NTAuODQyLDE1OC45NTUgODY1LDE2MC44MzYgTDg2NSwyOTkgTDc4My4zODQsMjk5LjAzNyBDNzE5LjM5MSwyOTkuMDM3IDcwNywzMjkuNTI5IDcwNywzNzQuMjczIEw3MDcsNDczIEw4NjAuNDg3LDQ3MyBMODQwLjUwMSw2MjggTDcwNyw2MjggTDcwNywxMDI0IEw5NjcuNDg0LDEwMjQgQzk5OC42OTcsMTAyNCAxMDI0LDk5OC42OTcgMTAyNCw5NjcuNDg0IEwxMDI0LDU2LjUxNSBDMTAyNCwyNS4zMDMgOTk4LjY5NywwIDk2Ny40ODQsMCIgaWQ9IkZpbGwtMSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI1MDRweCIgaGVpZ2h0PSI1MDRweCIgdmlld0JveD0iMCAwIDUwNCA1MDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Z2x5cGgtbG9nb19NYXkyMDE2PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgtMSIgcG9pbnRzPSIwIDAuMTU5IDUwMy44NDEgMC4xNTkgNTAzLjg0MSA1MDMuOTQgMCA1MDMuOTQiPjwvcG9seWdvbj4gICAgPC9kZWZzPiAgICA8ZyBpZD0iZ2x5cGgtbG9nb19NYXkyMDE2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJHcm91cC0zIj4gICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgIDxnIGlkPSJDbGlwLTIiPjwvZz4gICAgICAgICAgICA8cGF0aCBkPSJNMjUxLjkyMSwwLjE1OSBDMTgzLjUwMywwLjE1OSAxNzQuOTI0LDAuNDQ5IDE0OC4wNTQsMS42NzUgQzEyMS4yNCwyLjg5OCAxMDIuOTI3LDcuMTU3IDg2LjkwMywxMy4zODUgQzcwLjMzNywxOS44MjIgNTYuMjg4LDI4LjQzNiA0Mi4yODIsNDIuNDQxIEMyOC4yNzcsNTYuNDQ3IDE5LjY2Myw3MC40OTYgMTMuMjI2LDg3LjA2MiBDNi45OTgsMTAzLjA4NiAyLjczOSwxMjEuMzk5IDEuNTE2LDE0OC4yMTMgQzAuMjksMTc1LjA4MyAwLDE4My42NjIgMCwyNTIuMDggQzAsMzIwLjQ5NyAwLjI5LDMyOS4wNzYgMS41MTYsMzU1Ljk0NiBDMi43MzksMzgyLjc2IDYuOTk4LDQwMS4wNzMgMTMuMjI2LDQxNy4wOTcgQzE5LjY2Myw0MzMuNjYzIDI4LjI3Nyw0NDcuNzEyIDQyLjI4Miw0NjEuNzE4IEM1Ni4yODgsNDc1LjcyMyA3MC4zMzcsNDg0LjMzNyA4Ni45MDMsNDkwLjc3NSBDMTAyLjkyNyw0OTcuMDAyIDEyMS4yNCw1MDEuMjYxIDE0OC4wNTQsNTAyLjQ4NCBDMTc0LjkyNCw1MDMuNzEgMTgzLjUwMyw1MDQgMjUxLjkyMSw1MDQgQzMyMC4zMzgsNTA0IDMyOC45MTcsNTAzLjcxIDM1NS43ODcsNTAyLjQ4NCBDMzgyLjYwMSw1MDEuMjYxIDQwMC45MTQsNDk3LjAwMiA0MTYuOTM4LDQ5MC43NzUgQzQzMy41MDQsNDg0LjMzNyA0NDcuNTUzLDQ3NS43MjMgNDYxLjU1OSw0NjEuNzE4IEM0NzUuNTY0LDQ0Ny43MTIgNDg0LjE3OCw0MzMuNjYzIDQ5MC42MTYsNDE3LjA5NyBDNDk2Ljg0Myw0MDEuMDczIDUwMS4xMDIsMzgyLjc2IDUwMi4zMjUsMzU1Ljk0NiBDNTAzLjU1MSwzMjkuMDc2IDUwMy44NDEsMzIwLjQ5NyA1MDMuODQxLDI1Mi4wOCBDNTAzLjg0MSwxODMuNjYyIDUwMy41NTEsMTc1LjA4MyA1MDIuMzI1LDE0OC4yMTMgQzUwMS4xMDIsMTIxLjM5OSA0OTYuODQzLDEwMy4wODYgNDkwLjYxNiw4Ny4wNjIgQzQ4NC4xNzgsNzAuNDk2IDQ3NS41NjQsNTYuNDQ3IDQ2MS41NTksNDIuNDQxIEM0NDcuNTUzLDI4LjQzNiA0MzMuNTA0LDE5LjgyMiA0MTYuOTM4LDEzLjM4NSBDNDAwLjkxNCw3LjE1NyAzODIuNjAxLDIuODk4IDM1NS43ODcsMS42NzUgQzMyOC45MTcsMC40NDkgMzIwLjMzOCwwLjE1OSAyNTEuOTIxLDAuMTU5IFogTTI1MS45MjEsNDUuNTUgQzMxOS4xODYsNDUuNTUgMzI3LjE1NCw0NS44MDcgMzUzLjcxOCw0Ny4wMTkgQzM3OC4yOCw0OC4xMzkgMzkxLjYxOSw1Mi4yNDMgNDAwLjQ5Niw1NS42OTMgQzQxMi4yNTUsNjAuMjYzIDQyMC42NDcsNjUuNzIyIDQyOS40NjIsNzQuNTM4IEM0MzguMjc4LDgzLjM1MyA0NDMuNzM3LDkxLjc0NSA0NDguMzA3LDEwMy41MDQgQzQ1MS43NTcsMTEyLjM4MSA0NTUuODYxLDEyNS43MiA0NTYuOTgxLDE1MC4yODIgQzQ1OC4xOTMsMTc2Ljg0NiA0NTguNDUsMTg0LjgxNCA0NTguNDUsMjUyLjA4IEM0NTguNDUsMzE5LjM0NSA0NTguMTkzLDMyNy4zMTMgNDU2Ljk4MSwzNTMuODc3IEM0NTUuODYxLDM3OC40MzkgNDUxLjc1NywzOTEuNzc4IDQ0OC4zMDcsNDAwLjY1NSBDNDQzLjczNyw0MTIuNDE0IDQzOC4yNzgsNDIwLjgwNiA0MjkuNDYyLDQyOS42MjEgQzQyMC42NDcsNDM4LjQzNyA0MTIuMjU1LDQ0My44OTYgNDAwLjQ5Niw0NDguNDY2IEMzOTEuNjE5LDQ1MS45MTYgMzc4LjI4LDQ1Ni4wMiAzNTMuNzE4LDQ1Ny4xNCBDMzI3LjE1OCw0NTguMzUyIDMxOS4xOTEsNDU4LjYwOSAyNTEuOTIxLDQ1OC42MDkgQzE4NC42NSw0NTguNjA5IDE3Ni42ODQsNDU4LjM1MiAxNTAuMTIzLDQ1Ny4xNCBDMTI1LjU2MSw0NTYuMDIgMTEyLjIyMiw0NTEuOTE2IDEwMy4zNDUsNDQ4LjQ2NiBDOTEuNTg2LDQ0My44OTYgODMuMTk0LDQzOC40MzcgNzQuMzc5LDQyOS42MjEgQzY1LjU2NCw0MjAuODA2IDYwLjEwNCw0MTIuNDE0IDU1LjUzNCw0MDAuNjU1IEM1Mi4wODQsMzkxLjc3OCA0Ny45OCwzNzguNDM5IDQ2Ljg2LDM1My44NzcgQzQ1LjY0OCwzMjcuMzEzIDQ1LjM5MSwzMTkuMzQ1IDQ1LjM5MSwyNTIuMDggQzQ1LjM5MSwxODQuODE0IDQ1LjY0OCwxNzYuODQ2IDQ2Ljg2LDE1MC4yODIgQzQ3Ljk4LDEyNS43MiA1Mi4wODQsMTEyLjM4MSA1NS41MzQsMTAzLjUwNCBDNjAuMTA0LDkxLjc0NSA2NS41NjMsODMuMzUzIDc0LjM3OSw3NC41MzggQzgzLjE5NCw2NS43MjIgOTEuNTg2LDYwLjI2MyAxMDMuMzQ1LDU1LjY5MyBDMTEyLjIyMiw1Mi4yNDMgMTI1LjU2MSw0OC4xMzkgMTUwLjEyMyw0Ny4wMTkgQzE3Ni42ODcsNDUuODA3IDE4NC42NTUsNDUuNTUgMjUxLjkyMSw0NS41NSBaIiBpZD0iRmlsbC0xIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgICAgIDxwYXRoIGQ9Ik0yNTEuOTIxLDMzNi4wNTMgQzIwNS41NDMsMzM2LjA1MyAxNjcuOTQ3LDI5OC40NTcgMTY3Ljk0NywyNTIuMDggQzE2Ny45NDcsMjA1LjcwMiAyMDUuNTQzLDE2OC4xMDYgMjUxLjkyMSwxNjguMTA2IEMyOTguMjk4LDE2OC4xMDYgMzM1Ljg5NCwyMDUuNzAyIDMzNS44OTQsMjUyLjA4IEMzMzUuODk0LDI5OC40NTcgMjk4LjI5OCwzMzYuMDUzIDI1MS45MjEsMzM2LjA1MyBaIE0yNTEuOTIxLDEyMi43MTUgQzE4MC40NzQsMTIyLjcxNSAxMjIuNTU2LDE4MC42MzMgMTIyLjU1NiwyNTIuMDggQzEyMi41NTYsMzIzLjUyNiAxODAuNDc0LDM4MS40NDQgMjUxLjkyMSwzODEuNDQ0IEMzMjMuMzY3LDM4MS40NDQgMzgxLjI4NSwzMjMuNTI2IDM4MS4yODUsMjUyLjA4IEMzODEuMjg1LDE4MC42MzMgMzIzLjM2NywxMjIuNzE1IDI1MS45MjEsMTIyLjcxNSBaIiBpZD0iRmlsbC00IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgICAgICA8cGF0aCBkPSJNNDE2LjYyNywxMTcuNjA0IEM0MTYuNjI3LDEzNC4zIDQwMy4wOTIsMTQ3LjgzNCAzODYuMzk2LDE0Ny44MzQgQzM2OS43MDEsMTQ3LjgzNCAzNTYuMTY2LDEzNC4zIDM1Ni4xNjYsMTE3LjYwNCBDMzU2LjE2NiwxMDAuOTA4IDM2OS43MDEsODcuMzczIDM4Ni4zOTYsODcuMzczIEM0MDMuMDkyLDg3LjM3MyA0MTYuNjI3LDEwMC45MDggNDE2LjYyNywxMTcuNjA0IiBpZD0iRmlsbC01IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgIDwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(to right,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IldoaXRlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQwMCA0MDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMjAwYzAsMTEwLjUtODkuNSwyMDAtMjAwLDIwMFMwLDMxMC41LDAsMjAwUzg5LjUsMCwyMDAsMFM0MDAsODkuNSw0MDAsMjAweiBNMTYzLjQsMzA1LjVjODguNywwLDEzNy4yLTczLjUsMTM3LjItMTM3LjJjMC0yLjEsMC00LjItMC4xLTYuMmM5LjQtNi44LDE3LjYtMTUuMywyNC4xLTI1Yy04LjYsMy44LTE3LjksNi40LTI3LjcsNy42YzEwLTYsMTcuNi0xNS40LDIxLjItMjYuN2MtOS4zLDUuNS0xOS42LDkuNS0zMC42LDExLjdjLTguOC05LjQtMjEuMy0xNS4yLTM1LjItMTUuMmMtMjYuNiwwLTQ4LjIsMjEuNi00OC4yLDQ4LjJjMCwzLjgsMC40LDcuNSwxLjMsMTFjLTQwLjEtMi03NS42LTIxLjItOTkuNC01MC40Yy00LjEsNy4xLTYuNSwxNS40LTYuNSwyNC4yYzAsMTYuNyw4LjUsMzEuNSwyMS41LDQwLjFjLTcuOS0wLjItMTUuMy0yLjQtMjEuOC02YzAsMC4yLDAsMC40LDAsMC42YzAsMjMuNCwxNi42LDQyLjgsMzguNyw0Ny4zYy00LDEuMS04LjMsMS43LTEyLjcsMS43Yy0zLjEsMC02LjEtMC4zLTkuMS0wLjljNi4xLDE5LjIsMjMuOSwzMy4xLDQ1LDMzLjVjLTE2LjUsMTIuOS0zNy4zLDIwLjYtNTkuOSwyMC42Yy0zLjksMC03LjctMC4yLTExLjUtMC43QzExMC44LDI5Ny41LDEzNi4yLDMwNS41LDE2My40LDMwNS41Ii8+PC9zdmc+)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}:root{--ck-color-mention-background: hsla(341, 100%, 30%, .1);--ck-color-mention-text: hsl(341, 100%, 30%)}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}:root{--ck-color-restricted-editing-exception-background: hsla(31, 100%, 65%, .2);--ck-color-restricted-editing-exception-hover-background: hsla(31, 100%, 65%, .35);--ck-color-restricted-editing-exception-brackets: hsla(31, 100%, 40%, .4);--ck-color-restricted-editing-selected-exception-background: hsla(31, 100%, 65%, .5);--ck-color-restricted-editing-selected-exception-brackets: hsla(31, 100%, 40%, .6)}.ck-editor__editable .restricted-editing-exception{transition:.2s ease-in-out background;background-color:var(--ck-color-restricted-editing-exception-background);border:1px solid;border-image:linear-gradient(to right,var(--ck-color-restricted-editing-exception-brackets) 0%,var(--ck-color-restricted-editing-exception-brackets) 5px,hsla(0,0%,0%,0) 6px,hsla(0,0%,0%,0) calc(100% - 6px),var(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-exception-brackets) 100%) 1}@media (prefers-reduced-motion: reduce){.ck-editor__editable .restricted-editing-exception{transition:none}}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_selected{background-color:var(--ck-color-restricted-editing-selected-exception-background);border-image:linear-gradient(to right,var(--ck-color-restricted-editing-selected-exception-brackets) 0%,var(--ck-color-restricted-editing-selected-exception-brackets) 5px,var(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-selected-exception-brackets) 100%) 1}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_collapsed{padding-left:1ch}.ck-restricted-editing_mode_restricted,.ck-restricted-editing_mode_restricted *{cursor:default}.ck-restricted-editing_mode_restricted .restricted-editing-exception,.ck-restricted-editing_mode_restricted .restricted-editing-exception *{cursor:text}.ck-restricted-editing_mode_restricted .restricted-editing-exception:hover{background:var(--ck-color-restricted-editing-exception-hover-background)}:root{--ck-character-grid-tile-size: 24px}.ck.ck-character-grid{overflow-y:auto;overflow-x:hidden}.ck.ck-character-grid .ck-character-grid__tiles{grid-template-columns:repeat(auto-fill,minmax(var(--ck-character-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large);grid-gap:var(--ck-spacing-standard)}.ck.ck-character-grid .ck-character-grid__tile{width:var(--ck-character-grid-tile-size);height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);font-size:1.5em;padding:0;transition:.2s ease box-shadow;border:0}@media (prefers-reduced-motion: reduce){.ck.ck-character-grid .ck-character-grid__tile{transition:none}}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);width:100%;text-align:center}.ck.ck-character-info{padding:var(--ck-spacing-small) var(--ck-spacing-large);border-top:1px solid var(--ck-color-base-border)}.ck.ck-character-info>*{text-transform:uppercase;font-size:var(--ck-font-size-small)}.ck.ck-character-info .ck-character-info__name{max-width:280px;text-overflow:ellipsis;overflow:hidden}.ck.ck-character-info .ck-character-info__code{opacity:.6}.ck.ck-special-characters-navigation>.ck-label{max-width:160px;text-overflow:ellipsis;overflow:hidden}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}@media screen and (max-width: 600px){.ck.ck-special-characters-navigation{max-width:190px}.ck.ck-special-characters-navigation>.ck-form__header__label{text-overflow:ellipsis;overflow:hidden}}.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active>.ck-button>.ck-button__label{font-style:italic}:root{--ck-style-panel-button-width: 120px;--ck-style-panel-button-height: 80px;--ck-style-panel-button-label-background: hsl(0, 0%, 94.1%);--ck-style-panel-button-hover-label-background: hsl(0, 0%, 92.1%);--ck-style-panel-button-hover-border-color: hsl(0, 0%, 70%)}.ck.ck-style-panel .ck-style-grid{row-gap:var(--ck-spacing-large);column-gap:var(--ck-spacing-large)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{--ck-color-button-default-hover-background: var(--ck-color-base-background);--ck-color-button-default-active-background: var(--ck-color-base-background);padding:0;width:var(--ck-style-panel-button-width);height:var(--ck-style-panel-button-height)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label{height:22px;line-height:22px;width:100%;padding:0 var(--ck-spacing-medium);overflow:hidden;text-overflow:ellipsis;flex-shrink:0}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{width:100%;overflow:hidden;opacity:.9;padding:var(--ck-spacing-medium);background:var(--ck-color-base-background);border:2px solid var(--ck-color-base-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled{--ck-color-button-default-disabled-background: var(--ck-color-base-foreground)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus){border-color:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview{opacity:.4;border-color:var(--ck-color-base-foreground);filter:saturate(.3)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on{border-color:var(--ck-color-base-active)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label{box-shadow:0 -1px 0 var(--ck-color-base-active);z-index:1}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover{border-color:var(--ck-color-base-active-focus)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label{background:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label{background:var(--ck-style-panel-button-hover-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on){border-color:var(--ck-style-panel-button-hover-border-color)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview{opacity:1}.ck.ck-style-panel .ck-style-panel__style-group>.ck-label{margin:var(--ck-spacing-large) 0}.ck.ck-style-panel .ck-style-panel__style-group:first-child>.ck-label{margin-top:0}:root{--ck-style-panel-max-height: 470px}.ck.ck-style-panel{padding:var(--ck-spacing-large);overflow-y:auto;max-height:var(--ck-style-panel-max-height)}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-top-left-radius:0;border-bottom-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0;width:20px;height:20px;border:1px solid var(--ck-color-input-border)}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{top:-30%;left:50%;height:150%;width:8%;background:red;border-radius:2px;transform:rotate(45deg);transform-origin:50%}.ck.ck-input-color .ck.ck-input-color__remove-color{width:100%;padding:calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:0;margin-left:var(--ck-spacing-standard)}.ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>*:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>*:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{width:100%;min-width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}:root{--ck-insert-table-dropdown-padding: 10px;--ck-insert-table-dropdown-box-height: 11px;--ck-insert-table-dropdown-box-width: 12px;--ck-insert-table-dropdown-box-margin: 1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width) * 10 + var(--ck-insert-table-dropdown-box-margin) * 20 + var(--ck-insert-table-dropdown-padding) * 2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{min-width:var(--ck-insert-table-dropdown-box-width);min-height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px;outline:none;transition:none}@media (prefers-reduced-motion: reduce){.ck .ck-insert-table-dropdown-grid-box{transition:none}}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}:root{--ck-color-selector-focused-cell-background: hsla(212, 90%, 80%, .3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-selector-focused-cell-background);outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}:root{--ck-table-properties-error-arrow-size: 6px;--ck-table-properties-min-error-width: 150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{width:80px;min-width:80px;max-width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{border-radius:0;background:var(--ck-color-base-error);color:var(--ck-color-base-background);padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-width:var(--ck-table-properties-min-error-width);text-align:center;animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);border-style:solid}@media (prefers-reduced-motion: reduce){.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}:root{--ck-table-selected-cell-background: hsla(208, 90%, 80%, .3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}:root{--ck-widget-outline-thickness: 3px;--ck-widget-handler-icon-size: 16px;--ck-widget-handler-animation-duration: .2s;--ck-widget-handler-animation-curve: ease;--ck-color-widget-blurred-border: hsl(0, 0%, 87%);--ck-color-widget-hover-border: hsl(43, 100%, 62%);--ck-color-widget-editable-focus-background: var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color: var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion: reduce){.ck .ck-widget{transition:none}}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{box-shadow:var(--ck-inner-shadow),0 0}@media (forced-colors: none){.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background)}}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused:not(td,th),.ck .ck-editor__nested-editable:focus:not(td,th){outline:none;border:var(--ck-focus-ring)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}@media (prefers-reduced-motion: reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion: reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness: 0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}:root{--ck-resizer-size: 10px;--ck-resizer-offset: calc( ( var(--ck-resizer-size) / -2 ) - 2px);--ck-resizer-border-width: 1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid hsl(0,0%,100%);border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}:root{--ck-widget-type-around-button-size: 20px;--ck-color-widget-type-around-button-active: var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover: var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable: var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha: 0;--ck-color-widget-type-around-button-radar-end-alpha: .3;--ck-color-widget-type-around-button-icon: var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}@media (prefers-reduced-motion: reduce){.ck .ck-widget .ck-widget__type-around__button{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}@media (prefers-reduced-motion: reduce){.ck .ck-widget .ck-widget__type-around__button svg{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}@media (prefers-reduced-motion: reduce){.ck .ck-widget .ck-widget__type-around__button:hover{animation:none}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:none}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:none}}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,#fff0,#ffffff4d)}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse linear 1s infinite normal forwards;outline:solid 1px hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}.ck-content code{background-color:#c7c7c74d;padding:.15em;border-radius:2px}.ck.ck-editor__editable .ck-code_selected{background-color:#c7c7c780}.ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:solid 5px hsl(0,0%,80%)}.ck-content[dir=rtl] blockquote{border-left:0;border-right:solid 5px hsl(0,0%,80%)}:root{--ck-bookmark-icon-hover-fill-color: var(--ck-color-widget-hover-border);--ck-bookmark-icon-selected-fill-color: var(--ck-color-focus-border);--ck-bookmark-icon-animation-duration: var(--ck-widget-handler-animation-duration);--ck-bookmark-icon-animation-curve: var(--ck-widget-handler-animation-curve)}.ck-bookmark.ck-widget{outline:none}.ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon__fill{transition:fill var(--ck-bookmark-icon-animation-duration) var(--ck-bookmark-icon-animation-curve)}.ck-bookmark.ck-widget:hover .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-hover-fill-color)}.ck-bookmark.ck-widget.ck-widget_selected .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-selected-fill-color)}.ck-bookmark.ck-widget.ck-widget_selected,.ck-bookmark.ck-widget.ck-widget_selected:hover{outline:none}.ck-bookmark.ck-widget .ck-bookmark__icon{position:relative;top:-.1em}.ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon{height:1.2em;width:auto;vertical-align:middle}.ck.ck-bookmark-view:focus{outline:none}.ck.ck-bookmark-form{display:flex;align-items:flex-start}@media screen and (max-width: 600px){.ck.ck-bookmark-form{flex-wrap:wrap}.ck.ck-bookmark-form .ck-button,.ck.ck-bookmark-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-bookmark-form .ck-button{justify-content:center}}@media screen and (max-width: 600px){.ck.ck-bookmark-form.ck-responsive-form>.ck-button:nth-last-child(1){margin:var(--ck-spacing-large);padding:0 var(--ck-spacing-standard);border-radius:var(--ck-border-radius)}}.ck.ck-bookmark-actions{display:flex;align-items:center}.ck.ck-bookmark-actions .ck-bookmark-actions__preview{max-width:var(--ck-input-width);min-width:3em;font-weight:400;text-overflow:ellipsis;text-align:center;overflow:hidden;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:default}@media screen and (max-width: 600px){.ck.ck-bookmark-actions{display:flex;flex-wrap:wrap}.ck.ck-bookmark-actions .ck-bookmark-actions__preview{flex-basis:100%;margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0;min-width:auto}}@media screen and (max-width: 600px){.ck.ck-bookmark-actions.ck-responsive-form .ck-button{flex-basis:50%;margin-top:var(--ck-spacing-standard)}}:root{--ck-image-processing-highlight-color: hsl(220, 10%, 98%);--ck-image-processing-background-color: hsl(220, 10%, 90%)}.ck.ck-editor__editable .image.image-processing{position:relative}.ck.ck-editor__editable .image.image-processing:before{content:"";position:absolute;top:0;left:0;z-index:1;height:100%;width:100%;background:linear-gradient(90deg,var(--ck-image-processing-background-color),var(--ck-image-processing-highlight-color),var(--ck-image-processing-background-color));background-size:200% 100%;animation:ck-image-processing-animation 2s linear infinite}.ck.ck-editor__editable .image.image-processing img{height:100%}@keyframes ck-image-processing-animation{0%{background-position:200% 0}to{background-position:-200% 0}}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle{display:none}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}.ck.ck-clipboard-drop-target-line{position:absolute;pointer-events:none}.ck-content pre{padding:1em;color:#353535;background:#c7c7c74d;border:1px solid hsl(0,0%,77%);border-radius:2px;text-align:left;direction:ltr;-moz-tab-size:4;tab-size:4;white-space:pre-wrap;font-style:normal;min-width:200px}.ck-content pre code{background:unset;padding:0;border-radius:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}.ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-panel)}.ck.ck-menu-bar{border:none;border-bottom:1px solid var(--ck-color-toolbar-border)}:root{--ck-emoji-grid-tile-size: 27px}.ck.ck-emoji .ck.ck-emoji__tiles{max-width:100%;max-height:min(265px,40vh);overflow-y:auto;overflow-x:hidden;border-top:1px solid var(--ck-color-base-border)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--ck-emoji-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large);grid-gap:var(--ck-spacing-small)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{width:var(--ck-emoji-grid-tile-size);height:var(--ck-emoji-grid-tile-size);min-width:var(--ck-emoji-grid-tile-size);min-height:var(--ck-emoji-grid-tile-size);font-size:1.5em;padding:0;transition:.2s ease box-shadow;border:0}@media (prefers-reduced-motion: reduce){.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{transition:none}}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:focus:not(.ck-disabled),.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile .ck-button__label{line-height:var(--ck-emoji-grid-tile-size);width:100%;text-align:center}.ck.ck-emoji__categories-list{display:flex;justify-content:space-between;margin:0 var(--ck-spacing-large)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text{border-width:0;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:transparent;padding:0;font-size:var(--ck-font-size-big);min-width:var(--ck-font-size-big);min-height:var(--ck-font-size-big)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text.ck-emoji__category-item.ck-on{border-bottom-color:var(--ck-color-base-active)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text>span{margin:auto}.ck.ck-emoji__skin-tone{margin-left:var(--ck-spacing-standard)}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck.ck-list__item{min-width:1em}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:initial}.ck.ck-emoji{width:320px}.ck .ck.ck-emoji__search{display:flex;padding:var(--ck-spacing-large);padding-bottom:var(--ck-spacing-medium);justify-content:space-between;align-items:center}.ck .ck-fake-emoji-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-emoji-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:solid 1px hsla(0,0%,100%,.5)}.ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}.ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}.ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{display:flex}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs.ck-find-and-replace-form__inputs .ck-results-counter,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions.ck-find-and-replace-form__inputs .ck-results-counter{position:absolute}.ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}.ck.ck-heading_heading1 .ck-button__label{font-size:20px}.ck.ck-heading_heading2 .ck-button__label{font-size:17px}.ck.ck-heading_heading3 .ck-button__label{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}:root{--ck-highlight-marker-yellow: hsl(60, 97%, 73%);--ck-highlight-marker-green: hsl(120, 93%, 68%);--ck-highlight-marker-pink: hsl(345, 96%, 73%);--ck-highlight-marker-blue: hsl(201, 97%, 72%);--ck-highlight-pen-red: hsl(0, 85%, 49%);--ck-highlight-pen-green: hsl(112, 100%, 27%)}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{color:var(--ck-highlight-pen-red);background-color:transparent}.ck-content .pen-green{color:var(--ck-highlight-pen-green);background-color:transparent}.ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{margin:15px 0;height:4px;background:#dedede;border:0}.ck-widget.raw-html-embed{margin:.9em auto;position:relative;display:flow-root;min-width:15em;font-style:normal}.ck-widget.raw-html-embed:before{position:absolute;z-index:1}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{position:absolute;display:flex;flex-direction:column}.ck-widget.raw-html-embed .raw-html-embed__preview{position:relative;overflow:hidden;display:flex}.ck-widget.raw-html-embed .raw-html-embed__preview-content{width:100%;position:relative;margin:auto;display:table;border-collapse:separate;border-spacing:7px}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{position:absolute;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}:root{--ck-html-object-embed-unfocused-outline-width: 1px}.ck-widget.html-object-embed{font-size:var(--ck-font-size-base);background-color:var(--ck-color-base-foreground);padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large));min-width:calc(76px + var(--ck-spacing-standard))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{font-weight:400;font-style:normal;position:absolute;content:attr(data-html-object-embed-label);top:0;left:var(--ck-spacing-standard);background:#999;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);font-size:var(--ck-font-size-tiny);font-family:var(--ck-font-face)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}:root{--ck-color-image-caption-background: hsl(0, 0%, 97%);--ck-color-image-caption-text: hsl(0, 0%, 20%);--ck-color-image-caption-highlighted-background: hsl(52deg 100% 50%)}.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:var(--ck-color-image-caption-text);background-color:var(--ck-color-image-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}@media (forced-colors: active){.ck-content .image>figcaption{background-color:unset;color:unset}}@media (forced-colors: none){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}}@media (prefers-reduced-motion: reduce){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:none}}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highlighted-background)}to{background-color:var(--ck-color-image-caption-background)}}.ck.ck-image-insert-url{width:400px;padding:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-image-insert-url .ck-image-insert-url__action-row{display:grid;grid-template-columns:repeat(2,1fr)}.ck-content img.image_resized{height:auto}.ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}.ck.ck-image-custom-resize-form{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:flex-start}.ck.ck-image-custom-resize-form .ck-labeled-field-view{display:inline-block}.ck.ck-image-custom-resize-form .ck-label{display:none}@media screen and (max-width: 600px){.ck.ck-image-custom-resize-form{flex-wrap:wrap}.ck.ck-image-custom-resize-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-image-custom-resize-form .ck-button{flex-basis:50%}}:root{--ck-image-style-spacing: 1.5em;--ck-inline-image-style-spacing: calc(var(--ck-image-style-spacing) / 2)}.ck-content .image.image-style-block-align-left,.ck-content .image.image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image.image-style-align-left,.ck-content .image.image-style-align-right{clear:none}.ck-content .image.image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image.image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image.image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image.image-style-block-align-right{margin-right:0;margin-left:auto}.ck-content .image.image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content p+.image.image-style-align-left,.ck-content p+.image.image-style-align-right,.ck-content p+.image.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-top:var(--ck-inline-image-style-spacing);margin-bottom:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}.ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width: 600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{position:absolute;top:0;left:0}.ck-image-upload-complete-icon{display:block;position:absolute;top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);border-radius:50%;z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}.ck-content .image{display:table;clear:both;text-align:center;margin:.9em auto;min-width:50px}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%;height:auto}.ck-content .image-inline{display:inline-flex;max-width:100%;align-items:flex-start}.ck-content .image-inline picture{display:flex}.ck-content .image-inline picture,.ck-content .image-inline img{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ck.ck-editor__editable .image{z-index:1}.ck.ck-editor__editable .image.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable .image-inline img{height:auto}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}.ck.ck-editor__editable img.image_placeholder{background-size:100% 100%}.ck.ck-editor__editable figure.image>a:after,.ck.ck-editor__editable a span.image-inline:after{display:block;position:absolute}.ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width: 600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-form{display:flex;align-items:flex-start}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width: 600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-save,.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel{margin-top:var(--ck-spacing-medium)}.ck-editor__editable .ck-list-bogus-paragraph{display:block}.ck.ck-list-styles-list{display:grid}.ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:disc}.ck-content ul ul{list-style-type:circle}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}:root{--ck-todo-list-checkmark-size: 16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{position:relative;margin-bottom:5px}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;display:inline-block;position:relative;width:var(--ck-todo-list-checkmark-size);height:var(--ck-todo-list-checkmark-size);vertical-align:middle;border:0;left:-25px;margin-right:-15px;right:0;margin-left:0}.ck-content[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-right:0;right:-25px;margin-left:-15px}.ck-content .todo-list .todo-list__label>input:before{display:block;position:absolute;box-sizing:border-box;content:"";width:100%;height:100%;border:1px solid hsl(0,0%,20%);border-radius:2px;transition:.25s ease-in-out box-shadow}@media (prefers-reduced-motion: reduce){.ck-content .todo-list .todo-list__label>input:before{transition:none}}.ck-content .todo-list .todo-list__label>input:after{display:block;position:absolute;box-sizing:content-box;pointer-events:none;content:"";left:calc(var(--ck-todo-list-checkmark-size) / 3);top:calc(var(--ck-todo-list-checkmark-size) / 5.3);width:calc(var(--ck-todo-list-checkmark-size) / 5.3);height:calc(var(--ck-todo-list-checkmark-size) / 2.6);border-style:solid;border-color:transparent;border-width:0 calc(var(--ck-todo-list-checkmark-size) / 8) calc(var(--ck-todo-list-checkmark-size) / 8) 0;transform:rotate(45deg)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-editor__editable.ck-content .todo-list .todo-list__label>input,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{cursor:pointer}.ck-editor__editable.ck-content .todo-list .todo-list__label>input:hover:before,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:hover:before{box-shadow:0 0 0 5px #0000001a}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{-webkit-appearance:none;display:inline-block;position:relative;width:var(--ck-todo-list-checkmark-size);height:var(--ck-todo-list-checkmark-size);vertical-align:middle;border:0;left:-25px;margin-right:-15px;right:0;margin-left:0}.ck-editor__editable.ck-content[dir=rtl] .todo-list .todo-list__label>span[contenteditable=false]>input{left:0;margin-right:0;right:-25px;margin-left:-15px}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{display:block;position:absolute;box-sizing:border-box;content:"";width:100%;height:100%;border:1px solid hsl(0,0%,20%);border-radius:2px;transition:.25s ease-in-out box-shadow}@media (prefers-reduced-motion: reduce){.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{transition:none}}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:after{display:block;position:absolute;box-sizing:content-box;pointer-events:none;content:"";left:calc(var(--ck-todo-list-checkmark-size) / 3);top:calc(var(--ck-todo-list-checkmark-size) / 5.3);width:calc(var(--ck-todo-list-checkmark-size) / 5.3);height:calc(var(--ck-todo-list-checkmark-size) / 2.6);border-style:solid;border-color:transparent;border-width:0 calc(var(--ck-todo-list-checkmark-size) / 8) calc(var(--ck-todo-list-checkmark-size) / 8) 0;transform:rotate(45deg)}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:after{border-color:#fff}.ck-editor__editable.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-content .media{clear:both;margin:.9em 0;display:block;min-width:15em}.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>*:not(.ck-media__placeholder){pointer-events:none}.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:-1px;bottom:-1px;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width: 600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:-1px;bottom:-1px;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap;width:400px}.ck.ck-media-form .ck-labeled-field-view{display:inline-block;width:100%}.ck.ck-media-form .ck-label{display:none}.ck.ck-media-form .ck-input{width:100%}@media screen and (max-width: 600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}:root{--ck-mention-list-max-height: 300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-y:auto;overflow-x:hidden;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{overflow:hidden;flex-shrink:0}:root{--ck-color-minimap-tracker-background: 208, 0%, 51%;--ck-color-minimap-iframe-outline: hsl(0deg 0% 75%);--ck-color-minimap-iframe-shadow: hsl(0deg 0% 0% / 11%);--ck-color-minimap-progress-background: hsl(0,0%,40%)}.ck.ck-minimap{position:absolute;-webkit-user-select:none;user-select:none;background:var(--ck-color-base-background)}.ck.ck-minimap,.ck.ck-minimap iframe{width:100%;height:100%}.ck.ck-minimap iframe{border:0;pointer-events:none;position:relative;outline:1px solid var(--ck-color-minimap-iframe-outline);box-shadow:0 2px 5px var(--ck-color-minimap-iframe-shadow);margin:0}.ck.ck-minimap .ck.ck-minimap__position-tracker{position:absolute;width:100%;top:0;background:hsla(var(--ck-color-minimap-tracker-background),.2);z-index:1;transition:background .1s ease-in-out}@media (prefers-reduced-motion: reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker{transition:none}}.ck.ck-minimap .ck.ck-minimap__position-tracker:hover{background:hsla(var(--ck-color-minimap-tracker-background),.3)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover{background:hsla(var(--ck-color-minimap-tracker-background),.4)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:after,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover:after{opacity:1}.ck.ck-minimap .ck.ck-minimap__position-tracker:after{content:attr(data-progress) "%";position:absolute;top:5px;right:5px;background:var(--ck-color-minimap-progress-background);color:var(--ck-color-base-background);border:1px solid var(--ck-color-base-background);padding:2px 4px;font-size:10px;border-radius:3px;opacity:0;transition:opacity .1s ease-in-out}@media (prefers-reduced-motion: reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker:after{transition:none}}.ck-content .page-break{position:relative;clear:both;padding:5px 0;display:flex;align-items:center;justify-content:center}.ck-content .page-break:after{content:"";position:absolute;border-bottom:2px dashed hsl(0,0%,77%);width:100%}.ck-content .page-break__label{position:relative;z-index:1;padding:.3em .6em;display:block;text-transform:uppercase;border:1px solid hsl(0,0%,77%);border-radius:2px;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;color:#333;background:#fff;box-shadow:2px 2px 1px #00000026;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}.ck-content *:has(+.page-break){margin-bottom:0}}:root{--ck-show-blocks-border-color: hsl(0, 0%, 46%)}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *):not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck-source-editing-area{position:relative;overflow:hidden}.ck-source-editing-area:after,.ck-source-editing-area textarea{padding:var(--ck-spacing-large);margin:0;border:1px solid transparent;line-height:var(--ck-line-height-base);font-size:var(--ck-font-size-normal);font-family:monospace;white-space:pre-wrap}.ck-source-editing-area:after{content:attr(data-value) " ";visibility:hidden;display:block}.ck-source-editing-area textarea{position:absolute;width:100%;height:100%;resize:none;outline:none;overflow:hidden;box-sizing:border-box;border-color:var(--ck-color-base-border);border-radius:0}.ck-rounded-corners .ck-source-editing-area textarea,.ck-source-editing-area textarea.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck-source-editing-area textarea:not([readonly]):focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-character-grid{max-width:100%}.ck.ck-character-grid .ck-character-grid__tiles{display:grid}.ck.ck-character-info{display:flex;justify-content:space-between}.ck.ck-special-characters>.ck-dialog__content>div{width:350px;max-width:100%;height:100%;display:grid;grid-column-gap:0px;grid-row-gap:0px;grid-template-columns:1fr;grid-template-rows:auto 1fr auto}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories{grid-area:1 / 1 / 2 / 2;padding:var(--ck-spacing-medium) var(--ck-spacing-large)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view{padding-top:var(--ck-spacing-standard);width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-width:var(--ck-table-properties-min-error-width);text-align:center;animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);border-style:solid}@media (prefers-reduced-motion: reduce){.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown{display:block;width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button>span{width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-grid{grid-area:2 / 1 / 3 / 2;max-height:200px}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-info{grid-area:3 / 1 / 4 / 2}:root{--ck-style-panel-columns: 3}.ck.ck-style-panel .ck-style-grid{display:grid;grid-template-columns:repeat(var(--ck-style-panel-columns),auto);justify-content:start}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{display:flex;justify-content:space-between;flex-direction:column}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{display:flex;align-content:center;justify-content:flex-start;align-items:center;flex-grow:1;flex-basis:100%}.ck-content .table{margin:.9em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double hsl(0,0%,70%)}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid hsl(0,0%,75%)}.ck-content .table table th{font-weight:700;background:#0000000d}@media print{.ck-content .table table{height:initial}}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}.ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>*:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-save,.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel{justify-content:center}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-input-color{width:100%;display:flex;flex-direction:row-reverse}.ck.ck-input-color>input.ck.ck-input-text{min-width:auto;flex-grow:1}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{position:relative;overflow:hidden}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{position:absolute;display:block}.ck.ck-table-form .ck-form__row.ck-table-form__border-row,.ck.ck-table-form .ck-form__row.ck-table-form__background-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{flex-wrap:wrap;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{display:flex;flex-direction:column-reverse;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{position:absolute;left:50%;bottom:calc(-1 * var(--ck-table-properties-error-arrow-size));transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";position:absolute;top:calc(-1 * var(--ck-table-properties-error-arrow-size));left:50%;transform:translate(-50%)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{flex-wrap:wrap;flex-basis:0;align-content:baseline}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}:root{--ck-color-selector-caption-background: hsl(0, 0%, 97%);--ck-color-selector-caption-text: hsl(0, 0%, 20%);--ck-color-selector-caption-highlighted-background: hsl(52deg 100% 50%)}.ck-content .table>figcaption{display:table-caption;caption-side:top;word-break:break-word;text-align:center;color:var(--ck-color-selector-caption-text);background-color:var(--ck-color-selector-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}@media (forced-colors: active){.ck-content .table>figcaption{background-color:unset;color:unset}}@media (forced-colors: none){.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-selector-caption-highlighted-background)}to{background-color:var(--ck-color-selector-caption-background)}}:root{--ck-color-selector-column-resizer-hover: var(--ck-color-base-active);--ck-table-column-resizer-width: 7px;--ck-table-column-resizer-position-offset: calc(var(--ck-table-column-resizer-width) * -.5 - .5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table table{overflow:hidden}.ck-content .table td,.ck-content .table th{overflow-wrap:break-word;position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{position:absolute;top:0;bottom:0;right:var(--ck-table-column-resizer-position-offset);width:var(--ck-table-column-resizer-width);cursor:col-resize;-webkit-user-select:none;user-select:none;z-index:var(--ck-z-default)}.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer,.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-selector-column-resizer-hover);opacity:.25;top:-999999px;bottom:-999999px}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}.ck-hidden{display:none!important}:root{--ck-z-default: 1;--ck-z-panel: calc( var(--ck-z-default) + 999 );--ck-z-dialog: 9999}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-powered-by-font-size: calc(var(--ck-font-size-base) * 7.5 / 13);--ck-powered-by-line-height: calc(var(--ck-font-size-base) * 10 / 13);--ck-powered-by-letter-spacing: calc(var(--ck-font-size-base) * -.2 / 13);--ck-powered-by-padding-vertical: 2px;--ck-powered-by-padding-horizontal: 4px;--ck-powered-by-text-color: hsl(0, 0%, 31%);--ck-powered-by-border-radius: var(--ck-border-radius);--ck-powered-by-background: hsl(0, 0%, 100%);--ck-powered-by-border-color: var(--ck-color-focus-border);--ck-powered-by-svg-width: 53;--ck-powered-by-svg-height: 10;--ck-powered-by-icon-width: calc(var(--ck-font-size-base) * var(--ck-powered-by-svg-width) / 13);--ck-powered-by-icon-height: calc(var(--ck-font-size-base) * var(--ck-powered-by-svg-height) / 13)}.ck.ck-balloon-panel.ck-powered-by-balloon{--ck-border-radius: var(--ck-powered-by-border-radius);box-shadow:none;background:var(--ck-powered-by-background);min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by{line-height:var(--ck-powered-by-line-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a{cursor:pointer;display:flex;align-items:center;opacity:.66;filter:grayscale(80%);line-height:var(--ck-powered-by-line-height);padding:var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label{font-size:var(--ck-powered-by-font-size);letter-spacing:var(--ck-powered-by-letter-spacing);padding-left:2px;text-transform:uppercase;font-weight:700;margin-right:4px;cursor:pointer;line-height:normal;color:var(--ck-powered-by-text-color)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon{display:block;cursor:pointer;width:var(--ck-powered-by-icon-width);height:var(--ck-powered-by-icon-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a{filter:grayscale(0%);opacity:1}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-powered-by-border-color)}:root{--ck-evaluation-badge-font-size: calc(var(--ck-font-size-base) * 7.5 / 13);--ck-evaluation-badge-line-height: calc(var(--ck-font-size-base) * 7.5 / 13);--ck-evaluation-badge-letter-spacing: calc(var(--ck-font-size-base) * -.2 / 13);--ck-evaluation-badge-padding-vertical: 2px;--ck-evaluation-badge-padding-horizontal: 4px;--ck-evaluation-badge-text-color: hsl(0, 0%, 31%);--ck-evaluation-badge-border-radius: var(--ck-border-radius);--ck-evaluation-badge-background: hsl(0, 0%, 100%);--ck-evaluation-badge-border-color: var(--ck-color-focus-border)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon{--ck-border-radius: var(--ck-evaluation-badge-border-radius);box-shadow:none;background:var(--ck-evaluation-badge-background);min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge{line-height:var(--ck-evaluation-badge-line-height);padding:var(--ck-evaluation-badge-padding-vertical) var(--ck-evaluation-badge-padding-horizontal)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge .ck-evaluation-badge__label{display:block;padding:0 2px;font-size:var(--ck-evaluation-badge-font-size);letter-spacing:var(--ck-evaluation-badge-letter-spacing);font-weight:700;line-height:normal;text-transform:uppercase;color:var(--ck-evaluation-badge-text-color)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-evaluation-badge-border-color)}.ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center}[dir=ltr] .ck.ck-button,[dir=ltr] a.ck.ck-button{justify-content:left}[dir=rtl] .ck.ck-button,[dir=rtl] a.ck.ck-button{justify-content:right}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}.ck.ck-list-item-button{min-height:unset;width:100%;border-radius:0}[dir=ltr] .ck.ck-list-item-button{text-align:left}[dir=rtl] .ck.ck-list-item-button{text-align:right}[dir=ltr] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-right:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-holder{display:inline-flex;width:.9em;height:.9em}[dir=ltr] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-left:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-icon{height:100%}.ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}.ck.ck-color-grid{display:grid}.color-picker-hex-input{width:max-content}.color-picker-hex-input .ck.ck-input{min-width:unset}.ck.ck-color-picker__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin:var(--ck-spacing-large) 0 0;width:unset}.ck.ck-color-picker__row .ck.ck-labeled-field-view{padding-top:unset}.ck.ck-color-picker__row .ck.ck-input-text{width:unset}.ck.ck-color-picker__row .ck-color-picker__hash-view{padding-top:var(--ck-spacing-tiny);padding-right:var(--ck-spacing-medium)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{display:flex;align-items:center}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{justify-content:flex-start}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{display:flex;flex-direction:row;justify-content:space-around}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save,.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel{flex:1}.ck.ck-dialog .ck.ck-dialog__actions{display:flex;justify-content:flex-end}.ck.ck-dialog-overlay{-webkit-user-select:none;user-select:none;overscroll-behavior:none;position:fixed;bottom:0;left:0;right:0;top:0}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent{pointer-events:none;animation:none;background:none}.ck.ck-dialog{overscroll-behavior:none;width:fit-content;position:absolute}.ck.ck-dialog .ck.ck-form__header{flex-shrink:0}.ck.ck-dialog:not(.ck-dialog_modal) .ck.ck-form__header .ck-form__header__label{cursor:grab}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent .ck.ck-dialog{pointer-events:all}:root{--ck-dropdown-max-width: 75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;z-index:var(--ck-z-panel);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n{left:50%;transform:translate(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translate(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translate(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-toolbar-dropdown-max-width: 60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{position:absolute;max-height:314px;overflow-y:auto;z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-dropdown-menu-list__nested-menu{display:block}.ck.ck-aria-live-announcer{position:absolute;left:-10000px;top:-10000px}.ck.ck-aria-live-region-list{list-style-type:none}.ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}.ck.ck-form__header h2.ck-form__header__label{flex-grow:1}.ck.ck-icon{vertical-align:middle}.ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}.ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>*:focus{position:relative;z-index:var(--ck-z-default)}:root{--ck-balloon-panel-arrow-z-index: calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-panel)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}.ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-panel) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:nth-child(1){z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-panel);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-autocomplete{position:relative}.ck.ck-autocomplete>.ck-search__results{position:absolute;z-index:var(--ck-z-panel)}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{bottom:100%}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{top:100%;bottom:auto}.ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{left:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{right:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view .ck-search__reset{position:absolute;top:50%;transform:translateY(-50%)}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{display:block}.ck.ck-search>.ck-search__results>.ck-search__info:not(.ck-hidden)~*{display:none}.ck.ck-highlighted-text mark{background:var(--ck-color-highlight-background);vertical-align:initial;font-weight:inherit;line-height:inherit;font-size:inherit}.ck.ck-balloon-panel.ck-tooltip{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:calc(var(--ck-z-dialog) + 100)}:root{--ck-toolbar-spinner-size: 18px}.ck.ck-spinner-container{display:block;position:relative}.ck.ck-spinner{position:absolute;top:50%;left:0;right:0;margin:0 auto;transform:translateY(-50%);z-index:1}.ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}:root{--ck-menu-bar-menu-max-width: 75vw;--ck-menu-bar-nested-menu-horizontal-offset: 5px}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{z-index:var(--ck-z-panel);max-width:var(--ck-menu-bar-menu-max-width);position:absolute}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw{bottom:100%}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{top:100%;bottom:auto}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{left:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{right:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en{left:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en{bottom:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{right:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{bottom:0}.ck.ck-menu-bar__menu{display:block;position:relative}:root{--ck-color-resizer: var(--ck-color-focus-border);--ck-color-resizer-tooltip-background: hsl(0, 0%, 15%);--ck-color-resizer-tooltip-text: hsl(0, 0%, 95%);--ck-resizer-border-radius: var(--ck-border-radius);--ck-resizer-tooltip-offset: 10px;--ck-resizer-tooltip-height: calc(var(--ck-spacing-small) * 2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-above-center{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height) * -1);left:50%;transform:translate(-50%)}.ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{cursor:nesw-resize}.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(-.5 * var(--ck-widget-outline-thickness));left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(-.5 * var(--ck-widget-outline-thickness));right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(-1 * var(--ck-widget-outline-thickness));right:calc(-1 * var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(-1 * var(--ck-widget-outline-thickness) - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(-1 * var(--ck-widget-outline-thickness) - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}._slider-container_15o51_1{position:relative;height:1.6rem}._slider-container_15o51_1{height:unset;width:1.6rem}._range-bar_15o51_21{position:absolute;top:50%;transform:translateY(-50%);width:100%;height:var(--range-width, 6px);border-radius:10rem;background:var(--neutral-main-background-color)}._value-bar_15o51_41{border-radius:10rem;height:100%;background:var(--primary-main-color)}._slider-container_15o51_1._vertical_15o51_53{top:unset;left:50%;transform:translate(-50%);width:var(--range-width, 6px);height:100%}._thumb-dot_15o51_69{top:50%;left:0;transform:translate(-50%,-50%);position:absolute;height:inherit;aspect-ratio:1 / 1;border-radius:50%;border:2px solid var(--primary-main-color);background-color:var(--neutral-absolute-background-color)}._thumb-dot_15o51_69:focus{box-shadow:0 0 0 4px var(--primary-background)}._slider-container_15o51_1._vertical_15o51_53{top:0;left:50%;height:unset;width:inherit}@keyframes _on-open-tooltip_15o51_1{0%{opacity:0}to{opacity:1}}._tooltip-container_15o51_135{position:fixed;z-index:999;animation:_on-open-tooltip_15o51_1 .2s ease-in-out;animation-fill-mode:forwards}._tooltip-container_15o51_135>._tooltip-message_15o51_149{color:var(--neutral-text-body-reverse-color);background-color:var(--neutral-main-reverse-background-color);padding:.4rem 1.2rem;border-radius:.8rem;max-width:21.2rem;text-align:center}._mark-point_15o51_167{position:absolute;top:50%;transform:translate(-50%,-50%);height:calc(var(--range-width, 6px) + max(.3rem,1.5px));width:calc(var(--range-width, 6px) + max(.3rem,1.5px));border-radius:50%;border:2px solid var(--primary-main-color);background-color:var(--neutral-absolute-background-color)}._mark-text_15o51_189{position:absolute;bottom:-2px;transform:translate(-50%,100%);font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit}._simple-color-picker_egriz_1,._color-picker-container_egriz_3{position:relative;box-sizing:border-box}._color-picker-container_egriz_3{padding:.8rem 1.5rem;border:var(--neutral-main-border, 1px solid #D7D7DB);border-radius:.8rem;gap:.8rem}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}._color-picker-container_egriz_3[class~=size48]{padding:1.2rem 1.5rem}._color-picker-container_egriz_3[class~=size32]{padding:.4rem 1.1rem}._color-picker-container_egriz_3[class~=size24]{padding:0 .7rem}._color-picker-container_egriz_3:has(>input:disabled){background-color:var(--neutral-disable-background-color, #F4F4F5)!important;color:var(--neutral-text-disabled-color, #B4B4B7)!important;pointer-events:none!important}._color-picker-container_egriz_3:focus-within{border-color:var(--primary-main-color, #287CF0)}._color-picker-container_egriz_3>label:has(>input[type=color]),._simple-color-picker_egriz_1>label:has(>input[type=color]){border-radius:.6rem;aspect-ratio:1 / 1;height:calc(100% - .8rem);min-height:1.4rem;min-width:1.4rem;border:var(--neutral-bolder-border, 1px solid #D7D7DB)}._color-picker-container_egriz_3 input[type=color],._simple-color-picker_egriz_1 input[type=color]{width:100%;height:100%;visibility:hidden}._color-picker-container_egriz_3>label:has(>input[type=number]),._simple-color-picker_egriz_1>label:has(>input[type=number]){width:24%;border:inherit;border-left:inherit;border-color:inherit;border-style:solid;border-width:1px;border-top:none;border-right:none;border-bottom:none;min-width:5.4rem;padding-left:.6rem;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._color-picker-container_egriz_3 input:not([type=color]),._simple-color-picker_egriz_1 input:not([type=color]){flex:1;width:100%;border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._color-picker-container_egriz_3._helper-text_egriz_211,._simple-color-picker_egriz_1._helper-text_egriz_211{overflow:visible!important;border-color:var(--helper-text-color)!important}._color-picker-container_egriz_3._helper-text_egriz_211:after,._simple-color-picker_egriz_1._helper-text_egriz_211:after{content:attr(helper-text);color:var(--helper-text-color);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._chart-block_1xm96_1{padding:2.4rem;border-radius:.8rem}`)),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
"use strict";var Er=Object.defineProperty;var Ar=(s,o,n)=>o in s?Er(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n;var E=(s,o,n)=>Ar(s,typeof o!="symbol"?o+"":o,n);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const React=require("react"),ReactDOM=require("react-dom");function _interopNamespaceDefault(s){const o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(s){for(const n in s)if(n!=="default"){const a=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(o,n,a.get?a:{enumerable:!0,get:()=>s[n]})}}return o.default=s,Object.freeze(o)}function _mergeNamespaces(s,o){for(var n=0;n<o.length;n++){const a=o[n];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in s)){const c=Object.getOwnPropertyDescriptor(a,l);c&&Object.defineProperty(s,l,c.get?c:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}const React__namespace=_interopNamespaceDefault(React);function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var s=React,o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(d,h,f){var g,p={},v=null,b=null;f!==void 0&&(v=""+f),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(b=h.ref);for(g in h)a.call(h,g)&&!c.hasOwnProperty(g)&&(p[g]=h[g]);if(d&&d.defaultProps)for(g in h=d.defaultProps,h)p[g]===void 0&&(p[g]=h[g]);return{$$typeof:o,type:d,key:v,ref:b,props:p,_owner:l.current}}return reactJsxRuntime_production_min.Fragment=n,reactJsxRuntime_production_min.jsx=u,reactJsxRuntime_production_min.jsxs=u,reactJsxRuntime_production_min}var reactJsxRuntime_development={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_development;function requireReactJsxRuntime_development(){return hasRequiredReactJsxRuntime_development||(hasRequiredReactJsxRuntime_development=1,process.env.NODE_ENV!=="production"&&function(){var s=React,o=Symbol.for("react.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),_=Symbol.iterator,w="@@iterator";function x(he){if(he===null||typeof he!="object")return null;var Re=_&&he[_]||he[w];return typeof Re=="function"?Re:null}var S=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function C(he){{for(var Re=arguments.length,Ne=new Array(Re>1?Re-1:0),Fe=1;Fe<Re;Fe++)Ne[Fe-1]=arguments[Fe];T("error",he,Ne)}}function T(he,Re,Ne){{var Fe=S.ReactDebugCurrentFrame,Ue=Fe.getStackAddendum();Ue!==""&&(Re+="%s",Ne=Ne.concat([Ue]));var je=Ne.map(function(He){return String(He)});je.unshift("Warning: "+Re),Function.prototype.apply.call(console[he],console,je)}}var R=!1,A=!1,M=!1,D=!1,O=!1,H;H=Symbol.for("react.module.reference");function j(he){return!!(typeof he=="string"||typeof he=="function"||he===a||he===c||O||he===l||he===f||he===g||D||he===b||R||A||M||typeof he=="object"&&he!==null&&(he.$$typeof===v||he.$$typeof===p||he.$$typeof===u||he.$$typeof===d||he.$$typeof===h||he.$$typeof===H||he.getModuleId!==void 0))}function q(he,Re,Ne){var Fe=he.displayName;if(Fe)return Fe;var Ue=Re.displayName||Re.name||"";return Ue!==""?Ne+"("+Ue+")":Ne}function Y(he){return he.displayName||"Context"}function ee(he){if(he==null)return null;if(typeof he.tag=="number"&&C("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof he=="function")return he.displayName||he.name||null;if(typeof he=="string")return he;switch(he){case a:return"Fragment";case n:return"Portal";case c:return"Profiler";case l:return"StrictMode";case f:return"Suspense";case g:return"SuspenseList"}if(typeof he=="object")switch(he.$$typeof){case d:var Re=he;return Y(Re)+".Consumer";case u:var Ne=he;return Y(Ne._context)+".Provider";case h:return q(he,he.render,"ForwardRef");case p:var Fe=he.displayName||null;return Fe!==null?Fe:ee(he.type)||"Memo";case v:{var Ue=he,je=Ue._payload,He=Ue._init;try{return ee(He(je))}catch{return null}}}return null}var te=Object.assign,re=0,ae,ue,ce,le,ie,de,ge;function pe(){}pe.__reactDisabledLog=!0;function be(){{if(re===0){ae=console.log,ue=console.info,ce=console.warn,le=console.error,ie=console.group,de=console.groupCollapsed,ge=console.groupEnd;var he={configurable:!0,enumerable:!0,value:pe,writable:!0};Object.defineProperties(console,{info:he,log:he,warn:he,error:he,group:he,groupCollapsed:he,groupEnd:he})}re++}}function Se(){{if(re--,re===0){var he={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:te({},he,{value:ae}),info:te({},he,{value:ue}),warn:te({},he,{value:ce}),error:te({},he,{value:le}),group:te({},he,{value:ie}),groupCollapsed:te({},he,{value:de}),groupEnd:te({},he,{value:ge})})}re<0&&C("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Le=S.ReactCurrentDispatcher,De;function ke(he,Re,Ne){{if(De===void 0)try{throw Error()}catch(Ue){var Fe=Ue.stack.trim().match(/\n( *(at )?)/);De=Fe&&Fe[1]||""}return`
`+De+he}}var Te=!1,Ae;{var Ee=typeof WeakMap=="function"?WeakMap:Map;Ae=new Ee}function we(he,Re){if(!he||Te)return"";{var Ne=Ae.get(he);if(Ne!==void 0)return Ne}var Fe;Te=!0;var Ue=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var je;je=Le.current,Le.current=null,be();try{if(Re){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(Je){Fe=Je}Reflect.construct(he,[],He)}else{try{He.call()}catch(Je){Fe=Je}he.call(He.prototype)}}else{try{throw Error()}catch(Je){Fe=Je}he()}}catch(Je){if(Je&&Fe&&typeof Je.stack=="string"){for(var ze=Je.stack.split(`
`),Xe=Fe.stack.split(`
`),qe=ze.length-1,Ke=Xe.length-1;qe>=1&&Ke>=0&&ze[qe]!==Xe[Ke];)Ke--;for(;qe>=1&&Ke>=0;qe--,Ke--)if(ze[qe]!==Xe[Ke]){if(qe!==1||Ke!==1)do if(qe--,Ke--,Ke<0||ze[qe]!==Xe[Ke]){var et=`
`+ze[qe].replace(" at new "," at ");return he.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",he.displayName)),typeof he=="function"&&Ae.set(he,et),et}while(qe>=1&&Ke>=0);break}}}finally{Te=!1,Le.current=je,Se(),Error.prepareStackTrace=Ue}var Rt=he?he.displayName||he.name:"",St=Rt?ke(Rt):"";return typeof he=="function"&&Ae.set(he,St),St}function Ve(he,Re,Ne){return we(he,!1)}function _e(he){var Re=he.prototype;return!!(Re&&Re.isReactComponent)}function ve(he,Re,Ne){if(he==null)return"";if(typeof he=="function")return we(he,_e(he));if(typeof he=="string")return ke(he);switch(he){case f:return ke("Suspense");case g:return ke("SuspenseList")}if(typeof he=="object")switch(he.$$typeof){case h:return Ve(he.render);case p:return ve(he.type,Re,Ne);case v:{var Fe=he,Ue=Fe._payload,je=Fe._init;try{return ve(je(Ue),Re,Ne)}catch{}}}return""}var fe=Object.prototype.hasOwnProperty,ne={},oe=S.ReactDebugCurrentFrame;function xe(he){if(he){var Re=he._owner,Ne=ve(he.type,he._source,Re?Re.type:null);oe.setExtraStackFrame(Ne)}else oe.setExtraStackFrame(null)}function Ce(he,Re,Ne,Fe,Ue){{var je=Function.call.bind(fe);for(var He in he)if(je(he,He)){var ze=void 0;try{if(typeof he[He]!="function"){var Xe=Error((Fe||"React class")+": "+Ne+" type `"+He+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof he[He]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Xe.name="Invariant Violation",Xe}ze=he[He](Re,He,Fe,Ne,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(qe){ze=qe}ze&&!(ze instanceof Error)&&(xe(Ue),C("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Fe||"React class",Ne,He,typeof ze),xe(null)),ze instanceof Error&&!(ze.message in ne)&&(ne[ze.message]=!0,xe(Ue),C("Failed %s type: %s",Ne,ze.message),xe(null))}}}var Oe=Array.isArray;function se(he){return Oe(he)}function me(he){{var Re=typeof Symbol=="function"&&Symbol.toStringTag,Ne=Re&&he[Symbol.toStringTag]||he.constructor.name||"Object";return Ne}}function ye(he){try{return Me(he),!1}catch{return!0}}function Me(he){return""+he}function Ie(he){if(ye(he))return C("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",me(he)),Me(he)}var Pe=S.ReactCurrentOwner,$e={key:!0,ref:!0,__self:!0,__source:!0},Be,Ge;function Ye(he){if(fe.call(he,"ref")){var Re=Object.getOwnPropertyDescriptor(he,"ref").get;if(Re&&Re.isReactWarning)return!1}return he.ref!==void 0}function Zt(he){if(fe.call(he,"key")){var Re=Object.getOwnPropertyDescriptor(he,"key").get;if(Re&&Re.isReactWarning)return!1}return he.key!==void 0}function $t(he,Re){typeof he.ref=="string"&&Pe.current}function Bt(he,Re){{var Ne=function(){Be||(Be=!0,C("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Re))};Ne.isReactWarning=!0,Object.defineProperty(he,"key",{get:Ne,configurable:!0})}}function Jt(he,Re){{var Ne=function(){Ge||(Ge=!0,C("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",Re))};Ne.isReactWarning=!0,Object.defineProperty(he,"ref",{get:Ne,configurable:!0})}}var zt=function(he,Re,Ne,Fe,Ue,je,He){var ze={$$typeof:o,type:he,key:Re,ref:Ne,props:He,_owner:je};return ze._store={},Object.defineProperty(ze._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(ze,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Fe}),Object.defineProperty(ze,"_source",{configurable:!1,enumerable:!1,writable:!1,value:Ue}),Object.freeze&&(Object.freeze(ze.props),Object.freeze(ze)),ze};function er(he,Re,Ne,Fe,Ue){{var je,He={},ze=null,Xe=null;Ne!==void 0&&(Ie(Ne),ze=""+Ne),Zt(Re)&&(Ie(Re.key),ze=""+Re.key),Ye(Re)&&(Xe=Re.ref,$t(Re,Ue));for(je in Re)fe.call(Re,je)&&!$e.hasOwnProperty(je)&&(He[je]=Re[je]);if(he&&he.defaultProps){var qe=he.defaultProps;for(je in qe)He[je]===void 0&&(He[je]=qe[je])}if(ze||Xe){var Ke=typeof he=="function"?he.displayName||he.name||"Unknown":he;ze&&Bt(He,Ke),Xe&&Jt(He,Ke)}return zt(he,ze,Xe,Ue,Fe,Pe.current,He)}}var Tt=S.ReactCurrentOwner,or=S.ReactDebugCurrentFrame;function kt(he){if(he){var Re=he._owner,Ne=ve(he.type,he._source,Re?Re.type:null);or.setExtraStackFrame(Ne)}else or.setExtraStackFrame(null)}var tr;tr=!1;function rr(he){return typeof he=="object"&&he!==null&&he.$$typeof===o}function ar(){{if(Tt.current){var he=ee(Tt.current.type);if(he)return`

Check the render method of \``+he+"`."}return""}}function pr(he){return""}var sr={};function vr(he){{var Re=ar();if(!Re){var Ne=typeof he=="string"?he:he.displayName||he.name;Ne&&(Re=`

Check the top-level render call using <`+Ne+">.")}return Re}}function lr(he,Re){{if(!he._store||he._store.validated||he.key!=null)return;he._store.validated=!0;var Ne=vr(Re);if(sr[Ne])return;sr[Ne]=!0;var Fe="";he&&he._owner&&he._owner!==Tt.current&&(Fe=" It was passed a child from "+ee(he._owner.type)+"."),kt(he),C('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',Ne,Fe),kt(null)}}function cr(he,Re){{if(typeof he!="object")return;if(se(he))for(var Ne=0;Ne<he.length;Ne++){var Fe=he[Ne];rr(Fe)&&lr(Fe,Re)}else if(rr(he))he._store&&(he._store.validated=!0);else if(he){var Ue=x(he);if(typeof Ue=="function"&&Ue!==he.entries)for(var je=Ue.call(he),He;!(He=je.next()).done;)rr(He.value)&&lr(He.value,Re)}}}function yr(he){{var Re=he.type;if(Re==null||typeof Re=="string")return;var Ne;if(typeof Re=="function")Ne=Re.propTypes;else if(typeof Re=="object"&&(Re.$$typeof===h||Re.$$typeof===p))Ne=Re.propTypes;else return;if(Ne){var Fe=ee(Re);Ce(Ne,he.props,"prop",Fe,he)}else if(Re.PropTypes!==void 0&&!tr){tr=!0;var Ue=ee(Re);C("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",Ue||"Unknown")}typeof Re.getDefaultProps=="function"&&!Re.getDefaultProps.isReactClassApproved&&C("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function br(he){{for(var Re=Object.keys(he.props),Ne=0;Ne<Re.length;Ne++){var Fe=Re[Ne];if(Fe!=="children"&&Fe!=="key"){kt(he),C("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Fe),kt(null);break}}he.ref!==null&&(kt(he),C("Invalid attribute `ref` supplied to `React.Fragment`."),kt(null))}}var ur={};function dr(he,Re,Ne,Fe,Ue,je){{var He=j(he);if(!He){var ze="";(he===void 0||typeof he=="object"&&he!==null&&Object.keys(he).length===0)&&(ze+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Xe=pr();Xe?ze+=Xe:ze+=ar();var qe;he===null?qe="null":se(he)?qe="array":he!==void 0&&he.$$typeof===o?(qe="<"+(ee(he.type)||"Unknown")+" />",ze=" Did you accidentally export a JSX literal instead of a component?"):qe=typeof he,C("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",qe,ze)}var Ke=er(he,Re,Ne,Ue,je);if(Ke==null)return Ke;if(He){var et=Re.children;if(et!==void 0)if(Fe)if(se(et)){for(var Rt=0;Rt<et.length;Rt++)cr(et[Rt],he);Object.freeze&&Object.freeze(et)}else C("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else cr(et,he)}if(fe.call(Re,"key")){var St=ee(he),Je=Object.keys(Re).filter(function(Tr){return Tr!=="key"}),nr=Je.length>0?"{key: someKey, "+Je.join(": ..., ")+": ...}":"{key: someKey}";if(!ur[St+nr]){var Cr=Je.length>0?"{"+Je.join(": ..., ")+": ...}":"{}";C(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,nr,St,Cr,St),ur[St+nr]=!0}}return he===a?br(Ke):yr(Ke),Ke}}function _r(he,Re,Ne){return dr(he,Re,Ne,!0)}function wr(he,Re,Ne){return dr(he,Re,Ne,!1)}var xr=wr,Sr=_r;reactJsxRuntime_development.Fragment=a,reactJsxRuntime_development.jsx=xr,reactJsxRuntime_development.jsxs=Sr}()),reactJsxRuntime_development}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,process.env.NODE_ENV==="production"?jsxRuntime.exports=requireReactJsxRuntime_production_min():jsxRuntime.exports=requireReactJsxRuntime_development()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime();const styles$n={"checkbox-container":"_checkbox-container_1xus0_1"},Checkbox=s=>{const[o,n]=React.useState(s.value),a=React.useRef(null),l=React.useMemo(()=>{let c={width:s.size??"2.4rem",height:s.size??"2.4rem"};return s.style&&(delete s.style.width,delete s.style.minWidth,delete s.style.maxWidth,delete s.style.height,delete s.style.minHeight,delete s.style.maxHeight,c={...s.style,...c}),c},[s.size,s.style]);return React.useEffect(()=>{s.value!==o&&n(s.value)},[s.value]),jsxRuntimeExports.jsxs("label",{id:s.id,className:`${styles$n["checkbox-container"]} row ${s.className??""}`,style:l,"is-null-value":`${s.value===null}`,children:[jsxRuntimeExports.jsx("input",{name:s.name,ref:a,type:"checkbox",checked:!!o,hidden:!0,disabled:s.disabled,onChange:c=>{n(c.target.checked),s.onChange&&s.onChange(c.target.checked,c.target)}}),jsxRuntimeExports.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{"--check-color":s.checkColor},children:[jsxRuntimeExports.jsx("path",{style:{display:"none"},fillRule:"evenodd",clipRule:"evenodd",d:"M4.79199 9.95298C4.79199 9.69148 5.00398 9.47949 5.26548 9.47949H14.7352C14.9967 9.47949 15.2087 9.69148 15.2087 9.95298C15.2087 10.2145 14.9967 10.4265 14.7352 10.4265H5.26548C5.00398 10.4265 4.79199 10.2145 4.79199 9.95298Z"})," :",jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.07 6.49317C15.2549 6.67808 15.2549 6.97787 15.07 7.16278L8.91467 13.3181C8.72977 13.503 8.42997 13.503 8.24507 13.3181L4.93067 10.0037C4.74577 9.81878 4.74577 9.51899 4.93067 9.33408C5.11558 9.14917 5.41537 9.14917 5.60028 9.33408L8.57987 12.3137L14.4004 6.49317C14.5853 6.30827 14.8851 6.30827 15.07 6.49317Z"})]})]})},disabled$2="_disabled_1pgte_37",styles$m={"select1-container":"_select1-container_1pgte_1","select1-simple-style":"_select1-simple-style_1pgte_1",disabled:disabled$2,"helper-text":"_helper-text_1pgte_47","select1-popup":"_select1-popup_1pgte_129","select-body":"_select-body_1pgte_149","select-tile":"_select-tile_1pgte_179","no-results-found":"_no-results-found_1pgte_223"},clickable="_clickable_1q12e_67",styles$l={"wini-icon":"_wini-icon_1q12e_1",clickable,"tooltip-container":"_tooltip-container_1q12e_201","tooltip-message":"_tooltip-message_1q12e_215"};let Text$2=class extends React.Component{render(){let o=this.props.style??{};return this.props.maxLine&&(o={...o,"--max-line":this.props.maxLine}),this.props.html?jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:this.props.html},id:this.props.id,onMouseOver:this.props.onHover,onClick:this.props.onClick,className:`comp-text-innerhtml ${this.props.className??""}`,style:o}):jsxRuntimeExports.jsx("div",{id:this.props.id,onMouseOver:this.props.onHover,onClick:this.props.onClick,className:`comp-text ${this.props.onClick?"type-button":""} ${this.props.className??""}`,style:o,children:this.props.children})}};function Winicon({id:s,src:o,link:n,className:a,style:l,size:c,color:u,alt:d,onClick:h,tooltip:f}){const g=React.useRef(null),[p,v]=React.useState(),[b,_]=React.useState(!1),w="https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/",x=React.useMemo(()=>f?{"tooltip-value":f,onMouseOver:()=>{_(!0)},onMouseOut:()=>{_(!1)}}:{},[f]),S=async C=>{const T=C.replace(w,""),R=await caches.open(T),A=await R.match(C);if(A)return A;const M=await fetch(C);return M.ok&&await R.put(C,M.clone()),M};return React.useEffect(()=>{o?S(w+o+".svg").then(async C=>{v(await C.text())}).catch(()=>{v(d??"error")}):n&&fetch(n).then(async C=>{v(await C.text())}).catch(()=>{v(d??"error")})},[o,n]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:g,id:s,onClick:h,className:`${styles$l["wini-icon"]} ${p?"":"skeleton-loading"} ${h?styles$l.clickable:""} ${a??""} ${o?`${o.split("/")[0]}-icon`:""}${n?" link-icon":""}`,style:l?{...l,fontSize:c,color:u}:{fontSize:c,color:u},dangerouslySetInnerHTML:{__html:p??""},...x}),f&&b&&ReactDOM.createPortal(showTooltipElement({element:g.current,tooltip:f}),document.body)]})}const showTooltipElement=({element:s,tooltip:o})=>{if(!s)return null;const n=s.getBoundingClientRect();let a=o.position??"bottom";switch(document.body.offsetHeight-n.bottom<100&&a==="bottom"?a="top":n.top<100&&a==="top"&&(a="bottom"),document.body.offsetWidth-n.right<100&&a==="right"?a="left":n.left<100&&a==="left"&&(a="right"),a){case"top":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.x<0?(l.style.left=n.x+n.width/2+"px",l.style.transform="translateX(-1.8rem)",l.style.alignItems="start"):c.right>document.body.offsetWidth&&(l.style.left="unset",l.style.right=document.body.offsetWidth-n.right-n.width/2+"px",l.style.transform="translateX(-1.4rem)",l.style.alignItems="end")}},className:`col ${styles$l["tooltip-container"]}`,style:{alignItems:"center",bottom:document.body.offsetHeight-n.top-4,left:n.left+n.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$l["tooltip-message"]}`,maxLine:2,children:o.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderTop:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})})]});case"bottom":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.x<0?(l.style.left=n.x+n.width/2+"px",l.style.transform="translateX(-1.8rem)",l.style.alignItems="start"):c.right>document.body.offsetWidth&&(l.style.left="unset",l.style.right=document.body.offsetWidth-n.right-n.width/2+"px",l.style.transform="translateX(-1.4rem)",l.style.alignItems="end")}},className:`col ${styles$l["tooltip-container"]}`,style:{alignItems:"center",top:n.bottom+4,left:n.left+n.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderBottom:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$l["tooltip-message"]}`,maxLine:2,children:o.message})]});case"left":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.y<0?(l.style.top=n.y+n.height/2+"px",l.style.transform="translateY(-1.8rem)",l.style.alignItems="start"):c.bottom>document.body.offsetHeight&&(l.style.top="unset",l.style.bottom=document.body.offsetHeight-n.bottom-n.height/2+"px",l.style.transform="translateY(-1.4rem)",l.style.alignItems="end")}},className:`row ${styles$l["tooltip-container"]}`,style:{top:n.top+n.height/2,right:document.body.offsetWidth-n.left-4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$l["tooltip-message"]}`,maxLine:2,children:o.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderLeft:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})})]});case"right":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.y<0?(l.style.top=n.y+n.height/2+"px",l.style.transform="translateY(-1.8rem)",l.style.alignItems="start"):c.bottom>document.body.offsetHeight&&(l.style.top="unset",l.style.bottom=document.body.offsetHeight-n.bottom-n.height/2+"px",l.style.transform="translateY(-1.4rem)",l.style.alignItems="end")}},className:`row ${styles$l["tooltip-container"]}`,style:{top:n.top+n.height/2,left:n.right+4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderRight:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$l["tooltip-message"]}`,maxLine:2,children:o.message})]});default:return jsxRuntimeExports.jsx("div",{})}},warn$1=(s,o,n,a)=>{var c,u,d,h;const l=[n,{code:o,...a||{}}];if((u=(c=s==null?void 0:s.services)==null?void 0:c.logger)!=null&&u.forward)return s.services.logger.forward(l,"warn","react-i18next::",!0);isString$6(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(h=(d=s==null?void 0:s.services)==null?void 0:d.logger)!=null&&h.warn?s.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},alreadyWarned$1={},warnOnce=(s,o,n,a)=>{isString$6(n)&&alreadyWarned$1[n]||(isString$6(n)&&(alreadyWarned$1[n]=new Date),warn$1(s,o,n,a))},loadedClb=(s,o)=>()=>{if(s.isInitialized)o();else{const n=()=>{setTimeout(()=>{s.off("initialized",n)},0),o()};s.on("initialized",n)}},loadNamespaces=(s,o,n)=>{s.loadNamespaces(o,loadedClb(s,n))},loadLanguages=(s,o,n,a)=>{if(isString$6(n)&&(n=[n]),s.options.preload&&s.options.preload.indexOf(o)>-1)return loadNamespaces(s,n,a);n.forEach(l=>{s.options.ns.indexOf(l)<0&&s.options.ns.push(l)}),s.loadLanguages(o,loadedClb(s,a))},hasLoadedNamespace=(s,o,n={})=>!o.languages||!o.languages.length?(warnOnce(o,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:o.languages}),!0):o.hasLoadedNamespace(s,{lng:n.lng,precheck:(a,l)=>{var c;if(((c=n.bindI18n)==null?void 0:c.indexOf("languageChanging"))>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!l(a.isLanguageChangingTo,s))return!1}}),getDisplayName=s=>s.displayName||s.name||(isString$6(s)&&s.length>0?s:"Unknown"),isString$6=s=>typeof s=="string",isObject$8=s=>typeof s=="object"&&s!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=s=>htmlEntities[s],unescape$2=s=>s.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions$2={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$2};const setDefaults=(s={})=>{defaultOptions$2={...defaultOptions$2,...s}},getDefaults$1=()=>defaultOptions$2;let i18nInstance;const setI18n=s=>{i18nInstance=s},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(s){setDefaults(s.options.react),setI18n(s)}},I18nContext=React.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(o){o.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(s,o)=>{const n=React.useRef();return React.useEffect(()=>{n.current=s},[s,o]),n.current},alwaysNewT=(s,o,n,a)=>s.getFixedT(o,n,a),useMemoizedT=(s,o,n,a)=>React.useCallback(alwaysNewT(s,o,n,a),[s,o,n,a]),useTranslation=(s,o={})=>{var R,A,M,D;const{i18n:n}=o,{i18n:a,defaultNS:l}=React.useContext(I18nContext)||{},c=n||a||getI18n();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new ReportNamespaces),!c){warnOnce(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const O=(j,q)=>isString$6(q)?q:isObject$8(q)&&isString$6(q.defaultValue)?q.defaultValue:Array.isArray(j)?j[j.length-1]:j,H=[O,{},!1];return H.t=O,H.i18n={},H.ready=!1,H}(R=c.options.react)!=null&&R.wait&&warnOnce(c,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...getDefaults$1(),...c.options.react,...o},{useSuspense:d,keyPrefix:h}=u;let f=l||((A=c.options)==null?void 0:A.defaultNS);f=isString$6(f)?[f]:f||["translation"],(D=(M=c.reportNamespaces).addUsedNamespaces)==null||D.call(M,f);const g=(c.isInitialized||c.initializedStoreOnce)&&f.every(O=>hasLoadedNamespace(O,c,u)),p=useMemoizedT(c,o.lng||null,u.nsMode==="fallback"?f:f[0],h),v=()=>p,b=()=>alwaysNewT(c,o.lng||null,u.nsMode==="fallback"?f:f[0],h),[_,w]=React.useState(v);let x=f.join();o.lng&&(x=`${o.lng}${x}`);const S=usePrevious(x),C=React.useRef(!0);React.useEffect(()=>{const{bindI18n:O,bindI18nStore:H}=u;C.current=!0,!g&&!d&&(o.lng?loadLanguages(c,o.lng,f,()=>{C.current&&w(b)}):loadNamespaces(c,f,()=>{C.current&&w(b)})),g&&S&&S!==x&&C.current&&w(b);const j=()=>{C.current&&w(b)};return O&&(c==null||c.on(O,j)),H&&(c==null||c.store.on(H,j)),()=>{C.current=!1,c&&(O==null||O.split(" ").forEach(q=>c.off(q,j))),H&&c&&H.split(" ").forEach(q=>c.store.off(q,j))}},[c,x]),React.useEffect(()=>{C.current&&g&&w(v)},[c,h,g]);const T=[_,c,g];if(T.t=_,T.i18n=c,T.ready=g,g||!g&&!d)return T;throw new Promise(O=>{o.lng?loadLanguages(c,o.lng,f,()=>O()):loadNamespaces(c,f,()=>O())})},withTranslation=(s,o={})=>function(a){function l({forwardedRef:u,...d}){const[h,f,g]=useTranslation(s,{...d,keyPrefix:o.keyPrefix}),p={...d,t:h,i18n:f,tReady:g};return o.withRef&&u?p.ref=u:!o.withRef&&u&&(p.forwardedRef=u),React.createElement(a,p)}l.displayName=`withI18nextTranslation(${getDisplayName(a)})`,l.WrappedComponent=a;const c=(u,d)=>React.createElement(l,Object.assign({},u,{forwardedRef:d}));return o.withRef?React.forwardRef(c):l},showPopup=s=>{var o,n;(n=(o=s.ref)==null?void 0:o.current)==null||n.onOpen({heading:s.heading,content:s.content,body:s.body,footer:s.footer,clickOverlayClosePopup:s.clickOverlayClosePopup,style:s.style,className:s.className,hideOverlay:s.hideOverlay})},closePopup=s=>{s.current.onClose()};class Popup extends React.Component{constructor(n){super(n);E(this,"state",{open:!1})}onOpen(n){this.setState({open:!0,...n})}onClose(){this.setState({open:!1})}render(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.open&&jsxRuntimeExports.jsx(PopupOverlay,{className:this.state.hideOverlay?"hidden-overlay":"",onClose:this.state.hideOverlay||this.state.clickOverlayClosePopup?()=>{this.onClose()}:void 0,children:this.state.content??jsxRuntimeExports.jsxs("div",{className:`popup-container col ${this.state.className??""}`,onClick:n=>n.stopPropagation(),style:this.state.style,children:[this.state.heading,this.state.body,this.state.footer]})})})}}function PopupOverlay({children:s,onClose:o,className:n,style:a,onOpen:l}){const c=React.useRef(null);return React.useEffect(()=>{if(c.current&&o){const u=d=>{(d.target===c.current||!c.current.contains(d.target))&&o(d)};return window.document.body.addEventListener("mousedown",u),()=>{window.document.body.removeEventListener("mousedown",u)}}},[c.current]),React.useEffect(()=>{c.current&&l&&l(c.current)},[c.current,l]),React.useEffect(()=>{if(c.current&&c.current.firstChild&&!l){const u=setTimeout(()=>{const d=c.current.firstChild,h=d.getBoundingClientRect();h.x<0?(d.style.left="0px",d.style.right="unset"):h.right>document.body.offsetWidth&&(d.style.right="0px",d.style.left="unset"),h.y<0?(d.style.top="0px",d.style.bottom="unset"):h.bottom>document.body.offsetHeight&&(d.style.bottom="0px",d.style.top="unset")},300);return()=>{clearTimeout(u)}}},[c]),jsxRuntimeExports.jsx("div",{ref:c,className:`popup-overlay ${n??""}`,style:a,children:s})}const Select1=({style:s={},...o})=>{var w,x;const n=React.useRef(null),a=React.useRef(null),{t:l}=useTranslation(),[c,u]=React.useState([]),[d,h]=React.useState(void 0),[f,g]=React.useState(),[p,v]=React.useState(!1),b=React.useMemo(()=>c.find(S=>S.id===f),[c.length,f]),_=S=>{S.disabled||g(S.id),v(!1),o.onChange&&o.onChange(S)};return React.useEffect(()=>{g(o.value)},[o.value]),React.useEffect(()=>{u(o.options??[])},[o.options]),React.useEffect(()=>{a.current&&(a.current.value=b!=null&&b.name&&(typeof b.name=="string"||typeof b.name=="number")?`${b.name}`:"")},[b,a.current]),jsxRuntimeExports.jsxs("label",{id:o.id,ref:n,className:`${o.simpleStyle?styles$m["select1-simple-style"]:styles$m["select1-container"]} row ${o.disabled?styles$m.disabled:""} ${(w=o.helperText)!=null&&w.length?styles$m["helper-text"]:""} ${o.className??(o.simpleStyle?"":"body-3")}`,"helper-text":o.helperText,style:{"--helper-text-color":o.helperTextColor??"#e14337",...s},children:[o.prefix,!b||typeof b.name=="string"||typeof b.name=="number"?jsxRuntimeExports.jsx("input",{ref:a,readOnly:o.readOnly,placeholder:o.placeholder,disabled:o.disabled,onFocus:()=>{v(!0)},onChange:async S=>{if(S.target.value.trim().length)if(o!=null&&o.handleSearch){const C=await o.handleSearch(S.target.value.trim());h(C)}else h(o.options.filter(C=>typeof C.name=="string"&&C.name.toLowerCase().includes(S.target.value.trim().toLowerCase())));else h(void 0)}}):b.name,o.suffix??jsxRuntimeExports.jsx("div",{ref:S=>{S!=null&&S.parentElement&&S.parentElement.getBoundingClientRect().width<88&&(S.style.display="none")},className:"row",children:jsxRuntimeExports.jsx(Winicon,{src:p?"fill/arrows/up-arrow":"fill/arrows/down-arrow",size:"1.2rem"})}),p&&jsxRuntimeExports.jsx(PopupOverlay,{onOpen:S=>{setTimeout(()=>{const C=S.firstChild,T=C.getBoundingClientRect(),R=n.current.getBoundingClientRect();T.right>document.body.offsetWidth&&(C.style.left="",C.style.right=`${document.body.offsetWidth-R.right}px`),T.bottom-8>document.body.offsetHeight&&(C.style.top="",C.style.bottom=`${document.body.offsetHeight-R.y+2}px`)},300),o.onOpenOptions&&o.onOpenOptions(S)},className:"hidden-overlay",onClose:()=>{v(!1)},children:jsxRuntimeExports.jsx("div",{className:`${styles$m["select1-popup"]} select1-popup dropdown-popup col ${o.popupClassName??""}`,style:{top:n.current.getBoundingClientRect().bottom+2,left:n.current.getBoundingClientRect().x,width:n.current.offsetWidth},children:jsxRuntimeExports.jsxs("div",{className:`col ${styles$m["select-body"]}`,onScroll:o.handleLoadmore?S=>{if(o.handleLoadmore){let C=S.target;o.handleLoadmore(Math.round(C.offsetHeight+C.scrollTop)>=C.scrollHeight-1,S)}}:void 0,children:[(d??c).filter(S=>!S.parentId).map(S=>jsxRuntimeExports.jsx(OptionsItemTile,{item:S,children:(d??c).filter(C=>C.parentId===S.id),selected:f===S.id,onClick:_,treeData:(d??c).some(C=>C.parentId)},S.id)),((d==null?void 0:d.length)===0||!((x=o.options)!=null&&x.length))&&jsxRuntimeExports.jsx("div",{className:styles$m["no-results-found"],children:l("noResultFound")})]})})})]})};function OptionsItemTile({item:s,children:o,selected:n,onClick:a,treeData:l}){const[c,u]=React.useState(!1);return s.title&&typeof s.title!="string"?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:s.title(a)}):jsxRuntimeExports.jsxs("div",{className:"col",style:{width:"100%"},children:[jsxRuntimeExports.jsxs("div",{className:`${styles$m["select-tile"]} row ${s.disabled?styles$m.disabled:""}`,style:{paddingLeft:s.parentId?"4.4rem":void 0,backgroundColor:n?"var(--neutral-selected-background-color)":void 0},onClick:d=>{d.stopPropagation(),d.preventDefault(),o!=null&&o.length?u(!c):a(s)},children:[l?jsxRuntimeExports.jsx("div",{className:"row",style:{width:"1.4rem",height:"1.4rem"},children:o!=null&&o.length?jsxRuntimeExports.jsx(Winicon,{src:c?"fill/arrows/triangle-down":"fill/arrows/triangle-right",size:"1.2rem"}):null}):void 0,s.title&&typeof s.title=="string"||typeof s.name=="string"?jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:s.title&&typeof s.title=="string"?s.title:s.name}):s.name]}),o!=null&&o.length?jsxRuntimeExports.jsx("div",{className:"col",style:{display:c?"flex":"none",width:"100%"},children:o.map(d=>jsxRuntimeExports.jsx(OptionsItemTile,{item:d,onClick:a},d.id))}):void 0]})}const slider="_slider_1bsgu_41",styles$k={"switch-container":"_switch-container_1bsgu_1",slider},Switch=s=>{const[o,n]=React.useState(s.value),a=React.useRef(null),l=React.useMemo(()=>{let c={"--size":s.size?typeof s.size=="number"?`${s.size}px`:s.size:"2rem"};s.offBackground&&(c["--off-bg"]=s.offBackground),s.onBackground&&(c["--on-bg"]=s.onBackground),s.dotColor&&(c["--dot-color"]=s.dotColor);let u={height:s.size??"2rem",width:`calc(${s.size?typeof s.size=="number"?`${s.size}px`:s.size:"2rem"} * 9 / 5)`,...c};return s.style&&(delete s.style.width,delete s.style.minWidth,delete s.style.maxWidth,delete s.style.height,delete s.style.minHeight,delete s.style.maxHeight,u={...s.style,...u}),u},[s.size,s.style,s.offBackground,s.onBackground,s.dotColor]);return React.useEffect(()=>{s.value!==o&&n(s.value)},[s.value]),jsxRuntimeExports.jsxs("label",{id:s.id,className:`${styles$k["switch-container"]} row ${s.className??""}`,style:l,children:[jsxRuntimeExports.jsx("input",{ref:a,type:"checkbox",checked:!!o,hidden:!0,name:s.name,disabled:s.disabled,onChange:c=>{n(c.target.checked),s.onChange&&s.onChange(c.target.checked,c.target)}}),jsxRuntimeExports.jsx("span",{className:styles$k.slider})]})},styles$j={"dialog-overlay":"_dialog-overlay_19n83_1","dialog-container":"_dialog-container_19n83_27","dialog-body":"_dialog-body_19n83_59","dialog-status":"_dialog-status_19n83_87","dialog-footer":"_dialog-footer_19n83_103","dialog-action":"_dialog-action_19n83_115","dialog-submit":"_dialog-submit_19n83_139"};var DialogAlignment=(s=>(s.start="start",s.center="center",s.end="end",s))(DialogAlignment||{});class TDialog extends React.Component{constructor(o){super(o),this.state={open:!1,title:"",status:ComponentStatus.INFOR,content:"",onSubmit:()=>{}}}showDialogNoti(o){this.setState({open:!0,...o})}closeDialog(){this.setState({open:!1})}render(){const{t:o}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.open&&ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{className:styles$j["dialog-overlay"],children:jsxRuntimeExports.jsxs("div",{className:`${styles$j["dialog-container"]} col`,style:{width:"41.4rem",alignItems:this.state.alignment},"dialog-type":this.state.status,onClick:n=>n.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:`${styles$j["dialog-body"]} col`,style:{alignItems:"inherit"},children:[jsxRuntimeExports.jsx("div",{className:`${styles$j["dialog-status"]} row`,children:getStatusIcon(this.state.status)}),jsxRuntimeExports.jsxs("div",{className:"col",children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-6",style:{textAlign:this.state.alignment==="center"?"center":"start"},children:this.state.title}),jsxRuntimeExports.jsx(Text$2,{className:"body-3",style:{textAlign:this.state.alignment==="center"?"center":"start"},children:this.state.content})]})]}),jsxRuntimeExports.jsxs("div",{className:`${styles$j["dialog-footer"]} row`,children:[jsxRuntimeExports.jsx("button",{type:"button",style:this.state.alignment==="center"?{flex:1,width:"100%"}:void 0,onClick:()=>{this.state.onCancel&&this.state.onCancel(),this.setState({open:!1})},className:`${styles$j["dialog-action"]} row`,children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:this.state.cancelTitle??o("cancel")})}),jsxRuntimeExports.jsx("button",{type:"button",style:this.state.alignment==="center"?{flex:1,width:"100%"}:void 0,onClick:()=>{this.state.onSubmit(),this.setState({open:!1})},className:`${styles$j["dialog-action"]} row ${styles$j["dialog-submit"]}`,children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:this.state.submitTitle??o("submit")})})]})]})}),document.body)})}}const dialogRef=React.createRef(),Dialog$1=()=>{const{t:s,i18n:o}=useTranslation();return jsxRuntimeExports.jsx(TDialog,{ref:dialogRef,t:s,i18n:o,tReady:!0})},showDialog=s=>{dialogRef.current&&dialogRef.current.showDialogNoti({title:s.title??"",status:s.status??ComponentStatus.INFOR,content:s.content??"",onSubmit:s.onSubmit??(()=>{}),onCancel:s.onCancel,submitTitle:s.submitTitle,cancelTitle:s.cancelTitle,alignment:s.alignment})},value="_value_oydxy_29",styles$i={"date-time-picker":"_date-time-picker_oydxy_1","prefix-icon":"_prefix-icon_oydxy_15",value,"simple-date-time-picker":"_simple-date-time-picker_oydxy_31","helper-text":"_helper-text_oydxy_123","popup-actions":"_popup-actions_oydxy_165"};var isCheckBoxInput=s=>s.type==="checkbox",isDateObject=s=>s instanceof Date,isNullOrUndefined=s=>s==null;const isObjectType=s=>typeof s=="object";var isObject$7=s=>!isNullOrUndefined(s)&&!Array.isArray(s)&&isObjectType(s)&&!isDateObject(s),getEventValue=s=>isObject$7(s)&&s.target?isCheckBoxInput(s.target)?s.target.checked:s.target.value:s,getNodeParentName=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,isNameInFieldArray=(s,o)=>s.has(getNodeParentName(o)),isPlainObject$2=s=>{const o=s.constructor&&s.constructor.prototype;return isObject$7(o)&&o.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(s){let o;const n=Array.isArray(s),a=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)o=new Date(s);else if(s instanceof Set)o=new Set(s);else if(!(isWeb&&(s instanceof Blob||a))&&(n||isObject$7(s)))if(o=n?[]:{},!n&&!isPlainObject$2(s))o=s;else for(const l in s)s.hasOwnProperty(l)&&(o[l]=cloneObject(s[l]));else return s;return o}var compact=s=>Array.isArray(s)?s.filter(Boolean):[],isUndefined$1=s=>s===void 0,get$3=(s,o,n)=>{if(!o||!isObject$7(s))return n;const a=compact(o.split(/[,[\].]+?/)).reduce((l,c)=>isNullOrUndefined(l)?l:l[c],s);return isUndefined$1(a)||a===s?isUndefined$1(s[o])?n:s[o]:a},isBoolean$1=s=>typeof s=="boolean",isKey$1=s=>/^\w*$/.test(s),stringToPath$1=s=>compact(s.replace(/["|']|\]/g,"").split(/\.|\[/)),set$3=(s,o,n)=>{let a=-1;const l=isKey$1(o)?[o]:stringToPath$1(o),c=l.length,u=c-1;for(;++a<c;){const d=l[a];let h=n;if(a!==u){const f=s[d];h=isObject$7(f)||Array.isArray(f)?f:isNaN(+l[a+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;s[d]=h,s=s[d]}};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext);var getProxyFormState=(s,o,n,a=!0)=>{const l={defaultValues:o._defaultValues};for(const c in s)Object.defineProperty(l,c,{get:()=>{const u=c;return o._proxyFormState[u]!==VALIDATION_MODE.all&&(o._proxyFormState[u]=!a||VALIDATION_MODE.all),n&&(n[u]=!0),s[u]}});return l};function useFormState(s){const o=useFormContext(),{control:n=o.control,disabled:a,name:l,exact:c}=s||{},[u,d]=React.useState(n._formState),h=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),f=React.useRef(l);return f.current=l,React.useEffect(()=>n._subscribe({name:f.current,formState:h.current,exact:c,callback:g=>{!a&&d({...n._formState,...g})}}),[n,a,c]),React.useEffect(()=>{h.current.isValid&&n._setValid(!0)},[n]),React.useMemo(()=>getProxyFormState(u,n,h.current,!1),[u,n])}var isString$5=s=>typeof s=="string",generateWatchOutput=(s,o,n,a,l)=>isString$5(s)?(a&&o.watch.add(s),get$3(n,s,l)):Array.isArray(s)?s.map(c=>(a&&o.watch.add(c),get$3(n,c))):(a&&(o.watchAll=!0),n);function useWatch(s){const o=useFormContext(),{control:n=o.control,name:a,defaultValue:l,disabled:c,exact:u}=s||{},d=React.useRef(a),h=React.useRef(l);d.current=a,React.useEffect(()=>n._subscribe({name:d.current,formState:{values:!0},exact:u,callback:p=>!c&&g(generateWatchOutput(d.current,n._names,p.values||n._formValues,!1,h.current))}),[n,c,u]);const[f,g]=React.useState(n._getWatch(a,l));return React.useEffect(()=>n._removeUnmounted()),f}function useController(s){const o=useFormContext(),{name:n,disabled:a,control:l=o.control,shouldUnregister:c}=s,u=isNameInFieldArray(l._names.array,n),d=useWatch({control:l,name:n,defaultValue:get$3(l._formValues,n,get$3(l._defaultValues,n,s.defaultValue)),exact:!0}),h=useFormState({control:l,name:n,exact:!0}),f=React.useRef(s),g=React.useRef(l.register(n,{...s.rules,value:d,...isBoolean$1(s.disabled)?{disabled:s.disabled}:{}})),p=React.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$3(h.errors,n)},isDirty:{enumerable:!0,get:()=>!!get$3(h.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!get$3(h.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!get$3(h.validatingFields,n)},error:{enumerable:!0,get:()=>get$3(h.errors,n)}}),[h,n]),v=React.useCallback(x=>g.current.onChange({target:{value:getEventValue(x),name:n},type:EVENTS.CHANGE}),[n]),b=React.useCallback(()=>g.current.onBlur({target:{value:get$3(l._formValues,n),name:n},type:EVENTS.BLUR}),[n,l._formValues]),_=React.useCallback(x=>{const S=get$3(l._fields,n);S&&x&&(S._f.ref={focus:()=>x.focus(),select:()=>x.select(),setCustomValidity:C=>x.setCustomValidity(C),reportValidity:()=>x.reportValidity()})},[l._fields,n]),w=React.useMemo(()=>({name:n,value:d,...isBoolean$1(a)||h.disabled?{disabled:h.disabled||a}:{},onChange:v,onBlur:b,ref:_}),[n,a,h.disabled,v,b,_,d]);return React.useEffect(()=>{const x=l._options.shouldUnregister||c;l.register(n,{...f.current.rules,...isBoolean$1(f.current.disabled)?{disabled:f.current.disabled}:{}});const S=(C,T)=>{const R=get$3(l._fields,C);R&&R._f&&(R._f.mount=T)};if(S(n,!0),x){const C=cloneObject(get$3(l._options.defaultValues,n));set$3(l._defaultValues,n,C),isUndefined$1(get$3(l._formValues,n))&&set$3(l._formValues,n,C)}return!u&&l.register(n),()=>{(u?x&&!l._state.action:x)?l.unregister(n):S(n,!1)}},[n,l,u,c]),React.useEffect(()=>{l._setDisabledField({disabled:a,name:n})},[a,n,l]),React.useMemo(()=>({field:w,formState:h,fieldState:p}),[w,h,p])}const Controller=s=>s.render(useController(s));var appendErrors=(s,o,n,a,l)=>o?{...n[s],types:{...n[s]&&n[s].types?n[s].types:{},[a]:l||!0}}:{},convertToArrayPayload=s=>Array.isArray(s)?s:[s],createSubject=()=>{let s=[];return{get observers(){return s},next:l=>{for(const c of s)c.next&&c.next(l)},subscribe:l=>(s.push(l),{unsubscribe:()=>{s=s.filter(c=>c!==l)}}),unsubscribe:()=>{s=[]}}},isPrimitive$1=s=>isNullOrUndefined(s)||!isObjectType(s);function deepEqual(s,o){if(isPrimitive$1(s)||isPrimitive$1(o))return s===o;if(isDateObject(s)&&isDateObject(o))return s.getTime()===o.getTime();const n=Object.keys(s),a=Object.keys(o);if(n.length!==a.length)return!1;for(const l of n){const c=s[l];if(!a.includes(l))return!1;if(l!=="ref"){const u=o[l];if(isDateObject(c)&&isDateObject(u)||isObject$7(c)&&isObject$7(u)||Array.isArray(c)&&Array.isArray(u)?!deepEqual(c,u):c!==u)return!1}}return!0}var isEmptyObject=s=>isObject$7(s)&&!Object.keys(s).length,isFileInput=s=>s.type==="file",isFunction$4=s=>typeof s=="function",isHTMLElement=s=>{if(!isWeb)return!1;const o=s?s.ownerDocument:0;return s instanceof(o&&o.defaultView?o.defaultView.HTMLElement:HTMLElement)},isMultipleSelect=s=>s.type==="select-multiple",isRadioInput=s=>s.type==="radio",isRadioOrCheckbox=s=>isRadioInput(s)||isCheckBoxInput(s),live=s=>isHTMLElement(s)&&s.isConnected;function baseGet$1(s,o){const n=o.slice(0,-1).length;let a=0;for(;a<n;)s=isUndefined$1(s)?a++:s[o[a++]];return s}function isEmptyArray(s){for(const o in s)if(s.hasOwnProperty(o)&&!isUndefined$1(s[o]))return!1;return!0}function unset$1(s,o){const n=Array.isArray(o)?o:isKey$1(o)?[o]:stringToPath$1(o),a=n.length===1?s:baseGet$1(s,n),l=n.length-1,c=n[l];return a&&delete a[c],l!==0&&(isObject$7(a)&&isEmptyObject(a)||Array.isArray(a)&&isEmptyArray(a))&&unset$1(s,n.slice(0,-1)),s}var objectHasFunction=s=>{for(const o in s)if(isFunction$4(s[o]))return!0;return!1};function markFieldsDirty(s,o={}){const n=Array.isArray(s);if(isObject$7(s)||n)for(const a in s)Array.isArray(s[a])||isObject$7(s[a])&&!objectHasFunction(s[a])?(o[a]=Array.isArray(s[a])?[]:{},markFieldsDirty(s[a],o[a])):isNullOrUndefined(s[a])||(o[a]=!0);return o}function getDirtyFieldsFromDefaultValues(s,o,n){const a=Array.isArray(s);if(isObject$7(s)||a)for(const l in s)Array.isArray(s[l])||isObject$7(s[l])&&!objectHasFunction(s[l])?isUndefined$1(o)||isPrimitive$1(n[l])?n[l]=Array.isArray(s[l])?markFieldsDirty(s[l],[]):{...markFieldsDirty(s[l])}:getDirtyFieldsFromDefaultValues(s[l],isNullOrUndefined(o)?{}:o[l],n[l]):n[l]=!deepEqual(s[l],o[l]);return n}var getDirtyFields=(s,o)=>getDirtyFieldsFromDefaultValues(s,o,markFieldsDirty(o));const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=s=>{if(Array.isArray(s)){if(s.length>1){const o=s.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:o,isValid:!!o.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!isUndefined$1(s[0].attributes.value)?isUndefined$1(s[0].value)||s[0].value===""?validResult:{value:s[0].value,isValid:!0}:validResult:defaultResult}return defaultResult},getFieldValueAs=(s,{valueAsNumber:o,valueAsDate:n,setValueAs:a})=>isUndefined$1(s)?s:o?s===""?NaN:s&&+s:n&&isString$5(s)?new Date(s):a?a(s):s;const defaultReturn={isValid:!1,value:null};var getRadioValue=s=>Array.isArray(s)?s.reduce((o,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:o,defaultReturn):defaultReturn;function getFieldValue(s){const o=s.ref;return isFileInput(o)?o.files:isRadioInput(o)?getRadioValue(s.refs).value:isMultipleSelect(o)?[...o.selectedOptions].map(({value:n})=>n):isCheckBoxInput(o)?getCheckboxValue(s.refs).value:getFieldValueAs(isUndefined$1(o.value)?s.ref.value:o.value,s)}var getResolverOptions=(s,o,n,a)=>{const l={};for(const c of s){const u=get$3(o,c);u&&set$3(l,c,u._f)}return{criteriaMode:n,names:[...s],fields:l,shouldUseNativeValidation:a}},isRegex=s=>s instanceof RegExp,getRuleValue=s=>isUndefined$1(s)?s:isRegex(s)?s.source:isObject$7(s)?isRegex(s.value)?s.value.source:s.value:s,getValidationModes=s=>({isOnSubmit:!s||s===VALIDATION_MODE.onSubmit,isOnBlur:s===VALIDATION_MODE.onBlur,isOnChange:s===VALIDATION_MODE.onChange,isOnAll:s===VALIDATION_MODE.all,isOnTouch:s===VALIDATION_MODE.onTouched});const ASYNC_FUNCTION="AsyncFunction";var hasPromiseValidation=s=>!!s&&!!s.validate&&!!(isFunction$4(s.validate)&&s.validate.constructor.name===ASYNC_FUNCTION||isObject$7(s.validate)&&Object.values(s.validate).find(o=>o.constructor.name===ASYNC_FUNCTION)),hasValidation=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),isWatched=(s,o,n)=>!n&&(o.watchAll||o.watch.has(s)||[...o.watch].some(a=>s.startsWith(a)&&/^\.\w+/.test(s.slice(a.length))));const iterateFieldsByAction=(s,o,n,a)=>{for(const l of n||Object.keys(s)){const c=get$3(s,l);if(c){const{_f:u,...d}=c;if(u){if(u.refs&&u.refs[0]&&o(u.refs[0],l)&&!a)return!0;if(u.ref&&o(u.ref,u.name)&&!a)return!0;if(iterateFieldsByAction(d,o))break}else if(isObject$7(d)&&iterateFieldsByAction(d,o))break}}};function schemaErrorLookup(s,o,n){const a=get$3(s,n);if(a||isKey$1(n))return{error:a,name:n};const l=n.split(".");for(;l.length;){const c=l.join("."),u=get$3(o,c),d=get$3(s,c);if(u&&!Array.isArray(u)&&n!==c)return{name:n};if(d&&d.type)return{name:c,error:d};l.pop()}return{name:n}}var shouldRenderFormState=(s,o,n,a)=>{n(s);const{name:l,...c}=s;return isEmptyObject(c)||Object.keys(c).length>=Object.keys(o).length||Object.keys(c).find(u=>o[u]===(!a||VALIDATION_MODE.all))},shouldSubscribeByName=(s,o,n)=>!s||!o||s===o||convertToArrayPayload(s).some(a=>a&&(n?a===o:a.startsWith(o)||o.startsWith(a))),skipValidation=(s,o,n,a,l)=>l.isOnAll?!1:!n&&l.isOnTouch?!(o||s):(n?a.isOnBlur:l.isOnBlur)?!s:(n?a.isOnChange:l.isOnChange)?s:!0,unsetEmptyArray=(s,o)=>!compact(get$3(s,o)).length&&unset$1(s,o),updateFieldArrayRootError=(s,o,n)=>{const a=convertToArrayPayload(get$3(s,n));return set$3(a,"root",o[n]),set$3(s,n,a),s},isMessage=s=>isString$5(s);function getValidateError(s,o,n="validate"){if(isMessage(s)||Array.isArray(s)&&s.every(isMessage)||isBoolean$1(s)&&!s)return{type:n,message:isMessage(s)?s:"",ref:o}}var getValueAndMessage=s=>isObject$7(s)&&!isRegex(s)?s:{value:s,message:""},validateField=async(s,o,n,a,l,c)=>{const{ref:u,refs:d,required:h,maxLength:f,minLength:g,min:p,max:v,pattern:b,validate:_,name:w,valueAsNumber:x,mount:S}=s._f,C=get$3(n,w);if(!S||o.has(w))return{};const T=d?d[0]:u,R=Y=>{l&&T.reportValidity&&(T.setCustomValidity(isBoolean$1(Y)?"":Y||""),T.reportValidity())},A={},M=isRadioInput(u),D=isCheckBoxInput(u),O=M||D,H=(x||isFileInput(u))&&isUndefined$1(u.value)&&isUndefined$1(C)||isHTMLElement(u)&&u.value===""||C===""||Array.isArray(C)&&!C.length,j=appendErrors.bind(null,w,a,A),q=(Y,ee,te,re=INPUT_VALIDATION_RULES.maxLength,ae=INPUT_VALIDATION_RULES.minLength)=>{const ue=Y?ee:te;A[w]={type:Y?re:ae,message:ue,ref:u,...j(Y?re:ae,ue)}};if(c?!Array.isArray(C)||!C.length:h&&(!O&&(H||isNullOrUndefined(C))||isBoolean$1(C)&&!C||D&&!getCheckboxValue(d).isValid||M&&!getRadioValue(d).isValid)){const{value:Y,message:ee}=isMessage(h)?{value:!!h,message:h}:getValueAndMessage(h);if(Y&&(A[w]={type:INPUT_VALIDATION_RULES.required,message:ee,ref:T,...j(INPUT_VALIDATION_RULES.required,ee)},!a))return R(ee),A}if(!H&&(!isNullOrUndefined(p)||!isNullOrUndefined(v))){let Y,ee;const te=getValueAndMessage(v),re=getValueAndMessage(p);if(!isNullOrUndefined(C)&&!isNaN(C)){const ae=u.valueAsNumber||C&&+C;isNullOrUndefined(te.value)||(Y=ae>te.value),isNullOrUndefined(re.value)||(ee=ae<re.value)}else{const ae=u.valueAsDate||new Date(C),ue=ie=>new Date(new Date().toDateString()+" "+ie),ce=u.type=="time",le=u.type=="week";isString$5(te.value)&&C&&(Y=ce?ue(C)>ue(te.value):le?C>te.value:ae>new Date(te.value)),isString$5(re.value)&&C&&(ee=ce?ue(C)<ue(re.value):le?C<re.value:ae<new Date(re.value))}if((Y||ee)&&(q(!!Y,te.message,re.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!a))return R(A[w].message),A}if((f||g)&&!H&&(isString$5(C)||c&&Array.isArray(C))){const Y=getValueAndMessage(f),ee=getValueAndMessage(g),te=!isNullOrUndefined(Y.value)&&C.length>+Y.value,re=!isNullOrUndefined(ee.value)&&C.length<+ee.value;if((te||re)&&(q(te,Y.message,ee.message),!a))return R(A[w].message),A}if(b&&!H&&isString$5(C)){const{value:Y,message:ee}=getValueAndMessage(b);if(isRegex(Y)&&!C.match(Y)&&(A[w]={type:INPUT_VALIDATION_RULES.pattern,message:ee,ref:u,...j(INPUT_VALIDATION_RULES.pattern,ee)},!a))return R(ee),A}if(_){if(isFunction$4(_)){const Y=await _(C,n),ee=getValidateError(Y,T);if(ee&&(A[w]={...ee,...j(INPUT_VALIDATION_RULES.validate,ee.message)},!a))return R(ee.message),A}else if(isObject$7(_)){let Y={};for(const ee in _){if(!isEmptyObject(Y)&&!a)break;const te=getValidateError(await _[ee](C,n),T,ee);te&&(Y={...te,...j(ee,te.message)},R(te.message),a&&(A[w]=Y))}if(!isEmptyObject(Y)&&(A[w]={ref:T,...Y},!a))return A}}return R(!0),A};const defaultOptions$1={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(s={}){let o={...defaultOptions$1,...s},n={submitCount:0,isDirty:!1,isLoading:isFunction$4(o.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:o.errors||{},disabled:o.disabled||!1};const a={};let l=isObject$7(o.defaultValues)||isObject$7(o.values)?cloneObject(o.values||o.defaultValues)||{}:{},c=o.shouldUnregister?{}:cloneObject(l),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...g};const v={array:createSubject(),state:createSubject()},b=getValidationModes(o.mode),_=getValidationModes(o.reValidateMode),w=o.criteriaMode===VALIDATION_MODE.all,x=se=>me=>{clearTimeout(f),f=setTimeout(se,me)},S=async se=>{if(!o.disabled&&(g.isValid||p.isValid||se)){const me=o.resolver?isEmptyObject((await H()).errors):await q(a,!0);me!==n.isValid&&v.state.next({isValid:me})}},C=(se,me)=>{!o.disabled&&(g.isValidating||g.validatingFields||p.isValidating||p.validatingFields)&&((se||Array.from(d.mount)).forEach(ye=>{ye&&(me?set$3(n.validatingFields,ye,me):unset$1(n.validatingFields,ye))}),v.state.next({validatingFields:n.validatingFields,isValidating:!isEmptyObject(n.validatingFields)}))},T=(se,me=[],ye,Me,Ie=!0,Pe=!0)=>{if(Me&&ye&&!o.disabled){if(u.action=!0,Pe&&Array.isArray(get$3(a,se))){const $e=ye(get$3(a,se),Me.argA,Me.argB);Ie&&set$3(a,se,$e)}if(Pe&&Array.isArray(get$3(n.errors,se))){const $e=ye(get$3(n.errors,se),Me.argA,Me.argB);Ie&&set$3(n.errors,se,$e),unsetEmptyArray(n.errors,se)}if((g.touchedFields||p.touchedFields)&&Pe&&Array.isArray(get$3(n.touchedFields,se))){const $e=ye(get$3(n.touchedFields,se),Me.argA,Me.argB);Ie&&set$3(n.touchedFields,se,$e)}(g.dirtyFields||p.dirtyFields)&&(n.dirtyFields=getDirtyFields(l,c)),v.state.next({name:se,isDirty:ee(se,me),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else set$3(c,se,me)},R=(se,me)=>{set$3(n.errors,se,me),v.state.next({errors:n.errors})},A=se=>{n.errors=se,v.state.next({errors:n.errors,isValid:!1})},M=(se,me,ye,Me)=>{const Ie=get$3(a,se);if(Ie){const Pe=get$3(c,se,isUndefined$1(ye)?get$3(l,se):ye);isUndefined$1(Pe)||Me&&Me.defaultChecked||me?set$3(c,se,me?Pe:getFieldValue(Ie._f)):ae(se,Pe),u.mount&&S()}},D=(se,me,ye,Me,Ie)=>{let Pe=!1,$e=!1;const Be={name:se};if(!o.disabled){if(!ye||Me){(g.isDirty||p.isDirty)&&($e=n.isDirty,n.isDirty=Be.isDirty=ee(),Pe=$e!==Be.isDirty);const Ge=deepEqual(get$3(l,se),me);$e=!!get$3(n.dirtyFields,se),Ge?unset$1(n.dirtyFields,se):set$3(n.dirtyFields,se,!0),Be.dirtyFields=n.dirtyFields,Pe=Pe||(g.dirtyFields||p.dirtyFields)&&$e!==!Ge}if(ye){const Ge=get$3(n.touchedFields,se);Ge||(set$3(n.touchedFields,se,ye),Be.touchedFields=n.touchedFields,Pe=Pe||(g.touchedFields||p.touchedFields)&&Ge!==ye)}Pe&&Ie&&v.state.next(Be)}return Pe?Be:{}},O=(se,me,ye,Me)=>{const Ie=get$3(n.errors,se),Pe=(g.isValid||p.isValid)&&isBoolean$1(me)&&n.isValid!==me;if(o.delayError&&ye?(h=x(()=>R(se,ye)),h(o.delayError)):(clearTimeout(f),h=null,ye?set$3(n.errors,se,ye):unset$1(n.errors,se)),(ye?!deepEqual(Ie,ye):Ie)||!isEmptyObject(Me)||Pe){const $e={...Me,...Pe&&isBoolean$1(me)?{isValid:me}:{},errors:n.errors,name:se};n={...n,...$e},v.state.next($e)}},H=async se=>{C(se,!0);const me=await o.resolver(c,o.context,getResolverOptions(se||d.mount,a,o.criteriaMode,o.shouldUseNativeValidation));return C(se),me},j=async se=>{const{errors:me}=await H(se);if(se)for(const ye of se){const Me=get$3(me,ye);Me?set$3(n.errors,ye,Me):unset$1(n.errors,ye)}else n.errors=me;return me},q=async(se,me,ye={valid:!0})=>{for(const Me in se){const Ie=se[Me];if(Ie){const{_f:Pe,...$e}=Ie;if(Pe){const Be=d.array.has(Pe.name),Ge=Ie._f&&hasPromiseValidation(Ie._f);Ge&&g.validatingFields&&C([Me],!0);const Ye=await validateField(Ie,d.disabled,c,w,o.shouldUseNativeValidation&&!me,Be);if(Ge&&g.validatingFields&&C([Me]),Ye[Pe.name]&&(ye.valid=!1,me))break;!me&&(get$3(Ye,Pe.name)?Be?updateFieldArrayRootError(n.errors,Ye,Pe.name):set$3(n.errors,Pe.name,Ye[Pe.name]):unset$1(n.errors,Pe.name))}!isEmptyObject($e)&&await q($e,me,ye)}}return ye.valid},Y=()=>{for(const se of d.unMount){const me=get$3(a,se);me&&(me._f.refs?me._f.refs.every(ye=>!live(ye)):!live(me._f.ref))&&Te(se)}d.unMount=new Set},ee=(se,me)=>!o.disabled&&(se&&me&&set$3(c,se,me),!deepEqual(ge(),l)),te=(se,me,ye)=>generateWatchOutput(se,d,{...u.mount?c:isUndefined$1(me)?l:isString$5(se)?{[se]:me}:me},ye,me),re=se=>compact(get$3(u.mount?c:l,se,o.shouldUnregister?get$3(l,se,[]):[])),ae=(se,me,ye={})=>{const Me=get$3(a,se);let Ie=me;if(Me){const Pe=Me._f;Pe&&(!Pe.disabled&&set$3(c,se,getFieldValueAs(me,Pe)),Ie=isHTMLElement(Pe.ref)&&isNullOrUndefined(me)?"":me,isMultipleSelect(Pe.ref)?[...Pe.ref.options].forEach($e=>$e.selected=Ie.includes($e.value)):Pe.refs?isCheckBoxInput(Pe.ref)?Pe.refs.length>1?Pe.refs.forEach($e=>(!$e.defaultChecked||!$e.disabled)&&($e.checked=Array.isArray(Ie)?!!Ie.find(Be=>Be===$e.value):Ie===$e.value)):Pe.refs[0]&&(Pe.refs[0].checked=!!Ie):Pe.refs.forEach($e=>$e.checked=$e.value===Ie):isFileInput(Pe.ref)?Pe.ref.value="":(Pe.ref.value=Ie,Pe.ref.type||v.state.next({name:se,values:cloneObject(c)})))}(ye.shouldDirty||ye.shouldTouch)&&D(se,Ie,ye.shouldTouch,ye.shouldDirty,!0),ye.shouldValidate&&de(se)},ue=(se,me,ye)=>{for(const Me in me){const Ie=me[Me],Pe=`${se}.${Me}`,$e=get$3(a,Pe);(d.array.has(se)||isObject$7(Ie)||$e&&!$e._f)&&!isDateObject(Ie)?ue(Pe,Ie,ye):ae(Pe,Ie,ye)}},ce=(se,me,ye={})=>{const Me=get$3(a,se),Ie=d.array.has(se),Pe=cloneObject(me);set$3(c,se,Pe),Ie?(v.array.next({name:se,values:cloneObject(c)}),(g.isDirty||g.dirtyFields||p.isDirty||p.dirtyFields)&&ye.shouldDirty&&v.state.next({name:se,dirtyFields:getDirtyFields(l,c),isDirty:ee(se,Pe)})):Me&&!Me._f&&!isNullOrUndefined(Pe)?ue(se,Pe,ye):ae(se,Pe,ye),isWatched(se,d)&&v.state.next({...n}),v.state.next({name:u.mount?se:void 0,values:cloneObject(c)})},le=async se=>{u.mount=!0;const me=se.target;let ye=me.name,Me=!0;const Ie=get$3(a,ye),Pe=$e=>{Me=Number.isNaN($e)||isDateObject($e)&&isNaN($e.getTime())||deepEqual($e,get$3(c,ye,$e))};if(Ie){let $e,Be;const Ge=me.type?getFieldValue(Ie._f):getEventValue(se),Ye=se.type===EVENTS.BLUR||se.type===EVENTS.FOCUS_OUT,Zt=!hasValidation(Ie._f)&&!o.resolver&&!get$3(n.errors,ye)&&!Ie._f.deps||skipValidation(Ye,get$3(n.touchedFields,ye),n.isSubmitted,_,b),$t=isWatched(ye,d,Ye);set$3(c,ye,Ge),Ye?(Ie._f.onBlur&&Ie._f.onBlur(se),h&&h(0)):Ie._f.onChange&&Ie._f.onChange(se);const Bt=D(ye,Ge,Ye),Jt=!isEmptyObject(Bt)||$t;if(!Ye&&v.state.next({name:ye,type:se.type,values:cloneObject(c)}),Zt)return(g.isValid||p.isValid)&&(o.mode==="onBlur"?Ye&&S():Ye||S()),Jt&&v.state.next({name:ye,...$t?{}:Bt});if(!Ye&&$t&&v.state.next({...n}),o.resolver){const{errors:zt}=await H([ye]);if(Pe(Ge),Me){const er=schemaErrorLookup(n.errors,a,ye),Tt=schemaErrorLookup(zt,a,er.name||ye);$e=Tt.error,ye=Tt.name,Be=isEmptyObject(zt)}}else C([ye],!0),$e=(await validateField(Ie,d.disabled,c,w,o.shouldUseNativeValidation))[ye],C([ye]),Pe(Ge),Me&&($e?Be=!1:(g.isValid||p.isValid)&&(Be=await q(a,!0)));Me&&(Ie._f.deps&&de(Ie._f.deps),O(ye,Be,$e,Bt))}},ie=(se,me)=>{if(get$3(n.errors,me)&&se.focus)return se.focus(),1},de=async(se,me={})=>{let ye,Me;const Ie=convertToArrayPayload(se);if(o.resolver){const Pe=await j(isUndefined$1(se)?se:Ie);ye=isEmptyObject(Pe),Me=se?!Ie.some($e=>get$3(Pe,$e)):ye}else se?(Me=(await Promise.all(Ie.map(async Pe=>{const $e=get$3(a,Pe);return await q($e&&$e._f?{[Pe]:$e}:$e)}))).every(Boolean),!(!Me&&!n.isValid)&&S()):Me=ye=await q(a);return v.state.next({...!isString$5(se)||(g.isValid||p.isValid)&&ye!==n.isValid?{}:{name:se},...o.resolver||!se?{isValid:ye}:{},errors:n.errors}),me.shouldFocus&&!Me&&iterateFieldsByAction(a,ie,se?Ie:d.mount),Me},ge=se=>{const me={...u.mount?c:l};return isUndefined$1(se)?me:isString$5(se)?get$3(me,se):se.map(ye=>get$3(me,ye))},pe=(se,me)=>({invalid:!!get$3((me||n).errors,se),isDirty:!!get$3((me||n).dirtyFields,se),error:get$3((me||n).errors,se),isValidating:!!get$3(n.validatingFields,se),isTouched:!!get$3((me||n).touchedFields,se)}),be=se=>{se&&convertToArrayPayload(se).forEach(me=>unset$1(n.errors,me)),v.state.next({errors:se?n.errors:{}})},Se=(se,me,ye)=>{const Me=(get$3(a,se,{_f:{}})._f||{}).ref,Ie=get$3(n.errors,se)||{},{ref:Pe,message:$e,type:Be,...Ge}=Ie;set$3(n.errors,se,{...Ge,...me,ref:Me}),v.state.next({name:se,errors:n.errors,isValid:!1}),ye&&ye.shouldFocus&&Me&&Me.focus&&Me.focus()},Le=(se,me)=>isFunction$4(se)?v.state.subscribe({next:ye=>se(te(void 0,me),ye)}):te(se,me,!0),De=se=>v.state.subscribe({next:me=>{shouldSubscribeByName(se.name,me.name,se.exact)&&shouldRenderFormState(me,se.formState||g,xe,se.reRenderRoot)&&se.callback({values:{...c},...n,...me})}}).unsubscribe,ke=se=>(u.mount=!0,p={...p,...se.formState},De({...se,formState:p})),Te=(se,me={})=>{for(const ye of se?convertToArrayPayload(se):d.mount)d.mount.delete(ye),d.array.delete(ye),me.keepValue||(unset$1(a,ye),unset$1(c,ye)),!me.keepError&&unset$1(n.errors,ye),!me.keepDirty&&unset$1(n.dirtyFields,ye),!me.keepTouched&&unset$1(n.touchedFields,ye),!me.keepIsValidating&&unset$1(n.validatingFields,ye),!o.shouldUnregister&&!me.keepDefaultValue&&unset$1(l,ye);v.state.next({values:cloneObject(c)}),v.state.next({...n,...me.keepDirty?{isDirty:ee()}:{}}),!me.keepIsValid&&S()},Ae=({disabled:se,name:me})=>{(isBoolean$1(se)&&u.mount||se||d.disabled.has(me))&&(se?d.disabled.add(me):d.disabled.delete(me))},Ee=(se,me={})=>{let ye=get$3(a,se);const Me=isBoolean$1(me.disabled)||isBoolean$1(o.disabled);return set$3(a,se,{...ye||{},_f:{...ye&&ye._f?ye._f:{ref:{name:se}},name:se,mount:!0,...me}}),d.mount.add(se),ye?Ae({disabled:isBoolean$1(me.disabled)?me.disabled:o.disabled,name:se}):M(se,!0,me.value),{...Me?{disabled:me.disabled||o.disabled}:{},...o.progressive?{required:!!me.required,min:getRuleValue(me.min),max:getRuleValue(me.max),minLength:getRuleValue(me.minLength),maxLength:getRuleValue(me.maxLength),pattern:getRuleValue(me.pattern)}:{},name:se,onChange:le,onBlur:le,ref:Ie=>{if(Ie){Ee(se,me),ye=get$3(a,se);const Pe=isUndefined$1(Ie.value)&&Ie.querySelectorAll&&Ie.querySelectorAll("input,select,textarea")[0]||Ie,$e=isRadioOrCheckbox(Pe),Be=ye._f.refs||[];if($e?Be.find(Ge=>Ge===Pe):Pe===ye._f.ref)return;set$3(a,se,{_f:{...ye._f,...$e?{refs:[...Be.filter(live),Pe,...Array.isArray(get$3(l,se))?[{}]:[]],ref:{type:Pe.type,name:se}}:{ref:Pe}}}),M(se,!1,void 0,Pe)}else ye=get$3(a,se,{}),ye._f&&(ye._f.mount=!1),(o.shouldUnregister||me.shouldUnregister)&&!(isNameInFieldArray(d.array,se)&&u.action)&&d.unMount.add(se)}}},we=()=>o.shouldFocusError&&iterateFieldsByAction(a,ie,d.mount),Ve=se=>{isBoolean$1(se)&&(v.state.next({disabled:se}),iterateFieldsByAction(a,(me,ye)=>{const Me=get$3(a,ye);Me&&(me.disabled=Me._f.disabled||se,Array.isArray(Me._f.refs)&&Me._f.refs.forEach(Ie=>{Ie.disabled=Me._f.disabled||se}))},0,!1))},_e=(se,me)=>async ye=>{let Me;ye&&(ye.preventDefault&&ye.preventDefault(),ye.persist&&ye.persist());let Ie=cloneObject(c);if(v.state.next({isSubmitting:!0}),o.resolver){const{errors:Pe,values:$e}=await H();n.errors=Pe,Ie=$e}else await q(a);if(d.disabled.size)for(const Pe of d.disabled)set$3(Ie,Pe,void 0);if(unset$1(n.errors,"root"),isEmptyObject(n.errors)){v.state.next({errors:{}});try{await se(Ie,ye)}catch(Pe){Me=Pe}}else me&&await me({...n.errors},ye),we(),setTimeout(we);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(n.errors)&&!Me,submitCount:n.submitCount+1,errors:n.errors}),Me)throw Me},ve=(se,me={})=>{get$3(a,se)&&(isUndefined$1(me.defaultValue)?ce(se,cloneObject(get$3(l,se))):(ce(se,me.defaultValue),set$3(l,se,cloneObject(me.defaultValue))),me.keepTouched||unset$1(n.touchedFields,se),me.keepDirty||(unset$1(n.dirtyFields,se),n.isDirty=me.defaultValue?ee(se,cloneObject(get$3(l,se))):ee()),me.keepError||(unset$1(n.errors,se),g.isValid&&S()),v.state.next({...n}))},fe=(se,me={})=>{const ye=se?cloneObject(se):l,Me=cloneObject(ye),Ie=isEmptyObject(se),Pe=Ie?l:Me;if(me.keepDefaultValues||(l=ye),!me.keepValues){if(me.keepDirtyValues){const $e=new Set([...d.mount,...Object.keys(getDirtyFields(l,c))]);for(const Be of Array.from($e))get$3(n.dirtyFields,Be)?set$3(Pe,Be,get$3(c,Be)):ce(Be,get$3(Pe,Be))}else{if(isWeb&&isUndefined$1(se))for(const $e of d.mount){const Be=get$3(a,$e);if(Be&&Be._f){const Ge=Array.isArray(Be._f.refs)?Be._f.refs[0]:Be._f.ref;if(isHTMLElement(Ge)){const Ye=Ge.closest("form");if(Ye){Ye.reset();break}}}}for(const $e of d.mount)ce($e,get$3(Pe,$e))}c=cloneObject(Pe),v.array.next({values:{...Pe}}),v.state.next({values:{...Pe}})}d={mount:me.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!g.isValid||!!me.keepIsValid||!!me.keepDirtyValues,u.watch=!!o.shouldUnregister,v.state.next({submitCount:me.keepSubmitCount?n.submitCount:0,isDirty:Ie?!1:me.keepDirty?n.isDirty:!!(me.keepDefaultValues&&!deepEqual(se,l)),isSubmitted:me.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ie?{}:me.keepDirtyValues?me.keepDefaultValues&&c?getDirtyFields(l,c):n.dirtyFields:me.keepDefaultValues&&se?getDirtyFields(l,se):me.keepDirty?n.dirtyFields:{},touchedFields:me.keepTouched?n.touchedFields:{},errors:me.keepErrors?n.errors:{},isSubmitSuccessful:me.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},ne=(se,me)=>fe(isFunction$4(se)?se(c):se,me),oe=(se,me={})=>{const ye=get$3(a,se),Me=ye&&ye._f;if(Me){const Ie=Me.refs?Me.refs[0]:Me.ref;Ie.focus&&(Ie.focus(),me.shouldSelect&&isFunction$4(Ie.select)&&Ie.select())}},xe=se=>{n={...n,...se}},Oe={control:{register:Ee,unregister:Te,getFieldState:pe,handleSubmit:_e,setError:Se,_subscribe:De,_runSchema:H,_getWatch:te,_getDirty:ee,_setValid:S,_setFieldArray:T,_setDisabledField:Ae,_setErrors:A,_getFieldArray:re,_reset:fe,_resetDefaultValues:()=>isFunction$4(o.defaultValues)&&o.defaultValues().then(se=>{ne(se,o.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:Y,_disableForm:Ve,_subjects:v,_proxyFormState:g,get _fields(){return a},get _formValues(){return c},get _state(){return u},set _state(se){u=se},get _defaultValues(){return l},get _names(){return d},set _names(se){d=se},get _formState(){return n},get _options(){return o},set _options(se){o={...o,...se}}},subscribe:ke,trigger:de,register:Ee,handleSubmit:_e,watch:Le,setValue:ce,getValues:ge,reset:ne,resetField:ve,clearErrors:be,unregister:Te,setError:Se,setFocus:oe,getFieldState:pe};return{...Oe,formControl:Oe}}function useForm(s={}){const o=React.useRef(void 0),n=React.useRef(void 0),[a,l]=React.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$4(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,defaultValues:isFunction$4(s.defaultValues)?void 0:s.defaultValues});o.current||(o.current={...s.formControl?s.formControl:createFormControl(s),formState:a},s.formControl&&s.defaultValues&&!isFunction$4(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions));const c=o.current.control;return c._options=s,React.useLayoutEffect(()=>c._subscribe({formState:c._proxyFormState,callback:()=>l({...c._formState}),reRenderRoot:!0}),[c]),React.useEffect(()=>c._disableForm(s.disabled),[c,s.disabled]),React.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==a.isDirty&&c._subjects.state.next({isDirty:u})}},[c,a.isDirty]),React.useEffect(()=>{s.values&&!deepEqual(s.values,n.current)?(c._reset(s.values,c._options.resetOptions),n.current=s.values,l(u=>({...u}))):c._resetDefaultValues()},[s.values,c]),React.useEffect(()=>{s.errors&&!isEmptyObject(s.errors)&&c._setErrors(s.errors)},[s.errors,c]),React.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),React.useEffect(()=>{s.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[s.shouldUnregister,c]),o.current.formState=getProxyFormState(a,c),o.current}const millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(s,o){return typeof s=="function"?s(o):s&&typeof s=="object"&&constructFromSymbol in s?s[constructFromSymbol](o):s instanceof Date?new s.constructor(o):new Date(o)}function toDate(s,o){return constructFrom(o||s,s)}function addDays(s,o,n){const a=toDate(s,n==null?void 0:n.in);return isNaN(o)?constructFrom((n==null?void 0:n.in)||s,NaN):(o&&a.setDate(a.getDate()+o),a)}let defaultOptions={};function getDefaultOptions$1(){return defaultOptions}function startOfWeek(s,o){var d,h,f,g;const n=getDefaultOptions$1(),a=(o==null?void 0:o.weekStartsOn)??((h=(d=o==null?void 0:o.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,l=toDate(s,o==null?void 0:o.in),c=l.getDay(),u=(c<a?7:0)+c-a;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function startOfISOWeek(s,o){return startOfWeek(s,{...o,weekStartsOn:1})}function getISOWeekYear(s,o){const n=toDate(s,o==null?void 0:o.in),a=n.getFullYear(),l=constructFrom(n,0);l.setFullYear(a+1,0,4),l.setHours(0,0,0,0);const c=startOfISOWeek(l),u=constructFrom(n,0);u.setFullYear(a,0,4),u.setHours(0,0,0,0);const d=startOfISOWeek(u);return n.getTime()>=c.getTime()?a+1:n.getTime()>=d.getTime()?a:a-1}function getTimezoneOffsetInMilliseconds(s){const o=toDate(s),n=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return n.setUTCFullYear(o.getFullYear()),+s-+n}function normalizeDates(s,...o){const n=constructFrom.bind(null,o.find(a=>typeof a=="object"));return o.map(n)}function startOfDay(s,o){const n=toDate(s,o==null?void 0:o.in);return n.setHours(0,0,0,0),n}function differenceInCalendarDays(s,o,n){const[a,l]=normalizeDates(n==null?void 0:n.in,s,o),c=startOfDay(a),u=startOfDay(l),d=+c-getTimezoneOffsetInMilliseconds(c),h=+u-getTimezoneOffsetInMilliseconds(u);return Math.round((d-h)/millisecondsInDay)}function startOfISOWeekYear(s,o){const n=getISOWeekYear(s,o),a=constructFrom(s,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),startOfISOWeek(a)}function getRoundingMethod(s){return o=>{const n=Math.trunc,a=n(o);return a===0?0:a}}function differenceInMilliseconds(s,o){return+toDate(s)-+toDate(o)}function differenceInMinutes(s,o,n){const a=differenceInMilliseconds(s,o)/millisecondsInMinute;return getRoundingMethod()(a)}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(s,o,n)=>{let a;const l=formatDistanceLocale[s];return typeof l=="string"?a=l:o===1?a=l.one:a=l.other.replace("{{count}}",o.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function buildFormatLongFn(s){return(o={})=>{const n=o.width?String(o.width):s.defaultWidth;return s.formats[n]||s.formats[s.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(s,o,n,a)=>formatRelativeLocale[s];function buildLocalizeFn(s){return(o,n)=>{const a=n!=null&&n.context?String(n.context):"standalone";let l;if(a==="formatting"&&s.formattingValues){const u=s.defaultFormattingWidth||s.defaultWidth,d=n!=null&&n.width?String(n.width):u;l=s.formattingValues[d]||s.formattingValues[u]}else{const u=s.defaultWidth,d=n!=null&&n.width?String(n.width):s.defaultWidth;l=s.values[d]||s.values[u]}const c=s.argumentCallback?s.argumentCallback(o):o;return l[c]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(s,o)=>{const n=Number(s),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:s=>s-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(s){return(o,n={})=>{const a=n.width,l=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],c=o.match(l);if(!c)return null;const u=c[0],d=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],h=Array.isArray(d)?findIndex(d,p=>p.test(u)):findKey$1(d,p=>p.test(u));let f;f=s.valueCallback?s.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;const g=o.slice(u.length);return{value:f,rest:g}}}function findKey$1(s,o){for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&o(s[n]))return n}function findIndex(s,o){for(let n=0;n<s.length;n++)if(o(s[n]))return n}function buildMatchPatternFn(s){return(o,n={})=>{const a=o.match(s.matchPattern);if(!a)return null;const l=a[0],c=o.match(s.parsePattern);if(!c)return null;let u=s.valueCallback?s.valueCallback(c[0]):c[0];u=n.valueCallback?n.valueCallback(u):u;const d=o.slice(l.length);return{value:u,rest:d}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:s=>parseInt(s,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:s=>s+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getISOWeek(s,o){const n=toDate(s,o==null?void 0:o.in),a=+startOfISOWeek(n)-+startOfISOWeekYear(n);return Math.round(a/millisecondsInWeek)+1}function getWeekYear(s,o){var g,p,v,b;const n=toDate(s,o==null?void 0:o.in),a=n.getFullYear(),l=getDefaultOptions$1(),c=(o==null?void 0:o.firstWeekContainsDate)??((p=(g=o==null?void 0:o.locale)==null?void 0:g.options)==null?void 0:p.firstWeekContainsDate)??l.firstWeekContainsDate??((b=(v=l.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,u=constructFrom((o==null?void 0:o.in)||s,0);u.setFullYear(a+1,0,c),u.setHours(0,0,0,0);const d=startOfWeek(u,o),h=constructFrom((o==null?void 0:o.in)||s,0);h.setFullYear(a,0,c),h.setHours(0,0,0,0);const f=startOfWeek(h,o);return+n>=+d?a+1:+n>=+f?a:a-1}function startOfWeekYear(s,o){var d,h,f,g;const n=getDefaultOptions$1(),a=(o==null?void 0:o.firstWeekContainsDate)??((h=(d=o==null?void 0:o.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(f=n.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,l=getWeekYear(s,o),c=constructFrom((o==null?void 0:o.in)||s,0);return c.setFullYear(l,0,a),c.setHours(0,0,0,0),startOfWeek(c,o)}function getWeek(s,o){const n=toDate(s,o==null?void 0:o.in),a=+startOfWeek(n,o)-+startOfWeekYear(n,o);return Math.round(a/millisecondsInWeek)+1}const dateLongFormatter=(s,o)=>{switch(s){case"P":return o.date({width:"short"});case"PP":return o.date({width:"medium"});case"PPP":return o.date({width:"long"});case"PPPP":default:return o.date({width:"full"})}},timeLongFormatter=(s,o)=>{switch(s){case"p":return o.time({width:"short"});case"pp":return o.time({width:"medium"});case"ppp":return o.time({width:"long"});case"pppp":default:return o.time({width:"full"})}},dateTimeLongFormatter=(s,o)=>{const n=s.match(/(P+)(p+)?/)||[],a=n[1],l=n[2];if(!l)return dateLongFormatter(s,o);let c;switch(a){case"P":c=o.dateTime({width:"short"});break;case"PP":c=o.dateTime({width:"medium"});break;case"PPP":c=o.dateTime({width:"long"});break;case"PPPP":default:c=o.dateTime({width:"full"});break}return c.replace("{{date}}",dateLongFormatter(a,o)).replace("{{time}}",timeLongFormatter(l,o))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(s){return dayOfYearTokenRE.test(s)}function isProtectedWeekYearToken(s){return weekYearTokenRE.test(s)}function warnOrThrowProtectedError(s,o,n){const a=message(s,o,n);if(console.warn(a),throwTokens.includes(s))throw new RangeError(a)}function message(s,o,n){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${o}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function getDefaultOptions(){return Object.assign({},getDefaultOptions$1())}function getISODay(s,o){const n=toDate(s,o==null?void 0:o.in).getDay();return n===0?7:n}function transpose(s,o){const n=isConstructor(o)?new o(0):constructFrom(o,0);return n.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),n.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),n}function isConstructor(s){var o;return typeof s=="function"&&((o=s.prototype)==null?void 0:o.constructor)===s}const TIMEZONE_UNIT_PRIORITY=10;class Setter{constructor(){E(this,"subPriority",0)}validate(o,n){return!0}}class ValueSetter extends Setter{constructor(o,n,a,l,c){super(),this.value=o,this.validateValue=n,this.setValue=a,this.priority=l,c&&(this.subPriority=c)}validate(o,n){return this.validateValue(o,this.value,n)}set(o,n,a){return this.setValue(o,n,this.value,a)}}class DateTimezoneSetter extends Setter{constructor(n,a){super();E(this,"priority",TIMEZONE_UNIT_PRIORITY);E(this,"subPriority",-1);this.context=n||(l=>constructFrom(a,l))}set(n,a){return a.timestampIsSet?n:constructFrom(n,transpose(n,this.context))}}let Parser$1=class{run(o,n,a,l){const c=this.parse(o,n,a,l);return c?{setter:new ValueSetter(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(o,n,a){return!0}};class EraParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",140);E(this,"incompatibleTokens",["R","u","t","T"])}parse(n,a,l){switch(a){case"G":case"GG":case"GGG":return l.era(n,{width:"abbreviated"})||l.era(n,{width:"narrow"});case"GGGGG":return l.era(n,{width:"narrow"});case"GGGG":default:return l.era(n,{width:"wide"})||l.era(n,{width:"abbreviated"})||l.era(n,{width:"narrow"})}}set(n,a,l){return a.era=l,n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}}const numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(s,o){return s&&{value:o(s.value),rest:s.rest}}function parseNumericPattern(s,o){const n=o.match(s);return n?{value:parseInt(n[0],10),rest:o.slice(n[0].length)}:null}function parseTimezonePattern(s,o){const n=o.match(s);if(!n)return null;if(n[0]==="Z")return{value:0,rest:o.slice(1)};const a=n[1]==="+"?1:-1,l=n[2]?parseInt(n[2],10):0,c=n[3]?parseInt(n[3],10):0,u=n[5]?parseInt(n[5],10):0;return{value:a*(l*millisecondsInHour+c*millisecondsInMinute+u*millisecondsInSecond),rest:o.slice(n[0].length)}}function parseAnyDigitsSigned(s){return parseNumericPattern(numericPatterns.anyDigitsSigned,s)}function parseNDigits(s,o){switch(s){case 1:return parseNumericPattern(numericPatterns.singleDigit,o);case 2:return parseNumericPattern(numericPatterns.twoDigits,o);case 3:return parseNumericPattern(numericPatterns.threeDigits,o);case 4:return parseNumericPattern(numericPatterns.fourDigits,o);default:return parseNumericPattern(new RegExp("^\\d{1,"+s+"}"),o)}}function parseNDigitsSigned(s,o){switch(s){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,o);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,o);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,o);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,o);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+s+"}"),o)}}function dayPeriodEnumToHours(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(s,o){const n=o>0,a=n?o:1-o;let l;if(a<=50)l=s||100;else{const c=a+50,u=Math.trunc(c/100)*100,d=s>=c%100;l=s+u-(d?100:0)}return n?l:1-l}function isLeapYearIndex(s){return s%400===0||s%4===0&&s%100!==0}class YearParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",130);E(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,a,l){const c=u=>({year:u,isTwoDigitYear:a==="yy"});switch(a){case"y":return mapValue(parseNDigits(4,n),c);case"yo":return mapValue(l.ordinalNumber(n,{unit:"year"}),c);default:return mapValue(parseNDigits(a.length,n),c)}}validate(n,a){return a.isTwoDigitYear||a.year>0}set(n,a,l){const c=n.getFullYear();if(l.isTwoDigitYear){const d=normalizeTwoDigitYear(l.year,c);return n.setFullYear(d,0,1),n.setHours(0,0,0,0),n}const u=!("era"in a)||a.era===1?l.year:1-l.year;return n.setFullYear(u,0,1),n.setHours(0,0,0,0),n}}class LocalWeekYearParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",130);E(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,a,l){const c=u=>({year:u,isTwoDigitYear:a==="YY"});switch(a){case"Y":return mapValue(parseNDigits(4,n),c);case"Yo":return mapValue(l.ordinalNumber(n,{unit:"year"}),c);default:return mapValue(parseNDigits(a.length,n),c)}}validate(n,a){return a.isTwoDigitYear||a.year>0}set(n,a,l,c){const u=getWeekYear(n,c);if(l.isTwoDigitYear){const h=normalizeTwoDigitYear(l.year,u);return n.setFullYear(h,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),startOfWeek(n,c)}const d=!("era"in a)||a.era===1?l.year:1-l.year;return n.setFullYear(d,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),startOfWeek(n,c)}}class ISOWeekYearParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",130);E(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,a){return parseNDigitsSigned(a==="R"?4:a.length,n)}set(n,a,l){const c=constructFrom(n,0);return c.setFullYear(l,0,4),c.setHours(0,0,0,0),startOfISOWeek(c)}}class ExtendedYearParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",130);E(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,a){return parseNDigitsSigned(a==="u"?4:a.length,n)}set(n,a,l){return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}}class QuarterParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",120);E(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,a,l){switch(a){case"Q":case"QQ":return parseNDigits(a.length,n);case"Qo":return l.ordinalNumber(n,{unit:"quarter"});case"QQQ":return l.quarter(n,{width:"abbreviated",context:"formatting"})||l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return l.quarter(n,{width:"wide",context:"formatting"})||l.quarter(n,{width:"abbreviated",context:"formatting"})||l.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=1&&a<=4}set(n,a,l){return n.setMonth((l-1)*3,1),n.setHours(0,0,0,0),n}}class StandAloneQuarterParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",120);E(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,a,l){switch(a){case"q":case"qq":return parseNDigits(a.length,n);case"qo":return l.ordinalNumber(n,{unit:"quarter"});case"qqq":return l.quarter(n,{width:"abbreviated",context:"standalone"})||l.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return l.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return l.quarter(n,{width:"wide",context:"standalone"})||l.quarter(n,{width:"abbreviated",context:"standalone"})||l.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=1&&a<=4}set(n,a,l){return n.setMonth((l-1)*3,1),n.setHours(0,0,0,0),n}}class MonthParser extends Parser$1{constructor(){super(...arguments);E(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);E(this,"priority",110)}parse(n,a,l){const c=u=>u-1;switch(a){case"M":return mapValue(parseNumericPattern(numericPatterns.month,n),c);case"MM":return mapValue(parseNDigits(2,n),c);case"Mo":return mapValue(l.ordinalNumber(n,{unit:"month"}),c);case"MMM":return l.month(n,{width:"abbreviated",context:"formatting"})||l.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return l.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return l.month(n,{width:"wide",context:"formatting"})||l.month(n,{width:"abbreviated",context:"formatting"})||l.month(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=11}set(n,a,l){return n.setMonth(l,1),n.setHours(0,0,0,0),n}}class StandAloneMonthParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",110);E(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,a,l){const c=u=>u-1;switch(a){case"L":return mapValue(parseNumericPattern(numericPatterns.month,n),c);case"LL":return mapValue(parseNDigits(2,n),c);case"Lo":return mapValue(l.ordinalNumber(n,{unit:"month"}),c);case"LLL":return l.month(n,{width:"abbreviated",context:"standalone"})||l.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return l.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return l.month(n,{width:"wide",context:"standalone"})||l.month(n,{width:"abbreviated",context:"standalone"})||l.month(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=0&&a<=11}set(n,a,l){return n.setMonth(l,1),n.setHours(0,0,0,0),n}}function setWeek(s,o,n){const a=toDate(s,n==null?void 0:n.in),l=getWeek(a,n)-o;return a.setDate(a.getDate()-l*7),toDate(a,n==null?void 0:n.in)}class LocalWeekParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",100);E(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,a,l){switch(a){case"w":return parseNumericPattern(numericPatterns.week,n);case"wo":return l.ordinalNumber(n,{unit:"week"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=1&&a<=53}set(n,a,l,c){return startOfWeek(setWeek(n,l,c),c)}}function setISOWeek(s,o,n){const a=toDate(s,n==null?void 0:n.in),l=getISOWeek(a,n)-o;return a.setDate(a.getDate()-l*7),a}class ISOWeekParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",100);E(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,a,l){switch(a){case"I":return parseNumericPattern(numericPatterns.week,n);case"Io":return l.ordinalNumber(n,{unit:"week"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=1&&a<=53}set(n,a,l){return startOfISOWeek(setISOWeek(n,l))}}const DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];class DateParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",90);E(this,"subPriority",1);E(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,a,l){switch(a){case"d":return parseNumericPattern(numericPatterns.date,n);case"do":return l.ordinalNumber(n,{unit:"date"});default:return parseNDigits(a.length,n)}}validate(n,a){const l=n.getFullYear(),c=isLeapYearIndex(l),u=n.getMonth();return c?a>=1&&a<=DAYS_IN_MONTH_LEAP_YEAR[u]:a>=1&&a<=DAYS_IN_MONTH[u]}set(n,a,l){return n.setDate(l),n.setHours(0,0,0,0),n}}class DayOfYearParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",90);E(this,"subpriority",1);E(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,a,l){switch(a){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,n);case"Do":return l.ordinalNumber(n,{unit:"date"});default:return parseNDigits(a.length,n)}}validate(n,a){const l=n.getFullYear();return isLeapYearIndex(l)?a>=1&&a<=366:a>=1&&a<=365}set(n,a,l){return n.setMonth(0,l),n.setHours(0,0,0,0),n}}function setDay(s,o,n){var p,v,b,_;const a=getDefaultOptions$1(),l=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??a.weekStartsOn??((_=(b=a.locale)==null?void 0:b.options)==null?void 0:_.weekStartsOn)??0,c=toDate(s,n==null?void 0:n.in),u=c.getDay(),h=(o%7+7)%7,f=7-l,g=o<0||o>6?o-(u+f)%7:(h+f)%7-(u+f)%7;return addDays(c,g,n)}class DayParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",90);E(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,a,l){switch(a){case"E":case"EE":case"EEE":return l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return l.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=6}set(n,a,l,c){return n=setDay(n,l,c),n.setHours(0,0,0,0),n}}class LocalDayParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",90);E(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,a,l,c){const u=d=>{const h=Math.floor((d-1)/7)*7;return(d+c.weekStartsOn+6)%7+h};switch(a){case"e":case"ee":return mapValue(parseNDigits(a.length,n),u);case"eo":return mapValue(l.ordinalNumber(n,{unit:"day"}),u);case"eee":return l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"eeeee":return l.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=6}set(n,a,l,c){return n=setDay(n,l,c),n.setHours(0,0,0,0),n}}class StandAloneLocalDayParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",90);E(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,a,l,c){const u=d=>{const h=Math.floor((d-1)/7)*7;return(d+c.weekStartsOn+6)%7+h};switch(a){case"c":case"cc":return mapValue(parseNDigits(a.length,n),u);case"co":return mapValue(l.ordinalNumber(n,{unit:"day"}),u);case"ccc":return l.day(n,{width:"abbreviated",context:"standalone"})||l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"});case"ccccc":return l.day(n,{width:"narrow",context:"standalone"});case"cccccc":return l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return l.day(n,{width:"wide",context:"standalone"})||l.day(n,{width:"abbreviated",context:"standalone"})||l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=0&&a<=6}set(n,a,l,c){return n=setDay(n,l,c),n.setHours(0,0,0,0),n}}function setISODay(s,o,n){const a=toDate(s,n==null?void 0:n.in),l=getISODay(a,n),c=o-l;return addDays(a,c,n)}class ISODayParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",90);E(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,a,l){const c=u=>u===0?7:u;switch(a){case"i":case"ii":return parseNDigits(a.length,n);case"io":return l.ordinalNumber(n,{unit:"day"});case"iii":return mapValue(l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),c);case"iiiii":return mapValue(l.day(n,{width:"narrow",context:"formatting"}),c);case"iiiiii":return mapValue(l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),c);case"iiii":default:return mapValue(l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),c)}}validate(n,a){return a>=1&&a<=7}set(n,a,l){return n=setISODay(n,l),n.setHours(0,0,0,0),n}}class AMPMParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",80);E(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,a,l){switch(a){case"a":case"aa":case"aaa":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,l){return n.setHours(dayPeriodEnumToHours(l),0,0,0),n}}class AMPMMidnightParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",80);E(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,a,l){switch(a){case"b":case"bb":case"bbb":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,l){return n.setHours(dayPeriodEnumToHours(l),0,0,0),n}}class DayPeriodParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",80);E(this,"incompatibleTokens",["a","b","t","T"])}parse(n,a,l){switch(a){case"B":case"BB":case"BBB":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,l){return n.setHours(dayPeriodEnumToHours(l),0,0,0),n}}class Hour1to12Parser extends Parser$1{constructor(){super(...arguments);E(this,"priority",70);E(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,a,l){switch(a){case"h":return parseNumericPattern(numericPatterns.hour12h,n);case"ho":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=1&&a<=12}set(n,a,l){const c=n.getHours()>=12;return c&&l<12?n.setHours(l+12,0,0,0):!c&&l===12?n.setHours(0,0,0,0):n.setHours(l,0,0,0),n}}class Hour0to23Parser extends Parser$1{constructor(){super(...arguments);E(this,"priority",70);E(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,a,l){switch(a){case"H":return parseNumericPattern(numericPatterns.hour23h,n);case"Ho":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=0&&a<=23}set(n,a,l){return n.setHours(l,0,0,0),n}}class Hour0To11Parser extends Parser$1{constructor(){super(...arguments);E(this,"priority",70);E(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,a,l){switch(a){case"K":return parseNumericPattern(numericPatterns.hour11h,n);case"Ko":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=0&&a<=11}set(n,a,l){return n.getHours()>=12&&l<12?n.setHours(l+12,0,0,0):n.setHours(l,0,0,0),n}}class Hour1To24Parser extends Parser$1{constructor(){super(...arguments);E(this,"priority",70);E(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,a,l){switch(a){case"k":return parseNumericPattern(numericPatterns.hour24h,n);case"ko":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=1&&a<=24}set(n,a,l){const c=l<=24?l%24:l;return n.setHours(c,0,0,0),n}}class MinuteParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",60);E(this,"incompatibleTokens",["t","T"])}parse(n,a,l){switch(a){case"m":return parseNumericPattern(numericPatterns.minute,n);case"mo":return l.ordinalNumber(n,{unit:"minute"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=0&&a<=59}set(n,a,l){return n.setMinutes(l,0,0),n}}class SecondParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",50);E(this,"incompatibleTokens",["t","T"])}parse(n,a,l){switch(a){case"s":return parseNumericPattern(numericPatterns.second,n);case"so":return l.ordinalNumber(n,{unit:"second"});default:return parseNDigits(a.length,n)}}validate(n,a){return a>=0&&a<=59}set(n,a,l){return n.setSeconds(l,0),n}}class FractionOfSecondParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",30);E(this,"incompatibleTokens",["t","T"])}parse(n,a){const l=c=>Math.trunc(c*Math.pow(10,-a.length+3));return mapValue(parseNDigits(a.length,n),l)}set(n,a,l){return n.setMilliseconds(l),n}}class ISOTimezoneWithZParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",10);E(this,"incompatibleTokens",["t","T","x"])}parse(n,a){switch(a){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,n);case"XX":return parseTimezonePattern(timezonePatterns.basic,n);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,n);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,n);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,n)}}set(n,a,l){return a.timestampIsSet?n:constructFrom(n,n.getTime()-getTimezoneOffsetInMilliseconds(n)-l)}}class ISOTimezoneParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",10);E(this,"incompatibleTokens",["t","T","X"])}parse(n,a){switch(a){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,n);case"xx":return parseTimezonePattern(timezonePatterns.basic,n);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,n);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,n);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,n)}}set(n,a,l){return a.timestampIsSet?n:constructFrom(n,n.getTime()-getTimezoneOffsetInMilliseconds(n)-l)}}class TimestampSecondsParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",40);E(this,"incompatibleTokens","*")}parse(n){return parseAnyDigitsSigned(n)}set(n,a,l){return[constructFrom(n,l*1e3),{timestampIsSet:!0}]}}class TimestampMillisecondsParser extends Parser$1{constructor(){super(...arguments);E(this,"priority",20);E(this,"incompatibleTokens","*")}parse(n){return parseAnyDigitsSigned(n)}set(n,a,l){return[constructFrom(n,l),{timestampIsSet:!0}]}}const parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse$2(s,o,n,a){var x,S,C,T;const l=()=>constructFrom(n,NaN),c=getDefaultOptions(),u=c.locale??enUS,d=c.firstWeekContainsDate??((S=(x=c.locale)==null?void 0:x.options)==null?void 0:S.firstWeekContainsDate)??1,h=c.weekStartsOn??((T=(C=c.locale)==null?void 0:C.options)==null?void 0:T.weekStartsOn)??0,f={firstWeekContainsDate:d,weekStartsOn:h,locale:u},g=[new DateTimezoneSetter(a==null?void 0:a.in,n)],p=o.match(longFormattingTokensRegExp).map(R=>{const A=R[0];if(A in longFormatters){const M=longFormatters[A];return M(R,u.formatLong)}return R}).join("").match(formattingTokensRegExp),v=[];for(let R of p){isProtectedWeekYearToken(R)&&warnOrThrowProtectedError(R,o,s),isProtectedDayOfYearToken(R)&&warnOrThrowProtectedError(R,o,s);const A=R[0],M=parsers[A];if(M){const{incompatibleTokens:D}=M;if(Array.isArray(D)){const H=v.find(j=>D.includes(j.token)||j.token===A);if(H)throw new RangeError(`The format string mustn't contain \`${H.fullToken}\` and \`${R}\` at the same time`)}else if(M.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${R}\` and any other token at the same time`);v.push({token:A,fullToken:R});const O=M.run(s,R,u.match,f);if(!O)return l();g.push(O.setter),s=O.rest}else{if(A.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");if(R==="''"?R="'":A==="'"&&(R=cleanEscapedString(R)),s.indexOf(R)===0)s=s.slice(R.length);else return l()}}if(s.length>0&&notWhitespaceRegExp.test(s))return l();const b=g.map(R=>R.priority).sort((R,A)=>A-R).filter((R,A,M)=>M.indexOf(R)===A).map(R=>g.filter(A=>A.priority===R).sort((A,M)=>M.subPriority-A.subPriority)).map(R=>R[0]);let _=toDate(n,a==null?void 0:a.in);if(isNaN(+_))return l();const w={};for(const R of b){if(!R.validate(_,f))return l();const A=R.set(_,w,f);Array.isArray(A)?(_=A[0],Object.assign(w,A[1])):_=A}return _}function cleanEscapedString(s){return s.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}const styles$h={"simple-text-field":"_simple-text-field_xkh95_1","text-field-container":"_text-field-container_xkh95_3","helper-text":"_helper-text_xkh95_125"};class TextField extends React.Component{constructor(){super(...arguments);E(this,"containerRef",React.createRef());E(this,"getInput",()=>{var n;return(n=this.containerRef.current)==null?void 0:n.querySelector("input")})}render(){var a;const n=this.props.style??{};return jsxRuntimeExports.jsxs("label",{id:this.props.id,ref:this.containerRef,className:`${this.props.simpleStyle?styles$h["simple-text-field"]:styles$h["text-field-container"]} row ${this.props.className??(this.props.simpleStyle?"":"body-3")} ${(a=this.props.helperText)!=null&&a.length?styles$h["helper-text"]:""}`,"helper-text":this.props.helperText,style:{"--helper-text-color":this.props.helperTextColor??"#e14337",...n},children:[this.props.prefix,this.props.register?jsxRuntimeExports.jsx("input",{name:this.props.name,...this.props.register,autoComplete:this.props.autoComplete,autoFocus:this.props.autoFocus,maxLength:this.props.maxLength,type:this.props.type??"text",placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown??(this.props.onComplete?l=>{if(this.props.onComplete)switch(l.key.toLowerCase()){case"enter":this.props.onComplete(l);break}}:void 0)}):jsxRuntimeExports.jsx("input",{autoComplete:this.props.autoComplete,autoFocus:this.props.autoFocus,maxLength:this.props.maxLength,name:this.props.name,type:this.props.type??"text",defaultValue:this.props.defaultValue,value:this.props.value,placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.props.onKeyDown??(this.props.onComplete?l=>{if(this.props.onComplete)switch(l.key.toLowerCase()){case"enter":this.props.onComplete(l);break}}:void 0)}),this.props.suffix]})}}const selected="_selected_1hxld_101",today$2="_today_1hxld_281",invalid="_invalid_1hxld_299",styles$g={"calendar-container":"_calendar-container_1hxld_1","calendar-sidebar-options":"_calendar-sidebar-options_1hxld_17","calendar-sidebar-option-buttton":"_calendar-sidebar-option-buttton_1hxld_27","picker-time-container":"_picker-time-container_1hxld_37","scroll-picker-minutes":"_scroll-picker-minutes_1hxld_81",selected,"picker-date-header":"_picker-date-header_1hxld_111","picker-date-body":"_picker-date-body_1hxld_181","date-picker-circle":"_date-picker-circle_1hxld_221","month-picker-circle":"_month-picker-circle_1hxld_237","year-picker-circle":"_year-picker-circle_1hxld_239","in-range":"_in-range_1hxld_257","end-range":"_end-range_1hxld_265","start-range":"_start-range_1hxld_265",today:today$2,invalid},today$1=new Date,startDate$1=new Date(today$1.getFullYear()-100,today$1.getMonth(),today$1.getDate()),endDate$1=new Date(today$1.getFullYear()+100,today$1.getMonth(),today$1.getDate()),inRangeTime$1=(s,o,n)=>differenceInCalendarDays(s,o)>-1&&differenceInCalendarDays(n,s)>-1,stateValue=(s,o,n,a)=>{let l;n?a?(n instanceof Date?l={sTime:n,eTime:n}:l=n,l.sTime.getTime()<s.getTime()&&(l.sTime=s),l.eTime.getTime()>o.getTime()&&(l.eTime=o)):(n instanceof Date?l=n:l=n.sTime,l.getTime()<s.getTime()&&(l=s),l.getTime()>o.getTime()&&(l=o)):l=a?{sTime:today$1,eTime:today$1}:today$1;const c=l instanceof Date?l.getMonth():l.sTime.getMonth(),u=l instanceof Date?l.getFullYear():l.sTime.getFullYear();return{value:n?l:void 0,selectMonth:c,selectYear:u,tab:0}};class TCalendar extends React.Component{constructor(n){super(n);E(this,"minDate");E(this,"maxDate");this.minDate=!this.props.min||this.props.min.getTime()<startDate$1.getTime()?startDate$1:this.props.min,this.maxDate=!this.props.max||this.props.max.getTime()>endDate$1.getTime()?endDate$1:this.props.max,this.state=stateValue(this.minDate,this.maxDate,this.props.value,this.props.range),this.showDateInMonth=this.showDateInMonth.bind(this),this.showMonthInYear=this.showMonthInYear.bind(this),this.showYearInRange=this.showYearInRange.bind(this),this.getTitle=this.getTitle.bind(this)}componentDidUpdate(n){n.value!==this.props.value&&this.setState(stateValue(this.minDate,this.maxDate,this.props.value,this.props.range))}showDateInMonth(){let n=new Date(this.state.selectYear,this.state.selectMonth,1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Array.from({length:7}).map((a,l)=>{switch(l){case 0:var c=this.props.t("su");break;case 1:c=this.props.t("mo");break;case 2:c=this.props.t("tu");break;case 3:c=this.props.t("we");break;case 4:c=this.props.t("th");break;case 5:c=this.props.t("fr");break;case 6:c=this.props.t("sa");break;default:c="";break}return jsxRuntimeExports.jsx("div",{className:`${styles$g["date-picker-circle"]} date-picker-circle`,children:jsxRuntimeExports.jsx("span",{className:"label-4 row",children:c})},"dtwk-"+l)}),Array.from({length:42}).map((a,l)=>{var g,p,v;let c=l%7+Math.floor(l/7)*7-n.getDay();const u=new Date(this.state.selectYear,this.state.selectMonth,c+1);let d=`${styles$g["date-picker-circle"]} date-picker-circle`,h="body-3";c+1===today$1.getDate()&&this.state.selectMonth===today$1.getMonth()&&this.state.selectYear===today$1.getFullYear()&&(d+=` ${styles$g.today}`);let f;return inRangeTime$1(u,this.minDate,this.maxDate)?this.state.value instanceof Date?this.state.value.getTime()===u.getTime()&&(d+=` ${styles$g.selected}`):((g=this.state.value)==null?void 0:g.sTime.getDate())===u.getDate()&&Math.abs(differenceInCalendarDays(u,this.state.value.sTime))<1||((p=this.state.value)==null?void 0:p.eTime.getDate())===u.getDate()&&Math.abs(differenceInCalendarDays(u,this.state.value.eTime))<1?d+=` ${styles$g.selected} ${styles$g[`${((v=this.state.value)==null?void 0:v.sTime.getDate())===u.getDate()&&Math.abs(differenceInCalendarDays(u,this.state.value.sTime))<1?"start":"end"}-range`]}`:this.state.value&&inRangeTime$1(u,this.state.value.sTime,this.state.value.eTime)&&(d+=` ${styles$g["in-range"]}`):d+=` ${styles$g.invalid}`,u.getMonth()!==this.state.selectMonth&&(h="placeholder-2"),jsxRuntimeExports.jsx("div",{className:d,style:f,children:jsxRuntimeExports.jsx("button",{type:"button",className:`${h} row`,onClick:()=>{const b=this.state.value;if(this.props.range){const _=!b||u.getTime()<b.sTime.getTime()?{sTime:u,eTime:u}:{sTime:b.sTime,eTime:u};this.setState({...this.state,value:_}),this.props.onSelect&&this.props.onSelect(_)}else this.setState({...this.state,value:u}),this.props.onSelect&&this.props.onSelect(u)},children:u.getDate()})},u.toString())})]})}showMonthInYear(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Array.from({length:12}).map((n,a)=>{switch(a){case 0:var l=this.props.i18n.language==="en"?"Jan":this.props.t("january");break;case 1:l=this.props.i18n.language==="en"?"Feb":this.props.t("february");break;case 2:l=this.props.i18n.language==="en"?"Mar":this.props.t("march");break;case 3:l=this.props.i18n.language==="en"?"Apr":this.props.t("april");break;case 4:l=this.props.i18n.language==="en"?"May":this.props.t("may");break;case 5:l=this.props.i18n.language==="en"?"Jun":this.props.t("june");break;case 6:l=this.props.i18n.language==="en"?"Jul":this.props.t("july");break;case 7:l=this.props.i18n.language==="en"?"Aug":this.props.t("august");break;case 8:l=this.props.i18n.language==="en"?"Sep":this.props.t("september");break;case 9:l=this.props.i18n.language==="en"?"Oct":this.props.t("october");break;case 10:l=this.props.i18n.language==="en"?"Nov":this.props.t("november");break;case 11:l=this.props.i18n.language==="en"?"Dec":this.props.t("december");break;default:l="";break}const c=new Date(this.state.selectYear,a);let u=`${styles$g["month-picker-circle"]} month-picker-circle`;return this.state.selectYear===today$1.getFullYear()&&today$1.getMonth()===a&&(u+=` ${styles$g.today}`),inRangeTime$1(c,this.minDate,this.maxDate)?this.state.value instanceof Date?this.state.selectYear===this.state.value.getFullYear()&&a===this.state.value.getMonth()&&(u+=` ${styles$g.selected}`):this.state.value&&(a===this.state.value.sTime.getMonth()&&this.state.value.sTime.getFullYear()===this.state.selectYear||a===this.state.value.eTime.getMonth()&&this.state.value.eTime.getFullYear()===this.state.selectYear)?u+=` ${styles$g.selected} ${styles$g[`${a===this.state.value.sTime.getMonth()&&this.state.value.sTime.getFullYear()===this.state.selectYear?"start":"end"}-range`]}`:this.state.value&&inRangeTime$1(c,this.state.value.sTime,this.state.value.eTime)&&(u+=` ${styles$g["in-range"]}`):u+=` ${styles$g.invalid}`,jsxRuntimeExports.jsx("div",{className:u,children:jsxRuntimeExports.jsx("button",{type:"button",className:"body-3 row",onClick:()=>{this.setState({...this.state,selectMonth:a,tab:0})},children:l})},c.toString())})})}showYearInRange(){return Array.from({length:12}).map((n,a)=>{var d,h,f;let l=this.state.selectYear-(this.state.selectYear-startDate$1.getFullYear())%12,c=a+l,u=`${styles$g["year-picker-circle"]} year-picker-circle`;return c===today$1.getFullYear()&&(u+=` ${styles$g.today}`),c<this.minDate.getFullYear()||c>this.maxDate.getFullYear()?u+=` ${styles$g.invalid}`:this.state.value instanceof Date?c===this.state.value.getFullYear()&&(u+=` ${styles$g.selected}`):c===((d=this.state.value)==null?void 0:d.sTime.getFullYear())||c===((h=this.state.value)==null?void 0:h.eTime.getFullYear())?u+=` ${styles$g.selected} ${styles$g[`${c===((f=this.state.value)==null?void 0:f.sTime.getFullYear())?"start":"end"}-range`]}`:this.state.value&&c>this.state.value.sTime.getFullYear()&&c<this.state.value.eTime.getFullYear()&&(u+=` ${styles$g["in-range"]}`),jsxRuntimeExports.jsx("div",{className:u,children:jsxRuntimeExports.jsx("button",{type:"button",className:"body-3 row",onClick:()=>{this.setState({...this.state,tab:1,selectYear:c})},children:c})},c.toString())})}getTitle(){switch(this.state.tab){case 2:let a=this.state.selectYear-(this.state.selectYear-startDate$1.getFullYear())%12;return`${a}-${a+11}`;case 1:return this.state.selectYear;default:switch(this.state.selectMonth){case 0:var n=this.props.t("january");break;case 1:n=this.props.t("february");break;case 2:n=this.props.t("march");break;case 3:n=this.props.t("april");break;case 4:n=this.props.t("may");break;case 5:n=this.props.t("june");break;case 6:n=this.props.t("july");break;case 7:n=this.props.t("august");break;case 8:n=this.props.t("september");break;case 9:n=this.props.t("october");break;case 10:n=this.props.t("november");break;case 11:n=this.props.t("december");break;default:n="";break}return`${n}${this.props.i18n.language==="en"?" ":"/"}${this.state.selectYear}`}}render(){return jsxRuntimeExports.jsxs("div",{className:`${styles$g["calendar-container"]} col ${this.props.className??""}`,style:this.props.style,children:[this.props.header,jsxRuntimeExports.jsxs("div",{className:`${styles$g["picker-date-header"]} row`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{switch(this.state.tab){case 2:this.state.selectYear-10<startDate$1.getFullYear()?this.setState({...this.state,selectYear:startDate$1.getFullYear()}):this.setState({...this.state,selectYear:this.state.selectYear-10});break;case 1:new Date(this.state.selectYear,this.state.selectMonth-1).getTime()>=startDate$1.getTime()&&this.setState({...this.state,selectYear:this.state.selectYear-1});break;default:const a=new Date(this.state.selectYear,this.state.selectMonth-1);a.getTime()>=startDate$1.getTime()&&this.setState({...this.state,selectMonth:a.getMonth(),selectYear:a.getFullYear()});break}},children:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/left-arrow",size:"1.4rem"})}),jsxRuntimeExports.jsx("span",{className:"heading-7",onClick:()=>{this.state.tab!==2&&this.setState({...this.state,tab:this.state.tab===0?1:2})},children:this.getTitle()}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{switch(this.state.tab){case 2:this.state.selectYear+10>endDate$1.getFullYear()?this.setState({...this.state,selectYear:endDate$1.getFullYear()}):this.setState({...this.state,selectYear:this.state.selectYear+10});break;case 1:new Date(this.state.selectYear,this.state.selectMonth+1).getTime()<=endDate$1.getTime()&&this.setState({...this.state,selectYear:this.state.selectYear+1});break;default:const a=new Date(this.state.selectYear,this.state.selectMonth+1);a.getTime()<=endDate$1.getTime()&&this.setState({...this.state,selectMonth:a.getMonth(),selectYear:a.getFullYear()});break}},children:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/right-arrow",size:"1.4rem"})})]}),jsxRuntimeExports.jsx("div",{className:`${styles$g["picker-date-body"]} row`,children:this.state.tab===2?this.showYearInRange():this.state.tab===1?this.showMonthInYear():this.showDateInMonth()}),this.props.footer]})}}const Calendar$1=withTranslation()(TCalendar),styles$f={"button-container":"_button-container_i431i_1","button-label":"_button-label_i431i_129"};function Button(s){const o=React.useRef(null);return React.useEffect(()=>{if(o.current)switch(s.type){case"submit":let n=function(a){switch(a.key.toLowerCase()){case"enter":o.current.click();break}};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}},[s.type,o.current]),s.linkTo?jsxRuntimeExports.jsxs("a",{id:s.id,href:s.disabled?void 0:s.linkTo,target:s.target,className:`${styles$f["button-container"]} row ${s.className??"button-text-3"}`,style:s.style,onClick:s.onClick,onFocus:s.onFocus,onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onMouseMove:s.onMouseMove,children:[s.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$f["button-label"],children:s.label}),s.suffix]}):jsxRuntimeExports.jsxs("button",{ref:o,id:s.id,type:s.type??"button",disabled:s.disabled,className:`${styles$f["button-container"]} row ${s.className??"button-text-3"}`,style:s.style,onClick:s.onClick,onFocus:s.onFocus,onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onMouseMove:s.onMouseMove,children:[s.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$f["button-label"],children:s.label}),s.suffix]})}function SimpleButton(s){return jsxRuntimeExports.jsxs("button",{id:s.id,type:"button",disabled:s.disabled,className:`row ${s.className??""}`,style:s.style,onClick:s.onClick,onFocus:s.onFocus,onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,onMouseMove:s.onMouseMove,children:[s.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$f["button-label"],children:s.label}),s.suffix]})}const today=new Date,startDate=new Date(today.getFullYear()-100,today.getMonth(),today.getDate()),endDate=new Date(today.getFullYear()+100,today.getMonth(),today.getDate()),dateToString=(s,o="dd/mm/yyyy")=>{let n=o.split(" "),a=n[0],l=n[1];a.includes("hh")&&(a=n[1],l=n[0]);let c=a.split(o.includes("/")?"/":"-").map(u=>{switch(u.toLowerCase()){case"dd":return s.getDate()<10?`0${s.getDate()}`:`${s.getDate()}`;case"mm":return s.getMonth()+1<10?`0${s.getMonth()+1}`:`${s.getMonth()+1}`;case"yyyy":return`${s.getFullYear()}`;default:return""}}).join(o.includes("/")?"/":"-");if(l){let u=l.split(":").map(d=>{switch(d){case"hh":return s.getHours()<10?`0${s.getHours()}`:`${s.getHours()}`;case"mm":return s.getMinutes()<10?`0${s.getMinutes()}`:`${s.getMinutes()}`;case"ss":return s.getSeconds()<10?`0${s.getSeconds()}`:`${s.getSeconds()}`;default:return""}}).join(":");return c+" "+u}return c},stringToDate=(s,o="dd/mm/yyyy",n="/")=>{let a=o,l="",c=s,u="",d=!1;o.trim().indexOf(" ")>-1&&(a=o.trim().split(" ")[0],l=o.trim().split(" ")[1],c=s.trim().split(" ")[0],u=s.trim().split(" ")[1]??"00:00:00",d=!0);let f=a.toLowerCase().split(n),g=c.split(n),p=f.indexOf("mm"),v=f.indexOf("dd"),b=f.indexOf("yyyy"),_=0,w=0,x=0;if(d){let T=l.split(":"),R=T.indexOf("HH");R<0&&(R=T.indexOf("hh"));let A=T.indexOf("mm"),M=T.indexOf("ss"),D=u.split(":");_=parseInt(D[R]??"0"),w=parseInt(D[A]??"0"),x=parseInt(D[M]??"0")}let S=parseInt(g[p]);S-=1;var C=new Date(parseInt(g[b]),S,parseInt(g[v]??"0"),_,w,x);return C},inRangeTime=(s,o,n)=>differenceInCalendarDays(s,o)>-1&&differenceInCalendarDays(n,s)>-1;function DateTimePicker({style:s={},...o}){const n=React.useRef(null),a=React.useRef(null),[l,c]=React.useState(),u=React.useMemo(()=>{var f,g,p;return l?l instanceof Date?jsxRuntimeExports.jsx(Text$2,{className:styles$i.value,children:dateToString(l,`dd/mm/yyyy${(f=o.pickerType)!=null&&f.includes("time")?" hh:mm":""}`)}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Text$2,{className:styles$i.value,style:{flex:"none",width:"fit-content"},children:[dateToString(l.start??new Date,`dd/mm/yyyy${(g=o.pickerType)!=null&&g.includes("time")||o.pickerType==="auto"?" hh:mm":""}`)," - ",dateToString(l.end??new Date,`dd/mm/yyyy${(p=o.pickerType)!=null&&p.includes("time")||o.pickerType==="auto"?" hh:mm":""}`)]}),l.repeatData&&jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/loop-2",size:"1.2rem"})]}):jsxRuntimeExports.jsx(Text$2,{className:styles$i.value,style:{color:"var(--neutral-text-subtitle-color)"},children:o.placeholder??""})},[l]);React.useEffect(()=>{a.current&&(l&&l instanceof Date?a.current.value=dateToString(l,"dd/mm/yyyy"):a.current.value="")},[l,a.current]),React.useEffect(()=>{switch(o.pickerType){case"date":case"datetime":c(o.value);break;default:c(!o.value||!o.endValue?void 0:{start:o.value,end:o.endValue,repeatData:o.pickerType==="auto"||!o.pickerType?o.repeatValue:void 0});break}},[o.value,o.endValue,o.repeatValue,o.pickerType]);const d=f=>{showPopup({ref:n,hideOverlay:!0,content:jsxRuntimeExports.jsx(PopupDateTimePicker,{ref:n,max:o.max,min:o.min,value:l instanceof Date?l:l==null?void 0:l.start,endValue:l instanceof Date||l==null?void 0:l.end,pickerType:o.pickerType,enableRepeat:o.enableRepeat||!!(!(l instanceof Date)&&(l!=null&&l.repeatData)),repeatValue:l instanceof Date||l==null?void 0:l.repeatData,style:{top:f.bottom+2,left:f.left+16},onApply:g=>{c(g),closePopup(n),o.onChange&&o.onChange(g),a.current&&a.current.focus()}})})},h=()=>{var f,g;switch(o.pickerType){case"date":return jsxRuntimeExports.jsxs("label",{id:o.id,className:`row ${o.simpleStyle?styles$i["simple-date-time-picker"]:styles$i["date-time-picker"]} ${o.className??(o.simpleStyle?"":"body-3")} ${(f=o.helperText)!=null&&f.length?styles$i["helper-text"]:""}`,"helper-text":o.helperText,style:{"--helper-text-color":o.helperTextColor??"#e14337",...s},onClick:p=>{const v=p.target.closest("div").getBoundingClientRect();d(v)},children:[o.prefix??jsxRuntimeExports.jsx(Winicon,{className:styles$i["prefix-icon"],src:"outline/user interface/calendar-date-2",size:"1.2rem"}),jsxRuntimeExports.jsx("input",{className:styles$i.value,ref:a,autoComplete:"off",disabled:o.disabled,placeholder:o.placeholder,readOnly:o.pickOnly,onKeyDown:p=>{switch(p.key.toLowerCase()){case"enter":p.target.blur();break}},onBlur:o.pickOnly?void 0:p=>{const v=p.target.value.trim();let b;v.match(/[0-9]{1,2}(\/|-)[0-9]{1,2}(\/|-)[0-9]{4}/g)&&(b=stringToDate(v,"dd/MM/yyyy","/"),inRangeTime(b,o.min??startDate,o.min??endDate)||(differenceInCalendarDays(o.min??startDate,b)>-1?b=o.min??startDate:differenceInCalendarDays(b,o.min??endDate)>-1?b=o.max??endDate:b=void 0)),c(b),o.onChange&&o.onChange(b)}}),o.suffix]});default:return jsxRuntimeExports.jsxs("button",{id:o.id,type:"button",disabled:o.disabled,className:`row ${o.simpleStyle?styles$i["simple-date-time-picker"]:styles$i["date-time-picker"]} ${o.className??(o.simpleStyle?"":"body-3")} ${(g=o.helperText)!=null&&g.length?styles$i["helper-text"]:""}`,"helper-text":o.helperText,style:{"--helper-text-color":o.helperTextColor??"#e14337",...s},onFocus:p=>{const v=p.target.closest("button").getBoundingClientRect();d(v)},children:[o.prefix??jsxRuntimeExports.jsx(Winicon,{className:styles$i["prefix-icon"],src:"outline/user interface/calendar-date-2",size:"1.2rem"}),u,o.suffix]})}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:n}),h()]})}const PopupDateTimePicker=React.forwardRef(function({value:o,style:n,endValue:a,repeatValue:l,onApply:c,pickerType:u="auto",enableRepeat:d=!1,min:h,max:f},g){const p=useForm({shouldFocusError:!1}),[v,b]=React.useState(!1),[_,w]=React.useState(!1),x=new Date,[S,C]=React.useState({type:1,value:["everyday"]}),T=React.useRef(null),R=React.useRef(null),A=React.useRef(null),{t:M}=useTranslation(),D=/[0-9]{1,2}(\/|-)[0-9]{1,2}(\/|-)[0-9]{4}/g,O=/^(?:[01]\d|2[0-3]):[0-5]\d(?:[:][0-5]\d)?$/g;React.useEffect(()=>{l&&d?(w(!0),C(l)):w(!1)},[l]),React.useEffect(()=>{v&&u!=="auto"&&!u.includes("time")?(b(!1),p.setValue("time-start",null),p.setValue("time-end",null)):!v&&u.includes("time")&&b(!0)},[u]);const H=()=>{if(o){const q=new Date(o);p.setValue("date-start",q),R.current.getInput().value=dateToString(q),(u.includes("time")||q.getSeconds()===1)&&(b(!0),p.setValue("time-start",`${q.getHours()<9?`0${q.getHours()}`:q.getHours()}:${q.getMinutes()<9?`0${q.getMinutes()}`:q.getMinutes()}`))}else R.current.getInput().value=""},j=()=>{if((u!=null&&u.includes("range")||u==="auto")&&A.current)if(a){const q=new Date(a);p.setValue("date-end",q),A.current.getInput().value=dateToString(q),(u.includes("time")||q.getSeconds()===59)&&p.setValue("time-end",`${q.getHours()<9?`0${q.getHours()}`:q.getHours()}:${q.getMinutes()<9?`0${q.getMinutes()}`:q.getMinutes()}`)}else A.current.getInput().value=""};return React.useEffect(()=>{o&&R.current&&H()},[o,R]),React.useEffect(()=>{j()},[a,A,u]),jsxRuntimeExports.jsxs("div",{className:"col",style:{width:"31.2rem",...n},children:[jsxRuntimeExports.jsx(Popup,{ref:T}),jsxRuntimeExports.jsx(Calendar$1,{min:h,max:f,range:u.includes("range")||u==="auto",value:u==="date"||u==="datetime"?p.watch("date-start"):p.watch("date-start")&&p.watch("date-end")?{sTime:p.watch("date-start"),eTime:p.watch("date-end")}:void 0,header:u!=="date"&&jsxRuntimeExports.jsxs("div",{className:"row",style:{flexWrap:"wrap",gap:"0.8rem 1.2rem",padding:"1.6rem",borderBottom:"var(--neutral-main-border)"},children:[jsxRuntimeExports.jsx(TextField,{ref:R,autoComplete:"off",className:"col12 body-3",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},placeholder:u.includes("range")||u==="auto"?M("start-date"):"dd/mm/yyyy",onComplete:q=>q.target.blur(),onBlur:q=>{const Y=q.target.value;if(D.test(Y)){const ee=stringToDate(Y,"dd/mm/yyyy","/");(u.includes("range")||u==="auto")&&differenceInCalendarDays(p.getValues("date-end"),ee)<0&&(p.setValue("date-end",ee),A.current.getInput().value=dateToString(ee)),p.setValue("date-start",ee)}else q.target.value=p.getValues("date-start")?dateToString(p.getValues("date-start")):""}}),(u.includes("range")||u==="auto")&&jsxRuntimeExports.jsx(TextField,{ref:A,autoComplete:"off",className:"col12 body-3",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},placeholder:M("end-date"),onComplete:q=>q.target.blur(),onBlur:q=>{const Y=q.target.value;if(D.test(Y)){const ee=stringToDate(Y,"dd/mm/yyyy","/");differenceInCalendarDays(ee,p.getValues("date-start"))<0&&(p.setValue("date-start",ee),R.current.getInput().value=dateToString(ee)),p.setValue("date-end",ee)}else q.target.value=p.getValues("date-end")?dateToString(p.getValues("date-end")):""}}),v&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TextField,{autoComplete:"off",name:"time-start",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},onComplete:q=>{q.target.blur()},register:p.register("time-start",{onChange:q=>q.target.value=q.target.value.trim(),onBlur:q=>{O.test(q.target.value)?p.setValue("time-start",q.target.value):q.target.value=""}}),className:"col12 body-3",placeholder:"hh:mm",onFocus:q=>{const Y=q.target.closest("div").getBoundingClientRect();showPopup({ref:T,hideOverlay:!0,content:jsxRuntimeExports.jsx("div",{className:`col ${styles$i["popup-actions"]} dropdown-popup`,style:{maxHeight:"24rem",top:Y.bottom+2,right:document.body.offsetWidth-Y.right,width:Y.width,overflow:"hidden auto",border:"var(--neutral-main-border)"},children:Array.from({length:48}).map((ee,te)=>{if(te%2===0)var re=`${te/2<9?`0${te/2}`:te/2}:00`;else re=`${(te-1)/2<9?`0${(te-1)/2}`:(te-1)/2}:30`;return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{p.setValue("time-start",re),closePopup(T)},children:jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:re})},"time-"+te)})})})}}),(u.includes("range")||u==="auto")&&jsxRuntimeExports.jsx(TextField,{autoComplete:"off",name:"time-end",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},onComplete:q=>{q.target.blur()},register:p.register("time-end",{onChange:q=>q.target.value=q.target.value.trim(),onBlur:q=>{O.test(q.target.value)?p.setValue("time-end",q.target.value):q.target.value=""}}),className:"col12 body-3",placeholder:"hh:mm",onFocus:q=>{const Y=q.target.closest("div").getBoundingClientRect();showPopup({ref:T,hideOverlay:!0,content:jsxRuntimeExports.jsx("div",{className:`col ${styles$i["popup-actions"]}`,style:{maxHeight:"24rem",top:Y.bottom+2,right:document.body.offsetWidth-Y.right,width:Y.width,overflow:"hidden auto",border:"var(--neutral-main-border)"},children:Array.from({length:48}).map((ee,te)=>{if(te%2===0)var re=`${te/2<9?`0${te/2}`:te/2}:00`;else re=`${(te-1)/2<9?`0${(te-1)/2}`:(te-1)/2}:30`;return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{p.setValue("time-end",re),closePopup(T)},children:jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:re})},"time-"+te)})})})}})]})]}),footer:u!=="date"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_&&jsxRuntimeExports.jsxs("div",{className:"col",style:{borderTop:"var(--neutral-main-border)"},children:[jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:4,padding:"1.2rem 1.6rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{flex:1},children:"Lặp lại"}),jsxRuntimeExports.jsx(Button,{style:{padding:0},label:(()=>{switch(S.type){case 1:return M("daily");case 2:return M("weekly");case 3:return M("monthly");default:return""}})(),suffix:jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/down-arrow",size:"1.4rem",style:{padding:"0.2rem"}}),onClick:q=>{const Y=q.target.closest("button").getBoundingClientRect();showPopup({ref:T,hideOverlay:!0,style:{position:"absolute",top:Y.bottom+2,left:Y.x+8},body:jsxRuntimeExports.jsx("div",{className:"col popup-actions",children:Array.from({length:3}).map((ee,te)=>{let re="";switch(te){case 0:re=M("daily");break;case 1:re=M("weekly");break;case 2:re=M("monthly");break}return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{let ae=["everyday"];switch(te){case 0:ae=["everyday"];break;case 1:ae=x.getDay();break;case 2:ae=x.getDate();break}C({type:te+1,value:[ae]}),closePopup(T)},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:re})},"tStatus-"+te)})})})}})]}),(()=>{switch(S.type){case 2:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{padding:"0 1.6rem"},children:M("on")+" "+M("date").toLowerCase()}),jsxRuntimeExports.jsx("div",{className:"row",style:{justifyContent:"space-between",padding:"0.4rem 1.6rem"},children:Array.from({length:7}).map((q,Y)=>{switch(Y){case 0:var ee=M("su");break;case 1:ee=M("mo");break;case 2:ee=M("tu");break;case 3:ee=M("we");break;case 4:ee=M("th");break;case 5:ee=M("fr");break;case 6:ee=M("sa");break;default:ee="";break}return jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:4,alignItems:"center"},children:[jsxRuntimeExports.jsx(Checkbox,{size:"1.8rem",value:S.value.includes(Y),disabled:S.value.includes(Y)&&S.value.length===1,onChange:te=>{C(te?{type:2,value:[...S.value,Y]}:{type:2,value:S.value.filter(re=>re!==Y)})}}),jsxRuntimeExports.jsx(Text$2,{className:"placeholder-2",children:ee})]},"weekday-"+Y)})})]});case 3:return jsxRuntimeExports.jsxs("div",{className:"row",style:{justifyContent:"space-between",padding:"0.4rem 1.6rem",gap:"1.2rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{flex:1},children:M("on")+" "+M("date").toLowerCase()}),jsxRuntimeExports.jsx(Button,{style:{padding:0},label:S.value[0]==="last"?M("Last"):`${S.value[0]}`,suffix:jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/down-arrow",size:"1.4rem",style:{padding:"0.2rem"}}),onClick:q=>{const Y=q.target.closest("button").getBoundingClientRect();showPopup({ref:T,hideOverlay:!0,style:{top:Y.bottom+2,right:document.body.offsetWidth-Y.right,maxHeight:"30.4rem"},body:jsxRuntimeExports.jsx("div",{className:"col popup-actions",style:{flex:1,overflow:"hidden auto"},children:Array.from({length:29}).map((ee,te)=>{switch(te){case 28:var re=M("Last");break;default:re=`${te+1}`;break}return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{C({type:3,value:[te===28?"last":te+1]}),closePopup(T)},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:re})},"date-"+te)})})})}})]});default:return null}})()]}),c&&jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",padding:"1.2rem 1.6rem",borderTop:"var(--neutral-main-border)"},children:[u==="auto"&&jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:4},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/time-alarm",size:"1.6rem",style:{padding:"0.7rem",borderRadius:"50%",backgroundColor:v?"var(--neutral-disable-background-color)":void 0},onClick:()=>{b(!v)}}),(d||u==="auto")&&jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/loop-2",size:"1.6rem",style:{padding:"0.7rem",borderRadius:"50%",backgroundColor:_?"var(--neutral-disable-background-color)":void 0},onClick:()=>{w(!_)}})]}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(Button,{label:M("reset"),onClick:()=>{p.setValue("date-start",null),p.setValue("date-end",null),p.setValue("time-start",null),p.setValue("time-end",null),H(),j()}}),jsxRuntimeExports.jsx(Button,{label:M("apply"),disabled:!p.watch("date-start")||!p.watch("date-end")&&(u.includes("range")||u==="auto"),className:"button-text-3 button-primary",onClick:()=>{var te,re;let q=p.getValues("date-start"),Y=v&&(te=p.getValues("time-start"))!=null&&te.length?p.getValues("time-start"):"00:00";if(q.setHours(parseInt(Y.split(":")[0]),parseInt(Y.split(":")[1]),v?1:0,0),u.includes("range")||u==="auto"){var ee=p.getValues("date-end");let ae=v&&(re=p.getValues("time-end"))!=null&&re.length?p.getValues("time-end"):"23:59";ee.setHours(parseInt(ae.split(":")[0]),parseInt(ae.split(":")[1]),v?59:0,0)}c(!u.includes("range")&&u!=="auto"?q:{start:q,end:ee,repeatData:_?S:void 0}),closePopup(g)}})]})]}),onSelect:q=>{u!=="date"?q instanceof Date?(p.setValue("date-start",q),R.current&&(R.current.getInput().value=dateToString(q))):(p.setValue("date-start",q.sTime),R.current&&(R.current.getInput().value=dateToString(q.sTime)),(u.includes("range")||u==="auto")&&(p.setValue("date-end",q.eTime),A.current&&(A.current.getInput().value=dateToString(q.eTime)))):c&&(c(q),closePopup(g))}})]})}),disabled$1="_disabled_ihcj6_39",styles$e={"select-multi-container":"_select-multi-container_ihcj6_1","select-multi-simple-style":"_select-multi-simple-style_ihcj6_1",disabled:disabled$1,"helper-text":"_helper-text_ihcj6_49","selected-item-value":"_selected-item-value_ihcj6_91","select-multi-popup":"_select-multi-popup_ihcj6_181","select-body":"_select-body_ihcj6_203","select-tile":"_select-tile_ihcj6_235","no-results-found":"_no-results-found_ihcj6_287"},SelectMultiple=({style:s={},...o})=>{var w;const n=React.useRef(null),a=React.useRef(null),{t:l}=useTranslation(),[c,u]=React.useState([]),[d,h]=React.useState(void 0),[f,g]=React.useState([]),[p,v]=React.useState(!1),b=(x,S)=>{var T,R;let C=[];x?C=[...f,...S.map(A=>A.id)]:C=f.filter(A=>S.every(M=>A!==M.id)),g(C),(T=o.onChange)==null||T.call(o,C),(R=a.current)==null||R.focus()},_=(x,S)=>{var T;x.stopPropagation();let C=f.filter(R=>R!==S);g(C),(T=o.onChange)==null||T.call(o,C)};return React.useEffect(()=>{g(o.value??[])},[o.value]),React.useEffect(()=>{u(o.options??[])},[o.options]),jsxRuntimeExports.jsxs("label",{id:o.id,ref:n,className:`${o.simpleStyle?styles$e["select-multi-simple-style"]:styles$e["select-multi-container"]} row ${o.disabled?styles$e.disabled:""} ${(w=o.helperText)!=null&&w.length?styles$e["helper-text"]:""} ${o.className??(o.simpleStyle?"":"body-3")}`,"helper-text":o.helperText,style:{"--helper-text-color":o.helperTextColor??"#e14337",...s},children:[o.prefix,jsxRuntimeExports.jsxs("label",{className:"row",style:{flexWrap:"wrap",flex:1,width:"100%",gap:"0.6rem 0.4rem"},children:[f.map(x=>{const S=c.find(C=>C.id===x);return jsxRuntimeExports.jsxs("div",{className:`row ${styles$e["selected-item-value"]}`,onClick:S!=null&&S.disabled?void 0:C=>_(C,x),children:[jsxRuntimeExports.jsx(Text$2,{style:{color:"var(--neutral-text-title-color)",fontSize:"1.2rem",lineHeight:"1.4rem"},children:S==null?void 0:S.name}),jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",size:"1.2rem",style:{padding:"0.1rem"}})]},x)}),jsxRuntimeExports.jsx("input",{ref:a,onFocus:()=>{v(!0)},placeholder:f.length?void 0:o.placeholder,onChange:async x=>{if(x.target.value.trim().length)if(o!=null&&o.handleSearch){const S=await o.handleSearch(x.target.value.trim());h(S)}else h(c.filter((S,C,T)=>typeof S.name=="string"&&(S.name.toLowerCase().includes(x.target.value.trim().toLowerCase())||T.filter(R=>R.parentId===S.id).some(R=>typeof R.name=="string"&&R.name.toLowerCase().includes(x.target.value.trim().toLowerCase())))));else h(void 0)}})]}),o.suffix||(o.showClearValueButton&&f.length?jsxRuntimeExports.jsx("button",{type:"button",className:"row",style:{padding:"0.4rem"},onClick:x=>{var S;x.stopPropagation(),f.length&&(g([]),(S=o.onChange)==null||S.call(o,[]))},children:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/c-remove",size:"1.6rem"})}):jsxRuntimeExports.jsx("div",{ref:x=>{x!=null&&x.parentElement&&x.parentElement.getBoundingClientRect().width<100&&(x.style.display="none")},className:"row",children:jsxRuntimeExports.jsx(Winicon,{src:p?"fill/arrows/up-arrow":"fill/arrows/down-arrow",size:"1.2rem"})})),p&&jsxRuntimeExports.jsx(PopupOverlay,{onOpen:x=>{setTimeout(()=>{const S=x.firstChild,C=S.getBoundingClientRect(),T=n.current.getBoundingClientRect();C.right>document.body.offsetWidth&&(S.style.left="",S.style.right=`${document.body.offsetWidth-T.right}px`),C.bottom-8>document.body.offsetHeight&&(S.style.top="",S.style.bottom=`${document.body.offsetHeight-T.y+2}px`)},300)},className:"hidden-overlay",onClose:()=>{v(!1)},children:jsxRuntimeExports.jsxs("div",{className:`${styles$e["select-multi-popup"]} select-multi-popup dropdown-popup col ${o.popupClassName??""}`,style:{top:n.current.getBoundingClientRect().bottom+2,left:n.current.getBoundingClientRect().x,width:n.current.offsetWidth},children:[jsxRuntimeExports.jsx("div",{style:{padding:"0 0.8rem 0.4rem",width:"100%",borderBottom:"var(--neutral-main-border)"},children:(()=>{const x=d??c??[],S=x.every(C=>f.some(T=>T===C.id));return jsxRuntimeExports.jsx(Text$2,{onClick:()=>{var T;let C=[];x.length&&(S?C=f.filter(R=>x.every(A=>R!==A.id||A.disabled)):C=[...f,...x.filter(R=>f.every(A=>A!==R.id)&&!R.disabled).map(R=>R.id)]),g(C),(T=o.onChange)==null||T.call(o,C)},className:"button-text-3",style:{color:x.length?void 0:"var(--neutral-text-subtitle-color, #61616B)",width:"fit-content",padding:"0.4rem 0.8rem"},children:x.length&&S?`${l("remove")} ${l("all").toLowerCase()}`:`${l("select")} ${l("all").toLowerCase()}`})})()}),jsxRuntimeExports.jsxs("div",{className:`col ${styles$e["select-body"]}`,onScroll:o.handleLoadmore?x=>{if(o.handleLoadmore){let S=x.target;o.handleLoadmore(Math.round(S.offsetHeight+S.scrollTop)>=S.scrollHeight-1,x)}}:void 0,children:[(d??c).filter(x=>!x.parentId).map(x=>jsxRuntimeExports.jsx(RenderOptions,{item:x,onCheck:b,value:f,listOptions:d??c},x.id)),((d==null?void 0:d.length)===0||!c.length)&&jsxRuntimeExports.jsx("div",{className:styles$e["no-results-found"],children:l("noResultFound")})]})]})})]})},RenderOptions=({item:s,listOptions:o=[],value:n=[],onCheck:a})=>{const[l,c]=React.useState(!1),u=React.useMemo(()=>s.parentId?[]:o.filter(d=>d.parentId===s.id),[o,s]);return React.useEffect(()=>{!l&&u.some(d=>n.includes(d.id))&&c(!0)},[n,u.length]),jsxRuntimeExports.jsxs("div",{className:"col",style:{width:"100%"},children:[jsxRuntimeExports.jsxs("div",{className:`${styles$e["select-tile"]} row ${s.disabled?styles$e.disabled:""}`,style:{paddingLeft:s.parentId?"4.4rem":void 0},onClick:u.length?()=>{c(!l)}:void 0,children:[o.some(d=>d.parentId)&&jsxRuntimeExports.jsx("div",{className:"row",style:{width:"1.4rem",height:"1.4rem"},children:u.length?jsxRuntimeExports.jsx(Winicon,{src:s.isOpen?"fill/arrows/triangle-down":"fill/arrows/triangle-right",size:"1.2rem"}):null}),jsxRuntimeExports.jsxs("label",{className:"row",style:{flex:1,gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Checkbox,{disabled:s.disabled,value:u.length?u.every(d=>n.includes(d.id))?!0:u.some(d=>n.includes(d.id))?void 0:!1:n.includes(s.id),onChange:d=>{a(d,[s,...u])},size:"2rem"}),jsxRuntimeExports.jsx(Text$2,{className:"body-3",style:{flex:1},maxLine:2,children:s.name})]})]}),jsxRuntimeExports.jsx("div",{className:"col",style:{display:s.isOpen?"flex":"none",width:"100%"},children:u.map(d=>jsxRuntimeExports.jsx(RenderOptions,{item:d,onCheck:a,value:n,listOptions:o},d.id))})]})},styles$d={"progress-bar-container":"_progress-bar-container_17113_1","progress-bar-title":"_progress-bar-title_17113_11","progress-bar-tile":"_progress-bar-tile_17113_21","progress-bar-value":"_progress-bar-value_17113_33","status-icon":"_status-icon_17113_83"};function ProgressBar({id:s,status:o=ComponentStatus.INFOR,percent:n=80,titleText:a,title:l,hideTitle:c=!1,progressBarOnly:u=!1,fullColor:d,percentColor:h,style:f,progressBarStyle:g,className:p=""}){const[v,b]=React.useState(!0);return u?jsxRuntimeExports.jsx("div",{id:s,className:`${styles$d["progress-bar-value"]} ${p}`,style:{"--percent-color":h,"--full-color":d,"--percent":`${n}%`,minWidth:"16rem",...f??{}}}):jsxRuntimeExports.jsxs("div",{id:s,className:`col ${styles$d["progress-bar-container"]} ${p}`,style:f?{padding:"1.6rem 2.4rem",...f}:{padding:"1.6rem 2.4rem"},children:[c?null:l??jsxRuntimeExports.jsxs("div",{className:`row ${styles$d["progress-bar-title"]}`,children:[jsxRuntimeExports.jsx("div",{className:"heading-8",children:a}),jsxRuntimeExports.jsx(Winicon,{src:v?"fill/arrows/down-arrow":"fill/arrows/up-arrow",onClick:()=>{b(!v)}})]}),v?jsxRuntimeExports.jsxs("div",{className:`row ${styles$d["progress-bar-tile"]}`,children:[jsxRuntimeExports.jsx("div",{className:styles$d["progress-bar-value"],style:{"--percent-color":h,"--full-color":d,"--percent":`${n}%`,...g??{}}}),o===ComponentStatus.INFOR?null:jsxRuntimeExports.jsx("div",{className:`${styles$d["status-icon"]}`,children:getStatusIcon(o)}),jsxRuntimeExports.jsxs("div",{className:"label-4",children:[n,"/100"]})]}):null]})}var ComponentStatus=(s=>(s[s.INFOR=1]="INFOR",s[s.ERROR=2]="ERROR",s[s.WARNING=3]="WARNING",s[s.SUCCSESS=4]="SUCCSESS",s))(ComponentStatus||{});const getStatusIcon=s=>{switch(s){case 2:return errorSvg;case 3:return warningSvg;case 4:return successSvg;default:return inforSvg}},inforSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.0003 3.41669C15.116 3.41669 12.2965 4.27198 9.89826 5.87442C7.50005 7.47686 5.63087 9.75446 4.52709 12.4192C3.42331 15.084 3.13451 18.0162 3.69721 20.8451C4.25991 23.674 5.64884 26.2725 7.68836 28.312C9.72787 30.3515 12.3264 31.7404 15.1553 32.3031C17.9842 32.8658 20.9164 32.577 23.5811 31.4733C26.2459 30.3695 28.5235 28.5003 30.1259 26.1021C31.7284 23.7039 32.5837 20.8843 32.5837 18C32.5795 14.1336 31.0417 10.4267 28.3077 7.69266C25.5737 4.95867 21.8668 3.42087 18.0003 3.41669V3.41669ZM19.2496 26.1715H16.7401V15.5695H19.2496V26.1715ZM19.0418 12.2384C18.9034 12.3653 18.7407 12.463 18.5637 12.5256C18.3866 12.5883 18.1987 12.6146 18.0113 12.603C17.8204 12.6157 17.6289 12.5899 17.4481 12.5273C17.2673 12.4647 17.101 12.3664 16.9588 12.2384C16.8333 12.1032 16.7363 11.9441 16.6737 11.7706C16.611 11.5971 16.584 11.4127 16.5943 11.2285C16.5815 11.04 16.6073 10.8509 16.67 10.6727C16.7327 10.4945 16.8309 10.3309 16.9588 10.1919C17.1013 10.0644 17.2678 9.96649 17.4484 9.9039C17.6291 9.84131 17.8204 9.81526 18.0113 9.82728C18.1987 9.81637 18.3864 9.843 18.5633 9.90561C18.7403 9.96822 18.903 10.0655 19.0418 10.1919C19.1697 10.3309 19.268 10.4945 19.3307 10.6727C19.3934 10.8509 19.4191 11.04 19.4064 11.2285C19.4166 11.4127 19.3896 11.5971 19.327 11.7706C19.2644 11.9441 19.1674 12.1032 19.0418 12.2384Z",fill:"#366AE2"})})}),errorSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.0003 3.41669C15.116 3.41669 12.2965 4.27198 9.89826 5.87442C7.50005 7.47686 5.63087 9.75446 4.52709 12.4192C3.42331 15.084 3.13451 18.0162 3.69721 20.8451C4.25991 23.674 5.64884 26.2725 7.68836 28.312C9.72787 30.3515 12.3264 31.7404 15.1553 32.3031C17.9842 32.8658 20.9164 32.577 23.5811 31.4733C26.2459 30.3695 28.5235 28.5003 30.1259 26.1021C31.7284 23.7039 32.5837 20.8843 32.5837 18C32.5724 14.1357 31.0324 10.4329 28.2999 7.70044C25.5674 4.96797 21.8646 3.42791 18.0003 3.41669V3.41669ZM24.016 22.2972L22.2976 24.0156L18.0003 19.7184L13.7031 24.0156L11.9847 22.2972L16.2819 18L11.9847 13.7028L13.7031 11.9844L18.0003 16.2816L22.2976 11.9844L24.016 13.7028L19.7187 18L24.016 22.2972Z",fill:"#E14337"})})}),warningSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M32.1516 25.8877L21.3215 5.41379C21.0014 4.81074 20.5231 4.30622 19.938 3.95437C19.3529 3.60252 18.6831 3.41663 18.0003 3.41663C17.3176 3.41663 16.6477 3.60252 16.0626 3.95437C15.4775 4.30622 14.9993 4.81074 14.6792 5.41379L3.84901 25.8877C3.54781 26.459 3.39954 27.0984 3.41863 27.744C3.43771 28.3895 3.6235 29.0191 3.95793 29.5716C4.29235 30.1241 4.76404 30.5806 5.32713 30.8969C5.89022 31.2131 6.52555 31.3783 7.17136 31.3763H28.8293C29.4751 31.3783 30.1104 31.2131 30.6735 30.8969C31.2366 30.5806 31.7083 30.1241 32.0427 29.5716C32.3771 29.0191 32.5629 28.3895 32.582 27.744C32.6011 27.0984 32.4528 26.459 32.1516 25.8877ZM18.0003 27.7294C17.6397 27.7294 17.2871 27.6224 16.9873 27.4221C16.6874 27.2217 16.4537 26.9369 16.3157 26.6037C16.1776 26.2705 16.1415 25.9039 16.2119 25.5502C16.2823 25.1965 16.4559 24.8715 16.7109 24.6165C16.966 24.3615 17.2909 24.1878 17.6446 24.1175C17.9983 24.0471 18.3649 24.0832 18.6981 24.2212C19.0313 24.3593 19.3161 24.593 19.5165 24.8928C19.7168 25.1927 19.8238 25.5453 19.8238 25.9059C19.8238 26.3895 19.6317 26.8533 19.2897 27.1953C18.9477 27.5373 18.4839 27.7294 18.0003 27.7294ZM19.216 21.6512H16.7847L16.1769 11.926H19.8238L19.216 21.6512Z",fill:"#FC6B03"})})}),successSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.0003 3.41669C15.116 3.41669 12.2965 4.27198 9.89826 5.87442C7.50005 7.47686 5.63087 9.75446 4.52709 12.4192C3.42331 15.084 3.13451 18.0162 3.69721 20.8451C4.25991 23.674 5.64884 26.2725 7.68836 28.312C9.72787 30.3515 12.3264 31.7404 15.1553 32.3031C17.9842 32.8658 20.9164 32.577 23.5811 31.4733C26.2459 30.3695 28.5235 28.5003 30.1259 26.1021C31.7284 23.7039 32.5837 20.8843 32.5837 18C32.5724 14.1357 31.0324 10.4329 28.2999 7.70044C25.5674 4.96797 21.8646 3.42791 18.0003 3.41669V3.41669ZM15.5698 24.5795L8.99026 18L10.7087 16.2816L15.5698 21.1427L25.292 11.4205L27.0104 13.1389L15.5698 24.5795Z",fill:"#39AC6D"})})});var reactPaginate$1={exports:{}},reactPaginate=reactPaginate$1.exports,hasRequiredReactPaginate;function requireReactPaginate(){return hasRequiredReactPaginate||(hasRequiredReactPaginate=1,function(s,o){(function(n,a){s.exports=a(React)})(reactPaginate,n=>(()=>{var a={703:(d,h,f)=>{var g=f(414);function p(){}function v(){}v.resetWarningCache=p,d.exports=function(){function b(x,S,C,T,R,A){if(A!==g){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}function _(){return b}b.isRequired=b;var w={array:b,bigint:b,bool:b,func:b,number:b,object:b,string:b,symbol:b,any:b,arrayOf:_,element:b,elementType:b,instanceOf:_,node:b,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:v,resetWarningCache:p};return w.PropTypes=w,w}},697:(d,h,f)=>{d.exports=f(703)()},414:d=>{d.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:d=>{d.exports=n}},l={};function c(d){var h=l[d];if(h!==void 0)return h.exports;var f=l[d]={exports:{}};return a[d](f,f.exports,c),f.exports}c.n=d=>{var h=d&&d.__esModule?()=>d.default:()=>d;return c.d(h,{a:h}),h},c.d=(d,h)=>{for(var f in h)c.o(h,f)&&!c.o(d,f)&&Object.defineProperty(d,f,{enumerable:!0,get:h[f]})},c.o=(d,h)=>Object.prototype.hasOwnProperty.call(d,h),c.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var u={};return(()=>{c.r(u),c.d(u,{default:()=>q});var d=c(98),h=c.n(d),f=c(697),g=c.n(f);function p(){return p=Object.assign?Object.assign.bind():function(Y){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(Y[re]=te[re])}return Y},p.apply(this,arguments)}var v=function(Y){var ee=Y.pageClassName,te=Y.pageLinkClassName,re=Y.page,ae=Y.selected,ue=Y.activeClassName,ce=Y.activeLinkClassName,le=Y.getEventListener,ie=Y.pageSelectedHandler,de=Y.href,ge=Y.extraAriaContext,pe=Y.pageLabelBuilder,be=Y.rel,Se=Y.ariaLabel||"Page "+re+(ge?" "+ge:""),Le=null;return ae&&(Le="page",Se=Y.ariaLabel||"Page "+re+" is your current page",ee=ee!==void 0?ee+" "+ue:ue,te!==void 0?ce!==void 0&&(te=te+" "+ce):te=ce),h().createElement("li",{className:ee},h().createElement("a",p({rel:be,role:de?void 0:"button",className:te,href:de,tabIndex:ae?"-1":"0","aria-label":Se,"aria-current":Le,onKeyPress:ie},le(ie)),pe(re)))};v.propTypes={pageSelectedHandler:g().func.isRequired,selected:g().bool.isRequired,pageClassName:g().string,pageLinkClassName:g().string,activeClassName:g().string,activeLinkClassName:g().string,extraAriaContext:g().string,href:g().string,ariaLabel:g().string,page:g().number.isRequired,getEventListener:g().func.isRequired,pageLabelBuilder:g().func.isRequired,rel:g().string};const b=v;function _(){return _=Object.assign?Object.assign.bind():function(Y){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(Y[re]=te[re])}return Y},_.apply(this,arguments)}var w=function(Y){var ee=Y.breakLabel,te=Y.breakAriaLabel,re=Y.breakClassName,ae=Y.breakLinkClassName,ue=Y.breakHandler,ce=Y.getEventListener,le=re||"break";return h().createElement("li",{className:le},h().createElement("a",_({className:ae,role:"button",tabIndex:"0","aria-label":te,onKeyPress:ue},ce(ue)),ee))};w.propTypes={breakLabel:g().oneOfType([g().string,g().node]),breakAriaLabel:g().string,breakClassName:g().string,breakLinkClassName:g().string,breakHandler:g().func.isRequired,getEventListener:g().func.isRequired};const x=w;function S(Y){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return Y??ee}function C(Y){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},C(Y)}function T(){return T=Object.assign?Object.assign.bind():function(Y){for(var ee=1;ee<arguments.length;ee++){var te=arguments[ee];for(var re in te)Object.prototype.hasOwnProperty.call(te,re)&&(Y[re]=te[re])}return Y},T.apply(this,arguments)}function R(Y,ee){for(var te=0;te<ee.length;te++){var re=ee[te];re.enumerable=re.enumerable||!1,re.configurable=!0,"value"in re&&(re.writable=!0),Object.defineProperty(Y,re.key,re)}}function A(Y,ee){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,re){return te.__proto__=re,te},A(Y,ee)}function M(Y,ee){if(ee&&(C(ee)==="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(Y)}function D(Y){if(Y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y}function O(Y){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},O(Y)}function H(Y,ee,te){return ee in Y?Object.defineProperty(Y,ee,{value:te,enumerable:!0,configurable:!0,writable:!0}):Y[ee]=te,Y}var j=function(Y){(function(le,ie){if(typeof ie!="function"&&ie!==null)throw new TypeError("Super expression must either be null or a function");le.prototype=Object.create(ie&&ie.prototype,{constructor:{value:le,writable:!0,configurable:!0}}),Object.defineProperty(le,"prototype",{writable:!1}),ie&&A(le,ie)})(ce,Y);var ee,te,re,ae,ue=(re=ce,ae=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var le,ie=O(re);if(ae){var de=O(this).constructor;le=Reflect.construct(ie,arguments,de)}else le=ie.apply(this,arguments);return M(this,le)});function ce(le){var ie,de;return function(ge,pe){if(!(ge instanceof pe))throw new TypeError("Cannot call a class as a function")}(this,ce),H(D(ie=ue.call(this,le)),"handlePreviousPage",function(ge){var pe=ie.state.selected;ie.handleClick(ge,null,pe>0?pe-1:void 0,{isPrevious:!0})}),H(D(ie),"handleNextPage",function(ge){var pe=ie.state.selected,be=ie.props.pageCount;ie.handleClick(ge,null,pe<be-1?pe+1:void 0,{isNext:!0})}),H(D(ie),"handlePageSelected",function(ge,pe){if(ie.state.selected===ge)return ie.callActiveCallback(ge),void ie.handleClick(pe,null,void 0,{isActive:!0});ie.handleClick(pe,null,ge)}),H(D(ie),"handlePageChange",function(ge){ie.state.selected!==ge&&(ie.setState({selected:ge}),ie.callCallback(ge))}),H(D(ie),"getEventListener",function(ge){return H({},ie.props.eventListener,ge)}),H(D(ie),"handleClick",function(ge,pe,be){var Se=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},Le=Se.isPrevious,De=Le!==void 0&&Le,ke=Se.isNext,Te=ke!==void 0&&ke,Ae=Se.isBreak,Ee=Ae!==void 0&&Ae,we=Se.isActive,Ve=we!==void 0&&we;ge.preventDefault?ge.preventDefault():ge.returnValue=!1;var _e=ie.state.selected,ve=ie.props.onClick,fe=be;if(ve){var ne=ve({index:pe,selected:_e,nextSelectedPage:be,event:ge,isPrevious:De,isNext:Te,isBreak:Ee,isActive:Ve});if(ne===!1)return;Number.isInteger(ne)&&(fe=ne)}fe!==void 0&&ie.handlePageChange(fe)}),H(D(ie),"handleBreakClick",function(ge,pe){var be=ie.state.selected;ie.handleClick(pe,ge,be<ge?ie.getForwardJump():ie.getBackwardJump(),{isBreak:!0})}),H(D(ie),"callCallback",function(ge){ie.props.onPageChange!==void 0&&typeof ie.props.onPageChange=="function"&&ie.props.onPageChange({selected:ge})}),H(D(ie),"callActiveCallback",function(ge){ie.props.onPageActive!==void 0&&typeof ie.props.onPageActive=="function"&&ie.props.onPageActive({selected:ge})}),H(D(ie),"getElementPageRel",function(ge){var pe=ie.state.selected,be=ie.props,Se=be.nextPageRel,Le=be.prevPageRel,De=be.selectedPageRel;return pe-1===ge?Le:pe===ge?De:pe+1===ge?Se:void 0}),H(D(ie),"pagination",function(){var ge=[],pe=ie.props,be=pe.pageRangeDisplayed,Se=pe.pageCount,Le=pe.marginPagesDisplayed,De=pe.breakLabel,ke=pe.breakClassName,Te=pe.breakLinkClassName,Ae=pe.breakAriaLabels,Ee=ie.state.selected;if(Se<=be)for(var we=0;we<Se;we++)ge.push(ie.getPageElement(we));else{var Ve=be/2,_e=be-Ve;Ee>Se-be/2?Ve=be-(_e=Se-Ee):Ee<be/2&&(_e=be-(Ve=Ee));var ve,fe,ne=function(Oe){return ie.getPageElement(Oe)},oe=[];for(ve=0;ve<Se;ve++){var xe=ve+1;if(xe<=Le)oe.push({type:"page",index:ve,display:ne(ve)});else if(xe>Se-Le)oe.push({type:"page",index:ve,display:ne(ve)});else if(ve>=Ee-Ve&&ve<=Ee+(Ee===0&&be>1?_e-1:_e))oe.push({type:"page",index:ve,display:ne(ve)});else if(De&&oe.length>0&&oe[oe.length-1].display!==fe&&(be>0||Le>0)){var Ce=ve<Ee?Ae.backward:Ae.forward;fe=h().createElement(x,{key:ve,breakAriaLabel:Ce,breakLabel:De,breakClassName:ke,breakLinkClassName:Te,breakHandler:ie.handleBreakClick.bind(null,ve),getEventListener:ie.getEventListener}),oe.push({type:"break",index:ve,display:fe})}}oe.forEach(function(Oe,se){var me=Oe;Oe.type==="break"&&oe[se-1]&&oe[se-1].type==="page"&&oe[se+1]&&oe[se+1].type==="page"&&oe[se+1].index-oe[se-1].index<=2&&(me={type:"page",index:Oe.index,display:ne(Oe.index)}),ge.push(me.display)})}return ge}),le.initialPage!==void 0&&le.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(le.initialPage,") and forcePage (").concat(le.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),de=le.initialPage?le.initialPage:le.forcePage?le.forcePage:0,ie.state={selected:de},ie}return ee=ce,(te=[{key:"componentDidMount",value:function(){var le=this.props,ie=le.initialPage,de=le.disableInitialCallback,ge=le.extraAriaContext,pe=le.pageCount,be=le.forcePage;ie===void 0||de||this.callCallback(ie),ge&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(pe)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(pe,"). Did you forget a Math.ceil()?")),ie!==void 0&&ie>pe-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(ie," > ").concat(pe-1,").")),be!==void 0&&be>pe-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(be," > ").concat(pe-1,")."))}},{key:"componentDidUpdate",value:function(le){this.props.forcePage!==void 0&&this.props.forcePage!==le.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(le.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var le=this.state.selected,ie=this.props,de=ie.pageCount,ge=le+ie.pageRangeDisplayed;return ge>=de?de-1:ge}},{key:"getBackwardJump",value:function(){var le=this.state.selected-this.props.pageRangeDisplayed;return le<0?0:le}},{key:"getElementHref",value:function(le){var ie=this.props,de=ie.hrefBuilder,ge=ie.pageCount,pe=ie.hrefAllControls;if(de)return pe||le>=0&&le<ge?de(le+1,ge,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(le){var ie=le===this.state.selected;if(this.props.ariaLabelBuilder&&le>=0&&le<this.props.pageCount){var de=this.props.ariaLabelBuilder(le+1,ie);return this.props.extraAriaContext&&!ie&&(de=de+" "+this.props.extraAriaContext),de}}},{key:"getPageElement",value:function(le){var ie=this.state.selected,de=this.props,ge=de.pageClassName,pe=de.pageLinkClassName,be=de.activeClassName,Se=de.activeLinkClassName,Le=de.extraAriaContext,De=de.pageLabelBuilder;return h().createElement(b,{key:le,pageSelectedHandler:this.handlePageSelected.bind(null,le),selected:ie===le,rel:this.getElementPageRel(le),pageClassName:ge,pageLinkClassName:pe,activeClassName:be,activeLinkClassName:Se,extraAriaContext:Le,href:this.getElementHref(le),ariaLabel:this.ariaLabelBuilder(le),page:le+1,pageLabelBuilder:De,getEventListener:this.getEventListener})}},{key:"render",value:function(){var le=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&le!==void 0)return le&&le(this.props);var ie=this.props,de=ie.disabledClassName,ge=ie.disabledLinkClassName,pe=ie.pageCount,be=ie.className,Se=ie.containerClassName,Le=ie.previousLabel,De=ie.previousClassName,ke=ie.previousLinkClassName,Te=ie.previousAriaLabel,Ae=ie.prevRel,Ee=ie.nextLabel,we=ie.nextClassName,Ve=ie.nextLinkClassName,_e=ie.nextAriaLabel,ve=ie.nextRel,fe=this.state.selected,ne=fe===0,oe=fe===pe-1,xe="".concat(S(De)).concat(ne?" ".concat(S(de)):""),Ce="".concat(S(we)).concat(oe?" ".concat(S(de)):""),Oe="".concat(S(ke)).concat(ne?" ".concat(S(ge)):""),se="".concat(S(Ve)).concat(oe?" ".concat(S(ge)):""),me=ne?"true":"false",ye=oe?"true":"false";return h().createElement("ul",{className:be||Se,role:"navigation","aria-label":"Pagination"},h().createElement("li",{className:xe},h().createElement("a",T({className:Oe,href:this.getElementHref(fe-1),tabIndex:ne?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":me,"aria-label":Te,rel:Ae},this.getEventListener(this.handlePreviousPage)),Le)),this.pagination(),h().createElement("li",{className:Ce},h().createElement("a",T({className:se,href:this.getElementHref(fe+1),tabIndex:oe?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":ye,"aria-label":_e,rel:ve},this.getEventListener(this.handleNextPage)),Ee)))}}])&&R(ee.prototype,te),Object.defineProperty(ee,"prototype",{writable:!1}),ce}(d.Component);H(j,"propTypes",{pageCount:g().number.isRequired,pageRangeDisplayed:g().number,marginPagesDisplayed:g().number,previousLabel:g().node,previousAriaLabel:g().string,prevPageRel:g().string,prevRel:g().string,nextLabel:g().node,nextAriaLabel:g().string,nextPageRel:g().string,nextRel:g().string,breakLabel:g().oneOfType([g().string,g().node]),breakAriaLabels:g().shape({forward:g().string,backward:g().string}),hrefBuilder:g().func,hrefAllControls:g().bool,onPageChange:g().func,onPageActive:g().func,onClick:g().func,initialPage:g().number,forcePage:g().number,disableInitialCallback:g().bool,containerClassName:g().string,className:g().string,pageClassName:g().string,pageLinkClassName:g().string,pageLabelBuilder:g().func,activeClassName:g().string,activeLinkClassName:g().string,previousClassName:g().string,nextClassName:g().string,previousLinkClassName:g().string,nextLinkClassName:g().string,disabledClassName:g().string,disabledLinkClassName:g().string,breakClassName:g().string,breakLinkClassName:g().string,extraAriaContext:g().string,ariaLabelBuilder:g().func,eventListener:g().string,renderOnZeroPageCount:g().func,selectedPageRel:g().string}),H(j,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(Y){return Y},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const q=j})(),u})())}(reactPaginate$1)),reactPaginate$1.exports}var reactPaginateExports=requireReactPaginate();const ReactPaginate=getDefaultExportFromCjs(reactPaginateExports),pagination="_pagination_1ovf2_35",active="_active_1ovf2_83",styles$c={"custom-pagination":"_custom-pagination_1ovf2_1",pagination,active};function Pagination({id:s,currentPage:o,itemPerPage:n=10,totalItem:a,onChangePage:l,hidePageSize:c=!1,hideGoToPage:u=!1,style:d}){const h=React.useRef(null),{t:f}=useTranslation(),g=React.useRef(null);return React.useEffect(()=>{if(h.current){const p=h.current.getInput();p&&(p.value=o.toString())}},[o]),o>1&&(a===0||Math.floor(a/n)+(a%n===0?0:1)<o)?(l(1,n),jsxRuntimeExports.jsx("div",{})):a>0?jsxRuntimeExports.jsxs("div",{id:s,className:`${styles$c["custom-pagination"]} row`,style:d,children:[c?null:jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Popup,{ref:g}),jsxRuntimeExports.jsx(Select1,{readOnly:!0,value:n,options:[10,20,50,100,200].map((p,v)=>({id:p,name:`${p}`})),style:{width:"6.8rem",padding:"0 0.8rem",height:"2.4rem"},suffix:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/down-arrow",size:"1.2rem"}),onChange:p=>{l(o,isNaN(parseInt(p.id))?n:parseInt(p.id))}}),jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:f("ofItems",{totalItem:a})})]}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(ReactPaginate,{onPageChange:p=>{l(p.selected+1,n)},forcePage:o-1,breakClassName:"row button-text-3",breakLabel:"...",pageCount:Math.ceil(a/n),previousClassName:"row",previousLabel:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/left-arrow",size:"1.4rem"}),nextClassName:"row",nextLabel:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/right-arrow",size:"1.4rem"}),containerClassName:`${styles$c.pagination} row`,pageClassName:"row button-text-3",activeClassName:styles$c.active,hrefBuilder:p=>p>=1&&p<=Math.ceil(a/n)?`/page/${p}`:"#",renderOnZeroPageCount:null}),!u&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",backgroundColor:"var(--neutral-bolder-border-color)",width:1}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-3",children:[f("go")," ",f("page").toLowerCase()]}),jsxRuntimeExports.jsx(TextField,{ref:h,style:{width:"4.8rem",textAlign:"center"},className:"body-3 size24",type:"number",onBlur:p=>{const v=p.target.value.trim().length?parseInt(p.target.value.trim()):void 0;v&&!isNaN(v)&&v>0&&v<=Math.ceil(a/n)?l(v,n):p.target.value=""}})]})]}):jsxRuntimeExports.jsx("div",{id:s})}const checkmark="_checkmark_1j36q_43",styles$b={"radio-btn-container":"_radio-btn-container_1j36q_1",checkmark},RadioButton=s=>{const o=React.useRef(null),n=React.useMemo(()=>{let a={"--size":s.size?typeof s.size=="number"?`${s.size}px`:s.size:"20px"};return s.offColor&&(a["--off-color"]=s.offColor),s.offColor&&(a["--active-color"]=s.activeColor),s.style&&(delete s.style.width,delete s.style.minWidth,delete s.style.maxWidth,delete s.style.height,delete s.style.minHeight,delete s.style.maxHeight,a={...s.style,...a}),a},[s.style,s.offColor,s.activeColor,s.size]);return jsxRuntimeExports.jsxs("label",{id:s.id,className:`row ${styles$b["radio-btn-container"]} ${s.className??""}`,style:n,children:[jsxRuntimeExports.jsx("input",{ref:o,type:"radio",checked:s.checked,name:s.name,value:s.value,disabled:s.disabled,onChange:s.onChange}),jsxRuntimeExports.jsx("span",{className:styles$b.checkmark})]})},styles$a={"simple-text-area":"_simple-text-area_1djxf_1","text-area-container":"_text-area-container_1djxf_3","helper-text":"_helper-text_1djxf_95"};class TextArea extends React.Component{constructor(){super(...arguments);E(this,"containerRef",React.createRef());E(this,"getTextarea",()=>{var n;return(n=this.containerRef.current)==null?void 0:n.querySelector("textarea")})}render(){var a;const n=this.props.style??{};return jsxRuntimeExports.jsxs("label",{id:this.props.id,ref:this.containerRef,className:`${this.props.simpleStyle?styles$a["simple-text-area"]:styles$a["text-area-container"]} row ${this.props.className??(this.props.simpleStyle?"":"body-3")} ${(a=this.props.helperText)!=null&&a.length?styles$a["helper-text"]:""}`,"helper-text":this.props.helperText,style:{"--helper-text-color":this.props.helperTextColor??"#e14337",...n},children:[this.props.prefix,this.props.register?jsxRuntimeExports.jsx("textarea",{name:this.props.name,autoFocus:this.props.autoFocus,...this.props.register,maxLength:this.props.maxLength,placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onFocus:this.props.onFocus}):jsxRuntimeExports.jsx("textarea",{autoFocus:this.props.autoFocus,maxLength:this.props.maxLength,name:this.props.name,defaultValue:this.props.defaultValue,value:this.props.value,placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur}),this.props.suffix]})}}const styles$9={"import-file-container":"_import-file-container_1jfp2_1","import-file-simple-style":"_import-file-simple-style_1jfp2_1","button-only":"_button-only_1jfp2_19","preview-icon":"_preview-icon_1jfp2_35","import-file-prefix":"_import-file-prefix_1jfp2_43","file-preview-content":"_file-preview-content_1jfp2_69","remove-preview-file":"_remove-preview-file_1jfp2_89","helper-text":"_helper-text_1jfp2_109"},cloudSvg=jsxRuntimeExports.jsxs("svg",{width:"100%",height:"100%",style:{width:"3rem",height:"3rem"},viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M22.5312 6.51941C20.3258 6.12929 18.0555 6.35518 15.9702 7.1722C13.8849 7.98923 12.0654 9.36573 10.712 11.1502C9.53042 12.7081 8.74407 14.5243 8.41412 16.4432C6.99557 16.9154 5.7486 17.8144 4.85059 19.0274C3.77621 20.4786 3.27749 22.2764 3.45068 24.0737C3.62388 25.871 4.45672 27.5405 5.78845 28.7599C7.12018 29.9792 8.85639 30.6621 10.662 30.6766H13.1063C13.7786 30.6766 14.3236 30.1316 14.3236 29.4594C14.3236 28.7871 13.7786 28.2421 13.1063 28.2421H10.6769C9.47485 28.2313 8.31921 27.7762 7.43253 26.9643C6.54471 26.1514 5.98948 25.0384 5.87402 23.8402C5.75855 22.642 6.09103 21.4435 6.80729 20.476C7.52354 19.5085 8.57279 18.8406 9.75252 18.6013C10.2753 18.4952 10.6682 18.061 10.7216 17.5303C10.9012 15.7476 11.5691 14.049 12.6518 12.6214C13.7345 11.1938 15.1901 10.0926 16.8583 9.43899C18.5266 8.78536 20.3428 8.60466 22.1071 8.91675C23.8715 9.22884 25.5155 10.0216 26.8583 11.2079C28.2011 12.3941 29.1905 13.9278 29.7178 15.6402C30.2451 17.3526 30.2898 19.1772 29.8469 20.9134C29.404 22.6495 28.4907 24.2297 27.2075 25.4802C25.9244 26.7308 24.3211 27.603 22.5742 28.001C21.9187 28.1504 21.5084 28.8028 21.6577 29.4583C21.807 30.1138 22.4595 30.5241 23.115 30.3748C25.2987 29.8772 27.3028 28.7869 28.9067 27.2238C30.5107 25.6606 31.6523 23.6853 32.2059 21.5152C32.7595 19.345 32.7037 17.0642 32.0446 14.9237C31.3855 12.7833 30.1486 10.8661 28.4701 9.38333C26.7916 7.90052 24.7366 6.90953 22.5312 6.51941Z",style:{fill:"var(--primary-main-color, #287cf0)"}}),jsxRuntimeExports.jsx("path",{d:"M17.1146 17.6431C17.2313 17.5264 17.3658 17.4384 17.5094 17.379C17.6513 17.3201 17.8067 17.2874 17.9697 17.2866L17.9753 17.2866L17.9809 17.2866C18.2906 17.288 18.5998 17.4069 18.8361 17.6431L23.7052 22.5123C24.1806 22.9876 24.1806 23.7584 23.7052 24.2338C23.2298 24.7091 22.4591 24.7091 21.9837 24.2338L19.1926 21.4427V29.4594C19.1926 30.1317 18.6476 30.6767 17.9753 30.6767C17.303 30.6767 16.758 30.1317 16.758 29.4594V21.4427L13.9669 24.2338C13.4916 24.7091 12.7208 24.7091 12.2455 24.2338C11.7701 23.7584 11.7701 22.9876 12.2455 22.5123L17.1146 17.6431Z",style:{fill:"var(--primary-main-color, #287cf0)"}})]}),fileSvg=jsxRuntimeExports.jsxs("svg",{className:styles$9["preview-icon"],width:"100%",height:"100%",style:{width:"3rem",height:"3rem"},viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M20.9163 3.41669H7.54829C7.22597 3.41669 6.91686 3.54472 6.68895 3.77263C6.46105 4.00054 6.33301 4.30965 6.33301 4.63196V31.3681C6.33301 31.6904 6.46105 31.9995 6.68895 32.2274C6.91686 32.4553 7.22597 32.5834 7.54829 32.5834H29.4233C29.7456 32.5834 30.0547 32.4553 30.2826 32.2274C30.5105 31.9995 30.6386 31.6904 30.6386 31.3681V13.1389H22.1316C21.8093 13.1389 21.5002 13.0109 21.2723 12.783C21.0444 12.5551 20.9163 12.2459 20.9163 11.9236V3.41669Z",style:{fill:"var(--primary-main-color, #287cf0)"}}),jsxRuntimeExports.jsx("path",{d:"M29.9264 10.7084H23.3469V4.12884L29.9264 10.7084Z",style:{fill:"var(--primary-main-color, #287cf0)"}})]}),closeSvg=jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",style:{width:"2.4rem",height:"2.4rem"},fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M13.4144 12.0002L20.4144 5.00015L19.0002 3.58594L12.0002 10.5859L5.00015 3.58594L3.58594 5.00015L10.5859 12.0002L3.58594 19.0002L5.00015 20.4144L12.0002 13.4144L19.0002 20.4144L20.4144 19.0002L13.4144 12.0002Z",style:{fill:"var(--error-main-color, #E14337)"}})});function formatFileSize(s,o=2){if(s===0)return"0 Bytes";const n=1024,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(s)/Math.log(n)),c=Math.min(l,a.length-1),u=s/Math.pow(n,c);return c===0?Math.round(u)+" "+a[c]:Number(u.toFixed(o)).toString()+" "+a[c]}const ImportFile=React.forwardRef(({style:s={},...o},n)=>{var f,g,p,v,b;const a=React.useRef(null),[l,c]=React.useState(),{t:u}=useTranslation(),d=React.useMemo(()=>o.maxSize?formatFileSize(o.maxSize):void 0,[o.maxSize]),h=React.useMemo(()=>{var _;return(_=l==null?void 0:l[0])!=null&&_.size?`${l==null?void 0:l[0].size}KB`:o.subTitle??(d?u("limitFileWarning",{sizeTitle:d}):"")},[o.subTitle,d,l]);return React.useImperativeHandle(n,()=>({showFilePicker(){var _;(_=a.current)==null||_.showPicker()},inputElement:a.current})),React.useEffect(()=>{c(o.value?Array.isArray(o.value)?o.value:[o.value]:void 0)},[o.value]),jsxRuntimeExports.jsxs("label",{id:o.id,className:`${o.simpleStyle?styles$9["import-file-simple-style"]:styles$9["import-file-container"]} ${o.className??"row"} ${o.buttonOnly?styles$9["button-only"]:""} ${(f=o.helperText)!=null&&f.length?styles$9["helper-text"]:""}`,style:{"--helper-text-color":o.helperTextColor??"#e14337",cursor:l!=null&&l.length?void 0:"pointer",...s},"helper-text":o.helperText,htmlFor:l!=null&&l.length?"":void 0,children:[jsxRuntimeExports.jsx("input",{ref:a,disabled:o.disabled,type:"file",hidden:!0,multiple:o.multiple,accept:(g=o.allowType)==null?void 0:g.join(","),onChange:_=>{var x,S,C,T;let w;if((x=_.target.files)!=null&&x.length&&(w=[..._.target.files],o.maxSize&&w.some(R=>R.size>o.maxSize*1024)&&(ToastMessage.errors(u("limitFileError",{name:(S=w.find(R=>R.size>o.maxSize*1024))==null?void 0:S.name,sizeTitle:d})),w=w.filter(R=>R.size<=o.maxSize*1024))),w)if(o.multiple){const R=(l==null?void 0:l.filter(A=>w.every(M=>A.name!==M.name&&A.size!==M.size&&A.lastModified!==M.lastModified)))??[];c([...R,...w]),(C=o.onChange)==null||C.call(o,[...R,...w])}else c(w),(T=o.onChange)==null||T.call(o,w)}}),!o.buttonOnly&&(o.multiple&&(l!=null&&l.length)?jsxRuntimeExports.jsx("div",{className:"row",style:{flex:1,flexWrap:"wrap",gap:"0.8rem"},children:l.map(_=>{var w;return jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",padding:"0.6rem 0.8rem",borderRadius:"0.4rem",border:"var(--neutral-main-border)",flex:"0 calc((100% * 6 / 24) - 0.8rem * 3 / 4)",width:"auto",minWidth:"11.4rem",...o.fileTagStyle??{}},children:[jsxRuntimeExports.jsx(Winicon,{src:`outline/${(w=_.type)!=null&&w.includes("image")?"multimedia/image":"files/file-export"}`,size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"subtitle-4",style:{flex:1,width:"100%"},maxLine:1,children:_.name}),jsxRuntimeExports.jsx(Winicon,{src:"fill/user interface/e-remove",size:"1.4rem",onClick:()=>{var S;const x=l==null?void 0:l.filter(C=>C.name!==_.name&&C.size!==_.size&&C.lastModified!==_.lastModified);c(x),(S=o.onChange)==null||S.call(o,x)},color:"#E14337"})]},`${_.name}-${_.size}-${_.lastModified}`)})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`${styles$9["import-file-prefix"]} row`,style:{justifyContent:"center"},children:l!=null&&l.length?(p=l[0].type)!=null&&p.includes("image")?jsxRuntimeExports.jsx("img",{src:l[0]instanceof File?URL.createObjectURL(l[0]):(v=l==null?void 0:l[0])==null?void 0:v.url}):fileSvg:cloudSvg}),jsxRuntimeExports.jsxs("div",{className:`${styles$9["file-preview-content"]}`,children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{width:"100%"},children:((b=l==null?void 0:l[0])==null?void 0:b.name)??o.label??u("uploadFileAction")}),!!(h!=null&&h.length)&&jsxRuntimeExports.jsx(Text$2,{className:"subtitle-3",style:{width:"fit-content"},children:h})]})]})),l!=null&&l.length&&o.buttonOnly&&!o.multiple?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"button-text-6",children:(l==null?void 0:l[0].name)??""}),jsxRuntimeExports.jsx("button",{type:"button",className:`${styles$9["remove-preview-file"]}`,onClick:()=>{var _;c(void 0),(_=o.onChange)==null||_.call(o,void 0)},children:closeSvg})]}):jsxRuntimeExports.jsx(Button,{label:l!=null&&l.length?o.multiple?`${u("add")} ${u("file").toLowerCase()}`:`${u("remove")} ${u("file").toLowerCase()}`:`${u("choose")} ${u("file").toLowerCase()}`,className:"button-text-3 button-grey",onClick:()=>{var _,w;l&&!o.multiple?(c(void 0),(_=o.onChange)==null||_.call(o,void 0)):(w=a.current)==null||w.showPicker()}})]})});function r(s){var o,n,a="";if(typeof s=="string"||typeof s=="number")a+=s;else if(typeof s=="object")if(Array.isArray(s)){var l=s.length;for(o=0;o<l;o++)s[o]&&(n=r(s[o]))&&(a&&(a+=" "),a+=n)}else for(n in s)s[n]&&(a&&(a+=" "),a+=n);return a}function clsx(){for(var s,o,n=0,a="",l=arguments.length;n<l;n++)(s=arguments[n])&&(o=r(s))&&(a&&(a+=" "),a+=o);return a}function Mt(s){if(typeof document>"u")return;let o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=s:n.appendChild(document.createTextNode(s))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L=s=>typeof s=="number"&&!isNaN(s),N=s=>typeof s=="string",P=s=>typeof s=="function",mt=s=>N(s)||L(s),B=s=>N(s)||P(s)?s:null,pt=(s,o)=>s===!1||L(s)&&s>0?s:o,z=s=>React.isValidElement(s)||N(s)||P(s)||L(s);function Z(s,o,n=300){let{scrollHeight:a,style:l}=s;requestAnimationFrame(()=>{l.minHeight="initial",l.height=a+"px",l.transition=`all ${n}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(o,n)})})}function $({enter:s,exit:o,appendPosition:n=!1,collapse:a=!0,collapseDuration:l=300}){return function({children:c,position:u,preventExitTransition:d,done:h,nodeRef:f,isIn:g,playToast:p}){let v=n?`${s}--${u}`:s,b=n?`${o}--${u}`:o,_=React.useRef(0);return React.useLayoutEffect(()=>{let w=f.current,x=v.split(" "),S=C=>{C.target===f.current&&(p(),w.removeEventListener("animationend",S),w.removeEventListener("animationcancel",S),_.current===0&&C.type!=="animationcancel"&&w.classList.remove(...x))};w.classList.add(...x),w.addEventListener("animationend",S),w.addEventListener("animationcancel",S)},[]),React.useEffect(()=>{let w=f.current,x=()=>{w.removeEventListener("animationend",x),a?Z(w,h,l):h()};g||(d?x():(_.current=1,w.className+=` ${b}`,w.addEventListener("animationend",x)))},[g]),React.createElement(React.Fragment,null,c)}}function J(s,o){return{content:tt(s.content,s.props),containerId:s.props.containerId,id:s.props.toastId,theme:s.props.theme,type:s.props.type,data:s.props.data||{},isLoading:s.props.isLoading,icon:s.props.icon,reason:s.removalReason,status:o}}function tt(s,o,n=!1){return React.isValidElement(s)&&!N(s.type)?React.cloneElement(s,{closeToast:o.closeToast,toastProps:o,data:o.data,isPaused:n}):P(s)?s({closeToast:o.closeToast,toastProps:o,data:o.data,isPaused:n}):s}function yt({closeToast:s,theme:o,ariaLabel:n="close"}){return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${o}`,type:"button",onClick:a=>{a.stopPropagation(),s(!0)},"aria-label":n},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:s,isRunning:o,closeToast:n,type:a="default",hide:l,className:c,controlledProgress:u,progress:d,rtl:h,isIn:f,theme:g}){let p=l||u&&d===0,v={animationDuration:`${s}ms`,animationPlayState:o?"running":"paused"};u&&(v.transform=`scaleX(${d})`);let b=clsx("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${g}`,`Toastify__progress-bar--${a}`,{"Toastify__progress-bar--rtl":h}),_=P(c)?c({rtl:h,type:a,defaultClassName:b}):clsx(b,c),w={[u&&d>=1?"onTransitionEnd":"onAnimationEnd"]:u&&d<1?null:()=>{f&&n()}};return React.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},React.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${g} Toastify__progress-bar--${a}`}),React.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:_,style:v,...w}))}var Xt=1,at=()=>`${Xt++}`;function _t(s,o,n){let a=1,l=0,c=[],u=[],d=o,h=new Map,f=new Set,g=C=>(f.add(C),()=>f.delete(C)),p=()=>{u=Array.from(h.values()),f.forEach(C=>C())},v=({containerId:C,toastId:T,updateId:R})=>{let A=C?C!==s:s!==1,M=h.has(T)&&R==null;return A||M},b=(C,T)=>{h.forEach(R=>{var A;(T==null||T===R.props.toastId)&&((A=R.toggle)==null||A.call(R,C))})},_=C=>{var T,R;(R=(T=C.props)==null?void 0:T.onClose)==null||R.call(T,C.removalReason),C.isActive=!1},w=C=>{if(C==null)h.forEach(_);else{let T=h.get(C);T&&_(T)}p()},x=()=>{l-=c.length,c=[]},S=C=>{var T,R;let{toastId:A,updateId:M}=C.props,D=M==null;C.staleId&&h.delete(C.staleId),C.isActive=!0,h.set(A,C),p(),n(J(C,D?"added":"updated")),D&&((R=(T=C.props).onOpen)==null||R.call(T))};return{id:s,props:d,observe:g,toggle:b,removeToast:w,toasts:h,clearQueue:x,buildToast:(C,T)=>{if(v(T))return;let{toastId:R,updateId:A,data:M,staleId:D,delay:O}=T,H=A==null;H&&l++;let j={...d,style:d.toastStyle,key:a++,...Object.fromEntries(Object.entries(T).filter(([Y,ee])=>ee!=null)),toastId:R,updateId:A,data:M,isIn:!1,className:B(T.className||d.toastClassName),progressClassName:B(T.progressClassName||d.progressClassName),autoClose:T.isLoading?!1:pt(T.autoClose,d.autoClose),closeToast(Y){h.get(R).removalReason=Y,w(R)},deleteToast(){let Y=h.get(R);if(Y!=null){if(n(J(Y,"removed")),h.delete(R),l--,l<0&&(l=0),c.length>0){S(c.shift());return}p()}}};j.closeButton=d.closeButton,T.closeButton===!1||z(T.closeButton)?j.closeButton=T.closeButton:T.closeButton===!0&&(j.closeButton=z(d.closeButton)?d.closeButton:!0);let q={content:C,props:j,staleId:D};d.limit&&d.limit>0&&l>d.limit&&H?c.push(q):L(O)?setTimeout(()=>{S(q)},O):S(q)},setProps(C){d=C},setToggle:(C,T)=>{let R=h.get(C);R&&(R.toggle=T)},isToastActive:C=>{var T;return(T=h.get(C))==null?void 0:T.isActive},getSnapshot:()=>u}}var I=new Map,F=[],st=new Set,Vt=s=>st.forEach(o=>o(s)),bt=()=>I.size>0;function Qt(){F.forEach(s=>nt(s.content,s.options)),F=[]}var vt=(s,{containerId:o})=>{var n;return(n=I.get(o||1))==null?void 0:n.toasts.get(s)};function X(s,o){var n;if(o)return!!((n=I.get(o))!=null&&n.isToastActive(s));let a=!1;return I.forEach(l=>{l.isToastActive(s)&&(a=!0)}),a}function ht(s){if(!bt()){F=F.filter(o=>s!=null&&o.options.toastId!==s);return}if(s==null||mt(s))I.forEach(o=>{o.removeToast(s)});else if(s&&("containerId"in s||"id"in s)){let o=I.get(s.containerId);o?o.removeToast(s.id):I.forEach(n=>{n.removeToast(s.id)})}}var Ct=(s={})=>{I.forEach(o=>{o.props.limit&&(!s.containerId||o.id===s.containerId)&&o.clearQueue()})};function nt(s,o){z(s)&&(bt()||F.push({content:s,options:o}),I.forEach(n=>{n.buildToast(s,o)}))}function xt(s){var o;(o=I.get(s.containerId||1))==null||o.setToggle(s.id,s.fn)}function rt$1(s,o){I.forEach(n=>{(o==null||!(o!=null&&o.containerId)||(o==null?void 0:o.containerId)===n.id)&&n.toggle(s,o==null?void 0:o.id)})}function Et(s){let o=s.containerId||1;return{subscribe(n){let a=_t(o,s,Vt);I.set(o,a);let l=a.observe(n);return Qt(),()=>{l(),I.delete(o)}},setProps(n){var a;(a=I.get(o))==null||a.setProps(n)},getSnapshot(){var n;return(n=I.get(o))==null?void 0:n.getSnapshot()}}}function Pt(s){return st.add(s),()=>{st.delete(s)}}function Wt(s){return s&&(N(s.toastId)||L(s.toastId))?s.toastId:at()}function U(s,o){return nt(s,o),o.toastId}function V(s,o){return{...o,type:o&&o.type||s,toastId:Wt(o)}}function Q(s){return(o,n)=>U(o,V(s,n))}function y(s,o){return U(s,V("default",o))}y.loading=(s,o)=>U(s,V("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...o}));function Gt(s,{pending:o,error:n,success:a},l){let c;o&&(c=N(o)?y.loading(o,l):y.loading(o.render,{...l,...o}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(f,g,p)=>{if(g==null){y.dismiss(c);return}let v={type:f,...u,...l,data:p},b=N(g)?{render:g}:g;return c?y.update(c,{...v,...b}):y(b.render,{...v,...b}),p},h=P(s)?s():s;return h.then(f=>d("success",a,f)).catch(f=>d("error",n,f)),h}y.promise=Gt;y.success=Q("success");y.info=Q("info");y.error=Q("error");y.warning=Q("warning");y.warn=y.warning;y.dark=(s,o)=>U(s,V("default",{theme:"dark",...o}));function qt(s){ht(s)}y.dismiss=qt;y.clearWaitingQueue=Ct;y.isActive=X;y.update=(s,o={})=>{let n=vt(s,o);if(n){let{props:a,content:l}=n,c={delay:100,...a,...o,toastId:o.toastId||s,updateId:at()};c.toastId!==s&&(c.staleId=s);let u=c.render||l;delete c.render,U(u,c)}};y.done=s=>{y.update(s,{progress:1})};y.onChange=Pt;y.play=s=>rt$1(!0,s);y.pause=s=>rt$1(!1,s);function It(s){var o;let{subscribe:n,getSnapshot:a,setProps:l}=React.useRef(Et(s)).current;l(s);let c=(o=React.useSyncExternalStore(n,a,a))==null?void 0:o.slice();function u(d){if(!c)return[];let h=new Map;return s.newestOnTop&&c.reverse(),c.forEach(f=>{let{position:g}=f.props;h.has(g)||h.set(g,[]),h.get(g).push(f)}),Array.from(h,f=>d(f[0],f[1]))}return{getToastToRender:u,isToastActive:X,count:c==null?void 0:c.length}}function At(s){let[o,n]=React.useState(!1),[a,l]=React.useState(!1),c=React.useRef(null),u=React.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:d,pauseOnHover:h,closeToast:f,onClick:g,closeOnClick:p}=s;xt({id:s.toastId,containerId:s.containerId,fn:n}),React.useEffect(()=>{if(s.pauseOnFocusLoss)return v(),()=>{b()}},[s.pauseOnFocusLoss]);function v(){document.hasFocus()||S(),window.addEventListener("focus",x),window.addEventListener("blur",S)}function b(){window.removeEventListener("focus",x),window.removeEventListener("blur",S)}function _(D){if(s.draggable===!0||s.draggable===D.pointerType){C();let O=c.current;u.canCloseOnClick=!0,u.canDrag=!0,O.style.transition="none",s.draggableDirection==="x"?(u.start=D.clientX,u.removalDistance=O.offsetWidth*(s.draggablePercent/100)):(u.start=D.clientY,u.removalDistance=O.offsetHeight*(s.draggablePercent===80?s.draggablePercent*1.5:s.draggablePercent)/100)}}function w(D){let{top:O,bottom:H,left:j,right:q}=c.current.getBoundingClientRect();D.nativeEvent.type!=="touchend"&&s.pauseOnHover&&D.clientX>=j&&D.clientX<=q&&D.clientY>=O&&D.clientY<=H?S():x()}function x(){n(!0)}function S(){n(!1)}function C(){u.didMove=!1,document.addEventListener("pointermove",R),document.addEventListener("pointerup",A)}function T(){document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",A)}function R(D){let O=c.current;if(u.canDrag&&O){u.didMove=!0,o&&S(),s.draggableDirection==="x"?u.delta=D.clientX-u.start:u.delta=D.clientY-u.start,u.start!==D.clientX&&(u.canCloseOnClick=!1);let H=s.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`;O.style.transform=`translate3d(${H},0)`,O.style.opacity=`${1-Math.abs(u.delta/u.removalDistance)}`}}function A(){T();let D=c.current;if(u.canDrag&&u.didMove&&D){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance){l(!0),s.closeToast(!0),s.collapseAll();return}D.style.transition="transform 0.2s, opacity 0.2s",D.style.removeProperty("transform"),D.style.removeProperty("opacity")}}let M={onPointerDown:_,onPointerUp:w};return d&&h&&(M.onMouseEnter=S,s.stacked||(M.onMouseLeave=x)),p&&(M.onClick=D=>{g&&g(D),u.canCloseOnClick&&f(!0)}),{playToast:x,pauseToast:S,isRunning:o,preventExitTransition:a,toastRef:c,eventHandlers:M}}var Ot=typeof window<"u"?React.useLayoutEffect:React.useEffect,G=({theme:s,type:o,isLoading:n,...a})=>React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${o})`,...a});function ao(s){return React.createElement(G,{...s},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(s){return React.createElement(G,{...s},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(s){return React.createElement(G,{...s},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(s){return React.createElement(G,{...s},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React.createElement("div",{className:"Toastify__spinner"})}var W={info:so,warning:ao,success:no,error:ro,spinner:io},lo=s=>s in W;function Nt({theme:s,type:o,isLoading:n,icon:a}){let l=null,c={theme:s,type:o};return a===!1||(P(a)?l=a({...c,isLoading:n}):React.isValidElement(a)?l=React.cloneElement(a,c):n?l=W.spinner():lo(o)&&(l=W[o](c))),l}var wt=s=>{let{isRunning:o,preventExitTransition:n,toastRef:a,eventHandlers:l,playToast:c}=At(s),{closeButton:u,children:d,autoClose:h,onClick:f,type:g,hideProgressBar:p,closeToast:v,transition:b,position:_,className:w,style:x,progressClassName:S,updateId:C,role:T,progress:R,rtl:A,toastId:M,deleteToast:D,isIn:O,isLoading:H,closeOnClick:j,theme:q,ariaLabel:Y}=s,ee=clsx("Toastify__toast",`Toastify__toast-theme--${q}`,`Toastify__toast--${g}`,{"Toastify__toast--rtl":A},{"Toastify__toast--close-on-click":j}),te=P(w)?w({rtl:A,position:_,type:g,defaultClassName:ee}):clsx(ee,w),re=Nt(s),ae=!!R||!h,ue={closeToast:v,type:g,theme:q},ce=null;return u===!1||(P(u)?ce=u(ue):React.isValidElement(u)?ce=React.cloneElement(u,ue):ce=yt(ue)),React.createElement(b,{isIn:O,done:D,position:_,preventExitTransition:n,nodeRef:a,playToast:c},React.createElement("div",{id:M,tabIndex:0,onClick:f,"data-in":O,className:te,...l,style:x,ref:a,...O&&{role:T,"aria-label":Y}},re!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!H})},re),tt(d,s,!o),ce,!s.customProgressBar&&React.createElement(gt,{...C&&!ae?{key:`p-${C}`}:{},rtl:A,theme:q,delay:h,isRunning:o,isIn:O,closeToast:v,hide:p,type:g,className:S,controlledProgress:ae,progress:R||0})))},K=(s,o=!1)=>({enter:`Toastify--animate Toastify__${s}-enter`,exit:`Toastify--animate Toastify__${s}-exit`,appendPosition:o}),lt$1=$(K("bounce",!0)),mo=$(K("slide",!0)),_o={position:"top-right",transition:lt$1,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:s=>s.altKey&&s.code==="KeyT"};function Lt(s){let o={..._o,...s},n=s.stacked,[a,l]=React.useState(!0),c=React.useRef(null),{getToastToRender:u,isToastActive:d,count:h}=It(o),{className:f,style:g,rtl:p,containerId:v,hotKeys:b}=o;function _(x){let S=clsx("Toastify__toast-container",`Toastify__toast-container--${x}`,{"Toastify__toast-container--rtl":p});return P(f)?f({position:x,rtl:p,defaultClassName:S}):clsx(S,B(f))}function w(){n&&(l(!0),y.play())}return Ot(()=>{var x;if(n){let S=c.current.querySelectorAll('[data-in="true"]'),C=12,T=(x=o.position)==null?void 0:x.includes("top"),R=0,A=0;Array.from(S).reverse().forEach((M,D)=>{let O=M;O.classList.add("Toastify__toast--stacked"),D>0&&(O.dataset.collapsed=`${a}`),O.dataset.pos||(O.dataset.pos=T?"top":"bot");let H=R*(a?.2:1)+(a?0:C*D);O.style.setProperty("--y",`${T?H:H*-1}px`),O.style.setProperty("--g",`${C}`),O.style.setProperty("--s",`${1-(a?A:0)}`),R+=O.offsetHeight,A+=.025})}},[a,h,n]),React.useEffect(()=>{function x(S){var C;let T=c.current;b(S)&&((C=T.querySelector('[tabIndex="0"]'))==null||C.focus(),l(!1),y.pause()),S.key==="Escape"&&(document.activeElement===T||T!=null&&T.contains(document.activeElement))&&(l(!0),y.play())}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[b]),React.createElement("section",{ref:c,className:"Toastify",id:v,onMouseEnter:()=>{n&&(l(!1),y.pause())},onMouseLeave:w,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":o["aria-label"]},u((x,S)=>{let C=S.length?{...g}:{...g,pointerEvents:"none"};return React.createElement("div",{tabIndex:-1,className:_(x),"data-stacked":n,style:C,key:`c-${x}`},S.map(({content:T,props:R})=>React.createElement(wt,{...R,stacked:n,collapseAll:w,isIn:d(R.toastId,R.containerId),key:`t-${R.key}`},T)))}))}class ToastMessage{static success(o){y.success(o,{hideProgressBar:!0,transition:mo,autoClose:800,theme:"colored"})}static errors(o){y.error(o,{theme:"colored",pauseOnHover:!1,hideProgressBar:!0,transition:mo,autoClose:800})}}const loading="_loading_1o3yx_1",styles$8={"infinite-scroll":"_infinite-scroll_1o3yx_1",loading};class InfiniteScroll extends React.Component{constructor(){super(...arguments);E(this,"state",{loading:!1})}render(){return jsxRuntimeExports.jsx("div",{id:this.props.id,onScroll:async n=>{if(this.props.handleScroll){this.setState({...this.state,loading:!0});let a=n.target;await this.props.handleScroll(Math.round(a.offsetHeight+a.scrollTop)>=a.scrollHeight-1,n),this.setState({loading:!1})}},className:`${styles$8["infinite-scroll"]} ${this.state.loading?styles$8.loading:""} ${this.props.className??"col"}`,style:this.props.style??{overflow:"hidden auto"},children:this.props.children})}}const styles$7={"rating-container":"_rating-container_i1js0_1"},autoKeyId=()=>window.crypto.randomUUID().replace(/-/g,"");class Rating extends React.Component{constructor(){super(...arguments);E(this,"state",{value:this.props.value??0})}componentDidUpdate(n){n.value!==this.props.value&&this.setState({value:this.props.value??0})}render(){return jsxRuntimeExports.jsx("div",{id:this.props.id,className:`row ${styles$7["rating-container"]} ${this.props.className??""}`,style:this.props.style,children:Array.from({length:5}).map((n,a)=>{let l="rating-star-grad-0",c=0;return this.state.value>=5?(l="rating-star-grad-5",c=100):this.state.value>=a&&(l=autoKeyId(),c=(this.state.value-a)*100),jsxRuntimeExports.jsxs("svg",{onClick:()=>{this.props.onChange&&(this.setState({value:a+1}),this.props.onChange(a+1))},width:"100%",height:"100%",style:{width:this.props.size??"2rem",height:this.props.size??"2rem"},viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:l,x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",style:{stopColor:this.props.fillColor??"var(--secondary3-main-color,#FAAD1E)"}}),jsxRuntimeExports.jsx("stop",{offset:`${c}%`,style:{stopColor:this.props.fillColor??"var(--secondary3-main-color,#FAAD1E)"}}),jsxRuntimeExports.jsx("stop",{offset:`${c}%`,style:{stopColor:"#00000000"}})]})}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.66667C10.2884 1.66667 10.5518 1.82993 10.6794 2.0878L12.844 6.46194L17.6847 7.16325C17.97 7.20459 18.2071 7.4039 18.2962 7.67736C18.3853 7.95082 18.311 8.25101 18.1045 8.45172L14.6018 11.8563L15.4285 16.6636C15.4772 16.947 15.3604 17.2334 15.127 17.4024C14.8937 17.5714 14.5844 17.5937 14.3292 17.4599L10 15.1897L5.67081 17.4599C5.41557 17.5937 5.10627 17.5714 4.87295 17.4024C4.63964 17.2334 4.52278 16.947 4.57151 16.6636L5.39815 11.8563L1.89545 8.45172C1.68896 8.25101 1.61465 7.95082 1.70377 7.67736C1.79288 7.4039 2.02996 7.20459 2.31533 7.16325L7.15599 6.46194L9.32063 2.0878C9.44825 1.82993 9.71162 1.66667 10 1.66667ZM10 4.12915L8.33846 7.48665C8.22811 7.70963 8.01479 7.86418 7.76802 7.89993L4.05223 8.43827L6.74094 11.0517C6.91947 11.2252 7.00094 11.4752 6.95881 11.7203L6.3243 15.4102L9.64738 13.6676C9.86813 13.5519 10.1319 13.5519 10.3526 13.6676L13.6757 15.4102L13.0412 11.7203C12.9991 11.4752 13.0805 11.2252 13.2591 11.0517L15.9478 8.43827L12.232 7.89993C11.9852 7.86418 11.7719 7.70963 11.6615 7.48665L10 4.12915Z",style:{fill:this.props.strokeColor??"var(--neutral-text-placeholder-color,#878792)"}}),jsxRuntimeExports.jsx("path",{d:"M17.738 7.18949L12.8212 6.47499L10.6249 2.02268C10.5611 1.91426 10.47 1.82438 10.3608 1.76194C10.2515 1.6995 10.1279 1.66666 10.0021 1.66666C9.87623 1.66666 9.75259 1.6995 9.64335 1.76194C9.53411 1.82438 9.44306 1.91426 9.37921 2.02268L7.17875 6.47499L2.26191 7.18949C2.13368 7.208 2.0132 7.26201 1.91406 7.34542C1.81493 7.42882 1.74111 7.5383 1.70095 7.66147C1.66078 7.78463 1.65588 7.91658 1.68678 8.04239C1.71769 8.1682 1.78317 8.28286 1.87583 8.3734L5.43449 11.8411L4.59499 16.7385C4.57311 16.8662 4.58739 16.9975 4.63622 17.1175C4.68505 17.2375 4.76648 17.3414 4.8713 17.4175C4.97612 17.4937 5.10016 17.539 5.22938 17.5483C5.3586 17.5577 5.48785 17.5306 5.60252 17.4704L9.99998 15.1588L14.3974 17.4704C14.5121 17.5306 14.6414 17.5577 14.7706 17.5483C14.8998 17.539 15.0238 17.4937 15.1286 17.4175C15.2335 17.3414 15.3149 17.2375 15.3637 17.1175C15.4126 16.9975 15.4268 16.8662 15.405 16.7385L14.5655 11.8411L18.1241 8.3734C18.2168 8.28295 18.2823 8.16841 18.3132 8.0427C18.3442 7.91699 18.3394 7.78512 18.2994 7.66199C18.2594 7.53886 18.1858 7.42937 18.0868 7.34587C17.9879 7.26238 17.8675 7.20822 17.7394 7.18949H17.738Z",fill:`url(#${l})`})]},"rate-"+a)})})}}function ProgressCircle(s){const o=30-(s.strokeWidth??4),n=Math.PI*2*o,a=(1-(s.percent??0)/100)*n;return jsxRuntimeExports.jsxs("svg",{id:s.id,className:s.className,width:"100%",height:"100%",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...s.style??{},width:s.size??"4.8rem",height:s.size??"4.8rem"},children:[jsxRuntimeExports.jsx("path",{d:`M 30,30 m 0,-${o} a ${o},${o} 0 1 1 0,${2*o} a ${o},${o} 0 1 1 0,-${2*o}`,style:{fill:"none",stroke:s.strokeColor??"var(--neutral-main-background-color, #EFEFF0)",strokeWidth:s.strokeWidth??"4px"}}),jsxRuntimeExports.jsx("path",{d:`M 30,30 m 0,-${o} a ${o},${o} 0 1 1 0,${2*o} a ${o},${o} 0 1 1 0,-${2*o}`,style:{stroke:s.percentColor??"var(--primary-main-color, #287CF0)",strokeWidth:s.strokeWidth??"4px",strokeLinecap:"round",strokeDasharray:`${n}px ${n}px`,strokeDashoffset:`${a}px`}}),jsxRuntimeExports.jsx("text",{x:"50%",y:"50%",dy:".3em",textAnchor:"middle",style:{fontSize:"1.6rem",fontWeight:"600",fill:"var(--neutral-text-title-color, #18181b)",...s.textStyle??{}},children:s.title??`${s.percent??0}%`})]})}var dist$4={exports:{}},propTypes={exports:{}},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var s=typeof Symbol=="function"&&Symbol.for,o=s?Symbol.for("react.element"):60103,n=s?Symbol.for("react.portal"):60106,a=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,c=s?Symbol.for("react.profiler"):60114,u=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,h=s?Symbol.for("react.async_mode"):60111,f=s?Symbol.for("react.concurrent_mode"):60111,g=s?Symbol.for("react.forward_ref"):60112,p=s?Symbol.for("react.suspense"):60113,v=s?Symbol.for("react.suspense_list"):60120,b=s?Symbol.for("react.memo"):60115,_=s?Symbol.for("react.lazy"):60116,w=s?Symbol.for("react.block"):60121,x=s?Symbol.for("react.fundamental"):60117,S=s?Symbol.for("react.responder"):60118,C=s?Symbol.for("react.scope"):60119;function T(A){if(typeof A=="object"&&A!==null){var M=A.$$typeof;switch(M){case o:switch(A=A.type,A){case h:case f:case a:case c:case l:case p:return A;default:switch(A=A&&A.$$typeof,A){case d:case g:case _:case b:case u:return A;default:return M}}case n:return M}}}function R(A){return T(A)===f}return reactIs_production_min.AsyncMode=h,reactIs_production_min.ConcurrentMode=f,reactIs_production_min.ContextConsumer=d,reactIs_production_min.ContextProvider=u,reactIs_production_min.Element=o,reactIs_production_min.ForwardRef=g,reactIs_production_min.Fragment=a,reactIs_production_min.Lazy=_,reactIs_production_min.Memo=b,reactIs_production_min.Portal=n,reactIs_production_min.Profiler=c,reactIs_production_min.StrictMode=l,reactIs_production_min.Suspense=p,reactIs_production_min.isAsyncMode=function(A){return R(A)||T(A)===h},reactIs_production_min.isConcurrentMode=R,reactIs_production_min.isContextConsumer=function(A){return T(A)===d},reactIs_production_min.isContextProvider=function(A){return T(A)===u},reactIs_production_min.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===o},reactIs_production_min.isForwardRef=function(A){return T(A)===g},reactIs_production_min.isFragment=function(A){return T(A)===a},reactIs_production_min.isLazy=function(A){return T(A)===_},reactIs_production_min.isMemo=function(A){return T(A)===b},reactIs_production_min.isPortal=function(A){return T(A)===n},reactIs_production_min.isProfiler=function(A){return T(A)===c},reactIs_production_min.isStrictMode=function(A){return T(A)===l},reactIs_production_min.isSuspense=function(A){return T(A)===p},reactIs_production_min.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===a||A===f||A===c||A===l||A===p||A===v||typeof A=="object"&&A!==null&&(A.$$typeof===_||A.$$typeof===b||A.$$typeof===u||A.$$typeof===d||A.$$typeof===g||A.$$typeof===x||A.$$typeof===S||A.$$typeof===C||A.$$typeof===w)},reactIs_production_min.typeOf=T,reactIs_production_min}var reactIs_development={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_development;function requireReactIs_development(){return hasRequiredReactIs_development||(hasRequiredReactIs_development=1,process.env.NODE_ENV!=="production"&&function(){var s=typeof Symbol=="function"&&Symbol.for,o=s?Symbol.for("react.element"):60103,n=s?Symbol.for("react.portal"):60106,a=s?Symbol.for("react.fragment"):60107,l=s?Symbol.for("react.strict_mode"):60108,c=s?Symbol.for("react.profiler"):60114,u=s?Symbol.for("react.provider"):60109,d=s?Symbol.for("react.context"):60110,h=s?Symbol.for("react.async_mode"):60111,f=s?Symbol.for("react.concurrent_mode"):60111,g=s?Symbol.for("react.forward_ref"):60112,p=s?Symbol.for("react.suspense"):60113,v=s?Symbol.for("react.suspense_list"):60120,b=s?Symbol.for("react.memo"):60115,_=s?Symbol.for("react.lazy"):60116,w=s?Symbol.for("react.block"):60121,x=s?Symbol.for("react.fundamental"):60117,S=s?Symbol.for("react.responder"):60118,C=s?Symbol.for("react.scope"):60119;function T(we){return typeof we=="string"||typeof we=="function"||we===a||we===f||we===c||we===l||we===p||we===v||typeof we=="object"&&we!==null&&(we.$$typeof===_||we.$$typeof===b||we.$$typeof===u||we.$$typeof===d||we.$$typeof===g||we.$$typeof===x||we.$$typeof===S||we.$$typeof===C||we.$$typeof===w)}function R(we){if(typeof we=="object"&&we!==null){var Ve=we.$$typeof;switch(Ve){case o:var _e=we.type;switch(_e){case h:case f:case a:case c:case l:case p:return _e;default:var ve=_e&&_e.$$typeof;switch(ve){case d:case g:case _:case b:case u:return ve;default:return Ve}}case n:return Ve}}}var A=h,M=f,D=d,O=u,H=o,j=g,q=a,Y=_,ee=b,te=n,re=c,ae=l,ue=p,ce=!1;function le(we){return ce||(ce=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ie(we)||R(we)===h}function ie(we){return R(we)===f}function de(we){return R(we)===d}function ge(we){return R(we)===u}function pe(we){return typeof we=="object"&&we!==null&&we.$$typeof===o}function be(we){return R(we)===g}function Se(we){return R(we)===a}function Le(we){return R(we)===_}function De(we){return R(we)===b}function ke(we){return R(we)===n}function Te(we){return R(we)===c}function Ae(we){return R(we)===l}function Ee(we){return R(we)===p}reactIs_development.AsyncMode=A,reactIs_development.ConcurrentMode=M,reactIs_development.ContextConsumer=D,reactIs_development.ContextProvider=O,reactIs_development.Element=H,reactIs_development.ForwardRef=j,reactIs_development.Fragment=q,reactIs_development.Lazy=Y,reactIs_development.Memo=ee,reactIs_development.Portal=te,reactIs_development.Profiler=re,reactIs_development.StrictMode=ae,reactIs_development.Suspense=ue,reactIs_development.isAsyncMode=le,reactIs_development.isConcurrentMode=ie,reactIs_development.isContextConsumer=de,reactIs_development.isContextProvider=ge,reactIs_development.isElement=pe,reactIs_development.isForwardRef=be,reactIs_development.isFragment=Se,reactIs_development.isLazy=Le,reactIs_development.isMemo=De,reactIs_development.isPortal=ke,reactIs_development.isProfiler=Te,reactIs_development.isStrictMode=Ae,reactIs_development.isSuspense=Ee,reactIs_development.isValidElementType=T,reactIs_development.typeOf=R}()),reactIs_development}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,process.env.NODE_ENV==="production"?reactIs.exports=requireReactIs_production_min():reactIs.exports=requireReactIs_development()),reactIs.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var objectAssign,hasRequiredObjectAssign;function requireObjectAssign(){if(hasRequiredObjectAssign)return objectAssign;hasRequiredObjectAssign=1;var s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}function l(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var u={},d=0;d<10;d++)u["_"+String.fromCharCode(d)]=d;var h=Object.getOwnPropertyNames(u).map(function(g){return u[g]});if(h.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(g){f[g]=g}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return objectAssign=l()?Object.assign:function(c,u){for(var d,h=a(c),f,g=1;g<arguments.length;g++){d=Object(arguments[g]);for(var p in d)o.call(d,p)&&(h[p]=d[p]);if(s){f=s(d);for(var v=0;v<f.length;v++)n.call(d,f[v])&&(h[f[v]]=d[f[v]])}}return h},objectAssign}var ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var s="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=s,ReactPropTypesSecret_1}var has$3,hasRequiredHas;function requireHas(){return hasRequiredHas||(hasRequiredHas=1,has$3=Function.call.bind(Object.prototype.hasOwnProperty)),has$3}var checkPropTypes_1,hasRequiredCheckPropTypes;function requireCheckPropTypes(){if(hasRequiredCheckPropTypes)return checkPropTypes_1;hasRequiredCheckPropTypes=1;var s=function(){};if(process.env.NODE_ENV!=="production"){var o=requireReactPropTypesSecret(),n={},a=requireHas();s=function(c){var u="Warning: "+c;typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}}}function l(c,u,d,h,f){if(process.env.NODE_ENV!=="production"){for(var g in c)if(a(c,g)){var p;try{if(typeof c[g]!="function"){var v=Error((h||"React class")+": "+d+" type `"+g+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[g]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw v.name="Invariant Violation",v}p=c[g](u,g,h,d,null,o)}catch(_){p=_}if(p&&!(p instanceof Error)&&s((h||"React class")+": type specification of "+d+" `"+g+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof p+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),p instanceof Error&&!(p.message in n)){n[p.message]=!0;var b=f?f():"";s("Failed "+d+" type: "+p.message+(b??""))}}}}return l.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(n={})},checkPropTypes_1=l,checkPropTypes_1}var factoryWithTypeCheckers,hasRequiredFactoryWithTypeCheckers;function requireFactoryWithTypeCheckers(){if(hasRequiredFactoryWithTypeCheckers)return factoryWithTypeCheckers;hasRequiredFactoryWithTypeCheckers=1;var s=requireReactIs(),o=requireObjectAssign(),n=requireReactPropTypesSecret(),a=requireHas(),l=requireCheckPropTypes(),c=function(){};process.env.NODE_ENV!=="production"&&(c=function(d){var h="Warning: "+d;typeof console<"u"&&console.error(h);try{throw new Error(h)}catch{}});function u(){return null}return factoryWithTypeCheckers=function(d,h){var f=typeof Symbol=="function"&&Symbol.iterator,g="@@iterator";function p(ie){var de=ie&&(f&&ie[f]||ie[g]);if(typeof de=="function")return de}var v="<<anonymous>>",b={array:S("array"),bigint:S("bigint"),bool:S("boolean"),func:S("function"),number:S("number"),object:S("object"),string:S("string"),symbol:S("symbol"),any:C(),arrayOf:T,element:R(),elementType:A(),instanceOf:M,node:j(),objectOf:O,oneOf:D,oneOfType:H,shape:Y,exact:ee};function _(ie,de){return ie===de?ie!==0||1/ie===1/de:ie!==ie&&de!==de}function w(ie,de){this.message=ie,this.data=de&&typeof de=="object"?de:{},this.stack=""}w.prototype=Error.prototype;function x(ie){if(process.env.NODE_ENV!=="production")var de={},ge=0;function pe(Se,Le,De,ke,Te,Ae,Ee){if(ke=ke||v,Ae=Ae||De,Ee!==n){if(h){var we=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw we.name="Invariant Violation",we}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var Ve=ke+":"+De;!de[Ve]&&ge<3&&(c("You are manually calling a React.PropTypes validation function for the `"+Ae+"` prop on `"+ke+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),de[Ve]=!0,ge++)}}return Le[De]==null?Se?Le[De]===null?new w("The "+Te+" `"+Ae+"` is marked as required "+("in `"+ke+"`, but its value is `null`.")):new w("The "+Te+" `"+Ae+"` is marked as required in "+("`"+ke+"`, but its value is `undefined`.")):null:ie(Le,De,ke,Te,Ae)}var be=pe.bind(null,!1);return be.isRequired=pe.bind(null,!0),be}function S(ie){function de(ge,pe,be,Se,Le,De){var ke=ge[pe],Te=ae(ke);if(Te!==ie){var Ae=ue(ke);return new w("Invalid "+Se+" `"+Le+"` of type "+("`"+Ae+"` supplied to `"+be+"`, expected ")+("`"+ie+"`."),{expectedType:ie})}return null}return x(de)}function C(){return x(u)}function T(ie){function de(ge,pe,be,Se,Le){if(typeof ie!="function")return new w("Property `"+Le+"` of component `"+be+"` has invalid PropType notation inside arrayOf.");var De=ge[pe];if(!Array.isArray(De)){var ke=ae(De);return new w("Invalid "+Se+" `"+Le+"` of type "+("`"+ke+"` supplied to `"+be+"`, expected an array."))}for(var Te=0;Te<De.length;Te++){var Ae=ie(De,Te,be,Se,Le+"["+Te+"]",n);if(Ae instanceof Error)return Ae}return null}return x(de)}function R(){function ie(de,ge,pe,be,Se){var Le=de[ge];if(!d(Le)){var De=ae(Le);return new w("Invalid "+be+" `"+Se+"` of type "+("`"+De+"` supplied to `"+pe+"`, expected a single ReactElement."))}return null}return x(ie)}function A(){function ie(de,ge,pe,be,Se){var Le=de[ge];if(!s.isValidElementType(Le)){var De=ae(Le);return new w("Invalid "+be+" `"+Se+"` of type "+("`"+De+"` supplied to `"+pe+"`, expected a single ReactElement type."))}return null}return x(ie)}function M(ie){function de(ge,pe,be,Se,Le){if(!(ge[pe]instanceof ie)){var De=ie.name||v,ke=le(ge[pe]);return new w("Invalid "+Se+" `"+Le+"` of type "+("`"+ke+"` supplied to `"+be+"`, expected ")+("instance of `"+De+"`."))}return null}return x(de)}function D(ie){if(!Array.isArray(ie))return process.env.NODE_ENV!=="production"&&(arguments.length>1?c("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):c("Invalid argument supplied to oneOf, expected an array.")),u;function de(ge,pe,be,Se,Le){for(var De=ge[pe],ke=0;ke<ie.length;ke++)if(_(De,ie[ke]))return null;var Te=JSON.stringify(ie,function(Ee,we){var Ve=ue(we);return Ve==="symbol"?String(we):we});return new w("Invalid "+Se+" `"+Le+"` of value `"+String(De)+"` "+("supplied to `"+be+"`, expected one of "+Te+"."))}return x(de)}function O(ie){function de(ge,pe,be,Se,Le){if(typeof ie!="function")return new w("Property `"+Le+"` of component `"+be+"` has invalid PropType notation inside objectOf.");var De=ge[pe],ke=ae(De);if(ke!=="object")return new w("Invalid "+Se+" `"+Le+"` of type "+("`"+ke+"` supplied to `"+be+"`, expected an object."));for(var Te in De)if(a(De,Te)){var Ae=ie(De,Te,be,Se,Le+"."+Te,n);if(Ae instanceof Error)return Ae}return null}return x(de)}function H(ie){if(!Array.isArray(ie))return process.env.NODE_ENV!=="production"&&c("Invalid argument supplied to oneOfType, expected an instance of array."),u;for(var de=0;de<ie.length;de++){var ge=ie[de];if(typeof ge!="function")return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+ce(ge)+" at index "+de+"."),u}function pe(be,Se,Le,De,ke){for(var Te=[],Ae=0;Ae<ie.length;Ae++){var Ee=ie[Ae],we=Ee(be,Se,Le,De,ke,n);if(we==null)return null;we.data&&a(we.data,"expectedType")&&Te.push(we.data.expectedType)}var Ve=Te.length>0?", expected one of type ["+Te.join(", ")+"]":"";return new w("Invalid "+De+" `"+ke+"` supplied to "+("`"+Le+"`"+Ve+"."))}return x(pe)}function j(){function ie(de,ge,pe,be,Se){return te(de[ge])?null:new w("Invalid "+be+" `"+Se+"` supplied to "+("`"+pe+"`, expected a ReactNode."))}return x(ie)}function q(ie,de,ge,pe,be){return new w((ie||"React class")+": "+de+" type `"+ge+"."+pe+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+be+"`.")}function Y(ie){function de(ge,pe,be,Se,Le){var De=ge[pe],ke=ae(De);if(ke!=="object")return new w("Invalid "+Se+" `"+Le+"` of type `"+ke+"` "+("supplied to `"+be+"`, expected `object`."));for(var Te in ie){var Ae=ie[Te];if(typeof Ae!="function")return q(be,Se,Le,Te,ue(Ae));var Ee=Ae(De,Te,be,Se,Le+"."+Te,n);if(Ee)return Ee}return null}return x(de)}function ee(ie){function de(ge,pe,be,Se,Le){var De=ge[pe],ke=ae(De);if(ke!=="object")return new w("Invalid "+Se+" `"+Le+"` of type `"+ke+"` "+("supplied to `"+be+"`, expected `object`."));var Te=o({},ge[pe],ie);for(var Ae in Te){var Ee=ie[Ae];if(a(ie,Ae)&&typeof Ee!="function")return q(be,Se,Le,Ae,ue(Ee));if(!Ee)return new w("Invalid "+Se+" `"+Le+"` key `"+Ae+"` supplied to `"+be+"`.\nBad object: "+JSON.stringify(ge[pe],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ie),null,"  "));var we=Ee(De,Ae,be,Se,Le+"."+Ae,n);if(we)return we}return null}return x(de)}function te(ie){switch(typeof ie){case"number":case"string":case"undefined":return!0;case"boolean":return!ie;case"object":if(Array.isArray(ie))return ie.every(te);if(ie===null||d(ie))return!0;var de=p(ie);if(de){var ge=de.call(ie),pe;if(de!==ie.entries){for(;!(pe=ge.next()).done;)if(!te(pe.value))return!1}else for(;!(pe=ge.next()).done;){var be=pe.value;if(be&&!te(be[1]))return!1}}else return!1;return!0;default:return!1}}function re(ie,de){return ie==="symbol"?!0:de?de["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&de instanceof Symbol:!1}function ae(ie){var de=typeof ie;return Array.isArray(ie)?"array":ie instanceof RegExp?"object":re(de,ie)?"symbol":de}function ue(ie){if(typeof ie>"u"||ie===null)return""+ie;var de=ae(ie);if(de==="object"){if(ie instanceof Date)return"date";if(ie instanceof RegExp)return"regexp"}return de}function ce(ie){var de=ue(ie);switch(de){case"array":case"object":return"an "+de;case"boolean":case"date":case"regexp":return"a "+de;default:return de}}function le(ie){return!ie.constructor||!ie.constructor.name?v:ie.constructor.name}return b.checkPropTypes=l,b.resetWarningCache=l.resetWarningCache,b.PropTypes=b,b},factoryWithTypeCheckers}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var s=requireReactPropTypesSecret();function o(){}function n(){}return n.resetWarningCache=o,factoryWithThrowingShims=function(){function a(u,d,h,f,g,p){if(p!==s){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}a.isRequired=a;function l(){return a}var c={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:l,element:a,elementType:a,instanceOf:l,node:a,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:o};return c.PropTypes=c,c},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){if(hasRequiredPropTypes)return propTypes.exports;if(hasRequiredPropTypes=1,process.env.NODE_ENV!=="production"){var s=requireReactIs(),o=!0;propTypes.exports=requireFactoryWithTypeCheckers()(s.isElement,o)}else propTypes.exports=requireFactoryWithThrowingShims()();return propTypes.exports}var dist$3=dist$4.exports,hasRequiredDist$1;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(s,o){(function(a,l){s.exports=l(requirePropTypes(),React)})(dist$3,function(n,a){return function(l){var c={};function u(d){if(c[d])return c[d].exports;var h=c[d]={i:d,l:!1,exports:{}};return l[d].call(h.exports,h,h.exports,u),h.l=!0,h.exports}return u.m=l,u.c=c,u.d=function(d,h,f){u.o(d,h)||Object.defineProperty(d,h,{enumerable:!0,get:f})},u.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},u.t=function(d,h){if(1&h&&(d=u(d)),8&h||4&h&&typeof d=="object"&&d&&d.__esModule)return d;var f=Object.create(null);if(u.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:d}),2&h&&typeof d!="string")for(var g in d)u.d(f,g,(function(p){return d[p]}).bind(null,g));return f},u.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return u.d(h,"a",h),h},u.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)},u.p="",u(u.s=5)}([function(l,c,u){function d(p,v){for(var b=0;b<v.length;b++){var _=v[b];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(p,_.key,_)}}u.d(c,"a",function(){return h}),u.d(c,"b",function(){return f}),u.d(c,"c",function(){return g});var h=function(){function p(){(function(b,_){if(!(b instanceof _))throw new TypeError("Cannot call a class as a function")})(this,p),typeof window<"u"&&(this.image=new Image,this.resolve=null,this.video=document.createElement("video"),this.events())}return function(b,_,w){return _&&d(b.prototype,_),b}(p,[{key:"events",value:function(){var b=this;this.video.addEventListener("loadeddata",function(){return b.resolve&&b.resolve(!0)}),this.video.addEventListener("loadeddata",function(){return b.resolve&&b.resolve(!1)}),this.image.onload=function(){return b.resolve&&b.resolve(!0)},this.image.onerror=function(){return b.resolve&&b.resolve(!1)}}},{key:"load",value:function(b){var _=this;return new Promise(function(w){b||w(!0),_.resolve=w,_.loading=!0,_.ended=!1,b.match(/\.(mp4|webm)/i)&&_.video.setAttribute("src",b),b.match(/\.(png|jp(e)?g|gif|webp)/i)&&(_.image.src=b,(_.image.width>0||_.image.height>0)&&w(!0))})}},{key:"loadImage",value:function(b){var _=this,w=new Image,x=!1;w.onload=function(){x||_.pumpLoaded()},w.onerror=function(){x||_.pumpLoaded()},w.src=b,x===!1&&(w.width>0||w.height>0)&&(x=!0,this.pumpLoaded())}},{key:"loadVideo",value:function(b){var _=this,w=document.createElement("video");w.addEventListener("loadeddata",function(){_.pumpLoaded()}),w.addEventListener("error",function(){_.pumpLoaded()}),w.setAttribute("src",b)}},{key:"pumpLoaded",value:function(){this.loaded+=1,this.loaded===this.toLoad&&this.resolver(!0)}},{key:"startLoad",value:function(b){b.match(/\.(mp4|webm)/i)&&this.loadVideo(b),b.match(/\.(png|jp(e)?g|gif|webp)/i)&&this.loadImage(b)}},{key:"loadMultiple",value:function(b){var _=this;return this.loaded=0,this.toLoad=b.length,new Promise(function(w){_.resolver=w,b.forEach(function(x){_.startLoad(x)})})}}]),p}();function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;if(!v)return p.join(" ").trim();for(var b=[],_=p.length;_--;)v[p[_]]&&b.push(v[p[_]]);return b}function g(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",v=arguments.length>1?arguments[1]:void 0;return v&&v[p]||p}},function(l,c,u){u.d(c,"a",function(){return v}),u.d(c,"b",function(){return b}),u.d(c,"c",function(){return _}),u.d(c,"e",function(){return w}),u.d(c,"d",function(){return x}),u.d(c,"g",function(){return S}),u.d(c,"f",function(){return C});var d=u(0);function h(T){return function(A){if(Array.isArray(A)){for(var M=0,D=new Array(A.length);M<A.length;M++)D[M]=A[M];return D}}(T)||function(A){if(Symbol.iterator in Object(A)||Object.prototype.toString.call(A)==="[object Arguments]")return Array.from(A)}(T)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(T,R){var A=Object.keys(T);if(Object.getOwnPropertySymbols){var M=Object.getOwnPropertySymbols(T);R&&(M=M.filter(function(D){return Object.getOwnPropertyDescriptor(T,D).enumerable})),A.push.apply(A,M)}return A}function g(T){for(var R=1;R<arguments.length;R++){var A=arguments[R]!=null?arguments[R]:{};R%2?f(Object(A),!0).forEach(function(M){p(T,M,A[M])}):Object.getOwnPropertyDescriptors?Object.defineProperties(T,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function(M){Object.defineProperty(T,M,Object.getOwnPropertyDescriptor(A,M))})}return T}function p(T,R,A){return R in T?Object.defineProperty(T,R,{value:A,enumerable:!0,configurable:!0,writable:!0}):T[R]=A,T}var v=function(R,A){typeof A=="string"&&R&&A.split(" ").forEach(function(M){R.classList.add(M)})},b=function(R,A){typeof A=="string"&&R&&A.split(" ").forEach(function(M){R.classList.remove(M)})},_=function(R){return typeof R=="string"&&R.split(" ")[0]||""},w=function(R){var A=Array.isArray(R)?R:[R];if(A.length===1)return A[0];for(var M=g({},A[0]),D=1;D<A.length;D+=1){for(var O in M)A[D][O]&&(M[O]=[M[O],A[D][O]].join(" "));for(var H in A[D])M[H]||(M[H]=A[D][H])}return M};function x(T){var R,A=T.rootElement,M=T.cssModule,D=T.disabled,O=T.organicArrows,H=T.className,j=T.total,q=T.current,Y=T.infinite,ee=T.animation,te=T.fillParent,re=[A];return ee&&re.push("".concat(A,"--").concat(ee)),O===!0&&re.push("".concat(A,"--organic-arrows")),D===!0&&re.push("".concat(A,"--disabled")),te&&re.push("".concat(A,"--fill-parent")),Y===!1&&(q===0&&re.push("".concat(A,"--first")),q===j-1&&re.push("".concat(A,"--last"))),M&&M[A]&&(re=Object(d.b)(re,M)),H&&(R=re).push.apply(R,h(H.split(" "))),re.join(" ").trim().replace(/[\s]+/gi," ")}function S(T){var R=[];return(T.constructor===Array?T:[T]).forEach(function(A){var M=g({},A.props);A.props["data-src"]&&(M.source=A.props["data-src"]),A.props["data-slug"]&&(M.slug=A.props["data-slug"]),R.push(M)}),R}function C(T,R){return{boxA:Object(d.c)("".concat(T,"__boxA"),R),boxB:Object(d.c)("".concat(T,"__boxB"),R),box:Object(d.c)("".concat(T,"__box"),R),container:Object(d.c)("".concat(T,"__container"),R),wrapper:Object(d.c)("".concat(T,"__wrapper"),R),bar:Object(d.c)("".concat(T,"__bar"),R),barActive:Object(d.c)("".concat(T,"__bar--active"),R),barEnd:Object(d.c)("".concat(T,"__bar--end"),R),content:Object(d.c)("".concat(T,"__content"),R),contentStatic:Object(d.c)("".concat(T,"__content--static"),R),contentMoveLeft:Object(d.c)("".concat(T,"__content--moveLeft"),R),contentMoveRight:Object(d.c)("".concat(T,"__content--moveRight"),R),controlsHidden:Object(d.c)("".concat(T,"__controls--hidden"),R),controlsActive:Object(d.c)("".concat(T,"__controls--active"),R),animated:Object(d.c)("".concat(T,"--animated"),R),animatedMobile:Object(d.c)("".concat(T,"--animated-mobile"),R),contentExit:Object(d.c)("".concat(T,"__content--exit"),R),exit:Object(d.c)("".concat(T,"--exit"),R),active:Object(d.c)("".concat(T,"--active"),R),moveLeft:Object(d.c)("".concat(T,"--moveLeft"),R),moveRight:Object(d.c)("".concat(T,"--moveRight"),R),startUp:Object(d.c)("".concat(T,"__startUp"),R),bulletsLoading:Object(d.c)("".concat(T,"__bullets--loading"),R)}}},function(l,c){l.exports=n},function(l,c){l.exports=a},function(l,c,u){l.exports=function(d){var h={};function f(g){if(h[g])return h[g].exports;var p=h[g]={i:g,l:!1,exports:{}};return d[g].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return f.m=d,f.c=h,f.d=function(g,p,v){f.o(g,p)||Object.defineProperty(g,p,{enumerable:!0,get:v})},f.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},f.t=function(g,p){if(1&p&&(g=f(g)),8&p||4&p&&typeof g=="object"&&g&&g.__esModule)return g;var v=Object.create(null);if(f.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:g}),2&p&&typeof g!="string")for(var b in g)f.d(v,b,(function(_){return g[_]}).bind(null,b));return v},f.n=function(g){var p=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(p,"a",p),p},f.o=function(g,p){return Object.prototype.hasOwnProperty.call(g,p)},f.p="",f(f.s=0)}([function(d,h,f){function g(v,b){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},w=_.tolerance,x=w===void 0?0:w,S=_.propertyName;return new Promise(function(C){if(v){var T=null,R=b.charAt(0).toUpperCase()+b.slice(1),A=0;v.style["Webkit"+R]!==void 0&&(T="webkit"+R+"End"),v.style.OTransition!==void 0&&(T="o"+b+"End"),v.style[b]!==void 0&&(T=b+"end"),v.clearCssEndEvent&&v.clearCssEndEvent(),v.clearCssEndEvent=function(){v.removeEventListener(T,M)},v.addEventListener(T,M)}else C(!1);function M(D){if((D.srcElement||D.target)===v){if(A>=x){if(S&&S!==D.propertyName)return;v.removeEventListener(T,M),C(D)}A+=1}}})}function p(v){window&&window.requestAnimationFrame(function(){window.requestAnimationFrame(v)})}Object.defineProperty(h,"__esModule",{value:!0}),h.setCssEndEvent=g,h.beforeCssLayout=function(v){window&&window.requestAnimationFrame(v)},h.beforeNextCssLayout=p,h.beforeFutureCssLayout=function(v,b){(function _(w,x){window&&w&&Number.isInteger(w)&&w>0?window.requestAnimationFrame(function(){_(w-1,x)}):x()})(v+1,b)},h.onceNextCssLayout=function(){return new Promise(function(v){p(v)})},h.onceTransitionEnd=function(v){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(_){g(v,"transition",b).then(_)})},h.onceAnimationEnd=function(v){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(_){g(v,"animation",b).then(_)})}}])},function(l,c,u){l.exports=u(13)},,,,,,,,function(l,c,u){u.r(c);var d=u(3),h=u.n(d),f=u(2),g=u.n(f),p=u(4),v=u(0),b=u(1);function _(_e){return(_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(_e)}function w(_e,ve){for(var fe=0;fe<ve.length;fe++){var ne=ve[fe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(_e,ne.key,ne)}}function x(_e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(_e)}function S(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function C(_e,ve){return(C=Object.setPrototypeOf||function(ne,oe){return ne.__proto__=oe,ne})(_e,ve)}function T(_e,ve,fe){return ve in _e?Object.defineProperty(_e,ve,{value:fe,enumerable:!0,configurable:!0,writable:!0}):_e[ve]=fe,_e}var R=function(_e){function ve(fe){var ne;return function(xe,Ce){if(!(xe instanceof Ce))throw new TypeError("Cannot call a class as a function")}(this,ve),ne=function(xe,Ce){return!Ce||_(Ce)!=="object"&&typeof Ce!="function"?S(xe):Ce}(this,x(ve).call(this,fe)),T(S(ne),"bulletClick",function(oe){var xe=oe.currentTarget;xe.classList.add(Object(v.c)("".concat(ne.rootElement,"__bullets--loading"),ne.props.cssModule));var Ce=parseInt(xe.getAttribute("data-index"),10),Oe=!(ne.props.selected>Ce);ne.props.onClick({index:Ce,direction:Oe})}),ne.rootElement=fe.rootElement,ne}return function(ne,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(oe&&oe.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),oe&&C(ne,oe)}(ve,_e),function(ne,oe,xe){return oe&&w(ne.prototype,oe),ne}(ve,[{key:"renderBullets",value:function(){var ne=this,oe=this.props,xe=oe.cssModule,Ce=oe.selected,Oe=oe.media;return(Oe===void 0?[]:Oe).map(function(se,me){var ye=me===Ce?Object(v.c)("".concat(ne.rootElement,"__bullets--active"),xe):null;return h.a.createElement("button",{key:"bullet-".concat(me),"data-index":me,onClick:ne.bulletClick,className:ye},me)})}},{key:"render",value:function(){var ne=this.props,oe=ne.cssModule,xe=ne.rootElement;return h.a.createElement("nav",{className:Object(v.c)("".concat(xe,"__bullets"),oe)},this.renderBullets())}}]),ve}(h.a.Component);function A(_e){return(A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(_e)}function M(_e,ve){for(var fe=0;fe<ve.length;fe++){var ne=ve[fe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(_e,ne.key,ne)}}function D(_e,ve){return!ve||A(ve)!=="object"&&typeof ve!="function"?function(ne){if(ne===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne}(_e):ve}function O(_e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(_e)}function H(_e,ve){return(H=Object.setPrototypeOf||function(ne,oe){return ne.__proto__=oe,ne})(_e,ve)}function j(_e,ve,fe){return ve in _e?Object.defineProperty(_e,ve,{value:fe,enumerable:!0,configurable:!0,writable:!0}):_e[ve]=fe,_e}T(R,"propTypes",{cssModule:g.a.object,rootElement:g.a.string.isRequired,media:g.a.array,onClick:g.a.func,selected:g.a.number}),T(R,"defaultProps",{cssModule:null,selected:0,media:[],onClick:function(){}});var q=function(_e){function ve(){return function(ne,oe){if(!(ne instanceof oe))throw new TypeError("Cannot call a class as a function")}(this,ve),D(this,O(ve).apply(this,arguments))}return function(ne,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(oe&&oe.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),oe&&H(ne,oe)}(ve,_e),function(ne,oe,xe){return oe&&M(ne.prototype,oe),ne}(ve,[{key:"componentDidMount",value:function(){this.props.onMount({element:this.controls,next:this.next,prev:this.prev})}},{key:"render",value:function(){var ne=this,oe=this.props,xe=oe.rootElement,Ce=oe.cssModule,Oe=oe.organicArrows,se=oe.buttonContentLeft,me=oe.buttonContentRight,ye=oe.onNext,Me=oe.onPrev;return h.a.createElement("div",{ref:function(Pe){ne.controls=Pe,ne.props.onMount({element:ne.controls,next:ne.next||null,prev:ne.prev||null})},className:[Object(v.c)("".concat(xe,"__controls"),Ce),Object(v.c)("".concat(xe,"__controls--hidden"),Ce)].join(" ")},h.a.createElement("button",{ref:function(Pe){ne.next=Pe},"aria-label":"next",className:Object(v.c)("".concat(xe,"__next"),Ce),onClick:ye},Oe?h.a.createElement("span",{className:Object(v.c)("".concat(xe,"__controls__arrow-right"),Ce)}):me),h.a.createElement("button",{ref:function(Pe){ne.prev=Pe},"aria-label":"previous",className:Object(v.c)("".concat(xe,"__prev"),Ce),onClick:Me},Oe?h.a.createElement("span",{className:Object(v.c)("".concat(xe,"__controls__arrow-left"),Ce)}):se))}}]),ve}(h.a.Component);function Y(_e){return(Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(_e)}function ee(){return(ee=Object.assign||function(_e){for(var ve=1;ve<arguments.length;ve++){var fe=arguments[ve];for(var ne in fe)Object.prototype.hasOwnProperty.call(fe,ne)&&(_e[ne]=fe[ne])}return _e}).apply(this,arguments)}function te(_e,ve){if(_e==null)return{};var fe,ne,oe=function(Oe,se){if(Oe==null)return{};var me,ye,Me={},Ie=Object.keys(Oe);for(ye=0;ye<Ie.length;ye++)me=Ie[ye],se.indexOf(me)>=0||(Me[me]=Oe[me]);return Me}(_e,ve);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols(_e);for(ne=0;ne<xe.length;ne++)fe=xe[ne],ve.indexOf(fe)>=0||Object.prototype.propertyIsEnumerable.call(_e,fe)&&(oe[fe]=_e[fe])}return oe}function re(_e,ve){for(var fe=0;fe<ve.length;fe++){var ne=ve[fe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(_e,ne.key,ne)}}function ae(_e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(_e)}function ue(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function ce(_e,ve){return(ce=Object.setPrototypeOf||function(ne,oe){return ne.__proto__=oe,ne})(_e,ve)}function le(_e,ve,fe){return ve in _e?Object.defineProperty(_e,ve,{value:fe,enumerable:!0,configurable:!0,writable:!0}):_e[ve]=fe,_e}j(q,"propTypes",{cssModule:g.a.object,rootElement:g.a.string.isRequired,onMount:g.a.func.isRequired,onNext:g.a.func.isRequired,onPrev:g.a.func.isRequired,buttonContentLeft:g.a.node,buttonContentRight:g.a.node,organicArrows:g.a.bool}),j(q,"defaultProps",{cssModule:null,organicArrows:!0,buttonContentLeft:null,buttonContentRight:null});var ie=function(_e){function ve(){var fe,ne;(function(se,me){if(!(se instanceof me))throw new TypeError("Cannot call a class as a function")})(this,ve);for(var oe=arguments.length,xe=new Array(oe),Ce=0;Ce<oe;Ce++)xe[Ce]=arguments[Ce];return ne=function(se,me){return!me||Y(me)!=="object"&&typeof me!="function"?ue(se):me}(this,(fe=ae(ve)).call.apply(fe,[this].concat(xe))),le(ue(ne),"state",{}),ne}return function(ne,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(oe&&oe.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),oe&&ce(ne,oe)}(ve,_e),function(ne,oe,xe){return oe&&re(ne.prototype,oe),ne}(ve,[{key:"render",value:function(){var ne=this.props,oe=ne.media,xe=ne.className,Ce=oe.source,Oe=oe.children,se=oe.style,me=(oe.loader,oe["data-src"],oe["data-alt"],oe.className),ye=(oe.onTransitionEnd,oe.onTransitionStartOut,oe.onTransitionStartIn,oe.onTransitionRequestOut,oe.onTransitionRequestIn,te(oe,["source","children","style","loader","data-src","data-alt","className","onTransitionEnd","onTransitionStartOut","onTransitionStartIn","onTransitionRequestOut","onTransitionRequestIn"])),Me=null;return Ce&&(Me=Ce.match(/\.(mp4|webm)/)?h.a.createElement("video",{title:oe.title||oe["data-title"],src:Ce,type:"video/mp4",controls:!0}):h.a.createElement("img",{alt:oe.alt||oe.title||oe["data-alt"]||null,src:Ce})),h.a.createElement("div",ee({className:xe,style:se||null},ye),Me,Oe&&h.a.createElement("div",{className:me},oe.children))}}]),ve}(h.a.Component);function de(_e){return(de=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe})(_e)}function ge(){return(ge=Object.assign||function(_e){for(var ve=1;ve<arguments.length;ve++){var fe=arguments[ve];for(var ne in fe)Object.prototype.hasOwnProperty.call(fe,ne)&&(_e[ne]=fe[ne])}return _e}).apply(this,arguments)}function pe(_e){return function(fe){if(Array.isArray(fe)){for(var ne=0,oe=new Array(fe.length);ne<fe.length;ne++)oe[ne]=fe[ne];return oe}}(_e)||function(fe){if(Symbol.iterator in Object(fe)||Object.prototype.toString.call(fe)==="[object Arguments]")return Array.from(fe)}(_e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function be(_e,ve){var fe=Object.keys(_e);if(Object.getOwnPropertySymbols){var ne=Object.getOwnPropertySymbols(_e);ve&&(ne=ne.filter(function(oe){return Object.getOwnPropertyDescriptor(_e,oe).enumerable})),fe.push.apply(fe,ne)}return fe}function Se(_e){for(var ve=1;ve<arguments.length;ve++){var fe=arguments[ve]!=null?arguments[ve]:{};ve%2?be(Object(fe),!0).forEach(function(ne){Ae(_e,ne,fe[ne])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(fe)):be(Object(fe)).forEach(function(ne){Object.defineProperty(_e,ne,Object.getOwnPropertyDescriptor(fe,ne))})}return _e}function Le(_e,ve){for(var fe=0;fe<ve.length;fe++){var ne=ve[fe];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(_e,ne.key,ne)}}function De(_e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(fe){return fe.__proto__||Object.getPrototypeOf(fe)})(_e)}function ke(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function Te(_e,ve){return(Te=Object.setPrototypeOf||function(ne,oe){return ne.__proto__=oe,ne})(_e,ve)}function Ae(_e,ve,fe){return ve in _e?Object.defineProperty(_e,ve,{value:fe,enumerable:!0,configurable:!0,writable:!0}):_e[ve]=fe,_e}le(ie,"propTypes",{media:g.a.object.isRequired,className:g.a.string.isRequired});var Ee="awssld",we=new v.a,Ve=function(_e){function ve(fe){var ne;return function(xe,Ce){if(!(xe instanceof Ce))throw new TypeError("Cannot call a class as a function")}(this,ve),ne=function(xe,Ce){return!Ce||de(Ce)!=="object"&&typeof Ce!="function"?ke(xe):Ce}(this,De(ve).call(this,fe)),Ae(ke(ne),"clickNext",function(){var oe=ne.index===null?0:ne.index+1;ne.onTransitionRequest("next",oe),ne.goTo({index:oe,direction:!0})}),Ae(ke(ne),"clickPrev",function(){var oe=ne.index-1;ne.onTransitionRequest("prev",oe),ne.goTo({index:oe,direction:!1})}),Ae(ke(ne),"touchStart",function(oe){if(!ne.animating&&ne.index!==null){var xe=oe.nativeEvent;ne.touchStartPoint=xe.touches[0].clientX}}),Ae(ke(ne),"touchMove",function(oe){if(!ne.animating&&ne.touchStartPoint){var xe=oe.nativeEvent,Ce=xe.touches[0].clientX-ne.touchStartPoint,Oe=ne[ne.active],se=ne[ne.loader],me=!(Ce>0),ye=Math.abs(Ce);ne.touchEnabled!==!1?ye>=10&&(ne.loading===!1?ne.goTo({index:me?ne.index+1:ne.index-1,direction:me,touch:!0}):ne.direction===!0?(Ce+=10,Math.abs(Ce)>Oe.offsetWidth?Ce=-Oe.offsetWidth:Ce>0&&(Ce=0),Oe.style.transform="translate3d(".concat(Ce,"px, 0, 0)"),se.style.transform="translate3d(calc(100% + ".concat(Ce,"px), 0, 0)")):(Ce-=10,Math.abs(Ce)>Oe.offsetWidth?Ce=Oe.offsetWidth:Ce<0&&(Ce=0),Oe.style.transform="translate3d(".concat(Ce,"px, 0, 0)"),se.style.transform="translate3d(calc(-100% + ".concat(Ce,"px), 0, 0)"))):ye>20&&(ne.touchEnabled=!0,ne.touchStartPoint=xe.touches[0].clientX)}}),Ae(ke(ne),"touchEnd",function(){!ne.animating&&ne.touchStartPoint&&ne.loading&&(ne.touchStartPoint=null,ne.animating=!0,ne.touchEnabled=!1,ne.animateMobileEnd(function(){ne.index=ne.nextIndex,ne.setState({index:ne.index}),ne.onTransitionEnd(),ne.animating=!1,ne.loading=!1,ne.unchargeIndex()}))}),Ae(ke(ne),"bulletClick",function(oe){var xe=oe.currentTarget,Ce=parseInt(xe.getAttribute("data-index"),10);ne.goTo({index:Ce,direction:!(ne.index>Ce)},function(){Object(p.onceNextCssLayout)().then(function(){Object(b.a)(xe,ne.classNames.bulletsLoading)})})}),ne.rootElement=fe.rootElement||Ee,ne.boxA=null,ne.boxB=null,ne.loaded=[],ne.active="boxA",ne.loader="boxB",ne.nextIndex=null,ne.loading=!1,ne.media=null,ne.started=!1,ne.touchEnabled=!1,ne.setupStartup(fe),ne}return function(ne,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function");ne.prototype=Object.create(oe&&oe.prototype,{constructor:{value:ne,writable:!0,configurable:!0}}),oe&&Te(ne,oe)}(ve,_e),function(ne,oe,xe){return oe&&Le(ne.prototype,oe),ne}(ve,[{key:"componentDidMount",value:function(){var ne=this;Object(b.a)(this.boxA,this.classNames.active),this.props.startupScreen&&(this.buttons&&(Object(b.a)(this.buttons.element,this.classNames.controlsHidden),Object(b.a)(this.buttons.element,this.classNames.controlsActive)),this.props.startup===!0&&this.media.length>0&&this.startup()),this.props.onFirstMount&&this.props.onFirstMount(Se({},this.getInfo())),this.buttons&&Object(p.onceNextCssLayout)().then(function(){ne.buttons&&ne.buttons.element&&Object(b.b)(ne.buttons.element,ne.classNames.controlsHidden)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(ne){if(this.checkChildren(ne),this.setupClassNames(Object(b.e)(ne.cssModule)),ne.name===this.props.name)if(ne.startup!==!0||this.started!==!1)if(ne.selected===this.props.selected)this.refreshSlider();else{var oe=this.getIndex(ne.selected),xe=ne.infinite===!0&&oe===0&&this.index===this.media.length-1||!(this.index>oe);this.goTo({index:oe,direction:xe})}else this.startup();else this.resetSlider(ne.selected)}},{key:"onTransitionStart",value:function(){var ne=this.media[this.index],oe=this.media[this.nextIndex],xe=Se({},this.getInfo(),{nextSlide:this[this.loader],nextIndex:this.nextIndex,nextMedia:oe});this.props.onTransitionStart&&this.props.onTransitionStart(xe),ne&&ne.onTransitionStartOut&&ne.onTransitionStartOut(xe),oe&&oe.onTransitionStartIn&&oe.onTransitionStartIn(xe)}},{key:"onTransitionRequest",value:function(ne,oe){var xe=this.media[this.index],Ce=this.checkIndex(oe),Oe=this.media[Ce],se=Se({eventName:ne},this.getInfo(),{nextSlide:null,nextIndex:Ce,nextMedia:Oe});this.props.onTransitionRequest&&this.props.onTransitionRequest(se),xe&&xe.onTransitionRequestOut&&xe.onTransitionRequestOut(se),Oe&&Oe.onTransitionRequestIn&&Oe.onTransitionRequestIn(se)}},{key:"onTransitionEnd",value:function(){var ne=this.media[this.index],oe=Se({},this.getInfo());this.props.onTransitionEnd&&this.props.onTransitionEnd(oe),ne&&ne.onTransitionEnd&&ne.onTransitionEnd(oe)}},{key:"getRootClassName",value:function(){var ne=this.props,oe=ne.animation,xe=ne.className,Ce=ne.cssModule,Oe=ne.disabled,se=ne.fillParent,me=ne.infinite,ye=ne.organicArrows;return Object(b.d)({animation:oe,className:xe,cssModule:Object(b.e)(Ce),current:this.state.index,disabled:Oe,fillParent:se,infinite:me,organicArrows:ye,rootElement:this.rootElement,total:this.media.length})}},{key:"setupStartup",value:function(ne){if(this.checkChildren(ne),this.setupClassNames(Object(b.e)(ne.cssModule)),ne.startupScreen){var oe=this.getIndex(this.props.selected);this.index=null,this.state={index:this.index,boxA:{className:this.classNames.startUp,children:ne.startupScreen},boxB:this.media[oe]||null}}else this.started=!0,this.index=this.getIndex(this.props.selected),this.state={index:this.index,boxA:this.media[this.index]||null,boxB:null}}},{key:"getInfo",value:function(){return{slides:this.media.length,currentIndex:this.index,currentSlide:this[this.active],currentMedia:this.media[this.index],element:this.slider}}},{key:"getProgressBar",value:function(){if(!document)return{};var ne=document.createElement("div");return ne.className=this.classNames.bar,ne}},{key:"setupClassNames",value:function(ne){this.classNames=Object(b.f)(this.rootElement,ne)}},{key:"getIndex",value:function(ne){var oe=0;return typeof ne=="number"?ne:(typeof ne=="string"&&this.media.forEach(function(xe,Ce){xe.slug===ne&&(oe=Ce)}),oe)}},{key:"refreshSlider",value:function(){var ne;if(this.loading!==!0&&this.props.startup!==!1&&this.index!==null){var oe=this.index;this.setState((Ae(ne={index:oe},this.active,this.media[this.getIndex(oe)]),Ae(ne,this.loader,null),ne))}}},{key:"startup",value:function(){var ne=this;this.started=!0,setTimeout(function(){ne.goTo({index:ne.props.selected,direction:!0,touch:!1})},this.props.startupDelay||75)}},{key:"resetSlider",value:function(){var ne,oe=this,xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.index=xe,this.setState((Ae(ne={index:xe},this.active,this.media[this.getIndex(xe)]),Ae(ne,this.loader,null),ne),function(){oe.props.onResetSlider&&oe.props.onResetSlider(Se({},oe.getInfo()))})}},{key:"checkChildren",value:function(ne){ne.children&&(ne.children!==this.props.children||this.props.children&&!this.media)?this.media=Object(b.g)(ne.children):ne.media&&ne.media.length?this.media=ne.media:this.media||(this.media=[])}},{key:"startBarAnimation",value:function(ne){var oe=this,xe=ne.active;return new Promise(function(Ce){oe.bar=oe.getProgressBar(),xe.appendChild(oe.bar),Object(p.onceNextCssLayout)().then(function(){Object(p.onceNextCssLayout)().then(function(){Object(b.a)(oe.bar,oe.classNames.barActive),Ce()})})})}},{key:"endBarAnimation",value:function(ne){var oe=this;this.bar&&Object(p.onceNextCssLayout)().then(function(){Object(p.onceTransitionEnd)(oe.bar).then(function(){ne()}),Object(b.a)(oe.bar,oe.classNames.barEnd)})}},{key:"loadContent",value:function(ne,oe){var xe=this;return new Promise(function(Ce,Oe){if(xe.props.onLoadStart||oe&&oe.onLoadStart){var se=xe.props.onLoadStart||oe&&oe.onLoadStart;return xe.startBarAnimation({active:ne}),void se(Se({next:function(){xe.endBarAnimation(function(){Ce(xe.bar)})},error:Oe},xe.getInfo()))}if(oe&&(oe.source||oe.preload)){var me=oe.preload?oe.preload:oe.source&&[oe.source]||[];return xe.checkLoadedUrls(me)===!0?void Ce(null):(xe.startBarAnimation({active:ne}),void we.loadMultiple(me).then(function(){xe.pushLoaded(me),xe.endBarAnimation(function(){Ce(xe.bar)})}))}Ce(null)})}},{key:"pushLoaded",value:function(ne){this.loaded=[].concat(pe(this.loaded),pe(ne))}},{key:"checkLoadedUrls",value:function(ne){var oe=this,xe=!0;return ne.forEach(function(Ce){oe.loaded.includes(Ce)||(xe=!1)}),xe}},{key:"startAnimationMobile",value:function(){var ne=this.direction,oe=this[this.active],xe=this[this.loader],Ce=ne?this.classNames.contentMoveRight:this.classNames.contentMoveLeft,Oe=ne?this.classNames.contentMoveLeft:this.classNames.contentMoveRight;this.props.onTransitionStart&&this.props.onTransitionStart(Se({},this.getInfo(),{nextSlide:this[this.loader],nextIndex:this.nextIndex,nextMedia:this.media[this.nextIndex]}));var se=oe.querySelector(".".concat(Object(b.c)(this.classNames.content)));Object(b.a)(se,Oe),Object(b.a)(se,this.classNames.contentExit);var me=xe.querySelector(".".concat(Object(b.c)(this.classNames.content)));Object(b.a)(me,Ce),Object(b.a)(me,this.classNames.contentStatic),Object(b.a)(oe,this.classNames.animated),Object(b.a)(xe,this.classNames.animated)}},{key:"animateMobileEnd",value:function(ne){var oe=this,xe=this.direction,Ce=this[this.active],Oe=this[this.loader],se=xe?this.classNames.moveLeft:this.classNames.moveRight,me=xe?this.classNames.contentMoveRight:this.classNames.contentMoveLeft,ye=xe?this.classNames.contentMoveLeft:this.classNames.contentMoveRight,Me=Oe.querySelector(".".concat(Object(b.c)(this.classNames.content))),Ie=Ce.querySelector(".".concat(Object(b.c)(this.classNames.content)));Object(b.b)(Me,this.classNames.contentStatic),Object(b.a)(Oe,this.classNames.animatedMobile),Object(b.a)(Ce,this.classNames.animatedMobile),Object(p.onceNextCssLayout)().then(function(){Oe.style.transform="translate3d(0, 0, 0)",Ce.style.transform="translate3d(".concat(oe.direction?"-":"","100%, 0, 0)"),Object(p.onceTransitionEnd)(Ce).then(function(){oe.loading&&(Object(b.b)(Ce,oe.classNames.animated),Object(b.b)(Oe,oe.classNames.animated),Object(b.a)(Oe,oe.classNames.active),Object(b.b)(Ce,oe.classNames.active),Object(b.b)(Ce,se),Object(b.b)(Oe,oe.classNames.animatedMobile),Object(b.b)(Ce,oe.classNames.animatedMobile),Object(b.b)(Ie,ye),Object(b.b)(Ie,oe.classNames.contentExit),Object(b.b)(Me,me),oe.buttons&&setTimeout(function(){oe.buttons&&Object(b.b)(oe.buttons.element,oe.classNames.controlsActive)},oe.props.controlsReturnDelay),oe.activeArrow&&(Object(b.b)(oe.activeArrow,oe.activeArrowClass),oe.activeArrow=null,oe.activeArrowClass=null),oe.active=oe.active==="boxA"?"boxB":"boxA",oe.loader=oe.active==="boxA"?"boxB":"boxA",ne&&ne())})})}},{key:"runAnimation",value:function(ne){var oe=this,xe=ne.active,Ce=ne.media,Oe=ne.contentExitMoveClass,se=ne.contentEnterMoveClass,me=ne.activeContentElement,ye=ne.loaderContentElement,Me=ne.loader,Ie=ne.loaderPosition,Pe=ne.exitPosition,$e=ne.callback,Be=ne.transitionDelay;this.loadContent(xe,Ce).then(function(Ge){Object(b.a)(me,Oe),Object(b.a)(me,oe.classNames.contentExit),Object(b.a)(ye,se),Object(b.a)(ye,oe.classNames.contentStatic),setTimeout(function(){Object(p.onceNextCssLayout)().then(function(){Object(b.a)(xe,oe.classNames.animated),Object(b.a)(Me,oe.classNames.animated),Object(b.b)(ye,oe.classNames.contentStatic),Object(b.a)(xe,oe.classNames.exit),Object(b.a)(Me,Ie),Object(b.a)(xe,Pe),Object(p.onceAnimationEnd)(xe).then(function(){Object(b.a)(Me,oe.classNames.active),Object(b.b)(Me,Ie),Object(b.b)(Me,oe.classNames.animated),Object(b.b)(xe,oe.classNames.animated),Object(b.b)(xe,oe.classNames.active),Object(b.b)(xe,Pe),Object(b.b)(xe,oe.classNames.exit),Object(b.b)(me,Oe),Object(b.b)(me,oe.classNames.contentExit),Object(b.b)(ye,se),Ge&&xe.removeChild(Ge),oe.buttons&&setTimeout(function(){oe.buttons&&Object(b.b)(oe.buttons.element,oe.classNames.controlsActive)},oe.props.controlsReturnDelay),oe.active=oe.active==="boxA"?"boxB":"boxA",oe.loader=oe.active==="boxA"?"boxB":"boxA";var Ye=!oe.activeArrow;oe.activeArrow&&(Object(p.onceTransitionEnd)(oe.activeArrow,{tolerance:oe.index===null?0:2}).then(function(){oe.releaseTransition()}),Object(b.b)(oe.activeArrow,oe.activeArrowClass),oe.activeArrow=null,oe.activeArrowClass=null),$e({release:Ye})})})},Be)})}},{key:"releaseTransition",value:function(){this.loading=!1}},{key:"startAnimation",value:function(ne,oe,xe){var Ce=this.props.transitionDelay,Oe=this[this.active],se=this[this.loader],me=ne?this.classNames.moveRight:this.classNames.moveLeft,ye=ne?this.classNames.moveLeft:this.classNames.moveRight,Me=ne?this.classNames.contentMoveRight:this.classNames.contentMoveLeft,Ie=ne?this.classNames.contentMoveLeft:this.classNames.contentMoveRight,Pe=Oe.querySelector(".".concat(Object(b.c)(this.classNames.content))),$e=se.querySelector(".".concat(Object(b.c)(this.classNames.content)));Oe.style.removeProperty("transform"),se.style.removeProperty("transform"),this.onTransitionStart();var Be={active:Oe,media:oe,contentExitMoveClass:Ie,contentEnterMoveClass:Me,activeContentElement:Pe,loaderContentElement:$e,loader:se,loaderPosition:me,exitPosition:ye,callback:xe,transitionDelay:Ce};this.runAnimation(Be)}},{key:"goTo",value:function(ne){var oe=this,xe=ne.index,Ce=ne.direction,Oe=ne.touch,se=Oe!==void 0&&Oe,me=this.getIndex(xe);this.loading!==!0&&xe!==this.index?(this.loading=!0,this.direction=Ce,se!==!0?this.activateArrows(Ce,function(){oe.chargeIndex(me,function(ye){oe.renderedLoader=!0,oe.startAnimation(Ce,ye,function(Me){var Ie=Me.release,Pe=Ie===void 0||Ie;oe.index=oe.nextIndex,oe.setState({index:oe.index},function(){oe.onTransitionEnd(),Pe===!0&&oe.releaseTransition()})})})}):this.chargeIndex(me,function(){oe.activateArrows(Ce),oe.startAnimationMobile()})):this.props.onTransitionReject&&this.props.onTransitionReject(Se({},this.getInfo(),{forceTransition:function(){oe.goTo({index:xe,direction:Ce,touch:se})}}))}},{key:"checkIndex",value:function(ne){return ne>this.media.length-1?0:ne<0?this.media.length-1:ne}},{key:"chargeIndex",value:function(ne,oe){this.nextIndex=this.checkIndex(ne);var xe={},Ce=this.media[this.nextIndex];xe[this.loader]=Se({loader:!0},Ce),this.setState(xe,function(){oe(Ce)})}},{key:"unchargeIndex",value:function(){var ne={};ne[this.loader]=null,this.setState(ne,function(){})}},{key:"activateArrows",value:function(ne,oe){var xe=ne?"right":"left",Ce=Object(b.e)(this.props.cssModule),Oe=Object(b.c)(Object(v.c)("".concat(this.rootElement,"__controls__arrow-").concat(xe),Ce));if(this.buttons){var se=ne?this.buttons.next:this.buttons.prev;this.activeArrow=se.querySelector(".".concat(Oe))}!this.activeArrow||this.buttons&&this.buttons.element&&this.buttons.element.classList.contains(this.classNames.controlsActive)?oe&&oe():(this.activeArrowClass=Object(v.c)("".concat(this.rootElement,"__controls__arrow-").concat(xe,"--active"),Ce),Object(p.onceTransitionEnd)(this.activeArrow,{tolerance:this.index===null?0:2}).then(function(){oe&&oe()}),this.buttons&&this.buttons.element&&(Object(b.a)(this.buttons.element,this.classNames.controlsActive),Object(b.a)(this.activeArrow,this.activeArrowClass)))}},{key:"renderBox",value:function(ne){var oe=this,xe={};return this.props.mobileTouch&&(xe.onTouchStart=this.touchStart,xe.onTouchMove=this.touchMove,xe.onTouchEnd=this.touchEnd),h.a.createElement("div",ge({ref:function(Oe){oe["box".concat(ne)]=Oe},className:this.classNames.box},xe),this.state["box".concat(ne)]&&h.a.createElement(ie,{media:this.state["box".concat(ne)],className:this.classNames.content}))}},{key:"render",value:function(){var ne=this,oe=this.props,xe=oe.cssModule,Ce=oe.organicArrows,Oe=oe.bullets,se=oe.style,me=oe.customContent,ye=oe.buttons,Me=oe.buttonContentLeft,Ie=oe.buttonContentRight,Pe=this.rootElement;return h.a.createElement("div",{ref:function(Be){ne.slider=Be},className:this.getRootClassName(),style:se},h.a.createElement("div",{ref:function(Be){ne.wrapper=Be},className:this.classNames.wrapper},h.a.createElement("div",{ref:function(Be){ne.container=Be},className:this.classNames.container},this.renderBox("A"),this.renderBox("B")),ye&&h.a.createElement(q,{rootElement:Pe,cssModule:Object(b.e)(xe),onMount:function(Be){ne.buttons=Be},onNext:this.clickNext,onPrev:this.clickPrev,organicArrows:Ce,buttonContentLeft:Me,buttonContentRight:Ie}),me),Oe&&h.a.createElement(R,{cssModule:Object(b.e)(xe),rootElement:Pe,media:this.media,selected:this.state.index,onClick:function(Be){ne.onTransitionRequest("bullet",Be.index),ne.goTo(Be)}}))}}]),ve}(h.a.Component);Ae(Ve,"propTypes",{animation:g.a.string,bullets:g.a.bool,buttonContentLeft:g.a.node,buttonContentRight:g.a.node,buttons:g.a.bool,children:g.a.node,className:g.a.string,controlsReturnDelay:g.a.number,cssModule:g.a.any,customContent:g.a.node,onLoadStart:g.a.func,disabled:g.a.bool,fillParent:g.a.bool,infinite:g.a.bool,media:g.a.array,name:g.a.string,onFirstMount:g.a.func,onResetSlider:g.a.func,onStartupRelease:g.a.func,onTransitionEnd:g.a.func,onTransitionRequest:g.a.func,onTransitionStart:g.a.func,organicArrows:g.a.bool,rootElement:g.a.string,selected:g.a.any,startup:g.a.bool,startupDelay:g.a.number,startupScreen:g.a.object,style:g.a.object,transitionDelay:g.a.number,mobileTouch:g.a.bool}),Ae(Ve,"defaultProps",{animation:null,bullets:!0,buttonContentLeft:null,buttonContentRight:null,buttons:!0,children:null,className:null,controlsReturnDelay:0,cssModule:null,customContent:null,onLoadStart:null,disabled:!1,fillParent:!1,infinite:!0,media:[],name:"awesome-slider",onFirstMount:null,onResetSlider:null,onStartupRelease:null,onTransitionEnd:null,onTransitionRequest:null,onTransitionStart:null,organicArrows:!0,rootElement:Ee,selected:0,startup:!0,startupDelay:0,startupScreen:null,style:{},transitionDelay:0,mobileTouch:!0}),c.default=Ve}])})}(dist$4)),dist$4.exports}var distExports=requireDist$1();const AwesomeSlider=getDefaultExportFromCjs(distExports);class Carousel extends React.Component{constructor(n){super(n);E(this,"intervalPlay");E(this,"nextPage",()=>{var a,l;let n=((a=this.state)==null?void 0:a.page)??0;(l=this.props)!=null&&l.children&&n+1<this.props.children.length&&(this.setState({page:n+1}),this.props.onChage&&this.props.onChage(n+1))});E(this,"previousPage",()=>{var a,l;let n=((a=this.state)==null?void 0:a.page)??0;(l=this.props)!=null&&l.children&&n>0&&(this.setState({page:n-1}),this.props.onChage&&this.props.onChage(n-1))});E(this,"autoPlay",()=>{var a,l;let n=((a=this.state)==null?void 0:a.page)??0;(l=this.props)!=null&&l.children&&n+1===this.props.children.length&&(n=-1),this.setState({page:n+1}),this.props.onChage&&this.props.onChage(n+1)});n.buttons??(n.buttons=!0),this.state={page:0},this.autoPlay=this.autoPlay.bind(this),this.nextPage=this.nextPage.bind(this),this.previousPage=this.previousPage.bind(this)}componentDidMount(){this.props.autoPlay&&(this.intervalPlay=setInterval(this.autoPlay,this.props.duration??2e3))}componentDidUpdate(n){this.props.autoPlay!==n.autoPlay&&!this.props.autoPlay&&clearInterval(this.intervalPlay)}render(){var n;return jsxRuntimeExports.jsx(AwesomeSlider,{animation:this.props.animation,style:this.props.style,className:`custom-slider-container ${this.props.className??""}`,selected:this.state.page,bullets:!1,buttons:this.props.buttons?this.props.children&&((n=this.props.children)==null?void 0:n.length)>1:!1,organicArrows:!1,buttonContentLeft:this.props.prevButton??jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/circle-ctrl-left",size:"2.4rem",color:this.props.iconColor??"var(--neutral-absolute-background-color)"}),buttonContentRight:this.props.nextButton??jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/circle-ctrl-right",size:"2.4rem",color:this.props.iconColor??"var(--neutral-absolute-background-color)"}),children:this.props.children})}}const disabled="_disabled_13a7m_67",styles$6={"tag-container":"_tag-container_13a7m_1","type-button":"_type-button_13a7m_37","tag-label":"_tag-label_13a7m_45",disabled};class Tag extends React.Component{render(){return jsxRuntimeExports.jsxs("div",{id:this.props.id,"tag-type":this.props.status??"default",className:`${styles$6["tag-container"]} row ${this.props.onClick?styles$6["type-button"]:""} ${this.props.disabled?styles$6.disabled:""} ${this.props.className??"button-text-6"} `,style:this.props.style,onClick:this.props.onClick,children:[this.props.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$6["tag-label"],children:this.props.title}),this.props.suffix]})}}const styles$5={"number-picker-container":"_number-picker-container_1q4pn_1","simple-number-picker":"_simple-number-picker_1q4pn_1","helper-text":"_helper-text_1q4pn_197"},NumberPicker=({type:s="icon-button",volume:o=1,style:n={},...a})=>{var d;const[l,c]=React.useState(0),u=React.useRef(null);return React.useEffect(()=>{u.current&&(c(a.value??0),u.current.value=`${a.value??0}`)},[a.value,u]),jsxRuntimeExports.jsxs("label",{id:a.id,className:`row ${a.simpleStyle?styles$5["simple-number-picker"]:styles$5["number-picker-container"]} ${a.className??(a.simpleStyle?"":"body-2")} ${(d=a.helperText)!=null&&d.length?styles$5["helper-text"]:""}`,"number-picker-type":s,"helper-text":a.helperText,style:{"--helper-text-color":a.helperTextColor??"#e14337",...n},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-delete",className:"icon-button light",style:{padding:"0.6rem",color:a.iconColor},onClick:()=>{var f;let h=l-o;(a.min===void 0||h>=a.min)&&(o%1===0?h=Math.round(h):h=parseFloat(h.toFixed(1)),c(h),u.current&&(u.current.value=`${h}`),(f=a.onChange)==null||f.call(a,h))}}),jsxRuntimeExports.jsx("input",{ref:u,readOnly:a.readOnly,disabled:a.disabled,onKeyDown:h=>{switch(h.key.toLowerCase()){case"enter":h.currentTarget.blur();break}},onFocus:h=>{h.currentTarget.select()},onBlur:h=>{var g,p,v;let f=o%1===0?parseInt(h.target.value.trim()):parseFloat(h.target.value.trim());isNaN(f)?h.target.value=`${l}`:(o%1===0?f=Math.round(f):f=parseFloat(f.toFixed(1)),a.min!==void 0&&f<a.min?(c(a.min),u.current&&(u.current.value=`${a.min}`),(g=a.onChange)==null||g.call(a,a.min)):a.max!==void 0&&f>a.max?(c(a.max),u.current&&(u.current.value=`${a.max}`),(p=a.onChange)==null||p.call(a,a.max)):(c(f),u.current&&(u.current.value=`${f}`),(v=a.onChange)==null||v.call(a,f)))}}),jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-add",className:"icon-button light",style:{padding:"0.6rem",color:a.iconColor},onClick:()=>{var f;let h=l+o;(a.max===void 0||h<=a.max)&&(o%1===0?h=Math.round(h):h=parseFloat(h.toFixed(1)),c(h),u.current&&(u.current.value=`${h}`),(f=a.onChange)==null||f.call(a,h))}})]})},styles$4={"input-opt-container":"_input-opt-container_gu2t8_1"};class InputOtp extends React.Component{constructor(n){super(n);E(this,"containerRef",React.createRef());E(this,"getValue",()=>this.containerRef.current?[...this.containerRef.current.querySelectorAll("input")].map(n=>n.value).join(""):this.props.value??"");this.getValue=this.getValue.bind(this)}componentDidUpdate(n){var a;if(n.value!==this.props.value&&this.containerRef.current){const l=[...this.containerRef.current.querySelectorAll("input")];if((a=this.props.value)!=null&&a.length)for(let c=0;c<l.length;c++)l[c].value=this.props.value[c];else for(let c=0;c<l.length;c++)l[c].value=""}}render(){var n;return jsxRuntimeExports.jsx("div",{id:this.props.id,ref:this.containerRef,"helper-text":this.props.helperText,style:this.props.style?{"--helper-text-color":this.props.helperTextColor??"#e14337",...this.props.style}:{"--helper-text-color":this.props.helperTextColor??"#e14337"},className:`row body-1 ${styles$4["input-opt-container"]} ${((n=this.props.helperText)==null?void 0:n.length)&&"helper-text"} ${this.props.className??""}`,onMouseDown:a=>{a.stopPropagation(),a.preventDefault();const l=[...a.target.closest("div").childNodes];for(const[c,u]of l.entries())if(!u.value.length||c===l.length-1){u.focus();break}},children:Array.from({length:this.props.length??6}).map((a,l)=>jsxRuntimeExports.jsx("input",{autoFocus:l===0&&this.props.autoFocus,disabled:this.props.disabled,style:this.props.inputStyle,onKeyDown:c=>{var d,h;const u=c.key.toLowerCase();switch(u){case"backspace":c.target.value.length?c.target.value="":((d=c.target.previousSibling)==null?void 0:d.localName)==="input"?c.target.previousSibling.focus():c.target.blur();break;case"delete":c.target.value="";break;default:if(c.preventDefault(),c.stopPropagation(),u==="v"&&c.ctrlKey)return navigator.clipboard.readText().then(f=>{/^\d{6}$/g.test(f)&&[...c.target.closest("div").childNodes].forEach((v,b)=>{v.value=f[b],v.focus()})});/[0-9]/g.test(u)&&!u.startsWith("f")&&(c.target.value.length||(c.target.value=u),((h=c.target.nextSibling)==null?void 0:h.localName)==="input"&&!c.target.nextSibling.value.length?c.target.nextSibling.focus():c.target.blur());break}},onBlur:()=>{this.props.onChange&&this.props.onChange(this.getValue(),this.containerRef.current)}},"opt-"+l))})}}const styles$3={"login-view-container":"_login-view-container_161cl_1","login-view-form-container":"_login-view-form-container_161cl_15","login-btn":"_login-btn_161cl_49","forgot-password-btn":"_forgot-password-btn_161cl_77","register-btn":"_register-btn_161cl_95","login-social-media":"_login-social-media_161cl_105","or-spacing":"_or-spacing_161cl_133"};function WLoginView(s){var u,d,h,f,g,p;const o=useForm({shouldFocusError:!1}),[n,a]=React.useState(!1),{t:l}=useTranslation(),c=v=>{s.onSubmit&&s.onSubmit(v,o)};return jsxRuntimeExports.jsxs("form",{id:s.id,className:`col login-view-container ${styles$3["login-view-container"]} ${s.className??""}`,style:s.style,children:[typeof s.logo=="string"?jsxRuntimeExports.jsx("img",{alt:"logo",src:s.logo,height:"36rem"}):s.logo,jsxRuntimeExports.jsxs("div",{className:`col login-view-form-container ${styles$3["login-view-form-container"]}`,children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-4",children:s.title??`${l("loginTo")} Wini`}),jsxRuntimeExports.jsxs("div",{className:"col",children:[jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",overflow:"visible"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.formData.username.label??l("username")}),jsxRuntimeExports.jsx(TextField,{autoComplete:"username",className:"placeholder-2",placeholder:s.formData.username.label,style:{height:"4.8rem"},prefix:s.formData.username.prefix,name:s.formData.username.name,register:(s.methods??o).register(s.formData.username.name,{onChange:v=>{v.target.value=v.target.value.trim()},onBlur:s.formData.username.onValidate}),onComplete:v=>{v.target.blur()},helperText:(d=(u=(s.methods??o).formState.errors)==null?void 0:u[s.formData.username.name])==null?void 0:d.message})]}),jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",overflow:"visible"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.formData.password.label??l("password")}),jsxRuntimeExports.jsx(TextField,{autoComplete:"current-password",className:"placeholder-2",placeholder:s.formData.password.label,style:{height:"4.8rem"},prefix:s.formData.password.prefix,suffix:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{a(!n)},children:jsxRuntimeExports.jsx(Winicon,{src:`outline/user interface/${n?"view":"hide"}`,size:"1.6rem"})}),name:s.formData.password.name,type:n?"text":"password",register:(s.methods??o).register(s.formData.password.name,{onChange:v=>{v.target.value=v.target.value.trim()},onBlur:s.formData.password.onValidate}),onComplete:v=>{var b;(b=(s.methods??o).watch(s.formData.password.name))!=null&&b.length?(v.target.blur(),!s.formData.password.onValidate&&s.onSubmit&&c((s.methods??o).getValues())):v.target.blur()},helperText:(f=(h=(s.methods??o).formState.errors)==null?void 0:h[s.formData.password.name])==null?void 0:f.message})]}),jsxRuntimeExports.jsx(Text$2,{className:`button-text-3 ${styles$3["forgot-password-btn"]}`,onClick:s.onForgotPassword,children:s.forgotPasswordText??l("forgotPassword")}),jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"1.6rem"},children:[jsxRuntimeExports.jsx(Button,{disabled:!((g=(s.methods??o).watch(s.formData.username.name))!=null&&g.length&&((p=(s.methods??o).watch(s.formData.password.name))!=null&&p.length)),className:`button-text-1 ${styles$3["login-btn"]}`,onClick:s.onSubmit&&(s.methods??o).handleSubmit(c),label:s.buttonLoginLabel??l("login")}),jsxRuntimeExports.jsxs("div",{className:"row",style:{justifyContent:"center",gap:"0.4rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-4",children:s.registerPrefixText??l("dontHaveAccount")}),jsxRuntimeExports.jsx(Text$2,{className:`button-text-3 ${styles$3["register-btn"]}`,onClick:s.onRegister,children:s.registerText??`${l("signupFor")} Wini`})]})]}),s.loginWithGoogle||s.loginWithFacebook||s.loginWithApple||s.loginWithMicrosoft?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`row ${styles$3["or-spacing"]}`,children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",children:s.orText??l("or")}),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsxs("div",{className:`row ${styles$3["login-social-media"]}`,children:[s.loginWithGoogle&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:s.loginWithGoogle,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/social media/google",size:"2rem"}),label:"Google"}),s.loginWithFacebook&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:s.loginWithFacebook,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/social media/logo-facebook",size:"2rem"}),label:"Facebook"}),s.loginWithApple&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:s.loginWithApple,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/development/apple",size:"2rem"}),label:"Apple"}),s.loginWithMicrosoft&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:s.loginWithMicrosoft,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/development/microsoft",size:"2rem"}),label:"Microsoft"})]})]}):null]})]})]})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createDefer(){const s={resolve:null,promise:null};return s.promise=new Promise(o=>{s.resolve=o}),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function once(s){let o=null;return(...n)=>(o||(o={current:s(...n)}),o.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS$1=new Array(256).fill("").map((s,o)=>("0"+o.toString(16)).slice(-2));function uid$1(){const[s,o,n,a]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS$1[s>>0&255]+HEX_NUMBERS$1[s>>8&255]+HEX_NUMBERS$1[s>>16&255]+HEX_NUMBERS$1[s>>24&255]+HEX_NUMBERS$1[o>>0&255]+HEX_NUMBERS$1[o>>8&255]+HEX_NUMBERS$1[o>>16&255]+HEX_NUMBERS$1[o>>24&255]+HEX_NUMBERS$1[n>>0&255]+HEX_NUMBERS$1[n>>8&255]+HEX_NUMBERS$1[n>>16&255]+HEX_NUMBERS$1[n>>24&255]+HEX_NUMBERS$1[a>>0&255]+HEX_NUMBERS$1[a>>8&255]+HEX_NUMBERS$1[a>>16&255]+HEX_NUMBERS$1[a>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendExtraPluginsToEditorConfig(s,o){const n=s.extraPlugins||[];return{...s,extraPlugins:[...n,...o.filter(a=>!n.includes(a))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isSemanticVersion(s){return!!s&&/^\d+\.\d+\.\d+/.test(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKCdnTestingVersion(s){return s?["nightly","alpha","internal","nightly-","staging"].some(o=>s.includes(o)):!1}function isCKCdnVersion(s){return isSemanticVersion(s)||isCKCdnTestingVersion(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function destructureSemanticVersion(s){if(!isSemanticVersion(s))throw new Error(`Invalid semantic version: ${s||"<blank>"}.`);const[o,n,a]=s.split(".");return{major:Number.parseInt(o,10),minor:Number.parseInt(n,10),patch:Number.parseInt(a,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLicenseVersionFromEditorVersion(s){if(isCKCdnTestingVersion(s))return 3;const{major:o}=destructureSemanticVersion(s);switch(!0){case o>=44:return 3;case o>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getCKBaseBundleInstallationInfo(){const{CKEDITOR_VERSION:s,CKEDITOR:o}=window;return isCKCdnVersion(s)?{source:o?"cdn":"npm",version:s}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSupportedLicenseVersionInstallationInfo(){const s=getCKBaseBundleInstallationInfo();return s?getLicenseVersionFromEditorVersion(s.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKEditorFreeLicense(s,o){switch(o||(o=getSupportedLicenseVersionInstallationInfo()||void 0),o){case 1:case 2:return s===void 0;case 3:return s==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createIntegrationUsageDataPlugin(s,o){return function(a){isCKEditorFreeLicense(a.config.get("licenseKey"))||a.on("collectUsageData",(l,{setUsageData:c})=>{c(`integration.${s}`,o)})}}var __defProp=Object.defineProperty,__defNormalProp=(s,o,n)=>o in s?__defProp(s,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[o]=n,__publicField=(s,o,n)=>__defNormalProp(s,typeof o!="symbol"?o+"":o,n);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const _LifeCycleElementSemaphore=class hr{constructor(o,n){__publicField(this,"_lifecycle"),__publicField(this,"_element"),__publicField(this,"_releaseLock",null),__publicField(this,"_value",null),__publicField(this,"_afterMountCallbacks",[]),__publicField(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),__publicField(this,"release",once(()=>{const{_releaseLock:a,_state:l,_element:c,_lifecycle:u}=this;l.mountingInProgress?l.mountingInProgress.then(()=>u.unmount({element:c,mountResult:this.value})).catch(d=>{console.error("Semaphore unmounting error:",d)}).then(a.resolve).then(()=>{this._value=null}):(l.destroyedBeforeInitialization=!0,a.resolve())})),this._element=o,this._lifecycle=n,this._lock()}get value(){return this._value}unsafeSetValue(o){this._value=o,this._afterMountCallbacks.forEach(n=>n(o)),this._afterMountCallbacks=[]}runAfterMount(o){const{_value:n,_afterMountCallbacks:a}=this;n?o(n):a.push(o)}_lock(){const{_semaphores:o}=hr,{_state:n,_element:a,_lifecycle:l}=this,c=o.get(a)||Promise.resolve(null),u=createDefer();this._releaseLock=u;const d=c.then(()=>n.destroyedBeforeInitialization?Promise.resolve(void 0):(n.mountingInProgress=l.mount().then(h=>(h&&this.unsafeSetValue(h),h)),n.mountingInProgress)).then(async h=>{h&&l.afterMount&&await l.afterMount({element:a,mountResult:h})}).then(()=>u.promise).catch(h=>{console.error("Semaphore mounting error:",h)}).then(()=>{o.get(a)===d&&o.delete(a)});o.set(a,d)}};__publicField(_LifeCycleElementSemaphore,"_semaphores",new Map);let LifeCycleElementSemaphore=_LifeCycleElementSemaphore;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactContextMetadataKey="$__CKEditorReactContextMetadata";function withCKEditorReactContextMetadata(s,o){return{...o,[ReactContextMetadataKey]:s}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ContextWatchdogContext=React.createContext(null),isContextWatchdogValue=s=>!!s&&typeof s=="object"&&"status"in s&&["initializing","initialized","error"].includes(s.status),isContextWatchdogValueWithStatus=s=>o=>isContextWatchdogValue(o)&&o.status===s,isContextWatchdogInitializing=isContextWatchdogValueWithStatus("initializing"),isContextWatchdogReadyToUse=s=>isContextWatchdogValueWithStatus("initialized")(s)&&s.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactIntegrationUsageDataPlugin=createIntegrationUsageDataPlugin("react",{version:"9.5.0",frameworkVersion:React.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendAllIntegrationPluginsToConfig(s){return isCKEditorFreeLicense(s.licenseKey)?s:appendExtraPluginsToEditorConfig(s,[ReactIntegrationUsageDataPlugin])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const REACT_INTEGRATION_READ_ONLY_LOCK_ID$1="Lock from React integration (@ckeditor/ckeditor5-react)";class CKEditor extends React.Component{constructor(o){super(o),__publicField(this,"domContainer",React.createRef()),__publicField(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:o}=window;if(!o)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[n]=o.split(".").map(Number);n>=42||o.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:o}=this;return o?o.value:null}get watchdog(){const{_semaphoreValue:o}=this;return o?o.watchdog:null}get editor(){const{_semaphoreValue:o}=this;return o?o.instance:null}shouldComponentUpdate(o){const{props:n,editorSemaphore:a}=this;return o.id!==n.id||o.disableWatchdog!==n.disableWatchdog?!0:(a&&(a.runAfterMount(({instance:l})=>{this._shouldUpdateEditorData(n,o,l)&&l.data.set(o.data)}),"disabled"in o&&a.runAfterMount(({instance:l})=>{o.disabled?l.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1):l.disableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)})),!1)}componentDidMount(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new LifeCycleElementSemaphore(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:o})=>{const{onReady:n}=this.props;n&&this.domContainer.current!==null&&n(o.instance)},unmount:async({element:o,mountResult:n})=>{const{onAfterDestroy:a}=this.props;try{await this._destroyEditor(n),o.innerHTML=""}finally{a&&a(n.instance)}}})}render(){return React.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const o=isContextWatchdogReadyToUse(this.context)?new EditorWatchdogAdapter(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),n={current:0};return o.setCreator(async(a,l)=>{var c;const{editorSemaphore:u}=this,{onAfterDestroy:d}=this.props;n.current>0&&d&&((c=u==null?void 0:u.value)!=null&&c.instance)&&d(u.value.instance);const h=await this._createEditor(a,l);return u&&n.current>0&&(u.unsafeSetValue({instance:h,watchdog:o}),setTimeout(()=>{this.props.onReady&&this.props.onReady(o.editor)})),n.current++,h}),o.on("error",(a,{error:l,causesRestart:c})=>{(this.props.onError||console.error)(l,{phase:"runtime",willEditorRestart:c})}),await o.create(this.domContainer.current,this._getConfig()).catch(a=>{(this.props.onError||console.error)(a,{phase:"initialization",willEditorRestart:!1})}),{watchdog:o,instance:o.editor}}_createEditor(o,n){const{contextItemMetadata:a}=this.props;return a&&(n=withCKEditorReactContextMetadata(a,n)),this.props.editor.create(o,appendAllIntegrationPluginsToConfig(n)).then(l=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&l.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)}const c=l.model.document,u=l.editing.view.document;return c.on("change:data",d=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(d,l)}),u.on("focus",d=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(d,l)}),u.on("blur",d=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(d,l)}),l})}async _destroyEditor(o){const{watchdog:n,instance:a}=o;return new Promise((l,c)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(n)return await n.destroy(),l();if(a)return await a.destroy(),l();l()}catch(u){console.error(u),c(u)}})})}_shouldUpdateEditorData(o,n,a){return!(o.data===n.data||a.data.get()===n.data)}_getConfig(){const o=this.props.config||{};return this.props.data&&o.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...o,initialData:o.initialData||this.props.data||""}}}__publicField(CKEditor,"contextType",ContextWatchdogContext);class EditorWatchdogAdapter{constructor(o){__publicField(this,"_contextWatchdog"),__publicField(this,"_id"),__publicField(this,"_creator"),this._contextWatchdog=o,this._id=uid$1()}setCreator(o){this._creator=o}create(o,n){return this._contextWatchdog.add({sourceElementOrData:o,config:n,creator:this._creator,id:this._id,type:"editor"})}on(o,n){this._contextWatchdog.on("itemError",(a,{itemId:l,error:c})=>{l===this._id&&n(null,{error:c,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mergeRefs$1(...s){return o=>{s.forEach(n=>{typeof n=="function"?n(o):n!=null&&(n.current=o)})}}const EditorEditable=React.memo(React.forwardRef(({id:s,semaphore:o,rootName:n},a)=>{const l=React.useRef(null);return React.useEffect(()=>{let c,u;return o.runAfterMount(({instance:d})=>{if(!l.current)return;u=d;const{ui:h,model:f}=u,g=f.document.getRoot(n);g&&u.ui.getEditableElement(n)&&u.detachEditable(g),c=h.view.createEditable(n,l.current),h.addEditable(c),d.editing.view.forceRender()}),()=>{if(u&&u.state!=="destroyed"&&l.current){const d=u.model.document.getRoot(n);/* istanbul ignore else -- @preserve */d&&u.detachEditable(d)}}},[o.revision]),React.createElement("div",{key:o.revision,id:s,ref:mergeRefs$1(a,l)})}));EditorEditable.displayName="EditorEditable";const EditorToolbarWrapper=React.forwardRef(({editor:s},o)=>{const n=React.useRef(null);return React.useEffect(()=>{const a=n.current;if(!s||!a)return;const l=s.ui.view.toolbar.element;return a.appendChild(l),()=>{a.contains(l)&&a.removeChild(l)}},[s&&s.id]),React.createElement("div",{ref:mergeRefs$1(n,o)})});EditorToolbarWrapper.displayName="EditorToolbarWrapper";var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),Symbol$2=root$1.Symbol,objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(s){var o=hasOwnProperty$d.call(s,symToStringTag$1),n=s[symToStringTag$1];try{s[symToStringTag$1]=void 0;var a=!0}catch{}var l=nativeObjectToString$1.call(s);return a&&(o?s[symToStringTag$1]=n:delete s[symToStringTag$1]),l}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(s){return nativeObjectToString.call(s)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(s){return s==null?s===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(s)?getRawTag(s):objectToString(s)}function isObjectLike(s){return s!=null&&typeof s=="object"}var symbolTag$3="[object Symbol]";function isSymbol(s){return typeof s=="symbol"||isObjectLike(s)&&baseGetTag(s)==symbolTag$3}function arrayMap(s,o){for(var n=-1,a=s==null?0:s.length,l=Array(a);++n<a;)l[n]=o(s[n],n,s);return l}var isArray$3=Array.isArray,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(s){if(typeof s=="string")return s;if(isArray$3(s))return arrayMap(s,baseToString)+"";if(isSymbol(s))return symbolToString?symbolToString.call(s):"";var o=s+"";return o=="0"&&1/s==-1/0?"-0":o}var reWhitespace=/\s/;function trimmedEndIndex(s){for(var o=s.length;o--&&reWhitespace.test(s.charAt(o)););return o}var reTrimStart=/^\s+/;function baseTrim(s){return s&&s.slice(0,trimmedEndIndex(s)+1).replace(reTrimStart,"")}function isObject$6(s){var o=typeof s;return s!=null&&(o=="object"||o=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(s){if(typeof s=="number")return s;if(isSymbol(s))return NAN;if(isObject$6(s)){var o=typeof s.valueOf=="function"?s.valueOf():s;s=isObject$6(o)?o+"":o}if(typeof s!="string")return s===0?s:+s;s=baseTrim(s);var n=reIsBinary.test(s);return n||reIsOctal.test(s)?freeParseInt(s.slice(2),n?2:8):reIsBadHex.test(s)?NAN:+s}function identity$1(s){return s}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(s){if(!isObject$6(s))return!1;var o=baseGetTag(s);return o==funcTag$2||o==genTag$1||o==asyncTag||o==proxyTag}var coreJsData=root$1["__core-js_shared__"],maskSrcKey=function(){var s=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function isMasked(s){return!!maskSrcKey&&maskSrcKey in s}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(s){if(s!=null){try{return funcToString$2.call(s)}catch{}try{return s+""}catch{}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(s){if(!isObject$6(s)||isMasked(s))return!1;var o=isFunction$3(s)?reIsNative:reIsHostCtor;return o.test(toSource(s))}function getValue(s,o){return s==null?void 0:s[o]}function getNative(s,o){var n=getValue(s,o);return baseIsNative(n)?n:void 0}var WeakMap$2=getNative(root$1,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function s(){}return function(o){if(!isObject$6(o))return{};if(objectCreate)return objectCreate(o);s.prototype=o;var n=new s;return s.prototype=void 0,n}}();function apply(s,o,n){switch(n.length){case 0:return s.call(o);case 1:return s.call(o,n[0]);case 2:return s.call(o,n[0],n[1]);case 3:return s.call(o,n[0],n[1],n[2])}return s.apply(o,n)}function copyArray(s,o){var n=-1,a=s.length;for(o||(o=Array(a));++n<a;)o[n]=s[n];return o}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(s){var o=0,n=0;return function(){var a=nativeNow(),l=HOT_SPAN-(a-n);if(n=a,l>0){if(++o>=HOT_COUNT)return arguments[0]}else o=0;return s.apply(void 0,arguments)}}function constant$1(s){return function(){return s}}var defineProperty=function(){try{var s=getNative(Object,"defineProperty");return s({},"",{}),s}catch{}}(),baseSetToString=defineProperty?function(s,o){return defineProperty(s,"toString",{configurable:!0,enumerable:!1,value:constant$1(o),writable:!0})}:identity$1,setToString=shortOut(baseSetToString);function arrayEach(s,o){for(var n=-1,a=s==null?0:s.length;++n<a&&o(s[n],n,s)!==!1;);return s}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(s,o){var n=typeof s;return o=o??MAX_SAFE_INTEGER$2,!!o&&(n=="number"||n!="symbol"&&reIsUint.test(s))&&s>-1&&s%1==0&&s<o}function baseAssignValue(s,o,n){o=="__proto__"&&defineProperty?defineProperty(s,o,{configurable:!0,enumerable:!0,value:n,writable:!0}):s[o]=n}function eq(s,o){return s===o||s!==s&&o!==o}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(s,o,n){var a=s[o];(!(hasOwnProperty$b.call(s,o)&&eq(a,n))||n===void 0&&!(o in s))&&baseAssignValue(s,o,n)}function copyObject(s,o,n,a){var l=!n;n||(n={});for(var c=-1,u=o.length;++c<u;){var d=o[c],h=void 0;h===void 0&&(h=s[d]),l?baseAssignValue(n,d,h):assignValue(n,d,h)}return n}var nativeMax$1=Math.max;function overRest(s,o,n){return o=nativeMax$1(o===void 0?s.length-1:o,0),function(){for(var a=arguments,l=-1,c=nativeMax$1(a.length-o,0),u=Array(c);++l<c;)u[l]=a[o+l];l=-1;for(var d=Array(o+1);++l<o;)d[l]=a[l];return d[o]=n(u),apply(s,this,d)}}function baseRest(s,o){return setToString(overRest(s,o,identity$1),s+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength$1(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=MAX_SAFE_INTEGER$1}function isArrayLike$1(s){return s!=null&&isLength$1(s.length)&&!isFunction$3(s)}function isIterateeCall(s,o,n){if(!isObject$6(n))return!1;var a=typeof o;return(a=="number"?isArrayLike$1(n)&&isIndex(o,n.length):a=="string"&&o in n)?eq(n[o],s):!1}function createAssigner(s){return baseRest(function(o,n){var a=-1,l=n.length,c=l>1?n[l-1]:void 0,u=l>2?n[2]:void 0;for(c=s.length>3&&typeof c=="function"?(l--,c):void 0,u&&isIterateeCall(n[0],n[1],u)&&(c=l<3?void 0:c,l=1),o=Object(o);++a<l;){var d=n[a];d&&s(o,d,a,c)}return o})}var objectProto$b=Object.prototype;function isPrototype(s){var o=s&&s.constructor,n=typeof o=="function"&&o.prototype||objectProto$b;return s===n}function baseTimes(s,o){for(var n=-1,a=Array(s);++n<s;)a[n]=o(n);return a}var argsTag$3="[object Arguments]";function baseIsArguments(s){return isObjectLike(s)&&baseGetTag(s)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(s){return isObjectLike(s)&&hasOwnProperty$a.call(s,"callee")&&!propertyIsEnumerable$1.call(s,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(s){return isObjectLike(s)&&isLength$1(s.length)&&!!typedArrayTags[baseGetTag(s)]}function baseUnary(s){return function(o){return s(o)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var s=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return s||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(s,o){var n=isArray$3(s),a=!n&&isArguments(s),l=!n&&!a&&isBuffer$1(s),c=!n&&!a&&!l&&isTypedArray$2(s),u=n||a||l||c,d=u?baseTimes(s.length,String):[],h=d.length;for(var f in s)(o||hasOwnProperty$9.call(s,f))&&!(u&&(f=="length"||l&&(f=="offset"||f=="parent")||c&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||isIndex(f,h)))&&d.push(f);return d}function overArg(s,o){return function(n){return s(o(n))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(s){if(!isPrototype(s))return nativeKeys(s);var o=[];for(var n in Object(s))hasOwnProperty$8.call(s,n)&&n!="constructor"&&o.push(n);return o}function keys$1(s){return isArrayLike$1(s)?arrayLikeKeys(s):baseKeys(s)}function nativeKeysIn(s){var o=[];if(s!=null)for(var n in Object(s))o.push(n);return o}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(s){if(!isObject$6(s))return nativeKeysIn(s);var o=isPrototype(s),n=[];for(var a in s)a=="constructor"&&(o||!hasOwnProperty$7.call(s,a))||n.push(a);return n}function keysIn(s){return isArrayLike$1(s)?arrayLikeKeys(s,!0):baseKeysIn(s)}var assignIn=createAssigner(function(s,o){copyObject(o,keysIn(o),s)}),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(s,o){if(isArray$3(s))return!1;var n=typeof s;return n=="number"||n=="symbol"||n=="boolean"||s==null||isSymbol(s)?!0:reIsPlainProp.test(s)||!reIsDeepProp.test(s)||o!=null&&s in Object(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(s){var o=this.has(s)&&delete this.__data__[s];return this.size-=o?1:0,o}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(s){var o=this.__data__;if(nativeCreate){var n=o[s];return n===HASH_UNDEFINED$2?void 0:n}return hasOwnProperty$6.call(o,s)?o[s]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(s){var o=this.__data__;return nativeCreate?o[s]!==void 0:hasOwnProperty$5.call(o,s)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(s,o){var n=this.__data__;return this.size+=this.has(s)?0:1,n[s]=nativeCreate&&o===void 0?HASH_UNDEFINED$1:o,this}function Hash(s){var o=-1,n=s==null?0:s.length;for(this.clear();++o<n;){var a=s[o];this.set(a[0],a[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(s,o){for(var n=s.length;n--;)if(eq(s[n][0],o))return n;return-1}var arrayProto$1=Array.prototype,splice=arrayProto$1.splice;function listCacheDelete(s){var o=this.__data__,n=assocIndexOf(o,s);if(n<0)return!1;var a=o.length-1;return n==a?o.pop():splice.call(o,n,1),--this.size,!0}function listCacheGet$1(s){var o=this.__data__,n=assocIndexOf(o,s);return n<0?void 0:o[n][1]}function listCacheHas(s){return assocIndexOf(this.__data__,s)>-1}function listCacheSet$1(s,o){var n=this.__data__,a=assocIndexOf(n,s);return a<0?(++this.size,n.push([s,o])):n[a][1]=o,this}function ListCache(s){var o=-1,n=s==null?0:s.length;for(this.clear();++o<n;){var a=s[o];this.set(a[0],a[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet$1;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet$1;var Map$1=getNative(root$1,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(s){var o=typeof s;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?s!=="__proto__":s===null}function getMapData(s,o){var n=s.__data__;return isKeyable(o)?n[typeof o=="string"?"string":"hash"]:n.map}function mapCacheDelete(s){var o=getMapData(this,s).delete(s);return this.size-=o?1:0,o}function mapCacheGet(s){return getMapData(this,s).get(s)}function mapCacheHas(s){return getMapData(this,s).has(s)}function mapCacheSet(s,o){var n=getMapData(this,s),a=n.size;return n.set(s,o),this.size+=n.size==a?0:1,this}function MapCache(s){var o=-1,n=s==null?0:s.length;for(this.clear();++o<n;){var a=s[o];this.set(a[0],a[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(s,o){if(typeof s!="function"||o!=null&&typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var n=function(){var a=arguments,l=o?o.apply(this,a):a[0],c=n.cache;if(c.has(l))return c.get(l);var u=s.apply(this,a);return n.cache=c.set(l,u)||c,u};return n.cache=new(memoize.Cache||MapCache),n}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(s){var o=memoize(s,function(a){return n.size===MAX_MEMOIZE_SIZE&&n.clear(),a}),n=o.cache;return o}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(s){var o=[];return s.charCodeAt(0)===46&&o.push(""),s.replace(rePropName,function(n,a,l,c){o.push(l?c.replace(reEscapeChar,"$1"):a||n)}),o});function toString$1(s){return s==null?"":baseToString(s)}function castPath(s,o){return isArray$3(s)?s:isKey(s,o)?[s]:stringToPath(toString$1(s))}function toKey(s){if(typeof s=="string"||isSymbol(s))return s;var o=s+"";return o=="0"&&1/s==-1/0?"-0":o}function baseGet(s,o){o=castPath(o,s);for(var n=0,a=o.length;s!=null&&n<a;)s=s[toKey(o[n++])];return n&&n==a?s:void 0}function get$2(s,o,n){var a=s==null?void 0:baseGet(s,o);return a===void 0?n:a}function arrayPush(s,o){for(var n=-1,a=o.length,l=s.length;++n<a;)s[l+n]=o[n];return s}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(s){if(!isObjectLike(s)||baseGetTag(s)!=objectTag$3)return!1;var o=getPrototype(s);if(o===null)return!0;var n=hasOwnProperty$4.call(o,"constructor")&&o.constructor;return typeof n=="function"&&n instanceof n&&funcToString.call(n)==objectCtorString}function baseSlice(s,o,n){var a=-1,l=s.length;o<0&&(o=-o>l?0:l+o),n=n>l?l:n,n<0&&(n+=l),l=o>n?0:n-o>>>0,o>>>=0;for(var c=Array(l);++a<l;)c[a]=s[a+o];return c}function castSlice(s,o,n){var a=s.length;return n=n===void 0?a:n,baseSlice(s,o,n)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(s){return reHasUnicode.test(s)}function asciiToArray(s){return s.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(s){return s.match(reUnicode)||[]}function stringToArray(s){return hasUnicode(s)?unicodeToArray(s):asciiToArray(s)}function createCaseFirst(s){return function(o){o=toString$1(o);var n=hasUnicode(o)?stringToArray(o):void 0,a=n?n[0]:o.charAt(0),l=n?castSlice(n,1).join(""):o.slice(1);return a[s]()+l}}var upperFirst=createCaseFirst("toUpperCase");function arrayReduce(s,o,n,a){for(var l=-1,c=s==null?0:s.length;++l<c;)n=o(n,s[l],l,s);return n}function basePropertyOf(s){return function(o){return s==null?void 0:s[o]}}var deburredLetters={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},deburrLetter=basePropertyOf(deburredLetters),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(s){return s=toString$1(s),s&&s.replace(reLatin,deburrLetter).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(s){return s.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(s){return reHasUnicodeWord.test(s)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['’]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(s){return s.match(reUnicodeWord)||[]}function words(s,o,n){return s=toString$1(s),o=o,o===void 0?hasUnicodeWord(s)?unicodeWords(s):asciiWords(s):s.match(o)||[]}var rsApos="['’]",reApos=RegExp(rsApos,"g");function createCompounder(s){return function(o){return arrayReduce(words(deburr(o).replace(reApos,"")),s,"")}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(s){var o=this.__data__,n=o.delete(s);return this.size=o.size,n}function stackGet(s){return this.__data__.get(s)}function stackHas(s){return this.__data__.has(s)}var LARGE_ARRAY_SIZE=200;function stackSet(s,o){var n=this.__data__;if(n instanceof ListCache){var a=n.__data__;if(!Map$1||a.length<LARGE_ARRAY_SIZE-1)return a.push([s,o]),this.size=++n.size,this;n=this.__data__=new MapCache(a)}return n.set(s,o),this.size=n.size,this}function Stack(s){var o=this.__data__=new ListCache(s);this.size=o.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(s,o){return s&&copyObject(o,keys$1(o),s)}function baseAssignIn(s,o){return s&&copyObject(o,keysIn(o),s)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(s,o){if(o)return s.slice();var n=s.length,a=allocUnsafe?allocUnsafe(n):new s.constructor(n);return s.copy(a),a}function arrayFilter(s,o){for(var n=-1,a=s==null?0:s.length,l=0,c=[];++n<a;){var u=s[n];o(u,n,s)&&(c[l++]=u)}return c}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(s){return s==null?[]:(s=Object(s),arrayFilter(nativeGetSymbols$1(s),function(o){return propertyIsEnumerable.call(s,o)}))}:stubArray;function copySymbols(s,o){return copyObject(s,getSymbols(s),o)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(s){for(var o=[];s;)arrayPush(o,getSymbols(s)),s=getPrototype(s);return o}:stubArray;function copySymbolsIn(s,o){return copyObject(s,getSymbolsIn(s),o)}function baseGetAllKeys(s,o,n){var a=o(s);return isArray$3(s)?a:arrayPush(a,n(s))}function getAllKeys(s){return baseGetAllKeys(s,keys$1,getSymbols)}function getAllKeysIn(s){return baseGetAllKeys(s,keysIn,getSymbolsIn)}var DataView$1=getNative(root$1,"DataView"),Promise$1=getNative(root$1,"Promise"),Set$1=getNative(root$1,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(s){var o=baseGetTag(s),n=o==objectTag$2?s.constructor:void 0,a=n?toSource(n):"";if(a)switch(a){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return o});var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(s){var o=s.length,n=new s.constructor(o);return o&&typeof s[0]=="string"&&hasOwnProperty$3.call(s,"index")&&(n.index=s.index,n.input=s.input),n}var Uint8Array$1=root$1.Uint8Array;function cloneArrayBuffer(s){var o=new s.constructor(s.byteLength);return new Uint8Array$1(o).set(new Uint8Array$1(s)),o}function cloneDataView(s,o){var n=o?cloneArrayBuffer(s.buffer):s.buffer;return new s.constructor(n,s.byteOffset,s.byteLength)}var reFlags=/\w*$/;function cloneRegExp(s){var o=new s.constructor(s.source,reFlags.exec(s));return o.lastIndex=s.lastIndex,o}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(s){return symbolValueOf$1?Object(symbolValueOf$1.call(s)):{}}function cloneTypedArray(s,o){var n=o?cloneArrayBuffer(s.buffer):s.buffer;return new s.constructor(n,s.byteOffset,s.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(s,o,n){var a=s.constructor;switch(o){case arrayBufferTag$2:return cloneArrayBuffer(s);case boolTag$2:case dateTag$2:return new a(+s);case dataViewTag$2:return cloneDataView(s,n);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(s,n);case mapTag$3:return new a;case numberTag$2:case stringTag$3:return new a(s);case regexpTag$2:return cloneRegExp(s);case setTag$3:return new a;case symbolTag$2:return cloneSymbol(s)}}function initCloneObject(s){return typeof s.constructor=="function"&&!isPrototype(s)?baseCreate(getPrototype(s)):{}}var mapTag$2="[object Map]";function baseIsMap(s){return isObjectLike(s)&&getTag(s)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(s){return isObjectLike(s)&&getTag(s)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$3=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(s,o,n,a,l,c){var u,d=o&CLONE_DEEP_FLAG$2,h=o&CLONE_FLAT_FLAG,f=o&CLONE_SYMBOLS_FLAG$3;if(n&&(u=l?n(s,a,l,c):n(s)),u!==void 0)return u;if(!isObject$6(s))return s;var g=isArray$3(s);if(g){if(u=initCloneArray(s),!d)return copyArray(s,u)}else{var p=getTag(s),v=p==funcTag||p==genTag;if(isBuffer$1(s))return cloneBuffer(s,d);if(p==objectTag$1||p==argsTag$1||v&&!l){if(u=h||v?{}:initCloneObject(s),!d)return h?copySymbolsIn(s,baseAssignIn(u,s)):copySymbols(s,baseAssign(u,s))}else{if(!cloneableTags[p])return l?s:{};u=initCloneByTag(s,p,d)}}c||(c=new Stack);var b=c.get(s);if(b)return b;c.set(s,u),isSet(s)?s.forEach(function(x){u.add(baseClone(x,o,n,x,s,c))}):isMap(s)&&s.forEach(function(x,S){u.set(S,baseClone(x,o,n,S,s,c))});var _=f?h?getAllKeysIn:getAllKeys:h?keysIn:keys$1,w=g?void 0:_(s);return arrayEach(w||s,function(x,S){w&&(S=x,x=s[S]),assignValue(u,S,baseClone(x,o,n,S,s,c))}),u}var CLONE_SYMBOLS_FLAG$2=4;function clone$6(s){return baseClone(s,CLONE_SYMBOLS_FLAG$2)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(s){return baseClone(s,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeepWith(s,o){return o=typeof o=="function"?o:void 0,baseClone(s,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,o)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(s){return this.__data__.set(s,HASH_UNDEFINED),this}function setCacheHas(s){return this.__data__.has(s)}function SetCache(s){var o=-1,n=s==null?0:s.length;for(this.__data__=new MapCache;++o<n;)this.add(s[o])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(s,o){for(var n=-1,a=s==null?0:s.length;++n<a;)if(o(s[n],n,s))return!0;return!1}function cacheHas(s,o){return s.has(o)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(s,o,n,a,l,c){var u=n&COMPARE_PARTIAL_FLAG$5,d=s.length,h=o.length;if(d!=h&&!(u&&h>d))return!1;var f=c.get(s),g=c.get(o);if(f&&g)return f==o&&g==s;var p=-1,v=!0,b=n&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(c.set(s,o),c.set(o,s);++p<d;){var _=s[p],w=o[p];if(a)var x=u?a(w,_,p,o,s,c):a(_,w,p,s,o,c);if(x!==void 0){if(x)continue;v=!1;break}if(b){if(!arraySome(o,function(S,C){if(!cacheHas(b,C)&&(_===S||l(_,S,n,a,c)))return b.push(C)})){v=!1;break}}else if(!(_===w||l(_,w,n,a,c))){v=!1;break}}return c.delete(s),c.delete(o),v}function mapToArray(s){var o=-1,n=Array(s.size);return s.forEach(function(a,l){n[++o]=[l,a]}),n}function setToArray(s){var o=-1,n=Array(s.size);return s.forEach(function(a){n[++o]=a}),n}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(s,o,n,a,l,c,u){switch(n){case dataViewTag:if(s.byteLength!=o.byteLength||s.byteOffset!=o.byteOffset)return!1;s=s.buffer,o=o.buffer;case arrayBufferTag:return!(s.byteLength!=o.byteLength||!c(new Uint8Array$1(s),new Uint8Array$1(o)));case boolTag:case dateTag:case numberTag:return eq(+s,+o);case errorTag:return s.name==o.name&&s.message==o.message;case regexpTag:case stringTag$1:return s==o+"";case mapTag:var d=mapToArray;case setTag:var h=a&COMPARE_PARTIAL_FLAG$4;if(d||(d=setToArray),s.size!=o.size&&!h)return!1;var f=u.get(s);if(f)return f==o;a|=COMPARE_UNORDERED_FLAG$2,u.set(s,o);var g=equalArrays(d(s),d(o),a,l,c,u);return u.delete(s),g;case symbolTag:if(symbolValueOf)return symbolValueOf.call(s)==symbolValueOf.call(o)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(s,o,n,a,l,c){var u=n&COMPARE_PARTIAL_FLAG$3,d=getAllKeys(s),h=d.length,f=getAllKeys(o),g=f.length;if(h!=g&&!u)return!1;for(var p=h;p--;){var v=d[p];if(!(u?v in o:hasOwnProperty$2.call(o,v)))return!1}var b=c.get(s),_=c.get(o);if(b&&_)return b==o&&_==s;var w=!0;c.set(s,o),c.set(o,s);for(var x=u;++p<h;){v=d[p];var S=s[v],C=o[v];if(a)var T=u?a(C,S,v,o,s,c):a(S,C,v,s,o,c);if(!(T===void 0?S===C||l(S,C,n,a,c):T)){w=!1;break}x||(x=v=="constructor")}if(w&&!x){var R=s.constructor,A=o.constructor;R!=A&&"constructor"in s&&"constructor"in o&&!(typeof R=="function"&&R instanceof R&&typeof A=="function"&&A instanceof A)&&(w=!1)}return c.delete(s),c.delete(o),w}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(s,o,n,a,l,c){var u=isArray$3(s),d=isArray$3(o),h=u?arrayTag:getTag(s),f=d?arrayTag:getTag(o);h=h==argsTag?objectTag:h,f=f==argsTag?objectTag:f;var g=h==objectTag,p=f==objectTag,v=h==f;if(v&&isBuffer$1(s)){if(!isBuffer$1(o))return!1;u=!0,g=!1}if(v&&!g)return c||(c=new Stack),u||isTypedArray$2(s)?equalArrays(s,o,n,a,l,c):equalByTag(s,o,h,n,a,l,c);if(!(n&COMPARE_PARTIAL_FLAG$2)){var b=g&&hasOwnProperty$1.call(s,"__wrapped__"),_=p&&hasOwnProperty$1.call(o,"__wrapped__");if(b||_){var w=b?s.value():s,x=_?o.value():o;return c||(c=new Stack),l(w,x,n,a,c)}}return v?(c||(c=new Stack),equalObjects(s,o,n,a,l,c)):!1}function baseIsEqual(s,o,n,a,l){return s===o?!0:s==null||o==null||!isObjectLike(s)&&!isObjectLike(o)?s!==s&&o!==o:baseIsEqualDeep(s,o,n,a,baseIsEqual,l)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(s,o,n,a){var l=n.length,c=l;if(s==null)return!c;for(s=Object(s);l--;){var u=n[l];if(u[2]?u[1]!==s[u[0]]:!(u[0]in s))return!1}for(;++l<c;){u=n[l];var d=u[0],h=s[d],f=u[1];if(u[2]){if(h===void 0&&!(d in s))return!1}else{var g=new Stack,p;if(!(p===void 0?baseIsEqual(f,h,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,a,g):p))return!1}}return!0}function isStrictComparable(s){return s===s&&!isObject$6(s)}function getMatchData(s){for(var o=keys$1(s),n=o.length;n--;){var a=o[n],l=s[a];o[n]=[a,l,isStrictComparable(l)]}return o}function matchesStrictComparable(s,o){return function(n){return n==null?!1:n[s]===o&&(o!==void 0||s in Object(n))}}function baseMatches(s){var o=getMatchData(s);return o.length==1&&o[0][2]?matchesStrictComparable(o[0][0],o[0][1]):function(n){return n===s||baseIsMatch(n,s,o)}}function baseHasIn(s,o){return s!=null&&o in Object(s)}function hasPath(s,o,n){o=castPath(o,s);for(var a=-1,l=o.length,c=!1;++a<l;){var u=toKey(o[a]);if(!(c=s!=null&&n(s,u)))break;s=s[u]}return c||++a!=l?c:(l=s==null?0:s.length,!!l&&isLength$1(l)&&isIndex(u,l)&&(isArray$3(s)||isArguments(s)))}function hasIn(s,o){return s!=null&&hasPath(s,o,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(s,o){return isKey(s)&&isStrictComparable(o)?matchesStrictComparable(toKey(s),o):function(n){var a=get$2(n,s);return a===void 0&&a===o?hasIn(n,s):baseIsEqual(o,a,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(s){return function(o){return o==null?void 0:o[s]}}function basePropertyDeep(s){return function(o){return baseGet(o,s)}}function property(s){return isKey(s)?baseProperty(toKey(s)):basePropertyDeep(s)}function baseIteratee(s){return typeof s=="function"?s:s==null?identity$1:typeof s=="object"?isArray$3(s)?baseMatchesProperty(s[0],s[1]):baseMatches(s):property(s)}function createBaseFor(s){return function(o,n,a){for(var l=-1,c=Object(o),u=a(o),d=u.length;d--;){var h=u[++l];if(n(c[h],h,c)===!1)break}return o}}var baseFor=createBaseFor();function baseForOwn(s,o){return s&&baseFor(s,o,keys$1)}function createBaseEach(s,o){return function(n,a){if(n==null)return n;if(!isArrayLike$1(n))return s(n,a);for(var l=n.length,c=-1,u=Object(n);++c<l&&a(u[c],c,u)!==!1;);return n}}var baseEach=createBaseEach(baseForOwn),now=function(){return root$1.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(s,o,n){var a,l,c,u,d,h,f=0,g=!1,p=!1,v=!0;if(typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT$1);o=toNumber(o)||0,isObject$6(n)&&(g=!!n.leading,p="maxWait"in n,c=p?nativeMax(toNumber(n.maxWait)||0,o):c,v="trailing"in n?!!n.trailing:v);function b(M){var D=a,O=l;return a=l=void 0,f=M,u=s.apply(O,D),u}function _(M){return f=M,d=setTimeout(S,o),g?b(M):u}function w(M){var D=M-h,O=M-f,H=o-D;return p?nativeMin(H,c-O):H}function x(M){var D=M-h,O=M-f;return h===void 0||D>=o||D<0||p&&O>=c}function S(){var M=now();if(x(M))return C(M);d=setTimeout(S,w(M))}function C(M){return d=void 0,v&&a?b(M):(a=l=void 0,u)}function T(){d!==void 0&&clearTimeout(d),f=0,a=h=l=d=void 0}function R(){return d===void 0?u:C(now())}function A(){var M=now(),D=x(M);if(a=arguments,l=this,h=M,D){if(d===void 0)return _(h);if(p)return clearTimeout(d),d=setTimeout(S,o),b(h)}return d===void 0&&(d=setTimeout(S,o)),u}return A.cancel=T,A.flush=R,A}function assignMergeValue(s,o,n){(n!==void 0&&!eq(s[o],n)||n===void 0&&!(o in s))&&baseAssignValue(s,o,n)}function isArrayLikeObject(s){return isObjectLike(s)&&isArrayLike$1(s)}function safeGet(s,o){if(!(o==="constructor"&&typeof s[o]=="function")&&o!="__proto__")return s[o]}function toPlainObject(s){return copyObject(s,keysIn(s))}function baseMergeDeep(s,o,n,a,l,c,u){var d=safeGet(s,n),h=safeGet(o,n),f=u.get(h);if(f){assignMergeValue(s,n,f);return}var g=c?c(d,h,n+"",s,o,u):void 0,p=g===void 0;if(p){var v=isArray$3(h),b=!v&&isBuffer$1(h),_=!v&&!b&&isTypedArray$2(h);g=h,v||b||_?isArray$3(d)?g=d:isArrayLikeObject(d)?g=copyArray(d):b?(p=!1,g=cloneBuffer(h,!0)):_?(p=!1,g=cloneTypedArray(h,!0)):g=[]:isPlainObject$1(h)||isArguments(h)?(g=d,isArguments(d)?g=toPlainObject(d):(!isObject$6(d)||isFunction$3(d))&&(g=initCloneObject(h))):p=!1}p&&(u.set(h,g),l(g,h,a,c,u),u.delete(h)),assignMergeValue(s,n,g)}function baseMerge(s,o,n,a,l){s!==o&&baseFor(o,function(c,u){if(l||(l=new Stack),isObject$6(c))baseMergeDeep(s,o,u,n,baseMerge,a,l);else{var d=a?a(safeGet(s,u),c,u+"",s,o,l):void 0;d===void 0&&(d=c),assignMergeValue(s,u,d)}},keysIn)}var mergeWith=createAssigner(function(s,o,n,a){baseMerge(s,o,n,a)});function last(s){var o=s==null?0:s.length;return o?s[o-1]:void 0}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(s){return s=toString$1(s),s&&reHasRegExpChar.test(s)?s.replace(reRegExpChar,"\\$&"):s}function baseMap(s,o){var n=-1,a=isArrayLike$1(s)?Array(s.length):[];return baseEach(s,function(l,c,u){a[++n]=o(l,c,u)}),a}function map$2(s,o){var n=isArray$3(s)?arrayMap:baseMap;return n(s,baseIteratee(o))}var stringTag="[object String]";function isString$4(s){return typeof s=="string"||!isArray$3(s)&&isObjectLike(s)&&baseGetTag(s)==stringTag}function parent(s,o){return o.length<2?s:baseGet(s,baseSlice(o,0,-1))}function isElement$2(s){return isObjectLike(s)&&s.nodeType===1&&!isPlainObject$1(s)}function isEqual$1(s,o){return baseIsEqual(s,o)}function isEqualWith(s,o,n){n=typeof n=="function"?n:void 0;var a=n?n(s,o):void 0;return a===void 0?baseIsEqual(s,o,void 0,n):!!a}function mapValues(s,o){var n={};return o=baseIteratee(o),baseForOwn(s,function(a,l,c){baseAssignValue(n,l,o(a,l,c))}),n}var merge$3=createAssigner(function(s,o,n){baseMerge(s,o,n)});function baseUnset(s,o){return o=castPath(o,s),s=parent(s,o),s==null||delete s[toKey(last(o))]}function baseSet(s,o,n,a){if(!isObject$6(s))return s;o=castPath(o,s);for(var l=-1,c=o.length,u=c-1,d=s;d!=null&&++l<c;){var h=toKey(o[l]),f=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return s;if(l!=u){var g=d[h];f=void 0,f===void 0&&(f=isObject$6(g)?g:isIndex(o[l+1])?[]:{})}assignValue(d,h,f),d=d[h]}return s}function set$2(s,o,n){return s==null?s:baseSet(s,o,n)}var startCase=createCompounder(function(s,o,n){return s+(n?" ":"")+upperFirst(o)}),FUNC_ERROR_TEXT="Expected a function";function throttle$2(s,o,n){var a=!0,l=!0;if(typeof s!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$6(n)&&(a="leading"in n?!!n.leading:a,l="trailing"in n?!!n.trailing:l),debounce$1(s,o,{leading:a,maxWait:o,trailing:l})}function unset(s,o){return s==null?!0:baseUnset(s,o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let globalVar;try{globalVar={window,document}}catch{/* istanbul ignore next -- @preserve */globalVar={window:{},document:{}}}var global$1=globalVar;function getUserAgent(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const userAgent=getUserAgent(),env$1={isMac:isMac(userAgent),isWindows:isWindows(userAgent),isGecko:isGecko(userAgent),isSafari:isSafari(userAgent),isiOS:isiOS(userAgent),isAndroid:isAndroid(userAgent),isBlink:isBlink(userAgent),get isMediaForcedColors(){return isMediaForcedColors()},features:{isRegExpUnicodePropertySupported:isRegExpUnicodePropertySupported()}};function isMac(s){return s.indexOf("macintosh")>-1}function isWindows(s){return s.indexOf("windows")>-1}function isGecko(s){return!!s.match(/gecko\/\d+/)}function isSafari(s){return s.indexOf(" applewebkit/")>-1&&s.indexOf("chrome")===-1}function isiOS(s){return!!s.match(/iphone|ipad/i)||isMac(s)&&navigator.maxTouchPoints>0}function isAndroid(s){return s.indexOf("android")>-1}function isBlink(s){return s.indexOf("chrome/")>-1&&s.indexOf("edge/")<0}function isRegExpUnicodePropertySupported(){let s=!1;try{s="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return s}function isMediaForcedColors(){return global$1.window.matchMedia?global$1.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fastDiff(s,o,n,a){n=n||function(h,f){return h===f};const l=Array.isArray(s)?s:Array.prototype.slice.call(s),c=Array.isArray(o)?o:Array.prototype.slice.call(o),u=findChangeBoundaryIndexes(l,c,n);return a?changeIndexesToAtomicChanges(u,c.length):changeIndexesToChanges(c,u)}function findChangeBoundaryIndexes(s,o,n){const a=findFirstDifferenceIndex(s,o,n);if(a===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const l=cutAndReverse(s,a),c=cutAndReverse(o,a),u=findFirstDifferenceIndex(l,c,n),d=s.length-u,h=o.length-u;return{firstIndex:a,lastIndexOld:d,lastIndexNew:h}}function findFirstDifferenceIndex(s,o,n){for(let a=0;a<Math.max(s.length,o.length);a++)if(s[a]===void 0||o[a]===void 0||!n(s[a],o[a]))return a;return-1}function cutAndReverse(s,o){return s.slice(o).reverse()}function changeIndexesToChanges(s,o){const n=[],{firstIndex:a,lastIndexOld:l,lastIndexNew:c}=o;return c-a>0&&n.push({index:a,type:"insert",values:s.slice(a,c)}),l-a>0&&n.push({index:a+(c-a),type:"delete",howMany:l-a}),n}function changeIndexesToAtomicChanges(s,o){const{firstIndex:n,lastIndexOld:a,lastIndexNew:l}=s;if(n===-1)return Array(o).fill("equal");let c=[];return n>0&&(c=c.concat(Array(n).fill("equal"))),l-n>0&&(c=c.concat(Array(l-n).fill("insert"))),a-n>0&&(c=c.concat(Array(a-n).fill("delete"))),l<o&&(c=c.concat(Array(o-l).fill("equal"))),c}function diff(s,o,n){n=n||function(w,x){return w===x};const a=s.length,l=o.length;if(a>200||l>200||a+l>300)return diff.fastDiff(s,o,n,!0);let c,u;if(l<a){const w=s;s=o,o=w,c="delete",u="insert"}else c="insert",u="delete";const d=s.length,h=o.length,f=h-d,g={},p={};function v(w){const x=(p[w-1]!==void 0?p[w-1]:-1)+1,S=p[w+1]!==void 0?p[w+1]:-1,C=x>S?-1:1;g[w+C]&&(g[w]=g[w+C].slice(0)),g[w]||(g[w]=[]),g[w].push(x>S?c:u);let T=Math.max(x,S),R=T-w;for(;R<d&&T<h&&n(s[R],o[T]);)R++,T++,g[w].push("equal");return T}let b=0,_;do{for(_=-b;_<f;_++)p[_]=v(_);for(_=f+b;_>f;_--)p[_]=v(_);p[f]=v(f),b++}while(p[f]!==h);return g[f].slice(1)}diff.fastDiff=fastDiff;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spy(){return function s(){s.called=!0}}class EventInfo{constructor(o,n){E(this,"source");E(this,"name");E(this,"path");E(this,"stop");E(this,"off");E(this,"return");this.source=o,this.name=n,this.path=[],this.stop=spy(),this.off=spy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS=new Array(256).fill("").map((s,o)=>("0"+o.toString(16)).slice(-2));function uid(){const[s,o,n,a]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS[s>>0&255]+HEX_NUMBERS[s>>8&255]+HEX_NUMBERS[s>>16&255]+HEX_NUMBERS[s>>24&255]+HEX_NUMBERS[o>>0&255]+HEX_NUMBERS[o>>8&255]+HEX_NUMBERS[o>>16&255]+HEX_NUMBERS[o>>24&255]+HEX_NUMBERS[n>>0&255]+HEX_NUMBERS[n>>8&255]+HEX_NUMBERS[n>>16&255]+HEX_NUMBERS[n>>24&255]+HEX_NUMBERS[a>>0&255]+HEX_NUMBERS[a>>8&255]+HEX_NUMBERS[a>>16&255]+HEX_NUMBERS[a>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const priorities={get(s="normal"){return typeof s!="number"?this[s]||this.normal:s},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function insertToPriorityArray(s,o){const n=priorities.get(o.priority);let a=0,l=s.length;for(;a<l;){const c=a+l>>1;priorities.get(s[c].priority)<n?l=c:a=c+1}s.splice(a,0,o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const DOCUMENTATION_URL="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class CKEditorError extends Error{constructor(n,a,l){super(getErrorMessage(n,l));E(this,"context");E(this,"data");this.name="CKEditorError",this.context=a,this.data=l}is(n){return n==="CKEditorError"}static rethrowUnexpectedError(n,a){if(n.is&&n.is("CKEditorError"))throw n;const l=new CKEditorError(n.message,a);throw l.stack=n.stack,l}}function logWarning(s,o){console.warn(...formatConsoleArguments(s,o))}function logError$1(s,o){console.error(...formatConsoleArguments(s,o))}function getLinkToDocumentationMessage(s){return`
Read more: ${DOCUMENTATION_URL}#error-${s}`}function getErrorMessage(s,o){const n=new WeakSet,l=o?` ${JSON.stringify(o,(u,d)=>{if(typeof d=="object"&&d!==null){if(n.has(d))return`[object ${d.constructor.name}]`;n.add(d)}return d})}`:"",c=getLinkToDocumentationMessage(s);return s+l+c}function formatConsoleArguments(s,o){const n=getLinkToDocumentationMessage(s);return o?[s,o,n]:[s,n]}const version$2="44.3.0",releaseDate=new Date(2025,2,5);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new CKEditorError("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=version$2;const _listeningTo=Symbol("listeningTo"),_emitterId=Symbol("emitterId"),_delegations=Symbol("delegations"),defaultEmitterClass$1=EmitterMixin(Object);function EmitterMixin(s){if(!s)return defaultEmitterClass$1;class o extends s{on(a,l,c){this.listenTo(this,a,l,c)}once(a,l,c){let u=!1;const d=(h,...f)=>{u||(u=!0,h.off(),l.call(this,h,...f))};this.listenTo(this,a,d,c)}off(a,l){this.stopListening(this,a,l)}listenTo(a,l,c,u={}){let d,h;this[_listeningTo]||(this[_listeningTo]={});const f=this[_listeningTo];_getEmitterId(a)||_setEmitterId(a);const g=_getEmitterId(a);(d=f[g])||(d=f[g]={emitter:a,callbacks:{}}),(h=d.callbacks[l])||(h=d.callbacks[l]=[]),h.push(c),addEventListener$1(this,a,l,c,u)}stopListening(a,l,c){const u=this[_listeningTo];let d=a&&_getEmitterId(a);const h=u&&d?u[d]:void 0,f=h&&l?h.callbacks[l]:void 0;if(!(!u||a&&!h||l&&!f))if(c)removeEventListener$1(this,a,l,c),f.indexOf(c)!==-1&&(f.length===1?delete h.callbacks[l]:removeEventListener$1(this,a,l,c));else if(f){for(;c=f.pop();)removeEventListener$1(this,a,l,c);delete h.callbacks[l]}else if(h){for(l in h.callbacks)this.stopListening(a,l);delete u[d]}else{for(d in u)this.stopListening(u[d].emitter);delete this[_listeningTo]}}fire(a,...l){try{const c=a instanceof EventInfo?a:new EventInfo(this,a),u=c.name;let d=getCallbacksForEvent(this,u);if(c.path.push(this),d){d=d.slice();for(let f=0;f<d.length;f++){const g=d[f].callback;if(g.call(this,c,...l),c.off.called&&(delete c.off.called,this._removeEventListener(u,g)),c.stop.called)break}}const h=this[_delegations];if(h){const f=h.get(u),g=h.get("*");f&&fireDelegatedEvents(f,c,l),g&&fireDelegatedEvents(g,c,l)}return c.return}catch(c){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(c,this)}}delegate(...a){return{to:(l,c)=>{this[_delegations]||(this[_delegations]=new Map),a.forEach(u=>{const d=this[_delegations].get(u);d?d.set(l,c):this[_delegations].set(u,new Map([[l,c]]))})}}}stopDelegating(a,l){if(this[_delegations])if(!a)this[_delegations].clear();else if(!l)this[_delegations].delete(a);else{const c=this[_delegations].get(a);c&&c.delete(l)}}_addEventListener(a,l,c){createEventNamespace(this,a);const u=getCallbacksListsForNamespace(this,a),d=priorities.get(c.priority),h={callback:l,priority:d};for(const f of u)insertToPriorityArray(f,h)}_removeEventListener(a,l){const c=getCallbacksListsForNamespace(this,a);for(const u of c)for(let d=0;d<u.length;d++)u[d].callback==l&&(u.splice(d,1),d--)}}return o}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{EmitterMixin[s]=defaultEmitterClass$1.prototype[s]});function _getEmitterListenedTo(s,o){const n=s[_listeningTo];return n&&n[o]?n[o].emitter:null}function _setEmitterId(s,o){s[_emitterId]||(s[_emitterId]=o||uid())}function _getEmitterId(s){return s[_emitterId]}function getEvents(s){return s._events||Object.defineProperty(s,"_events",{value:{}}),s._events}function makeEventNode(){return{callbacks:[],childEvents:[]}}function createEventNamespace(s,o){const n=getEvents(s);if(n[o])return;let a=o,l=null;const c=[];for(;a!==""&&!n[a];)n[a]=makeEventNode(),c.push(n[a]),l&&n[a].childEvents.push(l),l=a,a=a.substr(0,a.lastIndexOf(":"));if(a!==""){for(const u of c)u.callbacks=n[a].callbacks.slice();n[a].childEvents.push(l)}}function getCallbacksListsForNamespace(s,o){const n=getEvents(s)[o];if(!n)return[];let a=[n.callbacks];for(let l=0;l<n.childEvents.length;l++){const c=getCallbacksListsForNamespace(s,n.childEvents[l]);a=a.concat(c)}return a}function getCallbacksForEvent(s,o){if(!s._events)return null;let n=o;do{const a=s._events[n];if(a&&a.callbacks&&a.callbacks.length)return a.callbacks;const l=n.lastIndexOf(":");n=l>-1?n.substring(0,l):""}while(n);return null}function fireDelegatedEvents(s,o,n){for(let[a,l]of s){l?typeof l=="function"&&(l=l(o.name)):l=o.name;const c=new EventInfo(o.source,l);c.path=[...o.path],a.fire(c,...n)}}function addEventListener$1(s,o,n,a,l){o._addEventListener?o._addEventListener(n,a,l):s._addEventListener.call(o,n,a,l)}function removeEventListener$1(s,o,n,a){o._removeEventListener?o._removeEventListener(n,a):s._removeEventListener.call(o,n,a)}const observablePropertiesSymbol=Symbol("observableProperties"),boundObservablesSymbol=Symbol("boundObservables"),boundPropertiesSymbol=Symbol("boundProperties"),decoratedMethods=Symbol("decoratedMethods"),decoratedOriginal=Symbol("decoratedOriginal"),defaultObservableClass=ObservableMixin(EmitterMixin());function ObservableMixin(s){var n,a,l,c,u;if(!s)return defaultObservableClass;class o extends(u=s,c=observablePropertiesSymbol,l=decoratedMethods,a=boundPropertiesSymbol,n=boundObservablesSymbol,u){constructor(){super(...arguments);E(this,c);E(this,l);E(this,a);E(this,n)}set(f,g){if(isObject$6(f)){Object.keys(f).forEach(v=>{this.set(v,f[v])},this);return}initObservable(this);const p=this[observablePropertiesSymbol];if(f in this&&!p.has(f))throw new CKEditorError("observable-set-cannot-override",this);Object.defineProperty(this,f,{enumerable:!0,configurable:!0,get(){return p.get(f)},set(v){const b=p.get(f);let _=this.fire(`set:${f}`,f,v,b);_===void 0&&(_=v),(b!==_||!p.has(f))&&(p.set(f,_),this.fire(`change:${f}`,f,_,b))}}),this[f]=g}bind(...f){if(!f.length||!isStringArray$1(f))throw new CKEditorError("observable-bind-wrong-properties",this);if(new Set(f).size!==f.length)throw new CKEditorError("observable-bind-duplicate-properties",this);initObservable(this);const g=this[boundPropertiesSymbol];f.forEach(v=>{if(g.has(v))throw new CKEditorError("observable-bind-rebind",this)});const p=new Map;return f.forEach(v=>{const b={property:v,to:[]};g.set(v,b),p.set(v,b)}),{to:bindTo,toMany:bindToMany,_observable:this,_bindProperties:f,_to:[],_bindings:p}}unbind(...f){if(!this[observablePropertiesSymbol])return;const g=this[boundPropertiesSymbol],p=this[boundObservablesSymbol];if(f.length){if(!isStringArray$1(f))throw new CKEditorError("observable-unbind-wrong-properties",this);f.forEach(v=>{const b=g.get(v);b&&(b.to.forEach(([_,w])=>{const x=p.get(_),S=x[w];S.delete(b),S.size||delete x[w],Object.keys(x).length||(p.delete(_),this.stopListening(_,"change"))}),g.delete(v))})}else p.forEach((v,b)=>{this.stopListening(b,"change")}),p.clear(),g.clear()}decorate(f){initObservable(this);const g=this[f];if(!g)throw new CKEditorError("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:f});this.on(f,(p,v)=>{p.return=g.apply(this,v)}),this[f]=function(...p){return this.fire(f,p)},this[f][decoratedOriginal]=g,this[decoratedMethods]||(this[decoratedMethods]=[]),this[decoratedMethods].push(f)}stopListening(f,g,p){if(!f&&this[decoratedMethods]){for(const v of this[decoratedMethods])this[v]=this[v][decoratedOriginal];delete this[decoratedMethods]}super.stopListening(f,g,p)}}return o}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{ObservableMixin[s]=defaultObservableClass.prototype[s]});function initObservable(s){s[observablePropertiesSymbol]||(Object.defineProperty(s,observablePropertiesSymbol,{value:new Map}),Object.defineProperty(s,boundObservablesSymbol,{value:new Map}),Object.defineProperty(s,boundPropertiesSymbol,{value:new Map}))}function bindTo(...s){const o=parseBindToArgs(...s),n=Array.from(this._bindings.keys()),a=n.length;if(!o.callback&&o.to.length>1)throw new CKEditorError("observable-bind-to-no-callback",this);if(a>1&&o.callback)throw new CKEditorError("observable-bind-to-extra-callback",this);o.to.forEach(l=>{if(l.properties.length&&l.properties.length!==a)throw new CKEditorError("observable-bind-to-properties-length",this);l.properties.length||(l.properties=this._bindProperties)}),this._to=o.to,o.callback&&(this._bindings.get(n[0]).callback=o.callback),attachBindToListeners(this._observable,this._to),updateBindToBound(this),this._bindProperties.forEach(l=>{updateBoundObservableProperty(this._observable,l)})}function bindToMany(s,o,n){if(this._bindings.size>1)throw new CKEditorError("observable-bind-to-many-not-one-binding",this);this.to(...getBindingTargets(s,o),n)}function getBindingTargets(s,o){const n=s.map(a=>[a,o]);return Array.prototype.concat.apply([],n)}function isStringArray$1(s){return s.every(o=>typeof o=="string")}function parseBindToArgs(...s){if(!s.length)throw new CKEditorError("observable-bind-to-parse-error",null);const o={to:[]};let n;return typeof s[s.length-1]=="function"&&(o.callback=s.pop()),s.forEach(a=>{if(typeof a=="string")n.properties.push(a);else if(typeof a=="object")n={observable:a,properties:[]},o.to.push(n);else throw new CKEditorError("observable-bind-to-parse-error",null)}),o}function updateBoundObservables(s,o,n,a){const l=s[boundObservablesSymbol],c=l.get(n),u=c||{};u[a]||(u[a]=new Set),u[a].add(o),c||l.set(n,u)}function updateBindToBound(s){let o;s._bindings.forEach((n,a)=>{s._to.forEach(l=>{o=l.properties[n.callback?0:s._bindProperties.indexOf(a)],n.to.push([l.observable,o]),updateBoundObservables(s._observable,n,l.observable,o)})})}function updateBoundObservableProperty(s,o){const a=s[boundPropertiesSymbol].get(o);let l;a.callback?l=a.callback.apply(s,a.to.map(c=>c[0][c[1]])):(l=a.to[0],l=l[0][l[1]]),Object.prototype.hasOwnProperty.call(s,o)?s[o]=l:s.set(o,l)}function attachBindToListeners(s,o){o.forEach(n=>{const a=s[boundObservablesSymbol];let l;a.get(n.observable)||s.listenTo(n.observable,"change",(c,u)=>{l=a.get(n.observable)[u],l&&l.forEach(d=>{updateBoundObservableProperty(s,d.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ElementReplacer{constructor(){E(this,"_replacedElements");this._replacedElements=[]}replace(o,n){this._replacedElements.push({element:o,newElement:n}),o.style.display="none",n&&o.parentNode.insertBefore(n,o.nextSibling)}restore(){this._replacedElements.forEach(({element:o,newElement:n})=>{o.style.display="",n&&n.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function count$1(s){let o=0;for(const n of s)o++;return o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function compareArrays(s,o){const n=Math.min(s.length,o.length);for(let a=0;a<n;a++)if(s[a]!=o[a])return a;return s.length==o.length?"same":s.length<o.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isIterable(s){return!!(s&&s[Symbol.iterator])}function createElement$1(s,o,n={},a=[]){const l=n&&n.xmlns,c=l?s.createElementNS(l,o):s.createElement(o);for(const u in n)c.setAttribute(u,n[u]);(isString$4(a)||!isIterable(a))&&(a=[a]);for(let u of a)isString$4(u)&&(u=s.createTextNode(u)),c.appendChild(u);return c}class Config{constructor(o,n){E(this,"_config");this._config=Object.create(null),n&&this.define(cloneConfig(n)),o&&this._setObjectToTarget(this._config,o)}set(o,n){this._setToTarget(this._config,o,n)}define(o,n){this._setToTarget(this._config,o,n,!0)}get(o){return this._getFromSource(this._config,o)}*names(){for(const o of Object.keys(this._config))yield o}_setToTarget(o,n,a,l=!1){if(isPlainObject$1(n)){this._setObjectToTarget(o,n,l);return}const c=n.split(".");n=c.pop();for(const u of c)isPlainObject$1(o[u])||(o[u]=Object.create(null)),o=o[u];if(isPlainObject$1(a)){isPlainObject$1(o[n])||(o[n]=Object.create(null)),o=o[n],this._setObjectToTarget(o,a,l);return}l&&typeof o[n]<"u"||(o[n]=a)}_getFromSource(o,n){const a=n.split(".");n=a.pop();for(const l of a){if(!isPlainObject$1(o[l])){o=null;break}o=o[l]}return o?cloneConfig(o[n]):void 0}_setObjectToTarget(o,n,a){Object.keys(n).forEach(l=>{this._setToTarget(o,l,n[l],a)})}}function cloneConfig(s){return cloneDeepWith(s,leaveItemReferences)}function leaveItemReferences(s){return isElement$2(s)||typeof s=="function"?s:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isNode(s){if(s){if(s.defaultView)return s instanceof s.defaultView.Document;if(s.ownerDocument&&s.ownerDocument.defaultView)return s instanceof s.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isWindow(s){const o=Object.prototype.toString.apply(s);return o=="[object Window]"||o=="[object global]"}const defaultEmitterClass=DomEmitterMixin(EmitterMixin());function DomEmitterMixin(s){if(!s)return defaultEmitterClass;class o extends s{listenTo(a,l,c,u={}){if(isNode(a)||isWindow(a)){const d={capture:!!u.useCapture,passive:!!u.usePassive},h=this._getProxyEmitter(a,d)||new ProxyEmitter(a,d);this.listenTo(h,l,c,u)}else super.listenTo(a,l,c,u)}stopListening(a,l,c){if(isNode(a)||isWindow(a)){const u=this._getAllProxyEmitters(a);for(const d of u)this.stopListening(d,l,c)}else super.stopListening(a,l,c)}_getProxyEmitter(a,l){return _getEmitterListenedTo(this,getProxyEmitterId(a,l))}_getAllProxyEmitters(a){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(l=>this._getProxyEmitter(a,l)).filter(l=>!!l)}}return o}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(s=>{DomEmitterMixin[s]=defaultEmitterClass.prototype[s]});class ProxyEmitter extends EmitterMixin(){constructor(n,a){super();E(this,"_domNode");E(this,"_options");E(this,"_domListeners");_setEmitterId(this,getProxyEmitterId(n,a)),this._domNode=n,this._options=a}attach(n){if(this._domListeners&&this._domListeners[n])return;const a=this._createDomListener(n);this._domNode.addEventListener(n,a,this._options),this._domListeners||(this._domListeners={}),this._domListeners[n]=a}detach(n){let a;this._domListeners[n]&&(!(a=this._events[n])||!a.callbacks.length)&&this._domListeners[n].removeListener()}_addEventListener(n,a,l){this.attach(n),EmitterMixin().prototype._addEventListener.call(this,n,a,l)}_removeEventListener(n,a){EmitterMixin().prototype._removeEventListener.call(this,n,a),this.detach(n)}_createDomListener(n){const a=l=>{this.fire(n,l)};return a.removeListener=()=>{this._domNode.removeEventListener(n,a,this._options),delete this._domListeners[n]},a}}function getNodeUID(s){return s["data-ck-expando"]||(s["data-ck-expando"]=uid())}function getProxyEmitterId(s,o){let n=getNodeUID(s);for(const a of Object.keys(o).sort())o[a]&&(n+="-"+a);return n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getAncestors(s){const o=[];let n=s;for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)o.unshift(n),n=n.parentNode;return o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getDataFromElement(s){return s instanceof HTMLTextAreaElement?s.value:s.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getBorderWidths(s){const o=s.ownerDocument.defaultView.getComputedStyle(s);return{top:parseInt(o.borderTopWidth,10),right:parseInt(o.borderRightWidth,10),bottom:parseInt(o.borderBottomWidth,10),left:parseInt(o.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getRangeFromMouseEvent(s){if(!s.target)return null;const o=s.target.ownerDocument,n=s.clientX,a=s.clientY;let l=null;return o.caretRangeFromPoint&&o.caretRangeFromPoint(n,a)?l=o.caretRangeFromPoint(n,a):s.rangeParent&&(l=o.createRange(),l.setStart(s.rangeParent,s.rangeOffset),l.collapse(!0)),l}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isText(s){return Object.prototype.toString.call(s)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isRange(s){return Object.prototype.toString.apply(s)=="[object Range]"}function getPositionedAncestor(s){return!s||!s.parentNode||s.offsetParent===global$1.document.body?null:s.offsetParent}const rectProperties=["top","right","bottom","left","width","height"];let Rect$3=class ct{constructor(o){E(this,"top");E(this,"right");E(this,"bottom");E(this,"left");E(this,"width");E(this,"height");E(this,"_source");const n=isRange(o);if(Object.defineProperty(this,"_source",{value:o._source||o,writable:!0,enumerable:!1}),isDomElement(o)||n)if(n){const a=ct.getDomRangeRects(o);copyRectProperties(this,ct.getBoundingRect(a))}else copyRectProperties(this,o.getBoundingClientRect());else if(isWindow(o)){const{innerWidth:a,innerHeight:l}=o;copyRectProperties(this,{top:0,right:a,bottom:l,left:0,width:a,height:l})}else copyRectProperties(this,o)}clone(){return new ct(this)}moveTo(o,n){return this.top=n,this.right=o+this.width,this.bottom=n+this.height,this.left=o,this}moveBy(o,n){return this.top+=n,this.right+=o,this.left+=o,this.bottom+=n,this}getIntersection(o){const n={top:Math.max(this.top,o.top),right:Math.min(this.right,o.right),bottom:Math.min(this.bottom,o.bottom),left:Math.max(this.left,o.left),width:0,height:0};if(n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0)return null;{const a=new ct(n);return a._source=this._source,a}}getIntersectionArea(o){const n=this.getIntersection(o);return n?n.getArea():0}getArea(){return this.width*this.height}getVisible(){const o=this._source;let n=this.clone();if(isBody(o))return n;let a=o,l=o.parentNode||o.commonAncestorContainer,c;for(;l&&!isBody(l);){const u=getElementOverflow(l)==="visible";a instanceof HTMLElement&&getElementPosition(a)==="absolute"&&(c=a);const d=getElementPosition(l);if(u||c&&(d==="relative"&&u||d!=="relative")){a=l,l=l.parentNode;continue}const h=new ct(l),f=n.getIntersection(h);if(f)f.getArea()<n.getArea()&&(n=f);else return null;a=l,l=l.parentNode}return n}isEqual(o){for(const n of rectProperties)if(this[n]!==o[n])return!1;return!0}contains(o){const n=this.getIntersection(o);return!!(n&&n.isEqual(o))}toAbsoluteRect(){const{scrollX:o,scrollY:n}=global$1.window,a=this.clone().moveBy(o,n);if(isDomElement(a._source)){const l=getPositionedAncestor(a._source);l&&shiftRectToCompensatePositionedAncestor(a,l)}return a}excludeScrollbarsAndBorders(){const o=this._source;let n,a,l;if(isWindow(o))n=o.innerWidth-o.document.documentElement.clientWidth,a=o.innerHeight-o.document.documentElement.clientHeight,l=o.getComputedStyle(o.document.documentElement).direction;else{const c=getBorderWidths(o);n=o.offsetWidth-o.clientWidth-c.left-c.right,a=o.offsetHeight-o.clientHeight-c.top-c.bottom,l=o.ownerDocument.defaultView.getComputedStyle(o).direction,this.left+=c.left,this.top+=c.top,this.right-=c.right,this.bottom-=c.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=n,l==="ltr"?this.right-=n:this.left+=n,this.height-=a,this.bottom-=a,this}static getDomRangeRects(o){const n=[],a=Array.from(o.getClientRects());if(a.length)for(const l of a)n.push(new ct(l));else{let l=o.startContainer;isText(l)&&(l=l.parentNode);const c=new ct(l.getBoundingClientRect());c.right=c.left,c.width=0,n.push(c)}return n}static getBoundingRect(o){const n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let a=0;for(const l of o)a++,n.left=Math.min(n.left,l.left),n.top=Math.min(n.top,l.top),n.right=Math.max(n.right,l.right),n.bottom=Math.max(n.bottom,l.bottom);return a==0?null:(n.width=n.right-n.left,n.height=n.bottom-n.top,new ct(n))}};function copyRectProperties(s,o){for(const n of rectProperties)s[n]=o[n]}function isBody(s){return isDomElement(s)?s===s.ownerDocument.body:!1}function isDomElement(s){return s!==null&&typeof s=="object"&&s.nodeType===1&&typeof s.getBoundingClientRect=="function"}function getElementPosition(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).position:"static"}function getElementOverflow(s){return s instanceof HTMLElement?s.ownerDocument.defaultView.getComputedStyle(s).overflow:"visible"}function shiftRectToCompensatePositionedAncestor(s,o){const n=new Rect$3(o),a=getBorderWidths(o);let l=0,c=0;l-=n.left,c-=n.top,l+=o.scrollLeft,c+=o.scrollTop,l-=a.left,c-=a.top,s.moveBy(l,c)}var We;let ResizeObserver$1=(We=class{constructor(o,n){E(this,"_element");E(this,"_callback");We._observerInstance||We._createObserver(),this._element=o,this._callback=n,We._addElementCallback(o,n),We._observerInstance.observe(o)}get element(){return this._element}destroy(){We._deleteElementCallback(this._element,this._callback)}static _addElementCallback(o,n){We._elementCallbacks||(We._elementCallbacks=new Map);let a=We._elementCallbacks.get(o);a||(a=new Set,We._elementCallbacks.set(o,a)),a.add(n)}static _deleteElementCallback(o,n){const a=We._getElementCallbacks(o);a&&(a.delete(n),a.size||(We._elementCallbacks.delete(o),We._observerInstance.unobserve(o))),We._elementCallbacks&&!We._elementCallbacks.size&&(We._observerInstance=null,We._elementCallbacks=null)}static _getElementCallbacks(o){return We._elementCallbacks?We._elementCallbacks.get(o):null}static _createObserver(){We._observerInstance=new global$1.window.ResizeObserver(o=>{for(const n of o){const a=We._getElementCallbacks(n.target);if(a)for(const l of a)l(n)}})}},E(We,"_observerInstance",null),E(We,"_elementCallbacks",null),We);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function setDataInElement(s,o){s instanceof HTMLTextAreaElement&&(s.value=o),s.innerHTML=o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toUnit(s){return o=>o+s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function indexOf$2(s){let o=0;for(;s.previousSibling;)s=s.previousSibling,o++;return o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function insertAt(s,o,n){s.insertBefore(n,s.childNodes[o]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isComment(s){return s&&s.nodeType===Node.COMMENT_NODE}function isValidAttributeName(s){try{global$1.document.createAttribute(s)}catch{return!1}return!0}function isVisible(s){return s?isText(s)?isVisible(s.parentElement):s.getClientRects?!!s.getClientRects().length:!1:!1}function getOptimalPosition({element:s,target:o,positions:n,limiter:a,fitInViewport:l,viewportOffsetConfig:c}){isFunction$3(o)&&(o=o()),isFunction$3(a)&&(a=a());const u=getPositionedAncestor(s),d=getConstrainedViewportRect(c),h=new Rect$3(s),f=getVisibleViewportIntersectionRect(o,d);let g;if(!f||!d.getIntersection(f))return null;const p={targetRect:f,elementRect:h,positionedElementAncestor:u,viewportRect:d};if(!a&&!l)g=new PositionObject(n[0],p);else{if(a){const v=getVisibleViewportIntersectionRect(a,d);v&&(p.limiterRect=v)}g=getBestPosition(n,p)}return g}function getVisibleViewportIntersectionRect(s,o){const n=new Rect$3(s).getVisible();return n?n.getIntersection(o):null}function getConstrainedViewportRect(s){s=Object.assign({top:0,bottom:0,left:0,right:0},s);const o=new Rect$3(global$1.window);return o.top+=s.top,o.height-=s.top,o.bottom-=s.bottom,o.height-=s.bottom,o}function getBestPosition(s,o){const{elementRect:n}=o,a=n.getArea(),l=s.map(d=>new PositionObject(d,o)).filter(d=>!!d.name);let c=0,u=null;for(const d of l){const{limiterIntersectionArea:h,viewportIntersectionArea:f}=d;if(h===a)return d;const g=f**2+h**2;g>c&&(c=g,u=d)}return u}class PositionObject{constructor(o,n){E(this,"name");E(this,"config");E(this,"_positioningFunctionCoordinates");E(this,"_options");E(this,"_cachedRect");E(this,"_cachedAbsoluteRect");const a=o(n.targetRect,n.elementRect,n.viewportRect,n.limiterRect);if(!a)return;const{left:l,top:c,name:u,config:d}=a;this.name=u,this.config=d,this._positioningFunctionCoordinates={left:l,top:c},this._options=n}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const o=this._options.limiterRect;return o?o.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function remove$3(s){const o=s.parentNode;o&&o.removeChild(s)}function scrollViewportToShowTarget({target:s,viewportOffset:o=0,ancestorOffset:n=0,alignToTop:a,forceScroll:l}){const c=getWindow(s);let u=c,d=null;for(o=normalizeViewportOffset(o);u;){let h;u==c?h=getParentElement(s):h=getParentElement(d),scrollAncestorsToShowRect({parent:h,getRect:()=>getRectRelativeToWindow(s,u),alignToTop:a,ancestorOffset:n,forceScroll:l});let f=getRectRelativeToWindow(s,u);const g=getRectRelativeToWindow(h,u);if(f.height>g.height){const p=f.getIntersection(g);p&&(f=p)}if(scrollWindowToShowRect({window:u,rect:f,viewportOffset:o,alignToTop:a,forceScroll:l}),u.parent!=u){if(d=u.frameElement,u=u.parent,!d)return}else u=null}}function scrollWindowToShowRect({window:s,rect:o,alignToTop:n,forceScroll:a,viewportOffset:l}){const c=o.clone().moveBy(0,l.bottom),u=o.clone().moveBy(0,-l.top),d=new Rect$3(s).excludeScrollbarsAndBorders(),h=[u,c],f=n&&a,g=h.every(w=>d.contains(w));let{scrollX:p,scrollY:v}=s;const b=p,_=v;f?v-=d.top-o.top+l.top:g||(isAbove(u,d)?v-=d.top-o.top+l.top:isBelow(c,d)&&(n?v+=o.top-d.top-l.top:v+=o.bottom-d.bottom+l.bottom)),g||(isLeftOf(o,d)?p-=d.left-o.left+l.left:isRightOf(o,d)&&(p+=o.right-d.right+l.right)),(p!=b||v!==_)&&s.scrollTo(p,v)}function scrollAncestorsToShowRect({parent:s,getRect:o,alignToTop:n,forceScroll:a,ancestorOffset:l=0,limiterElement:c}){const u=getWindow(s),d=n&&a;let h,f,g;const p=c||u.document.body;for(;s!=p;)f=o(),h=new Rect$3(s).excludeScrollbarsAndBorders(),g=h.contains(f),d?s.scrollTop-=h.top-f.top+l:g||(isAbove(f,h)?s.scrollTop-=h.top-f.top+l:isBelow(f,h)&&(n?s.scrollTop+=f.top-h.top-l:s.scrollTop+=f.bottom-h.bottom+l)),g||(isLeftOf(f,h)?s.scrollLeft-=h.left-f.left+l:isRightOf(f,h)&&(s.scrollLeft+=f.right-h.right+l)),s=s.parentNode}function isBelow(s,o){return s.bottom>o.bottom}function isAbove(s,o){return s.top<o.top}function isLeftOf(s,o){return s.left<o.left}function isRightOf(s,o){return s.right>o.right}function getWindow(s){return isRange(s)?s.startContainer.ownerDocument.defaultView:s.ownerDocument.defaultView}function getParentElement(s){if(isRange(s)){let o=s.commonAncestorContainer;return isText(o)&&(o=o.parentNode),o}else return s.parentNode}function getRectRelativeToWindow(s,o){const n=getWindow(s),a=new Rect$3(s);if(n===o)return a;{let l=n;for(;l!=o;){const c=l.frameElement,u=new Rect$3(c).excludeScrollbarsAndBorders();a.moveBy(u.left,u.top),l=l.parent}}return a}function normalizeViewportOffset(s){return typeof s=="number"?{top:s,bottom:s,left:s,right:s}:s}const modifiersToGlyphsMac={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},modifiersToGlyphsNonMac={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},keyCodesToGlyphs={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},keyCodes=generateKnownKeyCodes(),keyCodeNames=Object.fromEntries(Object.entries(keyCodes).map(([s,o])=>{let n;return o in keyCodesToGlyphs?n=keyCodesToGlyphs[o]:n=s.charAt(0).toUpperCase()+s.slice(1),[o,n]}));function getCode(s){let o;if(typeof s=="string"){if(o=keyCodes[s.toLowerCase()],!o)throw new CKEditorError("keyboard-unknown-key",null,{key:s})}else o=s.keyCode+(s.altKey?keyCodes.alt:0)+(s.ctrlKey?keyCodes.ctrl:0)+(s.shiftKey?keyCodes.shift:0)+(s.metaKey?keyCodes.cmd:0);return o}function parseKeystroke(s){return typeof s=="string"&&(s=splitKeystrokeText(s)),s.map(o=>typeof o=="string"?getEnvKeyCode(o):o).reduce((o,n)=>n+o,0)}function getEnvKeystrokeText(s,o){let n=parseKeystroke(s);const a=env$1.isMac||env$1.isiOS;return Object.entries(a?modifiersToGlyphsMac:modifiersToGlyphsNonMac).reduce((u,[d,h])=>((n&keyCodes[d])!=0&&(n&=~keyCodes[d],u+=h),u),"")+(n?keyCodeNames[n]:"")}function isArrowKeyCode(s){return s==keyCodes.arrowright||s==keyCodes.arrowleft||s==keyCodes.arrowup||s==keyCodes.arrowdown}function getLocalizedArrowKeyCodeDirection(s,o){const n=o==="ltr";switch(s){case keyCodes.arrowleft:return n?"left":"right";case keyCodes.arrowright:return n?"right":"left";case keyCodes.arrowup:return"up";case keyCodes.arrowdown:return"down"}}function getEnvKeyCode(s){if(s.endsWith("!"))return getCode(s.slice(0,-1));const o=getCode(s);return(env$1.isMac||env$1.isiOS)&&o==keyCodes.ctrl?keyCodes.cmd:o}function isForwardArrowKeyCode(s,o){const n=getLocalizedArrowKeyCodeDirection(s,o);return n==="down"||n==="right"}function generateKnownKeyCodes(){const s={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let o=65;o<=90;o++){const n=String.fromCharCode(o);s[n.toLowerCase()]=o}for(let o=48;o<=57;o++)s[o-48]=o;for(let o=112;o<=123;o++)s["f"+(o-111)]=o;return Object.assign(s,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),s}function splitKeystrokeText(s){return s.split("+").map(o=>o.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const RTL_LANGUAGE_CODES=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function getLanguageDirection(s){return RTL_LANGUAGE_CODES.includes(s)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toArray$2(s){return Array.isArray(s)?s:[s]}/* istanbul ignore else -- @preserve */global$1.window.CKEDITOR_TRANSLATIONS||(global$1.window.CKEDITOR_TRANSLATIONS={});function _translate(s,o,n=1,a){if(typeof n!="number")throw new CKEditorError("translation-service-quantity-not-a-number",null,{quantity:n});const l=a||global$1.window.CKEDITOR_TRANSLATIONS,c=getNumberOfLanguages(l);c===1&&(s=Object.keys(l)[0]);const u=o.id||o.string;if(c===0||!hasTranslation(s,u,l))return n!==1?o.plural:o.string;const d=l[s].dictionary,h=l[s].getPluralForm||(p=>p===1?0:1),f=d[u];if(typeof f=="string")return f;const g=Number(h(n));return f[g]}function _unifyTranslations(s){return Array.isArray(s)?s.reduce((o,n)=>merge$3(o,n)):s}function hasTranslation(s,o,n){return!!n[s]&&!!n[s].dictionary[o]}function getNumberOfLanguages(s){return Object.keys(s).length}class Locale{constructor({uiLanguage:o="en",contentLanguage:n,translations:a}={}){E(this,"uiLanguage");E(this,"uiLanguageDirection");E(this,"contentLanguage");E(this,"contentLanguageDirection");E(this,"t");E(this,"translations");this.uiLanguage=o,this.contentLanguage=n||this.uiLanguage,this.uiLanguageDirection=getLanguageDirection(this.uiLanguage),this.contentLanguageDirection=getLanguageDirection(this.contentLanguage),this.translations=_unifyTranslations(a),this.t=(l,c)=>this._t(l,c)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(o,n=[]){n=toArray$2(n),typeof o=="string"&&(o={string:o});const l=!!o.plural?n[0]:1,c=_translate(this.uiLanguage,o,l,this.translations);return interpolateString(c,n)}}function interpolateString(s,o){return s.replace(/%(\d+)/g,(n,a)=>a<o.length?o[a]:n)}class Collection extends EmitterMixin(){constructor(n={},a={}){super();E(this,"_items");E(this,"_itemMap");E(this,"_idProperty");E(this,"_bindToCollection");E(this,"_bindToExternalToInternalMap");E(this,"_bindToInternalToExternalMap");E(this,"_skippedIndexesFromExternal");const l=isIterable(n);if(l||(a=n),this._items=[],this._itemMap=new Map,this._idProperty=a.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],l)for(const c of n)this._items.push(c),this._itemMap.set(this._getItemIdBeforeAdding(c),c)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(n,a){return this.addMany([n],a)}addMany(n,a){if(a===void 0)a=this._items.length;else if(a>this._items.length||a<0)throw new CKEditorError("collection-add-item-invalid-index",this);let l=0;for(const c of n){const u=this._getItemIdBeforeAdding(c),d=a+l;this._items.splice(d,0,c),this._itemMap.set(u,c),this.fire("add",c,d),l++}return this.fire("change",{added:n,removed:[],index:a}),this}get(n){let a;if(typeof n=="string")a=this._itemMap.get(n);else if(typeof n=="number")a=this._items[n];else throw new CKEditorError("collection-get-invalid-arg",this);return a||null}has(n){if(typeof n=="string")return this._itemMap.has(n);{const a=this._idProperty,l=n[a];return l&&this._itemMap.has(l)}}getIndex(n){let a;return typeof n=="string"?a=this._itemMap.get(n):a=n,a?this._items.indexOf(a):-1}remove(n){const[a,l]=this._remove(n);return this.fire("change",{added:[],removed:[a],index:l}),a}map(n,a){return this._items.map(n,a)}forEach(n,a){this._items.forEach(n,a)}find(n,a){return this._items.find(n,a)}filter(n,a){return this._items.filter(n,a)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const n=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:n,index:0})}bindTo(n){if(this._bindToCollection)throw new CKEditorError("collection-bind-to-rebind",this);return this._bindToCollection=n,{as:a=>{this._setUpBindToBinding(l=>new a(l))},using:a=>{typeof a=="function"?this._setUpBindToBinding(a):this._setUpBindToBinding(l=>l[a])}}}_setUpBindToBinding(n){const a=this._bindToCollection,l=(c,u,d)=>{const h=a._bindToCollection==this,f=a._bindToInternalToExternalMap.get(u);if(h&&f)this._bindToExternalToInternalMap.set(u,f),this._bindToInternalToExternalMap.set(f,u);else{const g=n(u);if(!g){this._skippedIndexesFromExternal.push(d);return}let p=d;for(const v of this._skippedIndexesFromExternal)d>v&&p--;for(const v of a._skippedIndexesFromExternal)p>=v&&p++;this._bindToExternalToInternalMap.set(u,g),this._bindToInternalToExternalMap.set(g,u),this.add(g,p);for(let v=0;v<a._skippedIndexesFromExternal.length;v++)p<=a._skippedIndexesFromExternal[v]&&a._skippedIndexesFromExternal[v]++}};for(const c of a)l(null,c,a.getIndex(c));this.listenTo(a,"add",l),this.listenTo(a,"remove",(c,u,d)=>{const h=this._bindToExternalToInternalMap.get(u);h&&this.remove(h),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((f,g)=>(d<g&&f.push(g-1),d>g&&f.push(g),f),[])})}_getItemIdBeforeAdding(n){const a=this._idProperty;let l;if(a in n){if(l=n[a],typeof l!="string")throw new CKEditorError("collection-add-invalid-id",this);if(this.get(l))throw new CKEditorError("collection-add-item-already-exists",this)}else n[a]=l=uid();return l}_remove(n){let a,l,c,u=!1;const d=this._idProperty;if(typeof n=="string"?(l=n,c=this._itemMap.get(l),u=!c,c&&(a=this._items.indexOf(c))):typeof n=="number"?(a=n,c=this._items[a],u=!c,c&&(l=c[d])):(c=n,l=c[d],a=this._items.indexOf(c),u=a==-1||!this._itemMap.get(l)),u)throw new CKEditorError("collection-remove-404",this);this._items.splice(a,1),this._itemMap.delete(l);const h=this._bindToInternalToExternalMap.get(c);return this._bindToInternalToExternalMap.delete(c),this._bindToExternalToInternalMap.delete(h),this.fire("remove",c,a),[c,a]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function first(s){const o=s.next();return o.done?null:o.value}class FocusTracker extends DomEmitterMixin(ObservableMixin()){constructor(){super();E(this,"_elements",new Set);E(this,"_externalViews",new Set);E(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(n){if(isElement$1(n))this._addElement(n);else if(isViewWithFocusTracker(n))this._addView(n);else{if(!n.element)throw new CKEditorError("focustracker-add-view-missing-element",{focusTracker:this,view:n});this._addElement(n.element)}}remove(n){isElement$1(n)?this._removeElement(n):isViewWithFocusTracker(n)?this._removeView(n):this._removeElement(n.element)}_addElement(n){if(this._elements.has(n))throw new CKEditorError("focustracker-add-element-already-exist",this);this.listenTo(n,"focus",()=>{const a=this.externalViews.find(l=>isExternalViewSubtreeFocused(n,l));a?this._focus(a.element):this._focus(n)},{useCapture:!0}),this.listenTo(n,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(n)}_removeElement(n){this._elements.has(n)&&(this.stopListening(n),this._elements.delete(n)),n===this.focusedElement&&this._blur()}_addView(n){n.element&&this._addElement(n.element),this.listenTo(n.focusTracker,"change:focusedElement",()=>{n.focusTracker.focusedElement?n.element&&this._focus(n.element):this._blur()}),this._externalViews.add(n)}_removeView(n){n.element&&this._removeElement(n.element),this.stopListening(n.focusTracker),this._externalViews.delete(n)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(n){this._clearBlurTimeout(),this.focusedElement=n,this.isFocused=!0}_blur(){this.elements.find(l=>l.contains(document.activeElement))||this.externalViews.find(l=>l.focusTracker.isFocused&&!l.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function isViewWithFocusTracker(s){return"focusTracker"in s&&s.focusTracker instanceof FocusTracker}function isElement$1(s){return isElement$2(s)}function isExternalViewSubtreeFocused(s,o){return isFocusedView(s,o)?!0:!!o.focusTracker.externalViews.find(n=>isFocusedView(s,n))}function isFocusedView(s,o){return!!o.element&&o.element.contains(document.activeElement)&&s.contains(o.element)}class KeystrokeHandler{constructor(){E(this,"_listener");this._listener=new(DomEmitterMixin())}listenTo(o){this._listener.listenTo(o,"keydown",(n,a)=>{this._listener.fire("_keydown:"+getCode(a),a)})}set(o,n,a={}){const l=parseKeystroke(o),c=a.priority;this._listener.listenTo(this._listener,"_keydown:"+l,(u,d)=>{a.filter&&!a.filter(d)||(n(d,()=>{d.preventDefault(),d.stopPropagation(),u.stop()}),u.return=!0)},{priority:c})}press(o){return!!this._listener.fire("_keydown:"+getCode(o),o)}stopListening(o){this._listener.stopListening(o)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function objectToMap(s){const o=new Map;for(const n in s)o.set(n,s[n]);return o}function toMap(s){return isIterable(s)?new Map(s):objectToMap(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spliceArray(s,o,n){const a=s.length,l=o.length;for(let c=a-1;c>=n;c--)s[c+l]=s[c];for(let c=0;c<l;c++)s[n+c]=o[c]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function delay(s,o){let n;function a(...l){a.cancel(),n=setTimeout(()=>s(...l),o)}return a.cancel=()=>{clearTimeout(n)},a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function parseBase64EncodedObject(s){try{if(!s.startsWith("ey"))return null;const o=atob(s.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(o)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function makeCrcTable(){const s=[];for(let o=0;o<256;o++){let n=o;for(let a=0;a<8;a++)n&1?n=3988292384^n>>>1:n=n>>>1;s[o]=n}return s}function crc32(s){const o=Array.isArray(s)?s:[s],n=makeCrcTable();let a=-1;const l=o.map(c=>Array.isArray(c)?c.join(""):String(c)).join("");for(let c=0;c<l.length;c++){const u=l.charCodeAt(c);a=a>>>8^n[(a^u)&255]}return a=(a^-1)>>>0,a.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCombiningMark(s){return!!s&&s.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(s)}function isHighSurrogateHalf(s){return!!s&&s.length==1&&/[\ud800-\udbff]/.test(s)}function isLowSurrogateHalf(s){return!!s&&s.length==1&&/[\udc00-\udfff]/.test(s)}function isInsideSurrogatePair(s,o){return isHighSurrogateHalf(s.charAt(o-1))&&isLowSurrogateHalf(s.charAt(o))}function isInsideCombinedSymbol(s,o){return isCombiningMark(s.charAt(o))}const EMOJI_PATTERN=buildEmojiRegexp();function isInsideEmojiSequence(s,o){const n=String(s).matchAll(EMOJI_PATTERN);return Array.from(n).some(a=>a.index<o&&o<a.index+a[0].length)}function buildEmojiRegexp(){const s=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],o=new RegExp("\\p{Regional_Indicator}{2}","u").source,n="(?:"+s.map(l=>l.source).join("|")+")",a=`${o}|${n}(?:‍${n})*`;return new RegExp(a,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const documentPlaceholders=new WeakMap;let hasDisplayedPlaceholderDeprecationWarning=!1;function enablePlaceholder({view:s,element:o,text:n,isDirectHost:a=!0,keepOnFocus:l=!1}){const c=s.document;documentPlaceholders.has(c)||(documentPlaceholders.set(c,new Map),c.registerPostFixer(d=>updateDocumentPlaceholders(documentPlaceholders.get(c),d)),c.on("change:isComposing",()=>{s.change(d=>updateDocumentPlaceholders(documentPlaceholders.get(c),d))},{priority:"high"})),o.is("editableElement")&&o.on("change:placeholder",(d,h,f)=>u(f)),o.placeholder?u(o.placeholder):n&&u(n),n&&showPlaceholderTextDeprecationWarning();function u(d){const h={text:d,isDirectHost:a,keepOnFocus:l,hostElement:a?o:null};documentPlaceholders.get(c).set(o,h),s.change(f=>updateDocumentPlaceholders([[o,h]],f))}}function showPlaceholder(s,o){return o.hasClass("ck-placeholder")?!1:(s.addClass("ck-placeholder",o),!0)}function hidePlaceholder(s,o){return o.hasClass("ck-placeholder")?(s.removeClass("ck-placeholder",o),!0):!1}function needsPlaceholder(s,o){if(!s.isAttached()||hasContent(s))return!1;const n=s.document,l=n.selection.anchor;return n.isComposing&&l&&l.parent===s?!1:o||!n.isFocused?!0:!!l&&l.parent!==s}function hasContent(s){for(const o of s.getChildren())if(!o.is("uiElement"))return!0;return!1}function updateDocumentPlaceholders(s,o){const n=[];let a=!1;for(const[l,c]of s)c.isDirectHost&&(n.push(l),updatePlaceholder(o,l,c)&&(a=!0));for(const[l,c]of s){if(c.isDirectHost)continue;const u=getChildPlaceholderHostSubstitute(l);u&&(n.includes(u)||(c.hostElement=u,updatePlaceholder(o,l,c)&&(a=!0)))}return a}function updatePlaceholder(s,o,n){const{text:a,isDirectHost:l,hostElement:c}=n;let u=!1;return c.getAttribute("data-placeholder")!==a&&(s.setAttribute("data-placeholder",a,c),u=!0),(l||o.childCount==1)&&needsPlaceholder(c,n.keepOnFocus)?showPlaceholder(s,c)&&(u=!0):hidePlaceholder(s,c)&&(u=!0),u}function getChildPlaceholderHostSubstitute(s){if(s.childCount){const o=s.getChild(0);if(o.is("element")&&!o.is("uiElement")&&!o.is("attributeElement"))return o}return null}function showPlaceholderTextDeprecationWarning(){hasDisplayedPlaceholderDeprecationWarning||logWarning("enableplaceholder-deprecated-text-option"),hasDisplayedPlaceholderDeprecationWarning=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let TypeCheckable$1=class{is(){throw new Error("is() method is abstract")}},Node$2=class extends EmitterMixin(TypeCheckable$1){constructor(n){super();E(this,"document");E(this,"parent");this.document=n,this.parent=null}get index(){let n;if(!this.parent)return null;if((n=this.parent.getChildIndex(this))==-1)throw new CKEditorError("view-node-not-found-in-parent",this);return n}get nextSibling(){const n=this.index;return n!==null&&this.parent.getChild(n+1)||null}get previousSibling(){const n=this.index;return n!==null&&this.parent.getChild(n-1)||null}get root(){let n=this;for(;n.parent;)n=n.parent;return n}isAttached(){return this.root.is("rootElement")}getPath(){const n=[];let a=this;for(;a.parent;)n.unshift(a.index),a=a.parent;return n}getAncestors(n={}){const a=[];let l=n.includeSelf?this:this.parent;for(;l;)a[n.parentFirst?"push":"unshift"](l),l=l.parent;return a}getCommonAncestor(n,a={}){const l=this.getAncestors(a),c=n.getAncestors(a);let u=0;for(;l[u]==c[u]&&l[u];)u++;return u===0?null:l[u-1]}isBefore(n){if(this==n||this.root!==n.root)return!1;const a=this.getPath(),l=n.getPath(),c=compareArrays(a,l);switch(c){case"prefix":return!0;case"extension":return!1;default:return a[c]<l[c]}}isAfter(n){return this==n||this.root!==n.root?!1:!this.isBefore(n)}_remove(){this.parent._removeChildren(this.index)}_fireChange(n,a,l){this.fire(`change:${n}`,a,l),this.parent&&this.parent._fireChange(n,a,l)}toJSON(){const n=clone$6(this);return delete n.parent,n}};Node$2.prototype.is=function(s){return s==="node"||s==="view:node"};let Text$1=class ir extends Node$2{constructor(n,a){super(n);E(this,"_textData");this._textData=a}get data(){return this._textData}get _data(){return this.data}set _data(n){this._fireChange("text",this),this._textData=n}isSimilar(n){return n instanceof ir?this===n||this.data===n.data:!1}_clone(){return new ir(this.document,this.data)}};Text$1.prototype.is=function(s){return s==="$text"||s==="view:$text"||s==="text"||s==="view:text"||s==="node"||s==="view:node"};let TextProxy$1=class extends TypeCheckable$1{constructor(n,a,l){super();E(this,"textNode");E(this,"data");E(this,"offsetInText");if(this.textNode=n,a<0||a>n.data.length)throw new CKEditorError("view-textproxy-wrong-offsetintext",this);if(l<0||a+l>n.data.length)throw new CKEditorError("view-textproxy-wrong-length",this);this.data=n.data.substring(a,a+l),this.offsetInText=a}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(n={}){const a=[];let l=n.includeSelf?this.textNode:this.parent;for(;l!==null;)a[n.parentFirst?"push":"unshift"](l),l=l.parent;return a}};TextProxy$1.prototype.is=function(s){return s==="$textProxy"||s==="view:$textProxy"||s==="textProxy"||s==="view:textProxy"};class ViewConsumable{constructor(){E(this,"_consumables",new Map)}add(o,n){let a;if(o.is("$text")||o.is("documentFragment")){this._consumables.set(o,!0);return}this._consumables.has(o)?a=this._consumables.get(o):(a=new ViewElementConsumables(o),this._consumables.set(o,a)),a.add(n?normalizeConsumables(n):o._getConsumables())}test(o,n){const a=this._consumables.get(o);return a===void 0?null:o.is("$text")||o.is("documentFragment")?a:a.test(normalizeConsumables(n))}consume(o,n){if(o.is("$text")||o.is("documentFragment"))return this.test(o,n)?(this._consumables.set(o,!1),!0):!1;const a=this._consumables.get(o);return a===void 0?!1:a.consume(normalizeConsumables(n))}revert(o,n){const a=this._consumables.get(o);a!==void 0&&(o.is("$text")||o.is("documentFragment")?this._consumables.set(o,!0):a.revert(normalizeConsumables(n)))}static createFrom(o,n){if(n||(n=new ViewConsumable),o.is("$text"))n.add(o);else if(o.is("element")||o.is("documentFragment")){n.add(o);for(const a of o.getChildren())ViewConsumable.createFrom(a,n)}return n}}class ViewElementConsumables{constructor(o){E(this,"element");E(this,"_canConsumeName",null);E(this,"_attributes",new Map);this.element=o}add(o){o.name&&(this._canConsumeName=!0);for(const[n,a]of o.attributes)if(a){let l=this._attributes.get(n);(!l||typeof l=="boolean")&&(l=new Map,this._attributes.set(n,l)),l.set(a,!0)}else{if(n=="style"||n=="class")throw new CKEditorError("viewconsumable-invalid-attribute",this);this._attributes.set(n,!0)}}test(o){if(o.name&&!this._canConsumeName)return this._canConsumeName;for(const[n,a]of o.attributes){const l=this._attributes.get(n);if(l===void 0)return null;if(l===!1)return!1;if(l!==!0){if(a){const c=l.get(a);if(c===void 0)return null;if(!c)return!1}else for(const c of l.values())if(!c)return!1}}return!0}consume(o){if(!this.test(o))return!1;o.name&&(this._canConsumeName=!1);for(const[n,a]of o.attributes){const l=this._attributes.get(n);if(typeof l=="boolean")for(const[c]of this.element._getConsumables(n,a).attributes)this._attributes.set(c,!1);else if(a)for(const[,c]of this.element._getConsumables(n,a).attributes)l.set(c,!1);else for(const c of l.keys())l.set(c,!1)}return!0}revert(o){o.name&&(this._canConsumeName=!0);for(const[n,a]of o.attributes){const l=this._attributes.get(n);if(l===!1){this._attributes.set(n,!0);continue}if(!(l===void 0||l===!0))if(a)l.get(a)===!1&&l.set(a,!0);else for(const c of l.keys())l.set(c,!0)}}}function normalizeConsumables(s){const o=[];return"attributes"in s&&s.attributes&&normalizeConsumablePart(o,s.attributes),"classes"in s&&s.classes&&normalizeConsumablePart(o,s.classes,"class"),"styles"in s&&s.styles&&normalizeConsumablePart(o,s.styles,"style"),{name:s.name||!1,attributes:o}}function normalizeConsumablePart(s,o,n){if(typeof o=="string"){s.push(n?[n,o]:[o]);return}for(const a of o)Array.isArray(a)?s.push(a):s.push(n?[n,a]:[a])}class Matcher{constructor(...o){E(this,"_patterns",[]);this.add(...o)}add(...o){for(let n of o)(typeof n=="string"||n instanceof RegExp)&&(n={name:n}),this._patterns.push(n)}match(...o){for(const n of o)for(const a of this._patterns){const l=this._isElementMatching(n,a);if(l)return{element:n,pattern:a,match:l}}return null}matchAll(...o){const n=[];for(const a of o)for(const l of this._patterns){const c=this._isElementMatching(a,l);c&&n.push({element:a,pattern:l,match:c})}return n.length>0?n:null}getElementName(){if(this._patterns.length!==1)return null;const o=this._patterns[0],n=o.name;return typeof o!="function"&&n&&!(n instanceof RegExp)?n:null}_isElementMatching(o,n){if(typeof n=="function"){const c=n(o);return!c||typeof c!="object"?c:normalizeConsumables(c)}const a={};if(n.name&&(a.name=matchName(n.name,o.name),!a.name))return null;const l=[];return n.attributes&&!matchAttributes(n.attributes,o,l)||n.classes&&!matchClasses(n.classes,o,l)||n.styles&&!matchStyles(n.styles,o,l)?null:(l.length&&(a.attributes=l),a)}}function isPatternMatched(s,o){return s===!0||s===o||s instanceof RegExp&&!!String(o).match(s)}function matchName(s,o){return s instanceof RegExp?!!o.match(s):s===o}function normalizePatterns(s,o){if(Array.isArray(s))return s.map(a=>typeof a!="object"||a instanceof RegExp?o?[o,a,!0]:[a,!0]:((a.key===void 0||a.value===void 0)&&logWarning("matcher-pattern-missing-key-or-value",a),o?[o,a.key,a.value]:[a.key,a.value]));if(typeof s!="object"||s instanceof RegExp)return[o?[o,s,!0]:[s,!0]];const n=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&n.push(o?[o,a,s[a]]:[a,s[a]]);return n}function matchAttributes(s,o,n){let a;return typeof s=="object"&&!(s instanceof RegExp)&&!Array.isArray(s)?(s.style!==void 0&&logWarning("matcher-pattern-deprecated-attributes-style-key",s),s.class!==void 0&&logWarning("matcher-pattern-deprecated-attributes-class-key",s)):a=["class","style"],o._collectAttributesMatch(normalizePatterns(s),n,a)}function matchClasses(s,o,n){return o._collectAttributesMatch(normalizePatterns(s,"class"),n)}function matchStyles(s,o,n){return o._collectAttributesMatch(normalizePatterns(s,"style"),n)}class StylesMap{constructor(o){E(this,"_styles");E(this,"_cachedStyleNames",null);E(this,"_cachedExpandedStyleNames",null);E(this,"_styleProcessor");this._styles={},this._styleProcessor=o}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(o){this.clear();const n=parseInlineStyles(o);for(const[a,l]of n)this._styleProcessor.toNormalizedForm(a,l,this._styles);return this}has(o){if(this.isEmpty)return!1;const a=this._styleProcessor.getReducedForm(o,this._styles).find(([l])=>l===o);return Array.isArray(a)}set(o,n){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,isObject$6(o))for(const[a,l]of Object.entries(o))this._styleProcessor.toNormalizedForm(a,l,this._styles);else this._styleProcessor.toNormalizedForm(o,n,this._styles)}remove(o){for(const n of toArray$2(o)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const a=toPath(n);unset(this._styles,a),delete this._styles[n],this._cleanEmptyObjectsOnPath(a)}}getNormalized(o){return this._styleProcessor.getNormalized(o,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(o=>o.join(":")).sort().join(";")+";"}getAsString(o){if(this.isEmpty)return;if(this._styles[o]&&!isObject$6(this._styles[o]))return this._styles[o];const a=this._styleProcessor.getReducedForm(o,this._styles).find(([l])=>l===o);if(Array.isArray(a))return a[1]}getStyleNames(o=!1){return this.isEmpty?[]:o?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([n])=>n),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(o){if(this.size!==o.size)return!1;for(const n of this.getStyleNames())if(!o.has(n)||o.getAsString(n)!==this.getAsString(n))return!1;return!0}getStylesEntries(){const o=[],n=Object.keys(this._styles);for(const a of n)o.push(...this._styleProcessor.getReducedForm(a,this._styles));return o}_clone(){const o=new this.constructor(this._styleProcessor);return o.set(this.getNormalized()),o}_getTokensMatch(o,n){const a=[];for(const l of this.getStyleNames(!0))if(isPatternMatched(o,l)){if(n===!0){a.push(l);continue}const c=this.getAsString(l);isPatternMatched(n,c)&&a.push(l)}return a.length?a:void 0}_getConsumables(o){const n=[];if(o){n.push(o);for(const a of this._styleProcessor.getRelatedStyles(o))n.push(a)}else for(const a of this.getStyleNames()){for(const l of this._styleProcessor.getRelatedStyles(a))n.push(l);n.push(a)}return n}_canMergeFrom(o){for(const n of o.getStyleNames())if(this.has(n)&&this.getAsString(n)!==o.getAsString(n))return!1;return!0}_mergeFrom(o){for(const n of o.getStyleNames())this.has(n)||this.set(n,o.getAsString(n))}_isMatching(o){for(const n of o.getStyleNames())if(!this.has(n)||this.getAsString(n)!==o.getAsString(n))return!1;return!0}_cleanEmptyObjectsOnPath(o){const n=o.split(".");if(!(n.length>1))return;const l=n.splice(0,n.length-1).join("."),c=get$2(this._styles,l);if(!c)return;!Object.keys(c).length&&this.remove(l)}}class StylesProcessor{constructor(){E(this,"_normalizers");E(this,"_extractors");E(this,"_reducers");E(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(o,n,a){if(isObject$6(n)){appendStyleValue(a,toPath(o),n);return}if(this._normalizers.has(o)){const l=this._normalizers.get(o),{path:c,value:u}=l(n);appendStyleValue(a,c,u)}else appendStyleValue(a,o,n)}getNormalized(o,n){if(!o)return merge$3({},n);if(n[o]!==void 0)return n[o];if(this._extractors.has(o)){const a=this._extractors.get(o);if(typeof a=="string")return get$2(n,a);const l=a(o,n);if(l)return l}return get$2(n,toPath(o))}getReducedForm(o,n){const a=this.getNormalized(o,n);return a===void 0?[]:this._reducers.has(o)?this._reducers.get(o)(a):[[o,a]]}getStyleNames(o){const n=new Set;for(const a of this._consumables.keys()){const l=this.getNormalized(a,o);l&&(typeof l!="object"||Object.keys(l).length)&&n.add(a)}for(const a of Object.keys(o))n.add(a);return Array.from(n)}getRelatedStyles(o){return this._consumables.get(o)||[]}setNormalizer(o,n){this._normalizers.set(o,n)}setExtractor(o,n){this._extractors.set(o,n)}setReducer(o,n){this._reducers.set(o,n)}setStyleRelation(o,n){this._mapStyleNames(o,n);for(const a of n)this._mapStyleNames(a,[o])}_mapStyleNames(o,n){this._consumables.has(o)||this._consumables.set(o,[]),this._consumables.get(o).push(...n)}}function parseInlineStyles(s){let o=null,n=0,a=0,l=null;const c=new Map;if(s==="")return c;s.charAt(s.length-1)!=";"&&(s=s+";");for(let u=0;u<s.length;u++){const d=s.charAt(u);if(o===null)switch(d){case":":l||(l=s.substr(n,u-n),a=u+1);break;case'"':case"'":o=d;break;case";":{const h=s.substr(a,u-a);l&&c.set(l.trim(),h.trim()),l=null,n=u+1;break}}else d===o&&(o=null)}return c}function toPath(s){return s.replace("-",".")}function appendStyleValue(s,o,n){let a=n;isObject$6(n)&&(a=merge$3({},get$2(s,o),n)),set$2(s,o,a)}class TokenList{constructor(){E(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(o){return this._set.has(o)}keys(){return Array.from(this._set.keys())}setTo(o){this.clear();for(const n of o.split(/\s+/))n&&this._set.add(n);return this}set(o){for(const n of toArray$2(o))n&&this._set.add(n)}remove(o){for(const n of toArray$2(o))this._set.delete(n)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(o){if(this.size!==o.size)return!1;for(const n of this.keys())if(!o.has(n))return!1;return!0}_clone(){const o=new this.constructor;return o._set=new Set(this._set),o}_getTokensMatch(o){const n=[];if(o===!0){for(const a of this._set.keys())n.push(a);return n}if(typeof o=="string"){for(const a of o.split(/\s+/))if(this._set.has(a))n.push(a);else return;return n}for(const a of this._set.keys())a.match(o)&&n.push(a);return n.length?n:void 0}_getConsumables(o){return o?[o]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(o){for(const n of o._set.keys())this._set.has(n)||this._set.add(n)}_isMatching(o){for(const n of o._set.keys())if(!this._set.has(n))return!1;return!0}}let Element$1=class fr extends Node$2{constructor(n,a,l,c){super(n);E(this,"name");E(this,"_unsafeAttributesToRender",[]);E(this,"_attrs");E(this,"_children");E(this,"_customProperties",new Map);this.name=a,this._attrs=this._parseAttributes(l),this._children=[],c&&this._insertChild(0,c)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(n){return this._children[n]}getChildIndex(n){return this._children.indexOf(n)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const n of this._attrs.keys())n!="class"&&n!="style"&&(yield n)}*getAttributes(){for(const[n,a]of this._attrs.entries())yield[n,String(a)]}getAttribute(n){return this._attrs.has(n)?String(this._attrs.get(n)):void 0}hasAttribute(n,a){return this._attrs.has(n)?a!==void 0?usesStylesMap(this.name,n)||usesTokenList(this.name,n)?this._attrs.get(n).has(a):this._attrs.get(n)===a:!0:!1}isSimilar(n){if(!(n instanceof fr))return!1;if(this===n)return!0;if(this.name!=n.name||this._attrs.size!==n._attrs.size)return!1;for(const[a,l]of this._attrs){const c=n._attrs.get(a);if(c===void 0)return!1;if(typeof l=="string"||typeof c=="string"){if(c!==l)return!1}else if(!l.isSimilar(c))return!1}return!0}hasClass(...n){for(const a of n)if(!this._classes||!this._classes.has(a))return!1;return!0}getClassNames(){const n=this._classes?this._classes.keys():[],a=n[Symbol.iterator]();return Object.assign(n,{next:a.next.bind(a)})}getStyle(n){return this._styles&&this._styles.getAsString(n)}getNormalizedStyle(n){return this._styles&&this._styles.getNormalized(n)}getStyleNames(n){return this._styles?this._styles.getStyleNames(n):[]}hasStyle(...n){for(const a of n)if(!this._styles||!this._styles.has(a))return!1;return!0}findAncestor(...n){const a=new Matcher(...n);let l=this.parent;for(;l&&!l.is("documentFragment");){if(a.match(l))return l;l=l.parent}return null}getCustomProperty(n){return this._customProperties.get(n)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const n=this._classes?this._classes.keys().sort().join(","):"",a=this._styles&&String(this._styles),l=Array.from(this._attrs).filter(([c])=>c!="style"&&c!="class").map(c=>`${c[0]}="${c[1]}"`).sort().join(" ");return this.name+(n==""?"":` class="${n}"`)+(a?` style="${a}"`:"")+(l==""?"":` ${l}`)}shouldRenderUnsafeAttribute(n){return this._unsafeAttributesToRender.includes(n)}_clone(n=!1){const a=[];if(n)for(const c of this.getChildren())a.push(c._clone(n));const l=new this.constructor(this.document,this.name,this._attrs,a);return l._customProperties=new Map(this._customProperties),l.getFillerOffset=this.getFillerOffset,l._unsafeAttributesToRender=this._unsafeAttributesToRender,l}_appendChild(n){return this._insertChild(this.childCount,n)}_insertChild(n,a){this._fireChange("children",this,{index:n});let l=0;const c=normalize$3$1(this.document,a);for(const u of c)u.parent!==null&&u._remove(),u.parent=this,u.document=this.document,this._children.splice(n,0,u),n++,l++;return l}_removeChildren(n,a=1){this._fireChange("children",this,{index:n});for(let l=n;l<n+a;l++)this._children[l].parent=null;return this._children.splice(n,a)}_setAttribute(n,a,l=!0){if(this._fireChange("attributes",this),usesStylesMap(this.name,n)||usesTokenList(this.name,n)){let c=this._attrs.get(n);c||(c=usesStylesMap(this.name,n)?new StylesMap(this.document.stylesProcessor):new TokenList,this._attrs.set(n,c)),l?c.setTo(String(a)):usesStylesMap(this.name,n)?Array.isArray(a)?c.set(a[0],a[1]):c.set(a):c.set(typeof a=="string"?a.split(/\s+/):a)}else this._attrs.set(n,String(a))}_removeAttribute(n,a){if(this._fireChange("attributes",this),a!==void 0&&(usesStylesMap(this.name,n)||usesTokenList(this.name,n))){const l=this._attrs.get(n);return l?(usesTokenList(this.name,n)&&typeof a=="string"&&(a=a.split(/\s+/)),l.remove(a),l.isEmpty?this._attrs.delete(n):!1):!1}return this._attrs.delete(n)}_addClass(n){this._setAttribute("class",n,!1)}_removeClass(n){this._removeAttribute("class",n)}_setStyle(n,a){typeof n!="string"?this._setAttribute("style",n,!1):this._setAttribute("style",[n,a],!1)}_removeStyle(n){this._removeAttribute("style",n)}_collectAttributesMatch(n,a,l){for(const[c,u,d]of n){let h=!1,f=!1;for(const[g,p]of this._attrs)if(!(l&&l.includes(g)||!isPatternMatched(c,g)))if(h=!0,typeof p=="string"){if(isPatternMatched(u,p))a.push([g]),f=!0;else if(!(c instanceof RegExp))return!1}else{const v=p._getTokensMatch(u,d||!0);if(v){f=!0;for(const b of v)a.push([g,b])}else if(!(c instanceof RegExp))return!1}if(!h||!f)return!1}return!0}_getConsumables(n,a){const l=[];if(n){const c=this._attrs.get(n);if(c!==void 0)if(typeof c=="string")l.push([n]);else for(const u of c._getConsumables(a))l.push([n,u])}else for(const[c,u]of this._attrs)if(typeof u=="string")l.push([c]);else for(const d of u._getConsumables())l.push([c,d]);return{name:!n,attributes:l}}_canMergeAttributesFrom(n){if(this.name!=n.name)return!1;for(const[a,l]of n._attrs){const c=this._attrs.get(a);if(c!==void 0){if(typeof c=="string"||typeof l=="string"){if(c!==l)return!1}else if(!c._canMergeFrom(l))return!1}}return!0}_mergeAttributesFrom(n){this._fireChange("attributes",this);for(const[a,l]of n._attrs){const c=this._attrs.get(a);c===void 0||typeof c=="string"||typeof l=="string"?this._setAttribute(a,l):c._mergeFrom(l)}}_canSubtractAttributesOf(n){if(this.name!=n.name)return!1;for(const[a,l]of n._attrs){const c=this._attrs.get(a);if(c===void 0)return!1;if(typeof c=="string"||typeof l=="string"){if(c!==l)return!1}else if(!c._isMatching(l))return!1}return!0}_subtractAttributesOf(n){this._fireChange("attributes",this);for(const[a,l]of n._attrs){const c=this._attrs.get(a);typeof c=="string"||typeof l=="string"?this._attrs.delete(a):(c.remove(l.keys()),c.isEmpty&&this._attrs.delete(a))}}_setCustomProperty(n,a){this._customProperties.set(n,a)}_removeCustomProperty(n){return this._customProperties.delete(n)}_parseAttributes(n){const a=toMap(n);for(const[l,c]of a)if(c===null)a.delete(l);else if(usesStylesMap(this.name,l)){const u=c instanceof StylesMap?c._clone():new StylesMap(this.document.stylesProcessor).setTo(String(c));a.set(l,u)}else if(usesTokenList(this.name,l)){const u=c instanceof TokenList?c._clone():new TokenList().setTo(String(c));a.set(l,u)}else typeof c!="string"&&a.set(l,String(c));return a}};Element$1.prototype.is=function(s,o){return o?o===this.name&&(s==="element"||s==="view:element"):s==="element"||s==="view:element"||s==="node"||s==="view:node"};function normalize$3$1(s,o){if(typeof o=="string")return[new Text$1(s,o)];isIterable(o)||(o=[o]);const n=[];for(const a of o)typeof a=="string"?n.push(new Text$1(s,a)):a instanceof TextProxy$1?n.push(new Text$1(s,a.data)):n.push(a);return n}function usesTokenList(s,o){return o=="class"||s=="a"&&o=="rel"}function usesStylesMap(s,o){return o=="style"}class ContainerElement extends Element$1{constructor(o,n,a,l){super(o,n,a,l),this.getFillerOffset=getFillerOffset$4}}ContainerElement.prototype.is=function(s,o){return o?o===this.name&&(s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function getFillerOffset$4(){const s=[...this.getChildren()],o=s[this.childCount-1];if(o&&o.is("element","br"))return this.childCount;for(const n of s)if(!n.is("uiElement"))return null;return this.childCount}class EditableElement extends ObservableMixin(ContainerElement){constructor(o,n,a,l){super(o,n,a,l),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(o),this.bind("isFocused").to(o,"isFocused",c=>c&&o.selection.editableElement==this),this.listenTo(o.selection,"change",()=>{this.isFocused=o.isFocused&&o.selection.editableElement==this})}destroy(){this.stopListening()}}EditableElement.prototype.is=function(s,o){return o?o===this.name&&(s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};const rootNameSymbol=Symbol("rootName");class RootEditableElement extends EditableElement{constructor(o,n){super(o,n),this.rootName="main"}get rootName(){return this.getCustomProperty(rootNameSymbol)}set rootName(o){this._setCustomProperty(rootNameSymbol,o)}set _name(o){this.name=o}}RootEditableElement.prototype.is=function(s,o){return o?o===this.name&&(s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"):s==="rootElement"||s==="view:rootElement"||s==="editableElement"||s==="view:editableElement"||s==="containerElement"||s==="view:containerElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};let TreeWalker$1=class{constructor(o={}){E(this,"direction");E(this,"boundaries");E(this,"singleCharacters");E(this,"shallow");E(this,"ignoreElementEnd");E(this,"_position");E(this,"_boundaryStartParent");E(this,"_boundaryEndParent");if(!o.boundaries&&!o.startPosition)throw new CKEditorError("view-tree-walker-no-start-position",null);if(o.direction&&o.direction!="forward"&&o.direction!="backward")throw new CKEditorError("view-tree-walker-unknown-direction",o.startPosition,{direction:o.direction});this.boundaries=o.boundaries||null,o.startPosition?this._position=Position$1._createAt(o.startPosition):this._position=Position$1._createAt(o.boundaries[o.direction=="backward"?"end":"start"]),this.direction=o.direction||"forward",this.singleCharacters=!!o.singleCharacters,this.shallow=!!o.shallow,this.ignoreElementEnd=!!o.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(o){let n,a;do a=this.position,n=this.next();while(!n.done&&o(n.value));n.done||(this._position=a)}jumpTo(o){this._boundaryStartParent&&o.isBefore(this.boundaries.start)?o=this.boundaries.start:this._boundaryEndParent&&o.isAfter(this.boundaries.end)&&(o=this.boundaries.end),this._position=o.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let o=this.position.clone();const n=this.position,a=o.parent;if(a.parent===null&&o.offset===a.childCount)return{done:!0,value:void 0};if(a===this._boundaryEndParent&&o.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let l;if(a&&a.is("view:$text")){if(o.isAtEnd)return this._position=Position$1._createAfter(a),this._next();l=a.data[o.offset]}else l=a.getChild(o.offset);if(typeof l=="string"){let c;this.singleCharacters?c=1:c=(a===this._boundaryEndParent?this.boundaries.end.offset:a.data.length)-o.offset;const u=new TextProxy$1(a,o.offset,c);return o.offset+=c,this._position=o,this._formatReturnValue("text",u,n,o,c)}if(l&&l.is("view:element")){if(!this.shallow)o=new Position$1(l,0);else{if(this.boundaries&&this.boundaries.end.isBefore(o))return{done:!0,value:void 0};o.offset++}return this._position=o,this._formatReturnValue("elementStart",l,n,o,1)}if(l&&l.is("view:$text")){if(this.singleCharacters)return o=new Position$1(l,0),this._position=o,this._next();let c=l.data.length,u;return l==this._boundaryEndParent?(c=this.boundaries.end.offset,u=new TextProxy$1(l,0,c),o=Position$1._createAfter(u)):(u=new TextProxy$1(l,0,l.data.length),o.offset++),this._position=o,this._formatReturnValue("text",u,n,o,c)}return o=Position$1._createAfter(a),this._position=o,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",a,n,o)}_previous(){let o=this.position.clone();const n=this.position,a=o.parent;if(a.parent===null&&o.offset===0)return{done:!0,value:void 0};if(a==this._boundaryStartParent&&o.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let l;if(a.is("view:$text")){if(o.isAtStart)return this._position=Position$1._createBefore(a),this._previous();l=a.data[o.offset-1]}else l=a.getChild(o.offset-1);if(typeof l=="string"){let c;if(this.singleCharacters)c=1;else{const d=a===this._boundaryStartParent?this.boundaries.start.offset:0;c=o.offset-d}o.offset-=c;const u=new TextProxy$1(a,o.offset,c);return this._position=o,this._formatReturnValue("text",u,n,o,c)}if(l&&l.is("view:element"))return this.shallow?(o.offset--,this._position=o,this._formatReturnValue("elementStart",l,n,o,1)):(o=new Position$1(l,l.childCount),this._position=o,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",l,n,o));if(l&&l.is("view:$text")){if(this.singleCharacters)return o=new Position$1(l,l.data.length),this._position=o,this._previous();let c=l.data.length,u;if(l==this._boundaryStartParent){const d=this.boundaries.start.offset;u=new TextProxy$1(l,d,l.data.length-d),c=u.data.length,o=Position$1._createBefore(u)}else u=new TextProxy$1(l,0,l.data.length),o.offset--;return this._position=o,this._formatReturnValue("text",u,n,o,c)}return o=Position$1._createBefore(a),this._position=o,this._formatReturnValue("elementStart",a,n,o,1)}_formatReturnValue(o,n,a,l,c){return n.is("view:$textProxy")&&(n.offsetInText+n.data.length==n.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(l=Position$1._createAfter(n.textNode),this._position=l):a=Position$1._createAfter(n.textNode)),n.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(l=Position$1._createBefore(n.textNode),this._position=l):a=Position$1._createBefore(n.textNode))),{done:!1,value:{type:o,item:n,previousPosition:a,nextPosition:l,length:c}}}},Position$1=class ut extends TypeCheckable$1{constructor(n,a){super();E(this,"parent");E(this,"offset");this.parent=n,this.offset=a}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const n=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===n}get root(){return this.parent.root}get editableElement(){let n=this.parent;for(;!(n instanceof EditableElement);)if(n.parent)n=n.parent;else return null;return n}getShiftedBy(n){const a=ut._createAt(this),l=a.offset+n;return a.offset=l<0?0:l,a}getLastMatchingPosition(n,a={}){a.startPosition=this;const l=new TreeWalker$1(a);return l.skip(n),l.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(n){const a=this.getAncestors(),l=n.getAncestors();let c=0;for(;a[c]==l[c]&&a[c];)c++;return c===0?null:a[c-1]}isEqual(n){return this.parent==n.parent&&this.offset==n.offset}isBefore(n){return this.compareWith(n)=="before"}isAfter(n){return this.compareWith(n)=="after"}compareWith(n){if(this.root!==n.root)return"different";if(this.isEqual(n))return"same";const a=this.parent.is("node")?this.parent.getPath():[],l=n.parent.is("node")?n.parent.getPath():[];a.push(this.offset),l.push(n.offset);const c=compareArrays(a,l);switch(c){case"prefix":return"before";case"extension":return"after";default:return a[c]<l[c]?"before":"after"}}getWalker(n={}){return n.startPosition=this,new TreeWalker$1(n)}clone(){return new ut(this.parent,this.offset)}static _createAt(n,a){if(n instanceof ut)return new this(n.parent,n.offset);{const l=n;if(a=="end")a=l.is("$text")?l.data.length:l.childCount;else{if(a=="before")return this._createBefore(l);if(a=="after")return this._createAfter(l);if(a!==0&&!a)throw new CKEditorError("view-createpositionat-offset-required",l)}return new ut(l,a)}}static _createAfter(n){if(n.is("$textProxy"))return new ut(n.textNode,n.offsetInText+n.data.length);if(!n.parent)throw new CKEditorError("view-position-after-root",n,{root:n});return new ut(n.parent,n.index+1)}static _createBefore(n){if(n.is("$textProxy"))return new ut(n.textNode,n.offsetInText);if(!n.parent)throw new CKEditorError("view-position-before-root",n,{root:n});return new ut(n.parent,n.index)}};Position$1.prototype.is=function(s){return s==="position"||s==="view:position"};let Range$1=class ft extends TypeCheckable$1{constructor(n,a=null){super();E(this,"start");E(this,"end");this.start=n.clone(),this.end=a?a.clone():n.clone()}*[Symbol.iterator](){yield*new TreeWalker$1({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let n=this.start.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"}),a=this.end.getLastMatchingPosition(enlargeTrimSkip);return n.parent.is("$text")&&n.isAtStart&&(n=Position$1._createBefore(n.parent)),a.parent.is("$text")&&a.isAtEnd&&(a=Position$1._createAfter(a.parent)),new ft(n,a)}getTrimmed(){let n=this.start.getLastMatchingPosition(enlargeTrimSkip);if(n.isAfter(this.end)||n.isEqual(this.end))return new ft(n,n);let a=this.end.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"});const l=n.nodeAfter,c=a.nodeBefore;return l&&l.is("$text")&&(n=new Position$1(l,0)),c&&c.is("$text")&&(a=new Position$1(c,c.data.length)),new ft(n,a)}isEqual(n){return this==n||this.start.isEqual(n.start)&&this.end.isEqual(n.end)}containsPosition(n){return n.isAfter(this.start)&&n.isBefore(this.end)}containsRange(n,a=!1){n.isCollapsed&&(a=!1);const l=this.containsPosition(n.start)||a&&this.start.isEqual(n.start),c=this.containsPosition(n.end)||a&&this.end.isEqual(n.end);return l&&c}getDifference(n){const a=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&a.push(new ft(this.start,n.start)),this.containsPosition(n.end)&&a.push(new ft(n.end,this.end))):a.push(this.clone()),a}getIntersection(n){if(this.isIntersecting(n)){let a=this.start,l=this.end;return this.containsPosition(n.start)&&(a=n.start),this.containsPosition(n.end)&&(l=n.end),new ft(a,l)}return null}getWalker(n={}){return n.boundaries=this,new TreeWalker$1(n)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let n=this.start.nodeAfter,a=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(n=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(a=this.end.parent.previousSibling),n&&n.is("element")&&n===a?n:null}clone(){return new ft(this.start,this.end)}*getItems(n={}){n.boundaries=this,n.ignoreElementEnd=!0;const a=new TreeWalker$1(n);for(const l of a)yield l.item}*getPositions(n={}){n.boundaries=this;const a=new TreeWalker$1(n);yield a.position;for(const l of a)yield l.nextPosition}isIntersecting(n){return this.start.isBefore(n.end)&&this.end.isAfter(n.start)}static _createFromParentsAndOffsets(n,a,l,c){return new this(new Position$1(n,a),new Position$1(l,c))}static _createFromPositionAndShift(n,a){const l=n,c=n.getShiftedBy(a);return a>0?new this(l,c):new this(c,l)}static _createIn(n){return this._createFromParentsAndOffsets(n,0,n,n.childCount)}static _createOn(n){const a=n.is("$textProxy")?n.offsetSize:1;return this._createFromPositionAndShift(Position$1._createBefore(n),a)}};Range$1.prototype.is=function(s){return s==="range"||s==="view:range"};function enlargeTrimSkip(s){return!!(s.item.is("attributeElement")||s.item.is("uiElement"))}let Selection$1=class mr extends EmitterMixin(TypeCheckable$1){constructor(...n){super();E(this,"_ranges");E(this,"_lastRangeBackward");E(this,"_isFake");E(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",n.length&&this.setTo(...n)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const n=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?n.end:n.start).clone()}get focus(){if(!this._ranges.length)return null;const n=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?n.start:n.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const n of this._ranges)yield n.clone()}getFirstRange(){let n=null;for(const a of this._ranges)(!n||a.start.isBefore(n.start))&&(n=a);return n?n.clone():null}getLastRange(){let n=null;for(const a of this._ranges)(!n||a.end.isAfter(n.end))&&(n=a);return n?n.clone():null}getFirstPosition(){const n=this.getFirstRange();return n?n.start.clone():null}getLastPosition(){const n=this.getLastRange();return n?n.end.clone():null}isEqual(n){if(this.isFake!=n.isFake||this.isFake&&this.fakeSelectionLabel!=n.fakeSelectionLabel||this.rangeCount!=n.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(n.anchor)||!this.focus.isEqual(n.focus))return!1;for(const a of this._ranges){let l=!1;for(const c of n._ranges)if(a.isEqual(c)){l=!0;break}if(!l)return!1}return!0}isSimilar(n){if(this.isBackward!=n.isBackward)return!1;const a=count$1(this.getRanges()),l=count$1(n.getRanges());if(a!=l)return!1;if(a==0)return!0;for(let c of this.getRanges()){c=c.getTrimmed();let u=!1;for(let d of n.getRanges())if(d=d.getTrimmed(),c.start.isEqual(d.start)&&c.end.isEqual(d.end)){u=!0;break}if(!u)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...n){let[a,l,c]=n;if(typeof l=="object"&&(c=l,l=void 0),a===null)this._setRanges([]),this._setFakeOptions(c);else if(a instanceof mr||a instanceof DocumentSelection$1)this._setRanges(a.getRanges(),a.isBackward),this._setFakeOptions({fake:a.isFake,label:a.fakeSelectionLabel});else if(a instanceof Range$1)this._setRanges([a],c&&c.backward),this._setFakeOptions(c);else if(a instanceof Position$1)this._setRanges([new Range$1(a)]),this._setFakeOptions(c);else if(a instanceof Node$2){const u=!!c&&!!c.backward;let d;if(l===void 0)throw new CKEditorError("view-selection-setto-required-second-parameter",this);l=="in"?d=Range$1._createIn(a):l=="on"?d=Range$1._createOn(a):d=new Range$1(Position$1._createAt(a,l)),this._setRanges([d],u),this._setFakeOptions(c)}else if(isIterable(a))this._setRanges(a,c&&c.backward),this._setFakeOptions(c);else throw new CKEditorError("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(n,a){if(this.anchor===null)throw new CKEditorError("view-selection-setfocus-no-ranges",this);const l=Position$1._createAt(n,a);if(l.compareWith(this.focus)=="same")return;const c=this.anchor;this._ranges.pop(),l.compareWith(c)=="before"?this._addRange(new Range$1(l,c),!0):this._addRange(new Range$1(c,l)),this.fire("change")}_setRanges(n,a=!1){n=Array.from(n),this._ranges=[];for(const l of n)this._addRange(l);this._lastRangeBackward=!!a}_setFakeOptions(n={}){this._isFake=!!n.fake,this._fakeSelectionLabel=n.fake&&n.label||""}_addRange(n,a=!1){if(!(n instanceof Range$1))throw new CKEditorError("view-selection-add-range-not-range",this);this._pushRange(n),this._lastRangeBackward=!!a}_pushRange(n){for(const a of this._ranges)if(n.isIntersecting(a))throw new CKEditorError("view-selection-range-intersects",this,{addedRange:n,intersectingRange:a});this._ranges.push(new Range$1(n.start,n.end))}};Selection$1.prototype.is=function(s){return s==="selection"||s==="view:selection"};let DocumentSelection$1=class extends EmitterMixin(TypeCheckable$1){constructor(...n){super();E(this,"_selection");this._selection=new Selection$1,this._selection.delegate("change").to(this),n.length&&this._selection.setTo(...n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(n){return this._selection.isEqual(n)}isSimilar(n){return this._selection.isSimilar(n)}_setTo(...n){this._selection.setTo(...n)}_setFocus(n,a){this._selection.setFocus(n,a)}};DocumentSelection$1.prototype.is=function(s){return s==="selection"||s=="documentSelection"||s=="view:selection"||s=="view:documentSelection"};class BubblingEventInfo extends EventInfo{constructor(n,a,l){super(n,a);E(this,"startRange");E(this,"_eventPhase");E(this,"_currentTarget");this.startRange=l,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const contextsSymbol=Symbol("bubbling contexts");function BubblingEmitterMixin(s){class o extends s{fire(a,...l){try{const c=a instanceof EventInfo?a:new EventInfo(this,a),u=getBubblingContexts(this);if(!u.size)return;if(updateEventInfo(c,"capturing",this),fireListenerFor(u,"$capture",c,...l))return c.return;const d=c.startRange||this.selection.getFirstRange(),h=d?d.getContainedElement():null,f=h?!!getCustomContext(u,h):!1;let g=h||getDeeperRangeParent(d);if(updateEventInfo(c,"atTarget",g),!f){if(fireListenerFor(u,"$text",c,...l))return c.return;updateEventInfo(c,"bubbling",g)}for(;g;){if(g.is("rootElement")){if(fireListenerFor(u,"$root",c,...l))return c.return}else if(g.is("element")&&fireListenerFor(u,g.name,c,...l))return c.return;if(fireListenerFor(u,g,c,...l))return c.return;g=g.parent,updateEventInfo(c,"bubbling",g)}return updateEventInfo(c,"bubbling",this),fireListenerFor(u,"$document",c,...l),c.return}catch(c){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(c,this)}}_addEventListener(a,l,c){const u=toArray$2(c.context||"$document"),d=getBubblingContexts(this);for(const h of u){let f=d.get(h);f||(f=new(EmitterMixin()),d.set(h,f)),this.listenTo(f,a,l,c)}}_removeEventListener(a,l){const c=getBubblingContexts(this);for(const u of c.values())this.stopListening(u,a,l)}}return o}{const s=BubblingEmitterMixin(Object);["fire","_addEventListener","_removeEventListener"].forEach(o=>{BubblingEmitterMixin[o]=s.prototype[o]})}function updateEventInfo(s,o,n){s instanceof BubblingEventInfo&&(s._eventPhase=o,s._currentTarget=n)}function fireListenerFor(s,o,n,...a){const l=typeof o=="string"?s.get(o):getCustomContext(s,o);return l?(l.fire(n,...a),n.stop.called):!1}function getCustomContext(s,o){for(const[n,a]of s)if(typeof n=="function"&&n(o))return a;return null}function getBubblingContexts(s){return s[contextsSymbol]||(s[contextsSymbol]=new Map),s[contextsSymbol]}function getDeeperRangeParent(s){if(!s)return null;const o=s.start.parent,n=s.end.parent,a=o.getPath(),l=n.getPath();return a.length>l.length?o:n}let Document$1=class extends BubblingEmitterMixin(ObservableMixin()){constructor(n){super();E(this,"selection");E(this,"roots");E(this,"stylesProcessor");E(this,"_postFixers",new Set);this.selection=new DocumentSelection$1,this.roots=new Collection({idProperty:"rootName"}),this.stylesProcessor=n,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(n="main"){return this.roots.get(n)}registerPostFixer(n){this._postFixers.add(n)}destroy(){this.roots.forEach(n=>n.destroy()),this.stopListening()}_callPostFixers(n){let a=!1;do for(const l of this._postFixers)if(a=l(n),a)break;while(a)}};const DEFAULT_PRIORITY=10;class AttributeElement extends Element$1{constructor(n,a,l,c){super(n,a,l,c);E(this,"_priority",DEFAULT_PRIORITY);E(this,"_id",null);E(this,"_clonesGroup",null);this.getFillerOffset=getFillerOffset$3}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new CKEditorError("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(n){return this.id!==null||n.id!==null?this.id===n.id:super.isSimilar(n)&&this.priority==n.priority}_clone(n=!1){const a=super._clone(n);return a._priority=this._priority,a._id=this._id,a}_canMergeAttributesFrom(n){return this.id!==null||n.id!==null||this.priority!==n.priority?!1:super._canMergeAttributesFrom(n)}_canSubtractAttributesOf(n){return this.id!==null||n.id!==null||this.priority!==n.priority?!1:super._canSubtractAttributesOf(n)}}E(AttributeElement,"DEFAULT_PRIORITY",DEFAULT_PRIORITY);AttributeElement.prototype.is=function(s,o){return o?o===this.name&&(s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"):s==="attributeElement"||s==="view:attributeElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function getFillerOffset$3(){if(nonUiChildrenCount(this))return null;let s=this.parent;for(;s&&s.is("attributeElement");){if(nonUiChildrenCount(s)>1)return null;s=s.parent}return!s||nonUiChildrenCount(s)>1?null:this.childCount}function nonUiChildrenCount(s){return Array.from(s.getChildren()).filter(o=>!o.is("uiElement")).length}class EmptyElement extends Element$1{constructor(o,n,a,l){super(o,n,a,l),this.getFillerOffset=getFillerOffset$2}_insertChild(o,n){if(n&&(n instanceof Node$2||Array.from(n).length>0))throw new CKEditorError("view-emptyelement-cannot-add",[this,n]);return 0}}EmptyElement.prototype.is=function(s,o){return o?o===this.name&&(s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"):s==="emptyElement"||s==="view:emptyElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function getFillerOffset$2(){return null}class UIElement extends Element$1{constructor(o,n,a,l){super(o,n,a,l),this.getFillerOffset=getFillerOffset$1}_insertChild(o,n){if(n&&(n instanceof Node$2||Array.from(n).length>0))throw new CKEditorError("view-uielement-cannot-add",[this,n]);return 0}render(o,n){return this.toDomElement(o)}toDomElement(o){const n=o.createElement(this.name);for(const a of this.getAttributeKeys())n.setAttribute(a,this.getAttribute(a));return n}}UIElement.prototype.is=function(s,o){return o?o===this.name&&(s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"):s==="uiElement"||s==="view:uiElement"||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function injectUiElementHandling(s){s.document.on("arrowKey",(o,n)=>jumpOverUiElement(o,n,s.domConverter),{priority:"low"})}function getFillerOffset$1(){return null}function jumpOverUiElement(s,o,n){if(o.keyCode==keyCodes.arrowright){const a=o.domTarget.ownerDocument.defaultView.getSelection(),l=a.rangeCount==1&&a.getRangeAt(0).collapsed;if(l||o.shiftKey){const c=a.focusNode,u=a.focusOffset,d=n.domPositionToView(c,u);if(d===null)return;let h=!1;const f=d.getLastMatchingPosition(g=>(g.item.is("uiElement")&&(h=!0),!!(g.item.is("uiElement")||g.item.is("attributeElement"))));if(h){const g=n.viewPositionToDom(f);l?a.collapse(g.parent,g.offset):a.extend(g.parent,g.offset)}}}}class RawElement extends Element$1{constructor(o,n,a,l){super(o,n,a,l),this.getFillerOffset=getFillerOffset$5}_insertChild(o,n){if(n&&(n instanceof Node$2||Array.from(n).length>0))throw new CKEditorError("view-rawelement-cannot-add",[this,n]);return 0}render(o,n){}}RawElement.prototype.is=function(s,o){return o?o===this.name&&(s==="rawElement"||s==="view:rawElement"||s==="element"||s==="view:element"):s==="rawElement"||s==="view:rawElement"||s===this.name||s==="view:"+this.name||s==="element"||s==="view:element"||s==="node"||s==="view:node"};function getFillerOffset$5(){return null}let DocumentFragment$1=class extends EmitterMixin(TypeCheckable$1){constructor(n,a){super();E(this,"document");E(this,"_children",[]);E(this,"_customProperties",new Map);this.document=n,a&&this._insertChild(0,a)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(n){return this._customProperties.get(n)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(n){return this._insertChild(this.childCount,n)}getChild(n){return this._children[n]}getChildIndex(n){return this._children.indexOf(n)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(n,a){this._fireChange("children",this,{index:n});let l=0;const c=normalize$2$1(this.document,a);for(const u of c)u.parent!==null&&u._remove(),u.parent=this,this._children.splice(n,0,u),n++,l++;return l}_removeChildren(n,a=1){this._fireChange("children",this,{index:n});for(let l=n;l<n+a;l++)this._children[l].parent=null;return this._children.splice(n,a)}_fireChange(n,a,l){this.fire(`change:${n}`,a,l)}_setCustomProperty(n,a){this._customProperties.set(n,a)}_removeCustomProperty(n){return this._customProperties.delete(n)}};DocumentFragment$1.prototype.is=function(s){return s==="documentFragment"||s==="view:documentFragment"};function normalize$2$1(s,o){return typeof o=="string"?[new Text$1(s,o)]:(isIterable(o)||(o=[o]),Array.from(o).map(n=>typeof n=="string"?new Text$1(s,n):n instanceof TextProxy$1?new Text$1(s,n.data):n))}class DowncastWriter{constructor(o){E(this,"document");E(this,"_cloneGroups",new Map);E(this,"_slotFactory",null);this.document=o}setSelection(...o){this.document.selection._setTo(...o)}setSelectionFocus(o,n){this.document.selection._setFocus(o,n)}createDocumentFragment(o){return new DocumentFragment$1(this.document,o)}createText(o){return new Text$1(this.document,o)}createAttributeElement(o,n,a={}){const l=new AttributeElement(this.document,o,n);return typeof a.priority=="number"&&(l._priority=a.priority),a.id&&(l._id=a.id),a.renderUnsafeAttributes&&l._unsafeAttributesToRender.push(...a.renderUnsafeAttributes),l}createContainerElement(o,n,a={},l={}){let c=null;isPlainObject$1(a)?l=a:c=a;const u=new ContainerElement(this.document,o,n,c);return l.renderUnsafeAttributes&&u._unsafeAttributesToRender.push(...l.renderUnsafeAttributes),u}createEditableElement(o,n,a={}){const l=new EditableElement(this.document,o,n);return a.renderUnsafeAttributes&&l._unsafeAttributesToRender.push(...a.renderUnsafeAttributes),l}createEmptyElement(o,n,a={}){const l=new EmptyElement(this.document,o,n);return a.renderUnsafeAttributes&&l._unsafeAttributesToRender.push(...a.renderUnsafeAttributes),l}createUIElement(o,n,a){const l=new UIElement(this.document,o,n);return a&&(l.render=a),l}createRawElement(o,n,a,l={}){const c=new RawElement(this.document,o,n);return a&&(c.render=a),l.renderUnsafeAttributes&&c._unsafeAttributesToRender.push(...l.renderUnsafeAttributes),c}setAttribute(o,n,a,l){l!==void 0?l._setAttribute(o,n,a):a._setAttribute(o,n)}removeAttribute(o,n,a){a!==void 0?a._removeAttribute(o,n):n._removeAttribute(o)}addClass(o,n){n._addClass(o)}removeClass(o,n){n._removeClass(o)}setStyle(o,n,a){isPlainObject$1(o)&&a===void 0?n._setStyle(o):a._setStyle(o,n)}removeStyle(o,n){n._removeStyle(o)}setCustomProperty(o,n,a){a._setCustomProperty(o,n)}removeCustomProperty(o,n){return n._removeCustomProperty(o)}breakAttributes(o){return o instanceof Position$1?this._breakAttributes(o):this._breakAttributesRange(o)}breakContainer(o){const n=o.parent;if(!n.is("containerElement"))throw new CKEditorError("view-writer-break-non-container-element",this.document);if(!n.parent)throw new CKEditorError("view-writer-break-root",this.document);if(o.isAtStart)return Position$1._createBefore(n);if(!o.isAtEnd){const a=n._clone(!1);this.insert(Position$1._createAfter(n),a);const l=new Range$1(o,Position$1._createAt(n,"end")),c=new Position$1(a,0);this.move(l,c)}return Position$1._createAfter(n)}mergeAttributes(o){const n=o.offset,a=o.parent;if(a.is("$text"))return o;if(a.is("attributeElement")&&a.childCount===0){const u=a.parent,d=a.index;return a._remove(),this._removeFromClonedElementsGroup(a),this.mergeAttributes(new Position$1(u,d))}const l=a.getChild(n-1),c=a.getChild(n);if(!l||!c)return o;if(l.is("$text")&&c.is("$text"))return mergeTextNodes(l,c);if(l.is("attributeElement")&&c.is("attributeElement")&&l.isSimilar(c)){const u=l.childCount;return l._appendChild(c.getChildren()),c._remove(),this._removeFromClonedElementsGroup(c),this.mergeAttributes(new Position$1(l,u))}return o}mergeContainers(o){const n=o.nodeBefore,a=o.nodeAfter;if(!n||!a||!n.is("containerElement")||!a.is("containerElement"))throw new CKEditorError("view-writer-merge-containers-invalid-position",this.document);const l=n.getChild(n.childCount-1),c=l instanceof Text$1?Position$1._createAt(l,"end"):Position$1._createAt(n,"end");return this.move(Range$1._createIn(a),Position$1._createAt(n,"end")),this.remove(Range$1._createOn(a)),c}insert(o,n){n=isIterable(n)?[...n]:[n],validateNodesToInsert(n,this.document);const a=n.reduce((u,d)=>{const h=u[u.length-1],f=!d.is("uiElement");return!h||h.breakAttributes!=f?u.push({breakAttributes:f,nodes:[d]}):h.nodes.push(d),u},[]);let l=null,c=o;for(const{nodes:u,breakAttributes:d}of a){const h=this._insertNodes(c,u,d);l||(l=h.start),c=h.end}return l?new Range$1(l,c):new Range$1(o)}remove(o){const n=o instanceof Range$1?o:Range$1._createOn(o);if(validateRangeContainer(n,this.document),n.isCollapsed)return new DocumentFragment$1(this.document);const{start:a,end:l}=this._breakAttributesRange(n,!0),c=a.parent,u=l.offset-a.offset,d=c._removeChildren(a.offset,u);for(const f of d)this._removeFromClonedElementsGroup(f);const h=this.mergeAttributes(a);return n.start=h,n.end=h.clone(),new DocumentFragment$1(this.document,d)}clear(o,n){validateRangeContainer(o,this.document);const a=o.getWalker({direction:"backward",ignoreElementEnd:!0});for(const l of a){const c=l.item;let u;if(c.is("element")&&n.isSimilar(c))u=Range$1._createOn(c);else if(!l.nextPosition.isAfter(o.start)&&c.is("$textProxy")){const d=c.getAncestors().find(h=>h.is("element")&&n.isSimilar(h));d&&(u=Range$1._createIn(d))}u&&(u.end.isAfter(o.end)&&(u.end=o.end),u.start.isBefore(o.start)&&(u.start=o.start),this.remove(u))}}move(o,n){let a;if(n.isAfter(o.end)){n=this._breakAttributes(n,!0);const l=n.parent,c=l.childCount;o=this._breakAttributesRange(o,!0),a=this.remove(o),n.offset+=l.childCount-c}else a=this.remove(o);return this.insert(n,a)}wrap(o,n){if(!(n instanceof AttributeElement))throw new CKEditorError("view-writer-wrap-invalid-attribute",this.document);if(validateRangeContainer(o,this.document),o.isCollapsed){let a=o.start;a.parent.is("element")&&!_hasNonUiChildren(a.parent)&&(a=a.getLastMatchingPosition(c=>c.item.is("uiElement"))),a=this._wrapPosition(a,n);const l=this.document.selection;return l.isCollapsed&&l.getFirstPosition().isEqual(o.start)&&this.setSelection(a),new Range$1(a)}else return this._wrapRange(o,n)}unwrap(o,n){if(!(n instanceof AttributeElement))throw new CKEditorError("view-writer-unwrap-invalid-attribute",this.document);if(validateRangeContainer(o,this.document),o.isCollapsed)return o;const{start:a,end:l}=this._breakAttributesRange(o,!0),c=a.parent,u=this._unwrapChildren(c,a.offset,l.offset,n),d=this.mergeAttributes(u.start);d.isEqual(u.start)||u.end.offset--;const h=this.mergeAttributes(u.end);return new Range$1(d,h)}rename(o,n){const a=new ContainerElement(this.document,o,n.getAttributes());return this.insert(Position$1._createAfter(n),a),this.move(Range$1._createIn(n),Position$1._createAt(a,0)),this.remove(Range$1._createOn(n)),a}clearClonedElementsGroup(o){this._cloneGroups.delete(o)}createPositionAt(o,n){return Position$1._createAt(o,n)}createPositionAfter(o){return Position$1._createAfter(o)}createPositionBefore(o){return Position$1._createBefore(o)}createRange(o,n){return new Range$1(o,n)}createRangeOn(o){return Range$1._createOn(o)}createRangeIn(o){return Range$1._createIn(o)}createSelection(...o){return new Selection$1(...o)}createSlot(o="children"){if(!this._slotFactory)throw new CKEditorError("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,o)}_registerSlotFactory(o){this._slotFactory=o}_clearSlotFactory(){this._slotFactory=null}_insertNodes(o,n,a){let l;if(a?l=getParentContainer(o):l=o.parent.is("$text")?o.parent.parent:o.parent,!l)throw new CKEditorError("view-writer-invalid-position-container",this.document);let c;a?c=this._breakAttributes(o,!0):c=o.parent.is("$text")?breakTextNode(o):o;const u=l._insertChild(c.offset,n);for(const g of n)this._addToClonedElementsGroup(g);const d=c.getShiftedBy(u),h=this.mergeAttributes(c);h.isEqual(c)||d.offset--;const f=this.mergeAttributes(d);return new Range$1(h,f)}_wrapChildren(o,n,a,l){let c=n;const u=[];for(;c<a;){const h=o.getChild(c),f=h.is("$text"),g=h.is("attributeElement");if(g&&h._canMergeAttributesFrom(l))h._mergeAttributesFrom(l),u.push(new Position$1(o,c));else if(f||!g||shouldABeOutsideB(l,h)){const p=l._clone();h._remove(),p._appendChild(h),o._insertChild(c,p),this._addToClonedElementsGroup(p),u.push(new Position$1(o,c))}else this._wrapChildren(h,0,h.childCount,l);c++}let d=0;for(const h of u){if(h.offset-=d,h.offset==n)continue;this.mergeAttributes(h).isEqual(h)||(d++,a--)}return Range$1._createFromParentsAndOffsets(o,n,o,a)}_unwrapChildren(o,n,a,l){let c=n;const u=[];for(;c<a;){const h=o.getChild(c);if(!h.is("attributeElement")){c++;continue}if(h.isSimilar(l)){const f=h.getChildren(),g=h.childCount;h._remove(),o._insertChild(c,f),this._removeFromClonedElementsGroup(h),u.push(new Position$1(o,c),new Position$1(o,c+g)),c+=g,a+=g-1;continue}if(h._canSubtractAttributesOf(l)){h._subtractAttributesOf(l),u.push(new Position$1(o,c),new Position$1(o,c+1)),c++;continue}this._unwrapChildren(h,0,h.childCount,l),c++}let d=0;for(const h of u){if(h.offset-=d,h.offset==n||h.offset==a)continue;this.mergeAttributes(h).isEqual(h)||(d++,a--)}return Range$1._createFromParentsAndOffsets(o,n,o,a)}_wrapRange(o,n){const{start:a,end:l}=this._breakAttributesRange(o,!0),c=a.parent,u=this._wrapChildren(c,a.offset,l.offset,n),d=this.mergeAttributes(u.start);d.isEqual(u.start)||u.end.offset--;const h=this.mergeAttributes(u.end);return new Range$1(d,h)}_wrapPosition(o,n){if(n.isSimilar(o.parent))return movePositionToTextNode(o.clone());o.parent.is("$text")&&(o=breakTextNode(o));const a=this.createAttributeElement("_wrapPosition-fake-element");a._priority=Number.POSITIVE_INFINITY,a.isSimilar=()=>!1,o.parent._insertChild(o.offset,a);const l=new Range$1(o,o.getShiftedBy(1));this.wrap(l,n);const c=new Position$1(a.parent,a.index);a._remove();const u=c.nodeBefore,d=c.nodeAfter;return u&&u.is("view:$text")&&d&&d.is("view:$text")?mergeTextNodes(u,d):movePositionToTextNode(c)}_breakAttributesRange(o,n=!1){const a=o.start,l=o.end;if(validateRangeContainer(o,this.document),o.isCollapsed){const h=this._breakAttributes(o.start,n);return new Range$1(h,h)}const c=this._breakAttributes(l,n),u=c.parent.childCount,d=this._breakAttributes(a,n);return c.offset+=c.parent.childCount-u,new Range$1(d,c)}_breakAttributes(o,n=!1){const a=o.offset,l=o.parent;if(o.parent.is("emptyElement"))throw new CKEditorError("view-writer-cannot-break-empty-element",this.document);if(o.parent.is("uiElement"))throw new CKEditorError("view-writer-cannot-break-ui-element",this.document);if(o.parent.is("rawElement"))throw new CKEditorError("view-writer-cannot-break-raw-element",this.document);if(!n&&l.is("$text")&&isContainerOrFragment(l.parent)||isContainerOrFragment(l))return o.clone();if(l.is("$text"))return this._breakAttributes(breakTextNode(o),n);const c=l.childCount;if(a==c){const u=new Position$1(l.parent,l.index+1);return this._breakAttributes(u,n)}else if(a===0){const u=new Position$1(l.parent,l.index);return this._breakAttributes(u,n)}else{const u=l.index+1,d=l._clone();l.parent._insertChild(u,d),this._addToClonedElementsGroup(d);const h=l.childCount-a,f=l._removeChildren(a,h);d._appendChild(f);const g=new Position$1(l.parent,u);return this._breakAttributes(g,n)}}_addToClonedElementsGroup(o){if(!o.root.is("rootElement"))return;if(o.is("element"))for(const l of o.getChildren())this._addToClonedElementsGroup(l);const n=o.id;if(!n)return;let a=this._cloneGroups.get(n);a||(a=new Set,this._cloneGroups.set(n,a)),a.add(o),o._clonesGroup=a}_removeFromClonedElementsGroup(o){if(o.is("element"))for(const l of o.getChildren())this._removeFromClonedElementsGroup(l);const n=o.id;if(!n)return;const a=this._cloneGroups.get(n);a&&a.delete(o)}}function _hasNonUiChildren(s){return Array.from(s.getChildren()).some(o=>!o.is("uiElement"))}function getParentContainer(s){let o=s.parent;for(;!isContainerOrFragment(o);){if(!o)return;o=o.parent}return o}function shouldABeOutsideB(s,o){return s.priority<o.priority?!0:s.priority>o.priority?!1:s.getIdentity()<o.getIdentity()}function movePositionToTextNode(s){const o=s.nodeBefore;if(o&&o.is("$text"))return new Position$1(o,o.data.length);const n=s.nodeAfter;return n&&n.is("$text")?new Position$1(n,0):s}function breakTextNode(s){if(s.offset==s.parent.data.length)return new Position$1(s.parent.parent,s.parent.index+1);if(s.offset===0)return new Position$1(s.parent.parent,s.parent.index);const o=s.parent.data.slice(s.offset);return s.parent._data=s.parent.data.slice(0,s.offset),s.parent.parent._insertChild(s.parent.index+1,new Text$1(s.root.document,o)),new Position$1(s.parent.parent,s.parent.index+1)}function mergeTextNodes(s,o){const n=s.data.length;return s._data+=o.data,o._remove(),new Position$1(s,n)}const validNodesToInsert=[Text$1,AttributeElement,ContainerElement,EmptyElement,RawElement,UIElement];function validateNodesToInsert(s,o){for(const n of s){if(!validNodesToInsert.some(a=>n instanceof a))throw new CKEditorError("view-writer-insert-invalid-node-type",o);n.is("$text")||validateNodesToInsert(n.getChildren(),o)}}function isContainerOrFragment(s){return s&&(s.is("containerElement")||s.is("documentFragment"))}function validateRangeContainer(s,o){const n=getParentContainer(s.start),a=getParentContainer(s.end);if(!n||!a||n!==a)throw new CKEditorError("view-writer-invalid-range-container",o)}const NBSP_FILLER=s=>s.createTextNode(" "),MARKED_NBSP_FILLER=s=>{const o=s.createElement("span");return o.dataset.ckeFiller="true",o.innerText=" ",o},BR_FILLER=s=>{const o=s.createElement("br");return o.dataset.ckeFiller="true",o},INLINE_FILLER_LENGTH=7,INLINE_FILLER="⁠".repeat(INLINE_FILLER_LENGTH);function startsWithFiller(s){return typeof s=="string"?s.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER:isText(s)&&s.data.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER}function isInlineFiller(s){return s.data.length==INLINE_FILLER_LENGTH&&startsWithFiller(s)}function getDataWithoutFiller(s){const o=typeof s=="string"?s:s.data;return startsWithFiller(s)?o.slice(INLINE_FILLER_LENGTH):o}function injectQuirksHandling(s){s.document.on("arrowKey",jumpOverInlineFiller,{priority:"low"})}function jumpOverInlineFiller(s,o){if(o.keyCode==keyCodes.arrowleft){const n=o.domTarget.ownerDocument.defaultView.getSelection();if(n.rangeCount==1&&n.getRangeAt(0).collapsed){const a=n.getRangeAt(0).startContainer,l=n.getRangeAt(0).startOffset;startsWithFiller(a)&&l<=INLINE_FILLER_LENGTH&&n.collapse(a,0)}}}let Renderer$1=class extends ObservableMixin(){constructor(n,a){super();E(this,"domDocuments",new Set);E(this,"domConverter");E(this,"markedAttributes",new Set);E(this,"markedChildren",new Set);E(this,"markedTexts",new Set);E(this,"selection");E(this,"_inlineFiller",null);E(this,"_fakeSelectionContainer",null);this.domConverter=n,this.selection=a,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),env$1.isBlink&&!env$1.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(n,a){if(n==="text")this.domConverter.mapViewToDom(a.parent)&&this.markedTexts.add(a);else{if(!this.domConverter.mapViewToDom(a))return;if(n==="attributes")this.markedAttributes.add(a);else if(n==="children")this.markedChildren.add(a);else throw new CKEditorError("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!env$1.isAndroid)return;let n=null;const a=env$1.isBlink&&!env$1.isAndroid?!this.isSelecting:!0;for(const l of this.markedChildren)this._updateChildrenMappings(l);a?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?n=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(n=this.selection.getFirstPosition(),this.markedChildren.add(n.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(n=this.domConverter.domPositionToView(this._inlineFiller),n&&n.parent.is("$text")&&(n=Position$1._createBefore(n.parent)));for(const l of this.markedAttributes)this._updateAttrs(l);for(const l of this.markedChildren)this._updateChildren(l,{inlineFillerPosition:n});for(const l of this.markedTexts)!this.markedChildren.has(l.parent)&&this.domConverter.mapViewToDom(l.parent)&&this._updateText(l,{inlineFillerPosition:n});if(a)if(n){const l=this.domConverter.viewPositionToDom(n),c=l.parent.ownerDocument;startsWithFiller(l.parent)?this._inlineFiller=l.parent:this._inlineFiller=addInlineFiller(c,l.parent,l.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(n){const a=this.domConverter.mapViewToDom(n);if(!a)return;const l=Array.from(a.childNodes),c=Array.from(this.domConverter.viewChildrenToDom(n,{withChildren:!1})),u=this._diffNodeLists(l,c),d=this._findUpdateActions(u,l,c,areSimilarElements);if(d.indexOf("update")!==-1){const h={equal:0,insert:0,delete:0};for(const f of d)if(f==="update"){const g=h.equal+h.insert,p=h.equal+h.delete,v=n.getChild(g);v&&!v.is("uiElement")&&!v.is("rawElement")&&this._updateElementMappings(v,l[p]),remove$3(c[g]),h.equal++}else h[f]++}}_updateElementMappings(n,a){this.domConverter.unbindDomElement(a),this.domConverter.bindElements(a,n),this.markedChildren.add(n),this.markedAttributes.add(n)}_getInlineFillerPosition(){const n=this.selection.getFirstPosition();return n.parent.is("$text")?Position$1._createBefore(n.parent):n}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),a=this.domConverter.viewPositionToDom(n);return!!(a&&isText(a.parent)&&startsWithFiller(a.parent))}_removeInlineFiller(){const n=this._inlineFiller;if(!startsWithFiller(n))throw new CKEditorError("view-renderer-filler-was-lost",this);isInlineFiller(n)?n.remove():n.data=n.data.substr(INLINE_FILLER_LENGTH),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),a=n.parent,l=n.offset;if(!this.domConverter.mapViewToDom(a.root)||!a.is("element")||!isEditable(a))return!1;const c=n.nodeBefore,u=n.nodeAfter;return!(c instanceof Text$1||u instanceof Text$1||l===a.getFillerOffset()&&(!c||!c.is("element","br"))||env$1.isAndroid&&(c||u))}_updateText(n,a){const l=this.domConverter.findCorrespondingDomText(n);let u=this.domConverter.viewToDom(n).data;const d=a.inlineFillerPosition;d&&d.parent==n.parent&&d.offset==n.index&&(u=INLINE_FILLER+u),this._updateTextNode(l,u)}_updateAttrs(n){const a=this.domConverter.mapViewToDom(n);if(a){for(const l of Array.from(a.attributes)){const c=l.name;n.hasAttribute(c)||this.domConverter.removeDomElementAttribute(a,c)}for(const l of n.getAttributeKeys())this.domConverter.setDomElementAttribute(a,l,n.getAttribute(l),n)}}_updateChildren(n,a){const l=this.domConverter.mapViewToDom(n);if(!l)return;if(env$1.isAndroid){let v=null;for(const b of Array.from(l.childNodes)){if(v&&isText(v)&&isText(b)){l.normalize();break}v=b}}const c=a.inlineFillerPosition,u=l.childNodes,d=Array.from(this.domConverter.viewChildrenToDom(n,{bind:!0}));c&&c.parent===n&&addInlineFiller(l.ownerDocument,d,c.offset);const h=this._diffNodeLists(u,d),f=this._findUpdateActions(h,u,d,areTextNodes);let g=0;const p=new Set;for(const v of f)v==="delete"?(p.add(u[g]),remove$3(u[g])):(v==="equal"||v==="update")&&g++;g=0;for(const v of f)v==="insert"?(insertAt(l,g,d[g]),g++):v==="update"?(this._updateTextNode(u[g],d[g].data),g++):v==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(d[g])),g++);for(const v of p)v.parentNode||this.domConverter.unbindDomElement(v)}_diffNodeLists(n,a){return n=filterOutFakeSelectionContainer(n,this._fakeSelectionContainer),diff(n,a,sameNodes$1.bind(null,this.domConverter))}_findUpdateActions(n,a,l,c){if(n.indexOf("insert")===-1||n.indexOf("delete")===-1)return n;let u=[],d=[],h=[];const f={equal:0,insert:0,delete:0};for(const g of n)g==="insert"?h.push(l[f.equal+f.insert]):g==="delete"?d.push(a[f.equal+f.delete]):(u=u.concat(diff(d,h,c).map(p=>p==="equal"?"update":p)),u.push("equal"),d=[],h=[]),f[g]++;return u.concat(diff(d,h,c).map(g=>g==="equal"?"update":g))}_updateTextNode(n,a){const l=n.data;l!=a&&(env$1.isAndroid&&this.isComposing&&l.replace(/\u00A0/g," ")==a.replace(/\u00A0/g," ")||this._updateTextNodeInternal(n,a))}_updateTextNodeInternal(n,a){const l=fastDiff(n.data,a);for(const c of l)c.type==="insert"?n.insertData(c.index,c.values.join("")):n.deleteData(c.index,c.howMany)}_markDescendantTextToSync(n){if(n){if(n.is("$text"))this.markedTexts.add(n);else if(n.is("element"))for(const a of n.getChildren())this._markDescendantTextToSync(a)}}_updateSelection(){if(env$1.isBlink&&!env$1.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const n=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!n||(this.selection.isFake?this._updateFakeSelection(n):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(n)):this.isComposing&&env$1.isAndroid||this._updateDomSelection(n))}_updateFakeSelection(n){const a=n.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=createFakeSelectionContainer(a));const l=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(l,this.selection),!this._fakeSelectionNeedsUpdate(n))return;(!l.parentElement||l.parentElement!=n)&&n.appendChild(l),l.textContent=this.selection.fakeSelectionLabel||" ";const c=a.getSelection(),u=a.createRange();c.removeAllRanges(),u.selectNodeContents(l),c.addRange(u)}_updateDomSelection(n){const a=n.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(a))return;const l=this.domConverter.viewPositionToDom(this.selection.anchor),c=this.domConverter.viewPositionToDom(this.selection.focus);a.setBaseAndExtent(l.parent,l.offset,c.parent,c.offset),env$1.isGecko&&fixGeckoSelectionAfterBr(c,a)}_domSelectionNeedsUpdate(n){if(!this.domConverter.isDomSelectionCorrect(n))return!0;const a=n&&this.domConverter.domSelectionToView(n);return!(a&&this.selection.isEqual(a)||!this.selection.isCollapsed&&this.selection.isSimilar(a))}_fakeSelectionNeedsUpdate(n){const a=this._fakeSelectionContainer,l=n.ownerDocument.getSelection();return!a||a.parentElement!==n||l.anchorNode!==a&&!a.contains(l.anchorNode)?!0:a.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const n of this.domDocuments){const a=n.getSelection();if(a.rangeCount){const l=n.activeElement,c=this.domConverter.mapDomToView(l);l&&c&&a.removeAllRanges()}}}_removeFakeSelection(){const n=this._fakeSelectionContainer;n&&n.remove()}_updateFocus(){if(this.isFocused){const n=this.selection.editableElement;n&&this.domConverter.focus(n)}}};function isEditable(s){if(s.getAttribute("contenteditable")=="false")return!1;const o=s.findAncestor(n=>n.hasAttribute("contenteditable"));return!o||o.getAttribute("contenteditable")=="true"}function addInlineFiller(s,o,n){const a=o instanceof Array?o:o.childNodes,l=a[n];if(isText(l))return l.data=INLINE_FILLER+l.data,l;{const c=s.createTextNode(INLINE_FILLER);return Array.isArray(o)?a.splice(n,0,c):insertAt(o,n,c),c}}function areSimilarElements(s,o){return isNode(s)&&isNode(o)&&!isText(s)&&!isText(o)&&!isComment(s)&&!isComment(o)&&s.tagName.toLowerCase()===o.tagName.toLowerCase()}function areTextNodes(s,o){return isNode(s)&&isNode(o)&&isText(s)&&isText(o)}function sameNodes$1(s,o,n){return o===n?!0:isText(o)&&isText(n)?o.data===n.data:!!(s.isBlockFiller(o)&&s.isBlockFiller(n))}function fixGeckoSelectionAfterBr(s,o){let n=s.parent,a=s.offset;if(isText(n)&&isInlineFiller(n)&&(a=indexOf$2(n)+1,n=n.parentNode),n.nodeType!=Node.ELEMENT_NODE||a!=n.childNodes.length-1)return;const l=n.childNodes[a];l&&l.tagName=="BR"&&o.addRange(o.getRangeAt(0))}function filterOutFakeSelectionContainer(s,o){const n=Array.from(s);return n.length==0||!o||n[n.length-1]==o&&n.pop(),n}function createFakeSelectionContainer(s){const o=s.createElement("div");return o.className="ck-fake-selection-container",Object.assign(o.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),o.textContent=" ",o}const BR_FILLER_REF=BR_FILLER(global$1.document),NBSP_FILLER_REF=NBSP_FILLER(global$1.document),MARKED_NBSP_FILLER_REF=MARKED_NBSP_FILLER(global$1.document),UNSAFE_ATTRIBUTE_NAME_PREFIX="data-ck-unsafe-attribute-",UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE="data-ck-unsafe-element";class DomConverter{constructor(o,{blockFillerMode:n,renderingMode:a="editing"}={}){E(this,"document");E(this,"renderingMode");E(this,"blockFillerMode");E(this,"preElements");E(this,"blockElements");E(this,"inlineObjectElements");E(this,"unsafeElements");E(this,"_domDocument");E(this,"_domToViewMapping",new WeakMap);E(this,"_viewToDomMapping",new WeakMap);E(this,"_fakeSelectionMapping",new WeakMap);E(this,"_rawContentElementMatcher",new Matcher);E(this,"_inlineObjectElementMatcher",new Matcher);E(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=o,this.renderingMode=a,this.blockFillerMode=n||(a==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?global$1.document:global$1.document.implementation.createHTMLDocument("")}bindFakeSelection(o,n){this._fakeSelectionMapping.set(o,new Selection$1(n))}fakeSelectionToView(o){return this._fakeSelectionMapping.get(o)}bindElements(o,n){this._domToViewMapping.set(o,n),this._viewToDomMapping.set(n,o)}unbindDomElement(o){const n=this._domToViewMapping.get(o);if(n){this._domToViewMapping.delete(o),this._viewToDomMapping.delete(n);for(const a of o.children)this.unbindDomElement(a)}}bindDocumentFragments(o,n){this._domToViewMapping.set(o,n),this._viewToDomMapping.set(n,o)}shouldRenderAttribute(o,n,a){return this.renderingMode==="data"?!0:(o=o.toLowerCase(),o.startsWith("on")||o==="srcdoc"&&n.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:a==="img"&&(o==="src"||o==="srcset")||a==="source"&&o==="srcset"?!0:!n.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(o,n){if(this.renderingMode==="data"){o.innerHTML=n;return}const a=new DOMParser().parseFromString(n,"text/html"),l=a.createDocumentFragment(),c=a.body.childNodes;for(;c.length>0;)l.appendChild(c[0]);const u=a.createTreeWalker(l,NodeFilter.SHOW_ELEMENT),d=[];let h;for(;h=u.nextNode();)d.push(h);for(const f of d){for(const p of f.getAttributeNames())this.setDomElementAttribute(f,p,f.getAttribute(p));const g=f.tagName.toLowerCase();this._shouldRenameElement(g)&&(_logUnsafeElement(g),f.replaceWith(this._createReplacementDomElement(g,f)))}for(;o.firstChild;)o.firstChild.remove();o.append(l)}viewToDom(o,n={}){if(o.is("$text")){const a=this._processDataFromViewText(o);return this._domDocument.createTextNode(a)}else{const a=o;if(this.mapViewToDom(a))if(a.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(a);else return this.mapViewToDom(a);let l;if(a.is("documentFragment"))l=this._domDocument.createDocumentFragment(),n.bind&&this.bindDocumentFragments(l,a);else{if(a.is("uiElement"))return a.name==="$comment"?l=this._domDocument.createComment(a.getCustomProperty("$rawContent")):l=a.render(this._domDocument,this),n.bind&&this.bindElements(l,a),l;this._shouldRenameElement(a.name)?(_logUnsafeElement(a.name),l=this._createReplacementDomElement(a.name)):a.hasAttribute("xmlns")?l=this._domDocument.createElementNS(a.getAttribute("xmlns"),a.name):l=this._domDocument.createElement(a.name),a.is("rawElement")&&a.render(l,this),n.bind&&this.bindElements(l,a);for(const c of a.getAttributeKeys())this.setDomElementAttribute(l,c,a.getAttribute(c),a)}if(n.withChildren!==!1)for(const c of this.viewChildrenToDom(a,n))l instanceof HTMLTemplateElement?l.content.appendChild(c):l.appendChild(c);return l}}setDomElementAttribute(o,n,a,l){const c=this.shouldRenderAttribute(n,a,o.tagName.toLowerCase())||l&&l.shouldRenderUnsafeAttribute(n);if(c||logWarning("domconverter-unsafe-attribute-detected",{domElement:o,key:n,value:a}),!isValidAttributeName(n)){logWarning("domconverter-invalid-attribute-detected",{domElement:o,key:n,value:a});return}o.hasAttribute(n)&&!c?o.removeAttribute(n):o.hasAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+n)&&c&&o.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+n),o.setAttribute(c?n:UNSAFE_ATTRIBUTE_NAME_PREFIX+n,a)}removeDomElementAttribute(o,n){n!=UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE&&(o.removeAttribute(n),o.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+n))}*viewChildrenToDom(o,n={}){const a=o.getFillerOffset&&o.getFillerOffset();let l=0;for(const c of o.getChildren()){a===l&&(yield this._getBlockFiller());const u=c.is("element")&&!!c.getCustomProperty("dataPipeline:transparentRendering")&&!first(c.getAttributes());if(u&&this.renderingMode=="data")if(c.is("rawElement")){const d=this._domDocument.createElement(c.name);c.render(d,this),yield*[...d.childNodes]}else yield*this.viewChildrenToDom(c,n);else u&&logWarning("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:c}),yield this.viewToDom(c,n);l++}a===l&&(yield this._getBlockFiller())}viewRangeToDom(o){const n=this.viewPositionToDom(o.start),a=this.viewPositionToDom(o.end),l=this._domDocument.createRange();return l.setStart(n.parent,n.offset),l.setEnd(a.parent,a.offset),l}viewPositionToDom(o){const n=o.parent;if(n.is("$text")){const a=this.findCorrespondingDomText(n);if(!a)return null;let l=o.offset;return startsWithFiller(a)&&(l+=INLINE_FILLER_LENGTH),{parent:a,offset:l}}else{let a,l,c;if(o.offset===0){if(a=this.mapViewToDom(n),!a)return null;c=a.childNodes[0]}else{const d=o.nodeBefore;if(l=d.is("$text")?this.findCorrespondingDomText(d):this.mapViewToDom(d),!l)return null;a=l.parentNode,c=l.nextSibling}if(isText(c)&&startsWithFiller(c))return{parent:c,offset:INLINE_FILLER_LENGTH};const u=l?indexOf$2(l)+1:0;return{parent:a,offset:u}}}domToView(o,n={}){const a=[],l=this._domToView(o,n,a),c=l.next().value;return!c||(l.next(),this._processDomInlineNodes(null,a,n),this.blockFillerMode=="br"&&isViewBrFiller(c))||c.is("$text")&&c.data.length==0?null:c}*domChildrenToView(o,n={},a=[]){let l=[];o instanceof HTMLTemplateElement?l=[...o.content.childNodes]:l=[...o.childNodes];for(let c=0;c<l.length;c++){const u=l[c],d=this._domToView(u,n,a),h=d.next().value;h!==null&&(this._isBlockViewElement(h)&&this._processDomInlineNodes(o,a,n),this.blockFillerMode=="br"&&isViewBrFiller(h)||(yield h),d.next())}this._processDomInlineNodes(o,a,n)}domSelectionToView(o){if(isGeckoRestrictedDomSelection(o))return new Selection$1([]);if(o.rangeCount===1){let l=o.getRangeAt(0).startContainer;isText(l)&&(l=l.parentNode);const c=this.fakeSelectionToView(l);if(c)return c}const n=this.isDomSelectionBackward(o),a=[];for(let l=0;l<o.rangeCount;l++){const c=o.getRangeAt(l),u=this.domRangeToView(c);u&&a.push(u)}return new Selection$1(a,{backward:n})}domRangeToView(o){const n=this.domPositionToView(o.startContainer,o.startOffset),a=this.domPositionToView(o.endContainer,o.endOffset);return n&&a?new Range$1(n,a):null}domPositionToView(o,n=0){if(this.isBlockFiller(o))return this.domPositionToView(o.parentNode,indexOf$2(o));const a=this.mapDomToView(o);if(a&&(a.is("uiElement")||a.is("rawElement")))return Position$1._createBefore(a);if(isText(o)){if(isInlineFiller(o))return this.domPositionToView(o.parentNode,indexOf$2(o));const l=this.findCorrespondingViewText(o);let c=n;return l?(startsWithFiller(o)&&(c-=INLINE_FILLER_LENGTH,c=c<0?0:c),new Position$1(l,c)):null}else{if(n===0){const l=this.mapDomToView(o);if(l)return new Position$1(l,0)}else{const l=o.childNodes[n-1];if(isText(l)&&isInlineFiller(l)||l&&this.isBlockFiller(l))return this.domPositionToView(l.parentNode,indexOf$2(l));const c=isText(l)?this.findCorrespondingViewText(l):this.mapDomToView(l);if(c&&c.parent)return new Position$1(c.parent,c.index+1)}return null}}mapDomToView(o){return this.getHostViewElement(o)||this._domToViewMapping.get(o)}findCorrespondingViewText(o){if(isInlineFiller(o))return null;const n=this.getHostViewElement(o);if(n)return n;const a=o.previousSibling;if(a){if(!this.isElement(a))return null;const l=this.mapDomToView(a);if(l){const c=l.nextSibling;return c instanceof Text$1?c:null}}else{const l=this.mapDomToView(o.parentNode);if(l){const c=l.getChild(0);return c instanceof Text$1?c:null}}return null}mapViewToDom(o){return this._viewToDomMapping.get(o)}findCorrespondingDomText(o){const n=o.previousSibling;return n&&this.mapViewToDom(n)?this.mapViewToDom(n).nextSibling:!n&&o.parent&&this.mapViewToDom(o.parent)?this.mapViewToDom(o.parent).childNodes[0]:null}focus(o){const n=this.mapViewToDom(o);if(n&&n.ownerDocument.activeElement!==n){const{scrollX:a,scrollY:l}=global$1.window,c=[];forEachDomElementAncestor(n,u=>{const{scrollLeft:d,scrollTop:h}=u;c.push([d,h])}),n.focus(),forEachDomElementAncestor(n,u=>{const[d,h]=c.shift();u.scrollLeft=d,u.scrollTop=h}),global$1.window.scrollTo(a,l)}}_clearDomSelection(){const o=this.mapViewToDom(this.document.selection.editableElement);if(!o)return;const n=o.ownerDocument.defaultView.getSelection(),a=this.domSelectionToView(n);a&&a.rangeCount>0&&n.removeAllRanges()}isElement(o){return o&&o.nodeType==Node.ELEMENT_NODE}isDocumentFragment(o){return o&&o.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(o){return this.blockFillerMode=="br"?o.isEqualNode(BR_FILLER_REF):isOnlyBrInBlock(o,this.blockElements)?!0:o.isEqualNode(MARKED_NBSP_FILLER_REF)||isNbspBlockFiller(o,this.blockElements)}isDomSelectionBackward(o){if(o.isCollapsed)return!1;const n=this._domDocument.createRange();try{n.setStart(o.anchorNode,o.anchorOffset),n.setEnd(o.focusNode,o.focusOffset)}catch{return!1}const a=n.collapsed;return n.detach(),a}getHostViewElement(o){const n=getAncestors(o);for(n.pop();n.length;){const a=n.pop(),l=this._domToViewMapping.get(a);if(l&&(l.is("uiElement")||l.is("rawElement")))return l}return null}isDomSelectionCorrect(o){return this._isDomSelectionPositionCorrect(o.anchorNode,o.anchorOffset)&&this._isDomSelectionPositionCorrect(o.focusNode,o.focusOffset)}registerRawContentMatcher(o){this._rawContentElementMatcher.add(o)}registerInlineObjectMatcher(o){this._inlineObjectElementMatcher.add(o)}_clearTemporaryCustomProperties(){for(const o of this._elementsWithTemporaryCustomProperties)o._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return NBSP_FILLER(this._domDocument);case"markedNbsp":return MARKED_NBSP_FILLER(this._domDocument);case"br":return BR_FILLER(this._domDocument)}}_isDomSelectionPositionCorrect(o,n){if(isText(o)&&startsWithFiller(o)&&n<INLINE_FILLER_LENGTH||this.isElement(o)&&startsWithFiller(o.childNodes[n]))return!1;const a=this.mapDomToView(o);return!(a&&(a.is("uiElement")||a.is("rawElement")))}*_domToView(o,n,a){if(this.blockFillerMode!="br"&&isOnlyBrInBlock(o,this.blockElements))return null;const l=this.getHostViewElement(o);if(l)return l;if(isComment(o)&&n.skipComments)return null;if(isText(o)){if(isInlineFiller(o))return null;{const c=o.data;if(c==="")return null;const u=new Text$1(this.document,c);return a.push(u),u}}else{let c=this.mapDomToView(o);if(c)return this._isInlineObjectElement(c)&&a.push(c),c;if(this.isDocumentFragment(o))c=new DocumentFragment$1(this.document),n.bind&&this.bindDocumentFragments(o,c);else{c=this._createViewElement(o,n),n.bind&&this.bindElements(o,c);const d=o.attributes;if(d)for(let h=d.length,f=0;f<h;f++)c._setAttribute(d[f].name,d[f].value);if(this._isViewElementWithRawContent(c,n))return c._setCustomProperty("$rawContent",o.innerHTML),this._isBlockViewElement(c)||a.push(c),c;if(isComment(o))return c._setCustomProperty("$rawContent",o.data),c}yield c;const u=[];if(n.withChildren!==!1)for(const d of this.domChildrenToView(o,n,u))c._appendChild(d);if(this._isInlineObjectElement(c))a.push(c),this._processDomInlineNodes(null,u,n);else for(const d of u)a.push(d)}}_processDomInlineNodes(o,n,a){if(!n.length||o&&!this.isDocumentFragment(o)&&!this._isBlockDomElement(o))return;let l=!1;for(let c=0;c<n.length;c++){const u=n[c];if(!u.is("$text")){l=!1;continue}let d,h=!1;if(this._isPreFormatted(u))d=getDataWithoutFiller(u.data);else{d=u.data.replace(/[ \n\t\r]{1,}/g," "),h=/[^\S\u00A0]/.test(d.charAt(d.length-1));const f=c>0?n[c-1]:null,g=c+1<n.length?n[c+1]:null,p=!f||f.is("element")&&f.name=="br"||l,v=g?!1:!startsWithFiller(u.data);a.withChildren!==!1&&(p&&(d=d.replace(/^ /,"")),v&&(d=d.replace(/ $/,""))),d=getDataWithoutFiller(d),this.blockFillerMode!="br"&&u.parent&&(isViewMarkedNbspFiller(u.parent,d)?(d="",u.parent.parent&&(u.parent.parent._setCustomProperty("$hasBlockFiller",!0),u.parent._remove())):isViewNbspFiller(u.parent,d,this.blockElements)&&(d="",u.parent._setCustomProperty("$hasBlockFiller",!0))),d=d.replace(/ \u00A0/g,"  ");const b=g&&g.is("element")&&g.name!="br",_=g&&g.is("$text")&&g.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(d)||!g||b||_)&&(d=d.replace(/\u00A0$/," ")),(p||f&&f.is("element")&&f.name!="br")&&(d=d.replace(/^\u00A0/," "))}d.length==0&&u.parent?(u._remove(),n.splice(c,1),c--):(u._data=d,l=h)}n.length=0}_processDataFromViewText(o){let n=o.data;if(this._isPreFormatted(o))return n;if(n.charAt(0)==" "){const a=this._getTouchingInlineViewNode(o,!1);(a&&a.is("$textProxy")&&this._nodeEndsWithSpace(a)||!a)&&(n=" "+n.substr(1))}if(n.charAt(n.length-1)==" "){const a=this._getTouchingInlineViewNode(o,!0),l=a&&a.is("$textProxy")&&a.data.charAt(0)==" ";(n.charAt(n.length-2)==" "||!a||l)&&(n=n.substr(0,n.length-1)+" ")}return n.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(o){if(this._isPreFormatted(o))return!1;const n=this._processDataFromViewText(o);return n.charAt(n.length-1)==" "}_isPreFormatted(o){if(_hasViewParentOfType(o,this.preElements))return!0;for(const n of o.getAncestors({parentFirst:!0}))if(!(!n.is("element")||!n.hasStyle("white-space")||n.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(n.getStyle("white-space"));return!1}_getTouchingInlineViewNode(o,n){const a=new TreeWalker$1({startPosition:n?Position$1._createAfter(o):Position$1._createBefore(o),direction:n?"forward":"backward"});for(const{item:l}of a){if(l.is("$textProxy"))return l;if(l.is("element")&&l.getCustomProperty("dataPipeline:transparentRendering"))continue;if(l.is("element","br"))return null;if(this._isInlineObjectElement(l))return l;if(l.is("containerElement"))return null}return null}_isBlockDomElement(o){return this.isElement(o)&&this.blockElements.includes(o.tagName.toLowerCase())}_isBlockViewElement(o){return o.is("element")&&this.blockElements.includes(o.name)}_isInlineObjectElement(o){return o.is("element")?o.name=="br"||this.inlineObjectElements.includes(o.name)||!!this._inlineObjectElementMatcher.match(o):!1}_createViewElement(o,n){if(isComment(o))return new UIElement(this.document,"$comment");const a=n.keepOriginalCase?o.tagName:o.tagName.toLowerCase();return new Element$1(this.document,a)}_isViewElementWithRawContent(o,n){return n.withChildren!==!1&&o.is("element")&&!!this._rawContentElementMatcher.match(o)}_shouldRenameElement(o){const n=o.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(n)}_createReplacementDomElement(o,n){const a=this._domDocument.createElement("span");if(a.setAttribute(UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE,o),n){for(;n.firstChild;)a.appendChild(n.firstChild);for(const l of n.getAttributeNames())a.setAttribute(l,n.getAttribute(l))}return a}}function _hasViewParentOfType(s,o){return s.getAncestors().some(n=>n.is("element")&&o.includes(n.name))}function forEachDomElementAncestor(s,o){let n=s;for(;n;)o(n),n=n.parentElement}function isNbspBlockFiller(s,o){return s.isEqualNode(NBSP_FILLER_REF)&&hasBlockParent(s,o)&&s.parentNode.childNodes.length===1}function hasBlockParent(s,o){const n=s.parentNode;return!!n&&!!n.tagName&&o.includes(n.tagName.toLowerCase())}function isViewNbspFiller(s,o,n){return o==" "&&s&&s.is("element")&&s.childCount==1&&n.includes(s.name)}function isViewMarkedNbspFiller(s,o){return o==" "&&s&&s.is("element","span")&&s.childCount==1&&s.hasAttribute("data-cke-filler")}function isViewBrFiller(s){return s.is("element","br")&&s.hasAttribute("data-cke-filler")}function isOnlyBrInBlock(s,o){return s.tagName==="BR"&&hasBlockParent(s,o)&&s.parentNode.childNodes.length===1}function _logUnsafeElement(s){s==="script"&&logWarning("domconverter-unsafe-script-element-detected"),s==="style"&&logWarning("domconverter-unsafe-style-element-detected")}function isGeckoRestrictedDomSelection(s){if(!env$1.isGecko||!s.rangeCount)return!1;const o=s.getRangeAt(0).startContainer;try{Object.prototype.toString.call(o)}catch{return!0}return!1}class Observer extends DomEmitterMixin(){constructor(n){super();E(this,"view");E(this,"document");E(this,"_isEnabled",!1);this.view=n,this.document=n.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(n){return n&&n.nodeType===3&&(n=n.parentNode),!n||n.nodeType!==1?!1:n.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class DomEventData{constructor(o,n,a){E(this,"view");E(this,"document");E(this,"domEvent");E(this,"domTarget");this.view=o,this.document=o.document,this.domEvent=n,this.domTarget=n.target,assignIn(this,a)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class DomEventObserver extends Observer{constructor(){super(...arguments);E(this,"useCapture",!1);E(this,"usePassive",!1)}observe(n){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(l=>{this.listenTo(n,l,(c,u)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(u.target)&&this.onDomEvent(u)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(n){this.stopListening(n)}fire(n,a,l){this.isEnabled&&this.document.fire(n,new DomEventData(this.view,a,l))}}class KeyObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType",["keydown","keyup"])}onDomEvent(n){const a={keyCode:n.keyCode,altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey,get keystroke(){return getCode(this)}};this.fire(n.type,n,a)}}class FakeSelectionObserver extends Observer{constructor(n){super(n);E(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=debounce$1(a=>{this.document.fire("selectionChangeDone",a)},200)}observe(){const n=this.document;n.on("arrowKey",(a,l)=>{n.selection.isFake&&this.isEnabled&&l.preventDefault()},{context:"$capture"}),n.on("arrowKey",(a,l)=>{n.selection.isFake&&this.isEnabled&&this._handleSelectionMove(l.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(n){const a=this.document.selection,l=new Selection$1(a.getRanges(),{backward:a.isBackward,fake:!1});(n==keyCodes.arrowleft||n==keyCodes.arrowup)&&l.setTo(l.getFirstPosition()),(n==keyCodes.arrowright||n==keyCodes.arrowdown)&&l.setTo(l.getLastPosition());const c={oldSelection:a,newSelection:l,domSelection:null};this.document.fire("selectionChange",c),this._fireSelectionChangeDoneDebounced(c)}}let MutationObserver$1=class extends Observer{constructor(n){super(n);E(this,"domConverter");E(this,"_config");E(this,"_domElements");E(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=n.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(n){this._domElements.add(n),this.isEnabled&&this._mutationObserver.observe(n,this._config)}stopObserving(n){if(this._domElements.delete(n),this.isEnabled){this._mutationObserver.disconnect();for(const a of this._domElements)this._mutationObserver.observe(a,this._config)}}enable(){super.enable();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(n){if(n.length===0)return;const a=this.domConverter,l=new Set,c=new Set;for(const d of n){const h=a.mapDomToView(d.target);h&&(h.is("uiElement")||h.is("rawElement")||d.type==="childList"&&!this._isBogusBrMutation(d)&&c.add(h))}for(const d of n){const h=a.mapDomToView(d.target);if(!(h&&(h.is("uiElement")||h.is("rawElement")))&&d.type==="characterData"){const f=a.findCorrespondingViewText(d.target);f&&!c.has(f.parent)?l.add(f):!f&&startsWithFiller(d.target)&&c.add(a.mapDomToView(d.target.parentNode))}}const u=[];for(const d of l)u.push({type:"text",node:d});for(const d of c){const h=a.mapViewToDom(d),f=Array.from(d.getChildren()),g=Array.from(a.domChildrenToView(h,{withChildren:!1}));isEqualWith(f,g,sameNodes)||u.push({type:"children",node:d})}u.length&&this.document.fire("mutations",{mutations:u})}_isBogusBrMutation(n){let a=null;return n.nextSibling===null&&n.removedNodes.length===0&&n.addedNodes.length==1&&(a=this.domConverter.domToView(n.addedNodes[0],{withChildren:!1})),a&&a.is("element","br")}};function sameNodes(s,o){if(!Array.isArray(s))return s===o?!0:s.is("$text")&&o.is("$text")?s.data===o.data:!1}class FocusObserver extends DomEventObserver{constructor(n){super(n);E(this,"_renderTimeoutId",null);E(this,"_isFocusChanging",!1);E(this,"domEventType",["focus","blur"]);this.useCapture=!0;const a=this.document;a.on("focus",()=>this._handleFocus()),a.on("blur",(l,c)=>this._handleBlur(c)),a.on("beforeinput",()=>{a.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(n){this.fire(n.type,n)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(n){const a=this.document.selection.editableElement;(a===null||a===n.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class SelectionObserver extends Observer{constructor(n){super(n);E(this,"mutationObserver");E(this,"focusObserver");E(this,"selection");E(this,"domConverter");E(this,"_documents");E(this,"_fireSelectionChangeDoneDebounced");E(this,"_clearInfiniteLoopInterval");E(this,"_documentIsSelectingInactivityTimeoutDebounced");E(this,"_loopbackCounter");this.mutationObserver=n.getObserver(MutationObserver$1),this.focusObserver=n.getObserver(FocusObserver),this.selection=this.document.selection,this.domConverter=n.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=debounce$1(a=>{this.document.fire("selectionChangeDone",a)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=debounce$1(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(n){const a=n.ownerDocument,l=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},c=()=>{this.document.isSelecting&&(this._handleSelectionChange(a),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(n,"selectstart",l,{priority:"highest"}),this.listenTo(n,"keydown",c,{priority:"highest",useCapture:!0}),this.listenTo(n,"keyup",c,{priority:"highest",useCapture:!0}),!this._documents.has(a)&&(this.listenTo(a,"mouseup",c,{priority:"highest",useCapture:!0}),this.listenTo(a,"selectionchange",()=>{this.document.isComposing&&!env$1.isAndroid||(this._handleSelectionChange(a),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(a)},{priority:"lowest"}),this._documents.add(a))}stopObserving(n){this.stopListening(n)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(n){if(!this.isEnabled)return;const a=n.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(a.anchorNode))return;this.mutationObserver.flush();const l=this.domConverter.domSelectionToView(a);if(l.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(l)&&this.domConverter.isDomSelectionCorrect(a))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(l))this.view.forceRender();else{const c={oldSelection:this.selection,newSelection:l,domSelection:a};this.document.fire("selectionChange",c),this._fireSelectionChangeDoneDebounced(c)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class CompositionObserver extends DomEventObserver{constructor(n){super(n);E(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const a=this.document;a.on("compositionstart",()=>{a.isComposing=!0},{priority:"low"}),a.on("compositionend",()=>{a.isComposing=!1},{priority:"low"})}onDomEvent(n){this.fire(n.type,n,{data:n.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class DataTransfer{constructor(o,n={}){E(this,"_files");E(this,"_native");this._files=n.cacheFiles?getFiles(o):null,this._native=o}get files(){return this._files||(this._files=getFiles(this._native)),this._files}get types(){return this._native.types}getData(o){return this._native.getData(o)}setData(o,n){this._native.setData(o,n)}set effectAllowed(o){this._native.effectAllowed=o}get effectAllowed(){return this._native.effectAllowed}set dropEffect(o){this._native.dropEffect=o}get dropEffect(){return this._native.dropEffect}setDragImage(o,n,a){this._native.setDragImage(o,n,a)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function getFiles(s){const o=Array.from(s.files||[]),n=Array.from(s.items||[]);return o.length?o:n.filter(a=>a.kind==="file").map(a=>a.getAsFile())}class InputObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType","beforeinput")}onDomEvent(n){const a=n.getTargetRanges(),l=this.view,c=l.document;let u=null,d=null,h=[];if(n.dataTransfer&&(u=new DataTransfer(n.dataTransfer)),n.data!==null?d=n.data:u&&(d=u.getData("text/plain")),c.selection.isFake)h=Array.from(c.selection.getRanges());else if(a.length)h=a.map(f=>{const g=l.domConverter.domPositionToView(f.startContainer,f.startOffset),p=l.domConverter.domPositionToView(f.endContainer,f.endOffset);if(g)return l.createRange(g,p);if(p)return l.createRange(p)}).filter(f=>!!f);else if(env$1.isAndroid){const f=n.target.ownerDocument.defaultView.getSelection();h=Array.from(l.domConverter.domSelectionToView(f).getRanges())}if(env$1.isAndroid&&n.inputType=="insertCompositionText"&&d&&d.endsWith(`
`)){this.fire(n.type,n,{inputType:"insertParagraph",targetRanges:[l.createRange(h[0].end)]});return}if(n.inputType=="insertText"&&d&&d.includes(`
`)){const f=d.split(/\n{1,2}/g);let g=h;for(let p=0;p<f.length;p++){const v=f[p];v!=""&&(this.fire(n.type,n,{data:v,dataTransfer:u,targetRanges:g,inputType:n.inputType,isComposing:n.isComposing}),g=[c.selection.getFirstRange()]),p+1<f.length&&(this.fire(n.type,n,{inputType:"insertParagraph",targetRanges:g}),g=[c.selection.getFirstRange()])}return}this.fire(n.type,n,{data:d,dataTransfer:u,targetRanges:h,inputType:n.inputType,isComposing:n.isComposing})}}class ArrowKeysObserver extends Observer{constructor(o){super(o),this.document.on("keydown",(n,a)=>{if(this.isEnabled&&isArrowKeyCode(a.keyCode)){const l=new BubblingEventInfo(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(l,a),l.stop.called&&n.stop()}})}observe(){}stopObserving(){}}class TabObserver extends Observer{constructor(o){super(o);const n=this.document;n.on("keydown",(a,l)=>{if(!this.isEnabled||l.keyCode!=keyCodes.tab||l.ctrlKey)return;const c=new BubblingEventInfo(n,"tab",n.selection.getFirstRange());n.fire(c,l),c.stop.called&&a.stop()})}observe(){}stopObserving(){}}let View$2=class extends ObservableMixin(){constructor(n){super();E(this,"document");E(this,"domConverter");E(this,"domRoots",new Map);E(this,"_renderer");E(this,"_initialDomRootAttributes",new WeakMap);E(this,"_observers",new Map);E(this,"_writer");E(this,"_ongoingChange",!1);E(this,"_postFixersInProgress",!1);E(this,"_renderingDisabled",!1);E(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Document$1(n),this.domConverter=new DomConverter(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Renderer$1(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new DowncastWriter(this.document),this.addObserver(MutationObserver$1),this.addObserver(FocusObserver),this.addObserver(SelectionObserver),this.addObserver(KeyObserver),this.addObserver(FakeSelectionObserver),this.addObserver(CompositionObserver),this.addObserver(ArrowKeysObserver),this.addObserver(InputObserver),this.addObserver(TabObserver),injectQuirksHandling(this),injectUiElementHandling(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),env$1.isiOS&&this.listenTo(this.document,"blur",(a,l)=>{this.domConverter.mapDomToView(l.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(a,{mutations:l})=>{l.forEach(c=>this._renderer.markToSync(c.type,c.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(n,a="main"){const l=this.document.getRoot(a);l._name=n.tagName.toLowerCase();const c={};for(const{name:d,value:h}of Array.from(n.attributes))c[d]=h,d==="class"?this._writer.addClass(h.split(" "),l):l.hasAttribute(d)||this._writer.setAttribute(d,h,l);this._initialDomRootAttributes.set(n,c);const u=()=>{this._writer.setAttribute("contenteditable",(!l.isReadOnly).toString(),l),l.isReadOnly?this._writer.addClass("ck-read-only",l):this._writer.removeClass("ck-read-only",l)};u(),this.domRoots.set(a,n),this.domConverter.bindElements(n,l),this._renderer.markToSync("children",l),this._renderer.markToSync("attributes",l),this._renderer.domDocuments.add(n.ownerDocument),l.on("change:children",(d,h)=>this._renderer.markToSync("children",h)),l.on("change:attributes",(d,h)=>this._renderer.markToSync("attributes",h)),l.on("change:text",(d,h)=>this._renderer.markToSync("text",h)),l.on("change:isReadOnly",()=>this.change(u)),l.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const d of this._observers.values())d.observe(n,a)}detachDomRoot(n){const a=this.domRoots.get(n);Array.from(a.attributes).forEach(({name:c})=>a.removeAttribute(c));const l=this._initialDomRootAttributes.get(a);for(const c in l)a.setAttribute(c,l[c]);this.domRoots.delete(n),this.domConverter.unbindDomElement(a);for(const c of this._observers.values())c.stopObserving(a)}getDomRoot(n="main"){return this.domRoots.get(n)}addObserver(n){let a=this._observers.get(n);if(a)return a;a=new n(this),this._observers.set(n,a);for(const[l,c]of this.domRoots)a.observe(c,l);return a.enable(),a}getObserver(n){return this._observers.get(n)}disableObservers(){for(const n of this._observers.values())n.disable()}enableObservers(){for(const n of this._observers.values())n.enable()}scrollToTheSelection({alignToTop:n,forceScroll:a,viewportOffset:l=20,ancestorOffset:c=20}={}){const u=this.document.selection.getFirstRange();if(!u)return;const d=cloneDeep({alignToTop:n,forceScroll:a,viewportOffset:l,ancestorOffset:c});typeof l=="number"&&(l={top:l,bottom:l,left:l,right:l});const h={target:this.domConverter.viewRangeToDom(u),viewportOffset:l,ancestorOffset:c,alignToTop:n,forceScroll:a};this.fire("scrollToTheSelection",h,d),scrollViewportToShowTarget(h)}focus(){if(!this.document.isFocused){const n=this.document.selection.editableElement;n&&(this.domConverter.focus(n),this.forceRender())}}change(n){if(this.isRenderingInProgress||this._postFixersInProgress)throw new CKEditorError("cannot-change-view-tree",this);try{if(this._ongoingChange)return n(this._writer);this._ongoingChange=!0;const a=n(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),a}catch(a){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(a,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(FocusObserver).flush(),this.change(()=>{})}destroy(){for(const n of this._observers.values())n.destroy();this.document.destroy(),this.stopListening()}createPositionAt(n,a){return Position$1._createAt(n,a)}createPositionAfter(n){return Position$1._createAfter(n)}createPositionBefore(n){return Position$1._createBefore(n)}createRange(n,a){return new Range$1(n,a)}createRangeOn(n){return Range$1._createOn(n)}createRangeIn(n){return Range$1._createIn(n)}createSelection(...n){return new Selection$1(...n)}_disableRendering(n){this._renderingDisabled=n,n==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TypeCheckable{is(){throw new Error("is() method is abstract")}}class TextProxy extends TypeCheckable{constructor(n,a,l){super();E(this,"textNode");E(this,"data");E(this,"offsetInText");if(this.textNode=n,a<0||a>n.offsetSize)throw new CKEditorError("model-textproxy-wrong-offsetintext",this);if(l<0||a+l>n.offsetSize)throw new CKEditorError("model-textproxy-wrong-length",this);this.data=n.data.substring(a,a+l),this.offsetInText=a}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const n=this.textNode.getPath();return n.length>0&&(n[n.length-1]+=this.offsetInText),n}getAncestors(n={}){const a=[];let l=n.includeSelf?this:this.parent;for(;l;)a[n.parentFirst?"push":"unshift"](l),l=l.parent;return a}hasAttribute(n){return this.textNode.hasAttribute(n)}getAttribute(n){return this.textNode.getAttribute(n)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}TextProxy.prototype.is=function(s){return s==="$textProxy"||s==="model:$textProxy"||s==="textProxy"||s==="model:textProxy"};class TreeWalker{constructor(o){E(this,"direction");E(this,"boundaries");E(this,"singleCharacters");E(this,"shallow");E(this,"ignoreElementEnd");E(this,"_position");E(this,"_boundaryStartParent");E(this,"_boundaryEndParent");E(this,"_visitedParent");if(!o||!o.boundaries&&!o.startPosition)throw new CKEditorError("model-tree-walker-no-start-position",null);const n=o.direction||"forward";if(n!="forward"&&n!="backward")throw new CKEditorError("model-tree-walker-unknown-direction",o,{direction:n});this.direction=n,this.boundaries=o.boundaries||null,o.startPosition?this._position=o.startPosition.clone():this._position=Position._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!o.singleCharacters,this.shallow=!!o.shallow,this.ignoreElementEnd=!!o.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(o){let n,a,l,c;do l=this.position,c=this._visitedParent,{done:n,value:a}=this.next();while(!n&&o(a));n||(this._position=l,this._visitedParent=c)}jumpTo(o){this._boundaryStartParent&&o.isBefore(this.boundaries.start)?o=this.boundaries.start:this._boundaryEndParent&&o.isAfter(this.boundaries.end)&&(o=this.boundaries.end),this._position=o.clone(),this._visitedParent=o.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const o=this.position,n=this.position.clone(),a=this._visitedParent;if(a.parent===null&&n.offset===a.maxOffset)return{done:!0,value:void 0};if(a===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const l=getTextNodeAtPosition(n,a),c=l||getNodeAfterPosition(n,a,l);if(c&&c.is("model:element")){if(!this.shallow)n.path.push(0),this._visitedParent=c;else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,formatReturnValue("elementStart",c,o,n,1)}if(c&&c.is("model:$text")){let u;if(this.singleCharacters)u=1;else{let f=c.endOffset;this._boundaryEndParent==a&&this.boundaries.end.offset<f&&(f=this.boundaries.end.offset),u=f-n.offset}const d=n.offset-c.startOffset,h=new TextProxy(c,d,u);return n.offset+=u,this._position=n,formatReturnValue("text",h,o,n,u)}return n.path.pop(),n.offset++,this._position=n,this._visitedParent=a.parent,this.ignoreElementEnd?this._next():formatReturnValue("elementEnd",a,o,n)}_previous(){const o=this.position,n=this.position.clone(),a=this._visitedParent;if(a.parent===null&&n.offset===0)return{done:!0,value:void 0};if(a==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const l=n.parent,c=getTextNodeAtPosition(n,l),u=c||getNodeBeforePosition(n,l,c);if(u&&u.is("model:element"))return n.offset--,this.shallow?(this._position=n,formatReturnValue("elementStart",u,o,n,1)):(n.path.push(u.maxOffset),this._position=n,this._visitedParent=u,this.ignoreElementEnd?this._previous():formatReturnValue("elementEnd",u,o,n));if(u&&u.is("model:$text")){let d;if(this.singleCharacters)d=1;else{let g=u.startOffset;this._boundaryStartParent==a&&this.boundaries.start.offset>g&&(g=this.boundaries.start.offset),d=n.offset-g}const h=n.offset-u.startOffset,f=new TextProxy(u,h-d,d);return n.offset-=d,this._position=n,formatReturnValue("text",f,o,n,d)}return n.path.pop(),this._position=n,this._visitedParent=a.parent,formatReturnValue("elementStart",a,o,n,1)}}function formatReturnValue(s,o,n,a,l){return{done:!1,value:{type:s,item:o,previousPosition:n,nextPosition:a,length:l}}}class Position extends TypeCheckable{constructor(n,a,l="toNone"){super();E(this,"root");E(this,"path");E(this,"stickiness");if(!n.is("element")&&!n.is("documentFragment"))throw new CKEditorError("model-position-root-invalid",n);if(!Array.isArray(a)||a.length===0)throw new CKEditorError("model-position-path-incorrect-format",n,{path:a});n.is("rootElement")?a=a.slice():(a=[...n.getPath(),...a],n=n.root),this.root=n,this.path=a,this.stickiness=l}get offset(){return this.path[this.path.length-1]}set offset(n){this.path[this.path.length-1]=n}get parent(){let n=this.root;for(let a=0;a<this.path.length-1;a++)if(n=n.getChildAtOffset(this.path[a]),!n)throw new CKEditorError("model-position-path-incorrect",this,{position:this});if(n.is("$text"))throw new CKEditorError("model-position-path-incorrect",this,{position:this});return n}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return getTextNodeAtPosition(this,this.parent)}get nodeAfter(){const n=this.parent;return getNodeAfterPosition(this,n,getTextNodeAtPosition(this,n))}get nodeBefore(){const n=this.parent;return getNodeBeforePosition(this,n,getTextNodeAtPosition(this,n))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let n=this.root;for(let a=0;a<this.path.length-1;a++)if(n=n.getChildAtOffset(this.path[a]),!n)return!1;return this.offset<=n.maxOffset}compareWith(n){if(this.root!=n.root)return"different";const a=compareArrays(this.path,n.path);switch(a){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[a]<n.path[a]?"before":"after"}}getLastMatchingPosition(n,a={}){a.startPosition=this;const l=new TreeWalker(a);return l.skip(n),l.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const n=this.parent;return n.is("documentFragment")?[n]:n.getAncestors({includeSelf:!0})}findAncestor(n){const a=this.parent;return a.is("element")?a.findAncestor(n,{includeSelf:!0}):null}getCommonPath(n){if(this.root!=n.root)return[];const a=compareArrays(this.path,n.path),l=typeof a=="string"?Math.min(this.path.length,n.path.length):a;return this.path.slice(0,l)}getCommonAncestor(n){const a=this.getAncestors(),l=n.getAncestors();let c=0;for(;a[c]==l[c]&&a[c];)c++;return c===0?null:a[c-1]}getShiftedBy(n){const a=this.clone(),l=a.offset+n;return a.offset=l<0?0:l,a}isAfter(n){return this.compareWith(n)=="after"}isBefore(n){return this.compareWith(n)=="before"}isEqual(n){return this.compareWith(n)=="same"}isTouching(n){if(this.root!==n.root)return!1;const a=Math.min(this.path.length,n.path.length);for(let l=0;l<a;l++){const c=this.path[l]-n.path[l];if(c<-1||c>1)return!1;if(c===1)return checkTouchingBranch(n,this,l);if(c===-1)return checkTouchingBranch(this,n,l)}return this.path.length===n.path.length?!0:this.path.length>n.path.length?checkOnlyZeroes(this.path,a):checkOnlyZeroes(n.path,a)}hasSameParentAs(n){if(this.root!==n.root)return!1;const a=this.getParentPath(),l=n.getParentPath();return compareArrays(a,l)=="same"}getTransformedByOperation(n){let a;switch(n.type){case"insert":a=this._getTransformedByInsertOperation(n);break;case"move":case"remove":case"reinsert":a=this._getTransformedByMoveOperation(n);break;case"split":a=this._getTransformedBySplitOperation(n);break;case"merge":a=this._getTransformedByMergeOperation(n);break;default:a=Position._createAt(this);break}return a}_getTransformedByInsertOperation(n){return this._getTransformedByInsertion(n.position,n.howMany)}_getTransformedByMoveOperation(n){return this._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany)}_getTransformedBySplitOperation(n){const a=n.movedRange;return a.containsPosition(this)||a.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(n.splitPosition,n.moveTargetPosition):n.graveyardPosition?this._getTransformedByMove(n.graveyardPosition,n.insertionPosition,1):this._getTransformedByInsertion(n.insertionPosition,1)}_getTransformedByMergeOperation(n){const a=n.movedRange,l=a.containsPosition(this)||a.start.isEqual(this);let c;return l?(c=this._getCombined(n.sourcePosition,n.targetPosition),n.sourcePosition.isBefore(n.targetPosition)&&(c=c._getTransformedByDeletion(n.deletionPosition,1))):this.isEqual(n.deletionPosition)?c=Position._createAt(n.deletionPosition):c=this._getTransformedByMove(n.deletionPosition,n.graveyardPosition,1),c}_getTransformedByDeletion(n,a){const l=Position._createAt(this);if(this.root!=n.root)return l;if(compareArrays(n.getParentPath(),this.getParentPath())=="same"){if(n.offset<this.offset){if(n.offset+a>this.offset)return null;l.offset-=a}}else if(compareArrays(n.getParentPath(),this.getParentPath())=="prefix"){const c=n.path.length-1;if(n.offset<=this.path[c]){if(n.offset+a>this.path[c])return null;l.path[c]-=a}}return l}_getTransformedByInsertion(n,a){const l=Position._createAt(this);if(this.root!=n.root)return l;if(compareArrays(n.getParentPath(),this.getParentPath())=="same")(n.offset<this.offset||n.offset==this.offset&&this.stickiness!="toPrevious")&&(l.offset+=a);else if(compareArrays(n.getParentPath(),this.getParentPath())=="prefix"){const c=n.path.length-1;n.offset<=this.path[c]&&(l.path[c]+=a)}return l}_getTransformedByMove(n,a,l){if(a=a._getTransformedByDeletion(n,l),n.isEqual(a))return Position._createAt(this);const c=this._getTransformedByDeletion(n,l);return c===null||n.isEqual(this)&&this.stickiness=="toNext"||n.getShiftedBy(l).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(n,a):c._getTransformedByInsertion(a,l)}_getCombined(n,a){const l=n.path.length-1,c=Position._createAt(a);return c.stickiness=this.stickiness,c.offset=c.offset+this.path[l]-n.offset,c.path=[...c.path,...this.path.slice(l+1)],c}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(n,a,l="toNone"){if(n.is("model:position"))return new Position(n.root,n.path,n.stickiness);{const c=n;if(a=="end")a=c.maxOffset;else{if(a=="before")return this._createBefore(c,l);if(a=="after")return this._createAfter(c,l);if(a!==0&&!a)throw new CKEditorError("model-createpositionat-offset-required",[this,n])}if(!c.is("element")&&!c.is("documentFragment"))throw new CKEditorError("model-position-parent-incorrect",[this,n]);const u=c.getPath();return u.push(a),new this(c.root,u,l)}}static _createAfter(n,a){if(!n.parent)throw new CKEditorError("model-position-after-root",[this,n],{root:n});return this._createAt(n.parent,n.endOffset,a)}static _createBefore(n,a){if(!n.parent)throw new CKEditorError("model-position-before-root",n,{root:n});return this._createAt(n.parent,n.startOffset,a)}static fromJSON(n,a){if(n.root==="$graveyard"){const l=new Position(a.graveyard,n.path);return l.stickiness=n.stickiness,l}if(!a.getRoot(n.root))throw new CKEditorError("model-position-fromjson-no-root",a,{rootName:n.root});return new Position(a.getRoot(n.root),n.path,n.stickiness)}}Position.prototype.is=function(s){return s==="position"||s==="model:position"};function getTextNodeAtPosition(s,o){const n=o.getChildAtOffset(s.offset);return n&&n.is("$text")&&n.startOffset<s.offset?n:null}function getNodeAfterPosition(s,o,n){return n!==null?null:o.getChildAtOffset(s.offset)}function getNodeBeforePosition(s,o,n){return n!==null?null:o.getChild(o.offsetToIndex(s.offset)-1)}function checkTouchingBranch(s,o,n){return!(n+1===s.path.length||!checkOnlyZeroes(o.path,n+1)||!checkOnlyMaxOffset(s,n+1))}function checkOnlyZeroes(s,o){for(;o<s.length;){if(s[o]!==0)return!1;o++}return!0}function checkOnlyMaxOffset(s,o){let n=s.parent,a=s.path.length-1,l=0;for(;a>=o;){if(s.path[a]+l!==n.maxOffset)return!1;l=1,a--,n=n.parent}return!0}class Range extends TypeCheckable{constructor(n,a){super();E(this,"start");E(this,"end");this.start=Position._createAt(n),this.end=a?Position._createAt(a):Position._createAt(n),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new TreeWalker({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const n=this.start.getParentPath(),a=this.end.getParentPath();return compareArrays(n,a)=="same"}get root(){return this.start.root}containsPosition(n){return n.isAfter(this.start)&&n.isBefore(this.end)}containsRange(n,a=!1){n.isCollapsed&&(a=!1);const l=this.containsPosition(n.start)||a&&this.start.isEqual(n.start),c=this.containsPosition(n.end)||a&&this.end.isEqual(n.end);return l&&c}containsItem(n){const a=Position._createBefore(n);return this.containsPosition(a)||this.start.isEqual(a)}isEqual(n){return this.start.isEqual(n.start)&&this.end.isEqual(n.end)}isIntersecting(n){return this.start.isBefore(n.end)&&this.end.isAfter(n.start)}getDifference(n){const a=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&a.push(new Range(this.start,n.start)),this.containsPosition(n.end)&&a.push(new Range(n.end,this.end))):a.push(new Range(this.start,this.end)),a}getIntersection(n){if(this.isIntersecting(n)){let a=this.start,l=this.end;return this.containsPosition(n.start)&&(a=n.start),this.containsPosition(n.end)&&(l=n.end),new Range(a,l)}return null}getJoined(n,a=!1){let l=this.isIntersecting(n);if(l||(this.start.isBefore(n.start)?l=a?this.end.isTouching(n.start):this.end.isEqual(n.start):l=a?n.end.isTouching(this.start):n.end.isEqual(this.start)),!l)return null;let c=this.start,u=this.end;return n.start.isBefore(c)&&(c=n.start),n.end.isAfter(u)&&(u=n.end),new Range(c,u)}getMinimalFlatRanges(){const n=[],a=this.start.getCommonPath(this.end).length,l=Position._createAt(this.start);let c=l.parent;for(;l.path.length>a+1;){const u=c.maxOffset-l.offset;u!==0&&n.push(new Range(l,l.getShiftedBy(u))),l.path=l.path.slice(0,-1),l.offset++,c=c.parent}for(;l.path.length<=this.end.path.length;){const u=this.end.path[l.path.length-1],d=u-l.offset;d!==0&&n.push(new Range(l,l.getShiftedBy(d))),l.offset=u,l.path.push(0)}return n}getWalker(n={}){return n.boundaries=this,new TreeWalker(n)}*getItems(n={}){n.boundaries=this,n.ignoreElementEnd=!0;const a=new TreeWalker(n);for(const l of a)yield l.item}*getPositions(n={}){n.boundaries=this;const a=new TreeWalker(n);yield a.position;for(const l of a)yield l.nextPosition}getTransformedByOperation(n){switch(n.type){case"insert":return this._getTransformedByInsertOperation(n);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(n);case"split":return[this._getTransformedBySplitOperation(n)];case"merge":return[this._getTransformedByMergeOperation(n)]}return[new Range(this.start,this.end)]}getTransformedByOperations(n){const a=[new Range(this.start,this.end)];for(const l of n)for(let c=0;c<a.length;c++){const u=a[c].getTransformedByOperation(l);a.splice(c,1,...u),c+=u.length-1}for(let l=0;l<a.length;l++){const c=a[l];for(let u=l+1;u<a.length;u++){const d=a[u];(c.containsRange(d)||d.containsRange(c)||c.isEqual(d))&&a.splice(u,1)}}return a}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const n=this.start.nodeAfter,a=this.end.nodeBefore;return n&&n.is("element")&&n===a?n:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(n,a=!1){return this._getTransformedByInsertion(n.position,n.howMany,a)}_getTransformedByMoveOperation(n,a=!1){const l=n.sourcePosition,c=n.howMany,u=n.targetPosition;return this._getTransformedByMove(l,u,c,a)}_getTransformedBySplitOperation(n){const a=this.start._getTransformedBySplitOperation(n);let l=this.end._getTransformedBySplitOperation(n);return this.end.isEqual(n.insertionPosition)&&(l=this.end.getShiftedBy(1)),a.root!=l.root&&(l=this.end.getShiftedBy(-1)),new Range(a,l)}_getTransformedByMergeOperation(n){if(this.start.isEqual(n.targetPosition)&&this.end.isEqual(n.deletionPosition))return new Range(this.start);let a=this.start._getTransformedByMergeOperation(n),l=this.end._getTransformedByMergeOperation(n);return a.root!=l.root&&(l=this.end.getShiftedBy(-1)),a.isAfter(l)?(n.sourcePosition.isBefore(n.targetPosition)?(a=Position._createAt(l),a.offset=0):(n.deletionPosition.isEqual(a)||(l=n.deletionPosition),a=n.targetPosition),new Range(a,l)):new Range(a,l)}_getTransformedByInsertion(n,a,l=!1){if(l&&this.containsPosition(n))return[new Range(this.start,n),new Range(n.getShiftedBy(a),this.end._getTransformedByInsertion(n,a))];{const c=new Range(this.start,this.end);return c.start=c.start._getTransformedByInsertion(n,a),c.end=c.end._getTransformedByInsertion(n,a),[c]}}_getTransformedByMove(n,a,l,c=!1){if(this.isCollapsed){const v=this.start._getTransformedByMove(n,a,l);return[new Range(v)]}const u=Range._createFromPositionAndShift(n,l),d=a._getTransformedByDeletion(n,l);if(this.containsPosition(a)&&!c&&(u.containsPosition(this.start)||u.containsPosition(this.end))){const v=this.start._getTransformedByMove(n,a,l),b=this.end._getTransformedByMove(n,a,l);return[new Range(v,b)]}let h;const f=this.getDifference(u);let g=null;const p=this.getIntersection(u);if(f.length==1?g=new Range(f[0].start._getTransformedByDeletion(n,l),f[0].end._getTransformedByDeletion(n,l)):f.length==2&&(g=new Range(this.start,this.end._getTransformedByDeletion(n,l))),g?h=g._getTransformedByInsertion(d,l,p!==null||c):h=[],p){const v=new Range(p.start._getCombined(u.start,d),p.end._getCombined(u.start,d));h.length==2?h.splice(1,0,v):h.push(v)}return h}_getTransformedByDeletion(n,a){let l=this.start._getTransformedByDeletion(n,a),c=this.end._getTransformedByDeletion(n,a);return l==null&&c==null?null:(l==null&&(l=n),c==null&&(c=n),new Range(l,c))}static _createFromPositionAndShift(n,a){const l=n,c=n.getShiftedBy(a);return a>0?new this(l,c):new this(c,l)}static _createIn(n){return new this(Position._createAt(n,0),Position._createAt(n,n.maxOffset))}static _createOn(n){return this._createFromPositionAndShift(Position._createBefore(n),n.offsetSize)}static _createFromRanges(n){if(n.length===0)throw new CKEditorError("range-create-from-ranges-empty-array",null);if(n.length==1)return n[0].clone();const a=n[0];n.sort((u,d)=>u.start.isAfter(d.start)?1:-1);const l=n.indexOf(a),c=new this(a.start,a.end);for(let u=l-1;u>=0&&n[u].end.isEqual(c.start);u--)c.start=Position._createAt(n[u].start);for(let u=l+1;u<n.length&&n[u].start.isEqual(c.end);u++)c.end=Position._createAt(n[u].end);return c}static fromJSON(n,a){return new this(Position.fromJSON(n.start,a),Position.fromJSON(n.end,a))}}Range.prototype.is=function(s){return s==="range"||s==="model:range"};class Mapper extends EmitterMixin(){constructor(){super();E(this,"_modelToViewMapping",new WeakMap);E(this,"_viewToModelMapping",new WeakMap);E(this,"_viewToModelLengthCallbacks",new Map);E(this,"_markerNameToElements",new Map);E(this,"_elementToMarkerNames",new Map);E(this,"_deferredBindingRemovals",new Map);E(this,"_unboundMarkerNames",new Set);E(this,"_cache",new MapperCache);this.on("modelToViewPosition",(n,a)=>{if(a.viewPosition)return;const l=this._modelToViewMapping.get(a.modelPosition.parent);if(!l)throw new CKEditorError("mapping-model-position-view-parent-not-found",this,{modelPosition:a.modelPosition});a.viewPosition=this.findPositionIn(l,a.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(n,a)=>{if(a.modelPosition)return;const l=this.findMappedViewAncestor(a.viewPosition),c=this._viewToModelMapping.get(l),u=this._toModelOffset(a.viewPosition.parent,a.viewPosition.offset,l);a.modelPosition=Position._createAt(c,u)},{priority:"low"})}bindElements(n,a){this._modelToViewMapping.set(n,a),this._viewToModelMapping.set(a,n)}unbindViewElement(n,a={}){const l=this.toModelElement(n);if(this._elementToMarkerNames.has(n))for(const c of this._elementToMarkerNames.get(n))this._unboundMarkerNames.add(c);a.defer?this._deferredBindingRemovals.set(n,n.root):(this._viewToModelMapping.delete(n)&&this._cache.stopTracking(n),this._modelToViewMapping.get(l)==n&&this._modelToViewMapping.delete(l))}unbindModelElement(n){const a=this.toViewElement(n);this._modelToViewMapping.delete(n),this._viewToModelMapping.get(a)==n&&this._viewToModelMapping.delete(a)&&this._cache.stopTracking(a)}bindElementToMarker(n,a){const l=this._markerNameToElements.get(a)||new Set;l.add(n);const c=this._elementToMarkerNames.get(n)||new Set;c.add(a),this._markerNameToElements.set(a,l),this._elementToMarkerNames.set(n,c)}unbindElementFromMarkerName(n,a){const l=this._markerNameToElements.get(a);l&&(l.delete(n),l.size==0&&this._markerNameToElements.delete(a));const c=this._elementToMarkerNames.get(n);c&&(c.delete(a),c.size==0&&this._elementToMarkerNames.delete(n))}flushUnboundMarkerNames(){const n=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),n}flushDeferredBindings(){for(const[n,a]of this._deferredBindingRemovals)n.root==a&&this.unbindViewElement(n);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(n){return this._viewToModelMapping.get(n)}toViewElement(n){return this._modelToViewMapping.get(n)}toModelRange(n){return new Range(this.toModelPosition(n.start),this.toModelPosition(n.end))}toViewRange(n){return new Range$1(this.toViewPosition(n.start),this.toViewPosition(n.end))}toModelPosition(n){const a={viewPosition:n,mapper:this};return this.fire("viewToModelPosition",a),a.modelPosition}toViewPosition(n,a={}){const l={modelPosition:n,mapper:this,isPhantom:a.isPhantom};return this.fire("modelToViewPosition",l),l.viewPosition}markerNameToElements(n){const a=this._markerNameToElements.get(n);if(!a)return null;const l=new Set;for(const c of a)if(c.is("attributeElement"))for(const u of c.getElementsWithSameId())l.add(u);else l.add(c);return l}registerViewToModelLength(n,a){this._viewToModelLengthCallbacks.set(n,a)}findMappedViewAncestor(n){let a=n.parent;for(;!this._viewToModelMapping.has(a);)a=a.parent;return a}_toModelOffset(n,a,l){if(l!=n){const u=this._toModelOffset(n.parent,n.index,l),d=this._toModelOffset(n,a,n);return u+d}if(n.is("$text"))return a;let c=0;for(let u=0;u<a;u++)c+=this.getModelLength(n.getChild(u));return c}getModelLength(n){const a=[n];let l=0;for(;a.length>0;){const c=a.pop(),u=c.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(c.name);if(u)l+=u(c);else if(this._viewToModelMapping.has(c))l+=1;else if(c.is("$text"))l+=c.data.length;else{if(c.is("uiElement"))continue;for(const d of c.getChildren())a.push(d)}}return l}findPositionIn(n,a){if(a===0)return this._moveViewPositionToTextNode(new Position$1(n,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(n)){const c=this._cache.getClosest(n,a);return this._findPositionStartingFrom(c.viewPosition,c.modelOffset,a,n,!0)}else return this._findPositionStartingFrom(new Position$1(n,0),0,a,n,!1)}_findPositionStartingFrom(n,a,l,c,u){let d=n.parent,h=n.offset;if(d.is("$text"))return new Position$1(d,l-a);let f,g=a,p=0;for(;g<l;){if(f=d.getChild(h),!f){if(d==c)throw new CKEditorError("mapping-model-offset-not-found",this,{modelOffset:l,viewContainer:c});h=d.parent.getChildIndex(d)+1,d=d.parent;continue}p=this.getModelLength(f),g+=p,h++,u&&this._cache.save(d,h,c,g)}return g==l?this._moveViewPositionToTextNode(new Position$1(d,h)):this._findPositionStartingFrom(new Position$1(f,0),g-p,l,c,u)}_moveViewPositionToTextNode(n){const a=n.nodeBefore,l=n.nodeAfter;return a&&a.is("view:$text")?new Position$1(a,a.data.length):l&&l.is("view:$text")?new Position$1(l,0):n}}class MapperCache extends EmitterMixin(){constructor(){super(...arguments);E(this,"_cachedMapping",new WeakMap);E(this,"_nodeToCacheListIndex",new WeakMap);E(this,"_invalidateOnChildrenChangeCallback",(n,a,l)=>{this._clearCacheInsideParent(a,l.index)});E(this,"_invalidateOnTextChangeCallback",(n,a)=>{this._clearCacheStartingBefore(a)})}save(n,a,l,c){const u=this._cachedMapping.get(l),d=u.cacheMap.get(c);if(d){const p=n.getChild(a-1),v=d.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(d.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(p,v);return}const f={viewPosition:new Position$1(n,a),modelOffset:c};u.maxModelOffset=c>u.maxModelOffset?c:u.maxModelOffset,u.cacheMap.set(c,f);let g=u.cacheList.length-1;for(;g>=0&&u.cacheList[g].modelOffset>c;)g--;if(u.cacheList.splice(g+1,0,f),a>0){const p=n.getChild(a-1);this._nodeToCacheListIndex.set(p,g+1)}}getClosest(n,a){const l=this._cachedMapping.get(n);let c;if(l)if(a>l.maxModelOffset)c=l.cacheList[l.cacheList.length-1];else{const d=l.cacheMap.get(a);d?c=d:c=this._findInCacheList(l.cacheList,a)}else c=this.startTracking(n);const u=this._hoistViewPosition(c.viewPosition);return{modelOffset:c.modelOffset,viewPosition:u}}_hoistViewPosition(n){for(;n.parent.parent&&!this._cachedMapping.has(n.parent)&&n.isAtEnd;){const a=n.parent.parent,l=a.getChildIndex(n.parent)+1;n=new Position$1(a,l)}return n}startTracking(n){const l={viewPosition:new Position$1(n,0),modelOffset:0},c={maxModelOffset:0,cacheList:[l],cacheMap:new Map([[0,l]])};return this._cachedMapping.set(n,c),n.on("change:children",this._invalidateOnChildrenChangeCallback),n.on("change:text",this._invalidateOnTextChangeCallback),l}stopTracking(n){n.off("change:children",this._invalidateOnChildrenChangeCallback),n.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(n)}_clearCacheInsideParent(n,a){if(a==0)this._cachedMapping.has(n)?this._clearCacheAll(n):this._clearCacheStartingBefore(n);else{const l=n.getChild(a-1);this._clearCacheStartingBefore(l)}}_clearCacheAll(n){const a=this._cachedMapping.get(n);a.maxModelOffset>0&&(a.maxModelOffset=0,a.cacheList.length=1,a.cacheMap.clear(),a.cacheMap.set(0,a.cacheList[0]))}_clearCacheStartingBefore(n){const a=this._nodeToCacheListIndex.get(n);if(a===void 0){const c=n.parent;this._cachedMapping.has(c)||this._clearCacheStartingBefore(c);return}let l=n.parent;for(;!this._cachedMapping.has(l);)l=l.parent;this._clearCacheFromIndex(l,a)}_clearCacheFromIndex(n,a){a===0&&(a=1);const l=this._cachedMapping.get(n),c=l.cacheList[a-1];if(!c)return;l.maxModelOffset=c.modelOffset;const u=l.cacheList.splice(a);for(const d of u){l.cacheMap.delete(d.modelOffset);const h=d.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(h)}}_findInCacheList(n,a){let l=0,c=n.length-1,u=c-l>>1,d=n[u];for(;l<c;)d.modelOffset<a?l=u+1:c=u-1,u=l+(c-l>>1),d=n[u];return d.modelOffset<=a?d:n[u-1]}}class ModelConsumable{constructor(){E(this,"_consumable",new Map);E(this,"_textProxyRegistry",new Map)}add(o,n){n=_normalizeConsumableType(n),o instanceof TextProxy&&(o=this._getSymbolForTextProxy(o)),this._consumable.has(o)||this._consumable.set(o,new Map),this._consumable.get(o).set(n,!0)}consume(o,n){return n=_normalizeConsumableType(n),o instanceof TextProxy&&(o=this._getSymbolForTextProxy(o)),this.test(o,n)?(this._consumable.get(o).set(n,!1),!0):!1}test(o,n){n=_normalizeConsumableType(n),o instanceof TextProxy&&(o=this._getSymbolForTextProxy(o));const a=this._consumable.get(o);if(a===void 0)return null;const l=a.get(n);return l===void 0?null:l}revert(o,n){n=_normalizeConsumableType(n),o instanceof TextProxy&&(o=this._getSymbolForTextProxy(o));const a=this.test(o,n);return a===!1?(this._consumable.get(o).set(n,!0),!0):a===!0?!1:null}verifyAllConsumed(o){const n=[];for(const[a,l]of this._consumable)for(const[c,u]of l){const d=c.split(":")[0];u&&o==d&&n.push({event:c,item:a.name||a.description})}if(n.length)throw new CKEditorError("conversion-model-consumable-not-consumed",null,{items:n})}_getSymbolForTextProxy(o){let n=null;const a=this._textProxyRegistry.get(o.startOffset);if(a){const l=a.get(o.endOffset);l&&(n=l.get(o.parent))}return n||(n=this._addSymbolForTextProxy(o)),n}_addSymbolForTextProxy(o){const n=o.startOffset,a=o.endOffset,l=o.parent,c=Symbol("$textProxy:"+o.data);let u,d;return u=this._textProxyRegistry.get(n),u||(u=new Map,this._textProxyRegistry.set(n,u)),d=u.get(a),d||(d=new Map,u.set(a,d)),d.set(l,c),c}}function _normalizeConsumableType(s){const o=s.split(":");return o[0]=="insert"?o[0]:o[0]=="addMarker"||o[0]=="removeMarker"?s:o.length>1?o[0]+":"+o[1]:o[0]}class DowncastDispatcher extends EmitterMixin(){constructor(n){super();E(this,"_conversionApi");E(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...n},this._firedEventsMap=new WeakMap}convertChanges(n,a,l){const c=this._createConversionApi(l,n.getRefreshedItems());for(const d of n.getMarkersToRemove())this._convertMarkerRemove(d.name,d.range,c);const u=this._reduceChanges(n.getChanges());for(const d of u)d.type==="insert"?this._convertInsert(Range._createFromPositionAndShift(d.position,d.length),c):d.type==="reinsert"?this._convertReinsert(Range._createFromPositionAndShift(d.position,d.length),c):d.type==="remove"?this._convertRemove(d.position,d.length,d.name,c):this._convertAttribute(d.range,d.attributeKey,d.attributeOldValue,d.attributeNewValue,c);c.mapper.flushDeferredBindings();for(const d of c.mapper.flushUnboundMarkerNames()){const h=a.get(d).getRange();this._convertMarkerRemove(d,h,c),this._convertMarkerAdd(d,h,c)}for(const d of n.getMarkersToAdd())this._convertMarkerAdd(d.name,d.range,c);c.consumable.verifyAllConsumed("insert")}convert(n,a,l,c={}){const u=this._createConversionApi(l,void 0,c);this._convertInsert(n,u);for(const[d,h]of a)this._convertMarkerAdd(d,h,u);u.consumable.verifyAllConsumed("insert")}convertSelection(n,a,l){const c=this._createConversionApi(l);this.fire("cleanSelection",{selection:n},c);const u=n.getFirstPosition().root;if(!c.mapper.toViewElement(u))return;const d=Array.from(a.getMarkersAtPosition(n.getFirstPosition()));if(this._addConsumablesForSelection(c.consumable,n,d),this.fire("selection",{selection:n},c),!!n.isCollapsed){for(const h of d)if(c.consumable.test(n,"addMarker:"+h.name)){const f=h.getRange();if(!shouldMarkerChangeBeConverted(n.getFirstPosition(),h,c.mapper))continue;const g={item:n,markerName:h.name,markerRange:f};this.fire(`addMarker:${h.name}`,g,c)}for(const h of n.getAttributeKeys())if(c.consumable.test(n,"attribute:"+h)){const f={item:n,range:n.getFirstRange(),attributeKey:h,attributeOldValue:null,attributeNewValue:n.getAttribute(h)};this.fire(`attribute:${h}:$text`,f,c)}}}_convertInsert(n,a,l={}){l.doNotAddConsumables||this._addConsumablesForInsert(a.consumable,n);for(const c of n.getWalker({shallow:!0}))this._testAndFire("insert",walkerValueToEventData(c),a)}_convertRemove(n,a,l,c){this.fire(`remove:${l}`,{position:n,length:a},c)}_convertAttribute(n,a,l,c,u){this._addConsumablesForRange(u.consumable,n,`attribute:${a}`);for(const d of n){const h={item:d.item,range:Range._createFromPositionAndShift(d.previousPosition,d.length),attributeKey:a,attributeOldValue:l,attributeNewValue:c};this._testAndFire(`attribute:${a}`,h,u)}}_convertReinsert(n,a){const l=Array.from(n.getWalker({shallow:!0}));this._addConsumablesForInsert(a.consumable,l);for(const c of l.map(walkerValueToEventData))this._testAndFire("insert",{...c,reconversion:!0},a)}_convertMarkerAdd(n,a,l){if(a.root.rootName=="$graveyard")return;const c=`addMarker:${n}`;if(l.consumable.add(a,c),this.fire(c,{markerName:n,markerRange:a},l),!!l.consumable.consume(a,c)){this._addConsumablesForRange(l.consumable,a,c);for(const u of a.getItems()){if(!l.consumable.test(u,c))continue;const d={item:u,range:Range._createOn(u),markerName:n,markerRange:a};this.fire(c,d,l)}}}_convertMarkerRemove(n,a,l){a.root.rootName!="$graveyard"&&this.fire(`removeMarker:${n}`,{markerName:n,markerRange:a},l)}_reduceChanges(n){const a={changes:n};return this.fire("reduceChanges",a),a.changes}_addConsumablesForInsert(n,a){for(const l of a){const c=l.item;if(n.test(c,"insert")===null){n.add(c,"insert");for(const u of c.getAttributeKeys())n.add(c,"attribute:"+u)}}return n}_addConsumablesForRange(n,a,l){for(const c of a.getItems())n.add(c,l);return n}_addConsumablesForSelection(n,a,l){n.add(a,"selection");for(const c of l)n.add(a,"addMarker:"+c.name);for(const c of a.getAttributeKeys())n.add(a,"attribute:"+c);return n}_testAndFire(n,a,l){const c=getEventName(n,a),u=a.item.is("$textProxy")?l.consumable._getSymbolForTextProxy(a.item):a.item,d=this._firedEventsMap.get(l),h=d.get(u);if(!h)d.set(u,new Set([c]));else if(!h.has(c))h.add(c);else return;this.fire(c,a,l)}_testAndFireAddAttributes(n,a){const l={item:n,range:Range._createOn(n)};for(const c of l.item.getAttributeKeys())l.attributeKey=c,l.attributeOldValue=null,l.attributeNewValue=l.item.getAttribute(c),this._testAndFire(`attribute:${c}`,l,a)}_createConversionApi(n,a=new Set,l={}){const c={...this._conversionApi,consumable:new ModelConsumable,writer:n,options:l,convertItem:u=>this._convertInsert(Range._createOn(u),c),convertChildren:u=>this._convertInsert(Range._createIn(u),c,{doNotAddConsumables:!0}),convertAttributes:u=>this._testAndFireAddAttributes(u,c),canReuseView:u=>!a.has(c.mapper.toModelElement(u))};return this._firedEventsMap.set(c,new Map),c}}function shouldMarkerChangeBeConverted(s,o,n){const a=o.getRange(),l=Array.from(s.getAncestors());return l.shift(),l.reverse(),!l.some(u=>{if(a.containsItem(u))return!!n.toViewElement(u).getCustomProperty("addHighlight")})}function getEventName(s,o){const n=o.item.is("element")?o.item.name:"$text";return`${s}:${n}`}function walkerValueToEventData(s){return{item:s.item,range:Range._createFromPositionAndShift(s.previousPosition,s.length)}}let Node$1$1=class extends TypeCheckable{constructor(n){super();E(this,"parent",null);E(this,"_attrs");E(this,"_index",null);E(this,"_startOffset",null);this._attrs=toMap(n)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const n=this.index;return n!==null&&this.parent.getChild(n+1)||null}get previousSibling(){const n=this.index;return n!==null&&this.parent.getChild(n-1)||null}get root(){let n=this;for(;n.parent;)n=n.parent;return n}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const n=[];let a=this;for(;a.parent;)n.unshift(a.startOffset),a=a.parent;return n}getAncestors(n={}){const a=[];let l=n.includeSelf?this:this.parent;for(;l;)a[n.parentFirst?"push":"unshift"](l),l=l.parent;return a}getCommonAncestor(n,a={}){const l=this.getAncestors(a),c=n.getAncestors(a);let u=0;for(;l[u]==c[u]&&l[u];)u++;return u===0?null:l[u-1]}isBefore(n){if(this==n||this.root!==n.root)return!1;const a=this.getPath(),l=n.getPath(),c=compareArrays(a,l);switch(c){case"prefix":return!0;case"extension":return!1;default:return a[c]<l[c]}}isAfter(n){return this==n||this.root!==n.root?!1:!this.isBefore(n)}hasAttribute(n){return this._attrs.has(n)}getAttribute(n){return this._attrs.get(n)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const n={};return this._attrs.size&&(n.attributes=Array.from(this._attrs).reduce((a,l)=>(a[l[0]]=l[1],a),{})),n}_clone(n){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(n,a){this._attrs.set(n,a)}_setAttributesTo(n){this._attrs=toMap(n)}_removeAttribute(n){return this._attrs.delete(n)}_clearAttributes(){this._attrs.clear()}};Node$1$1.prototype.is=function(s){return s==="node"||s==="model:node"};class Selection extends EmitterMixin(TypeCheckable){constructor(...n){super();E(this,"_lastRangeBackward",!1);E(this,"_attrs",new Map);E(this,"_ranges",[]);n.length&&this.setTo(...n)}get anchor(){if(this._ranges.length>0){const n=this._ranges[this._ranges.length-1];return this._lastRangeBackward?n.end:n.start}return null}get focus(){if(this._ranges.length>0){const n=this._ranges[this._ranges.length-1];return this._lastRangeBackward?n.start:n.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(n){if(this.rangeCount!=n.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(n.anchor)||!this.focus.isEqual(n.focus))return!1;for(const a of this._ranges){let l=!1;for(const c of n._ranges)if(a.isEqual(c)){l=!0;break}if(!l)return!1}return!0}*getRanges(){for(const n of this._ranges)yield new Range(n.start,n.end)}getFirstRange(){let n=null;for(const a of this._ranges)(!n||a.start.isBefore(n.start))&&(n=a);return n?new Range(n.start,n.end):null}getLastRange(){let n=null;for(const a of this._ranges)(!n||a.end.isAfter(n.end))&&(n=a);return n?new Range(n.start,n.end):null}getFirstPosition(){const n=this.getFirstRange();return n?n.start.clone():null}getLastPosition(){const n=this.getLastRange();return n?n.end.clone():null}setTo(...n){let[a,l,c]=n;if(typeof l=="object"&&(c=l,l=void 0),a===null)this._setRanges([]);else if(a instanceof Selection)this._setRanges(a.getRanges(),a.isBackward);else if(a&&typeof a.getRanges=="function")this._setRanges(a.getRanges(),a.isBackward);else if(a instanceof Range)this._setRanges([a],!!c&&!!c.backward);else if(a instanceof Position)this._setRanges([new Range(a)]);else if(a instanceof Node$1$1){const u=!!c&&!!c.backward;let d;if(l=="in")d=Range._createIn(a);else if(l=="on")d=Range._createOn(a);else if(l!==void 0)d=new Range(Position._createAt(a,l));else throw new CKEditorError("model-selection-setto-required-second-parameter",[this,a]);this._setRanges([d],u)}else if(isIterable(a))this._setRanges(a,c&&!!c.backward);else throw new CKEditorError("model-selection-setto-not-selectable",[this,a])}_setRanges(n,a=!1){const l=Array.from(n),c=l.some(u=>{if(!(u instanceof Range))throw new CKEditorError("model-selection-set-ranges-not-range",[this,n]);return this._ranges.every(d=>!d.isEqual(u))});l.length===this._ranges.length&&!c||(this._replaceAllRanges(l),this._lastRangeBackward=!!a,this.fire("change:range",{directChange:!0}))}setFocus(n,a){if(this.anchor===null)throw new CKEditorError("model-selection-setfocus-no-ranges",[this,n]);const l=Position._createAt(n,a);if(l.compareWith(this.focus)=="same")return;const c=this.anchor;this._ranges.length&&this._popRange(),l.compareWith(c)=="before"?(this._pushRange(new Range(l,c)),this._lastRangeBackward=!0):(this._pushRange(new Range(c,l)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(n){return this._attrs.get(n)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(n){return this._attrs.has(n)}removeAttribute(n){this.hasAttribute(n)&&(this._attrs.delete(n),this.fire("change:attribute",{attributeKeys:[n],directChange:!0}))}setAttribute(n,a){this.getAttribute(n)!==a&&(this._attrs.set(n,a),this.fire("change:attribute",{attributeKeys:[n],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const n=new WeakSet;for(const a of this.getRanges()){const l=getParentBlock$1(a.start,n);isStartBlockSelected(l,a)&&(yield l);const c=a.getWalker();for(const d of c){const h=d.item;d.type=="elementEnd"&&isUnvisitedTopBlock(h,n,a)?yield h:d.type=="elementStart"&&h.is("model:element")&&h.root.document.model.schema.isBlock(h)&&c.jumpTo(Position._createAt(h,"end"))}const u=getParentBlock$1(a.end,n);isEndBlockSelected(u,a)&&(yield u)}}containsEntireContent(n=this.anchor.root){const a=Position._createAt(n,0),l=Position._createAt(n,"end");return a.isTouching(this.getFirstPosition())&&l.isTouching(this.getLastPosition())}_pushRange(n){this._checkRange(n),this._ranges.push(new Range(n.start,n.end))}_checkRange(n){for(let a=0;a<this._ranges.length;a++)if(n.isIntersecting(this._ranges[a]))throw new CKEditorError("model-selection-range-intersects",[this,n],{addedRange:n,intersectingRange:this._ranges[a]})}_replaceAllRanges(n){this._removeAllRanges();for(const a of n)this._pushRange(a)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Selection.prototype.is=function(s){return s==="selection"||s==="model:selection"};function isUnvisitedBlock(s,o){return o.has(s)?!1:(o.add(s),s.root.document.model.schema.isBlock(s)&&!!s.parent)}function isUnvisitedTopBlock(s,o,n){return isUnvisitedBlock(s,o)&&isTopBlockInRange(s,n)}function getParentBlock$1(s,o){const a=s.parent.root.document.model.schema,l=s.parent.getAncestors({parentFirst:!0,includeSelf:!0});let c=!1;const u=l.find(d=>c?!1:(c=a.isLimit(d),!c&&isUnvisitedBlock(d,o)));return l.forEach(d=>o.add(d)),u}function isTopBlockInRange(s,o){const n=findAncestorBlock(s);return n?!o.containsRange(Range._createOn(n),!0):!0}function isStartBlockSelected(s,o){return s?o.isCollapsed||s.isEmpty?!0:o.start.isTouching(Position._createAt(s,s.maxOffset))?!1:isTopBlockInRange(s,o):!1}function isEndBlockSelected(s,o){return s?o.isCollapsed||s.isEmpty?!0:o.end.isTouching(Position._createAt(s,0))?!1:isTopBlockInRange(s,o):!1}function findAncestorBlock(s){const o=s.root.document.model.schema;let n=s.parent;for(;n;){if(o.isBlock(n))return n;n=n.parent}}class LiveRange extends EmitterMixin(Range){constructor(o,n){super(o,n),bindWithDocument$1.call(this)}detach(){this.stopListening()}toRange(){return new Range(this.start,this.end)}static fromRange(o){return new LiveRange(o.start,o.end)}}LiveRange.prototype.is=function(s){return s==="liveRange"||s==="model:liveRange"||s=="range"||s==="model:range"};function bindWithDocument$1(){this.listenTo(this.root.document.model,"applyOperation",(s,o)=>{const n=o[0];n.isDocumentOperation&&transform$2.call(this,n)},{priority:"low"})}function transform$2(s){const o=this.getTransformedByOperation(s),n=Range._createFromRanges(o),a=!n.isEqual(this),l=doesOperationChangeRangeContent(this,s);let c=null;if(a){n.root.rootName=="$graveyard"&&(s.type=="remove"?c=s.sourcePosition:c=s.deletionPosition);const u=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",u,{deletionPosition:c})}else l&&this.fire("change:content",this.toRange(),{deletionPosition:c})}function doesOperationChangeRangeContent(s,o){switch(o.type){case"insert":return s.containsPosition(o.position);case"move":case"remove":case"reinsert":case"merge":return s.containsPosition(o.sourcePosition)||s.start.isEqual(o.sourcePosition)||s.containsPosition(o.targetPosition);case"split":return s.containsPosition(o.splitPosition)||s.containsPosition(o.insertionPosition)}return!1}class Text extends Node$1$1{constructor(n,a){super(a);E(this,"_data");this._data=n||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const n=super.toJSON();return n.data=this.data,n}_clone(){return new Text(this.data,this.getAttributes())}static fromJSON(n){return new Text(n.data,n.attributes)}}Text.prototype.is=function(s){return s==="$text"||s==="model:$text"||s==="text"||s==="model:text"||s==="node"||s==="model:node"};const storePrefix="selection:";class DocumentSelection extends EmitterMixin(TypeCheckable){constructor(n){super();E(this,"_selection");this._selection=new LiveSelection(n),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(n){return this._selection.containsEntireContent(n)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(n){return this._selection.getAttribute(n)}hasAttribute(n){return this._selection.hasAttribute(n)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(n){this._selection.observeMarkers(n)}_setFocus(n,a){this._selection.setFocus(n,a)}_setTo(...n){this._selection.setTo(...n)}_setAttribute(n,a){this._selection.setAttribute(n,a)}_removeAttribute(n){this._selection.removeAttribute(n)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(n){this._selection.restoreGravity(n)}static _getStoreAttributeKey(n){return storePrefix+n}static _isStoreAttributeKey(n){return n.startsWith(storePrefix)}}DocumentSelection.prototype.is=function(s){return s==="selection"||s=="model:selection"||s=="documentSelection"||s=="model:documentSelection"};class LiveSelection extends Selection{constructor(n){super();E(this,"markers",new Collection({idProperty:"name"}));E(this,"_model");E(this,"_document");E(this,"_attributePriority",new Map);E(this,"_selectionRestorePosition",null);E(this,"_hasChangedRange",!1);E(this,"_overriddenGravityRegister",new Set);E(this,"_observedMarkers",new Set);this._model=n.model,this._document=n,this.listenTo(this._model,"applyOperation",(a,l)=>{const c=l[0];!c.isDocumentOperation||c.type=="marker"||c.type=="rename"||c.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(a,l,c,u)=>{this._updateMarker(l,u)}),this.listenTo(this._document,"change",(a,l)=>{clearAttributesStoredInElement(this._model,l)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let n=0;n<this._ranges.length;n++)this._ranges[n].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...n){super.setTo(...n),this._updateAttributes(!0),this.updateMarkers()}setFocus(n,a){super.setFocus(n,a),this._updateAttributes(!0),this.updateMarkers()}setAttribute(n,a){if(this._setAttribute(n,a)){const l=[n];this.fire("change:attribute",{attributeKeys:l,directChange:!0})}}removeAttribute(n){if(this._removeAttribute(n)){const a=[n];this.fire("change:attribute",{attributeKeys:a,directChange:!0})}}overrideGravity(){const n=uid();return this._overriddenGravityRegister.add(n),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),n}restoreGravity(n){if(!this._overriddenGravityRegister.has(n))throw new CKEditorError("document-selection-gravity-wrong-restore",this,{uid:n});this._overriddenGravityRegister.delete(n),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(n){this._observedMarkers.add(n),this.updateMarkers()}_replaceAllRanges(n){this._validateSelectionRanges(n),super._replaceAllRanges(n)}_popRange(){this._ranges.pop().detach()}_pushRange(n){const a=this._prepareRange(n);a&&this._ranges.push(a)}_validateSelectionRanges(n){for(const a of n)if(!this._document._validateSelectionRange(a))throw new CKEditorError("document-selection-wrong-position",this,{range:a})}_prepareRange(n){if(this._checkRange(n),n.root==this._document.graveyard)return;const a=LiveRange.fromRange(n);return a.on("change:range",(l,c,u)=>{if(this._hasChangedRange=!0,a.root==this._document.graveyard){this._selectionRestorePosition=u.deletionPosition;const d=this._ranges.indexOf(a);this._ranges.splice(d,1),a.detach()}}),a}updateMarkers(){if(!this._observedMarkers.size)return;const n=[];let a=!1;for(const c of this._model.markers){const u=c.name.split(":",1)[0];if(!this._observedMarkers.has(u))continue;const d=c.getRange();for(const h of this.getRanges())d.containsRange(h,!h.isCollapsed)&&n.push(c)}const l=Array.from(this.markers);for(const c of n)this.markers.has(c)||(this.markers.add(c),a=!0);for(const c of Array.from(this.markers))n.includes(c)||(this.markers.remove(c),a=!0);a&&this.fire("change:marker",{oldMarkers:l,directChange:!1})}_updateMarker(n,a){const l=n.name.split(":",1)[0];if(!this._observedMarkers.has(l))return;let c=!1;const u=Array.from(this.markers),d=this.markers.has(n);if(!a)d&&(this.markers.remove(n),c=!0);else{let h=!1;for(const f of this.getRanges())if(a.containsRange(f,!f.isCollapsed)){h=!0;break}h&&!d?(this.markers.add(n),c=!0):!h&&d&&(this.markers.remove(n),c=!0)}c&&this.fire("change:marker",{oldMarkers:u,directChange:!1})}_updateAttributes(n){const a=toMap(this._getSurroundingAttributes()),l=toMap(this.getAttributes());if(n)this._attributePriority=new Map,this._attrs=new Map;else for(const[u,d]of this._attributePriority)d=="low"&&(this._attrs.delete(u),this._attributePriority.delete(u));this._setAttributesTo(a);const c=[];for(const[u,d]of this.getAttributes())(!l.has(u)||l.get(u)!==d)&&c.push(u);for(const[u]of l)this.hasAttribute(u)||c.push(u);c.length>0&&this.fire("change:attribute",{attributeKeys:c,directChange:!1})}_setAttribute(n,a,l=!0){const c=l?"normal":"low";return c=="low"&&this._attributePriority.get(n)=="normal"||super.getAttribute(n)===a?!1:(this._attrs.set(n,a),this._attributePriority.set(n,c),!0)}_removeAttribute(n,a=!0){const l=a?"normal":"low";return l=="low"&&this._attributePriority.get(n)=="normal"||(this._attributePriority.set(n,l),!super.hasAttribute(n))?!1:(this._attrs.delete(n),!0)}_setAttributesTo(n){const a=new Set;for(const[l,c]of this.getAttributes())n.get(l)!==c&&this._removeAttribute(l,!1);for(const[l,c]of n)this._setAttribute(l,c,!1)&&a.add(l);return a}*getStoredAttributes(){const n=this.getFirstPosition().parent;if(this.isCollapsed&&n.isEmpty)for(const a of n.getAttributeKeys())a.startsWith(storePrefix)&&(yield[a.substr(storePrefix.length),n.getAttribute(a)])}_getSurroundingAttributes(){const n=this.getFirstPosition(),a=this._model.schema;if(n.root.rootName=="$graveyard")return null;let l=null;if(this.isCollapsed){const c=n.textNode?n.textNode:n.nodeBefore,u=n.textNode?n.textNode:n.nodeAfter;if(this.isGravityOverridden||(l=getTextAttributes(c,a)),l||(l=getTextAttributes(u,a)),!this.isGravityOverridden&&!l){let d=c;for(;d&&!l;)d=d.previousSibling,l=getTextAttributes(d,a)}if(!l){let d=u;for(;d&&!l;)d=d.nextSibling,l=getTextAttributes(d,a)}l||(l=this.getStoredAttributes())}else{const c=this.getFirstRange();for(const u of c){if(u.item.is("element")&&a.isObject(u.item)){l=getTextAttributes(u.item,a);break}if(u.type=="text"){l=u.item.getAttributes();break}}}return l}_fixGraveyardSelection(n){const a=this._model.schema.getNearestSelectionRange(n);a&&this._pushRange(a)}}function getTextAttributes(s,o){if(!s)return null;if(s instanceof TextProxy||s instanceof Text)return s.getAttributes();if(!o.isInline(s))return null;if(!o.isObject(s))return[];const n=[];for(const[a,l]of s.getAttributes())o.checkAttribute("$text",a)&&o.getAttributeProperties(a).copyFromObject!==!1&&n.push([a,l]);return n}function clearAttributesStoredInElement(s,o){const n=s.document.differ;for(const a of n.getChanges()){if(a.type!="insert")continue;const l=a.position.parent;a.length===l.maxOffset&&s.enqueueChange(o,u=>{const d=Array.from(l.getAttributeKeys()).filter(h=>h.startsWith(storePrefix));for(const h of d)u.removeAttribute(h,l)})}}class NodeList{constructor(o){E(this,"_nodes",[]);E(this,"_offsetToNode",[]);o&&this._insertNodes(0,o)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(o){return this._nodes[o]||null}getNodeAtOffset(o){return this._offsetToNode[o]||null}getNodeIndex(o){return o.index}getNodeStartOffset(o){return o.startOffset}indexToOffset(o){if(o==this._nodes.length)return this.maxOffset;const n=this._nodes[o];if(!n)throw new CKEditorError("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(n)}offsetToIndex(o){if(o==this._offsetToNode.length)return this._nodes.length;const n=this._offsetToNode[o];if(!n)throw new CKEditorError("model-nodelist-offset-out-of-bounds",this,{offset:o,nodeList:this});return this.getNodeIndex(n)}_insertNodes(o,n){const a=[];for(const c of n){if(!(c instanceof Node$1$1))throw new CKEditorError("model-nodelist-insertnodes-not-node",this);a.push(c)}let l=this.indexToOffset(o);spliceArray(this._nodes,a,o),spliceArray(this._offsetToNode,makeOffsetsArray(a),l);for(let c=o;c<this._nodes.length;c++)this._nodes[c]._index=c,this._nodes[c]._startOffset=l,l+=this._nodes[c].offsetSize}_removeNodes(o,n=1){if(n==0)return[];let a=this.indexToOffset(o);const l=this._nodes.splice(o,n),c=l[l.length-1],u=c.startOffset+c.offsetSize-a;this._offsetToNode.splice(a,u);for(const d of l)d._index=null,d._startOffset=null;for(let d=o;d<this._nodes.length;d++)this._nodes[d]._index=d,this._nodes[d]._startOffset=a,a+=this._nodes[d].offsetSize;return l}_removeNodesArray(o){if(o.length==0)return;for(const a of o)a._index=null,a._startOffset=null;this._nodes=this._nodes.filter(a=>a.index!==null),this._offsetToNode=this._offsetToNode.filter(a=>a.index!==null);let n=0;for(let a=0;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=n,n+=this._nodes[a].offsetSize}toJSON(){return this._nodes.map(o=>o.toJSON())}}function makeOffsetsArray(s){const o=[];let n=0;for(const a of s)for(let l=0;l<a.offsetSize;l++)o[n++]=a;return o}let Element$2=class Ht extends Node$1$1{constructor(n,a,l){super(a);E(this,"name");E(this,"_children",new NodeList);this.name=n,l&&this._insertChild(0,l)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(n){return this._children.getNode(n)}getChildAtOffset(n){return this._children.getNodeAtOffset(n)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(n){return this._children.getNodeIndex(n)}getChildStartOffset(n){return this._children.getNodeStartOffset(n)}offsetToIndex(n){return this._children.offsetToIndex(n)}getNodeByPath(n){let a=this;for(const l of n)a=a.getChildAtOffset(l);return a}findAncestor(n,a={}){let l=a.includeSelf?this:this.parent;for(;l;){if(l.name===n)return l;l=l.parent}return null}toJSON(){const n=super.toJSON();if(n.name=this.name,this._children.length>0){n.children=[];for(const a of this._children)n.children.push(a.toJSON())}return n}_clone(n=!1){const a=n?cloneNodes(this._children):void 0;return new Ht(this.name,this.getAttributes(),a)}_appendChild(n){this._insertChild(this.childCount,n)}_insertChild(n,a){const l=normalize$1$1(a);for(const c of l)c.parent!==null&&c._remove(),c.parent=this;this._children._insertNodes(n,l)}_removeChildren(n,a=1){const l=this._children._removeNodes(n,a);for(const c of l)c.parent=null;return l}_removeChildrenArray(n){this._children._removeNodesArray(n);for(const a of n)a.parent=null}static fromJSON(n){let a;if(n.children){a=[];for(const l of n.children)l.name?a.push(Ht.fromJSON(l)):a.push(Text.fromJSON(l))}return new Ht(n.name,n.attributes,a)}};Element$2.prototype.is=function(s,o){return o?o===this.name&&(s==="element"||s==="model:element"):s==="element"||s==="model:element"||s==="node"||s==="model:node"};function normalize$1$1(s){if(typeof s=="string")return[new Text(s)];isIterable(s)||(s=[s]);const o=[];for(const n of s)typeof n=="string"?o.push(new Text(n)):n instanceof TextProxy?o.push(new Text(n.data,n.getAttributes())):o.push(n);return o}function cloneNodes(s){const o=[];for(const n of s)o.push(n._clone(!0));return o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ConversionHelpers{constructor(o){E(this,"_dispatchers");this._dispatchers=o}add(o){for(const n of this._dispatchers)o(n);return this}}class DowncastHelpers extends ConversionHelpers{elementToElement(o){return this.add(downcastElementToElement(o))}elementToStructure(o){return this.add(downcastElementToStructure(o))}attributeToElement(o){return this.add(downcastAttributeToElement(o))}attributeToAttribute(o){return this.add(downcastAttributeToAttribute(o))}markerToElement(o){return this.add(downcastMarkerToElement(o))}markerToHighlight(o){return this.add(downcastMarkerToHighlight(o))}markerToData(o){return this.add(downcastMarkerToData(o))}}function insertText(){return(s,o,n)=>{if(!n.consumable.consume(o.item,s.name))return;const a=n.writer,l=n.mapper.toViewPosition(o.range.start),c=a.createText(o.item.data);a.insert(l,c)}}function insertAttributesAndChildren(){return(s,o,n)=>{n.convertAttributes(o.item),!o.reconversion&&o.item.is("element")&&!o.item.isEmpty&&n.convertChildren(o.item)}}function remove$2(){return(s,o,n)=>{const a=n.mapper.toViewPosition(o.position),l=o.position.getShiftedBy(o.length),c=n.mapper.toViewPosition(l,{isPhantom:!0}),u=n.writer.createRange(a,c),d=n.writer.remove(u.getTrimmed());for(const h of n.writer.createRangeIn(d).getItems())n.mapper.unbindViewElement(h,{defer:!0})}}function createViewElementFromHighlightDescriptor(s,o){const n=s.createAttributeElement("span",o.attributes);return o.classes&&n._addClass(o.classes),typeof o.priority=="number"&&(n._priority=o.priority),n._id=o.id,n}function convertRangeSelection(){return(s,o,n)=>{const a=o.selection;if(a.isCollapsed||!n.consumable.consume(a,"selection"))return;const l=[];for(const c of a.getRanges())l.push(n.mapper.toViewRange(c));n.writer.setSelection(l,{backward:a.isBackward})}}function convertCollapsedSelection(){return(s,o,n)=>{const a=o.selection;if(!a.isCollapsed||!n.consumable.consume(a,"selection"))return;const l=n.writer,c=a.getFirstPosition(),u=n.mapper.toViewPosition(c),d=l.breakAttributes(u);l.setSelection(d)}}function cleanSelection(){return(s,o,n)=>{const a=n.writer,l=a.document.selection;for(const c of l.getRanges())c.isCollapsed&&c.end.parent.isAttached()&&n.writer.mergeAttributes(c.start);a.setSelection(null)}}function wrap(s){return(o,n,a)=>{if(!a.consumable.test(n.item,o.name))return;const l=s(n.attributeOldValue,a,n),c=s(n.attributeNewValue,a,n);if(!l&&!c)return;a.consumable.consume(n.item,o.name);const u=a.writer,d=u.document.selection;if(n.item instanceof Selection||n.item instanceof DocumentSelection)u.wrap(d.getFirstRange(),c);else{let h=a.mapper.toViewRange(n.range);n.attributeOldValue!==null&&l&&(h=u.unwrap(h,l)),n.attributeNewValue!==null&&c&&u.wrap(h,c)}}}function insertElement(s,o=defaultConsumer){return(n,a,l)=>{if(!o(a.item,l.consumable,{preflight:!0}))return;const c=s(a.item,l,a);if(!c)return;o(a.item,l.consumable);const u=l.mapper.toViewPosition(a.range.start);l.mapper.bindElements(a.item,c),l.writer.insert(u,c),l.convertAttributes(a.item),reinsertOrConvertNodes(c,a.item.getChildren(),l,{reconversion:a.reconversion})}}function insertStructure(s,o){return(n,a,l)=>{if(!o(a.item,l.consumable,{preflight:!0}))return;const c=new Map;l.writer._registerSlotFactory(createSlotFactory(a.item,c,l));const u=s(a.item,l,a);if(l.writer._clearSlotFactory(),!u)return;validateSlotsChildren(a.item,c,l),o(a.item,l.consumable);const d=l.mapper.toViewPosition(a.range.start);l.mapper.bindElements(a.item,u),l.writer.insert(d,u),l.convertAttributes(a.item),fillSlots(u,c,l,{reconversion:a.reconversion})}}function insertUIElement(s){return(o,n,a)=>{n.isOpening=!0;const l=s(n,a);n.isOpening=!1;const c=s(n,a);if(!l||!c)return;const u=n.markerRange;if(u.isCollapsed&&!a.consumable.consume(u,o.name))return;for(const f of u)if(!a.consumable.consume(f.item,o.name))return;const d=a.mapper,h=a.writer;h.insert(d.toViewPosition(u.start),l),a.mapper.bindElementToMarker(l,n.markerName),u.isCollapsed||(h.insert(d.toViewPosition(u.end),c),a.mapper.bindElementToMarker(c,n.markerName)),o.stop()}}function removeUIElement(){return(s,o,n)=>{const a=n.mapper.markerNameToElements(o.markerName);if(a){for(const l of a)n.mapper.unbindElementFromMarkerName(l,o.markerName),n.writer.clear(n.writer.createRangeOn(l),l);n.writer.clearClonedElementsGroup(o.markerName),s.stop()}}}function insertMarkerData(s){return(o,n,a)=>{const l=s(n.markerName,a);if(!l)return;const c=n.markerRange;a.consumable.consume(c,o.name)&&(handleMarkerBoundary(c,!1,a,n,l),handleMarkerBoundary(c,!0,a,n,l),o.stop())}}function handleMarkerBoundary(s,o,n,a,l){const c=o?s.start:s.end,u=c.nodeAfter&&c.nodeAfter.is("element")?c.nodeAfter:null,d=c.nodeBefore&&c.nodeBefore.is("element")?c.nodeBefore:null;if(u||d){let f,g;o&&u||!o&&!d?(f=u,g=!0):(f=d,g=!1);const p=n.mapper.toViewElement(f);if(p){insertMarkerAsAttribute(p,o,g,n,a,l);return}}const h=n.mapper.toViewPosition(c);insertMarkerAsElement(h,o,n,a,l)}function insertMarkerAsAttribute(s,o,n,a,l,c){const u=`data-${c.group}-${o?"start":"end"}-${n?"before":"after"}`,d=s.hasAttribute(u)?s.getAttribute(u).split(","):[];d.unshift(c.name),a.writer.setAttribute(u,d.join(","),s),a.mapper.bindElementToMarker(s,l.markerName)}function insertMarkerAsElement(s,o,n,a,l){const c=`${l.group}-${o?"start":"end"}`,u=l.name?{name:l.name}:null,d=n.writer.createUIElement(c,u);n.writer.insert(s,d),n.mapper.bindElementToMarker(d,a.markerName)}function removeMarkerData(s){return(o,n,a)=>{const l=s(n.markerName,a);if(!l)return;const c=a.mapper.markerNameToElements(n.markerName);if(!c)return;for(const d of c)a.mapper.unbindElementFromMarkerName(d,n.markerName),d.is("containerElement")?(u(`data-${l.group}-start-before`,d),u(`data-${l.group}-start-after`,d),u(`data-${l.group}-end-before`,d),u(`data-${l.group}-end-after`,d)):a.writer.clear(a.writer.createRangeOn(d),d);a.writer.clearClonedElementsGroup(n.markerName),o.stop();function u(d,h){if(h.hasAttribute(d)){const f=new Set(h.getAttribute(d).split(","));f.delete(l.name),f.size==0?a.writer.removeAttribute(d,h):a.writer.setAttribute(d,Array.from(f).join(","),h)}}}}function changeAttribute(s){return(o,n,a)=>{if(!a.consumable.test(n.item,o.name))return;const l=s(n.attributeOldValue,a,n),c=s(n.attributeNewValue,a,n);if(!l&&!c)return;a.consumable.consume(n.item,o.name);const u=a.mapper.toViewElement(n.item),d=a.writer;if(!u)throw new CKEditorError("conversion-attribute-to-attribute-on-text",a.dispatcher,n);if(n.attributeOldValue!==null&&l){let h=l.value;l.key=="style"&&(typeof l.value=="string"?h=new StylesMap(d.document.stylesProcessor).setTo(l.value).getStylesEntries().map(([f])=>f):h=Object.keys(l.value)),d.removeAttribute(l.key,h,u)}if(n.attributeNewValue!==null&&c){let h=c.value;c.key=="style"&&typeof c.value=="string"&&(h=Object.fromEntries(new StylesMap(d.document.stylesProcessor).setTo(c.value).getStylesEntries())),d.setAttribute(c.key,h,!1,u)}}}function highlightText(s){return(o,n,a)=>{if(!n.item||!(n.item instanceof Selection||n.item instanceof DocumentSelection)&&!n.item.is("$textProxy"))return;const l=prepareDescriptor(s,n,a);if(!l||!a.consumable.consume(n.item,o.name))return;const c=a.writer,u=createViewElementFromHighlightDescriptor(c,l),d=c.document.selection;if(n.item instanceof Selection||n.item instanceof DocumentSelection)c.wrap(d.getFirstRange(),u);else{const h=a.mapper.toViewRange(n.range),f=c.wrap(h,u);for(const g of f.getItems())if(g.is("attributeElement")&&g.isSimilar(u)){a.mapper.bindElementToMarker(g,n.markerName);break}}}}function highlightElement(s){return(o,n,a)=>{if(!n.item||!(n.item instanceof Element$2))return;const l=prepareDescriptor(s,n,a);if(!l||!a.consumable.test(n.item,o.name))return;const c=a.mapper.toViewElement(n.item);if(c&&c.getCustomProperty("addHighlight")){a.consumable.consume(n.item,o.name);for(const d of Range._createIn(n.item))a.consumable.consume(d.item,o.name);c.getCustomProperty("addHighlight")(c,l,a.writer),a.mapper.bindElementToMarker(c,n.markerName)}}}function removeHighlight$1(s){return(o,n,a)=>{if(n.markerRange.isCollapsed)return;const l=prepareDescriptor(s,n,a);if(!l)return;const c=createViewElementFromHighlightDescriptor(a.writer,l),u=a.mapper.markerNameToElements(n.markerName);if(u){for(const d of u)a.mapper.unbindElementFromMarkerName(d,n.markerName),d.is("attributeElement")?a.writer.unwrap(a.writer.createRangeOn(d),c):d.getCustomProperty("removeHighlight")(d,l.id,a.writer);a.writer.clearClonedElementsGroup(n.markerName),o.stop()}}}function downcastElementToElement(s){const o=normalizeModelElementConfig(s.model),n=normalizeToElementConfig(s.view,"container");return o.attributes.length&&(o.children=!0),a=>{a.on(`insert:${o.name}`,insertElement(n,createConsumer(o)),{priority:s.converterPriority||"normal"}),(o.children||o.attributes.length)&&a.on("reduceChanges",createChangeReducer(o),{priority:"low"})}}function downcastElementToStructure(s){const o=normalizeModelElementConfig(s.model),n=normalizeToElementConfig(s.view,"container");return o.children=!0,a=>{if(a._conversionApi.schema.checkChild(o.name,"$text"))throw new CKEditorError("conversion-element-to-structure-disallowed-text",a,{elementName:o.name});a.on(`insert:${o.name}`,insertStructure(n,createConsumer(o)),{priority:s.converterPriority||"normal"}),a.on("reduceChanges",createChangeReducer(o),{priority:"low"})}}function downcastAttributeToElement(s){s=cloneDeep(s);let o=s.model;typeof o=="string"&&(o={key:o});let n=`attribute:${o.key}`;if(o.name&&(n+=":"+o.name),o.values)for(const l of o.values)s.view[l]=normalizeToElementConfig(s.view[l],"attribute");else s.view=normalizeToElementConfig(s.view,"attribute");const a=getFromAttributeCreator(s);return l=>{l.on(n,wrap(a),{priority:s.converterPriority||"normal"})}}function downcastAttributeToAttribute(s){s=cloneDeep(s);let o=s.model;typeof o=="string"&&(o={key:o});let n=`attribute:${o.key}`;if(o.name&&(n+=":"+o.name),o.values)for(const l of o.values)s.view[l]=normalizeToAttributeConfig(s.view[l]);else s.view=normalizeToAttributeConfig(s.view);const a=getFromAttributeCreator(s);return l=>{l.on(n,changeAttribute(a),{priority:s.converterPriority||"normal"})}}function downcastMarkerToElement(s){const o=normalizeToElementConfig(s.view,"ui");return n=>{n.on(`addMarker:${s.model}`,insertUIElement(o),{priority:s.converterPriority||"normal"}),n.on(`removeMarker:${s.model}`,removeUIElement(),{priority:s.converterPriority||"normal"})}}function downcastMarkerToData(s){s=cloneDeep(s);const o=s.model;let n=s.view;return n||(n=a=>({group:o,name:a.substr(s.model.length+1)})),a=>{a.on(`addMarker:${o}`,insertMarkerData(n),{priority:s.converterPriority||"normal"}),a.on(`removeMarker:${o}`,removeMarkerData(n),{priority:s.converterPriority||"normal"})}}function downcastMarkerToHighlight(s){return o=>{o.on(`addMarker:${s.model}`,highlightText(s.view),{priority:s.converterPriority||"normal"}),o.on(`addMarker:${s.model}`,highlightElement(s.view),{priority:s.converterPriority||"normal"}),o.on(`removeMarker:${s.model}`,removeHighlight$1(s.view),{priority:s.converterPriority||"normal"})}}function normalizeModelElementConfig(s){return typeof s=="string"&&(s={name:s}),{name:s.name,attributes:s.attributes?toArray$2(s.attributes):[],children:!!s.children}}function normalizeToElementConfig(s,o){return typeof s=="function"?s:(n,a)=>createViewElementFromDefinition(s,a,o)}function createViewElementFromDefinition(s,o,n){typeof s=="string"&&(s={name:s});let a;const l=o.writer,c=Object.assign({},s.attributes);if(n=="container")a=l.createContainerElement(s.name,c);else if(n=="attribute"){const u={priority:s.priority||AttributeElement.DEFAULT_PRIORITY};a=l.createAttributeElement(s.name,c,u)}else a=l.createUIElement(s.name,c);if(s.styles){const u=Object.keys(s.styles);for(const d of u)l.setStyle(d,s.styles[d],a)}if(s.classes){const u=s.classes;if(typeof u=="string")l.addClass(u,a);else for(const d of u)l.addClass(d,a)}return a}function getFromAttributeCreator(s){return s.model.values?(o,n,a)=>{const l=s.view[o];return l?l(o,n,a):null}:s.view}function normalizeToAttributeConfig(s){return typeof s=="string"?o=>({key:s,value:o}):typeof s=="object"?s.value?()=>s:o=>({key:s.key,value:o}):s}function prepareDescriptor(s,o,n){const a=typeof s=="function"?s(o,n):s;return a?(a.priority||(a.priority=10),a.id||(a.id=o.markerName),a):null}function createChangeReducerCallback(s){return(o,n)=>{if(!o.is("element",s.name))return!1;if(n.type=="attribute"){if(s.attributes.includes(n.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(s.children)return!0}return!1}}function createChangeReducer(s){const o=createChangeReducerCallback(s);return(n,a)=>{const l=[];a.reconvertedElements||(a.reconvertedElements=new Set);for(const c of a.changes){const u=c.type=="attribute"?c.range.start.nodeAfter:c.position.parent;if(!u||!o(u,c)){l.push(c);continue}if(!a.reconvertedElements.has(u)){a.reconvertedElements.add(u);const d=Position._createBefore(u);let h=l.length;for(let f=l.length-1;f>=0;f--){const g=l[f],v=(g.type=="attribute"?g.range.start:g.position).compareWith(d);if(v=="before"||g.type=="remove"&&v=="same")break;h=f}l.splice(h,0,{type:"remove",name:u.name,position:d,length:1},{type:"reinsert",name:u.name,position:d,length:1})}}a.changes=l}}function createConsumer(s){return(o,n,a={})=>{const l=["insert"];for(const c of s.attributes)o.hasAttribute(c)&&l.push(`attribute:${c}`);return l.every(c=>n.test(o,c))?(a.preflight||l.forEach(c=>n.consume(o,c)),!0):!1}}function createSlotFactory(s,o,n){return(a,l)=>{const c=a.createContainerElement("$slot");let u=null;if(l==="children")u=Array.from(s.getChildren());else if(typeof l=="function")u=Array.from(s.getChildren()).filter(d=>l(d));else throw new CKEditorError("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:l});return o.set(c,u),c}}function validateSlotsChildren(s,o,n){const a=Array.from(o.values()).flat(),l=new Set(a);if(l.size!=a.length)throw new CKEditorError("conversion-slot-filter-overlap",n.dispatcher,{element:s});if(l.size!=s.childCount)throw new CKEditorError("conversion-slot-filter-incomplete",n.dispatcher,{element:s})}function fillSlots(s,o,n,a){n.mapper.on("modelToViewPosition",u,{priority:"highest"});let l=null,c=null;for([l,c]of o)reinsertOrConvertNodes(s,c,n,a),n.writer.move(n.writer.createRangeIn(l),n.writer.createPositionBefore(l)),n.writer.remove(l);n.mapper.off("modelToViewPosition",u);function u(d,h){const f=h.modelPosition.nodeAfter,g=c.indexOf(f);g<0||(h.viewPosition=h.mapper.findPositionIn(l,g))}}function reinsertOrConvertNodes(s,o,n,a){for(const l of o)reinsertNode(s.root,l,n,a)||n.convertItem(l)}function reinsertNode(s,o,n,a){const{writer:l,mapper:c}=n;if(!a.reconversion)return!1;const u=c.toViewElement(o);return!u||u.root==s||!n.canReuseView(u)?!1:(l.move(l.createRangeOn(u),c.toViewPosition(Position._createBefore(o))),!0)}function defaultConsumer(s,o,{preflight:n}={}){return n?o.test(s,"insert"):o.consume(s,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function autoParagraphEmptyRoots(s){const{schema:o,document:n}=s.model;for(const a of n.getRoots())if(a.isEmpty&&!o.checkChild(a,"$text")&&o.checkChild(a,"paragraph"))return s.insertElement("paragraph",a),!0;return!1}function isParagraphable(s,o,n){const a=n.createContext(s);return!(!n.checkChild(a,"paragraph")||!n.checkChild(a.push("paragraph"),o))}function wrapInParagraph(s,o){const n=o.createElement("paragraph");return o.insert(n,s),o.createPositionAt(n,0)}class UpcastHelpers extends ConversionHelpers{elementToElement(o){return this.add(upcastElementToElement(o))}elementToAttribute(o){return this.add(upcastElementToAttribute(o))}attributeToAttribute(o){return this.add(upcastAttributeToAttribute(o))}elementToMarker(o){return this.add(upcastElementToMarker(o))}dataToMarker(o){return this.add(upcastDataToMarker(o))}}function convertToModelFragment$1(){return(s,o,n)=>{if(!o.modelRange&&n.consumable.consume(o.viewItem,{name:!0})){const{modelRange:a,modelCursor:l}=n.convertChildren(o.viewItem,o.modelCursor);o.modelRange=a,o.modelCursor=l}}}function convertText(){return(s,o,{schema:n,consumable:a,writer:l})=>{let c=o.modelCursor;if(!a.test(o.viewItem))return;if(!n.checkChild(c,"$text")){if(!isParagraphable(c,"$text",n)||o.viewItem.data.trim().length==0)return;c=wrapInParagraph(c,l)}a.consume(o.viewItem);const u=l.createText(o.viewItem.data);l.insert(u,c),o.modelRange=l.createRange(c,c.getShiftedBy(u.offsetSize)),o.modelCursor=o.modelRange.end}}function convertSelectionChange(s,o){return(n,a)=>{const l=a.newSelection,c=[];for(const d of l.getRanges())c.push(o.toModelRange(d));const u=s.createSelection(c,{backward:l.isBackward});u.isEqual(s.document.selection)||s.change(d=>{d.setSelection(u)})}}function upcastElementToElement(s){s=cloneDeep(s);const o=prepareToElementConverter(s),n=getViewElementNameFromConfig(s.view),a=n?`element:${n}`:"element";return l=>{l.on(a,o,{priority:s.converterPriority||"normal"})}}function upcastElementToAttribute(s){s=cloneDeep(s),normalizeModelAttributeConfig(s);const o=prepareToAttributeConverter(s,!1),n=getViewElementNameFromConfig(s.view),a=n?`element:${n}`:"element";return l=>{l.on(a,o,{priority:s.converterPriority||"low"})}}function upcastAttributeToAttribute(s){s=cloneDeep(s);let o=null;(typeof s.view=="string"||s.view.key)&&(o=normalizeViewAttributeKeyValueConfig(s)),normalizeModelAttributeConfig(s,o);const n=prepareToAttributeConverter(s,!0);return a=>{a.on("element",n,{priority:s.converterPriority||"low"})}}function upcastElementToMarker(s){const o=normalizeElementToMarkerModelConfig(s.model);return upcastElementToElement({...s,model:o})}function upcastDataToMarker(s){s=cloneDeep(s),s.model||(s.model=l=>l?s.view+":"+l:s.view);const o={view:s.view,model:s.model},n=prepareToElementConverter(normalizeDataToMarkerConfig(o,"start")),a=prepareToElementConverter(normalizeDataToMarkerConfig(o,"end"));return l=>{l.on(`element:${s.view}-start`,n,{priority:s.converterPriority||"normal"}),l.on(`element:${s.view}-end`,a,{priority:s.converterPriority||"normal"});const c=priorities.low,u=priorities.highest,d=priorities.get(s.converterPriority)/u;l.on("element",upcastAttributeToMarker(o),{priority:c+d})}}function upcastAttributeToMarker(s){return(o,n,a)=>{const l=`data-${s.view}`;if(!a.consumable.test(n.viewItem,{attributes:l+"-end-after"})&&!a.consumable.test(n.viewItem,{attributes:l+"-start-after"})&&!a.consumable.test(n.viewItem,{attributes:l+"-end-before"})&&!a.consumable.test(n.viewItem,{attributes:l+"-start-before"}))return;n.modelRange||Object.assign(n,a.convertChildren(n.viewItem,n.modelCursor)),a.consumable.consume(n.viewItem,{attributes:l+"-end-after"})&&c(n.modelRange.end,n.viewItem.getAttribute(l+"-end-after").split(",")),a.consumable.consume(n.viewItem,{attributes:l+"-start-after"})&&c(n.modelRange.end,n.viewItem.getAttribute(l+"-start-after").split(",")),a.consumable.consume(n.viewItem,{attributes:l+"-end-before"})&&c(n.modelRange.start,n.viewItem.getAttribute(l+"-end-before").split(",")),a.consumable.consume(n.viewItem,{attributes:l+"-start-before"})&&c(n.modelRange.start,n.viewItem.getAttribute(l+"-start-before").split(","));function c(u,d){for(const h of d){const f=s.model(h,a),g=a.writer.createElement("$marker",{"data-name":f});a.writer.insert(g,u),n.modelCursor.isEqual(u)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(u,1),n.modelRange=n.modelRange._getTransformedByInsertion(u,1)[0]}}}}function getViewElementNameFromConfig(s){return typeof s=="string"?s:typeof s=="object"&&typeof s.name=="string"?s.name:null}function prepareToElementConverter(s){const o=new Matcher(s.view);return(n,a,l)=>{const c=o.match(a.viewItem);if(!c)return;const u=c.match;if(u.name=!0,!l.consumable.test(a.viewItem,u))return;const d=getModelElement(s.model,a.viewItem,l);d&&l.safeInsert(d,a.modelCursor)&&(l.consumable.consume(a.viewItem,u),l.convertChildren(a.viewItem,d),l.updateConversionResult(d,a))}}function getModelElement(s,o,n){return s instanceof Function?s(o,n):n.writer.createElement(s)}function normalizeViewAttributeKeyValueConfig(s){typeof s.view=="string"&&(s.view={key:s.view});const o=s.view.key,n=typeof s.view.value>"u"?/[\s\S]*/:s.view.value;let a;return o=="class"||o=="style"?a={[o=="class"?"classes":"styles"]:n}:a={attributes:{[o]:n}},s.view.name&&(a.name=s.view.name),s.view=a,o}function normalizeModelAttributeConfig(s,o=null){const n=o===null?!0:c=>c.getAttribute(o),a=typeof s.model!="object"?s.model:s.model.key,l=typeof s.model!="object"||typeof s.model.value>"u"?n:s.model.value;s.model={key:a,value:l}}function prepareToAttributeConverter(s,o){const n=new Matcher(s.view);return(a,l,c)=>{if(!l.modelRange&&o)return;const u=n.match(l.viewItem);if(!u||(onlyViewNameIsDefined(s.view,l.viewItem)?u.match.name=!0:delete u.match.name,!c.consumable.test(l.viewItem,u.match)))return;const d=s.model.key,h=typeof s.model.value=="function"?s.model.value(l.viewItem,c):s.model.value;if(h===null)return;l.modelRange||Object.assign(l,c.convertChildren(l.viewItem,l.modelCursor)),setAttributeOn(l.modelRange,{key:d,value:h},o,c)&&(c.consumable.test(l.viewItem,{name:!0})&&(u.match.name=!0),c.consumable.consume(l.viewItem,u.match))}}function onlyViewNameIsDefined(s,o){const n=typeof s=="function"?s(o):s;return typeof n=="object"&&!getViewElementNameFromConfig(n)?!1:!n.classes&&!n.attributes&&!n.styles}function setAttributeOn(s,o,n,a){let l=!1;for(const c of Array.from(s.getItems({shallow:n})))a.schema.checkAttribute(c,o.key)&&(l=!0,!c.hasAttribute(o.key)&&a.writer.setAttribute(o.key,o.value,c));return l}function normalizeElementToMarkerModelConfig(s){return(o,n)=>{const a=typeof s=="string"?s:s(o,n);return n.writer.createElement("$marker",{"data-name":a})}}function normalizeDataToMarkerConfig(s,o){const n=(a,l)=>{const c=a.getAttribute("name"),u=s.model(c,l);return l.writer.createElement("$marker",{"data-name":u})};return{view:`${s.view}-${o}`,model:n}}function injectSelectionPostFixer(s){s.document.registerPostFixer(o=>selectionPostFixer(o,s))}function selectionPostFixer(s,o){const n=o.document.selection,a=o.schema,l=[];let c=!1;for(const u of n.getRanges()){const d=tryFixingRange(u,a);d&&!d.isEqual(u)?(l.push(d),c=!0):l.push(u)}return c&&s.setSelection(mergeIntersectingRanges(l),{backward:n.isBackward}),!1}function tryFixingRange(s,o){return s.isCollapsed?tryFixingCollapsedRange(s,o):tryFixingNonCollapsedRage(s,o)}function tryFixingCollapsedRange(s,o){const n=s.start,a=o.getNearestSelectionRange(n);if(!a){const c=n.getAncestors().reverse().find(u=>o.isObject(u));return c?Range._createOn(c):null}if(!a.isCollapsed)return a;const l=a.start;return n.isEqual(l)?null:new Range(l)}function tryFixingNonCollapsedRage(s,o){const{start:n,end:a}=s,l=o.checkChild(n,"$text"),c=o.checkChild(a,"$text"),u=o.getLimitElement(n),d=o.getLimitElement(a);if(u===d){if(l&&c)return null;if(checkSelectionOnNonLimitElements(n,a,o)){const p=n.nodeAfter&&o.isSelectable(n.nodeAfter)?null:o.getNearestSelectionRange(n,"forward"),b=a.nodeBefore&&o.isSelectable(a.nodeBefore)?null:o.getNearestSelectionRange(a,"backward"),_=p?p.start:n,w=b?b.end:a;return new Range(_,w)}}const h=u&&!u.is("rootElement"),f=d&&!d.is("rootElement");if(h||f){const g=n.nodeAfter&&a.nodeBefore&&n.nodeAfter.parent===a.nodeBefore.parent,p=h&&(!g||!isSelectable(n.nodeAfter,o)),v=f&&(!g||!isSelectable(a.nodeBefore,o));let b=n,_=a;return p&&(b=Position._createBefore(findOutermostLimitAncestor(u,o))),v&&(_=Position._createAfter(findOutermostLimitAncestor(d,o))),new Range(b,_)}return null}function findOutermostLimitAncestor(s,o){let n=s,a=n;for(;o.isLimit(a)&&a.parent;)n=a,a=a.parent;return n}function checkSelectionOnNonLimitElements(s,o,n){const a=s.nodeAfter&&!n.isLimit(s.nodeAfter)||n.checkChild(s,"$text"),l=o.nodeBefore&&!n.isLimit(o.nodeBefore)||n.checkChild(o,"$text");return a||l}function mergeIntersectingRanges(s){const o=[...s],n=new Set;let a=1;for(;a<o.length;){const c=o[a],u=o.slice(0,a);for(const[d,h]of u.entries())if(!n.has(d)){if(c.isEqual(h))n.add(d);else if(c.isIntersecting(h)){n.add(d),n.add(a);const f=c.getJoined(h);o.push(f)}}a++}return o.filter((c,u)=>!n.has(u))}function isSelectable(s,o){return s&&o.isSelectable(s)}class EditingController extends ObservableMixin(){constructor(n,a){super();E(this,"model");E(this,"view");E(this,"mapper");E(this,"downcastDispatcher");this.model=n,this.view=new View$2(a),this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:n.schema});const l=this.model.document,c=l.selection,u=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(l,"change",()=>{this.view.change(d=>{this.downcastDispatcher.convertChanges(l.differ,u,d),this.downcastDispatcher.convertSelection(c,u,d)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",convertSelectionChange(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",fixTargetRanges(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.downcastDispatcher.on("remove",remove$2(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",cleanSelection()),this.downcastDispatcher.on("selection",convertRangeSelection(),{priority:"low"}),this.downcastDispatcher.on("selection",convertCollapsedSelection(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(d=>{if(d.rootName=="$graveyard")return null;const h=new RootEditableElement(this.view.document,d.name);return h.rootName=d.rootName,this.mapper.bindElements(d,h),h})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(n){const a=typeof n=="string"?n:n.name,l=this.model.markers.get(a);if(!l)throw new CKEditorError("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:a});this.model.change(()=>{this.model.markers._refresh(l)})}reconvertItem(n){this.model.change(()=>{this.model.document.differ._refreshItem(n)})}}function fixTargetRanges(s,o,n){return(a,l)=>{if(!(n.document.isComposing&&!env$1.isAndroid))for(let c=0;c<l.targetRanges.length;c++){const u=l.targetRanges[c],d=s.toModelRange(u),h=tryFixingRange(d,o);!h||h.isEqual(d)||(l.targetRanges[c]=s.toViewRange(h))}}}class Schema extends ObservableMixin(){constructor(){super();E(this,"_sourceDefinitions",{});E(this,"_attributeProperties",Object.create(null));E(this,"_customChildChecks",new Map);E(this,"_customAttributeChecks",new Map);E(this,"_genericCheckSymbol",Symbol("$generic"));E(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(n,a)=>{a[0]=new SchemaContext(a[0])},{priority:"highest"}),this.on("checkChild",(n,a)=>{a[0]=new SchemaContext(a[0]),a[1]=this.getDefinition(a[1])},{priority:"highest"})}register(n,a){if(this._sourceDefinitions[n])throw new CKEditorError("schema-cannot-register-item-twice",this,{itemName:n});this._sourceDefinitions[n]=[Object.assign({},a)],this._clearCache()}extend(n,a){if(!this._sourceDefinitions[n])throw new CKEditorError("schema-cannot-extend-missing-item",this,{itemName:n});this._sourceDefinitions[n].push(Object.assign({},a)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(n){let a;return typeof n=="string"?a=n:"is"in n&&(n.is("$text")||n.is("$textProxy"))?a="$text":a=n.name,this.getDefinitions()[a]}isRegistered(n){return!!this.getDefinition(n)}isBlock(n){const a=this.getDefinition(n);return!!(a&&a.isBlock)}isLimit(n){const a=this.getDefinition(n);return a?!!(a.isLimit||a.isObject):!1}isObject(n){const a=this.getDefinition(n);return a?!!(a.isObject||a.isLimit&&a.isSelectable&&a.isContent):!1}isInline(n){const a=this.getDefinition(n);return!!(a&&a.isInline)}isSelectable(n){const a=this.getDefinition(n);return a?!!(a.isSelectable||a.isObject):!1}isContent(n){const a=this.getDefinition(n);return a?!!(a.isContent||a.isObject):!1}checkChild(n,a){return a?this._checkContextMatch(n,a):!1}checkAttribute(n,a){const l=this.getDefinition(n.last);if(!l)return!1;const c=this._evaluateAttributeChecks(n,a);return c!==void 0?c:l.allowAttributes.includes(a)}checkMerge(n,a){if(n instanceof Position){const l=n.nodeBefore,c=n.nodeAfter;if(!(l instanceof Element$2))throw new CKEditorError("schema-check-merge-no-element-before",this);if(!(c instanceof Element$2))throw new CKEditorError("schema-check-merge-no-element-after",this);return this.checkMerge(l,c)}if(this.isLimit(n)||this.isLimit(a))return!1;for(const l of a.getChildren())if(!this.checkChild(n,l))return!1;return!0}addChildCheck(n,a){const l=a!==void 0?a:this._genericCheckSymbol,c=this._customChildChecks.get(l)||[];c.push(n),this._customChildChecks.set(l,c)}addAttributeCheck(n,a){const l=a!==void 0?a:this._genericCheckSymbol,c=this._customAttributeChecks.get(l)||[];c.push(n),this._customAttributeChecks.set(l,c)}setAttributeProperties(n,a){this._attributeProperties[n]=Object.assign(this.getAttributeProperties(n),a)}getAttributeProperties(n){return this._attributeProperties[n]||Object.create(null)}getLimitElement(n){let a;for(n instanceof Position?a=n.parent:a=(n instanceof Range?[n]:Array.from(n.getRanges())).reduce((c,u)=>{const d=u.getCommonAncestor();return c?c.getCommonAncestor(d,{includeSelf:!0}):d},null);!this.isLimit(a)&&a.parent;)a=a.parent;return a}checkAttributeInSelection(n,a){if(n.isCollapsed){const c=[...n.getFirstPosition().getAncestors(),new Text("",n.getAttributes())];return this.checkAttribute(c,a)}else{const l=n.getRanges();for(const c of l)for(const u of c)if(this.checkAttribute(u.item,a))return!0}return!1}*getValidRanges(n,a){n=convertToMinimalFlatRanges(n);for(const l of n)yield*this._getValidRangesForRange(l,a)}getNearestSelectionRange(n,a="both"){if(n.root.rootName=="$graveyard")return null;if(this.checkChild(n,"$text"))return new Range(n);let l,c;const u=n.getAncestors().reverse().find(d=>this.isLimit(d))||n.root;(a=="both"||a=="backward")&&(l=new TreeWalker({boundaries:Range._createIn(u),startPosition:n,direction:"backward"})),(a=="both"||a=="forward")&&(c=new TreeWalker({boundaries:Range._createIn(u),startPosition:n}));for(const d of combineWalkers(l,c)){const h=d.walker==l?"elementEnd":"elementStart",f=d.value;if(f.type==h&&this.isObject(f.item))return Range._createOn(f.item);if(this.checkChild(f.nextPosition,"$text"))return new Range(f.nextPosition)}return null}findAllowedParent(n,a){let l=n.parent;for(;l;){if(this.checkChild(l,a))return l;if(this.isLimit(l))return null;l=l.parent}return null}setAllowedAttributes(n,a,l){const c=l.model;for(const[u,d]of Object.entries(a))c.schema.checkAttribute(n,u)&&l.setAttribute(u,d,n)}removeDisallowedAttributes(n,a){for(const l of n)if(l.is("$text"))removeDisallowedAttributeFromNode(this,l,a);else{const u=Range._createIn(l).getPositions();for(const d of u){const h=d.nodeBefore||d.parent;removeDisallowedAttributeFromNode(this,h,a)}}}getAttributesWithProperty(n,a,l){const c={};for(const[u,d]of n.getAttributes()){const h=this.getAttributeProperties(u);h[a]!==void 0&&(l===void 0||l===h[a])&&(c[u]=d)}return c}createContext(n){return new SchemaContext(n)}_clearCache(){this._compiledDefinitions=null}_compile(){const n={},a=this._sourceDefinitions,l=Object.keys(a);for(const u of l)n[u]=compileBaseItemRule(a[u],u);const c=Object.values(n);for(const u of c)propagateAllowIn(n,u),propagateAllowChildren(n,u),propagateDisallowIn(n,u),propagateDisallowChildren(n,u);for(const u of c)resolveDisallows(n,u);for(const u of c)compileAllowContentOf(n,u);for(const u of c)compileAllowWhere(n,u);for(const u of c)compileAllowAttributesOf(n,u);for(const u of c)compileInheritPropertiesFrom(n,u);this._compiledDefinitions=compileDefinitions(n)}_checkContextMatch(n,a){const l=n.last;let c=this._evaluateChildChecks(n,a);if(c=c!==void 0?c:a.allowIn.includes(l.name),!c)return!1;const u=this.getDefinition(l),d=n.trimLast();return u?d.length==0?!0:this._checkContextMatch(d,u):!1}_evaluateChildChecks(n,a){const l=this._customChildChecks.get(this._genericCheckSymbol)||[],c=this._customChildChecks.get(a.name)||[];for(const u of[...l,...c]){const d=u(n,a);if(d!==void 0)return d}}_evaluateAttributeChecks(n,a){const l=this._customAttributeChecks.get(this._genericCheckSymbol)||[],c=this._customAttributeChecks.get(a)||[];for(const u of[...l,...c]){const d=u(n,a);if(d!==void 0)return d}}*_getValidRangesForRange(n,a){let l=n.start,c=n.start;for(const u of n.getItems({shallow:!0}))u.is("element")&&(yield*this._getValidRangesForRange(Range._createIn(u),a)),this.checkAttribute(u,a)||(l.isEqual(c)||(yield new Range(l,c)),l=Position._createAfter(u)),c=Position._createAfter(u);l.isEqual(c)||(yield new Range(l,c))}findOptimalInsertionRange(n,a){const l=n.getSelectedElement();if(l&&this.isObject(l)&&!this.isInline(l))return a=="before"||a=="after"?new Range(Position._createAt(l,a)):Range._createOn(l);const c=first(n.getSelectedBlocks());if(!c)return new Range(n.focus);if(c.isEmpty)return new Range(Position._createAt(c,0));const u=Position._createAfter(c);return n.focus.isTouching(u)?new Range(u):new Range(Position._createBefore(c))}}class SchemaContext{constructor(o){E(this,"_items");if(o instanceof SchemaContext)return o;let n;typeof o=="string"?n=[o]:Array.isArray(o)?n=o:n=o.getAncestors({includeSelf:!0}),this._items=n.map(mapContextItem)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(o){const n=new SchemaContext([o]);return n._items=[...this._items,...n._items],n}trimLast(){const o=new SchemaContext([]);return o._items=this._items.slice(0,-1),o}getItem(o){return this._items[o]}*getNames(){yield*this._items.map(o=>o.name)}endsWith(o){return Array.from(this.getNames()).join(" ").endsWith(o)}startsWith(o){return Array.from(this.getNames()).join(" ").startsWith(o)}}function compileBaseItemRule(s,o){const n={name:o,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return copyTypes(s,n),copyProperty(s,n,"allowIn"),copyProperty(s,n,"allowChildren"),copyProperty(s,n,"disallowIn"),copyProperty(s,n,"disallowChildren"),copyProperty(s,n,"allowContentOf"),copyProperty(s,n,"allowWhere"),copyProperty(s,n,"allowAttributes"),copyProperty(s,n,"disallowAttributes"),copyProperty(s,n,"allowAttributesOf"),copyProperty(s,n,"inheritTypesFrom"),resolveInheritAll(s,n),n}function propagateAllowIn(s,o){for(const n of o.allowIn){const a=s[n];a?a.allowChildren.add(o.name):o.allowIn.delete(n)}}function propagateAllowChildren(s,o){for(const n of o.allowChildren){const a=s[n];a?a.allowIn.add(o.name):o.allowChildren.delete(n)}}function propagateDisallowIn(s,o){for(const n of o.disallowIn){const a=s[n];a?a.disallowChildren.add(o.name):o.disallowIn.delete(n)}}function propagateDisallowChildren(s,o){for(const n of o.disallowChildren){const a=s[n];a?a.disallowIn.add(o.name):o.disallowChildren.delete(n)}}function resolveDisallows(s,o){for(const n of o.disallowChildren)o.allowChildren.delete(n);for(const n of o.disallowIn)o.allowIn.delete(n);for(const n of o.disallowAttributes)o.allowAttributes.delete(n)}function compileAllowContentOf(s,o){for(const n of o.allowContentOf){const a=s[n];a&&(a.disallowChildren.forEach(l=>{o.allowChildren.has(l)||(o.disallowChildren.add(l),s[l].disallowIn.add(o.name))}),a.allowChildren.forEach(l=>{o.disallowChildren.has(l)||(o.allowChildren.add(l),s[l].allowIn.add(o.name))}))}}function compileAllowWhere(s,o){for(const n of o.allowWhere){const a=s[n];a&&(a.disallowIn.forEach(l=>{o.allowIn.has(l)||(o.disallowIn.add(l),s[l].disallowChildren.add(o.name))}),a.allowIn.forEach(l=>{o.disallowIn.has(l)||(o.allowIn.add(l),s[l].allowChildren.add(o.name))}))}}function compileDefinitions(s){const o={};for(const n of Object.values(s))o[n.name]={name:n.name,isBlock:!!n.isBlock,isContent:!!n.isContent,isInline:!!n.isInline,isLimit:!!n.isLimit,isObject:!!n.isObject,isSelectable:!!n.isSelectable,allowIn:Array.from(n.allowIn).filter(a=>!!s[a]),allowChildren:Array.from(n.allowChildren).filter(a=>!!s[a]),allowAttributes:Array.from(n.allowAttributes)};return o}function compileAllowAttributesOf(s,o){for(const n of o.allowAttributesOf){const a=s[n];if(!a)return;a.allowAttributes.forEach(l=>{o.disallowAttributes.has(l)||o.allowAttributes.add(l)})}}function compileInheritPropertiesFrom(s,o){for(const n of o.inheritTypesFrom){const a=s[n];if(a){const l=Object.keys(a).filter(c=>c.startsWith("is"));for(const c of l)c in o||(o[c]=a[c])}}}function copyTypes(s,o){for(const n of s){const a=Object.keys(n).filter(l=>l.startsWith("is"));for(const l of a)o[l]=!!n[l]}}function copyProperty(s,o,n){for(const a of s){let l=a[n];typeof l=="string"&&(l=[l]),Array.isArray(l)&&l.forEach(c=>o[n].add(c))}}function resolveInheritAll(s,o){for(const n of s){const a=n.inheritAllFrom;a&&(o.allowContentOf.add(a),o.allowWhere.add(a),o.allowAttributesOf.add(a),o.inheritTypesFrom.add(a))}}function mapContextItem(s){return typeof s=="string"||s.is("documentFragment")?{name:typeof s=="string"?s:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:s.is("element")?s.name:"$text",*getAttributeKeys(){yield*s.getAttributeKeys()},getAttribute(o){return s.getAttribute(o)}}}function*combineWalkers(s,o){let n=!1;for(;!n;){if(n=!0,s){const a=s.next();a.done||(n=!1,yield{walker:s,value:a.value})}if(o){const a=o.next();a.done||(n=!1,yield{walker:o,value:a.value})}}}function*convertToMinimalFlatRanges(s){for(const o of s)yield*o.getMinimalFlatRanges()}function removeDisallowedAttributeFromNode(s,o,n){for(const a of o.getAttributeKeys())s.checkAttribute(o,a)||n.removeAttribute(a,o)}class UpcastDispatcher extends EmitterMixin(){constructor(n){super();E(this,"conversionApi");E(this,"_splitParts",new Map);E(this,"_cursorParents",new Map);E(this,"_modelCursor",null);E(this,"_emptyElementsToKeep",new Set);this.conversionApi={...n,consumable:null,writer:null,store:null,convertItem:(a,l)=>this._convertItem(a,l),convertChildren:(a,l)=>this._convertChildren(a,l),safeInsert:(a,l)=>this._safeInsert(a,l),updateConversionResult:(a,l)=>this._updateConversionResult(a,l),splitToAllowedParent:(a,l)=>this._splitToAllowedParent(a,l),getSplitParts:a=>this._getSplitParts(a),keepEmptyElement:a=>this._keepEmptyElement(a)}}convert(n,a,l=["$root"]){this.fire("viewCleanup",n),this._modelCursor=createContextTree(l,a),this.conversionApi.writer=a,this.conversionApi.consumable=ViewConsumable.createFrom(n),this.conversionApi.store={};const{modelRange:c}=this._convertItem(n,this._modelCursor),u=a.createDocumentFragment();if(c){this._removeEmptyElements();const d=this._modelCursor.parent,h=d._removeChildren(0,d.childCount);u._insertChild(0,h),u.markers=extractMarkersFromModelFragment(u,a)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,u}_convertItem(n,a){const l={viewItem:n,modelCursor:a,modelRange:null};if(n.is("element")?this.fire(`element:${n.name}`,l,this.conversionApi):n.is("$text")?this.fire("text",l,this.conversionApi):this.fire("documentFragment",l,this.conversionApi),l.modelRange&&!(l.modelRange instanceof Range))throw new CKEditorError("view-conversion-dispatcher-incorrect-result",this);return{modelRange:l.modelRange,modelCursor:l.modelCursor}}_convertChildren(n,a){let l=a.is("position")?a:Position._createAt(a,0);const c=new Range(l);for(const u of Array.from(n.getChildren())){const d=this._convertItem(u,l);d.modelRange instanceof Range&&(c.end=d.modelRange.end,l=d.modelCursor)}return{modelRange:c,modelCursor:l}}_safeInsert(n,a){const l=this._splitToAllowedParent(n,a);return l?(this.conversionApi.writer.insert(n,l.position),!0):!1}_updateConversionResult(n,a){const l=this._getSplitParts(n),c=this.conversionApi.writer;a.modelRange||(a.modelRange=c.createRange(c.createPositionBefore(n),c.createPositionAfter(l[l.length-1])));const u=this._cursorParents.get(n);u?a.modelCursor=c.createPositionAt(u,0):a.modelCursor=a.modelRange.end}_splitToAllowedParent(n,a){const{schema:l,writer:c}=this.conversionApi;let u=l.findAllowedParent(a,n);if(u){if(u===a.parent)return{position:a};this._modelCursor.parent.getAncestors().includes(u)&&(u=null)}if(!u)return isParagraphable(a,n,l)?{position:wrapInParagraph(a,c)}:null;const d=this.conversionApi.writer.split(a,u),h=[];for(const g of d.range.getWalker())if(g.type=="elementEnd")h.push(g.item);else{const p=h.pop(),v=g.item;this._registerSplitPair(p,v)}const f=d.range.end.parent;return this._cursorParents.set(n,f),{position:d.position,cursorParent:f}}_registerSplitPair(n,a){this._splitParts.has(n)||this._splitParts.set(n,[n]);const l=this._splitParts.get(n);this._splitParts.set(a,l),l.push(a)}_getSplitParts(n){let a;return this._splitParts.has(n)?a=this._splitParts.get(n):a=[n],a}_keepEmptyElement(n){this._emptyElementsToKeep.add(n)}_removeEmptyElements(){const n=new Map;for(const a of this._splitParts.keys())if(a.isEmpty&&!this._emptyElementsToKeep.has(a)){const l=n.get(a.parent)||[];l.push(a),this._splitParts.delete(a),n.set(a.parent,l)}for(const[a,l]of n)a._removeChildrenArray(l);n.size&&this._removeEmptyElements()}}function extractMarkersFromModelFragment(s,o){const n=new Set,a=new Map,l=Range._createIn(s).getItems();for(const c of l)c.is("element","$marker")&&n.add(c);for(const c of n){const u=c.getAttribute("data-name"),d=o.createPositionBefore(c);a.has(u)?a.get(u).end=d.clone():a.set(u,new Range(d.clone())),o.remove(c)}return a}function createContextTree(s,o){let n;for(const a of new SchemaContext(s)){const l={};for(const u of a.getAttributeKeys())l[u]=a.getAttribute(u);const c=o.createElement(a.name,l);n&&o.insert(c,n),n=Position._createAt(c,0)}return n}class BasicHtmlWriter{getHtml(o){const a=global$1.document.implementation.createHTMLDocument("").createElement("div");return a.appendChild(o),a.innerHTML}}class HtmlDataProcessor{constructor(o){E(this,"domParser");E(this,"domConverter");E(this,"htmlWriter");E(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new DomConverter(o,{renderingMode:"data"}),this.htmlWriter=new BasicHtmlWriter}toData(o){const n=this.domConverter.viewToDom(o);return this.htmlWriter.getHtml(n)}toView(o){const n=this._toDom(o);return this.domConverter.domToView(n,{skipComments:this.skipComments})}registerRawContentMatcher(o){this.domConverter.registerRawContentMatcher(o)}useFillerType(o){this.domConverter.blockFillerMode=o=="marked"?"markedNbsp":"nbsp"}_toDom(o){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(o.trim().slice(0,1e4))||(o=`<body>${o}</body>`);const n=this.domParser.parseFromString(o,"text/html"),a=n.createDocumentFragment(),l=n.body.childNodes;for(;l.length>0;)a.appendChild(l[0]);return a}}let DataController$1=class extends EmitterMixin(){constructor(n,a){super();E(this,"model");E(this,"mapper");E(this,"downcastDispatcher");E(this,"upcastDispatcher");E(this,"viewDocument");E(this,"stylesProcessor");E(this,"htmlProcessor");E(this,"processor");E(this,"_viewWriter");this.model=n,this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:n.schema}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.upcastDispatcher=new UpcastDispatcher({schema:n.schema}),this.viewDocument=new Document$1(a),this.stylesProcessor=a,this.htmlProcessor=new HtmlDataProcessor(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new DowncastWriter(this.viewDocument),this.upcastDispatcher.on("text",convertText(),{priority:"lowest"}),this.upcastDispatcher.on("element",convertToModelFragment$1(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",convertToModelFragment$1(),{priority:"lowest"}),ObservableMixin().prototype.decorate.call(this,"init"),ObservableMixin().prototype.decorate.call(this,"set"),ObservableMixin().prototype.decorate.call(this,"get"),ObservableMixin().prototype.decorate.call(this,"toView"),ObservableMixin().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},autoParagraphEmptyRoots)},{priority:"lowest"})}get(n={}){const{rootName:a="main",trim:l="empty"}=n;if(!this._checkIfRootsExists([a]))throw new CKEditorError("datacontroller-get-non-existent-root",this);const c=this.model.document.getRoot(a);return c.isAttached()||logWarning("datacontroller-get-detached-root",this),l==="empty"&&!this.model.hasContent(c,{ignoreWhitespaces:!0})?"":this.stringify(c,n)}stringify(n,a={}){const l=this.toView(n,a);return this.processor.toData(l)}toView(n,a={}){const l=this.viewDocument,c=this._viewWriter;this.mapper.clearBindings();const u=Range._createIn(n),d=new DocumentFragment$1(l);this.mapper.bindElements(n,d);const h=n.is("documentFragment")?n.markers:_getMarkersRelativeToElement(n);return this.downcastDispatcher.convert(u,h,c,a),d}init(n){if(this.model.document.version)throw new CKEditorError("datacontroller-init-document-not-empty",this);let a={};if(typeof n=="string"?a.main=n:a=n,!this._checkIfRootsExists(Object.keys(a)))throw new CKEditorError("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},l=>{for(const c of Object.keys(a)){const u=this.model.document.getRoot(c);l.insert(this.parse(a[c],u),u,0)}}),Promise.resolve()}set(n,a={}){let l={};if(typeof n=="string"?l.main=n:l=n,!this._checkIfRootsExists(Object.keys(l)))throw new CKEditorError("datacontroller-set-non-existent-root",this);this.model.enqueueChange(a.batchType||{},c=>{c.setSelection(null),c.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const u of Object.keys(l)){const d=this.model.document.getRoot(u);c.remove(c.createRangeIn(d)),c.insert(this.parse(l[u],d),d,0)}})}parse(n,a="$root"){const l=this.processor.toView(n);return this.toModel(l,a)}toModel(n,a="$root"){return this.model.change(l=>this.upcastDispatcher.convert(n,l,a))}addStyleProcessorRules(n){n(this.stylesProcessor)}registerRawContentMatcher(n){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(n),this.htmlProcessor.registerRawContentMatcher(n)}destroy(){this.stopListening()}_checkIfRootsExists(n){for(const a of n)if(!this.model.document.getRoot(a))return!1;return!0}};function _getMarkersRelativeToElement(s){const o=[],n=s.root.document;if(!n)return new Map;const a=Range._createIn(s);for(const l of n.model.markers){const c=l.getRange(),u=c.isCollapsed,d=c.start.isEqual(a.start)||c.end.isEqual(a.end);if(u&&d)o.push([l.name,c]);else{const h=a.getIntersection(c);h&&o.push([l.name,h])}}return o.sort(([l,c],[u,d])=>{if(c.end.compareWith(d.start)!=="after")return 1;if(c.start.compareWith(d.end)!=="before")return-1;switch(c.start.compareWith(d.start)){case"before":return 1;case"after":return-1;default:switch(c.end.compareWith(d.end)){case"before":return 1;case"after":return-1;default:return u.localeCompare(l)}}}),new Map(o)}class Conversion{constructor(o,n){E(this,"_helpers",new Map);E(this,"_downcast");E(this,"_upcast");this._downcast=toArray$2(o),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=toArray$2(n),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(o,n){const a=this._downcast.includes(n);if(!this._upcast.includes(n)&&!a)throw new CKEditorError("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:o,dispatchers:[n],isDowncast:a})}for(o){if(!this._helpers.has(o))throw new CKEditorError("conversion-for-unknown-group",this);return this._helpers.get(o)}elementToElement(o){this.for("downcast").elementToElement(o);for(const{model:n,view:a}of _getAllUpcastDefinitions(o))this.for("upcast").elementToElement({model:n,view:a,converterPriority:o.converterPriority})}attributeToElement(o){this.for("downcast").attributeToElement(o);for(const{model:n,view:a}of _getAllUpcastDefinitions(o))this.for("upcast").elementToAttribute({view:a,model:n,converterPriority:o.converterPriority})}attributeToAttribute(o){this.for("downcast").attributeToAttribute(o);for(const{model:n,view:a}of _getAllUpcastDefinitions(o))this.for("upcast").attributeToAttribute({view:a,model:n})}_createConversionHelpers({name:o,dispatchers:n,isDowncast:a}){if(this._helpers.has(o))throw new CKEditorError("conversion-group-exists",this);const l=a?new DowncastHelpers(n):new UpcastHelpers(n);this._helpers.set(o,l)}}function*_getAllUpcastDefinitions(s){if(s.model.values)for(const o of s.model.values){const n={key:s.model.key,value:o},a=s.view[o],l=s.upcastAlso?s.upcastAlso[o]:void 0;yield*_getUpcastDefinition(n,a,l)}else yield*_getUpcastDefinition(s.model,s.view,s.upcastAlso)}function*_getUpcastDefinition(s,o,n){if(yield{model:s,view:o},n)for(const a of toArray$2(n))yield{model:s,view:a}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Operation{constructor(o){E(this,"baseVersion");E(this,"isDocumentOperation");E(this,"batch");this.baseVersion=o,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const o=Object.assign({},this);return o.__className=this.constructor.className,delete o.batch,delete o.isDocumentOperation,o}static get className(){return"Operation"}static fromJSON(o,n){return new this(o.baseVersion)}}function _insert(s,o){const n=_normalizeNodes(o),a=n.reduce((u,d)=>u+d.offsetSize,0),l=s.parent;_splitNodeAtPosition(s);const c=s.index;return l._insertChild(c,n),_mergeNodesAtIndex(l,c+n.length),_mergeNodesAtIndex(l,c),new Range(s,s.getShiftedBy(a))}function _remove(s){if(!s.isFlat)throw new CKEditorError("operation-utils-remove-range-not-flat",this);const o=s.start.parent;_splitNodeAtPosition(s.start),_splitNodeAtPosition(s.end);const n=o._removeChildren(s.start.index,s.end.index-s.start.index);return _mergeNodesAtIndex(o,s.start.index),n}function _move(s,o){if(!s.isFlat)throw new CKEditorError("operation-utils-move-range-not-flat",this);const n=_remove(s);return o=o._getTransformedByDeletion(s.start,s.end.offset-s.start.offset),_insert(o,n)}function _setAttribute(s,o,n){_splitNodeAtPosition(s.start),_splitNodeAtPosition(s.end);for(const a of s.getItems({shallow:!0})){const l=a.is("$textProxy")?a.textNode:a;n!==null?l._setAttribute(o,n):l._removeAttribute(o),_mergeNodesAtIndex(l.parent,l.index)}_mergeNodesAtIndex(s.end.parent,s.end.index)}function _normalizeNodes(s){const o=[];function n(a){if(typeof a=="string")o.push(new Text(a));else if(a instanceof TextProxy)o.push(new Text(a.data,a.getAttributes()));else if(a instanceof Node$1$1)o.push(a);else if(isIterable(a))for(const l of a)n(l)}n(s);for(let a=1;a<o.length;a++){const l=o[a],c=o[a-1];l instanceof Text&&c instanceof Text&&_haveSameAttributes(l,c)&&(o.splice(a-1,2,new Text(c.data+l.data,c.getAttributes())),a--)}return o}function _mergeNodesAtIndex(s,o){const n=s.getChild(o-1),a=s.getChild(o);if(n&&a&&n.is("$text")&&a.is("$text")&&_haveSameAttributes(n,a)){const l=new Text(n.data+a.data,n.getAttributes());s._removeChildren(o-1,2),s._insertChild(o-1,l)}}function _splitNodeAtPosition(s){const o=s.textNode,n=s.parent;if(o){const a=s.offset-o.startOffset,l=o.index;n._removeChildren(l,1);const c=new Text(o.data.substr(0,a),o.getAttributes()),u=new Text(o.data.substr(a),o.getAttributes());n._insertChild(l,[c,u])}}function _haveSameAttributes(s,o){const n=s.getAttributes(),a=o.getAttributes();for(const l of n){if(l[1]!==o.getAttribute(l[0]))return!1;a.next()}return a.next().done}class MoveOperation extends Operation{constructor(n,a,l,c){super(c);E(this,"sourcePosition");E(this,"howMany");E(this,"targetPosition");this.sourcePosition=n.clone(),this.sourcePosition.stickiness="toNext",this.howMany=a,this.targetPosition=l.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Range._createFromPositionAndShift(this.sourcePosition,this.howMany),Range._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new MoveOperation(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const n=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new MoveOperation(this.getMovedRangeStart(),this.howMany,n,this.baseVersion+1)}_validate(){const n=this.sourcePosition.parent,a=this.targetPosition.parent,l=this.sourcePosition.offset,c=this.targetPosition.offset;if(l+this.howMany>n.maxOffset)throw new CKEditorError("move-operation-nodes-do-not-exist",this);if(n===a&&l<c&&c<l+this.howMany)throw new CKEditorError("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&compareArrays(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const u=this.sourcePosition.path.length-1;if(this.targetPosition.path[u]>=l&&this.targetPosition.path[u]<l+this.howMany)throw new CKEditorError("move-operation-node-into-itself",this)}}_execute(){_move(Range._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const n=super.toJSON();return n.sourcePosition=this.sourcePosition.toJSON(),n.targetPosition=this.targetPosition.toJSON(),n}static get className(){return"MoveOperation"}static fromJSON(n,a){const l=Position.fromJSON(n.sourcePosition,a),c=Position.fromJSON(n.targetPosition,a);return new this(l,n.howMany,c,n.baseVersion)}}class InsertOperation extends Operation{constructor(n,a,l){super(l);E(this,"position");E(this,"nodes");E(this,"shouldReceiveAttributes");this.position=n.clone(),this.position.stickiness="toNone",this.nodes=new NodeList(_normalizeNodes(a)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const n=new NodeList([...this.nodes].map(l=>l._clone(!0))),a=new InsertOperation(this.position,n,this.baseVersion);return a.shouldReceiveAttributes=this.shouldReceiveAttributes,a}getReversed(){const n=this.position.root.document.graveyard,a=new Position(n,[0]);return new MoveOperation(this.position,this.nodes.maxOffset,a,this.baseVersion+1)}_validate(){const n=this.position.parent;if(!n||n.maxOffset<this.position.offset)throw new CKEditorError("insert-operation-position-invalid",this)}_execute(){const n=this.nodes;this.nodes=new NodeList([...n].map(a=>a._clone(!0))),_insert(this.position,n)}toJSON(){const n=super.toJSON();return n.position=this.position.toJSON(),n.nodes=this.nodes.toJSON(),n}static get className(){return"InsertOperation"}static fromJSON(n,a){const l=[];for(const u of n.nodes)u.name?l.push(Element$2.fromJSON(u)):l.push(Text.fromJSON(u));const c=new InsertOperation(Position.fromJSON(n.position,a),l,n.baseVersion);return c.shouldReceiveAttributes=n.shouldReceiveAttributes,c}}class SplitOperation extends Operation{constructor(n,a,l,c,u){super(u);E(this,"splitPosition");E(this,"howMany");E(this,"insertionPosition");E(this,"graveyardPosition");this.splitPosition=n.clone(),this.splitPosition.stickiness="toNext",this.howMany=a,this.insertionPosition=l,this.graveyardPosition=c?c.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const n=this.insertionPosition.path.slice();return n.push(0),new Position(this.insertionPosition.root,n)}get movedRange(){const n=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.splitPosition,n)}get affectedSelectable(){const n=[Range._createFromPositionAndShift(this.splitPosition,0),Range._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&n.push(Range._createFromPositionAndShift(this.graveyardPosition,0)),n}clone(){return new SplitOperation(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const n=this.splitPosition.root.document.graveyard,a=new Position(n,[0]);return new MergeOperation(this.moveTargetPosition,this.howMany,this.splitPosition,a,this.baseVersion+1)}_validate(){const n=this.splitPosition.parent,a=this.splitPosition.offset;if(!n||n.maxOffset<a)throw new CKEditorError("split-operation-position-invalid",this);if(n.parent){if(this.howMany!=n.maxOffset-this.splitPosition.offset)throw new CKEditorError("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new CKEditorError("split-operation-graveyard-position-invalid",this)}else throw new CKEditorError("split-operation-split-in-root",this)}_execute(){const n=this.splitPosition.parent;if(this.graveyardPosition)_move(Range._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const l=n._clone();_insert(this.insertionPosition,l)}const a=new Range(Position._createAt(n,this.splitPosition.offset),Position._createAt(n,n.maxOffset));_move(a,this.moveTargetPosition)}toJSON(){const n=super.toJSON();return n.splitPosition=this.splitPosition.toJSON(),n.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(n.graveyardPosition=this.graveyardPosition.toJSON()),n}static get className(){return"SplitOperation"}static getInsertionPosition(n){const a=n.path.slice(0,-1);return a[a.length-1]++,new Position(n.root,a,"toPrevious")}static fromJSON(n,a){const l=Position.fromJSON(n.splitPosition,a),c=Position.fromJSON(n.insertionPosition,a),u=n.graveyardPosition?Position.fromJSON(n.graveyardPosition,a):null;return new this(l,n.howMany,c,u,n.baseVersion)}}class MergeOperation extends Operation{constructor(n,a,l,c,u){super(u);E(this,"sourcePosition");E(this,"howMany");E(this,"targetPosition");E(this,"graveyardPosition");this.sourcePosition=n.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=a,this.targetPosition=l.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=c.clone()}get type(){return"merge"}get deletionPosition(){return new Position(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const n=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.sourcePosition,n)}get affectedSelectable(){const n=this.sourcePosition.parent;return[Range._createOn(n),Range._createFromPositionAndShift(this.targetPosition,0),Range._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new MergeOperation(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const n=this.targetPosition._getTransformedByMergeOperation(this),a=this.sourcePosition.path.slice(0,-1),l=new Position(this.sourcePosition.root,a)._getTransformedByMergeOperation(this);return new SplitOperation(n,this.howMany,l,this.graveyardPosition,this.baseVersion+1)}_validate(){const n=this.sourcePosition.parent,a=this.targetPosition.parent;if(n.parent)if(a.parent){if(this.howMany!=n.maxOffset)throw new CKEditorError("merge-operation-how-many-invalid",this)}else throw new CKEditorError("merge-operation-target-position-invalid",this);else throw new CKEditorError("merge-operation-source-position-invalid",this)}_execute(){const n=this.sourcePosition.parent,a=Range._createIn(n);_move(a,this.targetPosition),_move(Range._createOn(n),this.graveyardPosition)}toJSON(){const n=super.toJSON();return n.sourcePosition=n.sourcePosition.toJSON(),n.targetPosition=n.targetPosition.toJSON(),n.graveyardPosition=n.graveyardPosition.toJSON(),n}static get className(){return"MergeOperation"}static fromJSON(n,a){const l=Position.fromJSON(n.sourcePosition,a),c=Position.fromJSON(n.targetPosition,a),u=Position.fromJSON(n.graveyardPosition,a);return new this(l,n.howMany,c,u,n.baseVersion)}}class MarkerOperation extends Operation{constructor(n,a,l,c,u,d){super(d);E(this,"name");E(this,"oldRange");E(this,"newRange");E(this,"affectsData");E(this,"_markers");this.name=n,this.oldRange=a?a.clone():null,this.newRange=l?l.clone():null,this.affectsData=u,this._markers=c}get type(){return"marker"}get affectedSelectable(){const n=[];return this.oldRange&&n.push(this.oldRange.clone()),this.newRange&&(this.oldRange?n.push(...this.newRange.getDifference(this.oldRange)):n.push(this.newRange.clone())),n}clone(){return new MarkerOperation(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new MarkerOperation(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const n=super.toJSON();return this.oldRange&&(n.oldRange=this.oldRange.toJSON()),this.newRange&&(n.newRange=this.newRange.toJSON()),delete n._markers,n}static get className(){return"MarkerOperation"}static fromJSON(n,a){return new MarkerOperation(n.name,n.oldRange?Range.fromJSON(n.oldRange,a):null,n.newRange?Range.fromJSON(n.newRange,a):null,a.model.markers,n.affectsData,n.baseVersion)}}class AttributeOperation extends Operation{constructor(n,a,l,c,u){super(u);E(this,"range");E(this,"key");E(this,"oldValue");E(this,"newValue");this.range=n.clone(),this.key=a,this.oldValue=l===void 0?null:l,this.newValue=c===void 0?null:c}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new AttributeOperation(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new AttributeOperation(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const n=super.toJSON();return n.range=this.range.toJSON(),n}_validate(){if(!this.range.isFlat)throw new CKEditorError("attribute-operation-range-not-flat",this);for(const n of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!isEqual$1(n.getAttribute(this.key),this.oldValue))throw new CKEditorError("attribute-operation-wrong-old-value",this,{item:n,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&n.hasAttribute(this.key))throw new CKEditorError("attribute-operation-attribute-exists",this,{node:n,key:this.key})}}_execute(){isEqual$1(this.oldValue,this.newValue)||_setAttribute(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(n,a){return new AttributeOperation(Range.fromJSON(n.range,a),n.key,n.oldValue,n.newValue,n.baseVersion)}}class NoOperation extends Operation{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new NoOperation(this.baseVersion)}getReversed(){return new NoOperation(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class RenameOperation extends Operation{constructor(n,a,l,c){super(c);E(this,"position");E(this,"oldName");E(this,"newName");this.position=n,this.position.stickiness="toNext",this.oldName=a,this.newName=l}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new RenameOperation(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new RenameOperation(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const n=this.position.nodeAfter;if(n instanceof Element$2){if(n.name!==this.oldName)throw new CKEditorError("rename-operation-wrong-name",this)}else throw new CKEditorError("rename-operation-wrong-position",this)}_execute(){const n=this.position.nodeAfter;n.name=this.newName}toJSON(){const n=super.toJSON();return n.position=this.position.toJSON(),n}static get className(){return"RenameOperation"}static fromJSON(n,a){return new RenameOperation(Position.fromJSON(n.position,a),n.oldName,n.newName,n.baseVersion)}}class RootAttributeOperation extends Operation{constructor(n,a,l,c,u){super(u);E(this,"root");E(this,"key");E(this,"oldValue");E(this,"newValue");this.root=n,this.key=a,this.oldValue=l===void 0?null:l,this.newValue=c===void 0?null:c}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new RootAttributeOperation(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new RootAttributeOperation(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new CKEditorError("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new CKEditorError("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new CKEditorError("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const n=super.toJSON();return n.root=this.root.toJSON(),n}static get className(){return"RootAttributeOperation"}static fromJSON(n,a){if(!a.getRoot(n.root))throw new CKEditorError("rootattribute-operation-fromjson-no-root",this,{rootName:n.root});return new RootAttributeOperation(a.getRoot(n.root),n.key,n.oldValue,n.newValue,n.baseVersion)}}class RootOperation extends Operation{constructor(n,a,l,c,u){super(u);E(this,"rootName");E(this,"elementName");E(this,"isAdd");E(this,"_document");if(this.rootName=n,this.elementName=a,this.isAdd=l,this._document=c,!this._document.getRoot(this.rootName)){const d=this._document.createRoot(this.elementName,this.rootName);d._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new RootOperation(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new RootOperation(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const n=super.toJSON();return delete n._document,n}static get className(){return"RootOperation"}static fromJSON(n,a){return new RootOperation(n.rootName,n.elementName,n.isAdd,a,n.baseVersion)}}const operations={};operations[AttributeOperation.className]=AttributeOperation;operations[InsertOperation.className]=InsertOperation;operations[MarkerOperation.className]=MarkerOperation;operations[MoveOperation.className]=MoveOperation;operations[NoOperation.className]=NoOperation;operations[Operation.className]=Operation;operations[RenameOperation.className]=RenameOperation;operations[RootAttributeOperation.className]=RootAttributeOperation;operations[RootOperation.className]=RootOperation;operations[SplitOperation.className]=SplitOperation;operations[MergeOperation.className]=MergeOperation;class OperationFactory{static fromJSON(o,n){return operations[o.__className].fromJSON(o,n)}}const transformations=new Map;function setTransformation(s,o,n){let a=transformations.get(s);a||(a=new Map,transformations.set(s,a)),a.set(o,n)}function getTransformation(s,o){const n=transformations.get(s);return n&&n.has(o)?n.get(o):noUpdateTransformation}function noUpdateTransformation(s){return[s]}function transform$1(s,o,n={}){const a=getTransformation(s.constructor,o.constructor);try{return s=s.clone(),a(s,o,n)}catch(l){throw l}}function transformSets(s,o,n){s=s.slice(),o=o.slice();const a=new ContextFactory(n.document,n.useRelations,n.forceWeakRemove);a.setOriginalOperations(s),a.setOriginalOperations(o);const l=a.originalOperations;if(s.length==0||o.length==0)return{operationsA:s,operationsB:o,originalOperations:l};const c=new WeakMap;for(const h of s)c.set(h,0);const u={nextBaseVersionA:s[s.length-1].baseVersion+1,nextBaseVersionB:o[o.length-1].baseVersion+1,originalOperationsACount:s.length,originalOperationsBCount:o.length};let d=0;for(;d<s.length;){const h=s[d],f=c.get(h);if(f==o.length){d++;continue}const g=o[f],p=transform$1(h,g,a.getContext(h,g,!0)),v=transform$1(g,h,a.getContext(g,h,!1));a.updateRelation(h,g),a.setOriginalOperations(p,h),a.setOriginalOperations(v,g);for(const b of p)c.set(b,f+v.length);s.splice(d,1,...p),o.splice(f,1,...v)}return handlePartialMarkerOperations(s),handlePartialMarkerOperations(o),updateBaseVersions(s,u.nextBaseVersionB),updateBaseVersions(o,u.nextBaseVersionA),{operationsA:s,operationsB:o,originalOperations:l}}class ContextFactory{constructor(o,n,a=!1){E(this,"originalOperations");E(this,"_history");E(this,"_useRelations");E(this,"_forceWeakRemove");E(this,"_relations");this.originalOperations=new Map,this._history=o.history,this._useRelations=n,this._forceWeakRemove=!!a,this._relations=new Map}setOriginalOperations(o,n=null){const a=n?this.originalOperations.get(n):null;for(const l of o)this.originalOperations.set(l,a||l)}updateRelation(o,n){if(o instanceof MoveOperation)n instanceof MergeOperation?o.targetPosition.isEqual(n.sourcePosition)||n.movedRange.containsPosition(o.targetPosition)?this._setRelation(o,n,"insertAtSource"):o.targetPosition.isEqual(n.deletionPosition)?this._setRelation(o,n,"insertBetween"):o.targetPosition.isAfter(n.sourcePosition)&&this._setRelation(o,n,"moveTargetAfter"):n instanceof MoveOperation&&(o.targetPosition.isEqual(n.sourcePosition)||o.targetPosition.isBefore(n.sourcePosition)?this._setRelation(o,n,"insertBefore"):this._setRelation(o,n,"insertAfter"));else if(o instanceof SplitOperation){if(n instanceof MergeOperation)o.splitPosition.isBefore(n.sourcePosition)&&this._setRelation(o,n,"splitBefore");else if(n instanceof MoveOperation)if(o.splitPosition.isEqual(n.sourcePosition)||o.splitPosition.isBefore(n.sourcePosition))this._setRelation(o,n,"splitBefore");else{const a=Range._createFromPositionAndShift(n.sourcePosition,n.howMany);if(o.splitPosition.hasSameParentAs(n.sourcePosition)&&a.containsPosition(o.splitPosition)){const l=a.end.offset-o.splitPosition.offset,c=o.splitPosition.offset-a.start.offset;this._setRelation(o,n,{howMany:l,offset:c})}}}else if(o instanceof MergeOperation)n instanceof MergeOperation?(o.targetPosition.isEqual(n.sourcePosition)||this._setRelation(o,n,"mergeTargetNotMoved"),o.sourcePosition.isEqual(n.targetPosition)&&this._setRelation(o,n,"mergeSourceNotMoved"),o.sourcePosition.isEqual(n.sourcePosition)&&this._setRelation(o,n,"mergeSameElement")):n instanceof SplitOperation?o.sourcePosition.isEqual(n.splitPosition)&&this._setRelation(o,n,"splitAtSource"):n instanceof MoveOperation&&n.howMany>0&&(o.sourcePosition.isEqual(n.sourcePosition.getShiftedBy(n.howMany))&&this._setRelation(o,n,"mergeSourceAffected"),o.targetPosition.isEqual(n.sourcePosition)&&this._setRelation(o,n,"mergeTargetWasBefore"));else if(o instanceof MarkerOperation){const a=o.newRange;if(!a)return;if(n instanceof MergeOperation){const l=a.start.isEqual(n.targetPosition),c=a.start.isEqual(n.deletionPosition),u=a.end.isEqual(n.deletionPosition),d=a.end.isEqual(n.sourcePosition);(l||c||u||d)&&this._setRelation(o,n,{wasInLeftElement:l,wasStartBeforeMergedElement:c,wasEndBeforeMergedElement:u,wasInRightElement:d})}}}getContext(o,n,a){return{aIsStrong:a,aWasUndone:this._wasUndone(o),bWasUndone:this._wasUndone(n),abRelation:this._useRelations?this._getRelation(o,n):null,baRelation:this._useRelations?this._getRelation(n,o):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(o){const n=this.originalOperations.get(o);return n.wasUndone||this._history.isUndoneOperation(n)}_getRelation(o,n){const a=this.originalOperations.get(n),l=this._history.getUndoneOperation(a);if(!l)return null;const c=this.originalOperations.get(o),u=this._relations.get(c);return u&&u.get(l)||null}_setRelation(o,n,a){const l=this.originalOperations.get(o),c=this.originalOperations.get(n);let u=this._relations.get(l);u||(u=new Map,this._relations.set(l,u)),u.set(c,a)}}function updateBaseVersions(s,o){for(const n of s)n.baseVersion=o++}function handlePartialMarkerOperations(s){const o=new Map;for(let n=0;n<s.length;n++){const a=s[n];a instanceof MarkerOperation&&(a.baseVersion!==-1?o.set(a.name,{op:a,ranges:a.newRange?[a.newRange]:[]}):(a.newRange&&o.get(a.name).ranges.push(a.newRange),s.splice(n,1),n--))}for(const{op:n,ranges:a}of o.values())a.length?n.newRange=Range._createFromRanges(a):n.newRange=null}setTransformation(AttributeOperation,AttributeOperation,(s,o,n)=>{if(s.key===o.key&&s.range.start.hasSameParentAs(o.range.start)){const a=s.range.getDifference(o.range).map(c=>new AttributeOperation(c,s.key,s.oldValue,s.newValue,0)),l=s.range.getIntersection(o.range);return l&&n.aIsStrong&&a.push(new AttributeOperation(l,o.key,o.newValue,s.newValue,0)),a.length==0?[new NoOperation(0)]:a}else return[s]});setTransformation(AttributeOperation,InsertOperation,(s,o)=>{if(s.range.start.hasSameParentAs(o.position)&&s.range.containsPosition(o.position)){const a=s.range._getTransformedByInsertion(o.position,o.howMany,!o.shouldReceiveAttributes).map(l=>new AttributeOperation(l,s.key,s.oldValue,s.newValue,s.baseVersion));if(o.shouldReceiveAttributes){const l=_getComplementaryAttributeOperations(o,s.key,s.oldValue);l&&a.unshift(l)}return a}return s.range=s.range._getTransformedByInsertion(o.position,o.howMany,!1)[0],[s]});function _getComplementaryAttributeOperations(s,o,n){const l=s.nodes.getNode(0).getAttribute(o);if(l==n)return null;const c=new Range(s.position,s.position.getShiftedBy(s.howMany));return new AttributeOperation(c,o,l,n,0)}setTransformation(AttributeOperation,MergeOperation,(s,o)=>{const n=[];s.range.start.hasSameParentAs(o.deletionPosition)&&(s.range.containsPosition(o.deletionPosition)||s.range.start.isEqual(o.deletionPosition))&&n.push(Range._createFromPositionAndShift(o.graveyardPosition,1));const a=s.range._getTransformedByMergeOperation(o);return a.isCollapsed||n.push(a),n.map(l=>new AttributeOperation(l,s.key,s.oldValue,s.newValue,s.baseVersion))});setTransformation(AttributeOperation,MoveOperation,(s,o)=>_breakRangeByMoveOperation(s.range,o).map(a=>new AttributeOperation(a,s.key,s.oldValue,s.newValue,s.baseVersion)));function _breakRangeByMoveOperation(s,o){const n=Range._createFromPositionAndShift(o.sourcePosition,o.howMany);let a=null,l=[];n.containsRange(s,!0)?a=s:s.start.hasSameParentAs(n.start)?(l=s.getDifference(n),a=s.getIntersection(n)):l=[s];const c=[];for(let u of l){u=u._getTransformedByDeletion(o.sourcePosition,o.howMany);const d=o.getMovedRangeStart(),h=u.start.hasSameParentAs(d),f=u._getTransformedByInsertion(d,o.howMany,h);c.push(...f)}return a&&c.push(a._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany,!1)[0]),c}setTransformation(AttributeOperation,SplitOperation,(s,o)=>{if(s.range.end.isEqual(o.insertionPosition))return o.graveyardPosition||s.range.end.offset++,[s];if(s.range.start.hasSameParentAs(o.splitPosition)&&s.range.containsPosition(o.splitPosition)){const n=s.clone();return n.range=new Range(o.moveTargetPosition.clone(),s.range.end._getCombined(o.splitPosition,o.moveTargetPosition)),s.range.end=o.splitPosition.clone(),s.range.end.stickiness="toPrevious",[s,n]}return s.range=s.range._getTransformedBySplitOperation(o),[s]});setTransformation(InsertOperation,AttributeOperation,(s,o)=>{const n=[s];if(s.shouldReceiveAttributes&&s.position.hasSameParentAs(o.range.start)&&o.range.containsPosition(s.position)){const a=_getComplementaryAttributeOperations(s,o.key,o.newValue);a&&n.push(a)}return n});setTransformation(InsertOperation,InsertOperation,(s,o,n)=>s.position.isEqual(o.position)&&n.aIsStrong?[s]:(s.position=s.position._getTransformedByInsertOperation(o),[s]));setTransformation(InsertOperation,MoveOperation,(s,o)=>(s.position=s.position._getTransformedByMoveOperation(o),[s]));setTransformation(InsertOperation,SplitOperation,(s,o)=>(s.position=s.position._getTransformedBySplitOperation(o),[s]));setTransformation(InsertOperation,MergeOperation,(s,o)=>(s.position=s.position._getTransformedByMergeOperation(o),[s]));setTransformation(MarkerOperation,InsertOperation,(s,o)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByInsertOperation(o)[0]),s.newRange&&(s.newRange=s.newRange._getTransformedByInsertOperation(o)[0]),[s]));setTransformation(MarkerOperation,MarkerOperation,(s,o,n)=>{if(s.name==o.name)if(n.aIsStrong)s.oldRange=o.newRange?o.newRange.clone():null;else return[new NoOperation(0)];return[s]});setTransformation(MarkerOperation,MergeOperation,(s,o)=>(s.oldRange&&(s.oldRange=s.oldRange._getTransformedByMergeOperation(o)),s.newRange&&(s.newRange=s.newRange._getTransformedByMergeOperation(o)),[s]));setTransformation(MarkerOperation,MoveOperation,(s,o)=>{const n=[s];if(s.oldRange&&(s.oldRange=Range._createFromRanges(s.oldRange._getTransformedByMoveOperation(o))),s.newRange){const a=s.newRange._getTransformedByMoveOperation(o);s.newRange=a[0];for(let l=1;l<a.length;l++){const c=s.clone();c.oldRange=null,c.newRange=a[l],c.baseVersion=-1,n.push(c)}}return n});setTransformation(MarkerOperation,SplitOperation,(s,o,n)=>{if(s.oldRange&&(s.oldRange=s.oldRange._getTransformedBySplitOperation(o)),s.newRange){if(n.abRelation){const a=s.newRange._getTransformedBySplitOperation(o);return s.newRange.start.isEqual(o.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?s.newRange.start=Position._createAt(o.insertionPosition):s.newRange.start.isEqual(o.splitPosition)&&!n.abRelation.wasInLeftElement?s.newRange.start=Position._createAt(o.moveTargetPosition):s.newRange.start=a.start,s.newRange.end.isEqual(o.splitPosition)&&n.abRelation.wasInRightElement?s.newRange.end=Position._createAt(o.moveTargetPosition):s.newRange.end.isEqual(o.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?s.newRange.end=Position._createAt(o.insertionPosition):s.newRange.end=a.end,[s]}s.newRange=s.newRange._getTransformedBySplitOperation(o)}return[s]});setTransformation(MergeOperation,InsertOperation,(s,o)=>(s.sourcePosition.hasSameParentAs(o.position)&&(s.howMany+=o.howMany),s.sourcePosition=s.sourcePosition._getTransformedByInsertOperation(o),s.targetPosition=s.targetPosition._getTransformedByInsertOperation(o),[s]));setTransformation(MergeOperation,MergeOperation,(s,o,n)=>{if(s.sourcePosition.isEqual(o.sourcePosition)&&s.targetPosition.isEqual(o.targetPosition))if(n.bWasUndone){const a=o.graveyardPosition.path.slice();return a.push(0),s.sourcePosition=new Position(o.graveyardPosition.root,a),s.howMany=0,[s]}else return[new NoOperation(0)];if(s.sourcePosition.isEqual(o.sourcePosition)&&!s.targetPosition.isEqual(o.targetPosition)&&!n.bWasUndone&&n.abRelation!="splitAtSource"){const a=s.targetPosition.root.rootName=="$graveyard",l=o.targetPosition.root.rootName=="$graveyard";if(l&&!a||!(a&&!l)&&n.aIsStrong){const h=o.targetPosition._getTransformedByMergeOperation(o),f=s.targetPosition._getTransformedByMergeOperation(o);return[new MoveOperation(h,s.howMany,f,0)]}else return[new NoOperation(0)]}return s.sourcePosition.hasSameParentAs(o.targetPosition)&&(s.howMany+=o.howMany),s.sourcePosition=s.sourcePosition._getTransformedByMergeOperation(o),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(o),(!s.graveyardPosition.isEqual(o.graveyardPosition)||!n.aIsStrong)&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(o)),[s]});setTransformation(MergeOperation,MoveOperation,(s,o,n)=>{const a=Range._createFromPositionAndShift(o.sourcePosition,o.howMany);return o.type=="remove"&&!n.bWasUndone&&s.deletionPosition.hasSameParentAs(o.sourcePosition)&&a.containsPosition(s.sourcePosition)?[new NoOperation(0)]:(o.sourcePosition.getShiftedBy(o.howMany).isEqual(s.sourcePosition)?s.sourcePosition.stickiness="toNone":o.targetPosition.isEqual(s.sourcePosition)&&n.abRelation=="mergeSourceAffected"?s.sourcePosition.stickiness="toNext":o.sourcePosition.isEqual(s.targetPosition)?(s.targetPosition.stickiness="toNone",s.howMany-=o.howMany):o.targetPosition.isEqual(s.targetPosition)&&n.abRelation=="mergeTargetWasBefore"?(s.targetPosition.stickiness="toPrevious",s.howMany+=o.howMany):(s.sourcePosition.hasSameParentAs(o.targetPosition)&&(s.howMany+=o.howMany),s.sourcePosition.hasSameParentAs(o.sourcePosition)&&(s.howMany-=o.howMany)),s.sourcePosition=s.sourcePosition._getTransformedByMoveOperation(o),s.targetPosition=s.targetPosition._getTransformedByMoveOperation(o),s.sourcePosition.stickiness="toPrevious",s.targetPosition.stickiness="toNext",s.graveyardPosition.isEqual(o.targetPosition)||(s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(o)),[s])});setTransformation(MergeOperation,SplitOperation,(s,o,n)=>{if(o.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByDeletion(o.graveyardPosition,1),s.deletionPosition.isEqual(o.graveyardPosition)&&(s.howMany=o.howMany)),s.targetPosition.isEqual(o.splitPosition)&&(o.graveyardPosition&&s.deletionPosition.isEqual(o.graveyardPosition)||n.abRelation=="mergeTargetNotMoved"))return s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(o),[s];if(s.sourcePosition.isEqual(o.splitPosition)){if(n.abRelation=="mergeSourceNotMoved")return s.howMany=0,s.targetPosition=s.targetPosition._getTransformedBySplitOperation(o),[s];if(n.abRelation=="mergeSameElement"||s.sourcePosition.offset>0)return s.sourcePosition=o.moveTargetPosition.clone(),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(o),[s]}return s.sourcePosition.hasSameParentAs(o.splitPosition)&&(s.howMany=o.splitPosition.offset),s.sourcePosition=s.sourcePosition._getTransformedBySplitOperation(o),s.targetPosition=s.targetPosition._getTransformedBySplitOperation(o),[s]});setTransformation(MoveOperation,InsertOperation,(s,o)=>{const a=Range._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByInsertOperation(o,!1)[0];return s.sourcePosition=a.start,s.howMany=a.end.offset-a.start.offset,s.targetPosition.isEqual(o.position)||(s.targetPosition=s.targetPosition._getTransformedByInsertOperation(o)),[s]});setTransformation(MoveOperation,MoveOperation,(s,o,n)=>{const a=Range._createFromPositionAndShift(s.sourcePosition,s.howMany),l=Range._createFromPositionAndShift(o.sourcePosition,o.howMany);let c=n.aIsStrong,u=!n.aIsStrong;n.abRelation=="insertBefore"||n.baRelation=="insertAfter"?u=!0:(n.abRelation=="insertAfter"||n.baRelation=="insertBefore")&&(u=!1);let d;if(s.targetPosition.isEqual(o.targetPosition)&&u?d=s.targetPosition._getTransformedByDeletion(o.sourcePosition,o.howMany):d=s.targetPosition._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany),_moveTargetIntoMovedRange(s,o)&&_moveTargetIntoMovedRange(o,s))return[o.getReversed()];if(a.containsPosition(o.targetPosition)&&a.containsRange(l,!0))return a.start=a.start._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany),a.end=a.end._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany),_makeMoveOperationsFromRanges([a],d);if(l.containsPosition(s.targetPosition)&&l.containsRange(a,!0))return a.start=a.start._getCombined(o.sourcePosition,o.getMovedRangeStart()),a.end=a.end._getCombined(o.sourcePosition,o.getMovedRangeStart()),_makeMoveOperationsFromRanges([a],d);const g=compareArrays(s.sourcePosition.getParentPath(),o.sourcePosition.getParentPath());if(g=="prefix"||g=="extension")return a.start=a.start._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany),a.end=a.end._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany),_makeMoveOperationsFromRanges([a],d);s.type=="remove"&&o.type!="remove"&&!n.aWasUndone&&!n.forceWeakRemove?c=!0:s.type!="remove"&&o.type=="remove"&&!n.bWasUndone&&!n.forceWeakRemove&&(c=!1);const p=[],v=a.getDifference(l);for(const _ of v){_.start=_.start._getTransformedByDeletion(o.sourcePosition,o.howMany),_.end=_.end._getTransformedByDeletion(o.sourcePosition,o.howMany);const w=compareArrays(_.start.getParentPath(),o.getMovedRangeStart().getParentPath())=="same",x=_._getTransformedByInsertion(o.getMovedRangeStart(),o.howMany,w);p.push(...x)}const b=a.getIntersection(l);return b!==null&&c&&(b.start=b.start._getCombined(o.sourcePosition,o.getMovedRangeStart()),b.end=b.end._getCombined(o.sourcePosition,o.getMovedRangeStart()),p.length===0?p.push(b):p.length==1?l.start.isBefore(a.start)||l.start.isEqual(a.start)?p.unshift(b):p.push(b):p.splice(1,0,b)),p.length===0?[new NoOperation(s.baseVersion)]:_makeMoveOperationsFromRanges(p,d)});setTransformation(MoveOperation,SplitOperation,(s,o,n)=>{let a=s.targetPosition.clone();(!s.targetPosition.isEqual(o.insertionPosition)||!o.graveyardPosition||n.abRelation=="moveTargetAfter")&&(a=s.targetPosition._getTransformedBySplitOperation(o));const l=Range._createFromPositionAndShift(s.sourcePosition,s.howMany);if(l.end.isEqual(o.insertionPosition))return o.graveyardPosition||s.howMany++,s.targetPosition=a,[s];if(l.start.hasSameParentAs(o.splitPosition)&&l.containsPosition(o.splitPosition)){let d=new Range(o.splitPosition,l.end);d=d._getTransformedBySplitOperation(o);const h=[new Range(l.start,o.splitPosition),d];return _makeMoveOperationsFromRanges(h,a)}s.targetPosition.isEqual(o.splitPosition)&&n.abRelation=="insertAtSource"&&(a=o.moveTargetPosition),s.targetPosition.isEqual(o.insertionPosition)&&n.abRelation=="insertBetween"&&(a=s.targetPosition);const u=[l._getTransformedBySplitOperation(o)];if(o.graveyardPosition){const d=l.start.isEqual(o.graveyardPosition)||l.containsPosition(o.graveyardPosition);s.howMany>1&&d&&!n.aWasUndone&&u.push(Range._createFromPositionAndShift(o.insertionPosition,1))}return _makeMoveOperationsFromRanges(u,a)});setTransformation(MoveOperation,MergeOperation,(s,o,n)=>{const a=Range._createFromPositionAndShift(s.sourcePosition,s.howMany);if(o.deletionPosition.hasSameParentAs(s.sourcePosition)&&a.containsPosition(o.sourcePosition)){if(s.type=="remove"&&!n.forceWeakRemove){if(!n.aWasUndone){const u=[];let d=o.graveyardPosition.clone(),h=o.targetPosition._getTransformedByMergeOperation(o);const f=s.targetPosition.getTransformedByOperation(o);s.howMany>1&&(u.push(new MoveOperation(s.sourcePosition,s.howMany-1,f,0)),d=d._getTransformedByMove(s.sourcePosition,f,s.howMany-1),h=h._getTransformedByMove(s.sourcePosition,f,s.howMany-1));const g=o.deletionPosition._getCombined(s.sourcePosition,f),p=new MoveOperation(d,1,g,0),v=p.getMovedRangeStart().path.slice();v.push(0);const b=new Position(p.targetPosition.root,v);h=h._getTransformedByMove(d,g,1);const _=new MoveOperation(h,o.howMany,b,0);return u.push(p),u.push(_),u}}else if(s.howMany==1)return n.bWasUndone?(s.sourcePosition=o.graveyardPosition.clone(),s.targetPosition=s.targetPosition._getTransformedByMergeOperation(o),[s]):[new NoOperation(0)]}const c=Range._createFromPositionAndShift(s.sourcePosition,s.howMany)._getTransformedByMergeOperation(o);return s.sourcePosition=c.start,s.howMany=c.end.offset-c.start.offset,s.targetPosition=s.targetPosition._getTransformedByMergeOperation(o),[s]});setTransformation(RenameOperation,InsertOperation,(s,o)=>(s.position=s.position._getTransformedByInsertOperation(o),[s]));setTransformation(RenameOperation,MergeOperation,(s,o)=>s.position.isEqual(o.deletionPosition)?(s.position=o.graveyardPosition.clone(),s.position.stickiness="toNext",[s]):(s.position=s.position._getTransformedByMergeOperation(o),[s]));setTransformation(RenameOperation,MoveOperation,(s,o)=>(s.position=s.position._getTransformedByMoveOperation(o),[s]));setTransformation(RenameOperation,RenameOperation,(s,o,n)=>{if(s.position.isEqual(o.position))if(n.aIsStrong)s.oldName=o.newName;else return[new NoOperation(0)];return[s]});setTransformation(RenameOperation,SplitOperation,(s,o)=>{const n=s.position.path,a=o.splitPosition.getParentPath();if(compareArrays(n,a)=="same"&&!o.graveyardPosition){const l=new RenameOperation(s.position.getShiftedBy(1),s.oldName,s.newName,0);return[s,l]}return s.position=s.position._getTransformedBySplitOperation(o),[s]});setTransformation(RootAttributeOperation,RootAttributeOperation,(s,o,n)=>{if(s.root===o.root&&s.key===o.key){if(!n.aIsStrong||s.newValue===o.newValue)return[new NoOperation(0)];s.oldValue=o.newValue}return[s]});setTransformation(RootOperation,RootOperation,(s,o)=>s.rootName===o.rootName&&s.isAdd===o.isAdd?[new NoOperation(0)]:[s]);setTransformation(SplitOperation,InsertOperation,(s,o)=>(s.splitPosition.hasSameParentAs(o.position)&&s.splitPosition.offset<o.position.offset&&(s.howMany+=o.howMany),s.splitPosition=s.splitPosition._getTransformedByInsertOperation(o),s.insertionPosition=s.insertionPosition._getTransformedByInsertOperation(o),[s]));setTransformation(SplitOperation,MergeOperation,(s,o,n)=>{if(!s.graveyardPosition&&!n.bWasUndone&&s.splitPosition.hasSameParentAs(o.sourcePosition)){const a=o.graveyardPosition.path.slice();a.push(0);const l=new Position(o.graveyardPosition.root,a),c=SplitOperation.getInsertionPosition(new Position(o.graveyardPosition.root,a)),u=new SplitOperation(l,0,c,null,0);return s.splitPosition=s.splitPosition._getTransformedByMergeOperation(o),s.insertionPosition=SplitOperation.getInsertionPosition(s.splitPosition),s.graveyardPosition=u.insertionPosition.clone(),s.graveyardPosition.stickiness="toNext",[u,s]}return s.splitPosition.hasSameParentAs(o.deletionPosition)&&!s.splitPosition.isAfter(o.deletionPosition)&&s.howMany--,s.splitPosition.hasSameParentAs(o.targetPosition)&&(s.howMany+=o.howMany),s.splitPosition=s.splitPosition._getTransformedByMergeOperation(o),s.insertionPosition=SplitOperation.getInsertionPosition(s.splitPosition),s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedByMergeOperation(o)),[s]});setTransformation(SplitOperation,MoveOperation,(s,o,n)=>{const a=Range._createFromPositionAndShift(o.sourcePosition,o.howMany);if(s.graveyardPosition){const c=a.start.isEqual(s.graveyardPosition)||a.containsPosition(s.graveyardPosition);if(!n.bWasUndone&&c){const u=s.splitPosition._getTransformedByMoveOperation(o),d=s.graveyardPosition._getTransformedByMoveOperation(o),h=d.path.slice();h.push(0);const f=new Position(d.root,h);return[new MoveOperation(u,s.howMany,f,0)]}s.graveyardPosition=s.graveyardPosition._getTransformedByMoveOperation(o)}const l=s.splitPosition.isEqual(o.targetPosition);if(l&&(n.baRelation=="insertAtSource"||n.abRelation=="splitBefore"))return s.howMany+=o.howMany,s.splitPosition=s.splitPosition._getTransformedByDeletion(o.sourcePosition,o.howMany),s.insertionPosition=SplitOperation.getInsertionPosition(s.splitPosition),[s];if(l&&n.abRelation&&n.abRelation.howMany){const{howMany:c,offset:u}=n.abRelation;return s.howMany+=c,s.splitPosition=s.splitPosition.getShiftedBy(u),[s]}if(s.splitPosition.hasSameParentAs(o.sourcePosition)&&a.containsPosition(s.splitPosition)){const c=o.howMany-(s.splitPosition.offset-o.sourcePosition.offset);return s.howMany-=c,s.splitPosition.hasSameParentAs(o.targetPosition)&&s.splitPosition.offset<o.targetPosition.offset&&(s.howMany+=o.howMany),s.splitPosition=o.sourcePosition.clone(),s.insertionPosition=SplitOperation.getInsertionPosition(s.splitPosition),[s]}return o.sourcePosition.isEqual(o.targetPosition)||(s.splitPosition.hasSameParentAs(o.sourcePosition)&&s.splitPosition.offset<=o.sourcePosition.offset&&(s.howMany-=o.howMany),s.splitPosition.hasSameParentAs(o.targetPosition)&&s.splitPosition.offset<o.targetPosition.offset&&(s.howMany+=o.howMany)),s.splitPosition.stickiness="toNone",s.splitPosition=s.splitPosition._getTransformedByMoveOperation(o),s.splitPosition.stickiness="toNext",s.graveyardPosition?s.insertionPosition=s.insertionPosition._getTransformedByMoveOperation(o):s.insertionPosition=SplitOperation.getInsertionPosition(s.splitPosition),[s]});setTransformation(SplitOperation,SplitOperation,(s,o,n)=>{if(s.splitPosition.isEqual(o.splitPosition)){if(!s.graveyardPosition&&!o.graveyardPosition)return[new NoOperation(0)];if(s.graveyardPosition&&o.graveyardPosition&&s.graveyardPosition.isEqual(o.graveyardPosition))return[new NoOperation(0)];if(n.abRelation=="splitBefore")return s.howMany=0,s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(o),[s]}if(s.graveyardPosition&&o.graveyardPosition&&s.graveyardPosition.isEqual(o.graveyardPosition)){const a=s.splitPosition.root.rootName=="$graveyard",l=o.splitPosition.root.rootName=="$graveyard";if(l&&!a||!(a&&!l)&&n.aIsStrong){const h=[];return o.howMany&&h.push(new MoveOperation(o.moveTargetPosition,o.howMany,o.splitPosition,0)),s.howMany&&h.push(new MoveOperation(s.splitPosition,s.howMany,s.moveTargetPosition,0)),h}else return[new NoOperation(0)]}if(s.graveyardPosition&&(s.graveyardPosition=s.graveyardPosition._getTransformedBySplitOperation(o)),s.splitPosition.isEqual(o.insertionPosition)&&n.abRelation=="splitBefore")return s.howMany++,[s];if(o.splitPosition.isEqual(s.insertionPosition)&&n.baRelation=="splitBefore"){const a=o.insertionPosition.path.slice();a.push(0);const l=new Position(o.insertionPosition.root,a),c=new MoveOperation(s.insertionPosition,1,l,0);return[s,c]}return s.splitPosition.hasSameParentAs(o.splitPosition)&&s.splitPosition.offset<o.splitPosition.offset&&(s.howMany-=o.howMany),s.splitPosition=s.splitPosition._getTransformedBySplitOperation(o),s.insertionPosition=SplitOperation.getInsertionPosition(s.splitPosition),[s]});function _moveTargetIntoMovedRange(s,o){return s.targetPosition._getTransformedByDeletion(o.sourcePosition,o.howMany)===null}function _makeMoveOperationsFromRanges(s,o){const n=[];for(let a=0;a<s.length;a++){const l=s[a],c=new MoveOperation(l.start,l.end.offset-l.start.offset,o,0);n.push(c);for(let u=a+1;u<s.length;u++)s[u]=s[u]._getTransformedByMove(c.sourcePosition,c.targetPosition,c.howMany)[0];o=o._getTransformedByMove(c.sourcePosition,c.targetPosition,c.howMany)}return n}class LivePosition extends EmitterMixin(Position){constructor(o,n,a="toNone"){if(super(o,n,a),!this.root.is("rootElement"))throw new CKEditorError("model-liveposition-root-not-rootelement",o);bindWithDocument.call(this)}detach(){this.stopListening()}toPosition(){return new Position(this.root,this.path.slice(),this.stickiness)}static fromPosition(o,n){return new this(o.root,o.path.slice(),n||o.stickiness)}}LivePosition.prototype.is=function(s){return s==="livePosition"||s==="model:livePosition"||s=="position"||s==="model:position"};function bindWithDocument(){this.listenTo(this.root.document.model,"applyOperation",(s,o)=>{const n=o[0];n.isDocumentOperation&&transform.call(this,n)},{priority:"low"})}function transform(s){const o=this.getTransformedByOperation(s);if(!this.isEqual(o)){const n=this.toPosition();this.path=o.path,this.root=o.root,this.fire("change",n)}}class Batch{constructor(o={}){E(this,"operations");E(this,"isUndoable");E(this,"isLocal");E(this,"isUndo");E(this,"isTyping");typeof o=="string"&&(o=o==="transparent"?{isUndoable:!1}:{},logWarning("batch-constructor-deprecated-string-type"));const{isUndoable:n=!0,isLocal:a=!0,isUndo:l=!1,isTyping:c=!1}=o;this.operations=[],this.isUndoable=n,this.isLocal=a,this.isUndo=l,this.isTyping=c}get type(){return logWarning("batch-type-deprecated"),"default"}get baseVersion(){for(const o of this.operations)if(o.baseVersion!==null)return o.baseVersion;return null}addOperation(o){return o.isDocumentOperation&&(o.batch=this,this.operations.push(o)),o}}const Ft=class Ft{constructor(o){E(this,"_markerCollection");E(this,"_changesInElement",new Map);E(this,"_elementsSnapshots",new Map);E(this,"_elementChildrenSnapshots",new Map);E(this,"_elementState",new Map);E(this,"_changedMarkers",new Map);E(this,"_changedRoots",new Map);E(this,"_changeCount",0);E(this,"_cachedChanges",null);E(this,"_cachedChangesWithGraveyard",null);E(this,"_refreshedItems",new Set);this._markerCollection=o}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(o){const n=o;switch(n.type){case"insert":{if(this._isInInsertedElement(n.position.parent))return;this._markInsert(n.position.parent,n.position.offset,n.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const a of n.range.getItems({shallow:!0}))this._isInInsertedElement(a.parent)||this._markAttribute(a);break}case"remove":case"move":case"reinsert":{if(n.sourcePosition.isEqual(n.targetPosition)||n.sourcePosition.getShiftedBy(n.howMany).isEqual(n.targetPosition))return;const a=this._isInInsertedElement(n.sourcePosition.parent),l=this._isInInsertedElement(n.targetPosition.parent);a||this._markRemove(n.sourcePosition.parent,n.sourcePosition.offset,n.howMany),l||this._markInsert(n.targetPosition.parent,n.getMovedRangeStart().offset,n.howMany);const c=Range._createFromPositionAndShift(n.sourcePosition,n.howMany);for(const u of c.getItems({shallow:!0}))this._setElementState(u,"move");break}case"rename":{if(this._isInInsertedElement(n.position.parent))return;this._markRemove(n.position.parent,n.position.offset,1),this._markInsert(n.position.parent,n.position.offset,1);const a=Range._createFromPositionAndShift(n.position,1);for(const l of this._markerCollection.getMarkersIntersectingRange(a)){const c=l.getData();this.bufferMarkerChange(l.name,c,c)}this._setElementState(n.position.nodeAfter,"rename");break}case"split":{const a=n.splitPosition.parent;if(!this._isInInsertedElement(a)){this._markRemove(a,n.splitPosition.offset,n.howMany);const l=Range._createFromPositionAndShift(n.splitPosition,n.howMany);for(const c of l.getItems({shallow:!0}))this._setElementState(c,"move")}this._isInInsertedElement(n.insertionPosition.parent)||this._markInsert(n.insertionPosition.parent,n.insertionPosition.offset,1),n.graveyardPosition&&(this._markRemove(n.graveyardPosition.parent,n.graveyardPosition.offset,1),this._setElementState(n.graveyardPosition.nodeAfter,"move"));break}case"merge":{const a=n.sourcePosition.parent;this._isInInsertedElement(a.parent)||this._markRemove(a.parent,a.startOffset,1);const l=n.graveyardPosition.parent;this._markInsert(l,n.graveyardPosition.offset,1),this._setElementState(a,"move");const c=n.targetPosition.parent;if(!this._isInInsertedElement(c)){this._markInsert(c,n.targetPosition.offset,a.maxOffset);const u=Range._createFromPositionAndShift(n.sourcePosition,n.howMany);for(const d of u.getItems({shallow:!0}))this._setElementState(d,"move")}break}case"detachRoot":case"addRoot":{const a=n.affectedSelectable;if(!a._isLoaded||a.isAttached()==n.isAdd)return;this._bufferRootStateChange(n.rootName,n.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!n.root._isLoaded)return;const a=n.root.rootName;this._bufferRootAttributeChange(a,n.key,n.oldValue,n.newValue);break}}this._cachedChanges=null}bufferMarkerChange(o,n,a){n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null),a.range&&a.range.root.is("rootElement")&&!a.range.root._isLoaded&&(a.range=null);let l=this._changedMarkers.get(o);l?l.newMarkerData=a:(l={newMarkerData:a,oldMarkerData:n},this._changedMarkers.set(o,l)),l.oldMarkerData.range==null&&a.range==null&&this._changedMarkers.delete(o)}getMarkersToRemove(){const o=[];for(const[n,a]of this._changedMarkers)a.oldMarkerData.range!=null&&o.push({name:n,range:a.oldMarkerData.range});return o}getMarkersToAdd(){const o=[];for(const[n,a]of this._changedMarkers)a.newMarkerData.range!=null&&o.push({name:n,range:a.newMarkerData.range});return o}getChangedMarkers(){return Array.from(this._changedMarkers).map(([o,n])=>({name:o,data:{oldRange:n.oldMarkerData.range,newRange:n.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:o,oldMarkerData:n}of this._changedMarkers.values()){if(o.affectsData!==n.affectsData)return!0;if(o.affectsData){const a=o.range&&!n.range,l=!o.range&&n.range,c=o.range&&n.range&&!o.range.isEqual(n.range);if(a||l||c)return!0}}return!1}getChanges(o={}){if(this._cachedChanges)return o.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let n=[];for(const a of this._changesInElement.keys()){const l=this._changesInElement.get(a).sort((g,p)=>g.offset===p.offset?g.type!=p.type?g.type=="remove"?-1:1:0:g.offset<p.offset?-1:1),c=this._elementChildrenSnapshots.get(a),u=_getChildrenSnapshots(a.getChildren()),d=_generateDiffInstructionsFromChanges(c.length,l);let h=0,f=0;for(const g of d)if(g==="i"){const p=this._getDiffActionForNode(u[h].node,"insert"),v=this._elementsSnapshots.get(u[h].node),b=this._getInsertDiff(a,h,p,u[h],v);n.push(b),h++}else if(g==="r"){const p=this._getDiffActionForNode(c[f].node,"remove"),v=this._getRemoveDiff(a,h,p,c[f]);n.push(v),f++}else if(g==="a"){const p=c[f].attributes,v=u[h].attributes;let b;if(u[h].name=="$text")b=new Range(Position._createAt(a,h),Position._createAt(a,h+1));else{const w=a.offsetToIndex(h);b=new Range(Position._createAt(a,h),Position._createAt(a.getChild(w),0))}const _=this._getAttributesDiff(b,p,v);n.push(..._),h++,f++}else h++,f++}n.sort((a,l)=>a.position.root!=l.position.root?a.position.root.rootName<l.position.root.rootName?-1:1:a.position.isEqual(l.position)?a.changeCount-l.changeCount:a.position.isBefore(l.position)?-1:1);for(let a=1,l=0;a<n.length;a++){const c=n[l],u=n[a],d=c.type=="remove"&&u.type=="remove"&&c.name=="$text"&&u.name=="$text"&&c.position.isEqual(u.position),h=c.type=="insert"&&u.type=="insert"&&c.name=="$text"&&u.name=="$text"&&c.position.parent==u.position.parent&&c.position.offset+c.length==u.position.offset,f=c.type=="attribute"&&u.type=="attribute"&&c.position.parent==u.position.parent&&c.range.isFlat&&u.range.isFlat&&c.position.offset+c.length==u.position.offset&&c.attributeKey==u.attributeKey&&c.attributeOldValue==u.attributeOldValue&&c.attributeNewValue==u.attributeNewValue;d||h||f?(c.length++,f&&(c.range.end=c.range.end.getShiftedBy(1)),n[a]=null):l=a}n=n.filter(a=>a);for(const a of n)delete a.changeCount,a.type=="attribute"&&(delete a.position,delete a.length);return this._changeCount=0,this._cachedChangesWithGraveyard=n,this._cachedChanges=n.filter(_changesInGraveyardFilter),o.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(o=>{const n={...o};return n.state!==void 0&&delete n.attributes,n})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(o){if(this._isInInsertedElement(o.parent))return;this._markRemove(o.parent,o.startOffset,o.offsetSize),this._markInsert(o.parent,o.startOffset,o.offsetSize),this._refreshedItems.add(o),this._setElementState(o,"refresh");const n=Range._createOn(o);for(const a of this._markerCollection.getMarkersIntersectingRange(n)){const l=a.getData();this.bufferMarkerChange(a.name,l,l)}this._cachedChanges=null}_bufferRootLoad(o){if(o.isAttached()){this._bufferRootStateChange(o.rootName,!0),this._markInsert(o,0,o.maxOffset);for(const n of o.getAttributeKeys())this._bufferRootAttributeChange(o.rootName,n,null,o.getAttribute(n));for(const n of this._markerCollection)if(n.getRange().root==o){const a=n.getData();this.bufferMarkerChange(n.name,{...a,range:null},a)}}}_bufferRootStateChange(o,n){if(!this._changedRoots.has(o)){this._changedRoots.set(o,{name:o,state:n?"attached":"detached"});return}const a=this._changedRoots.get(o);a.state!==void 0?(delete a.state,a.attributes===void 0&&this._changedRoots.delete(o)):a.state=n?"attached":"detached"}_bufferRootAttributeChange(o,n,a,l){const c=this._changedRoots.get(o)||{name:o},u=c.attributes||{};if(u[n]){const d=u[n];l===d.oldValue?delete u[n]:d.newValue=l}else u[n]={oldValue:a,newValue:l};Object.entries(u).length===0?(delete c.attributes,c.state===void 0&&this._changedRoots.delete(o)):(c.attributes=u,this._changedRoots.set(o,c))}_markInsert(o,n,a){if(o.root.is("rootElement")&&!o.root._isLoaded)return;const l={type:"insert",offset:n,howMany:a,count:this._changeCount++};this._markChange(o,l)}_markRemove(o,n,a){if(o.root.is("rootElement")&&!o.root._isLoaded)return;const l={type:"remove",offset:n,howMany:a,count:this._changeCount++};this._markChange(o,l),this._removeAllNestedChanges(o,n,a)}_markAttribute(o){if(o.root.is("rootElement")&&!o.root._isLoaded)return;const n={type:"attribute",offset:o.startOffset,howMany:o.offsetSize,count:this._changeCount++};this._markChange(o.parent,n)}_markChange(o,n){this._makeSnapshots(o);const a=this._getChangesForElement(o);this._handleChange(n,a),a.push(n);for(let l=0;l<a.length;l++)a[l].howMany<1&&(a.splice(l,1),l--)}_setElementState(o,n){if(!o.is("element"))return;const a=Ft._statesPriority.indexOf(this._elementState.get(o));Ft._statesPriority.indexOf(n)>a&&this._elementState.set(o,n)}_getDiffActionForNode(o,n){if(!o.is("element")||!this._elementsSnapshots.has(o))return n;const a=this._elementState.get(o);return!a||a=="move"?n:a}_getChangesForElement(o){let n;return this._changesInElement.has(o)?n=this._changesInElement.get(o):(n=[],this._changesInElement.set(o,n)),n}_makeSnapshots(o){if(this._elementChildrenSnapshots.has(o))return;const n=_getChildrenSnapshots(o.getChildren());this._elementChildrenSnapshots.set(o,n);for(const a of n)this._elementsSnapshots.set(a.node,a)}_handleChange(o,n){o.nodesToHandle=o.howMany;for(const a of n){const l=o.offset+o.howMany,c=a.offset+a.howMany;if(o.type=="insert"&&(a.type=="insert"&&(o.offset<=a.offset?a.offset+=o.howMany:o.offset<c&&(a.howMany+=o.nodesToHandle,o.nodesToHandle=0)),a.type=="remove"&&o.offset<a.offset&&(a.offset+=o.howMany),a.type=="attribute")){if(o.offset<=a.offset)a.offset+=o.howMany;else if(o.offset<c){const u=a.howMany;a.howMany=o.offset-a.offset,n.unshift({type:"attribute",offset:l,howMany:u-a.howMany,count:this._changeCount++})}}if(o.type=="remove"){if(a.type=="insert"){if(l<=a.offset)a.offset-=o.howMany;else if(l<=c)if(o.offset<a.offset){const u=l-a.offset;a.offset=o.offset,a.howMany-=u,o.nodesToHandle-=u}else a.howMany-=o.nodesToHandle,o.nodesToHandle=0;else if(o.offset<=a.offset)o.nodesToHandle-=a.howMany,a.howMany=0;else if(o.offset<c){const u=c-o.offset;a.howMany-=u,o.nodesToHandle-=u}}if(a.type=="remove"&&(l<=a.offset?a.offset-=o.howMany:o.offset<a.offset&&(o.nodesToHandle+=a.howMany,a.howMany=0)),a.type=="attribute"){if(l<=a.offset)a.offset-=o.howMany;else if(o.offset<a.offset){const u=l-a.offset;a.offset=o.offset,a.howMany-=u}else if(o.offset<c)if(l<=c){const u=a.howMany;a.howMany=o.offset-a.offset;const d=u-a.howMany-o.nodesToHandle;n.unshift({type:"attribute",offset:o.offset,howMany:d,count:this._changeCount++})}else a.howMany-=c-o.offset}}if(o.type=="attribute"){if(a.type=="insert")if(o.offset<a.offset&&l>a.offset){if(l>c){const u={type:"attribute",offset:c,howMany:l-c,count:this._changeCount++};this._handleChange(u,n),n.push(u)}o.nodesToHandle=a.offset-o.offset,o.howMany=o.nodesToHandle}else o.offset>=a.offset&&o.offset<c&&(l>c?(o.nodesToHandle=l-c,o.offset=c):o.nodesToHandle=0);if(a.type=="remove"&&o.offset<a.offset&&l>a.offset){const u={type:"attribute",offset:a.offset,howMany:l-a.offset,count:this._changeCount++};this._handleChange(u,n),n.push(u),o.nodesToHandle=a.offset-o.offset,o.howMany=o.nodesToHandle}a.type=="attribute"&&(o.offset>=a.offset&&l<=c?(o.nodesToHandle=0,o.howMany=0,o.offset=0):o.offset<=a.offset&&l>=c&&(a.howMany=0))}}o.howMany=o.nodesToHandle,delete o.nodesToHandle}_getInsertDiff(o,n,a,l,c){const u={type:"insert",position:Position._createAt(o,n),name:l.name,attributes:new Map(l.attributes),length:1,changeCount:this._changeCount++,action:a};return a!="insert"&&c&&(u.before={name:c.name,attributes:new Map(c.attributes)}),u}_getRemoveDiff(o,n,a,l){return{type:"remove",action:a,position:Position._createAt(o,n),name:l.name,attributes:new Map(l.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(o,n,a){const l=[];a=new Map(a);for(const[c,u]of n){const d=a.has(c)?a.get(c):null;d!==u&&l.push({type:"attribute",position:o.start,range:o.clone(),length:1,attributeKey:c,attributeOldValue:u,attributeNewValue:d,changeCount:this._changeCount++}),a.delete(c)}for(const[c,u]of a)l.push({type:"attribute",position:o.start,range:o.clone(),length:1,attributeKey:c,attributeOldValue:null,attributeNewValue:u,changeCount:this._changeCount++});return l}_isInInsertedElement(o){const n=o.parent;if(!n)return!1;const a=this._changesInElement.get(n),l=o.startOffset;if(a){for(const c of a)if(c.type=="insert"&&l>=c.offset&&l<c.offset+c.howMany)return!0}return this._isInInsertedElement(n)}_removeAllNestedChanges(o,n,a){const l=new Range(Position._createAt(o,n),Position._createAt(o,n+a));for(const c of l.getItems({shallow:!0}))c.is("element")&&(this._changesInElement.delete(c),this._removeAllNestedChanges(c,0,c.maxOffset))}};E(Ft,"_statesPriority",[void 0,"refresh","rename","move"]);let Differ=Ft;function _getSingleNodeSnapshot(s){return{node:s,name:s.is("$text")?"$text":s.name,attributes:new Map(s.getAttributes())}}function _getChildrenSnapshots(s){const o=[];for(const n of s)if(n.is("$text"))for(let a=0;a<n.data.length;++a)o.push(_getSingleNodeSnapshot(n));else o.push(_getSingleNodeSnapshot(n));return o}function _generateDiffInstructionsFromChanges(s,o){const n=[];let a=0,l=0;for(const c of o){if(c.offset>a){for(let u=0;u<c.offset-a;u++)n.push("e");l+=c.offset-a}if(c.type=="insert"){for(let u=0;u<c.howMany;u++)n.push("i");a=c.offset+c.howMany}else if(c.type=="remove"){for(let u=0;u<c.howMany;u++)n.push("r");a=c.offset,l+=c.howMany}else{if(c.howMany>1500)for(let u=0;u<c.howMany;u++)n.push("a");else n.push(..."a".repeat(c.howMany).split(""));a=c.offset+c.howMany,l+=c.howMany}}if(l<s)for(let c=0;c<s-l-a;c++)n.push("e");return n}function _changesInGraveyardFilter(s){const o="position"in s&&s.position.root.rootName=="$graveyard",n="range"in s&&s.range.root.rootName=="$graveyard";return!o&&!n}class History{constructor(){E(this,"_operations",[]);E(this,"_undoPairs",new Map);E(this,"_undoneOperations",new Set);E(this,"_baseVersionToOperationIndex",new Map);E(this,"_version",0);E(this,"_gaps",new Map)}get version(){return this._version}set version(o){this._operations.length&&o>this._version+1&&this._gaps.set(this._version,o),this._version=o}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(o){if(o.baseVersion!==this.version)throw new CKEditorError("model-document-history-addoperation-incorrect-version",this,{operation:o,historyVersion:this.version});this._operations.push(o),this._version++,this._baseVersionToOperationIndex.set(o.baseVersion,this._operations.length-1)}getOperations(o,n=this.version){if(!this._operations.length)return[];const a=this._operations[0];o===void 0&&(o=a.baseVersion);let l=n-1;for(const[d,h]of this._gaps)o>d&&o<h&&(o=h),l>d&&l<h&&(l=d-1);if(l<a.baseVersion||o>this.lastOperation.baseVersion)return[];let c=this._baseVersionToOperationIndex.get(o);c===void 0&&(c=0);let u=this._baseVersionToOperationIndex.get(l);return u===void 0&&(u=this._operations.length-1),this._operations.slice(c,u+1)}getOperation(o){const n=this._baseVersionToOperationIndex.get(o);if(n!==void 0)return this._operations[n]}setOperationAsUndone(o,n){this._undoPairs.set(n,o),this._undoneOperations.add(o)}isUndoingOperation(o){return this._undoPairs.has(o)}isUndoneOperation(o){return this._undoneOperations.has(o)}getUndoneOperation(o){return this._undoPairs.get(o)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class RootElement extends Element$2{constructor(n,a,l="main"){super(a);E(this,"rootName");E(this,"_document");E(this,"_isAttached",!0);E(this,"_isLoaded",!0);this._document=n,this.rootName=l}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}RootElement.prototype.is=function(s,o){return o?o===this.name&&(s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"):s==="rootElement"||s==="model:rootElement"||s==="element"||s==="model:element"||s==="node"||s==="model:node"};const graveyardName="$graveyard";class Document extends EmitterMixin(){constructor(n){super();E(this,"model");E(this,"history");E(this,"selection");E(this,"roots");E(this,"differ");E(this,"isReadOnly");E(this,"_postFixers");E(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=n,this.history=new History,this.selection=new DocumentSelection(this),this.roots=new Collection({idProperty:"rootName"}),this.differ=new Differ(n.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",graveyardName),this.listenTo(n,"applyOperation",(a,l)=>{const c=l[0];c.isDocumentOperation&&this.differ.bufferOperation(c)},{priority:"high"}),this.listenTo(n,"applyOperation",(a,l)=>{const c=l[0];c.isDocumentOperation&&this.history.addOperation(c)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(n.markers,"update",(a,l,c,u,d)=>{const h={...l.getData(),range:u};this.differ.bufferMarkerChange(l.name,d,h),c===null&&l.on("change",(f,g)=>{const p=l.getData();this.differ.bufferMarkerChange(l.name,{...p,range:g},p)})}),this.registerPostFixer(a=>{let l=!1;for(const c of this.roots)!c.isAttached()&&!c.isEmpty&&(a.remove(a.createRangeIn(c)),l=!0);for(const c of this.model.markers)c.getRange().root.isAttached()||(a.removeMarker(c),l=!0);return l})}get version(){return this.history.version}set version(n){this.history.version=n}get graveyard(){return this.getRoot(graveyardName)}createRoot(n="$root",a="main"){if(this.roots.get(a))throw new CKEditorError("model-document-createroot-name-exists",this,{name:a});const l=new RootElement(this,n,a);return this.roots.add(l),l}destroy(){this.selection.destroy(),this.stopListening()}getRoot(n="main"){return this.roots.get(n)}getRootNames(n=!1){return this.getRoots(n).map(a=>a.rootName)}getRoots(n=!1){return this.roots.filter(a=>a!=this.graveyard&&(n||a.isAttached())&&a._isLoaded)}registerPostFixer(n){this._postFixers.add(n)}toJSON(){const n=clone$6(this);return n.selection="[engine.model.DocumentSelection]",n.model="[engine.model.Model]",n}_handleChangeBlock(n){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(n),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",n.batch):this.fire("change",n.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const n=this.getRoots();return n.length?n[0]:this.graveyard}_getDefaultRange(){const n=this._getDefaultRoot(),a=this.model,l=a.schema,c=a.createPositionFromPath(n,[0]);return l.getNearestSelectionRange(c)||a.createRange(c)}_validateSelectionRange(n){return n.start.isValid()&&n.end.isValid()&&validateTextNodePosition(n.start)&&validateTextNodePosition(n.end)}_callPostFixers(n){let a=!1;do for(const l of this._postFixers)if(this.selection.refresh(),a=l(n),a)break;while(a)}}function validateTextNodePosition(s){const o=s.textNode;if(o){const n=o.data,a=s.offset-o.startOffset;return!isInsideSurrogatePair(n,a)&&!isInsideCombinedSymbol(n,a)}return!0}class MarkerCollection extends EmitterMixin(){constructor(){super(...arguments);E(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(n){const a=n instanceof Marker?n.name:n;return this._markers.has(a)}get(n){return this._markers.get(n)||null}_set(n,a,l=!1,c=!1){const u=n instanceof Marker?n.name:n;if(u.includes(","))throw new CKEditorError("markercollection-incorrect-marker-name",this);const d=this._markers.get(u);if(d){const g=d.getData(),p=d.getRange();let v=!1;return p.isEqual(a)||(d._attachLiveRange(LiveRange.fromRange(a)),v=!0),l!=d.managedUsingOperations&&(d._managedUsingOperations=l,v=!0),typeof c=="boolean"&&c!=d.affectsData&&(d._affectsData=c,v=!0),v&&this.fire(`update:${u}`,d,p,a,g),d}const h=LiveRange.fromRange(a),f=new Marker(u,h,l,c);return this._markers.set(u,f),this.fire(`update:${u}`,f,null,a,{...f.getData(),range:null}),f}_remove(n){const a=n instanceof Marker?n.name:n,l=this._markers.get(a);return l?(this._markers.delete(a),this.fire(`update:${a}`,l,l.getRange(),null,l.getData()),this._destroyMarker(l),!0):!1}_refresh(n){const a=n instanceof Marker?n.name:n,l=this._markers.get(a);if(!l)throw new CKEditorError("markercollection-refresh-marker-not-exists",this);const c=l.getRange();this.fire(`update:${a}`,l,c,c,l.getData())}*getMarkersAtPosition(n){for(const a of this)a.getRange().containsPosition(n)&&(yield a)}*getMarkersIntersectingRange(n){for(const a of this)a.getRange().getIntersection(n)!==null&&(yield a)}destroy(){for(const n of this._markers.values())this._destroyMarker(n);this._markers=null,this.stopListening()}*getMarkersGroup(n){for(const a of this._markers.values())a.name.startsWith(n+":")&&(yield a)}_destroyMarker(n){n.stopListening(),n._detachLiveRange()}}class Marker extends EmitterMixin(TypeCheckable){constructor(n,a,l,c){super();E(this,"name");E(this,"_managedUsingOperations");E(this,"_affectsData");E(this,"_liveRange");this.name=n,this._liveRange=this._attachLiveRange(a),this._managedUsingOperations=l,this._affectsData=c}get managedUsingOperations(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(n){return this._liveRange&&this._detachLiveRange(),n.delegate("change:range").to(this),n.delegate("change:content").to(this),this._liveRange=n,n}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Marker.prototype.is=function(s){return s==="marker"||s==="model:marker"};class DetachOperation extends Operation{constructor(n,a){super(null);E(this,"sourcePosition");E(this,"howMany");this.sourcePosition=n.clone(),this.howMany=a}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const n=super.toJSON();return n.sourcePosition=this.sourcePosition.toJSON(),n}_validate(){if(this.sourcePosition.root.document)throw new CKEditorError("detach-operation-on-document-node",this)}_execute(){_remove(Range._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class DocumentFragment extends TypeCheckable{constructor(n){super();E(this,"markers",new Map);E(this,"_children",new NodeList);n&&this._insertChild(0,n)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(n){return this._children.getNode(n)}getChildAtOffset(n){return this._children.getNodeAtOffset(n)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(n){return this._children.getNodeIndex(n)}getChildStartOffset(n){return this._children.getNodeStartOffset(n)}getPath(){return[]}getNodeByPath(n){let a=this;for(const l of n)a=a.getChildAtOffset(l);return a}offsetToIndex(n){return this._children.offsetToIndex(n)}toJSON(){const n=[];for(const a of this._children)n.push(a.toJSON());return n}static fromJSON(n){const a=[];for(const l of n)l.name?a.push(Element$2.fromJSON(l)):a.push(Text.fromJSON(l));return new DocumentFragment(a)}_appendChild(n){this._insertChild(this.childCount,n)}_insertChild(n,a){const l=normalize$5(a);for(const c of l)c.parent!==null&&c._remove(),c.parent=this;this._children._insertNodes(n,l)}_removeChildren(n,a=1){const l=this._children._removeNodes(n,a);for(const c of l)c.parent=null;return l}_removeChildrenArray(n){this._children._removeNodesArray(n);for(const a of n)a.parent=null}}DocumentFragment.prototype.is=function(s){return s==="documentFragment"||s==="model:documentFragment"};function normalize$5(s){return typeof s=="string"?[new Text(s)]:(isIterable(s)||(s=[s]),Array.from(s).map(o=>typeof o=="string"?new Text(o):o instanceof TextProxy?new Text(o.data,o.getAttributes()):o))}class Writer{constructor(o,n){E(this,"model");E(this,"batch");this.model=o,this.batch=n}createText(o,n){return new Text(o,n)}createElement(o,n){return new Element$2(o,n)}createDocumentFragment(){return new DocumentFragment}cloneElement(o,n=!0){return o._clone(n)}insert(o,n,a=0){if(this._assertWriterUsedCorrectly(),o instanceof Text&&o.data=="")return;const l=Position._createAt(n,a);if(o.parent)if(isSameTree(o.root,l.root)){this.move(Range._createOn(o),l);return}else{if(o.root.document)throw new CKEditorError("model-writer-insert-forbidden-move",this);this.remove(o)}const c=l.root.document?l.root.document.version:null,u=o instanceof DocumentFragment?o._removeChildren(0,o.childCount):o,d=new InsertOperation(l,u,c);if(o instanceof Text&&(d.shouldReceiveAttributes=!0),this.batch.addOperation(d),this.model.applyOperation(d),o instanceof DocumentFragment)for(const[h,f]of o.markers){const g=Position._createAt(f.root,0),v={range:new Range(f.start._getCombined(g,l),f.end._getCombined(g,l)),usingOperation:!0,affectsData:!0};this.model.markers.has(h)?this.updateMarker(h,v):this.addMarker(h,v)}}insertText(o,n,a,l){n instanceof DocumentFragment||n instanceof Element$2||n instanceof Position?this.insert(this.createText(o),n,a):this.insert(this.createText(o,n),a,l)}insertElement(o,n,a,l){n instanceof DocumentFragment||n instanceof Element$2||n instanceof Position?this.insert(this.createElement(o),n,a):this.insert(this.createElement(o,n),a,l)}append(o,n){this.insert(o,n,"end")}appendText(o,n,a){n instanceof DocumentFragment||n instanceof Element$2?this.insert(this.createText(o),n,"end"):this.insert(this.createText(o,n),a,"end")}appendElement(o,n,a){n instanceof DocumentFragment||n instanceof Element$2?this.insert(this.createElement(o),n,"end"):this.insert(this.createElement(o,n),a,"end")}setAttribute(o,n,a){if(this._assertWriterUsedCorrectly(),a instanceof Range){const l=a.getMinimalFlatRanges();for(const c of l)setAttributeOnRange(this,o,n,c)}else setAttributeOnItem(this,o,n,a)}setAttributes(o,n){for(const[a,l]of toMap(o))this.setAttribute(a,l,n)}removeAttribute(o,n){if(this._assertWriterUsedCorrectly(),n instanceof Range){const a=n.getMinimalFlatRanges();for(const l of a)setAttributeOnRange(this,o,null,l)}else setAttributeOnItem(this,o,null,n)}clearAttributes(o){this._assertWriterUsedCorrectly();const n=a=>{for(const l of a.getAttributeKeys())this.removeAttribute(l,a)};if(!(o instanceof Range))n(o);else for(const a of o.getItems())n(a)}move(o,n,a){if(this._assertWriterUsedCorrectly(),!(o instanceof Range))throw new CKEditorError("writer-move-invalid-range",this);if(!o.isFlat)throw new CKEditorError("writer-move-range-not-flat",this);const l=Position._createAt(n,a);if(l.isEqual(o.start))return;if(this._addOperationForAffectedMarkers("move",o),!isSameTree(o.root,l.root))throw new CKEditorError("writer-move-different-document",this);const c=o.root.document?o.root.document.version:null,u=new MoveOperation(o.start,o.end.offset-o.start.offset,l,c);this.batch.addOperation(u),this.model.applyOperation(u)}remove(o){this._assertWriterUsedCorrectly();const a=(o instanceof Range?o:Range._createOn(o)).getMinimalFlatRanges().reverse();for(const l of a)this._addOperationForAffectedMarkers("move",l),applyRemoveOperation(l.start,l.end.offset-l.start.offset,this.batch,this.model)}merge(o){this._assertWriterUsedCorrectly();const n=o.nodeBefore,a=o.nodeAfter;if(this._addOperationForAffectedMarkers("merge",o),!(n instanceof Element$2))throw new CKEditorError("writer-merge-no-element-before",this);if(!(a instanceof Element$2))throw new CKEditorError("writer-merge-no-element-after",this);o.root.document?this._merge(o):this._mergeDetached(o)}createPositionFromPath(o,n,a){return this.model.createPositionFromPath(o,n,a)}createPositionAt(o,n){return this.model.createPositionAt(o,n)}createPositionAfter(o){return this.model.createPositionAfter(o)}createPositionBefore(o){return this.model.createPositionBefore(o)}createRange(o,n){return this.model.createRange(o,n)}createRangeIn(o){return this.model.createRangeIn(o)}createRangeOn(o){return this.model.createRangeOn(o)}createSelection(...o){return this.model.createSelection(...o)}_mergeDetached(o){const n=o.nodeBefore,a=o.nodeAfter;this.move(Range._createIn(a),Position._createAt(n,"end")),this.remove(a)}_merge(o){const n=Position._createAt(o.nodeBefore,"end"),a=Position._createAt(o.nodeAfter,0),l=o.root.document.graveyard,c=new Position(l,[0]),u=o.root.document.version,d=new MergeOperation(a,o.nodeAfter.maxOffset,n,c,u);this.batch.addOperation(d),this.model.applyOperation(d)}rename(o,n){if(this._assertWriterUsedCorrectly(),!(o instanceof Element$2))throw new CKEditorError("writer-rename-not-element-instance",this);const a=o.root.document?o.root.document.version:null,l=new RenameOperation(Position._createBefore(o),o.name,n,a);this.batch.addOperation(l),this.model.applyOperation(l)}split(o,n){this._assertWriterUsedCorrectly();let a=o.parent;if(!a.parent)throw new CKEditorError("writer-split-element-no-parent",this);if(n||(n=a.parent),!o.parent.getAncestors({includeSelf:!0}).includes(n))throw new CKEditorError("writer-split-invalid-limit-element",this);let l,c;do{const u=a.root.document?a.root.document.version:null,d=a.maxOffset-o.offset,h=SplitOperation.getInsertionPosition(o),f=new SplitOperation(o,d,h,null,u);this.batch.addOperation(f),this.model.applyOperation(f),!l&&!c&&(l=a,c=o.parent.nextSibling),o=this.createPositionAfter(o.parent),a=o.parent}while(a!==n);return{position:o,range:new Range(Position._createAt(l,"end"),Position._createAt(c,0))}}wrap(o,n){if(this._assertWriterUsedCorrectly(),!o.isFlat)throw new CKEditorError("writer-wrap-range-not-flat",this);const a=n instanceof Element$2?n:new Element$2(n);if(a.childCount>0)throw new CKEditorError("writer-wrap-element-not-empty",this);if(a.parent!==null)throw new CKEditorError("writer-wrap-element-attached",this);this.insert(a,o.start);const l=new Range(o.start.getShiftedBy(1),o.end.getShiftedBy(1));this.move(l,Position._createAt(a,0))}unwrap(o){if(this._assertWriterUsedCorrectly(),o.parent===null)throw new CKEditorError("writer-unwrap-element-no-parent",this);this.move(Range._createIn(o),this.createPositionAfter(o)),this.remove(o)}addMarker(o,n){if(this._assertWriterUsedCorrectly(),!n||typeof n.usingOperation!="boolean")throw new CKEditorError("writer-addmarker-no-usingoperation",this);const a=n.usingOperation,l=n.range,c=n.affectsData===void 0?!1:n.affectsData;if(this.model.markers.has(o))throw new CKEditorError("writer-addmarker-marker-exists",this);if(!l)throw new CKEditorError("writer-addmarker-no-range",this);return a?(applyMarkerOperation(this,o,null,l,c),this.model.markers.get(o)):this.model.markers._set(o,l,a,c)}updateMarker(o,n){this._assertWriterUsedCorrectly();const a=typeof o=="string"?o:o.name,l=this.model.markers.get(a);if(!l)throw new CKEditorError("writer-updatemarker-marker-not-exists",this);if(!n){logWarning("writer-updatemarker-reconvert-using-editingcontroller",{markerName:a}),this.model.markers._refresh(l);return}const c=typeof n.usingOperation=="boolean",u=typeof n.affectsData=="boolean",d=u?n.affectsData:l.affectsData;if(!c&&!n.range&&!u)throw new CKEditorError("writer-updatemarker-wrong-options",this);const h=l.getRange(),f=n.range?n.range:h;if(c&&n.usingOperation!==l.managedUsingOperations){n.usingOperation?applyMarkerOperation(this,a,null,f,d):(applyMarkerOperation(this,a,h,null,d),this.model.markers._set(a,f,void 0,d));return}l.managedUsingOperations?applyMarkerOperation(this,a,h,f,d):this.model.markers._set(a,f,void 0,d)}removeMarker(o){this._assertWriterUsedCorrectly();const n=typeof o=="string"?o:o.name;if(!this.model.markers.has(n))throw new CKEditorError("writer-removemarker-no-marker",this);const a=this.model.markers.get(n);if(!a.managedUsingOperations){this.model.markers._remove(n);return}const l=a.getRange();applyMarkerOperation(this,n,l,null,a.affectsData)}addRoot(o,n="$root"){this._assertWriterUsedCorrectly();const a=this.model.document.getRoot(o);if(a&&a.isAttached())throw new CKEditorError("writer-addroot-root-exists",this);const l=this.model.document,c=new RootOperation(o,n,!0,l,l.version);return this.batch.addOperation(c),this.model.applyOperation(c),this.model.document.getRoot(o)}detachRoot(o){this._assertWriterUsedCorrectly();const n=typeof o=="string"?this.model.document.getRoot(o):o;if(!n||!n.isAttached())throw new CKEditorError("writer-detachroot-no-root",this);for(const c of this.model.markers)c.getRange().root===n&&this.removeMarker(c);for(const c of n.getAttributeKeys())this.removeAttribute(c,n);this.remove(this.createRangeIn(n));const a=this.model.document,l=new RootOperation(n.rootName,n.name,!1,a,a.version);this.batch.addOperation(l),this.model.applyOperation(l)}setSelection(...o){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...o)}setSelectionFocus(o,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(o,n)}setSelectionAttribute(o,n){if(this._assertWriterUsedCorrectly(),typeof o=="string")this._setSelectionAttribute(o,n);else for(const[a,l]of toMap(o))this._setSelectionAttribute(a,l)}removeSelectionAttribute(o){if(this._assertWriterUsedCorrectly(),typeof o=="string")this._removeSelectionAttribute(o);else for(const n of o)this._removeSelectionAttribute(n)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(o){this.model.document.selection._restoreGravity(o)}_setSelectionAttribute(o,n){const a=this.model.document.selection;if(a.isCollapsed&&a.anchor.parent.isEmpty){const l=DocumentSelection._getStoreAttributeKey(o);this.setAttribute(l,n,a.anchor.parent)}a._setAttribute(o,n)}_removeSelectionAttribute(o){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const a=DocumentSelection._getStoreAttributeKey(o);this.removeAttribute(a,n.anchor.parent)}n._removeAttribute(o)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new CKEditorError("writer-incorrect-use",this)}_addOperationForAffectedMarkers(o,n){for(const a of this.model.markers){if(!a.managedUsingOperations)continue;const l=a.getRange();let c=!1;if(o==="move"){const u=n;c=u.containsPosition(l.start)||u.start.isEqual(l.start)||u.containsPosition(l.end)||u.end.isEqual(l.end)}else{const u=n,d=u.nodeBefore,h=u.nodeAfter,f=l.start.parent==d&&l.start.isAtEnd,g=l.end.parent==h&&l.end.offset==0,p=l.end.nodeAfter==h,v=l.start.nodeAfter==h;c=f||g||p||v}c&&this.updateMarker(a.name,{range:l})}}}function setAttributeOnRange(s,o,n,a){const l=s.model,c=l.document;let u=a.start,d,h,f;for(const p of a.getWalker({shallow:!0}))f=p.item.getAttribute(o),d&&h!=f&&(h!=n&&g(),u=d),d=p.nextPosition,h=f;d instanceof Position&&d!=u&&h!=n&&g();function g(){const p=new Range(u,d),v=p.root.document?c.version:null,b=new AttributeOperation(p,o,h,n,v);s.batch.addOperation(b),l.applyOperation(b)}}function setAttributeOnItem(s,o,n,a){const l=s.model,c=l.document,u=a.getAttribute(o);let d,h;if(u!=n){if(a.root===a){const g=a.document?c.version:null;h=new RootAttributeOperation(a,o,u,n,g)}else{d=new Range(Position._createBefore(a),s.createPositionAfter(a));const g=d.root.document?c.version:null;h=new AttributeOperation(d,o,u,n,g)}s.batch.addOperation(h),l.applyOperation(h)}}function applyMarkerOperation(s,o,n,a,l){const c=s.model,u=c.document,d=new MarkerOperation(o,n,a,c.markers,!!l,u.version);s.batch.addOperation(d),c.applyOperation(d)}function applyRemoveOperation(s,o,n,a){let l;if(s.root.document){const c=a.document,u=new Position(c.graveyard,[0]);l=new MoveOperation(s,o,u,c.version)}else l=new DetachOperation(s,o);n.addOperation(l),a.applyOperation(l)}function isSameTree(s,o){return s===o||s instanceof RootElement&&o instanceof RootElement}function deleteContent(s,o,n={}){if(o.isCollapsed)return;const a=o.getFirstRange();if(a.root.rootName=="$graveyard")return;const l=s.schema;s.change(c=>{if(!n.doNotResetEntireContent&&shouldEntireContentBeReplacedWithParagraph(l,o)){replaceEntireContentWithParagraph(c,o);return}const u={};if(!n.doNotAutoparagraph){const f=o.getSelectedElement();f&&Object.assign(u,l.getAttributesWithProperty(f,"copyOnReplace",!0))}const[d,h]=getLivePositionsForSelectedBlocks(a);d.isTouching(h)||c.remove(c.createRange(d,h)),n.leaveUnmerged||(mergeBranches(c,d,h),l.removeDisallowedAttributes(d.parent.getChildren(),c)),collapseSelectionAt(c,o,d),!n.doNotAutoparagraph&&shouldAutoparagraph(l,d)&&insertParagraph(c,d,o,u),d.detach(),h.detach()})}function getLivePositionsForSelectedBlocks(s){const o=s.root.document.model,n=s.start;let a=s.end;if(o.hasContent(s,{ignoreMarkers:!0})){const l=getParentBlock(a);if(l&&a.isTouching(o.createPositionAt(l,0))){const c=o.createSelection(s);o.modifySelection(c,{direction:"backward"});const u=c.getLastPosition(),d=o.createRange(u,a);o.hasContent(d,{ignoreMarkers:!0})||(a=u)}}return[LivePosition.fromPosition(n,"toPrevious"),LivePosition.fromPosition(a,"toNext")]}function getParentBlock(s){const o=s.parent,n=o.root.document.model.schema,a=o.getAncestors({parentFirst:!0,includeSelf:!0});for(const l of a){if(n.isLimit(l))return null;if(n.isBlock(l))return l}}function mergeBranches(s,o,n){const a=s.model;if(!checkShouldMerge(s.model.schema,o,n))return;const[l,c]=getAncestorsJustBelowCommonAncestor(o,n);!l||!c||(!a.hasContent(l,{ignoreMarkers:!0})&&a.hasContent(c,{ignoreMarkers:!0})?mergeBranchesRight(s,o,n,l.parent):mergeBranchesLeft(s,o,n,l.parent))}function mergeBranchesLeft(s,o,n,a){const l=o.parent,c=n.parent;if(!(l==a||c==a)){for(o=s.createPositionAfter(l),n=s.createPositionBefore(c),n.isEqual(o)||s.insert(c,o),s.merge(o);n.parent.isEmpty;){const u=n.parent;n=s.createPositionBefore(u),s.remove(u)}checkShouldMerge(s.model.schema,o,n)&&mergeBranchesLeft(s,o,n,a)}}function mergeBranchesRight(s,o,n,a){const l=o.parent,c=n.parent;if(!(l==a||c==a)){for(o=s.createPositionAfter(l),n=s.createPositionBefore(c),n.isEqual(o)||s.insert(l,n);o.parent.isEmpty;){const u=o.parent;o=s.createPositionBefore(u),s.remove(u)}n=s.createPositionBefore(c),mergeRight(s,n),checkShouldMerge(s.model.schema,o,n)&&mergeBranchesRight(s,o,n,a)}}function mergeRight(s,o){const n=o.nodeBefore,a=o.nodeAfter;n.name!=a.name&&s.rename(n,a.name),s.clearAttributes(n),s.setAttributes(Object.fromEntries(a.getAttributes()),n),s.merge(o)}function checkShouldMerge(s,o,n){const a=o.parent,l=n.parent;return a==l||s.isLimit(a)||s.isLimit(l)?!1:isCrossingLimitElement(o,n,s)}function getAncestorsJustBelowCommonAncestor(s,o){const n=s.getAncestors(),a=o.getAncestors();let l=0;for(;n[l]&&n[l]==a[l];)l++;return[n[l],a[l]]}function shouldAutoparagraph(s,o){const n=s.checkChild(o,"$text"),a=s.checkChild(o,"paragraph");return!n&&a}function isCrossingLimitElement(s,o,n){const a=new Range(s,o);for(const l of a.getWalker())if(n.isLimit(l.item))return!1;return!0}function insertParagraph(s,o,n,a={}){const l=s.createElement("paragraph");s.model.schema.setAllowedAttributes(l,a,s),s.insert(l,o),collapseSelectionAt(s,n,s.createPositionAt(l,0))}function replaceEntireContentWithParagraph(s,o){const n=s.model.schema.getLimitElement(o);s.remove(s.createRangeIn(n)),insertParagraph(s,s.createPositionAt(n,0),o)}function shouldEntireContentBeReplacedWithParagraph(s,o){const n=s.getLimitElement(o);if(!o.containsEntireContent(n))return!1;const a=o.getFirstRange();return a.start.parent==a.end.parent?!1:s.checkChild(n,"paragraph")}function collapseSelectionAt(s,o,n){o instanceof DocumentSelection?s.setSelection(n):o.setTo(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedContent(s,o){return s.change(n=>{const a=n.createDocumentFragment(),l=o.getFirstRange();if(!l||l.isCollapsed)return a;const c=l.start.root,u=l.start.getCommonPath(l.end),d=c.getNodeByPath(u);let h;l.start.parent==l.end.parent?h=l:h=n.createRange(n.createPositionAt(d,l.start.path[u.length]),n.createPositionAt(d,l.end.path[u.length]+1));const f=h.end.offset-h.start.offset;for(const g of h.getItems({shallow:!0}))g.is("$textProxy")?n.appendText(g.data,g.getAttributes(),a):n.append(n.cloneElement(g,!0),a);if(h!=l){const g=l._getTransformedByMove(h.start,n.createPositionAt(a,0),f)[0],p=n.createRange(n.createPositionAt(a,0),g.start),v=n.createRange(g.end,n.createPositionAt(a,"end"));removeRangeContent(v,n),removeRangeContent(p,n)}return a})}function removeRangeContent(s,o){const n=[];Array.from(s.getItems({direction:"backward"})).map(a=>o.createRangeOn(a)).filter(a=>(a.start.isAfter(s.start)||a.start.isEqual(s.start))&&(a.end.isBefore(s.end)||a.end.isEqual(s.end))).forEach(a=>{n.push(a.start.parent),o.remove(a)}),n.forEach(a=>{let l=a;for(;l.parent&&l.isEmpty;){const c=o.createRangeOn(l);l=l.parent,o.remove(c)}})}function insertContent(s,o,n){return s.change(a=>{const l=n||s.document.selection;l.isCollapsed||s.deleteContent(l,{doNotAutoparagraph:!0});const c=new Insertion(s,a,l.anchor),u=[];let d;if(o.is("documentFragment")){if(o.markers.size){const g=[];for(const[p,v]of o.markers){const{start:b,end:_}=v,w=b.isEqual(_);g.push({position:b,name:p,isCollapsed:w},{position:_,name:p,isCollapsed:w})}g.sort(({position:p},{position:v})=>p.isBefore(v)?1:-1);for(const{position:p,name:v,isCollapsed:b}of g){let _=null,w=null;const x=p.parent===o&&p.isAtStart,S=p.parent===o&&p.isAtEnd;!x&&!S?(_=a.createElement("$marker"),a.insert(_,p)):b&&(w=x?"start":"end"),u.push({name:v,element:_,collapsed:w})}}d=o.getChildren()}else d=[o];c.handleNodes(d);let h=c.getSelectionRange();if(o.is("documentFragment")&&u.length){const g=h?LiveRange.fromRange(h):null,p={};for(let v=u.length-1;v>=0;v--){const{name:b,element:_,collapsed:w}=u[v],x=!p[b];if(x&&(p[b]=[]),_){const S=a.createPositionAt(_,"before");p[b].push(S),a.remove(_)}else{const S=c.getAffectedRange();if(!S){w&&p[b].push(c.position);continue}w?p[b].push(S[w]):p[b].push(x?S.start:S.end)}}for(const[v,[b,_]]of Object.entries(p))b&&_&&b.root===_.root&&b.root.document&&!a.model.markers.has(v)&&a.addMarker(v,{usingOperation:!0,affectsData:!0,range:new Range(b,_)});g&&(h=g.toRange(),g.detach())}/* istanbul ignore else -- @preserve */h&&(l instanceof DocumentSelection?a.setSelection(h):l.setTo(h));const f=c.getAffectedRange()||s.createRange(l.anchor);return c.destroy(),f})}class Insertion{constructor(o,n,a){E(this,"model");E(this,"writer");E(this,"position");E(this,"canMergeWith");E(this,"schema");E(this,"_documentFragment");E(this,"_documentFragmentPosition");E(this,"_firstNode",null);E(this,"_lastNode",null);E(this,"_lastAutoParagraph",null);E(this,"_filterAttributesOf",[]);E(this,"_affectedStart",null);E(this,"_affectedEnd",null);E(this,"_nodeToSelect",null);this.model=o,this.writer=n,this.position=a,this.canMergeWith=new Set([this.position.parent]),this.schema=o.schema,this._documentFragment=n.createDocumentFragment(),this._documentFragmentPosition=n.createPositionAt(this._documentFragment,0)}handleNodes(o){for(const n of Array.from(o))this._handleNode(n);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(o){const n=this.writer.createPositionAfter(this._lastNode),a=this.writer.createPositionAfter(o);if(a.isAfter(n)){this._lastNode=o;/* istanbul ignore if -- @preserve */if(this.position.parent!=o||!this.position.isAtEnd)throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=a,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Range._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Range(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(o){if(!this._checkAndSplitToAllowedPosition(o)){this.schema.isObject(o)||this._handleDisallowedNode(o);return}this._appendToFragment(o),this._firstNode||(this._firstNode=o),this._lastNode=o}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const o=LivePosition.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=o.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=o.toPosition(),o.detach()}_handleDisallowedNode(o){o.is("element")&&this.handleNodes(o.getChildren())}_appendToFragment(o){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,o))throw new CKEditorError("insertcontent-wrong-position",this,{node:o,position:this.position});this.writer.insert(o,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(o.offsetSize),this.schema.isObject(o)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=o:this._nodeToSelect=null,this._filterAttributesOf.push(o)}_setAffectedBoundaries(o){this._affectedStart||(this._affectedStart=LivePosition.fromPosition(o,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(o))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=LivePosition.fromPosition(o,"toNext"))}_mergeOnLeft(){const o=this._firstNode;if(!(o instanceof Element$2)||!this._canMergeLeft(o))return;const n=LivePosition._createBefore(o);n.stickiness="toNext";const a=LivePosition.fromPosition(this.position,"toNext");this._affectedStart.isEqual(n)&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(n.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=n.nodeBefore,this._lastNode=n.nodeBefore),this.writer.merge(n),n.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(n.nodeBefore,"end","toNext")),this.position=a.toPosition(),a.detach(),this._filterAttributesOf.push(this.position.parent),n.detach()}_mergeOnRight(){const o=this._lastNode;if(!(o instanceof Element$2)||!this._canMergeRight(o))return;const n=LivePosition._createAfter(o);n.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(n))throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=Position._createAt(n.nodeBefore,"end");const a=LivePosition.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(n)&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(n.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=n.nodeBefore,this._lastNode=n.nodeBefore),this.writer.merge(n),n.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(n.nodeBefore,0,"toPrevious")),this.position=a.toPosition(),a.detach(),this._filterAttributesOf.push(this.position.parent),n.detach()}_canMergeLeft(o){const n=o.previousSibling;return n instanceof Element$2&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(n,o)}_canMergeRight(o){const n=o.nextSibling;return n instanceof Element$2&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(o,n)}_insertAutoParagraph(){this._insertPartialFragment();const o=this.writer.createElement("paragraph");this.writer.insert(o,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=o,this.position=this.writer.createPositionAt(o,0)}_checkAndSplitToAllowedPosition(o){const n=this._getAllowedIn(this.position.parent,o);if(!n)return!1;for(n!=this.position.parent&&this._insertPartialFragment();n!=this.position.parent;)if(this.position.isAtStart){const a=this.position.parent;this.position=this.writer.createPositionBefore(a),a.isEmpty&&a.parent===n&&this.writer.remove(a)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const a=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=a,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,o)||this._insertAutoParagraph(),!0}_getAllowedIn(o,n){return this.schema.checkChild(o,n)||this.schema.checkChild(o,"paragraph")&&this.schema.checkChild("paragraph",n)?o:this.schema.isLimit(o)?null:this._getAllowedIn(o.parent,n)}}function insertObject(s,o,n,a={}){if(!s.schema.isObject(o))throw new CKEditorError("insertobject-element-not-an-object",s,{object:o});const l=n||s.document.selection;let c=l;a.findOptimalPosition&&s.schema.isBlock(o)&&(c=s.createSelection(s.schema.findOptimalInsertionRange(l,a.findOptimalPosition)));const u=first(l.getSelectedBlocks()),d={};return u&&Object.assign(d,s.schema.getAttributesWithProperty(u,"copyOnReplace",!0)),s.change(h=>{c.isCollapsed||s.deleteContent(c,{doNotAutoparagraph:!0});let f=o;const g=c.anchor.parent;!s.schema.checkChild(g,o)&&s.schema.checkChild(g,"paragraph")&&s.schema.checkChild("paragraph",o)&&(f=h.createElement("paragraph"),h.insert(o,f)),s.schema.setAllowedAttributes(f,d,h);const p=s.insertContent(f,c);return p.isCollapsed||a.setSelection&&updateSelection(h,o,a.setSelection,d),p})}function updateSelection(s,o,n,a){const l=s.model;if(n=="on"){s.setSelection(o,"on");return}if(n!="after")throw new CKEditorError("insertobject-invalid-place-parameter-value",l);let c=o.nextSibling;if(l.schema.isInline(o)){s.setSelection(o,"after");return}!(c&&l.schema.checkChild(c,"$text"))&&l.schema.checkChild(o.parent,"paragraph")&&(c=s.createElement("paragraph"),l.schema.setAllowedAttributes(c,a,s),l.insertContent(c,s.createPositionAfter(o))),c&&s.setSelection(c,0)}const wordBoundaryCharacters=' ,.?!:;"-()';function modifySelection(s,o,n={}){const a=s.schema,l=n.direction!="backward",c=n.unit?n.unit:"character",u=!!n.treatEmojiAsSingleUnit,d=o.focus,h=new TreeWalker({boundaries:getSearchRange(d,l),singleCharacters:!0,direction:l?"forward":"backward"}),f={walker:h,schema:a,isForward:l,unit:c,treatEmojiAsSingleUnit:u};let g;for(;g=h.next();){if(g.done)return;const p=tryExtendingTo(f,g.value);if(p){o instanceof DocumentSelection?s.change(v=>{v.setSelectionFocus(p)}):o.setFocus(p);return}}}function tryExtendingTo(s,o){const{isForward:n,walker:a,unit:l,schema:c,treatEmojiAsSingleUnit:u}=s,{type:d,item:h,nextPosition:f}=o;if(d=="text")return s.unit==="word"?getCorrectWordBreakPosition(a,n):getCorrectPosition(a,l,u);if(d==(n?"elementStart":"elementEnd")){if(c.isSelectable(h))return Position._createAt(h,n?"after":"before");if(c.checkChild(f,"$text"))return f}else{if(c.isLimit(h)){a.skip(()=>!0);return}if(c.checkChild(f,"$text"))return f}}function getCorrectPosition(s,o,n){const a=s.position.textNode;if(a){const l=a.data;let c=s.position.offset-a.startOffset;for(;isInsideSurrogatePair(l,c)||o=="character"&&isInsideCombinedSymbol(l,c)||n&&isInsideEmojiSequence(l,c);)s.next(),c=s.position.offset-a.startOffset}return s.position}function getCorrectWordBreakPosition(s,o){let n=s.position.textNode;for(n||(n=o?s.position.nodeAfter:s.position.nodeBefore);n&&n.is("$text");){const a=s.position.offset-n.startOffset;if(isAtNodeBoundary(n,a,o))n=o?s.position.nodeAfter:s.position.nodeBefore;else{if(isAtWordBoundary(n.data,a,o))break;s.next()}}return s.position}function getSearchRange(s,o){const n=s.root,a=Position._createAt(n,o?"end":0);return o?new Range(s,a):new Range(a,s)}function isAtWordBoundary(s,o,n){const a=o+(n?0:-1);return wordBoundaryCharacters.includes(s.charAt(a))}function isAtNodeBoundary(s,o,n){return o===(n?s.offsetSize:0)}let Model$2=class extends ObservableMixin(){constructor(){super();E(this,"markers");E(this,"document");E(this,"schema");E(this,"_pendingChanges");E(this,"_currentWriter");this.markers=new MarkerCollection,this.document=new Document(this),this.schema=new Schema,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(n=>this.decorate(n)),this.on("applyOperation",(n,a)=>{a[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),injectSelectionPostFixer(this),this.document.registerPostFixer(autoParagraphEmptyRoots),this.on("insertContent",(n,[a,l])=>{n.return=insertContent(this,a,l)}),this.on("insertObject",(n,[a,l,c])=>{n.return=insertObject(this,a,l,c)}),this.on("canEditAt",n=>{const a=!this.document.isReadOnly;n.return=a,a||n.stop()})}change(n){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Batch,callback:n}),this._runPendingChanges()[0]):n(this._currentWriter)}catch(a){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(a,this)}}enqueueChange(n,a){try{n?typeof n=="function"?(a=n,n=new Batch):n instanceof Batch||(n=new Batch(n)):n=new Batch,this._pendingChanges.push({batch:n,callback:a}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(l){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(l,this)}}applyOperation(n){n._execute()}insertContent(n,a,l,...c){const u=normalizeSelectable(a,l);return this.fire("insertContent",[n,u,l,...c])}insertObject(n,a,l,c,...u){const d=normalizeSelectable(a,l);return this.fire("insertObject",[n,d,c,c,...u])}deleteContent(n,a){deleteContent(this,n,a)}modifySelection(n,a){modifySelection(this,n,a)}getSelectedContent(n){return getSelectedContent(this,n)}hasContent(n,a={}){const l=n instanceof Range?n:Range._createIn(n);if(l.isCollapsed)return!1;const{ignoreWhitespaces:c=!1,ignoreMarkers:u=!1}=a;if(!u){for(const d of this.markers.getMarkersIntersectingRange(l))if(d.affectsData)return!0}for(const d of l.getItems())if(this.schema.isContent(d))if(d.is("$textProxy"))if(c){if(d.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(n){const a=normalizeSelectable(n);return this.fire("canEditAt",[a])}createPositionFromPath(n,a,l){return new Position(n,a,l)}createPositionAt(n,a){return Position._createAt(n,a)}createPositionAfter(n){return Position._createAfter(n)}createPositionBefore(n){return Position._createBefore(n)}createRange(n,a){return new Range(n,a)}createRangeIn(n){return Range._createIn(n)}createRangeOn(n){return Range._createOn(n)}createSelection(...n){return new Selection(...n)}createBatch(n){return new Batch(n)}createOperationFromJSON(n){return OperationFactory.fromJSON(n,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const n=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const a=this._pendingChanges[0].batch;this._currentWriter=new Writer(this,a);const l=this._pendingChanges[0].callback(this._currentWriter);n.push(l),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return n}};function normalizeSelectable(s,o){if(s)return s instanceof Selection||s instanceof DocumentSelection?s:s instanceof Node$1$1?o||o===0?new Selection(s,o):s.is("rootElement")?new Selection(s,"in"):new Selection(s,"on"):new Selection(s)}class ClickObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType","click")}onDomEvent(n){this.fire(n.type,n)}}class MouseObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(n){this.fire(n.type,n)}}class TouchObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(n){this.fire(n.type,n)}}class UpcastWriter{constructor(o){E(this,"document");this.document=o}createDocumentFragment(o){return new DocumentFragment$1(this.document,o)}createElement(o,n,a){return new Element$1(this.document,o,n,a)}createText(o){return new Text$1(this.document,o)}clone(o,n=!1){return o._clone(n)}appendChild(o,n){return n._appendChild(o)}insertChild(o,n,a){return a._insertChild(o,n)}removeChildren(o,n,a){return a._removeChildren(o,n)}remove(o){const n=o.parent;return n?this.removeChildren(n.getChildIndex(o),1,n):[]}replace(o,n){const a=o.parent;if(a){const l=a.getChildIndex(o);return this.removeChildren(l,1,a),this.insertChild(l,n,a),!0}return!1}unwrapElement(o){const n=o.parent;if(n){const a=n.getChildIndex(o);this.remove(o),this.insertChild(a,o.getChildren(),n)}}rename(o,n){const a=new Element$1(this.document,o,n.getAttributes(),n.getChildren());return this.replace(n,a)?a:null}setAttribute(o,n,a){a._setAttribute(o,n)}removeAttribute(o,n){n._removeAttribute(o)}addClass(o,n){n._addClass(o)}removeClass(o,n){n._removeClass(o)}setStyle(o,n,a){isPlainObject$1(o)&&a===void 0?n._setStyle(o):a._setStyle(o,n)}removeStyle(o,n){n._removeStyle(o)}setCustomProperty(o,n,a){a._setCustomProperty(o,n)}removeCustomProperty(o,n){return n._removeCustomProperty(o)}createPositionAt(o,n){return Position$1._createAt(o,n)}createPositionAfter(o){return Position$1._createAfter(o)}createPositionBefore(o){return Position$1._createBefore(o)}createRange(o,n){return new Range$1(o,n)}createRangeOn(o){return Range$1._createOn(o)}createRangeIn(o){return Range$1._createIn(o)}createSelection(...o){return new Selection$1(...o)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_COLOR_REGEXP=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,RGB_COLOR_REGEXP=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,RGBA_COLOR_REGEXP=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,HSL_COLOR_REGEXP=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,HSLA_COLOR_REGEXP=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,CSS_SHORTHAND_VALUE_REGEXP=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,COLOR_NAMES=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function isColor(s){return s.startsWith("#")?HEX_COLOR_REGEXP.test(s):s.startsWith("rgb")?RGB_COLOR_REGEXP.test(s)||RGBA_COLOR_REGEXP.test(s):s.startsWith("hsl")?HSL_COLOR_REGEXP.test(s)||HSLA_COLOR_REGEXP.test(s):COLOR_NAMES.has(s.toLowerCase())}const lineStyleValues=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function isLineStyle(s){return lineStyleValues.includes(s)}const lengthRegExp=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function isLength(s){return lengthRegExp.test(s)}const PERCENTAGE_VALUE_REGEXP=/^[+-]?[0-9]*([.][0-9]+)?%$/;function isPercentage(s){return PERCENTAGE_VALUE_REGEXP.test(s)}const repeatValues=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function isRepeat(s){return repeatValues.includes(s)}const positionValues=["center","top","bottom","left","right"];function isPosition(s){return positionValues.includes(s)}const attachmentValues=["fixed","scroll","local"];function isAttachment(s){return attachmentValues.includes(s)}const urlRegExp=/^url\(/;function isURL(s){return urlRegExp.test(s)}function getBoxSidesValues(s=""){if(s==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const o=getShorthandValues(s),n=o[0],a=o[2]||n,l=o[1]||n,c=o[3]||l;return{top:n,bottom:a,right:l,left:c}}function getBoxSidesValueReducer(s){return o=>{const{top:n,right:a,bottom:l,left:c}=o,u=[];return[n,a,c,l].every(d=>!!d)?u.push([s,getBoxSidesShorthandValue(o)]):(n&&u.push([s+"-top",n]),a&&u.push([s+"-right",a]),l&&u.push([s+"-bottom",l]),c&&u.push([s+"-left",c])),u}}function getBoxSidesShorthandValue({top:s,right:o,bottom:n,left:a}){const l=[];return a!==o?l.push(s,o,n,a):n!==s?l.push(s,o,n):o!==s?l.push(s,o):l.push(s),l.join(" ")}function getPositionShorthandNormalizer(s){return o=>({path:s,value:getBoxSidesValues(o)})}function getShorthandValues(s){const o=s.trim().slice(0,1500).matchAll(CSS_SHORTHAND_VALUE_REGEXP);return Array.from(o).map(n=>n[0])}function addBackgroundRules(s){s.setNormalizer("background",getBackgroundNormalizer()),s.setNormalizer("background-color",getBackgroundColorNormalizer()),s.setReducer("background",getBackgroundReducer()),s.setStyleRelation("background",["background-color"])}function getBackgroundNormalizer(){return s=>{const o={},n=getShorthandValues(s);for(const a of n)isRepeat(a)?(o.repeat=o.repeat||[],o.repeat.push(a)):isPosition(a)?(o.position=o.position||[],o.position.push(a)):isAttachment(a)?o.attachment=a:isColor(a)?o.color=a:isURL(a)&&(o.image=a);return{path:"background",value:o}}}function getBackgroundColorNormalizer(){return s=>({path:"background.color",value:s})}function getBackgroundReducer(){return s=>{const o=[];return o.push(["background-color",s.color]),o}}function addBorderRules(s){s.setNormalizer("border",getBorderNormalizer()),s.setNormalizer("border-top",getBorderPositionNormalizer("top")),s.setNormalizer("border-right",getBorderPositionNormalizer("right")),s.setNormalizer("border-bottom",getBorderPositionNormalizer("bottom")),s.setNormalizer("border-left",getBorderPositionNormalizer("left")),s.setNormalizer("border-color",getBorderPropertyNormalizer("color")),s.setNormalizer("border-width",getBorderPropertyNormalizer("width")),s.setNormalizer("border-style",getBorderPropertyNormalizer("style")),s.setNormalizer("border-top-color",getBorderPropertyPositionNormalizer("color","top")),s.setNormalizer("border-top-style",getBorderPropertyPositionNormalizer("style","top")),s.setNormalizer("border-top-width",getBorderPropertyPositionNormalizer("width","top")),s.setNormalizer("border-right-color",getBorderPropertyPositionNormalizer("color","right")),s.setNormalizer("border-right-style",getBorderPropertyPositionNormalizer("style","right")),s.setNormalizer("border-right-width",getBorderPropertyPositionNormalizer("width","right")),s.setNormalizer("border-bottom-color",getBorderPropertyPositionNormalizer("color","bottom")),s.setNormalizer("border-bottom-style",getBorderPropertyPositionNormalizer("style","bottom")),s.setNormalizer("border-bottom-width",getBorderPropertyPositionNormalizer("width","bottom")),s.setNormalizer("border-left-color",getBorderPropertyPositionNormalizer("color","left")),s.setNormalizer("border-left-style",getBorderPropertyPositionNormalizer("style","left")),s.setNormalizer("border-left-width",getBorderPropertyPositionNormalizer("width","left")),s.setExtractor("border-top",getBorderPositionExtractor("top")),s.setExtractor("border-right",getBorderPositionExtractor("right")),s.setExtractor("border-bottom",getBorderPositionExtractor("bottom")),s.setExtractor("border-left",getBorderPositionExtractor("left")),s.setExtractor("border-top-color","border.color.top"),s.setExtractor("border-right-color","border.color.right"),s.setExtractor("border-bottom-color","border.color.bottom"),s.setExtractor("border-left-color","border.color.left"),s.setExtractor("border-top-width","border.width.top"),s.setExtractor("border-right-width","border.width.right"),s.setExtractor("border-bottom-width","border.width.bottom"),s.setExtractor("border-left-width","border.width.left"),s.setExtractor("border-top-style","border.style.top"),s.setExtractor("border-right-style","border.style.right"),s.setExtractor("border-bottom-style","border.style.bottom"),s.setExtractor("border-left-style","border.style.left"),s.setReducer("border-color",getBoxSidesValueReducer("border-color")),s.setReducer("border-style",getBoxSidesValueReducer("border-style")),s.setReducer("border-width",getBoxSidesValueReducer("border-width")),s.setReducer("border-top",getBorderPositionReducer("top")),s.setReducer("border-right",getBorderPositionReducer("right")),s.setReducer("border-bottom",getBorderPositionReducer("bottom")),s.setReducer("border-left",getBorderPositionReducer("left")),s.setReducer("border",getBorderReducer()),s.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),s.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),s.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),s.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),s.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),s.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),s.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),s.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function getBorderNormalizer(){return s=>{const{color:o,style:n,width:a}=normalizeBorderShorthand(s);return{path:"border",value:{color:getBoxSidesValues(o),style:getBoxSidesValues(n),width:getBoxSidesValues(a)}}}}function getBorderPositionNormalizer(s){return o=>{const{color:n,style:a,width:l}=normalizeBorderShorthand(o),c={};return n!==void 0&&(c.color={[s]:n}),a!==void 0&&(c.style={[s]:a}),l!==void 0&&(c.width={[s]:l}),{path:"border",value:c}}}function getBorderPropertyNormalizer(s){return o=>({path:"border",value:toBorderPropertyShorthand(o,s)})}function toBorderPropertyShorthand(s,o){return{[o]:getBoxSidesValues(s)}}function getBorderPropertyPositionNormalizer(s,o){return n=>({path:"border",value:{[s]:{[o]:n}}})}function getBorderPositionExtractor(s){return(o,n)=>{if(n.border)return extractBorderPosition(n.border,s)}}function extractBorderPosition(s,o){const n={};return s.width&&s.width[o]&&(n.width=s.width[o]),s.style&&s.style[o]&&(n.style=s.style[o]),s.color&&s.color[o]&&(n.color=s.color[o]),n}function normalizeBorderShorthand(s){const o={},n=getShorthandValues(s);for(const a of n)isLength(a)||/thin|medium|thick/.test(a)?o.width=a:isLineStyle(a)?o.style=a:o.color=a;return o}function getBorderReducer(){return o=>{const n=extractBorderPosition(o,"top"),a=extractBorderPosition(o,"right"),l=extractBorderPosition(o,"bottom"),c=extractBorderPosition(o,"left"),u=[n,a,l,c],d={width:s(u,"width"),style:s(u,"style"),color:s(u,"color")},h=reduceBorderPosition(d,"all");return h.length?h:[...Object.entries(d).reduce((g,[p,v])=>(v&&(g.push([`border-${p}`,v]),u.forEach(b=>delete b[p])),g),[]),...reduceBorderPosition(n,"top"),...reduceBorderPosition(a,"right"),...reduceBorderPosition(l,"bottom"),...reduceBorderPosition(c,"left")]};function s(o,n){return o.map(a=>a[n]).reduce((a,l)=>a==l?a:null)}}function getBorderPositionReducer(s){return o=>reduceBorderPosition(o,s)}function reduceBorderPosition(s,o){const n=[];if(s&&s.width&&n.push("width"),s&&s.style&&n.push("style"),s&&s.color&&n.push("color"),n.length==3){const a=n.map(l=>s[l]).join(" ");return[o=="all"?["border",a]:[`border-${o}`,a]]}return o=="all"?[]:n.map(a=>[`border-${o}-${a}`,s[a]])}function addMarginRules(s){s.setNormalizer("margin",getPositionShorthandNormalizer("margin")),s.setNormalizer("margin-top",o=>({path:"margin.top",value:o})),s.setNormalizer("margin-right",o=>({path:"margin.right",value:o})),s.setNormalizer("margin-bottom",o=>({path:"margin.bottom",value:o})),s.setNormalizer("margin-left",o=>({path:"margin.left",value:o})),s.setReducer("margin",getBoxSidesValueReducer("margin")),s.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function addPaddingRules(s){s.setNormalizer("padding",getPositionShorthandNormalizer("padding")),s.setNormalizer("padding-top",o=>({path:"padding.top",value:o})),s.setNormalizer("padding-right",o=>({path:"padding.right",value:o})),s.setNormalizer("padding-bottom",o=>({path:"padding.bottom",value:o})),s.setNormalizer("padding-left",o=>({path:"padding.left",value:o})),s.setReducer("padding",getBoxSidesValueReducer("padding")),s.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Watchdog{constructor(o){E(this,"crashes",[]);E(this,"state","initializing");E(this,"_crashNumberLimit");E(this,"_now",Date.now);E(this,"_minimumNonErrorTimePeriod");E(this,"_boundErrorHandler");E(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof o.crashNumberLimit=="number"?o.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof o.minimumNonErrorTimePeriod=="number"?o.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=n=>{const a="error"in n?n.error:n.reason;a instanceof Error&&this._handleError(a,n)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(o,n){this._listeners[o]||(this._listeners[o]=[]),this._listeners[o].push(n)}off(o,n){this._listeners[o]=this._listeners[o].filter(a=>a!==n)}_fire(o,...n){const a=this._listeners[o]||[];for(const l of a)l.apply(this,[null,...n])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(o,n){if(this._shouldReactToError(o)){this.crashes.push({message:o.message,stack:o.stack,filename:n instanceof ErrorEvent?n.filename:void 0,lineno:n instanceof ErrorEvent?n.lineno:void 0,colno:n instanceof ErrorEvent?n.colno:void 0,date:this._now()});const a=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:o,causesRestart:a}),a?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(o){return o.is&&o.is("CKEditorError")&&o.context!==void 0&&o.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(o)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const o=this.crashes[this.crashes.length-1].date,n=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(o-n)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSubNodes(s,o=new Set){const n=[s],a=new Set;let l=0;for(;n.length>l;){const c=n[l++];if(!(a.has(c)||!shouldNodeBeIncluded(c)||o.has(c)))if(a.add(c),Symbol.iterator in c)try{for(const u of c)n.push(u)}catch{}else for(const u in c)u!=="defaultValue"&&n.push(c[u])}return a}function shouldNodeBeIncluded(s){const o=Object.prototype.toString.call(s),n=typeof s;return!(n==="number"||n==="boolean"||n==="string"||n==="symbol"||n==="function"||o==="[object Date]"||o==="[object RegExp]"||o==="[object Module]"||s===void 0||s===null||s._watchdogExcluded||s instanceof EventTarget||s instanceof Event)}function areConnectedThroughProperties(s,o,n=new Set){if(s===o&&isObject$5(s))return!0;const a=getSubNodes(s,n),l=getSubNodes(o,n);for(const c of a)if(l.has(c))return!0;return!1}function isObject$5(s){return typeof s=="object"&&s!==null}class EditorWatchdog extends Watchdog{constructor(n,a={}){super(a);E(this,"_editor",null);E(this,"_lifecyclePromise",null);E(this,"_throttledSave");E(this,"_data");E(this,"_lastDocumentVersion");E(this,"_elementOrData");E(this,"_initUsingData",!0);E(this,"_editables",{});E(this,"_config");E(this,"_excludedProps");this._throttledSave=throttle$2(this._save.bind(this),typeof a.saveInterval=="number"?a.saveInterval:5e3),n&&(this._creator=(l,c)=>n.create(l,c)),this._destructor=l=>l.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(n){this._creator=n}setDestructor(n){this._destructor=n}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(n=>{console.error("An error happened during the editor destroying.",n)}).then(()=>{const n={},a=[],l=this._config.rootsAttributes||{},c={};for(const[d,h]of Object.entries(this._data.roots))h.isLoaded?(n[d]="",c[d]=l[d]||{}):a.push(d);const u={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:a,rootsAttributes:c,_watchdogInitialData:this._data};return delete u.initialData,u.extraPlugins.push(EditorWatchdogInitPlugin),this._initUsingData?this.create(n,u,u.context):isElement$2(this._elementOrData)?this.create(this._elementOrData,u,u.context):this.create(this._editables,u,u.context)}).then(()=>{this._fire("restart")})}create(n=this._elementOrData,a=this._config,l){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=n,this._initUsingData=typeof n=="string"||Object.keys(n).length>0&&typeof Object.values(n)[0]=="string",this._config=this._cloneEditorConfiguration(a)||{},this._config.context=l,this._creator(n,this._config))).then(c=>{this._editor=c,c.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=c.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const n=this._editor;return this._editor=null,n.model.document.off("change:data",this._throttledSave),this._destructor(n)})}_save(){const n=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=n}catch(a){console.error(a,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(n){this._excludedProps=n}_getData(){const n=this._editor,a=n.model.document.roots.filter(h=>h.isAttached()&&h.rootName!="$graveyard"),{plugins:l}=n,c=l.has("CommentsRepository")&&l.get("CommentsRepository"),u=l.has("TrackChanges")&&l.get("TrackChanges"),d={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};a.forEach(h=>{d.roots[h.rootName]={content:JSON.stringify(Array.from(h.getChildren())),attributes:JSON.stringify(Array.from(h.getAttributes())),isLoaded:h._isLoaded}});for(const h of n.model.markers)h._affectsData&&(d.markers[h.name]={rangeJSON:h.getRange().toJSON(),usingOperation:h._managedUsingOperations,affectsData:h._affectsData});return c&&(d.commentThreads=JSON.stringify(c.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),u&&(d.suggestions=JSON.stringify(u.getSuggestions({toJSON:!0,skipNotAttached:!0}))),d}_getEditables(){const n={};for(const a of this.editor.model.document.getRootNames()){const l=this.editor.ui.getEditableElement(a);l&&(n[a]=l)}return n}_isErrorComingFromThisItem(n){return areConnectedThroughProperties(this._editor,n.context,this._excludedProps)}_cloneEditorConfiguration(n){return cloneDeepWith(n,(a,l)=>{if(isElement$2(a)||l==="context")return a})}}class EditorWatchdogInitPlugin{constructor(o){E(this,"editor");E(this,"_data");this.editor=o,this._data=o.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",o=>{o.stop(),this.editor.model.enqueueChange({isUndoable:!1},n=>{this._restoreCollaborationData(),this._restoreEditorData(n)}),this.editor.data.fire("ready")},{priority:999})}_createNode(o,n){if("name"in n){const a=o.createElement(n.name,n.attributes);if(n.children)for(const l of n.children)a._appendChild(this._createNode(o,l));return a}else return o.createText(n.data,n.attributes)}_restoreEditorData(o){const n=this.editor;Object.entries(this._data.roots).forEach(([a,{content:l,attributes:c}])=>{const u=JSON.parse(l),d=JSON.parse(c),h=n.model.document.getRoot(a);for(const[f,g]of d)o.setAttribute(f,g,h);for(const f of u){const g=this._createNode(o,f);o.insert(g,h,"end")}}),Object.entries(this._data.markers).forEach(([a,l])=>{const{document:c}=n.model,{rangeJSON:{start:u,end:d},...h}=l,f=c.getRoot(u.root),g=o.createPositionFromPath(f,u.path,u.stickiness),p=o.createPositionFromPath(f,d.path,d.stickiness),v=o.createRange(g,p);o.addMarker(a,{range:v,...h})})}_restoreCollaborationData(){const o=JSON.parse(this._data.commentThreads),n=JSON.parse(this._data.suggestions);o.forEach(a=>{const l=this.editor.config.get("collaboration.channelId"),c=this.editor.plugins.get("CommentsRepository");c.hasCommentThread(a.threadId)&&c.getCommentThread(a.threadId).remove(),c.addCommentThread({channelId:l,...a})}),n.forEach(a=>{const l=this.editor.plugins.get("TrackChangesEditing");if(l.hasSuggestion(a.id)){const c=l.getSuggestion(a.id);c.attributes=a.attributes}else l.addSuggestionData(a)})}}const mainQueueId=Symbol("MainQueueId");class ContextWatchdog extends Watchdog{constructor(n,a={}){super(a);E(this,"_watchdogs",new Map);E(this,"_watchdogConfig");E(this,"_context",null);E(this,"_contextProps",new Set);E(this,"_actionQueues",new ActionQueues);E(this,"_contextConfig");E(this,"_item");this._watchdogConfig=a,this._creator=l=>n.create(l),this._destructor=l=>l.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(n){this._creator=n}setDestructor(n){this._destructor=n}get context(){return this._context}create(n={}){return this._actionQueues.enqueue(mainQueueId,()=>(this._contextConfig=n,this._create()))}getItem(n){return this._getWatchdog(n)._item}getItemState(n){return this._getWatchdog(n).state}add(n){const a=toArray$1(n);return Promise.all(a.map(l=>this._actionQueues.enqueue(l.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let c;if(this._watchdogs.has(l.id))throw new Error(`Item with the given id is already added: '${l.id}'.`);if(l.type==="editor")return c=new EditorWatchdog(null,this._watchdogConfig),c.setCreator(l.creator),c._setExcludedProperties(this._contextProps),l.destructor&&c.setDestructor(l.destructor),this._watchdogs.set(l.id,c),c.on("error",(u,{error:d,causesRestart:h})=>{this._fire("itemError",{itemId:l.id,error:d}),h&&this._actionQueues.enqueue(l.id,()=>new Promise(f=>{const g=()=>{c.off("restart",g),this._fire("itemRestart",{itemId:l.id}),f()};c.on("restart",g)}))}),c.create(l.sourceElementOrData,l.config,this._context);throw new Error(`Not supported item type: '${l.type}'.`)})))}remove(n){const a=toArray$1(n);return Promise.all(a.map(l=>this._actionQueues.enqueue(l,()=>{const c=this._getWatchdog(l);return this._watchdogs.delete(l),c.destroy()})))}destroy(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(n=>{console.error("An error happened during destroying the context or items.",n)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(n=>(this._context=n,this._contextProps=getSubNodes(this._context),Promise.all(Array.from(this._watchdogs.values()).map(a=>(a._setExcludedProperties(this._contextProps),a.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const n=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(a=>a.destroy())).then(()=>this._destructor(n))})}_getWatchdog(n){const a=this._watchdogs.get(n);if(!a)throw new Error(`Item with the given id was not registered: ${n}.`);return a}_isErrorComingFromThisItem(n){for(const a of this._watchdogs.values())if(a._isErrorComingFromThisItem(n))return!1;return areConnectedThroughProperties(this._context,n.context)}}class ActionQueues{constructor(){E(this,"_onEmptyCallbacks",[]);E(this,"_queues",new Map);E(this,"_activeActions",0)}onEmpty(o){this._onEmptyCallbacks.push(o)}enqueue(o,n){const a=o===mainQueueId;this._activeActions++,this._queues.get(o)||this._queues.set(o,Promise.resolve());const c=(a?Promise.all(this._queues.values()):Promise.all([this._queues.get(mainQueueId),this._queues.get(o)])).then(n),u=c.catch(()=>{});return this._queues.set(o,u),c.finally(()=>{this._activeActions--,this._queues.get(o)===u&&this._activeActions===0&&this._onEmptyCallbacks.forEach(d=>d())})}}function toArray$1(s){return Array.isArray(s)?s:[s]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Plugin extends ObservableMixin(){constructor(n){super();E(this,"editor");E(this,"_disableStack",new Set);this.editor=n,this.set("isEnabled",!0)}forceDisabled(n){this._disableStack.add(n),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable$1,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(n){this._disableStack.delete(n),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable$1),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function forceDisable$1(s){s.return=!1,s.stop()}class Command extends ObservableMixin(){constructor(n){super();E(this,"editor");E(this,"_isEnabledBasedOnSelection");E(this,"_affectsData");E(this,"_disableStack");this.editor=n,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(n,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",a=>{if(!this.affectsData)return;const l=n.model.document.selection,u=!(l.getFirstPosition().root.rootName=="$graveyard")&&n.model.canEditAt(l);(n.isReadOnly||this._isEnabledBasedOnSelection&&!u)&&(a.return=!1,a.stop())},{priority:"highest"}),this.on("execute",a=>{this.isEnabled||a.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(n){this._affectsData=n}refresh(){this.isEnabled=!0}forceDisabled(n){this._disableStack.add(n),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(n){this._disableStack.delete(n),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable),this.refresh())}execute(...n){}destroy(){this.stopListening()}}function forceDisable(s){s.return=!1,s.stop()}class MultiCommand extends Command{constructor(){super(...arguments);E(this,"_childCommandsDefinitions",[])}refresh(){}execute(...n){const a=this._getFirstEnabledCommand();return!!a&&a.execute(n)}registerChildCommand(n,a={}){insertToPriorityArray(this._childCommandsDefinitions,{command:n,priority:a.priority||"normal"}),n.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const n=this._childCommandsDefinitions.find(({command:a})=>a.isEnabled);return n&&n.command}}class PluginCollection extends EmitterMixin(){constructor(n,a=[],l=[]){super();E(this,"_context");E(this,"_plugins",new Map);E(this,"_availablePlugins");E(this,"_contextPlugins");this._context=n,this._availablePlugins=new Map;for(const c of a)c.pluginName&&this._availablePlugins.set(c.pluginName,c);this._contextPlugins=new Map;for(const[c,u]of l)this._contextPlugins.set(c,u),this._contextPlugins.set(u,c),c.pluginName&&this._availablePlugins.set(c.pluginName,c)}*[Symbol.iterator](){for(const n of this._plugins)typeof n[0]=="function"&&(yield n)}get(n){const a=this._plugins.get(n);if(!a){let l=n;throw typeof n=="function"&&(l=n.pluginName||n.name),new CKEditorError("plugincollection-plugin-not-loaded",this._context,{plugin:l})}return a}has(n){return this._plugins.has(n)}init(n,a=[],l=[]){const c=this,u=this._context;_(n),x(n);const d=n.filter(D=>!v(D,a)),h=[...w(d)];M(h,l);const f=R(h);return A(f,"init").then(()=>A(f,"afterInit")).then(()=>f);function g(D){return typeof D=="function"}function p(D){return g(D)&&!!D.isContextPlugin}function v(D,O){return O.some(H=>H===D||b(D)===H||b(H)===D)}function b(D){return g(D)?D.pluginName||D.name:D}function _(D,O=new Set){D.forEach(H=>{g(H)&&(O.has(H)||(O.add(H),H.pluginName&&!c._availablePlugins.has(H.pluginName)&&c._availablePlugins.set(H.pluginName,H),H.requires&&_(H.requires,O)))})}function w(D,O=new Set){return D.map(H=>g(H)?H:c._availablePlugins.get(H)).reduce((H,j)=>O.has(j)?H:(O.add(j),j.requires&&(x(j.requires,j),w(j.requires,O).forEach(q=>H.add(q))),H.add(j)),new Set)}function x(D,O=null){D.map(H=>g(H)?H:c._availablePlugins.get(H)||H).forEach(H=>{S(H,O),C(H,O),T(H,O)})}function S(D,O){if(!g(D))throw O?new CKEditorError("plugincollection-soft-required",u,{missingPlugin:D,requiredBy:b(O)}):new CKEditorError("plugincollection-plugin-not-found",u,{plugin:D})}function C(D,O){if(p(O)&&!p(D))throw new CKEditorError("plugincollection-context-required",u,{plugin:b(D),requiredBy:b(O)})}function T(D,O){if(O&&v(D,a))throw new CKEditorError("plugincollection-required",u,{plugin:b(D),requiredBy:b(O)})}function R(D){return D.map(O=>{let H=c._contextPlugins.get(O);return H=H||new O(u),c._add(O,H),H})}function A(D,O){return D.reduce((H,j)=>!j[O]||c._contextPlugins.has(j)?H:H.then(j[O].bind(j)),Promise.resolve())}function M(D,O){for(const H of O){if(typeof H!="function")throw new CKEditorError("plugincollection-replace-plugin-invalid-type",null,{pluginItem:H});const j=H.pluginName;if(!j)throw new CKEditorError("plugincollection-replace-plugin-missing-name",null,{pluginItem:H});if(H.requires&&H.requires.length)throw new CKEditorError("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:j});const q=c._availablePlugins.get(j);if(!q)throw new CKEditorError("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:j});const Y=D.indexOf(q);if(Y===-1){if(c._contextPlugins.has(q))return;throw new CKEditorError("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:j})}if(q.requires&&q.requires.length)throw new CKEditorError("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:j});D.splice(Y,1,H),c._availablePlugins.set(j,H)}}}destroy(){const n=[];for(const[,a]of this)typeof a.destroy=="function"&&!this._contextPlugins.has(a)&&n.push(a.destroy());return Promise.all(n)}_add(n,a){this._plugins.set(n,a);const l=n.pluginName;if(l){if(this._plugins.has(l))throw new CKEditorError("plugincollection-plugin-name-conflict",null,{pluginName:l,plugin1:this._plugins.get(l).constructor,plugin2:n});this._plugins.set(l,a)}}}class Context{constructor(o){E(this,"config");E(this,"plugins");E(this,"locale");E(this,"t");E(this,"editors");E(this,"_contextOwner",null);const{translations:n,...a}=o||{};this.config=new Config(a,this.constructor.defaultConfig);const l=this.constructor.builtinPlugins;this.config.define("plugins",l),this.plugins=new PluginCollection(this,l);const c=this.config.get("language")||{};this.locale=new Locale({uiLanguage:typeof c=="string"?c:c.ui,contentLanguage:this.config.get("language.content"),translations:n}),this.t=this.locale.t,this.editors=new Collection}initPlugins(){const o=this.config.get("plugins")||[],n=this.config.get("substitutePlugins")||[];for(const a of o.concat(n)){if(typeof a!="function")throw new CKEditorError("context-initplugins-constructor-only",null,{Plugin:a});if(a.isContextPlugin!==!0)throw new CKEditorError("context-initplugins-invalid-plugin",null,{Plugin:a})}return this.plugins.init(o,[],n)}destroy(){return Promise.all(Array.from(this.editors,o=>o.destroy())).then(()=>this.plugins.destroy())}_addEditor(o,n){if(this._contextOwner)throw new CKEditorError("context-addeditor-private-context");this.editors.add(o),n&&(this._contextOwner=o)}_removeEditor(o){return this.editors.has(o)&&this.editors.remove(o),this._contextOwner===o?this.destroy():Promise.resolve()}_getEditorConfig(){const o={};for(const n of this.config.names())["plugins","removePlugins","extraPlugins"].includes(n)||(o[n]=this.config.get(n));return o}static create(o){return new Promise(n=>{const a=new this(o);n(a.initPlugins().then(()=>a))})}}E(Context,"defaultConfig"),E(Context,"builtinPlugins");class ContextPlugin extends ObservableMixin(){constructor(n){super();E(this,"context");this.context=n}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class CommandCollection{constructor(){E(this,"_commands");this._commands=new Map}add(o,n){this._commands.set(o,n)}get(o){return this._commands.get(o)}execute(o,...n){const a=this.get(o);if(!a)throw new CKEditorError("commandcollection-command-not-found",this,{commandName:o});return a.execute(...n)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const o of this.commands())o.destroy()}}class EditingKeystrokeHandler extends KeystrokeHandler{constructor(n){super();E(this,"editor");this.editor=n}set(n,a,l={}){if(typeof a=="string"){const c=a;a=(u,d)=>{this.editor.execute(c),d()}}super.set(n,a,l)}}const DEFAULT_CATEGORY_ID="contentEditing",DEFAULT_GROUP_ID="common";class Accessibility{constructor(o){E(this,"keystrokeInfos",new Map);E(this,"_editor");this._editor=o;const n=o.config.get("menuBar.isVisible"),a=o.locale.t;this.addKeystrokeInfoCategory({id:DEFAULT_CATEGORY_ID,label:a("Content editing keystrokes"),description:a("These keyboard shortcuts allow for quick access to content editing features.")});const l=[{label:a("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:a("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:a("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:a("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:a("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:a("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];n&&l.push({label:a("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:a("User interface and content navigation keystrokes"),description:a("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:l}]})}addKeystrokeInfoCategory({id:o,label:n,description:a,groups:l}){this.keystrokeInfos.set(o,{id:o,label:n,description:a,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:o,id:DEFAULT_GROUP_ID}),l&&l.forEach(c=>{this.addKeystrokeInfoGroup({categoryId:o,...c})})}addKeystrokeInfoGroup({categoryId:o=DEFAULT_CATEGORY_ID,id:n,label:a,keystrokes:l}){const c=this.keystrokeInfos.get(o);if(!c)throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{groupId:n,categoryId:o});c.groups.set(n,{id:n,label:a,keystrokes:l||[]})}addKeystrokeInfos({categoryId:o=DEFAULT_CATEGORY_ID,groupId:n=DEFAULT_GROUP_ID,keystrokes:a}){if(!this.keystrokeInfos.has(o))throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:o,keystrokes:a});const l=this.keystrokeInfos.get(o);if(!l.groups.has(n))throw new CKEditorError("accessibility-unknown-keystroke-info-group",this._editor,{groupId:n,categoryId:o,keystrokes:a});l.groups.get(n).keystrokes.push(...a)}}function getEditorUsageData(s){return{sessionId:getSessionId(),pageSessionId:getPageSessionID(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:getEditorType(s),plugins:getPluginsUsageData(s.plugins),distribution:getDistributionUsageData(),env:getEnvUsageData(),integration:Object.create(null),menuBar:{isVisible:!!s.config.get("menuBar.isVisible")},language:{ui:s.locale.uiLanguage,content:s.locale.contentLanguage},toolbar:{main:getToolbarUsageData(s.config.get("toolbar")),block:getToolbarUsageData(s.config.get("blockToolbar")),balloon:getToolbarUsageData(s.config.get("balloonToolbar"))}}}function getEditorType(s){return Object.getPrototypeOf(s).constructor.editorName}function getPluginsUsageData(s){return Array.from(s).filter(([o])=>!!o.pluginName).map(([o])=>{const{pluginName:n,isContextPlugin:a,isOfficialPlugin:l,isPremiumPlugin:c}=o;return{isContext:!!a,isOfficial:!!l,isPremium:!!c,name:n}})}function getToolbarUsageData(s){if(!s)return;const o=Array.isArray(s)?{items:s}:s,n=c(o.items||[]);return{isMultiline:n.includes("-"),shouldNotGroupWhenFull:!!o.shouldNotGroupWhenFull,items:l(n)};function l(u){return u.filter(d=>d!=="|"&&d!=="-")}function c(u){return u.flatMap(d=>typeof d=="string"?[d]:c(d.items))}}function getDistributionUsageData(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function getEnvUsageData(){let s="unknown",o="unknown";return env$1.isMac?s="mac":env$1.isWindows?s="windows":env$1.isiOS?s="ios":env$1.isAndroid&&(s="android"),env$1.isGecko?o="gecko":env$1.isBlink?o="blink":env$1.isSafari&&(o="safari"),{os:s,browser:o}}function getSessionId(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",uid()),localStorage.getItem("__ckeditor-session-id")}function getPageSessionID(){return global$1.window.CKEDITOR_PAGE_SESSION_ID=global$1.window.CKEDITOR_PAGE_SESSION_ID||uid(),global$1.window.CKEDITOR_PAGE_SESSION_ID}class Editor extends ObservableMixin(){constructor(n={}){super();E(this,"accessibility");E(this,"commands");E(this,"config");E(this,"conversion");E(this,"data");E(this,"editing");E(this,"locale");E(this,"model");E(this,"plugins");E(this,"keystrokes");E(this,"t");E(this,"_context");E(this,"_readOnlyLocks");if("sanitizeHtml"in n)throw new CKEditorError("editor-config-sanitizehtml-not-supported");const a=this.constructor,{translations:l,...c}=a.defaultConfig||{},{translations:u=l,...d}=n,h=n.language||c.language;this._context=n.context||new Context({language:h,translations:u}),this._context._addEditor(this,!n.context);const f=Array.from(a.builtinPlugins||[]);this.config=new Config(d,c),this.config.define("plugins",f),this.config.define(this._context._getEditorConfig()),p(this.config),this.plugins=new PluginCollection(this,f,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new CommandCollection,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Model$2,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const g=new StylesProcessor;this.data=new DataController$1(this.model,g),this.editing=new EditingController(this.model,g),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Conversion([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new EditingKeystrokeHandler(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Accessibility(this),v(this);function p(b){let _=b.get("licenseKey");if(!_&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(_=window.CKEDITOR_GLOBAL_LICENSE_KEY,b.set("licenseKey",_)),!_)throw new CKEditorError("license-key-missing")}function v(b){const _=b.config.get("licenseKey"),w=window[Symbol.for("cke distribution")]||"sh";function x(H){b.enableReadOnlyMode(Symbol("invalidLicense")),b._showLicenseError(H)}function S(H){const j=H.split(".");return j.length!=3?null:j[1]}function C(H){return["exp","jti","vc"].every(q=>q in H)}function T(H){return Object.getOwnPropertyNames(H).sort().filter(Y=>Y!="vc"&&H[Y]!=null).map(Y=>H[Y])}function R(H){const{hostname:j}=new URL(window.location.href);if(H.includes(j))return!0;const q=j.split(".");return H.filter(Y=>Y.includes("*")).map(Y=>Y.split(".")).filter(Y=>Y.length<=q.length).map(Y=>Array(q.length-Y.length).fill(Y[0]==="*"?"*":"").concat(Y)).some(Y=>q.every((ee,te)=>Y[te]===ee||Y[te]==="*"))}if(_=="GPL"){w=="cloud"&&x("distributionChannel");return}const A=S(_);if(!A){x("invalid");return}const M=parseBase64EncodedObject(A);if(!M){x("invalid");return}if(!C(M)){x("invalid");return}if(M.distributionChannel&&!toArray$2(M.distributionChannel).includes(w)){x("distributionChannel");return}if(crc32(T(M))!=M.vc.toLowerCase()){x("invalid");return}if(new Date(M.exp*1e3)<releaseDate){x("expired");return}const O=M.licensedHosts;if(O&&O.length>0&&!R(O)){x("domainLimit");return}if(["evaluation","trial"].includes(M.licenseType)&&M.exp*1e3<Date.now()){x("expired");return}if(["development","evaluation","trial"].includes(M.licenseType)){const{licenseType:H}=M,j=H[0].toUpperCase()+H.slice(1),q=H==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${j} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${q} ${H} license of CKEditor 5${H==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(["evaluation","trial"].includes(M.licenseType)){const H=M.licenseType,j=setTimeout(()=>{x(`${H}Limit`)},6e5);b.on("destroy",()=>{clearTimeout(j)})}M.usageEndpoint&&b.once("ready",()=>{const H={requestId:uid(),requestTime:Math.round(Date.now()/1e3),license:_,editor:collectUsageData(b)};b._sendUsageRequest(M.usageEndpoint,H).then(j=>{const{status:q,message:Y}=j;Y&&console.warn(Y),q!="ok"&&x("usageLimit")},()=>{logError$1("license-key-validation-endpoint-not-reachable",{url:M.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(n){throw new CKEditorError("editor-isreadonly-has-no-setter")}enableReadOnlyMode(n){if(typeof n!="string"&&typeof n!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:n});this._readOnlyLocks.has(n)||(this._readOnlyLocks.add(n),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(n){if(typeof n!="string"&&typeof n!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:n});this._readOnlyLocks.has(n)&&(this._readOnlyLocks.delete(n),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(n){this.data.set(n)}getData(n){return this.data.get(n)}initPlugins(){const n=this.config,a=n.get("plugins"),l=n.get("removePlugins")||[],c=n.get("extraPlugins")||[],u=n.get("substitutePlugins")||[];return this.plugins.init(a.concat(c),l,u)}destroy(){let n=Promise.resolve();return this.state=="initializing"&&(n=new Promise(a=>this.once("ready",a))),n.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(n,...a){try{return this.commands.execute(n,...a)}catch(l){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(l,this)}}focus(){this.editing.view.focus()}static create(...n){throw new Error("This is an abstract method.")}_showLicenseError(n,a){setTimeout(()=>{if(n=="invalid")throw new CKEditorError("invalid-license-key");if(n=="expired")throw new CKEditorError("license-key-expired");if(n=="domainLimit")throw new CKEditorError("license-key-domain-limit");if(n=="featureNotAllowed")throw new CKEditorError("license-key-plugin-not-allowed",null,{pluginName:a});if(n=="evaluationLimit")throw new CKEditorError("license-key-evaluation-limit");if(n=="trialLimit")throw new CKEditorError("license-key-trial-limit");if(n=="developmentLimit")throw new CKEditorError("license-key-development-limit");if(n=="usageLimit")throw new CKEditorError("license-key-usage-limit");if(n=="distributionChannel")throw new CKEditorError("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(n,a){const l=new Headers({"Content-Type":"application/json"}),c=await fetch(new URL(n),{method:"POST",headers:l,body:JSON.stringify(a)});if(!c.ok)throw new Error(`HTTP Response: ${c.status}`);return c.json()}}E(Editor,"defaultConfig"),E(Editor,"builtinPlugins"),E(Editor,"Context",Context),E(Editor,"EditorWatchdog",EditorWatchdog),E(Editor,"ContextWatchdog",ContextWatchdog);function collectUsageData(s){const o=getEditorUsageData(s);function n(a,l){if(get$2(o,a)!==void 0)throw new CKEditorError("editor-usage-data-path-already-set",{path:a});set$2(o,a,l)}return s.fire("collectUsageData",{setUsageData:n}),o}function attachToForm(s){if(!isFunction$3(s.updateSourceElement))throw new CKEditorError("attachtoform-missing-elementapi-interface",s);const o=s.sourceElement;if(isTextArea(o)&&o.form){let n;const a=o.form,l=()=>s.updateSourceElement();isFunction$3(a.submit)&&(n=a.submit,a.submit=()=>{l(),n.apply(a)}),a.addEventListener("submit",l),s.on("destroy",()=>{a.removeEventListener("submit",l),n&&(a.submit=n)})}}function isTextArea(s){return!!s&&s.tagName.toLowerCase()==="textarea"}function ElementApiMixin(s){class o extends s{constructor(){super(...arguments);E(this,"sourceElement")}updateSourceElement(l){if(!this.sourceElement)throw new CKEditorError("editor-missing-sourceelement",this);const c=this.config.get("updateSourceElementOnDestroy"),u=this.sourceElement instanceof HTMLTextAreaElement;if(!c&&!u){setDataInElement(this.sourceElement,"");return}const d=typeof l=="string"?l:this.data.get();setDataInElement(this.sourceElement,d)}}return o}ElementApiMixin.updateSourceElement=ElementApiMixin(Object).prototype.updateSourceElement;class PendingActions extends ContextPlugin{constructor(){super(...arguments);E(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Collection({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(n){if(typeof n!="string")throw new CKEditorError("pendingactions-add-invalid-message",this);const a=new(ObservableMixin());return a.set("message",n),this._actions.add(a),this.hasAny=!0,a}remove(n){this._actions.remove(n),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var cancel='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',colorPalette$1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',eraser='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',history='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',lowVision='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',textAlternative='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',loupe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',previousArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',nextArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',image='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',imageUpload='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',imageAssetManager='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',imageUrl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',alignBottom='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectBlockLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectBlockRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeCustom='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',objectSizeLarge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',objectSizeSmall='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',objectSizeMedium='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',pencil='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',dragIndicator='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',bold='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',paragraph='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',importExport='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',redo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',undo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',bulletedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',numberedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',todoList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',codeBlock='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',browseFiles='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',heading1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',heading2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',heading3='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',heading4='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',heading5='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',heading6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',horizontalLine='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',html='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',indent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',outdent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',table='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',source=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>
`,remove$1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',bookmark='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',bookmarkInline='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',emoji=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>
`;const icons={bold,cancel,caption,check,cog,colorPalette:colorPalette$1,eraser,history,image,imageUpload,imageAssetManager,imageUrl,lowVision,textAlternative,loupe,previousArrow,nextArrow,importExport,paragraph,plus,text,alignBottom,alignMiddle,alignTop,alignLeft,alignCenter,alignRight,alignJustify,objectLeft,objectCenter,objectRight,objectFullWidth,objectInline,objectBlockLeft,objectBlockRight,objectSizeCustom,objectSizeFull,objectSizeLarge,objectSizeSmall,objectSizeMedium,pencil,pilcrow,quote,threeVerticalDots,dragIndicator,redo,undo,bulletedList,numberedList,todoList,codeBlock,browseFiles,heading1,heading2,heading3,heading4,heading5,heading6,horizontalLine,html,indent,outdent,table,source,remove:remove$1,bookmark,bookmarkInline,emoji};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FileReader extends ObservableMixin(){constructor(){super();E(this,"total");E(this,"_reader");E(this,"_data");const n=new window.FileReader;this._reader=n,this._data=void 0,this.set("loaded",0),n.onprogress=a=>{this.loaded=a.loaded}}get error(){return this._reader.error}get data(){return this._data}read(n){const a=this._reader;return this.total=n.size,new Promise((l,c)=>{a.onload=()=>{const u=a.result;this._data=u,l(u)},a.onerror=()=>{c("error")},a.onabort=()=>{c("aborted")},this._reader.readAsDataURL(n)})}abort(){this._reader.abort()}}class FileRepository extends Plugin{constructor(){super(...arguments);E(this,"loaders",new Collection);E(this,"_loadersMap",new Map);E(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,a)=>a?n/a*100:0)}getLoader(n){return this._loadersMap.get(n)||null}createLoader(n){if(!this.createUploadAdapter)return logWarning("filerepository-no-upload-adapter"),null;const a=new FileLoader(Promise.resolve(n),this.createUploadAdapter);return this.loaders.add(a),this._loadersMap.set(n,a),n instanceof Promise&&a.file.then(l=>{this._loadersMap.set(l,a)}).catch(()=>{}),a.on("change:uploaded",()=>{let l=0;for(const c of this.loaders)l+=c.uploaded;this.uploaded=l}),a.on("change:uploadTotal",()=>{let l=0;for(const c of this.loaders)c.uploadTotal&&(l+=c.uploadTotal);this.uploadTotal=l}),a}destroyLoader(n){const a=n instanceof FileLoader?n:this.getLoader(n);a._destroy(),this.loaders.remove(a),this._loadersMap.forEach((l,c)=>{l===a&&this._loadersMap.delete(c)})}_updatePendingAction(){const n=this.editor.plugins.get(PendingActions);if(this.loaders.length){if(!this._pendingAction){const a=this.editor.t,l=c=>`${a("Upload in progress")} ${parseInt(c)}%.`;this._pendingAction=n.add(l(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",l)}}else n.remove(this._pendingAction),this._pendingAction=null}}class FileLoader extends ObservableMixin(){constructor(n,a){super();E(this,"id");E(this,"_filePromiseWrapper");E(this,"_adapter");E(this,"_reader");this.id=uid(),this._filePromiseWrapper=this._createFilePromiseWrapper(n),this._adapter=a(this),this._reader=new FileReader,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(l,c)=>c?l/c*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(n=>this._filePromiseWrapper?n:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new CKEditorError("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(n=>this._reader.read(n)).then(n=>{if(this.status!=="reading")throw this.status;return this.status="idle",n}).catch(n=>{throw n==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:n)})}upload(){if(this.status!="idle")throw new CKEditorError("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(n=>(this.uploadResponse=n,this.status="idle",n)).catch(n=>{throw this.status==="aborted"?"aborted":(this.status="error",n)})}abort(){const n=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?n=="reading"?this._reader.abort():n=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(n){const a={};return a.promise=new Promise((l,c)=>{a.rejecter=c,a.isFulfilled=!1,n.then(u=>{a.isFulfilled=!0,l(u)}).catch(u=>{a.isFulfilled=!0,c(u)})}),a}}var colorName,hasRequiredColorName;function requireColorName(){return hasRequiredColorName||(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),colorName}var colorNameExports=requireColorName();const names=getDefaultExportFromCjs(colorNameExports);var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$1(s){var o,n=[],a=1,l;if(typeof s=="string")if(names[s])n=names[s].slice(),l="rgb";else if(s==="transparent")a=0,l="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(s)){var c=s.slice(1),u=c.length,d=u<=4;a=1,d?(n=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],u===4&&(a=parseInt(c[3]+c[3],16)/255)):(n=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],u===8&&(a=parseInt(c[6]+c[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),l="rgb"}else if(o=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(s)){var h=o[1],f=h==="rgb",c=h.replace(/a$/,"");l=c;var u=c==="cmyk"?4:c==="gray"?1:3;n=o[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(v,b){if(/%$/.test(v))return b===u?parseFloat(v)/100:c==="rgb"?parseFloat(v)*255/100:parseFloat(v);if(c[b]==="h"){if(/deg$/.test(v))return parseFloat(v);if(baseHues[v]!==void 0)return baseHues[v]}return parseFloat(v)}),h===c&&n.push(1),a=f||n[u]===void 0?1:n[u],n=n.slice(0,u)}else s.length>10&&/[0-9](?:\s|\/)/.test(s)&&(n=s.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),l=s.match(/([a-z])/ig).join("").toLowerCase());else isNaN(s)?Array.isArray(s)||s.length?(n=[s[0],s[1],s[2]],l="rgb",a=s.length===4?s[3]:1):s instanceof Object&&(s.r!=null||s.red!=null||s.R!=null?(l="rgb",n=[s.r||s.red||s.R||0,s.g||s.green||s.G||0,s.b||s.blue||s.B||0]):(l="hsl",n=[s.h||s.hue||s.H||0,s.s||s.saturation||s.S||0,s.l||s.lightness||s.L||s.b||s.brightness]),a=s.a||s.alpha||s.opacity||1,s.opacity!=null&&(a/=100)):(l="rgb",n=[s>>>16,(s&65280)>>>8,s&255]);return{space:l,values:n,alpha:a}}var conversions,hasRequiredConversions;function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const s=requireColorName(),o={};for(const l of Object.keys(s))o[s[l]]=l;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=n;for(const l of Object.keys(n)){if(!("channels"in n[l]))throw new Error("missing channels property: "+l);if(!("labels"in n[l]))throw new Error("missing channel labels property: "+l);if(n[l].labels.length!==n[l].channels)throw new Error("channel and label counts mismatch: "+l);const{channels:c,labels:u}=n[l];delete n[l].channels,delete n[l].labels,Object.defineProperty(n[l],"channels",{value:c}),Object.defineProperty(n[l],"labels",{value:u})}n.rgb.hsl=function(l){const c=l[0]/255,u=l[1]/255,d=l[2]/255,h=Math.min(c,u,d),f=Math.max(c,u,d),g=f-h;let p,v;f===h?p=0:c===f?p=(u-d)/g:u===f?p=2+(d-c)/g:d===f&&(p=4+(c-u)/g),p=Math.min(p*60,360),p<0&&(p+=360);const b=(h+f)/2;return f===h?v=0:b<=.5?v=g/(f+h):v=g/(2-f-h),[p,v*100,b*100]},n.rgb.hsv=function(l){let c,u,d,h,f;const g=l[0]/255,p=l[1]/255,v=l[2]/255,b=Math.max(g,p,v),_=b-Math.min(g,p,v),w=function(x){return(b-x)/6/_+1/2};return _===0?(h=0,f=0):(f=_/b,c=w(g),u=w(p),d=w(v),g===b?h=d-u:p===b?h=1/3+c-d:v===b&&(h=2/3+u-c),h<0?h+=1:h>1&&(h-=1)),[h*360,f*100,b*100]},n.rgb.hwb=function(l){const c=l[0],u=l[1];let d=l[2];const h=n.rgb.hsl(l)[0],f=1/255*Math.min(c,Math.min(u,d));return d=1-1/255*Math.max(c,Math.max(u,d)),[h,f*100,d*100]},n.rgb.cmyk=function(l){const c=l[0]/255,u=l[1]/255,d=l[2]/255,h=Math.min(1-c,1-u,1-d),f=(1-c-h)/(1-h)||0,g=(1-u-h)/(1-h)||0,p=(1-d-h)/(1-h)||0;return[f*100,g*100,p*100,h*100]};function a(l,c){return(l[0]-c[0])**2+(l[1]-c[1])**2+(l[2]-c[2])**2}return n.rgb.keyword=function(l){const c=o[l];if(c)return c;let u=1/0,d;for(const h of Object.keys(s)){const f=s[h],g=a(l,f);g<u&&(u=g,d=h)}return d},n.keyword.rgb=function(l){return s[l]},n.rgb.xyz=function(l){let c=l[0]/255,u=l[1]/255,d=l[2]/255;c=c>.04045?((c+.055)/1.055)**2.4:c/12.92,u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,d=d>.04045?((d+.055)/1.055)**2.4:d/12.92;const h=c*.4124+u*.3576+d*.1805,f=c*.2126+u*.7152+d*.0722,g=c*.0193+u*.1192+d*.9505;return[h*100,f*100,g*100]},n.rgb.lab=function(l){const c=n.rgb.xyz(l);let u=c[0],d=c[1],h=c[2];u/=95.047,d/=100,h/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;const f=116*d-16,g=500*(u-d),p=200*(d-h);return[f,g,p]},n.hsl.rgb=function(l){const c=l[0]/360,u=l[1]/100,d=l[2]/100;let h,f,g;if(u===0)return g=d*255,[g,g,g];d<.5?h=d*(1+u):h=d+u-d*u;const p=2*d-h,v=[0,0,0];for(let b=0;b<3;b++)f=c+1/3*-(b-1),f<0&&f++,f>1&&f--,6*f<1?g=p+(h-p)*6*f:2*f<1?g=h:3*f<2?g=p+(h-p)*(2/3-f)*6:g=p,v[b]=g*255;return v},n.hsl.hsv=function(l){const c=l[0];let u=l[1]/100,d=l[2]/100,h=u;const f=Math.max(d,.01);d*=2,u*=d<=1?d:2-d,h*=f<=1?f:2-f;const g=(d+u)/2,p=d===0?2*h/(f+h):2*u/(d+u);return[c,p*100,g*100]},n.hsv.rgb=function(l){const c=l[0]/60,u=l[1]/100;let d=l[2]/100;const h=Math.floor(c)%6,f=c-Math.floor(c),g=255*d*(1-u),p=255*d*(1-u*f),v=255*d*(1-u*(1-f));switch(d*=255,h){case 0:return[d,v,g];case 1:return[p,d,g];case 2:return[g,d,v];case 3:return[g,p,d];case 4:return[v,g,d];case 5:return[d,g,p]}},n.hsv.hsl=function(l){const c=l[0],u=l[1]/100,d=l[2]/100,h=Math.max(d,.01);let f,g;g=(2-u)*d;const p=(2-u)*h;return f=u*h,f/=p<=1?p:2-p,f=f||0,g/=2,[c,f*100,g*100]},n.hwb.rgb=function(l){const c=l[0]/360;let u=l[1]/100,d=l[2]/100;const h=u+d;let f;h>1&&(u/=h,d/=h);const g=Math.floor(6*c),p=1-d;f=6*c-g,(g&1)!==0&&(f=1-f);const v=u+f*(p-u);let b,_,w;switch(g){default:case 6:case 0:b=p,_=v,w=u;break;case 1:b=v,_=p,w=u;break;case 2:b=u,_=p,w=v;break;case 3:b=u,_=v,w=p;break;case 4:b=v,_=u,w=p;break;case 5:b=p,_=u,w=v;break}return[b*255,_*255,w*255]},n.cmyk.rgb=function(l){const c=l[0]/100,u=l[1]/100,d=l[2]/100,h=l[3]/100,f=1-Math.min(1,c*(1-h)+h),g=1-Math.min(1,u*(1-h)+h),p=1-Math.min(1,d*(1-h)+h);return[f*255,g*255,p*255]},n.xyz.rgb=function(l){const c=l[0]/100,u=l[1]/100,d=l[2]/100;let h,f,g;return h=c*3.2406+u*-1.5372+d*-.4986,f=c*-.9689+u*1.8758+d*.0415,g=c*.0557+u*-.204+d*1.057,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,g=g>.0031308?1.055*g**(1/2.4)-.055:g*12.92,h=Math.min(Math.max(0,h),1),f=Math.min(Math.max(0,f),1),g=Math.min(Math.max(0,g),1),[h*255,f*255,g*255]},n.xyz.lab=function(l){let c=l[0],u=l[1],d=l[2];c/=95.047,u/=100,d/=108.883,c=c>.008856?c**(1/3):7.787*c+16/116,u=u>.008856?u**(1/3):7.787*u+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const h=116*u-16,f=500*(c-u),g=200*(u-d);return[h,f,g]},n.lab.xyz=function(l){const c=l[0],u=l[1],d=l[2];let h,f,g;f=(c+16)/116,h=u/500+f,g=f-d/200;const p=f**3,v=h**3,b=g**3;return f=p>.008856?p:(f-16/116)/7.787,h=v>.008856?v:(h-16/116)/7.787,g=b>.008856?b:(g-16/116)/7.787,h*=95.047,f*=100,g*=108.883,[h,f,g]},n.lab.lch=function(l){const c=l[0],u=l[1],d=l[2];let h;h=Math.atan2(d,u)*360/2/Math.PI,h<0&&(h+=360);const g=Math.sqrt(u*u+d*d);return[c,g,h]},n.lch.lab=function(l){const c=l[0],u=l[1],h=l[2]/360*2*Math.PI,f=u*Math.cos(h),g=u*Math.sin(h);return[c,f,g]},n.rgb.ansi16=function(l,c=null){const[u,d,h]=l;let f=c===null?n.rgb.hsv(l)[2]:c;if(f=Math.round(f/50),f===0)return 30;let g=30+(Math.round(h/255)<<2|Math.round(d/255)<<1|Math.round(u/255));return f===2&&(g+=60),g},n.hsv.ansi16=function(l){return n.rgb.ansi16(n.hsv.rgb(l),l[2])},n.rgb.ansi256=function(l){const c=l[0],u=l[1],d=l[2];return c===u&&u===d?c<8?16:c>248?231:Math.round((c-8)/247*24)+232:16+36*Math.round(c/255*5)+6*Math.round(u/255*5)+Math.round(d/255*5)},n.ansi16.rgb=function(l){let c=l%10;if(c===0||c===7)return l>50&&(c+=3.5),c=c/10.5*255,[c,c,c];const u=(~~(l>50)+1)*.5,d=(c&1)*u*255,h=(c>>1&1)*u*255,f=(c>>2&1)*u*255;return[d,h,f]},n.ansi256.rgb=function(l){if(l>=232){const f=(l-232)*10+8;return[f,f,f]}l-=16;let c;const u=Math.floor(l/36)/5*255,d=Math.floor((c=l%36)/6)/5*255,h=c%6/5*255;return[u,d,h]},n.rgb.hex=function(l){const u=(((Math.round(l[0])&255)<<16)+((Math.round(l[1])&255)<<8)+(Math.round(l[2])&255)).toString(16).toUpperCase();return"000000".substring(u.length)+u},n.hex.rgb=function(l){const c=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!c)return[0,0,0];let u=c[0];c[0].length===3&&(u=u.split("").map(p=>p+p).join(""));const d=parseInt(u,16),h=d>>16&255,f=d>>8&255,g=d&255;return[h,f,g]},n.rgb.hcg=function(l){const c=l[0]/255,u=l[1]/255,d=l[2]/255,h=Math.max(Math.max(c,u),d),f=Math.min(Math.min(c,u),d),g=h-f;let p,v;return g<1?p=f/(1-g):p=0,g<=0?v=0:h===c?v=(u-d)/g%6:h===u?v=2+(d-c)/g:v=4+(c-u)/g,v/=6,v%=1,[v*360,g*100,p*100]},n.hsl.hcg=function(l){const c=l[1]/100,u=l[2]/100,d=u<.5?2*c*u:2*c*(1-u);let h=0;return d<1&&(h=(u-.5*d)/(1-d)),[l[0],d*100,h*100]},n.hsv.hcg=function(l){const c=l[1]/100,u=l[2]/100,d=c*u;let h=0;return d<1&&(h=(u-d)/(1-d)),[l[0],d*100,h*100]},n.hcg.rgb=function(l){const c=l[0]/360,u=l[1]/100,d=l[2]/100;if(u===0)return[d*255,d*255,d*255];const h=[0,0,0],f=c%1*6,g=f%1,p=1-g;let v=0;switch(Math.floor(f)){case 0:h[0]=1,h[1]=g,h[2]=0;break;case 1:h[0]=p,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=g;break;case 3:h[0]=0,h[1]=p,h[2]=1;break;case 4:h[0]=g,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=p}return v=(1-u)*d,[(u*h[0]+v)*255,(u*h[1]+v)*255,(u*h[2]+v)*255]},n.hcg.hsv=function(l){const c=l[1]/100,u=l[2]/100,d=c+u*(1-c);let h=0;return d>0&&(h=c/d),[l[0],h*100,d*100]},n.hcg.hsl=function(l){const c=l[1]/100,d=l[2]/100*(1-c)+.5*c;let h=0;return d>0&&d<.5?h=c/(2*d):d>=.5&&d<1&&(h=c/(2*(1-d))),[l[0],h*100,d*100]},n.hcg.hwb=function(l){const c=l[1]/100,u=l[2]/100,d=c+u*(1-c);return[l[0],(d-c)*100,(1-d)*100]},n.hwb.hcg=function(l){const c=l[1]/100,d=1-l[2]/100,h=d-c;let f=0;return h<1&&(f=(d-h)/(1-h)),[l[0],h*100,f*100]},n.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},n.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},n.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},n.gray.hsl=function(l){return[0,0,l[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(l){return[0,100,l[0]]},n.gray.cmyk=function(l){return[0,0,0,l[0]]},n.gray.lab=function(l){return[l[0],0,0]},n.gray.hex=function(l){const c=Math.round(l[0]/100*255)&255,d=((c<<16)+(c<<8)+c).toString(16).toUpperCase();return"000000".substring(d.length)+d},n.rgb.gray=function(l){return[(l[0]+l[1]+l[2])/3/255*100]},conversions}var route,hasRequiredRoute;function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const s=requireConversions();function o(){const c={},u=Object.keys(s);for(let d=u.length,h=0;h<d;h++)c[u[h]]={distance:-1,parent:null};return c}function n(c){const u=o(),d=[c];for(u[c].distance=0;d.length;){const h=d.pop(),f=Object.keys(s[h]);for(let g=f.length,p=0;p<g;p++){const v=f[p],b=u[v];b.distance===-1&&(b.distance=u[h].distance+1,b.parent=h,d.unshift(v))}}return u}function a(c,u){return function(d){return u(c(d))}}function l(c,u){const d=[u[c].parent,c];let h=s[u[c].parent][c],f=u[c].parent;for(;u[f].parent;)d.unshift(u[f].parent),h=a(s[u[f].parent][f],h),f=u[f].parent;return h.conversion=d,h}return route=function(c){const u=n(c),d={},h=Object.keys(u);for(let f=h.length,g=0;g<f;g++){const p=h[g];u[p].parent!==null&&(d[p]=l(p,u))}return d},route}var colorConvert,hasRequiredColorConvert;function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const s=requireConversions(),o=requireRoute(),n={},a=Object.keys(s);function l(u){const d=function(...h){const f=h[0];return f==null?f:(f.length>1&&(h=f),u(h))};return"conversion"in u&&(d.conversion=u.conversion),d}function c(u){const d=function(...h){const f=h[0];if(f==null)return f;f.length>1&&(h=f);const g=u(h);if(typeof g=="object")for(let p=g.length,v=0;v<p;v++)g[v]=Math.round(g[v]);return g};return"conversion"in u&&(d.conversion=u.conversion),d}return a.forEach(u=>{n[u]={},Object.defineProperty(n[u],"channels",{value:s[u].channels}),Object.defineProperty(n[u],"labels",{value:s[u].labels});const d=o(u);Object.keys(d).forEach(f=>{const g=d[f];n[u][f]=c(g),n[u][f].raw=l(g)})}),colorConvert=n,colorConvert}var colorConvertExports=requireColorConvert();const index=getDefaultExportFromCjs(colorConvertExports),convert=_mergeNamespaces({__proto__:null,default:index},[colorConvertExports]),clamp$2=(s,o=0,n=1)=>s>n?n:s<o?o:s,round$4=(s,o=0,n=Math.pow(10,o))=>Math.round(n*s)/n,hexToHsva=s=>rgbaToHsva(hexToRgba(s)),hexToRgba=s=>(s[0]==="#"&&(s=s.substring(1)),s.length<6?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?round$4(parseInt(s[3]+s[3],16)/255,2):1}:{r:parseInt(s.substring(0,2),16),g:parseInt(s.substring(2,4),16),b:parseInt(s.substring(4,6),16),a:s.length===8?round$4(parseInt(s.substring(6,8),16)/255,2):1}),hsvaToHex=s=>rgbaToHex(hsvaToRgba(s)),hsvaToHsla=({h:s,s:o,v:n,a})=>{const l=(200-o)*n/100;return{h:round$4(s),s:round$4(l>0&&l<200?o*n/100/(l<=100?l:200-l)*100:0),l:round$4(l/2),a:round$4(a,2)}},hsvaToHslString=s=>{const{h:o,s:n,l:a}=hsvaToHsla(s);return`hsl(${o}, ${n}%, ${a}%)`},hsvaToRgba=({h:s,s:o,v:n,a})=>{s=s/360*6,o=o/100,n=n/100;const l=Math.floor(s),c=n*(1-o),u=n*(1-(s-l)*o),d=n*(1-(1-s+l)*o),h=l%6;return{r:round$4([n,u,c,c,d,n][h]*255),g:round$4([d,n,n,u,c,c][h]*255),b:round$4([c,c,d,n,n,u][h]*255),a:round$4(a,2)}},format$2=s=>{const o=s.toString(16);return o.length<2?"0"+o:o},rgbaToHex=({r:s,g:o,b:n,a})=>{const l=a<1?format$2(round$4(a*255)):"";return"#"+format$2(s)+format$2(o)+format$2(n)+l},rgbaToHsva=({r:s,g:o,b:n,a})=>{const l=Math.max(s,o,n),c=l-Math.min(s,o,n),u=c?l===s?(o-n)/c:l===o?2+(n-s)/c:4+(s-o)/c:0;return{h:round$4(60*(u<0?u+6:u)),s:round$4(l?c/l*100:0),v:round$4(l/255*100),a}},equalColorObjects=(s,o)=>{if(s===o)return!0;for(const n in s)if(s[n]!==o[n])return!1;return!0},equalHex=(s,o)=>s.toLowerCase()===o.toLowerCase()?!0:equalColorObjects(hexToRgba(s),hexToRgba(o)),cache={},tpl=s=>{let o=cache[s];return o||(o=document.createElement("template"),o.innerHTML=s,cache[s]=o),o},fire=(s,o,n)=>{s.dispatchEvent(new CustomEvent(o,{bubbles:!0,detail:n}))};let hasTouched=!1;const isTouch=s=>"touches"in s,isValid=s=>hasTouched&&!isTouch(s)?!1:(hasTouched||(hasTouched=isTouch(s)),!0),pointerMove=(s,o)=>{const n=isTouch(o)?o.touches[0]:o,a=s.el.getBoundingClientRect();fire(s.el,"move",s.getMove({x:clamp$2((n.pageX-(a.left+window.pageXOffset))/a.width),y:clamp$2((n.pageY-(a.top+window.pageYOffset))/a.height)}))},keyMove=(s,o)=>{const n=o.keyCode;n>40||s.xy&&n<37||n<33||(o.preventDefault(),fire(s.el,"move",s.getMove({x:n===39?.01:n===37?-.01:n===34?.05:n===33?-.05:n===35?1:n===36?-1:0,y:n===40?.01:n===38?-.01:0},!0)))};let Slider$1=class{constructor(o,n,a,l){const c=tpl(`<div role="slider" tabindex="0" part="${n}" ${a}><div part="${n}-pointer"></div></div>`);o.appendChild(c.content.cloneNode(!0));const u=o.querySelector(`[part=${n}]`);u.addEventListener("mousedown",this),u.addEventListener("touchstart",this),u.addEventListener("keydown",this),this.el=u,this.xy=l,this.nodes=[u.firstChild,u]}set dragging(o){const n=o?document.addEventListener:document.removeEventListener;n(hasTouched?"touchmove":"mousemove",this),n(hasTouched?"touchend":"mouseup",this)}handleEvent(o){switch(o.type){case"mousedown":case"touchstart":if(o.preventDefault(),!isValid(o)||!hasTouched&&o.button!=0)return;this.el.focus(),pointerMove(this,o),this.dragging=!0;break;case"mousemove":case"touchmove":o.preventDefault(),pointerMove(this,o);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":keyMove(this,o);break}}style(o){o.forEach((n,a)=>{for(const l in n)this.nodes[a].style.setProperty(l,n[l])})}};class Hue extends Slider$1{constructor(o){super(o,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:o}){this.h=o,this.style([{left:`${o/360*100}%`,color:hsvaToHslString({h:o,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${round$4(o)}`)}getMove(o,n){return{h:n?clamp$2(this.h+o.x*360,0,360):360*o.x}}}class Saturation extends Slider$1{constructor(o){super(o,"saturation",'aria-label="Color"',!0)}update(o){this.hsva=o,this.style([{top:`${100-o.v}%`,left:`${o.s}%`,color:hsvaToHslString(o)},{"background-color":hsvaToHslString({h:o.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${round$4(o.s)}%, Brightness ${round$4(o.v)}%`)}getMove(o,n){return{s:n?clamp$2(this.hsva.s+o.x*100,0,100):o.x*100,v:n?clamp$2(this.hsva.v-o.y*100,0,100):Math.round(100-o.y*100)}}}const css=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',hueCss="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",saturationCss="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",$isSame=Symbol("same"),$color=Symbol("color"),$hsva=Symbol("hsva"),$update=Symbol("update"),$parts=Symbol("parts"),$css=Symbol("css"),$sliders=Symbol("sliders");let ColorPicker$1=class extends HTMLElement{static get observedAttributes(){return["color"]}get[$css](){return[css,hueCss,saturationCss]}get[$sliders](){return[Saturation,Hue]}get color(){return this[$color]}set color(o){if(!this[$isSame](o)){const n=this.colorModel.toHsva(o);this[$update](n),this[$color]=o}}constructor(){super();const o=tpl(`<style>${this[$css].join("")}</style>`),n=this.attachShadow({mode:"open"});n.appendChild(o.content.cloneNode(!0)),n.addEventListener("move",this),this[$parts]=this[$sliders].map(a=>new a(n))}connectedCallback(){if(this.hasOwnProperty("color")){const o=this.color;delete this.color,this.color=o}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(o,n,a){const l=this.colorModel.fromAttr(a);this[$isSame](l)||(this.color=l)}handleEvent(o){const n=this[$hsva],a={...n,...o.detail};this[$update](a);let l;!equalColorObjects(a,n)&&!this[$isSame](l=this.colorModel.fromHsva(a))&&(this[$color]=l,fire(this,"color-changed",{value:l}))}[$isSame](o){return this.color&&this.colorModel.equal(o,this.color)}[$update](o){this[$hsva]=o,this[$parts].forEach(n=>n.update(o))}};const colorModel={defaultColor:"#000",toHsva:hexToHsva,fromHsva:({h:s,s:o,v:n})=>hsvaToHex({h:s,s:o,v:n,a:1}),equal:equalHex,fromAttr:s=>s};class HexBase extends ColorPicker$1{get colorModel(){return colorModel}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ViewCollection extends Collection{constructor(n=[]){super(n,{idProperty:"viewUid"});E(this,"_parentElement");this.on("add",(a,l,c)=>{this._renderViewIntoCollectionParent(l,c)}),this.on("remove",(a,l)=>{l.element&&this._parentElement&&l.element.remove()}),this._parentElement=null}destroy(){this.map(n=>n.destroy())}setParent(n){this._parentElement=n;for(const a of this)this._renderViewIntoCollectionParent(a)}delegate(...n){if(!n.length||!isStringArray(n))throw new CKEditorError("ui-viewcollection-delegate-wrong-events",this);return{to:a=>{for(const l of this)for(const c of n)l.delegate(c).to(a);this.on("add",(l,c)=>{for(const u of n)c.delegate(u).to(a)}),this.on("remove",(l,c)=>{for(const u of n)c.stopDelegating(u,a)})}}}_renderViewIntoCollectionParent(n,a){n.isRendered||n.render(),n.element&&this._parentElement&&this._parentElement.insertBefore(n.element,this._parentElement.children[a])}remove(n){return super.remove(n)}}function isStringArray(s){return s.every(o=>typeof o=="string")}const xhtmlNs="http://www.w3.org/1999/xhtml";class Template extends EmitterMixin(){constructor(n){super();E(this,"ns");E(this,"tag");E(this,"text");E(this,"attributes");E(this,"children");E(this,"eventListeners");E(this,"_isRendered");E(this,"_revertData");Object.assign(this,normalize$4(clone$5(n))),this._isRendered=!1,this._revertData=null}render(){const n=this._renderNode({intoFragment:!0});return this._isRendered=!0,n}apply(n){return this._revertData=getEmptyRevertData(),this._renderNode({node:n,intoFragment:!1,isApplying:!0,revertData:this._revertData}),n}revert(n){if(!this._revertData)throw new CKEditorError("ui-template-revert-not-applied",[this,n]);this._revertTemplateFromNode(n,this._revertData)}*getViews(){function*n(a){if(a.children)for(const l of a.children)isView(l)?yield l:isTemplate(l)&&(yield*n(l))}yield*n(this)}static bind(n,a){return{to(l,c){return new TemplateToBinding({eventNameOrFunction:l,attribute:l,observable:n,emitter:a,callback:c})},if(l,c,u){return new TemplateIfBinding({observable:n,emitter:a,attribute:l,valueIfTrue:c,callback:u})}}}static extend(n,a){if(n._isRendered)throw new CKEditorError("template-extend-render",[this,n]);extendTemplate(n,normalize$4(clone$5(a)))}_renderNode(n){let a;if(n.node?a=this.tag&&this.text:a=this.tag?this.text:!this.text,a)throw new CKEditorError("ui-template-wrong-syntax",this);return this.text?this._renderText(n):this._renderElement(n)}_renderElement(n){let a=n.node;return a||(a=n.node=document.createElementNS(this.ns||xhtmlNs,this.tag)),this._renderAttributes(n),this._renderElementChildren(n),this._setUpListeners(n),a}_renderText(n){let a=n.node;return a?n.revertData.text=a.textContent:a=n.node=document.createTextNode(""),hasTemplateBinding(this.text)?this._bindToObservable({schema:this.text,updater:getTextUpdater(a),data:n}):a.textContent=this.text.join(""),a}_renderAttributes(n){if(!this.attributes)return;const a=n.node,l=n.revertData;for(const c in this.attributes){const u=a.getAttribute(c),d=this.attributes[c];l&&(l.attributes[c]=u);const h=isNamespaced(d)?d[0].ns:null;if(hasTemplateBinding(d)){const f=isNamespaced(d)?d[0].value:d;l&&shouldExtend(c)&&f.unshift(u),this._bindToObservable({schema:f,updater:getAttributeUpdater(a,c,h),data:n})}else if(c=="style"&&typeof d[0]!="string")this._renderStyleAttribute(d[0],n);else{l&&u&&shouldExtend(c)&&d.unshift(u);const f=d.map(g=>g&&(g.value||g)).reduce((g,p)=>g.concat(p),[]).reduce(arrayValueReducer,"");isFalsy(f)||a.setAttributeNS(h,c,f)}}}_renderStyleAttribute(n,a){const l=a.node;for(const c in n){const u=n[c];hasTemplateBinding(u)?this._bindToObservable({schema:[u],updater:getStyleUpdater(l,c),data:a}):l.style[c]=u}}_renderElementChildren(n){const a=n.node,l=n.intoFragment?document.createDocumentFragment():a,c=n.isApplying;let u=0;for(const d of this.children)if(isViewCollection(d)){if(!c){d.setParent(a);for(const h of d)l.appendChild(h.element)}}else if(isView(d))c||(d.isRendered||d.render(),l.appendChild(d.element));else if(isNode(d))l.appendChild(d);else if(c){const h=n.revertData,f=getEmptyRevertData();h.children.push(f),d._renderNode({intoFragment:!1,node:l.childNodes[u++],isApplying:!0,revertData:f})}else l.appendChild(d.render());n.intoFragment&&a.appendChild(l)}_setUpListeners(n){if(this.eventListeners)for(const a in this.eventListeners){const l=this.eventListeners[a].map(c=>{const[u,d]=a.split("@");return c.activateDomEventListener(u,d,n)});n.revertData&&n.revertData.bindings.push(l)}}_bindToObservable({schema:n,updater:a,data:l}){const c=l.revertData;syncValueSchemaValue(n,a,l);const u=n.filter(d=>!isFalsy(d)).filter(d=>d.observable).map(d=>d.activateAttributeListener(n,a,l));c&&c.bindings.push(u)}_revertTemplateFromNode(n,a){for(const c of a.bindings)for(const u of c)u();if(a.text){n.textContent=a.text;return}const l=n;for(const c in a.attributes){const u=a.attributes[c];u===null?l.removeAttribute(c):l.setAttribute(c,u)}for(let c=0;c<a.children.length;++c)this._revertTemplateFromNode(l.childNodes[c],a.children[c])}}class TemplateBinding{constructor(o){E(this,"attribute");E(this,"observable");E(this,"emitter");E(this,"callback");this.attribute=o.attribute,this.observable=o.observable,this.emitter=o.emitter,this.callback=o.callback}getValue(o){const n=this.observable[this.attribute];return this.callback?this.callback(n,o):n}activateAttributeListener(o,n,a){const l=()=>syncValueSchemaValue(o,n,a);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,l),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,l)}}}class TemplateToBinding extends TemplateBinding{constructor(n){super(n);E(this,"eventNameOrFunction");this.eventNameOrFunction=n.eventNameOrFunction}activateDomEventListener(n,a,l){const c=(u,d)=>{(!a||d.target.matches(a))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(d):this.observable.fire(this.eventNameOrFunction,d))};return this.emitter.listenTo(l.node,n,c),()=>{this.emitter.stopListening(l.node,n,c)}}}class TemplateIfBinding extends TemplateBinding{constructor(n){super(n);E(this,"valueIfTrue");this.valueIfTrue=n.valueIfTrue}getValue(n){const a=super.getValue(n);return isFalsy(a)?!1:this.valueIfTrue||!0}}function hasTemplateBinding(s){return s?(s.value&&(s=s.value),Array.isArray(s)?s.some(hasTemplateBinding):s instanceof TemplateBinding):!1}function getValueSchemaValue(s,o){return s.map(n=>n instanceof TemplateBinding?n.getValue(o):n)}function syncValueSchemaValue(s,o,{node:n}){const a=getValueSchemaValue(s,n);let l;s.length==1&&s[0]instanceof TemplateIfBinding?l=a[0]:l=a.reduce(arrayValueReducer,""),isFalsy(l)?o.remove():o.set(l)}function getTextUpdater(s){return{set(o){s.textContent=o},remove(){s.textContent=""}}}function getAttributeUpdater(s,o,n){return{set(a){s.setAttributeNS(n,o,a)},remove(){s.removeAttributeNS(n,o)}}}function getStyleUpdater(s,o){return{set(n){s.style[o]=n},remove(){s.style[o]=null}}}function clone$5(s){return cloneDeepWith(s,n=>{if(n&&(n instanceof TemplateBinding||isTemplate(n)||isView(n)||isViewCollection(n)))return n})}function normalize$4(s){if(typeof s=="string"?s=normalizePlainTextDefinition(s):s.text&&normalizeTextDefinition(s),s.on&&(s.eventListeners=normalizeListeners(s.on),delete s.on),!s.text){s.attributes&&normalizeAttributes(s.attributes);const o=[];if(s.children)if(isViewCollection(s.children))o.push(s.children);else for(const n of s.children)isTemplate(n)||isView(n)||isNode(n)?o.push(n):o.push(new Template(n));s.children=o}return s}function normalizeAttributes(s){for(const o in s)s[o].value&&(s[o].value=toArray$2(s[o].value)),arrayify(s,o)}function normalizeListeners(s){for(const o in s)arrayify(s,o);return s}function normalizePlainTextDefinition(s){return{text:[s]}}function normalizeTextDefinition(s){s.text=toArray$2(s.text)}function arrayify(s,o){s[o]=toArray$2(s[o])}function arrayValueReducer(s,o){return isFalsy(o)?s:isFalsy(s)?o:`${s} ${o}`}function extendObjectValueArray(s,o){for(const n in o)s[n]?s[n].push(...o[n]):s[n]=o[n]}function extendTemplate(s,o){if(o.attributes&&(s.attributes||(s.attributes={}),extendObjectValueArray(s.attributes,o.attributes)),o.eventListeners&&(s.eventListeners||(s.eventListeners={}),extendObjectValueArray(s.eventListeners,o.eventListeners)),o.text&&s.text.push(...o.text),o.children&&o.children.length){if(s.children.length!=o.children.length)throw new CKEditorError("ui-template-extend-children-mismatch",s);let n=0;for(const a of o.children)extendTemplate(s.children[n++],a)}}function isFalsy(s){return!s&&s!==0}function isView(s){return s instanceof View$1}function isTemplate(s){return s instanceof Template}function isViewCollection(s){return s instanceof ViewCollection}function isNamespaced(s){return isObject$6(s[0])&&s[0].ns}function getEmptyRevertData(){return{children:[],bindings:[],attributes:{}}}function shouldExtend(s){return s=="class"||s=="style"}let View$1=class extends DomEmitterMixin(ObservableMixin()){constructor(n){super();E(this,"element");E(this,"isRendered");E(this,"locale");E(this,"t");E(this,"template");E(this,"_viewCollections");E(this,"_unboundChildren");E(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=n,this.t=n&&n.t,this._viewCollections=new Collection,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(a,l)=>{l.locale=n,l.t=n&&n.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Template.bind(this,this)}createCollection(n){const a=new ViewCollection(n);return this._viewCollections.add(a),a}registerChild(n){isIterable(n)||(n=[n]);for(const a of n)this._unboundChildren.add(a)}deregisterChild(n){isIterable(n)||(n=[n]);for(const a of n)this._unboundChildren.remove(a)}setTemplate(n){this.template=new Template(n)}extendTemplate(n){Template.extend(this.template,n)}render(){if(this.isRendered)throw new CKEditorError("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(n=>n.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function clickOutsideHandler({emitter:s,activator:o,callback:n,contextElements:a,listenerOptions:l}){s.listenTo(document,"mousedown",(c,u)=>{if(!o())return;const d=typeof u.composedPath=="function"?u.composedPath():[],h=typeof a=="function"?a():a;for(const f of h)if(f.contains(u.target)||d.includes(f))return;n()},l)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CssTransitionDisablerMixin(s){class o extends s{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...a){super(...a),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function submitHandler({view:s}){s.listenTo(s.element,"submit",(o,n)=>{n.preventDefault(),s.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function addKeyboardHandlingForGrid({keystrokeHandler:s,focusTracker:o,gridItems:n,numberOfColumns:a,uiLanguageDirection:l}){const c=typeof a=="number"?()=>a:a;s.set("arrowright",u((f,g)=>l==="rtl"?h(f,g.length):d(f,g.length))),s.set("arrowleft",u((f,g)=>l==="rtl"?d(f,g.length):h(f,g.length))),s.set("arrowup",u((f,g)=>{let p=f-c();return p<0&&(p=f+c()*Math.floor(g.length/c()),p>g.length-1&&(p-=c())),p})),s.set("arrowdown",u((f,g)=>{let p=f+c();return p>g.length-1&&(p=f%c()),p}));function u(f){return g=>{const p=n.find(_=>_.element===o.focusedElement),v=n.getIndex(p),b=f(v,n);n.get(b).focus(),g.stopPropagation(),g.preventDefault()}}function d(f,g){return f===g-1?0:f+1}function h(f,g){return f===0?g-1:f-1}}const Ut=class Ut extends View$1{constructor(){super();const o=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",o.if("isVisible","ck-hidden",n=>!n),"ck-reset_all-excluded",o.if("isColorInherited","ck-icon_inherit-color")],viewBox:o.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const n=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),a=n.getAttribute("viewBox");a&&(this.viewBox=a);for(const{name:l,value:c}of Array.from(n.attributes))Ut.presentationalAttributeNames.includes(l)&&this.element.setAttribute(l,c);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;n.childNodes.length>0;)this.element.appendChild(n.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(o=>{o.style.fill=this.fillColor})}};E(Ut,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let IconView=Ut;class ButtonLabelView extends View$1{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const o=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:o.to("style"),id:o.to("id")},children:[{text:o.to("text")}]})}}class ButtonView extends View$1{constructor(n,a=new ButtonLabelView){super(n);E(this,"children");E(this,"labelView");E(this,"iconView");E(this,"keystrokeView");E(this,"_focusDelayed",null);const l=this.bindTemplate,c=uid();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${c}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(a),this.iconView=new IconView,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const u={tag:"button",attributes:{class:["ck","ck-button",l.to("class"),l.if("isEnabled","ck-disabled",d=>!d),l.if("isVisible","ck-hidden",d=>!d),l.to("isOn",d=>d?"ck-on":"ck-off"),l.if("withText","ck-button_with-text"),l.if("withKeystroke","ck-button_with-keystroke")],role:l.to("role"),type:l.to("type",d=>d||"button"),tabindex:l.to("tabindex"),"aria-checked":l.to("_ariaChecked"),"aria-pressed":l.to("_ariaPressed"),"aria-label":l.to("ariaLabel"),"aria-labelledby":l.to("ariaLabelledBy"),"aria-disabled":l.if("isEnabled",!0,d=>!d),"data-cke-tooltip-text":l.to("_tooltipString"),"data-cke-tooltip-position":l.to("tooltipPosition")},children:this.children,on:{click:l.to(d=>{this.isEnabled?this.fire("execute"):d.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(d,h,f)=>!h||isCheckableRole(f)?!1:String(!!d)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(d,h,f)=>!h||!isCheckableRole(f)?!1:String(!!d)),env$1.isSafari&&(this._focusDelayed||(this._focusDelayed=delay(()=>this.focus(),0)),u.on.mousedown=l.to(()=>{this._focusDelayed()}),u.on.mouseup=l.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(u)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(n){return n.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),n}_createKeystrokeView(){const n=new View$1;return n.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",a=>getEnvKeystrokeText(a))}]}),n}_getTooltipString(n,a,l){return n?typeof n=="string"?n:(l&&(l=getEnvKeystrokeText(l)),n instanceof Function?n(a,l):`${a}${l?` (${l})`:""}`):""}}function isCheckableRole(s){switch(s){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class FormHeaderView extends View$1{constructor(n,a={}){super(n);E(this,"children");E(this,"iconView");const l=this.bindTemplate;this.set("label",a.label||""),this.set("class",a.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",l.to("class")]},children:this.children}),a.icon&&(this.iconView=new IconView,this.iconView.content=a.icon,this.children.add(this.iconView));const c=new View$1(n);c.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:l.to("label")}]}),this.children.add(c)}}class FocusCycler extends EmitterMixin(){constructor(n){super();E(this,"focusables");E(this,"focusTracker");E(this,"keystrokeHandler");E(this,"actions");if(this.focusables=n.focusables,this.focusTracker=n.focusTracker,this.keystrokeHandler=n.keystrokeHandler,this.actions=n.actions,n.actions&&n.keystrokeHandler)for(const a in n.actions){let l=n.actions[a];typeof l=="string"&&(l=[l]);for(const c of l)n.keystrokeHandler.set(c,(u,d)=>{this[a](),d()},n.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(isDomFocusable)||null}get last(){return this.focusables.filter(isDomFocusable).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let n=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((a,l)=>{const c=a.element===this.focusTracker.focusedElement;return c&&(n=l),c}),n)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const n=this.next;if(n&&this.focusables.getIndex(n)===this.current){this.fire("forwardCycle");return}n===this.first?this.fire("forwardCycle"):this._focus(n,1)}focusPrevious(){const n=this.previous;if(n&&this.focusables.getIndex(n)===this.current){this.fire("backwardCycle");return}n===this.last?this.fire("backwardCycle"):this._focus(n,-1)}chain(n){const a=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(n,"forwardCycle",l=>{const c=a();this.focusNext(),c!==a()&&l.stop()},{priority:"low"}),this.listenTo(n,"backwardCycle",l=>{const c=a();this.focusPrevious(),c!==a()&&l.stop()},{priority:"low"})}unchain(n){this.stopListening(n)}_focus(n,a){n&&this.focusTracker.focusedElement!==n.element&&n.focus(a)}_getDomFocusableItem(n){const a=this.focusables.length;if(!a)return null;const l=this.current;if(l===null)return this[n===1?"first":"last"];let c=this.focusables.get(l),u=(l+a+n)%a;do{const d=this.focusables.get(u);if(isDomFocusable(d)){c=d;break}u=(u+a+n)%a}while(u!==l);return c}}function isDomFocusable(s){return isFocusable(s)&&isVisible(s.element)}function isFocusable(s){return"focus"in s&&typeof s.focus=="function"}function isViewWithFocusCycler(s){return isFocusable(s)&&"focusCycler"in s&&s.focusCycler instanceof FocusCycler}function DraggableViewMixin(s){class o extends s{constructor(...l){super(...l);E(this,"_onDragBound",this._onDrag.bind(this));E(this,"_onDragEndBound",this._onDragEnd.bind(this));E(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(global$1.document,"mouseup",this._onDragEndBound),this.listenTo(global$1.document,"touchend",this._onDragEndBound),this.listenTo(global$1.document,"mousemove",this._onDragBound),this.listenTo(global$1.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(global$1.document,"mouseup",this._onDragEndBound),this.stopListening(global$1.document,"touchend",this._onDragEndBound),this.stopListening(global$1.document,"mousemove",this._onDragBound),this.stopListening(global$1.document,"touchmove",this._onDragBound)}_onDragStart(l,c){if(!this._isHandleElementPressed(c))return;this._attachDragListeners();let u=0,d=0;c instanceof MouseEvent?(u=c.clientX,d=c.clientY):(u=c.touches[0].clientX,d=c.touches[0].clientY),this._lastDraggingCoordinates={x:u,y:d},this.isDragging=!0}_onDrag(l,c){if(!this.isDragging){this._detachDragListeners();return}let u=0,d=0;c instanceof MouseEvent?(u=c.clientX,d=c.clientY):(u=c.touches[0].clientX,d=c.touches[0].clientY),c.preventDefault(),this.fire("drag",{deltaX:Math.round(u-this._lastDraggingCoordinates.x),deltaY:Math.round(d-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:u,y:d}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(l){return this.dragHandleElement?this.dragHandleElement===l.target||l.target instanceof HTMLElement&&this.dragHandleElement.contains(l.target):!1}}return o}class DialogActionsView extends View$1{constructor(n){super(n);E(this,"children");E(this,"keystrokes");E(this,"focusCycler");E(this,"_focusTracker");E(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new KeystrokeHandler,this._focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(n){for(const a of n){const l=new ButtonView(this.locale);let c;l.on("execute",()=>a.onExecute()),a.onCreate&&a.onCreate(l);for(c in a)c!="onExecute"&&c!="onCreate"&&l.set(c,a[c]);this.children.add(l)}this._updateFocusCyclableItems()}focus(n){n===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(n=>{this._focusables.add(n),this._focusTracker.add(n.element)})}}class DialogContentView extends View$1{constructor(n){super(n);E(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const DialogViewPosition={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},toPx$6=toUnit("px"),jt=class jt extends DraggableViewMixin(View$1){constructor(n,{getCurrentDomRoot:a,getViewportOffset:l,keystrokeHandlerOptions:c}){super(n);E(this,"parts");E(this,"headerView");E(this,"closeButtonView");E(this,"actionsView");E(this,"contentView");E(this,"keystrokes");E(this,"focusTracker");E(this,"wasMoved",!1);E(this,"_getCurrentDomRoot");E(this,"_getViewportOffset");E(this,"_focusables");E(this,"_focusCycler");const u=this.bindTemplate,d=n.t;this.set("className",""),this.set("ariaLabel",d("Editor dialog")),this.set("isModal",!1),this.set("position",DialogViewPosition.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=a,this._getViewportOffset=l,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:c}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",u.if("isModal","ck-dialog-overlay__transparent",h=>!h),u.if("_isVisible","ck-hidden",h=>!h)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",u.if("isModal","ck-dialog_modal"),u.to("className")],role:"dialog","aria-label":u.to("ariaLabel"),style:{top:u.to("_top",h=>toPx$6(h)),left:u.to("_left",h=>toPx$6(h)),visibility:u.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(n,a)=>{n.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),a())}),this.on("drag",(n,{deltaX:a,deltaY:l})=>{this.wasMoved=!0,this.moveBy(a,l)}),this.listenTo(global$1.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(global$1.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(n,a,l)=>{l&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:n,title:a,hasCloseButton:l=!0,content:c,actionButtons:u}){a&&(this.headerView=new FormHeaderView(this.locale,{icon:n}),l&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=a,this.ariaLabel=a,this.parts.add(this.headerView,0)),c&&(c instanceof View$1&&(c=[c]),this.contentView=new DialogContentView(this.locale),this.contentView.children.addMany(c),this.parts.add(this.contentView)),u&&(this.actionsView=new DialogActionsView(this.locale),this.actionsView.setButtons(u),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(n,a){const l=this._getViewportRect(),c=this._getDialogRect();n+c.width>l.right&&(n=l.right-c.width),n<l.left&&(n=l.left),a<l.top&&(a=l.top),this._moveTo(n,a)}_moveTo(n,a){this._left=n,this._top=a}moveBy(n,a){this.moveTo(this._left+n,this._top+a)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const n=this._getViewportRect();let a=this.position,l;this._getCurrentDomRoot()?l=this._getVisibleDomRootRect(n):a=DialogViewPosition.SCREEN_CENTER;const c=jt.defaultOffset,u=this._getDialogRect();switch(a){case DialogViewPosition.EDITOR_TOP_SIDE:{if(l){const d=this.locale.contentLanguageDirection==="ltr"?l.right-u.width-c:l.left+c;this.moveTo(d,l.top+c)}else this._moveOffScreen();break}case DialogViewPosition.EDITOR_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),Math.round(l.top+l.height/2-u.height/2)):this._moveOffScreen();break}case DialogViewPosition.SCREEN_CENTER:{this.moveTo(Math.round((n.width-u.width)/2),Math.round((n.height-u.height)/2));break}case DialogViewPosition.EDITOR_TOP_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.top+c):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BOTTOM_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.bottom-u.height-c):this._moveOffScreen();break}case DialogViewPosition.EDITOR_ABOVE_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.top-u.height-c):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BELOW_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.bottom+c):this._moveOffScreen();break}}}_getVisibleDomRootRect(n){let a=new Rect$3(this._getCurrentDomRoot()).getVisible();if(a){if(a=n.getIntersection(a),!a)return null}else return null;return a}_getDialogRect(){return new Rect$3(this.element.firstElementChild)}_getViewportRect(){const n=new Rect$3(global$1.window);if(this.isModal)return n;const a={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return n.top+=a.top,n.height-=a.top,n.bottom-=a.bottom,n.height-=a.bottom,n.left+=a.left,n.right-=a.right,n.width-=a.left+a.right,n}_updateFocusCyclableItems(){const n=[];if(this.contentView)for(const a of this.contentView.children)isFocusable(a)&&n.push(a);this.actionsView&&n.push(this.actionsView),this.closeButtonView&&n.push(this.closeButtonView),n.forEach(a=>{this._focusables.add(a),this.focusTracker.add(a.element),isViewWithFocusCycler(a)&&this._focusCycler.chain(a.focusCycler)})}_createCloseButton(){const n=new ButtonView(this.locale),a=this.locale.t;return n.set({label:a("Close"),tooltip:!0,icon:icons.cancel}),n.on("execute",()=>this.fire("close",{source:"closeButton"})),n}};E(jt,"defaultOffset",15);let DialogView=jt;const ot=class ot extends Plugin{constructor(n){super(n);E(this,"view");E(this,"_onHide");const a=n.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),n.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:a("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),ot._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(n,a)=>{this._show(a)}),this.on("show",(n,a)=>{a.onShow&&a.onShow(this)},{priority:"low"}),this.on("hide",()=>{ot._visibleDialogPlugin&&ot._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const n=this.editor;n.keystrokes.set("Ctrl+F6",(a,l)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?n.editing.view.focus():this.view.focus(),l())})}_initMultiRootIntegration(){const n=this.editor.model;n.document.on("change:data",()=>{if(!this.view)return;const a=n.document.differ.getChangedRoots();for(const l of a)l.state&&this.view.updatePosition()})}show(n){this.hide(),this.fire(`show:${n.id}`,n)}_show({id:n,icon:a,title:l,hasCloseButton:c=!0,content:u,actionButtons:d,className:h,isModal:f,position:g,onHide:p,keystrokeHandlerOptions:v}){const b=this.editor;this.view=new DialogView(b.locale,{getCurrentDomRoot:()=>b.editing.view.getDomRoot(b.model.document.selection.anchor.root.rootName),getViewportOffset:()=>b.ui.viewportOffset,keystrokeHandlerOptions:v});const _=this.view;_.on("close",()=>{this.hide()}),b.ui.view.body.add(_),b.keystrokes.listenTo(_.element),g||(g=f?DialogViewPosition.SCREEN_CENTER:DialogViewPosition.EDITOR_CENTER),f&&this._lockBodyScroll(),_.set({position:g,_isVisible:!0,className:h,isModal:f}),_.setupParts({icon:a,title:l,hasCloseButton:c,content:u,actionButtons:d}),this.id=n,p&&(this._onHide=p),this.isOpen=!0,ot._visibleDialogPlugin=this}hide(){ot._visibleDialogPlugin&&ot._visibleDialogPlugin.fire(`hide:${ot._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const n=this.editor,a=this.view;a.isModal&&this._unlockBodyScroll(),a.contentView&&a.contentView.reset(),n.ui.view.body.remove(a),n.ui.focusTracker.remove(a.element),n.keystrokes.stopListening(a.element),a.destroy(),n.editing.view.focus(),this.id=null,this.isOpen=!1,ot._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};E(ot,"_visibleDialogPlugin");let Dialog=ot;class ListItemButtonView extends ButtonView{constructor(n,a=new ButtonLabelView){super(n,a);E(this,"_checkIconHolderView",new CheckIconHolderView);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const l=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",l.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(c,u)=>c||u)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",n=>this.isToggleable&&n),this.on("change:_hasCheck",(n,a,l)=>{const{children:c,_checkIconHolderView:u}=this;l?c.add(u,0):c.remove(u)})}}class CheckIconHolderView extends View$1{constructor(){super();E(this,"children");E(this,"_checkIconView",this._createCheckIconView());const n=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",n.to("isOn",a=>a?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(n,a,l)=>{const{children:c,_checkIconView:u}=this;l&&!c.has(u)?c.add(u):!l&&c.has(u)&&c.remove(u)})}_createCheckIconView(){const n=new IconView;return n.content=icons.check,n.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),n}}class MenuBarMenuListItemButtonView extends ListItemButtonView{constructor(o){super(o),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class LabelView extends View$1{constructor(n){super(n);E(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${uid()}`;const a=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:a.to("for")},children:[{text:a.to("text")}]})}}class AccessibilityHelpContentView extends View$1{constructor(o,n){super(o);const a=o.t,l=new LabelView;l.text=a("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":l.id,role:"document",tabindex:-1},children:[createElement$1(document,"p",{},a("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(n.values())),l]})}focus(){this.element.focus()}_createCategories(o){return o.map(n=>{const a=[createElement$1(document,"h3",{},n.label),...Array.from(n.groups.values()).map(l=>this._createGroup(l)).flat()];return n.description&&a.splice(1,0,createElement$1(document,"p",{},n.description)),createElement$1(document,"section",{},a)})}_createGroup(o){const n=o.keystrokes.sort((l,c)=>l.label.localeCompare(c.label)).map(l=>this._createGroupRow(l)).flat(),a=[createElement$1(document,"dl",{},n)];return o.label&&a.unshift(createElement$1(document,"h4",{},o.label)),a}_createGroupRow(o){const n=this.locale.t,a=createElement$1(document,"dt"),l=createElement$1(document,"dd"),c=normalizeKeystrokeDefinition(o.keystroke),u=[];for(const d of c)u.push(d.map(keystrokeToEnvKbd).join(""));return a.innerHTML=o.label,l.innerHTML=u.join(", ")+(o.mayRequireFn&&env$1.isMac?` ${n("(may require <kbd>Fn</kbd>)")}`:""),[a,l]}}function keystrokeToEnvKbd(s){return getEnvKeystrokeText(s).split("+").map(o=>`<kbd>${o}</kbd>`).join("+")}function normalizeKeystrokeDefinition(s){return typeof s=="string"?[[s]]:typeof s[0]=="string"?[s]:s}var accessibilityIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class AccessibilityHelp extends Plugin{constructor(){super(...arguments);E(this,"contentView",null)}static get requires(){return[Dialog]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.locale.t;n.ui.componentFactory.add("accessibilityHelp",()=>{const l=this._createButton(ButtonView);return l.set({tooltip:!0,withText:!1,label:a("Accessibility help")}),l}),n.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const l=this._createButton(MenuBarMenuListItemButtonView);return l.label=a("Accessibility"),l}),n.keystrokes.set("Alt+0",(l,c)=>{this._toggleDialog(),c()}),this._setupRootLabels()}_createButton(n){const a=this.editor,l=a.plugins.get("Dialog"),c=a.locale,u=new n(c);return u.set({keystroke:"Alt+0",icon:accessibilityIcon,isToggleable:!0}),u.on("execute",()=>this._toggleDialog()),u.bind("isOn").to(l,"id",d=>d==="accessibilityHelp"),u}_setupRootLabels(){const n=this.editor,a=n.editing.view,l=n.t;n.ui.on("ready",()=>{a.change(u=>{for(const d of a.document.roots)c(u,d)}),n.on("addRoot",(u,d)=>{const h=n.editing.view.document.getRoot(d.rootName);a.change(f=>c(f,h))},{priority:"low"})});function c(u,d){const f=[d.getAttribute("aria-label"),l("Press %0 for help.",[getEnvKeystrokeText("Alt+0")])].filter(g=>g).join(". ");u.setAttribute("aria-label",f,d)}}_toggleDialog(){const n=this.editor,a=n.plugins.get("Dialog"),l=n.locale.t;this.contentView||(this.contentView=new AccessibilityHelpContentView(n.locale,n.accessibility.keystrokeInfos)),a.id==="accessibilityHelp"?a.hide():a.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:l("Accessibility help"),icon:accessibilityIcon,hasCloseButton:!0,content:this.contentView})}}const it=class it extends ViewCollection{constructor(n,a=[]){super(a);E(this,"locale");E(this,"_bodyCollectionContainer");this.locale=n}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Template({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!it._bodyWrapper||!it._bodyWrapper.isConnected)&&(it._bodyWrapper=createElement$1(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(it._bodyWrapper)),it._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),it._bodyWrapper&&!it._bodyWrapper.childElementCount&&(it._bodyWrapper.remove(),delete it._bodyWrapper)}};E(it,"_bodyWrapper");let BodyCollection=it;class SwitchButtonView extends ButtonView{constructor(n){super(n);E(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const n=new View$1;return n.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),n}}class FileDialogButtonView extends FileDialogViewMixin(ButtonView){}class FileDialogListItemButtonView extends FileDialogViewMixin(ListItemButtonView){}function FileDialogViewMixin(s){class o extends s{constructor(...l){super(...l);E(this,"buttonView");E(this,"_fileInputView");this.buttonView=this,this._fileInputView=new FileInputView(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return o}class FileInputView extends View$1{constructor(o){super(o),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:n.to("acceptedType"),multiple:n.to("allowMultipleFiles")},on:{change:n.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var dropdownArrowIcon='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class CollapsibleView extends View$1{constructor(n,a){super(n);E(this,"buttonView");E(this,"children");const l=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),a&&this.children.addMany(a),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",l.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:l.if("isCollapsed","hidden"),"aria-labelledby":l.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const n=new ButtonView(this.locale),a=n.bindTemplate;return n.set({withText:!0,icon:dropdownArrowIcon}),n.extendTemplate({attributes:{"aria-expanded":a.to("isOn",l=>String(l))}}),n.bind("label").to(this),n.bind("isOn").to(this,"isCollapsed",l=>!l),n.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedColorOptions(s,o){const n=s.t,a={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return o.map(l=>{const c=a[l.label];return c&&c!=l.label&&(l.label=c),l})}function normalizeColorOptions(s){return s.map(normalizeSingleColorDefinition).filter(o=>!!o)}function normalizeSingleColorDefinition(s){return typeof s=="string"?{model:s,label:s,hasBorder:!1,view:{name:"span",styles:{color:s}}}:{model:s.color,label:s.label||s.color,hasBorder:s.hasBorder===void 0?!1:s.hasBorder,view:{name:"span",styles:{color:`${s.color}`}}}}var checkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class ColorTileView extends ButtonView{constructor(o){super(o);const n=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=checkIcon,this.extendTemplate({attributes:{style:{backgroundColor:n.to("color",a=>env$1.isMediaForcedColors?null:a)},class:["ck","ck-color-grid__tile",n.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class ColorGridView extends View$1{constructor(n,a){super(n);E(this,"columns");E(this,"items");E(this,"focusTracker");E(this,"keystrokes");const l=a&&a.colorDefinitions?a.colorDefinitions:[];this.columns=a&&a.columns?a.columns:5;const c={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.items.on("add",(u,d)=>{d.isOn=d.color===this.selectedColor}),l.forEach(u=>{const d=new ColorTileView;d.set({color:u.color,label:u.label,tooltip:!0,hasBorder:u.options.hasBorder}),d.on("execute",()=>{this.fire("execute",{value:u.color,hasBorder:u.options.hasBorder,label:u.label})}),this.items.add(d)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:c}}),this.on("change:selectedColor",(u,d,h)=>{for(const f of this.items)f.isOn=f.color===h})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const n of this.items)this.focusTracker.add(n.element);this.items.on("add",(n,a)=>{this.focusTracker.add(a.element)}),this.items.on("remove",(n,a)=>{this.focusTracker.remove(a.element)}),this.keystrokes.listenTo(this.element),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertColor(s,o){if(!s)return"";const n=parseColorString(s);if(!n)return"";if(n.space===o)return s;if(!canConvertParsedColor(n))return"";const l=convert[n.space][o];if(!l)return"";const c=l(n.space==="hex"?n.hexValue:n.values);return formatColorOutput(c,o)}function convertToHex(s){if(!s)return"";const o=parseColorString(s);return o?o.space==="hex"?o.hexValue:convertColor(s,"hex"):"#000"}function registerCustomElement(s,o){customElements.get(s)===void 0&&customElements.define(s,o)}function formatColorOutput(s,o){switch(o){case"hex":return`#${s}`;case"rgb":return`rgb(${s[0]}, ${s[1]}, ${s[2]})`;case"hsl":return`hsl(${s[0]}, ${s[1]}%, ${s[2]}%)`;case"hwb":return`hwb(${s[0]}, ${s[1]}, ${s[2]})`;case"lab":return`lab(${s[0]}% ${s[1]} ${s[2]})`;case"lch":return`lch(${s[0]}% ${s[1]} ${s[2]})`;default:return""}}function parseColorString(s){if(s.startsWith("#")){const n=parse$1(s);return{space:"hex",values:n.values,hexValue:s,alpha:n.alpha}}const o=parse$1(s);return o.space?o:null}function canConvertParsedColor(s){return Object.keys(convert).includes(s.space)}class LabeledFieldView extends View$1{constructor(n,a){super(n);E(this,"fieldView");E(this,"labelView");E(this,"statusView");E(this,"fieldWrapperChildren");const l=`ck-labeled-field-view-${uid()}`,c=`ck-labeled-field-view-status-${uid()}`;this.fieldView=a(this,l,c),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(l),this.statusView=this._createStatusView(c),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(d,h)=>d||h);const u=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",u.to("class"),u.if("isEnabled","ck-disabled",d=>!d),u.if("isEmpty","ck-labeled-field-view_empty"),u.if("isFocused","ck-labeled-field-view_focused"),u.if("placeholder","ck-labeled-field-view_placeholder"),u.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(n){const a=new LabelView(this.locale);return a.for=n,a.bind("text").to(this,"label"),a}_createStatusView(n){const a=new View$1(this.locale),l=this.bindTemplate;return a.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",l.if("errorText","ck-labeled-field-view__status_error"),l.if("_statusText","ck-hidden",c=>!c)],id:n,role:l.if("errorText","alert")},children:[{text:l.to("_statusText")}]}),a}focus(n){this.fieldView.focus(n)}}class InputBase extends View$1{constructor(n){super(n);E(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new FocusTracker,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const a=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",a.if("isFocused","ck-input_focused"),a.if("isEmpty","ck-input-text_empty"),a.if("hasError","ck-error")],id:a.to("id"),placeholder:a.to("placeholder"),tabindex:a.to("tabIndex"),readonly:a.to("isReadOnly"),"aria-invalid":a.if("hasError",!0),"aria-describedby":a.to("ariaDescribedById"),"aria-label":a.to("ariaLabel")},on:{input:a.to((...l)=>{this.fire("input",...l),this._updateIsEmpty()}),change:a.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(n,a,l)=>{this._setDomElementValue(l),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=isInputElementEmpty(this.element)}_setDomElementValue(n){this.element.value=!n&&n!==0?"":n}}function isInputElementEmpty(s){return!s.value}class InputView extends InputBase{constructor(o){super(o),this.set("inputMode","text");const n=this.bindTemplate;this.extendTemplate({attributes:{inputmode:n.to("inputMode")}})}}class InputTextView extends InputView{constructor(o){super(o),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class InputNumberView extends InputView{constructor(o,{min:n,max:a,step:l}={}){super(o);const c=this.bindTemplate;this.set("min",n),this.set("max",a),this.set("step",l),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:c.to("min"),max:c.to("max"),step:c.to("step")}})}}class DropdownPanelView extends View$1{constructor(n){super(n);E(this,"children");const a=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",a.to("position",l=>`ck-dropdown__panel_${l}`),a.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:a.to(l=>{l.target.tagName.toLocaleLowerCase()!=="input"&&l.preventDefault()})}})}focus(){if(this.children.length){const n=this.children.first;typeof n.focus=="function"?n.focus():logWarning("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const n=this.children.last;typeof n.focusLast=="function"?n.focusLast():n.focus()}}}const Dt=class Dt extends View$1{constructor(n,a,l){super(n);E(this,"buttonView");E(this,"panelView");E(this,"focusTracker");E(this,"keystrokes");E(this,"listView");E(this,"toolbarView");E(this,"menuView");const c=this.bindTemplate;this.buttonView=a,this.panelView=l,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",c.to("class"),c.if("isEnabled","ck-disabled",u=>!u)],id:c.to("id"),"aria-describedby":c.to("ariaDescribedById")},children:[a,l]}),a.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":c.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(a,l,c)=>{if(c)if(this.panelPosition==="auto"){const u=Dt._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=u?u.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const n=(a,l)=>{this.isOpen&&(this.isOpen=!1,l())};this.keystrokes.set("arrowdown",(a,l)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,l())}),this.keystrokes.set("arrowright",(a,l)=>{this.isOpen&&l()}),this.keystrokes.set("arrowleft",n),this.keystrokes.set("esc",n)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:n,north:a,southEast:l,southWest:c,northEast:u,northWest:d,southMiddleEast:h,southMiddleWest:f,northMiddleEast:g,northMiddleWest:p}=Dt.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[l,c,h,f,n,u,d,g,p,a]:[c,l,f,h,n,d,u,p,g,a]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};E(Dt,"defaultPanelPositions",{south:(n,a)=>({top:n.bottom,left:n.left-(a.width-n.width)/2,name:"s"}),southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,a)=>({top:n.bottom,left:n.left-a.width+n.width,name:"sw"}),southMiddleEast:(n,a)=>({top:n.bottom,left:n.left-(a.width-n.width)/4,name:"sme"}),southMiddleWest:(n,a)=>({top:n.bottom,left:n.left-(a.width-n.width)*3/4,name:"smw"}),north:(n,a)=>({top:n.top-a.height,left:n.left-(a.width-n.width)/2,name:"n"}),northEast:(n,a)=>({top:n.top-a.height,left:n.left,name:"ne"}),northWest:(n,a)=>({top:n.top-a.height,left:n.left-a.width+n.width,name:"nw"}),northMiddleEast:(n,a)=>({top:n.top-a.height,left:n.left-(a.width-n.width)/4,name:"nme"}),northMiddleWest:(n,a)=>({top:n.top-a.height,left:n.left-(a.width-n.width)*3/4,name:"nmw"})}),E(Dt,"_getOptimalPosition",getOptimalPosition);let DropdownView=Dt;class DropdownButtonView extends ButtonView{constructor(n){super(n);E(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",a=>String(a))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const n=new IconView;return n.content=dropdownArrowIcon,n.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),n}}class ListItemView extends View$1{constructor(n){super(n);E(this,"children");const a=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",a.if("isVisible","ck-hidden",l=>!l)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class ListSeparatorView extends View$1{constructor(o){super(o),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class ListItemGroupView extends View$1{constructor(n,a=new LabelView){super(n);E(this,"labelView");E(this,"items");E(this,"children");const l=this.bindTemplate,c=new ListView(n);this.set({label:"",isVisible:!0}),this.labelView=a,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,c]),c.set({role:"group",ariaLabelledBy:a.id}),c.focusTracker.destroy(),c.keystrokes.destroy(),this.items=c.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",l.if("isVisible","ck-hidden",u=>!u)]},children:this.children})}focus(){if(this.items){const n=this.items.find(a=>!(a instanceof ListSeparatorView));n&&n.focus()}}}class ListView extends View$1{constructor(n){super(n);E(this,"focusables");E(this,"items");E(this,"focusTracker");E(this,"keystrokes");E(this,"_focusCycler");E(this,"_listItemGroupToChangeListeners",new WeakMap);const a=this.bindTemplate;this.focusables=new ViewCollection,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:a.to("role"),"aria-label":a.to("ariaLabel"),"aria-labelledby":a.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const n of this.items)n instanceof ListItemGroupView?this._registerFocusableItemsGroup(n):n instanceof ListItemView&&this._registerFocusableListItem(n);this.items.on("change",(n,a)=>{for(const l of a.removed)l instanceof ListItemGroupView?this._deregisterFocusableItemsGroup(l):l instanceof ListItemView&&this._deregisterFocusableListItem(l);for(const l of Array.from(a.added).reverse())l instanceof ListItemGroupView?this._registerFocusableItemsGroup(l,a.index):this._registerFocusableListItem(l,a.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(n,a){this.focusTracker.add(n.element),this.focusables.add(n,a)}_deregisterFocusableListItem(n){this.focusTracker.remove(n.element),this.focusables.remove(n)}_getOnGroupItemsChangeCallback(n){return(a,l)=>{for(const c of l.removed)this._deregisterFocusableListItem(c);for(const c of Array.from(l.added).reverse())this._registerFocusableListItem(c,this.items.getIndex(n)+l.index)}}_registerFocusableItemsGroup(n,a){Array.from(n.items).forEach((c,u)=>{const d=typeof a<"u"?a+u:void 0;this._registerFocusableListItem(c,d)});const l=this._getOnGroupItemsChangeCallback(n);this._listItemGroupToChangeListeners.set(n,l),n.items.on("change",l)}_deregisterFocusableItemsGroup(n){for(const a of n.items)this._deregisterFocusableListItem(a);n.items.off("change",this._listItemGroupToChangeListeners.get(n)),this._listItemGroupToChangeListeners.delete(n)}}const toPx$5=toUnit("px"),POSITION_OFF_SCREEN={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Qe=class Qe extends View$1{constructor(n){super(n);E(this,"content");E(this,"_pinWhenIsVisibleCallback");E(this,"_resizeObserver");const a=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",a.to("position",l=>`ck-balloon-panel_${l}`),a.if("isVisible","ck-balloon-panel_visible"),a.if("withArrow","ck-balloon-panel_with-arrow"),a.to("class")],style:{top:a.to("top",toPx$5),left:a.to("left",toPx$5)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(n){const a=getDomElement(n.target);if(a&&!isVisible(a))return!1;this.show();const l=Qe.defaultPositions,c=Object.assign({},{element:this.element,positions:[l.southArrowNorth,l.southArrowNorthMiddleWest,l.southArrowNorthMiddleEast,l.southArrowNorthWest,l.southArrowNorthEast,l.northArrowSouth,l.northArrowSouthMiddleWest,l.northArrowSouthMiddleEast,l.northArrowSouthWest,l.northArrowSouthEast,l.viewportStickyNorth],limiter:global$1.document.body,fitInViewport:!0},n),u=Qe._getOptimalPosition(c)||POSITION_OFF_SCREEN,d=parseInt(u.left),h=parseInt(u.top),f=u.name,g=u.config||{},{withArrow:p=!0}=g;return this.top=h,this.left=d,this.position=f,this.withArrow=p,!0}pin(n){this.unpin(),this._startPinning(n)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(n):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(n){if(!this.attachTo(n))return!1;let a=getDomElement(n.target);const l=n.limiter?getDomElement(n.limiter):global$1.document.body;if(this.listenTo(global$1.document,"scroll",(c,u)=>{const d=u.target,h=a&&d.contains(a),f=l&&d.contains(l);(h||f||!a||!l)&&this.attachTo(n)},{useCapture:!0}),this.listenTo(global$1.window,"resize",()=>{this.attachTo(n)}),!this._resizeObserver&&(a&&isText(a)&&(a=a.parentElement),a)){const c=()=>{isVisible(a)||this.unpin()};this._resizeObserver=new ResizeObserver$1(a,c)}return!0}_stopPinning(){this.stopListening(global$1.document,"scroll"),this.stopListening(global$1.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(n={}){const{sideOffset:a=Qe.arrowSideOffset,heightOffset:l=Qe.arrowHeightOffset,stickyVerticalOffset:c=Qe.stickyVerticalOffset,config:u}=n;return{northWestArrowSouthWest:(f,g)=>({top:d(f,g),left:f.left-a,name:"arrow_sw",...u&&{config:u}}),northWestArrowSouthMiddleWest:(f,g)=>({top:d(f,g),left:f.left-g.width*.25-a,name:"arrow_smw",...u&&{config:u}}),northWestArrowSouth:(f,g)=>({top:d(f,g),left:f.left-g.width/2,name:"arrow_s",...u&&{config:u}}),northWestArrowSouthMiddleEast:(f,g)=>({top:d(f,g),left:f.left-g.width*.75+a,name:"arrow_sme",...u&&{config:u}}),northWestArrowSouthEast:(f,g)=>({top:d(f,g),left:f.left-g.width+a,name:"arrow_se",...u&&{config:u}}),northArrowSouthWest:(f,g)=>({top:d(f,g),left:f.left+f.width/2-a,name:"arrow_sw",...u&&{config:u}}),northArrowSouthMiddleWest:(f,g)=>({top:d(f,g),left:f.left+f.width/2-g.width*.25-a,name:"arrow_smw",...u&&{config:u}}),northArrowSouth:(f,g)=>({top:d(f,g),left:f.left+f.width/2-g.width/2,name:"arrow_s",...u&&{config:u}}),northArrowSouthMiddleEast:(f,g)=>({top:d(f,g),left:f.left+f.width/2-g.width*.75+a,name:"arrow_sme",...u&&{config:u}}),northArrowSouthEast:(f,g)=>({top:d(f,g),left:f.left+f.width/2-g.width+a,name:"arrow_se",...u&&{config:u}}),northEastArrowSouthWest:(f,g)=>({top:d(f,g),left:f.right-a,name:"arrow_sw",...u&&{config:u}}),northEastArrowSouthMiddleWest:(f,g)=>({top:d(f,g),left:f.right-g.width*.25-a,name:"arrow_smw",...u&&{config:u}}),northEastArrowSouth:(f,g)=>({top:d(f,g),left:f.right-g.width/2,name:"arrow_s",...u&&{config:u}}),northEastArrowSouthMiddleEast:(f,g)=>({top:d(f,g),left:f.right-g.width*.75+a,name:"arrow_sme",...u&&{config:u}}),northEastArrowSouthEast:(f,g)=>({top:d(f,g),left:f.right-g.width+a,name:"arrow_se",...u&&{config:u}}),southWestArrowNorthWest:f=>({top:h(f),left:f.left-a,name:"arrow_nw",...u&&{config:u}}),southWestArrowNorthMiddleWest:(f,g)=>({top:h(f),left:f.left-g.width*.25-a,name:"arrow_nmw",...u&&{config:u}}),southWestArrowNorth:(f,g)=>({top:h(f),left:f.left-g.width/2,name:"arrow_n",...u&&{config:u}}),southWestArrowNorthMiddleEast:(f,g)=>({top:h(f),left:f.left-g.width*.75+a,name:"arrow_nme",...u&&{config:u}}),southWestArrowNorthEast:(f,g)=>({top:h(f),left:f.left-g.width+a,name:"arrow_ne",...u&&{config:u}}),southArrowNorthWest:f=>({top:h(f),left:f.left+f.width/2-a,name:"arrow_nw",...u&&{config:u}}),southArrowNorthMiddleWest:(f,g)=>({top:h(f),left:f.left+f.width/2-g.width*.25-a,name:"arrow_nmw",...u&&{config:u}}),southArrowNorth:(f,g)=>({top:h(f),left:f.left+f.width/2-g.width/2,name:"arrow_n",...u&&{config:u}}),southArrowNorthMiddleEast:(f,g)=>({top:h(f),left:f.left+f.width/2-g.width*.75+a,name:"arrow_nme",...u&&{config:u}}),southArrowNorthEast:(f,g)=>({top:h(f),left:f.left+f.width/2-g.width+a,name:"arrow_ne",...u&&{config:u}}),southEastArrowNorthWest:f=>({top:h(f),left:f.right-a,name:"arrow_nw",...u&&{config:u}}),southEastArrowNorthMiddleWest:(f,g)=>({top:h(f),left:f.right-g.width*.25-a,name:"arrow_nmw",...u&&{config:u}}),southEastArrowNorth:(f,g)=>({top:h(f),left:f.right-g.width/2,name:"arrow_n",...u&&{config:u}}),southEastArrowNorthMiddleEast:(f,g)=>({top:h(f),left:f.right-g.width*.75+a,name:"arrow_nme",...u&&{config:u}}),southEastArrowNorthEast:(f,g)=>({top:h(f),left:f.right-g.width+a,name:"arrow_ne",...u&&{config:u}}),westArrowEast:(f,g)=>({top:f.top+f.height/2-g.height/2,left:f.left-g.width-l,name:"arrow_e",...u&&{config:u}}),eastArrowWest:(f,g)=>({top:f.top+f.height/2-g.height/2,left:f.right+l,name:"arrow_w",...u&&{config:u}}),viewportStickyNorth:(f,g,p,v)=>{const b=v||p;return!f.getIntersection(b)||b.height-f.height>c?null:{top:b.top+c,left:f.left+f.width/2-g.width/2,name:"arrowless",config:{withArrow:!1,...u}}}};function d(f,g){return f.top-g.height-l}function h(f){return f.bottom+l}}};E(Qe,"arrowSideOffset",25),E(Qe,"arrowHeightOffset",10),E(Qe,"stickyVerticalOffset",20),E(Qe,"_getOptimalPosition",getOptimalPosition),E(Qe,"defaultPositions",Qe.generatePositions());let BalloonPanelView=Qe;function getDomElement(s){return isElement$2(s)?s:isRange(s)?s.commonAncestorContainer:typeof s=="function"?getDomElement(s()):null}class ToolbarSeparatorView extends View$1{constructor(o){super(o),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class ToolbarLineBreakView extends View$1{constructor(o){super(o),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function preventDefault$1(s){return s.bindTemplate.to(o=>{o.target===s.element&&o.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeToolbarConfig(s){if(Array.isArray(s))return{items:s,removeItems:[]};const o={items:[],removeItems:[]};return s?{...o,...s}:o}const NESTED_TOOLBAR_ICONS={alignLeft:icons.alignLeft,bold:icons.bold,importExport:icons.importExport,paragraph:icons.paragraph,plus:icons.plus,text:icons.text,threeVerticalDots:icons.threeVerticalDots,pilcrow:icons.pilcrow,dragIndicator:icons.dragIndicator};class ToolbarView extends View$1{constructor(n,a){super(n);E(this,"options");E(this,"items");E(this,"focusTracker");E(this,"keystrokes");E(this,"itemsView");E(this,"children");E(this,"focusables");E(this,"_focusCycler");E(this,"_behavior");const l=this.bindTemplate,c=this.t;this.options=a||{},this.set("ariaLabel",c("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new ItemsView(n),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const u=n.uiLanguageDirection==="rtl";this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[u?"arrowright":"arrowleft","arrowup"],focusNext:[u?"arrowleft":"arrowright","arrowdown"]}});const d=["ck","ck-toolbar",l.to("class"),l.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&d.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:d,role:l.to("role"),"aria-label":l.to("ariaLabel"),style:{maxWidth:l.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:preventDefault$1(this)}}),this._behavior=this.options.shouldGroupWhenFull?new DynamicGrouping(this):new StaticLayout(this)}render(){super.render(),this.focusTracker.add(this.element);for(const n of this.items)this.focusTracker.add(n);this.items.on("add",(n,a)=>{this.focusTracker.add(a)}),this.items.on("remove",(n,a)=>{this.focusTracker.remove(a)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(n,a,l){this.items.addMany(this._buildItemsFromConfig(n,a,l))}_buildItemsFromConfig(n,a,l){const c=normalizeToolbarConfig(n),u=l||c.removeItems;return this._cleanItemsConfiguration(c.items,a,u).map(h=>isObject$6(h)?this._createNestedToolbarDropdown(h,a,u):h==="|"?new ToolbarSeparatorView:h==="-"?new ToolbarLineBreakView:a.create(h)).filter(h=>!!h)}_cleanItemsConfiguration(n,a,l){const c=n.filter((u,d,h)=>u==="|"?!0:l.indexOf(u)!==-1?!1:u==="-"?this.options.shouldGroupWhenFull?(logWarning("toolbarview-line-break-ignored-when-grouping-items",h),!1):!0:!isObject$6(u)&&!a.has(u)?(logWarning("toolbarview-item-unavailable",{item:u}),!1):!0);return this._cleanSeparatorsAndLineBreaks(c)}_cleanSeparatorsAndLineBreaks(n){const a=d=>d!=="-"&&d!=="|",l=n.length,c=n.findIndex(a);if(c===-1)return[];const u=l-n.slice().reverse().findIndex(a);return n.slice(c,u).filter((d,h,f)=>a(d)?!0:!(h>0&&f[h-1]===d))}_createNestedToolbarDropdown(n,a,l){let{label:c,icon:u,items:d,tooltip:h=!0,withText:f=!1}=n;if(d=this._cleanItemsConfiguration(d,a,l),!d.length)return null;const g=this.locale,p=createDropdown(g);return c||logWarning("toolbarview-nested-toolbar-dropdown-missing-label",n),p.class="ck-toolbar__nested-toolbar-dropdown",p.buttonView.set({label:c,tooltip:h,withText:!!f}),u!==!1?p.buttonView.icon=NESTED_TOOLBAR_ICONS[u]||u||icons.threeVerticalDots:p.buttonView.withText=!0,addToolbarToDropdown(p,()=>p.toolbarView._buildItemsFromConfig(d,a,l)),p}}class ItemsView extends View$1{constructor(n){super(n);E(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class StaticLayout{constructor(o){const n=o.bindTemplate;o.set("isVertical",!1),o.itemsView.children.bindTo(o.items).using(a=>a),o.focusables.bindTo(o.items).using(a=>isFocusable(a)?a:null),o.extendTemplate({attributes:{class:[n.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class DynamicGrouping{constructor(o){E(this,"view");E(this,"viewChildren");E(this,"viewFocusables");E(this,"viewItemsView");E(this,"viewFocusTracker");E(this,"viewLocale");E(this,"ungroupedItems");E(this,"groupedItems");E(this,"groupedItemsDropdown");E(this,"resizeObserver",null);E(this,"cachedPadding",null);E(this,"shouldUpdateGroupingOnNextResize",!1);E(this,"viewElement");this.view=o,this.viewChildren=o.children,this.viewFocusables=o.focusables,this.viewItemsView=o.itemsView,this.viewFocusTracker=o.focusTracker,this.viewLocale=o.locale,this.ungroupedItems=o.createCollection(),this.groupedItems=o.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),o.itemsView.children.bindTo(this.ungroupedItems).using(n=>n),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),o.children.on("change",this._updateFocusCyclableItems.bind(this)),o.items.on("change",(n,a)=>{const l=a.index,c=Array.from(a.added);for(const u of a.removed)l>=this.ungroupedItems.length?this.groupedItems.remove(u):this.ungroupedItems.remove(u);for(let u=l;u<l+c.length;u++){const d=c[u-l];u>this.ungroupedItems.length?this.groupedItems.add(d,u-this.ungroupedItems.length):this.ungroupedItems.add(d,u)}this._updateGrouping()}),o.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(o){this.viewElement=o.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(o)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!isVisible(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const o=this.groupedItems.length;let n;for(;this._areItemsOverflowing;)this._groupLastItem(),n=!0;if(!n&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==o&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const o=this.viewElement,n=this.viewLocale.uiLanguageDirection,a=new Rect$3(o.lastChild),l=new Rect$3(o);if(!this.cachedPadding){const c=global$1.window.getComputedStyle(o),u=n==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(c[u])}return n==="ltr"?a.right>l.right-this.cachedPadding:a.left<l.left+this.cachedPadding}_enableGroupingOnResize(){let o;this.resizeObserver=new ResizeObserver$1(this.viewElement,n=>{(!o||o!==n.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),o=n.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(o){o.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new ToolbarSeparatorView),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const o=this.viewLocale,n=o.t,a=createDropdown(o);return a.class="ck-toolbar__grouped-dropdown",a.panelPosition=o.uiLanguageDirection==="ltr"?"sw":"se",addToolbarToDropdown(a,this.groupedItems),a.buttonView.set({label:n("Show more items"),tooltip:!0,tooltipPosition:o.uiLanguageDirection==="rtl"?"se":"sw",icon:icons.threeVerticalDots}),a}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(o=>{isFocusable(o)&&this.viewFocusables.add(o)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class SplitButtonView extends View$1{constructor(n,a){super(n);E(this,"children");E(this,"actionView");E(this,"arrowView");E(this,"keystrokes");E(this,"focusTracker");const l=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(a),this.arrowView=this._createArrowView(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",l.to("class"),l.if("isVisible","ck-hidden",c=>!c),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(n,a)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),a())}),this.keystrokes.set("arrowleft",(n,a)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),a())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(n){const a=n||new ButtonView;return n||a.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),a.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),a.delegate("execute").to(this),a}_createArrowView(){const n=new ButtonView,a=n.bindTemplate;return n.icon=dropdownArrowIcon,n.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":a.to("isOn"),"aria-haspopup":!0,"aria-expanded":a.to("isOn",l=>String(l))}}),n.bind("isEnabled").to(this),n.bind("label").to(this),n.bind("tooltip").to(this),n.delegate("execute").to(this,"open"),n}}function createDropdown(s,o=DropdownButtonView){const n=typeof o=="function"?new o(s):o,a=new DropdownPanelView(s),l=new DropdownView(s,n,a);return n.bind("isEnabled").to(l),n instanceof SplitButtonView?n.arrowView.bind("isOn").to(l,"isOpen"):n.bind("isOn").to(l,"isOpen"),addDefaultBehaviors(l),l}function addToolbarToDropdown(s,o,n={}){s.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),s.isOpen?addToolbarToOpenDropdown(s,o,n):s.once("change:isOpen",()=>addToolbarToOpenDropdown(s,o,n),{priority:"highest"}),n.enableActiveItemFocusOnDropdownOpen&&focusChildOnDropdownOpen(s,()=>s.toolbarView.items.find(a=>a.isOn))}function addToolbarToOpenDropdown(s,o,n){const a=s.locale,l=a.t,c=s.toolbarView=new ToolbarView(a),u=typeof o=="function"?o():o;c.ariaLabel=n.ariaLabel||l("Dropdown toolbar"),n.maxWidth&&(c.maxWidth=n.maxWidth),n.class&&(c.class=n.class),n.isCompact&&(c.isCompact=n.isCompact),n.isVertical&&(c.isVertical=!0),u instanceof ViewCollection?c.items.bindTo(u).using(d=>d):c.items.addMany(u),s.panelView.children.add(c),s.focusTracker.add(c),c.items.delegate("execute").to(s)}function addListToDropdown(s,o,n={}){s.isOpen?addListToOpenDropdown(s,o,n):s.once("change:isOpen",()=>addListToOpenDropdown(s,o,n),{priority:"highest"}),focusChildOnDropdownOpen(s,()=>s.listView.items.find(a=>a instanceof ListItemView?a.children.first.isOn:!1))}function addListToOpenDropdown(s,o,n){const a=s.locale,l=s.listView=new ListView(a),c=typeof o=="function"?o():o;l.ariaLabel=n.ariaLabel,l.role=n.role,bindViewCollectionItemsToDefinitions(s,l.items,c,a),s.panelView.children.add(l),l.items.delegate("execute").to(s)}function focusChildOnDropdownOpen(s,o){s.on("change:isOpen",()=>{if(!s.isOpen)return;const n=o();n&&(typeof n.focus=="function"?n.focus():logWarning("ui-dropdown-focus-child-on-open-child-missing-focus",{view:n}))},{priority:priorities.low-10})}function addDefaultBehaviors(s){closeDropdownOnClickOutside(s),closeDropdownOnExecute(s),closeDropdownOnBlur(s),focusDropdownContentsOnArrows(s),focusDropdownButtonOnClose(s),focusDropdownPanelOnOpen(s)}function closeDropdownOnClickOutside(s){clickOutsideHandler({emitter:s,activator:()=>s.isRendered&&s.isOpen,callback:()=>{s.isOpen=!1},contextElements:()=>[s.element,...getFocusTrackerTreeElements(s.focusTracker).filter(o=>!s.element.contains(o))]})}function getFocusTrackerTreeElements(s){return[...s.elements,...s.externalViews.flatMap(o=>getFocusTrackerTreeElements(o.focusTracker))]}function closeDropdownOnExecute(s){s.on("execute",o=>{o.source instanceof SwitchButtonView||(s.isOpen=!1)})}function closeDropdownOnBlur(s){s.focusTracker.on("change:isFocused",(o,n,a)=>{a||!s.isOpen||(s.isOpen=!1)})}function focusDropdownContentsOnArrows(s){s.keystrokes.set("arrowdown",(o,n)=>{s.isOpen&&(s.panelView.focus(),n())}),s.keystrokes.set("arrowup",(o,n)=>{s.isOpen&&(s.panelView.focusLast(),n())})}function focusDropdownButtonOnClose(s){s.on("change:isOpen",(o,n,a)=>{if(a)return;s.focusTracker.elements.some(c=>c.contains(global$1.document.activeElement))&&s.buttonView.focus()})}function focusDropdownPanelOnOpen(s){s.on("change:isOpen",(o,n,a)=>{a&&s.panelView.focus()},{priority:"low"})}function bindViewCollectionItemsToDefinitions(s,o,n,a){o.on("change",()=>{const l=[...o].reduce((u,d)=>(d instanceof ListItemView&&d.children.first instanceof ListItemButtonView&&u.push(d.children.first),u),[]),c=l.some(u=>u.isToggleable);l.forEach(u=>{u.hasCheckSpace=c})}),o.bindTo(n).using(l=>{if(l.type==="separator")return new ListSeparatorView(a);if(l.type==="group"){const c=new ListItemGroupView(a);return c.set({label:l.label}),bindViewCollectionItemsToDefinitions(s,c.items,l.items,a),c.items.delegate("execute").to(s),c}else if(l.type==="button"||l.type==="switchbutton"){const c=l.model.role==="menuitemcheckbox"||l.model.role==="menuitemradio",u=new ListItemView(a);let d;return l.type==="button"?(d=new ListItemButtonView(a),d.set({isToggleable:c})):d=new SwitchButtonView(a),d.bind(...Object.keys(l.model)).to(l.model),d.delegate("execute").to(u),u.children.add(d),u}return null})}const createLabeledInputText=(s,o,n)=>{const a=new InputTextView(s.locale);return a.set({id:o,ariaDescribedById:n}),a.bind("isReadOnly").to(s,"isEnabled",l=>!l),a.bind("hasError").to(s,"errorText",l=>!!l),a.on("input",()=>{s.errorText=null}),s.bind("isEmpty","isFocused","placeholder").to(a),a},createLabeledInputNumber=(s,o,n)=>{const a=new InputNumberView(s.locale);return a.set({id:o,ariaDescribedById:n,inputMode:"numeric"}),a.bind("isReadOnly").to(s,"isEnabled",l=>!l),a.bind("hasError").to(s,"errorText",l=>!!l),a.on("input",()=>{s.errorText=null}),s.bind("isEmpty","isFocused","placeholder").to(a),a},createLabeledDropdown=(s,o,n)=>{const a=createDropdown(s.locale);return a.set({id:o,ariaDescribedById:n}),a.bind("isEnabled").to(s),a},waitingTime=150;class ColorPickerView extends View$1{constructor(n,a={}){super(n);E(this,"hexInputRow");E(this,"_debounceColorPickerEvent");E(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const l=this.createCollection();a.hideInput||l.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:l}),this._config=a,this._debounceColorPickerEvent=debounce$1(c=>{this.set("color",c),this.fire("colorSelected",{color:this.color})},waitingTime,{leading:!0}),this.on("set:color",(c,u,d)=>{c.return=convertColor(d,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=convertColorToCommonHexFormat(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),convertColorToCommonHexFormat(this.color)!=convertColorToCommonHexFormat(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),registerCustomElement("hex-color-picker",HexBase),this.picker=global$1.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const n=document.createElement("style");n.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(n)}this.picker.addEventListener("color-changed",n=>{const a=n.detail.value;this._debounceColorPickerEvent(a)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(env$1.isGecko||env$1.isiOS||env$1.isSafari||env$1.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const l=[...this.picker.shadowRoot.children].filter(c=>c.getAttribute("role")==="slider").map(c=>new SliderView(c));this.slidersView=this.createCollection(),l.forEach(c=>{this.slidersView.add(c)})}_createInputRow(){const n=this._createColorInput();return new ColorPickerInputRowView(this.locale,n)}_createColorInput(){const n=new LabeledFieldView(this.locale,createLabeledInputText),{t:a}=this.locale;return n.set({label:a("HEX"),class:"color-picker-hex-input"}),n.fieldView.bind("value").to(this,"_hexColor",l=>n.isFocused?n.fieldView.value:l.startsWith("#")?l.substring(1):l),n.fieldView.on("input",()=>{const l=n.fieldView.element.value;if(l){const c=tryParseHexColor(l);c&&this._debounceColorPickerEvent(c)}}),n}isValid(){const{t:n}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=n('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function convertColorToCommonHexFormat(s){let o=convertToHex(s);return o||(o="#000"),o.length===4&&(o="#"+[o[1],o[1],o[2],o[2],o[3],o[3]].join("")),o.toLowerCase()}class SliderView extends View$1{constructor(o){super(),this.element=o}focus(){this.element.focus()}}class HashView extends View$1{constructor(o){super(o),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class ColorPickerInputRowView extends View$1{constructor(n,a){super(n);E(this,"children");E(this,"inputView");this.inputView=a,this.children=this.createCollection([new HashView,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return tryParseHexColor(this.inputView.fieldView.element.value)}}function tryParseHexColor(s){if(!s)return null;const o=s.trim().replace(/^#/,"");return![3,4,6,8].includes(o.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(o)?null:`#${o}`}class DocumentColorCollection extends ObservableMixin(Collection){constructor(o){super(o),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(o,n){return this.find(a=>a.color===o.color)?this:super.add(o,n)}hasColor(o){return!!this.find(n=>n.color===o)}}class ColorGridsFragmentView extends View$1{constructor(n,{colors:a,columns:l,removeButtonLabel:c,documentColorsLabel:u,documentColorsCount:d,colorPickerLabel:h,focusTracker:f,focusables:g}){super(n);E(this,"items");E(this,"colorDefinitions");E(this,"focusTracker");E(this,"columns");E(this,"documentColors");E(this,"documentColorsCount");E(this,"staticColorsGrid");E(this,"documentColorsGrid");E(this,"colorPickerButtonView");E(this,"removeColorButtonView");E(this,"_focusables");E(this,"_documentColorsLabel");E(this,"_removeButtonLabel");E(this,"_colorPickerLabel");const p=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=f,this.items=this.createCollection(),this.colorDefinitions=a,this.columns=l,this.documentColors=new DocumentColorCollection,this.documentColorsCount=d,this._focusables=g,this._removeButtonLabel=c,this._colorPickerLabel=h,this._documentColorsLabel=u,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",p.if("isVisible","ck-hidden",v=>!v)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(n,a){const l=n.document,c=this.documentColorsCount;this.documentColors.clear();for(const u of l.getRoots()){const d=n.createRangeIn(u);for(const h of d.getItems())if(h.is("$textProxy")&&h.hasAttribute(a)&&(this._addColorToDocumentColors(h.getAttribute(a)),this.documentColors.length>=c))return}}updateSelectedColors(){const n=this.documentColorsGrid,a=this.staticColorsGrid,l=this.selectedColor;a.selectedColor=l,n&&(n.selectedColor=l)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const n=Template.bind(this.documentColors,this.documentColors),a=new View$1(this.locale);a.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",n.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(a),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ButtonView,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:icons.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const n=new ButtonView;return n.set({withText:!0,icon:icons.eraser,label:this._removeButtonLabel}),n.class="ck-color-selector__remove-color",n.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),n.render(),n}_createStaticColorsGrid(){const n=new ColorGridView(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return n.on("execute",(a,l)=>{this.fire("execute",{value:l.value,source:"staticColorsGrid"})}),n}_createDocumentColorsGrid(){const n=Template.bind(this.documentColors,this.documentColors),a=new ColorGridView(this.locale,{columns:this.columns});return a.extendTemplate({attributes:{class:n.if("isEmpty","ck-hidden")}}),a.items.bindTo(this.documentColors).using(l=>{const c=new ColorTileView;return c.set({color:l.color,hasBorder:l.options&&l.options.hasBorder}),l.label&&c.set({label:l.label,tooltip:!0}),c.on("execute",()=>{this.fire("execute",{value:l.color,source:"documentColorsGrid"})}),c}),this.documentColors.on("change:isEmpty",(l,c,u)=>{u&&(a.selectedColor=null)}),a}_addColorToDocumentColors(n){const a=this.colorDefinitions.find(l=>l.color===n);a?this.documentColors.add(Object.assign({},a)):this.documentColors.add({color:n,label:n,options:{hasBorder:!1}})}}class ColorPickerFragmentView extends View$1{constructor(n,{focusTracker:a,focusables:l,keystrokes:c,colorPickerViewConfig:u}){super(n);E(this,"items");E(this,"colorPickerView");E(this,"saveButtonView");E(this,"cancelButtonView");E(this,"actionBarView");E(this,"focusTracker");E(this,"keystrokes");E(this,"_focusables");E(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=a,this.keystrokes=c,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=l,this._colorPickerViewConfig=u;const d=this.bindTemplate,{saveButtonView:h,cancelButtonView:f}=this._createActionButtons();this.saveButtonView=h,this.cancelButtonView=f,this.actionBarView=this._createActionBarView({saveButtonView:h,cancelButtonView:f}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",d.if("isVisible","ck-hidden",g=>!g)]},children:this.items})}render(){super.render();const n=new ColorPickerView(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=n,this.colorPickerView.render(),this.selectedColor&&(n.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(a,l,c)=>{n.color=c}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",n=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),n.stopPropagation(),n.preventDefault())})}_stopPropagationOnArrowsKeys(){const n=a=>a.stopPropagation();this.keystrokes.set("arrowright",n),this.keystrokes.set("arrowleft",n),this.keystrokes.set("arrowup",n),this.keystrokes.set("arrowdown",n)}_addColorPickersElementsToFocusTracker(){for(const a of this.colorPickerView.slidersView)this.focusTracker.add(a.element),this._focusables.add(a);const n=this.colorPickerView.hexInputRow.children.get(1);n.element&&(this.focusTracker.add(n.element),this._focusables.add(n)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:n,cancelButtonView:a}){const l=new View$1,c=this.createCollection();return c.add(n),c.add(a),l.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:c}),l}_createActionButtons(){const n=this.locale,a=n.t,l=new ButtonView(n),c=new ButtonView(n);return l.set({icon:icons.check,class:"ck-button-save",type:"button",withText:!1,label:a("Accept")}),c.set({icon:icons.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:a("Cancel")}),l.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),c.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:l,cancelButtonView:c}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(n,a)=>{this.fire("execute",{value:a.color,source:"colorPicker"}),this.set("selectedColor",a.color)})}}class ColorSelectorView extends View$1{constructor(n,{colors:a,columns:l,removeButtonLabel:c,documentColorsLabel:u,documentColorsCount:d,colorPickerLabel:h,colorPickerViewConfig:f}){super(n);E(this,"focusTracker");E(this,"keystrokes");E(this,"items");E(this,"colorGridsFragmentView");E(this,"colorPickerFragmentView");E(this,"_focusCycler");E(this,"_focusables");E(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this._colorPickerViewConfig=f,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ColorGridsFragmentView(n,{colors:a,columns:l,removeButtonLabel:c,documentColorsLabel:u,documentColorsCount:d,colorPickerLabel:h,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new ColorPickerFragmentView(n,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:f}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(g,p,v)=>{this.colorGridsFragmentView.set("selectedColor",v),this.colorPickerFragmentView.set("selectedColor",v)}),this.colorGridsFragmentView.on("change:selectedColor",(g,p,v)=>{this.set("selectedColor",v)}),this.colorPickerFragmentView.on("change:selectedColor",(g,p,v)=>{this.set("selectedColor",v)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(n,a){this.colorGridsFragmentView.updateDocumentColors(n,a)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class ComponentFactory{constructor(o){E(this,"editor");E(this,"_components",new Map);this.editor=o}*names(){for(const o of this._components.values())yield o.originalName}add(o,n){this._components.set(getNormalized(o),{callback:n,originalName:o})}create(o){if(!this.has(o))throw new CKEditorError("componentfactory-item-missing",this,{name:o});return this._components.get(getNormalized(o)).callback(this.editor.locale)}has(o){return this._components.has(getNormalized(o))}}function getNormalized(s){return String(s).toLowerCase()}const BALLOON_CLASS="ck-tooltip",Ze=class Ze extends DomEmitterMixin(){constructor(n){super();E(this,"tooltipTextView");E(this,"balloonPanelView");E(this,"_currentElementWithTooltip",null);E(this,"_currentTooltipPosition",null);E(this,"_mutationObserver",null);E(this,"_pinTooltipDebounced");E(this,"_unpinTooltipDebounced");E(this,"_watchdogExcluded");if(Ze._editors.add(n),Ze._instance)return Ze._instance;Ze._instance=this,this.tooltipTextView=new View$1(n.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new BalloonPanelView(n.locale),this.balloonPanelView.class=BALLOON_CLASS,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=createMutationObserver(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=debounce$1(this._pinTooltip,600),this._unpinTooltipDebounced=debounce$1(this._unpinTooltip,400),this.listenTo(global$1.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(n){const a=n.ui.view&&n.ui.view.body;Ze._editors.delete(n),this.stopListening(n.ui),a&&a.has(this.balloonPanelView)&&a.remove(this.balloonPanelView),Ze._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),Ze._instance=null)}static getPositioningFunctions(n){const a=Ze.defaultBalloonPositions;return{s:[a.southArrowNorth,a.southArrowNorthEast,a.southArrowNorthWest],n:[a.northArrowSouth],e:[a.eastArrowWest],w:[a.westArrowEast],sw:[a.southArrowNorthEast],se:[a.southArrowNorthWest]}[n]}_onKeyDown(n,a){a.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),a.stopPropagation())}_onEnterOrFocus(n,{target:a}){const l=getDescendantWithTooltip(a);if(!l){n.name==="focus"&&this._unpinTooltip();return}if(l===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),n.name==="focus"&&!l.matches(":hover")||l.matches("[data-cke-tooltip-instant]")?this._pinTooltip(l,getTooltipData(l)):this._pinTooltipDebounced(l,getTooltipData(l))}_onLeaveOrBlur(n,{target:a,relatedTarget:l}){if(n.name==="mouseleave"){if(!isElement$2(a))return;const c=this.balloonPanelView.element,u=c&&(c===l||c.contains(l)),d=!u&&a===c;if(u){this._unpinTooltipDebounced.cancel();return}if(!d&&this._currentElementWithTooltip&&a!==this._currentElementWithTooltip)return;const h=getDescendantWithTooltip(a),f=getDescendantWithTooltip(l);(d||h&&h!==f)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||h&&h.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&a!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(n,{target:a}){this._currentElementWithTooltip&&(a.contains(this.balloonPanelView.element)&&a.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(n,{text:a,position:l,cssClass:c}){this._unpinTooltip();const u=first(Ze._editors.values()).ui.view.body;u.has(this.balloonPanelView)||u.add(this.balloonPanelView),this.tooltipTextView.text=a,this.balloonPanelView.class=[BALLOON_CLASS,c].filter(d=>d).join(" "),this.balloonPanelView.pin({target:n,positions:Ze.getPositioningFunctions(l)}),this._mutationObserver.attach(n);for(const d of Ze._editors)this.listenTo(d.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=n,this._currentTooltipPosition=l}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const n of Ze._editors)this.stopListening(n.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const n=getTooltipData(this._currentElementWithTooltip);if(!isVisible(this._currentElementWithTooltip)||!n.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:Ze.getPositioningFunctions(n.position)})}};E(Ze,"defaultBalloonPositions",BalloonPanelView.generatePositions({heightOffset:5,sideOffset:13})),E(Ze,"_editors",new Set),E(Ze,"_instance",null);let TooltipManager=Ze;function getDescendantWithTooltip(s){return isElement$2(s)?s.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function getTooltipData(s){return{text:s.dataset.ckeTooltipText,position:s.dataset.ckeTooltipPosition||"s",cssClass:s.dataset.ckeTooltipClass||""}}function createMutationObserver(s){const o=new MutationObserver(()=>{s()});return{attach(n){o.observe(n,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){o.disconnect()}}}const NARROW_ROOT_HEIGHT_THRESHOLD=50,NARROW_ROOT_WIDTH_THRESHOLD=350;class Badge extends DomEmitterMixin(){constructor(n,a={}){super();E(this,"editor");E(this,"_balloonView",null);E(this,"_showBalloonThrottled",throttle$2(()=>this._showBalloon(),50,{leading:!0}));E(this,"_lastFocusedEditableElement",null);E(this,"_balloonClass");this.editor=n,this._balloonClass=a.balloonClass,n.on("ready",()=>this._handleEditorReady())}destroy(){const n=this._balloonView;n&&(n.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const n=this.editor;this._isEnabled()&&n.ui.view&&(n.ui.focusTracker.on("change:isFocused",(a,l,c)=>{this._updateLastFocusedEditableElement(),c?this._showBalloon():this._hideBalloon()}),n.ui.focusTracker.on("change:focusedElement",(a,l,c)=>{this._updateLastFocusedEditableElement(),c&&this._showBalloon()}),n.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const n=this._getBalloonAttachOptions();n&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(n))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const n=this.editor,a=new BalloonPanelView,l=this._createBadgeContent();return a.content.add(l),this._balloonClass&&(a.class=this._balloonClass),n.ui.view.body.add(a),a}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const n=this._getNormalizedConfig(),a=n.side==="right"?getLowerRightCornerPosition(this._lastFocusedEditableElement,n):getLowerLeftCornerPosition(this._lastFocusedEditableElement,n);return{target:this._lastFocusedEditableElement,positions:[a]}}_updateLastFocusedEditableElement(){const n=this.editor,a=n.ui.focusTracker.isFocused,l=n.ui.focusTracker.focusedElement;if(!a||!l){this._lastFocusedEditableElement=null;return}const c=Array.from(n.ui.getEditableElementsNames()).map(u=>n.ui.getEditableElement(u));c.includes(l)?this._lastFocusedEditableElement=l:this._lastFocusedEditableElement=c[0]}}function getLowerRightCornerPosition(s,o){return getLowerCornerPosition(s,o,(n,a)=>n.left+n.width-a.width-o.horizontalOffset)}function getLowerLeftCornerPosition(s,o){return getLowerCornerPosition(s,o,n=>n.left+o.horizontalOffset)}function getLowerCornerPosition(s,o,n){return(a,l)=>{const c=new Rect$3(s);if(c.width<NARROW_ROOT_WIDTH_THRESHOLD||c.height<NARROW_ROOT_HEIGHT_THRESHOLD)return null;let u;o.position==="inside"?u=c.bottom-l.height:u=c.bottom-l.height/2,u-=o.verticalOffset;const d=n(c,l),f=a.clone().moveTo(d,u).getIntersection(l.clone().moveTo(d,u)).getVisible();return!f||f.getArea()<l.getArea()?null:{top:u,left:d,name:`position_${o.position}-side_${o.side}`,config:{withArrow:!1}}}}var poweredByIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const DEFAULT_LABEL="Powered by";class PoweredBy extends Badge{constructor(o){super(o,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const o=this.editor;if(o.config.get("ui.poweredBy.forceVisible"))return!0;const a=o.config.get("licenseKey");if(a=="GPL")return!0;const l=parseBase64EncodedObject(a.split(".")[1]);return l?!l.whiteLabel:!0}_createBadgeContent(){return new PoweredByView(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const o=super._getNormalizedConfig(),n=this.editor.config.get("ui.poweredBy")||{},a=n.position||o.position,l=a==="inside"?5:o.verticalOffset;return{position:a,side:n.side||o.side,label:n.label===void 0?DEFAULT_LABEL:n.label,verticalOffset:n.verticalOffset!==void 0?n.verticalOffset:l,horizontalOffset:n.horizontalOffset!==void 0?n.horizontalOffset:o.horizontalOffset,forceVisible:!!n.forceVisible}}}class PoweredByView extends View$1{constructor(o,n){super(o);const a=new IconView,l=this.bindTemplate;a.set({content:poweredByIcon,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...n?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[n]}]:[],a],on:{dragstart:l.to(c=>c.preventDefault())}}]})}}class EvaluationBadge extends Badge{constructor(n){super(n,{balloonClass:"ck-evaluation-badge-balloon"});E(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const a=this.editor.config.get("licenseKey"),l=getLicenseTypeFromLicenseKey(a);return!!(l&&this.licenseTypeMessage[l])}_createBadgeContent(){const n=this.editor.config.get("licenseKey"),a=getLicenseTypeFromLicenseKey(n);return new EvaluationBadgeView(this.editor.locale,this.licenseTypeMessage[a])}_getNormalizedConfig(){const n=super._getNormalizedConfig(),a=this.editor.config.get("ui.poweredBy")||{},l=a.position||n.position,c=a.side||n.side;return{position:l,side:c==="left"?"right":"left",verticalOffset:n.verticalOffset,horizontalOffset:n.horizontalOffset}}}class EvaluationBadgeView extends View$1{constructor(o,n){super(o),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[n]}]})}}function getLicenseTypeFromLicenseKey(s){if(s=="GPL")return"GPL";const o=parseBase64EncodedObject(s.split(".")[1]);return o?o.licenseType||"production":null}const AriaLiveAnnouncerPoliteness={POLITE:"polite",ASSERTIVE:"assertive"};class AriaLiveAnnouncer{constructor(o){E(this,"editor");E(this,"view");this.editor=o,o.once("ready",()=>{for(const n of Object.values(AriaLiveAnnouncerPoliteness))this.announce("",n)})}announce(o,n=AriaLiveAnnouncerPoliteness.POLITE){const a=this.editor;if(!a.ui.view)return;this.view||(this.view=new AriaLiveAnnouncerView(a.locale),a.ui.view.body.add(this.view));const{politeness:l,isUnsafeHTML:c}=typeof n=="string"?{politeness:n}:n;let u=this.view.regionViews.find(d=>d.politeness===l);u||(u=new AriaLiveAnnouncerRegionView(a,l),this.view.regionViews.add(u)),u.announce({announcement:o,isUnsafeHTML:c})}}class AriaLiveAnnouncerView extends View$1{constructor(n){super(n);E(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class AriaLiveAnnouncerRegionView extends View$1{constructor(n,a){super(n.locale);E(this,"politeness");E(this,"_domConverter");E(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":a,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),n.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=a,this._domConverter=n.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:n,isUnsafeHTML:a}){if(!n.trim().length)return;const l=document.createElement("li");a?this._domConverter.setContentOf(l,n):l.innerText=n,this._listElement.appendChild(l)}get _listElement(){return this.element.querySelector("ul")}}class MenuBarMenuListItemView extends ListItemView{constructor(o,n){super(o);const a=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:a.to("mouseenter")}}),this.delegate("mouseenter").to(n)}}const NESTED_PANEL_HORIZONTAL_OFFSET=5,MenuBarBehaviors={toggleMenusAndFocusItemsOnHover(s){s.on("menu:mouseenter",o=>{if(!(!s.isFocusBorderEnabled&&!s.isOpen)){if(s.isOpen)for(const n of s.menus){const a=o.path[0],l=a instanceof MenuBarMenuListItemView&&a.children.first===n;n.isOpen=(o.path.includes(n)||l)&&n.isEnabled}o.source.focus()}})},focusCycleMenusOnArrows(s){const o=s.locale.uiLanguageDirection==="rtl";s.on("menu:arrowright",a=>{n(a.source,o?-1:1)}),s.on("menu:arrowleft",a=>{n(a.source,o?1:-1)});function n(a,l){const c=s.children.getIndex(a),u=a.isOpen,d=s.children.length,h=s.children.get((c+d+l)%d);a.isOpen=!1,u&&(h.isOpen=!0),h.buttonView.focus()}},closeMenusWhenTheBarCloses(s){s.on("change:isOpen",()=>{s.isOpen||s.menus.forEach(o=>{o.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(s){s.on("menu:change:isOpen",(o,n,a)=>{a&&s.menus.filter(l=>o.source.parentMenuView===l.parentMenuView&&o.source!==l&&l.isOpen).forEach(l=>{l.isOpen=!1})})},closeOnClickOutside(s){clickOutsideHandler({emitter:s,activator:()=>s.isOpen,callback:()=>s.close(),contextElements:()=>s.children.map(o=>o.element)})},enableFocusHighlightOnInteraction(s){let o=!1;s.on("change:isOpen",(n,a,l)=>{l||(o||(s.isFocusBorderEnabled=!1),o=!1)}),s.listenTo(s.element,"keydown",()=>{o=!0},{useCapture:!0}),s.listenTo(s.element,"keyup",()=>{o=!1},{useCapture:!0}),s.listenTo(s.element,"focus",()=>{o&&(s.isFocusBorderEnabled=!0)},{useCapture:!0})}},MenuBarMenuBehaviors={openAndFocusPanelOnArrowDownKey(s){s.keystrokes.set("arrowdown",(o,n)=>{s.focusTracker.focusedElement===s.buttonView.element&&(s.isOpen||(s.isOpen=!0),s.panelView.focus(),n())})},openOnArrowRightKey(s){const o=s.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";s.keystrokes.set(o,(n,a)=>{s.focusTracker.focusedElement!==s.buttonView.element||!s.isEnabled||(s.isOpen||(s.isOpen=!0),s.panelView.focus(),a())})},openOnButtonClick(s){s.buttonView.on("execute",()=>{s.isOpen=!0})},toggleOnButtonClick(s){s.buttonView.on("execute",()=>{s.isOpen=!s.isOpen})},openAndFocusOnEnterKeyPress(s){s.keystrokes.set("enter",(o,n)=>{s.focusTracker.focusedElement===s.buttonView.element&&(s.isOpen=!0,s.panelView.focus(),n())})},closeOnArrowLeftKey(s){const o=s.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";s.keystrokes.set(o,(n,a)=>{s.isOpen&&(s.isOpen=!1,s.focus(),a())})},closeOnEscKey(s){s.keystrokes.set("esc",(o,n)=>{s.isOpen&&(s.isOpen=!1,s.focus(),n())})},closeOnParentClose(s){s.parentMenuView.on("change:isOpen",(o,n,a)=>{!a&&o.source===s.parentMenuView&&(s.isOpen=!1)})}},MenuBarMenuViewPanelPositioningFunctions={southEast:s=>({top:s.bottom,left:s.left,name:"se"}),southWest:(s,o)=>({top:s.bottom,left:s.left-o.width+s.width,name:"sw"}),northEast:(s,o)=>({top:s.top-o.height,left:s.left,name:"ne"}),northWest:(s,o)=>({top:s.top-o.height,left:s.left-o.width+s.width,name:"nw"}),eastSouth:s=>({top:s.top,left:s.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"es"}),eastNorth:(s,o)=>({top:s.top-o.height,left:s.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"en"}),westSouth:(s,o)=>({top:s.top,left:s.left-o.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"ws"}),westNorth:(s,o)=>({top:s.top-o.height,left:s.left-o.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"wn"})},DefaultMenuBarItems=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function normalizeMenuBarConfig(s){let o;return!("items"in s)||!s.items?o={items:cloneDeep(DefaultMenuBarItems),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...s}:o={items:s.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...s},o}function processMenuBarConfig({normalizedConfig:s,locale:o,componentFactory:n,extraItems:a}){const l=cloneDeep(s);return handleAdditions(s,l,a),handleRemovals(s,l),handleAdditions(s,l,l.addItems),purgeUnavailableComponents(s,l,n),purgeEmptyMenus(s,l),localizeMenuLabels(l,o),l}function handleRemovals(s,o){const n=o.removeItems,a=[];o.items=o.items.filter(({menuId:l})=>n.includes(l)?(a.push(l),!1):!0),walkConfigMenus(o.items,l=>{l.groups=l.groups.filter(({groupId:c})=>n.includes(c)?(a.push(c),!1):!0);for(const c of l.groups)c.items=c.items.filter(u=>{const d=getIdFromGroupItem(u);return n.includes(d)?(a.push(d),!1):!0})});for(const l of n)a.includes(l)||logWarning("menu-bar-item-could-not-be-removed",{menuBarConfig:s,itemName:l})}function handleAdditions(s,o,n){const a=[];if(n.length!=0){for(const l of n){const c=getRelationFromPosition(l.position),u=getRelativeIdFromPosition(l.position);if(isMenuBarMenuAddition(l))if(!u)c==="start"?(o.items.unshift(l.menu),a.push(l)):c==="end"&&(o.items.push(l.menu),a.push(l));else{const d=o.items.findIndex(h=>h.menuId===u);d!=-1?c==="before"?(o.items.splice(d,0,l.menu),a.push(l)):c==="after"&&(o.items.splice(d+1,0,l.menu),a.push(l)):addMenuOrItemToGroup(o,l.menu,u,c)&&a.push(l)}else isMenuBarMenuGroupAddition(l)?walkConfigMenus(o.items,d=>{if(d.menuId===u)c==="start"?(d.groups.unshift(l.group),a.push(l)):c==="end"&&(d.groups.push(l.group),a.push(l));else{const h=d.groups.findIndex(f=>f.groupId===u);h!==-1&&(c==="before"?(d.groups.splice(h,0,l.group),a.push(l)):c==="after"&&(d.groups.splice(h+1,0,l.group),a.push(l)))}}):addMenuOrItemToGroup(o,l.item,u,c)&&a.push(l)}for(const l of n)a.includes(l)||logWarning("menu-bar-item-could-not-be-added",{menuBarConfig:s,addedItemConfig:l})}}function addMenuOrItemToGroup(s,o,n,a){let l=!1;return walkConfigMenus(s.items,c=>{for(const{groupId:u,items:d}of c.groups){if(l)return;if(u===n)a==="start"?(d.unshift(o),l=!0):a==="end"&&(d.push(o),l=!0);else{const h=d.findIndex(f=>getIdFromGroupItem(f)===n);h!==-1&&(a==="before"?(d.splice(h,0,o),l=!0):a==="after"&&(d.splice(h+1,0,o),l=!0))}}}),l}function purgeUnavailableComponents(s,o,n){walkConfigMenus(o.items,a=>{for(const l of a.groups)l.items=l.items.filter(c=>{const u=typeof c=="string"&&!n.has(c);return u&&!o.isUsingDefaultConfig&&logWarning("menu-bar-item-unavailable",{menuBarConfig:s,parentMenuConfig:cloneDeep(a),componentName:c}),!u})})}function purgeEmptyMenus(s,o){const n=o.isUsingDefaultConfig;let a=!1;if(o.items=o.items.filter(l=>l.groups.length?!0:(warnAboutEmptyMenu(s,l,n),!1)),!o.items.length){warnAboutEmptyMenu(s,s,n);return}walkConfigMenus(o.items,l=>{l.groups=l.groups.filter(c=>c.items.length?!0:(a=!0,!1));for(const c of l.groups)c.items=c.items.filter(u=>isMenuDefinition(u)&&!u.groups.length?(warnAboutEmptyMenu(s,u,n),a=!0,!1):!0)}),a&&purgeEmptyMenus(s,o)}function warnAboutEmptyMenu(s,o,n){n||logWarning("menu-bar-menu-empty",{menuBarConfig:s,emptyMenuConfig:o})}function localizeMenuLabels(s,o){const n=o.t,a={File:n({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:n({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:n({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:n({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:n({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:n({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:n({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:n({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:n({string:"Font",id:"MENU_BAR_MENU_FONT"})};walkConfigMenus(s.items,l=>{l.label in a&&(l.label=a[l.label])})}function walkConfigMenus(s,o){if(Array.isArray(s))for(const a of s)n(a);function n(a){o(a);for(const l of a.groups)for(const c of l.items)isMenuDefinition(c)&&n(c)}}function isMenuBarMenuAddition(s){return typeof s=="object"&&"menu"in s}function isMenuBarMenuGroupAddition(s){return typeof s=="object"&&"group"in s}function getRelationFromPosition(s){return s.startsWith("start")?"start":s.startsWith("end")?"end":s.startsWith("after")?"after":"before"}function getRelativeIdFromPosition(s){const o=s.match(/^[^:]+:(.+)/);return o?o[1]:null}function getIdFromGroupItem(s){return typeof s=="string"?s:s.menuId}function isMenuDefinition(s){return typeof s=="object"&&"menuId"in s}class EditorUI extends ObservableMixin(){constructor(n){super();E(this,"editor");E(this,"componentFactory");E(this,"focusTracker");E(this,"tooltipManager");E(this,"poweredBy");E(this,"evaluationBadge");E(this,"ariaLiveAnnouncer");E(this,"isReady",!1);E(this,"_editableElementsMap",new Map);E(this,"_focusableToolbarDefinitions",[]);E(this,"_extraMenuBarElements",[]);E(this,"_lastFocusedForeignElement",null);const a=n.editing.view;this.editor=n,this.componentFactory=new ComponentFactory(n),this.focusTracker=new FocusTracker,this.tooltipManager=new TooltipManager(n),this.poweredBy=new PoweredBy(n),this.evaluationBadge=new EvaluationBadge(n),this.ariaLiveAnnouncer=new AriaLiveAnnouncer(n),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(a.document,"layoutChanged",this.update.bind(this)),this.listenTo(a,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const n of this._editableElementsMap.values())n.ckeditorInstance=null,this.editor.keystrokes.stopListening(n);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(n,a){this._editableElementsMap.set(n,a),a.ckeditorInstance||(a.ckeditorInstance=this.editor),this.focusTracker.add(a);const l=()=>{this.editor.editing.view.getDomRoot(n)||this.editor.keystrokes.listenTo(a)};this.isReady?l():this.once("ready",l)}removeEditableElement(n){const a=this._editableElementsMap.get(n);a&&(this._editableElementsMap.delete(n),this.editor.keystrokes.stopListening(a),this.focusTracker.remove(a),a.ckeditorInstance=null)}getEditableElement(n="main"){return this._editableElementsMap.get(n)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(n,a={}){n.isRendered?(this.focusTracker.add(n),this.editor.keystrokes.listenTo(n.element)):n.once("render",()=>{this.focusTracker.add(n),this.editor.keystrokes.listenTo(n.element)}),this._focusableToolbarDefinitions.push({toolbarView:n,options:a})}extendMenuBar(n){this._extraMenuBarElements.push(n)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(n){const a=n.element;this.focusTracker.add(a),this.editor.keystrokes.listenTo(a);const l=normalizeMenuBarConfig(this.editor.config.get("menuBar")||{});n.fillFromConfig(l,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(c,u)=>{a.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),u())}),this.editor.keystrokes.set("Alt+F9",(c,u)=>{a.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),n.isFocusBorderEnabled=!0,n.focus(),u())})}_readViewportOffsetFromConfig(){const n=this.editor,a=n.config.get("ui.viewportOffset");if(a)return a;const l=n.config.get("toolbar.viewportTopOffset");return l?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:l}):{top:0}}_initFocusTracking(){const n=this.editor;let a;n.keystrokes.set("Alt+F10",(l,c)=>{this._saveLastFocusedForeignElement();const u=this._getCurrentFocusedToolbarDefinition();(!u||!a)&&(a=this._getFocusableCandidateToolbarDefinitions());for(let d=0;d<a.length;d++){const h=a.shift();if(a.push(h),h!==u&&this._focusFocusableCandidateToolbar(h)){u&&u.options.afterBlur&&u.options.afterBlur();break}}c()}),n.keystrokes.set("Esc",(l,c)=>{const u=this._getCurrentFocusedToolbarDefinition();u&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):n.editing.view.focus(),u.options.afterBlur&&u.options.afterBlur(),c())})}_saveLastFocusedForeignElement(){const n=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(n)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(n)&&(this._lastFocusedForeignElement=n)}_getFocusableCandidateToolbarDefinitions(){const n=[];for(const a of this._focusableToolbarDefinitions){const{toolbarView:l,options:c}=a;(isVisible(l.element)||c.beforeFocus)&&n.push(a)}return n.sort((a,l)=>getToolbarDefinitionWeight(a)-getToolbarDefinitionWeight(l)),n}_getCurrentFocusedToolbarDefinition(){for(const n of this._focusableToolbarDefinitions)if(n.toolbarView.element&&n.toolbarView.element.contains(this.focusTracker.focusedElement))return n;return null}_focusFocusableCandidateToolbar(n){const{toolbarView:a,options:{beforeFocus:l}}=n;return l&&l(),isVisible(a.element)?(a.focus(),!0):!1}_handleScrollToTheSelection(n,a){const l={top:0,bottom:0,left:0,right:0,...this.viewportOffset};a.viewportOffset.top+=l.top,a.viewportOffset.bottom+=l.bottom,a.viewportOffset.left+=l.left,a.viewportOffset.right+=l.right}_bindBodyCollectionWithFocusTracker(){const n=this.view.body;for(const a of n)this.focusTracker.add(a.element);n.on("add",(a,l)=>{this.focusTracker.add(l.element)}),n.on("remove",(a,l)=>{this.focusTracker.remove(l.element)})}}function getToolbarDefinitionWeight(s){const{toolbarView:o,options:n}=s;let a=10;return isVisible(o.element)&&a--,n.isContextual&&a--,a}class EditorUIView extends View$1{constructor(n){super(n);E(this,"body");E(this,"menuBarView");this.body=new BodyCollection(n)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class BoxedEditorUIView extends EditorUIView{constructor(n){super(n);E(this,"top");E(this,"main");E(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:n.uiLanguageDirection,lang:n.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const n=this.t,a=new LabelView;return a.text=n("Rich Text Editor"),a.extendTemplate({attributes:{class:"ck-voice-label"}}),a}}class EditableUIView extends View$1{constructor(n,a,l){super(n);E(this,"name",null);E(this,"_editingView");E(this,"_editableElement");E(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:n.contentLanguage,dir:n.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=l,this._hasExternalElement=!!this._editableElement,this._editingView=a}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const n=this._editingView;n.isRenderingInProgress?l(this):a(this);function a(c){n.change(u=>{const d=n.document.getRoot(c.name);u.addClass(c.isFocused?"ck-focused":"ck-blurred",d),u.removeClass(c.isFocused?"ck-blurred":"ck-focused",d)})}function l(c){n.once("change:isRenderingInProgress",(u,d,h)=>{h?l(c):a(c)})}}}class InlineEditableUIView extends EditableUIView{constructor(n,a,l,c={}){super(n,a,l);E(this,"_options");this._options=c,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const n=this._editingView;n.change(a=>{const l=n.document.getRoot(this.name);a.setAttribute("aria-label",this.getEditableAriaLabel(),l)})}getEditableAriaLabel(){const n=this.locale.t,a=this._options.label,l=this._editableElement,c=this.name;if(typeof a=="string")return a;if(typeof a=="object")return a[c];if(typeof a=="function")return a(this);if(l){const u=l.getAttribute("aria-label");if(u)return u}return n("Rich Text Editor. Editing area: %0",c)}}class Notification extends ContextPlugin{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(o,n)=>{window.alert(n.message)},{priority:"lowest"})}showSuccess(o,n={}){this._showNotification({message:o,type:"success",namespace:n.namespace,title:n.title})}showInfo(o,n={}){this._showNotification({message:o,type:"info",namespace:n.namespace,title:n.title})}showWarning(o,n={}){this._showNotification({message:o,type:"warning",namespace:n.namespace,title:n.title})}_showNotification(o){const n=o.namespace?`show:${o.type}:${o.namespace}`:`show:${o.type}`;this.fire(n,{message:o.message,type:o.type,title:o.title||""})}}let Model$1=class extends ObservableMixin(){constructor(o,n){super(),n&&assignIn(this,n),o&&this.set(o)}};const toPx$4=toUnit("px");class ContextualBalloon extends Plugin{constructor(n){super(n);E(this,"positionLimiter");E(this,"visibleStack");E(this,"_viewToStack",new Map);E(this,"_idToStack",new Map);E(this,"_view",null);E(this,"_rotatorView",null);E(this,"_fakePanelsView",null);this.positionLimiter=()=>{const a=this.editor.editing.view,c=a.document.selection.editableElement;return c?a.domConverter.mapViewToDom(c.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(n){return Array.from(this._viewToStack.keys()).includes(n)}add(n){if(this._view||this._createPanelView(),this.hasView(n.view))throw new CKEditorError("contextualballoon-add-view-exist",[this,n]);const a=n.stackId||"main";if(!this._idToStack.has(a)){this._idToStack.set(a,new Map([[n.view,n]])),this._viewToStack.set(n.view,this._idToStack.get(a)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||n.singleViewMode)&&this.showStack(a);return}const l=this._idToStack.get(a);n.singleViewMode&&this.showStack(a),l.set(n.view,n),this._viewToStack.set(n.view,l),l===this._visibleStack&&this._showView(n)}remove(n){if(!this.hasView(n))throw new CKEditorError("contextualballoon-remove-view-not-exist",[this,n]);const a=this._viewToStack.get(n);this._singleViewMode&&this.visibleView===n&&(this._singleViewMode=!1),this.visibleView===n&&(a.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(a.values())[a.size-2])),a.size===1?(this._idToStack.delete(this._getStackId(a)),this._numberOfStacks=this._idToStack.size):a.delete(n),this._viewToStack.delete(n)}updatePosition(n){n&&(this._visibleStack.get(this.visibleView).position=n),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let n=Array.from(this._visibleStack.values()).pop().position;return n&&(n.limiter||(n=Object.assign({},n,{limiter:this.positionLimiter})),n=Object.assign({},n,{viewportOffsetConfig:this.editor.ui.viewportOffset})),n}showStack(n){this.visibleStack=n;const a=this._idToStack.get(n);if(!a)throw new CKEditorError("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==a&&this._showView(Array.from(a.values()).pop())}_createPanelView(){this._view=new BalloonPanelView(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(n){return Array.from(this._idToStack.entries()).find(l=>l[1]===n)[0]}_showNextStack(){const n=Array.from(this._idToStack.values());let a=n.indexOf(this._visibleStack)+1;n[a]||(a=0),this.showStack(this._getStackId(n[a]))}_showPrevStack(){const n=Array.from(this._idToStack.values());let a=n.indexOf(this._visibleStack)-1;n[a]||(a=n.length-1),this.showStack(this._getStackId(n[a]))}_createRotatorView(){const n=new RotatorView(this.editor.locale),a=this.editor.locale.t;return this.view.content.add(n),n.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(l,c)=>!c&&l>1),n.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),n.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(l,c)=>{if(c<2)return"";const u=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return a("%0 of %1",[u,c])}),n.buttonNextView.on("execute",()=>{n.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),n.buttonPrevView.on("execute",()=>{n.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),n}_createFakePanelsView(){const n=new FakePanelsView(this.editor.locale,this.view);return n.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(a,l)=>!l&&a>=2?Math.min(a-1,2):0),n.listenTo(this.view,"change:top",()=>n.updatePosition()),n.listenTo(this.view,"change:left",()=>n.updatePosition()),this.editor.ui.view.body.add(n),n}_showView({view:n,balloonClassName:a="",withArrow:l=!0,singleViewMode:c=!1}){this.view.class=a,this.view.withArrow=l,this._rotatorView.showView(n),this.visibleView=n,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),c&&(this._singleViewMode=!0)}}class RotatorView extends View$1{constructor(n){super(n);E(this,"focusTracker");E(this,"buttonPrevView");E(this,"buttonNextView");E(this,"content");const a=n.t,l=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new FocusTracker,this.buttonPrevView=this._createButtonView(a("Previous"),icons.previousArrow),this.buttonNextView=this._createButtonView(a("Next"),icons.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",l.to("isNavigationVisible",c=>c?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:l.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(n){this.hideView(),this.content.add(n)}hideView(){this.content.clear()}_createButtonView(n,a){const l=new ButtonView(this.locale);return l.set({label:n,icon:a,tooltip:!0}),l}}class FakePanelsView extends View$1{constructor(n,a){super(n);E(this,"content");E(this,"_balloonPanelView");const l=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=a,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",l.to("numberOfPanels",c=>c?"":"ck-hidden")],style:{top:l.to("top",toPx$4),left:l.to("left",toPx$4),width:l.to("width",toPx$4),height:l.to("height",toPx$4)}},children:this.content}),this.on("change:numberOfPanels",(c,u,d,h)=>{d>h?this._addPanels(d-h):this._removePanels(h-d),this.updatePosition()})}_addPanels(n){for(;n--;){const a=new View$1;a.setTemplate({tag:"div"}),this.content.add(a),this.registerChild(a)}}_removePanels(n){for(;n--;){const a=this.content.last;this.content.remove(a),this.deregisterChild(a),a.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:n,left:a}=this._balloonPanelView,{width:l,height:c}=new Rect$3(this._balloonPanelView.element);Object.assign(this,{top:n,left:a,width:l,height:c})}}}const toPx$3=toUnit("px");class StickyPanelView extends View$1{constructor(n){super(n);E(this,"content");E(this,"contentPanelElement");E(this,"_contentPanelPlaceholder");const a=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:a.to("isSticky",l=>l?"block":"none"),height:a.to("isSticky",l=>l?toPx$3(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",a.if("isSticky","ck-sticky-panel__content_sticky"),a.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:a.to("isSticky",l=>l?toPx$3(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:a.to("_stickyTopOffset",l=>l&&toPx$3(l)),bottom:a.to("_stickyBottomOffset",l=>l&&toPx$3(l)),marginLeft:a.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(global$1.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const n=new Rect$3(this.limiterElement);let a=n.getVisible();if(a){const l=new Rect$3(global$1.window);l.top+=this.viewportTopOffset,l.height-=this.viewportTopOffset,a=a.getIntersection(l)}if(a&&n.top<a.top){const l=a.top;if(l+this._contentPanelRect.height+this.limiterBottomOffset>a.bottom){const c=Math.max(n.bottom-a.bottom,0)+this.limiterBottomOffset;n.bottom-c>n.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(c):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<n.height?this._stickToTopOfAncestors(l):this._unstick()}else this._unstick()}_stickToTopOfAncestors(n){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=n,this._stickyBottomOffset=null,this._marginLeft=toPx$3(-global$1.window.scrollX)}_stickToBottomOfLimiter(n){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=n,this._marginLeft=toPx$3(-global$1.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Rect$3(this.contentPanelElement)}}const toPx$2=toUnit("px");class BalloonToolbar extends Plugin{constructor(n){super(n);E(this,"toolbarView");E(this,"focusTracker");E(this,"_balloonConfig");E(this,"_resizeObserver",null);E(this,"_balloon");E(this,"_fireSelectionChangeDebounced");this._balloonConfig=normalizeToolbarConfig(n.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new FocusTracker,this._trackFocusableEditableElements(),this.focusTracker.add(this.toolbarView),n.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=n.plugins.get(ContextualBalloon),this._fireSelectionChangeDebounced=debounce$1(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}static get pluginName(){return"BalloonToolbar"}static get isOfficialPlugin(){return!0}static get requires(){return[ContextualBalloon]}init(){const n=this.editor,a=n.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(l,c,u)=>{const d=this._balloon.visibleView===this.toolbarView;!u&&d?this.hide():u&&this.show()}),this.listenTo(a,"change:range",(l,c)=>{(c.directChange||a.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(n,"ready",()=>{const l=n.ui.view.editable.element;this._resizeObserver=new ResizeObserver$1(l,c=>{this.toolbarView.maxWidth=toPx$2(c.contentRect.width*.9)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),n.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const n=this.editor.locale.t,a=!this._balloonConfig.shouldNotGroupWhenFull,l=new ToolbarView(this.editor.locale,{shouldGroupWhenFull:a,isFloating:!0});return l.ariaLabel=n("Editor contextual toolbar"),l.render(),l}show(n=!1){const a=this.editor,l=a.model.document.selection,c=a.model.schema;this._balloon.hasView(this.toolbarView)||l.isCollapsed&&!n||selectionContainsOnlyMultipleSelectables(l,c)||Array.from(this.toolbarView.items).every(u=>u.isEnabled!==void 0&&!u.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_trackFocusableEditableElements(){const{editor:n,focusTracker:a}=this,{editing:l}=n;l.view.addObserver(class extends Observer{observe(u){a.add(u)}stopObserving(u){a.remove(u)}})}_getBalloonPositionData(){const a=this.editor.editing.view,l=a.document,c=l.selection,u=l.selection.isBackward;return{target:()=>{const d=u?c.getFirstRange():c.getLastRange(),h=Rect$3.getDomRangeRects(a.domConverter.viewRangeToDom(d));return u?h[0]:(h.length>1&&h[h.length-1].width===0&&h.pop(),h[h.length-1])},positions:this._getBalloonPositions(u)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(n){const l=env$1.isSafari&&env$1.isiOS?BalloonPanelView.generatePositions({heightOffset:Math.max(BalloonPanelView.arrowHeightOffset,Math.round(20/global$1.window.visualViewport.scale))}):BalloonPanelView.defaultPositions;return n?[l.northWestArrowSouth,l.northWestArrowSouthWest,l.northWestArrowSouthEast,l.northWestArrowSouthMiddleEast,l.northWestArrowSouthMiddleWest,l.southWestArrowNorth,l.southWestArrowNorthWest,l.southWestArrowNorthEast,l.southWestArrowNorthMiddleWest,l.southWestArrowNorthMiddleEast]:[l.southEastArrowNorth,l.southEastArrowNorthEast,l.southEastArrowNorthWest,l.southEastArrowNorthMiddleEast,l.southEastArrowNorthMiddleWest,l.northEastArrowSouth,l.northEastArrowSouthEast,l.northEastArrowSouthWest,l.northEastArrowSouthMiddleEast,l.northEastArrowSouthMiddleWest]}}function selectionContainsOnlyMultipleSelectables(s,o){return s.rangeCount===1?!1:[...s.getRanges()].every(n=>{const a=n.getContainedElement();return a&&o.isSelectable(a)})}class MenuBarMenuButtonView extends ListItemButtonView{constructor(n){super(n);E(this,"arrowView");const a=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",l=>String(l)),"data-cke-tooltip-disabled":a.to("isOn")},on:{mouseenter:a.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const n=new IconView;return n.content=dropdownArrowIcon,n.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),n}}class MenuBarMenuPanelView extends View$1{constructor(n){super(n);E(this,"children");const a=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",a.to("position",l=>`ck-menu-bar__menu__panel_position_${l}`),a.if("isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:this.children,on:{selectstart:a.to(l=>{l.target.tagName.toLocaleLowerCase()!=="input"&&l.preventDefault()})}})}focus(n=1){this.children.length&&(n===1?this.children.first.focus():this.children.last.focus())}}const Yt=class Yt extends View$1{constructor(n){super(n);E(this,"buttonView");E(this,"panelView");E(this,"focusTracker");E(this,"keystrokes");const a=this.bindTemplate;this.buttonView=new MenuBarMenuButtonView(n),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new MenuBarMenuPanelView(n),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",a.to("class"),a.if("isEnabled","ck-disabled",l=>!l),a.if("parentMenuView","ck-menu-bar__menu_top-level",l=>!l)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),MenuBarMenuBehaviors.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(MenuBarMenuBehaviors.openOnButtonClick(this),MenuBarMenuBehaviors.openOnArrowRightKey(this),MenuBarMenuBehaviors.closeOnArrowLeftKey(this),MenuBarMenuBehaviors.openAndFocusOnEnterKeyPress(this),MenuBarMenuBehaviors.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),MenuBarMenuBehaviors.openAndFocusPanelOnArrowDownKey(this),MenuBarMenuBehaviors.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(n,a)=>{this.fire("arrowright"),a()}),this.keystrokes.set("arrowleft",(n,a)=>{this.fire("arrowleft"),a()})}_repositionPanelOnOpen(){this.on("change:isOpen",(n,a,l)=>{if(!l)return;const c=Yt._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=c?c.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:n,southWest:a,northEast:l,northWest:c,westSouth:u,eastSouth:d,westNorth:h,eastNorth:f}=MenuBarMenuViewPanelPositioningFunctions;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[d,f,u,h]:[n,a,l,c]:this.parentMenuView?[u,h,d,f]:[a,n,c,l]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};E(Yt,"_getOptimalPosition",getOptimalPosition);let MenuBarMenuView=Yt;class MenuBarMenuListView extends ListView{constructor(o){super(o),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const o=Array.from(this.items).some(n=>{const a=pickListButtonMenuViewIfPresent(n);return a&&a.isToggleable});this.items.forEach(n=>{const a=pickListButtonMenuViewIfPresent(n);a&&(a.hasCheckSpace=o)})}}function pickListButtonMenuViewIfPresent(s){return s instanceof ListItemView?s.children.map(o=>isNestedMenuLikeView(o)?o.buttonView:o).find(o=>o instanceof ListItemButtonView):null}function isNestedMenuLikeView(s){return typeof s=="object"&&"buttonView"in s&&s.buttonView instanceof ButtonView}class MenuBarMenuListItemFileDialogButtonView extends FileDialogListItemButtonView{constructor(o){super(o),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const EVENT_NAME_DELEGATES=["mouseenter","arrowleft","arrowright","change:isOpen"];class MenuBarView extends View$1{constructor(n){super(n);E(this,"children");E(this,"menus",[]);const a=n.t,l=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",l.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":a("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(n,a,l=[]){const c=this.locale,d=processMenuBarConfig({normalizedConfig:n,locale:c,componentFactory:a,extraItems:l}).items.map(h=>this._createMenu({componentFactory:a,menuDefinition:h}));this.children.addMany(d)}render(){super.render(),MenuBarBehaviors.toggleMenusAndFocusItemsOnHover(this),MenuBarBehaviors.closeMenusWhenTheBarCloses(this),MenuBarBehaviors.closeMenuWhenAnotherOnTheSameLevelOpens(this),MenuBarBehaviors.focusCycleMenusOnArrows(this),MenuBarBehaviors.closeOnClickOutside(this),MenuBarBehaviors.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const n of this.children)n.isOpen=!1}registerMenu(n,a=null){a?(n.delegate(...EVENT_NAME_DELEGATES).to(a),n.parentMenuView=a):n.delegate(...EVENT_NAME_DELEGATES).to(this,l=>"menu:"+l),n._attachBehaviors(),this.menus.push(n)}_createMenu({componentFactory:n,menuDefinition:a,parentMenuView:l}){const c=this.locale,u=new MenuBarMenuView(c);return this.registerMenu(u,l),u.buttonView.set({label:a.label}),u.once("change:isOpen",()=>{const d=new MenuBarMenuListView(c);d.ariaLabel=a.label,u.panelView.children.add(d),d.items.addMany(this._createMenuItems({menuDefinition:a,parentMenuView:u,componentFactory:n}))}),u}_createMenuItems({menuDefinition:n,parentMenuView:a,componentFactory:l}){const c=this.locale,u=[];for(const d of n.groups){for(const h of d.items){const f=new MenuBarMenuListItemView(c,a);if(isObject$6(h))f.children.add(this._createMenu({componentFactory:l,menuDefinition:h,parentMenuView:a}));else{const g=this._createMenuItemContentFromFactory({componentName:h,componentFactory:l,parentMenuView:a});if(!g)continue;f.children.add(g)}u.push(f)}d!==n.groups[n.groups.length-1]&&u.push(new ListSeparatorView(c))}return u}_createMenuItemContentFromFactory({componentName:n,parentMenuView:a,componentFactory:l}){const c=l.create(n);return c instanceof MenuBarMenuView||c instanceof MenuBarMenuListItemButtonView||c instanceof MenuBarMenuListItemFileDialogButtonView?(this._registerMenuTree(c,a),c.on("execute",()=>{this.close()}),c):(logWarning("menu-bar-component-unsupported",{componentName:n,componentView:c}),null)}_registerMenuTree(n,a){if(!(n instanceof MenuBarMenuView)){n.delegate("mouseenter").to(a);return}this.registerMenu(n,a);const l=n.panelView.children.filter(u=>u instanceof MenuBarMenuListView)[0];if(!l){n.delegate("mouseenter").to(a);return}const c=l.items.filter(u=>u instanceof ListItemView);for(const u of c)this._registerMenuTree(u.children.get(0),n)}_setupIsOpenUpdater(){let n;this.on("menu:change:isOpen",(a,l,c)=>{clearTimeout(n),c?this.isOpen=!0:n=setTimeout(()=>{this.isOpen=Array.from(this.children).some(u=>u.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const supportedOptions=["left","right","center","justify"];function isSupported(s){return supportedOptions.includes(s)}function isDefault(s,o){return o.contentLanguageDirection=="rtl"?s==="right":s==="left"}function normalizeAlignmentOptions(s){const o=s.map(a=>{let l;return typeof a=="string"?l={name:a}:l=a,l}).filter(a=>{const l=supportedOptions.includes(a.name);return l||logWarning("alignment-config-name-not-recognized",{option:a}),l}),n=o.filter(a=>!!a.className).length;if(n&&n<o.length)throw new CKEditorError("alignment-config-classnames-are-missing",{configuredOptions:s});return o.forEach((a,l,c)=>{const u=c.slice(l+1);if(u.some(h=>h.name==a.name))throw new CKEditorError("alignment-config-name-already-defined",{option:a,configuredOptions:s});if(a.className&&u.some(f=>f.className==a.className))throw new CKEditorError("alignment-config-classname-already-defined",{option:a,configuredOptions:s})}),o}const ALIGNMENT="alignment";class AlignmentCommand extends Command{refresh(){const n=this.editor.locale,a=first(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!a&&this._canBeAligned(a),this.isEnabled&&a.hasAttribute("alignment")?this.value=a.getAttribute("alignment"):this.value=n.contentLanguageDirection==="rtl"?"right":"left"}execute(o={}){const n=this.editor,a=n.locale,l=n.model,c=l.document,u=o.value;l.change(d=>{const h=Array.from(c.selection.getSelectedBlocks()).filter(p=>this._canBeAligned(p)),f=h[0].getAttribute("alignment");isDefault(u,a)||f===u||!u?removeAlignmentFromSelection(h,d):setAlignmentOnSelection(h,d,u)})}_canBeAligned(o){return this.editor.model.schema.checkAttribute(o,ALIGNMENT)}}function removeAlignmentFromSelection(s,o){for(const n of s)o.removeAttribute(ALIGNMENT,n)}function setAlignmentOnSelection(s,o,n){for(const a of s)o.setAttribute(ALIGNMENT,n,a)}class AlignmentEditing extends Plugin{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("alignment",{options:supportedOptions.map(n=>({name:n}))})}init(){const o=this.editor,n=o.locale,a=o.model.schema,c=normalizeAlignmentOptions(o.config.get("alignment.options")).filter(f=>isSupported(f.name)&&!isDefault(f.name,n)),u=c.some(f=>!!f.className);a.extend("$block",{allowAttributes:"alignment"}),o.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),u?o.conversion.attributeToAttribute(buildClassDefinition(c)):o.conversion.for("downcast").attributeToAttribute(buildDowncastInlineDefinition(c));const d=buildUpcastInlineDefinitions(c);for(const f of d)o.conversion.for("upcast").attributeToAttribute(f);const h=buildUpcastCompatibilityDefinitions(c);for(const f of h)o.conversion.for("upcast").attributeToAttribute(f);o.commands.add("alignment",new AlignmentCommand(o))}}function buildDowncastInlineDefinition(s){const o={};for(const{name:a}of s)o[a]={key:"style",value:{"text-align":a}};return{model:{key:"alignment",values:s.map(a=>a.name)},view:o}}function buildUpcastInlineDefinitions(s){const o=[];for(const{name:n}of s)o.push({view:{key:"style",value:{"text-align":n}},model:{key:"alignment",value:n}});return o}function buildUpcastCompatibilityDefinitions(s){const o=[];for(const{name:n}of s)o.push({view:{key:"align",value:n},model:{key:"alignment",value:n}});return o}function buildClassDefinition(s){const o={};for(const a of s)o[a.name]={key:"class",value:a.className};return{model:{key:"alignment",values:s.map(a=>a.name)},view:o}}const iconsMap=new Map([["left",icons.alignLeft],["right",icons.alignRight],["center",icons.alignCenter],["justify",icons.alignJustify]]);class AlignmentUI extends Plugin{get localizedOptionTitles(){const o=this.editor.t;return{left:o("Align left"),right:o("Align right"),center:o("Align center"),justify:o("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=normalizeAlignmentOptions(o.config.get("alignment.options"));n.map(a=>a.name).filter(isSupported).forEach(a=>this._addButton(a)),this._addToolbarDropdown(n),this._addMenuBarMenu(n)}_addButton(o){this.editor.ui.componentFactory.add(`alignment:${o}`,a=>this._createButton(a,o))}_createButton(o,n,a={}){const l=this.editor,c=l.commands.get("alignment"),u=new ButtonView(o);return u.set({label:this.localizedOptionTitles[n],icon:iconsMap.get(n),tooltip:!0,isToggleable:!0,...a}),u.bind("isEnabled").to(c),u.bind("isOn").to(c,"value",d=>d===n),this.listenTo(u,"execute",()=>{l.execute("alignment",{value:n}),l.editing.view.focus()}),u}_addToolbarDropdown(o){const n=this.editor;n.ui.componentFactory.add("alignment",l=>{const c=createDropdown(l),u=l.uiLanguageDirection==="rtl"?"w":"e",d=l.t;addToolbarToDropdown(c,()=>o.map(g=>this._createButton(l,g.name,{tooltipPosition:u})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:d("Text alignment toolbar")}),c.buttonView.set({label:d("Text alignment"),tooltip:!0}),c.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const h=l.contentLanguageDirection==="rtl"?iconsMap.get("right"):iconsMap.get("left"),f=n.commands.get("alignment");return c.buttonView.bind("icon").to(f,"value",g=>iconsMap.get(g)||h),c.bind("isEnabled").to(f,"isEnabled"),this.listenTo(c,"execute",()=>{n.editing.view.focus()}),c})}_addMenuBarMenu(o){const n=this.editor;n.ui.componentFactory.add("menuBar:alignment",a=>{const l=n.commands.get("alignment"),c=a.t,u=new MenuBarMenuView(a),d=new MenuBarMenuListView(a);u.bind("isEnabled").to(l),d.set({ariaLabel:c("Text alignment"),role:"menu"}),u.buttonView.set({label:c("Text alignment")});for(const h of o){const f=new MenuBarMenuListItemView(a,u),g=new MenuBarMenuListItemButtonView(a);g.delegate("execute").to(u),g.set({label:this.localizedOptionTitles[h.name],icon:iconsMap.get(h.name),role:"menuitemcheckbox",isToggleable:!0}),g.on("execute",()=>{n.execute("alignment",{value:h.name}),n.editing.view.focus()}),g.bind("isOn").to(l,"value",p=>p===h.name),g.bind("isEnabled").to(l,"isEnabled"),f.children.add(g),d.items.add(f)}return u.panelView.children.add(d),u})}}class Alignment extends Plugin{static get requires(){return[AlignmentEditing,AlignmentUI]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ChangeBuffer{constructor(o,n=20){E(this,"model");E(this,"limit");E(this,"_isLocked");E(this,"_size");E(this,"_batch",null);E(this,"_changeCallback");E(this,"_selectionChangeCallback");this.model=o,this._size=0,this.limit=n,this._isLocked=!1,this._changeCallback=(a,l)=>{l.isLocal&&l.isUndoable&&l!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(o){this._size+=o,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(o=!1){(!this.isLocked||o)&&(this._batch=null,this._size=0)}}class InsertTextCommand extends Command{constructor(n,a){super(n);E(this,"_buffer");this._buffer=new ChangeBuffer(n.model,a),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(n={}){const a=this.editor.model,l=a.document,c=n.text||"",u=c.length;let d=l.selection;if(n.selection?d=n.selection:n.range&&(d=a.createSelection(n.range)),!a.canEditAt(d))return;const h=n.resultRange;a.enqueueChange(this._buffer.batch,f=>{this._buffer.lock();const g=Array.from(l.selection.getAttributes());a.deleteContent(d),c&&a.insertContent(f.createText(c,g),d),h?f.setSelection(h):d.is("documentSelection")||f.setSelection(d),this._buffer.unlock(),this._buffer.input(u)})}}const TYPING_INPUT_TYPES=["insertText","insertReplacementText"],TYPING_INPUT_TYPES_ANDROID=[...TYPING_INPUT_TYPES,"insertCompositionText"];class InsertTextObserver extends Observer{constructor(n){super(n);E(this,"focusObserver");this.focusObserver=n.getObserver(FocusObserver);const a=env$1.isAndroid?TYPING_INPUT_TYPES_ANDROID:TYPING_INPUT_TYPES,l=n.document;l.on("beforeinput",(c,u)=>{if(!this.isEnabled)return;const{data:d,targetRanges:h,inputType:f,domEvent:g}=u;if(!a.includes(f))return;this.focusObserver.flush();const p=new EventInfo(l,"insertText");l.fire(p,new DomEventData(n,g,{text:d,selection:n.createSelection(h)})),p.stop.called&&c.stop()}),env$1.isAndroid||l.on("compositionend",(c,{data:u,domEvent:d})=>{this.isEnabled&&u&&l.fire("insertText",new DomEventData(n,d,{text:u}))},{priority:"lowest"})}observe(){}stopObserving(){}}class Input extends Plugin{constructor(){super(...arguments);E(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model,l=n.editing.view,c=n.editing.mapper,u=a.document.selection;this._compositionQueue=new CompositionQueue(n),l.addObserver(InsertTextObserver);const d=new InsertTextCommand(n,n.config.get("typing.undoStep")||20);n.commands.add("insertText",d),n.commands.add("input",d),this.listenTo(l.document,"insertText",(h,f)=>{l.document.isComposing||f.preventDefault(),env$1.isAndroid&&l.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:g,selection:p}=f;let v;p?v=Array.from(p.getRanges()).map(w=>c.toModelRange(w)):v=Array.from(u.getRanges());let b=g;if(env$1.isAndroid){const w=Array.from(v[0].getItems()).reduce((x,S)=>x+(S.is("$textProxy")?S.data:""),"");if(w&&(w.length<=b.length?b.startsWith(w)&&(b=b.substring(w.length),v[0].start=v[0].start.getShiftedBy(w.length)):w.startsWith(b)&&(v[0].start=v[0].start.getShiftedBy(b.length),b="")),b.length==0&&v[0].isCollapsed)return}const _={text:b,selection:a.createSelection(v)};env$1.isAndroid&&l.document.isComposing?this._compositionQueue.push(_):(n.execute("insertText",_),l.scrollToTheSelection())}),env$1.isAndroid?this.listenTo(l.document,"keydown",(h,f)=>{u.isCollapsed||f.keyCode!=229||!l.document.isComposing||deleteSelectionContent(a,d)}):this.listenTo(l.document,"compositionstart",()=>{u.isCollapsed||deleteSelectionContent(a,d)}),env$1.isAndroid?(this.listenTo(l.document,"mutations",(h,{mutations:f})=>{if(l.document.isComposing)for(const{node:g}of f){const p=findMappedViewAncestor(g,c),v=c.toModelElement(p);if(this._compositionQueue.isComposedElement(v)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(l.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(l.document,"compositionend",()=>{const h=[];for(const f of this._compositionQueue.flushComposedElements()){const g=c.toViewElement(f);g&&h.push({type:"children",node:g})}h.length&&l.document.fire("mutations",{mutations:h})},{priority:"lowest"})):this.listenTo(l.document,"compositionend",()=>{l.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class CompositionQueue{constructor(o){E(this,"editor");E(this,"flushDebounced",debounce$1(()=>this.flush("timeout"),50));E(this,"_queue",[]);E(this,"_compositionElements",new Set);this.editor=o}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(o){const n={text:o.text};if(o.selection){n.selectionRanges=[];for(const a of o.selection.getRanges())n.selectionRanges.push(LiveRange.fromRange(a)),this._compositionElements.add(a.start.parent)}this._queue.push(n),this.flushDebounced()}shift(){const o=this._queue.shift(),n={text:o.text};if(o.selectionRanges){const a=o.selectionRanges.map(l=>detachLiveRange(l)).filter(l=>!!l);a.length&&(n.selection=this.editor.model.createSelection(a))}return n}flush(o){const n=this.editor,a=n.model,l=n.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const u=n.commands.get("insertText").buffer;a.enqueueChange(u.batch,()=>{for(u.lock();this._queue.length;){const d=this.shift();n.execute("insertText",d)}u.unlock()}),l.scrollToTheSelection()}isComposedElement(o){return this._compositionElements.has(o)}flushComposedElements(){const o=Array.from(this._compositionElements);return this._compositionElements.clear(),o}}function deleteSelectionContent(s,o){if(!o.isEnabled)return;const n=o.buffer;n.lock(),s.enqueueChange(n.batch,()=>{s.deleteContent(s.document.selection)}),n.unlock()}function detachLiveRange(s){const o=s.toRange();return s.detach(),o.root.rootName=="$graveyard"?null:o}function findMappedViewAncestor(s,o){let n=s.is("$text")?s.parent:s;for(;!o.toModelElement(n);)n=n.parent;return n}class DeleteCommand extends Command{constructor(n,a){super(n);E(this,"direction");E(this,"_buffer");this.direction=a,this._buffer=new ChangeBuffer(n.model,n.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(n={}){const a=this.editor.model,l=a.document;a.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const u=c.createSelection(n.selection||l.selection);if(!a.canEditAt(u))return;const d=n.sequence||1,h=u.isCollapsed;if(u.isCollapsed&&a.modifySelection(u,{direction:this.direction,unit:n.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(d)){this._replaceEntireContentWithParagraph(c);return}if(this._shouldReplaceFirstBlockWithParagraph(u,d)){this.editor.execute("paragraph",{selection:u});return}if(u.isCollapsed)return;let f=0;u.getFirstRange().getMinimalFlatRanges().forEach(g=>{f+=count$1(g.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),a.deleteContent(u,{doNotResetEntireContent:h,direction:this.direction}),this._buffer.input(f),c.setSelection(u),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(n){if(n>1)return!1;const a=this.editor.model,c=a.document.selection,u=a.schema.getLimitElement(c);if(!(c.isCollapsed&&c.containsEntireContent(u))||!a.schema.checkChild(u,"paragraph"))return!1;const h=u.getChild(0);return!(h&&h.is("element","paragraph"))}_replaceEntireContentWithParagraph(n){const a=this.editor.model,c=a.document.selection,u=a.schema.getLimitElement(c),d=n.createElement("paragraph");n.remove(n.createRangeIn(u)),n.insert(d,u),n.setSelection(d,0)}_shouldReplaceFirstBlockWithParagraph(n,a){const l=this.editor.model;if(a>1||this.direction!="backward"||!n.isCollapsed)return!1;const c=n.getFirstPosition(),u=l.schema.getLimitElement(c),d=u.getChild(0);return!(c.parent!=d||!n.containsEntireContent(d)||!l.schema.checkChild(u,"paragraph")||d.name=="paragraph")}}const DELETE_CHARACTER="character",DELETE_WORD="word",DELETE_CODE_POINT="codePoint",DELETE_SELECTION="selection",DELETE_BACKWARD="backward",DELETE_FORWARD="forward",DELETE_EVENT_TYPES={deleteContent:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentBackward:{unit:DELETE_CODE_POINT,direction:DELETE_BACKWARD},deleteWordBackward:{unit:DELETE_WORD,direction:DELETE_BACKWARD},deleteHardLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteSoftLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentForward:{unit:DELETE_CHARACTER,direction:DELETE_FORWARD},deleteWordForward:{unit:DELETE_WORD,direction:DELETE_FORWARD},deleteHardLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD},deleteSoftLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD}};class DeleteObserver extends Observer{constructor(o){super(o);const n=o.document;let a=0;n.on("keydown",()=>{a++}),n.on("keyup",()=>{a=0}),n.on("beforeinput",(l,c)=>{if(!this.isEnabled)return;const{targetRanges:u,domEvent:d,inputType:h}=c,f=DELETE_EVENT_TYPES[h];if(!f)return;const g={direction:f.direction,unit:f.unit,sequence:a};g.unit==DELETE_SELECTION&&(g.selectionToRemove=o.createSelection(u[0])),h==="deleteContentBackward"&&(env$1.isAndroid&&(g.sequence=1),shouldUseTargetRanges(u)&&(g.unit=DELETE_SELECTION,g.selectionToRemove=o.createSelection(u)));const p=new BubblingEventInfo(n,"delete",u[0]);n.fire(p,new DomEventData(o,d,g)),p.stop.called&&l.stop()}),env$1.isBlink&&enableChromeWorkaround(this)}observe(){}stopObserving(){}}function enableChromeWorkaround(s){const o=s.view,n=o.document;let a=null,l=!1;n.on("keydown",(d,{keyCode:h})=>{a=h,l=!1}),n.on("keyup",(d,{keyCode:h,domEvent:f})=>{const g=n.selection,p=s.isEnabled&&h==a&&c(h)&&!g.isCollapsed&&!l;if(a=null,p){const v=g.getFirstRange(),b=new BubblingEventInfo(n,"delete",v),_={unit:DELETE_SELECTION,direction:u(h),selectionToRemove:g};n.fire(b,new DomEventData(o,f,_))}}),n.on("beforeinput",(d,{inputType:h})=>{const f=DELETE_EVENT_TYPES[h];c(a)&&f&&f.direction==u(a)&&(l=!0)},{priority:"high"}),n.on("beforeinput",(d,{inputType:h,data:f})=>{a==keyCodes.delete&&h=="insertText"&&f==""&&d.stop()},{priority:"high"});function c(d){return d==keyCodes.backspace||d==keyCodes.delete}function u(d){return d==keyCodes.backspace?DELETE_BACKWARD:DELETE_FORWARD}}function shouldUseTargetRanges(s){if(s.length!=1||s[0].isCollapsed)return!1;const o=s[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let n=0;for(const{nextPosition:a,item:l}of o){if(a.parent.is("$text")){const c=a.parent.data,u=a.offset;if(isInsideSurrogatePair(c,u)||isInsideCombinedSymbol(c,u)||isInsideEmojiSequence(c,u))continue;n++}else(l.is("containerElement")||l.is("emptyElement"))&&n++;if(n>1)return!0}return!1}class Delete extends Plugin{constructor(){super(...arguments);E(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.editing.view,l=a.document,c=n.model.document;a.addObserver(DeleteObserver),this._undoOnBackspace=!1;const u=new DeleteCommand(n,"forward");n.commands.add("deleteForward",u),n.commands.add("forwardDelete",u),n.commands.add("delete",new DeleteCommand(n,"backward")),this.listenTo(l,"delete",(d,h)=>{l.isComposing||h.preventDefault();const{direction:f,sequence:g,selectionToRemove:p,unit:v}=h,b=f==="forward"?"deleteForward":"delete",_={sequence:g};if(v=="selection"){const w=Array.from(p.getRanges()).map(x=>n.editing.mapper.toModelRange(x));_.selection=n.model.createSelection(w)}else _.unit=v;n.execute(b,_),a.scrollToTheSelection()},{priority:"low"}),this.listenTo(l,"keydown",(d,h)=>{if(l.isComposing||h.keyCode!=keyCodes.backspace||!c.selection.isCollapsed)return;const f=n.model.schema.getLimitElement(c.selection);n.model.createPositionAt(f,0).isTouching(c.selection.getFirstPosition())&&h.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(l,"delete",(d,h)=>{this._undoOnBackspace&&h.direction=="backward"&&h.sequence==1&&h.unit=="codePoint"&&(this._undoOnBackspace=!1,n.execute("undo"),h.preventDefault(),d.stop())},{context:"$capture"}),this.listenTo(c,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Typing extends Plugin{static get requires(){return[Input,Delete]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLastTextLine(s,o){let n=s.start;return{text:Array.from(s.getWalker({ignoreElementEnd:!1})).reduce((l,{item:c})=>c.is("$text")||c.is("$textProxy")?l+c.data:(n=o.createPositionAfter(c),""),""),range:o.createRange(n,s.end)}}class TextWatcher extends ObservableMixin(){constructor(n,a){super();E(this,"model");E(this,"testCallback");E(this,"_hasMatch");this.model=n,this.testCallback=a,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(n.document.selection),this.stopListening(n.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const a=this.model.document;this.listenTo(a.selection,"change:range",(l,{directChange:c})=>{if(c){if(!a.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(a,"change:data",(l,c)=>{c.isUndo||!c.isLocal||this._evaluateTextBeforeSelection("data",{batch:c})})}_evaluateTextBeforeSelection(n,a={}){const l=this.model,u=l.document.selection,d=l.createRange(l.createPositionAt(u.focus.parent,0),u.focus),{text:h,range:f}=getLastTextLine(d,l),g=this.testCallback(h);if(!g&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!g,g){const p=Object.assign(a,{text:h,range:f});typeof g=="object"&&Object.assign(p,g),this.fire(`matched:${n}`,p)}}}class TwoStepCaretMovement extends Plugin{constructor(n){super(n);E(this,"attributes");E(this,"_overrideUid");E(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model,l=n.editing.view,c=n.locale,u=a.document.selection;this.listenTo(l.document,"arrowKey",(d,h)=>{if(!u.isCollapsed||h.shiftKey||h.altKey||h.ctrlKey)return;const f=h.keyCode==keyCodes.arrowright,g=h.keyCode==keyCodes.arrowleft;if(!f&&!g)return;const p=c.contentLanguageDirection;let v=!1;p==="ltr"&&f||p==="rtl"&&g?v=this._handleForwardMovement(h):v=this._handleBackwardMovement(h),v===!0&&d.stop()},{context:"$text",priority:"highest"}),this.listenTo(u,"change:range",(d,h)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!h.directChange&&isBetweenDifferentAttributes(u.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(n){this.attributes.add(n)}_handleForwardMovement(n){const a=this.attributes,l=this.editor.model,c=l.document.selection,u=c.getFirstPosition();return this._isGravityOverridden||u.isAtStart&&hasAnyAttribute$1(c,a)?!1:isBetweenDifferentAttributes(u,a)?(preventCaretMovement(n),hasAnyAttribute$1(c,a)&&isBetweenDifferentAttributes(u,a,!0)?clearSelectionAttributes(l,a):this._overrideGravity(),!0):!1}_handleBackwardMovement(n){const a=this.attributes,l=this.editor.model,c=l.document.selection,u=c.getFirstPosition();return this._isGravityOverridden?(preventCaretMovement(n),this._restoreGravity(),isBetweenDifferentAttributes(u,a,!0)?clearSelectionAttributes(l,a):setSelectionAttributesFromTheNodeBefore(l,a,u),!0):u.isAtStart?hasAnyAttribute$1(c,a)?(preventCaretMovement(n),setSelectionAttributesFromTheNodeBefore(l,a,u),!0):!1:!hasAnyAttribute$1(c,a)&&isBetweenDifferentAttributes(u,a,!0)?(preventCaretMovement(n),setSelectionAttributesFromTheNodeBefore(l,a,u),!0):isStepAfterAnyAttributeBoundary(u,a)?u.isAtEnd&&!hasAnyAttribute$1(c,a)&&isBetweenDifferentAttributes(u,a)?(preventCaretMovement(n),setSelectionAttributesFromTheNodeBefore(l,a,u),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const n=this.editor,a=n.model,l=a.document.selection,c=n.editing.view.document;n.editing.view.addObserver(MouseObserver),n.editing.view.addObserver(TouchObserver);let u=!1,d=!1;this.listenTo(c,"touchstart",()=>{d=!1,u=!0}),this.listenTo(c,"mousedown",()=>{d=!0}),this.listenTo(c,"selectionChange",()=>{const h=this.attributes;if(!d&&!u||(d=!1,u=!1,!l.isCollapsed)||!hasAnyAttribute$1(l,h))return;const f=l.getFirstPosition();isBetweenDifferentAttributes(f,h)&&(f.isAtStart||isBetweenDifferentAttributes(f,h,!0)?clearSelectionAttributes(a,h):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const a=this.editor.model,l=a.document.selection,c=this.attributes;this.listenTo(a,"insertContent",()=>{const u=l.getFirstPosition();hasAnyAttribute$1(l,c)&&isBetweenDifferentAttributes(u,c)&&clearSelectionAttributes(a,c)},{priority:"low"})}_handleDeleteContentAfterNode(){const n=this.editor,a=n.model,l=a.document.selection,c=n.editing.view;let u=!1,d=!1;this.listenTo(c.document,"delete",(h,f)=>{u=f.direction==="backward"},{priority:"high"}),this.listenTo(a,"deleteContent",()=>{if(!u)return;const h=l.getFirstPosition();d=hasAnyAttribute$1(l,this.attributes)&&!isStepAfterAnyAttributeBoundary(h,this.attributes)},{priority:"high"}),this.listenTo(a,"deleteContent",()=>{u&&(u=!1,!d&&n.model.enqueueChange(()=>{const h=l.getFirstPosition();hasAnyAttribute$1(l,this.attributes)&&isBetweenDifferentAttributes(h,this.attributes)&&(h.isAtStart||isBetweenDifferentAttributes(h,this.attributes,!0)?clearSelectionAttributes(a,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(n=>n.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(n=>{n.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function hasAnyAttribute$1(s,o){for(const n of o)if(s.hasAttribute(n))return!0;return!1}function setSelectionAttributesFromTheNodeBefore(s,o,n){const a=n.nodeBefore;s.change(l=>{if(a){const c=[],u=s.schema.isObject(a)&&s.schema.isInline(a);for(const[d,h]of a.getAttributes())s.schema.checkAttribute("$text",d)&&(!u||s.schema.getAttributeProperties(d).copyFromObject!==!1)&&c.push([d,h]);l.setSelectionAttribute(c)}else l.removeSelectionAttribute(o)})}function clearSelectionAttributes(s,o){s.change(n=>{n.removeSelectionAttribute(o)})}function preventCaretMovement(s){s.preventDefault()}function isStepAfterAnyAttributeBoundary(s,o){const n=s.getShiftedBy(-1);return isBetweenDifferentAttributes(n,o)}function isBetweenDifferentAttributes(s,o,n=!1){const{nodeBefore:a,nodeAfter:l}=s;for(const c of o){const u=a?a.getAttribute(c):void 0,d=l?l.getAttribute(c):void 0;if(!(n&&(u===void 0||d===void 0))&&d!==u)return!0}return!1}const TRANSFORMATIONS={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:buildQuotesRegExp('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:buildQuotesRegExp("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:buildQuotesRegExp("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:buildQuotesRegExp('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:buildQuotesRegExp('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:buildQuotesRegExp("'"),to:[null,"‚",null,"’"]}},TRANSFORMATION_GROUPS={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},DEFAULT_TRANSFORMATIONS=["symbols","mathematical","typography","quotes"];class TextTransformation extends Plugin{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("typing",{transformations:{include:DEFAULT_TRANSFORMATIONS}})}init(){const n=this.editor.model.document.selection;n.on("change:range",()=>{this.isEnabled=!n.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const o=this.editor,n=o.model,a=o.plugins.get("Delete"),l=normalizeTransformations(o.config.get("typing.transformations")),c=d=>{for(const h of l)if(h.from.test(d))return{normalizedTransformation:h}},u=new TextWatcher(o.model,c);u.on("matched:data",(d,h)=>{if(!h.batch.isTyping)return;const{from:f,to:g}=h.normalizedTransformation,p=f.exec(h.text),v=g(p.slice(1)),b=h.range;let _=p.index;n.enqueueChange(w=>{for(let x=1;x<p.length;x++){const S=p[x],C=v[x-1];if(C==null){_+=S.length;continue}const T=b.start.getShiftedBy(_),R=n.createRange(T,T.getShiftedBy(S.length)),A=getTextAttributesAfterPosition(T);n.insertContent(w.createText(C,A),R),_+=C.length}n.enqueueChange(()=>{a.requestUndoOnBackspace()})})}),u.bind("isEnabled").to(this)}}function normalizeFrom(s){return typeof s=="string"?new RegExp(`(${escapeRegExp(s)})$`):s}function normalizeTo(s){return typeof s=="string"?()=>[s]:s instanceof Array?()=>s:s}function getTextAttributesAfterPosition(s){return(s.textNode?s.textNode:s.nodeAfter).getAttributes()}function buildQuotesRegExp(s){return new RegExp(`(^|\\s)(${s})([^${s}]*)(${s})$`)}function normalizeTransformations(s){const o=s.extra||[],n=s.remove||[],a=c=>!n.includes(c),l=s.include.concat(o).filter(a);return expandGroupsAndRemoveDuplicates(l).filter(a).map(c=>typeof c=="string"&&TRANSFORMATIONS[c]?TRANSFORMATIONS[c]:c).filter(c=>typeof c=="object").map(c=>({from:normalizeFrom(c.from),to:normalizeTo(c.to)}))}function expandGroupsAndRemoveDuplicates(s){const o=new Set;for(const n of s)if(typeof n=="string"&&TRANSFORMATION_GROUPS[n])for(const a of TRANSFORMATION_GROUPS[n])o.add(a);else o.add(n);return Array.from(o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function findAttributeRange(s,o,n,a){return a.createRange(findAttributeRangeBound(s,o,n,!0,a),findAttributeRangeBound(s,o,n,!1,a))}function findAttributeRangeBound(s,o,n,a,l){let c=s.textNode||(a?s.nodeBefore:s.nodeAfter),u=null;for(;c&&c.getAttribute(o)==n;)u=c,c=a?c.previousSibling:c.nextSibling;return u?l.createPositionAt(u,a?"before":"after"):s}function inlineHighlight(s,o,n,a){const l=s.editing.view,c=new Set;l.document.registerPostFixer(u=>{const d=s.model.document.selection;let h=!1;if(d.hasAttribute(o)){const f=findAttributeRange(d.getFirstPosition(),o,d.getAttribute(o),s.model),g=s.editing.mapper.toViewRange(f);for(const p of g.getItems())p.is("element",n)&&!p.hasClass(a)&&(u.addClass(a,p),c.add(p),h=!0)}return h}),s.conversion.for("editingDowncast").add(u=>{u.on("insert",d,{priority:"highest"}),u.on("remove",d,{priority:"highest"}),u.on("attribute",d,{priority:"highest"}),u.on("selection",d,{priority:"highest"});function d(){l.change(h=>{for(const f of c.values())h.removeClass(a,f),c.delete(f)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function blockAutoformatEditing(s,o,n,a){let l,c=null;typeof a=="function"?l=a:(c=s.commands.get(a),l=()=>{s.execute(a)}),s.model.document.on("change:data",(u,d)=>{if(c&&!c.isEnabled||!o.isEnabled)return;const h=first(s.model.document.selection.getRanges());if(!h.isCollapsed||d.isUndo||!d.isLocal)return;const f=Array.from(s.model.document.differ.getChanges()),g=f[0];if(f.length!=1||g.type!=="insert"||g.name!="$text"||g.length!=1)return;const p=g.position.parent;if(p.is("element","codeBlock")||p.is("element","listItem")&&typeof a!="function"&&!["numberedList","bulletedList","todoList"].includes(a)||c&&c.value===!0)return;const v=p.getChild(0),b=s.model.createRangeOn(v);if(!b.containsRange(h)&&!h.end.isEqual(b.end))return;const _=n.exec(v.data.substr(0,h.end.offset));_&&s.model.enqueueChange(w=>{const x=w.createPositionAt(p,0),S=w.createPositionAt(p,_[0].length),C=new LiveRange(x,S);if(l({match:_})!==!1){w.remove(C);const R=s.model.document.selection.getFirstRange(),A=w.createRangeIn(p);p.isEmpty&&!A.isEqual(R)&&!A.containsRange(R,!0)&&w.remove(p)}C.detach(),s.model.enqueueChange(()=>{s.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function inlineAutoformatEditing(s,o,n,a){let l,c;n instanceof RegExp?l=n:c=n,c=c||(u=>{let d;const h=[],f=[];for(;(d=l.exec(u))!==null&&!(d&&d.length<4);){let{index:g,"1":p,"2":v,"3":b}=d;const _=p+v+b;g+=d[0].length-_.length;const w=[g,g+p.length],x=[g+p.length+v.length,g+p.length+v.length+b.length];h.push(w),h.push(x),f.push([g+p.length,g+p.length+v.length])}return{remove:h,format:f}}),s.model.document.on("change:data",(u,d)=>{if(d.isUndo||!d.isLocal||!o.isEnabled)return;const h=s.model,f=h.document.selection;if(!f.isCollapsed)return;const g=Array.from(h.document.differ.getChanges()),p=g[0];if(g.length!=1||p.type!=="insert"||p.name!="$text"||p.length!=1)return;const v=f.focus,b=v.parent,{text:_,range:w}=getTextAfterCode(h.createRange(h.createPositionAt(b,0),v),h),x=c(_),S=testOutputToRanges(w.start,x.format,h),C=testOutputToRanges(w.start,x.remove,h);S.length&&C.length&&h.enqueueChange(T=>{if(a(T,S)!==!1){for(const A of C.reverse())T.remove(A);h.enqueueChange(()=>{s.plugins.get("Delete").requestUndoOnBackspace()})}})})}function testOutputToRanges(s,o,n){return o.filter(a=>a[0]!==void 0&&a[1]!==void 0).map(a=>n.createRange(s.getShiftedBy(a[0]),s.getShiftedBy(a[1])))}function getTextAfterCode(s,o){let n=s.start;return{text:Array.from(s.getItems()).reduce((l,c)=>!(c.is("$text")||c.is("$textProxy"))||c.getAttribute("code")?(n=o.createPositionAfter(c),""):l+c.data,""),range:o.createRange(n,s.end)}}class Autoformat extends Plugin{static get requires(){return[Delete]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const o=this.editor,n=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const o=this.editor.commands;o.get("bulletedList")&&blockAutoformatEditing(this.editor,this,/^[*-]\s$/,"bulletedList"),o.get("numberedList")&&blockAutoformatEditing(this.editor,this,/^1[.|)]\s$/,"numberedList"),o.get("todoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?\]\s$/,"todoList"),o.get("checkTodoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const o=this.editor.commands;if(o.get("bold")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"bold");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,n),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,n)}if(o.get("italic")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"italic");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,n),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,n)}if(o.get("code")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"code");inlineAutoformatEditing(this.editor,this,/(`)([^`]+)(`)$/g,n)}if(o.get("strikethrough")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"strikethrough");inlineAutoformatEditing(this.editor,this,/(~~)([^~]+)(~~)$/g,n)}}_addHeadingAutoformats(){const o=this.editor.commands.get("heading");o&&o.modelElements.filter(n=>n.match(/^heading[1-6]$/)).forEach(n=>{const a=n[7],l=new RegExp(`^(#{${a}})\\s$`);blockAutoformatEditing(this.editor,this,l,()=>{if(!o.isEnabled||o.value===n)return!1;this.editor.execute("heading",{value:n})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&blockAutoformatEditing(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const o=this.editor,n=o.model.document.selection;o.commands.get("codeBlock")&&blockAutoformatEditing(o,this,/^```$/,()=>{if(n.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&blockAutoformatEditing(this.editor,this,/^---$/,"horizontalLine")}}function getCallbackFunctionForInlineAutoformat(s,o){return(n,a)=>{if(!s.commands.get(o).isEnabled)return!1;const c=s.model.schema.getValidRanges(a,o);for(const u of c)n.setAttribute(o,!0,u);n.removeSelectionAttribute(o)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Autosave extends Plugin{constructor(n){super(n);E(this,"adapter");E(this,"_debouncedSave");E(this,"_lastDocumentVersion");E(this,"_savePromise");E(this,"_domEmitter");E(this,"_config");E(this,"_pendingActions");E(this,"_makeImmediateSave");E(this,"_action",null);const a=n.config.get("autosave")||{},l=a.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=debounce$1(this._save.bind(this),l),this._lastDocumentVersion=n.model.document.version,this._savePromise=null,this._domEmitter=new(DomEmitterMixin()),this._config=a,this._pendingActions=n.plugins.get(PendingActions),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){const n=this.editor,a=n.model.document;this.listenTo(n,"ready",()=>{this.listenTo(a,"change:data",(l,c)=>{this._saveCallbacks.length&&c.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(n,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(l,c)=>{this._pendingActions.hasAny&&(c.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(n=>n(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(n=>{throw this.state="error",this.state="saving",this._debouncedSave(),n}),this._savePromise)}_setPendingAction(){const n=this.editor.t;this._action||(this._action=this._pendingActions.add(n("Saving changes")))}get _saveCallbacks(){const n=[];return this.adapter&&this.adapter.save&&n.push(this.adapter.save),this._config.save&&n.push(this._config.save),n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AttributeCommand extends Command{constructor(n,a){super(n);E(this,"attributeKey");this.attributeKey=a}refresh(){const n=this.editor.model,a=n.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=n.schema.checkAttributeInSelection(a.selection,this.attributeKey)}execute(n={}){const a=this.editor.model,c=a.document.selection,u=n.forceValue===void 0?!this.value:n.forceValue;a.change(d=>{if(c.isCollapsed)u?d.setSelectionAttribute(this.attributeKey,!0):d.removeSelectionAttribute(this.attributeKey);else{const h=a.schema.getValidRanges(c.getRanges(),this.attributeKey);for(const f of h)u?d.setAttribute(this.attributeKey,u,f):d.removeAttribute(this.attributeKey,f)}})}_getValueFromFirstAllowedNode(){const n=this.editor.model,a=n.schema,l=n.document.selection;if(l.isCollapsed)return l.hasAttribute(this.attributeKey);for(const c of l.getRanges())for(const u of c.getItems())if(a.checkAttribute(u,this.attributeKey))return u.hasAttribute(this.attributeKey);return!1}}const BOLD$1="bold";class BoldEditing extends Plugin{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=this.editor.t;o.model.schema.extend("$text",{allowAttributes:BOLD$1}),o.model.schema.setAttributeProperties(BOLD$1,{isFormatting:!0,copyOnEnter:!0}),o.conversion.attributeToElement({model:BOLD$1,view:"strong",upcastAlso:["b",a=>{const l=a.getStyle("font-weight");return l&&(l=="bold"||Number(l)>=600)?{name:!0,styles:["font-weight"]}:null}]}),o.commands.add(BOLD$1,new AttributeCommand(o,BOLD$1)),o.keystrokes.set("CTRL+B",BOLD$1),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Bold text"),keystroke:"CTRL+B"}]})}}function getButtonCreator({editor:s,commandName:o,plugin:n,icon:a,label:l,keystroke:c}){return u=>{const d=s.commands.get(o),h=new u(s.locale);return h.set({label:l,icon:a,keystroke:c,isToggleable:!0}),h.bind("isEnabled").to(d,"isEnabled"),h.bind("isOn").to(d,"value"),h instanceof MenuBarMenuListItemButtonView?h.set({role:"menuitemcheckbox"}):h.set({tooltip:!0}),n.listenTo(h,"execute",()=>{s.execute(o),s.editing.view.focus()}),h}}const BOLD="bold";class BoldUI extends Plugin{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:BOLD,plugin:this,icon:icons.bold,label:n("Bold"),keystroke:"CTRL+B"});o.ui.componentFactory.add(BOLD,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+BOLD,()=>a(MenuBarMenuListItemButtonView))}}class Bold extends Plugin{static get requires(){return[BoldEditing,BoldUI]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const CODE$1="code",HIGHLIGHT_CLASS$2="ck-code_selected";class CodeEditing extends Plugin{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement]}init(){const o=this.editor,n=this.editor.t;o.model.schema.extend("$text",{allowAttributes:CODE$1}),o.model.schema.setAttributeProperties(CODE$1,{isFormatting:!0,copyOnEnter:!1}),o.conversion.attributeToElement({model:CODE$1,view:"code"}),o.commands.add(CODE$1,new AttributeCommand(o,CODE$1)),o.plugins.get(TwoStepCaretMovement).registerAttribute(CODE$1),inlineHighlight(o,CODE$1,"code",HIGHLIGHT_CLASS$2),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}var codeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';const CODE="code";class CodeUI extends Plugin{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:CODE,plugin:this,icon:codeIcon,label:n("Code")});o.ui.componentFactory.add(CODE,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+CODE,()=>a(MenuBarMenuListItemButtonView))}}class Code extends Plugin{static get requires(){return[CodeEditing,CodeUI]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const ITALIC$1="italic";class ItalicEditing extends Plugin{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=this.editor.t;o.model.schema.extend("$text",{allowAttributes:ITALIC$1}),o.model.schema.setAttributeProperties(ITALIC$1,{isFormatting:!0,copyOnEnter:!0}),o.conversion.attributeToElement({model:ITALIC$1,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),o.commands.add(ITALIC$1,new AttributeCommand(o,ITALIC$1)),o.keystrokes.set("CTRL+I",ITALIC$1),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Italic text"),keystroke:"CTRL+I"}]})}}var italicIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const ITALIC="italic";class ItalicUI extends Plugin{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:ITALIC,plugin:this,icon:italicIcon,keystroke:"CTRL+I",label:n("Italic")});o.ui.componentFactory.add(ITALIC,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+ITALIC,()=>a(MenuBarMenuListItemButtonView))}}class Italic extends Plugin{static get requires(){return[ItalicEditing,ItalicUI]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const STRIKETHROUGH$1="strikethrough";class StrikethroughEditing extends Plugin{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=this.editor.t;o.model.schema.extend("$text",{allowAttributes:STRIKETHROUGH$1}),o.model.schema.setAttributeProperties(STRIKETHROUGH$1,{isFormatting:!0,copyOnEnter:!0}),o.conversion.attributeToElement({model:STRIKETHROUGH$1,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),o.commands.add(STRIKETHROUGH$1,new AttributeCommand(o,STRIKETHROUGH$1)),o.keystrokes.set("CTRL+SHIFT+X","strikethrough"),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}var strikethroughIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';const STRIKETHROUGH="strikethrough";class StrikethroughUI extends Plugin{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:STRIKETHROUGH,plugin:this,icon:strikethroughIcon,keystroke:"CTRL+SHIFT+X",label:n("Strikethrough")});o.ui.componentFactory.add(STRIKETHROUGH,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+STRIKETHROUGH,()=>a(MenuBarMenuListItemButtonView))}}class Strikethrough extends Plugin{static get requires(){return[StrikethroughEditing,StrikethroughUI]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const SUBSCRIPT$1="subscript";class SubscriptEditing extends Plugin{static get pluginName(){return"SubscriptEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.model.schema.extend("$text",{allowAttributes:SUBSCRIPT$1}),o.model.schema.setAttributeProperties(SUBSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),o.conversion.attributeToElement({model:SUBSCRIPT$1,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),o.commands.add(SUBSCRIPT$1,new AttributeCommand(o,SUBSCRIPT$1))}}var subscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';const SUBSCRIPT="subscript";class SubscriptUI extends Plugin{static get pluginName(){return"SubscriptUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:SUBSCRIPT,plugin:this,icon:subscriptIcon,label:n("Subscript")});o.ui.componentFactory.add(SUBSCRIPT,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+SUBSCRIPT,()=>a(MenuBarMenuListItemButtonView))}}class Subscript extends Plugin{static get requires(){return[SubscriptEditing,SubscriptUI]}static get pluginName(){return"Subscript"}static get isOfficialPlugin(){return!0}}const SUPERSCRIPT$1="superscript";class SuperscriptEditing extends Plugin{static get pluginName(){return"SuperscriptEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.model.schema.extend("$text",{allowAttributes:SUPERSCRIPT$1}),o.model.schema.setAttributeProperties(SUPERSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),o.conversion.attributeToElement({model:SUPERSCRIPT$1,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),o.commands.add(SUPERSCRIPT$1,new AttributeCommand(o,SUPERSCRIPT$1))}}var superscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';const SUPERSCRIPT="superscript";class SuperscriptUI extends Plugin{static get pluginName(){return"SuperscriptUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:SUPERSCRIPT,plugin:this,icon:superscriptIcon,label:n("Superscript")});o.ui.componentFactory.add(SUPERSCRIPT,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+SUPERSCRIPT,()=>a(MenuBarMenuListItemButtonView))}}class Superscript extends Plugin{static get requires(){return[SuperscriptEditing,SuperscriptUI]}static get pluginName(){return"Superscript"}static get isOfficialPlugin(){return!0}}const UNDERLINE$1="underline";class UnderlineEditing extends Plugin{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=this.editor.t;o.model.schema.extend("$text",{allowAttributes:UNDERLINE$1}),o.model.schema.setAttributeProperties(UNDERLINE$1,{isFormatting:!0,copyOnEnter:!0}),o.conversion.attributeToElement({model:UNDERLINE$1,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),o.commands.add(UNDERLINE$1,new AttributeCommand(o,UNDERLINE$1)),o.keystrokes.set("CTRL+U","underline"),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Underline text"),keystroke:"CTRL+U"}]})}}var underlineIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const UNDERLINE="underline";class UnderlineUI extends Plugin{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=getButtonCreator({editor:o,commandName:UNDERLINE,plugin:this,icon:underlineIcon,label:n("Underline"),keystroke:"CTRL+U"});o.ui.componentFactory.add(UNDERLINE,()=>a(ButtonView)),o.ui.componentFactory.add("menuBar:"+UNDERLINE,()=>a(MenuBarMenuListItemButtonView))}}class Underline extends Plugin{static get requires(){return[UnderlineEditing,UnderlineUI]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*getCopyOnEnterAttributes(s,o){for(const n of o)n&&s.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class EnterCommand extends Command{execute(){this.editor.model.change(o=>{this.enterBlock(o),this.fire("afterExecute",{writer:o})})}enterBlock(o){const n=this.editor.model,a=n.document.selection,l=n.schema,c=a.isCollapsed,u=a.getFirstRange(),d=u.start.parent,h=u.end.parent;if(l.isLimit(d)||l.isLimit(h))return!c&&d==h&&n.deleteContent(a),!1;if(c){const f=getCopyOnEnterAttributes(o.model.schema,a.getAttributes());return splitBlock(o,u.start),o.setSelectionAttribute(f),!0}else{const f=!(u.start.isAtStart&&u.end.isAtEnd),g=d==h;if(n.deleteContent(a,{leaveUnmerged:f}),f){if(g)return splitBlock(o,a.focus),!0;o.setSelection(h,0)}}return!1}}function splitBlock(s,o){s.split(o),s.setSelection(o.parent.nextSibling,0)}const ENTER_EVENT_TYPES={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class EnterObserver extends Observer{constructor(o){super(o);const n=this.document;let a=!1;n.on("keydown",(l,c)=>{a=c.shiftKey}),n.on("beforeinput",(l,c)=>{if(!this.isEnabled)return;let u=c.inputType;env$1.isSafari&&a&&u=="insertParagraph"&&(u="insertLineBreak");const d=c.domEvent,h=ENTER_EVENT_TYPES[u];if(!h)return;const f=new BubblingEventInfo(n,"enter",c.targetRanges[0]);n.fire(f,new DomEventData(o,d,{isSoft:h.isSoft})),f.stop.called&&l.stop()})}observe(){}stopObserving(){}}class Enter extends Plugin{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.editing.view,a=n.document,l=this.editor.t;n.addObserver(EnterObserver),o.commands.add("enter",new EnterCommand(o)),this.listenTo(a,"enter",(c,u)=>{a.isComposing||u.preventDefault(),!u.isSoft&&(o.execute("enter"),n.scrollToTheSelection())},{priority:"low"}),o.accessibility.addKeystrokeInfos({keystrokes:[{label:l("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class ShiftEnterCommand extends Command{execute(){const o=this.editor.model,n=o.document;o.change(a=>{softBreakAction(o,a,n.selection),this.fire("afterExecute",{writer:a})})}refresh(){const o=this.editor.model,n=o.document;this.isEnabled=isEnabled(o.schema,n.selection)}}function isEnabled(s,o){if(o.rangeCount>1)return!1;const n=o.anchor;if(!n||!s.checkChild(n,"softBreak"))return!1;const a=o.getFirstRange(),l=a.start.parent,c=a.end.parent;return!((isInsideLimitElement(l,s)||isInsideLimitElement(c,s))&&l!==c)}function softBreakAction(s,o,n){const a=n.isCollapsed,l=n.getFirstRange(),c=l.start.parent,u=l.end.parent,d=c==u;if(a){const h=getCopyOnEnterAttributes(s.schema,n.getAttributes());insertBreak(s,o,l.end),o.removeSelectionAttribute(n.getAttributeKeys()),o.setSelectionAttribute(h)}else{const h=!(l.start.isAtStart&&l.end.isAtEnd);s.deleteContent(n,{leaveUnmerged:h}),d?insertBreak(s,o,n.focus):h&&o.setSelection(u,0)}}function insertBreak(s,o,n){const a=o.createElement("softBreak");s.insertContent(a,n),o.setSelection(a,"after")}function isInsideLimitElement(s,o){return s.is("rootElement")?!1:o.isLimit(s)||isInsideLimitElement(s.parent,o)}class ShiftEnter extends Plugin{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.model.schema,a=o.conversion,l=o.editing.view,c=l.document,u=this.editor.t;n.register("softBreak",{allowWhere:"$text",isInline:!0}),a.for("upcast").elementToElement({model:"softBreak",view:"br"}),a.for("downcast").elementToElement({model:"softBreak",view:(d,{writer:h})=>h.createEmptyElement("br")}),l.addObserver(EnterObserver),o.commands.add("shiftEnter",new ShiftEnterCommand(o)),this.listenTo(c,"enter",(d,h)=>{c.isComposing||h.preventDefault(),h.isSoft&&(o.execute("shiftEnter"),l.scrollToTheSelection())},{priority:"low"}),o.accessibility.addKeystrokeInfos({keystrokes:[{label:u("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BlockQuoteCommand extends Command{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(o={}){const n=this.editor.model,a=n.schema,l=n.document.selection,c=Array.from(l.getSelectedBlocks()),u=o.forceValue===void 0?!this.value:o.forceValue;n.change(d=>{if(!u)this._removeQuote(d,c.filter(findQuote));else{const h=c.filter(f=>findQuote(f)||checkCanBeQuoted(a,f));this._applyQuote(d,h)}})}_getValue(){const o=this.editor.model.document.selection,n=first(o.getSelectedBlocks());return!!(n&&findQuote(n))}_checkEnabled(){if(this.value)return!0;const o=this.editor.model.document.selection,n=this.editor.model.schema,a=first(o.getSelectedBlocks());return a?checkCanBeQuoted(n,a):!1}_removeQuote(o,n){getRangesOfBlockGroups(o,n).reverse().forEach(a=>{if(a.start.isAtStart&&a.end.isAtEnd){o.unwrap(a.start.parent);return}if(a.start.isAtStart){const c=o.createPositionBefore(a.start.parent);o.move(a,c);return}a.end.isAtEnd||o.split(a.end);const l=o.createPositionAfter(a.end.parent);o.move(a,l)})}_applyQuote(o,n){const a=[];getRangesOfBlockGroups(o,n).reverse().forEach(l=>{let c=findQuote(l.start);c||(c=o.createElement("blockQuote"),o.wrap(l,c)),a.push(c)}),a.reverse().reduce((l,c)=>l.nextSibling==c?(o.merge(o.createPositionAfter(l)),l):c)}}function findQuote(s){return s.parent.name=="blockQuote"?s.parent:null}function getRangesOfBlockGroups(s,o){let n,a=0;const l=[];for(;a<o.length;){const c=o[a],u=o[a+1];n||(n=s.createPositionBefore(c)),(!u||c.nextSibling!=u)&&(l.push(s.createRange(n,s.createPositionAfter(c))),n=null),a++}return l}function checkCanBeQuoted(s,o){const n=s.checkChild(o.parent,"blockQuote"),a=s.checkChild(["$root","blockQuote"],o);return n&&a}class BlockQuoteEditing extends Plugin{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const o=this.editor,n=o.model.schema;o.commands.add("blockQuote",new BlockQuoteCommand(o)),n.register("blockQuote",{inheritAllFrom:"$container"}),o.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),o.model.document.registerPostFixer(u=>{const d=o.model.document.differ.getChanges();for(const h of d)if(h.type=="insert"){const f=h.position.nodeAfter;if(!f)continue;if(f.is("element","blockQuote")&&f.isEmpty)return u.remove(f),!0;if(f.is("element","blockQuote")&&!n.checkChild(h.position,f))return u.unwrap(f),!0;if(f.is("element")){const g=u.createRangeIn(f);for(const p of g.getItems())if(p.is("element","blockQuote")&&!n.checkChild(u.createPositionBefore(p),p))return u.unwrap(p),!0}}else if(h.type=="remove"){const f=h.position.parent;if(f.is("element","blockQuote")&&f.isEmpty)return u.remove(f),!0}return!1});const a=this.editor.editing.view.document,l=o.model.document.selection,c=o.commands.get("blockQuote");this.listenTo(a,"enter",(u,d)=>{if(!l.isCollapsed||!c.value)return;l.getLastPosition().parent.isEmpty&&(o.execute("blockQuote"),o.editing.view.scrollToTheSelection(),d.preventDefault(),u.stop())},{context:"blockquote"}),this.listenTo(a,"delete",(u,d)=>{if(d.direction!="backward"||!l.isCollapsed||!c.value)return;const h=l.getLastPosition().parent;h.isEmpty&&!h.previousSibling&&(o.execute("blockQuote"),o.editing.view.scrollToTheSelection(),d.preventDefault(),u.stop())},{context:"blockquote"})}}class BlockQuoteUI extends Plugin{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add("blockQuote",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),o.ui.componentFactory.add("menuBar:blockQuote",()=>{const n=this._createButton(MenuBarMenuListItemButtonView);return n.set({role:"menuitemcheckbox"}),n})}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get("blockQuote"),c=new o(n.locale),u=a.t;return c.set({label:u("Block quote"),icon:icons.quote,isToggleable:!0}),c.bind("isEnabled").to(l,"isEnabled"),c.bind("isOn").to(l,"value"),this.listenTo(c,"execute",()=>{n.execute("blockQuote"),n.editing.view.focus()}),c}}class BlockQuote extends Plugin{static get requires(){return[BlockQuoteEditing,BlockQuoteUI]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightStack extends EmitterMixin(){constructor(){super(...arguments);E(this,"_stack",[])}add(n,a){const l=this._stack,c=l[0];this._insertDescriptor(n);const u=l[0];c!==u&&!compareDescriptors(c,u)&&this.fire("change:top",{oldDescriptor:c,newDescriptor:u,writer:a})}remove(n,a){const l=this._stack,c=l[0];this._removeDescriptor(n);const u=l[0];c!==u&&!compareDescriptors(c,u)&&this.fire("change:top",{oldDescriptor:c,newDescriptor:u,writer:a})}_insertDescriptor(n){const a=this._stack,l=a.findIndex(u=>u.id===n.id);if(compareDescriptors(n,a[l]))return;l>-1&&a.splice(l,1);let c=0;for(;a[c]&&shouldABeBeforeB(a[c],n);)c++;a.splice(c,0,n)}_removeDescriptor(n){const a=this._stack,l=a.findIndex(c=>c.id===n);l>-1&&a.splice(l,1)}}function compareDescriptors(s,o){return s&&o&&s.priority==o.priority&&classesToString(s.classes)==classesToString(o.classes)}function shouldABeBeforeB(s,o){return s.priority>o.priority?!0:s.priority<o.priority?!1:classesToString(s.classes)>classesToString(o.classes)}function classesToString(s){return Array.isArray(s)?s.sort().join(","):s}var dragHandleIcon='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const WIDGET_CLASS_NAME="ck-widget",WIDGET_SELECTED_CLASS_NAME="ck-widget_selected";function isWidget(s){return s.is("element")?!!s.getCustomProperty("widget"):!1}function toWidget(s,o,n={}){if(!s.is("containerElement"))throw new CKEditorError("widget-to-widget-wrong-element-type",null,{element:s});return o.setAttribute("contenteditable","false",s),o.addClass(WIDGET_CLASS_NAME,s),o.setCustomProperty("widget",!0,s),s.getFillerOffset=getFillerOffset,o.setCustomProperty("widgetLabel",[],s),n.label&&setLabel(s,n.label),n.hasSelectionHandle&&addSelectionHandle(s,o),setHighlightHandling(s,o),s}function addHighlight(s,o,n){if(o.classes&&n.addClass(toArray$2(o.classes),s),o.attributes)for(const a in o.attributes)n.setAttribute(a,o.attributes[a],s)}function removeHighlight(s,o,n){if(o.classes&&n.removeClass(toArray$2(o.classes),s),o.attributes)for(const a in o.attributes)n.removeAttribute(a,s)}function setHighlightHandling(s,o,n=addHighlight,a=removeHighlight){const l=new HighlightStack;l.on("change:top",(d,h)=>{h.oldDescriptor&&a(s,h.oldDescriptor,h.writer),h.newDescriptor&&n(s,h.newDescriptor,h.writer)});const c=(d,h,f)=>l.add(h,f),u=(d,h,f)=>l.remove(h,f);o.setCustomProperty("addHighlight",c,s),o.setCustomProperty("removeHighlight",u,s)}function setLabel(s,o){s.getCustomProperty("widgetLabel").push(o)}function getLabel(s){return s.getCustomProperty("widgetLabel").reduce((n,a)=>typeof a=="function"?n?n+". "+a():a():n?n+". "+a:a,"")}function toWidgetEditable(s,o,n={}){return o.addClass(["ck-editor__editable","ck-editor__nested-editable"],s),o.setAttribute("role","textbox",s),o.setAttribute("tabindex","-1",s),n.label&&o.setAttribute("aria-label",n.label,s),o.setAttribute("contenteditable",s.isReadOnly?"false":"true",s),s.on("change:isReadOnly",(a,l,c)=>{o.setAttribute("contenteditable",c?"false":"true",s)}),s.on("change:isFocused",(a,l,c)=>{c?o.addClass("ck-editor__nested-editable_focused",s):o.removeClass("ck-editor__nested-editable_focused",s)}),setHighlightHandling(s,o),s}function findOptimalInsertionRange(s,o){const n=s.getSelectedElement();if(n){const a=getTypeAroundFakeCaretPosition(s);if(a)return o.createRange(o.createPositionAt(n,a))}return o.schema.findOptimalInsertionRange(s)}function getFillerOffset(){return null}function addSelectionHandle(s,o){const n=o.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(a){const l=this.toDomElement(a),c=new IconView;return c.set("content",dragHandleIcon),c.render(),l.appendChild(c.element),l});o.insert(o.createPositionAt(s,0),n),o.addClass(["ck-widget_with-selection-handle"],s)}function calculateResizeHostAncestorWidth(s){const o=d=>{const{width:h,paddingLeft:f,paddingRight:g}=d.ownerDocument.defaultView.getComputedStyle(d);return parseFloat(h)-(parseFloat(f)||0)-(parseFloat(g)||0)},n=s.parentElement;if(!n)return 0;let a=o(n);const l=5;let c=0,u=n;for(;isNaN(a);){if(u=u.parentElement,++c>l)return 0;a=o(u)}return a}function calculateResizeHostPercentageWidth(s,o=new Rect$3(s)){const n=calculateResizeHostAncestorWidth(s);return n?o.width/n*100:0}const TYPE_AROUND_SELECTION_ATTRIBUTE="widget-type-around";function isTypeAroundWidget(s,o,n){return!!s&&isWidget(s)&&!n.isInline(o)}function getClosestTypeAroundDomButton(s){return s.closest(".ck-widget__type-around__button")}function getTypeAroundButtonPosition(s){return s.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function getClosestWidgetViewElement(s,o){const n=s.closest(".ck-widget");return o.mapDomToView(n)}function getTypeAroundFakeCaretPosition(s){return s.getAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)}var returnIcon='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const POSSIBLE_INSERTION_POSITIONS=["before","after"],RETURN_ARROW_ICON_ELEMENT=new DOMParser().parseFromString(returnIcon,"image/svg+xml").firstChild,PLUGIN_DISABLED_EDITING_ROOT_CLASS="ck-widget__type-around_disabled";class WidgetTypeAround extends Plugin{constructor(){super(...arguments);E(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const n=this.editor,a=n.editing.view;this.on("change:isEnabled",(l,c,u)=>{a.change(d=>{for(const h of a.document.roots)u?d.removeClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,h):d.addClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,h)}),u||n.model.change(d=>{d.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(n,a){const l=this.editor,c=l.editing.view,u=l.model.schema.getAttributesWithProperty(n,"copyOnReplace",!0);l.execute("insertParagraph",{position:l.model.createPositionAt(n,a),attributes:u}),c.focus(),c.scrollToTheSelection()}_listenToIfEnabled(n,a,l,c){this.listenTo(n,a,(...u)=>{this.isEnabled&&l(...u)},c)}_insertParagraphAccordingToFakeCaretPosition(){const l=this.editor.model.document.selection,c=getTypeAroundFakeCaretPosition(l);if(!c)return!1;const u=l.getSelectedElement();return this._insertParagraph(u,c),!0}_enableTypeAroundUIInjection(){const n=this.editor,a=n.model.schema,l=n.locale.t,c={before:l("Insert paragraph before block"),after:l("Insert paragraph after block")};n.editing.downcastDispatcher.on("insert",(u,d,h)=>{const f=h.mapper.toViewElement(d.item);f&&isTypeAroundWidget(f,d.item,a)&&(injectUIIntoWidget(h.writer,c,f),f.getCustomProperty("widgetLabel").push(()=>this.isEnabled?l("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const n=this.editor,a=n.model,l=a.document.selection,c=a.schema,u=n.editing.view;this._listenToIfEnabled(u.document,"arrowKey",(h,f)=>{this._handleArrowKeyPress(h,f)},{context:[isWidget,"$text"],priority:"high"}),this._listenToIfEnabled(l,"change:range",(h,f)=>{f.directChange&&n.model.change(g=>{g.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(a.document,"change:data",()=>{const h=l.getSelectedElement();if(h){const f=n.editing.mapper.toViewElement(h);if(isTypeAroundWidget(f,h,c))return}n.model.change(f=>{f.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(n.editing.downcastDispatcher,"selection",(h,f,g)=>{const p=g.writer;if(this._currentFakeCaretModelElement){const w=g.mapper.toViewElement(this._currentFakeCaretModelElement);w&&(p.removeClass(POSSIBLE_INSERTION_POSITIONS.map(d),w),this._currentFakeCaretModelElement=null)}const v=f.selection.getSelectedElement();if(!v)return;const b=g.mapper.toViewElement(v);if(!isTypeAroundWidget(b,v,c))return;const _=getTypeAroundFakeCaretPosition(f.selection);_&&(p.addClass(d(_),b),this._currentFakeCaretModelElement=v)}),this._listenToIfEnabled(n.ui.focusTracker,"change:isFocused",(h,f,g)=>{g||n.model.change(p=>{p.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})});function d(h){return`ck-widget_type-around_show-fake-caret_${h}`}}_handleArrowKeyPress(n,a){const l=this.editor,c=l.model,u=c.document.selection,d=c.schema,h=l.editing.view,f=a.keyCode,g=isForwardArrowKeyCode(f,l.locale.contentLanguageDirection),p=h.document.selection.getSelectedElement(),v=l.editing.mapper.toModelElement(p);let b;isTypeAroundWidget(p,v,d)?b=this._handleArrowKeyPressOnSelectedWidget(g):u.isCollapsed?b=this._handleArrowKeyPressWhenSelectionNextToAWidget(g):a.shiftKey||(b=this._handleArrowKeyPressWhenNonCollapsedSelection(g)),b&&(a.preventDefault(),n.stop())}_handleArrowKeyPressOnSelectedWidget(n){const l=this.editor.model,c=l.document.selection,u=getTypeAroundFakeCaretPosition(c);return l.change(d=>{if(u){if(!(u===(n?"after":"before")))return d.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE),!0}else return d.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,n?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(n){const a=this.editor,l=a.model,c=l.schema,u=a.plugins.get("Widget"),d=u._getObjectElementNextToSelection(n),h=a.editing.mapper.toViewElement(d);return isTypeAroundWidget(h,d,c)?(l.change(f=>{u._setSelectionOverElement(d),f.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,n?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(n){const a=this.editor,l=a.model,c=l.schema,u=a.editing.mapper,d=l.document.selection,h=n?d.getLastPosition().nodeBefore:d.getFirstPosition().nodeAfter,f=u.toViewElement(h);return isTypeAroundWidget(f,h,c)?(l.change(g=>{g.setSelection(h,"on"),g.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,n?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const n=this.editor,a=n.editing.view;this._listenToIfEnabled(a.document,"mousedown",(l,c)=>{const u=getClosestTypeAroundDomButton(c.domTarget);if(!u)return;const d=getTypeAroundButtonPosition(u),h=getClosestWidgetViewElement(u,a.domConverter),f=n.editing.mapper.toModelElement(h);this._insertParagraph(f,d),c.preventDefault(),l.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const n=this.editor,a=n.model.document.selection,l=n.editing.view;this._listenToIfEnabled(l.document,"enter",(c,u)=>{if(c.eventPhase!="atTarget")return;const d=a.getSelectedElement(),h=n.editing.mapper.toViewElement(d),f=n.model.schema;let g;this._insertParagraphAccordingToFakeCaretPosition()?g=!0:isTypeAroundWidget(h,d,f)&&(this._insertParagraph(d,u.isSoft?"before":"after"),g=!0),g&&(u.preventDefault(),c.stop())},{context:isWidget})}_enableInsertingParagraphsOnTypingKeystroke(){const a=this.editor.editing.view.document;this._listenToIfEnabled(a,"insertText",(l,c)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(c.selection=a.selection)},{priority:"high"}),env$1.isAndroid?this._listenToIfEnabled(a,"keydown",(l,c)=>{c.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(a,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const n=this.editor,a=n.editing.view,l=n.model,c=l.schema;this._listenToIfEnabled(a.document,"delete",(u,d)=>{if(u.eventPhase!="atTarget")return;const h=getTypeAroundFakeCaretPosition(l.document.selection);if(!h)return;const f=d.direction,g=l.document.selection.getSelectedElement(),p=h==="before",v=f=="forward";if(p===v)n.execute("delete",{selection:l.createSelection(g,"on")});else{const _=c.getNearestSelectionRange(l.createPositionAt(g,h),f);if(_)if(!_.isCollapsed)l.change(w=>{w.setSelection(_),n.execute(v?"deleteForward":"delete")});else{const w=l.createSelection(_.start);if(l.modifySelection(w,{direction:f}),!w.focus.isEqual(_.start))l.change(x=>{x.setSelection(_),n.execute(v?"deleteForward":"delete")});else{const x=getDeepestEmptyElementAncestor(c,_.start.parent);l.deleteContent(l.createSelection(x,"on"),{doNotAutoparagraph:!0})}}}d.preventDefault(),u.stop()},{context:isWidget})}_enableInsertContentIntegration(){const n=this.editor,a=this.editor.model,l=a.document.selection;this._listenToIfEnabled(n.model,"insertContent",(c,[u,d])=>{if(d&&!d.is("documentSelection"))return;const h=getTypeAroundFakeCaretPosition(l);if(h)return c.stop(),a.change(f=>{const g=l.getSelectedElement(),p=a.createPositionAt(g,h),v=f.createSelection(p),b=a.insertContent(u,v);return f.setSelection(v),b})},{priority:"high"})}_enableInsertObjectIntegration(){const n=this.editor,l=this.editor.model.document.selection;this._listenToIfEnabled(n.model,"insertObject",(c,u)=>{const[,d,h={}]=u;if(d&&!d.is("documentSelection"))return;const f=getTypeAroundFakeCaretPosition(l);f&&(h.findOptimalPosition=f,u[3]=h)},{priority:"high"})}_enableDeleteContentIntegration(){const n=this.editor,l=this.editor.model.document.selection;this._listenToIfEnabled(n.model,"deleteContent",(c,[u])=>{if(u&&!u.is("documentSelection"))return;getTypeAroundFakeCaretPosition(l)&&c.stop()},{priority:"high"})}}function injectUIIntoWidget(s,o,n){const a=s.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(l){const c=this.toDomElement(l);return injectButtons(c,o),injectFakeCaret(c),c});s.insert(s.createPositionAt(n,"end"),a)}function injectButtons(s,o){for(const n of POSSIBLE_INSERTION_POSITIONS){const a=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:o[n],"aria-hidden":"true"},children:[s.ownerDocument.importNode(RETURN_ARROW_ICON_ELEMENT,!0)]});s.appendChild(a.render())}}function injectFakeCaret(s){const o=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});s.appendChild(o.render())}function getDeepestEmptyElementAncestor(s,o){let n=o;for(const a of o.getAncestors({parentFirst:!0})){if(a.childCount>1||s.isLimit(a))break;n=a}return n}function verticalNavigationHandler(s){const o=s.model;return(n,a)=>{const l=a.keyCode==keyCodes.arrowup,c=a.keyCode==keyCodes.arrowdown,u=a.shiftKey,d=o.document.selection;if(!l&&!c)return;const h=c;if(u&&selectionWillShrink(d,h))return;const f=findTextRangeFromSelection(s,d,h);if(f){if(f.isCollapsed){if(d.isCollapsed)return;if(u)return}(f.isCollapsed||isSingleLineRange(s,f,h))&&(o.change(g=>{const p=h?f.end:f.start;if(u){const v=o.createSelection(d.anchor);v.setFocus(p),g.setSelection(v)}else g.setSelection(p)}),n.stop(),a.preventDefault(),a.stopPropagation())}}}function findTextRangeFromSelection(s,o,n){const a=s.model;if(n){const l=o.isCollapsed?o.focus:o.getLastPosition(),c=getNearestNonInlineLimit(a,l,"forward");if(!c)return null;const u=a.createRange(l,c),d=getNearestTextPosition(a.schema,u,"backward");return d?a.createRange(l,d):null}else{const l=o.isCollapsed?o.focus:o.getFirstPosition(),c=getNearestNonInlineLimit(a,l,"backward");if(!c)return null;const u=a.createRange(c,l),d=getNearestTextPosition(a.schema,u,"forward");return d?a.createRange(d,l):null}}function getNearestNonInlineLimit(s,o,n){const a=s.schema,l=s.createRangeIn(o.root),c=n=="forward"?"elementStart":"elementEnd";for(const{previousPosition:u,item:d,type:h}of l.getWalker({startPosition:o,direction:n})){if(a.isLimit(d)&&!a.isInline(d))return u;if(h==c&&a.isBlock(d))return null}return null}function getNearestTextPosition(s,o,n){const a=n=="backward"?o.end:o.start;if(s.checkChild(a,"$text"))return a;for(const{nextPosition:l}of o.getWalker({direction:n}))if(s.checkChild(l,"$text"))return l;return null}function isSingleLineRange(s,o,n){const a=s.model,l=s.view.domConverter;if(n){const f=a.createSelection(o.start);a.modifySelection(f),!f.focus.isAtEnd&&!o.start.isEqual(f.focus)&&(o=a.createRange(f.focus,o.end))}const c=s.mapper.toViewRange(o),u=l.viewRangeToDom(c),d=Rect$3.getDomRangeRects(u);let h;for(const f of d){if(h===void 0){h=Math.round(f.bottom);continue}if(Math.round(f.top)>=h)return!1;h=Math.max(h,Math.round(f.bottom))}return!0}function selectionWillShrink(s,o){return!s.isCollapsed&&s.isBackward==o}class Widget extends Plugin{constructor(){super(...arguments);E(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[WidgetTypeAround,Delete]}init(){const n=this.editor,a=n.editing.view,l=a.document,c=n.t;this.editor.editing.downcastDispatcher.on("selection",(u,d,h)=>{const f=h.writer,g=d.selection;if(g.isCollapsed)return;const p=g.getSelectedElement();if(!p)return;const v=n.editing.mapper.toViewElement(p);isWidget(v)&&h.consumable.consume(g,"selection")&&f.setSelection(f.createRangeOn(v),{fake:!0,label:getLabel(v)})}),this.editor.editing.downcastDispatcher.on("selection",(u,d,h)=>{this._clearPreviouslySelectedWidgets(h.writer);const f=h.writer,g=f.document.selection;let p=null;for(const v of g.getRanges())for(const b of v){const _=b.item;isWidget(_)&&!isChild(_,p)&&(f.addClass(WIDGET_SELECTED_CLASS_NAME,_),this._previouslySelected.add(_),p=_)}},{priority:"low"}),a.addObserver(MouseObserver),this.listenTo(l,"mousedown",(...u)=>this._onMousedown(...u)),this.listenTo(l,"arrowKey",(...u)=>{this._handleSelectionChangeOnArrowKeyPress(...u)},{context:[isWidget,"$text"]}),this.listenTo(l,"arrowKey",(...u)=>{this._preventDefaultOnArrowKeyPress(...u)},{context:"$root"}),this.listenTo(l,"arrowKey",verticalNavigationHandler(this.editor.editing),{context:"$text"}),this.listenTo(l,"delete",(u,d)=>{this._handleDelete(d.direction=="forward")&&(d.preventDefault(),u.stop())},{context:"$root"}),this.listenTo(l,"tab",(u,d)=>{u.eventPhase=="atTarget"&&(d.shiftKey||this._selectFirstNestedEditable()&&(d.preventDefault(),u.stop()))},{context:isWidget,priority:"low"}),this.listenTo(l,"tab",(u,d)=>{d.shiftKey&&this._selectAncestorWidget()&&(d.preventDefault(),u.stop())},{priority:"low"}),this.listenTo(l,"keydown",(u,d)=>{d.keystroke==keyCodes.esc&&this._selectAncestorWidget()&&(d.preventDefault(),u.stop())},{priority:"low"}),n.accessibility.addKeystrokeInfoGroup({id:"widget",label:c("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:c("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:c("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:c("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:c("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:c("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(n,a){const l=this.editor,c=l.editing.view,u=c.document;let d=a.target;if(!d)return;if(a.domEvent.detail>=3){this._selectBlockContent(d)&&a.preventDefault();return}if(!isWidget(d)){const f=findClosestEditableOrWidgetAncestor(d);if(!f)return;if(isWidget(f))d=f;else{const g=getElementFromMouseEvent(c,a);if(g&&isWidget(g))d=g;else return}}env$1.isAndroid&&a.preventDefault(),u.isFocused||c.focus();const h=l.editing.mapper.toModelElement(d);this._setSelectionOverElement(h)}_selectBlockContent(n){const a=this.editor,l=a.model,c=a.editing.mapper,u=l.schema,d=c.findMappedViewAncestor(this.editor.editing.view.createPositionAt(n,0)),h=findTextBlockAncestor(c.toModelElement(d),l.schema);return h?(l.change(f=>{const g=u.isLimit(h)?null:findNextTextBlock(f.createPositionAfter(h),u),p=f.createPositionAt(h,0),v=g?f.createPositionAt(g,0):f.createPositionAt(h,"end");f.setSelection(f.createRange(p,v))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(n,a){const l=a.keyCode,c=this.editor.model,u=c.schema,d=c.document.selection,h=d.getSelectedElement(),f=getLocalizedArrowKeyCodeDirection(l,this.editor.locale.contentLanguageDirection),g=f=="down"||f=="right",p=f=="up"||f=="down";if(h&&u.isObject(h)){const b=g?d.getLastPosition():d.getFirstPosition(),_=u.getNearestSelectionRange(b,g?"forward":"backward");_&&(c.change(w=>{w.setSelection(_)}),a.preventDefault(),n.stop());return}if(!d.isCollapsed&&!a.shiftKey){const b=d.getFirstPosition(),_=d.getLastPosition(),w=b.nodeAfter,x=_.nodeBefore;(w&&u.isObject(w)||x&&u.isObject(x))&&(c.change(S=>{S.setSelection(g?_:b)}),a.preventDefault(),n.stop());return}if(!d.isCollapsed)return;const v=this._getObjectElementNextToSelection(g);if(v&&u.isObject(v)){if(u.isInline(v)&&p)return;this._setSelectionOverElement(v),a.preventDefault(),n.stop()}}_preventDefaultOnArrowKeyPress(n,a){const l=this.editor.model,c=l.schema,u=l.document.selection.getSelectedElement();u&&c.isObject(u)&&(a.preventDefault(),n.stop())}_handleDelete(n){const l=this.editor.model.document.selection;if(!this.editor.model.canEditAt(l)||!l.isCollapsed)return;const c=this._getObjectElementNextToSelection(n);if(c)return this.editor.model.change(u=>{let d=l.anchor.parent;for(;d.isEmpty;){const h=d;d=h.parent,u.remove(h)}this._setSelectionOverElement(c)}),!0}_setSelectionOverElement(n){this.editor.model.change(a=>{a.setSelection(a.createRangeOn(n))})}_getObjectElementNextToSelection(n){const a=this.editor.model,l=a.schema,c=a.document.selection,u=a.createSelection(c);if(a.modifySelection(u,{direction:n?"forward":"backward"}),u.isEqual(c))return null;const d=n?u.focus.nodeBefore:u.focus.nodeAfter;return d&&l.isObject(d)?d:null}_clearPreviouslySelectedWidgets(n){for(const a of this._previouslySelected)n.removeClass(WIDGET_SELECTED_CLASS_NAME,a);this._previouslySelected.clear()}_selectFirstNestedEditable(){const n=this.editor,l=this.editor.editing.view.document;for(const c of l.selection.getFirstRange().getItems())if(c.is("editableElement")){const u=n.editing.mapper.toModelElement(c);/* istanbul ignore next -- @preserve */if(!u)continue;const d=n.model.createPositionAt(u,0),h=n.model.schema.getNearestSelectionRange(d,"forward");return n.model.change(f=>{f.setSelection(h)}),!0}return!1}_selectAncestorWidget(){const n=this.editor,a=n.editing.mapper,c=n.editing.view.document.selection.getFirstPosition().parent,d=(c.is("$text")?c.parent:c).findAncestor(isWidget);if(!d)return!1;const h=a.toModelElement(d);/* istanbul ignore next -- @preserve */return h?(n.model.change(f=>{f.setSelection(h,"on")}),!0):!1}}function findClosestEditableOrWidgetAncestor(s){let o=s;for(;o;){if(o.is("editableElement")||isWidget(o))return o;o=o.parent}return null}function getElementFromMouseEvent(s,o){const n=getRangeFromMouseEvent(o.domEvent);let a=null;if(n?a=s.domConverter.domRangeToView(n):a=s.createRange(s.createPositionAt(o.target,0)),!a)return null;const l=a.start;if(!l.parent)return null;let c=l.parent;return l.parent.is("editableElement")&&(l.isAtEnd&&l.nodeBefore?c=l.nodeBefore:l.isAtStart&&l.nodeAfter&&(c=l.nodeAfter)),c.is("$text")?c.parent:c}function isChild(s,o){return o?Array.from(s.getAncestors()).includes(o):!1}function findTextBlockAncestor(s,o){for(const n of s.getAncestors({includeSelf:!0,parentFirst:!0})){if(o.checkChild(n,"$text"))return n;if(o.isLimit(n)&&!o.isObject(n))break}return null}function findNextTextBlock(s,o){const n=new TreeWalker({startPosition:s});for(const{item:a}of n){if(o.isLimit(a)||!a.is("element"))return null;if(o.checkChild(a,"$text"))return a}return null}class WidgetToolbarRepository extends Plugin{constructor(){super(...arguments);E(this,"_toolbarDefinitions",new Map);E(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;if(n.plugins.has("BalloonToolbar")){const a=n.plugins.get("BalloonToolbar");this.listenTo(a,"show",l=>{isWidgetSelected(n.editing.view.document.selection)&&l.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(n.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(n.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const n of this._toolbarDefinitions.values())n.view.destroy()}register(n,{ariaLabel:a,items:l,getRelatedElement:c,balloonClassName:u="ck-toolbar-container"}){if(!l.length){logWarning("widget-toolbar-no-items",{toolbarId:n});return}const d=this.editor,h=d.t,f=new ToolbarView(d.locale);if(f.ariaLabel=a||h("Widget toolbar"),this._toolbarDefinitions.has(n))throw new CKEditorError("widget-toolbar-duplicated",this,{toolbarId:n});const g={view:f,getRelatedElement:c,balloonClassName:u,itemsConfig:l,initialized:!1};d.ui.addToolbar(f,{isContextual:!0,beforeFocus:()=>{const p=c(d.editing.view.document.selection);p&&this._showToolbar(g,p)},afterBlur:()=>{this._hideToolbar(g)}}),this._toolbarDefinitions.set(n,g)}_updateToolbarsVisibility(){let n=0,a=null,l=null;for(const c of this._toolbarDefinitions.values()){const u=c.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!u)this._isToolbarInBalloon(c)&&this._hideToolbar(c);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(c)&&this._hideToolbar(c);else{const d=u.getAncestors().length;d>n&&(n=d,a=u,l=c)}}l&&this._showToolbar(l,a)}_hideToolbar(n){this._balloon.remove(n.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(n,a){this._isToolbarVisible(n)?repositionContextualBalloon$2(this.editor,a):this._isToolbarInBalloon(n)||(n.initialized||(n.initialized=!0,n.view.fillFromConfig(n.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:n.view,position:getBalloonPositionData$1(this.editor,a),balloonClassName:n.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const l of this._toolbarDefinitions.values())if(this._isToolbarVisible(l)){const c=l.getRelatedElement(this.editor.editing.view.document.selection);repositionContextualBalloon$2(this.editor,c)}}))}_isToolbarVisible(n){return this._balloon.visibleView===n.view}_isToolbarInBalloon(n){return this._balloon.hasView(n.view)}}function repositionContextualBalloon$2(s,o){const n=s.plugins.get("ContextualBalloon"),a=getBalloonPositionData$1(s,o);n.updatePosition(a)}function getBalloonPositionData$1(s,o){const n=s.editing.view,a=BalloonPanelView.defaultPositions;return{target:n.domConverter.mapViewToDom(o),positions:[a.northArrowSouth,a.northArrowSouthWest,a.northArrowSouthEast,a.southArrowNorth,a.southArrowNorthWest,a.southArrowNorthEast,a.viewportStickyNorth]}}function isWidgetSelected(s){const o=s.getSelectedElement();return!!(o&&isWidget(o))}class ResizeState extends ObservableMixin(){constructor(n){super();E(this,"_referenceCoordinates");E(this,"_options");E(this,"_originalWidth");E(this,"_originalHeight");E(this,"_originalWidthPercents");E(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=n,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(n,a,l){const c=new Rect$3(a);this.activeHandlePosition=getHandlePosition(n),this._referenceCoordinates=getAbsoluteBoundaryPoint(a,getOppositePosition(this.activeHandlePosition)),this._originalWidth=c.width,this._originalHeight=c.height,this._aspectRatio=c.width/c.height;const u=l.style.width;u&&u.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(u):this._originalWidthPercents=calculateResizeHostPercentageWidth(l,c)}update(n){this.proposedWidth=n.width,this.proposedHeight=n.height,this.proposedWidthPercents=n.widthPercents,this.proposedHandleHostWidth=n.handleHostWidth,this.proposedHandleHostHeight=n.handleHostHeight}}function getAbsoluteBoundaryPoint(s,o){const n=new Rect$3(s),a=o.split("-"),l={x:a[1]=="right"?n.right:n.left,y:a[0]=="bottom"?n.bottom:n.top};return l.x+=s.ownerDocument.defaultView.scrollX,l.y+=s.ownerDocument.defaultView.scrollY,l}function getResizerHandleClass(s){return`ck-widget__resizer__handle-${s}`}function getHandlePosition(s){const o=["top-left","top-right","bottom-right","bottom-left"];for(const n of o)if(s.classList.contains(getResizerHandleClass(n)))return n}function getOppositePosition(s){const o=s.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[o[0]]}-${n[o[1]]}`}class SizeView extends View$1{constructor(){super();const o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",o.to("_viewPosition",n=>n?`ck-orientation-${n}`:"")],style:{display:o.if("_isVisible","none",n=>!n)}},children:[{text:o.to("_label")}]})}_bindToState(o,n){this.bind("_isVisible").to(n,"proposedWidth",n,"proposedHeight",(a,l)=>a!==null&&l!==null),this.bind("_label").to(n,"proposedHandleHostWidth",n,"proposedHandleHostHeight",n,"proposedWidthPercents",(a,l,c)=>o.unit==="px"?`${a}×${l}`:`${c}%`),this.bind("_viewPosition").to(n,"activeHandlePosition",n,"proposedHandleHostWidth",n,"proposedHandleHostHeight",(a,l,c)=>l<50||c<50?"above-center":a)}_dismiss(){this.unbind(),this._isVisible=!1}}class Resizer extends ObservableMixin(){constructor(n){super();E(this,"_state");E(this,"_sizeView");E(this,"_options");E(this,"_viewResizerWrapper",null);E(this,"_initialViewWidth");this._options=n,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(a,l)=>a&&l),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",a=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),a.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(a=>{a.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(a=>{a.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const n=this,a=this._options.viewElement;this._options.editor.editing.view.change(c=>{const u=c.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(d){const h=this.toDomElement(d);return n._appendHandles(h),n._appendSizeUI(h),h});c.insert(c.createPositionAt(a,"end"),u),c.addClass("ck-widget_with-resizer",a),this._viewResizerWrapper=u,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(n){this._state=new ResizeState(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(n,this._getHandleHost(),this._getResizeHost())}updateSize(n){const a=this._proposeNewSize(n);this._options.editor.editing.view.change(g=>{const p=this._options.unit||"%",v=(p==="%"?a.widthPercents:a.width)+p;g.setStyle("width",v,this._options.viewElement)});const c=this._getHandleHost(),u=new Rect$3(c),d=Math.round(u.width),h=Math.round(u.height),f=new Rect$3(c);a.width=Math.round(f.width),a.height=Math.round(f.height),this.redraw(u),this.state.update({...a,handleHostWidth:d,handleHostHeight:h})}commit(){const n=this._options.unit||"%",a=(n==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+n;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(a)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(n){const a=this._domResizerWrapper;if(!existsInDom(a))return;const l=a.parentElement,c=this._getHandleHost(),u=this._viewResizerWrapper,d=[u.getStyle("width"),u.getStyle("height"),u.getStyle("left"),u.getStyle("top")];let h;if(l.isSameNode(c)){const f=n||new Rect$3(c);h=[f.width+"px",f.height+"px",void 0,void 0]}else h=[c.offsetWidth+"px",c.offsetHeight+"px",c.offsetLeft+"px",c.offsetTop+"px"];compareArrays(d,h)!=="same"&&this._options.editor.editing.view.change(f=>{f.setStyle({width:h[0],height:h[1],left:h[2],top:h[3]},u)})}containsHandle(n){return this._domResizerWrapper.contains(n)}static isResizeHandle(n){return n.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(a=>{a.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(n){const a=this.state,l=extractCoordinates(n),c=this._options.isCentered?this._options.isCentered(this):!0,u={x:a._referenceCoordinates.x-(l.x+a.originalWidth),y:l.y-a.originalHeight-a._referenceCoordinates.y};c&&a.activeHandlePosition.endsWith("-right")&&(u.x=l.x-(a._referenceCoordinates.x+a.originalWidth)),c&&(u.x*=2);let d=Math.abs(a.originalWidth+u.x),h=Math.abs(a.originalHeight+u.y);return(d/a.aspectRatio>h?"width":"height")=="width"?h=d/a.aspectRatio:d=h*a.aspectRatio,{width:Math.round(d),height:Math.round(h),widthPercents:Math.min(Math.round(a.originalWidthPercents/a.originalWidth*d*100)/100,100)}}_getResizeHost(){const n=this._domResizerWrapper.parentElement;return this._options.getResizeHost(n)}_getHandleHost(){const n=this._domResizerWrapper.parentElement;return this._options.getHandleHost(n)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(n){const a=["top-left","top-right","bottom-right","bottom-left"];for(const l of a)n.appendChild(new Template({tag:"div",attributes:{class:`ck-widget__resizer__handle ${getResizerClass(l)}`}}).render())}_appendSizeUI(n){this._sizeView=new SizeView,this._sizeView.render(),n.appendChild(this._sizeView.element)}}function getResizerClass(s){return`ck-widget__resizer__handle-${s}`}function extractCoordinates(s){return{x:s.pageX,y:s.pageY}}function existsInDom(s){return s&&s.ownerDocument&&s.ownerDocument.contains(s)}class WidgetResize extends Plugin{constructor(){super(...arguments);E(this,"_resizers",new Map);E(this,"_observer");E(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const n=this.editor.editing,a=global$1.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),n.view.addObserver(MouseObserver),this._observer=new(DomEmitterMixin()),this.listenTo(n.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(a,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(a,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=throttle$2(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[c,u]of this._resizers)c.isAttached()||(this._resizers.delete(c),u.destroy())},{priority:"lowest"}),this._observer.listenTo(global$1.window,"resize",this._redrawSelectedResizerThrottled);const l=this.editor.editing.view.document.selection;l.on("change",()=>{const c=l.getSelectedElement(),u=this.getResizerByViewElement(c)||null;u?this.select(u):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const n of this._resizers.values())n.destroy();this._redrawSelectedResizerThrottled.cancel()}select(n){this.deselect(),this.selectedResizer=n,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(n){const a=new Resizer(n),l=this.editor.plugins;if(a.attach(),l.has("WidgetToolbarRepository")){const d=l.get("WidgetToolbarRepository");a.on("begin",()=>{d.forceDisabled("resize")},{priority:"lowest"}),a.on("cancel",()=>{d.clearForceDisabled("resize")},{priority:"highest"}),a.on("commit",()=>{d.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(n.viewElement,a);const u=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(u)==a&&this.select(a),a}getResizerByViewElement(n){return this._resizers.get(n)}_getResizerByHandle(n){for(const a of this._resizers.values())if(a.containsHandle(n))return a}_mouseDownListener(n,a){const l=a.domTarget;Resizer.isResizeHandle(l)&&(this._activeResizer=this._getResizerByHandle(l)||null,this._activeResizer&&(this._activeResizer.begin(l),n.stop(),a.preventDefault()))}_mouseMoveListener(n,a){this._activeResizer&&this._activeResizer.updateSize(a)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BookmarkFormView extends View$1{constructor(n,a){super(n);E(this,"focusTracker",new FocusTracker);E(this,"keystrokes",new KeystrokeHandler);E(this,"idInputView");E(this,"buttonView");E(this,"children");E(this,"_validators");E(this,"_focusables",new ViewCollection);E(this,"_focusCycler");const l=n.t;this._validators=a,this.idInputView=this._createIdInput(),this.buttonView=this._createButton(l("Insert"),"ck-button-action ck-button-bold"),this.buttonView.type="submit",this.children=this._createViewChildren(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const c=["ck","ck-bookmark-view"];this.setTemplate({tag:"form",attributes:{class:c,tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.idInputView,this.buttonView].forEach(a=>{this._focusables.add(a),this.focusTracker.add(a.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const n of this._validators){const a=n(this);if(a)return this.idInputView.errorText=a,!1}return!0}resetFormStatus(){this.idInputView.errorText=null}_createViewChildren(){const n=this.createCollection(),a=this.t;return n.add(new FormHeaderView(this.locale,{label:a("Bookmark")})),n.add(this._createFormContentView()),n}_createFormContentView(){const n=new View$1(this.locale),a=this.createCollection(),l=["ck","ck-bookmark-form","ck-responsive-form"];return a.add(this.idInputView),a.add(this.buttonView),n.setTemplate({tag:"div",attributes:{class:l},children:a}),n}_createIdInput(){const n=this.locale.t,a=new LabeledFieldView(this.locale,createLabeledInputText);return a.label=n("Bookmark name"),a.infoText=n("Enter the bookmark name without spaces."),a}_createButton(n,a){const l=new ButtonView(this.locale);return l.set({label:n,withText:!0}),l.extendTemplate({attributes:{class:a}}),l}get id(){const{element:n}=this.idInputView.fieldView;return n?n.value.trim():null}}class BookmarkActionsView extends View$1{constructor(n){super(n);E(this,"focusTracker",new FocusTracker);E(this,"keystrokes",new KeystrokeHandler);E(this,"bookmarkPreviewView");E(this,"removeButtonView");E(this,"editButtonView");E(this,"_focusables",new ViewCollection);E(this,"_focusCycler");const a=n.t;this.bookmarkPreviewView=this._createBookmarkPreviewView(),this.removeButtonView=this._createButton(a("Remove bookmark"),icons.remove,"remove",this.bookmarkPreviewView),this.editButtonView=this._createButton(a("Edit bookmark"),icons.pencil,"edit",this.bookmarkPreviewView),this.set("id",void 0),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-bookmark-actions","ck-responsive-form"],tabindex:"-1"},children:[this.bookmarkPreviewView,this.editButtonView,this.removeButtonView]})}render(){super.render(),[this.editButtonView,this.removeButtonView].forEach(a=>{this._focusables.add(a),this.focusTracker.add(a.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(n,a,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:a,tooltip:!0}),u.delegate("execute").to(this,l),u.labelView.unbind("id"),u.labelView.bind("id").to(u,"ariaLabelledBy",d=>getFirstToken(d)),u.ariaLabelledBy=`${u.ariaLabelledBy} ${c.id}`,u}_createBookmarkPreviewView(){const n=new LabelView(this.locale);return n.extendTemplate({attributes:{class:["ck","ck-bookmark-actions__preview"]}}),n.bind("text").to(this,"id"),n}}function getFirstToken(s){return s.split(" ")[0]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isBookmarkIdValid(s){return!(!s||typeof s!="string"||/\s/.test(s))}class InsertBookmarkCommand extends Command{refresh(){const n=this.editor.model.document.selection,a=this._getPositionToInsertBookmark(n);this.isEnabled=!!a}execute(o){if(!o)return;const{bookmarkId:n}=o;if(!isBookmarkIdValid(n)){logWarning("insert-bookmark-command-executed-with-invalid-name");return}const a=this.editor,l=a.model,c=l.document.selection;l.change(u=>{let d=this._getPositionToInsertBookmark(c);if(!l.schema.checkChild(d,"bookmark")){const g=a.execute("insertParagraph",{position:d});if(!g)return;d=g}const f=u.createElement("bookmark",{...Object.fromEntries(c.getAttributes()),bookmarkId:n});l.insertObject(f,d,null,{setSelection:"on"})})}_getPositionToInsertBookmark(o){const n=this.editor.model,a=n.schema,l=o.getFirstRange(),c=l.start;if(isBookmarkAllowed(c,a))return c;for(const{previousPosition:u,item:d}of l){if(d.is("element")&&a.checkChild(d,"$text")&&isBookmarkAllowed(d,a))return n.createPositionAt(d,0);if(isBookmarkAllowed(u,a))return u}return null}}function isBookmarkAllowed(s,o){return o.checkChild(s,"bookmark")?!0:o.checkChild(s,"paragraph")?o.checkChild("paragraph","bookmark"):!1}class UpdateBookmarkCommand extends Command{refresh(){const n=this.editor.model.document.selection,a=getSelectedBookmark(n);this.isEnabled=!!a,this.value=a?a.getAttribute("bookmarkId"):void 0}execute(o){if(!o)return;const{bookmarkId:n}=o;if(!isBookmarkIdValid(n)){logWarning("update-bookmark-command-executed-with-invalid-name");return}const a=this.editor.model,l=a.document.selection,c=getSelectedBookmark(l);c&&a.change(u=>{u.setAttribute("bookmarkId",n,c)})}}function getSelectedBookmark(s){const o=s.getSelectedElement();return o&&o.is("element","bookmark")?o:null}class BookmarkEditing extends Plugin{constructor(){super(...arguments);E(this,"_bookmarkElements",new Map)}static get pluginName(){return"BookmarkEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:n}=this;this._defineSchema(),this._defineConverters(),n.commands.add("insertBookmark",new InsertBookmarkCommand(n)),n.commands.add("updateBookmark",new UpdateBookmarkCommand(n)),this.listenTo(n.model.document,"change:data",()=>{this._trackBookmarkElements()})}getElementForBookmarkId(n){for(const[a,l]of this._bookmarkElements)if(l==n)return a;return null}_defineSchema(){this.editor.model.schema.register("bookmark",{inheritAllFrom:"$inlineObject",allowAttributes:"bookmarkId",disallowAttributes:["linkHref","htmlA"]})}_defineConverters(){const{editor:n}=this,{conversion:a,t:l}=n;n.data.htmlProcessor.domConverter.registerInlineObjectMatcher(c=>upcastMatcher(c)),n.editing.view.domConverter.registerInlineObjectMatcher(c=>upcastMatcher(c,!1)),a.for("dataDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(c,{writer:u})=>u.createEmptyElement("a",{id:c.getAttribute("bookmarkId")})}),a.for("editingDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(c,{writer:u})=>{const d=c.getAttribute("bookmarkId"),h=u.createContainerElement("a",{id:d,class:"ck-bookmark"},[this._createBookmarkUIElement(u)]);return this._bookmarkElements.set(c,d),toWidget(h,u,{label:()=>`${d} ${l("bookmark widget")}`})}}),a.for("upcast").add(c=>c.on("element:a",dataViewModelAnchorInsertion(n)))}_createBookmarkUIElement(n){return n.createUIElement("span",{class:"ck-bookmark__icon"},function(a){const l=this.toDomElement(a),c=new IconView;return c.set({content:icons.bookmarkInline,isColorInherited:!1}),c.render(),l.appendChild(c.element),l})}_trackBookmarkElements(){this._bookmarkElements.forEach((n,a)=>{a.root.rootName==="$graveyard"&&this._bookmarkElements.delete(a)})}}function upcastMatcher(s,o=!0){if(!(s.name==="a")||o&&!s.isEmpty)return null;const a=s.hasAttribute("id"),l=s.hasAttribute("name"),c=s.hasAttribute("href");return a&&!c?{name:!0,attributes:["id"]}:l&&!c?{name:!0,attributes:["name"]}:null}function dataViewModelAnchorInsertion(s){return(o,n,a)=>{const l=n.viewItem,c=upcastMatcher(l,!1);if(!c||!a.consumable.test(l,c)||!isEnabledNonEmptyAnchorConversion(s)&&!l.isEmpty)return;const d=a.writer,h=l.getAttribute("id"),f=l.getAttribute("name"),g=h||f,p=d.createElement("bookmark",{bookmarkId:g});if(!a.safeInsert(p,n.modelCursor))return;a.consumable.consume(l,c),h===f&&a.consumable.consume(l,{attributes:["name"]}),a.updateConversionResult(p,n);const{modelCursor:v,modelRange:b}=a.convertChildren(l,n.modelCursor);n.modelCursor=v,n.modelRange=d.createRange(n.modelRange.start,b.end)}}function isEnabledNonEmptyAnchorConversion(s){const o=s.config.get("bookmark.enableNonEmptyAnchorConversion");return o!==void 0?o:!0}const VISUAL_SELECTION_MARKER_NAME$1="bookmark-ui";class BookmarkUI extends Plugin{constructor(){super(...arguments);E(this,"actionsView",null);E(this,"formView",null);E(this,"_balloon")}static get requires(){return[BookmarkEditing,ContextualBalloon]}static get pluginName(){return"BookmarkUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.editing.view.addObserver(ClickObserver),this._balloon=n.plugins.get(ContextualBalloon),this._createToolbarBookmarkButton(),this._enableBalloonActivators(),n.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME$1,view:{classes:["ck-fake-bookmark-selection"]}}),n.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME$1,view:(a,{writer:l})=>{if(!a.markerRange.isCollapsed)return null;const c=l.createUIElement("span");return l.addClass(["ck-fake-bookmark-selection","ck-fake-bookmark-selection_collapsed"],c),c}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const n=this.editor,a=new BookmarkActionsView(n.locale),l=n.commands.get("updateBookmark"),c=n.commands.get("delete");return a.bind("id").to(l,"value"),a.editButtonView.bind("isEnabled").to(l),a.removeButtonView.bind("isEnabled").to(c),this.listenTo(a,"edit",()=>{this._addFormView()}),this.listenTo(a,"remove",()=>{this._hideUI(),n.execute("delete")}),a.keystrokes.set("Esc",(u,d)=>{this._hideUI(),d()}),a}_createFormView(){const n=this.editor,a=n.locale,l=n.commands.get("insertBookmark"),c=n.commands.get("updateBookmark"),u=[l,c],d=new(CssTransitionDisablerMixin(BookmarkFormView))(a,getFormValidators$3(n));return d.idInputView.fieldView.bind("value").to(c,"value"),d.idInputView.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),d.buttonView.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(d,"submit",()=>{if(d.isValid()){const h=d.id;this._getSelectedBookmarkElement()?n.execute("updateBookmark",{bookmarkId:h}):n.execute("insertBookmark",{bookmarkId:h}),this._closeFormView()}}),this.listenTo(d.idInputView,"change:errorText",()=>{n.ui.update()}),d.keystrokes.set("Esc",(h,f)=>{this._closeFormView(),f()}),d}_createToolbarBookmarkButton(){const n=this.editor;n.ui.componentFactory.add("bookmark",()=>{const a=this._createButton(ButtonView);return a.set({tooltip:!0}),a}),n.ui.componentFactory.add("menuBar:bookmark",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(n){const a=this.editor,l=a.locale,c=new n(l),u=a.commands.get("insertBookmark"),d=a.commands.get("updateBookmark"),h=l.t;return c.set({label:h("Bookmark"),icon:icons.bookmark}),this.listenTo(c,"execute",()=>this._showUI(!0)),c.bind("isEnabled").toMany([u,d],"isEnabled",(...f)=>f.some(g=>g)),c.bind("isOn").to(d,"value",f=>!!f),c}_enableBalloonActivators(){const a=this.editor.editing.view.document;this.listenTo(a,"click",()=>{this._getSelectedBookmarkElement()&&this._showUI()})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(n,a)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),a())},{priority:"high"}),this.editor.keystrokes.set("Esc",(n,a)=>{this._isUIVisible&&(this._hideUI(),a())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_updateFormButtonLabel(n){const a=this.editor.locale.t;this.formView.buttonView.label=a(n?"Update":"Insert")}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const a=this.editor.commands.get("updateBookmark");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.idInputView.fieldView.value=a.value||"",this._balloon.visibleView===this.formView&&this.formView.idInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){this.editor.commands.get("updateBookmark").value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.buttonView.focus(),this.formView.idInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(n=!1){this.formView||this._createViews(),this._getSelectedBookmarkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),n&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),n&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const n=this.editor;this.stopListening(n.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),n.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const n=this.editor,a=n.editing.view.document;let l=this._getSelectedBookmarkElement(),c=d();this._updateFormButtonLabel(!!l);const u=()=>{const h=this._getSelectedBookmarkElement(),f=d();l&&!h||!l&&f!==c?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),this._updateFormButtonLabel(!!l),l=h,c=f};function d(){return a.selection.focus.getAncestors().reverse().find(h=>h.is("element"))}this.listenTo(n.ui,"update",u),this.listenTo(this._balloon,"change:visibleView",u)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const n=this._balloon.visibleView;return!!this.formView&&n==this.formView||this._areActionsVisible}_getBalloonPositionData(){const n=this.editor.editing.view,a=this.editor.model;let l;const c=this._getSelectedBookmarkElement();if(a.markers.has(VISUAL_SELECTION_MARKER_NAME$1)){const u=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME$1)),d=n.createRange(n.createPositionBefore(u[0]),n.createPositionAfter(u[u.length-1]));l=n.domConverter.viewRangeToDom(d)}else c&&(l=()=>{const u=this.editor.editing.mapper,d=n.domConverter,h=u.toViewElement(c);return d.mapViewToDom(h)});return l&&{target:l}}_getSelectedBookmarkElement(){const a=this.editor.model.document.selection.getSelectedElement();return a&&a.is("element","bookmark")?a:null}_showFakeVisualSelection(){const n=this.editor.model;n.change(a=>{const l=n.document.selection.getFirstRange();if(n.markers.has(VISUAL_SELECTION_MARKER_NAME$1))a.updateMarker(VISUAL_SELECTION_MARKER_NAME$1,{range:l});else if(l.start.isAtEnd){const c=l.start.getLastMatchingPosition(({item:u})=>!n.schema.isContent(u),{boundaries:l});a.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:a.createRange(c,l.end)})}else a.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:l})})}_hideFakeVisualSelection(){const n=this.editor.model;n.markers.has(VISUAL_SELECTION_MARKER_NAME$1)&&n.change(a=>{a.removeMarker(VISUAL_SELECTION_MARKER_NAME$1)})}}function getFormValidators$3(s){const{t:o}=s,n=s.plugins.get(BookmarkEditing);return[a=>{if(!a.id)return o("Bookmark must not be empty.")},a=>{if(a.id&&/\s/.test(a.id))return o("Bookmark name cannot contain space characters.")},a=>{const l=s.model.document.selection.getSelectedElement(),c=n.getElementForBookmarkId(a.id);if(l!==c&&c)return o("Bookmark name already exists.")}]}class Bookmark extends Plugin{static get pluginName(){return"Bookmark"}static get requires(){return[BookmarkEditing,BookmarkUI,Widget]}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClipboardObserver extends DomEventObserver{constructor(n){super(n);E(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const a=this.document;this.listenTo(a,"paste",l("clipboardInput"),{priority:"low"}),this.listenTo(a,"drop",l("clipboardInput"),{priority:"low"}),this.listenTo(a,"dragover",l("dragging"),{priority:"low"});function l(c){return(u,d)=>{d.preventDefault();const h=d.dropRange?[d.dropRange]:null,f=new EventInfo(a,c);a.fire(f,{dataTransfer:d.dataTransfer,method:u.name,targetRanges:h,target:d.target,domEvent:d.domEvent}),f.stop.called&&d.stopPropagation()}}}onDomEvent(n){const a="clipboardData"in n?n.clipboardData:n.dataTransfer,l=n.type=="drop"||n.type=="paste",c={dataTransfer:new DataTransfer(a,{cacheFiles:l})};if(n.type=="drop"||n.type=="dragover"){const u=getRangeFromMouseEvent(n);c.dropRange=u&&this.view.domConverter.domRangeToView(u)}this.fire(n.type,n,c)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function plainTextToHtml(s){return s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(s.includes("</p><p>")||s.includes("<br>"))&&(s=`<p>${s}</p>`),s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeClipboardData(s){return s.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(o,n)=>n.length==1?" ":n).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const smallPaddingElements=["figcaption","li"],listElements=["ol","ul"];function viewToPlainText(s,o){if(o.is("$text")||o.is("$textProxy"))return o.data;if(o.is("element","img")&&o.hasAttribute("alt"))return o.getAttribute("alt");if(o.is("element","br"))return`
`;let n="",a=null;for(const l of o.getChildren())n+=newLinePadding(l,a)+viewToPlainText(s,l),a=l;if(o.is("rawElement")){const l=document.createElement("div");o.render(l,s),n+=domElementToPlainText(l)}return n}function domElementToPlainText(s){let o="";if(s.nodeType===Node.TEXT_NODE)return s.textContent;if(s.tagName==="BR")return`
`;for(const n of s.childNodes)o+=domElementToPlainText(n);return o}function newLinePadding(s,o){return o?s.is("element","li")&&!s.isEmpty&&s.getChild(0).is("containerElement")||listElements.includes(s.name)&&listElements.includes(o.name)?`

`:!s.is("containerElement")&&!o.is("containerElement")?"":smallPaddingElements.includes(s.name)||smallPaddingElements.includes(o.name)?`
`:s.is("element")&&s.getCustomProperty("dataPipeline:transparentRendering")||o.is("element")&&o.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class ClipboardMarkersUtils extends Plugin{constructor(){super(...arguments);E(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(n,a){this._markersToCopy.set(n,a)}_copySelectedFragmentWithMarkers(n,a,l=c=>c.model.getSelectedContent(c.model.document.selection)){return this.editor.model.change(c=>{const u=c.model.document.selection;c.setSelection(a);const d=this._insertFakeMarkersIntoSelection(c,c.model.document.selection,n),h=l(c),f=this._removeFakeMarkersInsideElement(c,h);for(const[g,p]of Object.entries(d)){f[g]||(f[g]=c.createRangeIn(h));for(const v of p)c.remove(v)}h.markers.clear();for(const[g,p]of Object.entries(f))h.markers.set(g,p);return c.setSelection(u),h})}_pasteMarkersIntoTransformedElement(n,a){const l=this._getPasteMarkersFromRangeMap(n);return this.editor.model.change(c=>{const u=this._insertFakeMarkersElements(c,l),d=a(c),h=this._removeFakeMarkersInsideElement(c,d);for(const f of Object.values(u).flat())c.remove(f);for(const[f,g]of Object.entries(h))c.model.markers.has(f)||c.addMarker(f,{usingOperation:!0,affectsData:!0,range:g});return d})}_pasteFragmentWithMarkers(n){const a=this._getPasteMarkersFromRangeMap(n.markers);n.markers.clear();for(const l of a)n.markers.set(l.name,l.range);return this.editor.model.insertContent(n)}_forceMarkersCopy(n,a,l={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const c=this._markersToCopy.get(n);this._markersToCopy.set(n,l),a(),c?this._markersToCopy.set(n,c):this._markersToCopy.delete(n)}_isMarkerCopyable(n,a){const l=this._getMarkerClipboardConfig(n);if(!l)return!1;if(!a)return!0;const{allowedActions:c}=l;return c==="all"||c.includes(a)}_hasMarkerConfiguration(n){return!!this._getMarkerClipboardConfig(n)}_getMarkerClipboardConfig(n){const[a]=n.split(":");return this._markersToCopy.get(a)||null}_insertFakeMarkersIntoSelection(n,a,l){const c=this._getCopyableMarkersFromSelection(n,a,l);return this._insertFakeMarkersElements(n,c)}_getCopyableMarkersFromSelection(n,a,l){const c=Array.from(a.getRanges()),u=new Set(c.flatMap(h=>Array.from(n.model.markers.getMarkersIntersectingRange(h)))),d=h=>{if(!this._isMarkerCopyable(h.name,l))return!1;const{copyPartiallySelected:g}=this._getMarkerClipboardConfig(h.name);if(!g){const p=h.getRange();return c.some(v=>v.containsRange(p,!0))}return!0};return Array.from(u).filter(d).map(h=>({name:l==="dragstart"?this._getUniqueMarkerName(h.name):h.name,range:h.getRange()}))}_getPasteMarkersFromRangeMap(n,a=null){const{model:l}=this.editor;return(n instanceof Map?Array.from(n.entries()):Object.entries(n)).flatMap(([u,d])=>{if(!this._hasMarkerConfiguration(u))return[{name:u,range:d}];if(this._isMarkerCopyable(u,a)){const h=this._getMarkerClipboardConfig(u),f=l.markers.has(u)&&l.markers.get(u).getRange().root.rootName==="$graveyard";return(h.duplicateOnPaste||f)&&(u=this._getUniqueMarkerName(u)),[{name:u,range:d}]}return[]})}_insertFakeMarkersElements(n,a){const l={},c=a.flatMap(u=>{const{start:d,end:h}=u.range;return[{position:d,marker:u,type:"start"},{position:h,marker:u,type:"end"}]}).sort(({position:u},{position:d})=>u.isBefore(d)?1:-1);for(const{position:u,marker:d,type:h}of c){const f=n.createElement("$marker",{"data-name":d.name,"data-type":h});l[d.name]||(l[d.name]=[]),l[d.name].push(f),n.insert(f,u)}return l}_removeFakeMarkersInsideElement(n,a){const c=this._getAllFakeMarkersFromElement(n,a).reduce((u,d)=>{const h=d.markerElement&&n.createPositionBefore(d.markerElement);let f=u[d.name],g=!1;return f&&f.start&&f.end&&(this._getMarkerClipboardConfig(d.name).duplicateOnPaste?u[this._getUniqueMarkerName(d.name)]=u[d.name]:g=!0,f=null),g||(u[d.name]={...f,[d.type]:h}),d.markerElement&&n.remove(d.markerElement),u},{});return mapValues(c,u=>new Range(u.start||n.createPositionFromPath(a,[0]),u.end||n.createPositionAt(a,"end")))}_getAllFakeMarkersFromElement(n,a){const l=Array.from(n.createRangeIn(a)).flatMap(({item:d})=>{if(!d.is("element","$marker"))return[];const h=d.getAttribute("data-name"),f=d.getAttribute("data-type");return[{markerElement:d,name:h,type:f}]}),c=[],u=[];for(const d of l)d.type==="end"&&(l.some(f=>f.name===d.name&&f.type==="start")||c.push({markerElement:null,name:d.name,type:"start"})),d.type==="start"&&(l.some(f=>f.name===d.name&&f.type==="end")||u.unshift({markerElement:null,name:d.name,type:"end"}));return[...c,...l,...u]}_getUniqueMarkerName(n){const a=n.split(":"),l=uid().substring(1,6);return a.length===3?`${a.slice(0,2).join(":")}:${l}`:`${a.join(":")}:${l}`}}class ClipboardPipeline extends Plugin{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils]}init(){this.editor.editing.view.addObserver(ClipboardObserver),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(o,n,a){const l=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:a==="cut"},()=>{const c=l._copySelectedFragmentWithMarkers(a,n);this.fire("outputTransformation",{dataTransfer:o,content:c,method:a})})}_setupPasteDrop(){const o=this.editor,n=o.model,a=o.editing.view,l=a.document,c=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(l,"clipboardInput",(u,d)=>{d.method=="paste"&&!o.model.canEditAt(o.model.document.selection)&&u.stop()},{priority:"highest"}),this.listenTo(l,"clipboardInput",(u,d)=>{const h=d.dataTransfer;let f;if(d.content)f=d.content;else{let v="";h.getData("text/html")?v=normalizeClipboardData(h.getData("text/html")):h.getData("text/plain")&&(v=plainTextToHtml(h.getData("text/plain"))),f=this.editor.data.htmlProcessor.toView(v)}const g=new EventInfo(this,"inputTransformation"),p=h.getData("application/ckeditor5-editor-id")||null;this.fire(g,{content:f,dataTransfer:h,sourceEditorId:p,targetRanges:d.targetRanges,method:d.method}),g.stop.called&&u.stop(),a.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(u,d)=>{if(d.content.isEmpty)return;const f=this.editor.data.toModel(d.content,"$clipboardHolder");f.childCount!=0&&(u.stop(),n.change(()=>{this.fire("contentInsertion",{content:f,method:d.method,sourceEditorId:d.sourceEditorId,dataTransfer:d.dataTransfer,targetRanges:d.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(u,d)=>{d.resultRange=c._pasteFragmentWithMarkers(d.content)},{priority:"low"})}_setupCopyCut(){const o=this.editor,n=o.model.document,l=o.editing.view.document,c=(u,d)=>{const h=d.dataTransfer;d.preventDefault(),this._fireOutputTransformationEvent(h,n.selection,u.name)};this.listenTo(l,"copy",c,{priority:"low"}),this.listenTo(l,"cut",(u,d)=>{o.model.canEditAt(o.model.document.selection)?c(u,d):d.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(u,d)=>{const h=o.data.toView(d.content,{isClipboardPipeline:!0});l.fire("clipboardOutput",{dataTransfer:d.dataTransfer,content:h,method:d.method})},{priority:"low"}),this.listenTo(l,"clipboardOutput",(u,d)=>{d.content.isEmpty||(d.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(d.content)),d.dataTransfer.setData("text/plain",viewToPlainText(o.data.htmlProcessor.domConverter,d.content)),d.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),d.method=="cut"&&o.model.deleteContent(n.selection)},{priority:"low"})}}const toPx$1=toUnit("px");let LineView$1=class extends View$1{constructor(){super();const o=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",o.if("isVisible","ck-hidden",n=>!n)],style:{left:o.to("left",n=>toPx$1(n)),top:o.to("top",n=>toPx$1(n)),width:o.to("width",n=>toPx$1(n))}}})}};class DragDropTarget extends Plugin{constructor(){super(...arguments);E(this,"removeDropMarkerDelayed",delay(()=>this.removeDropMarker(),40));E(this,"_updateDropMarkerThrottled",throttle$2(n=>this._updateDropMarker(n),40));E(this,"_reconvertMarkerThrottled",throttle$2(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));E(this,"_dropTargetLineView",new LineView$1);E(this,"_domEmitter",new(DomEmitterMixin()));E(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:n}of this._scrollables.values())n.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(n,a,l,c,u,d){this.removeDropMarkerDelayed.cancel();const h=findDropTargetRange(this.editor,n,a,l,c,u,d);/* istanbul ignore next -- @preserve */if(h){if(d&&d.containsRange(h))return this.removeDropMarker();this._updateDropMarkerThrottled(h)}}getFinalDropRange(n,a,l,c,u,d){const h=findDropTargetRange(this.editor,n,a,l,c,u,d);return this.removeDropMarker(),h}removeDropMarker(){const n=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,n.markers.has("drop-target")&&n.change(a=>{a.removeMarker("drop-target")})}_setupDropMarker(){const n=this.editor;n.ui.view.body.add(this._dropTargetLineView),n.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),n.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(a,{writer:l})=>{if(n.model.schema.checkChild(a.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(l);a.markerRange.isCollapsed?this._updateDropTargetLine(a.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(n){const a=this.editor,l=a.model.markers;a.model.change(c=>{l.has("drop-target")?l.get("drop-target").getRange().isEqual(n)||c.updateMarker("drop-target",{range:n}):c.addMarker("drop-target",{range:n,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(n){return n.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(a){const l=this.toDomElement(a);return l.append("⁠",a.createElement("span"),"⁠"),l})}_updateDropTargetLine(n){const a=this.editor.editing,l=n.start.nodeBefore,c=n.start.nodeAfter,u=n.start.parent,d=l?a.mapper.toViewElement(l):null,h=d?a.view.domConverter.mapViewToDom(d):null,f=c?a.mapper.toViewElement(c):null,g=f?a.view.domConverter.mapViewToDom(f):null,p=a.mapper.toViewElement(u);if(!p)return;const v=a.view.domConverter.mapViewToDom(p),b=this._getScrollableRect(p),{scrollX:_,scrollY:w}=global$1.window,x=h?new Rect$3(h):null,S=g?new Rect$3(g):null,C=new Rect$3(v).excludeScrollbarsAndBorders(),T=x?x.bottom:C.top,R=S?S.top:C.bottom,A=global$1.window.getComputedStyle(v),M=T<=R?(T+R)/2:R;if(b.top<M&&M<b.bottom){const D=C.left+parseFloat(A.paddingLeft),O=C.right-parseFloat(A.paddingRight),H=Math.max(D+_,b.left),j=Math.min(O+_,b.right);this._dropTargetLineView.set({isVisible:!0,left:H,top:M+w,width:j-H})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(n){const a=n.root.rootName;let l;if(this._scrollables.has(a))l=this._scrollables.get(a).domElement;else{const c=this.editor.editing.view.domConverter.mapViewToDom(n);l=findScrollableElement(c),this._domEmitter.listenTo(l,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const u=new ResizeObserver$1(l,this._reconvertMarkerThrottled);this._scrollables.set(a,{domElement:l,resizeObserver:u})}return new Rect$3(l).excludeScrollbarsAndBorders()}}function findDropTargetRange(s,o,n,a,l,c,u){const d=s.model,h=s.editing.mapper;let g=getClosestMappedModelElement(s,o);for(;g;){if(!c){if(d.schema.checkChild(g,"$text")){if(n){const p=n[0].start,v=h.toModelPosition(p);if(!u||Array.from(u.getItems({shallow:!0})).every(_=>d.schema.checkChild(v,_))){if(d.schema.checkChild(v,"$text"))return d.createRange(v);if(p)return findDropTargetRangeForElement(s,getClosestMappedModelElement(s,p.parent),a,l)}}}else if(d.schema.isInline(g))return findDropTargetRangeForElement(s,g,a,l)}if(d.schema.isBlock(g))return findDropTargetRangeForElement(s,g,a,l);if(d.schema.checkChild(g,"$block")){const p=Array.from(g.getChildren()).filter(_=>_.is("element")&&!shouldIgnoreElement(s,_));let v=0,b=p.length;if(b==0)return d.createRange(d.createPositionAt(g,"end"));for(;v<b-1;){const _=Math.floor((v+b)/2);findElementSide(s,p[_],a,l)=="before"?b=_:v=_}return findDropTargetRangeForElement(s,p[v],a,l)}g=g.parent}return null}function shouldIgnoreElement(s,o){const n=s.editing.mapper,a=s.editing.view.domConverter,l=n.toViewElement(o);if(!l)return!0;const c=a.mapViewToDom(l);return global$1.window.getComputedStyle(c).float!="none"}function findDropTargetRangeForElement(s,o,n,a){const l=s.model;return l.createRange(l.createPositionAt(o,findElementSide(s,o,n,a)))}function findElementSide(s,o,n,a){const l=s.editing.mapper,c=s.editing.view.domConverter,u=l.toViewElement(o),d=c.mapViewToDom(u),h=new Rect$3(d);return s.model.schema.isInline(o)?n<(h.left+h.right)/2?"before":"after":a<(h.top+h.bottom)/2?"before":"after"}function getClosestMappedModelElement(s,o){const n=s.editing.mapper,a=s.editing.view,l=n.toModelElement(o);if(l)return l;const c=a.createPositionBefore(o),u=n.findMappedViewAncestor(c);return n.toModelElement(u)}function findScrollableElement(s){let o=s;do{o=o.parentElement;const n=global$1.window.getComputedStyle(o).overflowY;if(n=="auto"||n=="scroll")break}while(o.tagName!="BODY");return o}class DragDropBlockToolbar extends Plugin{constructor(){super(...arguments);E(this,"_isBlockDragging",!1);E(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;if(this.listenTo(n,"change:isReadOnly",(a,l,c)=>{c?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),env$1.isAndroid&&this.forceDisabled("noAndroidSupport"),n.plugins.has("BlockToolbar")){const l=n.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(l,"dragstart",(c,u)=>this._handleBlockDragStart(u)),this._domEmitter.listenTo(global$1.document,"dragover",(c,u)=>this._handleBlockDragging(u)),this._domEmitter.listenTo(global$1.document,"drop",(c,u)=>this._handleBlockDragging(u)),this._domEmitter.listenTo(global$1.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&l.setAttribute("draggable","true"),this.on("change:isEnabled",(c,u,d)=>{l.setAttribute("draggable",d?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(n){if(!this.isEnabled)return;const a=this.editor.model,l=a.document.selection,c=this.editor.editing.view,u=Array.from(l.getSelectedBlocks()),d=a.createRange(a.createPositionBefore(u[0]),a.createPositionAfter(u[u.length-1]));a.change(h=>h.setSelection(d)),this._isBlockDragging=!0,c.focus(),c.getObserver(ClipboardObserver).onDomEvent(n)}_handleBlockDragging(n){if(!this.isEnabled||!this._isBlockDragging)return;const a=n.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),l=n.clientY,c=document.elementFromPoint(a,l),u=this.editor.editing.view;!c||!c.closest(".ck-editor__editable")||u.getObserver(ClipboardObserver).onDomEvent({...n,type:n.type,dataTransfer:n.dataTransfer,target:c,clientX:a,clientY:l,preventDefault:()=>n.preventDefault(),stopPropagation:()=>n.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class DragDrop extends Plugin{constructor(){super(...arguments);E(this,"_draggedRange");E(this,"_draggingUid");E(this,"_draggableElement");E(this,"_clearDraggableAttributesDelayed",delay(()=>this._clearDraggableAttributes(),40));E(this,"_blockMode",!1);E(this,"_domEmitter",new(DomEmitterMixin()));E(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline,Widget,DragDropTarget,DragDropBlockToolbar]}init(){const n=this.editor,a=n.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,a.addObserver(ClipboardObserver),a.addObserver(MouseObserver),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(n,"change:isReadOnly",(l,c,u)=>{u?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(l,c,u)=>{u||this._finalizeDragging(!1)}),env$1.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const n=this.editor,a=n.model,l=n.editing.view,c=l.document,u=n.plugins.get(DragDropTarget);this.listenTo(c,"dragstart",(d,h)=>{if(h.target&&h.target.is("editableElement")){h.preventDefault();return}if(this._prepareDraggedRange(h.target),!this._draggedRange){h.preventDefault();return}this._draggingUid=uid(),h.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",h.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const f=a.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(h.dataTransfer,f,"dragstart");const{dataTransfer:p,domTarget:v,domEvent:b}=h,{clientX:_}=b;this._updatePreview({dataTransfer:p,domTarget:v,clientX:_}),h.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(c,"dragend",(d,h)=>{this._finalizeDragging(!h.dataTransfer.isCanceled&&h.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(global$1.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(c,"dragenter",()=>{this.isEnabled&&l.focus()}),this.listenTo(c,"dragleave",()=>{u.removeDropMarkerDelayed()}),this.listenTo(c,"dragging",(d,h)=>{if(!this.isEnabled){h.dataTransfer.dropEffect="none";return}const{clientX:f,clientY:g}=h.domEvent;u.updateDropMarker(h.target,h.targetRanges,f,g,this._blockMode,this._draggedRange),this._draggedRange||(h.dataTransfer.dropEffect="copy"),env$1.isGecko||(h.dataTransfer.effectAllowed=="copy"?h.dataTransfer.dropEffect="copy":["all","copyMove"].includes(h.dataTransfer.effectAllowed)&&(h.dataTransfer.dropEffect="move")),d.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const n=this.editor,l=n.editing.view.document,c=n.plugins.get(DragDropTarget);this.listenTo(l,"clipboardInput",(u,d)=>{if(d.method!="drop")return;const{clientX:h,clientY:f}=d.domEvent,g=c.getFinalDropRange(d.target,d.targetRanges,h,f,this._blockMode,this._draggedRange);if(!g){this._finalizeDragging(!1),u.stop();return}if(this._draggedRange&&this._draggingUid!=d.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),getFinalDropEffect(d.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(g,!0)){this._finalizeDragging(!1),u.stop();return}d.targetRanges=[n.editing.mapper.toViewRange(g)]},{priority:"high"})}_setupContentInsertionIntegration(){const n=this.editor.plugins.get(ClipboardPipeline);n.on("contentInsertion",(a,l)=>{if(!this.isEnabled||l.method!=="drop")return;const c=l.targetRanges.map(u=>this.editor.editing.mapper.toModelRange(u));this.editor.model.change(u=>u.setSelection(c))},{priority:"high"}),n.on("contentInsertion",(a,l)=>{if(!this.isEnabled||l.method!=="drop")return;const c=getFinalDropEffect(l.dataTransfer)=="move",u=!l.resultRange||!l.resultRange.isCollapsed;this._finalizeDragging(u&&c)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const n=this.editor,a=n.editing.view,l=a.document;this.listenTo(l,"mousedown",(c,u)=>{if(env$1.isAndroid||!u)return;this._clearDraggableAttributesDelayed.cancel();let d=findDraggableWidget(u.target);if(env$1.isBlink&&!n.isReadOnly&&!d&&!l.selection.isCollapsed){const h=l.selection.getSelectedElement();(!h||!isWidget(h))&&(d=l.selection.editableElement)}d&&(a.change(h=>{h.setAttribute("draggable","true",d)}),this._draggableElement=n.editing.mapper.toModelElement(d))}),this.listenTo(l,"mouseup",()=>{env$1.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const n=this.editor.editing;n.view.change(a=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&a.removeAttribute("draggable",n.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(n){const a=this.editor,l=a.model;a.plugins.get(DragDropTarget).removeDropMarker(),this._clearDraggableAttributes(),a.plugins.has("WidgetToolbarRepository")&&a.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(n&&this.isEnabled&&l.change(u=>{const d=l.createSelection(this._draggedRange);l.deleteContent(d,{doNotAutoparagraph:!0});const h=d.getFirstPosition().parent;h.isEmpty&&!l.schema.checkChild(h,"$text")&&l.schema.checkChild(h,"paragraph")&&u.insertElement("paragraph",h,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(n){const a=this.editor,l=a.model,c=l.document.selection,u=n?findDraggableWidget(n):null;if(u){const g=a.editing.mapper.toModelElement(u);this._draggedRange=LiveRange.fromRange(l.createRangeOn(g)),this._blockMode=l.schema.isBlock(g),a.plugins.has("WidgetToolbarRepository")&&a.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(c.isCollapsed&&!c.getFirstPosition().parent.isEmpty)return;const d=Array.from(c.getSelectedBlocks()),h=c.getFirstRange();if(d.length==0){this._draggedRange=LiveRange.fromRange(h);return}const f=getRangeIncludingFullySelectedParents(l,d);if(d.length>1)this._draggedRange=LiveRange.fromRange(f),this._blockMode=!0;else if(d.length==1){const g=h.start.isTouching(f.start)&&h.end.isTouching(f.end);this._draggedRange=LiveRange.fromRange(g?f:h),this._blockMode=g}l.change(g=>g.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:n,domTarget:a,clientX:l}){const c=this.editor.editing.view,u=c.document.selection.editableElement,d=c.domConverter.mapViewToDom(u),h=global$1.window.getComputedStyle(d);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=createElement$1(global$1.document,"div",{style:"position: fixed; left: -999999px;"}),global$1.document.body.appendChild(this._previewContainer));const f=new Rect$3(d);if(d.contains(a))return;const g=parseFloat(h.paddingLeft),p=createElement$1(global$1.document,"div");p.className="ck ck-content",p.style.width=h.width,p.style.paddingLeft=`${f.left-l+g}px`,env$1.isiOS&&(p.style.backgroundColor="white"),c.domConverter.setContentOf(p,n.getData("text/html")),n.setDragImage(p,0,0),this._previewContainer.appendChild(p)}}function getFinalDropEffect(s){return env$1.isGecko?s.dropEffect:["all","copyMove"].includes(s.effectAllowed)?"move":"copy"}function findDraggableWidget(s){if(s.is("editableElement"))return null;if(s.hasClass("ck-widget__selection-handle"))return s.findAncestor(isWidget);if(isWidget(s))return s;const o=s.findAncestor(n=>isWidget(n)||n.is("editableElement"));return isWidget(o)?o:null}function getRangeIncludingFullySelectedParents(s,o){const n=o[0],a=o[o.length-1],l=n.getCommonAncestor(a),c=s.createPositionBefore(n),u=s.createPositionAfter(a);if(l&&l.is("element")&&!s.schema.isLimit(l)){const d=s.createRangeOn(l),h=c.isTouching(d.start),f=u.isTouching(d.end);if(h&&f)return getRangeIncludingFullySelectedParents(s,[l])}return s.createRange(c,u)}class PastePlainText extends Plugin{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const o=this.editor,n=o.model,a=o.editing.view,l=n.document.selection;a.addObserver(ClipboardObserver),o.plugins.get(ClipboardPipeline).on("contentInsertion",(c,u)=>{isUnformattedInlineContent(u.content,n)&&n.change(d=>{const h=Array.from(l.getAttributes()).filter(([g])=>n.schema.getAttributeProperties(g).isFormatting);l.isCollapsed||n.deleteContent(l,{doNotAutoparagraph:!0}),h.push(...l.getAttributes());const f=d.createRangeIn(u.content);for(const g of f.getItems())for(const p of h)n.schema.checkAttribute(g,p[0])&&d.setAttribute(p[0],p[1],g)})})}}function isUnformattedInlineContent(s,o){let n=o.createRangeIn(s);if(s.childCount==1){const a=s.getChild(0);a.is("element")&&o.schema.isBlock(a)&&!o.schema.isObject(a)&&!o.schema.isLimit(a)&&(n=o.createRangeIn(a))}for(const a of n.getItems())if(!o.schema.isInline(a)||Array.from(a.getAttributeKeys()).find(c=>o.schema.getAttributeProperties(c).isFormatting))return!1;return!0}class Clipboard extends Plugin{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,DragDrop,PastePlainText]}init(){const o=this.editor,n=this.editor.t;o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Copy selected content"),keystroke:"CTRL+C"},{label:n("Paste content"),keystroke:"CTRL+V"},{label:n("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getNormalizedAndLocalizedLanguageDefinitions(s){const o=s.t,n=s.config.get("codeBlock.languages");for(const a of n)a.label==="Plain text"&&(a.label=o("Plain text")),a.class===void 0&&(a.class=`language-${a.language}`);return n}function getPropertyAssociation(s,o,n){const a={};for(const l of s)if(o==="class"){const c=l[o].split(" ").shift();a[c]=l[n]}else a[l[o]]=l[n];return a}function getLeadingWhiteSpaces(s){return s.data.match(/^(\s*)/)[0]}function rawSnippetTextToViewDocumentFragment(s,o){const n=s.createDocumentFragment(),a=o.split(`
`),l=a.reduce((c,u,d)=>(c.push(u),d<a.length-1&&c.push(s.createElement("br")),c),[]);return s.appendChild(l,n),n}function getIndentOutdentPositions(s){const o=s.document.selection,n=[];if(o.isCollapsed)return[o.anchor];const a=o.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:l}of a){let c=l.is("$textProxy")?l.textNode:l;const u=c.parent;if(!u.is("element","codeBlock")||c.is("element","softBreak"))continue;for(;c.previousSibling&&!c.previousSibling.is("element","softBreak");)c=c.previousSibling;const d=c.is("$text")?c.startOffset+getLeadingWhiteSpaces(c).length:c.startOffset,h=s.createPositionAt(u,d);n.every(f=>!f.isEqual(h))&&n.push(h)}return n}function isModelSelectionInCodeBlock(s){const o=first(s.getSelectedBlocks());return!!o&&o.is("element","codeBlock")}function canBeCodeBlock(s,o){return o.is("rootElement")||s.isLimit(o)?!1:s.checkChild(o.parent,"codeBlock")}function getCodeBlockAriaAnnouncement(s,o,n,a){const l=getPropertyAssociation(o,"language","label"),c=n.getAttribute("language");if(c in l){const u=l[c];return s(a==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",u)}return s(a==="enter"?"Entering code snippet":"Leaving code snippet")}function getTextNodeAtLineStart(s,o){for(s.textNode&&(s=o.createPositionBefore(s.textNode));s.nodeBefore&&!s.nodeBefore.is("element","softBreak");)s=o.createPositionBefore(s.nodeBefore);const n=s.nodeAfter;return n&&n.is("$text")?n:null}class CodeBlockCommand extends Command{constructor(n){super(n);E(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(n={}){const a=this.editor,l=a.model,c=l.document.selection,d=getNormalizedAndLocalizedLanguageDefinitions(a)[0],h=Array.from(c.getSelectedBlocks()),f=n.forceValue==null?!this.value:n.forceValue,g=getLanguage(n,this._lastLanguage,d.language);l.change(p=>{f?this._applyCodeBlock(p,h,g):this._removeCodeBlock(p,h)})}_getValue(){const n=this.editor.model.document.selection,a=first(n.getSelectedBlocks());return!!(a&&a.is("element","codeBlock"))?a.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const n=this.editor.model.document.selection,a=this.editor.model.schema,l=first(n.getSelectedBlocks());return l?canBeCodeBlock(a,l):!1}_applyCodeBlock(n,a,l){this._lastLanguage=l;const c=this.editor.model.schema,u=a.filter(d=>canBeCodeBlock(c,d));for(const d of u)n.rename(d,"codeBlock"),n.setAttribute("language",l,d),c.removeDisallowedAttributes([d],n),Array.from(d.getChildren()).filter(h=>!c.checkChild(d,h)).forEach(h=>n.remove(h));u.reverse().forEach((d,h)=>{const f=u[h+1];d.previousSibling===f&&(n.appendElement("softBreak",f),n.merge(n.createPositionBefore(d)))})}_removeCodeBlock(n,a){const l=a.filter(c=>c.is("element","codeBlock"));for(const c of l){const u=n.createRangeOn(c);for(const d of Array.from(u.getItems()).reverse())if(d.is("element","softBreak")&&d.parent.is("element","codeBlock")){const{position:h}=n.split(n.createPositionBefore(d)),f=h.nodeAfter;n.rename(f,"paragraph"),n.removeAttribute("language",f),n.remove(d)}n.rename(c,"paragraph"),n.removeAttribute("language",c)}}}function getLanguage(s,o,n){return s.language?s.language:s.usePreviousLanguageChoice&&o?o:n}class IndentCodeBlockCommand extends Command{constructor(n){super(n);E(this,"_indentSequence");this._indentSequence=n.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const a=this.editor.model;a.change(l=>{const c=getIndentOutdentPositions(a);for(const u of c){const d=l.createText(this._indentSequence);a.insertContent(d,u)}})}_checkEnabled(){return this._indentSequence?isModelSelectionInCodeBlock(this.editor.model.document.selection):!1}}class OutdentCodeBlockCommand extends Command{constructor(n){super(n);E(this,"_indentSequence");this._indentSequence=n.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const a=this.editor.model;a.change(()=>{const l=getIndentOutdentPositions(a);for(const c of l){const u=getLastOutdentableSequenceRange(a,c,this._indentSequence);u&&a.deleteContent(a.createSelection(u))}})}_checkEnabled(){if(!this._indentSequence)return!1;const n=this.editor.model;return isModelSelectionInCodeBlock(n.document.selection)?getIndentOutdentPositions(n).some(a=>getLastOutdentableSequenceRange(n,a,this._indentSequence)):!1}}function getLastOutdentableSequenceRange(s,o,n){const a=getTextNodeAtLineStart(o,s);if(!a)return null;const l=getLeadingWhiteSpaces(a),c=l.lastIndexOf(n);if(c+n.length!==l.length||c===-1)return null;const{parent:u,startOffset:d}=a;return s.createRange(s.createPositionAt(u,d+c),s.createPositionAt(u,d+c+n.length))}function modelToViewCodeBlockInsertion(s,o,n=!1){const a=getPropertyAssociation(o,"language","class"),l=getPropertyAssociation(o,"language","label");return(c,u,d)=>{const{writer:h,mapper:f,consumable:g}=d;if(!g.consume(u.item,"insert"))return;const p=u.item.getAttribute("language"),v=f.toViewPosition(s.createPositionBefore(u.item)),b={};n&&(b["data-language"]=l[p],b.spellcheck="false");const _=a[p]?{class:a[p]}:void 0,w=h.createContainerElement("code",_),x=h.createContainerElement("pre",b,w);h.insert(v,x),f.bindElements(u.item,w)}}function modelToDataViewSoftBreakInsertion(s){return(o,n,a)=>{if(n.item.parent.name!=="codeBlock")return;const{writer:l,mapper:c,consumable:u}=a;if(!u.consume(n.item,"insert"))return;const d=c.toViewPosition(s.createPositionBefore(n.item));l.insert(d,l.createText(`
`))}}function dataViewToModelCodeBlockInsertion(s,o){const n=getPropertyAssociation(o,"class","language"),a=o[0].language;return(l,c,u)=>{const d=c.viewItem,h=d.parent;if(!h||!h.is("element","pre")||c.modelCursor.findAncestor("codeBlock"))return;const{consumable:f,writer:g}=u;if(!f.test(d,{name:!0}))return;const p=g.createElement("codeBlock"),v=[...d.getClassNames()];v.length||v.push("");for(const b of v){const _=n[b];if(_){g.setAttribute("language",_,p);break}}p.hasAttribute("language")||g.setAttribute("language",a,p),u.convertChildren(d,p),u.safeInsert(p,c.modelCursor)&&(f.consume(d,{name:!0}),u.updateConversionResult(p,c))}}function dataViewToModelTextNewlinesInsertion(){return(s,o,{consumable:n,writer:a})=>{let l=o.modelCursor;if(!n.test(o.viewItem)||!l.findAncestor("codeBlock"))return;n.consume(o.viewItem);const u=o.viewItem.data.split(`
`).map(h=>a.createText(h)),d=u[u.length-1];for(const h of u)if(a.insert(h,l),l=l.getShiftedBy(h.offsetSize),h!==d){const f=a.createElement("softBreak");a.insert(f,l),l=a.createPositionAfter(f)}o.modelRange=a.createRange(o.modelCursor,l),o.modelCursor=l}}function dataViewToModelOrphanNodeConsumer(){return(s,o,{consumable:n})=>{const a=o.viewItem;if(a.findAncestor("pre"))return;const l=Array.from(a.getChildren()),c=l.find(u=>u.is("element","code"));if(c)for(const u of l)u===c||!u.is("$text")||n.consume(u,{name:!0})}}const DEFAULT_ELEMENT="paragraph";class CodeBlockEditing extends Plugin{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ShiftEnter]}constructor(o){super(o),o.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const o=this.editor,n=o.model.schema,a=o.model,l=o.editing.view,c=getNormalizedAndLocalizedLanguageDefinitions(o);o.commands.add("codeBlock",new CodeBlockCommand(o)),o.commands.add("indentCodeBlock",new IndentCodeBlockCommand(o)),o.commands.add("outdentCodeBlock",new OutdentCodeBlockCommand(o)),this.listenTo(l.document,"tab",(u,d)=>{const h=d.shiftKey?"outdentCodeBlock":"indentCodeBlock";o.commands.get(h).isEnabled&&(o.execute(h),d.stopPropagation(),d.preventDefault(),u.stop())},{context:"pre"}),n.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),n.addAttributeCheck((u,d)=>{const h=u.getItem(u.length-2);if(n.getAttributeProperties(d).isFormatting&&h&&h.name=="codeBlock")return!1}),o.editing.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(a,c,!0)),o.data.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(a,c)),o.data.downcastDispatcher.on("insert:softBreak",modelToDataViewSoftBreakInsertion(a),{priority:"high"}),o.data.upcastDispatcher.on("element:code",dataViewToModelCodeBlockInsertion(l,c)),o.data.upcastDispatcher.on("text",dataViewToModelTextNewlinesInsertion()),o.data.upcastDispatcher.on("element:pre",dataViewToModelOrphanNodeConsumer(),{priority:"high"}),this.listenTo(o.editing.view.document,"clipboardInput",(u,d)=>{let h=a.createRange(a.document.selection.anchor);if(d.targetRanges&&(h=o.editing.mapper.toModelRange(d.targetRanges[0])),!h.start.parent.is("element","codeBlock"))return;const f=d.dataTransfer.getData("text/plain"),g=new UpcastWriter(o.editing.view.document);d.content=rawSnippetTextToViewDocumentFragment(g,f)}),o.plugins.has("ClipboardPipeline")&&o.plugins.get(ClipboardPipeline).on("contentInsertion",(u,d)=>{const h=o.model,f=h.document.selection;f.anchor.parent.is("element","codeBlock")&&h.change(g=>{const p=g.createRangeIn(d.content);for(const v of[...p.getItems()])v.is("node")&&!n.checkChild(f.anchor,v)&&g.remove(v)})}),this.listenTo(a,"getSelectedContent",(u,[d])=>{const h=d.anchor;d.isCollapsed||!h.parent.is("element","codeBlock")||!h.hasSameParentAs(d.focus)||a.change(f=>{const g=u.return;if(h.parent.is("element")&&(g.childCount>1||d.containsEntireContent(h.parent))){const v=f.createElement("codeBlock",h.parent.getAttributes());f.append(g,v);const b=f.createDocumentFragment();f.append(v,b),u.return=b;return}const p=g.getChild(0);n.checkAttribute(p,"code")&&f.setAttribute("code",!0,p)})})}afterInit(){const o=this.editor,n=o.commands,a=n.get("indent"),l=n.get("outdent");a&&a.registerChildCommand(n.get("indentCodeBlock"),{priority:"highest"}),l&&l.registerChildCommand(n.get("outdentCodeBlock")),this.listenTo(o.editing.view.document,"enter",(c,u)=>{o.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!leaveBlockStartOnEnter(o,u.isSoft)&&!leaveBlockEndOnEnter(o,u.isSoft)&&breakLineOnEnter(o),u.preventDefault(),c.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:o,ui:n,t:a}=this.editor,l=getNormalizedAndLocalizedLanguageDefinitions(this.editor);let c=null;o.document.selection.on("change:range",()=>{const u=o.document.selection.focus.parent;!n||c===u||!u.is("element")||(c&&c.is("element","codeBlock")&&n.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(a,l,c,"leave")),u.is("element","codeBlock")&&n.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(a,l,u,"enter")),c=u)})}}function breakLineOnEnter(s){const o=s.model,n=o.document,a=n.selection.getLastPosition();let l;const c=getTextNodeAtLineStart(a,o);c&&c.is("$text")&&(l=getLeadingWhiteSpaces(c)),s.model.change(u=>{s.execute("shiftEnter"),l&&u.insertText(l,n.selection.anchor)})}function leaveBlockStartOnEnter(s,o){const a=s.model.document,l=s.editing.view,c=a.selection.getLastPosition(),u=c.nodeAfter;return o||!a.selection.isCollapsed||!c.isAtStart||!isSoftBreakNode(u)?!1:(s.model.change(d=>{s.execute("enter");const h=a.selection.anchor.parent.previousSibling;d.rename(h,DEFAULT_ELEMENT),d.setSelection(h,"in"),s.model.schema.removeDisallowedAttributes([h],d),d.remove(u)}),l.scrollToTheSelection(),!0)}function leaveBlockEndOnEnter(s,o){const n=s.model,a=n.document,l=s.editing.view,c=a.selection.getLastPosition(),u=c.nodeBefore;let d;if(o||!a.selection.isCollapsed||!c.isAtEnd||!u||!u.previousSibling)return!1;if(isSoftBreakNode(u)&&isSoftBreakNode(u.previousSibling))d=n.createRange(n.createPositionBefore(u.previousSibling),n.createPositionAfter(u));else if(isEmptyishTextNode(u)&&isSoftBreakNode(u.previousSibling)&&isSoftBreakNode(u.previousSibling.previousSibling))d=n.createRange(n.createPositionBefore(u.previousSibling.previousSibling),n.createPositionAfter(u));else if(isEmptyishTextNode(u)&&isSoftBreakNode(u.previousSibling)&&isEmptyishTextNode(u.previousSibling.previousSibling)&&u.previousSibling.previousSibling&&isSoftBreakNode(u.previousSibling.previousSibling.previousSibling))d=n.createRange(n.createPositionBefore(u.previousSibling.previousSibling.previousSibling),n.createPositionAfter(u));else return!1;return s.model.change(h=>{h.remove(d),s.execute("enter");const f=a.selection.anchor.parent;h.rename(f,DEFAULT_ELEMENT),s.model.schema.removeDisallowedAttributes([f],h)}),l.scrollToTheSelection(),!0}function isEmptyishTextNode(s){return s&&s.is("$text")&&!s.data.match(/\S/)}function isSoftBreakNode(s){return s&&s.is("element","softBreak")}class CodeBlockUI extends Plugin{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t,a=o.ui.componentFactory,l=getNormalizedAndLocalizedLanguageDefinitions(o),c=this._getLanguageListItemDefinitions(l),u=o.commands.get("codeBlock");a.add("codeBlock",d=>{const h=createDropdown(d,SplitButtonView),f=h.buttonView,g=n("Insert code block");return f.set({label:g,tooltip:!0,icon:icons.codeBlock,isToggleable:!0}),f.bind("isOn").to(u,"value",p=>!!p),f.on("execute",()=>{o.execute("codeBlock",{usePreviousLanguageChoice:!0}),o.editing.view.focus()}),h.on("execute",p=>{o.execute("codeBlock",{language:p.source._codeBlockLanguage,forceValue:!0}),o.editing.view.focus()}),h.class="ck-code-block-dropdown",h.bind("isEnabled").to(u),addListToDropdown(h,c,{role:"menu",ariaLabel:g}),h}),a.add("menuBar:codeBlock",d=>{const h=new MenuBarMenuView(d);h.buttonView.set({role:"menuitem",label:n("Code block"),icon:icons.codeBlock}),h.bind("isEnabled").to(u);const f=new MenuBarMenuListView(d);f.set({ariaLabel:n("Insert code block")});for(const g of c){const p=new MenuBarMenuListItemView(d,h),v=new MenuBarMenuListItemButtonView(d);v.bind(...Object.keys(g.model)).to(g.model),v.set({isToggleable:!0,role:"menuitemcheckbox"}),v.delegate("execute").to(h),v.on("execute",()=>{o.execute("codeBlock",{language:g.model._codeBlockLanguage,forceValue:u.value!=g.model._codeBlockLanguage}),o.editing.view.focus()}),p.children.add(v),f.items.add(p)}return h.panelView.children.add(f),h})}_getLanguageListItemDefinitions(o){const a=this.editor.commands.get("codeBlock"),l=new Collection;for(const c of o){const u={type:"button",model:new Model$1({_codeBlockLanguage:c.language,label:c.label,role:"menuitemradio",withText:!0})};u.model.bind("isOn").to(a,"value",d=>d===u.model._codeBlockLanguage),l.add(u)}return l}}class CodeBlock extends Plugin{static get requires(){return[CodeBlockEditing,CodeBlockUI]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClassicEditorUI extends EditorUI{constructor(n,a){super(n);E(this,"view");E(this,"_toolbarConfig");E(this,"_elementReplacer");this.view=a,this._toolbarConfig=normalizeToolbarConfig(n.config.get("toolbar")),this._elementReplacer=new ElementReplacer,this.listenTo(n.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(n){const a=this.editor,l=this.view,c=a.editing.view,u=l.editable,d=c.document.getRoot();u.name=d.rootName,l.render();const h=u.element;this.setEditableElement(u.name,h),l.editable.bind("isFocused").to(this.focusTracker),c.attachDomRoot(h),n&&this._elementReplacer.replace(n,this.element),this._initPlaceholder(),this._initToolbar(),l.menuBarView&&this._initMenuBar(l.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const n=this.view,a=this.editor.editing.view;this._elementReplacer.restore(),a.getDomRoot(n.editable.name)&&a.detachDomRoot(n.editable.name),n.destroy()}_initToolbar(){const n=this.view;n.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),n.stickyPanel.limiterElement=n.element,n.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:a})=>a||0),n.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(n.toolbar)}_initPlaceholder(){const n=this.editor,a=n.editing.view,l=a.document.getRoot(),c=n.sourceElement;let u;const d=n.config.get("placeholder");d&&(u=typeof d=="string"?d:d[this.view.editable.name]),!u&&c&&c.tagName.toLowerCase()==="textarea"&&(u=c.getAttribute("placeholder")),u&&(l.placeholder=u),enablePlaceholder({view:a,element:l,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:n}=this.view,a=this.editor.plugins.get("ContextualBalloon");a.on("getPositionOptions",c=>{const u=c.return;if(!u||!n.isSticky||!n.element)return;const d=new Rect$3(n.element).height,h=typeof u.target=="function"?u.target():u.target,f=typeof u.limiter=="function"?u.limiter():u.limiter;if(h&&f&&new Rect$3(h).height>=new Rect$3(f).height-d)return;const g={...u.viewportOffsetConfig},p=(g.top||0)+d;c.return={...u,viewportOffsetConfig:{...g,top:p}}},{priority:"low"});const l=()=>{a.visibleView&&a.updatePosition()};this.listenTo(n,"change:isSticky",l),this.listenTo(this.editor.ui,"change:viewportOffset",l)}_handleScrollToTheSelectionWithStickyPanel(n,a,l){const c=this.view.stickyPanel;if(c.isSticky){const u=new Rect$3(c.element).height;a.viewportOffset.top+=u}else{const u=()=>{this.editor.editing.view.scrollToTheSelection(l)};this.listenTo(c,"change:isSticky",u),setTimeout(()=>{this.stopListening(c,"change:isSticky",u)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const n=this.view.stickyPanel,a=this.editor.plugins.get("Dialog");a.on("show",()=>{const l=a.view;l.on("moveTo",(c,u)=>{if(!n.isSticky||l.wasMoved||l.isModal)return;const d=new Rect$3(n.contentPanelElement);u[1]<d.bottom+DialogView.defaultOffset&&(u[1]=d.bottom+DialogView.defaultOffset)},{priority:"high"})},{priority:"low"})}}class ClassicEditorUIView extends BoxedEditorUIView{constructor(n,a,l={}){super(n);E(this,"stickyPanel");E(this,"toolbar");E(this,"editable");this.stickyPanel=new StickyPanelView(n),this.toolbar=new ToolbarView(n,{shouldGroupWhenFull:l.shouldToolbarGroupWhenFull}),l.useMenuBar&&(this.menuBarView=new MenuBarView(n)),this.editable=new InlineEditableUIView(n,a,void 0,{label:l.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class ClassicEditor extends ElementApiMixin(Editor){constructor(n,a={}){if(!isElement(n)&&a.initialData!==void 0)throw new CKEditorError("editor-create-initial-data",null);super(a);E(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",getInitialData(n)),isElement(n)&&(this.sourceElement=n),this.model.document.createRoot();const l=!this.config.get("toolbar.shouldNotGroupWhenFull"),c=this.config.get("menuBar"),u=new ClassicEditorUIView(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:l,useMenuBar:c.isVisible,label:this.config.get("label")});this.ui=new ClassicEditorUI(this,u),attachToForm(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(n,a={}){return new Promise(l=>{const c=new this(n,a);l(c.initPlugins().then(()=>c.ui.init(isElement(n)?n:null)).then(()=>c.data.init(c.config.get("initialData"))).then(()=>c.fire("ready")).then(()=>c))})}}function getInitialData(s){return isElement(s)?getDataFromElement(s):s}function isElement(s){return isElement$2(s)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class SelectAllCommand extends Command{constructor(o){super(o),this.affectsData=!1}execute(){const o=this.editor.model,n=o.document.selection;let a=o.schema.getLimitElement(n);if(n.containsEntireContent(a)||!isSelectAllScope(o.schema,a))do if(a=a.parent,!a)return;while(!isSelectAllScope(o.schema,a));o.change(l=>{l.setSelection(a,"in")})}}function isSelectAllScope(s,o){return s.isLimit(o)&&(s.checkChild(o,"$text")||s.checkChild(o,"paragraph"))}const SELECT_ALL_KEYSTROKE=parseKeystroke("Ctrl+A");class SelectAllEditing extends Plugin{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t,l=o.editing.view.document;o.commands.add("selectAll",new SelectAllCommand(o)),this.listenTo(l,"keydown",(c,u)=>{getCode(u)===SELECT_ALL_KEYSTROKE&&(o.execute("selectAll"),u.preventDefault())}),o.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Select all"),keystroke:"CTRL+A"}]})}}var selectAllIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class SelectAllUI extends Plugin{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add("selectAll",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),o.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get("selectAll"),c=new o(n.locale),u=a.t;return c.set({label:u("Select all"),icon:selectAllIcon,keystroke:"Ctrl+A"}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute("selectAll"),n.editing.view.focus()}),c}}class SelectAll extends Plugin{static get requires(){return[SelectAllEditing,SelectAllUI]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BaseCommand extends Command{constructor(n){super(n);E(this,"_stack",[]);E(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(n.data,"set",(a,l)=>{l[1]={...l[1]};const c=l[1];c.batchType||(c.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(n.data,"set",(a,l)=>{l[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(n){const a=this.editor.model.document.selection,l={ranges:a.hasOwnRange?Array.from(a.getRanges()):[],isBackward:a.isBackward};this._stack.push({batch:n,selection:l}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(n,a,l){const c=this.editor.model,u=c.document,d=[],h=n.map(g=>g.getTransformedByOperations(l)),f=h.flat();for(const g of h){const p=g.filter(v=>v.root!=u.graveyard).filter(v=>!isRangeContainedByAnyOtherRange(v,f));p.length&&(normalizeRanges$1(p),d.push(p[0]))}d.length&&c.change(g=>{g.setSelection(d,{backward:a})})}_undo(n,a){const l=this.editor.model,c=l.document;this._createdBatches.add(a);const u=n.operations.slice().filter(d=>d.isDocumentOperation);u.reverse();for(const d of u){const h=d.baseVersion+1,f=Array.from(c.history.getOperations(h)),p=transformSets([d.getReversed()],f,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let v of p){const b=v.affectedSelectable;b&&!l.canEditAt(b)&&(v=new NoOperation(v.baseVersion)),a.addOperation(v),l.applyOperation(v),c.history.setOperationAsUndone(d,v)}}}}function normalizeRanges$1(s){s.sort((o,n)=>o.start.isBefore(n.start)?-1:1);for(let o=1;o<s.length;o++){const a=s[o-1].getJoined(s[o],!0);a&&(o--,s.splice(o,2,a))}}function isRangeContainedByAnyOtherRange(s,o){return o.some(n=>n!==s&&n.containsRange(s,!0))}class UndoCommand extends BaseCommand{execute(o=null){const n=o?this._stack.findIndex(c=>c.batch==o):this._stack.length-1,a=this._stack.splice(n,1)[0],l=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(l,()=>{this._undo(a.batch,l);const c=this.editor.model.document.history.getOperations(a.batch.baseVersion);this._restoreSelection(a.selection.ranges,a.selection.isBackward,c)}),this.fire("revert",a.batch,l),this.refresh()}}class RedoCommand extends BaseCommand{execute(){const o=this._stack.pop(),n=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(n,()=>{const l=o.batch.operations[o.batch.operations.length-1].baseVersion+1,c=this.editor.model.document.history.getOperations(l);this._restoreSelection(o.selection.ranges,o.selection.isBackward,c),this._undo(o.batch,n)}),this.refresh()}}class UndoEditing extends Plugin{constructor(){super(...arguments);E(this,"_undoCommand");E(this,"_redoCommand");E(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.t;this._undoCommand=new UndoCommand(n),this._redoCommand=new RedoCommand(n),n.commands.add("undo",this._undoCommand),n.commands.add("redo",this._redoCommand),this.listenTo(n.model,"applyOperation",(l,c)=>{const u=c[0];if(!u.isDocumentOperation)return;const d=u.batch,h=this._redoCommand.createdBatches.has(d),f=this._undoCommand.createdBatches.has(d);this._batchRegistry.has(d)||(this._batchRegistry.add(d),d.isUndoable&&(h?this._undoCommand.addBatch(d):f||(this._undoCommand.addBatch(d),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(l,c,u)=>{this._redoCommand.addBatch(u)}),n.keystrokes.set("CTRL+Z","undo"),n.keystrokes.set("CTRL+Y","redo"),n.keystrokes.set("CTRL+SHIFT+Z","redo"),n.accessibility.addKeystrokeInfos({keystrokes:[{label:a("Undo"),keystroke:"CTRL+Z"},{label:a("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class UndoUI extends Plugin{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale,a=o.t,l=n.uiLanguageDirection=="ltr"?icons.undo:icons.redo,c=n.uiLanguageDirection=="ltr"?icons.redo:icons.undo;this._addButtonsToFactory("undo",a("Undo"),"CTRL+Z",l),this._addButtonsToFactory("redo",a("Redo"),"CTRL+Y",c)}_addButtonsToFactory(o,n,a,l){const c=this.editor;c.ui.componentFactory.add(o,()=>{const u=this._createButton(ButtonView,o,n,a,l);return u.set({tooltip:!0}),u}),c.ui.componentFactory.add("menuBar:"+o,()=>this._createButton(MenuBarMenuListItemButtonView,o,n,a,l))}_createButton(o,n,a,l,c){const u=this.editor,d=u.locale,h=u.commands.get(n),f=new o(d);return f.set({label:a,icon:c,keystroke:l}),f.bind("isEnabled").to(h,"isEnabled"),this.listenTo(f,"execute",()=>{u.execute(n),u.editing.view.focus()}),f}}class Undo extends Plugin{static get requires(){return[UndoEditing,UndoUI]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Essentials extends Plugin{static get requires(){return[AccessibilityHelp,Clipboard,Enter,SelectAll,ShiftEnter,Typing,Undo]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FindAndReplaceFormView extends View$1{constructor(n){super(n);E(this,"children");E(this,"_findInputView");E(this,"_replaceInputView");E(this,"_findButtonView");E(this,"_findPrevButtonView");E(this,"_findNextButtonView");E(this,"_advancedOptionsCollapsibleView");E(this,"_matchCaseSwitchView");E(this,"_wholeWordsOnlySwitchView");E(this,"_replaceButtonView");E(this,"_replaceAllButtonView");E(this,"_inputsDivView");E(this,"_actionButtonsDivView");E(this,"_focusTracker");E(this,"_keystrokes");E(this,"_focusables");E(this,"focusCycler");const a=n.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(l,c)=>l>0&&!c),this._findInputView=this._createInputField(a("Find in text…")),this._findPrevButtonView=this._createButton({label:a("Previous result"),class:"ck-button-prev",icon:icons.previousArrow,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:a("Next result"),class:"ck-button-next",icon:icons.previousArrow,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(a("Replace with…"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:a("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:a("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:a("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new FocusTracker,this._keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(n){n===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const n=this.locale,a=n.t,l=new View$1(n);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:c})=>c),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:c})=>c),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:c},u)=>c&&u),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(c,u)=>c||!u?"":a("Tip: Find some text first in order to replace it.")),l.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),l}_onFindButtonExecute(){if(!this._textToFind){const n=this.t;this._findInputView.errorText=n("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const n=this.locale,a=n.t,l=this.bindTemplate,c=new View$1(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(d,h)=>a("%0 of %1",[d,h])),c.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",l.if("isDirty","ck-hidden")]},children:[{text:l.to("_resultsCounterText")}]});const u=()=>{const d=this._findInputView.fieldView.element;if(!d||!isVisible(d))return;const h=new Rect$3(c.element).width,f=n.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";h?d.style[f]=`calc( 2 * var(--ck-spacing-standard) + ${h}px )`:d.style[f]=""};this.on("change:_resultsCounterText",u,{priority:"low"}),this.on("change:isDirty",u,{priority:"low"}),this._findInputView.template.children[0].children.push(c)}_createAdvancedOptionsCollapsible(){const n=this.locale.t,a=new CollapsibleView(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return a.set({label:n("Advanced options"),isCollapsed:!0}),a}_createActionButtonsDiv(){const n=new View$1(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:a},l)=>a&&l),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:a},l)=>a&&l),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),n.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),n}_createMatchCaseSwitch(){const n=this.locale.t,a=new SwitchButtonView(this.locale);return a.set({label:n("Match case"),withText:!0}),a.bind("isOn").to(this,"_matchCase"),a.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),a}_createWholeWordsOnlySwitch(){const n=this.locale.t,a=new SwitchButtonView(this.locale);return a.set({label:n("Whole words only"),withText:!0}),a.bind("isOn").to(this,"_wholeWordsOnly"),a.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),a}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(a=>{this._focusables.add(a),this._focusTracker.add(a.element)})}_initKeystrokeHandling(){const n=l=>l.stopPropagation(),a=l=>{l.stopPropagation(),l.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",l=>{a(l),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",l=>{a(l),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",l=>{const c=l.target;c===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),a(l)):c===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),a(l))}),this._keystrokes.set("shift+enter",l=>{l.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),a(l))}),this._keystrokes.set("arrowright",n),this._keystrokes.set("arrowleft",n),this._keystrokes.set("arrowup",n),this._keystrokes.set("arrowdown",n)}_createButton(n){const a=new ButtonView(this.locale);return a.set(n),a}_createInputField(n,a){const l=new LabeledFieldView(this.locale,createLabeledInputText);return l.label=n,l.class=a,l}}var loupeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';class FindAndReplaceUI extends Plugin{constructor(n){super(n);E(this,"formView");n.config.define("findAndReplace.uiType","dialog"),this.formView=null}static get requires(){return[Dialog]}static get pluginName(){return"FindAndReplaceUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.config.get("findAndReplace.uiType")==="dropdown",l=n.commands.get("find"),c=this.editor.t;n.ui.componentFactory.add("findAndReplace",()=>{let u;return a?(u=this._createDropdown(),u.bind("isEnabled").to(l)):u=this._createDialogButtonForToolbar(),n.keystrokes.set("Ctrl+F",(d,h)=>{if(l.isEnabled){if(u instanceof DropdownView){const f=u.buttonView;f.isOn||f.fire("execute")}else u.isOn?n.plugins.get("Dialog").view.focus():u.fire("execute");h()}}),u}),a||n.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),n.accessibility.addKeystrokeInfos({keystrokes:[{label:c("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const n=this.editor,a=n.locale.t,l=createDropdown(n.locale);return l.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new FormHeaderView(n.locale,{label:a("Find and replace")}),0),l.panelView.children.add(this.formView)}),l.on("change:isOpen",(c,u,d)=>{d?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),l.buttonView.set({icon:loupeIcon,label:a("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),l}_createDialogButtonForToolbar(){const n=this.editor,a=this._createButton(ButtonView),l=n.plugins.get("Dialog");return a.set({tooltip:!0}),a.bind("isOn").to(l,"id",c=>c==="findAndReplace"),a.on("execute",()=>{a.isOn?l.hide():this._showDialog()}),a}_createDialogButtonForMenuBar(){const n=this._createButton(MenuBarMenuListItemButtonView),a=this.editor.plugins.get("Dialog"),l=this.editor.plugins.get("Dialog");return n.set({role:"menuitemcheckbox",isToggleable:!0}),n.bind("isOn").to(l,"id",c=>c==="findAndReplace"),n.on("execute",()=>{if(a.id==="findAndReplace"){a.hide();return}this._showDialog()}),n}_createButton(n){const a=this.editor,l=a.commands.get("find"),c=new n(a.locale),u=a.locale.t;return c.bind("isEnabled").to(l),c.set({icon:loupeIcon,label:u("Find and replace"),keystroke:"CTRL+F"}),c}_showDialog(){const n=this.editor,a=n.plugins.get("Dialog"),l=n.locale.t;this.formView||(this.formView=this._createFormView()),a.show({id:"findAndReplace",title:l("Find and replace"),content:this.formView,position:DialogViewPosition.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const n=this.editor,a=new(CssTransitionDisablerMixin(FindAndReplaceFormView))(n.locale),l=n.commands,u=this.editor.plugins.get("FindAndReplaceEditing").state;a.bind("highlightOffset").to(u,"highlightedOffset"),a.listenTo(u.results,"change",()=>{a.matchCount=u.results.length});const d=l.get("findNext"),h=l.get("findPrevious"),f=l.get("replace"),g=l.get("replaceAll");return a.bind("_areCommandsEnabled").to(d,"isEnabled",h,"isEnabled",f,"isEnabled",g,"isEnabled",(p,v,b,_)=>({findNext:p,findPrevious:v,replace:b,replaceAll:_})),a.delegate("findNext","findPrevious","replace","replaceAll").to(this),a.on("change:isDirty",(p,v,b)=>{b&&this.fire("searchReseted")}),a}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class FindCommand extends Command{constructor(n,a){super(n);E(this,"_state");this.isEnabled=!0,this.affectsData=!1,this._state=a}execute(n,{matchCase:a,wholeWords:l}={}){const{editor:c}=this,{model:u}=c,d=c.plugins.get("FindAndReplaceUtils");let h,f="";typeof n=="string"?h=(...v)=>({results:d.findByTextCallback(n,{matchCase:a,wholeWords:l})(...v),searchText:n}):h=n;const g=h;h=(...v)=>{const b=g(...v);return b&&"searchText"in b&&(f=b.searchText),b};const p=u.document.getRootNames().reduce((v,b)=>d.updateFindResultFromRange(u.createRangeIn(u.document.getRoot(b)),u,h,v),null);return this._state.clear(u),this._state.results.addMany(p),this._state.highlightedResult=p.get(0),this._state.searchText=f,h&&(this._state.lastSearchCallback=h),this._state.matchCase=!!a,this._state.matchWholeWords=!!l,{results:p,findCallback:h}}}class FindAndReplaceState extends ObservableMixin(){constructor(o){super(),this.set("results",new Collection),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(n,{removed:a,index:l})=>{if(Array.from(a).length){let c=!1;if(o.change(u=>{for(const d of a)this.highlightedResult===d&&(c=!0),o.markers.has(d.marker.name)&&u.removeMarker(d.marker)}),c){const u=l>=this.results.length?0:l;this.highlightedResult=this.results.get(u)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset(o)})}clear(o){this.searchText="",o.change(n=>{if(this.highlightedResult){const a=this.highlightedResult.marker.name.split(":")[1],l=o.markers.get(`findResultHighlighted:${a}`);l&&n.removeMarker(l)}[...this.results].forEach(({marker:a})=>{n.removeMarker(a)})}),this.results.clear()}refreshHighlightOffset(o){const{highlightedResult:n,results:a}=this;n?this.highlightedOffset=sortSearchResultsByMarkerPositions(o,[...a]).indexOf(n)+1:this.highlightedOffset=0}}function sortSearchResultsByMarkerPositions(s,o){const n={before:-1,same:0,after:1,different:1};return s.document.getRootNames().flatMap(a=>o.filter(l=>l.marker.getStart().root.rootName===a).sort((l,c)=>n[l.marker.getStart().compareWith(c.marker.getStart())]))}class ReplaceCommandBase extends Command{constructor(n,a){super(n);E(this,"_state");this.isEnabled=!0,this._state=a,this._isEnabledBasedOnSelection=!1}_replace(n,a){const{model:l}=this.editor,c=a.marker.getRange();l.canEditAt(c)&&l.change(u=>{if(c.root.rootName==="$graveyard"){this._state.results.remove(a);return}let d={};for(const h of c.getItems())if(h.is("$text")||h.is("$textProxy")){d=h.getAttributes();break}l.insertContent(u.createText(n,d),c),this._state.results.has(a)&&this._state.results.remove(a)})}}class ReplaceCommand extends ReplaceCommandBase{execute(o,n){const a=Math.max(this._state.highlightedOffset-1,0);if(this._replace(o,n),this._state.results.length){const l=sortSearchResultsByMarkerPositions(this.editor.model,[...this._state.results]);this._state.highlightedResult=l[a%l.length]}}}class ReplaceAllCommand extends ReplaceCommandBase{execute(o,n){const{editor:a}=this,{model:l}=a,c=a.plugins.get("FindAndReplaceUtils"),u=n instanceof Collection?n:l.document.getRootNames().reduce((d,h)=>c.updateFindResultFromRange(l.createRangeIn(l.document.getRoot(h)),l,c.findByTextCallback(n,this._state),d),null);u.length&&l.change(()=>{[...u].forEach(d=>{this._replace(o,d)})})}}class FindNextCommand extends Command{constructor(n,a){super(n);E(this,"_state");this.affectsData=!1,this._state=a,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const n=this._state.results,a=n.getIndex(this._state.highlightedResult),l=a+1>=n.length?0:a+1;this._state.highlightedResult=this._state.results.get(l)}}class FindPreviousCommand extends FindNextCommand{execute(){const n=this._state.results.getIndex(this._state.highlightedResult),a=n-1<0?this._state.results.length-1:n-1;this._state.highlightedResult=this._state.results.get(a)}}class FindAndReplaceUtils extends Plugin{static get pluginName(){return"FindAndReplaceUtils"}static get isOfficialPlugin(){return!0}updateFindResultFromRange(o,n,a,l){const c=l||new Collection,u=d=>c.find(h=>{const{marker:f}=h,g=f.getRange(),p=d.getRange();return g.isEqual(p)});return n.change(d=>{[...o].forEach(({type:h,item:f})=>{if(h==="elementStart"&&n.schema.checkChild(f,"$text")){let g=a({item:f,text:this.rangeToText(n.createRangeIn(f))});if(!g)return;"results"in g&&(g=g.results),g.forEach(p=>{const v=`findResult:${uid()}`,b=d.addMarker(v,{usingOperation:!1,affectsData:!1,range:d.createRange(d.createPositionAt(f,p.start),d.createPositionAt(f,p.end))}),_=findInsertIndex(c,b);u(b)||c.add({id:v,label:p.label,marker:b},_)})}})}),c}rangeToText(o){return Array.from(o.getItems({shallow:!0})).reduce((n,a)=>a.is("$text")||a.is("$textProxy")?n+a.data:`${n}
`,"")}findByTextCallback(o,n){let a="gu";n.matchCase||(a+="i");let l=`(${escapeRegExp(o)})`;if(n.wholeWords){const d="[^a-zA-ZÀ-ɏḀ-ỿ]";new RegExp("^"+d).test(o)||(l=`(^|${d}|_)${l}`),new RegExp(d+"$").test(o)||(l=`${l}(?=_|${d}|$)`)}const c=new RegExp(l,a);function u({text:d}){return[...d.matchAll(c)].map(regexpMatchToFindResult)}return u}}function findInsertIndex(s,o){const n=s.find(({marker:a})=>o.getStart().isBefore(a.getStart()));return n?s.getIndex(n):s.length}function regexpMatchToFindResult(s){const o=s.length-1;let n=s.index;return s.length===3&&(n+=s[1].length),{label:s[o],start:n,end:n+s[o].length}}const HIGHLIGHT_CLASS$1="ck-find-result_selected";class FindAndReplaceEditing extends Plugin{constructor(){super(...arguments);E(this,"state");E(this,"_onDocumentChange",()=>{const n=new Set,a=new Set,l=this.editor.model,{results:c}=this.state,u=l.document.differ.getChanges(),d=l.document.differ.getChangedMarkers();u.forEach(g=>{g.position&&(g.name==="$text"||g.position.nodeAfter&&l.schema.isInline(g.position.nodeAfter)?(n.add(g.position.parent),[...l.markers.getMarkersAtPosition(g.position)].forEach(p=>{a.add(p.name)})):g.type==="insert"&&g.position.nodeAfter&&n.add(g.position.nodeAfter))}),d.forEach(({name:g,data:{newRange:p}})=>{p&&p.start.root.rootName==="$graveyard"&&a.add(g)}),n.forEach(g=>{[...l.markers.getMarkersIntersectingRange(l.createRangeIn(g))].forEach(v=>a.add(v.name))}),a.forEach(g=>{c.has(g)&&(c.get(g)===this.state.highlightedResult&&(this.state.highlightedResult=null),c.remove(g))});const h=[],f=this.editor.plugins.get("FindAndReplaceUtils");n.forEach(g=>{const p=f.updateFindResultFromRange(l.createRangeOn(g),l,this.state.lastSearchCallback,c);h.push(...p)}),d.forEach(g=>{if(g.data.newRange){const p=f.updateFindResultFromRange(g.data.newRange,l,this.state.lastSearchCallback,c);h.push(...p)}}),!this.state.highlightedResult&&h.length?this.state.highlightedResult=h[0]:this.state.refreshHighlightOffset(l)})}static get requires(){return[FindAndReplaceUtils]}static get pluginName(){return"FindAndReplaceEditing"}static get isOfficialPlugin(){return!0}init(){this.state=new FindAndReplaceState(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(l,c,u,d)=>{const{model:h}=this.editor;h.change(f=>{if(d){const g=d.marker.name.split(":")[1],p=h.markers.get(`findResultHighlighted:${g}`);p&&f.removeMarker(p)}if(u){const g=u.marker.name.split(":")[1];f.addMarker(`findResultHighlighted:${g}`,{usingOperation:!1,affectsData:!1,range:u.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const a=debounce$1(((l,c,u)=>{if(u){const d=this.editor.editing.view.domConverter,h=this.editor.editing.mapper.toViewRange(u.marker.getRange());scrollViewportToShowTarget({target:d.viewRangeToDom(h),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",a,{priority:"low"}),this.listenTo(this.editor,"destroy",a.cancel),this.on("change:_isSearchActive",(l,c,u)=>{u?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(n,a){return this._isSearchActive=!0,this.editor.execute("find",n,a),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new FindCommand(this.editor,this.state)),this.editor.commands.add("findNext",new FindNextCommand(this.editor,this.state)),this.editor.commands.add("findPrevious",new FindPreviousCommand(this.editor,this.state)),this.editor.commands.add("replace",new ReplaceCommand(this.editor,this.state)),this.editor.commands.add("replaceAll",new ReplaceAllCommand(this.editor,this.state))}_defineConverters(){const{editor:n}=this;n.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:a})=>{const[,l]=a.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":l}}}}),n.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:a})=>{const[,l]=a.split(":");return{name:"span",classes:[HIGHLIGHT_CLASS$1],attributes:{"data-find-result":l}}}})}}class FindAndReplace extends Plugin{static get requires(){return[FindAndReplaceEditing,FindAndReplaceUI]}static get pluginName(){return"FindAndReplace"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.plugins.get("FindAndReplaceUI"),n=this.editor.plugins.get("FindAndReplaceEditing"),a=n.state;o.on("findNext",(l,c)=>{c?(a.searchText=c.searchText,n.find(c.searchText,c)):this.editor.execute("findNext")}),o.on("findPrevious",(l,c)=>{c&&a.searchText!==c.searchText?n.find(c.searchText):this.editor.execute("findPrevious")}),o.on("replace",(l,c)=>{a.searchText!==c.searchText&&n.find(c.searchText);const u=a.highlightedResult;u&&this.editor.execute("replace",c.replaceText,u)}),o.on("replaceAll",(l,c)=>{a.searchText!==c.searchText&&n.find(c.searchText),this.editor.execute("replaceAll",c.replaceText,a.results)}),o.on("searchReseted",()=>{a.clear(this.editor.model),n.stop()})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FontCommand extends Command{constructor(n,a){super(n);E(this,"attributeKey");this.attributeKey=a}refresh(){const n=this.editor.model,a=n.document;this.value=a.selection.getAttribute(this.attributeKey),this.isEnabled=n.schema.checkAttributeInSelection(a.selection,this.attributeKey)}execute(n={}){const a=this.editor.model,c=a.document.selection,u=n.value,d=n.batch,h=f=>{if(c.isCollapsed)u?f.setSelectionAttribute(this.attributeKey,u):f.removeSelectionAttribute(this.attributeKey);else{const g=a.schema.getValidRanges(c.getRanges(),this.attributeKey);for(const p of g)u?f.setAttribute(this.attributeKey,u,p):f.removeAttribute(this.attributeKey,p)}};d?a.enqueueChange(d,f=>{h(f)}):a.change(f=>{h(f)})}}const FONT_SIZE="fontSize",FONT_FAMILY="fontFamily",FONT_COLOR="fontColor",FONT_BACKGROUND_COLOR="fontBackgroundColor";function buildDefinition(s,o){const n={model:{key:s,values:[]},view:{},upcastAlso:{}};for(const a of o)n.model.values.push(a.model),n.view[a.model]=a.view,a.upcastAlso&&(n.upcastAlso[a.model]=a.upcastAlso);return n}function renderUpcastAttribute(s){return o=>normalizeColorCode(o.getStyle(s))}function renderDowncastElement(s){return(o,{writer:n})=>n.createAttributeElement("span",{style:`${s}:${o}`},{priority:7})}function addColorSelectorToDropdown({dropdownView:s,colors:o,columns:n,removeButtonLabel:a,colorPickerLabel:l,documentColorsLabel:c,documentColorsCount:u,colorPickerViewConfig:d}){const h=s.locale,f=new ColorSelectorView(h,{colors:o,columns:n,removeButtonLabel:a,colorPickerLabel:l,documentColorsLabel:c,documentColorsCount:u,colorPickerViewConfig:d});return s.colorSelectorView=f,s.panelView.children.add(f),f}function normalizeColorCode(s){return s.replace(/\s/g,"")}class FontFamilyCommand extends FontCommand{constructor(o){super(o,FONT_FAMILY)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeOptions$1(s){return s.map(getOptionDefinition$1).filter(o=>o!==void 0)}function getOptionDefinition$1(s){if(typeof s=="object")return s;if(s==="default")return{title:"Default",model:void 0};if(typeof s=="string")return generateFontPreset(s)}function generateFontPreset(s){const o=s.replace(/"|'/g,"").split(","),n=o[0],a=o.map(normalizeFontNameForCSS).join(", ");return{title:n,model:a,view:{name:"span",styles:{"font-family":a},priority:7}}}function normalizeFontNameForCSS(s){return s=s.trim(),s.indexOf(" ")>0&&(s=`'${s}'`),s}class FontFamilyEditing extends Plugin{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define(FONT_FAMILY,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const o=this.editor;o.model.schema.extend("$text",{allowAttributes:FONT_FAMILY}),o.model.schema.setAttributeProperties(FONT_FAMILY,{isFormatting:!0,copyOnEnter:!0});const n=normalizeOptions$1(o.config.get("fontFamily.options")).filter(l=>l.model),a=buildDefinition(FONT_FAMILY,n);o.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):o.conversion.attributeToElement(a),o.commands.add(FONT_FAMILY,new FontFamilyCommand(o))}_prepareAnyValueConverters(){const o=this.editor;o.conversion.for("downcast").attributeToElement({model:FONT_FAMILY,view:(n,{writer:a})=>a.createAttributeElement("span",{style:"font-family:"+n},{priority:7})}),o.conversion.for("upcast").elementToAttribute({model:{key:FONT_FAMILY,value:n=>n.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:FONT_FAMILY,value:n=>n.getAttribute("face")}})}}var fontFamilyIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class FontFamilyUI extends Plugin{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t,a=this._getLocalizedOptions(),l=o.commands.get(FONT_FAMILY),c=n("Font Family"),u=_prepareListOptions$1(a,l);o.ui.componentFactory.add(FONT_FAMILY,d=>{const h=createDropdown(d);return addListToDropdown(h,u,{role:"menu",ariaLabel:c}),h.buttonView.set({label:c,icon:fontFamilyIcon,tooltip:!0}),h.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),h.bind("isEnabled").to(l),this.listenTo(h,"execute",f=>{o.execute(f.source.commandName,{value:f.source.commandParam}),o.editing.view.focus()}),h}),o.ui.componentFactory.add(`menuBar:${FONT_FAMILY}`,d=>{const h=new MenuBarMenuView(d);h.buttonView.set({label:c,icon:fontFamilyIcon}),h.bind("isEnabled").to(l);const f=new MenuBarMenuListView(d);for(const g of u){const p=new MenuBarMenuListItemView(d,h),v=new MenuBarMenuListItemButtonView(d);v.set({role:"menuitemradio",isToggleable:!0}),v.bind(...Object.keys(g.model)).to(g.model),v.delegate("execute").to(h),v.on("execute",()=>{o.execute(g.model.commandName,{value:g.model.commandParam}),o.editing.view.focus()}),p.children.add(v),f.items.add(p)}return h.panelView.children.add(f),h})}_getLocalizedOptions(){const o=this.editor,n=o.t;return normalizeOptions$1(o.config.get(FONT_FAMILY).options).map(l=>(l.title==="Default"&&(l.title=n("Default")),l))}}function _prepareListOptions$1(s,o){const n=new Collection;for(const a of s){const l={type:"button",model:new Model$1({commandName:FONT_FAMILY,commandParam:a.model,label:a.title,role:"menuitemradio",withText:!0})};l.model.bind("isOn").to(o,"value",c=>c===a.model?!0:!c||!a.model?!1:c.split(",")[0].replace(/'/g,"").toLowerCase()===a.model.toLowerCase()),a.view&&typeof a.view!="string"&&a.view.styles&&l.model.set("labelStyle",`font-family: ${a.view.styles["font-family"]}`),n.add(l)}return n}class FontFamily extends Plugin{static get requires(){return[FontFamilyEditing,FontFamilyUI]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class FontSizeCommand extends FontCommand{constructor(o){super(o,FONT_SIZE)}}function normalizeOptions(s){return s.map(o=>getOptionDefinition(o)).filter(o=>o!==void 0)}const namedPresets={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function getOptionDefinition(s){if(typeof s=="number"&&(s=String(s)),typeof s=="object"&&isFullItemDefinition(s))return attachPriority(s);const o=findPreset(s);if(o)return attachPriority(o);if(s==="default")return{model:void 0,title:"Default"};if(!isNumericalDefinition(s))return generatePixelPreset(s)}function generatePixelPreset(s){return typeof s=="string"&&(s={title:s,model:`${parseFloat(s)}px`}),s.view={name:"span",styles:{"font-size":s.model}},attachPriority(s)}function attachPriority(s){return s.view&&typeof s.view!="string"&&!s.view.priority&&(s.view.priority=7),s}function findPreset(s){return typeof s=="string"?namedPresets[s]:namedPresets[s.model]}function isFullItemDefinition(s){return s.title&&s.model&&s.view}function isNumericalDefinition(s){let o;if(typeof s=="object")if(s.model)o=parseFloat(s.model);else throw new CKEditorError("font-size-invalid-definition",null,s);else o=parseFloat(s);return isNaN(o)}const styleFontSize=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class FontSizeEditing extends Plugin{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define(FONT_SIZE,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const o=this.editor;o.model.schema.extend("$text",{allowAttributes:FONT_SIZE}),o.model.schema.setAttributeProperties(FONT_SIZE,{isFormatting:!0,copyOnEnter:!0});const n=o.config.get("fontSize.supportAllValues"),a=normalizeOptions(this.editor.config.get("fontSize.options")).filter(c=>c.model),l=buildDefinition(FONT_SIZE,a);n?(this._prepareAnyValueConverters(l),this._prepareCompatibilityConverter()):o.conversion.attributeToElement(l),o.commands.add(FONT_SIZE,new FontSizeCommand(o))}_prepareAnyValueConverters(o){const n=this.editor,a=o.model.values.filter(l=>!isLength(String(l))&&!isPercentage(String(l)));if(a.length)throw new CKEditorError("font-size-invalid-use-of-named-presets",null,{presets:a});n.conversion.for("downcast").attributeToElement({model:FONT_SIZE,view:(l,{writer:c})=>{if(l)return c.createAttributeElement("span",{style:"font-size:"+l},{priority:7})}}),n.conversion.for("upcast").elementToAttribute({model:{key:FONT_SIZE,value:l=>l.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:FONT_SIZE,value:n=>{const a=n.getAttribute("size"),l=a[0]==="-"||a[0]==="+";let c=parseInt(a,10);l&&(c=3+c);const u=styleFontSize.length-1,d=Math.min(Math.max(c,0),u);return styleFontSize[d]}}})}}var fontSizeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class FontSizeUI extends Plugin{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t,a=this._getLocalizedOptions(),l=o.commands.get(FONT_SIZE),c=n("Font Size"),u=_prepareListOptions(a,l);o.ui.componentFactory.add(FONT_SIZE,d=>{const h=createDropdown(d);return addListToDropdown(h,u,{role:"menu",ariaLabel:c}),h.buttonView.set({label:c,icon:fontSizeIcon,tooltip:!0}),h.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),h.bind("isEnabled").to(l),this.listenTo(h,"execute",f=>{o.execute(f.source.commandName,{value:f.source.commandParam}),o.editing.view.focus()}),h}),o.ui.componentFactory.add(`menuBar:${FONT_SIZE}`,d=>{const h=new MenuBarMenuView(d);h.buttonView.set({label:c,icon:fontSizeIcon}),h.bind("isEnabled").to(l);const f=new MenuBarMenuListView(d);for(const g of u){const p=new MenuBarMenuListItemView(d,h),v=new MenuBarMenuListItemButtonView(d);v.set({role:"menuitemradio",isToggleable:!0}),v.bind(...Object.keys(g.model)).to(g.model),v.delegate("execute").to(h),v.on("execute",()=>{o.execute(g.model.commandName,{value:g.model.commandParam}),o.editing.view.focus()}),p.children.add(v),f.items.add(p)}return h.panelView.children.add(f),h})}_getLocalizedOptions(){const o=this.editor,n=o.t,a={Default:n("Default"),Tiny:n("Tiny"),Small:n("Small"),Big:n("Big"),Huge:n("Huge")};return normalizeOptions(o.config.get(FONT_SIZE).options).map(c=>{const u=a[c.title];return u&&u!=c.title&&(c=Object.assign({},c,{title:u})),c})}}function _prepareListOptions(s,o){const n=new Collection;for(const a of s){const l={type:"button",model:new Model$1({commandName:FONT_SIZE,commandParam:a.model,label:a.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};a.view&&typeof a.view!="string"&&(a.view.styles&&l.model.set("labelStyle",`font-size:${a.view.styles["font-size"]}`),a.view.classes&&l.model.set("class",`${l.model.class} ${a.view.classes}`)),l.model.bind("isOn").to(o,"value",c=>c===a.model),n.add(l)}return n}class FontSize extends Plugin{static get requires(){return[FontSizeEditing,FontSizeUI]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(o){return normalizeOptions(o)}}class FontColorCommand extends FontCommand{constructor(o){super(o,FONT_COLOR)}}class FontColorEditing extends Plugin{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define(FONT_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),o.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:FONT_COLOR,value:renderUpcastAttribute("color")}}),o.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:FONT_COLOR,value:n=>n.getAttribute("color")}}),o.conversion.for("downcast").attributeToElement({model:FONT_COLOR,view:renderDowncastElement("color")}),o.commands.add(FONT_COLOR,new FontColorCommand(o)),o.model.schema.extend("$text",{allowAttributes:FONT_COLOR}),o.model.schema.setAttributeProperties(FONT_COLOR,{isFormatting:!0,copyOnEnter:!0})}}class ColorUI extends Plugin{constructor(n,{commandName:a,componentName:l,icon:c,dropdownLabel:u}){super(n);E(this,"commandName");E(this,"componentName");E(this,"icon");E(this,"dropdownLabel");E(this,"columns");this.commandName=a,this.componentName=l,this.icon=c,this.dropdownLabel=u,this.columns=n.config.get(`${this.componentName}.columns`)}init(){const n=this.editor,a=n.locale,l=a.t,c=n.commands.get(this.commandName),u=n.config.get(this.componentName),d=normalizeColorOptions(u.colors),h=getLocalizedColorOptions(a,d),f=u.documentColors,g=u.colorPicker!==!1;n.ui.componentFactory.add(this.componentName,p=>{const v=createDropdown(p);let b=!1;const _=addColorSelectorToDropdown({dropdownView:v,colors:h.map(w=>({label:w.label,color:w.model,options:{hasBorder:w.hasBorder}})),columns:this.columns,removeButtonLabel:l("Remove color"),colorPickerLabel:l("Color picker"),documentColorsLabel:f!==0?l("Document colors"):"",documentColorsCount:f===void 0?this.columns:f,colorPickerViewConfig:g?u.colorPicker||{}:!1});return _.bind("selectedColor").to(c,"value"),v.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),v.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),v.bind("isEnabled").to(c),_.on("execute",(w,x)=>{v.isOpen&&n.execute(this.commandName,{value:x.value,batch:this._undoStepBatch}),x.source!=="colorPicker"&&n.editing.view.focus(),x.source==="colorPickerSaveButton"&&(v.isOpen=!1)}),_.on("colorPicker:show",()=>{this._undoStepBatch=n.model.createBatch()}),_.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(v.isOpen=!1,n.execute("undo",this._undoStepBatch)),n.editing.view.focus()}),v.on("change:isOpen",(w,x,S)=>{b||(b=!0,v.colorSelectorView.appendUI()),S&&(f!==0&&_.updateDocumentColors(n.model,this.componentName),_.updateSelectedColors(),_.showColorGridsFragment())}),focusChildOnDropdownOpen(v,()=>v.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(w=>w.isOn)),v}),n.ui.componentFactory.add(`menuBar:${this.componentName}`,p=>{const v=new MenuBarMenuView(p);v.buttonView.set({label:this.dropdownLabel,icon:this.icon}),v.bind("isEnabled").to(c);let b=!1;const _=new ColorSelectorView(p,{colors:h.map(w=>({label:w.label,color:w.model,options:{hasBorder:w.hasBorder}})),columns:this.columns,removeButtonLabel:l("Remove color"),colorPickerLabel:l("Color picker"),documentColorsLabel:f!==0?l("Document colors"):"",documentColorsCount:f===void 0?this.columns:f,colorPickerViewConfig:!1});return _.bind("selectedColor").to(c,"value"),_.delegate("execute").to(v),_.on("execute",(w,x)=>{n.execute(this.commandName,{value:x.value,batch:this._undoStepBatch}),n.editing.view.focus()}),v.on("change:isOpen",(w,x,S)=>{b||(b=!0,_.appendUI()),S&&(f!==0&&_.updateDocumentColors(n.model,this.componentName),_.updateSelectedColors(),_.showColorGridsFragment())}),v.panelView.children.add(_),v})}}var fontColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class FontColorUI extends ColorUI{constructor(o){const n=o.locale.t;super(o,{commandName:FONT_COLOR,componentName:FONT_COLOR,icon:fontColorIcon,dropdownLabel:n("Font Color")})}static get pluginName(){return"FontColorUI"}}class FontColor extends Plugin{static get requires(){return[FontColorEditing,FontColorUI]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class FontBackgroundColorCommand extends FontCommand{constructor(o){super(o,FONT_BACKGROUND_COLOR)}}class FontBackgroundColorEditing extends Plugin{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define(FONT_BACKGROUND_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),o.data.addStyleProcessorRules(addBackgroundRules),o.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:FONT_BACKGROUND_COLOR,value:renderUpcastAttribute("background-color")}}),o.conversion.for("downcast").attributeToElement({model:FONT_BACKGROUND_COLOR,view:renderDowncastElement("background-color")}),o.commands.add(FONT_BACKGROUND_COLOR,new FontBackgroundColorCommand(o)),o.model.schema.extend("$text",{allowAttributes:FONT_BACKGROUND_COLOR}),o.model.schema.setAttributeProperties(FONT_BACKGROUND_COLOR,{isFormatting:!0,copyOnEnter:!0})}}var fontBackgroundColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class FontBackgroundColorUI extends ColorUI{constructor(o){const n=o.locale.t;super(o,{commandName:FONT_BACKGROUND_COLOR,componentName:FONT_BACKGROUND_COLOR,icon:fontBackgroundColorIcon,dropdownLabel:n("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class FontBackgroundColor extends Plugin{static get requires(){return[FontBackgroundColorEditing,FontBackgroundColorUI]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ParagraphCommand extends Command{constructor(o){super(o),this._isEnabledBasedOnSelection=!1}refresh(){const o=this.editor.model,n=o.document,a=first(n.selection.getSelectedBlocks());this.value=!!a&&a.is("element","paragraph"),this.isEnabled=!!a&&checkCanBecomeParagraph(a,o.schema)}execute(o={}){const n=this.editor.model,a=n.document,l=o.selection||a.selection;n.canEditAt(l)&&n.change(c=>{const u=l.getSelectedBlocks();for(const d of u)!d.is("element","paragraph")&&checkCanBecomeParagraph(d,n.schema)&&c.rename(d,"paragraph")})}}function checkCanBecomeParagraph(s,o){return o.checkChild(s.parent,"paragraph")&&!o.isObject(s)}class InsertParagraphCommand extends Command{constructor(o){super(o),this._isEnabledBasedOnSelection=!1}execute(o){const n=this.editor.model,a=o.attributes;let l=o.position;return n.canEditAt(l)?n.change(c=>{if(l=this._findPositionToInsertParagraph(l,c),!l)return null;const u=c.createElement("paragraph");return a&&n.schema.setAllowedAttributes(u,a,c),n.insertContent(u,l),c.setSelection(u,"in"),c.createPositionAt(u,0)}):null}_findPositionToInsertParagraph(o,n){const a=this.editor.model;if(a.schema.checkChild(o,"paragraph"))return o;const l=a.schema.findAllowedParent(o,"paragraph");if(!l)return null;const c=o.parent,u=a.schema.checkChild(c,"$text");return c.isEmpty||u&&o.isAtEnd?a.createPositionAfter(c):!c.isEmpty&&u&&o.isAtStart?a.createPositionBefore(c):n.split(o,l).position}}const Kt=class Kt extends Plugin{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.model;o.commands.add("paragraph",new ParagraphCommand(o)),o.commands.add("insertParagraph",new InsertParagraphCommand(o)),n.schema.register("paragraph",{inheritAllFrom:"$block"}),o.conversion.elementToElement({model:"paragraph",view:"p"}),o.conversion.for("upcast").elementToElement({model:(a,{writer:l})=>!Kt.paragraphLikeElements.has(a.name)||a.isEmpty?null:l.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};E(Kt,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let Paragraph=Kt;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HeadingCommand extends Command{constructor(n,a){super(n);E(this,"modelElements");this.modelElements=a}refresh(){const n=first(this.editor.model.document.selection.getSelectedBlocks());this.value=!!n&&this.modelElements.includes(n.name)&&n.name,this.isEnabled=!!n&&this.modelElements.some(a=>checkCanBecomeHeading(n,a,this.editor.model.schema))}execute(n){const a=this.editor.model,l=a.document,c=n.value;a.change(u=>{const d=Array.from(l.selection.getSelectedBlocks()).filter(h=>checkCanBecomeHeading(h,c,a.schema));for(const h of d)h.is("element",c)||u.rename(h,c)})}}function checkCanBecomeHeading(s,o,n){return n.checkChild(s.parent,o)&&!n.isObject(s)}const defaultModelElement="paragraph";class HeadingEditing extends Plugin{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Paragraph]}init(){const o=this.editor,n=o.config.get("heading.options"),a=[];for(const l of n)l.model!=="paragraph"&&(o.model.schema.register(l.model,{inheritAllFrom:"$block"}),o.conversion.elementToElement(l),a.push(l.model));this._addDefaultH1Conversion(o),o.commands.add("heading",new HeadingCommand(o,a))}afterInit(){const o=this.editor,n=o.commands.get("enter"),a=o.config.get("heading.options");n&&this.listenTo(n,"afterExecute",(l,c)=>{const u=o.model.document.selection.getFirstPosition().parent;a.some(h=>u.is("element",h.model))&&!u.is("element",defaultModelElement)&&u.childCount===0&&c.writer.rename(u,defaultModelElement)})}_addDefaultH1Conversion(o){o.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:priorities.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedOptions(s){const o=s.t,n={Paragraph:o("Paragraph"),"Heading 1":o("Heading 1"),"Heading 2":o("Heading 2"),"Heading 3":o("Heading 3"),"Heading 4":o("Heading 4"),"Heading 5":o("Heading 5"),"Heading 6":o("Heading 6")};return s.config.get("heading.options").map(a=>{const l=n[a.title];return l&&l!=a.title&&(a.title=l),a})}class HeadingUI extends Plugin{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t,a=getLocalizedOptions(o),l=n("Choose heading"),c=n("Heading");o.ui.componentFactory.add("heading",u=>{const d={},h=new Collection,f=o.commands.get("heading"),g=o.commands.get("paragraph"),p=[f];for(const b of a){const _={type:"button",model:new Model$1({label:b.title,class:b.class,role:"menuitemradio",withText:!0})};b.model==="paragraph"?(_.model.bind("isOn").to(g,"value"),_.model.set("commandName","paragraph"),p.push(g)):(_.model.bind("isOn").to(f,"value",w=>w===b.model),_.model.set({commandName:"heading",commandValue:b.model})),h.add(_),d[b.model]=b.title}const v=createDropdown(u);return addListToDropdown(v,h,{ariaLabel:c,role:"menu"}),v.buttonView.set({ariaLabel:c,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:c}),v.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),v.bind("isEnabled").toMany(p,"isEnabled",(...b)=>b.some(_=>_)),v.buttonView.bind("label").to(f,"value",g,"value",(b,_)=>{const w=_?"paragraph":b;return typeof w=="boolean"||!d[w]?l:d[w]}),v.buttonView.bind("ariaLabel").to(f,"value",g,"value",(b,_)=>{const w=_?"paragraph":b;return typeof w=="boolean"||!d[w]?c:`${d[w]}, ${c}`}),this.listenTo(v,"execute",b=>{const{commandName:_,commandValue:w}=b.source;o.execute(_,w?{value:w}:void 0),o.editing.view.focus()}),v}),o.ui.componentFactory.add("menuBar:heading",u=>{const d=new MenuBarMenuView(u),h=o.commands.get("heading"),f=o.commands.get("paragraph"),g=[h],p=new MenuBarMenuListView(u);d.set({class:"ck-heading-dropdown"}),p.set({ariaLabel:n("Heading"),role:"menu"}),d.buttonView.set({label:n("Heading")}),d.panelView.children.add(p);for(const v of a){const b=new MenuBarMenuListItemView(u,d),_=new MenuBarMenuListItemButtonView(u);b.children.add(_),p.items.add(b),_.set({isToggleable:!0,label:v.title,role:"menuitemradio",class:v.class}),_.delegate("execute").to(d),_.on("execute",()=>{const w=v.model==="paragraph"?"paragraph":"heading";o.execute(w,{value:v.model}),o.editing.view.focus()}),v.model==="paragraph"?(_.bind("isOn").to(f,"value"),g.push(f)):_.bind("isOn").to(h,"value",w=>w===v.model)}return d.bind("isEnabled").toMany(g,"isEnabled",(...v)=>v.some(b=>b)),d})}}class Heading extends Plugin{static get requires(){return[HeadingEditing,HeadingUI]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightCommand extends Command{refresh(){const o=this.editor.model,n=o.document;this.value=n.selection.getAttribute("highlight"),this.isEnabled=o.schema.checkAttributeInSelection(n.selection,"highlight")}execute(o={}){const n=this.editor.model,l=n.document.selection,c=o.value;n.change(u=>{if(l.isCollapsed){const d=l.getFirstPosition();if(l.hasAttribute("highlight")){const h=v=>v.item.hasAttribute("highlight")&&v.item.getAttribute("highlight")===this.value,f=d.getLastMatchingPosition(h,{direction:"backward"}),g=d.getLastMatchingPosition(h),p=u.createRange(f,g);!c||this.value===c?(d.isEqual(g)||u.removeAttribute("highlight",p),u.removeSelectionAttribute("highlight")):(d.isEqual(g)||u.setAttribute("highlight",c,p),u.setSelectionAttribute("highlight",c))}else c&&u.setSelectionAttribute("highlight",c)}else{const d=n.schema.getValidRanges(l.getRanges(),"highlight");for(const h of d)c?u.setAttribute("highlight",c,h):u.removeAttribute("highlight",h)}})}}class HighlightEditing extends Plugin{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const o=this.editor;o.model.schema.extend("$text",{allowAttributes:"highlight"});const n=o.config.get("highlight.options");o.conversion.attributeToElement(_buildDefinition(n)),o.commands.add("highlight",new HighlightCommand(o))}}function _buildDefinition(s){const o={model:{key:"highlight",values:[]},view:{}};for(const n of s)o.model.values.push(n.model),o.view[n.model]={name:"mark",classes:n.class};return o}var markerIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',penIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';class HighlightUI extends Plugin{get localizedOptionTitles(){const o=this.editor.t;return{"Yellow marker":o("Yellow marker"),"Green marker":o("Green marker"),"Pink marker":o("Pink marker"),"Blue marker":o("Blue marker"),"Red pen":o("Red pen"),"Green pen":o("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.config.get("highlight.options");for(const n of o)this._addHighlighterButton(n);this._addRemoveHighlightButton(),this._addDropdown(o),this._addMenuBarButton(o)}_addRemoveHighlightButton(){const o=this.editor.t,n=this.editor.commands.get("highlight");this._addButton("removeHighlight",o("Remove highlight"),icons.eraser,null,a=>{a.bind("isEnabled").to(n,"isEnabled")})}_addHighlighterButton(o){const n=this.editor.commands.get("highlight");this._addButton("highlight:"+o.model,o.title,getIconForType(o.type),o.model,a);function a(l){l.bind("isEnabled").to(n,"isEnabled"),l.bind("isOn").to(n,"value",c=>c===o.model),l.iconView.fillColor=o.color,l.isToggleable=!0}}_addButton(o,n,a,l,c){const u=this.editor;u.ui.componentFactory.add(o,d=>{const h=new ButtonView(d),f=this.localizedOptionTitles[n]?this.localizedOptionTitles[n]:n;return h.set({label:f,icon:a,tooltip:!0}),h.on("execute",()=>{u.execute("highlight",{value:l}),u.editing.view.focus()}),c(h),h})}_addDropdown(o){const n=this.editor,a=n.t,l=n.ui.componentFactory,c=o[0],u=o.reduce((d,h)=>(d[h.model]=h,d),{});l.add("highlight",d=>{const h=n.commands.get("highlight"),f=createDropdown(d,SplitButtonView),g=f.buttonView;g.set({label:a("Highlight"),tooltip:!0,lastExecuted:c.model,commandValue:c.model,isToggleable:!0}),g.bind("icon").to(h,"value",b=>getIconForType(v(b,"type"))),g.bind("color").to(h,"value",b=>v(b,"color")),g.bind("commandValue").to(h,"value",b=>v(b,"model")),g.bind("isOn").to(h,"value",b=>!!b),g.delegate("execute").to(f);const p=()=>{const b=o.map(_=>{const w=l.create("highlight:"+_.model);return this.listenTo(w,"execute",()=>{f.buttonView.set({lastExecuted:_.model})}),w});return b.push(new ToolbarSeparatorView),b.push(l.create("removeHighlight")),b};f.bind("isEnabled").to(h,"isEnabled"),addToolbarToDropdown(f,p,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:a("Text highlight toolbar")}),bindToolbarIconStyleToActiveColor(f),g.on("execute",()=>{n.execute("highlight",{value:g.commandValue})}),this.listenTo(f,"execute",()=>{n.editing.view.focus()});function v(b,_){const w=!b||b===g.lastExecuted?g.lastExecuted:b;return u[w][_]}return f})}_addMenuBarButton(o){const n=this.editor,a=n.t,l=n.commands.get("highlight");n.ui.componentFactory.add("menuBar:highlight",c=>{const u=new MenuBarMenuView(c);u.buttonView.set({label:a("Highlight"),icon:getIconForType("marker")}),u.bind("isEnabled").to(l),u.buttonView.iconView.fillColor="transparent";const d=new MenuBarMenuListView(c);for(const g of o){const p=new MenuBarMenuListItemView(c,u),v=new MenuBarMenuListItemButtonView(c);v.set({label:g.title,icon:getIconForType(g.type),role:"menuitemradio",isToggleable:!0}),v.iconView.fillColor=g.color,v.delegate("execute").to(u),v.bind("isOn").to(l,"value",b=>b===g.model),v.on("execute",()=>{n.execute("highlight",{value:g.model}),n.editing.view.focus()}),p.children.add(v),d.items.add(p)}d.items.add(new ListSeparatorView(c));const h=new MenuBarMenuListItemView(c,u),f=new MenuBarMenuListItemButtonView(c);return f.set({label:a("Remove highlight"),icon:icons.eraser}),f.delegate("execute").to(u),f.on("execute",()=>{n.execute("highlight",{value:null}),n.editing.view.focus()}),h.children.add(f),d.items.add(h),u.panelView.children.add(d),u})}}function bindToolbarIconStyleToActiveColor(s){s.buttonView.actionView.iconView.bind("fillColor").to(s.buttonView,"color")}function getIconForType(s){return s==="marker"?markerIcon:penIcon}class Highlight extends Plugin{static get requires(){return[HighlightEditing,HighlightUI]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HorizontalLineCommand extends Command{refresh(){const o=this.editor.model,n=o.schema,a=o.document.selection;this.isEnabled=isHorizontalLineAllowedInParent(a,n,o)}execute(){const o=this.editor.model;o.change(n=>{const a=n.createElement("horizontalLine");o.insertObject(a,null,null,{setSelection:"after"})})}}function isHorizontalLineAllowedInParent(s,o,n){const a=getInsertHorizontalLineParent(s,n);return o.checkChild(a,"horizontalLine")}function getInsertHorizontalLineParent(s,o){const a=findOptimalInsertionRange(s,o).start.parent;return a.isEmpty&&!a.is("element","$root")?a.parent:a}class HorizontalLineEditing extends Plugin{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.model.schema,a=o.t,l=o.conversion;n.register("horizontalLine",{inheritAllFrom:"$blockObject"}),l.for("dataDowncast").elementToElement({model:"horizontalLine",view:(c,{writer:u})=>u.createEmptyElement("hr")}),l.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(c,{writer:u})=>{const d=a("Horizontal line"),h=u.createContainerElement("div",null,u.createEmptyElement("hr"));return u.addClass("ck-horizontal-line",h),u.setCustomProperty("hr",!0,h),toHorizontalLineWidget(h,u,d)}}),l.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),o.commands.add("horizontalLine",new HorizontalLineCommand(o))}}function toHorizontalLineWidget(s,o,n){return o.setCustomProperty("horizontalLine",!0,s),toWidget(s,o,{label:n})}class HorizontalLineUI extends Plugin{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add("horizontalLine",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),o.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get("horizontalLine"),c=new o(n.locale),u=a.t;return c.set({label:u("Horizontal line"),icon:icons.horizontalLine}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute("horizontalLine"),n.editing.view.focus()}),c}}class HorizontalLine extends Plugin{static get requires(){return[HorizontalLineEditing,HorizontalLineUI,Widget]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HtmlEmbedCommand extends Command{refresh(){const o=this.editor.model,n=o.schema,a=o.document.selection,l=getSelectedRawHtmlModelWidget(a);this.isEnabled=isHtmlEmbedAllowedInParent(a,n,o),this.value=l?l.getAttribute("value")||"":null}execute(o){const n=this.editor.model,a=n.document.selection;n.change(l=>{let c;this.value!==null?c=getSelectedRawHtmlModelWidget(a):(c=l.createElement("rawHtml"),n.insertObject(c,null,null,{setSelection:"on"})),l.setAttribute("value",o,c)})}}function isHtmlEmbedAllowedInParent(s,o,n){const a=getInsertHtmlEmbedParent(s,n);return o.checkChild(a,"rawHtml")}function getInsertHtmlEmbedParent(s,o){const a=findOptimalInsertionRange(s,o).start.parent;return a.isEmpty&&!a.is("rootElement")?a.parent:a}function getSelectedRawHtmlModelWidget(s){const o=s.getSelectedElement();return o&&o.is("element","rawHtml")?o:null}class HtmlEmbedEditing extends Plugin{constructor(n){super(n);E(this,"_widgetButtonViewReferences",new Set);n.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:a=>(logWarning("html-embed-provide-sanitize-function"),{html:a,hasChanged:!1})})}static get pluginName(){return"HtmlEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),n.commands.add("htmlEmbed",new HtmlEmbedCommand(n)),this._setupConversion()}_setupConversion(){const n=this.editor,a=n.t,l=n.editing.view,c=this._widgetButtonViewReferences,u=n.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const p of c){if(p.element&&p.element.isConnected)return;p.destroy(),c.delete(p)}},{priority:"lowest"}),n.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),n.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(p,{writer:v})=>v.createElement("rawHtml",{value:p.getCustomProperty("$rawContent")})}),n.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(p,{writer:v})=>v.createRawElement("div",{class:"raw-html-embed"},function(b){b.innerHTML=p.getAttribute("value")||""})}),n.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(p,{writer:v})=>{let b,_,w;const x=v.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(T){b=T,d({editor:n,domElement:T,state:_,props:w}),b.addEventListener("mousedown",()=>{if(_.isEditable){const R=n.model;R.document.selection.getSelectedElement()!==p&&R.change(M=>M.setSelection(p,"on"))}},!0)}),S={makeEditable(){_=Object.assign({},_,{isEditable:!0}),d({domElement:b,editor:n,state:_,props:w}),l.change(T=>{T.setAttribute("data-cke-ignore-events","true",x)}),b.querySelector("textarea").focus()},save(T){T!==_.getRawHtmlValue()?(n.execute("htmlEmbed",T),n.editing.view.focus()):this.cancel()},cancel(){_=Object.assign({},_,{isEditable:!1}),d({domElement:b,editor:n,state:_,props:w}),n.editing.view.focus(),l.change(T=>{T.removeAttribute("data-cke-ignore-events",x)})}};_={showPreviews:u.showPreviews,isEditable:!1,getRawHtmlValue:()=>p.getAttribute("value")||""},w={sanitizeHtml:u.sanitizeHtml,textareaPlaceholder:a("Paste raw HTML here..."),onEditClick(){S.makeEditable()},onSaveClick(T){S.save(T)},onCancelClick(){S.cancel()}};const C=v.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":a("HTML snippet"),dir:n.locale.uiLanguageDirection},x);return v.setCustomProperty("rawHtmlApi",S,C),v.setCustomProperty("rawHtml",!0,C),toWidget(C,v,{label:a("HTML snippet"),hasSelectionHandle:!0})}});function d({editor:p,domElement:v,state:b,props:_}){v.textContent="";const w=v.ownerDocument;let x;if(b.isEditable){const C={isDisabled:!1,placeholder:_.textareaPlaceholder};x=f({domDocument:w,state:b,props:C}),v.append(x)}else if(b.showPreviews){const C={sanitizeHtml:_.sanitizeHtml};v.append(g({domDocument:w,state:b,props:C,editor:p}))}else{const C={isDisabled:!0,placeholder:_.textareaPlaceholder};v.append(f({domDocument:w,state:b,props:C}))}const S={onEditClick:_.onEditClick,onSaveClick:()=>{_.onSaveClick(x.value)},onCancelClick:_.onCancelClick};v.prepend(h({editor:p,domDocument:w,state:b,props:S}))}function h({editor:p,domDocument:v,state:b,props:_}){const w=createElement$1(v,"div",{class:"raw-html-embed__buttons-wrapper"});if(b.isEditable){const x=createUIButton(p,"save",_.onSaveClick),S=createUIButton(p,"cancel",_.onCancelClick);w.append(x.element,S.element),c.add(x).add(S)}else{const x=createUIButton(p,"edit",_.onEditClick);w.append(x.element),c.add(x)}return w}function f({domDocument:p,state:v,props:b}){const _=createElement$1(p,"textarea",{placeholder:b.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return _.disabled=b.isDisabled,_.value=v.getRawHtmlValue(),_}function g({editor:p,domDocument:v,state:b,props:_}){const w=_.sanitizeHtml(b.getRawHtmlValue()),x=b.getRawHtmlValue().length>0?a("No preview available"):a("Empty snippet content"),S=createElement$1(v,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},x),C=createElement$1(v,"div",{class:"raw-html-embed__preview-content",dir:p.locale.contentLanguageDirection}),R=v.createRange().createContextualFragment(w.html);return C.appendChild(R),createElement$1(v,"div",{class:"raw-html-embed__preview"},[S,C])}}}function createUIButton(s,o,n){const{t:a}=s.locale,l=new ButtonView(s.locale),c=s.commands.get("htmlEmbed");return l.set({class:`raw-html-embed__${o}-button`,icon:icons.pencil,tooltip:!0,tooltipPosition:s.locale.uiLanguageDirection==="rtl"?"e":"w"}),l.render(),o==="edit"?(l.set({icon:icons.pencil,label:a("Edit source")}),l.bind("isEnabled").to(c)):o==="save"?(l.set({icon:icons.check,label:a("Save changes")}),l.bind("isEnabled").to(c)):l.set({icon:icons.cancel,label:a("Cancel")}),l.on("execute",n),l}class HtmlEmbedUI extends Plugin{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,a=o.locale.t;o.ui.componentFactory.add("htmlEmbed",()=>{const l=this._createButton(ButtonView);return l.set({tooltip:!0,label:a("Insert HTML")}),l}),o.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const l=this._createButton(MenuBarMenuListItemButtonView);return l.set({label:a("HTML snippet")}),l})}_createButton(o){const n=this.editor,a=n.commands.get("htmlEmbed"),l=new o(n.locale);return l.set({icon:icons.html}),l.bind("isEnabled").to(a,"isEnabled"),this.listenTo(l,"execute",()=>{n.execute("htmlEmbed"),n.editing.view.focus(),n.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),l}}class HtmlEmbed extends Plugin{static get requires(){return[HtmlEmbedEditing,HtmlEmbedUI,Widget]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function updateViewAttributes(s,o,n,a){o&&removeViewAttributes(s,o,a),n&&setViewAttributes(s,n,a)}function setViewAttributes(s,o,n){if(o.attributes)for(const[a,l]of Object.entries(o.attributes))s.setAttribute(a,l,n);o.styles&&s.setStyle(o.styles,n),o.classes&&s.addClass(o.classes,n)}function removeViewAttributes(s,o,n){if(o.attributes)for(const[a]of Object.entries(o.attributes))s.removeAttribute(a,n);if(o.styles)for(const a of Object.keys(o.styles))s.removeStyle(a,n);o.classes&&s.removeClass(o.classes,n)}function mergeViewElementAttributes(s,o){const n=cloneDeep(s);let a="attributes";for(a in o)a=="classes"?n[a]=Array.from(new Set([...s[a]||[],...o[a]])):n[a]={...s[a],...o[a]};return n}function modifyGhsAttribute(s,o,n,a,l){const c=o.getAttribute(n),u={};for(const d of["attributes","styles","classes"]){if(d!=a){c&&c[d]&&(u[d]=c[d]);continue}if(a=="classes"){const f=new Set(c&&c.classes||[]);l(f),f.size&&(u[d]=Array.from(f));continue}const h=new Map(Object.entries(c&&c[d]||{}));l(h),h.size&&(u[d]=Object.fromEntries(h))}Object.keys(u).length?o.is("documentSelection")?s.setSelectionAttribute(n,u):s.setAttribute(n,u,o):c&&(o.is("documentSelection")?s.removeSelectionAttribute(n):s.removeAttribute(n,o))}function toPascalCase(s){return startCase(s).replace(/ /g,"")}function getHtmlAttributeName(s){return`html${toPascalCase(s)}Attributes`}function viewToModelObjectConverter({model:s}){return(o,n)=>n.writer.createElement(s,{htmlContent:o.getCustomProperty("$rawContent")})}function toObjectWidgetConverter(s,{view:o,isInline:n}){const a=s.t;return(l,{writer:c})=>{const u=a("HTML object"),d=createObjectView(o,l,c),h=l.getAttribute(getHtmlAttributeName(o));c.addClass("html-object-embed__content",d),h&&setViewAttributes(c,h,d);const f=c.createContainerElement(n?"span":"div",{class:"html-object-embed","data-html-object-embed-label":u},d);return toWidget(f,c,{label:u})}}function createObjectView(s,o,n){return n.createRawElement(s,null,(a,l)=>{l.setContentOf(a,o.getAttribute("htmlContent"))})}function viewToAttributeInlineConverter({view:s,model:o,allowEmpty:n},a){return c=>{c.on(`element:${s}`,(u,d,h)=>{let f=a.processViewAttributes(d.viewItem,h);if(!(!f&&!h.consumable.test(d.viewItem,{name:!0}))){if(f=f||{},h.consumable.consume(d.viewItem,{name:!0}),d.modelRange||(d=Object.assign(d,h.convertChildren(d.viewItem,d.modelCursor))),n&&d.modelRange.isCollapsed&&Object.keys(f).length){const g=h.writer.createElement("htmlEmptyElement");if(!h.safeInsert(g,d.modelCursor))return;const p=h.getSplitParts(g);d.modelRange=h.writer.createRange(d.modelRange.start,h.writer.createPositionAfter(p[p.length-1])),h.updateConversionResult(g,d),l(g,f,h);return}for(const g of d.modelRange.getItems())l(g,f,h)}},{priority:"low"})};function l(c,u,d){if(d.schema.checkAttribute(c,o)){const h=c.getAttribute(o),f=mergeViewElementAttributes(u,h||{});d.writer.setAttribute(o,f,c)}}}function emptyInlineModelElementToViewConverter({model:s,view:o},n){return(a,{writer:l,consumable:c})=>{if(!a.hasAttribute(s))return null;const u=l.createContainerElement(o),d=a.getAttribute(s);return c.consume(a,`attribute:${s}`),setViewAttributes(l,d,u),u.getFillerOffset=()=>null,n?toWidget(u,l):u}}function attributeToViewInlineConverter({priority:s,view:o}){return(n,a)=>{if(!n)return;const{writer:l}=a,c=l.createAttributeElement(o,null,{priority:s});return setViewAttributes(l,n,c),c}}function viewToModelBlockAttributeConverter({view:s},o){return n=>{n.on(`element:${s}`,(a,l,c)=>{if(!l.modelRange||l.modelRange.isCollapsed)return;const u=o.processViewAttributes(l.viewItem,c);u&&c.writer.setAttribute(getHtmlAttributeName(l.viewItem.name),u,l.modelRange)},{priority:"low"})}}function modelToViewBlockAttributeConverter({view:s,model:o}){return n=>{n.on(`attribute:${getHtmlAttributeName(s)}:${o}`,(a,l,c)=>{if(!c.consumable.consume(l.item,a.name))return;const{attributeOldValue:u,attributeNewValue:d}=l,h=c.writer,f=c.mapper.toViewElement(l.item);updateViewAttributes(h,u,d,f)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var defaultConfig={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};class DataSchema extends Plugin{constructor(){super(...arguments);E(this,"_definitions",[])}static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const n of defaultConfig.block)this.registerBlockElement(n);for(const n of defaultConfig.inline)this.registerInlineElement(n)}registerBlockElement(n){this._definitions.push({...n,isBlock:!0})}registerInlineElement(n){this._definitions.push({...n,isInline:!0})}extendBlockElement(n){this._extendDefinition({...n,isBlock:!0})}extendInlineElement(n){this._extendDefinition({...n,isInline:!0})}getDefinitionsForView(n,a=!1){const l=new Set;for(const c of this._getMatchingViewDefinitions(n)){if(a)for(const u of this._getReferences(c.model))l.add(u);l.add(c)}return l}getDefinitionsForModel(n){return this._definitions.filter(a=>a.model==n)}_getMatchingViewDefinitions(n){return this._definitions.filter(a=>a.view&&testViewName(n,a.view))}*_getReferences(n){const a=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],l=this._definitions.filter(c=>c.model==n);for(const{modelSchema:c}of l)if(c)for(const u of a)for(const d of toArray$2(c[u]||[])){const h=this._definitions.filter(f=>f.model==d);for(const f of h)d!==n&&(yield*this._getReferences(f.model),yield f)}}_extendDefinition(n){const a=Array.from(this._definitions.entries()).filter(([,l])=>l.model==n.model);if(a.length==0){this._definitions.push(n);return}for(const[l,c]of a)this._definitions[l]=mergeWith({},c,n,(u,d)=>Array.isArray(u)?u.concat(d):void 0)}}function testViewName(s,o){return typeof s=="string"?s===o:s instanceof RegExp?s.test(o):!1}class DataFilter extends Plugin{constructor(n){super(n);E(this,"_dataSchema");E(this,"_allowedAttributes");E(this,"_disallowedAttributes");E(this,"_allowedElements");E(this,"_disallowedElements");E(this,"_dataInitialized");E(this,"_coupledAttributes");this._dataSchema=n.plugins.get("DataSchema"),this._allowedAttributes=new Matcher,this._disallowedAttributes=new Matcher,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[DataSchema,Widget]}loadAllowedConfig(n){for(const a of n){const l=a.name||/[\s\S]+/,c=splitRules(a);this.allowElement(l),c.forEach(u=>this.allowAttributes(u))}}loadDisallowedConfig(n){for(const a of n){const l=a.name||/[\s\S]+/,c=splitRules(a);c.length==0?this.disallowElement(l):c.forEach(u=>this.disallowAttributes(u))}}loadAllowedEmptyElementsConfig(n){for(const a of n)this.allowEmptyElement(a)}allowElement(n){for(const a of this._dataSchema.getDefinitionsForView(n,!0))this._addAllowedElement(a),this._coupledAttributes=null}disallowElement(n){for(const a of this._dataSchema.getDefinitionsForView(n,!1))this._disallowedElements.add(a.view)}allowEmptyElement(n){for(const a of this._dataSchema.getDefinitionsForView(n,!0))a.isInline&&this._dataSchema.extendInlineElement({...a,allowEmpty:!0})}allowAttributes(n){this._allowedAttributes.add(n)}disallowAttributes(n){this._disallowedAttributes.add(n)}processViewAttributes(n,a){const{consumable:l}=a;return matchAndConsumeAttributes(n,this._disallowedAttributes,l),prepareGHSAttribute(n,matchAndConsumeAttributes(n,this._allowedAttributes,l))}_addAllowedElement(n){if(!this._allowedElements.has(n)){if(this._allowedElements.add(n),"appliesToBlock"in n&&typeof n.appliesToBlock=="string")for(const a of this._dataSchema.getDefinitionsForModel(n.appliesToBlock))a.isBlock&&this._addAllowedElement(a);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(n)},{priority:priorities.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const n of this._allowedElements)this._fireRegisterEvent(n)},{priority:priorities.highest+1})}_registerElementHandlers(){this.on("register",(n,a)=>{const l=this.editor.model.schema;if(a.isObject&&!l.isRegistered(a.model))this._registerObjectElement(a);else if(a.isBlock)this._registerBlockElement(a);else if(a.isInline)this._registerInlineElement(a);else throw new CKEditorError("data-filter-invalid-definition",null,a);n.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const n=this.editor.model,a=n.document.selection;n.document.registerPostFixer(l=>{const c=n.document.differ.getChanges();let u=!1;const d=this._getCoupledAttributesMap();for(const h of c){if(h.type!="attribute"||h.attributeNewValue!==null)continue;const f=d.get(h.attributeKey);if(f)for(const{item:g}of h.range.getWalker())for(const p of f)g.hasAttribute(p)&&(l.removeAttribute(p,g),u=!0)}return u}),this.listenTo(a,"change:attribute",(l,{attributeKeys:c})=>{const u=new Set,d=this._getCoupledAttributesMap();for(const h of c){if(a.hasAttribute(h))continue;const f=d.get(h);if(f)for(const g of f)a.hasAttribute(g)&&u.add(g)}u.size!=0&&n.change(h=>{for(const f of u)h.removeSelectionAttribute(f)})})}_registerAssociatedHtmlAttributesPostFixer(){const n=this.editor.model;n.document.registerPostFixer(a=>{const l=n.document.differ.getChanges();let c=!1;for(const u of l)if(!(u.type!=="insert"||u.name==="$text"))for(const d of u.attributes.keys())!d.startsWith("html")||!d.endsWith("Attributes")||n.schema.checkAttribute(u.name,d)||(a.removeAttribute(d,u.position.nodeAfter),c=!0);return c})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const n of this._allowedElements)if(n.coupledAttribute&&n.model){const a=this._coupledAttributes.get(n.coupledAttribute);a?a.push(n.model):this._coupledAttributes.set(n.coupledAttribute,[n.model])}return this._coupledAttributes}_fireRegisterEvent(n){n.view&&this._disallowedElements.has(n.view)||this.fire(n.view?`register:${n.view}`:"register",n)}_registerObjectElement(n){const a=this.editor,l=a.model.schema,c=a.conversion,{view:u,model:d}=n;l.register(d,n.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */u&&(l.extend(n.model,{allowAttributes:[getHtmlAttributeName(u),"htmlContent"]}),a.data.registerRawContentMatcher({name:u}),c.for("upcast").elementToElement({view:u,model:viewToModelObjectConverter(n),converterPriority:priorities.low+2}),c.for("upcast").add(viewToModelBlockAttributeConverter(n,this)),c.for("editingDowncast").elementToStructure({model:{name:d,attributes:[getHtmlAttributeName(u)]},view:toObjectWidgetConverter(a,n)}),c.for("dataDowncast").elementToElement({model:d,view:(h,{writer:f})=>createObjectView(u,h,f)}),c.for("dataDowncast").add(modelToViewBlockAttributeConverter(n)))}_registerBlockElement(n){const a=this.editor,l=a.model.schema,c=a.conversion,{view:u,model:d}=n;if(!l.isRegistered(n.model)){if(!n.modelSchema||(l.register(n.model,n.modelSchema),!u))return;c.for("upcast").elementToElement({model:d,view:u,converterPriority:priorities.low+2}),c.for("downcast").elementToElement({model:d,view:(h,{writer:f})=>n.isEmpty?f.createEmptyElement(u):f.createContainerElement(u)})}u&&(l.extend(n.model,{allowAttributes:getHtmlAttributeName(u)}),c.for("upcast").add(viewToModelBlockAttributeConverter(n,this)),c.for("downcast").add(modelToViewBlockAttributeConverter(n)))}_registerInlineElement(n){const a=this.editor,l=a.model.schema,c=a.conversion,u=n.model;n.appliesToBlock||(l.extend("$text",{allowAttributes:u}),n.attributeProperties&&l.setAttributeProperties(u,n.attributeProperties),c.for("upcast").add(viewToAttributeInlineConverter(n,this)),c.for("downcast").attributeToElement({model:u,view:attributeToViewInlineConverter(n)}),n.allowEmpty&&(l.setAttributeProperties(u,{copyFromObject:!1}),l.isRegistered("htmlEmptyElement")||l.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),a.data.htmlProcessor.domConverter.registerInlineObjectMatcher(d=>d.name==n.view&&d.isEmpty&&Array.from(d.getAttributeKeys()).length?{name:!0}:null),c.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:emptyInlineModelElementToViewConverter(n,!0)}),c.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:emptyInlineModelElementToViewConverter(n)})))}}function matchAndConsumeAttributes(s,o,n){const a=o.matchAll(s)||[],l=s.document.stylesProcessor;return a.reduce((c,{match:u})=>{for(const[d,h]of u.attributes||[])if(d=="style"){const f=h,g=l.getRelatedStyles(f).filter(p=>p.split("-").length>f.split("-").length).sort((p,v)=>v.split("-").length-p.split("-").length);for(const p of g)n.consume(s,{styles:[p]})&&c.styles.push(p);n.consume(s,{styles:[f]})&&c.styles.push(f)}else if(d=="class"){const f=h;n.consume(s,{classes:[f]})&&c.classes.push(f)}else n.consume(s,{attributes:[d]})&&c.attributes.push(d);return c},{attributes:[],classes:[],styles:[]})}function prepareGHSAttribute(s,{attributes:o,classes:n,styles:a}){return!o.length&&!n.length&&!a.length?null:{...o.length&&{attributes:getAttributes(s,o)},...a.length&&{styles:getReducedStyles(s,a)},...n.length&&{classes:n}}}function getAttributes(s,o){const n={};for(const a of o){const l=s.getAttribute(a);l!==void 0&&isValidAttributeName(a)&&(n[a]=l)}return n}function getReducedStyles(s,o){const n=new StylesMap(s.document.stylesProcessor);for(const a of o){const l=s.getStyle(a);l!==void 0&&n.set(a,l)}return Object.fromEntries(n.getStylesEntries())}function splitPattern(s,o){const{name:n}=s,a=s[o];return isPlainObject$1(a)?Object.entries(a).map(([l,c])=>({name:n,[o]:{[l]:c}})):Array.isArray(a)?a.map(l=>({name:n,[o]:[l]})):[s]}function splitRules(s){const{name:o,attributes:n,classes:a,styles:l}=s,c=[];return n&&c.push(...splitPattern({name:o,attributes:n},"attributes")),a&&c.push(...splitPattern({name:o,classes:a},"classes")),l&&c.push(...splitPattern({name:o,styles:l},"styles")),c}class CodeBlockElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const o=this.editor.plugins.get(DataFilter);o.on("register:pre",(n,a)=>{if(a.model!=="codeBlock")return;const l=this.editor,c=l.model.schema,u=l.conversion;c.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),u.for("upcast").add(viewToModelCodeBlockAttributeConverter(o)),u.for("downcast").add(modelToViewCodeBlockAttributeConverter()),n.stop()})}}function viewToModelCodeBlockAttributeConverter(s){return o=>{o.on("element:code",(n,a,l)=>{const c=a.viewItem,u=c.parent;if(!u||!u.is("element","pre"))return;d(u,"htmlPreAttributes"),d(c,"htmlContentAttributes");function d(h,f){const g=s.processViewAttributes(h,l);g&&l.writer.setAttribute(f,g,a.modelRange)}},{priority:"low"})}}function modelToViewCodeBlockAttributeConverter(){return s=>{s.on("attribute:htmlPreAttributes:codeBlock",(o,n,a)=>{if(!a.consumable.consume(n.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=n,d=a.mapper.toViewElement(n.item).parent;updateViewAttributes(a.writer,l,c,d)}),s.on("attribute:htmlContentAttributes:codeBlock",(o,n,a)=>{if(!a.consumable.consume(n.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=n,u=a.mapper.toViewElement(n.item);updateViewAttributes(a.writer,l,c,u)})}}class DualContentModelElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(DataFilter).on("register",(n,a)=>{const l=a,c=this.editor,u=c.model.schema,d=c.conversion;if(!l.paragraphLikeModel||u.isRegistered(l.model)||u.isRegistered(l.paragraphLikeModel))return;const h={model:l.paragraphLikeModel,view:l.view};u.register(l.model,l.modelSchema),u.register(h.model,{inheritAllFrom:"$block"}),d.for("upcast").elementToElement({view:l.view,model:(f,{writer:g})=>this._hasBlockContent(f)?g.createElement(l.model):g.createElement(h.model),converterPriority:priorities.low+.5}),d.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),d.for("downcast").elementToElement({view:h.view,model:h.model}),this._addAttributeConversion(h),n.stop()})}_hasBlockContent(o){const n=this.editor.editing.view,a=n.domConverter.blockElements;for(const l of n.createRangeIn(o).getItems())if(l.is("element")&&a.includes(l.name))return!0;return!1}_addAttributeConversion(o){const n=this.editor,a=n.conversion,l=n.plugins.get(DataFilter);n.model.schema.extend(o.model,{allowAttributes:getHtmlAttributeName(o.view)}),a.for("upcast").add(viewToModelBlockAttributeConverter(o,l)),a.for("downcast").add(modelToViewBlockAttributeConverter(o))}}class HeadingElementSupport extends Plugin{static get requires(){return[DataSchema,Enter]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;if(!o.plugins.has("HeadingEditing"))return;const n=o.config.get("heading.options");this.registerHeadingElements(o,n)}registerHeadingElements(o,n){const a=o.plugins.get(DataSchema),l=[];for(const c of n)"model"in c&&"view"in c&&(a.registerBlockElement({view:c.view,model:c.model}),l.push(c.model));a.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:l}}),a.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:l}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getDescendantElement(s,o,n){const a=s.createRangeOn(o);for(const{item:l}of a.getWalker())if(l.is("element",n))return l}class ImageElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;if(!o.plugins.has("ImageInlineEditing")&&!o.plugins.has("ImageBlockEditing"))return;const n=o.model.schema,a=o.conversion,l=o.plugins.get(DataFilter);l.on("register:figure",()=>{a.for("upcast").add(viewToModelFigureAttributeConverter$1(l))}),l.on("register:img",(c,u)=>{u.model!=="imageBlock"&&u.model!=="imageInline"||(n.isRegistered("imageBlock")&&n.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),n.isRegistered("imageInline")&&n.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),a.for("upcast").add(viewToModelImageAttributeConverter(l)),a.for("downcast").add(modelToViewImageAttributeConverter()),o.plugins.has("LinkImage")&&a.for("upcast").add(viewToModelLinkImageAttributeConverter(l,o)),c.stop())})}}function viewToModelImageAttributeConverter(s){return o=>{o.on("element:img",(n,a,l)=>{if(!a.modelRange)return;const c=a.viewItem,u=s.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlImgAttributes",u,a.modelRange)},{priority:"low"})}}function viewToModelLinkImageAttributeConverter(s,o){const n=o.plugins.get("ImageUtils");return a=>{a.on("element:a",(l,c,u)=>{const d=c.viewItem;if(!n.findViewImgElement(d))return;const f=c.modelCursor.parent;if(!f.is("element","imageBlock"))return;const g=s.processViewAttributes(d,u);g&&u.writer.setAttribute("htmlLinkAttributes",g,f)},{priority:"low"})}}function viewToModelFigureAttributeConverter$1(s){return o=>{o.on("element:figure",(n,a,l)=>{const c=a.viewItem;if(!a.modelRange||!c.hasClass("image"))return;const u=s.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlFigureAttributes",u,a.modelRange)},{priority:"low"})}}function modelToViewImageAttributeConverter(){return s=>{o("htmlImgAttributes"),n("img","htmlImgAttributes"),n("figure","htmlFigureAttributes"),n("a","htmlLinkAttributes");function o(a){s.on(`attribute:${a}:imageInline`,(l,c,u)=>{if(!u.consumable.consume(c.item,l.name))return;const{attributeOldValue:d,attributeNewValue:h}=c,f=u.mapper.toViewElement(c.item);updateViewAttributes(u.writer,d,h,f)},{priority:"low"})}function n(a,l){s.on(`attribute:${l}:imageBlock`,(c,u,d)=>{if(!d.consumable.test(u.item,c.name))return;const{attributeOldValue:h,attributeNewValue:f}=u,g=d.mapper.toViewElement(u.item),p=getDescendantElement(d.writer,g,a);p&&(updateViewAttributes(d.writer,h,f,p),d.consumable.consume(u.item,c.name))},{priority:"low"}),a==="a"&&s.on("attribute:linkHref:imageBlock",(c,u,d)=>{if(!d.consumable.consume(u.item,"attribute:htmlLinkAttributes:imageBlock"))return;const h=d.mapper.toViewElement(u.item),f=getDescendantElement(d.writer,h,"a");setViewAttributes(d.writer,u.item.getAttribute("htmlLinkAttributes"),f)},{priority:"low"})}}}class MediaEmbedElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;if(!o.plugins.has("MediaEmbed")||o.config.get("mediaEmbed.previewsInData"))return;const n=o.model.schema,a=o.conversion,l=this.editor.plugins.get(DataFilter),c=this.editor.plugins.get(DataSchema),u=o.config.get("mediaEmbed.elementName");c.registerBlockElement({model:"media",view:u}),l.on("register:figure",()=>{a.for("upcast").add(viewToModelFigureAttributesConverter(l))}),l.on(`register:${u}`,(d,h)=>{h.model==="media"&&(n.extend("media",{allowAttributes:[getHtmlAttributeName(u),"htmlFigureAttributes"]}),a.for("upcast").add(viewToModelMediaAttributesConverter(l,u)),a.for("dataDowncast").add(modelToViewMediaAttributeConverter(u)),d.stop())})}}function viewToModelMediaAttributesConverter(s,o){const n=(a,l,c)=>{const u=l.viewItem;d(u,getHtmlAttributeName(o));function d(h,f){const g=s.processViewAttributes(h,c);g&&c.writer.setAttribute(f,g,l.modelRange)}};return a=>{a.on(`element:${o}`,n,{priority:"low"})}}function viewToModelFigureAttributesConverter(s){return o=>{o.on("element:figure",(n,a,l)=>{const c=a.viewItem;if(!a.modelRange||!c.hasClass("media"))return;const u=s.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlFigureAttributes",u,a.modelRange)},{priority:"low"})}}function modelToViewMediaAttributeConverter(s){return o=>{n(s,getHtmlAttributeName(s)),n("figure","htmlFigureAttributes");function n(a,l){o.on(`attribute:${l}:media`,(c,u,d)=>{if(!d.consumable.consume(u.item,c.name))return;const{attributeOldValue:h,attributeNewValue:f}=u,g=d.mapper.toViewElement(u.item),p=getDescendantElement(d.writer,g,a);updateViewAttributes(d.writer,h,f,p)})}}}class ScriptElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.plugins.get(DataFilter);o.on("register:script",(n,a)=>{const l=this.editor,c=l.model.schema,u=l.conversion;c.register("htmlScript",a.modelSchema),c.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),l.data.registerRawContentMatcher({name:"script"}),u.for("upcast").elementToElement({view:"script",model:viewToModelObjectConverter(a)}),u.for("upcast").add(viewToModelBlockAttributeConverter(a,o)),u.for("downcast").elementToElement({model:"htmlScript",view:(d,{writer:h})=>createObjectView("script",d,h)}),u.for("downcast").add(modelToViewBlockAttributeConverter(a)),n.stop()})}}class TableElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;if(!o.plugins.has("TableEditing"))return;const n=o.model.schema,a=o.conversion,l=o.plugins.get(DataFilter),c=o.plugins.get("TableUtils");l.on("register:figure",()=>{a.for("upcast").add(viewToModelFigureAttributeConverter(l))}),l.on("register:table",(u,d)=>{d.model==="table"&&(n.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),a.for("upcast").add(viewToModelTableAttributeConverter(l)),a.for("downcast").add(modelToViewTableAttributeConverter()),o.model.document.registerPostFixer(createHeadingRowsPostFixer(o.model,c)),u.stop())})}}function createHeadingRowsPostFixer(s,o){return n=>{const a=s.document.differ.getChanges();let l=!1;for(const c of a){if(c.type!="attribute"||c.attributeKey!="headingRows")continue;const u=c.range.start.nodeAfter,d=u.getAttribute("htmlTheadAttributes"),h=u.getAttribute("htmlTbodyAttributes");d&&!c.attributeNewValue?(n.removeAttribute("htmlTheadAttributes",u),l=!0):h&&c.attributeNewValue==o.getRows(u)&&(n.removeAttribute("htmlTbodyAttributes",u),l=!0)}return l}}function viewToModelTableAttributeConverter(s){return o=>{o.on("element:table",(n,a,l)=>{if(!a.modelRange)return;const c=a.viewItem;u(c,"htmlTableAttributes");for(const d of c.getChildren())d.is("element","thead")&&u(d,"htmlTheadAttributes"),d.is("element","tbody")&&u(d,"htmlTbodyAttributes");function u(d,h){const f=s.processViewAttributes(d,l);f&&l.writer.setAttribute(h,f,a.modelRange)}},{priority:"low"})}}function viewToModelFigureAttributeConverter(s){return o=>{o.on("element:figure",(n,a,l)=>{const c=a.viewItem;if(!a.modelRange||!c.hasClass("table"))return;const u=s.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlFigureAttributes",u,a.modelRange)},{priority:"low"})}}function modelToViewTableAttributeConverter(){return s=>{o("table","htmlTableAttributes"),o("figure","htmlFigureAttributes"),o("thead","htmlTheadAttributes"),o("tbody","htmlTbodyAttributes");function o(n,a){s.on(`attribute:${a}:table`,(l,c,u)=>{if(!u.consumable.test(c.item,l.name))return;const d=u.mapper.toViewElement(c.item),h=getDescendantElement(u.writer,d,n);h&&(u.consumable.consume(c.item,l.name),updateViewAttributes(u.writer,c.attributeOldValue,c.attributeNewValue,h))})}}}class StyleElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.plugins.get(DataFilter);o.on("register:style",(n,a)=>{const l=this.editor,c=l.model.schema,u=l.conversion;c.register("htmlStyle",a.modelSchema),c.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),l.data.registerRawContentMatcher({name:"style"}),u.for("upcast").elementToElement({view:"style",model:viewToModelObjectConverter(a)}),u.for("upcast").add(viewToModelBlockAttributeConverter(a,o)),u.for("downcast").elementToElement({model:"htmlStyle",view:(d,{writer:h})=>createObjectView("style",d,h)}),u.for("downcast").add(modelToViewBlockAttributeConverter(a)),n.stop()})}}class ListElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;if(!o.plugins.has("ListEditing"))return;const n=o.model.schema,a=o.conversion,l=o.plugins.get(DataFilter),c=o.plugins.get("ListEditing"),u=o.plugins.get("ListUtils"),d=["ul","ol","li"];c.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:setViewAttributes}),c.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:setViewAttributes}),c.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:setViewAttributes}),l.on("register",(h,f)=>{if(!d.includes(f.view)||(h.stop(),n.checkAttribute("$block","htmlLiAttributes")))return;const g=d.map(p=>getHtmlAttributeName(p));n.extend("$listItem",{allowAttributes:g}),a.for("upcast").add(p=>{p.on("element:ul",viewToModelListAttributeConverter("htmlUlAttributes",l),{priority:"low"}),p.on("element:ol",viewToModelListAttributeConverter("htmlOlAttributes",l),{priority:"low"}),p.on("element:li",viewToModelListAttributeConverter("htmlLiAttributes",l),{priority:"low"})})}),c.on("postFixer",(h,{listNodes:f,writer:g})=>{for(const{node:p,previousNodeInList:v}of f)if(v){if(v.getAttribute("listType")==p.getAttribute("listType")){const b=getAttributeFromListType(v.getAttribute("listType")),_=v.getAttribute(b);!isEqual$1(p.getAttribute(b),_)&&g.model.schema.checkAttribute(p,b)&&(g.setAttribute(b,_,p),h.return=!0)}if(v.getAttribute("listItemId")==p.getAttribute("listItemId")){const b=v.getAttribute("htmlLiAttributes");!isEqual$1(p.getAttribute("htmlLiAttributes"),b)&&g.model.schema.checkAttribute(p,"htmlLiAttributes")&&(g.setAttribute("htmlLiAttributes",b,p),h.return=!0)}}}),c.on("postFixer",(h,{listNodes:f,writer:g})=>{for(const{node:p}of f){const v=p.getAttribute("listType");!u.isNumberedListType(v)&&p.getAttribute("htmlOlAttributes")&&(g.removeAttribute("htmlOlAttributes",p),h.return=!0),u.isNumberedListType(v)&&p.getAttribute("htmlUlAttributes")&&(g.removeAttribute("htmlUlAttributes",p),h.return=!0)}})}afterInit(){const o=this.editor;if(!o.commands.get("indentList"))return;const n=o.commands.get("indentList");this.listenTo(n,"afterExecute",(a,l)=>{o.model.change(c=>{for(const u of l){const d=getAttributeFromListType(u.getAttribute("listType"));o.model.schema.checkAttribute(u,d)&&c.setAttribute(d,{},u)}})})}}function viewToModelListAttributeConverter(s,o){return(n,a,l)=>{const c=a.viewItem;a.modelRange||Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor));const u=o.processViewAttributes(c,l);for(const d of a.modelRange.getItems({shallow:!0}))d.hasAttribute("listItemId")&&(d.hasAttribute("htmlUlAttributes")||d.hasAttribute("htmlOlAttributes")||l.writer.model.schema.checkAttribute(d,s)&&l.writer.setAttribute(s,u||{},d))}}function getAttributeFromListType(s){return s==="numbered"||s=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}class HorizontalLineElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;if(!o.plugins.has("HorizontalLineEditing"))return;const n=o.model.schema,a=o.conversion,l=o.plugins.get(DataFilter);l.on("register:hr",(c,u)=>{u.model==="horizontalLine"&&(n.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),a.for("upcast").add(viewToModelBlockAttributeConverter(u,l)),a.for("downcast").add(modelToViewHorizontalLineAttributeConverter()),c.stop())})}}function modelToViewHorizontalLineAttributeConverter(){return s=>{s.on("attribute:htmlHrAttributes:horizontalLine",(o,n,a)=>{if(!a.consumable.test(n.item,o.name))return;const{attributeOldValue:l,attributeNewValue:c}=n,u=a.mapper.toViewElement(n.item),d=getDescendantElement(a.writer,u,"hr");d&&(updateViewAttributes(a.writer,l,c,d),a.consumable.consume(n.item,o.name))},{priority:"low"})}}class CustomElementSupport extends Plugin{static get requires(){return[DataFilter,DataSchema]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.plugins.get(DataFilter),n=this.editor.plugins.get(DataSchema);o.on("register:$customElement",(a,l)=>{a.stop();const c=this.editor,u=c.model.schema,d=c.conversion,h=c.editing.view.domConverter.unsafeElements,f=c.data.htmlProcessor.domConverter.preElements;u.register(l.model,l.modelSchema),u.extend(l.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),c.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),d.for("upcast").elementToElement({view:/.*/,model:(g,p)=>{if(g.name=="$comment"||!isValidElementName(g.name)||n.getDefinitionsForView(g.name).size)return null;h.includes(g.name)||h.push(g.name),f.includes(g.name)||f.push(g.name);const v=p.writer.createElement(l.model,{htmlElementName:g.name}),b=o.processViewAttributes(g,p);b&&p.writer.setAttribute("htmlCustomElementAttributes",b,v);let _;if(g.is("element","template")&&g.getCustomProperty("$rawContent"))_=g.getCustomProperty("$rawContent");else{const x=new UpcastWriter(g.document).createDocumentFragment(g),S=c.data.htmlProcessor.domConverter.viewToDom(x),C=S.firstChild;for(;C.firstChild;)S.appendChild(C.firstChild);C.remove(),_=c.data.htmlProcessor.htmlWriter.getHtml(S)}p.writer.setAttribute("htmlContent",_,v);for(const{item:w}of c.editing.view.createRangeIn(g))p.consumable.consume(w,{name:!0});return v},converterPriority:"low"}),d.for("editingDowncast").elementToElement({model:{name:l.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(g,{writer:p})=>{const v=g.getAttribute("htmlElementName"),b=p.createRawElement(v);return g.hasAttribute("htmlCustomElementAttributes")&&setViewAttributes(p,g.getAttribute("htmlCustomElementAttributes"),b),b}}),d.for("dataDowncast").elementToElement({model:{name:l.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(g,{writer:p})=>{const v=g.getAttribute("htmlElementName"),b=g.getAttribute("htmlContent"),_=p.createRawElement(v,null,(w,x)=>{x.setContentOf(w,b)});return g.hasAttribute("htmlCustomElementAttributes")&&setViewAttributes(p,g.getAttribute("htmlCustomElementAttributes"),_),_}})})}}function isValidElementName(s){try{document.createElement(s)}catch{return!1}return!0}class GeneralHtmlSupport extends Plugin{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[DataFilter,CodeBlockElementSupport,DualContentModelElementSupport,HeadingElementSupport,ImageElementSupport,MediaEmbedElementSupport,ScriptElementSupport,TableElementSupport,StyleElementSupport,ListElementSupport,HorizontalLineElementSupport,CustomElementSupport]}init(){const o=this.editor,n=o.plugins.get(DataFilter);n.loadAllowedEmptyElementsConfig(o.config.get("htmlSupport.allowEmpty")||[]),n.loadAllowedConfig(o.config.get("htmlSupport.allow")||[]),n.loadDisallowedConfig(o.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(o){const n=this.editor.plugins.get("DataSchema"),a=Array.from(n.getDefinitionsForView(o,!1)),l=a.find(c=>c.isInline&&!a[0].isObject);return l?l.model:getHtmlAttributeName(o)}addModelHtmlClass(o,n,a){const l=this.editor.model,c=this.getGhsAttributeNameForElement(o);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,a,c))modifyGhsAttribute(u,d,c,"classes",h=>{for(const f of toArray$2(n))h.add(f)})})}removeModelHtmlClass(o,n,a){const l=this.editor.model,c=this.getGhsAttributeNameForElement(o);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,a,c))modifyGhsAttribute(u,d,c,"classes",h=>{for(const f of toArray$2(n))h.delete(f)})})}setModelHtmlAttributes(o,n,a){const l=this.editor.model,c=this.getGhsAttributeNameForElement(o);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,a,c))modifyGhsAttribute(u,d,c,"attributes",h=>{for(const[f,g]of Object.entries(n))h.set(f,g)})})}removeModelHtmlAttributes(o,n,a){const l=this.editor.model,c=this.getGhsAttributeNameForElement(o);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,a,c))modifyGhsAttribute(u,d,c,"attributes",h=>{for(const f of toArray$2(n))h.delete(f)})})}setModelHtmlStyles(o,n,a){const l=this.editor.model,c=this.getGhsAttributeNameForElement(o);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,a,c))modifyGhsAttribute(u,d,c,"styles",h=>{for(const[f,g]of Object.entries(n))h.set(f,g)})})}removeModelHtmlStyles(o,n,a){const l=this.editor.model,c=this.getGhsAttributeNameForElement(o);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,a,c))modifyGhsAttribute(u,d,c,"styles",h=>{for(const f of toArray$2(n))h.delete(f)})})}}function*getItemsToUpdateGhsAttribute(s,o,n){if(o)if(!(Symbol.iterator in o)&&o.is("documentSelection")&&o.isCollapsed)s.schema.checkAttributeInSelection(o,n)&&(yield o);else for(const a of getValidRangesForSelectable(s,o,n))yield*a.getItems({shallow:!0})}function getValidRangesForSelectable(s,o,n){return!(Symbol.iterator in o)&&(o.is("node")||o.is("$text")||o.is("$textProxy"))?s.schema.checkAttribute(o,n)?[s.createRangeOn(o)]:[]:s.schema.getValidRanges(s.createSelection(o).getRanges(),n)}class HtmlComment extends Plugin{static get pluginName(){return"HtmlComment"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=new Map;o.data.processor.skipComments=!1,o.model.schema.addAttributeCheck((a,l)=>{if(a.endsWith("$root")&&l.startsWith("$comment"))return!0}),o.conversion.for("upcast").elementToMarker({view:"$comment",model:a=>{const c=`$comment:${uid()}`,u=a.getCustomProperty("$rawContent");return n.set(c,u),c}}),o.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(a,{writer:l})=>{let c;for(const f of this.editor.model.document.getRootNames())if(c=this.editor.model.document.getRoot(f),c.hasAttribute(a.markerName))break;const u=a.markerName,d=c.getAttribute(u),h=l.createUIElement("$comment");return l.setCustomProperty("$rawContent",d,h),h}}),o.model.document.registerPostFixer(a=>{let l=!1;const c=o.model.document.differ.getChangedMarkers().filter(u=>u.name.startsWith("$comment:"));for(const u of c){const{oldRange:d,newRange:h}=u.data;if(!(d&&h&&d.root==h.root)){if(d){const f=d.root;f.hasAttribute(u.name)&&(a.removeAttribute(u.name,f),l=!0)}if(h){const f=h.root;f.rootName=="$graveyard"?(a.removeMarker(u.name),l=!0):f.hasAttribute(u.name)||(a.setAttribute(u.name,n.get(u.name)||"",f),l=!0)}}}return l}),o.data.on("set",()=>{for(const a of o.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(a.name)},{priority:"high"}),o.model.on("deleteContent",(a,[l])=>{for(const c of l.getRanges()){const u=o.model.schema.getLimitElement(c),d=o.model.createPositionAt(u,0),h=o.model.createPositionAt(u,"end");let f;d.isTouching(c.start)&&h.isTouching(c.end)?f=this.getHtmlCommentsInRange(o.model.createRange(d,h)):f=this.getHtmlCommentsInRange(c,{skipBoundaries:!0});for(const g of f)this.removeHtmlComment(g)}},{priority:"high"})}createHtmlComment(o,n){const a=uid(),c=this.editor.model,u=c.document.getRoot(o.root.rootName),d=`$comment:${a}`;return c.change(h=>{const f=h.createRange(o);return h.addMarker(d,{usingOperation:!0,affectsData:!0,range:f}),h.setAttribute(d,n,u),d})}removeHtmlComment(o){const n=this.editor,a=n.model.markers.get(o);return a?(n.model.change(l=>{l.removeMarker(a)}),!0):!1}getHtmlCommentData(o){const a=this.editor.model.markers.get(o);if(!a)return null;let l="";for(const c of this.editor.model.document.getRoots())if(c.hasAttribute(o)){l=c.getAttribute(o);break}return{content:l,position:a.getStart()}}getHtmlCommentsInRange(o,{skipBoundaries:n=!1}={}){const a=!n;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter(c=>l(c,o)).map(c=>c.name);function l(c,u){const d=c.getRange().start;return(d.isAfter(u.start)||a&&d.isEqual(u.start))&&(d.isBefore(u.end)||a&&d.isEqual(u.end))}}}class HtmlPageDataProcessor extends HtmlDataProcessor{toView(o){if(!/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(o.trim().slice(0,1e4)))return super.toView(o);let n="",a="";o=o.trim().replace(/<\?xml\s[^?]*\?>/i,d=>(a=d,"")),o=o.trim().replace(/^<!DOCTYPE\s[^>]*?>/i,d=>(n=d,""));const l=this._toDom(o),c=this.domConverter.domToView(l,{skipComments:this.skipComments}),u=new UpcastWriter(c.document);return u.setCustomProperty("$fullPageDocument",l.ownerDocument.documentElement.outerHTML,c),n&&u.setCustomProperty("$fullPageDocType",n,c),a&&u.setCustomProperty("$fullPageXmlDeclaration",a,c),c}toData(o){let n=super.toData(o);const a=o.getCustomProperty("$fullPageDocument"),l=o.getCustomProperty("$fullPageDocType"),c=o.getCustomProperty("$fullPageXmlDeclaration");return a&&(n=a.replace(/<\/body\s*>/,n+"$&"),l&&(n=l+`
`+n),c&&(n=c+`
`+n)),n}}class FullPage extends Plugin{static get pluginName(){return"FullPage"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=["$fullPageDocument","$fullPageDocType","$fullPageXmlDeclaration"];o.data.processor=new HtmlPageDataProcessor(o.data.viewDocument),o.model.schema.extend("$root",{allowAttributes:n}),o.data.on("toModel",(a,[l])=>{const c=o.model.document.getRoot();o.model.change(u=>{for(const d of n){const h=l.getCustomProperty(d);h&&u.setAttribute(d,h,c)}})},{priority:"low"}),o.data.on("toView",(a,[l])=>{if(!l.is("rootElement"))return;const c=l,u=a.return;if(!c.hasAttribute("$fullPageDocument"))return;const d=new UpcastWriter(u.document);for(const h of n){const f=c.getAttribute(h);f&&d.setCustomProperty(h,f,u)}},{priority:"low"}),o.data.on("set",()=>{const a=o.model.document.getRoot();o.model.change(l=>{for(const c of n)a.hasAttribute(c)&&l.removeAttribute(c,a)})},{priority:"high"}),o.data.on("get",(a,l)=>{l[0]||(l[0]={}),l[0].trim=!1},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createInlineImageViewElement(s){return s.createContainerElement("span",{class:"image-inline"},s.createEmptyElement("img"))}function createBlockImageViewElement(s){return s.createContainerElement("figure",{class:"image"},[s.createEmptyElement("img"),s.createSlot("children")])}function getImgViewElementMatcher(s,o){const n=s.plugins.get("ImageUtils"),a=s.plugins.has("ImageInlineEditing")&&s.plugins.has("ImageBlockEditing");return c=>n.isInlineImageView(c)?a&&(c.getStyle("display")=="block"||c.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline")!==o?null:l(c):null;function l(c){const u={name:!0};return c.hasAttribute("src")&&(u.attributes=["src"]),u}}function determineImageTypeForInsertionAtSelection(s,o){const n=first(o.getSelectedBlocks());return!n||s.isObject(n)||n.isEmpty&&n.name!="listItem"?"imageBlock":"imageInline"}function getSizeValueIfInPx(s){return s&&s.endsWith("px")?parseInt(s):null}function widthAndHeightStylesAreBothSet(s){const o=getSizeValueIfInPx(s.getStyle("width")),n=getSizeValueIfInPx(s.getStyle("height"));return!!(o&&n)}const IMAGE_WIDGETS_CLASSES_MATCH_REGEXP=/^(image|image-inline)$/;class ImageUtils extends Plugin{constructor(){super(...arguments);E(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(n){return this.isInlineImage(n)||this.isBlockImage(n)}isInlineImageView(n){return!!n&&n.is("element","img")}isBlockImageView(n){return!!n&&n.is("element","figure")&&n.hasClass("image")}insertImage(n={},a=null,l=null,c={}){const u=this.editor,d=u.model,h=d.document.selection,f=determineImageTypeForInsertion(u,a||h,l);n={...Object.fromEntries(h.getAttributes()),...n};for(const g in n)d.schema.checkAttribute(f,g)||delete n[g];return d.change(g=>{const{setImageSizes:p=!0}=c,v=g.createElement(f,n);return d.insertObject(v,a,null,{setSelection:"on",findOptimalPosition:!a&&f!="imageInline"?"auto":void 0}),v.parent?(p&&this.setImageNaturalSizeAttributes(v),v):null})}setImageNaturalSizeAttributes(n){const a=n.getAttribute("src");a&&(n.getAttribute("width")||n.getAttribute("height")||this.editor.model.change(l=>{const c=new global$1.window.Image;this._domEmitter.listenTo(c,"load",()=>{!n.getAttribute("width")&&!n.getAttribute("height")&&this.editor.model.enqueueChange(l.batch,u=>{u.setAttribute("width",c.naturalWidth,n),u.setAttribute("height",c.naturalHeight,n)}),this._domEmitter.stopListening(c,"load")}),c.src=a}))}getClosestSelectedImageWidget(n){const a=n.getFirstPosition();if(!a)return null;const l=n.getSelectedElement();if(l&&this.isImageWidget(l))return l;let c=a.parent;for(;c;){if(c.is("element")&&this.isImageWidget(c))return c;c=c.parent}return null}getClosestSelectedImageElement(n){const a=n.getSelectedElement();return this.isImage(a)?a:n.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(n){return n.findAncestor({classes:IMAGE_WIDGETS_CLASSES_MATCH_REGEXP})}isImageAllowed(){const a=this.editor.model.document.selection;return isImageAllowedInParent(this.editor,a)&&isNotInsideImage(a)}toImageWidget(n,a,l){return a.setCustomProperty("image",!0,n),toWidget(n,a,{label:()=>{const d=this.findViewImgElement(n).getAttribute("alt");return d?`${d} ${l}`:l}})}isImageWidget(n){return!!n.getCustomProperty("image")&&isWidget(n)}isBlockImage(n){return!!n&&n.is("element","imageBlock")}isInlineImage(n){return!!n&&n.is("element","imageInline")}findViewImgElement(n){if(this.isInlineImageView(n))return n;const a=this.editor.editing.view;for(const{item:l}of a.createRangeIn(n))if(this.isInlineImageView(l))return l}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function isImageAllowedInParent(s,o){if(determineImageTypeForInsertion(s,o,null)=="imageBlock"){const a=getInsertImageParent(o,s.model);if(s.model.schema.checkChild(a,"imageBlock"))return!0}else if(s.model.schema.checkChild(o.focus,"imageInline"))return!0;return!1}function isNotInsideImage(s){return[...s.focus.getAncestors()].every(o=>!o.is("element","imageBlock"))}function getInsertImageParent(s,o){const a=findOptimalInsertionRange(s,o).start.parent;return a.isEmpty&&!a.is("element","$root")?a.parent:a}function determineImageTypeForInsertion(s,o,n){const a=s.model.schema,l=s.config.get("image.insert.type");return s.plugins.has("ImageBlockEditing")?s.plugins.has("ImageInlineEditing")?n||(l==="inline"?"imageInline":l!=="auto"?"imageBlock":o.is("selection")?determineImageTypeForInsertionAtSelection(a,o):a.checkChild(o,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const IMAGE_URL_REGEXP=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class AutoImage extends Plugin{constructor(n){super(n);E(this,"_timeoutId");E(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Clipboard,ImageUtils,Undo,Delete]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model.document,l=n.plugins.get("ClipboardPipeline");this.listenTo(l,"inputTransformation",()=>{const c=a.selection.getFirstRange(),u=LivePosition.fromPosition(c.start);u.stickiness="toPrevious";const d=LivePosition.fromPosition(c.end);d.stickiness="toNext",a.once("change:data",()=>{this._embedImageBetweenPositions(u,d),u.detach(),d.detach()},{priority:"high"})}),n.commands.get("undo").on("execute",()=>{this._timeoutId&&(global$1.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(n,a){const l=this.editor,c=new LiveRange(n,a),u=c.getWalker({ignoreElementEnd:!0}),d=Object.fromEntries(l.model.document.selection.getAttributes()),h=this.editor.plugins.get("ImageUtils");let f="";for(const g of u)g.item.is("$textProxy")&&(f+=g.item.data);if(f=f.trim(),!f.match(IMAGE_URL_REGEXP)){c.detach();return}this._positionToInsert=LivePosition.fromPosition(n),this._timeoutId=setTimeout(()=>{if(!l.commands.get("insertImage").isEnabled){c.detach();return}l.model.change(v=>{this._timeoutId=null,v.remove(c),c.detach();let b;this._positionToInsert.root.rootName!=="$graveyard"&&(b=this._positionToInsert.toPosition()),h.insertImage({...d,src:f},b),this._positionToInsert.detach(),this._positionToInsert=null}),l.plugins.get("Delete").requestUndoOnBackspace()},100)}}class ImageTextAlternativeCommand extends Command{refresh(){const a=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!a,this.isEnabled&&a.hasAttribute("alt")?this.value=a.getAttribute("alt"):this.value=!1}execute(o){const n=this.editor,a=n.plugins.get("ImageUtils"),l=n.model,c=a.getClosestSelectedImageElement(l.document.selection);l.change(u=>{u.setAttribute("alt",o.newValue,c)})}}class ImageTextAlternativeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new ImageTextAlternativeCommand(this.editor))}}class TextAlternativeFormView extends View$1{constructor(n){super(n);E(this,"focusTracker");E(this,"keystrokes");E(this,"labeledInput");E(this,"saveButtonView");E(this,"cancelButtonView");E(this,"_focusables");E(this,"_focusCycler");const a=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(a("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(a("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(n,a,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:a,tooltip:!0}),u.extendTemplate({attributes:{class:l}}),c&&u.delegate("execute").to(this,c),u}_createLabeledInputView(){const n=this.locale.t,a=new LabeledFieldView(this.locale,createLabeledInputText);return a.label=n("Text alternative"),a}}function repositionContextualBalloon$1(s){const o=s.plugins.get("ContextualBalloon");if(s.plugins.get("ImageUtils").getClosestSelectedImageWidget(s.editing.view.document.selection)){const a=getBalloonPositionData(s);o.updatePosition(a)}}function getBalloonPositionData(s){const o=s.editing.view,n=BalloonPanelView.defaultPositions,a=s.plugins.get("ImageUtils");return{target:o.domConverter.mapViewToDom(a.getClosestSelectedImageWidget(o.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}class ImageTextAlternativeUI extends Plugin{constructor(){super(...arguments);E(this,"_balloon");E(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const n=this.editor,a=n.t;n.ui.componentFactory.add("imageTextAlternative",l=>{const c=n.commands.get("imageTextAlternative"),u=new ButtonView(l);return u.set({label:a("Change image text alternative"),icon:icons.textAlternative,tooltip:!0}),u.bind("isEnabled").to(c,"isEnabled"),u.bind("isOn").to(c,"value",d=>!!d),this.listenTo(u,"execute",()=>{this._showForm()}),u})}_createForm(){const n=this.editor,l=n.editing.view.document,c=n.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(TextAlternativeFormView))(n.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{n.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(u,d)=>{this._hideForm(!0),d()}),this.listenTo(n.ui,"update",()=>{c.getClosestSelectedImageWidget(l.selection)?this._isVisible&&repositionContextualBalloon$1(n):this._hideForm(!0)}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const n=this.editor,a=n.commands.get("imageTextAlternative"),l=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(n)}),l.fieldView.value=l.fieldView.element.value=a.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(n=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),n&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class ImageTextAlternative extends Plugin{static get requires(){return[ImageTextAlternativeEditing,ImageTextAlternativeUI]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function upcastImageFigure(s){const o=(n,a,l)=>{if(!l.consumable.test(a.viewItem,{name:!0,classes:"image"}))return;const c=s.findViewImgElement(a.viewItem);if(!c||!l.consumable.test(c,{name:!0}))return;l.consumable.consume(a.viewItem,{name:!0,classes:"image"});const u=l.convertItem(c,a.modelCursor),d=first(u.modelRange.getItems());if(!d){l.consumable.revert(a.viewItem,{name:!0,classes:"image"});return}l.convertChildren(a.viewItem,d),l.updateConversionResult(d,a)};return n=>{n.on("element:figure",o)}}function upcastPicture(s){const o=["srcset","media","type","sizes"],n=(a,l,c)=>{const u=l.viewItem;if(!c.consumable.test(u,{name:!0}))return;const d=new Map;for(const g of u.getChildren())if(g.is("element","source")){const p={};for(const v of o)g.hasAttribute(v)&&c.consumable.test(g,{attributes:v})&&(p[v]=g.getAttribute(v));Object.keys(p).length&&d.set(g,p)}const h=s.findViewImgElement(u);if(!h)return;let f=l.modelCursor.parent;if(!f.is("element","imageBlock")){const g=c.convertItem(h,l.modelCursor);l.modelRange=g.modelRange,l.modelCursor=g.modelCursor,f=first(g.modelRange.getItems())}c.consumable.consume(u,{name:!0});for(const[g,p]of d)c.consumable.consume(g,{attributes:Object.keys(p)});d.size&&c.writer.setAttribute("sources",Array.from(d.values()),f),c.convertChildren(u,f)};return a=>{a.on("element:picture",n)}}function downcastSrcsetAttribute(s,o){const n=(a,l,c)=>{if(!c.consumable.consume(l.item,a.name))return;const u=c.writer,d=c.mapper.toViewElement(l.item),h=s.findViewImgElement(d);l.attributeNewValue===null?(u.removeAttribute("srcset",h),u.removeAttribute("sizes",h)):l.attributeNewValue&&(u.setAttribute("srcset",l.attributeNewValue,h),u.setAttribute("sizes","100vw",h))};return a=>{a.on(`attribute:srcset:${o}`,n)}}function downcastSourcesAttribute(s){const o=(n,a,l)=>{if(!l.consumable.consume(a.item,n.name))return;const c=l.writer,u=l.mapper.toViewElement(a.item),d=s.findViewImgElement(u),h=a.attributeNewValue;if(h&&h.length){const f=[];let g=d.parent;for(;g&&g.is("attributeElement");){const b=g.parent;c.unwrap(c.createRangeOn(d),g),f.unshift(g),g=b}const p=d.parent.is("element","picture"),v=p?d.parent:c.createContainerElement("picture",null);p||c.insert(c.createPositionBefore(d),v),c.remove(c.createRangeIn(v)),c.insert(c.createPositionAt(v,"end"),h.map(b=>c.createEmptyElement("source",b))),c.move(c.createRangeOn(d),c.createPositionAt(v,"end"));for(const b of f)c.wrap(c.createRangeOn(v),b)}else if(d.parent.is("element","picture")){const f=d.parent;c.move(c.createRangeOn(d),c.createPositionBefore(f)),c.remove(f)}};return n=>{n.on("attribute:sources:imageBlock",o),n.on("attribute:sources:imageInline",o)}}function downcastImageAttribute(s,o,n){const a=(l,c,u)=>{if(!u.consumable.consume(c.item,l.name))return;const d=u.writer,h=u.mapper.toViewElement(c.item),f=s.findViewImgElement(h);d.setAttribute(c.attributeKey,c.attributeNewValue||"",f)};return l=>{l.on(`attribute:${n}:${o}`,a)}}class ImageLoadObserver extends Observer{observe(o){this.listenTo(o,"load",(n,a)=>{const l=a.target;this.checkShouldIgnoreEventFromTarget(l)||l.tagName=="IMG"&&this._fireEvents(a)},{useCapture:!0})}stopObserving(o){this.stopListening(o)}_fireEvents(o){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",o))}}class InsertImageCommand extends Command{constructor(o){super(o);const n=o.config.get("image.insert.type");o.plugins.has("ImageBlockEditing")||n==="block"&&logWarning("image-block-plugin-required"),o.plugins.has("ImageInlineEditing")||n==="inline"&&logWarning("image-inline-plugin-required")}refresh(){const o=this.editor.plugins.get("ImageUtils");this.isEnabled=o.isImageAllowed()}execute(o){const n=toArray$2(o.source),a=this.editor.model.document.selection,l=this.editor.plugins.get("ImageUtils"),c=Object.fromEntries(a.getAttributes());n.forEach((u,d)=>{const h=a.getSelectedElement();if(typeof u=="string"&&(u={src:u}),d&&h&&l.isImage(h)){const f=this.editor.model.createPositionAfter(h);l.insertImage({...u,...c},f,o.imageType)}else o.breakBlock?l.insertImage({...u,...c},a.getFirstPosition(),o.imageType):l.insertImage({...u,...c},null,o.imageType)})}}class ReplaceImageSourceCommand extends Command{constructor(o){super(o),this.decorate("cleanupImage")}refresh(){const n=this.editor.plugins.get("ImageUtils"),a=this.editor.model.document.selection.getSelectedElement();this.isEnabled=n.isImage(a),this.value=this.isEnabled?a.getAttribute("src"):null}execute(o){const n=this.editor.model.document.selection.getSelectedElement(),a=this.editor.plugins.get("ImageUtils");this.editor.model.change(l=>{l.setAttribute("src",o.source,n),this.cleanupImage(l,n),a.setImageNaturalSizeAttributes(n)})}cleanupImage(o,n){o.removeAttribute("srcset",n),o.removeAttribute("sizes",n),o.removeAttribute("sources",n),o.removeAttribute("width",n),o.removeAttribute("height",n),o.removeAttribute("alt",n)}}class ImageEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.conversion;o.editing.view.addObserver(ImageLoadObserver),n.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const a=new InsertImageCommand(o),l=new ReplaceImageSourceCommand(o);o.commands.add("insertImage",a),o.commands.add("replaceImageSource",l),o.commands.add("imageInsert",a)}}class ImageSizeAttributes extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(o){const n=this.editor,a=n.plugins.get("ImageUtils"),l=o==="imageBlock"?"figure":"img";n.conversion.for("upcast").attributeToAttribute({view:{name:l,styles:{width:/.+/}},model:{key:"width",value:u=>widthAndHeightStylesAreBothSet(u)?getSizeValueIfInPx(u.getStyle("width")):null}}).attributeToAttribute({view:{name:l,key:"width"},model:"width"}).attributeToAttribute({view:{name:l,styles:{height:/.+/}},model:{key:"height",value:u=>widthAndHeightStylesAreBothSet(u)?getSizeValueIfInPx(u.getStyle("height")):null}}).attributeToAttribute({view:{name:l,key:"height"},model:"height"}),n.conversion.for("editingDowncast").add(u=>{c(u,"width","width",!0,!0),c(u,"height","height",!0,!0)}),n.conversion.for("dataDowncast").add(u=>{c(u,"width","width",!1),c(u,"height","height",!1)});function c(u,d,h,f,g=!1){u.on(`attribute:${d}:${o}`,(p,v,b)=>{if(!b.consumable.consume(v.item,p.name))return;const _=b.writer,w=b.mapper.toViewElement(v.item),x=a.findViewImgElement(w);v.attributeNewValue!==null?_.setAttribute(h,v.attributeNewValue,x):_.removeAttribute(h,x);const S=v.item.getAttribute("width"),C=v.item.getAttribute("height"),T=S&&C;if(T&&g&&_.setAttribute("loading","lazy",x),v.item.hasAttribute("sources"))return;const R=v.item.hasAttribute("resizedWidth");o==="imageInline"&&!R&&!f||T&&_.setStyle("aspect-ratio",`${S}/${C}`,x)})}}}class ImageTypeCommand extends Command{constructor(n,a){super(n);E(this,"_modelElementName");this._modelElementName=a}refresh(){const a=this.editor.plugins.get("ImageUtils"),l=a.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=a.isInlineImage(l):this.isEnabled=a.isBlockImage(l)}execute(n={}){const a=this.editor,l=this.editor.model,c=a.plugins.get("ImageUtils"),u=c.getClosestSelectedImageElement(l.document.selection),d=Object.fromEntries(u.getAttributes());return!d.src&&!d.uploadId?null:l.change(h=>{const{setImageSizes:f=!0}=n,g=Array.from(l.markers).filter(b=>b.getRange().containsItem(u)),p=c.insertImage(d,l.createSelection(u,"on"),this._modelElementName,{setImageSizes:f});if(!p)return null;const v=h.createRangeOn(p);for(const b of g){const _=b.getRange(),w=_.root.rootName!="$graveyard"?_.getJoined(v,!0):v;h.updateMarker(b,{range:w})}return{oldElement:u,newElement:p}})}}class ImagePlaceholder extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const o=this.editor.model.schema;o.isRegistered("imageBlock")&&o.extend("imageBlock",{allowAttributes:["placeholder"]}),o.isRegistered("imageInline")&&o.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const o=this.editor,n=o.conversion,a=o.plugins.get("ImageUtils");n.for("editingDowncast").add(l=>{l.on("attribute:placeholder",(c,u,d)=>{if(!d.consumable.test(u.item,c.name)||!u.item.is("element","imageBlock")&&!u.item.is("element","imageInline"))return;d.consumable.consume(u.item,c.name);const h=d.writer,f=d.mapper.toViewElement(u.item),g=a.findViewImgElement(f);u.attributeNewValue?(h.addClass("image_placeholder",g),h.setStyle("background-image",`url(${u.attributeNewValue})`,g),h.setCustomProperty("editingPipeline:doNotReuseOnce",!0,g)):(h.removeClass("image_placeholder",g),h.removeStyle("background-image",g))})})}_setupLoadListener(){const o=this.editor,n=o.model,a=o.editing,l=a.view,c=o.plugins.get("ImageUtils");l.addObserver(ImageLoadObserver),this.listenTo(l.document,"imageLoaded",(u,d)=>{const h=l.domConverter.mapDomToView(d.target);if(!h)return;const f=c.getImageWidgetFromImageView(h);if(!f)return;const g=a.mapper.toModelElement(f);!g||!g.hasAttribute("placeholder")||n.enqueueChange({isUndoable:!1},p=>{p.removeAttribute("placeholder",g)})})}}class ImageBlockEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),o.plugins.has("ImageInlineEditing")&&(o.commands.add("imageTypeBlock",new ImageTypeCommand(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const o=this.editor,n=o.t,a=o.conversion,l=o.plugins.get("ImageUtils");a.for("dataDowncast").elementToStructure({model:"imageBlock",view:(c,{writer:u})=>createBlockImageViewElement(u)}),a.for("editingDowncast").elementToStructure({model:"imageBlock",view:(c,{writer:u})=>l.toImageWidget(createBlockImageViewElement(u),u,n("image widget"))}),a.for("downcast").add(downcastImageAttribute(l,"imageBlock","src")).add(downcastImageAttribute(l,"imageBlock","alt")).add(downcastSrcsetAttribute(l,"imageBlock")),a.for("upcast").elementToElement({view:getImgViewElementMatcher(o,"imageBlock"),model:(c,{writer:u})=>u.createElement("imageBlock",c.hasAttribute("src")?{src:c.getAttribute("src")}:void 0)}).add(upcastImageFigure(l))}_setupClipboardIntegration(){const o=this.editor,n=o.model,a=o.editing.view,l=o.plugins.get("ImageUtils"),c=o.plugins.get("ClipboardPipeline");this.listenTo(c,"inputTransformation",(u,d)=>{const h=Array.from(d.content.getChildren());let f;if(!h.every(l.isInlineImageView))return;d.targetRanges?f=o.editing.mapper.toModelRange(d.targetRanges[0]):f=n.document.selection.getFirstRange();const g=n.createSelection(f);if(determineImageTypeForInsertionAtSelection(n.schema,g)==="imageBlock"){const p=new UpcastWriter(a.document),v=h.map(b=>p.createElement("figure",{class:"image"},b));d.content=p.createDocumentFragment(v)}}),this.listenTo(c,"contentInsertion",(u,d)=>{d.method==="paste"&&n.change(h=>{const f=h.createRangeIn(d.content);for(const g of f.getItems())g.is("element","imageBlock")&&l.setImageNaturalSizeAttributes(g)})})}}class ImageInsertFormView extends View$1{constructor(n,a=[]){super(n);E(this,"focusTracker");E(this,"keystrokes");E(this,"_focusables");E(this,"_focusCycler");E(this,"children");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.children=this.createCollection(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const l of a)this.children.add(l),this._focusables.add(l),l instanceof CollapsibleView&&this._focusables.addMany(l.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),submitHandler({view:this});for(const a of this._focusables)this.focusTracker.add(a.element);this.keystrokes.listenTo(this.element);const n=a=>a.stopPropagation();this.keystrokes.set("arrowright",n),this.keystrokes.set("arrowleft",n),this.keystrokes.set("arrowup",n),this.keystrokes.set("arrowdown",n)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class ImageInsertUI extends Plugin{constructor(n){super(n);E(this,"dropdownView");E(this,"_integrations",new Map);n.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const n=this.editor,a=n.model.document.selection,l=n.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(n.model.document,"change",()=>{this.isImageSelected=l.isImage(a.getSelectedElement())});const c=d=>this._createToolbarComponent(d),u=d=>this._createMenuBarComponent(d);n.ui.componentFactory.add("insertImage",c),n.ui.componentFactory.add("imageInsert",c),n.ui.componentFactory.add("menuBar:insertImage",u)}registerIntegration({name:n,observable:a,buttonViewCreator:l,formViewCreator:c,menuBarButtonViewCreator:u,requiresForm:d=!1,override:h=!1}){this._integrations.has(n)&&!h&&logWarning("image-insert-integration-exists",{name:n}),this._integrations.set(n,{observable:a,buttonViewCreator:l,menuBarButtonViewCreator:u,formViewCreator:c,requiresForm:d})}_createToolbarComponent(n){const a=this.editor,l=n.t,c=this._prepareIntegrations();if(!c.length)return null;let u;const d=c[0];if(c.length==1){if(!d.requiresForm)return d.buttonViewCreator(!0);u=d.buttonViewCreator(!0)}else{const g=d.buttonViewCreator(!1);u=new SplitButtonView(n,g),u.tooltip=!0,u.bind("label").to(this,"isImageSelected",p=>l(p?"Replace image":"Insert image"))}const h=this.dropdownView=createDropdown(n,u),f=c.map(({observable:g})=>typeof g=="function"?g():g);return h.bind("isEnabled").toMany(f,"isEnabled",(...g)=>g.some(p=>p)),h.once("change:isOpen",()=>{const g=c.flatMap(({formViewCreator:v})=>v(c.length==1)),p=new ImageInsertFormView(a.locale,g);h.panelView.children.add(p)}),h}_createMenuBarComponent(n){const a=n.t,l=this._prepareIntegrations();if(!l.length)return null;const c=l.flatMap(({menuBarButtonViewCreator:h})=>h(l.length==1)),u=new MenuBarMenuView(n),d=new MenuBarMenuListView(n);u.panelView.children.add(d),u.buttonView.set({icon:icons.image,label:a("Image")});for(const h of c){const f=new MenuBarMenuListItemView(n,u);f.children.add(h),d.items.add(f),h.delegate("execute").to(u)}return u}_prepareIntegrations(){const a=this.editor.config.get("image.insert.integrations"),l=[];if(!a.length)return logWarning("image-insert-integrations-not-specified"),l;for(const c of a){if(!this._integrations.has(c)){["upload","assetManager","url"].includes(c)||logWarning("image-insert-unknown-integration",{item:c});continue}l.push(this._integrations.get(c))}return l.length||logWarning("image-insert-integrations-not-registered"),l}}class ImageBlock extends Plugin{static get requires(){return[ImageBlockEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class ImageInlineEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),o.plugins.has("ImageBlockEditing")&&(o.commands.add("imageTypeInline",new ImageTypeCommand(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const o=this.editor,n=o.t,a=o.conversion,l=o.plugins.get("ImageUtils");a.for("dataDowncast").elementToElement({model:"imageInline",view:(c,{writer:u})=>u.createEmptyElement("img")}),a.for("editingDowncast").elementToStructure({model:"imageInline",view:(c,{writer:u})=>l.toImageWidget(createInlineImageViewElement(u),u,n("image widget"))}),a.for("downcast").add(downcastImageAttribute(l,"imageInline","src")).add(downcastImageAttribute(l,"imageInline","alt")).add(downcastSrcsetAttribute(l,"imageInline")),a.for("upcast").elementToElement({view:getImgViewElementMatcher(o,"imageInline"),model:(c,{writer:u})=>u.createElement("imageInline",c.hasAttribute("src")?{src:c.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const o=this.editor,n=o.model,a=o.editing.view,l=o.plugins.get("ImageUtils"),c=o.plugins.get("ClipboardPipeline");this.listenTo(c,"inputTransformation",(u,d)=>{const h=Array.from(d.content.getChildren());let f;if(!h.every(l.isBlockImageView))return;d.targetRanges?f=o.editing.mapper.toModelRange(d.targetRanges[0]):f=n.document.selection.getFirstRange();const g=n.createSelection(f);if(determineImageTypeForInsertionAtSelection(n.schema,g)==="imageInline"){const p=new UpcastWriter(a.document),v=h.map(b=>b.childCount===1?(Array.from(b.getAttributes()).forEach(_=>p.setAttribute(..._,l.findViewImgElement(b))),b.getChild(0)):b);d.content=p.createDocumentFragment(v)}}),this.listenTo(c,"contentInsertion",(u,d)=>{d.method==="paste"&&n.change(h=>{const f=h.createRangeIn(d.content);for(const g of f.getItems())g.is("element","imageInline")&&l.setImageNaturalSizeAttributes(g)})})}}class ImageInline extends Plugin{static get requires(){return[ImageInlineEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class ImageCaptionUtils extends Plugin{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}getCaptionFromImageModelElement(o){for(const n of o.getChildren())if(n&&n.is("element","caption"))return n;return null}getCaptionFromModelSelection(o){const n=this.editor.plugins.get("ImageUtils"),a=o.getFirstPosition().findAncestor("caption");return a&&n.isBlockImage(a.parent)?a:null}matchImageCaptionViewElement(o){const n=this.editor.plugins.get("ImageUtils");return o.name=="figcaption"&&n.isBlockImageView(o.parent)?{name:!0}:null}}class ToggleImageCaptionCommand extends Command{refresh(){const o=this.editor,n=o.plugins.get("ImageCaptionUtils"),a=o.plugins.get("ImageUtils");if(!o.plugins.has(ImageBlockEditing)){this.isEnabled=!1,this.value=!1;return}const l=o.model.document.selection,c=l.getSelectedElement();if(!c){const u=n.getCaptionFromModelSelection(l);this.isEnabled=!!u,this.value=!!u;return}this.isEnabled=a.isImage(c),this.isEnabled?this.value=!!n.getCaptionFromImageModelElement(c):this.value=!1}execute(o={}){const{focusCaptionOnShow:n}=o;this.editor.model.change(a=>{this.value?this._hideImageCaption(a):this._showImageCaption(a,n)})}_showImageCaption(o,n){const l=this.editor.model.document.selection,c=this.editor.plugins.get("ImageCaptionEditing"),u=this.editor.plugins.get("ImageUtils");let d=l.getSelectedElement();const h=c._getSavedCaption(d);u.isInlineImage(d)&&(this.editor.execute("imageTypeBlock"),d=l.getSelectedElement());const f=h||o.createElement("caption");o.append(f,d),n&&o.setSelection(f,"in")}_hideImageCaption(o){const n=this.editor,a=n.model.document.selection,l=n.plugins.get("ImageCaptionEditing"),c=n.plugins.get("ImageCaptionUtils");let u=a.getSelectedElement(),d;u?d=c.getCaptionFromImageModelElement(u):(d=c.getCaptionFromModelSelection(a),u=d.parent),l._saveCaption(u,d),o.setSelection(u,"on"),o.remove(d)}}class ImageCaptionEditing extends Plugin{constructor(n){super(n);E(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[ImageUtils,ImageCaptionUtils]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model.schema;a.isRegistered("caption")?a.extend("caption",{allowIn:"imageBlock"}):a.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),n.commands.add("toggleImageCaption",new ToggleImageCaptionCommand(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const n=this.editor,a=n.editing.view,l=n.plugins.get("ImageUtils"),c=n.plugins.get("ImageCaptionUtils"),u=n.t;n.conversion.for("upcast").elementToElement({view:d=>c.matchImageCaptionViewElement(d),model:"caption"}),n.conversion.for("dataDowncast").elementToElement({model:"caption",view:(d,{writer:h})=>l.isBlockImage(d.parent)?h.createContainerElement("figcaption"):null}),n.conversion.for("editingDowncast").elementToElement({model:"caption",view:(d,{writer:h})=>{if(!l.isBlockImage(d.parent))return null;const f=h.createEditableElement("figcaption");h.setCustomProperty("imageCaption",!0,f),f.placeholder=u("Enter image caption"),enablePlaceholder({view:a,element:f,keepOnFocus:!0});const g=d.parent.getAttribute("alt"),p=g?u("Caption for image: %0",[g]):u("Caption for the image");return toWidgetEditable(f,h,{label:p})}})}_setupImageTypeCommandsIntegration(){const n=this.editor,a=n.plugins.get("ImageUtils"),l=n.plugins.get("ImageCaptionUtils"),c=n.commands.get("imageTypeInline"),u=n.commands.get("imageTypeBlock"),d=h=>{if(!h.return)return;const{oldElement:f,newElement:g}=h.return;/* istanbul ignore if: paranoid check -- @preserve */if(!f)return;if(a.isBlockImage(f)){const v=l.getCaptionFromImageModelElement(f);if(v){this._saveCaption(g,v);return}}const p=this._getSavedCaption(f);p&&this._saveCaption(g,p)};c&&this.listenTo(c,"execute",d,{priority:"low"}),u&&this.listenTo(u,"execute",d,{priority:"low"})}_getSavedCaption(n){const a=this._savedCaptionsMap.get(n);return a?Element$2.fromJSON(a):null}_saveCaption(n,a){this._savedCaptionsMap.set(n,a.toJSON())}_registerCaptionReconversion(){const n=this.editor,a=n.model,l=n.plugins.get("ImageUtils"),c=n.plugins.get("ImageCaptionUtils");a.document.on("change:data",()=>{const u=a.document.differ.getChanges();for(const d of u){if(d.attributeKey!=="alt")continue;const h=d.range.start.nodeAfter;if(l.isBlockImage(h)){const f=c.getCaptionFromImageModelElement(h);if(!f)return;n.editing.reconvertItem(f)}}})}}class ImageCaptionUI extends Plugin{static get requires(){return[ImageCaptionUtils]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.editing.view,a=o.plugins.get("ImageCaptionUtils"),l=o.t;o.ui.componentFactory.add("toggleImageCaption",c=>{const u=o.commands.get("toggleImageCaption"),d=new ButtonView(c);return d.set({icon:icons.caption,tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(u,"value","isEnabled"),d.bind("label").to(u,"value",h=>l(h?"Toggle caption off":"Toggle caption on")),this.listenTo(d,"execute",()=>{o.execute("toggleImageCaption",{focusCaptionOnShow:!0});const h=a.getCaptionFromModelSelection(o.model.document.selection);if(h){const f=o.editing.mapper.toViewElement(h);n.scrollToTheSelection(),n.change(g=>{g.addClass("image__caption_highlighted",f)})}o.editing.view.focus()}),d})}}class ImageCaption extends Plugin{static get requires(){return[ImageCaptionEditing,ImageCaptionUI]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function createImageTypeRegExp(s){const o=s.map(n=>n.replace("+","\\+"));return new RegExp(`^image\\/(${o.join("|")})$`)}function fetchLocalImage(s){return new Promise((o,n)=>{const a=s.getAttribute("src");fetch(a).then(l=>l.blob()).then(l=>{const c=getImageMimeType(l,a),d=`image.${c.replace("image/","")}`,h=new File([l],d,{type:c});o(h)}).catch(l=>l&&l.name==="TypeError"?convertLocalImageOnCanvas(a).then(o).catch(n):n(l))})}function isLocalImage(s,o){return!s.isInlineImageView(o)||!o.getAttribute("src")?!1:!!o.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!o.getAttribute("src").match(/^blob:/g)}function getImageMimeType(s,o){return s.type?s.type:o.match(/data:(image\/\w+);base64/)?o.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function convertLocalImageOnCanvas(s){return getBlobFromCanvas(s).then(o=>{const n=getImageMimeType(o,s),l=`image.${n.replace("image/","")}`;return new File([o],l,{type:n})})}function getBlobFromCanvas(s){return new Promise((o,n)=>{const a=global$1.document.createElement("img");a.addEventListener("load",()=>{const l=global$1.document.createElement("canvas");l.width=a.width,l.height=a.height,l.getContext("2d").drawImage(a,0,0),l.toBlob(u=>u?o(u):n())}),a.addEventListener("error",()=>n()),a.src=s})}class ImageUploadUI extends Plugin{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),o.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),o.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),o.plugins.has("ImageInsertUI")&&o.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>o.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:n=>this._createMenuBarButton(n?"insertOnly":"insertNested")})}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get("uploadImage"),c=n.config.get("image.upload.types"),u=createImageTypeRegExp(c),d=new o(n.locale),h=a.t;return d.set({acceptedType:c.map(f=>`image/${f}`).join(","),allowMultipleFiles:!0,label:h("Upload from computer"),icon:icons.imageUpload}),d.bind("isEnabled").to(l),d.on("done",(f,g)=>{const p=Array.from(g).filter(v=>u.test(v.type));p.length&&(n.execute("uploadImage",{file:p}),n.editing.view.focus())}),d}_createToolbarButton(){const o=this.editor.locale.t,n=this.editor.plugins.get("ImageInsertUI"),a=this.editor.commands.get("uploadImage"),l=this._createButton(FileDialogButtonView);return l.tooltip=!0,l.bind("label").to(n,"isImageSelected",a,"isAccessAllowed",(c,u)=>o(u?c?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),l}_createDropdownButton(){const o=this.editor.locale.t,n=this.editor.plugins.get("ImageInsertUI"),a=this._createButton(FileDialogButtonView);return a.withText=!0,a.bind("label").to(n,"isImageSelected",l=>o(l?"Replace from computer":"Upload from computer")),a.on("execute",()=>{n.dropdownView.isOpen=!1}),a}_createMenuBarButton(o){const n=this.editor.locale.t,a=this._createButton(MenuBarMenuListItemFileDialogButtonView);switch(a.withText=!0,o){case"standalone":a.label=n("Image from computer");break;case"insertOnly":a.label=n("Image");break;case"insertNested":a.label=n("From computer");break}return a}}class ImageUploadProgress extends Plugin{constructor(n){super(n);E(this,"placeholder");E(this,"uploadStatusChange",(n,a,l)=>{const c=this.editor,u=a.item,d=u.getAttribute("uploadId");if(!l.consumable.consume(a.item,n.name))return;const h=c.plugins.get("ImageUtils"),f=c.plugins.get(FileRepository),g=d?a.attributeNewValue:null,p=this.placeholder,v=c.editing.mapper.toViewElement(u),b=l.writer;if(g=="reading"){_startAppearEffect(v,b),_showPlaceholder(h,p,v,b);return}if(g=="uploading"){const _=f.loaders.get(d);_startAppearEffect(v,b),_?(_hidePlaceholder(v,b),_showProgressBar(v,b,_,c.editing.view),_displayLocalImage(h,v,b,_)):_showPlaceholder(h,p,v,b);return}g=="complete"&&f.loaders.get(d)&&_showCompleteIcon(v,b,c.editing.view),_hideProgressBar(v,b),_hidePlaceholder(v,b),_stopAppearEffect(v,b)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.plugins.has("ImageBlockEditing")&&n.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),n.plugins.has("ImageInlineEditing")&&n.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function _startAppearEffect(s,o){s.hasClass("ck-appear")||o.addClass("ck-appear",s)}function _stopAppearEffect(s,o){o.removeClass("ck-appear",s)}function _showPlaceholder(s,o,n,a){n.hasClass("ck-image-upload-placeholder")||a.addClass("ck-image-upload-placeholder",n);const l=s.findViewImgElement(n);l.getAttribute("src")!==o&&a.setAttribute("src",o,l),_getUIElement(n,"placeholder")||a.insert(a.createPositionAfter(l),_createPlaceholder(a))}function _hidePlaceholder(s,o){s.hasClass("ck-image-upload-placeholder")&&o.removeClass("ck-image-upload-placeholder",s),_removeUIElement(s,o,"placeholder")}function _showProgressBar(s,o,n,a){const l=_createProgressBar(o);o.insert(o.createPositionAt(s,"end"),l),n.on("change:uploadedPercent",(c,u,d)=>{a.change(h=>{h.setStyle("width",d+"%",l)})})}function _hideProgressBar(s,o){_removeUIElement(s,o,"progressBar")}function _showCompleteIcon(s,o,n){const a=o.createUIElement("div",{class:"ck-image-upload-complete-icon"});o.insert(o.createPositionAt(s,"end"),a),setTimeout(()=>{n.change(l=>l.remove(l.createRangeOn(a)))},3e3)}function _createProgressBar(s){const o=s.createUIElement("div",{class:"ck-progress-bar"});return s.setCustomProperty("progressBar",!0,o),o}function _createPlaceholder(s){const o=s.createUIElement("div",{class:"ck-upload-placeholder-loader"});return s.setCustomProperty("placeholder",!0,o),o}function _getUIElement(s,o){for(const n of s.getChildren())if(n.getCustomProperty(o))return n}function _removeUIElement(s,o,n){const a=_getUIElement(s,n);a&&o.remove(o.createRangeOn(a))}function _displayLocalImage(s,o,n,a){if(a.data){const l=s.findViewImgElement(o);n.setAttribute("src",a.data,l)}}class UploadImageCommand extends Command{constructor(o){super(o),this.set("isAccessAllowed",!0)}refresh(){const o=this.editor,n=o.plugins.get("ImageUtils"),a=o.model.document.selection.getSelectedElement();this.isEnabled=n.isImageAllowed()||n.isImage(a)}execute(o){const n=toArray$2(o.file),a=this.editor.model.document.selection,l=this.editor.plugins.get("ImageUtils"),c=Object.fromEntries(a.getAttributes());n.forEach((u,d)=>{const h=a.getSelectedElement();if(d&&h&&l.isImage(h)){const f=this.editor.model.createPositionAfter(h);this._uploadImage(u,c,f)}else this._uploadImage(u,c)})}_uploadImage(o,n,a){const l=this.editor,u=l.plugins.get(FileRepository).createLoader(o),d=l.plugins.get("ImageUtils");u&&d.insertImage({...n,uploadId:u.id},a)}}class ImageUploadEditing extends Plugin{constructor(n){super(n);E(this,"_uploadImageElements");E(this,"_uploadedImages",new Map);n.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[FileRepository,Notification,ClipboardPipeline,ImageUtils]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model.document,l=n.conversion,c=n.plugins.get(FileRepository),u=n.plugins.get("ImageUtils"),d=n.plugins.get("ClipboardPipeline"),h=createImageTypeRegExp(n.config.get("image.upload.types")),f=new UploadImageCommand(n);n.commands.add("uploadImage",f),n.commands.add("imageUpload",f),l.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(g=>g.on("element:img",(p,v,b)=>{if(!b.consumable.test(v.viewItem,{attributes:["data-ck-upload-id"]}))return;const _=v.viewItem.getAttribute("data-ck-upload-id");if(!_)return;const[w]=Array.from(v.modelRange.getItems({shallow:!0})),x=c.loaders.get(_);w&&(b.writer.setAttribute("uploadId",_,w),b.consumable.consume(v.viewItem,{attributes:["data-ck-upload-id"]}),x&&x.data&&b.writer.setAttribute("uploadStatus",x.status,w))},{priority:"low"})),this.listenTo(n.editing.view.document,"clipboardInput",(g,p)=>{if(isHtmlIncluded(p.dataTransfer))return;const v=Array.from(p.dataTransfer.files).filter(_=>_?h.test(_.type):!1);if(!v.length)return;if(g.stop(),n.model.change(_=>{p.targetRanges&&_.setSelection(p.targetRanges.map(w=>n.editing.mapper.toModelRange(w))),n.execute("uploadImage",{file:v})}),!n.commands.get("uploadImage").isAccessAllowed){const _=n.plugins.get("Notification"),w=n.locale.t;_.showWarning(w("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(d,"inputTransformation",(g,p)=>{const v=Array.from(n.editing.view.createRangeIn(p.content)).map(_=>_.item).filter(_=>isLocalImage(u,_)&&!_.getAttribute("uploadProcessed")).map(_=>({promise:fetchLocalImage(_),imageElement:_}));if(!v.length)return;const b=new UpcastWriter(n.editing.view.document);for(const _ of v){b.setAttribute("uploadProcessed",!0,_.imageElement);const w=c.createLoader(_.promise);w&&(b.setAttribute("src","",_.imageElement),b.setAttribute("uploadId",w.id,_.imageElement))}}),n.editing.view.document.on("dragover",(g,p)=>{p.preventDefault()}),a.on("change",()=>{const g=a.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),p=new Set;for(const v of g)if(v.type=="insert"&&v.name!="$text"){const b=v.position.nodeAfter,_=v.position.root.rootName=="$graveyard";for(const w of getImagesFromChangeItem(n,b)){const x=w.getAttribute("uploadId");if(!x)continue;const S=c.loaders.get(x);if(!S){!_&&this._uploadedImages.has(x)&&n.model.enqueueChange({isUndoable:!1},C=>{C.setAttribute("uploadStatus","complete",w),this.fire("uploadComplete",{data:this._uploadedImages.get(x),imageElement:w})});continue}_?p.has(x)||Array.from(this._uploadImageElements.get(x)).every(T=>T.root.rootName=="$graveyard")&&S.abort():(p.add(x),this._uploadImageElements.has(x)?this._uploadImageElements.get(x).add(w):this._uploadImageElements.set(x,new Set([w])),S.status=="idle"&&this._readAndUpload(S))}}}),this.on("uploadComplete",(g,{imageElement:p,data:v})=>{const b=v.urls?v.urls:v;this.editor.model.change(_=>{_.setAttribute("src",b.default,p),this._parseAndSetSrcsetAttributeOnImage(b,p,_),u.setImageNaturalSizeAttributes(p)})},{priority:"low"})}afterInit(){const n=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(n.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(n.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(n){const a=this.editor,l=a.model,c=a.locale.t,u=a.plugins.get(FileRepository),d=a.plugins.get(Notification),h=a.plugins.get("ImageUtils"),f=this._uploadImageElements;return l.enqueueChange({isUndoable:!1},p=>{const v=f.get(n.id);for(const b of v)p.setAttribute("uploadStatus","reading",b)}),n.read().then(()=>{const p=n.upload();a.ui&&a.ui.ariaLiveAnnouncer.announce(c("Uploading image"));for(const v of f.get(n.id)){/* istanbul ignore next -- @preserve */if(env$1.isSafari){const b=a.editing.mapper.toViewElement(v),_=h.findViewImgElement(b);a.editing.view.once("render",()=>{if(!_.parent)return;const w=a.editing.view.domConverter.mapViewToDom(_.parent);if(!w)return;const x=w.style.display;w.style.display="none",w._ckHack=w.offsetHeight,w.style.display=x})}l.enqueueChange({isUndoable:!1},b=>{b.setAttribute("uploadStatus","uploading",v)})}return p}).then(p=>{l.enqueueChange({isUndoable:!1},v=>{for(const b of f.get(n.id))v.setAttribute("uploadStatus","complete",b),this.fire("uploadComplete",{data:p,imageElement:b});a.ui&&a.ui.ariaLiveAnnouncer.announce(c("Image upload complete")),this._uploadedImages.set(n.id,p)}),g()}).catch(p=>{if(a.ui&&a.ui.ariaLiveAnnouncer.announce(c("Error during image upload")),n.status!=="error"&&n.status!=="aborted")throw p;n.status=="error"&&p&&d.showWarning(p,{title:c("Upload failed"),namespace:"upload"}),l.enqueueChange({isUndoable:!1},v=>{for(const b of f.get(n.id))b.root.rootName!=="$graveyard"&&v.remove(b)}),g()});function g(){l.enqueueChange({isUndoable:!1},p=>{for(const v of f.get(n.id))p.removeAttribute("uploadId",v),p.removeAttribute("uploadStatus",v);f.delete(n.id)}),u.destroyLoader(n)}}_parseAndSetSrcsetAttributeOnImage(n,a,l){let c=0;const u=Object.keys(n).filter(d=>{const h=parseInt(d,10);if(!isNaN(h))return c=Math.max(c,h),!0}).map(d=>`${n[d]} ${d}w`).join(", ");if(u!=""){const d={srcset:u};!a.hasAttribute("width")&&!a.hasAttribute("height")&&(d.width=c),l.setAttributes(d,a)}}_registerConverters(n){const{conversion:a,plugins:l}=this.editor,c=l.get(FileRepository),u=l.get(ImageUtils);a.for("dataDowncast").add(d=>{d.on(`attribute:uploadId:${n}`,(h,f,g)=>{if(!g.consumable.test(f.item,h.name))return;const p=c.loaders.get(f.attributeNewValue);if(!p||!p.data)return null;const v=g.mapper.toViewElement(f.item),b=u.findViewImgElement(v);b&&(g.consumable.consume(f.item,h.name),g.writer.setAttribute("data-ck-upload-id",p.id,b))})})}}function isHtmlIncluded(s){return Array.from(s.types).includes("text/html")&&s.getData("text/html")!==""}function getImagesFromChangeItem(s,o){const n=s.plugins.get("ImageUtils");return Array.from(s.model.createRangeOn(o)).filter(a=>n.isImage(a.item)).map(a=>a.item)}class ImageUpload extends Plugin{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUploadEditing,ImageUploadUI,ImageUploadProgress]}}class ImageInsertUrlView extends View$1{constructor(n){super(n);E(this,"urlInputView");E(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new KeystrokeHandler,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),submitHandler({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const n=this.locale,a=n.t,l=new LabeledFieldView(n,createLabeledInputText);return l.bind("label").to(this,"isImageSelected",c=>a(c?"Update image URL":"Insert image via URL")),l.bind("isEnabled").to(this),l.fieldView.inputMode="url",l.fieldView.placeholder="https://example.com/image.png",l.fieldView.bind("value").to(this,"imageURLInputValue",c=>c||""),l.fieldView.on("input",()=>{this.imageURLInputValue=l.fieldView.element.value.trim()}),l}focus(){this.urlInputView.focus()}}class ImageInsertViaUrlUI extends Plugin{constructor(){super(...arguments);E(this,"_imageInsertUI");E(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertUI,Dialog]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:n=>this._createMenuBarButton(n?"insertOnly":"insertNested")})}_createInsertUrlButton(n){const a=new n(this.editor.locale);return a.icon=icons.imageUrl,a.on("execute",()=>{this._showModal()}),a}_createToolbarButton(){const n=this.editor.locale.t,a=this._createInsertUrlButton(ButtonView);return a.tooltip=!0,a.bind("label").to(this._imageInsertUI,"isImageSelected",l=>n(l?"Update image URL":"Insert image via URL")),a}_createDropdownButton(){const n=this.editor.locale.t,a=this._createInsertUrlButton(ButtonView);return a.withText=!0,a.bind("label").to(this._imageInsertUI,"isImageSelected",l=>n(l?"Update image URL":"Insert via URL")),a}_createMenuBarButton(n){const a=this.editor.locale.t,l=this._createInsertUrlButton(MenuBarMenuListItemButtonView);switch(l.withText=!0,n){case"standalone":l.label=a("Image via URL");break;case"insertOnly":l.label=a("Image");break;case"insertNested":l.label=a("Via URL");break}return l}_createInsertUrlView(){const n=this.editor,a=n.locale,l=n.commands.get("replaceImageSource"),c=n.commands.get("insertImage"),u=new ImageInsertUrlView(a);return u.bind("isImageSelected").to(this._imageInsertUI),u.bind("isEnabled").toMany([c,l],"isEnabled",(...d)=>d.some(h=>h)),u}_showModal(){const n=this.editor,l=n.locale.t,c=n.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const u=n.commands.get("replaceImageSource");this._formView.imageURLInputValue=u.value||"",c.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?l("Update image URL"):l("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:l("Cancel"),withText:!0,onExecute:()=>c.hide()},{label:l("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class ImageInsertViaUrl extends Plugin{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertViaUrlUI,ImageInsertUI]}}class ImageInsert extends Plugin{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUpload,ImageInsertViaUrl,ImageInsertUI]}}class ResizeImageCommand extends Command{refresh(){const o=this.editor,a=o.plugins.get("ImageUtils").getClosestSelectedImageElement(o.model.document.selection);this.isEnabled=!!a,!a||!a.hasAttribute("resizedWidth")?this.value=null:this.value={width:a.getAttribute("resizedWidth"),height:null}}execute(o){const n=this.editor,a=n.model,l=n.plugins.get("ImageUtils"),c=l.getClosestSelectedImageElement(a.document.selection);this.value={width:o.width,height:null},c&&a.change(u=>{u.setAttribute("resizedWidth",o.width,c),u.removeAttribute("resizedHeight",c),l.setImageNaturalSizeAttributes(c)})}}class ImageResizeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const o=this.editor,n=new ResizeImageCommand(o);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),o.commands.add("resizeImage",n),o.commands.add("imageResize",n)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(o){const n=this.editor,a=n.plugins.get("ImageUtils");n.conversion.for("downcast").add(l=>l.on(`attribute:resizedWidth:${o}`,(c,u,d)=>{if(!d.consumable.consume(u.item,c.name))return;const h=d.writer,f=d.mapper.toViewElement(u.item);u.attributeNewValue!==null?(h.setStyle("width",u.attributeNewValue,f),h.addClass("image_resized",f)):(h.removeStyle("width",f),h.removeClass("image_resized",f))})),n.conversion.for("dataDowncast").attributeToAttribute({model:{name:o,key:"resizedHeight"},view:l=>({key:"style",value:{height:l}})}),n.conversion.for("editingDowncast").add(l=>l.on(`attribute:resizedHeight:${o}`,(c,u,d)=>{if(!d.consumable.consume(u.item,c.name))return;const h=d.writer,f=d.mapper.toViewElement(u.item),g=o==="imageInline"?a.findViewImgElement(f):f;u.attributeNewValue!==null?h.setStyle("height",u.attributeNewValue,g):h.removeStyle("height",g)})),n.conversion.for("upcast").attributeToAttribute({view:{name:o==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:l=>widthAndHeightStylesAreBothSet(l)?null:l.getStyle("width")}}),n.conversion.for("upcast").attributeToAttribute({view:{name:o==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:l=>widthAndHeightStylesAreBothSet(l)?null:l.getStyle("height")}})}}const RESIZE_ICONS={small:icons.objectSizeSmall,medium:icons.objectSizeMedium,large:icons.objectSizeLarge,custom:icons.objectSizeCustom,original:icons.objectSizeFull};class ImageResizeButtons extends Plugin{constructor(n){super(n);E(this,"_resizeUnit");this._resizeUnit=n.config.get("image.resizeUnit")}static get requires(){return[ImageResizeEditing]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.config.get("image.resizeOptions"),l=n.commands.get("resizeImage");this.bind("isEnabled").to(l);for(const c of a)this._registerImageResizeButton(c);this._registerImageResizeDropdown(a)}_registerImageResizeButton(n){const a=this.editor,{name:l,value:c,icon:u}=n;a.ui.componentFactory.add(l,d=>{const h=new ButtonView(d),f=a.commands.get("resizeImage"),g=this._getOptionLabelValue(n,!0);if(!RESIZE_ICONS[u])throw new CKEditorError("imageresizebuttons-missing-icon",a,n);if(h.set({label:g,icon:RESIZE_ICONS[u],tooltip:g,isToggleable:!0}),h.bind("isEnabled").to(this),a.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(n)){const p=a.plugins.get("ImageCustomResizeUI");this.listenTo(h,"execute",()=>{p._showForm(this._resizeUnit)})}else{const p=c?c+this._resizeUnit:null;h.bind("isOn").to(f,"value",getIsOnButtonCallback(p)),this.listenTo(h,"execute",()=>{a.execute("resizeImage",{width:p})})}return h})}_registerImageResizeDropdown(n){const a=this.editor,l=a.t,c=n.find(d=>!d.value),u=d=>{const h=a.commands.get("resizeImage"),f=createDropdown(d,DropdownButtonView),g=f.buttonView,p=l("Resize image");return g.set({tooltip:p,commandValue:c.value,icon:RESIZE_ICONS.medium,isToggleable:!0,label:this._getOptionLabelValue(c),withText:!0,class:"ck-resize-image-button",ariaLabel:p,ariaLabelledBy:void 0}),g.bind("label").to(h,"value",v=>v&&v.width?v.width:this._getOptionLabelValue(c)),f.bind("isEnabled").to(this),addListToDropdown(f,()=>this._getResizeDropdownListItemDefinitions(n,h),{ariaLabel:l("Image resize list"),role:"menu"}),this.listenTo(f,"execute",v=>{"onClick"in v.source?v.source.onClick():(a.execute(v.source.commandName,{width:v.source.commandValue}),a.editing.view.focus())}),f};a.ui.componentFactory.add("resizeImage",u),a.ui.componentFactory.add("imageResize",u)}_getOptionLabelValue(n,a=!1){const l=this.editor.t;return n.label?n.label:a?isCustomImageResizeOption(n)?l("Custom image size"):n.value?l("Resize image to %0",n.value+this._resizeUnit):l("Resize image to the original size"):isCustomImageResizeOption(n)?l("Custom"):n.value?n.value+this._resizeUnit:l("Original")}_getResizeDropdownListItemDefinitions(n,a){const{editor:l}=this,c=new Collection,u=n.map(d=>isCustomImageResizeOption(d)?{...d,valueWithUnits:"custom"}:d.value?{...d,valueWithUnits:`${d.value}${this._resizeUnit}`}:{...d,valueWithUnits:null});for(const d of u){let h=null;if(l.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(d)){const f=l.plugins.get("ImageCustomResizeUI");h={type:"button",model:new Model$1({label:this._getOptionLabelValue(d),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{f._showForm(this._resizeUnit)}})};const g=map$2(u,"valueWithUnits");h.model.bind("isOn").to(a,"value",getIsOnCustomButtonCallback(g))}else h={type:"button",model:new Model$1({commandName:"resizeImage",commandValue:d.valueWithUnits,label:this._getOptionLabelValue(d),role:"menuitemradio",withText:!0,icon:null})},h.model.bind("isOn").to(a,"value",getIsOnButtonCallback(d.valueWithUnits));h.model.bind("isEnabled").to(a,"isEnabled"),c.add(h)}return c}}function isCustomImageResizeOption(s){return s.value==="custom"}function getIsOnButtonCallback(s){return o=>{const n=o;return s===null&&n===s?!0:n!==null&&n.width===s}}function getIsOnCustomButtonCallback(s){return o=>!s.some(n=>getIsOnButtonCallback(n)(o))}const RESIZABLE_IMAGES_CSS_SELECTOR="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",RESIZED_IMAGE_CLASS="image_resized";class ImageResizeHandles extends Plugin{static get requires(){return[WidgetResize,ImageUtils]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(o),this._setupResizerCreator()}_setupResizerCreator(){const o=this.editor,n=o.editing.view,a=o.plugins.get("ImageUtils");n.addObserver(ImageLoadObserver),this.listenTo(n.document,"imageLoaded",(l,c)=>{if(!c.target.matches(RESIZABLE_IMAGES_CSS_SELECTOR))return;const u=o.editing.view.domConverter,d=u.domToView(c.target),h=a.getImageWidgetFromImageView(d);let f=this.editor.plugins.get(WidgetResize).getResizerByViewElement(h);if(f){f.redraw();return}const g=o.editing.mapper,p=g.toModelElement(h);f=o.plugins.get(WidgetResize).attachTo({unit:o.config.get("image.resizeUnit"),modelElement:p,viewElement:h,editor:o,getHandleHost(v){return v.querySelector("img")},getResizeHost(){return u.mapViewToDom(g.toViewElement(p))},isCentered(){return p.getAttribute("imageStyle")=="alignCenter"},onCommit(v){n.change(b=>{b.removeClass(RESIZED_IMAGE_CLASS,h)}),o.execute("resizeImage",{width:v})}}),f.on("updateSize",()=>{h.hasClass(RESIZED_IMAGE_CLASS)||n.change(b=>{b.addClass(RESIZED_IMAGE_CLASS,h)});const v=p.name==="imageInline"?d:h;v.getStyle("height")&&n.change(b=>{b.removeStyle("height",v)})}),f.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tryParseDimensionWithUnit(s){if(!s)return null;const[,o,n]=s.trim().match(/([.,\d]+)(%|px)$/)||[],a=Number.parseFloat(o);return Number.isNaN(a)?null:{value:a,unit:n}}function tryCastDimensionsToUnit(s,o,n){return n==="px"?{value:o.value,unit:"px"}:{value:o.value/s*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedImageEditorNodes(s){const{editing:o}=s,a=s.plugins.get("ImageUtils").getClosestSelectedImageElement(s.model.document.selection);if(!a)return null;const l=o.mapper.toViewElement(a),c=o.view.domConverter.mapViewToDom(l);return{model:a,view:l,dom:c}}function getSelectedImageWidthInUnits(s,o){const n=getSelectedImageEditorNodes(s);if(!n)return null;const a=tryParseDimensionWithUnit(n.model.getAttribute("resizedWidth")||null);if(!a)return null;if(a.unit===o)return a;const l=calculateResizeHostAncestorWidth(n.dom),c={value:new Rect$3(n.dom).width};return tryCastDimensionsToUnit(l,c,o)}class ImageCustomResizeFormView extends View$1{constructor(n,a,l){super(n);E(this,"focusTracker");E(this,"keystrokes");E(this,"unit");E(this,"labeledInput");E(this,"saveButtonView");E(this,"cancelButtonView");E(this,"_focusables");E(this,"_focusCycler");E(this,"_validators");const c=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.unit=a,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(c("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(c("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._validators=l,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(n,a,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:a,tooltip:!0}),u.extendTemplate({attributes:{class:l}}),c&&u.delegate("execute").to(this,c),u}_createLabeledInputView(){const n=this.locale.t,a=new LabeledFieldView(this.locale,createLabeledInputNumber);return a.label=n("Resize image (in %0)",this.unit),a.fieldView.set({step:.1}),a}isValid(){this.resetFormStatus();for(const n of this._validators){const a=n(this);if(a)return this.labeledInput.errorText=a,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:n}=this.labeledInput.fieldView;return n?n.value:null}get parsedSize(){const{rawSize:n}=this;if(n===null)return null;const a=Number.parseFloat(n);return Number.isNaN(a)?null:a}get sizeWithUnits(){const{parsedSize:n,unit:a}=this;return n===null?null:`${n}${a}`}}function getSelectedImagePossibleResizeRange(s,o){const n=getSelectedImageEditorNodes(s);if(!n)return null;const a=calculateResizeHostAncestorWidth(n.dom),l=tryParseDimensionWithUnit(window.getComputedStyle(n.dom).minWidth)||{value:1},c=Math.max(.1,tryCastDimensionsToUnit(a,l,o).value);return{unit:o,lower:c,upper:o==="px"?a:100}}class ImageCustomResizeUI extends Plugin{constructor(){super(...arguments);E(this,"_balloon");E(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(n){const a=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(ImageCustomResizeFormView))(a.locale,n,getFormValidators$2(a)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(a.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{a.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(l,c)=>{this._hideForm(!0),c()}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(n){if(this._isVisible)return;this._form||this._createForm(n);const a=this.editor,l=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(a)});const c=getSelectedImageWidthInUnits(a,n),u=c?c.value.toFixed(1):"",d=getSelectedImagePossibleResizeRange(a,n);l.fieldView.value=l.fieldView.element.value=u,d&&Object.assign(l.fieldView,{min:d.lower.toFixed(1),max:Math.ceil(d.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(n=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),n&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function getFormValidators$2(s){const o=s.t;return[n=>{if(n.rawSize.trim()==="")return o("The value must not be empty.");if(n.parsedSize===null)return o("The value should be a plain number.")}]}class ImageResize extends Plugin{static get requires(){return[ImageResizeEditing,ImageResizeHandles,ImageCustomResizeUI,ImageResizeButtons]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class ImageStyleCommand extends Command{constructor(n,a){super(n);E(this,"_defaultStyles");E(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(a.map(l=>{if(l.isDefault)for(const c of l.modelElements)this._defaultStyles[c]=l.name;return[l.name,l]}))}refresh(){const l=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!l,this.isEnabled?l.hasAttribute("imageStyle")?this.value=l.getAttribute("imageStyle"):this.value=this._defaultStyles[l.name]:this.value=!1}execute(n={}){const a=this.editor,l=a.model,c=a.plugins.get("ImageUtils");l.change(u=>{const d=n.value,{setImageSizes:h=!0}=n;let f=c.getClosestSelectedImageElement(l.document.selection);d&&this.shouldConvertImageType(d,f)&&(this.editor.execute(c.isBlockImage(f)?"imageTypeInline":"imageTypeBlock",{setImageSizes:h}),f=c.getClosestSelectedImageElement(l.document.selection)),!d||this._styles.get(d).isDefault?u.removeAttribute("imageStyle",f):u.setAttribute("imageStyle",d,f),h&&c.setImageNaturalSizeAttributes(f)})}shouldConvertImageType(n,a){return!this._styles.get(n).modelElements.includes(a.name)}}const DEFAULT_OPTIONS={get inline(){return{name:"inline",title:"In line",icon:icons.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:icons.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:icons.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:icons.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:icons.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:icons.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},DEFAULT_ICONS={full:icons.objectFullWidth,left:icons.objectBlockLeft,right:icons.objectBlockRight,center:icons.objectCenter,inlineLeft:icons.objectLeft,inlineRight:icons.objectRight,inline:icons.objectInline},DEFAULT_DROPDOWN_DEFINITIONS=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function normalizeStyles(s){return(s.configuredStyles.options||[]).map(a=>normalizeDefinition(a)).filter(a=>isValidOption(a,s))}function getDefaultStylesConfiguration(s,o){return s&&o?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:s?{options:["block","side"]}:o?{options:["inline","alignLeft","alignRight"]}:{}}function getDefaultDropdownDefinitions(s){return s.has("ImageBlockEditing")&&s.has("ImageInlineEditing")?[...DEFAULT_DROPDOWN_DEFINITIONS]:[]}function normalizeDefinition(s){return typeof s=="string"?DEFAULT_OPTIONS[s]?s={...DEFAULT_OPTIONS[s]}:s={name:s}:s=extendStyle(DEFAULT_OPTIONS[s.name],s),typeof s.icon=="string"&&(s.icon=DEFAULT_ICONS[s.icon]||s.icon),s}function isValidOption(s,{isBlockPluginLoaded:o,isInlinePluginLoaded:n}){const{modelElements:a,name:l}=s;if(!a||!a.length||!l)return warnInvalidStyle({style:s}),!1;{const c=[o?"imageBlock":null,n?"imageInline":null];if(!a.some(u=>c.includes(u)))return logWarning("image-style-missing-dependency",{style:s,missingPlugins:a.map(u=>u==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function extendStyle(s,o){const n={...o};for(const a in s)Object.prototype.hasOwnProperty.call(o,a)||(n[a]=s[a]);return n}function warnInvalidStyle(s){logWarning("image-style-configuration-definition-invalid",s)}var utils$2={normalizeStyles,getDefaultStylesConfiguration,getDefaultDropdownDefinitions,warnInvalidStyle,DEFAULT_OPTIONS,DEFAULT_ICONS,DEFAULT_DROPDOWN_DEFINITIONS};function modelToViewStyleAttribute(s){return(o,n,a)=>{if(!a.consumable.consume(n.item,o.name))return;const l=getStyleDefinitionByName(n.attributeNewValue,s),c=getStyleDefinitionByName(n.attributeOldValue,s),u=a.mapper.toViewElement(n.item),d=a.writer;c&&d.removeClass(c.className,u),l&&d.addClass(l.className,u)}}function viewToModelStyleAttribute(s){const o={imageInline:s.filter(n=>!n.isDefault&&n.modelElements.includes("imageInline")),imageBlock:s.filter(n=>!n.isDefault&&n.modelElements.includes("imageBlock"))};return(n,a,l)=>{if(!a.modelRange)return;const c=a.viewItem,u=first(a.modelRange.getItems());if(u&&l.schema.checkAttribute(u,"imageStyle"))for(const d of o[u.name])l.consumable.consume(c,{classes:d.className})&&l.writer.setAttribute("imageStyle",d.name,u)}}function getStyleDefinitionByName(s,o){for(const n of o)if(n.name===s)return n}class ImageStyleEditing extends Plugin{constructor(){super(...arguments);E(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const{normalizeStyles:n,getDefaultStylesConfiguration:a}=utils$2,l=this.editor,c=l.plugins.has("ImageBlockEditing"),u=l.plugins.has("ImageInlineEditing");l.config.define("image.styles",a(c,u)),this.normalizedStyles=n({configuredStyles:l.config.get("image.styles"),isBlockPluginLoaded:c,isInlinePluginLoaded:u}),this._setupConversion(c,u),this._setupPostFixer(),l.commands.add("imageStyle",new ImageStyleCommand(l,this.normalizedStyles))}_setupConversion(n,a){const l=this.editor,c=l.model.schema,u=modelToViewStyleAttribute(this.normalizedStyles),d=viewToModelStyleAttribute(this.normalizedStyles);l.editing.downcastDispatcher.on("attribute:imageStyle",u),l.data.downcastDispatcher.on("attribute:imageStyle",u),n&&(c.extend("imageBlock",{allowAttributes:"imageStyle"}),l.data.upcastDispatcher.on("element:figure",d,{priority:"low"})),a&&(c.extend("imageInline",{allowAttributes:"imageStyle"}),l.data.upcastDispatcher.on("element:img",d,{priority:"low"}))}_setupPostFixer(){const n=this.editor,a=n.model.document,l=n.plugins.get(ImageUtils),c=new Map(this.normalizedStyles.map(u=>[u.name,u]));a.registerPostFixer(u=>{let d=!1;for(const h of a.differ.getChanges())if(h.type=="insert"||h.type=="attribute"&&h.attributeKey=="imageStyle"){let f=h.type=="insert"?h.position.nodeAfter:h.range.start.nodeAfter;if(f&&f.is("element","paragraph")&&f.childCount>0&&(f=f.getChild(0)),!l.isImage(f))continue;const g=f.getAttribute("imageStyle");if(!g)continue;const p=c.get(g);(!p||!p.modelElements.includes(f.name))&&(u.removeAttribute("imageStyle",f),d=!0)}return d})}}class ImageStyleUI extends Plugin{static get requires(){return[ImageStyleEditing]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const o=this.editor.t;return{"Wrap text":o("Wrap text"),"Break text":o("Break text"),"In line":o("In line"),"Full size image":o("Full size image"),"Side image":o("Side image"),"Left aligned image":o("Left aligned image"),"Centered image":o("Centered image"),"Right aligned image":o("Right aligned image")}}init(){const o=this.editor.plugins,n=this.editor.config.get("image.toolbar")||[],a=o.get("ImageStyleEditing"),l=translateStyles(a.normalizedStyles,this.localizedDefaultStylesTitles);for(const u of l)this._createButton(u);const c=translateStyles([...n.filter(isObject$6),...utils$2.getDefaultDropdownDefinitions(o)],this.localizedDefaultStylesTitles);for(const u of c)this._createDropdown(u,l)}_createDropdown(o,n){const a=this.editor.ui.componentFactory;a.add(o.name,l=>{let c;const{defaultItem:u,items:d,title:h}=o,f=d.filter(b=>n.find(({name:_})=>getUIComponentName(_)===b)).map(b=>{const _=a.create(b);return b===u&&(c=_),_});d.length!==f.length&&utils$2.warnInvalidStyle({dropdown:o});const g=createDropdown(l,SplitButtonView),p=g.buttonView,v=p.arrowView;return addToolbarToDropdown(g,f,{enableActiveItemFocusOnDropdownOpen:!0}),p.set({label:getDropdownButtonTitle(h,c.label),class:null,tooltip:!0}),v.unbind("label"),v.set({label:h}),p.bind("icon").toMany(f,"isOn",(...b)=>{const _=b.findIndex(identity$1);return _<0?c.icon:f[_].icon}),p.bind("label").toMany(f,"isOn",(...b)=>{const _=b.findIndex(identity$1);return getDropdownButtonTitle(h,_<0?c.label:f[_].label)}),p.bind("isOn").toMany(f,"isOn",(...b)=>b.some(identity$1)),p.bind("class").toMany(f,"isOn",(...b)=>b.some(identity$1)?"ck-splitbutton_flatten":void 0),p.on("execute",()=>{f.some(({isOn:b})=>b)?g.isOpen=!g.isOpen:c.fire("execute")}),g.bind("isEnabled").toMany(f,"isEnabled",(...b)=>b.some(identity$1)),this.listenTo(g,"execute",()=>{this.editor.editing.view.focus()}),g})}_createButton(o){const n=o.name;this.editor.ui.componentFactory.add(getUIComponentName(n),a=>{const l=this.editor.commands.get("imageStyle"),c=new ButtonView(a);return c.set({label:o.title,icon:o.icon,tooltip:!0,isToggleable:!0}),c.bind("isEnabled").to(l,"isEnabled"),c.bind("isOn").to(l,"value",u=>u===n),c.on("execute",this._executeCommand.bind(this,n)),c})}_executeCommand(o){this.editor.execute("imageStyle",{value:o}),this.editor.editing.view.focus()}}function translateStyles(s,o){for(const n of s)o[n.title]&&(n.title=o[n.title]);return s}function getUIComponentName(s){return`imageStyle:${s}`}function getDropdownButtonTitle(s,o){return(s?s+": ":"")+o}class ImageStyle extends Plugin{static get requires(){return[ImageStyleEditing,ImageStyleUI]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class ImageToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository,ImageUtils]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const o=this.editor,n=o.t,a=o.plugins.get(WidgetToolbarRepository),l=o.plugins.get("ImageUtils");a.register("image",{ariaLabel:n("Image toolbar"),items:normalizeDeclarativeConfig(o.config.get("image.toolbar")||[]),getRelatedElement:c=>l.getClosestSelectedImageWidget(c)})}}function normalizeDeclarativeConfig(s){return s.map(o=>isObject$6(o)?o.name:o)}class PictureEditing extends Plugin{static get requires(){return[ImageEditing,ImageUtils]}static get pluginName(){return"PictureEditing"}static get isOfficialPlugin(){return!0}afterInit(){const o=this.editor;o.plugins.has("ImageBlockEditing")&&o.model.schema.extend("imageBlock",{allowAttributes:["sources"]}),o.plugins.has("ImageInlineEditing")&&o.model.schema.extend("imageInline",{allowAttributes:["sources"]}),this._setupConversion(),this._setupImageUploadEditingIntegration()}_setupConversion(){const o=this.editor,n=o.conversion,a=o.plugins.get("ImageUtils");n.for("upcast").add(upcastPicture(a)),n.for("downcast").add(downcastSourcesAttribute(a))}_setupImageUploadEditingIntegration(){const o=this.editor;if(!o.plugins.has("ImageUploadEditing"))return;const n=o.plugins.get("ImageUploadEditing");this.listenTo(n,"uploadComplete",(a,{imageElement:l,data:c})=>{const u=c.sources;u&&o.model.change(d=>{d.setAttributes({sources:u},l)})})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentEditing extends Plugin{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.commands.add("indent",new MultiCommand(o)),o.commands.add("outdent",new MultiCommand(o))}}class IndentUI extends Plugin{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale,a=o.t,l=n.uiLanguageDirection=="ltr"?icons.indent:icons.outdent,c=n.uiLanguageDirection=="ltr"?icons.outdent:icons.indent;this._defineButton("indent",a("Increase indent"),l),this._defineButton("outdent",a("Decrease indent"),c)}_defineButton(o,n,a){const l=this.editor;l.ui.componentFactory.add(o,()=>{const c=this._createButton(ButtonView,o,n,a);return c.set({tooltip:!0}),c}),l.ui.componentFactory.add("menuBar:"+o,()=>this._createButton(MenuBarMenuListItemButtonView,o,n,a))}_createButton(o,n,a,l){const c=this.editor,u=c.commands.get(n),d=new o(c.locale);return d.set({label:a,icon:l}),d.bind("isEnabled").to(u,"isEnabled"),this.listenTo(d,"execute",()=>{c.execute(n),c.editing.view.focus()}),d}}class Indent extends Plugin{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[IndentEditing,IndentUI]}}class IndentBlockCommand extends Command{constructor(n,a){super(n);E(this,"_indentBehavior");this._indentBehavior=a}refresh(){const a=this.editor.model,l=first(a.document.selection.getSelectedBlocks());if(!l||!this._isIndentationChangeAllowed(l)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(l.getAttribute("blockIndent"))}execute(){const n=this.editor.model,a=this._getBlocksToChange();n.change(l=>{for(const c of a){const u=c.getAttribute("blockIndent"),d=this._indentBehavior.getNextIndent(u);d?l.setAttribute("blockIndent",d,c):l.removeAttribute("blockIndent",c)}})}_getBlocksToChange(){const a=this.editor.model.document.selection;return Array.from(a.getSelectedBlocks()).filter(c=>this._isIndentationChangeAllowed(c))}_isIndentationChangeAllowed(n){const a=this.editor;return a.model.schema.checkAttribute(n,"blockIndent")?!a.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!a.plugins.get("ListUtils").isListItemBlock(n):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingOffset{constructor(o){E(this,"isForward");E(this,"offset");E(this,"unit");this.isForward=o.direction==="forward",this.offset=o.offset,this.unit=o.unit}checkEnabled(o){const n=parseFloat(o||"0");return this.isForward||n>0}getNextIndent(o){const n=parseFloat(o||"0");if(!(!o||o.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const l=this.isForward?this.offset:-this.offset,c=n+l;return c>0?c+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingClasses{constructor(o){E(this,"isForward");E(this,"classes");this.isForward=o.direction==="forward",this.classes=o.classes}checkEnabled(o){const n=this.classes.indexOf(o);return this.isForward?n<this.classes.length-1:n>=0}getNextIndent(o){const n=this.classes.indexOf(o),a=this.isForward?1:-1;return this.classes[n+a]}}const DEFAULT_ELEMENTS=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class IndentBlock extends Plugin{constructor(o){super(o),o.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.config.get("indentBlock");n.classes&&n.classes.length?(this._setupConversionUsingClasses(n.classes),o.commands.add("indentBlock",new IndentBlockCommand(o,new IndentUsingClasses({direction:"forward",classes:n.classes}))),o.commands.add("outdentBlock",new IndentBlockCommand(o,new IndentUsingClasses({direction:"backward",classes:n.classes})))):(o.data.addStyleProcessorRules(addMarginRules),this._setupConversionUsingOffset(),o.commands.add("indentBlock",new IndentBlockCommand(o,new IndentUsingOffset({direction:"forward",offset:n.offset,unit:n.unit}))),o.commands.add("outdentBlock",new IndentBlockCommand(o,new IndentUsingOffset({direction:"backward",offset:n.offset,unit:n.unit}))))}afterInit(){const o=this.editor,n=o.model.schema,a=o.commands.get("indent"),l=o.commands.get("outdent"),c=o.config.get("heading.options");(c&&c.map(h=>h.model)||DEFAULT_ELEMENTS).forEach(h=>{n.isRegistered(h)&&n.extend(h,{allowAttributes:"blockIndent"})}),n.setAttributeProperties("blockIndent",{isFormatting:!0}),a.registerChildCommand(o.commands.get("indentBlock")),l.registerChildCommand(o.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const o=this.editor.conversion,a=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";o.for("upcast").attributeToAttribute({view:{styles:{[a]:/[\s\S]+/}},model:{key:"blockIndent",value:l=>{if(!l.is("element","li"))return l.getStyle(a)}}}),o.for("downcast").attributeToAttribute({model:"blockIndent",view:l=>({key:"style",value:{[a]:l}})})}_setupConversionUsingClasses(o){const n={model:{key:"blockIndent",values:[]},view:{}};for(const a of o)n.model.values.push(a),n.view[a]={key:"class",value:[a]};this.editor.conversion.attributeToAttribute(n)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function stringifyLanguageAttribute(s,o){return o=o||getLanguageDirection(s),`${s}:${o}`}function parseLanguageAttribute(s){const[o,n]=s.split(":");return{languageCode:o,textDirection:n}}class TextPartLanguageCommand extends Command{refresh(){const o=this.editor.model,n=o.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=o.schema.checkAttributeInSelection(n.selection,"language")}execute({languageCode:o,textDirection:n}={}){const a=this.editor.model,c=a.document.selection,u=o?stringifyLanguageAttribute(o,n):!1;a.change(d=>{if(c.isCollapsed)u?d.setSelectionAttribute("language",u):d.removeSelectionAttribute("language");else{const h=a.schema.getValidRanges(c.getRanges(),"language");for(const f of h)u?d.setAttribute("language",u,f):d.removeAttribute("language",f)}})}_getValueFromFirstAllowedNode(){const o=this.editor.model,n=o.schema,a=o.document.selection;if(a.isCollapsed)return a.getAttribute("language")||!1;for(const l of a.getRanges())for(const c of l.getItems())if(n.checkAttribute(c,"language"))return c.getAttribute("language")||!1;return!1}}class TextPartLanguageEditing extends Plugin{static get pluginName(){return"TextPartLanguageEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("language",{textPartLanguage:[{title:"Arabic",languageCode:"ar"},{title:"French",languageCode:"fr"},{title:"Spanish",languageCode:"es"}]})}init(){const o=this.editor;o.model.schema.extend("$text",{allowAttributes:"language"}),o.model.schema.setAttributeProperties("language",{copyOnEnter:!0}),this._defineConverters(),o.commands.add("textPartLanguage",new TextPartLanguageCommand(o))}_defineConverters(){const o=this.editor.conversion;o.for("upcast").elementToAttribute({model:{key:"language",value:n=>{const a=n.getAttribute("lang"),l=n.getAttribute("dir");return stringifyLanguageAttribute(a,l)}},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),o.for("downcast").attributeToElement({model:"language",view:(n,{writer:a},l)=>{if(!n||!l.item.is("$textProxy")&&!l.item.is("documentSelection"))return;const{languageCode:c,textDirection:u}=parseLanguageAttribute(n);return a.createAttributeElement("span",{lang:c,dir:u})}})}}class TextPartLanguageUI extends Plugin{static get pluginName(){return"TextPartLanguageUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t,a=n("Choose language"),l=n("Language");o.ui.componentFactory.add("textPartLanguage",c=>{const{definitions:u,titles:d}=this._getItemMetadata(),h=o.commands.get("textPartLanguage"),f=createDropdown(c);return addListToDropdown(f,u,{ariaLabel:l,role:"menu"}),f.buttonView.set({ariaLabel:l,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:l}),f.extendTemplate({attributes:{class:["ck-text-fragment-language-dropdown"]}}),f.bind("isEnabled").to(h,"isEnabled"),f.buttonView.bind("label").to(h,"value",g=>g&&d[g]||a),f.buttonView.bind("ariaLabel").to(h,"value",g=>{const p=g&&d[g];return p?`${p}, ${l}`:l}),this.listenTo(f,"execute",g=>{h.execute({languageCode:g.source.languageCode,textDirection:g.source.textDirection}),o.editing.view.focus()}),f}),o.ui.componentFactory.add("menuBar:textPartLanguage",c=>{const{definitions:u}=this._getItemMetadata(),d=o.commands.get("textPartLanguage"),h=new MenuBarMenuView(c);h.buttonView.set({label:l});const f=new MenuBarMenuListView(c);f.set({ariaLabel:n("Language"),role:"menu"});for(const g of u){if(g.type!="button"){f.items.add(new ListSeparatorView(c));continue}const p=new MenuBarMenuListItemView(c,h),v=new MenuBarMenuListItemButtonView(c);v.set({role:"menuitemradio",isToggleable:!0}),v.bind(...Object.keys(g.model)).to(g.model),v.delegate("execute").to(h),p.children.add(v),f.items.add(p)}return h.bind("isEnabled").to(d,"isEnabled"),h.panelView.children.add(f),h.on("execute",g=>{d.execute({languageCode:g.source.languageCode,textDirection:g.source.textDirection}),o.editing.view.focus()}),h})}_getItemMetadata(){const o=this.editor,n=new Collection,a={},l=o.commands.get("textPartLanguage"),c=o.config.get("language.textPartLanguage"),u=o.locale.t,d=u("Remove language");n.add({type:"button",model:new Model$1({label:d,languageCode:!1,withText:!0})}),n.add({type:"separator"});for(const h of c){const f={type:"button",model:new Model$1({label:h.title,languageCode:h.languageCode,role:"menuitemradio",textDirection:h.textDirection,withText:!0})},g=stringifyLanguageAttribute(h.languageCode,h.textDirection);f.model.bind("isOn").to(l,"value",p=>p===g),n.add(f),a[g]=h.title}return{definitions:n,titles:a}}}class TextPartLanguage extends Plugin{static get requires(){return[TextPartLanguageEditing,TextPartLanguageUI]}static get pluginName(){return"TextPartLanguage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AutomaticDecorators{constructor(){E(this,"_definitions",new Set)}get length(){return this._definitions.size}add(o){Array.isArray(o)?o.forEach(n=>this._definitions.add(n)):this._definitions.add(o)}getDispatcher(){return o=>{o.on("attribute:linkHref",(n,a,l)=>{if(!l.consumable.test(a.item,"attribute:linkHref")||!(a.item.is("selection")||l.schema.isInline(a.item)))return;const c=l.writer,u=c.document.selection;for(const d of this._definitions){const h=c.createAttributeElement("a",d.attributes,{priority:5});d.classes&&c.addClass(d.classes,h);for(const f in d.styles)c.setStyle(f,d.styles[f],h);c.setCustomProperty("link",!0,h),d.callback(a.attributeNewValue)?a.item.is("selection")?c.wrap(u.getFirstRange(),h):c.wrap(l.mapper.toViewRange(a.range),h):c.unwrap(l.mapper.toViewRange(a.range),h)}},{priority:"high"})}}getDispatcherForLinkedImage(){return o=>{o.on("attribute:linkHref:imageBlock",(n,a,{writer:l,mapper:c})=>{const u=c.toViewElement(a.item),d=Array.from(u.getChildren()).find(h=>h.is("element","a"));if(d)for(const h of this._definitions){const f=toMap(h.attributes);if(h.callback(a.attributeNewValue)){for(const[g,p]of f)g==="class"?l.addClass(p,d):l.setAttribute(g,p,d);h.classes&&l.addClass(h.classes,d);for(const g in h.styles)l.setStyle(g,h.styles[g],d)}else{for(const[g,p]of f)g==="class"?l.removeClass(p,d):l.removeAttribute(g,d);h.classes&&l.removeClass(h.classes,d);for(const g in h.styles)l.removeStyle(g,d)}}})}}}const ATTRIBUTE_WHITESPACES=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,SAFE_URL_TEMPLATE="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",EMAIL_REG_EXP=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,PROTOCOL_REG_EXP=/^((\w+:(\/{2,})?)|(\W))/i,DEFAULT_LINK_PROTOCOLS=["https?","ftps?","mailto"],LINK_KEYSTROKE="Ctrl+K";function isLinkElement(s){return s.is("attributeElement")&&!!s.getCustomProperty("link")}function createLinkElement(s,{writer:o}){const n=o.createAttributeElement("a",{href:s},{priority:5});return o.setCustomProperty("link",!0,n),n}function ensureSafeUrl(s,o=DEFAULT_LINK_PROTOCOLS){const n=String(s),a=o.join("|"),l=new RegExp(`${SAFE_URL_TEMPLATE.replace("<protocols>",a)}`,"i");return isSafeUrl(n,l)?n:"#"}function isSafeUrl(s,o){return!!s.replace(ATTRIBUTE_WHITESPACES,"").match(o)}function getLocalizedDecorators(s,o){const n={"Open in a new tab":s("Open in a new tab"),Downloadable:s("Downloadable")};return o.forEach(a=>("label"in a&&n[a.label]&&(a.label=n[a.label]),a)),o}function normalizeDecorators(s){const o=[];if(s)for(const[n,a]of Object.entries(s)){const l=Object.assign({},a,{id:`link${upperFirst(n)}`});o.push(l)}return o}function isLinkableElement(s,o){return s?o.checkAttribute(s.name,"linkHref"):!1}function isEmail(s){return EMAIL_REG_EXP.test(s)}function addLinkProtocolIfApplicable(s,o){const n=isEmail(s)?"mailto:":o,a=!!n&&!linkHasProtocol(s);return s&&a?n+s:s}function linkHasProtocol(s){return PROTOCOL_REG_EXP.test(s)}function openLink(s){window.open(s,"_blank","noopener")}function createBookmarkCallbacks(s){const o=s.plugins.has("BookmarkEditing")?s.plugins.get("BookmarkEditing"):null;function n(l){return!!l&&l.startsWith("#")&&!!o&&!!o.getElementForBookmarkId(l.slice(1))}function a(l){const c=l.slice(1),u=o.getElementForBookmarkId(c);s.model.change(d=>{d.setSelection(u,"on")}),s.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:n,scrollToTarget:a}}class LinkCommand extends Command{constructor(){super(...arguments);E(this,"manualDecorators",new Collection);E(this,"automaticDecorators",new AutomaticDecorators)}restoreManualDecoratorStates(){for(const n of this.manualDecorators)n.value=this._getDecoratorStateFromModel(n.id)}refresh(){const n=this.editor.model,a=n.document.selection,l=a.getSelectedElement()||first(a.getSelectedBlocks());isLinkableElement(l,n.schema)?(this.value=l.getAttribute("linkHref"),this.isEnabled=n.schema.checkAttribute(l,"linkHref")):(this.value=a.getAttribute("linkHref"),this.isEnabled=n.schema.checkAttributeInSelection(a,"linkHref"));for(const c of this.manualDecorators)c.value=this._getDecoratorStateFromModel(c.id)}execute(n,a={}){const l=this.editor.model,c=l.document.selection,u=[],d=[];for(const h in a)a[h]?u.push(h):d.push(h);l.change(h=>{if(c.isCollapsed){const f=c.getFirstPosition();if(c.hasAttribute("linkHref")){const g=extractTextFromSelection(c);let p=findAttributeRange(f,"linkHref",c.getAttribute("linkHref"),l);c.getAttribute("linkHref")===g&&(p=this._updateLinkContent(l,h,p,n)),h.setAttribute("linkHref",n,p),u.forEach(v=>{h.setAttribute(v,!0,p)}),d.forEach(v=>{h.removeAttribute(v,p)}),h.setSelection(h.createPositionAfter(p.end.nodeBefore))}else if(n!==""){const g=toMap(c.getAttributes());g.set("linkHref",n),u.forEach(v=>{g.set(v,!0)});const{end:p}=l.insertContent(h.createText(n,g),f);h.setSelection(p)}["linkHref",...u,...d].forEach(g=>{h.removeSelectionAttribute(g)})}else{const f=l.schema.getValidRanges(c.getRanges(),"linkHref"),g=[];for(const v of c.getSelectedBlocks())l.schema.checkAttribute(v,"linkHref")&&g.push(h.createRangeOn(v));const p=g.slice();for(const v of f)this._isRangeToUpdate(v,g)&&p.push(v);for(const v of p){let b=v;if(p.length===1){const _=extractTextFromSelection(c);c.getAttribute("linkHref")===_&&(b=this._updateLinkContent(l,h,v,n),h.setSelection(h.createSelection(b)))}h.setAttribute("linkHref",n,b),u.forEach(_=>{h.setAttribute(_,!0,b)}),d.forEach(_=>{h.removeAttribute(_,b)})}}})}_getDecoratorStateFromModel(n){const a=this.editor.model,l=a.document.selection,c=l.getSelectedElement();return isLinkableElement(c,a.schema)?c.getAttribute(n):l.getAttribute(n)}_isRangeToUpdate(n,a){for(const l of a)if(l.containsRange(n))return!1;return!0}_updateLinkContent(n,a,l,c){const u=a.createText(c,{linkHref:c});return n.insertContent(u,l)}}function extractTextFromSelection(s){if(s.isCollapsed){const o=s.getFirstPosition();return o.textNode&&o.textNode.data}else{const o=Array.from(s.getFirstRange().getItems());if(o.length>1)return null;const n=o[0];return n.is("$text")||n.is("$textProxy")?n.data:null}}class UnlinkCommand extends Command{refresh(){const o=this.editor.model,n=o.document.selection,a=n.getSelectedElement();isLinkableElement(a,o.schema)?this.isEnabled=o.schema.checkAttribute(a,"linkHref"):this.isEnabled=o.schema.checkAttributeInSelection(n,"linkHref")}execute(){const o=this.editor,n=this.editor.model,a=n.document.selection,l=o.commands.get("link");n.change(c=>{const u=a.isCollapsed?[findAttributeRange(a.getFirstPosition(),"linkHref",a.getAttribute("linkHref"),n)]:n.schema.getValidRanges(a.getRanges(),"linkHref");for(const d of u)if(c.removeAttribute("linkHref",d),l)for(const h of l.manualDecorators)c.removeAttribute(h.id,d)})}}class ManualDecorator extends ObservableMixin(){constructor({id:n,label:a,attributes:l,classes:c,styles:u,defaultValue:d}){super();E(this,"id");E(this,"defaultValue");E(this,"label");E(this,"attributes");E(this,"classes");E(this,"styles");this.id=n,this.set("value",void 0),this.defaultValue=d,this.label=a,this.attributes=l,this.classes=c,this.styles=u}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const HIGHLIGHT_CLASS="ck-link_selected",DECORATOR_AUTOMATIC="automatic",DECORATOR_MANUAL="manual",EXTERNAL_LINKS_REGEXP=/^(https?:)?\/\//;class LinkEditing extends Plugin{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement,Input,ClipboardPipeline]}constructor(o){super(o),o.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const o=this.editor,n=this.editor.config.get("link.allowedProtocols");o.model.schema.extend("$text",{allowAttributes:"linkHref"}),o.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:createLinkElement}),o.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(c,u)=>createLinkElement(ensureSafeUrl(c,n),u)}),o.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:c=>c.getAttribute("href")}}),o.commands.add("link",new LinkCommand(o)),o.commands.add("unlink",new UnlinkCommand(o));const a=getLocalizedDecorators(o.t,normalizeDecorators(o.config.get("link.decorators")));this._enableAutomaticDecorators(a.filter(c=>c.mode===DECORATOR_AUTOMATIC)),this._enableManualDecorators(a.filter(c=>c.mode===DECORATOR_MANUAL)),o.plugins.get(TwoStepCaretMovement).registerAttribute("linkHref"),inlineHighlight(o,"linkHref","a",HIGHLIGHT_CLASS),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(o){const n=this.editor,l=n.commands.get("link").automaticDecorators;n.config.get("link.addTargetToExternalLinks")&&l.add({id:"linkIsExternal",mode:DECORATOR_AUTOMATIC,callback:c=>!!c&&EXTERNAL_LINKS_REGEXP.test(c),attributes:{target:"_blank",rel:"noopener noreferrer"}}),l.add(o),l.length&&n.conversion.for("downcast").add(l.getDispatcher())}_enableManualDecorators(o){if(!o.length)return;const n=this.editor,l=n.commands.get("link").manualDecorators;o.forEach(c=>{n.model.schema.extend("$text",{allowAttributes:c.id});const u=new ManualDecorator(c);l.add(u),n.conversion.for("downcast").attributeToElement({model:u.id,view:(d,{writer:h,schema:f},{item:g})=>{if((g.is("selection")||f.isInline(g))&&d){const p=h.createAttributeElement("a",u.attributes,{priority:5});u.classes&&h.addClass(u.classes,p);for(const v in u.styles)h.setStyle(v,u.styles[v],p);return h.setCustomProperty("link",!0,p),p}}}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",...u._createPattern()},model:{key:u.id}})})}_enableLinkOpen(){const o=this.editor,a=o.editing.view.document,l=createBookmarkCallbacks(o);function c(u){l.isScrollableToTarget(u)?l.scrollToTarget(u):openLink(u)}this.listenTo(a,"click",(u,d)=>{if(!(env$1.isMac?d.domEvent.metaKey:d.domEvent.ctrlKey))return;let f=d.domTarget;if(f.tagName.toLowerCase()!="a"&&(f=f.closest("a")),!f)return;const g=f.getAttribute("href");g&&(u.stop(),d.preventDefault(),c(g))},{context:"$capture"}),this.listenTo(a,"keydown",(u,d)=>{const f=o.commands.get("link").value;f&&d.keyCode===keyCodes.enter&&d.altKey&&(u.stop(),c(f))})}_enableSelectionAttributesFixer(){const n=this.editor.model,a=n.document.selection;this.listenTo(a,"change:attribute",(l,{attributeKeys:c})=>{!c.includes("linkHref")||a.hasAttribute("linkHref")||n.change(u=>{removeLinkAttributesFromSelection(u,getLinkAttributesAllowedOnText(n.schema))})})}_enableClipboardIntegration(){const o=this.editor,n=o.model,a=this.editor.config.get("link.defaultProtocol");a&&this.listenTo(o.plugins.get("ClipboardPipeline"),"contentInsertion",(l,c)=>{n.change(u=>{const d=u.createRangeIn(c.content);for(const h of d.getItems())if(h.hasAttribute("linkHref")){const f=addLinkProtocolIfApplicable(h.getAttribute("linkHref"),a);u.setAttribute("linkHref",f,h)}})})}}function removeLinkAttributesFromSelection(s,o){s.removeSelectionAttribute("linkHref");for(const n of o)s.removeSelectionAttribute(n)}function getLinkAttributesAllowedOnText(s){return s.getDefinition("$text").allowAttributes.filter(n=>n.startsWith("link"))}class LinkFormView extends View$1{constructor(n,a,l){super(n);E(this,"focusTracker",new FocusTracker);E(this,"keystrokes",new KeystrokeHandler);E(this,"urlInputView");E(this,"saveButtonView");E(this,"cancelButtonView");E(this,"_manualDecoratorSwitches");E(this,"children");E(this,"_validators");E(this,"_focusables",new ViewCollection);E(this,"_focusCycler");const c=n.t;this._validators=l,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(c("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(c("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(a),this.children=this._createFormChildren(a.manualDecorators),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const u=["ck","ck-link-form","ck-responsive-form"];a.manualDecorators.length&&u.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:u,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((n,a)=>(n[a.name]=a.isOn,n),{})}render(){super.render(),submitHandler({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(a=>{this._focusables.add(a),this.focusTracker.add(a.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const n of this._validators){const a=n(this);if(a)return this.urlInputView.errorText=a,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const n=this.locale.t,a=new LabeledFieldView(this.locale,createLabeledInputText);return a.fieldView.inputMode="url",a.label=n("Link URL"),a}_createButton(n,a,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:a,tooltip:!0}),u.extendTemplate({attributes:{class:l}}),c&&u.delegate("execute").to(this,c),u}_createManualDecoratorSwitches(n){const a=this.createCollection();for(const l of n.manualDecorators){const c=new SwitchButtonView(this.locale);c.set({name:l.id,label:l.label,withText:!0}),c.bind("isOn").toMany([l,n],"value",(u,d)=>d===void 0&&u===void 0?!!l.defaultValue:!!u),c.on("execute",()=>{l.set("value",!c.isOn)}),a.add(c)}return a}_createFormChildren(n){const a=this.createCollection();if(a.add(this.urlInputView),n.length){const l=new View$1;l.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(c=>({tag:"li",children:[c],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),a.add(l)}return a.add(this.saveButtonView),a.add(this.cancelButtonView),a}get url(){const{element:n}=this.urlInputView.fieldView;return n?n.value.trim():null}}var unlinkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class LinkActionsView extends View$1{constructor(n,a={},l){super(n);E(this,"focusTracker",new FocusTracker);E(this,"keystrokes",new KeystrokeHandler);E(this,"previewButtonView");E(this,"unlinkButtonView");E(this,"editButtonView");E(this,"_focusables",new ViewCollection);E(this,"_focusCycler");E(this,"_linkConfig");E(this,"_options");const c=n.t;this._options=l,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(c("Unlink"),unlinkIcon,"unlink"),this.editButtonView=this._createButton(c("Edit link"),icons.pencil,"edit"),this.set("href",void 0),this._linkConfig=a,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(a=>{this._focusables.add(a),this.focusTracker.add(a.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(n,a,l){const c=new ButtonView(this.locale);return c.set({label:n,icon:a,tooltip:!0}),c.delegate("execute").to(this,l),c}_createPreviewButton(){const n=new ButtonView(this.locale),a=this.bindTemplate,l=this.t;return n.set({withText:!0}),n.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:a.to("href",c=>c&&ensureSafeUrl(c,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:a.to(c=>{this._options&&this._options.isScrollableToTarget(this.href)?(c.preventDefault(),this._options.scrollToTarget(this.href)):openLink(this.href)})}}),n.bind("tooltip").to(this,"href",c=>this._options&&this._options.isScrollableToTarget(c)?l("Scroll to target"):l("Open link in new tab")),n.bind("label").to(this,"href",c=>c||l("This link has no URL")),n.bind("isEnabled").to(this,"href",c=>!!c),n.template.tag="a",n}}var linkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const VISUAL_SELECTION_MARKER_NAME="link-ui";class LinkUI extends Plugin{constructor(){super(...arguments);E(this,"actionsView",null);E(this,"formView",null);E(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=this.editor.t;n.editing.view.addObserver(ClickObserver),this._balloon=n.plugins.get(ContextualBalloon),this._createToolbarLinkButton(),this._enableBalloonActivators(),n.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME,view:{classes:["ck-fake-link-selection"]}}),n.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME,view:(l,{writer:c})=>{if(!l.markerRange.isCollapsed)return null;const u=c.createUIElement("span");return c.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],u),u}}),n.accessibility.addKeystrokeInfos({keystrokes:[{label:a("Create link"),keystroke:LINK_KEYSTROKE},{label:a("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const n=this.editor,a=new LinkActionsView(n.locale,n.config.get("link"),createBookmarkCallbacks(n)),l=n.commands.get("link"),c=n.commands.get("unlink");return a.bind("href").to(l,"value"),a.editButtonView.bind("isEnabled").to(l),a.unlinkButtonView.bind("isEnabled").to(c),this.listenTo(a,"edit",()=>{this._addFormView()}),this.listenTo(a,"unlink",()=>{n.execute("unlink"),this._hideUI()}),a.keystrokes.set("Esc",(u,d)=>{this._hideUI(),d()}),a.keystrokes.set(LINK_KEYSTROKE,(u,d)=>{this._addFormView(),d()}),a}_createFormView(){const n=this.editor,a=n.commands.get("link"),l=n.config.get("link.defaultProtocol"),c=new(CssTransitionDisablerMixin(LinkFormView))(n.locale,a,getFormValidators$1(n));return c.urlInputView.fieldView.bind("value").to(a,"value"),c.urlInputView.bind("isEnabled").to(a,"isEnabled"),c.saveButtonView.bind("isEnabled").to(a,"isEnabled"),this.listenTo(c,"submit",()=>{if(c.isValid()){const{value:u}=c.urlInputView.fieldView.element,d=addLinkProtocolIfApplicable(u,l);n.execute("link",d,c.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(c.urlInputView,"change:errorText",()=>{n.ui.update()}),this.listenTo(c,"cancel",()=>{this._closeFormView()}),c.keystrokes.set("Esc",(u,d)=>{this._closeFormView(),d()}),c}_createToolbarLinkButton(){const n=this.editor;n.ui.componentFactory.add("link",()=>{const a=this._createButton(ButtonView);return a.set({tooltip:!0}),a}),n.ui.componentFactory.add("menuBar:link",()=>{const a=this._createButton(MenuBarMenuListItemButtonView);return a.set({role:"menuitemcheckbox"}),a})}_createButton(n){const a=this.editor,l=a.locale,c=a.commands.get("link"),u=new n(a.locale),d=l.t;return u.set({label:d("Link"),icon:linkIcon,keystroke:LINK_KEYSTROKE,isToggleable:!0}),u.bind("isEnabled").to(c,"isEnabled"),u.bind("isOn").to(c,"value",h=>!!h),this.listenTo(u,"execute",()=>this._showUI(!0)),u}_enableBalloonActivators(){const n=this.editor,a=n.editing.view.document;this.listenTo(a,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),n.keystrokes.set(LINK_KEYSTROKE,(l,c)=>{c(),n.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(n,a)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),a())},{priority:"high"}),this.editor.keystrokes.set("Esc",(n,a)=>{this._isUIVisible&&(this._hideUI(),a())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const a=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=a.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const n=this.editor.commands.get("link");n.restoreManualDecoratorStates(),n.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(n=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),n&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),n&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const n=this.editor;this.stopListening(n.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),n.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const n=this.editor,a=n.editing.view.document;let l=this._getSelectedLinkElement(),c=d();const u=()=>{const h=this._getSelectedLinkElement(),f=d();l&&!h||!l&&f!==c?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),l=h,c=f};function d(){return a.selection.focus.getAncestors().reverse().find(h=>h.is("element"))}this.listenTo(n.ui,"update",u),this.listenTo(this._balloon,"change:visibleView",u)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const n=this._balloon.visibleView;return!!this.formView&&n==this.formView||this._areActionsVisible}_getBalloonPositionData(){const n=this.editor.editing.view,a=this.editor.model,l=n.document;let c;if(a.markers.has(VISUAL_SELECTION_MARKER_NAME)){const u=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME)),d=n.createRange(n.createPositionBefore(u[0]),n.createPositionAfter(u[u.length-1]));c=n.domConverter.viewRangeToDom(d)}else c=()=>{const u=this._getSelectedLinkElement();return u?n.domConverter.mapViewToDom(u):n.domConverter.viewRangeToDom(l.selection.getFirstRange())};return{target:c}}_getSelectedLinkElement(){const n=this.editor.editing.view,a=n.document.selection,l=a.getSelectedElement();if(a.isCollapsed||l&&isWidget(l))return findLinkElementAncestor(a.getFirstPosition());{const c=a.getFirstRange().getTrimmed(),u=findLinkElementAncestor(c.start),d=findLinkElementAncestor(c.end);return!u||u!=d?null:n.createRangeIn(u).getTrimmed().isEqual(c)?u:null}}_showFakeVisualSelection(){const n=this.editor.model;n.change(a=>{const l=n.document.selection.getFirstRange();if(n.markers.has(VISUAL_SELECTION_MARKER_NAME))a.updateMarker(VISUAL_SELECTION_MARKER_NAME,{range:l});else if(l.start.isAtEnd){const c=l.start.getLastMatchingPosition(({item:u})=>!n.schema.isContent(u),{boundaries:l});a.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:a.createRange(c,l.end)})}else a.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:l})})}_hideFakeVisualSelection(){const n=this.editor.model;n.markers.has(VISUAL_SELECTION_MARKER_NAME)&&n.change(a=>{a.removeMarker(VISUAL_SELECTION_MARKER_NAME)})}}function findLinkElementAncestor(s){return s.getAncestors().find(o=>isLinkElement(o))||null}function getFormValidators$1(s){const o=s.t,n=s.config.get("link.allowCreatingEmptyLinks");return[a=>{if(!n&&!a.url.length)return o("Link URL must not be empty.")}]}const MIN_LINK_LENGTH_WITH_SPACE_AT_END=4,URL_REG_EXP=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),URL_GROUP_IN_MATCH=2;class AutoLink extends Plugin{static get requires(){return[Delete,LinkEditing]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const n=this.editor.model.document.selection;n.on("change:range",()=>{this.isEnabled=!n.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(o,n){return n.textNode&&n.textNode.hasAttribute("linkHref")?findAttributeRange(n,"linkHref",n.textNode.getAttribute("linkHref"),o):null}_selectEntireLinks(o,n){const l=this.editor.model,c=l.document.selection,u=c.getFirstPosition(),d=c.getLastPosition();let h=n.getJoined(this._expandLinkRange(l,u)||n);h&&(h=h.getJoined(this._expandLinkRange(l,d)||n)),h&&(h.start.isBefore(u)||h.end.isAfter(d))&&o.setSelection(h)}_enablePasteLinking(){const o=this.editor,n=o.model,a=n.document.selection,l=o.plugins.get("ClipboardPipeline"),c=o.commands.get("link");l.on("inputTransformation",(u,d)=>{if(!this.isEnabled||!c.isEnabled||a.isCollapsed||d.method!=="paste"||a.rangeCount>1)return;const h=a.getFirstRange(),f=d.dataTransfer.getData("text/plain");if(!f)return;const g=f.match(URL_REG_EXP);g&&g[2]===f&&(n.change(p=>{this._selectEntireLinks(p,h),c.execute(f)}),u.stop())},{priority:"high"})}_enableTypingHandling(){const o=this.editor,n=new TextWatcher(o.model,a=>{let l=a;if(!isSingleSpaceAtTheEnd(l))return;l=l.slice(0,-1),"!.:,;?".includes(l[l.length-1])&&(l=l.slice(0,-1));const c=getUrlAtTextEnd(l);if(c)return{url:c,removedTrailingCharacters:a.length-l.length}});n.on("matched:data",(a,l)=>{const{batch:c,range:u,url:d,removedTrailingCharacters:h}=l;if(!c.isTyping)return;const f=u.end.getShiftedBy(-h),g=f.getShiftedBy(-d.length),p=o.model.createRange(g,f);this._applyAutoLink(d,p)}),n.bind("isEnabled").to(this)}_enableEnterHandling(){const o=this.editor,n=o.model,a=o.commands.get("enter");a&&a.on("execute",()=>{const l=n.document.selection.getFirstPosition();if(!l.parent.previousSibling)return;const c=n.createRangeIn(l.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(c)})}_enableShiftEnterHandling(){const o=this.editor,n=o.model,a=o.commands.get("shiftEnter");a&&a.on("execute",()=>{const l=n.document.selection.getFirstPosition(),c=n.createRange(n.createPositionAt(l.parent,0),l.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(c)})}_checkAndApplyAutoLinkOnRange(o){const n=this.editor.model,{text:a,range:l}=getLastTextLine(o,n),c=getUrlAtTextEnd(a);if(c){const u=n.createRange(l.end.getShiftedBy(-c.length),l.end);this._applyAutoLink(c,u)}}_applyAutoLink(o,n){const a=this.editor.model,l=this.editor.config.get("link.defaultProtocol"),c=addLinkProtocolIfApplicable(o,l);!this.isEnabled||!isLinkAllowedOnRange(n,a)||!linkHasProtocol(c)||linkIsAlreadySet(n)||this._persistAutoLink(c,n)}_persistAutoLink(o,n){const a=this.editor.model,l=this.editor.plugins.get("Delete");a.enqueueChange(c=>{c.setAttribute("linkHref",o,n),a.enqueueChange(()=>{l.requestUndoOnBackspace()})})}}function isSingleSpaceAtTheEnd(s){return s.length>MIN_LINK_LENGTH_WITH_SPACE_AT_END&&s[s.length-1]===" "&&s[s.length-2]!==" "}function getUrlAtTextEnd(s){const o=URL_REG_EXP.exec(s);return o?o[URL_GROUP_IN_MATCH]:null}function isLinkAllowedOnRange(s,o){return o.schema.checkAttributeInSelection(o.createSelection(s),"linkHref")}function linkIsAlreadySet(s){const o=s.start.nodeAfter;return!!o&&o.hasAttribute("linkHref")}let Link$1=class extends Plugin{static get requires(){return[LinkEditing,LinkUI,AutoLink]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}};class LinkImageEditing extends Plugin{static get requires(){return["ImageEditing","ImageUtils",LinkEditing]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const o=this.editor,n=o.model.schema;o.plugins.has("ImageBlockEditing")&&n.extend("imageBlock",{allowAttributes:["linkHref"]}),o.conversion.for("upcast").add(upcastLink(o)),o.conversion.for("downcast").add(downcastImageLink(o)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const o=this.editor,a=o.commands.get("link").automaticDecorators;a.length&&o.conversion.for("downcast").add(a.getDispatcherForLinkedImage())}_enableManualDecorators(){const o=this.editor,n=o.commands.get("link");for(const a of n.manualDecorators)o.plugins.has("ImageBlockEditing")&&o.model.schema.extend("imageBlock",{allowAttributes:a.id}),o.plugins.has("ImageInlineEditing")&&o.model.schema.extend("imageInline",{allowAttributes:a.id}),o.conversion.for("downcast").add(downcastImageLinkManualDecorator(a)),o.conversion.for("upcast").add(upcastImageLinkManualDecorator(o,a))}}function upcastLink(s){const o=s.plugins.has("ImageInlineEditing"),n=s.plugins.get("ImageUtils");return a=>{a.on("element:a",(l,c,u)=>{const d=c.viewItem,h=n.findViewImgElement(d);if(!h)return;const f=h.findAncestor(b=>n.isBlockImageView(b));if(o&&!f)return;const g={attributes:["href"]};if(!u.consumable.consume(d,g))return;const p=d.getAttribute("href");if(!p)return;let v=c.modelCursor.parent;if(!v.is("element","imageBlock")){const b=u.convertItem(h,c.modelCursor);c.modelRange=b.modelRange,c.modelCursor=b.modelCursor,v=c.modelCursor.nodeBefore}v&&v.is("element","imageBlock")&&u.writer.setAttribute("linkHref",p,v)},{priority:"high"})}}function downcastImageLink(s){const o=s.plugins.get("ImageUtils");return n=>{n.on("attribute:linkHref:imageBlock",(a,l,c)=>{if(!c.consumable.consume(l.item,a.name))return;const u=c.mapper.toViewElement(l.item),d=c.writer,h=Array.from(u.getChildren()).find(p=>p.is("element","a")),f=o.findViewImgElement(u),g=f.parent.is("element","picture")?f.parent:f;if(h)l.attributeNewValue?d.setAttribute("href",l.attributeNewValue,h):(d.move(d.createRangeOn(g),d.createPositionAt(u,0)),d.remove(h));else{const p=d.createContainerElement("a",{href:l.attributeNewValue});d.insert(d.createPositionAt(u,0),p),d.move(d.createRangeOn(g),d.createPositionAt(p,0))}},{priority:"high"})}}function downcastImageLinkManualDecorator(s){return o=>{o.on(`attribute:${s.id}:imageBlock`,(n,a,l)=>{const c=l.mapper.toViewElement(a.item),u=Array.from(c.getChildren()).find(d=>d.is("element","a"));if(u){for(const[d,h]of toMap(s.attributes))l.writer.setAttribute(d,h,u);s.classes&&l.writer.addClass(s.classes,u);for(const d in s.styles)l.writer.setStyle(d,s.styles[d],u)}})}}function upcastImageLinkManualDecorator(s,o){const n=s.plugins.has("ImageInlineEditing"),a=s.plugins.get("ImageUtils");return l=>{l.on("element:a",(c,u,d)=>{const h=u.viewItem,f=a.findViewImgElement(h);if(!f)return;const g=f.findAncestor(_=>a.isBlockImageView(_));if(n&&!g)return;const v=new Matcher(o._createPattern()).match(h);if(!v||!d.consumable.consume(h,v.match))return;const b=u.modelCursor.nodeBefore||u.modelCursor.parent;d.writer.setAttribute(o.id,!0,b)},{priority:"high"})}}class LinkImageUI extends Plugin{static get requires(){return[LinkEditing,LinkUI,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.editing.view.document;this.listenTo(n,"click",(a,l)=>{this._isSelectedLinkedImage(o.model.document.selection)&&(l.preventDefault(),a.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const o=this.editor,n=o.t;o.ui.componentFactory.add("linkImage",a=>{const l=new ButtonView(a),c=o.plugins.get("LinkUI"),u=o.commands.get("link");return l.set({isEnabled:!0,label:n("Link image"),icon:linkIcon,keystroke:LINK_KEYSTROKE,tooltip:!0,isToggleable:!0}),l.bind("isEnabled").to(u,"isEnabled"),l.bind("isOn").to(u,"value",d=>!!d),this.listenTo(l,"execute",()=>{this._isSelectedLinkedImage(o.model.document.selection)?c._addActionsView():c._showUI(!0)}),l})}_isSelectedLinkedImage(o){const n=o.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(n)&&n.hasAttribute("linkHref")}}class LinkImage extends Plugin{static get requires(){return[LinkImageEditing,LinkImageUI]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ListWalker{constructor(o,n){E(this,"_startElement");E(this,"_referenceIndent");E(this,"_isForward");E(this,"_includeSelf");E(this,"_sameAttributes");E(this,"_sameIndent");E(this,"_lowerIndent");E(this,"_higherIndent");this._startElement=o,this._referenceIndent=o.getAttribute("listIndent"),this._isForward=n.direction=="forward",this._includeSelf=!!n.includeSelf,this._sameAttributes=toArray$2(n.sameAttributes||[]),this._sameIndent=!!n.sameIndent,this._lowerIndent=!!n.lowerIndent,this._higherIndent=!!n.higherIndent}static first(o,n){const l=new this(o,n)[Symbol.iterator]();return first(l)}*[Symbol.iterator](){const o=[];for(const{node:n}of new SiblingListBlocksIterator(this._getStartNode(),this._isForward?"forward":"backward")){const a=n.getAttribute("listIndent");if(a<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=a}else if(a>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){o.push(n);continue}}else{if(!this._sameIndent){if(this._higherIndent){o.length&&(yield*o,o.length=0);break}continue}if(this._sameAttributes.some(l=>n.getAttribute(l)!==this._startElement.getAttribute(l)))break}o.length&&(yield*o,o.length=0),yield n}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class SiblingListBlocksIterator{constructor(o,n="forward"){E(this,"_node");E(this,"_isForward");E(this,"_previousNodesByIndent",[]);E(this,"_previous",null);E(this,"_previousNodeIndent",null);this._node=o,this._isForward=n==="forward"}[Symbol.iterator](){return this}next(){if(!isListItemBlock(this._node))return{done:!0,value:void 0};const o=this._node.getAttribute("listIndent");let n=null;if(this._previous){const l=this._previousNodeIndent;o>l?this._previousNodesByIndent[l]=this._previous:o<l?(n=this._previousNodesByIndent[o]||null,this._previousNodesByIndent.length=o):n=this._previous}const a={node:this._node,previous:this._previous,previousNodeInList:n};return this._previous=this._node,this._previousNodeIndent=o,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:a,done:!1}}}class ListBlocksIterable{constructor(o){E(this,"_listHead");this._listHead=o}[Symbol.iterator](){return new SiblingListBlocksIterator(this._listHead)}}class ListItemUid{static next(){return uid()}}function isListItemBlock(s){return!!s&&s.is("element")&&s.hasAttribute("listItemId")}function getAllListItemBlocks(s,o={}){return[...getListItemBlocks(s,{...o,direction:"backward"}),...getListItemBlocks(s,{...o,direction:"forward"})]}function getListItemBlocks(s,o={}){const n=o.direction=="forward",a=Array.from(new ListWalker(s,{...o,includeSelf:n,sameIndent:!0,sameAttributes:"listItemId"}));return n?a:a.reverse()}function getNestedListBlocks(s){return Array.from(new ListWalker(s,{direction:"forward",higherIndent:!0}))}function getListItems(s,o){const n=new ListWalker(s,{sameIndent:!0,sameAttributes:"listType",...o}),a=new ListWalker(s,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...o});return[...Array.from(n).reverse(),...a]}function isFirstBlockOfListItem(s){return!ListWalker.first(s,{sameIndent:!0,sameAttributes:"listItemId"})}function isLastBlockOfListItem(s){return!ListWalker.first(s,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function expandListBlocksToCompleteItems(s,o={}){s=toArray$2(s);const n=o.withNested!==!1,a=new Set;for(const l of s)for(const c of getAllListItemBlocks(l,{higherIndent:n}))a.add(c);return sortBlocks(a)}function expandListBlocksToCompleteList(s){s=toArray$2(s);const o=new Set;for(const n of s)for(const a of getListItems(n))o.add(a);return sortBlocks(o)}function splitListItemBefore(s,o){const n=getListItemBlocks(s,{direction:"forward"}),a=ListItemUid.next();for(const l of n)o.setAttribute("listItemId",a,l);return n}function mergeListItemBefore(s,o,n){const a={};for(const[c,u]of o.getAttributes())c.startsWith("list")&&(a[c]=u);const l=getListItemBlocks(s,{direction:"forward"});for(const c of l)n.setAttributes(a,c);return l}function indentBlocks(s,o,{expand:n,indentBy:a=1}={}){s=toArray$2(s);const l=n?expandListBlocksToCompleteItems(s):s;for(const c of l){const u=c.getAttribute("listIndent")+a;u<0?removeListAttributes(c,o):o.setAttribute("listIndent",u,c)}return l}function outdentBlocksWithMerge(s,o){s=toArray$2(s);const n=expandListBlocksToCompleteItems(s),a=new Set,l=Math.min(...n.map(u=>u.getAttribute("listIndent"))),c=new Map;for(const u of n)c.set(u,ListWalker.first(u,{lowerIndent:!0}));for(const u of n){if(a.has(u))continue;a.add(u);const d=u.getAttribute("listIndent")-1;if(d<0){removeListAttributes(u,o);continue}if(u.getAttribute("listIndent")==l){const h=mergeListItemIfNotLast(u,c.get(u),o);for(const f of h)a.add(f);if(h.length)continue}o.setAttribute("listIndent",d,u)}return sortBlocks(a)}function removeListAttributes(s,o){s=toArray$2(s);for(const n of s)n.is("element","listItem")&&o.rename(n,"paragraph");for(const n of s)for(const a of n.getAttributeKeys())a.startsWith("list")&&o.removeAttribute(a,n);return s}function isSingleListItem(s){if(!s.length)return!1;const o=s[0].getAttribute("listItemId");return o?!s.some(n=>n.getAttribute("listItemId")!=o):!1}function outdentFollowingItems(s,o){const n=[];let a=Number.POSITIVE_INFINITY;for(const{node:l}of new SiblingListBlocksIterator(s.nextSibling)){const c=l.getAttribute("listIndent");if(c==0)break;c<a&&(a=c);const u=c-a;o.setAttribute("listIndent",u,l),n.push(l)}return n}function sortBlocks(s){return Array.from(s).filter(o=>o.root.rootName!=="$graveyard").sort((o,n)=>o.index-n.index)}function getSelectedBlockObject(s){const o=s.document.selection.getSelectedElement();return o&&s.schema.isObject(o)&&s.schema.isBlock(o)?o:null}function canBecomeSimpleListItem(s,o){return o.checkChild(s.parent,"listItem")&&o.checkChild(s,"$text")&&!o.isObject(s)}function isNumberedListType(s){return s=="numbered"||s=="customNumbered"}function mergeListItemIfNotLast(s,o,n){return getListItemBlocks(o,{direction:"forward"}).pop().index>s.index?mergeListItemBefore(s,o,n):[]}class ListIndentCommand extends Command{constructor(n,a){super(n);E(this,"_direction");this._direction=a}refresh(){this.isEnabled=this._checkEnabled()}execute(){const n=this.editor.model,a=getSelectedListBlocks(n.document.selection);n.change(l=>{const c=[];isSingleListItem(a)&&!isFirstBlockOfListItem(a[0])?(this._direction=="forward"&&c.push(...indentBlocks(a,l)),c.push(...splitListItemBefore(a[0],l))):this._direction=="forward"?c.push(...indentBlocks(a,l,{expand:!0})):c.push(...outdentBlocksWithMerge(a,l));for(const u of c){if(!u.hasAttribute("listType"))continue;const d=ListWalker.first(u,{sameIndent:!0});d&&l.setAttribute("listType",d.getAttribute("listType"),u)}this._fireAfterExecute(c)})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_checkEnabled(){let n=getSelectedListBlocks(this.editor.model.document.selection),a=n[0];if(!a)return!1;if(this._direction=="backward"||isSingleListItem(n)&&!isFirstBlockOfListItem(n[0]))return!0;n=expandListBlocksToCompleteItems(n),a=n[0];const l=ListWalker.first(a,{sameIndent:!0});return l?l.getAttribute("listType")==a.getAttribute("listType"):!1}}function getSelectedListBlocks(s){const o=Array.from(s.getSelectedBlocks()),n=o.findIndex(a=>!isListItemBlock(a));return n!=-1&&(o.length=n),o}class ListCommand extends Command{constructor(n,a,l={}){super(n);E(this,"type");E(this,"_listWalkerOptions");this.type=a,this._listWalkerOptions=l.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(n={}){const a=this.editor.model,l=a.document,c=getSelectedBlockObject(a),u=Array.from(l.selection.getSelectedBlocks()).filter(h=>a.schema.checkAttribute(h,"listType")||canBecomeSimpleListItem(h,a.schema)),d=n.forceValue!==void 0?!n.forceValue:this.value;a.change(h=>{if(d){const f=u[u.length-1],g=getListItemBlocks(f,{direction:"forward"}),p=[];g.length>1&&p.push(...splitListItemBefore(g[1],h)),p.push(...removeListAttributes(u,h)),p.push(...outdentFollowingItems(f,h)),this._fireAfterExecute(p)}else if((c||l.selection.isCollapsed)&&isListItemBlock(u[0])){const f=getListItems(c||u[0],this._listWalkerOptions);for(const g of f)h.setAttributes({...n.additionalAttributes,listType:this.type},g);this._fireAfterExecute(f)}else{const f=[];for(const g of u)if(!g.hasAttribute("listType"))!g.is("element","listItem")&&canBecomeSimpleListItem(g,a.schema)&&h.rename(g,"listItem"),h.setAttributes({...n.additionalAttributes,listIndent:0,listItemId:ListItemUid.next(),listType:this.type},g),f.push(g);else for(const p of expandListBlocksToCompleteItems(g,{withNested:!1}))p.getAttribute("listType")!=this.type&&(h.setAttributes({...n.additionalAttributes,listType:this.type},p),f.push(p));this._fireAfterExecute(f)}})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_getValue(){const n=this.editor.model.document.selection,a=Array.from(n.getSelectedBlocks());if(!a.length)return!1;for(const l of a)if(l.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const n=this.editor.model,a=n.schema,l=n.document.selection,c=Array.from(l.getSelectedBlocks());if(!c.length)return!1;if(this.value)return!0;for(const u of c)if(a.checkAttribute(u,"listType")||canBecomeSimpleListItem(u,a))return!0;return!1}}class ListMergeCommand extends Command{constructor(n,a){super(n);E(this,"_direction");this._direction=a}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:n=!1}={}){const a=this.editor.model,l=a.document.selection,c=[];a.change(u=>{const{firstElement:d,lastElement:h}=this._getMergeSubjectElements(l,n),f=d.getAttribute("listIndent")||0,g=h.getAttribute("listIndent"),p=h.getAttribute("listItemId");if(f!=g){const v=getNestedListBlocks(h);c.push(...indentBlocks([h,...v],u,{indentBy:f-g,expand:f<g}))}if(n){let v=l;l.isCollapsed&&(v=u.createSelection(u.createRange(u.createPositionAt(d,"end"),u.createPositionAt(h,0)))),a.deleteContent(v,{doNotResetEntireContent:l.isCollapsed});const b=v.getLastPosition().parent,_=b.nextSibling;c.push(b),_&&_!==h&&_.getAttribute("listItemId")==p&&c.push(...mergeListItemBefore(_,b,u))}else c.push(...mergeListItemBefore(h,d,u));this._fireAfterExecute(c)})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_checkEnabled(){const n=this.editor.model,a=n.document.selection,l=getSelectedBlockObject(n);if(a.isCollapsed||l){const c=l||a.getFirstPosition().parent;if(!isListItemBlock(c))return!1;const u=this._direction=="backward"?c.previousSibling:c.nextSibling;if(!u||isSingleListItem([c,u]))return!1}else{const c=a.getLastPosition(),u=a.getFirstPosition();if(c.parent===u.parent||!isListItemBlock(c.parent))return!1}return!0}_getMergeSubjectElements(n,a){const l=this.editor.model,c=getSelectedBlockObject(l);let u,d;if(n.isCollapsed||c){const h=c||n.getFirstPosition().parent,f=isFirstBlockOfListItem(h);this._direction=="backward"?(d=h,f&&!a?u=ListWalker.first(h,{sameIndent:!0,lowerIndent:!0}):u=h.previousSibling):(u=h,d=h.nextSibling)}else u=n.getFirstPosition().parent,d=n.getLastPosition().parent;return{firstElement:u,lastElement:d}}}class ListSplitCommand extends Command{constructor(n,a){super(n);E(this,"_direction");this._direction=a}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(a=>{const l=splitListItemBefore(this._getStartBlock(),a);this._fireAfterExecute(l)})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_checkEnabled(){const n=this.editor.model.document.selection,a=this._getStartBlock();return n.isCollapsed&&isListItemBlock(a)&&!isFirstBlockOfListItem(a)}_getStartBlock(){const a=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?a:a.nextSibling}}class ListUtils extends Plugin{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(o){return expandListBlocksToCompleteList(o)}isFirstBlockOfListItem(o){return isFirstBlockOfListItem(o)}isListItemBlock(o){return isListItemBlock(o)}expandListBlocksToCompleteItems(o,n={}){return expandListBlocksToCompleteItems(o,n)}isNumberedListType(o){return isNumberedListType(o)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isListView(s){return s.is("element","ol")||s.is("element","ul")}function isListItemView(s){return s.is("element","li")}function getIndent$1(s){let o=0,n=s.parent;for(;n;){if(isListItemView(n))o++;else{const a=n.previousSibling;a&&isListItemView(a)&&o++}n=n.parent}return o}function createListElement(s,o,n,a=getViewElementIdForListType(n,o)){return s.createAttributeElement(getViewElementNameForListType(n),null,{priority:2*o/100-100,id:a})}function createListItemElement(s,o,n){return s.createAttributeElement("li",null,{priority:(2*o+1)/100-100,id:n})}function getViewElementNameForListType(s){return s=="numbered"||s=="customNumbered"?"ol":"ul"}function getViewElementIdForListType(s,o){return`list-${s}-${o}`}function findAndAddListHeadToMap(s,o,n){const a=s.nodeBefore;if(isListItemBlock(a)){let l=a;for(const{node:c}of new SiblingListBlocksIterator(l,"backward"))if(l=c,n.has(l)||(n.add(l),o.has(a)))return;o.add(l)}else{const l=s.nodeAfter;isListItemBlock(l)&&o.add(l)}}function fixListIndents(s,o){let n=0,a=-1,l=null,c=!1;for(const{node:u}of s){const d=u.getAttribute("listIndent");if(d>n){let h;l===null?(l=d-n,h=n):(l>d&&(l=d),h=d-l),h>a+1&&(h=a+1),o.setAttribute("listIndent",h,u),c=!0,a=h}else l=null,n=d+1,a=d}return c}function fixListItemIds(s,o,n){const a=new Set;let l=!1;for(const{node:c}of s){if(a.has(c))continue;let u=c.getAttribute("listType"),d=c.getAttribute("listItemId");if(o.has(d)&&(d=ListItemUid.next()),o.add(d),c.is("element","listItem")){c.getAttribute("listItemId")!=d&&(n.setAttribute("listItemId",d,c),l=!0);continue}for(const h of getListItemBlocks(c,{direction:"forward"}))a.add(h),h.getAttribute("listType")!=u&&(d=ListItemUid.next(),u=h.getAttribute("listType")),h.getAttribute("listItemId")!=d&&(n.setAttribute("listItemId",d,h),l=!0)}return l}function listItemUpcastConverter(){return(s,o,n)=>{const{writer:a,schema:l}=n;if(!o.modelRange)return;const c=Array.from(o.modelRange.getItems({shallow:!0})).filter(p=>l.checkAttribute(p,"listItemId"));if(!c.length)return;const u=ListItemUid.next(),d=getIndent$1(o.viewItem);let h=o.viewItem.parent&&o.viewItem.parent.is("element","ol")?"numbered":"bulleted";const f=c[0].getAttribute("listType");f&&(h=f);const g={listItemId:u,listIndent:d,listType:h};for(const p of c)p.hasAttribute("listItemId")||a.setAttributes(g,p);c.length>1&&c[1].getAttribute("listItemId")!=g.listItemId&&n.keepEmptyElement(c[0])}}function reconvertItemsOnDataChange(s,o,n,a){return()=>{const d=s.document.differ.getChanges(),h=[],f=new Set,g=new Set,p=new Set;for(const v of d)if(v.type=="insert"&&v.name!="$text")findAndAddListHeadToMap(v.position,f,p),v.attributes.has("listItemId")?g.add(v.position.nodeAfter):findAndAddListHeadToMap(v.position.getShiftedBy(v.length),f,p);else if(v.type=="remove"&&v.attributes.has("listItemId"))findAndAddListHeadToMap(v.position,f,p);else if(v.type=="attribute"){const b=v.range.start.nodeAfter;n.includes(v.attributeKey)?(findAndAddListHeadToMap(v.range.start,f,p),v.attributeNewValue===null?(findAndAddListHeadToMap(v.range.start.getShiftedBy(1),f,p),c(b)&&h.push(b)):g.add(b)):isListItemBlock(b)&&c(b)&&h.push(b)}for(const v of f.values())h.push(...l(v,g));for(const v of new Set(h))o.reconvertItem(v)};function l(d,h){const f=[],g=new Set,p=[];for(const{node:v,previous:b}of new SiblingListBlocksIterator(d)){if(g.has(v))continue;const _=v.getAttribute("listIndent");b&&_<b.getAttribute("listIndent")&&(p.length=_+1),p[_]=Object.fromEntries(Array.from(v.getAttributes()).filter(([x])=>n.includes(x)));const w=getListItemBlocks(v,{direction:"forward"});for(const x of w)g.add(x),(c(x,w)||u(x,p,h))&&f.push(x)}return f}function c(d,h){const f=o.mapper.toViewElement(d);if(!f)return!1;if(a.fire("checkElement",{modelElement:d,viewElement:f}))return!0;if(!d.is("element","paragraph")&&!d.is("element","listItem"))return!1;const p=shouldUseBogusParagraph(d,n,h);return p&&f.is("element","p")?!0:!!(!p&&f.is("element","span"))}function u(d,h,f){if(f.has(d))return!1;const g=o.mapper.toViewElement(d);let p=h.length-1;for(let v=g.parent;!v.is("editableElement");v=v.parent){const b=isListItemView(v),_=isListView(v);if(!_&&!b)continue;const w=`checkAttributes:${b?"item":"list"}`;if(a.fire(w,{viewElement:v,modelAttributes:h[p]}))break;if(_&&(p--,p<0))return!1}return!0}}function listItemDowncastConverter(s,o,n,{dataPipeline:a}={}){const l=createAttributesConsumer(s);return(c,u,d)=>{const{writer:h,mapper:f,consumable:g}=d,p=u.item;if(!s.includes(u.attributeKey)||!l(p,g))return;const v=findMappedViewElement(p,f,n);removeCustomMarkerElements(v,h,f),unwrapListItemBlock(v,h);const b=insertCustomMarkerElements(p,v,o,h,{dataPipeline:a});wrapListItemBlock(p,b,o,h)}}function listItemDowncastRemoveConverter(s){return(o,n,a)=>{const{writer:l,mapper:c}=a,u=o.name.split(":")[1];if(!s.checkAttribute(u,"listItemId"))return;const d=c.toViewPosition(n.position),h=n.position.getShiftedBy(n.length),f=c.toViewPosition(h,{isPhantom:!0}),p=l.createRange(d,f).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */p&&removeCustomMarkerElements(p,l,c)}}function bogusParagraphCreator(s,{dataPipeline:o}={}){return(n,{writer:a})=>{if(!shouldUseBogusParagraph(n,s))return null;if(!o)return a.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const l=a.createContainerElement("p");return a.setCustomProperty("dataPipeline:transparentRendering",!0,l),l}}function findMappedViewElement(s,o,n){const a=n.createRangeOn(s);return o.toViewRange(a).getTrimmed().end.nodeBefore}function createModelToViewPositionMapper(s,o){return(n,a)=>{if(a.modelPosition.offset>0)return;const l=a.modelPosition.parent;if(!isListItemBlock(l)||!s.some(f=>f.scope=="itemMarker"&&f.canInjectMarkerIntoElement&&f.canInjectMarkerIntoElement(l)))return;const c=a.mapper.toViewElement(l),u=o.createRangeIn(c),d=u.getWalker();let h=u.start;for(const{item:f}of d){if(f.is("element")&&a.mapper.toModelElement(f)||f.is("$textProxy"))break;f.is("element")&&f.getCustomProperty("listItemMarker")&&(h=o.createPositionAfter(f),d.skip(({previousPosition:g})=>!g.isEqual(h)))}a.viewPosition=h}}function removeCustomMarkerElements(s,o,n){for(;s.parent.is("attributeElement")&&s.parent.getCustomProperty("listItemWrapper");)o.unwrap(o.createRangeOn(s),s.parent);const a=[];l(o.createPositionBefore(s).getWalker({direction:"backward"})),l(o.createRangeIn(s).getWalker());for(const c of a)o.remove(c);function l(c){for(const{item:u}of c){if(u.is("element")&&n.toModelElement(u))break;u.is("element")&&u.getCustomProperty("listItemMarker")&&a.push(u)}}}function insertCustomMarkerElements(s,o,n,a,{dataPipeline:l}){let c=a.createRangeOn(o);if(!isFirstBlockOfListItem(s))return c;for(const u of n){if(u.scope!="itemMarker")continue;const d=u.createElement(a,s,{dataPipeline:l});if(!d||(a.setCustomProperty("listItemMarker",!0,d),u.canInjectMarkerIntoElement&&u.canInjectMarkerIntoElement(s)?a.insert(a.createPositionAt(o,0),d):(a.insert(c.start,d),c=a.createRange(a.createPositionBefore(d),a.createPositionAfter(o))),!u.createWrapperElement||!u.canWrapElement))continue;const h=u.createWrapperElement(a,s,{dataPipeline:l});a.setCustomProperty("listItemWrapper",!0,h),u.canWrapElement(s)?c=a.wrap(c,h):(c=a.wrap(a.createRangeOn(d),h),c=a.createRange(c.start,a.createPositionAfter(o)))}return c}function unwrapListItemBlock(s,o){let n=s.parent;for(;n.is("attributeElement")&&["ul","ol","li"].includes(n.name);){const a=n.parent;o.unwrap(o.createRangeOn(s),n),n=a}}function wrapListItemBlock(s,o,n,a){if(!s.hasAttribute("listIndent"))return;const l=s.getAttribute("listIndent");let c=s;for(let u=l;u>=0;u--){const d=createListItemElement(a,u,c.getAttribute("listItemId")),h=createListElement(a,u,c.getAttribute("listType"));for(const f of n)(f.scope=="list"||f.scope=="item")&&c.hasAttribute(f.attributeName)&&f.setAttributeOnDowncast(a,c.getAttribute(f.attributeName),f.scope=="list"?h:d);if(o=a.wrap(o,d),o=a.wrap(o,h),u==0||(c=ListWalker.first(c,{lowerIndent:!0}),!c))break}}function createAttributesConsumer(s){return(o,n)=>{const a=[];for(const l of s)o.hasAttribute(l)&&a.push(`attribute:${l}`);return a.every(l=>n.test(o,l)!==!1)?(a.forEach(l=>n.consume(o,l)),!0):!1}}function shouldUseBogusParagraph(s,o,n=getAllListItemBlocks(s)){if(!isListItemBlock(s))return!1;for(const a of s.getAttributeKeys())if(!(a.startsWith("selection:")||a=="htmlEmptyBlock")&&!o.includes(a))return!1;return n.length<2}const LIST_BASE_ATTRIBUTES=["listType","listIndent","listItemId"];class ListEditing extends Plugin{constructor(n){super(n);E(this,"_downcastStrategies",[]);n.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete,ListUtils,ClipboardPipeline]}init(){const n=this.editor,a=n.model,l=n.config.get("list.multiBlock");if(n.plugins.has("LegacyListEditing"))throw new CKEditorError("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});a.schema.register("$listItem",{allowAttributes:LIST_BASE_ATTRIBUTES}),l?(a.schema.extend("$container",{allowAttributesOf:"$listItem"}),a.schema.extend("$block",{allowAttributesOf:"$listItem"}),a.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):a.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const c of LIST_BASE_ATTRIBUTES)a.schema.setAttributeProperties(c,{copyOnReplace:!0});n.commands.add("numberedList",new ListCommand(n,"numbered")),n.commands.add("bulletedList",new ListCommand(n,"bulleted")),n.commands.add("customNumberedList",new ListCommand(n,"customNumbered",{multiLevel:!0})),n.commands.add("customBulletedList",new ListCommand(n,"customBulleted",{multiLevel:!0})),n.commands.add("indentList",new ListIndentCommand(n,"forward")),n.commands.add("outdentList",new ListIndentCommand(n,"backward")),n.commands.add("splitListItemBefore",new ListSplitCommand(n,"before")),n.commands.add("splitListItemAfter",new ListSplitCommand(n,"after")),l&&(n.commands.add("mergeListItemBackward",new ListMergeCommand(n,"backward")),n.commands.add("mergeListItemForward",new ListMergeCommand(n,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const a=this.editor.commands,l=a.get("indent"),c=a.get("outdent");l&&l.registerChildCommand(a.get("indentList"),{priority:"high"}),c&&c.registerChildCommand(a.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(n){this._downcastStrategies.push(n)}getListAttributeNames(){return[...LIST_BASE_ATTRIBUTES,...this._downcastStrategies.map(n=>n.attributeName)]}_setupDeleteIntegration(){const n=this.editor,a=n.commands.get("mergeListItemBackward"),l=n.commands.get("mergeListItemForward");this.listenTo(n.editing.view.document,"delete",(c,u)=>{const d=n.model.document.selection;getSelectedBlockObject(n.model)||n.model.change(()=>{const h=d.getFirstPosition();if(d.isCollapsed&&u.direction=="backward"){if(!h.isAtStart)return;const f=h.parent;if(!isListItemBlock(f))return;if(!ListWalker.first(f,{sameAttributes:"listType",sameIndent:!0})&&f.getAttribute("listIndent")===0)isLastBlockOfListItem(f)||n.execute("splitListItemAfter"),n.execute("outdentList");else{if(!a||!a.isEnabled)return;a.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(n.model,"backward")})}u.preventDefault(),c.stop()}else{if(d.isCollapsed&&!d.getLastPosition().isAtEnd||!l||!l.isEnabled)return;l.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(n.model,"forward")}),u.preventDefault(),c.stop()}})},{context:"li"})}_setupEnterIntegration(){const n=this.editor,a=n.model,l=n.commands,c=l.get("enter");this.listenTo(n.editing.view.document,"enter",(u,d)=>{const h=a.document,f=h.selection.getFirstPosition().parent;if(h.selection.isCollapsed&&isListItemBlock(f)&&f.isEmpty&&!d.isSoft){const g=isFirstBlockOfListItem(f),p=isLastBlockOfListItem(f);g&&p?(n.execute("outdentList"),d.preventDefault(),u.stop()):g&&!p?(n.execute("splitListItemAfter"),d.preventDefault(),u.stop()):p&&(n.execute("splitListItemBefore"),d.preventDefault(),u.stop())}},{context:"li"}),this.listenTo(c,"afterExecute",()=>{const u=l.get("splitListItemBefore");if(u.refresh(),!u.isEnabled)return;const h=n.model.document.selection.getLastPosition().parent;getAllListItemBlocks(h).length===2&&u.execute()})}_setupTabIntegration(){const n=this.editor;this.listenTo(n.editing.view.document,"tab",(a,l)=>{const c=l.shiftKey?"outdentList":"indentList";this.editor.commands.get(c).isEnabled&&(n.execute(c),l.stopPropagation(),l.preventDefault(),a.stop())},{context:"li"})}_setupConversion(){const n=this.editor,a=n.model,l=this.getListAttributeNames(),c=n.config.get("list.multiBlock"),u=c?"paragraph":"listItem";n.conversion.for("upcast").elementToElement({view:"li",model:(h,{writer:f})=>f.createElement(u,{listType:""})}).elementToElement({view:"p",model:(h,{writer:f})=>h.parent&&h.parent.is("element","li")?f.createElement(u,{listType:""}):null,converterPriority:"high"}).add(h=>{h.on("element:li",listItemUpcastConverter())}),c||n.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),n.conversion.for("editingDowncast").elementToElement({model:u,view:bogusParagraphCreator(l),converterPriority:"high"}).add(h=>{h.on("attribute",listItemDowncastConverter(l,this._downcastStrategies,a)),h.on("remove",listItemDowncastRemoveConverter(a.schema))}),n.conversion.for("dataDowncast").elementToElement({model:u,view:bogusParagraphCreator(l,{dataPipeline:!0}),converterPriority:"high"}).add(h=>{h.on("attribute",listItemDowncastConverter(l,this._downcastStrategies,a,{dataPipeline:!0}))});const d=createModelToViewPositionMapper(this._downcastStrategies,n.editing.view);n.editing.mapper.on("modelToViewPosition",d),n.data.mapper.on("modelToViewPosition",d),this.listenTo(a.document,"change:data",reconvertItemsOnDataChange(a,n.editing,l,this),{priority:"high"}),this.on("checkAttributes:item",(h,{viewElement:f,modelAttributes:g})=>{f.id!=g.listItemId&&(h.return=!0,h.stop())}),this.on("checkAttributes:list",(h,{viewElement:f,modelAttributes:g})=>{(f.name!=getViewElementNameForListType(g.listType)||f.id!=getViewElementIdForListType(g.listType,g.listIndent))&&(h.return=!0,h.stop())})}_setupModelPostFixing(){const n=this.editor.model,a=this.getListAttributeNames();n.document.registerPostFixer(l=>modelChangePostFixer$1(n,l,a,this)),this.on("postFixer",(l,{listNodes:c,writer:u})=>{l.return=fixListIndents(c,u)||l.return},{priority:"high"}),this.on("postFixer",(l,{listNodes:c,writer:u,seenIds:d})=>{l.return=fixListItemIds(c,d,u)||l.return},{priority:"high"})}_setupClipboardIntegration(){const n=this.editor.model,a=this.editor.plugins.get("ClipboardPipeline");this.listenTo(n,"insertContent",createModelIndentPasteFixer(n),{priority:"high"}),this.listenTo(a,"outputTransformation",(l,c)=>{n.change(u=>{const d=Array.from(c.content.getChildren()),h=d[d.length-1];if(d.length>1&&h.is("element")&&h.isEmpty&&d.slice(0,-1).every(isListItemBlock)&&u.remove(h),c.method=="copy"||c.method=="cut"){const f=Array.from(c.content.getChildren());isSingleListItem(f)&&removeListAttributes(f,u)}})})}_setupAccessibilityIntegration(){const n=this.editor,a=n.t;n.accessibility.addKeystrokeInfoGroup({id:"list",label:a("Keystrokes that can be used in a list"),keystrokes:[{label:a("Increase list item indent"),keystroke:"Tab"},{label:a("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function modelChangePostFixer$1(s,o,n,a){const l=s.document.differ.getChanges(),c=new Set,u=new Set,d=a.editor.config.get("list.multiBlock");let h=!1;for(const g of l){if(g.type=="insert"&&g.name!="$text"){const p=g.position.nodeAfter;if(!s.schema.checkAttribute(p,"listItemId"))for(const v of Array.from(p.getAttributeKeys()))n.includes(v)&&(o.removeAttribute(v,p),h=!0);findAndAddListHeadToMap(g.position,u,c),g.attributes.has("listItemId")||findAndAddListHeadToMap(g.position.getShiftedBy(g.length),u,c);for(const{item:v,previousPosition:b}of s.createRangeIn(p))isListItemBlock(v)&&findAndAddListHeadToMap(b,u,c)}else g.type=="remove"?findAndAddListHeadToMap(g.position,u,c):g.type=="attribute"&&n.includes(g.attributeKey)&&(findAndAddListHeadToMap(g.range.start,u,c),g.attributeNewValue===null&&findAndAddListHeadToMap(g.range.start.getShiftedBy(1),u,c));if(!d&&g.type=="attribute"&&LIST_BASE_ATTRIBUTES.includes(g.attributeKey)){const p=g.range.start.nodeAfter;g.attributeNewValue===null&&p&&p.is("element","listItem")?(o.rename(p,"paragraph"),h=!0):g.attributeOldValue===null&&p&&p.is("element")&&p.name!="listItem"&&(o.rename(p,"listItem"),h=!0)}}const f=new Set;for(const g of u.values())h=a.fire("postFixer",{listNodes:new ListBlocksIterable(g),listHead:g,writer:o,seenIds:f})||h;return h}function createModelIndentPasteFixer(s){return(o,[n,a])=>{const l=n.is("documentFragment")?Array.from(n.getChildren()):[n];if(!l.length)return;const u=(a?s.createSelection(a):s.document.selection).getFirstPosition();let d;if(isListItemBlock(u.parent))d=u.parent;else if(isListItemBlock(u.nodeBefore)&&isListItemBlock(u.nodeAfter))d=u.nodeBefore;else return;s.change(h=>{const f=d.getAttribute("listType"),g=d.getAttribute("listIndent"),p=l[0].getAttribute("listIndent")||0,v=Math.max(g-p,0);for(const b of l){const _=isListItemBlock(b);d.is("element","listItem")&&b.is("element","paragraph")&&h.rename(b,"listItem"),h.setAttributes({listIndent:(_?b.getAttribute("listIndent"):0)+v,listItemId:_?b.getAttribute("listItemId"):ListItemUid.next(),listType:f},b)}})}}function shouldMergeOnBlocksContentLevel(s,o){const n=s.document.selection;if(!n.isCollapsed)return!getSelectedBlockObject(s);if(o==="forward")return!0;const l=n.getFirstPosition().parent,c=l.previousSibling;return s.schema.isObject(c)?!1:c.isEmpty?!0:isSingleListItem([l,c])}function createUIComponents(s,o,n,a){s.ui.componentFactory.add(o,()=>{const l=_createButton(ButtonView,s,o,n,a);return l.set({tooltip:!0,isToggleable:!0}),l}),s.ui.componentFactory.add(`menuBar:${o}`,()=>{const l=_createButton(MenuBarMenuListItemButtonView,s,o,n,a);return l.set({role:"menuitemcheckbox",isToggleable:!0}),l})}function _createButton(s,o,n,a,l){const c=o.commands.get(n),u=new s(o.locale);return u.set({label:a,icon:l}),u.bind("isOn","isEnabled").to(c,"value","isEnabled"),u.on("execute",()=>{o.execute(n),o.editing.view.focus()}),u}class ListUI extends Plugin{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||createUIComponents(this.editor,"numberedList",o("Numbered List"),icons.numberedList),this.editor.ui.componentFactory.has("bulletedList")||createUIComponents(this.editor,"bulletedList",o("Bulleted List"),icons.bulletedList)}}class List extends Plugin{static get requires(){return[ListEditing,ListUI]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class ListStartCommand extends Command{refresh(){const o=this._getValue();this.value=o,this.isEnabled=o!=null}execute({startIndex:o=1}={}){const n=this.editor.model,a=n.document;let l=Array.from(a.selection.getSelectedBlocks()).filter(c=>isListItemBlock(c)&&isNumberedListType(c.getAttribute("listType")));l=expandListBlocksToCompleteList(l),n.change(c=>{for(const u of l)c.setAttribute("listStart",o>=0?o:1,u)})}_getValue(){const n=this.editor.model.document,a=first(n.selection.getSelectedBlocks());return a&&isListItemBlock(a)&&isNumberedListType(a.getAttribute("listType"))?a.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const LIST_STYLE_TO_LIST_TYPE={},LIST_STYLE_TO_TYPE_ATTRIBUTE={},TYPE_ATTRIBUTE_TO_LIST_STYLE={},LIST_STYLE_TYPES=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:s,typeAttribute:o,listType:n}of LIST_STYLE_TYPES)LIST_STYLE_TO_LIST_TYPE[s]=n,LIST_STYLE_TO_TYPE_ATTRIBUTE[s]=o,o&&(TYPE_ATTRIBUTE_TO_LIST_STYLE[o]=s);function getAllSupportedStyleTypes(){return LIST_STYLE_TYPES.map(s=>s.listStyle)}function getListTypeFromListStyleType$1(s){return LIST_STYLE_TO_LIST_TYPE[s]||null}function getListStyleTypeFromTypeAttribute(s){return TYPE_ATTRIBUTE_TO_LIST_STYLE[s]||null}function getTypeAttributeFromListStyleType(s){return LIST_STYLE_TO_TYPE_ATTRIBUTE[s]||null}function normalizeListStyle(s){switch(s){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return s}}class ListStyleCommand extends Command{constructor(n,a,l){super(n);E(this,"defaultType");E(this,"_supportedTypes");this.defaultType=a,this._supportedTypes=l}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(n={}){const a=this.editor.model,l=a.document;a.change(c=>{this._tryToConvertItemsToList(n);let u=Array.from(l.selection.getSelectedBlocks()).filter(d=>d.hasAttribute("listType"));if(u.length){u=expandListBlocksToCompleteList(u);for(const d of u)c.setAttribute("listStyle",n.type||this.defaultType,d)}})}isStyleTypeSupported(n){return this._supportedTypes?this._supportedTypes.includes(n):!0}_getValue(){const n=first(this.editor.model.document.selection.getSelectedBlocks());return isListItemBlock(n)?n.getAttribute("listStyle"):null}_checkEnabled(){const n=this.editor,a=n.commands.get("numberedList"),l=n.commands.get("bulletedList");return a.isEnabled||l.isEnabled}_tryToConvertItemsToList(n){if(!n.type)return;const a=getListTypeFromListStyleType$1(n.type);if(!a)return;const l=this.editor,c=`${a}List`;l.commands.get(c).value||l.execute(c)}}class ListReversedCommand extends Command{refresh(){const o=this._getValue();this.value=o,this.isEnabled=o!=null}execute(o={}){const n=this.editor.model,a=n.document;let l=Array.from(a.selection.getSelectedBlocks()).filter(c=>isListItemBlock(c)&&c.getAttribute("listType")=="numbered");l=expandListBlocksToCompleteList(l),n.change(c=>{for(const u of l)c.setAttribute("listReversed",!!o.reversed,u)})}_getValue(){const n=this.editor.model.document,a=first(n.selection.getSelectedBlocks());return isListItemBlock(a)&&a.getAttribute("listType")=="numbered"?a.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function listPropertiesUpcastConverter(s){return(o,n,a)=>{const{writer:l,schema:c,consumable:u}=a;if(u.test(n.viewItem,s.viewConsumables)===!1)return;n.modelRange||Object.assign(n,a.convertChildren(n.viewItem,n.modelCursor));let d=!1;for(const h of n.modelRange.getItems({shallow:!0}))c.checkAttribute(h,s.attributeName)&&s.appliesToListItem(h)&&(h.hasAttribute(s.attributeName)||(l.setAttribute(s.attributeName,s.getAttributeOnUpcast(n.viewItem),h),d=!0));d&&u.consume(n.viewItem,s.viewConsumables)}}class ListPropertiesUtils extends Plugin{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return getAllSupportedStyleTypes()}getListTypeFromListStyleType(o){return getListTypeFromListStyleType$1(o)}getListStyleTypeFromTypeAttribute(o){return getListStyleTypeFromTypeAttribute(o)}getTypeAttributeFromListStyleType(o){return getTypeAttributeFromListStyleType(o)}}function getNormalizedConfig(s){const{startIndex:o,reversed:n,styles:a}=s;return{styles:getNormalizedStylesConfig(a),startIndex:o||!1,reversed:n||!1}}function getNormalizedStylesConfig(s){const o={listTypes:["bulleted","numbered"],useAttribute:!1};return s===!0||(s?Array.isArray(s)||typeof s=="string"?o.listTypes=toArray$2(s):(o.listTypes=s.listTypes?toArray$2(s.listTypes):o.listTypes,o.useAttribute=!!s.useAttribute,s.listStyleTypes&&(o.listStyleTypes=s.listStyleTypes)):o.listTypes=[]),o}const DEFAULT_LIST_TYPE$1="default";class ListPropertiesEditing extends Plugin{static get requires(){return[ListEditing,ListPropertiesUtils]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(o){super(o),o.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const o=this.editor,n=o.model,a=o.plugins.get(ListEditing),l=o.config.get("list.properties"),c=createAttributeStrategies$1(l);for(const u of c)u.addCommand(o),n.schema.extend("$listItem",{allowAttributes:u.attributeName}),a.registerDowncastStrategy({scope:"list",attributeName:u.attributeName,setAttributeOnDowncast(d,h,f){u.setAttributeOnDowncast(d,h,f)}});o.conversion.for("upcast").add(u=>{for(const d of c)u.on("element:ol",listPropertiesUpcastConverter(d)),u.on("element:ul",listPropertiesUpcastConverter(d))}),a.on("checkAttributes:list",(u,{viewElement:d,modelAttributes:h})=>{for(const f of c)f.getAttributeOnUpcast(d)!=h[f.attributeName]&&(u.return=!0,u.stop())}),this.listenTo(o.commands.get("indentList"),"afterExecute",(u,d)=>{n.change(h=>{for(const f of d)for(const g of c)g.appliesToListItem(f)&&h.setAttribute(g.attributeName,g.defaultValue,f)})}),a.on("postFixer",(u,{listNodes:d,writer:h})=>{for(const{node:f}of d)for(const g of c)g.hasValidAttribute(f)||(g.appliesToListItem(f)?h.setAttribute(g.attributeName,g.defaultValue,f):h.removeAttribute(g.attributeName,f),u.return=!0)}),a.on("postFixer",(u,{listNodes:d,writer:h})=>{for(const{node:f,previousNodeInList:g}of d)if(g&&g.getAttribute("listType")==f.getAttribute("listType"))for(const p of c){const{attributeName:v}=p;if(!p.appliesToListItem(f))continue;const b=g.getAttribute(v);f.getAttribute(v)!=b&&(h.setAttribute(v,b,f),u.return=!0)}})}}function createAttributeStrategies$1(s){const o=[],n=getNormalizedConfig(s);if(s.styles){const a=n.styles.useAttribute;o.push({attributeName:"listStyle",defaultValue:DEFAULT_LIST_TYPE$1,viewConsumables:{styles:"list-style-type"},addCommand(l){let c=getAllSupportedStyleTypes();a&&(c=c.filter(u=>!!getTypeAttributeFromListStyleType(u))),l.commands.add("listStyle",new ListStyleCommand(l,DEFAULT_LIST_TYPE$1,c))},appliesToListItem(l){return l.getAttribute("listType")=="numbered"||l.getAttribute("listType")=="bulleted"},hasValidAttribute(l){if(!this.appliesToListItem(l))return!l.hasAttribute("listStyle");if(!l.hasAttribute("listStyle"))return!1;const c=l.getAttribute("listStyle");return c==DEFAULT_LIST_TYPE$1?!0:getListTypeFromListStyleType$1(c)==l.getAttribute("listType")},setAttributeOnDowncast(l,c,u){if(c&&c!==DEFAULT_LIST_TYPE$1)if(a){const d=getTypeAttributeFromListStyleType(c);if(d){l.setAttribute("type",d,u);return}}else{l.setStyle("list-style-type",c,u);return}l.removeStyle("list-style-type",u),l.removeAttribute("type",u)},getAttributeOnUpcast(l){const c=l.getStyle("list-style-type");if(c)return normalizeListStyle(c);const u=l.getAttribute("type");return u?getListStyleTypeFromTypeAttribute(u):DEFAULT_LIST_TYPE$1}})}return s.reversed&&o.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(a){a.commands.add("listReversed",new ListReversedCommand(a))},appliesToListItem(a){return a.getAttribute("listType")=="numbered"},hasValidAttribute(a){return this.appliesToListItem(a)==a.hasAttribute("listReversed")},setAttributeOnDowncast(a,l,c){l?a.setAttribute("reversed","reversed",c):a.removeAttribute("reversed",c)},getAttributeOnUpcast(a){return a.hasAttribute("reversed")}}),s.startIndex&&o.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(a){a.commands.add("listStart",new ListStartCommand(a))},appliesToListItem(a){return isNumberedListType(a.getAttribute("listType"))},hasValidAttribute(a){return this.appliesToListItem(a)==a.hasAttribute("listStart")},setAttributeOnDowncast(a,l,c){l==0||l>1?a.setAttribute("start",l,c):a.removeAttribute("start",c)},getAttributeOnUpcast(a){const l=a.getAttribute("start");return l>=0?l:1}}),o}class ListPropertiesView extends View$1{constructor(n,{enabledProperties:a,styleButtonViews:l,styleGridAriaLabel:c}){super(n);E(this,"children");E(this,"stylesView",null);E(this,"additionalPropertiesCollapsibleView",null);E(this,"startIndexFieldView",null);E(this,"reversedSwitchButtonView",null);E(this,"focusTracker",new FocusTracker);E(this,"keystrokes",new KeystrokeHandler);E(this,"focusables",new ViewCollection);E(this,"focusCycler");const u=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),l&&l.length?(this.stylesView=this._createStylesView(l,c),this.children.add(this.stylesView)):u.push("ck-list-properties_without-styles"),(a.startIndex||a.reversed)&&(this._addNumberedListPropertyViews(a),u.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:u},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const n of this.stylesView.children)this.stylesView.focusTracker.add(n.element);addKeyboardHandlingForGrid({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>global$1.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const n=a=>a.stopPropagation();this.keystrokes.set("arrowright",n),this.keystrokes.set("arrowleft",n),this.keystrokes.set("arrowup",n),this.keystrokes.set("arrowdown",n)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(n,a){const l=new View$1(this.locale);return l.children=l.createCollection(),l.children.addMany(n),l.setTemplate({tag:"div",attributes:{"aria-label":a,class:["ck","ck-list-styles-list"]},children:l.children}),l.children.delegate("execute").to(this),l.focus=function(){for(const c of this.children)if(c instanceof ButtonView&&c.isOn){c.focus();return}this.children.first.focus()},l.focusTracker=new FocusTracker,l.keystrokes=new KeystrokeHandler,l.render(),l.keystrokes.listenTo(l.element),l}_addNumberedListPropertyViews(n){const a=this.locale.t,l=[];n.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),l.push(this.startIndexFieldView)),n.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),l.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new CollapsibleView(this.locale,l),this.additionalPropertiesCollapsibleView.set({label:a("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(c,u,d)=>{d||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(l)}_createStartIndexField(){const n=this.locale.t,a=new LabeledFieldView(this.locale,createLabeledInputNumber);return a.set({label:n("Start at"),class:"ck-numbered-list-properties__start-index"}),a.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),a.fieldView.on("input",()=>{const l=a.fieldView.element,c=l.valueAsNumber;if(Number.isNaN(c)){a.errorText=n("Invalid start index value.");return}l.checkValidity()?this.fire("listStart",{startIndex:c}):a.errorText=n("Start index must be greater than 0.")}),a}_createReversedSwitchButton(){const n=this.locale.t,a=new SwitchButtonView(this.locale);return a.set({withText:!0,label:n("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),a.delegate("execute").to(this,"listReversed"),a}}var listStyleDiscIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',listStyleCircleIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',listStyleSquareIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',listStyleDecimalIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',listStyleDecimalWithLeadingZeroIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class ListPropertiesUI extends Plugin{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.locale.t,a=o.config.get("list.properties"),l=getNormalizedConfig(a),c=l.styles.listTypes;if(c.includes("bulleted")){const u=[{label:n("Toggle the disc list style"),tooltip:n("Disc"),type:"disc",icon:listStyleDiscIcon},{label:n("Toggle the circle list style"),tooltip:n("Circle"),type:"circle",icon:listStyleCircleIcon},{label:n("Toggle the square list style"),tooltip:n("Square"),type:"square",icon:listStyleSquareIcon}],d=n("Bulleted List"),h=n("Bulleted list styles toolbar"),f="bulletedList";o.ui.componentFactory.add(f,getDropdownViewCreator({editor:o,normalizedConfig:l,parentCommandName:f,buttonLabel:d,buttonIcon:icons.bulletedList,styleGridAriaLabel:h,styleDefinitions:u})),o.ui.componentFactory.add(`menuBar:${f}`,getMenuBarStylesMenuCreator({editor:o,normalizedConfig:l,parentCommandName:f,buttonLabel:d,styleGridAriaLabel:h,styleDefinitions:u}))}if(c.includes("numbered")||a.startIndex||a.reversed){const u=[{label:n("Toggle the decimal list style"),tooltip:n("Decimal"),type:"decimal",icon:listStyleDecimalIcon},{label:n("Toggle the decimal with leading zero list style"),tooltip:n("Decimal with leading zero"),type:"decimal-leading-zero",icon:listStyleDecimalWithLeadingZeroIcon},{label:n("Toggle the lower–roman list style"),tooltip:n("Lower–roman"),type:"lower-roman",icon:listStyleLowerRomanIcon},{label:n("Toggle the upper–roman list style"),tooltip:n("Upper-roman"),type:"upper-roman",icon:listStyleUpperRomanIcon},{label:n("Toggle the lower–latin list style"),tooltip:n("Lower-latin"),type:"lower-latin",icon:listStyleLowerLatinIcon},{label:n("Toggle the upper–latin list style"),tooltip:n("Upper-latin"),type:"upper-latin",icon:listStyleUpperLatinIcon}],d=n("Numbered List"),h=n("Numbered list styles toolbar"),f="numberedList";o.ui.componentFactory.add(f,getDropdownViewCreator({editor:o,normalizedConfig:l,parentCommandName:f,buttonLabel:d,buttonIcon:icons.numberedList,styleGridAriaLabel:h,styleDefinitions:u})),c.includes("numbered")&&o.ui.componentFactory.add(`menuBar:${f}`,getMenuBarStylesMenuCreator({editor:o,normalizedConfig:l,parentCommandName:f,buttonLabel:d,styleGridAriaLabel:h,styleDefinitions:u}))}}}function getDropdownViewCreator({editor:s,normalizedConfig:o,parentCommandName:n,buttonLabel:a,buttonIcon:l,styleGridAriaLabel:c,styleDefinitions:u}){const d=s.commands.get(n);return h=>{const f=createDropdown(h,SplitButtonView),g=f.buttonView;return f.bind("isEnabled").to(d),f.class="ck-list-styles-dropdown",g.on("execute",()=>{s.execute(n),s.editing.view.focus()}),g.set({label:a,icon:l,tooltip:!0,isToggleable:!0}),g.bind("isOn").to(d,"value",p=>!!p),f.once("change:isOpen",()=>{const p=createListPropertiesView({editor:s,normalizedConfig:o,dropdownView:f,parentCommandName:n,styleGridAriaLabel:c,styleDefinitions:u});f.panelView.children.add(p)}),f.on("execute",()=>{s.editing.view.focus()}),f}}function getStyleButtonCreator({editor:s,listStyleCommand:o,parentCommandName:n}){const a=s.locale,l=s.commands.get(n);return({label:c,type:u,icon:d,tooltip:h})=>{const f=new ButtonView(a);return f.set({label:c,icon:d,tooltip:h}),f.bind("isOn").to(o,"value",g=>g===u),f.on("execute",()=>{l.value?o.value===u?s.execute(n):o.value!==u&&s.execute("listStyle",{type:u}):s.model.change(()=>{s.execute("listStyle",{type:u})})}),f}}function createListPropertiesView({editor:s,normalizedConfig:o,dropdownView:n,parentCommandName:a,styleDefinitions:l,styleGridAriaLabel:c}){const u=s.locale,d={...o,...a!="numberedList"?{startIndex:!1,reversed:!1}:null},h=a.replace("List","");let f=null;if(o.styles.listTypes.includes(h)){const p=s.commands.get("listStyle"),v=getStyleButtonCreator({editor:s,parentCommandName:a,listStyleCommand:p}),b=o.styles.listStyleTypes;let _=l;if(b){const x=b[h];x&&(_=l.filter(S=>x.includes(S.type)))}const w=getStyleTypeSupportChecker(p);f=_.filter(w).map(v)}const g=new ListPropertiesView(u,{styleGridAriaLabel:c,enabledProperties:d,styleButtonViews:f});if(o.styles.listTypes.includes(h)&&focusChildOnDropdownOpen(n,()=>g.stylesView.children.find(p=>p.isOn)),d.startIndex){const p=s.commands.get("listStart");g.startIndexFieldView.bind("isEnabled").to(p),g.startIndexFieldView.fieldView.bind("value").to(p),g.on("listStart",(v,b)=>s.execute("listStart",b))}if(d.reversed){const p=s.commands.get("listReversed");g.reversedSwitchButtonView.bind("isEnabled").to(p),g.reversedSwitchButtonView.bind("isOn").to(p,"value",v=>!!v),g.on("listReversed",()=>{const v=p.value;s.execute("listReversed",{reversed:!v})})}return g.delegate("execute").to(n),g}function getMenuBarStylesMenuCreator({editor:s,normalizedConfig:o,parentCommandName:n,buttonLabel:a,styleGridAriaLabel:l,styleDefinitions:c}){return u=>{const d=new MenuBarMenuView(u),h=s.commands.get(n),f=s.commands.get("listStyle"),g=getStyleTypeSupportChecker(f),p=getStyleButtonCreator({editor:s,parentCommandName:n,listStyleCommand:f}),v=o.styles.listStyleTypes;let b=c;if(v){const x=h.type,S=v[x];S&&(b=c.filter(C=>S.includes(C.type)))}const _=b.filter(g).map(p),w=new ListPropertiesView(u,{styleGridAriaLabel:l,enabledProperties:{...o,startIndex:!1,reversed:!1},styleButtonViews:_});return w.delegate("execute").to(d),d.buttonView.set({label:a,icon:icons[n]}),d.panelView.children.add(w),d.bind("isEnabled").to(h,"isEnabled"),d.on("execute",()=>{s.editing.view.focus()}),d}}function getStyleTypeSupportChecker(s){return typeof s.isStyleTypeSupported=="function"?o=>s.isStyleTypeSupported(o.type):()=>!0}class ListProperties extends Plugin{static get requires(){return[ListPropertiesEditing,ListPropertiesUI]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class CheckTodoListCommand extends Command{constructor(o){super(o),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const o=this._getSelectedItems();this.value=this._getValue(o),this.isEnabled=!!o.length}execute(o={}){this.editor.model.change(n=>{const a=this._getSelectedItems(),l=o.forceValue===void 0?!this._getValue(a):o.forceValue;for(const c of a)l?n.setAttribute("todoListChecked",!0,c):n.removeAttribute("todoListChecked",c)})}_getValue(o){return o.every(n=>n.getAttribute("todoListChecked"))}_getSelectedItems(){const o=this.editor.model,n=o.schema,a=o.document.selection.getFirstRange(),l=a.start.parent,c=[];n.checkAttribute(l,"todoListChecked")&&c.push(...getAllListItemBlocks(l));for(const u of a.getItems({shallow:!0}))n.checkAttribute(u,"todoListChecked")&&!c.includes(u)&&c.push(...getAllListItemBlocks(u));return c}}class TodoCheckboxChangeObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType",["change"])}onDomEvent(n){if(n.target){const a=this.view.domConverter.mapDomToView(n.target);a&&a.is("element","input")&&a.getAttribute("type")=="checkbox"&&a.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",n)}}}const ITEM_TOGGLE_KEYSTROKE$1=parseKeystroke("Ctrl+Enter");class TodoListEditing extends Plugin{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ListEditing]}init(){const o=this.editor,n=o.model,a=o.editing,l=o.plugins.get(ListEditing),u=o.config.get("list.multiBlock")?"paragraph":"listItem";o.commands.add("todoList",new ListCommand(o,"todo")),o.commands.add("checkTodoList",new CheckTodoListCommand(o)),a.view.addObserver(TodoCheckboxChangeObserver),n.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),n.schema.addAttributeCheck(d=>{const h=d.last;if(!h.getAttribute("listItemId")||h.getAttribute("listType")!="todo")return!1},"todoListChecked"),o.conversion.for("upcast").add(d=>{d.on("element:input",todoItemInputConverter()),d.on("element:li",todoListItemUpcastConverter(),{priority:"low"}),d.on("element:label",elementUpcastConsumingConverter({name:"label",classes:"todo-list__label"})),d.on("element:label",elementUpcastConsumingConverter({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),d.on("element:span",elementUpcastConsumingConverter({name:"span",classes:"todo-list__label__description"})),d.on("element:ul",attributeUpcastConsumingConverter({name:"ul",classes:"todo-list"}))}),o.conversion.for("downcast").elementToElement({model:u,view:(d,{writer:h})=>{if(isDescriptionBlock(d,l.getListAttributeNames()))return h.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),l.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(d,h,f){h=="todo"?d.addClass("todo-list",f):d.removeClass("todo-list",f)}}),l.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(d,h,{dataPipeline:f}){if(h.getAttribute("listType")!="todo")return null;const g=d.createUIElement("input",{type:"checkbox",...h.getAttribute("todoListChecked")?{checked:"checked"}:null,...f?{disabled:"disabled"}:{tabindex:"-1"}});if(f)return g;const p=d.createContainerElement("span",{contenteditable:"false"},g);return p.getFillerOffset=()=>null,p},canWrapElement(d){return isDescriptionBlock(d,l.getListAttributeNames())},createWrapperElement(d,h,{dataPipeline:f}){const g=["todo-list__label"];return isDescriptionBlock(h,l.getListAttributeNames())||g.push("todo-list__label_without-description"),d.createAttributeElement(f?"label":"span",{class:g.join(" ")})}}),l.on("checkElement",(d,{modelElement:h,viewElement:f})=>{const g=isDescriptionBlock(h,l.getListAttributeNames());f.hasClass("todo-list__label__description")!=g&&(d.return=!0,d.stop())}),l.on("checkElement",(d,{modelElement:h,viewElement:f})=>{const g=h.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(h);let p=!1;const v=o.editing.view.createPositionBefore(f).getWalker({direction:"backward"});for(const{item:b}of v){if(b.is("element")&&o.editing.mapper.toModelElement(b))break;b.is("element","input")&&b.getAttribute("type")=="checkbox"&&(p=!0)}p!=g&&(d.return=!0,d.stop())}),l.on("postFixer",(d,{listNodes:h,writer:f})=>{for(const{node:g,previousNodeInList:p}of h){if(!p||p.getAttribute("listItemId")!=g.getAttribute("listItemId"))continue;const v=p.hasAttribute("todoListChecked"),b=g.hasAttribute("todoListChecked");b&&!v?(f.removeAttribute("todoListChecked",g),d.return=!0):!b&&v&&(f.setAttribute("todoListChecked",!0,g),d.return=!0)}}),n.document.registerPostFixer(d=>{const h=n.document.differ.getChanges();let f=!1;for(const g of h)if(g.type=="attribute"&&g.attributeKey=="listType"){const p=g.range.start.nodeAfter;g.attributeOldValue=="todo"&&p.hasAttribute("todoListChecked")&&(d.removeAttribute("todoListChecked",p),f=!0)}else if(g.type=="insert"&&g.name!="$text")for(const{item:p}of d.createRangeOn(g.position.nodeAfter))p.is("element")&&p.getAttribute("listType")!="todo"&&p.hasAttribute("todoListChecked")&&(d.removeAttribute("todoListChecked",p),f=!0);return f}),this.listenTo(a.view.document,"keydown",(d,h)=>{getCode(h)===ITEM_TOGGLE_KEYSTROKE$1&&(o.execute("checkTodoList"),d.stop())},{priority:"high"}),this.listenTo(a.view.document,"todoCheckboxChange",(d,h)=>{const f=h.target;if(!f||!f.is("element","input"))return;const g=a.view.createPositionAfter(f),v=a.mapper.toModelPosition(g).parent;v&&isListItemBlock(v)&&v.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(v)}),this.listenTo(a.view.document,"arrowKey",jumpOverCheckmarkOnSideArrowKeyPress$1(n,o.locale),{context:"$text"}),this.listenTo(a.mapper,"viewToModelPosition",(d,h)=>{const f=h.viewPosition.parent,g=f.is("attributeElement","li")&&h.viewPosition.offset==0,p=isLabelElement(f)&&h.viewPosition.offset<=1,v=f.is("element","span")&&f.getAttribute("contenteditable")=="false"&&isLabelElement(f.parent);if(!g&&!p&&!v)return;const b=h.modelPosition.nodeAfter;b&&b.getAttribute("listType")=="todo"&&(h.modelPosition=n.createPositionAt(b,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(o){const n=this.editor,a=n.model,l=Array.from(a.document.selection.getRanges());a.change(c=>{c.setSelection(o,"end"),n.execute("checkTodoList"),c.setSelection(l)})}_initAriaAnnouncements(){const{model:o,ui:n,t:a}=this.editor;let l=null;n&&o.document.selection.on("change:range",()=>{const c=o.document.selection.focus.parent,u=isTodoListItemElement(l),d=isTodoListItemElement(c);u&&!d?n.ariaLiveAnnouncer.announce(a("Leaving a to-do list")):!u&&d&&n.ariaLiveAnnouncer.announce(a("Entering a to-do list")),l=c})}}function todoListItemUpcastConverter(){return(s,o,n)=>{const{writer:a,schema:l}=n;if(!o.modelRange)return;const c=Array.from(o.modelRange.getItems({shallow:!0})).filter(u=>u.getAttribute("listType")==="todo"&&l.checkAttribute(u,"listItemId")).reduce((u,d)=>{const h=d.getAttribute("listItemId");return u.has(h)||u.set(h,getAllListItemBlocks(d)),u},new Map);for(const[,u]of c.entries())if(u.some(d=>d.getAttribute("todoListChecked")))for(const d of u)a.setAttribute("todoListChecked",!0,d)}}function todoItemInputConverter(){return(s,o,n)=>{const a=o.modelCursor,l=a.parent,c=o.viewItem;if(!n.consumable.test(c,{name:!0})||c.getAttribute("type")!="checkbox"||!a.isAtStart||!l.hasAttribute("listType"))return;n.consumable.consume(c,{name:!0});const u=n.writer;u.setAttribute("listType","todo",l),o.viewItem.hasAttribute("checked")&&u.setAttribute("todoListChecked",!0,l),o.modelRange=u.createRange(a)}}function elementUpcastConsumingConverter(s){const o=new Matcher(s);return(n,a,l)=>{const c=o.match(a.viewItem);c&&l.consumable.consume(a.viewItem,c.match)&&Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))}}function attributeUpcastConsumingConverter(s){const o=new Matcher(s);return(n,a,l)=>{const c=o.match(a.viewItem);if(!c)return;const u=c.match;u.name=!1,l.consumable.consume(a.viewItem,u)}}function isDescriptionBlock(s,o){return(s.is("element","paragraph")||s.is("element","listItem"))&&s.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(s)&&hasOnlyListAttributes(s,o)}function hasOnlyListAttributes(s,o){for(const n of s.getAttributeKeys())if(!n.startsWith("selection:")&&!o.includes(n))return!1;return!0}function jumpOverCheckmarkOnSideArrowKeyPress$1(s,o){return(n,a)=>{const l=getLocalizedArrowKeyCodeDirection(a.keyCode,o.contentLanguageDirection),c=s.schema,u=s.document.selection;if(!u.isCollapsed)return;const d=u.getFirstPosition(),h=d.parent;if(l=="right"&&d.isAtEnd){const f=c.getNearestSelectionRange(s.createPositionAfter(h),"forward");if(!f)return;const g=f.start.parent;g&&isListItemBlock(g)&&g.getAttribute("listType")=="todo"&&(s.change(p=>p.setSelection(f)),a.preventDefault(),a.stopPropagation(),n.stop())}else if(l=="left"&&d.isAtStart&&isListItemBlock(h)&&h.getAttribute("listType")=="todo"){const f=c.getNearestSelectionRange(s.createPositionBefore(h),"backward");if(!f)return;s.change(g=>g.setSelection(f)),a.preventDefault(),a.stopPropagation(),n.stop()}}}function isLabelElement(s){return!!s&&s.is("attributeElement")&&s.hasClass("todo-list__label")}function isTodoListItemElement(s){return!s||!s.is("element","paragraph")&&!s.is("element","listItem")?!1:s.getAttribute("listType")=="todo"}class TodoListUI extends Plugin{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor.t;createUIComponents(this.editor,"todoList",o("To-do List"),icons.todoList)}}class TodoList extends Plugin{static get requires(){return[TodoListEditing,TodoListUI]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}function getDefaults(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults$2=getDefaults();function changeDefaults(s){defaults$2=s}const escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=s=>escapeReplacements[s];function escape$1(s,o){if(o){if(escapeTest.test(s))return s.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(s))return s.replace(escapeReplaceNoEncode,getEscapeReplacement);return s}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(s){return s.replace(unescapeTest,(o,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(s,o){s=s.source||s,o=o||"";const n={replace:(a,l)=>(l=l.source||l,l=l.replace(caret,"$1"),s=s.replace(a,l),n),getRegex:()=>new RegExp(s,o)};return n}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(s,o,n){if(s){let a;try{a=decodeURIComponent(unescape$1(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(a.indexOf("javascript:")===0||a.indexOf("vbscript:")===0||a.indexOf("data:")===0)return null}o&&!originIndependentUrl.test(n)&&(n=resolveUrl(o,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(s,o){baseUrls[" "+s]||(justDomain.test(s)?baseUrls[" "+s]=s+"/":baseUrls[" "+s]=rtrim(s,"/",!0)),s=baseUrls[" "+s];const n=s.indexOf(":")===-1;return o.substring(0,2)==="//"?n?o:s.replace(protocol,"$1")+o:o.charAt(0)==="/"?n?o:s.replace(domain,"$1")+o:s+o}const noopTest={exec:function(){}};function merge$2(s){let o=1,n,a;for(;o<arguments.length;o++){n=arguments[o];for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(s[a]=n[a])}return s}function splitCells(s,o){const n=s.replace(/\|/g,(c,u,d)=>{let h=!1,f=u;for(;--f>=0&&d[f]==="\\";)h=!h;return h?"|":" |"}),a=n.split(/ \|/);let l=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),a.length>o)a.splice(o);else for(;a.length<o;)a.push("");for(;l<a.length;l++)a[l]=a[l].trim().replace(/\\\|/g,"|");return a}function rtrim(s,o,n){const a=s.length;if(a===0)return"";let l=0;for(;l<a;){const c=s.charAt(a-l-1);if(c===o&&!n)l++;else if(c!==o&&n)l++;else break}return s.substr(0,a-l)}function findClosingBracket(s,o){if(s.indexOf(o[1])===-1)return-1;const n=s.length;let a=0,l=0;for(;l<n;l++)if(s[l]==="\\")l++;else if(s[l]===o[0])a++;else if(s[l]===o[1]&&(a--,a<0))return l;return-1}function checkSanitizeDeprecation(s){s&&s.sanitize&&!s.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(s,o){if(o<1)return"";let n="";for(;o>1;)o&1&&(n+=s),o>>=1,s+=s;return n+s}function outputLink(s,o,n,a){const l=o.href,c=o.title?escape$1(o.title):null,u=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){a.state.inLink=!0;const d={type:"link",raw:n,href:l,title:c,text:u,tokens:a.inlineTokens(u,[])};return a.state.inLink=!1,d}else return{type:"image",raw:n,href:l,title:c,text:escape$1(u)}}function indentCodeCompensation(s,o){const n=s.match(/^(\s+)(?:```)/);if(n===null)return o;const a=n[1];return o.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[u]=c;return u.length>=a.length?l.slice(a.length):l}).join(`
`)}class Tokenizer{constructor(o){this.options=o||defaults$2}space(o){const n=this.rules.block.newline.exec(o);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(o){const n=this.rules.block.code.exec(o);if(n){const a=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?a:rtrim(a,`
`)}}}fences(o){const n=this.rules.block.fences.exec(o);if(n){const a=n[0],l=indentCodeCompensation(a,n[3]||"");return{type:"code",raw:a,lang:n[2]?n[2].trim():n[2],text:l}}}heading(o){const n=this.rules.block.heading.exec(o);if(n){let a=n[2].trim();if(/#$/.test(a)){const c=rtrim(a,"#");(this.options.pedantic||!c||/ $/.test(c))&&(a=c.trim())}const l={type:"heading",raw:n[0],depth:n[1].length,text:a,tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}hr(o){const n=this.rules.block.hr.exec(o);if(n)return{type:"hr",raw:n[0]}}blockquote(o){const n=this.rules.block.blockquote.exec(o);if(n){const a=n[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(o){let n=this.rules.block.list.exec(o);if(n){let a,l,c,u,d,h,f,g,p,v,b,_,w=n[1].trim();const x=w.length>1,S={type:"list",raw:"",ordered:x,start:x?+w.slice(0,-1):"",loose:!1,items:[]};w=x?`\\d{1,9}\\${w.slice(-1)}`:`\\${w}`,this.options.pedantic&&(w=x?w:"[*+-]");const C=new RegExp(`^( {0,3}${w})((?: [^\\n]*)?(?:\\n|$))`);for(;o&&(_=!1,!(!(n=C.exec(o))||this.rules.block.hr.test(o)));){if(a=n[0],o=o.substring(a.length),g=n[2].split(`
`,1)[0],p=o.split(`
`,1)[0],this.options.pedantic?(u=2,b=g.trimLeft()):(u=n[2].search(/[^ ]/),u=u>4?1:u,b=g.slice(u),u+=n[1].length),h=!1,!g&&/^ *$/.test(p)&&(a+=p+`
`,o=o.substring(p.length+1),_=!0),!_){const R=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;o&&(v=o.split(`
`,1)[0],g=v,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!R.test(g));){if(g.search(/[^ ]/)>=u||!g.trim())b+=`
`+g.slice(u);else if(!h)b+=`
`+g;else break;!h&&!g.trim()&&(h=!0),a+=v+`
`,o=o.substring(v.length+1)}}S.loose||(f?S.loose=!0:/\n *\n *$/.test(a)&&(f=!0)),this.options.gfm&&(l=/^\[[ xX]\] /.exec(b),l&&(c=l[0]!=="[ ] ",b=b.replace(/^\[[ xX]\] +/,""))),S.items.push({type:"list_item",raw:a,task:!!l,checked:c,loose:!1,text:b}),S.raw+=a}S.items[S.items.length-1].raw=a.trimRight(),S.items[S.items.length-1].text=b.trimRight(),S.raw=S.raw.trimRight();const T=S.items.length;for(d=0;d<T;d++){this.lexer.state.top=!1,S.items[d].tokens=this.lexer.blockTokens(S.items[d].text,[]);const R=S.items[d].tokens.filter(M=>M.type==="space"),A=R.every(M=>{const D=M.raw.split("");let O=0;for(const H of D)if(H===`
`&&(O+=1),O>1)return!0;return!1});!S.loose&&R.length&&A&&(S.loose=!0,S.items[d].loose=!0)}return S}}html(o){const n=this.rules.block.html.exec(o);if(n){const a={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};return this.options.sanitize&&(a.type="paragraph",a.text=this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]),a.tokens=[],this.lexer.inline(a.text,a.tokens)),a}}def(o){const n=this.rules.block.def.exec(o);if(n)return n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),{type:"def",tag:n[1].toLowerCase().replace(/\s+/g," "),raw:n[0],href:n[2],title:n[3]}}table(o){const n=this.rules.block.table.exec(o);if(n){const a={type:"table",header:splitCells(n[1]).map(l=>({text:l})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=n[0];let l=a.align.length,c,u,d,h;for(c=0;c<l;c++)/^ *-+: *$/.test(a.align[c])?a.align[c]="right":/^ *:-+: *$/.test(a.align[c])?a.align[c]="center":/^ *:-+ *$/.test(a.align[c])?a.align[c]="left":a.align[c]=null;for(l=a.rows.length,c=0;c<l;c++)a.rows[c]=splitCells(a.rows[c],a.header.length).map(f=>({text:f}));for(l=a.header.length,u=0;u<l;u++)a.header[u].tokens=[],this.lexer.inlineTokens(a.header[u].text,a.header[u].tokens);for(l=a.rows.length,u=0;u<l;u++)for(h=a.rows[u],d=0;d<h.length;d++)h[d].tokens=[],this.lexer.inlineTokens(h[d].text,h[d].tokens);return a}}}lheading(o){const n=this.rules.block.lheading.exec(o);if(n){const a={type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}paragraph(o){const n=this.rules.block.paragraph.exec(o);if(n){const a={type:"paragraph",raw:n[0],text:n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}text(o){const n=this.rules.block.text.exec(o);if(n){const a={type:"text",raw:n[0],text:n[0],tokens:[]};return this.lexer.inline(a.text,a.tokens),a}}escape(o){const n=this.rules.inline.escape.exec(o);if(n)return{type:"escape",raw:n[0],text:escape$1(n[1])}}tag(o){const n=this.rules.inline.tag.exec(o);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]):n[0]}}link(o){const n=this.rules.inline.link.exec(o);if(n){const a=n[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;const u=rtrim(a.slice(0,-1),"\\");if((a.length-u.length)%2===0)return}else{const u=findClosingBracket(n[2],"()");if(u>-1){const h=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,h).trim(),n[3]=""}}let l=n[2],c="";if(this.options.pedantic){const u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(l);u&&(l=u[1],c=u[3])}else c=n[3]?n[3].slice(1,-1):"";return l=l.trim(),/^</.test(l)&&(this.options.pedantic&&!/>$/.test(a)?l=l.slice(1):l=l.slice(1,-1)),outputLink(n,{href:l&&l.replace(this.rules.inline._escapes,"$1"),title:c&&c.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(o,n){let a;if((a=this.rules.inline.reflink.exec(o))||(a=this.rules.inline.nolink.exec(o))){let l=(a[2]||a[1]).replace(/\s+/g," ");if(l=n[l.toLowerCase()],!l||!l.href){const c=a[0].charAt(0);return{type:"text",raw:c,text:c}}return outputLink(a,l,a[0],this.lexer)}}emStrong(o,n,a=""){let l=this.rules.inline.emStrong.lDelim.exec(o);if(!l||l[3]&&a.match(/[\p{L}\p{N}]/u))return;const c=l[1]||l[2]||"";if(!c||c&&(a===""||this.rules.inline.punctuation.exec(a))){const u=l[0].length-1;let d,h,f=u,g=0;const p=l[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,n=n.slice(-1*o.length+u);(l=p.exec(n))!=null;){if(d=l[1]||l[2]||l[3]||l[4]||l[5]||l[6],!d)continue;if(h=d.length,l[3]||l[4]){f+=h;continue}else if((l[5]||l[6])&&u%3&&!((u+h)%3)){g+=h;continue}if(f-=h,f>0)continue;if(h=Math.min(h,h+f+g),Math.min(u,h)%2){const b=o.slice(1,u+l.index+h);return{type:"em",raw:o.slice(0,u+l.index+h+1),text:b,tokens:this.lexer.inlineTokens(b,[])}}const v=o.slice(2,u+l.index+h-1);return{type:"strong",raw:o.slice(0,u+l.index+h+1),text:v,tokens:this.lexer.inlineTokens(v,[])}}}}codespan(o){const n=this.rules.inline.code.exec(o);if(n){let a=n[2].replace(/\n/g," ");const l=/[^ ]/.test(a),c=/^ /.test(a)&&/ $/.test(a);return l&&c&&(a=a.substring(1,a.length-1)),a=escape$1(a,!0),{type:"codespan",raw:n[0],text:a}}}br(o){const n=this.rules.inline.br.exec(o);if(n)return{type:"br",raw:n[0]}}del(o){const n=this.rules.inline.del.exec(o);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2],[])}}autolink(o,n){const a=this.rules.inline.autolink.exec(o);if(a){let l,c;return a[2]==="@"?(l=escape$1(this.options.mangle?n(a[1]):a[1]),c="mailto:"+l):(l=escape$1(a[1]),c=l),{type:"link",raw:a[0],text:l,href:c,tokens:[{type:"text",raw:l,text:l}]}}}url(o,n){let a;if(a=this.rules.inline.url.exec(o)){let l,c;if(a[2]==="@")l=escape$1(this.options.mangle?n(a[0]):a[0]),c="mailto:"+l;else{let u;do u=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(u!==a[0]);l=escape$1(a[0]),a[1]==="www."?c="http://"+l:c=l}return{type:"link",raw:a[0],text:l,href:c,tokens:[{type:"text",raw:l,text:l}]}}}inlineText(o,n){const a=this.rules.inline.text.exec(o);if(a){let l;return this.lexer.state.inRawBlock?l=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):escape$1(a[0]):a[0]:l=escape$1(this.options.smartypants?n(a[0]):a[0]),{type:"text",raw:a[0],text:l}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal=merge$2({},block);block.gfm=merge$2({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic=merge$2({},block.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/\\\*|\\_/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal=merge$2({},inline);inline.pedantic=merge$2({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()});inline.gfm=merge$2({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks=merge$2({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function smartypants(s){return s.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(s){let o="",n,a;const l=s.length;for(n=0;n<l;n++)a=s.charCodeAt(n),Math.random()>.5&&(a="x"+a.toString(16)),o+="&#"+a+";";return o}class Lexer{constructor(o){this.tokens=[],this.tokens.links=Object.create(null),this.options=o||defaults$2,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:block.normal,inline:inline.normal};this.options.pedantic?(n.block=block.pedantic,n.inline=inline.pedantic):this.options.gfm&&(n.block=block.gfm,this.options.breaks?n.inline=inline.breaks:n.inline=inline.gfm),this.tokenizer.rules=n}static get rules(){return{block,inline}}static lex(o,n){return new Lexer(n).lex(o)}static lexInline(o,n){return new Lexer(n).inlineTokens(o)}lex(o){o=o.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(o,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(o,n=[]){this.options.pedantic&&(o=o.replace(/^ +$/gm,""));let a,l,c,u;for(;o;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>(a=d.call({lexer:this},o,n))?(o=o.substring(a.raw.length),n.push(a),!0):!1))){if(a=this.tokenizer.space(o)){o=o.substring(a.raw.length),a.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(o)){o=o.substring(a.raw.length),l=n[n.length-1],l&&(l.type==="paragraph"||l.type==="text")?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=l.text):n.push(a);continue}if(a=this.tokenizer.fences(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(o)){o=o.substring(a.raw.length),l=n[n.length-1],l&&(l.type==="paragraph"||l.type==="text")?(l.raw+=`
`+a.raw,l.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=l.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(o)){o=o.substring(a.raw.length),n.push(a);continue}if(c=o,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const h=o.slice(1);let f;this.options.extensions.startBlock.forEach(function(g){f=g.call({lexer:this},h),typeof f=="number"&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(c=o.substring(0,d+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){l=n[n.length-1],u&&l.type==="paragraph"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):n.push(a),u=c.length!==o.length,o=o.substring(a.raw.length);continue}if(a=this.tokenizer.text(o)){o=o.substring(a.raw.length),l=n[n.length-1],l&&l.type==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):n.push(a);continue}if(o){const d="Infinite loop on byte: "+o.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,n}inline(o,n){this.inlineQueue.push({src:o,tokens:n})}inlineTokens(o,n=[]){let a,l,c,u=o,d,h,f;if(this.tokens.links){const g=Object.keys(this.tokens.links);if(g.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(u))!=null;)g.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,d.index)+"["+repeatString("a",d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(u))!=null;)u=u.slice(0,d.index)+"["+repeatString("a",d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.escapedEmSt.exec(u))!=null;)u=u.slice(0,d.index)+"++"+u.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;o;)if(h||(f=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(g=>(a=g.call({lexer:this},o,n))?(o=o.substring(a.raw.length),n.push(a),!0):!1))){if(a=this.tokenizer.escape(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.tag(o)){o=o.substring(a.raw.length),l=n[n.length-1],l&&a.type==="text"&&l.type==="text"?(l.raw+=a.raw,l.text+=a.text):n.push(a);continue}if(a=this.tokenizer.link(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.reflink(o,this.tokens.links)){o=o.substring(a.raw.length),l=n[n.length-1],l&&a.type==="text"&&l.type==="text"?(l.raw+=a.raw,l.text+=a.text):n.push(a);continue}if(a=this.tokenizer.emStrong(o,u,f)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.codespan(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.br(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.del(o)){o=o.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.autolink(o,mangle)){o=o.substring(a.raw.length),n.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(o,mangle))){o=o.substring(a.raw.length),n.push(a);continue}if(c=o,this.options.extensions&&this.options.extensions.startInline){let g=1/0;const p=o.slice(1);let v;this.options.extensions.startInline.forEach(function(b){v=b.call({lexer:this},p),typeof v=="number"&&v>=0&&(g=Math.min(g,v))}),g<1/0&&g>=0&&(c=o.substring(0,g+1))}if(a=this.tokenizer.inlineText(c,smartypants)){o=o.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(f=a.raw.slice(-1)),h=!0,l=n[n.length-1],l&&l.type==="text"?(l.raw+=a.raw,l.text+=a.text):n.push(a);continue}if(o){const g="Infinite loop on byte: "+o.charCodeAt(0);if(this.options.silent){console.error(g);break}else throw new Error(g)}}return n}}class Renderer{constructor(o){this.options=o||defaults$2}code(o,n,a){const l=(n||"").match(/\S*/)[0];if(this.options.highlight){const c=this.options.highlight(o,l);c!=null&&c!==o&&(a=!0,o=c)}return o=o.replace(/\n$/,"")+`
`,l?'<pre><code class="'+this.options.langPrefix+escape$1(l,!0)+'">'+(a?o:escape$1(o,!0))+`</code></pre>
`:"<pre><code>"+(a?o:escape$1(o,!0))+`</code></pre>
`}blockquote(o){return`<blockquote>
`+o+`</blockquote>
`}html(o){return o}heading(o,n,a,l){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+l.slug(a)+'">'+o+"</h"+n+`>
`:"<h"+n+">"+o+"</h"+n+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(o,n,a){const l=n?"ol":"ul",c=n&&a!==1?' start="'+a+'"':"";return"<"+l+c+`>
`+o+"</"+l+`>
`}listitem(o){return"<li>"+o+`</li>
`}checkbox(o){return"<input "+(o?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(o){return"<p>"+o+`</p>
`}table(o,n){return n&&(n="<tbody>"+n+"</tbody>"),`<table>
<thead>
`+o+`</thead>
`+n+`</table>
`}tablerow(o){return`<tr>
`+o+`</tr>
`}tablecell(o,n){const a=n.header?"th":"td";return(n.align?"<"+a+' align="'+n.align+'">':"<"+a+">")+o+"</"+a+`>
`}strong(o){return"<strong>"+o+"</strong>"}em(o){return"<em>"+o+"</em>"}codespan(o){return"<code>"+o+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(o){return"<del>"+o+"</del>"}link(o,n,a){if(o=cleanUrl(this.options.sanitize,this.options.baseUrl,o),o===null)return a;let l='<a href="'+escape$1(o)+'"';return n&&(l+=' title="'+n+'"'),l+=">"+a+"</a>",l}image(o,n,a){if(o=cleanUrl(this.options.sanitize,this.options.baseUrl,o),o===null)return a;let l='<img src="'+o+'" alt="'+a+'"';return n&&(l+=' title="'+n+'"'),l+=this.options.xhtml?"/>":">",l}text(o){return o}}class TextRenderer{strong(o){return o}em(o){return o}codespan(o){return o}del(o){return o}html(o){return o}text(o){return o}link(o,n,a){return""+a}image(o,n,a){return""+a}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(o){return o.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(o,n){let a=o,l=0;if(this.seen.hasOwnProperty(a)){l=this.seen[o];do l++,a=o+"-"+l;while(this.seen.hasOwnProperty(a))}return n||(this.seen[o]=l,this.seen[a]=0),a}slug(o,n={}){const a=this.serialize(o);return this.getNextSafeSlug(a,n.dryrun)}}class Parser{constructor(o){this.options=o||defaults$2,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(o,n){return new Parser(n).parse(o)}static parseInline(o,n){return new Parser(n).parseInline(o)}parse(o,n=!0){let a="",l,c,u,d,h,f,g,p,v,b,_,w,x,S,C,T,R,A,M;const D=o.length;for(l=0;l<D;l++){if(b=o[l],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[b.type]&&(M=this.options.extensions.renderers[b.type].call({parser:this},b),M!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(b.type))){a+=M||"";continue}switch(b.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(b.tokens),b.depth,unescape$1(this.parseInline(b.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(b.text,b.lang,b.escaped);continue}case"table":{for(p="",g="",d=b.header.length,c=0;c<d;c++)g+=this.renderer.tablecell(this.parseInline(b.header[c].tokens),{header:!0,align:b.align[c]});for(p+=this.renderer.tablerow(g),v="",d=b.rows.length,c=0;c<d;c++){for(f=b.rows[c],g="",h=f.length,u=0;u<h;u++)g+=this.renderer.tablecell(this.parseInline(f[u].tokens),{header:!1,align:b.align[u]});v+=this.renderer.tablerow(g)}a+=this.renderer.table(p,v);continue}case"blockquote":{v=this.parse(b.tokens),a+=this.renderer.blockquote(v);continue}case"list":{for(_=b.ordered,w=b.start,x=b.loose,d=b.items.length,v="",c=0;c<d;c++)C=b.items[c],T=C.checked,R=C.task,S="",C.task&&(A=this.renderer.checkbox(T),x?C.tokens.length>0&&C.tokens[0].type==="paragraph"?(C.tokens[0].text=A+" "+C.tokens[0].text,C.tokens[0].tokens&&C.tokens[0].tokens.length>0&&C.tokens[0].tokens[0].type==="text"&&(C.tokens[0].tokens[0].text=A+" "+C.tokens[0].tokens[0].text)):C.tokens.unshift({type:"text",text:A}):S+=A),S+=this.parse(C.tokens,x),v+=this.renderer.listitem(S,R,T);a+=this.renderer.list(v,_,w);continue}case"html":{a+=this.renderer.html(b.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(b.tokens));continue}case"text":{for(v=b.tokens?this.parseInline(b.tokens):b.text;l+1<D&&o[l+1].type==="text";)b=o[++l],v+=`
`+(b.tokens?this.parseInline(b.tokens):b.text);a+=n?this.renderer.paragraph(v):v;continue}default:{const O='Token with "'+b.type+'" type was not found.';if(this.options.silent){console.error(O);return}else throw new Error(O)}}}return a}parseInline(o,n){n=n||this.renderer;let a="",l,c,u;const d=o.length;for(l=0;l<d;l++){if(c=o[l],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type]&&(u=this.options.extensions.renderers[c.type].call({parser:this},c),u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(c.type))){a+=u||"";continue}switch(c.type){case"escape":{a+=n.text(c.text);break}case"html":{a+=n.html(c.text);break}case"link":{a+=n.link(c.href,c.title,this.parseInline(c.tokens,n));break}case"image":{a+=n.image(c.href,c.title,c.text);break}case"strong":{a+=n.strong(this.parseInline(c.tokens,n));break}case"em":{a+=n.em(this.parseInline(c.tokens,n));break}case"codespan":{a+=n.codespan(c.text);break}case"br":{a+=n.br();break}case"del":{a+=n.del(this.parseInline(c.tokens,n));break}case"text":{a+=n.text(c.text);break}default:{const h='Token with "'+c.type+'" type was not found.';if(this.options.silent){console.error(h);return}else throw new Error(h)}}}return a}}function marked(s,o,n){if(typeof s>"u"||s===null)throw new Error("marked(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");if(typeof o=="function"&&(n=o,o=null),o=merge$2({},marked.defaults,o||{}),checkSanitizeDeprecation(o),n){const a=o.highlight;let l;try{l=Lexer.lex(s,o)}catch(d){return n(d)}const c=function(d){let h;if(!d)try{o.walkTokens&&marked.walkTokens(l,o.walkTokens),h=Parser.parse(l,o)}catch(f){d=f}return o.highlight=a,d?n(d):n(null,h)};if(!a||a.length<3||(delete o.highlight,!l.length))return c();let u=0;marked.walkTokens(l,function(d){d.type==="code"&&(u++,setTimeout(()=>{a(d.text,d.lang,function(h,f){if(h)return c(h);f!=null&&f!==d.text&&(d.text=f,d.escaped=!0),u--,u===0&&c()})},0))}),u===0&&c();return}try{const a=Lexer.lex(s,o);return o.walkTokens&&marked.walkTokens(a,o.walkTokens),Parser.parse(a,o)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,o.silent)return"<p>An error occurred:</p><pre>"+escape$1(a.message+"",!0)+"</pre>";throw a}}marked.options=marked.setOptions=function(s){return merge$2(marked.defaults,s),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$2;marked.use=function(...s){const o=merge$2({},...s),n=marked.defaults.extensions||{renderers:{},childTokens:{}};let a;s.forEach(l=>{if(l.extensions&&(a=!0,l.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if(c.renderer){const u=n.renderers?n.renderers[c.name]:null;u?n.renderers[c.name]=function(...d){let h=c.renderer.apply(this,d);return h===!1&&(h=u.apply(this,d)),h}:n.renderers[c.name]=c.renderer}if(c.tokenizer){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[c.level]?n[c.level].unshift(c.tokenizer):n[c.level]=[c.tokenizer],c.start&&(c.level==="block"?n.startBlock?n.startBlock.push(c.start):n.startBlock=[c.start]:c.level==="inline"&&(n.startInline?n.startInline.push(c.start):n.startInline=[c.start]))}c.childTokens&&(n.childTokens[c.name]=c.childTokens)})),l.renderer){const c=marked.defaults.renderer||new Renderer;for(const u in l.renderer){const d=c[u];c[u]=(...h)=>{let f=l.renderer[u].apply(c,h);return f===!1&&(f=d.apply(c,h)),f}}o.renderer=c}if(l.tokenizer){const c=marked.defaults.tokenizer||new Tokenizer;for(const u in l.tokenizer){const d=c[u];c[u]=(...h)=>{let f=l.tokenizer[u].apply(c,h);return f===!1&&(f=d.apply(c,h)),f}}o.tokenizer=c}if(l.walkTokens){const c=marked.defaults.walkTokens;o.walkTokens=function(u){l.walkTokens.call(this,u),c&&c.call(this,u)}}a&&(o.extensions=n),marked.setOptions(o)})};marked.walkTokens=function(s,o){for(const n of s)switch(o.call(marked,n),n.type){case"table":{for(const a of n.header)marked.walkTokens(a.tokens,o);for(const a of n.rows)for(const l of a)marked.walkTokens(l.tokens,o);break}case"list":{marked.walkTokens(n.items,o);break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[n.type]?marked.defaults.extensions.childTokens[n.type].forEach(function(a){marked.walkTokens(n[a],o)}):n.tokens&&marked.walkTokens(n.tokens,o)}};marked.parseInline=function(s,o){if(typeof s>"u"||s===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");o=merge$2({},marked.defaults,o||{}),checkSanitizeDeprecation(o);try{const n=Lexer.lexInline(s,o);return o.walkTokens&&marked.walkTokens(n,o.walkTokens),Parser.parseInline(n,o)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,o.silent)return"<p>An error occurred:</p><pre>"+escape$1(n.message+"",!0)+"</pre>";throw n}};marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;function extend$2(s){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var a in n)n.hasOwnProperty(a)&&(s[a]=n[a])}return s}function repeat(s,o){return Array(o+1).join(s)}function trimLeadingNewlines(s){return s.replace(/^\n*/,"")}function trimTrailingNewlines(s){for(var o=s.length;o>0&&s[o-1]===`
`;)o--;return s.substring(0,o)}var blockElements=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function isBlock(s){return is(s,blockElements)}var voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function isVoid(s){return is(s,voidElements)}function hasVoid(s){return has$2(s,voidElements)}var meaningfulWhenBlankElements=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function isMeaningfulWhenBlank(s){return is(s,meaningfulWhenBlankElements)}function hasMeaningfulWhenBlank(s){return has$2(s,meaningfulWhenBlankElements)}function is(s,o){return o.indexOf(s.nodeName)>=0}function has$2(s,o){return s.getElementsByTagName&&o.some(function(n){return s.getElementsByTagName(n).length})}var rules$1={};rules$1.paragraph={filter:"p",replacement:function(s){return`

`+s+`

`}};rules$1.lineBreak={filter:"br",replacement:function(s,o,n){return n.br+`
`}};rules$1.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(s,o,n){var a=Number(o.nodeName.charAt(1));if(n.headingStyle==="setext"&&a<3){var l=repeat(a===1?"=":"-",s.length);return`

`+s+`
`+l+`

`}else return`

`+repeat("#",a)+" "+s+`

`}};rules$1.blockquote={filter:"blockquote",replacement:function(s){return s=s.replace(/^\n+|\n+$/g,""),s=s.replace(/^/gm,"> "),`

`+s+`

`}};rules$1.list={filter:["ul","ol"],replacement:function(s,o){var n=o.parentNode;return n.nodeName==="LI"&&n.lastElementChild===o?`
`+s:`

`+s+`

`}};rules$1.listItem={filter:"li",replacement:function(s,o,n){s=s.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var a=n.bulletListMarker+"   ",l=o.parentNode;if(l.nodeName==="OL"){var c=l.getAttribute("start"),u=Array.prototype.indexOf.call(l.children,o);a=(c?Number(c)+u:u+1)+".  "}return a+s+(o.nextSibling&&!/\n$/.test(s)?`
`:"")}};rules$1.indentedCodeBlock={filter:function(s,o){return o.codeBlockStyle==="indented"&&s.nodeName==="PRE"&&s.firstChild&&s.firstChild.nodeName==="CODE"},replacement:function(s,o,n){return`

    `+o.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};rules$1.fencedCodeBlock={filter:function(s,o){return o.codeBlockStyle==="fenced"&&s.nodeName==="PRE"&&s.firstChild&&s.firstChild.nodeName==="CODE"},replacement:function(s,o,n){for(var a=o.firstChild.getAttribute("class")||"",l=(a.match(/language-(\S+)/)||[null,""])[1],c=o.firstChild.textContent,u=n.fence.charAt(0),d=3,h=new RegExp("^"+u+"{3,}","gm"),f;f=h.exec(c);)f[0].length>=d&&(d=f[0].length+1);var g=repeat(u,d);return`

`+g+l+`
`+c.replace(/\n$/,"")+`
`+g+`

`}};rules$1.horizontalRule={filter:"hr",replacement:function(s,o,n){return`

`+n.hr+`

`}};rules$1.inlineLink={filter:function(s,o){return o.linkStyle==="inlined"&&s.nodeName==="A"&&s.getAttribute("href")},replacement:function(s,o){var n=o.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var a=cleanAttribute(o.getAttribute("title"));return a&&(a=' "'+a.replace(/"/g,'\\"')+'"'),"["+s+"]("+n+a+")"}};rules$1.referenceLink={filter:function(s,o){return o.linkStyle==="referenced"&&s.nodeName==="A"&&s.getAttribute("href")},replacement:function(s,o,n){var a=o.getAttribute("href"),l=cleanAttribute(o.getAttribute("title"));l&&(l=' "'+l+'"');var c,u;switch(n.linkReferenceStyle){case"collapsed":c="["+s+"][]",u="["+s+"]: "+a+l;break;case"shortcut":c="["+s+"]",u="["+s+"]: "+a+l;break;default:var d=this.references.length+1;c="["+s+"]["+d+"]",u="["+d+"]: "+a+l}return this.references.push(u),c},references:[],append:function(s){var o="";return this.references.length&&(o=`

`+this.references.join(`
`)+`

`,this.references=[]),o}};rules$1.emphasis={filter:["em","i"],replacement:function(s,o,n){return s.trim()?n.emDelimiter+s+n.emDelimiter:""}};rules$1.strong={filter:["strong","b"],replacement:function(s,o,n){return s.trim()?n.strongDelimiter+s+n.strongDelimiter:""}};rules$1.code={filter:function(s){var o=s.previousSibling||s.nextSibling,n=s.parentNode.nodeName==="PRE"&&!o;return s.nodeName==="CODE"&&!n},replacement:function(s){if(!s)return"";s=s.replace(/\r?\n|\r/g," ");for(var o=/^`|^ .*?[^ ].* $|`$/.test(s)?" ":"",n="`",a=s.match(/`+/gm)||[];a.indexOf(n)!==-1;)n=n+"`";return n+o+s+o+n}};rules$1.image={filter:"img",replacement:function(s,o){var n=cleanAttribute(o.getAttribute("alt")),a=o.getAttribute("src")||"",l=cleanAttribute(o.getAttribute("title")),c=l?' "'+l+'"':"";return a?"!["+n+"]("+a+c+")":""}};function cleanAttribute(s){return s?s.replace(/(\n+\s*)+/g,`
`):""}function Rules(s){this.options=s,this._keep=[],this._remove=[],this.blankRule={replacement:s.blankReplacement},this.keepReplacement=s.keepReplacement,this.defaultRule={replacement:s.defaultReplacement},this.array=[];for(var o in s.rules)this.array.push(s.rules[o])}Rules.prototype={add:function(s,o){this.array.unshift(o)},keep:function(s){this._keep.unshift({filter:s,replacement:this.keepReplacement})},remove:function(s){this._remove.unshift({filter:s,replacement:function(){return""}})},forNode:function(s){if(s.isBlank)return this.blankRule;var o;return(o=findRule(this.array,s,this.options))||(o=findRule(this._keep,s,this.options))||(o=findRule(this._remove,s,this.options))?o:this.defaultRule},forEach:function(s){for(var o=0;o<this.array.length;o++)s(this.array[o],o)}};function findRule(s,o,n){for(var a=0;a<s.length;a++){var l=s[a];if(filterValue(l,o,n))return l}}function filterValue(s,o,n){var a=s.filter;if(typeof a=="string"){if(a===o.nodeName.toLowerCase())return!0}else if(Array.isArray(a)){if(a.indexOf(o.nodeName.toLowerCase())>-1)return!0}else if(typeof a=="function"){if(a.call(s,o,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function collapseWhitespace(s){var o=s.element,n=s.isBlock,a=s.isVoid,l=s.isPre||function(p){return p.nodeName==="PRE"};if(!(!o.firstChild||l(o))){for(var c=null,u=!1,d=null,h=next(d,o,l);h!==o;){if(h.nodeType===3||h.nodeType===4){var f=h.data.replace(/[ \r\n\t]+/g," ");if((!c||/ $/.test(c.data))&&!u&&f[0]===" "&&(f=f.substr(1)),!f){h=remove(h);continue}h.data=f,c=h}else if(h.nodeType===1)n(h)||h.nodeName==="BR"?(c&&(c.data=c.data.replace(/ $/,"")),c=null,u=!1):a(h)||l(h)?(c=null,u=!0):c&&(u=!1);else{h=remove(h);continue}var g=next(d,h,l);d=h,h=g}c&&(c.data=c.data.replace(/ $/,""),c.data||remove(c))}}function remove(s){var o=s.nextSibling||s.parentNode;return s.parentNode.removeChild(s),o}function next(s,o,n){return s&&s.parentNode===o||n(o)?o.nextSibling||o.parentNode:o.firstChild||o.nextSibling||o.parentNode}var root=typeof window<"u"?window:{};function canParseHTMLNatively(){var s=root.DOMParser,o=!1;try{new s().parseFromString("","text/html")&&(o=!0)}catch{}return o}function createHTMLParser(){var s=function(){};return shouldUseActiveX()?s.prototype.parseFromString=function(o){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(o),n.close(),n}:s.prototype.parseFromString=function(o){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(o),n.close(),n},s}function shouldUseActiveX(){var s=!1;try{document.implementation.createHTMLDocument("").open()}catch{root.ActiveXObject&&(s=!0)}return s}var HTMLParser=canParseHTMLNatively()?root.DOMParser:createHTMLParser();function RootNode(s,o){var n;if(typeof s=="string"){var a=htmlParser().parseFromString('<x-turndown id="turndown-root">'+s+"</x-turndown>","text/html");n=a.getElementById("turndown-root")}else n=s.cloneNode(!0);return collapseWhitespace({element:n,isBlock,isVoid,isPre:o.preformattedCode?isPreOrCode:null}),n}var _htmlParser;function htmlParser(){return _htmlParser=_htmlParser||new HTMLParser,_htmlParser}function isPreOrCode(s){return s.nodeName==="PRE"||s.nodeName==="CODE"}function Node$1(s,o){return s.isBlock=isBlock(s),s.isCode=s.nodeName==="CODE"||s.parentNode.isCode,s.isBlank=isBlank(s),s.flankingWhitespace=flankingWhitespace(s,o),s}function isBlank(s){return!isVoid(s)&&!isMeaningfulWhenBlank(s)&&/^\s*$/i.test(s.textContent)&&!hasVoid(s)&&!hasMeaningfulWhenBlank(s)}function flankingWhitespace(s,o){if(s.isBlock||o.preformattedCode&&s.isCode)return{leading:"",trailing:""};var n=edgeWhitespace(s.textContent);return n.leadingAscii&&isFlankedByWhitespace("left",s,o)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&isFlankedByWhitespace("right",s,o)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function edgeWhitespace(s){var o=s.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:o[1],leadingAscii:o[2],leadingNonAscii:o[3],trailing:o[4],trailingNonAscii:o[5],trailingAscii:o[6]}}function isFlankedByWhitespace(s,o,n){var a,l,c;return s==="left"?(a=o.previousSibling,l=/ $/):(a=o.nextSibling,l=/^ /),a&&(a.nodeType===3?c=l.test(a.nodeValue):n.preformattedCode&&a.nodeName==="CODE"?c=!1:a.nodeType===1&&!isBlock(a)&&(c=l.test(a.textContent))),c}var reduce$1=Array.prototype.reduce,escapes=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function TurndownService(s){if(!(this instanceof TurndownService))return new TurndownService(s);var o={rules:rules$1,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,a){return a.isBlock?`

`:""},keepReplacement:function(n,a){return a.isBlock?`

`+a.outerHTML+`

`:a.outerHTML},defaultReplacement:function(n,a){return a.isBlock?`

`+n+`

`:n}};this.options=extend$2({},o,s),this.rules=new Rules(this.options)}TurndownService.prototype={turndown:function(s){if(!canConvert(s))throw new TypeError(s+" is not a string, or an element/document/fragment node.");if(s==="")return"";var o=process$1.call(this,new RootNode(s,this.options));return postProcess.call(this,o)},use:function(s){if(Array.isArray(s))for(var o=0;o<s.length;o++)this.use(s[o]);else if(typeof s=="function")s(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(s,o){return this.rules.add(s,o),this},keep:function(s){return this.rules.keep(s),this},remove:function(s){return this.rules.remove(s),this},escape:function(s){return escapes.reduce(function(o,n){return o.replace(n[0],n[1])},s)}};function process$1(s){var o=this;return reduce$1.call(s.childNodes,function(n,a){a=new Node$1(a,o.options);var l="";return a.nodeType===3?l=a.isCode?a.nodeValue:o.escape(a.nodeValue):a.nodeType===1&&(l=replacementForNode.call(o,a)),join(n,l)},"")}function postProcess(s){var o=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(s=join(s,n.append(o.options)))}),s.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function replacementForNode(s){var o=this.rules.forNode(s),n=process$1.call(this,s),a=s.flankingWhitespace;return(a.leading||a.trailing)&&(n=n.trim()),a.leading+o.replacement(n,s,this.options)+a.trailing}function join(s,o){var n=trimTrailingNewlines(s),a=trimLeadingNewlines(o),l=Math.max(s.length-n.length,o.length-a.length),c=`

`.substring(0,l);return n+c+a}function canConvert(s){return s!=null&&(typeof s=="string"||s.nodeType&&(s.nodeType===1||s.nodeType===9||s.nodeType===11))}var highlightRegExp=/highlight-(?:text|source)-([a-z0-9]+)/;function highlightedCodeBlock(s){s.addRule("highlightedCodeBlock",{filter:function(o){var n=o.firstChild;return o.nodeName==="DIV"&&highlightRegExp.test(o.className)&&n&&n.nodeName==="PRE"},replacement:function(o,n,a){var l=n.className||"",c=(l.match(highlightRegExp)||[null,""])[1];return`

`+a.fence+c+`
`+n.firstChild.textContent+`
`+a.fence+`

`}})}function strikethrough(s){s.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(o){return"~"+o+"~"}})}var indexOf$1=Array.prototype.indexOf,every=Array.prototype.every,rules={};rules.tableCell={filter:["th","td"],replacement:function(s,o){return cell(s,o)}};rules.tableRow={filter:"tr",replacement:function(s,o){var n="",a={left:":--",right:"--:",center:":-:"};if(isHeadingRow(o))for(var l=0;l<o.childNodes.length;l++){var c="---",u=(o.childNodes[l].getAttribute("align")||"").toLowerCase();u&&(c=a[u]||c),n+=cell(c,o.childNodes[l])}return`
`+s+(n?`
`+n:"")}};rules.table={filter:function(s){return s.nodeName==="TABLE"&&isHeadingRow(s.rows[0])},replacement:function(s){return s=s.replace(`

`,`
`),`

`+s+`

`}};rules.tableSection={filter:["thead","tbody","tfoot"],replacement:function(s){return s}};function isHeadingRow(s){var o=s.parentNode;return o.nodeName==="THEAD"||o.firstChild===s&&(o.nodeName==="TABLE"||isFirstTbody(o))&&every.call(s.childNodes,function(n){return n.nodeName==="TH"})}function isFirstTbody(s){var o=s.previousSibling;return s.nodeName==="TBODY"&&(!o||o.nodeName==="THEAD"&&/^\s*$/i.test(o.textContent))}function cell(s,o){var n=indexOf$1.call(o.parentNode.childNodes,o),a=" ";return n===0&&(a="| "),a+s+" |"}function tables(s){s.keep(function(n){return n.nodeName==="TABLE"&&!isHeadingRow(n.rows[0])});for(var o in rules)s.addRule(o,rules[o])}function taskListItems(s){s.addRule("taskListItems",{filter:function(o){return o.type==="checkbox"&&o.parentNode.nodeName==="LI"},replacement:function(o,n){return(n.checked?"[x]":"[ ]")+" "}})}function gfm(s){s.use([highlightedCodeBlock,strikethrough,tables,taskListItems])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class MarkdownToHtml{constructor(){E(this,"_parser");E(this,"_options",{gfm:!0,breaks:!0,tables:!0,xhtml:!0,headerIds:!1});marked.use({tokenizer:{autolink:()=>null,url:()=>null},renderer:{checkbox(...o){return Object.getPrototypeOf(this).checkbox.call(this,...o).trimRight()},code(...o){return Object.getPrototypeOf(this).code.call(this,...o).replace(`
</code>`,"</code>")}}}),this._parser=marked}parse(o){return this._parser.parse(o,this._options)}}const autolinkRegex=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");class UpdatedTurndown extends TurndownService{escape(o){const n=super.escape;function a(u){return u=n(u),u=u.replace(/</g,"\\<"),u}let l="",c=0;for(const u of this._matchAutolink(o)){const d=u.index;d>c&&(l+=a(o.substring(c,d)));const h=u[0];l+=h,c=d+h.length}return c<o.length&&(l+=a(o.substring(c,o.length))),l}*_matchAutolink(o){for(const n of o.matchAll(autolinkRegex)){const a=n[0],l=this._autolinkFindEnd(a);yield Object.assign([a.substring(0,l)],{index:n.index})}}_autolinkFindEnd(o){let n=o.length;for(;n>0;){const a=o[n-1];if(`?!.,:*_~'"`.includes(a))n--;else if(a==")"){let l=0;for(let c=0;c<n;c++)o[c]=="("?l++:o[c]==")"&&l--;if(l<0)n--;else break}else break}return n}}class HtmlToMarkdown{constructor(){E(this,"_parser");this._parser=this._createParser()}parse(o){return this._parser.turndown(o)}keep(o){this._parser.keep(o)}_createParser(){const o=new UpdatedTurndown({codeBlockStyle:"fenced",hr:"---",headingStyle:"atx"});return o.use([gfm,this._todoList]),o}_todoList(o){o.addRule("taskListItems",{filter(n){return n.type==="checkbox"&&(n.parentNode.nodeName==="LI"||n.parentNode.parentNode.nodeName==="LI")},replacement(n,a){return(a.checked?"[x]":"[ ]")+" "}})}}class GFMDataProcessor{constructor(o){E(this,"_htmlDP");E(this,"_markdown2html");E(this,"_html2markdown");this._htmlDP=new HtmlDataProcessor(o),this._markdown2html=new MarkdownToHtml,this._html2markdown=new HtmlToMarkdown}keepHtml(o){this._html2markdown.keep([o])}toView(o){const n=this._markdown2html.parse(o);return this._htmlDP.toView(n)}toData(o){const n=this._htmlDP.toData(o);return this._html2markdown.parse(n)}registerRawContentMatcher(o){this._htmlDP.registerRawContentMatcher(o)}useFillerType(){}}class Markdown extends Plugin{constructor(o){super(o),o.data.processor=new GFMDataProcessor(o.data.viewDocument)}static get pluginName(){return"Markdown"}static get isOfficialPlugin(){return!0}}const ALLOWED_MARKDOWN_FIRST_LEVEL_TAGS=["SPAN","BR","PRE","CODE"];class PasteFromMarkdownExperimental extends Plugin{constructor(n){super(n);E(this,"_gfmDataProcessor");this._gfmDataProcessor=new GFMDataProcessor(n.data.viewDocument)}static get pluginName(){return"PasteFromMarkdownExperimental"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const n=this.editor,l=n.editing.view.document,c=n.plugins.get("ClipboardPipeline");let u=!1;this.listenTo(l,"keydown",(d,h)=>{u=h.shiftKey}),this.listenTo(c,"inputTransformation",(d,h)=>{if(u)return;const f=h.dataTransfer.getData("text/html");if(!f){const p=h.dataTransfer.getData("text/plain");h.content=this._gfmDataProcessor.toView(p);return}const g=this._parseMarkdownFromHtml(f);g&&(h.content=this._gfmDataProcessor.toView(g))})}_parseMarkdownFromHtml(n){const a=this._removeOsSpecificTags(n);if(!this._containsOnlyAllowedFirstLevelTags(a))return null;const l=this._removeFirstLevelWrapperTagsAndBrs(a);return this._containsAnyRemainingHtmlTags(l)?null:this._replaceHtmlReservedEntitiesWithCharacters(l)}_removeOsSpecificTags(n){return n.replace(/^<meta\b[^>]*>/,"").trim().replace(/^<html>/,"").replace(/<\/html>$/,"").trim().replace(/^<body>/,"").replace(/<\/body>$/,"").trim().replace(/^<!--StartFragment-->/,"").replace(/<!--EndFragment-->$/,"").trim()}_containsOnlyAllowedFirstLevelTags(n){const a=new DOMParser,{body:l}=a.parseFromString(n,"text/html");return Array.from(l.children).map(u=>u.tagName).every(u=>ALLOWED_MARKDOWN_FIRST_LEVEL_TAGS.includes(u))}_removeFirstLevelWrapperTagsAndBrs(n){const a=new DOMParser,{body:l}=a.parseFromString(n,"text/html"),c=l.querySelectorAll("br");for(const d of c)d.replaceWith(`
`);const u=l.querySelectorAll(":scope > *");for(const d of u){const h=d.cloneNode(!0);d.replaceWith(...h.childNodes)}return l.innerHTML}_containsAnyRemainingHtmlTags(n){return n.includes("<")}_replaceHtmlReservedEntitiesWithCharacters(n){return n.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&nbsp;/g," ")}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelToViewUrlAttributeConverter(s,o){const n=(a,l,c)=>{if(!c.consumable.consume(l.item,a.name))return;const u=l.attributeNewValue,d=c.writer,h=c.mapper.toViewElement(l.item),f=[...h.getChildren()].find(p=>p.getCustomProperty("media-content"));d.remove(f);const g=s.getMediaViewElement(d,u,o);d.insert(d.createPositionAt(h,0),g)};return a=>{a.on("attribute:url:media",n)}}function toMediaWidget(s,o,n){return o.setCustomProperty("media",!0,s),toWidget(s,o,{label:n})}function createMediaFigureElement(s,o,n,a){return s.createContainerElement("figure",{class:"media"},[o.getMediaViewElement(s,n,a),s.createSlot()])}function getSelectedMediaModelWidget(s){const o=s.getSelectedElement();return o&&o.is("element","media")?o:null}function insertMedia(s,o,n,a){s.change(l=>{const c=l.createElement("media",{url:o});s.insertObject(c,n,null,{setSelection:"on",findOptimalPosition:a?"auto":void 0})})}class MediaEmbedCommand extends Command{refresh(){const o=this.editor.model,n=o.document.selection,a=getSelectedMediaModelWidget(n);this.value=a?a.getAttribute("url"):void 0,this.isEnabled=isMediaSelected(n)||isAllowedInParent$1(n,o)}execute(o){const n=this.editor.model,a=n.document.selection,l=getSelectedMediaModelWidget(a);l?n.change(c=>{c.setAttribute("url",o,l)}):insertMedia(n,o,a,!0)}}function isAllowedInParent$1(s,o){let a=findOptimalInsertionRange(s,o).start.parent;return a.isEmpty&&!o.schema.isLimit(a)&&(a=a.parent),o.schema.checkChild(a,"media")}function isMediaSelected(s){const o=s.getSelectedElement();return!!o&&o.name==="media"}var mediaPlaceholderIcon='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const mediaPlaceholderIconViewBox="0 0 64 42";class MediaRegistry{constructor(o,n){E(this,"locale");E(this,"providerDefinitions");const a=n.providers,l=n.extraProviders||[],c=new Set(n.removeProviders),u=a.concat(l).filter(d=>{const h=d.name;return h?!c.has(h):(logWarning("media-embed-no-provider-name",{provider:d}),!1)});this.locale=o,this.providerDefinitions=u}hasMedia(o){return!!this._getMedia(o)}getMediaViewElement(o,n,a){return this._getMedia(n).getViewElement(o,a)}_getMedia(o){if(!o)return new Media(this.locale);o=o.trim();for(const n of this.providerDefinitions){const a=n.html,l=toArray$2(n.url);for(const c of l){const u=this._getUrlMatches(o,c);if(u)return new Media(this.locale,o,u,a)}}return null}_getUrlMatches(o,n){let a=o.match(n);if(a)return a;let l=o.replace(/^https?:\/\//,"");return a=l.match(n),a||(l=l.replace(/^www\./,""),a=l.match(n),a)?a:null}}class Media{constructor(o,n,a,l){E(this,"url");E(this,"_locale");E(this,"_match");E(this,"_previewRenderer");this.url=this._getValidUrl(n),this._locale=o,this._match=a,this._previewRenderer=l}getViewElement(o,n){const a={};let l;if(n.renderForEditingView||n.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(a["data-oembed-url"]=this.url),n.renderForEditingView&&(a.class="ck-media__wrapper");const c=this._getPreviewHtml(n);l=o.createRawElement("div",a,(u,d)=>{d.setContentOf(u,c)})}else this.url&&(a.url=this.url),l=o.createEmptyElement(n.elementName,a);return o.setCustomProperty("media-content",!0,l),l}_getPreviewHtml(o){return this._previewRenderer?this._previewRenderer(this._match):this.url&&o.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const o=new IconView,n=this._locale.t;return o.content=mediaPlaceholderIcon,o.viewBox=mediaPlaceholderIconViewBox,new Template({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[o]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":n("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(o){return o?o.match(/^https?/)?o:"https://"+o:null}}class MediaEmbedEditing extends Plugin{constructor(n){super(n);E(this,"registry");n.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:a=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${a[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:a=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${a[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:a=>{const l=a[1],c=a[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${l}${c?`?start=${c}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:a=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${a[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new MediaRegistry(n.locale,n.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model.schema,l=n.t,c=n.conversion,u=n.config.get("mediaEmbed.previewsInData"),d=n.config.get("mediaEmbed.elementName"),h=this.registry;n.commands.add("mediaEmbed",new MediaEmbedCommand(n)),a.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),c.for("dataDowncast").elementToStructure({model:"media",view:(f,{writer:g})=>{const p=f.getAttribute("url");return createMediaFigureElement(g,h,p,{elementName:d,renderMediaPreview:!!p&&u})}}),c.for("dataDowncast").add(modelToViewUrlAttributeConverter(h,{elementName:d,renderMediaPreview:u})),c.for("editingDowncast").elementToStructure({model:"media",view:(f,{writer:g})=>{const p=f.getAttribute("url"),v=createMediaFigureElement(g,h,p,{elementName:d,renderForEditingView:!0});return toMediaWidget(v,g,l("media widget"))}}),c.for("editingDowncast").add(modelToViewUrlAttributeConverter(h,{elementName:d,renderForEditingView:!0})),c.for("upcast").elementToElement({view:f=>["oembed",d].includes(f.name)&&f.getAttribute("url")?{name:!0}:null,model:(f,{writer:g})=>{const p=f.getAttribute("url");return h.hasMedia(p)?g.createElement("media",{url:p}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(f,{writer:g})=>{const p=f.getAttribute("data-oembed-url");return h.hasMedia(p)?g.createElement("media",{url:p}):null}}).add(f=>{const g=(p,v,b)=>{if(!b.consumable.consume(v.viewItem,{name:!0,classes:"media"}))return;const{modelRange:_,modelCursor:w}=b.convertChildren(v.viewItem,v.modelCursor);v.modelRange=_,v.modelCursor=w,first(_.getItems())||b.consumable.revert(v.viewItem,{name:!0,classes:"media"})};f.on("element:figure",g)})}}const URL_REGEXP=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class AutoMediaEmbed extends Plugin{constructor(n){super(n);E(this,"_timeoutId");E(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Clipboard,Delete,Undo]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model.document,l=n.plugins.get("ClipboardPipeline");this.listenTo(l,"inputTransformation",()=>{const u=a.selection.getFirstRange(),d=LivePosition.fromPosition(u.start);d.stickiness="toPrevious";const h=LivePosition.fromPosition(u.end);h.stickiness="toNext",a.once("change:data",()=>{this._embedMediaBetweenPositions(d,h),d.detach(),h.detach()},{priority:"high"})}),n.commands.get("undo").on("execute",()=>{this._timeoutId&&(global$1.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(n,a){const l=this.editor,c=l.plugins.get(MediaEmbedEditing).registry,u=new LiveRange(n,a),d=u.getWalker({ignoreElementEnd:!0});let h="";for(const g of d)g.item.is("$textProxy")&&(h+=g.item.data);if(h=h.trim(),!h.match(URL_REGEXP)){u.detach();return}if(!c.hasMedia(h)){u.detach();return}if(!l.commands.get("mediaEmbed").isEnabled){u.detach();return}this._positionToInsert=LivePosition.fromPosition(n),this._timeoutId=global$1.window.setTimeout(()=>{l.model.change(g=>{this._timeoutId=null,g.remove(u),u.detach();let p=null;this._positionToInsert.root.rootName!=="$graveyard"&&(p=this._positionToInsert),insertMedia(l.model,h,p,!1),this._positionToInsert.detach(),this._positionToInsert=null}),l.plugins.get(Delete).requestUndoOnBackspace()},100)}}class MediaFormView extends View$1{constructor(n,a){super(a);E(this,"focusTracker");E(this,"keystrokes");E(this,"urlInputView");E(this,"_validators");E(this,"_urlInputViewInfoDefault");E(this,"_urlInputViewInfoTip");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=n,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),submitHandler({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(n){this.urlInputView.fieldView.value=n.trim()}isValid(){this.resetFormStatus();for(const n of this._validators){const a=n(this);if(a)return this.urlInputView.errorText=a,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const n=this.locale.t,a=new LabeledFieldView(this.locale,createLabeledInputText),l=a.fieldView;return this._urlInputViewInfoDefault=n("Paste the media URL in the input."),this._urlInputViewInfoTip=n("Tip: Paste the URL into the content to embed faster."),a.label=n("Media URL"),a.infoText=this._urlInputViewInfoDefault,l.inputMode="url",l.on("input",()=>{a.infoText=l.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=l.element.value.trim()}),a}}var mediaIcon='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class MediaEmbedUI extends Plugin{constructor(){super(...arguments);E(this,"_formView")}static get requires(){return[MediaEmbedEditing,Dialog]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.ui.componentFactory.add("mediaEmbed",()=>{const a=this.editor.locale.t,l=this._createDialogButton(ButtonView);return l.tooltip=!0,l.label=a("Insert media"),l}),n.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const a=this.editor.locale.t,l=this._createDialogButton(MenuBarMenuListItemButtonView);return l.label=a("Media"),l})}_createDialogButton(n){const a=this.editor,l=new n(a.locale),c=a.commands.get("mediaEmbed"),u=this.editor.plugins.get("Dialog");return l.icon=mediaIcon,l.bind("isEnabled").to(c,"isEnabled"),l.on("execute",()=>{u.id==="mediaEmbed"?u.hide():this._showDialog()}),l}_showDialog(){const n=this.editor,a=n.plugins.get("Dialog"),l=n.commands.get("mediaEmbed"),c=n.locale.t;if(!this._formView){const u=n.plugins.get(MediaEmbedEditing).registry;this._formView=new(CssTransitionDisablerMixin(MediaFormView))(getFormValidators(n.t,u),n.locale),this._formView.on("submit",()=>this._handleSubmitForm())}a.show({id:"mediaEmbed",title:c("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=l.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:c("Cancel"),withText:!0,onExecute:()=>a.hide()},{label:c("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const n=this.editor,a=n.plugins.get("Dialog");this._formView.isValid()&&(n.execute("mediaEmbed",this._formView.url),a.hide(),n.editing.view.focus())}}function getFormValidators(s,o){return[n=>{if(!n.url.length)return s("The URL must not be empty.")},n=>{if(!o.hasMedia(n.url))return s("This media URL is not supported.")}]}class MediaEmbed extends Plugin{static get requires(){return[MediaEmbedEditing,MediaEmbedUI,AutoMediaEmbed,Widget]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const BRACKET_PAIRS={"(":")","[":"]","{":"}"};class MentionCommand extends Command{constructor(o){super(o),this._isEnabledBasedOnSelection=!1}refresh(){const o=this.editor.model,n=o.document;this.isEnabled=o.schema.checkAttributeInSelection(n.selection,"mention")}execute(o){const n=this.editor.model,l=n.document.selection,c=typeof o.mention=="string"?{id:o.mention}:o.mention,u=c.id,d=o.range||l.getFirstRange();if(!n.canEditAt(d))return;const h=o.text||u,f=_addMentionAttributes({_text:h,id:u},c);if(!u.startsWith(o.marker))throw new CKEditorError("mentioncommand-incorrect-id",this);n.change(g=>{const p=toMap(l.getAttributes()),v=new Map(p.entries());v.set("mention",f);const b=n.insertContent(g.createText(h,v),d),_=b.start.nodeBefore,w=b.end.nodeAfter,x=w&&w.is("$text")&&w.data.startsWith(" ");let S=!1;if(_&&w&&_.is("$text")&&w.is("$text")){const C=_.data.slice(-1),T=C in BRACKET_PAIRS,R=T&&w.data.startsWith(BRACKET_PAIRS[C]);S=T&&R}!S&&!x&&n.insertContent(g.createText(" ",p),d.start.getShiftedBy(h.length))})}}class MentionEditing extends Plugin{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.model,a=n.document;n.schema.extend("$text",{allowAttributes:"mention"}),o.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:l=>_toMentionAttribute(l)}}),o.conversion.for("downcast").attributeToElement({model:"mention",view:createViewMentionElement}),o.conversion.for("downcast").add(preventPartialMentionDowncast),a.registerPostFixer(l=>removePartialMentionPostFixer(l,a,n.schema)),a.registerPostFixer(l=>extendAttributeOnMentionPostFixer(l,a)),a.registerPostFixer(l=>selectionMentionAttributePostFixer(l,a)),o.commands.add("mention",new MentionCommand(o))}}function _addMentionAttributes(s,o){return Object.assign({uid:uid()},s,o||{})}function _toMentionAttribute(s,o){const n=s.getAttribute("data-mention"),a=s.getChild(0);if(!a)return;const l={id:n,_text:a.data};return _addMentionAttributes(l,o)}function preventPartialMentionDowncast(s){s.on("attribute:mention",(o,n,a)=>{const l=n.attributeNewValue;if(!n.item.is("$textProxy")||!l)return;const c=n.range.start;(c.textNode||c.nodeAfter).data!=l._text&&a.consumable.consume(n.item,o.name)},{priority:"highest"})}function createViewMentionElement(s,{writer:o}){if(!s)return;const n={class:"mention","data-mention":s.id},a={id:s.uid,priority:20};return o.createAttributeElement("span",n,a)}function selectionMentionAttributePostFixer(s,o){const n=o.selection,a=n.focus;return n.isCollapsed&&n.hasAttribute("mention")&&shouldNotTypeWithMentionAt(a)?(s.removeSelectionAttribute("mention"),!0):!1}function shouldNotTypeWithMentionAt(s){const o=s.isAtStart;return s.nodeBefore&&s.nodeBefore.is("$text")||o}function removePartialMentionPostFixer(s,o,n){const a=o.differ.getChanges();let l=!1;for(const c of a){if(c.type=="attribute")continue;const u=c.position;if(c.name=="$text"){const d=u.textNode&&u.textNode.nextSibling;l=checkAndFix(u.textNode,s)||l,l=checkAndFix(d,s)||l,l=checkAndFix(u.nodeBefore,s)||l,l=checkAndFix(u.nodeAfter,s)||l}if(c.name!="$text"&&c.type=="insert"){const d=u.nodeAfter;for(const h of s.createRangeIn(d).getItems())l=checkAndFix(h,s)||l}if(c.type=="insert"&&n.isInline(c.name)){const d=u.nodeAfter&&u.nodeAfter.nextSibling;l=checkAndFix(u.nodeBefore,s)||l,l=checkAndFix(d,s)||l}}return l}function extendAttributeOnMentionPostFixer(s,o){const n=o.differ.getChanges();let a=!1;for(const l of n)if(l.type==="attribute"&&l.attributeKey!="mention"){const c=l.range.start.nodeBefore,u=l.range.end.nodeAfter;for(const d of[c,u])isBrokenMentionNode(d)&&d.getAttribute(l.attributeKey)!=l.attributeNewValue&&(s.setAttribute(l.attributeKey,l.attributeNewValue,d),a=!0)}return a}function isBrokenMentionNode(s){if(!s||!(s.is("$text")||s.is("$textProxy"))||!s.hasAttribute("mention"))return!1;const o=s.data,a=s.getAttribute("mention")._text;return o!=a}function checkAndFix(s,o){return isBrokenMentionNode(s)?(o.removeAttribute("mention",s),!0):!1}class MentionsView extends ListView{constructor(n){super(n);E(this,"selected");E(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const n=this.selected,a=this.items.getIndex(n);this.select(a+1)}selectPrevious(){const n=this.selected,a=this.items.getIndex(n);this.select(a-1)}select(n){let a=0;n>0&&n<this.items.length?a=n:n<0&&(a=this.items.length-1);const l=this.items.get(a);this.selected!==l&&(this.selected&&this.selected.removeHighlight(),l.highlight(),this.selected=l,this._isItemVisibleInScrolledArea(l)||(this.element.scrollTop=l.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(n){return new Rect$3(this.element).contains(new Rect$3(n.element))}}class DomWrapperView extends View$1{constructor(n,a){super(n);E(this,"domElement");this.template=void 0,this.domElement=a,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(l,c,u)=>{u?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class MentionListItemView extends ListItemView{constructor(){super(...arguments);E(this,"item");E(this,"marker")}highlight(){const n=this.children.first;n.isOn=!0}removeHighlight(){const n=this.children.first;n.isOn=!1}}const VERTICAL_SPACING=3,defaultHandledKeyCodes=[keyCodes.arrowup,keyCodes.arrowdown,keyCodes.esc],defaultCommitKeyCodes=[keyCodes.enter,keyCodes.tab];class MentionUI extends Plugin{constructor(n){super(n);E(this,"_mentionsView");E(this,"_mentionsConfigurations");E(this,"_balloon");E(this,"_items",new Collection);E(this,"_lastRequested");E(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=debounce$1(this._requestFeed,100),n.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ContextualBalloon]}init(){const n=this.editor,a=n.config.get("mention.commitKeys")||defaultCommitKeyCodes,l=defaultHandledKeyCodes.concat(a);this._balloon=n.plugins.get(ContextualBalloon),n.editing.view.document.on("keydown",(d,h)=>{u(h.keyCode)&&this._isUIVisible&&(h.preventDefault(),d.stop(),h.keyCode==keyCodes.arrowdown&&this._mentionsView.selectNext(),h.keyCode==keyCodes.arrowup&&this._mentionsView.selectPrevious(),a.includes(h.keyCode)&&this._mentionsView.executeSelected(),h.keyCode==keyCodes.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),clickOutsideHandler({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const c=n.config.get("mention.feeds");for(const d of c){const{feed:h,marker:f,dropdownLimit:g}=d;if(!isValidMentionMarker(f))throw new CKEditorError("mentionconfig-incorrect-marker",null,{marker:f});const p=typeof h=="function"?h.bind(this.editor):createFeedCallback(h),v=d.itemRenderer,b={marker:f,feedCallback:p,itemRenderer:v,dropdownLimit:g};this._mentionsConfigurations.set(f,b)}this._setupTextWatcher(c),this.listenTo(n,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(d,h)=>this._handleFeedResponse(h)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function u(d){return l.includes(d)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const n=this.editor.locale,a=new MentionsView(n);return a.items.bindTo(this._items).using(l=>{const{item:c,marker:u}=l,{dropdownLimit:d}=this._mentionsConfigurations.get(u),h=d||this.editor.config.get("mention.dropdownLimit")||10;if(a.items.length>=h)return null;const f=new MentionListItemView(n),g=this._renderItem(c,u);return g.delegate("execute").to(f),f.children.add(g),f.item=c,f.marker=u,f.on("execute",()=>{a.fire("execute",{item:c,marker:u})}),f}),a.on("execute",(l,c)=>{const u=this.editor,d=u.model,h=c.item,f=c.marker,g=u.model.markers.get("mention"),p=d.createPositionAt(d.document.selection.focus),v=d.createPositionAt(g.getStart()),b=d.createRange(v,p);this._hideUIAndRemoveMarker(),u.execute("mention",{mention:h,text:h.text,marker:f,range:b}),u.editing.view.focus()}),a}_getItemRenderer(n){const{itemRenderer:a}=this._mentionsConfigurations.get(n);return a}_requestFeed(n,a){this._lastRequested=a;const{feedCallback:l}=this._mentionsConfigurations.get(n),c=l(a);if(!(c instanceof Promise)){this.fire("requestFeed:response",{feed:c,marker:n,feedText:a});return}c.then(d=>{this._lastRequested==a?this.fire("requestFeed:response",{feed:d,marker:n,feedText:a}):this.fire("requestFeed:discarded",{feed:d,marker:n,feedText:a})}).catch(d=>{this.fire("requestFeed:error",{error:d}),logWarning("mention-feed-callback-error",{marker:n})})}_setupTextWatcher(n){const a=this.editor,l=n.map(d=>({...d,pattern:createRegExp(d.marker,d.minimumCharacters||0)})),c=new TextWatcher(a.model,createTestCallback(l));c.on("matched",(d,h)=>{const f=getLastValidMarkerInText(l,h.text),p=a.model.document.selection.focus,v=a.model.createPositionAt(p.parent,f.position);if(isPositionInExistingMention(p)||isMarkerInExistingMention(v)){this._hideUIAndRemoveMarker();return}const b=requestFeedText(f,h.text),_=f.marker.length+b.length,w=p.getShiftedBy(-_),x=p.getShiftedBy(-b.length),S=a.model.createRange(w,x);if(checkIfStillInCompletionMode(a)){const C=a.model.markers.get("mention");a.model.change(T=>{T.updateMarker(C,{range:S})})}else a.model.change(C=>{C.addMarker("mention",{range:S,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(f.marker,b)}),c.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const u=a.commands.get("mention");return c.bind("isEnabled").to(u),c}_handleFeedResponse(n){const{feed:a,marker:l}=n;if(!checkIfStillInCompletionMode(this.editor))return;this._items.clear();for(const u of a){const d=typeof u!="object"?{id:u,text:u}:u;this._items.add({item:d,marker:l})}const c=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(c):this._hideUIAndRemoveMarker()}_showOrUpdateUI(n){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(n,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(n,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),checkIfStillInCompletionMode(this.editor)&&this.editor.model.change(n=>n.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(n,a){const l=this.editor;let c,u=n.id;const d=this._getItemRenderer(a);if(d){const h=d(n);typeof h!="string"?c=new DomWrapperView(l.locale,h):u=h}if(!c){const h=new ButtonView(l.locale);h.label=u,h.withText=!0,c=h}return c}_getBalloonPanelPositionData(n,a){const l=this.editor,c=l.editing,u=c.view.domConverter,d=c.mapper,h=l.locale.uiLanguageDirection;return{target:()=>{let f=n.getRange();f.start.root.rootName=="$graveyard"&&(f=l.model.document.selection.getFirstRange());const g=d.toViewRange(f);return Rect$3.getDomRangeRects(u.viewRangeToDom(g)).pop()},limiter:()=>{const f=this.editor.editing.view,p=f.document.selection.editableElement;return p?f.domConverter.mapViewToDom(p.root):null},positions:getBalloonPanelPositions(a,h)}}}function getBalloonPanelPositions(s,o){const n={caret_se:a=>({top:a.bottom+VERTICAL_SPACING,left:a.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(a,l)=>({top:a.top-l.height-VERTICAL_SPACING,left:a.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(a,l)=>({top:a.bottom+VERTICAL_SPACING,left:a.right-l.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(a,l)=>({top:a.top-l.height-VERTICAL_SPACING,left:a.right-l.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(n,s)?[n[s]]:o!=="rtl"?[n.caret_se,n.caret_sw,n.caret_ne,n.caret_nw]:[n.caret_sw,n.caret_se,n.caret_nw,n.caret_ne]}function getLastValidMarkerInText(s,o){let n;for(const a of s){const l=o.lastIndexOf(a.marker);l>0&&!o.substring(l-1).match(a.pattern)||(!n||l>=n.position)&&(n={marker:a.marker,position:l,minimumCharacters:a.minimumCharacters,pattern:a.pattern})}return n}function createRegExp(s,o){const n=o==0?"*":`{${o},}`,a=env$1.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,l=".";s=s.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const c=`(?:^|[ ${a}])(${s})(${l}${n})$`;return new RegExp(c,"u")}function createTestCallback(s){return n=>{const a=getLastValidMarkerInText(s,n);if(!a)return!1;let l=0;a.position!==0&&(l=a.position-1);const c=n.substring(l);return a.pattern.test(c)}}function requestFeedText(s,o){let n=0;s.position!==0&&(n=s.position-1);const a=createRegExp(s.marker,0);return o.substring(n).match(a)[2]}function createFeedCallback(s){return o=>s.filter(a=>(typeof a=="string"?a:String(a.id)).toLowerCase().includes(o.toLowerCase()))}function isPositionInExistingMention(s){const o=s.textNode&&s.textNode.hasAttribute("mention"),n=s.nodeBefore;return o||n&&n.is("$text")&&n.hasAttribute("mention")}function isMarkerInExistingMention(s){const o=s.nodeAfter;return o&&o.is("$text")&&o.hasAttribute("mention")}function isValidMentionMarker(s){return!!s}function checkIfStillInCompletionMode(s){return s.model.markers.has("mention")}class Mention extends Plugin{toMentionAttribute(o,n){return _toMentionAttribute(o,n)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[MentionEditing,MentionUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class PageBreakCommand extends Command{refresh(){const o=this.editor.model,n=o.schema,a=o.document.selection;this.isEnabled=isPageBreakAllowedInParent(a,n,o)}execute(){const o=this.editor.model;o.change(n=>{const a=n.createElement("pageBreak");o.insertObject(a,null,null,{setSelection:"after"})})}}function isPageBreakAllowedInParent(s,o,n){const a=getInsertPageBreakParent(s,n);return o.checkChild(a,"pageBreak")}function getInsertPageBreakParent(s,o){const a=findOptimalInsertionRange(s,o).start.parent;return a.isEmpty&&!a.is("element","$root")?a.parent:a}class PageBreakEditing extends Plugin{static get pluginName(){return"PageBreakEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.model.schema,a=o.t,l=o.conversion;n.register("pageBreak",{inheritAllFrom:"$blockObject"}),l.for("dataDowncast").elementToStructure({model:"pageBreak",view:(c,{writer:u})=>u.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},u.createContainerElement("span",{style:"display: none"}))}),l.for("editingDowncast").elementToStructure({model:"pageBreak",view:(c,{writer:u})=>{const d=a("Page break"),h=u.createContainerElement("div"),f=u.createRawElement("span",{class:"page-break__label"},function(g){g.innerText=a("Page break")});return u.addClass("page-break",h),u.insert(u.createPositionAt(h,0),f),toPageBreakWidget(h,u,d)}}),l.for("upcast").elementToElement({view:c=>{const u=c.getStyle("page-break-before")=="always",d=c.getStyle("page-break-after")=="always";if(!u&&!d)return null;if(c.childCount==1){const h=c.getChild(0);if(!h.is("element","span")||h.getStyle("display")!="none")return null}else if(c.childCount>1)return null;return{name:!0}},model:"pageBreak",converterPriority:"high"}),o.commands.add("pageBreak",new PageBreakCommand(o))}}function toPageBreakWidget(s,o,n){return o.setCustomProperty("pageBreak",!0,s),toWidget(s,o,{label:n})}var pageBreakIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>';class PageBreakUI extends Plugin{static get pluginName(){return"PageBreakUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add("pageBreak",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),o.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get("pageBreak"),c=new o(n.locale),u=a.t;return c.set({label:u("Page break"),icon:pageBreakIcon}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute("pageBreak"),n.editing.view.focus()}),c}}class PageBreak extends Plugin{static get requires(){return[PageBreakEditing,PageBreakUI,Widget]}static get pluginName(){return"PageBreak"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function transformBookmarks(s,o){const n=[];for(const a of o.createRangeIn(s)){const l=a.item;l.is("element","a")&&!l.hasAttribute("href")&&(l.hasAttribute("id")||l.hasAttribute("name"))&&n.push(l)}for(const a of n){const l=a.parent.getChildIndex(a)+1,c=a.getChildren();o.insertChild(l,c,a.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertCssLengthToPx(s){const o=parseFloat(s);return s.endsWith("pt")?toPx(o*96/72):s.endsWith("pc")?toPx(o*12*96/72):s.endsWith("in")?toPx(o*96):s.endsWith("cm")?toPx(o*96/2.54):s.endsWith("mm")?toPx(o/10*96/2.54):s}function isPx(s){return s!==void 0&&s.endsWith("px")}function toPx(s){return s.toFixed(2).replace(/\.?0+$/,"")+"px"}function transformListItemLikeElementsIntoLists(s,o,n){if(!s.childCount)return;const a=new UpcastWriter(s.document),l=findAllItemLikeElements(s,a);if(!l.length)return;const c={},u=[];for(const d of l)if(d.indent!==void 0){isListContinuation(d)||(u.length=0);const h=`${d.id}:${d.indent}`,f=Math.min(d.indent-1,u.length);if(f<u.length&&u[f].id!==d.id&&(u.length=f),f<u.length-1)u.length=f+1;else{const p=detectListStyle(d,o);if(f>u.length-1||u[f].listElement.name!=p.type){f==0&&p.type=="ol"&&d.id!==void 0&&c[h]&&(p.startIndex=c[h]);const v=createNewEmptyList(p,a,n);if(isPx(d.marginLeft)&&(f==0||isPx(u[f-1].marginLeft))){let b=d.marginLeft;f>0&&(b=toPx(parseFloat(b)-parseFloat(u[f-1].marginLeft))),a.setStyle("padding-left",b,v)}if(u.length==0){const b=d.element.parent,_=b.getChildIndex(d.element)+1;a.insertChild(_,v,b)}else{const b=u[f-1].listItemElements;a.appendChild(v,b[b.length-1])}u[f]={...d,listElement:v,listItemElements:[]},f==0&&d.id!==void 0&&(c[h]=p.startIndex||1)}}const g=d.element.name=="li"?d.element:a.createElement("li");a.appendChild(g,u[f].listElement),u[f].listItemElements.push(g),f==0&&d.id!==void 0&&c[h]++,d.element!=g&&a.appendChild(d.element,g),removeBulletElement(d.element,a),a.removeStyle("text-indent",d.element),a.removeStyle("margin-left",d.element)}else{const h=u.find(f=>f.marginLeft==d.marginLeft);if(h){const f=h.listItemElements;a.appendChild(d.element,f[f.length-1]),a.removeStyle("margin-left",d.element)}else u.length=0}}function unwrapParagraphInListItem(s,o){for(const n of o.createRangeIn(s)){const a=n.item;if(a.is("element","li")){const l=a.getChild(0);l&&l.is("element","p")&&o.unwrapElement(l)}}}function findAllItemLikeElements(s,o){const n=o.createRangeIn(s),a=[],l=new Set;for(const c of n.getItems()){if(!c.is("element")||!c.name.match(/^(p|h\d+|li|div)$/))continue;let u=getMarginLeftNormalized(c);if(u!==void 0&&parseFloat(u)==0&&!Array.from(c.getClassNames()).find(d=>d.startsWith("MsoList"))&&(u=void 0),c.hasStyle("mso-list")||u!==void 0&&l.has(u)){const d=getListItemData(c);a.push({element:c,id:d.id,order:d.order,indent:d.indent,marginLeft:u}),u!==void 0&&l.add(u)}else l.clear()}return a}function isListContinuation(s){const o=s.element.previousSibling;return isList(o||s.element.parent)}function isList(s){return s.is("element","ol")||s.is("element","ul")}function detectListStyle(s,o){const n=new RegExp(`@list l${s.id}:level${s.indent}\\s*({[^}]*)`,"gi"),a=/mso-level-number-format:([^;]{0,100});/gi,l=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,c=new RegExp(`@list\\s+l${s.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),u=new RegExp(`@list l${s.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),d=c.exec(o),h=u.exec(o),f=d&&!h,g=n.exec(o);let p="decimal",v="ol",b=null;if(g&&g[1]){const _=a.exec(g[1]);if(_&&_[1]&&(p=_[1].trim(),v=p!=="bullet"&&p!=="image"?"ol":"ul"),p==="bullet"){const w=findBulletedListStyle(s.element);w&&(p=w)}else{const w=l.exec(g[1]);w&&w[1]&&(b=parseInt(w[1]))}f&&(v="ol")}return{type:v,startIndex:b,style:mapListStyleDefinition(p),isLegalStyleList:f}}function findBulletedListStyle(s){if(s.name=="li"&&s.parent.name=="ul"&&s.parent.hasAttribute("type"))return s.parent.getAttribute("type");const o=findListMarkerNode(s);if(!o)return null;const n=o._data;return n==="o"?"circle":n==="·"?"disc":n==="§"?"square":null}function findListMarkerNode(s){if(s.getChild(0).is("$text"))return null;for(const o of s.getChildren()){if(!o.is("element","span"))continue;const n=o.getChild(0);if(n)return n.is("$text")?n:n.getChild(0)}/* istanbul ignore next -- @preserve */return null}function mapListStyleDefinition(s){if(s.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(s){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return s;default:return null}}function createNewEmptyList(s,o,n){const a=o.createElement(s.type);return s.style&&o.setStyle("list-style-type",s.style,a),s.startIndex&&s.startIndex>1&&o.setAttribute("start",s.startIndex,a),s.isLegalStyleList&&n&&o.addClass("legal-list",a),a}function getListItemData(s){const o=s.getStyle("mso-list");if(o===void 0)return{};const n=o.match(/(^|\s{1,100})l(\d+)/i),a=o.match(/\s{0,100}lfo(\d+)/i),l=o.match(/\s{0,100}level(\d+)/i);return n&&a&&l?{id:n[2],order:a[1],indent:parseInt(l[1])}:{indent:1}}function removeBulletElement(s,o){const n=new Matcher({name:"span",styles:{"mso-list":"Ignore"}}),a=o.createRangeIn(s);for(const l of a)l.type==="elementStart"&&n.match(l.item)&&o.remove(l.item)}function getMarginLeftNormalized(s){const o=s.getStyle("margin-left");return o===void 0||o.endsWith("px")?o:convertCssLengthToPx(o)}function replaceImagesSourceWithBase64(s,o){if(!s.childCount)return;const n=new UpcastWriter(s.document),a=findAllShapesIds(s,n);removeAllImgElementsRepresentingShapes(a,s,n),insertMissingImgs(a,s,n),removeAllShapeElements(s,n);const l=findAllImageElementsWithLocalSource(s,n);l.length&&replaceImagesFileSourceWithInlineRepresentation(l,extractImageDataFromRtf(o),n)}function _convertHexToBase64(s){return btoa(s.match(/\w{2}/g).map(o=>String.fromCharCode(parseInt(o,16))).join(""))}function findAllShapesIds(s,o){const n=o.createRangeIn(s),a=new Matcher({name:/v:(.+)/}),l=[];for(const c of n){if(c.type!="elementStart")continue;const u=c.item,d=u.previousSibling,h=d&&d.is("element")?d.name:null,f=["Chart"],g=a.match(u),p=u.getAttribute("o:gfxdata"),v=h==="v:shapetype",b=p&&f.some(_=>u.getAttribute("id").includes(_));g&&p&&!v&&!b&&l.push(c.item.getAttribute("id"))}return l}function removeAllImgElementsRepresentingShapes(s,o,n){const a=n.createRangeIn(o),l=new Matcher({name:"img"}),c=[];for(const u of a)if(u.item.is("element")&&l.match(u.item)){const d=u.item,h=d.getAttribute("v:shapes")?d.getAttribute("v:shapes").split(" "):[];h.length&&h.every(f=>s.indexOf(f)>-1)?c.push(d):d.getAttribute("src")||c.push(d)}for(const u of c)n.remove(u)}function removeAllShapeElements(s,o){const n=o.createRangeIn(s),a=new Matcher({name:/v:(.+)/}),l=[];for(const c of n)c.type=="elementStart"&&a.match(c.item)&&l.push(c.item);for(const c of l)o.remove(c)}function insertMissingImgs(s,o,n){const a=n.createRangeIn(o),l=[];for(const d of a)if(d.type=="elementStart"&&d.item.is("element","v:shape")){const h=d.item.getAttribute("id");if(s.includes(h))continue;c(d.item.parent.getChildren(),h)||l.push(d.item)}for(const d of l){const h={src:u(d)};d.hasAttribute("alt")&&(h.alt=d.getAttribute("alt"));const f=n.createElement("img",h);n.insertChild(d.index+1,f,d.parent)}function c(d,h){for(const f of d){/* istanbul ignore else -- @preserve */if(f.is("element")&&(f.name=="img"&&f.getAttribute("v:shapes")==h||c(f.getChildren(),h)))return!0}return!1}function u(d){for(const h of d.getChildren()){/* istanbul ignore else -- @preserve */if(h.is("element")&&h.getAttribute("src"))return h.getAttribute("src")}}}function findAllImageElementsWithLocalSource(s,o){const n=o.createRangeIn(s),a=new Matcher({name:"img"}),l=[];for(const c of n)c.item.is("element")&&a.match(c.item)&&c.item.getAttribute("src").startsWith("file://")&&l.push(c.item);return l}function extractImageDataFromRtf(s){if(!s)return[];const o=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+o.source+"))([\\da-fA-F\\s]+)\\}","g"),a=s.match(n),l=[];if(a)for(const c of a){let u=!1;c.includes("\\pngblip")?u="image/png":c.includes("\\jpegblip")&&(u="image/jpeg"),u&&l.push({hex:c.replace(o,"").replace(/[^\da-fA-F]/g,""),type:u})}return l}function replaceImagesFileSourceWithInlineRepresentation(s,o,n){if(s.length===o.length)for(let a=0;a<s.length;a++){const l=`data:${o[a].type};base64,${_convertHexToBase64(o[a].hex)}`;n.setAttribute("src",l,s[a])}}function removeMSAttributes(s){const o=[],n=new UpcastWriter(s.document);for(const{item:a}of n.createRangeIn(s))if(a.is("element")){for(const l of a.getClassNames())/\bmso/gi.exec(l)&&n.removeClass(l,a);for(const l of a.getStyleNames())/\bmso/gi.exec(l)&&n.removeStyle(l,a);(a.is("element","w:sdt")||a.is("element","w:sdtpr")&&a.isEmpty||a.is("element","o:p")&&a.isEmpty)&&o.push(a)}for(const a of o){const l=a.parent,c=l.getChildIndex(a);n.insertChild(c,a.getChildren(),l),n.remove(a)}}const msWordMatch1=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,msWordMatch2=/xmlns:o="urn:schemas-microsoft-com/i;class MSWordNormalizer{constructor(o,n=!1){E(this,"document");E(this,"hasMultiLevelListPlugin");this.document=o,this.hasMultiLevelListPlugin=n}isActive(o){return msWordMatch1.test(o)||msWordMatch2.test(o)}execute(o){const n=new UpcastWriter(this.document),{body:a,stylesString:l}=o._parsedData;transformBookmarks(a,n),transformListItemLikeElementsIntoLists(a,l,this.hasMultiLevelListPlugin),replaceImagesSourceWithBase64(a,o.dataTransfer.getData("text/rtf")),removeMSAttributes(a),o.content=a}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeBoldWrapper(s,o){for(const n of s.getChildren())if(n.is("element","b")&&n.getStyle("font-weight")==="normal"){const a=s.getChildIndex(n);o.remove(n),o.insertChild(a,n.getChildren(),s)}}function transformBlockBrsToParagraphs(s,o){const n=new Document$1(o.document.stylesProcessor),a=new DomConverter(n,{renderingMode:"data"}),l=a.blockElements,c=a.inlineObjectElements,u=[];for(const d of o.createRangeIn(s)){const h=d.item;if(h.is("element","br")){const f=findSibling(h,"forward",o,{blockElements:l,inlineObjectElements:c}),g=findSibling(h,"backward",o,{blockElements:l,inlineObjectElements:c}),p=isBlockViewElement(f,l);(isBlockViewElement(g,l)||p)&&u.push(h)}}for(const d of u)d.hasClass("Apple-interchange-newline")?o.remove(d):o.replace(d,o.createElement("p"))}function findSibling(s,o,n,{blockElements:a,inlineObjectElements:l}){let c=n.createPositionAt(s,o=="forward"?"after":"before");return c=c.getLastMatchingPosition(({item:u})=>u.is("element")&&!a.includes(u.name)&&!l.includes(u.name),{direction:o}),o=="forward"?c.nodeAfter:c.nodeBefore}function isBlockViewElement(s,o){return!!s&&s.is("element")&&o.includes(s.name)}const googleDocsMatch=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class GoogleDocsNormalizer{constructor(o){E(this,"document");this.document=o}isActive(o){return googleDocsMatch.test(o)}execute(o){const n=new UpcastWriter(this.document),{body:a}=o._parsedData;removeBoldWrapper(a,n),unwrapParagraphInListItem(a,n),transformBlockBrsToParagraphs(a,n),o.content=a}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeXmlns(s,o){for(const n of s.getChildren())n.is("element","table")&&n.hasAttribute("xmlns")&&o.removeAttribute("xmlns",n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeGoogleSheetsTag(s,o){for(const n of s.getChildren())if(n.is("element","google-sheets-html-origin")){const a=s.getChildIndex(n);o.remove(n),o.insertChild(a,n.getChildren(),s)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeInvalidTableWidth(s,o){for(const n of s.getChildren())n.is("element","table")&&n.getStyle("width")==="0px"&&o.removeStyle("width",n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeStyleBlock(s,o){for(const n of Array.from(s.getChildren()))n.is("element","style")&&o.remove(n)}const googleSheetsMatch=/<google-sheets-html-origin/i;class GoogleSheetsNormalizer{constructor(o){E(this,"document");this.document=o}isActive(o){return googleSheetsMatch.test(o)}execute(o){const n=new UpcastWriter(this.document),{body:a}=o._parsedData;removeGoogleSheetsTag(a,n),removeXmlns(a,n),removeInvalidTableWidth(a,n),removeStyleBlock(a,n),o.content=a}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeSpacing(s){return normalizeSafariSpaceSpans(normalizeSafariSpaceSpans(s)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function normalizeSpacerunSpans(s){s.querySelectorAll("span[style*=spacerun]").forEach(o=>{const n=o,a=n.innerText.length||0;n.innerText=Array(a+1).join("  ").substr(0,a)})}function normalizeSafariSpaceSpans(s){return s.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(o,n)=>n.length===1?" ":Array(n.length+1).join("  ").substr(0,n.length))}function parseHtml(s,o){const n=new DOMParser;s=s.replace(/<!--\[if gte vml 1]>/g,""),s=s.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const a=normalizeSpacing(cleanContentAfterBody(s)),l=n.parseFromString(a,"text/html");normalizeSpacerunSpans(l);const c=l.body.innerHTML,u=documentToView(l,o),d=extractStyles(l);return{body:u,bodyString:c,styles:d.styles,stylesString:d.stylesString}}function documentToView(s,o){const n=new Document$1(o),a=new DomConverter(n,{renderingMode:"data"}),l=s.createDocumentFragment(),c=s.body.childNodes;for(;c.length>0;)l.appendChild(c[0]);return a.domToView(l,{skipComments:!0})}function extractStyles(s){const o=[],n=[],a=Array.from(s.getElementsByTagName("style"));for(const l of a)l.sheet&&l.sheet.cssRules&&l.sheet.cssRules.length&&(o.push(l.sheet),n.push(l.innerHTML));return{styles:o,stylesString:n.join(" ")}}function cleanContentAfterBody(s){const o="</body>",n="</html>",a=s.indexOf(o);if(a<0)return s;const l=s.indexOf(n,a+o.length);return s.substring(0,a+o.length)+(l>=0?s.substring(l):"")}class PasteFromOffice extends Plugin{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const o=this.editor,n=o.plugins.get("ClipboardPipeline"),a=o.editing.view.document,l=[],c=this.editor.plugins.has("MultiLevelList");l.push(new MSWordNormalizer(a,c)),l.push(new GoogleDocsNormalizer(a)),l.push(new GoogleSheetsNormalizer(a)),n.on("inputTransformation",(u,d)=>{if(d._isTransformedWithPasteFromOffice||o.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const f=d.dataTransfer.getData("text/html"),g=l.find(p=>p.isActive(f));g&&(d._parsedData||(d._parsedData=parseHtml(f,a.stylesProcessor)),g.execute(d),d._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var removeFormatIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';const REMOVE_FORMAT="removeFormat";class RemoveFormatUI extends Plugin{static get pluginName(){return"RemoveFormatUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add(REMOVE_FORMAT,()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),o.ui.componentFactory.add(`menuBar:${REMOVE_FORMAT}`,()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get(REMOVE_FORMAT),c=new o(n.locale),u=a.t;return c.set({label:u("Remove Format"),icon:removeFormatIcon}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute(REMOVE_FORMAT),n.editing.view.focus()}),c}}class RemoveFormatCommand extends Command{refresh(){const o=this.editor.model;this.isEnabled=!!first(this._getFormattingItems(o.document.selection,o.schema))}execute(){const o=this.editor.model,n=o.schema;o.change(a=>{for(const l of this._getFormattingItems(o.document.selection,n))if(l.is("selection"))for(const c of this._getFormattingAttributes(l,n))a.removeSelectionAttribute(c);else{const c=a.createRangeOn(l);for(const u of this._getFormattingAttributes(l,n))a.removeAttribute(u,c)}})}*_getFormattingItems(o,n){const a=l=>!!first(this._getFormattingAttributes(l,n));for(const l of o.getRanges())for(const c of l.getItems())!n.isBlock(c)&&a(c)&&(yield c);for(const l of o.getSelectedBlocks())a(l)&&(yield l);a(o)&&(yield o)}*_getFormattingAttributes(o,n){for(const[a]of o.getAttributes()){const l=n.getAttributeProperties(a);l&&l.isFormatting&&(yield a)}}}class RemoveFormatEditing extends Plugin{static get pluginName(){return"RemoveFormatEditing"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.commands.add("removeFormat",new RemoveFormatCommand(o))}}class RemoveFormat extends Plugin{static get requires(){return[RemoveFormatEditing,RemoveFormatUI]}static get pluginName(){return"RemoveFormat"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ShowBlocksCommand extends Command{constructor(o){super(o),this.affectsData=!1,this.value=!1}execute(){const o="ck-show-blocks",n=this.editor.editing.view;n.change(a=>{for(const l of n.document.roots)l.hasClass(o)?(a.removeClass(o,l),this.value=!1):(a.addClass(o,l),this.value=!0)})}}class ShowBlocksEditing extends Plugin{static get pluginName(){return"ShowBlocksEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:o}=this;o.commands.add("showBlocks",new ShowBlocksCommand(o))}}var showBlocksIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.395 9.196 2.545-.007V6.498a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v6.877a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598V6.505a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v2.691Z"/><path d="M15.094 13.417V6.462a.562.562 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.562.562 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562Z"/><path d="M0 15.417v1.5h1.5v-1.5H0Z"/><path d="M18.5 15.417v1.5H20v-1.5h-1.5Z"/><path d="M18.5 12.333v1.5H20v-1.5h-1.5Z"/><path d="M18.5 9.25v1.5H20v-1.5h-1.5Z"/><path d="M18.5 6.167v1.5H20v-1.5h-1.5Z"/><path d="M0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5H0Z"/><path d="M3.083 18.5V20h1.5v-1.5h-1.5Z"/><path d="M6.167 18.5V20h1.5v-1.5h-1.5Z"/><path d="M9.25 18.5V20h1.5v-1.5h-1.5Z"/><path d="M12.333 18.5V20h1.5v-1.5h-1.5Z"/><path d="M15.417 18.5V20h1.5v-1.5h-1.5Z"/><path d="M18.5 18.5V20h.5a1 1 0 0 0 1-1v-.5h-1.5Z"/><path clip-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0V1Z"/></svg>';class ShowBlocksUI extends Plugin{static get pluginName(){return"ShowBlocksUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor;o.ui.componentFactory.add("showBlocks",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0,icon:showBlocksIcon}),n}),o.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(o){const n=this.editor,a=n.locale,l=n.commands.get("showBlocks"),c=new o(a),u=a.t;return c.set({label:u("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),c.bind("isEnabled").to(l),c.bind("isOn").to(l,"value",l,"isEnabled",(d,h)=>d&&h),this.listenTo(c,"execute",()=>{n.execute("showBlocks"),n.editing.view.focus()}),c}}class ShowBlocks extends Plugin{static get pluginName(){return"ShowBlocks"}static get isOfficialPlugin(){return!0}static get requires(){return[ShowBlocksEditing,ShowBlocksUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function formatHtml(s){const o=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],n=o.map(u=>u.name).join("|"),a=s.replace(new RegExp(`</?(${n})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let l=0,c=!1;return a.filter(u=>u.length).map(u=>(c=isPreformattedBlockLine(u,c),isNonVoidOpeningTag(u,o)?indentLine(u,l++):isClosingTag(u,o)?indentLine(u,--l):c==="middle"||c==="last"?u:indentLine(u,l))).join(`
`)}function isNonVoidOpeningTag(s,o){return o.some(n=>!(n.isVoid||!new RegExp(`<${n.name}( .*?)?>`).test(s)))}function isClosingTag(s,o){return o.some(n=>new RegExp(`</${n.name}>`).test(s))}function indentLine(s,o,n="    "){return`${n.repeat(Math.max(0,o))}${s}`}function isPreformattedBlockLine(s,o){return new RegExp("<pre( .*?)?>").test(s)?"first":new RegExp("</pre>").test(s)?"last":o==="first"||o==="middle"?"middle":!1}const COMMAND_FORCE_DISABLE_ID="SourceEditingMode";class SourceEditing extends Plugin{constructor(n){super(n);E(this,"_elementReplacer");E(this,"_replacedRoots");E(this,"_dataFromRoots");this.set("isSourceEditingMode",!1),this._elementReplacer=new ElementReplacer,this._replacedRoots=new Map,this._dataFromRoots=new Map,n.config.define("sourceEditing.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){this._checkCompatibility();const n=this.editor,a=n.locale.t;n.ui.componentFactory.add("sourceEditing",()=>{const l=this._createButton(ButtonView);return l.set({label:a("Source"),icon:icons.source,tooltip:!0,class:"ck-source-editing-button"}),l}),n.ui.componentFactory.add("menuBar:sourceEditing",()=>{const l=this._createButton(MenuBarMenuListItemButtonView);return l.set({label:a("Show source"),role:"menuitemcheckbox"}),l}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(l,c,u)=>{u?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(l,c,u)=>this._handleReadOnlyMode(!u)),this.listenTo(n,"change:isReadOnly",(l,c,u)=>this._handleReadOnlyMode(u))),n.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const n=this.editor,a={};for(const[l,c]of this._replacedRoots){const u=this._dataFromRoots.get(l),d=c.dataset.value;u!==d&&(a[l]=d,this._dataFromRoots.set(l,d))}Object.keys(a).length&&n.data.set(a,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const n=this.editor,a=n.config.get("sourceEditing.allowCollaborationFeatures");if(!a&&n.plugins.has("RealTimeCollaborativeEditing"))throw new CKEditorError("source-editing-incompatible-with-real-time-collaboration",null);!a&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(c=>n.plugins.has(c))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),n.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const n=this.editor,a=n.editing.view,l=n.model;l.change(c=>{c.setSelection(null),c.removeSelectionAttribute(l.document.selection.getAttributeKeys())});for(const[c,u]of a.domRoots){const d=formatSource(n.data.get({rootName:c})),h=createElement$1(u.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),f=createElement$1(u.ownerDocument,"div",{class:"ck-source-editing-area","data-value":d},[h]);h.value=d,h.setSelectionRange(0,0),h.addEventListener("input",()=>{f.dataset.value=h.value,n.ui.update()}),a.change(g=>{const p=a.document.getRoot(c);g.addClass("ck-hidden",p)}),n.ui.setEditableElement("sourceEditing:"+c,h),this._replacedRoots.set(c,f),this._elementReplacer.replace(u,f),this._dataFromRoots.set(c,d)}this._focusSourceEditing()}_hideSourceEditing(){const a=this.editor.editing.view;this.updateEditorData(),a.change(l=>{for(const[c]of this._replacedRoots)l.removeClass("ck-hidden",a.document.getRoot(c))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),a.focus()}_focusSourceEditing(){const n=this.editor,[a]=this._replacedRoots.values(),l=a.querySelector("textarea");n.editing.view.document.isFocused=!1,l.focus()}_disableCommands(){const n=this.editor;for(const a of n.commands.commands())a.forceDisabled(COMMAND_FORCE_DISABLE_ID);n.plugins.has("CommentsArchiveUI")&&n.plugins.get("CommentsArchiveUI").forceDisabled(COMMAND_FORCE_DISABLE_ID)}_enableCommands(){const n=this.editor;for(const a of n.commands.commands())a.clearForceDisabled(COMMAND_FORCE_DISABLE_ID);n.plugins.has("CommentsArchiveUI")&&n.plugins.get("CommentsArchiveUI").clearForceDisabled(COMMAND_FORCE_DISABLE_ID)}_handleReadOnlyMode(n){if(this.isSourceEditingMode)for(const[,a]of this._replacedRoots)a.querySelector("textarea").readOnly=n}_isAllowedToHandleSourceEditingMode(){const a=this.editor.ui.view.editable;return a&&!a.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const n=this.editor.plugins.get("Dialog");n.isOpen&&n.hide()}}_createButton(n){const a=this.editor,l=new n(a.locale);return l.set({withText:!0,isToggleable:!0}),l.bind("isOn").to(this,"isSourceEditingMode"),l.bind("isEnabled").to(this,"isEnabled",a,"isReadOnly",a.plugins.get(PendingActions),"hasAny",(c,u,d)=>!(!c||u||d)),this.listenTo(l,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),l}}function formatSource(s){return isHtml(s)?formatHtml(s):s}function isHtml(s){return s.startsWith("<")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class CharacterGridView extends View$1{constructor(n){super(n);E(this,"tiles");E(this,"focusTracker");E(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>global$1.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(n,a){const l=new ButtonView(this.locale);return l.set({label:n,withText:!0,class:"ck-character-grid__tile"}),l.extendTemplate({attributes:{title:a},on:{mouseover:l.bindTemplate.to("mouseover"),focus:l.bindTemplate.to("focus")}}),l.on("mouseover",()=>{this.fire("tileHover",{name:a,character:n})}),l.on("focus",()=>{this.fire("tileFocus",{name:a,character:n})}),l.on("execute",()=>{this.fire("execute",{name:a,character:n})}),l}render(){super.render();for(const n of this.tiles)this.focusTracker.add(n.element);this.tiles.on("change",(n,{added:a,removed:l})=>{if(a.length>0)for(const c of a)this.focusTracker.add(c.element);if(l.length>0)for(const c of l)this.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class CharacterInfoView extends View$1{constructor(o){super(o);const n=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",characterToUnicodeString),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:n.to("name",a=>a||"​")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:n.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function characterToUnicodeString(s){return s===null?"":"U+"+("0000"+s.codePointAt(0).toString(16)).slice(-4)}class SpecialCharactersView extends View$1{constructor(n,a,l,c){super(n);E(this,"items");E(this,"focusTracker");E(this,"keystrokes");E(this,"_focusCycler");E(this,"categoriesView");E(this,"gridView");E(this,"infoView");this.categoriesView=a,this.gridView=l,this.infoView=c,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}var specialCharactersIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';class SpecialCharactersCategoriesView extends View$1{constructor(n,a){super(n);E(this,"_groupNames");E(this,"_dropdownView");this.set("currentGroupName",Array.from(a.entries())[0][0]),this._groupNames=a,this._dropdownView=new LabeledFieldView(n,createLabeledDropdown),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const n=new Collection;for(const[c,u]of this._groupNames){const d={type:"button",model:new Model$1({name:c,label:u,role:"menuitemradio",withText:!0})};d.model.bind("isOn").to(this,"currentGroupName",h=>h===c),n.add(d)}const a=this.locale.t,l=a("Category");this._dropdownView.set({label:l,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:l,ariaLabel:l,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",c=>this._groupNames.get(c)),this._dropdownView.fieldView.on("execute",({source:c})=>{this.currentGroupName=c.name}),addListToDropdown(this._dropdownView.fieldView,n,{ariaLabel:l,role:"menu"})}}const ALL_SPECIAL_CHARACTERS_GROUP="All";class SpecialCharacters extends Plugin{constructor(n){super(n);E(this,"_characters");E(this,"_groups");E(this,"_allSpecialCharactersGroupLabel");const a=n.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=a("All")}static get requires(){return[Typing,Dialog]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.ui.componentFactory.add("specialCharacters",()=>{const a=this._createDialogButton(ButtonView);return a.set({tooltip:!0}),a}),n.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(MenuBarMenuListItemButtonView))}addItems(n,a,l={label:n}){if(n===ALL_SPECIAL_CHARACTERS_GROUP)throw new CKEditorError("special-character-invalid-group-name",null);const c=this._getGroup(n,l.label);for(const u of a)c.items.add(u.title),this._characters.set(u.title,u.character)}getGroups(){const n=Array.from(this._groups.keys()),a=this.editor.config.get("specialCharacters.order")||[],l=a.find(c=>!n.includes(c));if(l)throw new CKEditorError("special-character-invalid-order-group-name",null,{invalidGroup:l});return new Set([...a,...n])}getCharactersForGroup(n){if(n===ALL_SPECIAL_CHARACTERS_GROUP)return new Set(this._characters.keys());const a=this._groups.get(n);if(a)return a.items}getCharacter(n){return this._characters.get(n)}_getGroup(n,a){return this._groups.has(n)||this._groups.set(n,{items:new Set,label:a}),this._groups.get(n)}_updateGrid(n,a){a.tiles.clear();const l=this.getCharactersForGroup(n);for(const c of l){const u=this.getCharacter(c);a.tiles.add(a.createTile(u,c))}}_createDropdownPanelContent(n){const a=Array.from(this.getGroups()).map(h=>[h,this._groups.get(h).label]),l=new Map([[ALL_SPECIAL_CHARACTERS_GROUP,this._allSpecialCharactersGroupLabel],...a]),c=new SpecialCharactersCategoriesView(n,l),u=new CharacterGridView(n),d=new CharacterInfoView(n);return u.on("tileHover",(h,f)=>{d.set(f)}),u.on("tileFocus",(h,f)=>{d.set(f)}),c.on("change:currentGroupName",(h,f,g)=>{this._updateGrid(g,u)}),this._updateGrid(c.currentGroupName,u),{categoriesView:c,gridView:u,infoView:d}}_createDialogButton(n){const a=this.editor,l=a.locale,c=new n(a.locale),u=a.commands.get("insertText"),d=l.t,h=this.editor.plugins.get("Dialog");return c.set({label:d("Special characters"),icon:specialCharactersIcon,isToggleable:!0}),c.bind("isOn").to(h,"id",f=>f==="specialCharacters"),c.bind("isEnabled").to(u,"isEnabled"),c.on("execute",()=>{if(h.id==="specialCharacters"){h.hide();return}this._showDialog()}),c}_showDialog(){const n=this.editor,a=n.plugins.get("Dialog"),l=n.locale,c=l.t,{categoriesView:u,gridView:d,infoView:h}=this._createDropdownPanelContent(l),f=new SpecialCharactersView(l,u,d,h);d.on("execute",(g,p)=>{n.execute("insertText",{text:p.character})}),a.show({id:"specialCharacters",title:c("Special characters"),className:"ck-special-characters",content:f,position:DialogViewPosition.EDITOR_TOP_SIDE})}}class SpecialCharactersArrows extends Plugin{static get pluginName(){return"SpecialCharactersArrows"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t;o.plugins.get("SpecialCharacters").addItems("Arrows",[{title:n("leftwards simple arrow"),character:"←"},{title:n("rightwards simple arrow"),character:"→"},{title:n("upwards simple arrow"),character:"↑"},{title:n("downwards simple arrow"),character:"↓"},{title:n("leftwards double arrow"),character:"⇐"},{title:n("rightwards double arrow"),character:"⇒"},{title:n("upwards double arrow"),character:"⇑"},{title:n("downwards double arrow"),character:"⇓"},{title:n("leftwards dashed arrow"),character:"⇠"},{title:n("rightwards dashed arrow"),character:"⇢"},{title:n("upwards dashed arrow"),character:"⇡"},{title:n("downwards dashed arrow"),character:"⇣"},{title:n("leftwards arrow to bar"),character:"⇤"},{title:n("rightwards arrow to bar"),character:"⇥"},{title:n("upwards arrow to bar"),character:"⤒"},{title:n("downwards arrow to bar"),character:"⤓"},{title:n("up down arrow with base"),character:"↨"},{title:n("back with leftwards arrow above"),character:"🔙"},{title:n("end with leftwards arrow above"),character:"🔚"},{title:n("on with exclamation mark with left right arrow above"),character:"🔛"},{title:n("soon with rightwards arrow above"),character:"🔜"},{title:n("top with upwards arrow above"),character:"🔝"}],{label:n("Arrows")})}}class SpecialCharactersText extends Plugin{static get pluginName(){return"SpecialCharactersText"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t;o.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:n("Single left-pointing angle quotation mark")},{character:"›",title:n("Single right-pointing angle quotation mark")},{character:"«",title:n("Left-pointing double angle quotation mark")},{character:"»",title:n("Right-pointing double angle quotation mark")},{character:"‘",title:n("Left single quotation mark")},{character:"’",title:n("Right single quotation mark")},{character:"“",title:n("Left double quotation mark")},{character:"”",title:n("Right double quotation mark")},{character:"‚",title:n("Single low-9 quotation mark")},{character:"„",title:n("Double low-9 quotation mark")},{character:"¡",title:n("Inverted exclamation mark")},{character:"¿",title:n("Inverted question mark")},{character:"‥",title:n("Two dot leader")},{character:"…",title:n("Horizontal ellipsis")},{character:"‡",title:n("Double dagger")},{character:"‰",title:n("Per mille sign")},{character:"‱",title:n("Per ten thousand sign")},{character:"‼",title:n("Double exclamation mark")},{character:"⁈",title:n("Question exclamation mark")},{character:"⁉",title:n("Exclamation question mark")},{character:"⁇",title:n("Double question mark")},{character:"©",title:n("Copyright sign")},{character:"®",title:n("Registered sign")},{character:"™",title:n("Trade mark sign")},{character:"§",title:n("Section sign")},{character:"¶",title:n("Paragraph sign")},{character:"⁋",title:n("Reversed paragraph sign")}],{label:n("Text")})}}class SpecialCharactersMathematical extends Plugin{static get pluginName(){return"SpecialCharactersMathematical"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t;o.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:n("Less-than sign")},{character:">",title:n("Greater-than sign")},{character:"≤",title:n("Less-than or equal to")},{character:"≥",title:n("Greater-than or equal to")},{character:"–",title:n("En dash")},{character:"—",title:n("Em dash")},{character:"¯",title:n("Macron")},{character:"‾",title:n("Overline")},{character:"°",title:n("Degree sign")},{character:"−",title:n("Minus sign")},{character:"±",title:n("Plus-minus sign")},{character:"÷",title:n("Division sign")},{character:"⁄",title:n("Fraction slash")},{character:"×",title:n("Multiplication sign")},{character:"ƒ",title:n("Latin small letter f with hook")},{character:"∫",title:n("Integral")},{character:"∑",title:n("N-ary summation")},{character:"∞",title:n("Infinity")},{character:"√",title:n("Square root")},{character:"∼",title:n("Tilde operator")},{character:"≅",title:n("Approximately equal to")},{character:"≈",title:n("Almost equal to")},{character:"≠",title:n("Not equal to")},{character:"≡",title:n("Identical to")},{character:"∈",title:n("Element of")},{character:"∉",title:n("Not an element of")},{character:"∋",title:n("Contains as member")},{character:"∏",title:n("N-ary product")},{character:"∧",title:n("Logical and")},{character:"∨",title:n("Logical or")},{character:"¬",title:n("Not sign")},{character:"∩",title:n("Intersection")},{character:"∪",title:n("Union")},{character:"∂",title:n("Partial differential")},{character:"∀",title:n("For all")},{character:"∃",title:n("There exists")},{character:"∅",title:n("Empty set")},{character:"∇",title:n("Nabla")},{character:"∗",title:n("Asterisk operator")},{character:"∝",title:n("Proportional to")},{character:"∠",title:n("Angle")},{character:"¼",title:n("Vulgar fraction one quarter")},{character:"½",title:n("Vulgar fraction one half")},{character:"¾",title:n("Vulgar fraction three quarters")}],{label:n("Mathematical")})}}class SpecialCharactersLatin extends Plugin{static get pluginName(){return"SpecialCharactersLatin"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t;o.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:n("Latin capital letter a with macron")},{character:"ā",title:n("Latin small letter a with macron")},{character:"Ă",title:n("Latin capital letter a with breve")},{character:"ă",title:n("Latin small letter a with breve")},{character:"Ą",title:n("Latin capital letter a with ogonek")},{character:"ą",title:n("Latin small letter a with ogonek")},{character:"Ć",title:n("Latin capital letter c with acute")},{character:"ć",title:n("Latin small letter c with acute")},{character:"Ĉ",title:n("Latin capital letter c with circumflex")},{character:"ĉ",title:n("Latin small letter c with circumflex")},{character:"Ċ",title:n("Latin capital letter c with dot above")},{character:"ċ",title:n("Latin small letter c with dot above")},{character:"Č",title:n("Latin capital letter c with caron")},{character:"č",title:n("Latin small letter c with caron")},{character:"Ď",title:n("Latin capital letter d with caron")},{character:"ď",title:n("Latin small letter d with caron")},{character:"Đ",title:n("Latin capital letter d with stroke")},{character:"đ",title:n("Latin small letter d with stroke")},{character:"Ē",title:n("Latin capital letter e with macron")},{character:"ē",title:n("Latin small letter e with macron")},{character:"Ĕ",title:n("Latin capital letter e with breve")},{character:"ĕ",title:n("Latin small letter e with breve")},{character:"Ė",title:n("Latin capital letter e with dot above")},{character:"ė",title:n("Latin small letter e with dot above")},{character:"Ę",title:n("Latin capital letter e with ogonek")},{character:"ę",title:n("Latin small letter e with ogonek")},{character:"Ě",title:n("Latin capital letter e with caron")},{character:"ě",title:n("Latin small letter e with caron")},{character:"Ĝ",title:n("Latin capital letter g with circumflex")},{character:"ĝ",title:n("Latin small letter g with circumflex")},{character:"Ğ",title:n("Latin capital letter g with breve")},{character:"ğ",title:n("Latin small letter g with breve")},{character:"Ġ",title:n("Latin capital letter g with dot above")},{character:"ġ",title:n("Latin small letter g with dot above")},{character:"Ģ",title:n("Latin capital letter g with cedilla")},{character:"ģ",title:n("Latin small letter g with cedilla")},{character:"Ĥ",title:n("Latin capital letter h with circumflex")},{character:"ĥ",title:n("Latin small letter h with circumflex")},{character:"Ħ",title:n("Latin capital letter h with stroke")},{character:"ħ",title:n("Latin small letter h with stroke")},{character:"Ĩ",title:n("Latin capital letter i with tilde")},{character:"ĩ",title:n("Latin small letter i with tilde")},{character:"Ī",title:n("Latin capital letter i with macron")},{character:"ī",title:n("Latin small letter i with macron")},{character:"Ĭ",title:n("Latin capital letter i with breve")},{character:"ĭ",title:n("Latin small letter i with breve")},{character:"Į",title:n("Latin capital letter i with ogonek")},{character:"į",title:n("Latin small letter i with ogonek")},{character:"İ",title:n("Latin capital letter i with dot above")},{character:"ı",title:n("Latin small letter dotless i")},{character:"Ĳ",title:n("Latin capital ligature ij")},{character:"ĳ",title:n("Latin small ligature ij")},{character:"Ĵ",title:n("Latin capital letter j with circumflex")},{character:"ĵ",title:n("Latin small letter j with circumflex")},{character:"Ķ",title:n("Latin capital letter k with cedilla")},{character:"ķ",title:n("Latin small letter k with cedilla")},{character:"ĸ",title:n("Latin small letter kra")},{character:"Ĺ",title:n("Latin capital letter l with acute")},{character:"ĺ",title:n("Latin small letter l with acute")},{character:"Ļ",title:n("Latin capital letter l with cedilla")},{character:"ļ",title:n("Latin small letter l with cedilla")},{character:"Ľ",title:n("Latin capital letter l with caron")},{character:"ľ",title:n("Latin small letter l with caron")},{character:"Ŀ",title:n("Latin capital letter l with middle dot")},{character:"ŀ",title:n("Latin small letter l with middle dot")},{character:"Ł",title:n("Latin capital letter l with stroke")},{character:"ł",title:n("Latin small letter l with stroke")},{character:"Ń",title:n("Latin capital letter n with acute")},{character:"ń",title:n("Latin small letter n with acute")},{character:"Ņ",title:n("Latin capital letter n with cedilla")},{character:"ņ",title:n("Latin small letter n with cedilla")},{character:"Ň",title:n("Latin capital letter n with caron")},{character:"ň",title:n("Latin small letter n with caron")},{character:"ŉ",title:n("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:n("Latin capital letter eng")},{character:"ŋ",title:n("Latin small letter eng")},{character:"Ō",title:n("Latin capital letter o with macron")},{character:"ō",title:n("Latin small letter o with macron")},{character:"Ŏ",title:n("Latin capital letter o with breve")},{character:"ŏ",title:n("Latin small letter o with breve")},{character:"Ő",title:n("Latin capital letter o with double acute")},{character:"ő",title:n("Latin small letter o with double acute")},{character:"Œ",title:n("Latin capital ligature oe")},{character:"œ",title:n("Latin small ligature oe")},{character:"Ŕ",title:n("Latin capital letter r with acute")},{character:"ŕ",title:n("Latin small letter r with acute")},{character:"Ŗ",title:n("Latin capital letter r with cedilla")},{character:"ŗ",title:n("Latin small letter r with cedilla")},{character:"Ř",title:n("Latin capital letter r with caron")},{character:"ř",title:n("Latin small letter r with caron")},{character:"Ś",title:n("Latin capital letter s with acute")},{character:"ś",title:n("Latin small letter s with acute")},{character:"Ŝ",title:n("Latin capital letter s with circumflex")},{character:"ŝ",title:n("Latin small letter s with circumflex")},{character:"Ş",title:n("Latin capital letter s with cedilla")},{character:"ş",title:n("Latin small letter s with cedilla")},{character:"Š",title:n("Latin capital letter s with caron")},{character:"š",title:n("Latin small letter s with caron")},{character:"Ţ",title:n("Latin capital letter t with cedilla")},{character:"ţ",title:n("Latin small letter t with cedilla")},{character:"Ť",title:n("Latin capital letter t with caron")},{character:"ť",title:n("Latin small letter t with caron")},{character:"Ŧ",title:n("Latin capital letter t with stroke")},{character:"ŧ",title:n("Latin small letter t with stroke")},{character:"Ũ",title:n("Latin capital letter u with tilde")},{character:"ũ",title:n("Latin small letter u with tilde")},{character:"Ū",title:n("Latin capital letter u with macron")},{character:"ū",title:n("Latin small letter u with macron")},{character:"Ŭ",title:n("Latin capital letter u with breve")},{character:"ŭ",title:n("Latin small letter u with breve")},{character:"Ů",title:n("Latin capital letter u with ring above")},{character:"ů",title:n("Latin small letter u with ring above")},{character:"Ű",title:n("Latin capital letter u with double acute")},{character:"ű",title:n("Latin small letter u with double acute")},{character:"Ų",title:n("Latin capital letter u with ogonek")},{character:"ų",title:n("Latin small letter u with ogonek")},{character:"Ŵ",title:n("Latin capital letter w with circumflex")},{character:"ŵ",title:n("Latin small letter w with circumflex")},{character:"Ŷ",title:n("Latin capital letter y with circumflex")},{character:"ŷ",title:n("Latin small letter y with circumflex")},{character:"Ÿ",title:n("Latin capital letter y with diaeresis")},{character:"Ź",title:n("Latin capital letter z with acute")},{character:"ź",title:n("Latin small letter z with acute")},{character:"Ż",title:n("Latin capital letter z with dot above")},{character:"ż",title:n("Latin small letter z with dot above")},{character:"Ž",title:n("Latin capital letter z with caron")},{character:"ž",title:n("Latin small letter z with caron")},{character:"ſ",title:n("Latin small letter long s")}],{label:n("Latin")})}}class SpecialCharactersCurrency extends Plugin{static get pluginName(){return"SpecialCharactersCurrency"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.t;o.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:n("Dollar sign")},{character:"€",title:n("Euro sign")},{character:"¥",title:n("Yen sign")},{character:"£",title:n("Pound sign")},{character:"¢",title:n("Cent sign")},{character:"₠",title:n("Euro-currency sign")},{character:"₡",title:n("Colon sign")},{character:"₢",title:n("Cruzeiro sign")},{character:"₣",title:n("French franc sign")},{character:"₤",title:n("Lira sign")},{character:"¤",title:n("Currency sign")},{character:"₿",title:n("Bitcoin sign")},{character:"₥",title:n("Mill sign")},{character:"₦",title:n("Naira sign")},{character:"₧",title:n("Peseta sign")},{character:"₨",title:n("Rupee sign")},{character:"₩",title:n("Won sign")},{character:"₪",title:n("New sheqel sign")},{character:"₫",title:n("Dong sign")},{character:"₭",title:n("Kip sign")},{character:"₮",title:n("Tugrik sign")},{character:"₯",title:n("Drachma sign")},{character:"₰",title:n("German penny sign")},{character:"₱",title:n("Peso sign")},{character:"₲",title:n("Guarani sign")},{character:"₳",title:n("Austral sign")},{character:"₴",title:n("Hryvnia sign")},{character:"₵",title:n("Cedi sign")},{character:"₶",title:n("Livre tournois sign")},{character:"₷",title:n("Spesmilo sign")},{character:"₸",title:n("Tenge sign")},{character:"₹",title:n("Indian rupee sign")},{character:"₺",title:n("Turkish lira sign")},{character:"₻",title:n("Nordic mark sign")},{character:"₼",title:n("Manat sign")},{character:"₽",title:n("Ruble sign")}],{label:n("Currency")})}}class SpecialCharactersEssentials extends Plugin{static get pluginName(){return"SpecialCharactersEssentials"}static get isOfficialPlugin(){return!0}static get requires(){return[SpecialCharactersCurrency,SpecialCharactersText,SpecialCharactersMathematical,SpecialCharactersArrows,SpecialCharactersLatin]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class StyleGridButtonView extends ButtonView{constructor(n,a){super(n);E(this,"styleDefinition");E(this,"previewView");this.styleDefinition=a,this.previewView=this._createPreview(),this.set({label:a.name,class:"ck-style-grid__button",withText:!0}),this.extendTemplate({attributes:{role:"option"}}),this.children.add(this.previewView,0)}_createPreview(){const n=new View$1(this.locale);return n.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-style-grid__button__preview","ck-content"],"aria-hidden":"true"},children:[this.styleDefinition.previewTemplate]}),n}}class StyleGridView extends View$1{constructor(n,a){super(n);E(this,"focusTracker");E(this,"keystrokes");E(this,"children");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("activeStyles",[]),this.set("enabledStyles",[]),this.children=this.createCollection(),this.children.delegate("execute").to(this);for(const l of a){const c=new StyleGridButtonView(n,l);this.children.add(c)}this.on("change:activeStyles",()=>{for(const l of this.children)l.isOn=this.activeStyles.includes(l.styleDefinition.name)}),this.on("change:enabledStyles",()=>{for(const l of this.children)l.isEnabled=this.enabledStyles.includes(l.styleDefinition.name)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-grid"],role:"listbox"},children:this.children})}render(){super.render();for(const n of this.children)this.focusTracker.add(n.element);addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.children,numberOfColumns:3,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection}),this.keystrokes.listenTo(this.element)}focus(){this.children.first.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}class StyleGroupView extends View$1{constructor(n,a,l){super(n);E(this,"gridView");E(this,"labelView");this.labelView=new LabelView(n),this.labelView.text=a,this.gridView=new StyleGridView(n,l),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel__style-group"],role:"group","aria-labelledby":this.labelView.id},children:[this.labelView,this.gridView]})}}class StylePanelView extends View$1{constructor(n,a){super(n);E(this,"focusTracker");E(this,"keystrokes");E(this,"children");E(this,"blockStylesGroupView");E(this,"inlineStylesGroupView");E(this,"_focusables");E(this,"_focusCycler");const l=n.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.blockStylesGroupView=new StyleGroupView(n,l("Block styles"),a.block),this.inlineStylesGroupView=new StyleGroupView(n,l("Text styles"),a.inline),this.set("activeStyles",[]),this.set("enabledStyles",[]),this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["shift + tab"],focusNext:["tab"]}}),a.block.length&&this.children.add(this.blockStylesGroupView),a.inline.length&&this.children.add(this.inlineStylesGroupView),this.blockStylesGroupView.gridView.delegate("execute").to(this),this.inlineStylesGroupView.gridView.delegate("execute").to(this),this.blockStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.inlineStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel"]},children:this.children})}render(){super.render(),this._focusables.add(this.blockStylesGroupView.gridView),this._focusables.add(this.inlineStylesGroupView.gridView),this.focusTracker.add(this.blockStylesGroupView.gridView.element),this.focusTracker.add(this.inlineStylesGroupView.gridView.element),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}const NON_PREVIEWABLE_ELEMENT_NAMES=["caption","colgroup","dd","dt","figcaption","legend","li","optgroup","option","rp","rt","summary","tbody","td","tfoot","th","thead","tr"];class StyleUtils extends Plugin{constructor(n){super(n);E(this,"_htmlSupport");this.decorate("isStyleEnabledForBlock"),this.decorate("isStyleActiveForBlock"),this.decorate("getAffectedBlocks"),this.decorate("isStyleEnabledForInlineSelection"),this.decorate("isStyleActiveForInlineSelection"),this.decorate("getAffectedInlineSelectable"),this.decorate("getStylePreview"),this.decorate("configureGHSDataFilter")}static get pluginName(){return"StyleUtils"}static get isOfficialPlugin(){return!0}init(){this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport")}normalizeConfig(n,a=[]){const l={block:[],inline:[]};for(const c of a){const u=[],d=[];for(const f of n.getDefinitionsForView(c.element)){const g="appliesToBlock"in f?f.appliesToBlock:!1;if(f.isBlock||g){if(typeof g=="string")u.push(g);else if(f.isBlock){const p=f;u.push(f.model),p.paragraphLikeModel&&u.push(p.paragraphLikeModel)}}else d.push(f.model)}const h=this.getStylePreview(c,[{text:"AaBbCcDdEeFfGgHhIiJj"}]);u.length?l.block.push({...c,previewTemplate:h,modelElements:u,isBlock:!0}):l.inline.push({...c,previewTemplate:h,ghsAttributes:d})}return l}isStyleEnabledForBlock(n,a){const l=this.editor.model,c=this._htmlSupport.getGhsAttributeNameForElement(n.element);return l.schema.checkAttribute(a,c)?n.modelElements.includes(a.name):!1}isStyleActiveForBlock(n,a){const l=this._htmlSupport.getGhsAttributeNameForElement(n.element),c=a.getAttribute(l);return this.hasAllClasses(c,n.classes)}getAffectedBlocks(n,a){return n.modelElements.includes(a.name)?[a]:null}isStyleEnabledForInlineSelection(n,a){const l=this.editor.model;for(const c of n.ghsAttributes)if(l.schema.checkAttributeInSelection(a,c))return!0;return!1}isStyleActiveForInlineSelection(n,a){for(const l of n.ghsAttributes){const c=this._getValueFromFirstAllowedNode(a,l);if(this.hasAllClasses(c,n.classes))return!0}return!1}getAffectedInlineSelectable(n,a){return a}getStylePreview(n,a){const{element:l,classes:c}=n;return{tag:isPreviewable(l)?l:"div",attributes:{class:c},children:a}}hasAllClasses(n,a){return isObject$6(n)&&hasClassesProperty(n)&&a.every(l=>n.classes.includes(l))}configureGHSDataFilter({block:n,inline:a}){const l=this.editor.plugins.get("DataFilter");l.loadAllowedConfig(n.map(normalizedStyleDefinitionToMatcherPattern)),l.loadAllowedConfig(a.map(normalizedStyleDefinitionToMatcherPattern))}_getValueFromFirstAllowedNode(n,a){const c=this.editor.model.schema;if(n.isCollapsed)return n.getAttribute(a);for(const u of n.getRanges())for(const d of u.getItems())if(c.checkAttribute(d,a))return d.getAttribute(a);return null}}function hasClassesProperty(s){return!!s.classes&&Array.isArray(s.classes)}function isPreviewable(s){return!NON_PREVIEWABLE_ELEMENT_NAMES.includes(s)}function normalizedStyleDefinitionToMatcherPattern({element:s,classes:o}){return{name:s,classes:o}}class StyleUI extends Plugin{static get pluginName(){return"StyleUI"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils]}init(){const o=this.editor,n=o.plugins.get("DataSchema"),a=o.plugins.get("StyleUtils"),l=o.config.get("style.definitions"),c=a.normalizeConfig(n,l);o.ui.componentFactory.add("style",u=>{const d=u.t,h=createDropdown(u),f=o.commands.get("style");return h.once("change:isOpen",()=>{const g=new StylePanelView(u,c);h.panelView.children.add(g),g.delegate("execute").to(h),g.bind("activeStyles").to(f,"value"),g.bind("enabledStyles").to(f,"enabledStyles")}),h.bind("isEnabled").to(f),h.buttonView.withText=!0,h.buttonView.bind("label").to(f,"value",g=>g.length>1?d("Multiple styles"):g.length===1?g[0]:d("Styles")),h.bind("class").to(f,"value",g=>{const p=["ck-style-dropdown"];return g.length>1&&p.push("ck-style-dropdown_multiple-active"),p.join(" ")}),h.on("execute",g=>{o.execute("style",{styleName:g.source.styleDefinition.name}),o.editing.view.focus()}),h})}}class StyleCommand extends Command{constructor(n,a){super(n);E(this,"_styleDefinitions");E(this,"_styleUtils");this.set("value",[]),this.set("enabledStyles",[]),this._styleDefinitions=a,this._styleUtils=this.editor.plugins.get(StyleUtils)}refresh(){const n=this.editor.model,a=n.document.selection,l=new Set,c=new Set;for(const d of this._styleDefinitions.inline)this._styleUtils.isStyleEnabledForInlineSelection(d,a)&&c.add(d.name),this._styleUtils.isStyleActiveForInlineSelection(d,a)&&l.add(d.name);const u=first(a.getSelectedBlocks())||a.getFirstPosition().parent;if(u){const d=u.getAncestors({includeSelf:!0,parentFirst:!0});for(const h of d){if(h.is("rootElement"))break;for(const f of this._styleDefinitions.block)this._styleUtils.isStyleEnabledForBlock(f,h)&&(c.add(f.name),this._styleUtils.isStyleActiveForBlock(f,h)&&l.add(f.name));if(n.schema.isObject(h))break}}this.enabledStyles=Array.from(c).sort(),this.isEnabled=this.enabledStyles.length>0,this.value=this.isEnabled?Array.from(l).sort():[]}execute({styleName:n,forceValue:a}){if(!this.enabledStyles.includes(n)){logWarning("style-command-executed-with-incorrect-style-name");return}const l=this.editor.model,c=l.document.selection,u=this.editor.plugins.get("GeneralHtmlSupport"),d=[...this._styleDefinitions.inline,...this._styleDefinitions.block],h=d.filter(({name:p})=>this.value.includes(p)),f=d.find(({name:p})=>p==n),g=a===void 0?!this.value.includes(f.name):a;l.change(()=>{let p;isBlockStyleDefinition(f)?p=this._findAffectedBlocks(getBlocksFromSelection(c),f):p=[this._styleUtils.getAffectedInlineSelectable(f,c)];for(const v of p)g?u.addModelHtmlClass(f.element,f.classes,v):u.removeModelHtmlClass(f.element,getDefinitionExclusiveClasses(h,f),v)})}_findAffectedBlocks(n,a){const l=new Set;for(const c of n){const u=c.getAncestors({includeSelf:!0,parentFirst:!0});for(const d of u){if(d.is("rootElement"))break;const h=this._styleUtils.getAffectedBlocks(a,d);if(h){for(const f of h)l.add(f);break}}}return l}}function getDefinitionExclusiveClasses(s,o){return s.reduce((n,a)=>a.name===o.name?n:n.filter(l=>!a.classes.includes(l)),o.classes)}function isBlockStyleDefinition(s){return"isBlock"in s}function getBlocksFromSelection(s){const o=Array.from(s.getSelectedBlocks());return o.length?o:[s.getFirstPosition().parent]}class ListStyleSupport extends Plugin{constructor(){super(...arguments);E(this,"_listUtils");E(this,"_styleUtils");E(this,"_htmlSupport")}static get pluginName(){return"ListStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils,"GeneralHtmlSupport"]}init(){const n=this.editor;n.plugins.has("ListEditing")&&(this._styleUtils=n.plugins.get(StyleUtils),this._listUtils=this.editor.plugins.get("ListUtils"),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(a,[l,c])=>{this._isStyleEnabledForBlock(l,c)&&(a.return=!0,a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForBlock",(a,[l,c])=>{this._isStyleActiveForBlock(l,c)&&(a.return=!0,a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(a,[l,c])=>{const u=this._getAffectedBlocks(l,c);u&&(a.return=u,a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getStylePreview",(a,[l,c])=>{const u=this._getStylePreview(l,c);u&&(a.return=u,a.stop())},{priority:"high"}))}_isStyleEnabledForBlock(n,a){const l=this.editor.model;if(!["ol","ul","li"].includes(n.element)||!this._listUtils.isListItemBlock(a))return!1;const c=this._htmlSupport.getGhsAttributeNameForElement(n.element);if(n.element=="ol"||n.element=="ul"){if(!l.schema.checkAttribute(a,c))return!1;const d=this._listUtils.isNumberedListType(a.getAttribute("listType"))?"ol":"ul";return n.element==d}else return l.schema.checkAttribute(a,c)}_isStyleActiveForBlock(n,a){const l=this._htmlSupport.getGhsAttributeNameForElement(n.element),c=a.getAttribute(l);return this._styleUtils.hasAllClasses(c,n.classes)}_getAffectedBlocks(n,a){return this._isStyleEnabledForBlock(n,a)?n.element=="li"?this._listUtils.expandListBlocksToCompleteItems(a,{withNested:!1}):this._listUtils.expandListBlocksToCompleteList(a):null}_getStylePreview(n,a){const{element:l,classes:c}=n;return l=="ol"||l=="ul"?{tag:l,attributes:{class:c},children:[{tag:"li",children:a}]}:l=="li"?{tag:"ol",children:[{tag:l,attributes:{class:c},children:a}]}:null}}class TableStyleSupport extends Plugin{constructor(){super(...arguments);E(this,"_tableUtils");E(this,"_styleUtils")}static get pluginName(){return"TableStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils]}init(){const n=this.editor;n.plugins.has("TableEditing")&&(this._styleUtils=n.plugins.get(StyleUtils),this._tableUtils=this.editor.plugins.get("TableUtils"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(a,[l,c])=>{this._isApplicable(l,c)&&(a.return=this._isStyleEnabledForBlock(l,c),a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(a,[l,c])=>{this._isApplicable(l,c)&&(a.return=this._getAffectedBlocks(l,c),a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"configureGHSDataFilter",(a,[{block:l}])=>{this.editor.plugins.get("DataFilter").loadAllowedConfig(l.filter(u=>u.element=="figcaption").map(u=>({name:"caption",classes:u.classes})))}))}_isApplicable(n,a){return["td","th"].includes(n.element)?a.name=="tableCell":["thead","tbody"].includes(n.element)?a.name=="table":!1}_isStyleEnabledForBlock(n,a){if(["td","th"].includes(n.element)){const l=this._tableUtils.getCellLocation(a),u=a.parent.parent,d=u.getAttribute("headingRows")||0,h=u.getAttribute("headingColumns")||0,f=l.row<d||l.column<h;return n.element=="th"?f:!f}if(["thead","tbody"].includes(n.element)){const l=a.getAttribute("headingRows")||0;return n.element=="thead"?l>0:l<this._tableUtils.getRows(a)}/* istanbul ignore next -- @preserve */return!1}_getAffectedBlocks(n,a){return this._isStyleEnabledForBlock(n,a)?[a]:null}}class LinkStyleSupport extends Plugin{constructor(){super(...arguments);E(this,"_styleUtils");E(this,"_htmlSupport")}static get pluginName(){return"LinkStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils,"GeneralHtmlSupport"]}init(){const n=this.editor;n.plugins.has("LinkEditing")&&(this._styleUtils=n.plugins.get(StyleUtils),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForInlineSelection",(a,[l,c])=>{l.element=="a"&&(a.return=this._isStyleEnabled(l,c),a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForInlineSelection",(a,[l,c])=>{l.element=="a"&&(a.return=this._isStyleActive(l,c),a.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedInlineSelectable",(a,[l,c])=>{if(l.element!="a")return;const u=this._getAffectedSelectable(l,c);u&&(a.return=u,a.stop())},{priority:"high"}))}_isStyleEnabled(n,a){const l=this.editor.model;if(a.isCollapsed)return a.hasAttribute("linkHref");for(const c of a.getRanges())for(const u of c.getItems())if((u.is("$textProxy")||l.schema.isInline(u))&&u.hasAttribute("linkHref"))return!0;return!1}_isStyleActive(n,a){const l=this.editor.model,c=this._htmlSupport.getGhsAttributeNameForElement(n.element);if(a.isCollapsed){if(a.hasAttribute("linkHref")){const u=a.getAttribute(c);if(this._styleUtils.hasAllClasses(u,n.classes))return!0}return!1}for(const u of a.getRanges())for(const d of u.getItems())if((d.is("$textProxy")||l.schema.isInline(d))&&d.hasAttribute("linkHref")){const h=d.getAttribute(c);return this._styleUtils.hasAllClasses(h,n.classes)}return!1}_getAffectedSelectable(n,a){const l=this.editor.model;if(a.isCollapsed){const u=a.getAttribute("linkHref");return findAttributeRange(a.getFirstPosition(),"linkHref",u,l)}const c=[];for(const u of a.getRanges()){const d=l.createRange(expandAttributePosition(u.start,"linkHref",!0,l),expandAttributePosition(u.end,"linkHref",!1,l));for(const h of d.getItems())(h.is("$textProxy")||l.schema.isInline(h))&&h.hasAttribute("linkHref")&&c.push(this.editor.model.createRangeOn(h))}return normalizeRanges(c)}}function expandAttributePosition(s,o,n,a){const l=s.textNode||(n?s.nodeAfter:s.nodeBefore);if(!l||!l.hasAttribute(o))return s;const c=l.getAttribute(o);return findAttributeRangeBound(s,o,c,n,a)}function normalizeRanges(s){for(let o=1;o<s.length;o++){const n=s[o-1].getJoined(s[o]);n&&s.splice(--o,2,n)}return s}class StyleEditing extends Plugin{static get pluginName(){return"StyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return["GeneralHtmlSupport",StyleUtils,ListStyleSupport,TableStyleSupport,LinkStyleSupport]}init(){const o=this.editor,n=o.plugins.get("DataSchema"),a=o.plugins.get("StyleUtils"),l=o.config.get("style.definitions"),c=a.normalizeConfig(n,l);o.commands.add("style",new StyleCommand(o,c)),a.configureGHSDataFilter(c)}}class Style extends Plugin{static get pluginName(){return"Style"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleEditing,StyleUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function upcastStyleToAttribute(s,o){const{modelAttribute:n,styleName:a,viewElement:l,defaultValue:c,reduceBoxSides:u=!1,shouldUpcast:d=()=>!0}=o;s.for("upcast").attributeToAttribute({view:{name:l,styles:{[a]:/[\s\S]+/}},model:{key:n,value:h=>{if(!d(h))return;const f=h.getNormalizedStyle(a),g=u?reduceBoxSidesValue(f):f;if(c!==g)return g}}})}function upcastBorderStyles(s,o,n,a){s.for("upcast").add(l=>l.on("element:"+o,(c,u,d)=>{if(!u.modelRange)return;const h=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(b=>u.viewItem.hasStyle(b));if(!h.length)return;const f={styles:h};if(!d.consumable.test(u.viewItem,f))return;const g=[...u.modelRange.getItems({shallow:!0})].pop();d.consumable.consume(u.viewItem,f);const p={style:u.viewItem.getNormalizedStyle("border-style"),color:u.viewItem.getNormalizedStyle("border-color"),width:u.viewItem.getNormalizedStyle("border-width")},v={style:reduceBoxSidesValue(p.style),color:reduceBoxSidesValue(p.color),width:reduceBoxSidesValue(p.width)};v.style!==a.style&&d.writer.setAttribute(n.style,v.style,g),v.color!==a.color&&d.writer.setAttribute(n.color,v.color,g),v.width!==a.width&&d.writer.setAttribute(n.width,v.width,g)}))}function downcastAttributeToStyle(s,o){const{modelElement:n,modelAttribute:a,styleName:l}=o;s.for("downcast").attributeToAttribute({model:{name:n,key:a},view:c=>({key:"style",value:{[l]:c}})})}function downcastTableAttribute(s,o){const{modelAttribute:n,styleName:a}=o;s.for("downcast").add(l=>l.on(`attribute:${n}:table`,(c,u,d)=>{const{item:h,attributeNewValue:f}=u,{mapper:g,writer:p}=d;if(!d.consumable.consume(u.item,c.name))return;const v=[...g.toViewElement(h).getChildren()].find(b=>b.is("element","table"));f?p.setStyle(a,f,v):p.removeStyle(a,v)}))}function reduceBoxSidesValue(s){if(!s)return;const o=["top","right","bottom","left"];if(!o.every(c=>s[c]))return s;const a=s.top;return o.every(c=>s[c]===a)?a:s}function updateNumericAttribute(s,o,n,a,l=1){o!=null&&l!==void 0&&l!==null&&o>l?a.setAttribute(s,o,n):a.removeAttribute(s,n)}function createEmptyTableCell(s,o,n={}){const a=s.createElement("tableCell",n);return s.insertElement("paragraph",a),s.insert(a,o),a}function isHeadingColumnCell(s,o){const n=o.parent.parent,a=parseInt(n.getAttribute("headingColumns")||"0"),{column:l}=s.getCellLocation(o);return!!a&&l<a}function enableProperty$1(s,o,n){const{modelAttribute:a}=n;s.extend("tableCell",{allowAttributes:[a]}),upcastStyleToAttribute(o,{viewElement:/^(td|th)$/,...n}),downcastAttributeToStyle(o,{modelElement:"tableCell",...n})}function getSelectionAffectedTable(s){const o=s.getSelectedElement();return o&&o.is("element","table")?o:s.getFirstPosition().findAncestor("table")}function upcastTableFigure(){return s=>{s.on("element:figure",(o,n,a)=>{if(!a.consumable.test(n.viewItem,{name:!0,classes:"table"}))return;const l=getViewTableFromFigure(n.viewItem);if(!l||!a.consumable.test(l,{name:!0}))return;a.consumable.consume(n.viewItem,{name:!0,classes:"table"});const c=a.convertItem(l,n.modelCursor),u=first(c.modelRange.getItems());if(!u){a.consumable.revert(n.viewItem,{name:!0,classes:"table"});return}a.convertChildren(n.viewItem,a.writer.createPositionAt(u,"end")),a.updateConversionResult(u,n)})}}function upcastTable(){return s=>{s.on("element:table",(o,n,a)=>{const l=n.viewItem;if(!a.consumable.test(l,{name:!0}))return;const{rows:c,headingRows:u,headingColumns:d}=scanTable(l),h={};d&&(h.headingColumns=d),u&&(h.headingRows=u);const f=a.writer.createElement("table",h);if(a.safeInsert(f,n.modelCursor)){if(a.consumable.consume(l,{name:!0}),c.forEach(g=>a.convertItem(g,a.writer.createPositionAt(f,"end"))),a.convertChildren(l,a.writer.createPositionAt(f,"end")),f.isEmpty){const g=a.writer.createElement("tableRow");a.writer.insert(g,a.writer.createPositionAt(f,"end")),createEmptyTableCell(a.writer,a.writer.createPositionAt(g,"end"))}a.updateConversionResult(f,n)}})}}function skipEmptyTableRow(){return s=>{s.on("element:tr",(o,n)=>{n.viewItem.isEmpty&&n.modelCursor.index==0&&o.stop()},{priority:"high"})}}function ensureParagraphInTableCell(s){return o=>{o.on(`element:${s}`,(n,a,{writer:l})=>{if(!a.modelRange)return;const c=a.modelRange.start.nodeAfter,u=l.createPositionAt(c,0);if(a.viewItem.isEmpty){l.insertElement("paragraph",u);return}const d=Array.from(c.getChildren());if(d.every(h=>h.is("element","$marker"))){const h=l.createElement("paragraph");l.insert(h,l.createPositionAt(c,0));for(const f of d)l.move(l.createRangeOn(f),l.createPositionAt(h,"end"))}},{priority:"low"})}}function getViewTableFromFigure(s){for(const o of s.getChildren())if(o.is("element","table"))return o}function scanTable(s){let o=0,n;const a=[],l=[];let c;for(const u of Array.from(s.getChildren())){if(u.name!=="tbody"&&u.name!=="thead"&&u.name!=="tfoot")continue;u.name==="thead"&&!c&&(c=u);const d=Array.from(u.getChildren()).filter(f=>f.is("element","tr"));let h=null;for(const f of d){const g=Array.from(f.getChildren()).filter(p=>p.is("element","td")||p.is("element","th"));if(c&&u===c||u.name==="tbody"&&g.length>0&&(h===null||g.length===h)&&g.every(p=>p.is("element","th")))o++,a.push(f);else{l.push(f);const p=scanRowForHeadingColumns(f);(!n||p<n)&&(n=p)}h=Math.max(h||0,g.length)}}return{headingRows:o,headingColumns:n||0,rows:[...a,...l]}}function scanRowForHeadingColumns(s){let o=0,n=0;const a=Array.from(s.getChildren()).filter(l=>l.name==="th"||l.name==="td");for(;n<a.length&&a[n].name==="th";){const l=a[n],c=parseInt(l.getAttribute("colspan")||"1");o=o+c,n++}return o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TableWalker{constructor(o,n={}){E(this,"_table");E(this,"_startRow");E(this,"_endRow");E(this,"_startColumn");E(this,"_endColumn");E(this,"_includeAllSlots");E(this,"_skipRows");E(this,"_row");E(this,"_rowIndex");E(this,"_column");E(this,"_cellIndex");E(this,"_spannedCells");E(this,"_nextCellAtColumn");E(this,"_jumpedToStartRow",!1);this._table=o,this._startRow=n.row!==void 0?n.row:n.startRow||0,this._endRow=n.row!==void 0?n.row:n.endRow,this._startColumn=n.column!==void 0?n.column:n.startColumn||0,this._endColumn=n.column!==void 0?n.column:n.endColumn,this._includeAllSlots=!!n.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const o=this._table.getChild(this._rowIndex);if(!o||this._isOverEndRow())return{done:!0,value:void 0};if(!o.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let n=null;const a=this._getSpanned();if(a)this._includeAllSlots&&!this._shouldSkipSlot()&&(n=this._formatOutValue(a.cell,a.row,a.column));else{const l=o.getChild(this._cellIndex);if(!l)return this._advanceToNextRow();const c=parseInt(l.getAttribute("colspan")||"1"),u=parseInt(l.getAttribute("rowspan")||"1");(c>1||u>1)&&this._recordSpans(l,u,c),this._shouldSkipSlot()||(n=this._formatOutValue(l)),this._nextCellAtColumn=this._column+c}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,n||this.next()}skipRow(o){this._skipRows.add(o)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(o,n=this._row,a=this._column){return{done:!1,value:new TableSlot(this,o,n,a)}}_shouldSkipSlot(){const o=this._skipRows.has(this._row),n=this._row<this._startRow,a=this._column<this._startColumn,l=this._endColumn!==void 0&&this._column>this._endColumn;return o||n||a||l}_getSpanned(){const o=this._spannedCells.get(this._row);return o&&o.get(this._column)||null}_recordSpans(o,n,a){const l={cell:o,row:this._row,column:this._column};for(let c=this._row;c<this._row+n;c++)for(let u=this._column;u<this._column+a;u++)(c!=this._row||u!=this._column)&&this._markSpannedCell(c,u,l)}_markSpannedCell(o,n,a){this._spannedCells.has(o)||this._spannedCells.set(o,new Map),this._spannedCells.get(o).set(n,a)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const o=this._getRowLength(0);for(let n=this._startRow;!this._jumpedToStartRow;n--)o===this._getRowLength(n)&&(this._row=n,this._rowIndex=n,this._jumpedToStartRow=!0)}_getRowLength(o){return[...this._table.getChild(o).getChildren()].reduce((a,l)=>a+parseInt(l.getAttribute("colspan")||"1"),0)}}class TableSlot{constructor(o,n,a,l){E(this,"cell");E(this,"row");E(this,"column");E(this,"cellAnchorRow");E(this,"cellAnchorColumn");E(this,"_cellIndex");E(this,"_rowIndex");E(this,"_table");this.cell=n,this.row=o._row,this.column=o._column,this.cellAnchorRow=a,this.cellAnchorColumn=l,this._cellIndex=o._cellIndex,this._rowIndex=o._rowIndex,this._table=o._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function downcastTable(s,o){return(n,{writer:a})=>{const l=n.getAttribute("headingRows")||0,c=a.createContainerElement("table",null,[]),u=a.createContainerElement("figure",{class:"table"},c);l>0&&a.insert(a.createPositionAt(c,"end"),a.createContainerElement("thead",null,a.createSlot(d=>d.is("element","tableRow")&&d.index<l))),l<s.getRows(n)&&a.insert(a.createPositionAt(c,"end"),a.createContainerElement("tbody",null,a.createSlot(d=>d.is("element","tableRow")&&d.index>=l)));for(const{positionOffset:d,filter:h}of o.additionalSlots)a.insert(a.createPositionAt(c,d),a.createSlot(h));return a.insert(a.createPositionAt(c,"after"),a.createSlot(d=>d.is("element","tableRow")?!1:!o.additionalSlots.some(({filter:h})=>h(d)))),o.asWidget?toTableWidget(u,a):u}}function downcastRow(){return(s,{writer:o})=>s.isEmpty?o.createEmptyElement("tr"):o.createContainerElement("tr")}function downcastCell(s={}){return(o,{writer:n})=>{const a=o.parent,l=a.parent,c=l.getChildIndex(a),u=new TableWalker(l,{row:c}),d=l.getAttribute("headingRows")||0,h=l.getAttribute("headingColumns")||0;let f=null;for(const g of u)if(g.cell==o){const v=g.row<d||g.column<h?"th":"td";f=s.asWidget?toWidgetEditable(n.createEditableElement(v),n):n.createContainerElement(v);break}return f}}function convertParagraphInTableCell(s={}){return(o,{writer:n})=>{if(!o.parent.is("element","tableCell")||!isSingleParagraphWithoutAttributes(o))return null;if(s.asWidget)return n.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const a=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,a),a}}}function isSingleParagraphWithoutAttributes(s){return s.parent.childCount==1&&!hasAnyAttribute(s)}function toTableWidget(s,o){return o.setCustomProperty("table",!0,s),toWidget(s,o,{hasSelectionHandle:!0})}function hasAnyAttribute(s){for(const o of s.getAttributeKeys())if(!(o.startsWith("selection:")||o=="htmlEmptyBlock"))return!0;return!1}class InsertTableCommand extends Command{refresh(){const o=this.editor.model,n=o.document.selection,a=o.schema;this.isEnabled=isAllowedInParent(n,a)}execute(o={}){const n=this.editor,a=n.model,l=n.plugins.get("TableUtils"),c=n.config.get("table.defaultHeadings.rows"),u=n.config.get("table.defaultHeadings.columns");o.headingRows===void 0&&c&&(o.headingRows=c),o.headingColumns===void 0&&u&&(o.headingColumns=u),a.change(d=>{const h=l.createTable(d,o);a.insertObject(h,null,null,{findOptimalPosition:"auto"}),d.setSelection(d.createPositionAt(h.getNodeByPath([0,0,0]),0))})}}function isAllowedInParent(s,o){const n=s.getFirstPosition().parent,a=n===n.root?n:n.parent;return o.checkChild(a,"table")}class InsertRowCommand extends Command{constructor(n,a={}){super(n);E(this,"order");this.order=a.order||"below"}refresh(){const n=this.editor.model.document.selection,l=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n).length;this.isEnabled=l}execute(){const n=this.editor,a=n.model.document.selection,l=n.plugins.get("TableUtils"),c=this.order==="above",u=l.getSelectionAffectedTableCells(a),d=l.getRowIndexes(u),h=c?d.first:d.last,f=u[0].findAncestor("table");l.insertRows(f,{at:c?h:h+1,copyStructureFromAbove:!c})}}class InsertColumnCommand extends Command{constructor(n,a={}){super(n);E(this,"order");this.order=a.order||"right"}refresh(){const n=this.editor.model.document.selection,l=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n).length;this.isEnabled=l}execute(){const n=this.editor,a=n.model.document.selection,l=n.plugins.get("TableUtils"),c=this.order==="left",u=l.getSelectionAffectedTableCells(a),d=l.getColumnIndexes(u),h=c?d.first:d.last,f=u[0].findAncestor("table");l.insertColumns(f,{columns:1,at:c?h:h+1})}}class SplitCellCommand extends Command{constructor(n,a={}){super(n);E(this,"direction");this.direction=a.direction||"horizontally"}refresh(){const a=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=a.length===1}execute(){const n=this.editor.plugins.get("TableUtils"),a=n.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?n.splitCellHorizontally(a,2):n.splitCellVertically(a,2)}}function cropTableToDimensions(s,o,n){const{startRow:a,startColumn:l,endRow:c,endColumn:u}=o,d=n.createElement("table"),h=c-a+1;for(let g=0;g<h;g++)n.insertElement("tableRow",d,"end");const f=[...new TableWalker(s,{startRow:a,endRow:c,startColumn:l,endColumn:u,includeAllSlots:!0})];for(const{row:g,column:p,cell:v,isAnchor:b,cellAnchorRow:_,cellAnchorColumn:w}of f){const x=g-a,S=d.getChild(x);if(!b)(_<a||w<l)&&createEmptyTableCell(n,n.createPositionAt(S,"end"));else{const C=n.cloneElement(v);n.append(C,S),trimTableCellIfNeeded(C,g,p,c,u,n)}}return addHeadingsToCroppedTable(d,s,a,l,n),d}function getVerticallyOverlappingCells(s,o,n=0){const a=[],l=new TableWalker(s,{startRow:n,endRow:o-1});for(const c of l){const{row:u,cellHeight:d}=c,h=u+d-1;u<o&&o<=h&&a.push(c)}return a}function splitHorizontally(s,o,n){const a=s.parent,l=a.parent,c=a.index,u=parseInt(s.getAttribute("rowspan")),d=o-c,h={},f=u-d;f>1&&(h.rowspan=f);const g=parseInt(s.getAttribute("colspan")||"1");g>1&&(h.colspan=g);const p=c,v=p+d,b=[...new TableWalker(l,{startRow:p,endRow:v,includeAllSlots:!0})];let _=null,w;for(const x of b){const{row:S,column:C,cell:T}=x;T===s&&w===void 0&&(w=C),w!==void 0&&w===C&&S===v&&(_=createEmptyTableCell(n,x.getPositionBefore(),h))}return updateNumericAttribute("rowspan",d,s,n),_}function getHorizontallyOverlappingCells(s,o){const n=[],a=new TableWalker(s);for(const l of a){const{column:c,cellWidth:u}=l,d=c+u-1;c<o&&o<=d&&n.push(l)}return n}function splitVertically(s,o,n,a){const l=parseInt(s.getAttribute("colspan")),c=n-o,u={},d=l-c;d>1&&(u.colspan=d);const h=parseInt(s.getAttribute("rowspan")||"1");h>1&&(u.rowspan=h);const f=createEmptyTableCell(a,a.createPositionAfter(s),u);return updateNumericAttribute("colspan",c,s,a),f}function trimTableCellIfNeeded(s,o,n,a,l,c){const u=parseInt(s.getAttribute("colspan")||"1"),d=parseInt(s.getAttribute("rowspan")||"1");if(n+u-1>l){const g=l-n+1;updateNumericAttribute("colspan",g,s,c,1)}if(o+d-1>a){const g=a-o+1;updateNumericAttribute("rowspan",g,s,c,1)}}function addHeadingsToCroppedTable(s,o,n,a,l){const c=parseInt(o.getAttribute("headingRows")||"0");if(c>0){const d=c-n;updateNumericAttribute("headingRows",d,s,l,0)}const u=parseInt(o.getAttribute("headingColumns")||"0");if(u>0){const d=u-a;updateNumericAttribute("headingColumns",d,s,l,0)}}function removeEmptyColumns(s,o){const n=o.getColumns(s),a=new Array(n).fill(0);for(const{column:c}of new TableWalker(s))a[c]++;const l=a.reduce((c,u,d)=>u?c:[...c,d],[]);if(l.length>0){const c=l[l.length-1];return o.removeColumns(s,{at:c}),!0}return!1}function removeEmptyRows(s,o){const n=[],a=o.getRows(s);for(let l=0;l<a;l++)s.getChild(l).isEmpty&&n.push(l);if(n.length>0){const l=n[n.length-1];return o.removeRows(s,{at:l}),!0}return!1}function removeEmptyRowsColumns(s,o){removeEmptyColumns(s,o)||removeEmptyRows(s,o)}function adjustLastRowIndex(s,o){const n=Array.from(new TableWalker(s,{startColumn:o.firstColumn,endColumn:o.lastColumn,row:o.lastRow}));if(n.every(({cellHeight:c})=>c===1))return o.lastRow;const l=n[0].cellHeight-1;return o.lastRow+l}function adjustLastColumnIndex(s,o){const n=Array.from(new TableWalker(s,{startRow:o.firstRow,endRow:o.lastRow,column:o.lastColumn}));if(n.every(({cellWidth:c})=>c===1))return o.lastColumn;const l=n[0].cellWidth-1;return o.lastColumn+l}class MergeCellCommand extends Command{constructor(n,a){super(n);E(this,"direction");E(this,"isHorizontal");this.direction=a.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const n=this._getMergeableCell();this.value=n,this.isEnabled=!!n}execute(){const n=this.editor.model,a=n.document,c=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(a.selection)[0],u=this.value,d=this.direction;n.change(h=>{const f=d=="right"||d=="down",g=f?c:u,p=f?u:c,v=p.parent;mergeTableCells$1(p,g,h);const b=this.isHorizontal?"colspan":"rowspan",_=parseInt(c.getAttribute(b)||"1"),w=parseInt(u.getAttribute(b)||"1");h.setAttribute(b,_+w,g),h.setSelection(h.createRangeIn(g));const x=this.editor.plugins.get("TableUtils"),S=v.findAncestor("table");removeEmptyRowsColumns(S,x)})}_getMergeableCell(){const a=this.editor.model.document,l=this.editor.plugins.get("TableUtils"),c=l.getTableCellsContainingSelection(a.selection)[0];if(!c)return;const u=this.isHorizontal?getHorizontalCell(c,this.direction,l):getVerticalCell(c,this.direction,l);if(!u)return;const d=this.isHorizontal?"rowspan":"colspan",h=parseInt(c.getAttribute(d)||"1");if(parseInt(u.getAttribute(d)||"1")===h)return u}}function getHorizontalCell(s,o,n){const l=s.parent.parent,c=o=="right"?s.nextSibling:s.previousSibling,u=(l.getAttribute("headingColumns")||0)>0;if(!c)return;const d=o=="right"?s:c,h=o=="right"?c:s,{column:f}=n.getCellLocation(d),{column:g}=n.getCellLocation(h),p=parseInt(d.getAttribute("colspan")||"1"),v=isHeadingColumnCell(n,d),b=isHeadingColumnCell(n,h);return u&&v!=b?void 0:f+p===g?c:void 0}function getVerticalCell(s,o,n){const a=s.parent,l=a.parent,c=l.getChildIndex(a);if(o=="down"&&c===n.getRows(l)-1||o=="up"&&c===0)return null;const u=parseInt(s.getAttribute("rowspan")||"1"),d=l.getAttribute("headingRows")||0,h=o=="down"&&c+u===d,f=o=="up"&&c===d;if(d&&(h||f))return null;const g=parseInt(s.getAttribute("rowspan")||"1"),p=o=="down"?c+g:c,v=[...new TableWalker(l,{endRow:p})],_=v.find(x=>x.cell===s).column,w=v.find(({row:x,cellHeight:S,column:C})=>C!==_?!1:o=="down"?x===p:p===x+S);return w&&w.cell?w.cell:null}function mergeTableCells$1(s,o,n){isEmpty$2(s)||(isEmpty$2(o)&&n.remove(n.createRangeIn(o)),n.move(n.createRangeIn(s),n.createPositionAt(o,"end"))),n.remove(s)}function isEmpty$2(s){const o=s.getChild(0);return s.childCount==1&&o.is("element","paragraph")&&o.isEmpty}class RemoveRowCommand extends Command{refresh(){const o=this.editor.plugins.get("TableUtils"),n=o.getSelectionAffectedTableCells(this.editor.model.document.selection),a=n[0];if(a){const l=a.findAncestor("table"),u=o.getRows(l)-1,d=o.getRowIndexes(n),h=d.first===0&&d.last===u;this.isEnabled=!h}else this.isEnabled=!1}execute(){const o=this.editor.model,n=this.editor.plugins.get("TableUtils"),a=n.getSelectionAffectedTableCells(o.document.selection),l=n.getRowIndexes(a),c=a[0],u=c.findAncestor("table"),d=n.getCellLocation(c).column;o.change(h=>{const f=l.last-l.first+1;n.removeRows(u,{at:l.first,rows:f});const g=getCellToFocus$1(u,l.first,d,n.getRows(u));h.setSelection(h.createPositionAt(g,0))})}}function getCellToFocus$1(s,o,n,a){const l=s.getChild(Math.min(o,a-1));let c=l.getChild(0),u=0;for(const d of l.getChildren()){if(u>n)return c;c=d,u+=parseInt(d.getAttribute("colspan")||"1")}return c}class RemoveColumnCommand extends Command{refresh(){const o=this.editor.plugins.get("TableUtils"),n=o.getSelectionAffectedTableCells(this.editor.model.document.selection),a=n[0];if(a){const l=a.findAncestor("table"),c=o.getColumns(l),{first:u,last:d}=o.getColumnIndexes(n);this.isEnabled=d-u<c-1}else this.isEnabled=!1}execute(){const o=this.editor.plugins.get("TableUtils"),[n,a]=getBoundaryCells(this.editor.model.document.selection,o),l=n.parent.parent,c=[...new TableWalker(l)],u={first:c.find(h=>h.cell===n).column,last:c.find(h=>h.cell===a).column},d=getCellToFocus(c,n,a,u);this.editor.model.change(h=>{const f=u.last-u.first+1;o.removeColumns(l,{at:u.first,columns:f}),h.setSelection(h.createPositionAt(d,0))})}}function getCellToFocus(s,o,n,a){return parseInt(n.getAttribute("colspan")||"1")>1?n:o.previousSibling||n.nextSibling?n.nextSibling||o.previousSibling:a.first?s.reverse().find(({column:c})=>c<a.first).cell:s.reverse().find(({column:c})=>c>a.last).cell}function getBoundaryCells(s,o){const n=o.getSelectionAffectedTableCells(s),a=n[0],l=n.pop(),c=[a,l];return a.isBefore(l)?c:c.reverse()}class SetHeaderRowCommand extends Command{refresh(){const o=this.editor.plugins.get("TableUtils"),n=this.editor.model,a=o.getSelectionAffectedTableCells(n.document.selection),l=a.length>0;this.isEnabled=l,this.value=l&&a.every(c=>this._isInHeading(c,c.parent.parent))}execute(o={}){if(o.forceValue===this.value)return;const n=this.editor.plugins.get("TableUtils"),a=this.editor.model,l=n.getSelectionAffectedTableCells(a.document.selection),c=l[0].findAncestor("table"),{first:u,last:d}=n.getRowIndexes(l),h=this.value?u:d+1,f=c.getAttribute("headingRows")||0;a.change(g=>{if(h){const p=h>f?f:0,v=getVerticallyOverlappingCells(c,h,p);for(const{cell:b}of v)splitHorizontally(b,h,g)}updateNumericAttribute("headingRows",h,c,g,0)})}_isInHeading(o,n){const a=parseInt(n.getAttribute("headingRows")||"0");return!!a&&o.parent.index<a}}class SetHeaderColumnCommand extends Command{refresh(){const o=this.editor.model,n=this.editor.plugins.get("TableUtils"),a=n.getSelectionAffectedTableCells(o.document.selection),l=a.length>0;this.isEnabled=l,this.value=l&&a.every(c=>isHeadingColumnCell(n,c))}execute(o={}){if(o.forceValue===this.value)return;const n=this.editor.plugins.get("TableUtils"),a=this.editor.model,l=n.getSelectionAffectedTableCells(a.document.selection),c=l[0].findAncestor("table"),{first:u,last:d}=n.getColumnIndexes(l),h=this.value?u:d+1;a.change(f=>{if(h){const g=getHorizontallyOverlappingCells(c,h);for(const{cell:p,column:v}of g)splitVertically(p,v,h,f)}updateNumericAttribute("headingColumns",h,c,f,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const COLUMN_MIN_WIDTH_AS_PERCENTAGE=5,COLUMN_MIN_WIDTH_IN_PIXELS=40,COLUMN_WIDTH_PRECISION=2;function getChangedResizedTables(s){const o=new Set;for(const n of s.document.differ.getChanges()){let a=null;switch(n.type){case"insert":a=["table","tableRow","tableCell"].includes(n.name)?n.position:null;break;case"remove":a=["tableRow","tableCell"].includes(n.name)?n.position:null;break;case"attribute":n.range.start.nodeAfter&&(a=["table","tableRow","tableCell"].includes(n.range.start.nodeAfter.name)?n.range.start:null);break}if(!a)continue;const l=a.nodeAfter&&a.nodeAfter.is("element","table")?a.nodeAfter:a.findAncestor("table");for(const c of s.createRangeOn(l).getItems())c.is("element","table")&&getColumnGroupElement(c)&&o.add(c)}return o}function getColumnMinWidthAsPercentage(s,o){return COLUMN_MIN_WIDTH_IN_PIXELS*100/getTableWidthInPixels(s,o)}function getTableWidthInPixels(s,o){const n=getChildrenViewElement(s,"tbody",o)||getChildrenViewElement(s,"thead",o),a=o.editing.view.domConverter.mapViewToDom(n);return getElementWidthInPixels(a)}function getChildrenViewElement(s,o,n){return[...[...n.editing.mapper.toViewElement(s).getChildren()].find(c=>c.is("element","table")).getChildren()].find(c=>c.is("element",o))}function getElementWidthInPixels(s){const o=global$1.window.getComputedStyle(s);return o.boxSizing==="border-box"?parseFloat(o.width)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderLeftWidth)-parseFloat(o.borderRightWidth):parseFloat(o.width)}function getColumnEdgesIndexes(s,o){const n=o.getCellLocation(s).column,a=s.getAttribute("colspan")||1;return{leftEdge:n,rightEdge:n+a-1}}function toPrecision(s){const o=Math.pow(10,COLUMN_WIDTH_PRECISION),n=typeof s=="number"?s:parseFloat(s);return Math.round(n*o)/o}function clamp$1(s,o,n){return s<=o?toPrecision(o):s>=n?toPrecision(n):toPrecision(s)}function createFilledArray(s,o){return Array(s).fill(o)}function sumArray(s){return s.map(o=>typeof o=="number"?o:parseFloat(o)).filter(o=>!Number.isNaN(o)).reduce((o,n)=>o+n,0)}function normalizeColumnWidths(s){const o=s.map(l=>l==="auto"?l:parseFloat(l.replace("%","")));let n=calculateMissingColumnWidths(o);const a=sumArray(n);return a!==100&&(n=n.map(l=>toPrecision(l*100/a)).map((l,c,u)=>{if(!(c===u.length-1))return l;const h=sumArray(u);return toPrecision(l+100-h)})),n.map(l=>l+"%")}function calculateMissingColumnWidths(s){const o=s.filter(l=>l==="auto").length;if(o===0)return s.map(l=>toPrecision(l));const n=sumArray(s),a=Math.max((100-n)/o,COLUMN_MIN_WIDTH_AS_PERCENTAGE);return s.map(l=>l==="auto"?a:l).map(l=>toPrecision(l))}function getDomCellOuterWidth(s){const o=global$1.window.getComputedStyle(s);return o.boxSizing==="border-box"?parseInt(o.width):parseFloat(o.width)+parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)+parseFloat(o.borderWidth)}function updateColumnElements(s,o,n,a){for(let l=0;l<Math.max(n.length,s.length);l++){const c=s[l],u=n[l];u?c?a.setAttribute("columnWidth",u,c):a.appendElement("tableColumn",{columnWidth:u},o):a.remove(c)}}function getColumnGroupElement(s){if(s.is("element","tableColumnGroup"))return s;const o=s.getChildren();return Array.from(o).find(n=>n.is("element","tableColumnGroup"))}function getTableColumnElements(s){const o=getColumnGroupElement(s);return o?Array.from(o.getChildren()):[]}function getTableColumnsWidths(s){return getTableColumnElements(s).map(o=>o.getAttribute("columnWidth"))}function translateColSpanAttribute(s,o){return getTableColumnElements(s).reduce((a,l)=>{const c=l.getAttribute("columnWidth"),u=l.getAttribute("colSpan");if(!u)return a.push(c),a;for(let d=0;d<u;d++)a.push(c);return o.removeAttribute("colSpan",l),a},[])}class TableUtils extends Plugin{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(o){const n=o.parent,a=n.parent,l=a.getChildIndex(n),c=new TableWalker(a,{row:l});for(const{cell:u,row:d,column:h}of c)if(u===o)return{row:d,column:h};/* istanbul ignore next -- @preserve */}createTable(o,n){const a=o.createElement("table"),l=n.rows||2,c=n.columns||2;return createEmptyRows(o,a,0,l,c),n.headingRows&&updateNumericAttribute("headingRows",Math.min(n.headingRows,l),a,o,0),n.headingColumns&&updateNumericAttribute("headingColumns",Math.min(n.headingColumns,c),a,o,0),a}insertRows(o,n={}){const a=this.editor.model,l=n.at||0,c=n.rows||1,u=n.copyStructureFromAbove!==void 0,d=n.copyStructureFromAbove?l-1:l,h=this.getRows(o),f=this.getColumns(o);if(l>h)throw new CKEditorError("tableutils-insertrows-insert-out-of-range",this,{options:n});a.change(g=>{const p=o.getAttribute("headingRows")||0;if(p>l&&updateNumericAttribute("headingRows",p+c,o,g,0),!u&&(l===0||l===h)){createEmptyRows(g,o,l,c,f);return}const v=u?Math.max(l,d):l,b=new TableWalker(o,{endRow:v}),_=new Array(f).fill(1);for(const{row:w,column:x,cellHeight:S,cellWidth:C,cell:T}of b){const R=w+S-1,A=w<l&&l<=R,M=w<=d&&d<=R;A?(g.setAttribute("rowspan",S+c,T),_[x]=-C):u&&M&&(_[x]=C)}for(let w=0;w<c;w++){const x=g.createElement("tableRow");g.insert(x,o,l);for(let S=0;S<_.length;S++){const C=_[S],T=g.createPositionAt(x,"end");C>0&&createEmptyTableCell(g,T,C>1?{colspan:C}:void 0),S+=Math.abs(C)-1}}})}insertColumns(o,n={}){const a=this.editor.model,l=n.at||0,c=n.columns||1;a.change(u=>{const d=o.getAttribute("headingColumns");l<d&&u.setAttribute("headingColumns",d+c,o);const h=this.getColumns(o);if(l===0||h===l){for(const g of o.getChildren())g.is("element","tableRow")&&createCells(c,u,u.createPositionAt(g,l?"end":0));return}const f=new TableWalker(o,{column:l,includeAllSlots:!0});for(const g of f){const{row:p,cell:v,cellAnchorColumn:b,cellAnchorRow:_,cellWidth:w,cellHeight:x}=g;if(b<l){u.setAttribute("colspan",w+c,v);const S=_+x-1;for(let C=p;C<=S;C++)f.skipRow(C)}else createCells(c,u,g.getPositionBefore())}})}removeRows(o,n){const a=this.editor.model,l=n.rows||1,c=this.getRows(o),u=n.at,d=u+l-1;if(d>c-1)throw new CKEditorError("tableutils-removerows-row-index-out-of-range",this,{table:o,options:n});a.change(h=>{const f={first:u,last:d},{cellsToMove:g,cellsToTrim:p}=getCellsToMoveAndTrimOnRemoveRow(o,f);if(g.size){const v=d+1;moveCellsToRow(o,v,g,h)}for(let v=d;v>=u;v--)h.remove(o.getChild(v));for(const{rowspan:v,cell:b}of p)updateNumericAttribute("rowspan",v,b,h);updateHeadingRows(o,f,h),removeEmptyColumns(o,this)||removeEmptyRows(o,this)})}removeColumns(o,n){const a=this.editor.model,l=n.at,c=n.columns||1,u=n.at+c-1;a.change(d=>{adjustHeadingColumns(o,{first:l,last:u},d);const h=getTableColumnElements(o);for(let f=u;f>=l;f--){for(const{cell:g,column:p,cellWidth:v}of[...new TableWalker(o)])p<=f&&v>1&&p+v>f?updateNumericAttribute("colspan",v-1,g,d):p===f&&d.remove(g);if(h[f]){const g=f===0?h[1]:h[f-1],p=parseFloat(h[f].getAttribute("columnWidth")),v=parseFloat(g.getAttribute("columnWidth"));d.remove(h[f]),d.setAttribute("columnWidth",p+v+"%",g)}}removeEmptyRows(o,this)||removeEmptyColumns(o,this)})}splitCellVertically(o,n=2){const a=this.editor.model,c=o.parent.parent,u=parseInt(o.getAttribute("rowspan")||"1"),d=parseInt(o.getAttribute("colspan")||"1");a.change(h=>{if(d>1){const{newCellsSpan:f,updatedSpan:g}=breakSpanEvenly(d,n);updateNumericAttribute("colspan",g,o,h);const p={};f>1&&(p.colspan=f),u>1&&(p.rowspan=u);const v=d>n?n-1:d-1;createCells(v,h,h.createPositionAfter(o),p)}if(d<n){const f=n-d,g=[...new TableWalker(c)],{column:p}=g.find(({cell:w})=>w===o),v=g.filter(({cell:w,cellWidth:x,column:S})=>{const C=w!==o&&S===p,T=S<p&&S+x>p;return C||T});for(const{cell:w,cellWidth:x}of v)h.setAttribute("colspan",x+f,w);const b={};u>1&&(b.rowspan=u),createCells(f,h,h.createPositionAfter(o),b);const _=c.getAttribute("headingColumns")||0;_>p&&updateNumericAttribute("headingColumns",_+f,c,h)}})}splitCellHorizontally(o,n=2){const a=this.editor.model,l=o.parent,c=l.parent,u=c.getChildIndex(l),d=parseInt(o.getAttribute("rowspan")||"1"),h=parseInt(o.getAttribute("colspan")||"1");a.change(f=>{if(d>1){const g=[...new TableWalker(c,{startRow:u,endRow:u+d-1,includeAllSlots:!0})],{newCellsSpan:p,updatedSpan:v}=breakSpanEvenly(d,n);updateNumericAttribute("rowspan",v,o,f);const{column:b}=g.find(({cell:x})=>x===o),_={};p>1&&(_.rowspan=p),h>1&&(_.colspan=h);let w=0;for(const x of g){const{column:S,row:C}=x,T=C>=u+v,R=S===b;w>=p&&R&&(w=0),T&&R&&(w||createCells(1,f,x.getPositionBefore(),_),w++)}}if(d<n){const g=n-d,p=[...new TableWalker(c,{startRow:0,endRow:u})];for(const{cell:_,cellHeight:w,row:x}of p)if(_!==o&&x+w>u){const S=w+g;f.setAttribute("rowspan",S,_)}const v={};h>1&&(v.colspan=h),createEmptyRows(f,c,u+1,g,1,v);const b=c.getAttribute("headingRows")||0;b>u&&updateNumericAttribute("headingRows",b+g,c,f)}})}getColumns(o){return[...o.getChild(0).getChildren()].filter(a=>a.is("element","tableCell")).reduce((a,l)=>{const c=parseInt(l.getAttribute("colspan")||"1");return a+c},0)}getRows(o){return Array.from(o.getChildren()).reduce((n,a)=>a.is("element","tableRow")?n+1:n,0)}createTableWalker(o,n={}){return new TableWalker(o,n)}getSelectedTableCells(o){const n=[];for(const a of this.sortRanges(o.getRanges())){const l=a.getContainedElement();l&&l.is("element","tableCell")&&n.push(l)}return n}getTableCellsContainingSelection(o){const n=[];for(const a of o.getRanges()){const l=a.start.findAncestor("tableCell");l&&n.push(l)}return n}getSelectionAffectedTableCells(o){const n=this.getSelectedTableCells(o);return n.length?n:this.getTableCellsContainingSelection(o)}getRowIndexes(o){const n=o.map(a=>a.parent.index);return this._getFirstLastIndexesObject(n)}getColumnIndexes(o){const n=o[0].findAncestor("table"),l=[...new TableWalker(n)].filter(c=>o.includes(c.cell)).map(c=>c.column);return this._getFirstLastIndexesObject(l)}isSelectionRectangular(o){if(o.length<2||!this._areCellInTheSameTableSection(o))return!1;const n=new Set,a=new Set;let l=0;for(const u of o){const{row:d,column:h}=this.getCellLocation(u),f=parseInt(u.getAttribute("rowspan"))||1,g=parseInt(u.getAttribute("colspan"))||1;n.add(d),a.add(h),f>1&&n.add(d+f-1),g>1&&a.add(h+g-1),l+=f*g}return getBiggestRectangleArea(n,a)==l}sortRanges(o){return Array.from(o).sort(compareRangeOrder)}_getFirstLastIndexesObject(o){const n=o.sort((c,u)=>c-u),a=n[0],l=n[n.length-1];return{first:a,last:l}}_areCellInTheSameTableSection(o){const n=o[0].findAncestor("table"),a=this.getRowIndexes(o),l=parseInt(n.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(a,l))return!1;const c=this.getColumnIndexes(o),u=parseInt(n.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(c,u)}_areIndexesInSameSection({first:o,last:n},a){const l=o<a,c=n<a;return l===c}}function createEmptyRows(s,o,n,a,l,c={}){for(let u=0;u<a;u++){const d=s.createElement("tableRow");s.insert(d,o,n),createCells(l,s,s.createPositionAt(d,"end"),c)}}function createCells(s,o,n,a={}){for(let l=0;l<s;l++)createEmptyTableCell(o,n,a)}function breakSpanEvenly(s,o){if(s<o)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(s/o),a=s-n*o+n;return{newCellsSpan:n,updatedSpan:a}}function adjustHeadingColumns(s,o,n){const a=s.getAttribute("headingColumns")||0;if(a&&o.first<a){const l=Math.min(a-1,o.last)-o.first+1;n.setAttribute("headingColumns",a-l,s)}}function updateHeadingRows(s,{first:o,last:n},a){const l=s.getAttribute("headingRows")||0;if(o<l){const c=n<l?l-(n-o+1):o;updateNumericAttribute("headingRows",c,s,a,0)}}function getCellsToMoveAndTrimOnRemoveRow(s,{first:o,last:n}){const a=new Map,l=[];for(const{row:c,column:u,cellHeight:d,cell:h}of new TableWalker(s,{endRow:n})){const f=c+d-1;if(c>=o&&c<=n&&f>n){const v=n-c+1,b=d-v;a.set(u,{cell:h,rowspan:b})}if(c<o&&f>=o){let v;f>=n?v=n-o+1:v=f-o+1,l.push({cell:h,rowspan:d-v})}}return{cellsToMove:a,cellsToTrim:l}}function moveCellsToRow(s,o,n,a){const c=[...new TableWalker(s,{includeAllSlots:!0,row:o})],u=s.getChild(o);let d;for(const{column:h,cell:f,isAnchor:g}of c)if(n.has(h)){const{cell:p,rowspan:v}=n.get(h),b=d?a.createPositionAfter(d):a.createPositionAt(u,0);a.move(a.createRangeOn(p),b),updateNumericAttribute("rowspan",v,p,a),d=p}else g&&(d=f)}function compareRangeOrder(s,o){const n=s.start,a=o.start;return n.isBefore(a)?-1:1}function getBiggestRectangleArea(s,o){const n=Array.from(s.values()),a=Array.from(o.values()),l=Math.max(...n),c=Math.min(...n),u=Math.max(...a),d=Math.min(...a);return(l-c+1)*(u-d+1)}class MergeCellsCommand extends Command{refresh(){const o=this.editor.plugins.get(TableUtils),n=o.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=o.isSelectionRectangular(n)}execute(){const o=this.editor.model,n=this.editor.plugins.get(TableUtils);o.change(a=>{const l=n.getSelectedTableCells(o.document.selection),c=l.shift(),{mergeWidth:u,mergeHeight:d}=getMergeDimensions(c,l,n);updateNumericAttribute("colspan",u,c,a),updateNumericAttribute("rowspan",d,c,a);for(const f of l)mergeTableCells(f,c,a);const h=c.findAncestor("table");removeEmptyRowsColumns(h,n),a.setSelection(c,"in")})}}function mergeTableCells(s,o,n){isEmpty$1(s)||(isEmpty$1(o)&&n.remove(n.createRangeIn(o)),n.move(n.createRangeIn(s),n.createPositionAt(o,"end"))),n.remove(s)}function isEmpty$1(s){const o=s.getChild(0);return s.childCount==1&&o.is("element","paragraph")&&o.isEmpty}function getMergeDimensions(s,o,n){let a=0,l=0;for(const f of o){const{row:g,column:p}=n.getCellLocation(f);a=getMaxOffset(f,p,a,"colspan"),l=getMaxOffset(f,g,l,"rowspan")}const{row:c,column:u}=n.getCellLocation(s),d=a-u,h=l-c;return{mergeWidth:d,mergeHeight:h}}function getMaxOffset(s,o,n,a){const l=parseInt(s.getAttribute(a)||"1");return Math.max(n,o+l)}class SelectRowCommand extends Command{constructor(o){super(o),this.affectsData=!1}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length>0}execute(){const o=this.editor.model,n=this.editor.plugins.get("TableUtils"),a=n.getSelectionAffectedTableCells(o.document.selection),l=n.getRowIndexes(a),c=a[0].findAncestor("table"),u=[];for(let d=l.first;d<=l.last;d++)for(const h of c.getChild(d).getChildren())u.push(o.createRangeOn(h));o.change(d=>{d.setSelection(u)})}}class SelectColumnCommand extends Command{constructor(o){super(o),this.affectsData=!1}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length>0}execute(){const o=this.editor.plugins.get("TableUtils"),n=this.editor.model,a=o.getSelectionAffectedTableCells(n.document.selection),l=a[0],c=a.pop(),u=l.findAncestor("table"),d=o.getCellLocation(l),h=o.getCellLocation(c),f=Math.min(d.column,h.column),g=Math.max(d.column,h.column),p=[];for(const v of new TableWalker(u,{startColumn:f,endColumn:g}))p.push(n.createRangeOn(v.cell));n.change(v=>{v.setSelection(p)})}}function injectTableLayoutPostFixer(s){s.document.registerPostFixer(o=>tableLayoutPostFixer(o,s))}function tableLayoutPostFixer(s,o){const n=o.document.differ.getChanges();let a=!1;const l=new Set;for(const c of n){let u=null;c.type=="insert"&&c.name=="table"&&(u=c.position.nodeAfter),(c.type=="insert"||c.type=="remove")&&(c.name=="tableRow"||c.name=="tableCell")&&(u=c.position.findAncestor("table")),isTableAttributeEntry(c)&&(u=c.range.start.findAncestor("table")),u&&!l.has(u)&&(a=fixTableCellsRowspan(u,s)||a,a=fixTableRowsSizes(u,s)||a,l.add(u))}return a}function fixTableCellsRowspan(s,o){let n=!1;const a=findCellsToTrim(s);if(a.length){n=!0;for(const l of a)updateNumericAttribute("rowspan",l.rowspan,l.cell,o,1)}return n}function fixTableRowsSizes(s,o){let n=!1;const a=getChildrenLengths(s),l=[];for(const[h,f]of a.entries())!f&&s.getChild(h).is("element","tableRow")&&l.push(h);if(l.length){n=!0;for(const h of l.reverse())o.remove(s.getChild(h)),a.splice(h,1)}const c=a.filter((h,f)=>s.getChild(f).is("element","tableRow")),u=c[0];if(!c.every(h=>h===u)){const h=c.reduce((f,g)=>g>f?g:f,0);for(const[f,g]of c.entries()){const p=h-g;if(p){for(let v=0;v<p;v++)createEmptyTableCell(o,o.createPositionAt(s.getChild(f),"end"));n=!0}}}return n}function findCellsToTrim(s){const o=parseInt(s.getAttribute("headingRows")||"0"),n=Array.from(s.getChildren()).reduce((l,c)=>c.is("element","tableRow")?l+1:l,0),a=[];for(const{row:l,cell:c,cellHeight:u}of new TableWalker(s)){if(u<2)continue;const h=l<o?o:n;if(l+u>h){const f=h-l;a.push({cell:c,rowspan:f})}}return a}function getChildrenLengths(s){const o=new Array(s.childCount).fill(0);for(const{rowIndex:n}of new TableWalker(s,{includeAllSlots:!0}))o[n]++;return o}function isTableAttributeEntry(s){if(s.type!=="attribute")return!1;const o=s.attributeKey;return o==="headingRows"||o==="colspan"||o==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function injectTableCellParagraphPostFixer(s){s.document.registerPostFixer(o=>tableCellContentsPostFixer(o,s))}function tableCellContentsPostFixer(s,o){const n=o.document.differ.getChanges();let a=!1;for(const l of n)l.type=="insert"&&l.name=="table"&&(a=fixTable(l.position.nodeAfter,s)||a),l.type=="insert"&&l.name=="tableRow"&&(a=fixTableRow(l.position.nodeAfter,s)||a),l.type=="insert"&&l.name=="tableCell"&&(a=fixTableCellContent(l.position.nodeAfter,s)||a),(l.type=="remove"||l.type=="insert")&&checkTableCellChange(l)&&(a=fixTableCellContent(l.position.parent,s)||a);return a}function fixTable(s,o){let n=!1;for(const a of s.getChildren())a.is("element","tableRow")&&(n=fixTableRow(a,o)||n);return n}function fixTableRow(s,o){let n=!1;for(const a of s.getChildren())n=fixTableCellContent(a,o)||n;return n}function fixTableCellContent(s,o){if(s.childCount==0)return o.insertElement("paragraph",s),!0;const n=Array.from(s.getChildren()).filter(a=>a.is("$text"));for(const a of n)o.wrap(o.createRangeOn(a),"paragraph");return!!n.length}function checkTableCellChange(s){return s.position.parent.is("element","tableCell")?s.type=="insert"&&s.name=="$text"||s.type=="remove":!1}function tableHeadingsRefreshHandler(s,o){const n=s.document.differ;for(const a of n.getChanges()){let l,c=!1;if(a.type=="attribute"){const f=a.range.start.nodeAfter;if(!f||!f.is("element","table")||a.attributeKey!="headingRows"&&a.attributeKey!="headingColumns")continue;l=f,c=a.attributeKey=="headingRows"}else(a.name=="tableRow"||a.name=="tableCell")&&(l=a.position.findAncestor("table"),c=a.name=="tableRow");if(!l)continue;const u=l.getAttribute("headingRows")||0,d=l.getAttribute("headingColumns")||0,h=new TableWalker(l);for(const f of h){const p=f.row<u||f.column<d?"th":"td",v=o.mapper.toViewElement(f.cell);v&&v.is("element")&&v.name!=p&&o.reconvertItem(c?f.cell.parent:f.cell)}}}function tableCellRefreshHandler(s,o){const n=s.document.differ,a=new Set;for(const l of n.getChanges()){const c=l.type=="attribute"?l.range.start.parent:l.position.parent;c.is("element","tableCell")&&a.add(c)}for(const l of a.values()){const c=Array.from(l.getChildren()).filter(u=>shouldRefresh(u,o.mapper));for(const u of c)o.reconvertItem(u)}}function shouldRefresh(s,o){if(!s.is("element","paragraph"))return!1;const n=o.toViewElement(s);return n?isSingleParagraphWithoutAttributes(s)!==n.is("element","span"):!1}class TableEditing extends Plugin{constructor(n){super(n);E(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils]}init(){const n=this.editor,a=n.model,l=a.schema,c=n.conversion,u=n.plugins.get(TableUtils);l.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),l.register("tableRow",{allowIn:"table",isLimit:!0}),l.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),c.for("upcast").add(upcastTableFigure()),c.for("upcast").add(upcastTable()),c.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(u,{asWidget:!0,additionalSlots:this._additionalSlots})}),c.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(u,{additionalSlots:this._additionalSlots})}),c.for("upcast").elementToElement({model:"tableRow",view:"tr"}),c.for("upcast").add(skipEmptyTableRow()),c.for("downcast").elementToElement({model:"tableRow",view:downcastRow()}),c.for("upcast").elementToElement({model:"tableCell",view:"td"}),c.for("upcast").elementToElement({model:"tableCell",view:"th"}),c.for("upcast").add(ensureParagraphInTableCell("td")),c.for("upcast").add(ensureParagraphInTableCell("th")),c.for("editingDowncast").elementToElement({model:"tableCell",view:downcastCell({asWidget:!0})}),c.for("dataDowncast").elementToElement({model:"tableCell",view:downcastCell()}),c.for("editingDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell({asWidget:!0}),converterPriority:"high"}),c.for("dataDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell(),converterPriority:"high"}),c.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),c.for("upcast").attributeToAttribute({model:{key:"colspan",value:upcastCellSpan("colspan")},view:"colspan"}),c.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),c.for("upcast").attributeToAttribute({model:{key:"rowspan",value:upcastCellSpan("rowspan")},view:"rowspan"}),n.config.define("table.defaultHeadings.rows",0),n.config.define("table.defaultHeadings.columns",0),n.commands.add("insertTable",new InsertTableCommand(n)),n.commands.add("insertTableRowAbove",new InsertRowCommand(n,{order:"above"})),n.commands.add("insertTableRowBelow",new InsertRowCommand(n,{order:"below"})),n.commands.add("insertTableColumnLeft",new InsertColumnCommand(n,{order:"left"})),n.commands.add("insertTableColumnRight",new InsertColumnCommand(n,{order:"right"})),n.commands.add("removeTableRow",new RemoveRowCommand(n)),n.commands.add("removeTableColumn",new RemoveColumnCommand(n)),n.commands.add("splitTableCellVertically",new SplitCellCommand(n,{direction:"vertically"})),n.commands.add("splitTableCellHorizontally",new SplitCellCommand(n,{direction:"horizontally"})),n.commands.add("mergeTableCells",new MergeCellsCommand(n)),n.commands.add("mergeTableCellRight",new MergeCellCommand(n,{direction:"right"})),n.commands.add("mergeTableCellLeft",new MergeCellCommand(n,{direction:"left"})),n.commands.add("mergeTableCellDown",new MergeCellCommand(n,{direction:"down"})),n.commands.add("mergeTableCellUp",new MergeCellCommand(n,{direction:"up"})),n.commands.add("setTableColumnHeader",new SetHeaderColumnCommand(n)),n.commands.add("setTableRowHeader",new SetHeaderRowCommand(n)),n.commands.add("selectTableRow",new SelectRowCommand(n)),n.commands.add("selectTableColumn",new SelectColumnCommand(n)),injectTableLayoutPostFixer(a),injectTableCellParagraphPostFixer(a),this.listenTo(a.document,"change:data",()=>{tableHeadingsRefreshHandler(a,n.editing),tableCellRefreshHandler(a,n.editing)})}registerAdditionalSlot(n){this._additionalSlots.push(n)}}function upcastCellSpan(s){return o=>{const n=parseInt(o.getAttribute(s));return Number.isNaN(n)||n<=0?null:n}}class InsertTableView extends View$1{constructor(n){super(n);E(this,"items");E(this,"keystrokes");E(this,"focusTracker");const a=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(l,c)=>`${c} × ${l}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":a.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:a.to("label")}]}],on:{mousedown:a.to(l=>{l.preventDefault()}),click:a.to(()=>{this.fire("execute")})}}),this.on("boxover",(l,c)=>{const{row:u,column:d}=c.target.dataset;this.items.get((parseInt(u,10)-1)*10+(parseInt(d,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(l,c,u)=>{if(!u)return;const{row:d,column:h}=u.dataset;this.set({rows:parseInt(d),columns:parseInt(h)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const n of this.items)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const n=this.rows,a=this.columns;this.items.map((l,c)=>{const u=Math.floor(c/10),d=c%10,h=u<n&&d<a;l.set("isOn",h)})}_createGridButton(n,a,l,c){const u=new ButtonView(n);return u.set({label:c,class:"ck-insert-table-dropdown-grid-box"}),u.extendTemplate({attributes:{"data-row":a,"data-column":l}}),u}_createGridCollection(){const n=[];for(let a=0;a<100;a++){const l=Math.floor(a/10),c=a%10,u=`${l+1} × ${c+1}`;n.push(this._createGridButton(this.locale,l+1,c+1,u))}return this.createCollection(n)}}var tableColumnIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',tableRowIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',tableMergeCellIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class TableUI extends Plugin{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=this.editor.t,l=o.locale.contentLanguageDirection==="ltr";o.ui.componentFactory.add("insertTable",c=>{const u=o.commands.get("insertTable"),d=createDropdown(c);d.bind("isEnabled").to(u),d.buttonView.set({icon:icons.table,label:n("Insert table"),tooltip:!0});let h;return d.on("change:isOpen",()=>{h||(h=new InsertTableView(c),d.panelView.children.add(h),h.delegate("execute").to(d),d.on("execute",()=>{o.execute("insertTable",{rows:h.rows,columns:h.columns}),o.editing.view.focus()}))}),d}),o.ui.componentFactory.add("menuBar:insertTable",c=>{const u=o.commands.get("insertTable"),d=new MenuBarMenuView(c),h=new InsertTableView(c);return h.delegate("execute").to(d),d.on("change:isOpen",(f,g,p)=>{p||h.reset()}),h.on("execute",()=>{o.execute("insertTable",{rows:h.rows,columns:h.columns}),o.editing.view.focus()}),d.buttonView.set({label:n("Table"),icon:icons.table}),d.panelView.children.add(h),d.bind("isEnabled").to(u),d}),o.ui.componentFactory.add("tableColumn",c=>{const u=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:n("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:l?"insertTableColumnLeft":"insertTableColumnRight",label:n("Insert column left")}},{type:"button",model:{commandName:l?"insertTableColumnRight":"insertTableColumnLeft",label:n("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:n("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:n("Select column")}}];return this._prepareDropdown(n("Column"),tableColumnIcon,u,c)}),o.ui.componentFactory.add("tableRow",c=>{const u=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:n("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:n("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:n("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:n("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:n("Select row")}}];return this._prepareDropdown(n("Row"),tableRowIcon,u,c)}),o.ui.componentFactory.add("mergeTableCells",c=>{const u=[{type:"button",model:{commandName:"mergeTableCellUp",label:n("Merge cell up")}},{type:"button",model:{commandName:l?"mergeTableCellRight":"mergeTableCellLeft",label:n("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:n("Merge cell down")}},{type:"button",model:{commandName:l?"mergeTableCellLeft":"mergeTableCellRight",label:n("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:n("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:n("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(n("Merge cells"),tableMergeCellIcon,u,c)})}_prepareDropdown(o,n,a,l){const c=this.editor,u=createDropdown(l),d=this._fillDropdownWithListOptions(u,a);return u.buttonView.set({label:o,icon:n,tooltip:!0}),u.bind("isEnabled").toMany(d,"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(u,"execute",h=>{c.execute(h.source.commandName),h.source instanceof SwitchButtonView||c.editing.view.focus()}),u}_prepareMergeSplitButtonDropdown(o,n,a,l){const c=this.editor,u=createDropdown(l,SplitButtonView),d="mergeTableCells",h=c.commands.get(d),f=this._fillDropdownWithListOptions(u,a);return u.buttonView.set({label:o,icon:n,tooltip:!0,isEnabled:!0}),u.bind("isEnabled").toMany([h,...f],"isEnabled",(...g)=>g.some(p=>p)),this.listenTo(u.buttonView,"execute",()=>{c.execute(d),c.editing.view.focus()}),this.listenTo(u,"execute",g=>{c.execute(g.source.commandName),c.editing.view.focus()}),u}_fillDropdownWithListOptions(o,n){const a=this.editor,l=[],c=new Collection;for(const u of n)addListOption(u,a,l,c);return addListToDropdown(o,c),l}}function addListOption(s,o,n,a){if(s.type==="button"||s.type==="switchbutton"){const l=s.model=new Model$1(s.model),{commandName:c,bindIsOn:u}=s.model,d=o.commands.get(c);n.push(d),l.set({commandName:c}),l.bind("isEnabled").to(d),u&&l.bind("isOn").to(d,"value"),l.set({withText:!0})}a.add(s)}class TableSelection extends Plugin{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils,TableUtils]}init(){const o=this.editor,n=o.model,a=o.editing.view;this.listenTo(n,"deleteContent",(l,c)=>this._handleDeleteContent(l,c),{priority:"high"}),this.listenTo(a.document,"insertText",(l,c)=>this._handleInsertTextEvent(l,c),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const o=this.editor.plugins.get(TableUtils),n=this.editor.model.document.selection,a=o.getSelectedTableCells(n);return a.length==0?null:a}getSelectionAsFragment(){const o=this.editor.plugins.get(TableUtils),n=this.getSelectedTableCells();return n?this.editor.model.change(a=>{const l=a.createDocumentFragment(),{first:c,last:u}=o.getColumnIndexes(n),{first:d,last:h}=o.getRowIndexes(n),f=n[0].findAncestor("table");let g=h,p=u;if(o.isSelectionRectangular(n)){const _={firstColumn:c,lastColumn:u,firstRow:d,lastRow:h};g=adjustLastRowIndex(f,_),p=adjustLastColumnIndex(f,_)}const b=cropTableToDimensions(f,{startRow:d,startColumn:c,endRow:g,endColumn:p},a);return a.insert(b,l,0),l}):null}setCellSelection(o,n){const a=this._getCellsToSelect(o,n);this.editor.model.change(l=>{l.setSelection(a.cells.map(c=>l.createRangeOn(c)),{backward:a.backward})})}getFocusCell(){const a=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return a&&a.is("element","tableCell")?a:null}getAnchorCell(){const o=this.editor.model.document.selection,a=first(o.getRanges()).getContainedElement();return a&&a.is("element","tableCell")?a:null}_defineSelectionConverter(){const o=this.editor,n=new Set;o.conversion.for("editingDowncast").add(l=>l.on("selection",(c,u,d)=>{const h=d.writer;a(h);const f=this.getSelectedTableCells();if(!f)return;for(const p of f){const v=d.mapper.toViewElement(p);h.addClass("ck-editor__editable_selected",v),n.add(v)}const g=d.mapper.toViewElement(f[f.length-1]);h.setSelection(g,0)},{priority:"lowest"}));function a(l){for(const c of n)l.removeClass("ck-editor__editable_selected",c);n.clear()}}_enablePluginDisabling(){const o=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const n=this.getSelectedTableCells();if(!n)return;o.model.change(a=>{const l=a.createPositionAt(n[0],0),c=o.model.schema.getNearestSelectionRange(l);a.setSelection(c)})}})}_handleDeleteContent(o,n){const a=this.editor.plugins.get(TableUtils),l=n[0],c=n[1],u=this.editor.model,d=!c||c.direction=="backward",h=a.getSelectedTableCells(l);h.length&&(o.stop(),u.change(f=>{const g=h[d?h.length-1:0];u.change(v=>{for(const b of h)u.deleteContent(v.createSelection(b,"in"))});const p=u.schema.getNearestSelectionRange(f.createPositionAt(g,0));l.is("documentSelection")?f.setSelection(p):l.setTo(p)}))}_handleInsertTextEvent(o,n){const a=this.editor,l=this.getSelectedTableCells();if(!l)return;const c=a.editing.view,u=a.editing.mapper,d=l.map(h=>c.createRangeOn(u.toViewElement(h)));n.selection=c.createSelection(d)}_getCellsToSelect(o,n){const a=this.editor.plugins.get("TableUtils"),l=a.getCellLocation(o),c=a.getCellLocation(n),u=Math.min(l.row,c.row),d=Math.max(l.row,c.row),h=Math.min(l.column,c.column),f=Math.max(l.column,c.column),g=new Array(d-u+1).fill(null).map(()=>[]),p={startRow:u,endRow:d,startColumn:h,endColumn:f};for(const{row:_,cell:w}of new TableWalker(o.findAncestor("table"),p))g[_-u].push(w);const v=c.row<l.row,b=c.column<l.column;return v&&g.reverse(),b&&g.forEach(_=>_.reverse()),{cells:g.flat(),backward:v||b}}}class TableClipboard extends Plugin{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,TableSelection,TableUtils]}init(){const o=this.editor,n=o.editing.view.document;this.listenTo(n,"copy",(a,l)=>this._onCopyCut(a,l)),this.listenTo(n,"cut",(a,l)=>this._onCopyCut(a,l)),this.listenTo(o.model,"insertContent",(a,[l,c])=>this._onInsertContent(a,l,c),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(o,n){const a=this.editor.editing.view,l=this.editor.plugins.get(TableSelection),c=this.editor.plugins.get(ClipboardMarkersUtils);l.getSelectedTableCells()&&(o.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(n.preventDefault(),o.stop(),this.editor.model.enqueueChange({isUndoable:o.name==="cut"},()=>{const u=c._copySelectedFragmentWithMarkers(o.name,this.editor.model.document.selection,()=>l.getSelectionAsFragment());a.document.fire("clipboardOutput",{dataTransfer:n.dataTransfer,content:this.editor.data.toView(u),method:o.name})})))}_onInsertContent(o,n,a){if(a&&!a.is("documentSelection"))return;const l=this.editor.model,c=this.editor.plugins.get(TableUtils),u=this.editor.plugins.get(ClipboardMarkersUtils),d=this.getTableIfOnlyTableInContent(n,l);if(!d)return;const h=c.getSelectionAffectedTableCells(l.document.selection);if(!h.length){removeEmptyRowsColumns(d,c);return}o.stop(),n.is("documentFragment")?u._pasteMarkersIntoTransformedElement(n.markers,f=>this._replaceSelectedCells(d,h,f)):this.editor.model.change(f=>{this._replaceSelectedCells(d,h,f)})}_replaceSelectedCells(o,n,a){const l=this.editor.plugins.get(TableUtils),c={width:l.getColumns(o),height:l.getRows(o)},u=prepareTableForPasting(n,c,a,l),d=u.lastRow-u.firstRow+1,h=u.lastColumn-u.firstColumn+1,f={startRow:0,startColumn:0,endRow:Math.min(d,c.height)-1,endColumn:Math.min(h,c.width)-1};o=cropTableToDimensions(o,f,a);const g=n[0].findAncestor("table"),p=this._replaceSelectedCellsWithPasted(o,c,g,u,a);if(this.editor.plugins.get("TableSelection").isEnabled){const v=l.sortRanges(p.map(b=>a.createRangeOn(b)));a.setSelection(v)}else a.setSelection(p[0],0);return g}_replaceSelectedCellsWithPasted(o,n,a,l,c){const{width:u,height:d}=n,h=createLocationMap(o,u,d),f=[...new TableWalker(a,{startRow:l.firstRow,endRow:l.lastRow,startColumn:l.firstColumn,endColumn:l.lastColumn,includeAllSlots:!0})],g=[];let p;for(const x of f){const{row:S,column:C}=x;C===l.firstColumn&&(p=x.getPositionBefore());const T=S-l.firstRow,R=C-l.firstColumn,A=h[T%d][R%u],M=A?c.cloneElement(A):null,D=this._replaceTableSlotCell(x,M,p,c);D&&(trimTableCellIfNeeded(D,S,C,l.lastRow,l.lastColumn,c),g.push(D),p=c.createPositionAfter(D))}const v=parseInt(a.getAttribute("headingRows")||"0"),b=parseInt(a.getAttribute("headingColumns")||"0"),_=l.firstRow<v&&v<=l.lastRow,w=l.firstColumn<b&&b<=l.lastColumn;if(_){const x={first:l.firstColumn,last:l.lastColumn},S=doHorizontalSplit(a,v,x,c,l.firstRow);g.push(...S)}if(w){const x={first:l.firstRow,last:l.lastRow},S=doVerticalSplit(a,b,x,c);g.push(...S)}return g}_replaceTableSlotCell(o,n,a,l){const{cell:c,isAnchor:u}=o;return u&&l.remove(c),n?(l.insert(n,a),n):null}getTableIfOnlyTableInContent(o,n){if(!o.is("documentFragment")&&!o.is("element"))return null;if(o.is("element","table"))return o;if(o.childCount==1&&o.getChild(0).is("element","table"))return o.getChild(0);const a=n.createRangeIn(o);for(const l of a.getItems())if(l.is("element","table")){const c=n.createRange(a.start,n.createPositionBefore(l));if(n.hasContent(c,{ignoreWhitespaces:!0}))return null;const u=n.createRange(n.createPositionAfter(l),a.end);return n.hasContent(u,{ignoreWhitespaces:!0})?null:l}return null}}function prepareTableForPasting(s,o,n,a){const l=s[0].findAncestor("table"),c=a.getColumnIndexes(s),u=a.getRowIndexes(s),d={firstColumn:c.first,lastColumn:c.last,firstRow:u.first,lastRow:u.last},h=s.length===1;return h&&(d.lastRow+=o.height-1,d.lastColumn+=o.width-1,expandTableSize(l,d.lastRow+1,d.lastColumn+1,a)),h||!a.isSelectionRectangular(s)?splitCellsToRectangularSelection(l,d,n):(d.lastRow=adjustLastRowIndex(l,d),d.lastColumn=adjustLastColumnIndex(l,d)),d}function expandTableSize(s,o,n,a){const l=a.getColumns(s),c=a.getRows(s);n>l&&a.insertColumns(s,{at:l,columns:n-l}),o>c&&a.insertRows(s,{at:c,rows:o-c})}function createLocationMap(s,o,n){const a=new Array(n).fill(null).map(()=>new Array(o).fill(null));for(const{column:l,row:c,cell:u}of new TableWalker(s))a[c][l]=u;return a}function splitCellsToRectangularSelection(s,o,n){const{firstRow:a,lastRow:l,firstColumn:c,lastColumn:u}=o,d={first:a,last:l},h={first:c,last:u};doVerticalSplit(s,c,d,n),doVerticalSplit(s,u+1,d,n),doHorizontalSplit(s,a,h,n),doHorizontalSplit(s,l+1,h,n,a)}function doHorizontalSplit(s,o,n,a,l=0){return o<1?void 0:getVerticallyOverlappingCells(s,o,l).filter(({column:d,cellWidth:h})=>isAffectedBySelection(d,h,n)).map(({cell:d})=>splitHorizontally(d,o,a))}function doVerticalSplit(s,o,n,a){return o<1?void 0:getHorizontallyOverlappingCells(s,o).filter(({row:u,cellHeight:d})=>isAffectedBySelection(u,d,n)).map(({cell:u,column:d})=>splitVertically(u,d,o,a))}function isAffectedBySelection(s,o,n){const a=s+o-1,{first:l,last:c}=n,u=s>=l&&s<=c,d=s<l&&a>=l;return u||d}class TableKeyboard extends Plugin{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){const o=this.editor,a=o.editing.view.document,l=o.t;this.listenTo(a,"arrowKey",(...c)=>this._onArrowKey(...c),{context:"table"}),this.listenTo(a,"tab",(...c)=>this._handleTabOnSelectedTable(...c),{context:"figure"}),this.listenTo(a,"tab",(...c)=>this._handleTab(...c),{context:["th","td"]}),o.accessibility.addKeystrokeInfoGroup({id:"table",label:l("Keystrokes that can be used in a table cell"),keystrokes:[{label:l("Move the selection to the next cell"),keystroke:"Tab"},{label:l("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:l("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:l("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(o,n){const a=this.editor,c=a.model.document.selection.getSelectedElement();!c||!c.is("element","table")||(n.preventDefault(),n.stopPropagation(),o.stop(),a.model.change(u=>{u.setSelection(u.createRangeIn(c.getChild(0).getChild(0)))}))}_handleTab(o,n){const a=this.editor,l=this.editor.plugins.get(TableUtils),c=this.editor.plugins.get("TableSelection"),u=a.model.document.selection,d=!n.shiftKey;let h=l.getTableCellsContainingSelection(u)[0];if(h||(h=c.getFocusCell()),!h)return;n.preventDefault(),n.stopPropagation(),o.stop();const f=h.parent,g=f.parent,p=g.getChildIndex(f),v=f.getChildIndex(h),b=v===0;if(!d&&b&&p===0){a.model.change(S=>{S.setSelection(S.createRangeOn(g))});return}const _=v===f.childCount-1,w=p===l.getRows(g)-1;if(d&&w&&_&&(a.execute("insertTableRowBelow"),p===l.getRows(g)-1)){a.model.change(S=>{S.setSelection(S.createRangeOn(g))});return}let x;if(d&&_)x=g.getChild(p+1).getChild(0);else if(!d&&b){const S=g.getChild(p-1);x=S.getChild(S.childCount-1)}else x=f.getChild(v+(d?1:-1));a.model.change(S=>{S.setSelection(S.createRangeIn(x))})}_onArrowKey(o,n){const a=this.editor,l=n.keyCode,c=getLocalizedArrowKeyCodeDirection(l,a.locale.contentLanguageDirection);this._handleArrowKeys(c,n.shiftKey)&&(n.preventDefault(),n.stopPropagation(),o.stop())}_handleArrowKeys(o,n){const a=this.editor.plugins.get(TableUtils),l=this.editor.plugins.get("TableSelection"),c=this.editor.model,u=c.document.selection,d=["right","down"].includes(o),h=a.getSelectedTableCells(u);if(h.length){let g;return n?g=l.getFocusCell():g=d?h[h.length-1]:h[0],this._navigateFromCellInDirection(g,o,n),!0}const f=u.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!f)return!1;if(!u.isCollapsed)if(n){if(u.isBackward==d&&!u.containsEntireContent(f))return!1}else{const g=u.getSelectedElement();if(!g||!c.schema.isObject(g))return!1}return this._isSelectionAtCellEdge(u,f,d)?(this._navigateFromCellInDirection(f,o,n),!0):!1}_isSelectionAtCellEdge(o,n,a){const l=this.editor.model,c=this.editor.model.schema,u=a?o.getLastPosition():o.getFirstPosition();if(!c.getLimitElement(u).is("element","tableCell"))return l.createPositionAt(n,a?"end":0).isTouching(u);const d=l.createSelection(u);return l.modifySelection(d,{direction:a?"forward":"backward"}),u.isEqual(d.focus)}_navigateFromCellInDirection(o,n,a=!1){const l=this.editor.model,c=o.findAncestor("table"),u=[...new TableWalker(c,{includeAllSlots:!0})],{row:d,column:h}=u[u.length-1],f=u.find(({cell:C})=>C==o);let{row:g,column:p}=f;switch(n){case"left":p--;break;case"up":g--;break;case"right":p+=f.cellWidth;break;case"down":g+=f.cellHeight;break}const v=g<0||g>d,b=p<0&&g<=0,_=p>h&&g>=d;if(v||b||_){l.change(C=>{C.setSelection(C.createRangeOn(c))});return}p<0?(p=a?0:h,g--):p>h&&(p=a?h:0,g++);const w=u.find(C=>C.row==g&&C.column==p).cell,x=["right","down"].includes(n),S=this.editor.plugins.get("TableSelection");if(a&&S.isEnabled){const C=S.getAnchorCell()||o;S.setCellSelection(C,w)}else{const C=l.createPositionAt(w,x?0:"end");l.change(T=>{T.setSelection(C)})}}}class MouseEventsObserver extends DomEventObserver{constructor(){super(...arguments);E(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(n){this.fire(n.type,n)}}class TableMouse extends Plugin{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){this.editor.editing.view.addObserver(MouseEventsObserver),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const o=this.editor,n=o.plugins.get(TableUtils);let a=!1;const l=o.plugins.get(TableSelection);this.listenTo(o.editing.view.document,"mousedown",(c,u)=>{const d=o.model.document.selection;if(!this.isEnabled||!l.isEnabled||!u.domEvent.shiftKey)return;const h=l.getAnchorCell()||n.getTableCellsContainingSelection(d)[0];if(!h)return;const f=this._getModelTableCellFromDomEvent(u);f&&haveSameTableParent(h,f)&&(a=!0,l.setCellSelection(h,f),u.preventDefault())}),this.listenTo(o.editing.view.document,"mouseup",()=>{a=!1}),this.listenTo(o.editing.view.document,"selectionChange",c=>{a&&c.stop()},{priority:"highest"})}_enableMouseDragSelection(){const o=this.editor;let n,a,l=!1,c=!1;const u=o.plugins.get(TableSelection);this.listenTo(o.editing.view.document,"mousedown",(d,h)=>{!this.isEnabled||!u.isEnabled||h.domEvent.shiftKey||h.domEvent.ctrlKey||h.domEvent.altKey||(n=this._getModelTableCellFromDomEvent(h))}),this.listenTo(o.editing.view.document,"mousemove",(d,h)=>{if(!h.domEvent.buttons||!n)return;const f=this._getModelTableCellFromDomEvent(h);f&&haveSameTableParent(n,f)&&(a=f,!l&&a!=n&&(l=!0)),l&&(c=!0,u.setCellSelection(n,a),h.preventDefault())}),this.listenTo(o.editing.view.document,"mouseup",()=>{l=!1,c=!1,n=null,a=null}),this.listenTo(o.editing.view.document,"selectionChange",d=>{c&&d.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(o){const n=o.target,a=this.editor.editing.view.createPositionAt(n,0);return this.editor.editing.mapper.toModelPosition(a).parent.findAncestor("tableCell",{includeSelf:!0})}}function haveSameTableParent(s,o){return s.parent.parent==o.parent.parent}class Table extends Plugin{static get requires(){return[TableEditing,TableUI,TableSelection,TableMouse,TableKeyboard,TableClipboard,Widget]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function getSelectionAffectedTableWidget(s){const o=getSelectedTableWidget(s);return o||getTableWidgetAncestor(s)}function getSelectedTableWidget(s){const o=s.getSelectedElement();return o&&isTableWidget(o)?o:null}function getTableWidgetAncestor(s){const o=s.getFirstPosition();if(!o)return null;let n=o.parent;for(;n;){if(n.is("element")&&isTableWidget(n))return n;n=n.parent}return null}function isTableWidget(s){return!!s.getCustomProperty("table")&&isWidget(s)}class TableToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const o=this.editor,n=o.t,a=o.plugins.get(WidgetToolbarRepository),l=o.config.get("table.contentToolbar"),c=o.config.get("table.tableToolbar");l&&a.register("tableContent",{ariaLabel:n("Table toolbar"),items:l,getRelatedElement:getTableWidgetAncestor}),c&&a.register("table",{ariaLabel:n("Table toolbar"),items:c,getRelatedElement:getSelectedTableWidget})}}class ColorInputView extends View$1{constructor(n,a){super(n);E(this,"options");E(this,"focusTracker");E(this,"focusCycler");E(this,"_focusables");E(this,"dropdownView");E(this,"inputView");E(this,"keystrokes");E(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=a,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new KeystrokeHandler,this._stillTyping=!1,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(l,c,u)=>this._setInputValue(u))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(n=>{this.focusTracker.add(n.element),this._focusables.add(n)}),this.keystrokes.listenTo(this.element)}focus(n){n===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const n=this.locale,a=n.t,l=this.bindTemplate,c=this._createColorSelector(n),u=createDropdown(n),d=new View$1;return d.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:l.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",l.if("value","ck-hidden",h=>h!="")]}}]}),u.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),u.buttonView.children.add(d),u.buttonView.label=a("Color picker"),u.buttonView.tooltip=!0,u.panelPosition=n.uiLanguageDirection==="rtl"?"se":"sw",u.panelView.children.add(c),u.bind("isEnabled").to(this,"isReadOnly",h=>!h),u.on("change:isOpen",(h,f,g)=>{g&&(c.updateSelectedColors(),c.showColorGridsFragment())}),u}_createInputTextView(){const n=this.locale,a=new InputTextView(n);return a.extendTemplate({on:{blur:a.bindTemplate.to("blur")}}),a.value=this.value,a.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(a),a.on("input",()=>{const l=a.element.value,c=this.options.colorDefinitions.find(u=>l===u.label);this._stillTyping=!0,this.value=c&&c.color||l}),a.on("blur",()=>{this._stillTyping=!1,this._setInputValue(a.element.value)}),a.delegate("input").to(this),a}_createColorSelector(n){const a=n.t,l=this.options.defaultColorValue||"",c=a(l?"Restore default":"Remove color"),u=new ColorSelectorView(n,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:c,colorPickerLabel:a("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});u.appendUI(),u.on("execute",(h,f)=>{if(f.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=f.value||l,this.fire("input"),f.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let d=this.value;return u.on("colorPicker:cancel",()=>{this.value=d,this.fire("input"),this.dropdownView.isOpen=!1}),u.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{d=this.value}),u.bind("selectedColor").to(this,"value"),u}_setInputValue(n){if(!this._stillTyping){const a=normalizeColor$1(n),l=this.options.colorDefinitions.find(c=>a===normalizeColor$1(c.color));l?this.inputView.value=l.label:this.inputView.value=n||""}}}function normalizeColor$1(s){return s.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const isEmpty=s=>s==="";function getBorderStyleLabels(s){return{none:s("None"),solid:s("Solid"),dotted:s("Dotted"),dashed:s("Dashed"),double:s("Double"),groove:s("Groove"),ridge:s("Ridge"),inset:s("Inset"),outset:s("Outset")}}function getLocalizedColorErrorText(s){return s('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function getLocalizedLengthErrorText(s){return s('The value is invalid. Try "10px" or "2em" or simply "2".')}function colorFieldValidator(s){return s=s.trim().toLowerCase(),isEmpty(s)||isColor(s)}function lengthFieldValidator(s){return s=s.trim(),isEmpty(s)||isNumberString(s)||isLength(s)||isPercentage(s)}function lineWidthFieldValidator(s){return s=s.trim(),isEmpty(s)||isNumberString(s)||isLength(s)}function getBorderStyleDefinitions(s,o){const n=new Collection,a=getBorderStyleLabels(s.t);for(const l in a){const c={type:"button",model:new Model$1({_borderStyleValue:l,label:a[l],role:"menuitemradio",withText:!0})};l==="none"?c.model.bind("isOn").to(s,"borderStyle",u=>o==="none"?!u:u===l):c.model.bind("isOn").to(s,"borderStyle",u=>u===l),n.add(c)}return n}function fillToolbar(s){const{view:o,icons:n,toolbar:a,labels:l,propertyName:c,nameToValue:u,defaultValue:d}=s;for(const h in l){const f=new ButtonView(o.locale);f.set({role:"radio",isToggleable:!0,label:l[h],icon:n[h],tooltip:l[h]});const g=u?u(h):h;f.bind("isOn").to(o,c,p=>{let v=p;return p===""&&d&&(v=d),g===v}),f.on("execute",()=>{o[c]=g}),a.items.add(f)}}const defaultColors=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function getLabeledColorInputCreator(s){return(o,n,a)=>{const l=new ColorInputView(o.locale,{colorDefinitions:colorConfigToColorGridDefinitions(s.colorConfig),columns:s.columns,defaultColorValue:s.defaultColorValue,colorPickerConfig:s.colorPickerConfig});return l.inputView.set({id:n,ariaDescribedById:a}),l.bind("isReadOnly").to(o,"isEnabled",c=>!c),l.bind("hasError").to(o,"errorText",c=>!!c),l.on("input",()=>{o.errorText=null}),o.bind("isEmpty","isFocused").to(l),l}}function isNumberString(s){const o=parseFloat(s);return!Number.isNaN(o)&&s===String(o)}function colorConfigToColorGridDefinitions(s){return s.map(o=>({color:o.model,label:o.label,options:{hasBorder:o.hasBorder}}))}class FormRowView extends View$1{constructor(n,a={}){super(n);E(this,"children");const l=this.bindTemplate;this.set("class",a.class||null),this.children=this.createCollection(),a.children&&a.children.forEach(c=>this.children.add(c)),this.set("_role",null),this.set("_ariaLabelledBy",null),a.labelView&&this.set({_role:"group",_ariaLabelledBy:a.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",l.to("class")],role:l.to("_role"),"aria-labelledby":l.to("_ariaLabelledBy")},children:this.children})}}class TableCellPropertiesView extends View$1{constructor(n,a){super(n);E(this,"options");E(this,"focusTracker");E(this,"keystrokes");E(this,"children");E(this,"borderStyleDropdown");E(this,"borderWidthInput");E(this,"borderColorInput");E(this,"backgroundInput");E(this,"paddingInput");E(this,"widthInput");E(this,"heightInput");E(this,"horizontalAlignmentToolbar");E(this,"verticalAlignmentToolbar");E(this,"saveButtonView");E(this,"cancelButtonView");E(this,"_focusables");E(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=a;const{borderStyleDropdown:l,borderWidthInput:c,borderColorInput:u,borderRowLabel:d}=this._createBorderFields(),{backgroundRowLabel:h,backgroundInput:f}=this._createBackgroundFields(),{widthInput:g,operatorLabel:p,heightInput:v,dimensionsLabel:b}=this._createDimensionFields(),{horizontalAlignmentToolbar:_,verticalAlignmentToolbar:w,alignmentLabel:x}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=l,this.borderWidthInput=c,this.borderColorInput=u,this.backgroundInput=f,this.paddingInput=this._createPaddingField(),this.widthInput=g,this.heightInput=v,this.horizontalAlignmentToolbar=_,this.verticalAlignmentToolbar=w;const{saveButtonView:S,cancelButtonView:C}=this._createActionButtons();this.saveButtonView=S,this.cancelButtonView=C,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(n,{label:this.t("Cell properties")})),this.children.add(new FormRowView(n,{labelView:d,children:[d,l,u,c],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(n,{labelView:h,children:[h,f],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(n,{children:[new FormRowView(n,{labelView:b,children:[b,g,p,v],class:"ck-table-form__dimensions-row"}),new FormRowView(n,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new FormRowView(n,{labelView:x,children:[x,_,w],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new FormRowView(n,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(n=>{this._focusCycler.chain(n.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const n=this.options.defaultTableCellProperties,a={style:n.borderStyle,width:n.borderWidth,color:n.borderColor},l=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:a.color,colorPickerConfig:this.options.colorPickerConfig}),c=this.locale,u=this.t,d=u("Style"),h=new LabelView(c);h.text=u("Border");const f=getBorderStyleLabels(u),g=new LabeledFieldView(c,createLabeledDropdown);g.set({label:d,class:"ck-table-form__border-style"}),g.fieldView.buttonView.set({ariaLabel:d,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:d}),g.fieldView.buttonView.bind("label").to(this,"borderStyle",b=>f[b||"none"]),g.fieldView.on("execute",b=>{this.borderStyle=b.source._borderStyleValue}),g.bind("isEmpty").to(this,"borderStyle",b=>!b),addListToDropdown(g.fieldView,getBorderStyleDefinitions(this,a.style),{role:"menu",ariaLabel:d});const p=new LabeledFieldView(c,createLabeledInputText);p.set({label:u("Width"),class:"ck-table-form__border-width"}),p.fieldView.bind("value").to(this,"borderWidth"),p.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),p.fieldView.on("input",()=>{this.borderWidth=p.fieldView.element.value});const v=new LabeledFieldView(c,l);return v.set({label:u("Color"),class:"ck-table-form__border-color"}),v.fieldView.bind("value").to(this,"borderColor"),v.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),v.fieldView.on("input",()=>{this.borderColor=v.fieldView.value}),this.on("change:borderStyle",(b,_,w,x)=>{isBorderStyleSet$1(w)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet$1(x)||(this.borderColor=a.color,this.borderWidth=a.width)}),{borderRowLabel:h,borderStyleDropdown:g,borderColorInput:v,borderWidthInput:p}}_createBackgroundFields(){const n=this.locale,a=this.t,l=new LabelView(n);l.text=a("Background");const c=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),u=new LabeledFieldView(n,c);return u.set({label:a("Color"),class:"ck-table-cell-properties-form__background"}),u.fieldView.bind("value").to(this,"backgroundColor"),u.fieldView.on("input",()=>{this.backgroundColor=u.fieldView.value}),{backgroundRowLabel:l,backgroundInput:u}}_createDimensionFields(){const n=this.locale,a=this.t,l=new LabelView(n);l.text=a("Dimensions");const c=new LabeledFieldView(n,createLabeledInputText);c.set({label:a("Width"),class:"ck-table-form__dimensions-row__width"}),c.fieldView.bind("value").to(this,"width"),c.fieldView.on("input",()=>{this.width=c.fieldView.element.value});const u=new View$1(n);u.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const d=new LabeledFieldView(n,createLabeledInputText);return d.set({label:a("Height"),class:"ck-table-form__dimensions-row__height"}),d.fieldView.bind("value").to(this,"height"),d.fieldView.on("input",()=>{this.height=d.fieldView.element.value}),{dimensionsLabel:l,widthInput:c,operatorLabel:u,heightInput:d}}_createPaddingField(){const n=this.locale,a=this.t,l=new LabeledFieldView(n,createLabeledInputText);return l.set({label:a("Padding"),class:"ck-table-cell-properties-form__padding"}),l.fieldView.bind("value").to(this,"padding"),l.fieldView.on("input",()=>{this.padding=l.fieldView.element.value}),l}_createAlignmentFields(){const n=this.locale,a=this.t,l=new LabelView(n),c={left:icons.alignLeft,center:icons.alignCenter,right:icons.alignRight,justify:icons.alignJustify,top:icons.alignTop,middle:icons.alignMiddle,bottom:icons.alignBottom};l.text=a("Table cell text alignment");const u=new ToolbarView(n),d=n.contentLanguageDirection==="rtl";u.set({isCompact:!0,role:"radiogroup",ariaLabel:a("Horizontal text alignment toolbar")}),fillToolbar({view:this,icons:c,toolbar:u,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:f=>{if(d){if(f==="left")return"right";if(f==="right")return"left"}return f},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const h=new ToolbarView(n);return h.set({isCompact:!0,role:"radiogroup",ariaLabel:a("Vertical text alignment toolbar")}),fillToolbar({view:this,icons:c,toolbar:h,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:u,verticalAlignmentToolbar:h,alignmentLabel:l}}_createActionButtons(){const n=this.locale,a=this.t,l=new ButtonView(n),c=new ButtonView(n),u=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return l.set({label:a("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),l.bind("isEnabled").toMany(u,"errorText",(...d)=>d.every(h=>!h)),c.set({label:a("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),c.delegate("execute").to(this,"cancel"),{saveButtonView:l,cancelButtonView:c}}get _horizontalAlignmentLabels(){const n=this.locale,a=this.t,l=a("Align cell text to the left"),c=a("Align cell text to the center"),u=a("Align cell text to the right"),d=a("Justify cell text");return n.uiLanguageDirection==="rtl"?{right:u,center:c,left:l,justify:d}:{left:l,center:c,right:u,justify:d}}get _verticalAlignmentLabels(){const n=this.t;return{top:n("Align cell text to the top"),middle:n("Align cell text to the middle"),bottom:n("Align cell text to the bottom")}}}function isBorderStyleSet$1(s){return s!=="none"}const BALLOON_POSITIONS=[BalloonPanelView.defaultPositions.northArrowSouth,BalloonPanelView.defaultPositions.northArrowSouthWest,BalloonPanelView.defaultPositions.northArrowSouthEast,BalloonPanelView.defaultPositions.southArrowNorth,BalloonPanelView.defaultPositions.southArrowNorthWest,BalloonPanelView.defaultPositions.southArrowNorthEast,BalloonPanelView.defaultPositions.viewportStickyNorth];function repositionContextualBalloon(s,o){const n=s.plugins.get("ContextualBalloon"),a=s.editing.view.document.selection;let l;o==="cell"?getTableWidgetAncestor(a)&&(l=getBalloonCellPositionData(s)):getSelectionAffectedTableWidget(a)&&(l=getBalloonTablePositionData(s)),l&&n.updatePosition(l)}function getBalloonTablePositionData(s){const o=s.model.document.selection,n=getSelectionAffectedTable(o),a=s.editing.mapper.toViewElement(n);return{target:s.editing.view.domConverter.mapViewToDom(a),positions:BALLOON_POSITIONS}}function getBalloonCellPositionData(s){const o=s.editing.mapper,n=s.editing.view.domConverter,a=s.model.document.selection;if(a.rangeCount>1)return{target:()=>createBoundingRect(a.getRanges(),s),positions:BALLOON_POSITIONS};const l=getTableCellAtPosition(a.getFirstPosition()),c=o.toViewElement(l);return{target:n.mapViewToDom(c),positions:BALLOON_POSITIONS}}function getTableCellAtPosition(s){return s.nodeAfter&&s.nodeAfter.is("element","tableCell")?s.nodeAfter:s.findAncestor("tableCell")}function createBoundingRect(s,o){const n=o.editing.mapper,a=o.editing.view.domConverter,l=Array.from(s).map(c=>{const u=getTableCellAtPosition(c.start),d=n.toViewElement(u);return new Rect$3(a.mapViewToDom(d))});return Rect$3.getBoundingRect(l)}var tableCellProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function getSingleValue(s){if(!s||!isObject$6(s))return s;const{top:o,right:n,bottom:a,left:l}=s;if(o==n&&n==a&&a==l)return o}function addDefaultUnitToNumericValue(s,o){const n=parseFloat(s);return Number.isNaN(n)||String(n)!==String(s)?s:`${n}${o}`}function getNormalizedDefaultProperties(s,o={}){const n={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...s};return o.includeAlignmentProperty&&!n.alignment&&(n.alignment="center"),o.includePaddingProperty&&!n.padding&&(n.padding=""),o.includeVerticalAlignmentProperty&&!n.verticalAlignment&&(n.verticalAlignment="middle"),o.includeHorizontalAlignmentProperty&&!n.horizontalAlignment&&(n.horizontalAlignment=o.isRightToLeftContent?"right":"left"),n}function getNormalizedDefaultTableProperties(s,o){return getNormalizedDefaultProperties({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...s},o)}function getNormalizedDefaultCellProperties(s,o){return getNormalizedDefaultProperties({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...s},o)}const ERROR_TEXT_TIMEOUT$1=500,propertyToCommandMap$1={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class TableCellPropertiesUI extends Plugin{constructor(n){super(n);E(this,"_defaultTableCellProperties");E(this,"_balloon");E(this,"view");E(this,"_undoStepBatch");E(this,"_isReady");n.config.define("table.tableCellProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.t;this._defaultTableCellProperties=getNormalizedDefaultCellProperties(n.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:n.locale.contentLanguageDirection==="rtl"}),this._balloon=n.plugins.get(ContextualBalloon),this.view=null,this._isReady=!1,n.ui.componentFactory.add("tableCellProperties",l=>{const c=new ButtonView(l);c.set({label:a("Cell properties"),icon:tableCellProperties,tooltip:!0}),this.listenTo(c,"execute",()=>this._showView());const u=Object.values(propertyToCommandMap$1).map(d=>n.commands.get(d));return c.bind("isEnabled").toMany(u,"isEnabled",(...d)=>d.some(h=>h)),c})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const n=this.editor,a=n.config.get("table.tableCellProperties"),l=normalizeColorOptions(a.borderColors),c=getLocalizedColorOptions(n.locale,l),u=normalizeColorOptions(a.backgroundColors),d=getLocalizedColorOptions(n.locale,u),h=a.colorPicker!==!1,f=new TableCellPropertiesView(n.locale,{borderColors:c,backgroundColors:d,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:h?a.colorPicker||{}:!1}),g=n.t;f.render(),this.listenTo(f,"submit",()=>{this._hideView()}),this.listenTo(f,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),f.keystrokes.set("Esc",(b,_)=>{this._hideView(),_()}),clickOutsideHandler({emitter:f,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const p=getLocalizedColorErrorText(g),v=getLocalizedLengthErrorText(g);return f.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),f.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:f.borderColorInput,commandName:"tableCellBorderColor",errorText:p,validator:colorFieldValidator})),f.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:f.borderWidthInput,commandName:"tableCellBorderWidth",errorText:v,validator:lineWidthFieldValidator})),f.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:f.paddingInput,commandName:"tableCellPadding",errorText:v,validator:lengthFieldValidator})),f.on("change:width",this._getValidatedPropertyChangeCallback({viewField:f.widthInput,commandName:"tableCellWidth",errorText:v,validator:lengthFieldValidator})),f.on("change:height",this._getValidatedPropertyChangeCallback({viewField:f.heightInput,commandName:"tableCellHeight",errorText:v,validator:lengthFieldValidator})),f.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:f.backgroundInput,commandName:"tableCellBackgroundColor",errorText:p,validator:colorFieldValidator})),f.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),f.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),f}_fillViewFormFromCommandValues(){const n=this.editor.commands,a=n.get("tableCellBorderStyle");Object.entries(propertyToCommandMap$1).map(([l,c])=>{const u=this._defaultTableCellProperties[l]||"";return[l,n.get(c).value||u]}).forEach(([l,c])=>{(l==="borderColor"||l==="borderWidth")&&a.value==="none"||this.view.set(l,c)}),this._isReady=!0}_showView(){const n=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(n.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonCellPositionData(n)}),this._undoStepBatch=n.model.createBatch(),this.view.focus()}_hideView(){const n=this.editor;this.stopListening(n.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const n=this.editor,a=n.editing.view.document;getTableWidgetAncestor(a.selection)?this._isViewVisible&&repositionContextualBalloon(n,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(n){return(a,l,c)=>{this._isReady&&this.editor.execute(n,{value:c,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(n){const{commandName:a,viewField:l,validator:c,errorText:u}=n,d=debounce$1(()=>{l.errorText=u},ERROR_TEXT_TIMEOUT$1);return(h,f,g)=>{d.cancel(),this._isReady&&(c(g)?(this.editor.execute(a,{value:g,batch:this._undoStepBatch}),l.errorText=null):d())}}}class TableCellPropertyCommand extends Command{constructor(n,a,l){super(n);E(this,"attributeName");E(this,"_defaultValue");this.attributeName=a,this._defaultValue=l}refresh(){const n=this.editor,l=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n.model.document.selection);this.isEnabled=!!l.length,this.value=this._getSingleValue(l)}execute(n={}){const{value:a,batch:l}=n,c=this.editor.model,d=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(c.document.selection),h=this._getValueToSet(a);c.enqueueChange(l,f=>{h?d.forEach(g=>f.setAttribute(this.attributeName,h,g)):d.forEach(g=>f.removeAttribute(this.attributeName,g))})}_getAttribute(n){if(!n)return;const a=n.getAttribute(this.attributeName);if(a!==this._defaultValue)return a}_getValueToSet(n){if(n!==this._defaultValue)return n}_getSingleValue(n){const a=this._getAttribute(n[0]);return n.every(c=>this._getAttribute(c)===a)?a:void 0}}class TableCellWidthCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellWidth",n)}_getValueToSet(o){if(o=addDefaultUnitToNumericValue(o,"px"),o!==this._defaultValue)return o}}class TableCellWidthEditing extends Plugin{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const o=this.editor,n=getNormalizedDefaultCellProperties(o.config.get("table.tableCellProperties.defaultProperties"));enableProperty$1(o.model.schema,o.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:n.width}),o.commands.add("tableCellWidth",new TableCellWidthCommand(o,n.width))}}class TableCellPaddingCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellPadding",n)}_getAttribute(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}_getValueToSet(o){const n=addDefaultUnitToNumericValue(o,"px");if(n!==this._defaultValue)return n}}class TableCellHeightCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellHeight",n)}_getValueToSet(o){const n=addDefaultUnitToNumericValue(o,"px");if(n!==this._defaultValue)return n}}class TableCellBackgroundColorCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellBackgroundColor",n)}}class TableCellVerticalAlignmentCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellVerticalAlignment",n)}}class TableCellHorizontalAlignmentCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellHorizontalAlignment",n)}}class TableCellBorderStyleCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellBorderStyle",n)}_getAttribute(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableCellBorderColorCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellBorderColor",n)}_getAttribute(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableCellBorderWidthCommand extends TableCellPropertyCommand{constructor(o,n){super(o,"tableCellBorderWidth",n)}_getAttribute(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}_getValueToSet(o){const n=addDefaultUnitToNumericValue(o,"px");if(n!==this._defaultValue)return n}}const VALIGN_VALUES_REG_EXP=/^(top|middle|bottom)$/,ALIGN_VALUES_REG_EXP$1=/^(left|center|right|justify)$/;class TableCellPropertiesEditing extends Plugin{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing,TableCellWidthEditing]}init(){const o=this.editor,n=o.model.schema,a=o.conversion;o.config.define("table.tableCellProperties.defaultProperties",{});const l=getNormalizedDefaultCellProperties(o.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:o.locale.contentLanguageDirection==="rtl"});o.data.addStyleProcessorRules(addBorderRules),enableBorderProperties$1(n,a,{color:l.borderColor,style:l.borderStyle,width:l.borderWidth}),o.commands.add("tableCellBorderStyle",new TableCellBorderStyleCommand(o,l.borderStyle)),o.commands.add("tableCellBorderColor",new TableCellBorderColorCommand(o,l.borderColor)),o.commands.add("tableCellBorderWidth",new TableCellBorderWidthCommand(o,l.borderWidth)),enableProperty$1(n,a,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:l.height}),o.commands.add("tableCellHeight",new TableCellHeightCommand(o,l.height)),o.data.addStyleProcessorRules(addPaddingRules),enableProperty$1(n,a,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:l.padding}),o.commands.add("tableCellPadding",new TableCellPaddingCommand(o,l.padding)),o.data.addStyleProcessorRules(addBackgroundRules),enableProperty$1(n,a,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:l.backgroundColor}),o.commands.add("tableCellBackgroundColor",new TableCellBackgroundColorCommand(o,l.backgroundColor)),enableHorizontalAlignmentProperty(n,a,l.horizontalAlignment),o.commands.add("tableCellHorizontalAlignment",new TableCellHorizontalAlignmentCommand(o,l.horizontalAlignment)),enableVerticalAlignmentProperty(n,a,l.verticalAlignment),o.commands.add("tableCellVerticalAlignment",new TableCellVerticalAlignmentCommand(o,l.verticalAlignment))}}function enableBorderProperties$1(s,o,n){const a={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};s.extend("tableCell",{allowAttributes:Object.values(a)}),upcastBorderStyles(o,"td",a,n),upcastBorderStyles(o,"th",a,n),downcastAttributeToStyle(o,{modelElement:"tableCell",modelAttribute:a.style,styleName:"border-style"}),downcastAttributeToStyle(o,{modelElement:"tableCell",modelAttribute:a.color,styleName:"border-color"}),downcastAttributeToStyle(o,{modelElement:"tableCell",modelAttribute:a.width,styleName:"border-width"})}function enableHorizontalAlignmentProperty(s,o,n){s.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),o.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:a=>({key:"style",value:{"text-align":a}})}),o.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:a=>{const l=a.getStyle("text-align");return l===n?null:l}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:a=>{const l=a.getAttribute("align");return l===n?null:l}}})}function enableVerticalAlignmentProperty(s,o,n){s.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),o.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:a=>({key:"style",value:{"vertical-align":a}})}),o.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:a=>{const l=a.getStyle("vertical-align");return l===n?null:l}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:a=>{const l=a.getAttribute("valign");return l===n?null:l}}})}class TableCellProperties extends Plugin{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TableCellPropertiesEditing,TableCellPropertiesUI]}}class TablePropertyCommand extends Command{constructor(n,a,l){super(n);E(this,"attributeName");E(this,"_defaultValue");this.attributeName=a,this._defaultValue=l}refresh(){const a=this.editor.model.document.selection,l=getSelectionAffectedTable(a);this.isEnabled=!!l,this.value=this._getValue(l)}execute(n={}){const a=this.editor.model,l=a.document.selection,{value:c,batch:u}=n,d=getSelectionAffectedTable(l),h=this._getValueToSet(c);a.enqueueChange(u,f=>{h?f.setAttribute(this.attributeName,h,d):f.removeAttribute(this.attributeName,d)})}_getValue(n){if(!n)return;const a=n.getAttribute(this.attributeName);if(a!==this._defaultValue)return a}_getValueToSet(n){if(n!==this._defaultValue)return n}}class TableBackgroundColorCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableBackgroundColor",n)}}class TableBorderColorCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableBorderColor",n)}_getValue(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableBorderStyleCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableBorderStyle",n)}_getValue(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableBorderWidthCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableBorderWidth",n)}_getValue(o){if(!o)return;const n=getSingleValue(o.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}_getValueToSet(o){const n=addDefaultUnitToNumericValue(o,"px");if(n!==this._defaultValue)return n}}class TableWidthCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableWidth",n)}_getValueToSet(o){if(o=addDefaultUnitToNumericValue(o,"px"),o!==this._defaultValue)return o}}class TableHeightCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableHeight",n)}_getValueToSet(o){if(o=addDefaultUnitToNumericValue(o,"px"),o!==this._defaultValue)return o}}class TableAlignmentCommand extends TablePropertyCommand{constructor(o,n){super(o,"tableAlignment",n)}}const ALIGN_VALUES_REG_EXP=/^(left|center|right)$/,FLOAT_VALUES_REG_EXP=/^(left|none|right)$/;class TablePropertiesEditing extends Plugin{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const o=this.editor,n=o.model.schema,a=o.conversion;o.config.define("table.tableProperties.defaultProperties",{});const l=getNormalizedDefaultTableProperties(o.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});o.data.addStyleProcessorRules(addBorderRules),enableBorderProperties(n,a,{color:l.borderColor,style:l.borderStyle,width:l.borderWidth}),o.commands.add("tableBorderColor",new TableBorderColorCommand(o,l.borderColor)),o.commands.add("tableBorderStyle",new TableBorderStyleCommand(o,l.borderStyle)),o.commands.add("tableBorderWidth",new TableBorderWidthCommand(o,l.borderWidth)),enableAlignmentProperty(n,a,l.alignment),o.commands.add("tableAlignment",new TableAlignmentCommand(o,l.alignment)),enableTableToFigureProperty(n,a,{modelAttribute:"tableWidth",styleName:"width",defaultValue:l.width}),o.commands.add("tableWidth",new TableWidthCommand(o,l.width)),enableTableToFigureProperty(n,a,{modelAttribute:"tableHeight",styleName:"height",defaultValue:l.height}),o.commands.add("tableHeight",new TableHeightCommand(o,l.height)),o.data.addStyleProcessorRules(addBackgroundRules),enableProperty(n,a,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:l.backgroundColor}),o.commands.add("tableBackgroundColor",new TableBackgroundColorCommand(o,l.backgroundColor))}}function enableBorderProperties(s,o,n){const a={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};s.extend("table",{allowAttributes:Object.values(a)}),upcastBorderStyles(o,"table",a,n),downcastTableAttribute(o,{modelAttribute:a.color,styleName:"border-color"}),downcastTableAttribute(o,{modelAttribute:a.style,styleName:"border-style"}),downcastTableAttribute(o,{modelAttribute:a.width,styleName:"border-width"})}function enableAlignmentProperty(s,o,n){s.extend("table",{allowAttributes:["tableAlignment"]}),o.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:a=>({key:"style",value:{float:a==="center"?"none":a}}),converterPriority:"high"}),o.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:FLOAT_VALUES_REG_EXP}},model:{key:"tableAlignment",value:a=>{let l=a.getStyle("float");return l==="none"&&(l="center"),l===n?null:l}}}).attributeToAttribute({view:{attributes:{align:ALIGN_VALUES_REG_EXP}},model:{name:"table",key:"tableAlignment",value:a=>{const l=a.getAttribute("align");return l===n?null:l}}})}function enableProperty(s,o,n){const{modelAttribute:a}=n;s.extend("table",{allowAttributes:[a]}),upcastStyleToAttribute(o,{viewElement:"table",...n}),downcastTableAttribute(o,n)}function enableTableToFigureProperty(s,o,n){const{modelAttribute:a}=n;s.extend("table",{allowAttributes:[a]}),upcastStyleToAttribute(o,{viewElement:/^(table|figure)$/,shouldUpcast:l=>!(l.name=="table"&&l.parent.name=="figure"),...n}),downcastAttributeToStyle(o,{modelElement:"table",...n})}class TablePropertiesView extends View$1{constructor(n,a){super(n);E(this,"options");E(this,"focusTracker");E(this,"keystrokes");E(this,"children");E(this,"borderStyleDropdown");E(this,"borderWidthInput");E(this,"borderColorInput");E(this,"backgroundInput");E(this,"widthInput");E(this,"heightInput");E(this,"alignmentToolbar");E(this,"saveButtonView");E(this,"cancelButtonView");E(this,"_focusables");E(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=a;const{borderStyleDropdown:l,borderWidthInput:c,borderColorInput:u,borderRowLabel:d}=this._createBorderFields(),{backgroundRowLabel:h,backgroundInput:f}=this._createBackgroundFields(),{widthInput:g,operatorLabel:p,heightInput:v,dimensionsLabel:b}=this._createDimensionFields(),{alignmentToolbar:_,alignmentLabel:w}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=l,this.borderWidthInput=c,this.borderColorInput=u,this.backgroundInput=f,this.widthInput=g,this.heightInput=v,this.alignmentToolbar=_;const{saveButtonView:x,cancelButtonView:S}=this._createActionButtons();this.saveButtonView=x,this.cancelButtonView=S,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(n,{label:this.t("Table properties")})),this.children.add(new FormRowView(n,{labelView:d,children:[d,l,u,c],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(n,{labelView:h,children:[h,f],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(n,{children:[new FormRowView(n,{labelView:b,children:[b,g,p,v],class:"ck-table-form__dimensions-row"}),new FormRowView(n,{labelView:w,children:[w,_],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new FormRowView(n,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(n=>{this._focusCycler.chain(n.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const n=this.options.defaultTableProperties,a={style:n.borderStyle,width:n.borderWidth,color:n.borderColor},l=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:a.color,colorPickerConfig:this.options.colorPickerConfig}),c=this.locale,u=this.t,d=u("Style"),h=new LabelView(c);h.text=u("Border");const f=getBorderStyleLabels(u),g=new LabeledFieldView(c,createLabeledDropdown);g.set({label:d,class:"ck-table-form__border-style"}),g.fieldView.buttonView.set({ariaLabel:d,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:d}),g.fieldView.buttonView.bind("label").to(this,"borderStyle",b=>f[b||"none"]),g.fieldView.on("execute",b=>{this.borderStyle=b.source._borderStyleValue}),g.bind("isEmpty").to(this,"borderStyle",b=>!b),addListToDropdown(g.fieldView,getBorderStyleDefinitions(this,a.style),{role:"menu",ariaLabel:d});const p=new LabeledFieldView(c,createLabeledInputText);p.set({label:u("Width"),class:"ck-table-form__border-width"}),p.fieldView.bind("value").to(this,"borderWidth"),p.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),p.fieldView.on("input",()=>{this.borderWidth=p.fieldView.element.value});const v=new LabeledFieldView(c,l);return v.set({label:u("Color"),class:"ck-table-form__border-color"}),v.fieldView.bind("value").to(this,"borderColor"),v.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),v.fieldView.on("input",()=>{this.borderColor=v.fieldView.value}),this.on("change:borderStyle",(b,_,w,x)=>{isBorderStyleSet(w)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet(x)||(this.borderColor=a.color,this.borderWidth=a.width)}),{borderRowLabel:h,borderStyleDropdown:g,borderColorInput:v,borderWidthInput:p}}_createBackgroundFields(){const n=this.locale,a=this.t,l=new LabelView(n);l.text=a("Background");const c=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),u=new LabeledFieldView(n,c);return u.set({label:a("Color"),class:"ck-table-properties-form__background"}),u.fieldView.bind("value").to(this,"backgroundColor"),u.fieldView.on("input",()=>{this.backgroundColor=u.fieldView.value}),{backgroundRowLabel:l,backgroundInput:u}}_createDimensionFields(){const n=this.locale,a=this.t,l=new LabelView(n);l.text=a("Dimensions");const c=new LabeledFieldView(n,createLabeledInputText);c.set({label:a("Width"),class:"ck-table-form__dimensions-row__width"}),c.fieldView.bind("value").to(this,"width"),c.fieldView.on("input",()=>{this.width=c.fieldView.element.value});const u=new View$1(n);u.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const d=new LabeledFieldView(n,createLabeledInputText);return d.set({label:a("Height"),class:"ck-table-form__dimensions-row__height"}),d.fieldView.bind("value").to(this,"height"),d.fieldView.on("input",()=>{this.height=d.fieldView.element.value}),{dimensionsLabel:l,widthInput:c,operatorLabel:u,heightInput:d}}_createAlignmentFields(){const n=this.locale,a=this.t,l=new LabelView(n);l.text=a("Alignment");const c=new ToolbarView(n);return c.set({role:"radiogroup",isCompact:!0,ariaLabel:a("Table alignment toolbar")}),fillToolbar({view:this,icons:{left:icons.objectLeft,center:icons.objectCenter,right:icons.objectRight},toolbar:c,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:l,alignmentToolbar:c}}_createActionButtons(){const n=this.locale,a=this.t,l=new ButtonView(n),c=new ButtonView(n),u=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return l.set({label:a("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),l.bind("isEnabled").toMany(u,"errorText",(...d)=>d.every(h=>!h)),c.set({label:a("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),c.delegate("execute").to(this,"cancel"),{saveButtonView:l,cancelButtonView:c}}get _alignmentLabels(){const n=this.locale,a=this.t,l=a("Align table to the left"),c=a("Center table"),u=a("Align table to the right");return n.uiLanguageDirection==="rtl"?{right:u,center:c,left:l}:{left:l,center:c,right:u}}}function isBorderStyleSet(s){return s!=="none"}var tableProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const ERROR_TEXT_TIMEOUT=500,propertyToCommandMap={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class TablePropertiesUI extends Plugin{constructor(n){super(n);E(this,"_defaultTableProperties");E(this,"_balloon");E(this,"view",null);E(this,"_undoStepBatch");E(this,"_isReady");n.config.define("table.tableProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.t;this._defaultTableProperties=getNormalizedDefaultTableProperties(n.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=n.plugins.get(ContextualBalloon),n.ui.componentFactory.add("tableProperties",l=>{const c=new ButtonView(l);c.set({label:a("Table properties"),icon:tableProperties,tooltip:!0}),this.listenTo(c,"execute",()=>this._showView());const u=Object.values(propertyToCommandMap).map(d=>n.commands.get(d));return c.bind("isEnabled").toMany(u,"isEnabled",(...d)=>d.some(h=>h)),c})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const n=this.editor,a=n.config.get("table.tableProperties"),l=normalizeColorOptions(a.borderColors),c=getLocalizedColorOptions(n.locale,l),u=normalizeColorOptions(a.backgroundColors),d=getLocalizedColorOptions(n.locale,u),h=a.colorPicker!==!1,f=new TablePropertiesView(n.locale,{borderColors:c,backgroundColors:d,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:h?a.colorPicker||{}:!1}),g=n.t;f.render(),this.listenTo(f,"submit",()=>{this._hideView()}),this.listenTo(f,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),f.keystrokes.set("Esc",(b,_)=>{this._hideView(),_()}),clickOutsideHandler({emitter:f,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const p=getLocalizedColorErrorText(g),v=getLocalizedLengthErrorText(g);return f.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),f.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:f.borderColorInput,commandName:"tableBorderColor",errorText:p,validator:colorFieldValidator})),f.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:f.borderWidthInput,commandName:"tableBorderWidth",errorText:v,validator:lineWidthFieldValidator})),f.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:f.backgroundInput,commandName:"tableBackgroundColor",errorText:p,validator:colorFieldValidator})),f.on("change:width",this._getValidatedPropertyChangeCallback({viewField:f.widthInput,commandName:"tableWidth",errorText:v,validator:lengthFieldValidator})),f.on("change:height",this._getValidatedPropertyChangeCallback({viewField:f.heightInput,commandName:"tableHeight",errorText:v,validator:lengthFieldValidator})),f.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),f}_fillViewFormFromCommandValues(){const n=this.editor.commands,a=n.get("tableBorderStyle");Object.entries(propertyToCommandMap).map(([l,c])=>{const u=l,d=this._defaultTableProperties[u]||"";return[u,n.get(c).value||d]}).forEach(([l,c])=>{(l==="borderColor"||l==="borderWidth")&&a.value==="none"||this.view.set(l,c)}),this._isReady=!0}_showView(){const n=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(n.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonTablePositionData(n)}),this._undoStepBatch=n.model.createBatch(),this.view.focus()}_hideView(){const n=this.editor;this.stopListening(n.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const n=this.editor,a=n.editing.view.document;getSelectionAffectedTableWidget(a.selection)?this._isViewVisible&&repositionContextualBalloon(n,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(n){return(a,l,c)=>{this._isReady&&this.editor.execute(n,{value:c,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(n){const{commandName:a,viewField:l,validator:c,errorText:u}=n,d=debounce$1(()=>{l.errorText=u},ERROR_TEXT_TIMEOUT);return(h,f,g)=>{d.cancel(),this._isReady&&(c(g)?(this.editor.execute(a,{value:g,batch:this._undoStepBatch}),l.errorText=null):d())}}}class TableProperties extends Plugin{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TablePropertiesEditing,TablePropertiesUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function injectTableCaptionPostFixer(s){s.document.registerPostFixer(o=>tableCaptionPostFixer(o,s))}function tableCaptionPostFixer(s,o){const n=o.document.differ.getChanges();let a=!1;for(const l of n){if(l.type!="insert")continue;const c=l.position.parent;if(c.is("element","table")||l.name=="table"){const u=l.name=="table"?l.position.nodeAfter:c,d=Array.from(u.getChildren()).filter(f=>f.is("element","caption")),h=d.shift();if(!h)continue;for(const f of d)s.move(s.createRangeIn(f),h,"end"),s.remove(f);h.nextSibling&&(s.move(s.createRangeOn(h),u,"end"),a=!0),a=!!d.length||a}}return a}function isTable(s){return!!s&&s.is("element","table")}function getCaptionFromTableModelElement(s){for(const o of s.getChildren())if(o.is("element","caption"))return o;return null}function getCaptionFromModelSelection(s){const o=getSelectionAffectedTable(s);return o?getCaptionFromTableModelElement(o):null}function matchTableCaptionViewElement(s){const o=s.parent;return s.name=="figcaption"&&o&&o.is("element","figure")&&o.hasClass("table")?{name:!0}:s.name=="caption"&&o&&o.is("element","table")?{name:!0}:null}class ToggleTableCaptionCommand extends Command{refresh(){const o=this.editor,n=getSelectionAffectedTable(o.model.document.selection);this.isEnabled=!!n,this.isEnabled?this.value=!!getCaptionFromTableModelElement(n):this.value=!1}execute({focusCaptionOnShow:o=!1}={}){this.editor.model.change(n=>{this.value?this._hideTableCaption(n):this._showTableCaption(n,o)})}_showTableCaption(o,n){const a=this.editor.model,l=getSelectionAffectedTable(a.document.selection),d=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(l)||o.createElement("caption");a.insertContent(d,l,"end"),n&&o.setSelection(d,"in")}_hideTableCaption(o){const n=this.editor.model,a=getSelectionAffectedTable(n.document.selection),l=this.editor.plugins.get("TableCaptionEditing"),c=getCaptionFromTableModelElement(a);l._saveCaption(a,c),n.deleteContent(o.createSelection(c,"on"))}}class TableCaptionEditing extends Plugin{constructor(n){super(n);E(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,a=n.model.schema,l=n.editing.view,c=n.t;a.isRegistered("caption")?a.extend("caption",{allowIn:"table"}):a.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),n.commands.add("toggleTableCaption",new ToggleTableCaptionCommand(this.editor)),n.conversion.for("upcast").elementToElement({view:matchTableCaptionViewElement,model:"caption"}),n.conversion.for("dataDowncast").elementToElement({model:"caption",view:(u,{writer:d})=>isTable(u.parent)?d.createContainerElement("figcaption"):null}),n.conversion.for("editingDowncast").elementToElement({model:"caption",view:(u,{writer:d})=>{if(!isTable(u.parent))return null;const h=d.createEditableElement("figcaption");return d.setCustomProperty("tableCaption",!0,h),h.placeholder=c("Enter table caption"),enablePlaceholder({view:l,element:h,keepOnFocus:!0}),toWidgetEditable(h,d)}}),injectTableCaptionPostFixer(n.model)}_getSavedCaption(n){const a=this._savedCaptionsMap.get(n);return a?Element$2.fromJSON(a):null}_saveCaption(n,a){this._savedCaptionsMap.set(n,a.toJSON())}}class TableCaptionUI extends Plugin{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const o=this.editor,n=o.editing.view,a=o.t;o.ui.componentFactory.add("toggleTableCaption",l=>{const c=o.commands.get("toggleTableCaption"),u=new ButtonView(l);return u.set({icon:icons.caption,tooltip:!0,isToggleable:!0}),u.bind("isOn","isEnabled").to(c,"value","isEnabled"),u.bind("label").to(c,"value",d=>a(d?"Toggle caption off":"Toggle caption on")),this.listenTo(u,"execute",()=>{if(o.execute("toggleTableCaption",{focusCaptionOnShow:!0}),c.value){const d=getCaptionFromModelSelection(o.model.document.selection),h=o.editing.mapper.toViewElement(d);if(!h)return;n.scrollToTheSelection(),n.change(f=>{f.addClass("table__caption_highlighted",h)})}o.editing.view.focus()}),u})}}class TableCaption extends Plugin{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[TableCaptionEditing,TableCaptionUI]}}class TableWidthsCommand extends Command{refresh(){this.isEnabled=!0}execute(o={}){const{model:n,plugins:a}=this.editor;let{table:l=n.document.selection.getSelectedElement(),columnWidths:c,tableWidth:u}=o;c&&(c=Array.isArray(c)?c:c.split(",")),n.change(d=>{u?d.setAttribute("tableWidth",u,l):d.removeAttribute("tableWidth",l);const h=a.get("TableColumnResizeEditing").getColumnGroupElement(l);if(!c&&!h)return;if(!c)return d.remove(h);const f=normalizeColumnWidths(c);if(h)Array.from(h.getChildren()).forEach((g,p)=>d.setAttribute("columnWidth",f[p],g));else{const g=d.createElement("tableColumnGroup");f.forEach(p=>d.appendElement("tableColumn",{columnWidth:p},g)),d.append(g,l)}})}}function upcastColgroupElement(s){return o=>o.on("element:colgroup",(n,a,l)=>{const c=a.modelCursor.findAncestor("table"),u=getColumnGroupElement(c);if(!u)return;const d=getTableColumnElements(u),h=s.getColumns(c);let f=translateColSpanAttribute(u,l.writer);f=Array.from({length:h},(g,p)=>f[p]||"auto"),(f.length!=d.length||f.includes("auto"))&&updateColumnElements(d,u,normalizeColumnWidths(f),l.writer)},{priority:"low"})}function downcastTableResizedClass(){return s=>s.on("insert:table",(o,n,a)=>{const l=a.writer,c=n.item,u=a.mapper.toViewElement(c),d=u.is("element","table")?u:Array.from(u.getChildren()).find(f=>f.is("element","table"));getColumnGroupElement(c)?l.addClass("ck-table-resized",d):l.removeClass("ck-table-resized",d)},{priority:"low"})}class TableColumnResizeEditing extends Plugin{constructor(n){super(n);E(this,"_isResizingActive");E(this,"_resizingData");E(this,"_domEmitter");E(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(DomEmitterMixin()),this._tableUtilsPlugin=n.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(a,l,c)=>{const u=c?"removeClass":"addClass";n.editing.view.change(d=>{for(const h of n.editing.view.document.roots)d[u]("ck-column-resize_disabled",n.editing.view.document.getRoot(h.rootName))})})}static get requires(){return[TableEditing,TableUtils]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const n=this.editor,a=n.plugins.get("TableColumnResize");n.plugins.get("TableEditing").registerAdditionalSlot({filter:u=>u.is("element","tableColumnGroup"),positionOffset:0});const c=new TableWidthsCommand(n);n.commands.add("resizeTableWidth",c),n.commands.add("resizeColumnWidths",c),this.bind("_isResizingAllowed").to(n,"isReadOnly",a,"isEnabled",c,"isEnabled",(u,d,h)=>!u&&d&&h)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(n){return getColumnGroupElement(n)}getTableColumnElements(n){return getTableColumnElements(n)}getTableColumnsWidths(n){return getTableColumnsWidths(n)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const a=this.editor.model;a.document.registerPostFixer(u=>{let d=!1;for(const h of getChangedResizedTables(a)){const f=this.getColumnGroupElement(h),g=this.getTableColumnElements(f),p=this.getTableColumnsWidths(f);let v=normalizeColumnWidths(p);v=l(v,h,this),!isEqual$1(p,v)&&(updateColumnElements(g,f,v,u),d=!0)}return d});function l(u,d,h){const f=h._tableUtilsPlugin.getColumns(d);if(f-u.length===0)return u;const p=u.map(b=>Number(b.replace("%",""))),v=c(h.editor.model.document.differ,d);for(const b of v){const _=f-p.length;if(_===0)continue;const w=_>0,x=h._tableUtilsPlugin.getCellLocation(b).column;if(w){const S=getColumnMinWidthAsPercentage(d,h.editor),C=createFilledArray(_,S);p.splice(x,0,...C)}else{const S=p.splice(x,Math.abs(_));p[x]+=sumArray(S)}}return p.map(b=>b+"%")}function c(u,d){const h=new Set;for(const f of u.getChanges())if(f.type=="insert"&&f.position.nodeAfter&&f.position.nodeAfter.name=="tableCell"&&f.position.nodeAfter.getAncestors().includes(d))h.add(f.position.nodeAfter);else if(f.type=="remove"){const g=f.position.nodeBefore||f.position.nodeAfter;g.name=="tableCell"&&g.getAncestors().includes(d)&&h.add(g)}return h}}_registerConverters(){const a=this.editor.conversion;a.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:l=>l.getStyle("width")}}),a.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:l=>({name:"figure",key:"style",value:{width:l}})}),a.elementToElement({model:"tableColumnGroup",view:"colgroup"}),a.elementToElement({model:"tableColumn",view:"col"}),a.for("downcast").add(downcastTableResizedClass()),a.for("upcast").add(upcastColgroupElement(this._tableUtilsPlugin)),a.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:l=>{const c=l.getStyle("width");return!c||!c.endsWith("%")&&!c.endsWith("pt")?"auto":c}}}),a.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),a.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:l=>({key:"style",value:{width:l}})})}_registerResizingListeners(){const n=this.editor.editing.view;n.addObserver(MouseEventsObserver),n.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(global$1.window.document,"mousemove",throttle$2(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(global$1.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(n,a){const l=a.target;if(!l.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const c=this.editor,u=c.editing.mapper.toModelElement(l.findAncestor("figure"));if(!c.model.canEditAt(u))return;a.preventDefault(),n.stop();const d=g(u,this._tableUtilsPlugin,c),h=l.findAncestor("table"),f=c.editing.view;Array.from(h.getChildren()).find(b=>b.is("element","colgroup"))||f.change(b=>{p(b,d,h)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(a,d),f.change(b=>v(b,h,this._resizingData));function g(b,_,w){const x=Array(_.getColumns(b)),S=new TableWalker(b);for(const C of S){const T=w.editing.mapper.toViewElement(C.cell),R=w.editing.view.domConverter.mapViewToDom(T),A=getDomCellOuterWidth(R);(!x[C.column]||A<x[C.column])&&(x[C.column]=toPrecision(A))}return x}function p(b,_,w){const x=b.createContainerElement("colgroup");for(let S=0;S<_.length;S++){const C=b.createEmptyElement("col"),T=`${toPrecision(_[S]/sumArray(_)*100)}%`;b.setStyle("width",T,C),b.insert(b.createPositionAt(x,"end"),C)}b.insert(b.createPositionAt(w,0),x)}function v(b,_,w){const x=w.widths.viewFigureWidth/w.widths.viewFigureParentWidth;b.addClass("ck-table-resized",_),b.addClass("ck-table-column-resizer__active",w.elements.viewResizer),b.setStyle("width",`${toPrecision(x*100)}%`,_.findAncestor("figure"))}}_onMouseMoveHandler(n,a){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:l,flags:{isRightEdge:c,isTableCentered:u,isLtrContent:d},elements:{viewFigure:h,viewLeftColumn:f,viewRightColumn:g},widths:{viewFigureParentWidth:p,tableWidth:v,leftColumnWidth:b,rightColumnWidth:_}}=this._resizingData,w=-b+COLUMN_MIN_WIDTH_IN_PIXELS,x=c?p-v:_-COLUMN_MIN_WIDTH_IN_PIXELS,S=(d?1:-1)*(c&&u?2:1),C=clamp$1((a.clientX-l)*S,Math.min(w,0),Math.max(x,0));C!==0&&this.editor.editing.view.change(T=>{const R=toPrecision((b+C)*100/v);if(T.setStyle("width",`${R}%`,f),c){const A=toPrecision((v+C)*100/p);T.setStyle("width",`${A}%`,h)}else{const A=toPrecision((_-C)*100/v);T.setStyle("width",`${A}%`,g)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:n,modelTable:a,viewFigure:l,viewColgroup:c}=this._resizingData.elements,u=this.editor,d=u.editing.view,h=this.getColumnGroupElement(a),f=Array.from(c.getChildren()).filter(x=>x.is("view:element")),g=h?this.getTableColumnsWidths(h):null,p=f.map(x=>x.getStyle("width")),v=!isEqual$1(g,p),b=a.getAttribute("tableWidth"),_=l.getStyle("width"),w=b!==_;(v||w)&&(this._isResizingAllowed?u.execute("resizeTableWidth",{table:a,tableWidth:`${toPrecision(_)}%`,columnWidths:p}):d.change(x=>{if(g)for(const S of f)x.setStyle("width",g.shift(),S);else x.remove(c);w&&(b?x.setStyle("width",b,l):x.removeStyle("width",l)),!g&&!b&&x.removeClass("ck-table-resized",[...l.getChildren()].find(S=>S.name==="table"))})),d.change(x=>{x.removeClass("ck-table-column-resizer__active",n)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(n,a){const l=this.editor,c=n.domEvent.clientX,u=n.target,d=u.findAncestor("td")||u.findAncestor("th"),h=l.editing.mapper.toModelElement(d),f=h.findAncestor("table"),g=getColumnEdgesIndexes(h,this._tableUtilsPlugin).rightEdge,p=this._tableUtilsPlugin.getColumns(f)-1,v=g===p,b=!f.hasAttribute("tableAlignment"),_=l.locale.contentLanguageDirection!=="rtl",w=d.findAncestor("table"),x=w.findAncestor("figure"),S=[...w.getChildren()].find(H=>H.is("element","colgroup")),C=S.getChild(g),T=v?void 0:S.getChild(g+1),R=getElementWidthInPixels(l.editing.view.domConverter.mapViewToDom(x.parent)),A=getElementWidthInPixels(l.editing.view.domConverter.mapViewToDom(x)),M=getTableWidthInPixels(f,l),D=a[g],O=v?void 0:a[g+1];return{columnPosition:c,flags:{isRightEdge:v,isTableCentered:b,isLtrContent:_},elements:{viewResizer:u,modelTable:f,viewFigure:x,viewColgroup:S,viewLeftColumn:C,viewRightColumn:T},widths:{viewFigureParentWidth:R,viewFigureWidth:A,tableWidth:M,leftColumnWidth:D,rightColumnWidth:O}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(n=>{n.on("insert:tableCell",(a,l,c)=>{const u=l.item,d=c.mapper.toViewElement(u),h=c.writer;h.insert(h.createPositionAt(d,"end"),h.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class TableColumnResize extends Plugin{static get requires(){return[TableColumnResizeEditing,TableCellWidthEditing]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelElementToPlainText(s){if(s.is("$text")||s.is("$textProxy"))return s.data;const o=s;let n="",a=null;for(const l of o.getChildren()){const c=modelElementToPlainText(l);a&&a.is("element")&&(n+=`
`),n+=c,a=l}return n}class WordCount extends Plugin{constructor(n){super(n);E(this,"_config");E(this,"_outputView");E(this,"_wordsMatchRegExp");this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=n.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=env$1.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9À-ž]+\S?)+/gu}static get pluginName(){return"WordCount"}static get isOfficialPlugin(){return!0}init(){this.editor.model.document.on("change:data",throttle$2(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(a,l)=>{this._config.onUpdate(l)}),isElement$2(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const n=this.editor,a=n.t,l=n.config.get("wordCount.displayWords"),c=n.config.get("wordCount.displayCharacters"),u=Template.bind(this,this),d=[];return this._outputView||(this._outputView=new View$1,(l||l===void 0)&&(this.bind("_wordsLabel").to(this,"words",h=>a("Words: %0",h)),d.push({tag:"div",children:[{text:[u.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(c||c===void 0)&&(this.bind("_charactersLabel").to(this,"characters",h=>a("Characters: %0",h)),d.push({tag:"div",children:[{text:[u.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:d}),this._outputView.render()),this._outputView.element}_getText(){let n="";for(const a of this.editor.model.document.getRoots())n!==""&&(n+=`
`),n+=modelElementToPlainText(a);return n}_getCharacters(n){return n.replace(/\n/g,"").length}_getWords(n){return(n.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const n=this._getText(),a=this.words=this._getWords(n),l=this.characters=this._getCharacters(n);this.fire("update",{words:a,characters:l})}}const LICENSE_KEY="GPL";function CustomCkEditor5({style:s={},...o}){var h;const n=React.useRef(null),a=React.useRef(null),[l,c]=React.useState(!1),{i18n:u}=useTranslation();React.useEffect(()=>(c(!0),()=>c(!1)),[]);const{editorConfig:d}=React.useMemo(()=>l?{editorConfig:{toolbar:{items:["heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","|","specialCharacters","insertImage","horizontalLine","pageBreak","link","mediaEmbed","insertTable","highlight","htmlEmbed","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[Alignment,Autoformat,AutoImage,AutoLink,Autosave,BalloonToolbar,BlockQuote,Bold,Bookmark,Code,CodeBlock,Essentials,FindAndReplace,FontBackgroundColor,FontColor,FontFamily,FontSize,FullPage,GeneralHtmlSupport,Heading,Highlight,HorizontalLine,HtmlComment,HtmlEmbed,ImageBlock,ImageCaption,ImageInline,ImageInsert,ImageInsertViaUrl,ImageResize,ImageStyle,ImageTextAlternative,ImageToolbar,ImageUpload,Indent,IndentBlock,Italic,Link$1,LinkImage,List,ListProperties,Markdown,MediaEmbed,Mention,PageBreak,Paragraph,PasteFromMarkdownExperimental,PasteFromOffice,PictureEditing,RemoveFormat,ShowBlocks,SourceEditing,SpecialCharacters,SpecialCharactersArrows,SpecialCharactersCurrency,SpecialCharactersEssentials,SpecialCharactersLatin,SpecialCharactersMathematical,SpecialCharactersText,Strikethrough,Style,Subscript,Superscript,Table,TableCaption,TableCellProperties,TableColumnResize,TableProperties,TableToolbar,TextPartLanguage,TextTransformation,TodoList,Underline,WordCount],balloonToolbar:["bold","italic","|","link","insertImage","|","bulletedList","numberedList"],extraPlugins:o.extraPlugins,mediaEmbed:{previewsInData:!0,providers:[{name:"youtube",url:/^https:\/\/www\.youtube\.com\/watch\?v=([\w-]+)/,html:f=>`<div style="position: relative; padding-bottom: 56.25%; height: 0;"><iframe src="https://www.youtube.com/embed/${f[1]}" style="position: absolute; width: 100%; height: 100%; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}]},fontFamily:{options:["Default","Arial","Courier New","Inter","Roboto","Times New Roman","Source Serif 4"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22,24],supportAllValues:!0},fontColor:{columns:6,colors:[{color:"var(--neutral-text-title-color)",label:"title"},{color:"var(--neutral-text-subtitle-color)",label:"subtitle"},{color:"var(--neutral-text-body-color)",label:"body"},{color:"var(--neutral-text-placeholder-color)",label:"placeholder"},{color:"var(--neutral-text-disabled-color)",label:"disabled"},{color:"var(--neutral-text-stable-color)",label:"stable"},{color:"var(--primary-main-color)",label:"primay"},{color:"var(--warning-main-color)",label:"warning"},{color:"var(--success-main-color)",label:"success"},{color:"var(--secondary3-main-color)",label:"secondary3"},{color:"var(--secondary4-main-color)",label:"secondary4"},{color:"var(--secondary5-main-color)",label:"secondary5"},{color:"var(--infor-main-color)",label:"infor"},{color:"var(--error-main-color)",label:"error"}]},fontBackgroundColor:{columns:6,colors:[{color:"var(--neutral-main-background-color)",label:"main"},{color:"var(--neutral-main-reverse-background-color)",label:"main-reverse"},{color:"var(--neutral-absolute-background-color)",label:"absolute"},{color:"var(--neutral-absolute-reverse-background-color)",label:"absolute-reverse"},{color:"var(--primary-background)",label:"primay-bg"},{color:"var(--warning-background)",label:"warning-bg"},{color:"var(--success-background)",label:"success-bg"},{color:"var(--secondary3-background)",label:"secondary3-bg"},{color:"var(--secondary4-background)",label:"secondary4-bg"},{color:"var(--secondary5-background)",label:"secondary5-bg"},{color:"var(--infor-background)",label:"infor-bg"},{color:"var(--error-background)",label:"error-bg"}]},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},htmlSupport:{allow:[{name:/^.*$/,styles:!0,attributes:!0,classes:!0}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},language:"vi",licenseKey:LICENSE_KEY,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},menuBar:{isVisible:o.menuBar},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},...o.customConfig??{},placeholder:o.placeholder}}:{},[l,u.language,o.customConfig]);return jsxRuntimeExports.jsx("div",{id:o.id,ref:n,className:`col editor-container editor-container_classic-editor editor-container_include-style ${o.className??""} ${(h=o.helperText)!=null&&h.length?"helper-text":""}`,"helper-text":o.helperText,style:{"--helper-text-color":o.helperTextColor??"#e14337",...s},children:jsxRuntimeExports.jsx("div",{className:"editor-container__editor",children:jsxRuntimeExports.jsx("div",{ref:a,children:d&&jsxRuntimeExports.jsx(CKEditor,{onReady:o.onReady,onAfterDestroy:o.onAfterDestroy,onFocus:o.onFocus,onChange:o.onChange,onBlur:o.onBlur,editor:ClassicEditor,onError:o.onError,config:d,disabled:o.disabled,data:o.value})})})})}const styles$2={"slider-container":"_slider-container_15o51_1","range-bar":"_range-bar_15o51_21","value-bar":"_value-bar_15o51_41","thumb-dot":"_thumb-dot_15o51_69","tooltip-container":"_tooltip-container_15o51_135","tooltip-message":"_tooltip-message_15o51_149","mark-point":"_mark-point_15o51_167","mark-text":"_mark-text_15o51_189"};function Slider({min:s=0,max:o=100,formatter:n,className:a,rangeBarWidth:l,defaultValue:c,disabled:u,marks:d,onChange:h,onChangeComplete:f,range:g,step:p=1,style:v,tooltip:b}){const[_,w]=React.useState(g?[s,o]:(s+o)/2),x=React.useRef(null),[S,C]=React.useState(null),[T,R]=React.useState(null),A=React.useMemo(()=>b?{onFocus:D=>{R(D.target)},onMouseOver:D=>{R(D.target)},onMouseOut:D=>{document.activeElement!==D.target&&R(null)},onBlur:()=>{var D;(D=x.current)!=null&&D.contains(document.activeElement)||R(null)}}:{},[b,x]),M=React.useDeferredValue(T&&_?{message:T.getAttribute("slider-value")??"",position:"top"}:null);return React.useEffect(()=>{let D=_;const O=j=>{if(!S||!x.current)return;const{left:q,width:Y}=x.current.getBoundingClientRect();if(D=(j.clientX-q)/Y*(o-s)+s,D=Math.round(D/p)*p,g&&Array.isArray(_)){let ee=[..._];S==="min"?ee[0]=Math.max(s,Math.min(D,ee[1]-p)):S==="max"&&(ee[1]=Math.min(o,Math.max(D,ee[0]+p))),w(ee),h&&h(ee)}else!g&&typeof _=="number"&&(D=Math.max(s,Math.min(o,D)),w(D),h&&h(D))},H=()=>{C(null),f&&f(D),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",H)};return S&&(document.addEventListener("mousemove",O),document.addEventListener("mouseup",H)),()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",H)}},[s,o,p,_,g,h,f,S]),React.useEffect(()=>{c!=null&&(typeof c=="number"?(g&&(c>o||c<s?w([s,o]):w([s,c])),w(c)):c[0]>o||c[0]<s||c[1]>o||c[1]<s?w([s,o]):w(c))},[c]),jsxRuntimeExports.jsxs("div",{ref:x,className:`${styles$2["slider-container"]} ${a??"subtitle-3"} ${g?styles$2.range:""}`,style:v?{"--range-width":l,...v}:{"--range-width":l},children:[jsxRuntimeExports.jsx("div",{className:styles$2["range-bar"],children:jsxRuntimeExports.jsx("div",{className:styles$2["value-bar"],style:{marginLeft:g?`${_[0]/(o-s)*100}%`:"none",width:`calc(${(g?_[1]-_[0]:_-s)/(o-s)*100}%)`}})}),b&&M&&T?ReactDOM.createPortal(jsxRuntimeExports.jsx(TooltipElement,{rect:T.getBoundingClientRect(),tooltip:M}),document.body):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),d&&d.map(D=>D.value<s||D.value>o?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$2["mark-point"],style:{left:`${(D.value-s)/(o-s)*100}%`}}),jsxRuntimeExports.jsx(Text$2,{className:`${styles$2["mark-text"]}`,style:{left:`${(D.value-s)/(o-s)*100}%`},children:D.label??(n?n(D.value):D.value)})]})),g?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",disabled:u,className:styles$2["thumb-dot"],...A,"slider-value":n?n(_[0]):_[0],onPointerDown:u?void 0:()=>{C("min")},style:{left:`${(_[0]-s)/(o-s)*100}%`}}),jsxRuntimeExports.jsx("button",{type:"button",disabled:u,className:styles$2["thumb-dot"],...A,"slider-value":n?n(_[1]):_[1],onPointerDown:u?void 0:()=>{C("max")},style:{left:`${(_[1]-s)/(o-s)*100}%`}})]}):jsxRuntimeExports.jsx("button",{type:"button",disabled:u,className:styles$2["thumb-dot"],...A,"slider-value":n?n(_):_,onPointerDown:u?void 0:()=>{C("single")},style:{left:`${(_-s)/(o-s)*100}%`}})]})}const TooltipElement=({rect:s,tooltip:o})=>{switch(React.useMemo(()=>{if(!s)return null;let a=o.position??"bottom";return document.body.offsetHeight-s.bottom<100&&a==="bottom"?a="top":s.top<100&&a==="top"&&(a="bottom"),document.body.offsetWidth-s.right<100&&a==="right"?a="left":s.left<100&&a==="left"&&(a="right"),a},[s,o.position])){case"top":return jsxRuntimeExports.jsxs("div",{ref:a=>{if(a){const l=a.getBoundingClientRect();l.x<0?(a.style.left=s.x+s.width/2+"px",a.style.transform="translateX(-1.8rem)",a.style.alignItems="start"):l.right>document.body.offsetWidth&&(a.style.left="unset",a.style.right=document.body.offsetWidth-s.right-s.width/2+"px",a.style.transform="translateX(-1.4rem)",a.style.alignItems="end")}},className:`col ${styles$2["tooltip-container"]}`,style:{alignItems:"center",bottom:document.body.offsetHeight-s.top-4,left:s.left+s.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$2["tooltip-message"]}`,maxLine:2,children:o.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderTop:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})})]},o.message);case"bottom":return jsxRuntimeExports.jsxs("div",{ref:a=>{if(a){const l=a.getBoundingClientRect();l.x<0?(a.style.left=s.x+s.width/2+"px",a.style.transform="translateX(-1.8rem)",a.style.alignItems="start"):l.right>document.body.offsetWidth&&(a.style.left="unset",a.style.right=document.body.offsetWidth-s.right-s.width/2+"px",a.style.transform="translateX(-1.4rem)",a.style.alignItems="end")}},className:`col ${styles$2["tooltip-container"]}`,style:{alignItems:"center",top:s.bottom+4,left:s.left+s.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderBottom:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$2["tooltip-message"]}`,maxLine:2,children:o.message})]},o.message);case"left":return jsxRuntimeExports.jsxs("div",{ref:a=>{if(a){const l=a.getBoundingClientRect();l.y<0?(a.style.top=s.y+s.height/2+"px",a.style.transform="translateY(-1.8rem)",a.style.alignItems="start"):l.bottom>document.body.offsetHeight&&(a.style.top="unset",a.style.bottom=document.body.offsetHeight-s.bottom-s.height/2+"px",a.style.transform="translateY(-1.4rem)",a.style.alignItems="end")}},className:`row ${styles$2["tooltip-container"]}`,style:{top:s.top+s.height/2,right:document.body.offsetWidth-s.left-4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$2["tooltip-message"]}`,maxLine:2,children:o.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderLeft:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})})]},o.message);case"right":return jsxRuntimeExports.jsxs("div",{ref:a=>{if(a){const l=a.getBoundingClientRect();l.y<0?(a.style.top=s.y+s.height/2+"px",a.style.transform="translateY(-1.8rem)",a.style.alignItems="start"):l.bottom>document.body.offsetHeight&&(a.style.top="unset",a.style.bottom=document.body.offsetHeight-s.bottom-s.height/2+"px",a.style.transform="translateY(-1.4rem)",a.style.alignItems="end")}},className:`row ${styles$2["tooltip-container"]}`,style:{top:s.top+s.height/2,left:s.right+4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderRight:"0.8rem solid var(--neutral-main-reverse-background-color)",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$2["tooltip-message"]}`,maxLine:2,children:o.message})]},o.message);default:return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}},styles$1={"simple-color-picker":"_simple-color-picker_egriz_1","color-picker-container":"_color-picker-container_egriz_3","helper-text":"_helper-text_egriz_211"};class Util{constructor(){E(this,"dateDefault",new Date("2022-1-1"))}static dateTime_stringToDecimal(o){return new Date(o).getTime()/1e3}static tryParseInt(o){return o!=null&&o!==void 0&&o!==""?parseInt(`${o}`.replaceAll(",","")):0}static tryParseFloat(o){return o!=null&&o!==void 0&&o!==""?parseFloat(`${o}`.replaceAll(",","")):0}static set_timeRefreshToken(){const o=new Date(Date.now());o.setDate(o.getDate()+30),o.setMinutes(o.getMinutes()-10),localStorage.setItem("time_tokenRefresh",`${o}`)}static get_timeRefreshToken(){if(localStorage.getItem("time_tokenRefresh"))return new Date(parseInt(localStorage.getItem("time_tokenRefresh"))).getTime()}static getStringDateNow(){const o=new Date,n=o.getDate().toString().padStart(2,"0"),a=(o.getMonth()+1).toString().padStart(2,"0"),l=o.getFullYear();return`${n} -${a} -${l} `}static money(o){if(o){if(typeof o=="string")return o.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");if(!isNaN(o))return o=o.toFixed(2),o.toString().replace(".00","").replace(/\B(?=(\d{3})+(?!\d))/g,",")}return 0}static moneytmp(o,n){return(o/1).toFixed(n).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static stringToDate(o,n="dd/MM/yyyy",a="/"){let l=n.toLowerCase(),c="",u=o,d="",h=!1;n.trim().indexOf(" ")>-1&&(l=n.trim().split(" ")[0],c=n.trim().split(" ")[1],u=o.trim().split(" ")[0],d=o.trim().split(" ")[1],h=!0);let g=l.toLowerCase().split(a),p=u.split(a),v=g.indexOf("mm"),b=g.indexOf("dd"),_=g.indexOf("yyyy"),w=0,x=0,S=0;if(h){let R=c.split(":"),A=R.indexOf("HH");A<0&&(A=R.indexOf("hh"));let M=R.indexOf("mm"),D=R.indexOf("ss"),O=d.split(":");w=O[A]?parseInt(O[A]):0,x=O[M]?parseInt(O[M]):0,S=O[D]?parseInt(O[D]):0}let C=parseInt(p[v]);return C-=1,new Date(parseInt(p[_]),C,parseInt(p[b]),w,x,S)}static datetoStringDefault(){const o=new Date,n=String(o.getDate()).padStart(2,"0"),a=String(o.getMonth()+1).padStart(2,"0"),l=o.getFullYear();return`${n}/${a}/${l}`}static datetoString(o=new Date,n="dd/mm/yyyy"){let a=n.toLowerCase().split(" "),l=a[0],c=a[1],u=!1;return l.includes("hh")&&(c=a[0],l=a[1],u=!1),l&&(l=l.split(n.includes("/")?"/":"-").map(d=>{switch(d.toLowerCase()){case"dd":return o.getDate()<10?`0${o.getDate()}`:`${o.getDate()}`;case"mm":return o.getMonth()+1<10?`0${o.getMonth()+1}`:`${o.getMonth()+1}`;case"yyyy":return`${o.getFullYear()}`}}).join(n.includes("/")?"/":"-")),c?(c=c.split(":").map(d=>{switch(d){case"hh":return o.getHours()<10?`0${o.getHours()}`:`${o.getHours()}`;case"mm":return o.getMinutes()<10?`0${o.getMinutes()}`:`${o.getMinutes()}`;case"ss":return o.getSeconds()<10?`0${o.getSeconds()}`:`${o.getSeconds()}`}}).join(":"),u?c+(l?` ${l}`:""):l+(c?` ${c}`:"")):l}static setStorage(o,n){localStorage.setItem(o,n)}static clearStorage(){localStorage.clear()}static removeStorage(o){localStorage.removeItem(o)}static setSession(o,n){sessionStorage.setItem(o,n)}static clearSession(){sessionStorage.clear()}static removeSession(o){sessionStorage.removeItem(o)}static setCookie(o,n,a=30){const l=new Date;l.setTime(l.getTime()+a*24*60*60*1e3);let c="expires="+l.toUTCString();document.cookie=o+"="+n+";"+c+";path=/"}static getCookie(o){let n=o+"=",a=document.cookie.split(";");for(let l=0;l<a.length;l++){let c=a[l];for(;c.charAt(0)==" ";)c=c.substring(1);if(c.indexOf(n)==0)return c.substring(n.length,c.length)}return""}static deleteCookie(o){document.cookie=o+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}static clearCookie(o=[]){document.cookie.split(";").forEach(n=>{n.trim().length&&!o.includes(n.split("=")[0].trim())&&this.deleteCookie(n)})}static randomString(o){let n="";const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=a.length;for(let c=0;c<o;c++)n+=a.charAt(Math.floor(Math.random()*l));return n}static decodeJwtResponse(o){var n=o.split(".")[1],a=n.replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(window.atob(a).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(l)}static hexToRGB(o){let n=!1,a=o.slice(o.startsWith("#")?1:0);return a.length===3?a=[...a].map(l=>l+l).join(""):a.length===8&&(n=!0),a=parseInt(a,16),"rgb"+(n?"a":"")+"("+(a>>>(n?24:16))+", "+((a&(n?16711680:65280))>>>(n?16:8))+", "+((a&(n?65280:255))>>>(n?8:0))+(n?`, ${a&255} `:"")+")"}static rgbToHex(o){const n=o.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*(\d*\.?\d+)?\)/);if(!n)throw new Error("Invalid RGB or RGBA format");const a=parseInt(n[1]),l=parseInt(n[2]),c=parseInt(n[3]),u=n[4]!==void 0?parseFloat(n[4]):1,d=Math.max(0,Math.min(255,a)).toString(16).padStart(2,"0"),h=Math.max(0,Math.min(255,l)).toString(16).padStart(2,"0"),f=Math.max(0,Math.min(255,c)).toString(16).padStart(2,"0"),g=Math.max(0,Math.min(1,u))*255,p=Math.round(g).toString(16).padStart(2,"0");return`#${d}${h}${f}${p}`}static colorNameToHex(o){return{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4","indianred ":"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpu:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[o.toLowerCase()]}static prettyJsonToString(o){return JSON.stringify(o,null,6).replace(/\n( *)/g,function(n,a){return"<br>"+"&nbsp;".repeat(a.length)})}static syntaxHighlight(o){return JSON.stringify(o,null,6).replace(/\n( *)/g,function(a,l){var c="number";return/^"/.test(a)?/:$/.test(a)?c="key":c="string":/true|false/.test(a)?c="boolean":/null/.test(a)&&(c="null"),"<br>"+"&nbsp;".repeat(l.length)+'<span className="'+c+'">'+a+"</span>"})}static generateRandomColor(){return`#${Math.floor(Math.random()*16777215).toString(16)}`}static generateLightColorRgb(){return"rgb("+(Math.floor(27*Math.random())+230)+","+(Math.floor(27*Math.random())+230)+","+(Math.floor(27*Math.random())+230)+")"}static generateDarkColorRgb(o){const n=Math.floor((o??Math.random())*256/2),a=Math.floor((o??Math.random())*256/2),l=Math.floor((o??Math.random())*256/2);return"rgb("+n+", "+a+", "+l+")"}static toSlug(o){return o.toString().toLowerCase().replace(/đ/g,"d").replace(/[í|ì|ỉ|ĩ|ị]/g,"i").replace(/[ý|ỳ|ỷ|ỹ|ỵ]/g,"y").replace(/[á|à|ả|ã|ạ|â|ă|ấ|ầ|ẩ|ẫ|ậ|ắ|ằ|ẳ|ẵ|ặ]/g,"a").replace(/[é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ]/g,"e").replace(/[ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự]/g,"u").replace(/[ó|ò|ỏ|õ|ọ|ô|ơ|ố|ồ|ổ|ỗ|ộ|ớ|ờ|ở|ỡ|ợ]/g,"o").replace(/\s+/g," ").replace(/({|}|\(|\)|<|>)/g,"").replaceAll(" ","-")}}E(Util,"dateDefault",new Date("01/01/2021").getTime()),E(Util,"calculateAge",o=>{const n=parse$2(o,"dd/MM/yyyy",new Date);if(isNaN(n.getTime()))return 0;{const a=new Date,l=new Date(a.getFullYear(),n.getMonth(),n.getDate());let c=a.getFullYear()-n.getFullYear();return a<l&&c--,c}}),E(Util,"getStorage",o=>localStorage.getItem(o)),E(Util,"getSession",o=>sessionStorage.getItem(o)),E(Util,"percentToHex",o=>Math.round(o/100*255).toString(16).padStart(2,"0").toUpperCase()),E(Util,"hexToPercent",o=>{const n=parseInt(o,16);return Math.round(n/255*100)}),E(Util,"convertToKebabCase",o=>o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().replace(/[ _]/g,"-"));function formatNumberConvert(s){return s>=1e9?(s/1e9).toFixed(1).replace(/\.0$/,"")+"B":s>=1e6?(s/1e6).toFixed(1).replace(/\.0$/,"")+"M":s>=1e3?(s/1e3).toFixed(1).replace(/\.0$/,"")+"K":s.toString()}function inputMoneyPattern(s){let o=s.target.value.replaceAll(",","").length%3;if(o>0){let n=s.target.value.replaceAll(",","").substring(o).split("");s.target.value=s.target.value.replaceAll(",","").substring(0,o)+n.map((a,l)=>l%3===0?`, ${a} `:a).join("")}else{let n=s.target.value.replaceAll(",","").split("");s.target.value=n.map((a,l)=>l>0&&l%3===0?`, ${a} `:a).join("")}}const randomGID=()=>crypto.randomUUID().replaceAll("-",""),ColorPicker=({style:s={},type:o="input",...n})=>{var l,c;const a=React.useRef(null);switch(React.useEffect(()=>{n.value&&a.current?(a.current.querySelector('input[type="color"]').value=n.value.slice(0,7),o==="input"&&(a.current.querySelector('input[type="text"]').value=n.value.slice(0,7),a.current.querySelector('input[type="number"]').value=Util.hexToPercent(n.value.slice(7)))):a.current&&(a.current.querySelector('input[type="color"]').value="#000000",o==="input"&&(a.current.querySelector('input[type="text"]').value="",a.current.querySelector('input[type="number"]').value=""))},[n.value]),o){case"input":return jsxRuntimeExports.jsxs("div",{id:n.id,ref:a,className:`${n.simpleStyle?styles$1["simple-color-picker"]:styles$1["color-picker-container"]} row ${n.className??(n.simpleStyle?"":"body-3")} ${(l=n.helperText)!=null&&l.length?styles$1["helper-text"]:""}`,"helper-text":n.helperText,style:{"--helper-text-color":n.helperTextColor??"#e14337",...s},children:[jsxRuntimeExports.jsx("label",{style:{backgroundColor:n.value??"#000000"},children:jsxRuntimeExports.jsx("input",{type:"color",disabled:n.disabled,onChange:u=>{var f,g;const d=a.current.querySelector('input[type="number"]'),h=`${u.target.value}${Util.percentToHex(parseInt((f=d.value)!=null&&f.length?d.value:"100")).toLowerCase()}`;(g=n.onChange)==null||g.call(n,h)}})}),jsxRuntimeExports.jsx("input",{maxLength:7,type:"text",placeholder:n.placeholder,readOnly:n.readOnly,disabled:n.disabled,onBlur:u=>{var g,p;const d=u.target.value.replace(/#/g,"").substring(0,6),h=a.current.querySelector('input[type="number"]'),f=`#${d}${Util.percentToHex(parseInt((g=h.value)!=null&&g.length?h.value:"100")).toLowerCase()}`;(p=n.onChange)==null||p.call(n,f)},onKeyDown:u=>{switch(u.key.toLowerCase()){case"enter":u.currentTarget.blur();break}}}),jsxRuntimeExports.jsxs("label",{className:"row",children:[jsxRuntimeExports.jsx("input",{type:"number",placeholder:"opacity",onKeyDown:u=>u.key.toLowerCase()==="enter"&&u.target.blur(),onFocus:u=>u.target.select(),disabled:n.disabled,onBlur:u=>{var g,p;let d=parseInt(u.target.value);isNaN(d)||d>100?d=100:d<0&&(d=0);const f=`${(g=a.current)==null?void 0:g.querySelector('input[type="color"]').value}${Util.percentToHex(d).toLowerCase()}`;(p=n.onChange)==null||p.call(n,f)}}),jsxRuntimeExports.jsx("span",{children:"%"})]})]});default:return jsxRuntimeExports.jsx("label",{id:n.id,ref:a,className:`${n.simpleStyle?styles$1["simple-color-picker"]:styles$1["color-picker-container"]} row ${n.className??(n.simpleStyle?"":"body-3")} ${(c=n.helperText)!=null&&c.length?styles$1["helper-text"]:""}`,"helper-text":n.helperText,style:{"--helper-text-color":n.helperTextColor??"#e14337",...s,aspectRatio:"1 / 1",backgroundColor:n.value??"#000000"},children:jsxRuntimeExports.jsx("input",{type:"color",disabled:n.disabled,onChange:u=>{var d;(d=n.onChange)==null||d.call(n,u.target.value+"ff")}})})}};function bind$2(s,o){return function(){return s.apply(o,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,kindOf=(s=>o=>{const n=toString.call(o);return s[n]||(s[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=s=>(s=s.toLowerCase(),o=>kindOf(o)===s),typeOfTest=s=>o=>typeof o===s,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(s){return s!==null&&!isUndefined(s)&&s.constructor!==null&&!isUndefined(s.constructor)&&isFunction$2(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(s){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(s):o=s&&s.buffer&&isArrayBuffer(s.buffer),o}const isString$3=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$4=s=>s!==null&&typeof s=="object",isBoolean=s=>s===!0||s===!1,isPlainObject=s=>{if(kindOf(s)!=="object")return!1;const o=getPrototypeOf(s);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=s=>isObject$4(s)&&isFunction$2(s.pipe),isFormData=s=>{let o;return s&&(typeof FormData=="function"&&s instanceof FormData||isFunction$2(s.append)&&((o=kindOf(s))==="formdata"||o==="object"&&isFunction$2(s.toString)&&s.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim$2=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(s,o,{allOwnKeys:n=!1}={}){if(s===null||typeof s>"u")return;let a,l;if(typeof s!="object"&&(s=[s]),isArray$2(s))for(a=0,l=s.length;a<l;a++)o.call(null,s[a],a,s);else{const c=n?Object.getOwnPropertyNames(s):Object.keys(s),u=c.length;let d;for(a=0;a<u;a++)d=c[a],o.call(null,s[d],d,s)}}function findKey(s,o){o=o.toLowerCase();const n=Object.keys(s);let a=n.length,l;for(;a-- >0;)if(l=n[a],o===l.toLowerCase())return l;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=s=>!isUndefined(s)&&s!==_global;function merge$1(){const{caseless:s}=isContextDefined(this)&&this||{},o={},n=(a,l)=>{const c=s&&findKey(o,l)||l;isPlainObject(o[c])&&isPlainObject(a)?o[c]=merge$1(o[c],a):isPlainObject(a)?o[c]=merge$1({},a):isArray$2(a)?o[c]=a.slice():o[c]=a};for(let a=0,l=arguments.length;a<l;a++)arguments[a]&&forEach(arguments[a],n);return o}const extend$1=(s,o,n,{allOwnKeys:a}={})=>(forEach(o,(l,c)=>{n&&isFunction$2(l)?s[c]=bind$2(l,n):s[c]=l},{allOwnKeys:a}),s),stripBOM=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),inherits$1=(s,o,n,a)=>{s.prototype=Object.create(o.prototype,a),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:o.prototype}),n&&Object.assign(s.prototype,n)},toFlatObject=(s,o,n,a)=>{let l,c,u;const d={};if(o=o||{},s==null)return o;do{for(l=Object.getOwnPropertyNames(s),c=l.length;c-- >0;)u=l[c],(!a||a(u,s,o))&&!d[u]&&(o[u]=s[u],d[u]=!0);s=n!==!1&&getPrototypeOf(s)}while(s&&(!n||n(s,o))&&s!==Object.prototype);return o},endsWith=(s,o,n)=>{s=String(s),(n===void 0||n>s.length)&&(n=s.length),n-=o.length;const a=s.indexOf(o,n);return a!==-1&&a===n},toArray=s=>{if(!s)return null;if(isArray$2(s))return s;let o=s.length;if(!isNumber$1(o))return null;const n=new Array(o);for(;o-- >0;)n[o]=s[o];return n},isTypedArray$1=(s=>o=>s&&o instanceof s)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(s,o)=>{const a=(s&&s[Symbol.iterator]).call(s);let l;for(;(l=a.next())&&!l.done;){const c=l.value;o.call(s,c[0],c[1])}},matchAll=(s,o)=>{let n;const a=[];for(;(n=s.exec(o))!==null;)a.push(n);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,l){return a.toUpperCase()+l}),hasOwnProperty=(({hasOwnProperty:s})=>(o,n)=>s.call(o,n))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(s,o)=>{const n=Object.getOwnPropertyDescriptors(s),a={};forEach(n,(l,c)=>{let u;(u=o(l,c,s))!==!1&&(a[c]=u||l)}),Object.defineProperties(s,a)},freezeMethods=s=>{reduceDescriptors(s,(o,n)=>{if(isFunction$2(s)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=s[n];if(isFunction$2(a)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(s,o)=>{const n={},a=l=>{l.forEach(c=>{n[c]=!0})};return isArray$2(s)?a(s):a(String(s).split(o)),n},noop$2=()=>{},toFiniteNumber=(s,o)=>s!=null&&Number.isFinite(s=+s)?s:o;function isSpecCompliantForm(s){return!!(s&&isFunction$2(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const toJSONObject=s=>{const o=new Array(10),n=(a,l)=>{if(isObject$4(a)){if(o.indexOf(a)>=0)return;if(!("toJSON"in a)){o[l]=a;const c=isArray$2(a)?[]:{};return forEach(a,(u,d)=>{const h=n(u,l+1);!isUndefined(h)&&(c[d]=h)}),o[l]=void 0,c}}return a};return n(s,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=s=>s&&(isObject$4(s)||isFunction$2(s))&&isFunction$2(s.then)&&isFunction$2(s.catch),_setImmediate=((s,o)=>s?setImmediate:o?((n,a)=>(_global.addEventListener("message",({source:l,data:c})=>{l===_global&&c===n&&a.length&&a.shift()()},!1),l=>{a.push(l),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$2(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$3,isNumber:isNumber$1,isBoolean,isObject:isObject$4,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$1,trim:trim$2,stripBOM,inherits:inherits$1,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(s,o,n,a,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",o&&(this.code=o),n&&(this.config=n),a&&(this.request=a),l&&(this.response=l,this.status=l.status?l.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{descriptors[s]={value:s}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(s,o,n,a,l,c)=>{const u=Object.create(prototype$1);return utils$1.toFlatObject(s,u,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),AxiosError$1.call(u,s.message,o,n,a,l),u.cause=s,u.name=s.name,c&&Object.assign(u,c),u};const httpAdapter=null;function isVisitable(s){return utils$1.isPlainObject(s)||utils$1.isArray(s)}function removeBrackets(s){return utils$1.endsWith(s,"[]")?s.slice(0,-2):s}function renderKey(s,o,n){return s?s.concat(o).map(function(l,c){return l=removeBrackets(l),!n&&c?"["+l+"]":l}).join(n?".":""):o}function isFlatArray(s){return utils$1.isArray(s)&&!s.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(o){return/^is[A-Z]/.test(o)});function toFormData$1(s,o,n){if(!utils$1.isObject(s))throw new TypeError("target must be an object");o=o||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,x){return!utils$1.isUndefined(x[w])});const a=n.metaTokens,l=n.visitor||g,c=n.dots,u=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(o);if(!utils$1.isFunction(l))throw new TypeError("visitor must be a function");function f(_){if(_===null)return"";if(utils$1.isDate(_))return _.toISOString();if(!h&&utils$1.isBlob(_))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(_)||utils$1.isTypedArray(_)?h&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function g(_,w,x){let S=_;if(_&&!x&&typeof _=="object"){if(utils$1.endsWith(w,"{}"))w=a?w:w.slice(0,-2),_=JSON.stringify(_);else if(utils$1.isArray(_)&&isFlatArray(_)||(utils$1.isFileList(_)||utils$1.endsWith(w,"[]"))&&(S=utils$1.toArray(_)))return w=removeBrackets(w),S.forEach(function(T,R){!(utils$1.isUndefined(T)||T===null)&&o.append(u===!0?renderKey([w],R,c):u===null?w:w+"[]",f(T))}),!1}return isVisitable(_)?!0:(o.append(renderKey(x,w,c),f(_)),!1)}const p=[],v=Object.assign(predicates,{defaultVisitor:g,convertValue:f,isVisitable});function b(_,w){if(!utils$1.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(_),utils$1.forEach(_,function(S,C){(!(utils$1.isUndefined(S)||S===null)&&l.call(o,S,utils$1.isString(C)?C.trim():C,w,v))===!0&&b(S,w?w.concat(C):[C])}),p.pop()}}if(!utils$1.isObject(s))throw new TypeError("data must be an object");return b(s),o}function encode$1(s){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(a){return o[a]})}function AxiosURLSearchParams(s,o){this._pairs=[],s&&toFormData$1(s,this,o)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(o,n){this._pairs.push([o,n])};prototype.toString=function(o){const n=o?function(a){return o.call(this,a,encode$1)}:encode$1;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function encode(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(s,o,n){if(!o)return s;const a=n&&n.encode||encode;utils$1.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let c;if(l?c=l(o,n):c=utils$1.isURLSearchParams(o)?o.toString():new AxiosURLSearchParams(o,n).toString(a),c){const u=s.indexOf("#");u!==-1&&(s=s.slice(0,u)),s+=(s.indexOf("?")===-1?"?":"&")+c}return s}class InterceptorManager{constructor(){this.handlers=[]}use(o,n,a){return this.handlers.push({fulfilled:o,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){utils$1.forEach(this.handlers,function(a){a!==null&&o(a)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(s,o){return toFormData$1(s,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(n,a,l,c){return platform$1.isNode&&utils$1.isBuffer(n)?(this.append(a,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},o))}function parsePropPath(s){return utils$1.matchAll(/\w+|\[(\w*)]/g,s).map(o=>o[0]==="[]"?"":o[1]||o[0])}function arrayToObject(s){const o={},n=Object.keys(s);let a;const l=n.length;let c;for(a=0;a<l;a++)c=n[a],o[c]=s[c];return o}function formDataToJSON(s){function o(n,a,l,c){let u=n[c++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),h=c>=n.length;return u=!u&&utils$1.isArray(l)?l.length:u,h?(utils$1.hasOwnProp(l,u)?l[u]=[l[u],a]:l[u]=a,!d):((!l[u]||!utils$1.isObject(l[u]))&&(l[u]=[]),o(n,a,l[u],c)&&utils$1.isArray(l[u])&&(l[u]=arrayToObject(l[u])),!d)}if(utils$1.isFormData(s)&&utils$1.isFunction(s.entries)){const n={};return utils$1.forEachEntry(s,(a,l)=>{o(parsePropPath(a),l,n,0)}),n}return null}function stringifySafely(s,o,n){if(utils$1.isString(s))try{return(o||JSON.parse)(s),utils$1.trim(s)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(s)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(o,n){const a=n.getContentType()||"",l=a.indexOf("application/json")>-1,c=utils$1.isObject(o);if(c&&utils$1.isHTMLForm(o)&&(o=new FormData(o)),utils$1.isFormData(o))return l?JSON.stringify(formDataToJSON(o)):o;if(utils$1.isArrayBuffer(o)||utils$1.isBuffer(o)||utils$1.isStream(o)||utils$1.isFile(o)||utils$1.isBlob(o)||utils$1.isReadableStream(o))return o;if(utils$1.isArrayBufferView(o))return o.buffer;if(utils$1.isURLSearchParams(o))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let d;if(c){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(o,this.formSerializer).toString();if((d=utils$1.isFileList(o))||a.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return toFormData$1(d?{"files[]":o}:o,h&&new h,this.formSerializer)}}return c||l?(n.setContentType("application/json",!1),stringifySafely(o)):o}],transformResponse:[function(o){const n=this.transitional||defaults$1.transitional,a=n&&n.forcedJSONParsing,l=this.responseType==="json";if(utils$1.isResponse(o)||utils$1.isReadableStream(o))return o;if(o&&utils$1.isString(o)&&(a&&!this.responseType||l)){const u=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(o)}catch(d){if(u)throw d.name==="SyntaxError"?AxiosError$1.from(d,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):d}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],s=>{defaults$1.headers[s]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=s=>{const o={};let n,a,l;return s&&s.split(`
`).forEach(function(u){l=u.indexOf(":"),n=u.substring(0,l).trim().toLowerCase(),a=u.substring(l+1).trim(),!(!n||o[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?o[n]?o[n].push(a):o[n]=[a]:o[n]=o[n]?o[n]+", "+a:a)}),o},$internals=Symbol("internals");function normalizeHeader(s){return s&&String(s).trim().toLowerCase()}function normalizeValue(s){return s===!1||s==null?s:utils$1.isArray(s)?s.map(normalizeValue):String(s)}function parseTokens(s){const o=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(s);)o[a[1]]=a[2];return o}const isValidHeaderName=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function matchHeaderValue(s,o,n,a,l){if(utils$1.isFunction(a))return a.call(this,o,n);if(l&&(o=n),!!utils$1.isString(o)){if(utils$1.isString(a))return o.indexOf(a)!==-1;if(utils$1.isRegExp(a))return a.test(o)}}function formatHeader(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,n,a)=>n.toUpperCase()+a)}function buildAccessors(s,o){const n=utils$1.toCamelCase(" "+o);["get","set","has"].forEach(a=>{Object.defineProperty(s,a+n,{value:function(l,c,u){return this[a].call(this,o,l,c,u)},configurable:!0})})}let AxiosHeaders$1=class{constructor(o){o&&this.set(o)}set(o,n,a){const l=this;function c(d,h,f){const g=normalizeHeader(h);if(!g)throw new Error("header name must be a non-empty string");const p=utils$1.findKey(l,g);(!p||l[p]===void 0||f===!0||f===void 0&&l[p]!==!1)&&(l[p||h]=normalizeValue(d))}const u=(d,h)=>utils$1.forEach(d,(f,g)=>c(f,g,h));if(utils$1.isPlainObject(o)||o instanceof this.constructor)u(o,n);else if(utils$1.isString(o)&&(o=o.trim())&&!isValidHeaderName(o))u(parseHeaders(o),n);else if(utils$1.isHeaders(o))for(const[d,h]of o.entries())c(h,d,a);else o!=null&&c(n,o,a);return this}get(o,n){if(o=normalizeHeader(o),o){const a=utils$1.findKey(this,o);if(a){const l=this[a];if(!n)return l;if(n===!0)return parseTokens(l);if(utils$1.isFunction(n))return n.call(this,l,a);if(utils$1.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,n){if(o=normalizeHeader(o),o){const a=utils$1.findKey(this,o);return!!(a&&this[a]!==void 0&&(!n||matchHeaderValue(this,this[a],a,n)))}return!1}delete(o,n){const a=this;let l=!1;function c(u){if(u=normalizeHeader(u),u){const d=utils$1.findKey(a,u);d&&(!n||matchHeaderValue(a,a[d],d,n))&&(delete a[d],l=!0)}}return utils$1.isArray(o)?o.forEach(c):c(o),l}clear(o){const n=Object.keys(this);let a=n.length,l=!1;for(;a--;){const c=n[a];(!o||matchHeaderValue(this,this[c],c,o,!0))&&(delete this[c],l=!0)}return l}normalize(o){const n=this,a={};return utils$1.forEach(this,(l,c)=>{const u=utils$1.findKey(a,c);if(u){n[u]=normalizeValue(l),delete n[c];return}const d=o?formatHeader(c):String(c).trim();d!==c&&delete n[c],n[d]=normalizeValue(l),a[d]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const n=Object.create(null);return utils$1.forEach(this,(a,l)=>{a!=null&&a!==!1&&(n[l]=o&&utils$1.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,n])=>o+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...n){const a=new this(o);return n.forEach(l=>a.set(l)),a}static accessor(o){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,l=this.prototype;function c(u){const d=normalizeHeader(u);a[d]||(buildAccessors(l,u),a[d]=!0)}return utils$1.isArray(o)?o.forEach(c):c(o),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:s},o)=>{let n=o[0].toUpperCase()+o.slice(1);return{get:()=>s,set(a){this[n]=a}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(s,o){const n=this||defaults$1,a=o||n,l=AxiosHeaders$1.from(a.headers);let c=a.data;return utils$1.forEach(s,function(d){c=d.call(n,c,l.normalize(),o?o.status:void 0)}),l.normalize(),c}function isCancel$1(s){return!!(s&&s.__CANCEL__)}function CanceledError$1(s,o,n){AxiosError$1.call(this,s??"canceled",AxiosError$1.ERR_CANCELED,o,n),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(s,o,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?s(n):o(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(s){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return o&&o[1]||""}function speedometer(s,o){s=s||10;const n=new Array(s),a=new Array(s);let l=0,c=0,u;return o=o!==void 0?o:1e3,function(h){const f=Date.now(),g=a[c];u||(u=f),n[l]=h,a[l]=f;let p=c,v=0;for(;p!==l;)v+=n[p++],p=p%s;if(l=(l+1)%s,l===c&&(c=(c+1)%s),f-u<o)return;const b=g&&f-g;return b?Math.round(v*1e3/b):void 0}}function throttle$1(s,o){let n=0,a=1e3/o,l,c;const u=(f,g=Date.now())=>{n=g,l=null,c&&(clearTimeout(c),c=null),s.apply(null,f)};return[(...f)=>{const g=Date.now(),p=g-n;p>=a?u(f,g):(l=f,c||(c=setTimeout(()=>{c=null,u(l)},a-p)))},()=>l&&u(l)]}const progressEventReducer=(s,o,n=3)=>{let a=0;const l=speedometer(50,250);return throttle$1(c=>{const u=c.loaded,d=c.lengthComputable?c.total:void 0,h=u-a,f=l(h),g=u<=d;a=u;const p={loaded:u,total:d,progress:d?u/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&g?(d-u)/f:void 0,event:c,lengthComputable:d!=null,[o?"download":"upload"]:!0};s(p)},n)},progressEventDecorator=(s,o)=>{const n=s!=null;return[a=>o[0]({lengthComputable:n,total:s,loaded:a}),o[1]]},asyncDecorator=s=>(...o)=>utils$1.asap(()=>s(...o)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?((s,o)=>n=>(n=new URL(n,platform$1.origin),s.protocol===n.protocol&&s.host===n.host&&(o||s.port===n.port)))(new URL(platform$1.origin),platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent)):()=>!0,cookies=platform$1.hasStandardBrowserEnv?{write(s,o,n,a,l,c){const u=[s+"="+encodeURIComponent(o)];utils$1.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),utils$1.isString(a)&&u.push("path="+a),utils$1.isString(l)&&u.push("domain="+l),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read(s){const o=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function combineURLs(s,o){return o?s.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):s}function buildFullPath(s,o,n){let a=!isAbsoluteURL(o);return s&&a||n==!1?combineURLs(s,o):o}const headersToObject=s=>s instanceof AxiosHeaders$1?{...s}:s;function mergeConfig$1(s,o){o=o||{};const n={};function a(f,g,p,v){return utils$1.isPlainObject(f)&&utils$1.isPlainObject(g)?utils$1.merge.call({caseless:v},f,g):utils$1.isPlainObject(g)?utils$1.merge({},g):utils$1.isArray(g)?g.slice():g}function l(f,g,p,v){if(utils$1.isUndefined(g)){if(!utils$1.isUndefined(f))return a(void 0,f,p,v)}else return a(f,g,p,v)}function c(f,g){if(!utils$1.isUndefined(g))return a(void 0,g)}function u(f,g){if(utils$1.isUndefined(g)){if(!utils$1.isUndefined(f))return a(void 0,f)}else return a(void 0,g)}function d(f,g,p){if(p in o)return a(f,g);if(p in s)return a(void 0,f)}const h={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(f,g,p)=>l(headersToObject(f),headersToObject(g),p,!0)};return utils$1.forEach(Object.keys(Object.assign({},s,o)),function(g){const p=h[g]||l,v=p(s[g],o[g],g);utils$1.isUndefined(v)&&p!==d||(n[g]=v)}),n}const resolveConfig=s=>{const o=mergeConfig$1({},s);let{data:n,withXSRFToken:a,xsrfHeaderName:l,xsrfCookieName:c,headers:u,auth:d}=o;o.headers=u=AxiosHeaders$1.from(u),o.url=buildURL(buildFullPath(o.baseURL,o.url,o.allowAbsoluteUrls),s.params,s.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(utils$1.isFormData(n)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((h=u.getContentType())!==!1){const[f,...g]=h?h.split(";").map(p=>p.trim()).filter(Boolean):[];u.setContentType([f||"multipart/form-data",...g].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(a&&utils$1.isFunction(a)&&(a=a(o)),a||a!==!1&&isURLSameOrigin(o.url))){const f=l&&c&&cookies.read(c);f&&u.set(l,f)}return o},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(s){return new Promise(function(n,a){const l=resolveConfig(s);let c=l.data;const u=AxiosHeaders$1.from(l.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=l,g,p,v,b,_;function w(){b&&b(),_&&_(),l.cancelToken&&l.cancelToken.unsubscribe(g),l.signal&&l.signal.removeEventListener("abort",g)}let x=new XMLHttpRequest;x.open(l.method.toUpperCase(),l.url,!0),x.timeout=l.timeout;function S(){if(!x)return;const T=AxiosHeaders$1.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),A={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:T,config:s,request:x};settle(function(D){n(D),w()},function(D){a(D),w()},A),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(a(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,s,x)),x=null)},x.onerror=function(){a(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,s,x)),x=null},x.ontimeout=function(){let R=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const A=l.transitional||transitionalDefaults;l.timeoutErrorMessage&&(R=l.timeoutErrorMessage),a(new AxiosError$1(R,A.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,s,x)),x=null},c===void 0&&u.setContentType(null),"setRequestHeader"in x&&utils$1.forEach(u.toJSON(),function(R,A){x.setRequestHeader(A,R)}),utils$1.isUndefined(l.withCredentials)||(x.withCredentials=!!l.withCredentials),d&&d!=="json"&&(x.responseType=l.responseType),f&&([v,_]=progressEventReducer(f,!0),x.addEventListener("progress",v)),h&&x.upload&&([p,b]=progressEventReducer(h),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",b)),(l.cancelToken||l.signal)&&(g=T=>{x&&(a(!T||T.type?new CanceledError$1(null,s,x):T),x.abort(),x=null)},l.cancelToken&&l.cancelToken.subscribe(g),l.signal&&(l.signal.aborted?g():l.signal.addEventListener("abort",g)));const C=parseProtocol(l.url);if(C&&platform$1.protocols.indexOf(C)===-1){a(new AxiosError$1("Unsupported protocol "+C+":",AxiosError$1.ERR_BAD_REQUEST,s));return}x.send(c||null)})},composeSignals=(s,o)=>{const{length:n}=s=s?s.filter(Boolean):[];if(o||n){let a=new AbortController,l;const c=function(f){if(!l){l=!0,d();const g=f instanceof Error?f:this.reason;a.abort(g instanceof AxiosError$1?g:new CanceledError$1(g instanceof Error?g.message:g))}};let u=o&&setTimeout(()=>{u=null,c(new AxiosError$1(`timeout ${o} of ms exceeded`,AxiosError$1.ETIMEDOUT))},o);const d=()=>{s&&(u&&clearTimeout(u),u=null,s.forEach(f=>{f.unsubscribe?f.unsubscribe(c):f.removeEventListener("abort",c)}),s=null)};s.forEach(f=>f.addEventListener("abort",c));const{signal:h}=a;return h.unsubscribe=()=>utils$1.asap(d),h}},streamChunk=function*(s,o){let n=s.byteLength;if(n<o){yield s;return}let a=0,l;for(;a<n;)l=a+o,yield s.slice(a,l),a=l},readBytes=async function*(s,o){for await(const n of readStream(s))yield*streamChunk(n,o)},readStream=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const o=s.getReader();try{for(;;){const{done:n,value:a}=await o.read();if(n)break;yield a}}finally{await o.cancel()}},trackStream=(s,o,n,a)=>{const l=readBytes(s,o);let c=0,u,d=h=>{u||(u=!0,a&&a(h))};return new ReadableStream({async pull(h){try{const{done:f,value:g}=await l.next();if(f){d(),h.close();return}let p=g.byteLength;if(n){let v=c+=p;n(v)}h.enqueue(new Uint8Array(g))}catch(f){throw d(f),f}},cancel(h){return d(h),l.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(s=>o=>s.encode(o))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),test=(s,...o)=>{try{return!!s(...o)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let s=!1;const o=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!o}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(s=>s.body)};isFetchSupported&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(o=>{!resolvers[o]&&(resolvers[o]=utils$1.isFunction(s[o])?n=>n[o]():(n,a)=>{throw new AxiosError$1(`Response type '${o}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,a)})})})(new Response);const getBodyLength=async s=>{if(s==null)return 0;if(utils$1.isBlob(s))return s.size;if(utils$1.isSpecCompliantForm(s))return(await new Request(platform$1.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(s)||utils$1.isArrayBuffer(s))return s.byteLength;if(utils$1.isURLSearchParams(s)&&(s=s+""),utils$1.isString(s))return(await encodeText(s)).byteLength},resolveBodyLength=async(s,o)=>{const n=utils$1.toFiniteNumber(s.getContentLength());return n??getBodyLength(o)},fetchAdapter=isFetchSupported&&(async s=>{let{url:o,method:n,data:a,signal:l,cancelToken:c,timeout:u,onDownloadProgress:d,onUploadProgress:h,responseType:f,headers:g,withCredentials:p="same-origin",fetchOptions:v}=resolveConfig(s);f=f?(f+"").toLowerCase():"text";let b=composeSignals([l,c&&c.toAbortSignal()],u),_;const w=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let x;try{if(h&&supportsRequestStream&&n!=="get"&&n!=="head"&&(x=await resolveBodyLength(g,a))!==0){let A=new Request(o,{method:"POST",body:a,duplex:"half"}),M;if(utils$1.isFormData(a)&&(M=A.headers.get("content-type"))&&g.setContentType(M),A.body){const[D,O]=progressEventDecorator(x,progressEventReducer(asyncDecorator(h)));a=trackStream(A.body,DEFAULT_CHUNK_SIZE,D,O)}}utils$1.isString(p)||(p=p?"include":"omit");const S="credentials"in Request.prototype;_=new Request(o,{...v,signal:b,method:n.toUpperCase(),headers:g.normalize().toJSON(),body:a,duplex:"half",credentials:S?p:void 0});let C=await fetch(_);const T=supportsResponseStream&&(f==="stream"||f==="response");if(supportsResponseStream&&(d||T&&w)){const A={};["status","statusText","headers"].forEach(H=>{A[H]=C[H]});const M=utils$1.toFiniteNumber(C.headers.get("content-length")),[D,O]=d&&progressEventDecorator(M,progressEventReducer(asyncDecorator(d),!0))||[];C=new Response(trackStream(C.body,DEFAULT_CHUNK_SIZE,D,()=>{O&&O(),w&&w()}),A)}f=f||"text";let R=await resolvers[utils$1.findKey(resolvers,f)||"text"](C,s);return!T&&w&&w(),await new Promise((A,M)=>{settle(A,M,{data:R,headers:AxiosHeaders$1.from(C.headers),status:C.status,statusText:C.statusText,config:s,request:_})})}catch(S){throw w&&w(),S&&S.name==="TypeError"&&/fetch/i.test(S.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,s,_),{cause:S.cause||S}):AxiosError$1.from(S,S&&S.code,s,_)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(s,o)=>{if(s){try{Object.defineProperty(s,"name",{value:o})}catch{}Object.defineProperty(s,"adapterName",{value:o})}});const renderReason=s=>`- ${s}`,isResolvedHandle=s=>utils$1.isFunction(s)||s===null||s===!1,adapters={getAdapter:s=>{s=utils$1.isArray(s)?s:[s];const{length:o}=s;let n,a;const l={};for(let c=0;c<o;c++){n=s[c];let u;if(a=n,!isResolvedHandle(n)&&(a=knownAdapters[(u=String(n)).toLowerCase()],a===void 0))throw new AxiosError$1(`Unknown adapter '${u}'`);if(a)break;l[u||"#"+c]=a}if(!a){const c=Object.entries(l).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=o?c.length>1?`since :
`+c.map(renderReason).join(`
`):" "+renderReason(c[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return a},adapters:knownAdapters};function throwIfCancellationRequested(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new CanceledError$1(null,s)}function dispatchRequest(s){return throwIfCancellationRequested(s),s.headers=AxiosHeaders$1.from(s.headers),s.data=transformData.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(s.adapter||defaults$1.adapter)(s).then(function(a){return throwIfCancellationRequested(s),a.data=transformData.call(s,s.transformResponse,a),a.headers=AxiosHeaders$1.from(a.headers),a},function(a){return isCancel$1(a)||(throwIfCancellationRequested(s),a&&a.response&&(a.response.data=transformData.call(s,s.transformResponse,a.response),a.response.headers=AxiosHeaders$1.from(a.response.headers))),Promise.reject(a)})}const VERSION$1="1.8.3",validators$1={};["object","boolean","number","function","string","symbol"].forEach((s,o)=>{validators$1[s]=function(a){return typeof a===s||"a"+(o<1?"n ":" ")+s}});const deprecatedWarnings={};validators$1.transitional=function(o,n,a){function l(c,u){return"[Axios v"+VERSION$1+"] Transitional option '"+c+"'"+u+(a?". "+a:"")}return(c,u,d)=>{if(o===!1)throw new AxiosError$1(l(u," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[u]&&(deprecatedWarnings[u]=!0,console.warn(l(u," has been deprecated since v"+n+" and will be removed in the near future"))),o?o(c,u,d):!0}};validators$1.spelling=function(o){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${o}`),!0)};function assertOptions(s,o,n){if(typeof s!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const a=Object.keys(s);let l=a.length;for(;l-- >0;){const c=a[l],u=o[c];if(u){const d=s[c],h=d===void 0||u(d,c,s);if(h!==!0)throw new AxiosError$1("option "+c+" must be "+h,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+c,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(o){this.defaults=o,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(o,n){try{return await this._request(o,n)}catch(a){if(a instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{a.stack?c&&!String(a.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+c):a.stack=c}catch{}}throw a}}_request(o,n){typeof o=="string"?(n=n||{},n.url=o):n=o||{},n=mergeConfig$1(this.defaults,n);const{transitional:a,paramsSerializer:l,headers:c}=n;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),l!=null&&(utils$1.isFunction(l)?n.paramsSerializer={serialize:l}:validator.assertOptions(l,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=c&&utils$1.merge(c.common,c[n.method]);c&&utils$1.forEach(["delete","get","head","post","put","patch","common"],_=>{delete c[_]}),n.headers=AxiosHeaders$1.concat(u,c);const d=[];let h=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(h=h&&w.synchronous,d.unshift(w.fulfilled,w.rejected))});const f=[];this.interceptors.response.forEach(function(w){f.push(w.fulfilled,w.rejected)});let g,p=0,v;if(!h){const _=[dispatchRequest.bind(this),void 0];for(_.unshift.apply(_,d),_.push.apply(_,f),v=_.length,g=Promise.resolve(n);p<v;)g=g.then(_[p++],_[p++]);return g}v=d.length;let b=n;for(p=0;p<v;){const _=d[p++],w=d[p++];try{b=_(b)}catch(x){w.call(this,x);break}}try{g=dispatchRequest.call(this,b)}catch(_){return Promise.reject(_)}for(p=0,v=f.length;p<v;)g=g.then(f[p++],f[p++]);return g}getUri(o){o=mergeConfig$1(this.defaults,o);const n=buildFullPath(o.baseURL,o.url,o.allowAbsoluteUrls);return buildURL(n,o.params,o.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(o){Axios$1.prototype[o]=function(n,a){return this.request(mergeConfig$1(a||{},{method:o,url:n,data:(a||{}).data}))}});utils$1.forEach(["post","put","patch"],function(o){function n(a){return function(c,u,d){return this.request(mergeConfig$1(d||{},{method:o,headers:a?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}Axios$1.prototype[o]=n(),Axios$1.prototype[o+"Form"]=n(!0)});let CancelToken$1=class gr{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const a=this;this.promise.then(l=>{if(!a._listeners)return;let c=a._listeners.length;for(;c-- >0;)a._listeners[c](l);a._listeners=null}),this.promise.then=l=>{let c;const u=new Promise(d=>{a.subscribe(d),c=d}).then(l);return u.cancel=function(){a.unsubscribe(c)},u},o(function(c,u,d){a.reason||(a.reason=new CanceledError$1(c,u,d),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const n=this._listeners.indexOf(o);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const o=new AbortController,n=a=>{o.abort(a)};return this.subscribe(n),o.signal.unsubscribe=()=>this.unsubscribe(n),o.signal}static source(){let o;return{token:new gr(function(l){o=l}),cancel:o}}};function spread$1(s){return function(n){return s.apply(null,n)}}function isAxiosError$1(s){return utils$1.isObject(s)&&s.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([s,o])=>{HttpStatusCode$1[o]=s});function createInstance(s){const o=new Axios$1(s),n=bind$2(Axios$1.prototype.request,o);return utils$1.extend(n,Axios$1.prototype,o,{allOwnKeys:!0}),utils$1.extend(n,o,null,{allOwnKeys:!0}),n.create=function(l){return createInstance(mergeConfig$1(s,l))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(o){return Promise.all(o)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=s=>formDataToJSON(utils$1.isHTMLForm(s)?new FormData(s):s);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;class ConfigData{}E(ConfigData,"pid",""),E(ConfigData,"url",""),E(ConfigData,"imgUrlId",""),E(ConfigData,"extraPlugins"),E(ConfigData,"onInvalidToken",()=>Util.clearCookie());const getHeaders=async()=>{let s=Util.getCookie("timeRefresh");typeof s=="string"&&(s=parseInt(s));const o=Date.now()/1e3;if(s&&s>0&&s<=o){const n=await fetch(ConfigData.url+"data/refreshToken",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:Util.getCookie("refreshToken")})});if(n.status===200||n.status===201){const a=await n.json();if(a.code===200)return Util.setCookie("accessToken",a.accessToken),Util.setCookie("timeRefresh",Date.now()/1e3+9*60),{refreshToken:Util.getCookie("refreshToken"),Authorization:`Bearer ${Util.getCookie("accessToken")}`,"Content-Type":"application/json"}}ConfigData.onInvalidToken(),window.location.replace("/login")}else if(Util.getCookie("accessToken"))return{Authorization:`Bearer ${Util.getCookie("accessToken")}`,"Content-Type":"application/json"};return{"Content-Type":"application/json"}},imgFileTypes=[".png",".svg",".jpg","jpeg",".webp",".gif"],dt=class dt{};E(dt,"post",async(o,n)=>{try{let a=await getHeaders()??{};n!=null&&n.headers&&(a={...a,...n.headers});const l=await axios.post(o,n==null?void 0:n.body,{headers:a});if(l.status===200||l.status===201)return l.data;if(l.status===204)return{message:"ok",data:n==null?void 0:n.body};if(l.status===401)ToastMessage.errors("Unauthorized access"),window.location.replace("/login");else return console.log("error: ??: ",l.statusText),{status:l.status,message:l.statusText}}catch(a){throw ToastMessage.errors(a==null?void 0:a.toString()),a}}),E(dt,"postFile",async(o,n)=>{try{n!=null&&n.headers&&(n.headers["Content-Type"]="multipart/form-data");const a=await axios.post(o,n==null?void 0:n.body,{headers:(n==null?void 0:n.headers)??{"Content-Type":"multipart/form-data"}});if(a.status===200||a.status===201)return a.data;if(a.status===204)return{message:"ok",data:n==null?void 0:n.body};if(a.status===401)ToastMessage.errors("Unauthorized access"),window.location.replace("/login");else return console.log("error: ??: ",a.statusText),{status:a.status,message:a.statusText}}catch(a){throw console.error("Failed to POST data:",a),a}}),E(dt,"get",async(o,n)=>{try{let a=await getHeaders()??{};n!=null&&n.headers&&(a={...a,...n.headers});const l=await axios.get(o,{headers:a});if(l.status===200||l.status===201)return l.data;if(l.status===204)return{message:"ok"};if(l.status===401)ToastMessage.errors("Unauthorized access"),window.location.replace("/login");else return console.log("error: ??: ",l.statusText),{status:l.status,message:l.statusText}}catch(a){throw console.error("Failed to GET data:",a),a}}),E(dt,"uploadFiles",async o=>{o=[...o];const n={pid:ConfigData.pid},a=new FormData;o.forEach(c=>{a.append("files",c)});const l=await dt.postFile(ConfigData.url+"file/uploadfiles",{headers:n,body:a});return l.code===200?l.data:(ToastMessage.errors(l.message),null)}),E(dt,"getFilesInfor",async o=>{const n={};return await dt.post(ConfigData.url+"file/getFilesInfor",{headers:n,body:{ids:o}})});let BaseDA=dt;class CkEditorUploadAdapter{constructor(o){E(this,"loader");E(this,"xhr");this.loader=o}upload(){return this.loader.file.then(o=>new Promise((n,a)=>{this._initRequest(),this._initListeners(n,a,o),this._sendRequest(o)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const o=this.xhr=new XMLHttpRequest;o.open("POST",ConfigData.url+"file/uploadfiles",!0),o.responseType="json"}_initListeners(o,n,a){const l=this.xhr,c=this.loader,u=`Couldn't upload file: ${a.name}.`;l==null||l.addEventListener("error",()=>n(u)),l==null||l.addEventListener("abort",()=>n()),l==null||l.addEventListener("load",()=>{const d=l.response;if(!d||d.error)return n(d&&d.error?d.error.message:u);o({default:ConfigData.imgUrlId+d.data[0].Id})}),l!=null&&l.upload&&l.upload.addEventListener("progress",d=>{d.lengthComputable&&(c.uploadTotal=d.total,c.uploaded=d.loaded)})}_sendRequest(o){var a;const n=new FormData;n.append("files",o),(a=this.xhr)==null||a.send(n)}}function TextFieldForm(s){var n,a,l,c;const{t:o}=useTranslation();return jsxRuntimeExports.jsxs("div",{id:s.id,className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(TextField,{className:s.textFieldClassName??"body-3",autoFocus:s.autoFocus,style:{width:"100%",flex:(n=s.className)!=null&&n.includes("row")?1:void 0,...s.type==="money"?{...s.textFieldStyle??{},height:"4rem",padding:"0 0 0 1.6rem"}:s.textFieldStyle??{}},placeholder:s.placeholder?s.placeholder:s.label?`${o("input")} ${s.label.toLowerCase()}`:"",suffix:!s.suffix&&s.type==="money"?jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.6rem",height:"100%",background:"var(--neutral-main-background-color)",borderLeft:"var(--neutral-bolder-border)",borderRadius:"0 0.8rem 0.8rem 0"},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",style:{color:"var(--neutral-text-subtitle-color)"},children:"VND"})}):s.suffix,prefix:s.prefix,disabled:s.disabled,readOnly:s.readOnly,type:s.type==="money"?"text":s.type,name:s.name,register:s.methods.register(s.name,{required:s.required,onBlur:s.type==="money"?u=>{let d=u.target.value.trim().replaceAll(",","");u.target.type="text",isNaN(parseFloat(d))?u.target.value="":u.target.value=Util.money(parseFloat(d))}:s.onBlur,onChange:s.onChange}),onFocus:s.type==="money"?u=>{u.target.value=u.target.value.replaceAll(",",""),u.target.type="number"}:s.onFocus,maxLength:s.maxLength,onComplete:u=>{u.target.blur()},helperText:convertErrors(s.methods.formState.errors,s.name)&&((l=(a=convertErrors(s.methods.formState.errors,s.name))==null?void 0:a.message)!=null&&l.length?(c=convertErrors(s.methods.formState.errors,s.name))==null?void 0:c.message:`${o("input")} ${(s.placeholder?s.placeholder:s.label?`${s.label}`:o("value")).toLowerCase()}`)})]})}const InputPasswordForm=s=>{const[o,n]=React.useState(!1);return jsxRuntimeExports.jsx(TextFieldForm,{...s,type:o?"text":"password",suffix:jsxRuntimeExports.jsx(Winicon,{src:`outline/user interface/${o?"view":"hide"}`,size:"1.4rem",onClick:()=>{n(!o)}})})};function TextAreaForm(s){var n,a,l;const{t:o}=useTranslation();return jsxRuntimeExports.jsxs("div",{id:s.id,className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",height:"10rem",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(TextArea,{...s,className:s.textAreaClassName??"body-3",register:s.methods.register(s.name,{required:s.required,onBlur:s.onBlur,onChange:s.onChange}),style:{width:"100%",height:"100%",flex:1,...s.textAreaStyle??{}},placeholder:s.placeholder?s.placeholder:s.label?`${o("input")} ${s.label.toLowerCase()}`:"",helperText:convertErrors(s.methods.formState.errors,s.name)&&((a=(n=convertErrors(s.methods.formState.errors,s.name))==null?void 0:n.message)!=null&&a.length?(l=convertErrors(s.methods.formState.errors,s.name))==null?void 0:l.message:`${o("input")} ${(s.placeholder?s.placeholder:s.label?`${s.label}`:o("value")).toLowerCase()}`)})]})}function DateTimePickerForm(s){const{t:o}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,rules:{required:s.required},render:({field:n})=>{var l,c;const a=convertErrors(s.methods.formState.errors,s.name);return jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(DateTimePicker,{style:{width:"100%",flex:(l=s.className)!=null&&l.includes("row")?1:void 0},className:"body-3",placeholder:s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label.toLowerCase()}`:"",value:n.value,disabled:s.disabled,pickerType:s.type,pickOnly:s.pickOnly,onChange:u=>{n.onChange(u),s.onChange&&s.onChange(u)},helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${(s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label}`:o("value")).toLowerCase()}`)})]})}})}function CKEditorForm(s){const{t:o}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,rules:{required:s.required},render:({field:n})=>{var l,c;const a=convertErrors(s.methods.formState.errors,s.name);return jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(CustomCkEditor5,{style:(l=s.className)!=null&&l.includes("row")?{flex:1,overflow:"hidden visible"}:void 0,value:n.value,disabled:s.disabled,customConfig:s.customConfig,extraPlugins:s.ckEditorUploadPlugin??[function(u){u.plugins.get("FileRepository").createUploadAdapter=d=>new CkEditorUploadAdapter(d)}],onBlur:(u,d)=>{n.onChange(d.getData())},placeholder:s.placeholder?s.placeholder:s.label?`${o("input")} ${s.label.toLowerCase()}`:"",helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${o("input")} ${(s.placeholder?s.placeholder:s.label?`${s.label}`:o("value")).toLowerCase()}`)})]})}})}function Select1Form(s){const{t:o}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,rules:{required:s.required},render:({field:n})=>{var l,c;const a=convertErrors(s.methods.formState.errors,s.name);return jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(Select1,{readOnly:s.readonly,className:"body-3",style:{width:"100%",padding:"0 1.6rem",height:"4rem",flex:(l=s.className)!=null&&l.includes("row")?1:void 0,...s.select1Style??{}},placeholder:s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label.toLowerCase()}`:"",value:n.value,options:s.options,disabled:s.disabled,onChange:u=>{n.onChange(u==null?void 0:u.id),s.onChange&&s.onChange(u)},suffix:s.required||[void 0,null,""].includes(n.value)||s.disabled?void 0:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/c-remove",size:"1.4rem",onClick:()=>n.onChange(void 0)}),handleLoadmore:s.handleLoadmore,handleSearch:s.handleSearch,helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${(s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label}`:"value").toLowerCase()}`)})]})}})}function SelectMultipleForm(s){const{t:o}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,rules:{required:s.required},render:({field:n})=>{var l,c;const a=convertErrors(s.methods.formState.errors,s.name);return jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(SelectMultiple,{className:"body-3",style:{width:"100%",borderRadius:"0.8rem",flex:(l=s.className)!=null&&l.includes("row")?1:void 0},placeholder:s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label.toLowerCase()}`:"",value:typeof n.value=="string"?void 0:n.value,options:s.options,disabled:s.disabled,onChange:u=>{n.onChange(u),s.onChange&&s.onChange(u)},handleLoadmore:s.handleLoadmore,helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${(s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label}`:o("value")).toLowerCase()}`)})]})}})}function SwitchForm(s){return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,render:({field:o})=>jsxRuntimeExports.jsxs("div",{className:s.className??"row",style:{gap:"0.8rem",...s.style??{}},children:[jsxRuntimeExports.jsx(Switch,{name:s.name,value:o.value,disabled:s.disabled,size:s.size,onChange:n=>{o.onChange(n),s.onChange&&s.onChange(n)}}),s.labelElement??jsxRuntimeExports.jsx(Text$2,{className:"label-3",maxLine:1,children:s.label})]})})}function RateForm(s){return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,render:({field:o})=>jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",...s.style??{}},children:[s.labelElement??jsxRuntimeExports.jsx(Text$2,{className:"label-3",maxLine:1,children:s.label}),jsxRuntimeExports.jsx(Rating,{value:o.value,size:s.size,onChange:n=>{o.onChange(n),s.onChange&&s.onChange(n)}})]})})}function CheckboxForm(s){return jsxRuntimeExports.jsxs("label",{className:"row",style:{gap:"0.8rem",...s.style??{}},children:[jsxRuntimeExports.jsx(Checkbox,{value:s.methods.watch(s.name),disabled:s.disabled,size:s.size,onChange:o=>{s.methods.setValue(s.name,o),s.onChange&&s.onChange(o)},style:{borderRadius:s.radius??"0.4rem"}}),s.labelElement??jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:s.label})]})}function RadioButtonForm(s){return jsxRuntimeExports.jsxs("label",{className:`row ${s.className??""}`,style:{gap:"0.8rem",...s.style??{}},children:[jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,render:({field:o})=>jsxRuntimeExports.jsx(RadioButton,{value:s.value,disabled:s.disabled,size:s.size??"1.6rem",name:s.name,checked:o.value===s.value,onChange:n=>{o.onChange(n.target.value),s.onChange&&s.onChange(n)}})}),s.label?jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:s.label}):null]})}function GroupRadioButtonForm(s){var o;return jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flex:1,flexWrap:"wrap"},children:(o=s.options)==null?void 0:o.map(n=>jsxRuntimeExports.jsx(RadioButtonForm,{label:n.name,name:s.name,value:`${n.id}`,size:"1.8rem",onChange:s.onChange,methods:s.methods},n.id))})]})}function ImportFileForm(s){const{t:o}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,rules:{required:s.required},render:({field:n})=>{var l,c;const a=convertErrors(s.methods.formState.errors,s.name);return jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(ImportFile,{maxSize:s.maxSize,multiple:s.multiple,label:s.title,subTitle:s.subTitle,allowType:s.allowType,value:n.value,disabled:s.disabled,style:{width:"100%",borderStyle:"dashed",maxWidth:"100%",flex:(l=s.className)!=null&&l.includes("row")?1:void 0},className:`${s.className??""} ${s.direction??"row"}`,onChange:u=>{n.onChange(u),s.onChange&&s.onChange(u)},helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${(s.label?`${o("upload")} ${s.label}`:o("file")).toLowerCase()}`)})]})}})}function RangeForm(s){var n,a,l,c,u,d;const{t:o}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`input-range-container ${s.className??"col"}`,style:{gap:"0.8rem",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"0.8rem",width:"100%",flex:(n=s.className)!=null&&n.includes("row")?1:void 0},children:s.type==="number"||s.type==="money"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TextField,{style:{width:"100%",flex:1,...s.type==="money"?{height:"4rem",padding:"0 0 0 1.6rem"}:{}},placeholder:s.placeholderStart??o("from"),disabled:s.disabled,type:s.type==="number"?"number":"text",name:s.name,suffix:s.type==="money"?jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.6rem",height:"100%",background:"var(--neutral-main-background-color)",borderLeft:"var(--neutral-bolder-border)",borderRadius:"0 0.8rem 0.8rem 0"},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",style:{color:"var(--neutral-text-subtitle-color)"},children:"VND"})}):void 0,onFocus:s.type==="money"?h=>{h.target.value=h.target.value.replaceAll(",",""),h.target.type="number"}:void 0,register:s.methods.register(s.name,{onBlur:h=>{var g;const f=parseFloat(h.target.value);h.target.type="text",isNaN(f)?h.target.value="":((g=s.methods.getValues(s.endName))!=null&&g.length&&parseFloat(s.methods.getValues(s.endName).replace(/,/g,""))<f&&s.methods.setError(s.name,{message:"From value must be less than To value"}),s.type==="money"&&(h.target.value=Util.money(f)))}}),helperText:(convertErrors(s.methods.formState.errors,s.name)||convertErrors(s.methods.formState.errors,s.endName))&&((l=(a=convertErrors(s.methods.formState.errors,s.name))==null?void 0:a.message)!=null&&l.length?(c=convertErrors(s.methods.formState.errors,s.name))==null?void 0:c.message:`Please input ${((u=s.label)==null?void 0:u.toLowerCase())??"value"}`)}),jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/arrow-right",size:"1.6rem"}),jsxRuntimeExports.jsx(TextField,{style:{width:"100%",flex:1,...s.type==="money"?{height:"4rem",padding:"0 0 0 1.6rem"}:{}},placeholder:s.placeholderEnd??o("to"),disabled:s.disabled,type:s.type==="number"?"number":"text",name:s.endName,suffix:s.type==="money"?jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.6rem",height:"100%",background:"var(--neutral-main-background-color)",borderLeft:"var(--neutral-bolder-border)",borderRadius:"0 0.8rem 0.8rem 0"},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",style:{color:"var(--neutral-text-subtitle-color)"},children:"VND"})}):void 0,onFocus:s.type==="money"?h=>{h.target.value=h.target.value.replace(/,/g,""),h.target.type="number"}:void 0,register:s.methods.register(s.endName,{onBlur:h=>{var g;const f=parseFloat(h.target.value);h.target.type="text",isNaN(f)?h.target.value="":((g=s.methods.getValues(s.name))!=null&&g.length&&parseFloat(s.methods.getValues(s.name).replace(/,/g,""))>f&&s.methods.setError(s.name,{message:"From value must be less than To value"}),s.type==="money"&&(h.target.value=Util.money(f)))}})})]}):jsxRuntimeExports.jsx(DateTimePicker,{style:{width:"100%",flex:(d=s.className)!=null&&d.includes("row")?1:void 0},className:"body-3",placeholder:s.placeholder?s.placeholder:s.label?`${o("choose")} ${s.label.toLowerCase()}`:"",value:s.methods.watch(s.name),endValue:s.methods.watch(s.endName),disabled:s.disabled,pickerType:s.type,onChange:h=>{s.methods.setValue(s.name,h==null?void 0:h.start),s.methods.setValue(s.endName,h==null?void 0:h.end)}})})]})}function GroupCheckboxForm(s){return jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,render:({field:o})=>jsxRuntimeExports.jsxs("div",{className:s.className??"col",style:{gap:"0.8rem",width:"100%",alignItems:"start",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flex:1,flexWrap:"wrap"},children:s.options.map(n=>{var a;return jsxRuntimeExports.jsxs("label",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Checkbox,{disabled:s.disabled,size:"1.6rem",value:(s.dataType==="string"?((a=o.value)==null?void 0:a.split(","))??[]:o.value).includes(n.id),onChange:l=>{var u;let c=s.dataType==="string"?((u=o.value)==null?void 0:u.split(","))??[]:o.value;l?c.push(n.id):c=c.filter(d=>d!==n.id),c=s.dataType==="string"?c.join(","):c,o.onChange(c),s.onChange&&s.onChange(c)}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:n.name})]},n.id)})})]})})}const ColorPickerForm=s=>{const o=React.useRef(null),{t:n}=useTranslation();return React.useEffect(()=>{const a=s.methods.watch(s.name);a&&o.current?(o.current.querySelector('input[type="color"]').value=a.slice(0,7),o.current.querySelector('input[type="text"]').value=a.slice(0,7),o.current.querySelector('input[type="number"]').value=Util.hexToPercent(a.slice(7))):o.current&&(o.current.querySelector('input[type="color"]').value="#000000",o.current.querySelector('input[type="text"]').value="",o.current.querySelector('input[type="number"]').value="")},[s.methods.watch(s.name)]),jsxRuntimeExports.jsx(Controller,{name:s.name,control:s.methods.control,render:({field:a})=>{var c;const l=convertErrors(s.methods.formState.errors,s.name);return jsxRuntimeExports.jsxs("div",{ref:o,className:s.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...s.style??{}},children:[s.labelElement??(s.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:s.label}),s.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(TextField,{className:"body-3",placeholder:s.placeholder?s.placeholder:s.label?`${n("input")} ${s.label.toLowerCase()}`:"",onComplete:u=>u.target.blur(),onFocus:u=>u.target.select(),disabled:s.disabled,onBlur:u=>{var g;const d=u.target.value.replace(/#/g,"").substring(0,6),h=o.current.querySelector('input[type="number"]'),f=`#${d}${Util.percentToHex(parseInt((g=h.value)!=null&&g.length?h.value:"100")).toLowerCase()}`;a.onChange(f),s.onChange&&s.onChange(f)},style:{flex:1,width:"100%",...s.textFieldStyle??{}},maxLength:7,prefix:jsxRuntimeExports.jsx("label",{style:{backgroundColor:s.methods.watch(s.name),borderRadius:"0.6rem",width:"2.2rem",height:"2.2rem",border:"var(--neutral-lighter-border)"},children:jsxRuntimeExports.jsx("input",{type:"color",disabled:s.disabled,style:{visibility:"hidden"},onChange:u=>{var f;const d=o.current.querySelector('input[type="number"]'),h=`${u.target.value}${Util.percentToHex(parseInt((f=d.value)!=null&&f.length?d.value:"100")).toLowerCase()}`;a.onChange(h),s.onChange&&s.onChange(h)}})}),suffix:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"number",placeholder:"opacity",style:{borderLeft:"var(--neutral-bolder-border)",width:"10%",flex:"none",paddingLeft:"0.8rem",minWidth:"3.6rem"},onKeyDown:u=>u.key.toLowerCase()==="enter"&&u.target.blur(),onFocus:u=>u.target.select(),disabled:s.disabled,onBlur:u=>{var g;let d=parseInt(u.target.value);isNaN(d)||d>100?d=100:d<0&&(d=0);const f=`${(g=o.current)==null?void 0:g.querySelector('input[type="color"]').value}${Util.percentToHex(d).toLowerCase()}`;a.onChange(f),s.onChange&&s.onChange(f)}}),jsxRuntimeExports.jsx(Text$2,{className:"regular1",children:"%"})]}),helperText:l&&((c=l==null?void 0:l.message)!=null&&c.length?l==null?void 0:l.message:`${n("input")} ${(s.placeholder?s.placeholder:s.label?`${s.label}`:n("value")).toLowerCase()}`)})]})}})},convertErrors=(s,o)=>{if(s&&Object.keys(s).length){const a=o.split(/[.\[\]]/).filter(l=>(l==null?void 0:l.length)>0);var n=s;for(let l of a)n&&(n=n[l]);return n}};function EmptyPage(s){return jsxRuntimeExports.jsxs("div",{className:`col ${s.className??""}`,style:{alignItems:"center",...s.style??{}},children:[jsxRuntimeExports.jsx("img",{alt:"",src:s.imgUrl??"https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/error-file.png",style:{aspectRatio:"1/1",width:"100%",maxWidth:"35rem",...s.imgStyle??{}}}),jsxRuntimeExports.jsx(Text$2,{className:"highlight-6",style:{textAlign:"center",marginTop:"1.6rem"},children:s.title}),jsxRuntimeExports.jsx(Text$2,{className:"subtitle-2",style:{textAlign:"center",marginTop:4},children:s.subtitle}),s.button]})}class DataController{constructor(o){E(this,"module");this.module=o}async getAll(){return await BaseDA.get(ConfigData.url+"data/getAll",{headers:{pid:ConfigData.pid,module:this.module}})}async getProperties(){return await BaseDA.get(ConfigData.url+`setting/getProperties?name=${this.module}`,{headers:{pid:ConfigData.pid,module:"column"}})}async aggregateList(o){return await BaseDA.post(ConfigData.url+"data/aggregateList",{headers:{pid:ConfigData.pid,module:this.module},body:o})}async filterByEmptyKey(o){return await BaseDA.post(ConfigData.url+"data/filterByEmptyKey",{headers:{pid:ConfigData.pid,module:this.module},body:o})}async group(o){return await BaseDA.post(ConfigData.url+"data/group",{headers:{pid:ConfigData.pid,module:this.module},body:o})}async getListSimple(o){var a;return await BaseDA.post(ConfigData.url+"data/getListSimple",{headers:{pid:ConfigData.pid,module:this.module},body:{searchRaw:(a=o==null?void 0:o.query)!=null&&a.length?o==null?void 0:o.query:"*",page:(o==null?void 0:o.page)??1,size:(o==null?void 0:o.size)??10,returns:o==null?void 0:o.returns,sortby:o==null?void 0:o.sortby}})}async getById(o){return await BaseDA.post(ConfigData.url+`data/getById?id=${o}`,{headers:{pid:ConfigData.pid,module:this.module}})}async getByListId(o){return await BaseDA.post(ConfigData.url+"data/getByIds",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:o}})}async add(o){return await BaseDA.post(ConfigData.url+"data/action?action=add",{headers:{pid:ConfigData.pid,module:this.module},body:{data:o}})}async edit(o){return await BaseDA.post(ConfigData.url+"data/action?action=edit",{headers:{pid:ConfigData.pid,module:this.module},body:{data:o}})}async delete(o){return await BaseDA.post(ConfigData.url+"data/action?action=delete",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:o}})}async checkotp(o){return await BaseDA.post(ConfigData.url+"data/checkotp",{body:{idToken:o}})}}class SettingDataController{constructor(o){E(this,"setting");E(this,"type");this.setting=o,o==="model"||o==="reducer"?this.type="report":this.type=o}async action(o,n){return await BaseDA.post(ConfigData.url+`data/${this.type==="report"?`${this.type}/${this.setting}`:this.type}/action?action=${o}`,{headers:{pid:ConfigData.pid},body:{data:n.data,ids:n.ids}})}async getListSimple(o){var a;return await BaseDA.post(ConfigData.url+`data/${this.type==="report"?`${this.type}/${this.setting}`:this.type}/getListSimple`,{headers:{pid:ConfigData.pid},body:{searchRaw:(a=o==null?void 0:o.query)!=null&&a.length?o==null?void 0:o.query:"*",page:(o==null?void 0:o.page)??1,size:(o==null?void 0:o.size)??10,returns:o==null?void 0:o.returns,sortby:o==null?void 0:o.sortby}})}async getByIds(o){return await BaseDA.post(ConfigData.url+`data/${this.type==="report"?`${this.type}/${this.setting}`:this.type}/getByIds`,{headers:{pid:ConfigData.pid},body:{ids:o}})}}class AccountController{async login(o,n){const a=await BaseDA.post(ConfigData.url+"data/login",{headers:{module:"Customer",pid:ConfigData.pid},body:o});return a.code===200&&!n&&(Object.keys(a.data).forEach(l=>{Util.setCookie(l,a.data[l])}),Util.setCookie("timeRefresh",Date.now()/1e3+9*60)),a}async getInfor(){return await BaseDA.get(ConfigData.url+"data/getInfo",{headers:{module:"Customer",pid:ConfigData.pid}})}async hashPassword(o){return await BaseDA.get(ConfigData.url+`data/bcrypt?password=${o}`)}}class TableController{constructor(o){E(this,"module");this.module=o}async getAll(){return await BaseDA.get(ConfigData.url+"setting/getAll",{headers:{pid:ConfigData.pid,module:this.module}})}async getByListId(o){return await BaseDA.post(ConfigData.url+"setting/getByIds",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:o}})}async getListSimple(o){return await BaseDA.post(ConfigData.url+"setting/getListSimple",{headers:{pid:ConfigData.pid,module:this.module},body:{searchRaw:(o==null?void 0:o.query)??"*",page:(o==null?void 0:o.page)??1,size:(o==null?void 0:o.size)??10,returns:o==null?void 0:o.returns,sortby:o==null?void 0:o.sortby}})}async group(o){return await BaseDA.post(ConfigData.url+"setting/group",{headers:{pid:ConfigData.pid,module:this.module},body:o})}async add(o){return await BaseDA.post(ConfigData.url+"setting/action?action=add",{headers:{pid:ConfigData.pid,module:this.module},body:{data:o}})}async edit(o){return await BaseDA.post(ConfigData.url+"setting/action?action=edit",{headers:{pid:ConfigData.pid,module:this.module},body:{data:o}})}async delete(o){return await BaseDA.post(ConfigData.url+"setting/action?action=delete",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:o}})}}class WiniController{constructor(o){E(this,"module");this.module=o}async getAll(){return await BaseDA.get(ConfigData.url+"wini/getAll",{headers:{module:this.module}})}async getListSimple(o){return await BaseDA.post(ConfigData.url+"wini/getListSimple",{headers:{module:this.module},body:{searchRaw:(o==null?void 0:o.query)??"*",page:(o==null?void 0:o.page)??1,size:(o==null?void 0:o.size)??10,returns:o==null?void 0:o.returns,sortby:o==null?void 0:o.sortby}})}async add(o){return await BaseDA.post(ConfigData.url+"wini/action?action=add",{headers:{module:this.module},body:{data:o}})}async edit(o){return await BaseDA.post(ConfigData.url+"wini/action?action=edit",{headers:{module:this.module},body:{data:o}})}async delete(o){return await BaseDA.post(ConfigData.url+"wini/action?action=delete",{headers:{module:this.module},body:{ids:o}})}async getByIds(o){return await BaseDA.post(ConfigData.url+"wini/getByIds",{headers:{module:this.module},body:{ids:o}})}}var ComponentType=(s=>(s.text="Text",s.img="Image",s.icon="Icon",s.checkbox="Checkbox",s.switch="Switch",s.textField="Textfield",s.button="Button",s.calendar="Calendar",s.datePicker="DatePicker",s.radio="Radio",s.select1="Select1",s.selectMultiple="SelectMultiple",s.textArea="Textarea",s.table="Table",s.dateTimePicker="DateTimePicker",s.navLink="Navlink",s.rate="Rate",s.progressBar="ProgressBar",s.progressCircle="ProgressCircle",s.upload="Upload",s.importMultipleFile="ImportMultiple",s.ckEditor="CkEditor",s.range="Range",s.container="Container",s.chart="Chart",s.form="Form",s.card="Card",s.view="View",s.report="Report",s.popup="Popup",s.colorPicker="ColorPicker",s.none="none",s))(ComponentType||{}),FEDataType=(s=>(s.GID="GID",s.STRING="STRING",s.NUMBER="NUMBER",s.BOOLEAN="BOOLEAN",s.DATE="DATE",s.DATETIME="DATETIME",s.MONEY="MONEY",s.PASSWORD="PASSWORD",s.LIST="LIST",s.HTML="HTML",s.FILE="FILE",s))(FEDataType||{}),ValidateType=(s=>(s[s.email=2]="email",s[s.minLength=3]="minLength",s[s.maxLength=4]="maxLength",s[s.number=5]="number",s[s.phone=6]="phone",s[s.equality=13]="equality",s[s.greaterThan=14]="greaterThan",s[s.greaterThanOrEqualTo=15]="greaterThanOrEqualTo",s[s.lessThanOrEqualTo=16]="lessThanOrEqualTo",s[s.lessThan=17]="lessThan",s[s.odd=18]="odd",s[s.even=19]="even",s[s.async=20]="async",s))(ValidateType||{}),TriggerType=(s=>(s.click="click",s.dbclick="dbclick",s.hover="hover",s.keydown="keydown",s.mouseenter="mouseenter",s.mouseleave="mouseleave",s.mousedown="mousedown",s.mouseup="mouseup",s.scrollend="scrollend",s))(TriggerType||{}),ActionType=(s=>(s.navigate="navigate",s.reload="reload",s.back="back",s.scrollTo="scrollTo",s.showPopup="showPopup",s.toastMessage="toastMessage",s.closePopup="closePopup",s.mousedown="mousedown",s.mouseup="mouseup",s.submit="submit",s.setValue="setValue",s.loadMore="loadMore",s))(ActionType||{}),DesignTokenType=(s=>(s.group="group",s.color="color",s.font="font",s.border="border",s.boxShadow="box-shadow",s.custom="custom",s))(DesignTokenType||{}),validate$1={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */var validate=validate$1.exports,hasRequiredValidate;function requireValidate(){return hasRequiredValidate||(hasRequiredValidate=1,function(s,o){(function(n,a,l){var c=function(d,h,f){f=u.extend({},u.options,f);var g=u.runValidations(d,h,f);if(g.some(function(p){return u.isPromise(p.error)}))throw new Error("Use validate.async if you want support for promises");return c.processValidationResults(g,f)},u=c;u.extend=function(d){return[].slice.call(arguments,1).forEach(function(h){for(var f in h)d[f]=h[f]}),d},u.extend(c,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var d=u.format("%{major}.%{minor}.%{patch}",u.version);return u.isEmpty(u.version.metadata)||(d+="+"+u.version.metadata),d}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(d,h,f){var g=[],p,v,b,_,w,x,S;(u.isDomElement(d)||u.isJqueryElement(d))&&(d=u.collectFormValues(d));for(p in h){b=u.getDeepObjectValue(d,p),_=u.result(h[p],b,d,p,f,h);for(v in _){if(w=u.validators[v],!w)throw S=u.format("Unknown validator %{name}",{name:v}),new Error(S);x=_[v],x=u.result(x,b,d,p,f,h),x&&g.push({attribute:p,value:b,validator:v,globalOptions:f,attributes:d,options:x,error:w.call(w,b,x,p,d,f)})}}return g},processValidationResults:function(d,h){d=u.pruneEmptyErrors(d,h),d=u.expandMultipleErrors(d,h),d=u.convertErrorMessages(d,h);var f=h.format||"grouped";if(typeof u.formatters[f]=="function")d=u.formatters[f](d);else throw new Error(u.format("Unknown format %{format}",h));return u.isEmpty(d)?void 0:d},async:function(d,h,f){f=u.extend({},u.async.options,f);var g=f.wrapErrors||function(v){return v};f.cleanAttributes!==!1&&(d=u.cleanAttributes(d,h));var p=u.runValidations(d,h,f);return new u.Promise(function(v,b){u.waitForResults(p).then(function(){var _=u.processValidationResults(p,f);_?b(new g(_,f,d,h)):v(d)},function(_){b(_)})})},single:function(d,h,f){return f=u.extend({},u.single.options,f,{format:"flat",fullMessages:!1}),u({single:d},{single:h},f)},waitForResults:function(d){return d.reduce(function(h,f){return u.isPromise(f.error)?h.then(function(){return f.error.then(function(g){f.error=g||null})}):h},new u.Promise(function(h){h()}))},result:function(d){var h=[].slice.call(arguments,1);return typeof d=="function"&&(d=d.apply(null,h)),d},isNumber:function(d){return typeof d=="number"&&!isNaN(d)},isFunction:function(d){return typeof d=="function"},isInteger:function(d){return u.isNumber(d)&&d%1===0},isBoolean:function(d){return typeof d=="boolean"},isObject:function(d){return d===Object(d)},isDate:function(d){return d instanceof Date},isDefined:function(d){return d!=null},isPromise:function(d){return!!d&&u.isFunction(d.then)},isJqueryElement:function(d){return d&&u.isString(d.jquery)},isDomElement:function(d){return!d||!d.querySelectorAll||!d.querySelector?!1:u.isObject(document)&&d===document?!0:typeof HTMLElement=="object"?d instanceof HTMLElement:d&&typeof d=="object"&&d!==null&&d.nodeType===1&&typeof d.nodeName=="string"},isEmpty:function(d){var h;if(!u.isDefined(d))return!0;if(u.isFunction(d))return!1;if(u.isString(d))return u.EMPTY_STRING_REGEXP.test(d);if(u.isArray(d))return d.length===0;if(u.isDate(d))return!1;if(u.isObject(d)){for(h in d)return!1;return!0}return!1},format:u.extend(function(d,h){return u.isString(d)?d.replace(u.format.FORMAT_REGEXP,function(f,g,p){return g==="%"?"%{"+p+"}":String(h[p])}):d},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(d){return u.isNumber(d)?d*100%1===0?""+d:parseFloat(Math.round(d*100)/100).toFixed(2):u.isArray(d)?d.map(function(h){return u.prettify(h)}).join(", "):u.isObject(d)?u.isDefined(d.toString)?d.toString():JSON.stringify(d):(d=""+d,d.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(h,f,g){return""+f+" "+g.toLowerCase()}).toLowerCase())},stringifyValue:function(d,h){var f=h&&h.prettify||u.prettify;return f(d)},isString:function(d){return typeof d=="string"},isArray:function(d){return{}.toString.call(d)==="[object Array]"},isHash:function(d){return u.isObject(d)&&!u.isArray(d)&&!u.isFunction(d)},contains:function(d,h){return u.isDefined(d)?u.isArray(d)?d.indexOf(h)!==-1:h in d:!1},unique:function(d){return u.isArray(d)?d.filter(function(h,f,g){return g.indexOf(h)==f}):d},forEachKeyInKeypath:function(d,h,f){if(u.isString(h)){var g="",p,v=!1;for(p=0;p<h.length;++p)switch(h[p]){case".":v?(v=!1,g+="."):(d=f(d,g,!1),g="");break;case"\\":v?(v=!1,g+="\\"):v=!0;break;default:v=!1,g+=h[p];break}return f(d,g,!0)}},getDeepObjectValue:function(d,h){if(u.isObject(d))return u.forEachKeyInKeypath(d,h,function(f,g){if(u.isObject(f))return f[g]})},collectFormValues:function(d,h){var f={},g,p,v,b,_,w;if(u.isJqueryElement(d)&&(d=d[0]),!d)return f;for(h=h||{},b=d.querySelectorAll("input[name], textarea[name]"),g=0;g<b.length;++g)if(v=b.item(g),!u.isDefined(v.getAttribute("data-ignored"))){var x=v.name.replace(/\./g,"\\\\.");w=u.sanitizeFormValue(v.value,h),v.type==="number"?w=w?+w:null:v.type==="checkbox"?v.attributes.value?v.checked||(w=f[x]||null):w=v.checked:v.type==="radio"&&(v.checked||(w=f[x]||null)),f[x]=w}for(b=d.querySelectorAll("select[name]"),g=0;g<b.length;++g)if(v=b.item(g),!u.isDefined(v.getAttribute("data-ignored"))){if(v.multiple){w=[];for(p in v.options)_=v.options[p],_&&_.selected&&w.push(u.sanitizeFormValue(_.value,h))}else{var S=typeof v.options[v.selectedIndex]<"u"?v.options[v.selectedIndex].value:"";w=u.sanitizeFormValue(S,h)}f[v.name]=w}return f},sanitizeFormValue:function(d,h){return h.trim&&u.isString(d)&&(d=d.trim()),h.nullify!==!1&&d===""?null:d},capitalize:function(d){return u.isString(d)?d[0].toUpperCase()+d.slice(1):d},pruneEmptyErrors:function(d){return d.filter(function(h){return!u.isEmpty(h.error)})},expandMultipleErrors:function(d){var h=[];return d.forEach(function(f){u.isArray(f.error)?f.error.forEach(function(g){h.push(u.extend({},f,{error:g}))}):h.push(f)}),h},convertErrorMessages:function(d,h){h=h||{};var f=[],g=h.prettify||u.prettify;return d.forEach(function(p){var v=u.result(p.error,p.value,p.attribute,p.options,p.attributes,p.globalOptions);if(!u.isString(v)){f.push(p);return}v[0]==="^"?v=v.slice(1):h.fullMessages!==!1&&(v=u.capitalize(g(p.attribute))+" "+v),v=v.replace(/\\\^/g,"^"),v=u.format(v,{value:u.stringifyValue(p.value,h)}),f.push(u.extend({},p,{error:v}))}),f},groupErrorsByAttribute:function(d){var h={};return d.forEach(function(f){var g=h[f.attribute];g?g.push(f):h[f.attribute]=[f]}),h},flattenErrorsToArray:function(d){return d.map(function(h){return h.error}).filter(function(h,f,g){return g.indexOf(h)===f})},cleanAttributes:function(d,h){function f(v,b,_){return u.isObject(v[b])?v[b]:v[b]=_?!0:{}}function g(v){var b={},_;for(_ in v)v[_]&&u.forEachKeyInKeypath(b,_,f);return b}function p(v,b){if(!u.isObject(v))return v;var _=u.extend({},v),w,x;for(x in v)w=b[x],u.isObject(w)?_[x]=p(_[x],w):w||delete _[x];return _}return!u.isObject(h)||!u.isObject(d)?{}:(h=g(h),p(d,h))},exposeModule:function(d,h,f,g,p){f?(g&&g.exports&&(f=g.exports=d),f.validate=d):(h.validate=d,d.isFunction(p)&&p.amd&&p([],function(){return d}))},warn:function(d){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+d)},error:function(d){typeof console<"u"&&console.error&&console.error("[validate.js] "+d)}}),c.validators={presence:function(d,h){if(h=u.extend({},this.options,h),h.allowEmpty!==!1?!u.isDefined(d):u.isEmpty(d))return h.message||this.message||"can't be blank"},length:function(d,h,f){if(u.isDefined(d)){h=u.extend({},this.options,h);var g=h.is,p=h.maximum,v=h.minimum,b=h.tokenizer||function(S){return S},_,w=[];d=b(d);var x=d.length;if(!u.isNumber(x))return h.message||this.notValid||"has an incorrect length";if(u.isNumber(g)&&x!==g&&(_=h.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",w.push(u.format(_,{count:g}))),u.isNumber(v)&&x<v&&(_=h.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",w.push(u.format(_,{count:v}))),u.isNumber(p)&&x>p&&(_=h.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",w.push(u.format(_,{count:p}))),w.length>0)return h.message||w}},numericality:function(d,h,f,g,p){if(u.isDefined(d)){h=u.extend({},this.options,h);var v=[],b,_,w={greaterThan:function(R,A){return R>A},greaterThanOrEqualTo:function(R,A){return R>=A},equalTo:function(R,A){return R===A},lessThan:function(R,A){return R<A},lessThanOrEqualTo:function(R,A){return R<=A},divisibleBy:function(R,A){return R%A===0}},x=h.prettify||p&&p.prettify||u.prettify;if(u.isString(d)&&h.strict){var S="^-?(0|[1-9]\\d*)";if(h.onlyInteger||(S+="(\\.\\d+)?"),S+="$",!new RegExp(S).test(d))return h.message||h.notValid||this.notValid||this.message||"must be a valid number"}if(h.noStrings!==!0&&u.isString(d)&&!u.isEmpty(d)&&(d=+d),!u.isNumber(d))return h.message||h.notValid||this.notValid||this.message||"is not a number";if(h.onlyInteger&&!u.isInteger(d))return h.message||h.notInteger||this.notInteger||this.message||"must be an integer";for(b in w)if(_=h[b],u.isNumber(_)&&!w[b](d,_)){var C="not"+u.capitalize(b),T=h[C]||this[C]||this.message||"must be %{type} %{count}";v.push(u.format(T,{count:_,type:x(b)}))}if(h.odd&&d%2!==1&&v.push(h.notOdd||this.notOdd||this.message||"must be odd"),h.even&&d%2!==0&&v.push(h.notEven||this.notEven||this.message||"must be even"),v.length)return h.message||v}},datetime:u.extend(function(d,h){if(!u.isFunction(this.parse)||!u.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(u.isDefined(d)){h=u.extend({},this.options,h);var f,g=[],p=h.earliest?this.parse(h.earliest,h):NaN,v=h.latest?this.parse(h.latest,h):NaN;if(d=this.parse(d,h),isNaN(d)||h.dateOnly&&d%864e5!==0)return f=h.notValid||h.message||this.notValid||"must be a valid date",u.format(f,{value:arguments[0]});if(!isNaN(p)&&d<p&&(f=h.tooEarly||h.message||this.tooEarly||"must be no earlier than %{date}",f=u.format(f,{value:this.format(d,h),date:this.format(p,h)}),g.push(f)),!isNaN(v)&&d>v&&(f=h.tooLate||h.message||this.tooLate||"must be no later than %{date}",f=u.format(f,{date:this.format(v,h),value:this.format(d,h)}),g.push(f)),g.length)return u.unique(g)}},{parse:null,format:null}),date:function(d,h){return h=u.extend({},h,{dateOnly:!0}),u.validators.datetime.call(u.validators.datetime,d,h)},format:function(d,h){(u.isString(h)||h instanceof RegExp)&&(h={pattern:h}),h=u.extend({},this.options,h);var f=h.message||this.message||"is invalid",g=h.pattern,p;if(u.isDefined(d)&&(!u.isString(d)||(u.isString(g)&&(g=new RegExp(h.pattern,h.flags)),p=g.exec(d),!p||p[0].length!=d.length)))return f},inclusion:function(d,h){if(u.isDefined(d)&&(u.isArray(h)&&(h={within:h}),h=u.extend({},this.options,h),!u.contains(h.within,d))){var f=h.message||this.message||"^%{value} is not included in the list";return u.format(f,{value:d})}},exclusion:function(d,h){if(u.isDefined(d)&&(u.isArray(h)&&(h={within:h}),h=u.extend({},this.options,h),!!u.contains(h.within,d))){var f=h.message||this.message||"^%{value} is restricted";return u.isString(h.within[d])&&(d=h.within[d]),u.format(f,{value:d})}},email:u.extend(function(d,h){h=u.extend({},this.options,h);var f=h.message||this.message||"is not a valid email";if(u.isDefined(d)&&(!u.isString(d)||!this.PATTERN.exec(d)))return f},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(d,h,f,g,p){if(u.isDefined(d)){u.isString(h)&&(h={attribute:h}),h=u.extend({},this.options,h);var v=h.message||this.message||"is not equal to %{attribute}";if(u.isEmpty(h.attribute)||!u.isString(h.attribute))throw new Error("The attribute must be a non empty string");var b=u.getDeepObjectValue(g,h.attribute),_=h.comparator||function(x,S){return x===S},w=h.prettify||p&&p.prettify||u.prettify;if(!_(d,b,h,f,g))return u.format(v,{attribute:w(h.attribute)})}},url:function(d,h){if(u.isDefined(d)){h=u.extend({},this.options,h);var f=h.message||this.message||"is not a valid url",g=h.schemes||this.schemes||["http","https"],p=h.allowLocal||this.allowLocal||!1,v=h.allowDataUrl||this.allowDataUrl||!1;if(!u.isString(d))return f;var b="^(?:(?:"+g.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",_="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(p?_+="?":b+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",b+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+_+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",v){var w="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",x="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",S="data:(?:"+w+")?(?:;base64)?,"+x;b="(?:"+b+")|(?:^"+S+"$)"}var C=new RegExp(b,"i");if(!C.exec(d))return f}},type:u.extend(function(d,h,f,g,p){if(u.isString(h)&&(h={type:h}),!!u.isDefined(d)){var v=u.extend({},this.options,h),b=v.type;if(!u.isDefined(b))throw new Error("No type was specified");var _;if(u.isFunction(b)?_=b:_=this.types[b],!u.isFunction(_))throw new Error("validate.validators.type.types."+b+" must be a function.");if(!_(d,v,f,g,p)){var w=h.message||this.messages[b]||this.message||v.message||(u.isFunction(b)?"must be of the correct type":"must be of type %{type}");return u.isFunction(w)&&(w=w(d,h,f,g,p)),u.format(w,{attribute:u.prettify(f),type:b})}}},{types:{object:function(d){return u.isObject(d)&&!u.isArray(d)},array:u.isArray,integer:u.isInteger,number:u.isNumber,string:u.isString,date:u.isDate,boolean:u.isBoolean},messages:{}})},c.formatters={detailed:function(d){return d},flat:u.flattenErrorsToArray,grouped:function(d){var h;d=u.groupErrorsByAttribute(d);for(h in d)d[h]=u.flattenErrorsToArray(d[h]);return d},constraint:function(d){var h;d=u.groupErrorsByAttribute(d);for(h in d)d[h]=d[h].map(function(f){return f.validator}).sort();return d}},c.exposeModule(c,this,n,a,l)}).call(validate,o,s,null)}(validate$1,validate$1.exports)),validate$1.exports}var validateExports=requireValidate();function RenderComponentByType({fieldItem:s,methods:o,className:n,style:a={},labelStyle:l={},label:c}){var u,d,h,f,g,p;switch(s.Form.ComponentType){case ComponentType.textField:return s.DataType===FEDataType.PASSWORD?jsxRuntimeExports.jsx(InputPasswordForm,{methods:o,name:s.Name,label:c??s.Form.Label,required:s.Form.Required,readOnly:s.Form.ReadOnly,disabled:s.Form.Disabled,placeholder:s.Form.Placeholder,maxLength:s.Form.Max,className:n,style:a}):jsxRuntimeExports.jsx(TextFieldForm,{methods:o,required:s.Form.Required,readOnly:s.Form.ReadOnly,disabled:s.Form.Disabled,label:c??s.Form.Label,placeholder:s.Form.Placeholder,name:s.Name,maxLength:s.Form.Max,className:n,style:a,type:s.DataType===FEDataType.NUMBER?"number":s.DataType===FEDataType.MONEY?"money":"text"});case ComponentType.textArea:return jsxRuntimeExports.jsx(TextAreaForm,{methods:o,className:n,style:{alignItems:"start",...a},required:s.Form.Required,readOnly:s.Form.ReadOnly,disabled:s.Form.Disabled,label:c??s.Form.Label,placeholder:s.Form.Placeholder,name:s.Name,maxLength:s.Form.Max});case ComponentType.switch:return jsxRuntimeExports.jsxs("div",{className:n??"row",style:{width:"100%",justifyContent:"space-between",...a},children:[s.Form.Title?jsxRuntimeExports.jsx(Text$2,{className:"label-3",style:l,children:s.Form.Title}):void 0,jsxRuntimeExports.jsx(SwitchForm,{methods:o,disabled:s.Form.Disabled,label:c??s.Form.Label,name:s.Name,size:"2.4rem"})]});case ComponentType.rate:return jsxRuntimeExports.jsxs("div",{className:n??"row",style:{width:"100%",justifyContent:"space-between",...a},children:[s.Form.Title?jsxRuntimeExports.jsx(Text$2,{className:"label-3",style:l,children:s.Form.Title}):void 0,jsxRuntimeExports.jsx(RateForm,{methods:o,label:c??s.Form.Label,name:s.Name,size:"2.4rem"})]});case ComponentType.radio:return jsxRuntimeExports.jsx(GroupRadioButtonForm,{methods:o,name:s.Name,className:n,style:a,options:s.Form.Options,label:c??s.Form.Label,required:s.Form.Required});case ComponentType.select1:return jsxRuntimeExports.jsx(Select1Form,{methods:o,required:s.Form.Required,disabled:s.Form.Disabled,label:c??s.Form.Label,placeholder:s.Form.Placeholder,name:s.Name,options:s.Form.Options??[],className:n,style:a});case ComponentType.selectMultiple:return jsxRuntimeExports.jsx(SelectMultipleForm,{methods:o,required:s.Form.Required,disabled:s.Form.Disabled,label:c??s.Form.Label,placeholder:s.Form.Placeholder,name:s.Name,options:s.Form.Options??[],className:n,style:a});case ComponentType.checkbox:return(d=(u=s.Form)==null?void 0:u.Options)!=null&&d.length?jsxRuntimeExports.jsx(GroupCheckboxForm,{methods:o,disabled:s.Form.Disabled,label:c??s.Form.Label,name:s.Name,className:n,style:a,dataType:"string",options:s.Form.Options}):jsxRuntimeExports.jsx(CheckboxForm,{methods:o,disabled:s.Form.Disabled,label:c??s.Form.Label,name:s.Name,style:a});case ComponentType.upload:return jsxRuntimeExports.jsx(ImportFileForm,{methods:o,required:s.Form.Required,label:c??s.Form.Label,name:s.Name,allowType:(h=s.Form.AcceptFiles)==null?void 0:h.split(","),subTitle:s.Form.AcceptFiles,maxSize:s.Form.Max,multiple:s.Form.Multiple,className:n,style:a,disabled:s.Form.Disabled});case ComponentType.datePicker:case ComponentType.dateTimePicker:return jsxRuntimeExports.jsx(DateTimePickerForm,{methods:o,required:s.Form.Required,disabled:s.Form.Disabled,label:c??s.Form.Label,placeholder:s.Form.Placeholder,name:s.Name,type:s.Form.ComponentType===ComponentType.datePicker?"date":"datetime",className:n,style:a});case ComponentType.ckEditor:return jsxRuntimeExports.jsx(CKEditorForm,{methods:o,name:s.Name,className:n,style:{alignItems:"start",...a},required:s.Form.Required,disabled:s.Form.Disabled,label:c??s.Form.Label,placeholder:s.Form.Placeholder});case ComponentType.range:const v=s.Name.split(","),b=(f=s.Form.Placeholder)==null?void 0:f.split(",");return jsxRuntimeExports.jsx(RangeForm,{methods:o,className:n,type:s.DataType===FEDataType.DATE?"daterange":s.DataType===FEDataType.DATETIME?"datetimerange":"number",name:v[0].trim(),endName:v[1].trim(),placeholder:s.Form.Placeholder,placeholderStart:(g=b==null?void 0:b[0])==null?void 0:g.trim(),placeholderEnd:(p=b==null?void 0:b[1])==null?void 0:p.trim(),label:c??s.Form.Label,disabled:s.Form.Disabled,style:a});case ComponentType.colorPicker:return jsxRuntimeExports.jsx(ColorPickerForm,{methods:o,className:n,style:{alignItems:"start",...a},required:s.Form.Required,disabled:s.Form.Disabled,label:c??s.Form.Label,name:s.Name});default:return jsxRuntimeExports.jsx("div",{})}}async function validateForm({list:s=[],formdata:o}){const n=validateExports.validate;n.validators.customDate=customValidateDateTime,n.validators.myAsyncValidator=myAsyncValidator,n.options={fullMessages:!1};const a=validateByType({list:s});let l=validateExports.validate(o,a.validator);if(!l&&Object.keys(a.asyncValidator).length)try{l=await n.async(o,a.asyncValidator)}catch(c){l=c}return l}function validateByType({list:s=[]}){let o={},n={};return s.forEach(a=>{var c;let l={};(c=a.Validate)==null||c.forEach(u=>{switch(u.type){case ValidateType.email:l.email={message:u.message??"Invalid email"};break;case ValidateType.minLength:l.length={...l.length??{},minimum:u.value,tooShort:u.message??`At least ${u.value} characters`};break;case ValidateType.maxLength:l.length={...l.length??{},maximum:u.value,tooLong:u.message??`At most ${u.value} characters`};break;case ValidateType.number:l.format={pattern:"[0-9]+",flags:"i",message:u.message??"Only number"};break;case ValidateType.phone:l.format={pattern:"([+]{0,1})(84|0[3|5|7|8|9])+([0-9]{8})",flags:"g",message:u.message??"Invalid phone number"};break;case ValidateType.greaterThan:l.numericality={...l.numericality??{},greaterThan:u.value,notGreaterThan:u.message??`Value must be greater than ${u.value}`};break;case ValidateType.greaterThanOrEqualTo:l.numericality={...l.numericality??{},greaterThanOrEqualTo:u.value,notGreaterThan:u.message??`Value must be greater than or equal to ${u.value}`};break;case ValidateType.lessThan:l.numericality={...l.numericality??{},lessThan:u.value,notLessThan:u.message??`Value must be less than ${u.value}`};break;case ValidateType.lessThanOrEqualTo:l.numericality={...l.numericality??{},lessThanOrEqualTo:u.value,notLessThanOrEqualTo:u.message??`Value must be less than or equal to ${u.value}`};break}}),o[a.Name]=l}),{validator:o,asyncValidator:n}}function customValidateDateTime(s,o){try{const l=typeof s=="string"?Util.stringToDate(s,o.dateOnly?"dd/mm/yyyy":"dd/mm/yyyy hh:mm"):new Date(s);if(o.earliest)try{var n=typeof o.earliest=="string"?Util.stringToDate(s,o.dateOnly?"dd/mm/yyyy":"dd/mm/yyyy hh:mm"):new Date(o.earliest)}catch(c){console.log(c)}if(o.latest)try{var a=typeof o.latest=="string"?Util.stringToDate(s,o.dateOnly?"dd/mm/yyyy":"dd/mm/yyyy hh:mm"):new Date(o.latest)}catch(c){console.log(c)}if(isNaN(l))return o.message;if(n){if(o.dateOnly&&differenceInCalendarDays(l,n)<0)return o.tooEarly;if(!o.dateOnly&&differenceInMinutes(l,n)<0)return o.tooEarly}else if(a){if(o.dateOnly&&differenceInCalendarDays(l,a)<0)return o.tooLate;if(!o.dateOnly&&differenceInMinutes(l,a)<0)return o.tooLate}}catch{return o.message}}async function myAsyncValidator(s,o){if(console.log("????????: ",s," -----------: ",o),o.url){const n=await BaseDA.post(o.url,{body:{value:s}});if(n&&n.code!==200)return n.message}}const regexGetVariableByThis$1=/\${this\.(\w+)}/g;var dist$2={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist$2;hasRequiredDist=1,Object.defineProperty(dist$2,"__esModule",{value:!0}),dist$2.parse=u,dist$2.serialize=f;const s=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,o=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,a=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,c=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function u(v,b){const _=new c,w=v.length;if(w<2)return _;const x=(b==null?void 0:b.decode)||g;let S=0;do{const C=v.indexOf("=",S);if(C===-1)break;const T=v.indexOf(";",S),R=T===-1?w:T;if(C>R){S=v.lastIndexOf(";",C-1)+1;continue}const A=d(v,S,C),M=h(v,C,A),D=v.slice(A,M);if(_[D]===void 0){let O=d(v,C+1,R),H=h(v,R,O);const j=x(v.slice(O,H));_[D]=j}S=R+1}while(S<w);return _}function d(v,b,_){do{const w=v.charCodeAt(b);if(w!==32&&w!==9)return b}while(++b<_);return _}function h(v,b,_){for(;b>_;){const w=v.charCodeAt(--b);if(w!==32&&w!==9)return b+1}return _}function f(v,b,_){const w=(_==null?void 0:_.encode)||encodeURIComponent;if(!s.test(v))throw new TypeError(`argument name is invalid: ${v}`);const x=w(b);if(!o.test(x))throw new TypeError(`argument val is invalid: ${b}`);let S=v+"="+x;if(!_)return S;if(_.maxAge!==void 0){if(!Number.isInteger(_.maxAge))throw new TypeError(`option maxAge is invalid: ${_.maxAge}`);S+="; Max-Age="+_.maxAge}if(_.domain){if(!n.test(_.domain))throw new TypeError(`option domain is invalid: ${_.domain}`);S+="; Domain="+_.domain}if(_.path){if(!a.test(_.path))throw new TypeError(`option path is invalid: ${_.path}`);S+="; Path="+_.path}if(_.expires){if(!p(_.expires)||!Number.isFinite(_.expires.valueOf()))throw new TypeError(`option expires is invalid: ${_.expires}`);S+="; Expires="+_.expires.toUTCString()}if(_.httpOnly&&(S+="; HttpOnly"),_.secure&&(S+="; Secure"),_.partitioned&&(S+="; Partitioned"),_.priority)switch(typeof _.priority=="string"?_.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${_.priority}`)}if(_.sameSite)switch(typeof _.sameSite=="string"?_.sameSite.toLowerCase():_.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${_.sameSite}`)}return S}function g(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function p(v){return l.call(v)==="[object Date]"}return dist$2}requireDist();/**
 * react-router v7.3.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(s={}){function o(a,l){let{pathname:c,search:u,hash:d}=a.location;return createLocation("",{pathname:c,search:u,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){return typeof l=="string"?l:createPath$1(l)}return getUrlBasedHistory(o,n,null,s)}function invariant(s,o){if(s===!1||s===null||typeof s>"u")throw new Error(o)}function warning(s,o){if(!s){typeof console<"u"&&console.warn(o);try{throw new Error(o)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(s,o){return{usr:s.state,key:s.key,idx:o}}function createLocation(s,o,n=null,a){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof o=="string"?parsePath(o):o,state:n,key:o&&o.key||a||createKey()}}function createPath$1({pathname:s="/",search:o="",hash:n=""}){return o&&o!=="?"&&(s+=o.charAt(0)==="?"?o:"?"+o),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function parsePath(s){let o={};if(s){let n=s.indexOf("#");n>=0&&(o.hash=s.substring(n),s=s.substring(0,n));let a=s.indexOf("?");a>=0&&(o.search=s.substring(a),s=s.substring(0,a)),s&&(o.pathname=s)}return o}function getUrlBasedHistory(s,o,n,a={}){let{window:l=document.defaultView,v5Compat:c=!1}=a,u=l.history,d="POP",h=null,f=g();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function g(){return(u.state||{idx:null}).idx}function p(){d="POP";let x=g(),S=x==null?null:x-f;f=x,h&&h({action:d,location:w.location,delta:S})}function v(x,S){d="PUSH";let C=createLocation(w.location,x,S);f=g()+1;let T=getHistoryState(C,f),R=w.createHref(C);try{u.pushState(T,"",R)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;l.location.assign(R)}c&&h&&h({action:d,location:w.location,delta:1})}function b(x,S){d="REPLACE";let C=createLocation(w.location,x,S);f=g();let T=getHistoryState(C,f),R=w.createHref(C);u.replaceState(T,"",R),c&&h&&h({action:d,location:w.location,delta:0})}function _(x){let S=l.location.origin!=="null"?l.location.origin:l.location.href,C=typeof x=="string"?x:createPath$1(x);return C=C.replace(/ $/,"%20"),invariant(S,`No window.location.(origin|href) available to create URL for href: ${C}`),new URL(C,S)}let w={get action(){return d},get location(){return s(l,u)},listen(x){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(PopStateEventType,p),h=x,()=>{l.removeEventListener(PopStateEventType,p),h=null}},createHref(x){return o(l,x)},createURL:_,encodeLocation(x){let S=_(x);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:b,go(x){return u.go(x)}};return w}function matchRoutes(s,o,n="/"){return matchRoutesImpl(s,o,n,!1)}function matchRoutesImpl(s,o,n,a){let l=typeof o=="string"?parsePath(o):o,c=stripBasename(l.pathname||"/",n);if(c==null)return null;let u=flattenRoutes(s);rankRouteBranches(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let f=decodePath(c);d=matchRouteBranch(u[h],f,a)}return d}function flattenRoutes(s,o=[],n=[],a=""){let l=(c,u,d)=>{let h={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};h.relativePath.startsWith("/")&&(invariant(h.relativePath.startsWith(a),`Absolute route path "${h.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(a.length));let f=joinPaths([a,h.relativePath]),g=n.concat(h);c.children&&c.children.length>0&&(invariant(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),flattenRoutes(c.children,o,g,f)),!(c.path==null&&!c.index)&&o.push({path:f,score:computeScore(f,c.index),routesMeta:g})};return s.forEach((c,u)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,u);else for(let h of explodeOptionalSegments(c.path))l(c,u,h)}),o}function explodeOptionalSegments(s){let o=s.split("/");if(o.length===0)return[];let[n,...a]=o,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(a.length===0)return l?[c,""]:[c];let u=explodeOptionalSegments(a.join("/")),d=[];return d.push(...u.map(h=>h===""?c:[c,h].join("/"))),l&&d.push(...u),d.map(h=>s.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(s){s.sort((o,n)=>o.score!==n.score?n.score-o.score:compareIndexes(o.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=s=>s==="*";function computeScore(s,o){let n=s.split("/"),a=n.length;return n.some(isSplat)&&(a+=splatPenalty),o&&(a+=indexRouteValue),n.filter(l=>!isSplat(l)).reduce((l,c)=>l+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(s,o){return s.length===o.length&&s.slice(0,-1).every((a,l)=>a===o[l])?s[s.length-1]-o[o.length-1]:0}function matchRouteBranch(s,o,n=!1){let{routesMeta:a}=s,l={},c="/",u=[];for(let d=0;d<a.length;++d){let h=a[d],f=d===a.length-1,g=c==="/"?o:o.slice(c.length)||"/",p=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},g),v=h.route;if(!p&&f&&n&&!a[a.length-1].route.index&&(p=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},g)),!p)return null;Object.assign(l,p.params),u.push({params:l,pathname:joinPaths([c,p.pathname]),pathnameBase:normalizePathname(joinPaths([c,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(c=joinPaths([c,p.pathnameBase]))}return u}function matchPath(s,o){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,a]=compilePath(s.path,s.caseSensitive,s.end),l=o.match(n);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:a.reduce((f,{paramName:g,isOptional:p},v)=>{if(g==="*"){let _=d[v]||"";u=c.slice(0,c.length-_.length).replace(/(.)\/+$/,"$1")}const b=d[v];return p&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:c,pathnameBase:u,pattern:s}}function compilePath(s,o=!1,n=!0){warning(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let a=[],l="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(a.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),l+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":s!==""&&s!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,o?void 0:"i"),a]}function decodePath(s){try{return s.split("/").map(o=>decodeURIComponent(o).replace(/\//g,"%2F")).join("/")}catch(o){return warning(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${o}).`),s}}function stripBasename(s,o){if(o==="/")return s;if(!s.toLowerCase().startsWith(o.toLowerCase()))return null;let n=o.endsWith("/")?o.length-1:o.length,a=s.charAt(n);return a&&a!=="/"?null:s.slice(n)||"/"}function resolvePath(s,o="/"){let{pathname:n,search:a="",hash:l=""}=typeof s=="string"?parsePath(s):s;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,o):o,search:normalizeSearch(a),hash:normalizeHash(l)}}function resolvePathname(s,o){let n=o.replace(/\/+$/,"").split("/");return s.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(s,o,n,a){return`Cannot include a '${s}' character in a manually specified \`to.${o}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(s){return s.filter((o,n)=>n===0||o.route.path&&o.route.path.length>0)}function getResolveToMatches(s){let o=getPathContributingMatches(s);return o.map((n,a)=>a===o.length-1?n.pathname:n.pathnameBase)}function resolveTo(s,o,n,a=!1){let l;typeof s=="string"?l=parsePath(s):(l={...s},invariant(!l.pathname||!l.pathname.includes("?"),getInvalidPathError("?","pathname","search",l)),invariant(!l.pathname||!l.pathname.includes("#"),getInvalidPathError("#","pathname","hash",l)),invariant(!l.search||!l.search.includes("#"),getInvalidPathError("#","search","hash",l)));let c=s===""||l.pathname==="",u=c?"/":l.pathname,d;if(u==null)d=n;else{let p=o.length-1;if(!a&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),p-=1;l.pathname=v.join("/")}d=p>=0?o[p]:"/"}let h=resolvePath(l,d),f=u&&u!=="/"&&u.endsWith("/"),g=(c||u===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||g)&&(h.pathname+="/"),h}var joinPaths=s=>s.join("/").replace(/\/\/+/g,"/"),normalizePathname=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,normalizeHash=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function isRouteErrorResponse(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=React__namespace.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=React__namespace.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=React__namespace.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=React__namespace.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=React__namespace.createContext(null);AwaitContext.displayName="Await";var NavigationContext=React__namespace.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=React__namespace.createContext(null);LocationContext.displayName="Location";var RouteContext=React__namespace.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=React__namespace.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(s,{relative:o}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=React__namespace.useContext(NavigationContext),{hash:l,pathname:c,search:u}=useResolvedPath(s,{relative:o}),d=c;return n!=="/"&&(d=c==="/"?n:joinPaths([n,c])),a.createHref({pathname:d,search:u,hash:l})}function useInRouterContext(){return React__namespace.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),React__namespace.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(s){React__namespace.useContext(NavigationContext).static||React__namespace.useLayoutEffect(s)}function useNavigate(){let{isDataRoute:s}=React__namespace.useContext(RouteContext);return s?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let s=React__namespace.useContext(DataRouterContext),{basename:o,navigator:n}=React__namespace.useContext(NavigationContext),{matches:a}=React__namespace.useContext(RouteContext),{pathname:l}=useLocation(),c=JSON.stringify(getResolveToMatches(a)),u=React__namespace.useRef(!1);return useIsomorphicLayoutEffect(()=>{u.current=!0}),React__namespace.useCallback((h,f={})=>{if(warning(u.current,navigateEffectWarning),!u.current)return;if(typeof h=="number"){n.go(h);return}let g=resolveTo(h,JSON.parse(c),l,f.relative==="path");s==null&&o!=="/"&&(g.pathname=g.pathname==="/"?o:joinPaths([o,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[o,n,c,l,s])}var OutletContext=React__namespace.createContext(null);function useOutlet(s){let o=React__namespace.useContext(RouteContext).outlet;return o&&React__namespace.createElement(OutletContext.Provider,{value:s},o)}function useParams(){let{matches:s}=React__namespace.useContext(RouteContext),o=s[s.length-1];return o?o.params:{}}function useResolvedPath(s,{relative:o}={}){let{matches:n}=React__namespace.useContext(RouteContext),{pathname:a}=useLocation(),l=JSON.stringify(getResolveToMatches(n));return React__namespace.useMemo(()=>resolveTo(s,JSON.parse(l),a,o==="path"),[s,l,a,o])}function useRoutes(s,o){return useRoutesImpl(s,o)}function useRoutesImpl(s,o,n,a){var C;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l,static:c}=React__namespace.useContext(NavigationContext),{matches:u}=React__namespace.useContext(RouteContext),d=u[u.length-1],h=d?d.params:{},f=d?d.pathname:"/",g=d?d.pathnameBase:"/",p=d&&d.route;{let T=p&&p.path||"";warningOnce(f,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let v=useLocation(),b;if(o){let T=typeof o=="string"?parsePath(o):o;invariant(g==="/"||((C=T.pathname)==null?void 0:C.startsWith(g)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${T.pathname}" was given in the \`location\` prop.`),b=T}else b=v;let _=b.pathname||"/",w=_;if(g!=="/"){let T=g.replace(/^\//,"").split("/");w="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=!c&&n&&n.matches&&n.matches.length>0?n.matches:matchRoutes(s,{pathname:w});warning(p||x!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),warning(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=_renderMatches(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},h,T.params),pathname:joinPaths([g,l.encodeLocation?l.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?g:joinPaths([g,l.encodeLocation?l.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),u,n,a);return o&&S?React__namespace.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},S):S}function DefaultErrorComponent(){let s=useRouteError(),o=isRouteErrorResponse(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},c={padding:"2px 4px",backgroundColor:a},u=null;return console.error("Error handled by React Router default ErrorBoundary:",s),u=React__namespace.createElement(React__namespace.Fragment,null,React__namespace.createElement("p",null,"💿 Hey developer 👋"),React__namespace.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",React__namespace.createElement("code",{style:c},"ErrorBoundary")," or"," ",React__namespace.createElement("code",{style:c},"errorElement")," prop on your route.")),React__namespace.createElement(React__namespace.Fragment,null,React__namespace.createElement("h2",null,"Unexpected Application Error!"),React__namespace.createElement("h3",{style:{fontStyle:"italic"}},o),n?React__namespace.createElement("pre",{style:l},n):null,u)}var defaultErrorElement=React__namespace.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends React__namespace.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,o){return o.location!==s.location||o.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:o.error,location:o.location,revalidation:s.revalidation||o.revalidation}}componentDidCatch(s,o){console.error("React Router caught the following error during render",s,o)}render(){return this.state.error!==void 0?React__namespace.createElement(RouteContext.Provider,{value:this.props.routeContext},React__namespace.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:s,match:o,children:n}){let a=React__namespace.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=o.route.id),React__namespace.createElement(RouteContext.Provider,{value:s},n)}function _renderMatches(s,o=[],n=null,a=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(o.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let l=s,c=n==null?void 0:n.errors;if(c!=null){let h=l.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);invariant(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let u=!1,d=-1;if(n)for(let h=0;h<l.length;h++){let f=l[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:g,errors:p}=n,v=f.route.loader&&!g.hasOwnProperty(f.route.id)&&(!p||p[f.route.id]===void 0);if(f.route.lazy||v){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,f,g)=>{let p,v=!1,b=null,_=null;n&&(p=c&&f.route.id?c[f.route.id]:void 0,b=f.route.errorElement||defaultErrorElement,u&&(d<0&&g===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):d===g&&(v=!0,_=f.route.hydrateFallbackElement||null)));let w=o.concat(l.slice(0,g+1)),x=()=>{let S;return p?S=b:v?S=_:f.route.Component?S=React__namespace.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,React__namespace.createElement(RenderedRoute,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?React__namespace.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}function getDataRouterConsoleError(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(s){let o=React__namespace.useContext(DataRouterContext);return invariant(o,getDataRouterConsoleError(s)),o}function useDataRouterState(s){let o=React__namespace.useContext(DataRouterStateContext);return invariant(o,getDataRouterConsoleError(s)),o}function useRouteContext(s){let o=React__namespace.useContext(RouteContext);return invariant(o,getDataRouterConsoleError(s)),o}function useCurrentRouteId(s){let o=useRouteContext(s),n=o.matches[o.matches.length-1];return invariant(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var a;let s=React__namespace.useContext(RouteErrorContext),o=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return s!==void 0?s:(a=o.errors)==null?void 0:a[n]}function useNavigateStable(){let{router:s}=useDataRouterContext("useNavigate"),o=useCurrentRouteId("useNavigate"),n=React__namespace.useRef(!1);return useIsomorphicLayoutEffect(()=>{n.current=!0}),React__namespace.useCallback(async(l,c={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof l=="number"?s.navigate(l):await s.navigate(l,{fromRouteId:o,...c}))},[s,o])}var alreadyWarned={};function warningOnce(s,o,n){!o&&!alreadyWarned[s]&&(alreadyWarned[s]=!0,warning(!1,n))}React__namespace.memo(DataRoutes);function DataRoutes({routes:s,future:o,state:n}){return useRoutesImpl(s,void 0,n,o)}function Navigate({to:s,replace:o,state:n,relative:a}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=React__namespace.useContext(NavigationContext);warning(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=React__namespace.useContext(RouteContext),{pathname:u}=useLocation(),d=useNavigate(),h=resolveTo(s,getResolveToMatches(c),u,a==="path"),f=JSON.stringify(h);return React__namespace.useEffect(()=>{d(JSON.parse(f),{replace:o,state:n,relative:a})},[d,f,a,o,n]),null}function Outlet(s){return useOutlet(s.context)}function Route(s){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:s="/",children:o=null,location:n,navigationType:a="POP",navigator:l,static:c=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=s.replace(/^\/*/,"/"),d=React__namespace.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);typeof n=="string"&&(n=parsePath(n));let{pathname:h="/",search:f="",hash:g="",state:p=null,key:v="default"}=n,b=React__namespace.useMemo(()=>{let _=stripBasename(h,u);return _==null?null:{location:{pathname:_,search:f,hash:g,state:p,key:v},navigationType:a}},[u,h,f,g,p,v,a]);return warning(b!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:React__namespace.createElement(NavigationContext.Provider,{value:d},React__namespace.createElement(LocationContext.Provider,{children:o,value:b}))}function Routes({children:s,location:o}){return useRoutes(createRoutesFromChildren(s),o)}function createRoutesFromChildren(s,o=[]){let n=[];return React__namespace.Children.forEach(s,(a,l)=>{if(!React__namespace.isValidElement(a))return;let c=[...o,l];if(a.type===React__namespace.Fragment){n.push.apply(n,createRoutesFromChildren(a.props.children,c));return}invariant(a.type===Route,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!a.props.index||!a.props.children,"An index route cannot have child routes.");let u={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(u.children=createRoutesFromChildren(a.props.children,c)),n.push(u)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(s){return s!=null&&typeof s.tagName=="string"}function isButtonElement(s){return isHtmlElement(s)&&s.tagName.toLowerCase()==="button"}function isFormElement(s){return isHtmlElement(s)&&s.tagName.toLowerCase()==="form"}function isInputElement(s){return isHtmlElement(s)&&s.tagName.toLowerCase()==="input"}function isModifiedEvent(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function shouldProcessLinkClick(s,o){return s.button===0&&(!o||o==="_self")&&!isModifiedEvent(s)}function createSearchParams(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((o,n)=>{let a=s[n];return o.concat(Array.isArray(a)?a.map(l=>[n,l]):[[n,a]])},[]))}function getSearchParamsForLocation(s,o){let n=createSearchParams(s);return o&&o.forEach((a,l)=>{n.has(l)||o.getAll(l).forEach(c=>{n.append(l,c)})}),n}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(s){return s!=null&&!supportedFormEncTypes.has(s)?(warning(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):s}function getFormSubmissionInfo(s,o){let n,a,l,c,u;if(isFormElement(s)){let d=s.getAttribute("action");a=d?stripBasename(d,o):null,n=s.getAttribute("method")||defaultMethod,l=getFormEncType(s.getAttribute("enctype"))||defaultEncType,c=new FormData(s)}else if(isButtonElement(s)||isInputElement(s)&&(s.type==="submit"||s.type==="image")){let d=s.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=s.getAttribute("formaction")||d.getAttribute("action");if(a=h?stripBasename(h,o):null,n=s.getAttribute("formmethod")||d.getAttribute("method")||defaultMethod,l=getFormEncType(s.getAttribute("formenctype"))||getFormEncType(d.getAttribute("enctype"))||defaultEncType,c=new FormData(d,s),!isFormDataSubmitterSupported()){let{name:f,type:g,value:p}=s;if(g==="image"){let v=f?`${f}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else f&&c.append(f,p)}}else{if(isHtmlElement(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,a=null,l=defaultEncType,u=s}return c&&l==="text/plain"&&(u=c,c=void 0),{action:a,method:n.toLowerCase(),encType:l,formData:c,body:u}}function invariant2(s,o){if(s===!1||s===null||typeof s>"u")throw new Error(o)}async function loadRouteModule(s,o){if(s.id in o)return o[s.id];try{let n=await import(s.module);return o[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function getKeyedPrefetchLinks(s,o,n){let a=await Promise.all(s.map(async l=>{let c=o.routes[l.route.id];if(c){let u=await loadRouteModule(c,n);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(a.flat(1).filter(isHtmlLinkDescriptor).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function getNewMatchesForLinks(s,o,n,a,l,c){let u=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>{var g;return n[f].pathname!==h.pathname||((g=n[f].route.path)==null?void 0:g.endsWith("*"))&&n[f].params["*"]!==h.params["*"]};return c==="assets"?o.filter((h,f)=>u(h,f)||d(h,f)):c==="data"?o.filter((h,f)=>{var p;let g=a.routes[h.route.id];if(!g||!g.hasLoader)return!1;if(u(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((p=n[0])==null?void 0:p.params)||{},nextUrl:new URL(s,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function getModuleLinkHrefs(s,o,{includeHydrateFallback:n}={}){return dedupeHrefs(s.map(a=>{let l=o.routes[a.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function dedupeHrefs(s){return[...new Set(s)]}function sortKeys(s){let o={},n=Object.keys(s).sort();for(let a of n)o[a]=s[a];return o}function dedupeLinkDescriptors(s,o){let n=new Set;return new Set(o),s.reduce((a,l)=>{let c=JSON.stringify(sortKeys(l));return n.has(c)||(n.add(c),a.push({key:c,link:l})),a},[])}function singleFetchUrl(s,o){let n=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return n.pathname==="/"?n.pathname="_root.data":o&&stripBasename(n.pathname,o)==="/"?n.pathname=`${o.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function useDataRouterContext2(){let s=React__namespace.useContext(DataRouterContext);return invariant2(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function useDataRouterStateContext(){let s=React__namespace.useContext(DataRouterStateContext);return invariant2(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var FrameworkContext=React__namespace.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let s=React__namespace.useContext(FrameworkContext);return invariant2(s,"You must render this element inside a <HydratedRouter> element"),s}function usePrefetchBehavior(s,o){let n=React__namespace.useContext(FrameworkContext),[a,l]=React__namespace.useState(!1),[c,u]=React__namespace.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:g,onTouchStart:p}=o,v=React__namespace.useRef(null);React__namespace.useEffect(()=>{if(s==="render"&&u(!0),s==="viewport"){let w=S=>{S.forEach(C=>{u(C.isIntersecting)})},x=new IntersectionObserver(w,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[s]),React__namespace.useEffect(()=>{if(a){let w=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(w)}}},[a]);let b=()=>{l(!0)},_=()=>{l(!1),u(!1)};return n?s!=="intent"?[c,v,{}]:[c,v,{onFocus:composeEventHandlers(d,b),onBlur:composeEventHandlers(h,_),onMouseEnter:composeEventHandlers(f,b),onMouseLeave:composeEventHandlers(g,_),onTouchStart:composeEventHandlers(p,b)}]:[!1,v,{}]}function composeEventHandlers(s,o){return n=>{s&&s(n),n.defaultPrevented||o(n)}}function PrefetchPageLinks({page:s,...o}){let{router:n}=useDataRouterContext2(),a=React__namespace.useMemo(()=>matchRoutes(n.routes,s,n.basename),[n.routes,s,n.basename]);return a?React__namespace.createElement(PrefetchPageLinksImpl,{page:s,matches:a,...o}):null}function useKeyedPrefetchLinks(s){let{manifest:o,routeModules:n}=useFrameworkContext(),[a,l]=React__namespace.useState([]);return React__namespace.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(s,o,n).then(u=>{c||l(u)}),()=>{c=!0}},[s,o,n]),a}function PrefetchPageLinksImpl({page:s,matches:o,...n}){let a=useLocation(),{manifest:l,routeModules:c}=useFrameworkContext(),{basename:u}=useDataRouterContext2(),{loaderData:d,matches:h}=useDataRouterStateContext(),f=React__namespace.useMemo(()=>getNewMatchesForLinks(s,o,h,l,a,"data"),[s,o,h,l,a]),g=React__namespace.useMemo(()=>getNewMatchesForLinks(s,o,h,l,a,"assets"),[s,o,h,l,a]),p=React__namespace.useMemo(()=>{if(s===a.pathname+a.search+a.hash)return[];let _=new Set,w=!1;if(o.forEach(S=>{var T;let C=l.routes[S.route.id];!C||!C.hasLoader||(!f.some(R=>R.route.id===S.route.id)&&S.route.id in d&&((T=c[S.route.id])!=null&&T.shouldRevalidate)||C.hasClientLoader?w=!0:_.add(S.route.id))}),_.size===0)return[];let x=singleFetchUrl(s,u);return w&&_.size>0&&x.searchParams.set("_routes",o.filter(S=>_.has(S.route.id)).map(S=>S.route.id).join(",")),[x.pathname+x.search]},[u,d,a,l,f,o,s,c]),v=React__namespace.useMemo(()=>getModuleLinkHrefs(g,l),[g,l]),b=useKeyedPrefetchLinks(g);return React__namespace.createElement(React__namespace.Fragment,null,p.map(_=>React__namespace.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),v.map(_=>React__namespace.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),b.map(({key:_,link:w})=>React__namespace.createElement("link",{key:_,...w})))}function mergeRefs(...s){return o=>{s.forEach(n=>{typeof n=="function"?n(o):n!=null&&(n.current=o)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.3.0")}catch{}function BrowserRouter({basename:s,children:o,window:n}){let a=React__namespace.useRef();a.current==null&&(a.current=createBrowserHistory({window:n,v5Compat:!0}));let l=a.current,[c,u]=React__namespace.useState({action:l.action,location:l.location}),d=React__namespace.useCallback(h=>{React__namespace.startTransition(()=>u(h))},[u]);return React__namespace.useLayoutEffect(()=>l.listen(d),[l,d]),React__namespace.createElement(Router,{basename:s,children:o,location:c.location,navigationType:c.action,navigator:l})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=React__namespace.forwardRef(function({onClick:o,discover:n="render",prefetch:a="none",relative:l,reloadDocument:c,replace:u,state:d,target:h,to:f,preventScrollReset:g,viewTransition:p,...v},b){let{basename:_}=React__namespace.useContext(NavigationContext),w=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),x,S=!1;if(typeof f=="string"&&w&&(x=f,isBrowser))try{let H=new URL(window.location.href),j=f.startsWith("//")?new URL(H.protocol+f):new URL(f),q=stripBasename(j.pathname,_);j.origin===H.origin&&q!=null?f=q+j.search+j.hash:S=!0}catch{warning(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=useHref(f,{relative:l}),[T,R,A]=usePrefetchBehavior(a,v),M=useLinkClickHandler(f,{replace:u,state:d,target:h,preventScrollReset:g,relative:l,viewTransition:p});function D(H){o&&o(H),H.defaultPrevented||M(H)}let O=React__namespace.createElement("a",{...v,...A,href:x||C,onClick:S||c?o:D,ref:mergeRefs(b,R),target:h,"data-discover":!w&&n==="render"?"true":void 0});return T&&!w?React__namespace.createElement(React__namespace.Fragment,null,O,React__namespace.createElement(PrefetchPageLinks,{page:C})):O});Link.displayName="Link";var NavLink=React__namespace.forwardRef(function({"aria-current":o="page",caseSensitive:n=!1,className:a="",end:l=!1,style:c,to:u,viewTransition:d,children:h,...f},g){let p=useResolvedPath(u,{relative:f.relative}),v=useLocation(),b=React__namespace.useContext(DataRouterStateContext),{navigator:_,basename:w}=React__namespace.useContext(NavigationContext),x=b!=null&&useViewTransitionState(p)&&d===!0,S=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,C=v.pathname,T=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(C=C.toLowerCase(),T=T?T.toLowerCase():null,S=S.toLowerCase()),T&&w&&(T=stripBasename(T,w)||T);const R=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let A=C===S||!l&&C.startsWith(S)&&C.charAt(R)==="/",M=T!=null&&(T===S||!l&&T.startsWith(S)&&T.charAt(S.length)==="/"),D={isActive:A,isPending:M,isTransitioning:x},O=A?o:void 0,H;typeof a=="function"?H=a(D):H=[a,A?"active":null,M?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let j=typeof c=="function"?c(D):c;return React__namespace.createElement(Link,{...f,"aria-current":O,className:H,ref:g,style:j,to:u,viewTransition:d},typeof h=="function"?h(D):h)});NavLink.displayName="NavLink";var Form=React__namespace.forwardRef(({discover:s="render",fetcherKey:o,navigate:n,reloadDocument:a,replace:l,state:c,method:u=defaultMethod,action:d,onSubmit:h,relative:f,preventScrollReset:g,viewTransition:p,...v},b)=>{let _=useSubmit(),w=useFormAction(d,{relative:f}),x=u.toLowerCase()==="get"?"get":"post",S=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),C=T=>{if(h&&h(T),T.defaultPrevented)return;T.preventDefault();let R=T.nativeEvent.submitter,A=(R==null?void 0:R.getAttribute("formmethod"))||u;_(R||T.currentTarget,{fetcherKey:o,method:A,navigate:n,replace:l,state:c,relative:f,preventScrollReset:g,viewTransition:p})};return React__namespace.createElement("form",{ref:b,method:x,action:w,onSubmit:a?h:C,...v,"data-discover":!S&&s==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(s){let o=React__namespace.useContext(DataRouterContext);return invariant(o,getDataRouterConsoleError2(s)),o}function useLinkClickHandler(s,{target:o,replace:n,state:a,preventScrollReset:l,relative:c,viewTransition:u}={}){let d=useNavigate(),h=useLocation(),f=useResolvedPath(s,{relative:c});return React__namespace.useCallback(g=>{if(shouldProcessLinkClick(g,o)){g.preventDefault();let p=n!==void 0?n:createPath$1(h)===createPath$1(f);d(s,{replace:p,state:a,preventScrollReset:l,relative:c,viewTransition:u})}},[h,d,f,n,a,o,s,l,c,u])}function useSearchParams(s){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let o=React__namespace.useRef(createSearchParams(s)),n=React__namespace.useRef(!1),a=useLocation(),l=React__namespace.useMemo(()=>getSearchParamsForLocation(a.search,n.current?null:o.current),[a.search]),c=useNavigate(),u=React__namespace.useCallback((d,h)=>{const f=createSearchParams(typeof d=="function"?d(l):d);n.current=!0,c("?"+f,h)},[c,l]);return[l,u]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:s}=useDataRouterContext3("useSubmit"),{basename:o}=React__namespace.useContext(NavigationContext),n=useRouteId();return React__namespace.useCallback(async(a,l={})=>{let{action:c,method:u,encType:d,formData:h,body:f}=getFormSubmissionInfo(a,o);if(l.navigate===!1){let g=l.fetcherKey||getUniqueFetcherId();await s.fetch(g,n,l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:f,formMethod:l.method||u,formEncType:l.encType||d,flushSync:l.flushSync})}else await s.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:f,formMethod:l.method||u,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[s,o,n])}function useFormAction(s,{relative:o}={}){let{basename:n}=React__namespace.useContext(NavigationContext),a=React__namespace.useContext(RouteContext);invariant(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),c={...useResolvedPath(s||".",{relative:o})},u=useLocation();if(s==null){c.search=u.search;let d=new URLSearchParams(c.search),h=d.getAll("index");if(h.some(g=>g==="")){d.delete("index"),h.filter(p=>p).forEach(p=>d.append("index",p));let g=d.toString();c.search=g?`?${g}`:""}}return(!s||s===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:joinPaths([n,c.pathname])),createPath$1(c)}function useViewTransitionState(s,o={}){let n=React__namespace.useContext(ViewTransitionContext);invariant(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=useDataRouterContext3("useViewTransitionState"),l=useResolvedPath(s,{relative:o.relative});if(!n.isTransitioning)return!1;let c=stripBasename(n.currentLocation.pathname,a)||n.currentLocation.pathname,u=stripBasename(n.nextLocation.pathname,a)||n.nextLocation.pathname;return matchPath(l.pathname,u)!=null||matchPath(l.pathname,c)!=null}new TextEncoder;function FormByType(s){const o=useForm({shouldFocusError:!1,shouldUnregister:!1}),n=useForm({shouldFocusError:!1,defaultValues:{Id:randomGID()},shouldUnregister:!1}),[a,l]=React.useState([]),[c,u]=React.useState([]),d=React.useMemo(()=>c.filter(A=>{var M;return A.Query&&((M=A.Query.match(regexGetVariableByThis$1))==null?void 0:M.length)}),[c.length]),h=React.useMemo(()=>c.filter(A=>{var M,D;return!((M=A.Query)!=null&&M.length)||!((D=A.Query.match(regexGetVariableByThis$1))!=null&&D.length)}),[c.length]),f=new TableController("column"),g=new TableController("rel"),p=new AccountController,v=React.useRef(null),b=React.useRef(null),_=useLocation(),w=new URLSearchParams(_.search),x=useNavigate(),{t:S}=useTranslation(),C=async A=>{var D;let M={...A};switch(delete M.id,s.formItem.Category){case 1:for(const j in M)if(j!=="Id")if(M[j]!==void 0&&M[j]!==null){let q=c.find(Y=>Y.Column===j)??a.find(Y=>Y.Name===j.replace("_min","").replace("_max",""));if(typeof M[j]!="string"||M[j].length||q)if(q)switch(q==null?void 0:q.DataType){case FEDataType.NUMBER:const Y=typeof M[j]=="string"?M[j].length?parseFloat(M[j].replaceAll(",","")):void 0:M[j];Y?(w.set(j,Y.toString()),M[j]=Y):(w.delete(j),delete M[j]);break;case FEDataType.DATE:case FEDataType.DATETIME:w.set(j,M[j].getTime().toString()),M[j]=M[j].getTime();break;case FEDataType.MONEY:const ee=typeof M[j]=="string"&&M[j].replaceAll(",","").length?parseInt(M[j].replaceAll(",","")):void 0;ee?(w.set(j,ee.toString()),M[j]=ee):(w.delete(j),delete M[j]);break;case FEDataType.BOOLEAN:[!0,1,"true"].includes(M[q.Name])?w.set(j,"true"):w.delete(j),M[j]=!![!0,1,"true"].includes(M[q.Name]);break;default:q.Column&&Array.isArray(M[q.Column])?(w.set(j,M[j].join(",")),M[j]=M[j].join(",")):w.set(j,M[j]);break}else w.set(j,M[j]);else w.delete(j),delete M[j]}else w.has(j)&&(w.delete(j),delete M[j]);delete M.Id,s.onSubmit?s.onSubmit(M):x(`?${w.toString()}`),v.current&&v.current.click();break;default:M.DateCreated??(M.DateCreated=Date.now());let O={};Object.keys(M).forEach(j=>{typeof M[j]=="string"&&(O[j]=M[j].trim())});const H=await validateForm({list:a.filter(j=>{var q;return(q=j.Form.Validate)==null?void 0:q.length}).map(j=>({Name:j.Name,Validate:j.Form.Validate})),formdata:O});if(H&&Object.keys(H).length>0){Object.keys(H).forEach(j=>{n.setError(j,{message:H[j].join(", ")})});return}for(let j of a)if(j.Name==="DateCreated")M[D=j.Name]??(M[D]=Date.now());else if(M[j.Name]!=null&&!j.Query)switch(j.DataType){case FEDataType.GID:break;case FEDataType.STRING:Array.isArray(M[j.Name])?M[j.Name]=M[j.Name].join(","):typeof M[j.Name]!="string"&&(M[j.Name]=`${M[j.Name]}`);break;case FEDataType.BOOLEAN:M[j.Name]=!![!0,1,"true"].includes(M[j.Name]);break;case FEDataType.NUMBER:M[j.Name]=typeof M[j.Name]=="string"?parseFloat(M[j.Name]):M[j.Name];break;case FEDataType.DATE:case FEDataType.DATETIME:M[j.Name]=M[j.Name].getTime();break;case FEDataType.MONEY:M[j.Name].replaceAll(",","").length?M[j.Name]=parseInt(M[j.Name].replaceAll(",","")):delete M[j.Name];break;case FEDataType.PASSWORD:const q=await p.hashPassword(M[j.Name]);M[j.Name]=q.data;break;case FEDataType.FILE:if(A[j.Name]&&Array.isArray(A[j.Name])){const Y=A[j.Name].filter(ee=>ee instanceof File);if(Y.length){const ee=await BaseDA.uploadFiles(Y);ee!=null&&ee.length&&(M[j.Name]=A[j.Name].map(te=>{var re;return te instanceof File?(re=ee.find(ae=>ae.Name===te.name))==null?void 0:re.Id:te.Id}).filter(te=>te==null?void 0:te.length).join(","))}else M[j.Name]=A[j.Name].map(ee=>ee.Id).join(",")}break}for(let j of c)M[j.Column]&&Array.isArray(M[j.Column])&&(M[j.Column]=M[j.Column].join(","));if(s.onSubmit)s.onSubmit(M);else{const q=await new DataController(s.formItem.TbName).add([M]);if(q.code!==200)return ToastMessage.errors(q.message)}v.current&&v.current.click();break}};React.useEffect(()=>{s.formItem&&(g.getListSimple({page:1,size:100,query:`@TableFK:{${s.formItem.TbName}} @Column:{${Object.keys(s.formItem.Props).filter(A=>s.formItem.Props[A]>=0).join(" | ")}}`}).then(A=>{A.code===200&&u(A.data.map(M=>{let D={...M,Form:M.Form?typeof M.Form=="string"?JSON.parse(M.Form):{...M.Form}:{Required:!0}};return D.Form.Sort=s.formItem.Props[M.Column],D.Form.Disabled=s.disabled,D}))}),f.getListSimple({page:1,size:100,query:`@TableName:{${s.formItem.TbName}} @Name:{${Object.keys(s.formItem.Props).filter(A=>s.formItem.Props[A]>=0).join(" | ")}}`}).then(A=>{A.code===200&&l(A.data.map(M=>{let D={...M,Form:M.Form?typeof M.Form=="string"?JSON.parse(M.Form):{...M.Form}:{Required:!0}};return D.Form.Sort=s.formItem.Props[M.Name],D.Form.Disabled=s.disabled,s.readonly&&D.Form.ComponentType===ComponentType.select1&&(D.Form.ReadOnly=s.readonly),D}))}))},[s.formItem]),React.useEffect(()=>{h.length&&T({relatives:h})},[h.length]);const T=({relatives:A=[],isWatch:M=!1})=>{A.forEach(D=>{var H,j;let O;if(s.customOptions&&(O=s.customOptions[`${D.Column}`]),O)o.setValue(`${D.Column}_Options`,O);else{const q=new DataController(D.TablePK);D.TablePK===s.formItem.TbName?q.filterByEmptyKey({page:1,size:500,searchRaw:(H=D.Query)!=null&&H.length?M?D.Query.replace(regexGetVariableByThis$1,Y=>n.getValues((regexGetVariableByThis$1.exec(Y)??[])[1])):D.Query:"*",key:"ParentId"}).then(async Y=>{Y.code===200&&o.setValue(`${D.Column}_Options`,Y.data??[])}):q.getListSimple({page:1,size:1e3,query:M?(j=D.Query)==null?void 0:j.replace(regexGetVariableByThis$1,Y=>n.getValues((regexGetVariableByThis$1.exec(Y)??[])[1])):D.Query,returns:["Id","Name","ParentId"]}).then(Y=>{Y.code===200&&o.setValue(`${D.Column}_Options`,Y.data??[])})}})};React.useEffect(()=>{if(a.length)if(n.reset(),s.formItem.Category===1){const A=(M,D)=>{if(D==null)return;let O=c.find(H=>H.Column===M);if(O??(O=a.find(H=>H.Name===M.replace("_min","").replace("_max",""))),O)switch(O.DataType){case FEDataType.NUMBER:n.setValue(M,typeof D=="string"?parseFloat(D):D);break;case FEDataType.DATE:case FEDataType.DATETIME:n.setValue(M,new Date(typeof D=="string"?parseInt(D):D));break;case FEDataType.MONEY:n.setValue(M,Util.money(D));break;case FEDataType.BOOLEAN:O.Form.ComponentType===ComponentType.radio?n.setValue(M,`${D}`):n.setValue(M,D==="true");break;default:n.setValue(M,O.Form.ComponentType===ComponentType.selectMultiple?D.split(","):D);break}else n.setValue(M,D)};if(s.data)for(const M in s.data)A(M,s.data[M]);for(const[M,D]of w)A(M,D)}else if(s.data){const A=s.data,M=[];Object.keys(A).forEach(D=>{var j,q;const O=a.find(Y=>Y.Name===D),H=c.find(Y=>Y.Column===D);if(O)switch(O.DataType){case FEDataType.GID:n.setValue(D,A[D]);break;case FEDataType.STRING:(j=O.Form.Options)!=null&&j.length?n.setValue(D,(A[D]??"").split(",")):n.setValue(D,A[D]);break;case FEDataType.HTML:n.setValue(D,A[D]);break;case FEDataType.BOOLEAN:n.setValue(D,A[D]),O.Form.ComponentType===ComponentType.radio&&n.setValue(D,`${A[D]}`);break;case FEDataType.NUMBER:n.setValue(D,typeof A[D]=="string"?parseFloat(A[D]):A[D]);break;case FEDataType.DATE:case FEDataType.DATETIME:n.setValue(D,new Date(typeof A[D]=="string"?parseInt(A[D]):A[D]));break;case FEDataType.MONEY:n.setValue(D,Util.money(A[D]));break;case FEDataType.PASSWORD:n.setValue(D,A[D]);break;case FEDataType.FILE:A[D]&&M.push({id:A[D],name:D,multiple:O.Form.Multiple});break}else if(H){const Y=(q=A[D])!=null&&q.length?A[D].split(","):[];n.setValue(D,H.Form.ComponentType===ComponentType.selectMultiple?Y:Y[0])}else n.setValue(D,A[D])}),M.length&&BaseDA.getFilesInfor(M.map(D=>D.id.split(",")).flat(1/0)).then(D=>{D.code===200&&M.forEach(O=>{const H=D.data.filter(j=>j!=null&&O.id.includes(j.Id));H.length&&n.setValue(O.name,H.map(j=>({...j,name:j.Name,size:j.Size,type:j.Type,url:ConfigData.imgUrlId+j.Id})))})})}else a.filter(A=>A.DefaultValue!=null).forEach(A=>{var M;switch(A.DataType){case FEDataType.GID:n.setValue(A.Name,A.Form.DefaultValue);break;case FEDataType.STRING:(M=A.Form.Options)!=null&&M.length?n.setValue(A.Name,A.Form.DefaultValue.split(",")):n.setValue(A.Name,A.Form.DefaultValue);break;case FEDataType.HTML:n.setValue(A.Name,A.Form.DefaultValue);break;case FEDataType.BOOLEAN:n.setValue(A.Name,A.Form.DefaultValue);break;case FEDataType.NUMBER:n.setValue(A.Name,typeof A.Form.DefaultValue=="string"?parseFloat(A.Form.DefaultValue):A.Form.DefaultValue);break;case FEDataType.DATE:case FEDataType.DATETIME:n.setValue(A.Name,new Date(typeof A.DefaultValue=="string"?parseInt(A.DefaultValue):A.DefaultValue));break;case FEDataType.MONEY:n.setValue(A.Name,Util.money(A.Form.DefaultValue));break;case FEDataType.PASSWORD:n.setValue(A.Name,A.Form.DefaultValue);break}})},[s.data,a.length,w.toString()]);const R=[FEDataType.DATE,FEDataType.DATETIME,FEDataType.NUMBER,FEDataType.MONEY];return jsxRuntimeExports.jsxs("form",{id:s.id,className:`col ${s.className??""}`,style:s.style,children:[d.length?jsxRuntimeExports.jsx(GetWatchRelValues,{methods:n,watchRel:d,getOptions:()=>{T({relatives:d,isWatch:!0})}}):null,jsxRuntimeExports.jsx("button",{hidden:!0,type:"button",className:"submit-form",onClick:n.handleSubmit(C)}),jsxRuntimeExports.jsx("button",{ref:v,hidden:!0,type:"button",className:"success-form"}),s.formItem.Category===1&&jsxRuntimeExports.jsx("button",{ref:b,hidden:!0,type:"button",className:"reset-form",onClick:()=>{[...a,...c].forEach(A=>{var M,D;R.includes(A.DataType)&&!((D=(M=A.Form)==null?void 0:M.Options)!=null&&D.length)&&(n.setValue(`${A.Name}_min`,null),n.setValue(`${A.Name}_max`,null)),n.setValue(A.Column??A.Name,null)})}}),(()=>{switch(s.formItem.Category){case 1:return a.map(A=>{var M,D,O,H;return(M=s.customFieldUI)!=null&&M[A.Name]?(D=s.customFieldUI)==null?void 0:D[A.Name](n):[FEDataType.DATE,FEDataType.DATETIME,FEDataType.NUMBER,FEDataType.MONEY].includes(A.DataType)&&!((H=(O=A.Form)==null?void 0:O.Options)!=null&&H.length)?jsxRuntimeExports.jsx(RangeForm,{methods:n,type:A.DataType===FEDataType.DATE?"daterange":A.DataType===FEDataType.DATETIME?"datetimerange":A.DataType===FEDataType.MONEY?"money":"number",name:`${A.Name}_min`,endName:`${A.Name}_max`,className:s.formItem.Type==="left-label col"?"row":void 0,label:A.Name==="DateCreated"?A.Form.Label??S("DateCreated"):A.Form.Label,style:{order:A.Form.Sort}},A.Id):jsxRuntimeExports.jsx(RenderComponentByType,{methods:n,fieldItem:{...A,Form:{...A.Form,Required:!1}},label:void 0,style:{order:A.Form.Sort},className:s.formItem.Type==="left-label col"?"row":void 0},A.Id)});default:return a.filter(A=>A.Name!=="Id"&&A.Name!=="DateCreated").map(A=>{var M,D;return(M=s.customFieldUI)!=null&&M[A.Name]?(D=s.customFieldUI)==null?void 0:D[A.Name](n):jsxRuntimeExports.jsx(RenderComponentByType,{methods:n,fieldItem:A,label:void 0,style:{order:A.Form.Sort},className:s.formItem.Type==="left-label col"?"row":void 0,labelStyle:s.formItem.Type==="left-label col"?{width:"16rem"}:void 0},A.Id)})}})(),c.map(A=>{var O,H,j;if((O=s.customFieldUI)!=null&&O[A.Column])return(H=s.customFieldUI)==null?void 0:H[A.Column](n);let D=(o.watch(`${A.Column}_Options`)??[]).map(q=>({id:q.Id,name:q.Name,parentId:q.ParentId}));switch((j=A.Form)==null?void 0:j.ComponentType){case ComponentType.selectMultiple:return jsxRuntimeExports.jsx(SelectMultipleForm,{methods:n,required:s.formItem.Category===1?!1:A.Form.Required,name:A.Column,label:A.Form.Label??A.Column,placeholder:A.Form.Placeholder,style:{order:A.Form.Sort},className:s.formItem.Type==="left-label col"?"row":void 0,options:D,disabled:A.Form.Disabled},A.Id);default:return jsxRuntimeExports.jsx(Select1Form,{required:s.formItem.Category===1?!1:A.Form.Required,methods:n,name:A.Column,label:A.Form.Label??A.Column,placeholder:A.Form.Placeholder,style:{order:A.Form.Sort},className:s.formItem.Type==="left-label col"?"row":void 0,options:D,disabled:A.Form.Disabled},A.Id)}})]})}const GetWatchRelValues=s=>(React.useEffect(()=>{s.getOptions()},s.watchRel.map(o=>{var a;const n=(a=o.Query)==null?void 0:a.match(regexGetVariableByThis$1)[0];return s.methods.watch(n.replace(regexGetVariableByThis$1,(l,c)=>c))})),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})),FormById=s=>{const[o,n]=React.useState();return React.useEffect(()=>{s.formId?new SettingDataController("form").getByIds([s.formId]).then(async l=>{if(l.code===200){let c=l.data[0];typeof c.Props=="string"&&(c.Props=JSON.parse(c.Props)),n(c)}}):o&&n(void 0)},[s.formId]),o?jsxRuntimeExports.jsx(FormByType,{formItem:o,...s},o.Id):null},styles={"chart-block":"_chart-block_1xm96_1"};var extendStatics$2=function(s,o){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},extendStatics$2(s,o)};function __extends$2(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics$2(s,o);function n(){this.constructor=s}s.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}var __assign=function(){return __assign=Object.assign||function(o){for(var n,a=1,l=arguments.length;a<l;a++){n=arguments[a];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(o[c]=n[c])}return o},__assign.apply(this,arguments)};function __awaiter(s,o,n,a){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function d(g){try{f(a.next(g))}catch(p){u(p)}}function h(g){try{f(a.throw(g))}catch(p){u(p)}}function f(g){g.done?c(g.value):l(g.value).then(d,h)}f((a=a.apply(s,o||[])).next())})}function __generator(s,o){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,l,c,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(f){return function(g){return h([f,g])}}function h(f){if(a)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(n=0)),n;)try{if(a=1,l&&(c=f[0]&2?l.return:f[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,f[1])).done)return c;switch(l=0,c&&(f=[f[0]&2,c.value]),f[0]){case 0:case 1:c=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,l=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!c||f[1]>c[0]&&f[1]<c[3])){n.label=f[1];break}if(f[0]===6&&n.label<c[1]){n.label=c[1],c=f;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(f);break}c[2]&&n.ops.pop(),n.trys.pop();continue}f=o.call(s,n)}catch(g){f=[6,g],l=0}finally{a=c=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(s,o){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},extendStatics$1(s,o)};function __extends$1(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics$1(s,o);function n(){this.constructor=s}s.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}var Browser=function(){function s(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return s}(),Env=function(){function s(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return s}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(s,o){var n=o.browser,a=s.match(/Firefox\/([\d.]+)/),l=s.match(/MSIE\s([\d.]+)/)||s.match(/Trident\/.+?rv:(([\d.]+))/),c=s.match(/Edge?\/([\d.]+)/),u=/micromessenger/i.test(s);a&&(n.firefox=!0,n.version=a[1]),l&&(n.ie=!0,n.version=l[1]),c&&(n.edge=!0,n.version=c[1],n.newEdge=+c[1].split(".")[0]>18),u&&(n.weChat=!0),o.svgSupported=typeof SVGRect<"u",o.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,o.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),o.domSupported=typeof document<"u";var d=document.documentElement.style;o.transform3dSupported=(n.ie&&"transition"in d||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in d)&&!("OTransition"in d),o.transformSupported=o.transform3dSupported||n.ie&&+n.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(s){var o={};if(typeof JSON>"u")return o;for(var n=0;n<s.length;n++){var a=String.fromCharCode(n+32),l=(s.charCodeAt(n)-OFFSET)/SCALE;o[a]=l}return o}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var s,o;return function(n,a){if(!s){var l=platformApi.createCanvas();s=l&&l.getContext("2d")}if(s)return o!==a&&(o=s.font=a||DEFAULT_FONT),s.measureText(n);n=n||"",a=a||DEFAULT_FONT;var c=/((?:\d+)?\.?\d*)px/.exec(a),u=c&&+c[1]||DEFAULT_FONT_SIZE,d=0;if(a.indexOf("mono")>=0)d=u*n.length;else for(var h=0;h<n.length;h++){var f=DEFAULT_TEXT_WIDTH_MAP[n[h]];d+=f==null?u:f*u}return{width:d}}}(),loadImage:function(s,o,n){var a=new Image;return a.onload=o,a.onerror=n,a.src=s,a}};function setPlatformAPI(s){for(var o in platformApi)s[o]&&(platformApi[o]=s[o])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(s,o){return s["[object "+o+"]"]=!0,s},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(s,o){return s["[object "+o+"Array]"]=!0,s},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];typeof console<"u"&&console.error.apply(console,s)}function clone$4(s){if(s==null||typeof s!="object")return s;var o=s,n=objToString.call(s);if(n==="[object Array]"){if(!isPrimitive(s)){o=[];for(var a=0,l=s.length;a<l;a++)o[a]=clone$4(s[a])}}else if(TYPED_ARRAY[n]){if(!isPrimitive(s)){var c=s.constructor;if(c.from)o=c.from(s);else{o=new c(s.length);for(var a=0,l=s.length;a<l;a++)o[a]=s[a]}}}else if(!BUILTIN_OBJECT[n]&&!isPrimitive(s)&&!isDom(s)){o={};for(var u in s)s.hasOwnProperty(u)&&u!==protoKey&&(o[u]=clone$4(s[u]))}return o}function merge(s,o,n){if(!isObject$3(o)||!isObject$3(s))return n?clone$4(o):s;for(var a in o)if(o.hasOwnProperty(a)&&a!==protoKey){var l=s[a],c=o[a];isObject$3(c)&&isObject$3(l)&&!isArray$1(c)&&!isArray$1(l)&&!isDom(c)&&!isDom(l)&&!isBuiltInObject(c)&&!isBuiltInObject(l)&&!isPrimitive(c)&&!isPrimitive(l)?merge(l,c,n):(n||!(a in s))&&(s[a]=clone$4(o[a]))}return s}function mergeAll(s,o){for(var n=s[0],a=1,l=s.length;a<l;a++)n=merge(n,s[a],o);return n}function extend(s,o){if(Object.assign)Object.assign(s,o);else for(var n in o)o.hasOwnProperty(n)&&n!==protoKey&&(s[n]=o[n]);return s}function defaults(s,o,n){for(var a=keys(o),l=0,c=a.length;l<c;l++){var u=a[l];(n?o[u]!=null:s[u]==null)&&(s[u]=o[u])}return s}var createCanvas=platformApi.createCanvas;function indexOf(s,o){if(s){if(s.indexOf)return s.indexOf(o);for(var n=0,a=s.length;n<a;n++)if(s[n]===o)return n}return-1}function inherits(s,o){var n=s.prototype;function a(){}a.prototype=o.prototype,s.prototype=new a;for(var l in n)n.hasOwnProperty(l)&&(s.prototype[l]=n[l]);s.prototype.constructor=s,s.superClass=o}function mixin(s,o,n){if(s="prototype"in s?s.prototype:s,o="prototype"in o?o.prototype:o,Object.getOwnPropertyNames)for(var a=Object.getOwnPropertyNames(o),l=0;l<a.length;l++){var c=a[l];c!=="constructor"&&(n?o[c]!=null:s[c]==null)&&(s[c]=o[c])}else defaults(s,o,n)}function isArrayLike(s){return!s||typeof s=="string"?!1:typeof s.length=="number"}function each$f(s,o,n){if(s&&o)if(s.forEach&&s.forEach===nativeForEach)s.forEach(o,n);else if(s.length===+s.length)for(var a=0,l=s.length;a<l;a++)o.call(n,s[a],a,s);else for(var c in s)s.hasOwnProperty(c)&&o.call(n,s[c],c,s)}function map$1(s,o,n){if(!s)return[];if(!o)return slice(s);if(s.map&&s.map===nativeMap)return s.map(o,n);for(var a=[],l=0,c=s.length;l<c;l++)a.push(o.call(n,s[l],l,s));return a}function reduce(s,o,n,a){if(s&&o){for(var l=0,c=s.length;l<c;l++)n=o.call(a,n,s[l],l,s);return n}}function filter(s,o,n){if(!s)return[];if(!o)return slice(s);if(s.filter&&s.filter===nativeFilter)return s.filter(o,n);for(var a=[],l=0,c=s.length;l<c;l++)o.call(n,s[l],l,s)&&a.push(s[l]);return a}function find(s,o,n){if(s&&o){for(var a=0,l=s.length;a<l;a++)if(o.call(n,s[a],a,s))return s[a]}}function keys(s){if(!s)return[];if(Object.keys)return Object.keys(s);var o=[];for(var n in s)s.hasOwnProperty(n)&&o.push(n);return o}function bindPolyfill(s,o){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return function(){return s.apply(o,n.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$1(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(s){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return function(){return s.apply(this,o.concat(nativeSlice.call(arguments)))}}function isArray$1(s){return Array.isArray?Array.isArray(s):objToString.call(s)==="[object Array]"}function isFunction$1(s){return typeof s=="function"}function isString$2(s){return typeof s=="string"}function isStringSafe(s){return objToString.call(s)==="[object String]"}function isNumber(s){return typeof s=="number"}function isObject$3(s){var o=typeof s;return o==="function"||!!s&&o==="object"}function isBuiltInObject(s){return!!BUILTIN_OBJECT[objToString.call(s)]}function isTypedArray(s){return!!TYPED_ARRAY[objToString.call(s)]}function isDom(s){return typeof s=="object"&&typeof s.nodeType=="number"&&typeof s.ownerDocument=="object"}function isGradientObject(s){return s.colorStops!=null}function isImagePatternObject(s){return s.image!=null}function isRegExp(s){return objToString.call(s)==="[object RegExp]"}function eqNaN(s){return s!==s}function retrieve(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];for(var n=0,a=s.length;n<a;n++)if(s[n]!=null)return s[n]}function retrieve2(s,o){return s??o}function retrieve3(s,o,n){return s??o??n}function slice(s){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return nativeSlice.apply(s,o)}function normalizeCssArray$1(s){if(typeof s=="number")return[s,s,s,s];var o=s.length;return o===2?[s[0],s[1],s[0],s[1]]:o===3?[s[0],s[1],s[2],s[1]]:s}function assert(s,o){if(!s)throw new Error(o)}function trim$1(s){return s==null?null:typeof s.trim=="function"?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(s){s[primitiveKey]=!0}function isPrimitive(s){return s[primitiveKey]}var MapPolyfill=function(){function s(){this.data={}}return s.prototype.delete=function(o){var n=this.has(o);return n&&delete this.data[o],n},s.prototype.has=function(o){return this.data.hasOwnProperty(o)},s.prototype.get=function(o){return this.data[o]},s.prototype.set=function(o,n){return this.data[o]=n,this},s.prototype.keys=function(){return keys(this.data)},s.prototype.forEach=function(o){var n=this.data;for(var a in n)n.hasOwnProperty(a)&&o(n[a],a)},s}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function s(o){var n=isArray$1(o);this.data=maybeNativeMap();var a=this;o instanceof s?o.each(l):o&&each$f(o,l);function l(c,u){n?a.set(c,u):a.set(u,c)}}return s.prototype.hasKey=function(o){return this.data.has(o)},s.prototype.get=function(o){return this.data.get(o)},s.prototype.set=function(o,n){return this.data.set(o,n),n},s.prototype.each=function(o,n){this.data.forEach(function(a,l){o.call(n,a,l)})},s.prototype.keys=function(){var o=this.data.keys();return isNativeMapSupported?Array.from(o):o},s.prototype.removeKey=function(o){this.data.delete(o)},s}();function createHashMap(s){return new HashMap(s)}function concatArray(s,o){for(var n=new s.constructor(s.length+o.length),a=0;a<s.length;a++)n[a]=s[a];for(var l=s.length,a=0;a<o.length;a++)n[a+l]=o[a];return n}function createObject(s,o){var n;if(Object.create)n=Object.create(s);else{var a=function(){};a.prototype=s,n=new a}return o&&extend(n,o),n}function disableUserSelect(s){var o=s.style;o.webkitUserSelect="none",o.userSelect="none",o.webkitTapHighlightColor="rgba(0,0,0,0)",o["-webkit-touch-callout"]="none"}function hasOwn(s,o){return s.hasOwnProperty(o)}function noop$1(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$1,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString:isString$2,isStringSafe,isTypedArray,keys,logError,map:map$1,merge,mergeAll,mixin,noop:noop$1,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(s,o){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(n[l]=a[l])},extendStatics(s,o)};function __extends(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");extendStatics(s,o);function n(){this.constructor=s}s.prototype=o===null?Object.create(o):(n.prototype=o.prototype,new n)}function create$2(s,o){return s==null&&(s=0),o==null&&(o=0),[s,o]}function copy$2(s,o){return s[0]=o[0],s[1]=o[1],s}function clone$3(s){return[s[0],s[1]]}function set$1(s,o,n){return s[0]=o,s[1]=n,s}function add(s,o,n){return s[0]=o[0]+n[0],s[1]=o[1]+n[1],s}function scaleAndAdd$1(s,o,n,a){return s[0]=o[0]+n[0]*a,s[1]=o[1]+n[1]*a,s}function sub(s,o,n){return s[0]=o[0]-n[0],s[1]=o[1]-n[1],s}function len(s){return Math.sqrt(lenSquare(s))}var length=len;function lenSquare(s){return s[0]*s[0]+s[1]*s[1]}var lengthSquare=lenSquare;function mul$1(s,o,n){return s[0]=o[0]*n[0],s[1]=o[1]*n[1],s}function div(s,o,n){return s[0]=o[0]/n[0],s[1]=o[1]/n[1],s}function dot(s,o){return s[0]*o[0]+s[1]*o[1]}function scale$2(s,o,n){return s[0]=o[0]*n,s[1]=o[1]*n,s}function normalize$3(s,o){var n=len(o);return n===0?(s[0]=0,s[1]=0):(s[0]=o[0]/n,s[1]=o[1]/n),s}function distance(s,o){return Math.sqrt((s[0]-o[0])*(s[0]-o[0])+(s[1]-o[1])*(s[1]-o[1]))}var dist$1=distance;function distanceSquare(s,o){return(s[0]-o[0])*(s[0]-o[0])+(s[1]-o[1])*(s[1]-o[1])}var distSquare=distanceSquare;function negate(s,o){return s[0]=-o[0],s[1]=-o[1],s}function lerp$1(s,o,n,a){return s[0]=o[0]+a*(n[0]-o[0]),s[1]=o[1]+a*(n[1]-o[1]),s}function applyTransform$1(s,o,n){var a=o[0],l=o[1];return s[0]=n[0]*a+n[2]*l+n[4],s[1]=n[1]*a+n[3]*l+n[5],s}function min$1(s,o,n){return s[0]=Math.min(o[0],n[0]),s[1]=Math.min(o[1],n[1]),s}function max$1(s,o,n){return s[0]=Math.max(o[0],n[0]),s[1]=Math.max(o[1],n[1]),s}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$2,create:create$2,dist:dist$1,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){function s(o,n){this.target=o,this.topTarget=n&&n.topTarget}return s}(),Draggable=function(){function s(o){this.handler=o,o.on("mousedown",this._dragStart,this),o.on("mousemove",this._drag,this),o.on("mouseup",this._dragEnd,this)}return s.prototype._dragStart=function(o){for(var n=o.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=o.offsetX,this._y=o.offsetY,this.handler.dispatchToElement(new Param(n,o),"dragstart",o.event))},s.prototype._drag=function(o){var n=this._draggingTarget;if(n){var a=o.offsetX,l=o.offsetY,c=a-this._x,u=l-this._y;this._x=a,this._y=l,n.drift(c,u,o),this.handler.dispatchToElement(new Param(n,o),"drag",o.event);var d=this.handler.findHover(a,l,n).target,h=this._dropTarget;this._dropTarget=d,n!==d&&(h&&d!==h&&this.handler.dispatchToElement(new Param(h,o),"dragleave",o.event),d&&d!==h&&this.handler.dispatchToElement(new Param(d,o),"dragenter",o.event))}},s.prototype._dragEnd=function(o){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Param(n,o),"dragend",o.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,o),"drop",o.event),this._draggingTarget=null,this._dropTarget=null},s}(),Eventful=function(){function s(o){o&&(this._$eventProcessor=o)}return s.prototype.on=function(o,n,a,l){this._$handlers||(this._$handlers={});var c=this._$handlers;if(typeof n=="function"&&(l=a,a=n,n=null),!a||!o)return this;var u=this._$eventProcessor;n!=null&&u&&u.normalizeQuery&&(n=u.normalizeQuery(n)),c[o]||(c[o]=[]);for(var d=0;d<c[o].length;d++)if(c[o][d].h===a)return this;var h={h:a,query:n,ctx:l||this,callAtLast:a.zrEventfulCallAtLast},f=c[o].length-1,g=c[o][f];return g&&g.callAtLast?c[o].splice(f,0,h):c[o].push(h),this},s.prototype.isSilent=function(o){var n=this._$handlers;return!n||!n[o]||!n[o].length},s.prototype.off=function(o,n){var a=this._$handlers;if(!a)return this;if(!o)return this._$handlers={},this;if(n){if(a[o]){for(var l=[],c=0,u=a[o].length;c<u;c++)a[o][c].h!==n&&l.push(a[o][c]);a[o]=l}a[o]&&a[o].length===0&&delete a[o]}else delete a[o];return this},s.prototype.trigger=function(o){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];if(!this._$handlers)return this;var l=this._$handlers[o],c=this._$eventProcessor;if(l)for(var u=n.length,d=l.length,h=0;h<d;h++){var f=l[h];if(!(c&&c.filter&&f.query!=null&&!c.filter(o,f.query)))switch(u){case 0:f.h.call(f.ctx);break;case 1:f.h.call(f.ctx,n[0]);break;case 2:f.h.call(f.ctx,n[0],n[1]);break;default:f.h.apply(f.ctx,n);break}}return c&&c.afterTrigger&&c.afterTrigger(o),this},s.prototype.triggerWithContext=function(o){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];if(!this._$handlers)return this;var l=this._$handlers[o],c=this._$eventProcessor;if(l)for(var u=n.length,d=n[u-1],h=l.length,f=0;f<h;f++){var g=l[f];if(!(c&&c.filter&&g.query!=null&&!c.filter(o,g.query)))switch(u){case 0:g.h.call(d);break;case 1:g.h.call(d,n[0]);break;case 2:g.h.call(d,n[0],n[1]);break;default:g.h.apply(d,n.slice(1,u-1));break}}return c&&c.afterTrigger&&c.afterTrigger(o),this},s}(),LN2=Math.log(2);function determinant(s,o,n,a,l,c){var u=a+"-"+l,d=s.length;if(c.hasOwnProperty(u))return c[u];if(o===1){var h=Math.round(Math.log((1<<d)-1&~l)/LN2);return s[n][h]}for(var f=a|1<<n,g=n+1;a&1<<g;)g++;for(var p=0,v=0,b=0;v<d;v++){var _=1<<v;_&l||(p+=(b%2?-1:1)*s[n][v]*determinant(s,o-1,g,f,l|_,c),b++)}return c[u]=p,p}function buildTransformer(s,o){var n=[[s[0],s[1],1,0,0,0,-o[0]*s[0],-o[0]*s[1]],[0,0,0,s[0],s[1],1,-o[1]*s[0],-o[1]*s[1]],[s[2],s[3],1,0,0,0,-o[2]*s[2],-o[2]*s[3]],[0,0,0,s[2],s[3],1,-o[3]*s[2],-o[3]*s[3]],[s[4],s[5],1,0,0,0,-o[4]*s[4],-o[4]*s[5]],[0,0,0,s[4],s[5],1,-o[5]*s[4],-o[5]*s[5]],[s[6],s[7],1,0,0,0,-o[6]*s[6],-o[6]*s[7]],[0,0,0,s[6],s[7],1,-o[7]*s[6],-o[7]*s[7]]],a={},l=determinant(n,8,0,0,0,a);if(l!==0){for(var c=[],u=0;u<8;u++)for(var d=0;d<8;d++)c[d]==null&&(c[d]=0),c[d]+=((u+d)%2?-1:1)*determinant(n,7,u===0?1:0,1<<u,1<<d,a)/l*o[u];return function(h,f,g){var p=f*c[6]+g*c[7]+1;h[0]=(f*c[0]+g*c[1]+c[2])/p,h[1]=(f*c[3]+g*c[4]+c[5])/p}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(s,o,n,a,l){return transformCoordWithViewport(_calcOut$1,o,a,l,!0)&&transformCoordWithViewport(s,n,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(s,o,n,a,l){if(o.getBoundingClientRect&&env.domSupported&&!isCanvasEl(o)){var c=o[EVENT_SAVED_PROP]||(o[EVENT_SAVED_PROP]={}),u=prepareCoordMarkers(o,c),d=preparePointerTransformer(u,c,l);if(d)return d(s,n,a),!0}return!1}function prepareCoordMarkers(s,o){var n=o.markers;if(n)return n;n=o.markers=[];for(var a=["left","right"],l=["top","bottom"],c=0;c<4;c++){var u=document.createElement("div"),d=u.style,h=c%2,f=(c>>1)%2;d.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",a[h]+":0",l[f]+":0",a[1-h]+":auto",l[1-f]+":auto",""].join("!important;"),s.appendChild(u),n.push(u)}return n}function preparePointerTransformer(s,o,n){for(var a=n?"invTrans":"trans",l=o[a],c=o.srcCoords,u=[],d=[],h=!0,f=0;f<4;f++){var g=s[f].getBoundingClientRect(),p=2*f,v=g.left,b=g.top;u.push(v,b),h=h&&c&&v===c[p]&&b===c[p+1],d.push(s[f].offsetLeft,s[f].offsetTop)}return h&&l?l:(o.srcCoords=u,o[a]=n?buildTransformer(d,u):buildTransformer(u,d))}function isCanvasEl(s){return s.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(s){return s==null?"":(s+"").replace(replaceReg,function(o,n){return replaceMap[n]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(s,o,n,a){return n=n||{},a?calculateZrXY(s,o,n):firefoxNotSupportOffsetXY&&o.layerX!=null&&o.layerX!==o.offsetX?(n.zrX=o.layerX,n.zrY=o.layerY):o.offsetX!=null?(n.zrX=o.offsetX,n.zrY=o.offsetY):calculateZrXY(s,o,n),n}function calculateZrXY(s,o,n){if(env.domSupported&&s.getBoundingClientRect){var a=o.clientX,l=o.clientY;if(isCanvasEl(s)){var c=s.getBoundingClientRect();n.zrX=a-c.left,n.zrY=l-c.top;return}else if(transformCoordWithViewport(_calcOut,s,a,l)){n.zrX=_calcOut[0],n.zrY=_calcOut[1];return}}n.zrX=n.zrY=0}function getNativeEvent(s){return s||window.event}function normalizeEvent(s,o,n){if(o=getNativeEvent(o),o.zrX!=null)return o;var a=o.type,l=a&&a.indexOf("touch")>=0;if(l){var u=a!=="touchend"?o.targetTouches[0]:o.changedTouches[0];u&&clientToLocal(s,u,o,n)}else{clientToLocal(s,o,o,n);var c=getWheelDeltaMayPolyfill(o);o.zrDelta=c?c/120:-(o.detail||0)/3}var d=o.button;return o.which==null&&d!==void 0&&MOUSE_EVENT_REG.test(o.type)&&(o.which=d&1?1:d&2?3:d&4?2:0),o}function getWheelDeltaMayPolyfill(s){var o=s.wheelDelta;if(o)return o;var n=s.deltaX,a=s.deltaY;if(n==null||a==null)return o;var l=Math.abs(a!==0?a:n),c=a>0?-1:a<0?1:n>0?-1:1;return 3*l*c}function addEventListener(s,o,n,a){s.addEventListener(o,n,a)}function removeEventListener(s,o,n,a){s.removeEventListener(o,n,a)}var stop=function(s){s.preventDefault(),s.stopPropagation(),s.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(s){return s.which===2||s.which===3}var GestureMgr=function(){function s(){this._track=[]}return s.prototype.recognize=function(o,n,a){return this._doTrack(o,n,a),this._recognize(o)},s.prototype.clear=function(){return this._track.length=0,this},s.prototype._doTrack=function(o,n,a){var l=o.touches;if(l){for(var c={points:[],touches:[],target:n,event:o},u=0,d=l.length;u<d;u++){var h=l[u],f=clientToLocal(a,h,{});c.points.push([f.zrX,f.zrY]),c.touches.push(h)}this._track.push(c)}},s.prototype._recognize=function(o){for(var n in recognizers)if(recognizers.hasOwnProperty(n)){var a=recognizers[n](this._track,o);if(a)return a}},s}();function dist(s){var o=s[1][0]-s[0][0],n=s[1][1]-s[0][1];return Math.sqrt(o*o+n*n)}function center$1(s){return[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]}var recognizers={pinch:function(s,o){var n=s.length;if(n){var a=(s[n-1]||{}).points,l=(s[n-2]||{}).points||a;if(l&&l.length>1&&a&&a.length>1){var c=dist(a)/dist(l);!isFinite(c)&&(c=1),o.pinchScale=c;var u=center$1(a);return o.pinchX=u[0],o.pinchY=u[1],{type:"pinch",target:s[0].target,event:o}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=1,s[4]=0,s[5]=0,s}function copy$1(s,o){return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s}function mul(s,o,n){var a=o[0]*n[0]+o[2]*n[1],l=o[1]*n[0]+o[3]*n[1],c=o[0]*n[2]+o[2]*n[3],u=o[1]*n[2]+o[3]*n[3],d=o[0]*n[4]+o[2]*n[5]+o[4],h=o[1]*n[4]+o[3]*n[5]+o[5];return s[0]=a,s[1]=l,s[2]=c,s[3]=u,s[4]=d,s[5]=h,s}function translate(s,o,n){return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4]+n[0],s[5]=o[5]+n[1],s}function rotate(s,o,n,a){a===void 0&&(a=[0,0]);var l=o[0],c=o[2],u=o[4],d=o[1],h=o[3],f=o[5],g=Math.sin(n),p=Math.cos(n);return s[0]=l*p+d*g,s[1]=-l*g+d*p,s[2]=c*p+h*g,s[3]=-c*g+p*h,s[4]=p*(u-a[0])+g*(f-a[1])+a[0],s[5]=p*(f-a[1])-g*(u-a[0])+a[1],s}function scale$1(s,o,n){var a=n[0],l=n[1];return s[0]=o[0]*a,s[1]=o[1]*l,s[2]=o[2]*a,s[3]=o[3]*l,s[4]=o[4]*a,s[5]=o[5]*l,s}function invert(s,o){var n=o[0],a=o[2],l=o[4],c=o[1],u=o[3],d=o[5],h=n*u-c*a;return h?(h=1/h,s[0]=u*h,s[1]=-c*h,s[2]=-a*h,s[3]=n*h,s[4]=(a*d-u*l)*h,s[5]=(c*l-n*d)*h,s):null}function clone$2(s){var o=create$1();return copy$1(o,s),o}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy:copy$1,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function s(o,n){this.x=o||0,this.y=n||0}return s.prototype.copy=function(o){return this.x=o.x,this.y=o.y,this},s.prototype.clone=function(){return new s(this.x,this.y)},s.prototype.set=function(o,n){return this.x=o,this.y=n,this},s.prototype.equal=function(o){return o.x===this.x&&o.y===this.y},s.prototype.add=function(o){return this.x+=o.x,this.y+=o.y,this},s.prototype.scale=function(o){this.x*=o,this.y*=o},s.prototype.scaleAndAdd=function(o,n){this.x+=o.x*n,this.y+=o.y*n},s.prototype.sub=function(o){return this.x-=o.x,this.y-=o.y,this},s.prototype.dot=function(o){return this.x*o.x+this.y*o.y},s.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},s.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},s.prototype.normalize=function(){var o=this.len();return this.x/=o,this.y/=o,this},s.prototype.distance=function(o){var n=this.x-o.x,a=this.y-o.y;return Math.sqrt(n*n+a*a)},s.prototype.distanceSquare=function(o){var n=this.x-o.x,a=this.y-o.y;return n*n+a*a},s.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},s.prototype.transform=function(o){if(o){var n=this.x,a=this.y;return this.x=o[0]*n+o[2]*a+o[4],this.y=o[1]*n+o[3]*a+o[5],this}},s.prototype.toArray=function(o){return o[0]=this.x,o[1]=this.y,o},s.prototype.fromArray=function(o){this.x=o[0],this.y=o[1]},s.set=function(o,n,a){o.x=n,o.y=a},s.copy=function(o,n){o.x=n.x,o.y=n.y},s.len=function(o){return Math.sqrt(o.x*o.x+o.y*o.y)},s.lenSquare=function(o){return o.x*o.x+o.y*o.y},s.dot=function(o,n){return o.x*n.x+o.y*n.y},s.add=function(o,n,a){o.x=n.x+a.x,o.y=n.y+a.y},s.sub=function(o,n,a){o.x=n.x-a.x,o.y=n.y-a.y},s.scale=function(o,n,a){o.x=n.x*a,o.y=n.y*a},s.scaleAndAdd=function(o,n,a,l){o.x=n.x+a.x*l,o.y=n.y+a.y*l},s.lerp=function(o,n,a,l){var c=1-l;o.x=c*n.x+l*a.x,o.y=c*n.y+l*a.y},s}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function s(o,n,a,l){a<0&&(o=o+a,a=-a),l<0&&(n=n+l,l=-l),this.x=o,this.y=n,this.width=a,this.height=l}return s.prototype.union=function(o){var n=mathMin$a(o.x,this.x),a=mathMin$a(o.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(o.x+o.width,this.x+this.width)-n:this.width=o.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(o.y+o.height,this.y+this.height)-a:this.height=o.height,this.x=n,this.y=a},s.prototype.applyTransform=function(o){s.applyTransform(this,this,o)},s.prototype.calculateTransform=function(o){var n=this,a=o.width/n.width,l=o.height/n.height,c=create$1();return translate(c,c,[-n.x,-n.y]),scale$1(c,c,[a,l]),translate(c,c,[o.x,o.y]),c},s.prototype.intersect=function(o,n){if(!o)return!1;o instanceof s||(o=s.create(o));var a=this,l=a.x,c=a.x+a.width,u=a.y,d=a.y+a.height,h=o.x,f=o.x+o.width,g=o.y,p=o.y+o.height,v=!(c<h||f<l||d<g||p<u);if(n){var b=1/0,_=0,w=Math.abs(c-h),x=Math.abs(f-l),S=Math.abs(d-g),C=Math.abs(p-u),T=Math.min(w,x),R=Math.min(S,C);c<h||f<l?T>_&&(_=T,w<x?Point.set(maxTv$1,-w,0):Point.set(maxTv$1,x,0)):T<b&&(b=T,w<x?Point.set(minTv$1,w,0):Point.set(minTv$1,-x,0)),d<g||p<u?R>_&&(_=R,S<C?Point.set(maxTv$1,0,-S):Point.set(maxTv$1,0,C)):T<b&&(b=T,S<C?Point.set(minTv$1,0,S):Point.set(minTv$1,0,-C))}return n&&Point.copy(n,v?minTv$1:maxTv$1),v},s.prototype.contain=function(o,n){var a=this;return o>=a.x&&o<=a.x+a.width&&n>=a.y&&n<=a.y+a.height},s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.copy=function(o){s.copy(this,o)},s.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},s.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},s.prototype.isZero=function(){return this.width===0||this.height===0},s.create=function(o){return new s(o.x,o.y,o.width,o.height)},s.copy=function(o,n){o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height},s.applyTransform=function(o,n,a){if(!a){o!==n&&s.copy(o,n);return}if(a[1]<1e-5&&a[1]>-1e-5&&a[2]<1e-5&&a[2]>-1e-5){var l=a[0],c=a[3],u=a[4],d=a[5];o.x=n.x*l+u,o.y=n.y*c+d,o.width=n.width*l,o.height=n.height*c,o.width<0&&(o.x+=o.width,o.width=-o.width),o.height<0&&(o.y+=o.height,o.height=-o.height);return}lt.x=lb.x=n.x,lt.y=rt.y=n.y,rb.x=rt.x=n.x+n.width,rb.y=lb.y=n.y+n.height,lt.transform(a),rt.transform(a),rb.transform(a),lb.transform(a),o.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),o.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var h=mathMax$a(lt.x,rb.x,lb.x,rt.x),f=mathMax$a(lt.y,rb.y,lb.y,rt.y);o.width=h-o.x,o.height=f-o.y},s}(),SILENT="silent";function makeEventPacket(s,o,n){return{type:s,event:n,target:o.target,topTarget:o.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(s){__extends(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.handler=null,n}return o.prototype.dispose=function(){},o.prototype.setCursor=function(){},o}(Eventful),HoveredResult=function(){function s(o,n){this.x=o,this.y=n}return s}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(s){__extends(o,s);function o(n,a,l,c,u){var d=s.call(this)||this;return d._hovered=new HoveredResult(0,0),d.storage=n,d.painter=a,d.painterRoot=c,d._pointerSize=u,l=l||new EmptyProxy,d.proxy=null,d.setHandlerProxy(l),d._draggingMgr=new Draggable(d),d}return o.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(each$f(handlerNames,function(a){n.on&&n.on(a,this[a],this)},this),n.handler=this),this.proxy=n},o.prototype.mousemove=function(n){var a=n.zrX,l=n.zrY,c=isOutsideBoundary(this,a,l),u=this._hovered,d=u.target;d&&!d.__zr&&(u=this.findHover(u.x,u.y),d=u.target);var h=this._hovered=c?new HoveredResult(a,l):this.findHover(a,l),f=h.target,g=this.proxy;g.setCursor&&g.setCursor(f?f.cursor:"default"),d&&f!==d&&this.dispatchToElement(u,"mouseout",n),this.dispatchToElement(h,"mousemove",n),f&&f!==d&&this.dispatchToElement(h,"mouseover",n)},o.prototype.mouseout=function(n){var a=n.zrEventControl;a!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),a!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},o.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},o.prototype.dispatch=function(n,a){var l=this[n];l&&l.call(this,a)},o.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},o.prototype.setCursorStyle=function(n){var a=this.proxy;a.setCursor&&a.setCursor(n)},o.prototype.dispatchToElement=function(n,a,l){n=n||{};var c=n.target;if(!(c&&c.silent)){for(var u="on"+a,d=makeEventPacket(a,n,l);c&&(c[u]&&(d.cancelBubble=!!c[u].call(c,d)),c.trigger(a,d),c=c.__hostTarget?c.__hostTarget:c.parent,!d.cancelBubble););d.cancelBubble||(this.trigger(a,d),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(h){typeof h[u]=="function"&&h[u].call(h,d),h.trigger&&h.trigger(a,d)}))}},o.prototype.findHover=function(n,a,l){var c=this.storage.getDisplayList(),u=new HoveredResult(n,a);if(setHoverTarget(c,u,n,a,l),this._pointerSize&&!u.target){for(var d=[],h=this._pointerSize,f=h/2,g=new BoundingRect(n-f,a-f,h,h),p=c.length-1;p>=0;p--){var v=c[p];v!==l&&!v.ignore&&!v.ignoreCoarsePointer&&(!v.parent||!v.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(v.getBoundingRect()),v.transform&&tmpRect$1.applyTransform(v.transform),tmpRect$1.intersect(g)&&d.push(v))}if(d.length)for(var b=4,_=Math.PI/12,w=Math.PI*2,x=0;x<f;x+=b)for(var S=0;S<w;S+=_){var C=n+x*Math.cos(S),T=a+x*Math.sin(S);if(setHoverTarget(d,u,C,T,l),u.target)return u}}return u},o.prototype.processGesture=function(n,a){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;a==="start"&&l.clear();var c=l.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(a==="end"&&l.clear(),c){var u=c.type;n.gestureEvent=u;var d=new HoveredResult;d.target=c.target,this.dispatchToElement(d,u,c.event)}},o}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(s){Handler.prototype[s]=function(o){var n=o.zrX,a=o.zrY,l=isOutsideBoundary(this,n,a),c,u;if((s!=="mouseup"||!l)&&(c=this.findHover(n,a),u=c.target),s==="mousedown")this._downEl=u,this._downPoint=[o.zrX,o.zrY],this._upEl=u;else if(s==="mouseup")this._upEl=u;else if(s==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$1(this._downPoint,[o.zrX,o.zrY])>4)return;this._downPoint=null}this.dispatchToElement(c,s,o)}});function isHover(s,o,n){if(s[s.rectHover?"rectContain":"contain"](o,n)){for(var a=s,l=void 0,c=!1;a;){if(a.ignoreClip&&(c=!0),!c){var u=a.getClipPath();if(u&&!u.contain(o,n))return!1}a.silent&&(l=!0);var d=a.__hostTarget;a=d||a.parent}return l?SILENT:!0}return!1}function setHoverTarget(s,o,n,a,l){for(var c=s.length-1;c>=0;c--){var u=s[c],d=void 0;if(u!==l&&!u.ignore&&(d=isHover(u,n,a))&&(!o.topTarget&&(o.topTarget=u),d!==SILENT)){o.target=u;break}}}function isOutsideBoundary(s,o,n){var a=s.painter;return o<0||o>a.getWidth()||n<0||n>a.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(s){for(var o=0;s>=DEFAULT_MIN_MERGE;)o|=s&1,s>>=1;return s+o}function makeAscendingRun(s,o,n,a){var l=o+1;if(l===n)return 1;if(a(s[l++],s[o])<0){for(;l<n&&a(s[l],s[l-1])<0;)l++;reverseRun(s,o,l)}else for(;l<n&&a(s[l],s[l-1])>=0;)l++;return l-o}function reverseRun(s,o,n){for(n--;o<n;){var a=s[o];s[o++]=s[n],s[n--]=a}}function binaryInsertionSort(s,o,n,a,l){for(a===o&&a++;a<n;a++){for(var c=s[a],u=o,d=a,h;u<d;)h=u+d>>>1,l(c,s[h])<0?d=h:u=h+1;var f=a-u;switch(f){case 3:s[u+3]=s[u+2];case 2:s[u+2]=s[u+1];case 1:s[u+1]=s[u];break;default:for(;f>0;)s[u+f]=s[u+f-1],f--}s[u]=c}}function gallopLeft(s,o,n,a,l,c){var u=0,d=0,h=1;if(c(s,o[n+l])>0){for(d=a-l;h<d&&c(s,o[n+l+h])>0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d),u+=l,h+=l}else{for(d=l+1;h<d&&c(s,o[n+l-h])<=0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d);var f=u;u=l-h,h=l-f}for(u++;u<h;){var g=u+(h-u>>>1);c(s,o[n+g])>0?u=g+1:h=g}return h}function gallopRight(s,o,n,a,l,c){var u=0,d=0,h=1;if(c(s,o[n+l])<0){for(d=l+1;h<d&&c(s,o[n+l-h])<0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d);var f=u;u=l-h,h=l-f}else{for(d=a-l;h<d&&c(s,o[n+l+h])>=0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d),u+=l,h+=l}for(u++;u<h;){var g=u+(h-u>>>1);c(s,o[n+g])<0?h=g:u=g+1}return h}function TimSort(s,o){var n=DEFAULT_MIN_GALLOPING,a,l,c=0,u=[];a=[],l=[];function d(b,_){a[c]=b,l[c]=_,c+=1}function h(){for(;c>1;){var b=c-2;if(b>=1&&l[b-1]<=l[b]+l[b+1]||b>=2&&l[b-2]<=l[b]+l[b-1])l[b-1]<l[b+1]&&b--;else if(l[b]>l[b+1])break;g(b)}}function f(){for(;c>1;){var b=c-2;b>0&&l[b-1]<l[b+1]&&b--,g(b)}}function g(b){var _=a[b],w=l[b],x=a[b+1],S=l[b+1];l[b]=w+S,b===c-3&&(a[b+1]=a[b+2],l[b+1]=l[b+2]),c--;var C=gallopRight(s[x],s,_,w,0,o);_+=C,w-=C,w!==0&&(S=gallopLeft(s[_+w-1],s,x,S,S-1,o),S!==0&&(w<=S?p(_,w,x,S):v(_,w,x,S)))}function p(b,_,w,x){var S=0;for(S=0;S<_;S++)u[S]=s[b+S];var C=0,T=w,R=b;if(s[R++]=s[T++],--x===0){for(S=0;S<_;S++)s[R+S]=u[C+S];return}if(_===1){for(S=0;S<x;S++)s[R+S]=s[T+S];s[R+x]=u[C];return}for(var A=n,M,D,O;;){M=0,D=0,O=!1;do if(o(s[T],u[C])<0){if(s[R++]=s[T++],D++,M=0,--x===0){O=!0;break}}else if(s[R++]=u[C++],M++,D=0,--_===1){O=!0;break}while((M|D)<A);if(O)break;do{if(M=gallopRight(s[T],u,C,_,0,o),M!==0){for(S=0;S<M;S++)s[R+S]=u[C+S];if(R+=M,C+=M,_-=M,_<=1){O=!0;break}}if(s[R++]=s[T++],--x===0){O=!0;break}if(D=gallopLeft(u[C],s,T,x,0,o),D!==0){for(S=0;S<D;S++)s[R+S]=s[T+S];if(R+=D,T+=D,x-=D,x===0){O=!0;break}}if(s[R++]=u[C++],--_===1){O=!0;break}A--}while(M>=DEFAULT_MIN_GALLOPING||D>=DEFAULT_MIN_GALLOPING);if(O)break;A<0&&(A=0),A+=2}if(n=A,n<1&&(n=1),_===1){for(S=0;S<x;S++)s[R+S]=s[T+S];s[R+x]=u[C]}else{if(_===0)throw new Error;for(S=0;S<_;S++)s[R+S]=u[C+S]}}function v(b,_,w,x){var S=0;for(S=0;S<x;S++)u[S]=s[w+S];var C=b+_-1,T=x-1,R=w+x-1,A=0,M=0;if(s[R--]=s[C--],--_===0){for(A=R-(x-1),S=0;S<x;S++)s[A+S]=u[S];return}if(x===1){for(R-=_,C-=_,M=R+1,A=C+1,S=_-1;S>=0;S--)s[M+S]=s[A+S];s[R]=u[T];return}for(var D=n;;){var O=0,H=0,j=!1;do if(o(u[T],s[C])<0){if(s[R--]=s[C--],O++,H=0,--_===0){j=!0;break}}else if(s[R--]=u[T--],H++,O=0,--x===1){j=!0;break}while((O|H)<D);if(j)break;do{if(O=_-gallopRight(u[T],s,b,_,_-1,o),O!==0){for(R-=O,C-=O,_-=O,M=R+1,A=C+1,S=O-1;S>=0;S--)s[M+S]=s[A+S];if(_===0){j=!0;break}}if(s[R--]=u[T--],--x===1){j=!0;break}if(H=x-gallopLeft(s[C],u,0,x,x-1,o),H!==0){for(R-=H,T-=H,x-=H,M=R+1,A=T+1,S=0;S<H;S++)s[M+S]=u[A+S];if(x<=1){j=!0;break}}if(s[R--]=s[C--],--_===0){j=!0;break}D--}while(O>=DEFAULT_MIN_GALLOPING||H>=DEFAULT_MIN_GALLOPING);if(j)break;D<0&&(D=0),D+=2}if(n=D,n<1&&(n=1),x===1){for(R-=_,C-=_,M=R+1,A=C+1,S=_-1;S>=0;S--)s[M+S]=s[A+S];s[R]=u[T]}else{if(x===0)throw new Error;for(A=R-(x-1),S=0;S<x;S++)s[A+S]=u[S]}}return{mergeRuns:h,forceMergeRuns:f,pushRun:d}}function sort$2(s,o,n,a){n||(n=0),a||(a=s.length);var l=a-n;if(!(l<2)){var c=0;if(l<DEFAULT_MIN_MERGE){c=makeAscendingRun(s,n,a,o),binaryInsertionSort(s,n,a,n+c,o);return}var u=TimSort(s,o),d=minRunLength(l);do{if(c=makeAscendingRun(s,n,a,o),c<d){var h=l;h>d&&(h=d),binaryInsertionSort(s,n,n+h,n+c,o),c=h}u.pushRun(n,c),u.mergeRuns(),l-=c,n+=c}while(l!==0);u.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(s,o){return s.zlevel===o.zlevel?s.z===o.z?s.z2-o.z2:s.z-o.z:s.zlevel-o.zlevel}var Storage=function(){function s(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return s.prototype.traverse=function(o,n){for(var a=0;a<this._roots.length;a++)this._roots[a].traverse(o,n)},s.prototype.getDisplayList=function(o,n){n=n||!1;var a=this._displayList;return(o||!a.length)&&this.updateDisplayList(n),a},s.prototype.updateDisplayList=function(o){this._displayListLen=0;for(var n=this._roots,a=this._displayList,l=0,c=n.length;l<c;l++)this._updateAndAddDisplayable(n[l],null,o);a.length=this._displayListLen,sort$2(a,shapeCompareFunc)},s.prototype._updateAndAddDisplayable=function(o,n,a){if(!(o.ignore&&!a)){o.beforeUpdate(),o.update(),o.afterUpdate();var l=o.getClipPath();if(o.ignoreClip)n=null;else if(l){n?n=n.slice():n=[];for(var c=l,u=o;c;)c.parent=u,c.updateTransform(),n.push(c),u=c,c=c.getClipPath()}if(o.childrenRef){for(var d=o.childrenRef(),h=0;h<d.length;h++){var f=d[h];o.__dirty&&(f.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(f,n,a)}o.__dirty=0}else{var g=o;n&&n.length?g.__clipPaths=n:g.__clipPaths&&g.__clipPaths.length>0&&(g.__clipPaths=[]),isNaN(g.z)&&(logInvalidZError(),g.z=0),isNaN(g.z2)&&(logInvalidZError(),g.z2=0),isNaN(g.zlevel)&&(logInvalidZError(),g.zlevel=0),this._displayList[this._displayListLen++]=g}var p=o.getDecalElement&&o.getDecalElement();p&&this._updateAndAddDisplayable(p,n,a);var v=o.getTextGuideLine();v&&this._updateAndAddDisplayable(v,n,a);var b=o.getTextContent();b&&this._updateAndAddDisplayable(b,n,a)}},s.prototype.addRoot=function(o){o.__zr&&o.__zr.storage===this||this._roots.push(o)},s.prototype.delRoot=function(o){if(o instanceof Array){for(var n=0,a=o.length;n<a;n++)this.delRoot(o[n]);return}var l=indexOf(this._roots,o);l>=0&&this._roots.splice(l,1)},s.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},s.prototype.getRoots=function(){return this._roots},s.prototype.dispose=function(){this._displayList=null,this._roots=null},s}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(s){return setTimeout(s,16)};var easingFuncs={linear:function(s){return s},quadraticIn:function(s){return s*s},quadraticOut:function(s){return s*(2-s)},quadraticInOut:function(s){return(s*=2)<1?.5*s*s:-.5*(--s*(s-2)-1)},cubicIn:function(s){return s*s*s},cubicOut:function(s){return--s*s*s+1},cubicInOut:function(s){return(s*=2)<1?.5*s*s*s:.5*((s-=2)*s*s+2)},quarticIn:function(s){return s*s*s*s},quarticOut:function(s){return 1- --s*s*s*s},quarticInOut:function(s){return(s*=2)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2)},quinticIn:function(s){return s*s*s*s*s},quinticOut:function(s){return--s*s*s*s*s+1},quinticInOut:function(s){return(s*=2)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2)},sinusoidalIn:function(s){return 1-Math.cos(s*Math.PI/2)},sinusoidalOut:function(s){return Math.sin(s*Math.PI/2)},sinusoidalInOut:function(s){return .5*(1-Math.cos(Math.PI*s))},exponentialIn:function(s){return s===0?0:Math.pow(1024,s-1)},exponentialOut:function(s){return s===1?1:1-Math.pow(2,-10*s)},exponentialInOut:function(s){return s===0?0:s===1?1:(s*=2)<1?.5*Math.pow(1024,s-1):.5*(-Math.pow(2,-10*(s-1))+2)},circularIn:function(s){return 1-Math.sqrt(1-s*s)},circularOut:function(s){return Math.sqrt(1- --s*s)},circularInOut:function(s){return(s*=2)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1)},elasticIn:function(s){var o,n=.1,a=.4;return s===0?0:s===1?1:(!n||n<1?(n=1,o=a/4):o=a*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/a)))},elasticOut:function(s){var o,n=.1,a=.4;return s===0?0:s===1?1:(!n||n<1?(n=1,o=a/4):o=a*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/a)+1)},elasticInOut:function(s){var o,n=.1,a=.4;return s===0?0:s===1?1:(!n||n<1?(n=1,o=a/4):o=a*Math.asin(1/n)/(2*Math.PI),(s*=2)<1?-.5*(n*Math.pow(2,10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/a)):n*Math.pow(2,-10*(s-=1))*Math.sin((s-o)*(2*Math.PI)/a)*.5+1)},backIn:function(s){var o=1.70158;return s*s*((o+1)*s-o)},backOut:function(s){var o=1.70158;return--s*s*((o+1)*s+o)+1},backInOut:function(s){var o=2.5949095;return(s*=2)<1?.5*(s*s*((o+1)*s-o)):.5*((s-=2)*s*((o+1)*s+o)+2)},bounceIn:function(s){return 1-easingFuncs.bounceOut(1-s)},bounceOut:function(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},bounceInOut:function(s){return s<.5?easingFuncs.bounceIn(s*2)*.5:easingFuncs.bounceOut(s*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(s){return s>-1e-8&&s<EPSILON$4}function isNotAroundZero$1(s){return s>EPSILON$4||s<-1e-8}function cubicAt(s,o,n,a,l){var c=1-l;return c*c*(c*s+3*l*o)+l*l*(l*a+3*c*n)}function cubicDerivativeAt(s,o,n,a,l){var c=1-l;return 3*(((o-s)*c+2*(n-o)*l)*c+(a-n)*l*l)}function cubicRootAt(s,o,n,a,l,c){var u=a+3*(o-n)-s,d=3*(n-o*2+s),h=3*(o-s),f=s-l,g=d*d-3*u*h,p=d*h-9*u*f,v=h*h-3*d*f,b=0;if(isAroundZero$1(g)&&isAroundZero$1(p))if(isAroundZero$1(d))c[0]=0;else{var _=-h/d;_>=0&&_<=1&&(c[b++]=_)}else{var w=p*p-4*g*v;if(isAroundZero$1(w)){var x=p/g,_=-d/u+x,S=-x/2;_>=0&&_<=1&&(c[b++]=_),S>=0&&S<=1&&(c[b++]=S)}else if(w>0){var C=mathSqrt$3(w),T=g*d+1.5*u*(-p+C),R=g*d+1.5*u*(-p-C);T<0?T=-mathPow$2(-T,ONE_THIRD):T=mathPow$2(T,ONE_THIRD),R<0?R=-mathPow$2(-R,ONE_THIRD):R=mathPow$2(R,ONE_THIRD);var _=(-d-(T+R))/(3*u);_>=0&&_<=1&&(c[b++]=_)}else{var A=(2*g*d-3*u*p)/(2*mathSqrt$3(g*g*g)),M=Math.acos(A)/3,D=mathSqrt$3(g),O=Math.cos(M),_=(-d-2*D*O)/(3*u),S=(-d+D*(O+THREE_SQRT*Math.sin(M)))/(3*u),H=(-d+D*(O-THREE_SQRT*Math.sin(M)))/(3*u);_>=0&&_<=1&&(c[b++]=_),S>=0&&S<=1&&(c[b++]=S),H>=0&&H<=1&&(c[b++]=H)}}return b}function cubicExtrema(s,o,n,a,l){var c=6*n-12*o+6*s,u=9*o+3*a-3*s-9*n,d=3*o-3*s,h=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var f=-d/c;f>=0&&f<=1&&(l[h++]=f)}}else{var g=c*c-4*u*d;if(isAroundZero$1(g))l[0]=-c/(2*u);else if(g>0){var p=mathSqrt$3(g),f=(-c+p)/(2*u),v=(-c-p)/(2*u);f>=0&&f<=1&&(l[h++]=f),v>=0&&v<=1&&(l[h++]=v)}}return h}function cubicSubdivide(s,o,n,a,l,c){var u=(o-s)*l+s,d=(n-o)*l+o,h=(a-n)*l+n,f=(d-u)*l+u,g=(h-d)*l+d,p=(g-f)*l+f;c[0]=s,c[1]=u,c[2]=f,c[3]=p,c[4]=p,c[5]=g,c[6]=h,c[7]=a}function cubicProjectPoint(s,o,n,a,l,c,u,d,h,f,g){var p,v=.005,b=1/0,_,w,x,S;_v0[0]=h,_v0[1]=f;for(var C=0;C<1;C+=.05)_v1[0]=cubicAt(s,n,l,u,C),_v1[1]=cubicAt(o,a,c,d,C),x=distSquare(_v0,_v1),x<b&&(p=C,b=x);b=1/0;for(var T=0;T<32&&!(v<EPSILON_NUMERIC);T++)_=p-v,w=p+v,_v1[0]=cubicAt(s,n,l,u,_),_v1[1]=cubicAt(o,a,c,d,_),x=distSquare(_v1,_v0),_>=0&&x<b?(p=_,b=x):(_v2[0]=cubicAt(s,n,l,u,w),_v2[1]=cubicAt(o,a,c,d,w),S=distSquare(_v2,_v0),w<=1&&S<b?(p=w,b=S):v*=.5);return g&&(g[0]=cubicAt(s,n,l,u,p),g[1]=cubicAt(o,a,c,d,p)),mathSqrt$3(b)}function cubicLength(s,o,n,a,l,c,u,d,h){for(var f=s,g=o,p=0,v=1/h,b=1;b<=h;b++){var _=b*v,w=cubicAt(s,n,l,u,_),x=cubicAt(o,a,c,d,_),S=w-f,C=x-g;p+=Math.sqrt(S*S+C*C),f=w,g=x}return p}function quadraticAt$1(s,o,n,a){var l=1-a;return l*(l*s+2*a*o)+a*a*n}function quadraticDerivativeAt(s,o,n,a){return 2*((1-a)*(o-s)+a*(n-o))}function quadraticRootAt(s,o,n,a,l){var c=s-2*o+n,u=2*(o-s),d=s-a,h=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var f=-d/u;f>=0&&f<=1&&(l[h++]=f)}}else{var g=u*u-4*c*d;if(isAroundZero$1(g)){var f=-u/(2*c);f>=0&&f<=1&&(l[h++]=f)}else if(g>0){var p=mathSqrt$3(g),f=(-u+p)/(2*c),v=(-u-p)/(2*c);f>=0&&f<=1&&(l[h++]=f),v>=0&&v<=1&&(l[h++]=v)}}return h}function quadraticExtremum(s,o,n){var a=s+n-2*o;return a===0?.5:(s-o)/a}function quadraticSubdivide(s,o,n,a,l){var c=(o-s)*a+s,u=(n-o)*a+o,d=(u-c)*a+c;l[0]=s,l[1]=c,l[2]=d,l[3]=d,l[4]=u,l[5]=n}function quadraticProjectPoint(s,o,n,a,l,c,u,d,h){var f,g=.005,p=1/0;_v0[0]=u,_v0[1]=d;for(var v=0;v<1;v+=.05){_v1[0]=quadraticAt$1(s,n,l,v),_v1[1]=quadraticAt$1(o,a,c,v);var b=distSquare(_v0,_v1);b<p&&(f=v,p=b)}p=1/0;for(var _=0;_<32&&!(g<EPSILON_NUMERIC);_++){var w=f-g,x=f+g;_v1[0]=quadraticAt$1(s,n,l,w),_v1[1]=quadraticAt$1(o,a,c,w);var b=distSquare(_v1,_v0);if(w>=0&&b<p)f=w,p=b;else{_v2[0]=quadraticAt$1(s,n,l,x),_v2[1]=quadraticAt$1(o,a,c,x);var S=distSquare(_v2,_v0);x<=1&&S<p?(f=x,p=S):g*=.5}}return h&&(h[0]=quadraticAt$1(s,n,l,f),h[1]=quadraticAt$1(o,a,c,f)),mathSqrt$3(p)}function quadraticLength(s,o,n,a,l,c,u){for(var d=s,h=o,f=0,g=1/u,p=1;p<=u;p++){var v=p*g,b=quadraticAt$1(s,n,l,v),_=quadraticAt$1(o,a,c,v),w=b-d,x=_-h;f+=Math.sqrt(w*w+x*x),d=b,h=_}return f}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(s){var o=s&&regexp.exec(s);if(o){var n=o[1].split(","),a=+trim$1(n[0]),l=+trim$1(n[1]),c=+trim$1(n[2]),u=+trim$1(n[3]);if(isNaN(a+l+c+u))return;var d=[];return function(h){return h<=0?0:h>=1?1:cubicRootAt(0,a,c,1,h,d)&&cubicAt(0,l,u,1,d[0])}}}var Clip=function(){function s(o){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=o.life||1e3,this._delay=o.delay||0,this.loop=o.loop||!1,this.onframe=o.onframe||noop$1,this.ondestroy=o.ondestroy||noop$1,this.onrestart=o.onrestart||noop$1,o.easing&&this.setEasing(o.easing)}return s.prototype.step=function(o,n){if(this._inited||(this._startTime=o+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var a=this._life,l=o-this._startTime-this._pausedTime,c=l/a;c<0&&(c=0),c=Math.min(c,1);var u=this.easingFunc,d=u?u(c):c;if(this.onframe(d),c===1)if(this.loop){var h=l%a;this._startTime=o-h,this._pausedTime=0,this.onrestart()}else return!0;return!1},s.prototype.pause=function(){this._paused=!0},s.prototype.resume=function(){this._paused=!1},s.prototype.setEasing=function(o){this.easing=o,this.easingFunc=isFunction$1(o)?o:easingFuncs[o]||createCubicEasingFunc(o)},s}(),Entry=function(){function s(o){this.value=o}return s}(),LinkedList=function(){function s(){this._len=0}return s.prototype.insert=function(o){var n=new Entry(o);return this.insertEntry(n),n},s.prototype.insertEntry=function(o){this.head?(this.tail.next=o,o.prev=this.tail,o.next=null,this.tail=o):this.head=this.tail=o,this._len++},s.prototype.remove=function(o){var n=o.prev,a=o.next;n?n.next=a:this.head=a,a?a.prev=n:this.tail=n,o.next=o.prev=null,this._len--},s.prototype.len=function(){return this._len},s.prototype.clear=function(){this.head=this.tail=null,this._len=0},s}(),LRU=function(){function s(o){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=o}return s.prototype.put=function(o,n){var a=this._list,l=this._map,c=null;if(l[o]==null){var u=a.len(),d=this._lastRemovedEntry;if(u>=this._maxSize&&u>0){var h=a.head;a.remove(h),delete l[h.key],c=h.value,this._lastRemovedEntry=h}d?d.value=n:d=new Entry(n),d.key=o,a.insertEntry(d),l[o]=d}return c},s.prototype.get=function(o){var n=this._map[o],a=this._list;if(n!=null)return n!==a.tail&&(a.remove(n),a.insertEntry(n)),n.value},s.prototype.clear=function(){this._list.clear(),this._map={}},s.prototype.len=function(){return this._list.len()},s}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(s){return s=Math.round(s),s<0?0:s>255?255:s}function clampCssAngle(s){return s=Math.round(s),s<0?0:s>360?360:s}function clampCssFloat(s){return s<0?0:s>1?1:s}function parseCssInt(s){var o=s;return o.length&&o.charAt(o.length-1)==="%"?clampCssByte(parseFloat(o)/100*255):clampCssByte(parseInt(o,10))}function parseCssFloat(s){var o=s;return o.length&&o.charAt(o.length-1)==="%"?clampCssFloat(parseFloat(o)/100):clampCssFloat(parseFloat(o))}function cssHueToRgb(s,o,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?s+(o-s)*n*6:n*2<1?o:n*3<2?s+(o-s)*(2/3-n)*6:s}function lerpNumber(s,o,n){return s+(o-s)*n}function setRgba(s,o,n,a,l){return s[0]=o,s[1]=n,s[2]=a,s[3]=l,s}function copyRgba(s,o){return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(s,o){lastRemovedArr&&copyRgba(lastRemovedArr,o),lastRemovedArr=colorCache.put(s,lastRemovedArr||o.slice())}function parse(s,o){if(s){o=o||[];var n=colorCache.get(s);if(n)return copyRgba(o,n);s=s+"";var a=s.replace(/ /g,"").toLowerCase();if(a in kCSSColorTable)return copyRgba(o,kCSSColorTable[a]),putToCache(s,o),o;var l=a.length;if(a.charAt(0)==="#"){if(l===4||l===5){var c=parseInt(a.slice(1,4),16);if(!(c>=0&&c<=4095)){setRgba(o,0,0,0,1);return}return setRgba(o,(c&3840)>>4|(c&3840)>>8,c&240|(c&240)>>4,c&15|(c&15)<<4,l===5?parseInt(a.slice(4),16)/15:1),putToCache(s,o),o}else if(l===7||l===9){var c=parseInt(a.slice(1,7),16);if(!(c>=0&&c<=16777215)){setRgba(o,0,0,0,1);return}return setRgba(o,(c&16711680)>>16,(c&65280)>>8,c&255,l===9?parseInt(a.slice(7),16)/255:1),putToCache(s,o),o}return}var u=a.indexOf("("),d=a.indexOf(")");if(u!==-1&&d+1===l){var h=a.substr(0,u),f=a.substr(u+1,d-(u+1)).split(","),g=1;switch(h){case"rgba":if(f.length!==4)return f.length===3?setRgba(o,+f[0],+f[1],+f[2],1):setRgba(o,0,0,0,1);g=parseCssFloat(f.pop());case"rgb":if(f.length>=3)return setRgba(o,parseCssInt(f[0]),parseCssInt(f[1]),parseCssInt(f[2]),f.length===3?g:parseCssFloat(f[3])),putToCache(s,o),o;setRgba(o,0,0,0,1);return;case"hsla":if(f.length!==4){setRgba(o,0,0,0,1);return}return f[3]=parseCssFloat(f[3]),hsla2rgba(f,o),putToCache(s,o),o;case"hsl":if(f.length!==3){setRgba(o,0,0,0,1);return}return hsla2rgba(f,o),putToCache(s,o),o;default:return}}setRgba(o,0,0,0,1)}}function hsla2rgba(s,o){var n=(parseFloat(s[0])%360+360)%360/360,a=parseCssFloat(s[1]),l=parseCssFloat(s[2]),c=l<=.5?l*(a+1):l+a-l*a,u=l*2-c;return o=o||[],setRgba(o,clampCssByte(cssHueToRgb(u,c,n+1/3)*255),clampCssByte(cssHueToRgb(u,c,n)*255),clampCssByte(cssHueToRgb(u,c,n-1/3)*255),1),s.length===4&&(o[3]=s[3]),o}function rgba2hsla(s){if(s){var o=s[0]/255,n=s[1]/255,a=s[2]/255,l=Math.min(o,n,a),c=Math.max(o,n,a),u=c-l,d=(c+l)/2,h,f;if(u===0)h=0,f=0;else{d<.5?f=u/(c+l):f=u/(2-c-l);var g=((c-o)/6+u/2)/u,p=((c-n)/6+u/2)/u,v=((c-a)/6+u/2)/u;o===c?h=v-p:n===c?h=1/3+g-v:a===c&&(h=2/3+p-g),h<0&&(h+=1),h>1&&(h-=1)}var b=[h*360,f,d];return s[3]!=null&&b.push(s[3]),b}}function lift(s,o){var n=parse(s);if(n){for(var a=0;a<3;a++)o<0?n[a]=n[a]*(1-o)|0:n[a]=(255-n[a])*o+n[a]|0,n[a]>255?n[a]=255:n[a]<0&&(n[a]=0);return stringify(n,n.length===4?"rgba":"rgb")}}function toHex(s){var o=parse(s);if(o)return((1<<24)+(o[0]<<16)+(o[1]<<8)+ +o[2]).toString(16).slice(1)}function fastLerp(s,o,n){if(!(!(o&&o.length)||!(s>=0&&s<=1))){n=n||[];var a=s*(o.length-1),l=Math.floor(a),c=Math.ceil(a),u=o[l],d=o[c],h=a-l;return n[0]=clampCssByte(lerpNumber(u[0],d[0],h)),n[1]=clampCssByte(lerpNumber(u[1],d[1],h)),n[2]=clampCssByte(lerpNumber(u[2],d[2],h)),n[3]=clampCssFloat(lerpNumber(u[3],d[3],h)),n}}var fastMapToColor=fastLerp;function lerp(s,o,n){if(!(!(o&&o.length)||!(s>=0&&s<=1))){var a=s*(o.length-1),l=Math.floor(a),c=Math.ceil(a),u=parse(o[l]),d=parse(o[c]),h=a-l,f=stringify([clampCssByte(lerpNumber(u[0],d[0],h)),clampCssByte(lerpNumber(u[1],d[1],h)),clampCssByte(lerpNumber(u[2],d[2],h)),clampCssFloat(lerpNumber(u[3],d[3],h))],"rgba");return n?{color:f,leftIndex:l,rightIndex:c,value:a}:f}}var mapToColor=lerp;function modifyHSL(s,o,n,a){var l=parse(s);if(s)return l=rgba2hsla(l),o!=null&&(l[0]=clampCssAngle(o)),n!=null&&(l[1]=parseCssFloat(n)),a!=null&&(l[2]=parseCssFloat(a)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(s,o){var n=parse(s);if(n&&o!=null)return n[3]=clampCssFloat(o),stringify(n,"rgba")}function stringify(s,o){if(!(!s||!s.length)){var n=s[0]+","+s[1]+","+s[2];return(o==="rgba"||o==="hsva"||o==="hsla")&&(n+=","+s[3]),o+"("+n+")"}}function lum(s,o){var n=parse(s);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*o:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(s){if(isString$2(s)){var o=liftedColorCache.get(s);return o||(o=lift(s,-.1),liftedColorCache.put(s,o)),o}else if(isGradientObject(s)){var n=extend({},s);return n.colorStops=map$1(s.colorStops,function(a){return{offset:a.offset,color:lift(a.color,-.1)}}),n}return s}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(s){var o;if(!s||s==="transparent")s="none";else if(typeof s=="string"&&s.indexOf("rgba")>-1){var n=parse(s);n&&(s="rgb("+n[0]+","+n[1]+","+n[2]+")",o=n[3])}return{color:s,opacity:o??1}}var EPSILON$3=1e-4;function isAroundZero(s){return s<EPSILON$3&&s>-1e-4}function round3(s){return mathRound$1(s*1e3)/1e3}function round4(s){return mathRound$1(s*1e4)/1e4}function getMatrixStr(s){return"matrix("+round3(s[0])+","+round3(s[1])+","+round3(s[2])+","+round3(s[3])+","+round4(s[4])+","+round4(s[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(s,o,n){return n==="top"?s+=o/2:n==="bottom"&&(s-=o/2),s}function hasShadow(s){return s&&(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)}function getShadowKey(s){var o=s.style,n=s.getGlobalScale();return[o.shadowColor,(o.shadowBlur||0).toFixed(2),(o.shadowOffsetX||0).toFixed(2),(o.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function isImagePattern(s){return s&&!!s.image}function isSVGPattern(s){return s&&!!s.svgElement}function isPattern(s){return isImagePattern(s)||isSVGPattern(s)}function isLinearGradient(s){return s.type==="linear"}function isRadialGradient(s){return s.type==="radial"}function isGradient(s){return s&&(s.type==="linear"||s.type==="radial")}function getIdURL(s){return"url(#"+s+")"}function getPathPrecision(s){var o=s.getGlobalScale(),n=Math.max(o[0],o[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function getSRTTransformString(s){var o=s.x||0,n=s.y||0,a=(s.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(s.scaleX,1),c=retrieve2(s.scaleY,1),u=s.skewX||0,d=s.skewY||0,h=[];return(o||n)&&h.push("translate("+o+"px,"+n+"px)"),a&&h.push("rotate("+a+")"),(l!==1||c!==1)&&h.push("scale("+l+","+c+")"),(u||d)&&h.push("skew("+mathRound$1(u*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(d*RADIAN_TO_DEGREE)+"deg)"),h.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction$1(window.btoa)?function(s){return window.btoa(unescape(encodeURIComponent(s)))}:typeof Buffer<"u"?function(s){return Buffer.from(s).toString("base64")}:function(s){return process.env.NODE_ENV!=="production"&&logError("Base64 isn't natively supported in the current environment."),null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(s,o,n){return(o-s)*n+s}function interpolate1DArray(s,o,n,a){for(var l=o.length,c=0;c<l;c++)s[c]=interpolateNumber$1(o[c],n[c],a);return s}function interpolate2DArray(s,o,n,a){for(var l=o.length,c=l&&o[0].length,u=0;u<l;u++){s[u]||(s[u]=[]);for(var d=0;d<c;d++)s[u][d]=interpolateNumber$1(o[u][d],n[u][d],a)}return s}function add1DArray(s,o,n,a){for(var l=o.length,c=0;c<l;c++)s[c]=o[c]+n[c]*a;return s}function add2DArray(s,o,n,a){for(var l=o.length,c=l&&o[0].length,u=0;u<l;u++){s[u]||(s[u]=[]);for(var d=0;d<c;d++)s[u][d]=o[u][d]+n[u][d]*a}return s}function fillColorStops(s,o){for(var n=s.length,a=o.length,l=n>a?o:s,c=Math.min(n,a),u=l[c-1]||{color:[0,0,0,0],offset:0},d=c;d<Math.max(n,a);d++)l.push({offset:u.offset,color:u.color.slice()})}function fillArray(s,o,n){var a=s,l=o;if(!(!a.push||!l.push)){var c=a.length,u=l.length;if(c!==u){var d=c>u;if(d)a.length=u;else for(var h=c;h<u;h++)a.push(n===1?l[h]:arraySlice.call(l[h]))}for(var f=a[0]&&a[0].length,h=0;h<a.length;h++)if(n===1)isNaN(a[h])&&(a[h]=l[h]);else for(var g=0;g<f;g++)isNaN(a[h][g])&&(a[h][g]=l[h][g])}}function cloneValue(s){if(isArrayLike(s)){var o=s.length;if(isArrayLike(s[0])){for(var n=[],a=0;a<o;a++)n.push(arraySlice.call(s[a]));return n}return arraySlice.call(s)}return s}function rgba2String(s){return s[0]=Math.floor(s[0])||0,s[1]=Math.floor(s[1])||0,s[2]=Math.floor(s[2])||0,s[3]=s[3]==null?1:s[3],"rgba("+s.join(",")+")"}function guessArrayDim(s){return isArrayLike(s&&s[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(s){return s===VALUE_TYPE_LINEAR_GRADIENT||s===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(s){return s===VALUE_TYPE_1D_ARRAY||s===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function s(o){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=o}return s.prototype.isFinished=function(){return this._finished},s.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},s.prototype.needsAnimate=function(){return this.keyframes.length>=1},s.prototype.getAdditiveTrack=function(){return this._additiveTrack},s.prototype.addKeyframe=function(o,n,a){this._needsSort=!0;var l=this.keyframes,c=l.length,u=!1,d=VALUE_TYPE_UNKOWN,h=n;if(isArrayLike(n)){var f=guessArrayDim(n);d=f,(f===1&&!isNumber(n[0])||f===2&&!isNumber(n[0][0]))&&(u=!0)}else if(isNumber(n)&&!eqNaN(n))d=VALUE_TYPE_NUMBER;else if(isString$2(n))if(!isNaN(+n))d=VALUE_TYPE_NUMBER;else{var g=parse(n);g&&(h=g,d=VALUE_TYPE_COLOR)}else if(isGradientObject(n)){var p=extend({},h);p.colorStops=map$1(n.colorStops,function(b){return{offset:b.offset,color:parse(b.color)}}),isLinearGradient(n)?d=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(n)&&(d=VALUE_TYPE_RADIAL_GRADIENT),h=p}c===0?this.valType=d:(d!==this.valType||d===VALUE_TYPE_UNKOWN)&&(u=!0),this.discrete=this.discrete||u;var v={time:o,value:h,rawValue:n,percent:0};return a&&(v.easing=a,v.easingFunc=isFunction$1(a)?a:easingFuncs[a]||createCubicEasingFunc(a)),l.push(v),v},s.prototype.prepare=function(o,n){var a=this.keyframes;this._needsSort&&a.sort(function(w,x){return w.time-x.time});for(var l=this.valType,c=a.length,u=a[c-1],d=this.discrete,h=isArrayValueType(l),f=isGradientValueType(l),g=0;g<c;g++){var p=a[g],v=p.value,b=u.value;p.percent=p.time/o,d||(h&&g!==c-1?fillArray(v,b,l):f&&fillColorStops(v.colorStops,b.colorStops))}if(!d&&l!==VALUE_TYPE_RADIAL_GRADIENT&&n&&this.needsAnimate()&&n.needsAnimate()&&l===n.valType&&!n._finished){this._additiveTrack=n;for(var _=a[0].value,g=0;g<c;g++)l===VALUE_TYPE_NUMBER?a[g].additiveValue=a[g].value-_:l===VALUE_TYPE_COLOR?a[g].additiveValue=add1DArray([],a[g].value,_,-1):isArrayValueType(l)&&(a[g].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],a[g].value,_,-1):add2DArray([],a[g].value,_,-1))}},s.prototype.step=function(o,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var a=this._additiveTrack!=null,l=a?"additiveValue":"value",c=this.valType,u=this.keyframes,d=u.length,h=this.propName,f=c===VALUE_TYPE_COLOR,g,p=this._lastFr,v=Math.min,b,_;if(d===1)b=_=u[0];else{if(n<0)g=0;else if(n<this._lastFrP){var w=v(p+1,d-1);for(g=w;g>=0&&!(u[g].percent<=n);g--);g=v(g,d-2)}else{for(g=p;g<d&&!(u[g].percent>n);g++);g=v(g-1,d-2)}_=u[g+1],b=u[g]}if(b&&_){this._lastFr=g,this._lastFrP=n;var x=_.percent-b.percent,S=x===0?1:v((n-b.percent)/x,1);_.easingFunc&&(S=_.easingFunc(S));var C=a?this._additiveValue:f?tmpRgba:o[h];if((isArrayValueType(c)||f)&&!C&&(C=this._additiveValue=[]),this.discrete)o[h]=S<1?b.rawValue:_.rawValue;else if(isArrayValueType(c))c===VALUE_TYPE_1D_ARRAY?interpolate1DArray(C,b[l],_[l],S):interpolate2DArray(C,b[l],_[l],S);else if(isGradientValueType(c)){var T=b[l],R=_[l],A=c===VALUE_TYPE_LINEAR_GRADIENT;o[h]={type:A?"linear":"radial",x:interpolateNumber$1(T.x,R.x,S),y:interpolateNumber$1(T.y,R.y,S),colorStops:map$1(T.colorStops,function(D,O){var H=R.colorStops[O];return{offset:interpolateNumber$1(D.offset,H.offset,S),color:rgba2String(interpolate1DArray([],D.color,H.color,S))}}),global:R.global},A?(o[h].x2=interpolateNumber$1(T.x2,R.x2,S),o[h].y2=interpolateNumber$1(T.y2,R.y2,S)):o[h].r=interpolateNumber$1(T.r,R.r,S)}else if(f)interpolate1DArray(C,b[l],_[l],S),a||(o[h]=rgba2String(C));else{var M=interpolateNumber$1(b[l],_[l],S);a?this._additiveValue=M:o[h]=M}a&&this._addToTarget(o)}}},s.prototype._addToTarget=function(o){var n=this.valType,a=this.propName,l=this._additiveValue;n===VALUE_TYPE_NUMBER?o[a]=o[a]+l:n===VALUE_TYPE_COLOR?(parse(o[a],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),o[a]=rgba2String(tmpRgba)):n===VALUE_TYPE_1D_ARRAY?add1DArray(o[a],o[a],l,1):n===VALUE_TYPE_2D_ARRAY&&add2DArray(o[a],o[a],l,1)},s}(),Animator=function(){function s(o,n,a,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=o,this._loop=n,n&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=a}return s.prototype.getMaxTime=function(){return this._maxTime},s.prototype.getDelay=function(){return this._delay},s.prototype.getLoop=function(){return this._loop},s.prototype.getTarget=function(){return this._target},s.prototype.changeTarget=function(o){this._target=o},s.prototype.when=function(o,n,a){return this.whenWithKeys(o,n,keys(n),a)},s.prototype.whenWithKeys=function(o,n,a,l){for(var c=this._tracks,u=0;u<a.length;u++){var d=a[u],h=c[d];if(!h){h=c[d]=new Track(d);var f=void 0,g=this._getAdditiveTrack(d);if(g){var p=g.keyframes,v=p[p.length-1];f=v&&v.value,g.valType===VALUE_TYPE_COLOR&&f&&(f=rgba2String(f))}else f=this._target[d];if(f==null)continue;o>0&&h.addKeyframe(0,cloneValue(f),l),this._trackKeys.push(d)}h.addKeyframe(o,cloneValue(n[d]),l)}return this._maxTime=Math.max(this._maxTime,o),this},s.prototype.pause=function(){this._clip.pause(),this._paused=!0},s.prototype.resume=function(){this._clip.resume(),this._paused=!1},s.prototype.isPaused=function(){return!!this._paused},s.prototype.duration=function(o){return this._maxTime=o,this._force=!0,this},s.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var o=this._doneCbs;if(o)for(var n=o.length,a=0;a<n;a++)o[a].call(this)},s.prototype._abortedCallback=function(){this._setTracksFinished();var o=this.animation,n=this._abortedCbs;if(o&&o.removeClip(this._clip),this._clip=null,n)for(var a=0;a<n.length;a++)n[a].call(this)},s.prototype._setTracksFinished=function(){for(var o=this._tracks,n=this._trackKeys,a=0;a<n.length;a++)o[n[a]].setFinished()},s.prototype._getAdditiveTrack=function(o){var n,a=this._additiveAnimators;if(a)for(var l=0;l<a.length;l++){var c=a[l].getTrack(o);c&&(n=c)}return n},s.prototype.start=function(o){if(!(this._started>0)){this._started=1;for(var n=this,a=[],l=this._maxTime||0,c=0;c<this._trackKeys.length;c++){var u=this._trackKeys[c],d=this._tracks[u],h=this._getAdditiveTrack(u),f=d.keyframes,g=f.length;if(d.prepare(l,h),d.needsAnimate())if(!this._allowDiscrete&&d.discrete){var p=f[g-1];p&&(n._target[d.propName]=p.rawValue),d.setFinished()}else a.push(d)}if(a.length||this._force){var v=new Clip({life:l,loop:this._loop,delay:this._delay||0,onframe:function(b){n._started=2;var _=n._additiveAnimators;if(_){for(var w=!1,x=0;x<_.length;x++)if(_[x]._clip){w=!0;break}w||(n._additiveAnimators=null)}for(var x=0;x<a.length;x++)a[x].step(n._target,b);var S=n._onframeCbs;if(S)for(var x=0;x<S.length;x++)S[x](n._target,b)},ondestroy:function(){n._doneCallback()}});this._clip=v,this.animation&&this.animation.addClip(v),o&&v.setEasing(o)}else this._doneCallback();return this}},s.prototype.stop=function(o){if(this._clip){var n=this._clip;o&&n.onframe(1),this._abortedCallback()}},s.prototype.delay=function(o){return this._delay=o,this},s.prototype.during=function(o){return o&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(o)),this},s.prototype.done=function(o){return o&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(o)),this},s.prototype.aborted=function(o){return o&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(o)),this},s.prototype.getClip=function(){return this._clip},s.prototype.getTrack=function(o){return this._tracks[o]},s.prototype.getTracks=function(){var o=this;return map$1(this._trackKeys,function(n){return o._tracks[n]})},s.prototype.stopTracks=function(o,n){if(!o.length||!this._clip)return!0;for(var a=this._tracks,l=this._trackKeys,c=0;c<o.length;c++){var u=a[o[c]];u&&!u.isFinished()&&(n?u.step(this._target,1):this._started===1&&u.step(this._target,0),u.setFinished())}for(var d=!0,c=0;c<l.length;c++)if(!a[l[c]].isFinished()){d=!1;break}return d&&this._abortedCallback(),d},s.prototype.saveTo=function(o,n,a){if(o){n=n||this._trackKeys;for(var l=0;l<n.length;l++){var c=n[l],u=this._tracks[c];if(!(!u||u.isFinished())){var d=u.keyframes,h=d[a?0:d.length-1];h&&(o[c]=cloneValue(h.rawValue))}}}},s.prototype.__changeFinalValue=function(o,n){n=n||keys(o);for(var a=0;a<n.length;a++){var l=n[a],c=this._tracks[l];if(c){var u=c.keyframes;if(u.length>1){var d=u.pop();c.addKeyframe(d.time,o[l]),c.prepare(this._maxTime,c.getAdditiveTrack())}}}},s}();function getTime(){return new Date().getTime()}var Animation=function(s){__extends(o,s);function o(n){var a=s.call(this)||this;return a._running=!1,a._time=0,a._pausedTime=0,a._pauseStart=0,a._paused=!1,n=n||{},a.stage=n.stage||{},a}return o.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},o.prototype.addAnimator=function(n){n.animation=this;var a=n.getClip();a&&this.addClip(a)},o.prototype.removeClip=function(n){if(n.animation){var a=n.prev,l=n.next;a?a.next=l:this._head=l,l?l.prev=a:this._tail=a,n.next=n.prev=n.animation=null}},o.prototype.removeAnimator=function(n){var a=n.getClip();a&&this.removeClip(a),n.animation=null},o.prototype.update=function(n){for(var a=getTime()-this._pausedTime,l=a-this._time,c=this._head;c;){var u=c.next,d=c.step(a,l);d&&(c.ondestroy(),this.removeClip(c)),c=u}this._time=a,n||(this.trigger("frame",l),this.stage.update&&this.stage.update())},o.prototype._startLoop=function(){var n=this;this._running=!0;function a(){n._running&&(requestAnimationFrame$1(a),!n._paused&&n.update())}requestAnimationFrame$1(a)},o.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},o.prototype.stop=function(){this._running=!1},o.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},o.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},o.prototype.clear=function(){for(var n=this._head;n;){var a=n.next;n.prev=n.next=n.animation=null,n=a}this._head=this._tail=null},o.prototype.isFinished=function(){return this._head==null},o.prototype.animate=function(n,a){a=a||{},this.start();var l=new Animator(n,a.loop);return this.addAnimator(l),l},o}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var s=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],o=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},a=map$1(s,function(l){var c=l.replace("mouse","pointer");return n.hasOwnProperty(c)?c:l});return{mouse:s,touch:o,pointer:a}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(s){var o=s.pointerType;return o==="pen"||o==="touch"}function setTouchTimer(s){s.touching=!0,s.touchTimer!=null&&(clearTimeout(s.touchTimer),s.touchTimer=null),s.touchTimer=setTimeout(function(){s.touching=!1,s.touchTimer=null},700)}function markTouch(s){s&&(s.zrByTouch=!0)}function normalizeGlobalEvent(s,o){return normalizeEvent(s.dom,new FakeGlobalEvent(s,o),!0)}function isLocalEl(s,o){for(var n=o,a=!1;n&&n.nodeType!==9&&!(a=n.domBelongToZr||n!==o&&n===s.painterRoot);)n=n.parentNode;return a}var FakeGlobalEvent=function(){function s(o,n){this.stopPropagation=noop$1,this.stopImmediatePropagation=noop$1,this.preventDefault=noop$1,this.type=n.type,this.target=this.currentTarget=o.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return s}(),localDOMHandlers={mousedown:function(s){s=normalizeEvent(this.dom,s),this.__mayPointerCapture=[s.zrX,s.zrY],this.trigger("mousedown",s)},mousemove:function(s){s=normalizeEvent(this.dom,s);var o=this.__mayPointerCapture;o&&(s.zrX!==o[0]||s.zrY!==o[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",s)},mouseup:function(s){s=normalizeEvent(this.dom,s),this.__togglePointerCapture(!1),this.trigger("mouseup",s)},mouseout:function(s){s=normalizeEvent(this.dom,s);var o=s.toElement||s.relatedTarget;isLocalEl(this,o)||(this.__pointerCapturing&&(s.zrEventControl="no_globalout"),this.trigger("mouseout",s))},wheel:function(s){wheelEventSupported=!0,s=normalizeEvent(this.dom,s),this.trigger("mousewheel",s)},mousewheel:function(s){wheelEventSupported||(s=normalizeEvent(this.dom,s),this.trigger("mousewheel",s))},touchstart:function(s){s=normalizeEvent(this.dom,s),markTouch(s),this.__lastTouchMoment=new Date,this.handler.processGesture(s,"start"),localDOMHandlers.mousemove.call(this,s),localDOMHandlers.mousedown.call(this,s)},touchmove:function(s){s=normalizeEvent(this.dom,s),markTouch(s),this.handler.processGesture(s,"change"),localDOMHandlers.mousemove.call(this,s)},touchend:function(s){s=normalizeEvent(this.dom,s),markTouch(s),this.handler.processGesture(s,"end"),localDOMHandlers.mouseup.call(this,s),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,s)},pointerdown:function(s){localDOMHandlers.mousedown.call(this,s)},pointermove:function(s){isPointerFromTouch(s)||localDOMHandlers.mousemove.call(this,s)},pointerup:function(s){localDOMHandlers.mouseup.call(this,s)},pointerout:function(s){isPointerFromTouch(s)||localDOMHandlers.mouseout.call(this,s)}};each$f(["click","dblclick","contextmenu"],function(s){localDOMHandlers[s]=function(o){o=normalizeEvent(this.dom,o),this.trigger(s,o)}});var globalDOMHandlers={pointermove:function(s){isPointerFromTouch(s)||globalDOMHandlers.mousemove.call(this,s)},pointerup:function(s){globalDOMHandlers.mouseup.call(this,s)},mousemove:function(s){this.trigger("mousemove",s)},mouseup:function(s){var o=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",s),o&&(s.zrEventControl="only_globalout",this.trigger("mouseout",s))}};function mountLocalDOMEventListeners(s,o){var n=o.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(a){mountSingleDOMEventListener(o,a,function(l){n[a].call(s,l)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(a){mountSingleDOMEventListener(o,a,function(l){n[a].call(s,l),setTouchTimer(o)})}),each$f(localNativeListenerNames.mouse,function(a){mountSingleDOMEventListener(o,a,function(l){l=getNativeEvent(l),o.touching||n[a].call(s,l)})}))}function mountGlobalDOMEventListeners(s,o){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,n):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,n);function n(a){function l(c){c=getNativeEvent(c),isLocalEl(s,c.target)||(c=normalizeGlobalEvent(s,c),o.domHandlers[a].call(s,c))}mountSingleDOMEventListener(o,a,l,{capture:!0})}}function mountSingleDOMEventListener(s,o,n,a){s.mounted[o]=n,s.listenerOpts[o]=a,addEventListener(s.domTarget,o,n,a)}function unmountDOMEventListeners(s){var o=s.mounted;for(var n in o)o.hasOwnProperty(n)&&removeEventListener(s.domTarget,n,o[n],s.listenerOpts[n]);s.mounted={}}var DOMHandlerScope=function(){function s(o,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=o,this.domHandlers=n}return s}(),HandlerDomProxy=function(s){__extends(o,s);function o(n,a){var l=s.call(this)||this;return l.__pointerCapturing=!1,l.dom=n,l.painterRoot=a,l._localHandlerScope=new DOMHandlerScope(n,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return o.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},o.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},o.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var a=this._globalHandlerScope;n?mountGlobalDOMEventListeners(this,a):unmountDOMEventListeners(a)}},o}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(s){return s>EPSILON$2||s<-5e-5}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function s(){}return s.prototype.getLocalTransform=function(o){return s.getLocalTransform(this,o)},s.prototype.setPosition=function(o){this.x=o[0],this.y=o[1]},s.prototype.setScale=function(o){this.scaleX=o[0],this.scaleY=o[1]},s.prototype.setSkew=function(o){this.skewX=o[0],this.skewY=o[1]},s.prototype.setOrigin=function(o){this.originX=o[0],this.originY=o[1]},s.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},s.prototype.updateTransform=function(){var o=this.parent&&this.parent.transform,n=this.needLocalTransform(),a=this.transform;if(!(n||o)){a&&(mIdentity(a),this.invTransform=null);return}a=a||create$1(),n?this.getLocalTransform(a):mIdentity(a),o&&(n?mul(a,o,a):copy$1(a,o)),this.transform=a,this._resolveGlobalScaleRatio(a)},s.prototype._resolveGlobalScaleRatio=function(o){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(scaleTmp);var a=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,c=((scaleTmp[0]-a)*n+a)/scaleTmp[0]||0,u=((scaleTmp[1]-l)*n+l)/scaleTmp[1]||0;o[0]*=c,o[1]*=c,o[2]*=u,o[3]*=u}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,o)},s.prototype.getComputedTransform=function(){for(var o=this,n=[];o;)n.push(o),o=o.parent;for(;o=n.pop();)o.updateTransform();return this.transform},s.prototype.setLocalTransform=function(o){if(o){var n=o[0]*o[0]+o[1]*o[1],a=o[2]*o[2]+o[3]*o[3],l=Math.atan2(o[1],o[0]),c=Math.PI/2+l-Math.atan2(o[3],o[2]);a=Math.sqrt(a)*Math.cos(c),n=Math.sqrt(n),this.skewX=c,this.skewY=0,this.rotation=-l,this.x=+o[4],this.y=+o[5],this.scaleX=n,this.scaleY=a,this.originX=0,this.originY=0}},s.prototype.decomposeTransform=function(){if(this.transform){var o=this.parent,n=this.transform;o&&o.transform&&(o.invTransform=o.invTransform||create$1(),mul(tmpTransform,o.invTransform,n),n=tmpTransform);var a=this.originX,l=this.originY;(a||l)&&(originTransform[4]=a,originTransform[5]=l,mul(tmpTransform,n,originTransform),tmpTransform[4]-=a,tmpTransform[5]-=l,n=tmpTransform),this.setLocalTransform(n)}},s.prototype.getGlobalScale=function(o){var n=this.transform;return o=o||[],n?(o[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),o[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(o[0]=-o[0]),n[3]<0&&(o[1]=-o[1]),o):(o[0]=1,o[1]=1,o)},s.prototype.transformCoordToLocal=function(o,n){var a=[o,n],l=this.invTransform;return l&&applyTransform$1(a,a,l),a},s.prototype.transformCoordToGlobal=function(o,n){var a=[o,n],l=this.transform;return l&&applyTransform$1(a,a,l),a},s.prototype.getLineScale=function(){var o=this.transform;return o&&abs(o[0]-1)>1e-10&&abs(o[3]-1)>1e-10?Math.sqrt(abs(o[0]*o[3]-o[2]*o[1])):1},s.prototype.copyTransform=function(o){copyTransform(this,o)},s.getLocalTransform=function(o,n){n=n||[];var a=o.originX||0,l=o.originY||0,c=o.scaleX,u=o.scaleY,d=o.anchorX,h=o.anchorY,f=o.rotation||0,g=o.x,p=o.y,v=o.skewX?Math.tan(o.skewX):0,b=o.skewY?Math.tan(-o.skewY):0;if(a||l||d||h){var _=a+d,w=l+h;n[4]=-_*c-v*w*u,n[5]=-w*u-b*_*c}else n[4]=n[5]=0;return n[0]=c,n[3]=u,n[1]=b*c,n[2]=v*u,f&&rotate(n,n,f),n[4]+=a+g,n[5]+=l+p,n},s.initDefaultProps=function(){var o=s.prototype;o.scaleX=o.scaleY=o.globalScaleRatio=1,o.x=o.y=o.originX=o.originY=o.skewX=o.skewY=o.rotation=o.anchorX=o.anchorY=0}(),s}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(s,o){for(var n=0;n<TRANSFORMABLE_PROPS.length;n++){var a=TRANSFORMABLE_PROPS[n];s[a]=o[a]}}var textWidthCache={};function getWidth(s,o){o=o||DEFAULT_FONT;var n=textWidthCache[o];n||(n=textWidthCache[o]=new LRU(500));var a=n.get(s);return a==null&&(a=platformApi.measureText(s,o).width,n.put(s,a)),a}function innerGetBoundingRect(s,o,n,a){var l=getWidth(s,o),c=getLineHeight(o),u=adjustTextX(0,l,n),d=adjustTextY(0,c,a),h=new BoundingRect(u,d,l,c);return h}function getBoundingRect(s,o,n,a){var l=((s||"")+"").split(`
`),c=l.length;if(c===1)return innerGetBoundingRect(l[0],o,n,a);for(var u=new BoundingRect(0,0,0,0),d=0;d<l.length;d++){var h=innerGetBoundingRect(l[d],o,n,a);d===0?u.copy(h):u.union(h)}return u}function adjustTextX(s,o,n){return n==="right"?s-=o:n==="center"&&(s-=o/2),s}function adjustTextY(s,o,n){return n==="middle"?s-=o/2:n==="bottom"&&(s-=o),s}function getLineHeight(s){return getWidth("国",s)}function parsePercent$1(s,o){return typeof s=="string"?s.lastIndexOf("%")>=0?parseFloat(s)/100*o:parseFloat(s):s}function calculateTextPosition(s,o,n){var a=o.position||"inside",l=o.distance!=null?o.distance:5,c=n.height,u=n.width,d=c/2,h=n.x,f=n.y,g="left",p="top";if(a instanceof Array)h+=parsePercent$1(a[0],n.width),f+=parsePercent$1(a[1],n.height),g=null,p=null;else switch(a){case"left":h-=l,f+=d,g="right",p="middle";break;case"right":h+=l+u,f+=d,p="middle";break;case"top":h+=u/2,f-=l,g="center",p="bottom";break;case"bottom":h+=u/2,f+=c+l,g="center";break;case"inside":h+=u/2,f+=d,g="center",p="middle";break;case"insideLeft":h+=l,f+=d,p="middle";break;case"insideRight":h+=u-l,f+=d,g="right",p="middle";break;case"insideTop":h+=u/2,f+=l,g="center";break;case"insideBottom":h+=u/2,f+=c-l,g="center",p="bottom";break;case"insideTopLeft":h+=l,f+=l;break;case"insideTopRight":h+=u-l,f+=l,g="right";break;case"insideBottomLeft":h+=l,f+=c-l,p="bottom";break;case"insideBottomRight":h+=u-l,f+=c-l,g="right",p="bottom";break}return s=s||{},s.x=h,s.y=f,s.align=g,s.verticalAlign=p,s}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(s,o){return s[o]=!0,s},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element=function(){function s(o){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(o)}return s.prototype._init=function(o){this.attr(o)},s.prototype.drift=function(o,n,a){switch(this.draggable){case"horizontal":n=0;break;case"vertical":o=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=o,l[5]+=n,this.decomposeTransform(),this.markRedraw()},s.prototype.beforeUpdate=function(){},s.prototype.afterUpdate=function(){},s.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},s.prototype.updateInnerText=function(o){var n=this._textContent;if(n&&(!n.ignore||o)){this.textConfig||(this.textConfig={});var a=this.textConfig,l=a.local,c=n.innerTransformable,u=void 0,d=void 0,h=!1;c.parent=l?this:null;var f=!1;if(c.copyTransform(n),a.position!=null){var g=tmpBoundingRect;a.layoutRect?g.copy(a.layoutRect):g.copy(this.getBoundingRect()),l||g.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,a,g):calculateTextPosition(tmpTextPosCalcRes,a,g),c.x=tmpTextPosCalcRes.x,c.y=tmpTextPosCalcRes.y,u=tmpTextPosCalcRes.align,d=tmpTextPosCalcRes.verticalAlign;var p=a.origin;if(p&&a.rotation!=null){var v=void 0,b=void 0;p==="center"?(v=g.width*.5,b=g.height*.5):(v=parsePercent$1(p[0],g.width),b=parsePercent$1(p[1],g.height)),f=!0,c.originX=-c.x+v+(l?0:g.x),c.originY=-c.y+b+(l?0:g.y)}}a.rotation!=null&&(c.rotation=a.rotation);var _=a.offset;_&&(c.x+=_[0],c.y+=_[1],f||(c.originX=-_[0],c.originY=-_[1]));var w=a.inside==null?typeof a.position=="string"&&a.position.indexOf("inside")>=0:a.inside,x=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),S=void 0,C=void 0,T=void 0;w&&this.canBeInsideText()?(S=a.insideFill,C=a.insideStroke,(S==null||S==="auto")&&(S=this.getInsideTextFill()),(C==null||C==="auto")&&(C=this.getInsideTextStroke(S),T=!0)):(S=a.outsideFill,C=a.outsideStroke,(S==null||S==="auto")&&(S=this.getOutsideFill()),(C==null||C==="auto")&&(C=this.getOutsideStroke(S),T=!0)),S=S||"#000",(S!==x.fill||C!==x.stroke||T!==x.autoStroke||u!==x.align||d!==x.verticalAlign)&&(h=!0,x.fill=S,x.stroke=C,x.autoStroke=T,x.align=u,x.verticalAlign=d,n.setDefaultTextStyle(x)),n.__dirty|=REDRAW_BIT,h&&n.dirtyStyle(!0)}},s.prototype.canBeInsideText=function(){return!0},s.prototype.getInsideTextFill=function(){return"#fff"},s.prototype.getInsideTextStroke=function(o){return"#000"},s.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},s.prototype.getOutsideStroke=function(o){var n=this.__zr&&this.__zr.getBackgroundColor(),a=typeof n=="string"&&parse(n);a||(a=[255,255,255,1]);for(var l=a[3],c=this.__zr.isDarkMode(),u=0;u<3;u++)a[u]=a[u]*l+(c?0:255)*(1-l);return a[3]=1,stringify(a,"rgba")},s.prototype.traverse=function(o,n){},s.prototype.attrKV=function(o,n){o==="textConfig"?this.setTextConfig(n):o==="textContent"?this.setTextContent(n):o==="clipPath"?this.setClipPath(n):o==="extra"?(this.extra=this.extra||{},extend(this.extra,n)):this[o]=n},s.prototype.hide=function(){this.ignore=!0,this.markRedraw()},s.prototype.show=function(){this.ignore=!1,this.markRedraw()},s.prototype.attr=function(o,n){if(typeof o=="string")this.attrKV(o,n);else if(isObject$3(o))for(var a=o,l=keys(a),c=0;c<l.length;c++){var u=l[c];this.attrKV(u,o[u])}return this.markRedraw(),this},s.prototype.saveCurrentToNormalState=function(o){this._innerSaveToNormal(o);for(var n=this._normalState,a=0;a<this.animators.length;a++){var l=this.animators[a],c=l.__fromStateTransition;if(!(l.getLoop()||c&&c!==PRESERVED_NORMAL_STATE)){var u=l.targetName,d=u?n[u]:n;l.saveTo(d)}}},s.prototype._innerSaveToNormal=function(o){var n=this._normalState;n||(n=this._normalState={}),o.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(o,n,PRIMARY_STATES_KEYS$1)},s.prototype._savePrimaryToNormal=function(o,n,a){for(var l=0;l<a.length;l++){var c=a[l];o[c]!=null&&!(c in n)&&(n[c]=this[c])}},s.prototype.hasState=function(){return this.currentStates.length>0},s.prototype.getState=function(o){return this.states[o]},s.prototype.ensureState=function(o){var n=this.states;return n[o]||(n[o]={}),n[o]},s.prototype.clearStates=function(o){this.useState(PRESERVED_NORMAL_STATE,!1,o)},s.prototype.useState=function(o,n,a,l){var c=o===PRESERVED_NORMAL_STATE,u=this.hasState();if(!(!u&&c)){var d=this.currentStates,h=this.stateTransition;if(!(indexOf(d,o)>=0&&(n||d.length===1))){var f;if(this.stateProxy&&!c&&(f=this.stateProxy(o)),f||(f=this.states&&this.states[o]),!f&&!c){logError("State "+o+" not exists.");return}c||this.saveCurrentToNormalState(f);var g=!!(f&&f.hoverLayer||l);g&&this._toggleHoverLayerFlag(!0),this._applyStateObj(o,f,this._normalState,n,!a&&!this.__inHover&&h&&h.duration>0,h);var p=this._textContent,v=this._textGuide;return p&&p.useState(o,n,a,g),v&&v.useState(o,n,a,g),c?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(o):this.currentStates=[o],this._updateAnimationTargets(),this.markRedraw(),!g&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),f}}},s.prototype.useStates=function(o,n,a){if(!o.length)this.clearStates();else{var l=[],c=this.currentStates,u=o.length,d=u===c.length;if(d){for(var h=0;h<u;h++)if(o[h]!==c[h]){d=!1;break}}if(d)return;for(var h=0;h<u;h++){var f=o[h],g=void 0;this.stateProxy&&(g=this.stateProxy(f,o)),g||(g=this.states[f]),g&&l.push(g)}var p=l[u-1],v=!!(p&&p.hoverLayer||a);v&&this._toggleHoverLayerFlag(!0);var b=this._mergeStates(l),_=this.stateTransition;this.saveCurrentToNormalState(b),this._applyStateObj(o.join(","),b,this._normalState,!1,!n&&!this.__inHover&&_&&_.duration>0,_);var w=this._textContent,x=this._textGuide;w&&w.useStates(o,n,v),x&&x.useStates(o,n,v),this._updateAnimationTargets(),this.currentStates=o.slice(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}},s.prototype.isSilent=function(){for(var o=this.silent,n=this.parent;!o&&n;){if(n.silent){o=!0;break}n=n.parent}return o},s.prototype._updateAnimationTargets=function(){for(var o=0;o<this.animators.length;o++){var n=this.animators[o];n.targetName&&n.changeTarget(this[n.targetName])}},s.prototype.removeState=function(o){var n=indexOf(this.currentStates,o);if(n>=0){var a=this.currentStates.slice();a.splice(n,1),this.useStates(a)}},s.prototype.replaceState=function(o,n,a){var l=this.currentStates.slice(),c=indexOf(l,o),u=indexOf(l,n)>=0;c>=0?u?l.splice(c,1):l[c]=n:a&&!u&&l.push(n),this.useStates(l)},s.prototype.toggleState=function(o,n){n?this.useState(o,!0):this.removeState(o)},s.prototype._mergeStates=function(o){for(var n={},a,l=0;l<o.length;l++){var c=o[l];extend(n,c),c.textConfig&&(a=a||{},extend(a,c.textConfig))}return a&&(n.textConfig=a),n},s.prototype._applyStateObj=function(o,n,a,l,c,u){var d=!(n&&l);n&&n.textConfig?(this.textConfig=extend({},l?this.textConfig:a.textConfig),extend(this.textConfig,n.textConfig)):d&&a.textConfig&&(this.textConfig=a.textConfig);for(var h={},f=!1,g=0;g<PRIMARY_STATES_KEYS$1.length;g++){var p=PRIMARY_STATES_KEYS$1[g],v=c&&DEFAULT_ANIMATABLE_MAP[p];n&&n[p]!=null?v?(f=!0,h[p]=n[p]):this[p]=n[p]:d&&a[p]!=null&&(v?(f=!0,h[p]=a[p]):this[p]=a[p])}if(!c)for(var g=0;g<this.animators.length;g++){var b=this.animators[g],_=b.targetName;b.getLoop()||b.__changeFinalValue(_?(n||a)[_]:n||a)}f&&this._transitionState(o,h,u)},s.prototype._attachComponent=function(o){if(o.__zr&&!o.__hostTarget){if(process.env.NODE_ENV!=="production")throw new Error("Text element has been added to zrender.");return}if(o===this){if(process.env.NODE_ENV!=="production")throw new Error("Recursive component attachment.");return}var n=this.__zr;n&&o.addSelfToZr(n),o.__zr=n,o.__hostTarget=this},s.prototype._detachComponent=function(o){o.__zr&&o.removeSelfFromZr(o.__zr),o.__zr=null,o.__hostTarget=null},s.prototype.getClipPath=function(){return this._clipPath},s.prototype.setClipPath=function(o){this._clipPath&&this._clipPath!==o&&this.removeClipPath(),this._attachComponent(o),this._clipPath=o,this.markRedraw()},s.prototype.removeClipPath=function(){var o=this._clipPath;o&&(this._detachComponent(o),this._clipPath=null,this.markRedraw())},s.prototype.getTextContent=function(){return this._textContent},s.prototype.setTextContent=function(o){var n=this._textContent;if(n!==o){if(n&&n!==o&&this.removeTextContent(),process.env.NODE_ENV!=="production"&&o.__zr&&!o.__hostTarget)throw new Error("Text element has been added to zrender.");o.innerTransformable=new Transformable,this._attachComponent(o),this._textContent=o,this.markRedraw()}},s.prototype.setTextConfig=function(o){this.textConfig||(this.textConfig={}),extend(this.textConfig,o),this.markRedraw()},s.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},s.prototype.removeTextContent=function(){var o=this._textContent;o&&(o.innerTransformable=null,this._detachComponent(o),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},s.prototype.getTextGuideLine=function(){return this._textGuide},s.prototype.setTextGuideLine=function(o){this._textGuide&&this._textGuide!==o&&this.removeTextGuideLine(),this._attachComponent(o),this._textGuide=o,this.markRedraw()},s.prototype.removeTextGuideLine=function(){var o=this._textGuide;o&&(this._detachComponent(o),this._textGuide=null,this.markRedraw())},s.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var o=this.__zr;o&&(this.__inHover?o.refreshHover():o.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},s.prototype.dirty=function(){this.markRedraw()},s.prototype._toggleHoverLayerFlag=function(o){this.__inHover=o;var n=this._textContent,a=this._textGuide;n&&(n.__inHover=o),a&&(a.__inHover=o)},s.prototype.addSelfToZr=function(o){if(this.__zr!==o){this.__zr=o;var n=this.animators;if(n)for(var a=0;a<n.length;a++)o.animation.addAnimator(n[a]);this._clipPath&&this._clipPath.addSelfToZr(o),this._textContent&&this._textContent.addSelfToZr(o),this._textGuide&&this._textGuide.addSelfToZr(o)}},s.prototype.removeSelfFromZr=function(o){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var a=0;a<n.length;a++)o.animation.removeAnimator(n[a]);this._clipPath&&this._clipPath.removeSelfFromZr(o),this._textContent&&this._textContent.removeSelfFromZr(o),this._textGuide&&this._textGuide.removeSelfFromZr(o)}},s.prototype.animate=function(o,n,a){var l=o?this[o]:this;if(process.env.NODE_ENV!=="production"&&!l){logError('Property "'+o+'" is not existed in element '+this.id);return}var c=new Animator(l,n,a);return o&&(c.targetName=o),this.addAnimator(c,o),c},s.prototype.addAnimator=function(o,n){var a=this.__zr,l=this;o.during(function(){l.updateDuringAnimation(n)}).done(function(){var c=l.animators,u=indexOf(c,o);u>=0&&c.splice(u,1)}),this.animators.push(o),a&&a.animation.addAnimator(o),a&&a.wakeUp()},s.prototype.updateDuringAnimation=function(o){this.markRedraw()},s.prototype.stopAnimation=function(o,n){for(var a=this.animators,l=a.length,c=[],u=0;u<l;u++){var d=a[u];!o||o===d.scope?d.stop(n):c.push(d)}return this.animators=c,this},s.prototype.animateTo=function(o,n,a){animateTo(this,o,n,a)},s.prototype.animateFrom=function(o,n,a){animateTo(this,o,n,a,!0)},s.prototype._transitionState=function(o,n,a,l){for(var c=animateTo(this,n,a,l),u=0;u<c.length;u++)c[u].__fromStateTransition=o},s.prototype.getBoundingRect=function(){return null},s.prototype.getPaintRect=function(){return null},s.initDefaultProps=function(){var o=s.prototype;o.type="element",o.name="",o.ignore=o.silent=o.isGroup=o.draggable=o.dragging=o.ignoreClip=o.__inHover=!1,o.__dirty=REDRAW_BIT;var n={};function a(c,u,d){n[c+u+d]||(console.warn("DEPRECATED: '"+c+"' has been deprecated. use '"+u+"', '"+d+"' instead"),n[c+u+d]=!0)}function l(c,u,d,h){Object.defineProperty(o,c,{get:function(){if(process.env.NODE_ENV!=="production"&&a(c,d,h),!this[u]){var g=this[u]=[];f(this,g)}return this[u]},set:function(g){process.env.NODE_ENV!=="production"&&a(c,d,h),this[d]=g[0],this[h]=g[1],this[u]=g,f(this,g)}});function f(g,p){Object.defineProperty(p,0,{get:function(){return g[d]},set:function(v){g[d]=v}}),Object.defineProperty(p,1,{get:function(){return g[h]},set:function(v){g[h]=v}})}}Object.defineProperty&&(l("position","_legacyPos","x","y"),l("scale","_legacyScale","scaleX","scaleY"),l("origin","_legacyOrigin","originX","originY"))}(),s}();mixin(Element,Eventful);mixin(Element,Transformable);function animateTo(s,o,n,a,l){n=n||{};var c=[];animateToShallow(s,"",s,o,n,a,c,l);var u=c.length,d=!1,h=n.done,f=n.aborted,g=function(){d=!0,u--,u<=0&&(d?h&&h():f&&f())},p=function(){u--,u<=0&&(d?h&&h():f&&f())};u||h&&h(),c.length>0&&n.during&&c[0].during(function(_,w){n.during(w)});for(var v=0;v<c.length;v++){var b=c[v];g&&b.done(g),p&&b.aborted(p),n.force&&b.duration(n.duration),b.start(n.easing)}return c}function copyArrShallow(s,o,n){for(var a=0;a<n;a++)s[a]=o[a]}function is2DArray(s){return isArrayLike(s[0])}function copyValue(s,o,n){if(isArrayLike(o[n]))if(isArrayLike(s[n])||(s[n]=[]),isTypedArray(o[n])){var a=o[n].length;s[n].length!==a&&(s[n]=new o[n].constructor(a),copyArrShallow(s[n],o[n],a))}else{var l=o[n],c=s[n],u=l.length;if(is2DArray(l))for(var d=l[0].length,h=0;h<u;h++)c[h]?copyArrShallow(c[h],l[h],d):c[h]=Array.prototype.slice.call(l[h]);else copyArrShallow(c,l,u);c.length=l.length}else s[n]=o[n]}function isValueSame(s,o){return s===o||isArrayLike(s)&&isArrayLike(o)&&is1DArraySame(s,o)}function is1DArraySame(s,o){var n=s.length;if(n!==o.length)return!1;for(var a=0;a<n;a++)if(s[a]!==o[a])return!1;return!0}function animateToShallow(s,o,n,a,l,c,u,d){for(var h=keys(a),f=l.duration,g=l.delay,p=l.additive,v=l.setToFinal,b=!isObject$3(c),_=s.animators,w=[],x=0;x<h.length;x++){var S=h[x],C=a[S];if(C!=null&&n[S]!=null&&(b||c[S]))if(isObject$3(C)&&!isArrayLike(C)&&!isGradientObject(C)){if(o){d||(n[S]=C,s.updateDuringAnimation(o));continue}animateToShallow(s,S,n[S],C,l,c&&c[S],u,d)}else w.push(S);else d||(n[S]=C,s.updateDuringAnimation(o),w.push(S))}var T=w.length;if(!p&&T)for(var R=0;R<_.length;R++){var A=_[R];if(A.targetName===o){var M=A.stopTracks(w);if(M){var D=indexOf(_,A);_.splice(D,1)}}}if(l.force||(w=filter(w,function(q){return!isValueSame(a[q],n[q])}),T=w.length),T>0||l.force&&!u.length){var O=void 0,H=void 0,j=void 0;if(d){H={},v&&(O={});for(var R=0;R<T;R++){var S=w[R];H[S]=n[S],v?O[S]=a[S]:n[S]=a[S]}}else if(v){j={};for(var R=0;R<T;R++){var S=w[R];j[S]=cloneValue(n[S]),copyValue(n,a,S)}}var A=new Animator(n,!1,!1,p?filter(_,function(Y){return Y.targetName===o}):null);A.targetName=o,l.scope&&(A.scope=l.scope),v&&O&&A.whenWithKeys(0,O,w),j&&A.whenWithKeys(0,j,w),A.whenWithKeys(f??500,d?H:a,w).delay(g||0),s.addAnimator(A,o),u.push(A)}}var Group$3=function(s){__extends(o,s);function o(n){var a=s.call(this)||this;return a.isGroup=!0,a._children=[],a.attr(n),a}return o.prototype.childrenRef=function(){return this._children},o.prototype.children=function(){return this._children.slice()},o.prototype.childAt=function(n){return this._children[n]},o.prototype.childOfName=function(n){for(var a=this._children,l=0;l<a.length;l++)if(a[l].name===n)return a[l]},o.prototype.childCount=function(){return this._children.length},o.prototype.add=function(n){if(n&&(n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),process.env.NODE_ENV!=="production"&&n.__hostTarget))throw"This elemenet has been used as an attachment";return this},o.prototype.addBefore=function(n,a){if(n&&n!==this&&n.parent!==this&&a&&a.parent===this){var l=this._children,c=l.indexOf(a);c>=0&&(l.splice(c,0,n),this._doAdd(n))}return this},o.prototype.replace=function(n,a){var l=indexOf(this._children,n);return l>=0&&this.replaceAt(a,l),this},o.prototype.replaceAt=function(n,a){var l=this._children,c=l[a];if(n&&n!==this&&n.parent!==this&&n!==c){l[a]=n,c.parent=null;var u=this.__zr;u&&c.removeSelfFromZr(u),this._doAdd(n)}return this},o.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var a=this.__zr;a&&a!==n.__zr&&n.addSelfToZr(a),a&&a.refresh()},o.prototype.remove=function(n){var a=this.__zr,l=this._children,c=indexOf(l,n);return c<0?this:(l.splice(c,1),n.parent=null,a&&n.removeSelfFromZr(a),a&&a.refresh(),this)},o.prototype.removeAll=function(){for(var n=this._children,a=this.__zr,l=0;l<n.length;l++){var c=n[l];a&&c.removeSelfFromZr(a),c.parent=null}return n.length=0,this},o.prototype.eachChild=function(n,a){for(var l=this._children,c=0;c<l.length;c++){var u=l[c];n.call(a,u,c)}return this},o.prototype.traverse=function(n,a){for(var l=0;l<this._children.length;l++){var c=this._children[l],u=n.call(a,c);c.isGroup&&!u&&c.traverse(n,a)}return this},o.prototype.addSelfToZr=function(n){s.prototype.addSelfToZr.call(this,n);for(var a=0;a<this._children.length;a++){var l=this._children[a];l.addSelfToZr(n)}},o.prototype.removeSelfFromZr=function(n){s.prototype.removeSelfFromZr.call(this,n);for(var a=0;a<this._children.length;a++){var l=this._children[a];l.removeSelfFromZr(n)}},o.prototype.getBoundingRect=function(n){for(var a=new BoundingRect(0,0,0,0),l=n||this._children,c=[],u=null,d=0;d<l.length;d++){var h=l[d];if(!(h.ignore||h.invisible)){var f=h.getBoundingRect(),g=h.getLocalTransform(c);g?(BoundingRect.applyTransform(a,f,g),u=u||a.clone(),u.union(a)):(u=u||f.clone(),u.union(f))}}return u||a},o}(Element);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(s){delete instances$1[s]}function isDarkMode(s){if(!s)return!1;if(typeof s=="string")return lum(s,1)<DARK_MODE_THRESHOLD;if(s.colorStops){for(var o=s.colorStops,n=0,a=o.length,l=0;l<a;l++)n+=lum(o[l].color,1);return n/=a,n<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function s(o,n,a){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,a=a||{},this.dom=n,this.id=o;var c=new Storage,u=a.renderer||"canvas";if(painterCtors[u]||(u=keys(painterCtors)[0]),process.env.NODE_ENV!=="production"&&!painterCtors[u])throw new Error("Renderer '"+u+"' is not imported. Please import it first.");a.useDirtyRect=a.useDirtyRect==null?!1:a.useDirtyRect;var d=new painterCtors[u](n,c,a,o),h=a.ssr||d.ssrOnly;this.storage=c,this.painter=d;var f=!env.node&&!env.worker&&!h?new HandlerDomProxy(d.getViewportRoot(),d.root):null,g=a.useCoarsePointer,p=g==null||g==="auto"?env.touchEventsSupported:!!g,v=44,b;p&&(b=retrieve2(a.pointerSize,v)),this.handler=new Handler(c,d,f,d.root,b),this.animation=new Animation({stage:{update:h?null:function(){return l._flush(!0)}}}),h||this.animation.start()}return s.prototype.add=function(o){this._disposed||!o||(this.storage.addRoot(o),o.addSelfToZr(this),this.refresh())},s.prototype.remove=function(o){this._disposed||!o||(this.storage.delRoot(o),o.removeSelfFromZr(this),this.refresh())},s.prototype.configLayer=function(o,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(o,n),this.refresh())},s.prototype.setBackgroundColor=function(o){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(o),this.refresh(),this._backgroundColor=o,this._darkMode=isDarkMode(o))},s.prototype.getBackgroundColor=function(){return this._backgroundColor},s.prototype.setDarkMode=function(o){this._darkMode=o},s.prototype.isDarkMode=function(){return this._darkMode},s.prototype.refreshImmediately=function(o){this._disposed||(o||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},s.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},s.prototype.flush=function(){this._disposed||this._flush(!1)},s.prototype._flush=function(o){var n,a=getTime();this._needsRefresh&&(n=!0,this.refreshImmediately(o)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var l=getTime();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-a})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},s.prototype.setSleepAfterStill=function(o){this._sleepAfterStill=o},s.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},s.prototype.refreshHover=function(){this._needsRefreshHover=!0},s.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},s.prototype.resize=function(o){this._disposed||(o=o||{},this.painter.resize(o.width,o.height),this.handler.resize())},s.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},s.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},s.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},s.prototype.setCursorStyle=function(o){this._disposed||this.handler.setCursorStyle(o)},s.prototype.findHover=function(o,n){if(!this._disposed)return this.handler.findHover(o,n)},s.prototype.on=function(o,n,a){return this._disposed||this.handler.on(o,n,a),this},s.prototype.off=function(o,n){this._disposed||this.handler.off(o,n)},s.prototype.trigger=function(o,n){this._disposed||this.handler.trigger(o,n)},s.prototype.clear=function(){if(!this._disposed){for(var o=this.storage.getRoots(),n=0;n<o.length;n++)o[n]instanceof Group$3&&o[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},s.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},s}();function init$2(s,o){var n=new ZRender(guid(),s,o);return instances$1[n.id]=n,n}function dispose$1(s){s.dispose()}function disposeAll(){for(var s in instances$1)instances$1.hasOwnProperty(s)&&instances$1[s].dispose();instances$1={}}function getInstance(s){return instances$1[s]}function registerPainter(s,o){painterCtors[s]=o}var ssrDataGetter;function getElementSSRData(s){if(typeof ssrDataGetter=="function")return ssrDataGetter(s)}function registerSSRDataGetter(s){ssrDataGetter=s}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(s){return s.replace(/^\s+|\s+$/g,"")}function linearMap$2(s,o,n,a){var l=o[0],c=o[1],u=n[0],d=n[1],h=c-l,f=d-u;if(h===0)return f===0?u:(u+d)/2;if(a)if(h>0){if(s<=l)return u;if(s>=c)return d}else{if(s>=l)return u;if(s<=c)return d}else{if(s===l)return u;if(s===c)return d}return(s-l)/h*f+u}function parsePercent(s,o){switch(s){case"center":case"middle":s="50%";break;case"left":case"top":s="0%";break;case"right":case"bottom":s="100%";break}return isString$2(s)?_trim(s).match(/%$/)?parseFloat(s)/100*o:parseFloat(s):s==null?NaN:+s}function round$3(s,o,n){return o==null&&(o=10),o=Math.min(Math.max(0,o),ROUND_SUPPORTED_PRECISION_MAX),s=(+s).toFixed(o),n?s:+s}function asc$2(s){return s.sort(function(o,n){return o-n}),s}function getPrecision(s){if(s=+s,isNaN(s))return 0;if(s>1e-14){for(var o=1,n=0;n<15;n++,o*=10)if(Math.round(s*o)/o===s)return n}return getPrecisionSafe(s)}function getPrecisionSafe(s){var o=s.toString().toLowerCase(),n=o.indexOf("e"),a=n>0?+o.slice(n+1):0,l=n>0?n:o.length,c=o.indexOf("."),u=c<0?0:l-1-c;return Math.max(0,u-a)}function getPixelPrecision(s,o){var n=Math.log,a=Math.LN10,l=Math.floor(n(s[1]-s[0])/a),c=Math.round(n(Math.abs(o[1]-o[0]))/a),u=Math.min(Math.max(-l+c,0),20);return isFinite(u)?u:20}function getPercentWithPrecision(s,o,n){if(!s[o])return 0;var a=getPercentSeats(s,n);return a[o]||0}function getPercentSeats(s,o){var n=reduce(s,function(b,_){return b+(isNaN(_)?0:_)},0);if(n===0)return[];for(var a=Math.pow(10,o),l=map$1(s,function(b){return(isNaN(b)?0:b)/n*a*100}),c=a*100,u=map$1(l,function(b){return Math.floor(b)}),d=reduce(u,function(b,_){return b+_},0),h=map$1(l,function(b,_){return b-u[_]});d<c;){for(var f=Number.NEGATIVE_INFINITY,g=null,p=0,v=h.length;p<v;++p)h[p]>f&&(f=h[p],g=p);++u[g],h[g]=0,++d}return map$1(u,function(b){return b/a})}function addSafe(s,o){var n=Math.max(getPrecision(s),getPrecision(o)),a=s+o;return n>ROUND_SUPPORTED_PRECISION_MAX?a:round$3(a,n)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(s){var o=Math.PI*2;return(s%o+o)%o}function isRadianAroundZero(s){return s>-1e-4&&s<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate(s){if(s instanceof Date)return s;if(isString$2(s)){var o=TIME_REG.exec(s);if(!o)return new Date(NaN);if(o[8]){var n=+o[4]||0;return o[8].toUpperCase()!=="Z"&&(n-=+o[8].slice(0,3)),new Date(Date.UTC(+o[1],+(o[2]||1)-1,+o[3]||1,n,+(o[5]||0),+o[6]||0,o[7]?+o[7].substring(0,3):0))}else return new Date(+o[1],+(o[2]||1)-1,+o[3]||1,+o[4]||0,+(o[5]||0),+o[6]||0,o[7]?+o[7].substring(0,3):0)}else if(s==null)return new Date(NaN);return new Date(Math.round(s))}function quantity(s){return Math.pow(10,quantityExponent(s))}function quantityExponent(s){if(s===0)return 0;var o=Math.floor(Math.log(s)/Math.LN10);return s/Math.pow(10,o)>=10&&o++,o}function nice(s,o){var n=quantityExponent(s),a=Math.pow(10,n),l=s/a,c;return o?l<1.5?c=1:l<2.5?c=2:l<4?c=3:l<7?c=5:c=10:l<1?c=1:l<2?c=2:l<3?c=3:l<5?c=5:c=10,s=c*a,n>=-20?+s.toFixed(n<0?-n:0):s}function quantile(s,o){var n=(s.length-1)*o+1,a=Math.floor(n),l=+s[a-1],c=n-a;return c?l+c*(s[a]-l):l}function reformIntervals(s){s.sort(function(h,f){return d(h,f,0)?-1:1});for(var o=-1/0,n=1,a=0;a<s.length;){for(var l=s[a].interval,c=s[a].close,u=0;u<2;u++)l[u]<=o&&(l[u]=o,c[u]=u?1:1-n),o=l[u],n=c[u];l[0]===l[1]&&c[0]*c[1]!==1?s.splice(a,1):a++}return s;function d(h,f,g){return h.interval[g]<f.interval[g]||h.interval[g]===f.interval[g]&&(h.close[g]-f.close[g]===(g?-1:1)||!g&&d(h,f,1))}}function numericToNumber(s){var o=parseFloat(s);return o==s&&(o!==0||!isString$2(s)||s.indexOf("x")<=0)?o:NaN}function isNumeric(s){return!isNaN(numericToNumber(s))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(s,o){return o===0?s:getGreatestCommonDividor(o,s%o)}function getLeastCommonMultiple(s,o){return s==null?o:o==null?s:s*o/getGreatestCommonDividor(s,o)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(s,o,n){if(hasConsole){if(n){if(storedLogs[o])return;storedLogs[o]=!0}console[s](ECHARTS_PREFIX+o)}}function log(s,o){outputLog("log",s,o)}function warn(s,o){outputLog("warn",s,o)}function error(s,o){outputLog("error",s,o)}function deprecateLog(s){process.env.NODE_ENV!=="production"&&outputLog("warn","DEPRECATED: "+s,!0)}function deprecateReplaceLog(s,o,n){process.env.NODE_ENV!=="production"&&deprecateLog((n?"["+n+"]":"")+(s+" is deprecated, use "+o+" instead."))}function makePrintable(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var n="";if(process.env.NODE_ENV!=="production"){var a=function(l){return l===void 0?"undefined":l===1/0?"Infinity":l===-1/0?"-Infinity":eqNaN(l)?"NaN":l instanceof Date?"Date("+l.toISOString()+")":isFunction$1(l)?"function () { ... }":isRegExp(l)?l+"":null};n=map$1(s,function(l){if(isString$2(l))return l;var c=a(l);if(c!=null)return c;if(typeof JSON<"u"&&JSON.stringify)try{return JSON.stringify(l,function(u,d){var h=a(d);return h??d})}catch{return"?"}else return"?"}).join(" ")}return n}function throwError(s){throw new Error(s)}function interpolateNumber(s,o,n){return(o-s)*n+s}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(s){return s instanceof Array?s:s==null?[]:[s]}function defaultEmphasis(s,o,n){if(s){s[o]=s[o]||{},s.emphasis=s.emphasis||{},s.emphasis[o]=s.emphasis[o]||{};for(var a=0,l=n.length;a<l;a++){var c=n[a];!s.emphasis[o].hasOwnProperty(c)&&s[o].hasOwnProperty(c)&&(s.emphasis[o][c]=s[o][c])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(s){return isObject$3(s)&&!isArray$1(s)&&!(s instanceof Date)?s.value:s}function isDataItemOption(s){return isObject$3(s)&&!(s instanceof Array)}function mappingToExists(s,o,n){var a=n==="normalMerge",l=n==="replaceMerge",c=n==="replaceAll";s=s||[],o=(o||[]).slice();var u=createHashMap();each$f(o,function(h,f){if(!isObject$3(h)){o[f]=null;return}process.env.NODE_ENV!=="production"&&(h.id!=null&&!isValidIdOrName(h.id)&&warnInvalidateIdOrName(h.id),h.name!=null&&!isValidIdOrName(h.name)&&warnInvalidateIdOrName(h.name))});var d=prepareResult(s,u,n);return(a||l)&&mappingById(d,s,u,o),a&&mappingByName(d,o),a||l?mappingByIndex(d,o,l):c&&mappingInReplaceAllMode(d,o),makeIdAndName(d),d}function prepareResult(s,o,n){var a=[];if(n==="replaceAll")return a;for(var l=0;l<s.length;l++){var c=s[l];c&&c.id!=null&&o.set(c.id,l),a.push({existing:n==="replaceMerge"||isComponentIdInternal(c)?null:c,newOption:null,keyInfo:null,brandNew:null})}return a}function mappingById(s,o,n,a){each$f(a,function(l,c){if(!(!l||l.id==null)){var u=makeComparableKey(l.id),d=n.get(u);if(d!=null){var h=s[d];assert(!h.newOption,'Duplicated option on id "'+u+'".'),h.newOption=l,h.existing=o[d],a[c]=null}}})}function mappingByName(s,o){each$f(o,function(n,a){if(!(!n||n.name==null))for(var l=0;l<s.length;l++){var c=s[l].existing;if(!s[l].newOption&&c&&(c.id==null||n.id==null)&&!isComponentIdInternal(n)&&!isComponentIdInternal(c)&&keyExistAndEqual("name",c,n)){s[l].newOption=n,o[a]=null;return}}})}function mappingByIndex(s,o,n){each$f(o,function(a){if(a){for(var l,c=0;(l=s[c])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&a.id!=null&&!keyExistAndEqual("id",a,l.existing));)c++;l?(l.newOption=a,l.brandNew=n):s.push({newOption:a,brandNew:n,existing:null,keyInfo:null}),c++}})}function mappingInReplaceAllMode(s,o){each$f(o,function(n){s.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(s){var o=createHashMap();each$f(s,function(n){var a=n.existing;a&&o.set(a.id,n)}),each$f(s,function(n){var a=n.newOption;assert(!a||a.id==null||!o.get(a.id)||o.get(a.id)===n,"id duplicates: "+(a&&a.id)),a&&a.id!=null&&o.set(a.id,n),!n.keyInfo&&(n.keyInfo={})}),each$f(s,function(n,a){var l=n.existing,c=n.newOption,u=n.keyInfo;if(isObject$3(c)){if(u.name=c.name!=null?makeComparableKey(c.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+a,l)u.id=makeComparableKey(l.id);else if(c.id!=null)u.id=makeComparableKey(c.id);else{var d=0;do u.id="\0"+u.name+"\0"+d++;while(o.get(u.id))}o.set(u.id,n)}})}function keyExistAndEqual(s,o,n){var a=convertOptionIdName(o[s],null),l=convertOptionIdName(n[s],null);return a!=null&&l!=null&&a===l}function makeComparableKey(s){if(process.env.NODE_ENV!=="production"&&s==null)throw new Error;return convertOptionIdName(s,"")}function convertOptionIdName(s,o){return s==null?o:isString$2(s)?s:isNumber(s)||isStringSafe(s)?s+"":o}function warnInvalidateIdOrName(s){process.env.NODE_ENV!=="production"&&warn("`"+s+"` is invalid id or name. Must be a string or number.")}function isValidIdOrName(s){return isStringSafe(s)||isNumeric(s)}function isNameSpecified(s){var o=s.name;return!!(o&&o.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(s){return s&&s.id!=null&&makeComparableKey(s.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(s){return INTERNAL_COMPONENT_ID_PREFIX+s}function setComponentTypeToKeyInfo(s,o,n){each$f(s,function(a){var l=a.newOption;isObject$3(l)&&(a.keyInfo.mainType=o,a.keyInfo.subType=determineSubType(o,l,a.existing,n))})}function determineSubType(s,o,n,a){var l=o.type?o.type:n?n.subType:a.determineSubType(s,o);return l}function compressBatches(s,o){var n={},a={};return l(s||[],n),l(o||[],a,n),[c(n),c(a)];function l(u,d,h){for(var f=0,g=u.length;f<g;f++){var p=convertOptionIdName(u[f].seriesId,null);if(p==null)return;for(var v=normalizeToArray(u[f].dataIndex),b=h&&h[p],_=0,w=v.length;_<w;_++){var x=v[_];b&&b[x]?b[x]=null:(d[p]||(d[p]={}))[x]=1}}}function c(u,d){var h=[];for(var f in u)if(u.hasOwnProperty(f)&&u[f]!=null)if(d)h.push(+f);else{var g=c(u[f],!0);g.length&&h.push({seriesId:f,dataIndex:g})}return h}}function queryDataIndex(s,o){if(o.dataIndexInside!=null)return o.dataIndexInside;if(o.dataIndex!=null)return isArray$1(o.dataIndex)?map$1(o.dataIndex,function(n){return s.indexOfRawIndex(n)}):s.indexOfRawIndex(o.dataIndex);if(o.name!=null)return isArray$1(o.name)?map$1(o.name,function(n){return s.indexOfName(n)}):s.indexOfName(o.name)}function makeInner(){var s="__ec_inner_"+innerUniqueIndex++;return function(o){return o[s]||(o[s]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(s,o,n){var a=preParseFinder(o,n),l=a.mainTypeSpecified,c=a.queryOptionMap,u=a.others,d=u,h=n?n.defaultMainType:null;return!l&&h&&c.set(h,{}),c.each(function(f,g){var p=queryReferringComponents(s,g,f,{useDefault:h===g,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});d[g+"Models"]=p.models,d[g+"Model"]=p.models[0]}),d}function preParseFinder(s,o){var n;if(isString$2(s)){var a={};a[s+"Index"]=0,n=a}else n=s;var l=createHashMap(),c={},u=!1;return each$f(n,function(d,h){if(h==="dataIndex"||h==="dataIndexInside"){c[h]=d;return}var f=h.match(/^(\w+)(Index|Id|Name)$/)||[],g=f[1],p=(f[2]||"").toLowerCase();if(!(!g||!p||o&&o.includeMainTypes&&indexOf(o.includeMainTypes,g)<0)){u=u||!!g;var v=l.get(g)||l.set(g,{});v[p]=d}}),{mainTypeSpecified:u,queryOptionMap:l,others:c}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(s,o,n,a){a=a||SINGLE_REFERRING;var l=n.index,c=n.id,u=n.name,d={models:null,specified:l!=null||c!=null||u!=null};if(!d.specified){var h=void 0;return d.models=a.useDefault&&(h=s.getComponent(o))?[h]:[],d}return l==="none"||l===!1?(assert(a.enableNone,'`"none"` or `false` is not a valid value on index option.'),d.models=[],d):(l==="all"&&(assert(a.enableAll,'`"all"` is not a valid value on index option.'),l=c=u=null),d.models=s.queryComponents({mainType:o,index:l,id:c,name:u}),d)}function setAttribute(s,o,n){s.setAttribute?s.setAttribute(o,n):s[o]=n}function getAttribute(s,o){return s.getAttribute?s.getAttribute(o):s[o]}function getTooltipRenderMode(s){return s==="auto"?env.domSupported?"html":"richText":s||"html"}function groupData(s,o){var n=createHashMap(),a=[];return each$f(s,function(l){var c=o(l);(n.get(c)||(a.push(c),n.set(c,[]))).push(l)}),{keys:a,buckets:n}}function interpolateRawValues(s,o,n,a,l){var c=o==null||o==="auto";if(a==null)return a;if(isNumber(a)){var u=interpolateNumber(n||0,a,l);return round$3(u,c?Math.max(getPrecision(n||0),getPrecision(a)):o)}else{if(isString$2(a))return l<1?n:a;for(var d=[],h=n,f=a,g=Math.max(h?h.length:0,f.length),p=0;p<g;++p){var v=s.getDimensionInfo(p);if(v&&v.type==="ordinal")d[p]=(l<1&&h?h:f)[p];else{var b=h&&h[p]?h[p]:0,_=f[p],u=interpolateNumber(b,_,l);d[p]=round$3(u,c?Math.max(getPrecision(b),getPrecision(_)):o)}}return d}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(s){var o={main:"",sub:""};if(s){var n=s.split(TYPE_DELIMITER);o.main=n[0]||"",o.sub=n[1]||""}return o}function checkClassType(s){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(s),'componentType "'+s+'" illegal')}function isExtendedClass(s){return!!(s&&s[IS_EXTENDED_CLASS])}function enableClassExtend(s,o){s.$constructor=s,s.extend=function(n){process.env.NODE_ENV!=="production"&&each$f(o,function(c){n[c]||console.warn("Method `"+c+"` should be implemented"+(n.type?" in "+n.type:"")+".")});var a=this,l;return isESClass(a)?l=function(c){__extends$1(u,c);function u(){return c.apply(this,arguments)||this}return u}(a):(l=function(){(n.$constructor||a).apply(this,arguments)},inherits(l,this)),extend(l.prototype,n),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=a,l}}function isESClass(s){return isFunction$1(s)&&/^class\s/.test(Function.prototype.toString.call(s))}function mountExtend(s,o){s.extend=o.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(s){var o=["__\0is_clz",classBase++].join("_");s.prototype[o]=!0,process.env.NODE_ENV!=="production"&&assert(!s.isInstance,'The method "is" can not be defined.'),s.isInstance=function(n){return!!(n&&n[o])}}function superCall(s,o){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];return this.superClass.prototype[o].apply(s,n)}function superApply(s,o,n){return this.superClass.prototype[o].apply(s,n)}function enableClassManagement(s){var o={};s.registerClass=function(a){var l=a.type||a.prototype.type;if(l){checkClassType(l),a.prototype.type=l;var c=parseClassType(l);if(!c.sub)process.env.NODE_ENV!=="production"&&o[c.main]&&console.warn(c.main+" exists."),o[c.main]=a;else if(c.sub!==IS_CONTAINER){var u=n(c);u[c.sub]=a}}return a},s.getClass=function(a,l,c){var u=o[a];if(u&&u[IS_CONTAINER]&&(u=l?u[l]:null),c&&!u)throw new Error(l?"Component "+a+"."+(l||"")+" is used but not imported.":a+".type should be specified.");return u},s.getClassesByMainType=function(a){var l=parseClassType(a),c=[],u=o[l.main];return u&&u[IS_CONTAINER]?each$f(u,function(d,h){h!==IS_CONTAINER&&c.push(d)}):c.push(u),c},s.hasClass=function(a){var l=parseClassType(a);return!!o[l.main]},s.getAllClassMainTypes=function(){var a=[];return each$f(o,function(l,c){a.push(c)}),a},s.hasSubTypes=function(a){var l=parseClassType(a),c=o[l.main];return c&&c[IS_CONTAINER]};function n(a){var l=o[a.main];return(!l||!l[IS_CONTAINER])&&(l=o[a.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(s,o){for(var n=0;n<s.length;n++)s[n][1]||(s[n][1]=s[n][0]);return o=o||!1,function(a,l,c){for(var u={},d=0;d<s.length;d++){var h=s[d][1];if(!(l&&indexOf(l,h)>=0||c&&indexOf(c,h)<0)){var f=a.getShallow(h,o);f!=null&&(u[s[d][0]]=f)}}return u}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function s(){}return s.prototype.getAreaStyle=function(o,n){return getAreaStyle(this,o,n)},s}(),globalImageCache=new LRU(50);function findExistImage(s){if(typeof s=="string"){var o=globalImageCache.get(s);return o&&o.image}else return s}function createOrUpdateImage(s,o,n,a,l){if(s)if(typeof s=="string"){if(o&&o.__zrImageSrc===s||!n)return o;var c=globalImageCache.get(s),u={hostEl:n,cb:a,cbPayload:l};return c?(o=c.image,!isImageReady(o)&&c.pending.push(u)):(o=platformApi.loadImage(s,imageOnLoad,imageOnLoad),o.__zrImageSrc=s,globalImageCache.put(s,o.__cachedImgObj={image:o,pending:[u]})),o}else return s;else return o}function imageOnLoad(){var s=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var o=0;o<s.pending.length;o++){var n=s.pending[o],a=n.cb;a&&a(this,n.cbPayload),n.hostEl.dirty()}s.pending.length=0}function isImageReady(s){return s&&s.width&&s.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(s,o,n,a,l){var c={};return truncateText2(c,s,o,n,a,l),c.text}function truncateText2(s,o,n,a,l,c){if(!n){s.text="",s.isTruncated=!1;return}var u=(o+"").split(`
`);c=prepareTruncateOptions(n,a,l,c);for(var d=!1,h={},f=0,g=u.length;f<g;f++)truncateSingleLine(h,u[f],c),u[f]=h.textLine,d=d||h.isTruncated;s.text=u.join(`
`),s.isTruncated=d}function prepareTruncateOptions(s,o,n,a){a=a||{};var l=extend({},a);l.font=o,n=retrieve2(n,"..."),l.maxIterations=retrieve2(a.maxIterations,2);var c=l.minChar=retrieve2(a.minChar,0);l.cnCharWidth=getWidth("国",o);var u=l.ascCharWidth=getWidth("a",o);l.placeholder=retrieve2(a.placeholder,"");for(var d=s=Math.max(0,s-1),h=0;h<c&&d>=u;h++)d-=u;var f=getWidth(n,o);return f>d&&(n="",f=0),d=s-f,l.ellipsis=n,l.ellipsisWidth=f,l.contentWidth=d,l.containerWidth=s,l}function truncateSingleLine(s,o,n){var a=n.containerWidth,l=n.font,c=n.contentWidth;if(!a){s.textLine="",s.isTruncated=!1;return}var u=getWidth(o,l);if(u<=a){s.textLine=o,s.isTruncated=!1;return}for(var d=0;;d++){if(u<=c||d>=n.maxIterations){o+=n.ellipsis;break}var h=d===0?estimateLength(o,c,n.ascCharWidth,n.cnCharWidth):u>0?Math.floor(o.length*c/u):0;o=o.substr(0,h),u=getWidth(o,l)}o===""&&(o=n.placeholder),s.textLine=o,s.isTruncated=!0}function estimateLength(s,o,n,a){for(var l=0,c=0,u=s.length;c<u&&l<o;c++){var d=s.charCodeAt(c);l+=0<=d&&d<=127?n:a}return c}function parsePlainText(s,o){s!=null&&(s+="");var n=o.overflow,a=o.padding,l=o.font,c=n==="truncate",u=getLineHeight(l),d=retrieve2(o.lineHeight,u),h=!!o.backgroundColor,f=o.lineOverflow==="truncate",g=!1,p=o.width,v;p!=null&&(n==="break"||n==="breakAll")?v=s?wrapText(s,o.font,p,n==="breakAll",0).lines:[]:v=s?s.split(`
`):[];var b=v.length*d,_=retrieve2(o.height,b);if(b>_&&f){var w=Math.floor(_/d);g=g||v.length>w,v=v.slice(0,w)}if(s&&c&&p!=null)for(var x=prepareTruncateOptions(p,l,o.ellipsis,{minChar:o.truncateMinChar,placeholder:o.placeholder}),S={},C=0;C<v.length;C++)truncateSingleLine(S,v[C],x),v[C]=S.textLine,g=g||S.isTruncated;for(var T=_,R=0,C=0;C<v.length;C++)R=Math.max(getWidth(v[C],l),R);p==null&&(p=R);var A=R;return a&&(T+=a[0]+a[2],A+=a[1]+a[3],p+=a[1]+a[3]),h&&(A=p),{lines:v,height:_,outerWidth:A,outerHeight:T,lineHeight:d,calculatedLineHeight:u,contentWidth:R,contentHeight:b,width:p,isTruncated:g}}var RichTextToken=function(){function s(){}return s}(),RichTextLine=function(){function s(o){this.tokens=[],o&&(this.tokens=o)}return s}(),RichTextContentBlock=function(){function s(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return s}();function parseRichText(s,o){var n=new RichTextContentBlock;if(s!=null&&(s+=""),!s)return n;for(var a=o.width,l=o.height,c=o.overflow,u=(c==="break"||c==="breakAll")&&a!=null?{width:a,accumWidth:0,breakAll:c==="breakAll"}:null,d=STYLE_REG.lastIndex=0,h;(h=STYLE_REG.exec(s))!=null;){var f=h.index;f>d&&pushTokens(n,s.substring(d,f),o,u),pushTokens(n,h[2],o,u,h[1]),d=STYLE_REG.lastIndex}d<s.length&&pushTokens(n,s.substring(d,s.length),o,u);var g=[],p=0,v=0,b=o.padding,_=c==="truncate",w=o.lineOverflow==="truncate",x={};function S(ie,de,ge){ie.width=de,ie.lineHeight=ge,p+=ge,v=Math.max(v,de)}e:for(var C=0;C<n.lines.length;C++){for(var T=n.lines[C],R=0,A=0,M=0;M<T.tokens.length;M++){var D=T.tokens[M],O=D.styleName&&o.rich[D.styleName]||{},H=D.textPadding=O.padding,j=H?H[1]+H[3]:0,q=D.font=O.font||o.font;D.contentHeight=getLineHeight(q);var Y=retrieve2(O.height,D.contentHeight);if(D.innerHeight=Y,H&&(Y+=H[0]+H[2]),D.height=Y,D.lineHeight=retrieve3(O.lineHeight,o.lineHeight,Y),D.align=O&&O.align||o.align,D.verticalAlign=O&&O.verticalAlign||"middle",w&&l!=null&&p+D.lineHeight>l){var ee=n.lines.length;M>0?(T.tokens=T.tokens.slice(0,M),S(T,A,R),n.lines=n.lines.slice(0,C+1)):n.lines=n.lines.slice(0,C),n.isTruncated=n.isTruncated||n.lines.length<ee;break e}var te=O.width,re=te==null||te==="auto";if(typeof te=="string"&&te.charAt(te.length-1)==="%")D.percentWidth=te,g.push(D),D.contentWidth=getWidth(D.text,q);else{if(re){var ae=O.backgroundColor,ue=ae&&ae.image;ue&&(ue=findExistImage(ue),isImageReady(ue)&&(D.width=Math.max(D.width,ue.width*Y/ue.height)))}var ce=_&&a!=null?a-A:null;ce!=null&&ce<D.width?!re||ce<j?(D.text="",D.width=D.contentWidth=0):(truncateText2(x,D.text,ce-j,q,o.ellipsis,{minChar:o.truncateMinChar}),D.text=x.text,n.isTruncated=n.isTruncated||x.isTruncated,D.width=D.contentWidth=getWidth(D.text,q)):D.contentWidth=getWidth(D.text,q)}D.width+=j,A+=D.width,O&&(R=Math.max(R,D.lineHeight))}S(T,A,R)}n.outerWidth=n.width=retrieve2(a,v),n.outerHeight=n.height=retrieve2(l,p),n.contentHeight=p,n.contentWidth=v,b&&(n.outerWidth+=b[1]+b[3],n.outerHeight+=b[0]+b[2]);for(var C=0;C<g.length;C++){var D=g[C],le=D.percentWidth;D.width=parseInt(le,10)/100*n.width}return n}function pushTokens(s,o,n,a,l){var c=o==="",u=l&&n.rich[l]||{},d=s.lines,h=u.font||n.font,f=!1,g,p;if(a){var v=u.padding,b=v?v[1]+v[3]:0;if(u.width!=null&&u.width!=="auto"){var _=parsePercent$1(u.width,a.width)+b;d.length>0&&_+a.accumWidth>a.width&&(g=o.split(`
`),f=!0),a.accumWidth=_}else{var w=wrapText(o,h,a.width,a.breakAll,a.accumWidth);a.accumWidth=w.accumWidth+b,p=w.linesWidths,g=w.lines}}else g=o.split(`
`);for(var x=0;x<g.length;x++){var S=g[x],C=new RichTextToken;if(C.styleName=l,C.text=S,C.isLineHolder=!S&&!c,typeof u.width=="number"?C.width=u.width:C.width=p?p[x]:getWidth(S,h),!x&&!f){var T=(d[d.length-1]||(d[0]=new RichTextLine)).tokens,R=T.length;R===1&&T[0].isLineHolder?T[0]=C:(S||!R||c)&&T.push(C)}else d.push(new RichTextLine([C]))}}function isAlphabeticLetter(s){var o=s.charCodeAt(0);return o>=32&&o<=591||o>=880&&o<=4351||o>=4608&&o<=5119||o>=7680&&o<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(s,o){return s[o]=!0,s},{});function isWordBreakChar(s){return isAlphabeticLetter(s)?!!breakCharMap[s]:!0}function wrapText(s,o,n,a,l){for(var c=[],u=[],d="",h="",f=0,g=0,p=0;p<s.length;p++){var v=s.charAt(p);if(v===`
`){h&&(d+=h,g+=f),c.push(d),u.push(g),d="",h="",f=0,g=0;continue}var b=getWidth(v,o),_=a?!1:!isWordBreakChar(v);if(c.length?g+b>n:l+g+b>n){g?(d||h)&&(_?(d||(d=h,h="",f=0,g=f),c.push(d),u.push(g-f),h+=v,f+=b,d="",g=f):(h&&(d+=h,h="",f=0),c.push(d),u.push(g),d=v,g=b)):_?(c.push(h),u.push(f),h=v,f=b):(c.push(v),u.push(b));continue}g+=b,_?(h+=v,f+=b):(h&&(d+=h,h="",f=0),d+=v)}return!c.length&&!d&&(d=s,h="",f=0),h&&(d+=h),d&&(c.push(d),u.push(g)),c.length===1&&(g+=l),{accumWidth:g,lines:c,linesWidths:u}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype._init=function(n){for(var a=keys(n),l=0;l<a.length;l++){var c=a[l];c==="style"?this.useStyle(n[c]):s.prototype.attrKV.call(this,c,n[c])}this.style||this.useStyle({})},o.prototype.beforeBrush=function(){},o.prototype.afterBrush=function(){},o.prototype.innerBeforeBrush=function(){},o.prototype.innerAfterBrush=function(){},o.prototype.shouldBePainted=function(n,a,l,c){var u=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,n,a)||u&&!u[0]&&!u[3])return!1;if(l&&this.__clipPaths){for(var d=0;d<this.__clipPaths.length;++d)if(this.__clipPaths[d].isZeroArea())return!1}if(c&&this.parent)for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}return!0},o.prototype.contain=function(n,a){return this.rectContain(n,a)},o.prototype.traverse=function(n,a){n.call(a,this)},o.prototype.rectContain=function(n,a){var l=this.transformCoordToLocal(n,a),c=this.getBoundingRect();return c.contain(l[0],l[1])},o.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var a=this.transform,l=this.getBoundingRect(),c=this.style,u=c.shadowBlur||0,d=c.shadowOffsetX||0,h=c.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),a?BoundingRect.applyTransform(n,l,a):n.copy(l),(u||d||h)&&(n.width+=u*2+Math.abs(d),n.height+=u*2+Math.abs(h),n.x=Math.min(n.x,n.x+d-u),n.y=Math.min(n.y,n.y+h-u));var f=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-f),n.y=Math.floor(n.y-f),n.width=Math.ceil(n.width+1+f*2),n.height=Math.ceil(n.height+1+f*2))}return n},o.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},o.prototype.getPrevPaintRect=function(){return this._prevPaintRect},o.prototype.animateStyle=function(n){return this.animate("style",n)},o.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},o.prototype.attrKV=function(n,a){n!=="style"?s.prototype.attrKV.call(this,n,a):this.style?this.setStyle(a):this.useStyle(a)},o.prototype.setStyle=function(n,a){return typeof n=="string"?this.style[n]=a:extend(this.style,n),this.dirtyStyle(),this},o.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},o.prototype.dirty=function(){this.dirtyStyle()},o.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},o.prototype.styleUpdated=function(){this.__dirty&=-3},o.prototype.createStyle=function(n){return createObject(DEFAULT_COMMON_STYLE,n)},o.prototype.useStyle=function(n){n[STYLE_MAGIC_KEY]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},o.prototype.isStyleObject=function(n){return n[STYLE_MAGIC_KEY]},o.prototype._innerSaveToNormal=function(n){s.prototype._innerSaveToNormal.call(this,n);var a=this._normalState;n.style&&!a.style&&(a.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,a,PRIMARY_STATES_KEYS)},o.prototype._applyStateObj=function(n,a,l,c,u,d){s.prototype._applyStateObj.call(this,n,a,l,c,u,d);var h=!(a&&c),f;if(a&&a.style?u?c?f=a.style:(f=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(f,a.style)):(f=this._mergeStyle(this.createStyle(),c?this.style:l.style),this._mergeStyle(f,a.style)):h&&(f=l.style),f)if(u){var g=this.style;if(this.style=this.createStyle(h?{}:g),h)for(var p=keys(g),v=0;v<p.length;v++){var b=p[v];b in f&&(f[b]=f[b],this.style[b]=g[b])}for(var _=keys(f),v=0;v<_.length;v++){var b=_[v];this.style[b]=this.style[b]}this._transitionState(n,{style:f},d,this.getAnimationStyleProps())}else this.useStyle(f);for(var w=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,v=0;v<w.length;v++){var b=w[v];a&&a[b]!=null?this[b]=a[b]:h&&l[b]!=null&&(this[b]=l[b])}},o.prototype._mergeStates=function(n){for(var a=s.prototype._mergeStates.call(this,n),l,c=0;c<n.length;c++){var u=n[c];u.style&&(l=l||{},this._mergeStyle(l,u.style))}return l&&(a.style=l),a},o.prototype._mergeStyle=function(n,a){return extend(n,a),n},o.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},o.initDefaultProps=function(){var n=o.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),o}(Element),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(s,o,n){return tmpRect.copy(s.getBoundingRect()),s.transform&&tmpRect.applyTransform(s.transform),viewRect.width=o,viewRect.height=n,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(s,o,n){if(s.length!==0){for(var a=s[0],l=a[0],c=a[0],u=a[1],d=a[1],h=1;h<s.length;h++)a=s[h],l=mathMin$9(l,a[0]),c=mathMax$9(c,a[0]),u=mathMin$9(u,a[1]),d=mathMax$9(d,a[1]);o[0]=l,o[1]=u,n[0]=c,n[1]=d}}function fromLine(s,o,n,a,l,c){l[0]=mathMin$9(s,n),l[1]=mathMin$9(o,a),c[0]=mathMax$9(s,n),c[1]=mathMax$9(o,a)}var xDim=[],yDim=[];function fromCubic(s,o,n,a,l,c,u,d,h,f){var g=cubicExtrema,p=cubicAt,v=g(s,n,l,u,xDim);h[0]=1/0,h[1]=1/0,f[0]=-1/0,f[1]=-1/0;for(var b=0;b<v;b++){var _=p(s,n,l,u,xDim[b]);h[0]=mathMin$9(_,h[0]),f[0]=mathMax$9(_,f[0])}v=g(o,a,c,d,yDim);for(var b=0;b<v;b++){var w=p(o,a,c,d,yDim[b]);h[1]=mathMin$9(w,h[1]),f[1]=mathMax$9(w,f[1])}h[0]=mathMin$9(s,h[0]),f[0]=mathMax$9(s,f[0]),h[0]=mathMin$9(u,h[0]),f[0]=mathMax$9(u,f[0]),h[1]=mathMin$9(o,h[1]),f[1]=mathMax$9(o,f[1]),h[1]=mathMin$9(d,h[1]),f[1]=mathMax$9(d,f[1])}function fromQuadratic(s,o,n,a,l,c,u,d){var h=quadraticExtremum,f=quadraticAt$1,g=mathMax$9(mathMin$9(h(s,n,l),1),0),p=mathMax$9(mathMin$9(h(o,a,c),1),0),v=f(s,n,l,g),b=f(o,a,c,p);u[0]=mathMin$9(s,l,v),u[1]=mathMin$9(o,c,b),d[0]=mathMax$9(s,l,v),d[1]=mathMax$9(o,c,b)}function fromArc(s,o,n,a,l,c,u,d,h){var f=min$1,g=max$1,p=Math.abs(l-c);if(p%PI2$8<1e-4&&p>1e-4){d[0]=s-n,d[1]=o-a,h[0]=s+n,h[1]=o+a;return}if(start[0]=mathCos$4(l)*n+s,start[1]=mathSin$4(l)*a+o,end[0]=mathCos$4(c)*n+s,end[1]=mathSin$4(c)*a+o,f(d,start,end),g(h,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),c=c%PI2$8,c<0&&(c=c+PI2$8),l>c&&!u?c+=PI2$8:l<c&&u&&(l+=PI2$8),u){var v=c;c=l,l=v}for(var b=0;b<c;b+=Math.PI/2)b>l&&(extremity[0]=mathCos$4(b)*n+s,extremity[1]=mathSin$4(b)*a+o,f(d,extremity,d),g(h,extremity,h))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(s){var o=Math.round(s/PI$8*1e8)/1e8;return o%2*PI$8}function normalizeArcAngles(s,o){var n=modPI2(s[0]);n<0&&(n+=PI2$7);var a=n-s[0],l=s[1];l+=a,!o&&l-n>=PI2$7?l=n+PI2$7:o&&n-l>=PI2$7?l=n-PI2$7:!o&&n>l?l=n+(PI2$7-modPI2(n-l)):o&&n<l&&(l=n-(PI2$7-modPI2(l-n))),s[0]=n,s[1]=l}var PathProxy=function(){function s(o){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,o&&(this._saveData=!1),this._saveData&&(this.data=[])}return s.prototype.increaseVersion=function(){this._version++},s.prototype.getVersion=function(){return this._version},s.prototype.setScale=function(o,n,a){a=a||0,a>0&&(this._ux=mathAbs$2(a/devicePixelRatio/o)||0,this._uy=mathAbs$2(a/devicePixelRatio/n)||0)},s.prototype.setDPR=function(o){this.dpr=o},s.prototype.setContext=function(o){this._ctx=o},s.prototype.getContext=function(){return this._ctx},s.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},s.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},s.prototype.moveTo=function(o,n){return this._drawPendingPt(),this.addData(CMD$4.M,o,n),this._ctx&&this._ctx.moveTo(o,n),this._x0=o,this._y0=n,this._xi=o,this._yi=n,this},s.prototype.lineTo=function(o,n){var a=mathAbs$2(o-this._xi),l=mathAbs$2(n-this._yi),c=a>this._ux||l>this._uy;if(this.addData(CMD$4.L,o,n),this._ctx&&c&&this._ctx.lineTo(o,n),c)this._xi=o,this._yi=n,this._pendingPtDist=0;else{var u=a*a+l*l;u>this._pendingPtDist&&(this._pendingPtX=o,this._pendingPtY=n,this._pendingPtDist=u)}return this},s.prototype.bezierCurveTo=function(o,n,a,l,c,u){return this._drawPendingPt(),this.addData(CMD$4.C,o,n,a,l,c,u),this._ctx&&this._ctx.bezierCurveTo(o,n,a,l,c,u),this._xi=c,this._yi=u,this},s.prototype.quadraticCurveTo=function(o,n,a,l){return this._drawPendingPt(),this.addData(CMD$4.Q,o,n,a,l),this._ctx&&this._ctx.quadraticCurveTo(o,n,a,l),this._xi=a,this._yi=l,this},s.prototype.arc=function(o,n,a,l,c,u){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=c,normalizeArcAngles(tmpAngles,u),l=tmpAngles[0],c=tmpAngles[1];var d=c-l;return this.addData(CMD$4.A,o,n,a,a,l,d,0,u?0:1),this._ctx&&this._ctx.arc(o,n,a,l,c,u),this._xi=mathCos$3(c)*a+o,this._yi=mathSin$3(c)*a+n,this},s.prototype.arcTo=function(o,n,a,l,c){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(o,n,a,l,c),this},s.prototype.rect=function(o,n,a,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(o,n,a,l),this.addData(CMD$4.R,o,n,a,l),this},s.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var o=this._ctx,n=this._x0,a=this._y0;return o&&o.closePath(),this._xi=n,this._yi=a,this},s.prototype.fill=function(o){o&&o.fill(),this.toStatic()},s.prototype.stroke=function(o){o&&o.stroke(),this.toStatic()},s.prototype.len=function(){return this._len},s.prototype.setData=function(o){var n=o.length;!(this.data&&this.data.length===n)&&hasTypedArray&&(this.data=new Float32Array(n));for(var a=0;a<n;a++)this.data[a]=o[a];this._len=n},s.prototype.appendPath=function(o){o instanceof Array||(o=[o]);for(var n=o.length,a=0,l=this._len,c=0;c<n;c++)a+=o[c].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+a));for(var c=0;c<n;c++)for(var u=o[c].data,d=0;d<u.length;d++)this.data[l++]=u[d];this._len=l},s.prototype.addData=function(o,n,a,l,c,u,d,h,f){if(this._saveData){var g=this.data;this._len+arguments.length>g.length&&(this._expandData(),g=this.data);for(var p=0;p<arguments.length;p++)g[this._len++]=arguments[p]}},s.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},s.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var o=[],n=0;n<this._len;n++)o[n]=this.data[n];this.data=o}},s.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var o=this.data;o instanceof Array&&(o.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(o)))}},s.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var o=this.data,n=0,a=0,l=0,c=0,u;for(u=0;u<this._len;){var d=o[u++],h=u===1;switch(h&&(n=o[u],a=o[u+1],l=n,c=a),d){case CMD$4.M:n=l=o[u++],a=c=o[u++],min2[0]=l,min2[1]=c,max2[0]=l,max2[1]=c;break;case CMD$4.L:fromLine(n,a,o[u],o[u+1],min2,max2),n=o[u++],a=o[u++];break;case CMD$4.C:fromCubic(n,a,o[u++],o[u++],o[u++],o[u++],o[u],o[u+1],min2,max2),n=o[u++],a=o[u++];break;case CMD$4.Q:fromQuadratic(n,a,o[u++],o[u++],o[u],o[u+1],min2,max2),n=o[u++],a=o[u++];break;case CMD$4.A:var f=o[u++],g=o[u++],p=o[u++],v=o[u++],b=o[u++],_=o[u++]+b;u+=1;var w=!o[u++];h&&(l=mathCos$3(b)*p+f,c=mathSin$3(b)*v+g),fromArc(f,g,p,v,b,_,w,min2,max2),n=mathCos$3(_)*p+f,a=mathSin$3(_)*v+g;break;case CMD$4.R:l=n=o[u++],c=a=o[u++];var x=o[u++],S=o[u++];fromLine(l,c,l+x,c+S,min2,max2);break;case CMD$4.Z:n=l,a=c;break}min$1(min,min,min2),max$1(max,max,max2)}return u===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},s.prototype._calculateLength=function(){var o=this.data,n=this._len,a=this._ux,l=this._uy,c=0,u=0,d=0,h=0;this._pathSegLen||(this._pathSegLen=[]);for(var f=this._pathSegLen,g=0,p=0,v=0;v<n;){var b=o[v++],_=v===1;_&&(c=o[v],u=o[v+1],d=c,h=u);var w=-1;switch(b){case CMD$4.M:c=d=o[v++],u=h=o[v++];break;case CMD$4.L:{var x=o[v++],S=o[v++],C=x-c,T=S-u;(mathAbs$2(C)>a||mathAbs$2(T)>l||v===n-1)&&(w=Math.sqrt(C*C+T*T),c=x,u=S);break}case CMD$4.C:{var R=o[v++],A=o[v++],x=o[v++],S=o[v++],M=o[v++],D=o[v++];w=cubicLength(c,u,R,A,x,S,M,D,10),c=M,u=D;break}case CMD$4.Q:{var R=o[v++],A=o[v++],x=o[v++],S=o[v++];w=quadraticLength(c,u,R,A,x,S,10),c=x,u=S;break}case CMD$4.A:var O=o[v++],H=o[v++],j=o[v++],q=o[v++],Y=o[v++],ee=o[v++],te=ee+Y;v+=1,_&&(d=mathCos$3(Y)*j+O,h=mathSin$3(Y)*q+H),w=mathMax$8(j,q)*mathMin$8(PI2$7,Math.abs(ee)),c=mathCos$3(te)*j+O,u=mathSin$3(te)*q+H;break;case CMD$4.R:{d=c=o[v++],h=u=o[v++];var re=o[v++],ae=o[v++];w=re*2+ae*2;break}case CMD$4.Z:{var C=d-c,T=h-u;w=Math.sqrt(C*C+T*T),c=d,u=h;break}}w>=0&&(f[p++]=w,g+=w)}return this._pathLen=g,g},s.prototype.rebuildPath=function(o,n){var a=this.data,l=this._ux,c=this._uy,u=this._len,d,h,f,g,p,v,b=n<1,_,w,x=0,S=0,C,T=0,R,A;if(!(b&&(this._pathSegLen||this._calculateLength(),_=this._pathSegLen,w=this._pathLen,C=n*w,!C)))e:for(var M=0;M<u;){var D=a[M++],O=M===1;switch(O&&(f=a[M],g=a[M+1],d=f,h=g),D!==CMD$4.L&&T>0&&(o.lineTo(R,A),T=0),D){case CMD$4.M:d=f=a[M++],h=g=a[M++],o.moveTo(f,g);break;case CMD$4.L:{p=a[M++],v=a[M++];var H=mathAbs$2(p-f),j=mathAbs$2(v-g);if(H>l||j>c){if(b){var q=_[S++];if(x+q>C){var Y=(C-x)/q;o.lineTo(f*(1-Y)+p*Y,g*(1-Y)+v*Y);break e}x+=q}o.lineTo(p,v),f=p,g=v,T=0}else{var ee=H*H+j*j;ee>T&&(R=p,A=v,T=ee)}break}case CMD$4.C:{var te=a[M++],re=a[M++],ae=a[M++],ue=a[M++],ce=a[M++],le=a[M++];if(b){var q=_[S++];if(x+q>C){var Y=(C-x)/q;cubicSubdivide(f,te,ae,ce,Y,tmpOutX),cubicSubdivide(g,re,ue,le,Y,tmpOutY),o.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}x+=q}o.bezierCurveTo(te,re,ae,ue,ce,le),f=ce,g=le;break}case CMD$4.Q:{var te=a[M++],re=a[M++],ae=a[M++],ue=a[M++];if(b){var q=_[S++];if(x+q>C){var Y=(C-x)/q;quadraticSubdivide(f,te,ae,Y,tmpOutX),quadraticSubdivide(g,re,ue,Y,tmpOutY),o.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}x+=q}o.quadraticCurveTo(te,re,ae,ue),f=ae,g=ue;break}case CMD$4.A:var ie=a[M++],de=a[M++],ge=a[M++],pe=a[M++],be=a[M++],Se=a[M++],Le=a[M++],De=!a[M++],ke=ge>pe?ge:pe,Te=mathAbs$2(ge-pe)>.001,Ae=be+Se,Ee=!1;if(b){var q=_[S++];x+q>C&&(Ae=be+Se*(C-x)/q,Ee=!0),x+=q}if(Te&&o.ellipse?o.ellipse(ie,de,ge,pe,Le,be,Ae,De):o.arc(ie,de,ke,be,Ae,De),Ee)break e;O&&(d=mathCos$3(be)*ge+ie,h=mathSin$3(be)*pe+de),f=mathCos$3(Ae)*ge+ie,g=mathSin$3(Ae)*pe+de;break;case CMD$4.R:d=f=a[M],h=g=a[M+1],p=a[M++],v=a[M++];var we=a[M++],Ve=a[M++];if(b){var q=_[S++];if(x+q>C){var _e=C-x;o.moveTo(p,v),o.lineTo(p+mathMin$8(_e,we),v),_e-=we,_e>0&&o.lineTo(p+we,v+mathMin$8(_e,Ve)),_e-=Ve,_e>0&&o.lineTo(p+mathMax$8(we-_e,0),v+Ve),_e-=we,_e>0&&o.lineTo(p,v+mathMax$8(Ve-_e,0));break e}x+=q}o.rect(p,v,we,Ve);break;case CMD$4.Z:if(b){var q=_[S++];if(x+q>C){var Y=(C-x)/q;o.lineTo(f*(1-Y)+d*Y,g*(1-Y)+h*Y);break e}x+=q}o.closePath(),f=d,g=h}}},s.prototype.clone=function(){var o=new s,n=this.data;return o.data=n.slice?n.slice():Array.prototype.slice.call(n),o._len=this._len,o},s.CMD=CMD$4,s.initDefaultProps=function(){var o=s.prototype;o._saveData=!0,o._ux=0,o._uy=0,o._pendingPtDist=0,o._version=0}(),s}();function containStroke$4(s,o,n,a,l,c,u){if(l===0)return!1;var d=l,h=0,f=s;if(u>o+d&&u>a+d||u<o-d&&u<a-d||c>s+d&&c>n+d||c<s-d&&c<n-d)return!1;if(s!==n)h=(o-a)/(s-n),f=(s*a-n*o)/(s-n);else return Math.abs(c-s)<=d/2;var g=h*c-u+f,p=g*g/(h*h+1);return p<=d/2*d/2}function containStroke$3(s,o,n,a,l,c,u,d,h,f,g){if(h===0)return!1;var p=h;if(g>o+p&&g>a+p&&g>c+p&&g>d+p||g<o-p&&g<a-p&&g<c-p&&g<d-p||f>s+p&&f>n+p&&f>l+p&&f>u+p||f<s-p&&f<n-p&&f<l-p&&f<u-p)return!1;var v=cubicProjectPoint(s,o,n,a,l,c,u,d,f,g,null);return v<=p/2}function containStroke$2(s,o,n,a,l,c,u,d,h){if(u===0)return!1;var f=u;if(h>o+f&&h>a+f&&h>c+f||h<o-f&&h<a-f&&h<c-f||d>s+f&&d>n+f&&d>l+f||d<s-f&&d<n-f&&d<l-f)return!1;var g=quadraticProjectPoint(s,o,n,a,l,c,d,h,null);return g<=f/2}var PI2$6=Math.PI*2;function normalizeRadian(s){return s%=PI2$6,s<0&&(s+=PI2$6),s}var PI2$5=Math.PI*2;function containStroke$1(s,o,n,a,l,c,u,d,h){if(u===0)return!1;var f=u;d-=s,h-=o;var g=Math.sqrt(d*d+h*h);if(g-f>n||g+f<n)return!1;if(Math.abs(a-l)%PI2$5<1e-4)return!0;if(c){var p=a;a=normalizeRadian(l),l=normalizeRadian(p)}else a=normalizeRadian(a),l=normalizeRadian(l);a>l&&(l+=PI2$5);var v=Math.atan2(h,d);return v<0&&(v+=PI2$5),v>=a&&v<=l||v+PI2$5>=a&&v+PI2$5<=l}function windingLine(s,o,n,a,l,c){if(c>o&&c>a||c<o&&c<a||a===o)return 0;var u=(c-o)/(a-o),d=a<o?1:-1;(u===1||u===0)&&(d=a<o?.5:-.5);var h=u*(n-s)+s;return h===l?1/0:h>l?d:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(s,o){return Math.abs(s-o)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var s=extrema[0];extrema[0]=extrema[1],extrema[1]=s}function windingCubic(s,o,n,a,l,c,u,d,h,f){if(f>o&&f>a&&f>c&&f>d||f<o&&f<a&&f<c&&f<d)return 0;var g=cubicRootAt(o,a,c,d,f,roots);if(g===0)return 0;for(var p=0,v=-1,b=void 0,_=void 0,w=0;w<g;w++){var x=roots[w],S=x===0||x===1?.5:1,C=cubicAt(s,n,l,u,x);C<h||(v<0&&(v=cubicExtrema(o,a,c,d,extrema),extrema[1]<extrema[0]&&v>1&&swapExtrema(),b=cubicAt(o,a,c,d,extrema[0]),v>1&&(_=cubicAt(o,a,c,d,extrema[1]))),v===2?x<extrema[0]?p+=b<o?S:-S:x<extrema[1]?p+=_<b?S:-S:p+=d<_?S:-S:x<extrema[0]?p+=b<o?S:-S:p+=d<b?S:-S)}return p}function windingQuadratic(s,o,n,a,l,c,u,d){if(d>o&&d>a&&d>c||d<o&&d<a&&d<c)return 0;var h=quadraticRootAt(o,a,c,d,roots);if(h===0)return 0;var f=quadraticExtremum(o,a,c);if(f>=0&&f<=1){for(var g=0,p=quadraticAt$1(o,a,c,f),v=0;v<h;v++){var b=roots[v]===0||roots[v]===1?.5:1,_=quadraticAt$1(s,n,l,roots[v]);_<u||(roots[v]<f?g+=p<o?b:-b:g+=c<p?b:-b)}return g}else{var b=roots[0]===0||roots[0]===1?.5:1,_=quadraticAt$1(s,n,l,roots[0]);return _<u?0:c<o?b:-b}}function windingArc(s,o,n,a,l,c,u,d){if(d-=o,d>n||d<-n)return 0;var h=Math.sqrt(n*n-d*d);roots[0]=-h,roots[1]=h;var f=Math.abs(a-l);if(f<1e-4)return 0;if(f>=PI2$4-1e-4){a=0,l=PI2$4;var g=c?1:-1;return u>=roots[0]+s&&u<=roots[1]+s?g:0}if(a>l){var p=a;a=l,l=p}a<0&&(a+=PI2$4,l+=PI2$4);for(var v=0,b=0;b<2;b++){var _=roots[b];if(_+s>u){var w=Math.atan2(d,_),g=c?1:-1;w<0&&(w=PI2$4+w),(w>=a&&w<=l||w+PI2$4>=a&&w+PI2$4<=l)&&(w>Math.PI/2&&w<Math.PI*1.5&&(g=-g),v+=g)}}return v}function containPath(s,o,n,a,l){for(var c=s.data,u=s.len(),d=0,h=0,f=0,g=0,p=0,v,b,_=0;_<u;){var w=c[_++],x=_===1;switch(w===CMD$3.M&&_>1&&(n||(d+=windingLine(h,f,g,p,a,l))),x&&(h=c[_],f=c[_+1],g=h,p=f),w){case CMD$3.M:g=c[_++],p=c[_++],h=g,f=p;break;case CMD$3.L:if(n){if(containStroke$4(h,f,c[_],c[_+1],o,a,l))return!0}else d+=windingLine(h,f,c[_],c[_+1],a,l)||0;h=c[_++],f=c[_++];break;case CMD$3.C:if(n){if(containStroke$3(h,f,c[_++],c[_++],c[_++],c[_++],c[_],c[_+1],o,a,l))return!0}else d+=windingCubic(h,f,c[_++],c[_++],c[_++],c[_++],c[_],c[_+1],a,l)||0;h=c[_++],f=c[_++];break;case CMD$3.Q:if(n){if(containStroke$2(h,f,c[_++],c[_++],c[_],c[_+1],o,a,l))return!0}else d+=windingQuadratic(h,f,c[_++],c[_++],c[_],c[_+1],a,l)||0;h=c[_++],f=c[_++];break;case CMD$3.A:var S=c[_++],C=c[_++],T=c[_++],R=c[_++],A=c[_++],M=c[_++];_+=1;var D=!!(1-c[_++]);v=Math.cos(A)*T+S,b=Math.sin(A)*R+C,x?(g=v,p=b):d+=windingLine(h,f,v,b,a,l);var O=(a-S)*R/T+S;if(n){if(containStroke$1(S,C,R,A,A+M,D,o,O,l))return!0}else d+=windingArc(S,C,R,A,A+M,D,O,l);h=Math.cos(A+M)*T+S,f=Math.sin(A+M)*R+C;break;case CMD$3.R:g=h=c[_++],p=f=c[_++];var H=c[_++],j=c[_++];if(v=g+H,b=p+j,n){if(containStroke$4(g,p,v,p,o,a,l)||containStroke$4(v,p,v,b,o,a,l)||containStroke$4(v,b,g,b,o,a,l)||containStroke$4(g,b,g,p,o,a,l))return!0}else d+=windingLine(v,p,v,b,a,l),d+=windingLine(g,b,g,p,a,l);break;case CMD$3.Z:if(n){if(containStroke$4(h,f,g,p,o,a,l))return!0}else d+=windingLine(h,f,g,p,a,l);h=g,f=p;break}}return!n&&!isAroundEqual$1(f,p)&&(d+=windingLine(h,f,g,p,a,l)||0),d!==0}function contain$2(s,o,n){return containPath(s,0,!1,o,n)}function containStroke(s,o,n,a){return containPath(s,o,!0,n,a)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.update=function(){var n=this;s.prototype.update.call(this);var a=this.style;if(a.decal){var l=this._decalEl=this._decalEl||new o;l.buildPath===o.prototype.buildPath&&(l.buildPath=function(h){n.buildPath(h,n.shape)}),l.silent=!0;var c=l.style;for(var u in a)c[u]!==a[u]&&(c[u]=a[u]);c.fill=a.fill?a.decal:null,c.decal=null,c.shadowColor=null,a.strokeFirst&&(c.stroke=null);for(var d=0;d<pathCopyParams.length;++d)l[pathCopyParams[d]]=this[pathCopyParams[d]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},o.prototype.getDecalElement=function(){return this._decalEl},o.prototype._init=function(n){var a=keys(n);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var c=0;c<a.length;c++){var u=a[c],d=n[u];u==="style"?this.style?extend(this.style,d):this.useStyle(d):u==="shape"?extend(this.shape,d):s.prototype.attrKV.call(this,u,d)}this.style||this.useStyle({})},o.prototype.getDefaultStyle=function(){return null},o.prototype.getDefaultShape=function(){return{}},o.prototype.canBeInsideText=function(){return this.hasFill()},o.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(isString$2(n)){var a=lum(n,0);return a>.5?DARK_LABEL_COLOR:a>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(n)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},o.prototype.getInsideTextStroke=function(n){var a=this.style.fill;if(isString$2(a)){var l=this.__zr,c=!!(l&&l.isDarkMode()),u=lum(n,0)<DARK_MODE_THRESHOLD;if(c===u)return a}},o.prototype.buildPath=function(n,a,l){},o.prototype.pathUpdated=function(){this.__dirty&=-5},o.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},o.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},o.prototype.hasStroke=function(){var n=this.style,a=n.stroke;return!(a==null||a==="none"||!(n.lineWidth>0))},o.prototype.hasFill=function(){var n=this.style,a=n.fill;return a!=null&&a!=="none"},o.prototype.getBoundingRect=function(){var n=this._rect,a=this.style,l=!n;if(l){var c=!1;this.path||(c=!0,this.createPathProxy());var u=this.path;(c||this.__dirty&SHAPE_CHANGED_BIT)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),n=u.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var d=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||l){d.copy(n);var h=a.strokeNoScale?this.getLineScale():1,f=a.lineWidth;if(!this.hasFill()){var g=this.strokeContainThreshold;f=Math.max(f,g??4)}h>1e-10&&(d.width+=f/h,d.height+=f/h,d.x-=f/h/2,d.y-=f/h/2)}return d}return n},o.prototype.contain=function(n,a){var l=this.transformCoordToLocal(n,a),c=this.getBoundingRect(),u=this.style;if(n=l[0],a=l[1],c.contain(n,a)){var d=this.path;if(this.hasStroke()){var h=u.lineWidth,f=u.strokeNoScale?this.getLineScale():1;if(f>1e-10&&(this.hasFill()||(h=Math.max(h,this.strokeContainThreshold)),containStroke(d,h/f,n,a)))return!0}if(this.hasFill())return contain$2(d,n,a)}return!1},o.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},o.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},o.prototype.animateShape=function(n){return this.animate("shape",n)},o.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},o.prototype.attrKV=function(n,a){n==="shape"?this.setShape(a):s.prototype.attrKV.call(this,n,a)},o.prototype.setShape=function(n,a){var l=this.shape;return l||(l=this.shape={}),typeof n=="string"?l[n]=a:extend(l,n),this.dirtyShape(),this},o.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},o.prototype.createStyle=function(n){return createObject(DEFAULT_PATH_STYLE,n)},o.prototype._innerSaveToNormal=function(n){s.prototype._innerSaveToNormal.call(this,n);var a=this._normalState;n.shape&&!a.shape&&(a.shape=extend({},this.shape))},o.prototype._applyStateObj=function(n,a,l,c,u,d){s.prototype._applyStateObj.call(this,n,a,l,c,u,d);var h=!(a&&c),f;if(a&&a.shape?u?c?f=a.shape:(f=extend({},l.shape),extend(f,a.shape)):(f=extend({},c?this.shape:l.shape),extend(f,a.shape)):h&&(f=l.shape),f)if(u){this.shape=extend({},this.shape);for(var g={},p=keys(f),v=0;v<p.length;v++){var b=p[v];typeof f[b]=="object"?this.shape[b]=f[b]:g[b]=f[b]}this._transitionState(n,{shape:g},d)}else this.shape=f,this.dirtyShape()},o.prototype._mergeStates=function(n){for(var a=s.prototype._mergeStates.call(this,n),l,c=0;c<n.length;c++){var u=n[c];u.shape&&(l=l||{},this._mergeStyle(l,u.shape))}return l&&(a.shape=l),a},o.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},o.prototype.isZeroArea=function(){return!1},o.extend=function(n){var a=function(c){__extends(u,c);function u(d){var h=c.call(this,d)||this;return n.init&&n.init.call(h,d),h}return u.prototype.getDefaultStyle=function(){return clone$4(n.style)},u.prototype.getDefaultShape=function(){return clone$4(n.shape)},u}(o);for(var l in n)typeof n[l]=="function"&&(a.prototype[l]=n[l]);return a},o.initDefaultProps=function(){var n=o.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),o}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(s){__extends(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.hasStroke=function(){var n=this.style,a=n.stroke;return a!=null&&a!=="none"&&n.lineWidth>0},o.prototype.hasFill=function(){var n=this.style,a=n.fill;return a!=null&&a!=="none"},o.prototype.createStyle=function(n){return createObject(DEFAULT_TSPAN_STYLE,n)},o.prototype.setBoundingRect=function(n){this._rect=n},o.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var a=n.text;a!=null?a+="":a="";var l=getBoundingRect(a,n.font,n.textAlign,n.textBaseline);if(l.x+=n.x||0,l.y+=n.y||0,this.hasStroke()){var c=n.lineWidth;l.x-=c/2,l.y-=c/2,l.width+=c,l.height+=c}this._rect=l}return this._rect},o.initDefaultProps=function(){var n=o.prototype;n.dirtyRectTolerance=10}(),o}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(s){return!!(s&&typeof s!="string"&&s.width&&s.height)}var ZRImage=function(s){__extends(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.createStyle=function(n){return createObject(DEFAULT_IMAGE_STYLE,n)},o.prototype._getSize=function(n){var a=this.style,l=a[n];if(l!=null)return l;var c=isImageLike$1(a.image)?a.image:this.__image;if(!c)return 0;var u=n==="width"?"height":"width",d=a[u];return d==null?c[n]:c[n]/c[u]*d},o.prototype.getWidth=function(){return this._getSize("width")},o.prototype.getHeight=function(){return this._getSize("height")},o.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},o.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new BoundingRect(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},o}(Displayable);ZRImage.prototype.type="image";function buildPath$2(s,o){var n=o.x,a=o.y,l=o.width,c=o.height,u=o.r,d,h,f,g;l<0&&(n=n+l,l=-l),c<0&&(a=a+c,c=-c),typeof u=="number"?d=h=f=g=u:u instanceof Array?u.length===1?d=h=f=g=u[0]:u.length===2?(d=f=u[0],h=g=u[1]):u.length===3?(d=u[0],h=g=u[1],f=u[2]):(d=u[0],h=u[1],f=u[2],g=u[3]):d=h=f=g=0;var p;d+h>l&&(p=d+h,d*=l/p,h*=l/p),f+g>l&&(p=f+g,f*=l/p,g*=l/p),h+f>c&&(p=h+f,h*=c/p,f*=c/p),d+g>c&&(p=d+g,d*=c/p,g*=c/p),s.moveTo(n+d,a),s.lineTo(n+l-h,a),h!==0&&s.arc(n+l-h,a+h,h,-Math.PI/2,0),s.lineTo(n+l,a+c-f),f!==0&&s.arc(n+l-f,a+c-f,f,0,Math.PI/2),s.lineTo(n+g,a+c),g!==0&&s.arc(n+g,a+c-g,g,Math.PI/2,Math.PI),s.lineTo(n,a+d),d!==0&&s.arc(n+d,a+d,d,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(s,o,n){if(o){var a=o.x1,l=o.x2,c=o.y1,u=o.y2;s.x1=a,s.x2=l,s.y1=c,s.y2=u;var d=n&&n.lineWidth;return d&&(round$2(a*2)===round$2(l*2)&&(s.x1=s.x2=subPixelOptimize$1(a,d,!0)),round$2(c*2)===round$2(u*2)&&(s.y1=s.y2=subPixelOptimize$1(c,d,!0))),s}}function subPixelOptimizeRect$1(s,o,n){if(o){var a=o.x,l=o.y,c=o.width,u=o.height;s.x=a,s.y=l,s.width=c,s.height=u;var d=n&&n.lineWidth;return d&&(s.x=subPixelOptimize$1(a,d,!0),s.y=subPixelOptimize$1(l,d,!0),s.width=Math.max(subPixelOptimize$1(a+c,d,!1)-s.x,c===0?0:1),s.height=Math.max(subPixelOptimize$1(l+u,d,!1)-s.y,u===0?0:1)),s}}function subPixelOptimize$1(s,o,n){if(!o)return s;var a=round$2(s*2);return(a+round$2(o))%2===0?a/2:(a+(n?1:-1))/2}var RectShape=function(){function s(){this.x=0,this.y=0,this.width=0,this.height=0}return s}(),subPixelOptimizeOutputShape$1={},Rect$2=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new RectShape},o.prototype.buildPath=function(n,a){var l,c,u,d;if(this.subPixelOptimize){var h=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,a,this.style);l=h.x,c=h.y,u=h.width,d=h.height,h.r=a.r,a=h}else l=a.x,c=a.y,u=a.width,d=a.height;a.r?buildPath$2(n,a):n.rect(l,c,u,d)},o.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},o}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(s){__extends(o,s);function o(n){var a=s.call(this)||this;return a.type="text",a._children=[],a._defaultStyle=DEFAULT_RICH_TEXT_COLOR,a.attr(n),a}return o.prototype.childrenRef=function(){return this._children},o.prototype.update=function(){s.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var a=this._children[n];a.zlevel=this.zlevel,a.z=this.z,a.z2=this.z2,a.culling=this.culling,a.cursor=this.cursor,a.invisible=this.invisible}},o.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):s.prototype.updateTransform.call(this)},o.prototype.getLocalTransform=function(n){var a=this.innerTransformable;return a?a.getLocalTransform(n):s.prototype.getLocalTransform.call(this,n)},o.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),s.prototype.getComputedTransform.call(this)},o.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},o.prototype.addSelfToZr=function(n){s.prototype.addSelfToZr.call(this,n);for(var a=0;a<this._children.length;a++)this._children[a].__zr=n},o.prototype.removeSelfFromZr=function(n){s.prototype.removeSelfFromZr.call(this,n);for(var a=0;a<this._children.length;a++)this._children[a].__zr=null},o.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new BoundingRect(0,0,0,0),a=this._children,l=[],c=null,u=0;u<a.length;u++){var d=a[u],h=d.getBoundingRect(),f=d.getLocalTransform(l);f?(n.copy(h),n.applyTransform(f),c=c||n.clone(),c.union(n)):(c=c||h.clone(),c.union(h))}this._rect=c||n}return this._rect},o.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||DEFAULT_RICH_TEXT_COLOR},o.prototype.setTextContent=function(n){if(process.env.NODE_ENV!=="production")throw new Error("Can't attach text on another text")},o.prototype._mergeStyle=function(n,a){if(!a)return n;var l=a.rich,c=n.rich||l&&{};return extend(n,a),l&&c?(this._mergeRich(c,l),n.rich=c):c&&(n.rich=c),n},o.prototype._mergeRich=function(n,a){for(var l=keys(a),c=0;c<l.length;c++){var u=l[c];n[u]=n[u]||{},extend(n[u],a[u])}},o.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},o.prototype._getOrCreateChild=function(n){var a=this._children[this._childCursor];return(!a||!(a instanceof n))&&(a=new n),this._children[this._childCursor++]=a,a.__zr=this.__zr,a.parent=this,a},o.prototype._updatePlainTexts=function(){var n=this.style,a=n.font||DEFAULT_FONT,l=n.padding,c=getStyleText(n),u=parsePlainText(c,n),d=needDrawBackground(n),h=!!n.backgroundColor,f=u.outerHeight,g=u.outerWidth,p=u.contentWidth,v=u.lines,b=u.lineHeight,_=this._defaultStyle;this.isTruncated=!!u.isTruncated;var w=n.x||0,x=n.y||0,S=n.align||_.align||"left",C=n.verticalAlign||_.verticalAlign||"top",T=w,R=adjustTextY(x,u.contentHeight,C);if(d||l){var A=adjustTextX(w,g,S),M=adjustTextY(x,f,C);d&&this._renderBackground(n,n,A,M,g,f)}R+=b/2,l&&(T=getTextXForPadding(w,S,l),C==="top"?R+=l[0]:C==="bottom"&&(R-=l[2]));for(var D=0,O=!1,H=getFill("fill"in n?n.fill:(O=!0,_.fill)),j=getStroke("stroke"in n?n.stroke:!h&&(!_.autoStroke||O)?(D=DEFAULT_STROKE_LINE_WIDTH,_.stroke):null),q=n.textShadowBlur>0,Y=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),ee=u.calculatedLineHeight,te=0;te<v.length;te++){var re=this._getOrCreateChild(TSpan),ae=re.createStyle();re.useStyle(ae),ae.text=v[te],ae.x=T,ae.y=R,ae.textAlign=S,ae.textBaseline="middle",ae.opacity=n.opacity,ae.strokeFirst=!0,q&&(ae.shadowBlur=n.textShadowBlur||0,ae.shadowColor=n.textShadowColor||"transparent",ae.shadowOffsetX=n.textShadowOffsetX||0,ae.shadowOffsetY=n.textShadowOffsetY||0),ae.stroke=j,ae.fill=H,j&&(ae.lineWidth=n.lineWidth||D,ae.lineDash=n.lineDash,ae.lineDashOffset=n.lineDashOffset||0),ae.font=a,setSeparateFont(ae,n),R+=b,Y&&re.setBoundingRect(new BoundingRect(adjustTextX(ae.x,p,ae.textAlign),adjustTextY(ae.y,ee,ae.textBaseline),p,ee))}},o.prototype._updateRichTexts=function(){var n=this.style,a=getStyleText(n),l=parseRichText(a,n),c=l.width,u=l.outerWidth,d=l.outerHeight,h=n.padding,f=n.x||0,g=n.y||0,p=this._defaultStyle,v=n.align||p.align,b=n.verticalAlign||p.verticalAlign;this.isTruncated=!!l.isTruncated;var _=adjustTextX(f,u,v),w=adjustTextY(g,d,b),x=_,S=w;h&&(x+=h[3],S+=h[0]);var C=x+c;needDrawBackground(n)&&this._renderBackground(n,n,_,w,u,d);for(var T=!!n.backgroundColor,R=0;R<l.lines.length;R++){for(var A=l.lines[R],M=A.tokens,D=M.length,O=A.lineHeight,H=A.width,j=0,q=x,Y=C,ee=D-1,te=void 0;j<D&&(te=M[j],!te.align||te.align==="left");)this._placeToken(te,n,O,S,q,"left",T),H-=te.width,q+=te.width,j++;for(;ee>=0&&(te=M[ee],te.align==="right");)this._placeToken(te,n,O,S,Y,"right",T),H-=te.width,Y-=te.width,ee--;for(q+=(c-(q-x)-(C-Y)-H)/2;j<=ee;)te=M[j],this._placeToken(te,n,O,S,q+te.width/2,"center",T),q+=te.width,j++;S+=O}},o.prototype._placeToken=function(n,a,l,c,u,d,h){var f=a.rich[n.styleName]||{};f.text=n.text;var g=n.verticalAlign,p=c+l/2;g==="top"?p=c+n.height/2:g==="bottom"&&(p=c+l-n.height/2);var v=!n.isLineHolder&&needDrawBackground(f);v&&this._renderBackground(f,a,d==="right"?u-n.width:d==="center"?u-n.width/2:u,p-n.height/2,n.width,n.height);var b=!!f.backgroundColor,_=n.textPadding;_&&(u=getTextXForPadding(u,d,_),p-=n.height/2-_[0]-n.innerHeight/2);var w=this._getOrCreateChild(TSpan),x=w.createStyle();w.useStyle(x);var S=this._defaultStyle,C=!1,T=0,R=getFill("fill"in f?f.fill:"fill"in a?a.fill:(C=!0,S.fill)),A=getStroke("stroke"in f?f.stroke:"stroke"in a?a.stroke:!b&&!h&&(!S.autoStroke||C)?(T=DEFAULT_STROKE_LINE_WIDTH,S.stroke):null),M=f.textShadowBlur>0||a.textShadowBlur>0;x.text=n.text,x.x=u,x.y=p,M&&(x.shadowBlur=f.textShadowBlur||a.textShadowBlur||0,x.shadowColor=f.textShadowColor||a.textShadowColor||"transparent",x.shadowOffsetX=f.textShadowOffsetX||a.textShadowOffsetX||0,x.shadowOffsetY=f.textShadowOffsetY||a.textShadowOffsetY||0),x.textAlign=d,x.textBaseline="middle",x.font=n.font||DEFAULT_FONT,x.opacity=retrieve3(f.opacity,a.opacity,1),setSeparateFont(x,f),A&&(x.lineWidth=retrieve3(f.lineWidth,a.lineWidth,T),x.lineDash=retrieve2(f.lineDash,a.lineDash),x.lineDashOffset=a.lineDashOffset||0,x.stroke=A),R&&(x.fill=R);var D=n.contentWidth,O=n.contentHeight;w.setBoundingRect(new BoundingRect(adjustTextX(x.x,D,x.textAlign),adjustTextY(x.y,O,x.textBaseline),D,O))},o.prototype._renderBackground=function(n,a,l,c,u,d){var h=n.backgroundColor,f=n.borderWidth,g=n.borderColor,p=h&&h.image,v=h&&!p,b=n.borderRadius,_=this,w,x;if(v||n.lineHeight||f&&g){w=this._getOrCreateChild(Rect$2),w.useStyle(w.createStyle()),w.style.fill=null;var S=w.shape;S.x=l,S.y=c,S.width=u,S.height=d,S.r=b,w.dirtyShape()}if(v){var C=w.style;C.fill=h||null,C.fillOpacity=retrieve2(n.fillOpacity,1)}else if(p){x=this._getOrCreateChild(ZRImage),x.onload=function(){_.dirtyStyle()};var T=x.style;T.image=h.image,T.x=l,T.y=c,T.width=u,T.height=d}if(f&&g){var C=w.style;C.lineWidth=f,C.stroke=g,C.strokeOpacity=retrieve2(n.strokeOpacity,1),C.lineDash=n.borderDash,C.lineDashOffset=n.borderDashOffset||0,w.strokeContainThreshold=0,w.hasFill()&&w.hasStroke()&&(C.strokeFirst=!0,C.lineWidth*=2)}var R=(w||x).style;R.shadowBlur=n.shadowBlur||0,R.shadowColor=n.shadowColor||"transparent",R.shadowOffsetX=n.shadowOffsetX||0,R.shadowOffsetY=n.shadowOffsetY||0,R.opacity=retrieve3(n.opacity,a.opacity,1)},o.makeFont=function(n){var a="";return hasSeparateFont(n)&&(a=[n.fontStyle,n.fontWeight,parseFontSize(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),a&&trim$1(a)||n.textFont||n.font},o}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(s){return typeof s=="string"&&(s.indexOf("px")!==-1||s.indexOf("rem")!==-1||s.indexOf("em")!==-1)?s:isNaN(+s)?DEFAULT_FONT_SIZE+"px":s+"px"}function setSeparateFont(s,o){for(var n=0;n<FONT_PARTS.length;n++){var a=FONT_PARTS[n],l=o[a];l!=null&&(s[a]=l)}}function hasSeparateFont(s){return s.fontSize!=null||s.fontFamily||s.fontWeight}function normalizeTextStyle(s){return normalizeStyle(s),each$f(s.rich,normalizeStyle),s}function normalizeStyle(s){if(s){s.font=ZRText.makeFont(s);var o=s.align;o==="middle"&&(o="center"),s.align=o==null||VALID_TEXT_ALIGN[o]?o:"left";var n=s.verticalAlign;n==="center"&&(n="middle"),s.verticalAlign=n==null||VALID_TEXT_VERTICAL_ALIGN[n]?n:"top";var a=s.padding;a&&(s.padding=normalizeCssArray$1(s.padding))}}function getStroke(s,o){return s==null||o<=0||s==="transparent"||s==="none"?null:s.image||s.colorStops?"#000":s}function getFill(s){return s==null||s==="none"?null:s.image||s.colorStops?"#000":s}function getTextXForPadding(s,o,n){return o==="right"?s-n[1]:o==="center"?s+n[3]/2-n[1]/2:s+n[3]}function getStyleText(s){var o=s.text;return o!=null&&(o+=""),o}function needDrawBackground(s){return!!(s.backgroundColor||s.lineHeight||s.borderWidth&&s.borderColor)}var getECData=makeInner(),setCommonECData=function(s,o,n,a){if(a){var l=getECData(a);l.dataIndex=n,l.dataType=o,l.seriesIndex=s,l.ssrType="chart",a.type==="group"&&a.traverse(function(c){var u=getECData(c);u.seriesIndex=s,u.dataIndex=n,u.dataType=o,u.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(s){return s!=null&&s!=="none"}function doChangeHoverState(s,o,n){s.onHoverStateChange&&(s.hoverState||0)!==n&&s.onHoverStateChange(o),s.hoverState=n}function singleEnterEmphasis(s){doChangeHoverState(s,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(s){s.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(s,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(s){doChangeHoverState(s,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(s){s.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(s,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(s){s.selected=!0}function singleLeaveSelect(s){s.selected=!1}function updateElementState(s,o,n){o(s,n)}function traverseUpdateState(s,o,n){updateElementState(s,o,n),s.isGroup&&s.traverse(function(a){updateElementState(a,o,n)})}function setStatesFlag(s,o){switch(o){case"emphasis":s.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":s.hoverState=HOVER_STATE_NORMAL;break;case"blur":s.hoverState=HOVER_STATE_BLUR;break;case"select":s.selected=!0}}function getFromStateStyle(s,o,n,a){for(var l=s.style,c={},u=0;u<o.length;u++){var d=o[u],h=l[d];c[d]=h??(a&&a[d])}for(var u=0;u<s.animators.length;u++){var f=s.animators[u];f.__fromStateTransition&&f.__fromStateTransition.indexOf(n)<0&&f.targetName==="style"&&f.saveTo(c,o)}return c}function createEmphasisDefaultState(s,o,n,a){var l=n&&indexOf(n,"select")>=0,c=!1;if(s instanceof Path){var u=getSavedStates(s),d=l&&u.selectFill||u.normalFill,h=l&&u.selectStroke||u.normalStroke;if(hasFillOrStroke(d)||hasFillOrStroke(h)){a=a||{};var f=a.style||{};f.fill==="inherit"?(c=!0,a=extend({},a),f=extend({},f),f.fill=d):!hasFillOrStroke(f.fill)&&hasFillOrStroke(d)?(c=!0,a=extend({},a),f=extend({},f),f.fill=liftColor(d)):!hasFillOrStroke(f.stroke)&&hasFillOrStroke(h)&&(c||(a=extend({},a),f=extend({},f)),f.stroke=liftColor(h)),a.style=f}}if(a&&a.z2==null){c||(a=extend({},a));var g=s.z2EmphasisLift;a.z2=s.z2+(g??Z2_EMPHASIS_LIFT)}return a}function createSelectDefaultState(s,o,n){if(n&&n.z2==null){n=extend({},n);var a=s.z2SelectLift;n.z2=s.z2+(a??Z2_SELECT_LIFT)}return n}function createBlurDefaultState(s,o,n){var a=indexOf(s.currentStates,o)>=0,l=s.style.opacity,c=a?null:getFromStateStyle(s,["opacity"],o,{opacity:1});n=n||{};var u=n.style||{};return u.opacity==null&&(n=extend({},n),u=extend({opacity:a?l:c.opacity*.1},u),n.style=u),n}function elementStateProxy(s,o){var n=this.states[s];if(this.style){if(s==="emphasis")return createEmphasisDefaultState(this,s,o,n);if(s==="blur")return createBlurDefaultState(this,s,n);if(s==="select")return createSelectDefaultState(this,s,n)}return n}function setDefaultStateProxy(s){s.stateProxy=elementStateProxy;var o=s.getTextContent(),n=s.getTextGuideLine();o&&(o.stateProxy=elementStateProxy),n&&(n.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(s,o){!shouldSilent(s,o)&&!s.__highByOuter&&traverseUpdateState(s,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(s,o){!shouldSilent(s,o)&&!s.__highByOuter&&traverseUpdateState(s,singleLeaveEmphasis)}function enterEmphasis(s,o){s.__highByOuter|=1<<(o||0),traverseUpdateState(s,singleEnterEmphasis)}function leaveEmphasis(s,o){!(s.__highByOuter&=~(1<<(o||0)))&&traverseUpdateState(s,singleLeaveEmphasis)}function enterBlur(s){traverseUpdateState(s,singleEnterBlur)}function leaveBlur(s){traverseUpdateState(s,singleLeaveBlur)}function enterSelect(s){traverseUpdateState(s,singleEnterSelect)}function leaveSelect(s){traverseUpdateState(s,singleLeaveSelect)}function shouldSilent(s,o){return s.__highDownSilentOnTouch&&o.zrByTouch}function allLeaveBlur(s){var o=s.getModel(),n=[],a=[];o.eachComponent(function(l,c){var u=getComponentStates(c),d=l==="series",h=d?s.getViewOfSeriesModel(c):s.getViewOfComponentModel(c);!d&&a.push(h),u.isBlured&&(h.group.traverse(function(f){singleLeaveBlur(f)}),d&&n.push(c)),u.isBlured=!1}),each$f(a,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(n,!1,o)})}function blurSeries(s,o,n,a){var l=a.getModel();n=n||"coordinateSystem";function c(f,g){for(var p=0;p<g.length;p++){var v=f.getItemGraphicEl(g[p]);v&&leaveBlur(v)}}if(s!=null&&!(!o||o==="none")){var u=l.getSeriesByIndex(s),d=u.coordinateSystem;d&&d.master&&(d=d.master);var h=[];l.eachSeries(function(f){var g=u===f,p=f.coordinateSystem;p&&p.master&&(p=p.master);var v=p&&d?p===d:g;if(!(n==="series"&&!g||n==="coordinateSystem"&&!v||o==="series"&&g)){var b=a.getViewOfSeriesModel(f);if(b.group.traverse(function(x){x.__highByOuter&&g&&o==="self"||singleEnterBlur(x)}),isArrayLike(o))c(f.getData(),o);else if(isObject$3(o))for(var _=keys(o),w=0;w<_.length;w++)c(f.getData(_[w]),o[_[w]]);h.push(f),getComponentStates(f).isBlured=!0}}),l.eachComponent(function(f,g){if(f!=="series"){var p=a.getViewOfComponentModel(g);p&&p.toggleBlurSeries&&p.toggleBlurSeries(h,!0,l)}})}}function blurComponent(s,o,n){if(!(s==null||o==null)){var a=n.getModel().getComponent(s,o);if(a){getComponentStates(a).isBlured=!0;var l=n.getViewOfComponentModel(a);!l||!l.focusBlurEnabled||l.group.traverse(function(c){singleEnterBlur(c)})}}}function blurSeriesFromHighlightPayload(s,o,n){var a=s.seriesIndex,l=s.getData(o.dataType);if(!l){process.env.NODE_ENV!=="production"&&error("Unknown dataType "+o.dataType);return}var c=queryDataIndex(l,o);c=(isArray$1(c)?c[0]:c)||0;var u=l.getItemGraphicEl(c);if(!u)for(var d=l.count(),h=0;!u&&h<d;)u=l.getItemGraphicEl(h++);if(u){var f=getECData(u);blurSeries(a,f.focus,f.blurScope,n)}else{var g=s.get(["emphasis","focus"]),p=s.get(["emphasis","blurScope"]);g!=null&&blurSeries(a,g,p,n)}}function findComponentHighDownDispatchers(s,o,n,a){var l={focusSelf:!1,dispatchers:null};if(s==null||s==="series"||o==null||n==null)return l;var c=a.getModel().getComponent(s,o);if(!c)return l;var u=a.getViewOfComponentModel(c);if(!u||!u.findHighDownDispatchers)return l;for(var d=u.findHighDownDispatchers(n),h,f=0;f<d.length;f++)if(process.env.NODE_ENV!=="production"&&!isHighDownDispatcher(d[f])&&error("param should be highDownDispatcher"),getECData(d[f]).focus==="self"){h=!0;break}return{focusSelf:h,dispatchers:d}}function handleGlobalMouseOverForHighDown(s,o,n){process.env.NODE_ENV!=="production"&&!isHighDownDispatcher(s)&&error("param should be highDownDispatcher");var a=getECData(s),l=findComponentHighDownDispatchers(a.componentMainType,a.componentIndex,a.componentHighDownName,n),c=l.dispatchers,u=l.focusSelf;c?(u&&blurComponent(a.componentMainType,a.componentIndex,n),each$f(c,function(d){return enterEmphasisWhenMouseOver(d,o)})):(blurSeries(a.seriesIndex,a.focus,a.blurScope,n),a.focus==="self"&&blurComponent(a.componentMainType,a.componentIndex,n),enterEmphasisWhenMouseOver(s,o))}function handleGlobalMouseOutForHighDown(s,o,n){process.env.NODE_ENV!=="production"&&!isHighDownDispatcher(s)&&error("param should be highDownDispatcher"),allLeaveBlur(n);var a=getECData(s),l=findComponentHighDownDispatchers(a.componentMainType,a.componentIndex,a.componentHighDownName,n).dispatchers;l?each$f(l,function(c){return leaveEmphasisWhenMouseOut(c,o)}):leaveEmphasisWhenMouseOut(s,o)}function toggleSelectionFromPayload(s,o,n){if(isSelectChangePayload(o)){var a=o.dataType,l=s.getData(a),c=queryDataIndex(l,o);isArray$1(c)||(c=[c]),s[o.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":o.type===SELECT_ACTION_TYPE?"select":"unselect"](c,a)}}function updateSeriesElementSelection(s){var o=s.getAllData();each$f(o,function(n){var a=n.data,l=n.type;a.eachItemGraphicEl(function(c,u){s.isSelected(u,l)?enterSelect(c):leaveSelect(c)})})}function getAllSelectedIndices(s){var o=[];return s.eachSeries(function(n){var a=n.getAllData();each$f(a,function(l){l.data;var c=l.type,u=n.getSelectedDataIndices();if(u.length>0){var d={dataIndex:u,seriesIndex:n.seriesIndex};c!=null&&(d.dataType=c),o.push(d)}})}),o}function enableHoverEmphasis(s,o,n){setAsHighDownDispatcher(s,!0),traverseUpdateState(s,setDefaultStateProxy),enableHoverFocus(s,o,n)}function disableHoverEmphasis(s){setAsHighDownDispatcher(s,!1)}function toggleHoverEmphasis(s,o,n,a){a?disableHoverEmphasis(s):enableHoverEmphasis(s,o,n)}function enableHoverFocus(s,o,n){var a=getECData(s);o!=null?(a.focus=o,a.blurScope=n):a.focus&&(a.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(s,o,n,a){n=n||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var c=OTHER_STATES[l],u=o.getModel([c,n]),d=s.ensureState(c);d.style=a?a(u):u[defaultStyleGetterMap[n]]()}}function setAsHighDownDispatcher(s,o){var n=o===!1,a=s;s.highDownSilentOnTouch&&(a.__highDownSilentOnTouch=s.highDownSilentOnTouch),(!n||a.__highDownDispatcher)&&(a.__highByOuter=a.__highByOuter||0,a.__highDownDispatcher=!n)}function isHighDownDispatcher(s){return!!(s&&s.__highDownDispatcher)}function enableComponentHighDownFeatures(s,o,n){var a=getECData(s);a.componentMainType=o.mainType,a.componentIndex=o.componentIndex,a.componentHighDownName=n}function getHighlightDigit(s){var o=_highlightKeyMap[s];return o==null&&_highlightNextDigit<=32&&(o=_highlightKeyMap[s]=_highlightNextDigit++),o}function isSelectChangePayload(s){var o=s.type;return o===SELECT_ACTION_TYPE||o===UNSELECT_ACTION_TYPE||o===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(s){var o=s.type;return o===HIGHLIGHT_ACTION_TYPE||o===DOWNPLAY_ACTION_TYPE}function savePathStates(s){var o=getSavedStates(s);o.normalFill=s.style.fill,o.normalStroke=s.style.stroke;var n=s.states.select||{};o.selectFill=n.style&&n.style.fill||null,o.selectStroke=n.style&&n.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(s,o){if(o){var n=s.data,a=s.len(),l,c,u,d,h,f,g=CMD$2.M,p=CMD$2.C,v=CMD$2.L,b=CMD$2.R,_=CMD$2.A,w=CMD$2.Q;for(u=0,d=0;u<a;){switch(l=n[u++],d=u,c=0,l){case g:c=1;break;case v:c=1;break;case p:c=3;break;case w:c=2;break;case _:var x=o[4],S=o[5],C=mathSqrt$2(o[0]*o[0]+o[1]*o[1]),T=mathSqrt$2(o[2]*o[2]+o[3]*o[3]),R=mathAtan2(-o[1]/T,o[0]/C);n[u]*=C,n[u++]+=x,n[u]*=T,n[u++]+=S,n[u++]*=C,n[u++]*=T,n[u++]+=R,n[u++]+=R,u+=2,d=u;break;case b:f[0]=n[u++],f[1]=n[u++],applyTransform$1(f,f,o),n[d++]=f[0],n[d++]=f[1],f[0]+=n[u++],f[1]+=n[u++],applyTransform$1(f,f,o),n[d++]=f[0],n[d++]=f[1]}for(h=0;h<c;h++){var A=points$2[h];A[0]=n[u++],A[1]=n[u++],applyTransform$1(A,A,o),n[d++]=A[0],n[d++]=A[1]}}s.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function vRatio(s,o){return(s[0]*o[0]+s[1]*o[1])/(vMag(s)*vMag(o))}function vAngle(s,o){return(s[0]*o[1]<s[1]*o[0]?-1:1)*Math.acos(vRatio(s,o))}function processArc(s,o,n,a,l,c,u,d,h,f,g){var p=h*(PI$7/180),v=mathCos$2(p)*(s-n)/2+mathSin$2(p)*(o-a)/2,b=-1*mathSin$2(p)*(s-n)/2+mathCos$2(p)*(o-a)/2,_=v*v/(u*u)+b*b/(d*d);_>1&&(u*=mathSqrt$1(_),d*=mathSqrt$1(_));var w=(l===c?-1:1)*mathSqrt$1((u*u*(d*d)-u*u*(b*b)-d*d*(v*v))/(u*u*(b*b)+d*d*(v*v)))||0,x=w*u*b/d,S=w*-d*v/u,C=(s+n)/2+mathCos$2(p)*x-mathSin$2(p)*S,T=(o+a)/2+mathSin$2(p)*x+mathCos$2(p)*S,R=vAngle([1,0],[(v-x)/u,(b-S)/d]),A=[(v-x)/u,(b-S)/d],M=[(-1*v-x)/u,(-1*b-S)/d],D=vAngle(A,M);if(vRatio(A,M)<=-1&&(D=PI$7),vRatio(A,M)>=1&&(D=0),D<0){var O=Math.round(D/PI$7*1e6)/1e6;D=PI$7*2+O%2*PI$7}g.addData(f,C,T,u,d,R,D,p,c)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(s){var o=new PathProxy;if(!s)return o;var n=0,a=0,l=n,c=a,u,d=PathProxy.CMD,h=s.match(commandReg);if(!h)return o;for(var f=0;f<h.length;f++){for(var g=h[f],p=g.charAt(0),v=void 0,b=g.match(numberReg$1)||[],_=b.length,w=0;w<_;w++)b[w]=parseFloat(b[w]);for(var x=0;x<_;){var S=void 0,C=void 0,T=void 0,R=void 0,A=void 0,M=void 0,D=void 0,O=n,H=a,j=void 0,q=void 0;switch(p){case"l":n+=b[x++],a+=b[x++],v=d.L,o.addData(v,n,a);break;case"L":n=b[x++],a=b[x++],v=d.L,o.addData(v,n,a);break;case"m":n+=b[x++],a+=b[x++],v=d.M,o.addData(v,n,a),l=n,c=a,p="l";break;case"M":n=b[x++],a=b[x++],v=d.M,o.addData(v,n,a),l=n,c=a,p="L";break;case"h":n+=b[x++],v=d.L,o.addData(v,n,a);break;case"H":n=b[x++],v=d.L,o.addData(v,n,a);break;case"v":a+=b[x++],v=d.L,o.addData(v,n,a);break;case"V":a=b[x++],v=d.L,o.addData(v,n,a);break;case"C":v=d.C,o.addData(v,b[x++],b[x++],b[x++],b[x++],b[x++],b[x++]),n=b[x-2],a=b[x-1];break;case"c":v=d.C,o.addData(v,b[x++]+n,b[x++]+a,b[x++]+n,b[x++]+a,b[x++]+n,b[x++]+a),n+=b[x-2],a+=b[x-1];break;case"S":S=n,C=a,j=o.len(),q=o.data,u===d.C&&(S+=n-q[j-4],C+=a-q[j-3]),v=d.C,O=b[x++],H=b[x++],n=b[x++],a=b[x++],o.addData(v,S,C,O,H,n,a);break;case"s":S=n,C=a,j=o.len(),q=o.data,u===d.C&&(S+=n-q[j-4],C+=a-q[j-3]),v=d.C,O=n+b[x++],H=a+b[x++],n+=b[x++],a+=b[x++],o.addData(v,S,C,O,H,n,a);break;case"Q":O=b[x++],H=b[x++],n=b[x++],a=b[x++],v=d.Q,o.addData(v,O,H,n,a);break;case"q":O=b[x++]+n,H=b[x++]+a,n+=b[x++],a+=b[x++],v=d.Q,o.addData(v,O,H,n,a);break;case"T":S=n,C=a,j=o.len(),q=o.data,u===d.Q&&(S+=n-q[j-4],C+=a-q[j-3]),n=b[x++],a=b[x++],v=d.Q,o.addData(v,S,C,n,a);break;case"t":S=n,C=a,j=o.len(),q=o.data,u===d.Q&&(S+=n-q[j-4],C+=a-q[j-3]),n+=b[x++],a+=b[x++],v=d.Q,o.addData(v,S,C,n,a);break;case"A":T=b[x++],R=b[x++],A=b[x++],M=b[x++],D=b[x++],O=n,H=a,n=b[x++],a=b[x++],v=d.A,processArc(O,H,n,a,M,D,T,R,A,v,o);break;case"a":T=b[x++],R=b[x++],A=b[x++],M=b[x++],D=b[x++],O=n,H=a,n+=b[x++],a+=b[x++],v=d.A,processArc(O,H,n,a,M,D,T,R,A,v,o);break}}(p==="z"||p==="Z")&&(v=d.Z,o.addData(v),n=l,a=c),u=v}return o.toStatic(),o}var SVGPath=function(s){__extends(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.applyTransform=function(n){},o}(Path);function isPathProxy(s){return s.setData!=null}function createPathOptions(s,o){var n=createPathProxyFromString(s),a=extend({},o);return a.buildPath=function(l){if(isPathProxy(l)){l.setData(n.data);var c=l.getContext();c&&l.rebuildPath(c,1)}else{var c=l;n.rebuildPath(c,1)}},a.applyTransform=function(l){transformPath(n,l),this.dirtyShape()},a}function createFromString(s,o){return new SVGPath(createPathOptions(s,o))}function extendFromString(s,o){var n=createPathOptions(s,o),a=function(l){__extends(c,l);function c(u){var d=l.call(this,u)||this;return d.applyTransform=n.applyTransform,d.buildPath=n.buildPath,d}return c}(SVGPath);return a}function mergePath$1(s,o){for(var n=[],a=s.length,l=0;l<a;l++){var c=s[l];n.push(c.getUpdatedPathProxy(!0))}var u=new Path(o);return u.createPathProxy(),u.buildPath=function(d){if(isPathProxy(d)){d.appendPath(n);var h=d.getContext();h&&d.rebuildPath(h,1)}},u}function clonePath(s,o){o=o||{};var n=new Path;return s.shape&&n.setShape(s.shape),n.setStyle(s.style),o.bakeTransform?transformPath(n.path,s.getComputedTransform()):o.toLocal?n.setLocalTransform(s.getComputedTransform()):n.copyTransform(s),n.buildPath=s.buildPath,n.applyTransform=n.applyTransform,n.z=s.z,n.z2=s.z2,n.zlevel=s.zlevel,n}var CircleShape=function(){function s(){this.cx=0,this.cy=0,this.r=0}return s}(),Circle=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new CircleShape},o.prototype.buildPath=function(n,a){n.moveTo(a.cx+a.r,a.cy),n.arc(a.cx,a.cy,a.r,0,Math.PI*2)},o}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function s(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return s}(),Ellipse=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new EllipseShape},o.prototype.buildPath=function(n,a){var l=.5522848,c=a.cx,u=a.cy,d=a.rx,h=a.ry,f=d*l,g=h*l;n.moveTo(c-d,u),n.bezierCurveTo(c-d,u-g,c-f,u-h,c,u-h),n.bezierCurveTo(c+f,u-h,c+d,u-g,c+d,u),n.bezierCurveTo(c+d,u+g,c+f,u+h,c,u+h),n.bezierCurveTo(c-f,u+h,c-d,u+g,c-d,u),n.closePath()},o}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(s,o,n,a,l,c,u,d){var h=n-s,f=a-o,g=u-l,p=d-c,v=p*h-g*f;if(!(v*v<e))return v=(g*(o-c)-p*(s-l))/v,[s+v*h,o+v*f]}function computeCornerTangents(s,o,n,a,l,c,u){var d=s-n,h=o-a,f=(u?c:-c)/mathSqrt(d*d+h*h),g=f*h,p=-f*d,v=s+g,b=o+p,_=n+g,w=a+p,x=(v+_)/2,S=(b+w)/2,C=_-v,T=w-b,R=C*C+T*T,A=l-c,M=v*w-_*b,D=(T<0?-1:1)*mathSqrt(mathMax$7(0,A*A*R-M*M)),O=(M*T-C*D)/R,H=(-M*C-T*D)/R,j=(M*T+C*D)/R,q=(-M*C+T*D)/R,Y=O-x,ee=H-S,te=j-x,re=q-S;return Y*Y+ee*ee>te*te+re*re&&(O=j,H=q),{cx:O,cy:H,x0:-g,y0:-p,x1:O*(l/A-1),y1:H*(l/A-1)}}function normalizeCornerRadius(s){var o;if(isArray$1(s)){var n=s.length;if(!n)return s;n===1?o=[s[0],s[0],0,0]:n===2?o=[s[0],s[0],s[1],s[1]]:n===3?o=s.concat(s[2]):o=s}else o=[s,s,s,s];return o}function buildPath$1(s,o){var n,a=mathMax$7(o.r,0),l=mathMax$7(o.r0||0,0),c=a>0,u=l>0;if(!(!c&&!u)){if(c||(a=l,l=0),l>a){var d=a;a=l,l=d}var h=o.startAngle,f=o.endAngle;if(!(isNaN(h)||isNaN(f))){var g=o.cx,p=o.cy,v=!!o.clockwise,b=mathAbs$1(f-h),_=b>PI2$3&&b%PI2$3;if(_>e&&(b=_),!(a>e))s.moveTo(g,p);else if(b>PI2$3-e)s.moveTo(g+a*mathCos$1(h),p+a*mathSin$1(h)),s.arc(g,p,a,h,f,!v),l>e&&(s.moveTo(g+l*mathCos$1(f),p+l*mathSin$1(f)),s.arc(g,p,l,f,h,v));else{var w=void 0,x=void 0,S=void 0,C=void 0,T=void 0,R=void 0,A=void 0,M=void 0,D=void 0,O=void 0,H=void 0,j=void 0,q=void 0,Y=void 0,ee=void 0,te=void 0,re=a*mathCos$1(h),ae=a*mathSin$1(h),ue=l*mathCos$1(f),ce=l*mathSin$1(f),le=b>e;if(le){var ie=o.cornerRadius;ie&&(n=normalizeCornerRadius(ie),w=n[0],x=n[1],S=n[2],C=n[3]);var de=mathAbs$1(a-l)/2;if(T=mathMin$7(de,S),R=mathMin$7(de,C),A=mathMin$7(de,w),M=mathMin$7(de,x),H=D=mathMax$7(T,R),j=O=mathMax$7(A,M),(D>e||O>e)&&(q=a*mathCos$1(f),Y=a*mathSin$1(f),ee=l*mathCos$1(h),te=l*mathSin$1(h),b<PI$6)){var ge=intersect(re,ae,ee,te,q,Y,ue,ce);if(ge){var pe=re-ge[0],be=ae-ge[1],Se=q-ge[0],Le=Y-ge[1],De=1/mathSin$1(mathACos((pe*Se+be*Le)/(mathSqrt(pe*pe+be*be)*mathSqrt(Se*Se+Le*Le)))/2),ke=mathSqrt(ge[0]*ge[0]+ge[1]*ge[1]);H=mathMin$7(D,(a-ke)/(De+1)),j=mathMin$7(O,(l-ke)/(De-1))}}}if(!le)s.moveTo(g+re,p+ae);else if(H>e){var Te=mathMin$7(S,H),Ae=mathMin$7(C,H),Ee=computeCornerTangents(ee,te,re,ae,a,Te,v),we=computeCornerTangents(q,Y,ue,ce,a,Ae,v);s.moveTo(g+Ee.cx+Ee.x0,p+Ee.cy+Ee.y0),H<D&&Te===Ae?s.arc(g+Ee.cx,p+Ee.cy,H,mathATan2(Ee.y0,Ee.x0),mathATan2(we.y0,we.x0),!v):(Te>0&&s.arc(g+Ee.cx,p+Ee.cy,Te,mathATan2(Ee.y0,Ee.x0),mathATan2(Ee.y1,Ee.x1),!v),s.arc(g,p,a,mathATan2(Ee.cy+Ee.y1,Ee.cx+Ee.x1),mathATan2(we.cy+we.y1,we.cx+we.x1),!v),Ae>0&&s.arc(g+we.cx,p+we.cy,Ae,mathATan2(we.y1,we.x1),mathATan2(we.y0,we.x0),!v))}else s.moveTo(g+re,p+ae),s.arc(g,p,a,h,f,!v);if(!(l>e)||!le)s.lineTo(g+ue,p+ce);else if(j>e){var Te=mathMin$7(w,j),Ae=mathMin$7(x,j),Ee=computeCornerTangents(ue,ce,q,Y,l,-Ae,v),we=computeCornerTangents(re,ae,ee,te,l,-Te,v);s.lineTo(g+Ee.cx+Ee.x0,p+Ee.cy+Ee.y0),j<O&&Te===Ae?s.arc(g+Ee.cx,p+Ee.cy,j,mathATan2(Ee.y0,Ee.x0),mathATan2(we.y0,we.x0),!v):(Ae>0&&s.arc(g+Ee.cx,p+Ee.cy,Ae,mathATan2(Ee.y0,Ee.x0),mathATan2(Ee.y1,Ee.x1),!v),s.arc(g,p,l,mathATan2(Ee.cy+Ee.y1,Ee.cx+Ee.x1),mathATan2(we.cy+we.y1,we.cx+we.x1),v),Te>0&&s.arc(g+we.cx,p+we.cy,Te,mathATan2(we.y1,we.x1),mathATan2(we.y0,we.x0),!v))}else s.lineTo(g+ue,p+ce),s.arc(g,p,l,f,h,v)}s.closePath()}}}var SectorShape=function(){function s(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return s}(),Sector=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new SectorShape},o.prototype.buildPath=function(n,a){buildPath$1(n,a)},o.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},o}(Path);Sector.prototype.type="sector";var RingShape=function(){function s(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return s}(),Ring=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new RingShape},o.prototype.buildPath=function(n,a){var l=a.cx,c=a.cy,u=Math.PI*2;n.moveTo(l+a.r,c),n.arc(l,c,a.r,0,u,!1),n.moveTo(l+a.r0,c),n.arc(l,c,a.r0,0,u,!0)},o}(Path);Ring.prototype.type="ring";function smoothBezier(s,o,n,a){var l=[],c=[],u=[],d=[],h,f,g,p;if(a){g=[1/0,1/0],p=[-1/0,-1/0];for(var v=0,b=s.length;v<b;v++)min$1(g,g,s[v]),max$1(p,p,s[v]);min$1(g,g,a[0]),max$1(p,p,a[1])}for(var v=0,b=s.length;v<b;v++){var _=s[v];if(n)h=s[v?v-1:b-1],f=s[(v+1)%b];else if(v===0||v===b-1){l.push(clone$3(s[v]));continue}else h=s[v-1],f=s[v+1];sub(c,f,h),scale$2(c,c,o);var w=distance(_,h),x=distance(_,f),S=w+x;S!==0&&(w/=S,x/=S),scale$2(u,c,-w),scale$2(d,c,x);var C=add([],_,u),T=add([],_,d);a&&(max$1(C,C,g),min$1(C,C,p),max$1(T,T,g),min$1(T,T,p)),l.push(C),l.push(T)}return n&&l.push(l.shift()),l}function buildPath(s,o,n){var a=o.smooth,l=o.points;if(l&&l.length>=2){if(a){var c=smoothBezier(l,a,n,o.smoothConstraint);s.moveTo(l[0][0],l[0][1]);for(var u=l.length,d=0;d<(n?u:u-1);d++){var h=c[d*2],f=c[d*2+1],g=l[(d+1)%u];s.bezierCurveTo(h[0],h[1],f[0],f[1],g[0],g[1])}}else{s.moveTo(l[0][0],l[0][1]);for(var d=1,p=l.length;d<p;d++)s.lineTo(l[d][0],l[d][1])}n&&s.closePath()}}var PolygonShape=function(){function s(){this.points=null,this.smooth=0,this.smoothConstraint=null}return s}(),Polygon=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new PolygonShape},o.prototype.buildPath=function(n,a){buildPath(n,a,!0)},o}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function s(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return s}(),Polyline$1=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new PolylineShape},o.prototype.buildPath=function(n,a){buildPath(n,a,!1)},o}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function s(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return s}(),Line$1=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new LineShape},o.prototype.buildPath=function(n,a){var l,c,u,d;if(this.subPixelOptimize){var h=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,a,this.style);l=h.x1,c=h.y1,u=h.x2,d=h.y2}else l=a.x1,c=a.y1,u=a.x2,d=a.y2;var f=a.percent;f!==0&&(n.moveTo(l,c),f<1&&(u=l*(1-f)+u*f,d=c*(1-f)+d*f),n.lineTo(u,d))},o.prototype.pointAt=function(n){var a=this.shape;return[a.x1*(1-n)+a.x2*n,a.y1*(1-n)+a.y2*n]},o}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function s(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return s}();function someVectorAt(s,o,n){var a=s.cpx2,l=s.cpy2;return a!=null||l!=null?[(n?cubicDerivativeAt:cubicAt)(s.x1,s.cpx1,s.cpx2,s.x2,o),(n?cubicDerivativeAt:cubicAt)(s.y1,s.cpy1,s.cpy2,s.y2,o)]:[(n?quadraticDerivativeAt:quadraticAt$1)(s.x1,s.cpx1,s.x2,o),(n?quadraticDerivativeAt:quadraticAt$1)(s.y1,s.cpy1,s.y2,o)]}var BezierCurve=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new BezierCurveShape},o.prototype.buildPath=function(n,a){var l=a.x1,c=a.y1,u=a.x2,d=a.y2,h=a.cpx1,f=a.cpy1,g=a.cpx2,p=a.cpy2,v=a.percent;v!==0&&(n.moveTo(l,c),g==null||p==null?(v<1&&(quadraticSubdivide(l,h,u,v,out),h=out[1],u=out[2],quadraticSubdivide(c,f,d,v,out),f=out[1],d=out[2]),n.quadraticCurveTo(h,f,u,d)):(v<1&&(cubicSubdivide(l,h,g,u,v,out),h=out[1],g=out[2],u=out[3],cubicSubdivide(c,f,p,d,v,out),f=out[1],p=out[2],d=out[3]),n.bezierCurveTo(h,f,g,p,u,d)))},o.prototype.pointAt=function(n){return someVectorAt(this.shape,n,!1)},o.prototype.tangentAt=function(n){var a=someVectorAt(this.shape,n,!0);return normalize$3(a,a)},o}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function s(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return s}(),Arc=function(s){__extends(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new ArcShape},o.prototype.buildPath=function(n,a){var l=a.cx,c=a.cy,u=Math.max(a.r,0),d=a.startAngle,h=a.endAngle,f=a.clockwise,g=Math.cos(d),p=Math.sin(d);n.moveTo(g*u+l,p*u+c),n.arc(l,c,u,d,h,!f)},o}(Path);Arc.prototype.type="arc";var CompoundPath=function(s){__extends(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="compound",n}return o.prototype._updatePathDirty=function(){for(var n=this.shape.paths,a=this.shapeChanged(),l=0;l<n.length;l++)a=a||n[l].shapeChanged();a&&this.dirtyShape()},o.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],a=this.getGlobalScale(),l=0;l<n.length;l++)n[l].path||n[l].createPathProxy(),n[l].path.setScale(a[0],a[1],n[l].segmentIgnoreThreshold)},o.prototype.buildPath=function(n,a){for(var l=a.paths||[],c=0;c<l.length;c++)l[c].buildPath(n,l[c].shape,!0)},o.prototype.afterBrush=function(){for(var n=this.shape.paths||[],a=0;a<n.length;a++)n[a].pathUpdated()},o.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},o}(Path),Gradient=function(){function s(o){this.colorStops=o||[]}return s.prototype.addColorStop=function(o,n){this.colorStops.push({offset:o,color:n})},s}(),LinearGradient=function(s){__extends(o,s);function o(n,a,l,c,u,d){var h=s.call(this,u)||this;return h.x=n??0,h.y=a??0,h.x2=l??1,h.y2=c??0,h.type="linear",h.global=d||!1,h}return o}(Gradient),RadialGradient=function(s){__extends(o,s);function o(n,a,l,c,u){var d=s.call(this,c)||this;return d.x=n??.5,d.y=a??.5,d.r=l??.5,d.type="radial",d.global=u||!1,d}return o}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function s(o,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var a=0;a<4;a++)this._corners[a]=new Point;for(var a=0;a<2;a++)this._axes[a]=new Point;o&&this.fromBoundingRect(o,n)}return s.prototype.fromBoundingRect=function(o,n){var a=this._corners,l=this._axes,c=o.x,u=o.y,d=c+o.width,h=u+o.height;if(a[0].set(c,u),a[1].set(d,u),a[2].set(d,h),a[3].set(c,h),n)for(var f=0;f<4;f++)a[f].transform(n);Point.sub(l[0],a[1],a[0]),Point.sub(l[1],a[3],a[0]),l[0].normalize(),l[1].normalize();for(var f=0;f<2;f++)this._origin[f]=l[f].dot(a[0])},s.prototype.intersect=function(o,n){var a=!0,l=!n;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,o,minTv,maxTv,l,1)&&(a=!1,l)||!this._intersectCheckOneSide(o,this,minTv,maxTv,l,-1)&&(a=!1,l)||l||Point.copy(n,a?minTv:maxTv),a},s.prototype._intersectCheckOneSide=function(o,n,a,l,c,u){for(var d=!0,h=0;h<2;h++){var f=this._axes[h];if(this._getProjMinMaxOnAxis(h,o._corners,extent),this._getProjMinMaxOnAxis(h,n._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(d=!1,c)return d;var g=Math.abs(extent2[0]-extent[1]),p=Math.abs(extent[0]-extent2[1]);Math.min(g,p)>l.len()&&(g<p?Point.scale(l,f,-g*u):Point.scale(l,f,p*u))}else if(a){var g=Math.abs(extent2[0]-extent[1]),p=Math.abs(extent[0]-extent2[1]);Math.min(g,p)<a.len()&&(g<p?Point.scale(a,f,g*u):Point.scale(a,f,-p*u))}}return d},s.prototype._getProjMinMaxOnAxis=function(o,n,a){for(var l=this._axes[o],c=this._origin,u=n[0].dot(l)+c[o],d=u,h=u,f=1;f<n.length;f++){var g=n[f].dot(l)+c[o];d=Math.min(g,d),h=Math.max(g,h)}a[0]=d,a[1]=h},s}(),m=[],IncrementalDisplayable=function(s){__extends(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return o.prototype.traverse=function(n,a){n.call(a,this)},o.prototype.useStyle=function(){this.style={}},o.prototype.getCursor=function(){return this._cursor},o.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},o.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},o.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},o.prototype.addDisplayable=function(n,a){a?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},o.prototype.addDisplayables=function(n,a){a=a||!1;for(var l=0;l<n.length;l++)this.addDisplayable(n[l],a)},o.prototype.getDisplayables=function(){return this._displayables},o.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},o.prototype.eachPendingDisplayable=function(n){for(var a=this._cursor;a<this._displayables.length;a++)n&&n(this._displayables[a]);for(var a=0;a<this._temporaryDisplayables.length;a++)n&&n(this._temporaryDisplayables[a])},o.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var a=this._displayables[n];a.parent=this,a.update(),a.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var a=this._temporaryDisplayables[n];a.parent=this,a.update(),a.parent=null}},o.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new BoundingRect(1/0,1/0,-1/0,-1/0),a=0;a<this._displayables.length;a++){var l=this._displayables[a],c=l.getBoundingRect().clone();l.needLocalTransform()&&c.applyTransform(l.getLocalTransform(m)),n.union(c)}this._rect=n}return this._rect},o.prototype.contain=function(n,a){var l=this.transformCoordToLocal(n,a),c=this.getBoundingRect();if(c.contain(l[0],l[1]))for(var u=0;u<this._displayables.length;u++){var d=this._displayables[u];if(d.contain(n,a))return!0}return!1},o}(Displayable),transitionStore=makeInner();function getAnimationConfig(s,o,n,a,l){var c;if(o&&o.ecModel){var u=o.ecModel.getUpdatePayload();c=u&&u.animation}var d=o&&o.isAnimationEnabled(),h=s==="update";if(d){var f=void 0,g=void 0,p=void 0;a?(f=retrieve2(a.duration,200),g=retrieve2(a.easing,"cubicOut"),p=0):(f=o.getShallow(h?"animationDurationUpdate":"animationDuration"),g=o.getShallow(h?"animationEasingUpdate":"animationEasing"),p=o.getShallow(h?"animationDelayUpdate":"animationDelay")),c&&(c.duration!=null&&(f=c.duration),c.easing!=null&&(g=c.easing),c.delay!=null&&(p=c.delay)),isFunction$1(p)&&(p=p(n,l)),isFunction$1(f)&&(f=f(n));var v={duration:f||0,delay:p,easing:g};return v}else return null}function animateOrSetProps(s,o,n,a,l,c,u){var d=!1,h;isFunction$1(l)?(u=c,c=l,l=null):isObject$3(l)&&(c=l.cb,u=l.during,d=l.isFrom,h=l.removeOpt,l=l.dataIndex);var f=s==="leave";f||o.stopAnimation("leave");var g=getAnimationConfig(s,a,l,f?h||{}:null,a&&a.getAnimationDelayParams?a.getAnimationDelayParams(o,l):null);if(g&&g.duration>0){var p=g.duration,v=g.delay,b=g.easing,_={duration:p,delay:v||0,easing:b,done:c,force:!!c||!!u,setToFinal:!f,scope:s,during:u};d?o.animateFrom(n,_):o.animateTo(n,_)}else o.stopAnimation(),!d&&o.attr(n),u&&u(1),c&&c()}function updateProps$1(s,o,n,a,l,c){animateOrSetProps("update",s,o,n,a,l,c)}function initProps(s,o,n,a,l,c){animateOrSetProps("enter",s,o,n,a,l,c)}function isElementRemoved(s){if(!s.__zr)return!0;for(var o=0;o<s.animators.length;o++){var n=s.animators[o];if(n.scope==="leave")return!0}return!1}function removeElement(s,o,n,a,l,c){isElementRemoved(s)||animateOrSetProps("leave",s,o,n,a,l,c)}function fadeOutDisplayable(s,o,n,a){s.removeTextContent(),s.removeTextGuideLine(),removeElement(s,{style:{opacity:0}},o,n,a)}function removeElementWithFadeOut(s,o,n){function a(){s.parent&&s.parent.remove(s)}s.isGroup?s.traverse(function(l){l.isGroup||fadeOutDisplayable(l,o,n,a)}):fadeOutDisplayable(s,o,n,a)}function saveOldStyle(s){transitionStore(s).oldStyle=s.style}function getOldStyle(s){return transitionStore(s).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(s){return Path.extend(s)}var extendPathFromString=extendFromString;function extendPath(s,o){return extendPathFromString(s,o)}function registerShape(s,o){_customShapeMap[s]=o}function getShapeClass(s){if(_customShapeMap.hasOwnProperty(s))return _customShapeMap[s]}function makePath(s,o,n,a){var l=createFromString(s,o);return n&&(a==="center"&&(n=centerGraphic(n,l.getBoundingRect())),resizePath(l,n)),l}function makeImage(s,o,n){var a=new ZRImage({style:{image:s,x:o.x,y:o.y,width:o.width,height:o.height},onload:function(l){if(n==="center"){var c={width:l.width,height:l.height};a.setStyle(centerGraphic(o,c))}}});return a}function centerGraphic(s,o){var n=o.width/o.height,a=s.height*n,l;a<=s.width?l=s.height:(a=s.width,l=a/n);var c=s.x+s.width/2,u=s.y+s.height/2;return{x:c-a/2,y:u-l/2,width:a,height:l}}var mergePath=mergePath$1;function resizePath(s,o){if(s.applyTransform){var n=s.getBoundingRect(),a=n.calculateTransform(o);s.applyTransform(a)}}function subPixelOptimizeLine(s,o){return subPixelOptimizeLine$1(s,s,{lineWidth:o}),s}function subPixelOptimizeRect(s){return subPixelOptimizeRect$1(s.shape,s.shape,s.style),s}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(s,o){for(var n=identity([]);s&&s!==o;)mul(n,s.getLocalTransform(),n),s=s.parent;return n}function applyTransform(s,o,n){return o&&!isArrayLike(o)&&(o=Transformable.getLocalTransform(o)),n&&(o=invert([],o)),applyTransform$1([],s,o)}function transformDirection(s,o,n){var a=o[4]===0||o[5]===0||o[0]===0?1:Math.abs(2*o[4]/o[0]),l=o[4]===0||o[5]===0||o[2]===0?1:Math.abs(2*o[4]/o[2]),c=[s==="left"?-a:s==="right"?a:0,s==="top"?-l:s==="bottom"?l:0];return c=applyTransform(c,o,n),Math.abs(c[0])>Math.abs(c[1])?c[0]>0?"right":"left":c[1]>0?"bottom":"top"}function isNotGroup(s){return!s.isGroup}function isPath$1(s){return s.shape!=null}function groupTransition(s,o,n){if(!s||!o)return;function a(u){var d={};return u.traverse(function(h){isNotGroup(h)&&h.anid&&(d[h.anid]=h)}),d}function l(u){var d={x:u.x,y:u.y,rotation:u.rotation};return isPath$1(u)&&(d.shape=extend({},u.shape)),d}var c=a(s);o.traverse(function(u){if(isNotGroup(u)&&u.anid){var d=c[u.anid];if(d){var h=l(u);u.attr(l(d)),updateProps$1(u,h,n,getECData(u).dataIndex)}}})}function clipPointsByRect(s,o){return map$1(s,function(n){var a=n[0];a=mathMax$6(a,o.x),a=mathMin$6(a,o.x+o.width);var l=n[1];return l=mathMax$6(l,o.y),l=mathMin$6(l,o.y+o.height),[a,l]})}function clipRectByRect(s,o){var n=mathMax$6(s.x,o.x),a=mathMin$6(s.x+s.width,o.x+o.width),l=mathMax$6(s.y,o.y),c=mathMin$6(s.y+s.height,o.y+o.height);if(a>=n&&c>=l)return{x:n,y:l,width:a-n,height:c-l}}function createIcon(s,o,n){var a=extend({rectHover:!0},o),l=a.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},s)return s.indexOf("image://")===0?(l.image=s.slice(8),defaults(l,n),new ZRImage(a)):makePath(s.replace("path://",""),a,n,"center")}function linePolygonIntersect(s,o,n,a,l){for(var c=0,u=l[l.length-1];c<l.length;c++){var d=l[c];if(lineLineIntersect$1(s,o,n,a,d[0],d[1],u[0],u[1]))return!0;u=d}}function lineLineIntersect$1(s,o,n,a,l,c,u,d){var h=n-s,f=a-o,g=u-l,p=d-c,v=crossProduct2d$1(g,p,h,f);if(nearZero(v))return!1;var b=s-l,_=o-c,w=crossProduct2d$1(b,_,h,f)/v;if(w<0||w>1)return!1;var x=crossProduct2d$1(b,_,g,p)/v;return!(x<0||x>1)}function crossProduct2d$1(s,o,n,a){return s*a-n*o}function nearZero(s){return s<=1e-6&&s>=-1e-6}function setTooltipConfig(s){var o=s.itemTooltipOption,n=s.componentModel,a=s.itemName,l=isString$2(o)?{formatter:o}:o,c=n.mainType,u=n.componentIndex,d={componentType:c,name:a,$vars:["name"]};d[c+"Index"]=u;var h=s.formatterParamsExtra;h&&each$f(keys(h),function(g){hasOwn(d,g)||(d[g]=h[g],d.$vars.push(g))});var f=getECData(s.el);f.componentMainType=c,f.componentIndex=u,f.tooltipConfig={name:a,option:defaults({content:a,encodeHTMLContent:!0,formatterParams:d},l)}}function traverseElement(s,o){var n;s.isGroup&&(n=o(s)),n||s.traverse(o)}function traverseElements(s,o){if(s)if(isArray$1(s))for(var n=0;n<s.length;n++)traverseElement(s[n],o);else traverseElement(s,o)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(s,o){for(var n=0;n<SPECIAL_STATES.length;n++){var a=SPECIAL_STATES[n],l=o[a],c=s.ensureState(a);c.style=c.style||{},c.style.text=l}var u=s.currentStates.slice();s.clearStates(!0),s.setStyle({text:o.normal}),s.useStates(u,!0)}function getLabelText(s,o,n){var a=s.labelFetcher,l=s.labelDataIndex,c=s.labelDimIndex,u=o.normal,d;a&&(d=a.getFormattedLabel(l,"normal",null,c,u&&u.get("formatter"),n!=null?{interpolatedValue:n}:null)),d==null&&(d=isFunction$1(s.defaultText)?s.defaultText(l,s,n):s.defaultText);for(var h={normal:d},f=0;f<SPECIAL_STATES.length;f++){var g=SPECIAL_STATES[f],p=o[g];h[g]=retrieve2(a?a.getFormattedLabel(l,g,null,c,p&&p.get("formatter")):null,d)}return h}function setLabelStyle(s,o,n,a){n=n||EMPTY_OBJ;for(var l=s instanceof ZRText,c=!1,u=0;u<DISPLAY_STATES.length;u++){var d=o[DISPLAY_STATES[u]];if(d&&d.getShallow("show")){c=!0;break}}var h=l?s:s.getTextContent();if(c){l||(h||(h=new ZRText,s.setTextContent(h)),s.stateProxy&&(h.stateProxy=s.stateProxy));var f=getLabelText(n,o),g=o.normal,p=!!g.getShallow("show"),v=createTextStyle$1(g,a&&a.normal,n,!1,!l);v.text=f.normal,l||s.setTextConfig(createTextConfig(g,n,!1));for(var u=0;u<SPECIAL_STATES.length;u++){var b=SPECIAL_STATES[u],d=o[b];if(d){var _=h.ensureState(b),w=!!retrieve2(d.getShallow("show"),p);if(w!==p&&(_.ignore=!w),_.style=createTextStyle$1(d,a&&a[b],n,!0,!l),_.style.text=f[b],!l){var x=s.ensureState(b);x.textConfig=createTextConfig(d,n,!0)}}}h.silent=!!g.getShallow("silent"),h.style.x!=null&&(v.x=h.style.x),h.style.y!=null&&(v.y=h.style.y),h.ignore=!p,h.useStyle(v),h.dirty(),n.enableTextSetter&&(labelInner(h).setLabelText=function(S){var C=getLabelText(n,o,S);setLabelText(h,C)})}else h&&(h.ignore=!0);s.dirty()}function getLabelStatesModels(s,o){o=o||"label";for(var n={normal:s.getModel(o)},a=0;a<SPECIAL_STATES.length;a++){var l=SPECIAL_STATES[a];n[l]=s.getModel([l,o])}return n}function createTextStyle$1(s,o,n,a,l){var c={};return setTextStyleCommon(c,s,n,a,l),o&&extend(c,o),c}function createTextConfig(s,o,n){o=o||{};var a={},l,c=s.getShallow("rotate"),u=retrieve2(s.getShallow("distance"),n?null:5),d=s.getShallow("offset");return l=s.getShallow("position")||(n?null:"inside"),l==="outside"&&(l=o.defaultOutsidePosition||"top"),l!=null&&(a.position=l),d!=null&&(a.offset=d),c!=null&&(c*=Math.PI/180,a.rotation=c),u!=null&&(a.distance=u),a.outsideFill=s.get("color")==="inherit"?o.inheritColor||null:"auto",a}function setTextStyleCommon(s,o,n,a,l){n=n||EMPTY_OBJ;var c=o.ecModel,u=c&&c.option.textStyle,d=getRichItemNames(o),h;if(d){h={};for(var f in d)if(d.hasOwnProperty(f)){var g=o.getModel(["rich",f]);setTokenTextStyle(h[f]={},g,u,n,a,l,!1,!0)}}h&&(s.rich=h);var p=o.get("overflow");p&&(s.overflow=p);var v=o.get("minMargin");v!=null&&(s.margin=v),setTokenTextStyle(s,o,u,n,a,l,!0,!1)}function getRichItemNames(s){for(var o;s&&s!==s.ecModel;){var n=(s.option||EMPTY_OBJ).rich;if(n){o=o||{};for(var a=keys(n),l=0;l<a.length;l++){var c=a[l];o[c]=1}}s=s.parentModel}return o}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(s,o,n,a,l,c,u,d){n=!l&&n||EMPTY_OBJ;var h=a&&a.inheritColor,f=o.getShallow("color"),g=o.getShallow("textBorderColor"),p=retrieve2(o.getShallow("opacity"),n.opacity);(f==="inherit"||f==="auto")&&(process.env.NODE_ENV!=="production"&&f==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),h?f=h:f=null),(g==="inherit"||g==="auto")&&(process.env.NODE_ENV!=="production"&&g==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),h?g=h:g=null),c||(f=f||n.color,g=g||n.textBorderColor),f!=null&&(s.fill=f),g!=null&&(s.stroke=g);var v=retrieve2(o.getShallow("textBorderWidth"),n.textBorderWidth);v!=null&&(s.lineWidth=v);var b=retrieve2(o.getShallow("textBorderType"),n.textBorderType);b!=null&&(s.lineDash=b);var _=retrieve2(o.getShallow("textBorderDashOffset"),n.textBorderDashOffset);_!=null&&(s.lineDashOffset=_),!l&&p==null&&!d&&(p=a&&a.defaultOpacity),p!=null&&(s.opacity=p),!l&&!c&&s.fill==null&&a.inheritColor&&(s.fill=a.inheritColor);for(var w=0;w<TEXT_PROPS_WITH_GLOBAL.length;w++){var x=TEXT_PROPS_WITH_GLOBAL[w],S=retrieve2(o.getShallow(x),n[x]);S!=null&&(s[x]=S)}for(var w=0;w<TEXT_PROPS_SELF.length;w++){var x=TEXT_PROPS_SELF[w],S=o.getShallow(x);S!=null&&(s[x]=S)}if(s.verticalAlign==null){var C=o.getShallow("baseline");C!=null&&(s.verticalAlign=C)}if(!u||!a.disableBox){for(var w=0;w<TEXT_PROPS_BOX.length;w++){var x=TEXT_PROPS_BOX[w],S=o.getShallow(x);S!=null&&(s[x]=S)}var T=o.getShallow("borderType");T!=null&&(s.borderDash=T),(s.backgroundColor==="auto"||s.backgroundColor==="inherit")&&h&&(process.env.NODE_ENV!=="production"&&s.backgroundColor==="auto"&&deprecateReplaceLog("backgroundColor: 'auto'","backgroundColor: 'inherit'"),s.backgroundColor=h),(s.borderColor==="auto"||s.borderColor==="inherit")&&h&&(process.env.NODE_ENV!=="production"&&s.borderColor==="auto"&&deprecateReplaceLog("borderColor: 'auto'","borderColor: 'inherit'"),s.borderColor=h)}}function getFont(s,o){var n=o&&o.getModel("textStyle");return trim$1([s.fontStyle||n&&n.getShallow("fontStyle")||"",s.fontWeight||n&&n.getShallow("fontWeight")||"",(s.fontSize||n&&n.getShallow("fontSize")||12)+"px",s.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(s,o,n,a){if(s){var l=labelInner(s);l.prevValue=l.value,l.value=n;var c=o.normal;l.valueAnimation=c.get("valueAnimation"),l.valueAnimation&&(l.precision=c.get("precision"),l.defaultInterpolatedText=a,l.statesModels=o)}}function animateLabelValue(s,o,n,a,l){var c=labelInner(s);if(!c.valueAnimation||c.prevValue===c.value)return;var u=c.defaultInterpolatedText,d=retrieve2(c.interpolatedValue,c.prevValue),h=c.value;function f(g){var p=interpolateRawValues(n,c.precision,d,h,g);c.interpolatedValue=g===1?null:p;var v=getLabelText({labelDataIndex:o,labelFetcher:l,defaultText:u?u(p):p+""},c.statesModels,p);setLabelText(s,v)}s.percent=0,(c.prevValue==null?initProps:updateProps$1)(s,{percent:1},a,o,null,f)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function s(){}return s.prototype.getTextColor=function(o){var n=this.ecModel;return this.getShallow("color")||(!o&&n?n.get(PATH_COLOR):null)},s.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},s.prototype.getTextRect=function(o){for(var n={text:o,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},a=0;a<textStyleParams.length;a++)n[textStyleParams[a]]=this.getShallow(textStyleParams[a]);return tmpText.useStyle(n),tmpText.update(),tmpText.getBoundingRect()},s}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function s(){}return s.prototype.getLineStyle=function(o){return getLineStyle(this,o)},s}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function s(){}return s.prototype.getItemStyle=function(o,n){return getItemStyle(this,o,n)},s}(),Model=function(){function s(o,n,a){this.parentModel=n,this.ecModel=a,this.option=o}return s.prototype.init=function(o,n,a){},s.prototype.mergeOption=function(o,n){merge(this.option,o,!0)},s.prototype.get=function(o,n){return o==null?this.option:this._doGet(this.parsePath(o),!n&&this.parentModel)},s.prototype.getShallow=function(o,n){var a=this.option,l=a==null?a:a[o];if(l==null&&!n){var c=this.parentModel;c&&(l=c.getShallow(o))}return l},s.prototype.getModel=function(o,n){var a=o!=null,l=a?this.parsePath(o):null,c=a?this._doGet(l):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new s(c,n,this.ecModel)},s.prototype.isEmpty=function(){return this.option==null},s.prototype.restoreData=function(){},s.prototype.clone=function(){var o=this.constructor;return new o(clone$4(this.option))},s.prototype.parsePath=function(o){return typeof o=="string"?o.split("."):o},s.prototype.resolveParentPath=function(o){return o},s.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},s.prototype._doGet=function(o,n){var a=this.option;if(!o)return a;for(var l=0;l<o.length&&!(o[l]&&(a=a&&typeof a=="object"?a[o[l]]:null,a==null));l++);return a==null&&n&&(a=n._doGet(this.resolveParentPath(o),n.parentModel)),a},s}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(s){return[s||"",base++].join("_")}function enableSubTypeDefaulter(s){var o={};s.registerSubTypeDefaulter=function(n,a){var l=parseClassType(n);o[l.main]=a},s.determineSubType=function(n,a){var l=a.type;if(!l){var c=parseClassType(n).main;s.hasSubTypes(n)&&o[c]&&(l=o[c](a))}return l}}function enableTopologicalTravel(s,o){s.topologicalTravel=function(c,u,d,h){if(!c.length)return;var f=n(u),g=f.graph,p=f.noEntryList,v={};for(each$f(c,function(C){v[C]=!0});p.length;){var b=p.pop(),_=g[b],w=!!v[b];w&&(d.call(h,b,_.originalDeps.slice()),delete v[b]),each$f(_.successor,w?S:x)}each$f(v,function(){var C="";throw process.env.NODE_ENV!=="production"&&(C=makePrintable("Circular dependency may exists: ",v,c,u)),new Error(C)});function x(C){g[C].entryCount--,g[C].entryCount===0&&p.push(C)}function S(C){v[C]=!0,x(C)}};function n(c){var u={},d=[];return each$f(c,function(h){var f=a(u,h),g=f.originalDeps=o(h),p=l(g,c);f.entryCount=p.length,f.entryCount===0&&d.push(h),each$f(p,function(v){indexOf(f.predecessor,v)<0&&f.predecessor.push(v);var b=a(u,v);indexOf(b.successor,v)<0&&b.successor.push(h)})}),{graph:u,noEntryList:d}}function a(c,u){return c[u]||(c[u]={predecessor:[],successor:[]}),c[u]}function l(c,u){var d=[];return each$f(c,function(h){indexOf(u,h)>=0&&d.push(h)}),d}}function inheritDefaultOption(s,o){return merge(merge({},s,!0),o,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var s=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return s.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(s,o){s=s.toUpperCase(),localeModels[s]=new Model(o),localeStorage[s]=o}function createLocaleObject(s){if(isString$2(s)){var o=localeStorage[s.toUpperCase()]||{};return s===LOCALE_ZH||s===LOCALE_EN?clone$4(o):merge(clone$4(o),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(s),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(s){return localeModels[s]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(s,o){return s+="","0000".substr(0,o-s.length)+s}function getPrimaryTimeUnit(s){switch(s){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return s}}function isPrimaryTimeUnit(s){return s===getPrimaryTimeUnit(s)}function getDefaultFormatPrecisionOfInterval(s){switch(s){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(s,o,n,a){var l=parseDate(s),c=l[fullYearGetterName(n)](),u=l[monthGetterName(n)]()+1,d=Math.floor((u-1)/3)+1,h=l[dateGetterName(n)](),f=l["get"+(n?"UTC":"")+"Day"](),g=l[hoursGetterName(n)](),p=(g-1)%12+1,v=l[minutesGetterName(n)](),b=l[secondsGetterName(n)](),_=l[millisecondsGetterName(n)](),w=g>=12?"pm":"am",x=w.toUpperCase(),S=a instanceof Model?a:getLocaleModel(a||SYSTEM_LANG)||getDefaultLocaleModel(),C=S.getModel("time"),T=C.get("month"),R=C.get("monthAbbr"),A=C.get("dayOfWeek"),M=C.get("dayOfWeekAbbr");return(o||"").replace(/{a}/g,w+"").replace(/{A}/g,x+"").replace(/{yyyy}/g,c+"").replace(/{yy}/g,pad(c%100+"",2)).replace(/{Q}/g,d+"").replace(/{MMMM}/g,T[u-1]).replace(/{MMM}/g,R[u-1]).replace(/{MM}/g,pad(u,2)).replace(/{M}/g,u+"").replace(/{dd}/g,pad(h,2)).replace(/{d}/g,h+"").replace(/{eeee}/g,A[f]).replace(/{ee}/g,M[f]).replace(/{e}/g,f+"").replace(/{HH}/g,pad(g,2)).replace(/{H}/g,g+"").replace(/{hh}/g,pad(p+"",2)).replace(/{h}/g,p+"").replace(/{mm}/g,pad(v,2)).replace(/{m}/g,v+"").replace(/{ss}/g,pad(b,2)).replace(/{s}/g,b+"").replace(/{SSS}/g,pad(_,3)).replace(/{S}/g,_+"")}function leveledFormat(s,o,n,a,l){var c=null;if(isString$2(n))c=n;else if(isFunction$1(n))c=n(s.value,o,{level:s.level});else{var u=extend({},defaultLeveledFormatter);if(s.level>0)for(var d=0;d<primaryTimeUnits.length;++d)u[primaryTimeUnits[d]]="{primary|"+u[primaryTimeUnits[d]]+"}";var h=n?n.inherit===!1?n:defaults(n,u):u,f=getUnitFromValue(s.value,l);if(h[f])c=h[f];else if(h.inherit){for(var g=timeUnits.indexOf(f),d=g-1;d>=0;--d)if(h[f]){c=h[f];break}c=c||u.none}if(isArray$1(c)){var p=s.level==null?0:s.level>=0?s.level:c.length+s.level;p=Math.min(p,c.length-1),c=c[p]}}return format$1(new Date(s.value),c,l,a)}function getUnitFromValue(s,o){var n=parseDate(s),a=n[monthGetterName(o)]()+1,l=n[dateGetterName(o)](),c=n[hoursGetterName(o)](),u=n[minutesGetterName(o)](),d=n[secondsGetterName(o)](),h=n[millisecondsGetterName(o)](),f=h===0,g=f&&d===0,p=g&&u===0,v=p&&c===0,b=v&&l===1,_=b&&a===1;return _?"year":b?"month":v?"day":p?"hour":g?"minute":f?"second":"millisecond"}function getUnitValue(s,o,n){var a=isNumber(s)?parseDate(s):s;switch(o=o||getUnitFromValue(s,n),o){case"year":return a[fullYearGetterName(n)]();case"half-year":return a[monthGetterName(n)]()>=6?1:0;case"quarter":return Math.floor((a[monthGetterName(n)]()+1)/4);case"month":return a[monthGetterName(n)]();case"day":return a[dateGetterName(n)]();case"half-day":return a[hoursGetterName(n)]()/24;case"hour":return a[hoursGetterName(n)]();case"minute":return a[minutesGetterName(n)]();case"second":return a[secondsGetterName(n)]();case"millisecond":return a[millisecondsGetterName(n)]()}}function fullYearGetterName(s){return s?"getUTCFullYear":"getFullYear"}function monthGetterName(s){return s?"getUTCMonth":"getMonth"}function dateGetterName(s){return s?"getUTCDate":"getDate"}function hoursGetterName(s){return s?"getUTCHours":"getHours"}function minutesGetterName(s){return s?"getUTCMinutes":"getMinutes"}function secondsGetterName(s){return s?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(s){return s?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(s){return s?"setUTCFullYear":"setFullYear"}function monthSetterName(s){return s?"setUTCMonth":"setMonth"}function dateSetterName(s){return s?"setUTCDate":"setDate"}function hoursSetterName(s){return s?"setUTCHours":"setHours"}function minutesSetterName(s){return s?"setUTCMinutes":"setMinutes"}function secondsSetterName(s){return s?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(s){return s?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(s,o,n,a,l,c,u,d){var h=new ZRText({style:{text:s,font:o,align:n,verticalAlign:a,padding:l,rich:c,overflow:u?"truncate":null,lineHeight:d}});return h.getBoundingRect()}function addCommas(s){if(!isNumeric(s))return isString$2(s)?s:"-";var o=(s+"").split(".");return o[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(o.length>1?"."+o[1]:"")}function toCamelCase(s,o){return s=(s||"").toLowerCase().replace(/-(.)/g,function(n,a){return a.toUpperCase()}),o&&s&&(s=s.charAt(0).toUpperCase()+s.slice(1)),s}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(s,o,n){var a="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(g){return g&&trim$1(g)?g:"-"}function c(g){return!!(g!=null&&!isNaN(g)&&isFinite(g))}var u=o==="time",d=s instanceof Date;if(u||d){var h=u?parseDate(s):s;if(isNaN(+h)){if(d)return"-"}else return format$1(h,a,n)}if(o==="ordinal")return isStringSafe(s)?l(s):isNumber(s)&&c(s)?s+"":"-";var f=numericToNumber(s);return c(f)?addCommas(f):isStringSafe(s)?l(s):typeof s=="boolean"?s+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(s,o){return"{"+s+(o??"")+"}"};function formatTpl(s,o,n){isArray$1(o)||(o=[o]);var a=o.length;if(!a)return"";for(var l=o[0].$vars||[],c=0;c<l.length;c++){var u=TPL_VAR_ALIAS[c];s=s.replace(wrapVar(u),wrapVar(u,0))}for(var d=0;d<a;d++)for(var h=0;h<l.length;h++){var f=o[d][l[h]];s=s.replace(wrapVar(TPL_VAR_ALIAS[h],d),n?encodeHTML(f):f)}return s}function formatTplSimple(s,o,n){return each$f(o,function(a,l){s=s.replace("{"+l+"}",a)}),s}function getTooltipMarker(s,o){var n=isString$2(s)?{color:s,extraCssText:o}:s||{},a=n.color,l=n.type;o=n.extraCssText;var c=n.renderMode||"html";if(!a)return"";if(c==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(a)+";"+(o||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(a)+";"+(o||"")+'"></span>';var u=n.markerId||"markerX";return{renderMode:c,content:"{"+u+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:a}:{width:10,height:10,borderRadius:5,backgroundColor:a}}}function formatTime(s,o,n){process.env.NODE_ENV!=="production"&&deprecateReplaceLog("echarts.format.formatTime","echarts.time.format"),(s==="week"||s==="month"||s==="quarter"||s==="half-year"||s==="year")&&(s=`MM-dd
yyyy`);var a=parseDate(o),l=n?"getUTC":"get",c=a[l+"FullYear"](),u=a[l+"Month"]()+1,d=a[l+"Date"](),h=a[l+"Hours"](),f=a[l+"Minutes"](),g=a[l+"Seconds"](),p=a[l+"Milliseconds"]();return s=s.replace("MM",pad(u,2)).replace("M",u).replace("yyyy",c).replace("yy",pad(c%100+"",2)).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(h,2)).replace("h",h).replace("mm",pad(f,2)).replace("m",f).replace("ss",pad(g,2)).replace("s",g).replace("SSS",pad(p,3)),s}function capitalFirst(s){return s&&s.charAt(0).toUpperCase()+s.substr(1)}function convertToColorString(s,o){return o=o||"transparent",isString$2(s)?s:isObject$3(s)&&s.colorStops&&(s.colorStops[0]||{}).color||o}function windowOpen(s,o){if(o==="_blank"||o==="blank"){var n=window.open();n.opener=null,n.location.href=s}else window.open(s,o)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(s,o,n,a,l){var c=0,u=0;a==null&&(a=1/0),l==null&&(l=1/0);var d=0;o.eachChild(function(h,f){var g=h.getBoundingRect(),p=o.childAt(f+1),v=p&&p.getBoundingRect(),b,_;if(s==="horizontal"){var w=g.width+(v?-v.x+g.x:0);b=c+w,b>a||h.newline?(c=0,b=w,u+=d+n,d=g.height):d=Math.max(d,g.height)}else{var x=g.height+(v?-v.y+g.y:0);_=u+x,_>l||h.newline?(c+=d+n,u=0,_=x,d=g.width):d=Math.max(d,g.width)}h.newline||(h.x=c,h.y=u,h.markRedraw(),s==="horizontal"?c=b+n:u=_+n)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(s,o,n){var a=o.width,l=o.height,c=parsePercent(s.left,a),u=parsePercent(s.top,l),d=parsePercent(s.right,a),h=parsePercent(s.bottom,l);return(isNaN(c)||isNaN(parseFloat(s.left)))&&(c=0),(isNaN(d)||isNaN(parseFloat(s.right)))&&(d=a),(isNaN(u)||isNaN(parseFloat(s.top)))&&(u=0),(isNaN(h)||isNaN(parseFloat(s.bottom)))&&(h=l),n=normalizeCssArray(n||0),{width:Math.max(d-c-n[1]-n[3],0),height:Math.max(h-u-n[0]-n[2],0)}}function getLayoutRect(s,o,n){n=normalizeCssArray(n||0);var a=o.width,l=o.height,c=parsePercent(s.left,a),u=parsePercent(s.top,l),d=parsePercent(s.right,a),h=parsePercent(s.bottom,l),f=parsePercent(s.width,a),g=parsePercent(s.height,l),p=n[2]+n[0],v=n[1]+n[3],b=s.aspect;switch(isNaN(f)&&(f=a-d-v-c),isNaN(g)&&(g=l-h-p-u),b!=null&&(isNaN(f)&&isNaN(g)&&(b>a/l?f=a*.8:g=l*.8),isNaN(f)&&(f=b*g),isNaN(g)&&(g=f/b)),isNaN(c)&&(c=a-d-f-v),isNaN(u)&&(u=l-h-g-p),s.left||s.right){case"center":c=a/2-f/2-n[3];break;case"right":c=a-f-v;break}switch(s.top||s.bottom){case"middle":case"center":u=l/2-g/2-n[0];break;case"bottom":u=l-g-p;break}c=c||0,u=u||0,isNaN(f)&&(f=a-v-c-(d||0)),isNaN(g)&&(g=l-p-u-(h||0));var _=new BoundingRect(c+n[3],u+n[0],f,g);return _.margin=n,_}function positionElement(s,o,n,a,l,c){var u=!l||!l.hv||l.hv[0],d=!l||!l.hv||l.hv[1],h=l&&l.boundingMode||"all";if(c=c||s,c.x=s.x,c.y=s.y,!u&&!d)return!1;var f;if(h==="raw")f=s.type==="group"?new BoundingRect(0,0,+o.width||0,+o.height||0):s.getBoundingRect();else if(f=s.getBoundingRect(),s.needLocalTransform()){var g=s.getLocalTransform();f=f.clone(),f.applyTransform(g)}var p=getLayoutRect(defaults({width:f.width,height:f.height},o),n,a),v=u?p.x-f.x:0,b=d?p.y-f.y:0;return h==="raw"?(c.x=v,c.y=b):(c.x+=v,c.y+=b),c===s&&s.markRedraw(),!0}function sizeCalculable(s,o){return s[HV_NAMES[o][0]]!=null||s[HV_NAMES[o][1]]!=null&&s[HV_NAMES[o][2]]!=null}function fetchLayoutMode(s){var o=s.layoutMode||s.constructor.layoutMode;return isObject$3(o)?o:o?{type:o}:null}function mergeLayoutParam(s,o,n){var a=n&&n.ignoreSize;!isArray$1(a)&&(a=[a,a]);var l=u(HV_NAMES[0],0),c=u(HV_NAMES[1],1);f(HV_NAMES[0],s,l),f(HV_NAMES[1],s,c);function u(g,p){var v={},b=0,_={},w=0,x=2;if(each$e(g,function(T){_[T]=s[T]}),each$e(g,function(T){d(o,T)&&(v[T]=_[T]=o[T]),h(v,T)&&b++,h(_,T)&&w++}),a[p])return h(o,g[1])?_[g[2]]=null:h(o,g[2])&&(_[g[1]]=null),_;if(w===x||!b)return _;if(b>=x)return v;for(var S=0;S<g.length;S++){var C=g[S];if(!d(v,C)&&d(s,C)){v[C]=s[C];break}}return v}function d(g,p){return g.hasOwnProperty(p)}function h(g,p){return g[p]!=null&&g[p]!=="auto"}function f(g,p,v){each$e(g,function(b){p[b]=v[b]})}}function getLayoutParams(s){return copyLayoutParams({},s)}function copyLayoutParams(s,o){return o&&s&&each$e(LOCATION_PARAMS,function(n){o.hasOwnProperty(n)&&(s[n]=o[n])}),s}var inner$l=makeInner(),ComponentModel=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this,n,a,l)||this;return c.uid=getUID("ec_cpt_model"),c}return o.prototype.init=function(n,a,l){this.mergeDefaultAndTheme(n,l)},o.prototype.mergeDefaultAndTheme=function(n,a){var l=fetchLayoutMode(this),c=l?getLayoutParams(n):{},u=a.getTheme();merge(n,u.get(this.mainType)),merge(n,this.getDefaultOption()),l&&mergeLayoutParam(n,c,l)},o.prototype.mergeOption=function(n,a){merge(this.option,n,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,n,l)},o.prototype.optionUpdated=function(n,a){},o.prototype.getDefaultOption=function(){var n=this.constructor;if(!isExtendedClass(n))return n.defaultOption;var a=inner$l(this);if(!a.defaultOption){for(var l=[],c=n;c;){var u=c.prototype.defaultOption;u&&l.push(u),c=c.superClass}for(var d={},h=l.length-1;h>=0;h--)d=merge(d,l[h],!0);a.defaultOption=d}return a.defaultOption},o.prototype.getReferringComponents=function(n,a){var l=n+"Index",c=n+"Id";return queryReferringComponents(this.ecModel,n,{index:this.get(l,!0),id:this.get(c,!0)},a)},o.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},o.prototype.getZLevelKey=function(){return""},o.prototype.setZLevel=function(n){this.option.zlevel=n},o.protoInitialize=function(){var n=o.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),o}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(s){var o=[];return each$f(ComponentModel.getClassesByMainType(s),function(n){o=o.concat(n.dependencies||n.prototype.dependencies||[])}),o=map$1(o,function(n){return parseClassType(n).main}),s!=="dataset"&&indexOf(o,"dataset")<=0&&o.unshift("dataset"),o}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(s){innerGlobalModel(s).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(s,o,n){var a={},l=querySeriesUpstreamDatasetModel(o);if(!l||!s)return a;var c=[],u=[],d=o.ecModel,h=innerGlobalModel(d).datasetMap,f=l.uid+"_"+n.seriesLayoutBy,g,p;s=s.slice(),each$f(s,function(w,x){var S=isObject$3(w)?w:s[x]={name:w};S.type==="ordinal"&&g==null&&(g=x,p=_(S)),a[S.name]=[]});var v=h.get(f)||h.set(f,{categoryWayDim:p,valueWayDim:0});each$f(s,function(w,x){var S=w.name,C=_(w);if(g==null){var T=v.valueWayDim;b(a[S],T,C),b(u,T,C),v.valueWayDim+=C}else if(g===x)b(a[S],0,C),b(c,0,C);else{var T=v.categoryWayDim;b(a[S],T,C),b(u,T,C),v.categoryWayDim+=C}});function b(w,x,S){for(var C=0;C<S;C++)w.push(x+C)}function _(w){var x=w.dimsDef;return x?x.length:1}return c.length&&(a.itemName=c),u.length&&(a.seriesName=u),a}function makeSeriesEncodeForNameBased(s,o,n){var a={},l=querySeriesUpstreamDatasetModel(s);if(!l)return a;var c=o.sourceFormat,u=o.dimensionsDefine,d;(c===SOURCE_FORMAT_OBJECT_ROWS||c===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(u,function(g,p){(isObject$3(g)?g.name:g)==="name"&&(d=p)});var h=function(){for(var g={},p={},v=[],b=0,_=Math.min(5,n);b<_;b++){var w=doGuessOrdinal(o.data,c,o.seriesLayoutBy,u,o.startIndex,b);v.push(w);var x=w===BE_ORDINAL.Not;if(x&&g.v==null&&b!==d&&(g.v=b),(g.n==null||g.n===g.v||!x&&v[g.n]===BE_ORDINAL.Not)&&(g.n=b),S(g)&&v[g.n]!==BE_ORDINAL.Not)return g;x||(w===BE_ORDINAL.Might&&p.v==null&&b!==d&&(p.v=b),(p.n==null||p.n===p.v)&&(p.n=b))}function S(C){return C.v!=null&&C.n!=null}return S(g)?g:S(p)?p:null}();if(h){a.value=[h.v];var f=d??h.n;a.itemName=[f],a.seriesName=[f]}return a}function querySeriesUpstreamDatasetModel(s){var o=s.get("data",!0);if(!o)return queryReferringComponents(s.ecModel,"dataset",{index:s.get("datasetIndex",!0),id:s.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(s){return!s.get("transform",!0)&&!s.get("fromTransformResult",!0)?[]:queryReferringComponents(s.ecModel,"dataset",{index:s.get("fromDatasetIndex",!0),id:s.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(s,o){return doGuessOrdinal(s.data,s.sourceFormat,s.seriesLayoutBy,s.dimensionsDefine,s.startIndex,o)}function doGuessOrdinal(s,o,n,a,l,c){var u,d=5;if(isTypedArray(s))return BE_ORDINAL.Not;var h,f;if(a){var g=a[c];isObject$3(g)?(h=g.name,f=g.type):isString$2(g)&&(h=g)}if(f!=null)return f==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(o===SOURCE_FORMAT_ARRAY_ROWS){var p=s;if(n===SERIES_LAYOUT_BY_ROW){for(var v=p[c],b=0;b<(v||[]).length&&b<d;b++)if((u=R(v[l+b]))!=null)return u}else for(var b=0;b<p.length&&b<d;b++){var _=p[l+b];if(_&&(u=R(_[c]))!=null)return u}}else if(o===SOURCE_FORMAT_OBJECT_ROWS){var w=s;if(!h)return BE_ORDINAL.Not;for(var b=0;b<w.length&&b<d;b++){var x=w[b];if(x&&(u=R(x[h]))!=null)return u}}else if(o===SOURCE_FORMAT_KEYED_COLUMNS){var S=s;if(!h)return BE_ORDINAL.Not;var v=S[h];if(!v||isTypedArray(v))return BE_ORDINAL.Not;for(var b=0;b<v.length&&b<d;b++)if((u=R(v[b]))!=null)return u}else if(o===SOURCE_FORMAT_ORIGINAL)for(var C=s,b=0;b<C.length&&b<d;b++){var x=C[b],T=getDataItemValue(x);if(!isArray$1(T))return BE_ORDINAL.Not;if((u=R(T[c]))!=null)return u}function R(A){var M=isString$2(A);if(A!=null&&Number.isFinite(Number(A))&&A!=="")return M?BE_ORDINAL.Might:BE_ORDINAL.Not;if(M&&A!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(s,o){assert(internalOptionCreatorMap.get(s)==null&&o),internalOptionCreatorMap.set(s,o)}function concatInternalOptions(s,o,n){var a=internalOptionCreatorMap.get(o);if(!a)return n;var l=a(s);if(!l)return n;if(process.env.NODE_ENV!=="production")for(var c=0;c<l.length;c++)assert(isComponentIdInternal(l[c]));return n.concat(l)}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function s(){}return s.prototype.getColorFromPalette=function(o,n,a){var l=normalizeToArray(this.get("color",!0)),c=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,c,o,n,a)},s.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},s}();function getDecalFromPalette(s,o,n,a){var l=normalizeToArray(s.get(["aria","decal","decals"]));return getFromPalette(s,innerDecal,l,null,o,n,a)}function getNearestPalette(s,o){for(var n=s.length,a=0;a<n;a++)if(s[a].length>o)return s[a];return s[n-1]}function getFromPalette(s,o,n,a,l,c,u){c=c||s;var d=o(c),h=d.paletteIdx||0,f=d.paletteNameMap=d.paletteNameMap||{};if(f.hasOwnProperty(l))return f[l];var g=u==null||!a?n:getNearestPalette(a,u);if(g=g||n,!(!g||!g.length)){var p=g[h];return l&&(f[l]=p),d.paletteIdx=(h+1)%g.length,p}}function clearPalette(s,o){o(s).paletteIdx=0,o(s).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,BUITIN_COMPONENTS_MAP={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},BUILTIN_CHARTS_MAP={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},componetsMissingLogPrinted={};function checkMissingComponents(s){each$f(s,function(o,n){if(!ComponentModel.hasClass(n)){var a=BUITIN_COMPONENTS_MAP[n];a&&!componetsMissingLogPrinted[a]&&(error("Component "+n+` is used but not imported.
import { `+a+` } from 'echarts/components';
echarts.use([`+a+"]);"),componetsMissingLogPrinted[a]=!0)}})}var GlobalModel=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.init=function(n,a,l,c,u,d){c=c||{},this.option=null,this._theme=new Model(c),this._locale=new Model(u),this._optionManager=d},o.prototype.setOption=function(n,a,l){process.env.NODE_ENV!=="production"&&(assert(n!=null,"option is null/undefined"),assert(n[OPTION_INNER_KEY]!==OPTION_INNER_VALUE,"please use chart.getOption()"));var c=normalizeSetOptionInput(a);this._optionManager.setOption(n,l,c),this._resetOption(null,c)},o.prototype.resetOption=function(n,a){return this._resetOption(n,normalizeSetOptionInput(a))},o.prototype._resetOption=function(n,a){var l=!1,c=this._optionManager;if(!n||n==="recreate"){var u=c.mountOption(n==="recreate");process.env.NODE_ENV!=="production"&&checkMissingComponents(u),!this.option||n==="recreate"?initBase(this,u):(this.restoreData(),this._mergeOption(u,a)),l=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var d=c.getTimelineOption(this);d&&(l=!0,this._mergeOption(d,a))}if(!n||n==="recreate"||n==="media"){var h=c.getMediaOption(this);h.length&&each$f(h,function(f){l=!0,this._mergeOption(f,a)},this)}return l},o.prototype.mergeOption=function(n){this._mergeOption(n,null)},o.prototype._mergeOption=function(n,a){var l=this.option,c=this._componentsMap,u=this._componentsCount,d=[],h=createHashMap(),f=a&&a.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(n,function(p,v){p!=null&&(ComponentModel.hasClass(v)?v&&(d.push(v),h.set(v,!0)):l[v]=l[v]==null?clone$4(p):merge(l[v],p,!0))}),f&&f.each(function(p,v){ComponentModel.hasClass(v)&&!h.get(v)&&(d.push(v),h.set(v,!0))}),ComponentModel.topologicalTravel(d,ComponentModel.getAllClassMainTypes(),g,this);function g(p){var v=concatInternalOptions(this,p,normalizeToArray(n[p])),b=c.get(p),_=b?f&&f.get(p)?"replaceMerge":"normalMerge":"replaceAll",w=mappingToExists(b,v,_);setComponentTypeToKeyInfo(w,p,ComponentModel),l[p]=null,c.set(p,null),u.set(p,0);var x=[],S=[],C=0,T,R;each$f(w,function(A,M){var D=A.existing,O=A.newOption;if(!O)D&&(D.mergeOption({},this),D.optionUpdated({},!1));else{var H=p==="series",j=ComponentModel.getClass(p,A.keyInfo.subType,!H);if(!j){if(process.env.NODE_ENV!=="production"){var q=A.keyInfo.subType,Y=BUILTIN_CHARTS_MAP[q];componetsMissingLogPrinted[q]||(componetsMissingLogPrinted[q]=!0,error(Y?"Series "+q+` is used but not imported.
import { `+Y+` } from 'echarts/charts';
echarts.use([`+Y+"]);":"Unknown series "+q))}return}if(p==="tooltip"){if(T){process.env.NODE_ENV!=="production"&&(R||(warn("Currently only one tooltip component is allowed."),R=!0));return}T=!0}if(D&&D.constructor===j)D.name=A.keyInfo.name,D.mergeOption(O,this),D.optionUpdated(O,!1);else{var ee=extend({componentIndex:M},A.keyInfo);D=new j(O,this,this,ee),extend(D,ee),A.brandNew&&(D.__requireNewView=!0),D.init(O,this,this),D.optionUpdated(null,!0)}}D?(x.push(D.option),S.push(D),C++):(x.push(void 0),S.push(void 0))},this),l[p]=x,c.set(p,S),u.set(p,C),p==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},o.prototype.getOption=function(){var n=clone$4(this.option);return each$f(n,function(a,l){if(ComponentModel.hasClass(l)){for(var c=normalizeToArray(a),u=c.length,d=!1,h=u-1;h>=0;h--)c[h]&&!isComponentIdInternal(c[h])?d=!0:(c[h]=null,!d&&u--);c.length=u,n[l]=c}}),delete n[OPTION_INNER_KEY],n},o.prototype.getTheme=function(){return this._theme},o.prototype.getLocaleModel=function(){return this._locale},o.prototype.setUpdatePayload=function(n){this._payload=n},o.prototype.getUpdatePayload=function(){return this._payload},o.prototype.getComponent=function(n,a){var l=this._componentsMap.get(n);if(l){var c=l[a||0];if(c)return c;if(a==null){for(var u=0;u<l.length;u++)if(l[u])return l[u]}}},o.prototype.queryComponents=function(n){var a=n.mainType;if(!a)return[];var l=n.index,c=n.id,u=n.name,d=this._componentsMap.get(a);if(!d||!d.length)return[];var h;return l!=null?(h=[],each$f(normalizeToArray(l),function(f){d[f]&&h.push(d[f])})):c!=null?h=queryByIdOrName("id",c,d):u!=null?h=queryByIdOrName("name",u,d):h=filter(d,function(f){return!!f}),filterBySubType(h,n)},o.prototype.findComponents=function(n){var a=n.query,l=n.mainType,c=d(a),u=c?this.queryComponents(c):filter(this._componentsMap.get(l),function(f){return!!f});return h(filterBySubType(u,n));function d(f){var g=l+"Index",p=l+"Id",v=l+"Name";return f&&(f[g]!=null||f[p]!=null||f[v]!=null)?{mainType:l,index:f[g],id:f[p],name:f[v]}:null}function h(f){return n.filter?filter(f,n.filter):f}},o.prototype.eachComponent=function(n,a,l){var c=this._componentsMap;if(isFunction$1(n)){var u=a,d=n;c.each(function(p,v){for(var b=0;p&&b<p.length;b++){var _=p[b];_&&d.call(u,v,_,_.componentIndex)}})}else for(var h=isString$2(n)?c.get(n):isObject$3(n)?this.findComponents(n):null,f=0;h&&f<h.length;f++){var g=h[f];g&&a.call(l,g,g.componentIndex)}},o.prototype.getSeriesByName=function(n){var a=convertOptionIdName(n,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&a!=null&&l.name===a})},o.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},o.prototype.getSeriesByType=function(n){return filter(this._componentsMap.get("series"),function(a){return!!a&&a.subType===n})},o.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(n){return!!n})},o.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},o.prototype.eachSeries=function(n,a){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var c=this._componentsMap.get("series")[l];n.call(a,c,l)},this)},o.prototype.eachRawSeries=function(n,a){each$f(this._componentsMap.get("series"),function(l){l&&n.call(a,l,l.componentIndex)})},o.prototype.eachSeriesByType=function(n,a,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(c){var u=this._componentsMap.get("series")[c];u.subType===n&&a.call(l,u,c)},this)},o.prototype.eachRawSeriesByType=function(n,a,l){return each$f(this.getSeriesByType(n),a,l)},o.prototype.isSeriesFiltered=function(n){return assertSeriesInitialized(this),this._seriesIndicesMap.get(n.componentIndex)==null},o.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},o.prototype.filterSeries=function(n,a){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(c){var u=this._componentsMap.get("series")[c];n.call(a,u,c)&&l.push(c)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},o.prototype.restoreData=function(n){reCreateSeriesIndices(this);var a=this._componentsMap,l=[];a.each(function(c,u){ComponentModel.hasClass(u)&&l.push(u)}),ComponentModel.topologicalTravel(l,ComponentModel.getAllClassMainTypes(),function(c){each$f(a.get(c),function(u){u&&(c!=="series"||!isNotTargetSeries(u,n))&&u.restoreData()})})},o.internalField=function(){reCreateSeriesIndices=function(n){var a=n._seriesIndices=[];each$f(n._componentsMap.get("series"),function(l){l&&a.push(l.componentIndex)}),n._seriesIndicesMap=createHashMap(a)},assertSeriesInitialized=function(n){if(process.env.NODE_ENV!=="production"&&!n._seriesIndices)throw new Error("Option should contains series.")},initBase=function(n,a){n.option={},n.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,n._componentsMap=createHashMap({series:[]}),n._componentsCount=createHashMap();var l=a.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(a,n._theme.option),merge(a,globalDefault,!1),n._mergeOption(a,null)}}(),o}(Model);function isNotTargetSeries(s,o){if(o){var n=o.seriesIndex,a=o.seriesId,l=o.seriesName;return n!=null&&s.componentIndex!==n||a!=null&&s.id!==a||l!=null&&s.name!==l}}function mergeTheme(s,o){var n=s.color&&!s.colorLayer;each$f(o,function(a,l){l==="colorLayer"&&n||ComponentModel.hasClass(l)||(typeof a=="object"?s[l]=s[l]?merge(s[l],a,!1):clone$4(a):s[l]==null&&(s[l]=a))})}function queryByIdOrName(s,o,n){if(isArray$1(o)){var a=createHashMap();return each$f(o,function(c){if(c!=null){var u=convertOptionIdName(c,null);u!=null&&a.set(c,!0)}}),filter(n,function(c){return c&&a.get(c[s])})}else{var l=convertOptionIdName(o,null);return filter(n,function(c){return c&&l!=null&&c[s]===l})}}function filterBySubType(s,o){return o.hasOwnProperty("subType")?filter(s,function(n){return n&&n.subType===o.subType}):s}function normalizeSetOptionInput(s){var o=createHashMap();return s&&each$f(normalizeToArray(s.replaceMerge),function(n){process.env.NODE_ENV!=="production"&&assert(ComponentModel.hasClass(n),'"'+n+'" is not valid component main type in "replaceMerge"'),o.set(n,!0)}),{replaceMergeMainTypeMap:o}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function s(o){each$f(availableMethods,function(n){this[n]=bind$1(o[n],o)},this)}return s}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function s(){this._coordinateSystems=[]}return s.prototype.create=function(o,n){var a=[];each$f(coordinateSystemCreators,function(l,c){var u=l.create(o,n);a=a.concat(u||[])}),this._coordinateSystems=a},s.prototype.update=function(o,n){each$f(this._coordinateSystems,function(a){a.update&&a.update(o,n)})},s.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},s.register=function(o,n){coordinateSystemCreators[o]=n},s.get=function(o){return coordinateSystemCreators[o]},s}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function s(o){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=o}return s.prototype.setOption=function(o,n,a){o&&(each$f(normalizeToArray(o.series),function(u){u&&u.data&&isTypedArray(u.data)&&setAsPrimitive(u.data)}),each$f(normalizeToArray(o.dataset),function(u){u&&u.source&&isTypedArray(u.source)&&setAsPrimitive(u.source)})),o=clone$4(o);var l=this._optionBackup,c=parseRawOption(o,n,!l);this._newBaseOption=c.baseOption,l?(c.timelineOptions.length&&(l.timelineOptions=c.timelineOptions),c.mediaList.length&&(l.mediaList=c.mediaList),c.mediaDefault&&(l.mediaDefault=c.mediaDefault)):this._optionBackup=c},s.prototype.mountOption=function(o){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],clone$4(o?n.baseOption:this._newBaseOption)},s.prototype.getTimelineOption=function(o){var n,a=this._timelineOptions;if(a.length){var l=o.getComponent("timeline");l&&(n=clone$4(a[l.getCurrentIndex()]))}return n},s.prototype.getMediaOption=function(o){var n=this._api.getWidth(),a=this._api.getHeight(),l=this._mediaList,c=this._mediaDefault,u=[],d=[];if(!l.length&&!c)return d;for(var h=0,f=l.length;h<f;h++)applyMediaQuery(l[h].query,n,a)&&u.push(h);return!u.length&&c&&(u=[-1]),u.length&&!indicesEquals(u,this._currentMediaIndices)&&(d=map$1(u,function(g){return clone$4(g===-1?c.option:l[g].option)})),this._currentMediaIndices=u,d},s}();function parseRawOption(s,o,n){var a=[],l,c,u=s.baseOption,d=s.timeline,h=s.options,f=s.media,g=!!s.media,p=!!(h||d||u&&u.timeline);u?(c=u,c.timeline||(c.timeline=d)):((p||g)&&(s.options=s.media=null),c=s),g&&(isArray$1(f)?each$f(f,function(b){process.env.NODE_ENV!=="production"&&b&&!b.option&&isObject$3(b.query)&&isObject$3(b.query.option)&&error("Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }"),b&&b.option&&(b.query?a.push(b):l||(l=b))}):process.env.NODE_ENV!=="production"&&error("Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }")),v(c),each$f(h,function(b){return v(b)}),each$f(a,function(b){return v(b.option)});function v(b){each$f(o,function(_){_(b,n)})}return{baseOption:c,timelineOptions:h||[],mediaDefault:l,mediaList:a}}function applyMediaQuery(s,o,n){var a={width:o,height:n,aspectratio:o/n},l=!0;return each$f(s,function(c,u){var d=u.match(QUERY_REG);if(!(!d||!d[1]||!d[2])){var h=d[1],f=d[2].toLowerCase();compare(a[f],c,h)||(l=!1)}}),l}function compare(s,o,n){return n==="min"?s>=o:n==="max"?s<=o:s===o}function indicesEquals(s,o){return s.join(",")===o.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(s){var o=s&&s.itemStyle;if(o)for(var n=0,a=POSSIBLE_STYLES.length;n<a;n++){var l=POSSIBLE_STYLES[n],c=o.normal,u=o.emphasis;c&&c[l]&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("itemStyle.normal."+l,l),s[l]=s[l]||{},s[l].normal?merge(s[l].normal,c[l]):s[l].normal=c[l],c[l]=null),u&&u[l]&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("itemStyle.emphasis."+l,"emphasis."+l),s[l]=s[l]||{},s[l].emphasis?merge(s[l].emphasis,u[l]):s[l].emphasis=u[l],u[l]=null)}}function convertNormalEmphasis(s,o,n){if(s&&s[o]&&(s[o].normal||s[o].emphasis)){var a=s[o].normal,l=s[o].emphasis;a&&(process.env.NODE_ENV!=="production"&&deprecateLog("'normal' hierarchy in "+o+" has been removed since 4.0. All style properties are configured in "+o+" directly now."),n?(s[o].normal=s[o].emphasis=null,defaults(s[o],a)):s[o]=a),l&&(process.env.NODE_ENV!=="production"&&deprecateLog(o+".emphasis has been changed to emphasis."+o+" since 4.0"),s.emphasis=s.emphasis||{},s.emphasis[o]=l,l.focus&&(s.emphasis.focus=l.focus),l.blurScope&&(s.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(s){convertNormalEmphasis(s,"itemStyle"),convertNormalEmphasis(s,"lineStyle"),convertNormalEmphasis(s,"areaStyle"),convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"labelLine"),convertNormalEmphasis(s,"upperLabel"),convertNormalEmphasis(s,"edgeLabel")}function compatTextStyle(s,o){var n=isObject$2(s)&&s[o],a=isObject$2(n)&&n.textStyle;if(a){process.env.NODE_ENV!=="production"&&deprecateLog("textStyle hierarchy in "+o+" has been removed since 4.0. All textStyle properties are configured in "+o+" directly now.");for(var l=0,c=TEXT_STYLE_OPTIONS.length;l<c;l++){var u=TEXT_STYLE_OPTIONS[l];a.hasOwnProperty(u)&&(n[u]=a[u])}}}function compatEC3CommonStyles(s){s&&(removeEC3NormalStatus(s),compatTextStyle(s,"label"),s.emphasis&&compatTextStyle(s.emphasis,"label"))}function processSeries(s){if(isObject$2(s)){compatEC2ItemStyle(s),removeEC3NormalStatus(s),compatTextStyle(s,"label"),compatTextStyle(s,"upperLabel"),compatTextStyle(s,"edgeLabel"),s.emphasis&&(compatTextStyle(s.emphasis,"label"),compatTextStyle(s.emphasis,"upperLabel"),compatTextStyle(s.emphasis,"edgeLabel"));var o=s.markPoint;o&&(compatEC2ItemStyle(o),compatEC3CommonStyles(o));var n=s.markLine;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var a=s.markArea;a&&compatEC3CommonStyles(a);var l=s.data;if(s.type==="graph"){l=l||s.nodes;var c=s.links||s.edges;if(c&&!isTypedArray(c))for(var u=0;u<c.length;u++)compatEC3CommonStyles(c[u]);each$f(s.categories,function(f){removeEC3NormalStatus(f)})}if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatEC3CommonStyles(l[u]);if(o=s.markPoint,o&&o.data)for(var d=o.data,u=0;u<d.length;u++)compatEC3CommonStyles(d[u]);if(n=s.markLine,n&&n.data)for(var h=n.data,u=0;u<h.length;u++)isArray$1(h[u])?(compatEC3CommonStyles(h[u][0]),compatEC3CommonStyles(h[u][1])):compatEC3CommonStyles(h[u]);s.type==="gauge"?(compatTextStyle(s,"axisLabel"),compatTextStyle(s,"title"),compatTextStyle(s,"detail")):s.type==="treemap"?(convertNormalEmphasis(s.breadcrumb,"itemStyle"),each$f(s.levels,function(f){removeEC3NormalStatus(f)})):s.type==="tree"&&removeEC3NormalStatus(s.leaves)}}function toArr(s){return isArray$1(s)?s:s?[s]:[]}function toObj(s){return(isArray$1(s)?s[0]:s)||{}}function globalCompatStyle(s,o){each$d(toArr(s.series),function(a){isObject$2(a)&&processSeries(a)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];o&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(n,function(a){each$d(toArr(s[a]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(s.parallel),function(a){var l=a&&a.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(s.calendar),function(a){convertNormalEmphasis(a,"itemStyle"),compatTextStyle(a,"dayLabel"),compatTextStyle(a,"monthLabel"),compatTextStyle(a,"yearLabel")}),each$d(toArr(s.radar),function(a){compatTextStyle(a,"name"),a.name&&a.axisName==null&&(a.axisName=a.name,delete a.name,process.env.NODE_ENV!=="production"&&deprecateLog("name property in radar component has been changed to axisName")),a.nameGap!=null&&a.axisNameGap==null&&(a.axisNameGap=a.nameGap,delete a.nameGap,process.env.NODE_ENV!=="production"&&deprecateLog("nameGap property in radar component has been changed to axisNameGap")),process.env.NODE_ENV!=="production"&&each$d(a.indicator,function(l){l.text&&deprecateReplaceLog("text","name","radar.indicator")})}),each$d(toArr(s.geo),function(a){isObject$2(a)&&(compatEC3CommonStyles(a),each$d(toArr(a.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(s.timeline),function(a){compatEC3CommonStyles(a),convertNormalEmphasis(a,"label"),convertNormalEmphasis(a,"itemStyle"),convertNormalEmphasis(a,"controlStyle",!0);var l=a.data;isArray$1(l)&&each$f(l,function(c){isObject$3(c)&&(convertNormalEmphasis(c,"label"),convertNormalEmphasis(c,"itemStyle"))})}),each$d(toArr(s.toolbox),function(a){convertNormalEmphasis(a,"iconStyle"),each$d(a.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(s.axisPointer),"label"),compatTextStyle(toObj(s.tooltip).axisPointer,"label")}function get$1(s,o){for(var n=o.split(","),a=s,l=0;l<n.length&&(a=a&&a[n[l]],a!=null);l++);return a}function set(s,o,n,a){for(var l=o.split(","),c=s,u,d=0;d<l.length-1;d++)u=l[d],c[u]==null&&(c[u]={}),c=c[u];c[l[d]]==null&&(c[l[d]]=n)}function compatLayoutProperties(s){s&&each$f(LAYOUT_PROPERTIES,function(o){o[0]in s&&!(o[1]in s)&&(s[o[1]]=s[o[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(s){var o=s&&s.itemStyle;if(o)for(var n=0;n<BAR_ITEM_STYLE_MAP.length;n++){var a=BAR_ITEM_STYLE_MAP[n][1],l=BAR_ITEM_STYLE_MAP[n][0];o[a]!=null&&(o[l]=o[a],process.env.NODE_ENV!=="production"&&deprecateReplaceLog(a,l))}}function compatPieLabel(s){s&&s.alignTo==="edge"&&s.margin!=null&&s.edgeDistance==null&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("label.margin","label.edgeDistance","pie"),s.edgeDistance=s.margin)}function compatSunburstState(s){s&&s.downplay&&!s.blur&&(s.blur=s.downplay,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("downplay","blur","sunburst"))}function compatGraphFocus(s){s&&s.focusNodeAdjacency!=null&&(s.emphasis=s.emphasis||{},s.emphasis.focus==null&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("focusNodeAdjacency","emphasis: { focus: 'adjacency'}","graph/sankey"),s.emphasis.focus="adjacency"))}function traverseTree(s,o){if(s)for(var n=0;n<s.length;n++)o(s[n]),s[n]&&traverseTree(s[n].children,o)}function globalBackwardCompat(s,o){globalCompatStyle(s,o),s.series=normalizeToArray(s.series),each$f(s.series,function(n){if(isObject$3(n)){var a=n.type;if(a==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("clipOverflow","clip","line"));else if(a==="pie"||a==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("clockWise","clockwise")),compatPieLabel(n.label);var l=n.data;if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatPieLabel(l[c]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("hoverOffset","emphasis.scaleSize"),n.emphasis.scaleSize=n.hoverOffset))}else if(a==="gauge"){var u=get$1(n,"pointer.color");u!=null&&set(n,"itemStyle.color",u)}else if(a==="bar"){compatBarItemStyle(n),compatBarItemStyle(n.backgroundStyle),compatBarItemStyle(n.emphasis);var l=n.data;if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)typeof l[c]=="object"&&(compatBarItemStyle(l[c]),compatBarItemStyle(l[c]&&l[c].emphasis))}else if(a==="sunburst"){var d=n.highlightPolicy;d&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=d,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("highlightPolicy","emphasis.focus","sunburst"))),compatSunburstState(n),traverseTree(n.data,compatSunburstState)}else a==="graph"||a==="sankey"?compatGraphFocus(n):a==="map"&&(n.mapType&&!n.map&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("mapType","map","map"),n.map=n.mapType),n.mapLocation&&(process.env.NODE_ENV!=="production"&&deprecateLog("`mapLocation` is not used anymore."),defaults(n,n.mapLocation)));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("hoverAnimation","emphasis.scale"),n.emphasis.scale=n.hoverAnimation)),compatLayoutProperties(n)}}),s.dataRange&&(s.visualMap=s.dataRange),each$f(COMPATITABLE_COMPONENTS,function(n){var a=s[n];a&&(isArray$1(a)||(a=[a]),each$f(a,function(l){compatLayoutProperties(l)}))})}function dataStack$1(s){var o=createHashMap();s.eachSeries(function(n){var a=n.get("stack");if(a){var l=o.get(a)||o.set(a,[]),c=n.getData(),u={stackResultDimension:c.getCalculationInfo("stackResultDimension"),stackedOverDimension:c.getCalculationInfo("stackedOverDimension"),stackedDimension:c.getCalculationInfo("stackedDimension"),stackedByDimension:c.getCalculationInfo("stackedByDimension"),isStackedByIndex:c.getCalculationInfo("isStackedByIndex"),data:c,seriesModel:n};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;l.length&&c.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(u)}}),o.each(calculateStack)}function calculateStack(s){each$f(s,function(o,n){var a=[],l=[NaN,NaN],c=[o.stackResultDimension,o.stackedOverDimension],u=o.data,d=o.isStackedByIndex,h=o.seriesModel.get("stackStrategy")||"samesign";u.modify(c,function(f,g,p){var v=u.get(o.stackedDimension,p);if(isNaN(v))return l;var b,_;d?_=u.getRawIndex(p):b=u.get(o.stackedByDimension,p);for(var w=NaN,x=n-1;x>=0;x--){var S=s[x];if(d||(_=S.data.rawIndexOf(S.stackedByDimension,b)),_>=0){var C=S.data.getByRawIndex(S.stackResultDimension,_);if(h==="all"||h==="positive"&&C>0||h==="negative"&&C<0||h==="samesign"&&v>=0&&C>0||h==="samesign"&&v<=0&&C<0){v=addSafe(v,C),w=C;break}}}return a[0]=v,a[1]=w,a})})}var SourceImpl=function(){function s(o){this.data=o.data||(o.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=o.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=o.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=o.startIndex||0,this.dimensionsDetectedCount=o.dimensionsDetectedCount,this.metaRawOption=o.metaRawOption;var n=this.dimensionsDefine=o.dimensionsDefine;if(n)for(var a=0;a<n.length;a++){var l=n[a];l.type==null&&guessOrdinal(this,a)===BE_ORDINAL.Must&&(l.type="ordinal")}}return s}();function isSourceInstance(s){return s instanceof SourceImpl}function createSource(s,o,n){n=n||detectSourceFormat(s);var a=o.seriesLayoutBy,l=determineSourceDimensions(s,n,a,o.sourceHeader,o.dimensions),c=new SourceImpl({data:s,sourceFormat:n,seriesLayoutBy:a,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(o)});return c}function createSourceFromSeriesDataOption(s){return new SourceImpl({data:s,sourceFormat:isTypedArray(s)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(s){return new SourceImpl({data:s.data,sourceFormat:s.sourceFormat,seriesLayoutBy:s.seriesLayoutBy,dimensionsDefine:clone$4(s.dimensionsDefine),startIndex:s.startIndex,dimensionsDetectedCount:s.dimensionsDetectedCount})}function detectSourceFormat(s){var o=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(s))o=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(s)){s.length===0&&(o=SOURCE_FORMAT_ARRAY_ROWS);for(var n=0,a=s.length;n<a;n++){var l=s[n];if(l!=null){if(isArray$1(l)||isTypedArray(l)){o=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){o=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(s)){for(var c in s)if(hasOwn(s,c)&&isArrayLike(s[c])){o=SOURCE_FORMAT_KEYED_COLUMNS;break}}return o}function determineSourceDimensions(s,o,n,a,l){var c,u;if(!s)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:u,dimensionsDetectedCount:c};if(o===SOURCE_FORMAT_ARRAY_ROWS){var d=s;a==="auto"||a==null?arrayRowsTravelFirst(function(f){f!=null&&f!=="-"&&(isString$2(f)?u==null&&(u=1):u=0)},n,d,10):u=isNumber(a)?a:a?1:0,!l&&u===1&&(l=[],arrayRowsTravelFirst(function(f,g){l[g]=f!=null?f+"":""},n,d,1/0)),c=l?l.length:n===SERIES_LAYOUT_BY_ROW?d.length:d[0]?d[0].length:null}else if(o===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(s));else if(o===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(s,function(f,g){l.push(g)}));else if(o===SOURCE_FORMAT_ORIGINAL){var h=getDataItemValue(s[0]);c=isArray$1(h)&&h.length||1}else o===SOURCE_FORMAT_TYPED_ARRAY&&process.env.NODE_ENV!=="production"&&assert(!!l,"dimensions must be given if data is TypedArray.");return{startIndex:u,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:c}}function objectRowsCollectDimensions(s){for(var o=0,n;o<s.length&&!(n=s[o++]););if(n)return keys(n)}function normalizeDimensionsOption(s){if(s){var o=createHashMap();return map$1(s,function(n,a){n=isObject$3(n)?n:{name:n};var l={name:n.name,displayName:n.displayName,type:n.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var c=o.get(l.name);return c?l.name+="-"+c.count++:o.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(s,o,n,a){if(o===SERIES_LAYOUT_BY_ROW)for(var l=0;l<n.length&&l<a;l++)s(n[l]?n[l][0]:null,l);else for(var c=n[0]||[],l=0;l<c.length&&l<a;l++)s(c[l],l)}function shouldRetrieveDataByName(s){var o=s.sourceFormat;return o===SOURCE_FORMAT_OBJECT_ROWS||o===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function s(o,n){var a=isSourceInstance(o)?o:createSourceFromSeriesDataOption(o);this._source=a;var l=this._data=a.data;if(a.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY){if(process.env.NODE_ENV!=="production"&&n==null)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=n,this._data=l}mountMethods(this,l,a)}return s.prototype.getSource=function(){return this._source},s.prototype.count=function(){return 0},s.prototype.getItem=function(o,n){},s.prototype.appendData=function(o){},s.prototype.clean=function(){},s.protoInitialize=function(){var o=s.prototype;o.pure=!1,o.persistent=!0}(),s.internalField=function(){var o;mountMethods=function(u,d,h){var f=h.sourceFormat,g=h.seriesLayoutBy,p=h.startIndex,v=h.dimensionsDefine,b=providerMethods[getMethodMapKey(f,g)];if(process.env.NODE_ENV!=="production"&&assert(b,"Invalide sourceFormat: "+f),extend(u,b),f===SOURCE_FORMAT_TYPED_ARRAY)u.getItem=n,u.count=l,u.fillStorage=a;else{var _=getRawSourceItemGetter(f,g);u.getItem=bind$1(_,null,d,p,v);var w=getRawSourceDataCounter(f,g);u.count=bind$1(w,null,d,p,v)}};var n=function(u,d){u=u-this._offset,d=d||[];for(var h=this._data,f=this._dimSize,g=f*u,p=0;p<f;p++)d[p]=h[g+p];return d},a=function(u,d,h,f){for(var g=this._data,p=this._dimSize,v=0;v<p;v++){for(var b=f[v],_=b[0]==null?1/0:b[0],w=b[1]==null?-1/0:b[1],x=d-u,S=h[v],C=0;C<x;C++){var T=g[C*p+v];S[u+C]=T,T<_&&(_=T),T>w&&(w=T)}b[0]=_,b[1]=w}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(o={},o[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:c},o[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},o[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:c},o[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(u){var d=this._data;each$f(u,function(h,f){for(var g=d[f]||(d[f]=[]),p=0;p<(h||[]).length;p++)g.push(h[p])})}},o[SOURCE_FORMAT_ORIGINAL]={appendData:c},o[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(u){process.env.NODE_ENV!=="production"&&assert(isTypedArray(u),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=u},clean:function(){this._offset+=this.count(),this._data=null}},o);function c(u){for(var d=0;d<u.length;d++)this._data.push(u[d])}}(),s}(),getItemSimply=function(s,o,n,a){return s[a]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(s,o,n,a){return s[a+o]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(s,o,n,a,l){a+=o;for(var c=l||[],u=s,d=0;d<u.length;d++){var h=u[d];c[d]=h?h[a]:null}return c},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(s,o,n,a,l){for(var c=l||[],u=0;u<n.length;u++){var d=n[u].name;if(process.env.NODE_ENV!=="production"&&d==null)throw new Error;var h=s[d];c[u]=h?h[a]:null}return c},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(s,o){var n=rawSourceItemGetterMap[getMethodMapKey(s,o)];return process.env.NODE_ENV!=="production"&&assert(n,'Do not support get item on "'+s+'", "'+o+'".'),n}var countSimply=function(s,o,n){return s.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(s,o,n){return Math.max(0,s.length-o)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(s,o,n){var a=s[0];return a?Math.max(0,a.length-o):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(s,o,n){var a=n[0].name;if(process.env.NODE_ENV!=="production"&&a==null)throw new Error;var l=s[a];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(s,o){var n=rawSourceDataCounterMap[getMethodMapKey(s,o)];return process.env.NODE_ENV!=="production"&&assert(n,'Do not support count on "'+s+'", "'+o+'".'),n}var getRawValueSimply=function(s,o,n){return s[o]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(s,o,n){return s[n]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(s,o,n){var a=getDataItemValue(s);return a instanceof Array?a[o]:a},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(s){var o=rawSourceValueGetterMap[s];return process.env.NODE_ENV!=="production"&&assert(o,'Do not support get value on "'+s+'".'),o}function getMethodMapKey(s,o){return s===SOURCE_FORMAT_ARRAY_ROWS?s+"_"+o:s}function retrieveRawValue(s,o,n){if(s){var a=s.getRawDataItem(o);if(a!=null){var l=s.getStore(),c=l.getSource().sourceFormat;if(n!=null){var u=s.getDimensionIndex(n),d=l.getDimensionProperty(u);return getRawSourceValueGetter(c)(a,u,d)}else{var h=a;return c===SOURCE_FORMAT_ORIGINAL&&(h=getDataItemValue(a)),h}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function s(){}return s.prototype.getDataParams=function(o,n){var a=this.getData(n),l=this.getRawValue(o,n),c=a.getRawIndex(o),u=a.getName(o),d=a.getRawDataItem(o),h=a.getItemVisual(o,"style"),f=h&&h[a.getItemVisual(o,"drawType")||"fill"],g=h&&h.stroke,p=this.mainType,v=p==="series",b=a.userOutput&&a.userOutput.get();return{componentType:p,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:v?this.subType:null,seriesIndex:this.seriesIndex,seriesId:v?this.id:null,seriesName:v?this.name:null,name:u,dataIndex:c,data:d,dataType:n,value:l,color:f,borderColor:g,dimensionNames:b?b.fullDimensions:null,encode:b?b.encode:null,$vars:["seriesName","name","value"]}},s.prototype.getFormattedLabel=function(o,n,a,l,c,u){n=n||"normal";var d=this.getData(a),h=this.getDataParams(o,a);if(u&&(h.value=u.interpolatedValue),l!=null&&isArray$1(h.value)&&(h.value=h.value[l]),!c){var f=d.getItemModel(o);c=f.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(isFunction$1(c))return h.status=n,h.dimensionIndex=l,c(h);if(isString$2(c)){var g=formatTpl(c,h);return g.replace(DIMENSION_LABEL_REG,function(p,v){var b=v.length,_=v;_.charAt(0)==="["&&_.charAt(b-1)==="]"&&(_=+_.slice(1,b-1),process.env.NODE_ENV!=="production"&&isNaN(_)&&error("Invalide label formatter: @"+v+", only support @[0], @[1], @[2], ..."));var w=retrieveRawValue(d,o,_);if(u&&isArray$1(u.interpolatedValue)){var x=d.getDimensionIndex(_);x>=0&&(w=u.interpolatedValue[x])}return w!=null?w+"":""})}},s.prototype.getRawValue=function(o,n){return retrieveRawValue(this.getData(n),o)},s.prototype.formatTooltip=function(o,n,a){},s}();function normalizeTooltipFormatResult(s){var o,n;return isObject$3(s)?s.type?n=s:process.env.NODE_ENV!=="production"&&console.warn("The return type of `formatTooltip` is not supported: "+makePrintable(s)):o=s,{text:o,frag:n}}function createTask(s){return new Task(s)}var Task=function(){function s(o){o=o||{},this._reset=o.reset,this._plan=o.plan,this._count=o.count,this._onDirty=o.onDirty,this._dirty=!0}return s.prototype.perform=function(o){var n=this._upstream,a=o&&o.skip;if(this._dirty&&n){var l=this.context;l.data=l.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var c;this._plan&&!a&&(c=this._plan(this.context));var u=g(this._modBy),d=this._modDataCount||0,h=g(o&&o.modBy),f=o&&o.modDataCount||0;(u!==h||d!==f)&&(c="reset");function g(C){return!(C>=1)&&(C=1),C}var p;(this._dirty||c==="reset")&&(this._dirty=!1,p=this._doReset(a)),this._modBy=h,this._modDataCount=f;var v=o&&o.step;if(n?(process.env.NODE_ENV!=="production"&&assert(n._outputDueEnd!=null),this._dueEnd=n._outputDueEnd):(process.env.NODE_ENV!=="production"&&assert(!this._progress||this._count),this._dueEnd=this._count?this._count(this.context):1/0),this._progress){var b=this._dueIndex,_=Math.min(v!=null?this._dueIndex+v:1/0,this._dueEnd);if(!a&&(p||b<_)){var w=this._progress;if(isArray$1(w))for(var x=0;x<w.length;x++)this._doProgress(w[x],b,_,h,f);else this._doProgress(w,b,_,h,f)}this._dueIndex=_;var S=this._settedOutputEnd!=null?this._settedOutputEnd:_;process.env.NODE_ENV!=="production"&&assert(S>=this._outputDueEnd),this._outputDueEnd=S}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},s.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},s.prototype._doProgress=function(o,n,a,l,c){iterator.reset(n,a,l,c),this._callingProgress=o,this._callingProgress({start:n,end:a,count:a-n,next:iterator.next},this.context)},s.prototype._doReset=function(o){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,a;!o&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(a=n.forceFirstProgress,n=n.progress),isArray$1(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),a},s.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},s.prototype.pipe=function(o){process.env.NODE_ENV!=="production"&&assert(o&&!o._disposed&&o!==this),(this._downstream!==o||this._dirty)&&(this._downstream=o,o._upstream=this,o.dirty())},s.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},s.prototype.getUpstream=function(){return this._upstream},s.prototype.getDownstream=function(){return this._downstream},s.prototype.setOutputEnd=function(o){this._outputDueEnd=this._settedOutputEnd=o},s}(),iterator=function(){var s,o,n,a,l,c={reset:function(h,f,g,p){o=h,s=f,n=g,a=p,l=Math.ceil(a/n),c.next=n>1&&a>0?d:u}};return c;function u(){return o<s?o++:null}function d(){var h=o%l*n+Math.ceil(o/l),f=o>=s?null:h<a?h:o;return o++,f}}();function parseDataValue(s,o){var n=o&&o.type;return n==="ordinal"?s:(n==="time"&&!isNumber(s)&&s!=null&&s!=="-"&&(s=+parseDate(s)),s==null||s===""?NaN:Number(s))}var valueParserMap=createHashMap({number:function(s){return parseFloat(s)},time:function(s){return+parseDate(s)},trim:function(s){return isString$2(s)?trim$1(s):s}});function getRawValueParser(s){return valueParserMap.get(s)}var ORDER_COMPARISON_OP_MAP={lt:function(s,o){return s<o},lte:function(s,o){return s<=o},gt:function(s,o){return s>o},gte:function(s,o){return s>=o}},FilterOrderComparator=function(){function s(o,n){if(!isNumber(n)){var a="";process.env.NODE_ENV!=="production"&&(a='rvalue of "<", ">", "<=", ">=" can only be number in filter.'),throwError(a)}this._opFn=ORDER_COMPARISON_OP_MAP[o],this._rvalFloat=numericToNumber(n)}return s.prototype.evaluate=function(o){return isNumber(o)?this._opFn(o,this._rvalFloat):this._opFn(numericToNumber(o),this._rvalFloat)},s}(),SortOrderComparator=function(){function s(o,n){var a=o==="desc";this._resultLT=a?1:-1,n==null&&(n=a?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return s.prototype.evaluate=function(o,n){var a=isNumber(o)?o:numericToNumber(o),l=isNumber(n)?n:numericToNumber(n),c=isNaN(a),u=isNaN(l);if(c&&(a=this._incomparable),u&&(l=this._incomparable),c&&u){var d=isString$2(o),h=isString$2(n);d&&(a=h?o:0),h&&(l=d?n:0)}return a<l?this._resultLT:a>l?-this._resultLT:0},s}(),FilterEqualityComparator=function(){function s(o,n){this._rval=n,this._isEQ=o,this._rvalTypeof=typeof n,this._rvalFloat=numericToNumber(n)}return s.prototype.evaluate=function(o){var n=o===this._rval;if(!n){var a=typeof o;a!==this._rvalTypeof&&(a==="number"||this._rvalTypeof==="number")&&(n=numericToNumber(o)===this._rvalFloat)}return this._isEQ?n:!n},s}();function createFilterComparator(s,o){return s==="eq"||s==="ne"?new FilterEqualityComparator(s==="eq",o):hasOwn(ORDER_COMPARISON_OP_MAP,s)?new FilterOrderComparator(s,o):null}var ExternalSource=function(){function s(){}return s.prototype.getRawData=function(){throw new Error("not supported")},s.prototype.getRawDataItem=function(o){throw new Error("not supported")},s.prototype.cloneRawData=function(){},s.prototype.getDimensionInfo=function(o){},s.prototype.cloneAllDimensionInfo=function(){},s.prototype.count=function(){},s.prototype.retrieveValue=function(o,n){},s.prototype.retrieveValueFromItem=function(o,n){},s.prototype.convertValue=function(o,n){return parseDataValue(o,n)},s}();function createExternalSource(s,o){var n=new ExternalSource,a=s.data,l=n.sourceFormat=s.sourceFormat,c=s.startIndex,u="";s.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&(process.env.NODE_ENV!=="production"&&(u='`seriesLayoutBy` of upstream dataset can only be "column" in data transform.'),throwError(u));var d=[],h={},f=s.dimensionsDefine;if(f)each$f(f,function(w,x){var S=w.name,C={index:x,name:S,displayName:w.displayName};if(d.push(C),S!=null){var T="";hasOwn(h,S)&&(process.env.NODE_ENV!=="production"&&(T='dimension name "'+S+'" duplicated.'),throwError(T)),h[S]=C}});else for(var g=0;g<s.dimensionsDetectedCount;g++)d.push({index:g});var p=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);o.__isBuiltIn&&(n.getRawDataItem=function(w){return p(a,c,d,w)},n.getRawData=bind$1(getRawData,null,s)),n.cloneRawData=bind$1(cloneRawData,null,s);var v=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);n.count=bind$1(v,null,a,c,d);var b=getRawSourceValueGetter(l);n.retrieveValue=function(w,x){var S=p(a,c,d,w);return _(S,x)};var _=n.retrieveValueFromItem=function(w,x){if(w!=null){var S=d[x];if(S)return b(w,x,S.name)}};return n.getDimensionInfo=bind$1(getDimensionInfo,null,d,h),n.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,d),n}function getRawData(s){var o=s.sourceFormat;if(!isSupportedSourceFormat(o)){var n="";process.env.NODE_ENV!=="production"&&(n="`getRawData` is not supported in source format "+o),throwError(n)}return s.data}function cloneRawData(s){var o=s.sourceFormat,n=s.data;if(!isSupportedSourceFormat(o)){var a="";process.env.NODE_ENV!=="production"&&(a="`cloneRawData` is not supported in source format "+o),throwError(a)}if(o===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],c=0,u=n.length;c<u;c++)l.push(n[c].slice());return l}else if(o===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],c=0,u=n.length;c<u;c++)l.push(extend({},n[c]));return l}}function getDimensionInfo(s,o,n){if(n!=null){if(isNumber(n)||!isNaN(n)&&!hasOwn(o,n))return s[n];if(hasOwn(o,n))return o[n]}}function cloneAllDimensionInfo(s){return clone$4(s)}var externalTransformMap=createHashMap();function registerExternalTransform(s){s=clone$4(s);var o=s.type,n="";o||(process.env.NODE_ENV!=="production"&&(n="Must have a `type` when `registerTransform`."),throwError(n));var a=o.split(":");a.length!==2&&(process.env.NODE_ENV!=="production"&&(n='Name must include namespace like "ns:regression".'),throwError(n));var l=!1;a[0]==="echarts"&&(o=a[1],l=!0),s.__isBuiltIn=l,externalTransformMap.set(o,s)}function applyDataTransform(s,o,n){var a=normalizeToArray(s),l=a.length,c="";l||(process.env.NODE_ENV!=="production"&&(c="If `transform` declared, it should at least contain one transform."),throwError(c));for(var u=0,d=l;u<d;u++){var h=a[u];o=applySingleDataTransform(h,o,n,l===1?null:u),u!==d-1&&(o.length=Math.max(o.length,1))}return o}function applySingleDataTransform(s,o,n,a){var l="";o.length||(process.env.NODE_ENV!=="production"&&(l="Must have at least one upstream dataset."),throwError(l)),isObject$3(s)||(process.env.NODE_ENV!=="production"&&(l="transform declaration must be an object rather than "+typeof s+"."),throwError(l));var c=s.type,u=externalTransformMap.get(c);u||(process.env.NODE_ENV!=="production"&&(l='Can not find transform on type "'+c+'".'),throwError(l));var d=map$1(o,function(g){return createExternalSource(g,u)}),h=normalizeToArray(u.transform({upstream:d[0],upstreamList:d,config:clone$4(s.config)}));if(process.env.NODE_ENV!=="production"&&s.print){var f=map$1(h,function(g){var p=a!=null?" === pipe index: "+a:"";return["=== dataset index: "+n.datasetIndex+p+" ===","- transform result data:",makePrintable(g.data),"- transform result dimensions:",makePrintable(g.dimensions)].join(`
`)}).join(`
`);log(f)}return map$1(h,function(g,p){var v="";isObject$3(g)||(process.env.NODE_ENV!=="production"&&(v="A transform should not return some empty results."),throwError(v)),g.data||(process.env.NODE_ENV!=="production"&&(v="Transform result data should be not be null or undefined"),throwError(v));var b=detectSourceFormat(g.data);isSupportedSourceFormat(b)||(process.env.NODE_ENV!=="production"&&(v="Transform result data should be array rows or object rows."),throwError(v));var _,w=o[0];if(w&&p===0&&!g.dimensions){var x=w.startIndex;x&&(g.data=w.data.slice(0,x).concat(g.data)),_={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:x,dimensions:w.metaRawOption.dimensions}}else _={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:g.dimensions};return createSource(g.data,_,null)})}function isSupportedSourceFormat(s){return s===SOURCE_FORMAT_ARRAY_ROWS||s===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(s){return s>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(s){var o=s.constructor;return o===Array?s.slice():new o(s)}function prepareStore(s,o,n,a,l){var c=dataCtors[n||"float"];if(l){var u=s[o],d=u&&u.length;if(d!==a){for(var h=new c(a),f=0;f<d;f++)h[f]=u[f];s[o]=h}}else s[o]=new c(a)}var DataStore=function(){function s(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return s.prototype.initData=function(o,n,a){process.env.NODE_ENV!=="production"&&assert(isFunction$1(o.getItem)&&isFunction$1(o.count),"Invalid data provider."),this._provider=o,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=o.getSource(),c=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=a||c,this._rawExtent=[];var u=shouldRetrieveDataByName(l);this._dimensions=map$1(n,function(d){return process.env.NODE_ENV!=="production"&&u&&assert(d.property!=null),{type:d.type,property:d.property}}),this._initDataFromProvider(0,o.count())},s.prototype.getProvider=function(){return this._provider},s.prototype.getSource=function(){return this._provider.getSource()},s.prototype.ensureCalculationDimension=function(o,n){var a=this._calcDimNameToIdx,l=this._dimensions,c=a.get(o);if(c!=null){if(l[c].type===n)return c}else c=l.length;return l[c]={type:n},a.set(o,c),this._chunks[c]=new dataCtors[n||"float"](this._rawCount),this._rawExtent[c]=getInitialExtent(),c},s.prototype.collectOrdinalMeta=function(o,n){var a=this._chunks[o],l=this._dimensions[o],c=this._rawExtent,u=l.ordinalOffset||0,d=a.length;u===0&&(c[o]=getInitialExtent());for(var h=c[o],f=u;f<d;f++){var g=a[f]=n.parseAndCollect(a[f]);isNaN(g)||(h[0]=Math.min(g,h[0]),h[1]=Math.max(g,h[1]))}l.ordinalMeta=n,l.ordinalOffset=d,l.type="ordinal"},s.prototype.getOrdinalMeta=function(o){var n=this._dimensions[o],a=n.ordinalMeta;return a},s.prototype.getDimensionProperty=function(o){var n=this._dimensions[o];return n&&n.property},s.prototype.appendData=function(o){process.env.NODE_ENV!=="production"&&assert(!this._indices,"appendData can only be called on raw data.");var n=this._provider,a=this.count();n.appendData(o);var l=n.count();return n.persistent||(l+=a),a<l&&this._initDataFromProvider(a,l,!0),[a,l]},s.prototype.appendValues=function(o,n){for(var a=this._chunks,l=this._dimensions,c=l.length,u=this._rawExtent,d=this.count(),h=d+Math.max(o.length,n||0),f=0;f<c;f++){var g=l[f];prepareStore(a,f,g.type,h,!0)}for(var p=[],v=d;v<h;v++)for(var b=v-d,_=0;_<c;_++){var g=l[_],w=defaultDimValueGetters.arrayRows.call(this,o[b]||p,g.property,b,_);a[_][v]=w;var x=u[_];w<x[0]&&(x[0]=w),w>x[1]&&(x[1]=w)}return this._rawCount=this._count=h,{start:d,end:h}},s.prototype._initDataFromProvider=function(o,n,a){for(var l=this._provider,c=this._chunks,u=this._dimensions,d=u.length,h=this._rawExtent,f=map$1(u,function(C){return C.property}),g=0;g<d;g++){var p=u[g];h[g]||(h[g]=getInitialExtent()),prepareStore(c,g,p.type,n,a)}if(l.fillStorage)l.fillStorage(o,n,c,h);else for(var v=[],b=o;b<n;b++){v=l.getItem(b,v);for(var _=0;_<d;_++){var w=c[_],x=this._dimValueGetter(v,f[_],b,_);w[b]=x;var S=h[_];x<S[0]&&(S[0]=x),x>S[1]&&(S[1]=x)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=n,this._extent=[]},s.prototype.count=function(){return this._count},s.prototype.get=function(o,n){if(!(n>=0&&n<this._count))return NaN;var a=this._chunks[o];return a?a[this.getRawIndex(n)]:NaN},s.prototype.getValues=function(o,n){var a=[],l=[];if(n==null){n=o,o=[];for(var c=0;c<this._dimensions.length;c++)l.push(c)}else l=o;for(var c=0,u=l.length;c<u;c++)a.push(this.get(l[c],n));return a},s.prototype.getByRawIndex=function(o,n){if(!(n>=0&&n<this._rawCount))return NaN;var a=this._chunks[o];return a?a[n]:NaN},s.prototype.getSum=function(o){var n=this._chunks[o],a=0;if(n)for(var l=0,c=this.count();l<c;l++){var u=this.get(o,l);isNaN(u)||(a+=u)}return a},s.prototype.getMedian=function(o){var n=[];this.each([o],function(c){isNaN(c)||n.push(c)});var a=n.sort(function(c,u){return c-u}),l=this.count();return l===0?0:l%2===1?a[(l-1)/2]:(a[l/2]+a[l/2-1])/2},s.prototype.indexOfRawIndex=function(o){if(o>=this._rawCount||o<0)return-1;if(!this._indices)return o;var n=this._indices,a=n[o];if(a!=null&&a<this._count&&a===o)return o;for(var l=0,c=this._count-1;l<=c;){var u=(l+c)/2|0;if(n[u]<o)l=u+1;else if(n[u]>o)c=u-1;else return u}return-1},s.prototype.indicesOfNearest=function(o,n,a){var l=this._chunks,c=l[o],u=[];if(!c)return u;a==null&&(a=1/0);for(var d=1/0,h=-1,f=0,g=0,p=this.count();g<p;g++){var v=this.getRawIndex(g),b=n-c[v],_=Math.abs(b);_<=a&&((_<d||_===d&&b>=0&&h<0)&&(d=_,h=b,f=0),b===h&&(u[f++]=g))}return u.length=f,u},s.prototype.getIndices=function(){var o,n=this._indices;if(n){var a=n.constructor,l=this._count;if(a===Array){o=new a(l);for(var c=0;c<l;c++)o[c]=n[c]}else o=new a(n.buffer,0,l)}else{var a=getIndicesCtor(this._rawCount);o=new a(this.count());for(var c=0;c<o.length;c++)o[c]=c}return o},s.prototype.filter=function(o,n){if(!this._count)return this;for(var a=this.clone(),l=a.count(),c=getIndicesCtor(a._rawCount),u=new c(l),d=[],h=o.length,f=0,g=o[0],p=a._chunks,v=0;v<l;v++){var b=void 0,_=a.getRawIndex(v);if(h===0)b=n(v);else if(h===1){var w=p[g][_];b=n(w,v)}else{for(var x=0;x<h;x++)d[x]=p[o[x]][_];d[x]=v,b=n.apply(null,d)}b&&(u[f++]=_)}return f<l&&(a._indices=u),a._count=f,a._extent=[],a._updateGetRawIdx(),a},s.prototype.selectRange=function(o){var n=this.clone(),a=n._count;if(!a)return this;var l=keys(o),c=l.length;if(!c)return this;var u=n.count(),d=getIndicesCtor(n._rawCount),h=new d(u),f=0,g=l[0],p=o[g][0],v=o[g][1],b=n._chunks,_=!1;if(!n._indices){var w=0;if(c===1){for(var x=b[l[0]],S=0;S<a;S++){var C=x[S];(C>=p&&C<=v||isNaN(C))&&(h[f++]=w),w++}_=!0}else if(c===2){for(var x=b[l[0]],T=b[l[1]],R=o[l[1]][0],A=o[l[1]][1],S=0;S<a;S++){var C=x[S],M=T[S];(C>=p&&C<=v||isNaN(C))&&(M>=R&&M<=A||isNaN(M))&&(h[f++]=w),w++}_=!0}}if(!_)if(c===1)for(var S=0;S<u;S++){var D=n.getRawIndex(S),C=b[l[0]][D];(C>=p&&C<=v||isNaN(C))&&(h[f++]=D)}else for(var S=0;S<u;S++){for(var O=!0,D=n.getRawIndex(S),H=0;H<c;H++){var j=l[H],C=b[j][D];(C<o[j][0]||C>o[j][1])&&(O=!1)}O&&(h[f++]=n.getRawIndex(S))}return f<u&&(n._indices=h),n._count=f,n._extent=[],n._updateGetRawIdx(),n},s.prototype.map=function(o,n){var a=this.clone(o);return this._updateDims(a,o,n),a},s.prototype.modify=function(o,n){this._updateDims(this,o,n)},s.prototype._updateDims=function(o,n,a){for(var l=o._chunks,c=[],u=n.length,d=o.count(),h=[],f=o._rawExtent,g=0;g<n.length;g++)f[n[g]]=getInitialExtent();for(var p=0;p<d;p++){for(var v=o.getRawIndex(p),b=0;b<u;b++)h[b]=l[n[b]][v];h[u]=p;var _=a&&a.apply(null,h);if(_!=null){typeof _!="object"&&(c[0]=_,_=c);for(var g=0;g<_.length;g++){var w=n[g],x=_[g],S=f[w],C=l[w];C&&(C[v]=x),x<S[0]&&(S[0]=x),x>S[1]&&(S[1]=x)}}}},s.prototype.lttbDownSample=function(o,n){var a=this.clone([o],!0),l=a._chunks,c=l[o],u=this.count(),d=0,h=Math.floor(1/n),f=this.getRawIndex(0),g,p,v,b=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(u/h)+2)*2,u));b[d++]=f;for(var _=1;_<u-1;_+=h){for(var w=Math.min(_+h,u-1),x=Math.min(_+h*2,u),S=(x+w)/2,C=0,T=w;T<x;T++){var R=this.getRawIndex(T),A=c[R];isNaN(A)||(C+=A)}C/=x-w;var M=_,D=Math.min(_+h,u),O=_-1,H=c[f];g=-1,v=M;for(var j=-1,q=0,T=M;T<D;T++){var R=this.getRawIndex(T),A=c[R];if(isNaN(A)){q++,j<0&&(j=R);continue}p=Math.abs((O-S)*(A-H)-(O-T)*(C-H)),p>g&&(g=p,v=R)}q>0&&q<D-M&&(b[d++]=Math.min(j,v),v=Math.max(j,v)),b[d++]=v,f=v}return b[d++]=this.getRawIndex(u-1),a._count=d,a._indices=b,a.getRawIndex=this._getRawIdx,a},s.prototype.minmaxDownSample=function(o,n){for(var a=this.clone([o],!0),l=a._chunks,c=Math.floor(1/n),u=l[o],d=this.count(),h=new(getIndicesCtor(this._rawCount))(Math.ceil(d/c)*2),f=0,g=0;g<d;g+=c){var p=g,v=u[this.getRawIndex(p)],b=g,_=u[this.getRawIndex(b)],w=c;g+c>d&&(w=d-g);for(var x=0;x<w;x++){var S=this.getRawIndex(g+x),C=u[S];C<v&&(v=C,p=g+x),C>_&&(_=C,b=g+x)}var T=this.getRawIndex(p),R=this.getRawIndex(b);p<b?(h[f++]=T,h[f++]=R):(h[f++]=R,h[f++]=T)}return a._count=f,a._indices=h,a._updateGetRawIdx(),a},s.prototype.downSample=function(o,n,a,l){for(var c=this.clone([o],!0),u=c._chunks,d=[],h=Math.floor(1/n),f=u[o],g=this.count(),p=c._rawExtent[o]=getInitialExtent(),v=new(getIndicesCtor(this._rawCount))(Math.ceil(g/h)),b=0,_=0;_<g;_+=h){h>g-_&&(h=g-_,d.length=h);for(var w=0;w<h;w++){var x=this.getRawIndex(_+w);d[w]=f[x]}var S=a(d),C=this.getRawIndex(Math.min(_+l(d,S)||0,g-1));f[C]=S,S<p[0]&&(p[0]=S),S>p[1]&&(p[1]=S),v[b++]=C}return c._count=b,c._indices=v,c._updateGetRawIdx(),c},s.prototype.each=function(o,n){if(this._count)for(var a=o.length,l=this._chunks,c=0,u=this.count();c<u;c++){var d=this.getRawIndex(c);switch(a){case 0:n(c);break;case 1:n(l[o[0]][d],c);break;case 2:n(l[o[0]][d],l[o[1]][d],c);break;default:for(var h=0,f=[];h<a;h++)f[h]=l[o[h]][d];f[h]=c,n.apply(null,f)}}},s.prototype.getDataExtent=function(o){var n=this._chunks[o],a=getInitialExtent();if(!n)return a;var l=this.count(),c=!this._indices,u;if(c)return this._rawExtent[o].slice();if(u=this._extent[o],u)return u.slice();u=a;for(var d=u[0],h=u[1],f=0;f<l;f++){var g=this.getRawIndex(f),p=n[g];p<d&&(d=p),p>h&&(h=p)}return u=[d,h],this._extent[o]=u,u},s.prototype.getRawDataItem=function(o){var n=this.getRawIndex(o);if(this._provider.persistent)return this._provider.getItem(n);for(var a=[],l=this._chunks,c=0;c<l.length;c++)a.push(l[c][n]);return a},s.prototype.clone=function(o,n){var a=new s,l=this._chunks,c=o&&reduce(o,function(d,h){return d[h]=!0,d},{});if(c)for(var u=0;u<l.length;u++)a._chunks[u]=c[u]?cloneChunk(l[u]):l[u];else a._chunks=l;return this._copyCommonProps(a),n||(a._indices=this._cloneIndices()),a._updateGetRawIdx(),a},s.prototype._copyCommonProps=function(o){o._count=this._count,o._rawCount=this._rawCount,o._provider=this._provider,o._dimensions=this._dimensions,o._extent=clone$4(this._extent),o._rawExtent=clone$4(this._rawExtent)},s.prototype._cloneIndices=function(){if(this._indices){var o=this._indices.constructor,n=void 0;if(o===Array){var a=this._indices.length;n=new o(a);for(var l=0;l<a;l++)n[l]=this._indices[l]}else n=new o(this._indices);return n}return null},s.prototype._getRawIdxIdentity=function(o){return o},s.prototype._getRawIdx=function(o){return o<this._count&&o>=0?this._indices[o]:-1},s.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},s.internalField=function(){function o(n,a,l,c){return parseDataValue(n[c],this._dimensions[c])}defaultDimValueGetters={arrayRows:o,objectRows:function(n,a,l,c){return parseDataValue(n[a],this._dimensions[c])},keyedColumns:o,original:function(n,a,l,c){var u=n&&(n.value==null?n:n.value);return parseDataValue(u instanceof Array?u[c]:u,this._dimensions[c])},typedArray:function(n,a,l,c){return n[c]}}}(),s}(),SourceManager=function(){function s(o){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=o}return s.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},s.prototype._setLocalSource=function(o,n){this._sourceList=o,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},s.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},s.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},s.prototype._createSource=function(){this._setLocalSource([],[]);var o=this._sourceHost,n=this._getUpstreamSourceManagers(),a=!!n.length,l,c;if(isSeries(o)){var u=o,d=void 0,h=void 0,f=void 0;if(a){var g=n[0];g.prepareSource(),f=g.getSource(),d=f.data,h=f.sourceFormat,c=[g._getVersionSign()]}else d=u.get("data",!0),h=isTypedArray(d)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,c=[];var p=this._getSourceMetaRawOption()||{},v=f&&f.metaRawOption||{},b=retrieve2(p.seriesLayoutBy,v.seriesLayoutBy)||null,_=retrieve2(p.sourceHeader,v.sourceHeader),w=retrieve2(p.dimensions,v.dimensions),x=b!==v.seriesLayoutBy||!!_!=!!v.sourceHeader||w;l=x?[createSource(d,{seriesLayoutBy:b,sourceHeader:_,dimensions:w},h)]:[]}else{var S=o;if(a){var C=this._applyTransform(n);l=C.sourceList,c=C.upstreamSignList}else{var T=S.get("source",!0);l=[createSource(T,this._getSourceMetaRawOption(),null)],c=[]}}process.env.NODE_ENV!=="production"&&assert(l&&c),this._setLocalSource(l,c)},s.prototype._applyTransform=function(o){var n=this._sourceHost,a=n.get("transform",!0),l=n.get("fromTransformResult",!0);if(process.env.NODE_ENV!=="production"&&assert(l!=null||a!=null),l!=null){var c="";o.length!==1&&(process.env.NODE_ENV!=="production"&&(c="When using `fromTransformResult`, there should be only one upstream dataset"),doThrow(c))}var u,d=[],h=[];return each$f(o,function(f){f.prepareSource();var g=f.getSource(l||0),p="";l!=null&&!g&&(process.env.NODE_ENV!=="production"&&(p="Can not retrieve result by `fromTransformResult`: "+l),doThrow(p)),d.push(g),h.push(f._getVersionSign())}),a?u=applyDataTransform(a,d,{datasetIndex:n.componentIndex}):l!=null&&(u=[cloneSourceShallow(d[0])]),{sourceList:u,upstreamSignList:h}},s.prototype._isDirty=function(){if(this._dirty)return!0;for(var o=this._getUpstreamSourceManagers(),n=0;n<o.length;n++){var a=o[n];if(a._isDirty()||this._upstreamSignList[n]!==a._getVersionSign())return!0}},s.prototype.getSource=function(o){o=o||0;var n=this._sourceList[o];if(!n){var a=this._getUpstreamSourceManagers();return a[0]&&a[0].getSource(o)}return n},s.prototype.getSharedDataStore=function(o){process.env.NODE_ENV!=="production"&&assert(isSeries(this._sourceHost),"Can only call getDataStore on series source manager.");var n=o.makeStoreSchema();return this._innerGetDataStore(n.dimensions,o.source,n.hash)},s.prototype._innerGetDataStore=function(o,n,a){var l=0,c=this._storeList,u=c[l];u||(u=c[l]={});var d=u[a];if(!d){var h=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&h?d=h._innerGetDataStore(o,n,a):(d=new DataStore,d.initData(new DefaultDataProvider(n,o.length),o)),u[a]=d}return d},s.prototype._getUpstreamSourceManagers=function(){var o=this._sourceHost;if(isSeries(o)){var n=querySeriesUpstreamDatasetModel(o);return n?[n.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(o),function(a){return a.getSourceManager()})},s.prototype._getSourceMetaRawOption=function(){var o=this._sourceHost,n,a,l;if(isSeries(o))n=o.get("seriesLayoutBy",!0),a=o.get("sourceHeader",!0),l=o.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var c=o;n=c.get("seriesLayoutBy",!0),a=c.get("sourceHeader",!0),l=c.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:a,dimensions:l}},s}();function disableTransformOptionMerge(s){var o=s.option.transform;o&&setAsPrimitive(s.option.transform)}function isSeries(s){return s.mainType==="series"}function doThrow(s){throw new Error(s)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(s){var o=s.lineHeight;return o==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(o+"")+"px"}function getTooltipTextStyle(s,o){var n=s.color||"#6e7079",a=s.fontSize||12,l=s.fontWeight||"400",c=s.color||"#464646",u=s.fontSize||14,d=s.fontWeight||"900";return o==="html"?{nameStyle:"font-size:"+encodeHTML(a+"")+"px;color:"+encodeHTML(n)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(u+"")+"px;color:"+encodeHTML(c)+";font-weight:"+encodeHTML(d+"")}:{nameStyle:{fontSize:a,fill:n,fontWeight:l},valueStyle:{fontSize:u,fill:c,fontWeight:d}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(s,o){return o.type=s,o}function isSectionFragment(s){return s.type==="section"}function getBuilder(s){return isSectionFragment(s)?buildSection:buildNameValue}function getBlockGapLevel(s){if(isSectionFragment(s)){var o=0,n=s.blocks.length,a=n>1||n>0&&!s.noHeader;return each$f(s.blocks,function(l){var c=getBlockGapLevel(l);c>=o&&(o=c+ +(a&&(!c||isSectionFragment(l)&&!l.noHeader)))}),o}return 0}function buildSection(s,o,n,a){var l=o.noHeader,c=getGap(getBlockGapLevel(o)),u=[],d=o.blocks||[];assert(!d||isArray$1(d)),d=d||[];var h=s.orderMode;if(o.sortBlocks&&h){d=d.slice();var f={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(f,h)){var g=new SortOrderComparator(f[h],null);d.sort(function(w,x){return g.evaluate(w.sortParam,x.sortParam)})}else h==="seriesDesc"&&d.reverse()}each$f(d,function(w,x){var S=o.valueFormatter,C=getBuilder(w)(S?extend(extend({},s),{valueFormatter:S}):s,w,x>0?c.html:0,a);C!=null&&u.push(C)});var p=s.renderMode==="richText"?u.join(c.richText):wrapBlockHTML(a,u.join(""),l?n:c.html);if(l)return p;var v=makeValueReadable(o.header,"ordinal",s.useUTC),b=getTooltipTextStyle(a,s.renderMode).nameStyle,_=getTooltipLineHeight(a);return s.renderMode==="richText"?wrapInlineNameRichText(s,v,b)+c.richText+p:wrapBlockHTML(a,'<div style="'+b+";"+_+';">'+encodeHTML(v)+"</div>"+p,n)}function buildNameValue(s,o,n,a){var l=s.renderMode,c=o.noName,u=o.noValue,d=!o.markerType,h=o.name,f=s.useUTC,g=o.valueFormatter||s.valueFormatter||function(R){return R=isArray$1(R)?R:[R],map$1(R,function(A,M){return makeValueReadable(A,isArray$1(b)?b[M]:b,f)})};if(!(c&&u)){var p=d?"":s.markupStyleCreator.makeTooltipMarker(o.markerType,o.markerColor||"#333",l),v=c?"":makeValueReadable(h,"ordinal",f),b=o.valueType,_=u?[]:g(o.value,o.dataIndex),w=!d||!c,x=!d&&c,S=getTooltipTextStyle(a,l),C=S.nameStyle,T=S.valueStyle;return l==="richText"?(d?"":p)+(c?"":wrapInlineNameRichText(s,v,C))+(u?"":wrapInlineValueRichText(s,_,w,x,T)):wrapBlockHTML(a,(d?"":p)+(c?"":wrapInlineNameHTML(v,!d,C))+(u?"":wrapInlineValueHTML(_,w,x,T)),n)}}function buildTooltipMarkup(s,o,n,a,l,c){if(s){var u=getBuilder(s),d={useUTC:l,renderMode:n,orderMode:a,markupStyleCreator:o,valueFormatter:s.valueFormatter};return u(d,s,0,c)}}function getGap(s){return{html:HTML_GAPS[s],richText:RICH_TEXT_GAPS[s]}}function wrapBlockHTML(s,o,n){var a='<div style="clear:both"></div>',l="margin: "+n+"px 0 0",c=getTooltipLineHeight(s);return'<div style="'+l+";"+c+';">'+o+a+"</div>"}function wrapInlineNameHTML(s,o,n){var a=o?"margin-left:2px":"";return'<span style="'+n+";"+a+'">'+encodeHTML(s)+"</span>"}function wrapInlineValueHTML(s,o,n,a){var l=n?"10px":"20px",c=o?"float:right;margin-left:"+l:"";return s=isArray$1(s)?s:[s],'<span style="'+c+";"+a+'">'+map$1(s,function(u){return encodeHTML(u)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(s,o,n){return s.markupStyleCreator.wrapRichTextStyle(o,n)}function wrapInlineValueRichText(s,o,n,a,l){var c=[l],u=a?10:20;return n&&c.push({padding:[0,0,0,u],align:"right"}),s.markupStyleCreator.wrapRichTextStyle(isArray$1(o)?o.join("  "):o,c)}function retrieveVisualColorForTooltipMarker(s,o){var n=s.getData().getItemVisual(o,"style"),a=n[s.visualDrawType];return convertToColorString(a)}function getPaddingFromTooltipModel(s,o){var n=s.get("padding");return n??(o==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function s(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return s.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},s.prototype.makeTooltipMarker=function(o,n,a){var l=a==="richText"?this._generateStyleName():null,c=getTooltipMarker({color:n,type:o,renderMode:a,markerId:l});return isString$2(c)?c:(process.env.NODE_ENV!=="production"&&assert(l),this.richTextStyles[l]=c.style,c.content)},s.prototype.wrapRichTextStyle=function(o,n){var a={};isArray$1(n)?each$f(n,function(c){return extend(a,c)}):extend(a,n);var l=this._generateStyleName();return this.richTextStyles[l]=a,"{"+l+"|"+o+"}"},s}();function defaultSeriesFormatTooltip(s){var o=s.series,n=s.dataIndex,a=s.multipleSeries,l=o.getData(),c=l.mapDimensionsAll("defaultedTooltip"),u=c.length,d=o.getRawValue(n),h=isArray$1(d),f=retrieveVisualColorForTooltipMarker(o,n),g,p,v,b;if(u>1||h&&!u){var _=formatTooltipArrayValue(d,o,n,c,f);g=_.inlineValues,p=_.inlineValueTypes,v=_.blocks,b=_.inlineValues[0]}else if(u){var w=l.getDimensionInfo(c[0]);b=g=retrieveRawValue(l,n,c[0]),p=w.type}else b=g=h?d[0]:d;var x=isNameSpecified(o),S=x&&o.name||"",C=l.getName(n),T=a?S:C;return createTooltipMarkup("section",{header:S,noHeader:a||!x,sortParam:b,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:f,name:T,noName:!trim$1(T),value:g,valueType:p,dataIndex:n})].concat(v||[])})}function formatTooltipArrayValue(s,o,n,a,l){var c=o.getData(),u=reduce(s,function(p,v,b){var _=c.getDimensionInfo(b);return p=p||_&&_.tooltip!==!1&&_.displayName!=null},!1),d=[],h=[],f=[];a.length?each$f(a,function(p){g(retrieveRawValue(c,n,p),p)}):each$f(s,g);function g(p,v){var b=c.getDimensionInfo(v);!b||b.otherDims.tooltip===!1||(u?f.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:b.displayName,value:p,valueType:b.type})):(d.push(p),h.push(b.type)))}return{inlineValues:d,inlineValueTypes:h,blocks:f}}var inner$k=makeInner();function getSelectionKey(s,o){return s.getName(o)||s.getId(o)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return o.prototype.init=function(n,a,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,l);var c=inner$k(this).sourceManager=new SourceManager(this);c.prepareSource();var u=this.getInitialData(n,l);wrapData(u,this),this.dataTask.context.data=u,process.env.NODE_ENV!=="production"&&assert(u,"getInitialData returned invalid data."),inner$k(this).dataBeforeProcessed=u,autoSeriesName(this),this._initSelectedMapFromData(u)},o.prototype.mergeDefaultAndTheme=function(n,a){var l=fetchLayoutMode(this),c=l?getLayoutParams(n):{},u=this.subType;ComponentModel.hasClass(u)&&(u+="Series"),merge(n,a.getTheme().get(this.subType)),merge(n,this.getDefaultOption()),defaultEmphasis(n,"label",["show"]),this.fillDataTextStyle(n.data),l&&mergeLayoutParam(n,c,l)},o.prototype.mergeOption=function(n,a){n=merge(this.option,n,!0),this.fillDataTextStyle(n.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,n,l);var c=inner$k(this).sourceManager;c.dirty(),c.prepareSource();var u=this.getInitialData(n,a);wrapData(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,inner$k(this).dataBeforeProcessed=u,autoSeriesName(this),this._initSelectedMapFromData(u)},o.prototype.fillDataTextStyle=function(n){if(n&&!isTypedArray(n))for(var a=["show"],l=0;l<n.length;l++)n[l]&&n[l].label&&defaultEmphasis(n[l],"label",a)},o.prototype.getInitialData=function(n,a){},o.prototype.appendData=function(n){var a=this.getRawData();a.appendData(n.data)},o.prototype.getData=function(n){var a=getCurrentTask(this);if(a){var l=a.context.data;return n==null||!l.getLinkedData?l:l.getLinkedData(n)}else return inner$k(this).data},o.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},o.prototype.setData=function(n){var a=getCurrentTask(this);if(a){var l=a.context;l.outputData=n,a!==this.dataTask&&(l.data=n)}inner$k(this).data=n},o.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return createHashMap(n)},o.prototype.getSourceManager=function(){return inner$k(this).sourceManager},o.prototype.getSource=function(){return this.getSourceManager().getSource()},o.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},o.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},o.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},o.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},o.prototype.formatTooltip=function(n,a,l){return defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:a})},o.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(env.node&&!(n&&n.ssr))return!1;var a=this.getShallow("animation");return a&&this.getData().count()>this.getShallow("animationThreshold")&&(a=!1),!!a},o.prototype.restoreData=function(){this.dataTask.dirty()},o.prototype.getColorFromPalette=function(n,a,l){var c=this.ecModel,u=PaletteMixin.prototype.getColorFromPalette.call(this,n,a,l);return u||(u=c.getColorFromPalette(n,a,l)),u},o.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},o.prototype.getProgressive=function(){return this.get("progressive")},o.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},o.prototype.select=function(n,a){this._innerSelect(this.getData(a),n)},o.prototype.unselect=function(n,a){var l=this.option.selectedMap;if(l){var c=this.option.selectedMode,u=this.getData(a);if(c==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var d=0;d<n.length;d++){var h=n[d],f=getSelectionKey(u,h);l[f]=!1,this._selectedDataIndicesMap[f]=-1}}},o.prototype.toggleSelect=function(n,a){for(var l=[],c=0;c<n.length;c++)l[0]=n[c],this.isSelected(n[c],a)?this.unselect(l,a):this.select(l,a)},o.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,a=keys(n),l=[],c=0;c<a.length;c++){var u=n[a[c]];u>=0&&l.push(u)}return l},o.prototype.isSelected=function(n,a){var l=this.option.selectedMap;if(!l)return!1;var c=this.getData(a);return(l==="all"||l[getSelectionKey(c,n)])&&!c.getItemModel(n).get(["select","disabled"])},o.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},o.prototype._innerSelect=function(n,a){var l,c,u=this.option,d=u.selectedMode,h=a.length;if(!(!d||!h)){if(d==="series")u.selectedMap="all";else if(d==="multiple"){isObject$3(u.selectedMap)||(u.selectedMap={});for(var f=u.selectedMap,g=0;g<h;g++){var p=a[g],v=getSelectionKey(n,p);f[v]=!0,this._selectedDataIndicesMap[v]=n.getRawIndex(p)}}else if(d==="single"||d===!0){var b=a[h-1],v=getSelectionKey(n,b);u.selectedMap=(l={},l[v]=!0,l),this._selectedDataIndicesMap=(c={},c[v]=n.getRawIndex(b),c)}}},o.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var a=[];n.hasItemOption&&n.each(function(l){var c=n.getRawDataItem(l);c&&c.selected&&a.push(l)}),a.length>0&&this._innerSelect(n,a)}},o.registerClass=function(n){return ComponentModel.registerClass(n)},o.protoInitialize=function(){var n=o.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),o}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(s){var o=s.name;isNameSpecified(s)||(s.name=getSeriesAutoName(s)||o)}function getSeriesAutoName(s){var o=s.getRawData(),n=o.mapDimensionsAll("seriesName"),a=[];return each$f(n,function(l){var c=o.getDimensionInfo(l);c.displayName&&a.push(c.displayName)}),a.join(" ")}function dataTaskCount(s){return s.model.getRawData().count()}function dataTaskReset(s){var o=s.model;return o.setData(o.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(s,o){o.outputData&&s.end>o.outputData.count()&&o.model.getRawData().cloneShallow(o.outputData)}function wrapData(s,o){each$f(concatArray(s.CHANGABLE_METHODS,s.DOWNSAMPLE_METHODS),function(n){s.wrapMethod(n,curry$1(onDataChange,o))})}function onDataChange(s,o){var n=getCurrentTask(s);return n&&n.setOutputEnd((o||this).count()),o}function getCurrentTask(s){var o=(s.ecModel||{}).scheduler,n=o&&o.getPipeline(s.uid);if(n){var a=n.currentTask;if(a){var l=a.agentStubMap;l&&(a=l.get(s.uid))}return a}}var ComponentView=function(){function s(){this.group=new Group$3,this.uid=getUID("viewComponent")}return s.prototype.init=function(o,n){},s.prototype.render=function(o,n,a,l){},s.prototype.dispose=function(o,n){},s.prototype.updateView=function(o,n,a,l){},s.prototype.updateLayout=function(o,n,a,l){},s.prototype.updateVisual=function(o,n,a,l){},s.prototype.toggleBlurSeries=function(o,n,a){},s.prototype.eachRendered=function(o){var n=this.group;n&&n.traverse(o)},s}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var s=makeInner();return function(o){var n=s(o),a=o.pipelineContext,l=!!n.large,c=!!n.progressiveRender,u=n.large=!!(a&&a.large),d=n.progressiveRender=!!(a&&a.progressiveRender);return(l!==u||c!==d)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function s(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return s.prototype.init=function(o,n){},s.prototype.render=function(o,n,a,l){if(process.env.NODE_ENV!=="production")throw new Error("render method must been implemented")},s.prototype.highlight=function(o,n,a,l){var c=o.getData(l&&l.dataType);if(!c){process.env.NODE_ENV!=="production"&&error("Unknown dataType "+l.dataType);return}toggleHighlight(c,l,"emphasis")},s.prototype.downplay=function(o,n,a,l){var c=o.getData(l&&l.dataType);if(!c){process.env.NODE_ENV!=="production"&&error("Unknown dataType "+l.dataType);return}toggleHighlight(c,l,"normal")},s.prototype.remove=function(o,n){this.group.removeAll()},s.prototype.dispose=function(o,n){},s.prototype.updateView=function(o,n,a,l){this.render(o,n,a,l)},s.prototype.updateLayout=function(o,n,a,l){this.render(o,n,a,l)},s.prototype.updateVisual=function(o,n,a,l){this.render(o,n,a,l)},s.prototype.eachRendered=function(o){traverseElements(this.group,o)},s.markUpdateMethod=function(o,n){inner$j(o).updateMethod=n},s.protoInitialize=function(){var o=s.prototype;o.type="chart"}(),s}();function elSetState(s,o,n){s&&isHighDownDispatcher(s)&&(o==="emphasis"?enterEmphasis:leaveEmphasis)(s,n)}function toggleHighlight(s,o,n){var a=queryDataIndex(s,o),l=o&&o.highlightKey!=null?getHighlightDigit(o.highlightKey):null;a!=null?each$f(normalizeToArray(a),function(c){elSetState(s.getItemGraphicEl(c),n,l)}):s.eachItemGraphicEl(function(c){elSetState(c,n,l)})}enableClassExtend(ChartView,["dispose"]);enableClassManagement(ChartView);function renderTaskPlan(s){return renderPlanner(s.model)}function renderTaskReset(s){var o=s.model,n=s.ecModel,a=s.api,l=s.payload,c=o.pipelineContext.progressiveRender,u=s.view,d=l&&inner$j(l).updateMethod,h=c?"incrementalPrepareRender":d&&u[d]?d:"render";return h!=="render"&&u[h](o,n,a,l),progressMethodMap[h]}var progressMethodMap={incrementalPrepareRender:{progress:function(s,o){o.view.incrementalRender(s,o.model,o.ecModel,o.api,o.payload)}},render:{forceFirstProgress:!0,progress:function(s,o){o.view.render(o.model,o.ecModel,o.api,o.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(s,o,n){var a,l=0,c=0,u=null,d,h,f,g;o=o||0;function p(){c=new Date().getTime(),u=null,s.apply(h,f||[])}var v=function(){for(var b=[],_=0;_<arguments.length;_++)b[_]=arguments[_];a=new Date().getTime(),h=this,f=b;var w=g||o,x=g||n;g=null,d=a-(x?l:c)-w,clearTimeout(u),x?u=setTimeout(p,w):d>=0?p():u=setTimeout(p,-d),l=a};return v.clear=function(){u&&(clearTimeout(u),u=null)},v.debounceNextCall=function(b){g=b},v}function createOrUpdate(s,o,n,a){var l=s[o];if(l){var c=l[ORIGIN_METHOD]||l,u=l[THROTTLE_TYPE],d=l[RATE];if(d!==n||u!==a){if(n==null||!a)return s[o]=c;l=s[o]=throttle(c,n,a==="debounce"),l[ORIGIN_METHOD]=c,l[THROTTLE_TYPE]=a,l[RATE]=n}return l}}function clear$1(s,o){var n=s[o];n&&n[ORIGIN_METHOD]&&(n.clear&&n.clear(),s[o]=n[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(s,o){var n=s.visualStyleMapper||defaultStyleMappers[o];return n||(console.warn("Unknown style type '"+o+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(s,o){var n=s.visualDrawType||defaultColorKey[o];return n||(console.warn("Unknown style type '"+o+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(s,o){var n=s.getData(),a=s.visualStyleAccessPath||"itemStyle",l=s.getModel(a),c=getStyleMapper(s,a),u=c(l),d=l.getShallow("decal");d&&(n.setVisual("decal",d),d.dirty=!0);var h=getDefaultColorKey(s,a),f=u[h],g=isFunction$1(f)?f:null,p=u.fill==="auto"||u.stroke==="auto";if(!u[h]||g||p){var v=s.getColorFromPalette(s.name,null,o.getSeriesCount());u[h]||(u[h]=v,n.setVisual("colorFromPalette",!0)),u.fill=u.fill==="auto"||isFunction$1(u.fill)?v:u.fill,u.stroke=u.stroke==="auto"||isFunction$1(u.stroke)?v:u.stroke}if(n.setVisual("style",u),n.setVisual("drawType",h),!o.isSeriesFiltered(s)&&g)return n.setVisual("colorFromPalette",!1),{dataEach:function(b,_){var w=s.getDataParams(_),x=extend({},u);x[h]=g(w),b.setItemVisual(_,"style",x)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(s,o){if(!(s.ignoreStyleOnData||o.isSeriesFiltered(s))){var n=s.getData(),a=s.visualStyleAccessPath||"itemStyle",l=getStyleMapper(s,a),c=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(u,d){var h=u.getRawDataItem(d);if(h&&h[a]){sharedModel.option=h[a];var f=l(sharedModel),g=u.ensureUniqueItemVisual(d,"style");extend(g,f),sharedModel.option.decal&&(u.setItemVisual(d,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),c in f&&u.setItemVisual(d,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(s){var o=createHashMap();s.eachSeries(function(n){var a=n.getColorBy();if(!n.isColorBySeries()){var l=n.type+"-"+a,c=o.get(l);c||(c={},o.set(l,c)),inner$i(n).scope=c}}),s.eachSeries(function(n){if(!(n.isColorBySeries()||s.isSeriesFiltered(n))){var a=n.getRawData(),l={},c=n.getData(),u=inner$i(n).scope,d=n.visualStyleAccessPath||"itemStyle",h=getDefaultColorKey(n,d);c.each(function(f){var g=c.getRawIndex(f);l[g]=f}),a.each(function(f){var g=l[f],p=c.getItemVisual(g,"colorFromPalette");if(p){var v=c.ensureUniqueItemVisual(g,"style"),b=a.getName(f)||f+"",_=a.count();v[h]=n.getColorFromPalette(b,u,_)}})}})}},PI$5=Math.PI;function defaultLoading(s,o){o=o||{},defaults(o,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Group$3,a=new Rect$2({style:{fill:o.maskColor},zlevel:o.zlevel,z:1e4});n.add(a);var l=new ZRText({style:{text:o.text,fill:o.textColor,fontSize:o.fontSize,fontWeight:o.fontWeight,fontStyle:o.fontStyle,fontFamily:o.fontFamily},zlevel:o.zlevel,z:10001}),c=new Rect$2({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:o.zlevel,z:10001});n.add(c);var u;return o.showSpinner&&(u=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:o.spinnerRadius},style:{stroke:o.color,lineCap:"round",lineWidth:o.lineWidth},zlevel:o.zlevel,z:10001}),u.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),n.add(u)),n.resize=function(){var d=l.getBoundingRect().width,h=o.showSpinner?o.spinnerRadius:0,f=(s.getWidth()-h*2-(o.showSpinner&&d?10:0)-d)/2-(o.showSpinner&&d?0:5+d/2)+(o.showSpinner?0:d/2)+(d?0:h),g=s.getHeight()/2;o.showSpinner&&u.setShape({cx:f,cy:g}),c.setShape({x:f-h,y:g-h,width:h*2,height:h*2}),a.setShape({x:0,y:0,width:s.getWidth(),height:s.getHeight()})},n.resize(),n}var Scheduler=function(){function s(o,n,a,l){this._stageTaskMap=createHashMap(),this.ecInstance=o,this.api=n,a=this._dataProcessorHandlers=a.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=a.concat(l)}return s.prototype.restoreData=function(o,n){o.restoreData(n),this._stageTaskMap.each(function(a){var l=a.overallTask;l&&l.dirty()})},s.prototype.getPerformArgs=function(o,n){if(o.__pipeline){var a=this._pipelineMap.get(o.__pipeline.id),l=a.context,c=!n&&a.progressiveEnabled&&(!l||l.progressiveRender)&&o.__idxInPipeline>a.blockIndex,u=c?a.step:null,d=l&&l.modDataCount,h=d!=null?Math.ceil(d/u):null;return{step:u,modBy:h,modDataCount:d}}},s.prototype.getPipeline=function(o){return this._pipelineMap.get(o)},s.prototype.updateStreamModes=function(o,n){var a=this._pipelineMap.get(o.uid),l=o.getData(),c=l.count(),u=a.progressiveEnabled&&n.incrementalPrepareRender&&c>=a.threshold,d=o.get("large")&&c>=o.get("largeThreshold"),h=o.get("progressiveChunkMode")==="mod"?c:null;o.pipelineContext=a.context={progressiveRender:u,modDataCount:h,large:d}},s.prototype.restorePipelines=function(o){var n=this,a=n._pipelineMap=createHashMap();o.eachSeries(function(l){var c=l.getProgressive(),u=l.uid;a.set(u,{id:u,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:c&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(c||700),count:0}),n._pipe(l,l.dataTask)})},s.prototype.prepareStageTasks=function(){var o=this._stageTaskMap,n=this.api.getModel(),a=this.api;each$f(this._allHandlers,function(l){var c=o.get(l.uid)||o.set(l.uid,{}),u="";process.env.NODE_ENV!=="production"&&(u='"reset" and "overallReset" must not be both specified.'),assert(!(l.reset&&l.overallReset),u),l.reset&&this._createSeriesStageTask(l,c,n,a),l.overallReset&&this._createOverallStageTask(l,c,n,a)},this)},s.prototype.prepareView=function(o,n,a,l){var c=o.renderTask,u=c.context;u.model=n,u.ecModel=a,u.api=l,c.__block=!o.incrementalPrepareRender,this._pipe(n,c)},s.prototype.performDataProcessorTasks=function(o,n){this._performStageTasks(this._dataProcessorHandlers,o,n,{block:!0})},s.prototype.performVisualTasks=function(o,n,a){this._performStageTasks(this._visualHandlers,o,n,a)},s.prototype._performStageTasks=function(o,n,a,l){l=l||{};var c=!1,u=this;each$f(o,function(h,f){if(!(l.visualType&&l.visualType!==h.visualType)){var g=u._stageTaskMap.get(h.uid),p=g.seriesTaskMap,v=g.overallTask;if(v){var b,_=v.agentStubMap;_.each(function(x){d(l,x)&&(x.dirty(),b=!0)}),b&&v.dirty(),u.updatePayload(v,a);var w=u.getPerformArgs(v,l.block);_.each(function(x){x.perform(w)}),v.perform(w)&&(c=!0)}else p&&p.each(function(x,S){d(l,x)&&x.dirty();var C=u.getPerformArgs(x,l.block);C.skip=!h.performRawSeries&&n.isSeriesFiltered(x.context.model),u.updatePayload(x,a),x.perform(C)&&(c=!0)})}});function d(h,f){return h.setDirty&&(!h.dirtyMap||h.dirtyMap.get(f.__pipeline.id))}this.unfinished=c||this.unfinished},s.prototype.performSeriesTasks=function(o){var n;o.eachSeries(function(a){n=a.dataTask.perform()||n}),this.unfinished=n||this.unfinished},s.prototype.plan=function(){this._pipelineMap.each(function(o){var n=o.tail;do{if(n.__block){o.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},s.prototype.updatePayload=function(o,n){n!=="remain"&&(o.context.payload=n)},s.prototype._createSeriesStageTask=function(o,n,a,l){var c=this,u=n.seriesTaskMap,d=n.seriesTaskMap=createHashMap(),h=o.seriesType,f=o.getTargetSeries;o.createOnAllSeries?a.eachRawSeries(g):h?a.eachRawSeriesByType(h,g):f&&f(a,l).each(g);function g(p){var v=p.uid,b=d.set(v,u&&u.get(v)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));b.context={model:p,ecModel:a,api:l,useClearVisual:o.isVisual&&!o.isLayout,plan:o.plan,reset:o.reset,scheduler:c},c._pipe(p,b)}},s.prototype._createOverallStageTask=function(o,n,a,l){var c=this,u=n.overallTask=n.overallTask||createTask({reset:overallTaskReset});u.context={ecModel:a,api:l,overallReset:o.overallReset,scheduler:c};var d=u.agentStubMap,h=u.agentStubMap=createHashMap(),f=o.seriesType,g=o.getTargetSeries,p=!0,v=!1,b="";process.env.NODE_ENV!=="production"&&(b='"createOnAllSeries" is not supported for "overallReset", because it will block all streams.'),assert(!o.createOnAllSeries,b),f?a.eachRawSeriesByType(f,_):g?g(a,l).each(_):(p=!1,each$f(a.getSeries(),_));function _(w){var x=w.uid,S=h.set(x,d&&d.get(x)||(v=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));S.context={model:w,overallProgress:p},S.agent=u,S.__block=p,c._pipe(w,S)}v&&u.dirty()},s.prototype._pipe=function(o,n){var a=o.uid,l=this._pipelineMap.get(a);!l.head&&(l.head=n),l.tail&&l.tail.pipe(n),l.tail=n,n.__idxInPipeline=l.count++,n.__pipeline=l},s.wrapStageHandler=function(o,n){return isFunction$1(o)&&(o={overallReset:o,seriesType:detectSeriseType(o)}),o.uid=getUID("stageHandler"),n&&(o.visualType=n),o},s}();function overallTaskReset(s){s.overallReset(s.ecModel,s.api,s.payload)}function stubReset(s){return s.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(s){return s.plan?s.plan(s.model,s.ecModel,s.api,s.payload):null}function seriesTaskReset(s){s.useClearVisual&&s.data.clearAllVisual();var o=s.resetDefines=normalizeToArray(s.reset(s.model,s.ecModel,s.api,s.payload));return o.length>1?map$1(o,function(n,a){return makeSeriesTaskProgress(a)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(s){return function(o,n){var a=n.data,l=n.resetDefines[s];if(l&&l.dataEach)for(var c=o.start;c<o.end;c++)l.dataEach(a,c);else l&&l.progress&&l.progress(o,a)}}function seriesTaskCount(s){return s.data.count()}function detectSeriseType(s){seriesType=null;try{s(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(s){seriesType=s};ecModelMock.eachComponent=function(s){s.mainType==="series"&&s.subType&&(seriesType=s.subType)};function mockMethods(s,o){for(var n in o.prototype)s[n]=noop$1}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function s(){}return s.prototype.normalizeQuery=function(o){var n={},a={},l={};if(isString$2(o)){var c=parseClassType(o);n.mainType=c.main||null,n.subType=c.sub||null}else{var u=["Index","Name","Id"],d={name:1,dataIndex:1,dataType:1};each$f(o,function(h,f){for(var g=!1,p=0;p<u.length;p++){var v=u[p],b=f.lastIndexOf(v);if(b>0&&b===f.length-v.length){var _=f.slice(0,b);_!=="data"&&(n.mainType=_,n[v.toLowerCase()]=h,g=!0)}}d.hasOwnProperty(f)&&(a[f]=h,g=!0),g||(l[f]=h)})}return{cptQuery:n,dataQuery:a,otherQuery:l}},s.prototype.filter=function(o,n){var a=this.eventInfo;if(!a)return!0;var l=a.targetEl,c=a.packedEvent,u=a.model,d=a.view;if(!u||!d)return!0;var h=n.cptQuery,f=n.dataQuery;return g(h,u,"mainType")&&g(h,u,"subType")&&g(h,u,"index","componentIndex")&&g(h,u,"name")&&g(h,u,"id")&&g(f,c,"name")&&g(f,c,"dataIndex")&&g(f,c,"dataType")&&(!d.filterForExposedEvent||d.filterForExposedEvent(o,n.otherQuery,l,c));function g(p,v,b,_){return p[b]==null||v[_||b]===p[b]}},s.prototype.afterTrigger=function(){this.eventInfo=null},s}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(s,o){var n=s.getData();if(s.legendIcon&&n.setVisual("legendIcon",s.legendIcon),!s.hasSymbolVisual)return;for(var a={},l={},c=!1,u=0;u<SYMBOL_PROPS_WITH_CB.length;u++){var d=SYMBOL_PROPS_WITH_CB[u],h=s.get(d);isFunction$1(h)?(c=!0,l[d]=h):a[d]=h}if(a.symbol=a.symbol||s.defaultSymbol,n.setVisual(extend({legendIcon:s.legendIcon||a.symbol,symbolKeepAspect:s.get("symbolKeepAspect")},a)),o.isSeriesFiltered(s))return;var f=keys(l);function g(p,v){for(var b=s.getRawValue(v),_=s.getDataParams(v),w=0;w<f.length;w++){var x=f[w];p.setItemVisual(v,x,l[x](b,_))}}return{dataEach:c?g:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(s,o){if(!s.hasSymbolVisual||o.isSeriesFiltered(s))return;var n=s.getData();function a(l,c){for(var u=l.getItemModel(c),d=0;d<SYMBOL_PROPS.length;d++){var h=SYMBOL_PROPS[d],f=u.getShallow(h,!0);f!=null&&l.setItemVisual(c,h,f)}}return{dataEach:n.hasItemOption?a:null}}};function getItemVisualFromData(s,o,n){switch(n){case"color":var a=s.getItemVisual(o,"style");return a[s.getVisual("drawType")];case"opacity":return s.getItemVisual(o,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return s.getItemVisual(o,n);default:process.env.NODE_ENV!=="production"&&console.warn("Unknown visual type "+n)}}function getVisualFromData(s,o){switch(o){case"color":var n=s.getVisual("style");return n[s.getVisual("drawType")];case"opacity":return s.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return s.getVisual(o);default:process.env.NODE_ENV!=="production"&&console.warn("Unknown visual type "+o)}}function setItemVisualFromData(s,o,n,a){switch(n){case"color":var l=s.ensureUniqueItemVisual(o,"style");l[s.getVisual("drawType")]=a,s.setItemVisual(o,"colorFromPalette",!1);break;case"opacity":s.ensureUniqueItemVisual(o,"style").opacity=a;break;case"symbol":case"symbolSize":case"liftZ":s.setItemVisual(o,n,a);break;default:process.env.NODE_ENV!=="production"&&console.warn("Unknown visual type "+n)}}function createLegacyDataSelectAction(s,o){function n(a,l){var c=[];return a.eachComponent({mainType:"series",subType:s,query:l},function(u){c.push(u.seriesIndex)}),c}each$f([[s+"ToggleSelect","toggleSelect"],[s+"Select","select"],[s+"UnSelect","unselect"]],function(a){o(a[0],function(l,c,u){l=extend({},l),process.env.NODE_ENV!=="production"&&deprecateReplaceLog(l.type,a[1]),u.dispatchAction(extend(l,{type:a[1],seriesIndex:n(c,l)}))})})}function handleSeriesLegacySelectEvents(s,o,n,a,l){var c=s+o;n.isSilent(c)||(process.env.NODE_ENV!=="production"&&deprecateLog("event "+c+" is deprecated."),a.eachComponent({mainType:"series",subType:"pie"},function(u){for(var d=u.seriesIndex,h=u.option.selectedMap,f=l.selected,g=0;g<f.length;g++)if(f[g].seriesIndex===d){var p=u.getData(),v=queryDataIndex(p,l.fromActionPayload);n.trigger(c,{type:c,seriesId:u.id,name:isArray$1(v)?p.getName(v[0]):p.getName(v),selected:isString$2(h)?h:extend({},h)})}}))}function handleLegacySelectEvents(s,o,n){s.on("selectchanged",function(a){var l=n.getModel();a.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",o,l,a),handleSeriesLegacySelectEvents("pie","selectchanged",o,l,a)):a.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",o,l,a),handleSeriesLegacySelectEvents("pie","selected",o,l,a)):a.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",o,l,a),handleSeriesLegacySelectEvents("pie","unselected",o,l,a))})}function findEventDispatcher(s,o,n){for(var a;s&&!(o(s)&&(a=s,n));)s=s.__hostTarget||s.parent;return a}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function s(){this._id="__ec_inner_"+wmUniqueIndex++}return s.prototype.get=function(o){return this._guard(o)[this._id]},s.prototype.set=function(o,n){var a=this._guard(o);return supportDefineProperty?Object.defineProperty(a,this._id,{value:n,enumerable:!1,configurable:!0}):a[this._id]=n,this},s.prototype.delete=function(o){return this.has(o)?(delete this._guard(o)[this._id],!0):!1},s.prototype.has=function(o){return!!this._guard(o)[this._id]},s.prototype._guard=function(o){if(o!==Object(o))throw TypeError("Value of WeakMap is not a non-null object.");return o},s}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(s,o){var n=o.cx,a=o.cy,l=o.width/2,c=o.height/2;s.moveTo(n,a-c),s.lineTo(n+l,a+c),s.lineTo(n-l,a+c),s.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(s,o){var n=o.cx,a=o.cy,l=o.width/2,c=o.height/2;s.moveTo(n,a-c),s.lineTo(n+l,a),s.lineTo(n,a+c),s.lineTo(n-l,a),s.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(s,o){var n=o.x,a=o.y,l=o.width/5*3,c=Math.max(l,o.height),u=l/2,d=u*u/(c-u),h=a-c+u+d,f=Math.asin(d/u),g=Math.cos(f)*u,p=Math.sin(f),v=Math.cos(f),b=u*.6,_=u*.7;s.moveTo(n-g,h+d),s.arc(n,h,u,Math.PI-f,Math.PI*2+f),s.bezierCurveTo(n+g-p*b,h+d+v*b,n,a-_,n,a),s.bezierCurveTo(n,a-_,n-g+p*b,h+d+v*b,n-g,h+d),s.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(s,o){var n=o.height,a=o.width,l=o.x,c=o.y,u=a/3*2;s.moveTo(l,c),s.lineTo(l+u,c+n),s.lineTo(l,c+n/4*3),s.lineTo(l-u,c+n),s.lineTo(l,c),s.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(s,o,n,a,l){l.x1=s,l.y1=o+a/2,l.x2=s+n,l.y2=o+a/2},rect:function(s,o,n,a,l){l.x=s,l.y=o,l.width=n,l.height=a},roundRect:function(s,o,n,a,l){l.x=s,l.y=o,l.width=n,l.height=a,l.r=Math.min(n,a)/4},square:function(s,o,n,a,l){var c=Math.min(n,a);l.x=s,l.y=o,l.width=c,l.height=c},circle:function(s,o,n,a,l){l.cx=s+n/2,l.cy=o+a/2,l.r=Math.min(n,a)/2},diamond:function(s,o,n,a,l){l.cx=s+n/2,l.cy=o+a/2,l.width=n,l.height=a},pin:function(s,o,n,a,l){l.x=s+n/2,l.y=o+a/2,l.width=n,l.height=a},arrow:function(s,o,n,a,l){l.x=s+n/2,l.y=o+a/2,l.width=n,l.height=a},triangle:function(s,o,n,a,l){l.cx=s+n/2,l.cy=o+a/2,l.width=n,l.height=a}},symbolBuildProxies={};each$f(symbolCtors,function(s,o){symbolBuildProxies[o]=new s});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(s,o,n){var a=calculateTextPosition(s,o,n),l=this.shape;return l&&l.symbolType==="pin"&&o.position==="inside"&&(a.y=n.y+n.height*.4),a},buildPath:function(s,o,n){var a=o.symbolType;if(a!=="none"){var l=symbolBuildProxies[a];l||(a="rect",l=symbolBuildProxies[a]),symbolShapeMakers[a](o.x,o.y,o.width,o.height,l.shape),l.buildPath(s,l.shape,n)}}});function symbolPathSetColor(s,o){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=s,n.fill=o||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=s:n.fill=s,this.markRedraw()}}function createSymbol$1(s,o,n,a,l,c,u){var d=s.indexOf("empty")===0;d&&(s=s.substr(5,1).toLowerCase()+s.substr(6));var h;return s.indexOf("image://")===0?h=makeImage(s.slice(8),new BoundingRect(o,n,a,l),u?"center":"cover"):s.indexOf("path://")===0?h=makePath(s.slice(7),{},new BoundingRect(o,n,a,l),u?"center":"cover"):h=new SymbolClz({shape:{symbolType:s,x:o,y:n,width:a,height:l}}),h.__isEmptyBrush=d,h.setColor=symbolPathSetColor,c&&h.setColor(c),h}function normalizeSymbolSize(s){return isArray$1(s)||(s=[+s,+s]),[s[0]||0,s[1]||0]}function normalizeSymbolOffset(s,o){if(s!=null)return isArray$1(s)||(s=[s,s]),[parsePercent(s[0],o[0])||0,parsePercent(retrieve2(s[1],s[0]),o[1])||0]}function isSafeNum(s){return isFinite(s)}function createLinearGradient(s,o,n){var a=o.x==null?0:o.x,l=o.x2==null?1:o.x2,c=o.y==null?0:o.y,u=o.y2==null?0:o.y2;o.global||(a=a*n.width+n.x,l=l*n.width+n.x,c=c*n.height+n.y,u=u*n.height+n.y),a=isSafeNum(a)?a:0,l=isSafeNum(l)?l:1,c=isSafeNum(c)?c:0,u=isSafeNum(u)?u:0;var d=s.createLinearGradient(a,c,l,u);return d}function createRadialGradient(s,o,n){var a=n.width,l=n.height,c=Math.min(a,l),u=o.x==null?.5:o.x,d=o.y==null?.5:o.y,h=o.r==null?.5:o.r;o.global||(u=u*a+n.x,d=d*l+n.y,h=h*c),u=isSafeNum(u)?u:.5,d=isSafeNum(d)?d:.5,h=h>=0&&isSafeNum(h)?h:.5;var f=s.createRadialGradient(u,d,0,u,d,h);return f}function getCanvasGradient(s,o,n){for(var a=o.type==="radial"?createRadialGradient(s,o,n):createLinearGradient(s,o,n),l=o.colorStops,c=0;c<l.length;c++)a.addColorStop(l[c].offset,l[c].color);return a}function isClipPathChanged(s,o){if(s===o||!s&&!o)return!1;if(!s||!o||s.length!==o.length)return!0;for(var n=0;n<s.length;n++)if(s[n]!==o[n])return!0;return!1}function parseInt10(s){return parseInt(s,10)}function getSize$1(s,o,n){var a=["width","height"][o],l=["clientWidth","clientHeight"][o],c=["paddingLeft","paddingTop"][o],u=["paddingRight","paddingBottom"][o];if(n[a]!=null&&n[a]!=="auto")return parseFloat(n[a]);var d=document.defaultView.getComputedStyle(s);return(s[l]||parseInt10(d[a])||parseInt10(s.style[a]))-(parseInt10(d[c])||0)-(parseInt10(d[u])||0)|0}function normalizeLineDash(s,o){return!s||s==="solid"||!(o>0)?null:s==="dashed"?[4*o,2*o]:s==="dotted"?[o]:isNumber(s)?[s]:isArray$1(s)?s:null}function getLineDash(s){var o=s.style,n=o.lineDash&&o.lineWidth>0&&normalizeLineDash(o.lineDash,o.lineWidth),a=o.lineDashOffset;if(n){var l=o.strokeNoScale&&s.getLineScale?s.getLineScale():1;l&&l!==1&&(n=map$1(n,function(c){return c/l}),a/=l)}return[n,a]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(s){var o=s.stroke;return!(o==null||o==="none"||!(s.lineWidth>0))}function isValidStrokeFillStyle(s){return typeof s=="string"&&s!=="none"}function styleHasFill(s){var o=s.fill;return o!=null&&o!=="none"}function doFillPath(s,o){if(o.fillOpacity!=null&&o.fillOpacity!==1){var n=s.globalAlpha;s.globalAlpha=o.fillOpacity*o.opacity,s.fill(),s.globalAlpha=n}else s.fill()}function doStrokePath(s,o){if(o.strokeOpacity!=null&&o.strokeOpacity!==1){var n=s.globalAlpha;s.globalAlpha=o.strokeOpacity*o.opacity,s.stroke(),s.globalAlpha=n}else s.stroke()}function createCanvasPattern(s,o,n){var a=createOrUpdateImage(o.image,o.__image,n);if(isImageReady(a)){var l=s.createPattern(a,o.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var c=new DOMMatrix;c.translateSelf(o.x||0,o.y||0),c.rotateSelf(0,0,(o.rotation||0)*RADIAN_TO_DEGREE),c.scaleSelf(o.scaleX||1,o.scaleY||1),l.setTransform(c)}return l}}function brushPath(s,o,n,a){var l,c=styleHasStroke(n),u=styleHasFill(n),d=n.strokePercent,h=d<1,f=!o.path;(!o.silent||h)&&f&&o.createPathProxy();var g=o.path||pathProxyForDraw,p=o.__dirty;if(!a){var v=n.fill,b=n.stroke,_=u&&!!v.colorStops,w=c&&!!b.colorStops,x=u&&!!v.image,S=c&&!!b.image,C=void 0,T=void 0,R=void 0,A=void 0,M=void 0;(_||w)&&(M=o.getBoundingRect()),_&&(C=p?getCanvasGradient(s,v,M):o.__canvasFillGradient,o.__canvasFillGradient=C),w&&(T=p?getCanvasGradient(s,b,M):o.__canvasStrokeGradient,o.__canvasStrokeGradient=T),x&&(R=p||!o.__canvasFillPattern?createCanvasPattern(s,v,o):o.__canvasFillPattern,o.__canvasFillPattern=R),S&&(A=p||!o.__canvasStrokePattern?createCanvasPattern(s,b,o):o.__canvasStrokePattern,o.__canvasStrokePattern=R),_?s.fillStyle=C:x&&(R?s.fillStyle=R:u=!1),w?s.strokeStyle=T:S&&(A?s.strokeStyle=A:c=!1)}var D=o.getGlobalScale();g.setScale(D[0],D[1],o.segmentIgnoreThreshold);var O,H;s.setLineDash&&n.lineDash&&(l=getLineDash(o),O=l[0],H=l[1]);var j=!0;(f||p&SHAPE_CHANGED_BIT)&&(g.setDPR(s.dpr),h?g.setContext(null):(g.setContext(s),j=!1),g.reset(),o.buildPath(g,o.shape,a),g.toStatic(),o.pathUpdated()),j&&g.rebuildPath(s,h?d:1),O&&(s.setLineDash(O),s.lineDashOffset=H),a||(n.strokeFirst?(c&&doStrokePath(s,n),u&&doFillPath(s,n)):(u&&doFillPath(s,n),c&&doStrokePath(s,n))),O&&s.setLineDash([])}function brushImage(s,o,n){var a=o.__image=createOrUpdateImage(n.image,o.__image,o,o.onload);if(!(!a||!isImageReady(a))){var l=n.x||0,c=n.y||0,u=o.getWidth(),d=o.getHeight(),h=a.width/a.height;if(u==null&&d!=null?u=d*h:d==null&&u!=null?d=u/h:u==null&&d==null&&(u=a.width,d=a.height),n.sWidth&&n.sHeight){var f=n.sx||0,g=n.sy||0;s.drawImage(a,f,g,n.sWidth,n.sHeight,l,c,u,d)}else if(n.sx&&n.sy){var f=n.sx,g=n.sy,p=u-f,v=d-g;s.drawImage(a,f,g,p,v,l,c,u,d)}else s.drawImage(a,l,c,u,d)}}function brushText(s,o,n){var a,l=n.text;if(l!=null&&(l+=""),l){s.font=n.font||DEFAULT_FONT,s.textAlign=n.textAlign,s.textBaseline=n.textBaseline;var c=void 0,u=void 0;s.setLineDash&&n.lineDash&&(a=getLineDash(o),c=a[0],u=a[1]),c&&(s.setLineDash(c),s.lineDashOffset=u),n.strokeFirst?(styleHasStroke(n)&&s.strokeText(l,n.x,n.y),styleHasFill(n)&&s.fillText(l,n.x,n.y)):(styleHasFill(n)&&s.fillText(l,n.x,n.y),styleHasStroke(n)&&s.strokeText(l,n.x,n.y)),c&&s.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(s,o,n,a,l){var c=!1;if(!a&&(n=n||{},o===n))return!1;if(a||o.opacity!==n.opacity){flushPathDrawn(s,l),c=!0;var u=Math.max(Math.min(o.opacity,1),0);s.globalAlpha=isNaN(u)?DEFAULT_COMMON_STYLE.opacity:u}(a||o.blend!==n.blend)&&(c||(flushPathDrawn(s,l),c=!0),s.globalCompositeOperation=o.blend||DEFAULT_COMMON_STYLE.blend);for(var d=0;d<SHADOW_NUMBER_PROPS.length;d++){var h=SHADOW_NUMBER_PROPS[d];(a||o[h]!==n[h])&&(c||(flushPathDrawn(s,l),c=!0),s[h]=s.dpr*(o[h]||0))}return(a||o.shadowColor!==n.shadowColor)&&(c||(flushPathDrawn(s,l),c=!0),s.shadowColor=o.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),c}function bindPathAndTextCommonStyle(s,o,n,a,l){var c=getStyle(o,l.inHover),u=a?null:n&&getStyle(n,l.inHover)||{};if(c===u)return!1;var d=bindCommonProps(s,c,u,a,l);if((a||c.fill!==u.fill)&&(d||(flushPathDrawn(s,l),d=!0),isValidStrokeFillStyle(c.fill)&&(s.fillStyle=c.fill)),(a||c.stroke!==u.stroke)&&(d||(flushPathDrawn(s,l),d=!0),isValidStrokeFillStyle(c.stroke)&&(s.strokeStyle=c.stroke)),(a||c.opacity!==u.opacity)&&(d||(flushPathDrawn(s,l),d=!0),s.globalAlpha=c.opacity==null?1:c.opacity),o.hasStroke()){var h=c.lineWidth,f=h/(c.strokeNoScale&&o.getLineScale?o.getLineScale():1);s.lineWidth!==f&&(d||(flushPathDrawn(s,l),d=!0),s.lineWidth=f)}for(var g=0;g<STROKE_PROPS.length;g++){var p=STROKE_PROPS[g],v=p[0];(a||c[v]!==u[v])&&(d||(flushPathDrawn(s,l),d=!0),s[v]=c[v]||p[1])}return d}function bindImageStyle(s,o,n,a,l){return bindCommonProps(s,getStyle(o,l.inHover),n&&getStyle(n,l.inHover),a,l)}function setContextTransform(s,o){var n=o.transform,a=s.dpr||1;n?s.setTransform(a*n[0],a*n[1],a*n[2],a*n[3],a*n[4],a*n[5]):s.setTransform(a,0,0,a,0,0)}function updateClipStatus(s,o,n){for(var a=!1,l=0;l<s.length;l++){var c=s[l];a=a||c.isZeroArea(),setContextTransform(o,c),o.beginPath(),c.buildPath(o,c.shape),o.clip()}n.allClipped=a}function isTransformChanged(s,o){return s&&o?s[0]!==o[0]||s[1]!==o[1]||s[2]!==o[2]||s[3]!==o[3]||s[4]!==o[4]||s[5]!==o[5]:!(!s&&!o)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(s){var o=styleHasFill(s),n=styleHasStroke(s);return!(s.lineDash||!(+o^+n)||o&&typeof s.fill!="string"||n&&typeof s.stroke!="string"||s.strokePercent<1||s.strokeOpacity<1||s.fillOpacity<1)}function flushPathDrawn(s,o){o.batchFill&&s.fill(),o.batchStroke&&s.stroke(),o.batchFill="",o.batchStroke=""}function getStyle(s,o){return o&&s.__hoverStyle||s.style}function brushSingle(s,o){brush$1(s,o,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(s,o,n,a){var l=o.transform;if(!o.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){o.__dirty&=-2,o.__isRendered=!1;return}var c=o.__clipPaths,u=n.prevElClipPaths,d=!1,h=!1;if((!u||isClipPathChanged(c,u))&&(u&&u.length&&(flushPathDrawn(s,n),s.restore(),h=d=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),c&&c.length&&(flushPathDrawn(s,n),s.save(),updateClipStatus(c,s,n),d=!0),n.prevElClipPaths=c),n.allClipped){o.__isRendered=!1;return}o.beforeBrush&&o.beforeBrush(),o.innerBeforeBrush();var f=n.prevEl;f||(h=d=!0);var g=o instanceof Path&&o.autoBatch&&canPathBatch(o.style);d||isTransformChanged(l,f.transform)?(flushPathDrawn(s,n),setContextTransform(s,o)):g||flushPathDrawn(s,n);var p=getStyle(o,n.inHover);o instanceof Path?(n.lastDrawType!==DRAW_TYPE_PATH&&(h=!0,n.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(s,o,f,h,n),(!g||!n.batchFill&&!n.batchStroke)&&s.beginPath(),brushPath(s,o,p,g),g&&(n.batchFill=p.fill||"",n.batchStroke=p.stroke||"")):o instanceof TSpan?(n.lastDrawType!==DRAW_TYPE_TEXT&&(h=!0,n.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(s,o,f,h,n),brushText(s,o,p)):o instanceof ZRImage?(n.lastDrawType!==DRAW_TYPE_IMAGE&&(h=!0,n.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(s,o,f,h,n),brushImage(s,o,p)):o.getTemporalDisplayables&&(n.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(h=!0,n.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(s,o,n)),g&&a&&flushPathDrawn(s,n),o.innerAfterBrush(),o.afterBrush&&o.afterBrush(),n.prevEl=o,o.__dirty=0,o.__isRendered=!0}function brushIncremental(s,o,n){var a=o.getDisplayables(),l=o.getTemporalDisplayables();s.save();var c={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},u,d;for(u=o.getCursor(),d=a.length;u<d;u++){var h=a[u];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),brush$1(s,h,c,u===d-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),c.prevEl=h}for(var f=0,g=l.length;f<g;f++){var h=l[f];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),brush$1(s,h,c,f===g-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),c.prevEl=h}o.clearTemporalDisplayables(),o.notClear=!0,s.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(s,o){if(s==="none")return null;var n=o.getDevicePixelRatio(),a=o.getZr(),l=a.painter.type==="svg";s.dirty&&decalMap.delete(s);var c=decalMap.get(s);if(c)return c;var u=defaults(s,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});u.backgroundColor==="none"&&(u.backgroundColor=null);var d={repeat:"repeat"};return h(d),d.rotation=u.rotation,d.scaleX=d.scaleY=l?1:1/n,decalMap.set(s,d),s.dirty=!1,d;function h(f){for(var g=[n],p=!0,v=0;v<decalKeys.length;++v){var b=u[decalKeys[v]];if(b!=null&&!isArray$1(b)&&!isString$2(b)&&!isNumber(b)&&typeof b!="boolean"){p=!1;break}g.push(b)}var _;if(p){_=g.join(",")+(l?"-svg":"");var w=decalCache.get(_);w&&(l?f.svgElement=w:f.image=w)}var x=normalizeDashArrayX(u.dashArrayX),S=normalizeDashArrayY(u.dashArrayY),C=normalizeSymbolArray(u.symbol),T=getLineBlockLengthX(x),R=getLineBlockLengthY(S),A=!l&&platformApi.createCanvas(),M=l&&{tag:"g",attrs:{},key:"dcl",children:[]},D=H(),O;A&&(A.width=D.width*n,A.height=D.height*n,O=A.getContext("2d")),j(),p&&decalCache.put(_,A||M),f.image=A,f.svgElement=M,f.svgWidth=D.width,f.svgHeight=D.height;function H(){for(var q=1,Y=0,ee=T.length;Y<ee;++Y)q=getLeastCommonMultiple(q,T[Y]);for(var te=1,Y=0,ee=C.length;Y<ee;++Y)te=getLeastCommonMultiple(te,C[Y].length);q*=te;var re=R*T.length*C.length;if(process.env.NODE_ENV!=="production"){var ae=function(ue){console.warn("Calculated decal size is greater than "+ue+" due to decal option settings so "+ue+" is used for the decal size. Please consider changing the decal option to make a smaller decal or set "+ue+" to be larger to avoid incontinuity.")};q>u.maxTileWidth&&ae("maxTileWidth"),re>u.maxTileHeight&&ae("maxTileHeight")}return{width:Math.max(1,Math.min(q,u.maxTileWidth)),height:Math.max(1,Math.min(re,u.maxTileHeight))}}function j(){O&&(O.clearRect(0,0,A.width,A.height),u.backgroundColor&&(O.fillStyle=u.backgroundColor,O.fillRect(0,0,A.width,A.height)));for(var q=0,Y=0;Y<S.length;++Y)q+=S[Y];if(q<=0)return;for(var ee=-R,te=0,re=0,ae=0;ee<D.height;){if(te%2===0){for(var ue=re/2%C.length,ce=0,le=0,ie=0;ce<D.width*2;){for(var de=0,Y=0;Y<x[ae].length;++Y)de+=x[ae][Y];if(de<=0)break;if(le%2===0){var ge=(1-u.symbolSize)*.5,pe=ce+x[ae][le]*ge,be=ee+S[te]*ge,Se=x[ae][le]*u.symbolSize,Le=S[te]*u.symbolSize,De=ie/2%C[ue].length;ke(pe,be,Se,Le,C[ue][De])}ce+=x[ae][le],++ie,++le,le===x[ae].length&&(le=0)}++ae,ae===x.length&&(ae=0)}ee+=S[te],++re,++te,te===S.length&&(te=0)}function ke(Te,Ae,Ee,we,Ve){var _e=l?1:n,ve=createSymbol$1(Ve,Te*_e,Ae*_e,Ee*_e,we*_e,u.color,u.symbolKeepAspect);if(l){var fe=a.painter.renderOneToVNode(ve);fe&&M.children.push(fe)}else brushSingle(O,ve)}}}}function normalizeSymbolArray(s){if(!s||s.length===0)return[["rect"]];if(isString$2(s))return[[s]];for(var o=!0,n=0;n<s.length;++n)if(!isString$2(s[n])){o=!1;break}if(o)return normalizeSymbolArray([s]);for(var a=[],n=0;n<s.length;++n)isString$2(s[n])?a.push([s[n]]):a.push(s[n]);return a}function normalizeDashArrayX(s){if(!s||s.length===0)return[[0,0]];if(isNumber(s)){var o=Math.ceil(s);return[[o,o]]}for(var n=!0,a=0;a<s.length;++a)if(!isNumber(s[a])){n=!1;break}if(n)return normalizeDashArrayX([s]);for(var l=[],a=0;a<s.length;++a)if(isNumber(s[a])){var o=Math.ceil(s[a]);l.push([o,o])}else{var o=map$1(s[a],function(d){return Math.ceil(d)});o.length%2===1?l.push(o.concat(o)):l.push(o)}return l}function normalizeDashArrayY(s){if(!s||typeof s=="object"&&s.length===0)return[0,0];if(isNumber(s)){var o=Math.ceil(s);return[o,o]}var n=map$1(s,function(a){return Math.ceil(a)});return s.length%2?n.concat(n):n}function getLineBlockLengthX(s){return map$1(s,function(o){return getLineBlockLengthY(o)})}function getLineBlockLengthY(s){for(var o=0,n=0;n<s.length;++n)o+=s[n];return s.length%2===1?o*2:o}function decalVisual(s,o){s.eachRawSeries(function(n){if(!s.isSeriesFiltered(n)){var a=n.getData();a.hasItemVisual()&&a.each(function(u){var d=a.getItemVisual(u,"decal");if(d){var h=a.ensureUniqueItemVisual(u,"style");h.decal=createOrUpdatePatternFromDecal(d,o)}});var l=a.getVisual("decal");if(l){var c=a.getVisual("style");c.decal=createOrUpdatePatternFromDecal(l,o)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(s,o){process.env.NODE_ENV!=="production"&&implsStore[s]&&error("Already has an implementation of "+s+"."),implsStore[s]=o}function getImpl(s){return process.env.NODE_ENV!=="production"&&(implsStore[s]||error("Implementation of "+s+" doesn't exists.")),implsStore[s]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(s){return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];if(this.isDisposed()){disposedWarning(this.id);return}return toLowercaseNameAndCallEventful(this,s,o)}}function createRegisterEventWithLowercaseMessageCenter(s){return function(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return toLowercaseNameAndCallEventful(this,s,o)}}function toLowercaseNameAndCallEventful(s,o,n){return n[0]=n[0]&&n[0].toLowerCase(),Eventful.prototype[o].apply(s,n)}var MessageCenter=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this,new ECEventProcessor)||this;c._chartsViews=[],c._chartsMap={},c._componentsViews=[],c._componentsMap={},c._pendingActions=[],l=l||{},isString$2(a)&&(a=themeStorage[a]),c._dom=n;var u="canvas",d="auto",h=!1;if(process.env.NODE_ENV!=="production"){var f=env.hasGlobalWindow?window:global;f&&(u=retrieve2(f.__ECHARTS__DEFAULT__RENDERER__,u),d=retrieve2(f.__ECHARTS__DEFAULT__COARSE_POINTER,d),h=retrieve2(f.__ECHARTS__DEFAULT__USE_DIRTY_RECT__,h))}l.ssr&&registerSSRDataGetter(function(b){var _=getECData(b),w=_.dataIndex;if(w!=null){var x=createHashMap();return x.set("series_index",_.seriesIndex),x.set("data_index",w),_.ssrType&&x.set("ssr_type",_.ssrType),x}});var g=c._zr=init$2(n,{renderer:l.renderer||u,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,h),useCoarsePointer:retrieve2(l.useCoarsePointer,d),pointerSize:l.pointerSize});c._ssr=l.ssr,c._throttledZrFlush=throttle(bind$1(g.flush,g),17),a=clone$4(a),a&&globalBackwardCompat(a,!0),c._theme=a,c._locale=createLocaleObject(l.locale||SYSTEM_LANG),c._coordSysMgr=new CoordinateSystemManager;var p=c._api=createExtensionAPI(c);function v(b,_){return b.__prio-_.__prio}return sort$2(visualFuncs,v),sort$2(dataProcessorFuncs,v),c._scheduler=new Scheduler(c,p,dataProcessorFuncs,visualFuncs),c._messageCenter=new MessageCenter,c._initEvents(),c.resize=bind$1(c.resize,c),g.animation.on("frame",c._onframe,c),bindRenderedEvent(g,c),bindMouseEvent(g,c),setAsPrimitive(c),c}return o.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var n=this._scheduler;if(this[PENDING_UPDATE]){var a=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(h){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,h}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,a),triggerUpdatedEvent.call(this,a)}else if(n.unfinished){var l=TEST_FRAME_REMAIN_TIME,c=this._model,u=this._api;n.unfinished=!1;do{var d=+new Date;n.performSeriesTasks(c),n.performDataProcessorTasks(c),updateStreamModes(this,c),n.performVisualTasks(c),renderSeries(this,this._model,u,"remain",{}),l-=+new Date-d}while(l>0&&n.unfinished);n.unfinished||this._zr.flush()}}},o.prototype.getDom=function(){return this._dom},o.prototype.getId=function(){return this.id},o.prototype.getZr=function(){return this._zr},o.prototype.isSSR=function(){return this._ssr},o.prototype.setOption=function(n,a,l){if(this[IN_MAIN_PROCESS_KEY]){process.env.NODE_ENV!=="production"&&error("`setOption` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}var c,u,d;if(isObject$3(a)&&(l=a.lazyUpdate,c=a.silent,u=a.replaceMerge,d=a.transition,a=a.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||a){var h=new OptionManager(this._api),f=this._theme,g=this._model=new GlobalModel;g.scheduler=this._scheduler,g.ssr=this._ssr,g.init(null,null,null,f,this._locale,h)}this._model.setOption(n,{replaceMerge:u},optionPreprocessorFuncs);var p={seriesTransition:d,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:c,updateParams:p},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,p)}catch(v){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,v}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}},o.prototype.setTheme=function(){deprecateLog("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},o.prototype.getModel=function(){return this._model},o.prototype.getOption=function(){return this._model&&this._model.getOption()},o.prototype.getWidth=function(){return this._zr.getWidth()},o.prototype.getHeight=function(){return this._zr.getHeight()},o.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},o.prototype.getRenderedCanvas=function(n){return process.env.NODE_ENV!=="production"&&deprecateReplaceLog("getRenderedCanvas","renderToCanvas"),this.renderToCanvas(n)},o.prototype.renderToCanvas=function(n){n=n||{};var a=this._zr.painter;if(process.env.NODE_ENV!=="production"&&a.type!=="canvas")throw new Error("renderToCanvas can only be used in the canvas renderer.");return a.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},o.prototype.renderToSVGString=function(n){n=n||{};var a=this._zr.painter;if(process.env.NODE_ENV!=="production"&&a.type!=="svg")throw new Error("renderToSVGString can only be used in the svg renderer.");return a.renderToString({useViewBox:n.useViewBox})},o.prototype.getSvgDataURL=function(){if(env.svgSupported){var n=this._zr,a=n.storage.getDisplayList();return each$f(a,function(l){l.stopAnimation(null,!0)}),n.painter.toDataURL()}},o.prototype.getDataURL=function(n){if(this._disposed){disposedWarning(this.id);return}n=n||{};var a=n.excludeComponents,l=this._model,c=[],u=this;each$f(a,function(h){l.eachComponent({mainType:h},function(f){var g=u._componentsMap[f.__viewId];g.group.ignore||(c.push(g),g.group.ignore=!0)})});var d=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return each$f(c,function(h){h.group.ignore=!1}),d},o.prototype.getConnectedDataURL=function(n){if(this._disposed){disposedWarning(this.id);return}var a=n.type==="svg",l=this.group,c=Math.min,u=Math.max,d=1/0;if(connectedGroups[l]){var h=d,f=d,g=-d,p=-d,v=[],b=n&&n.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(T,R){if(T.group===l){var A=a?T.getZr().painter.getSvgDom().innerHTML:T.renderToCanvas(clone$4(n)),M=T.getDom().getBoundingClientRect();h=c(M.left,h),f=c(M.top,f),g=u(M.right,g),p=u(M.bottom,p),v.push({dom:A,left:M.left,top:M.top})}}),h*=b,f*=b,g*=b,p*=b;var _=g-h,w=p-f,x=platformApi.createCanvas(),S=init$2(x,{renderer:a?"svg":"canvas"});if(S.resize({width:_,height:w}),a){var C="";return each$f(v,function(T){var R=T.left-h,A=T.top-f;C+='<g transform="translate('+R+","+A+')">'+T.dom+"</g>"}),S.painter.getSvgRoot().innerHTML=C,n.connectedBackgroundColor&&S.painter.setBackgroundColor(n.connectedBackgroundColor),S.refreshImmediately(),S.painter.toDataURL()}else return n.connectedBackgroundColor&&S.add(new Rect$2({shape:{x:0,y:0,width:_,height:w},style:{fill:n.connectedBackgroundColor}})),each$f(v,function(T){var R=new ZRImage({style:{x:T.left*b-h,y:T.top*b-f,image:T.dom}});S.add(R)}),S.refreshImmediately(),x.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},o.prototype.convertToPixel=function(n,a){return doConvertPixel(this,"convertToPixel",n,a)},o.prototype.convertFromPixel=function(n,a){return doConvertPixel(this,"convertFromPixel",n,a)},o.prototype.containPixel=function(n,a){if(this._disposed){disposedWarning(this.id);return}var l=this._model,c,u=parseFinder$1(l,n);return each$f(u,function(d,h){h.indexOf("Models")>=0&&each$f(d,function(f){var g=f.coordinateSystem;if(g&&g.containPoint)c=c||!!g.containPoint(a);else if(h==="seriesModels"){var p=this._chartsMap[f.__viewId];p&&p.containPoint?c=c||p.containPoint(a,f):process.env.NODE_ENV!=="production"&&warn(h+": "+(p?"The found component do not support containPoint.":"No view mapping to the found component."))}else process.env.NODE_ENV!=="production"&&warn(h+": containPoint is not supported")},this)},this),!!c},o.prototype.getVisual=function(n,a){var l=this._model,c=parseFinder$1(l,n,{defaultMainType:"series"}),u=c.seriesModel;process.env.NODE_ENV!=="production"&&(u||warn("There is no specified series model"));var d=u.getData(),h=c.hasOwnProperty("dataIndexInside")?c.dataIndexInside:c.hasOwnProperty("dataIndex")?d.indexOfRawIndex(c.dataIndex):null;return h!=null?getItemVisualFromData(d,h,a):getVisualFromData(d,a)},o.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},o.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},o.prototype._initEvents=function(){var n=this;each$f(MOUSE_EVENT_NAMES,function(a){var l=function(c){var u=n.getModel(),d=c.target,h,f=a==="globalout";if(f?h={}:d&&findEventDispatcher(d,function(_){var w=getECData(_);if(w&&w.dataIndex!=null){var x=w.dataModel||u.getSeriesByIndex(w.seriesIndex);return h=x&&x.getDataParams(w.dataIndex,w.dataType,d)||{},!0}else if(w.eventData)return h=extend({},w.eventData),!0},!0),h){var g=h.componentType,p=h.componentIndex;(g==="markLine"||g==="markPoint"||g==="markArea")&&(g="series",p=h.seriesIndex);var v=g&&p!=null&&u.getComponent(g,p),b=v&&n[v.mainType==="series"?"_chartsMap":"_componentsMap"][v.__viewId];process.env.NODE_ENV!=="production"&&!f&&!(v&&b)&&warn("model or view can not be found by params"),h.event=c,h.type=a,n._$eventProcessor.eventInfo={targetEl:d,packedEvent:h,model:v,view:b},n.trigger(a,h)}};l.zrEventfulCallAtLast=!0,n._zr.on(a,l,n)}),each$f(eventActionMap,function(a,l){n._messageCenter.on(l,function(c){this.trigger(l,c)},n)}),each$f(["selectchanged"],function(a){n._messageCenter.on(a,function(l){this.trigger(a,l)},n)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},o.prototype.isDisposed=function(){return this._disposed},o.prototype.clear=function(){if(this._disposed){disposedWarning(this.id);return}this.setOption({series:[]},!0)},o.prototype.dispose=function(){if(this._disposed){disposedWarning(this.id);return}this._disposed=!0;var n=this.getDom();n&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var a=this,l=a._api,c=a._model;each$f(a._componentsViews,function(u){u.dispose(c,l)}),each$f(a._chartsViews,function(u){u.dispose(c,l)}),a._zr.dispose(),a._dom=a._model=a._chartsMap=a._componentsMap=a._chartsViews=a._componentsViews=a._scheduler=a._api=a._zr=a._throttledZrFlush=a._theme=a._coordSysMgr=a._messageCenter=null,delete instances[a.id]},o.prototype.resize=function(n){if(this[IN_MAIN_PROCESS_KEY]){process.env.NODE_ENV!=="production"&&error("`resize` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}this._zr.resize(n);var a=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!a){var l=a.resetOption("media"),c=n&&n.silent;this[PENDING_UPDATE]&&(c==null&&(c=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},n&&n.animation)})}catch(u){throw this[IN_MAIN_PROCESS_KEY]=!1,u}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}},o.prototype.showLoading=function(n,a){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(n)&&(a=n,n=""),n=n||"default",this.hideLoading(),!loadingEffects[n]){process.env.NODE_ENV!=="production"&&warn("Loading effects "+n+" not exists.");return}var l=loadingEffects[n](this._api,a),c=this._zr;this._loadingFX=l,c.add(l)},o.prototype.hideLoading=function(){if(this._disposed){disposedWarning(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},o.prototype.makeActionFromEvent=function(n){var a=extend({},n);return a.type=eventActionMap[n.type],a},o.prototype.dispatchAction=function(n,a){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(a)||(a={silent:!!a}),!!actions[n.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(n);return}var l=a.silent;doDispatchAction.call(this,n,l);var c=a.flush;c?this._zr.flush():c!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},o.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},o.prototype.appendData=function(n){if(this._disposed){disposedWarning(this.id);return}var a=n.seriesIndex,l=this.getModel(),c=l.getSeriesByIndex(a);process.env.NODE_ENV!=="production"&&assert(n.data&&c),c.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},o.internalField=function(){prepare=function(p){var v=p._scheduler;v.restorePipelines(p._model),v.prepareStageTasks(),prepareView(p,!0),prepareView(p,!1),v.plan()},prepareView=function(p,v){for(var b=p._model,_=p._scheduler,w=v?p._componentsViews:p._chartsViews,x=v?p._componentsMap:p._chartsMap,S=p._zr,C=p._api,T=0;T<w.length;T++)w[T].__alive=!1;v?b.eachComponent(function(M,D){M!=="series"&&R(D)}):b.eachSeries(R);function R(M){var D=M.__requireNewView;M.__requireNewView=!1;var O="_ec_"+M.id+"_"+M.type,H=!D&&x[O];if(!H){var j=parseClassType(M.type),q=v?ComponentView.getClass(j.main,j.sub):ChartView.getClass(j.sub);process.env.NODE_ENV!=="production"&&assert(q,j.sub+" does not exist."),H=new q,H.init(b,C),x[O]=H,w.push(H),S.add(H.group)}M.__viewId=H.__id=O,H.__alive=!0,H.__model=M,H.group.__ecComponentInfo={mainType:M.mainType,index:M.componentIndex},!v&&_.prepareView(H,M,b,C)}for(var T=0;T<w.length;){var A=w[T];A.__alive?T++:(!v&&A.renderTask.dispose(),S.remove(A.group),A.dispose(b,C),w.splice(T,1),x[A.__id]===A&&delete x[A.__id],A.__id=A.group.__ecComponentInfo=null)}},updateDirectly=function(p,v,b,_,w){var x=p._model;if(x.setUpdatePayload(b),!_){each$f([].concat(p._componentsViews).concat(p._chartsViews),A);return}var S={};S[_+"Id"]=b[_+"Id"],S[_+"Index"]=b[_+"Index"],S[_+"Name"]=b[_+"Name"];var C={mainType:_,query:S};w&&(C.subType=w);var T=b.excludeSeriesId,R;T!=null&&(R=createHashMap(),each$f(normalizeToArray(T),function(M){var D=convertOptionIdName(M,null);D!=null&&R.set(D,!0)})),x&&x.eachComponent(C,function(M){var D=R&&R.get(M.id)!=null;if(!D)if(isHighDownPayload(b))if(M instanceof SeriesModel)b.type===HIGHLIGHT_ACTION_TYPE&&!b.notBlur&&!M.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(M,b,p._api);else{var O=findComponentHighDownDispatchers(M.mainType,M.componentIndex,b.name,p._api),H=O.focusSelf,j=O.dispatchers;b.type===HIGHLIGHT_ACTION_TYPE&&H&&!b.notBlur&&blurComponent(M.mainType,M.componentIndex,p._api),j&&each$f(j,function(q){b.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(q):leaveEmphasis(q)})}else isSelectChangePayload(b)&&M instanceof SeriesModel&&(toggleSelectionFromPayload(M,b,p._api),updateSeriesElementSelection(M),markStatusToUpdate(p))},p),x&&x.eachComponent(C,function(M){var D=R&&R.get(M.id)!=null;D||A(p[_==="series"?"_chartsMap":"_componentsMap"][M.__viewId])},p);function A(M){M&&M.__alive&&M[v]&&M[v](M.__model,x,p._api,b)}},updateMethods={prepareAndUpdate:function(p){prepare(this),updateMethods.update.call(this,p,{optionChanged:p.newOption!=null})},update:function(p,v){var b=this._model,_=this._api,w=this._zr,x=this._coordSysMgr,S=this._scheduler;if(b){b.setUpdatePayload(p),S.restoreData(b,p),S.performSeriesTasks(b),x.create(b,_),S.performDataProcessorTasks(b,p),updateStreamModes(this,b),x.update(b,_),n(b),S.performVisualTasks(b,p),render(this,b,_,p,v);var C=b.get("backgroundColor")||"transparent",T=b.get("darkMode");w.setBackgroundColor(C),T!=null&&T!=="auto"&&w.setDarkMode(T),lifecycle.trigger("afterupdate",b,_)}},updateTransform:function(p){var v=this,b=this._model,_=this._api;if(b){b.setUpdatePayload(p);var w=[];b.eachComponent(function(S,C){if(S!=="series"){var T=v.getViewOfComponentModel(C);if(T&&T.__alive)if(T.updateTransform){var R=T.updateTransform(C,b,_,p);R&&R.update&&w.push(T)}else w.push(T)}});var x=createHashMap();b.eachSeries(function(S){var C=v._chartsMap[S.__viewId];if(C.updateTransform){var T=C.updateTransform(S,b,_,p);T&&T.update&&x.set(S.uid,1)}else x.set(S.uid,1)}),n(b),this._scheduler.performVisualTasks(b,p,{setDirty:!0,dirtyMap:x}),renderSeries(this,b,_,p,{},x),lifecycle.trigger("afterupdate",b,_)}},updateView:function(p){var v=this._model;v&&(v.setUpdatePayload(p),ChartView.markUpdateMethod(p,"updateView"),n(v),this._scheduler.performVisualTasks(v,p,{setDirty:!0}),render(this,v,this._api,p,{}),lifecycle.trigger("afterupdate",v,this._api))},updateVisual:function(p){var v=this,b=this._model;b&&(b.setUpdatePayload(p),b.eachSeries(function(_){_.getData().clearAllVisual()}),ChartView.markUpdateMethod(p,"updateVisual"),n(b),this._scheduler.performVisualTasks(b,p,{visualType:"visual",setDirty:!0}),b.eachComponent(function(_,w){if(_!=="series"){var x=v.getViewOfComponentModel(w);x&&x.__alive&&x.updateVisual(w,b,v._api,p)}}),b.eachSeries(function(_){var w=v._chartsMap[_.__viewId];w.updateVisual(_,b,v._api,p)}),lifecycle.trigger("afterupdate",b,this._api))},updateLayout:function(p){updateMethods.update.call(this,p)}},doConvertPixel=function(p,v,b,_){if(p._disposed){disposedWarning(p.id);return}for(var w=p._model,x=p._coordSysMgr.getCoordinateSystems(),S,C=parseFinder$1(w,b),T=0;T<x.length;T++){var R=x[T];if(R[v]&&(S=R[v](w,C,_))!=null)return S}process.env.NODE_ENV!=="production"&&warn("No coordinate system that supports "+v+" found by the given finder.")},updateStreamModes=function(p,v){var b=p._chartsMap,_=p._scheduler;v.eachSeries(function(w){_.updateStreamModes(w,b[w.__viewId])})},doDispatchAction=function(p,v){var b=this,_=this.getModel(),w=p.type,x=p.escapeConnect,S=actions[w],C=S.actionInfo,T=(C.update||"update").split(":"),R=T.pop(),A=T[0]!=null&&parseClassType(T[0]);this[IN_MAIN_PROCESS_KEY]=!0;var M=[p],D=!1;p.batch&&(D=!0,M=map$1(p.batch,function(te){return te=defaults(extend({},te),p),te.batch=null,te}));var O=[],H,j=isSelectChangePayload(p),q=isHighDownPayload(p);if(q&&allLeaveBlur(this._api),each$f(M,function(te){if(H=S.action(te,b._model,b._api),H=H||extend({},te),H.type=C.event||H.type,O.push(H),q){var re=preParseFinder(p),ae=re.queryOptionMap,ue=re.mainTypeSpecified,ce=ue?ae.keys()[0]:"series";updateDirectly(b,R,te,ce),markStatusToUpdate(b)}else j?(updateDirectly(b,R,te,"series"),markStatusToUpdate(b)):A&&updateDirectly(b,R,te,A.main,A.sub)}),R!=="none"&&!q&&!j&&!A)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,p),this[PENDING_UPDATE]=null):updateMethods[R].call(this,p)}catch(te){throw this[IN_MAIN_PROCESS_KEY]=!1,te}if(D?H={type:C.event||w,escapeConnect:x,batch:O}:H=O[0],this[IN_MAIN_PROCESS_KEY]=!1,!v){var Y=this._messageCenter;if(Y.trigger(H.type,H),j){var ee={type:"selectchanged",escapeConnect:x,selected:getAllSelectedIndices(_),isFromClick:p.isFromClick||!1,fromAction:p.type,fromActionPayload:p};Y.trigger(ee.type,ee)}}},flushPendingActions=function(p){for(var v=this._pendingActions;v.length;){var b=v.shift();doDispatchAction.call(this,b,p)}},triggerUpdatedEvent=function(p){!p&&this.trigger("updated")},bindRenderedEvent=function(p,v){p.on("rendered",function(b){v.trigger("rendered",b),p.animation.isFinished()&&!v[PENDING_UPDATE]&&!v._scheduler.unfinished&&!v._pendingActions.length&&v.trigger("finished")})},bindMouseEvent=function(p,v){p.on("mouseover",function(b){var _=b.target,w=findEventDispatcher(_,isHighDownDispatcher);w&&(handleGlobalMouseOverForHighDown(w,b,v._api),markStatusToUpdate(v))}).on("mouseout",function(b){var _=b.target,w=findEventDispatcher(_,isHighDownDispatcher);w&&(handleGlobalMouseOutForHighDown(w,b,v._api),markStatusToUpdate(v))}).on("click",function(b){var _=b.target,w=findEventDispatcher(_,function(C){return getECData(C).dataIndex!=null},!0);if(w){var x=w.selected?"unselect":"select",S=getECData(w);v._api.dispatchAction({type:x,dataType:S.dataType,dataIndexInside:S.dataIndex,seriesIndex:S.seriesIndex,isFromClick:!0})}})};function n(p){p.clearColorPalette(),p.eachSeries(function(v){v.clearColorPalette()})}function a(p){var v=[],b=[],_=!1;if(p.eachComponent(function(C,T){var R=T.get("zlevel")||0,A=T.get("z")||0,M=T.getZLevelKey();_=_||!!M,(C==="series"?b:v).push({zlevel:R,z:A,idx:T.componentIndex,type:C,key:M})}),_){var w=v.concat(b),x,S;sort$2(w,function(C,T){return C.zlevel===T.zlevel?C.z-T.z:C.zlevel-T.zlevel}),each$f(w,function(C){var T=p.getComponent(C.type,C.idx),R=C.zlevel,A=C.key;x!=null&&(R=Math.max(x,R)),A?(R===x&&A!==S&&R++,S=A):S&&(R===x&&R++,S=""),x=R,T.setZLevel(R)})}}render=function(p,v,b,_,w){a(v),renderComponents(p,v,b,_,w),each$f(p._chartsViews,function(x){x.__alive=!1}),renderSeries(p,v,b,_,w),each$f(p._chartsViews,function(x){x.__alive||x.remove(v,b)})},renderComponents=function(p,v,b,_,w,x){each$f(x||p._componentsViews,function(S){var C=S.__model;f(C,S),S.render(C,v,b,_),d(C,S),g(C,S)})},renderSeries=function(p,v,b,_,w,x){var S=p._scheduler;w=extend(w||{},{updatedSeries:v.getSeries()}),lifecycle.trigger("series:beforeupdate",v,b,w);var C=!1;v.eachSeries(function(T){var R=p._chartsMap[T.__viewId];R.__alive=!0;var A=R.renderTask;S.updatePayload(A,_),f(T,R),x&&x.get(T.uid)&&A.dirty(),A.perform(S.getPerformArgs(A))&&(C=!0),R.group.silent=!!T.get("silent"),u(T,R),updateSeriesElementSelection(T)}),S.unfinished=C||S.unfinished,lifecycle.trigger("series:layoutlabels",v,b,w),lifecycle.trigger("series:transition",v,b,w),v.eachSeries(function(T){var R=p._chartsMap[T.__viewId];d(T,R),g(T,R)}),c(p,v),lifecycle.trigger("series:afterupdate",v,b,w)},markStatusToUpdate=function(p){p[STATUS_NEEDS_UPDATE_KEY]=!0,p.getZr().wakeUp()},applyChangedStates=function(p){p[STATUS_NEEDS_UPDATE_KEY]&&(p.getZr().storage.traverse(function(v){isElementRemoved(v)||l(v)}),p[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(p){for(var v=[],b=p.currentStates,_=0;_<b.length;_++){var w=b[_];w==="emphasis"||w==="blur"||w==="select"||v.push(w)}p.selected&&p.states.select&&v.push("select"),p.hoverState===HOVER_STATE_EMPHASIS&&p.states.emphasis?v.push("emphasis"):p.hoverState===HOVER_STATE_BLUR&&p.states.blur&&v.push("blur"),p.useStates(v)}function c(p,v){var b=p._zr,_=b.storage,w=0;_.traverse(function(x){x.isGroup||w++}),w>v.get("hoverLayerThreshold")&&!env.node&&!env.worker&&v.eachSeries(function(x){if(!x.preventUsingHoverLayer){var S=p._chartsMap[x.__viewId];S.__alive&&S.eachRendered(function(C){C.states.emphasis&&(C.states.emphasis.hoverLayer=!0)})}})}function u(p,v){var b=p.get("blendMode")||null;v.eachRendered(function(_){_.isGroup||(_.style.blend=b)})}function d(p,v){if(!p.preventAutoZ){var b=p.get("z")||0,_=p.get("zlevel")||0;v.eachRendered(function(w){return h(w,b,_,-1/0),!0})}}function h(p,v,b,_){var w=p.getTextContent(),x=p.getTextGuideLine(),S=p.isGroup;if(S)for(var C=p.childrenRef(),T=0;T<C.length;T++)_=Math.max(h(C[T],v,b,_),_);else p.z=v,p.zlevel=b,_=Math.max(p.z2,_);if(w&&(w.z=v,w.zlevel=b,isFinite(_)&&(w.z2=_+2)),x){var R=p.textGuideLineConfig;x.z=v,x.zlevel=b,isFinite(_)&&(x.z2=_+(R&&R.showAbove?1:-1))}return _}function f(p,v){v.eachRendered(function(b){if(!isElementRemoved(b)){var _=b.getTextContent(),w=b.getTextGuideLine();b.stateTransition&&(b.stateTransition=null),_&&_.stateTransition&&(_.stateTransition=null),w&&w.stateTransition&&(w.stateTransition=null),b.hasState()?(b.prevStates=b.currentStates,b.clearStates()):b.prevStates&&(b.prevStates=null)}})}function g(p,v){var b=p.getModel("stateAnimation"),_=p.isAnimationEnabled(),w=b.get("duration"),x=w>0?{duration:w,delay:b.get("delay"),easing:b.get("easing")}:null;v.eachRendered(function(S){if(S.states&&S.states.emphasis){if(isElementRemoved(S))return;if(S instanceof Path&&savePathStates(S),S.__dirty){var C=S.prevStates;C&&S.useStates(C)}if(_){S.stateTransition=x;var T=S.getTextContent(),R=S.getTextGuideLine();T&&(T.stateTransition=x),R&&(R.stateTransition=x)}S.__dirty&&l(S)}})}createExtensionAPI=function(p){return new(function(v){__extends$1(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.getCoordinateSystems=function(){return p._coordSysMgr.getCoordinateSystems()},b.prototype.getComponentByElement=function(_){for(;_;){var w=_.__ecComponentInfo;if(w!=null)return p._model.getComponent(w.mainType,w.index);_=_.parent}},b.prototype.enterEmphasis=function(_,w){enterEmphasis(_,w),markStatusToUpdate(p)},b.prototype.leaveEmphasis=function(_,w){leaveEmphasis(_,w),markStatusToUpdate(p)},b.prototype.enterBlur=function(_){enterBlur(_),markStatusToUpdate(p)},b.prototype.leaveBlur=function(_){leaveBlur(_),markStatusToUpdate(p)},b.prototype.enterSelect=function(_){enterSelect(_),markStatusToUpdate(p)},b.prototype.leaveSelect=function(_){leaveSelect(_),markStatusToUpdate(p)},b.prototype.getModel=function(){return p.getModel()},b.prototype.getViewOfComponentModel=function(_){return p.getViewOfComponentModel(_)},b.prototype.getViewOfSeriesModel=function(_){return p.getViewOfSeriesModel(_)},b}(ExtensionAPI))(p)},enableConnect=function(p){function v(b,_){for(var w=0;w<b.length;w++){var x=b[w];x[CONNECT_STATUS_KEY]=_}}each$f(eventActionMap,function(b,_){p._messageCenter.on(_,function(w){if(connectedGroups[p.group]&&p[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(w&&w.escapeConnect)return;var x=p.makeActionFromEvent(w),S=[];each$f(instances,function(C){C!==p&&C.group===p.group&&S.push(C)}),v(S,CONNECT_STATUS_PENDING),each$f(S,function(C){C[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&C.dispatchAction(x)}),v(S,CONNECT_STATUS_UPDATED)}})})}}(),o}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(s,o,n){var a=this;deprecateLog("ECharts#one is deprecated.");function l(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];o&&o.apply&&o.apply(this,c),a.off(s,l)}this.on.call(this,s,l,n)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(s){process.env.NODE_ENV!=="production"&&warn("Instance "+s+" has been disposed")}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(s,o,n){var a=!(n&&n.ssr);if(a){if(process.env.NODE_ENV!=="production"&&!s)throw new Error("Initialize failed: invalid dom.");var l=getInstanceByDom(s);if(l)return process.env.NODE_ENV!=="production"&&warn("There is a chart instance already initialized on the dom."),l;process.env.NODE_ENV!=="production"&&isDom(s)&&s.nodeName.toUpperCase()!=="CANVAS"&&(!s.clientWidth&&(!n||n.width==null)||!s.clientHeight&&(!n||n.height==null))&&warn("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload.")}var c=new ECharts(s,o,n);return c.id="ec_"+idBase++,instances[c.id]=c,a&&setAttribute(s,DOM_ATTRIBUTE_KEY,c.id),enableConnect(c),lifecycle.trigger("afterinit",c),c}function connect(s){if(isArray$1(s)){var o=s;s=null,each$f(o,function(n){n.group!=null&&(s=n.group)}),s=s||"g_"+groupIdBase++,each$f(o,function(n){n.group=s})}return connectedGroups[s]=!0,s}function disconnect(s){connectedGroups[s]=!1}var disConnect=disconnect;function dispose(s){isString$2(s)?s=instances[s]:s instanceof ECharts||(s=getInstanceByDom(s)),s instanceof ECharts&&!s.isDisposed()&&s.dispose()}function getInstanceByDom(s){return instances[getAttribute(s,DOM_ATTRIBUTE_KEY)]}function getInstanceById(s){return instances[s]}function registerTheme(s,o){themeStorage[s]=o}function registerPreprocessor(s){indexOf(optionPreprocessorFuncs,s)<0&&optionPreprocessorFuncs.push(s)}function registerProcessor(s,o){normalizeRegister(dataProcessorFuncs,s,o,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(s){registerUpdateLifecycle("afterinit",s)}function registerPostUpdate(s){registerUpdateLifecycle("afterupdate",s)}function registerUpdateLifecycle(s,o){lifecycle.on(s,o)}function registerAction(s,o,n){isFunction$1(o)&&(n=o,o="");var a=isObject$3(s)?s.type:[s,s={event:o}][0];s.event=(s.event||a).toLowerCase(),o=s.event,!eventActionMap[o]&&(assert(ACTION_REG.test(a)&&ACTION_REG.test(o)),actions[a]||(actions[a]={action:n,actionInfo:s}),eventActionMap[o]=a)}function registerCoordinateSystem(s,o){CoordinateSystemManager.register(s,o)}function getCoordinateSystemDimensions(s){var o=CoordinateSystemManager.get(s);if(o)return o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice()}function registerLayout(s,o){normalizeRegister(visualFuncs,s,o,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(s,o){normalizeRegister(visualFuncs,s,o,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(s,o,n,a,l){if((isFunction$1(o)||isObject$3(o))&&(n=o,o=a),process.env.NODE_ENV!=="production"){if(isNaN(o)||o==null)throw new Error("Illegal priority");each$f(s,function(u){assert(u.__raw!==n)})}if(!(indexOf(registeredTasks,n)>=0)){registeredTasks.push(n);var c=Scheduler.wrapStageHandler(n,l);c.__prio=o,c.__raw=n,s.push(c)}}function registerLoading(s,o){loadingEffects[s]=o}function setCanvasCreator(s){process.env.NODE_ENV!=="production"&&deprecateLog("setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead."),setPlatformAPI({createCanvas:s})}function registerMap$1(s,o,n){var a=getImpl("registerMap");a&&a(s,o,n)}function getMap(s){var o=getImpl("getMap");return o&&o(s)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop$1);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop$1);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop$1);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop$1);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop$1);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(s){ComponentModel.registerClass(s)},registerComponentView:function(s){ComponentView.registerClass(s)},registerSeriesModel:function(s){SeriesModel.registerClass(s)},registerChartView:function(s){ChartView.registerClass(s)},registerSubTypeDefaulter:function(s,o){ComponentModel.registerSubTypeDefaulter(s,o)},registerPainter:function(s,o){registerPainter(s,o)}};function use(s){if(isArray$1(s)){each$f(s,function(o){use(o)});return}indexOf(extensions,s)>=0||(extensions.push(s),isFunction$1(s)&&(s={install:s}),s.install(extensionRegisters))}function dataIndexMapValueLength(s){return s==null?0:s.length||1}function defaultKeyGetter(s){return s}var DataDiffer=function(){function s(o,n,a,l,c,u){this._old=o,this._new=n,this._oldKeyGetter=a||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=c,this._diffModeMultiple=u==="multiple"}return s.prototype.add=function(o){return this._add=o,this},s.prototype.update=function(o){return this._update=o,this},s.prototype.updateManyToOne=function(o){return this._updateManyToOne=o,this},s.prototype.updateOneToMany=function(o){return this._updateOneToMany=o,this},s.prototype.updateManyToMany=function(o){return this._updateManyToMany=o,this},s.prototype.remove=function(o){return this._remove=o,this},s.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},s.prototype._executeOneToOne=function(){var o=this._old,n=this._new,a={},l=new Array(o.length),c=new Array(n.length);this._initIndexMap(o,null,l,"_oldKeyGetter"),this._initIndexMap(n,a,c,"_newKeyGetter");for(var u=0;u<o.length;u++){var d=l[u],h=a[d],f=dataIndexMapValueLength(h);if(f>1){var g=h.shift();h.length===1&&(a[d]=h[0]),this._update&&this._update(g,u)}else f===1?(a[d]=null,this._update&&this._update(h,u)):this._remove&&this._remove(u)}this._performRestAdd(c,a)},s.prototype._executeMultiple=function(){var o=this._old,n=this._new,a={},l={},c=[],u=[];this._initIndexMap(o,a,c,"_oldKeyGetter"),this._initIndexMap(n,l,u,"_newKeyGetter");for(var d=0;d<c.length;d++){var h=c[d],f=a[h],g=l[h],p=dataIndexMapValueLength(f),v=dataIndexMapValueLength(g);if(p>1&&v===1)this._updateManyToOne&&this._updateManyToOne(g,f),l[h]=null;else if(p===1&&v>1)this._updateOneToMany&&this._updateOneToMany(g,f),l[h]=null;else if(p===1&&v===1)this._update&&this._update(g,f),l[h]=null;else if(p>1&&v>1)this._updateManyToMany&&this._updateManyToMany(g,f),l[h]=null;else if(p>1)for(var b=0;b<p;b++)this._remove&&this._remove(f[b]);else this._remove&&this._remove(f)}this._performRestAdd(u,l)},s.prototype._performRestAdd=function(o,n){for(var a=0;a<o.length;a++){var l=o[a],c=n[l],u=dataIndexMapValueLength(c);if(u>1)for(var d=0;d<u;d++)this._add&&this._add(c[d]);else u===1&&this._add&&this._add(c);n[l]=null}},s.prototype._initIndexMap=function(o,n,a,l){for(var c=this._diffModeMultiple,u=0;u<o.length;u++){var d="_ec_"+this[l](o[u],u);if(c||(a[u]=d),!!n){var h=n[d],f=dataIndexMapValueLength(h);f===0?(n[d]=u,c&&a.push(d)):f===1?n[d]=[h,u]:h.push(u)}}},s}(),DimensionUserOuput=function(){function s(o,n){this._encode=o,this._schema=n}return s.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},s.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},s}();function summarizeDimensions(s,o){var n={},a=n.encode={},l=createHashMap(),c=[],u=[],d={};each$f(s.dimensions,function(v){var b=s.getDimensionInfo(v),_=b.coordDim;if(_){process.env.NODE_ENV!=="production"&&assert(VISUAL_DIMENSIONS.get(_)==null);var w=b.coordDimIndex;getOrCreateEncodeArr(a,_)[w]=v,b.isExtraCoord||(l.set(_,1),mayLabelDimType(b.type)&&(c[0]=v),getOrCreateEncodeArr(d,_)[w]=s.getDimensionIndex(b.name)),b.defaultTooltip&&u.push(v)}VISUAL_DIMENSIONS.each(function(x,S){var C=getOrCreateEncodeArr(a,S),T=b.otherDims[S];T!=null&&T!==!1&&(C[T]=b.name)})});var h=[],f={};l.each(function(v,b){var _=a[b];f[b]=_[0],h=h.concat(_)}),n.dataDimsOnCoord=h,n.dataDimIndicesOnCoord=map$1(h,function(v){return s.getDimensionInfo(v).storeDimIndex}),n.encodeFirstDimNotExtra=f;var g=a.label;g&&g.length&&(c=g.slice());var p=a.tooltip;return p&&p.length?u=p.slice():u.length||(u=c.slice()),a.defaultedLabel=c,a.defaultedTooltip=u,n.userOutput=new DimensionUserOuput(d,o),n}function getOrCreateEncodeArr(s,o){return s.hasOwnProperty(o)||(s[o]=[]),s[o]}function getDimensionTypeByAxis(s){return s==="category"?"ordinal":s==="time"?"time":"float"}function mayLabelDimType(s){return!(s==="ordinal"||s==="time")}var SeriesDimensionDefine=function(){function s(o){this.otherDims={},o!=null&&extend(this,o)}return s}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function s(o){this.dimensions=o.dimensions,this._dimOmitted=o.dimensionOmitted,this.source=o.source,this._fullDimCount=o.fullDimensionCount,this._updateDimOmitted(o.dimensionOmitted)}return s.prototype.isDimensionOmitted=function(){return this._dimOmitted},s.prototype._updateDimOmitted=function(o){this._dimOmitted=o,o&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},s.prototype.getSourceDimensionIndex=function(o){return retrieve2(this._dimNameMap.get(o),-1)},s.prototype.getSourceDimension=function(o){var n=this.source.dimensionsDefine;if(n)return n[o]},s.prototype.makeStoreSchema=function(){for(var o=this._fullDimCount,n=shouldRetrieveDataByName(this.source),a=!shouldOmitUnusedDimensions(o),l="",c=[],u=0,d=0;u<o;u++){var h=void 0,f=void 0,g=void 0,p=this.dimensions[d];if(p&&p.storeDimIndex===u)h=n?p.name:null,f=p.type,g=p.ordinalMeta,d++;else{var v=this.getSourceDimension(u);v&&(h=n?v.name:null,f=v.type)}c.push({property:h,type:f,ordinalMeta:g}),n&&h!=null&&(!p||!p.isCalculationCoord)&&(l+=a?h.replace(/\`/g,"`1").replace(/\$/g,"`2"):h),l+="$",l+=dimTypeShort[f]||"f",g&&(l+=g.uid),l+="$"}var b=this.source,_=[b.seriesLayoutBy,b.startIndex,l].join("$$");return{dimensions:c,hash:_}},s.prototype.makeOutputDimensionNames=function(){for(var o=[],n=0,a=0;n<this._fullDimCount;n++){var l=void 0,c=this.dimensions[a];if(c&&c.storeDimIndex===n)c.isCalculationCoord||(l=c.name),a++;else{var u=this.getSourceDimension(n);u&&(l=u.name)}o.push(l)}return o},s.prototype.appendCalculationDimension=function(o){this.dimensions.push(o),o.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},s}();function isSeriesDataSchema(s){return s instanceof SeriesDataSchema}function createDimNameMap(s){for(var o=createHashMap(),n=0;n<(s||[]).length;n++){var a=s[n],l=isObject$3(a)?a.name:a;l!=null&&o.get(l)==null&&o.set(l,n)}return o}function ensureSourceDimNameMap(s){var o=inner$h(s);return o.dimNameMap||(o.dimNameMap=createDimNameMap(s.dimensionsDefine))}function shouldOmitUnusedDimensions(s){return s>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function s(o,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var a,l=!1;isSeriesDataSchema(o)?(a=o.dimensions,this._dimOmitted=o.isDimensionOmitted(),this._schema=o):(l=!0,a=o),a=a||["x","y"];for(var c={},u=[],d={},h=!1,f={},g=0;g<a.length;g++){var p=a[g],v=isString$2(p)?new SeriesDimensionDefine({name:p}):p instanceof SeriesDimensionDefine?p:new SeriesDimensionDefine(p),b=v.name;v.type=v.type||"float",v.coordDim||(v.coordDim=b,v.coordDimIndex=0);var _=v.otherDims=v.otherDims||{};u.push(b),c[b]=v,f[b]!=null&&(h=!0),v.createInvertedIndices&&(d[b]=[]),_.itemName===0&&(this._nameDimIdx=g),_.itemId===0&&(this._idDimIdx=g),process.env.NODE_ENV!=="production"&&assert(l||v.storeDimIndex>=0),l&&(v.storeDimIndex=g)}if(this.dimensions=u,this._dimInfos=c,this._initGetDimensionInfo(h),this.hostModel=n,this._invertedIndicesMap=d,this._dimOmitted){var w=this._dimIdxToName=createHashMap();each$f(u,function(x){w.set(c[x].storeDimIndex,x)})}}return s.prototype.getDimension=function(o){var n=this._recognizeDimIndex(o);if(n==null)return o;if(n=o,!this._dimOmitted)return this.dimensions[n];var a=this._dimIdxToName.get(n);if(a!=null)return a;var l=this._schema.getSourceDimension(n);if(l)return l.name},s.prototype.getDimensionIndex=function(o){var n=this._recognizeDimIndex(o);if(n!=null)return n;if(o==null)return-1;var a=this._getDimInfo(o);return a?a.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(o):-1},s.prototype._recognizeDimIndex=function(o){if(isNumber(o)||o!=null&&!isNaN(o)&&!this._getDimInfo(o)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(o)<0))return+o},s.prototype._getStoreDimIndex=function(o){var n=this.getDimensionIndex(o);if(process.env.NODE_ENV!=="production"&&n==null)throw new Error("Unknown dimension "+o);return n},s.prototype.getDimensionInfo=function(o){return this._getDimInfo(this.getDimension(o))},s.prototype._initGetDimensionInfo=function(o){var n=this._dimInfos;this._getDimInfo=o?function(a){return n.hasOwnProperty(a)?n[a]:void 0}:function(a){return n[a]}},s.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},s.prototype.mapDimension=function(o,n){var a=this._dimSummary;if(n==null)return a.encodeFirstDimNotExtra[o];var l=a.encode[o];return l?l[n]:null},s.prototype.mapDimensionsAll=function(o){var n=this._dimSummary,a=n.encode[o];return(a||[]).slice()},s.prototype.getStore=function(){return this._store},s.prototype.initData=function(o,n,a){var l=this,c;if(o instanceof DataStore&&(c=o),!c){var u=this.dimensions,d=isSourceInstance(o)||isArrayLike(o)?new DefaultDataProvider(o,u.length):o;c=new DataStore;var h=map(u,function(f){return{type:l._dimInfos[f].type,property:f}});c.initData(d,h,a)}this._store=c,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,c.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},s.prototype.appendData=function(o){var n=this._store.appendData(o);this._doInit(n[0],n[1])},s.prototype.appendValues=function(o,n){var a=this._store.appendValues(o,n&&n.length),l=a.start,c=a.end,u=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var d=l;d<c;d++){var h=d-l;this._nameList[d]=n[h],u&&makeIdFromName(this,d)}},s.prototype._updateOrdinalMeta=function(){for(var o=this._store,n=this.dimensions,a=0;a<n.length;a++){var l=this._dimInfos[n[a]];l.ordinalMeta&&o.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},s.prototype._shouldMakeIdFromName=function(){var o=this._store.getProvider();return this._idDimIdx==null&&o.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!o.fillStorage},s.prototype._doInit=function(o,n){if(!(o>=n)){var a=this._store,l=a.getProvider();this._updateOrdinalMeta();var c=this._nameList,u=this._idList,d=l.getSource().sourceFormat,h=d===SOURCE_FORMAT_ORIGINAL;if(h&&!l.pure)for(var f=[],g=o;g<n;g++){var p=l.getItem(g,f);if(!this.hasItemOption&&isDataItemOption(p)&&(this.hasItemOption=!0),p){var v=p.name;c[g]==null&&v!=null&&(c[g]=convertOptionIdName(v,null));var b=p.id;u[g]==null&&b!=null&&(u[g]=convertOptionIdName(b,null))}}if(this._shouldMakeIdFromName())for(var g=o;g<n;g++)makeIdFromName(this,g);prepareInvertedIndex(this)}},s.prototype.getApproximateExtent=function(o){return this._approximateExtent[o]||this._store.getDataExtent(this._getStoreDimIndex(o))},s.prototype.setApproximateExtent=function(o,n){n=this.getDimension(n),this._approximateExtent[n]=o.slice()},s.prototype.getCalculationInfo=function(o){return this._calculationInfo[o]},s.prototype.setCalculationInfo=function(o,n){isObject$1(o)?extend(this._calculationInfo,o):this._calculationInfo[o]=n},s.prototype.getName=function(o){var n=this.getRawIndex(o),a=this._nameList[n];return a==null&&this._nameDimIdx!=null&&(a=getIdNameFromStore(this,this._nameDimIdx,n)),a==null&&(a=""),a},s.prototype._getCategory=function(o,n){var a=this._store.get(o,n),l=this._store.getOrdinalMeta(o);return l?l.categories[a]:a},s.prototype.getId=function(o){return getId(this,this.getRawIndex(o))},s.prototype.count=function(){return this._store.count()},s.prototype.get=function(o,n){var a=this._store,l=this._dimInfos[o];if(l)return a.get(l.storeDimIndex,n)},s.prototype.getByRawIndex=function(o,n){var a=this._store,l=this._dimInfos[o];if(l)return a.getByRawIndex(l.storeDimIndex,n)},s.prototype.getIndices=function(){return this._store.getIndices()},s.prototype.getDataExtent=function(o){return this._store.getDataExtent(this._getStoreDimIndex(o))},s.prototype.getSum=function(o){return this._store.getSum(this._getStoreDimIndex(o))},s.prototype.getMedian=function(o){return this._store.getMedian(this._getStoreDimIndex(o))},s.prototype.getValues=function(o,n){var a=this,l=this._store;return isArray$1(o)?l.getValues(map(o,function(c){return a._getStoreDimIndex(c)}),n):l.getValues(o)},s.prototype.hasValue=function(o){for(var n=this._dimSummary.dataDimIndicesOnCoord,a=0,l=n.length;a<l;a++)if(isNaN(this._store.get(n[a],o)))return!1;return!0},s.prototype.indexOfName=function(o){for(var n=0,a=this._store.count();n<a;n++)if(this.getName(n)===o)return n;return-1},s.prototype.getRawIndex=function(o){return this._store.getRawIndex(o)},s.prototype.indexOfRawIndex=function(o){return this._store.indexOfRawIndex(o)},s.prototype.rawIndexOf=function(o,n){var a=o&&this._invertedIndicesMap[o];if(process.env.NODE_ENV!=="production"&&!a)throw new Error("Do not supported yet");var l=a&&a[n];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},s.prototype.indicesOfNearest=function(o,n,a){return this._store.indicesOfNearest(this._getStoreDimIndex(o),n,a)},s.prototype.each=function(o,n,a){isFunction$1(o)&&(a=n,n=o,o=[]);var l=a||this,c=map(normalizeDimensions(o),this._getStoreDimIndex,this);this._store.each(c,l?bind$1(n,l):n)},s.prototype.filterSelf=function(o,n,a){isFunction$1(o)&&(a=n,n=o,o=[]);var l=a||this,c=map(normalizeDimensions(o),this._getStoreDimIndex,this);return this._store=this._store.filter(c,l?bind$1(n,l):n),this},s.prototype.selectRange=function(o){var n=this,a={},l=keys(o);return each$f(l,function(c){var u=n._getStoreDimIndex(c);a[u]=o[c]}),this._store=this._store.selectRange(a),this},s.prototype.mapArray=function(o,n,a){isFunction$1(o)&&(a=n,n=o,o=[]),a=a||this;var l=[];return this.each(o,function(){l.push(n&&n.apply(this,arguments))},a),l},s.prototype.map=function(o,n,a,l){var c=a||l||this,u=map(normalizeDimensions(o),this._getStoreDimIndex,this),d=cloneListForMapAndSample(this);return d._store=this._store.map(u,c?bind$1(n,c):n),d},s.prototype.modify=function(o,n,a,l){var c=this,u=a||l||this;process.env.NODE_ENV!=="production"&&each$f(normalizeDimensions(o),function(h){var f=c.getDimensionInfo(h);f.isCalculationCoord||console.error("Danger: only stack dimension can be modified")});var d=map(normalizeDimensions(o),this._getStoreDimIndex,this);this._store.modify(d,u?bind$1(n,u):n)},s.prototype.downSample=function(o,n,a,l){var c=cloneListForMapAndSample(this);return c._store=this._store.downSample(this._getStoreDimIndex(o),n,a,l),c},s.prototype.minmaxDownSample=function(o,n){var a=cloneListForMapAndSample(this);return a._store=this._store.minmaxDownSample(this._getStoreDimIndex(o),n),a},s.prototype.lttbDownSample=function(o,n){var a=cloneListForMapAndSample(this);return a._store=this._store.lttbDownSample(this._getStoreDimIndex(o),n),a},s.prototype.getRawDataItem=function(o){return this._store.getRawDataItem(o)},s.prototype.getItemModel=function(o){var n=this.hostModel,a=this.getRawDataItem(o);return new Model(a,n,n&&n.ecModel)},s.prototype.diff=function(o){var n=this;return new DataDiffer(o?o.getStore().getIndices():[],this.getStore().getIndices(),function(a){return getId(o,a)},function(a){return getId(n,a)})},s.prototype.getVisual=function(o){var n=this._visual;return n&&n[o]},s.prototype.setVisual=function(o,n){this._visual=this._visual||{},isObject$1(o)?extend(this._visual,o):this._visual[o]=n},s.prototype.getItemVisual=function(o,n){var a=this._itemVisuals[o],l=a&&a[n];return l??this.getVisual(n)},s.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},s.prototype.ensureUniqueItemVisual=function(o,n){var a=this._itemVisuals,l=a[o];l||(l=a[o]={});var c=l[n];return c==null&&(c=this.getVisual(n),isArray$1(c)?c=c.slice():isObject$1(c)&&(c=extend({},c)),l[n]=c),c},s.prototype.setItemVisual=function(o,n,a){var l=this._itemVisuals[o]||{};this._itemVisuals[o]=l,isObject$1(n)?extend(l,n):l[n]=a},s.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},s.prototype.setLayout=function(o,n){isObject$1(o)?extend(this._layout,o):this._layout[o]=n},s.prototype.getLayout=function(o){return this._layout[o]},s.prototype.getItemLayout=function(o){return this._itemLayouts[o]},s.prototype.setItemLayout=function(o,n,a){this._itemLayouts[o]=a?extend(this._itemLayouts[o]||{},n):n},s.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},s.prototype.setItemGraphicEl=function(o,n){var a=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(a,this.dataType,o,n),this._graphicEls[o]=n},s.prototype.getItemGraphicEl=function(o){return this._graphicEls[o]},s.prototype.eachItemGraphicEl=function(o,n){each$f(this._graphicEls,function(a,l){a&&o&&o.call(n,a,l)})},s.prototype.cloneShallow=function(o){return o||(o=new s(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(o,this),o._store=this._store,o},s.prototype.wrapMethod=function(o,n){var a=this[o];isFunction$1(a)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(o),this[o]=function(){var l=a.apply(this,arguments);return n.apply(this,[l].concat(slice(arguments)))})},s.internalField=function(){prepareInvertedIndex=function(o){var n=o._invertedIndicesMap;each$f(n,function(a,l){var c=o._dimInfos[l],u=c.ordinalMeta,d=o._store;if(u){a=n[l]=new CtorInt32Array(u.categories.length);for(var h=0;h<a.length;h++)a[h]=INDEX_NOT_FOUND;for(var h=0;h<d.count();h++)a[d.get(c.storeDimIndex,h)]=h}})},getIdNameFromStore=function(o,n,a){return convertOptionIdName(o._getCategory(n,a),null)},getId=function(o,n){var a=o._idList[n];return a==null&&o._idDimIdx!=null&&(a=getIdNameFromStore(o,o._idDimIdx,n)),a==null&&(a=ID_PREFIX+n),a},normalizeDimensions=function(o){return isArray$1(o)||(o=o!=null?[o]:[]),o},cloneListForMapAndSample=function(o){var n=new s(o._schema?o._schema:map(o.dimensions,o._getDimInfo,o),o.hostModel);return transferProperties(n,o),n},transferProperties=function(o,n){each$f(TRANSFERABLE_PROPERTIES.concat(n.__wrappedMethods||[]),function(a){n.hasOwnProperty(a)&&(o[a]=n[a])}),o.__wrappedMethods=n.__wrappedMethods,each$f(CLONE_PROPERTIES,function(a){o[a]=clone$4(n[a])}),o._calculationInfo=extend({},n._calculationInfo)},makeIdFromName=function(o,n){var a=o._nameList,l=o._idList,c=o._nameDimIdx,u=o._idDimIdx,d=a[n],h=l[n];if(d==null&&c!=null&&(a[n]=d=getIdNameFromStore(o,c,n)),h==null&&u!=null&&(l[n]=h=getIdNameFromStore(o,u,n)),h==null&&d!=null){var f=o._nameRepeatCount,g=f[d]=(f[d]||0)+1;h=d,g>1&&(h+="__ec__"+g),l[n]=h}}}(),s}();function createDimensions(s,o){return prepareSeriesDataSchema(s,o).dimensions}function prepareSeriesDataSchema(s,o){isSourceInstance(s)||(s=createSourceFromSeriesDataOption(s)),o=o||{};var n=o.coordDimensions||[],a=o.dimensionsDefine||s.dimensionsDefine||[],l=createHashMap(),c=[],u=getDimCount(s,n,a,o.dimensionsCount),d=o.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(u),h=a===s.dimensionsDefine,f=h?ensureSourceDimNameMap(s):createDimNameMap(a),g=o.encodeDefine;!g&&o.encodeDefaulter&&(g=o.encodeDefaulter(s,u));for(var p=createHashMap(g),v=new CtorInt32Array$1(u),b=0;b<v.length;b++)v[b]=-1;function _(H){var j=v[H];if(j<0){var q=a[H],Y=isObject$3(q)?q:{name:q},ee=new SeriesDimensionDefine,te=Y.name;te!=null&&f.get(te)!=null&&(ee.name=ee.displayName=te),Y.type!=null&&(ee.type=Y.type),Y.displayName!=null&&(ee.displayName=Y.displayName);var re=c.length;return v[H]=re,ee.storeDimIndex=H,c.push(ee),ee}return c[j]}if(!d)for(var b=0;b<u;b++)_(b);p.each(function(H,j){var q=normalizeToArray(H).slice();if(q.length===1&&!isString$2(q[0])&&q[0]<0){p.set(j,!1);return}var Y=p.set(j,[]);each$f(q,function(ee,te){var re=isString$2(ee)?f.get(ee):ee;re!=null&&re<u&&(Y[te]=re,x(_(re),j,te))})});var w=0;each$f(n,function(H){var j,q,Y,ee;if(isString$2(H))j=H,ee={};else{ee=H,j=ee.name;var te=ee.ordinalMeta;ee.ordinalMeta=null,ee=extend({},ee),ee.ordinalMeta=te,q=ee.dimsDef,Y=ee.otherDims,ee.name=ee.coordDim=ee.coordDimIndex=ee.dimsDef=ee.otherDims=null}var re=p.get(j);if(re!==!1){if(re=normalizeToArray(re),!re.length)for(var ae=0;ae<(q&&q.length||1);ae++){for(;w<u&&_(w).coordDim!=null;)w++;w<u&&re.push(w++)}each$f(re,function(ue,ce){var le=_(ue);if(h&&ee.type!=null&&(le.type=ee.type),x(defaults(le,ee),j,ce),le.name==null&&q){var ie=q[ce];!isObject$3(ie)&&(ie={name:ie}),le.name=le.displayName=ie.name,le.defaultTooltip=ie.defaultTooltip}Y&&defaults(le.otherDims,Y)})}});function x(H,j,q){VISUAL_DIMENSIONS.get(j)!=null?H.otherDims[j]=q:(H.coordDim=j,H.coordDimIndex=q,l.set(j,!0))}var S=o.generateCoord,C=o.generateCoordCount,T=C!=null;C=S?C||1:0;var R=S||"value";function A(H){H.name==null&&(H.name=H.coordDim)}if(d)each$f(c,function(H){A(H)}),c.sort(function(H,j){return H.storeDimIndex-j.storeDimIndex});else for(var M=0;M<u;M++){var D=_(M),O=D.coordDim;O==null&&(D.coordDim=genCoordDimName(R,l,T),D.coordDimIndex=0,(!S||C<=0)&&(D.isExtraCoord=!0),C--),A(D),D.type==null&&(guessOrdinal(s,M)===BE_ORDINAL.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return removeDuplication(c),new SeriesDataSchema({source:s,dimensions:c,fullDimensionCount:u,dimensionOmitted:d})}function removeDuplication(s){for(var o=createHashMap(),n=0;n<s.length;n++){var a=s[n],l=a.name,c=o.get(l)||0;c>0&&(a.name=l+(c-1)),c++,o.set(l,c)}}function getDimCount(s,o,n,a){var l=Math.max(s.dimensionsDetectedCount||1,o.length,n.length,a||0);return each$f(o,function(c){var u;isObject$3(c)&&(u=c.dimsDef)&&(l=Math.max(l,u.length))}),l}function genCoordDimName(s,o,n){if(n||o.hasKey(s)){for(var a=0;o.hasKey(s+a);)a++;s+=a}return o.set(s,!0),s}var CoordSysInfo=function(){function s(o){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=o}return s}();function getCoordSysInfoBySeries(s){var o=s.get("coordinateSystem"),n=new CoordSysInfo(o),a=fetchers[o];if(a)return a(s,n,n.axisMap,n.categoryAxisMap),n}var fetchers={cartesian2d:function(s,o,n,a){var l=s.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],c=s.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"){if(!l)throw new Error('xAxis "'+retrieve(s.get("xAxisIndex"),s.get("xAxisId"),0)+'" not found');if(!c)throw new Error('yAxis "'+retrieve(s.get("xAxisIndex"),s.get("yAxisId"),0)+'" not found')}o.coordSysDims=["x","y"],n.set("x",l),n.set("y",c),isCategory(l)&&(a.set("x",l),o.firstCategoryDimIndex=0),isCategory(c)&&(a.set("y",c),o.firstCategoryDimIndex==null&&(o.firstCategoryDimIndex=1))},singleAxis:function(s,o,n,a){var l=s.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"&&!l)throw new Error("singleAxis should be specified.");o.coordSysDims=["single"],n.set("single",l),isCategory(l)&&(a.set("single",l),o.firstCategoryDimIndex=0)},polar:function(s,o,n,a){var l=s.getReferringComponents("polar",SINGLE_REFERRING).models[0],c=l.findAxisModel("radiusAxis"),u=l.findAxisModel("angleAxis");if(process.env.NODE_ENV!=="production"){if(!u)throw new Error("angleAxis option not found");if(!c)throw new Error("radiusAxis option not found")}o.coordSysDims=["radius","angle"],n.set("radius",c),n.set("angle",u),isCategory(c)&&(a.set("radius",c),o.firstCategoryDimIndex=0),isCategory(u)&&(a.set("angle",u),o.firstCategoryDimIndex==null&&(o.firstCategoryDimIndex=1))},geo:function(s,o,n,a){o.coordSysDims=["lng","lat"]},parallel:function(s,o,n,a){var l=s.ecModel,c=l.getComponent("parallel",s.get("parallelIndex")),u=o.coordSysDims=c.dimensions.slice();each$f(c.parallelAxisIndex,function(d,h){var f=l.getComponent("parallelAxis",d),g=u[h];n.set(g,f),isCategory(f)&&(a.set(g,f),o.firstCategoryDimIndex==null&&(o.firstCategoryDimIndex=h))})}};function isCategory(s){return s.get("type")==="category"}function enableDataStack(s,o,n){n=n||{};var a=n.byIndex,l=n.stackedCoordDimension,c,u,d;isLegacyDimensionsInput(o)?c=o:(u=o.schema,c=u.dimensions,d=o.store);var h=!!(s&&s.get("stack")),f,g,p,v;if(each$f(c,function(C,T){isString$2(C)&&(c[T]=C={name:C}),h&&!C.isExtraCoord&&(!a&&!f&&C.ordinalMeta&&(f=C),!g&&C.type!=="ordinal"&&C.type!=="time"&&(!l||l===C.coordDim)&&(g=C))}),g&&!a&&!f&&(a=!0),g){p="__\0ecstackresult_"+s.id,v="__\0ecstackedover_"+s.id,f&&(f.createInvertedIndices=!0);var b=g.coordDim,_=g.type,w=0;each$f(c,function(C){C.coordDim===b&&w++});var x={name:p,coordDim:b,coordDimIndex:w,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:c.length},S={name:v,coordDim:v,coordDimIndex:w+1,type:_,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:c.length+1};u?(d&&(x.storeDimIndex=d.ensureCalculationDimension(v,_),S.storeDimIndex=d.ensureCalculationDimension(p,_)),u.appendCalculationDimension(x),u.appendCalculationDimension(S)):(c.push(x),c.push(S))}return{stackedDimension:g&&g.name,stackedByDimension:f&&f.name,isStackedByIndex:a,stackedOverDimension:v,stackResultDimension:p}}function isLegacyDimensionsInput(s){return!isSeriesDataSchema(s.schema)}function isDimensionStacked(s,o){return!!o&&o===s.getCalculationInfo("stackedDimension")}function getStackedDimension(s,o){return isDimensionStacked(s,o)?s.getCalculationInfo("stackResultDimension"):o}function getCoordSysDimDefs(s,o){var n=s.get("coordinateSystem"),a=CoordinateSystemManager.get(n),l;return o&&o.coordSysDims&&(l=map$1(o.coordSysDims,function(c){var u={name:c},d=o.axisMap.get(c);if(d){var h=d.get("type");u.type=getDimensionTypeByAxis(h)}return u})),l||(l=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(s,o,n){var a,l;return n&&each$f(s,function(c,u){var d=c.coordDim,h=n.categoryAxisMap.get(d);h&&(a==null&&(a=u),c.ordinalMeta=h.getOrdinalMeta(),o&&(c.createInvertedIndices=!0)),c.otherDims.itemName!=null&&(l=!0)}),!l&&a!=null&&(s[a].otherDims.itemName=0),a}function createSeriesData(s,o,n){n=n||{};var a=o.getSourceManager(),l,c=!1;s?(c=!0,l=createSourceFromSeriesDataOption(s)):(l=a.getSource(),c=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var u=getCoordSysInfoBySeries(o),d=getCoordSysDimDefs(o,u),h=n.useEncodeDefaulter,f=isFunction$1(h)?h:h?curry$1(makeSeriesEncodeForAxisCoordSys,d,o):null,g={coordDimensions:d,generateCoord:n.generateCoord,encodeDefine:o.getEncode(),encodeDefaulter:f,canOmitUnusedDimensions:!c},p=prepareSeriesDataSchema(l,g),v=injectOrdinalMeta(p.dimensions,n.createInvertedIndices,u),b=c?null:a.getSharedDataStore(p),_=enableDataStack(o,{schema:p,store:b}),w=new SeriesData(p,o);w.setCalculationInfo(_);var x=v!=null&&isNeedCompleteOrdinalData(l)?function(S,C,T,R){return R===v?T:this.defaultDimValueGetter(S,C,T,R)}:null;return w.hasItemOption=!1,w.initData(c?l:b,null,x),w}function isNeedCompleteOrdinalData(s){if(s.sourceFormat===SOURCE_FORMAT_ORIGINAL){var o=firstDataNotNull(s.data||[]);return!isArray$1(getDataItemValue(o))}}function firstDataNotNull(s){for(var o=0;o<s.length&&s[o]==null;)o++;return s[o]}var Scale=function(){function s(o){this._setting=o||{},this._extent=[1/0,-1/0]}return s.prototype.getSetting=function(o){return this._setting[o]},s.prototype.unionExtent=function(o){var n=this._extent;o[0]<n[0]&&(n[0]=o[0]),o[1]>n[1]&&(n[1]=o[1])},s.prototype.unionExtentFromData=function(o,n){this.unionExtent(o.getApproximateExtent(n))},s.prototype.getExtent=function(){return this._extent.slice()},s.prototype.setExtent=function(o,n){var a=this._extent;isNaN(o)||(a[0]=o),isNaN(n)||(a[1]=n)},s.prototype.isInExtentRange=function(o){return this._extent[0]<=o&&this._extent[1]>=o},s.prototype.isBlank=function(){return this._isBlank},s.prototype.setBlank=function(o){this._isBlank=o},s}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function s(o){this.categories=o.categories||[],this._needCollect=o.needCollect,this._deduplication=o.deduplication,this.uid=++uidBase}return s.createByAxisModel=function(o){var n=o.option,a=n.data,l=a&&map$1(a,getName);return new s({categories:l,needCollect:!l,deduplication:n.dedplication!==!1})},s.prototype.getOrdinal=function(o){return this._getOrCreateMap().get(o)},s.prototype.parseAndCollect=function(o){var n,a=this._needCollect;if(!isString$2(o)&&!a)return o;if(a&&!this._deduplication)return n=this.categories.length,this.categories[n]=o,n;var l=this._getOrCreateMap();return n=l.get(o),n==null&&(a?(n=this.categories.length,this.categories[n]=o,l.set(o,n)):n=NaN),n},s.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},s}();function getName(s){return isObject$3(s)&&s.value!=null?s.value:s+""}function isValueNice(s){var o=Math.pow(10,quantityExponent(Math.abs(s))),n=Math.abs(s/o);return n===0||n===1||n===2||n===3||n===5}function isIntervalOrLogScale(s){return s.type==="interval"||s.type==="log"}function intervalScaleNiceTicks(s,o,n,a){var l={},c=s[1]-s[0],u=l.interval=nice(c/o,!0);n!=null&&u<n&&(u=l.interval=n),a!=null&&u>a&&(u=l.interval=a);var d=l.intervalPrecision=getIntervalPrecision(u),h=l.niceTickExtent=[round$3(Math.ceil(s[0]/u)*u,d),round$3(Math.floor(s[1]/u)*u,d)];return fixExtent(h,s),l}function increaseInterval(s){var o=Math.pow(10,quantityExponent(s)),n=s/o;return n?n===2?n=3:n===3?n=5:n*=2:n=1,round$3(n*o)}function getIntervalPrecision(s){return getPrecision(s)+2}function clamp(s,o,n){s[o]=Math.max(Math.min(s[o],n[1]),n[0])}function fixExtent(s,o){!isFinite(s[0])&&(s[0]=o[0]),!isFinite(s[1])&&(s[1]=o[1]),clamp(s,0,o),clamp(s,1,o),s[0]>s[1]&&(s[0]=s[1])}function contain$1(s,o){return s>=o[0]&&s<=o[1]}function normalize$2(s,o){return o[1]===o[0]?.5:(s-o[0])/(o[1]-o[0])}function scale(s,o){return s*(o[1]-o[0])+o[0]}var OrdinalScale=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;a.type="ordinal";var l=a.getSetting("ordinalMeta");return l||(l=new OrdinalMeta({})),isArray$1(l)&&(l=new OrdinalMeta({categories:map$1(l,function(c){return isObject$3(c)?c.value:c})})),a._ordinalMeta=l,a._extent=a.getSetting("extent")||[0,l.categories.length-1],a}return o.prototype.parse=function(n){return n==null?NaN:isString$2(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},o.prototype.contain=function(n){return n=this.parse(n),contain$1(n,this._extent)&&this._ordinalMeta.categories[n]!=null},o.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),normalize$2(n,this._extent)},o.prototype.scale=function(n){return n=Math.round(scale(n,this._extent)),this.getRawOrdinalNumber(n)},o.prototype.getTicks=function(){for(var n=[],a=this._extent,l=a[0];l<=a[1];)n.push({value:l}),l++;return n},o.prototype.getMinorTicks=function(n){},o.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=n.ordinalNumbers,l=this._ordinalNumbersByTick=[],c=this._ticksByOrdinalNumber=[],u=0,d=this._ordinalMeta.categories.length,h=Math.min(d,a.length);u<h;++u){var f=a[u];l[u]=f,c[f]=u}for(var g=0;u<d;++u){for(;c[g]!=null;)g++;l.push(g),c[g]=u}},o.prototype._getTickNumber=function(n){var a=this._ticksByOrdinalNumber;return a&&n>=0&&n<a.length?a[n]:n},o.prototype.getRawOrdinalNumber=function(n){var a=this._ordinalNumbersByTick;return a&&n>=0&&n<a.length?a[n]:n},o.prototype.getLabel=function(n){if(!this.isBlank()){var a=this.getRawOrdinalNumber(n.value),l=this._ordinalMeta.categories[a];return l==null?"":l+""}},o.prototype.count=function(){return this._extent[1]-this._extent[0]+1},o.prototype.unionExtentFromData=function(n,a){this.unionExtent(n.getApproximateExtent(a))},o.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},o.prototype.getOrdinalMeta=function(){return this._ordinalMeta},o.prototype.calcNiceTicks=function(){},o.prototype.calcNiceExtent=function(){},o.type="ordinal",o}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return o.prototype.parse=function(n){return n},o.prototype.contain=function(n){return contain$1(n,this._extent)},o.prototype.normalize=function(n){return normalize$2(n,this._extent)},o.prototype.scale=function(n){return scale(n,this._extent)},o.prototype.setExtent=function(n,a){var l=this._extent;isNaN(n)||(l[0]=parseFloat(n)),isNaN(a)||(l[1]=parseFloat(a))},o.prototype.unionExtent=function(n){var a=this._extent;n[0]<a[0]&&(a[0]=n[0]),n[1]>a[1]&&(a[1]=n[1]),this.setExtent(a[0],a[1])},o.prototype.getInterval=function(){return this._interval},o.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(n)},o.prototype.getTicks=function(n){var a=this._interval,l=this._extent,c=this._niceExtent,u=this._intervalPrecision,d=[];if(!a)return d;var h=1e4;l[0]<c[0]&&(n?d.push({value:roundNumber(c[0]-a,u)}):d.push({value:l[0]}));for(var f=c[0];f<=c[1]&&(d.push({value:f}),f=roundNumber(f+a,u),f!==d[d.length-1].value);)if(d.length>h)return[];var g=d.length?d[d.length-1].value:c[1];return l[1]>g&&(n?d.push({value:roundNumber(g+a,u)}):d.push({value:l[1]})),d},o.prototype.getMinorTicks=function(n){for(var a=this.getTicks(!0),l=[],c=this.getExtent(),u=1;u<a.length;u++){for(var d=a[u],h=a[u-1],f=0,g=[],p=d.value-h.value,v=p/n;f<n-1;){var b=roundNumber(h.value+(f+1)*v);b>c[0]&&b<c[1]&&g.push(b),f++}l.push(g)}return l},o.prototype.getLabel=function(n,a){if(n==null)return"";var l=a&&a.precision;l==null?l=getPrecision(n.value)||0:l==="auto"&&(l=this._intervalPrecision);var c=roundNumber(n.value,l,!0);return addCommas(c)},o.prototype.calcNiceTicks=function(n,a,l){n=n||5;var c=this._extent,u=c[1]-c[0];if(isFinite(u)){u<0&&(u=-u,c.reverse());var d=intervalScaleNiceTicks(c,n,a,l);this._intervalPrecision=d.intervalPrecision,this._interval=d.interval,this._niceExtent=d.niceTickExtent}},o.prototype.calcNiceExtent=function(n){var a=this._extent;if(a[0]===a[1])if(a[0]!==0){var l=Math.abs(a[0]);n.fixMax||(a[1]+=l/2),a[0]-=l/2}else a[1]=1;var c=a[1]-a[0];isFinite(c)||(a[0]=0,a[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var u=this._interval;n.fixMin||(a[0]=roundNumber(Math.floor(a[0]/u)*u)),n.fixMax||(a[1]=roundNumber(Math.ceil(a[1]/u)*u))},o.prototype.setNiceExtent=function(n,a){this._niceExtent=[n,a]},o.type="interval",o}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(s){return isArray$1(s)?supportFloat32Array?new Float32Array(s):s:new Float32ArrayCtor(s)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(s){return s.get("stack")||STACK_PREFIX+s.seriesIndex}function getAxisKey$1(s){return s.dim+s.index}function getLayoutOnAxis(s){var o=[],n=s.axis,a="axis0";if(n.type==="category"){for(var l=n.getBandWidth(),c=0;c<s.count;c++)o.push(defaults({bandWidth:l,axisKey:a,stackId:STACK_PREFIX+c},s));for(var u=doCalBarWidthAndOffset(o),d=[],c=0;c<s.count;c++){var h=u[a][STACK_PREFIX+c];h.offsetCenter=h.offset+h.width/2,d.push(h)}return d}}function prepareLayoutBarSeries(s,o){var n=[];return o.eachSeriesByType(s,function(a){isOnCartesian(a)&&n.push(a)}),n}function getValueAxesMinGaps(s){var o={};each$f(s,function(h){var f=h.coordinateSystem,g=f.getBaseAxis();if(!(g.type!=="time"&&g.type!=="value"))for(var p=h.getData(),v=g.dim+"_"+g.index,b=p.getDimensionIndex(p.mapDimension(g.dim)),_=p.getStore(),w=0,x=_.count();w<x;++w){var S=_.get(b,w);o[v]?o[v].push(S):o[v]=[S]}});var n={};for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];if(l){l.sort(function(h,f){return h-f});for(var c=null,u=1;u<l.length;++u){var d=l[u]-l[u-1];d>0&&(c=c===null?d:Math.min(c,d))}n[a]=c}}return n}function makeColumnLayout(s){var o=getValueAxesMinGaps(s),n=[];return each$f(s,function(a){var l=a.coordinateSystem,c=l.getBaseAxis(),u=c.getExtent(),d;if(c.type==="category")d=c.getBandWidth();else if(c.type==="value"||c.type==="time"){var h=c.dim+"_"+c.index,f=o[h],g=Math.abs(u[1]-u[0]),p=c.scale.getExtent(),v=Math.abs(p[1]-p[0]);d=f?g/v*f:g}else{var b=a.getData();d=Math.abs(u[1]-u[0])/b.count()}var _=parsePercent(a.get("barWidth"),d),w=parsePercent(a.get("barMaxWidth"),d),x=parsePercent(a.get("barMinWidth")||(isInLargeMode(a)?.5:1),d),S=a.get("barGap"),C=a.get("barCategoryGap");n.push({bandWidth:d,barWidth:_,barMaxWidth:w,barMinWidth:x,barGap:S,barCategoryGap:C,axisKey:getAxisKey$1(c),stackId:getSeriesStackId$1(a)})}),doCalBarWidthAndOffset(n)}function doCalBarWidthAndOffset(s){var o={};each$f(s,function(a,l){var c=a.axisKey,u=a.bandWidth,d=o[c]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},h=d.stacks;o[c]=d;var f=a.stackId;h[f]||d.autoWidthCount++,h[f]=h[f]||{width:0,maxWidth:0};var g=a.barWidth;g&&!h[f].width&&(h[f].width=g,g=Math.min(d.remainedWidth,g),d.remainedWidth-=g);var p=a.barMaxWidth;p&&(h[f].maxWidth=p);var v=a.barMinWidth;v&&(h[f].minWidth=v);var b=a.barGap;b!=null&&(d.gap=b);var _=a.barCategoryGap;_!=null&&(d.categoryGap=_)});var n={};return each$f(o,function(a,l){n[l]={};var c=a.stacks,u=a.bandWidth,d=a.categoryGap;if(d==null){var h=keys(c).length;d=Math.max(35-h*4,15)+"%"}var f=parsePercent(d,u),g=parsePercent(a.gap,1),p=a.remainedWidth,v=a.autoWidthCount,b=(p-f)/(v+(v-1)*g);b=Math.max(b,0),each$f(c,function(S){var C=S.maxWidth,T=S.minWidth;if(S.width){var R=S.width;C&&(R=Math.min(R,C)),T&&(R=Math.max(R,T)),S.width=R,p-=R+g*R,v--}else{var R=b;C&&C<R&&(R=Math.min(C,p)),T&&T>R&&(R=T),R!==b&&(S.width=R,p-=R+g*R,v--)}}),b=(p-f)/(v+(v-1)*g),b=Math.max(b,0);var _=0,w;each$f(c,function(S,C){S.width||(S.width=b),w=S,_+=S.width*(1+g)}),w&&(_-=w.width*g);var x=-_/2;each$f(c,function(S,C){n[l][C]=n[l][C]||{bandWidth:u,offset:x,width:S.width},x+=S.width*(1+g)})}),n}function retrieveColumnLayout(s,o,n){if(s&&o){var a=s[getAxisKey$1(o)];return a}}function layout$3(s,o){var n=prepareLayoutBarSeries(s,o),a=makeColumnLayout(n);each$f(n,function(l){var c=l.getData(),u=l.coordinateSystem,d=u.getBaseAxis(),h=getSeriesStackId$1(l),f=a[getAxisKey$1(d)][h],g=f.offset,p=f.width;c.setLayout({bandWidth:f.bandWidth,offset:g,size:p})})}function createProgressiveLayout(s){return{seriesType:s,plan:createRenderPlanner(),reset:function(o){if(isOnCartesian(o)){var n=o.getData(),a=o.coordinateSystem,l=a.getBaseAxis(),c=a.getOtherAxis(l),u=n.getDimensionIndex(n.mapDimension(c.dim)),d=n.getDimensionIndex(n.mapDimension(l.dim)),h=o.get("showBackground",!0),f=n.mapDimension(c.dim),g=n.getCalculationInfo("stackResultDimension"),p=isDimensionStacked(n,f)&&!!n.getCalculationInfo("stackedOnSeries"),v=c.isHorizontal(),b=getValueAxisStart(l,c),_=isInLargeMode(o),w=o.get("barMinHeight")||0,x=g&&n.getDimensionIndex(g),S=n.getLayout("size"),C=n.getLayout("offset");return{progress:function(T,R){for(var A=T.count,M=_&&createFloat32Array(A*3),D=_&&h&&createFloat32Array(A*3),O=_&&createFloat32Array(A),H=a.master.getRect(),j=v?H.width:H.height,q,Y=R.getStore(),ee=0;(q=T.next())!=null;){var te=Y.get(p?x:u,q),re=Y.get(d,q),ae=b,ue=void 0;p&&(ue=+te-Y.get(u,q));var ce=void 0,le=void 0,ie=void 0,de=void 0;if(v){var ge=a.dataToPoint([te,re]);if(p){var pe=a.dataToPoint([ue,re]);ae=pe[0]}ce=ae,le=ge[1]+C,ie=ge[0]-ae,de=S,Math.abs(ie)<w&&(ie=(ie<0?-1:1)*w)}else{var ge=a.dataToPoint([re,te]);if(p){var pe=a.dataToPoint([re,ue]);ae=pe[1]}ce=ge[0]+C,le=ae,ie=S,de=ge[1]-ae,Math.abs(de)<w&&(de=(de<=0?-1:1)*w)}_?(M[ee]=ce,M[ee+1]=le,M[ee+2]=v?ie:de,D&&(D[ee]=v?H.x:ce,D[ee+1]=v?le:H.y,D[ee+2]=j),O[q]=q):R.setItemLayout(q,{x:ce,y:le,width:ie,height:de}),ee+=3}_&&R.setLayout({largePoints:M,largeDataIndices:O,largeBackgroundPoints:D,valueAxisHorizontal:v})}}}}}}function isOnCartesian(s){return s.coordinateSystem&&s.coordinateSystem.type==="cartesian2d"}function isInLargeMode(s){return s.pipelineContext&&s.pipelineContext.large}function getValueAxisStart(s,o){var n=o.model.get("startValue");return n||(n=0),o.toGlobalCoord(o.dataToCoord(o.type==="log"?n>0?n:1:n))}var bisect=function(s,o,n,a){for(;n<a;){var l=n+a>>>1;s[l][1]<o?n=l+1:a=l}return n},TimeScale=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="time",a}return o.prototype.getLabel=function(n){var a=this.getSetting("useUTC");return format$1(n.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,a,this.getSetting("locale"))},o.prototype.getFormattedLabel=function(n,a,l){var c=this.getSetting("useUTC"),u=this.getSetting("locale");return leveledFormat(n,a,l,u,c)},o.prototype.getTicks=function(){var n=this._interval,a=this._extent,l=[];if(!n)return l;l.push({value:a[0],level:0});var c=this.getSetting("useUTC"),u=getIntervalTicks(this._minLevelUnit,this._approxInterval,c,a);return l=l.concat(u),l.push({value:a[1],level:0}),l},o.prototype.calcNiceExtent=function(n){var a=this._extent;if(a[0]===a[1]&&(a[0]-=ONE_DAY,a[1]+=ONE_DAY),a[1]===-1/0&&a[0]===1/0){var l=new Date;a[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),a[0]=a[1]-ONE_DAY}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},o.prototype.calcNiceTicks=function(n,a,l){n=n||10;var c=this._extent,u=c[1]-c[0];this._approxInterval=u/n,a!=null&&this._approxInterval<a&&(this._approxInterval=a),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var d=scaleIntervals.length,h=Math.min(bisect(scaleIntervals,this._approxInterval,0,d),d-1);this._interval=scaleIntervals[h][1],this._minLevelUnit=scaleIntervals[Math.max(h-1,0)][0]},o.prototype.parse=function(n){return isNumber(n)?n:+parseDate(n)},o.prototype.contain=function(n){return contain$1(this.parse(n),this._extent)},o.prototype.normalize=function(n){return normalize$2(this.parse(n),this._extent)},o.prototype.scale=function(n){return scale(n,this._extent)},o.type="time",o}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(s,o,n,a){var l=parseDate(o),c=parseDate(n),u=function(_){return getUnitValue(l,_,a)===getUnitValue(c,_,a)},d=function(){return u("year")},h=function(){return d()&&u("month")},f=function(){return h()&&u("day")},g=function(){return f()&&u("hour")},p=function(){return g()&&u("minute")},v=function(){return p()&&u("second")},b=function(){return v()&&u("millisecond")};switch(s){case"year":return d();case"month":return h();case"day":return f();case"hour":return g();case"minute":return p();case"second":return v();case"millisecond":return b()}}function getDateInterval(s,o){return s/=ONE_DAY,s>16?16:s>7.5?7:s>3.5?4:s>1.5?2:1}function getMonthInterval(s){var o=30*ONE_DAY;return s/=o,s>6?6:s>3?3:s>2?2:1}function getHourInterval(s){return s/=ONE_HOUR,s>12?12:s>6?6:s>3.5?4:s>2?2:1}function getMinutesAndSecondsInterval(s,o){return s/=o?ONE_MINUTE:ONE_SECOND,s>30?30:s>20?20:s>15?15:s>10?10:s>5?5:s>2?2:1}function getMillisecondsInterval(s){return nice(s,!0)}function getFirstTimestampOfUnit(s,o,n){var a=new Date(s);switch(getPrimaryTimeUnit(o)){case"year":case"month":a[monthSetterName(n)](0);case"day":a[dateSetterName(n)](1);case"hour":a[hoursSetterName(n)](0);case"minute":a[minutesSetterName(n)](0);case"second":a[secondsSetterName(n)](0),a[millisecondsSetterName(n)](0)}return a.getTime()}function getIntervalTicks(s,o,n,a){var l=1e4,c=timeUnits,u=0;function d(j,q,Y,ee,te,re,ae){for(var ue=new Date(q),ce=q,le=ue[ee]();ce<Y&&ce<=a[1];)ae.push({value:ce}),le+=j,ue[te](le),ce=ue.getTime();ae.push({value:ce,notAdd:!0})}function h(j,q,Y){var ee=[],te=!q.length;if(!isUnitValueSame(getPrimaryTimeUnit(j),a[0],a[1],n)){te&&(q=[{value:getFirstTimestampOfUnit(new Date(a[0]),j,n)},{value:a[1]}]);for(var re=0;re<q.length-1;re++){var ae=q[re].value,ue=q[re+1].value;if(ae!==ue){var ce=void 0,le=void 0,ie=void 0,de=!1;switch(j){case"year":ce=Math.max(1,Math.round(o/ONE_DAY/365)),le=fullYearGetterName(n),ie=fullYearSetterName(n);break;case"half-year":case"quarter":case"month":ce=getMonthInterval(o),le=monthGetterName(n),ie=monthSetterName(n);break;case"week":case"half-week":case"day":ce=getDateInterval(o),le=dateGetterName(n),ie=dateSetterName(n),de=!0;break;case"half-day":case"quarter-day":case"hour":ce=getHourInterval(o),le=hoursGetterName(n),ie=hoursSetterName(n);break;case"minute":ce=getMinutesAndSecondsInterval(o,!0),le=minutesGetterName(n),ie=minutesSetterName(n);break;case"second":ce=getMinutesAndSecondsInterval(o,!1),le=secondsGetterName(n),ie=secondsSetterName(n);break;case"millisecond":ce=getMillisecondsInterval(o),le=millisecondsGetterName(n),ie=millisecondsSetterName(n);break}d(ce,ae,ue,le,ie,de,ee),j==="year"&&Y.length>1&&re===0&&Y.unshift({value:Y[0].value-ce})}}for(var re=0;re<ee.length;re++)Y.push(ee[re]);return ee}}for(var f=[],g=[],p=0,v=0,b=0;b<c.length&&u++<l;++b){var _=getPrimaryTimeUnit(c[b]);if(isPrimaryTimeUnit(c[b])){h(c[b],f[f.length-1]||[],g);var w=c[b+1]?getPrimaryTimeUnit(c[b+1]):null;if(_!==w){if(g.length){v=p,g.sort(function(j,q){return j.value-q.value});for(var x=[],S=0;S<g.length;++S){var C=g[S].value;(S===0||g[S-1].value!==C)&&(x.push(g[S]),C>=a[0]&&C<=a[1]&&p++)}var T=(a[1]-a[0])/o;if(p>T*1.5&&v>T/1.5||(f.push(x),p>T||s===c[b]))break}g=[]}}}process.env.NODE_ENV!=="production"&&u>=l&&warn("Exceed safe limit.");for(var R=filter(map$1(f,function(j){return filter(j,function(q){return q.value>=a[0]&&q.value<=a[1]&&!q.notAdd})}),function(j){return j.length>0}),A=[],M=R.length-1,b=0;b<R.length;++b)for(var D=R[b],O=0;O<D.length;++O)A.push({value:D[O].value,level:M-b});A.sort(function(j,q){return j.value-q.value});for(var H=[],b=0;b<A.length;++b)(b===0||A[b].value!==A[b-1].value)&&H.push(A[b]);return H}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new IntervalScale,n._interval=0,n}return o.prototype.getTicks=function(n){var a=this._originalScale,l=this._extent,c=a.getExtent(),u=intervalScaleProto.getTicks.call(this,n);return map$1(u,function(d){var h=d.value,f=round$3(mathPow$1(this.base,h));return f=h===l[0]&&this._fixMin?fixRoundingError(f,c[0]):f,f=h===l[1]&&this._fixMax?fixRoundingError(f,c[1]):f,{value:f}},this)},o.prototype.setExtent=function(n,a){var l=mathLog$1(this.base);n=mathLog$1(Math.max(0,n))/l,a=mathLog$1(Math.max(0,a))/l,intervalScaleProto.setExtent.call(this,n,a)},o.prototype.getExtent=function(){var n=this.base,a=scaleProto.getExtent.call(this);a[0]=mathPow$1(n,a[0]),a[1]=mathPow$1(n,a[1]);var l=this._originalScale,c=l.getExtent();return this._fixMin&&(a[0]=fixRoundingError(a[0],c[0])),this._fixMax&&(a[1]=fixRoundingError(a[1],c[1])),a},o.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var a=this.base;n[0]=mathLog$1(n[0])/mathLog$1(a),n[1]=mathLog$1(n[1])/mathLog$1(a),scaleProto.unionExtent.call(this,n)},o.prototype.unionExtentFromData=function(n,a){this.unionExtent(n.getApproximateExtent(a))},o.prototype.calcNiceTicks=function(n){n=n||10;var a=this._extent,l=a[1]-a[0];if(!(l===1/0||l<=0)){var c=quantity(l),u=n/l*c;for(u<=.5&&(c*=10);!isNaN(c)&&Math.abs(c)<1&&Math.abs(c)>0;)c*=10;var d=[round$3(mathCeil$1(a[0]/c)*c),round$3(mathFloor$1(a[1]/c)*c)];this._interval=c,this._niceExtent=d}},o.prototype.calcNiceExtent=function(n){intervalScaleProto.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},o.prototype.parse=function(n){return n},o.prototype.contain=function(n){return n=mathLog$1(n)/mathLog$1(this.base),contain$1(n,this._extent)},o.prototype.normalize=function(n){return n=mathLog$1(n)/mathLog$1(this.base),normalize$2(n,this._extent)},o.prototype.scale=function(n){return n=scale(n,this._extent),mathPow$1(this.base,n)},o.type="log",o}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(s,o){return roundingErrorFix(s,getPrecision(o))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function s(o,n,a){this._prepareParams(o,n,a)}return s.prototype._prepareParams=function(o,n,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var l=this._isOrdinal=o.type==="ordinal";this._needCrossZero=o.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var c=n.get("min",!0);c==null&&(c=n.get("startValue",!0));var u=this._modelMinRaw=c;isFunction$1(u)?this._modelMinNum=parseAxisModelMinMax(o,u({min:a[0],max:a[1]})):u!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(o,u));var d=this._modelMaxRaw=n.get("max",!0);if(isFunction$1(d)?this._modelMaxNum=parseAxisModelMinMax(o,d({min:a[0],max:a[1]})):d!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(o,d)),l)this._axisDataLen=n.getCategories().length;else{var h=n.get("boundaryGap"),f=isArray$1(h)?h:[h||0,h||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?(process.env.NODE_ENV!=="production"&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),this._boundaryGapInner=[0,0]):this._boundaryGapInner=[parsePercent$1(f[0],1),parsePercent$1(f[1],1)]}},s.prototype.calculate=function(){var o=this._isOrdinal,n=this._dataMin,a=this._dataMax,l=this._axisDataLen,c=this._boundaryGapInner,u=o?null:a-n||Math.abs(n),d=this._modelMinRaw==="dataMin"?n:this._modelMinNum,h=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,f=d!=null,g=h!=null;d==null&&(d=o?l?0:NaN:n-c[0]*u),h==null&&(h=o?l?l-1:NaN:a+c[1]*u),(d==null||!isFinite(d))&&(d=NaN),(h==null||!isFinite(h))&&(h=NaN);var p=eqNaN(d)||eqNaN(h)||o&&!l;this._needCrossZero&&(d>0&&h>0&&!f&&(d=0),d<0&&h<0&&!g&&(h=0));var v=this._determinedMin,b=this._determinedMax;return v!=null&&(d=v,f=!0),b!=null&&(h=b,g=!0),{min:d,max:h,minFixed:f,maxFixed:g,isBlank:p}},s.prototype.modifyDataMinMax=function(o,n){process.env.NODE_ENV!=="production"&&assert(!this.frozen),this[DATA_MIN_MAX_ATTR[o]]=n},s.prototype.setDeterminedMinMax=function(o,n){var a=DETERMINED_MIN_MAX_ATTR[o];process.env.NODE_ENV!=="production"&&assert(!this.frozen&&this[a]==null),this[a]=n},s.prototype.freeze=function(){this.frozen=!0},s}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(s,o,n){var a=s.rawExtentInfo;return a||(a=new ScaleRawExtentInfo(s,o,n),s.rawExtentInfo=a,a)}function parseAxisModelMinMax(s,o){return o==null?null:eqNaN(o)?NaN:s.parse(o)}function getScaleExtent(s,o){var n=s.type,a=ensureScaleRawExtentInfo(s,o,s.getExtent()).calculate();s.setBlank(a.isBlank);var l=a.min,c=a.max,u=o.ecModel;if(u&&n==="time"){var d=prepareLayoutBarSeries("bar",u),h=!1;if(each$f(d,function(p){h=h||p.getBaseAxis()===o.axis}),h){var f=makeColumnLayout(d),g=adjustScaleForOverflow(l,c,o,f);l=g.min,c=g.max}}return{extent:[l,c],fixMin:a.minFixed,fixMax:a.maxFixed}}function adjustScaleForOverflow(s,o,n,a){var l=n.axis.getExtent(),c=Math.abs(l[1]-l[0]),u=retrieveColumnLayout(a,n.axis);if(u===void 0)return{min:s,max:o};var d=1/0;each$f(u,function(b){d=Math.min(b.offset,d)});var h=-1/0;each$f(u,function(b){h=Math.max(b.offset+b.width,h)}),d=Math.abs(d),h=Math.abs(h);var f=d+h,g=o-s,p=1-(d+h)/c,v=g/p-g;return o+=v*(h/f),s-=v*(d/f),{min:s,max:o}}function niceScaleExtent(s,o){var n=o,a=getScaleExtent(s,n),l=a.extent,c=n.get("splitNumber");s instanceof LogScale&&(s.base=n.get("logBase"));var u=s.type,d=n.get("interval"),h=u==="interval"||u==="time";s.setExtent(l[0],l[1]),s.calcNiceExtent({splitNumber:c,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:h?n.get("minInterval"):null,maxInterval:h?n.get("maxInterval"):null}),d!=null&&s.setInterval&&s.setInterval(d)}function createScaleByModel$1(s,o){if(o=o||s.get("type"),o)switch(o){case"category":return new OrdinalScale({ordinalMeta:s.getOrdinalMeta?s.getOrdinalMeta():s.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:s.ecModel.getLocaleModel(),useUTC:s.ecModel.get("useUTC")});default:return new(Scale.getClass(o)||IntervalScale)}}function ifAxisCrossZero(s){var o=s.scale.getExtent(),n=o[0],a=o[1];return!(n>0&&a>0||n<0&&a<0)}function makeLabelFormatter(s){var o=s.getLabelModel().get("formatter"),n=s.type==="category"?s.scale.getExtent()[0]:null;return s.scale.type==="time"?function(a){return function(l,c){return s.scale.getFormattedLabel(l,c,a)}}(o):isString$2(o)?function(a){return function(l){var c=s.scale.getLabel(l),u=a.replace("{value}",c??"");return u}}(o):isFunction$1(o)?function(a){return function(l,c){return n!=null&&(c=l.value-n),a(getAxisRawValue(s,l),c,l.level!=null?{level:l.level}:null)}}(o):function(a){return s.scale.getLabel(a)}}function getAxisRawValue(s,o){return s.type==="category"?s.scale.getLabel(o):o.value}function estimateLabelUnionRect(s){var o=s.model,n=s.scale;if(!(!o.get(["axisLabel","show"])||n.isBlank())){var a,l,c=n.getExtent();n instanceof OrdinalScale?l=n.count():(a=n.getTicks(),l=a.length);var u=s.getLabelModel(),d=makeLabelFormatter(s),h,f=1;l>40&&(f=Math.ceil(l/40));for(var g=0;g<l;g+=f){var p=a?a[g]:{value:c[0]+g},v=d(p,g),b=u.getTextRect(v),_=rotateTextRect(b,u.get("rotate")||0);h?h.union(_):h=_}return h}}function rotateTextRect(s,o){var n=o*Math.PI/180,a=s.width,l=s.height,c=a*Math.abs(Math.cos(n))+Math.abs(l*Math.sin(n)),u=a*Math.abs(Math.sin(n))+Math.abs(l*Math.cos(n)),d=new BoundingRect(s.x,s.y,c,u);return d}function getOptionCategoryInterval(s){var o=s.get("interval");return o??"auto"}function shouldShowAllLabels(s){return s.type==="category"&&getOptionCategoryInterval(s.getLabelModel())===0}function getDataDimensionsOnAxis(s,o){var n={};return each$f(s.mapDimensionsAll(o),function(a){n[getStackedDimension(s,a)]=!0}),keys(n)}function unionAxisExtentFromData(s,o,n){o&&each$f(getDataDimensionsOnAxis(o,n),function(a){var l=o.getApproximateExtent(a);l[0]<s[0]&&(s[0]=l[0]),l[1]>s[1]&&(s[1]=l[1])})}var AxisModelCommonMixin=function(){function s(){}return s.prototype.getNeedCrossZero=function(){var o=this.option;return!o.scale},s.prototype.getCoordSysModel=function(){},s}();function createList$2(s){return createSeriesData(null,s)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(s,o){var n=o;o instanceof Model||(n=new Model(o));var a=createScaleByModel$1(n);return a.setExtent(s[0],s[1]),niceScaleExtent(a,n),a}function mixinAxisModelCommonMethods(s){mixin(s,AxisModelCommonMixin)}function createTextStyle(s,o){return o=o||{},createTextStyle$1(s,null,null,o.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(s,o){return Math.abs(s-o)<EPSILON}function contain(s,o,n){var a=0,l=s[0];if(!l)return!1;for(var c=1;c<s.length;c++){var u=s[c];a+=windingLine(l[0],l[1],u[0],u[1],o,n),l=u}var d=s[0];return(!isAroundEqual(l[0],d[0])||!isAroundEqual(l[1],d[1]))&&(a+=windingLine(l[0],l[1],d[0],d[1],o,n)),a!==0}var TMP_TRANSFORM=[];function transformPoints(s,o){for(var n=0;n<s.length;n++)applyTransform$1(s[n],s[n],o)}function updateBBoxFromPoints(s,o,n,a){for(var l=0;l<s.length;l++){var c=s[l];a&&(c=a.project(c)),c&&isFinite(c[0])&&isFinite(c[1])&&(min$1(o,o,c),max$1(n,n,c))}}function centroid$1(s){for(var o=0,n=0,a=0,l=s.length,c=s[l-1][0],u=s[l-1][1],d=0;d<l;d++){var h=s[d][0],f=s[d][1],g=c*f-h*u;o+=g,n+=(c+h)*g,a+=(u+f)*g,c=h,u=f}return o?[n/o/3,a/o/3,o]:[s[0][0]||0,s[0][1]||0]}var Region=function(){function s(o){this.name=o}return s.prototype.setCenter=function(o){this._center=o},s.prototype.getCenter=function(){var o=this._center;return o||(o=this._center=this.calcCenter()),o},s}(),GeoJSONPolygonGeometry=function(){function s(o,n){this.type="polygon",this.exterior=o,this.interiors=n}return s}(),GeoJSONLineStringGeometry=function(){function s(o){this.type="linestring",this.points=o}return s}(),GeoJSONRegion=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this,n)||this;return c.type="geoJSON",c.geometries=a,c._center=l&&[l[0],l[1]],c}return o.prototype.calcCenter=function(){for(var n=this.geometries,a,l=0,c=0;c<n.length;c++){var u=n[c],d=u.exterior,h=d&&d.length;h>l&&(a=u,l=h)}if(a)return centroid$1(a.exterior);var f=this.getBoundingRect();return[f.x+f.width/2,f.y+f.height/2]},o.prototype.getBoundingRect=function(n){var a=this._rect;if(a&&!n)return a;var l=[1/0,1/0],c=[-1/0,-1/0],u=this.geometries;return each$f(u,function(d){d.type==="polygon"?updateBBoxFromPoints(d.exterior,l,c,n):each$f(d.points,function(h){updateBBoxFromPoints(h,l,c,n)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(c[0])&&isFinite(c[1])||(l[0]=l[1]=c[0]=c[1]=0),a=new BoundingRect(l[0],l[1],c[0]-l[0],c[1]-l[1]),n||(this._rect=a),a},o.prototype.contain=function(n){var a=this.getBoundingRect(),l=this.geometries;if(!a.contain(n[0],n[1]))return!1;e:for(var c=0,u=l.length;c<u;c++){var d=l[c];if(d.type==="polygon"){var h=d.exterior,f=d.interiors;if(contain(h,n[0],n[1])){for(var g=0;g<(f?f.length:0);g++)if(contain(f[g],n[0],n[1]))continue e;return!0}}}return!1},o.prototype.transformTo=function(n,a,l,c){var u=this.getBoundingRect(),d=u.width/u.height;l?c||(c=l/d):l=d*c;for(var h=new BoundingRect(n,a,l,c),f=u.calculateTransform(h),g=this.geometries,p=0;p<g.length;p++){var v=g[p];v.type==="polygon"?(transformPoints(v.exterior,f),each$f(v.interiors,function(b){transformPoints(b,f)})):each$f(v.points,function(b){transformPoints(b,f)})}u=this._rect,u.copy(h),this._center=[u.x+u.width/2,u.y+u.height/2]},o.prototype.cloneShallow=function(n){n==null&&(n=this.name);var a=new o(n,this.geometries,this._center);return a._rect=this._rect,a.transformTo=null,a},o}(Region),GeoSVGRegion=function(s){__extends$1(o,s);function o(n,a){var l=s.call(this,n)||this;return l.type="geoSVG",l._elOnlyForCalculate=a,l}return o.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,a=n.getBoundingRect(),l=[a.x+a.width/2,a.y+a.height/2],c=identity(TMP_TRANSFORM),u=n;u&&!u.isGeoSVGGraphicRoot;)mul(c,u.getLocalTransform(),c),u=u.parent;return invert(c,c),applyTransform$1(l,l,c),l},o}(Region);function decode(s){if(!s.UTF8Encoding)return s;var o=s,n=o.UTF8Scale;n==null&&(n=1024);var a=o.features;return each$f(a,function(l){var c=l.geometry,u=c.encodeOffsets,d=c.coordinates;if(u)switch(c.type){case"LineString":c.coordinates=decodeRing(d,u,n);break;case"Polygon":decodeRings(d,u,n);break;case"MultiLineString":decodeRings(d,u,n);break;case"MultiPolygon":each$f(d,function(h,f){return decodeRings(h,u[f],n)})}}),o.UTF8Encoding=!1,o}function decodeRings(s,o,n){for(var a=0;a<s.length;a++)s[a]=decodeRing(s[a],o[a],n)}function decodeRing(s,o,n){for(var a=[],l=o[0],c=o[1],u=0;u<s.length;u+=2){var d=s.charCodeAt(u)-64,h=s.charCodeAt(u+1)-64;d=d>>1^-(d&1),h=h>>1^-(h&1),d+=l,h+=c,l=d,c=h,a.push([d/n,h/n])}return a}function parseGeoJSON(s,o){return s=decode(s),map$1(filter(s.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var a=n.properties,l=n.geometry,c=[];switch(l.type){case"Polygon":var u=l.coordinates;c.push(new GeoJSONPolygonGeometry(u[0],u.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(h){h[0]&&c.push(new GeoJSONPolygonGeometry(h[0],h.slice(1)))});break;case"LineString":c.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":c.push(new GeoJSONLineStringGeometry(l.coordinates))}var d=new GeoJSONRegion(a[o||"name"],c,a.cp);return d.properties=a,d})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$1,isObject:isObject$3,isString:isString$2,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(s,o){var n=map$1(o,function(a){return s.scale.parse(a)});return s.type==="time"&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function createAxisLabels(s){var o=s.getLabelModel().get("customValues");if(o){var n=makeLabelFormatter(s),a=s.scale.getExtent(),l=tickValuesToNumbers(s,o),c=filter(l,function(u){return u>=a[0]&&u<=a[1]});return{labels:map$1(c,function(u){var d={value:u};return{formattedLabel:n(d),rawLabel:s.scale.getLabel(d),tickValue:u}})}}return s.type==="category"?makeCategoryLabels(s):makeRealNumberLabels(s)}function createAxisTicks(s,o){var n=s.getTickModel().get("customValues");if(n){var a=s.scale.getExtent(),l=tickValuesToNumbers(s,n);return{ticks:filter(l,function(c){return c>=a[0]&&c<=a[1]})}}return s.type==="category"?makeCategoryTicks(s,o):{ticks:map$1(s.scale.getTicks(),function(c){return c.value})}}function makeCategoryLabels(s){var o=s.getLabelModel(),n=makeCategoryLabelsActually(s,o);return!o.get("show")||s.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function makeCategoryLabelsActually(s,o){var n=getListCache(s,"labels"),a=getOptionCategoryInterval(o),l=listCacheGet(n,a);if(l)return l;var c,u;return isFunction$1(a)?c=makeLabelsByCustomizedCategoryInterval(s,a):(u=a==="auto"?makeAutoCategoryInterval(s):a,c=makeLabelsByNumericCategoryInterval(s,u)),listCacheSet(n,a,{labels:c,labelCategoryInterval:u})}function makeCategoryTicks(s,o){var n=getListCache(s,"ticks"),a=getOptionCategoryInterval(o),l=listCacheGet(n,a);if(l)return l;var c,u;if((!o.get("show")||s.scale.isBlank())&&(c=[]),isFunction$1(a))c=makeLabelsByCustomizedCategoryInterval(s,a,!0);else if(a==="auto"){var d=makeCategoryLabelsActually(s,s.getLabelModel());u=d.labelCategoryInterval,c=map$1(d.labels,function(h){return h.tickValue})}else u=a,c=makeLabelsByNumericCategoryInterval(s,u,!0);return listCacheSet(n,a,{ticks:c,tickCategoryInterval:u})}function makeRealNumberLabels(s){var o=s.scale.getTicks(),n=makeLabelFormatter(s);return{labels:map$1(o,function(a,l){return{level:a.level,formattedLabel:n(a,l),rawLabel:s.scale.getLabel(a),tickValue:a.value}})}}function getListCache(s,o){return inner$g(s)[o]||(inner$g(s)[o]=[])}function listCacheGet(s,o){for(var n=0;n<s.length;n++)if(s[n].key===o)return s[n].value}function listCacheSet(s,o,n){return s.push({key:o,value:n}),n}function makeAutoCategoryInterval(s){var o=inner$g(s).autoInterval;return o??(inner$g(s).autoInterval=s.calculateCategoryInterval())}function calculateCategoryInterval(s){var o=fetchAutoCategoryIntervalCalculationParams(s),n=makeLabelFormatter(s),a=(o.axisRotate-o.labelRotate)/180*Math.PI,l=s.scale,c=l.getExtent(),u=l.count();if(c[1]-c[0]<1)return 0;var d=1;u>40&&(d=Math.max(1,Math.floor(u/40)));for(var h=c[0],f=s.dataToCoord(h+1)-s.dataToCoord(h),g=Math.abs(f*Math.cos(a)),p=Math.abs(f*Math.sin(a)),v=0,b=0;h<=c[1];h+=d){var _=0,w=0,x=getBoundingRect(n({value:h}),o.font,"center","top");_=x.width*1.3,w=x.height*1.3,v=Math.max(v,_,7),b=Math.max(b,w,7)}var S=v/g,C=b/p;isNaN(S)&&(S=1/0),isNaN(C)&&(C=1/0);var T=Math.max(0,Math.floor(Math.min(S,C))),R=inner$g(s.model),A=s.getExtent(),M=R.lastAutoInterval,D=R.lastTickCount;return M!=null&&D!=null&&Math.abs(M-T)<=1&&Math.abs(D-u)<=1&&M>T&&R.axisExtent0===A[0]&&R.axisExtent1===A[1]?T=M:(R.lastTickCount=u,R.lastAutoInterval=T,R.axisExtent0=A[0],R.axisExtent1=A[1]),T}function fetchAutoCategoryIntervalCalculationParams(s){var o=s.getLabelModel();return{axisRotate:s.getRotate?s.getRotate():s.isHorizontal&&!s.isHorizontal()?90:0,labelRotate:o.get("rotate")||0,font:o.getFont()}}function makeLabelsByNumericCategoryInterval(s,o,n){var a=makeLabelFormatter(s),l=s.scale,c=l.getExtent(),u=s.getLabelModel(),d=[],h=Math.max((o||0)+1,1),f=c[0],g=l.count();f!==0&&h>1&&g/h>2&&(f=Math.round(Math.ceil(f/h)*h));var p=shouldShowAllLabels(s),v=u.get("showMinLabel")||p,b=u.get("showMaxLabel")||p;v&&f!==c[0]&&w(c[0]);for(var _=f;_<=c[1];_+=h)w(_);b&&_-h!==c[1]&&w(c[1]);function w(x){var S={value:x};d.push(n?x:{formattedLabel:a(S),rawLabel:l.getLabel(S),tickValue:x})}return d}function makeLabelsByCustomizedCategoryInterval(s,o,n){var a=s.scale,l=makeLabelFormatter(s),c=[];return each$f(a.getTicks(),function(u){var d=a.getLabel(u),h=u.value;o(u.value,d)&&c.push(n?h:{formattedLabel:l(u),rawLabel:d,tickValue:h})}),c}var NORMALIZED_EXTENT=[0,1],Axis=function(){function s(o,n,a){this.onBand=!1,this.inverse=!1,this.dim=o,this.scale=n,this._extent=a||[0,0]}return s.prototype.contain=function(o){var n=this._extent,a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return o>=a&&o<=l},s.prototype.containData=function(o){return this.scale.contain(o)},s.prototype.getExtent=function(){return this._extent.slice()},s.prototype.getPixelPrecision=function(o){return getPixelPrecision(o||this.scale.getExtent(),this._extent)},s.prototype.setExtent=function(o,n){var a=this._extent;a[0]=o,a[1]=n},s.prototype.dataToCoord=function(o,n){var a=this._extent,l=this.scale;return o=l.normalize(o),this.onBand&&l.type==="ordinal"&&(a=a.slice(),fixExtentWithBands(a,l.count())),linearMap$2(o,NORMALIZED_EXTENT,a,n)},s.prototype.coordToData=function(o,n){var a=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(a=a.slice(),fixExtentWithBands(a,l.count()));var c=linearMap$2(o,a,NORMALIZED_EXTENT,n);return this.scale.scale(c)},s.prototype.pointToData=function(o,n){},s.prototype.getTicksCoords=function(o){o=o||{};var n=o.tickModel||this.getTickModel(),a=createAxisTicks(this,n),l=a.ticks,c=map$1(l,function(d){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(d):d),tickValue:d}},this),u=n.get("alignWithLabel");return fixOnBandTicksCoords(this,c,u,o.clamp),c},s.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var o=this.model.getModel("minorTick"),n=o.get("splitNumber");n>0&&n<100||(n=5);var a=this.scale.getMinorTicks(n),l=map$1(a,function(c){return map$1(c,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return l},s.prototype.getViewLabels=function(){return createAxisLabels(this).labels},s.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},s.prototype.getTickModel=function(){return this.model.getModel("axisTick")},s.prototype.getBandWidth=function(){var o=this._extent,n=this.scale.getExtent(),a=n[1]-n[0]+(this.onBand?1:0);a===0&&(a=1);var l=Math.abs(o[1]-o[0]);return Math.abs(l)/a},s.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},s}();function fixExtentWithBands(s,o){var n=s[1]-s[0],a=o,l=n/a/2;s[0]+=l,s[1]-=l}function fixOnBandTicksCoords(s,o,n,a){var l=o.length;if(!s.onBand||n||!l)return;var c=s.getExtent(),u,d;if(l===1)o[0].coord=c[0],u=o[1]={coord:c[1],tickValue:o[0].tickValue};else{var h=o[l-1].tickValue-o[0].tickValue,f=(o[l-1].coord-o[0].coord)/h;each$f(o,function(b){b.coord-=f/2});var g=s.scale.getExtent();d=1+g[1]-o[l-1].tickValue,u={coord:o[l-1].coord+f*d,tickValue:g[1]+1},o.push(u)}var p=c[0]>c[1];v(o[0].coord,c[0])&&(a?o[0].coord=c[0]:o.shift()),a&&v(c[0],o[0].coord)&&o.unshift({coord:c[0]}),v(c[1],u.coord)&&(a?u.coord=c[1]:o.pop()),a&&v(u.coord,c[1])&&o.push({coord:c[1]});function v(b,_){return b=round$3(b),_=round$3(_),p?b>_:b<_}}function extendComponentModel(s){var o=ComponentModel.extend(s);return ComponentModel.registerClass(o),o}function extendComponentView(s){var o=ComponentView.extend(s);return ComponentView.registerClass(o),o}function extendSeriesModel(s){var o=SeriesModel.extend(s);return SeriesModel.registerClass(o),o}function extendChartView(s){var o=ChartView.extend(s);return ChartView.registerClass(o),o}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(s,o,n,a,l){var c=n.width,u=n.height;switch(s){case"top":a.set(n.x+c/2,n.y-o),l.set(0,-1);break;case"bottom":a.set(n.x+c/2,n.y+u+o),l.set(0,1);break;case"left":a.set(n.x-o,n.y+u/2),l.set(-1,0);break;case"right":a.set(n.x+c+o,n.y+u/2),l.set(1,0);break}}function projectPointToArc(s,o,n,a,l,c,u,d,h){u-=s,d-=o;var f=Math.sqrt(u*u+d*d);u/=f,d/=f;var g=u*n+s,p=d*n+o;if(Math.abs(a-l)%PI2$2<1e-4)return h[0]=g,h[1]=p,f-n;if(c){var v=a;a=normalizeRadian(l),l=normalizeRadian(v)}else a=normalizeRadian(a),l=normalizeRadian(l);a>l&&(l+=PI2$2);var b=Math.atan2(d,u);if(b<0&&(b+=PI2$2),b>=a&&b<=l||b+PI2$2>=a&&b+PI2$2<=l)return h[0]=g,h[1]=p,f-n;var _=n*Math.cos(a)+s,w=n*Math.sin(a)+o,x=n*Math.cos(l)+s,S=n*Math.sin(l)+o,C=(_-u)*(_-u)+(w-d)*(w-d),T=(x-u)*(x-u)+(S-d)*(S-d);return C<T?(h[0]=_,h[1]=w,Math.sqrt(C)):(h[0]=x,h[1]=S,Math.sqrt(T))}function projectPointToLine(s,o,n,a,l,c,u,d){var h=l-s,f=c-o,g=n-s,p=a-o,v=Math.sqrt(g*g+p*p);g/=v,p/=v;var b=h*g+f*p,_=b/v;d&&(_=Math.min(Math.max(_,0),1)),_*=v;var w=u[0]=s+_*g,x=u[1]=o+_*p;return Math.sqrt((w-l)*(w-l)+(x-c)*(x-c))}function projectPointToRect(s,o,n,a,l,c,u){n<0&&(s=s+n,n=-n),a<0&&(o=o+a,a=-a);var d=s+n,h=o+a,f=u[0]=Math.min(Math.max(l,s),d),g=u[1]=Math.min(Math.max(c,o),h);return Math.sqrt((f-l)*(f-l)+(g-c)*(g-c))}var tmpPt=[];function nearestPointOnRect(s,o,n){var a=projectPointToRect(o.x,o.y,o.width,o.height,s.x,s.y,tmpPt);return n.set(tmpPt[0],tmpPt[1]),a}function nearestPointOnPath(s,o,n){for(var a=0,l=0,c=0,u=0,d,h,f=1/0,g=o.data,p=s.x,v=s.y,b=0;b<g.length;){var _=g[b++];b===1&&(a=g[b],l=g[b+1],c=a,u=l);var w=f;switch(_){case CMD$1.M:c=g[b++],u=g[b++],a=c,l=u;break;case CMD$1.L:w=projectPointToLine(a,l,g[b],g[b+1],p,v,tmpPt,!0),a=g[b++],l=g[b++];break;case CMD$1.C:w=cubicProjectPoint(a,l,g[b++],g[b++],g[b++],g[b++],g[b],g[b+1],p,v,tmpPt),a=g[b++],l=g[b++];break;case CMD$1.Q:w=quadraticProjectPoint(a,l,g[b++],g[b++],g[b],g[b+1],p,v,tmpPt),a=g[b++],l=g[b++];break;case CMD$1.A:var x=g[b++],S=g[b++],C=g[b++],T=g[b++],R=g[b++],A=g[b++];b+=1;var M=!!(1-g[b++]);d=Math.cos(R)*C+x,h=Math.sin(R)*T+S,b<=1&&(c=d,u=h);var D=(p-x)*T/C+x;w=projectPointToArc(x,S,T,R,R+A,M,D,v,tmpPt),a=Math.cos(R+A)*C+x,l=Math.sin(R+A)*T+S;break;case CMD$1.R:c=a=g[b++],u=l=g[b++];var O=g[b++],H=g[b++];w=projectPointToRect(c,u,O,H,p,v,tmpPt);break;case CMD$1.Z:w=projectPointToLine(a,l,c,u,p,v,tmpPt,!0),a=c,l=u;break}w<f&&(f=w,n.set(tmpPt[0],tmpPt[1]))}return f}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(s,o){if(s){var n=s.getTextGuideLine(),a=s.getTextContent();if(a&&n){var l=s.textGuideLineConfig||{},c=[[0,0],[0,0],[0,0]],u=l.candidates||DEFAULT_SEARCH_SPACE,d=a.getBoundingRect().clone();d.applyTransform(a.getComputedTransform());var h=1/0,f=l.anchor,g=s.getComputedTransform(),p=g&&invert([],g),v=o.get("length2")||0;f&&pt2.copy(f);for(var b=0;b<u.length;b++){var _=u[b];getCandidateAnchor(_,0,d,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,v),pt1.transform(p);var w=s.getBoundingRect(),x=f?f.distance(pt1):s instanceof Path?nearestPointOnPath(pt1,s.path,pt2):nearestPointOnRect(pt1,w,pt2);x<h&&(h=x,pt1.transform(g),pt2.transform(g),pt2.toArray(c[0]),pt1.toArray(c[1]),pt0.toArray(c[2]))}limitTurnAngle(c,o.get("minTurnAngle")),n.setShape({points:c})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(s,o){if(o<=180&&o>0){o=o/180*Math.PI,pt0.fromArray(s[0]),pt1.fromArray(s[1]),pt2.fromArray(s[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var n=dir.len(),a=dir2.len();if(!(n<.001||a<.001)){dir.scale(1/n),dir2.scale(1/a);var l=dir.dot(dir2),c=Math.cos(o);if(c<l){var u=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,u/Math.tan(Math.PI-o));var d=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(d))return;d<0?Point.copy(tmpProjPoint,pt1):d>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(s[1])}}}}function limitSurfaceAngle(s,o,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(s[0]),pt1.fromArray(s[1]),pt2.fromArray(s[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var a=dir.len(),l=dir2.len();if(!(a<.001||l<.001)){dir.scale(1/a),dir2.scale(1/l);var c=dir.dot(o),u=Math.cos(n);if(c<u){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var h=Math.PI/2,f=Math.acos(dir2.dot(o)),g=h+f-n;if(g>=h)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI/2-g));var p=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(p))return;p<0?Point.copy(tmpProjPoint,pt1):p>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(s[1])}}}}function setLabelLineState(s,o,n,a){var l=n==="normal",c=l?s:s.ensureState(n);c.ignore=o;var u=a.get("smooth");u&&u===!0&&(u=.3),c.shape=c.shape||{},u>0&&(c.shape.smooth=u);var d=a.getModel("lineStyle").getLineStyle();l?s.useStyle(d):c.style=d}function buildLabelLinePath(s,o){var n=o.smooth,a=o.points;if(a)if(s.moveTo(a[0][0],a[0][1]),n>0&&a.length>=3){var l=dist$1(a[0],a[1]),c=dist$1(a[1],a[2]);if(!l||!c){s.lineTo(a[1][0],a[1][1]),s.lineTo(a[2][0],a[2][1]);return}var u=Math.min(l,c)*n,d=lerp$1([],a[1],a[0],u/l),h=lerp$1([],a[1],a[2],u/c),f=lerp$1([],d,h,.5);s.bezierCurveTo(d[0],d[1],d[0],d[1],f[0],f[1]),s.bezierCurveTo(h[0],h[1],h[0],h[1],a[2][0],a[2][1])}else for(var g=1;g<a.length;g++)s.lineTo(a[g][0],a[g][1])}function setLabelLineStyle(s,o,n){var a=s.getTextGuideLine(),l=s.getTextContent();if(!l){a&&s.removeTextGuideLine();return}for(var c=o.normal,u=c.get("show"),d=l.ignore,h=0;h<DISPLAY_STATES.length;h++){var f=DISPLAY_STATES[h],g=o[f],p=f==="normal";if(g){var v=g.get("show"),b=p?d:retrieve2(l.states[f]&&l.states[f].ignore,d);if(b||!retrieve2(v,u)){var _=p?a:a&&a.states[f];_&&(_.ignore=!0),a&&setLabelLineState(a,!0,f,g);continue}a||(a=new Polyline$1,s.setTextGuideLine(a),!p&&(d||!u)&&setLabelLineState(a,!0,"normal",o.normal),s.stateProxy&&(a.stateProxy=s.stateProxy)),setLabelLineState(a,!1,f,g)}}if(a){defaults(a.style,n),a.style.fill=null;var w=c.get("showAbove"),x=s.textGuideLineConfig=s.textGuideLineConfig||{};x.showAbove=w||!1,a.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(s,o){o=o||"labelLine";for(var n={normal:s.getModel(o)},a=0;a<SPECIAL_STATES.length;a++){var l=SPECIAL_STATES[a];n[l]=s.getModel([l,o])}return n}function prepareLayoutList(s){for(var o=[],n=0;n<s.length;n++){var a=s[n];if(!a.defaultAttr.ignore){var l=a.label,c=l.getComputedTransform(),u=l.getBoundingRect(),d=!c||c[1]<1e-5&&c[2]<1e-5,h=l.style.margin||0,f=u.clone();f.applyTransform(c),f.x-=h/2,f.y-=h/2,f.width+=h,f.height+=h;var g=d?new OrientedBoundingRect(u,c):null;o.push({label:l,labelLine:a.labelLine,rect:f,localRect:u,obb:g,priority:a.priority,defaultAttr:a.defaultAttr,layoutOption:a.computedLayoutOption,axisAligned:d,transform:c})}}return o}function shiftLayout(s,o,n,a,l,c){var u=s.length;if(u<2)return;s.sort(function(M,D){return M.rect[o]-D.rect[o]});for(var d=0,h,f=!1,g=0;g<u;g++){var p=s[g],v=p.rect;h=v[o]-d,h<0&&(v[o]-=h,p.label[o]-=h,f=!0),d=v[o]+v[n]}var b=s[0],_=s[u-1],w,x;S(),w<0&&R(-w,.8),x<0&&R(x,.8),S(),C(w,x,1),C(x,w,-1),S(),w<0&&A(-w),x<0&&A(x);function S(){w=b.rect[o]-a,x=l-_.rect[o]-_.rect[n]}function C(M,D,O){if(M<0){var H=Math.min(D,-M);if(H>0){T(H*O,0,u);var j=H+M;j<0&&R(-j*O,1)}else R(-M*O,1)}}function T(M,D,O){M!==0&&(f=!0);for(var H=D;H<O;H++){var j=s[H],q=j.rect;q[o]+=M,j.label[o]+=M}}function R(M,D){for(var O=[],H=0,j=1;j<u;j++){var q=s[j-1].rect,Y=Math.max(s[j].rect[o]-q[o]-q[n],0);O.push(Y),H+=Y}if(H){var ee=Math.min(Math.abs(M)/H,D);if(M>0)for(var j=0;j<u-1;j++){var te=O[j]*ee;T(te,0,j+1)}else for(var j=u-1;j>0;j--){var te=O[j-1]*ee;T(-te,j,u)}}}function A(M){var D=M<0?-1:1;M=Math.abs(M);for(var O=Math.ceil(M/(u-1)),H=0;H<u-1;H++)if(D>0?T(O,0,H+1):T(-O,u-H-1,u),M-=O,M<=0)return}return f}function shiftLayoutOnX(s,o,n,a){return shiftLayout(s,"x","width",o,n)}function shiftLayoutOnY(s,o,n,a){return shiftLayout(s,"y","height",o,n)}function hideOverlap(s){var o=[];s.sort(function(w,x){return x.priority-w.priority});var n=new BoundingRect(0,0,0,0);function a(w){if(!w.ignore){var x=w.ensureState("emphasis");x.ignore==null&&(x.ignore=!1)}w.ignore=!0}for(var l=0;l<s.length;l++){var c=s[l],u=c.axisAligned,d=c.localRect,h=c.transform,f=c.label,g=c.labelLine;n.copy(c.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var p=c.obb,v=!1,b=0;b<o.length;b++){var _=o[b];if(n.intersect(_.rect)){if(u&&_.axisAligned){v=!0;break}if(_.obb||(_.obb=new OrientedBoundingRect(_.localRect,_.transform)),p||(p=new OrientedBoundingRect(d,h)),p.intersect(_.obb)){v=!0;break}}}v?(a(f),g&&a(g)):(f.attr("ignore",c.defaultAttr.ignore),g&&g.attr("ignore",c.defaultAttr.labelGuideIgnore),o.push(c))}}function cloneArr(s){if(s){for(var o=[],n=0;n<s.length;n++)o.push(s[n].slice());return o}}function prepareLayoutCallbackParams(s,o){var n=s.label,a=o&&o.getTextGuideLine();return{dataIndex:s.dataIndex,dataType:s.dataType,seriesIndex:s.seriesModel.seriesIndex,text:s.label.style.text,rect:s.hostRect,labelRect:s.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:cloneArr(a&&a.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(s,o,n){for(var a=0;a<n.length;a++){var l=n[a];o[l]!=null&&(s[l]=o[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function s(){this._labelList=[],this._chartViewList=[]}return s.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},s.prototype._addLabel=function(o,n,a,l,c){var u=l.style,d=l.__hostTarget,h=d.textConfig||{},f=l.getComputedTransform(),g=l.getBoundingRect().plain();BoundingRect.applyTransform(g,g,f),f?dummyTransformable.setLocalTransform(f):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var p=l.__hostTarget,v;if(p){v=p.getBoundingRect().plain();var b=p.getComputedTransform();BoundingRect.applyTransform(v,v,b)}var _=v&&p.getTextGuideLine();this._labelList.push({label:l,labelLine:_,seriesModel:a,dataIndex:o,dataType:n,layoutOption:c,computedLayoutOption:null,rect:g,hostRect:v,priority:v?v.width*v.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:_&&_.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:u.x,y:u.y,align:u.align,verticalAlign:u.verticalAlign,width:u.width,height:u.height,fontSize:u.fontSize},cursor:l.cursor,attachedPos:h.position,attachedRot:h.rotation}})},s.prototype.addLabelsOfSeries=function(o){var n=this;this._chartViewList.push(o);var a=o.__model,l=a.get("labelLayout");(isFunction$1(l)||keys(l).length)&&o.group.traverse(function(c){if(c.ignore)return!0;var u=c.getTextContent(),d=getECData(c);u&&!u.disableLabelLayout&&n._addLabel(d.dataIndex,d.dataType,a,u,l)})},s.prototype.updateLayoutConfig=function(o){var n=o.getWidth(),a=o.getHeight();function l(T,R){return function(){updateLabelLinePoints(T,R)}}for(var c=0;c<this._labelList.length;c++){var u=this._labelList[c],d=u.label,h=d.__hostTarget,f=u.defaultAttr,g=void 0;isFunction$1(u.layoutOption)?g=u.layoutOption(prepareLayoutCallbackParams(u,h)):g=u.layoutOption,g=g||{},u.computedLayoutOption=g;var p=Math.PI/180;h&&h.setTextConfig({local:!1,position:g.x!=null||g.y!=null?null:f.attachedPos,rotation:g.rotate!=null?g.rotate*p:f.attachedRot,offset:[g.dx||0,g.dy||0]});var v=!1;if(g.x!=null?(d.x=parsePercent(g.x,n),d.setStyle("x",0),v=!0):(d.x=f.x,d.setStyle("x",f.style.x)),g.y!=null?(d.y=parsePercent(g.y,a),d.setStyle("y",0),v=!0):(d.y=f.y,d.setStyle("y",f.style.y)),g.labelLinePoints){var b=h.getTextGuideLine();b&&(b.setShape({points:g.labelLinePoints}),v=!1)}var _=labelLayoutInnerStore(d);_.needsUpdateLabelLine=v,d.rotation=g.rotate!=null?g.rotate*p:f.rotation,d.scaleX=f.scaleX,d.scaleY=f.scaleY;for(var w=0;w<LABEL_OPTION_TO_STYLE_KEYS.length;w++){var x=LABEL_OPTION_TO_STYLE_KEYS[w];d.setStyle(x,g[x]!=null?g[x]:f.style[x])}if(g.draggable){if(d.draggable=!0,d.cursor="move",h){var S=u.seriesModel;if(u.dataIndex!=null){var C=u.seriesModel.getData(u.dataType);S=C.getItemModel(u.dataIndex)}d.on("drag",l(h,S.getModel("labelLine")))}}else d.off("drag"),d.cursor=f.cursor}},s.prototype.layout=function(o){var n=o.getWidth(),a=o.getHeight(),l=prepareLayoutList(this._labelList),c=filter(l,function(h){return h.layoutOption.moveOverlap==="shiftX"}),u=filter(l,function(h){return h.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(c,0,n),shiftLayoutOnY(u,0,a);var d=filter(l,function(h){return h.layoutOption.hideOverlap});hideOverlap(d)},s.prototype.processLabelsOverall=function(){var o=this;each$f(this._chartViewList,function(n){var a=n.__model,l=n.ignoreLabelLineUpdate,c=a.isAnimationEnabled();n.group.traverse(function(u){if(u.ignore&&!u.forceLabelAnimation)return!0;var d=!l,h=u.getTextContent();!d&&h&&(d=labelLayoutInnerStore(h).needsUpdateLabelLine),d&&o._updateLabelLine(u,a),c&&o._animateLabels(u,a)})})},s.prototype._updateLabelLine=function(o,n){var a=o.getTextContent(),l=getECData(o),c=l.dataIndex;if(a&&c!=null){var u=n.getData(l.dataType),d=u.getItemModel(c),h={},f=u.getItemVisual(c,"style");if(f){var g=u.getVisual("drawType");h.stroke=f[g]}var p=d.getModel("labelLine");setLabelLineStyle(o,getLabelLineStatesModels(d),h),updateLabelLinePoints(o,p)}},s.prototype._animateLabels=function(o,n){var a=o.getTextContent(),l=o.getTextGuideLine();if(a&&(o.forceLabelAnimation||!a.ignore&&!a.invisible&&!o.disableLabelAnimation&&!isElementRemoved(o))){var c=labelLayoutInnerStore(a),u=c.oldLayout,d=getECData(o),h=d.dataIndex,f={x:a.x,y:a.y,rotation:a.rotation},g=n.getData(d.dataType);if(u){a.attr(u);var v=o.prevStates;v&&(indexOf(v,"select")>=0&&a.attr(c.oldLayoutSelect),indexOf(v,"emphasis")>=0&&a.attr(c.oldLayoutEmphasis)),updateProps$1(a,f,n,h)}else if(a.attr(f),!labelInner(a).valueAnimation){var p=retrieve2(a.style.opacity,1);a.style.opacity=0,initProps(a,{style:{opacity:p}},n,h)}if(c.oldLayout=f,a.states.select){var b=c.oldLayoutSelect={};extendWithKeys(b,f,LABEL_LAYOUT_PROPS),extendWithKeys(b,a.states.select,LABEL_LAYOUT_PROPS)}if(a.states.emphasis){var _=c.oldLayoutEmphasis={};extendWithKeys(_,f,LABEL_LAYOUT_PROPS),extendWithKeys(_,a.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(a,h,g,n,n)}if(l&&!l.ignore&&!l.invisible){var c=labelLineAnimationStore(l),u=c.oldLayout,w={points:l.shape.points};u?(l.attr({shape:u}),updateProps$1(l,{shape:w},n)):(l.setShape(w),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},n)),c.oldLayout=w}},s}(),getLabelManager=makeInner();function installLabelLayout(s){s.registerUpdateLifecycle("series:beforeupdate",function(o,n,a){var l=getLabelManager(n).labelManager;l||(l=getLabelManager(n).labelManager=new LabelManager),l.clearLabels()}),s.registerUpdateLifecycle("series:layoutlabels",function(o,n,a){var l=getLabelManager(n).labelManager;a.updatedSeries.forEach(function(c){l.addLabelsOfSeries(n.getViewOfSeriesModel(c))}),l.updateLayoutConfig(n),l.layout(n),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function s(){}return s.prototype.reset=function(o){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,o||4)},s.prototype.moveTo=function(o,n){this._add("M",o,n)},s.prototype.lineTo=function(o,n){this._add("L",o,n)},s.prototype.bezierCurveTo=function(o,n,a,l,c,u){this._add("C",o,n,a,l,c,u)},s.prototype.quadraticCurveTo=function(o,n,a,l){this._add("Q",o,n,a,l)},s.prototype.arc=function(o,n,a,l,c,u){this.ellipse(o,n,a,a,0,l,c,u)},s.prototype.ellipse=function(o,n,a,l,c,u,d,h){var f=d-u,g=!h,p=Math.abs(f),v=isAroundZero(p-PI2$1)||(g?f>=PI2$1:-f>=PI2$1),b=f>0?f%PI2$1:f%PI2$1+PI2$1,_=!1;v?_=!0:isAroundZero(p)?_=!1:_=b>=PI$4==!!g;var w=o+a*mathCos(u),x=n+l*mathSin(u);this._start&&this._add("M",w,x);var S=Math.round(c*degree);if(v){var C=1/this._p,T=(g?1:-1)*(PI2$1-C);this._add("A",a,l,S,1,+g,o+a*mathCos(u+T),n+l*mathSin(u+T)),C>.01&&this._add("A",a,l,S,0,+g,w,x)}else{var R=o+a*mathCos(d),A=n+l*mathSin(d);this._add("A",a,l,S,+_,+g,R,A)}},s.prototype.rect=function(o,n,a,l){this._add("M",o,n),this._add("l",a,0),this._add("l",0,l),this._add("l",-a,0),this._add("Z")},s.prototype.closePath=function(){this._d.length>0&&this._add("Z")},s.prototype._add=function(o,n,a,l,c,u,d,h,f){for(var g=[],p=this._p,v=1;v<arguments.length;v++){var b=arguments[v];if(isNaN(b)){this._invalid=!0;return}g.push(Math.round(b*p)/p)}this._d.push(o+g.join(" ")),this._start=o==="Z"},s.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},s.prototype.getStr=function(){return this._str},s}(),NONE="none",mathRound=Math.round;function pathHasFill(s){var o=s.fill;return o!=null&&o!==NONE}function pathHasStroke(s){var o=s.stroke;return o!=null&&o!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(s){return"stroke-"+s.toLowerCase()});function mapStyleToAttrs(s,o,n,a){var l=o.opacity==null?1:o.opacity;if(n instanceof ZRImage){s("opacity",l);return}if(pathHasFill(o)){var c=normalizeColor(o.fill);s("fill",c.color);var u=o.fillOpacity!=null?o.fillOpacity*c.opacity*l:c.opacity*l;u<1&&s("fill-opacity",u)}else s("fill",NONE);if(pathHasStroke(o)){var d=normalizeColor(o.stroke);s("stroke",d.color);var h=o.strokeNoScale?n.getLineScale():1,f=h?(o.lineWidth||0)/h:0,g=o.strokeOpacity!=null?o.strokeOpacity*d.opacity*l:d.opacity*l,p=o.strokeFirst;if(f!==1&&s("stroke-width",f),p&&s("paint-order",p?"stroke":"fill"),g<1&&s("stroke-opacity",g),o.lineDash){var v=getLineDash(n),b=v[0],_=v[1];b&&(_=mathRound(_||0),s("stroke-dasharray",b.join(",")),(_||a)&&s("stroke-dashoffset",_))}for(var w=0;w<strokeProps.length;w++){var x=strokeProps[w];if(o[x]!==DEFAULT_PATH_STYLE[x]){var S=o[x]||DEFAULT_PATH_STYLE[x];S&&s(svgStrokeProps[w],S)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(s){return document.createElementNS(SVGNS,s)}function createVNode(s,o,n,a,l){return{tag:s,attrs:n||{},children:a,text:l,key:o}}function createElementOpen(s,o){var n=[];if(o)for(var a in o){var l=o[a],c=a;l!==!1&&(l!==!0&&l!=null&&(c+='="'+l+'"'),n.push(c))}return"<"+s+" "+n.join(" ")+">"}function createElementClose(s){return"</"+s+">"}function vNodeToString(s,o){o=o||{};var n=o.newline?`
`:"";function a(l){var c=l.children,u=l.tag,d=l.attrs,h=l.text;return createElementOpen(u,d)+(u!=="style"?encodeHTML(h):h||"")+(c?""+n+map$1(c,function(f){return a(f)}).join(n)+n:"")+createElementClose(u)}return a(s)}function getCssString(s,o,n){n=n||{};var a=n.newline?`
`:"",l=" {"+a,c=a+"}",u=map$1(keys(s),function(h){return h+l+map$1(keys(s[h]),function(f){return f+":"+s[h][f]+";"}).join(a)+c}).join(a),d=map$1(keys(o),function(h){return"@keyframes "+h+l+map$1(keys(o[h]),function(f){return f+l+map$1(keys(o[h][f]),function(g){var p=o[h][f][g];return g==="d"&&(p='path("'+p+'")'),g+":"+p+";"}).join(a)+c}).join(a)+c}).join(a);return!u&&!d?"":["<![CDATA[",u,d,"]]>"].join(a)}function createBrushScope(s){return{zrId:s,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(s,o,n,a){return createVNode("svg","root",{width:s,height:o,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:a?"0 0 "+s+" "+o:!1},n)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(s,o,n){var a=extend({},s.shape);extend(a,o),s.buildPath(n,a);var l=new SVGPathRebuilder;return l.reset(getPathPrecision(s)),n.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(s,o){var n=o.originX,a=o.originY;(n||a)&&(s[transformOriginKey]=n+"px "+a+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(s,o){var n=o.zrId+"-ani-"+o.cssAnimIdx++;return o.cssAnims[n]=s,n}function createCompoundPathCSSAnimation(s,o,n){var a=s.shape.paths,l={},c,u;if(each$f(a,function(h){var f=createBrushScope(n.zrId);f.animation=!0,createCSSAnimation(h,{},f,!0);var g=f.cssAnims,p=f.cssNodes,v=keys(g),b=v.length;if(b){u=v[b-1];var _=g[u];for(var w in _){var x=_[w];l[w]=l[w]||{d:""},l[w].d+=x.d||""}for(var S in p){var C=p[S].animation;C.indexOf(u)>=0&&(c=C)}}}),!!c){o.d=!1;var d=addAnimation(l,n);return c.replace(u,d)}}function getEasingFunc(s){return isString$2(s)?EASING_MAP[s]?"cubic-bezier("+EASING_MAP[s]+")":createCubicEasingFunc(s)?s:"":""}function createCSSAnimation(s,o,n,a){var l=s.animators,c=l.length,u=[];if(s instanceof CompoundPath){var d=createCompoundPathCSSAnimation(s,o,n);if(d)u.push(d);else if(!c)return}else if(!c)return;for(var h={},f=0;f<c;f++){var g=l[f],p=[g.getMaxTime()/1e3+"s"],v=getEasingFunc(g.getClip().easing),b=g.getDelay();v?p.push(v):p.push("linear"),b&&p.push(b/1e3+"s"),g.getLoop()&&p.push("infinite");var _=p.join(" ");h[_]=h[_]||[_,[]],h[_][1].push(g)}function w(C){var T=C[1],R=T.length,A={},M={},D={},O="animation-timing-function";function H(ke,Te,Ae){for(var Ee=ke.getTracks(),we=ke.getMaxTime(),Ve=0;Ve<Ee.length;Ve++){var _e=Ee[Ve];if(_e.needsAnimate()){var ve=_e.keyframes,fe=_e.propName;if(Ae&&(fe=Ae(fe)),fe)for(var ne=0;ne<ve.length;ne++){var oe=ve[ne],xe=Math.round(oe.time/we*100)+"%",Ce=getEasingFunc(oe.easing),Oe=oe.rawValue;(isString$2(Oe)||isNumber(Oe))&&(Te[xe]=Te[xe]||{},Te[xe][fe]=oe.rawValue,Ce&&(Te[xe][O]=Ce))}}}}for(var j=0;j<R;j++){var q=T[j],Y=q.targetName;Y?Y==="shape"&&H(q,M):!a&&H(q,A)}for(var ee in A){var te={};copyTransform(te,s),extend(te,A[ee]);var re=getSRTTransformString(te),ae=A[ee][O];D[ee]=re?{transform:re}:{},setTransformOrigin(D[ee],te),ae&&(D[ee][O]=ae)}var ue,ce=!0;for(var ee in M){D[ee]=D[ee]||{};var le=!ue,ae=M[ee][O];le&&(ue=new PathProxy);var ie=ue.len();ue.reset(),D[ee].d=buildPathString(s,M[ee],ue);var de=ue.len();if(!le&&ie!==de){ce=!1;break}ae&&(D[ee][O]=ae)}if(!ce)for(var ee in D)delete D[ee].d;if(!a)for(var j=0;j<R;j++){var q=T[j],Y=q.targetName;Y==="style"&&H(q,D,function(Ee){return ANIMATE_STYLE_MAP[Ee]})}for(var ge=keys(D),pe=!0,be,j=1;j<ge.length;j++){var Se=ge[j-1],Le=ge[j];if(D[Se][transformOriginKey]!==D[Le][transformOriginKey]){pe=!1;break}be=D[Se][transformOriginKey]}if(pe&&be){for(var ee in D)D[ee][transformOriginKey]&&delete D[ee][transformOriginKey];o[transformOriginKey]=be}if(filter(ge,function(ke){return keys(D[ke]).length>0}).length){var De=addAnimation(D,n);return De+" "+C[0]+" both"}}for(var x in h){var d=w(h[x]);d&&u.push(d)}if(u.length){var S=n.zrId+"-cls-"+getClassId();n.cssNodes["."+S]={animation:u.join(",")},o.class=S}}function createCSSEmphasis(s,o,n){if(!s.ignore)if(s.isSilent()){var a={"pointer-events":"none"};setClassAttribute(a,o,n)}else{var l=s.states.emphasis&&s.states.emphasis.style?s.states.emphasis.style:{},c=l.fill;if(!c){var u=s.style&&s.style.fill,d=s.states.select&&s.states.select.style&&s.states.select.style.fill,h=s.currentStates.indexOf("select")>=0&&d||u;h&&(c=liftColor(h))}var f=l.lineWidth;if(f){var g=!l.strokeNoScale&&s.transform?s.transform[0]:1;f=f/g}var a={cursor:"pointer"};c&&(a.fill=c),l.stroke&&(a.stroke=l.stroke),f&&(a["stroke-width"]=f),setClassAttribute(a,o,n)}}function setClassAttribute(s,o,n,a){var l=JSON.stringify(s),c=n.cssStyleCache[l];c||(c=n.zrId+"-cls-"+getClassId(),n.cssStyleCache[l]=c,n.cssNodes["."+c+":hover"]=s),o.class=o.class?o.class+" "+c:c}var round$1=Math.round;function isImageLike(s){return s&&isString$2(s.src)}function isCanvasLike(s){return s&&isFunction$1(s.toDataURL)}function setStyleAttrs(s,o,n,a){mapStyleToAttrs(function(l,c){var u=l==="fill"||l==="stroke";u&&isGradient(c)?setGradient(o,s,l,a):u&&isPattern(c)?setPattern(n,s,l,a):s[l]=c,u&&a.ssr&&c==="none"&&(s["pointer-events"]="visible")},o,n,!1),setShadow(n,s,a)}function setMetaData(s,o){var n=getElementSSRData(o);n&&(n.each(function(a,l){a!=null&&(s[(META_DATA_PREFIX+l).toLowerCase()]=a+"")}),o.isSilent()&&(s[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(s){return isAroundZero(s[0]-1)&&isAroundZero(s[1])&&isAroundZero(s[2])&&isAroundZero(s[3]-1)}function noTranslate(s){return isAroundZero(s[4])&&isAroundZero(s[5])}function setTransform(s,o,n){if(o&&!(noTranslate(o)&&noRotateScale(o))){var a=1e4;s.transform=noRotateScale(o)?"translate("+round$1(o[4]*a)/a+" "+round$1(o[5]*a)/a+")":getMatrixStr(o)}}function convertPolyShape(s,o,n){for(var a=s.points,l=[],c=0;c<a.length;c++)l.push(round$1(a[c][0]*n)/n),l.push(round$1(a[c][1]*n)/n);o.points=l.join(" ")}function validatePolyShape(s){return!s.smooth}function createAttrsConvert(s){var o=map$1(s,function(n){return typeof n=="string"?[n,n]:n});return function(n,a,l){for(var c=0;c<o.length;c++){var u=o[c],d=n[u[0]];d!=null&&(a[u[1]]=round$1(d*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(s){for(var o=s.animators,n=0;n<o.length;n++)if(o[n].targetName==="shape")return!0;return!1}function brushSVGPath(s,o){var n=s.style,a=s.shape,l=builtinShapesDef[s.type],c={},u=o.animation,d="path",h=s.style.strokePercent,f=o.compress&&getPathPrecision(s)||4;if(l&&!o.willUpdate&&!(l[1]&&!l[1](a))&&!(u&&hasShapeAnimation(s))&&!(h<1)){d=s.type;var g=Math.pow(10,f);l[0](a,c,g)}else{var p=!s.path||s.shapeChanged();s.path||s.createPathProxy();var v=s.path;p&&(v.beginPath(),s.buildPath(v,s.shape),s.pathUpdated());var b=v.getVersion(),_=s,w=_.__svgPathBuilder;(_.__svgPathVersion!==b||!w||h!==_.__svgPathStrokePercent)&&(w||(w=_.__svgPathBuilder=new SVGPathRebuilder),w.reset(f),v.rebuildPath(w,h),w.generateStr(),_.__svgPathVersion=b,_.__svgPathStrokePercent=h),c.d=w.getStr()}return setTransform(c,s.transform),setStyleAttrs(c,n,s,o),setMetaData(c,s),o.animation&&createCSSAnimation(s,c,o),o.emphasis&&createCSSEmphasis(s,c,o),createVNode(d,s.id+"",c)}function brushSVGImage(s,o){var n=s.style,a=n.image;if(a&&!isString$2(a)&&(isImageLike(a)?a=a.src:isCanvasLike(a)&&(a=a.toDataURL())),!!a){var l=n.x||0,c=n.y||0,u=n.width,d=n.height,h={href:a,width:u,height:d};return l&&(h.x=l),c&&(h.y=c),setTransform(h,s.transform),setStyleAttrs(h,n,s,o),setMetaData(h,s),o.animation&&createCSSAnimation(s,h,o),createVNode("image",s.id+"",h)}}function brushSVGTSpan(s,o){var n=s.style,a=n.text;if(a!=null&&(a+=""),!(!a||isNaN(n.x)||isNaN(n.y))){var l=n.font||DEFAULT_FONT,c=n.x||0,u=adjustTextY$1(n.y||0,getLineHeight(l),n.textBaseline),d=TEXT_ALIGN_TO_ANCHOR[n.textAlign]||n.textAlign,h={"dominant-baseline":"central","text-anchor":d};if(hasSeparateFont(n)){var f="",g=n.fontStyle,p=parseFontSize(n.fontSize);if(!parseFloat(p))return;var v=n.fontFamily||DEFAULT_FONT_FAMILY,b=n.fontWeight;f+="font-size:"+p+";font-family:"+v+";",g&&g!=="normal"&&(f+="font-style:"+g+";"),b&&b!=="normal"&&(f+="font-weight:"+b+";"),h.style=f}else h.style="font: "+l;return a.match(/\s/)&&(h["xml:space"]="preserve"),c&&(h.x=c),u&&(h.y=u),setTransform(h,s.transform),setStyleAttrs(h,n,s,o),setMetaData(h,s),o.animation&&createCSSAnimation(s,h,o),createVNode("text",s.id+"",h,void 0,a)}}function brush(s,o){if(s instanceof Path)return brushSVGPath(s,o);if(s instanceof ZRImage)return brushSVGImage(s,o);if(s instanceof TSpan)return brushSVGTSpan(s,o)}function setShadow(s,o,n){var a=s.style;if(hasShadow(a)){var l=getShadowKey(s),c=n.shadowCache,u=c[l];if(!u){var d=s.getGlobalScale(),h=d[0],f=d[1];if(!h||!f)return;var g=a.shadowOffsetX||0,p=a.shadowOffsetY||0,v=a.shadowBlur,b=normalizeColor(a.shadowColor),_=b.opacity,w=b.color,x=v/2/h,S=v/2/f,C=x+" "+S;u=n.zrId+"-s"+n.shadowIdx++,n.defs[u]=createVNode("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:g/h,dy:p/f,stdDeviation:C,"flood-color":w,"flood-opacity":_})]),c[l]=u}o.filter=getIdURL(u)}}function setGradient(s,o,n,a){var l=s[n],c,u={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))c="linearGradient",u.x1=l.x,u.y1=l.y,u.x2=l.x2,u.y2=l.y2;else if(isRadialGradient(l))c="radialGradient",u.cx=retrieve2(l.x,.5),u.cy=retrieve2(l.y,.5),u.r=retrieve2(l.r,.5);else{process.env.NODE_ENV!=="production"&&logError("Illegal gradient type.");return}for(var d=l.colorStops,h=[],f=0,g=d.length;f<g;++f){var p=round4(d[f].offset)*100+"%",v=d[f].color,b=normalizeColor(v),_=b.color,w=b.opacity,x={offset:p};x["stop-color"]=_,w<1&&(x["stop-opacity"]=w),h.push(createVNode("stop",f+"",x))}var S=createVNode(c,"",u,h),C=vNodeToString(S),T=a.gradientCache,R=T[C];R||(R=a.zrId+"-g"+a.gradientIdx++,T[C]=R,u.id=R,a.defs[R]=createVNode(c,R,u,h)),o[n]=getIdURL(R)}function setPattern(s,o,n,a){var l=s.style[n],c=s.getBoundingRect(),u={},d=l.repeat,h=d==="no-repeat",f=d==="repeat-x",g=d==="repeat-y",p;if(isImagePattern(l)){var v=l.imageWidth,b=l.imageHeight,_=void 0,w=l.image;if(isString$2(w)?_=w:isImageLike(w)?_=w.src:isCanvasLike(w)&&(_=w.toDataURL()),typeof Image>"u"){var x="Image width/height must been given explictly in svg-ssr renderer.";assert(v,x),assert(b,x)}else if(v==null||b==null){var S=function(j,q){if(j){var Y=j.elm,ee=v||q.width,te=b||q.height;j.tag==="pattern"&&(f?(te=1,ee/=c.width):g&&(ee=1,te/=c.height)),j.attrs.width=ee,j.attrs.height=te,Y&&(Y.setAttribute("width",ee),Y.setAttribute("height",te))}},C=createOrUpdateImage(_,null,s,function(j){h||S(M,j),S(p,j)});C&&C.width&&C.height&&(v=v||C.width,b=b||C.height)}p=createVNode("image","img",{href:_,width:v,height:b}),u.width=v,u.height=b}else l.svgElement&&(p=clone$4(l.svgElement),u.width=l.svgWidth,u.height=l.svgHeight);if(p){var T,R;h?T=R=1:f?(R=1,T=u.width/c.width):g?(T=1,R=u.height/c.height):u.patternUnits="userSpaceOnUse",T!=null&&!isNaN(T)&&(u.width=T),R!=null&&!isNaN(R)&&(u.height=R);var A=getSRTTransformString(l);A&&(u.patternTransform=A);var M=createVNode("pattern","",u,[p]),D=vNodeToString(M),O=a.patternCache,H=O[D];H||(H=a.zrId+"-p"+a.patternIdx++,O[D]=H,u.id=H,M=a.defs[H]=createVNode("pattern",H,u,[p])),o[n]=getIdURL(H)}}function setClipPath(s,o,n){var a=n.clipPathCache,l=n.defs,c=a[s.id];if(!c){c=n.zrId+"-c"+n.clipPathIdx++;var u={id:c};a[s.id]=c,l[c]=createVNode("clipPath",c,u,[brushSVGPath(s,n)])}o["clip-path"]=getIdURL(c)}function createTextNode(s){return document.createTextNode(s)}function insertBefore(s,o,n){s.insertBefore(o,n)}function removeChild(s,o){s.removeChild(o)}function appendChild(s,o){s.appendChild(o)}function parentNode(s){return s.parentNode}function nextSibling(s){return s.nextSibling}function setTextContent(s,o){s.textContent=o}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(s){return s===void 0}function isDef(s){return s!==void 0}function createKeyToOldIdx(s,o,n){for(var a={},l=o;l<=n;++l){var c=s[l].key;c!==void 0&&(process.env.NODE_ENV!=="production"&&a[c]!=null&&console.error("Duplicate key "+c),a[c]=l)}return a}function sameVnode(s,o){var n=s.key===o.key,a=s.tag===o.tag;return a&&n}function createElm(s){var o,n=s.children,a=s.tag;if(isDef(a)){var l=s.elm=createElement(a);if(updateAttrs(emptyNode,s),isArray$1(n))for(o=0;o<n.length;++o){var c=n[o];c!=null&&appendChild(l,createElm(c))}else isDef(s.text)&&!isObject$3(s.text)&&appendChild(l,createTextNode(s.text))}else s.elm=createTextNode(s.text);return s.elm}function addVnodes(s,o,n,a,l){for(;a<=l;++a){var c=n[a];c!=null&&insertBefore(s,createElm(c),o)}}function removeVnodes(s,o,n,a){for(;n<=a;++n){var l=o[n];if(l!=null)if(isDef(l.tag)){var c=parentNode(l.elm);removeChild(c,l.elm)}else removeChild(s,l.elm)}}function updateAttrs(s,o){var n,a=o.elm,l=s&&s.attrs||{},c=o.attrs||{};if(l!==c){for(n in c){var u=c[n],d=l[n];d!==u&&(u===!0?a.setAttribute(n,""):u===!1?a.removeAttribute(n):n==="style"?a.style.cssText=u:n.charCodeAt(0)!==xChar?a.setAttribute(n,u):n==="xmlns:xlink"||n==="xmlns"?a.setAttributeNS(XMLNS,n,u):n.charCodeAt(3)===colonChar?a.setAttributeNS(XML_NAMESPACE,n,u):n.charCodeAt(5)===colonChar?a.setAttributeNS(XLINKNS,n,u):a.setAttribute(n,u))}for(n in l)n in c||a.removeAttribute(n)}}function updateChildren(s,o,n){for(var a=0,l=0,c=o.length-1,u=o[0],d=o[c],h=n.length-1,f=n[0],g=n[h],p,v,b,_;a<=c&&l<=h;)u==null?u=o[++a]:d==null?d=o[--c]:f==null?f=n[++l]:g==null?g=n[--h]:sameVnode(u,f)?(patchVnode(u,f),u=o[++a],f=n[++l]):sameVnode(d,g)?(patchVnode(d,g),d=o[--c],g=n[--h]):sameVnode(u,g)?(patchVnode(u,g),insertBefore(s,u.elm,nextSibling(d.elm)),u=o[++a],g=n[--h]):sameVnode(d,f)?(patchVnode(d,f),insertBefore(s,d.elm,u.elm),d=o[--c],f=n[++l]):(isUndef(p)&&(p=createKeyToOldIdx(o,a,c)),v=p[f.key],isUndef(v)?insertBefore(s,createElm(f),u.elm):(b=o[v],b.tag!==f.tag?insertBefore(s,createElm(f),u.elm):(patchVnode(b,f),o[v]=void 0,insertBefore(s,b.elm,u.elm))),f=n[++l]);(a<=c||l<=h)&&(a>c?(_=n[h+1]==null?null:n[h+1].elm,addVnodes(s,_,n,l,h)):removeVnodes(s,o,a,c))}function patchVnode(s,o){var n=o.elm=s.elm,a=s.children,l=o.children;s!==o&&(updateAttrs(s,o),isUndef(o.text)?isDef(a)&&isDef(l)?a!==l&&updateChildren(n,a,l):isDef(l)?(isDef(s.text)&&setTextContent(n,""),addVnodes(n,null,l,0,l.length-1)):isDef(a)?removeVnodes(n,a,0,a.length-1):isDef(s.text)&&setTextContent(n,""):s.text!==o.text&&(isDef(a)&&removeVnodes(n,a,0,a.length-1),setTextContent(n,o.text)))}function patch(s,o){if(sameVnode(s,o))patchVnode(s,o);else{var n=s.elm,a=parentNode(n);createElm(o),a!==null&&(insertBefore(a,o.elm,nextSibling(n)),removeVnodes(a,[s],0,0))}return o}var svgId=0,SVGPainter=function(){function s(o,n,a){if(this.type="svg",this.refreshHover=createMethodNotSupport("refreshHover"),this.configLayer=createMethodNotSupport("configLayer"),this.storage=n,this._opts=a=extend({},a),this.root=o,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(a.width,a.height),o&&!a.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var c=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(c),o.appendChild(l)}this.resize(a.width,a.height)}return s.prototype.getType=function(){return this.type},s.prototype.getViewportRoot=function(){return this._viewport},s.prototype.getViewportRootOffset=function(){var o=this.getViewportRoot();if(o)return{offsetLeft:o.offsetLeft||0,offsetTop:o.offsetTop||0}},s.prototype.getSvgDom=function(){return this._svgDom},s.prototype.refresh=function(){if(this.root){var o=this.renderToVNode({willUpdate:!0});o.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,o),this._oldVNode=o}},s.prototype.renderOneToVNode=function(o){return brush(o,createBrushScope(this._id))},s.prototype.renderToVNode=function(o){o=o||{};var n=this.storage.getDisplayList(!0),a=this._width,l=this._height,c=createBrushScope(this._id);c.animation=o.animation,c.willUpdate=o.willUpdate,c.compress=o.compress,c.emphasis=o.emphasis,c.ssr=this._opts.ssr;var u=[],d=this._bgVNode=createBackgroundVNode(a,l,this._backgroundColor,c);d&&u.push(d);var h=o.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(n,c,h?h.children:u),h&&u.push(h);var f=map$1(keys(c.defs),function(v){return c.defs[v]});if(f.length&&u.push(createVNode("defs","defs",{},f)),o.animation){var g=getCssString(c.cssNodes,c.cssAnims,{newline:!0});if(g){var p=createVNode("style","stl",{},[],g);u.push(p)}}return createSVGVNode(a,l,u,o.useViewBox)},s.prototype.renderToString=function(o){return o=o||{},vNodeToString(this.renderToVNode({animation:retrieve2(o.cssAnimation,!0),emphasis:retrieve2(o.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(o.useViewBox,!0)}),{newline:!0})},s.prototype.setBackgroundColor=function(o){this._backgroundColor=o},s.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},s.prototype._paintList=function(o,n,a){for(var l=o.length,c=[],u=0,d,h,f=0,g=0;g<l;g++){var p=o[g];if(!p.invisible){var v=p.__clipPaths,b=v&&v.length||0,_=h&&h.length||0,w=void 0;for(w=Math.max(b-1,_-1);w>=0&&!(v&&h&&v[w]===h[w]);w--);for(var x=_-1;x>w;x--)u--,d=c[u-1];for(var S=w+1;S<b;S++){var C={};setClipPath(v[S],C,n);var T=createVNode("g","clip-g-"+f++,C,[]);(d?d.children:a).push(T),c[u++]=T,d=T}h=v;var R=brush(p,n);R&&(d?d.children:a).push(R)}}},s.prototype.resize=function(o,n){var a=this._opts,l=this.root,c=this._viewport;if(o!=null&&(a.width=o),n!=null&&(a.height=n),l&&c&&(c.style.display="none",o=getSize$1(l,0,a),n=getSize$1(l,1,a),c.style.display=""),this._width!==o||this._height!==n){if(this._width=o,this._height=n,c){var u=c.style;u.width=o+"px",u.height=n+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var d=this._svgDom;d&&(d.setAttribute("width",o),d.setAttribute("height",n));var h=this._bgVNode&&this._bgVNode.elm;h&&(h.setAttribute("width",o),h.setAttribute("height",n))}}},s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},s.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},s.prototype.toDataURL=function(o){var n=this.renderToString(),a="data:image/svg+xml;";return o?(n=encodeBase64(n),n&&a+"base64,"+n):a+"charset=UTF-8,"+encodeURIComponent(n)},s}();function createMethodNotSupport(s){return function(){process.env.NODE_ENV!=="production"&&logError('In SVG mode painter not support method "'+s+'"')}}function createBackgroundVNode(s,o,n,a){var l;if(n&&n!=="none")if(l=createVNode("rect","bg",{width:s,height:o,x:"0",y:"0"}),isGradient(n))setGradient({fill:n},l.attrs,"fill",a);else if(isPattern(n))setPattern({style:{fill:n},dirty:noop$1,getBoundingRect:function(){return{width:s,height:o}}},l.attrs,"fill",a);else{var c=normalizeColor(n),u=c.color,d=c.opacity;l.attrs.fill=u,d<1&&(l.attrs["fill-opacity"]=d)}return l}function install$S(s){s.registerPainter("svg",SVGPainter)}function createDom(s,o,n){var a=platformApi.createCanvas(),l=o.getWidth(),c=o.getHeight(),u=a.style;return u&&(u.position="absolute",u.left="0",u.top="0",u.width=l+"px",u.height=c+"px",a.setAttribute("data-zr-dom-id",s)),a.width=l*n,a.height=c*n,a}var Layer=function(s){__extends(o,s);function o(n,a,l){var c=s.call(this)||this;c.motionBlur=!1,c.lastFrameAlpha=.7,c.dpr=1,c.virtual=!1,c.config={},c.incremental=!1,c.zlevel=0,c.maxRepaintRectCount=5,c.__dirty=!0,c.__firstTimePaint=!0,c.__used=!1,c.__drawIndex=0,c.__startIndex=0,c.__endIndex=0,c.__prevStartIndex=null,c.__prevEndIndex=null;var u;l=l||devicePixelRatio,typeof n=="string"?u=createDom(n,a,l):isObject$3(n)&&(u=n,n=u.id),c.id=n,c.dom=u;var d=u.style;return d&&(disableUserSelect(u),u.onselectstart=function(){return!1},d.padding="0",d.margin="0",d.borderWidth="0"),c.painter=a,c.dpr=l,c}return o.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},o.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},o.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},o.prototype.setUnpainted=function(){this.__firstTimePaint=!0},o.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},o.prototype.createRepaintRects=function(n,a,l,c){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var u=[],d=this.maxRepaintRectCount,h=!1,f=new BoundingRect(0,0,0,0);function g(C){if(!(!C.isFinite()||C.isZero()))if(u.length===0){var T=new BoundingRect(0,0,0,0);T.copy(C),u.push(T)}else{for(var R=!1,A=1/0,M=0,D=0;D<u.length;++D){var O=u[D];if(O.intersect(C)){var H=new BoundingRect(0,0,0,0);H.copy(O),H.union(C),u[D]=H,R=!0;break}else if(h){f.copy(C),f.union(O);var j=C.width*C.height,q=O.width*O.height,Y=f.width*f.height,ee=Y-j-q;ee<A&&(A=ee,M=D)}}if(h&&(u[M].union(C),R=!0),!R){var T=new BoundingRect(0,0,0,0);T.copy(C),u.push(T)}h||(h=u.length>=d)}}for(var p=this.__startIndex;p<this.__endIndex;++p){var v=n[p];if(v){var b=v.shouldBePainted(l,c,!0,!0),_=v.__isRendered&&(v.__dirty&REDRAW_BIT||!b)?v.getPrevPaintRect():null;_&&g(_);var w=b&&(v.__dirty&REDRAW_BIT||!v.__isRendered)?v.getPaintRect():null;w&&g(w)}}for(var p=this.__prevStartIndex;p<this.__prevEndIndex;++p){var v=a[p],b=v&&v.shouldBePainted(l,c,!0,!0);if(v&&(!b||!v.__zr)&&v.__isRendered){var _=v.getPrevPaintRect();_&&g(_)}}var x;do{x=!1;for(var p=0;p<u.length;){if(u[p].isZero()){u.splice(p,1);continue}for(var S=p+1;S<u.length;)u[p].intersect(u[S])?(x=!0,u[p].union(u[S]),u.splice(S,1)):S++;p++}}while(x);return this._paintRects=u,u},o.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},o.prototype.resize=function(n,a){var l=this.dpr,c=this.dom,u=c.style,d=this.domBack;u&&(u.width=n+"px",u.height=a+"px"),c.width=n*l,c.height=a*l,d&&(d.width=n*l,d.height=a*l,l!==1&&this.ctxBack.scale(l,l))},o.prototype.clear=function(n,a,l){var c=this.dom,u=this.ctx,d=c.width,h=c.height;a=a||this.clearColor;var f=this.motionBlur&&!n,g=this.lastFrameAlpha,p=this.dpr,v=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(c,0,0,d/p,h/p));var b=this.domBack;function _(w,x,S,C){if(u.clearRect(w,x,S,C),a&&a!=="transparent"){var T=void 0;if(isGradientObject(a)){var R=a.global||a.__width===S&&a.__height===C;T=R&&a.__canvasGradient||getCanvasGradient(u,a,{x:0,y:0,width:S,height:C}),a.__canvasGradient=T,a.__width=S,a.__height=C}else isImagePatternObject(a)&&(a.scaleX=a.scaleX||p,a.scaleY=a.scaleY||p,T=createCanvasPattern(u,a,{dirty:function(){v.setUnpainted(),v.painter.refresh()}}));u.save(),u.fillStyle=T||a,u.fillRect(w,x,S,C),u.restore()}f&&(u.save(),u.globalAlpha=g,u.drawImage(b,w,x,S,C),u.restore())}!l||f?_(0,0,d,h):l.length&&each$f(l,function(w){_(w.x*p,w.y*p,w.width*p,w.height*p)})},o}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(s){return s?s.__builtin__?!0:!(typeof s.resize!="function"||typeof s.refresh!="function"):!1}function createRoot(s,o){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+s+"px","height:"+o+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var CanvasPainter=function(){function s(o,n,a,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var c=!o.nodeName||o.nodeName.toUpperCase()==="CANVAS";this._opts=a=extend({},a||{}),this.dpr=a.devicePixelRatio||devicePixelRatio,this._singleCanvas=c,this.root=o;var u=o.style;u&&(disableUserSelect(o),o.innerHTML=""),this.storage=n;var d=this._zlevelList;this._prevDisplayList=[];var h=this._layers;if(c){var g=o,p=g.width,v=g.height;a.width!=null&&(p=a.width),a.height!=null&&(v=a.height),this.dpr=a.devicePixelRatio||1,g.width=p*this.dpr,g.height=v*this.dpr,this._width=p,this._height=v;var b=new Layer(g,this,this.dpr);b.__builtin__=!0,b.initContext(),h[CANVAS_ZLEVEL]=b,b.zlevel=CANVAS_ZLEVEL,d.push(CANVAS_ZLEVEL),this._domRoot=o}else{this._width=getSize$1(o,0,a),this._height=getSize$1(o,1,a);var f=this._domRoot=createRoot(this._width,this._height);o.appendChild(f)}}return s.prototype.getType=function(){return"canvas"},s.prototype.isSingleCanvas=function(){return this._singleCanvas},s.prototype.getViewportRoot=function(){return this._domRoot},s.prototype.getViewportRootOffset=function(){var o=this.getViewportRoot();if(o)return{offsetLeft:o.offsetLeft||0,offsetTop:o.offsetTop||0}},s.prototype.refresh=function(o){var n=this.storage.getDisplayList(!0),a=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,a,o,this._redrawId);for(var c=0;c<l.length;c++){var u=l[c],d=this._layers[u];if(!d.__builtin__&&d.refresh){var h=c===0?this._backgroundColor:null;d.refresh(h)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},s.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},s.prototype._paintHoverList=function(o){var n=o.length,a=this._hoverlayer;if(a&&a.clear(),!!n){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},c,u=0;u<n;u++){var d=o[u];d.__inHover&&(a||(a=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),c||(c=a.ctx,c.save()),brush$1(c,d,l,u===n-1))}c&&c.restore()}},s.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},s.prototype.paintOne=function(o,n){brushSingle(o,n)},s.prototype._paintList=function(o,n,a,l){if(this._redrawId===l){a=a||!1,this._updateLayerStatus(o);var c=this._doPaintList(o,n,a),u=c.finished,d=c.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),d&&this._paintHoverList(o),u)this.eachLayer(function(f){f.afterBrush&&f.afterBrush()});else{var h=this;requestAnimationFrame$1(function(){h._paintList(o,n,a,l)})}}},s.prototype._compositeManually=function(){var o=this.getLayer(CANVAS_ZLEVEL).ctx,n=this._domRoot.width,a=this._domRoot.height;o.clearRect(0,0,n,a),this.eachBuiltinLayer(function(l){l.virtual&&o.drawImage(l.dom,0,0,n,a)})},s.prototype._doPaintList=function(o,n,a){for(var l=this,c=[],u=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var h=this._zlevelList[d],f=this._layers[h];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||a)&&c.push(f)}for(var g=!0,p=!1,v=function(w){var x=c[w],S=x.ctx,C=u&&x.createRepaintRects(o,n,b._width,b._height),T=a?x.__startIndex:x.__drawIndex,R=!a&&x.incremental&&Date.now,A=R&&Date.now(),M=x.zlevel===b._zlevelList[0]?b._backgroundColor:null;if(x.__startIndex===x.__endIndex)x.clear(!1,M,C);else if(T===x.__startIndex){var D=o[T];(!D.incremental||!D.notClear||a)&&x.clear(!1,M,C)}T===-1&&(console.error("For some unknown reason. drawIndex is -1"),T=x.__startIndex);var O,H=function(ee){var te={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(O=T;O<x.__endIndex;O++){var re=o[O];if(re.__inHover&&(p=!0),l._doPaintEl(re,x,u,ee,te,O===x.__endIndex-1),R){var ae=Date.now()-A;if(ae>15)break}}te.prevElClipPaths&&S.restore()};if(C)if(C.length===0)O=x.__endIndex;else for(var j=b.dpr,q=0;q<C.length;++q){var Y=C[q];S.save(),S.beginPath(),S.rect(Y.x*j,Y.y*j,Y.width*j,Y.height*j),S.clip(),H(Y),S.restore()}else S.save(),H(),S.restore();x.__drawIndex=O,x.__drawIndex<x.__endIndex&&(g=!1)},b=this,_=0;_<c.length;_++)v(_);return env.wxa&&each$f(this._layers,function(w){w&&w.ctx&&w.ctx.draw&&w.ctx.draw()}),{finished:g,needsRefreshHover:p}},s.prototype._doPaintEl=function(o,n,a,l,c,u){var d=n.ctx;if(a){var h=o.getPaintRect();(!l||h&&h.intersect(l))&&(brush$1(d,o,c,u),o.setPrevPaintRect(h))}else brush$1(d,o,c,u)},s.prototype.getLayer=function(o,n){this._singleCanvas&&!this._needsManuallyCompositing&&(o=CANVAS_ZLEVEL);var a=this._layers[o];return a||(a=new Layer("zr_"+o,this,this.dpr),a.zlevel=o,a.__builtin__=!0,this._layerConfig[o]?merge(a,this._layerConfig[o],!0):this._layerConfig[o-EL_AFTER_INCREMENTAL_INC]&&merge(a,this._layerConfig[o-EL_AFTER_INCREMENTAL_INC],!0),n&&(a.virtual=n),this.insertLayer(o,a),a.initContext()),a},s.prototype.insertLayer=function(o,n){var a=this._layers,l=this._zlevelList,c=l.length,u=this._domRoot,d=null,h=-1;if(a[o]){process.env.NODE_ENV!=="production"&&logError("ZLevel "+o+" has been used already");return}if(!isLayerValid(n)){process.env.NODE_ENV!=="production"&&logError("Layer of zlevel "+o+" is not valid");return}if(c>0&&o>l[0]){for(h=0;h<c-1&&!(l[h]<o&&l[h+1]>o);h++);d=a[l[h]]}if(l.splice(h+1,0,o),a[o]=n,!n.virtual)if(d){var f=d.dom;f.nextSibling?u.insertBefore(n.dom,f.nextSibling):u.appendChild(n.dom)}else u.firstChild?u.insertBefore(n.dom,u.firstChild):u.appendChild(n.dom);n.painter||(n.painter=this)},s.prototype.eachLayer=function(o,n){for(var a=this._zlevelList,l=0;l<a.length;l++){var c=a[l];o.call(n,this._layers[c],c)}},s.prototype.eachBuiltinLayer=function(o,n){for(var a=this._zlevelList,l=0;l<a.length;l++){var c=a[l],u=this._layers[c];u.__builtin__&&o.call(n,u,c)}},s.prototype.eachOtherLayer=function(o,n){for(var a=this._zlevelList,l=0;l<a.length;l++){var c=a[l],u=this._layers[c];u.__builtin__||o.call(n,u,c)}},s.prototype.getLayers=function(){return this._layers},s.prototype._updateLayerStatus=function(o){this.eachBuiltinLayer(function(p,v){p.__dirty=p.__used=!1});function n(p){c&&(c.__endIndex!==p&&(c.__dirty=!0),c.__endIndex=p)}if(this._singleCanvas)for(var a=1;a<o.length;a++){var l=o[a];if(l.zlevel!==o[a-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var c=null,u=0,d,h;for(h=0;h<o.length;h++){var l=o[h],f=l.zlevel,g=void 0;d!==f&&(d=f,u=0),l.incremental?(g=this.getLayer(f+INCREMENTAL_INC,this._needsManuallyCompositing),g.incremental=!0,u=1):g=this.getLayer(f+(u>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),g.__builtin__||logError("ZLevel "+f+" has been used by unkown layer "+g.id),g!==c&&(g.__used=!0,g.__startIndex!==h&&(g.__dirty=!0),g.__startIndex=h,g.incremental?g.__drawIndex=-1:g.__drawIndex=h,n(h),c=g),l.__dirty&REDRAW_BIT&&!l.__inHover&&(g.__dirty=!0,g.incremental&&g.__drawIndex<0&&(g.__drawIndex=h))}n(h),this.eachBuiltinLayer(function(p,v){!p.__used&&p.getElementCount()>0&&(p.__dirty=!0,p.__startIndex=p.__endIndex=p.__drawIndex=0),p.__dirty&&p.__drawIndex<0&&(p.__drawIndex=p.__startIndex)})},s.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},s.prototype._clearLayer=function(o){o.clear()},s.prototype.setBackgroundColor=function(o){this._backgroundColor=o,each$f(this._layers,function(n){n.setUnpainted()})},s.prototype.configLayer=function(o,n){if(n){var a=this._layerConfig;a[o]?merge(a[o],n,!0):a[o]=n;for(var l=0;l<this._zlevelList.length;l++){var c=this._zlevelList[l];if(c===o||c===o+EL_AFTER_INCREMENTAL_INC){var u=this._layers[c];merge(u,a[o],!0)}}}},s.prototype.delLayer=function(o){var n=this._layers,a=this._zlevelList,l=n[o];l&&(l.dom.parentNode.removeChild(l.dom),delete n[o],a.splice(indexOf(a,o),1))},s.prototype.resize=function(o,n){if(this._domRoot.style){var a=this._domRoot;a.style.display="none";var l=this._opts,c=this.root;if(o!=null&&(l.width=o),n!=null&&(l.height=n),o=getSize$1(c,0,l),n=getSize$1(c,1,l),a.style.display="",this._width!==o||n!==this._height){a.style.width=o+"px",a.style.height=n+"px";for(var u in this._layers)this._layers.hasOwnProperty(u)&&this._layers[u].resize(o,n);this.refresh(!0)}this._width=o,this._height=n}else{if(o==null||n==null)return;this._width=o,this._height=n,this.getLayer(CANVAS_ZLEVEL).resize(o,n)}return this},s.prototype.clearLayer=function(o){var n=this._layers[o];n&&n.clear()},s.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},s.prototype.getRenderedCanvas=function(o){if(o=o||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var n=new Layer("image",this,o.pixelRatio||this.dpr);n.initContext(),n.clear(!1,o.backgroundColor||this._backgroundColor);var a=n.ctx;if(o.pixelRatio<=this.dpr){this.refresh();var l=n.dom.width,c=n.dom.height;this.eachLayer(function(p){p.__builtin__?a.drawImage(p.dom,0,0,l,c):p.renderToCanvas&&(a.save(),p.renderToCanvas(a),a.restore())})}else for(var u={inHover:!1,viewWidth:this._width,viewHeight:this._height},d=this.storage.getDisplayList(!0),h=0,f=d.length;h<f;h++){var g=d[h];brush$1(a,g,u,h===f-1)}return n.dom},s.prototype.getWidth=function(){return this._width},s.prototype.getHeight=function(){return this._height},s}();function install$R(s){s.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.hasSymbolVisual=!0,n}return o.prototype.getInitialData=function(n){if(process.env.NODE_ENV!=="production"){var a=n.coordinateSystem;if(a!=="polar"&&a!=="cartesian2d")throw new Error("Line not support coordinateSystem besides cartesian and polar")}return createSeriesData(null,this,{useEncodeDefaulter:!0})},o.prototype.getLegendIcon=function(n){var a=new Group$3,l=createSymbol$1("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);a.add(l),l.setStyle(n.lineStyle);var c=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),d=c==="none"?"circle":c,h=n.itemHeight*.8,f=createSymbol$1(d,(n.itemWidth-h)/2,(n.itemHeight-h)/2,h,h,n.itemStyle.fill);a.add(f),f.setStyle(n.itemStyle);var g=n.iconRotate==="inherit"?u:n.iconRotate||0;return f.rotation=g*Math.PI/180,f.setOrigin([n.itemWidth/2,n.itemHeight/2]),d.indexOf("empty")>-1&&(f.style.stroke=f.style.fill,f.style.fill="#fff",f.style.lineWidth=2),a},o.type="series.line",o.dependencies=["grid","polar"],o.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},o}(SeriesModel);function getDefaultLabel(s,o){var n=s.mapDimensionsAll("defaultedLabel"),a=n.length;if(a===1){var l=retrieveRawValue(s,o,n[0]);return l!=null?l+"":null}else if(a){for(var c=[],u=0;u<n.length;u++)c.push(retrieveRawValue(s,o,n[u]));return c.join(" ")}}function getDefaultInterpolatedLabel(s,o){var n=s.mapDimensionsAll("defaultedLabel");if(!isArray$1(o))return o+"";for(var a=[],l=0;l<n.length;l++){var c=s.getDimensionIndex(n[l]);c>=0&&a.push(o[c])}return a.join(" ")}var Symbol$1=function(s){__extends$1(o,s);function o(n,a,l,c){var u=s.call(this)||this;return u.updateData(n,a,l,c),u}return o.prototype._createSymbol=function(n,a,l,c,u){this.removeAll();var d=createSymbol$1(n,-1,-1,2,2,null,u);d.attr({z2:100,culling:!0,scaleX:c[0]/2,scaleY:c[1]/2}),d.drift=driftSymbol,this._symbolType=n,this.add(d)},o.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},o.prototype.getSymbolType=function(){return this._symbolType},o.prototype.getSymbolPath=function(){return this.childAt(0)},o.prototype.highlight=function(){enterEmphasis(this.childAt(0))},o.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},o.prototype.setZ=function(n,a){var l=this.childAt(0);l.zlevel=n,l.z=a},o.prototype.setDraggable=function(n,a){var l=this.childAt(0);l.draggable=n,l.cursor=!a&&n?"move":l.cursor},o.prototype.updateData=function(n,a,l,c){this.silent=!1;var u=n.getItemVisual(a,"symbol")||"circle",d=n.hostModel,h=o.getSymbolSize(n,a),f=u!==this._symbolType,g=c&&c.disableAnimation;if(f){var p=n.getItemVisual(a,"symbolKeepAspect");this._createSymbol(u,n,a,h,p)}else{var v=this.childAt(0);v.silent=!1;var b={scaleX:h[0]/2,scaleY:h[1]/2};g?v.attr(b):updateProps$1(v,b,d,a),saveOldStyle(v)}if(this._updateCommon(n,a,h,l,c),f){var v=this.childAt(0);if(!g){var b={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}};v.scaleX=v.scaleY=0,v.style.opacity=0,initProps(v,b,d,a)}}g&&this.childAt(0).stopAnimation("leave")},o.prototype._updateCommon=function(n,a,l,c,u){var d=this.childAt(0),h=n.hostModel,f,g,p,v,b,_,w,x,S;if(c&&(f=c.emphasisItemStyle,g=c.blurItemStyle,p=c.selectItemStyle,v=c.focus,b=c.blurScope,w=c.labelStatesModels,x=c.hoverScale,S=c.cursorStyle,_=c.emphasisDisabled),!c||n.hasItemOption){var C=c&&c.itemModel?c.itemModel:n.getItemModel(a),T=C.getModel("emphasis");f=T.getModel("itemStyle").getItemStyle(),p=C.getModel(["select","itemStyle"]).getItemStyle(),g=C.getModel(["blur","itemStyle"]).getItemStyle(),v=T.get("focus"),b=T.get("blurScope"),_=T.get("disabled"),w=getLabelStatesModels(C),x=T.getShallow("scale"),S=C.getShallow("cursor")}var R=n.getItemVisual(a,"symbolRotate");d.attr("rotation",(R||0)*Math.PI/180||0);var A=normalizeSymbolOffset(n.getItemVisual(a,"symbolOffset"),l);A&&(d.x=A[0],d.y=A[1]),S&&d.attr("cursor",S);var M=n.getItemVisual(a,"style"),D=M.fill;if(d instanceof ZRImage){var O=d.style;d.useStyle(extend({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},M))}else d.__isEmptyBrush?d.useStyle(extend({},M)):d.useStyle(M),d.style.decal=null,d.setColor(D,u&&u.symbolInnerColor),d.style.strokeNoScale=!0;var H=n.getItemVisual(a,"liftZ"),j=this._z2;H!=null?j==null&&(this._z2=d.z2,d.z2+=H):j!=null&&(d.z2=j,this._z2=null);var q=u&&u.useNameLabel;setLabelStyle(d,w,{labelFetcher:h,labelDataIndex:a,defaultText:Y,inheritColor:D,defaultOpacity:M.opacity});function Y(re){return q?n.getName(re):getDefaultLabel(n,re)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var ee=d.ensureState("emphasis");ee.style=f,d.ensureState("select").style=p,d.ensureState("blur").style=g;var te=x==null||x===!0?Math.max(1.1,3/this._sizeY):isFinite(x)&&x>0?+x:1;ee.scaleX=this._sizeX*te,ee.scaleY=this._sizeY*te,this.setSymbolScale(1),toggleHoverEmphasis(this,v,b,_)},o.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},o.prototype.fadeOut=function(n,a,l){var c=this.childAt(0),u=getECData(this).dataIndex,d=l&&l.animation;if(this.silent=c.silent=!0,l&&l.fadeLabel){var h=c.getTextContent();h&&removeElement(h,{style:{opacity:0}},a,{dataIndex:u,removeOpt:d,cb:function(){c.removeTextContent()}})}else c.removeTextContent();removeElement(c,{style:{opacity:0},scaleX:0,scaleY:0},a,{dataIndex:u,cb:n,removeOpt:d})},o.getSymbolSize=function(n,a){return normalizeSymbolSize(n.getItemVisual(a,"symbolSize"))},o}(Group$3);function driftSymbol(s,o){this.parent.drift(s,o)}function symbolNeedsDraw$1(s,o,n,a){return o&&!isNaN(o[0])&&!isNaN(o[1])&&!(a.isIgnore&&a.isIgnore(n))&&!(a.clipShape&&!a.clipShape.contain(o[0],o[1]))&&s.getItemVisual(n,"symbol")!=="none"}function normalizeUpdateOpt(s){return s!=null&&!isObject$3(s)&&(s={isIgnore:s}),s||{}}function makeSeriesScope$2(s){var o=s.hostModel,n=o.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:o.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:o.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:getLabelStatesModels(o),cursorStyle:o.get("cursor")}}var SymbolDraw=function(){function s(o){this.group=new Group$3,this._SymbolCtor=o||Symbol$1}return s.prototype.updateData=function(o,n){this._progressiveEls=null,n=normalizeUpdateOpt(n);var a=this.group,l=o.hostModel,c=this._data,u=this._SymbolCtor,d=n.disableAnimation,h=makeSeriesScope$2(o),f={disableAnimation:d},g=n.getSymbolPoint||function(p){return o.getItemLayout(p)};c||a.removeAll(),o.diff(c).add(function(p){var v=g(p);if(symbolNeedsDraw$1(o,v,p,n)){var b=new u(o,p,h,f);b.setPosition(v),o.setItemGraphicEl(p,b),a.add(b)}}).update(function(p,v){var b=c.getItemGraphicEl(v),_=g(p);if(!symbolNeedsDraw$1(o,_,p,n)){a.remove(b);return}var w=o.getItemVisual(p,"symbol")||"circle",x=b&&b.getSymbolType&&b.getSymbolType();if(!b||x&&x!==w)a.remove(b),b=new u(o,p,h,f),b.setPosition(_);else{b.updateData(o,p,h,f);var S={x:_[0],y:_[1]};d?b.attr(S):updateProps$1(b,S,l)}a.add(b),o.setItemGraphicEl(p,b)}).remove(function(p){var v=c.getItemGraphicEl(p);v&&v.fadeOut(function(){a.remove(v)},l)}).execute(),this._getSymbolPoint=g,this._data=o},s.prototype.updateLayout=function(){var o=this,n=this._data;n&&n.eachItemGraphicEl(function(a,l){var c=o._getSymbolPoint(l);a.setPosition(c),a.markRedraw()})},s.prototype.incrementalPrepareUpdate=function(o){this._seriesScope=makeSeriesScope$2(o),this._data=null,this.group.removeAll()},s.prototype.incrementalUpdate=function(o,n,a){this._progressiveEls=[],a=normalizeUpdateOpt(a);function l(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var c=o.start;c<o.end;c++){var u=n.getItemLayout(c);if(symbolNeedsDraw$1(n,u,c,a)){var d=new this._SymbolCtor(n,c,this._seriesScope);d.traverse(l),d.setPosition(u),this.group.add(d),n.setItemGraphicEl(c,d),this._progressiveEls.push(d)}}},s.prototype.eachRendered=function(o){traverseElements(this._progressiveEls||this.group,o)},s.prototype.remove=function(o){var n=this.group,a=this._data;a&&o?a.eachItemGraphicEl(function(l){l.fadeOut(function(){n.remove(l)},a.hostModel)}):n.removeAll()},s}();function prepareDataCoordInfo(s,o,n){var a=s.getBaseAxis(),l=s.getOtherAxis(a),c=getValueStart(l,n),u=a.dim,d=l.dim,h=o.mapDimension(d),f=o.mapDimension(u),g=d==="x"||d==="radius"?1:0,p=map$1(s.dimensions,function(_){return o.mapDimension(_)}),v=!1,b=o.getCalculationInfo("stackResultDimension");return isDimensionStacked(o,p[0])&&(v=!0,p[0]=b),isDimensionStacked(o,p[1])&&(v=!0,p[1]=b),{dataDimsForPoint:p,valueStart:c,valueAxisDim:d,baseAxisDim:u,stacked:!!v,valueDim:h,baseDim:f,baseDataOffset:g,stackedOverDimension:o.getCalculationInfo("stackedOverDimension")}}function getValueStart(s,o){var n=0,a=s.scale.getExtent();return o==="start"?n=a[0]:o==="end"?n=a[1]:isNumber(o)&&!isNaN(o)?n=o:a[0]>0?n=a[0]:a[1]<0&&(n=a[1]),n}function getStackedOnPoint(s,o,n,a){var l=NaN;s.stacked&&(l=n.get(n.getCalculationInfo("stackedOverDimension"),a)),isNaN(l)&&(l=s.valueStart);var c=s.baseDataOffset,u=[];return u[c]=n.get(s.baseDim,a),u[1-c]=l,o.dataToPoint(u)}function diffData(s,o){var n=[];return o.diff(s).add(function(a){n.push({cmd:"+",idx:a})}).update(function(a,l){n.push({cmd:"=",idx:l,idx1:a})}).remove(function(a){n.push({cmd:"-",idx:a})}).execute(),n}function lineAnimationDiff(s,o,n,a,l,c,u,d){for(var h=diffData(s,o),f=[],g=[],p=[],v=[],b=[],_=[],w=[],x=prepareDataCoordInfo(l,o,u),S=s.getLayout("points")||[],C=o.getLayout("points")||[],T=0;T<h.length;T++){var R=h[T],A=!0,M=void 0,D=void 0;switch(R.cmd){case"=":M=R.idx*2,D=R.idx1*2;var O=S[M],H=S[M+1],j=C[D],q=C[D+1];(isNaN(O)||isNaN(H))&&(O=j,H=q),f.push(O,H),g.push(j,q),p.push(n[M],n[M+1]),v.push(a[D],a[D+1]),w.push(o.getRawIndex(R.idx1));break;case"+":var Y=R.idx,ee=x.dataDimsForPoint,te=l.dataToPoint([o.get(ee[0],Y),o.get(ee[1],Y)]);D=Y*2,f.push(te[0],te[1]),g.push(C[D],C[D+1]);var re=getStackedOnPoint(x,l,o,Y);p.push(re[0],re[1]),v.push(a[D],a[D+1]),w.push(o.getRawIndex(Y));break;case"-":A=!1}A&&(b.push(R),_.push(_.length))}_.sort(function(Se,Le){return w[Se]-w[Le]});for(var ae=f.length,ue=createFloat32Array(ae),ce=createFloat32Array(ae),le=createFloat32Array(ae),ie=createFloat32Array(ae),de=[],T=0;T<_.length;T++){var ge=_[T],pe=T*2,be=ge*2;ue[pe]=f[be],ue[pe+1]=f[be+1],ce[pe]=g[be],ce[pe+1]=g[be+1],le[pe]=p[be],le[pe+1]=p[be+1],ie[pe]=v[be],ie[pe+1]=v[be+1],de[T]=b[ge]}return{current:ue,next:ce,stackedOnCurrent:le,stackedOnNext:ie,status:de}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(s,o){return isNaN(s)||isNaN(o)}function drawSegment(s,o,n,a,l,c,u,d,h){for(var f,g,p,v,b,_,w=n,x=0;x<a;x++){var S=o[w*2],C=o[w*2+1];if(w>=l||w<0)break;if(isPointNull$1(S,C)){if(h){w+=c;continue}break}if(w===n)s[c>0?"moveTo":"lineTo"](S,C),p=S,v=C;else{var T=S-f,R=C-g;if(T*T+R*R<.5){w+=c;continue}if(u>0){for(var A=w+c,M=o[A*2],D=o[A*2+1];M===S&&D===C&&x<a;)x++,A+=c,w+=c,M=o[A*2],D=o[A*2+1],S=o[w*2],C=o[w*2+1],T=S-f,R=C-g;var O=x+1;if(h)for(;isPointNull$1(M,D)&&O<a;)O++,A+=c,M=o[A*2],D=o[A*2+1];var H=.5,j=0,q=0,Y=void 0,ee=void 0;if(O>=a||isPointNull$1(M,D))b=S,_=C;else{j=M-f,q=D-g;var te=S-f,re=M-S,ae=C-g,ue=D-C,ce=void 0,le=void 0;if(d==="x"){ce=Math.abs(te),le=Math.abs(re);var ie=j>0?1:-1;b=S-ie*ce*u,_=C,Y=S+ie*le*u,ee=C}else if(d==="y"){ce=Math.abs(ae),le=Math.abs(ue);var de=q>0?1:-1;b=S,_=C-de*ce*u,Y=S,ee=C+de*le*u}else ce=Math.sqrt(te*te+ae*ae),le=Math.sqrt(re*re+ue*ue),H=le/(le+ce),b=S-j*u*(1-H),_=C-q*u*(1-H),Y=S+j*u*H,ee=C+q*u*H,Y=mathMin$5(Y,mathMax$5(M,S)),ee=mathMin$5(ee,mathMax$5(D,C)),Y=mathMax$5(Y,mathMin$5(M,S)),ee=mathMax$5(ee,mathMin$5(D,C)),j=Y-S,q=ee-C,b=S-j*ce/le,_=C-q*ce/le,b=mathMin$5(b,mathMax$5(f,S)),_=mathMin$5(_,mathMax$5(g,C)),b=mathMax$5(b,mathMin$5(f,S)),_=mathMax$5(_,mathMin$5(g,C)),j=S-b,q=C-_,Y=S+j*le/ce,ee=C+q*le/ce}s.bezierCurveTo(p,v,b,_,S,C),p=Y,v=ee}else s.lineTo(S,C)}f=S,g=C,w+=c}return x}var ECPolylineShape=function(){function s(){this.smooth=0,this.smoothConstraint=!0}return s}(),ECPolyline=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="ec-polyline",a}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new ECPolylineShape},o.prototype.buildPath=function(n,a){var l=a.points,c=0,u=l.length/2;if(a.connectNulls){for(;u>0&&isPointNull$1(l[u*2-2],l[u*2-1]);u--);for(;c<u&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<u;)c+=drawSegment(n,l,c,u,u,1,a.smooth,a.smoothMonotone,a.connectNulls)+1},o.prototype.getPointOn=function(n,a){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,c=l.data,u=PathProxy.CMD,d,h,f=a==="x",g=[],p=0;p<c.length;){var v=c[p++],b=void 0,_=void 0,w=void 0,x=void 0,S=void 0,C=void 0,T=void 0;switch(v){case u.M:d=c[p++],h=c[p++];break;case u.L:if(b=c[p++],_=c[p++],T=f?(n-d)/(b-d):(n-h)/(_-h),T<=1&&T>=0){var R=f?(_-h)*T+h:(b-d)*T+d;return f?[n,R]:[R,n]}d=b,h=_;break;case u.C:b=c[p++],_=c[p++],w=c[p++],x=c[p++],S=c[p++],C=c[p++];var A=f?cubicRootAt(d,b,w,S,n,g):cubicRootAt(h,_,x,C,n,g);if(A>0)for(var M=0;M<A;M++){var D=g[M];if(D<=1&&D>=0){var R=f?cubicAt(h,_,x,C,D):cubicAt(d,b,w,S,D);return f?[n,R]:[R,n]}}d=S,h=C;break}}},o}(Path),ECPolygonShape=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o}(ECPolylineShape),ECPolygon=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="ec-polygon",a}return o.prototype.getDefaultShape=function(){return new ECPolygonShape},o.prototype.buildPath=function(n,a){var l=a.points,c=a.stackedOnPoints,u=0,d=l.length/2,h=a.smoothMonotone;if(a.connectNulls){for(;d>0&&isPointNull$1(l[d*2-2],l[d*2-1]);d--);for(;u<d&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<d;){var f=drawSegment(n,l,u,d,d,1,a.smooth,h,a.connectNulls);drawSegment(n,c,u+f-1,f,d,-1,a.stackedOnSmooth,h,a.connectNulls),u+=f+1,n.closePath()}},o}(Path);function createGridClipPath(s,o,n,a,l){var c=s.getArea(),u=c.x,d=c.y,h=c.width,f=c.height,g=n.get(["lineStyle","width"])||0;u-=g/2,d-=g/2,h+=g,f+=g,h=Math.ceil(h),u!==Math.floor(u)&&(u=Math.floor(u),h++);var p=new Rect$2({shape:{x:u,y:d,width:h,height:f}});if(o){var v=s.getBaseAxis(),b=v.isHorizontal(),_=v.inverse;b?(_&&(p.shape.x+=h),p.shape.width=0):(_||(p.shape.y+=f),p.shape.height=0);var w=isFunction$1(l)?function(x){l(x,p)}:null;initProps(p,{shape:{width:h,height:f,x:u,y:d}},n,null,a,w)}return p}function createPolarClipPath(s,o,n){var a=s.getArea(),l=round$3(a.r0,1),c=round$3(a.r,1),u=new Sector({shape:{cx:round$3(s.cx,1),cy:round$3(s.cy,1),r0:l,r:c,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}});if(o){var d=s.getBaseAxis().dim==="angle";d?u.shape.endAngle=a.startAngle:u.shape.r=l,initProps(u,{shape:{endAngle:a.endAngle,r:c}},n)}return u}function createClipPath(s,o,n,a,l){if(s){if(s.type==="polar")return createPolarClipPath(s,o,n);if(s.type==="cartesian2d")return createGridClipPath(s,o,n,a,l)}else return null;return null}function isCoordinateSystemType(s,o){return s.type===o}function isPointsSame(s,o){if(s.length===o.length){for(var n=0;n<s.length;n++)if(s[n]!==o[n])return;return!0}}function bboxFromPoints(s){for(var o=1/0,n=1/0,a=-1/0,l=-1/0,c=0;c<s.length;){var u=s[c++],d=s[c++];isNaN(u)||(o=Math.min(u,o),a=Math.max(u,a)),isNaN(d)||(n=Math.min(d,n),l=Math.max(d,l))}return[[o,n],[a,l]]}function getBoundingDiff(s,o){var n=bboxFromPoints(s),a=n[0],l=n[1],c=bboxFromPoints(o),u=c[0],d=c[1];return Math.max(Math.abs(a[0]-u[0]),Math.abs(a[1]-u[1]),Math.abs(l[0]-d[0]),Math.abs(l[1]-d[1]))}function getSmooth(s){return isNumber(s)?s:s?.5:0}function getStackedOnPoints(s,o,n){if(!n.valueDim)return[];for(var a=o.count(),l=createFloat32Array(a*2),c=0;c<a;c++){var u=getStackedOnPoint(n,s,o,c);l[c*2]=u[0],l[c*2+1]=u[1]}return l}function turnPointsIntoStep(s,o,n,a,l){var c=n.getBaseAxis(),u=c.dim==="x"||c.dim==="radius"?0:1,d=[],h=0,f=[],g=[],p=[],v=[];if(l){for(h=0;h<s.length;h+=2){var b=o||s;!isNaN(b[h])&&!isNaN(b[h+1])&&v.push(s[h],s[h+1])}s=v}for(h=0;h<s.length-2;h+=2)switch(p[0]=s[h+2],p[1]=s[h+3],g[0]=s[h],g[1]=s[h+1],d.push(g[0],g[1]),a){case"end":f[u]=p[u],f[1-u]=g[1-u],d.push(f[0],f[1]);break;case"middle":var _=(g[u]+p[u])/2,w=[];f[u]=w[u]=_,f[1-u]=g[1-u],w[1-u]=p[1-u],d.push(f[0],f[1]),d.push(w[0],w[1]);break;default:f[u]=g[u],f[1-u]=p[1-u],d.push(f[0],f[1])}return d.push(s[h++],s[h++]),d}function clipColorStops(s,o){var n=[],a=s.length,l,c;function u(g,p,v){var b=g.coord,_=(v-b)/(p.coord-b),w=lerp(_,[g.color,p.color]);return{coord:v,color:w}}for(var d=0;d<a;d++){var h=s[d],f=h.coord;if(f<0)l=h;else if(f>o){c?n.push(u(c,h,o)):l&&n.push(u(l,h,0),u(l,h,o));break}else l&&(n.push(u(l,h,0)),l=null),n.push(h),c=h}return n}function getVisualGradient(s,o,n){var a=s.getVisual("visualMeta");if(!(!a||!a.length||!s.count())){if(o.type!=="cartesian2d"){process.env.NODE_ENV!=="production"&&console.warn("Visual map on line style is only supported on cartesian2d.");return}for(var l,c,u=a.length-1;u>=0;u--){var d=s.getDimensionInfo(a[u].dimension);if(l=d&&d.coordDim,l==="x"||l==="y"){c=a[u];break}}if(!c){process.env.NODE_ENV!=="production"&&console.warn("Visual map on line style only support x or y dimension.");return}var h=o.getAxis(l),f=map$1(c.stops,function(T){return{coord:h.toGlobalCoord(h.dataToCoord(T.value)),color:T.color}}),g=f.length,p=c.outerColors.slice();g&&f[0].coord>f[g-1].coord&&(f.reverse(),p.reverse());var v=clipColorStops(f,l==="x"?n.getWidth():n.getHeight()),b=v.length;if(!b&&g)return f[0].coord<0?p[1]?p[1]:f[g-1].color:p[0]?p[0]:f[0].color;var _=10,w=v[0].coord-_,x=v[b-1].coord+_,S=x-w;if(S<.001)return"transparent";each$f(v,function(T){T.offset=(T.coord-w)/S}),v.push({offset:b?v[b-1].offset:.5,color:p[1]||"transparent"}),v.unshift({offset:b?v[0].offset:.5,color:p[0]||"transparent"});var C=new LinearGradient(0,0,0,0,v,!0);return C[l]=w,C[l+"2"]=x,C}}function getIsIgnoreFunc(s,o,n){var a=s.get("showAllSymbol"),l=a==="auto";if(!(a&&!l)){var c=n.getAxesByScale("ordinal")[0];if(c&&!(l&&canShowAllSymbolForCategory(c,o))){var u=o.mapDimension(c.dim),d={};return each$f(c.getViewLabels(),function(h){var f=c.scale.getRawOrdinalNumber(h.tickValue);d[f]=1}),function(h){return!d.hasOwnProperty(o.get(u,h))}}}}function canShowAllSymbolForCategory(s,o){var n=s.getExtent(),a=Math.abs(n[1]-n[0])/s.scale.count();isNaN(a)&&(a=0);for(var l=o.count(),c=Math.max(1,Math.round(l/5)),u=0;u<l;u+=c)if(Symbol$1.getSymbolSize(o,u)[s.isHorizontal()?1:0]*1.5>a)return!1;return!0}function isPointNull(s,o){return isNaN(s)||isNaN(o)}function getLastIndexNotNull(s){for(var o=s.length/2;o>0&&isPointNull(s[o*2-2],s[o*2-1]);o--);return o-1}function getPointAtIndex(s,o){return[s[o*2],s[o*2+1]]}function getIndexRange(s,o,n){for(var a=s.length/2,l=n==="x"?0:1,c,u,d=0,h=-1,f=0;f<a;f++)if(u=s[f*2+l],!(isNaN(u)||isNaN(s[f*2+1-l]))){if(f===0){c=u;continue}if(c<=o&&u>=o||c>=o&&u<=o){h=f;break}d=f,c=u}return{range:[d,h],t:(o-c)/(u-c)}}function anyStateShowEndLabel(s){if(s.get(["endLabel","show"]))return!0;for(var o=0;o<SPECIAL_STATES.length;o++)if(s.get([SPECIAL_STATES[o],"endLabel","show"]))return!0;return!1}function createLineClipPath(s,o,n,a){if(isCoordinateSystemType(o,"cartesian2d")){var l=a.getModel("endLabel"),c=l.get("valueAnimation"),u=a.getData(),d={lastFrameIndex:0},h=anyStateShowEndLabel(a)?function(b,_){s._endLabelOnDuring(b,_,u,d,c,l,o)}:null,f=o.getBaseAxis().isHorizontal(),g=createGridClipPath(o,n,a,function(){var b=s._endLabel;b&&n&&d.originalX!=null&&b.attr({x:d.originalX,y:d.originalY})},h);if(!a.get("clip",!0)){var p=g.shape,v=Math.max(p.width,p.height);f?(p.y-=v,p.height+=v*2):(p.x-=v,p.width+=v*2)}return h&&h(1,g),g}else return process.env.NODE_ENV!=="production"&&a.get(["endLabel","show"])&&console.warn("endLabel is not supported for lines in polar systems."),createPolarClipPath(o,n,a)}function getEndLabelStateSpecified(s,o){var n=o.getBaseAxis(),a=n.isHorizontal(),l=n.inverse,c=a?l?"right":"left":"center",u=a?"middle":l?"top":"bottom";return{normal:{align:s.get("align")||c,verticalAlign:s.get("verticalAlign")||u}}}var LineView=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.init=function(){var n=new Group$3,a=new SymbolDraw;this.group.add(a.group),this._symbolDraw=a,this._lineGroup=n,this._changePolyState=bind$1(this._changePolyState,this)},o.prototype.render=function(n,a,l){var c=n.coordinateSystem,u=this.group,d=n.getData(),h=n.getModel("lineStyle"),f=n.getModel("areaStyle"),g=d.getLayout("points")||[],p=c.type==="polar",v=this._coordSys,b=this._symbolDraw,_=this._polyline,w=this._polygon,x=this._lineGroup,S=!a.ssr&&n.get("animation"),C=!f.isEmpty(),T=f.get("origin"),R=prepareDataCoordInfo(c,d,T),A=C&&getStackedOnPoints(c,d,R),M=n.get("showSymbol"),D=n.get("connectNulls"),O=M&&!p&&getIsIgnoreFunc(n,d,c),H=this._data;H&&H.eachItemGraphicEl(function(Se,Le){Se.__temp&&(u.remove(Se),H.setItemGraphicEl(Le,null))}),M||b.remove(),u.add(x);var j=p?!1:n.get("step"),q;c&&c.getArea&&n.get("clip",!0)&&(q=c.getArea(),q.width!=null?(q.x-=.1,q.y-=.1,q.width+=.2,q.height+=.2):q.r0&&(q.r0-=.5,q.r+=.5)),this._clipShapeForSymbol=q;var Y=getVisualGradient(d,c,l)||d.getVisual("style")[d.getVisual("drawType")];if(!(_&&v.type===c.type&&j===this._step))M&&b.updateData(d,{isIgnore:O,clipShape:q,disableAnimation:!0,getSymbolPoint:function(Se){return[g[Se*2],g[Se*2+1]]}}),S&&this._initSymbolLabelAnimation(d,c,q),j&&(A&&(A=turnPointsIntoStep(A,g,c,j,D)),g=turnPointsIntoStep(g,null,c,j,D)),_=this._newPolyline(g),C?w=this._newPolygon(g,A):w&&(x.remove(w),w=this._polygon=null),p||this._initOrUpdateEndLabel(n,c,convertToColorString(Y)),x.setClipPath(createLineClipPath(this,c,!0,n));else{C&&!w?w=this._newPolygon(g,A):w&&!C&&(x.remove(w),w=this._polygon=null),p||this._initOrUpdateEndLabel(n,c,convertToColorString(Y));var ee=x.getClipPath();if(ee){var te=createLineClipPath(this,c,!1,n);initProps(ee,{shape:te.shape},n)}else x.setClipPath(createLineClipPath(this,c,!0,n));M&&b.updateData(d,{isIgnore:O,clipShape:q,disableAnimation:!0,getSymbolPoint:function(Se){return[g[Se*2],g[Se*2+1]]}}),(!isPointsSame(this._stackedOnPoints,A)||!isPointsSame(this._points,g))&&(S?this._doUpdateAnimation(d,A,c,l,j,T,D):(j&&(A&&(A=turnPointsIntoStep(A,g,c,j,D)),g=turnPointsIntoStep(g,null,c,j,D)),_.setShape({points:g}),w&&w.setShape({points:g,stackedOnPoints:A})))}var re=n.getModel("emphasis"),ae=re.get("focus"),ue=re.get("blurScope"),ce=re.get("disabled");if(_.useStyle(defaults(h.getLineStyle(),{fill:"none",stroke:Y,lineJoin:"bevel"})),setStatesStylesFromModel(_,n,"lineStyle"),_.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var le=_.getState("emphasis").style;le.lineWidth=+_.style.lineWidth+1}getECData(_).seriesIndex=n.seriesIndex,toggleHoverEmphasis(_,ae,ue,ce);var ie=getSmooth(n.get("smooth")),de=n.get("smoothMonotone");if(_.setShape({smooth:ie,smoothMonotone:de,connectNulls:D}),w){var ge=d.getCalculationInfo("stackedOnSeries"),pe=0;w.useStyle(defaults(f.getAreaStyle(),{fill:Y,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),ge&&(pe=getSmooth(ge.get("smooth"))),w.setShape({smooth:ie,stackedOnSmooth:pe,smoothMonotone:de,connectNulls:D}),setStatesStylesFromModel(w,n,"areaStyle"),getECData(w).seriesIndex=n.seriesIndex,toggleHoverEmphasis(w,ae,ue,ce)}var be=this._changePolyState;d.eachItemGraphicEl(function(Se){Se&&(Se.onHoverStateChange=be)}),this._polyline.onHoverStateChange=be,this._data=d,this._coordSys=c,this._stackedOnPoints=A,this._points=g,this._step=j,this._valueOrigin=T,n.get("triggerLineEvent")&&(this.packEventData(n,_),w&&this.packEventData(n,w))},o.prototype.packEventData=function(n,a){getECData(a).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},o.prototype.highlight=function(n,a,l,c){var u=n.getData(),d=queryDataIndex(u,c);if(this._changePolyState("emphasis"),!(d instanceof Array)&&d!=null&&d>=0){var h=u.getLayout("points"),f=u.getItemGraphicEl(d);if(!f){var g=h[d*2],p=h[d*2+1];if(isNaN(g)||isNaN(p)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(g,p))return;var v=n.get("zlevel")||0,b=n.get("z")||0;f=new Symbol$1(u,d),f.x=g,f.y=p,f.setZ(v,b);var _=f.getSymbolPath().getTextContent();_&&(_.zlevel=v,_.z=b,_.z2=this._polyline.z2+1),f.__temp=!0,u.setItemGraphicEl(d,f),f.stopSymbolAnimation(!0),this.group.add(f)}f.highlight()}else ChartView.prototype.highlight.call(this,n,a,l,c)},o.prototype.downplay=function(n,a,l,c){var u=n.getData(),d=queryDataIndex(u,c);if(this._changePolyState("normal"),d!=null&&d>=0){var h=u.getItemGraphicEl(d);h&&(h.__temp?(u.setItemGraphicEl(d,null),this.group.remove(h)):h.downplay())}else ChartView.prototype.downplay.call(this,n,a,l,c)},o.prototype._changePolyState=function(n){var a=this._polygon;setStatesFlag(this._polyline,n),a&&setStatesFlag(a,n)},o.prototype._newPolyline=function(n){var a=this._polyline;return a&&this._lineGroup.remove(a),a=new ECPolyline({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(a),this._polyline=a,a},o.prototype._newPolygon=function(n,a){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:n,stackedOnPoints:a},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},o.prototype._initSymbolLabelAnimation=function(n,a,l){var c,u,d=a.getBaseAxis(),h=d.inverse;a.type==="cartesian2d"?(c=d.isHorizontal(),u=!1):a.type==="polar"&&(c=d.dim==="angle",u=!0);var f=n.hostModel,g=f.get("animationDuration");isFunction$1(g)&&(g=g(null));var p=f.get("animationDelay")||0,v=isFunction$1(p)?p(null):p;n.eachItemGraphicEl(function(b,_){var w=b;if(w){var x=[b.x,b.y],S=void 0,C=void 0,T=void 0;if(l)if(u){var R=l,A=a.pointToCoord(x);c?(S=R.startAngle,C=R.endAngle,T=-A[1]/180*Math.PI):(S=R.r0,C=R.r,T=A[0])}else{var M=l;c?(S=M.x,C=M.x+M.width,T=b.x):(S=M.y+M.height,C=M.y,T=b.y)}var D=C===S?0:(T-S)/(C-S);h&&(D=1-D);var O=isFunction$1(p)?p(_):g*D+v,H=w.getSymbolPath(),j=H.getTextContent();w.attr({scaleX:0,scaleY:0}),w.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:O}),j&&j.animateFrom({style:{opacity:0}},{duration:300,delay:O}),H.disableLabelAnimation=!0}})},o.prototype._initOrUpdateEndLabel=function(n,a,l){var c=n.getModel("endLabel");if(anyStateShowEndLabel(n)){var u=n.getData(),d=this._polyline,h=u.getLayout("points");if(!h){d.removeTextContent(),this._endLabel=null;return}var f=this._endLabel;f||(f=this._endLabel=new ZRText({z2:200}),f.ignoreClip=!0,d.setTextContent(this._endLabel),d.disableLabelAnimation=!0);var g=getLastIndexNotNull(h);g>=0&&(setLabelStyle(d,getLabelStatesModels(n,"endLabel"),{inheritColor:l,labelFetcher:n,labelDataIndex:g,defaultText:function(p,v,b){return b!=null?getDefaultInterpolatedLabel(u,b):getDefaultLabel(u,p)},enableTextSetter:!0},getEndLabelStateSpecified(c,a)),d.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},o.prototype._endLabelOnDuring=function(n,a,l,c,u,d,h){var f=this._endLabel,g=this._polyline;if(f){n<1&&c.originalX==null&&(c.originalX=f.x,c.originalY=f.y);var p=l.getLayout("points"),v=l.hostModel,b=v.get("connectNulls"),_=d.get("precision"),w=d.get("distance")||0,x=h.getBaseAxis(),S=x.isHorizontal(),C=x.inverse,T=a.shape,R=C?S?T.x:T.y+T.height:S?T.x+T.width:T.y,A=(S?w:0)*(C?-1:1),M=(S?0:-w)*(C?-1:1),D=S?"x":"y",O=getIndexRange(p,R,D),H=O.range,j=H[1]-H[0],q=void 0;if(j>=1){if(j>1&&!b){var Y=getPointAtIndex(p,H[0]);f.attr({x:Y[0]+A,y:Y[1]+M}),u&&(q=v.getRawValue(H[0]))}else{var Y=g.getPointOn(R,D);Y&&f.attr({x:Y[0]+A,y:Y[1]+M});var ee=v.getRawValue(H[0]),te=v.getRawValue(H[1]);u&&(q=interpolateRawValues(l,_,ee,te,O.t))}c.lastFrameIndex=H[0]}else{var re=n===1||c.lastFrameIndex>0?H[0]:0,Y=getPointAtIndex(p,re);u&&(q=v.getRawValue(re)),f.attr({x:Y[0]+A,y:Y[1]+M})}if(u){var ae=labelInner(f);typeof ae.setLabelText=="function"&&ae.setLabelText(q)}}},o.prototype._doUpdateAnimation=function(n,a,l,c,u,d,h){var f=this._polyline,g=this._polygon,p=n.hostModel,v=lineAnimationDiff(this._data,n,this._stackedOnPoints,a,this._coordSys,l,this._valueOrigin),b=v.current,_=v.stackedOnCurrent,w=v.next,x=v.stackedOnNext;if(u&&(_=turnPointsIntoStep(v.stackedOnCurrent,v.current,l,u,h),b=turnPointsIntoStep(v.current,null,l,u,h),x=turnPointsIntoStep(v.stackedOnNext,v.next,l,u,h),w=turnPointsIntoStep(v.next,null,l,u,h)),getBoundingDiff(b,w)>3e3||g&&getBoundingDiff(_,x)>3e3){f.stopAnimation(),f.setShape({points:w}),g&&(g.stopAnimation(),g.setShape({points:w,stackedOnPoints:x}));return}f.shape.__points=v.current,f.shape.points=b;var S={shape:{points:w}};v.current!==b&&(S.shape.__points=v.next),f.stopAnimation(),updateProps$1(f,S,p),g&&(g.setShape({points:b,stackedOnPoints:_}),g.stopAnimation(),updateProps$1(g,{shape:{stackedOnPoints:x}},p),f.shape.points!==g.shape.points&&(g.shape.points=f.shape.points));for(var C=[],T=v.status,R=0;R<T.length;R++){var A=T[R].cmd;if(A==="="){var M=n.getItemGraphicEl(T[R].idx1);M&&C.push({el:M,ptIdx:R})}}f.animators&&f.animators.length&&f.animators[0].during(function(){g&&g.dirtyShape();for(var D=f.shape.__points,O=0;O<C.length;O++){var H=C[O].el,j=C[O].ptIdx*2;H.x=D[j],H.y=D[j+1],H.markRedraw()}})},o.prototype.remove=function(n){var a=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(c,u){c.__temp&&(a.remove(c),l.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},o.type="line",o}(ChartView);function pointsLayout(s,o){return{seriesType:s,plan:createRenderPlanner(),reset:function(n){var a=n.getData(),l=n.coordinateSystem,c=n.pipelineContext,u=o||c.large;if(l){var d=map$1(l.dimensions,function(b){return a.mapDimension(b)}).slice(0,2),h=d.length,f=a.getCalculationInfo("stackResultDimension");isDimensionStacked(a,d[0])&&(d[0]=f),isDimensionStacked(a,d[1])&&(d[1]=f);var g=a.getStore(),p=a.getDimensionIndex(d[0]),v=a.getDimensionIndex(d[1]);return h&&{progress:function(b,_){for(var w=b.end-b.start,x=u&&createFloat32Array(w*h),S=[],C=[],T=b.start,R=0;T<b.end;T++){var A=void 0;if(h===1){var M=g.get(p,T);A=l.dataToPoint(M,null,C)}else S[0]=g.get(p,T),S[1]=g.get(v,T),A=l.dataToPoint(S,null,C);u?(x[R++]=A[0],x[R++]=A[1]):_.setItemLayout(T,A.slice())}u&&_.setLayout("points",x)}}}}}}var samplers={average:function(s){for(var o=0,n=0,a=0;a<s.length;a++)isNaN(s[a])||(o+=s[a],n++);return n===0?NaN:o/n},sum:function(s){for(var o=0,n=0;n<s.length;n++)o+=s[n]||0;return o},max:function(s){for(var o=-1/0,n=0;n<s.length;n++)s[n]>o&&(o=s[n]);return isFinite(o)?o:NaN},min:function(s){for(var o=1/0,n=0;n<s.length;n++)s[n]<o&&(o=s[n]);return isFinite(o)?o:NaN},nearest:function(s){return s[0]}},indexSampler=function(s){return Math.round(s.length/2)};function dataSample(s){return{seriesType:s,reset:function(o,n,a){var l=o.getData(),c=o.get("sampling"),u=o.coordinateSystem,d=l.count();if(d>10&&u.type==="cartesian2d"&&c){var h=u.getBaseAxis(),f=u.getOtherAxis(h),g=h.getExtent(),p=a.getDevicePixelRatio(),v=Math.abs(g[1]-g[0])*(p||1),b=Math.round(d/v);if(isFinite(b)&&b>1){c==="lttb"?o.setData(l.lttbDownSample(l.mapDimension(f.dim),1/b)):c==="minmax"&&o.setData(l.minmaxDownSample(l.mapDimension(f.dim),1/b));var _=void 0;isString$2(c)?_=samplers[c]:isFunction$1(c)&&(_=c),_&&o.setData(l.downSample(l.mapDimension(f.dim),1/b,_,indexSampler))}}}}}function install$Q(s){s.registerChartView(LineView),s.registerSeriesModel(LineSeriesModel),s.registerLayout(pointsLayout("line",!0)),s.registerVisual({seriesType:"line",reset:function(o){var n=o.getData(),a=o.getModel("lineStyle").getLineStyle();a&&!a.stroke&&(a.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",a)}}),s.registerProcessor(s.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.getInitialData=function(n,a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},o.prototype.getMarkerPosition=function(n,a,l){var c=this.coordinateSystem;if(c&&c.clampData){var u=c.clampData(n),d=c.dataToPoint(u);if(l)each$f(c.getAxes(),function(v,b){if(v.type==="category"&&a!=null){var _=v.getTicksCoords(),w=v.getTickModel().get("alignWithLabel"),x=u[b],S=a[b]==="x1"||a[b]==="y1";if(S&&!w&&(x+=1),_.length<2)return;if(_.length===2){d[b]=v.toGlobalCoord(v.getExtent()[S?1:0]);return}for(var C=void 0,T=void 0,R=1,A=0;A<_.length;A++){var M=_[A].coord,D=A===_.length-1?_[A-1].tickValue+R:_[A].tickValue;if(D===x){T=M;break}else if(D<x)C=M;else if(C!=null&&D>x){T=(M+C)/2;break}A===1&&(R=D-_[0].tickValue)}T==null&&(C?C&&(T=_[_.length-1].coord):T=_[0].coord),d[b]=v.toGlobalCoord(T)}});else{var h=this.getData(),f=h.getLayout("offset"),g=h.getLayout("size"),p=c.getBaseAxis().isHorizontal()?0:1;d[p]+=f+g/2}return d}return[NaN,NaN]},o.type="series.__base_bar__",o.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},o}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},o.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},o.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),a=this.get("largeThreshold");return a>n&&(n=a),n},o.prototype.brushSelector=function(n,a,l){return l.rect(a.getItemLayout(n))},o.type="series.bar",o.dependencies=["grid","polar"],o.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),o}(BaseBarSeriesModel),SausageShape=function(){function s(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return s}(),SausagePath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="sausage",a}return o.prototype.getDefaultShape=function(){return new SausageShape},o.prototype.buildPath=function(n,a){var l=a.cx,c=a.cy,u=Math.max(a.r0||0,0),d=Math.max(a.r,0),h=(d-u)*.5,f=u+h,g=a.startAngle,p=a.endAngle,v=a.clockwise,b=Math.PI*2,_=v?p-g<b:g-p<b;_||(g=p-(v?b:-b));var w=Math.cos(g),x=Math.sin(g),S=Math.cos(p),C=Math.sin(p);_?(n.moveTo(w*u+l,x*u+c),n.arc(w*f+l,x*f+c,h,-Math.PI+g,g,!v)):n.moveTo(w*d+l,x*d+c),n.arc(l,c,d,g,p,!v),n.arc(S*f+l,C*f+c,h,p-Math.PI*2,p-Math.PI,!v),u!==0&&n.arc(l,c,u,p,g,v)},o}(Path);function createSectorCalculateTextPosition(s,o){o=o||{};var n=o.isRoundCap;return function(a,l,c){var u=l.position;if(!u||u instanceof Array)return calculateTextPosition(a,l,c);var d=s(u),h=l.distance!=null?l.distance:5,f=this.shape,g=f.cx,p=f.cy,v=f.r,b=f.r0,_=(v+b)/2,w=f.startAngle,x=f.endAngle,S=(w+x)/2,C=n?Math.abs(v-b)/2:0,T=Math.cos,R=Math.sin,A=g+v*T(w),M=p+v*R(w),D="left",O="top";switch(d){case"startArc":A=g+(b-h)*T(S),M=p+(b-h)*R(S),D="center",O="top";break;case"insideStartArc":A=g+(b+h)*T(S),M=p+(b+h)*R(S),D="center",O="bottom";break;case"startAngle":A=g+_*T(w)+adjustAngleDistanceX(w,h+C,!1),M=p+_*R(w)+adjustAngleDistanceY(w,h+C,!1),D="right",O="middle";break;case"insideStartAngle":A=g+_*T(w)+adjustAngleDistanceX(w,-h+C,!1),M=p+_*R(w)+adjustAngleDistanceY(w,-h+C,!1),D="left",O="middle";break;case"middle":A=g+_*T(S),M=p+_*R(S),D="center",O="middle";break;case"endArc":A=g+(v+h)*T(S),M=p+(v+h)*R(S),D="center",O="bottom";break;case"insideEndArc":A=g+(v-h)*T(S),M=p+(v-h)*R(S),D="center",O="top";break;case"endAngle":A=g+_*T(x)+adjustAngleDistanceX(x,h+C,!0),M=p+_*R(x)+adjustAngleDistanceY(x,h+C,!0),D="left",O="middle";break;case"insideEndAngle":A=g+_*T(x)+adjustAngleDistanceX(x,-h+C,!0),M=p+_*R(x)+adjustAngleDistanceY(x,-h+C,!0),D="right",O="middle";break;default:return calculateTextPosition(a,l,c)}return a=a||{},a.x=A,a.y=M,a.align=D,a.verticalAlign=O,a}}function setSectorTextRotation(s,o,n,a){if(isNumber(a)){s.setTextConfig({rotation:a});return}else if(isArray$1(o)){s.setTextConfig({rotation:0});return}var l=s.shape,c=l.clockwise?l.startAngle:l.endAngle,u=l.clockwise?l.endAngle:l.startAngle,d=(c+u)/2,h,f=n(o);switch(f){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":h=d;break;case"startAngle":case"insideStartAngle":h=c;break;case"endAngle":case"insideEndAngle":h=u;break;default:s.setTextConfig({rotation:0});return}var g=Math.PI*1.5-h;f==="middle"&&g>Math.PI/2&&g<Math.PI*1.5&&(g-=Math.PI),s.setTextConfig({rotation:g})}function adjustAngleDistanceX(s,o,n){return o*Math.sin(s)*(n?-1:1)}function adjustAngleDistanceY(s,o,n){return o*Math.cos(s)*(n?1:-1)}function getSectorCornerRadius(s,o,n){var a=s.get("borderRadius");if(a==null)return n?{cornerRadius:0}:null;isArray$1(a)||(a=[a,a,a,a]);var l=Math.abs(o.r||0-o.r0||0);return{cornerRadius:map$1(a,function(c){return parsePercent$1(c,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(s,o){var n=s.getArea&&s.getArea();if(isCoordinateSystemType(s,"cartesian2d")){var a=s.getBaseAxis();if(a.type!=="category"||!a.onBand){var l=o.getLayout("bandWidth");a.isHorizontal()?(n.x-=l,n.width+=l*2):(n.y-=l,n.height+=l*2)}}return n}var BarView=function(s){__extends$1(o,s);function o(){var n=s.call(this)||this;return n.type=o.type,n._isFirstFrame=!0,n}return o.prototype.render=function(n,a,l,c){this._model=n,this._removeOnRenderedListener(l),this._updateDrawMode(n);var u=n.get("coordinateSystem");u==="cartesian2d"||u==="polar"?(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,a,l):this._renderNormal(n,a,l,c)):process.env.NODE_ENV!=="production"&&warn("Only cartesian2d and polar supported for bar.")},o.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},o.prototype.incrementalRender=function(n,a){this._progressiveEls=[],this._incrementalRenderLarge(n,a)},o.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},o.prototype._updateDrawMode=function(n){var a=n.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},o.prototype._renderNormal=function(n,a,l,c){var u=this.group,d=n.getData(),h=this._data,f=n.coordinateSystem,g=f.getBaseAxis(),p;f.type==="cartesian2d"?p=g.isHorizontal():f.type==="polar"&&(p=g.dim==="angle");var v=n.isAnimationEnabled()?n:null,b=shouldRealtimeSort(n,f);b&&this._enableRealtimeSort(b,d,l);var _=n.get("clip",!0)||b,w=getClipArea(f,d);u.removeClipPath();var x=n.get("roundCap",!0),S=n.get("showBackground",!0),C=n.getModel("backgroundStyle"),T=C.get("borderRadius")||0,R=[],A=this._backgroundEls,M=c&&c.isInitSort,D=c&&c.type==="changeAxisOrder";function O(q){var Y=getLayout[f.type](d,q),ee=createBackgroundEl(f,p,Y);return ee.useStyle(C.getItemStyle()),f.type==="cartesian2d"?ee.setShape("r",T):ee.setShape("cornerRadius",T),R[q]=ee,ee}d.diff(h).add(function(q){var Y=d.getItemModel(q),ee=getLayout[f.type](d,q,Y);if(S&&O(q),!(!d.hasValue(q)||!isValidLayout[f.type](ee))){var te=!1;_&&(te=clip[f.type](w,ee));var re=elementCreator[f.type](n,d,q,ee,p,v,g.model,!1,x);b&&(re.forceLabelAnimation=!0),updateStyle(re,d,q,Y,ee,n,p,f.type==="polar"),M?re.attr({shape:ee}):b?updateRealtimeAnimation(b,v,re,ee,q,p,!1,!1):initProps(re,{shape:ee},n,q),d.setItemGraphicEl(q,re),u.add(re),re.ignore=te}}).update(function(q,Y){var ee=d.getItemModel(q),te=getLayout[f.type](d,q,ee);if(S){var re=void 0;A.length===0?re=O(Y):(re=A[Y],re.useStyle(C.getItemStyle()),f.type==="cartesian2d"?re.setShape("r",T):re.setShape("cornerRadius",T),R[q]=re);var ae=getLayout[f.type](d,q),ue=createBackgroundShape(p,ae,f);updateProps$1(re,{shape:ue},v,q)}var ce=h.getItemGraphicEl(Y);if(!d.hasValue(q)||!isValidLayout[f.type](te)){u.remove(ce);return}var le=!1;if(_&&(le=clip[f.type](w,te),le&&u.remove(ce)),ce?saveOldStyle(ce):ce=elementCreator[f.type](n,d,q,te,p,v,g.model,!!ce,x),b&&(ce.forceLabelAnimation=!0),D){var ie=ce.getTextContent();if(ie){var de=labelInner(ie);de.prevValue!=null&&(de.prevValue=de.value)}}else updateStyle(ce,d,q,ee,te,n,p,f.type==="polar");M?ce.attr({shape:te}):b?updateRealtimeAnimation(b,v,ce,te,q,p,!0,D):updateProps$1(ce,{shape:te},n,q,null),d.setItemGraphicEl(q,ce),ce.ignore=le,u.add(ce)}).remove(function(q){var Y=h.getItemGraphicEl(q);Y&&removeElementWithFadeOut(Y,n,q)}).execute();var H=this._backgroundGroup||(this._backgroundGroup=new Group$3);H.removeAll();for(var j=0;j<R.length;++j)H.add(R[j]);u.add(H),this._backgroundEls=R,this._data=d},o.prototype._renderLarge=function(n,a,l){this._clear(),createLarge$1(n,this.group),this._updateLargeClip(n)},o.prototype._incrementalRenderLarge=function(n,a){this._removeBackground(),createLarge$1(a,this.group,this._progressiveEls,!0)},o.prototype._updateLargeClip=function(n){var a=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n),l=this.group;a?l.setClipPath(a):l.removeClipPath()},o.prototype._enableRealtimeSort=function(n,a,l){var c=this;if(a.count()){var u=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(a,n,l),this._isFirstFrame=!1;else{var d=function(h){var f=a.getItemGraphicEl(h),g=f&&f.shape;return g&&Math.abs(u.isHorizontal()?g.height:g.width)||0};this._onRendered=function(){c._updateSortWithinSameData(a,d,u,l)},l.getZr().on("rendered",this._onRendered)}}},o.prototype._dataSort=function(n,a,l){var c=[];return n.each(n.mapDimension(a.dim),function(u,d){var h=l(d);h=h??NaN,c.push({dataIndex:d,mappedValue:h,ordinalNumber:u})}),c.sort(function(u,d){return d.mappedValue-u.mappedValue}),{ordinalNumbers:map$1(c,function(u){return u.ordinalNumber})}},o.prototype._isOrderChangedWithinSameData=function(n,a,l){for(var c=l.scale,u=n.mapDimension(l.dim),d=Number.MAX_VALUE,h=0,f=c.getOrdinalMeta().categories.length;h<f;++h){var g=n.rawIndexOf(u,c.getRawOrdinalNumber(h)),p=g<0?Number.MIN_VALUE:a(n.indexOfRawIndex(g));if(p>d)return!0;d=p}return!1},o.prototype._isOrderDifferentInView=function(n,a){for(var l=a.scale,c=l.getExtent(),u=Math.max(0,c[0]),d=Math.min(c[1],l.getOrdinalMeta().categories.length-1);u<=d;++u)if(n.ordinalNumbers[u]!==l.getRawOrdinalNumber(u))return!0},o.prototype._updateSortWithinSameData=function(n,a,l,c){if(this._isOrderChangedWithinSameData(n,a,l)){var u=this._dataSort(n,l,a);this._isOrderDifferentInView(u,l)&&(this._removeOnRenderedListener(c),c.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:u}))}},o.prototype._dispatchInitSort=function(n,a,l){var c=a.baseAxis,u=this._dataSort(n,c,function(d){return n.get(n.mapDimension(a.otherAxis.dim),d)});l.dispatchAction({type:"changeAxisOrder",componentType:c.dim+"Axis",isInitSort:!0,axisId:c.index,sortInfo:u})},o.prototype.remove=function(n,a){this._clear(this._model),this._removeOnRenderedListener(a)},o.prototype.dispose=function(n,a){this._removeOnRenderedListener(a)},o.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},o.prototype._clear=function(n){var a=this.group,l=this._data;n&&n.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(c){removeElementWithFadeOut(c,n,getECData(c).dataIndex)})):a.removeAll(),this._data=null,this._isFirstFrame=!0},o.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},o.type="bar",o}(ChartView),clip={cartesian2d:function(s,o){var n=o.width<0?-1:1,a=o.height<0?-1:1;n<0&&(o.x+=o.width,o.width=-o.width),a<0&&(o.y+=o.height,o.height=-o.height);var l=s.x+s.width,c=s.y+s.height,u=mathMax$4(o.x,s.x),d=mathMin$4(o.x+o.width,l),h=mathMax$4(o.y,s.y),f=mathMin$4(o.y+o.height,c),g=d<u,p=f<h;return o.x=g&&u>l?d:u,o.y=p&&h>c?f:h,o.width=g?0:d-u,o.height=p?0:f-h,n<0&&(o.x+=o.width,o.width=-o.width),a<0&&(o.y+=o.height,o.height=-o.height),g||p},polar:function(s,o){var n=o.r0<=o.r?1:-1;if(n<0){var a=o.r;o.r=o.r0,o.r0=a}var l=mathMin$4(o.r,s.r),c=mathMax$4(o.r0,s.r0);o.r=l,o.r0=c;var u=l-c<0;if(n<0){var a=o.r;o.r=o.r0,o.r0=a}return u}},elementCreator={cartesian2d:function(s,o,n,a,l,c,u,d,h){var f=new Rect$2({shape:extend({},a),z2:1});if(f.__dataIndex=n,f.name="item",c){var g=f.shape,p=l?"height":"width";g[p]=0}return f},polar:function(s,o,n,a,l,c,u,d,h){var f=!l&&h?SausagePath:Sector,g=new f({shape:a,z2:1});g.name="item";var p=createPolarPositionMapping(l);if(g.calculateTextPosition=createSectorCalculateTextPosition(p,{isRoundCap:f===SausagePath}),c){var v=g.shape,b=l?"r":"endAngle",_={};v[b]=l?a.r0:a.startAngle,_[b]=a[b],(d?updateProps$1:initProps)(g,{shape:_},c)}return g}};function shouldRealtimeSort(s,o){var n=s.get("realtimeSort",!0),a=o.getBaseAxis();if(process.env.NODE_ENV!=="production"&&n&&(a.type!=="category"&&warn("`realtimeSort` will not work because this bar series is not based on a category axis."),o.type!=="cartesian2d"&&warn("`realtimeSort` will not work because this bar series is not on cartesian2d.")),n&&a.type==="category"&&o.type==="cartesian2d")return{baseAxis:a,otherAxis:o.getOtherAxis(a)}}function updateRealtimeAnimation(s,o,n,a,l,c,u,d){var h,f;c?(f={x:a.x,width:a.width},h={y:a.y,height:a.height}):(f={y:a.y,height:a.height},h={x:a.x,width:a.width}),d||(u?updateProps$1:initProps)(n,{shape:h},o,l,null);var g=o?s.baseAxis.model:null;(u?updateProps$1:initProps)(n,{shape:f},g,l)}function checkPropertiesNotValid(s,o){for(var n=0;n<o.length;n++)if(!isFinite(s[o[n]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(s){return!checkPropertiesNotValid(s,rectPropties)},polar:function(s){return!checkPropertiesNotValid(s,polarPropties)}},getLayout={cartesian2d:function(s,o,n){var a=s.getItemLayout(o),l=n?getLineWidth(n,a):0,c=a.width>0?1:-1,u=a.height>0?1:-1;return{x:a.x+c*l/2,y:a.y+u*l/2,width:a.width-c*l,height:a.height-u*l}},polar:function(s,o,n){var a=s.getItemLayout(o);return{cx:a.cx,cy:a.cy,r0:a.r0,r:a.r,startAngle:a.startAngle,endAngle:a.endAngle,clockwise:a.clockwise}}};function isZeroOnPolar(s){return s.startAngle!=null&&s.endAngle!=null&&s.startAngle===s.endAngle}function createPolarPositionMapping(s){return function(o){var n=o?"Arc":"Angle";return function(a){switch(a){case"start":case"insideStart":case"end":case"insideEnd":return a+n;default:return a}}}(s)}function updateStyle(s,o,n,a,l,c,u,d){var h=o.getItemVisual(n,"style");if(d){if(!c.get("roundCap")){var g=s.shape,p=getSectorCornerRadius(a.getModel("itemStyle"),g,!0);extend(g,p),s.setShape(g)}}else{var f=a.get(["itemStyle","borderRadius"])||0;s.setShape("r",f)}s.useStyle(h);var v=a.getShallow("cursor");v&&s.attr("cursor",v);var b=d?u?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":u?l.height>=0?"bottom":"top":l.width>=0?"right":"left",_=getLabelStatesModels(a);setLabelStyle(s,_,{labelFetcher:c,labelDataIndex:n,defaultText:getDefaultLabel(c.getData(),n),inheritColor:h.fill,defaultOpacity:h.opacity,defaultOutsidePosition:b});var w=s.getTextContent();if(d&&w){var x=a.get(["label","position"]);s.textConfig.inside=x==="middle"?!0:null,setSectorTextRotation(s,x==="outside"?b:x,createPolarPositionMapping(u),a.get(["label","rotate"]))}setLabelValueAnimation(w,_,c.getRawValue(n),function(C){return getDefaultInterpolatedLabel(o,C)});var S=a.getModel(["emphasis"]);toggleHoverEmphasis(s,S.get("focus"),S.get("blurScope"),S.get("disabled")),setStatesStylesFromModel(s,a),isZeroOnPolar(l)&&(s.style.fill="none",s.style.stroke="none",each$f(s.states,function(C){C.style&&(C.style.fill=C.style.stroke="none")}))}function getLineWidth(s,o){var n=s.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var a=s.get(["itemStyle","borderWidth"])||0,l=isNaN(o.width)?Number.MAX_VALUE:Math.abs(o.width),c=isNaN(o.height)?Number.MAX_VALUE:Math.abs(o.height);return Math.min(a,l,c)}var LagePathShape=function(){function s(){}return s}(),LargePath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="largeBar",a}return o.prototype.getDefaultShape=function(){return new LagePathShape},o.prototype.buildPath=function(n,a){for(var l=a.points,c=this.baseDimIdx,u=1-this.baseDimIdx,d=[],h=[],f=this.barWidth,g=0;g<l.length;g+=3)h[c]=f,h[u]=l[g+2],d[c]=l[g+c],d[u]=l[g+u],n.rect(d[0],d[1],h[0],h[1])},o}(Path);function createLarge$1(s,o,n,a){var l=s.getData(),c=l.getLayout("valueAxisHorizontal")?1:0,u=l.getLayout("largeDataIndices"),d=l.getLayout("size"),h=s.getModel("backgroundStyle"),f=l.getLayout("largeBackgroundPoints");if(f){var g=new LargePath({shape:{points:f},incremental:!!a,silent:!0,z2:0});g.baseDimIdx=c,g.largeDataIndices=u,g.barWidth=d,g.useStyle(h.getItemStyle()),o.add(g),n&&n.push(g)}var p=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!a,ignoreCoarsePointer:!0,z2:1});p.baseDimIdx=c,p.largeDataIndices=u,p.barWidth=d,o.add(p),p.useStyle(l.getVisual("style")),p.style.stroke=null,getECData(p).seriesIndex=s.seriesIndex,s.get("silent")||(p.on("mousedown",largePathUpdateDataIndex),p.on("mousemove",largePathUpdateDataIndex)),n&&n.push(p)}var largePathUpdateDataIndex=throttle(function(s){var o=this,n=largePathFindDataIndex(o,s.offsetX,s.offsetY);getECData(o).dataIndex=n>=0?n:null},30,!1);function largePathFindDataIndex(s,o,n){for(var a=s.baseDimIdx,l=1-a,c=s.shape.points,u=s.largeDataIndices,d=[],h=[],f=s.barWidth,g=0,p=c.length/3;g<p;g++){var v=g*3;if(h[a]=f,h[l]=c[v+2],d[a]=c[v+a],d[l]=c[v+l],h[l]<0&&(d[l]+=h[l],h[l]=-h[l]),o>=d[0]&&o<=d[0]+h[0]&&n>=d[1]&&n<=d[1]+h[1])return u[g]}return-1}function createBackgroundShape(s,o,n){if(isCoordinateSystemType(n,"cartesian2d")){var a=o,l=n.getArea();return{x:s?a.x:l.x,y:s?l.y:a.y,width:s?a.width:l.width,height:s?l.height:a.height}}else{var l=n.getArea(),c=o;return{cx:l.cx,cy:l.cy,r0:s?l.r0:c.r0,r:s?l.r:c.r,startAngle:s?c.startAngle:0,endAngle:s?c.endAngle:Math.PI*2}}}function createBackgroundEl(s,o,n){var a=s.type==="polar"?Sector:Rect$2;return new a({shape:createBackgroundShape(o,n,s),silent:!0,z2:0})}function install$P(s){s.registerChartView(BarView),s.registerSeriesModel(BarSeriesModel),s.registerLayout(s.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),s.registerLayout(s.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),s.registerProcessor(s.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),s.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(o,n){var a=o.componentType||"series";n.eachComponent({mainType:a,query:o},function(l){o.sortInfo&&l.axis.setCategorySortInfo(o.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(s,o){return getLayoutRect(s.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function getBasicPieLayout(s,o){var n=getViewRect$5(s,o),a=s.get("center"),l=s.get("radius");isArray$1(l)||(l=[0,l]);var c=parsePercent(n.width,o.getWidth()),u=parsePercent(n.height,o.getHeight()),d=Math.min(c,u),h=parsePercent(l[0],d/2),f=parsePercent(l[1],d/2),g,p,v=s.coordinateSystem;if(v){var b=v.dataToPoint(a);g=b[0]||0,p=b[1]||0}else isArray$1(a)||(a=[a,a]),g=parsePercent(a[0],c)+n.x,p=parsePercent(a[1],u)+n.y;return{cx:g,cy:p,r0:h,r:f}}function pieLayout(s,o,n){o.eachSeriesByType(s,function(a){var l=a.getData(),c=l.mapDimension("value"),u=getViewRect$5(a,n),d=getBasicPieLayout(a,n),h=d.cx,f=d.cy,g=d.r,p=d.r0,v=-a.get("startAngle")*RADIAN$2,b=a.get("endAngle"),_=a.get("padAngle")*RADIAN$2;b=b==="auto"?v-PI2:-b*RADIAN$2;var w=a.get("minAngle")*RADIAN$2,x=w+_,S=0;l.each(c,function(ue){!isNaN(ue)&&S++});var C=l.getSum(c),T=Math.PI/(C||S)*2,R=a.get("clockwise"),A=a.get("roseType"),M=a.get("stillShowZeroSum"),D=l.getDataExtent(c);D[0]=0;var O=R?1:-1,H=[v,b],j=O*_/2;normalizeArcAngles(H,!R),v=H[0],b=H[1];var q=getSeriesLayoutData(a);q.startAngle=v,q.endAngle=b,q.clockwise=R;var Y=Math.abs(b-v),ee=Y,te=0,re=v;if(l.setLayout({viewRect:u,r:g}),l.each(c,function(ue,ce){var le;if(isNaN(ue)){l.setItemLayout(ce,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:R,cx:h,cy:f,r0:p,r:A?NaN:g});return}A!=="area"?le=C===0&&M?T:ue*T:le=Y/S,le<x?(le=x,ee-=x):te+=ue;var ie=re+O*le,de=0,ge=0;_>le?(de=re+O*le/2,ge=de):(de=re+j,ge=ie-j),l.setItemLayout(ce,{angle:le,startAngle:de,endAngle:ge,clockwise:R,cx:h,cy:f,r0:p,r:A?linearMap$2(ue,D,[p,g]):g}),re=ie}),ee<PI2&&S)if(ee<=.001){var ae=Y/S;l.each(c,function(ue,ce){if(!isNaN(ue)){var le=l.getItemLayout(ce);le.angle=ae;var ie=0,de=0;ae<_?(ie=v+O*(ce+1/2)*ae,de=ie):(ie=v+O*ce*ae+j,de=v+O*(ce+1)*ae-j),le.startAngle=ie,le.endAngle=de}})}else T=ee/te,re=v,l.each(c,function(ue,ce){if(!isNaN(ue)){var le=l.getItemLayout(ce),ie=le.angle===x?x:ue*T,de=0,ge=0;ie<_?(de=re+O*ie/2,ge=de):(de=re+j,ge=re+O*ie-j),le.startAngle=de,le.endAngle=ge,re+=O*ie}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(s){return{seriesType:s,reset:function(o,n){var a=n.findComponents({mainType:"legend"});if(!(!a||!a.length)){var l=o.getData();l.filterSelf(function(c){for(var u=l.getName(c),d=0;d<a.length;d++)if(!a[d].isSelected(u))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(s,o,n,a,l,c,u,d,h,f){if(s.length<2)return;function g(w){for(var x=w.rB,S=x*x,C=0;C<w.list.length;C++){var T=w.list[C],R=Math.abs(T.label.y-n),A=a+T.len,M=A*A,D=Math.sqrt(Math.abs((1-R*R/S)*M)),O=o+(D+T.len2)*l,H=O-T.label.x,j=T.targetTextWidth-H*l;constrainTextWidth(T,j,!0),T.label.x=O}}function p(w){for(var x={list:[],maxY:0},S={list:[],maxY:0},C=0;C<w.length;C++)if(w[C].labelAlignTo==="none"){var T=w[C],R=T.label.y>n?S:x,A=Math.abs(T.label.y-n);if(A>=R.maxY){var M=T.label.x-o-T.len2*l,D=a+T.len,O=Math.abs(M)<D?Math.sqrt(A*A/(1-M*M/D/D)):D;R.rB=O,R.maxY=A}R.list.push(T)}g(x),g(S)}for(var v=s.length,b=0;b<v;b++)if(s[b].position==="outer"&&s[b].labelAlignTo==="labelLine"){var _=s[b].label.x-f;s[b].linePoints[1][0]+=_,s[b].label.x=f}shiftLayoutOnY(s,h,h+u)&&p(s)}function avoidOverlap(s,o,n,a,l,c,u,d){for(var h=[],f=[],g=Number.MAX_VALUE,p=-Number.MAX_VALUE,v=0;v<s.length;v++){var b=s[v].label;isPositionCenter(s[v])||(b.x<o?(g=Math.min(g,b.x),h.push(s[v])):(p=Math.max(p,b.x),f.push(s[v])))}for(var v=0;v<s.length;v++){var _=s[v];if(!isPositionCenter(_)&&_.linePoints){if(_.labelStyleWidth!=null)continue;var b=_.label,w=_.linePoints,x=void 0;_.labelAlignTo==="edge"?b.x<o?x=w[2][0]-_.labelDistance-u-_.edgeDistance:x=u+l-_.edgeDistance-w[2][0]-_.labelDistance:_.labelAlignTo==="labelLine"?b.x<o?x=g-u-_.bleedMargin:x=u+l-p-_.bleedMargin:b.x<o?x=b.x-u-_.bleedMargin:x=u+l-b.x-_.bleedMargin,_.targetTextWidth=x,constrainTextWidth(_,x)}}adjustSingleSide(f,o,n,a,1,l,c,u,d,p),adjustSingleSide(h,o,n,a,-1,l,c,u,d,g);for(var v=0;v<s.length;v++){var _=s[v];if(!isPositionCenter(_)&&_.linePoints){var b=_.label,w=_.linePoints,S=_.labelAlignTo==="edge",C=b.style.padding,T=C?C[1]+C[3]:0,R=b.style.backgroundColor?0:T,A=_.rect.width+R,M=w[1][0]-w[2][0];S?b.x<o?w[2][0]=u+_.edgeDistance+A+_.labelDistance:w[2][0]=u+l-_.edgeDistance-A-_.labelDistance:(b.x<o?w[2][0]=b.x+_.labelDistance:w[2][0]=b.x-_.labelDistance,w[1][0]=w[2][0]+M),w[1][1]=w[2][1]=b.y}}}function constrainTextWidth(s,o,n){if(n===void 0&&(n=!1),s.labelStyleWidth==null){var a=s.label,l=a.style,c=s.rect,u=l.backgroundColor,d=l.padding,h=d?d[1]+d[3]:0,f=l.overflow,g=c.width+(u?0:h);if(o<g||n){var p=c.height;if(f&&f.match("break")){a.setStyle("backgroundColor",null),a.setStyle("width",o-h);var v=a.getBoundingRect();a.setStyle("width",Math.ceil(v.width)),a.setStyle("backgroundColor",u)}else{var b=o-h,_=o<g?b:n?b>s.unconstrainedWidth?null:b:null;a.setStyle("width",_)}var w=a.getBoundingRect();c.width=w.width;var x=(a.style.margin||0)+2.1;c.height=w.height+x,c.y-=(c.height-p)/2}}}function isPositionCenter(s){return s.position==="center"}function pieLabelLayout(s){var o=s.getData(),n=[],a,l,c=!1,u=(s.get("minShowLabelAngle")||0)*RADIAN$1,d=o.getLayout("viewRect"),h=o.getLayout("r"),f=d.width,g=d.x,p=d.y,v=d.height;function b(M){M.ignore=!0}function _(M){if(!M.ignore)return!0;for(var D in M.states)if(M.states[D].ignore===!1)return!0;return!1}o.each(function(M){var D=o.getItemGraphicEl(M),O=D.shape,H=D.getTextContent(),j=D.getTextGuideLine(),q=o.getItemModel(M),Y=q.getModel("label"),ee=Y.get("position")||q.get(["emphasis","label","position"]),te=Y.get("distanceToLabelLine"),re=Y.get("alignTo"),ae=parsePercent(Y.get("edgeDistance"),f),ue=Y.get("bleedMargin"),ce=q.getModel("labelLine"),le=ce.get("length");le=parsePercent(le,f);var ie=ce.get("length2");if(ie=parsePercent(ie,f),Math.abs(O.endAngle-O.startAngle)<u){each$f(H.states,b),H.ignore=!0,j&&(each$f(j.states,b),j.ignore=!0);return}if(_(H)){var de=(O.startAngle+O.endAngle)/2,ge=Math.cos(de),pe=Math.sin(de),be,Se,Le,De;a=O.cx,l=O.cy;var ke=ee==="inside"||ee==="inner";if(ee==="center")be=O.cx,Se=O.cy,De="center";else{var Te=(ke?(O.r+O.r0)/2*ge:O.r*ge)+a,Ae=(ke?(O.r+O.r0)/2*pe:O.r*pe)+l;if(be=Te+ge*3,Se=Ae+pe*3,!ke){var Ee=Te+ge*(le+h-O.r),we=Ae+pe*(le+h-O.r),Ve=Ee+(ge<0?-1:1)*ie,_e=we;re==="edge"?be=ge<0?g+ae:g+f-ae:be=Ve+(ge<0?-te:te),Se=_e,Le=[[Te,Ae],[Ee,we],[Ve,_e]]}De=ke?"center":re==="edge"?ge>0?"right":"left":ge>0?"left":"right"}var ve=Math.PI,fe=0,ne=Y.get("rotate");if(isNumber(ne))fe=ne*(ve/180);else if(ee==="center")fe=0;else if(ne==="radial"||ne===!0){var oe=ge<0?-de+ve:-de;fe=oe}else if(ne==="tangential"&&ee!=="outside"&&ee!=="outer"){var xe=Math.atan2(ge,pe);xe<0&&(xe=ve*2+xe);var Ce=pe>0;Ce&&(xe=ve+xe),fe=xe-ve}if(c=!!fe,H.x=be,H.y=Se,H.rotation=fe,H.setStyle({verticalAlign:"middle"}),ke){H.setStyle({align:De});var me=H.states.select;me&&(me.x+=H.x,me.y+=H.y)}else{var Oe=H.getBoundingRect().clone();Oe.applyTransform(H.getComputedTransform());var se=(H.style.margin||0)+2.1;Oe.y-=se/2,Oe.height+=se,n.push({label:H,labelLine:j,position:ee,len:le,len2:ie,minTurnAngle:ce.get("minTurnAngle"),maxSurfaceAngle:ce.get("maxSurfaceAngle"),surfaceNormal:new Point(ge,pe),linePoints:Le,textAlign:De,labelDistance:te,labelAlignTo:re,edgeDistance:ae,bleedMargin:ue,rect:Oe,unconstrainedWidth:Oe.width,labelStyleWidth:H.style.width})}D.setTextConfig({inside:ke})}}),!c&&s.get("avoidLabelOverlap")&&avoidOverlap(n,a,l,h,f,v,g,p);for(var w=0;w<n.length;w++){var x=n[w],S=x.label,C=x.labelLine,T=isNaN(S.x)||isNaN(S.y);if(S){S.setStyle({align:x.textAlign}),T&&(each$f(S.states,b),S.ignore=!0);var R=S.states.select;R&&(R.x+=S.x,R.y+=S.y)}if(C){var A=x.linePoints;T||!A?(each$f(C.states,b),C.ignore=!0):(limitTurnAngle(A,x.minTurnAngle),limitSurfaceAngle(A,x.surfaceNormal,x.maxSurfaceAngle),C.setShape({points:A}),S.__hostTarget.textGuideLineConfig={anchor:new Point(A[0][0],A[0][1])})}}}var PiePiece=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this)||this;c.z2=2;var u=new ZRText;return c.setTextContent(u),c.updateData(n,a,l,!0),c}return o.prototype.updateData=function(n,a,l,c){var u=this,d=n.hostModel,h=n.getItemModel(a),f=h.getModel("emphasis"),g=n.getItemLayout(a),p=extend(getSectorCornerRadius(h.getModel("itemStyle"),g,!0),g);if(isNaN(p.startAngle)){u.setShape(p);return}if(c){u.setShape(p);var v=d.getShallow("animationType");d.ecModel.ssr?(initProps(u,{scaleX:0,scaleY:0},d,{dataIndex:a,isFrom:!0}),u.originX=p.cx,u.originY=p.cy):v==="scale"?(u.shape.r=g.r0,initProps(u,{shape:{r:g.r}},d,a)):l!=null?(u.setShape({startAngle:l,endAngle:l}),initProps(u,{shape:{startAngle:g.startAngle,endAngle:g.endAngle}},d,a)):(u.shape.endAngle=g.startAngle,updateProps$1(u,{shape:{endAngle:g.endAngle}},d,a))}else saveOldStyle(u),updateProps$1(u,{shape:p},d,a);u.useStyle(n.getItemVisual(a,"style")),setStatesStylesFromModel(u,h);var b=(g.startAngle+g.endAngle)/2,_=d.get("selectedOffset"),w=Math.cos(b)*_,x=Math.sin(b)*_,S=h.getShallow("cursor");S&&u.attr("cursor",S),this._updateLabel(d,n,a),u.ensureState("emphasis").shape=extend({r:g.r+(f.get("scale")&&f.get("scaleSize")||0)},getSectorCornerRadius(f.getModel("itemStyle"),g)),extend(u.ensureState("select"),{x:w,y:x,shape:getSectorCornerRadius(h.getModel(["select","itemStyle"]),g)}),extend(u.ensureState("blur"),{shape:getSectorCornerRadius(h.getModel(["blur","itemStyle"]),g)});var C=u.getTextGuideLine(),T=u.getTextContent();C&&extend(C.ensureState("select"),{x:w,y:x}),extend(T.ensureState("select"),{x:w,y:x}),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},o.prototype._updateLabel=function(n,a,l){var c=this,u=a.getItemModel(l),d=u.getModel("labelLine"),h=a.getItemVisual(l,"style"),f=h&&h.fill,g=h&&h.opacity;setLabelStyle(c,getLabelStatesModels(u),{labelFetcher:a.hostModel,labelDataIndex:l,inheritColor:f,defaultOpacity:g,defaultText:n.getFormattedLabel(l,"normal")||a.getName(l)});var p=c.getTextContent();c.setTextConfig({position:null,rotation:null}),p.attr({z2:10});var v=n.get(["label","position"]);if(v!=="outside"&&v!=="outer")c.removeTextGuideLine();else{var b=this.getTextGuideLine();b||(b=new Polyline$1,this.setTextGuideLine(b)),setLabelLineStyle(this,getLabelLineStatesModels(u),{stroke:f,opacity:retrieve3(d.get(["lineStyle","opacity"]),g,1)})}},o}(Sector),PieView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return o.prototype.render=function(n,a,l,c){var u=n.getData(),d=this._data,h=this.group,f;if(!d&&u.count()>0){for(var g=u.getItemLayout(0),p=1;isNaN(g&&g.startAngle)&&p<u.count();++p)g=u.getItemLayout(p);g&&(f=g.startAngle)}if(this._emptyCircleSector&&h.remove(this._emptyCircleSector),u.count()===0&&n.get("showEmptyCircle")){var v=getSeriesLayoutData(n),b=new Sector({shape:extend(getBasicPieLayout(n,l),v)});b.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=b,h.add(b)}u.diff(d).add(function(_){var w=new PiePiece(u,_,f);u.setItemGraphicEl(_,w),h.add(w)}).update(function(_,w){var x=d.getItemGraphicEl(w);x.updateData(u,_,f),x.off("click"),h.add(x),u.setItemGraphicEl(_,x)}).remove(function(_){var w=d.getItemGraphicEl(_);removeElementWithFadeOut(w,n,_)}).execute(),pieLabelLayout(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},o.prototype.dispose=function(){},o.prototype.containPoint=function(n,a){var l=a.getData(),c=l.getItemLayout(0);if(c){var u=n[0]-c.cx,d=n[1]-c.cy,h=Math.sqrt(u*u+d*d);return h<=c.r&&h>=c.r0}},o.type="pie",o}(ChartView);function createSeriesDataSimply(s,o,n){o=isArray$1(o)&&{coordDimensions:o}||extend({encodeDefine:s.getEncode()},o);var a=s.getSource(),l=prepareSeriesDataSchema(a,o).dimensions,c=new SeriesData(l,s);return c.initData(a,n),c}var LegendVisualProvider=function(){function s(o,n){this._getDataWithEncodedVisual=o,this._getRawData=n}return s.prototype.getAllNames=function(){var o=this._getRawData();return o.mapArray(o.getName)},s.prototype.containName=function(o){var n=this._getRawData();return n.indexOfName(o)>=0},s.prototype.indexOfName=function(o){var n=this._getDataWithEncodedVisual();return n.indexOfName(o)},s.prototype.getItemVisual=function(o,n){var a=this._getDataWithEncodedVisual();return a.getItemVisual(o,n)},s}(),innerData=makeInner(),PieSeriesModel=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.init=function(n){s.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},o.prototype.mergeOption=function(){s.prototype.mergeOption.apply(this,arguments)},o.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},o.prototype.getDataParams=function(n){var a=this.getData(),l=innerData(a),c=l.seats;if(!c){var u=[];a.each(a.mapDimension("value"),function(h){u.push(h)}),c=l.seats=getPercentSeats(u,a.hostModel.get("percentPrecision"))}var d=s.prototype.getDataParams.call(this,n);return d.percent=c[n]||0,d.$vars.push("percent"),d},o.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var a=n.labelLine,l=n.emphasis.labelLine;a.show=a.show&&n.label.show,l.show=l.show&&n.emphasis.label.show},o.type="series.pie",o.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},o}(SeriesModel);function negativeDataFilter(s){return{seriesType:s,reset:function(o,n){var a=o.getData();a.filterSelf(function(l){var c=a.mapDimension("value"),u=a.get(c,l);return!(isNumber(u)&&!isNaN(u)&&u<0)})}}}function install$O(s){s.registerChartView(PieView),s.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",s.registerAction),s.registerLayout(curry$1(pieLayout,"pie")),s.registerProcessor(dataFilter$1("pie")),s.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.hasSymbolVisual=!0,n}return o.prototype.getInitialData=function(n,a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},o.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},o.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},o.prototype.brushSelector=function(n,a,l){return l.point(a.getItemLayout(n))},o.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},o.type="series.scatter",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},o}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function s(){}return s}(),LargeSymbolPath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a._off=0,a.hoverDataIdx=-1,a}return o.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},o.prototype.reset=function(){this.notClear=!1,this._off=0},o.prototype.buildPath=function(n,a){var l=a.points,c=a.size,u=this.symbolProxy,d=u.shape,h=n.getContext?n.getContext():n,f=h&&c[0]<BOOST_SIZE_THRESHOLD,g=this.softClipShape,p;if(f){this._ctx=h;return}for(this._ctx=null,p=this._off;p<l.length;){var v=l[p++],b=l[p++];isNaN(v)||isNaN(b)||g&&!g.contain(v,b)||(d.x=v-c[0]/2,d.y=b-c[1]/2,d.width=c[0],d.height=c[1],u.buildPath(n,d,!0))}this.incremental&&(this._off=p,this.notClear=!0)},o.prototype.afterBrush=function(){var n=this.shape,a=n.points,l=n.size,c=this._ctx,u=this.softClipShape,d;if(c){for(d=this._off;d<a.length;){var h=a[d++],f=a[d++];isNaN(h)||isNaN(f)||u&&!u.contain(h,f)||c.fillRect(h-l[0]/2,f-l[1]/2,l[0],l[1])}this.incremental&&(this._off=d,this.notClear=!0)}},o.prototype.findDataIndex=function(n,a){for(var l=this.shape,c=l.points,u=l.size,d=Math.max(u[0],4),h=Math.max(u[1],4),f=c.length/2-1;f>=0;f--){var g=f*2,p=c[g]-d/2,v=c[g+1]-h/2;if(n>=p&&a>=v&&n<=p+d&&a<=v+h)return f}return-1},o.prototype.contain=function(n,a){var l=this.transformCoordToLocal(n,a),c=this.getBoundingRect();if(n=l[0],a=l[1],c.contain(n,a)){var u=this.hoverDataIdx=this.findDataIndex(n,a);return u>=0}return this.hoverDataIdx=-1,!1},o.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var a=this.shape,l=a.points,c=a.size,u=c[0],d=c[1],h=1/0,f=1/0,g=-1/0,p=-1/0,v=0;v<l.length;){var b=l[v++],_=l[v++];h=Math.min(b,h),g=Math.max(b,g),f=Math.min(_,f),p=Math.max(_,p)}n=this._rect=new BoundingRect(h-u/2,f-d/2,g-h+u,p-f+d)}return n},o}(Path),LargeSymbolDraw=function(){function s(){this.group=new Group$3}return s.prototype.updateData=function(o,n){this._clear();var a=this._create();a.setShape({points:o.getLayout("points")}),this._setCommon(a,o,n)},s.prototype.updateLayout=function(o){var n=o.getLayout("points");this.group.eachChild(function(a){if(a.startIndex!=null){var l=(a.endIndex-a.startIndex)*2,c=a.startIndex*4*2;n=new Float32Array(n.buffer,c,l)}a.setShape("points",n),a.reset()})},s.prototype.incrementalPrepareUpdate=function(o){this._clear()},s.prototype.incrementalUpdate=function(o,n,a){var l=this._newAdded[0],c=n.getLayout("points"),u=l&&l.shape.points;if(u&&u.length<2e4){var d=u.length,h=new Float32Array(d+c.length);h.set(u),h.set(c,d),l.endIndex=o.end,l.setShape({points:h})}else{this._newAdded=[];var f=this._create();f.startIndex=o.start,f.endIndex=o.end,f.incremental=!0,f.setShape({points:c}),this._setCommon(f,n,a)}},s.prototype.eachRendered=function(o){this._newAdded[0]&&o(this._newAdded[0])},s.prototype._create=function(){var o=new LargeSymbolPath({cursor:"default"});return o.ignoreCoarsePointer=!0,this.group.add(o),this._newAdded.push(o),o},s.prototype._setCommon=function(o,n,a){var l=n.hostModel;a=a||{};var c=n.getVisual("symbolSize");o.setShape("size",c instanceof Array?c:[c,c]),o.softClipShape=a.clipShape||null,o.symbolProxy=createSymbol$1(n.getVisual("symbol"),0,0,0,0),o.setColor=o.symbolProxy.setColor;var u=o.shape.size[0]<BOOST_SIZE_THRESHOLD;o.useStyle(l.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var d=n.getVisual("style"),h=d&&d.fill;h&&o.setColor(h);var f=getECData(o);f.seriesIndex=l.seriesIndex,o.on("mousemove",function(g){f.dataIndex=null;var p=o.hoverDataIdx;p>=0&&(f.dataIndex=p+(o.startIndex||0))})},s.prototype.remove=function(){this._clear()},s.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},s}(),ScatterView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=n.getData(),u=this._updateSymbolDraw(c,n);u.updateData(c,{clipShape:this._getClipShape(n)}),this._finished=!0},o.prototype.incrementalPrepareRender=function(n,a,l){var c=n.getData(),u=this._updateSymbolDraw(c,n);u.incrementalPrepareUpdate(c),this._finished=!1},o.prototype.incrementalRender=function(n,a,l){this._symbolDraw.incrementalUpdate(n,a.getData(),{clipShape:this._getClipShape(a)}),this._finished=n.end===a.getData().count()},o.prototype.updateTransform=function(n,a,l){var c=n.getData();if(this.group.dirty(),!this._finished||c.count()>1e4)return{update:!0};var u=pointsLayout("").reset(n,a,l);u.progress&&u.progress({start:0,end:c.count(),count:c.count()},c),this._symbolDraw.updateLayout(c)},o.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},o.prototype._getClipShape=function(n){if(n.get("clip",!0)){var a=n.coordinateSystem;return a&&a.getArea&&a.getArea(.1)}},o.prototype._updateSymbolDraw=function(n,a){var l=this._symbolDraw,c=a.pipelineContext,u=c.large;return(!l||u!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=u?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=u,this.group.removeAll()),this.group.add(l.group),l},o.prototype.remove=function(n,a){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},o.prototype.dispose=function(){},o.type="scatter",o}(ChartView),GridModel=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.type="grid",o.dependencies=["xAxis","yAxis"],o.layoutMode="box",o.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},o}(ComponentModel),CartesianAxisModel=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},o.type="cartesian2dAxis",o}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(s,o,n,a){each$f(AXIS_TYPES,function(l,c){var u=merge(merge({},axisDefault[c],!0),a,!0),d=function(h){__extends$1(f,h);function f(){var g=h!==null&&h.apply(this,arguments)||this;return g.type=o+"Axis."+c,g}return f.prototype.mergeDefaultAndTheme=function(g,p){var v=fetchLayoutMode(this),b=v?getLayoutParams(g):{},_=p.getTheme();merge(g,_.get(c+"Axis")),merge(g,this.getDefaultOption()),g.type=getAxisType(g),v&&mergeLayoutParam(g,b,v)},f.prototype.optionUpdated=function(){var g=this.option;g.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},f.prototype.getCategories=function(g){var p=this.option;if(p.type==="category")return g?p.data:this.__ordinalMeta.categories},f.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},f.type=o+"Axis."+c,f.defaultOption=u,f}(n);s.registerComponentModel(d)}),s.registerSubTypeDefaulter(o+"Axis",getAxisType)}function getAxisType(s){return s.type||(s.data?"category":"value")}var Cartesian=function(){function s(o){this.type="cartesian",this._dimList=[],this._axes={},this.name=o||""}return s.prototype.getAxis=function(o){return this._axes[o]},s.prototype.getAxes=function(){return map$1(this._dimList,function(o){return this._axes[o]},this)},s.prototype.getAxesByScale=function(o){return o=o.toLowerCase(),filter(this.getAxes(),function(n){return n.scale.type===o})},s.prototype.addAxis=function(o){var n=o.dim;this._axes[n]=o,this._dimList.push(n)},s}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(s){return s.type==="interval"||s.type==="time"}var Cartesian2D=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=cartesian2DDimensions,n}return o.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,a=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(n)||!canCalculateAffineTransform(a))){var l=n.getExtent(),c=a.getExtent(),u=this.dataToPoint([l[0],c[0]]),d=this.dataToPoint([l[1],c[1]]),h=l[1]-l[0],f=c[1]-c[0];if(!(!h||!f)){var g=(d[0]-u[0])/h,p=(d[1]-u[1])/f,v=u[0]-l[0]*g,b=u[1]-c[0]*p,_=this._transform=[g,0,0,p,v,b];this._invTransform=invert([],_)}}},o.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},o.prototype.containPoint=function(n){var a=this.getAxis("x"),l=this.getAxis("y");return a.contain(a.toLocalCoord(n[0]))&&l.contain(l.toLocalCoord(n[1]))},o.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},o.prototype.containZone=function(n,a){var l=this.dataToPoint(n),c=this.dataToPoint(a),u=this.getArea(),d=new BoundingRect(l[0],l[1],c[0]-l[0],c[1]-l[1]);return u.intersect(d)},o.prototype.dataToPoint=function(n,a,l){l=l||[];var c=n[0],u=n[1];if(this._transform&&c!=null&&isFinite(c)&&u!=null&&isFinite(u))return applyTransform$1(l,n,this._transform);var d=this.getAxis("x"),h=this.getAxis("y");return l[0]=d.toGlobalCoord(d.dataToCoord(c,a)),l[1]=h.toGlobalCoord(h.dataToCoord(u,a)),l},o.prototype.clampData=function(n,a){var l=this.getAxis("x").scale,c=this.getAxis("y").scale,u=l.getExtent(),d=c.getExtent(),h=l.parse(n[0]),f=c.parse(n[1]);return a=a||[],a[0]=Math.min(Math.max(Math.min(u[0],u[1]),h),Math.max(u[0],u[1])),a[1]=Math.min(Math.max(Math.min(d[0],d[1]),f),Math.max(d[0],d[1])),a},o.prototype.pointToData=function(n,a){var l=[];if(this._invTransform)return applyTransform$1(l,n,this._invTransform);var c=this.getAxis("x"),u=this.getAxis("y");return l[0]=c.coordToData(c.toLocalCoord(n[0]),a),l[1]=u.coordToData(u.toLocalCoord(n[1]),a),l},o.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},o.prototype.getArea=function(n){n=n||0;var a=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),c=Math.min(a[0],a[1])-n,u=Math.min(l[0],l[1])-n,d=Math.max(a[0],a[1])-c+n,h=Math.max(l[0],l[1])-u+n;return new BoundingRect(c,u,d,h)},o}(Cartesian),Axis2D=function(s){__extends$1(o,s);function o(n,a,l,c,u){var d=s.call(this,n,a,l)||this;return d.index=0,d.type=c||"value",d.position=u||"bottom",d}return o.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},o.prototype.getGlobalExtent=function(n){var a=this.getExtent();return a[0]=this.toGlobalCoord(a[0]),a[1]=this.toGlobalCoord(a[1]),n&&a[0]>a[1]&&a.reverse(),a},o.prototype.pointToData=function(n,a){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),a)},o.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},o}(Axis);function layout$2(s,o,n){n=n||{};var a=s.coordinateSystem,l=o.axis,c={},u=l.getAxesOnZeroOf()[0],d=l.position,h=u?"onZero":d,f=l.dim,g=a.getRect(),p=[g.x,g.x+g.width,g.y,g.y+g.height],v={left:0,right:1,top:0,bottom:1,onZero:2},b=o.get("offset")||0,_=f==="x"?[p[2]-b,p[3]+b]:[p[0]-b,p[1]+b];if(u){var w=u.toGlobalCoord(u.dataToCoord(0));_[v.onZero]=Math.max(Math.min(w,_[1]),_[0])}c.position=[f==="y"?_[v[h]]:p[0],f==="x"?_[v[h]]:p[3]],c.rotation=Math.PI/2*(f==="x"?0:1);var x={top:-1,bottom:1,left:-1,right:1};c.labelDirection=c.tickDirection=c.nameDirection=x[d],c.labelOffset=u?_[v[d]]-_[v.onZero]:0,o.get(["axisTick","inside"])&&(c.tickDirection=-c.tickDirection),retrieve(n.labelInside,o.get(["axisLabel","inside"]))&&(c.labelDirection=-c.labelDirection);var S=o.get(["axisLabel","rotate"]);return c.labelRotate=h==="top"?-S:S,c.z2=1,c}function isCartesian2DSeries(s){return s.get("coordinateSystem")==="cartesian2d"}function findAxisModels(s){var o={xAxisModel:null,yAxisModel:null};return each$f(o,function(n,a){var l=a.replace(/Model$/,""),c=s.getReferringComponents(l,SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"&&!c)throw new Error(l+' "'+retrieve3(s.get(l+"Index"),s.get(l+"Id"),0)+'" not found');o[a]=c}),o}var mathLog=Math.log;function alignScaleTicks(s,o,n){var a=IntervalScale.prototype,l=a.getTicks.call(n),c=a.getTicks.call(n,!0),u=l.length-1,d=a.getInterval.call(n),h=getScaleExtent(s,o),f=h.extent,g=h.fixMin,p=h.fixMax;if(s.type==="log"){var v=mathLog(s.base);f=[mathLog(f[0])/v,mathLog(f[1])/v]}s.setExtent(f[0],f[1]),s.calcNiceExtent({splitNumber:u,fixMin:g,fixMax:p});var b=a.getExtent.call(s);g&&(f[0]=b[0]),p&&(f[1]=b[1]);var _=a.getInterval.call(s),w=f[0],x=f[1];if(g&&p)_=(x-w)/u;else if(g)for(x=f[0]+_*u;x<f[1]&&isFinite(x)&&isFinite(f[1]);)_=increaseInterval(_),x=f[0]+_*u;else if(p)for(w=f[1]-_*u;w>f[0]&&isFinite(w)&&isFinite(f[0]);)_=increaseInterval(_),w=f[1]-_*u;else{var S=s.getTicks().length-1;S>u&&(_=increaseInterval(_));var C=_*u;x=Math.ceil(f[1]/_)*_,w=round$3(x-C),w<0&&f[0]>=0?(w=0,x=round$3(C)):x>0&&f[1]<=0&&(x=0,w=-round$3(C))}var T=(l[0].value-c[0].value)/d,R=(l[u].value-c[u].value)/d;if(a.setExtent.call(s,w+_*T,x+_*R),a.setInterval.call(s,_),(T||R)&&a.setNiceExtent.call(s,w+_,x-_),process.env.NODE_ENV!=="production"){var A=a.getTicks.call(s);A[1]&&(!isValueNice(_)||getPrecisionSafe(A[1].value)>getPrecisionSafe(_))&&warn("The ticks may be not readable when set min: "+o.get("min")+", max: "+o.get("max")+" and alignTicks: true")}}var Grid=function(){function s(o,n,a){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(o,n,a),this.model=o}return s.prototype.getRect=function(){return this._rect},s.prototype.update=function(o,n){var a=this._axesMap;this._updateScale(o,this.model);function l(u){var d,h=keys(u),f=h.length;if(f){for(var g=[],p=f-1;p>=0;p--){var v=+h[p],b=u[v],_=b.model,w=b.scale;isIntervalOrLogScale(w)&&_.get("alignTicks")&&_.get("interval")==null?g.push(b):(niceScaleExtent(w,_),isIntervalOrLogScale(w)&&(d=b))}g.length&&(d||(d=g.pop(),niceScaleExtent(d.scale,d.model)),each$f(g,function(x){alignScaleTicks(x.scale,x.model,d.scale)}))}}l(a.x),l(a.y);var c={};each$f(a.x,function(u){fixAxisOnZero(a,"y",u,c)}),each$f(a.y,function(u){fixAxisOnZero(a,"x",u,c)}),this.resize(this.model,n)},s.prototype.resize=function(o,n,a){var l=o.getBoxLayoutParams(),c=!a&&o.get("containLabel"),u=getLayoutRect(l,{width:n.getWidth(),height:n.getHeight()});this._rect=u;var d=this._axesList;h(),c&&(each$f(d,function(f){if(!f.model.get(["axisLabel","inside"])){var g=estimateLabelUnionRect(f);if(g){var p=f.isHorizontal()?"height":"width",v=f.model.get(["axisLabel","margin"]);u[p]-=g[p]+v,f.position==="top"?u.y+=g.height+v:f.position==="left"&&(u.x+=g.width+v)}}}),h()),each$f(this._coordsList,function(f){f.calcAffineTransform()});function h(){each$f(d,function(f){var g=f.isHorizontal(),p=g?[0,u.width]:[0,u.height],v=f.inverse?1:0;f.setExtent(p[v],p[1-v]),updateAxisTransform(f,g?u.x:u.y)})}},s.prototype.getAxis=function(o,n){var a=this._axesMap[o];if(a!=null)return a[n||0]},s.prototype.getAxes=function(){return this._axesList.slice()},s.prototype.getCartesian=function(o,n){if(o!=null&&n!=null){var a="x"+o+"y"+n;return this._coordsMap[a]}isObject$3(o)&&(n=o.yAxisIndex,o=o.xAxisIndex);for(var l=0,c=this._coordsList;l<c.length;l++)if(c[l].getAxis("x").index===o||c[l].getAxis("y").index===n)return c[l]},s.prototype.getCartesians=function(){return this._coordsList.slice()},s.prototype.convertToPixel=function(o,n,a){var l=this._findConvertTarget(n);return l.cartesian?l.cartesian.dataToPoint(a):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(a)):null},s.prototype.convertFromPixel=function(o,n,a){var l=this._findConvertTarget(n);return l.cartesian?l.cartesian.pointToData(a):l.axis?l.axis.coordToData(l.axis.toLocalCoord(a)):null},s.prototype._findConvertTarget=function(o){var n=o.seriesModel,a=o.xAxisModel||n&&n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=o.yAxisModel||n&&n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],c=o.gridModel,u=this._coordsList,d,h;if(n)d=n.coordinateSystem,indexOf(u,d)<0&&(d=null);else if(a&&l)d=this.getCartesian(a.componentIndex,l.componentIndex);else if(a)h=this.getAxis("x",a.componentIndex);else if(l)h=this.getAxis("y",l.componentIndex);else if(c){var f=c.coordinateSystem;f===this&&(d=this._coordsList[0])}return{cartesian:d,axis:h}},s.prototype.containPoint=function(o){var n=this._coordsList[0];if(n)return n.containPoint(o)},s.prototype._initCartesian=function(o,n,a){var l=this,c=this,u={left:!1,right:!1,top:!1,bottom:!1},d={x:{},y:{}},h={x:0,y:0};if(n.eachComponent("xAxis",f("x"),this),n.eachComponent("yAxis",f("y"),this),!h.x||!h.y){this._axesMap={},this._axesList=[];return}this._axesMap=d,each$f(d.x,function(g,p){each$f(d.y,function(v,b){var _="x"+p+"y"+b,w=new Cartesian2D(_);w.master=l,w.model=o,l._coordsMap[_]=w,l._coordsList.push(w),w.addAxis(g),w.addAxis(v)})});function f(g){return function(p,v){if(isAxisUsedInTheGrid(p,o)){var b=p.get("position");g==="x"?b!=="top"&&b!=="bottom"&&(b=u.bottom?"top":"bottom"):b!=="left"&&b!=="right"&&(b=u.left?"right":"left"),u[b]=!0;var _=new Axis2D(g,createScaleByModel$1(p),[0,0],p.get("type"),b),w=_.type==="category";_.onBand=w&&p.get("boundaryGap"),_.inverse=p.get("inverse"),p.axis=_,_.model=p,_.grid=c,_.index=v,c._axesList.push(_),d[g][v]=_,h[g]++}}}},s.prototype._updateScale=function(o,n){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var c=l.model.get("categorySortInfo");l.scale.setSortInfo(c)}}),o.eachSeries(function(l){if(isCartesian2DSeries(l)){var c=findAxisModels(l),u=c.xAxisModel,d=c.yAxisModel;if(!isAxisUsedInTheGrid(u,n)||!isAxisUsedInTheGrid(d,n))return;var h=this.getCartesian(u.componentIndex,d.componentIndex),f=l.getData(),g=h.getAxis("x"),p=h.getAxis("y");a(f,g),a(f,p)}},this);function a(l,c){each$f(getDataDimensionsOnAxis(l,c.dim),function(u){c.scale.unionExtentFromData(l,u)})}},s.prototype.getTooltipAxes=function(o){var n=[],a=[];return each$f(this.getCartesians(),function(l){var c=o!=null&&o!=="auto"?l.getAxis(o):l.getBaseAxis(),u=l.getOtherAxis(c);indexOf(n,c)<0&&n.push(c),indexOf(a,u)<0&&a.push(u)}),{baseAxes:n,otherAxes:a}},s.create=function(o,n){var a=[];return o.eachComponent("grid",function(l,c){var u=new s(l,o,n);u.name="grid_"+c,u.resize(l,n,!0),l.coordinateSystem=u,a.push(u)}),o.eachSeries(function(l){if(isCartesian2DSeries(l)){var c=findAxisModels(l),u=c.xAxisModel,d=c.yAxisModel,h=u.getCoordSysModel();if(process.env.NODE_ENV!=="production"){if(!h)throw new Error('Grid "'+retrieve3(u.get("gridIndex"),u.get("gridId"),0)+'" not found');if(u.getCoordSysModel()!==d.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var f=h.coordinateSystem;l.coordinateSystem=f.getCartesian(u.componentIndex,d.componentIndex)}}),a},s.dimensions=cartesian2DDimensions,s}();function isAxisUsedInTheGrid(s,o){return s.getCoordSysModel()===o}function fixAxisOnZero(s,o,n,a){n.getAxesOnZeroOf=function(){return c?[c]:[]};var l=s[o],c,u=n.model,d=u.get(["axisLine","onZero"]),h=u.get(["axisLine","onZeroAxisIndex"]);if(!d)return;if(h!=null)canOnZeroToAxis(l[h])&&(c=l[h]);else for(var f in l)if(l.hasOwnProperty(f)&&canOnZeroToAxis(l[f])&&!a[g(l[f])]){c=l[f];break}c&&(a[g(c)]=!0);function g(p){return p.dim+"_"+p.index}}function canOnZeroToAxis(s){return s&&s.type!=="category"&&s.type!=="time"&&ifAxisCrossZero(s)}function updateAxisTransform(s,o){var n=s.getExtent(),a=n[0]+n[1];s.toGlobalCoord=s.dim==="x"?function(l){return l+o}:function(l){return a-l+o},s.toLocalCoord=s.dim==="x"?function(l){return l-o}:function(l){return a-l+o}}var PI$3=Math.PI,AxisBuilder=function(){function s(o,n){this.group=new Group$3,this.opt=n,this.axisModel=o,defaults(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var a=new Group$3({x:n.position[0],y:n.position[1],rotation:n.rotation});a.updateTransform(),this._transformGroup=a}return s.prototype.hasBuilder=function(o){return!!builders[o]},s.prototype.add=function(o){builders[o](this.opt,this.axisModel,this.group,this._transformGroup)},s.prototype.getGroup=function(){return this.group},s.innerTextLayout=function(o,n,a){var l=remRadian(n-o),c,u;return isRadianAroundZero(l)?(u=a>0?"top":"bottom",c="center"):isRadianAroundZero(l-PI$3)?(u=a>0?"bottom":"top",c="center"):(u="middle",l>0&&l<PI$3?c=a>0?"right":"left":c=a>0?"left":"right"),{rotation:l,textAlign:c,textVerticalAlign:u}},s.makeAxisEventDataBase=function(o){var n={componentType:o.mainType,componentIndex:o.componentIndex};return n[o.mainType+"Index"]=o.componentIndex,n},s.isLabelSilent=function(o){var n=o.get("tooltip");return o.get("silent")||!(o.get("triggerEvent")||n&&n.show)},s}(),builders={axisLine:function(s,o,n,a){var l=o.get(["axisLine","show"]);if(l==="auto"&&s.handleAutoShown&&(l=s.handleAutoShown("axisLine")),!!l){var c=o.axis.getExtent(),u=a.transform,d=[c[0],0],h=[c[1],0],f=d[0]>h[0];u&&(applyTransform$1(d,d,u),applyTransform$1(h,h,u));var g=extend({lineCap:"round"},o.getModel(["axisLine","lineStyle"]).getLineStyle()),p=new Line$1({shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]},style:g,strokeContainThreshold:s.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(p.shape,p.style.lineWidth),p.anid="line",n.add(p);var v=o.get(["axisLine","symbol"]);if(v!=null){var b=o.get(["axisLine","symbolSize"]);isString$2(v)&&(v=[v,v]),(isString$2(b)||isNumber(b))&&(b=[b,b]);var _=normalizeSymbolOffset(o.get(["axisLine","symbolOffset"])||0,b),w=b[0],x=b[1];each$f([{rotate:s.rotation+Math.PI/2,offset:_[0],r:0},{rotate:s.rotation-Math.PI/2,offset:_[1],r:Math.sqrt((d[0]-h[0])*(d[0]-h[0])+(d[1]-h[1])*(d[1]-h[1]))}],function(S,C){if(v[C]!=="none"&&v[C]!=null){var T=createSymbol$1(v[C],-w/2,-x/2,w,x,g.stroke,!0),R=S.r+S.offset,A=f?h:d;T.attr({rotation:S.rotate,x:A[0]+R*Math.cos(s.rotation),y:A[1]-R*Math.sin(s.rotation),silent:!0,z2:11}),n.add(T)}})}}},axisTickLabel:function(s,o,n,a){var l=buildAxisMajorTicks(n,a,o,s),c=buildAxisLabel(n,a,o,s);if(fixMinMaxLabelShow(o,c,l),buildAxisMinorTicks(n,a,o,s.tickDirection),o.get(["axisLabel","hideOverlap"])){var u=prepareLayoutList(map$1(c,function(d){return{label:d,priority:d.z2,defaultAttr:{ignore:d.ignore}}}));hideOverlap(u)}},axisName:function(s,o,n,a){var l=retrieve(s.axisName,o.get("name"));if(l){var c=o.get("nameLocation"),u=s.nameDirection,d=o.getModel("nameTextStyle"),h=o.get("nameGap")||0,f=o.axis.getExtent(),g=f[0]>f[1]?-1:1,p=[c==="start"?f[0]-g*h:c==="end"?f[1]+g*h:(f[0]+f[1])/2,isNameLocationCenter(c)?s.labelOffset+u*h:0],v,b=o.get("nameRotate");b!=null&&(b=b*PI$3/180);var _;isNameLocationCenter(c)?v=AxisBuilder.innerTextLayout(s.rotation,b??s.rotation,u):(v=endTextLayout(s.rotation,c,b||0,f),_=s.axisNameAvailableWidth,_!=null&&(_=Math.abs(_/Math.sin(v.rotation)),!isFinite(_)&&(_=null)));var w=d.getFont(),x=o.get("nameTruncate",!0)||{},S=x.ellipsis,C=retrieve(s.nameTruncateMaxWidth,x.maxWidth,_),T=new ZRText({x:p[0],y:p[1],rotation:v.rotation,silent:AxisBuilder.isLabelSilent(o),style:createTextStyle$1(d,{text:l,font:w,overflow:"truncate",width:C,ellipsis:S,fill:d.getTextColor()||o.get(["axisLine","lineStyle","color"]),align:d.get("align")||v.textAlign,verticalAlign:d.get("verticalAlign")||v.textVerticalAlign}),z2:1});if(setTooltipConfig({el:T,componentModel:o,itemName:l}),T.__fullText=l,T.anid="name",o.get("triggerEvent")){var R=AxisBuilder.makeAxisEventDataBase(o);R.targetType="axisName",R.name=l,getECData(T).eventData=R}a.add(T),T.updateTransform(),n.add(T),T.decomposeTransform()}}};function endTextLayout(s,o,n,a){var l=remRadian(n-s),c,u,d=a[0]>a[1],h=o==="start"&&!d||o!=="start"&&d;return isRadianAroundZero(l-PI$3/2)?(u=h?"bottom":"top",c="center"):isRadianAroundZero(l-PI$3*1.5)?(u=h?"top":"bottom",c="center"):(u="middle",l<PI$3*1.5&&l>PI$3/2?c=h?"left":"right":c=h?"right":"left"),{rotation:l,textAlign:c,textVerticalAlign:u}}function fixMinMaxLabelShow(s,o,n){if(!shouldShowAllLabels(s.axis)){var a=s.get(["axisLabel","showMinLabel"]),l=s.get(["axisLabel","showMaxLabel"]);o=o||[],n=n||[];var c=o[0],u=o[1],d=o[o.length-1],h=o[o.length-2],f=n[0],g=n[1],p=n[n.length-1],v=n[n.length-2];a===!1?(ignoreEl(c),ignoreEl(f)):isTwoLabelOverlapped(c,u)&&(a?(ignoreEl(u),ignoreEl(g)):(ignoreEl(c),ignoreEl(f))),l===!1?(ignoreEl(d),ignoreEl(p)):isTwoLabelOverlapped(h,d)&&(l?(ignoreEl(h),ignoreEl(v)):(ignoreEl(d),ignoreEl(p)))}}function ignoreEl(s){s&&(s.ignore=!0)}function isTwoLabelOverlapped(s,o){var n=s&&s.getBoundingRect().clone(),a=o&&o.getBoundingRect().clone();if(!(!n||!a)){var l=identity([]);return rotate(l,l,-s.rotation),n.applyTransform(mul([],l,s.getLocalTransform())),a.applyTransform(mul([],l,o.getLocalTransform())),n.intersect(a)}}function isNameLocationCenter(s){return s==="middle"||s==="center"}function createTicks(s,o,n,a,l){for(var c=[],u=[],d=[],h=0;h<s.length;h++){var f=s[h].coord;u[0]=f,u[1]=0,d[0]=f,d[1]=n,o&&(applyTransform$1(u,u,o),applyTransform$1(d,d,o));var g=new Line$1({shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:a,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(g.shape,g.style.lineWidth),g.anid=l+"_"+s[h].tickValue,c.push(g)}return c}function buildAxisMajorTicks(s,o,n,a){var l=n.axis,c=n.getModel("axisTick"),u=c.get("show");if(u==="auto"&&a.handleAutoShown&&(u=a.handleAutoShown("axisTick")),!(!u||l.scale.isBlank())){for(var d=c.getModel("lineStyle"),h=a.tickDirection*c.get("length"),f=l.getTicksCoords(),g=createTicks(f,o.transform,h,defaults(d.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),p=0;p<g.length;p++)s.add(g[p]);return g}}function buildAxisMinorTicks(s,o,n,a){var l=n.axis,c=n.getModel("minorTick");if(!(!c.get("show")||l.scale.isBlank())){var u=l.getMinorTicksCoords();if(u.length)for(var d=c.getModel("lineStyle"),h=a*c.get("length"),f=defaults(d.getLineStyle(),defaults(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),g=0;g<u.length;g++)for(var p=createTicks(u[g],o.transform,h,f,"minorticks_"+g),v=0;v<p.length;v++)s.add(p[v])}}function buildAxisLabel(s,o,n,a){var l=n.axis,c=retrieve(a.axisLabelShow,n.get(["axisLabel","show"]));if(!(!c||l.scale.isBlank())){var u=n.getModel("axisLabel"),d=u.get("margin"),h=l.getViewLabels(),f=(retrieve(a.labelRotate,u.get("rotate"))||0)*PI$3/180,g=AxisBuilder.innerTextLayout(a.rotation,f,a.labelDirection),p=n.getCategories&&n.getCategories(!0),v=[],b=AxisBuilder.isLabelSilent(n),_=n.get("triggerEvent");return each$f(h,function(w,x){var S=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(w.tickValue):w.tickValue,C=w.formattedLabel,T=w.rawLabel,R=u;if(p&&p[S]){var A=p[S];isObject$3(A)&&A.textStyle&&(R=new Model(A.textStyle,u,n.ecModel))}var M=R.getTextColor()||n.get(["axisLine","lineStyle","color"]),D=l.dataToCoord(S),O=R.getShallow("align",!0)||g.textAlign,H=retrieve2(R.getShallow("alignMinLabel",!0),O),j=retrieve2(R.getShallow("alignMaxLabel",!0),O),q=R.getShallow("verticalAlign",!0)||R.getShallow("baseline",!0)||g.textVerticalAlign,Y=retrieve2(R.getShallow("verticalAlignMinLabel",!0),q),ee=retrieve2(R.getShallow("verticalAlignMaxLabel",!0),q),te=new ZRText({x:D,y:a.labelOffset+a.labelDirection*d,rotation:g.rotation,silent:b,z2:10+(w.level||0),style:createTextStyle$1(R,{text:C,align:x===0?H:x===h.length-1?j:O,verticalAlign:x===0?Y:x===h.length-1?ee:q,fill:isFunction$1(M)?M(l.type==="category"?T:l.type==="value"?S+"":S,x):M})});if(te.anid="label_"+S,setTooltipConfig({el:te,componentModel:n,itemName:C,formatterParamsExtra:{isTruncated:function(){return te.isTruncated},value:T,tickIndex:x}}),_){var re=AxisBuilder.makeAxisEventDataBase(n);re.targetType="axisLabel",re.value=T,re.tickIndex=x,l.type==="category"&&(re.dataIndex=S),getECData(te).eventData=re}o.add(te),te.updateTransform(),v.push(te),s.add(te),te.decomposeTransform()}),v}}function collect(s,o){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(n,s,o),n.seriesInvolved&&collectSeriesInfo(n,s),n}function collectAxesInfo(s,o,n){var a=o.getComponent("tooltip"),l=o.getComponent("axisPointer"),c=l.get("link",!0)||[],u=[];each$f(n.getCoordinateSystems(),function(d){if(!d.axisPointerEnabled)return;var h=makeKey(d.model),f=s.coordSysAxesInfo[h]={};s.coordSysMap[h]=d;var g=d.model,p=g.getModel("tooltip",a);if(each$f(d.getAxes(),curry$1(w,!1,null)),d.getTooltipAxes&&a&&p.get("show")){var v=p.get("trigger")==="axis",b=p.get(["axisPointer","type"])==="cross",_=d.getTooltipAxes(p.get(["axisPointer","axis"]));(v||b)&&each$f(_.baseAxes,curry$1(w,b?"cross":!0,v)),b&&each$f(_.otherAxes,curry$1(w,"cross",!1))}function w(x,S,C){var T=C.model.getModel("axisPointer",l),R=T.get("show");if(!(!R||R==="auto"&&!x&&!isHandleTrigger(T))){S==null&&(S=T.get("triggerTooltip")),T=x?makeAxisPointerModel(C,p,l,o,x,S):T;var A=T.get("snap"),M=T.get("triggerEmphasis"),D=makeKey(C.model),O=S||A||C.type==="category",H=s.axesInfo[D]={key:D,axis:C,coordSys:d,axisPointerModel:T,triggerTooltip:S,triggerEmphasis:M,involveSeries:O,snap:A,useHandle:isHandleTrigger(T),seriesModels:[],linkGroup:null};f[D]=H,s.seriesInvolved=s.seriesInvolved||O;var j=getLinkGroupIndex(c,C);if(j!=null){var q=u[j]||(u[j]={axesInfo:{}});q.axesInfo[D]=H,q.mapper=c[j].mapper,H.linkGroup=q}}}})}function makeAxisPointerModel(s,o,n,a,l,c){var u=o.getModel("axisPointer"),d=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],h={};each$f(d,function(v){h[v]=clone$4(u.get(v))}),h.snap=s.type!=="category"&&!!c,u.get("type")==="cross"&&(h.type="line");var f=h.label||(h.label={});if(f.show==null&&(f.show=!1),l==="cross"){var g=u.get(["label","show"]);if(f.show=g??!0,!c){var p=h.lineStyle=u.get("crossStyle");p&&defaults(f,p.textStyle)}}return s.model.getModel("axisPointer",new Model(h,n,a))}function collectSeriesInfo(s,o){o.eachSeries(function(n){var a=n.coordinateSystem,l=n.get(["tooltip","trigger"],!0),c=n.get(["tooltip","show"],!0);!a||l==="none"||l===!1||l==="item"||c===!1||n.get(["axisPointer","show"],!0)===!1||each$f(s.coordSysAxesInfo[makeKey(a.model)],function(u){var d=u.axis;a.getAxis(d.dim)===d&&(u.seriesModels.push(n),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=n.getData().count())})})}function getLinkGroupIndex(s,o){for(var n=o.model,a=o.dim,l=0;l<s.length;l++){var c=s[l]||{};if(checkPropInLink(c[a+"AxisId"],n.id)||checkPropInLink(c[a+"AxisIndex"],n.componentIndex)||checkPropInLink(c[a+"AxisName"],n.name))return l}}function checkPropInLink(s,o){return s==="all"||isArray$1(s)&&indexOf(s,o)>=0||s===o}function fixValue(s){var o=getAxisInfo$1(s);if(o){var n=o.axisPointerModel,a=o.axis.scale,l=n.option,c=n.get("status"),u=n.get("value");u!=null&&(u=a.parse(u));var d=isHandleTrigger(n);c==null&&(l.status=d?"show":"hide");var h=a.getExtent().slice();h[0]>h[1]&&h.reverse(),(u==null||u>h[1])&&(u=h[1]),u<h[0]&&(u=h[0]),l.value=u,d&&(l.status=o.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(s){var o=(s.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return o&&o.axesInfo[makeKey(s)]}function getAxisPointerModel(s){var o=getAxisInfo$1(s);return o&&o.axisPointerModel}function isHandleTrigger(s){return!!s.get(["handle","show"])}function makeKey(s){return s.type+"||"+s.id}var axisPointerClazz={},AxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l,c){this.axisPointerClass&&fixValue(n),s.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,l,!0)},o.prototype.updateAxisPointer=function(n,a,l,c){this._doUpdateAxisPointerClass(n,l,!1)},o.prototype.remove=function(n,a){var l=this._axisPointer;l&&l.remove(a)},o.prototype.dispose=function(n,a){this._disposeAxisPointer(a),s.prototype.dispose.apply(this,arguments)},o.prototype._doUpdateAxisPointerClass=function(n,a,l){var c=o.getAxisPointerClass(this.axisPointerClass);if(c){var u=getAxisPointerModel(n);u?(this._axisPointer||(this._axisPointer=new c)).render(n,u,a,l):this._disposeAxisPointer(a)}},o.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},o.registerAxisPointerClass=function(n,a){if(process.env.NODE_ENV!=="production"&&axisPointerClazz[n])throw new Error("axisPointer "+n+" exists");axisPointerClazz[n]=a},o.getAxisPointerClass=function(n){return n&&axisPointerClazz[n]},o.type="axis",o}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(s,o,n,a){var l=n.axis;if(!l.scale.isBlank()){var c=n.getModel("splitArea"),u=c.getModel("areaStyle"),d=u.get("color"),h=a.coordinateSystem.getRect(),f=l.getTicksCoords({tickModel:c,clamp:!0});if(f.length){var g=d.length,p=inner$f(s).splitAreaColors,v=createHashMap(),b=0;if(p)for(var _=0;_<f.length;_++){var w=p.get(f[_].tickValue);if(w!=null){b=(w+(g-1)*_)%g;break}}var x=l.toGlobalCoord(f[0].coord),S=u.getAreaStyle();d=isArray$1(d)?d:[d];for(var _=1;_<f.length;_++){var C=l.toGlobalCoord(f[_].coord),T=void 0,R=void 0,A=void 0,M=void 0;l.isHorizontal()?(T=x,R=h.y,A=C-T,M=h.height,x=T+A):(T=h.x,R=x,A=h.width,M=C-R,x=R+M);var D=f[_-1].tickValue;D!=null&&v.set(D,b),o.add(new Rect$2({anid:D!=null?"area_"+D:null,shape:{x:T,y:R,width:A,height:M},style:defaults({fill:d[b]},S),autoBatch:!0,silent:!0})),b=(b+1)%g}inner$f(s).splitAreaColors=v}}}function rectCoordAxisHandleRemove(s){inner$f(s).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.axisPointerClass="CartesianAxisPointer",n}return o.prototype.render=function(n,a,l,c){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!n.get("show")){var d=n.getCoordSysModel(),h=layout$2(d,n),f=new AxisBuilder(n,extend({handleAutoShown:function(p){for(var v=d.coordinateSystem.getCartesians(),b=0;b<v.length;b++)if(isIntervalOrLogScale(v[b].getOtherAxis(n.axis).scale))return!0;return!1}},h));each$f(axisBuilderAttrs$3,f.add,f),this._axisGroup.add(f.getGroup()),each$f(selfBuilderAttrs$2,function(p){n.get([p,"show"])&&axisElementBuilders$2[p](this,this._axisGroup,n,d)},this);var g=c&&c.type==="changeAxisOrder"&&c.isInitSort;g||groupTransition(u,this._axisGroup,n),s.prototype.render.call(this,n,a,l,c)}},o.prototype.remove=function(){rectCoordAxisHandleRemove(this)},o.type="cartesianAxis",o}(AxisView),axisElementBuilders$2={splitLine:function(s,o,n,a){var l=n.axis;if(!l.scale.isBlank()){var c=n.getModel("splitLine"),u=c.getModel("lineStyle"),d=u.get("color"),h=c.get("showMinLine")!==!1,f=c.get("showMaxLine")!==!1;d=isArray$1(d)?d:[d];for(var g=a.coordinateSystem.getRect(),p=l.isHorizontal(),v=0,b=l.getTicksCoords({tickModel:c}),_=[],w=[],x=u.getLineStyle(),S=0;S<b.length;S++){var C=l.toGlobalCoord(b[S].coord);if(!(S===0&&!h||S===b.length-1&&!f)){var T=b[S].tickValue;p?(_[0]=C,_[1]=g.y,w[0]=C,w[1]=g.y+g.height):(_[0]=g.x,_[1]=C,w[0]=g.x+g.width,w[1]=C);var R=v++%d.length,A=new Line$1({anid:T!=null?"line_"+T:null,autoBatch:!0,shape:{x1:_[0],y1:_[1],x2:w[0],y2:w[1]},style:defaults({stroke:d[R]},x),silent:!0});subPixelOptimizeLine(A.shape,x.lineWidth),o.add(A)}}}},minorSplitLine:function(s,o,n,a){var l=n.axis,c=n.getModel("minorSplitLine"),u=c.getModel("lineStyle"),d=a.coordinateSystem.getRect(),h=l.isHorizontal(),f=l.getMinorTicksCoords();if(f.length)for(var g=[],p=[],v=u.getLineStyle(),b=0;b<f.length;b++)for(var _=0;_<f[b].length;_++){var w=l.toGlobalCoord(f[b][_].coord);h?(g[0]=w,g[1]=d.y,p[0]=w,p[1]=d.y+d.height):(g[0]=d.x,g[1]=w,p[0]=d.x+d.width,p[1]=w);var x=new Line$1({anid:"minor_line_"+f[b][_].tickValue,autoBatch:!0,shape:{x1:g[0],y1:g[1],x2:p[0],y2:p[1]},style:v,silent:!0});subPixelOptimizeLine(x.shape,v.lineWidth),o.add(x)}},splitArea:function(s,o,n,a){rectCoordAxisBuildSplitArea(s,o,n,a)}},CartesianXAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="xAxis",o}(CartesianAxisView),CartesianYAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=CartesianXAxisView.type,n}return o.type="yAxis",o}(CartesianAxisView),GridView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="grid",n}return o.prototype.render=function(n,a){this.group.removeAll(),n.get("show")&&this.group.add(new Rect$2({shape:n.coordinateSystem.getRect(),style:defaults({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},o.type="grid",o}(ComponentView),extraOption={offset:0};function install$N(s){s.registerComponentView(GridView),s.registerComponentModel(GridModel),s.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(s,"x",CartesianAxisModel,extraOption),axisModelCreator(s,"y",CartesianAxisModel,extraOption),s.registerComponentView(CartesianXAxisView),s.registerComponentView(CartesianYAxisView),s.registerPreprocessor(function(o){o.xAxis&&o.yAxis&&!o.grid&&(o.grid={})})}function install$M(s){use(install$N),s.registerSeriesModel(ScatterSeriesModel),s.registerChartView(ScatterView),s.registerLayout(pointsLayout("scatter"))}function radarLayout(s){s.eachSeriesByType("radar",function(o){var n=o.getData(),a=[],l=o.coordinateSystem;if(l){var c=l.getIndicatorAxes();each$f(c,function(u,d){n.each(n.mapDimension(c[d].dim),function(h,f){a[f]=a[f]||[];var g=l.dataToPoint(h,d);a[f][d]=isValidPoint(g)?g:getValueMissingPoint(l)})}),n.each(function(u){var d=find(a[u],function(h){return isValidPoint(h)})||getValueMissingPoint(l);a[u].push(d.slice()),n.setItemLayout(u,a[u])})}})}function isValidPoint(s){return!isNaN(s[0])&&!isNaN(s[1])}function getValueMissingPoint(s){return[s.cx,s.cy]}function radarBackwardCompat(s){var o=s.polar;if(o){isArray$1(o)||(o=[o]);var n=[];each$f(o,function(a,l){a.indicator?(a.type&&!a.shape&&(a.shape=a.type),s.radar=s.radar||[],isArray$1(s.radar)||(s.radar=[s.radar]),s.radar.push(a)):n.push(a)}),s.polar=n}each$f(s.series,function(a){a&&a.type==="radar"&&a.polarIndex&&(a.radarIndex=a.polarIndex)})}var RadarView$1=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=n.coordinateSystem,u=this.group,d=n.getData(),h=this._data;function f(v,b){var _=v.getItemVisual(b,"symbol")||"circle";if(_!=="none"){var w=normalizeSymbolSize(v.getItemVisual(b,"symbolSize")),x=createSymbol$1(_,-1,-1,2,2),S=v.getItemVisual(b,"symbolRotate")||0;return x.attr({style:{strokeNoScale:!0},z2:100,scaleX:w[0]/2,scaleY:w[1]/2,rotation:S*Math.PI/180||0}),x}}function g(v,b,_,w,x,S){_.removeAll();for(var C=0;C<b.length-1;C++){var T=f(w,x);T&&(T.__dimIdx=C,v[C]?(T.setPosition(v[C]),graphic$1[S?"initProps":"updateProps"](T,{x:b[C][0],y:b[C][1]},n,x)):T.setPosition(b[C]),_.add(T))}}function p(v){return map$1(v,function(b){return[c.cx,c.cy]})}d.diff(h).add(function(v){var b=d.getItemLayout(v);if(b){var _=new Polygon,w=new Polyline$1,x={shape:{points:b}};_.shape.points=p(b),w.shape.points=p(b),initProps(_,x,n,v),initProps(w,x,n,v);var S=new Group$3,C=new Group$3;S.add(w),S.add(_),S.add(C),g(w.shape.points,b,C,d,v,!0),d.setItemGraphicEl(v,S)}}).update(function(v,b){var _=h.getItemGraphicEl(b),w=_.childAt(0),x=_.childAt(1),S=_.childAt(2),C={shape:{points:d.getItemLayout(v)}};C.shape.points&&(g(w.shape.points,C.shape.points,S,d,v,!1),saveOldStyle(x),saveOldStyle(w),updateProps$1(w,C,n),updateProps$1(x,C,n),d.setItemGraphicEl(v,_))}).remove(function(v){u.remove(h.getItemGraphicEl(v))}).execute(),d.eachItemGraphicEl(function(v,b){var _=d.getItemModel(b),w=v.childAt(0),x=v.childAt(1),S=v.childAt(2),C=d.getItemVisual(b,"style"),T=C.fill;u.add(v),w.useStyle(defaults(_.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:T})),setStatesStylesFromModel(w,_,"lineStyle"),setStatesStylesFromModel(x,_,"areaStyle");var R=_.getModel("areaStyle"),A=R.isEmpty()&&R.parentModel.isEmpty();x.ignore=A,each$f(["emphasis","select","blur"],function(O){var H=_.getModel([O,"areaStyle"]),j=H.isEmpty()&&H.parentModel.isEmpty();x.ensureState(O).ignore=j&&A}),x.useStyle(defaults(R.getAreaStyle(),{fill:T,opacity:.7,decal:C.decal}));var M=_.getModel("emphasis"),D=M.getModel("itemStyle").getItemStyle();S.eachChild(function(O){if(O instanceof ZRImage){var H=O.style;O.useStyle(extend({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},C))}else O.useStyle(C),O.setColor(T),O.style.strokeNoScale=!0;var j=O.ensureState("emphasis");j.style=clone$4(D);var q=d.getStore().get(d.getDimensionIndex(O.__dimIdx),b);(q==null||isNaN(q))&&(q=""),setLabelStyle(O,getLabelStatesModels(_),{labelFetcher:d.hostModel,labelDataIndex:b,labelDimIndex:O.__dimIdx,defaultText:q,inheritColor:T,defaultOpacity:C.opacity})}),toggleHoverEmphasis(v,M.get("focus"),M.get("blurScope"),M.get("disabled"))}),this._data=d},o.prototype.remove=function(){this.group.removeAll(),this._data=null},o.type="radar",o}(ChartView),RadarSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.hasSymbolVisual=!0,n}return o.prototype.init=function(n){s.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},o.prototype.getInitialData=function(n,a){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},o.prototype.formatTooltip=function(n,a,l){var c=this.getData(),u=this.coordinateSystem,d=u.getIndicatorAxes(),h=this.getData().getName(n),f=h===""?this.name:h,g=retrieveVisualColorForTooltipMarker(this,n);return createTooltipMarkup("section",{header:f,sortBlocks:!0,blocks:map$1(d,function(p){var v=c.get(c.mapDimension(p.dim),n);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:g,name:p.name,value:v,sortParam:v})})})},o.prototype.getTooltipPosition=function(n){if(n!=null){for(var a=this.getData(),l=this.coordinateSystem,c=a.getValues(map$1(l.dimensions,function(f){return a.mapDimension(f)}),n),u=0,d=c.length;u<d;u++)if(!isNaN(c[u])){var h=l.getIndicatorAxes();return l.coordToPoint(h[u].dataToCoord(c[u]),u)}}},o.type="series.radar",o.dependencies=["radar"],o.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},o}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(s,o){return defaults({show:o},s)}var RadarModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),a=this.get("splitNumber"),l=this.get("scale"),c=this.get("axisLine"),u=this.get("axisTick"),d=this.get("axisLabel"),h=this.get("axisName"),f=this.get(["axisName","show"]),g=this.get(["axisName","formatter"]),p=this.get("axisNameGap"),v=this.get("triggerEvent"),b=map$1(this.get("indicator")||[],function(_){_.max!=null&&_.max>0&&!_.min?_.min=0:_.min!=null&&_.min<0&&!_.max&&(_.max=0);var w=h;_.color!=null&&(w=defaults({color:_.color},h));var x=merge(clone$4(_),{boundaryGap:n,splitNumber:a,scale:l,axisLine:c,axisTick:u,axisLabel:d,name:_.text,showName:f,nameLocation:"end",nameGap:p,nameTextStyle:w,triggerEvent:v},!1);if(isString$2(g)){var S=x.name;x.name=g.replace("{value}",S??"")}else isFunction$1(g)&&(x.name=g(x.name,x));var C=new Model(x,null,this.ecModel);return mixin(C,AxisModelCommonMixin.prototype),C.mainType="radar",C.componentIndex=this.componentIndex,C},this);this._indicatorModels=b},o.prototype.getIndicatorModels=function(){return this._indicatorModels},o.type="radar",o.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},o}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=this.group;c.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},o.prototype._buildAxes=function(n){var a=n.coordinateSystem,l=a.getIndicatorAxes(),c=map$1(l,function(u){var d=u.model.get("showName")?u.name:"",h=new AxisBuilder(u.model,{axisName:d,position:[a.cx,a.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return h});each$f(c,function(u){each$f(axisBuilderAttrs$2,u.add,u),this.group.add(u.getGroup())},this)},o.prototype._buildSplitLineAndArea=function(n){var a=n.coordinateSystem,l=a.getIndicatorAxes();if(!l.length)return;var c=n.get("shape"),u=n.getModel("splitLine"),d=n.getModel("splitArea"),h=u.getModel("lineStyle"),f=d.getModel("areaStyle"),g=u.get("show"),p=d.get("show"),v=h.get("color"),b=f.get("color"),_=isArray$1(v)?v:[v],w=isArray$1(b)?b:[b],x=[],S=[];function C(re,ae,ue){var ce=ue%ae.length;return re[ce]=re[ce]||[],ce}if(c==="circle")for(var T=l[0].getTicksCoords(),R=a.cx,A=a.cy,M=0;M<T.length;M++){if(g){var D=C(x,_,M);x[D].push(new Circle({shape:{cx:R,cy:A,r:T[M].coord}}))}if(p&&M<T.length-1){var D=C(S,w,M);S[D].push(new Ring({shape:{cx:R,cy:A,r0:T[M].coord,r:T[M+1].coord}}))}}else for(var O,H=map$1(l,function(re,ae){var ue=re.getTicksCoords();return O=O==null?ue.length-1:Math.min(ue.length-1,O),map$1(ue,function(ce){return a.coordToPoint(ce.coord,ae)})}),j=[],M=0;M<=O;M++){for(var q=[],Y=0;Y<l.length;Y++)q.push(H[Y][M]);if(q[0]?q.push(q[0].slice()):process.env.NODE_ENV!=="production"&&console.error("Can't draw value axis "+M),g){var D=C(x,_,M);x[D].push(new Polyline$1({shape:{points:q}}))}if(p&&j){var D=C(S,w,M-1);S[D].push(new Polygon({shape:{points:q.concat(j)}}))}j=q.slice().reverse()}var ee=h.getLineStyle(),te=f.getAreaStyle();each$f(S,function(re,ae){this.group.add(mergePath(re,{style:defaults({stroke:"none",fill:w[ae%w.length]},te),silent:!0}))},this),each$f(x,function(re,ae){this.group.add(mergePath(re,{style:defaults({fill:"none",stroke:_[ae%_.length]},ee),silent:!0}))},this)},o.type="radar",o}(ComponentView),IndicatorAxis=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this,n,a,l)||this;return c.type="value",c.angle=0,c.name="",c}return o}(Axis),Radar=function(){function s(o,n,a){this.dimensions=[],this._model=o,this._indicatorAxes=map$1(o.getIndicatorModels(),function(l,c){var u="indicator_"+c,d=new IndicatorAxis(u,new IntervalScale);return d.name=l.get("name"),d.model=l,l.axis=d,this.dimensions.push(u),d},this),this.resize(o,a)}return s.prototype.getIndicatorAxes=function(){return this._indicatorAxes},s.prototype.dataToPoint=function(o,n){var a=this._indicatorAxes[n];return this.coordToPoint(a.dataToCoord(o),n)},s.prototype.coordToPoint=function(o,n){var a=this._indicatorAxes[n],l=a.angle,c=this.cx+o*Math.cos(l),u=this.cy-o*Math.sin(l);return[c,u]},s.prototype.pointToData=function(o){var n=o[0]-this.cx,a=o[1]-this.cy,l=Math.sqrt(n*n+a*a);n/=l,a/=l;for(var c=Math.atan2(-a,n),u=1/0,d,h=-1,f=0;f<this._indicatorAxes.length;f++){var g=this._indicatorAxes[f],p=Math.abs(c-g.angle);p<u&&(d=g,h=f,u=p)}return[h,+(d&&d.coordToData(l))]},s.prototype.resize=function(o,n){var a=o.get("center"),l=n.getWidth(),c=n.getHeight(),u=Math.min(l,c)/2;this.cx=parsePercent(a[0],l),this.cy=parsePercent(a[1],c),this.startAngle=o.get("startAngle")*Math.PI/180;var d=o.get("radius");(isString$2(d)||isNumber(d))&&(d=[0,d]),this.r0=parsePercent(d[0],u),this.r=parsePercent(d[1],u),each$f(this._indicatorAxes,function(h,f){h.setExtent(this.r0,this.r);var g=this.startAngle+f*Math.PI*2/this._indicatorAxes.length;g=Math.atan2(Math.sin(g),Math.cos(g)),h.angle=g},this)},s.prototype.update=function(o,n){var a=this._indicatorAxes,l=this._model;each$f(a,function(d){d.scale.setExtent(1/0,-1/0)}),o.eachSeriesByType("radar",function(d,h){if(!(d.get("coordinateSystem")!=="radar"||o.getComponent("radar",d.get("radarIndex"))!==l)){var f=d.getData();each$f(a,function(g){g.scale.unionExtentFromData(f,f.mapDimension(g.dim))})}},this);var c=l.get("splitNumber"),u=new IntervalScale;u.setExtent(0,c),u.setInterval(1),each$f(a,function(d,h){alignScaleTicks(d.scale,d.model,u)})},s.prototype.convertToPixel=function(o,n,a){return console.warn("Not implemented."),null},s.prototype.convertFromPixel=function(o,n,a){return console.warn("Not implemented."),null},s.prototype.containPoint=function(o){return console.warn("Not implemented."),!1},s.create=function(o,n){var a=[];return o.eachComponent("radar",function(l){var c=new s(l,o,n);a.push(c),l.coordinateSystem=c}),o.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=a[l.get("radarIndex")||0])}),a},s.dimensions=[],s}();function install$L(s){s.registerCoordinateSystem("radar",Radar),s.registerComponentModel(RadarModel),s.registerComponentView(RadarView),s.registerVisual({seriesType:"radar",reset:function(o){var n=o.getData();n.each(function(a){n.setItemVisual(a,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function install$K(s){use(install$L),s.registerChartView(RadarView$1),s.registerSeriesModel(RadarSeriesModel),s.registerLayout(radarLayout),s.registerProcessor(dataFilter$1("radar")),s.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(s,o,n){var a=getStore(s);a[o]=n}function release(s,o,n){var a=getStore(s),l=a[o];l===n&&(a[o]=null)}function isTaken(s,o){return!!getStore(s)[o]}function getStore(s){return s[ATTR]||(s[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop$1);var RoamController=function(s){__extends$1(o,s);function o(n){var a=s.call(this)||this;a._zr=n;var l=bind$1(a._mousedownHandler,a),c=bind$1(a._mousemoveHandler,a),u=bind$1(a._mouseupHandler,a),d=bind$1(a._mousewheelHandler,a),h=bind$1(a._pinchHandler,a);return a.enable=function(f,g){this.disable(),this._opt=defaults(clone$4(g)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),f==null&&(f=!0),(f===!0||f==="move"||f==="pan")&&(n.on("mousedown",l),n.on("mousemove",c),n.on("mouseup",u)),(f===!0||f==="scale"||f==="zoom")&&(n.on("mousewheel",d),n.on("pinch",h))},a.disable=function(){n.off("mousedown",l),n.off("mousemove",c),n.off("mouseup",u),n.off("mousewheel",d),n.off("pinch",h)},a}return o.prototype.isDragging=function(){return this._dragging},o.prototype.isPinching=function(){return this._pinching},o.prototype.setPointerChecker=function(n){this.pointerChecker=n},o.prototype.dispose=function(){this.disable()},o.prototype._mousedownHandler=function(n){if(!isMiddleOrRightButtonOnMouseUpDown(n)){for(var a=n.target;a;){if(a.draggable)return;a=a.__hostTarget||a.parent}var l=n.offsetX,c=n.offsetY;this.pointerChecker&&this.pointerChecker(n,l,c)&&(this._x=l,this._y=c,this._dragging=!0)}},o.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var a=n.offsetX,l=n.offsetY,c=this._x,u=this._y,d=a-c,h=l-u;this._x=a,this._y=l,this._opt.preventDefaultMouseMove&&stop(n.event),trigger$1(this,"pan","moveOnMouseMove",n,{dx:d,dy:h,oldX:c,oldY:u,newX:a,newY:l,isAvailableBehavior:null})}},o.prototype._mouseupHandler=function(n){isMiddleOrRightButtonOnMouseUpDown(n)||(this._dragging=!1)},o.prototype._mousewheelHandler=function(n){var a=isAvailableBehavior("zoomOnMouseWheel",n,this._opt),l=isAvailableBehavior("moveOnMouseWheel",n,this._opt),c=n.wheelDelta,u=Math.abs(c),d=n.offsetX,h=n.offsetY;if(!(c===0||!a&&!l)){if(a){var f=u>3?1.4:u>1?1.2:1.1,g=c>0?f:1/f;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",n,{scale:g,originX:d,originY:h,isAvailableBehavior:null})}if(l){var p=Math.abs(c),v=(c>0?1:-1)*(p>3?.4:p>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:v,originX:d,originY:h,isAvailableBehavior:null})}}},o.prototype._pinchHandler=function(n){if(!isTaken(this._zr,"globalPan")){var a=n.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,n,{scale:a,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},o}(Eventful);function checkPointerAndTrigger(s,o,n,a,l){s.pointerChecker&&s.pointerChecker(a,l.originX,l.originY)&&(stop(a.event),trigger$1(s,o,n,a,l))}function trigger$1(s,o,n,a,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,n,a),s.trigger(o,l)}function isAvailableBehavior(s,o,n){var a=n[s];return!s||a&&(!isString$2(a)||o.event[a+"Key"])}function updateViewOnPan(s,o,n){var a=s.target;a.x+=o,a.y+=n,a.dirty()}function updateViewOnZoom(s,o,n,a){var l=s.target,c=s.zoomLimit,u=s.zoom=s.zoom||1;if(u*=o,c){var d=c.min||0,h=c.max||1/0;u=Math.max(Math.min(h,u),d)}var f=u/s.zoom;s.zoom=u,l.x-=(n-l.x)*(f-1),l.y-=(a-l.y)*(f-1),l.scaleX*=f,l.scaleY*=f,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(s,o,n){var a=o.getComponentByElement(s.topTarget),l=a&&a.coordinateSystem;return a&&a!==n&&!IRRELEVANT_EXCLUDES.hasOwnProperty(a.mainType)&&l&&l.model!==n}function parseXML(s){if(isString$2(s)){var o=new DOMParser;s=o.parseFromString(s,"text/xml")}var n=s;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function s(){this._defs={},this._root=null}return s.prototype.parse=function(o,n){n=n||{};var a=parseXML(o);if(process.env.NODE_ENV!=="production"&&!a)throw new Error("Illegal svg");this._defsUsePending=[];var l=new Group$3;this._root=l;var c=[],u=a.getAttribute("viewBox")||"",d=parseFloat(a.getAttribute("width")||n.width),h=parseFloat(a.getAttribute("height")||n.height);isNaN(d)&&(d=null),isNaN(h)&&(h=null),parseAttributes(a,l,null,!0,!1);for(var f=a.firstChild;f;)this._parseNode(f,l,c,null,!1,!1),f=f.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var g,p;if(u){var v=splitNumberSequence(u);v.length>=4&&(g={x:parseFloat(v[0]||0),y:parseFloat(v[1]||0),width:parseFloat(v[2]),height:parseFloat(v[3])})}if(g&&d!=null&&h!=null&&(p=makeViewBoxTransform(g,{x:0,y:0,width:d,height:h}),!n.ignoreViewBox)){var b=l;l=new Group$3,l.add(b),b.scaleX=b.scaleY=p.scale,b.x=p.x,b.y=p.y}return!n.ignoreRootClip&&d!=null&&h!=null&&l.setClipPath(new Rect$2({shape:{x:0,y:0,width:d,height:h}})),{root:l,width:d,height:h,viewBoxRect:g,viewBoxTransform:p,named:c}},s.prototype._parseNode=function(o,n,a,l,c,u){var d=o.nodeName.toLowerCase(),h,f=l;if(d==="defs"&&(c=!0),d==="text"&&(u=!0),d==="defs"||d==="switch")h=n;else{if(!c){var g=nodeParsers[d];if(g&&hasOwn(nodeParsers,d)){h=g.call(this,o,n);var p=o.getAttribute("name");if(p){var v={name:p,namedFrom:null,svgNodeTagLower:d,el:h};a.push(v),d==="g"&&(f=v)}else l&&a.push({name:l.name,namedFrom:l,svgNodeTagLower:d,el:h});n.add(h)}}var b=paintServerParsers[d];if(b&&hasOwn(paintServerParsers,d)){var _=b.call(this,o),w=o.getAttribute("id");w&&(this._defs[w]=_)}}if(h&&h.isGroup)for(var x=o.firstChild;x;)x.nodeType===1?this._parseNode(x,h,a,f,c,u):x.nodeType===3&&u&&this._parseText(x,h),x=x.nextSibling},s.prototype._parseText=function(o,n){var a=new TSpan({style:{text:o.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),applyTextAlignment(a,n);var l=a.style,c=l.fontSize;c&&c<9&&(l.fontSize=9,a.scaleX*=c/9,a.scaleY*=c/9);var u=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=u;var d=a.getBoundingRect();return this._textX+=d.width,n.add(a),a},s.internalField=function(){nodeParsers={g:function(o,n){var a=new Group$3;return inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),a},rect:function(o,n){var a=new Rect$2;return inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),a.setShape({x:parseFloat(o.getAttribute("x")||"0"),y:parseFloat(o.getAttribute("y")||"0"),width:parseFloat(o.getAttribute("width")||"0"),height:parseFloat(o.getAttribute("height")||"0")}),a.silent=!0,a},circle:function(o,n){var a=new Circle;return inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(o.getAttribute("cx")||"0"),cy:parseFloat(o.getAttribute("cy")||"0"),r:parseFloat(o.getAttribute("r")||"0")}),a.silent=!0,a},line:function(o,n){var a=new Line$1;return inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),a.setShape({x1:parseFloat(o.getAttribute("x1")||"0"),y1:parseFloat(o.getAttribute("y1")||"0"),x2:parseFloat(o.getAttribute("x2")||"0"),y2:parseFloat(o.getAttribute("y2")||"0")}),a.silent=!0,a},ellipse:function(o,n){var a=new Ellipse;return inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),a.setShape({cx:parseFloat(o.getAttribute("cx")||"0"),cy:parseFloat(o.getAttribute("cy")||"0"),rx:parseFloat(o.getAttribute("rx")||"0"),ry:parseFloat(o.getAttribute("ry")||"0")}),a.silent=!0,a},polygon:function(o,n){var a=o.getAttribute("points"),l;a&&(l=parsePoints(a));var c=new Polygon({shape:{points:l||[]},silent:!0});return inheritStyle(n,c),parseAttributes(o,c,this._defsUsePending,!1,!1),c},polyline:function(o,n){var a=o.getAttribute("points"),l;a&&(l=parsePoints(a));var c=new Polyline$1({shape:{points:l||[]},silent:!0});return inheritStyle(n,c),parseAttributes(o,c,this._defsUsePending,!1,!1),c},image:function(o,n){var a=new ZRImage;return inheritStyle(n,a),parseAttributes(o,a,this._defsUsePending,!1,!1),a.setStyle({image:o.getAttribute("xlink:href")||o.getAttribute("href"),x:+o.getAttribute("x"),y:+o.getAttribute("y"),width:+o.getAttribute("width"),height:+o.getAttribute("height")}),a.silent=!0,a},text:function(o,n){var a=o.getAttribute("x")||"0",l=o.getAttribute("y")||"0",c=o.getAttribute("dx")||"0",u=o.getAttribute("dy")||"0";this._textX=parseFloat(a)+parseFloat(c),this._textY=parseFloat(l)+parseFloat(u);var d=new Group$3;return inheritStyle(n,d),parseAttributes(o,d,this._defsUsePending,!1,!0),d},tspan:function(o,n){var a=o.getAttribute("x"),l=o.getAttribute("y");a!=null&&(this._textX=parseFloat(a)),l!=null&&(this._textY=parseFloat(l));var c=o.getAttribute("dx")||"0",u=o.getAttribute("dy")||"0",d=new Group$3;return inheritStyle(n,d),parseAttributes(o,d,this._defsUsePending,!1,!0),this._textX+=parseFloat(c),this._textY+=parseFloat(u),d},path:function(o,n){var a=o.getAttribute("d")||"",l=createFromString(a);return inheritStyle(n,l),parseAttributes(o,l,this._defsUsePending,!1,!1),l.silent=!0,l}}}(),s}(),paintServerParsers={lineargradient:function(s){var o=parseInt(s.getAttribute("x1")||"0",10),n=parseInt(s.getAttribute("y1")||"0",10),a=parseInt(s.getAttribute("x2")||"10",10),l=parseInt(s.getAttribute("y2")||"0",10),c=new LinearGradient(o,n,a,l);return parsePaintServerUnit(s,c),parseGradientColorStops(s,c),c},radialgradient:function(s){var o=parseInt(s.getAttribute("cx")||"0",10),n=parseInt(s.getAttribute("cy")||"0",10),a=parseInt(s.getAttribute("r")||"0",10),l=new RadialGradient(o,n,a);return parsePaintServerUnit(s,l),parseGradientColorStops(s,l),l}};function parsePaintServerUnit(s,o){var n=s.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(o.global=!0)}function parseGradientColorStops(s,o){for(var n=s.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var a=n.getAttribute("offset"),l=void 0;a&&a.indexOf("%")>0?l=parseInt(a,10)/100:a?l=parseFloat(a):l=0;var c={};parseInlineStyle(n,c,c);var u=c.stopColor||n.getAttribute("stop-color")||"#000000";o.colorStops.push({offset:l,color:u})}n=n.nextSibling}}function inheritStyle(s,o){s&&s.__inheritedStyle&&(o.__inheritedStyle||(o.__inheritedStyle={}),defaults(o.__inheritedStyle,s.__inheritedStyle))}function parsePoints(s){for(var o=splitNumberSequence(s),n=[],a=0;a<o.length;a+=2){var l=parseFloat(o[a]),c=parseFloat(o[a+1]);n.push([l,c])}return n}function parseAttributes(s,o,n,a,l){var c=o,u=c.__inheritedStyle=c.__inheritedStyle||{},d={};s.nodeType===1&&(parseTransformAttribute(s,o),parseInlineStyle(s,u,d),a||parseAttributeStyle(s,u,d)),c.style=c.style||{},u.fill!=null&&(c.style.fill=getFillStrokeStyle(c,"fill",u.fill,n)),u.stroke!=null&&(c.style.stroke=getFillStrokeStyle(c,"stroke",u.stroke,n)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(h){u[h]!=null&&(c.style[h]=parseFloat(u[h]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(h){u[h]!=null&&(c.style[h]=u[h])}),l&&(c.__selfStyle=d),u.lineDash&&(c.style.lineDash=map$1(splitNumberSequence(u.lineDash),function(h){return parseFloat(h)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(c.invisible=!0),u.display==="none"&&(c.ignore=!0)}function applyTextAlignment(s,o){var n=o.__selfStyle;if(n){var a=n.textBaseline,l=a;!a||a==="auto"||a==="baseline"?l="alphabetic":a==="before-edge"||a==="text-before-edge"?l="top":a==="after-edge"||a==="text-after-edge"?l="bottom":(a==="central"||a==="mathematical")&&(l="middle"),s.style.textBaseline=l}var c=o.__inheritedStyle;if(c){var u=c.textAlign,d=u;u&&(u==="middle"&&(d="center"),s.style.textAlign=d)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(s,o,n,a){var l=n&&n.match(urlRegex);if(l){var c=trim$1(l[1]);a.push([s,o,c]);return}return n==="none"&&(n=null),n}function applyDefs(s,o){for(var n=0;n<o.length;n++){var a=o[n];a[0].style[a[1]]=s[a[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(s){return s.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(s,o){var n=s.getAttribute("transform");if(n){n=n.replace(/,/g," ");var a=[],l=null;n.replace(transformRegex,function(p,v,b){return a.push(v,b),""});for(var c=a.length-1;c>0;c-=2){var u=a[c],d=a[c-1],h=splitNumberSequence(u);switch(l=l||create$1(),d){case"translate":translate(l,l,[parseFloat(h[0]),parseFloat(h[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(h[0]),parseFloat(h[1]||h[0])]);break;case"rotate":rotate(l,l,-parseFloat(h[0])*DEGREE_TO_ANGLE,[parseFloat(h[1]||"0"),parseFloat(h[2]||"0")]);break;case"skewX":var f=Math.tan(parseFloat(h[0])*DEGREE_TO_ANGLE);mul(l,[1,0,f,1,0,0],l);break;case"skewY":var g=Math.tan(parseFloat(h[0])*DEGREE_TO_ANGLE);mul(l,[1,g,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(h[0]),l[1]=parseFloat(h[1]),l[2]=parseFloat(h[2]),l[3]=parseFloat(h[3]),l[4]=parseFloat(h[4]),l[5]=parseFloat(h[5]);break}}o.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(s,o,n){var a=s.getAttribute("style");if(a){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(a))!=null;){var c=l[1],u=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,c)?INHERITABLE_STYLE_ATTRIBUTES_MAP[c]:null;u&&(o[u]=l[2]);var d=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,c)?SELF_STYLE_ATTRIBUTES_MAP[c]:null;d&&(n[d]=l[2])}}}function parseAttributeStyle(s,o,n){for(var a=0;a<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;a++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[a],c=s.getAttribute(l);c!=null&&(o[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=c)}for(var a=0;a<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;a++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[a],c=s.getAttribute(l);c!=null&&(n[SELF_STYLE_ATTRIBUTES_MAP[l]]=c)}}function makeViewBoxTransform(s,o){var n=o.width/s.width,a=o.height/s.height,l=Math.min(n,a);return{scale:l,x:-(s.x+s.width/2)*l+(o.x+o.width/2),y:-(s.y+s.height/2)*l+(o.y+o.height/2)}}function parseSVG(s,o){var n=new SVGParser;return n.parse(s,o)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function s(o,n){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=o,this._parsedXML=parseXML(n)}return s.prototype.load=function(){var o=this._firstGraphic;if(!o){o=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(o),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=createRegions(o.named),a=n.regions,l=n.regionsMap;this._regions=a,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},s.prototype._buildGraphic=function(o){var n,a;try{n=o&&parseSVG(o,{ignoreViewBox:!0,ignoreRootClip:!0})||{},a=n.root,assert(a!=null)}catch(x){throw new Error(`Invalid svg format
`+x.message)}var l=new Group$3;l.add(a),l.isGeoSVGGraphicRoot=!0;var c=n.width,u=n.height,d=n.viewBoxRect,h=this._boundingRect;if(!h){var f=void 0,g=void 0,p=void 0,v=void 0;if(c!=null?(f=0,p=c):d&&(f=d.x,p=d.width),u!=null?(g=0,v=u):d&&(g=d.y,v=d.height),f==null||g==null){var b=a.getBoundingRect();f==null&&(f=b.x,p=b.width),g==null&&(g=b.y,v=b.height)}h=this._boundingRect=new BoundingRect(f,g,p,v)}if(d){var _=makeViewBoxTransform(d,h);a.scaleX=a.scaleY=_.scale,a.x=_.x,a.y=_.y}l.setClipPath(new Rect$2({shape:h.plain()}));var w=[];return each$f(n.named,function(x){REGION_AVAILABLE_SVG_TAG_MAP.get(x.svgNodeTagLower)!=null&&(w.push(x),setSilent(x.el))}),{root:l,boundingRect:h,named:w}},s.prototype.useGraphic=function(o){var n=this._usedGraphicMap,a=n.get(o);return a||(a=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(o,a),a)},s.prototype.freeGraphic=function(o){var n=this._usedGraphicMap,a=n.get(o);a&&(n.removeKey(o),this._freedGraphics.push(a))},s}();function setSilent(s){s.silent=!1,s.isGroup&&s.traverse(function(o){o.silent=!1})}function createRegions(s){var o=[],n=createHashMap();return each$f(s,function(a){if(a.namedFrom==null){var l=new GeoSVGRegion(a.name,a.el);o.push(l),n.set(a.name,l)}}),{regions:o,regionsMap:n}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(s,o){if(s==="china"){for(var n=0;n<o.length;n++)if(o[n].name===nanhaiName)return;o.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(a){return{type:"polygon",exterior:a}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(s,o){if(s==="china"){var n=coordsOffsetMap[o.name];if(n){var a=o.getCenter();a[0]+=n[0]/10.5,a[1]+=-n[1]/(10.5/.75),o.setCenter(a)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(s,o){s==="china"&&o.name==="台湾"&&o.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function s(o,n,a){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=o,this._specialAreas=a,this._geoJSON=parseInput(n)}return s.prototype.load=function(o,n){n=n||DEFAULT_NAME_PROPERTY;var a=this._parsedMap.get(n);if(!a){var l=this._parseToRegions(n);a=this._parsedMap.set(n,{regions:l,boundingRect:calculateBoundingRect(l)})}var c=createHashMap(),u=[];return each$f(a.regions,function(d){var h=d.name;o&&hasOwn(o,h)&&(d=d.cloneShallow(h=o[h])),u.push(d),c.set(h,d)}),{regions:u,boundingRect:a.boundingRect||new BoundingRect(0,0,0,0),regionsMap:c}},s.prototype._parseToRegions=function(o){var n=this._mapName,a=this._geoJSON,l;try{l=a?parseGeoJSON(a,o):[]}catch(c){throw new Error(`Invalid geoJson format
`+c.message)}return fixNanhai(n,l),each$f(l,function(c){var u=c.name;fixTextCoords(n,c),fixDiaoyuIsland(n,c);var d=this._specialAreas&&this._specialAreas[u];d&&c.transformTo(d.left,d.top,d.width,d.height)},this),l},s.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},s}();function calculateBoundingRect(s){for(var o,n=0;n<s.length;n++){var a=s[n].getBoundingRect();o=o||a.clone(),o.union(a)}return o}function parseInput(s){return isString$2(s)?typeof JSON<"u"&&JSON.parse?JSON.parse(s):new Function("return ("+s+");")():s}var storage=createHashMap();const geoSourceManager={registerMap:function(s,o,n){if(o.svg){var a=new GeoSVGResource(s,o.svg);storage.set(s,a)}else{var l=o.geoJson||o.geoJSON;l&&!o.features?n=o.specialAreas:l=o;var a=new GeoJSONResource(s,l,n);storage.set(s,a)}},getGeoResource:function(s){return storage.get(s)},getMapForUser:function(s){var o=storage.get(s);return o&&o.type==="geoJSON"&&o.getMapForUser()},load:function(s,o,n){var a=storage.get(s);if(!a){process.env.NODE_ENV!=="production"&&console.error("Map "+s+" not exists. The GeoJSON of the map must be provided.");return}return a.load(o,n)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(s){var o=s.getItemStyle(),n=s.get("areaColor");return n!=null&&(o.fill=n),o}function fixLineStyle(s){var o=s.style;o&&(o.stroke=o.stroke||o.fill,o.fill=null)}var MapDraw=function(){function s(o){var n=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(o.getZr()),this._controllerHost={target:n},this.group=n,n.add(this._regionsGroup=new Group$3),n.add(this._svgGroup=new Group$3)}return s.prototype.draw=function(o,n,a,l,c){var u=o.mainType==="geo",d=o.getData&&o.getData();u&&n.eachComponent({mainType:"series",subType:"map"},function(S){!d&&S.getHostGeoModel()===o&&(d=S.getData())});var h=o.coordinateSystem,f=this._regionsGroup,g=this.group,p=h.getTransformInfo(),v=p.raw,b=p.roam,_=!f.childAt(0)||c;_?(g.x=b.x,g.y=b.y,g.scaleX=b.scaleX,g.scaleY=b.scaleY,g.dirty()):updateProps$1(g,b,o);var w=d&&d.getVisual("visualMeta")&&d.getVisual("visualMeta").length>0,x={api:a,geo:h,mapOrGeoModel:o,data:d,isVisualEncodedByVisualMap:w,isGeo:u,transformInfoRaw:v};h.resourceType==="geoJSON"?this._buildGeoJSON(x):h.resourceType==="geoSVG"&&this._buildSVG(x),this._updateController(o,n,a),this._updateMapSelectHandler(o,f,a,l)},s.prototype._buildGeoJSON=function(o){var n=this._regionsGroupByName=createHashMap(),a=createHashMap(),l=this._regionsGroup,c=o.transformInfoRaw,u=o.mapOrGeoModel,d=o.data,h=o.geo.projection,f=h&&h.stream;function g(b,_){return _&&(b=_(b)),b&&[b[0]*c.scaleX+c.x,b[1]*c.scaleY+c.y]}function p(b){for(var _=[],w=!f&&h&&h.project,x=0;x<b.length;++x){var S=g(b[x],w);S&&_.push(S)}return _}function v(b){return{shape:{points:p(b)}}}l.removeAll(),each$f(o.geo.regions,function(b){var _=b.name,w=n.get(_),x=a.get(_)||{},S=x.dataIdx,C=x.regionModel;if(!w){w=n.set(_,new Group$3),l.add(w),S=d?d.indexOfName(_):null,C=o.isGeo?u.getRegionModel(_):d?d.getItemModel(S):null;var T=C.get("silent",!0);T!=null&&(w.silent=T),a.set(_,{dataIdx:S,regionModel:C})}var R=[],A=[];each$f(b.geometries,function(O){if(O.type==="polygon"){var H=[O.exterior].concat(O.interiors||[]);f&&(H=projectPolys(H,f)),each$f(H,function(q){R.push(new Polygon(v(q)))})}else{var j=O.points;f&&(j=projectPolys(j,f,!0)),each$f(j,function(q){A.push(new Polyline$1(v(q)))})}});var M=g(b.getCenter(),h&&h.project);function D(O,H){if(O.length){var j=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:O}});w.add(j),applyOptionStyleForRegion(o,j,S,C),resetLabelForRegion(o,j,_,C,u,S,M),H&&(fixLineStyle(j),each$f(j.states,fixLineStyle))}}D(R),D(A,!0)}),n.each(function(b,_){var w=a.get(_),x=w.dataIdx,S=w.regionModel;resetEventTriggerForRegion(o,b,_,S,u,x),resetTooltipForRegion(o,b,_,S,u),resetStateTriggerForRegion(o,b,_,S,u)},this)},s.prototype._buildSVG=function(o){var n=o.geo.map,a=o.transformInfoRaw;this._svgGroup.x=a.x,this._svgGroup.y=a.y,this._svgGroup.scaleX=a.scaleX,this._svgGroup.scaleY=a.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var l=this._svgDispatcherMap=createHashMap(),c=!1;each$f(this._svgGraphicRecord.named,function(u){var d=u.name,h=o.mapOrGeoModel,f=o.data,g=u.svgNodeTagLower,p=u.el,v=f?f.indexOfName(d):null,b=h.getRegionModel(d);OPTION_STYLE_ENABLED_TAG_MAP.get(g)!=null&&p instanceof Displayable&&applyOptionStyleForRegion(o,p,v,b),p instanceof Displayable&&(p.culling=!0);var _=b.get("silent",!0);if(_!=null&&(p.silent=_),p.z2EmphasisLift=0,!u.namedFrom&&(LABEL_HOST_MAP.get(g)!=null&&resetLabelForRegion(o,p,d,b,h,v,null),resetEventTriggerForRegion(o,p,d,b,h,v),resetTooltipForRegion(o,p,d,b,h),STATE_TRIGGER_TAG_MAP.get(g)!=null)){var w=resetStateTriggerForRegion(o,p,d,b,h);w==="self"&&(c=!0);var x=l.get(d)||l.set(d,[]);x.push(p)}},this),this._enableBlurEntireSVG(c,o)},s.prototype._enableBlurEntireSVG=function(o,n){if(o&&n.isGeo){var a=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=a.opacity;this._svgGraphicRecord.root.traverse(function(c){if(!c.isGroup){setDefaultStateProxy(c);var u=c.ensureState("blur").style||{};u.opacity==null&&l!=null&&(u.opacity=l),c.ensureState("emphasis")}})}},s.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},s.prototype.findHighDownDispatchers=function(o,n){if(o==null)return[];var a=n.coordinateSystem;if(a.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var c=l.get(o);return c?[c]:[]}}else if(a.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(o)||[]},s.prototype._svgResourceChanged=function(o){return this._svgMapName!==o},s.prototype._useSVG=function(o){var n=geoSourceManager.getGeoResource(o);if(n&&n.type==="geoSVG"){var a=n.useGraphic(this.uid);this._svgGroup.add(a.root),this._svgGraphicRecord=a,this._svgMapName=o}},s.prototype._freeSVG=function(){var o=this._svgMapName;if(o!=null){var n=geoSourceManager.getGeoResource(o);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},s.prototype._updateController=function(o,n,a){var l=o.coordinateSystem,c=this._controller,u=this._controllerHost;u.zoomLimit=o.get("scaleLimit"),u.zoom=l.getZoom(),c.enable(o.get("roam")||!1);var d=o.mainType;function h(){var f={type:"geoRoam",componentType:d};return f[d+"Id"]=o.id,f}c.off("pan").on("pan",function(f){this._mouseDownFlag=!1,updateViewOnPan(u,f.dx,f.dy),a.dispatchAction(extend(h(),{dx:f.dx,dy:f.dy,animation:{duration:0}}))},this),c.off("zoom").on("zoom",function(f){this._mouseDownFlag=!1,updateViewOnZoom(u,f.scale,f.originX,f.originY),a.dispatchAction(extend(h(),{totalZoom:u.zoom,zoom:f.scale,originX:f.originX,originY:f.originY,animation:{duration:0}}))},this),c.setPointerChecker(function(f,g,p){return l.containPoint([g,p])&&!onIrrelevantElement(f,a,o)})},s.prototype.resetForLabelLayout=function(){this.group.traverse(function(o){var n=o.getTextContent();n&&(n.ignore=mapLabelRaw(n).ignore)})},s.prototype._updateMapSelectHandler=function(o,n,a,l){var c=this;n.off("mousedown"),n.off("click"),o.get("selectedMode")&&(n.on("mousedown",function(){c._mouseDownFlag=!0}),n.on("click",function(u){c._mouseDownFlag&&(c._mouseDownFlag=!1)}))},s}();function applyOptionStyleForRegion(s,o,n,a){var l=a.getModel("itemStyle"),c=a.getModel(["emphasis","itemStyle"]),u=a.getModel(["blur","itemStyle"]),d=a.getModel(["select","itemStyle"]),h=getFixedItemStyle(l),f=getFixedItemStyle(c),g=getFixedItemStyle(d),p=getFixedItemStyle(u),v=s.data;if(v){var b=v.getItemVisual(n,"style"),_=v.getItemVisual(n,"decal");s.isVisualEncodedByVisualMap&&b.fill&&(h.fill=b.fill),_&&(h.decal=createOrUpdatePatternFromDecal(_,s.api))}o.setStyle(h),o.style.strokeNoScale=!0,o.ensureState("emphasis").style=f,o.ensureState("select").style=g,o.ensureState("blur").style=p,setDefaultStateProxy(o)}function resetLabelForRegion(s,o,n,a,l,c,u){var d=s.data,h=s.isGeo,f=d&&isNaN(d.get(d.mapDimension("value"),c)),g=d&&d.getItemLayout(c);if(h||f||g&&g.showLabel){var p=h?n:c,v=void 0;(!d||c>=0)&&(v=l);var b=u?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(o,getLabelStatesModels(a),{labelFetcher:v,labelDataIndex:p,defaultText:n},b);var _=o.getTextContent();if(_&&(mapLabelRaw(_).ignore=_.ignore,o.textConfig&&u)){var w=o.getBoundingRect().clone();o.textConfig.layoutRect=w,o.textConfig.position=[(u[0]-w.x)/w.width*100+"%",(u[1]-w.y)/w.height*100+"%"]}o.disableLabelAnimation=!0}else o.removeTextContent(),o.removeTextConfig(),o.disableLabelAnimation=null}function resetEventTriggerForRegion(s,o,n,a,l,c){s.data?s.data.setItemGraphicEl(c,o):getECData(o).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:n,region:a&&a.option||{}}}function resetTooltipForRegion(s,o,n,a,l){s.data||setTooltipConfig({el:o,componentModel:l,itemName:n,itemTooltipOption:a.get("tooltip")})}function resetStateTriggerForRegion(s,o,n,a,l){o.highDownSilentOnTouch=!!l.get("selectedMode");var c=a.getModel("emphasis"),u=c.get("focus");return toggleHoverEmphasis(o,u,c.get("blurScope"),c.get("disabled")),s.isGeo&&enableComponentHighDownFeatures(o,l,n),u}function projectPolys(s,o,n){var a=[],l;function c(){l=[]}function u(){l.length&&(a.push(l),l=[])}var d=o({polygonStart:c,polygonEnd:u,lineStart:c,lineEnd:u,point:function(h,f){isFinite(h)&&isFinite(f)&&l.push([h,f])},sphere:function(){}});return!n&&d.polygonStart(),each$f(s,function(h){d.lineStart();for(var f=0;f<h.length;f++)d.point(h[f][0],h[f][1]);d.lineEnd()}),!n&&d.polygonEnd(),a}var MapView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l,c){if(!(c&&c.type==="mapToggleSelect"&&c.from===this.uid)){var u=this.group;if(u.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&c&&c.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),c&&c.type==="geoRoam"&&c.componentType==="series"&&c.seriesId===n.id){var d=this._mapDraw;d&&u.add(d.group)}else if(n.needsDrawMap){var d=this._mapDraw||new MapDraw(l);u.add(d.group),d.draw(n,a,l,this,c),this._mapDraw=d}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&a.getComponent("legend")&&this._renderSymbols(n,a,l)}}},o.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},o.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},o.prototype._renderSymbols=function(n,a,l){var c=n.originalData,u=this.group;c.each(c.mapDimension("value"),function(d,h){if(!isNaN(d)){var f=c.getItemLayout(h);if(!(!f||!f.point)){var g=f.point,p=f.offset,v=new Circle({style:{fill:n.getData().getVisual("style").fill},shape:{cx:g[0]+p*9,cy:g[1],r:3},silent:!0,z2:8+(p?0:Z2_EMPHASIS_LIFT+1)});if(!p){var b=n.mainSeries.getData(),_=c.getName(h),w=b.indexOfName(_),x=c.getItemModel(h),S=x.getModel("label"),C=b.getItemGraphicEl(w);setLabelStyle(v,getLabelStatesModels(x),{labelFetcher:{getFormattedLabel:function(T,R){return n.getFormattedLabel(w,R)}},defaultText:_}),v.disableLabelAnimation=!0,S.get("position")||v.setTextConfig({position:"bottom"}),C.onHoverStateChange=function(T){setStatesFlag(v,T)}}u.add(v)}}})},o.type="map",o}(ChartView),MapSeries=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(a){if(a!=null){var l=this.getData().getName(a),c=this.coordinateSystem,u=c.getRegion(l);return u&&c.dataToPoint(u.getCenter())}},n}return o.prototype.getInitialData=function(n){for(var a=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),c=[],u=0,d=a.count();u<d;u++){var h=a.getName(u);l.set(h,u)}var f=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(f.regions,function(g){var p=g.name,v=l.get(p),b=g.properties&&g.properties.echartsStyle,_;v==null?(_={name:p},c.push(_)):_=a.getRawDataItem(v),b&&merge(_,b)}),a.appendData(c),a},o.prototype.getHostGeoModel=function(){var n=this.option.geoIndex;return n!=null?this.ecModel.getComponent("geo",n):null},o.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},o.prototype.getRawValue=function(n){var a=this.getData();return a.get(a.mapDimension("value"),n)},o.prototype.getRegionModel=function(n){var a=this.getData();return a.getItemModel(a.indexOfName(n))},o.prototype.formatTooltip=function(n,a,l){for(var c=this.getData(),u=this.getRawValue(n),d=c.getName(n),h=this.seriesGroup,f=[],g=0;g<h.length;g++){var p=h[g].originalData.indexOfName(d),v=c.mapDimension("value");isNaN(h[g].originalData.get(v,p))||f.push(h[g].name)}return createTooltipMarkup("section",{header:f.join(", "),noHeader:!f.length,blocks:[createTooltipMarkup("nameValue",{name:d,value:u})]})},o.prototype.setZoom=function(n){this.option.zoom=n},o.prototype.setCenter=function(n){this.option.center=n},o.prototype.getLegendIcon=function(n){var a=n.icon||"roundRect",l=createSymbol$1(a,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return l.setStyle(n.itemStyle),l.style.stroke="none",a.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},o.type="series.map",o.dependencies=["geo"],o.layoutMode="box",o.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},o}(SeriesModel);function dataStatistics(s,o){var n={};return each$f(s,function(a){a.each(a.mapDimension("value"),function(l,c){var u="ec-"+a.getName(c);n[u]=n[u]||[],isNaN(l)||n[u].push(l)})}),s[0].map(s[0].mapDimension("value"),function(a,l){for(var c="ec-"+s[0].getName(l),u=0,d=1/0,h=-1/0,f=n[c].length,g=0;g<f;g++)d=Math.min(d,n[c][g]),h=Math.max(h,n[c][g]),u+=n[c][g];var p;return o==="min"?p=d:o==="max"?p=h:o==="average"?p=u/f:p=u,f===0?NaN:p})}function mapDataStatistic(s){var o={};s.eachSeriesByType("map",function(n){var a=n.getHostGeoModel(),l=a?"o"+a.id:"i"+n.getMapType();(o[l]=o[l]||[]).push(n)}),each$f(o,function(n,a){for(var l=dataStatistics(map$1(n,function(u){return u.getData()}),n[0].get("mapValueCalculation")),c=0;c<n.length;c++)n[c].originalData=n[c].getData();for(var c=0;c<n.length;c++)n[c].seriesGroup=n,n[c].needsDrawMap=c===0&&!n[c].getHostGeoModel(),n[c].setData(l.cloneShallow()),n[c].mainSeries=n[0]})}function mapSymbolLayout(s){var o={};s.eachSeriesByType("map",function(n){var a=n.getMapType();if(!(n.getHostGeoModel()||o[a])){var l={};each$f(n.seriesGroup,function(u){var d=u.coordinateSystem,h=u.originalData;u.get("showLegendSymbol")&&s.getComponent("legend")&&h.each(h.mapDimension("value"),function(f,g){var p=h.getName(g),v=d.getRegion(p);if(!(!v||isNaN(f))){var b=l[p]||0,_=d.dataToPoint(v.getCenter());l[p]=b+1,h.setItemLayout(g,{point:_,offset:b})}})});var c=n.getData();c.each(function(u){var d=c.getName(u),h=c.getItemLayout(u)||{};h.showLabel=!l[d],c.setItemLayout(u,h)}),o[a]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(s){__extends$1(o,s);function o(n){var a=s.call(this)||this;return a.type="view",a.dimensions=["x","y"],a._roamTransformable=new Transformable,a._rawTransformable=new Transformable,a.name=n,a}return o.prototype.setBoundingRect=function(n,a,l,c){return this._rect=new BoundingRect(n,a,l,c),this._rect},o.prototype.getBoundingRect=function(){return this._rect},o.prototype.setViewRect=function(n,a,l,c){this._transformTo(n,a,l,c),this._viewRect=new BoundingRect(n,a,l,c)},o.prototype._transformTo=function(n,a,l,c){var u=this.getBoundingRect(),d=this._rawTransformable;d.transform=u.calculateTransform(new BoundingRect(n,a,l,c));var h=d.parent;d.parent=null,d.decomposeTransform(),d.parent=h,this._updateTransform()},o.prototype.setCenter=function(n,a){n&&(this._center=[parsePercent(n[0],a.getWidth()),parsePercent(n[1],a.getHeight())],this._updateCenterAndZoom())},o.prototype.setZoom=function(n){n=n||1;var a=this.zoomLimit;a&&(a.max!=null&&(n=Math.min(a.max,n)),a.min!=null&&(n=Math.max(a.min,n))),this._zoom=n,this._updateCenterAndZoom()},o.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),a=n.x+n.width/2,l=n.y+n.height/2;return[a,l]},o.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},o.prototype.getZoom=function(){return this._zoom||1},o.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},o.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),a=this._roamTransformable,l=this.getDefaultCenter(),c=this.getCenter(),u=this.getZoom();c=applyTransform$1([],c,n),l=applyTransform$1([],l,n),a.originX=c[0],a.originY=c[1],a.x=l[0]-c[0],a.y=l[1]-c[1],a.scaleX=a.scaleY=u,this._updateTransform()},o.prototype._updateTransform=function(){var n=this._roamTransformable,a=this._rawTransformable;a.parent=n,n.updateTransform(),a.updateTransform(),copy$1(this.transform||(this.transform=[]),a.transform||create$1()),this._rawTransform=a.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},o.prototype.getTransformInfo=function(){var n=this._rawTransformable,a=this._roamTransformable,l=new Transformable;return l.transform=a.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},o.prototype.getViewRect=function(){return this._viewRect},o.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},o.prototype.dataToPoint=function(n,a,l){var c=a?this._rawTransform:this.transform;return l=l||[],c?v2ApplyTransform(l,n,c):copy$2(l,n)},o.prototype.pointToData=function(n){var a=this.invTransform;return a?v2ApplyTransform([],n,a):[n[0],n[1]]},o.prototype.convertToPixel=function(n,a,l){var c=getCoordSys$4(a);return c===this?c.dataToPoint(l):null},o.prototype.convertFromPixel=function(n,a,l){var c=getCoordSys$4(a);return c===this?c.pointToData(l):null},o.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},o.dimensions=["x","y"],o}(Transformable);function getCoordSys$4(s){var o=s.seriesModel;return o?o.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this,n)||this;c.dimensions=geo2DDimensions,c.type="geo",c._nameCoordMap=createHashMap(),c.map=a;var u=l.projection,d=geoSourceManager.load(a,l.nameMap,l.nameProperty),h=geoSourceManager.getGeoResource(a),f=c.resourceType=h?h.type:null,g=c.regions=d.regions,p=GEO_DEFAULT_PARAMS[h.type];c._regionsMap=d.regionsMap,c.regions=d.regions,process.env.NODE_ENV!=="production"&&u&&(f==="geoSVG"&&(process.env.NODE_ENV!=="production"&&warn("Map "+a+" with SVG source can't use projection. Only GeoJSON source supports projection."),u=null),u.project&&u.unproject||(process.env.NODE_ENV!=="production"&&warn("project and unproject must be both provided in the projeciton."),u=null)),c.projection=u;var v;if(u)for(var b=0;b<g.length;b++){var _=g[b].getBoundingRect(u);v=v||_.clone(),v.union(_)}else v=d.boundingRect;return c.setBoundingRect(v.x,v.y,v.width,v.height),c.aspectScale=u?1:retrieve2(l.aspectScale,p.aspectScale),c._invertLongitute=u?!1:p.invertLongitute,c}return o.prototype._transformTo=function(n,a,l,c){var u=this.getBoundingRect(),d=this._invertLongitute;u=u.clone(),d&&(u.y=-u.y-u.height);var h=this._rawTransformable;h.transform=u.calculateTransform(new BoundingRect(n,a,l,c));var f=h.parent;h.parent=null,h.decomposeTransform(),h.parent=f,d&&(h.scaleY=-h.scaleY),this._updateTransform()},o.prototype.getRegion=function(n){return this._regionsMap.get(n)},o.prototype.getRegionByCoord=function(n){for(var a=this.regions,l=0;l<a.length;l++){var c=a[l];if(c.type==="geoJSON"&&c.contain(n))return a[l]}},o.prototype.addGeoCoord=function(n,a){this._nameCoordMap.set(n,a)},o.prototype.getGeoCoord=function(n){var a=this._regionsMap.get(n);return this._nameCoordMap.get(n)||a&&a.getCenter()},o.prototype.dataToPoint=function(n,a,l){if(isString$2(n)&&(n=this.getGeoCoord(n)),n){var c=this.projection;return c&&(n=c.project(n)),n&&this.projectedToPoint(n,a,l)}},o.prototype.pointToData=function(n){var a=this.projection;return a&&(n=a.unproject(n)),n&&this.pointToProjected(n)},o.prototype.pointToProjected=function(n){return s.prototype.pointToData.call(this,n)},o.prototype.projectedToPoint=function(n,a,l){return s.prototype.dataToPoint.call(this,n,a,l)},o.prototype.convertToPixel=function(n,a,l){var c=getCoordSys$3(a);return c===this?c.dataToPoint(l):null},o.prototype.convertFromPixel=function(n,a,l){var c=getCoordSys$3(a);return c===this?c.pointToData(l):null},o}(View);mixin(Geo,View);function getCoordSys$3(s){var o=s.geoModel,n=s.seriesModel;return o?o.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(s,o){var n=s.get("boundingCoords");if(n!=null){var a=n[0],l=n[1];if(!(isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])))process.env.NODE_ENV!=="production"&&console.error("Invalid boundingCoords");else{var c=this.projection;if(c){var u=a[0],d=a[1],h=l[0],f=l[1];a=[1/0,1/0],l=[-1/0,-1/0];var g=function(M,D,O,H){for(var j=O-M,q=H-D,Y=0;Y<=100;Y++){var ee=Y/100,te=c.project([M+j*ee,D+q*ee]);min$1(a,a,te),max$1(l,l,te)}};g(u,d,h,d),g(h,d,h,f),g(h,f,u,f),g(u,f,h,d)}this.setBoundingRect(a[0],a[1],l[0]-a[0],l[1]-a[1])}}var p=this.getBoundingRect(),v=s.get("layoutCenter"),b=s.get("layoutSize"),_=o.getWidth(),w=o.getHeight(),x=p.width/p.height*this.aspectScale,S=!1,C,T;v&&b&&(C=[parsePercent(v[0],_),parsePercent(v[1],w)],T=parsePercent(b,Math.min(_,w)),!isNaN(C[0])&&!isNaN(C[1])&&!isNaN(T)?S=!0:process.env.NODE_ENV!=="production"&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."));var R;if(S)R={},x>1?(R.width=T,R.height=T/x):(R.height=T,R.width=T*x),R.y=C[1]-R.height/2,R.x=C[0]-R.width/2;else{var A=s.getBoxLayoutParams();A.aspect=x,R=getLayoutRect(A,{width:_,height:w})}this.setViewRect(R.x,R.y,R.width,R.height),this.setCenter(s.get("center"),o),this.setZoom(s.get("zoom"))}function setGeoCoords(s,o){each$f(o.get("geoCoord"),function(n,a){s.addGeoCoord(a,n)})}var GeoCreator=function(){function s(){this.dimensions=geo2DDimensions}return s.prototype.create=function(o,n){var a=[];function l(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}o.eachComponent("geo",function(u,d){var h=u.get("map"),f=new Geo(h+d,h,extend({nameMap:u.get("nameMap")},l(u)));f.zoomLimit=u.get("scaleLimit"),a.push(f),u.coordinateSystem=f,f.model=u,f.resize=resizeGeo,f.resize(u,n)}),o.eachSeries(function(u){var d=u.get("coordinateSystem");if(d==="geo"){var h=u.get("geoIndex")||0;u.coordinateSystem=a[h]}});var c={};return o.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var d=u.getMapType();c[d]=c[d]||[],c[d].push(u)}}),each$f(c,function(u,d){var h=map$1(u,function(g){return g.get("nameMap")}),f=new Geo(d,d,extend({nameMap:mergeAll(h)},l(u[0])));f.zoomLimit=retrieve.apply(null,map$1(u,function(g){return g.get("scaleLimit")})),a.push(f),f.resize=resizeGeo,f.resize(u[0],n),each$f(u,function(g){g.coordinateSystem=f,setGeoCoords(f,g)})}),a},s.prototype.getFilledRegions=function(o,n,a,l){for(var c=(o||[]).slice(),u=createHashMap(),d=0;d<c.length;d++)u.set(c[d].name,c[d]);var h=geoSourceManager.load(n,a,l);return each$f(h.regions,function(f){var g=f.name,p=u.get(g),v=f.properties&&f.properties.echartsStyle;p||(p={name:g},c.push(p)),v&&merge(p,v)}),c},s}(),geoCreator=new GeoCreator,GeoModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a,l){var c=geoSourceManager.getGeoResource(n.map);if(c&&c.type==="geoJSON"){var u=n.itemStyle=n.itemStyle||{};"color"in u||(u.color="#eee")}this.mergeDefaultAndTheme(n,l),defaultEmphasis(n,"label",["show"])},o.prototype.optionUpdated=function(){var n=this,a=this.option;a.regions=geoCreator.getFilledRegions(a.regions,a.map,a.nameMap,a.nameProperty);var l={};this._optionModelMap=reduce(a.regions||[],function(c,u){var d=u.name;return d&&(c.set(d,new Model(u,n,n.ecModel)),u.selected&&(l[d]=!0)),c},createHashMap()),a.selectedMap||(a.selectedMap=l)},o.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new Model(null,this,this.ecModel)},o.prototype.getFormattedLabel=function(n,a){var l=this.getRegionModel(n),c=a==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),u={name:n};if(isFunction$1(c))return u.status=a,c(u);if(isString$2(c))return c.replace("{a}",n??"")},o.prototype.setZoom=function(n){this.option.zoom=n},o.prototype.setCenter=function(n){this.option.center=n},o.prototype.select=function(n){var a=this.option,l=a.selectedMode;if(l){l!=="multiple"&&(a.selectedMap=null);var c=a.selectedMap||(a.selectedMap={});c[n]=!0}},o.prototype.unSelect=function(n){var a=this.option.selectedMap;a&&(a[n]=!1)},o.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},o.prototype.isSelected=function(n){var a=this.option.selectedMap;return!!(a&&a[n])},o.type="geo",o.layoutMode="box",o.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},o}(ComponentModel);function getCenterCoord(s,o){return s.pointToProjected?s.pointToProjected(o):s.pointToData(o)}function updateCenterAndZoom(s,o,n,a){var l=s.getZoom(),c=s.getCenter(),u=o.zoom,d=s.projectedToPoint?s.projectedToPoint(c):s.dataToPoint(c);if(o.dx!=null&&o.dy!=null&&(d[0]-=o.dx,d[1]-=o.dy,s.setCenter(getCenterCoord(s,d),a)),u!=null){if(n){var h=n.min||0,f=n.max||1/0;u=Math.max(Math.min(l*u,f),h)/l}s.scaleX*=u,s.scaleY*=u;var g=(o.originX-s.x)*(u-1),p=(o.originY-s.y)*(u-1);s.x-=g,s.y-=p,s.updateTransform(),s.setCenter(getCenterCoord(s,d),a),s.setZoom(u*l)}return{center:s.getCenter(),zoom:s.getZoom()}}var GeoView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.focusBlurEnabled=!0,n}return o.prototype.init=function(n,a){this._api=a},o.prototype.render=function(n,a,l,c){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(l));var u=this._mapDraw;u.draw(n,a,l,this,c),u.group.on("click",this._handleRegionClick,this),u.group.silent=n.get("silent"),this.group.add(u.group),this.updateSelectStatus(n,a,l)},o.prototype._handleRegionClick=function(n){var a;findEventDispatcher(n.target,function(l){return(a=getECData(l).eventData)!=null},!0),a&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:a.name})},o.prototype.updateSelectStatus=function(n,a,l){var c=this;this._mapDraw.group.traverse(function(u){var d=getECData(u).eventData;if(d)return c._model.isSelected(d.name)?l.enterSelect(u):l.leaveSelect(u),!0})},o.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},o.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},o.type="geo",o}(ComponentView);function registerMap(s,o,n){geoSourceManager.registerMap(s,o,n)}function install$J(s){s.registerCoordinateSystem("geo",geoCreator),s.registerComponentModel(GeoModel),s.registerComponentView(GeoView),s.registerImpl("registerMap",registerMap),s.registerImpl("getMap",function(n){return geoSourceManager.getMapForUser(n)});function o(n,a){a.update="geo:updateSelectStatus",s.registerAction(a,function(l,c){var u={},d=[];return c.eachComponent({mainType:"geo",query:l},function(h){h[n](l.name);var f=h.coordinateSystem;each$f(f.regions,function(p){u[p.name]=h.isSelected(p.name)||!1});var g=[];each$f(u,function(p,v){u[v]&&g.push(v)}),d.push({geoIndex:h.componentIndex,name:g})}),{selected:u,allSelected:d,name:l.name}})}o("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),o("select",{type:"geoSelect",event:"geoselected"}),o("unSelect",{type:"geoUnSelect",event:"geounselected"}),s.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,a,l){var c=n.componentType||"series";a.eachComponent({mainType:c,query:n},function(u){var d=u.coordinateSystem;if(d.type==="geo"){var h=updateCenterAndZoom(d,n,u.get("scaleLimit"),l);u.setCenter&&u.setCenter(h.center),u.setZoom&&u.setZoom(h.zoom),c==="series"&&each$f(u.seriesGroup,function(f){f.setCenter(h.center),f.setZoom(h.zoom)})}})})}function install$I(s){use(install$J),s.registerChartView(MapView),s.registerSeriesModel(MapSeries),s.registerLayout(mapSymbolLayout),s.registerProcessor(s.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",s.registerAction)}function init(s){var o=s;o.hierNode={defaultAncestor:null,ancestor:o,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[o],a,l;a=n.pop();)if(l=a.children,a.isExpand&&l.length)for(var c=l.length,u=c-1;u>=0;u--){var d=l[u];d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},n.push(d)}}function firstWalk(s,o){var n=s.isExpand?s.children:[],a=s.parentNode.children,l=s.hierNode.i?a[s.hierNode.i-1]:null;if(n.length){executeShifts(s);var c=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;l?(s.hierNode.prelim=l.hierNode.prelim+o(s,l),s.hierNode.modifier=s.hierNode.prelim-c):s.hierNode.prelim=c}else l&&(s.hierNode.prelim=l.hierNode.prelim+o(s,l));s.parentNode.hierNode.defaultAncestor=apportion(s,l,s.parentNode.hierNode.defaultAncestor||a[0],o)}function secondWalk(s){var o=s.hierNode.prelim+s.parentNode.hierNode.modifier;s.setLayout({x:o},!0),s.hierNode.modifier+=s.parentNode.hierNode.modifier}function separation(s){return arguments.length?s:defaultSeparation}function radialCoordinate(s,o){return s-=Math.PI/2,{x:o*Math.cos(s),y:o*Math.sin(s)}}function getViewRect$4(s,o){return getLayoutRect(s.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function executeShifts(s){for(var o=s.children,n=o.length,a=0,l=0;--n>=0;){var c=o[n];c.hierNode.prelim+=a,c.hierNode.modifier+=a,l+=c.hierNode.change,a+=c.hierNode.shift+l}}function apportion(s,o,n,a){if(o){for(var l=s,c=s,u=c.parentNode.children[0],d=o,h=l.hierNode.modifier,f=c.hierNode.modifier,g=u.hierNode.modifier,p=d.hierNode.modifier;d=nextRight(d),c=nextLeft(c),d&&c;){l=nextRight(l),u=nextLeft(u),l.hierNode.ancestor=s;var v=d.hierNode.prelim+p-c.hierNode.prelim-f+a(d,c);v>0&&(moveSubtree(nextAncestor(d,s,n),s,v),f+=v,h+=v),p+=d.hierNode.modifier,f+=c.hierNode.modifier,h+=l.hierNode.modifier,g+=u.hierNode.modifier}d&&!nextRight(l)&&(l.hierNode.thread=d,l.hierNode.modifier+=p-h),c&&!nextLeft(u)&&(u.hierNode.thread=c,u.hierNode.modifier+=f-g,n=s)}return n}function nextRight(s){var o=s.children;return o.length&&s.isExpand?o[o.length-1]:s.hierNode.thread}function nextLeft(s){var o=s.children;return o.length&&s.isExpand?o[0]:s.hierNode.thread}function nextAncestor(s,o,n){return s.hierNode.ancestor.parentNode===o.parentNode?s.hierNode.ancestor:n}function moveSubtree(s,o,n){var a=n/(o.hierNode.i-s.hierNode.i);o.hierNode.change-=a,o.hierNode.shift+=n,o.hierNode.modifier+=n,o.hierNode.prelim+=n,s.hierNode.change+=a}function defaultSeparation(s,o){return s.parentNode===o.parentNode?1:2}var TreeEdgeShape=function(){function s(){this.parentPoint=[],this.childPoints=[]}return s}(),TreePath=function(s){__extends$1(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new TreeEdgeShape},o.prototype.buildPath=function(n,a){var l=a.childPoints,c=l.length,u=a.parentPoint,d=l[0],h=l[c-1];if(c===1){n.moveTo(u[0],u[1]),n.lineTo(d[0],d[1]);return}var f=a.orient,g=f==="TB"||f==="BT"?0:1,p=1-g,v=parsePercent(a.forkPosition,1),b=[];b[g]=u[g],b[p]=u[p]+(h[p]-u[p])*v,n.moveTo(u[0],u[1]),n.lineTo(b[0],b[1]),n.moveTo(d[0],d[1]),b[g]=d[g],n.lineTo(b[0],b[1]),b[g]=h[g],n.lineTo(b[0],b[1]),n.lineTo(h[0],h[1]);for(var _=1;_<c-1;_++){var w=l[_];n.moveTo(w[0],w[1]),b[g]=w[g],n.lineTo(b[0],b[1])}},o}(Path),TreeView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._mainGroup=new Group$3,n}return o.prototype.init=function(n,a){this._controller=new RoamController(a.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},o.prototype.render=function(n,a,l){var c=n.getData(),u=n.layoutInfo,d=this._mainGroup,h=n.get("layout");h==="radial"?(d.x=u.x+u.width/2,d.y=u.y+u.height/2):(d.x=u.x,d.y=u.y),this._updateViewCoordSys(n,l),this._updateController(n,a,l);var f=this._data;c.diff(f).add(function(g){symbolNeedsDraw(c,g)&&updateNode(c,g,null,d,n)}).update(function(g,p){var v=f.getItemGraphicEl(p);if(!symbolNeedsDraw(c,g)){v&&removeNode(f,p,v,d,n);return}updateNode(c,g,v,d,n)}).remove(function(g){var p=f.getItemGraphicEl(g);p&&removeNode(f,g,p,d,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&c.eachItemGraphicEl(function(g,p){g.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:p})})}),this._data=c},o.prototype._updateViewCoordSys=function(n,a){var l=n.getData(),c=[];l.each(function(p){var v=l.getItemLayout(p);v&&!isNaN(v.x)&&!isNaN(v.y)&&c.push([+v.x,+v.y])});var u=[],d=[];fromPoints(c,u,d);var h=this._min,f=this._max;d[0]-u[0]===0&&(u[0]=h?h[0]:u[0]-1,d[0]=f?f[0]:d[0]+1),d[1]-u[1]===0&&(u[1]=h?h[1]:u[1]-1,d[1]=f?f[1]:d[1]+1);var g=n.coordinateSystem=new View;g.zoomLimit=n.get("scaleLimit"),g.setBoundingRect(u[0],u[1],d[0]-u[0],d[1]-u[1]),g.setCenter(n.get("center"),a),g.setZoom(n.get("zoom")),this.group.attr({x:g.x,y:g.y,scaleX:g.scaleX,scaleY:g.scaleY}),this._min=u,this._max=d},o.prototype._updateController=function(n,a,l){var c=this,u=this._controller,d=this._controllerHost,h=this.group;u.setPointerChecker(function(f,g,p){var v=h.getBoundingRect();return v.applyTransform(h.transform),v.contain(g,p)&&!onIrrelevantElement(f,l,n)}),u.enable(n.get("roam")),d.zoomLimit=n.get("scaleLimit"),d.zoom=n.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(d,f.dx,f.dy),l.dispatchAction({seriesId:n.id,type:"treeRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(d,f.scale,f.originX,f.originY),l.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),c._updateNodeAndLinkScale(n),l.updateLabelLayout()})},o.prototype._updateNodeAndLinkScale=function(n){var a=n.getData(),l=this._getNodeGlobalScale(n);a.eachItemGraphicEl(function(c,u){c.setSymbolScale(l)})},o.prototype._getNodeGlobalScale=function(n){var a=n.coordinateSystem;if(a.type!=="view")return 1;var l=this._nodeScaleRatio,c=a.scaleX||1,u=a.getZoom(),d=(u-1)*l+1;return d/c},o.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},o.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},o.type="tree",o}(ChartView);function symbolNeedsDraw(s,o){var n=s.getItemLayout(o);return n&&!isNaN(n.x)&&!isNaN(n.y)}function updateNode(s,o,n,a,l){var c=!n,u=s.tree.getNodeByDataIndex(o),d=u.getModel(),h=u.getVisual("style").fill,f=u.isExpand===!1&&u.children.length!==0?h:"#fff",g=s.tree.root,p=u.parentNode===g?u:u.parentNode||u,v=s.getItemGraphicEl(p.dataIndex),b=p.getLayout(),_=v?{x:v.__oldX,y:v.__oldY,rawX:v.__radialOldRawX,rawY:v.__radialOldRawY}:b,w=u.getLayout();c?(n=new Symbol$1(s,o,null,{symbolInnerColor:f,useNameLabel:!0}),n.x=_.x,n.y=_.y):n.updateData(s,o,null,{symbolInnerColor:f,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=w.rawX,n.__radialRawY=w.rawY,a.add(n),s.setItemGraphicEl(o,n),n.__oldX=n.x,n.__oldY=n.y,updateProps$1(n,{x:w.x,y:w.y},l);var x=n.getSymbolPath();if(l.get("layout")==="radial"){var S=g.children[0],C=S.getLayout(),T=S.children.length,R=void 0,A=void 0;if(w.x===C.x&&u.isExpand===!0&&S.children.length){var M={x:(S.children[0].getLayout().x+S.children[T-1].getLayout().x)/2,y:(S.children[0].getLayout().y+S.children[T-1].getLayout().y)/2};R=Math.atan2(M.y-C.y,M.x-C.x),R<0&&(R=Math.PI*2+R),A=M.x<C.x,A&&(R=R-Math.PI)}else R=Math.atan2(w.y-C.y,w.x-C.x),R<0&&(R=Math.PI*2+R),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(A=w.x<C.x,A&&(R=R-Math.PI)):(A=w.x>C.x,A||(R=R-Math.PI));var D=A?"left":"right",O=d.getModel("label"),H=O.get("rotate"),j=H*(Math.PI/180),q=x.getTextContent();q&&(x.setTextConfig({position:O.get("position")||D,rotation:H==null?-R:j,origin:"center"}),q.setStyle("verticalAlign","middle"))}var Y=d.get(["emphasis","focus"]),ee=Y==="relative"?concatArray(u.getAncestorsIndices(),u.getDescendantIndices()):Y==="ancestor"?u.getAncestorsIndices():Y==="descendant"?u.getDescendantIndices():null;ee&&(getECData(n).focus=ee),drawEdge(l,u,g,n,_,b,w,a),n.__edge&&(n.onHoverStateChange=function(te){if(te!=="blur"){var re=u.parentNode&&s.getItemGraphicEl(u.parentNode.dataIndex);re&&re.hoverState===HOVER_STATE_BLUR||setStatesFlag(n.__edge,te)}})}function drawEdge(s,o,n,a,l,c,u,d){var h=o.getModel(),f=s.get("edgeShape"),g=s.get("layout"),p=s.getOrient(),v=s.get(["lineStyle","curveness"]),b=s.get("edgeForkPosition"),_=h.getModel("lineStyle").getLineStyle(),w=a.__edge;if(f==="curve")o.parentNode&&o.parentNode!==n&&(w||(w=a.__edge=new BezierCurve({shape:getEdgeShape(g,p,v,l,l)})),updateProps$1(w,{shape:getEdgeShape(g,p,v,c,u)},s));else if(f==="polyline"){if(g==="orthogonal"){if(o!==n&&o.children&&o.children.length!==0&&o.isExpand===!0){for(var x=o.children,S=[],C=0;C<x.length;C++){var T=x[C].getLayout();S.push([T.x,T.y])}w||(w=a.__edge=new TreePath({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:p,forkPosition:b}})),updateProps$1(w,{shape:{parentPoint:[u.x,u.y],childPoints:S}},s)}}else if(process.env.NODE_ENV!=="production")throw new Error("The polyline edgeShape can only be used in orthogonal layout")}w&&!(f==="polyline"&&!o.isExpand)&&(w.useStyle(defaults({strokeNoScale:!0,fill:null},_)),setStatesStylesFromModel(w,h,"lineStyle"),setDefaultStateProxy(w),d.add(w))}function removeNodeEdge(s,o,n,a,l){var c=o.tree.root,u=getSourceNode(c,s),d=u.source,h=u.sourceLayout,f=o.getItemGraphicEl(s.dataIndex);if(f){var g=o.getItemGraphicEl(d.dataIndex),p=g.__edge,v=f.__edge||(d.isExpand===!1||d.children.length===1?p:void 0),b=a.get("edgeShape"),_=a.get("layout"),w=a.get("orient"),x=a.get(["lineStyle","curveness"]);v&&(b==="curve"?removeElement(v,{shape:getEdgeShape(_,w,x,h,h),style:{opacity:0}},a,{cb:function(){n.remove(v)},removeOpt:l}):b==="polyline"&&a.get("layout")==="orthogonal"&&removeElement(v,{shape:{parentPoint:[h.x,h.y],childPoints:[[h.x,h.y]]},style:{opacity:0}},a,{cb:function(){n.remove(v)},removeOpt:l}))}}function getSourceNode(s,o){for(var n=o.parentNode===s?o:o.parentNode||o,a;a=n.getLayout(),a==null;)n=n.parentNode===s?n:n.parentNode||n;return{source:n,sourceLayout:a}}function removeNode(s,o,n,a,l){var c=s.tree.getNodeByDataIndex(o),u=s.tree.root,d=getSourceNode(u,c).sourceLayout,h={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(n,{x:d.x+1,y:d.y+1},l,{cb:function(){a.remove(n),s.setItemGraphicEl(o,null)},removeOpt:h}),n.fadeOut(null,s.hostModel,{fadeLabel:!0,animation:h}),c.children.forEach(function(f){removeNodeEdge(f,s,a,l,h)}),removeNodeEdge(c,s,a,l,h)}function getEdgeShape(s,o,n,a,l){var c,u,d,h,f,g,p,v;if(s==="radial"){f=a.rawX,p=a.rawY,g=l.rawX,v=l.rawY;var b=radialCoordinate(f,p),_=radialCoordinate(f,p+(v-p)*n),w=radialCoordinate(g,v+(p-v)*n),x=radialCoordinate(g,v);return{x1:b.x||0,y1:b.y||0,x2:x.x||0,y2:x.y||0,cpx1:_.x||0,cpy1:_.y||0,cpx2:w.x||0,cpy2:w.y||0}}else f=a.x,p=a.y,g=l.x,v=l.y,(o==="LR"||o==="RL")&&(c=f+(g-f)*n,u=p,d=g+(f-g)*n,h=v),(o==="TB"||o==="BT")&&(c=f,u=p+(v-p)*n,d=g,h=v+(p-v)*n);return{x1:f,y1:p,x2:g,y2:v,cpx1:c,cpy1:u,cpx2:d,cpy2:h}}var inner$e=makeInner();function linkSeriesData(s){var o=s.mainData,n=s.datas;n||(n={main:o},s.datasAttr={main:"data"}),s.datas=s.mainData=null,linkAll(o,n,s),each$f(n,function(a){each$f(o.TRANSFERABLE_METHODS,function(l){a.wrapMethod(l,curry$1(transferInjection,s))})}),o.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,s)),each$f(o.CHANGABLE_METHODS,function(a){o.wrapMethod(a,curry$1(changeInjection,s))}),assert(n[o.dataType]===o)}function transferInjection(s,o){if(isMainData(this)){var n=extend({},inner$e(this).datas);n[this.dataType]=o,linkAll(o,n,s)}else linkSingle(o,this.dataType,inner$e(this).mainData,s);return o}function changeInjection(s,o){return s.struct&&s.struct.update(),o}function cloneShallowInjection(s,o){return each$f(inner$e(o).datas,function(n,a){n!==o&&linkSingle(n.cloneShallow(),a,o,s)}),o}function getLinkedData(s){var o=inner$e(this).mainData;return s==null||o==null?o:inner$e(o).datas[s]}function getLinkedDataAll(){var s=inner$e(this).mainData;return s==null?[{data:s}]:map$1(keys(inner$e(s).datas),function(o){return{type:o,data:inner$e(s).datas[o]}})}function isMainData(s){return inner$e(s).mainData===s}function linkAll(s,o,n){inner$e(s).datas={},each$f(o,function(a,l){linkSingle(a,l,s,n)})}function linkSingle(s,o,n,a){inner$e(n).datas[o]=s,inner$e(s).mainData=n,s.dataType=o,a.struct&&(s[a.structAttr]=a.struct,a.struct[a.datasAttr[o]]=s),s.getLinkedData=getLinkedData,s.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function s(o,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=o||"",this.hostTree=n}return s.prototype.isRemoved=function(){return this.dataIndex<0},s.prototype.eachNode=function(o,n,a){isFunction$1(o)&&(a=n,n=o,o=null),o=o||{},isString$2(o)&&(o={order:o});var l=o.order||"preorder",c=this[o.attr||"children"],u;l==="preorder"&&(u=n.call(a,this));for(var d=0;!u&&d<c.length;d++)c[d].eachNode(o,n,a);l==="postorder"&&n.call(a,this)},s.prototype.updateDepthAndHeight=function(o){var n=0;this.depth=o;for(var a=0;a<this.children.length;a++){var l=this.children[a];l.updateDepthAndHeight(o+1),l.height>n&&(n=l.height)}this.height=n+1},s.prototype.getNodeById=function(o){if(this.getId()===o)return this;for(var n=0,a=this.children,l=a.length;n<l;n++){var c=a[n].getNodeById(o);if(c)return c}},s.prototype.contains=function(o){if(o===this)return!0;for(var n=0,a=this.children,l=a.length;n<l;n++){var c=a[n].contains(o);if(c)return c}},s.prototype.getAncestors=function(o){for(var n=[],a=o?this:this.parentNode;a;)n.push(a),a=a.parentNode;return n.reverse(),n},s.prototype.getAncestorsIndices=function(){for(var o=[],n=this;n;)o.push(n.dataIndex),n=n.parentNode;return o.reverse(),o},s.prototype.getDescendantIndices=function(){var o=[];return this.eachNode(function(n){o.push(n.dataIndex)}),o},s.prototype.getValue=function(o){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(o||"value"),this.dataIndex)},s.prototype.setLayout=function(o,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,o,n)},s.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},s.prototype.getModel=function(o){if(!(this.dataIndex<0)){var n=this.hostTree,a=n.data.getItemModel(this.dataIndex);return a.getModel(o)}},s.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},s.prototype.setVisual=function(o,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,o,n)},s.prototype.getVisual=function(o){return this.hostTree.data.getItemVisual(this.dataIndex,o)},s.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},s.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},s.prototype.getChildIndex=function(){if(this.parentNode){for(var o=this.parentNode.children,n=0;n<o.length;++n)if(o[n]===this)return n;return-1}return-1},s.prototype.isAncestorOf=function(o){for(var n=o.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},s.prototype.isDescendantOf=function(o){return o!==this&&o.isAncestorOf(this)},s}(),Tree=function(){function s(o){this.type="tree",this._nodes=[],this.hostModel=o}return s.prototype.eachNode=function(o,n,a){this.root.eachNode(o,n,a)},s.prototype.getNodeByDataIndex=function(o){var n=this.data.getRawIndex(o);return this._nodes[n]},s.prototype.getNodeById=function(o){return this.root.getNodeById(o)},s.prototype.update=function(){for(var o=this.data,n=this._nodes,a=0,l=n.length;a<l;a++)n[a].dataIndex=-1;for(var a=0,l=o.count();a<l;a++)n[o.getRawIndex(a)].dataIndex=a},s.prototype.clearLayouts=function(){this.data.clearItemLayouts()},s.createTree=function(o,n,a){var l=new s(n),c=[],u=1;d(o);function d(g,p){var v=g.value;u=Math.max(u,isArray$1(v)?v.length:1),c.push(g);var b=new TreeNode(convertOptionIdName(g.name,""),l);p?addChild(b,p):l.root=b,l._nodes.push(b);var _=g.children;if(_)for(var w=0;w<_.length;w++)d(_[w],b)}l.root.updateDepthAndHeight(0);var h=prepareSeriesDataSchema(c,{coordDimensions:["value"],dimensionsCount:u}).dimensions,f=new SeriesData(h,n);return f.initData(c),a&&a(f),linkSeriesData({mainData:f,struct:l,structAttr:"tree"}),l.update(),l},s}();function addChild(s,o){var n=o.children;s.parentNode!==o&&(n.push(s),s.parentNode=o)}function retrieveTargetInfo(s,o,n){if(s&&indexOf(o,s.type)>=0){var a=n.getData().tree.root,l=s.targetNode;if(isString$2(l)&&(l=a.getNodeById(l)),l&&a.contains(l))return{node:l};var c=s.targetNodeId;if(c!=null&&(l=a.getNodeById(c)))return{node:l}}}function getPathToRoot(s){for(var o=[];s;)s=s.parentNode,s&&o.push(s);return o.reverse()}function aboveViewRoot(s,o){var n=getPathToRoot(s);return indexOf(n,o)>=0}function wrapTreePathInfo(s,o){for(var n=[];s;){var a=s.dataIndex;n.push({name:s.name,dataIndex:a,value:o.getRawValue(a)}),s=s.parentNode}return n.reverse(),n}var TreeSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return o.prototype.getInitialData=function(n){var a={name:n.name,children:n.data},l=n.leaves||{},c=new Model(l,this,this.ecModel),u=Tree.createTree(a,this,d);function d(p){p.wrapMethod("getItemModel",function(v,b){var _=u.getNodeByDataIndex(b);return _&&_.children.length&&_.isExpand||(v.parentModel=c),v})}var h=0;u.eachNode("preorder",function(p){p.depth>h&&(h=p.depth)});var f=n.expandAndCollapse,g=f&&n.initialTreeDepth>=0?n.initialTreeDepth:h;return u.root.eachNode("preorder",function(p){var v=p.hostTree.data.getRawDataItem(p.dataIndex);p.isExpand=v&&v.collapsed!=null?!v.collapsed:p.depth<=g}),u.data},o.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},o.prototype.setZoom=function(n){this.option.zoom=n},o.prototype.setCenter=function(n){this.option.center=n},o.prototype.formatTooltip=function(n,a,l){for(var c=this.getData().tree,u=c.root.children[0],d=c.getNodeByDataIndex(n),h=d.getValue(),f=d.name;d&&d!==u;)f=d.parentNode.name+"."+f,d=d.parentNode;return createTooltipMarkup("nameValue",{name:f,value:h,noValue:isNaN(h)||h==null})},o.prototype.getDataParams=function(n){var a=s.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(n);return a.treeAncestors=wrapTreePathInfo(l,this),a.collapsed=!l.isExpand,a},o.type="series.tree",o.layoutMode="box",o.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},o}(SeriesModel);function eachAfter(s,o,n){for(var a=[s],l=[],c;c=a.pop();)if(l.push(c),c.isExpand){var u=c.children;if(u.length)for(var d=0;d<u.length;d++)a.push(u[d])}for(;c=l.pop();)o(c,n)}function eachBefore(s,o){for(var n=[s],a;a=n.pop();)if(o(a),a.isExpand){var l=a.children;if(l.length)for(var c=l.length-1;c>=0;c--)n.push(l[c])}}function treeLayout(s,o){s.eachSeriesByType("tree",function(n){commonLayout(n,o)})}function commonLayout(s,o){var n=getViewRect$4(s,o);s.layoutInfo=n;var a=s.get("layout"),l=0,c=0,u=null;a==="radial"?(l=2*Math.PI,c=Math.min(n.height,n.width)/2,u=separation(function(T,R){return(T.parentNode===R.parentNode?1:2)/T.depth})):(l=n.width,c=n.height,u=separation());var d=s.getData().tree.root,h=d.children[0];if(h){init(d),eachAfter(h,firstWalk,u),d.hierNode.modifier=-h.hierNode.prelim,eachBefore(h,secondWalk);var f=h,g=h,p=h;eachBefore(h,function(T){var R=T.getLayout().x;R<f.getLayout().x&&(f=T),R>g.getLayout().x&&(g=T),T.depth>p.depth&&(p=T)});var v=f===g?1:u(f,g)/2,b=v-f.getLayout().x,_=0,w=0,x=0,S=0;if(a==="radial")_=l/(g.getLayout().x+v+b),w=c/(p.depth-1||1),eachBefore(h,function(T){x=(T.getLayout().x+b)*_,S=(T.depth-1)*w;var R=radialCoordinate(x,S);T.setLayout({x:R.x,y:R.y,rawX:x,rawY:S},!0)});else{var C=s.getOrient();C==="RL"||C==="LR"?(w=c/(g.getLayout().x+v+b),_=l/(p.depth-1||1),eachBefore(h,function(T){S=(T.getLayout().x+b)*w,x=C==="LR"?(T.depth-1)*_:l-(T.depth-1)*_,T.setLayout({x,y:S},!0)})):(C==="TB"||C==="BT")&&(_=l/(g.getLayout().x+v+b),w=c/(p.depth-1||1),eachBefore(h,function(T){x=(T.getLayout().x+b)*_,S=C==="TB"?(T.depth-1)*w:c-(T.depth-1)*w,T.setLayout({x,y:S},!0)}))}}}function treeVisual(s){s.eachSeriesByType("tree",function(o){var n=o.getData(),a=n.tree;a.eachNode(function(l){var c=l.getModel(),u=c.getModel("itemStyle").getItemStyle(),d=n.ensureUniqueItemVisual(l.dataIndex,"style");extend(d,u)})})}function installTreeAction(s){s.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(o,n){n.eachComponent({mainType:"series",subType:"tree",query:o},function(a){var l=o.dataIndex,c=a.getData().tree,u=c.getNodeByDataIndex(l);u.isExpand=!u.isExpand})}),s.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(o,n,a){n.eachComponent({mainType:"series",subType:"tree",query:o},function(l){var c=l.coordinateSystem,u=updateCenterAndZoom(c,o,void 0,a);l.setCenter&&l.setCenter(u.center),l.setZoom&&l.setZoom(u.zoom)})})}function install$H(s){s.registerChartView(TreeView),s.registerSeriesModel(TreeSeriesModel),s.registerLayout(treeLayout),s.registerVisual(treeVisual),installTreeAction(s)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(s){for(var o=0;o<actionTypes.length;o++)s.registerAction({type:actionTypes[o],update:"updateView"},noop$1);s.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,a){a.eachComponent({mainType:"series",subType:"treemap",query:n},l);function l(c,u){var d=["treemapZoomToNode","treemapRootToNode"],h=retrieveTargetInfo(n,d,c);if(h){var f=c.getViewRoot();f&&(n.direction=aboveViewRoot(f,h.node)?"rollUp":"drillDown"),c.resetViewRoot(h.node)}}})}function enableAriaDecalForTree(s){var o=s.getData(),n=o.tree,a={};n.eachNode(function(l){for(var c=l;c&&c.depth>1;)c=c.parentNode;var u=getDecalFromPalette(s.ecModel,c.name||c.dataIndex+"",a);l.setVisual("decal",u)})}var TreemapSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.preventUsingHoverLayer=!0,n}return o.prototype.getInitialData=function(n,a){var l={name:n.name,children:n.data};completeTreeValue$1(l);var c=n.levels||[],u=this.designatedVisualItemStyle={},d=new Model({itemStyle:u},this,a);c=n.levels=setDefault(c,a);var h=map$1(c||[],function(p){return new Model(p,d,a)},this),f=Tree.createTree(l,this,g);function g(p){p.wrapMethod("getItemModel",function(v,b){var _=f.getNodeByDataIndex(b),w=_?h[_.depth]:null;return v.parentModel=w||d,v})}return f.data},o.prototype.optionUpdated=function(){this.resetViewRoot()},o.prototype.formatTooltip=function(n,a,l){var c=this.getData(),u=this.getRawValue(n),d=c.getName(n);return createTooltipMarkup("nameValue",{name:d,value:u})},o.prototype.getDataParams=function(n){var a=s.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(n);return a.treeAncestors=wrapTreePathInfo(l,this),a.treePathInfo=a.treeAncestors,a},o.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,n)},o.prototype.mapIdToIndex=function(n){var a=this._idIndexMap;a||(a=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=a.get(n);return l==null&&a.set(n,l=this._idIndexMapCount++),l},o.prototype.getViewRoot=function(){return this._viewRoot},o.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var a=this.getRawData().tree.root;(!n||n!==a&&!a.contains(n))&&(this._viewRoot=a)},o.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},o.type="series.treemap",o.layoutMode="box",o.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},o}(SeriesModel);function completeTreeValue$1(s){var o=0;each$f(s.children,function(a){completeTreeValue$1(a);var l=a.value;isArray$1(l)&&(l=l[0]),o+=l});var n=s.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=o),n<0&&(n=0),isArray$1(s.value)?s.value[0]=n:s.value=n}function setDefault(s,o){var n=normalizeToArray(o.get("color")),a=normalizeToArray(o.get(["aria","decal","decals"]));if(n){s=s||[];var l,c;each$f(s,function(d){var h=new Model(d),f=h.get("color"),g=h.get("decal");(h.get(["itemStyle","color"])||f&&f!=="none")&&(l=!0),(h.get(["itemStyle","decal"])||g&&g!=="none")&&(c=!0)});var u=s[0]||(s[0]={});return l||(u.color=n.slice()),!c&&a&&(u.decal=a.slice()),s}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function s(o){this.group=new Group$3,o.add(this.group)}return s.prototype.render=function(o,n,a,l){var c=o.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!c.get("show")||!a)){var d=c.getModel("itemStyle"),h=c.getModel("emphasis"),f=d.getModel("textStyle"),g=h.getModel(["itemStyle","textStyle"]),p={pos:{left:c.get("left"),right:c.get("right"),top:c.get("top"),bottom:c.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:c.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(a,p,f),this._renderContent(o,p,d,h,f,g,l),positionElement(u,p.pos,p.box)}},s.prototype._prepare=function(o,n,a){for(var l=o;l;l=l.parentNode){var c=convertOptionIdName(l.getModel().get("name"),""),u=a.getTextRect(c),d=Math.max(u.width+TEXT_PADDING*2,n.emptyItemWidth);n.totalWidth+=d+ITEM_GAP,n.renderList.push({node:l,text:c,width:d})}},s.prototype._renderContent=function(o,n,a,l,c,u,d){for(var h=0,f=n.emptyItemWidth,g=o.get(["breadcrumb","height"]),p=getAvailableSize(n.pos,n.box),v=n.totalWidth,b=n.renderList,_=l.getModel("itemStyle").getItemStyle(),w=b.length-1;w>=0;w--){var x=b[w],S=x.node,C=x.width,T=x.text;v>p.width&&(v-=C-f,C=f,T=null);var R=new Polygon({shape:{points:makeItemPoints(h,0,C,g,w===b.length-1,w===0)},style:defaults(a.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(c,{text:T})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(d,S)});R.disableLabelAnimation=!0,R.getTextContent().ensureState("emphasis").style=createTextStyle$1(u,{text:T}),R.ensureState("emphasis").style=_,toggleHoverEmphasis(R,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(R),packEventData(R,o,S),h+=C+ITEM_GAP}},s.prototype.remove=function(){this.group.removeAll()},s}();function makeItemPoints(s,o,n,a,l,c){var u=[[l?s:s-ARRAY_LENGTH,o],[s+n,o],[s+n,o+a],[l?s:s-ARRAY_LENGTH,o+a]];return!c&&u.splice(2,0,[s+n+ARRAY_LENGTH,o+a/2]),!l&&u.push([s,o+a/2]),u}function packEventData(s,o,n){getECData(s).eventData={componentType:"series",componentSubType:"treemap",componentIndex:o.componentIndex,seriesIndex:o.seriesIndex,seriesName:o.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&wrapTreePathInfo(n,o)}}var AnimationWrap=function(){function s(){this._storage=[],this._elExistsMap={}}return s.prototype.add=function(o,n,a,l,c){return this._elExistsMap[o.id]?!1:(this._elExistsMap[o.id]=!0,this._storage.push({el:o,target:n,duration:a,delay:l,easing:c}),!0)},s.prototype.finished=function(o){return this._finishedCallback=o,this},s.prototype.start=function(){for(var o=this,n=this._storage.length,a=function(){n--,n<=0&&(o._storage.length=0,o._elExistsMap={},o._finishedCallback&&o._finishedCallback())},l=0,c=this._storage.length;l<c;l++){var u=this._storage[l];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:a,aborted:a})}return this},s}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(s){var o=getStateItemStyle(s);return o.stroke=o.fill=o.lineWidth=null,o},inner$d=makeInner(),TreemapView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._state="ready",n._storage=createStorage(),n}return o.prototype.render=function(n,a,l,c){var u=a.findComponents({mainType:"series",subType:"treemap",query:c});if(!(indexOf(u,n)<0)){this.seriesModel=n,this.api=l,this.ecModel=a;var d=["treemapZoomToNode","treemapRootToNode"],h=retrieveTargetInfo(c,d,n),f=c&&c.type,g=n.layoutInfo,p=!this._oldTree,v=this._storage,b=f==="treemapRootToNode"&&h&&v?{rootNodeGroup:v.nodeGroup[h.node.getRawIndex()],direction:c.direction}:null,_=this._giveContainerGroup(g),w=n.get("animation"),x=this._doRender(_,n,b);w&&!p&&(!f||f==="treemapZoomToNode"||f==="treemapRootToNode")?this._doAnimation(_,x,n,b):x.renderFinally(),this._resetController(l),this._renderBreadcrumb(n,l,h)}},o.prototype._giveContainerGroup=function(n){var a=this._containerGroup;return a||(a=this._containerGroup=new Group$2,this._initEvents(a),this.group.add(a)),a.x=n.x,a.y=n.y,a},o.prototype._doRender=function(n,a,l){var c=a.getData().tree,u=this._oldTree,d=createStorage(),h=createStorage(),f=this._storage,g=[];function p(C,T,R,A){return renderNode(a,h,f,l,d,g,C,T,R,A)}w(c.root?[c.root]:[],u&&u.root?[u.root]:[],n,c===u||!u,0);var v=x(f);if(this._oldTree=c,this._storage=h,this._controllerHost){var b=this.seriesModel.layoutInfo,_=c.root.getLayout();_.width===b.width&&_.height===b.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:d,willDeleteEls:v,renderFinally:S};function w(C,T,R,A,M){A?(T=C,each$f(C,function(H,j){!H.isRemoved()&&O(j,j)})):new DataDiffer(T,C,D,D).add(O).update(O).remove(curry$1(O,null)).execute();function D(H){return H.getId()}function O(H,j){var q=H!=null?C[H]:null,Y=j!=null?T[j]:null,ee=p(q,Y,R,M);ee&&w(q&&q.viewChildren||[],Y&&Y.viewChildren||[],ee,A,M+1)}}function x(C){var T=createStorage();return C&&each$f(C,function(R,A){var M=T[A];each$f(R,function(D){D&&(M.push(D),inner$d(D).willDelete=!0)})}),T}function S(){each$f(v,function(C){each$f(C,function(T){T.parent&&T.parent.remove(T)})}),each$f(g,function(C){C.invisible=!0,C.dirty()})}},o.prototype._doAnimation=function(n,a,l,c){var u=l.get("animationDurationUpdate"),d=l.get("animationEasing"),h=(isFunction$1(u)?0:u)||0,f=(isFunction$1(d)?null:d)||"cubicOut",g=createWrap();each$f(a.willDeleteEls,function(p,v){each$f(p,function(b,_){if(!b.invisible){var w=b.parent,x,S=inner$d(w);if(c&&c.direction==="drillDown")x=w===c.rootNodeGroup?{shape:{x:0,y:0,width:S.nodeWidth,height:S.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var C=0,T=0;S.willDelete||(C=S.nodeWidth/2,T=S.nodeHeight/2),x=v==="nodeGroup"?{x:C,y:T,style:{opacity:0}}:{shape:{x:C,y:T,width:0,height:0},style:{opacity:0}}}x&&g.add(b,x,h,0,f)}})}),each$f(this._storage,function(p,v){each$f(p,function(b,_){var w=a.lastsForAnimation[v][_],x={};w&&(b instanceof Group$3?w.oldX!=null&&(x.x=b.x,x.y=b.y,b.x=w.oldX,b.y=w.oldY):(w.oldShape&&(x.shape=extend({},b.shape),b.setShape(w.oldShape)),w.fadein?(b.setStyle("opacity",0),x.style={opacity:1}):b.style.opacity!==1&&(x.style={opacity:1})),g.add(b,x,h,0,f))})},this),this._state="animating",g.finished(bind$1(function(){this._state="ready",a.renderFinally()},this)).start()},o.prototype._resetController=function(n){var a=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost),a||(a=this._controller=new RoamController(n.getZr()),a.enable(this.seriesModel.get("roam")),l.zoomLimit=this.seriesModel.get("scaleLimit"),l.zoom=this.seriesModel.get("zoom"),a.on("pan",bind$1(this._onPan,this)),a.on("zoom",bind$1(this._onZoom,this)));var c=new BoundingRect(0,0,n.getWidth(),n.getHeight());a.setPointerChecker(function(u,d,h){return c.contain(d,h)})},o.prototype._clearController=function(){var n=this._controller;this._controllerHost=null,n&&(n.dispose(),n=null)},o.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>DRAG_THRESHOLD||Math.abs(n.dy)>DRAG_THRESHOLD)){var a=this.seriesModel.getData().tree.root;if(!a)return;var l=a.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+n.dx,y:l.y+n.dy,width:l.width,height:l.height}})}},o.prototype._onZoom=function(n){var a=n.originX,l=n.originY,c=n.scale;if(this._state!=="animating"){var u=this.seriesModel.getData().tree.root;if(!u)return;var d=u.getLayout();if(!d)return;var h=new BoundingRect(d.x,d.y,d.width,d.height),f=null,g=this._controllerHost;f=g.zoomLimit;var p=g.zoom=g.zoom||1;if(p*=c,f){var v=f.min||0,b=f.max||1/0;p=Math.max(Math.min(b,p),v)}var _=p/g.zoom;g.zoom=p;var w=this.seriesModel.layoutInfo;a-=w.x,l-=w.y;var x=create$1();translate(x,x,[-a,-l]),scale$1(x,x,[_,_]),translate(x,x,[a,l]),h.applyTransform(x),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},o.prototype._initEvents=function(n){var a=this;n.on("click",function(l){if(a._state==="ready"){var c=a.seriesModel.get("nodeClick",!0);if(c){var u=a.findTarget(l.offsetX,l.offsetY);if(u){var d=u.node;if(d.getLayout().isLeafRoot)a._rootToNode(u);else if(c==="zoomToNode")a._zoomToNode(u);else if(c==="link"){var h=d.hostTree.data.getItemModel(d.dataIndex),f=h.get("link",!0),g=h.get("target",!0)||"blank";f&&windowOpen(f,g)}}}}},this)},o.prototype._renderBreadcrumb=function(n,a,l){var c=this;l||(l=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(a.getWidth()/2,a.getHeight()/2),l||(l={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(n,a,l.node,function(u){c._state!=="animating"&&(aboveViewRoot(n.getViewRoot(),u)?c._rootToNode({node:u}):c._zoomToNode({node:u}))})},o.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},o.prototype.dispose=function(){this._clearController()},o.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},o.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},o.prototype.findTarget=function(n,a){var l,c=this.seriesModel.getViewRoot();return c.eachNode({attr:"viewChildren",order:"preorder"},function(u){var d=this._storage.background[u.getRawIndex()];if(d){var h=d.transformCoordToLocal(n,a),f=d.shape;if(f.x<=h[0]&&h[0]<=f.x+f.width&&f.y<=h[1]&&h[1]<=f.y+f.height)l={node:u,offsetX:h[0],offsetY:h[1]};else return!1}},this),l},o.type="treemap",o}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(s,o,n,a,l,c,u,d,h,f){if(!u)return;var g=u.getLayout(),p=s.getData(),v=u.getModel();if(p.setItemGraphicEl(u.dataIndex,null),!g||!g.isInView)return;var b=g.width,_=g.height,w=g.borderWidth,x=g.invisible,S=u.getRawIndex(),C=d&&d.getRawIndex(),T=u.viewChildren,R=g.upperHeight,A=T&&T.length,M=v.getModel("itemStyle"),D=v.getModel(["emphasis","itemStyle"]),O=v.getModel(["blur","itemStyle"]),H=v.getModel(["select","itemStyle"]),j=M.get("borderRadius")||0,q=Se("nodeGroup",Group$2);if(!q)return;if(h.add(q),q.x=g.x||0,q.y=g.y||0,q.markRedraw(),inner$d(q).nodeWidth=b,inner$d(q).nodeHeight=_,g.isAboveViewRoot)return q;var Y=Se("background",Rect$1,f,Z2_BG);Y&&ie(q,Y,A&&g.upperLabelHeight);var ee=v.getModel("emphasis"),te=ee.get("focus"),re=ee.get("blurScope"),ae=ee.get("disabled"),ue=te==="ancestor"?u.getAncestorsIndices():te==="descendant"?u.getDescendantIndices():te;if(A)isHighDownDispatcher(q)&&setAsHighDownDispatcher(q,!1),Y&&(setAsHighDownDispatcher(Y,!ae),p.setItemGraphicEl(u.dataIndex,Y),enableHoverFocus(Y,ue,re));else{var ce=Se("content",Rect$1,f,Z2_CONTENT);ce&&de(q,ce),Y.disableMorphing=!0,Y&&isHighDownDispatcher(Y)&&setAsHighDownDispatcher(Y,!1),setAsHighDownDispatcher(q,!ae),p.setItemGraphicEl(u.dataIndex,q);var le=v.getShallow("cursor");le&&ce.attr("cursor",le),enableHoverFocus(q,ue,re)}return q;function ie(ke,Te,Ae){var Ee=getECData(Te);if(Ee.dataIndex=u.dataIndex,Ee.seriesIndex=s.seriesIndex,Te.setShape({x:0,y:0,width:b,height:_,r:j}),x)ge(Te);else{Te.invisible=!1;var we=u.getVisual("style"),Ve=we.stroke,_e=getItemStyleNormal(M);_e.fill=Ve;var ve=getStateItemStyle(D);ve.fill=D.get("borderColor");var fe=getStateItemStyle(O);fe.fill=O.get("borderColor");var ne=getStateItemStyle(H);if(ne.fill=H.get("borderColor"),Ae){var oe=b-2*w;pe(Te,Ve,we.opacity,{x:w,y:0,width:oe,height:R})}else Te.removeTextContent();Te.setStyle(_e),Te.ensureState("emphasis").style=ve,Te.ensureState("blur").style=fe,Te.ensureState("select").style=ne,setDefaultStateProxy(Te)}ke.add(Te)}function de(ke,Te){var Ae=getECData(Te);Ae.dataIndex=u.dataIndex,Ae.seriesIndex=s.seriesIndex;var Ee=Math.max(b-2*w,0),we=Math.max(_-2*w,0);if(Te.culling=!0,Te.setShape({x:w,y:w,width:Ee,height:we,r:j}),x)ge(Te);else{Te.invisible=!1;var Ve=u.getVisual("style"),_e=Ve.fill,ve=getItemStyleNormal(M);ve.fill=_e,ve.decal=Ve.decal;var fe=getStateItemStyle(D),ne=getStateItemStyle(O),oe=getStateItemStyle(H);pe(Te,_e,Ve.opacity,null),Te.setStyle(ve),Te.ensureState("emphasis").style=fe,Te.ensureState("blur").style=ne,Te.ensureState("select").style=oe,setDefaultStateProxy(Te)}ke.add(Te)}function ge(ke){!ke.invisible&&c.push(ke)}function pe(ke,Te,Ae,Ee){var we=v.getModel(Ee?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),Ve=convertOptionIdName(v.get("name"),null),_e=we.getShallow("show");setLabelStyle(ke,getLabelStatesModels(v,Ee?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:_e?Ve:null,inheritColor:Te,defaultOpacity:Ae,labelFetcher:s,labelDataIndex:u.dataIndex});var ve=ke.getTextContent();if(ve){var fe=ve.style,ne=normalizeCssArray$1(fe.padding||0);Ee&&(ke.setTextConfig({layoutRect:Ee}),ve.disableLabelLayout=!0),ve.beforeUpdate=function(){var xe=Math.max((Ee?Ee.width:ke.shape.width)-ne[1]-ne[3],0),Ce=Math.max((Ee?Ee.height:ke.shape.height)-ne[0]-ne[2],0);(fe.width!==xe||fe.height!==Ce)&&ve.setStyle({width:xe,height:Ce})},fe.truncateMinChar=2,fe.lineOverflow="truncate",be(fe,Ee,g);var oe=ve.getState("emphasis");be(oe?oe.style:null,Ee,g)}}function be(ke,Te,Ae){var Ee=ke?ke.text:null;if(!Te&&Ae.isLeafRoot&&Ee!=null){var we=s.get("drillDownIcon",!0);ke.text=we?we+" "+Ee:Ee}}function Se(ke,Te,Ae,Ee){var we=C!=null&&n[ke][C],Ve=l[ke];return we?(n[ke][C]=null,Le(Ve,we)):x||(we=new Te,we instanceof Displayable&&(we.z2=calculateZ2(Ae,Ee)),De(Ve,we)),o[ke][S]=we}function Le(ke,Te){var Ae=ke[S]={};Te instanceof Group$2?(Ae.oldX=Te.x,Ae.oldY=Te.y):Ae.oldShape=extend({},Te.shape)}function De(ke,Te){var Ae=ke[S]={},Ee=u.parentNode,we=Te instanceof Group$3;if(Ee&&(!a||a.direction==="drillDown")){var Ve=0,_e=0,ve=l.background[Ee.getRawIndex()];!a&&ve&&ve.oldShape&&(Ve=ve.oldShape.width,_e=ve.oldShape.height),we?(Ae.oldX=0,Ae.oldY=_e):Ae.oldShape={x:Ve,y:_e,width:0,height:0}}Ae.fadein=!we}}function calculateZ2(s,o){return s*Z2_BASE+o}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function s(o){var n=o.mappingMethod,a=o.type,l=this.option=clone$4(o);this.type=a,this.mappingMethod=n,this._normalizeData=normalizers[n];var c=s.visualHandlers[a];this.applyVisual=c.applyVisual,this.getColorMapper=c.getColorMapper,this._normalizedToVisual=c._normalizedToVisual[n],n==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):n==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(n!=="linear"||l.dataExtent),normalizeVisualRange(l))}return s.prototype.mapValueToVisual=function(o){var n=this._normalizeData(o);return this._normalizedToVisual(n,o)},s.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},s.listVisualTypes=function(){return keys(s.visualHandlers)},s.isValidType=function(o){return s.visualHandlers.hasOwnProperty(o)},s.eachVisual=function(o,n,a){isObject$3(o)?each$f(o,n,a):n.call(a,o)},s.mapVisual=function(o,n,a){var l,c=isArray$1(o)?[]:isObject$3(o)?{}:(l=!0,null);return s.eachVisual(o,function(u,d){var h=n.call(a,u,d);l?c=h:c[d]=h}),c},s.retrieveVisuals=function(o){var n={},a;return o&&each$c(s.visualHandlers,function(l,c){o.hasOwnProperty(c)&&(n[c]=o[c],a=!0)}),a?n:null},s.prepareVisualTypes=function(o){if(isArray$1(o))o=o.slice();else if(isObject(o)){var n=[];each$c(o,function(a,l){n.push(l)}),o=n}else return[];return o.sort(function(a,l){return l==="color"&&a!=="color"&&a.indexOf("color")===0?1:-1}),o},s.dependsOn=function(o,n){return n==="color"?!!(o&&o.indexOf(n)===0):o===n},s.findPieceIndex=function(o,n,a){for(var l,c=1/0,u=0,d=n.length;u<d;u++){var h=n[u].value;if(h!=null){if(h===o||isString$2(h)&&h===o+"")return u;a&&v(h,u)}}for(var u=0,d=n.length;u<d;u++){var f=n[u],g=f.interval,p=f.close;if(g){if(g[0]===-1/0){if(littleThan(p[1],o,g[1]))return u}else if(g[1]===1/0){if(littleThan(p[0],g[0],o))return u}else if(littleThan(p[0],g[0],o)&&littleThan(p[1],o,g[1]))return u;a&&v(g[0],u),a&&v(g[1],u)}}if(a)return o===1/0?n.length-1:o===-1/0?0:l;function v(b,_){var w=Math.abs(b-o);w<c&&(c=w,l=_)}},s.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var o=this.option;return bind$1(o.mappingMethod==="category"?function(n,a){return!a&&(n=this._normalizeData(n)),doMapCategory.call(this,n)}:function(n,a,l){var c=!!l;return!a&&(n=this._normalizeData(n)),l=fastLerp(n,o.parsedVisual,l),c?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(o){return stringify(fastLerp(o,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(o,n){var a=getSpecifiedVisual.call(this,n);return a==null&&(a=stringify(fastLerp(o,this.option.parsedVisual),"rgba")),a},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(o,n){return modifyHSL(o,n)}),colorSaturation:makePartialColorVisualHandler(function(o,n){return modifyHSL(o,null,n)}),colorLightness:makePartialColorVisualHandler(function(o,n){return modifyHSL(o,null,null,n)}),colorAlpha:makePartialColorVisualHandler(function(o,n){return modifyAlpha(o,n)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(o,n,a){var l=this.mapValueToVisual(o);a("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(o,n){var a=getSpecifiedVisual.call(this,n);return a==null&&(a=doMapToArray.call(this,o)),a},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},s}();function preprocessForPiecewise(s){var o=s.pieceList;s.hasSpecialVisual=!1,each$f(o,function(n,a){n.originIndex=a,n.visual!=null&&(s.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(s){var o=s.categories,n=s.categoryMap={},a=s.visual;if(each$c(o,function(u,d){n[u]=d}),!isArray$1(a)){var l=[];isObject$3(a)?each$c(a,function(u,d){var h=n[d];l[h??CATEGORY_DEFAULT_VISUAL_INDEX]=u}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=a,a=setVisualToOption(s,l)}for(var c=o.length-1;c>=0;c--)a[c]==null&&(delete n[o[c]],o.pop())}function normalizeVisualRange(s,o){var n=s.visual,a=[];isObject$3(n)?each$c(n,function(c){a.push(c)}):n!=null&&a.push(n);var l={color:1,symbol:1};!o&&a.length===1&&!l.hasOwnProperty(s.type)&&(a[1]=a[0]),setVisualToOption(s,a)}function makePartialColorVisualHandler(s){return{applyVisual:function(o,n,a){var l=this.mapValueToVisual(o);a("color",s(n("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(s){var o=this.option.visual;return o[Math.round(linearMap$2(s,[0,1],[0,o.length-1],!0))]||{}}function makeApplyVisual(s){return function(o,n,a){a(s,this.mapValueToVisual(o))}}function doMapCategory(s){var o=this.option.visual;return o[this.option.loop&&s!==CATEGORY_DEFAULT_VISUAL_INDEX?s%o.length:s]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(s){return{linear:function(o){return linearMap$2(o,s,this.option.visual,!0)},category:doMapCategory,piecewise:function(o,n){var a=getSpecifiedVisual.call(this,n);return a==null&&(a=linearMap$2(o,s,this.option.visual,!0)),a},fixed:doMapFixed}}function getSpecifiedVisual(s){var o=this.option,n=o.pieceList;if(o.hasSpecialVisual){var a=VisualMapping.findPieceIndex(s,n),l=n[a];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(s,o){return s.visual=o,s.type==="color"&&(s.parsedVisual=map$1(o,function(n){var a=parse(n);return!a&&process.env.NODE_ENV!=="production"&&warn("'"+n+"' is an illegal color, fallback to '#000000'",!0),a||[0,0,0,1]})),o}var normalizers={linear:function(s){return linearMap$2(s,this.option.dataExtent,[0,1],!0)},piecewise:function(s){var o=this.option.pieceList,n=VisualMapping.findPieceIndex(s,o,!0);if(n!=null)return linearMap$2(n,[0,o.length-1],[0,1],!0)},category:function(s){var o=this.option.categories?this.option.categoryMap[s]:s;return o??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop$1};function littleThan(s,o,n){return s?o<=n:o<n}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(s){var o=s.getData().tree,n=o.root;n.isRemoved()||travelTree(n,{},s.getViewRoot().getAncestors(),s)}};function travelTree(s,o,n,a){var l=s.getModel(),c=s.getLayout(),u=s.hostTree.data;if(!(!c||c.invisible||!c.isInView)){var d=l.getModel(ITEM_STYLE_NORMAL),h=buildVisuals(d,o,a),f=u.ensureUniqueItemVisual(s.dataIndex,"style"),g=d.get("borderColor"),p=d.get("borderColorSaturation"),v;p!=null&&(v=calculateColor(h),g=calculateBorderColor(p,v)),f.stroke=g;var b=s.viewChildren;if(!b||!b.length)v=calculateColor(h),f.fill=v;else{var _=buildVisualMapping(s,l,c,d,h,b);each$f(b,function(w,x){if(w.depth>=n.length||w===n[w.depth]){var S=mapVisual$1(l,h,w,x,_,a);travelTree(w,S,n,a)}})}}}function buildVisuals(s,o,n){var a=extend({},o),l=n.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(c){l[c]=o[c];var u=s.get(c);l[c]=null,u!=null&&(a[c]=u)}),a}function calculateColor(s){var o=getValueVisualDefine(s,"color");if(o){var n=getValueVisualDefine(s,"colorAlpha"),a=getValueVisualDefine(s,"colorSaturation");return a&&(o=modifyHSL(o,null,null,a)),n&&(o=modifyAlpha(o,n)),o}}function calculateBorderColor(s,o){return o!=null?modifyHSL(o,null,null,s):null}function getValueVisualDefine(s,o){var n=s[o];if(n!=null&&n!=="none")return n}function buildVisualMapping(s,o,n,a,l,c){if(!(!c||!c.length)){var u=getRangeVisual(o,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(o,"colorAlpha")||getRangeVisual(o,"colorSaturation"));if(u){var d=o.get("visualMin"),h=o.get("visualMax"),f=n.dataExtent.slice();d!=null&&d<f[0]&&(f[0]=d),h!=null&&h>f[1]&&(f[1]=h);var g=o.get("colorMappingBy"),p={type:u.name,dataExtent:f,visual:u.range};p.type==="color"&&(g==="index"||g==="id")?(p.mappingMethod="category",p.loop=!0):p.mappingMethod="linear";var v=new VisualMapping(p);return inner$c(v).drColorMappingBy=g,v}}}function getRangeVisual(s,o){var n=s.get(o);return isArray$1(n)&&n.length?{name:o,range:n}:null}function mapVisual$1(s,o,n,a,l,c){var u=extend({},o);if(l){var d=l.type,h=d==="color"&&inner$c(l).drColorMappingBy,f=h==="index"?a:h==="id"?c.mapIdToIndex(n.getId()):n.getValue(s.get("visualDimension"));u[d]=l.mapValueToVisual(f)}return u}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(s,o,n,a){var l=n.getWidth(),c=n.getHeight(),u=s.option,d=getLayoutRect(s.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),h=u.size||[],f=parsePercent(retrieveValue(d.width,h[0]),l),g=parsePercent(retrieveValue(d.height,h[1]),c),p=a&&a.type,v=["treemapZoomToNode","treemapRootToNode"],b=retrieveTargetInfo(a,v,s),_=p==="treemapRender"||p==="treemapMove"?a.rootRect:null,w=s.getViewRoot(),x=getPathToRoot(w);if(p!=="treemapMove"){var S=p==="treemapZoomToNode"?estimateRootSize(s,b,w,f,g):_?[_.width,_.height]:[f,g],C=u.sort;C&&C!=="asc"&&C!=="desc"&&(C="desc");var T={squareRatio:u.squareRatio,sort:C,leafDepth:u.leafDepth};w.hostTree.clearLayouts();var R={x:0,y:0,width:S[0],height:S[1],area:S[0]*S[1]};w.setLayout(R),squarify(w,T,!1,0),R=w.getLayout(),each$b(x,function(M,D){var O=(x[D+1]||w).getValue();M.setLayout(extend({dataExtent:[O,O],borderWidth:0,upperHeight:0},R))})}var A=s.getData().tree.root;A.setLayout(calculateRootPosition(d,_,b),!0),s.setLayoutInfo(d),prunning(A,new BoundingRect(-d.x,-d.y,l,c),x,w,0)}};function squarify(s,o,n,a){var l,c;if(!s.isRemoved()){var u=s.getLayout();l=u.width,c=u.height;var d=s.getModel(),h=d.get(PATH_BORDER_WIDTH),f=d.get(PATH_GAP_WIDTH)/2,g=getUpperLabelHeight(d),p=Math.max(h,g),v=h-f,b=p-f;s.setLayout({borderWidth:h,upperHeight:p,upperLabelHeight:g},!0),l=mathMax$3(l-2*v,0),c=mathMax$3(c-v-b,0);var _=l*c,w=initChildren$1(s,d,_,o,n,a);if(w.length){var x={x:v,y:b,width:l,height:c},S=mathMin$3(l,c),C=1/0,T=[];T.area=0;for(var R=0,A=w.length;R<A;){var M=w[R];T.push(M),T.area+=M.getLayout().area;var D=worst(T,S,o.squareRatio);D<=C?(R++,C=D):(T.area-=T.pop().getLayout().area,position(T,S,x,f,!1),S=mathMin$3(x.width,x.height),T.length=T.area=0,C=1/0)}if(T.length&&position(T,S,x,f,!0),!n){var O=d.get("childrenVisibleMin");O!=null&&_<O&&(n=!0)}for(var R=0,A=w.length;R<A;R++)squarify(w[R],o,n,a+1)}}}function initChildren$1(s,o,n,a,l,c){var u=s.children||[],d=a.sort;d!=="asc"&&d!=="desc"&&(d=null);var h=a.leafDepth!=null&&a.leafDepth<=c;if(l&&!h)return s.viewChildren=[];u=filter(u,function(b){return!b.isRemoved()}),sort$1(u,d);var f=statistic(o,u,d);if(f.sum===0)return s.viewChildren=[];if(f.sum=filterByThreshold(o,n,f.sum,d,u),f.sum===0)return s.viewChildren=[];for(var g=0,p=u.length;g<p;g++){var v=u[g].getValue()/f.sum*n;u[g].setLayout({area:v})}return h&&(u.length&&s.setLayout({isLeafRoot:!0},!0),u.length=0),s.viewChildren=u,s.setLayout({dataExtent:f.dataExtent},!0),u}function filterByThreshold(s,o,n,a,l){if(!a)return n;for(var c=s.get("visibleMin"),u=l.length,d=u,h=u-1;h>=0;h--){var f=l[a==="asc"?u-h-1:h].getValue();f/n*o<c&&(d=h,n-=f)}return a==="asc"?l.splice(0,u-d):l.splice(d,u-d),n}function sort$1(s,o){return o&&s.sort(function(n,a){var l=o==="asc"?n.getValue()-a.getValue():a.getValue()-n.getValue();return l===0?o==="asc"?n.dataIndex-a.dataIndex:a.dataIndex-n.dataIndex:l}),s}function statistic(s,o,n){for(var a=0,l=0,c=o.length;l<c;l++)a+=o[l].getValue();var u=s.get("visualDimension"),d;return!o||!o.length?d=[NaN,NaN]:u==="value"&&n?(d=[o[o.length-1].getValue(),o[0].getValue()],n==="asc"&&d.reverse()):(d=[1/0,-1/0],each$b(o,function(h){var f=h.getValue(u);f<d[0]&&(d[0]=f),f>d[1]&&(d[1]=f)})),{sum:a,dataExtent:d}}function worst(s,o,n){for(var a=0,l=1/0,c=0,u=void 0,d=s.length;c<d;c++)u=s[c].getLayout().area,u&&(u<l&&(l=u),u>a&&(a=u));var h=s.area*s.area,f=o*o*n;return h?mathMax$3(f*a/h,h/(f*l)):1/0}function position(s,o,n,a,l){var c=o===n.width?0:1,u=1-c,d=["x","y"],h=["width","height"],f=n[d[c]],g=o?s.area/o:0;(l||g>n[h[u]])&&(g=n[h[u]]);for(var p=0,v=s.length;p<v;p++){var b=s[p],_={},w=g?b.getLayout().area/g:0,x=_[h[u]]=mathMax$3(g-2*a,0),S=n[d[c]]+n[h[c]]-f,C=p===v-1||S<w?S:w,T=_[h[c]]=mathMax$3(C-2*a,0);_[d[u]]=n[d[u]]+mathMin$3(a,x/2),_[d[c]]=f+mathMin$3(a,T/2),f+=C,b.setLayout(_,!0)}n[d[u]]+=g,n[h[u]]-=g}function estimateRootSize(s,o,n,a,l){var c=(o||{}).node,u=[a,l];if(!c||c===n)return u;for(var d,h=a*l,f=h*s.option.zoomToNodeRatio;d=c.parentNode;){for(var g=0,p=d.children,v=0,b=p.length;v<b;v++)g+=p[v].getValue();var _=c.getValue();if(_===0)return u;f*=g/_;var w=d.getModel(),x=w.get(PATH_BORDER_WIDTH),S=Math.max(x,getUpperLabelHeight(w));f+=4*x*x+(3*x+S)*Math.pow(f,.5),f>MAX_SAFE_INTEGER&&(f=MAX_SAFE_INTEGER),c=d}f<h&&(f=h);var C=Math.pow(f/h,.5);return[a*C,l*C]}function calculateRootPosition(s,o,n){if(o)return{x:o.x,y:o.y};var a={x:0,y:0};if(!n)return a;var l=n.node,c=l.getLayout();if(!c)return a;for(var u=[c.width/2,c.height/2],d=l;d;){var h=d.getLayout();u[0]+=h.x,u[1]+=h.y,d=d.parentNode}return{x:s.width/2-u[0],y:s.height/2-u[1]}}function prunning(s,o,n,a,l){var c=s.getLayout(),u=n[l],d=u&&u===s;if(!(u&&!d||l===n.length&&s!==a)){s.setLayout({isInView:!0,invisible:!d&&!o.intersect(c),isAboveViewRoot:d},!0);var h=new BoundingRect(o.x-c.x,o.y-c.y,o.width,o.height);each$b(s.viewChildren||[],function(f){prunning(f,h,n,a,l+1)})}}function getUpperLabelHeight(s){return s.get(PATH_UPPER_LABEL_SHOW)?s.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(s){s.registerSeriesModel(TreemapSeriesModel),s.registerChartView(TreemapView),s.registerVisual(treemapVisual),s.registerLayout(treemapLayout),installTreemapAction(s)}function categoryFilter(s){var o=s.findComponents({mainType:"legend"});!o||!o.length||s.eachSeriesByType("graph",function(n){var a=n.getCategoriesData(),l=n.getGraph(),c=l.data,u=a.mapArray(a.getName);c.filterSelf(function(d){var h=c.getItemModel(d),f=h.getShallow("category");if(f!=null){isNumber(f)&&(f=u[f]);for(var g=0;g<o.length;g++)if(!o[g].isSelected(f))return!1}return!0})})}function categoryVisual(s){var o={};s.eachSeriesByType("graph",function(n){var a=n.getCategoriesData(),l=n.getData(),c={};a.each(function(u){var d=a.getName(u);c["ec-"+d]=u;var h=a.getItemModel(u),f=h.getModel("itemStyle").getItemStyle();f.fill||(f.fill=n.getColorFromPalette(d,o)),a.setItemVisual(u,"style",f);for(var g=["symbol","symbolSize","symbolKeepAspect"],p=0;p<g.length;p++){var v=h.getShallow(g[p],!0);v!=null&&a.setItemVisual(u,g[p],v)}}),a.count()&&l.each(function(u){var d=l.getItemModel(u),h=d.getShallow("category");if(h!=null){isString$2(h)&&(h=c["ec-"+h]);var f=a.getItemVisual(h,"style"),g=l.ensureUniqueItemVisual(u,"style");extend(g,f);for(var p=["symbol","symbolSize","symbolKeepAspect"],v=0;v<p.length;v++)l.setItemVisual(u,p[v],a.getItemVisual(h,p[v]))}})})}function normalize$1(s){return s instanceof Array||(s=[s,s]),s}function graphEdgeVisual(s){s.eachSeriesByType("graph",function(o){var n=o.getGraph(),a=o.getEdgeData(),l=normalize$1(o.get("edgeSymbol")),c=normalize$1(o.get("edgeSymbolSize"));a.setVisual("fromSymbol",l&&l[0]),a.setVisual("toSymbol",l&&l[1]),a.setVisual("fromSymbolSize",c&&c[0]),a.setVisual("toSymbolSize",c&&c[1]),a.setVisual("style",o.getModel("lineStyle").getLineStyle()),a.each(function(u){var d=a.getItemModel(u),h=n.getEdgeByIndex(u),f=normalize$1(d.getShallow("symbol",!0)),g=normalize$1(d.getShallow("symbolSize",!0)),p=d.getModel("lineStyle").getLineStyle(),v=a.ensureUniqueItemVisual(u,"style");switch(extend(v,p),v.stroke){case"source":{var b=h.node1.getVisual("style");v.stroke=b&&b.fill;break}case"target":{var b=h.node2.getVisual("style");v.stroke=b&&b.fill;break}}f[0]&&h.setVisual("fromSymbol",f[0]),f[1]&&h.setVisual("toSymbol",f[1]),g[0]&&h.setVisual("fromSymbolSize",g[0]),g[1]&&h.setVisual("toSymbolSize",g[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(s){return s.get("autoCurveness")||null},createCurveness=function(s,o){var n=getAutoCurvenessParams(s),a=20,l=[];if(isNumber(n))a=n;else if(isArray$1(n)){s.__curvenessList=n;return}o>a&&(a=o);var c=a%2?a+2:a+3;l=[];for(var u=0;u<c;u++)l.push((u%2?u+1:u)/10*(u%2?-1:1));s.__curvenessList=l},getKeyOfEdges=function(s,o,n){var a=[s.id,s.dataIndex].join("."),l=[o.id,o.dataIndex].join(".");return[n.uid,a,l].join(KEY_DELIMITER)},getOppositeKey=function(s){var o=s.split(KEY_DELIMITER);return[o[0],o[2],o[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(s,o){var n=getKeyOfEdges(s.node1,s.node2,o);return o.__edgeMap[n]},getTotalLengthBetweenNodes=function(s,o){var n=getEdgeMapLengthWithKey(getKeyOfEdges(s.node1,s.node2,o),o),a=getEdgeMapLengthWithKey(getKeyOfEdges(s.node2,s.node1,o),o);return n+a},getEdgeMapLengthWithKey=function(s,o){var n=o.__edgeMap;return n[s]?n[s].length:0};function initCurvenessList(s){getAutoCurvenessParams(s)&&(s.__curvenessList=[],s.__edgeMap={},createCurveness(s))}function createEdgeMapForCurveness(s,o,n,a){if(getAutoCurvenessParams(n)){var l=getKeyOfEdges(s,o,n),c=n.__edgeMap,u=c[getOppositeKey(l)];c[l]&&!u?c[l].isForward=!0:u&&c[l]&&(u.isForward=!0,c[l].isForward=!1),c[l]=c[l]||[],c[l].push(a)}}function getCurvenessForEdge(s,o,n,a){var l=getAutoCurvenessParams(o),c=isArray$1(l);if(!l)return null;var u=getEdgeFromMap(s,o);if(!u)return null;for(var d=-1,h=0;h<u.length;h++)if(u[h]===n){d=h;break}var f=getTotalLengthBetweenNodes(s,o);createCurveness(o,f),s.lineStyle=s.lineStyle||{};var g=getKeyOfEdges(s.node1,s.node2,o),p=o.__curvenessList,v=c||f%2?0:1;if(u.isForward)return p[v+d];var b=getOppositeKey(g),_=getEdgeMapLengthWithKey(b,o),w=p[d+_+v];return a?c?l&&l[0]===0?(_+v)%2?w:-w:((_%2?0:1)+v)%2?w:-w:(_+v)%2?w:-w:p[d+_+v]}function simpleLayout(s){var o=s.coordinateSystem;if(!(o&&o.type!=="view")){var n=s.getGraph();n.eachNode(function(a){var l=a.getModel();a.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(n,s)}}function simpleLayoutEdge(s,o){s.eachEdge(function(n,a){var l=retrieve3(n.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(n,o,a,!0),0),c=clone$3(n.node1.getLayout()),u=clone$3(n.node2.getLayout()),d=[c,u];+l&&d.push([(c[0]+u[0])/2-(c[1]-u[1])*l,(c[1]+u[1])/2-(u[0]-c[0])*l]),n.setLayout(d)})}function graphSimpleLayout(s,o){s.eachSeriesByType("graph",function(n){var a=n.get("layout"),l=n.coordinateSystem;if(l&&l.type!=="view"){var c=n.getData(),u=[];each$f(l.dimensions,function(v){u=u.concat(c.mapDimensionsAll(v))});for(var d=0;d<c.count();d++){for(var h=[],f=!1,g=0;g<u.length;g++){var p=c.get(u[g],d);isNaN(p)||(f=!0),h.push(p)}f?c.setItemLayout(d,l.dataToPoint(h)):c.setItemLayout(d,[NaN,NaN])}simpleLayoutEdge(c.graph,n)}else(!a||a==="none")&&simpleLayout(n)})}function getNodeGlobalScale(s){var o=s.coordinateSystem;if(o.type!=="view")return 1;var n=s.option.nodeScaleRatio,a=o.scaleX,l=o.getZoom(),c=(l-1)*n+1;return c/a}function getSymbolSize(s){var o=s.getVisual("symbolSize");return o instanceof Array&&(o=(o[0]+o[1])/2),+o}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(s,o,n,a){var l=s.coordinateSystem;if(!(l&&l.type!=="view")){var c=l.getBoundingRect(),u=s.getData(),d=u.graph,h=c.width/2+c.x,f=c.height/2+c.y,g=Math.min(c.width,c.height)/2,p=u.count();if(u.setLayout({cx:h,cy:f}),!!p){if(n){var v=l.pointToData(a),b=v[0],_=v[1],w=[b-h,_-f];normalize$3(w,w),scale$2(w,w,g),n.setLayout([h+w[0],f+w[1]],!0);var x=s.get(["circular","rotateLabel"]);rotateNodeLabel(n,x,h,f)}_layoutNodesBasedOn[o](s,d,u,g,h,f,p),d.eachEdge(function(S,C){var T=retrieve3(S.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(S,s,C),0),R=clone$3(S.node1.getLayout()),A=clone$3(S.node2.getLayout()),M,D=(R[0]+A[0])/2,O=(R[1]+A[1])/2;+T&&(T*=3,M=[h*T+D*(1-T),f*T+O*(1-T)]),S.setLayout([R,A,M])})}}}var _layoutNodesBasedOn={value:function(s,o,n,a,l,c,u){var d=0,h=n.getSum("value"),f=Math.PI*2/(h||u);o.eachNode(function(g){var p=g.getValue("value"),v=f*(h?p:1)/2;d+=v,g.setLayout([a*Math.cos(d)+l,a*Math.sin(d)+c]),d+=v})},symbolSize:function(s,o,n,a,l,c,u){var d=0;_symbolRadiansHalf.length=u;var h=getNodeGlobalScale(s);o.eachNode(function(p){var v=getSymbolSize(p);isNaN(v)&&(v=2),v<0&&(v=0),v*=h;var b=Math.asin(v/2/a);isNaN(b)&&(b=PI$2/2),_symbolRadiansHalf[p.dataIndex]=b,d+=b*2});var f=(2*PI$2-d)/u/2,g=0;o.eachNode(function(p){var v=f+_symbolRadiansHalf[p.dataIndex];g+=v,(!p.getLayout()||!p.getLayout().fixed)&&p.setLayout([a*Math.cos(g)+l,a*Math.sin(g)+c]),g+=v})}};function rotateNodeLabel(s,o,n,a){var l=s.getGraphicEl();if(l){var c=s.getModel(),u=c.get(["label","rotate"])||0,d=l.getSymbolPath();if(o){var h=s.getLayout(),f=Math.atan2(h[1]-a,h[0]-n);f<0&&(f=Math.PI*2+f);var g=h[0]<n;g&&(f=f-Math.PI);var p=g?"left":"right";d.setTextConfig({rotation:-f,position:p,origin:"center"});var v=d.ensureState("emphasis");extend(v.textConfig||(v.textConfig={}),{position:p})}else d.setTextConfig({rotation:u*=Math.PI/180})}}function graphCircularLayout(s){s.eachSeriesByType("graph",function(o){o.get("layout")==="circular"&&circularLayout(o,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(s,o,n){for(var a=s,l=o,c=n.rect,u=c.width,d=c.height,h=[c.x+u/2,c.y+d/2],f=n.gravity==null?.1:n.gravity,g=0;g<a.length;g++){var p=a[g];p.p||(p.p=create$2(u*(Math.random()-.5)+h[0],d*(Math.random()-.5)+h[1])),p.pp=clone$3(p.p),p.edges=null}var v=n.friction==null?.6:n.friction,b=v,_,w;return{warmUp:function(){b=v*.8},setFixed:function(x){a[x].fixed=!0},setUnfixed:function(x){a[x].fixed=!1},beforeStep:function(x){_=x},afterStep:function(x){w=x},step:function(x){_&&_(a,l);for(var S=[],C=a.length,T=0;T<l.length;T++){var R=l[T];if(!R.ignoreForceLayout){var A=R.n1,M=R.n2;sub(S,M.p,A.p);var D=len(S)-R.d,O=M.w/(A.w+M.w);isNaN(O)&&(O=0),normalize$3(S,S),!A.fixed&&scaleAndAdd(A.p,A.p,S,O*D*b),!M.fixed&&scaleAndAdd(M.p,M.p,S,-(1-O)*D*b)}}for(var T=0;T<C;T++){var H=a[T];H.fixed||(sub(S,h,H.p),scaleAndAdd(H.p,H.p,S,f*b))}for(var T=0;T<C;T++)for(var A=a[T],j=T+1;j<C;j++){var M=a[j];sub(S,M.p,A.p);var D=len(S);D===0&&(set$1(S,Math.random()-.5,Math.random()-.5),D=1);var q=(A.rep+M.rep)/D/D;!A.fixed&&scaleAndAdd(A.pp,A.pp,S,q),!M.fixed&&scaleAndAdd(M.pp,M.pp,S,-q)}for(var Y=[],T=0;T<C;T++){var H=a[T];H.fixed||(sub(Y,H.p,H.pp),scaleAndAdd(H.p,H.p,Y,b),copy$2(H.pp,H.p))}b=b*.992;var ee=b<.01;w&&w(a,l,ee),x&&x(ee)}}}function graphForceLayout(s){s.eachSeriesByType("graph",function(o){var n=o.coordinateSystem;if(!(n&&n.type!=="view"))if(o.get("layout")==="force"){var a=o.preservedPoints||{},l=o.getGraph(),c=l.data,u=l.edgeData,d=o.getModel("force"),h=d.get("initLayout");o.preservedPoints?c.each(function(T){var R=c.getId(T);c.setItemLayout(T,a[R]||[NaN,NaN])}):!h||h==="none"?simpleLayout(o):h==="circular"&&circularLayout(o,"value");var f=c.getDataExtent("value"),g=u.getDataExtent("value"),p=d.get("repulsion"),v=d.get("edgeLength"),b=isArray$1(p)?p:[p,p],_=isArray$1(v)?v:[v,v];_=[_[1],_[0]];var w=c.mapArray("value",function(T,R){var A=c.getItemLayout(R),M=linearMap$2(T,f,b);return isNaN(M)&&(M=(b[0]+b[1])/2),{w:M,rep:M,fixed:c.getItemModel(R).get("fixed"),p:!A||isNaN(A[0])||isNaN(A[1])?null:A}}),x=u.mapArray("value",function(T,R){var A=l.getEdgeByIndex(R),M=linearMap$2(T,g,_);isNaN(M)&&(M=(_[0]+_[1])/2);var D=A.getModel(),O=retrieve3(A.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(A,o,R,!0),0);return{n1:w[A.node1.dataIndex],n2:w[A.node2.dataIndex],d:M,curveness:O,ignoreForceLayout:D.get("ignoreForceLayout")}}),S=n.getBoundingRect(),C=forceLayout(w,x,{rect:S,gravity:d.get("gravity"),friction:d.get("friction")});C.beforeStep(function(T,R){for(var A=0,M=T.length;A<M;A++)T[A].fixed&&copy$2(T[A].p,l.getNodeByIndex(A).getLayout())}),C.afterStep(function(T,R,A){for(var M=0,D=T.length;M<D;M++)T[M].fixed||l.getNodeByIndex(M).setLayout(T[M].p),a[c.getId(M)]=T[M].p;for(var M=0,D=R.length;M<D;M++){var O=R[M],H=l.getEdgeByIndex(M),j=O.n1.p,q=O.n2.p,Y=H.getLayout();Y=Y?Y.slice():[],Y[0]=Y[0]||[],Y[1]=Y[1]||[],copy$2(Y[0],j),copy$2(Y[1],q),+O.curveness&&(Y[2]=[(j[0]+q[0])/2-(j[1]-q[1])*O.curveness,(j[1]+q[1])/2-(q[0]-j[0])*O.curveness]),H.setLayout(Y)}}),o.forceLayout=C,o.preservedPoints=a,C.step()}else o.forceLayout=null})}function getViewRect$3(s,o,n){var a=extend(s.getBoxLayoutParams(),{aspect:n});return getLayoutRect(a,{width:o.getWidth(),height:o.getHeight()})}function createViewCoordSys(s,o){var n=[];return s.eachSeriesByType("graph",function(a){var l=a.get("coordinateSystem");if(!l||l==="view"){var c=a.getData(),u=c.mapArray(function(x){var S=c.getItemModel(x);return[+S.get("x"),+S.get("y")]}),d=[],h=[];fromPoints(u,d,h),h[0]-d[0]===0&&(h[0]+=1,d[0]-=1),h[1]-d[1]===0&&(h[1]+=1,d[1]-=1);var f=(h[0]-d[0])/(h[1]-d[1]),g=getViewRect$3(a,o,f);isNaN(f)&&(d=[g.x,g.y],h=[g.x+g.width,g.y+g.height]);var p=h[0]-d[0],v=h[1]-d[1],b=g.width,_=g.height,w=a.coordinateSystem=new View;w.zoomLimit=a.get("scaleLimit"),w.setBoundingRect(d[0],d[1],p,v),w.setViewRect(g.x,g.y,b,_),w.setCenter(a.get("center"),o),w.setZoom(a.get("zoom")),n.push(w)}}),n}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function s(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return s}();(function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o})(StraightLineShape);function isStraightLine(s){return isNaN(+s.cpx1)||isNaN(+s.cpy1)}var ECLinePath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="ec-line",a}return o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new StraightLineShape},o.prototype.buildPath=function(n,a){isStraightLine(a)?straightLineProto.buildPath.call(this,n,a):bezierCurveProto.buildPath.call(this,n,a)},o.prototype.pointAt=function(n){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,n):bezierCurveProto.pointAt.call(this,n)},o.prototype.tangentAt=function(n){var a=this.shape,l=isStraightLine(a)?[a.x2-a.x1,a.y2-a.y1]:bezierCurveProto.tangentAt.call(this,n);return normalize$3(l,l)},o}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(s){return"_"+s+"Type"}function makeSymbolTypeValue(s,o,n){var a=o.getItemVisual(n,s);if(!a||a==="none")return a;var l=o.getItemVisual(n,s+"Size"),c=o.getItemVisual(n,s+"Rotate"),u=o.getItemVisual(n,s+"Offset"),d=o.getItemVisual(n,s+"KeepAspect"),h=normalizeSymbolSize(l),f=normalizeSymbolOffset(u||0,h);return a+h+f+(c||"")+(d||"")}function createSymbol(s,o,n){var a=o.getItemVisual(n,s);if(!(!a||a==="none")){var l=o.getItemVisual(n,s+"Size"),c=o.getItemVisual(n,s+"Rotate"),u=o.getItemVisual(n,s+"Offset"),d=o.getItemVisual(n,s+"KeepAspect"),h=normalizeSymbolSize(l),f=normalizeSymbolOffset(u||0,h),g=createSymbol$1(a,-h[0]/2+f[0],-h[1]/2+f[1],h[0],h[1],null,d);return g.__specifiedRotation=c==null||isNaN(c)?void 0:+c*Math.PI/180||0,g.name=s,g}}function createLine(s){var o=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(o.shape,s),o}function setLinePoints(s,o){s.x1=o[0][0],s.y1=o[0][1],s.x2=o[1][0],s.y2=o[1][1],s.percent=1;var n=o[2];n?(s.cpx1=n[0],s.cpy1=n[1]):(s.cpx1=NaN,s.cpy1=NaN)}var Line=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this)||this;return c._createLine(n,a,l),c}return o.prototype._createLine=function(n,a,l){var c=n.hostModel,u=n.getItemLayout(a),d=createLine(u);d.shape.percent=0,initProps(d,{shape:{percent:1}},c,a),this.add(d),each$f(SYMBOL_CATEGORIES,function(h){var f=createSymbol(h,n,a);this.add(f),this[makeSymbolTypeKey(h)]=makeSymbolTypeValue(h,n,a)},this),this._updateCommonStl(n,a,l)},o.prototype.updateData=function(n,a,l){var c=n.hostModel,u=this.childOfName("line"),d=n.getItemLayout(a),h={shape:{}};setLinePoints(h.shape,d),updateProps$1(u,h,c,a),each$f(SYMBOL_CATEGORIES,function(f){var g=makeSymbolTypeValue(f,n,a),p=makeSymbolTypeKey(f);if(this[p]!==g){this.remove(this.childOfName(f));var v=createSymbol(f,n,a);this.add(v)}this[p]=g},this),this._updateCommonStl(n,a,l)},o.prototype.getLinePath=function(){return this.childAt(0)},o.prototype._updateCommonStl=function(n,a,l){var c=n.hostModel,u=this.childOfName("line"),d=l&&l.emphasisLineStyle,h=l&&l.blurLineStyle,f=l&&l.selectLineStyle,g=l&&l.labelStatesModels,p=l&&l.emphasisDisabled,v=l&&l.focus,b=l&&l.blurScope;if(!l||n.hasItemOption){var _=n.getItemModel(a),w=_.getModel("emphasis");d=w.getModel("lineStyle").getLineStyle(),h=_.getModel(["blur","lineStyle"]).getLineStyle(),f=_.getModel(["select","lineStyle"]).getLineStyle(),p=w.get("disabled"),v=w.get("focus"),b=w.get("blurScope"),g=getLabelStatesModels(_)}var x=n.getItemVisual(a,"style"),S=x.stroke;u.useStyle(x),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=d,u.ensureState("blur").style=h,u.ensureState("select").style=f,each$f(SYMBOL_CATEGORIES,function(M){var D=this.childOfName(M);if(D){D.setColor(S),D.style.opacity=x.opacity;for(var O=0;O<SPECIAL_STATES.length;O++){var H=SPECIAL_STATES[O],j=u.getState(H);if(j){var q=j.style||{},Y=D.ensureState(H),ee=Y.style||(Y.style={});q.stroke!=null&&(ee[D.__isEmptyBrush?"stroke":"fill"]=q.stroke),q.opacity!=null&&(ee.opacity=q.opacity)}}D.markRedraw()}},this);var C=c.getRawValue(a);setLabelStyle(this,g,{labelDataIndex:a,labelFetcher:{getFormattedLabel:function(M,D){return c.getFormattedLabel(M,D,n.dataType)}},inheritColor:S||"#000",defaultOpacity:x.opacity,defaultText:(C==null?n.getName(a):isFinite(C)?round$3(C):C)+""});var T=this.getTextContent();if(T){var R=g.normal;T.__align=T.style.align,T.__verticalAlign=T.style.verticalAlign,T.__position=R.get("position")||"middle";var A=R.get("distance");isArray$1(A)||(A=[A,A]),T.__labelDistance=A}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,v,b,p)},o.prototype.highlight=function(){enterEmphasis(this)},o.prototype.downplay=function(){leaveEmphasis(this)},o.prototype.updateLayout=function(n,a){this.setLinePoints(n.getItemLayout(a))},o.prototype.setLinePoints=function(n){var a=this.childOfName("line");setLinePoints(a.shape,n),a.dirty()},o.prototype.beforeUpdate=function(){var n=this,a=n.childOfName("fromSymbol"),l=n.childOfName("toSymbol"),c=n.getTextContent();if(!a&&!l&&(!c||c.ignore))return;for(var u=1,d=this.parent;d;)d.scaleX&&(u/=d.scaleX),d=d.parent;var h=n.childOfName("line");if(!this.__dirty&&!h.__dirty)return;var f=h.shape.percent,g=h.pointAt(0),p=h.pointAt(f),v=sub([],p,g);normalize$3(v,v);function b(j,q){var Y=j.__specifiedRotation;if(Y==null){var ee=h.tangentAt(q);j.attr("rotation",(q===1?-1:1)*Math.PI/2-Math.atan2(ee[1],ee[0]))}else j.attr("rotation",Y)}if(a&&(a.setPosition(g),b(a,0),a.scaleX=a.scaleY=u*f,a.markRedraw()),l&&(l.setPosition(p),b(l,1),l.scaleX=l.scaleY=u*f,l.markRedraw()),c&&!c.ignore){c.x=c.y=0,c.originX=c.originY=0;var _=void 0,w=void 0,x=c.__labelDistance,S=x[0]*u,C=x[1]*u,T=f/2,R=h.tangentAt(T),A=[R[1],-R[0]],M=h.pointAt(T);A[1]>0&&(A[0]=-A[0],A[1]=-A[1]);var D=R[0]<0?-1:1;if(c.__position!=="start"&&c.__position!=="end"){var O=-Math.atan2(R[1],R[0]);p[0]<g[0]&&(O=Math.PI+O),c.rotation=O}var H=void 0;switch(c.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":H=-C,w="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":H=C,w="top";break;default:H=0,w="middle"}switch(c.__position){case"end":c.x=v[0]*S+p[0],c.y=v[1]*C+p[1],_=v[0]>.8?"left":v[0]<-.8?"right":"center",w=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":c.x=-v[0]*S+g[0],c.y=-v[1]*C+g[1],_=v[0]>.8?"right":v[0]<-.8?"left":"center",w=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":c.x=S*D+g[0],c.y=g[1]+H,_=R[0]<0?"right":"left",c.originX=-S*D,c.originY=-H;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":c.x=M[0],c.y=M[1]+H,_="center",c.originY=-H;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":c.x=-S*D+p[0],c.y=p[1]+H,_=R[0]>=0?"right":"left",c.originX=S*D,c.originY=-H;break}c.scaleX=c.scaleY=u,c.setStyle({verticalAlign:c.__verticalAlign||w,align:c.__align||_})}},o}(Group$3),LineDraw=function(){function s(o){this.group=new Group$3,this._LineCtor=o||Line}return s.prototype.updateData=function(o){var n=this;this._progressiveEls=null;var a=this,l=a.group,c=a._lineData;a._lineData=o,c||l.removeAll();var u=makeSeriesScope$1(o);o.diff(c).add(function(d){n._doAdd(o,d,u)}).update(function(d,h){n._doUpdate(c,o,h,d,u)}).remove(function(d){l.remove(c.getItemGraphicEl(d))}).execute()},s.prototype.updateLayout=function(){var o=this._lineData;o&&o.eachItemGraphicEl(function(n,a){n.updateLayout(o,a)},this)},s.prototype.incrementalPrepareUpdate=function(o){this._seriesScope=makeSeriesScope$1(o),this._lineData=null,this.group.removeAll()},s.prototype.incrementalUpdate=function(o,n){this._progressiveEls=[];function a(d){!d.isGroup&&!isEffectObject(d)&&(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var l=o.start;l<o.end;l++){var c=n.getItemLayout(l);if(lineNeedsDraw(c)){var u=new this._LineCtor(n,l,this._seriesScope);u.traverse(a),this.group.add(u),n.setItemGraphicEl(l,u),this._progressiveEls.push(u)}}},s.prototype.remove=function(){this.group.removeAll()},s.prototype.eachRendered=function(o){traverseElements(this._progressiveEls||this.group,o)},s.prototype._doAdd=function(o,n,a){var l=o.getItemLayout(n);if(lineNeedsDraw(l)){var c=new this._LineCtor(o,n,a);o.setItemGraphicEl(n,c),this.group.add(c)}},s.prototype._doUpdate=function(o,n,a,l,c){var u=o.getItemGraphicEl(a);if(!lineNeedsDraw(n.getItemLayout(l))){this.group.remove(u);return}u?u.updateData(n,l,c):u=new this._LineCtor(n,l,c),n.setItemGraphicEl(l,u),this.group.add(u)},s}();function isEffectObject(s){return s.animators&&s.animators.length>0}function makeSeriesScope$1(s){var o=s.hostModel,n=o.getModel("emphasis");return{lineStyle:o.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:o.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:o.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:getLabelStatesModels(o)}}function isPointNaN(s){return isNaN(s[0])||isNaN(s[1])}function lineNeedsDraw(s){return s&&!isPointNaN(s[0])&&!isPointNaN(s[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(s,o,n){for(var a=s[0],l=s[1],c=s[2],u=1/0,d,h=n*n,f=.1,g=.1;g<=.9;g+=.1){v1[0]=quadraticAt(a[0],l[0],c[0],g),v1[1]=quadraticAt(a[1],l[1],c[1],g);var p=mathAbs(v2DistSquare(v1,o)-h);p<u&&(u=p,d=g)}for(var v=0;v<32;v++){var b=d+f;v2[0]=quadraticAt(a[0],l[0],c[0],d),v2[1]=quadraticAt(a[1],l[1],c[1],d),v3[0]=quadraticAt(a[0],l[0],c[0],b),v3[1]=quadraticAt(a[1],l[1],c[1],b);var p=v2DistSquare(v2,o)-h;if(mathAbs(p)<.01)break;var _=v2DistSquare(v3,o)-h;f/=2,p<0?_>=0?d=d+f:d=d-f:_>=0?d=d-f:d=d+f}return d}function adjustEdge(s,o){var n=[],a=quadraticSubdivide,l=[[],[],[]],c=[[],[]],u=[];o/=2,s.eachEdge(function(d,h){var f=d.getLayout(),g=d.getVisual("fromSymbol"),p=d.getVisual("toSymbol");f.__original||(f.__original=[clone$3(f[0]),clone$3(f[1])],f[2]&&f.__original.push(clone$3(f[2])));var v=f.__original;if(f[2]!=null){if(copy$2(l[0],v[0]),copy$2(l[1],v[2]),copy$2(l[2],v[1]),g&&g!=="none"){var b=getSymbolSize(d.node1),_=intersectCurveCircle(l,v[0],b*o);a(l[0][0],l[1][0],l[2][0],_,n),l[0][0]=n[3],l[1][0]=n[4],a(l[0][1],l[1][1],l[2][1],_,n),l[0][1]=n[3],l[1][1]=n[4]}if(p&&p!=="none"){var b=getSymbolSize(d.node2),_=intersectCurveCircle(l,v[1],b*o);a(l[0][0],l[1][0],l[2][0],_,n),l[1][0]=n[1],l[2][0]=n[2],a(l[0][1],l[1][1],l[2][1],_,n),l[1][1]=n[1],l[2][1]=n[2]}copy$2(f[0],l[0]),copy$2(f[1],l[2]),copy$2(f[2],l[1])}else{if(copy$2(c[0],v[0]),copy$2(c[1],v[1]),sub(u,c[1],c[0]),normalize$3(u,u),g&&g!=="none"){var b=getSymbolSize(d.node1);scaleAndAdd$1(c[0],c[0],u,b*o)}if(p&&p!=="none"){var b=getSymbolSize(d.node2);scaleAndAdd$1(c[1],c[1],u,-b*o)}copy$2(f[0],c[0]),copy$2(f[1],c[1])}})}function isViewCoordSys(s){return s.type==="view"}var GraphView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a){var l=new SymbolDraw,c=new LineDraw,u=this.group;this._controller=new RoamController(a.getZr()),this._controllerHost={target:u},u.add(l.group),u.add(c.group),this._symbolDraw=l,this._lineDraw=c,this._firstRender=!0},o.prototype.render=function(n,a,l){var c=this,u=n.coordinateSystem;this._model=n;var d=this._symbolDraw,h=this._lineDraw,f=this.group;if(isViewCoordSys(u)){var g={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?f.attr(g):updateProps$1(f,g,n)}adjustEdge(n.getGraph(),getNodeGlobalScale(n));var p=n.getData();d.updateData(p);var v=n.getEdgeData();h.updateData(v),this._updateNodeAndLinkScale(),this._updateController(n,a,l),clearTimeout(this._layoutTimeout);var b=n.forceLayout,_=n.get(["force","layoutAnimation"]);b&&this._startForceLayoutIteration(b,_);var w=n.get("layout");p.graph.eachNode(function(T){var R=T.dataIndex,A=T.getGraphicEl(),M=T.getModel();if(A){A.off("drag").off("dragend");var D=M.get("draggable");D&&A.on("drag",function(H){switch(w){case"force":b.warmUp(),!c._layouting&&c._startForceLayoutIteration(b,_),b.setFixed(R),p.setItemLayout(R,[A.x,A.y]);break;case"circular":p.setItemLayout(R,[A.x,A.y]),T.setLayout({fixed:!0},!0),circularLayout(n,"symbolSize",T,[H.offsetX,H.offsetY]),c.updateLayout(n);break;case"none":default:p.setItemLayout(R,[A.x,A.y]),simpleLayoutEdge(n.getGraph(),n),c.updateLayout(n);break}}).on("dragend",function(){b&&b.setUnfixed(R)}),A.setDraggable(D,!!M.get("cursor"));var O=M.get(["emphasis","focus"]);O==="adjacency"&&(getECData(A).focus=T.getAdjacentDataIndices())}}),p.graph.eachEdge(function(T){var R=T.getGraphicEl(),A=T.getModel().get(["emphasis","focus"]);R&&A==="adjacency"&&(getECData(R).focus={edge:[T.dataIndex],node:[T.node1.dataIndex,T.node2.dataIndex]})});var x=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),S=p.getLayout("cx"),C=p.getLayout("cy");p.graph.eachNode(function(T){rotateNodeLabel(T,x,S,C)}),this._firstRender=!1},o.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},o.prototype._startForceLayoutIteration=function(n,a){var l=this;(function c(){n.step(function(u){l.updateLayout(l._model),(l._layouting=!u)&&(a?l._layoutTimeout=setTimeout(c,16):c())})})()},o.prototype._updateController=function(n,a,l){var c=this,u=this._controller,d=this._controllerHost,h=this.group;if(u.setPointerChecker(function(f,g,p){var v=h.getBoundingRect();return v.applyTransform(h.transform),v.contain(g,p)&&!onIrrelevantElement(f,l,n)}),!isViewCoordSys(n.coordinateSystem)){u.disable();return}u.enable(n.get("roam")),d.zoomLimit=n.get("scaleLimit"),d.zoom=n.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(d,f.dx,f.dy),l.dispatchAction({seriesId:n.id,type:"graphRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(d,f.scale,f.originX,f.originY),l.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),c._updateNodeAndLinkScale(),adjustEdge(n.getGraph(),getNodeGlobalScale(n)),c._lineDraw.updateLayout(),l.updateLabelLayout()})},o.prototype._updateNodeAndLinkScale=function(){var n=this._model,a=n.getData(),l=getNodeGlobalScale(n);a.eachItemGraphicEl(function(c,u){c&&c.setSymbolScale(l)})},o.prototype.updateLayout=function(n){adjustEdge(n.getGraph(),getNodeGlobalScale(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},o.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},o.type="graph",o}(ChartView);function generateNodeKey(s){return"_EC_"+s}var Graph=function(){function s(o){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=o||!1}return s.prototype.isDirected=function(){return this._directed},s.prototype.addNode=function(o,n){o=o==null?""+n:""+o;var a=this._nodesMap;if(a[generateNodeKey(o)]){process.env.NODE_ENV!=="production"&&console.error("Graph nodes have duplicate name or id");return}var l=new GraphNode(o,n);return l.hostGraph=this,this.nodes.push(l),a[generateNodeKey(o)]=l,l},s.prototype.getNodeByIndex=function(o){var n=this.data.getRawIndex(o);return this.nodes[n]},s.prototype.getNodeById=function(o){return this._nodesMap[generateNodeKey(o)]},s.prototype.addEdge=function(o,n,a){var l=this._nodesMap,c=this._edgesMap;if(isNumber(o)&&(o=this.nodes[o]),isNumber(n)&&(n=this.nodes[n]),o instanceof GraphNode||(o=l[generateNodeKey(o)]),n instanceof GraphNode||(n=l[generateNodeKey(n)]),!(!o||!n)){var u=o.id+"-"+n.id,d=new GraphEdge(o,n,a);return d.hostGraph=this,this._directed&&(o.outEdges.push(d),n.inEdges.push(d)),o.edges.push(d),o!==n&&n.edges.push(d),this.edges.push(d),c[u]=d,d}},s.prototype.getEdgeByIndex=function(o){var n=this.edgeData.getRawIndex(o);return this.edges[n]},s.prototype.getEdge=function(o,n){o instanceof GraphNode&&(o=o.id),n instanceof GraphNode&&(n=n.id);var a=this._edgesMap;return this._directed?a[o+"-"+n]:a[o+"-"+n]||a[n+"-"+o]},s.prototype.eachNode=function(o,n){for(var a=this.nodes,l=a.length,c=0;c<l;c++)a[c].dataIndex>=0&&o.call(n,a[c],c)},s.prototype.eachEdge=function(o,n){for(var a=this.edges,l=a.length,c=0;c<l;c++)a[c].dataIndex>=0&&a[c].node1.dataIndex>=0&&a[c].node2.dataIndex>=0&&o.call(n,a[c],c)},s.prototype.breadthFirstTraverse=function(o,n,a,l){if(n instanceof GraphNode||(n=this._nodesMap[generateNodeKey(n)]),!!n){for(var c=a==="out"?"outEdges":a==="in"?"inEdges":"edges",u=0;u<this.nodes.length;u++)this.nodes[u].__visited=!1;if(!o.call(l,n,null))for(var d=[n];d.length;)for(var h=d.shift(),f=h[c],u=0;u<f.length;u++){var g=f[u],p=g.node1===h?g.node2:g.node1;if(!p.__visited){if(o.call(l,p,h))return;d.push(p),p.__visited=!0}}}},s.prototype.update=function(){for(var o=this.data,n=this.edgeData,a=this.nodes,l=this.edges,c=0,u=a.length;c<u;c++)a[c].dataIndex=-1;for(var c=0,u=o.count();c<u;c++)a[o.getRawIndex(c)].dataIndex=c;n.filterSelf(function(d){var h=l[n.getRawIndex(d)];return h.node1.dataIndex>=0&&h.node2.dataIndex>=0});for(var c=0,u=l.length;c<u;c++)l[c].dataIndex=-1;for(var c=0,u=n.count();c<u;c++)l[n.getRawIndex(c)].dataIndex=c},s.prototype.clone=function(){for(var o=new s(this._directed),n=this.nodes,a=this.edges,l=0;l<n.length;l++)o.addNode(n[l].id,n[l].dataIndex);for(var l=0;l<a.length;l++){var c=a[l];o.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return o},s}(),GraphNode=function(){function s(o,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=o??"",this.dataIndex=n??-1}return s.prototype.degree=function(){return this.edges.length},s.prototype.inDegree=function(){return this.inEdges.length},s.prototype.outDegree=function(){return this.outEdges.length},s.prototype.getModel=function(o){if(!(this.dataIndex<0)){var n=this.hostGraph,a=n.data.getItemModel(this.dataIndex);return a.getModel(o)}},s.prototype.getAdjacentDataIndices=function(){for(var o={edge:[],node:[]},n=0;n<this.edges.length;n++){var a=this.edges[n];a.dataIndex<0||(o.edge.push(a.dataIndex),o.node.push(a.node1.dataIndex,a.node2.dataIndex))}return o},s.prototype.getTrajectoryDataIndices=function(){for(var o=createHashMap(),n=createHashMap(),a=0;a<this.edges.length;a++){var l=this.edges[a];if(!(l.dataIndex<0)){o.set(l.dataIndex,!0);for(var c=[l.node1],u=[l.node2],d=0;d<c.length;){var h=c[d];d++,n.set(h.dataIndex,!0);for(var f=0;f<h.inEdges.length;f++)o.set(h.inEdges[f].dataIndex,!0),c.push(h.inEdges[f].node1)}for(d=0;d<u.length;){var g=u[d];d++,n.set(g.dataIndex,!0);for(var f=0;f<g.outEdges.length;f++)o.set(g.outEdges[f].dataIndex,!0),u.push(g.outEdges[f].node2)}}}return{edge:o.keys(),node:n.keys()}},s}(),GraphEdge=function(){function s(o,n,a){this.dataIndex=-1,this.node1=o,this.node2=n,this.dataIndex=a??-1}return s.prototype.getModel=function(o){if(!(this.dataIndex<0)){var n=this.hostGraph,a=n.edgeData.getItemModel(this.dataIndex);return a.getModel(o)}},s.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},s.prototype.getTrajectoryDataIndices=function(){var o=createHashMap(),n=createHashMap();o.set(this.dataIndex,!0);for(var a=[this.node1],l=[this.node2],c=0;c<a.length;){var u=a[c];c++,n.set(u.dataIndex,!0);for(var d=0;d<u.inEdges.length;d++)o.set(u.inEdges[d].dataIndex,!0),a.push(u.inEdges[d].node1)}for(c=0;c<l.length;){var h=l[c];c++,n.set(h.dataIndex,!0);for(var d=0;d<h.outEdges.length;d++)o.set(h.outEdges[d].dataIndex,!0),l.push(h.outEdges[d].node2)}return{edge:o.keys(),node:n.keys()}},s}();function createGraphDataProxyMixin(s,o){return{getValue:function(n){var a=this[s][o];return a.getStore().get(a.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,a){this.dataIndex>=0&&this[s][o].setItemVisual(this.dataIndex,n,a)},getVisual:function(n){return this[s][o].getItemVisual(this.dataIndex,n)},setLayout:function(n,a){this.dataIndex>=0&&this[s][o].setItemLayout(this.dataIndex,n,a)},getLayout:function(){return this[s][o].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[s][o].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[s][o].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(s,o,n,a,l){for(var c=new Graph(a),u=0;u<s.length;u++)c.addNode(retrieve(s[u].id,s[u].name,u),u);for(var d=[],h=[],f=0,u=0;u<o.length;u++){var g=o[u],p=g.source,v=g.target;c.addEdge(p,v,f)&&(h.push(g),d.push(retrieve(convertOptionIdName(g.id,null),p+" > "+v)),f++)}var b=n.get("coordinateSystem"),_;if(b==="cartesian2d"||b==="polar")_=createSeriesData(s,n);else{var w=CoordinateSystemManager.get(b),x=w?w.dimensions||[]:[];indexOf(x,"value")<0&&x.concat(["value"]);var S=prepareSeriesDataSchema(s,{coordDimensions:x,encodeDefine:n.getEncode()}).dimensions;_=new SeriesData(S,n),_.initData(s)}var C=new SeriesData(["value"],n);return C.initData(h,d),l&&l(_,C),linkSeriesData({mainData:_,struct:c,structAttr:"graph",datas:{node:_,edge:C},datasAttr:{node:"data",edge:"edgeData"}}),c.update(),c}var GraphSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.hasSymbolVisual=!0,n}return o.prototype.init=function(n){s.prototype.init.apply(this,arguments);var a=this;function l(){return a._categoriesData}this.legendVisualProvider=new LegendVisualProvider(l,l),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},o.prototype.mergeOption=function(n){s.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},o.prototype.mergeDefaultAndTheme=function(n){s.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(n,"edgeLabel",["show"])},o.prototype.getInitialData=function(n,a){var l=n.edges||n.links||[],c=n.data||n.nodes||[],u=this;if(c&&l){initCurvenessList(this);var d=createGraphFromNodeEdge(c,l,this,!0,h);return each$f(d.edges,function(f){createEdgeMapForCurveness(f.node1,f.node2,this,f.dataIndex)},this),d.data}function h(f,g){f.wrapMethod("getItemModel",function(_){var w=u._categoriesModels,x=_.getShallow("category"),S=w[x];return S&&(S.parentModel=_.parentModel,_.parentModel=S),_});var p=Model.prototype.getModel;function v(_,w){var x=p.call(this,_,w);return x.resolveParentPath=b,x}g.wrapMethod("getItemModel",function(_){return _.resolveParentPath=b,_.getModel=v,_});function b(_){if(_&&(_[0]==="label"||_[1]==="label")){var w=_.slice();return _[0]==="label"?w[0]="edgeLabel":_[1]==="label"&&(w[1]="edgeLabel"),w}return _}}},o.prototype.getGraph=function(){return this.getData().graph},o.prototype.getEdgeData=function(){return this.getGraph().edgeData},o.prototype.getCategoriesData=function(){return this._categoriesData},o.prototype.formatTooltip=function(n,a,l){if(l==="edge"){var c=this.getData(),u=this.getDataParams(n,l),d=c.graph.getEdgeByIndex(n),h=c.getName(d.node1.dataIndex),f=c.getName(d.node2.dataIndex),g=[];return h!=null&&g.push(h),f!=null&&g.push(f),createTooltipMarkup("nameValue",{name:g.join(" > "),value:u.value,noValue:u.value==null})}var p=defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:a});return p},o.prototype._updateCategoriesData=function(){var n=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),a=new SeriesData(["value"],this);a.initData(n),this._categoriesData=a,this._categoriesModels=a.mapArray(function(l){return a.getItemModel(l)})},o.prototype.setZoom=function(n){this.option.zoom=n},o.prototype.setCenter=function(n){this.option.center=n},o.prototype.isAnimationEnabled=function(){return s.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},o.type="series.graph",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},o}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(s){s.registerChartView(GraphView),s.registerSeriesModel(GraphSeriesModel),s.registerProcessor(categoryFilter),s.registerVisual(categoryVisual),s.registerVisual(graphEdgeVisual),s.registerLayout(graphSimpleLayout),s.registerLayout(s.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),s.registerLayout(graphForceLayout),s.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),s.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop$1),s.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop$1),s.registerAction(actionInfo$1,function(o,n,a){n.eachComponent({mainType:"series",query:o},function(l){var c=l.coordinateSystem,u=updateCenterAndZoom(c,o,void 0,a);l.setCenter&&l.setCenter(u.center),l.setZoom&&l.setZoom(u.zoom)})})}var PointerShape=function(){function s(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return s}(),PointerPath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="pointer",a}return o.prototype.getDefaultShape=function(){return new PointerShape},o.prototype.buildPath=function(n,a){var l=Math.cos,c=Math.sin,u=a.r,d=a.width,h=a.angle,f=a.x-l(h)*d*(d>=u/3?1:2),g=a.y-c(h)*d*(d>=u/3?1:2);h=a.angle-Math.PI/2,n.moveTo(f,g),n.lineTo(a.x+l(h)*d,a.y+c(h)*d),n.lineTo(a.x+l(a.angle)*u,a.y+c(a.angle)*u),n.lineTo(a.x-l(h)*d,a.y-c(h)*d),n.lineTo(f,g)},o}(Path);function parsePosition(s,o){var n=s.get("center"),a=o.getWidth(),l=o.getHeight(),c=Math.min(a,l),u=parsePercent(n[0],o.getWidth()),d=parsePercent(n[1],o.getHeight()),h=parsePercent(s.get("radius"),c/2);return{cx:u,cy:d,r:h}}function formatLabel(s,o){var n=s==null?"":s+"";return o&&(isString$2(o)?n=o.replace("{value}",n):isFunction$1(o)&&(n=o(s))),n}var GaugeView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){this.group.removeAll();var c=n.get(["axisLine","lineStyle","color"]),u=parsePosition(n,l);this._renderMain(n,a,l,c,u),this._data=n.getData()},o.prototype.dispose=function(){},o.prototype._renderMain=function(n,a,l,c,u){var d=this.group,h=n.get("clockwise"),f=-n.get("startAngle")/180*Math.PI,g=-n.get("endAngle")/180*Math.PI,p=n.getModel("axisLine"),v=p.get("roundCap"),b=v?SausagePath:Sector,_=p.get("show"),w=p.getModel("lineStyle"),x=w.get("width"),S=[f,g];normalizeArcAngles(S,!h),f=S[0],g=S[1];for(var C=g-f,T=f,R=[],A=0;_&&A<c.length;A++){var M=Math.min(Math.max(c[A][0],0),1);g=f+C*M;var D=new b({shape:{startAngle:T,endAngle:g,cx:u.cx,cy:u.cy,clockwise:h,r0:u.r-x,r:u.r},silent:!0});D.setStyle({fill:c[A][1]}),D.setStyle(w.getLineStyle(["color","width"])),R.push(D),T=g}R.reverse(),each$f(R,function(H){return d.add(H)});var O=function(H){if(H<=0)return c[0][1];var j;for(j=0;j<c.length;j++)if(c[j][0]>=H&&(j===0?0:c[j-1][0])<H)return c[j][1];return c[j-1][1]};this._renderTicks(n,a,l,O,u,f,g,h,x),this._renderTitleAndDetail(n,a,l,O,u),this._renderAnchor(n,u),this._renderPointer(n,a,l,O,u,f,g,h,x)},o.prototype._renderTicks=function(n,a,l,c,u,d,h,f,g){for(var p=this.group,v=u.cx,b=u.cy,_=u.r,w=+n.get("min"),x=+n.get("max"),S=n.getModel("splitLine"),C=n.getModel("axisTick"),T=n.getModel("axisLabel"),R=n.get("splitNumber"),A=C.get("splitNumber"),M=parsePercent(S.get("length"),_),D=parsePercent(C.get("length"),_),O=d,H=(h-d)/R,j=H/A,q=S.getModel("lineStyle").getLineStyle(),Y=C.getModel("lineStyle").getLineStyle(),ee=S.get("distance"),te,re,ae=0;ae<=R;ae++){if(te=Math.cos(O),re=Math.sin(O),S.get("show")){var ue=ee?ee+g:g,ce=new Line$1({shape:{x1:te*(_-ue)+v,y1:re*(_-ue)+b,x2:te*(_-M-ue)+v,y2:re*(_-M-ue)+b},style:q,silent:!0});q.stroke==="auto"&&ce.setStyle({stroke:c(ae/R)}),p.add(ce)}if(T.get("show")){var ue=T.get("distance")+ee,le=formatLabel(round$3(ae/R*(x-w)+w),T.get("formatter")),ie=c(ae/R),de=te*(_-M-ue)+v,ge=re*(_-M-ue)+b,pe=T.get("rotate"),be=0;pe==="radial"?(be=-O+2*Math.PI,be>Math.PI/2&&(be+=Math.PI)):pe==="tangential"?be=-O-Math.PI/2:isNumber(pe)&&(be=pe*Math.PI/180),be===0?p.add(new ZRText({style:createTextStyle$1(T,{text:le,x:de,y:ge,verticalAlign:re<-.8?"top":re>.8?"bottom":"middle",align:te<-.4?"left":te>.4?"right":"center"},{inheritColor:ie}),silent:!0})):p.add(new ZRText({style:createTextStyle$1(T,{text:le,x:de,y:ge,verticalAlign:"middle",align:"center"},{inheritColor:ie}),silent:!0,originX:de,originY:ge,rotation:be}))}if(C.get("show")&&ae!==R){var ue=C.get("distance");ue=ue?ue+g:g;for(var Se=0;Se<=A;Se++){te=Math.cos(O),re=Math.sin(O);var Le=new Line$1({shape:{x1:te*(_-ue)+v,y1:re*(_-ue)+b,x2:te*(_-D-ue)+v,y2:re*(_-D-ue)+b},silent:!0,style:Y});Y.stroke==="auto"&&Le.setStyle({stroke:c((ae+Se/A)/R)}),p.add(Le),O+=j}O-=j}else O+=H}},o.prototype._renderPointer=function(n,a,l,c,u,d,h,f,g){var p=this.group,v=this._data,b=this._progressEls,_=[],w=n.get(["pointer","show"]),x=n.getModel("progress"),S=x.get("show"),C=n.getData(),T=C.mapDimension("value"),R=+n.get("min"),A=+n.get("max"),M=[R,A],D=[d,h];function O(j,q){var Y=C.getItemModel(j),ee=Y.getModel("pointer"),te=parsePercent(ee.get("width"),u.r),re=parsePercent(ee.get("length"),u.r),ae=n.get(["pointer","icon"]),ue=ee.get("offsetCenter"),ce=parsePercent(ue[0],u.r),le=parsePercent(ue[1],u.r),ie=ee.get("keepAspect"),de;return ae?de=createSymbol$1(ae,ce-te/2,le-re,te,re,null,ie):de=new PointerPath({shape:{angle:-Math.PI/2,width:te,r:re,x:ce,y:le}}),de.rotation=-(q+Math.PI/2),de.x=u.cx,de.y=u.cy,de}function H(j,q){var Y=x.get("roundCap"),ee=Y?SausagePath:Sector,te=x.get("overlap"),re=te?x.get("width"):g/C.count(),ae=te?u.r-re:u.r-(j+1)*re,ue=te?u.r:u.r-j*re,ce=new ee({shape:{startAngle:d,endAngle:q,cx:u.cx,cy:u.cy,clockwise:f,r0:ae,r:ue}});return te&&(ce.z2=linearMap$2(C.get(T,j),[R,A],[100,0],!0)),ce}(S||w)&&(C.diff(v).add(function(j){var q=C.get(T,j);if(w){var Y=O(j,d);initProps(Y,{rotation:-((isNaN(+q)?D[0]:linearMap$2(q,M,D,!0))+Math.PI/2)},n),p.add(Y),C.setItemGraphicEl(j,Y)}if(S){var ee=H(j,d),te=x.get("clip");initProps(ee,{shape:{endAngle:linearMap$2(q,M,D,te)}},n),p.add(ee),setCommonECData(n.seriesIndex,C.dataType,j,ee),_[j]=ee}}).update(function(j,q){var Y=C.get(T,j);if(w){var ee=v.getItemGraphicEl(q),te=ee?ee.rotation:d,re=O(j,te);re.rotation=te,updateProps$1(re,{rotation:-((isNaN(+Y)?D[0]:linearMap$2(Y,M,D,!0))+Math.PI/2)},n),p.add(re),C.setItemGraphicEl(j,re)}if(S){var ae=b[q],ue=ae?ae.shape.endAngle:d,ce=H(j,ue),le=x.get("clip");updateProps$1(ce,{shape:{endAngle:linearMap$2(Y,M,D,le)}},n),p.add(ce),setCommonECData(n.seriesIndex,C.dataType,j,ce),_[j]=ce}}).execute(),C.each(function(j){var q=C.getItemModel(j),Y=q.getModel("emphasis"),ee=Y.get("focus"),te=Y.get("blurScope"),re=Y.get("disabled");if(w){var ae=C.getItemGraphicEl(j),ue=C.getItemVisual(j,"style"),ce=ue.fill;if(ae instanceof ZRImage){var le=ae.style;ae.useStyle(extend({image:le.image,x:le.x,y:le.y,width:le.width,height:le.height},ue))}else ae.useStyle(ue),ae.type!=="pointer"&&ae.setColor(ce);ae.setStyle(q.getModel(["pointer","itemStyle"]).getItemStyle()),ae.style.fill==="auto"&&ae.setStyle("fill",c(linearMap$2(C.get(T,j),M,[0,1],!0))),ae.z2EmphasisLift=0,setStatesStylesFromModel(ae,q),toggleHoverEmphasis(ae,ee,te,re)}if(S){var ie=_[j];ie.useStyle(C.getItemVisual(j,"style")),ie.setStyle(q.getModel(["progress","itemStyle"]).getItemStyle()),ie.z2EmphasisLift=0,setStatesStylesFromModel(ie,q),toggleHoverEmphasis(ie,ee,te,re)}}),this._progressEls=_)},o.prototype._renderAnchor=function(n,a){var l=n.getModel("anchor"),c=l.get("show");if(c){var u=l.get("size"),d=l.get("icon"),h=l.get("offsetCenter"),f=l.get("keepAspect"),g=createSymbol$1(d,a.cx-u/2+parsePercent(h[0],a.r),a.cy-u/2+parsePercent(h[1],a.r),u,u,null,f);g.z2=l.get("showAbove")?1:0,g.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(g)}},o.prototype._renderTitleAndDetail=function(n,a,l,c,u){var d=this,h=n.getData(),f=h.mapDimension("value"),g=+n.get("min"),p=+n.get("max"),v=new Group$3,b=[],_=[],w=n.isAnimationEnabled(),x=n.get(["pointer","showAbove"]);h.diff(this._data).add(function(S){b[S]=new ZRText({silent:!0}),_[S]=new ZRText({silent:!0})}).update(function(S,C){b[S]=d._titleEls[C],_[S]=d._detailEls[C]}).execute(),h.each(function(S){var C=h.getItemModel(S),T=h.get(f,S),R=new Group$3,A=c(linearMap$2(T,[g,p],[0,1],!0)),M=C.getModel("title");if(M.get("show")){var D=M.get("offsetCenter"),O=u.cx+parsePercent(D[0],u.r),H=u.cy+parsePercent(D[1],u.r),j=b[S];j.attr({z2:x?0:2,style:createTextStyle$1(M,{x:O,y:H,text:h.getName(S),align:"center",verticalAlign:"middle"},{inheritColor:A})}),R.add(j)}var q=C.getModel("detail");if(q.get("show")){var Y=q.get("offsetCenter"),ee=u.cx+parsePercent(Y[0],u.r),te=u.cy+parsePercent(Y[1],u.r),re=parsePercent(q.get("width"),u.r),ae=parsePercent(q.get("height"),u.r),ue=n.get(["progress","show"])?h.getItemVisual(S,"style").fill:A,j=_[S],ce=q.get("formatter");j.attr({z2:x?0:2,style:createTextStyle$1(q,{x:ee,y:te,text:formatLabel(T,ce),width:isNaN(re)?null:re,height:isNaN(ae)?null:ae,align:"center",verticalAlign:"middle"},{inheritColor:ue})}),setLabelValueAnimation(j,{normal:q},T,function(ie){return formatLabel(ie,ce)}),w&&animateLabelValue(j,S,h,n,{getFormattedLabel:function(ie,de,ge,pe,be,Se){return formatLabel(Se?Se.interpolatedValue:T,ce)}}),R.add(j)}v.add(R)}),this.group.add(v),this._titleEls=b,this._detailEls=_},o.type="gauge",o}(ChartView),GaugeSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.visualStyleAccessPath="itemStyle",n}return o.prototype.getInitialData=function(n,a){return createSeriesDataSimply(this,["value"])},o.type="series.gauge",o.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},o}(SeriesModel);function install$E(s){s.registerChartView(GaugeView),s.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(s){__extends$1(o,s);function o(n,a){var l=s.call(this)||this,c=l,u=new Polyline$1,d=new ZRText;return c.setTextContent(d),l.setTextGuideLine(u),l.updateData(n,a,!0),l}return o.prototype.updateData=function(n,a,l){var c=this,u=n.hostModel,d=n.getItemModel(a),h=n.getItemLayout(a),f=d.getModel("emphasis"),g=d.get(opacityAccessPath$1);g=g??1,l||saveOldStyle(c),c.useStyle(n.getItemVisual(a,"style")),c.style.lineJoin="round",l?(c.setShape({points:h.points}),c.style.opacity=0,initProps(c,{style:{opacity:g}},u,a)):updateProps$1(c,{style:{opacity:g},shape:{points:h.points}},u,a),setStatesStylesFromModel(c,d),this._updateLabel(n,a),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},o.prototype._updateLabel=function(n,a){var l=this,c=this.getTextGuideLine(),u=l.getTextContent(),d=n.hostModel,h=n.getItemModel(a),f=n.getItemLayout(a),g=f.label,p=n.getItemVisual(a,"style"),v=p.fill;setLabelStyle(u,getLabelStatesModels(h),{labelFetcher:n.hostModel,labelDataIndex:a,defaultOpacity:p.opacity,defaultText:n.getName(a)},{normal:{align:g.textAlign,verticalAlign:g.verticalAlign}}),l.setTextConfig({local:!0,inside:!!g.inside,insideStroke:v,outsideFill:v});var b=g.linePoints;c.setShape({points:b}),l.textGuideLineConfig={anchor:b?new Point(b[0][0],b[0][1]):null},updateProps$1(u,{style:{x:g.x,y:g.y}},d,a),u.attr({rotation:g.rotation,originX:g.x,originY:g.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(h),{stroke:v})},o}(Polygon),FunnelView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.ignoreLabelLineUpdate=!0,n}return o.prototype.render=function(n,a,l){var c=n.getData(),u=this._data,d=this.group;c.diff(u).add(function(h){var f=new FunnelPiece(c,h);c.setItemGraphicEl(h,f),d.add(f)}).update(function(h,f){var g=u.getItemGraphicEl(f);g.updateData(c,h),d.add(g),c.setItemGraphicEl(h,g)}).remove(function(h){var f=u.getItemGraphicEl(h);removeElementWithFadeOut(f,n,h)}).execute(),this._data=c},o.prototype.remove=function(){this.group.removeAll(),this._data=null},o.prototype.dispose=function(){},o.type="funnel",o}(ChartView),FunnelSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n){s.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},o.prototype.getInitialData=function(n,a){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},o.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var a=n.labelLine,l=n.emphasis.labelLine;a.show=a.show&&n.label.show,l.show=l.show&&n.emphasis.label.show},o.prototype.getDataParams=function(n){var a=this.getData(),l=s.prototype.getDataParams.call(this,n),c=a.mapDimension("value"),u=a.getSum(c);return l.percent=u?+(a.get(c,n)/u*100).toFixed(2):0,l.$vars.push("percent"),l},o.type="series.funnel",o.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},o}(SeriesModel);function getViewRect$2(s,o){return getLayoutRect(s.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function getSortedIndices(s,o){for(var n=s.mapDimension("value"),a=s.mapArray(n,function(h){return h}),l=[],c=o==="ascending",u=0,d=s.count();u<d;u++)l[u]=u;return isFunction$1(o)?l.sort(o):o!=="none"&&l.sort(function(h,f){return c?a[h]-a[f]:a[f]-a[h]}),l}function labelLayout(s){var o=s.hostModel,n=o.get("orient");s.each(function(a){var l=s.getItemModel(a),c=l.getModel("label"),u=c.get("position"),d=l.getModel("labelLine"),h=s.getItemLayout(a),f=h.points,g=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",p,v,b,_;if(g)u==="insideLeft"?(v=(f[0][0]+f[3][0])/2+5,b=(f[0][1]+f[3][1])/2,p="left"):u==="insideRight"?(v=(f[1][0]+f[2][0])/2-5,b=(f[1][1]+f[2][1])/2,p="right"):(v=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,b=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,p="center"),_=[[v,b],[v,b]];else{var w=void 0,x=void 0,S=void 0,C=void 0,T=d.get("length");process.env.NODE_ENV!=="production"&&(n==="vertical"&&["top","bottom"].indexOf(u)>-1&&(u="left",console.warn("Position error: Funnel chart on vertical orient dose not support top and bottom.")),n==="horizontal"&&["left","right"].indexOf(u)>-1&&(u="bottom",console.warn("Position error: Funnel chart on horizontal orient dose not support left and right."))),u==="left"?(w=(f[3][0]+f[0][0])/2,x=(f[3][1]+f[0][1])/2,S=w-T,v=S-5,p="right"):u==="right"?(w=(f[1][0]+f[2][0])/2,x=(f[1][1]+f[2][1])/2,S=w+T,v=S+5,p="left"):u==="top"?(w=(f[3][0]+f[0][0])/2,x=(f[3][1]+f[0][1])/2,C=x-T,b=C-5,p="center"):u==="bottom"?(w=(f[1][0]+f[2][0])/2,x=(f[1][1]+f[2][1])/2,C=x+T,b=C+5,p="center"):u==="rightTop"?(w=n==="horizontal"?f[3][0]:f[1][0],x=n==="horizontal"?f[3][1]:f[1][1],n==="horizontal"?(C=x-T,b=C-5,p="center"):(S=w+T,v=S+5,p="top")):u==="rightBottom"?(w=f[2][0],x=f[2][1],n==="horizontal"?(C=x+T,b=C+5,p="center"):(S=w+T,v=S+5,p="bottom")):u==="leftTop"?(w=f[0][0],x=n==="horizontal"?f[0][1]:f[1][1],n==="horizontal"?(C=x-T,b=C-5,p="center"):(S=w-T,v=S-5,p="right")):u==="leftBottom"?(w=n==="horizontal"?f[1][0]:f[3][0],x=n==="horizontal"?f[1][1]:f[2][1],n==="horizontal"?(C=x+T,b=C+5,p="center"):(S=w-T,v=S-5,p="right")):(w=(f[1][0]+f[2][0])/2,x=(f[1][1]+f[2][1])/2,n==="horizontal"?(C=x+T,b=C+5,p="center"):(S=w+T,v=S+5,p="left")),n==="horizontal"?(S=w,v=S):(C=x,b=C),_=[[w,x],[S,C]]}h.label={linePoints:_,x:v,y:b,verticalAlign:"middle",textAlign:p,inside:g}})}function funnelLayout(s,o){s.eachSeriesByType("funnel",function(n){var a=n.getData(),l=a.mapDimension("value"),c=n.get("sort"),u=getViewRect$2(n,o),d=n.get("orient"),h=u.width,f=u.height,g=getSortedIndices(a,c),p=u.x,v=u.y,b=d==="horizontal"?[parsePercent(n.get("minSize"),f),parsePercent(n.get("maxSize"),f)]:[parsePercent(n.get("minSize"),h),parsePercent(n.get("maxSize"),h)],_=a.getDataExtent(l),w=n.get("min"),x=n.get("max");w==null&&(w=Math.min(_[0],0)),x==null&&(x=_[1]);var S=n.get("funnelAlign"),C=n.get("gap"),T=d==="horizontal"?h:f,R=(T-C*(a.count()-1))/a.count(),A=function(te,re){if(d==="horizontal"){var ae=a.get(l,te)||0,ue=linearMap$2(ae,[w,x],b,!0),ce=void 0;switch(S){case"top":ce=v;break;case"center":ce=v+(f-ue)/2;break;case"bottom":ce=v+(f-ue);break}return[[re,ce],[re,ce+ue]]}var le=a.get(l,te)||0,ie=linearMap$2(le,[w,x],b,!0),de;switch(S){case"left":de=p;break;case"center":de=p+(h-ie)/2;break;case"right":de=p+h-ie;break}return[[de,re],[de+ie,re]]};c==="ascending"&&(R=-R,C=-C,d==="horizontal"?p+=h:v+=f,g=g.reverse());for(var M=0;M<g.length;M++){var D=g[M],O=g[M+1],H=a.getItemModel(D);if(d==="horizontal"){var j=H.get(["itemStyle","width"]);j==null?j=R:(j=parsePercent(j,h),c==="ascending"&&(j=-j));var q=A(D,p),Y=A(O,p+j);p+=j+C,a.setItemLayout(D,{points:q.concat(Y.slice().reverse())})}else{var ee=H.get(["itemStyle","height"]);ee==null?ee=R:(ee=parsePercent(ee,f),c==="ascending"&&(ee=-ee));var q=A(D,v),Y=A(O,v+ee);v+=ee+C,a.setItemLayout(D,{points:q.concat(Y.slice().reverse())})}}labelLayout(a)})}function install$D(s){s.registerChartView(FunnelView),s.registerSeriesModel(FunnelSeriesModel),s.registerLayout(funnelLayout),s.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._dataGroup=new Group$3,n._initialized=!1,n}return o.prototype.init=function(){this.group.add(this._dataGroup)},o.prototype.render=function(n,a,l,c){this._progressiveEls=null;var u=this._dataGroup,d=n.getData(),h=this._data,f=n.coordinateSystem,g=f.dimensions,p=makeSeriesScope(n);d.diff(h).add(v).update(b).remove(_).execute();function v(x){var S=addEl(d,u,x,g,f);updateElCommon(S,d,x,p)}function b(x,S){var C=h.getItemGraphicEl(S),T=createLinePoints(d,x,g,f);d.setItemGraphicEl(x,C),updateProps$1(C,{shape:{points:T}},n,x),saveOldStyle(C),updateElCommon(C,d,x,p)}function _(x){var S=h.getItemGraphicEl(x);u.remove(S)}if(!this._initialized){this._initialized=!0;var w=createGridClipShape$2(f,n,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(w)}this._data=d},o.prototype.incrementalPrepareRender=function(n,a,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},o.prototype.incrementalRender=function(n,a,l){for(var c=a.getData(),u=a.coordinateSystem,d=u.dimensions,h=makeSeriesScope(a),f=this._progressiveEls=[],g=n.start;g<n.end;g++){var p=addEl(c,this._dataGroup,g,d,u);p.incremental=!0,updateElCommon(p,c,g,h),f.push(p)}},o.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},o.type="parallel",o}(ChartView);function createGridClipShape$2(s,o,n){var a=s.model,l=s.getRect(),c=new Rect$2({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),u=a.get("layout")==="horizontal"?"width":"height";return c.setShape(u,0),initProps(c,{shape:{width:l.width,height:l.height}},o,n),c}function createLinePoints(s,o,n,a){for(var l=[],c=0;c<n.length;c++){var u=n[c],d=s.get(s.mapDimension(u),o);isEmptyValue(d,a.getAxis(u).type)||l.push(a.dataToPoint(d,u))}return l}function addEl(s,o,n,a,l){var c=createLinePoints(s,n,a,l),u=new Polyline$1({shape:{points:c},z2:10});return o.add(u),s.setItemGraphicEl(n,u),u}function makeSeriesScope(s){var o=s.get("smooth",!0);return o===!0&&(o=DEFAULT_SMOOTH),o=numericToNumber(o),eqNaN(o)&&(o=0),{smooth:o}}function updateElCommon(s,o,n,a){s.useStyle(o.getItemVisual(n,"style")),s.style.fill=null,s.setShape("smooth",a.smooth);var l=o.getItemModel(n),c=l.getModel("emphasis");setStatesStylesFromModel(s,l,"lineStyle"),toggleHoverEmphasis(s,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function isEmptyValue(s,o){return o==="category"?s==null:s==null||isNaN(s)}var ParallelSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return o.prototype.getInitialData=function(n,a){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},o.prototype.getRawIndicesByActiveState=function(n){var a=this.coordinateSystem,l=this.getData(),c=[];return a.eachActiveState(l,function(u,d){n===u&&c.push(l.getRawIndex(d))}),c},o.type="series.parallel",o.dependencies=["parallel"],o.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},o}(SeriesModel);function makeDefaultEncode(s){var o=s.ecModel.getComponent("parallel",s.get("parallelIndex"));if(o){var n={};return each$f(o.dimensions,function(a){var l=convertDimNameToNumber(a);n[a]=l}),n}}function convertDimNameToNumber(s){return+s.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(s,o){var n=s.coordinateSystem,a={normal:s.get(["lineStyle","opacity"]),active:s.get("activeOpacity"),inactive:s.get("inactiveOpacity")};return{progress:function(l,c){n.eachActiveState(c,function(u,d){var h=a[u];if(u==="normal"&&c.hasItemOption){var f=c.getItemModel(d).get(opacityAccessPath,!0);f!=null&&(h=f)}var g=c.ensureUniqueItemVisual(d,"style");g.opacity=h},l.start,l.end)}}}};function parallelPreprocessor(s){createParallelIfNeeded(s),mergeAxisOptionFromParallel(s)}function createParallelIfNeeded(s){if(!s.parallel){var o=!1;each$f(s.series,function(n){n&&n.type==="parallel"&&(o=!0)}),o&&(s.parallel=[{}])}}function mergeAxisOptionFromParallel(s){var o=normalizeToArray(s.parallelAxis);each$f(o,function(n){if(isObject$3(n)){var a=n.parallelIndex||0,l=normalizeToArray(s.parallel)[a];l&&l.parallelAxisDefault&&merge(n,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){this._model=n,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(c,u){l.getZr().on(u,this._handlers[u]=bind$1(c,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},o.prototype.dispose=function(n,a){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,c){a.getZr().off(c,l)}),this._handlers=null},o.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},o.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},n))},o.type="parallel",o}(ComponentView),handlers$1={mousedown:function(s){checkTrigger(this,"click")&&(this._mouseDownPoint=[s.offsetX,s.offsetY])},mouseup:function(s){var o=this._mouseDownPoint;if(checkTrigger(this,"click")&&o){var n=[s.offsetX,s.offsetY],a=Math.pow(o[0]-n[0],2)+Math.pow(o[1]-n[1],2);if(a>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([s.offsetX,s.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(s){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var o=this._model,n=o.coordinateSystem.getSlidedAxisExpandWindow([s.offsetX,s.offsetY]),a=n.behavior;a==="jump"&&this._throttledDispatchExpand.debounceNextCall(o.get("axisExpandDebounce")),this._throttledDispatchExpand(a==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:a==="jump"?null:{duration:0}})}}};function checkTrigger(s,o){var n=s._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===o}var ParallelModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(){s.prototype.init.apply(this,arguments),this.mergeOption({})},o.prototype.mergeOption=function(n){var a=this.option;n&&merge(a,n,!0),this._initDimensions()},o.prototype.contains=function(n,a){var l=n.get("parallelIndex");return l!=null&&a.getComponent("parallel",l)===this},o.prototype.setAxisExpand=function(n){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(a){n.hasOwnProperty(a)&&(this.option[a]=n[a])},this)},o.prototype._initDimensions=function(){var n=this.dimensions=[],a=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(c){return(c.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(c){n.push("dim"+c.get("dim")),a.push(c.componentIndex)})},o.type="parallel",o.dependencies=["parallelAxis"],o.layoutMode="box",o.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},o}(ComponentModel),ParallelAxis=function(s){__extends$1(o,s);function o(n,a,l,c,u){var d=s.call(this,n,a,l)||this;return d.type=c||"value",d.axisIndex=u,d}return o.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},o}(Axis);function sliderMove(s,o,n,a,l,c){s=s||0;var u=n[1]-n[0];if(l!=null&&(l=restrict$1(l,[0,u])),c!=null&&(c=Math.max(c,l??0)),a==="all"){var d=Math.abs(o[1]-o[0]);d=restrict$1(d,[0,u]),l=c=restrict$1(d,[l,c]),a=0}o[0]=restrict$1(o[0],n),o[1]=restrict$1(o[1],n);var h=getSpanSign(o,a);o[a]+=s;var f=l||0,g=n.slice();h.sign<0?g[0]+=f:g[1]-=f,o[a]=restrict$1(o[a],g);var p;return p=getSpanSign(o,a),l!=null&&(p.sign!==h.sign||p.span<l)&&(o[1-a]=o[a]+h.sign*l),p=getSpanSign(o,a),c!=null&&p.span>c&&(o[1-a]=o[a]+p.sign*c),o}function getSpanSign(s,o){var n=s[o]-s[1-o];return{span:Math.abs(n),sign:n>0?-1:n<0?1:o?-1:1}}function restrict$1(s,o){return Math.min(o[1]!=null?o[1]:1/0,Math.max(o[0]!=null?o[0]:-1/0,s))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function s(o,n,a){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=o.dimensions,this._model=o,this._init(o,n,a)}return s.prototype._init=function(o,n,a){var l=o.dimensions,c=o.parallelAxisIndex;each$a(l,function(u,d){var h=c[d],f=n.getComponent("parallelAxis",h),g=this._axesMap.set(u,new ParallelAxis(u,createScaleByModel$1(f),[0,0],f.get("type"),h)),p=g.type==="category";g.onBand=p&&f.get("boundaryGap"),g.inverse=f.get("inverse"),f.axis=g,g.model=f,g.coordinateSystem=f.coordinateSystem=this},this)},s.prototype.update=function(o,n){this._updateAxesFromSeries(this._model,o)},s.prototype.containPoint=function(o){var n=this._makeLayoutInfo(),a=n.axisBase,l=n.layoutBase,c=n.pixelDimIndex,u=o[1-c],d=o[c];return u>=a&&u<=a+n.axisLength&&d>=l&&d<=l+n.layoutLength},s.prototype.getModel=function(){return this._model},s.prototype._updateAxesFromSeries=function(o,n){n.eachSeries(function(a){if(o.contains(a,n)){var l=a.getData();each$a(this.dimensions,function(c){var u=this._axesMap.get(c);u.scale.unionExtentFromData(l,l.mapDimension(c)),niceScaleExtent(u.scale,u.model)},this)}},this)},s.prototype.resize=function(o,n){this._rect=getLayoutRect(o.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},s.prototype.getRect=function(){return this._rect},s.prototype._makeLayoutInfo=function(){var o=this._model,n=this._rect,a=["x","y"],l=["width","height"],c=o.get("layout"),u=c==="horizontal"?0:1,d=n[l[u]],h=[0,d],f=this.dimensions.length,g=restrict(o.get("axisExpandWidth"),h),p=restrict(o.get("axisExpandCount")||0,[0,f]),v=o.get("axisExpandable")&&f>3&&f>p&&p>1&&g>0&&d>0,b=o.get("axisExpandWindow"),_;if(b)_=restrict(b[1]-b[0],h),b[1]=b[0]+_;else{_=restrict(g*(p-1),h);var w=o.get("axisExpandCenter")||mathFloor(f/2);b=[g*w-_/2],b[1]=b[0]+_}var x=(d-_)/(f-p);x<3&&(x=0);var S=[mathFloor(round(b[0]/g,1))+1,mathCeil(round(b[1]/g,1))-1],C=x/g*b[0];return{layout:c,pixelDimIndex:u,layoutBase:n[a[u]],layoutLength:d,axisBase:n[a[1-u]],axisLength:n[l[1-u]],axisExpandable:v,axisExpandWidth:g,axisCollapseWidth:x,axisExpandWindow:b,axisCount:f,winInnerIndices:S,axisExpandWindow0Pos:C}},s.prototype._layoutAxes=function(){var o=this._rect,n=this._axesMap,a=this.dimensions,l=this._makeLayoutInfo(),c=l.layout;n.each(function(u){var d=[0,l.axisLength],h=u.inverse?1:0;u.setExtent(d[h],d[1-h])}),each$a(a,function(u,d){var h=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(d,l),f={horizontal:{x:h.position,y:l.axisLength},vertical:{x:0,y:h.position}},g={horizontal:PI$1/2,vertical:0},p=[f[c].x+o.x,f[c].y+o.y],v=g[c],b=create$1();rotate(b,b,v),translate(b,b,p),this._axesLayout[u]={position:p,rotation:v,transform:b,axisNameAvailableWidth:h.axisNameAvailableWidth,axisLabelShow:h.axisLabelShow,nameTruncateMaxWidth:h.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},s.prototype.getAxis=function(o){return this._axesMap.get(o)},s.prototype.dataToPoint=function(o,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(o),n)},s.prototype.eachActiveState=function(o,n,a,l){a==null&&(a=0),l==null&&(l=o.count());var c=this._axesMap,u=this.dimensions,d=[],h=[];each$f(u,function(x){d.push(o.mapDimension(x)),h.push(c.get(x).model)});for(var f=this.hasAxisBrushed(),g=a;g<l;g++){var p=void 0;if(!f)p="normal";else{p="active";for(var v=o.getValues(d,g),b=0,_=u.length;b<_;b++){var w=h[b].getActiveState(v[b]);if(w==="inactive"){p="inactive";break}}}n(p,g)}},s.prototype.hasAxisBrushed=function(){for(var o=this.dimensions,n=this._axesMap,a=!1,l=0,c=o.length;l<c;l++)n.get(o[l]).model.getActiveState()!=="normal"&&(a=!0);return a},s.prototype.axisCoordToPoint=function(o,n){var a=this._axesLayout[n];return applyTransform([o,0],a.transform)},s.prototype.getAxisLayout=function(o){return clone$4(this._axesLayout[o])},s.prototype.getSlidedAxisExpandWindow=function(o){var n=this._makeLayoutInfo(),a=n.pixelDimIndex,l=n.axisExpandWindow.slice(),c=l[1]-l[0],u=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(o))return{behavior:"none",axisExpandWindow:l};var d=o[a]-n.layoutBase-n.axisExpandWindow0Pos,h,f="slide",g=n.axisCollapseWidth,p=this._model.get("axisExpandSlideTriggerArea"),v=p[0]!=null;if(g)v&&g&&d<c*p[0]?(f="jump",h=d-c*p[2]):v&&g&&d>c*(1-p[0])?(f="jump",h=d-c*(1-p[2])):(h=d-c*p[1])>=0&&(h=d-c*(1-p[1]))<=0&&(h=0),h*=n.axisExpandWidth/g,h?sliderMove(h,l,u,"all"):f="none";else{var b=l[1]-l[0],_=u[1]*d/b;l=[mathMax$2(0,_-b/2)],l[1]=mathMin$2(u[1],l[0]+b),l[0]=l[1]-b}return{axisExpandWindow:l,behavior:f}},s}();function restrict(s,o){return mathMin$2(mathMax$2(s,o[0]),o[1])}function layoutAxisWithoutExpand(s,o){var n=o.layoutLength/(o.axisCount-1);return{position:n*s,axisNameAvailableWidth:n,axisLabelShow:!0}}function layoutAxisWithExpand(s,o){var n=o.layoutLength,a=o.axisExpandWidth,l=o.axisCount,c=o.axisCollapseWidth,u=o.winInnerIndices,d,h=c,f=!1,g;return s<u[0]?(d=s*c,g=c):s<=u[1]?(d=o.axisExpandWindow0Pos+s*a-o.axisExpandWindow[0],h=a,f=!0):(d=n-(l-1-s)*c,g=c),{position:d,axisNameAvailableWidth:h,axisLabelShow:f,nameTruncateMaxWidth:g}}function createParallelCoordSys(s,o){var n=[];return s.eachComponent("parallel",function(a,l){var c=new Parallel(a,s,o);c.name="parallel_"+l,c.resize(a,o),a.coordinateSystem=c,c.model=a,n.push(c)}),s.eachSeries(function(a){if(a.get("coordinateSystem")==="parallel"){var l=a.getReferringComponents("parallel",SINGLE_REFERRING).models[0];a.coordinateSystem=l.coordinateSystem}}),n}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.activeIntervals=[],n}return o.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},o.prototype.setActiveIntervals=function(n){var a=this.activeIntervals=clone$4(n);if(a)for(var l=a.length-1;l>=0;l--)asc$2(a[l])},o.prototype.getActiveState=function(n){var a=this.activeIntervals;if(!a.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(a.length===1){var l=a[0];if(l[0]<=n&&n<=l[1])return"active"}else for(var c=0,u=a.length;c<u;c++)if(a[c][0]<=n&&n<=a[c][1])return"active";return"inactive"},o}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(s){__extends$1(o,s);function o(n){var a=s.call(this)||this;return a._track=[],a._covers=[],a._handlers={},process.env.NODE_ENV!=="production"&&assert(n),a._zr=n,a.group=new Group$3,a._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,c){this._handlers[c]=bind$1(l,this)},a),a}return o.prototype.enableBrush=function(n){return process.env.NODE_ENV!=="production"&&assert(this._mounted),this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},o.prototype._doEnableBrush=function(n){var a=this._zr;this._enableGlobalPan||take(a,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,c){a.on(c,l)}),this._brushType=n.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),n,!0)},o.prototype._doDisableBrush=function(){var n=this._zr;release(n,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(a,l){n.off(l,a)}),this._brushType=this._brushOption=null},o.prototype.setPanels=function(n){if(n&&n.length){var a=this._panels={};each$f(n,function(l){a[l.panelId]=clone$4(l)})}else this._panels=null;return this},o.prototype.mount=function(n){n=n||{},process.env.NODE_ENV!=="production"&&(this._mounted=!0),this._enableGlobalPan=n.enableGlobalPan;var a=this.group;return this._zr.add(a),a.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=a.getLocalTransform(),this},o.prototype.updateCovers=function(n){process.env.NODE_ENV!=="production"&&assert(this._mounted),n=map$1(n,function(v){return merge(clone$4(DEFAULT_BRUSH_OPT),v,!0)});var a="\0-brush-index-",l=this._covers,c=this._covers=[],u=this,d=this._creatingCover;return new DataDiffer(l,n,f,h).add(g).update(g).remove(p).execute(),this;function h(v,b){return(v.id!=null?v.id:a+b)+"-"+v.brushType}function f(v,b){return h(v.__brushOption,b)}function g(v,b){var _=n[v];if(b!=null&&l[b]===d)c[v]=l[b];else{var w=c[v]=b!=null?(l[b].__brushOption=_,l[b]):endCreating(u,createCover(u,_));updateCoverAfterCreation(u,w)}}function p(v){l[v]!==d&&u.group.remove(l[v])}},o.prototype.unmount=function(){if(!(process.env.NODE_ENV!=="production"&&!this._mounted))return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),process.env.NODE_ENV!=="production"&&(this._mounted=!1),this},o.prototype.dispose=function(){this.unmount(),this.off()},o}(Eventful);function createCover(s,o){var n=coverRenderers[o.brushType].createCover(s,o);return n.__brushOption=o,updateZ$1(n,o),s.group.add(n),n}function endCreating(s,o){var n=getCoverRenderer(o);return n.endCreating&&(n.endCreating(s,o),updateZ$1(o,o.__brushOption)),o}function updateCoverShape(s,o){var n=o.__brushOption;getCoverRenderer(o).updateCoverShape(s,o,n.range,n)}function updateZ$1(s,o){var n=o.z;n==null&&(n=COVER_Z),s.traverse(function(a){a.z=n,a.z2=n})}function updateCoverAfterCreation(s,o){getCoverRenderer(o).updateCommon(s,o),updateCoverShape(s,o)}function getCoverRenderer(s){return coverRenderers[s.__brushOption.brushType]}function getPanelByPoint(s,o,n){var a=s._panels;if(!a)return BRUSH_PANEL_GLOBAL;var l,c=s._transform;return each$f(a,function(u){u.isTargetByCursor(o,n,c)&&(l=u)}),l}function getPanelByCover(s,o){var n=s._panels;if(!n)return BRUSH_PANEL_GLOBAL;var a=o.__brushOption.panelId;return a!=null?n[a]:BRUSH_PANEL_GLOBAL}function clearCovers(s){var o=s._covers,n=o.length;return each$f(o,function(a){s.group.remove(a)},s),o.length=0,!!n}function trigger(s,o){var n=map$1(s._covers,function(a){var l=a.__brushOption,c=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:c}});s.trigger("brush",{areas:n,isEnd:!!o.isEnd,removeOnClick:!!o.removeOnClick})}function shouldShowCover(s){var o=s._track;if(!o.length)return!1;var n=o[o.length-1],a=o[0],l=n[0]-a[0],c=n[1]-a[1],u=mathPow(l*l+c*c,.5);return u>UNSELECT_THRESHOLD}function getTrackEnds(s){var o=s.length-1;return o<0&&(o=0),[s[0],s[o]]}function createBaseRectCover(s,o,n,a){var l=new Group$3;return l.add(new Rect$2({name:"main",style:makeStyle(n),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,s,o,l,["n","s","w","e"]),ondragend:curry$1(trigger,o,{isEnd:!0})})),each$f(a,function(c){l.add(new Rect$2({name:c.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,s,o,l,c),ondragend:curry$1(trigger,o,{isEnd:!0})}))}),l}function updateBaseRect(s,o,n,a){var l=a.brushStyle.lineWidth||0,c=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),u=n[0][0],d=n[1][0],h=u-l/2,f=d-l/2,g=n[0][1],p=n[1][1],v=g-c+l/2,b=p-c+l/2,_=g-u,w=p-d,x=_+l,S=w+l;updateRectShape(s,o,"main",u,d,_,w),a.transformable&&(updateRectShape(s,o,"w",h,f,c,S),updateRectShape(s,o,"e",v,f,c,S),updateRectShape(s,o,"n",h,f,x,c),updateRectShape(s,o,"s",h,b,x,c),updateRectShape(s,o,"nw",h,f,c,c),updateRectShape(s,o,"ne",v,f,c,c),updateRectShape(s,o,"sw",h,b,c,c),updateRectShape(s,o,"se",v,b,c,c))}function updateCommon$1(s,o){var n=o.__brushOption,a=n.transformable,l=o.childAt(0);l.useStyle(makeStyle(n)),l.attr({silent:!a,cursor:a?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(c){var u=o.childOfName(c.join("")),d=c.length===1?getGlobalDirection1(s,c[0]):getGlobalDirection2(s,c);u&&u.attr({silent:!a,invisible:!a,cursor:a?CURSOR_MAP[d]+"-resize":null})})}function updateRectShape(s,o,n,a,l,c,u){var d=o.childOfName(n);d&&d.setShape(pointsToRect(clipByPanel(s,o,[[a,l],[a+c,l+u]])))}function makeStyle(s){return defaults({strokeNoScale:!0},s.brushStyle)}function formatRectRange(s,o,n,a){var l=[mathMin$1(s,n),mathMin$1(o,a)],c=[mathMax$1(s,n),mathMax$1(o,a)];return[[l[0],c[0]],[l[1],c[1]]]}function getTransform(s){return getTransform$1(s.group)}function getGlobalDirection1(s,o){var n={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(n[o],getTransform(s));return a[l]}function getGlobalDirection2(s,o){var n=[getGlobalDirection1(s,o[0]),getGlobalDirection1(s,o[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function driftRect(s,o,n,a,l,c){var u=n.__brushOption,d=s.toRectRange(u.range),h=toLocalDelta(o,l,c);each$f(a,function(f){var g=DIRECTION_MAP[f];d[g[0]][g[1]]+=h[g[0]]}),u.range=s.fromRectRange(formatRectRange(d[0][0],d[1][0],d[0][1],d[1][1])),updateCoverAfterCreation(o,n),trigger(o,{isEnd:!1})}function driftPolygon(s,o,n,a){var l=o.__brushOption.range,c=toLocalDelta(s,n,a);each$f(l,function(u){u[0]+=c[0],u[1]+=c[1]}),updateCoverAfterCreation(s,o),trigger(s,{isEnd:!1})}function toLocalDelta(s,o,n){var a=s.group,l=a.transformCoordToLocal(o,n),c=a.transformCoordToLocal(0,0);return[l[0]-c[0],l[1]-c[1]]}function clipByPanel(s,o,n){var a=getPanelByCover(s,o);return a&&a!==BRUSH_PANEL_GLOBAL?a.clipPath(n,s._transform):clone$4(n)}function pointsToRect(s){var o=mathMin$1(s[0][0],s[1][0]),n=mathMin$1(s[0][1],s[1][1]),a=mathMax$1(s[0][0],s[1][0]),l=mathMax$1(s[0][1],s[1][1]);return{x:o,y:n,width:a-o,height:l-n}}function resetCursor(s,o,n){if(!(!s._brushType||isOutsideZrArea(s,o.offsetX,o.offsetY))){var a=s._zr,l=s._covers,c=getPanelByPoint(s,o,n);if(!s._dragging)for(var u=0;u<l.length;u++){var d=l[u].__brushOption;if(c&&(c===BRUSH_PANEL_GLOBAL||d.panelId===c.panelId)&&coverRenderers[d.brushType].contain(l[u],n[0],n[1]))return}c&&a.setCursorStyle("crosshair")}}function preventDefault(s){var o=s.event;o.preventDefault&&o.preventDefault()}function mainShapeContain(s,o,n){return s.childOfName("main").contain(o,n)}function updateCoverByMouse(s,o,n,a){var l=s._creatingCover,c=s._creatingPanel,u=s._brushOption,d;if(s._track.push(n.slice()),shouldShowCover(s)||l){if(c&&!l){u.brushMode==="single"&&clearCovers(s);var h=clone$4(u);h.brushType=determineBrushType(h.brushType,c),h.panelId=c===BRUSH_PANEL_GLOBAL?null:c.panelId,l=s._creatingCover=createCover(s,h),s._covers.push(l)}if(l){var f=coverRenderers[determineBrushType(s._brushType,c)],g=l.__brushOption;g.range=f.getCreatingRange(clipByPanel(s,l,s._track)),a&&(endCreating(s,l),f.updateCommon(s,l)),updateCoverShape(s,l),d={isEnd:a}}}else a&&u.brushMode==="single"&&u.removeOnClick&&getPanelByPoint(s,o,n)&&clearCovers(s)&&(d={isEnd:a,removeOnClick:!0});return d}function determineBrushType(s,o){return s==="auto"?(process.env.NODE_ENV!=="production"&&assert(o&&o.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),o.defaultBrushType):s}var pointerHandlers={mousedown:function(s){if(this._dragging)handleDragEnd(this,s);else if(!s.target||!s.target.draggable){preventDefault(s);var o=this.group.transformCoordToLocal(s.offsetX,s.offsetY);this._creatingCover=null;var n=this._creatingPanel=getPanelByPoint(this,s,o);n&&(this._dragging=!0,this._track=[o.slice()])}},mousemove:function(s){var o=s.offsetX,n=s.offsetY,a=this.group.transformCoordToLocal(o,n);if(resetCursor(this,s,a),this._dragging){preventDefault(s);var l=updateCoverByMouse(this,s,a,!1);l&&trigger(this,l)}},mouseup:function(s){handleDragEnd(this,s)}};function handleDragEnd(s,o){if(s._dragging){preventDefault(o);var n=o.offsetX,a=o.offsetY,l=s.group.transformCoordToLocal(n,a),c=updateCoverByMouse(s,o,l,!0);s._dragging=!1,s._track=[],s._creatingCover=null,c&&trigger(s,c)}}function isOutsideZrArea(s,o,n){var a=s._zr;return o<0||o>a.getWidth()||n<0||n>a.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(s,o){function n(a){return a}return createBaseRectCover({toRectRange:n,fromRectRange:n},s,o,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(s){var o=getTrackEnds(s);return formatRectRange(o[1][0],o[1][1],o[0][0],o[0][1])},updateCoverShape:function(s,o,n,a){updateBaseRect(s,o,n,a)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(s,o){var n=new Group$3;return n.add(new Polyline$1({name:"main",style:makeStyle(o),silent:!0})),n},getCreatingRange:function(s){return s},endCreating:function(s,o){o.remove(o.childAt(0)),o.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,s,o),ondragend:curry$1(trigger,s,{isEnd:!0})}))},updateCoverShape:function(s,o,n,a){o.childAt(0).setShape({points:clipByPanel(s,o,n)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(s){return{createCover:function(o,n){return createBaseRectCover({toRectRange:function(a){var l=[a,[0,100]];return s&&l.reverse(),l},fromRectRange:function(a){return a[s]}},o,n,[[["w"],["e"]],[["n"],["s"]]][s])},getCreatingRange:function(o){var n=getTrackEnds(o),a=mathMin$1(n[0][s],n[1][s]),l=mathMax$1(n[0][s],n[1][s]);return[a,l]},updateCoverShape:function(o,n,a,l){var c,u=getPanelByCover(o,n);if(u!==BRUSH_PANEL_GLOBAL&&u.getLinearBrushOtherExtent)c=u.getLinearBrushOtherExtent(s);else{var d=o._zr;c=[0,[d.getWidth(),d.getHeight()][1-s]]}var h=[a,c];s&&h.reverse(),updateBaseRect(o,n,h,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(s){return s=normalizeRect(s),function(o){return clipPointsByRect(o,s)}}function makeLinearBrushOtherExtent(s,o){return s=normalizeRect(s),function(n){var a=o??n,l=a?s.width:s.height,c=a?s.x:s.y;return[c,c+(l||0)]}}function makeRectIsTargetByCursor(s,o,n){var a=normalizeRect(s);return function(l,c){return a.contain(c[0],c[1])&&!onIrrelevantElement(l,o,n)}}function normalizeRect(s){return BoundingRect.create(s)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a){s.prototype.init.apply(this,arguments),(this._brushController=new BrushController(a.getZr())).on("brush",bind$1(this._onBrush,this))},o.prototype.render=function(n,a,l,c){if(!fromAxisAreaSelect(n,a,c)){this.axisModel=n,this.api=l,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!n.get("show")){var d=getCoordSysModel(n,a),h=d.coordinateSystem,f=n.getAreaSelectStyle(),g=f.width,p=n.axis.dim,v=h.getAxisLayout(p),b=extend({strokeContainThreshold:g},v),_=new AxisBuilder(n,b);each$f(elementList$1,_.add,_),this._axisGroup.add(_.getGroup()),this._refreshBrushController(b,f,n,d,g,l),groupTransition(u,this._axisGroup,n)}}},o.prototype._refreshBrushController=function(n,a,l,c,u,d){var h=l.axis.getExtent(),f=h[1]-h[0],g=Math.min(30,Math.abs(f)*.1),p=BoundingRect.create({x:h[0],y:-u/2,width:f,height:u});p.x-=g,p.width+=2*g,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(p),isTargetByCursor:makeRectIsTargetByCursor(p,d,c),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(p,0)}]).enableBrush({brushType:"lineX",brushStyle:a,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},o.prototype._onBrush=function(n){var a=n.areas,l=this.axisModel,c=l.axis,u=map$1(a,function(d){return[c.coordToData(d.range[0],!0),c.coordToData(d.range[1],!0)]});(!l.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:u})},o.prototype.dispose=function(){this._brushController.dispose()},o.type="parallelAxis",o}(ComponentView);function fromAxisAreaSelect(s,o,n){return n&&n.type==="axisAreaSelect"&&o.findComponents({mainType:"parallelAxis",query:n})[0]===s}function getCoverInfoList(s){var o=s.axis;return map$1(s.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[o.dataToCoord(n[0],!0),o.dataToCoord(n[1],!0)]}})}function getCoordSysModel(s,o){return o.getComponent("parallel",s.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(s){s.registerAction(actionInfo,function(o,n){n.eachComponent({mainType:"parallelAxis",query:o},function(a){a.axis.model.setActiveIntervals(o.intervals)})}),s.registerAction("parallelAxisExpand",function(o,n){n.eachComponent({mainType:"parallel",query:o},function(a){a.setAxisExpand(o)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(s){s.registerComponentView(ParallelView),s.registerComponentModel(ParallelModel),s.registerCoordinateSystem("parallel",parallelCoordSysCreator),s.registerPreprocessor(parallelPreprocessor),s.registerComponentModel(ParallelAxisModel),s.registerComponentView(ParallelAxisView),axisModelCreator(s,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(s)}function install$B(s){use(install$C),s.registerChartView(ParallelView$1),s.registerSeriesModel(ParallelSeriesModel),s.registerVisual(s.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function s(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return s}(),SankeyPath=function(s){__extends$1(o,s);function o(n){return s.call(this,n)||this}return o.prototype.getDefaultShape=function(){return new SankeyPathShape},o.prototype.buildPath=function(n,a){var l=a.extent;n.moveTo(a.x1,a.y1),n.bezierCurveTo(a.cpx1,a.cpy1,a.cpx2,a.cpy2,a.x2,a.y2),a.orient==="vertical"?(n.lineTo(a.x2+l,a.y2),n.bezierCurveTo(a.cpx2+l,a.cpy2,a.cpx1+l,a.cpy1,a.x1+l,a.y1)):(n.lineTo(a.x2,a.y2+l),n.bezierCurveTo(a.cpx2,a.cpy2+l,a.cpx1,a.cpy1+l,a.x1,a.y1+l)),n.closePath()},o.prototype.highlight=function(){enterEmphasis(this)},o.prototype.downplay=function(){leaveEmphasis(this)},o}(Path),SankeyView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._focusAdjacencyDisabled=!1,n}return o.prototype.render=function(n,a,l){var c=this,u=n.getGraph(),d=this.group,h=n.layoutInfo,f=h.width,g=h.height,p=n.getData(),v=n.getData("edge"),b=n.get("orient");this._model=n,d.removeAll(),d.x=h.x,d.y=h.y,u.eachEdge(function(_){var w=new SankeyPath,x=getECData(w);x.dataIndex=_.dataIndex,x.seriesIndex=n.seriesIndex,x.dataType="edge";var S=_.getModel(),C=S.getModel("lineStyle"),T=C.get("curveness"),R=_.node1.getLayout(),A=_.node1.getModel(),M=A.get("localX"),D=A.get("localY"),O=_.node2.getLayout(),H=_.node2.getModel(),j=H.get("localX"),q=H.get("localY"),Y=_.getLayout(),ee,te,re,ae,ue,ce,le,ie;w.shape.extent=Math.max(1,Y.dy),w.shape.orient=b,b==="vertical"?(ee=(M!=null?M*f:R.x)+Y.sy,te=(D!=null?D*g:R.y)+R.dy,re=(j!=null?j*f:O.x)+Y.ty,ae=q!=null?q*g:O.y,ue=ee,ce=te*(1-T)+ae*T,le=re,ie=te*T+ae*(1-T)):(ee=(M!=null?M*f:R.x)+R.dx,te=(D!=null?D*g:R.y)+Y.sy,re=j!=null?j*f:O.x,ae=(q!=null?q*g:O.y)+Y.ty,ue=ee*(1-T)+re*T,ce=te,le=ee*T+re*(1-T),ie=ae),w.setShape({x1:ee,y1:te,x2:re,y2:ae,cpx1:ue,cpy1:ce,cpx2:le,cpy2:ie}),w.useStyle(C.getItemStyle()),applyCurveStyle(w.style,b,_);var de=""+S.get("value"),ge=getLabelStatesModels(S,"edgeLabel");setLabelStyle(w,ge,{labelFetcher:{getFormattedLabel:function(Se,Le,De,ke,Te,Ae){return n.getFormattedLabel(Se,Le,"edge",ke,retrieve3(Te,ge.normal&&ge.normal.get("formatter"),de),Ae)}},labelDataIndex:_.dataIndex,defaultText:de}),w.setTextConfig({position:"inside"});var pe=S.getModel("emphasis");setStatesStylesFromModel(w,S,"lineStyle",function(Se){var Le=Se.getItemStyle();return applyCurveStyle(Le,b,_),Le}),d.add(w),v.setItemGraphicEl(_.dataIndex,w);var be=pe.get("focus");toggleHoverEmphasis(w,be==="adjacency"?_.getAdjacentDataIndices():be==="trajectory"?_.getTrajectoryDataIndices():be,pe.get("blurScope"),pe.get("disabled"))}),u.eachNode(function(_){var w=_.getLayout(),x=_.getModel(),S=x.get("localX"),C=x.get("localY"),T=x.getModel("emphasis"),R=x.get(["itemStyle","borderRadius"])||0,A=new Rect$2({shape:{x:S!=null?S*f:w.x,y:C!=null?C*g:w.y,width:w.dx,height:w.dy,r:R},style:x.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(A,getLabelStatesModels(x),{labelFetcher:{getFormattedLabel:function(D,O){return n.getFormattedLabel(D,O,"node")}},labelDataIndex:_.dataIndex,defaultText:_.id}),A.disableLabelAnimation=!0,A.setStyle("fill",_.getVisual("color")),A.setStyle("decal",_.getVisual("style").decal),setStatesStylesFromModel(A,x),d.add(A),p.setItemGraphicEl(_.dataIndex,A),getECData(A).dataType="node";var M=T.get("focus");toggleHoverEmphasis(A,M==="adjacency"?_.getAdjacentDataIndices():M==="trajectory"?_.getTrajectoryDataIndices():M,T.get("blurScope"),T.get("disabled"))}),p.eachItemGraphicEl(function(_,w){var x=p.getItemModel(w);x.get("draggable")&&(_.drift=function(S,C){c._focusAdjacencyDisabled=!0,this.shape.x+=S,this.shape.y+=C,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:p.getRawIndex(w),localX:this.shape.x/f,localY:this.shape.y/g})},_.ondragend=function(){c._focusAdjacencyDisabled=!1},_.draggable=!0,_.cursor="move")}),!this._data&&n.isAnimationEnabled()&&d.setClipPath(createGridClipShape$1(d.getBoundingRect(),n,function(){d.removeClipPath()})),this._data=n.getData()},o.prototype.dispose=function(){},o.type="sankey",o}(ChartView);function applyCurveStyle(s,o,n){switch(s.fill){case"source":s.fill=n.node1.getVisual("color"),s.decal=n.node1.getVisual("style").decal;break;case"target":s.fill=n.node2.getVisual("color"),s.decal=n.node2.getVisual("style").decal;break;case"gradient":var a=n.node1.getVisual("color"),l=n.node2.getVisual("color");isString$2(a)&&isString$2(l)&&(s.fill=new LinearGradient(0,0,+(o==="horizontal"),+(o==="vertical"),[{color:a,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(s,o,n){var a=new Rect$2({shape:{x:s.x-10,y:s.y-10,width:0,height:s.height+20}});return initProps(a,{shape:{width:s.width+20}},o,n),a}var SankeySeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.getInitialData=function(n,a){var l=n.edges||n.links||[],c=n.data||n.nodes||[],u=n.levels||[];this.levelModels=[];for(var d=this.levelModels,h=0;h<u.length;h++)if(u[h].depth!=null&&u[h].depth>=0)d[u[h].depth]=new Model(u[h],this,a);else if(process.env.NODE_ENV!=="production")throw new Error("levels[i].depth is mandatory and should be natural number");var f=createGraphFromNodeEdge(c,l,this,!0,g);return f.data;function g(p,v){p.wrapMethod("getItemModel",function(b,_){var w=b.parentModel,x=w.getData().getItemLayout(_);if(x){var S=x.depth,C=w.levelModels[S];C&&(b.parentModel=C)}return b}),v.wrapMethod("getItemModel",function(b,_){var w=b.parentModel,x=w.getGraph().getEdgeByIndex(_),S=x.node1.getLayout();if(S){var C=S.depth,T=w.levelModels[C];T&&(b.parentModel=T)}return b})}},o.prototype.setNodePosition=function(n,a){var l=this.option.data||this.option.nodes,c=l[n];c.localX=a[0],c.localY=a[1]},o.prototype.getGraph=function(){return this.getData().graph},o.prototype.getEdgeData=function(){return this.getGraph().edgeData},o.prototype.formatTooltip=function(n,a,l){function c(b){return isNaN(b)||b==null}if(l==="edge"){var u=this.getDataParams(n,l),d=u.data,h=u.value,f=d.source+" -- "+d.target;return createTooltipMarkup("nameValue",{name:f,value:h,noValue:c(h)})}else{var g=this.getGraph().getNodeByIndex(n),p=g.getLayout().value,v=this.getDataParams(n,l).data.name;return createTooltipMarkup("nameValue",{name:v!=null?v+"":null,value:p,noValue:c(p)})}},o.prototype.optionUpdated=function(){},o.prototype.getDataParams=function(n,a){var l=s.prototype.getDataParams.call(this,n,a);if(l.value==null&&a==="node"){var c=this.getGraph().getNodeByIndex(n),u=c.getLayout().value;l.value=u}return l},o.type="series.sankey",o.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},o}(SeriesModel);function sankeyLayout(s,o){s.eachSeriesByType("sankey",function(n){var a=n.get("nodeWidth"),l=n.get("nodeGap"),c=getViewRect$1(n,o);n.layoutInfo=c;var u=c.width,d=c.height,h=n.getGraph(),f=h.nodes,g=h.edges;computeNodeValues(f);var p=filter(f,function(w){return w.getLayout().value===0}),v=p.length!==0?0:n.get("layoutIterations"),b=n.get("orient"),_=n.get("nodeAlign");layoutSankey(f,g,a,l,u,d,v,b,_)})}function getViewRect$1(s,o){return getLayoutRect(s.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})}function layoutSankey(s,o,n,a,l,c,u,d,h){computeNodeBreadths(s,o,n,l,c,d,h),computeNodeDepths(s,o,c,l,a,u,d),computeEdgeDepths(s,d)}function computeNodeValues(s){each$f(s,function(o){var n=sum(o.outEdges,getEdgeValue),a=sum(o.inEdges,getEdgeValue),l=o.getValue()||0,c=Math.max(n,a,l);o.setLayout({value:c},!0)})}function computeNodeBreadths(s,o,n,a,l,c,u){for(var d=[],h=[],f=[],g=[],p=0,v=0;v<o.length;v++)d[v]=1;for(var v=0;v<s.length;v++)h[v]=s[v].inEdges.length,h[v]===0&&f.push(s[v]);for(var b=-1;f.length;){for(var _=0;_<f.length;_++){var w=f[_],x=w.hostGraph.data.getRawDataItem(w.dataIndex),S=x.depth!=null&&x.depth>=0;S&&x.depth>b&&(b=x.depth),w.setLayout({depth:S?x.depth:p},!0),c==="vertical"?w.setLayout({dy:n},!0):w.setLayout({dx:n},!0);for(var C=0;C<w.outEdges.length;C++){var T=w.outEdges[C],R=o.indexOf(T);d[R]=0;var A=T.node2,M=s.indexOf(A);--h[M]===0&&g.indexOf(A)<0&&g.push(A)}}++p,f=g,g=[]}for(var v=0;v<d.length;v++)if(d[v]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var D=b>p-1?b:p-1;u&&u!=="left"&&adjustNodeWithNodeAlign(s,u,c,D);var O=c==="vertical"?(l-n)/D:(a-n)/D;scaleNodeBreadths(s,O,c)}function isNodeDepth(s){var o=s.hostGraph.data.getRawDataItem(s.dataIndex);return o.depth!=null&&o.depth>=0}function adjustNodeWithNodeAlign(s,o,n,a){if(o==="right"){for(var l=[],c=s,u=0;c.length;){for(var d=0;d<c.length;d++){var h=c[d];h.setLayout({skNodeHeight:u},!0);for(var f=0;f<h.inEdges.length;f++){var g=h.inEdges[f];l.indexOf(g.node1)<0&&l.push(g.node1)}}c=l,l=[],++u}each$f(s,function(p){isNodeDepth(p)||p.setLayout({depth:Math.max(0,a-p.getLayout().skNodeHeight)},!0)})}else o==="justify"&&moveSinksRight(s,a)}function moveSinksRight(s,o){each$f(s,function(n){!isNodeDepth(n)&&!n.outEdges.length&&n.setLayout({depth:o},!0)})}function scaleNodeBreadths(s,o,n){each$f(s,function(a){var l=a.getLayout().depth*o;n==="vertical"?a.setLayout({y:l},!0):a.setLayout({x:l},!0)})}function computeNodeDepths(s,o,n,a,l,c,u){var d=prepareNodesByBreadth(s,u);initializeNodeDepth(d,o,n,a,l,u),resolveCollisions(d,l,n,a,u);for(var h=1;c>0;c--)h*=.99,relaxRightToLeft(d,h,u),resolveCollisions(d,l,n,a,u),relaxLeftToRight(d,h,u),resolveCollisions(d,l,n,a,u)}function prepareNodesByBreadth(s,o){var n=[],a=o==="vertical"?"y":"x",l=groupData(s,function(c){return c.getLayout()[a]});return l.keys.sort(function(c,u){return c-u}),each$f(l.keys,function(c){n.push(l.buckets.get(c))}),n}function initializeNodeDepth(s,o,n,a,l,c){var u=1/0;each$f(s,function(d){var h=d.length,f=0;each$f(d,function(p){f+=p.getLayout().value});var g=c==="vertical"?(a-(h-1)*l)/f:(n-(h-1)*l)/f;g<u&&(u=g)}),each$f(s,function(d){each$f(d,function(h,f){var g=h.getLayout().value*u;c==="vertical"?(h.setLayout({x:f},!0),h.setLayout({dx:g},!0)):(h.setLayout({y:f},!0),h.setLayout({dy:g},!0))})}),each$f(o,function(d){var h=+d.getValue()*u;d.setLayout({dy:h},!0)})}function resolveCollisions(s,o,n,a,l){var c=l==="vertical"?"x":"y";each$f(s,function(u){u.sort(function(w,x){return w.getLayout()[c]-x.getLayout()[c]});for(var d,h,f,g=0,p=u.length,v=l==="vertical"?"dx":"dy",b=0;b<p;b++)h=u[b],f=g-h.getLayout()[c],f>0&&(d=h.getLayout()[c]+f,l==="vertical"?h.setLayout({x:d},!0):h.setLayout({y:d},!0)),g=h.getLayout()[c]+h.getLayout()[v]+o;var _=l==="vertical"?a:n;if(f=g-o-_,f>0){d=h.getLayout()[c]-f,l==="vertical"?h.setLayout({x:d},!0):h.setLayout({y:d},!0),g=d;for(var b=p-2;b>=0;--b)h=u[b],f=h.getLayout()[c]+h.getLayout()[v]+o-g,f>0&&(d=h.getLayout()[c]-f,l==="vertical"?h.setLayout({x:d},!0):h.setLayout({y:d},!0)),g=h.getLayout()[c]}})}function relaxRightToLeft(s,o,n){each$f(s.slice().reverse(),function(a){each$f(a,function(l){if(l.outEdges.length){var c=sum(l.outEdges,weightedTarget,n)/sum(l.outEdges,getEdgeValue);if(isNaN(c)){var u=l.outEdges.length;c=u?sum(l.outEdges,centerTarget,n)/u:0}if(n==="vertical"){var d=l.getLayout().x+(c-center(l,n))*o;l.setLayout({x:d},!0)}else{var h=l.getLayout().y+(c-center(l,n))*o;l.setLayout({y:h},!0)}}})})}function weightedTarget(s,o){return center(s.node2,o)*s.getValue()}function centerTarget(s,o){return center(s.node2,o)}function weightedSource(s,o){return center(s.node1,o)*s.getValue()}function centerSource(s,o){return center(s.node1,o)}function center(s,o){return o==="vertical"?s.getLayout().x+s.getLayout().dx/2:s.getLayout().y+s.getLayout().dy/2}function getEdgeValue(s){return s.getValue()}function sum(s,o,n){for(var a=0,l=s.length,c=-1;++c<l;){var u=+o(s[c],n);isNaN(u)||(a+=u)}return a}function relaxLeftToRight(s,o,n){each$f(s,function(a){each$f(a,function(l){if(l.inEdges.length){var c=sum(l.inEdges,weightedSource,n)/sum(l.inEdges,getEdgeValue);if(isNaN(c)){var u=l.inEdges.length;c=u?sum(l.inEdges,centerSource,n)/u:0}if(n==="vertical"){var d=l.getLayout().x+(c-center(l,n))*o;l.setLayout({x:d},!0)}else{var h=l.getLayout().y+(c-center(l,n))*o;l.setLayout({y:h},!0)}}})})}function computeEdgeDepths(s,o){var n=o==="vertical"?"x":"y";each$f(s,function(a){a.outEdges.sort(function(l,c){return l.node2.getLayout()[n]-c.node2.getLayout()[n]}),a.inEdges.sort(function(l,c){return l.node1.getLayout()[n]-c.node1.getLayout()[n]})}),each$f(s,function(a){var l=0,c=0;each$f(a.outEdges,function(u){u.setLayout({sy:l},!0),l+=u.getLayout().dy}),each$f(a.inEdges,function(u){u.setLayout({ty:c},!0),c+=u.getLayout().dy})})}function sankeyVisual(s){s.eachSeriesByType("sankey",function(o){var n=o.getGraph(),a=n.nodes,l=n.edges;if(a.length){var c=1/0,u=-1/0;each$f(a,function(d){var h=d.getLayout().value;h<c&&(c=h),h>u&&(u=h)}),each$f(a,function(d){var h=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[c,u],visual:o.get("color")}),f=h.mapValueToVisual(d.getLayout().value),g=d.getModel().get(["itemStyle","color"]);g!=null?(d.setVisual("color",g),d.setVisual("style",{fill:g})):(d.setVisual("color",f),d.setVisual("style",{fill:f}))})}l.length&&each$f(l,function(d){var h=d.getModel().get("lineStyle");d.setVisual("style",h)})})}function install$A(s){s.registerChartView(SankeyView),s.registerSeriesModel(SankeySeriesModel),s.registerLayout(sankeyLayout),s.registerVisual(sankeyVisual),s.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(o,n){n.eachComponent({mainType:"series",subType:"sankey",query:o},function(a){a.setNodePosition(o.dataIndex,[o.localX,o.localY])})})}var WhiskerBoxCommonMixin=function(){function s(){}return s.prototype._hasEncodeRule=function(o){var n=this.getEncode();return n&&n.get(o)!=null},s.prototype.getInitialData=function(o,n){var a,l=n.getComponent("xAxis",this.get("xAxisIndex")),c=n.getComponent("yAxis",this.get("yAxisIndex")),u=l.get("type"),d=c.get("type"),h;u==="category"?(o.layout="horizontal",a=l.getOrdinalMeta(),h=!this._hasEncodeRule("x")):d==="category"?(o.layout="vertical",a=c.getOrdinalMeta(),h=!this._hasEncodeRule("y")):o.layout=o.layout||"horizontal";var f=["x","y"],g=o.layout==="horizontal"?0:1,p=this._baseAxisDim=f[g],v=f[1-g],b=[l,c],_=b[g].get("type"),w=b[1-g].get("type"),x=o.data;if(x&&h){var S=[];each$f(x,function(R,A){var M;isArray$1(R)?(M=R.slice(),R.unshift(A)):isArray$1(R.value)?(M=extend({},R),M.value=M.value.slice(),R.value.unshift(A)):M=R,S.push(M)}),o.data=S}var C=this.defaultValueDimensions,T=[{name:p,type:getDimensionTypeByAxis(_),ordinalMeta:a,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:v,type:getDimensionTypeByAxis(w),dimsDef:C.slice()}];return createSeriesDataSimply(this,{coordDimensions:T,dimensionsCount:C.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,T,this)})},s.prototype.getBaseAxis=function(){var o=this._baseAxisDim;return this.ecModel.getComponent(o+"Axis",this.get(o+"AxisIndex")).axis},s}(),BoxplotSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return o.type="series.boxplot",o.dependencies=["xAxis","yAxis","grid"],o.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},o}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=n.getData(),u=this.group,d=this._data;this._data||u.removeAll();var h=n.get("layout")==="horizontal"?1:0;c.diff(d).add(function(f){if(c.hasValue(f)){var g=c.getItemLayout(f),p=createNormalBox$1(g,c,f,h,!0);c.setItemGraphicEl(f,p),u.add(p)}}).update(function(f,g){var p=d.getItemGraphicEl(g);if(!c.hasValue(f)){u.remove(p);return}var v=c.getItemLayout(f);p?(saveOldStyle(p),updateNormalBoxData(v,p,c,f)):p=createNormalBox$1(v,c,f,h),u.add(p),c.setItemGraphicEl(f,p)}).remove(function(f){var g=d.getItemGraphicEl(f);g&&u.remove(g)}).execute(),this._data=c},o.prototype.remove=function(n){var a=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(c){c&&a.remove(c)})},o.type="boxplot",o}(ChartView),BoxPathShape=function(){function s(){}return s}(),BoxPath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="boxplotBoxPath",a}return o.prototype.getDefaultShape=function(){return new BoxPathShape},o.prototype.buildPath=function(n,a){var l=a.points,c=0;for(n.moveTo(l[c][0],l[c][1]),c++;c<4;c++)n.lineTo(l[c][0],l[c][1]);for(n.closePath();c<l.length;c++)n.moveTo(l[c][0],l[c][1]),c++,n.lineTo(l[c][0],l[c][1])},o}(Path);function createNormalBox$1(s,o,n,a,l){var c=s.ends,u=new BoxPath({shape:{points:l?transInit$1(c,a,s):c}});return updateNormalBoxData(s,u,o,n,l),u}function updateNormalBoxData(s,o,n,a,l){var c=n.hostModel,u=graphic$1[l?"initProps":"updateProps"];u(o,{shape:{points:s.ends}},c,a),o.useStyle(n.getItemVisual(a,"style")),o.style.strokeNoScale=!0,o.z2=100;var d=n.getItemModel(a),h=d.getModel("emphasis");setStatesStylesFromModel(o,d),toggleHoverEmphasis(o,h.get("focus"),h.get("blurScope"),h.get("disabled"))}function transInit$1(s,o,n){return map$1(s,function(a){return a=a.slice(),a[o]=n.initBaseline,a})}var each$9=each$f;function boxplotLayout(s){var o=groupSeriesByAxis(s);each$9(o,function(n){var a=n.seriesModels;a.length&&(calculateBase(n),each$9(a,function(l,c){layoutSingleSeries(l,n.boxOffsetList[c],n.boxWidthList[c])}))})}function groupSeriesByAxis(s){var o=[],n=[];return s.eachSeriesByType("boxplot",function(a){var l=a.getBaseAxis(),c=indexOf(n,l);c<0&&(c=n.length,n[c]=l,o[c]={axis:l,seriesModels:[]}),o[c].seriesModels.push(a)}),o}function calculateBase(s){var o=s.axis,n=s.seriesModels,a=n.length,l=s.boxWidthList=[],c=s.boxOffsetList=[],u=[],d;if(o.type==="category")d=o.getBandWidth();else{var h=0;each$9(n,function(_){h=Math.max(h,_.getData().count())});var f=o.getExtent();d=Math.abs(f[1]-f[0])/h}each$9(n,function(_){var w=_.get("boxWidth");isArray$1(w)||(w=[w,w]),u.push([parsePercent(w[0],d)||0,parsePercent(w[1],d)||0])});var g=d*.8-2,p=g/a*.3,v=(g-p*(a-1))/a,b=v/2-g/2;each$9(n,function(_,w){c.push(b),b+=p+v,l.push(Math.min(Math.max(v,u[w][0]),u[w][1]))})}function layoutSingleSeries(s,o,n){var a=s.coordinateSystem,l=s.getData(),c=n/2,u=s.get("layout")==="horizontal"?0:1,d=1-u,h=["x","y"],f=l.mapDimension(h[u]),g=l.mapDimensionsAll(h[d]);if(f==null||g.length<5)return;for(var p=0;p<l.count();p++){var v=l.get(f,p),b=T(v,g[2],p),_=T(v,g[0],p),w=T(v,g[1],p),x=T(v,g[3],p),S=T(v,g[4],p),C=[];R(C,w,!1),R(C,x,!0),C.push(_,w,S,x),A(C,_),A(C,S),A(C,b),l.setItemLayout(p,{initBaseline:b[d],ends:C})}function T(M,D,O){var H=l.get(D,O),j=[];j[u]=M,j[d]=H;var q;return isNaN(M)||isNaN(H)?q=[NaN,NaN]:(q=a.dataToPoint(j),q[u]+=o),q}function R(M,D,O){var H=D.slice(),j=D.slice();H[u]+=c,j[u]-=c,O?M.push(H,j):M.push(j,H)}function A(M,D){var O=D.slice(),H=D.slice();O[u]-=c,H[u]+=c,M.push(O,H)}}function prepareBoxplotData(s,o){o=o||{};for(var n=[],a=[],l=o.boundIQR,c=l==="none"||l===0,u=0;u<s.length;u++){var d=asc$2(s[u].slice()),h=quantile(d,.25),f=quantile(d,.5),g=quantile(d,.75),p=d[0],v=d[d.length-1],b=(l??1.5)*(g-h),_=c?p:Math.max(p,h-b),w=c?v:Math.min(v,g+b),x=o.itemNameFormatter,S=isFunction$1(x)?x({value:u}):isString$2(x)?x.replace("{value}",u+""):u+"";n.push([S,_,h,f,g,w]);for(var C=0;C<d.length;C++){var T=d[C];if(T<_||T>w){var R=[S,T];a.push(R)}}}return{boxData:n,outliers:a}}var boxplotTransform={type:"echarts:boxplot",transform:function(o){var n=o.upstream;if(n.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var a="";process.env.NODE_ENV!=="production"&&(a=makePrintable("source data is not applicable for this boxplot transform. Expect number[][].")),throwError(a)}var l=prepareBoxplotData(n.getRawData(),o.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:l.boxData},{data:l.outliers}]}};function install$z(s){s.registerSeriesModel(BoxplotSeriesModel),s.registerChartView(BoxplotView),s.registerLayout(boxplotLayout),s.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(s,o){return o.get(s>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(s,o){return o.get(s===0?dojiBorderColorQuery:s>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(s,o){if(!o.isSeriesFiltered(s)){var n=s.pipelineContext.large;return!n&&{progress:function(a,l){for(var c;(c=a.next())!=null;){var u=l.getItemModel(c),d=l.getItemLayout(c).sign,h=u.getItemStyle();h.fill=getColor(d,u),h.stroke=getBorderColor(d,u)||h.fill;var f=l.ensureUniqueItemVisual(c,"style");extend(f,h)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},o.prototype.incrementalPrepareRender=function(n,a,l){this._clear(),this._updateDrawMode(n)},o.prototype.incrementalRender=function(n,a,l,c){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,a):this._incrementalRenderNormal(n,a)},o.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},o.prototype._updateDrawMode=function(n){var a=n.pipelineContext.large;(this._isLargeDraw==null||a!==this._isLargeDraw)&&(this._isLargeDraw=a,this._clear())},o.prototype._renderNormal=function(n){var a=n.getData(),l=this._data,c=this.group,u=a.getLayout("isSimpleBox"),d=n.get("clip",!0),h=n.coordinateSystem,f=h.getArea&&h.getArea();this._data||c.removeAll(),a.diff(l).add(function(g){if(a.hasValue(g)){var p=a.getItemLayout(g);if(d&&isNormalBoxClipped(f,p))return;var v=createNormalBox(p,g,!0);initProps(v,{shape:{points:p.ends}},n,g),setBoxCommon(v,a,g,u),c.add(v),a.setItemGraphicEl(g,v)}}).update(function(g,p){var v=l.getItemGraphicEl(p);if(!a.hasValue(g)){c.remove(v);return}var b=a.getItemLayout(g);if(d&&isNormalBoxClipped(f,b)){c.remove(v);return}v?(updateProps$1(v,{shape:{points:b.ends}},n,g),saveOldStyle(v)):v=createNormalBox(b),setBoxCommon(v,a,g,u),c.add(v),a.setItemGraphicEl(g,v)}).remove(function(g){var p=l.getItemGraphicEl(g);p&&c.remove(p)}).execute(),this._data=a},o.prototype._renderLarge=function(n){this._clear(),createLarge(n,this.group);var a=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;a?this.group.setClipPath(a):this.group.removeClipPath()},o.prototype._incrementalRenderNormal=function(n,a){for(var l=a.getData(),c=l.getLayout("isSimpleBox"),u;(u=n.next())!=null;){var d=l.getItemLayout(u),h=createNormalBox(d);setBoxCommon(h,l,u,c),h.incremental=!0,this.group.add(h),this._progressiveEls.push(h)}},o.prototype._incrementalRenderLarge=function(n,a){createLarge(a,this.group,this._progressiveEls,!0)},o.prototype.remove=function(n){this._clear()},o.prototype._clear=function(){this.group.removeAll(),this._data=null},o.type="candlestick",o}(ChartView),NormalBoxPathShape=function(){function s(){}return s}(),NormalBoxPath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="normalCandlestickBox",a}return o.prototype.getDefaultShape=function(){return new NormalBoxPathShape},o.prototype.buildPath=function(n,a){var l=a.points;this.__simpleBox?(n.moveTo(l[4][0],l[4][1]),n.lineTo(l[6][0],l[6][1])):(n.moveTo(l[0][0],l[0][1]),n.lineTo(l[1][0],l[1][1]),n.lineTo(l[2][0],l[2][1]),n.lineTo(l[3][0],l[3][1]),n.closePath(),n.moveTo(l[4][0],l[4][1]),n.lineTo(l[5][0],l[5][1]),n.moveTo(l[6][0],l[6][1]),n.lineTo(l[7][0],l[7][1]))},o}(Path);function createNormalBox(s,o,n){var a=s.ends;return new NormalBoxPath({shape:{points:n?transInit(a,s):a},z2:100})}function isNormalBoxClipped(s,o){for(var n=!0,a=0;a<o.ends.length;a++)if(s.contain(o.ends[a][0],o.ends[a][1])){n=!1;break}return n}function setBoxCommon(s,o,n,a){var l=o.getItemModel(n);s.useStyle(o.getItemVisual(n,"style")),s.style.strokeNoScale=!0,s.__simpleBox=a,setStatesStylesFromModel(s,l);var c=o.getItemLayout(n).sign;each$f(s.states,function(d,h){var f=l.getModel(h),g=getColor(c,f),p=getBorderColor(c,f)||g,v=d.style||(d.style={});g&&(v.fill=g),p&&(v.stroke=p)});var u=l.getModel("emphasis");toggleHoverEmphasis(s,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function transInit(s,o){return map$1(s,function(n){return n=n.slice(),n[1]=o.initBaseline,n})}var LargeBoxPathShape=function(){function s(){}return s}(),LargeBoxPath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a.type="largeCandlestickBox",a}return o.prototype.getDefaultShape=function(){return new LargeBoxPathShape},o.prototype.buildPath=function(n,a){for(var l=a.points,c=0;c<l.length;)if(this.__sign===l[c++]){var u=l[c++];n.moveTo(u,l[c++]),n.lineTo(u,l[c++])}else c+=3},o}(Path);function createLarge(s,o,n,a){var l=s.getData(),c=l.getLayout("largePoints"),u=new LargeBoxPath({shape:{points:c},__sign:1,ignoreCoarsePointer:!0});o.add(u);var d=new LargeBoxPath({shape:{points:c},__sign:-1,ignoreCoarsePointer:!0});o.add(d);var h=new LargeBoxPath({shape:{points:c},__sign:0,ignoreCoarsePointer:!0});o.add(h),setLargeStyle(1,u,s),setLargeStyle(-1,d,s),setLargeStyle(0,h,s),a&&(u.incremental=!0,d.incremental=!0),n&&n.push(u,d)}function setLargeStyle(s,o,n,a){var l=getBorderColor(s,n)||getColor(s,n),c=n.getModel("itemStyle").getItemStyle(SKIP_PROPS);o.useStyle(c),o.style.fill=null,o.style.stroke=l}var CandlestickSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return o.prototype.getShadowDim=function(){return"open"},o.prototype.brushSelector=function(n,a,l){var c=a.getItemLayout(n);return c&&l.rect(c.brushRect)},o.type="series.candlestick",o.dependencies=["xAxis","yAxis","grid"],o.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},o}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(s){!s||!isArray$1(s.series)||each$f(s.series,function(o){isObject$3(o)&&o.type==="k"&&(o.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(s){var o=s.coordinateSystem,n=s.getData(),a=calculateCandleWidth(s,n),l=0,c=1,u=["x","y"],d=n.getDimensionIndex(n.mapDimension(u[l])),h=map$1(n.mapDimensionsAll(u[c]),n.getDimensionIndex,n),f=h[0],g=h[1],p=h[2],v=h[3];if(n.setLayout({candleWidth:a,isSimpleBox:a<=1.3}),d<0||h.length<4)return;return{progress:s.pipelineContext.large?_:b};function b(w,x){for(var S,C=x.getStore();(S=w.next())!=null;){var T=C.get(d,S),R=C.get(f,S),A=C.get(g,S),M=C.get(p,S),D=C.get(v,S),O=Math.min(R,A),H=Math.max(R,A),j=ue(O,T),q=ue(H,T),Y=ue(M,T),ee=ue(D,T),te=[];ce(te,q,0),ce(te,j,1),te.push(ie(ee),ie(q),ie(Y),ie(j));var re=x.getItemModel(S),ae=!!re.get(["itemStyle","borderColorDoji"]);x.setItemLayout(S,{sign:getSign(C,S,R,A,g,ae),initBaseline:R>A?q[c]:j[c],ends:te,brushRect:le(M,D,T)})}function ue(de,ge){var pe=[];return pe[l]=ge,pe[c]=de,isNaN(ge)||isNaN(de)?[NaN,NaN]:o.dataToPoint(pe)}function ce(de,ge,pe){var be=ge.slice(),Se=ge.slice();be[l]=subPixelOptimize(be[l]+a/2,1,!1),Se[l]=subPixelOptimize(Se[l]-a/2,1,!0),pe?de.push(be,Se):de.push(Se,be)}function le(de,ge,pe){var be=ue(de,pe),Se=ue(ge,pe);return be[l]-=a/2,Se[l]-=a/2,{x:be[0],y:be[1],width:a,height:Se[1]-be[1]}}function ie(de){return de[l]=subPixelOptimize(de[l],1),de}}function _(w,x){for(var S=createFloat32Array(w.count*4),C=0,T,R=[],A=[],M,D=x.getStore(),O=!!s.get(["itemStyle","borderColorDoji"]);(M=w.next())!=null;){var H=D.get(d,M),j=D.get(f,M),q=D.get(g,M),Y=D.get(p,M),ee=D.get(v,M);if(isNaN(H)||isNaN(Y)||isNaN(ee)){S[C++]=NaN,C+=3;continue}S[C++]=getSign(D,M,j,q,g,O),R[l]=H,R[c]=Y,T=o.dataToPoint(R,null,A),S[C++]=T?T[0]:NaN,S[C++]=T?T[1]:NaN,R[c]=ee,T=o.dataToPoint(R,null,A),S[C++]=T?T[1]:NaN}x.setLayout("largePoints",S)}}};function getSign(s,o,n,a,l,c){var u;return n>a?u=-1:n<a?u=1:u=c?0:o>0?s.get(l,o-1)<=a?1:-1:1,u}function calculateCandleWidth(s,o){var n=s.getBaseAxis(),a,l=n.type==="category"?n.getBandWidth():(a=n.getExtent(),Math.abs(a[1]-a[0])/o.count()),c=parsePercent(retrieve2(s.get("barMaxWidth"),l),l),u=parsePercent(retrieve2(s.get("barMinWidth"),1),l),d=s.get("barWidth");return d!=null?parsePercent(d,l):Math.max(Math.min(l/2,c),u)}function install$y(s){s.registerChartView(CandlestickView),s.registerSeriesModel(CandlestickSeriesModel),s.registerPreprocessor(candlestickPreprocessor),s.registerVisual(candlestickVisual),s.registerLayout(candlestickLayout)}function updateRipplePath(s,o){var n=o.rippleEffectColor||o.color;s.eachChild(function(a){a.attr({z:o.z,zlevel:o.zlevel,style:{stroke:o.brushType==="stroke"?n:null,fill:o.brushType==="fill"?n:null}})})}var EffectSymbol=function(s){__extends$1(o,s);function o(n,a){var l=s.call(this)||this,c=new Symbol$1(n,a),u=new Group$3;return l.add(c),l.add(u),l.updateData(n,a),l}return o.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},o.prototype.startEffectAnimation=function(n){for(var a=n.symbolType,l=n.color,c=n.rippleNumber,u=this.childAt(1),d=0;d<c;d++){var h=createSymbol$1(a,-1,-1,2,2,l);h.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var f=-d/c*n.period+n.effectOffset;h.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(f).start(),h.animateStyle(!0).when(n.period,{opacity:0}).delay(f).start(),u.add(h)}updateRipplePath(u,n)},o.prototype.updateEffectAnimation=function(n){for(var a=this._effectCfg,l=this.childAt(1),c=["symbolType","period","rippleScale","rippleNumber"],u=0;u<c.length;u++){var d=c[u];if(a[d]!==n[d]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}updateRipplePath(l,n)},o.prototype.highlight=function(){enterEmphasis(this)},o.prototype.downplay=function(){leaveEmphasis(this)},o.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},o.prototype.updateData=function(n,a){var l=this,c=n.hostModel;this.childAt(0).updateData(n,a);var u=this.childAt(1),d=n.getItemModel(a),h=n.getItemVisual(a,"symbol"),f=normalizeSymbolSize(n.getItemVisual(a,"symbolSize")),g=n.getItemVisual(a,"style"),p=g&&g.fill,v=d.getModel("emphasis");u.setScale(f),u.traverse(function(x){x.setStyle("fill",p)});var b=normalizeSymbolOffset(n.getItemVisual(a,"symbolOffset"),f);b&&(u.x=b[0],u.y=b[1]);var _=n.getItemVisual(a,"symbolRotate");u.rotation=(_||0)*Math.PI/180||0;var w={};w.showEffectOn=c.get("showEffectOn"),w.rippleScale=d.get(["rippleEffect","scale"]),w.brushType=d.get(["rippleEffect","brushType"]),w.period=d.get(["rippleEffect","period"])*1e3,w.effectOffset=a/n.count(),w.z=c.getShallow("z")||0,w.zlevel=c.getShallow("zlevel")||0,w.symbolType=h,w.color=p,w.rippleEffectColor=d.get(["rippleEffect","color"]),w.rippleNumber=d.get(["rippleEffect","number"]),w.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(w):this.startEffectAnimation(w),this._effectCfg=w):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(x){x==="emphasis"?w.showEffectOn!=="render"&&l.startEffectAnimation(w):x==="normal"&&w.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=w,toggleHoverEmphasis(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},o.prototype.fadeOut=function(n){n&&n()},o}(Group$3),EffectScatterView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},o.prototype.render=function(n,a,l){var c=n.getData(),u=this._symbolDraw;u.updateData(c,{clipShape:this._getClipShape(n)}),this.group.add(u.group)},o.prototype._getClipShape=function(n){var a=n.coordinateSystem,l=a&&a.getArea&&a.getArea();return n.get("clip",!0)?l:null},o.prototype.updateTransform=function(n,a,l){var c=n.getData();this.group.dirty();var u=pointsLayout("").reset(n,a,l);u.progress&&u.progress({start:0,end:c.count(),count:c.count()},c),this._symbolDraw.updateLayout()},o.prototype._updateGroupTransform=function(n){var a=n.coordinateSystem;a&&a.getRoamTransform&&(this.group.transform=clone$2(a.getRoamTransform()),this.group.decomposeTransform())},o.prototype.remove=function(n,a){this._symbolDraw&&this._symbolDraw.remove(!0)},o.type="effectScatter",o}(ChartView),EffectScatterSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.hasSymbolVisual=!0,n}return o.prototype.getInitialData=function(n,a){return createSeriesData(null,this,{useEncodeDefaulter:!0})},o.prototype.brushSelector=function(n,a,l){return l.point(a.getItemLayout(n))},o.type="series.effectScatter",o.dependencies=["grid","polar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},o}(SeriesModel);function install$x(s){s.registerChartView(EffectScatterView),s.registerSeriesModel(EffectScatterSeriesModel),s.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this)||this;return c.add(c.createLine(n,a,l)),c._updateEffectSymbol(n,a),c}return o.prototype.createLine=function(n,a,l){return new Line(n,a,l)},o.prototype._updateEffectSymbol=function(n,a){var l=n.getItemModel(a),c=l.getModel("effect"),u=c.get("symbolSize"),d=c.get("symbol");isArray$1(u)||(u=[u,u]);var h=n.getItemVisual(a,"style"),f=c.get("color")||h&&h.stroke,g=this.childAt(1);this._symbolType!==d&&(this.remove(g),g=createSymbol$1(d,-.5,-.5,1,1,f),g.z2=100,g.culling=!0,this.add(g)),g&&(g.setStyle("shadowColor",f),g.setStyle(c.getItemStyle(["color"])),g.scaleX=u[0],g.scaleY=u[1],g.setColor(f),this._symbolType=d,this._symbolScale=u,this._updateEffectAnimation(n,c,a))},o.prototype._updateEffectAnimation=function(n,a,l){var c=this.childAt(1);if(c){var u=n.getItemLayout(l),d=a.get("period")*1e3,h=a.get("loop"),f=a.get("roundTrip"),g=a.get("constantSpeed"),p=retrieve(a.get("delay"),function(b){return b/n.count()*d/3});if(c.ignore=!0,this._updateAnimationPoints(c,u),g>0&&(d=this._getLineLength(c)/g*1e3),d!==this._period||h!==this._loop||f!==this._roundTrip){c.stopAnimation();var v=void 0;isFunction$1(p)?v=p(l):v=p,c.__t>0&&(v=-d*c.__t),this._animateSymbol(c,d,v,h,f)}this._period=d,this._loop=h,this._roundTrip=f}},o.prototype._animateSymbol=function(n,a,l,c,u){if(a>0){n.__t=0;var d=this,h=n.animate("",c).when(u?a*2:a,{__t:u?2:1}).delay(l).during(function(){d._updateSymbolPosition(n)});c||h.done(function(){d.remove(n)}),h.start()}},o.prototype._getLineLength=function(n){return dist$1(n.__p1,n.__cp1)+dist$1(n.__cp1,n.__p2)},o.prototype._updateAnimationPoints=function(n,a){n.__p1=a[0],n.__p2=a[1],n.__cp1=a[2]||[(a[0][0]+a[1][0])/2,(a[0][1]+a[1][1])/2]},o.prototype.updateData=function(n,a,l){this.childAt(0).updateData(n,a,l),this._updateEffectSymbol(n,a)},o.prototype._updateSymbolPosition=function(n){var a=n.__p1,l=n.__p2,c=n.__cp1,u=n.__t<1?n.__t:2-n.__t,d=[n.x,n.y],h=d.slice(),f=quadraticAt$1,g=quadraticDerivativeAt;d[0]=f(a[0],c[0],l[0],u),d[1]=f(a[1],c[1],l[1],u);var p=n.__t<1?g(a[0],c[0],l[0],u):g(l[0],c[0],a[0],1-u),v=n.__t<1?g(a[1],c[1],l[1],u):g(l[1],c[1],a[1],1-u);n.rotation=-Math.atan2(v,p)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=dist$1(h,d)*1.05,u===1&&(d[0]=h[0]+(d[0]-h[0])/2,d[1]=h[1]+(d[1]-h[1])/2)):n.__lastT===1?n.scaleY=2*dist$1(a,d):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=d[0],n.y=d[1]},o.prototype.updateLayout=function(n,a){this.childAt(0).updateLayout(n,a);var l=n.getItemModel(a).getModel("effect");this._updateEffectAnimation(n,l,a)},o}(Group$3),Polyline=function(s){__extends$1(o,s);function o(n,a,l){var c=s.call(this)||this;return c._createPolyline(n,a,l),c}return o.prototype._createPolyline=function(n,a,l){var c=n.getItemLayout(a),u=new Polyline$1({shape:{points:c}});this.add(u),this._updateCommonStl(n,a,l)},o.prototype.updateData=function(n,a,l){var c=n.hostModel,u=this.childAt(0),d={shape:{points:n.getItemLayout(a)}};updateProps$1(u,d,c,a),this._updateCommonStl(n,a,l)},o.prototype._updateCommonStl=function(n,a,l){var c=this.childAt(0),u=n.getItemModel(a),d=l&&l.emphasisLineStyle,h=l&&l.focus,f=l&&l.blurScope,g=l&&l.emphasisDisabled;if(!l||n.hasItemOption){var p=u.getModel("emphasis");d=p.getModel("lineStyle").getLineStyle(),g=p.get("disabled"),h=p.get("focus"),f=p.get("blurScope")}c.useStyle(n.getItemVisual(a,"style")),c.style.fill=null,c.style.strokeNoScale=!0;var v=c.ensureState("emphasis");v.style=d,toggleHoverEmphasis(this,h,f,g)},o.prototype.updateLayout=function(n,a){var l=this.childAt(0);l.setShape("points",n.getItemLayout(a))},o}(Group$3),EffectPolyline=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return o.prototype.createLine=function(n,a,l){return new Polyline(n,a,l)},o.prototype._updateAnimationPoints=function(n,a){this._points=a;for(var l=[0],c=0,u=1;u<a.length;u++){var d=a[u-1],h=a[u];c+=dist$1(d,h),l.push(c)}if(c===0){this._length=0;return}for(var u=0;u<l.length;u++)l[u]/=c;this._offsets=l,this._length=c},o.prototype._getLineLength=function(){return this._length},o.prototype._updateSymbolPosition=function(n){var a=n.__t<1?n.__t:2-n.__t,l=this._points,c=this._offsets,u=l.length;if(c){var d=this._lastFrame,h;if(a<this._lastFramePercent){var f=Math.min(d+1,u-1);for(h=f;h>=0&&!(c[h]<=a);h--);h=Math.min(h,u-2)}else{for(h=d;h<u&&!(c[h]>a);h++);h=Math.min(h-1,u-2)}var g=(a-c[h])/(c[h+1]-c[h]),p=l[h],v=l[h+1];n.x=p[0]*(1-g)+g*v[0],n.y=p[1]*(1-g)+g*v[1];var b=n.__t<1?v[0]-p[0]:p[0]-v[0],_=n.__t<1?v[1]-p[1]:p[1]-v[1];n.rotation=-Math.atan2(_,b)-Math.PI/2,this._lastFrame=h,this._lastFramePercent=a,n.ignore=!1}},o}(EffectLine),LargeLinesPathShape=function(){function s(){this.polyline=!1,this.curveness=0,this.segs=[]}return s}(),LargeLinesPath=function(s){__extends$1(o,s);function o(n){var a=s.call(this,n)||this;return a._off=0,a.hoverDataIdx=-1,a}return o.prototype.reset=function(){this.notClear=!1,this._off=0},o.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},o.prototype.getDefaultShape=function(){return new LargeLinesPathShape},o.prototype.buildPath=function(n,a){var l=a.segs,c=a.curveness,u;if(a.polyline)for(u=this._off;u<l.length;){var d=l[u++];if(d>0){n.moveTo(l[u++],l[u++]);for(var h=1;h<d;h++)n.lineTo(l[u++],l[u++])}}else for(u=this._off;u<l.length;){var f=l[u++],g=l[u++],p=l[u++],v=l[u++];if(n.moveTo(f,g),c>0){var b=(f+p)/2-(g-v)*c,_=(g+v)/2-(p-f)*c;n.quadraticCurveTo(b,_,p,v)}else n.lineTo(p,v)}this.incremental&&(this._off=u,this.notClear=!0)},o.prototype.findDataIndex=function(n,a){var l=this.shape,c=l.segs,u=l.curveness,d=this.style.lineWidth;if(l.polyline)for(var h=0,f=0;f<c.length;){var g=c[f++];if(g>0)for(var p=c[f++],v=c[f++],b=1;b<g;b++){var _=c[f++],w=c[f++];if(containStroke$4(p,v,_,w,d,n,a))return h}h++}else for(var h=0,f=0;f<c.length;){var p=c[f++],v=c[f++],_=c[f++],w=c[f++];if(u>0){var x=(p+_)/2-(v-w)*u,S=(v+w)/2-(_-p)*u;if(containStroke$2(p,v,x,S,_,w,d,n,a))return h}else if(containStroke$4(p,v,_,w,d,n,a))return h;h++}return-1},o.prototype.contain=function(n,a){var l=this.transformCoordToLocal(n,a),c=this.getBoundingRect();if(n=l[0],a=l[1],c.contain(n,a)){var u=this.hoverDataIdx=this.findDataIndex(n,a);return u>=0}return this.hoverDataIdx=-1,!1},o.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var a=this.shape,l=a.segs,c=1/0,u=1/0,d=-1/0,h=-1/0,f=0;f<l.length;){var g=l[f++],p=l[f++];c=Math.min(g,c),d=Math.max(g,d),u=Math.min(p,u),h=Math.max(p,h)}n=this._rect=new BoundingRect(c,u,d,h)}return n},o}(Path),LargeLineDraw=function(){function s(){this.group=new Group$3}return s.prototype.updateData=function(o){this._clear();var n=this._create();n.setShape({segs:o.getLayout("linesPoints")}),this._setCommon(n,o)},s.prototype.incrementalPrepareUpdate=function(o){this.group.removeAll(),this._clear()},s.prototype.incrementalUpdate=function(o,n){var a=this._newAdded[0],l=n.getLayout("linesPoints"),c=a&&a.shape.segs;if(c&&c.length<2e4){var u=c.length,d=new Float32Array(u+l.length);d.set(c),d.set(l,u),a.setShape({segs:d})}else{this._newAdded=[];var h=this._create();h.incremental=!0,h.setShape({segs:l}),this._setCommon(h,n),h.__startIndex=o.start}},s.prototype.remove=function(){this._clear()},s.prototype.eachRendered=function(o){this._newAdded[0]&&o(this._newAdded[0])},s.prototype._create=function(){var o=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(o),this.group.add(o),o},s.prototype._setCommon=function(o,n,a){var l=n.hostModel;o.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),o.useStyle(l.getModel("lineStyle").getLineStyle()),o.style.strokeNoScale=!0;var c=n.getVisual("style");c&&c.stroke&&o.setStyle("stroke",c.stroke),o.setStyle("fill",null);var u=getECData(o);u.seriesIndex=l.seriesIndex,o.on("mousemove",function(d){u.dataIndex=null;var h=o.hoverDataIdx;h>0&&(u.dataIndex=h+o.__startIndex)})},s.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},s}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(s){var o=s.coordinateSystem;if(!o){process.env.NODE_ENV!=="production"&&error("The lines series must have a coordinate system.");return}var n=s.get("polyline"),a=s.pipelineContext.large;return{progress:function(l,c){var u=[];if(a){var d=void 0,h=l.end-l.start;if(n){for(var f=0,g=l.start;g<l.end;g++)f+=s.getLineCoordsCount(g);d=new Float32Array(h+f*2)}else d=new Float32Array(h*4);for(var p=0,v=[],g=l.start;g<l.end;g++){var b=s.getLineCoords(g,u);n&&(d[p++]=b);for(var _=0;_<b;_++)v=o.dataToPoint(u[_],!1,v),d[p++]=v[0],d[p++]=v[1]}c.setLayout("linesPoints",d)}else for(var g=l.start;g<l.end;g++){var w=c.getItemModel(g),b=s.getLineCoords(g,u),x=[];if(n)for(var S=0;S<b;S++)x.push(o.dataToPoint(u[S]));else{x[0]=o.dataToPoint(u[0]),x[1]=o.dataToPoint(u[1]);var C=w.get(["lineStyle","curveness"]);+C&&(x[2]=[(x[0][0]+x[1][0])/2-(x[0][1]-x[1][1])*C,(x[0][1]+x[1][1])/2-(x[1][0]-x[0][0])*C])}c.setItemLayout(g,x)}}}}},LinesView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=n.getData(),u=this._updateLineDraw(c,n),d=n.get("zlevel"),h=n.get(["effect","trailLength"]),f=l.getZr(),g=f.painter.getType()==="svg";g||f.painter.getLayer(d).clear(!0),this._lastZlevel!=null&&!g&&f.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&h>0&&(g?process.env.NODE_ENV!=="production"&&console.warn("SVG render mode doesn't support lines with trail effect"):f.configLayer(d,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)})),u.updateData(c);var p=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n);p?this.group.setClipPath(p):this.group.removeClipPath(),this._lastZlevel=d,this._finished=!0},o.prototype.incrementalPrepareRender=function(n,a,l){var c=n.getData(),u=this._updateLineDraw(c,n);u.incrementalPrepareUpdate(c),this._clearLayer(l),this._finished=!1},o.prototype.incrementalRender=function(n,a,l){this._lineDraw.incrementalUpdate(n,a.getData()),this._finished=n.end===a.getData().count()},o.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},o.prototype.updateTransform=function(n,a,l){var c=n.getData(),u=n.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var d=linesLayout.reset(n,a,l);d.progress&&d.progress({start:0,end:c.count(),count:c.count()},c),this._lineDraw.updateLayout(),this._clearLayer(l)},o.prototype._updateLineDraw=function(n,a){var l=this._lineDraw,c=this._showEffect(a),u=!!a.get("polyline"),d=a.pipelineContext,h=d.large;return process.env.NODE_ENV!=="production"&&c&&h&&console.warn("Large lines not support effect"),(!l||c!==this._hasEffet||u!==this._isPolyline||h!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=h?new LargeLineDraw:new LineDraw(u?c?EffectPolyline:Polyline:c?EffectLine:Line),this._hasEffet=c,this._isPolyline=u,this._isLargeDraw=h),this.group.add(l.group),l},o.prototype._showEffect=function(n){return!!n.get(["effect","show"])},o.prototype._clearLayer=function(n){var a=n.getZr(),l=a.painter.getType()==="svg";!l&&this._lastZlevel!=null&&a.painter.getLayer(this._lastZlevel).clear(!0)},o.prototype.remove=function(n,a){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(a)},o.prototype.dispose=function(n,a){this.remove(n,a)},o.type="lines",o}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(s){var o=s.data;o&&o[0]&&o[0][0]&&o[0][0].coord&&(process.env.NODE_ENV!=="production"&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),s.data=map$1(o,function(n){var a=[n[0].coord,n[1].coord],l={coords:a};return n[0].name&&(l.fromName=n[0].name),n[1].name&&(l.toName=n[1].name),mergeAll([l,n[0],n[1]])}))}var LinesSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return o.prototype.init=function(n){n.data=n.data||[],compatEc2(n);var a=this._processFlatCoordsArray(n.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(n.data=new Float32Array(a.count)),s.prototype.init.apply(this,arguments)},o.prototype.mergeOption=function(n){if(compatEc2(n),n.data){var a=this._processFlatCoordsArray(n.data);this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset,a.flatCoords&&(n.data=new Float32Array(a.count))}s.prototype.mergeOption.apply(this,arguments)},o.prototype.appendData=function(n){var a=this._processFlatCoordsArray(n.data);a.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,a.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,a.flatCoordsOffset)):(this._flatCoords=a.flatCoords,this._flatCoordsOffset=a.flatCoordsOffset),n.data=new Float32Array(a.count)),this.getRawData().appendData(n.data)},o.prototype._getCoordsFromItemModel=function(n){var a=this.getData().getItemModel(n),l=a.option instanceof Array?a.option:a.getShallow("coords");if(process.env.NODE_ENV!=="production"&&!(l instanceof Array&&l.length>0&&l[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(l)+". Lines must have 2d coords array in data item.");return l},o.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},o.prototype.getLineCoords=function(n,a){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[n*2],c=this._flatCoordsOffset[n*2+1],u=0;u<c;u++)a[u]=a[u]||[],a[u][0]=this._flatCoords[l+u*2],a[u][1]=this._flatCoords[l+u*2+1];return c}else{for(var d=this._getCoordsFromItemModel(n),u=0;u<d.length;u++)a[u]=a[u]||[],a[u][0]=d[u][0],a[u][1]=d[u][1];return d.length}},o.prototype._processFlatCoordsArray=function(n){var a=0;if(this._flatCoords&&(a=this._flatCoords.length),isNumber(n[0])){for(var l=n.length,c=new Uint32Arr(l),u=new Float64Arr(l),d=0,h=0,f=0,g=0;g<l;){f++;var p=n[g++];c[h++]=d+a,c[h++]=p;for(var v=0;v<p;v++){var b=n[g++],_=n[g++];if(u[d++]=b,u[d++]=_,g>l&&process.env.NODE_ENV!=="production")throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(c.buffer,0,h),flatCoords:u,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},o.prototype.getInitialData=function(n,a){if(process.env.NODE_ENV!=="production"){var l=CoordinateSystemManager.get(n.coordinateSystem);if(!l)throw new Error("Unknown coordinate system "+n.coordinateSystem)}var c=new SeriesData(["value"],this);return c.hasItemOption=!1,c.initData(n.data,[],function(u,d,h,f){if(u instanceof Array)return NaN;c.hasItemOption=!0;var g=u.value;if(g!=null)return g instanceof Array?g[f]:g}),c},o.prototype.formatTooltip=function(n,a,l){var c=this.getData(),u=c.getItemModel(n),d=u.get("name");if(d)return d;var h=u.get("fromName"),f=u.get("toName"),g=[];return h!=null&&g.push(h),f!=null&&g.push(f),createTooltipMarkup("nameValue",{name:g.join(" > ")})},o.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},o.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?1e4:this.get("progressive"))},o.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?2e4:this.get("progressiveThreshold"))},o.prototype.getZLevelKey=function(){var n=this.getModel("effect"),a=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&a>0?a+"":""},o.type="series.lines",o.dependencies=["grid","polar","geo","calendar"],o.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},o}(SeriesModel);function normalize(s){return s instanceof Array||(s=[s,s]),s}var linesVisual={seriesType:"lines",reset:function(s){var o=normalize(s.get("symbol")),n=normalize(s.get("symbolSize")),a=s.getData();a.setVisual("fromSymbol",o&&o[0]),a.setVisual("toSymbol",o&&o[1]),a.setVisual("fromSymbolSize",n&&n[0]),a.setVisual("toSymbolSize",n&&n[1]);function l(c,u){var d=c.getItemModel(u),h=normalize(d.getShallow("symbol",!0)),f=normalize(d.getShallow("symbolSize",!0));h[0]&&c.setItemVisual(u,"fromSymbol",h[0]),h[1]&&c.setItemVisual(u,"toSymbol",h[1]),f[0]&&c.setItemVisual(u,"fromSymbolSize",f[0]),f[1]&&c.setItemVisual(u,"toSymbolSize",f[1])}return{dataEach:a.hasItemOption?l:null}}};function install$w(s){s.registerChartView(LinesView),s.registerSeriesModel(LinesSeriesModel),s.registerLayout(linesLayout),s.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function s(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var o=platformApi.createCanvas();this.canvas=o}return s.prototype.update=function(o,n,a,l,c,u){var d=this._getBrush(),h=this._getGradient(c,"inRange"),f=this._getGradient(c,"outOfRange"),g=this.pointSize+this.blurSize,p=this.canvas,v=p.getContext("2d"),b=o.length;p.width=n,p.height=a;for(var _=0;_<b;++_){var w=o[_],x=w[0],S=w[1],C=w[2],T=l(C);v.globalAlpha=T,v.drawImage(d,x-g,S-g)}if(!p.width||!p.height)return p;for(var R=v.getImageData(0,0,p.width,p.height),A=R.data,M=0,D=A.length,O=this.minOpacity,H=this.maxOpacity,j=H-O;M<D;){var T=A[M+3]/256,q=Math.floor(T*(GRADIENT_LEVELS-1))*4;if(T>0){var Y=u(T)?h:f;T>0&&(T=T*j+O),A[M++]=Y[q],A[M++]=Y[q+1],A[M++]=Y[q+2],A[M++]=Y[q+3]*T*256}else M+=4}return v.putImageData(R,0,0),p},s.prototype._getBrush=function(){var o=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),n=this.pointSize+this.blurSize,a=n*2;o.width=a,o.height=a;var l=o.getContext("2d");return l.clearRect(0,0,a,a),l.shadowOffsetX=a,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-n,n,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),o},s.prototype._getGradient=function(o,n){for(var a=this._gradientPixels,l=a[n]||(a[n]=new Uint8ClampedArray(256*4)),c=[0,0,0,0],u=0,d=0;d<256;d++)o[n](d/255,!0,c),l[u++]=c[0],l[u++]=c[1],l[u++]=c[2],l[u++]=c[3];return l},s}();function getIsInPiecewiseRange(s,o,n){var a=s[1]-s[0];o=map$1(o,function(u){return{interval:[(u.interval[0]-s[0])/a,(u.interval[1]-s[0])/a]}});var l=o.length,c=0;return function(u){var d;for(d=c;d<l;d++){var h=o[d].interval;if(h[0]<=u&&u<=h[1]){c=d;break}}if(d===l)for(d=c-1;d>=0;d--){var h=o[d].interval;if(h[0]<=u&&u<=h[1]){c=d;break}}return d>=0&&d<l&&n[d]}}function getIsInContinuousRange(s,o){var n=s[1]-s[0];return o=[(o[0]-s[0])/n,(o[1]-s[0])/n],function(a){return a>=o[0]&&a<=o[1]}}function isGeoCoordSys(s){var o=s.dimensions;return o[0]==="lng"&&o[1]==="lat"}var HeatmapView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c;if(a.eachComponent("visualMap",function(d){d.eachTargetSeries(function(h){h===n&&(c=d)})}),process.env.NODE_ENV!=="production"&&!c)throw new Error("Heatmap must use with visualMap");this._progressiveEls=null,this.group.removeAll();var u=n.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"?this._renderOnCartesianAndCalendar(n,l,0,n.getData().count()):isGeoCoordSys(u)&&this._renderOnGeo(u,n,c,l)},o.prototype.incrementalPrepareRender=function(n,a,l){this.group.removeAll()},o.prototype.incrementalRender=function(n,a,l,c){var u=a.coordinateSystem;u&&(isGeoCoordSys(u)?this.render(a,l,c):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(a,c,n.start,n.end,!0)))},o.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},o.prototype._renderOnCartesianAndCalendar=function(n,a,l,c,u){var d=n.coordinateSystem,h=isCoordinateSystemType(d,"cartesian2d"),f,g,p,v;if(h){var b=d.getAxis("x"),_=d.getAxis("y");if(process.env.NODE_ENV!=="production"){if(!(b.type==="category"&&_.type==="category"))throw new Error("Heatmap on cartesian must have two category axes");if(!(b.onBand&&_.onBand))throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}f=b.getBandWidth()+.5,g=_.getBandWidth()+.5,p=b.scale.getExtent(),v=_.scale.getExtent()}for(var w=this.group,x=n.getData(),S=n.getModel(["emphasis","itemStyle"]).getItemStyle(),C=n.getModel(["blur","itemStyle"]).getItemStyle(),T=n.getModel(["select","itemStyle"]).getItemStyle(),R=n.get(["itemStyle","borderRadius"]),A=getLabelStatesModels(n),M=n.getModel("emphasis"),D=M.get("focus"),O=M.get("blurScope"),H=M.get("disabled"),j=h?[x.mapDimension("x"),x.mapDimension("y"),x.mapDimension("value")]:[x.mapDimension("time"),x.mapDimension("value")],q=l;q<c;q++){var Y=void 0,ee=x.getItemVisual(q,"style");if(h){var te=x.get(j[0],q),re=x.get(j[1],q);if(isNaN(x.get(j[2],q))||isNaN(te)||isNaN(re)||te<p[0]||te>p[1]||re<v[0]||re>v[1])continue;var ae=d.dataToPoint([te,re]);Y=new Rect$2({shape:{x:ae[0]-f/2,y:ae[1]-g/2,width:f,height:g},style:ee})}else{if(isNaN(x.get(j[1],q)))continue;Y=new Rect$2({z2:1,shape:d.dataToRect([x.get(j[0],q)]).contentShape,style:ee})}if(x.hasItemOption){var ue=x.getItemModel(q),ce=ue.getModel("emphasis");S=ce.getModel("itemStyle").getItemStyle(),C=ue.getModel(["blur","itemStyle"]).getItemStyle(),T=ue.getModel(["select","itemStyle"]).getItemStyle(),R=ue.get(["itemStyle","borderRadius"]),D=ce.get("focus"),O=ce.get("blurScope"),H=ce.get("disabled"),A=getLabelStatesModels(ue)}Y.shape.r=R;var le=n.getRawValue(q),ie="-";le&&le[2]!=null&&(ie=le[2]+""),setLabelStyle(Y,A,{labelFetcher:n,labelDataIndex:q,defaultOpacity:ee.opacity,defaultText:ie}),Y.ensureState("emphasis").style=S,Y.ensureState("blur").style=C,Y.ensureState("select").style=T,toggleHoverEmphasis(Y,D,O,H),Y.incremental=u,u&&(Y.states.emphasis.hoverLayer=!0),w.add(Y),x.setItemGraphicEl(q,Y),this._progressiveEls&&this._progressiveEls.push(Y)}},o.prototype._renderOnGeo=function(n,a,l,c){var u=l.targetVisuals.inRange,d=l.targetVisuals.outOfRange,h=a.getData(),f=this._hmLayer||this._hmLayer||new HeatmapLayer;f.blurSize=a.get("blurSize"),f.pointSize=a.get("pointSize"),f.minOpacity=a.get("minOpacity"),f.maxOpacity=a.get("maxOpacity");var g=n.getViewRect().clone(),p=n.getRoamTransform();g.applyTransform(p);var v=Math.max(g.x,0),b=Math.max(g.y,0),_=Math.min(g.width+g.x,c.getWidth()),w=Math.min(g.height+g.y,c.getHeight()),x=_-v,S=w-b,C=[h.mapDimension("lng"),h.mapDimension("lat"),h.mapDimension("value")],T=h.mapArray(C,function(D,O,H){var j=n.dataToPoint([D,O]);return j[0]-=v,j[1]-=b,j.push(H),j}),R=l.getExtent(),A=l.type==="visualMap.continuous"?getIsInContinuousRange(R,l.option.range):getIsInPiecewiseRange(R,l.getPieceList(),l.option.selected);f.update(T,x,S,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:d.color.getColorMapper()},A);var M=new ZRImage({style:{width:x,height:S,x:v,y:b,image:f.canvas},silent:!0});this.group.add(M)},o.type="heatmap",o}(ChartView),HeatmapSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.getInitialData=function(n,a){return createSeriesData(null,this,{generateCoord:"value"})},o.prototype.preventIncremental=function(){var n=CoordinateSystemManager.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},o.type="series.heatmap",o.dependencies=["grid","geo","calendar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},o}(SeriesModel);function install$v(s){s.registerChartView(HeatmapView),s.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=this.group,u=n.getData(),d=this._data,h=n.coordinateSystem,f=h.getBaseAxis(),g=f.isHorizontal(),p=h.master.getRect(),v={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:n,coordSys:h,coordSysExtent:[[p.x,p.x+p.width],[p.y,p.y+p.height]],isHorizontal:g,valueDim:LAYOUT_ATTRS[+g],categoryDim:LAYOUT_ATTRS[1-+g]};u.diff(d).add(function(_){if(u.hasValue(_)){var w=getItemModel(u,_),x=getSymbolMeta(u,_,w,v),S=createBar(u,v,x);u.setItemGraphicEl(_,S),c.add(S),updateCommon(S,v,x)}}).update(function(_,w){var x=d.getItemGraphicEl(w);if(!u.hasValue(_)){c.remove(x);return}var S=getItemModel(u,_),C=getSymbolMeta(u,_,S,v),T=getShapeStr(u,C);x&&T!==x.__pictorialShapeStr&&(c.remove(x),u.setItemGraphicEl(_,null),x=null),x?updateBar(x,v,C):x=createBar(u,v,C,!0),u.setItemGraphicEl(_,x),x.__pictorialSymbolMeta=C,c.add(x),updateCommon(x,v,C)}).remove(function(_){var w=d.getItemGraphicEl(_);w&&removeBar(d,_,w.__pictorialSymbolMeta.animationModel,w)}).execute();var b=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;return b?c.setClipPath(b):c.removeClipPath(),this._data=u,this.group},o.prototype.remove=function(n,a){var l=this.group,c=this._data;n.get("animation")?c&&c.eachItemGraphicEl(function(u){removeBar(c,getECData(u).dataIndex,n,u)}):l.removeAll()},o.type="pictorialBar",o}(ChartView);function getSymbolMeta(s,o,n,a){var l=s.getItemLayout(o),c=n.get("symbolRepeat"),u=n.get("symbolClip"),d=n.get("symbolPosition")||"start",h=n.get("symbolRotate"),f=(h||0)*Math.PI/180||0,g=n.get("symbolPatternSize")||2,p=n.isAnimationEnabled(),v={dataIndex:o,layout:l,itemModel:n,symbolType:s.getItemVisual(o,"symbol")||"circle",style:s.getItemVisual(o,"style"),symbolClip:u,symbolRepeat:c,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:g,rotation:f,animationModel:p?n:null,hoverScale:p&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};prepareBarLength(n,c,l,a,v),prepareSymbolSize(s,o,l,c,u,v.boundingLength,v.pxSign,g,a,v),prepareLineWidth(n,v.symbolScale,f,a,v);var b=v.symbolSize,_=normalizeSymbolOffset(n.get("symbolOffset"),b);return prepareLayoutInfo(n,b,l,c,u,_,d,v.valueLineWidth,v.boundingLength,v.repeatCutLength,a,v),v}function prepareBarLength(s,o,n,a,l){var c=a.valueDim,u=s.get("symbolBoundingData"),d=a.coordSys.getOtherAxis(a.coordSys.getBaseAxis()),h=d.toGlobalCoord(d.dataToCoord(0)),f=1-+(n[c.wh]<=0),g;if(isArray$1(u)){var p=[convertToCoordOnAxis(d,u[0])-h,convertToCoordOnAxis(d,u[1])-h];p[1]<p[0]&&p.reverse(),g=p[f]}else u!=null?g=convertToCoordOnAxis(d,u)-h:o?g=a.coordSysExtent[c.index][f]-h:g=n[c.wh];l.boundingLength=g,o&&(l.repeatCutLength=n[c.wh]);var v=c.xy==="x",b=d.inverse;l.pxSign=v&&!b||!v&&b?g>=0?1:-1:g>0?1:-1}function convertToCoordOnAxis(s,o){return s.toGlobalCoord(s.dataToCoord(s.scale.parse(o)))}function prepareSymbolSize(s,o,n,a,l,c,u,d,h,f){var g=h.valueDim,p=h.categoryDim,v=Math.abs(n[p.wh]),b=s.getItemVisual(o,"symbolSize"),_;isArray$1(b)?_=b.slice():b==null?_=["100%","100%"]:_=[b,b],_[p.index]=parsePercent(_[p.index],v),_[g.index]=parsePercent(_[g.index],a?v:Math.abs(c)),f.symbolSize=_;var w=f.symbolScale=[_[0]/d,_[1]/d];w[g.index]*=(h.isHorizontal?-1:1)*u}function prepareLineWidth(s,o,n,a,l){var c=s.get(BAR_BORDER_WIDTH_QUERY)||0;c&&(pathForLineWidth.attr({scaleX:o[0],scaleY:o[1],rotation:n}),pathForLineWidth.updateTransform(),c/=pathForLineWidth.getLineScale(),c*=o[a.valueDim.index]),l.valueLineWidth=c||0}function prepareLayoutInfo(s,o,n,a,l,c,u,d,h,f,g,p){var v=g.categoryDim,b=g.valueDim,_=p.pxSign,w=Math.max(o[b.index]+d,0),x=w;if(a){var S=Math.abs(h),C=retrieve(s.get("symbolMargin"),"15%")+"",T=!1;C.lastIndexOf("!")===C.length-1&&(T=!0,C=C.slice(0,C.length-1));var R=parsePercent(C,o[b.index]),A=Math.max(w+R*2,0),M=T?0:R*2,D=isNumeric(a),O=D?a:toIntTimes((S+M)/A),H=S-O*w;R=H/2/(T?O:Math.max(O-1,1)),A=w+R*2,M=T?0:R*2,!D&&a!=="fixed"&&(O=f?toIntTimes((Math.abs(f)+M)/A):0),x=O*A-M,p.repeatTimes=O,p.symbolMargin=R}var j=_*(x/2),q=p.pathPosition=[];q[v.index]=n[v.wh]/2,q[b.index]=u==="start"?j:u==="end"?h-j:h/2,c&&(q[0]+=c[0],q[1]+=c[1]);var Y=p.bundlePosition=[];Y[v.index]=n[v.xy],Y[b.index]=n[b.xy];var ee=p.barRectShape=extend({},n);ee[b.wh]=_*Math.max(Math.abs(n[b.wh]),Math.abs(q[b.index]+j)),ee[v.wh]=n[v.wh];var te=p.clipShape={};te[v.xy]=-n[v.xy],te[v.wh]=g.ecSize[v.wh],te[b.xy]=0,te[b.wh]=n[b.wh]}function createPath(s){var o=s.symbolPatternSize,n=createSymbol$1(s.symbolType,-o/2,-o/2,o,o);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function createOrUpdateRepeatSymbols(s,o,n,a){var l=s.__pictorialBundle,c=n.symbolSize,u=n.valueLineWidth,d=n.pathPosition,h=o.valueDim,f=n.repeatTimes||0,g=0,p=c[o.valueDim.index]+u+n.symbolMargin*2;for(eachPath(s,function(w){w.__pictorialAnimationIndex=g,w.__pictorialRepeatTimes=f,g<f?updateAttr(w,null,_(g),n,a):updateAttr(w,null,{scaleX:0,scaleY:0},n,a,function(){l.remove(w)}),g++});g<f;g++){var v=createPath(n);v.__pictorialAnimationIndex=g,v.__pictorialRepeatTimes=f,l.add(v);var b=_(g);updateAttr(v,{x:b.x,y:b.y,scaleX:0,scaleY:0},{scaleX:b.scaleX,scaleY:b.scaleY,rotation:b.rotation},n,a)}function _(w){var x=d.slice(),S=n.pxSign,C=w;return(n.symbolRepeatDirection==="start"?S>0:S<0)&&(C=f-1-w),x[h.index]=p*(C-f/2+.5)+d[h.index],{x:x[0],y:x[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function createOrUpdateSingleSymbol(s,o,n,a){var l=s.__pictorialBundle,c=s.__pictorialMainPath;c?updateAttr(c,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,a):(c=s.__pictorialMainPath=createPath(n),l.add(c),updateAttr(c,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,a))}function createOrUpdateBarRect(s,o,n){var a=extend({},o.barRectShape),l=s.__pictorialBarRect;l?updateAttr(l,null,{shape:a},o,n):(l=s.__pictorialBarRect=new Rect$2({z2:2,shape:a,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,s.add(l))}function createOrUpdateClip(s,o,n,a){if(n.symbolClip){var l=s.__pictorialClipPath,c=extend({},n.clipShape),u=o.valueDim,d=n.animationModel,h=n.dataIndex;if(l)updateProps$1(l,{shape:c},d,h);else{c[u.wh]=0,l=new Rect$2({shape:c}),s.__pictorialBundle.setClipPath(l),s.__pictorialClipPath=l;var f={};f[u.wh]=n.clipShape[u.wh],graphic$1[a?"updateProps":"initProps"](l,{shape:f},d,h)}}}function getItemModel(s,o){var n=s.getItemModel(o);return n.getAnimationDelayParams=getAnimationDelayParams,n.isAnimationEnabled=isAnimationEnabled,n}function getAnimationDelayParams(s){return{index:s.__pictorialAnimationIndex,count:s.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(s,o,n,a){var l=new Group$3,c=new Group$3;return l.add(c),l.__pictorialBundle=c,c.x=n.bundlePosition[0],c.y=n.bundlePosition[1],n.symbolRepeat?createOrUpdateRepeatSymbols(l,o,n):createOrUpdateSingleSymbol(l,o,n),createOrUpdateBarRect(l,n,a),createOrUpdateClip(l,o,n,a),l.__pictorialShapeStr=getShapeStr(s,n),l.__pictorialSymbolMeta=n,l}function updateBar(s,o,n){var a=n.animationModel,l=n.dataIndex,c=s.__pictorialBundle;updateProps$1(c,{x:n.bundlePosition[0],y:n.bundlePosition[1]},a,l),n.symbolRepeat?createOrUpdateRepeatSymbols(s,o,n,!0):createOrUpdateSingleSymbol(s,o,n,!0),createOrUpdateBarRect(s,n,!0),createOrUpdateClip(s,o,n,!0)}function removeBar(s,o,n,a){var l=a.__pictorialBarRect;l&&l.removeTextContent();var c=[];eachPath(a,function(u){c.push(u)}),a.__pictorialMainPath&&c.push(a.__pictorialMainPath),a.__pictorialClipPath&&(n=null),each$f(c,function(u){removeElement(u,{scaleX:0,scaleY:0},n,o,function(){a.parent&&a.parent.remove(a)})}),s.setItemGraphicEl(o,null)}function getShapeStr(s,o){return[s.getItemVisual(o.dataIndex,"symbol")||"none",!!o.symbolRepeat,!!o.symbolClip].join(":")}function eachPath(s,o,n){each$f(s.__pictorialBundle.children(),function(a){a!==s.__pictorialBarRect&&o.call(n,a)})}function updateAttr(s,o,n,a,l,c){o&&s.attr(o),a.symbolClip&&!l?n&&s.attr(n):n&&graphic$1[l?"updateProps":"initProps"](s,n,a.animationModel,a.dataIndex,c)}function updateCommon(s,o,n){var a=n.dataIndex,l=n.itemModel,c=l.getModel("emphasis"),u=c.getModel("itemStyle").getItemStyle(),d=l.getModel(["blur","itemStyle"]).getItemStyle(),h=l.getModel(["select","itemStyle"]).getItemStyle(),f=l.getShallow("cursor"),g=c.get("focus"),p=c.get("blurScope"),v=c.get("scale");eachPath(s,function(w){if(w instanceof ZRImage){var x=w.style;w.useStyle(extend({image:x.image,x:x.x,y:x.y,width:x.width,height:x.height},n.style))}else w.useStyle(n.style);var S=w.ensureState("emphasis");S.style=u,v&&(S.scaleX=w.scaleX*1.1,S.scaleY=w.scaleY*1.1),w.ensureState("blur").style=d,w.ensureState("select").style=h,f&&(w.cursor=f),w.z2=n.z2});var b=o.valueDim.posDesc[+(n.boundingLength>0)],_=s.__pictorialBarRect;_.ignoreClip=!0,setLabelStyle(_,getLabelStatesModels(l),{labelFetcher:o.seriesModel,labelDataIndex:a,defaultText:getDefaultLabel(o.seriesModel.getData(),a),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:b}),toggleHoverEmphasis(s,g,p,c.get("disabled"))}function toIntTimes(s){var o=Math.round(s);return Math.abs(s-o)<1e-4?o:Math.ceil(s)}var PictorialBarSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return o.prototype.getInitialData=function(n){return n.stack=null,s.prototype.getInitialData.apply(this,arguments)},o.type="series.pictorialBar",o.dependencies=["grid"],o.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),o}(BaseBarSeriesModel);function install$u(s){s.registerChartView(PictorialBarView),s.registerSeriesModel(PictorialBarSeriesModel),s.registerLayout(s.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),s.registerLayout(s.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._layers=[],n}return o.prototype.render=function(n,a,l){var c=n.getData(),u=this,d=this.group,h=n.getLayerSeries(),f=c.getLayout("layoutInfo"),g=f.rect,p=f.boundaryGap;d.x=0,d.y=g.y+p[0];function v(x){return x.name}var b=new DataDiffer(this._layersSeries||[],h,v,v),_=[];b.add(bind$1(w,this,"add")).update(bind$1(w,this,"update")).remove(bind$1(w,this,"remove")).execute();function w(x,S,C){var T=u._layers;if(x==="remove"){d.remove(T[S]);return}for(var R=[],A=[],M,D=h[S].indices,O=0;O<D.length;O++){var H=c.getItemLayout(D[O]),j=H.x,q=H.y0,Y=H.y;R.push(j,q),A.push(j,q+Y),M=c.getItemVisual(D[O],"style")}var ee,te=c.getItemLayout(D[0]),re=n.getModel("label"),ae=re.get("margin"),ue=n.getModel("emphasis");if(x==="add"){var ce=_[S]=new Group$3;ee=new ECPolygon({shape:{points:R,stackedOnPoints:A,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),ce.add(ee),d.add(ce),n.isAnimationEnabled()&&ee.setClipPath(createGridClipShape(ee.getBoundingRect(),n,function(){ee.removeClipPath()}))}else{var ce=T[C];ee=ce.childAt(0),d.add(ce),_[S]=ce,updateProps$1(ee,{shape:{points:R,stackedOnPoints:A}},n),saveOldStyle(ee)}setLabelStyle(ee,getLabelStatesModels(n),{labelDataIndex:D[O-1],defaultText:c.getName(D[O-1]),inheritColor:M.fill},{normal:{verticalAlign:"middle"}}),ee.setTextConfig({position:null,local:!0});var le=ee.getTextContent();le&&(le.x=te.x-ae,le.y=te.y0+te.y/2),ee.useStyle(M),c.setItemGraphicEl(S,ee),setStatesStylesFromModel(ee,n),toggleHoverEmphasis(ee,ue.get("focus"),ue.get("blurScope"),ue.get("disabled"))}this._layersSeries=h,this._layers=_},o.type="themeRiver",o}(ChartView);function createGridClipShape(s,o,n){var a=new Rect$2({shape:{x:s.x-10,y:s.y-10,width:0,height:s.height+20}});return initProps(a,{shape:{x:s.x-50,width:s.width+100,height:s.height+20}},o,n),a}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n){s.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},o.prototype.fixData=function(n){var a=n.length,l={},c=groupData(n,function(v){return l.hasOwnProperty(v[0]+"")||(l[v[0]+""]=-1),v[2]}),u=[];c.buckets.each(function(v,b){u.push({name:b,dataList:v})});for(var d=u.length,h=0;h<d;++h){for(var f=u[h].name,g=0;g<u[h].dataList.length;++g){var p=u[h].dataList[g][0]+"";l[p]=h}for(var p in l)l.hasOwnProperty(p)&&l[p]!==h&&(l[p]=h,n[a]=[p,0,f],a++)}return n},o.prototype.getInitialData=function(n,a){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],c=l.get("type"),u=filter(n.data,function(_){return _[2]!==void 0}),d=this.fixData(u||[]),h=[],f=this.nameMap=createHashMap(),g=0,p=0;p<d.length;++p)h.push(d[p][DATA_NAME_INDEX]),f.get(d[p][DATA_NAME_INDEX])||(f.set(d[p][DATA_NAME_INDEX],g),g++);var v=prepareSeriesDataSchema(d,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(c)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,b=new SeriesData(v,this);return b.initData(d),b},o.prototype.getLayerSeries=function(){for(var n=this.getData(),a=n.count(),l=[],c=0;c<a;++c)l[c]=c;var u=n.mapDimension("single"),d=groupData(l,function(f){return n.get("name",f)}),h=[];return d.buckets.each(function(f,g){f.sort(function(p,v){return n.get(u,p)-n.get(u,v)}),h.push({name:g,indices:f})}),h},o.prototype.getAxisTooltipData=function(n,a,l){isArray$1(n)||(n=n?[n]:[]);for(var c=this.getData(),u=this.getLayerSeries(),d=[],h=u.length,f,g=0;g<h;++g){for(var p=Number.MAX_VALUE,v=-1,b=u[g].indices.length,_=0;_<b;++_){var w=c.get(n[0],u[g].indices[_]),x=Math.abs(w-a);x<=p&&(f=w,p=x,v=u[g].indices[_])}d.push(v)}return{dataIndices:d,nestestValue:f}},o.prototype.formatTooltip=function(n,a,l){var c=this.getData(),u=c.getName(n),d=c.get(c.mapDimension("value"),n);return createTooltipMarkup("nameValue",{name:u,value:d})},o.type="series.themeRiver",o.dependencies=["singleAxis"],o.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},o}(SeriesModel);function themeRiverLayout(s,o){s.eachSeriesByType("themeRiver",function(n){var a=n.getData(),l=n.coordinateSystem,c={},u=l.getRect();c.rect=u;var d=n.get("boundaryGap"),h=l.getAxis();if(c.boundaryGap=d,h.orient==="horizontal"){d[0]=parsePercent(d[0],u.height),d[1]=parsePercent(d[1],u.height);var f=u.height-d[0]-d[1];doThemeRiverLayout(a,n,f)}else{d[0]=parsePercent(d[0],u.width),d[1]=parsePercent(d[1],u.width);var g=u.width-d[0]-d[1];doThemeRiverLayout(a,n,g)}a.setLayout("layoutInfo",c)})}function doThemeRiverLayout(s,o,n){if(s.count())for(var a=o.coordinateSystem,l=o.getLayerSeries(),c=s.mapDimension("single"),u=s.mapDimension("value"),d=map$1(l,function(x){return map$1(x.indices,function(S){var C=a.dataToPoint(s.get(c,S));return C[1]=s.get(u,S),C})}),h=computeBaseline(d),f=h.y0,g=n/h.max,p=l.length,v=l[0].indices.length,b,_=0;_<v;++_){b=f[_]*g,s.setItemLayout(l[0].indices[_],{layerIndex:0,x:d[0][_][0],y0:b,y:d[0][_][1]*g});for(var w=1;w<p;++w)b+=d[w-1][_][1]*g,s.setItemLayout(l[w].indices[_],{layerIndex:w,x:d[w][_][0],y0:b,y:d[w][_][1]*g})}}function computeBaseline(s){for(var o=s.length,n=s[0].length,a=[],l=[],c=0,u=0;u<n;++u){for(var d=0,h=0;h<o;++h)d+=s[h][u][1];d>c&&(c=d),a.push(d)}for(var f=0;f<n;++f)l[f]=(c-a[f])/2;c=0;for(var g=0;g<n;++g){var p=a[g]+l[g];p>c&&(c=p)}return{y0:l,max:c}}function install$t(s){s.registerChartView(ThemeRiverView),s.registerSeriesModel(ThemeRiverSeriesModel),s.registerLayout(themeRiverLayout),s.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(s){__extends$1(o,s);function o(n,a,l,c){var u=s.call(this)||this;u.z2=DEFAULT_SECTOR_Z,u.textConfig={inside:!0},getECData(u).seriesIndex=a.seriesIndex;var d=new ZRText({z2:DEFAULT_TEXT_Z,silent:n.getModel().get(["label","silent"])});return u.setTextContent(d),u.updateData(!0,n,a,l,c),u}return o.prototype.updateData=function(n,a,l,c,u){this.node=a,a.piece=this,l=l||this._seriesModel,c=c||this._ecModel;var d=this;getECData(d).dataIndex=a.dataIndex;var h=a.getModel(),f=h.getModel("emphasis"),g=a.getLayout(),p=extend({},g);p.label=null;var v=a.getVisual("style");v.lineJoin="bevel";var b=a.getVisual("decal");b&&(v.decal=createOrUpdatePatternFromDecal(b,u));var _=getSectorCornerRadius(h.getModel("itemStyle"),p,!0);extend(p,_),each$f(SPECIAL_STATES,function(C){var T=d.ensureState(C),R=h.getModel([C,"itemStyle"]);T.style=R.getItemStyle();var A=getSectorCornerRadius(R,p);A&&(T.shape=A)}),n?(d.setShape(p),d.shape.r=g.r0,initProps(d,{shape:{r:g.r}},l,a.dataIndex)):(updateProps$1(d,{shape:p},l),saveOldStyle(d)),d.useStyle(v),this._updateLabel(l);var w=h.getShallow("cursor");w&&d.attr("cursor",w),this._seriesModel=l||this._seriesModel,this._ecModel=c||this._ecModel;var x=f.get("focus"),S=x==="relative"?concatArray(a.getAncestorsIndices(),a.getDescendantIndices()):x==="ancestor"?a.getAncestorsIndices():x==="descendant"?a.getDescendantIndices():x;toggleHoverEmphasis(this,S,f.get("blurScope"),f.get("disabled"))},o.prototype._updateLabel=function(n){var a=this,l=this.node.getModel(),c=l.getModel("label"),u=this.node.getLayout(),d=u.endAngle-u.startAngle,h=(u.startAngle+u.endAngle)/2,f=Math.cos(h),g=Math.sin(h),p=this,v=p.getTextContent(),b=this.node.dataIndex,_=c.get("minAngle")/180*Math.PI,w=c.get("show")&&!(_!=null&&Math.abs(d)<_);v.ignore=!w,each$f(DISPLAY_STATES,function(S){var C=S==="normal"?l.getModel("label"):l.getModel([S,"label"]),T=S==="normal",R=T?v:v.ensureState(S),A=n.getFormattedLabel(b,S);T&&(A=A||a.node.name),R.style=createTextStyle$1(C,{},null,S!=="normal",!0),A&&(R.style.text=A);var M=C.get("show");M!=null&&!T&&(R.ignore=!M);var D=x(C,"position"),O=T?p:p.states[S],H=O.style.fill;O.textConfig={outsideFill:C.get("color")==="inherit"?H:null,inside:D!=="outside"};var j,q=x(C,"distance")||0,Y=x(C,"align"),ee=x(C,"rotate"),te=Math.PI*.5,re=Math.PI*1.5,ae=normalizeRadian(ee==="tangential"?Math.PI/2-h:h),ue=ae>te&&!isRadianAroundZero(ae-te)&&ae<re;D==="outside"?(j=u.r+q,Y=ue?"right":"left"):!Y||Y==="center"?(d===2*Math.PI&&u.r0===0?j=0:j=(u.r+u.r0)/2,Y="center"):Y==="left"?(j=u.r0+q,Y=ue?"right":"left"):Y==="right"&&(j=u.r-q,Y=ue?"left":"right"),R.style.align=Y,R.style.verticalAlign=x(C,"verticalAlign")||"middle",R.x=j*f+u.cx,R.y=j*g+u.cy;var ce=0;ee==="radial"?ce=normalizeRadian(-h)+(ue?Math.PI:0):ee==="tangential"?ce=normalizeRadian(Math.PI/2-h)+(ue?Math.PI:0):isNumber(ee)&&(ce=ee*Math.PI/180),R.rotation=normalizeRadian(ce)});function x(S,C){var T=S.get(C);return T??c.get(C)}v.dirtyStyle()},o}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(s){s.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(o,n){n.eachComponent({mainType:"series",subType:"sunburst",query:o},a);function a(l,c){var u=retrieveTargetInfo(o,[ROOT_TO_NODE_ACTION],l);if(u){var d=l.getViewRoot();d&&(o.direction=aboveViewRoot(d,u.node)?"rollUp":"drillDown"),l.resetViewRoot(u.node)}}}),s.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(o,n,a){o=extend({},o),n.eachComponent({mainType:"series",subType:"sunburst",query:o},l);function l(c){var u=retrieveTargetInfo(o,[HIGHLIGHT_ACTION],c);u&&(o.dataIndex=u.node.dataIndex)}process.env.NODE_ENV!=="production"&&deprecateReplaceLog("sunburstHighlight","highlight"),a.dispatchAction(extend(o,{type:"highlight"}))}),s.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(o,n,a){o=extend({},o),process.env.NODE_ENV!=="production"&&deprecateReplaceLog("sunburstUnhighlight","downplay"),a.dispatchAction(extend(o,{type:"downplay"}))})}var SunburstView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l,c){var u=this;this.seriesModel=n,this.api=l,this.ecModel=a;var d=n.getData(),h=d.tree.root,f=n.getViewRoot(),g=this.group,p=n.get("renderLabelForZeroData"),v=[];f.eachNode(function(C){v.push(C)});var b=this._oldChildren||[];_(v,b),S(h,f),this._initEvents(),this._oldChildren=v;function _(C,T){if(C.length===0&&T.length===0)return;new DataDiffer(T,C,R,R).add(A).update(A).remove(curry$1(A,null)).execute();function R(M){return M.getId()}function A(M,D){var O=M==null?null:C[M],H=D==null?null:T[D];w(O,H)}}function w(C,T){if(!p&&C&&!C.getValue()&&(C=null),C!==h&&T!==h){if(T&&T.piece)C?(T.piece.updateData(!1,C,n,a,l),d.setItemGraphicEl(C.dataIndex,T.piece)):x(T);else if(C){var R=new SunburstPiece(C,n,a,l);g.add(R),d.setItemGraphicEl(C.dataIndex,R)}}}function x(C){C&&C.piece&&(g.remove(C.piece),C.piece=null)}function S(C,T){T.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,C,n,a,l):(u.virtualPiece=new SunburstPiece(C,n,a,l),g.add(u.virtualPiece)),T.piece.off("click"),u.virtualPiece.on("click",function(R){u._rootToNode(T.parentNode)})):u.virtualPiece&&(g.remove(u.virtualPiece),u.virtualPiece=null)}},o.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(a){var l=!1,c=n.seriesModel.getViewRoot();c.eachNode(function(u){if(!l&&u.piece&&u.piece===a.target){var d=u.getModel().get("nodeClick");if(d==="rootToNode")n._rootToNode(u);else if(d==="link"){var h=u.getModel(),f=h.get("link");if(f){var g=h.get("target",!0)||"_blank";windowOpen(f,g)}}l=!0}})})},o.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},o.prototype.containPoint=function(n,a){var l=a.getData(),c=l.getItemLayout(0);if(c){var u=n[0]-c.cx,d=n[1]-c.cy,h=Math.sqrt(u*u+d*d);return h<=c.r&&h>=c.r0}},o.type="sunburst",o}(ChartView),SunburstSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.ignoreStyleOnData=!0,n}return o.prototype.getInitialData=function(n,a){var l={name:n.name,children:n.data};completeTreeValue(l);var c=this._levelModels=map$1(n.levels||[],function(h){return new Model(h,this,a)},this),u=Tree.createTree(l,this,d);function d(h){h.wrapMethod("getItemModel",function(f,g){var p=u.getNodeByDataIndex(g),v=c[p.depth];return v&&(f.parentModel=v),f})}return u.data},o.prototype.optionUpdated=function(){this.resetViewRoot()},o.prototype.getDataParams=function(n){var a=s.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(n);return a.treePathInfo=wrapTreePathInfo(l,this),a},o.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},o.prototype.getViewRoot=function(){return this._viewRoot},o.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var a=this.getRawData().tree.root;(!n||n!==a&&!a.contains(n))&&(this._viewRoot=a)},o.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},o.type="series.sunburst",o.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},o}(SeriesModel);function completeTreeValue(s){var o=0;each$f(s.children,function(a){completeTreeValue(a);var l=a.value;isArray$1(l)&&(l=l[0]),o+=l});var n=s.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=o),n<0&&(n=0),isArray$1(s.value)?s.value[0]=n:s.value=n}var RADIAN=Math.PI/180;function sunburstLayout(s,o,n){o.eachSeriesByType(s,function(a){var l=a.get("center"),c=a.get("radius");isArray$1(c)||(c=[0,c]),isArray$1(l)||(l=[l,l]);var u=n.getWidth(),d=n.getHeight(),h=Math.min(u,d),f=parsePercent(l[0],u),g=parsePercent(l[1],d),p=parsePercent(c[0],h/2),v=parsePercent(c[1],h/2),b=-a.get("startAngle")*RADIAN,_=a.get("minAngle")*RADIAN,w=a.getData().tree.root,x=a.getViewRoot(),S=x.depth,C=a.get("sort");C!=null&&initChildren(x,C);var T=0;each$f(x.children,function(ae){!isNaN(ae.getValue())&&T++});var R=x.getValue(),A=Math.PI/(R||T)*2,M=x.depth>0,D=x.height-(M?-1:1),O=(v-p)/(D||1),H=a.get("clockwise"),j=a.get("stillShowZeroSum"),q=H?1:-1,Y=function(ae,ue){if(ae){var ce=ue;if(ae!==w){var le=ae.getValue(),ie=R===0&&j?A:le*A;ie<_&&(ie=_),ce=ue+q*ie;var de=ae.depth-S-(M?-1:1),ge=p+O*de,pe=p+O*(de+1),be=a.getLevelModel(ae);if(be){var Se=be.get("r0",!0),Le=be.get("r",!0),De=be.get("radius",!0);De!=null&&(Se=De[0],Le=De[1]),Se!=null&&(ge=parsePercent(Se,h/2)),Le!=null&&(pe=parsePercent(Le,h/2))}ae.setLayout({angle:ie,startAngle:ue,endAngle:ce,clockwise:H,cx:f,cy:g,r0:ge,r:pe})}if(ae.children&&ae.children.length){var ke=0;each$f(ae.children,function(Te){ke+=Y(Te,ue+ke)})}return ce-ue}};if(M){var ee=p,te=p+O,re=Math.PI*2;w.setLayout({angle:re,startAngle:b,endAngle:b+re,clockwise:H,cx:f,cy:g,r0:ee,r:te})}Y(x,b)})}function initChildren(s,o){var n=s.children||[];s.children=sort(n,o),n.length&&each$f(s.children,function(a){initChildren(a,o)})}function sort(s,o){if(isFunction$1(o)){var n=map$1(s,function(l,c){var u=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return u}},index:c}});return n.sort(function(l,c){return o(l.params,c.params)}),map$1(n,function(l){return s[l.index]})}else{var a=o==="asc";return s.sort(function(l,c){var u=(l.getValue()-c.getValue())*(a?1:-1);return u===0?(l.dataIndex-c.dataIndex)*(a?-1:1):u})}}function sunburstVisual(s){var o={};function n(a,l,c){for(var u=a;u&&u.depth>1;)u=u.parentNode;var d=l.getColorFromPalette(u.name||u.dataIndex+"",o);return a.depth>1&&isString$2(d)&&(d=lift(d,(a.depth-1)/(c-1)*.5)),d}s.eachSeriesByType("sunburst",function(a){var l=a.getData(),c=l.tree;c.eachNode(function(u){var d=u.getModel(),h=d.getModel("itemStyle").getItemStyle();h.fill||(h.fill=n(u,a,c.root.height));var f=l.ensureUniqueItemVisual(u.dataIndex,"style");extend(f,h)})})}function install$s(s){s.registerChartView(SunburstView),s.registerSeriesModel(SunburstSeriesModel),s.registerLayout(curry$1(sunburstLayout,"sunburst")),s.registerProcessor(curry$1(dataFilter$1,"sunburst")),s.registerVisual(sunburstVisual),installSunburstAction(s)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},o.prototype.getInitialData=function(n,a){return createSeriesData(null,this)},o.prototype.getDataParams=function(n,a,l){var c=s.prototype.getDataParams.call(this,n,a);return l&&(c.info=customInnerStore(l).info),c},o.type="series.custom",o.dependencies=["grid","polar","geo","singleAxis","calendar"],o.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},o}(SeriesModel);function dataToCoordSize$3(s,o){return o=o||[0,0],map$1(["x","y"],function(n,a){var l=this.getAxis(n),c=o[a],u=s[a]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(c-u)-l.dataToCoord(c+u))},this)}function cartesianPrepareCustom(s){var o=s.master.getRect();return{coordSys:{type:"cartesian2d",x:o.x,y:o.y,width:o.width,height:o.height},api:{coord:function(n){return s.dataToPoint(n)},size:bind$1(dataToCoordSize$3,s)}}}function dataToCoordSize$2(s,o){return o=o||[0,0],map$1([0,1],function(n){var a=o[n],l=s[n]/2,c=[],u=[];return c[n]=a-l,u[n]=a+l,c[1-n]=u[1-n]=o[1-n],Math.abs(this.dataToPoint(c)[n]-this.dataToPoint(u)[n])},this)}function geoPrepareCustom(s){var o=s.getBoundingRect();return{coordSys:{type:"geo",x:o.x,y:o.y,width:o.width,height:o.height,zoom:s.getZoom()},api:{coord:function(n){return s.dataToPoint(n)},size:bind$1(dataToCoordSize$2,s)}}}function dataToCoordSize$1(s,o){var n=this.getAxis(),a=o instanceof Array?o[0]:o,l=(s instanceof Array?s[0]:s)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(a-l)-n.dataToCoord(a+l))}function singlePrepareCustom(s){var o=s.getRect();return{coordSys:{type:"singleAxis",x:o.x,y:o.y,width:o.width,height:o.height},api:{coord:function(n){return s.dataToPoint(n)},size:bind$1(dataToCoordSize$1,s)}}}function dataToCoordSize(s,o){return o=o||[0,0],map$1(["Radius","Angle"],function(n,a){var l="get"+n+"Axis",c=this[l](),u=o[a],d=s[a]/2,h=c.type==="category"?c.getBandWidth():Math.abs(c.dataToCoord(u-d)-c.dataToCoord(u+d));return n==="Angle"&&(h=h*Math.PI/180),h},this)}function polarPrepareCustom(s){var o=s.getRadiusAxis(),n=s.getAngleAxis(),a=o.getExtent();return a[0]>a[1]&&a.reverse(),{coordSys:{type:"polar",cx:s.cx,cy:s.cy,r:a[1],r0:a[0]},api:{coord:function(l){var c=o.dataToRadius(l[0]),u=n.dataToAngle(l[1]),d=s.coordToPoint([c,u]);return d.push(c,u*Math.PI/180),d},size:bind$1(dataToCoordSize,s)}}}function calendarPrepareCustom(s){var o=s.getRect(),n=s.getRangeInfo();return{coordSys:{type:"calendar",x:o.x,y:o.y,width:o.width,height:o.height,cellWidth:s.getCellWidth(),cellHeight:s.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(a,l){return s.dataToPoint(a,l)}}}}var deprecatedLogs={};function isEC4CompatibleStyle(s,o,n,a){return s&&(s.legacy||s.legacy!==!1&&!n&&!a&&o!=="tspan"&&(o==="text"||hasOwn(s,"text")))}function convertFromEC4CompatibleStyle(s,o,n){var a=s,l,c,u;if(o==="text")u=a;else{u={},hasOwn(a,"text")&&(u.text=a.text),hasOwn(a,"rich")&&(u.rich=a.rich),hasOwn(a,"textFill")&&(u.fill=a.textFill),hasOwn(a,"textStroke")&&(u.stroke=a.textStroke),hasOwn(a,"fontFamily")&&(u.fontFamily=a.fontFamily),hasOwn(a,"fontSize")&&(u.fontSize=a.fontSize),hasOwn(a,"fontStyle")&&(u.fontStyle=a.fontStyle),hasOwn(a,"fontWeight")&&(u.fontWeight=a.fontWeight),c={type:"text",style:u,silent:!0},l={};var d=hasOwn(a,"textPosition");n?l.position=d?a.textPosition:"inside":d&&(l.position=a.textPosition),hasOwn(a,"textPosition")&&(l.position=a.textPosition),hasOwn(a,"textOffset")&&(l.offset=a.textOffset),hasOwn(a,"textRotation")&&(l.rotation=a.textRotation),hasOwn(a,"textDistance")&&(l.distance=a.textDistance)}return convertEC4CompatibleRichItem(u,s),each$f(u.rich,function(h){convertEC4CompatibleRichItem(h,h)}),{textConfig:l,textContent:c}}function convertEC4CompatibleRichItem(s,o){o&&(o.font=o.textFont||o.font,hasOwn(o,"textStrokeWidth")&&(s.lineWidth=o.textStrokeWidth),hasOwn(o,"textAlign")&&(s.align=o.textAlign),hasOwn(o,"textVerticalAlign")&&(s.verticalAlign=o.textVerticalAlign),hasOwn(o,"textLineHeight")&&(s.lineHeight=o.textLineHeight),hasOwn(o,"textWidth")&&(s.width=o.textWidth),hasOwn(o,"textHeight")&&(s.height=o.textHeight),hasOwn(o,"textBackgroundColor")&&(s.backgroundColor=o.textBackgroundColor),hasOwn(o,"textPadding")&&(s.padding=o.textPadding),hasOwn(o,"textBorderColor")&&(s.borderColor=o.textBorderColor),hasOwn(o,"textBorderWidth")&&(s.borderWidth=o.textBorderWidth),hasOwn(o,"textBorderRadius")&&(s.borderRadius=o.textBorderRadius),hasOwn(o,"textBoxShadowColor")&&(s.shadowColor=o.textBoxShadowColor),hasOwn(o,"textBoxShadowBlur")&&(s.shadowBlur=o.textBoxShadowBlur),hasOwn(o,"textBoxShadowOffsetX")&&(s.shadowOffsetX=o.textBoxShadowOffsetX),hasOwn(o,"textBoxShadowOffsetY")&&(s.shadowOffsetY=o.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(s,o,n){var a=s;a.textPosition=a.textPosition||n.position||"inside",n.offset!=null&&(a.textOffset=n.offset),n.rotation!=null&&(a.textRotation=n.rotation),n.distance!=null&&(a.textDistance=n.distance);var l=a.textPosition.indexOf("inside")>=0,c=s.fill||"#000";convertToEC4RichItem(a,o);var u=a.textFill==null;return l?u&&(a.textFill=n.insideFill||"#fff",!a.textStroke&&n.insideStroke&&(a.textStroke=n.insideStroke),!a.textStroke&&(a.textStroke=c),a.textStrokeWidth==null&&(a.textStrokeWidth=2)):(u&&(a.textFill=s.fill||n.outsideFill||"#000"),!a.textStroke&&n.outsideStroke&&(a.textStroke=n.outsideStroke)),a.text=o.text,a.rich=o.rich,each$f(o.rich,function(d){convertToEC4RichItem(d,d)}),a}function convertToEC4RichItem(s,o){o&&(hasOwn(o,"fill")&&(s.textFill=o.fill),hasOwn(o,"stroke")&&(s.textStroke=o.fill),hasOwn(o,"lineWidth")&&(s.textStrokeWidth=o.lineWidth),hasOwn(o,"font")&&(s.font=o.font),hasOwn(o,"fontStyle")&&(s.fontStyle=o.fontStyle),hasOwn(o,"fontWeight")&&(s.fontWeight=o.fontWeight),hasOwn(o,"fontSize")&&(s.fontSize=o.fontSize),hasOwn(o,"fontFamily")&&(s.fontFamily=o.fontFamily),hasOwn(o,"align")&&(s.textAlign=o.align),hasOwn(o,"verticalAlign")&&(s.textVerticalAlign=o.verticalAlign),hasOwn(o,"lineHeight")&&(s.textLineHeight=o.lineHeight),hasOwn(o,"width")&&(s.textWidth=o.width),hasOwn(o,"height")&&(s.textHeight=o.height),hasOwn(o,"backgroundColor")&&(s.textBackgroundColor=o.backgroundColor),hasOwn(o,"padding")&&(s.textPadding=o.padding),hasOwn(o,"borderColor")&&(s.textBorderColor=o.borderColor),hasOwn(o,"borderWidth")&&(s.textBorderWidth=o.borderWidth),hasOwn(o,"borderRadius")&&(s.textBorderRadius=o.borderRadius),hasOwn(o,"shadowColor")&&(s.textBoxShadowColor=o.shadowColor),hasOwn(o,"shadowBlur")&&(s.textBoxShadowBlur=o.shadowBlur),hasOwn(o,"shadowOffsetX")&&(s.textBoxShadowOffsetX=o.shadowOffsetX),hasOwn(o,"shadowOffsetY")&&(s.textBoxShadowOffsetY=o.shadowOffsetY),hasOwn(o,"textShadowColor")&&(s.textShadowColor=o.textShadowColor),hasOwn(o,"textShadowBlur")&&(s.textShadowBlur=o.textShadowBlur),hasOwn(o,"textShadowOffsetX")&&(s.textShadowOffsetX=o.textShadowOffsetX),hasOwn(o,"textShadowOffsetY")&&(s.textShadowOffsetY=o.textShadowOffsetY))}function warnDeprecated(s,o){if(process.env.NODE_ENV!=="production"){var n=s+"^_^"+o;deprecatedLogs[n]||(console.warn('[ECharts] DEPRECATED: "'+s+'" has been deprecated. '+o),deprecatedLogs[n]=!0)}}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys(LEGACY_TRANSFORM_PROPS_MAP),TRANSFORM_PROPS_MAP=reduce(TRANSFORMABLE_PROPS,function(s,o){return s[o]=1,s},{}),transformPropNamesStr=TRANSFORMABLE_PROPS.join(", "),ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(s,o,n,a,l){var c=s+"Animation",u=getAnimationConfig(s,a,l)||{},d=transitionInnerStore(o).userDuring;return u.duration>0&&(u.during=d?bind$1(duringCall,{el:o,userDuring:d}):null,u.setToFinal=!0,u.scope=s),extend(u,n[c]),u}function applyUpdateTransition(s,o,n,a){a=a||{};var l=a.dataIndex,c=a.isInit,u=a.clearStyle,d=n.isAnimationEnabled(),h=transitionInnerStore(s),f=o.style;h.userDuring=o.during;var g={},p={};if(prepareTransformAllPropsFinal(s,o,p),prepareShapeOrExtraAllPropsFinal("shape",o,p),prepareShapeOrExtraAllPropsFinal("extra",o,p),!c&&d&&(prepareTransformTransitionFrom(s,o,g),prepareShapeOrExtraTransitionFrom("shape",s,o,g),prepareShapeOrExtraTransitionFrom("extra",s,o,g),prepareStyleTransitionFrom(s,o,f,g)),p.style=f,applyPropsDirectly(s,p,u),applyMiscProps(s,o),d)if(c){var v={};each$f(ELEMENT_ANIMATABLE_PROPS,function(_){var w=_?o[_]:o;w&&w.enterFrom&&(_&&(v[_]=v[_]||{}),extend(_?v[_]:v,w.enterFrom))});var b=getElementAnimationConfig("enter",s,o,n,l);b.duration>0&&s.animateFrom(v,b)}else applyPropsTransition(s,o,l||0,n,g);updateLeaveTo(s,o),f?s.dirty():s.markRedraw()}function updateLeaveTo(s,o){for(var n=transitionInnerStore(s).leaveToProps,a=0;a<ELEMENT_ANIMATABLE_PROPS.length;a++){var l=ELEMENT_ANIMATABLE_PROPS[a],c=l?o[l]:o;c&&c.leaveTo&&(n||(n=transitionInnerStore(s).leaveToProps={}),l&&(n[l]=n[l]||{}),extend(l?n[l]:n,c.leaveTo))}}function applyLeaveTransition(s,o,n,a){if(s){var l=s.parent,c=transitionInnerStore(s).leaveToProps;if(c){var u=getElementAnimationConfig("update",s,o,n,0);u.done=function(){l.remove(s)},s.animateTo(c,u)}else l.remove(s)}}function isTransitionAll(s){return s==="all"}function applyPropsDirectly(s,o,n){var a=o.style;if(!s.isGroup&&a){if(n){s.useStyle({});for(var l=s.animators,c=0;c<l.length;c++){var u=l[c];u.targetName==="style"&&u.changeTarget(s.style)}}s.setStyle(a)}o&&(o.style=null,o&&s.attr(o),o.style=a)}function applyPropsTransition(s,o,n,a,l){if(l){var c=getElementAnimationConfig("update",s,o,a,n);c.duration>0&&s.animateFrom(l,c)}}function applyMiscProps(s,o){hasOwn(o,"silent")&&(s.silent=o.silent),hasOwn(o,"ignore")&&(s.ignore=o.ignore),s instanceof Displayable&&hasOwn(o,"invisible")&&(s.invisible=o.invisible),s instanceof Path&&hasOwn(o,"autoBatch")&&(s.autoBatch=o.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(s,o){return process.env.NODE_ENV!=="production"&&assert(hasOwn(TRANSFORM_PROPS_MAP,s),"Only "+transformPropNamesStr+" available in `setTransform`."),tmpDuringScope.el[s]=o,this},getTransform:function(s){return process.env.NODE_ENV!=="production"&&assert(hasOwn(TRANSFORM_PROPS_MAP,s),"Only "+transformPropNamesStr+" available in `getTransform`."),tmpDuringScope.el[s]},setShape:function(s,o){process.env.NODE_ENV!=="production"&&assertNotReserved(s);var n=tmpDuringScope.el,a=n.shape||(n.shape={});return a[s]=o,n.dirtyShape&&n.dirtyShape(),this},getShape:function(s){process.env.NODE_ENV!=="production"&&assertNotReserved(s);var o=tmpDuringScope.el.shape;if(o)return o[s]},setStyle:function(s,o){process.env.NODE_ENV!=="production"&&assertNotReserved(s);var n=tmpDuringScope.el,a=n.style;return a&&(process.env.NODE_ENV!=="production"&&eqNaN(o)&&warn("style."+s+" must not be assigned with NaN."),a[s]=o,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(s){process.env.NODE_ENV!=="production"&&assertNotReserved(s);var o=tmpDuringScope.el.style;if(o)return o[s]},setExtra:function(s,o){process.env.NODE_ENV!=="production"&&assertNotReserved(s);var n=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return n[s]=o,this},getExtra:function(s){process.env.NODE_ENV!=="production"&&assertNotReserved(s);var o=tmpDuringScope.el.extra;if(o)return o[s]}};function assertNotReserved(s){if(process.env.NODE_ENV!=="production"&&(s==="transition"||s==="enterFrom"||s==="leaveTo"))throw new Error('key must not be "'+s+'"')}function duringCall(){var s=this,o=s.el;if(o){var n=transitionInnerStore(o).userDuring,a=s.userDuring;if(n!==a){s.el=s.userDuring=null;return}tmpDuringScope.el=o,a(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(s,o,n,a){var l=n[s];if(l){var c=o[s],u;if(c){var d=n.transition,h=l.transition;if(h)if(!u&&(u=a[s]={}),isTransitionAll(h))extend(u,c);else for(var f=normalizeToArray(h),g=0;g<f.length;g++){var p=f[g],v=c[p];u[p]=v}else if(isTransitionAll(d)||indexOf(d,s)>=0){!u&&(u=a[s]={});for(var b=keys(c),g=0;g<b.length;g++){var p=b[g],v=c[p];isNonStyleTransitionEnabled(l[p],v)&&(u[p]=v)}}}}}function prepareShapeOrExtraAllPropsFinal(s,o,n){var a=o[s];if(a)for(var l=n[s]={},c=keys(a),u=0;u<c.length;u++){var d=c[u];l[d]=cloneValue(a[d])}}function prepareTransformTransitionFrom(s,o,n){for(var a=o.transition,l=isTransitionAll(a)?TRANSFORMABLE_PROPS:normalizeToArray(a||[]),c=0;c<l.length;c++){var u=l[c];if(!(u==="style"||u==="shape"||u==="extra")){var d=s[u];process.env.NODE_ENV!=="production"&&checkTransformPropRefer(u,"el.transition"),n[u]=d}}}function prepareTransformAllPropsFinal(s,o,n){for(var a=0;a<LEGACY_TRANSFORM_PROPS.length;a++){var l=LEGACY_TRANSFORM_PROPS[a],c=LEGACY_TRANSFORM_PROPS_MAP[l],u=o[l];u&&(n[c[0]]=u[0],n[c[1]]=u[1])}for(var a=0;a<TRANSFORMABLE_PROPS.length;a++){var d=TRANSFORMABLE_PROPS[a];o[d]!=null&&(n[d]=o[d])}}function prepareStyleTransitionFrom(s,o,n,a){if(n){var l=s.style,c;if(l){var u=n.transition,d=o.transition;if(u&&!isTransitionAll(u)){var h=normalizeToArray(u);!c&&(c=a.style={});for(var f=0;f<h.length;f++){var g=h[f],p=l[g];c[g]=p}}else if(s.getAnimationStyleProps&&(isTransitionAll(d)||isTransitionAll(u)||indexOf(d,"style")>=0)){var v=s.getAnimationStyleProps(),b=v?v.style:null;if(b){!c&&(c=a.style={});for(var _=keys(n),f=0;f<_.length;f++){var g=_[f];if(b[g]){var p=l[g];c[g]=p}}}}}}}function isNonStyleTransitionEnabled(s,o){return isArrayLike(s)?s!==o:s!=null&&isFinite(s)}var checkTransformPropRefer;process.env.NODE_ENV!=="production"&&(checkTransformPropRefer=function(s,o){hasOwn(TRANSFORM_PROPS_MAP,s)||warn("Prop `"+s+"` is not a permitted in `"+o+"`. Only `"+keys(TRANSFORM_PROPS_MAP).join("`, `")+"` are permitted.")});var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(s){s.stopAnimation("keyframe"),s.attr(getStateToRestore(s))}function applyKeyframeAnimation(s,o,n){if(!(!n.isAnimationEnabled()||!o)){if(isArray$1(o)){each$f(o,function(d){applyKeyframeAnimation(s,d,n)});return}var a=o.keyframes,l=o.duration;if(n&&l==null){var c=getAnimationConfig("enter",n,0);l=c&&c.duration}if(!(!a||!l)){var u=getStateToRestore(s);each$f(ELEMENT_ANIMATABLE_PROPS,function(d){if(!(d&&!s[d])){var h,f=!1;a.sort(function(g,p){return g.percent-p.percent}),each$f(a,function(g){var p=s.animators,v=d?g[d]:g;if(process.env.NODE_ENV!=="production"&&g.percent>=1&&(f=!0),!!v){var b=keys(v);if(d||(b=filter(b,function(x){return indexOf(KEYFRAME_EXCLUDE_KEYS,x)<0})),!!b.length){h||(h=s.animate(d,o.loop,!0),h.scope="keyframe");for(var _=0;_<p.length;_++)p[_]!==h&&p[_].targetName===h.targetName&&p[_].stopTracks(b);d&&(u[d]=u[d]||{});var w=d?u[d]:u;each$f(b,function(x){w[x]=((d?s[d]:s)||{})[x]}),h.whenWithKeys(l*g.percent,v,b,g.easing)}}}),h&&(process.env.NODE_ENV!=="production"&&(f||warn("End frame with percent: 1 is missing in the keyframeAnimation.",!0)),h.delay(o.delay||0).duration(l).start(o.easing))}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(s){return s instanceof Path}function isDisplayable(s){return s instanceof Displayable}function copyElement(s,o){o.copyTransform(s),isDisplayable(o)&&isDisplayable(s)&&(o.setStyle(s.style),o.z=s.z,o.z2=s.z2,o.zlevel=s.zlevel,o.invisible=s.invisible,o.ignore=s.ignore,isPath(o)&&isPath(s)&&o.setShape(s.shape))}var CustomChartView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l,c){this._progressiveEls=null;var u=this._data,d=n.getData(),h=this.group,f=makeRenderItem(n,d,a,l);u||h.removeAll(),d.diff(u).add(function(p){createOrUpdateItem(l,null,p,f(p,c),n,h,d)}).remove(function(p){var v=u.getItemGraphicEl(p);v&&applyLeaveTransition(v,customInnerStore(v).option,n)}).update(function(p,v){var b=u.getItemGraphicEl(v);createOrUpdateItem(l,b,p,f(p,c),n,h,d)}).execute();var g=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;g?h.setClipPath(g):h.removeClipPath(),this._data=d},o.prototype.incrementalPrepareRender=function(n,a,l){this.group.removeAll(),this._data=null},o.prototype.incrementalRender=function(n,a,l,c,u){var d=a.getData(),h=makeRenderItem(a,d,l,c),f=this._progressiveEls=[];function g(b){b.isGroup||(b.incremental=!0,b.ensureState("emphasis").hoverLayer=!0)}for(var p=n.start;p<n.end;p++){var v=createOrUpdateItem(null,null,p,h(p,u),a,this.group,d);v&&(v.traverse(g),f.push(v))}},o.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},o.prototype.filterForExposedEvent=function(n,a,l,c){var u=a.element;if(u==null||l.name===u)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===u)return!0;return!1},o.type="custom",o}(ChartView);function createEl$1(s){var o=s.type,n;if(o==="path"){var a=s.shape,l=a.width!=null&&a.height!=null?{x:a.x||0,y:a.y||0,width:a.width,height:a.height}:null,c=getPathData(a);n=makePath(c,null,l,a.layout||"center"),customInnerStore(n).customPathData=c}else if(o==="image")n=new ZRImage({}),customInnerStore(n).customImagePath=s.style.image;else if(o==="text")n=new ZRText({});else if(o==="group")n=new Group$3;else{if(o==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var u=getShapeClass(o);if(!u){var d="";process.env.NODE_ENV!=="production"&&(d='graphic type "'+o+'" can not be found.'),throwError(d)}n=new u}return customInnerStore(n).customGraphicType=o,n.name=s.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function updateElNormal(s,o,n,a,l,c,u){stopPreviousKeyframeAnimationAndRestore(o);var d=l&&l.normal.cfg;d&&o.setTextConfig(d),a&&a.transition==null&&(a.transition=DEFAULT_TRANSITION);var h=a&&a.style;if(h){if(o.type==="text"){var f=h;hasOwn(f,"textFill")&&(f.fill=f.textFill),hasOwn(f,"textStroke")&&(f.stroke=f.textStroke)}var g=void 0,p=isPath(o)?h.decal:null;s&&p&&(p.dirty=!0,g=createOrUpdatePatternFromDecal(p,s)),h.__decalPattern=g}if(isDisplayable(o)&&h){var g=h.__decalPattern;g&&(h.decal=g)}applyUpdateTransition(o,a,c,{dataIndex:n,isInit:u,clearStyle:!0}),applyKeyframeAnimation(o,a.keyframeAnimation,c)}function updateElOnState(s,o,n,a,l){var c=o.isGroup?null:o,u=l&&l[s].cfg;if(c){var d=c.ensureState(s);if(a===!1){var h=c.getState(s);h&&(h.style=null)}else d.style=a||null;u&&(d.textConfig=u),setDefaultStateProxy(c)}}function updateZ(s,o,n){if(!s.isGroup){var a=s,l=n.currentZ,c=n.currentZLevel;a.z=l,a.zlevel=c;var u=o.z2;u!=null&&(a.z2=u||0);for(var d=0;d<STATES.length;d++)updateZForEachState(a,o,STATES[d])}}function updateZForEachState(s,o,n){var a=n===NORMAL,l=a?o:retrieveStateOption(o,n),c=l?l.z2:null,u;c!=null&&(u=a?s:s.ensureState(n),u.z2=c||0)}function makeRenderItem(s,o,n,a){var l=s.get("renderItem"),c=s.coordinateSystem,u={};c&&(process.env.NODE_ENV!=="production"&&(assert(l,"series.render is required."),assert(c.prepareCustoms||prepareCustoms[c.type],"This coordSys does not support custom series.")),u=c.prepareCustoms?c.prepareCustoms(c):prepareCustoms[c.type](c));for(var d=defaults({getWidth:a.getWidth,getHeight:a.getHeight,getZr:a.getZr,getDevicePixelRatio:a.getDevicePixelRatio,value:R,style:M,ordinalRawValue:A,styleEmphasis:D,visual:j,barLayout:q,currentSeriesIndices:Y,font:ee},u.api||{}),h={context:{},seriesId:s.id,seriesName:s.name,seriesIndex:s.seriesIndex,coordSys:u.coordSys,dataInsideLength:o.count(),encode:wrapEncodeDef(s.getData())},f,g,p={},v={},b={},_={},w=0;w<STATES.length;w++){var x=STATES[w];b[x]=s.getModel(PATH_ITEM_STYLE[x]),_[x]=s.getModel(PATH_LABEL[x])}function S(te){return te===f?g||(g=o.getItemModel(te)):o.getItemModel(te)}function C(te,re){return o.hasItemOption?te===f?p[re]||(p[re]=S(te).getModel(PATH_ITEM_STYLE[re])):S(te).getModel(PATH_ITEM_STYLE[re]):b[re]}function T(te,re){return o.hasItemOption?te===f?v[re]||(v[re]=S(te).getModel(PATH_LABEL[re])):S(te).getModel(PATH_LABEL[re]):_[re]}return function(te,re){return f=te,g=null,p={},v={},l&&l(defaults({dataIndexInside:te,dataIndex:o.getRawIndex(te),actionType:re?re.type:null},h),d)};function R(te,re){return re==null&&(re=f),o.getStore().get(o.getDimensionIndex(te||0),re)}function A(te,re){re==null&&(re=f),te=te||0;var ae=o.getDimensionInfo(te);if(!ae){var ue=o.getDimensionIndex(te);return ue>=0?o.getStore().get(ue,re):void 0}var ce=o.get(ae.name,re),le=ae&&ae.ordinalMeta;return le?le.categories[ce]:ce}function M(te,re){process.env.NODE_ENV!=="production"&&warnDeprecated("api.style","Please write literal style directly instead."),re==null&&(re=f);var ae=o.getItemVisual(re,"style"),ue=ae&&ae.fill,ce=ae&&ae.opacity,le=C(re,NORMAL).getItemStyle();ue!=null&&(le.fill=ue),ce!=null&&(le.opacity=ce);var ie={inheritColor:isString$2(ue)?ue:"#000"},de=T(re,NORMAL),ge=createTextStyle$1(de,null,ie,!1,!0);ge.text=de.getShallow("show")?retrieve2(s.getFormattedLabel(re,NORMAL),getDefaultLabel(o,re)):null;var pe=createTextConfig(de,ie,!1);return H(te,le),le=convertToEC4StyleForCustomSerise(le,ge,pe),te&&O(le,te),le.legacy=!0,le}function D(te,re){process.env.NODE_ENV!=="production"&&warnDeprecated("api.styleEmphasis","Please write literal style directly instead."),re==null&&(re=f);var ae=C(re,EMPHASIS).getItemStyle(),ue=T(re,EMPHASIS),ce=createTextStyle$1(ue,null,null,!0,!0);ce.text=ue.getShallow("show")?retrieve3(s.getFormattedLabel(re,EMPHASIS),s.getFormattedLabel(re,NORMAL),getDefaultLabel(o,re)):null;var le=createTextConfig(ue,null,!0);return H(te,ae),ae=convertToEC4StyleForCustomSerise(ae,ce,le),te&&O(ae,te),ae.legacy=!0,ae}function O(te,re){for(var ae in re)hasOwn(re,ae)&&(te[ae]=re[ae])}function H(te,re){te&&(te.textFill&&(re.textFill=te.textFill),te.textPosition&&(re.textPosition=te.textPosition))}function j(te,re){if(re==null&&(re=f),hasOwn(STYLE_VISUAL_TYPE,te)){var ae=o.getItemVisual(re,"style");return ae?ae[STYLE_VISUAL_TYPE[te]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,te))return o.getItemVisual(re,te)}function q(te){if(c.type==="cartesian2d"){var re=c.getBaseAxis();return getLayoutOnAxis(defaults({axis:re},te))}}function Y(){return n.getCurrentSeriesIndices()}function ee(te){return getFont(te,n)}}function wrapEncodeDef(s){var o={};return each$f(s.dimensions,function(n){var a=s.getDimensionInfo(n);if(!a.isExtraCoord){var l=a.coordDim,c=o[l]=o[l]||[];c[a.coordDimIndex]=s.getDimensionIndex(n)}}),o}function createOrUpdateItem(s,o,n,a,l,c,u){if(!a){c.remove(o);return}var d=doCreateOrUpdateEl(s,o,n,a,l,c);return d&&u.setItemGraphicEl(n,d),d&&toggleHoverEmphasis(d,a.focus,a.blurScope,a.emphasisDisabled),d}function doCreateOrUpdateEl(s,o,n,a,l,c){process.env.NODE_ENV!=="production"&&assert(a,"should not have an null/undefined element setting");var u=-1,d=o;o&&doesElNeedRecreate(o,a,l)&&(u=indexOf(c.childrenRef(),o),o=null);var h=!o,f=o;f?f.clearStates():(f=createEl$1(a),d&&copyElement(d,f)),a.morph===!1?f.disableMorphing=!0:f.disableMorphing&&(f.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(f,n,a,l,h,attachedTxInfoTmp),doCreateOrUpdateClipPath(f,n,a,l,h),updateElNormal(s,f,n,a,attachedTxInfoTmp,l,h),hasOwn(a,"info")&&(customInnerStore(f).info=a.info);for(var g=0;g<STATES.length;g++){var p=STATES[g];if(p!==NORMAL){var v=retrieveStateOption(a,p),b=retrieveStyleOptionOnState(a,v,p);updateElOnState(p,f,v,b,attachedTxInfoTmp)}}return updateZ(f,a,l),a.type==="group"&&mergeChildren(s,f,n,a,l),u>=0?c.replaceAt(f,u):c.add(f),f}function doesElNeedRecreate(s,o,n){var a=customInnerStore(s),l=o.type,c=o.shape,u=o.style;return n.isUniversalTransitionEnabled()||l!=null&&l!==a.customGraphicType||l==="path"&&hasOwnPathData(c)&&getPathData(c)!==a.customPathData||l==="image"&&hasOwn(u,"image")&&u.image!==a.customImagePath}function doCreateOrUpdateClipPath(s,o,n,a,l){var c=n.clipPath;if(c===!1)s&&s.getClipPath()&&s.removeClipPath();else if(c){var u=s.getClipPath();u&&doesElNeedRecreate(u,c,a)&&(u=null),u||(u=createEl$1(c),process.env.NODE_ENV!=="production"&&assert(isPath(u),"Only any type of `path` can be used in `clipPath`, rather than "+u.type+"."),s.setClipPath(u)),updateElNormal(null,u,o,c,null,a,l)}}function doCreateOrUpdateAttachedTx(s,o,n,a,l,c){if(!s.isGroup){processTxInfo(n,null,c),processTxInfo(n,EMPHASIS,c);var u=c.normal.conOpt,d=c.emphasis.conOpt,h=c.blur.conOpt,f=c.select.conOpt;if(u!=null||d!=null||f!=null||h!=null){var g=s.getTextContent();if(u===!1)g&&s.removeTextContent();else{u=c.normal.conOpt=u||{type:"text"},g?g.clearStates():(g=createEl$1(u),s.setTextContent(g)),updateElNormal(null,g,o,u,null,a,l);for(var p=u&&u.style,v=0;v<STATES.length;v++){var b=STATES[v];if(b!==NORMAL){var _=c[b].conOpt;updateElOnState(b,g,_,retrieveStyleOptionOnState(u,_,b),null)}}p?g.dirty():g.markRedraw()}}}}function processTxInfo(s,o,n){var a=o?retrieveStateOption(s,o):s,l=o?retrieveStyleOptionOnState(s,a,EMPHASIS):s.style,c=s.type,u=a?a.textConfig:null,d=s.textContent,h=d?o?retrieveStateOption(d,o):d:null;if(l&&(n.isLegacy||isEC4CompatibleStyle(l,c,!!u,!!h))){n.isLegacy=!0;var f=convertFromEC4CompatibleStyle(l,c,!o);!u&&f.textConfig&&(u=f.textConfig),!h&&f.textContent&&(h=f.textContent)}if(!o&&h){var g=h;!g.type&&(g.type="text"),process.env.NODE_ENV!=="production"&&assert(g.type==="text",'textContent.type must be "text"')}var p=o?n[o]:n.normal;p.cfg=u,p.conOpt=h}function retrieveStateOption(s,o){return o?s?s[o]:null:s}function retrieveStyleOptionOnState(s,o,n){var a=o&&o.style;return a==null&&n===EMPHASIS&&s&&(a=s.styleEmphasis),a}function mergeChildren(s,o,n,a,l){var c=a.children,u=c?c.length:0,d=a.$mergeChildren,h=d==="byName"||a.diffChildrenByName,f=d===!1;if(!(!u&&!h&&!f)){if(h){diffGroupChildren({api:s,oldChildren:o.children()||[],newChildren:c||[],dataIndex:n,seriesModel:l,group:o});return}f&&o.removeAll();for(var g=0;g<u;g++){var p=c[g],v=o.childAt(g);p?(p.ignore==null&&(p.ignore=!1),doCreateOrUpdateEl(s,v,n,p,l,o)):(process.env.NODE_ENV!=="production"&&assert(v,"renderItem should not return a group containing elements as null/undefined/{} if they do not exist before."),v.ignore=!0)}for(var b=o.childCount()-1;b>=g;b--){var _=o.childAt(b);removeChildFromGroup(o,_,l)}}}function removeChildFromGroup(s,o,n){o&&applyLeaveTransition(o,customInnerStore(s).option,n)}function diffGroupChildren(s){new DataDiffer(s.oldChildren,s.newChildren,getKey,getKey,s).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(s,o){var n=s&&s.name;return n??GROUP_DIFF_PREFIX+o}function processAddUpdate(s,o){var n=this.context,a=s!=null?n.newChildren[s]:null,l=o!=null?n.oldChildren[o]:null;doCreateOrUpdateEl(n.api,l,n.dataIndex,a,n.seriesModel,n.group)}function processRemove(s){var o=this.context,n=o.oldChildren[s];n&&applyLeaveTransition(n,customInnerStore(n).option,o.seriesModel)}function getPathData(s){return s&&(s.pathData||s.d)}function hasOwnPathData(s){return s&&(hasOwn(s,"pathData")||hasOwn(s,"d"))}function install$r(s){s.registerChartView(CustomChartView),s.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function s(){this._dragging=!1,this.animationThreshold=15}return s.prototype.render=function(o,n,a,l){var c=n.get("value"),u=n.get("status");if(this._axisModel=o,this._axisPointerModel=n,this._api=a,!(!l&&this._lastValue===c&&this._lastStatus===u)){this._lastValue=c,this._lastStatus=u;var d=this._group,h=this._handle;if(!u||u==="hide"){d&&d.hide(),h&&h.hide();return}d&&d.show(),h&&h.show();var f={};this.makeElOption(f,c,o,n,a);var g=f.graphicKey;g!==this._lastGraphicKey&&this.clear(a),this._lastGraphicKey=g;var p=this._moveAnimation=this.determineAnimation(o,n);if(!d)d=this._group=new Group$3,this.createPointerEl(d,f,o,n),this.createLabelEl(d,f,o,n),a.getZr().add(d);else{var v=curry$1(updateProps,n,p);this.updatePointerEl(d,f,v),this.updateLabelEl(d,f,v,n)}updateMandatoryProps(d,n,!0),this._renderHandle(c)}},s.prototype.remove=function(o){this.clear(o)},s.prototype.dispose=function(o){this.clear(o)},s.prototype.determineAnimation=function(o,n){var a=n.get("animation"),l=o.axis,c=l.type==="category",u=n.get("snap");if(!u&&!c)return!1;if(a==="auto"||a==null){var d=this.animationThreshold;if(c&&l.getBandWidth()>d)return!0;if(u){var h=getAxisInfo$1(o).seriesDataCount,f=l.getExtent();return Math.abs(f[0]-f[1])/h>d}return!1}return a===!0},s.prototype.makeElOption=function(o,n,a,l,c){},s.prototype.createPointerEl=function(o,n,a,l){var c=n.pointer;if(c){var u=inner$b(o).pointerEl=new graphic$1[c.type](clone$1(n.pointer));o.add(u)}},s.prototype.createLabelEl=function(o,n,a,l){if(n.label){var c=inner$b(o).labelEl=new ZRText(clone$1(n.label));o.add(c),updateLabelShowHide(c,l)}},s.prototype.updatePointerEl=function(o,n,a){var l=inner$b(o).pointerEl;l&&n.pointer&&(l.setStyle(n.pointer.style),a(l,{shape:n.pointer.shape}))},s.prototype.updateLabelEl=function(o,n,a,l){var c=inner$b(o).labelEl;c&&(c.setStyle(n.label.style),a(c,{x:n.label.x,y:n.label.y}),updateLabelShowHide(c,l))},s.prototype._renderHandle=function(o){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,a=this._api.getZr(),l=this._handle,c=n.getModel("handle"),u=n.get("status");if(!c.get("show")||!u||u==="hide"){l&&a.remove(l),this._handle=null;return}var d;this._handle||(d=!0,l=this._handle=createIcon(c.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(f){stop(f.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),a.add(l)),updateMandatoryProps(l,n,!1),l.setStyle(c.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var h=c.get("size");isArray$1(h)||(h=[h,h]),l.scaleX=h[0]/2,l.scaleY=h[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",c.get("throttle")||0,"fixRate"),this._moveHandleToValue(o,d)}},s.prototype._moveHandleToValue=function(o,n){updateProps(this._axisPointerModel,!n&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(o,this._axisModel,this._axisPointerModel)))},s.prototype._onHandleDragMove=function(o,n){var a=this._handle;if(a){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(a),[o,n],this._axisModel,this._axisPointerModel);this._payloadInfo=l,a.stopAnimation(),a.attr(getHandleTransProps(l)),inner$b(a).lastProp=null,this._doDispatchAxisPointer()}},s.prototype._doDispatchAxisPointer=function(){var o=this._handle;if(o){var n=this._payloadInfo,a=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:a.axis.dim,axisIndex:a.componentIndex}]})}},s.prototype._onHandleDragEnd=function(){this._dragging=!1;var o=this._handle;if(o){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},s.prototype.clear=function(o){this._lastValue=null,this._lastStatus=null;var n=o.getZr(),a=this._group,l=this._handle;n&&a&&(this._lastGraphicKey=null,a&&n.remove(a),l&&n.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},s.prototype.doClear=function(){},s.prototype.buildLabel=function(o,n,a){return a=a||0,{x:o[a],y:o[1-a],width:n[a],height:n[1-a]}},s}();function updateProps(s,o,n,a){propsEqual(inner$b(n).lastProp,a)||(inner$b(n).lastProp=a,o?updateProps$1(n,a,s):(n.stopAnimation(),n.attr(a)))}function propsEqual(s,o){if(isObject$3(s)&&isObject$3(o)){var n=!0;return each$f(o,function(a,l){n=n&&propsEqual(s[l],a)}),!!n}else return s===o}function updateLabelShowHide(s,o){s[o.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(s){return{x:s.x||0,y:s.y||0,rotation:s.rotation||0}}function updateMandatoryProps(s,o,n){var a=o.get("z"),l=o.get("zlevel");s&&s.traverse(function(c){c.type!=="group"&&(a!=null&&(c.z=a),l!=null&&(c.zlevel=l),c.silent=n)})}function buildElStyle(s){var o=s.get("type"),n=s.getModel(o+"Style"),a;return o==="line"?(a=n.getLineStyle(),a.fill=null):o==="shadow"&&(a=n.getAreaStyle(),a.stroke=null),a}function buildLabelElOption(s,o,n,a,l){var c=n.get("value"),u=getValueLabel(c,o.axis,o.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),d=n.getModel("label"),h=normalizeCssArray(d.get("padding")||0),f=d.getFont(),g=getBoundingRect(u,f),p=l.position,v=g.width+h[1]+h[3],b=g.height+h[0]+h[2],_=l.align;_==="right"&&(p[0]-=v),_==="center"&&(p[0]-=v/2);var w=l.verticalAlign;w==="bottom"&&(p[1]-=b),w==="middle"&&(p[1]-=b/2),confineInContainer(p,v,b,a);var x=d.get("backgroundColor");(!x||x==="auto")&&(x=o.get(["axisLine","lineStyle","color"])),s.label={x:p[0],y:p[1],style:createTextStyle$1(d,{text:u,font:f,fill:d.getTextColor(),padding:h,backgroundColor:x}),z2:10}}function confineInContainer(s,o,n,a){var l=a.getWidth(),c=a.getHeight();s[0]=Math.min(s[0]+o,l)-o,s[1]=Math.min(s[1]+n,c)-n,s[0]=Math.max(s[0],0),s[1]=Math.max(s[1],0)}function getValueLabel(s,o,n,a,l){s=o.scale.parse(s);var c=o.scale.getLabel({value:s},{precision:l.precision}),u=l.formatter;if(u){var d={value:getAxisRawValue(o,{value:s}),axisDimension:o.dim,axisIndex:o.index,seriesData:[]};each$f(a,function(h){var f=n.getSeriesByIndex(h.seriesIndex),g=h.dataIndexInside,p=f&&f.getDataParams(g);p&&d.seriesData.push(p)}),isString$2(u)?c=u.replace("{value}",c):isFunction$1(u)&&(c=u(d))}return c}function getTransformedPosition(s,o,n){var a=create$1();return rotate(a,a,n.rotation),translate(a,a,n.position),applyTransform([s.dataToCoord(o),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],a)}function buildCartesianSingleLabelElOption(s,o,n,a,l,c){var u=AxisBuilder.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=l.get(["label","margin"]),buildLabelElOption(o,a,l,c,{position:getTransformedPosition(a.axis,s,n),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function makeLineShape(s,o,n){return n=n||0,{x1:s[n],y1:s[1-n],x2:o[n],y2:o[1-n]}}function makeRectShape(s,o,n){return n=n||0,{x:s[n],y:s[1-n],width:o[n],height:o[1-n]}}function makeSectorShape(s,o,n,a,l,c){return{cx:s,cy:o,r0:n,r:a,startAngle:l,endAngle:c,clockwise:!0}}var CartesianAxisPointer=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.makeElOption=function(n,a,l,c,u){var d=l.axis,h=d.grid,f=c.get("type"),g=getCartesian(h,d).getOtherAxis(d).getGlobalExtent(),p=d.toGlobalCoord(d.dataToCoord(a,!0));if(f&&f!=="none"){var v=buildElStyle(c),b=pointerShapeBuilder$2[f](d,p,g);b.style=v,n.graphicKey=b.type,n.pointer=b}var _=layout$2(h.model,l);buildCartesianSingleLabelElOption(a,n,_,l,c,u)},o.prototype.getHandleTransform=function(n,a,l){var c=layout$2(a.axis.grid.model,a,{labelInside:!1});c.labelMargin=l.get(["handle","margin"]);var u=getTransformedPosition(a.axis,n,c);return{x:u[0],y:u[1],rotation:c.rotation+(c.labelDirection<0?Math.PI:0)}},o.prototype.updateHandleTransform=function(n,a,l,c){var u=l.axis,d=u.grid,h=u.getGlobalExtent(!0),f=getCartesian(d,u).getOtherAxis(u).getGlobalExtent(),g=u.dim==="x"?0:1,p=[n.x,n.y];p[g]+=a[g],p[g]=Math.min(h[1],p[g]),p[g]=Math.max(h[0],p[g]);var v=(f[1]+f[0])/2,b=[v,v];b[g]=p[g];var _=[{verticalAlign:"middle"},{align:"center"}];return{x:p[0],y:p[1],rotation:n.rotation,cursorPoint:b,tooltipOption:_[g]}},o}(BaseAxisPointer);function getCartesian(s,o){var n={};return n[o.dim+"AxisIndex"]=o.index,s.getCartesian(n)}var pointerShapeBuilder$2={line:function(s,o,n){var a=makeLineShape([o,n[0]],[o,n[1]],getAxisDimIndex(s));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(s,o,n){var a=Math.max(1,s.getBandWidth()),l=n[1]-n[0];return{type:"Rect",shape:makeRectShape([o-a/2,n[0]],[a,l],getAxisDimIndex(s))}}};function getAxisDimIndex(s){return s.dim==="x"?0:1}var AxisPointerModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="axisPointer",o.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},o}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(s,o,n){if(!env.node){var a=o.getZr();inner$a(a).records||(inner$a(a).records={}),initGlobalListeners(a,o);var l=inner$a(a).records[s]||(inner$a(a).records[s]={});l.handler=n}}function initGlobalListeners(s,o){if(inner$a(s).initialized)return;inner$a(s).initialized=!0,n("click",curry$1(doEnter,"click")),n("mousemove",curry$1(doEnter,"mousemove")),n("globalout",onLeave);function n(a,l){s.on(a,function(c){var u=makeDispatchAction$1(o);each$8(inner$a(s).records,function(d){d&&l(d,c,u.dispatchAction)}),dispatchTooltipFinally(u.pendings,o)})}}function dispatchTooltipFinally(s,o){var n=s.showTip.length,a=s.hideTip.length,l;n?l=s.showTip[n-1]:a&&(l=s.hideTip[a-1]),l&&(l.dispatchAction=null,o.dispatchAction(l))}function onLeave(s,o,n){s.handler("leave",null,n)}function doEnter(s,o,n,a){o.handler(s,n,a)}function makeDispatchAction$1(s){var o={showTip:[],hideTip:[]},n=function(a){var l=o[a.type];l?l.push(a):(a.dispatchAction=n,s.dispatchAction(a))};return{dispatchAction:n,pendings:o}}function unregister(s,o){if(!env.node){var n=o.getZr(),a=(inner$a(n).records||{})[s];a&&(inner$a(n).records[s]=null)}}var AxisPointerView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=a.getComponent("tooltip"),u=n.get("triggerOn")||c&&c.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(d,h,f){u!=="none"&&(d==="leave"||u.indexOf(d)>=0)&&f({type:"updateAxisPointer",currTrigger:d,x:h&&h.offsetX,y:h&&h.offsetY})})},o.prototype.remove=function(n,a){unregister("axisPointer",a)},o.prototype.dispose=function(n,a){unregister("axisPointer",a)},o.type="axisPointer",o}(ComponentView);function findPointFromSeries(s,o){var n=[],a=s.seriesIndex,l;if(a==null||!(l=o.getSeriesByIndex(a)))return{point:[]};var c=l.getData(),u=queryDataIndex(c,s);if(u==null||u<0||isArray$1(u))return{point:[]};var d=c.getItemGraphicEl(u),h=l.coordinateSystem;if(l.getTooltipPosition)n=l.getTooltipPosition(u)||[];else if(h&&h.dataToPoint)if(s.isStacked){var f=h.getBaseAxis(),g=h.getOtherAxis(f),p=g.dim,v=f.dim,b=p==="x"||p==="radius"?1:0,_=c.mapDimension(v),w=[];w[b]=c.get(_,u),w[1-b]=c.get(c.getCalculationInfo("stackResultDimension"),u),n=h.dataToPoint(w)||[]}else n=h.dataToPoint(c.getValues(map$1(h.dimensions,function(S){return c.mapDimension(S)}),u))||[];else if(d){var x=d.getBoundingRect().clone();x.applyTransform(d.transform),n=[x.x+x.width/2,x.y+x.height/2]}return{point:n,el:d}}var inner$9=makeInner();function axisTrigger(s,o,n){var a=s.currTrigger,l=[s.x,s.y],c=s,u=s.dispatchAction||bind$1(n.dispatchAction,n),d=o.getComponent("axisPointer").coordSysAxesInfo;if(d){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:c.seriesIndex,dataIndex:c.dataIndex},o).point);var h=illegalPoint(l),f=c.axesInfo,g=d.axesInfo,p=a==="leave"||illegalPoint(l),v={},b={},_={list:[],map:{}},w={showPointer:curry$1(showPointer,b),showTooltip:curry$1(showTooltip,_)};each$f(d.coordSysMap,function(S,C){var T=h||S.containPoint(l);each$f(d.coordSysAxesInfo[C],function(R,A){var M=R.axis,D=findInputAxisInfo(f,R);if(!p&&T&&(!f||D)){var O=D&&D.value;O==null&&!h&&(O=M.pointToData(l)),O!=null&&processOnAxis(R,O,w,!1,v)}})});var x={};return each$f(g,function(S,C){var T=S.linkGroup;T&&!b[C]&&each$f(T.axesInfo,function(R,A){var M=b[A];if(R!==S&&M){var D=M.value;T.mapper&&(D=S.axis.scale.parse(T.mapper(D,makeMapperParam(R),makeMapperParam(S)))),x[S.key]=D}})}),each$f(x,function(S,C){processOnAxis(g[C],S,w,!0,v)}),updateModelActually(b,g,v),dispatchTooltipActually(_,l,s,u),dispatchHighDownActually(g,u,n),v}}function processOnAxis(s,o,n,a,l){var c=s.axis;if(!(c.scale.isBlank()||!c.containData(o))){if(!s.involveSeries){n.showPointer(s,o);return}var u=buildPayloadsBySeries(o,s),d=u.payloadBatch,h=u.snapToValue;d[0]&&l.seriesIndex==null&&extend(l,d[0]),!a&&s.snap&&c.containData(h)&&h!=null&&(o=h),n.showPointer(s,o,d),n.showTooltip(s,u,h)}}function buildPayloadsBySeries(s,o){var n=o.axis,a=n.dim,l=s,c=[],u=Number.MAX_VALUE,d=-1;return each$f(o.seriesModels,function(h,f){var g=h.getData().mapDimensionsAll(a),p,v;if(h.getAxisTooltipData){var b=h.getAxisTooltipData(g,s,n);v=b.dataIndices,p=b.nestestValue}else{if(v=h.getData().indicesOfNearest(g[0],s,n.type==="category"?.5:null),!v.length)return;p=h.getData().get(g[0],v[0])}if(!(p==null||!isFinite(p))){var _=s-p,w=Math.abs(_);w<=u&&((w<u||_>=0&&d<0)&&(u=w,d=_,l=p,c.length=0),each$f(v,function(x){c.push({seriesIndex:h.seriesIndex,dataIndexInside:x,dataIndex:h.getData().getRawIndex(x)})}))}}),{payloadBatch:c,snapToValue:l}}function showPointer(s,o,n,a){s[o.key]={value:n,payloadBatch:a}}function showTooltip(s,o,n,a){var l=n.payloadBatch,c=o.axis,u=c.model,d=o.axisPointerModel;if(!(!o.triggerTooltip||!l.length)){var h=o.coordSys.model,f=makeKey(h),g=s.map[f];g||(g=s.map[f]={coordSysId:h.id,coordSysIndex:h.componentIndex,coordSysType:h.type,coordSysMainType:h.mainType,dataByAxis:[]},s.list.push(g)),g.dataByAxis.push({axisDim:c.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:a,valueLabelOpt:{precision:d.get(["label","precision"]),formatter:d.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(s,o,n){var a=n.axesInfo=[];each$f(o,function(l,c){var u=l.axisPointerModel.option,d=s[c];d?(!l.useHandle&&(u.status="show"),u.value=d.value,u.seriesDataIndices=(d.payloadBatch||[]).slice()):!l.useHandle&&(u.status="hide"),u.status==="show"&&a.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:u.value})})}function dispatchTooltipActually(s,o,n,a){if(illegalPoint(o)||!s.list.length){a({type:"hideTip"});return}var l=((s.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};a({type:"showTip",escapeConnect:!0,x:o[0],y:o[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:s.list})}function dispatchHighDownActually(s,o,n){var a=n.getZr(),l="axisPointerLastHighlights",c=inner$9(a)[l]||{},u=inner$9(a)[l]={};each$f(s,function(f,g){var p=f.axisPointerModel.option;p.status==="show"&&f.triggerEmphasis&&each$f(p.seriesDataIndices,function(v){var b=v.seriesIndex+" | "+v.dataIndex;u[b]=v})});var d=[],h=[];each$f(c,function(f,g){!u[g]&&h.push(f)}),each$f(u,function(f,g){!c[g]&&d.push(f)}),h.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:h}),d.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:d})}function findInputAxisInfo(s,o){for(var n=0;n<(s||[]).length;n++){var a=s[n];if(o.axis.dim===a.axisDim&&o.axis.model.componentIndex===a.axisIndex)return a}}function makeMapperParam(s){var o=s.axis.model,n={},a=n.axisDim=s.axis.dim;return n.axisIndex=n[a+"AxisIndex"]=o.componentIndex,n.axisName=n[a+"AxisName"]=o.name,n.axisId=n[a+"AxisId"]=o.id,n}function illegalPoint(s){return!s||s[0]==null||isNaN(s[0])||s[1]==null||isNaN(s[1])}function install$q(s){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),s.registerComponentModel(AxisPointerModel),s.registerComponentView(AxisPointerView),s.registerPreprocessor(function(o){if(o){(!o.axisPointer||o.axisPointer.length===0)&&(o.axisPointer={});var n=o.axisPointer.link;n&&!isArray$1(n)&&(o.axisPointer.link=[n])}}),s.registerProcessor(s.PRIORITY.PROCESSOR.STATISTIC,function(o,n){o.getComponent("axisPointer").coordSysAxesInfo=collect(o,n)}),s.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(s){use(install$N),use(install$q)}var PolarAxisPointer=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.makeElOption=function(n,a,l,c,u){var d=l.axis;d.dim==="angle"&&(this.animationThreshold=Math.PI/18);var h=d.polar,f=h.getOtherAxis(d),g=f.getExtent(),p=d.dataToCoord(a),v=c.get("type");if(v&&v!=="none"){var b=buildElStyle(c),_=pointerShapeBuilder$1[v](d,h,p,g);_.style=b,n.graphicKey=_.type,n.pointer=_}var w=c.get(["label","margin"]),x=getLabelPosition(a,l,c,h,w);buildLabelElOption(n,l,c,u,x)},o}(BaseAxisPointer);function getLabelPosition(s,o,n,a,l){var c=o.axis,u=c.dataToCoord(s),d=a.getAngleAxis().getExtent()[0];d=d/180*Math.PI;var h=a.getRadiusAxis().getExtent(),f,g,p;if(c.dim==="radius"){var v=create$1();rotate(v,v,d),translate(v,v,[a.cx,a.cy]),f=applyTransform([u,-l],v);var b=o.getModel("axisLabel").get("rotate")||0,_=AxisBuilder.innerTextLayout(d,b*Math.PI/180,-1);g=_.textAlign,p=_.textVerticalAlign}else{var w=h[1];f=a.coordToPoint([w+l,u]);var x=a.cx,S=a.cy;g=Math.abs(f[0]-x)/w<.3?"center":f[0]>x?"left":"right",p=Math.abs(f[1]-S)/w<.3?"middle":f[1]>S?"top":"bottom"}return{position:f,align:g,verticalAlign:p}}var pointerShapeBuilder$1={line:function(s,o,n,a){return s.dim==="angle"?{type:"Line",shape:makeLineShape(o.coordToPoint([a[0],n]),o.coordToPoint([a[1],n]))}:{type:"Circle",shape:{cx:o.cx,cy:o.cy,r:n}}},shadow:function(s,o,n,a){var l=Math.max(1,s.getBandWidth()),c=Math.PI/180;return s.dim==="angle"?{type:"Sector",shape:makeSectorShape(o.cx,o.cy,a[0],a[1],(-n-l/2)*c,(-n+l/2)*c)}:{type:"Sector",shape:makeSectorShape(o.cx,o.cy,n-l/2,n+l/2,0,Math.PI*2)}}},PolarModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.findAxisModel=function(n){var a,l=this.ecModel;return l.eachComponent(n,function(c){c.getCoordSysModel()===this&&(a=c)},this),a},o.type="polar",o.dependencies=["radiusAxis","angleAxis"],o.defaultOption={z:0,center:["50%","50%"],radius:"80%"},o}(ComponentModel),PolarAxisModel=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},o.type="polarAxis",o}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="angleAxis",o}(PolarAxisModel),RadiusAxisModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="radiusAxis",o}(PolarAxisModel),RadiusAxis=function(s){__extends$1(o,s);function o(n,a){return s.call(this,"radius",n,a)||this}return o.prototype.pointToData=function(n,a){return this.polar.pointToData(n,a)[this.dim==="radius"?0:1]},o}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(s){__extends$1(o,s);function o(n,a){return s.call(this,"angle",n,a||[0,360])||this}return o.prototype.pointToData=function(n,a){return this.polar.pointToData(n,a)[this.dim==="radius"?0:1]},o.prototype.calculateCategoryInterval=function(){var n=this,a=n.getLabelModel(),l=n.scale,c=l.getExtent(),u=l.count();if(c[1]-c[0]<1)return 0;var d=c[0],h=n.dataToCoord(d+1)-n.dataToCoord(d),f=Math.abs(h),g=getBoundingRect(d==null?"":d+"",a.getFont(),"center","top"),p=Math.max(g.height,7),v=p/f;isNaN(v)&&(v=1/0);var b=Math.max(0,Math.floor(v)),_=inner$8(n.model),w=_.lastAutoInterval,x=_.lastTickCount;return w!=null&&x!=null&&Math.abs(w-b)<=1&&Math.abs(x-u)<=1&&w>b?b=w:(_.lastTickCount=u,_.lastAutoInterval=b),b},o}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function s(o){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=o||"",this._radiusAxis.polar=this._angleAxis.polar=this}return s.prototype.containPoint=function(o){var n=this.pointToCoord(o);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},s.prototype.containData=function(o){return this._radiusAxis.containData(o[0])&&this._angleAxis.containData(o[1])},s.prototype.getAxis=function(o){var n="_"+o+"Axis";return this[n]},s.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},s.prototype.getAxesByScale=function(o){var n=[],a=this._angleAxis,l=this._radiusAxis;return a.scale.type===o&&n.push(a),l.scale.type===o&&n.push(l),n},s.prototype.getAngleAxis=function(){return this._angleAxis},s.prototype.getRadiusAxis=function(){return this._radiusAxis},s.prototype.getOtherAxis=function(o){var n=this._angleAxis;return o===n?this._radiusAxis:n},s.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},s.prototype.getTooltipAxes=function(o){var n=o!=null&&o!=="auto"?this.getAxis(o):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},s.prototype.dataToPoint=function(o,n){return this.coordToPoint([this._radiusAxis.dataToRadius(o[0],n),this._angleAxis.dataToAngle(o[1],n)])},s.prototype.pointToData=function(o,n){var a=this.pointToCoord(o);return[this._radiusAxis.radiusToData(a[0],n),this._angleAxis.angleToData(a[1],n)]},s.prototype.pointToCoord=function(o){var n=o[0]-this.cx,a=o[1]-this.cy,l=this.getAngleAxis(),c=l.getExtent(),u=Math.min(c[0],c[1]),d=Math.max(c[0],c[1]);l.inverse?u=d-360:d=u+360;var h=Math.sqrt(n*n+a*a);n/=h,a/=h;for(var f=Math.atan2(-a,n)/Math.PI*180,g=f<u?1:-1;f<u||f>d;)f+=g*360;return[h,f]},s.prototype.coordToPoint=function(o){var n=o[0],a=o[1]/180*Math.PI,l=Math.cos(a)*n+this.cx,c=-Math.sin(a)*n+this.cy;return[l,c]},s.prototype.getArea=function(){var o=this.getAngleAxis(),n=this.getRadiusAxis(),a=n.getExtent().slice();a[0]>a[1]&&a.reverse();var l=o.getExtent(),c=Math.PI/180,u=1e-4;return{cx:this.cx,cy:this.cy,r0:a[0],r:a[1],startAngle:-l[0]*c,endAngle:-l[1]*c,clockwise:o.inverse,contain:function(d,h){var f=d-this.cx,g=h-this.cy,p=f*f+g*g,v=this.r,b=this.r0;return v!==b&&p-u<=v*v&&p+u>=b*b}}},s.prototype.convertToPixel=function(o,n,a){var l=getCoordSys$2(n);return l===this?this.dataToPoint(a):null},s.prototype.convertFromPixel=function(o,n,a){var l=getCoordSys$2(n);return l===this?this.pointToData(a):null},s}();function getCoordSys$2(s){var o=s.seriesModel,n=s.polarModel;return n&&n.coordinateSystem||o&&o.coordinateSystem}function resizePolar(s,o,n){var a=o.get("center"),l=n.getWidth(),c=n.getHeight();s.cx=parsePercent(a[0],l),s.cy=parsePercent(a[1],c);var u=s.getRadiusAxis(),d=Math.min(l,c)/2,h=o.get("radius");h==null?h=[0,"100%"]:isArray$1(h)||(h=[0,h]);var f=[parsePercent(h[0],d),parsePercent(h[1],d)];u.inverse?u.setExtent(f[1],f[0]):u.setExtent(f[0],f[1])}function updatePolarScale(s,o){var n=this,a=n.getAngleAxis(),l=n.getRadiusAxis();if(a.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),s.eachSeries(function(d){if(d.coordinateSystem===n){var h=d.getData();each$f(getDataDimensionsOnAxis(h,"radius"),function(f){l.scale.unionExtentFromData(h,f)}),each$f(getDataDimensionsOnAxis(h,"angle"),function(f){a.scale.unionExtentFromData(h,f)})}}),niceScaleExtent(a.scale,a.model),niceScaleExtent(l.scale,l.model),a.type==="category"&&!a.onBand){var c=a.getExtent(),u=360/a.scale.count();a.inverse?c[1]+=u:c[1]-=u,a.setExtent(c[0],c[1])}}function isAngleAxisModel(s){return s.mainType==="angleAxis"}function setAxis(s,o){var n;if(s.type=o.get("type"),s.scale=createScaleByModel$1(o),s.onBand=o.get("boundaryGap")&&s.type==="category",s.inverse=o.get("inverse"),isAngleAxisModel(o)){s.inverse=s.inverse!==o.get("clockwise");var a=o.get("startAngle"),l=(n=o.get("endAngle"))!==null&&n!==void 0?n:a+(s.inverse?-360:360);s.setExtent(a,l)}o.axis=s,s.model=o}var polarCreator={dimensions:polarDimensions,create:function(s,o){var n=[];return s.eachComponent("polar",function(a,l){var c=new Polar(l+"");c.update=updatePolarScale;var u=c.getRadiusAxis(),d=c.getAngleAxis(),h=a.findAxisModel("radiusAxis"),f=a.findAxisModel("angleAxis");setAxis(u,h),setAxis(d,f),resizePolar(c,a,o),n.push(c),a.coordinateSystem=c,c.model=a}),s.eachSeries(function(a){if(a.get("coordinateSystem")==="polar"){var l=a.getReferringComponents("polar",SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"&&!l)throw new Error('Polar "'+retrieve(a.get("polarIndex"),a.get("polarId"),0)+'" not found');a.coordinateSystem=l.coordinateSystem}}),n}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(s,o,n){o[1]>o[0]&&(o=o.slice().reverse());var a=s.coordToPoint([o[0],n]),l=s.coordToPoint([o[1],n]);return{x1:a[0],y1:a[1],x2:l[0],y2:l[1]}}function getRadiusIdx(s){var o=s.getRadiusAxis();return o.inverse?0:1}function fixAngleOverlap(s){var o=s[0],n=s[s.length-1];o&&n&&Math.abs(Math.abs(o.coord-n.coord)-360)<1e-4&&s.pop()}var AngleAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.axisPointerClass="PolarAxisPointer",n}return o.prototype.render=function(n,a){if(this.group.removeAll(),!!n.get("show")){var l=n.axis,c=l.polar,u=c.getRadiusAxis().getExtent(),d=l.getTicksCoords(),h=l.getMinorTicksCoords(),f=map$1(l.getViewLabels(),function(g){g=clone$4(g);var p=l.scale,v=p.type==="ordinal"?p.getRawOrdinalNumber(g.tickValue):g.tickValue;return g.coord=l.dataToCoord(v),g});fixAngleOverlap(f),fixAngleOverlap(d),each$f(elementList,function(g){n.get([g,"show"])&&(!l.scale.isBlank()||g==="axisLine")&&angelAxisElementsBuilders[g](this.group,n,c,d,h,u,f)},this)}},o.type="angleAxis",o}(AxisView),angelAxisElementsBuilders={axisLine:function(s,o,n,a,l,c){var u=o.getModel(["axisLine","lineStyle"]),d=n.getAngleAxis(),h=Math.PI/180,f=d.getExtent(),g=getRadiusIdx(n),p=g?0:1,v,b=Math.abs(f[1]-f[0])===360?"Circle":"Arc";c[p]===0?v=new graphic$1[b]({shape:{cx:n.cx,cy:n.cy,r:c[g],startAngle:-f[0]*h,endAngle:-f[1]*h,clockwise:d.inverse},style:u.getLineStyle(),z2:1,silent:!0}):v=new Ring({shape:{cx:n.cx,cy:n.cy,r:c[g],r0:c[p]},style:u.getLineStyle(),z2:1,silent:!0}),v.style.fill=null,s.add(v)},axisTick:function(s,o,n,a,l,c){var u=o.getModel("axisTick"),d=(u.get("inside")?-1:1)*u.get("length"),h=c[getRadiusIdx(n)],f=map$1(a,function(g){return new Line$1({shape:getAxisLineShape(n,[h,h+d],g.coord)})});s.add(mergePath(f,{style:defaults(u.getModel("lineStyle").getLineStyle(),{stroke:o.get(["axisLine","lineStyle","color"])})}))},minorTick:function(s,o,n,a,l,c){if(l.length){for(var u=o.getModel("axisTick"),d=o.getModel("minorTick"),h=(u.get("inside")?-1:1)*d.get("length"),f=c[getRadiusIdx(n)],g=[],p=0;p<l.length;p++)for(var v=0;v<l[p].length;v++)g.push(new Line$1({shape:getAxisLineShape(n,[f,f+h],l[p][v].coord)}));s.add(mergePath(g,{style:defaults(d.getModel("lineStyle").getLineStyle(),defaults(u.getLineStyle(),{stroke:o.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(s,o,n,a,l,c,u){var d=o.getCategories(!0),h=o.getModel("axisLabel"),f=h.get("margin"),g=o.get("triggerEvent");each$f(u,function(p,v){var b=h,_=p.tickValue,w=c[getRadiusIdx(n)],x=n.coordToPoint([w+f,p.coord]),S=n.cx,C=n.cy,T=Math.abs(x[0]-S)/w<.3?"center":x[0]>S?"left":"right",R=Math.abs(x[1]-C)/w<.3?"middle":x[1]>C?"top":"bottom";if(d&&d[_]){var A=d[_];isObject$3(A)&&A.textStyle&&(b=new Model(A.textStyle,h,h.ecModel))}var M=new ZRText({silent:AxisBuilder.isLabelSilent(o),style:createTextStyle$1(b,{x:x[0],y:x[1],fill:b.getTextColor()||o.get(["axisLine","lineStyle","color"]),text:p.formattedLabel,align:T,verticalAlign:R})});if(s.add(M),g){var D=AxisBuilder.makeAxisEventDataBase(o);D.targetType="axisLabel",D.value=p.rawLabel,getECData(M).eventData=D}},this)},splitLine:function(s,o,n,a,l,c){var u=o.getModel("splitLine"),d=u.getModel("lineStyle"),h=d.get("color"),f=0;h=h instanceof Array?h:[h];for(var g=[],p=0;p<a.length;p++){var v=f++%h.length;g[v]=g[v]||[],g[v].push(new Line$1({shape:getAxisLineShape(n,c,a[p].coord)}))}for(var p=0;p<g.length;p++)s.add(mergePath(g[p],{style:defaults({stroke:h[p%h.length]},d.getLineStyle()),silent:!0,z:o.get("z")}))},minorSplitLine:function(s,o,n,a,l,c){if(l.length){for(var u=o.getModel("minorSplitLine"),d=u.getModel("lineStyle"),h=[],f=0;f<l.length;f++)for(var g=0;g<l[f].length;g++)h.push(new Line$1({shape:getAxisLineShape(n,c,l[f][g].coord)}));s.add(mergePath(h,{style:d.getLineStyle(),silent:!0,z:o.get("z")}))}},splitArea:function(s,o,n,a,l,c){if(a.length){var u=o.getModel("splitArea"),d=u.getModel("areaStyle"),h=d.get("color"),f=0;h=h instanceof Array?h:[h];for(var g=[],p=Math.PI/180,v=-a[0].coord*p,b=Math.min(c[0],c[1]),_=Math.max(c[0],c[1]),w=o.get("clockwise"),x=1,S=a.length;x<=S;x++){var C=x===S?a[0].coord:a[x].coord,T=f++%h.length;g[T]=g[T]||[],g[T].push(new Sector({shape:{cx:n.cx,cy:n.cy,r0:b,r:_,startAngle:v,endAngle:-C*p,clockwise:w},silent:!0})),v=-C*p}for(var x=0;x<g.length;x++)s.add(mergePath(g[x],{style:defaults({fill:h[x%h.length]},d.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.axisPointerClass="PolarAxisPointer",n}return o.prototype.render=function(n,a){if(this.group.removeAll(),!!n.get("show")){var l=this._axisGroup,c=this._axisGroup=new Group$3;this.group.add(c);var u=n.axis,d=u.polar,h=d.getAngleAxis(),f=u.getTicksCoords(),g=u.getMinorTicksCoords(),p=h.getExtent()[0],v=u.getExtent(),b=layoutAxis(d,n,p),_=new AxisBuilder(n,b);each$f(axisBuilderAttrs$1,_.add,_),c.add(_.getGroup()),groupTransition(l,c,n),each$f(selfBuilderAttrs$1,function(w){n.get([w,"show"])&&!u.scale.isBlank()&&axisElementBuilders$1[w](this.group,n,d,p,v,f,g)},this)}},o.type="radiusAxis",o}(AxisView),axisElementBuilders$1={splitLine:function(s,o,n,a,l,c){var u=o.getModel("splitLine"),d=u.getModel("lineStyle"),h=d.get("color"),f=0,g=n.getAngleAxis(),p=Math.PI/180,v=g.getExtent(),b=Math.abs(v[1]-v[0])===360?"Circle":"Arc";h=h instanceof Array?h:[h];for(var _=[],w=0;w<c.length;w++){var x=f++%h.length;_[x]=_[x]||[],_[x].push(new graphic$1[b]({shape:{cx:n.cx,cy:n.cy,r:Math.max(c[w].coord,0),startAngle:-v[0]*p,endAngle:-v[1]*p,clockwise:g.inverse}}))}for(var w=0;w<_.length;w++)s.add(mergePath(_[w],{style:defaults({stroke:h[w%h.length],fill:null},d.getLineStyle()),silent:!0}))},minorSplitLine:function(s,o,n,a,l,c,u){if(u.length){for(var d=o.getModel("minorSplitLine"),h=d.getModel("lineStyle"),f=[],g=0;g<u.length;g++)for(var p=0;p<u[g].length;p++)f.push(new Circle({shape:{cx:n.cx,cy:n.cy,r:u[g][p].coord}}));s.add(mergePath(f,{style:defaults({fill:null},h.getLineStyle()),silent:!0}))}},splitArea:function(s,o,n,a,l,c){if(c.length){var u=o.getModel("splitArea"),d=u.getModel("areaStyle"),h=d.get("color"),f=0;h=h instanceof Array?h:[h];for(var g=[],p=c[0].coord,v=1;v<c.length;v++){var b=f++%h.length;g[b]=g[b]||[],g[b].push(new Sector({shape:{cx:n.cx,cy:n.cy,r0:p,r:c[v].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),p=c[v].coord}for(var v=0;v<g.length;v++)s.add(mergePath(g[v],{style:defaults({fill:h[v%h.length]},d.getAreaStyle()),silent:!0}))}}};function layoutAxis(s,o,n){return{position:[s.cx,s.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:o.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(s){return s.get("stack")||"__ec_stack_"+s.seriesIndex}function getAxisKey(s,o){return o.dim+s.model.componentIndex}function barLayoutPolar(s,o,n){var a={},l=calRadialBar(filter(o.getSeriesByType(s),function(c){return!o.isSeriesFiltered(c)&&c.coordinateSystem&&c.coordinateSystem.type==="polar"}));o.eachSeriesByType(s,function(c){if(c.coordinateSystem.type==="polar"){var u=c.getData(),d=c.coordinateSystem,h=d.getBaseAxis(),f=getAxisKey(d,h),g=getSeriesStackId(c),p=l[f][g],v=p.offset,b=p.width,_=d.getOtherAxis(h),w=c.coordinateSystem.cx,x=c.coordinateSystem.cy,S=c.get("barMinHeight")||0,C=c.get("barMinAngle")||0;a[g]=a[g]||[];for(var T=u.mapDimension(_.dim),R=u.mapDimension(h.dim),A=isDimensionStacked(u,T),M=h.dim!=="radius"||!c.get("roundCap",!0),D=_.model,O=D.get("startValue"),H=_.dataToCoord(O||0),j=0,q=u.count();j<q;j++){var Y=u.get(T,j),ee=u.get(R,j),te=Y>=0?"p":"n",re=H;A&&(a[g][ee]||(a[g][ee]={p:H,n:H}),re=a[g][ee][te]);var ae=void 0,ue=void 0,ce=void 0,le=void 0;if(_.dim==="radius"){var ie=_.dataToCoord(Y)-H,de=h.dataToCoord(ee);Math.abs(ie)<S&&(ie=(ie<0?-1:1)*S),ae=re,ue=re+ie,ce=de-v,le=ce-b,A&&(a[g][ee][te]=ue)}else{var ge=_.dataToCoord(Y,M)-H,pe=h.dataToCoord(ee);Math.abs(ge)<C&&(ge=(ge<0?-1:1)*C),ae=pe+v,ue=ae+b,ce=re,le=re+ge,A&&(a[g][ee][te]=le)}u.setItemLayout(j,{cx:w,cy:x,r0:ae,r:ue,startAngle:-ce*Math.PI/180,endAngle:-le*Math.PI/180,clockwise:ce>=le})}}})}function calRadialBar(s){var o={};each$f(s,function(a,l){var c=a.getData(),u=a.coordinateSystem,d=u.getBaseAxis(),h=getAxisKey(u,d),f=d.getExtent(),g=d.type==="category"?d.getBandWidth():Math.abs(f[1]-f[0])/c.count(),p=o[h]||{bandWidth:g,remainedWidth:g,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},v=p.stacks;o[h]=p;var b=getSeriesStackId(a);v[b]||p.autoWidthCount++,v[b]=v[b]||{width:0,maxWidth:0};var _=parsePercent(a.get("barWidth"),g),w=parsePercent(a.get("barMaxWidth"),g),x=a.get("barGap"),S=a.get("barCategoryGap");_&&!v[b].width&&(_=Math.min(p.remainedWidth,_),v[b].width=_,p.remainedWidth-=_),w&&(v[b].maxWidth=w),x!=null&&(p.gap=x),S!=null&&(p.categoryGap=S)});var n={};return each$f(o,function(a,l){n[l]={};var c=a.stacks,u=a.bandWidth,d=parsePercent(a.categoryGap,u),h=parsePercent(a.gap,1),f=a.remainedWidth,g=a.autoWidthCount,p=(f-d)/(g+(g-1)*h);p=Math.max(p,0),each$f(c,function(w,x){var S=w.maxWidth;S&&S<p&&(S=Math.min(S,f),w.width&&(S=Math.min(S,w.width)),f-=S,w.width=S,g--)}),p=(f-d)/(g+(g-1)*h),p=Math.max(p,0);var v=0,b;each$f(c,function(w,x){w.width||(w.width=p),b=w,v+=w.width*(1+h)}),b&&(v-=b.width*h);var _=-v/2;each$f(c,function(w,x){n[l][x]=n[l][x]||{offset:_,width:w.width},_+=w.width*(1+h)})}),n}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="polar",o}(ComponentView);function install$o(s){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),s.registerCoordinateSystem("polar",polarCreator),s.registerComponentModel(PolarModel),s.registerComponentView(PolarView),axisModelCreator(s,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(s,"radius",RadiusAxisModel,radiusAxisExtraOption),s.registerComponentView(AngleAxisView),s.registerComponentView(RadiusAxisView),s.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(s,o){o=o||{};var n=s.coordinateSystem,a=s.axis,l={},c=a.position,u=a.orient,d=n.getRect(),h=[d.x,d.x+d.width,d.y,d.y+d.height],f={horizontal:{top:h[2],bottom:h[3]},vertical:{left:h[0],right:h[1]}};l.position=[u==="vertical"?f.vertical[c]:h[0],u==="horizontal"?f.horizontal[c]:h[3]];var g={horizontal:0,vertical:1};l.rotation=Math.PI/2*g[u];var p={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=p[c],s.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(o.labelInside,s.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var v=o.rotate;return v==null&&(v=s.get(["axisLabel","rotate"])),l.labelRotation=c==="top"?-v:v,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.axisPointerClass="SingleAxisPointer",n}return o.prototype.render=function(n,a,l,c){var u=this.group;u.removeAll();var d=this._axisGroup;this._axisGroup=new Group$3;var h=layout$1(n),f=new AxisBuilder(n,h);each$f(axisBuilderAttrs,f.add,f),u.add(this._axisGroup),u.add(f.getGroup()),each$f(selfBuilderAttrs,function(g){n.get([g,"show"])&&axisElementBuilders[g](this,this.group,this._axisGroup,n)},this),groupTransition(d,this._axisGroup,n),s.prototype.render.call(this,n,a,l,c)},o.prototype.remove=function(){rectCoordAxisHandleRemove(this)},o.type="singleAxis",o}(AxisView),axisElementBuilders={splitLine:function(s,o,n,a){var l=a.axis;if(!l.scale.isBlank()){var c=a.getModel("splitLine"),u=c.getModel("lineStyle"),d=u.get("color");d=d instanceof Array?d:[d];for(var h=u.get("width"),f=a.coordinateSystem.getRect(),g=l.isHorizontal(),p=[],v=0,b=l.getTicksCoords({tickModel:c}),_=[],w=[],x=0;x<b.length;++x){var S=l.toGlobalCoord(b[x].coord);g?(_[0]=S,_[1]=f.y,w[0]=S,w[1]=f.y+f.height):(_[0]=f.x,_[1]=S,w[0]=f.x+f.width,w[1]=S);var C=new Line$1({shape:{x1:_[0],y1:_[1],x2:w[0],y2:w[1]},silent:!0});subPixelOptimizeLine(C.shape,h);var T=v++%d.length;p[T]=p[T]||[],p[T].push(C)}for(var R=u.getLineStyle(["color"]),x=0;x<p.length;++x)o.add(mergePath(p[x],{style:defaults({stroke:d[x%d.length]},R),silent:!0}))}},splitArea:function(s,o,n,a){rectCoordAxisBuildSplitArea(s,n,a,a)}},SingleAxisModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.getCoordSysModel=function(){return this},o.type="singleAxis",o.layoutMode="box",o.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},o}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(s){__extends$1(o,s);function o(n,a,l,c,u){var d=s.call(this,n,a,l)||this;return d.type=c||"value",d.position=u||"bottom",d}return o.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},o.prototype.pointToData=function(n,a){return this.coordinateSystem.pointToData(n)[0]},o}(Axis),singleDimensions=["single"],Single=function(){function s(o,n,a){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=o,this._init(o,n,a)}return s.prototype._init=function(o,n,a){var l=this.dimension,c=new SingleAxis(l,createScaleByModel$1(o),[0,0],o.get("type"),o.get("position")),u=c.type==="category";c.onBand=u&&o.get("boundaryGap"),c.inverse=o.get("inverse"),c.orient=o.get("orient"),o.axis=c,c.model=o,c.coordinateSystem=this,this._axis=c},s.prototype.update=function(o,n){o.eachSeries(function(a){if(a.coordinateSystem===this){var l=a.getData();each$f(l.mapDimensionsAll(this.dimension),function(c){this._axis.scale.unionExtentFromData(l,c)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},s.prototype.resize=function(o,n){this._rect=getLayoutRect({left:o.get("left"),top:o.get("top"),right:o.get("right"),bottom:o.get("bottom"),width:o.get("width"),height:o.get("height")},{width:n.getWidth(),height:n.getHeight()}),this._adjustAxis()},s.prototype.getRect=function(){return this._rect},s.prototype._adjustAxis=function(){var o=this._rect,n=this._axis,a=n.isHorizontal(),l=a?[0,o.width]:[0,o.height],c=n.inverse?1:0;n.setExtent(l[c],l[1-c]),this._updateAxisTransform(n,a?o.x:o.y)},s.prototype._updateAxisTransform=function(o,n){var a=o.getExtent(),l=a[0]+a[1],c=o.isHorizontal();o.toGlobalCoord=c?function(u){return u+n}:function(u){return l-u+n},o.toLocalCoord=c?function(u){return u-n}:function(u){return l-u+n}},s.prototype.getAxis=function(){return this._axis},s.prototype.getBaseAxis=function(){return this._axis},s.prototype.getAxes=function(){return[this._axis]},s.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},s.prototype.containPoint=function(o){var n=this.getRect(),a=this.getAxis(),l=a.orient;return l==="horizontal"?a.contain(a.toLocalCoord(o[0]))&&o[1]>=n.y&&o[1]<=n.y+n.height:a.contain(a.toLocalCoord(o[1]))&&o[0]>=n.y&&o[0]<=n.y+n.height},s.prototype.pointToData=function(o){var n=this.getAxis();return[n.coordToData(n.toLocalCoord(o[n.orient==="horizontal"?0:1]))]},s.prototype.dataToPoint=function(o){var n=this.getAxis(),a=this.getRect(),l=[],c=n.orient==="horizontal"?0:1;return o instanceof Array&&(o=o[0]),l[c]=n.toGlobalCoord(n.dataToCoord(+o)),l[1-c]=c===0?a.y+a.height/2:a.x+a.width/2,l},s.prototype.convertToPixel=function(o,n,a){var l=getCoordSys$1(n);return l===this?this.dataToPoint(a):null},s.prototype.convertFromPixel=function(o,n,a){var l=getCoordSys$1(n);return l===this?this.pointToData(a):null},s}();function getCoordSys$1(s){var o=s.seriesModel,n=s.singleAxisModel;return n&&n.coordinateSystem||o&&o.coordinateSystem}function create(s,o){var n=[];return s.eachComponent("singleAxis",function(a,l){var c=new Single(a,s,o);c.name="single_"+l,c.resize(a,o),a.coordinateSystem=c,n.push(c)}),s.eachSeries(function(a){if(a.get("coordinateSystem")==="singleAxis"){var l=a.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];a.coordinateSystem=l&&l.coordinateSystem}}),n}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.makeElOption=function(n,a,l,c,u){var d=l.axis,h=d.coordinateSystem,f=getGlobalExtent(h,1-getPointDimIndex(d)),g=h.dataToPoint(a)[0],p=c.get("type");if(p&&p!=="none"){var v=buildElStyle(c),b=pointerShapeBuilder[p](d,g,f);b.style=v,n.graphicKey=b.type,n.pointer=b}var _=layout$1(l);buildCartesianSingleLabelElOption(a,n,_,l,c,u)},o.prototype.getHandleTransform=function(n,a,l){var c=layout$1(a,{labelInside:!1});c.labelMargin=l.get(["handle","margin"]);var u=getTransformedPosition(a.axis,n,c);return{x:u[0],y:u[1],rotation:c.rotation+(c.labelDirection<0?Math.PI:0)}},o.prototype.updateHandleTransform=function(n,a,l,c){var u=l.axis,d=u.coordinateSystem,h=getPointDimIndex(u),f=getGlobalExtent(d,h),g=[n.x,n.y];g[h]+=a[h],g[h]=Math.min(f[1],g[h]),g[h]=Math.max(f[0],g[h]);var p=getGlobalExtent(d,1-h),v=(p[1]+p[0])/2,b=[v,v];return b[h]=g[h],{x:g[0],y:g[1],rotation:n.rotation,cursorPoint:b,tooltipOption:{verticalAlign:"middle"}}},o}(BaseAxisPointer),pointerShapeBuilder={line:function(s,o,n){var a=makeLineShape([o,n[0]],[o,n[1]],getPointDimIndex(s));return{type:"Line",subPixelOptimize:!0,shape:a}},shadow:function(s,o,n){var a=s.getBandWidth(),l=n[1]-n[0];return{type:"Rect",shape:makeRectShape([o-a/2,n[0]],[a,l],getPointDimIndex(s))}}};function getPointDimIndex(s){return s.isHorizontal()?0:1}function getGlobalExtent(s,o){var n=s.getRect();return[n[XY$1[o]],n[XY$1[o]]+n[WH$1[o]]]}var SingleView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="single",o}(ComponentView);function install$n(s){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),s.registerComponentView(SingleView),s.registerComponentView(SingleAxisView),s.registerComponentModel(SingleAxisModel),axisModelCreator(s,"single",SingleAxisModel,SingleAxisModel.defaultOption),s.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a,l){var c=getLayoutParams(n);s.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(n,c)},o.prototype.mergeOption=function(n){s.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,n)},o.prototype.getCellSize=function(){return this.option.cellSize},o.type="calendar",o.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},o}(ComponentModel);function mergeAndNormalizeLayoutParams$1(s,o){var n=s.cellSize,a;isArray$1(n)?a=n:a=s.cellSize=[n,n],a.length===1&&(a[1]=a[0]);var l=map$1([0,1],function(c){return sizeCalculable(o,c)&&(a[c]="auto"),a[c]!=null&&a[c]!=="auto"});mergeLayoutParam(s,o,{type:"box",ignoreSize:l})}var CalendarView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){var c=this.group;c.removeAll();var u=n.coordinateSystem,d=u.getRangeInfo(),h=u.getOrient(),f=a.getLocaleModel();this._renderDayRect(n,d,c),this._renderLines(n,d,h,c),this._renderYearText(n,d,h,c),this._renderMonthText(n,f,h,c),this._renderWeekText(n,f,d,h,c)},o.prototype._renderDayRect=function(n,a,l){for(var c=n.coordinateSystem,u=n.getModel("itemStyle").getItemStyle(),d=c.getCellWidth(),h=c.getCellHeight(),f=a.start.time;f<=a.end.time;f=c.getNextNDay(f,1).time){var g=c.dataToRect([f],!1).tl,p=new Rect$2({shape:{x:g[0],y:g[1],width:d,height:h},cursor:"default",style:u});l.add(p)}},o.prototype._renderLines=function(n,a,l,c){var u=this,d=n.coordinateSystem,h=n.getModel(["splitLine","lineStyle"]).getLineStyle(),f=n.get(["splitLine","show"]),g=h.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var p=a.start,v=0;p.time<=a.end.time;v++){_(p.formatedDate),v===0&&(p=d.getDateInfo(a.start.y+"-"+a.start.m));var b=p.date;b.setMonth(b.getMonth()+1),p=d.getDateInfo(b)}_(d.getNextNDay(a.end.time,1).formatedDate);function _(w){u._firstDayOfMonth.push(d.getDateInfo(w)),u._firstDayPoints.push(d.dataToRect([w],!1).tl);var x=u._getLinePointsOfOneWeek(n,w,l);u._tlpoints.push(x[0]),u._blpoints.push(x[x.length-1]),f&&u._drawSplitline(x,h,c)}f&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,g,l),h,c),f&&this._drawSplitline(u._getEdgesPoints(u._blpoints,g,l),h,c)},o.prototype._getEdgesPoints=function(n,a,l){var c=[n[0].slice(),n[n.length-1].slice()],u=l==="horizontal"?0:1;return c[0][u]=c[0][u]-a/2,c[1][u]=c[1][u]+a/2,c},o.prototype._drawSplitline=function(n,a,l){var c=new Polyline$1({z2:20,shape:{points:n},style:a});l.add(c)},o.prototype._getLinePointsOfOneWeek=function(n,a,l){for(var c=n.coordinateSystem,u=c.getDateInfo(a),d=[],h=0;h<7;h++){var f=c.getNextNDay(u.time,h),g=c.dataToRect([f.time],!1);d[2*f.day]=g.tl,d[2*f.day+1]=g[l==="horizontal"?"bl":"tr"]}return d},o.prototype._formatterLabel=function(n,a){return isString$2(n)&&n?formatTplSimple(n,a):isFunction$1(n)?n(a):a.nameMap},o.prototype._yearTextPositionControl=function(n,a,l,c,u){var d=a[0],h=a[1],f=["center","bottom"];c==="bottom"?(h+=u,f=["center","top"]):c==="left"?d-=u:c==="right"?(d+=u,f=["center","top"]):h-=u;var g=0;return(c==="left"||c==="right")&&(g=Math.PI/2),{rotation:g,x:d,y:h,style:{align:f[0],verticalAlign:f[1]}}},o.prototype._renderYearText=function(n,a,l,c){var u=n.getModel("yearLabel");if(u.get("show")){var d=u.get("margin"),h=u.get("position");h||(h=l!=="horizontal"?"top":"left");var f=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],g=(f[0][0]+f[1][0])/2,p=(f[0][1]+f[1][1])/2,v=l==="horizontal"?0:1,b={top:[g,f[v][1]],bottom:[g,f[1-v][1]],left:[f[1-v][0],p],right:[f[v][0],p]},_=a.start.y;+a.end.y>+a.start.y&&(_=_+"-"+a.end.y);var w=u.get("formatter"),x={start:a.start.y,end:a.end.y,nameMap:_},S=this._formatterLabel(w,x),C=new ZRText({z2:30,style:createTextStyle$1(u,{text:S}),silent:u.get("silent")});C.attr(this._yearTextPositionControl(C,b[h],l,h,d)),c.add(C)}},o.prototype._monthTextPositionControl=function(n,a,l,c,u){var d="left",h="top",f=n[0],g=n[1];return l==="horizontal"?(g=g+u,a&&(d="center"),c==="start"&&(h="bottom")):(f=f+u,a&&(h="middle"),c==="start"&&(d="right")),{x:f,y:g,align:d,verticalAlign:h}},o.prototype._renderMonthText=function(n,a,l,c){var u=n.getModel("monthLabel");if(u.get("show")){var d=u.get("nameMap"),h=u.get("margin"),f=u.get("position"),g=u.get("align"),p=[this._tlpoints,this._blpoints];(!d||isString$2(d))&&(d&&(a=getLocaleModel(d)||a),d=a.get(["time","monthAbbr"])||[]);var v=f==="start"?0:1,b=l==="horizontal"?0:1;h=f==="start"?-h:h;for(var _=g==="center",w=u.get("silent"),x=0;x<p[v].length-1;x++){var S=p[v][x].slice(),C=this._firstDayOfMonth[x];if(_){var T=this._firstDayPoints[x];S[b]=(T[b]+p[0][x+1][b])/2}var R=u.get("formatter"),A=d[+C.m-1],M={yyyy:C.y,yy:(C.y+"").slice(2),MM:C.m,M:+C.m,nameMap:A},D=this._formatterLabel(R,M),O=new ZRText({z2:30,style:extend(createTextStyle$1(u,{text:D}),this._monthTextPositionControl(S,_,l,f,h)),silent:w});c.add(O)}}},o.prototype._weekTextPositionControl=function(n,a,l,c,u){var d="center",h="middle",f=n[0],g=n[1],p=l==="start";return a==="horizontal"?(f=f+c+(p?1:-1)*u[0]/2,d=p?"right":"left"):(g=g+c+(p?1:-1)*u[1]/2,h=p?"bottom":"top"),{x:f,y:g,align:d,verticalAlign:h}},o.prototype._renderWeekText=function(n,a,l,c,u){var d=n.getModel("dayLabel");if(d.get("show")){var h=n.coordinateSystem,f=d.get("position"),g=d.get("nameMap"),p=d.get("margin"),v=h.getFirstDayOfWeek();if(!g||isString$2(g)){g&&(a=getLocaleModel(g)||a);var b=a.get(["time","dayOfWeekShort"]);g=b||map$1(a.get(["time","dayOfWeekAbbr"]),function(M){return M[0]})}var _=h.getNextNDay(l.end.time,7-l.lweek).time,w=[h.getCellWidth(),h.getCellHeight()];p=parsePercent(p,Math.min(w[1],w[0])),f==="start"&&(_=h.getNextNDay(l.start.time,-(7+l.fweek)).time,p=-p);for(var x=d.get("silent"),S=0;S<7;S++){var C=h.getNextNDay(_,S),T=h.dataToRect([C.time],!1).center,R=S;R=Math.abs((S+v)%7);var A=new ZRText({z2:30,style:extend(createTextStyle$1(d,{text:g[R]}),this._weekTextPositionControl(T,c,f,p,w)),silent:x});u.add(A)}}},o.type="calendar",o}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function s(o,n,a){this.type="calendar",this.dimensions=s.dimensions,this.getDimensionsInfo=s.getDimensionsInfo,this._model=o}return s.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},s.prototype.getRangeInfo=function(){return this._rangeInfo},s.prototype.getModel=function(){return this._model},s.prototype.getRect=function(){return this._rect},s.prototype.getCellWidth=function(){return this._sw},s.prototype.getCellHeight=function(){return this._sh},s.prototype.getOrient=function(){return this._orient},s.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},s.prototype.getDateInfo=function(o){o=parseDate(o);var n=o.getFullYear(),a=o.getMonth()+1,l=a<10?"0"+a:""+a,c=o.getDate(),u=c<10?"0"+c:""+c,d=o.getDay();return d=Math.abs((d+7-this.getFirstDayOfWeek())%7),{y:n+"",m:l,d:u,day:d,time:o.getTime(),formatedDate:n+"-"+l+"-"+u,date:o}},s.prototype.getNextNDay=function(o,n){return n=n||0,n===0?this.getDateInfo(o):(o=new Date(this.getDateInfo(o).time),o.setDate(o.getDate()+n),this.getDateInfo(o))},s.prototype.update=function(o,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var a=this._rangeInfo.weeks||1,l=["width","height"],c=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),d=this._orient==="horizontal"?[a,7]:[7,a];each$f([0,1],function(p){g(c,p)&&(u[l[p]]=c[p]*d[p])});var h={width:n.getWidth(),height:n.getHeight()},f=this._rect=getLayoutRect(u,h);each$f([0,1],function(p){g(c,p)||(c[p]=f[l[p]]/d[p])});function g(p,v){return p[v]!=null&&p[v]!=="auto"}this._sw=c[0],this._sh=c[1]},s.prototype.dataToPoint=function(o,n){isArray$1(o)&&(o=o[0]),n==null&&(n=!0);var a=this.getDateInfo(o),l=this._rangeInfo,c=a.formatedDate;if(n&&!(a.time>=l.start.time&&a.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var u=a.day,d=this._getRangeInfo([l.start.time,c]).nthWeek;return this._orient==="vertical"?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]:[this._rect.x+d*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},s.prototype.pointToData=function(o){var n=this.pointToDate(o);return n&&n.time},s.prototype.dataToRect=function(o,n){var a=this.dataToPoint(o,n);return{contentShape:{x:a[0]-(this._sw-this._lineWidth)/2,y:a[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:a,tl:[a[0]-this._sw/2,a[1]-this._sh/2],tr:[a[0]+this._sw/2,a[1]-this._sh/2],br:[a[0]+this._sw/2,a[1]+this._sh/2],bl:[a[0]-this._sw/2,a[1]+this._sh/2]}},s.prototype.pointToDate=function(o){var n=Math.floor((o[0]-this._rect.x)/this._sw)+1,a=Math.floor((o[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(a,n-1,l):this._getDateByWeeksAndDay(n,a-1,l)},s.prototype.convertToPixel=function(o,n,a){var l=getCoordSys(n);return l===this?l.dataToPoint(a):null},s.prototype.convertFromPixel=function(o,n,a){var l=getCoordSys(n);return l===this?l.pointToData(a):null},s.prototype.containPoint=function(o){return console.warn("Not implemented."),!1},s.prototype._initRangeOption=function(){var o=this._model.get("range"),n;if(isArray$1(o)&&o.length===1&&(o=o[0]),isArray$1(o))n=o;else{var a=o.toString();if(/^\d{4}$/.test(a)&&(n=[a+"-01-01",a+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(a)){var l=this.getDateInfo(a),c=l.date;c.setMonth(c.getMonth()+1);var u=this.getNextNDay(c,-1);n=[l.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(a)&&(n=[a,a])}if(!n)return process.env.NODE_ENV!=="production"&&logError("Invalid date range."),o;var d=this._getRangeInfo(n);return d.start.time>d.end.time&&n.reverse(),n},s.prototype._getRangeInfo=function(o){var n=[this.getDateInfo(o[0]),this.getDateInfo(o[1])],a;n[0].time>n[1].time&&(a=!0,n.reverse());var l=Math.floor(n[1].time/PROXIMATE_ONE_DAY)-Math.floor(n[0].time/PROXIMATE_ONE_DAY)+1,c=new Date(n[0].time),u=c.getDate(),d=n[1].date.getDate();c.setDate(u+l-1);var h=c.getDate();if(h!==d)for(var f=c.getTime()-n[1].time>0?1:-1;(h=c.getDate())!==d&&(c.getTime()-n[1].time)*f>0;)l-=f,c.setDate(h-f);var g=Math.floor((l+n[0].day+6)/7),p=a?-g+1:g-1;return a&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:l,weeks:g,nthWeek:p,fweek:n[0].day,lweek:n[1].day}},s.prototype._getDateByWeeksAndDay=function(o,n,a){var l=this._getRangeInfo(a);if(o>l.weeks||o===0&&n<l.fweek||o===l.weeks&&n>l.lweek)return null;var c=(o-1)*7-l.fweek+n,u=new Date(l.start.time);return u.setDate(+l.start.d+c),this.getDateInfo(u)},s.create=function(o,n){var a=[];return o.eachComponent("calendar",function(l){var c=new s(l);a.push(c),l.coordinateSystem=c}),o.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=a[l.get("calendarIndex")||0])}),a},s.dimensions=["time","value"],s}();function getCoordSys(s){var o=s.calendarModel,n=s.seriesModel,a=o?o.coordinateSystem:n?n.coordinateSystem:null;return a}function install$m(s){s.registerComponentModel(CalendarModel),s.registerComponentView(CalendarView),s.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(s,o){var n=s.existing;if(o.id=s.keyInfo.id,!o.type&&n&&(o.type=n.type),o.parentId==null){var a=o.parentOption;a?o.parentId=a.id:n&&(o.parentId=n.parentId)}o.parentOption=null}function isSetLoc(s,o){var n;return each$f(o,function(a){s[a]!=null&&s[a]!=="auto"&&(n=!0)}),n}function mergeNewElOptionToExist(s,o,n){var a=extend({},n),l=s[o],c=n.$action||"merge";if(c==="merge")if(l){if(process.env.NODE_ENV!=="production"){var u=n.type;assert(!u||l.type===u,'Please set $action: "replace" to change `type`')}merge(l,a,!0),mergeLayoutParam(l,a,{ignoreSize:!0}),copyLayoutParams(n,l),copyTransitionInfo(n,l),copyTransitionInfo(n,l,"shape"),copyTransitionInfo(n,l,"style"),copyTransitionInfo(n,l,"extra"),n.clipPath=l.clipPath}else s[o]=a;else c==="replace"?s[o]=a:c==="remove"&&l&&(s[o]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(s,o,n){if(n&&(!s[n]&&o[n]&&(s[n]={}),s=s[n],o=o[n]),!(!s||!o))for(var a=n?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<a.length;l++){var c=a[l];s[c]==null&&o[c]!=null&&(s[c]=o[c])}}function setLayoutInfoToExist(s,o){if(s&&(s.hv=o.hv=[isSetLoc(o,["left","right"]),isSetLoc(o,["top","bottom"])],s.type==="group")){var n=s,a=o;n.width==null&&(n.width=a.width=0),n.height==null&&(n.height=a.height=0)}}var GraphicComponentModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.preventAutoZ=!0,n}return o.prototype.mergeOption=function(n,a){var l=this.option.elements;this.option.elements=null,s.prototype.mergeOption.call(this,n,a),this.option.elements=l},o.prototype.optionUpdated=function(n,a){var l=this.option,c=(a?l:n).elements,u=l.elements=a?[]:l.elements,d=[];this._flatten(c,d,null);var h=mappingToExists(u,d,"normalMerge"),f=this._elOptionsToUpdate=[];each$f(h,function(g,p){var v=g.newOption;process.env.NODE_ENV!=="production"&&assert(isObject$3(v)||g.existing,"Empty graphic option definition"),v&&(f.push(v),setKeyInfoToNewElOption(g,v),mergeNewElOptionToExist(u,p,v),setLayoutInfoToExist(u[p],v))},this),l.elements=filter(u,function(g){return g&&delete g.$action,g!=null})},o.prototype._flatten=function(n,a,l){each$f(n,function(c){if(c){l&&(c.parentOption=l),a.push(c);var u=c.children;u&&u.length&&this._flatten(u,a,c),delete c.children}},this)},o.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},o.type="graphic",o.defaultOption={elements:[]},o}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(){this._elMap=createHashMap()},o.prototype.render=function(n,a,l){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,l)},o.prototype._updateElements=function(n){var a=n.useElOptionsToUpdate();if(a){var l=this._elMap,c=this.group,u=n.get("z"),d=n.get("zlevel");each$f(a,function(h){var f=convertOptionIdName(h.id,null),g=f!=null?l.get(f):null,p=convertOptionIdName(h.parentId,null),v=p!=null?l.get(p):c,b=h.type,_=h.style;b==="text"&&_&&h.hv&&h.hv[1]&&(_.textVerticalAlign=_.textBaseline=_.verticalAlign=_.align=null);var w=h.textContent,x=h.textConfig;if(_&&isEC4CompatibleStyle(_,b,!!x,!!w)){var S=convertFromEC4CompatibleStyle(_,b,!0);!x&&S.textConfig&&(x=h.textConfig=S.textConfig),!w&&S.textContent&&(w=S.textContent)}var C=getCleanedElOption(h);process.env.NODE_ENV!=="production"&&g&&assert(v===g.parent,"Changing parent is not supported.");var T=h.$action||"merge",R=T==="merge",A=T==="replace";if(R){var M=!g,D=g;M?D=createEl(f,v,h.type,l):(D&&(inner$7(D).isNew=!1),stopPreviousKeyframeAnimationAndRestore(D)),D&&(applyUpdateTransition(D,C,n,{isInit:M}),updateCommonAttrs(D,h,u,d))}else if(A){removeEl$1(g,h,l,n);var O=createEl(f,v,h.type,l);O&&(applyUpdateTransition(O,C,n,{isInit:!0}),updateCommonAttrs(O,h,u,d))}else T==="remove"&&(updateLeaveTo(g,h),removeEl$1(g,h,l,n));var H=l.get(f);if(H&&w)if(R){var j=H.getTextContent();j?j.attr(w):H.setTextContent(new ZRText(w))}else A&&H.setTextContent(new ZRText(w));if(H){var q=h.clipPath;if(q){var Y=q.type,ee=void 0,M=!1;if(R){var te=H.getClipPath();M=!te||inner$7(te).type!==Y,ee=M?newEl(Y):te}else A&&(M=!0,ee=newEl(Y));H.setClipPath(ee),applyUpdateTransition(ee,q,n,{isInit:M}),applyKeyframeAnimation(ee,q.keyframeAnimation,n)}var re=inner$7(H);H.setTextConfig(x),re.option=h,setEventData(H,n,h),setTooltipConfig({el:H,componentModel:n,itemName:H.name,itemTooltipOption:h.tooltip}),applyKeyframeAnimation(H,h.keyframeAnimation,n)}})}},o.prototype._relocate=function(n,a){for(var l=n.option.elements,c=this.group,u=this._elMap,d=a.getWidth(),h=a.getHeight(),f=["x","y"],g=0;g<l.length;g++){var p=l[g],v=convertOptionIdName(p.id,null),b=v!=null?u.get(v):null;if(!(!b||!b.isGroup)){var _=b.parent,w=_===c,x=inner$7(b),S=inner$7(_);x.width=parsePercent(x.option.width,w?d:S.width)||0,x.height=parsePercent(x.option.height,w?h:S.height)||0}}for(var g=l.length-1;g>=0;g--){var p=l[g],v=convertOptionIdName(p.id,null),b=v!=null?u.get(v):null;if(b){var _=b.parent,S=inner$7(_),C=_===c?{width:d,height:h}:{width:S.width,height:S.height},T={},R=positionElement(b,p,C,null,{hv:p.hv,boundingMode:p.bounding},T);if(!inner$7(b).isNew&&R){for(var A=p.transition,M={},D=0;D<f.length;D++){var O=f[D],H=T[O];A&&(isTransitionAll(A)||indexOf(A,O)>=0)?M[O]=H:b[O]=H}updateProps$1(b,M,n,0)}else b.attr(T)}}},o.prototype._clear=function(){var n=this,a=this._elMap;a.each(function(l){removeEl$1(l,inner$7(l).option,a,n._lastGraphicModel)}),this._elMap=createHashMap()},o.prototype.dispose=function(){this._clear()},o.type="graphic",o}(ComponentView);function newEl(s){process.env.NODE_ENV!=="production"&&assert(s,"graphic type MUST be set");var o=hasOwn(nonShapeGraphicElements,s)?nonShapeGraphicElements[s]:getShapeClass(s);process.env.NODE_ENV!=="production"&&assert(o,"graphic type "+s+" can not be found");var n=new o({});return inner$7(n).type=s,n}function createEl(s,o,n,a){var l=newEl(n);return o.add(l),a.set(s,l),inner$7(l).id=s,inner$7(l).isNew=!0,l}function removeEl$1(s,o,n,a){var l=s&&s.parent;l&&(s.type==="group"&&s.traverse(function(c){removeEl$1(c,o,n,a)}),applyLeaveTransition(s,o,a),n.removeKey(inner$7(s).id))}function updateCommonAttrs(s,o,n,a){s.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",a||0],["z",n||0],["z2",0]],function(l){var c=l[0];hasOwn(o,c)?s[c]=retrieve2(o[c],l[1]):s[c]==null&&(s[c]=l[1])}),each$f(keys(o),function(l){if(l.indexOf("on")===0){var c=o[l];s[l]=isFunction$1(c)?c:null}}),hasOwn(o,"draggable")&&(s.draggable=o.draggable),o.name!=null&&(s.name=o.name),o.id!=null&&(s.id=o.id)}function getCleanedElOption(s){return s=extend({},s),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(o){delete s[o]}),s}function setEventData(s,o,n){var a=getECData(s).eventData;!s.silent&&!s.ignore&&!a&&(a=getECData(s).eventData={componentType:"graphic",componentIndex:o.componentIndex,name:s.name}),a&&(a.info=n.info)}function install$l(s){s.registerComponentModel(GraphicComponentModel),s.registerComponentView(GraphicComponentView),s.registerPreprocessor(function(o){var n=o.graphic;isArray$1(n)?!n[0]||!n[0].elements?o.graphic=[{elements:n}]:o.graphic=[o.graphic[0]]:n&&!n.elements&&(o.graphic=[{elements:[n]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(s){var o=s.get("coordinateSystem");return indexOf(SERIES_COORDS,o)>=0}function getAxisMainType(s){return process.env.NODE_ENV!=="production"&&assert(s),s+"Axis"}function findEffectedDataZooms(s,o){var n=createHashMap(),a=[],l=createHashMap();s.eachComponent({mainType:"dataZoom",query:o},function(g){l.get(g.uid)||d(g)});var c;do c=!1,s.eachComponent("dataZoom",u);while(c);function u(g){!l.get(g.uid)&&h(g)&&(d(g),c=!0)}function d(g){l.set(g.uid,!0),a.push(g),f(g)}function h(g){var p=!1;return g.eachTargetAxis(function(v,b){var _=n.get(v);_&&_[b]&&(p=!0)}),p}function f(g){g.eachTargetAxis(function(p,v){(n.get(p)||n.set(p,[]))[v]=!0})}return a}function collectReferCoordSysModelInfo(s){var o=s.ecModel,n={infoList:[],infoMap:createHashMap()};return s.eachTargetAxis(function(a,l){var c=o.getComponent(getAxisMainType(a),l);if(c){var u=c.getCoordSysModel();if(u){var d=u.uid,h=n.infoMap.get(d);h||(h={model:u,axisModels:[]},n.infoList.push(h),n.infoMap.set(d,h)),h.axisModels.push(c)}}}),n}var DataZoomAxisInfo=function(){function s(){this.indexList=[],this.indexMap=[]}return s.prototype.add=function(o){this.indexMap[o]||(this.indexList.push(o),this.indexMap[o]=!0)},s}(),DataZoomModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return o.prototype.init=function(n,a,l){var c=retrieveRawOption(n);this.settledOption=c,this.mergeDefaultAndTheme(n,l),this._doInit(c)},o.prototype.mergeOption=function(n){var a=retrieveRawOption(n);merge(this.option,n,!0),merge(this.settledOption,a,!0),this._doInit(a)},o.prototype._doInit=function(n){var a=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(c,u){this._rangePropMode[u]==="value"&&(a[c[0]]=l[c[0]]=null)},this),this._resetTarget()},o.prototype._resetTarget=function(){var n=this.get("orient",!0),a=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(a);l?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(a,this._orient)),this._noTarget=!0,a.each(function(c){c.indexList.length&&(this._noTarget=!1)},this)},o.prototype._fillSpecifiedTargetAxis=function(n){var a=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var c=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(c.specified){a=!0;var u=new DataZoomAxisInfo;each$f(c.models,function(d){u.add(d.componentIndex)}),n.set(l,u)}},this),a},o.prototype._fillAutoTargetAxisByOrient=function(n,a){var l=this.ecModel,c=!0;if(c){var u=a==="vertical"?"y":"x",d=l.findComponents({mainType:u+"Axis"});h(d,u)}if(c){var d=l.findComponents({mainType:"singleAxis",filter:function(g){return g.get("orient",!0)===a}});h(d,"single")}function h(f,g){var p=f[0];if(p){var v=new DataZoomAxisInfo;if(v.add(p.componentIndex),n.set(g,v),c=!1,g==="x"||g==="y"){var b=p.getReferringComponents("grid",SINGLE_REFERRING).models[0];b&&each$f(f,function(_){p.componentIndex!==_.componentIndex&&b===_.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&v.add(_.componentIndex)})}}}c&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(f){if(c){var g=l.findComponents({mainType:getAxisMainType(f),filter:function(v){return v.get("type",!0)==="category"}});if(g[0]){var p=new DataZoomAxisInfo;p.add(g[0].componentIndex),n.set(f,p),c=!1}}},this)},o.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(a){!n&&(n=a)},this),n==="y"?"vertical":"horizontal"},o.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var a=this.ecModel.option;this.option.throttle=a.animation&&a.animationDurationUpdate>0?100:20}},o.prototype._updateRangeUse=function(n){var a=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(c,u){var d=n[c[0]]!=null,h=n[c[1]]!=null;d&&!h?a[u]="percent":!d&&h?a[u]="value":l?a[u]=l[u]:d&&(a[u]="percent")})},o.prototype.noTarget=function(){return this._noTarget},o.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(a,l){n==null&&(n=this.ecModel.getComponent(getAxisMainType(a),l))},this),n},o.prototype.eachTargetAxis=function(n,a){this._targetAxisInfoMap.each(function(l,c){each$f(l.indexList,function(u){n.call(a,c,u)})})},o.prototype.getAxisProxy=function(n,a){var l=this.getAxisModel(n,a);if(l)return l.__dzAxisProxy},o.prototype.getAxisModel=function(n,a){process.env.NODE_ENV!=="production"&&assert(n&&a!=null);var l=this._targetAxisInfoMap.get(n);if(l&&l.indexMap[a])return this.ecModel.getComponent(getAxisMainType(n),a)},o.prototype.setRawRange=function(n){var a=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(c){(n[c[0]]!=null||n[c[1]]!=null)&&(a[c[0]]=l[c[0]]=n[c[0]],a[c[1]]=l[c[1]]=n[c[1]])},this),this._updateRangeUse(n)},o.prototype.setCalculatedRange=function(n){var a=this.option;each$f(["start","startValue","end","endValue"],function(l){a[l]=n[l]})},o.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},o.prototype.getValueRange=function(n,a){if(n==null&&a==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(n,a).getDataValueWindow()},o.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var a,l=this._targetAxisInfoMap.keys(),c=0;c<l.length;c++)for(var u=l[c],d=this._targetAxisInfoMap.get(u),h=0;h<d.indexList.length;h++){var f=this.getAxisProxy(u,d.indexList[h]);if(f.hostedBy(this))return f;a||(a=f)}return a},o.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},o.prototype.getOrient=function(){return process.env.NODE_ENV!=="production"&&assert(this._orient),this._orient},o.type="dataZoom",o.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],o.defaultOption={z:4,filterMode:"filter",start:0,end:100},o}(ComponentModel);function retrieveRawOption(s){var o={};return each$f(["start","end","startValue","endValue","throttle"],function(n){s.hasOwnProperty(n)&&(o[n]=s[n])}),o}var SelectDataZoomModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="dataZoom.select",o}(DataZoomModel),DataZoomView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l,c){this.dataZoomModel=n,this.ecModel=a,this.api=l},o.type="dataZoom",o}(ComponentView),SelectDataZoomView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="dataZoom.select",o}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function s(o,n,a,l){this._dimName=o,this._axisIndex=n,this.ecModel=l,this._dataZoomModel=a}return s.prototype.hostedBy=function(o){return this._dataZoomModel===o},s.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},s.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},s.prototype.getTargetSeriesModels=function(){var o=[];return this.ecModel.eachSeries(function(n){if(isCoordSupported(n)){var a=getAxisMainType(this._dimName),l=n.getReferringComponents(a,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&o.push(n)}},this),o},s.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},s.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},s.prototype.calculateDataWindow=function(o){var n=this._dataExtent,a=this.getAxisModel(),l=a.axis.scale,c=this._dataZoomModel.getRangePropMode(),u=[0,100],d=[],h=[],f;each$7(["start","end"],function(v,b){var _=o[v],w=o[v+"Value"];c[b]==="percent"?(_==null&&(_=u[b]),w=l.parse(linearMap$2(_,u,n))):(f=!0,w=w==null?n[b]:l.parse(w),_=linearMap$2(w,n,u)),h[b]=w==null||isNaN(w)?n[b]:w,d[b]=_==null||isNaN(_)?u[b]:_}),asc$1(h),asc$1(d);var g=this._minMaxSpan;f?p(h,d,n,u,!1):p(d,h,u,n,!0);function p(v,b,_,w,x){var S=x?"Span":"ValueSpan";sliderMove(0,v,_,"all",g["min"+S],g["max"+S]);for(var C=0;C<2;C++)b[C]=linearMap$2(v[C],_,w,!0),x&&(b[C]=l.parse(b[C]))}return{valueWindow:h,percentWindow:d}},s.prototype.reset=function(o){if(o===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,n),this._updateMinMaxSpan();var a=this.calculateDataWindow(o.settledOption);this._valueWindow=a.valueWindow,this._percentWindow=a.percentWindow,this._setAxisModel()}},s.prototype.filterData=function(o,n){if(o!==this._dataZoomModel)return;var a=this._dimName,l=this.getTargetSeriesModels(),c=o.get("filterMode"),u=this._valueWindow;if(c==="none")return;each$7(l,function(h){var f=h.getData(),g=f.mapDimensionsAll(a);if(g.length){if(c==="weakFilter"){var p=f.getStore(),v=map$1(g,function(b){return f.getDimensionIndex(b)},f);f.filterSelf(function(b){for(var _,w,x,S=0;S<g.length;S++){var C=p.get(v[S],b),T=!isNaN(C),R=C<u[0],A=C>u[1];if(T&&!R&&!A)return!0;T&&(x=!0),R&&(_=!0),A&&(w=!0)}return x&&_&&w})}else each$7(g,function(b){if(c==="empty")h.setData(f=f.map(b,function(w){return d(w)?w:NaN}));else{var _={};_[b]=u,f.selectRange(_)}});each$7(g,function(b){f.setApproximateExtent(u,b)})}});function d(h){return h>=u[0]&&h<=u[1]}},s.prototype._updateMinMaxSpan=function(){var o=this._minMaxSpan={},n=this._dataZoomModel,a=this._dataExtent;each$7(["min","max"],function(l){var c=n.get(l+"Span"),u=n.get(l+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?c=linearMap$2(a[0]+u,a,[0,100],!0):c!=null&&(u=linearMap$2(c,[0,100],a,!0)-a[0]),o[l+"Span"]=c,o[l+"ValueSpan"]=u},this)},s.prototype._setAxisModel=function(){var o=this.getAxisModel(),n=this._percentWindow,a=this._valueWindow;if(n){var l=getPixelPrecision(a,[0,500]);l=Math.min(l,20);var c=o.axis.scale.rawExtentInfo;n[0]!==0&&c.setDeterminedMinMax("min",+a[0].toFixed(l)),n[1]!==100&&c.setDeterminedMinMax("max",+a[1].toFixed(l)),c.freeze()}},s}();function calculateDataExtent(s,o,n){var a=[1/0,-1/0];each$7(n,function(u){unionAxisExtentFromData(a,u.getData(),o)});var l=s.getAxisModel(),c=ensureScaleRawExtentInfo(l.axis.scale,l,a).calculate();return[c.min,c.max]}var dataZoomProcessor={getTargetSeries:function(s){function o(l){s.eachComponent("dataZoom",function(c){c.eachTargetAxis(function(u,d){var h=s.getComponent(getAxisMainType(u),d);l(u,d,h,c)})})}o(function(l,c,u,d){u.__dzAxisProxy=null});var n=[];o(function(l,c,u,d){u.__dzAxisProxy||(u.__dzAxisProxy=new AxisProxy(l,c,d,s),n.push(u.__dzAxisProxy))});var a=createHashMap();return each$f(n,function(l){each$f(l.getTargetSeriesModels(),function(c){a.set(c.uid,c)})}),a},overallReset:function(s,o){s.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(a,l){n.getAxisProxy(a,l).reset(n)}),n.eachTargetAxis(function(a,l){n.getAxisProxy(a,l).filterData(n,o)})}),s.eachComponent("dataZoom",function(n){var a=n.findRepresentativeAxisProxy();if(a){var l=a.getDataPercentWindow(),c=a.getDataValueWindow();n.setCalculatedRange({start:l[0],end:l[1],startValue:c[0],endValue:c[1]})}})}};function installDataZoomAction(s){s.registerAction("dataZoom",function(o,n){var a=findEffectedDataZooms(n,o);each$f(a,function(l){l.setRawRange({start:o.start,end:o.end,startValue:o.startValue,endValue:o.endValue})})})}var installed$1=!1;function installCommon$1(s){installed$1||(installed$1=!0,s.registerProcessor(s.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(s),s.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(s){s.registerComponentModel(SelectDataZoomModel),s.registerComponentView(SelectDataZoomView),installCommon$1(s)}var ToolboxFeature=function(){function s(){}return s}(),features={};function registerFeature(s,o){features[s]=o}function getFeature(s){return features[s]}var ToolboxModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.optionUpdated=function(){s.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;each$f(this.option.feature,function(a,l){var c=getFeature(l);c&&(c.getDefaultOption&&(c.defaultOption=c.getDefaultOption(n)),merge(a,c.defaultOption))})},o.type="toolbox",o.layoutMode={type:"box",ignoreSize:!0},o.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},o}(ComponentModel);function layout(s,o,n){var a=o.getBoxLayoutParams(),l=o.get("padding"),c={width:n.getWidth(),height:n.getHeight()},u=getLayoutRect(a,c,l);box(o.get("orient"),s,o.get("itemGap"),u.width,u.height),positionElement(s,a,c,l)}function makeBackground(s,o){var n=normalizeCssArray(o.get("padding")),a=o.getItemStyle(["color","opacity"]);return a.fill=o.get("backgroundColor"),s=new Rect$2({shape:{x:s.x-n[3],y:s.y-n[0],width:s.width+n[1]+n[3],height:s.height+n[0]+n[2],r:o.get("borderRadius")},style:a,silent:!0,z2:-1}),s}var ToolboxView=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.render=function(n,a,l,c){var u=this.group;if(u.removeAll(),!n.get("show"))return;var d=+n.get("itemSize"),h=n.get("orient")==="vertical",f=n.get("feature")||{},g=this._features||(this._features={}),p=[];each$f(f,function(_,w){p.push(w)}),new DataDiffer(this._featureNames||[],p).add(v).update(v).remove(curry$1(v,null)).execute(),this._featureNames=p;function v(_,w){var x=p[_],S=p[w],C=f[x],T=new Model(C,n,n.ecModel),R;if(c&&c.newTitle!=null&&c.featureName===x&&(C.title=c.newTitle),x&&!S){if(isUserFeatureName(x))R={onclick:T.option.onclick,featureName:x};else{var A=getFeature(x);if(!A)return;R=new A}g[x]=R}else if(R=g[S],!R)return;R.uid=getUID("toolbox-feature"),R.model=T,R.ecModel=a,R.api=l;var M=R instanceof ToolboxFeature;if(!x&&S){M&&R.dispose&&R.dispose(a,l);return}if(!T.get("show")||M&&R.unusable){M&&R.remove&&R.remove(a,l);return}b(T,R,x),T.setIconStatus=function(D,O){var H=this.option,j=this.iconPaths;H.iconStatus=H.iconStatus||{},H.iconStatus[D]=O,j[D]&&(O==="emphasis"?enterEmphasis:leaveEmphasis)(j[D])},R instanceof ToolboxFeature&&R.render&&R.render(T,a,l,c)}function b(_,w,x){var S=_.getModel("iconStyle"),C=_.getModel(["emphasis","iconStyle"]),T=w instanceof ToolboxFeature&&w.getIcons?w.getIcons():_.get("icon"),R=_.get("title")||{},A,M;isString$2(T)?(A={},A[x]=T):A=T,isString$2(R)?(M={},M[x]=R):M=R;var D=_.iconPaths={};each$f(A,function(O,H){var j=createIcon(O,{},{x:-d/2,y:-d/2,width:d,height:d});j.setStyle(S.getItemStyle());var q=j.ensureState("emphasis");q.style=C.getItemStyle();var Y=new ZRText({style:{text:M[H],align:C.get("textAlign"),borderRadius:C.get("textBorderRadius"),padding:C.get("textPadding"),fill:null,font:getFont({fontStyle:C.get("textFontStyle"),fontFamily:C.get("textFontFamily"),fontSize:C.get("textFontSize"),fontWeight:C.get("textFontWeight")},a)},ignore:!0});j.setTextContent(Y),setTooltipConfig({el:j,componentModel:n,itemName:H,formatterParamsExtra:{title:M[H]}}),j.__title=M[H],j.on("mouseover",function(){var ee=C.getItemStyle(),te=h?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";Y.setStyle({fill:C.get("textFill")||ee.fill||ee.stroke||"#000",backgroundColor:C.get("textBackgroundColor")}),j.setTextConfig({position:C.get("textPosition")||te}),Y.ignore=!n.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){_.get(["iconStatus",H])!=="emphasis"&&l.leaveEmphasis(this),Y.hide()}),(_.get(["iconStatus",H])==="emphasis"?enterEmphasis:leaveEmphasis)(j),u.add(j),j.on("click",bind$1(w.onclick,w,a,l,H)),D[H]=j})}layout(u,n,l),u.add(makeBackground(u.getBoundingRect(),n)),h||u.eachChild(function(_){var w=_.__title,x=_.ensureState("emphasis"),S=x.textConfig||(x.textConfig={}),C=_.getTextContent(),T=C&&C.ensureState("emphasis");if(T&&!isFunction$1(T)&&w){var R=T.style||(T.style={}),A=getBoundingRect(w,ZRText.makeFont(R)),M=_.x+u.x,D=_.y+u.y+d,O=!1;D+A.height>l.getHeight()&&(S.position="top",O=!0);var H=O?-5-A.height:d+10;M+A.width/2>l.getWidth()?(S.position=["100%",H],R.align="right"):M-A.width/2<0&&(S.position=[0,H],R.align="left")}})},o.prototype.updateView=function(n,a,l,c){each$f(this._features,function(u){u instanceof ToolboxFeature&&u.updateView&&u.updateView(u.model,a,l,c)})},o.prototype.remove=function(n,a){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(n,a)}),this.group.removeAll()},o.prototype.dispose=function(n,a){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(n,a)})},o.type="toolbox",o}(ComponentView);function isUserFeatureName(s){return s.indexOf("my")===0}var SaveAsImage=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.onclick=function(n,a){var l=this.model,c=l.get("name")||n.get("title.0.text")||"echarts",u=a.getZr().painter.getType()==="svg",d=u?"svg":l.get("type",!0)||"png",h=a.getConnectedDataURL({type:d,backgroundColor:l.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),f=env.browser;if(typeof MouseEvent=="function"&&(f.newEdge||!f.ie&&!f.edge)){var g=document.createElement("a");g.download=c+"."+d,g.target="_blank",g.href=h;var p=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});g.dispatchEvent(p)}else if(window.navigator.msSaveOrOpenBlob||u){var v=h.split(","),b=v[0].indexOf("base64")>-1,_=u?decodeURIComponent(v[1]):v[1];b&&(_=window.atob(_));var w=c+"."+d;if(window.navigator.msSaveOrOpenBlob){for(var x=_.length,S=new Uint8Array(x);x--;)S[x]=_.charCodeAt(x);var C=new Blob([S]);window.navigator.msSaveOrOpenBlob(C,w)}else{var T=document.createElement("iframe");document.body.appendChild(T);var R=T.contentWindow,A=R.document;A.open("image/svg+xml","replace"),A.write(_),A.close(),R.focus(),A.execCommand("SaveAs",!0,w),document.body.removeChild(T)}}else{var M=l.get("lang"),D='<body style="margin:0;"><img src="'+h+'" style="max-width:100%;" title="'+(M&&M[0]||"")+'" /></body>',O=window.open();O.document.write(D),O.document.title=c}},o.getDefaultOption=function(n){var a={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return a},o}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.getIcons=function(){var n=this.model,a=n.get("icon"),l={};return each$f(n.get("type"),function(c){a[c]&&(l[c]=a[c])}),l},o.getDefaultOption=function(n){var a={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return a},o.prototype.onclick=function(n,a,l){var c=this.model,u=c.get(["seriesIndex",l]);if(seriesOptGenreator[l]){var d={series:[]},h=function(p){var v=p.subType,b=p.id,_=seriesOptGenreator[l](v,b,p,c);_&&(defaults(_,p.option),d.series.push(_));var w=p.coordinateSystem;if(w&&w.type==="cartesian2d"&&(l==="line"||l==="bar")){var x=w.getAxesByScale("ordinal")[0];if(x){var S=x.dim,C=S+"Axis",T=p.getReferringComponents(C,SINGLE_REFERRING).models[0],R=T.componentIndex;d[C]=d[C]||[];for(var A=0;A<=R;A++)d[C][R]=d[C][R]||{};d[C][R].boundaryGap=l==="bar"}}};each$f(radioTypes,function(p){indexOf(p,l)>=0&&each$f(p,function(v){c.setIconStatus(v,"normal")})}),c.setIconStatus(l,"emphasis"),n.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},h);var f,g=l;l==="stack"&&(f=merge({stack:c.option.title.tiled,tiled:c.option.title.stack},c.option.title),c.get(["iconStatus",l])!=="emphasis"&&(g="tiled")),a.dispatchAction({type:"changeMagicType",currentType:g,newOption:d,newTitle:f,featureName:"magicType"})}},o}(ToolboxFeature),seriesOptGenreator={line:function(s,o,n,a){if(s==="bar")return merge({id:o,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},a.get(["option","line"])||{},!0)},bar:function(s,o,n,a){if(s==="line")return merge({id:o,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},a.get(["option","bar"])||{},!0)},stack:function(s,o,n,a){var l=n.get("stack")===INNER_STACK_KEYWORD;if(s==="line"||s==="bar")return a.setIconStatus("stack",l?"normal":"emphasis"),merge({id:o,stack:l?"":INNER_STACK_KEYWORD},a.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(s,o){o.mergeOption(s.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(s){var o={},n=[],a=[];return s.eachRawSeries(function(l){var c=l.coordinateSystem;if(c&&(c.type==="cartesian2d"||c.type==="polar")){var u=c.getBaseAxis();if(u.type==="category"){var d=u.dim+"_"+u.index;o[d]||(o[d]={categoryAxis:u,valueAxis:c.getOtherAxis(u),series:[]},a.push({axisDim:u.dim,axisIndex:u.index})),o[d].series.push(l)}else n.push(l)}else n.push(l)}),{seriesGroupByCategoryAxis:o,other:n,meta:a}}function assembleSeriesWithCategoryAxis(s){var o=[];return each$f(s,function(n,a){var l=n.categoryAxis,c=n.valueAxis,u=c.dim,d=[" "].concat(map$1(n.series,function(b){return b.name})),h=[l.model.getCategories()];each$f(n.series,function(b){var _=b.getRawData();h.push(b.getRawData().mapArray(_.mapDimension(u),function(w){return w}))});for(var f=[d.join(ITEM_SPLITER)],g=0;g<h[0].length;g++){for(var p=[],v=0;v<h.length;v++)p.push(h[v][g]);f.push(p.join(ITEM_SPLITER))}o.push(f.join(`
`))}),o.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(s){return map$1(s,function(o){var n=o.getRawData(),a=[o.name],l=[];return n.each(n.dimensions,function(){for(var c=arguments.length,u=arguments[c-1],d=n.getName(u),h=0;h<c-1;h++)l[h]=arguments[h];a.push((d?d+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),a.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(s){var o=groupSeries(s);return{value:filter([assembleSeriesWithCategoryAxis(o.seriesGroupByCategoryAxis),assembleOtherSeries(o.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:o.meta}}function trim(s){return s.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(s){var o=s.slice(0,s.indexOf(`
`));if(o.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(s){for(var o=s.split(/\n+/g),n=trim(o.shift()).split(itemSplitRegex),a=[],l=map$1(n,function(h){return{name:h,data:[]}}),c=0;c<o.length;c++){var u=trim(o[c]).split(itemSplitRegex);a.push(u.shift());for(var d=0;d<u.length;d++)l[d]&&(l[d].data[c]=u[d])}return{series:l,categories:a}}function parseListContents(s){for(var o=s.split(/\n+/g),n=trim(o.shift()),a=[],l=0;l<o.length;l++){var c=trim(o[l]);if(c){var u=c.split(itemSplitRegex),d="",h=void 0,f=!1;isNaN(u[0])?(f=!0,d=u[0],u=u.slice(1),a[l]={name:d,value:[]},h=a[l].value):h=a[l]=[];for(var g=0;g<u.length;g++)h.push(+u[g]);h.length===1&&(f?a[l].value=h[0]:a[l]=h[0])}}return{name:n,data:a}}function parseContents(s,o){var n=s.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),a={series:[]};return each$f(n,function(l,c){if(isTSVFormat(l)){var u=parseTSVContents(l),d=o[c],h=d.axisDim+"Axis";d&&(a[h]=a[h]||[],a[h][d.axisIndex]={data:u.categories},a.series=a.series.concat(u.series))}else{var u=parseListContents(l);a.series.push(u)}}),a}var DataView=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.onclick=function(n,a){setTimeout(function(){a.dispatchAction({type:"hideTip"})});var l=a.getDom(),c=this.model;this._dom&&l.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=c.get("backgroundColor")||"#fff";var d=document.createElement("h4"),h=c.get("lang")||[];d.innerHTML=h[0]||c.get("title"),d.style.cssText="margin:10px 20px",d.style.color=c.get("textColor");var f=document.createElement("div"),g=document.createElement("textarea");f.style.cssText="overflow:auto";var p=c.get("optionToContent"),v=c.get("contentToOption"),b=getContentFromModel(n);if(isFunction$1(p)){var _=p(a.getOption());isString$2(_)?f.innerHTML=_:isDom(_)&&f.appendChild(_)}else{g.readOnly=c.get("readOnly");var w=g.style;w.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",w.color=c.get("textColor"),w.borderColor=c.get("textareaBorderColor"),w.backgroundColor=c.get("textareaColor"),g.value=b.value,f.appendChild(g)}var x=b.meta,S=document.createElement("div");S.style.cssText="position:absolute;bottom:5px;left:0;right:0";var C="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",T=document.createElement("div"),R=document.createElement("div");C+=";background-color:"+c.get("buttonColor"),C+=";color:"+c.get("buttonTextColor");var A=this;function M(){l.removeChild(u),A._dom=null}addEventListener(T,"click",M),addEventListener(R,"click",function(){if(v==null&&p!=null||v!=null&&p==null){process.env.NODE_ENV!=="production"&&warn("It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored."),M();return}var D;try{isFunction$1(v)?D=v(f,a.getOption()):D=parseContents(g.value,x)}catch(O){throw M(),new Error("Data view format error "+O)}D&&a.dispatchAction({type:"changeDataView",newOption:D}),M()}),T.innerHTML=h[1],R.innerHTML=h[2],R.style.cssText=T.style.cssText=C,!c.get("readOnly")&&S.appendChild(R),S.appendChild(T),u.appendChild(d),u.appendChild(f),u.appendChild(S),f.style.height=l.clientHeight-80+"px",l.appendChild(u),this._dom=u},o.prototype.remove=function(n,a){this._dom&&a.getDom().removeChild(this._dom)},o.prototype.dispose=function(n,a){this.remove(n,a)},o.getDefaultOption=function(n){var a={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return a},o}(ToolboxFeature);function tryMergeDataOption(s,o){return map$1(s,function(n,a){var l=o&&o[a];if(isObject$3(l)&&!isArray$1(l)){var c=isObject$3(n)&&!isArray$1(n);c||(n={value:n});var u=l.name!=null&&n.name==null;return n=defaults(n,l),u&&delete n.name,n}else return n})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(s,o){var n=[];each$f(s.newOption.series,function(a){var l=o.getSeriesByName(a.name)[0];if(!l)n.push(extend({type:"scatter"},a));else{var c=l.get("data");n.push({name:a.name,data:tryMergeDataOption(a.data,c)})}}),o.mergeOption(defaults({series:n},s.newOption))});var each$6=each$f,inner$6=makeInner();function push(s,o){var n=getStoreSnapshots(s);each$6(o,function(a,l){for(var c=n.length-1;c>=0;c--){var u=n[c];if(u[l])break}if(c<0){var d=s.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(d){var h=d.getPercentRange();n[0][l]={dataZoomId:l,start:h[0],end:h[1]}}}}),n.push(o)}function pop(s){var o=getStoreSnapshots(s),n=o[o.length-1];o.length>1&&o.pop();var a={};return each$6(n,function(l,c){for(var u=o.length-1;u>=0;u--)if(l=o[u][c],l){a[c]=l;break}}),a}function clear(s){inner$6(s).snapshots=null}function count(s){return getStoreSnapshots(s).length}function getStoreSnapshots(s){var o=inner$6(s);return o.snapshots||(o.snapshots=[{}]),o.snapshots}var RestoreOption=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.onclick=function(n,a){clear(n),a.dispatchAction({type:"restore",from:this.uid})},o.getDefaultOption=function(n){var a={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return a},o}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(s,o){o.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function s(o,n,a){var l=this;this._targetInfoList=[];var c=parseFinder(n,o);each$f(targetInfoBuilders,function(u,d){(!a||!a.include||indexOf(a.include,d)>=0)&&u(c,l._targetInfoList)})}return s.prototype.setOutputRanges=function(o,n){return this.matchOutputRanges(o,n,function(a,l,c){if((a.coordRanges||(a.coordRanges=[])).push(l),!a.coordRange){a.coordRange=l;var u=coordConvert[a.brushType](0,c,l);a.__rangeOffset={offset:diffProcessor[a.brushType](u.values,a.range,[1,1]),xyMinMax:u.xyMinMax}}}),o},s.prototype.matchOutputRanges=function(o,n,a){each$f(o,function(l){var c=this.findTargetInfo(l,n);c&&c!==!0&&each$f(c.coordSyses,function(u){var d=coordConvert[l.brushType](1,u,l.range,!0);a(l,d.values,u,n)})},this)},s.prototype.setInputRanges=function(o,n){each$f(o,function(a){var l=this.findTargetInfo(a,n);if(process.env.NODE_ENV!=="production"&&(assert(!l||l===!0||a.coordRange,"coordRange must be specified when coord index specified."),assert(!l||l!==!0||a.range,"range must be specified in global brush.")),a.range=a.range||[],l&&l!==!0){a.panelId=l.panelId;var c=coordConvert[a.brushType](0,l.coordSys,a.coordRange),u=a.__rangeOffset;a.range=u?diffProcessor[a.brushType](c.values,u.offset,getScales(c.xyMinMax,u.xyMinMax)):c.values}},this)},s.prototype.makePanelOpts=function(o,n){return map$1(this._targetInfoList,function(a){var l=a.getPanelRect();return{panelId:a.panelId,defaultBrushType:n?n(a):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,o,a.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},s.prototype.controlSeries=function(o,n,a){var l=this.findTargetInfo(o,a);return l===!0||l&&indexOf(l.coordSyses,n.coordinateSystem)>=0},s.prototype.findTargetInfo=function(o,n){for(var a=this._targetInfoList,l=parseFinder(n,o),c=0;c<a.length;c++){var u=a[c],d=o.panelId;if(d){if(u.panelId===d)return u}else for(var h=0;h<targetInfoMatchers.length;h++)if(targetInfoMatchers[h](l,u))return u}return!0},s}();function formatMinMax(s){return s[0]>s[1]&&s.reverse(),s}function parseFinder(s,o){return parseFinder$1(s,o,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(s,o){var n=s.xAxisModels,a=s.yAxisModels,l=s.gridModels,c=createHashMap(),u={},d={};!n&&!a&&!l||(each$f(n,function(h){var f=h.axis.grid.model;c.set(f.id,f),u[f.id]=!0}),each$f(a,function(h){var f=h.axis.grid.model;c.set(f.id,f),d[f.id]=!0}),each$f(l,function(h){c.set(h.id,h),u[h.id]=!0,d[h.id]=!0}),c.each(function(h){var f=h.coordinateSystem,g=[];each$f(f.getCartesians(),function(p,v){(indexOf(n,p.getAxis("x").model)>=0||indexOf(a,p.getAxis("y").model)>=0)&&g.push(p)}),o.push({panelId:"grid--"+h.id,gridModel:h,coordSysModel:h,coordSys:g[0],coordSyses:g,getPanelRect:panelRectBuilders.grid,xAxisDeclared:u[h.id],yAxisDeclared:d[h.id]})}))},geo:function(s,o){each$f(s.geoModels,function(n){var a=n.coordinateSystem;o.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:a,coordSyses:[a],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(s,o){var n=s.xAxisModel,a=s.yAxisModel,l=s.gridModel;return!l&&n&&(l=n.axis.grid.model),!l&&a&&(l=a.axis.grid.model),l&&l===o.gridModel},function(s,o){var n=s.geoModel;return n&&n===o.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var s=this.coordSys,o=s.getBoundingRect().clone();return o.applyTransform(getTransform$1(s)),o}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(s,o,n,a){var l=s?o.pointToData([n[0][0],n[1][0]],a):o.dataToPoint([n[0][0],n[1][0]],a),c=s?o.pointToData([n[0][1],n[1][1]],a):o.dataToPoint([n[0][1],n[1][1]],a),u=[formatMinMax([l[0],c[0]]),formatMinMax([l[1],c[1]])];return{values:u,xyMinMax:u}},polygon:function(s,o,n,a){var l=[[1/0,-1/0],[1/0,-1/0]],c=map$1(n,function(u){var d=s?o.pointToData(u,a):o.dataToPoint(u,a);return l[0][0]=Math.min(l[0][0],d[0]),l[1][0]=Math.min(l[1][0],d[1]),l[0][1]=Math.max(l[0][1],d[0]),l[1][1]=Math.max(l[1][1],d[1]),d});return{values:c,xyMinMax:l}}};function axisConvert(s,o,n,a){process.env.NODE_ENV!=="production"&&assert(n.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var l=n.getAxis(["x","y"][s]),c=formatMinMax(map$1([0,1],function(d){return o?l.coordToData(l.toLocalCoord(a[d]),!0):l.toGlobalCoord(l.dataToCoord(a[d]))})),u=[];return u[s]=c,u[1-s]=[NaN,NaN],{values:c,xyMinMax:u}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(s,o,n){return[[s[0][0]-n[0]*o[0][0],s[0][1]-n[0]*o[0][1]],[s[1][0]-n[1]*o[1][0],s[1][1]-n[1]*o[1][1]]]},polygon:function(s,o,n){return map$1(s,function(a,l){return[a[0]-n[0]*o[l][0],a[1]-n[1]*o[l][1]]})}};function axisDiffProcessor(s,o,n,a){return[o[0]-a[s]*n[0],o[1]-a[s]*n[1]]}function getScales(s,o){var n=getSize(s),a=getSize(o),l=[n[0]/a[0],n[1]/a[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(s){return s?[s[0][1]-s[0][0],s[1][1]-s[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.render=function(n,a,l,c){this._brushController||(this._brushController=new BrushController(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(n,a,this,c,l),updateBackBtnStatus(n,a)},o.prototype.onclick=function(n,a,l){handlers[l].call(this)},o.prototype.remove=function(n,a){this._brushController&&this._brushController.unmount()},o.prototype.dispose=function(n,a){this._brushController&&this._brushController.dispose()},o.prototype._onBrush=function(n){var a=n.areas;if(!n.isEnd||!a.length)return;var l={},c=this.ecModel;this._brushController.updateCovers([]);var u=new BrushTargetManager(makeAxisFinder(this.model),c,{include:["grid"]});u.matchOutputRanges(a,c,function(f,g,p){if(p.type==="cartesian2d"){var v=f.brushType;v==="rect"?(d("x",p,g[0]),d("y",p,g[1])):d({lineX:"x",lineY:"y"}[v],p,g)}}),push(c,l),this._dispatchZoomAction(l);function d(f,g,p){var v=g.getAxis(f),b=v.model,_=h(f,b,c),w=_.findRepresentativeAxisProxy(b).getMinMaxSpan();(w.minValueSpan!=null||w.maxValueSpan!=null)&&(p=sliderMove(0,p.slice(),v.scale.getExtent(),0,w.minValueSpan,w.maxValueSpan)),_&&(l[_.id]={dataZoomId:_.id,startValue:p[0],endValue:p[1]})}function h(f,g,p){var v;return p.eachComponent({mainType:"dataZoom",subType:"select"},function(b){var _=b.getAxisModel(f,g.componentIndex);_&&(v=b)}),v}},o.prototype._dispatchZoomAction=function(n){var a=[];each$5(n,function(l,c){a.push(clone$4(l))}),a.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:a})},o.getDefaultOption=function(n){var a={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return a},o}(ToolboxFeature),handlers={zoom:function(){var s=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:s})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(s){var o={xAxisIndex:s.get("xAxisIndex",!0),yAxisIndex:s.get("yAxisIndex",!0),xAxisId:s.get("xAxisId",!0),yAxisId:s.get("yAxisId",!0)};return o.xAxisIndex==null&&o.xAxisId==null&&(o.xAxisIndex="all"),o.yAxisIndex==null&&o.yAxisId==null&&(o.yAxisIndex="all"),o}function updateBackBtnStatus(s,o){s.setIconStatus("back",count(o)>1?"emphasis":"normal")}function updateZoomBtnStatus(s,o,n,a,l){var c=n._isZoomActive;a&&a.type==="takeGlobalCursor"&&(c=a.key==="dataZoomSelect"?a.dataZoomSelectActive:!1),n._isZoomActive=c,s.setIconStatus("zoom",c?"emphasis":"normal");var u=new BrushTargetManager(makeAxisFinder(s),o,{include:["grid"]}),d=u.makePanelOpts(l,function(h){return h.xAxisDeclared&&!h.yAxisDeclared?"lineX":!h.xAxisDeclared&&h.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(d).enableBrush(c&&d.length?{brushType:"auto",brushStyle:s.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(s){var o=s.getComponent("toolbox",0),n=["feature","dataZoom"];if(!o||o.get(n)==null)return;var a=o.getModel(n),l=[],c=makeAxisFinder(a),u=parseFinder$1(s,c);each$5(u.xAxisModels,function(h){return d(h,"xAxis","xAxisIndex")}),each$5(u.yAxisModels,function(h){return d(h,"yAxis","yAxisIndex")});function d(h,f,g){var p=h.componentIndex,v={type:"select",$fromToolbox:!0,filterMode:a.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+f+p};v[g]=p,l.push(v)}return l});function install$j(s){s.registerComponentModel(ToolboxModel),s.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="tooltip",o.dependencies=["axisPointer"],o.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},o}(ComponentModel);function shouldTooltipConfine(s){var o=s.get("confine");return o!=null?!!o:s.get("renderMode")==="richText"}function testStyle(s){if(env.domSupported){for(var o=document.documentElement.style,n=0,a=s.length;n<a;n++)if(s[n]in o)return s[n]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(s,o){if(!s)return o;o=toCamelCase(o,!0);var n=s.indexOf(o);return s=n===-1?o:"-"+s.slice(0,n)+"-"+o,s.toLowerCase()}function getComputedStyle$1(s,o){var n=s.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(s);return n?n[o]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(s){return s=s==="left"?"right":s==="right"?"left":s==="top"?"bottom":"top",s}function assembleArrow(s,o,n){if(!isString$2(n)||n==="inside")return"";var a=s.get("backgroundColor"),l=s.get("borderWidth");o=convertToColorString(o);var c=mirrorPos(n),u=Math.max(Math.round(l)*1.5,6),d="",h=CSS_TRANSFORM_VENDOR+":",f;indexOf(["left","right"],c)>-1?(d+="top:50%",h+="translateY(-50%) rotate("+(f=c==="left"?-225:-45)+"deg)"):(d+="left:50%",h+="translateX(-50%) rotate("+(f=c==="top"?225:45)+"deg)");var g=f*Math.PI/180,p=u+l,v=p*Math.abs(Math.cos(g))+p*Math.abs(Math.sin(g)),b=Math.round(((v-Math.SQRT2*l)/2+Math.SQRT2*l-(v-p)/2)*100)/100;d+=";"+c+":-"+b+"px";var _=o+" solid "+l+"px;",w=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",d+";"+h+";","border-bottom:"+_,"border-right:"+_,"background-color:"+a+";"];return'<div style="'+w.join("")+'"></div>'}function assembleTransition(s,o){var n="cubic-bezier(0.23,1,0.32,1)",a=" "+s/2+"s "+n,l="opacity"+a+",visibility"+a;return o||(a=" "+s+"s "+n,l+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+a:",left"+a+",top"+a),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(s,o,n){var a=s.toFixed(0)+"px",l=o.toFixed(0)+"px";if(!env.transformSupported)return n?"top:"+l+";left:"+a+";":[["top",l],["left",a]];var c=env.transform3dSupported,u="translate"+(c?"3d":"")+"("+a+","+l+(c?",0":"")+")";return n?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+u+";":[["top",0],["left",0],[TRANSFORM_VENDOR,u]]}function assembleFont(s){var o=[],n=s.get("fontSize"),a=s.getTextColor();a&&o.push("color:"+a),o.push("font:"+s.getFont());var l=retrieve2(s.get("lineHeight"),Math.round(n*3/2));n&&o.push("line-height:"+l+"px");var c=s.get("textShadowColor"),u=s.get("textShadowBlur")||0,d=s.get("textShadowOffsetX")||0,h=s.get("textShadowOffsetY")||0;return c&&u&&o.push("text-shadow:"+d+"px "+h+"px "+u+"px "+c),each$f(["decoration","align"],function(f){var g=s.get(f);g&&o.push("text-"+f+":"+g)}),o.join(";")}function assembleCssText(s,o,n){var a=[],l=s.get("transitionDuration"),c=s.get("backgroundColor"),u=s.get("shadowBlur"),d=s.get("shadowColor"),h=s.get("shadowOffsetX"),f=s.get("shadowOffsetY"),g=s.getModel("textStyle"),p=getPaddingFromTooltipModel(s,"html"),v=h+"px "+f+"px "+u+"px "+d;return a.push("box-shadow:"+v),o&&l&&a.push(assembleTransition(l,n)),c&&a.push("background-color:"+c),each$f(["width","color","radius"],function(b){var _="border-"+b,w=toCamelCase(_),x=s.get(w);x!=null&&a.push(_+":"+x+(b==="color"?"":"px"))}),a.push(assembleFont(g)),p!=null&&a.push("padding:"+normalizeCssArray(p).join("px ")+"px"),a.join(";")+";"}function makeStyleCoord$1(s,o,n,a,l){var c=o&&o.painter;if(n){var u=c&&c.getViewportRoot();u&&transformLocalCoord(s,u,n,a,l)}else{s[0]=a,s[1]=l;var d=c&&c.getViewportRootOffset();d&&(s[0]+=d.offsetLeft,s[1]+=d.offsetTop)}s[2]=s[0]/o.getWidth(),s[3]=s[1]/o.getHeight()}var TooltipHTMLContent=function(){function s(o,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var a=document.createElement("div");a.domBelongToZr=!0,this.el=a;var l=this._zr=o.getZr(),c=n.appendTo,u=c&&(isString$2(c)?document.querySelector(c):isDom(c)?c:isFunction$1(c)&&c(o.getDom()));makeStyleCoord$1(this._styleCoord,l,u,o.getWidth()/2,o.getHeight()/2),(u||o.getDom()).appendChild(a),this._api=o,this._container=u;var d=this;a.onmouseenter=function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0},a.onmousemove=function(h){if(h=h||window.event,!d._enterable){var f=l.handler,g=l.painter.getViewportRoot();normalizeEvent(g,h,!0),f.dispatch("mousemove",h)}},a.onmouseleave=function(){d._inContent=!1,d._enterable&&d._show&&d.hideLater(d._hideDelay)}}return s.prototype.update=function(o){if(!this._container){var n=this._api.getDom(),a=getComputedStyle$1(n,"position"),l=n.style;l.position!=="absolute"&&a!=="absolute"&&(l.position="relative")}var c=o.get("alwaysShowContent");c&&this._moveIfResized(),this._alwaysShowContent=c,this.el.className=o.get("className")||""},s.prototype.show=function(o,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el,l=a.style,c=this._styleCoord;a.innerHTML?l.cssText=gCssText+assembleCssText(o,!this._firstShow,this._longHide)+assembleTransform(c[0],c[1],!0)+("border-color:"+convertToColorString(n)+";")+(o.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},s.prototype.setContent=function(o,n,a,l,c){var u=this.el;if(o==null){u.innerHTML="";return}var d="";if(isString$2(c)&&a.get("trigger")==="item"&&!shouldTooltipConfine(a)&&(d=assembleArrow(a,l,c)),isString$2(o))u.innerHTML=o+d;else if(o){u.innerHTML="",isArray$1(o)||(o=[o]);for(var h=0;h<o.length;h++)isDom(o[h])&&o[h].parentNode!==u&&u.appendChild(o[h]);if(d&&u.childNodes.length){var f=document.createElement("div");f.innerHTML=d,u.appendChild(f)}}},s.prototype.setEnterable=function(o){this._enterable=o},s.prototype.getSize=function(){var o=this.el;return o?[o.offsetWidth,o.offsetHeight]:[0,0]},s.prototype.moveTo=function(o,n){if(this.el){var a=this._styleCoord;if(makeStyleCoord$1(a,this._zr,this._container,o,n),a[0]!=null&&a[1]!=null){var l=this.el.style,c=assembleTransform(a[0],a[1]);each$f(c,function(u){l[u[0]]=u[1]})}}},s.prototype._moveIfResized=function(){var o=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(o*this._zr.getWidth(),n*this._zr.getHeight())},s.prototype.hide=function(){var o=this,n=this.el.style;n.visibility="hidden",n.opacity="0",env.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return o._longHide=!0},500)},s.prototype.hideLater=function(o){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(o?(this._hideDelay=o,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),o)):this.hide())},s.prototype.isShow=function(){return this._show},s.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var o=this.el.parentNode;o&&o.removeChild(this.el),this.el=this._container=null},s}(),TooltipRichContent=function(){function s(o){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=o.getZr(),makeStyleCoord(this._styleCoord,this._zr,o.getWidth()/2,o.getHeight()/2)}return s.prototype.update=function(o){var n=o.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},s.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},s.prototype.setContent=function(o,n,a,l,c){var u=this;isObject$3(o)&&throwError(process.env.NODE_ENV!=="production"?"Passing DOM nodes as content is not supported in richText tooltip!":""),this.el&&this._zr.remove(this.el);var d=a.getModel("textStyle");this.el=new ZRText({style:{rich:n.richTextStyles,text:o,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:d.get("textShadowColor"),fill:a.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(a,"richText"),verticalAlign:"top",align:"left"},z:a.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(f){u.el.style[f]=a.get(f)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(f){u.el.style[f]=d.get(f)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},s.prototype.setEnterable=function(o){this._enterable=o},s.prototype.getSize=function(){var o=this.el,n=this.el.getBoundingRect(),a=calcShadowOuterSize(o.style);return[n.width+a.left+a.right,n.height+a.top+a.bottom]},s.prototype.moveTo=function(o,n){var a=this.el;if(a){var l=this._styleCoord;makeStyleCoord(l,this._zr,o,n),o=l[0],n=l[1];var c=a.style,u=mathMaxWith0(c.borderWidth||0),d=calcShadowOuterSize(c);a.x=o+u+d.left,a.y=n+u+d.top,a.markRedraw()}},s.prototype._moveIfResized=function(){var o=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(o*this._zr.getWidth(),n*this._zr.getHeight())},s.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},s.prototype.hideLater=function(o){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(o?(this._hideDelay=o,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),o)):this.hide())},s.prototype.isShow=function(){return this._show},s.prototype.dispose=function(){this._zr.remove(this.el)},s}();function mathMaxWith0(s){return Math.max(0,s)}function calcShadowOuterSize(s){var o=mathMaxWith0(s.shadowBlur||0),n=mathMaxWith0(s.shadowOffsetX||0),a=mathMaxWith0(s.shadowOffsetY||0);return{left:mathMaxWith0(o-n),right:mathMaxWith0(o+n),top:mathMaxWith0(o-a),bottom:mathMaxWith0(o+a)}}function makeStyleCoord(s,o,n,a){s[0]=n,s[1]=a,s[2]=s[0]/o.getWidth(),s[3]=s[1]/o.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a){if(!(env.node||!a.getDom())){var l=n.getComponent("tooltip"),c=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=c==="richText"?new TooltipRichContent(a):new TooltipHTMLContent(a,{appendTo:l.get("appendToBody",!0)?"body":l.get("appendTo",!0)})}},o.prototype.render=function(n,a,l){if(!(env.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=a,this._api=l;var c=this._tooltipContent;c.update(n),c.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},o.prototype._initGlobalListener=function(){var n=this._tooltipModel,a=n.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,c,u){a!=="none"&&(a.indexOf(l)>=0?this._tryShow(c,u):l==="leave"&&this._hide(u))},this))},o.prototype._keepShow=function(){var n=this._tooltipModel,a=this._ecModel,l=this._api,c=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&c!=="none"&&c!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&u.manuallyShowTip(n,a,l,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},o.prototype.manuallyShowTip=function(n,a,l,c){if(!(c.from===this.uid||env.node||!l.getDom())){var u=makeDispatchAction(c,l);this._ticket="";var d=c.dataByCoordSys,h=findComponentReference(c,a,l);if(h){var f=h.el.getBoundingRect().clone();f.applyTransform(h.el.transform),this._tryShow({offsetX:f.x+f.width/2,offsetY:f.y+f.height/2,target:h.el,position:c.position,positionDefault:"bottom"},u)}else if(c.tooltip&&c.x!=null&&c.y!=null){var g=proxyRect;g.x=c.x,g.y=c.y,g.update(),getECData(g).tooltipConfig={name:null,option:c.tooltip},this._tryShow({offsetX:c.x,offsetY:c.y,target:g},u)}else if(d)this._tryShow({offsetX:c.x,offsetY:c.y,position:c.position,dataByCoordSys:d,tooltipOption:c.tooltipOption},u);else if(c.seriesIndex!=null){if(this._manuallyAxisShowTip(n,a,l,c))return;var p=findPointFromSeries(c,a),v=p.point[0],b=p.point[1];v!=null&&b!=null&&this._tryShow({offsetX:v,offsetY:b,target:p.el,position:c.position,positionDefault:"bottom"},u)}else c.x!=null&&c.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:c.x,y:c.y}),this._tryShow({offsetX:c.x,offsetY:c.y,position:c.position,target:l.getZr().findHover(c.x,c.y).target},u))}},o.prototype.manuallyHideTip=function(n,a,l,c){var u=this._tooltipContent;this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,c.from!==this.uid&&this._hide(makeDispatchAction(c,l))},o.prototype._manuallyAxisShowTip=function(n,a,l,c){var u=c.seriesIndex,d=c.dataIndex,h=a.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||d==null||h==null)){var f=a.getSeriesByIndex(u);if(f){var g=f.getData(),p=buildTooltipModel([g.getItemModel(d),f,(f.coordinateSystem||{}).model],this._tooltipModel);if(p.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:d,position:c.position}),!0}}},o.prototype._tryShow=function(n,a){var l=n.target,c=this._tooltipModel;if(c){this._lastX=n.offsetX,this._lastY=n.offsetY;var u=n.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,n);else if(l){var d=getECData(l);if(d.ssrType==="legend")return;this._lastDataByCoordSys=null;var h,f;findEventDispatcher(l,function(g){if(getECData(g).dataIndex!=null)return h=g,!0;if(getECData(g).tooltipConfig!=null)return f=g,!0},!0),h?this._showSeriesItemTooltip(n,h,a):f?this._showComponentItemTooltip(n,f,a):this._hide(a)}else this._lastDataByCoordSys=null,this._hide(a)}},o.prototype._showOrMove=function(n,a){var l=n.get("showDelay");a=bind$1(a,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(a,l):a()},o.prototype._showAxisTooltip=function(n,a){var l=this._ecModel,c=this._tooltipModel,u=[a.offsetX,a.offsetY],d=buildTooltipModel([a.tooltipOption],c),h=this._renderMode,f=[],g=createTooltipMarkup("section",{blocks:[],noHeader:!0}),p=[],v=new TooltipMarkupStyleCreator;each$f(n,function(C){each$f(C.dataByAxis,function(T){var R=l.getComponent(T.axisDim+"Axis",T.axisIndex),A=T.value;if(!(!R||A==null)){var M=getValueLabel(A,R.axis,l,T.seriesDataIndices,T.valueLabelOpt),D=createTooltipMarkup("section",{header:M,noHeader:!trim$1(M),sortBlocks:!0,blocks:[]});g.blocks.push(D),each$f(T.seriesDataIndices,function(O){var H=l.getSeriesByIndex(O.seriesIndex),j=O.dataIndexInside,q=H.getDataParams(j);if(!(q.dataIndex<0)){q.axisDim=T.axisDim,q.axisIndex=T.axisIndex,q.axisType=T.axisType,q.axisId=T.axisId,q.axisValue=getAxisRawValue(R.axis,{value:A}),q.axisValueLabel=M,q.marker=v.makeTooltipMarker("item",convertToColorString(q.color),h);var Y=normalizeTooltipFormatResult(H.formatTooltip(j,!0,null)),ee=Y.frag;if(ee){var te=buildTooltipModel([H],c).get("valueFormatter");D.blocks.push(te?extend({valueFormatter:te},ee):ee)}Y.text&&p.push(Y.text),f.push(q)}})}})}),g.blocks.reverse(),p.reverse();var b=a.position,_=d.get("order"),w=buildTooltipMarkup(g,v,h,_,l.get("useUTC"),d.get("textStyle"));w&&p.unshift(w);var x=h==="richText"?`

`:"<br/>",S=p.join(x);this._showOrMove(d,function(){this._updateContentNotChangedOnAxis(n,f)?this._updatePosition(d,b,u[0],u[1],this._tooltipContent,f):this._showTooltipContent(d,S,f,Math.random()+"",u[0],u[1],b,null,v)})},o.prototype._showSeriesItemTooltip=function(n,a,l){var c=this._ecModel,u=getECData(a),d=u.seriesIndex,h=c.getSeriesByIndex(d),f=u.dataModel||h,g=u.dataIndex,p=u.dataType,v=f.getData(p),b=this._renderMode,_=n.positionDefault,w=buildTooltipModel([v.getItemModel(g),f,h&&(h.coordinateSystem||{}).model],this._tooltipModel,_?{position:_}:null),x=w.get("trigger");if(!(x!=null&&x!=="item")){var S=f.getDataParams(g,p),C=new TooltipMarkupStyleCreator;S.marker=C.makeTooltipMarker("item",convertToColorString(S.color),b);var T=normalizeTooltipFormatResult(f.formatTooltip(g,!1,p)),R=w.get("order"),A=w.get("valueFormatter"),M=T.frag,D=M?buildTooltipMarkup(A?extend({valueFormatter:A},M):M,C,b,R,c.get("useUTC"),w.get("textStyle")):T.text,O="item_"+f.name+"_"+g;this._showOrMove(w,function(){this._showTooltipContent(w,D,S,O,n.offsetX,n.offsetY,n.position,n.target,C)}),l({type:"showTip",dataIndexInside:g,dataIndex:v.getRawIndex(g),seriesIndex:d,from:this.uid})}},o.prototype._showComponentItemTooltip=function(n,a,l){var c=this._renderMode==="html",u=getECData(a),d=u.tooltipConfig,h=d.option||{},f=h.encodeHTMLContent;if(isString$2(h)){var g=h;h={content:g,formatter:g},f=!0}f&&c&&h.content&&(h=clone$4(h),h.content=encodeHTML(h.content));var p=[h],v=this._ecModel.getComponent(u.componentMainType,u.componentIndex);v&&p.push(v),p.push({formatter:h.content});var b=n.positionDefault,_=buildTooltipModel(p,this._tooltipModel,b?{position:b}:null),w=_.get("content"),x=Math.random()+"",S=new TooltipMarkupStyleCreator;this._showOrMove(_,function(){var C=clone$4(_.get("formatterParams")||{});this._showTooltipContent(_,w,C,x,n.offsetX,n.offsetY,n.position,a,S)}),l({type:"showTip",from:this.uid})},o.prototype._showTooltipContent=function(n,a,l,c,u,d,h,f,g){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var p=this._tooltipContent;p.setEnterable(n.get("enterable"));var v=n.get("formatter");h=h||n.get("position");var b=a,_=this._getNearestPoint([u,d],l,n.get("trigger"),n.get("borderColor")),w=_.color;if(v)if(isString$2(v)){var x=n.ecModel.get("useUTC"),S=isArray$1(l)?l[0]:l,C=S&&S.axisType&&S.axisType.indexOf("time")>=0;b=v,C&&(b=format$1(S.axisValue,b,x)),b=formatTpl(b,l,!0)}else if(isFunction$1(v)){var T=bind$1(function(R,A){R===this._ticket&&(p.setContent(A,g,n,w,h),this._updatePosition(n,h,u,d,p,l,f))},this);this._ticket=c,b=v(l,c,T)}else b=v;p.setContent(b,g,n,w,h),p.show(n,w),this._updatePosition(n,h,u,d,p,l,f)}},o.prototype._getNearestPoint=function(n,a,l,c){if(l==="axis"||isArray$1(a))return{color:c||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(a))return{color:c||a.color||a.borderColor}},o.prototype._updatePosition=function(n,a,l,c,u,d,h){var f=this._api.getWidth(),g=this._api.getHeight();a=a||n.get("position");var p=u.getSize(),v=n.get("align"),b=n.get("verticalAlign"),_=h&&h.getBoundingRect().clone();if(h&&_.applyTransform(h.transform),isFunction$1(a)&&(a=a([l,c],d,u.el,_,{viewSize:[f,g],contentSize:p.slice()})),isArray$1(a))l=parsePercent(a[0],f),c=parsePercent(a[1],g);else if(isObject$3(a)){var w=a;w.width=p[0],w.height=p[1];var x=getLayoutRect(w,{width:f,height:g});l=x.x,c=x.y,v=null,b=null}else if(isString$2(a)&&h){var S=calcTooltipPosition(a,_,p,n.get("borderWidth"));l=S[0],c=S[1]}else{var S=refixTooltipPosition(l,c,u,f,g,v?null:20,b?null:20);l=S[0],c=S[1]}if(v&&(l-=isCenterAlign(v)?p[0]/2:v==="right"?p[0]:0),b&&(c-=isCenterAlign(b)?p[1]/2:b==="bottom"?p[1]:0),shouldTooltipConfine(n)){var S=confineTooltipPosition(l,c,u,f,g);l=S[0],c=S[1]}u.moveTo(l,c)},o.prototype._updateContentNotChangedOnAxis=function(n,a){var l=this._lastDataByCoordSys,c=this._cbParamsList,u=!!l&&l.length===n.length;return u&&each$f(l,function(d,h){var f=d.dataByAxis||[],g=n[h]||{},p=g.dataByAxis||[];u=u&&f.length===p.length,u&&each$f(f,function(v,b){var _=p[b]||{},w=v.seriesDataIndices||[],x=_.seriesDataIndices||[];u=u&&v.value===_.value&&v.axisType===_.axisType&&v.axisId===_.axisId&&w.length===x.length,u&&each$f(w,function(S,C){var T=x[C];u=u&&S.seriesIndex===T.seriesIndex&&S.dataIndex===T.dataIndex}),c&&each$f(v.seriesDataIndices,function(S){var C=S.seriesIndex,T=a[C],R=c[C];T&&R&&R.data!==T.data&&(u=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=a,!!u},o.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},o.prototype.dispose=function(n,a){env.node||!a.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",a))},o.type="tooltip",o}(ComponentView);function buildTooltipModel(s,o,n){var a=o.ecModel,l;n?(l=new Model(n,a,a),l=new Model(o.option,l,a)):l=o;for(var c=s.length-1;c>=0;c--){var u=s[c];u&&(u instanceof Model&&(u=u.get("tooltip",!0)),isString$2(u)&&(u={formatter:u}),u&&(l=new Model(u,l,a)))}return l}function makeDispatchAction(s,o){return s.dispatchAction||bind$1(o.dispatchAction,o)}function refixTooltipPosition(s,o,n,a,l,c,u){var d=n.getSize(),h=d[0],f=d[1];return c!=null&&(s+h+c+2>a?s-=h+c:s+=c),u!=null&&(o+f+u>l?o-=f+u:o+=u),[s,o]}function confineTooltipPosition(s,o,n,a,l){var c=n.getSize(),u=c[0],d=c[1];return s=Math.min(s+u,a)-u,o=Math.min(o+d,l)-d,s=Math.max(s,0),o=Math.max(o,0),[s,o]}function calcTooltipPosition(s,o,n,a){var l=n[0],c=n[1],u=Math.ceil(Math.SQRT2*a)+8,d=0,h=0,f=o.width,g=o.height;switch(s){case"inside":d=o.x+f/2-l/2,h=o.y+g/2-c/2;break;case"top":d=o.x+f/2-l/2,h=o.y-c-u;break;case"bottom":d=o.x+f/2-l/2,h=o.y+g+u;break;case"left":d=o.x-l-u,h=o.y+g/2-c/2;break;case"right":d=o.x+f+u,h=o.y+g/2-c/2}return[d,h]}function isCenterAlign(s){return s==="center"||s==="middle"}function findComponentReference(s,o,n){var a=preParseFinder(s).queryOptionMap,l=a.keys()[0];if(!(!l||l==="series")){var c=queryReferringComponents(o,l,a.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),u=c.models[0];if(u){var d=n.getViewOfComponentModel(u),h;if(d.group.traverse(function(f){var g=getECData(f).tooltipConfig;if(g&&g.name===s.name)return h=f,!0}),h)return{componentMainType:l,componentIndex:u.componentIndex,el:h}}}}function install$i(s){use(install$q),s.registerComponentModel(TooltipModel),s.registerComponentView(TooltipView),s.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop$1),s.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop$1)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(s,o){var n=normalizeToArray(s?s.brush:[]);if(n.length){var a=[];each$f(n,function(h){var f=h.hasOwnProperty("toolbox")?h.toolbox:[];f instanceof Array&&(a=a.concat(f))});var l=s&&s.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},s.toolbox=[l]);var c=l.feature||(l.feature={}),u=c.brush||(c.brush={}),d=u.type||(u.type=[]);d.push.apply(d,a),removeDuplicate(d),o&&!d.length&&d.push.apply(d,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(s){var o={};each$f(s,function(n){o[n]=1}),s.length=0,each$f(o,function(n,a){s.push(a)})}var each$4=each$f;function hasKeys(s){if(s){for(var o in s)if(s.hasOwnProperty(o))return!0}}function createVisualMappings(s,o,n){var a={};return each$4(o,function(c){var u=a[c]=l();each$4(s[c],function(d,h){if(VisualMapping.isValidType(h)){var f={type:h,visual:d};n&&n(f,c),u[h]=new VisualMapping(f),h==="opacity"&&(f=clone$4(f),f.type="colorAlpha",u.__hidden.__alphaForOpacity=new VisualMapping(f))}})}),a;function l(){var c=function(){};c.prototype.__hidden=c.prototype;var u=new c;return u}}function replaceVisualOption(s,o,n){var a;each$f(n,function(l){o.hasOwnProperty(l)&&hasKeys(o[l])&&(a=!0)}),a&&each$f(n,function(l){o.hasOwnProperty(l)&&hasKeys(o[l])?s[l]=clone$4(o[l]):delete s[l]})}function applyVisual(s,o,n,a,l,c){var u={};each$f(s,function(p){var v=VisualMapping.prepareVisualTypes(o[p]);u[p]=v});var d;function h(p){return getItemVisualFromData(n,d,p)}function f(p,v){setItemVisualFromData(n,d,p,v)}n.each(g);function g(p,v){d=p;var b=n.getRawDataItem(d);if(!(b&&b.visualMap===!1))for(var _=a.call(l,p),w=o[_],x=u[_],S=0,C=x.length;S<C;S++){var T=x[S];w[T]&&w[T].applyVisual(p,h,f)}}}function incrementalApplyVisual(s,o,n,a){var l={};return each$f(s,function(c){var u=VisualMapping.prepareVisualTypes(o[c]);l[c]=u}),{progress:function(u,d){var h;a!=null&&(h=d.getDimensionIndex(a));function f(A){return getItemVisualFromData(d,p,A)}function g(A,M){setItemVisualFromData(d,p,A,M)}for(var p,v=d.getStore();(p=u.next())!=null;){var b=d.getRawDataItem(p);if(!(b&&b.visualMap===!1))for(var _=a!=null?v.get(h,p):p,w=n(_),x=o[w],S=l[w],C=0,T=S.length;C<T;C++){var R=S[C];x[R]&&x[R].applyVisual(_,f,g)}}}}}function makeBrushCommonSelectorForSeries(s){var o=s.brushType,n={point:function(a){return selector[o].point(a,n,s)},rect:function(a){return selector[o].rect(a,n,s)}};return n}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(s,o,n){return s&&n.boundingRect.contain(s[0],s[1])},rect:function(s,o,n){return s&&n.boundingRect.intersect(s)}},polygon:{point:function(s,o,n){return s&&n.boundingRect.contain(s[0],s[1])&&contain(n.range,s[0],s[1])},rect:function(s,o,n){var a=n.range;if(!s||a.length<=1)return!1;var l=s.x,c=s.y,u=s.width,d=s.height,h=a[0];if(contain(a,l,c)||contain(a,l+u,c)||contain(a,l,c+d)||contain(a,l+u,c+d)||BoundingRect.create(s).contain(h[0],h[1])||linePolygonIntersect(l,c,l+u,c,a)||linePolygonIntersect(l,c,l,c+d,a)||linePolygonIntersect(l+u,c,l+u,c+d,a)||linePolygonIntersect(l,c+d,l+u,c+d,a))return!0}}};function getLineSelectors(s){var o=["x","y"],n=["width","height"];return{point:function(a,l,c){if(a){var u=c.range,d=a[s];return inLineRange(d,u)}},rect:function(a,l,c){if(a){var u=c.range,d=[a[o[s]],a[o[s]]+a[n[s]]];return d[1]<d[0]&&d.reverse(),inLineRange(d[0],u)||inLineRange(d[1],u)||inLineRange(u[0],d)||inLineRange(u[1],d)}}}}function inLineRange(s,o){return o[0]<=s&&s<=o[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(s){s.eachComponent({mainType:"brush"},function(o){var n=o.brushTargetManager=new BrushTargetManager(o.option,s);n.setInputRanges(o.areas,s)})}function brushVisual(s,o,n){var a=[],l,c;s.eachComponent({mainType:"brush"},function(u){n&&n.type==="takeGlobalCursor"&&u.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),layoutCovers(s),s.eachComponent({mainType:"brush"},function(u,d){var h={brushId:u.id,brushIndex:d,brushName:u.name,areas:clone$4(u.areas),selected:[]};a.push(h);var f=u.option,g=f.brushLink,p=[],v=[],b=[],_=!1;d||(l=f.throttleType,c=f.throttleDelay);var w=map$1(u.areas,function(A){var M=boundingRectBuilders[A.brushType],D=defaults({boundingRect:M?M(A):void 0},A);return D.selectors=makeBrushCommonSelectorForSeries(D),D}),x=createVisualMappings(u.option,STATE_LIST,function(A){A.mappingMethod="fixed"});isArray$1(g)&&each$f(g,function(A){p[A]=1});function S(A){return g==="all"||!!p[A]}function C(A){return!!A.length}s.eachSeries(function(A,M){var D=b[M]=[];A.subType==="parallel"?T(A,M):R(A,M,D)});function T(A,M){var D=A.coordinateSystem;_=_||D.hasAxisBrushed(),S(M)&&D.eachActiveState(A.getData(),function(O,H){O==="active"&&(v[H]=1)})}function R(A,M,D){if(!(!A.brushSelector||brushModelNotControll(u,M))&&(each$f(w,function(H){u.brushTargetManager.controlSeries(H,A,s)&&D.push(H),_=_||C(D)}),S(M)&&C(D))){var O=A.getData();O.each(function(H){checkInRange(A,D,O,H)&&(v[H]=1)})}}s.eachSeries(function(A,M){var D={seriesId:A.id,seriesIndex:M,seriesName:A.name,dataIndex:[]};h.selected.push(D);var O=b[M],H=A.getData(),j=S(M)?function(q){return v[q]?(D.dataIndex.push(H.getRawIndex(q)),"inBrush"):"outOfBrush"}:function(q){return checkInRange(A,O,H,q)?(D.dataIndex.push(H.getRawIndex(q)),"inBrush"):"outOfBrush"};(S(M)?_:C(O))&&applyVisual(STATE_LIST,x,H,j)})}),dispatchAction$1(o,l,c,a,n)}function dispatchAction$1(s,o,n,a,l){if(l){var c=s.getZr();if(!c[DISPATCH_FLAG]){c[DISPATCH_METHOD]||(c[DISPATCH_METHOD]=doDispatch);var u=createOrUpdate(c,DISPATCH_METHOD,n,o);u(s,a)}}}function doDispatch(s,o){if(!s.isDisposed()){var n=s.getZr();n[DISPATCH_FLAG]=!0,s.dispatchAction({type:"brushSelect",batch:o}),n[DISPATCH_FLAG]=!1}}function checkInRange(s,o,n,a){for(var l=0,c=o.length;l<c;l++){var u=o[l];if(s.brushSelector(a,n,u.selectors,u))return!0}}function brushModelNotControll(s,o){var n=s.option.seriesIndex;return n!=null&&n!=="all"&&(isArray$1(n)?indexOf(n,o)<0:o!==n)}var boundingRectBuilders={rect:function(s){return getBoundingRectFromMinMax(s.range)},polygon:function(s){for(var o,n=s.range,a=0,l=n.length;a<l;a++){o=o||[[1/0,-1/0],[1/0,-1/0]];var c=n[a];c[0]<o[0][0]&&(o[0][0]=c[0]),c[0]>o[0][1]&&(o[0][1]=c[0]),c[1]<o[1][0]&&(o[1][0]=c[1]),c[1]>o[1][1]&&(o[1][1]=c[1])}return o&&getBoundingRectFromMinMax(o)}};function getBoundingRectFromMinMax(s){return new BoundingRect(s[0][0],s[1][0],s[0][1]-s[0][0],s[1][1]-s[1][0])}var BrushView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a){this.ecModel=n,this.api=a,this.model,(this._brushController=new BrushController(a.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},o.prototype.render=function(n,a,l,c){this.model=n,this._updateController(n,a,l,c)},o.prototype.updateTransform=function(n,a,l,c){layoutCovers(a),this._updateController(n,a,l,c)},o.prototype.updateVisual=function(n,a,l,c){this.updateTransform(n,a,l,c)},o.prototype.updateView=function(n,a,l,c){this._updateController(n,a,l,c)},o.prototype._updateController=function(n,a,l,c){(!c||c.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(l)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},o.prototype.dispose=function(){this._brushController.dispose()},o.prototype._onBrush=function(n){var a=this.model.id,l=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:a,areas:clone$4(l),$from:a}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:a,areas:clone$4(l),$from:a})},o.type="brush",o}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.areas=[],n.brushOption={},n}return o.prototype.optionUpdated=function(n,a){var l=this.option;!a&&replaceVisualOption(l,n,["inBrush","outOfBrush"]);var c=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},c.hasOwnProperty("liftZ")||(c.liftZ=5)},o.prototype.setAreas=function(n){process.env.NODE_ENV!=="production"&&(assert(isArray$1(n)),each$f(n,function(a){assert(a.brushType,"Illegal areas")})),n&&(this.areas=map$1(n,function(a){return generateBrushOption(this.option,a)},this))},o.prototype.setBrushOption=function(n){this.brushOption=generateBrushOption(this.option,n),this.brushType=this.brushOption.brushType},o.type="brush",o.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],o.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},o}(ComponentModel);function generateBrushOption(s,o){return merge({brushType:s.brushType,brushMode:s.brushMode,transformable:s.transformable,brushStyle:new Model(s.brushStyle).getItemStyle(),removeOnClick:s.removeOnClick,z:s.z},o,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(s){__extends$1(o,s);function o(){return s!==null&&s.apply(this,arguments)||this}return o.prototype.render=function(n,a,l){var c,u,d;a.eachComponent({mainType:"brush"},function(h){c=h.brushType,u=h.brushOption.brushMode||"single",d=d||!!h.areas.length}),this._brushType=c,this._brushMode=u,each$f(n.get("type",!0),function(h){n.setIconStatus(h,(h==="keep"?u==="multiple":h==="clear"?d:h===c)?"emphasis":"normal")})},o.prototype.updateView=function(n,a,l){this.render(n,a,l)},o.prototype.getIcons=function(){var n=this.model,a=n.get("icon",!0),l={};return each$f(n.get("type",!0),function(c){a[c]&&(l[c]=a[c])}),l},o.prototype.onclick=function(n,a,l){var c=this._brushType,u=this._brushMode;l==="clear"?(a.dispatchAction({type:"axisAreaSelect",intervals:[]}),a.dispatchAction({type:"brush",command:"clear",areas:[]})):a.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?c:c===l?!1:l,brushMode:l==="keep"?u==="multiple"?"single":"multiple":u}})},o.getDefaultOption=function(n){var a={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return a},o}(ToolboxFeature);function install$h(s){s.registerComponentView(BrushView),s.registerComponentModel(BrushModel),s.registerPreprocessor(brushPreprocessor),s.registerVisual(s.PRIORITY.VISUAL.BRUSH,brushVisual),s.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(o,n){n.eachComponent({mainType:"brush",query:o},function(a){a.setAreas(o.areas)})}),s.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop$1),s.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop$1),registerFeature("brush",BrushFeature)}var TitleModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.layoutMode={type:"box",ignoreSize:!0},n}return o.type="title",o.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},o}(ComponentModel),TitleView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.render=function(n,a,l){if(this.group.removeAll(),!!n.get("show")){var c=this.group,u=n.getModel("textStyle"),d=n.getModel("subtextStyle"),h=n.get("textAlign"),f=retrieve2(n.get("textBaseline"),n.get("textVerticalAlign")),g=new ZRText({style:createTextStyle$1(u,{text:n.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),p=g.getBoundingRect(),v=n.get("subtext"),b=new ZRText({style:createTextStyle$1(d,{text:v,fill:d.getTextColor(),y:p.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),_=n.get("link"),w=n.get("sublink"),x=n.get("triggerEvent",!0);g.silent=!_&&!x,b.silent=!w&&!x,_&&g.on("click",function(){windowOpen(_,"_"+n.get("target"))}),w&&b.on("click",function(){windowOpen(w,"_"+n.get("subtarget"))}),getECData(g).eventData=getECData(b).eventData=x?{componentType:"title",componentIndex:n.componentIndex}:null,c.add(g),v&&c.add(b);var S=c.getBoundingRect(),C=n.getBoxLayoutParams();C.width=S.width,C.height=S.height;var T=getLayoutRect(C,{width:l.getWidth(),height:l.getHeight()},n.get("padding"));h||(h=n.get("left")||n.get("right"),h==="middle"&&(h="center"),h==="right"?T.x+=T.width:h==="center"&&(T.x+=T.width/2)),f||(f=n.get("top")||n.get("bottom"),f==="center"&&(f="middle"),f==="bottom"?T.y+=T.height:f==="middle"&&(T.y+=T.height/2),f=f||"top"),c.x=T.x,c.y=T.y,c.markRedraw();var R={align:h,verticalAlign:f};g.setStyle(R),b.setStyle(R),S=c.getBoundingRect();var A=T.margin,M=n.getItemStyle(["color","opacity"]);M.fill=n.get("backgroundColor");var D=new Rect$2({shape:{x:S.x-A[3],y:S.y-A[0],width:S.width+A[1]+A[3],height:S.height+A[0]+A[2],r:n.get("borderRadius")},style:M,subPixelOptimize:!0,silent:!0});c.add(D)}},o.type="title",o}(ComponentView);function install$g(s){s.registerComponentModel(TitleModel),s.registerComponentView(TitleView)}var TimelineModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.layoutMode="box",n}return o.prototype.init=function(n,a,l){this.mergeDefaultAndTheme(n,l),this._initData()},o.prototype.mergeOption=function(n){s.prototype.mergeOption.apply(this,arguments),this._initData()},o.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var a=this._data.count();this.option.loop?n=(n%a+a)%a:(n>=a&&(n=a-1),n<0&&(n=0)),this.option.currentIndex=n},o.prototype.getCurrentIndex=function(){return this.option.currentIndex},o.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},o.prototype.setPlayState=function(n){this.option.autoPlay=!!n},o.prototype.getPlayState=function(){return!!this.option.autoPlay},o.prototype._initData=function(){var n=this.option,a=n.data||[],l=n.axisType,c=this._names=[],u;l==="category"?(u=[],each$f(a,function(f,g){var p=convertOptionIdName(getDataItemValue(f),""),v;isObject$3(f)?(v=clone$4(f),v.value=g):v=g,u.push(v),c.push(p)})):u=a;var d={category:"ordinal",time:"time",value:"number"}[l]||"number",h=this._data=new SeriesData([{name:"value",type:d}],this);h.initData(u,c)},o.prototype.getData=function(){return this._data},o.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},o.type="timeline",o.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},o}(ComponentModel),SliderTimelineModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="timeline.slider",o.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),o}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="timeline",o}(ComponentView),TimelineAxis=function(s){__extends$1(o,s);function o(n,a,l,c){var u=s.call(this,n,a,l)||this;return u.type=c||"value",u}return o.prototype.getLabelModel=function(){return this.model.getModel("label")},o.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},o}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(n,a){this.api=a},o.prototype.render=function(n,a,l){if(this.model=n,this.api=l,this.ecModel=a,this.group.removeAll(),n.get("show",!0)){var c=this._layout(n,l),u=this._createGroup("_mainGroup"),d=this._createGroup("_labelGroup"),h=this._axis=this._createAxis(c,n);n.formatTooltip=function(f){var g=h.scale.getLabel({value:f});return createTooltipMarkup("nameValue",{noName:!0,value:g})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(f){this["_render"+f](c,u,h,n)},this),this._renderAxisLabel(c,d,h,n),this._position(c,n)}this._doPlayStop(),this._updateTicksStatus()},o.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},o.prototype.dispose=function(){this._clearTimer()},o.prototype._layout=function(n,a){var l=n.get(["label","position"]),c=n.get("orient"),u=getViewRect(n,a),d;l==null||l==="auto"?d=c==="horizontal"?u.y+u.height/2<a.getHeight()/2?"-":"+":u.x+u.width/2<a.getWidth()/2?"+":"-":isString$2(l)?d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[c][l]:d=l;var h={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},f={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},g={horizontal:0,vertical:PI/2},p=c==="vertical"?u.height:u.width,v=n.getModel("controlStyle"),b=v.get("show",!0),_=b?v.get("itemSize"):0,w=b?v.get("itemGap"):0,x=_+w,S=n.get(["label","rotate"])||0;S=S*PI/180;var C,T,R,A=v.get("position",!0),M=b&&v.get("showPlayBtn",!0),D=b&&v.get("showPrevBtn",!0),O=b&&v.get("showNextBtn",!0),H=0,j=p;A==="left"||A==="bottom"?(M&&(C=[0,0],H+=x),D&&(T=[H,0],H+=x),O&&(R=[j-_,0],j-=x)):(M&&(C=[j-_,0],j-=x),D&&(T=[0,0],H+=x),O&&(R=[j-_,0],j-=x));var q=[H,j];return n.get("inverse")&&q.reverse(),{viewRect:u,mainLength:p,orient:c,rotation:g[c],labelRotation:S,labelPosOpt:d,labelAlign:n.get(["label","align"])||h[c],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||f[c],playPosition:C,prevBtnPosition:T,nextBtnPosition:R,axisExtent:q,controlSize:_,controlGap:w}},o.prototype._position=function(n,a){var l=this._mainGroup,c=this._labelGroup,u=n.viewRect;if(n.orient==="vertical"){var d=create$1(),h=u.x,f=u.y+u.height;translate(d,d,[-h,-f]),rotate(d,d,-PI/2),translate(d,d,[h,f]),u=u.clone(),u.applyTransform(d)}var g=C(u),p=C(l.getBoundingRect()),v=C(c.getBoundingRect()),b=[l.x,l.y],_=[c.x,c.y];_[0]=b[0]=g[0][0];var w=n.labelPosOpt;if(w==null||isString$2(w)){var x=w==="+"?0:1;T(b,p,g,1,x),T(_,v,g,1,1-x)}else{var x=w>=0?0:1;T(b,p,g,1,x),_[1]=b[1]+w}l.setPosition(b),c.setPosition(_),l.rotation=c.rotation=n.rotation,S(l),S(c);function S(R){R.originX=g[0][0]-R.x,R.originY=g[1][0]-R.y}function C(R){return[[R.x,R.x+R.width],[R.y,R.y+R.height]]}function T(R,A,M,D,O){R[D]+=M[D][O]-A[D][O]}},o.prototype._createAxis=function(n,a){var l=a.getData(),c=a.get("axisType"),u=createScaleByModel(a,c);u.getTicks=function(){return l.mapArray(["value"],function(f){return{value:f}})};var d=l.getDataExtent("value");u.setExtent(d[0],d[1]),u.calcNiceTicks();var h=new TimelineAxis("value",u,n.axisExtent,c);return h.model=a,h},o.prototype._createGroup=function(n){var a=this[n]=new Group$3;return this.group.add(a),a},o.prototype._renderAxisLine=function(n,a,l,c){var u=l.getExtent();if(c.get(["lineStyle","show"])){var d=new Line$1({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:extend({lineCap:"round"},c.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});a.add(d);var h=this._progressLine=new Line$1({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:d.style.lineWidth},c.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});a.add(h)}},o.prototype._renderAxisTick=function(n,a,l,c){var u=this,d=c.getData(),h=l.scale.getTicks();this._tickSymbols=[],each$f(h,function(f){var g=l.dataToCoord(f.value),p=d.getItemModel(f.value),v=p.getModel("itemStyle"),b=p.getModel(["emphasis","itemStyle"]),_=p.getModel(["progress","itemStyle"]),w={x:g,y:0,onclick:bind$1(u._changeTimeline,u,f.value)},x=giveSymbol(p,v,a,w);x.ensureState("emphasis").style=b.getItemStyle(),x.ensureState("progress").style=_.getItemStyle(),enableHoverEmphasis(x);var S=getECData(x);p.get("tooltip")?(S.dataIndex=f.value,S.dataModel=c):S.dataIndex=S.dataModel=null,u._tickSymbols.push(x)})},o.prototype._renderAxisLabel=function(n,a,l,c){var u=this,d=l.getLabelModel();if(d.get("show")){var h=c.getData(),f=l.getViewLabels();this._tickLabels=[],each$f(f,function(g){var p=g.tickValue,v=h.getItemModel(p),b=v.getModel("label"),_=v.getModel(["emphasis","label"]),w=v.getModel(["progress","label"]),x=l.dataToCoord(g.tickValue),S=new ZRText({x,y:0,rotation:n.labelRotation-n.rotation,onclick:bind$1(u._changeTimeline,u,p),silent:!1,style:createTextStyle$1(b,{text:g.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});S.ensureState("emphasis").style=createTextStyle$1(_),S.ensureState("progress").style=createTextStyle$1(w),a.add(S),enableHoverEmphasis(S),labelDataIndexStore(S).dataIndex=p,u._tickLabels.push(S)})}},o.prototype._renderControl=function(n,a,l,c){var u=n.controlSize,d=n.rotation,h=c.getModel("controlStyle").getItemStyle(),f=c.getModel(["emphasis","controlStyle"]).getItemStyle(),g=c.getPlayState(),p=c.get("inverse",!0);v(n.nextBtnPosition,"next",bind$1(this._changeTimeline,this,p?"-":"+")),v(n.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,p?"+":"-")),v(n.playPosition,g?"stop":"play",bind$1(this._handlePlayClick,this,!g),!0);function v(b,_,w,x){if(b){var S=parsePercent$1(retrieve2(c.get(["controlStyle",_+"BtnSize"]),u),u),C=[0,-S/2,S,S],T=makeControlIcon(c,_+"Icon",C,{x:b[0],y:b[1],originX:u/2,originY:0,rotation:x?-d:0,rectHover:!0,style:h,onclick:w});T.ensureState("emphasis").style=f,a.add(T),enableHoverEmphasis(T)}}},o.prototype._renderCurrentPointer=function(n,a,l,c){var u=c.getData(),d=c.getCurrentIndex(),h=u.getItemModel(d).getModel("checkpointStyle"),f=this,g={onCreate:function(p){p.draggable=!0,p.drift=bind$1(f._handlePointerDrag,f),p.ondragend=bind$1(f._handlePointerDragend,f),pointerMoveTo(p,f._progressLine,d,l,c,!0)},onUpdate:function(p){pointerMoveTo(p,f._progressLine,d,l,c)}};this._currentPointer=giveSymbol(h,h,this._mainGroup,{},this._currentPointer,g)},o.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},o.prototype._handlePointerDrag=function(n,a,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},o.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},o.prototype._pointerChangeTimeline=function(n,a){var l=this._toAxisCoord(n)[0],c=this._axis,u=asc$2(c.getExtent().slice());l>u[1]&&(l=u[1]),l<u[0]&&(l=u[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var d=this._progressLine;d&&(d.shape.x2=l,d.dirty());var h=this._findNearestTick(l),f=this.model;(a||h!==f.getCurrentIndex()&&f.get("realtime"))&&this._changeTimeline(h)},o.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var a=n.model;n._changeTimeline(a.getCurrentIndex()+(a.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},o.prototype._toAxisCoord=function(n){var a=this._mainGroup.getLocalTransform();return applyTransform(n,a,!0)},o.prototype._findNearestTick=function(n){var a=this.model.getData(),l=1/0,c,u=this._axis;return a.each(["value"],function(d,h){var f=u.dataToCoord(d),g=Math.abs(f-n);g<l&&(l=g,c=h)}),c},o.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},o.prototype._changeTimeline=function(n){var a=this.model.getCurrentIndex();n==="+"?n=a+1:n==="-"&&(n=a-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},o.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),a=this._tickSymbols,l=this._tickLabels;if(a)for(var c=0;c<a.length;c++)a&&a[c]&&a[c].toggleState("progress",c<n);if(l)for(var c=0;c<l.length;c++)l&&l[c]&&l[c].toggleState("progress",labelDataIndexStore(l[c]).dataIndex<=n)},o.type="timeline.slider",o}(TimelineView);function createScaleByModel(s,o){if(o=o||s.get("type"),o)switch(o){case"category":return new OrdinalScale({ordinalMeta:s.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:s.ecModel.getLocaleModel(),useUTC:s.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(s,o){return getLayoutRect(s.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()},s.get("padding"))}function makeControlIcon(s,o,n,a){var l=a.style,c=createIcon(s.get(["controlStyle",o]),a||{},new BoundingRect(n[0],n[1],n[2],n[3]));return l&&c.setStyle(l),c}function giveSymbol(s,o,n,a,l,c){var u=o.get("color");if(l)l.setColor(u),n.add(l),c&&c.onUpdate(l);else{var d=s.get("symbol");l=createSymbol$1(d,-1,-1,2,2,u),l.setStyle("strokeNoScale",!0),n.add(l),c&&c.onCreate(l)}var h=o.getItemStyle(["color"]);l.setStyle(h),a=merge({rectHover:!0,z2:100},a,!0);var f=normalizeSymbolSize(s.get("symbolSize"));a.scaleX=f[0]/2,a.scaleY=f[1]/2;var g=normalizeSymbolOffset(s.get("symbolOffset"),f);g&&(a.x=(a.x||0)+g[0],a.y=(a.y||0)+g[1]);var p=s.get("symbolRotate");return a.rotation=(p||0)*Math.PI/180||0,l.attr(a),l.updateTransform(),l}function pointerMoveTo(s,o,n,a,l,c){if(!s.dragging){var u=l.getModel("checkpointStyle"),d=a.dataToCoord(l.getData().get("value",n));if(c||!u.get("animation",!0))s.attr({x:d,y:0}),o&&o.attr({shape:{x2:d}});else{var h={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};s.stopAnimation(null,!0),s.animateTo({x:d,y:0},h),o&&o.animateTo({shape:{x2:d}},h)}}}function installTimelineAction(s){s.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(o,n,a){var l=n.getComponent("timeline");return l&&o.currentIndex!=null&&(l.setCurrentIndex(o.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),a.dispatchAction({type:"timelinePlayChange",playState:!1,from:o.from}))),n.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},o)}),s.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(o,n){var a=n.getComponent("timeline");a&&o.playState!=null&&a.setPlayState(o.playState)})}function timelinePreprocessor(s){var o=s&&s.timeline;isArray$1(o)||(o=o?[o]:[]),each$f(o,function(n){n&&compatibleEC2(n)})}function compatibleEC2(s){var o=s.type,n={number:"value",time:"time"};if(n[o]&&(s.axisType=n[o],delete s.type),transferItem(s),has$1(s,"controlPosition")){var a=s.controlStyle||(s.controlStyle={});has$1(a,"position")||(a.position=s.controlPosition),a.position==="none"&&!has$1(a,"show")&&(a.show=!1,delete a.position),delete s.controlPosition}each$f(s.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(s){var o=s.itemStyle||(s.itemStyle={}),n=o.emphasis||(o.emphasis={}),a=s.label||s.label||{},l=a.normal||(a.normal={}),c={normal:1,emphasis:1};each$f(a,function(u,d){!c[d]&&!has$1(l,d)&&(l[d]=u)}),n.label&&!has$1(a,"emphasis")&&(a.emphasis=n.label,delete n.label)}function has$1(s,o){return s.hasOwnProperty(o)}function install$f(s){s.registerComponentModel(SliderTimelineModel),s.registerComponentView(SliderTimelineView),s.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(s),s.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(s,o){if(!s)return!1;for(var n=isArray$1(s)?s:[s],a=0;a<n.length;a++)if(n[a]&&n[a][o])return!0;return!1}function fillLabel(s){defaultEmphasis(s,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.createdBySelf=!1,n}return o.prototype.init=function(n,a,l){if(process.env.NODE_ENV!=="production"&&this.type==="marker")throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(n,l),this._mergeOption(n,l,!1,!0)},o.prototype.isAnimationEnabled=function(){if(env.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},o.prototype.mergeOption=function(n,a){this._mergeOption(n,a,!1,!1)},o.prototype._mergeOption=function(n,a,l,c){var u=this.mainType;l||a.eachSeries(function(d){var h=d.get(this.mainType,!0),f=inner$5(d)[u];if(!h||!h.data){inner$5(d)[u]=null;return}f?f._mergeOption(h,a,!0):(c&&fillLabel(h),each$f(h.data,function(g){g instanceof Array?(fillLabel(g[0]),fillLabel(g[1])):fillLabel(g)}),f=this.createMarkerModelFromSeries(h,this,a),extend(f,{mainType:this.mainType,seriesIndex:d.seriesIndex,name:d.name,createdBySelf:!0}),f.__hostSeries=d),inner$5(d)[u]=f},this)},o.prototype.formatTooltip=function(n,a,l){var c=this.getData(),u=this.getRawValue(n),d=c.getName(n);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:d,value:u,noName:!d,noValue:u==null})]})},o.prototype.getData=function(){return this._data},o.prototype.setData=function(n){this._data=n},o.prototype.getDataParams=function(n,a){var l=DataFormatMixin.prototype.getDataParams.call(this,n,a),c=this.__hostSeries;return c&&(l.seriesId=c.id,l.seriesName=c.name,l.seriesType=c.subType),l},o.getMarkerModelFromSeries=function(n,a){return inner$5(n)[a]},o.type="marker",o.dependencies=["series","grid","polar","geo"],o}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.createMarkerModelFromSeries=function(n,a,l){return new o(n,a,l)},o.type="markPoint",o.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},o}(MarkerModel);function hasXOrY(s){return!(isNaN(parseFloat(s.x))&&isNaN(parseFloat(s.y)))}function hasXAndY(s){return!isNaN(parseFloat(s.x))&&!isNaN(parseFloat(s.y))}function markerTypeCalculatorWithExtent(s,o,n,a,l,c){var u=[],d=isDimensionStacked(o,a),h=d?o.getCalculationInfo("stackResultDimension"):a,f=numCalculate(o,h,s),g=o.indicesOfNearest(h,f)[0];u[l]=o.get(n,g),u[c]=o.get(h,g);var p=o.get(a,g),v=getPrecision(o.get(a,g));return v=Math.min(v,20),v>=0&&(u[c]=+u[c].toFixed(v)),[u,p]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(s,o){if(o){var n=s.getData(),a=s.coordinateSystem,l=a&&a.dimensions;if(!hasXAndY(o)&&!isArray$1(o.coord)&&isArray$1(l)){var c=getAxisInfo(o,n,a,s);if(o=clone$4(o),o.type&&markerTypeCalculator[o.type]&&c.baseAxis&&c.valueAxis){var u=indexOf(l,c.baseAxis.dim),d=indexOf(l,c.valueAxis.dim),h=markerTypeCalculator[o.type](n,c.baseDataDim,c.valueDataDim,u,d);o.coord=h[0],o.value=h[1]}else o.coord=[o.xAxis!=null?o.xAxis:o.radiusAxis,o.yAxis!=null?o.yAxis:o.angleAxis]}if(o.coord==null||!isArray$1(l))o.coord=[];else for(var f=o.coord,g=0;g<2;g++)markerTypeCalculator[f[g]]&&(f[g]=numCalculate(n,n.mapDimension(l[g]),f[g]));return o}}function getAxisInfo(s,o,n,a){var l={};return s.valueIndex!=null||s.valueDim!=null?(l.valueDataDim=s.valueIndex!=null?o.getDimension(s.valueIndex):s.valueDim,l.valueAxis=n.getAxis(dataDimToCoordDim(a,l.valueDataDim)),l.baseAxis=n.getOtherAxis(l.valueAxis),l.baseDataDim=o.mapDimension(l.baseAxis.dim)):(l.baseAxis=a.getBaseAxis(),l.valueAxis=n.getOtherAxis(l.baseAxis),l.baseDataDim=o.mapDimension(l.baseAxis.dim),l.valueDataDim=o.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(s,o){var n=s.getData().getDimensionInfo(o);return n&&n.coordDim}function dataFilter(s,o){return s&&s.containData&&o.coord&&!hasXOrY(o)?s.containData(o.coord):!0}function zoneFilter(s,o,n){return s&&s.containZone&&o.coord&&n.coord&&!hasXOrY(o)&&!hasXOrY(n)?s.containZone(o.coord,n.coord):!0}function createMarkerDimValueGetter(s,o){return s?function(n,a,l,c){var u=c<2?n.coord&&n.coord[c]:n.value;return parseDataValue(u,o[c])}:function(n,a,l,c){return parseDataValue(n.value,o[c])}}function numCalculate(s,o,n){if(n==="average"){var a=0,l=0;return s.each(o,function(c,u){isNaN(c)||(a+=c,l++)}),a/l}else return n==="median"?s.getMedian(o):s.getDataExtent(o)[n==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.init=function(){this.markerGroupMap=createHashMap()},o.prototype.render=function(n,a,l){var c=this,u=this.markerGroupMap;u.each(function(d){inner$4(d).keep=!1}),a.eachSeries(function(d){var h=MarkerModel.getMarkerModelFromSeries(d,c.type);h&&c.renderSeries(d,h,a,l)}),u.each(function(d){!inner$4(d).keep&&c.group.remove(d.group)})},o.prototype.markKeep=function(n){inner$4(n).keep=!0},o.prototype.toggleBlurSeries=function(n,a){var l=this;each$f(n,function(c){var u=MarkerModel.getMarkerModelFromSeries(c,l.type);if(u){var d=u.getData();d.eachItemGraphicEl(function(h){h&&(a?enterBlur(h):leaveBlur(h))})}})},o.type="marker",o}(ComponentView);function updateMarkerLayout(s,o,n){var a=o.coordinateSystem;s.each(function(l){var c=s.getItemModel(l),u,d=parsePercent(c.get("x"),n.getWidth()),h=parsePercent(c.get("y"),n.getHeight());if(!isNaN(d)&&!isNaN(h))u=[d,h];else if(o.getMarkerPosition)u=o.getMarkerPosition(s.getValues(s.dimensions,l));else if(a){var f=s.get(a.dimensions[0],l),g=s.get(a.dimensions[1],l);u=a.dataToPoint([f,g])}isNaN(d)||(u[0]=d),isNaN(h)||(u[1]=h),s.setItemLayout(l,u)})}var MarkPointView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.updateTransform=function(n,a,l){a.eachSeries(function(c){var u=MarkerModel.getMarkerModelFromSeries(c,"markPoint");u&&(updateMarkerLayout(u.getData(),c,l),this.markerGroupMap.get(c.id).updateLayout())},this)},o.prototype.renderSeries=function(n,a,l,c){var u=n.coordinateSystem,d=n.id,h=n.getData(),f=this.markerGroupMap,g=f.get(d)||f.set(d,new SymbolDraw),p=createData(u,n,a);a.setData(p),updateMarkerLayout(a.getData(),n,c),p.each(function(v){var b=p.getItemModel(v),_=b.getShallow("symbol"),w=b.getShallow("symbolSize"),x=b.getShallow("symbolRotate"),S=b.getShallow("symbolOffset"),C=b.getShallow("symbolKeepAspect");if(isFunction$1(_)||isFunction$1(w)||isFunction$1(x)||isFunction$1(S)){var T=a.getRawValue(v),R=a.getDataParams(v);isFunction$1(_)&&(_=_(T,R)),isFunction$1(w)&&(w=w(T,R)),isFunction$1(x)&&(x=x(T,R)),isFunction$1(S)&&(S=S(T,R))}var A=b.getModel("itemStyle").getItemStyle(),M=getVisualFromData(h,"color");A.fill||(A.fill=M),p.setItemVisual(v,{symbol:_,symbolSize:w,symbolRotate:x,symbolOffset:S,symbolKeepAspect:C,style:A})}),g.updateData(p),this.group.add(g.group),p.eachItemGraphicEl(function(v){v.traverse(function(b){getECData(b).dataModel=a})}),this.markKeep(g),g.group.silent=a.get("silent")||n.get("silent")},o.type="markPoint",o}(MarkerView);function createData(s,o,n){var a;s?a=map$1(s&&s.dimensions,function(d){var h=o.getData().getDimensionInfo(o.getData().mapDimension(d))||{};return extend(extend({},h),{name:d,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var l=new SeriesData(a,n),c=map$1(n.get("data"),curry$1(dataTransform,o));s&&(c=filter(c,curry$1(dataFilter,s)));var u=createMarkerDimValueGetter(!!s,a);return l.initData(c,null,u),l}function install$e(s){s.registerComponentModel(MarkPointModel),s.registerComponentView(MarkPointView),s.registerPreprocessor(function(o){checkMarkerInSeries(o.series,"markPoint")&&(o.markPoint=o.markPoint||{})})}var MarkLineModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.createMarkerModelFromSeries=function(n,a,l){return new o(n,a,l)},o.type="markLine",o.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},o}(MarkerModel),inner$3=makeInner(),markLineTransform=function(s,o,n,a){var l=s.getData(),c;if(isArray$1(a))c=a;else{var u=a.type;if(u==="min"||u==="max"||u==="average"||u==="median"||a.xAxis!=null||a.yAxis!=null){var d=void 0,h=void 0;if(a.yAxis!=null||a.xAxis!=null)d=o.getAxis(a.yAxis!=null?"y":"x"),h=retrieve(a.yAxis,a.xAxis);else{var f=getAxisInfo(a,l,o,s);d=f.valueAxis;var g=getStackedDimension(l,f.valueDataDim);h=numCalculate(l,g,u)}var p=d.dim==="x"?0:1,v=1-p,b=clone$4(a),_={coord:[]};b.type=null,b.coord=[],b.coord[v]=-1/0,_.coord[v]=1/0;var w=n.get("precision");w>=0&&isNumber(h)&&(h=+h.toFixed(Math.min(w,20))),b.coord[p]=_.coord[p]=h,c=[b,_,{type:u,valueIndex:a.valueIndex,value:h}]}else process.env.NODE_ENV!=="production"&&logError("Invalid markLine data."),c=[]}var x=[dataTransform(s,c[0]),dataTransform(s,c[1]),extend({},c[2])];return x[2].type=x[2].type||null,merge(x[2],x[0]),merge(x[2],x[1]),x};function isInfinity$1(s){return!isNaN(s)&&!isFinite(s)}function ifMarkLineHasOnlyDim(s,o,n,a){var l=1-s,c=a.dimensions[s];return isInfinity$1(o[l])&&isInfinity$1(n[l])&&o[s]===n[s]&&a.getAxis(c).containData(o[s])}function markLineFilter(s,o){if(s.type==="cartesian2d"){var n=o[0].coord,a=o[1].coord;if(n&&a&&(ifMarkLineHasOnlyDim(1,n,a,s)||ifMarkLineHasOnlyDim(0,n,a,s)))return!0}return dataFilter(s,o[0])&&dataFilter(s,o[1])}function updateSingleMarkerEndLayout(s,o,n,a,l){var c=a.coordinateSystem,u=s.getItemModel(o),d,h=parsePercent(u.get("x"),l.getWidth()),f=parsePercent(u.get("y"),l.getHeight());if(!isNaN(h)&&!isNaN(f))d=[h,f];else{if(a.getMarkerPosition)d=a.getMarkerPosition(s.getValues(s.dimensions,o));else{var g=c.dimensions,p=s.get(g[0],o),v=s.get(g[1],o);d=c.dataToPoint([p,v])}if(isCoordinateSystemType(c,"cartesian2d")){var b=c.getAxis("x"),_=c.getAxis("y"),g=c.dimensions;isInfinity$1(s.get(g[0],o))?d[0]=b.toGlobalCoord(b.getExtent()[n?0:1]):isInfinity$1(s.get(g[1],o))&&(d[1]=_.toGlobalCoord(_.getExtent()[n?0:1]))}isNaN(h)||(d[0]=h),isNaN(f)||(d[1]=f)}s.setItemLayout(o,d)}var MarkLineView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.updateTransform=function(n,a,l){a.eachSeries(function(c){var u=MarkerModel.getMarkerModelFromSeries(c,"markLine");if(u){var d=u.getData(),h=inner$3(u).from,f=inner$3(u).to;h.each(function(g){updateSingleMarkerEndLayout(h,g,!0,c,l),updateSingleMarkerEndLayout(f,g,!1,c,l)}),d.each(function(g){d.setItemLayout(g,[h.getItemLayout(g),f.getItemLayout(g)])}),this.markerGroupMap.get(c.id).updateLayout()}},this)},o.prototype.renderSeries=function(n,a,l,c){var u=n.coordinateSystem,d=n.id,h=n.getData(),f=this.markerGroupMap,g=f.get(d)||f.set(d,new LineDraw);this.group.add(g.group);var p=createList$1(u,n,a),v=p.from,b=p.to,_=p.line;inner$3(a).from=v,inner$3(a).to=b,a.setData(_);var w=a.get("symbol"),x=a.get("symbolSize"),S=a.get("symbolRotate"),C=a.get("symbolOffset");isArray$1(w)||(w=[w,w]),isArray$1(x)||(x=[x,x]),isArray$1(S)||(S=[S,S]),isArray$1(C)||(C=[C,C]),p.from.each(function(R){T(v,R,!0),T(b,R,!1)}),_.each(function(R){var A=_.getItemModel(R).getModel("lineStyle").getLineStyle();_.setItemLayout(R,[v.getItemLayout(R),b.getItemLayout(R)]),A.stroke==null&&(A.stroke=v.getItemVisual(R,"style").fill),_.setItemVisual(R,{fromSymbolKeepAspect:v.getItemVisual(R,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(R,"symbolOffset"),fromSymbolRotate:v.getItemVisual(R,"symbolRotate"),fromSymbolSize:v.getItemVisual(R,"symbolSize"),fromSymbol:v.getItemVisual(R,"symbol"),toSymbolKeepAspect:b.getItemVisual(R,"symbolKeepAspect"),toSymbolOffset:b.getItemVisual(R,"symbolOffset"),toSymbolRotate:b.getItemVisual(R,"symbolRotate"),toSymbolSize:b.getItemVisual(R,"symbolSize"),toSymbol:b.getItemVisual(R,"symbol"),style:A})}),g.updateData(_),p.line.eachItemGraphicEl(function(R){getECData(R).dataModel=a,R.traverse(function(A){getECData(A).dataModel=a})});function T(R,A,M){var D=R.getItemModel(A);updateSingleMarkerEndLayout(R,A,M,n,c);var O=D.getModel("itemStyle").getItemStyle();O.fill==null&&(O.fill=getVisualFromData(h,"color")),R.setItemVisual(A,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:retrieve2(D.get("symbolOffset",!0),C[M?0:1]),symbolRotate:retrieve2(D.get("symbolRotate",!0),S[M?0:1]),symbolSize:retrieve2(D.get("symbolSize"),x[M?0:1]),symbol:retrieve2(D.get("symbol",!0),w[M?0:1]),style:O})}this.markKeep(g),g.group.silent=a.get("silent")||n.get("silent")},o.type="markLine",o}(MarkerView);function createList$1(s,o,n){var a;s?a=map$1(s&&s.dimensions,function(f){var g=o.getData().getDimensionInfo(o.getData().mapDimension(f))||{};return extend(extend({},g),{name:f,ordinalMeta:null})}):a=[{name:"value",type:"float"}];var l=new SeriesData(a,n),c=new SeriesData(a,n),u=new SeriesData([],n),d=map$1(n.get("data"),curry$1(markLineTransform,o,s,n));s&&(d=filter(d,curry$1(markLineFilter,s)));var h=createMarkerDimValueGetter(!!s,a);return l.initData(map$1(d,function(f){return f[0]}),null,h),c.initData(map$1(d,function(f){return f[1]}),null,h),u.initData(map$1(d,function(f){return f[2]})),u.hasItemOption=!0,{from:l,to:c,line:u}}function install$d(s){s.registerComponentModel(MarkLineModel),s.registerComponentView(MarkLineView),s.registerPreprocessor(function(o){checkMarkerInSeries(o.series,"markLine")&&(o.markLine=o.markLine||{})})}var MarkAreaModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.createMarkerModelFromSeries=function(n,a,l){return new o(n,a,l)},o.type="markArea",o.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},o}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(s,o,n,a){var l=a[0],c=a[1];if(!(!l||!c)){var u=dataTransform(s,l),d=dataTransform(s,c),h=u.coord,f=d.coord;h[0]=retrieve(h[0],-1/0),h[1]=retrieve(h[1],-1/0),f[0]=retrieve(f[0],1/0),f[1]=retrieve(f[1],1/0);var g=mergeAll([{},u,d]);return g.coord=[u.coord,d.coord],g.x0=u.x,g.y0=u.y,g.x1=d.x,g.y1=d.y,g}};function isInfinity(s){return!isNaN(s)&&!isFinite(s)}function ifMarkAreaHasOnlyDim(s,o,n,a){var l=1-s;return isInfinity(o[l])&&isInfinity(n[l])}function markAreaFilter(s,o){var n=o.coord[0],a=o.coord[1],l={coord:n,x:o.x0,y:o.y0},c={coord:a,x:o.x1,y:o.y1};return isCoordinateSystemType(s,"cartesian2d")?n&&a&&(ifMarkAreaHasOnlyDim(1,n,a)||ifMarkAreaHasOnlyDim(0,n,a))?!0:zoneFilter(s,l,c):dataFilter(s,l)||dataFilter(s,c)}function getSingleMarkerEndPoint(s,o,n,a,l){var c=a.coordinateSystem,u=s.getItemModel(o),d,h=parsePercent(u.get(n[0]),l.getWidth()),f=parsePercent(u.get(n[1]),l.getHeight());if(!isNaN(h)&&!isNaN(f))d=[h,f];else{if(a.getMarkerPosition){var g=s.getValues(["x0","y0"],o),p=s.getValues(["x1","y1"],o),v=c.clampData(g),b=c.clampData(p),_=[];n[0]==="x0"?_[0]=v[0]>b[0]?p[0]:g[0]:_[0]=v[0]>b[0]?g[0]:p[0],n[1]==="y0"?_[1]=v[1]>b[1]?p[1]:g[1]:_[1]=v[1]>b[1]?g[1]:p[1],d=a.getMarkerPosition(_,n,!0)}else{var w=s.get(n[0],o),x=s.get(n[1],o),S=[w,x];c.clampData&&c.clampData(S,S),d=c.dataToPoint(S,!0)}if(isCoordinateSystemType(c,"cartesian2d")){var C=c.getAxis("x"),T=c.getAxis("y"),w=s.get(n[0],o),x=s.get(n[1],o);isInfinity(w)?d[0]=C.toGlobalCoord(C.getExtent()[n[0]==="x0"?0:1]):isInfinity(x)&&(d[1]=T.toGlobalCoord(T.getExtent()[n[1]==="y0"?0:1]))}isNaN(h)||(d[0]=h),isNaN(f)||(d[1]=f)}return d}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.updateTransform=function(n,a,l){a.eachSeries(function(c){var u=MarkerModel.getMarkerModelFromSeries(c,"markArea");if(u){var d=u.getData();d.each(function(h){var f=map$1(dimPermutations,function(p){return getSingleMarkerEndPoint(d,h,p,c,l)});d.setItemLayout(h,f);var g=d.getItemGraphicEl(h);g.setShape("points",f)})}},this)},o.prototype.renderSeries=function(n,a,l,c){var u=n.coordinateSystem,d=n.id,h=n.getData(),f=this.markerGroupMap,g=f.get(d)||f.set(d,{group:new Group$3});this.group.add(g.group),this.markKeep(g);var p=createList(u,n,a);a.setData(p),p.each(function(v){var b=map$1(dimPermutations,function(O){return getSingleMarkerEndPoint(p,v,O,n,c)}),_=u.getAxis("x").scale,w=u.getAxis("y").scale,x=_.getExtent(),S=w.getExtent(),C=[_.parse(p.get("x0",v)),_.parse(p.get("x1",v))],T=[w.parse(p.get("y0",v)),w.parse(p.get("y1",v))];asc$2(C),asc$2(T);var R=!(x[0]>C[1]||x[1]<C[0]||S[0]>T[1]||S[1]<T[0]),A=!R;p.setItemLayout(v,{points:b,allClipped:A});var M=p.getItemModel(v).getModel("itemStyle").getItemStyle(),D=getVisualFromData(h,"color");M.fill||(M.fill=D,isString$2(M.fill)&&(M.fill=modifyAlpha(M.fill,.4))),M.stroke||(M.stroke=D),p.setItemVisual(v,"style",M)}),p.diff(inner$2(g).data).add(function(v){var b=p.getItemLayout(v);if(!b.allClipped){var _=new Polygon({shape:{points:b.points}});p.setItemGraphicEl(v,_),g.group.add(_)}}).update(function(v,b){var _=inner$2(g).data.getItemGraphicEl(b),w=p.getItemLayout(v);w.allClipped?_&&g.group.remove(_):(_?updateProps$1(_,{shape:{points:w.points}},a,v):_=new Polygon({shape:{points:w.points}}),p.setItemGraphicEl(v,_),g.group.add(_))}).remove(function(v){var b=inner$2(g).data.getItemGraphicEl(v);g.group.remove(b)}).execute(),p.eachItemGraphicEl(function(v,b){var _=p.getItemModel(b),w=p.getItemVisual(b,"style");v.useStyle(p.getItemVisual(b,"style")),setLabelStyle(v,getLabelStatesModels(_),{labelFetcher:a,labelDataIndex:b,defaultText:p.getName(b)||"",inheritColor:isString$2(w.fill)?modifyAlpha(w.fill,1):"#000"}),setStatesStylesFromModel(v,_),toggleHoverEmphasis(v,null,null,_.get(["emphasis","disabled"])),getECData(v).dataModel=a}),inner$2(g).data=p,g.group.silent=a.get("silent")||n.get("silent")},o.type="markArea",o}(MarkerView);function createList(s,o,n){var a,l,c=["x0","y0","x1","y1"];if(s){var u=map$1(s&&s.dimensions,function(f){var g=o.getData(),p=g.getDimensionInfo(g.mapDimension(f))||{};return extend(extend({},p),{name:f,ordinalMeta:null})});l=map$1(c,function(f,g){return{name:f,type:u[g%2].type}}),a=new SeriesData(l,n)}else l=[{name:"value",type:"float"}],a=new SeriesData(l,n);var d=map$1(n.get("data"),curry$1(markAreaTransform,o,s,n));s&&(d=filter(d,curry$1(markAreaFilter,s)));var h=s?function(f,g,p,v){var b=f.coord[Math.floor(v/2)][v%2];return parseDataValue(b,l[v])}:function(f,g,p,v){return parseDataValue(f.value,l[v])};return a.initData(d,null,h),a.hasItemOption=!0,a}function install$c(s){s.registerComponentModel(MarkAreaModel),s.registerComponentView(MarkAreaView),s.registerPreprocessor(function(o){checkMarkerInSeries(o.series,"markArea")&&(o.markArea=o.markArea||{})})}var getDefaultSelectorOptions=function(s,o){if(o==="all")return{type:"all",title:s.getLocaleModel().get(["legend","selector","all"])};if(o==="inverse")return{type:"inverse",title:s.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.layoutMode={type:"box",ignoreSize:!0},n}return o.prototype.init=function(n,a,l){this.mergeDefaultAndTheme(n,l),n.selected=n.selected||{},this._updateSelector(n)},o.prototype.mergeOption=function(n,a){s.prototype.mergeOption.call(this,n,a),this._updateSelector(n)},o.prototype._updateSelector=function(n){var a=n.selector,l=this.ecModel;a===!0&&(a=n.selector=["all","inverse"]),isArray$1(a)&&each$f(a,function(c,u){isString$2(c)&&(c={type:c}),a[u]=merge(c,getDefaultSelectorOptions(l,c.type))})},o.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var a=!1,l=0;l<n.length;l++){var c=n[l].get("name");if(this.isSelected(c)){this.select(c),a=!0;break}}!a&&this.select(n[0].get("name"))}},o.prototype._updateData=function(n){var a=[],l=[];n.eachRawSeries(function(h){var f=h.name;l.push(f);var g;if(h.legendVisualProvider){var p=h.legendVisualProvider,v=p.getAllNames();n.isSeriesFiltered(h)||(l=l.concat(v)),v.length?a=a.concat(v):g=!0}else g=!0;g&&isNameSpecified(h)&&a.push(h.name)}),this._availableNames=l;var c=this.get("data")||a,u=createHashMap(),d=map$1(c,function(h){return(isString$2(h)||isNumber(h))&&(h={name:h}),u.get(h.name)?null:(u.set(h.name,!0),new Model(h,this,this.ecModel))},this);this._data=filter(d,function(h){return!!h})},o.prototype.getData=function(){return this._data},o.prototype.select=function(n){var a=this.option.selected,l=this.get("selectedMode");if(l==="single"){var c=this._data;each$f(c,function(u){a[u.get("name")]=!1})}a[n]=!0},o.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},o.prototype.toggleSelected=function(n){var a=this.option.selected;a.hasOwnProperty(n)||(a[n]=!0),this[a[n]?"unSelect":"select"](n)},o.prototype.allSelect=function(){var n=this._data,a=this.option.selected;each$f(n,function(l){a[l.get("name",!0)]=!0})},o.prototype.inverseSelect=function(){var n=this._data,a=this.option.selected;each$f(n,function(l){var c=l.get("name",!0);a.hasOwnProperty(c)||(a[c]=!0),a[c]=!a[c]})},o.prototype.isSelected=function(n){var a=this.option.selected;return!(a.hasOwnProperty(n)&&!a[n])&&indexOf(this._availableNames,n)>=0},o.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},o.type="legend.plain",o.dependencies=["series"],o.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},o}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.newlineDisabled=!1,n}return o.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},o.prototype.getContentGroup=function(){return this._contentGroup},o.prototype.getSelectorGroup=function(){return this._selectorGroup},o.prototype.render=function(n,a,l){var c=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var u=n.get("align"),d=n.get("orient");(!u||u==="auto")&&(u=n.get("left")==="right"&&d==="vertical"?"right":"left");var h=n.get("selector",!0),f=n.get("selectorPosition",!0);h&&(!f||f==="auto")&&(f=d==="horizontal"?"end":"start"),this.renderInner(u,n,a,l,h,d,f);var g=n.getBoxLayoutParams(),p={width:l.getWidth(),height:l.getHeight()},v=n.get("padding"),b=getLayoutRect(g,p,v),_=this.layoutInner(n,u,b,c,h,f),w=getLayoutRect(defaults({width:_.width,height:_.height},g),p,v);this.group.x=w.x-_.x,this.group.y=w.y-_.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(_,n))}},o.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},o.prototype.renderInner=function(n,a,l,c,u,d,h){var f=this.getContentGroup(),g=createHashMap(),p=a.get("selectedMode"),v=[];l.eachRawSeries(function(b){!b.get("legendHoverLink")&&v.push(b.id)}),each$3(a.getData(),function(b,_){var w=b.get("name");if(!this.newlineDisabled&&(w===""||w===`
`)){var x=new Group$1;x.newline=!0,f.add(x);return}var S=l.getSeriesByName(w)[0];if(!g.get(w)){if(S){var C=S.getData(),T=C.getVisual("legendLineStyle")||{},R=C.getVisual("legendIcon"),A=C.getVisual("style"),M=this._createItem(S,w,_,b,a,n,T,A,R,p,c);M.on("click",curry(dispatchSelectAction,w,null,c,v)).on("mouseover",curry(dispatchHighlightAction,S.name,null,c,v)).on("mouseout",curry(dispatchDownplayAction,S.name,null,c,v)),l.ssr&&M.eachChild(function(D){var O=getECData(D);O.seriesIndex=S.seriesIndex,O.dataIndex=_,O.ssrType="legend"}),g.set(w,!0)}else l.eachRawSeries(function(D){if(!g.get(w)&&D.legendVisualProvider){var O=D.legendVisualProvider;if(!O.containName(w))return;var H=O.indexOfName(w),j=O.getItemVisual(H,"style"),q=O.getItemVisual(H,"legendIcon"),Y=parse(j.fill);Y&&Y[3]===0&&(Y[3]=.2,j=extend(extend({},j),{fill:stringify(Y,"rgba")}));var ee=this._createItem(D,w,_,b,a,n,{},j,q,p,c);ee.on("click",curry(dispatchSelectAction,null,w,c,v)).on("mouseover",curry(dispatchHighlightAction,null,w,c,v)).on("mouseout",curry(dispatchDownplayAction,null,w,c,v)),l.ssr&&ee.eachChild(function(te){var re=getECData(te);re.seriesIndex=D.seriesIndex,re.dataIndex=_,re.ssrType="legend"}),g.set(w,!0)}},this);process.env.NODE_ENV!=="production"&&(g.get(w)||console.warn(w+" series not exists. Legend data should be same with series name or data name."))}},this),u&&this._createSelector(u,a,c,d,h)},o.prototype._createSelector=function(n,a,l,c,u){var d=this.getSelectorGroup();each$3(n,function(f){var g=f.type,p=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:g==="all"?"legendAllSelect":"legendInverseSelect",legendId:a.id})}});d.add(p);var v=a.getModel("selectorLabel"),b=a.getModel(["emphasis","selectorLabel"]);setLabelStyle(p,{normal:v,emphasis:b},{defaultText:f.title}),enableHoverEmphasis(p)})},o.prototype._createItem=function(n,a,l,c,u,d,h,f,g,p,v){var b=n.visualDrawType,_=u.get("itemWidth"),w=u.get("itemHeight"),x=u.isSelected(a),S=c.get("symbolRotate"),C=c.get("symbolKeepAspect"),T=c.get("icon");g=T||g||"roundRect";var R=getLegendStyle(g,c,h,f,b,x,v),A=new Group$1,M=c.getModel("textStyle");if(isFunction$1(n.getLegendIcon)&&(!T||T==="inherit"))A.add(n.getLegendIcon({itemWidth:_,itemHeight:w,icon:g,iconRotate:S,itemStyle:R.itemStyle,lineStyle:R.lineStyle,symbolKeepAspect:C}));else{var D=T==="inherit"&&n.getData().getVisual("symbol")?S==="inherit"?n.getData().getVisual("symbolRotate"):S:0;A.add(getDefaultLegendIcon({itemWidth:_,itemHeight:w,icon:g,iconRotate:D,itemStyle:R.itemStyle,symbolKeepAspect:C}))}var O=d==="left"?_+5:-5,H=d,j=u.get("formatter"),q=a;isString$2(j)&&j?q=j.replace("{name}",a??""):isFunction$1(j)&&(q=j(a));var Y=x?M.getTextColor():c.get("inactiveColor");A.add(new ZRText({style:createTextStyle$1(M,{text:q,x:O,y:w/2,fill:Y,align:H,verticalAlign:"middle"},{inheritColor:Y})}));var ee=new Rect$2({shape:A.getBoundingRect(),style:{fill:"transparent"}}),te=c.getModel("tooltip");return te.get("show")&&setTooltipConfig({el:ee,componentModel:u,itemName:a,itemTooltipOption:te.option}),A.add(ee),A.eachChild(function(re){re.silent=!0}),ee.silent=!p,this.getContentGroup().add(A),enableHoverEmphasis(A),A.__legendDataIndex=l,A},o.prototype.layoutInner=function(n,a,l,c,u,d){var h=this.getContentGroup(),f=this.getSelectorGroup();box(n.get("orient"),h,n.get("itemGap"),l.width,l.height);var g=h.getBoundingRect(),p=[-g.x,-g.y];if(f.markRedraw(),h.markRedraw(),u){box("horizontal",f,n.get("selectorItemGap",!0));var v=f.getBoundingRect(),b=[-v.x,-v.y],_=n.get("selectorButtonGap",!0),w=n.getOrient().index,x=w===0?"width":"height",S=w===0?"height":"width",C=w===0?"y":"x";d==="end"?b[w]+=g[x]+_:p[w]+=v[x]+_,b[1-w]+=g[S]/2-v[S]/2,f.x=b[0],f.y=b[1],h.x=p[0],h.y=p[1];var T={x:0,y:0};return T[x]=g[x]+_+v[x],T[S]=Math.max(g[S],v[S]),T[C]=Math.min(0,v[C]+b[1-w]),T}else return h.x=p[0],h.y=p[1],this.group.getBoundingRect()},o.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},o.type="legend.plain",o}(ComponentView);function getLegendStyle(s,o,n,a,l,c,u){function d(x,S){x.lineWidth==="auto"&&(x.lineWidth=S.lineWidth>0?2:0),each$3(x,function(C,T){x[T]==="inherit"&&(x[T]=S[T])})}var h=o.getModel("itemStyle"),f=h.getItemStyle(),g=s.lastIndexOf("empty",0)===0?"fill":"stroke",p=h.getShallow("decal");f.decal=!p||p==="inherit"?a.decal:createOrUpdatePatternFromDecal(p,u),f.fill==="inherit"&&(f.fill=a[l]),f.stroke==="inherit"&&(f.stroke=a[g]),f.opacity==="inherit"&&(f.opacity=(l==="fill"?a:n).opacity),d(f,a);var v=o.getModel("lineStyle"),b=v.getLineStyle();if(d(b,n),f.fill==="auto"&&(f.fill=a.fill),f.stroke==="auto"&&(f.stroke=a.fill),b.stroke==="auto"&&(b.stroke=a.fill),!c){var _=o.get("inactiveBorderWidth"),w=f[g];f.lineWidth=_==="auto"?a.lineWidth>0&&w?2:0:f.lineWidth,f.fill=o.get("inactiveColor"),f.stroke=o.get("inactiveBorderColor"),b.stroke=v.get("inactiveColor"),b.lineWidth=v.get("inactiveWidth")}return{itemStyle:f,lineStyle:b}}function getDefaultLegendIcon(s){var o=s.icon||"roundRect",n=createSymbol$1(o,0,0,s.itemWidth,s.itemHeight,s.itemStyle.fill,s.symbolKeepAspect);return n.setStyle(s.itemStyle),n.rotation=(s.iconRotate||0)*Math.PI/180,n.setOrigin([s.itemWidth/2,s.itemHeight/2]),o.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function dispatchSelectAction(s,o,n,a){dispatchDownplayAction(s,o,n,a),n.dispatchAction({type:"legendToggleSelect",name:s??o}),dispatchHighlightAction(s,o,n,a)}function isUseHoverLayer(s){for(var o=s.getZr().storage.getDisplayList(),n,a=0,l=o.length;a<l&&!(n=o[a].states.emphasis);)a++;return n&&n.hoverLayer}function dispatchHighlightAction(s,o,n,a){isUseHoverLayer(n)||n.dispatchAction({type:"highlight",seriesName:s,name:o,excludeSeriesId:a})}function dispatchDownplayAction(s,o,n,a){isUseHoverLayer(n)||n.dispatchAction({type:"downplay",seriesName:s,name:o,excludeSeriesId:a})}function legendFilter(s){var o=s.findComponents({mainType:"legend"});o&&o.length&&s.filterSeries(function(n){for(var a=0;a<o.length;a++)if(!o[a].isSelected(n.name))return!1;return!0})}function legendSelectActionHandler(s,o,n){var a=s==="allSelect"||s==="inverseSelect",l={},c=[];n.eachComponent({mainType:"legend",query:o},function(d){a?d[s]():d[s](o.name),makeSelectedMap(d,l),c.push(d.componentIndex)});var u={};return n.eachComponent("legend",function(d){each$f(l,function(h,f){d[h?"select":"unSelect"](f)}),makeSelectedMap(d,u)}),a?{selected:u,legendIndex:c}:{name:o.name,selected:u}}function makeSelectedMap(s,o){var n=o||{};return each$f(s.getData(),function(a){var l=a.get("name");if(!(l===`
`||l==="")){var c=s.isSelected(l);hasOwn(n,l)?n[l]=n[l]&&c:n[l]=c}}),n}function installLegendAction(s){s.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),s.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),s.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),s.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),s.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(s){s.registerComponentModel(LegendModel),s.registerComponentView(LegendView),s.registerProcessor(s.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),s.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(s)}var ScrollableLegendModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},o.prototype.init=function(n,a,l){var c=getLayoutParams(n);s.prototype.init.call(this,n,a,l),mergeAndNormalizeLayoutParams(this,n,c)},o.prototype.mergeOption=function(n,a){s.prototype.mergeOption.call(this,n,a),mergeAndNormalizeLayoutParams(this,this.option,n)},o.type="legend.scroll",o.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),o}(LegendModel);function mergeAndNormalizeLayoutParams(s,o,n){var a=s.getOrient(),l=[1,1];l[a.index]=0,mergeLayoutParam(o,n,{type:"box",ignoreSize:!!l})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.newlineDisabled=!0,n._currentIndex=0,n}return o.prototype.init=function(){s.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},o.prototype.resetInner=function(){s.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},o.prototype.renderInner=function(n,a,l,c,u,d,h){var f=this;s.prototype.renderInner.call(this,n,a,l,c,u,d,h);var g=this._controllerGroup,p=a.get("pageIconSize",!0),v=isArray$1(p)?p:[p,p];_("pagePrev",0);var b=a.getModel("pageTextStyle");g.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:b.getTextColor(),font:b.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),_("pageNext",1);function _(w,x){var S=w+"DataIndex",C=createIcon(a.get("pageIcons",!0)[a.getOrient().name][x],{onclick:bind$1(f._pageGo,f,S,a,c)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});C.name=w,g.add(C)}},o.prototype.layoutInner=function(n,a,l,c,u,d){var h=this.getSelectorGroup(),f=n.getOrient().index,g=WH[f],p=XY[f],v=WH[1-f],b=XY[1-f];u&&box("horizontal",h,n.get("selectorItemGap",!0));var _=n.get("selectorButtonGap",!0),w=h.getBoundingRect(),x=[-w.x,-w.y],S=clone$4(l);u&&(S[g]=l[g]-w[g]-_);var C=this._layoutContentAndController(n,c,S,f,g,v,b,p);if(u){if(d==="end")x[f]+=C[g]+_;else{var T=w[g]+_;x[f]-=T,C[p]-=T}C[g]+=w[g]+_,x[1-f]+=C[b]+C[v]/2-w[v]/2,C[v]=Math.max(C[v],w[v]),C[b]=Math.min(C[b],w[b]+x[1-f]),h.x=x[0],h.y=x[1],h.markRedraw()}return C},o.prototype._layoutContentAndController=function(n,a,l,c,u,d,h,f){var g=this.getContentGroup(),p=this._containerGroup,v=this._controllerGroup;box(n.get("orient"),g,n.get("itemGap"),c?l.width:null,c?null:l.height),box("horizontal",v,n.get("pageButtonItemGap",!0));var b=g.getBoundingRect(),_=v.getBoundingRect(),w=this._showController=b[u]>l[u],x=[-b.x,-b.y];a||(x[c]=g[f]);var S=[0,0],C=[-_.x,-_.y],T=retrieve2(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(w){var R=n.get("pageButtonPosition",!0);R==="end"?C[c]+=l[u]-_[u]:S[c]+=_[u]+T}C[1-c]+=b[d]/2-_[d]/2,g.setPosition(x),p.setPosition(S),v.setPosition(C);var A={x:0,y:0};if(A[u]=w?l[u]:b[u],A[d]=Math.max(b[d],_[d]),A[h]=Math.min(0,_[h]+C[1-c]),p.__rectSize=l[u],w){var M={x:0,y:0};M[u]=Math.max(l[u]-_[u]-T,0),M[d]=A[d],p.setClipPath(new Rect$2({shape:M})),p.__rectSize=M[u]}else v.eachChild(function(O){O.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(n);return D.pageIndex!=null&&updateProps$1(g,{x:D.contentPosition[0],y:D.contentPosition[1]},w?n:null),this._updatePageInfoView(n,D),A},o.prototype._pageGo=function(n,a,l){var c=this._getPageInfo(a)[n];c!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:c,legendId:a.id})},o.prototype._updatePageInfoView=function(n,a){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(g){var p=g+"DataIndex",v=a[p]!=null,b=l.childOfName(g);b&&(b.setStyle("fill",v?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),b.cursor=v?"pointer":"default")});var c=l.childOfName("pageText"),u=n.get("pageFormatter"),d=a.pageIndex,h=d!=null?d+1:0,f=a.pageCount;c&&u&&c.setStyle("text",isString$2(u)?u.replace("{current}",h==null?"":h+"").replace("{total}",f==null?"":f+""):u({current:h,total:f}))},o.prototype._getPageInfo=function(n){var a=n.get("scrollDataIndex",!0),l=this.getContentGroup(),c=this._containerGroup.__rectSize,u=n.getOrient().index,d=WH[u],h=XY[u],f=this._findTargetItemIndex(a),g=l.children(),p=g[f],v=g.length,b=v?1:0,_={contentPosition:[l.x,l.y],pageCount:b,pageIndex:b-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!p)return _;var w=R(p);_.contentPosition[u]=-w.s;for(var x=f+1,S=w,C=w,T=null;x<=v;++x)T=R(g[x]),(!T&&C.e>S.s+c||T&&!A(T,S.s))&&(C.i>S.i?S=C:S=T,S&&(_.pageNextDataIndex==null&&(_.pageNextDataIndex=S.i),++_.pageCount)),C=T;for(var x=f-1,S=w,C=w,T=null;x>=-1;--x)T=R(g[x]),(!T||!A(C,T.s))&&S.i<C.i&&(C=S,_.pagePrevDataIndex==null&&(_.pagePrevDataIndex=S.i),++_.pageCount,++_.pageIndex),S=T;return _;function R(M){if(M){var D=M.getBoundingRect(),O=D[h]+M[h];return{s:O,e:O+D[d],i:M.__legendDataIndex}}}function A(M,D){return M.e>=D&&M.s<=D+c}},o.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var a,l=this.getContentGroup(),c;return l.eachChild(function(u,d){var h=u.__legendDataIndex;c==null&&h!=null&&(c=d),h===n&&(a=d)}),a??c},o.type="legend.scroll",o}(LegendView);function installScrollableLegendAction(s){s.registerAction("legendScroll","legendscroll",function(o,n){var a=o.scrollDataIndex;a!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:o},function(l){l.setScrollDataIndex(a)})})}function install$a(s){use(install$b),s.registerComponentModel(ScrollableLegendModel),s.registerComponentView(ScrollableLegendView),installScrollableLegendAction(s)}function install$9(s){use(install$b),use(install$a)}var InsideZoomModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="dataZoom.inside",o.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),o}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(s,o,n){inner$1(s).coordSysRecordMap.each(function(a){var l=a.dataZoomInfoMap.get(o.uid);l&&(l.getRange=n)})}function disposeCoordSysRecordIfNeeded(s,o){for(var n=inner$1(s).coordSysRecordMap,a=n.keys(),l=0;l<a.length;l++){var c=a[l],u=n.get(c),d=u.dataZoomInfoMap;if(d){var h=o.uid,f=d.get(h);f&&(d.removeKey(h),d.keys().length||disposeCoordSysRecord(n,u))}}}function disposeCoordSysRecord(s,o){if(o){s.removeKey(o.model.uid);var n=o.controller;n&&n.dispose()}}function createCoordSysRecord(s,o){var n={model:o,containsPoint:curry$1(containsPoint,o),dispatchAction:curry$1(dispatchAction,s),dataZoomInfoMap:null,controller:null},a=n.controller=new RoamController(s.getZr());return each$f(["pan","zoom","scrollMove"],function(l){a.on(l,function(c){var u=[];n.dataZoomInfoMap.each(function(d){if(c.isAvailableBehavior(d.model.option)){var h=(d.getRange||{})[l],f=h&&h(d.dzReferCoordSysInfo,n.model.mainType,n.controller,c);!d.model.get("disabled",!0)&&f&&u.push({dataZoomId:d.model.id,start:f[0],end:f[1]})}}),u.length&&n.dispatchAction(u)})}),n}function dispatchAction(s,o){s.isDisposed()||s.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:o})}function containsPoint(s,o,n,a){return s.coordinateSystem.containPoint([n,a])}function mergeControllerParams(s){var o,n="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return s.each(function(c){var u=c.model,d=u.get("disabled",!0)?!1:u.get("zoomLock",!0)?"move":!0;a[n+d]>a[n+o]&&(o=d),l=l&&u.get("preventDefaultMouseMove",!0)}),{controlType:o,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(s){s.registerProcessor(s.PRIORITY.PROCESSOR.FILTER,function(o,n){var a=inner$1(n),l=a.coordSysRecordMap||(a.coordSysRecordMap=createHashMap());l.each(function(c){c.dataZoomInfoMap=null}),o.eachComponent({mainType:"dataZoom",subType:"inside"},function(c){var u=collectReferCoordSysModelInfo(c);each$f(u.infoList,function(d){var h=d.model.uid,f=l.get(h)||l.set(h,createCoordSysRecord(n,d.model)),g=f.dataZoomInfoMap||(f.dataZoomInfoMap=createHashMap());g.set(c.uid,{dzReferCoordSysInfo:d,model:c,getRange:null})})}),l.each(function(c){var u=c.controller,d,h=c.dataZoomInfoMap;if(h){var f=h.keys()[0];f!=null&&(d=h.get(f))}if(!d){disposeCoordSysRecord(l,c);return}var g=mergeControllerParams(h);u.enable(g.controlType,g.opt),u.setPointerChecker(c.containsPoint),createOrUpdate(c,"dispatchAction",d.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return o.prototype.render=function(n,a,l){if(s.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),setViewInfoToCoordSysRecord(l,n,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},o.prototype.dispose=function(){this._clear(),s.prototype.dispose.apply(this,arguments)},o.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},o.type="dataZoom.inside",o}(DataZoomView),getRangeHandlers={zoom:function(s,o,n,a){var l=this.range,c=l.slice(),u=s.axisModels[0];if(u){var d=getDirectionInfo[o](null,[a.originX,a.originY],u,n,s),h=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(c[1]-c[0])+c[0],f=Math.max(1/a.scale,0);c[0]=(c[0]-h)*f+h,c[1]=(c[1]-h)*f+h;var g=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,c,[0,100],0,g.minSpan,g.maxSpan),this.range=c,l[0]!==c[0]||l[1]!==c[1])return c}},pan:makeMover(function(s,o,n,a,l,c){var u=getDirectionInfo[a]([c.oldX,c.oldY],[c.newX,c.newY],o,l,n);return u.signal*(s[1]-s[0])*u.pixel/u.pixelLength}),scrollMove:makeMover(function(s,o,n,a,l,c){var u=getDirectionInfo[a]([0,0],[c.scrollDelta,c.scrollDelta],o,l,n);return u.signal*(s[1]-s[0])*c.scrollDelta})};function makeMover(s){return function(o,n,a,l){var c=this.range,u=c.slice(),d=o.axisModels[0];if(d){var h=s(u,d,o,n,a,l);if(sliderMove(h,u,[0,100],"all"),this.range=u,c[0]!==u[0]||c[1]!==u[1])return u}}}var getDirectionInfo={grid:function(s,o,n,a,l){var c=n.axis,u={},d=l.model.coordinateSystem.getRect();return s=s||[0,0],c.dim==="x"?(u.pixel=o[0]-s[0],u.pixelLength=d.width,u.pixelStart=d.x,u.signal=c.inverse?1:-1):(u.pixel=o[1]-s[1],u.pixelLength=d.height,u.pixelStart=d.y,u.signal=c.inverse?-1:1),u},polar:function(s,o,n,a,l){var c=n.axis,u={},d=l.model.coordinateSystem,h=d.getRadiusAxis().getExtent(),f=d.getAngleAxis().getExtent();return s=s?d.pointToCoord(s):[0,0],o=d.pointToCoord(o),n.mainType==="radiusAxis"?(u.pixel=o[0]-s[0],u.pixelLength=h[1]-h[0],u.pixelStart=h[0],u.signal=c.inverse?1:-1):(u.pixel=o[1]-s[1],u.pixelLength=f[1]-f[0],u.pixelStart=f[0],u.signal=c.inverse?-1:1),u},singleAxis:function(s,o,n,a,l){var c=n.axis,u=l.model.coordinateSystem.getRect(),d={};return s=s||[0,0],c.orient==="horizontal"?(d.pixel=o[0]-s[0],d.pixelLength=u.width,d.pixelStart=u.x,d.signal=c.inverse?1:-1):(d.pixel=o[1]-s[1],d.pixelLength=u.height,d.pixelStart=u.y,d.signal=c.inverse?-1:1),d}};function install$8(s){installCommon$1(s),s.registerComponentModel(InsideZoomModel),s.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(s)}var SliderZoomModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.type="dataZoom.slider",o.layoutMode="box",o.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),o}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._displayables={},n}return o.prototype.init=function(n,a){this.api=a,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},o.prototype.render=function(n,a,l,c){if(s.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!c||c.type!=="dataZoom"||c.from!==this.uid)&&this._buildView(),this._updateView()},o.prototype.dispose=function(){this._clear(),s.prototype.dispose.apply(this,arguments)},o.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},o.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var a=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(a),this._positionGroup()},o.prototype._resetLocation=function(){var n=this.dataZoomModel,a=this.api,l=n.get("brushSelect"),c=l?DEFAULT_MOVE_HANDLE_SIZE:0,u=this._findCoordRect(),d={width:a.getWidth(),height:a.getHeight()},h=this._orient===HORIZONTAL?{right:d.width-u.x-u.width,top:d.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-c,width:u.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:u.y,width:DEFAULT_FILLER_SIZE,height:u.height},f=getLayoutParams(n.option);each$f(["right","top","width","height"],function(p){f[p]==="ph"&&(f[p]=h[p])});var g=getLayoutRect(f,d);this._location={x:g.x,y:g.y},this._size=[g.width,g.height],this._orient===VERTICAL&&this._size.reverse()},o.prototype._positionGroup=function(){var n=this.group,a=this._location,l=this._orient,c=this.dataZoomModel.getFirstTargetAxisModel(),u=c&&c.get("inverse"),d=this._displayables.sliderGroup,h=(this._dataShadowInfo||{}).otherAxisInverse;d.attr(l===HORIZONTAL&&!u?{scaleY:h?1:-1,scaleX:1}:l===HORIZONTAL&&u?{scaleY:h?1:-1,scaleX:-1}:l===VERTICAL&&!u?{scaleY:h?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:h?-1:1,scaleX:-1,rotation:Math.PI/2});var f=n.getBoundingRect([d]);n.x=a.x-f.x,n.y=a.y-f.y,n.markRedraw()},o.prototype._getViewExtent=function(){return[0,this._size[0]]},o.prototype._renderBackground=function(){var n=this.dataZoomModel,a=this._size,l=this._displayables.sliderGroup,c=n.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var u=new Rect({shape:{x:0,y:0,width:a[0],height:a[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),d=this.api.getZr();c?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",d.on("mousemove",this._onBrush),d.on("mouseup",this._onBrushEnd)):(d.off("mousemove",this._onBrush),d.off("mouseup",this._onBrushEnd)),l.add(u)},o.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var a=this._size,l=this._shadowSize||[],c=n.series,u=c.getRawData(),d=c.getShadowDim&&c.getShadowDim(),h=d&&u.getDimensionInfo(d)?c.getShadowDim():n.otherDim;if(h==null)return;var f=this._shadowPolygonPts,g=this._shadowPolylinePts;if(u!==this._shadowData||h!==this._shadowDim||a[0]!==l[0]||a[1]!==l[1]){var p=u.getDataExtent(h),v=(p[1]-p[0])*.3;p=[p[0]-v,p[1]+v];var b=[0,a[1]],_=[0,a[0]],w=[[a[0],0],[0,0]],x=[],S=_[1]/(u.count()-1),C=0,T=Math.round(u.count()/a[0]),R;u.each([h],function(H,j){if(T>0&&j%T){C+=S;return}var q=H==null||isNaN(H)||H==="",Y=q?0:linearMap$2(H,p,b,!0);q&&!R&&j?(w.push([w[w.length-1][0],0]),x.push([x[x.length-1][0],0])):!q&&R&&(w.push([C,0]),x.push([C,0])),w.push([C,Y]),x.push([C,Y]),C+=S,R=q}),f=this._shadowPolygonPts=w,g=this._shadowPolylinePts=x}this._shadowData=u,this._shadowDim=h,this._shadowSize=[a[0],a[1]];var A=this.dataZoomModel;function M(H){var j=A.getModel(H?"selectedDataBackground":"dataBackground"),q=new Group$3,Y=new Polygon({shape:{points:f},segmentIgnoreThreshold:1,style:j.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ee=new Polyline$1({shape:{points:g},segmentIgnoreThreshold:1,style:j.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return q.add(Y),q.add(ee),q}for(var D=0;D<3;D++){var O=M(D===1);this._displayables.sliderGroup.add(O),this._displayables.dataShadowSegs.push(O)}},o.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,a=n.get("showDataShadow");if(a!==!1){var l,c=this.ecModel;return n.eachTargetAxis(function(u,d){var h=n.getAxisProxy(u,d).getTargetSeriesModels();each$f(h,function(f){if(!l&&!(a!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,f.get("type"))<0)){var g=c.getComponent(getAxisMainType(u),d).axis,p=getOtherDim(u),v,b=f.coordinateSystem;p!=null&&b.getOtherAxis&&(v=b.getOtherAxis(g).inverse),p=f.getData().mapDimension(p),l={thisAxis:g,series:f,thisDim:u,otherDim:p,otherAxisInverse:v}}},this)},this),l}},o.prototype._renderHandle=function(){var n=this.group,a=this._displayables,l=a.handles=[null,null],c=a.handleLabels=[null,null],u=this._displayables.sliderGroup,d=this._size,h=this.dataZoomModel,f=this.api,g=h.get("borderRadius")||0,p=h.get("brushSelect"),v=a.filler=new Rect({silent:p,style:{fill:h.get("fillerColor")},textConfig:{position:"inside"}});u.add(v),u.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:d[0],height:d[1],r:g},style:{stroke:h.get("dataBackgroundColor")||h.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(T){var R=h.get("handleIcon");!symbolBuildProxies[R]&&R.indexOf("path://")<0&&R.indexOf("image://")<0&&(R="path://"+R,process.env.NODE_ENV!=="production"&&deprecateLog("handleIcon now needs 'path://' prefix when using a path string"));var A=createSymbol$1(R,-1,0,2,2,null,!0);A.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,T),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var M=A.getBoundingRect(),D=h.get("handleSize");this._handleHeight=parsePercent(D,this._size[1]),this._handleWidth=M.width/M.height*this._handleHeight,A.setStyle(h.getModel("handleStyle").getItemStyle()),A.style.strokeNoScale=!0,A.rectHover=!0,A.ensureState("emphasis").style=h.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(A);var O=h.get("handleColor");O!=null&&(A.style.fill=O),u.add(l[T]=A);var H=h.getModel("textStyle"),j=h.get("handleLabel")||{},q=j.show||!1;n.add(c[T]=new ZRText({silent:!0,invisible:!q,style:createTextStyle$1(H,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:H.getTextColor(),font:H.getFont()}),z2:10}))},this);var b=v;if(p){var _=parsePercent(h.get("moveHandleSize"),d[1]),w=a.moveHandle=new Rect$2({style:h.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:d[1]-.5,height:_}}),x=_*.8,S=a.moveHandleIcon=createSymbol$1(h.get("moveHandleIcon"),-x/2,-x/2,x,x,"#fff",!0);S.silent=!0,S.y=d[1]+_/2-.5,w.ensureState("emphasis").style=h.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var C=Math.min(d[1]/2,Math.max(_,10));b=a.moveZone=new Rect$2({invisible:!0,shape:{y:d[1]-C,height:_+C}}),b.on("mouseover",function(){f.enterEmphasis(w)}).on("mouseout",function(){f.leaveEmphasis(w)}),u.add(w),u.add(S),u.add(b)}b.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},o.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),a=this._getViewExtent();this._handleEnds=[linearMap$2(n[0],[0,100],a,!0),linearMap$2(n[1],[0,100],a,!0)]},o.prototype._updateInterval=function(n,a){var l=this.dataZoomModel,c=this._handleEnds,u=this._getViewExtent(),d=l.findRepresentativeAxisProxy().getMinMaxSpan(),h=[0,100];sliderMove(a,c,u,l.get("zoomLock")?"all":n,d.minSpan!=null?linearMap$2(d.minSpan,h,u,!0):null,d.maxSpan!=null?linearMap$2(d.maxSpan,h,u,!0):null);var f=this._range,g=this._range=asc$2([linearMap$2(c[0],u,h,!0),linearMap$2(c[1],u,h,!0)]);return!f||f[0]!==g[0]||f[1]!==g[1]},o.prototype._updateView=function(n){var a=this._displayables,l=this._handleEnds,c=asc$2(l.slice()),u=this._size;each$f([0,1],function(b){var _=a.handles[b],w=this._handleHeight;_.attr({scaleX:w/2,scaleY:w/2,x:l[b]+(b?-1:1),y:u[1]/2-w/2})},this),a.filler.setShape({x:c[0],y:0,width:c[1]-c[0],height:u[1]});var d={x:c[0],width:c[1]-c[0]};a.moveHandle&&(a.moveHandle.setShape(d),a.moveZone.setShape(d),a.moveZone.getBoundingRect(),a.moveHandleIcon&&a.moveHandleIcon.attr("x",d.x+d.width/2));for(var h=a.dataShadowSegs,f=[0,c[0],c[1],u[0]],g=0;g<h.length;g++){var p=h[g],v=p.getClipPath();v||(v=new Rect$2,p.setClipPath(v)),v.setShape({x:f[g],y:0,width:f[g+1]-f[g],height:u[1]})}this._updateDataInfo(n)},o.prototype._updateDataInfo=function(n){var a=this.dataZoomModel,l=this._displayables,c=l.handleLabels,u=this._orient,d=["",""];if(a.get("showDetail")){var h=a.findRepresentativeAxisProxy();if(h){var f=h.getAxisModel().axis,g=this._range,p=n?h.calculateDataWindow({start:g[0],end:g[1]}).valueWindow:h.getDataValueWindow();d=[this._formatLabel(p[0],f),this._formatLabel(p[1],f)]}}var v=asc$2(this._handleEnds.slice());b.call(this,0),b.call(this,1);function b(_){var w=getTransform$1(l.handles[_].parent,this.group),x=transformDirection(_===0?"right":"left",w),S=this._handleWidth/2+LABEL_GAP,C=applyTransform([v[_]+(_===0?-S:S),this._size[1]/2],w);c[_].setStyle({x:C[0],y:C[1],verticalAlign:u===HORIZONTAL?"middle":x,align:u===HORIZONTAL?x:"center",text:d[_]})}},o.prototype._formatLabel=function(n,a){var l=this.dataZoomModel,c=l.get("labelFormatter"),u=l.get("labelPrecision");(u==null||u==="auto")&&(u=a.getPixelPrecision());var d=n==null||isNaN(n)?"":a.type==="category"||a.type==="time"?a.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(u,20));return isFunction$1(c)?c(n,d):isString$2(c)?c.replace("{value}",d):d},o.prototype._showDataInfo=function(n){var a=this.dataZoomModel.get("handleLabel")||{},l=a.show||!1,c=this.dataZoomModel.getModel(["emphasis","handleLabel"]),u=c.get("show")||!1,d=n||this._dragging?u:l,h=this._displayables,f=h.handleLabels;f[0].attr("invisible",!d),f[1].attr("invisible",!d),h.moveHandle&&this.api[d?"enterEmphasis":"leaveEmphasis"](h.moveHandle,1)},o.prototype._onDragMove=function(n,a,l,c){this._dragging=!0,stop(c.event);var u=this._displayables.sliderGroup.getLocalTransform(),d=applyTransform([a,l],u,!0),h=this._updateInterval(n,d[0]),f=this.dataZoomModel.get("realtime");this._updateView(!f),h&&f&&this._dispatchZoomAction(!0)},o.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},o.prototype._onClickPanel=function(n){var a=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(l[0]<0||l[0]>a[0]||l[1]<0||l[1]>a[1])){var c=this._handleEnds,u=(c[0]+c[1])/2,d=this._updateInterval("all",l[0]-u);this._updateView(),d&&this._dispatchZoomAction(!1)}},o.prototype._onBrushStart=function(n){var a=n.offsetX,l=n.offsetY;this._brushStart=new Point(a,l),this._brushing=!0,this._brushStartTime=+new Date},o.prototype._onBrushEnd=function(n){if(this._brushing){var a=this._displayables.brushRect;if(this._brushing=!1,!!a){a.attr("ignore",!0);var l=a.shape,c=+new Date;if(!(c-this._brushStartTime<200&&Math.abs(l.width)<5)){var u=this._getViewExtent(),d=[0,100];this._range=asc$2([linearMap$2(l.x,u,d,!0),linearMap$2(l.x+l.width,u,d,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},o.prototype._onBrush=function(n){this._brushing&&(stop(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},o.prototype._updateBrushRect=function(n,a){var l=this._displayables,c=this.dataZoomModel,u=l.brushRect;u||(u=l.brushRect=new Rect({silent:!0,style:c.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(u)),u.attr("ignore",!1);var d=this._brushStart,h=this._displayables.sliderGroup,f=h.transformCoordToLocal(n,a),g=h.transformCoordToLocal(d.x,d.y),p=this._size;f[0]=Math.max(Math.min(p[0],f[0]),0),u.setShape({x:g[0],y:0,width:f[0]-g[0],height:p[1]})},o.prototype._dispatchZoomAction=function(n){var a=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?REALTIME_ANIMATION_CONFIG:null,start:a[0],end:a[1]})},o.prototype._findCoordRect=function(){var n,a=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!n&&a.length){var l=a[0].model.coordinateSystem;n=l.getRect&&l.getRect()}if(!n){var c=this.api.getWidth(),u=this.api.getHeight();n={x:c*.2,y:u*.2,width:c*.6,height:u*.6}}return n},o.type="dataZoom.slider",o}(DataZoomView);function getOtherDim(s){var o={x:"y",y:"x",radius:"angle",angle:"radius"};return o[s]}function getCursor$1(s){return s==="vertical"?"ns-resize":"ew-resize"}function install$7(s){s.registerComponentModel(SliderZoomModel),s.registerComponentView(SliderZoomView),installCommon$1(s)}function install$6(s){use(install$8),use(install$7)}var visualDefault={get:function(s,o,n){var a=clone$4((defaultOption[s]||{})[o]);return n&&isArray$1(a)?a[a.length-1]:a}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return o.prototype.init=function(n,a,l){this.mergeDefaultAndTheme(n,l)},o.prototype.optionUpdated=function(n,a){var l=this.option;!a&&replaceVisualOption(l,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},o.prototype.resetVisual=function(n){var a=this.stateList;n=bind$1(n,this),this.controllerVisuals=createVisualMappings(this.option.controller,a,n),this.targetVisuals=createVisualMappings(this.option.target,a,n)},o.prototype.getItemSymbol=function(){return null},o.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,a=[];return n==null||n==="all"?this.ecModel.eachSeries(function(l,c){a.push(c)}):a=normalizeToArray(n),a},o.prototype.eachTargetSeries=function(n,a){each$f(this.getTargetSeriesIndices(),function(l){var c=this.ecModel.getSeriesByIndex(l);c&&n.call(a,c)},this)},o.prototype.isTargetSeries=function(n){var a=!1;return this.eachTargetSeries(function(l){l===n&&(a=!0)}),a},o.prototype.formatValueText=function(n,a,l){var c=this.option,u=c.precision,d=this.dataBound,h=c.formatter,f;l=l||["<",">"],isArray$1(n)&&(n=n.slice(),f=!0);var g=a?n:f?[p(n[0]),p(n[1])]:p(n);if(isString$2(h))return h.replace("{value}",f?g[0]:g).replace("{value2}",f?g[1]:g);if(isFunction$1(h))return f?h(n[0],n[1]):h(n);if(f)return n[0]===d[0]?l[0]+" "+g[1]:n[1]===d[1]?l[1]+" "+g[0]:g[0]+" - "+g[1];return g;function p(v){return v===d[0]?"min":v===d[1]?"max":(+v).toFixed(Math.min(u,20))}},o.prototype.resetExtent=function(){var n=this.option,a=asc([n.min,n.max]);this._dataExtent=a},o.prototype.getDataDimensionIndex=function(n){var a=this.option.dimension;if(a!=null)return n.getDimensionIndex(a);for(var l=n.dimensions,c=l.length-1;c>=0;c--){var u=l[c],d=n.getDimensionInfo(u);if(!d.isCalculationCoord)return d.storeDimIndex}},o.prototype.getExtent=function(){return this._dataExtent.slice()},o.prototype.completeVisualOption=function(){var n=this.ecModel,a=this.option,l={inRange:a.inRange,outOfRange:a.outOfRange},c=a.target||(a.target={}),u=a.controller||(a.controller={});merge(c,l),merge(u,l);var d=this.isCategory();h.call(this,c),h.call(this,u),f.call(this,c,"inRange","outOfRange"),g.call(this,u);function h(p){isArray(a.color)&&!p.inRange&&(p.inRange={color:a.color.slice().reverse()}),p.inRange=p.inRange||{color:n.get("gradientColor")}}function f(p,v,b){var _=p[v],w=p[b];_&&!w&&(w=p[b]={},each$2(_,function(x,S){if(VisualMapping.isValidType(S)){var C=visualDefault.get(S,"inactive",d);C!=null&&(w[S]=C,S==="color"&&!w.hasOwnProperty("opacity")&&!w.hasOwnProperty("colorAlpha")&&(w.opacity=[0,0]))}}))}function g(p){var v=(p.inRange||{}).symbol||(p.outOfRange||{}).symbol,b=(p.inRange||{}).symbolSize||(p.outOfRange||{}).symbolSize,_=this.get("inactiveColor"),w=this.getItemSymbol(),x=w||"roundRect";each$2(this.stateList,function(S){var C=this.itemSize,T=p[S];T||(T=p[S]={color:d?_:[_]}),T.symbol==null&&(T.symbol=v&&clone$4(v)||(d?x:[x])),T.symbolSize==null&&(T.symbolSize=b&&clone$4(b)||(d?C[0]:[C[0],C[0]])),T.symbol=mapVisual(T.symbol,function(M){return M==="none"?x:M});var R=T.symbolSize;if(R!=null){var A=-1/0;eachVisual(R,function(M){M>A&&(A=M)}),T.symbolSize=mapVisual(R,function(M){return linearMap$1(M,[0,A],[0,C[0]],!0)})}},this)}},o.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},o.prototype.isCategory=function(){return!!this.option.categories},o.prototype.setSelected=function(n){},o.prototype.getSelected=function(){return null},o.prototype.getValueState=function(n){return null},o.prototype.getVisualMeta=function(n){return null},o.type="visualMap",o.dependencies=["series"],o.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},o}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.optionUpdated=function(n,a){s.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},o.prototype.resetItemSize=function(){s.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=DEFAULT_BAR_BOUND[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=DEFAULT_BAR_BOUND[1])},o.prototype._resetRange=function(){var n=this.getExtent(),a=this.option.range;!a||a.auto?(n.auto=1,this.option.range=n):isArray$1(a)&&(a[0]>a[1]&&a.reverse(),a[0]=Math.max(a[0],n[0]),a[1]=Math.min(a[1],n[1]))},o.prototype.completeVisualOption=function(){s.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(n){var a=this.option.controller[n].symbolSize;a&&a[0]!==a[1]&&(a[0]=a[1]/3)},this)},o.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},o.prototype.getSelected=function(){var n=this.getExtent(),a=asc$2((this.get("range")||[]).slice());return a[0]>n[1]&&(a[0]=n[1]),a[1]>n[1]&&(a[1]=n[1]),a[0]<n[0]&&(a[0]=n[0]),a[1]<n[0]&&(a[1]=n[0]),a},o.prototype.getValueState=function(n){var a=this.option.range,l=this.getExtent();return(a[0]<=l[0]||a[0]<=n)&&(a[1]>=l[1]||n<=a[1])?"inRange":"outOfRange"},o.prototype.findTargetDataIndices=function(n){var a=[];return this.eachTargetSeries(function(l){var c=[],u=l.getData();u.each(this.getDataDimensionIndex(u),function(d,h){n[0]<=d&&d<=n[1]&&c.push(h)},this),a.push({seriesId:l.id,dataIndex:c})},this),a},o.prototype.getVisualMeta=function(n){var a=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),c=[];function u(b,_){c.push({value:b,color:n(b,_)})}for(var d=0,h=0,f=l.length,g=a.length;h<g&&(!l.length||a[h]<=l[0]);h++)a[h]<l[d]&&u(a[h],"outOfRange");for(var p=1;d<f;d++,p=0)p&&c.length&&u(l[d],"outOfRange"),u(l[d],"inRange");for(var p=1;h<g;h++)(!l.length||l[l.length-1]<a[h])&&(p&&(c.length&&u(c[c.length-1].value,"outOfRange"),p=0),u(a[h],"outOfRange"));var v=c.length;return{stops:c,outerColors:[v?c[0].color:"transparent",v?c[v-1].color:"transparent"]}},o.type="visualMap.continuous",o.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),o}(VisualMapModel);function getColorStopValues(s,o,n){if(n[0]===n[1])return n.slice();for(var a=200,l=(n[1]-n[0])/a,c=n[0],u=[],d=0;d<=a&&c<n[1];d++)u.push(c),c+=l;return u.push(n[1]),u}var VisualMapView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return o.prototype.init=function(n,a){this.ecModel=n,this.api=a},o.prototype.render=function(n,a,l,c){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,a,l,c)},o.prototype.renderBackground=function(n){var a=this.visualMapModel,l=normalizeCssArray(a.get("padding")||0),c=n.getBoundingRect();n.add(new Rect$2({z2:-1,silent:!0,shape:{x:c.x-l[3],y:c.y-l[0],width:c.width+l[3]+l[1],height:c.height+l[0]+l[2]},style:{fill:a.get("backgroundColor"),stroke:a.get("borderColor"),lineWidth:a.get("borderWidth")}}))},o.prototype.getControllerVisual=function(n,a,l){l=l||{};var c=l.forceState,u=this.visualMapModel,d={};if(a==="color"){var h=u.get("contentColor");d.color=h}function f(b){return d[b]}function g(b,_){d[b]=_}var p=u.controllerVisuals[c||u.getValueState(n)],v=VisualMapping.prepareVisualTypes(p);return each$f(v,function(b){var _=p[b];l.convertOpacityToAlpha&&b==="opacity"&&(b="colorAlpha",_=p.__alphaForOpacity),VisualMapping.dependsOn(b,a)&&_&&_.applyVisual(n,f,g)}),d[a]},o.prototype.positionGroup=function(n){var a=this.visualMapModel,l=this.api;positionElement(n,a.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},o.prototype.doRender=function(n,a,l,c){},o.type="visualMap",o}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(s,o,n){var a=s.option,l=a.align;if(l!=null&&l!=="auto")return l;for(var c={width:o.getWidth(),height:o.getHeight()},u=a.orient==="horizontal"?1:0,d=paramsSet[u],h=[0,null,10],f={},g=0;g<3;g++)f[paramsSet[1-u][g]]=h[g],f[d[g]]=g===2?n[0]:a[d[g]];var p=[["x","width",3],["y","height",0]][u],v=getLayoutRect(f,c,a.padding);return d[(v.margin[p[2]]||0)+v[p[0]]+v[p[1]]*.5<c[p[1]]*.5?0:1]}function makeHighDownBatch(s,o){return each$f(s||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(o?o.componentIndex:"")}),s}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return o.prototype.init=function(n,a){s.prototype.init.call(this,n,a),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},o.prototype.doRender=function(n,a,l,c){(!c||c.type!=="selectDataRange"||c.from!==this.uid)&&this._buildView()},o.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,a=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(a);var l=n.get("text");this._renderEndsText(a,l,0),this._renderEndsText(a,l,1),this._updateView(!0),this.renderBackground(a),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(a)},o.prototype._renderEndsText=function(n,a,l){if(a){var c=a[1-l];c=c!=null?c+"":"";var u=this.visualMapModel,d=u.get("textGap"),h=u.itemSize,f=this._shapes.mainGroup,g=this._applyTransform([h[0]/2,l===0?-d:h[1]+d],f),p=this._applyTransform(l===0?"bottom":"top",f),v=this._orient,b=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(b,{x:g[0],y:g[1],verticalAlign:v==="horizontal"?"middle":p,align:v==="horizontal"?p:"center",text:c})}))}},o.prototype._renderBar=function(n){var a=this.visualMapModel,l=this._shapes,c=a.itemSize,u=this._orient,d=this._useHandle,h=getItemAlign(a,this.api,c),f=l.mainGroup=this._createBarGroup(h),g=new Group$3;f.add(g),g.add(l.outOfRange=createPolygon()),g.add(l.inRange=createPolygon(null,d?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),g.setClipPath(new Rect$2({shape:{x:0,y:0,width:c[0],height:c[1],r:3}}));var p=a.textStyleModel.getTextRect("国"),v=mathMax(p.width,p.height);d&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(a,f,0,c,v,u),this._createHandle(a,f,1,c,v,u)),this._createIndicator(a,f,c,v,u),n.add(f)},o.prototype._createHandle=function(n,a,l,c,u,d){var h=bind$1(this._dragHandle,this,l,!1),f=bind$1(this._dragHandle,this,l,!0),g=parsePercent$1(n.get("handleSize"),c[0]),p=createSymbol$1(n.get("handleIcon"),-g/2,-g/2,g,g,null,!0),v=getCursor(this._orient);p.attr({cursor:v,draggable:!0,drift:h,ondragend:f,onmousemove:function(S){stop(S.event)}}),p.x=c[0]/2,p.useStyle(n.getModel("handleStyle").getItemStyle()),p.setStyle({strokeNoScale:!0,strokeFirst:!0}),p.style.lineWidth*=2,p.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(p,!0),a.add(p);var b=this.visualMapModel.textStyleModel,_=new ZRText({cursor:v,draggable:!0,drift:h,onmousemove:function(S){stop(S.event)},ondragend:f,style:createTextStyle$1(b,{x:0,y:0,text:""})});_.ensureState("blur").style={opacity:.1},_.stateTransition={duration:200},this.group.add(_);var w=[g,0],x=this._shapes;x.handleThumbs[l]=p,x.handleLabelPoints[l]=w,x.handleLabels[l]=_},o.prototype._createIndicator=function(n,a,l,c,u){var d=parsePercent$1(n.get("indicatorSize"),l[0]),h=createSymbol$1(n.get("indicatorIcon"),-d/2,-d/2,d,d,null,!0);h.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var f=n.getModel("indicatorStyle").getItemStyle();if(h instanceof ZRImage){var g=h.style;h.useStyle(extend({image:g.image,x:g.x,y:g.y,width:g.width,height:g.height},f))}else h.useStyle(f);a.add(h);var p=this.visualMapModel.textStyleModel,v=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(p,{x:0,y:0,text:""})});this.group.add(v);var b=[(u==="horizontal"?c/2:HOVER_LINK_OUT)+l[0]/2,0],_=this._shapes;_.indicator=h,_.indicatorLabel=v,_.indicatorLabelPoint=b,this._firstShowIndicator=!0},o.prototype._dragHandle=function(n,a,l,c){if(this._useHandle){if(this._dragging=!a,!a){var u=this._applyTransform([l,c],this._shapes.mainGroup,!0);this._updateInterval(n,u[1]),this._hideIndicator(),this._updateView()}a===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),a?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},o.prototype._resetInterval=function(){var n=this.visualMapModel,a=this._dataInterval=n.getSelected(),l=n.getExtent(),c=[0,n.itemSize[1]];this._handleEnds=[linearMap(a[0],l,c,!0),linearMap(a[1],l,c,!0)]},o.prototype._updateInterval=function(n,a){a=a||0;var l=this.visualMapModel,c=this._handleEnds,u=[0,l.itemSize[1]];sliderMove(a,c,u,n,0);var d=l.getExtent();this._dataInterval=[linearMap(c[0],u,d,!0),linearMap(c[1],u,d,!0)]},o.prototype._updateView=function(n){var a=this.visualMapModel,l=a.getExtent(),c=this._shapes,u=[0,a.itemSize[1]],d=n?u:this._handleEnds,h=this._createBarVisual(this._dataInterval,l,d,"inRange"),f=this._createBarVisual(l,l,u,"outOfRange");c.inRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),c.outOfRange.setStyle({fill:f.barColor}).setShape("points",f.barPoints),this._updateHandle(d,h)},o.prototype._createBarVisual=function(n,a,l,c){var u={forceState:c,convertOpacityToAlpha:!0},d=this._makeColorGradient(n,u),h=[this.getControllerVisual(n[0],"symbolSize",u),this.getControllerVisual(n[1],"symbolSize",u)],f=this._createBarPoints(l,h);return{barColor:new LinearGradient(0,0,0,1,d),barPoints:f,handlesColor:[d[0].color,d[d.length-1].color]}},o.prototype._makeColorGradient=function(n,a){var l=100,c=[],u=(n[1]-n[0])/l;c.push({color:this.getControllerVisual(n[0],"color",a),offset:0});for(var d=1;d<l;d++){var h=n[0]+u*d;if(h>n[1])break;c.push({color:this.getControllerVisual(h,"color",a),offset:d/l})}return c.push({color:this.getControllerVisual(n[1],"color",a),offset:1}),c},o.prototype._createBarPoints=function(n,a){var l=this.visualMapModel.itemSize;return[[l[0]-a[0],n[0]],[l[0],n[0]],[l[0],n[1]],[l[0]-a[1],n[1]]]},o.prototype._createBarGroup=function(n){var a=this._orient,l=this.visualMapModel.get("inverse");return new Group$3(a==="horizontal"&&!l?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:a==="horizontal"&&l?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:a==="vertical"&&!l?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},o.prototype._updateHandle=function(n,a){if(this._useHandle){var l=this._shapes,c=this.visualMapModel,u=l.handleThumbs,d=l.handleLabels,h=c.itemSize,f=c.getExtent(),g=this._applyTransform("left",l.mainGroup);each$1([0,1],function(p){var v=u[p];v.setStyle("fill",a.handlesColor[p]),v.y=n[p];var b=linearMap(n[p],[0,h[1]],f,!0),_=this.getControllerVisual(b,"symbolSize");v.scaleX=v.scaleY=_/h[0],v.x=h[0]-_/2;var w=applyTransform(l.handleLabelPoints[p],getTransform$1(v,this.group));if(this._orient==="horizontal"){var x=g==="left"||g==="top"?(h[0]-_)/2:(h[0]-_)/-2;w[1]+=x}d[p].setStyle({x:w[0],y:w[1],text:c.formatValueText(this._dataInterval[p]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},o.prototype._showIndicator=function(n,a,l,c){var u=this.visualMapModel,d=u.getExtent(),h=u.itemSize,f=[0,h[1]],g=this._shapes,p=g.indicator;if(p){p.attr("invisible",!1);var v={convertOpacityToAlpha:!0},b=this.getControllerVisual(n,"color",v),_=this.getControllerVisual(n,"symbolSize"),w=linearMap(n,d,f,!0),x=h[0]-_/2,S={x:p.x,y:p.y};p.y=w,p.x=x;var C=applyTransform(g.indicatorLabelPoint,getTransform$1(p,this.group)),T=g.indicatorLabel;T.attr("invisible",!1);var R=this._applyTransform("left",g.mainGroup),A=this._orient,M=A==="horizontal";T.setStyle({text:(l||"")+u.formatValueText(a),verticalAlign:M?R:"middle",align:M?"center":R});var D={x,y:w,style:{fill:b}},O={style:{x:C[0],y:C[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var H={duration:100,easing:"cubicInOut",additive:!0};p.x=S.x,p.y=S.y,p.animateTo(D,H),T.animateTo(O,H)}else p.attr(D),T.attr(O);this._firstShowIndicator=!1;var j=this._shapes.handleLabels;if(j)for(var q=0;q<j.length;q++)this.api.enterBlur(j[q])}},o.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(a){if(n._hovering=!0,!n._dragging){var l=n.visualMapModel.itemSize,c=n._applyTransform([a.offsetX,a.offsetY],n._shapes.mainGroup,!0,!0);c[1]=mathMin(mathMax(0,c[1]),l[1]),n._doHoverLinkToSeries(c[1],0<=c[0]&&c[0]<=l[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},o.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},o.prototype._doHoverLinkToSeries=function(n,a){var l=this.visualMapModel,c=l.itemSize;if(l.option.hoverLink){var u=[0,c[1]],d=l.getExtent();n=mathMin(mathMax(u[0],n),u[1]);var h=getHalfHoverLinkSize(l,d,u),f=[n-h,n+h],g=linearMap(n,u,d,!0),p=[linearMap(f[0],u,d,!0),linearMap(f[1],u,d,!0)];f[0]<u[0]&&(p[0]=-1/0),f[1]>u[1]&&(p[1]=1/0),a&&(p[0]===-1/0?this._showIndicator(g,p[1],"< ",h):p[1]===1/0?this._showIndicator(g,p[0],"> ",h):this._showIndicator(g,g,"≈ ",h));var v=this._hoverLinkDataIndices,b=[];(a||useHoverLinkOnHandle(l))&&(b=this._hoverLinkDataIndices=l.findTargetDataIndices(p));var _=compressBatches(v,b);this._dispatchHighDown("downplay",makeHighDownBatch(_[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(_[1],l))}},o.prototype._hoverLinkFromSeriesMouseOver=function(n){var a;if(findEventDispatcher(n.target,function(h){var f=getECData(h);if(f.dataIndex!=null)return a=f,!0},!0),!!a){var l=this.ecModel.getSeriesByIndex(a.seriesIndex),c=this.visualMapModel;if(c.isTargetSeries(l)){var u=l.getData(a.dataType),d=u.getStore().get(c.getDataDimensionIndex(u),a.dataIndex);isNaN(d)||this._showIndicator(d,d)}}},o.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var a=this._shapes.handleLabels;if(a)for(var l=0;l<a.length;l++)this.api.leaveBlur(a[l])},o.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(n,this.visualMapModel)),n.length=0},o.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},o.prototype._applyTransform=function(n,a,l,c){var u=getTransform$1(a,c?null:this.group);return isArray$1(n)?applyTransform(n,u,l):transformDirection(n,u,l)},o.prototype._dispatchHighDown=function(n,a){a&&a.length&&this.api.dispatchAction({type:n,batch:a})},o.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},o.type="visualMap.continuous",o}(VisualMapView);function createPolygon(s,o,n,a){return new Polygon({shape:{points:s},draggable:!!n,cursor:o,drift:n,onmousemove:function(l){stop(l.event)},ondragend:a})}function getHalfHoverLinkSize(s,o,n){var a=HOVER_LINK_SIZE/2,l=s.get("hoverLinkDataSize");return l&&(a=linearMap(l,o,n,!0)/2),a}function useHoverLinkOnHandle(s){var o=s.get("hoverLinkOnHandle");return!!(o??s.get("realtime"))}function getCursor(s){return s==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(s,o){o.eachComponent({mainType:"visualMap",query:s},function(n){n.setSelected(s.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(s,o){var n=[];return o.eachComponent("visualMap",function(a){var l=s.pipelineContext;!a.isTargetSeries(s)||l&&l.large||n.push(incrementalApplyVisual(a.stateList,a.targetVisuals,bind$1(a.getValueState,a),a.getDataDimensionIndex(s.getData())))}),n}},{createOnAllSeries:!0,reset:function(s,o){var n=s.getData(),a=[];o.eachComponent("visualMap",function(l){if(l.isTargetSeries(s)){var c=l.getVisualMeta(bind$1(getColorVisual,null,s,l))||{stops:[],outerColors:[]},u=l.getDataDimensionIndex(n);u>=0&&(c.dimension=u,a.push(c))}}),s.getData().setVisual("visualMeta",a)}}];function getColorVisual(s,o,n,a){for(var l=o.targetVisuals[a],c=VisualMapping.prepareVisualTypes(l),u={color:getVisualFromData(s.getData(),"color")},d=0,h=c.length;d<h;d++){var f=c[d],g=l[f==="opacity"?"__alphaForOpacity":f];g&&g.applyVisual(n,p,v)}return u.color;function p(b){return u[b]}function v(b,_){u[b]=_}}var each=each$f;function visualMapPreprocessor(s){var o=s&&s.visualMap;isArray$1(o)||(o=o?[o]:[]),each(o,function(n){if(n){has(n,"splitList")&&!has(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var a=n.pieces;a&&isArray$1(a)&&each(a,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(s,o){return s&&s.hasOwnProperty&&s.hasOwnProperty(o)}var installed=!1;function installCommon(s){installed||(installed=!0,s.registerSubTypeDefaulter("visualMap",function(o){return!o.categories&&(!(o.pieces?o.pieces.length>0:o.splitNumber>0)||o.calculable)?"continuous":"piecewise"}),s.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(o){s.registerVisual(s.PRIORITY.VISUAL.COMPONENT,o)}),s.registerPreprocessor(visualMapPreprocessor))}function install$5(s){s.registerComponentModel(ContinuousModel),s.registerComponentView(ContinuousView),installCommon(s)}var PiecewiseModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n._pieceList=[],n}return o.prototype.optionUpdated=function(n,a){s.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(n,a);var c=this.option.categories;this.resetVisual(function(u,d){l==="categories"?(u.mappingMethod="category",u.categories=clone$4(c)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=map$1(this._pieceList,function(h){return h=clone$4(h),d!=="inRange"&&(h.visual=null),h}))})},o.prototype.completeVisualOption=function(){var n=this.option,a={},l=VisualMapping.listVisualTypes(),c=this.isCategory();each$f(n.pieces,function(d){each$f(l,function(h){d.hasOwnProperty(h)&&(a[h]=1)})}),each$f(a,function(d,h){var f=!1;each$f(this.stateList,function(g){f=f||u(n,g,h)||u(n.target,g,h)},this),!f&&each$f(this.stateList,function(g){(n[g]||(n[g]={}))[h]=visualDefault.get(h,g==="inRange"?"active":"inactive",c)})},this);function u(d,h,f){return d&&d[h]&&d[h].hasOwnProperty(f)}s.prototype.completeVisualOption.apply(this,arguments)},o.prototype._resetSelected=function(n,a){var l=this.option,c=this._pieceList,u=(a?l:n).selected||{};if(l.selected=u,each$f(c,function(h,f){var g=this.getSelectedMapKey(h);u.hasOwnProperty(g)||(u[g]=!0)},this),l.selectedMode==="single"){var d=!1;each$f(c,function(h,f){var g=this.getSelectedMapKey(h);u[g]&&(d?u[g]=!1:d=!0)},this)}},o.prototype.getItemSymbol=function(){return this.get("itemSymbol")},o.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},o.prototype.getPieceList=function(){return this._pieceList},o.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},o.prototype.setSelected=function(n){this.option.selected=clone$4(n)},o.prototype.getValueState=function(n){var a=VisualMapping.findPieceIndex(n,this._pieceList);return a!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[a])]?"inRange":"outOfRange"},o.prototype.findTargetDataIndices=function(n){var a=[],l=this._pieceList;return this.eachTargetSeries(function(c){var u=[],d=c.getData();d.each(this.getDataDimensionIndex(d),function(h,f){var g=VisualMapping.findPieceIndex(h,l);g===n&&u.push(f)},this),a.push({seriesId:c.id,dataIndex:u})},this),a},o.prototype.getRepresentValue=function(n){var a;if(this.isCategory())a=n.value;else if(n.value!=null)a=n.value;else{var l=n.interval||[];a=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return a},o.prototype.getVisualMeta=function(n){if(this.isCategory())return;var a=[],l=["",""],c=this;function u(g,p){var v=c.getRepresentValue({interval:g});p||(p=c.getValueState(v));var b=n(v,p);g[0]===-1/0?l[0]=b:g[1]===1/0?l[1]=b:a.push({value:g[0],color:b},{value:g[1],color:b})}var d=this._pieceList.slice();if(!d.length)d.push({interval:[-1/0,1/0]});else{var h=d[0].interval[0];h!==-1/0&&d.unshift({interval:[-1/0,h]}),h=d[d.length-1].interval[1],h!==1/0&&d.push({interval:[h,1/0]})}var f=-1/0;return each$f(d,function(g){var p=g.interval;p&&(p[0]>f&&u([f,p[0]],"outOfRange"),u(p.slice()),f=p[1])},this),{stops:a,outerColors:l}},o.type="visualMap.piecewise",o.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),o}(VisualMapModel),resetMethods={splitNumber:function(s){var o=this.option,n=Math.min(o.precision,20),a=this.getExtent(),l=o.splitNumber;l=Math.max(parseInt(l,10),1),o.splitNumber=l;for(var c=(a[1]-a[0])/l;+c.toFixed(n)!==c&&n<5;)n++;o.precision=n,c=+c.toFixed(n),o.minOpen&&s.push({interval:[-1/0,a[0]],close:[0,0]});for(var u=0,d=a[0];u<l;d+=c,u++){var h=u===l-1?a[1]:d+c;s.push({interval:[d,h],close:[1,1]})}o.maxOpen&&s.push({interval:[a[1],1/0],close:[0,0]}),reformIntervals(s),each$f(s,function(f,g){f.index=g,f.text=this.formatValueText(f.interval)},this)},categories:function(s){var o=this.option;each$f(o.categories,function(n){s.push({text:this.formatValueText(n,!0),value:n})},this),normalizeReverse(o,s)},pieces:function(s){var o=this.option;each$f(o.pieces,function(n,a){isObject$3(n)||(n={value:n});var l={text:"",index:a};if(n.label!=null&&(l.text=n.label),n.hasOwnProperty("value")){var c=l.value=n.value;l.interval=[c,c],l.close=[1,1]}else{for(var u=l.interval=[],d=l.close=[0,0],h=[1,0,1],f=[-1/0,1/0],g=[],p=0;p<2;p++){for(var v=[["gte","gt","min"],["lte","lt","max"]][p],b=0;b<3&&u[p]==null;b++)u[p]=n[v[b]],d[p]=h[b],g[p]=b===2;u[p]==null&&(u[p]=f[p])}g[0]&&u[1]===1/0&&(d[0]=0),g[1]&&u[0]===-1/0&&(d[1]=0),process.env.NODE_ENV!=="production"&&u[0]>u[1]&&console.warn("Piece "+a+"is illegal: "+u+" lower bound should not greater then uppper bound."),u[0]===u[1]&&d[0]&&d[1]&&(l.value=u[0])}l.visual=VisualMapping.retrieveVisuals(n),s.push(l)},this),normalizeReverse(o,s),reformIntervals(s),each$f(s,function(n){var a=n.close,l=[["<","≤"][a[1]],[">","≥"][a[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,l)},this)}};function normalizeReverse(s,o){var n=s.inverse;(s.orient==="vertical"?!n:n)&&o.reverse()}var PiecewiseVisualMapView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type=o.type,n}return o.prototype.doRender=function(){var n=this.group;n.removeAll();var a=this.visualMapModel,l=a.get("textGap"),c=a.textStyleModel,u=c.getFont(),d=c.getTextColor(),h=this._getItemAlign(),f=a.itemSize,g=this._getViewData(),p=g.endsText,v=retrieve(a.get("showLabel",!0),!p),b=!a.get("selectedMode");p&&this._renderEndsText(n,p[0],f,v,h),each$f(g.viewPieceList,function(_){var w=_.piece,x=new Group$3;x.onclick=bind$1(this._onItemClick,this,w),this._enableHoverLink(x,_.indexInModelPieceList);var S=a.getRepresentValue(w);if(this._createItemSymbol(x,S,[0,0,f[0],f[1]],b),v){var C=this.visualMapModel.getValueState(S);x.add(new ZRText({style:{x:h==="right"?-l:f[0]+l,y:f[1]/2,text:w.text,verticalAlign:"middle",align:h,font:u,fill:d,opacity:C==="outOfRange"?.5:1},silent:b}))}n.add(x)},this),p&&this._renderEndsText(n,p[1],f,v,h),box(a.get("orient"),n,a.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},o.prototype._enableHoverLink=function(n,a){var l=this;n.on("mouseover",function(){return c("highlight")}).on("mouseout",function(){return c("downplay")});var c=function(u){var d=l.visualMapModel;d.option.hoverLink&&l.api.dispatchAction({type:u,batch:makeHighDownBatch(d.findTargetDataIndices(a),d)})}},o.prototype._getItemAlign=function(){var n=this.visualMapModel,a=n.option;if(a.orient==="vertical")return getItemAlign(n,this.api,n.itemSize);var l=a.align;return(!l||l==="auto")&&(l="left"),l},o.prototype._renderEndsText=function(n,a,l,c,u){if(a){var d=new Group$3,h=this.visualMapModel.textStyleModel;d.add(new ZRText({style:createTextStyle$1(h,{x:c?u==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:c?u:"center",text:a})})),n.add(d)}},o.prototype._getViewData=function(){var n=this.visualMapModel,a=map$1(n.getPieceList(),function(d,h){return{piece:d,indexInModelPieceList:h}}),l=n.get("text"),c=n.get("orient"),u=n.get("inverse");return(c==="horizontal"?u:!u)?a.reverse():l&&(l=l.slice().reverse()),{viewPieceList:a,endsText:l}},o.prototype._createItemSymbol=function(n,a,l,c){var u=createSymbol$1(this.getControllerVisual(a,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(a,"color"));u.silent=c,n.add(u)},o.prototype._onItemClick=function(n){var a=this.visualMapModel,l=a.option,c=l.selectedMode;if(c){var u=clone$4(l.selected),d=a.getSelectedMapKey(n);c==="single"||c===!0?(u[d]=!0,each$f(u,function(h,f){u[f]=f===d})):u[d]=!u[d],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},o.type="visualMap.piecewise",o}(VisualMapView);function install$4(s){s.registerComponentModel(PiecewiseModel),s.registerComponentView(PiecewiseVisualMapView),installCommon(s)}function install$3(s){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(s,o){var n=s.getModel("aria");if(!n.get("enabled"))return;var a=clone$4(DEFAULT_OPTION);merge(a.label,s.getLocaleModel().get("aria"),!1),merge(n.option,a,!1),l(),c();function l(){var f=n.getModel("decal"),g=f.get("show");if(g){var p=createHashMap();s.eachSeries(function(v){if(!v.isColorBySeries()){var b=p.get(v.type);b||(b={},p.set(v.type,b)),inner(v).scope=b}}),s.eachRawSeries(function(v){if(s.isSeriesFiltered(v))return;if(isFunction$1(v.enableAriaDecal)){v.enableAriaDecal();return}var b=v.getData();if(v.isColorBySeries()){var C=getDecalFromPalette(v.ecModel,v.name,decalPaletteScope,s.getSeriesCount()),T=b.getVisual("decal");b.setVisual("decal",R(T,C))}else{var _=v.getRawData(),w={},x=inner(v).scope;b.each(function(A){var M=b.getRawIndex(A);w[M]=A});var S=_.count();_.each(function(A){var M=w[A],D=_.getName(A)||A+"",O=getDecalFromPalette(v.ecModel,D,x,S),H=b.getItemVisual(M,"decal");b.setItemVisual(M,"decal",R(H,O))})}function R(A,M){var D=A?extend(extend({},M),A):M;return D.dirty=!0,D}})}}function c(){var f=o.getZr().dom;if(f){var g=s.getLocaleModel().get("aria"),p=n.getModel("label");if(p.option=defaults(p.option,g),!!p.get("enabled")){if(f.setAttribute("role","img"),p.get("description")){f.setAttribute("aria-label",p.get("description"));return}var v=s.getSeriesCount(),b=p.get(["data","maxCount"])||10,_=p.get(["series","maxCount"])||10,w=Math.min(v,_),x;if(!(v<1)){var S=d();if(S){var C=p.get(["general","withTitle"]);x=u(C,{title:S})}else x=p.get(["general","withoutTitle"]);var T=[],R=v>1?p.get(["series","multiple","prefix"]):p.get(["series","single","prefix"]);x+=u(R,{seriesCount:v}),s.eachSeries(function(O,H){if(H<w){var j=void 0,q=O.get("name"),Y=q?"withName":"withoutName";j=v>1?p.get(["series","multiple",Y]):p.get(["series","single",Y]),j=u(j,{seriesId:O.seriesIndex,seriesName:O.get("name"),seriesType:h(O.subType)});var ee=O.getData();if(ee.count()>b){var te=p.get(["data","partialData"]);j+=u(te,{displayCnt:b})}else j+=p.get(["data","allData"]);for(var re=p.get(["data","separator","middle"]),ae=p.get(["data","separator","end"]),ue=p.get(["data","excludeDimensionId"]),ce=[],le=0;le<ee.count();le++)if(le<b){var ie=ee.getName(le),de=ue?filter(ee.getValues(le),function(pe,be){return indexOf(ue,be)===-1}):ee.getValues(le),ge=p.get(["data",ie?"withName":"withoutName"]);ce.push(u(ge,{name:ie,value:de.join(re)}))}j+=ce.join(re)+ae,T.push(j)}});var A=p.getModel(["series","multiple","separator"]),M=A.get("middle"),D=A.get("end");x+=T.join(M)+D,f.setAttribute("aria-label",x)}}}}function u(f,g){if(!isString$2(f))return f;var p=f;return each$f(g,function(v,b){p=p.replace(new RegExp("\\{\\s*"+b+"\\s*\\}","g"),v)}),p}function d(){var f=s.get("title");return f&&f.length&&(f=f[0]),f&&f.text}function h(f){var g=s.getLocaleModel().get(["series","typeNames"]);return g[f]||g.chart}}function ariaPreprocessor(s){if(!(!s||!s.aria)){var o=s.aria;o.show!=null&&(o.enabled=o.show),o.label=o.label||{},each$f(["description","general","series","data"],function(n){o[n]!=null&&(o.label[n]=o[n])})}}function install$2(s){s.registerPreprocessor(ariaPreprocessor),s.registerVisual(s.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function s(o){var n=this._condVal=isString$2(o)?new RegExp(o):isRegExp(o)?o:null;if(n==null){var a="";process.env.NODE_ENV!=="production"&&(a=makePrintable("Illegal regexp",o,"in")),throwError(a)}}return s.prototype.evaluate=function(o){var n=typeof o;return isString$2(n)?this._condVal.test(o):isNumber(n)?this._condVal.test(o+""):!1},s}(),ConstConditionInternal=function(){function s(){}return s.prototype.evaluate=function(){return this.value},s}(),AndConditionInternal=function(){function s(){}return s.prototype.evaluate=function(){for(var o=this.children,n=0;n<o.length;n++)if(!o[n].evaluate())return!1;return!0},s}(),OrConditionInternal=function(){function s(){}return s.prototype.evaluate=function(){for(var o=this.children,n=0;n<o.length;n++)if(o[n].evaluate())return!0;return!1},s}(),NotConditionInternal=function(){function s(){}return s.prototype.evaluate=function(){return!this.child.evaluate()},s}(),RelationalConditionInternal=function(){function s(){}return s.prototype.evaluate=function(){for(var o=!!this.valueParser,n=this.getValue,a=n(this.valueGetterParam),l=o?this.valueParser(a):null,c=0;c<this.subCondList.length;c++)if(!this.subCondList[c].evaluate(o?l:a))return!1;return!0},s}();function parseOption(s,o){if(s===!0||s===!1){var n=new ConstConditionInternal;return n.value=s,n}var a="";return isObjectNotArray(s)||(process.env.NODE_ENV!=="production"&&(a=makePrintable("Illegal config. Expect a plain object but actually",s)),throwError(a)),s.and?parseAndOrOption("and",s,o):s.or?parseAndOrOption("or",s,o):s.not?parseNotOption(s,o):parseRelationalOption(s,o)}function parseAndOrOption(s,o,n){var a=o[s],l="";process.env.NODE_ENV!=="production"&&(l=makePrintable('"and"/"or" condition should only be `'+s+": [...]` and must not be empty array.","Illegal condition:",o)),isArray$1(a)||throwError(l),a.length||throwError(l);var c=s==="and"?new AndConditionInternal:new OrConditionInternal;return c.children=map$1(a,function(u){return parseOption(u,n)}),c.children.length||throwError(l),c}function parseNotOption(s,o){var n=s.not,a="";process.env.NODE_ENV!=="production"&&(a=makePrintable('"not" condition should only be `not: {}`.',"Illegal condition:",s)),isObjectNotArray(n)||throwError(a);var l=new NotConditionInternal;return l.child=parseOption(n,o),l.child||throwError(a),l}function parseRelationalOption(s,o){for(var n="",a=o.prepareGetValue(s),l=[],c=keys(s),u=s.parser,d=u?getRawValueParser(u):null,h=0;h<c.length;h++){var f=c[h];if(!(f==="parser"||o.valueGetterAttrMap.get(f))){var g=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,f)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[f]:f,p=s[f],v=d?d(p):p,b=createFilterComparator(g,v)||g==="reg"&&new RegExpEvaluator(v);b||(process.env.NODE_ENV!=="production"&&(n=makePrintable('Illegal relational operation: "'+f+'" in condition:',s)),throwError(n)),l.push(b)}}l.length||(process.env.NODE_ENV!=="production"&&(n=makePrintable("Relational condition must have at least one operator.","Illegal condition:",s)),throwError(n));var _=new RelationalConditionInternal;return _.valueGetterParam=a,_.valueParser=d,_.getValue=o.getValue,_.subCondList=l,_}function isObjectNotArray(s){return isObject$3(s)&&!isArrayLike(s)}var ConditionalExpressionParsed=function(){function s(o,n){this._cond=parseOption(o,n)}return s.prototype.evaluate=function(){return this._cond.evaluate()},s}();function parseConditionalExpression(s,o){return new ConditionalExpressionParsed(s,o)}var filterTransform={type:"echarts:filter",transform:function(s){for(var o=s.upstream,n,a=parseConditionalExpression(s.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(d){var h="",f=d.dimension;hasOwn(d,"dimension")||(process.env.NODE_ENV!=="production"&&(h=makePrintable('Relation condition must has prop "dimension" specified.',"Illegal condition:",d)),throwError(h));var g=o.getDimensionInfo(f);return g||(process.env.NODE_ENV!=="production"&&(h=makePrintable("Can not find dimension info via: "+f+`.
`,"Existing dimensions: ",o.cloneAllDimensionInfo(),`.
`,"Illegal condition:",d,`.
`)),throwError(h)),{dimIdx:g.index}},getValue:function(d){return o.retrieveValueFromItem(n,d.dimIdx)}}),l=[],c=0,u=o.count();c<u;c++)n=o.getRawDataItem(c),a.evaluate()&&l.push(n);return{data:l}}},sampleLog="";process.env.NODE_ENV!=="production"&&(sampleLog=["Valid config is like:",'{ dimension: "age", order: "asc" }','or [{ dimension: "age", order: "asc"], { dimension: "date", order: "desc" }]'].join(" "));var sortTransform={type:"echarts:sort",transform:function(s){var o=s.upstream,n=s.config,a="",l=normalizeToArray(n);l.length||(process.env.NODE_ENV!=="production"&&(a="Empty `config` in sort transform."),throwError(a));var c=[];each$f(l,function(g){var p=g.dimension,v=g.order,b=g.parser,_=g.incomparable;if(p==null&&(process.env.NODE_ENV!=="production"&&(a='Sort transform config must has "dimension" specified.'+sampleLog),throwError(a)),v!=="asc"&&v!=="desc"&&(process.env.NODE_ENV!=="production"&&(a='Sort transform config must has "order" specified.'+sampleLog),throwError(a)),_&&_!=="min"&&_!=="max"){var w="";process.env.NODE_ENV!=="production"&&(w='incomparable must be "min" or "max" rather than "'+_+'".'),throwError(w)}if(v!=="asc"&&v!=="desc"){var x="";process.env.NODE_ENV!=="production"&&(x='order must be "asc" or "desc" rather than "'+v+'".'),throwError(x)}var S=o.getDimensionInfo(p);S||(process.env.NODE_ENV!=="production"&&(a=makePrintable("Can not find dimension info via: "+p+`.
`,"Existing dimensions: ",o.cloneAllDimensionInfo(),`.
`,"Illegal config:",g,`.
`)),throwError(a));var C=b?getRawValueParser(b):null;b&&!C&&(process.env.NODE_ENV!=="production"&&(a=makePrintable("Invalid parser name "+b+`.
`,"Illegal config:",g,`.
`)),throwError(a)),c.push({dimIdx:S.index,parser:C,comparator:new SortOrderComparator(v,_)})});var u=o.sourceFormat;u!==SOURCE_FORMAT_ARRAY_ROWS&&u!==SOURCE_FORMAT_OBJECT_ROWS&&(process.env.NODE_ENV!=="production"&&(a='sourceFormat "'+u+'" is not supported yet'),throwError(a));for(var d=[],h=0,f=o.count();h<f;h++)d.push(o.getRawDataItem(h));return d.sort(function(g,p){for(var v=0;v<c.length;v++){var b=c[v],_=o.retrieveValueFromItem(g,b.dimIdx),w=o.retrieveValueFromItem(p,b.dimIdx);b.parser&&(_=b.parser(_),w=b.parser(w));var x=b.comparator.evaluate(_,w);if(x!==0)return x}return 0}),{data:d}}};function install$1(s){s.registerTransform(filterTransform),s.registerTransform(sortTransform)}var DatasetModel=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="dataset",n}return o.prototype.init=function(n,a,l){s.prototype.init.call(this,n,a,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},o.prototype.mergeOption=function(n,a){s.prototype.mergeOption.call(this,n,a),disableTransformOptionMerge(this)},o.prototype.optionUpdated=function(){this._sourceManager.dirty()},o.prototype.getSourceManager=function(){return this._sourceManager},o.type="dataset",o.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},o}(ComponentModel),DatasetView=function(s){__extends$1(o,s);function o(){var n=s!==null&&s.apply(this,arguments)||this;return n.type="dataset",n}return o.type="dataset",o}(ComponentView);function install(s){s.registerComponentModel(DatasetModel),s.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(s,o){return Math.abs(s-o)<1e-5}function pathToBezierCurves(s){var o=s.data,n=s.len(),a=[],l,c=0,u=0,d=0,h=0;function f(ee,te){l&&l.length>2&&a.push(l),l=[ee,te]}function g(ee,te,re,ae){aroundEqual(ee,re)&&aroundEqual(te,ae)||l.push(ee,te,re,ae,re,ae)}function p(ee,te,re,ae,ue,ce){var le=Math.abs(te-ee),ie=Math.tan(le/4)*4/3,de=te<ee?-1:1,ge=Math.cos(ee),pe=Math.sin(ee),be=Math.cos(te),Se=Math.sin(te),Le=ge*ue+re,De=pe*ce+ae,ke=be*ue+re,Te=Se*ce+ae,Ae=ue*ie*de,Ee=ce*ie*de;l.push(Le-Ae*pe,De+Ee*ge,ke+Ae*Se,Te-Ee*be,ke,Te)}for(var v,b,_,w,x=0;x<n;){var S=o[x++],C=x===1;switch(C&&(c=o[x],u=o[x+1],d=c,h=u,(S===CMD.L||S===CMD.C||S===CMD.Q)&&(l=[d,h])),S){case CMD.M:c=d=o[x++],u=h=o[x++],f(d,h);break;case CMD.L:v=o[x++],b=o[x++],g(c,u,v,b),c=v,u=b;break;case CMD.C:l.push(o[x++],o[x++],o[x++],o[x++],c=o[x++],u=o[x++]);break;case CMD.Q:v=o[x++],b=o[x++],_=o[x++],w=o[x++],l.push(c+2/3*(v-c),u+2/3*(b-u),_+2/3*(v-_),w+2/3*(b-w),_,w),c=_,u=w;break;case CMD.A:var T=o[x++],R=o[x++],A=o[x++],M=o[x++],D=o[x++],O=o[x++]+D;x+=1;var H=!o[x++];v=Math.cos(D)*A+T,b=Math.sin(D)*M+R,C?(d=v,h=b,f(d,h)):g(c,u,v,b),c=Math.cos(O)*A+T,u=Math.sin(O)*M+R;for(var j=(H?-1:1)*Math.PI/2,q=D;H?q>O:q<O;q+=j){var Y=H?Math.max(q+j,O):Math.min(q+j,O);p(q,Y,T,R,A,M)}break;case CMD.R:d=c=o[x++],h=u=o[x++],v=d+o[x++],b=h+o[x++],f(v,h),g(v,h,v,b),g(v,b,d,b),g(d,b,d,h),g(d,h,v,h);break;case CMD.Z:l&&g(c,u,d,h),c=d,u=h;break}}return l&&l.length>2&&a.push(l),a}function adpativeBezier(s,o,n,a,l,c,u,d,h,f){if(aroundEqual(s,n)&&aroundEqual(o,a)&&aroundEqual(l,u)&&aroundEqual(c,d)){h.push(u,d);return}var g=2/f,p=g*g,v=u-s,b=d-o,_=Math.sqrt(v*v+b*b);v/=_,b/=_;var w=n-s,x=a-o,S=l-u,C=c-d,T=w*w+x*x,R=S*S+C*C;if(T<p&&R<p){h.push(u,d);return}var A=v*w+b*x,M=-v*S-b*C,D=T-A*A,O=R-M*M;if(D<p&&A>=0&&O<p&&M>=0){h.push(u,d);return}var H=[],j=[];cubicSubdivide(s,n,l,u,.5,H),cubicSubdivide(o,a,c,d,.5,j),adpativeBezier(H[0],j[0],H[1],j[1],H[2],j[2],H[3],j[3],h,f),adpativeBezier(H[4],j[4],H[5],j[5],H[6],j[6],H[7],j[7],h,f)}function pathToPolygons(s,o){var n=pathToBezierCurves(s),a=[];o=o||1;for(var l=0;l<n.length;l++){var c=n[l],u=[],d=c[0],h=c[1];u.push(d,h);for(var f=2;f<c.length;){var g=c[f++],p=c[f++],v=c[f++],b=c[f++],_=c[f++],w=c[f++];adpativeBezier(d,h,g,p,v,b,_,w,u,o),d=_,h=w}a.push(u)}return a}function getDividingGrids(s,o,n){var a=s[o],l=s[1-o],c=Math.abs(a/l),u=Math.ceil(Math.sqrt(c*n)),d=Math.floor(n/u);d===0&&(d=1,u=n);for(var h=[],f=0;f<u;f++)h.push(d);var g=u*d,p=n-g;if(p>0)for(var f=0;f<p;f++)h[f%u]+=1;return h}function divideSector(s,o,n){for(var a=s.r0,l=s.r,c=s.startAngle,u=s.endAngle,d=Math.abs(u-c),h=d*l,f=l-a,g=h>Math.abs(f),p=getDividingGrids([h,f],g?0:1,o),v=(g?d:f)/p.length,b=0;b<p.length;b++)for(var _=(g?f:d)/p[b],w=0;w<p[b];w++){var x={};g?(x.startAngle=c+v*b,x.endAngle=c+v*(b+1),x.r0=a+_*w,x.r=a+_*(w+1)):(x.startAngle=c+_*w,x.endAngle=c+_*(w+1),x.r0=a+v*b,x.r=a+v*(b+1)),x.clockwise=s.clockwise,x.cx=s.cx,x.cy=s.cy,n.push(x)}}function divideRect(s,o,n){for(var a=s.width,l=s.height,c=a>l,u=getDividingGrids([a,l],c?0:1,o),d=c?"width":"height",h=c?"height":"width",f=c?"x":"y",g=c?"y":"x",p=s[d]/u.length,v=0;v<u.length;v++)for(var b=s[h]/u[v],_=0;_<u[v];_++){var w={};w[f]=v*p,w[g]=_*b,w[d]=p,w[h]=b,w.x+=s.x,w.y+=s.y,n.push(w)}}function crossProduct2d(s,o,n,a){return s*a-n*o}function lineLineIntersect(s,o,n,a,l,c,u,d){var h=n-s,f=a-o,g=u-l,p=d-c,v=crossProduct2d(g,p,h,f);if(Math.abs(v)<1e-6)return null;var b=s-l,_=o-c,w=crossProduct2d(b,_,g,p)/v;return w<0||w>1?null:new Point(w*h+s,w*f+o)}function projPtOnLine(s,o,n){var a=new Point;Point.sub(a,n,o),a.normalize();var l=new Point;Point.sub(l,s,o);var c=l.dot(a);return c}function addToPoly(s,o){var n=s[s.length-1];n&&n[0]===o[0]&&n[1]===o[1]||s.push(o)}function splitPolygonByLine(s,o,n){for(var a=s.length,l=[],c=0;c<a;c++){var u=s[c],d=s[(c+1)%a],h=lineLineIntersect(u[0],u[1],d[0],d[1],o.x,o.y,n.x,n.y);h&&l.push({projPt:projPtOnLine(h,o,n),pt:h,idx:c})}if(l.length<2)return[{points:s},{points:s}];l.sort(function(x,S){return x.projPt-S.projPt});var f=l[0],g=l[l.length-1];if(g.idx<f.idx){var p=f;f=g,g=p}for(var v=[f.pt.x,f.pt.y],b=[g.pt.x,g.pt.y],_=[v],w=[b],c=f.idx+1;c<=g.idx;c++)addToPoly(_,s[c].slice());addToPoly(_,b),addToPoly(_,v);for(var c=g.idx+1;c<=f.idx+a;c++)addToPoly(w,s[c%a].slice());return addToPoly(w,v),addToPoly(w,b),[{points:_},{points:w}]}function binaryDividePolygon(s){var o=s.points,n=[],a=[];fromPoints(o,n,a);var l=new BoundingRect(n[0],n[1],a[0]-n[0],a[1]-n[1]),c=l.width,u=l.height,d=l.x,h=l.y,f=new Point,g=new Point;return c>u?(f.x=g.x=d+c/2,f.y=h,g.y=h+u):(f.y=g.y=h+u/2,f.x=d,g.x=d+c),splitPolygonByLine(o,f,g)}function binaryDivideRecursive(s,o,n,a){if(n===1)a.push(o);else{var l=Math.floor(n/2),c=s(o);binaryDivideRecursive(s,c[0],l,a),binaryDivideRecursive(s,c[1],n-l,a)}return a}function clone(s,o){for(var n=[],a=0;a<o;a++)n.push(clonePath(s));return n}function copyPathProps(s,o){o.setStyle(s.style),o.z=s.z,o.z2=s.z2,o.zlevel=s.zlevel}function polygonConvert(s){for(var o=[],n=0;n<s.length;)o.push([s[n++],s[n++]]);return o}function split(s,o){var n=[],a=s.shape,l;switch(s.type){case"rect":divideRect(a,o,n),l=Rect$2;break;case"sector":divideSector(a,o,n),l=Sector;break;case"circle":divideSector({r0:0,r:a.r,startAngle:0,endAngle:Math.PI*2,cx:a.cx,cy:a.cy},o,n),l=Sector;break;default:var c=s.getComputedTransform(),u=c?Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1],c[2]*c[2]+c[3]*c[3])):1,d=map$1(pathToPolygons(s.getUpdatedPathProxy(),u),function(S){return polygonConvert(S)}),h=d.length;if(h===0)binaryDivideRecursive(binaryDividePolygon,{points:d[0]},o,n);else if(h===o)for(var f=0;f<h;f++)n.push({points:d[f]});else{var g=0,p=map$1(d,function(S){var C=[],T=[];fromPoints(S,C,T);var R=(T[1]-C[1])*(T[0]-C[0]);return g+=R,{poly:S,area:R}});p.sort(function(S,C){return C.area-S.area});for(var v=o,f=0;f<h;f++){var b=p[f];if(v<=0)break;var _=f===h-1?v:Math.ceil(b.area/g*o);_<0||(binaryDivideRecursive(binaryDividePolygon,{points:b.poly},_,n),v-=_)}}l=Polygon;break}if(!l)return clone(s,o);for(var w=[],f=0;f<n.length;f++){var x=new l;x.setShape(n[f]),copyPathProps(s,x),w.push(x)}return w}function alignSubpath(s,o){var n=s.length,a=o.length;if(n===a)return[s,o];for(var l=[],c=[],u=n<a?s:o,d=Math.min(n,a),h=Math.abs(a-n)/6,f=(d-2)/6,g=Math.ceil(h/f)+1,p=[u[0],u[1]],v=h,b=2;b<d;){var _=u[b-2],w=u[b-1],x=u[b++],S=u[b++],C=u[b++],T=u[b++],R=u[b++],A=u[b++];if(v<=0){p.push(x,S,C,T,R,A);continue}for(var M=Math.min(v,g-1)+1,D=1;D<=M;D++){var O=D/M;cubicSubdivide(_,x,C,R,O,l),cubicSubdivide(w,S,T,A,O,c),_=l[3],w=c[3],p.push(l[1],c[1],l[2],c[2],_,w),x=l[5],S=c[5],C=l[6],T=c[6]}v-=M-1}return u===s?[p,o]:[s,p]}function createSubpath(s,o){for(var n=s.length,a=s[n-2],l=s[n-1],c=[],u=0;u<o.length;)c[u++]=a,c[u++]=l;return c}function alignBezierCurves(s,o){for(var n,a,l,c=[],u=[],d=0;d<Math.max(s.length,o.length);d++){var h=s[d],f=o[d],g=void 0,p=void 0;h?f?(n=alignSubpath(h,f),g=n[0],p=n[1],a=g,l=p):(p=createSubpath(l||h,h),g=h):(g=createSubpath(a||f,f),p=f),c.push(g),u.push(p)}return[c,u]}function centroid(s){for(var o=0,n=0,a=0,l=s.length,c=0,u=l-2;c<l;u=c,c+=2){var d=s[u],h=s[u+1],f=s[c],g=s[c+1],p=d*g-f*h;o+=p,n+=(d+f)*p,a+=(h+g)*p}return o===0?[s[0]||0,s[1]||0]:[n/o/3,a/o/3,o]}function findBestRingOffset(s,o,n,a){for(var l=(s.length-2)/6,c=1/0,u=0,d=s.length,h=d-2,f=0;f<l;f++){for(var g=f*6,p=0,v=0;v<d;v+=2){var b=v===0?g:(g+v-2)%h+2,_=s[b]-n[0],w=s[b+1]-n[1],x=o[v]-a[0],S=o[v+1]-a[1],C=x-_,T=S-w;p+=C*C+T*T}p<c&&(c=p,u=f)}return u}function reverse(s){for(var o=[],n=s.length,a=0;a<n;a+=2)o[a]=s[n-a-2],o[a+1]=s[n-a-1];return o}function findBestMorphingRotation(s,o,n,a){for(var l=[],c,u=0;u<s.length;u++){var d=s[u],h=o[u],f=centroid(d),g=centroid(h);c==null&&(c=f[2]<0!=g[2]<0);var p=[],v=[],b=0,_=1/0,w=[],x=d.length;c&&(d=reverse(d));for(var S=findBestRingOffset(d,h,f,g)*6,C=x-2,T=0;T<C;T+=2){var R=(S+T)%C+2;p[T+2]=d[R]-f[0],p[T+3]=d[R+1]-f[1]}p[0]=d[S]-f[0],p[1]=d[S+1]-f[1];for(var A=a/n,M=-a/2;M<=a/2;M+=A){for(var D=Math.sin(M),O=Math.cos(M),H=0,T=0;T<d.length;T+=2){var j=p[T],q=p[T+1],Y=h[T]-g[0],ee=h[T+1]-g[1],te=Y*O-ee*D,re=Y*D+ee*O;w[T]=te,w[T+1]=re;var ae=te-j,ue=re-q;H+=ae*ae+ue*ue}if(H<_){_=H,b=M;for(var ce=0;ce<w.length;ce++)v[ce]=w[ce]}}l.push({from:p,to:v,fromCp:f,toCp:g,rotation:-b})}return l}function isCombineMorphing(s){return s.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(s,o,n){var a=SAVED_METHOD_PREFIX+o,l=s[a]||s[o];s[a]||(s[a]=s[o]);var c=n.replace,u=n.after,d=n.before;s[o]=function(){var h=arguments,f;return d&&d.apply(this,h),c?f=c.apply(this,h):f=l.apply(this,h),u&&u.apply(this,h),f}}function restoreMethod(s,o){var n=SAVED_METHOD_PREFIX+o;s[n]&&(s[o]=s[n],s[n]=null)}function applyTransformOnBeziers(s,o){for(var n=0;n<s.length;n++)for(var a=s[n],l=0;l<a.length;){var c=a[l],u=a[l+1];a[l++]=o[0]*c+o[2]*u+o[4],a[l++]=o[1]*c+o[3]*u+o[5]}}function prepareMorphPath(s,o){var n=s.getUpdatedPathProxy(),a=o.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(n),pathToBezierCurves(a)),c=l[0],u=l[1],d=s.getComputedTransform(),h=o.getComputedTransform();function f(){this.transform=null}d&&applyTransformOnBeziers(c,d),h&&applyTransformOnBeziers(u,h),saveAndModifyMethod(o,"updateTransform",{replace:f}),o.transform=null;var g=findBestMorphingRotation(c,u,10,Math.PI),p=[];saveAndModifyMethod(o,"buildPath",{replace:function(v){for(var b=o.__morphT,_=1-b,w=[],x=0;x<g.length;x++){var S=g[x],C=S.from,T=S.to,R=S.rotation*b,A=S.fromCp,M=S.toCp,D=Math.sin(R),O=Math.cos(R);lerp$1(w,A,M,b);for(var H=0;H<C.length;H+=2){var j=C[H],q=C[H+1],Y=T[H],ee=T[H+1],te=j*_+Y*b,re=q*_+ee*b;p[H]=te*O-re*D+w[0],p[H+1]=te*D+re*O+w[1]}var ae=p[0],ue=p[1];v.moveTo(ae,ue);for(var H=2;H<C.length;){var Y=p[H++],ee=p[H++],ce=p[H++],le=p[H++],ie=p[H++],de=p[H++];ae===Y&&ue===ee&&ce===ie&&le===de?v.lineTo(ie,de):v.bezierCurveTo(Y,ee,ce,le,ie,de),ae=ie,ue=de}}}})}function morphPath(s,o,n){if(!s||!o)return o;var a=n.done,l=n.during;prepareMorphPath(s,o),o.__morphT=0;function c(){restoreMethod(o,"buildPath"),restoreMethod(o,"updateTransform"),o.__morphT=-1,o.createPathProxy(),o.dirtyShape()}return o.animateTo({__morphT:1},defaults({during:function(u){o.dirtyShape(),l&&l(u)},done:function(){c(),a&&a()}},n)),o}function hilbert(s,o,n,a,l,c){var u=16;s=l===n?0:Math.round(32767*(s-n)/(l-n)),o=c===a?0:Math.round(32767*(o-a)/(c-a));for(var d=0,h,f=(1<<u)/2;f>0;f/=2){var g=0,p=0;(s&f)>0&&(g=1),(o&f)>0&&(p=1),d+=f*f*(3*g^p),p===0&&(g===1&&(s=f-1-s,o=f-1-o),h=s,s=o,o=h)}return d}function sortPaths(s){var o=1/0,n=1/0,a=-1/0,l=-1/0,c=map$1(s,function(d){var h=d.getBoundingRect(),f=d.getComputedTransform(),g=h.x+h.width/2+(f?f[4]:0),p=h.y+h.height/2+(f?f[5]:0);return o=Math.min(g,o),n=Math.min(p,n),a=Math.max(g,a),l=Math.max(p,l),[g,p]}),u=map$1(c,function(d,h){return{cp:d,z:hilbert(d[0],d[1],o,n,a,l),path:s[h]}});return u.sort(function(d,h){return d.z-h.z}).map(function(d){return d.path})}function defaultDividePath(s){return split(s.path,s.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(s,o,n){var a=[];function l(A){for(var M=0;M<A.length;M++){var D=A[M];isCombineMorphing(D)?l(D.childrenRef()):D instanceof Path&&a.push(D)}}l(s);var c=a.length;if(!c)return createEmptyReturn();var u=n.dividePath||defaultDividePath,d=u({path:o,count:c});if(d.length!==c)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();a=sortPaths(a),d=sortPaths(d);for(var h=n.done,f=n.during,g=n.individualDelay,p=new Transformable,v=0;v<c;v++){var b=a[v],_=d[v];_.parent=o,_.copyTransform(p),g||prepareMorphPath(b,_)}o.__isCombineMorphing=!0,o.childrenRef=function(){return d};function w(A){for(var M=0;M<d.length;M++)d[M].addSelfToZr(A)}saveAndModifyMethod(o,"addSelfToZr",{after:function(A){w(A)}}),saveAndModifyMethod(o,"removeSelfFromZr",{after:function(A){for(var M=0;M<d.length;M++)d[M].removeSelfFromZr(A)}});function x(){o.__isCombineMorphing=!1,o.__morphT=-1,o.childrenRef=null,restoreMethod(o,"addSelfToZr"),restoreMethod(o,"removeSelfFromZr")}var S=d.length;if(g)for(var C=S,T=function(){C--,C===0&&(x(),h&&h())},v=0;v<S;v++){var R=g?defaults({delay:(n.delay||0)+g(v,S,a[v],d[v]),done:T},n):n;morphPath(a[v],d[v],R)}else o.__morphT=0,o.animateTo({__morphT:1},defaults({during:function(A){for(var M=0;M<S;M++){var D=d[M];D.__morphT=o.__morphT,D.dirtyShape()}f&&f(A)},done:function(){x();for(var A=0;A<s.length;A++)restoreMethod(s[A],"updateTransform");h&&h()}},n));return o.__zr&&w(o.__zr),{fromIndividuals:a,toIndividuals:d,count:S}}function separateMorph(s,o,n){var a=o.length,l=[],c=n.dividePath||defaultDividePath;function u(b){for(var _=0;_<b.length;_++){var w=b[_];isCombineMorphing(w)?u(w.childrenRef()):w instanceof Path&&l.push(w)}}if(isCombineMorphing(s)){u(s.childrenRef());var d=l.length;if(d<a)for(var h=0,f=d;f<a;f++)l.push(clonePath(l[h++%d]));l.length=a}else{l=c({path:s,count:a});for(var g=s.getComputedTransform(),f=0;f<l.length;f++)l[f].setLocalTransform(g);if(l.length!==a)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),o=sortPaths(o);for(var p=n.individualDelay,f=0;f<a;f++){var v=p?defaults({delay:(n.delay||0)+p(f,a,l[f],o[f])},n):n;morphPath(l[f],o[f],v)}return{fromIndividuals:l,toIndividuals:o,count:o.length}}function isMultiple(s){return isArray$1(s[0])}function prepareMorphBatches(s,o){for(var n=[],a=s.length,l=0;l<a;l++)n.push({one:s[l],many:[]});for(var l=0;l<o.length;l++){var c=o[l].length,u=void 0;for(u=0;u<c;u++)n[u%a].many.push(o[l][u])}for(var d=0,l=a-1;l>=0;l--)if(!n[l].many.length){var h=n[d].many;if(h.length<=1)if(d)d=0;else return n;var c=h.length,f=Math.ceil(c/2);n[l].many=h.slice(f,c),n[d].many=h.slice(0,f),d++}return n}var pathDividers={clone:function(s){for(var o=[],n=1-Math.pow(1-s.path.style.opacity,1/s.count),a=0;a<s.count;a++){var l=clonePath(s.path);l.setStyle("opacity",n),o.push(l)}return o},split:null};function applyMorphAnimation(s,o,n,a,l,c){if(!s.length||!o.length)return;var u=getAnimationConfig("update",a,l);if(!(u&&u.duration>0))return;var d=a.getModel("universalTransition").get("delay"),h=Object.assign({setToFinal:!0},u),f,g;isMultiple(s)&&(f=s,g=o),isMultiple(o)&&(f=o,g=s);function p(S,C,T,R,A){var M=S.many,D=S.one;if(M.length===1&&!A){var O=C?M[0]:D,H=C?D:M[0];if(isCombineMorphing(O))p({many:[O],one:H},!0,T,R,!0);else{var j=d?defaults({delay:d(T,R)},h):h;morphPath(O,H,j),c(O,H,O,H,j)}}else for(var q=defaults({dividePath:pathDividers[n],individualDelay:d&&function(ue,ce,le,ie){return d(ue+T,R)}},h),Y=C?combineMorph(M,D,q):separateMorph(D,M,q),ee=Y.fromIndividuals,te=Y.toIndividuals,re=ee.length,ae=0;ae<re;ae++){var j=d?defaults({delay:d(ae,re)},h):h;c(ee[ae],te[ae],C?M[ae]:S.one,C?S.one:M[ae],j)}}for(var v=f?f===s:s.length>o.length,b=f?prepareMorphBatches(g,f):prepareMorphBatches(v?o:s,[v?s:o]),_=0,w=0;w<b.length;w++)_+=b[w].many.length;for(var x=0,w=0;w<b.length;w++)p(b[w],v,x,_),x+=b[w].many.length}function getPathList(s){if(!s)return[];if(isArray$1(s)){for(var o=[],n=0;n<s.length;n++)o.push(getPathList(s[n]));return o}var a=[];return s.traverse(function(l){l instanceof Path&&!l.disableMorphing&&!l.invisible&&!l.ignore&&a.push(l)}),a}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(s,o){for(var n=s.dimensions,a=0;a<n.length;a++){var l=s.getDimensionInfo(n[a]);if(l&&l.otherDims[o]===0)return n[a]}}function getValueByDimension(s,o,n){var a=s.getDimensionInfo(n),l=a&&a.ordinalMeta;if(a){var c=s.get(a.name,o);return l&&l.categories[c]||c+""}}function getGroupId(s,o,n,a){var l=a?"itemChildGroupId":"itemGroupId",c=getDimension(s,l);if(c){var u=getValueByDimension(s,o,c);return u}var d=s.getRawDataItem(o),h=a?"childGroupId":"groupId";if(d&&d[h])return d[h]+"";if(!a)return n||s.getId(o)}function flattenDataDiffItems(s){var o=[];return each$f(s,function(n){var a=n.data,l=n.dataGroupId;if(a.count()>DATA_COUNT_THRESHOLD){process.env.NODE_ENV!=="production"&&warn("Universal transition is disabled on large data > 10k.");return}for(var c=a.getIndices(),u=0;u<c.length;u++)o.push({data:a,groupId:getGroupId(a,u,l,!1),childGroupId:getGroupId(a,u,l,!0),divide:n.divide,dataIndex:u})}),o}function fadeInElement(s,o,n){s.traverse(function(a){a instanceof Path&&initProps(a,{style:{opacity:0}},o,{dataIndex:n,isFrom:!0})})}function removeEl(s){if(s.parent){var o=s.getComputedTransform();s.setLocalTransform(o),s.parent.remove(s)}}function stopAnimation(s){s.stopAnimation(),s.isGroup&&s.traverse(function(o){o.stopAnimation()})}function animateElementStyles(s,o,n){var a=getAnimationConfig("update",n,o);a&&s.traverse(function(l){if(l instanceof Displayable){var c=getOldStyle(l);c&&l.animateFrom({style:c},a)}})}function isAllIdSame(s,o){var n=s.length;if(n!==o.length)return!1;for(var a=0;a<n;a++){var l=s[a],c=o[a];if(l.data.getId(l.dataIndex)!==c.data.getId(c.dataIndex))return!1}return!0}function transitionBetween(s,o,n){var a=flattenDataDiffItems(s),l=flattenDataDiffItems(o);function c(T,R,A,M,D){(A||T)&&R.animateFrom({style:A&&A!==T?extend(extend({},A.style),T.style):T.style},D)}var u=!1,d=TRANSITION_NONE,h=createHashMap(),f=createHashMap();a.forEach(function(T){T.groupId&&h.set(T.groupId,!0),T.childGroupId&&f.set(T.childGroupId,!0)});for(var g=0;g<l.length;g++){var p=l[g].groupId;if(f.get(p)){d=TRANSITION_P2C;break}var v=l[g].childGroupId;if(v&&h.get(v)){d=TRANSITION_C2P;break}}function b(T,R){return function(A){var M=A.data,D=A.dataIndex;return R?M.getId(D):T?d===TRANSITION_P2C?A.childGroupId:A.groupId:d===TRANSITION_C2P?A.childGroupId:A.groupId}}var _=isAllIdSame(a,l),w={};if(!_)for(var g=0;g<l.length;g++){var x=l[g],S=x.data.getItemGraphicEl(x.dataIndex);S&&(w[S.id]=!0)}function C(T,R){var A=a[R],M=l[T],D=M.data.hostModel,O=A.data.getItemGraphicEl(A.dataIndex),H=M.data.getItemGraphicEl(M.dataIndex);if(O===H){H&&animateElementStyles(H,M.dataIndex,D);return}O&&w[O.id]||H&&(stopAnimation(H),O?(stopAnimation(O),removeEl(O),u=!0,applyMorphAnimation(getPathList(O),getPathList(H),M.divide,D,T,c)):fadeInElement(H,D,T))}new DataDiffer(a,l,b(!0,_),b(!1,_),null,"multiple").update(C).updateManyToOne(function(T,R){var A=l[T],M=A.data,D=M.hostModel,O=M.getItemGraphicEl(A.dataIndex),H=filter(map$1(R,function(j){return a[j].data.getItemGraphicEl(a[j].dataIndex)}),function(j){return j&&j!==O&&!w[j.id]});O&&(stopAnimation(O),H.length?(each$f(H,function(j){stopAnimation(j),removeEl(j)}),u=!0,applyMorphAnimation(getPathList(H),getPathList(O),A.divide,D,T,c)):fadeInElement(O,D,A.dataIndex))}).updateOneToMany(function(T,R){var A=a[R],M=A.data.getItemGraphicEl(A.dataIndex);if(!(M&&w[M.id])){var D=filter(map$1(T,function(H){return l[H].data.getItemGraphicEl(l[H].dataIndex)}),function(H){return H&&H!==M}),O=l[T[0]].data.hostModel;D.length&&(each$f(D,function(H){return stopAnimation(H)}),M?(stopAnimation(M),removeEl(M),u=!0,applyMorphAnimation(getPathList(M),getPathList(D),A.divide,O,T[0],c)):each$f(D,function(H){return fadeInElement(H,O,T[0])}))}}).updateManyToMany(function(T,R){new DataDiffer(R,T,function(A){return a[A].data.getId(a[A].dataIndex)},function(A){return l[A].data.getId(l[A].dataIndex)}).update(function(A,M){C(T[A],R[M])}).execute()}).execute(),u&&each$f(o,function(T){var R=T.data,A=R.hostModel,M=A&&n.getViewOfSeriesModel(A),D=getAnimationConfig("update",A,0);M&&A.isAnimationEnabled()&&D&&D.duration>0&&M.group.traverse(function(O){O instanceof Path&&!O.animators.length&&O.animateFrom({style:{opacity:0}},D)})})}function getSeriesTransitionKey(s){var o=s.getModel("universalTransition").get("seriesKey");return o||s.id}function convertArraySeriesKeyToString(s){return isArray$1(s)?s.sort().join(","):s}function getDivideShapeFromData(s){if(s.hostModel)return s.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(s,o){var n=createHashMap(),a=createHashMap(),l=createHashMap();each$f(s.oldSeries,function(u,d){var h=s.oldDataGroupIds[d],f=s.oldData[d],g=getSeriesTransitionKey(u),p=convertArraySeriesKeyToString(g);a.set(p,{dataGroupId:h,data:f}),isArray$1(g)&&each$f(g,function(v){l.set(v,{key:p,dataGroupId:h,data:f})})});function c(u){n.get(u)&&warn("Duplicated seriesKey in universalTransition "+u)}return each$f(o.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var d=u.get("dataGroupId"),h=u.getData(),f=getSeriesTransitionKey(u),g=convertArraySeriesKeyToString(f),p=a.get(g);if(p)process.env.NODE_ENV!=="production"&&c(g),n.set(g,{oldSeries:[{dataGroupId:p.dataGroupId,divide:getDivideShapeFromData(p.data),data:p.data}],newSeries:[{dataGroupId:d,divide:getDivideShapeFromData(h),data:h}]});else if(isArray$1(f)){process.env.NODE_ENV!=="production"&&c(g);var v=[];each$f(f,function(w){var x=a.get(w);x.data&&v.push({dataGroupId:x.dataGroupId,divide:getDivideShapeFromData(x.data),data:x.data})}),v.length&&n.set(g,{oldSeries:v,newSeries:[{dataGroupId:d,data:h,divide:getDivideShapeFromData(h)}]})}else{var b=l.get(f);if(b){var _=n.get(b.key);_||(_={oldSeries:[{dataGroupId:b.dataGroupId,data:b.data,divide:getDivideShapeFromData(b.data)}],newSeries:[]},n.set(b.key,_)),_.newSeries.push({dataGroupId:d,data:h,divide:getDivideShapeFromData(h)})}}}}),n}function querySeries(s,o){for(var n=0;n<s.length;n++){var a=o.seriesIndex!=null&&o.seriesIndex===s[n].seriesIndex||o.seriesId!=null&&o.seriesId===s[n].id;if(a)return n}}function transitionSeriesFromOpt(s,o,n,a){var l=[],c=[];each$f(normalizeToArray(s.from),function(u){var d=querySeries(o.oldSeries,u);d>=0&&l.push({dataGroupId:o.oldDataGroupIds[d],data:o.oldData[d],divide:getDivideShapeFromData(o.oldData[d]),groupIdDim:u.dimension})}),each$f(normalizeToArray(s.to),function(u){var d=querySeries(n.updatedSeries,u);if(d>=0){var h=n.updatedSeries[d].getData();c.push({dataGroupId:o.oldDataGroupIds[d],data:h,divide:getDivideShapeFromData(h),groupIdDim:u.dimension})}}),l.length>0&&c.length>0&&transitionBetween(l,c,a)}function installUniversalTransition(s){s.registerUpdateLifecycle("series:beforeupdate",function(o,n,a){each$f(normalizeToArray(a.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(c){for(var u=a.updatedSeries,d=0;d<u.length;d++)(c.seriesIndex!=null&&c.seriesIndex===u[d].seriesIndex||c.seriesId!=null&&c.seriesId===u[d].id)&&(u[d][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),s.registerUpdateLifecycle("series:transition",function(o,n,a){var l=getUniversalTransitionGlobalStore(n);if(l.oldSeries&&a.updatedSeries&&a.optionChanged){var c=a.seriesTransition;if(c)each$f(normalizeToArray(c),function(b){transitionSeriesFromOpt(b,l,a,n)});else{var u=findTransitionSeriesBatches(l,a);each$f(u.keys(),function(b){var _=u.get(b);transitionBetween(_.oldSeries,_.newSeries,n)})}each$f(a.updatedSeries,function(b){b[SERIES_UNIVERSAL_TRANSITION_PROP]&&(b[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var d=o.getSeries(),h=l.oldSeries=[],f=l.oldDataGroupIds=[],g=l.oldData=[],p=0;p<d.length;p++){var v=d[p].getData();v.count()<DATA_COUNT_THRESHOLD&&(h.push(d[p]),f.push(d[p].get("dataGroupId")),g.push(v))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={},hasRequiredId;function requireId(){return hasRequiredId||(hasRequiredId=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=1,n=function(){return"".concat(o++)};s.default=n}(id)),id}var sensors={},object={},debounce={},hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0;var o=function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,c=null;return function(){for(var u=this,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];clearTimeout(c),c=setTimeout(function(){a.apply(u,h)},l)}};s.default=o}(debounce)),debounce}var constant={},hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant;hasRequiredConstant=1,Object.defineProperty(constant,"__esModule",{value:!0}),constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var s="size-sensor-id";constant.SizeSensorId=s;var o="size-sensor-object";constant.SensorClassName=o;var n="-1";return constant.SensorTabIndex=n,constant}var hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,Object.defineProperty(object,"__esModule",{value:!0}),object.createSensor=void 0;var s=n(requireDebounce()),o=requireConstant();function n(l){return l&&l.__esModule?l:{default:l}}var a=function(c,u){var d=void 0,h=[],f=function(){getComputedStyle(c).position==="static"&&(c.style.position="relative");var w=document.createElement("object");return w.onload=function(){w.contentDocument.defaultView.addEventListener("resize",g),g()},w.style.display="block",w.style.position="absolute",w.style.top="0",w.style.left="0",w.style.height="100%",w.style.width="100%",w.style.overflow="hidden",w.style.pointerEvents="none",w.style.zIndex="-1",w.style.opacity="0",w.setAttribute("class",o.SensorClassName),w.setAttribute("tabindex",o.SensorTabIndex),w.type="text/html",c.appendChild(w),w.data="about:blank",w},g=(0,s.default)(function(){h.forEach(function(_){_(c)})}),p=function(w){d||(d=f()),h.indexOf(w)===-1&&h.push(w)},v=function(){d&&d.parentNode&&(d.contentDocument&&d.contentDocument.defaultView.removeEventListener("resize",g),d.parentNode.removeChild(d),c.removeAttribute(o.SizeSensorId),d=void 0,h=[],u&&u())},b=function(w){var x=h.indexOf(w);x!==-1&&h.splice(x,1),h.length===0&&d&&v()};return{element:c,bind:p,destroy:v,unbind:b}};return object.createSensor=a,object}var resizeObserver={},hasRequiredResizeObserver;function requireResizeObserver(){if(hasRequiredResizeObserver)return resizeObserver;hasRequiredResizeObserver=1,Object.defineProperty(resizeObserver,"__esModule",{value:!0}),resizeObserver.createSensor=void 0;var s=requireConstant(),o=n(requireDebounce());function n(l){return l&&l.__esModule?l:{default:l}}var a=function(c,u){var d=void 0,h=[],f=(0,o.default)(function(){h.forEach(function(_){_(c)})}),g=function(){var w=new ResizeObserver(f);return w.observe(c),f(),w},p=function(w){d||(d=g()),h.indexOf(w)===-1&&h.push(w)},v=function(){d.disconnect(),h=[],d=void 0,c.removeAttribute(s.SizeSensorId),u&&u()},b=function(w){var x=h.indexOf(w);x!==-1&&h.splice(x,1),h.length===0&&d&&v()};return{element:c,bind:p,destroy:v,unbind:b}};return resizeObserver.createSensor=a,resizeObserver}var hasRequiredSensors;function requireSensors(){if(hasRequiredSensors)return sensors;hasRequiredSensors=1,Object.defineProperty(sensors,"__esModule",{value:!0}),sensors.createSensor=void 0;var s=requireObject(),o=requireResizeObserver(),n=typeof ResizeObserver<"u"?o.createSensor:s.createSensor;return sensors.createSensor=n,sensors}var hasRequiredSensorPool;function requireSensorPool(){if(hasRequiredSensorPool)return sensorPool;hasRequiredSensorPool=1,Object.defineProperty(sensorPool,"__esModule",{value:!0}),sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var s=a(requireId()),o=requireSensors(),n=requireConstant();function a(h){return h&&h.__esModule?h:{default:h}}var l={};sensorPool.Sensors=l;function c(h){h&&l[h]&&delete l[h]}var u=function(f){var g=f.getAttribute(n.SizeSensorId);if(g&&l[g])return l[g];var p=(0,s.default)();f.setAttribute(n.SizeSensorId,p);var v=(0,o.createSensor)(f,function(){return c(p)});return l[p]=v,v};sensorPool.getSensor=u;var d=function(f){var g=f.element.getAttribute(n.SizeSensorId);f.destroy(),c(g)};return sensorPool.removeSensor=d,sensorPool}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ver=lib.clear=lib.bind=void 0;var s=requireSensorPool(),o=function(c,u){var d=(0,s.getSensor)(c);return d.bind(u),function(){d.unbind(u)}};lib.bind=o;var n=function(c){var u=(0,s.getSensor)(c);(0,s.removeSensor)(u)};lib.clear=n;var a="1.0.2";return lib.ver=a,lib}var libExports=requireLib();function pick(s,o){var n={};return o.forEach(function(a){n[a]=s[a]}),n}function isFunction(s){return typeof s=="function"}function isString$1(s){return typeof s=="string"}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function s(o,n){if(o===n)return!0;if(o&&n&&typeof o=="object"&&typeof n=="object"){if(o.constructor!==n.constructor)return!1;var a,l,c;if(Array.isArray(o)){if(a=o.length,a!=n.length)return!1;for(l=a;l--!==0;)if(!s(o[l],n[l]))return!1;return!0}if(o.constructor===RegExp)return o.source===n.source&&o.flags===n.flags;if(o.valueOf!==Object.prototype.valueOf)return o.valueOf()===n.valueOf();if(o.toString!==Object.prototype.toString)return o.toString()===n.toString();if(c=Object.keys(o),a=c.length,a!==Object.keys(n).length)return!1;for(l=a;l--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[l]))return!1;for(l=a;l--!==0;){var u=c[l];if(!s(o[u],n[u]))return!1}return!0}return o!==o&&n!==n}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const isEqual=getDefaultExportFromCjs(fastDeepEqualExports);var EChartsReactCore=function(s){__extends$2(o,s);function o(n){var a=s.call(this,n)||this;return a.echarts=n.echarts,a.ele=null,a.isInitialResize=!0,a}return o.prototype.componentDidMount=function(){this.renderNewEcharts()},o.prototype.componentDidUpdate=function(n){var a=this.props.shouldSetOption;if(!(isFunction(a)&&!a(n,this.props))){if(!isEqual(n.theme,this.props.theme)||!isEqual(n.opts,this.props.opts)){this.dispose(),this.renderNewEcharts();return}var l=this.getEchartsInstance();isEqual(n.onEvents,this.props.onEvents)||(this.offEvents(l,n.onEvents),this.bindEvents(l,this.props.onEvents));var c=["option","notMerge","replaceMerge","lazyUpdate","showLoading","loadingOption"];isEqual(pick(this.props,c),pick(n,c))||this.updateEChartsOption(),(!isEqual(n.style,this.props.style)||!isEqual(n.className,this.props.className))&&this.resize()}},o.prototype.componentWillUnmount=function(){this.dispose()},o.prototype.initEchartsInstance=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(a){return[2,new Promise(function(l){n.echarts.init(n.ele,n.props.theme,n.props.opts);var c=n.getEchartsInstance();c.on("finished",function(){var u=n.ele.clientWidth,d=n.ele.clientHeight;n.echarts.dispose(n.ele);var h=__assign({width:u,height:d},n.props.opts);l(n.echarts.init(n.ele,n.props.theme,h))})})]})})},o.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)},o.prototype.dispose=function(){if(this.ele){try{libExports.clear(this.ele)}catch(n){console.warn(n)}this.echarts.dispose(this.ele)}},o.prototype.renderNewEcharts=function(){return __awaiter(this,void 0,void 0,function(){var n,a,l,c,u,d,h=this;return __generator(this,function(f){switch(f.label){case 0:return n=this.props,a=n.onEvents,l=n.onChartReady,c=n.autoResize,u=c===void 0?!0:c,[4,this.initEchartsInstance()];case 1:return f.sent(),d=this.updateEChartsOption(),this.bindEvents(d,a||{}),isFunction(l)&&l(d),this.ele&&u&&libExports.bind(this.ele,function(){h.resize()}),[2]}})})},o.prototype.bindEvents=function(n,a){function l(u,d){isString$1(u)&&isFunction(d)&&n.on(u,function(h){d(h,n)})}for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&l(c,a[c])},o.prototype.offEvents=function(n,a){if(a)for(var l in a)isString$1(l)&&n.off(l)},o.prototype.updateEChartsOption=function(){var n=this.props,a=n.option,l=n.notMerge,c=l===void 0?!1:l,u=n.replaceMerge,d=u===void 0?null:u,h=n.lazyUpdate,f=h===void 0?!1:h,g=n.showLoading,p=n.loadingOption,v=p===void 0?null:p,b=this.getEchartsInstance();return b.setOption(a,{notMerge:c,replaceMerge:d,lazyUpdate:f}),g?b.showLoading(v):b.hideLoading(),b},o.prototype.resize=function(){var n=this.getEchartsInstance();if(!this.isInitialResize)try{n.resize({width:"auto",height:"auto"})}catch(a){console.warn(a)}this.isInitialResize=!1},o.prototype.render=function(){var n=this,a=this.props,l=a.style,c=a.className,u=c===void 0?"":c,d=__assign({height:300},l);return React.createElement("div",{ref:function(h){n.ele=h},style:d,className:"echarts-for-react ".concat(u)})},o}(React.PureComponent),EChartsReact=function(s){__extends$2(o,s);function o(n){var a=s.call(this,n)||this;return a.echarts=echarts,a}return o}(EChartsReactCore);function RenderChartByType(s){var n,a,l;React.useRef(null);let o;switch(s.type){case"line":o={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#D7D7DB"}},name:s.unit,nameLocation:"end",nameGap:20,nameTextStyle:{color:"#61616B",fontSize:12,lineHeight:16,align:"right"},axisLabel:{formatter:s.formatter,color:"#61616B",fontSize:12,lineHeight:16}},xAxis:{type:"category",boundaryGap:!1,data:s.xAxisName,axisLine:{lineStyle:{color:"#D7D7DB",width:1}},axisLabel:{color:"#61616B",fontSize:12,lineHeight:16}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:s.datasets.map(c=>({stack:"Total",name:c.title??c.name,type:s.type,data:c.value,itemStyle:{color:c.color}}))};break;case"bar":o={tooltip:{trigger:"item",axisPointer:{type:"shadow"}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#D7D7DB"}},name:s.unit,nameLocation:"end",nameGap:20,nameTextStyle:{color:"#61616B",fontSize:12,lineHeight:16,align:"right"},axisLabel:{formatter:s.formatter,color:"#61616B",fontSize:12,lineHeight:16}},xAxis:{type:"category",boundaryGap:!0,data:s.xAxisName,axisLine:{lineStyle:{color:"#D7D7DB",width:1}},axisLabel:{color:"#61616B",fontSize:12,lineHeight:16,interval:0}},grid:{left:"0%",right:"3%",bottom:"0%",containLabel:!0},series:(n=s.datasets)==null?void 0:n.map(c=>({data:c.value,type:s.type,itemStyle:{color:c.color,borderRadius:[2,2,0,0]},radius:"50%",barMinWidth:8,barMaxWidth:80,barGap:.2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))};break;case"horizontal bar":o={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value",axisLine:{lineStyle:{type:"dotted"}},axisLabel:{formatter:s.formatter}},yAxis:{type:"category",boundaryGap:!1,data:s.yAxisName},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:(a=s.datasets)==null?void 0:a.map(c=>({data:c.value,type:"bar",itemStyle:{color:c.color,borderRadius:[2,2,0,0]},radius:"50%",barMinWidth:8,barMaxWidth:80,barGap:.2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))};break;case"scatter":break;case"pie":o={title:{text:s.datasets.map(c=>typeof c.value=="number"?c.value:c.value.reduce((u,d)=>u+d,0)).reduce((c,u)=>c+u,0),left:"center",top:"center",textStyle:{fontSize:"2.4rem",fontWeight:"bold",color:"#18181B",fontFamily:"Inter"}},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:s.type,radius:"50%",padAngle:1,label:{show:!1,position:"center"},emphasis:{label:{show:!1,fontSize:14,fontWeight:"bold"}},data:s.datasets.map(c=>({value:c.value,itemStyle:{color:c.color,borderRadius:4}}))}]};break;case"doughnut":o={title:{text:s.datasets.map(c=>typeof c.value=="number"?c.value:c.value.reduce((u,d)=>u+d,0)).reduce((c,u)=>c+u,0),left:"center",top:"center",textStyle:{fontSize:"2.4rem",fontWeight:"bold",color:"#18181B",fontFamily:"Inter"}},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:["56%","90%"],center:["50%","50%"],avoidLabelOverlap:!1,padAngle:1,label:{show:!1,position:"center"},emphasis:{label:{show:!1,fontSize:14,fontWeight:"bold"}},data:s.datasets.map(c=>({name:c.title,value:c.value,itemStyle:{color:c.color,borderRadius:4}}))}]};break;case"bubble":break;case"radar":o={radar:{indicator:s.datasets.map(()=>({}))},series:(l=s.datasets)==null?void 0:l.map(c=>({type:s.type,itemStyle:{color:c.color,borderRadius:[2,2,0,0]},radius:"50%",barMinWidth:8,barMaxWidth:80,barGap:.2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))};break}switch(s.legend){case"top":return jsxRuntimeExports.jsxs("div",{className:"col",style:s.style,children:[jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flexWrap:"wrap"},children:s.datasets.map(c=>s.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):s.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))}),jsxRuntimeExports.jsx(EChartsReact,{onEvents:{click:s.handleChartClick},notMerge:!0,lazyUpdate:!0,option:o,style:{...["bar","line"].some(c=>s.type.includes(c))?{width:"100%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>s.type.includes(c))?"5 / 3":"1 / 1"}})]});case"bottom":return jsxRuntimeExports.jsxs("div",{className:"col",style:s.style,children:[jsxRuntimeExports.jsx(EChartsReact,{notMerge:!0,lazyUpdate:!0,option:o,style:{...["bar","line"].some(c=>s.type.includes(c))?{width:"100%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>s.type.includes(c))?"5 / 3":"1 / 1"}}),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flexWrap:"wrap"},children:s.datasets.map(c=>s.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):s.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))})]});case"left":return jsxRuntimeExports.jsxs("div",{className:"row",style:s.style,children:[jsxRuntimeExports.jsx("div",{className:"col",style:{gap:"1.6rem",flex:1},children:s.datasets.map(c=>s.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):s.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))}),jsxRuntimeExports.jsx(EChartsReact,{notMerge:!0,lazyUpdate:!0,option:o,style:{...["bar","line"].some(c=>s.type.includes(c))?{width:"70%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>s.type.includes(c))?"5 / 3":"1 / 1"}})]});case"right":default:return jsxRuntimeExports.jsxs("div",{className:"row",style:s.style,children:[jsxRuntimeExports.jsx(EChartsReact,{onEvents:{click:s.handleChartClick},notMerge:!0,lazyUpdate:!0,option:o,style:{...["bar","line"].some(c=>s.type.includes(c))?{width:"70%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>s.type.includes(c))?"5 / 3":"1 / 1"}}),jsxRuntimeExports.jsx("div",{className:"col",style:{gap:"1.6rem",flex:1,minWidth:"9.8rem"},children:s.datasets.map(c=>s.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):s.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))})]})}}const ChartById=({id,searchRaw="",className,style={},chartStyle={},filterAll=!1,handleChartClick,formatter})=>{var s;const now=new Date,[result,setResult]=React.useState([]),[chartItem,setChartItem]=React.useState(),{t}=useTranslation(),listTime=React.useMemo(()=>{if(!chartItem)return[];switch(chartItem==null?void 0:chartItem.Type){case"line":case"bar":case"horizontal bar":return[{id:"thisWeek",name:t("thisWeek")},{id:"lastWeek",name:t("lastWeek")},{id:"thisMonth",name:t("thisMonth")},{id:"lastMonth",name:t("lastMonth")},{id:"lastThreeMonth",name:t("lastThreeMonth")},{id:"lastSixMonth",name:t("lastSixMonth")},{id:"thisYear",name:t("thisYear")}];default:return[7,30,45,60,90,...filterAll?[1/0]:[]].map((o,n)=>({id:o,name:n===5?t("all"):t("lastNumberOfDay",{day:o})}))}},[chartItem==null?void 0:chartItem.Type]),[selectedTime,setSelectedTime]=React.useState(),groupByRegex=/(GROUPBY\s+\d+\s+(?:@\w+\s*)+)/g,getData=async()=>{let o=chartItem.Query.trim()==="*"?"":chartItem.Query;switch(searchRaw.length&&(o+=` ${searchRaw}`),selectedTime){case"thisWeek":var n=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7)+1).getTime(),a=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7)+7,23,59,59,999).getTime(),l=chartItem.Group.replace(groupByRegex,(d,h)=>{const f=d.split(" ");return`APPLY "dayofweek(@DateCreated / 1000)" AS _dayofweek ${f[0].trim()} ${parseInt(f[1])+1} ${["@_dayofweek",...f.slice(2)].join(" ")}`});break;case"lastWeek":n=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7)-6).getTime(),a=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7),23,59,59,999).getTime(),l=chartItem.Group.replace(groupByRegex,(d,h)=>{const f=d.split(" ");return`APPLY "dayofweek(@DateCreated / 1000)" AS _dayofweek ${f[0].trim()} ${parseInt(f[1])+1} ${["@_dayofweek",...f.slice(2)].join(" ")}`});break;case"thisMonth":n=new Date(now.getFullYear(),now.getMonth()).getTime(),a=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59,999).getTime(),l=chartItem.Group.replace(groupByRegex,(d,h)=>{const f=d.split(" ");return`APPLY "floor(dayofmonth(@DateCreated / 1000) / 7)" AS _dayofmonth ${f[0].trim()} ${parseInt(f[1])+1} ${["@_dayofmonth",...f.slice(2)].join(" ")}`});break;case"lastMonth":n=new Date(now.getFullYear(),now.getMonth()-1).getTime(),a=new Date(now.getFullYear(),now.getMonth(),0,23,59,59,999).getTime(),l=chartItem.Group.replace(groupByRegex,(d,h)=>{const f=d.split(" ");return`APPLY "floor(dayofmonth(@DateCreated / 1000) / 7)" AS _dayofmonth ${f[0].trim()} ${parseInt(f[1])+1} ${["@_dayofmonth",...f.slice(2)].join(" ")}`});break;case"lastThreeMonth":n=new Date(now.getFullYear(),now.getMonth()-3).getTime(),a=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59,999).getTime(),l=chartItem.Group.replace(groupByRegex,(d,h)=>{const f=d.split(" ");return`APPLY "monthofyear(@DateCreated / 1000)" AS _monthofyear ${f[0].trim()} ${parseInt(f[1])+1} ${["@_monthofyear",...f.slice(2)].join(" ")}`});break;case"lastSixMonth":n=new Date(now.getFullYear(),now.getMonth()-6).getTime(),a=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59,999).getTime(),l=chartItem.Group.replace(groupByRegex,(d,h)=>{const f=d.split(" ");return`APPLY "monthofyear(@DateCreated / 1000)" AS _monthofyear ${f[0].trim()} ${parseInt(f[1])+1} ${["@_monthofyear",...f.slice(2)].join(" ")}`});break;default:selectedTime===1/0?n=void 0:n=new Date(now.getFullYear(),now.getMonth(),now.getDay()-selectedTime).getTime(),l=chartItem.Group;break}o+=` ${n?`@DateCreated:[${n} ${a??Date.now()}]`:""}`,o=o.trim();const u=await new DataController(chartItem.TbName).group({searchRaw:o.length?o:"*",reducers:l});u.code===200&&setResult(u.data)},getMonthName=o=>{switch(o){case 0:return t("january");case 1:return t("february");case 2:return t("march");case 3:return t("april");case 4:return t("may");case 5:return t("june");case 6:return t("july");case 7:return t("august");case 8:return t("september");case 9:return t("october");case 10:return t("november");case 11:return t("december");default:return""}},getxAxisName=()=>{switch(selectedTime){case"thisWeek":case"lastWeek":return[t("mo"),t("tu"),t("we"),t("th"),t("fr"),t("sa"),t("su")];case"thisMonth":case"lastMonth":return["1 - 7","8 - 14","15 - 21",`22 - ${t("last").toLowerCase()}`];case"lastThreeMonth":return[new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()].map(o=>getMonthName(o));case"lastSixMonth":return[new Date(now.getFullYear(),now.getMonth()-5).getMonth(),new Date(now.getFullYear(),now.getMonth()-4).getMonth(),new Date(now.getFullYear(),now.getMonth()-3).getMonth(),new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()].map(o=>getMonthName(o));case"thisYear":return Array.from({length:12}).map((o,n)=>n+1);default:return[]}};return React.useEffect(()=>{listTime.length&&setSelectedTime(listTime[0].id)},[listTime]),React.useEffect(()=>{selectedTime&&getData()},[selectedTime]),React.useEffect(()=>{id&&new SettingDataController("chart").getByIds([id]).then(async n=>{if(n.code===200){const a=n.data[0];a.Setting=JSON.parse(a.Setting),setChartItem(a)}})},[id]),jsxRuntimeExports.jsxs("div",{className:`col ${styles["chart-block"]} ${className??""}`,style,children:[jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"1.6rem"},children:[jsxRuntimeExports.jsxs("div",{className:"col",style:{flex:1,gap:"0.4rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-7",children:chartItem==null?void 0:chartItem.Name}),!!((s=chartItem==null?void 0:chartItem.Description)!=null&&s.length)&&jsxRuntimeExports.jsx(Text$2,{className:"subtitle-3",style:{flex:1},children:chartItem==null?void 0:chartItem.Description})]}),jsxRuntimeExports.jsx(Select1,{readOnly:!0,value:selectedTime,options:listTime,style:{height:"3.2rem",width:"12.8rem",padding:"0 0.8rem"},onChange:o=>{setSelectedTime(o.id)}})]}),chartItem&&jsxRuntimeExports.jsx(RenderChartByType,{handleChartClick,formatter,style:chartStyle??{height:"15rem",gap:"2.4rem"},type:chartItem.Type,xAxisName:typeof listTime[0]=="number"?void 0:getxAxisName(),datasets:chartItem.Setting.datasets.map(e=>{try{const data=result;switch(selectedTime){case"thisWeek":case"lastWeek":var listData=[1,2,3,4,5,6,0],filterByTime=(o,n)=>parseInt(o._dayofweek)===n;break;case"thisMonth":case"lastMonth":listData=[0,1,2,3],filterByTime=(o,n)=>n===3?parseInt(o._dayofmonth)>=n:parseInt(o._dayofmonth)===n;break;case"lastThreeMonth":listData=[new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()],filterByTime=(o,n)=>parseInt(o._monthofyear)===n;break;case"lastSixMonth":listData=[new Date(now.getFullYear(),now.getMonth()-5).getMonth(),new Date(now.getFullYear(),now.getMonth()-4).getMonth(),new Date(now.getFullYear(),now.getMonth()-3).getMonth(),new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()],filterByTime=(o,n)=>parseInt(o._monthofyear)===n;break;case"thisYear":break;default:break}var evalValue=eval(e.value)}catch(o){evalValue=0}return{...e,value:evalValue}}),unit:chartItem.Setting.unit,legend:chartItem.Setting.legend})]})},ViewById=s=>{const o=useForm({shouldFocusError:!1}),[n,a]=React.useState(),l=React.useMemo(()=>(n==null?void 0:n.Props)??[],[n]);return React.useEffect(()=>{s.id&&new SettingDataController("view").getByIds([s.id]).then(async u=>{if(u.code===200&&u.data[0]){let d=u.data[0];d.Props&&typeof d.Props=="string"&&(d.Props=JSON.parse(d.Props)),a(d)}})},[s.id]),n?l.filter(c=>!c.ParentId).map(c=>jsxRuntimeExports.jsx(RenderLayerElement,{item:c,list:l,style:s.style,className:s.className,type:"view",methods:o,indexItem:s.data,propsData:s.propsData,childrenData:s.childrenData,itemData:s.itemData},c.Id)):null},regexGetVariableByThis=/\${this\.(\w+)}/,regexGetVariables=/\${([^}]*)}/,replaceVariables=/\${([^}]*)}/g,regexWatchDoubleQuote=/watch\("([^"]*)"\)/,regexWatchSingleQuote=/watch\('([^']*)'\)/,supportProperties=["Selector","Layout","Position","Dimension","Font","Appearance","Background"],RenderPageView=({childrenData:s,propsData:o,itemData:n,layers:a=[],children:l,methods:c,bodyId:u})=>a.filter(d=>!d.ParentId||d.ParentId===u).map(d=>jsxRuntimeExports.jsx(RenderLayerElement,{item:d,list:a,methods:c,bodyChildren:l,childrenData:s,itemData:n,propsData:o,type:"page"},d.Id)),RenderLayerElement=props=>{var s,o;const location=useLocation(),params=useParams(),query=new URLSearchParams(location.search),navigate=useNavigate(),children=React.useMemo(()=>props.list.filter(n=>n.ParentId===props.item.Id),[props.list,props.item]),replaceThisVariables=(n,a)=>n.replace(replaceVariables,l=>{var h;const c=regexGetVariables.exec(l);if(!(c!=null&&c[1]))return l;const u=c[1].split(".");let d=l;switch(u[0]){case"this":d=(h=props.indexItem)==null?void 0:h[u[1]];break;case"location":d=location[u[1]];break;case"query":d=query.get(u[1]);break;case"params":d=params[u[1]];break;case"cookie":d=Util.getCookie(u[1]);break;case"storage":d=Util.getStorage(u[1]);break;case"session":d=Util.getSession(u[1]);break;default:regexWatchSingleQuote.test(c[1])?d=props.methods.watch(c[1].match(regexWatchSingleQuote)[1]):regexWatchDoubleQuote.test(c[1])&&(d=props.methods.watch(c[1].match(regexWatchDoubleQuote)[1]));break}return a&&typeof d=="string"&&(d=`"${d}"`),d}),watchForCustomProps=React.useMemo(()=>{if(!props.item.State)return;const tmp={},triggerState=props.item.State.filter(n=>{var a;return(a=n.Trigger)==null?void 0:a.length});if(triggerState.length){for(const st of triggerState){if(regexGetVariables.test(st.Trigger))var caculate=replaceThisVariables(st.Trigger,!0);else caculate=st.Trigger;try{var checked=eval(caculate)}catch(n){console.log(caculate,n)}if(checked)for(const n of supportProperties)st[n]&&Object.keys(st[n]).forEach(a=>{st[n][a]&&(tmp[a]??(tmp[a]={}),tmp[a]={...tmp[a],...st[n][a]})})}return tmp}},[props.methods.watch(),props.item.State,location.pathname,location.search,params]),customProps=React.useMemo(()=>{var n;let _props={...props.item.Setting};return _props.style??(_props.style={}),_props.className??(_props.className=""),(n=_props.action)!=null&&n.length&&Array.isArray(_props.action)&&Object.values(TriggerType).forEach(trigger=>{const triggerActions=_props.action.filter(a=>a.Type===trigger),handleEvent=async(acts=[])=>{for(const[i,act]of acts.entries()){const actItem=act;switch(actItem.Action){case ActionType.navigate:if(actItem.To)if(props.indexItem&&regexGetVariables.test(actItem.To)){const a=replaceThisVariables(actItem.To);a.includes("https")?window.open(a,"_blank"):navigate((a.startsWith("/")?"/":"")+a.split("/").filter(l=>!!l.trim()).join("/"))}else actItem.To.includes("https")?window.open(actItem.To,"_blank"):navigate(actItem.To.startsWith("/")?actItem.To:`/${actItem.To}`);break;case ActionType.submit:const formElement=document.getElementById(actItem.To),submitBtn=formElement==null?void 0:formElement.querySelector(":scope > button.submit-form"),successBtn=formElement==null?void 0:formElement.querySelector(":scope > button.success-form");submitBtn&&(successBtn&&triggerActions.slice(i+1).length&&(successBtn.onclick=()=>handleEvent(triggerActions.slice(i+1))),submitBtn.click());return;case ActionType.showPopup:const openPopupBtn=document.querySelector(`.open-${actItem.To}`);openPopupBtn&&openPopupBtn.click();return;case ActionType.closePopup:const closePopupBtn=document.querySelector(`.close-${actItem.To}`);closePopupBtn&&closePopupBtn.click();return;case ActionType.setValue:props.methods.setValue(actItem.NameField,eval(actItem.CaculateValue));return;case ActionType.loadMore:props.methods.watch(`loadMore-${actItem.loadingId}`)||props.methods.setValue(`loadMore-${actItem.loadingId}`,!0);return}}};switch(trigger){case TriggerType.click:triggerActions.length&&(_props.onClick=()=>handleEvent(triggerActions),_props.style?_props.style={..._props.style,cursor:"pointer"}:_props.style={cursor:"pointer"});break;case TriggerType.scrollend:triggerActions.length&&(_props.onScroll=a=>{let l=a.target;l.scrollTop&&Math.round(l.offsetHeight+l.scrollTop)>=l.scrollHeight-1&&handleEvent(triggerActions)});break}}),props.style&&(_props.style={..._props.style,...props.style}),watchForCustomProps!=null&&watchForCustomProps.style&&(_props.style={..._props.style,...watchForCustomProps.style}),props.className&&(_props.className=[..._props.className.split(" "),...props.className.split(" ")].filter((a,l,c)=>a.length&&c.indexOf(a)===l).join(" ")),watchForCustomProps!=null&&watchForCustomProps.className&&(_props.className=[..._props.className.split(" "),...watchForCustomProps.className.split(" ")].filter((a,l,c)=>a.length&&c.indexOf(a)===l).join(" ")),delete _props.action,props.propsData&&props.propsData[props.item.Id]&&(_props=props.type==="card"?{..._props,...props.propsData[props.item.Id](props.indexItem,props.index)}:{..._props,...props.propsData[props.item.Id]}),_props},[props.item,props.propsData,props.methods,watchForCustomProps]),watchForDataValue=React.useMemo(()=>{var c;const n=props.methods.watch(),a={rels:n._rels,cols:n._cols},l=(c=props.item.NameField)==null?void 0:c.split(".");return l&&l.length>1&&(a[`${l[0]}`]=n[`_${l[0]}`]),a},[props.methods.watch(),props.item.NameField]),dataValue=React.useMemo(()=>{var a,l,c,u,d,h,f,g,p,v,b,_,w;if(props.type==="page"||!((a=props.item.NameField)!=null&&a.length)||!props.indexItem)return;const n=props.item.NameField.split(".");if(n.length>1){const x=(l=watchForDataValue.rels)==null?void 0:l.find(C=>C.TableName===n[0].replace("Id","")&&C.Name===n[1]);if(!x)return;let S=(u=(c=watchForDataValue[`${n[0]}`])==null?void 0:c.find(C=>{var T;return C&&((T=props.indexItem[n[0]])==null?void 0:T.includes(C.Id))}))==null?void 0:u[n[1]];switch(x.DataType){case FEDataType.FILE:S=(d=S==null?void 0:S.split(","))==null?void 0:d[0],S&&(props.item.Type===ComponentType.container||props.item.Type===ComponentType.navLink)&&(S={backgroundImage:`url(${S.startsWith("http")?S:ConfigData.imgUrlId+S})`});break;case FEDataType.HTML:S={__html:S};break;case FEDataType.MONEY:S=S?Util.money(S):void 0;break;case FEDataType.DATE:S=S?Util.datetoString(new Date(typeof S=="string"?parseInt(S):S)):void 0;break;case FEDataType.DATETIME:S=S?Util.datetoString(new Date(typeof S=="string"?parseInt(S):S),"dd/mm/yyyy hh:mm"):void 0;break;default:(f=(h=x.Form)==null?void 0:h.Options)!=null&&f.length&&(x.Form.ComponentType===ComponentType.select1?S=((g=x.Form.Options.find(C=>C.id===S))==null?void 0:g.name)??S:S=x.Form.Options.filter(C=>{switch(x.DataType){case FEDataType.BOOLEAN:return S===C.id||`${S}`==`${C.id}`;default:return S==null?void 0:S.includes(C.id)}}).map(C=>C.name).join(","));break}return S}else{const x=(p=watchForDataValue.cols)==null?void 0:p.find(C=>C.Name===props.item.NameField);if(!x)return;let S=props.indexItem[props.item.NameField];switch(x.DataType){case FEDataType.FILE:S=(v=S==null?void 0:S.split(","))==null?void 0:v[0],(props.item.Type===ComponentType.container||props.item.Type===ComponentType.navLink)&&(S={backgroundImage:`url(${S.startsWith("http")?S:ConfigData.imgUrlId+S})`});break;case FEDataType.HTML:S={__html:S};break;case FEDataType.MONEY:S=S?Util.money(S):void 0;break;case FEDataType.DATE:S=S?Util.datetoString(new Date(typeof S=="string"?parseInt(S):S)):void 0;break;case FEDataType.DATETIME:S=S?Util.datetoString(new Date(typeof S=="string"?parseInt(S):S),"dd/mm/yyyy hh:mm"):void 0;break;default:(_=(b=x.Form)==null?void 0:b.Options)!=null&&_.length&&(x.Form.ComponentType===ComponentType.select1?S=((w=x.Form.Options.find(C=>C.id===S))==null?void 0:w.name)??S:S=x.Form.Options.filter(C=>{switch(x.DataType){case FEDataType.BOOLEAN:return S===C.id||`${S}`==`${C.id}`;default:return S==null?void 0:S.includes(C.id)}}).map(C=>C.name).join(","));break}return S}},[props.indexItem,props.item,watchForDataValue]),typeProps=React.useMemo(()=>{var a,l;let n={...customProps};switch(props.item.Type){case ComponentType.card:if(n.loadMore===void 0&&(n.loadMore=(a=props.methods)==null?void 0:a.watch(`loadMore-${props.item.Id}`)),n.loadMore!==void 0&&(n.onLoaded=c=>{var u,d;(u=props.methods)==null||u.setValue(`loadMore-${props.item.Id}`,c.data.length===c.totalCount?"end":!1),(d=customProps.onLoaded)==null||d.call(customProps,c)},n.onUnMount=()=>{var c;(c=props.methods)==null||c.setValue(`loadMore-${props.item.Id}`,null)}),n.controller&&n.controller!=="all"){let c={...n.controller};if(c.searchRaw&&regexGetVariables.test(c.searchRaw)){const u=replaceThisVariables(c.searchRaw);c.searchRaw=u}if(c.page&&regexGetVariables.test(`${c.page}`)){const u=replaceThisVariables(`${c.page}`);c.page=parseInt(u)}if(c.size&&regexGetVariables.test(`${c.size}`)){const u=replaceThisVariables(`${c.size}`);c.page=parseInt(u)}if(c.ids&&regexGetVariables.test(c.ids))if(regexGetVariableByThis.test(c.ids)){const u=regexGetVariableByThis.exec(c.ids)[1];n.cardData=(((l=props.methods)==null?void 0:l.watch(`_${u}`))??[]).filter(d=>{var h,f;return(f=(h=props.indexItem)==null?void 0:h[u])==null?void 0:f.includes(d.Id)})}else{const u=replaceThisVariables(c.ids);c.ids=u}n.controller=c}break;case ComponentType.navLink:if(dataValue&&dataValue.backgroundImage&&(n={...customProps,style:{...customProps.style,...dataValue}}),n.to)if(props.indexItem&&regexGetVariables.test(n.to)){const c=replaceThisVariables(n.to);c.includes("https")&&(n.target="_blank"),n.to=(c.startsWith("/")?"/":"")+c.split("/").filter(u=>!!u.trim()).join("/")}else n.to.includes("https")?n.target="_blank":n.to=n.to.startsWith("/")?n.to:`/${n.to}`;break;case ComponentType.button:if(children.length){const c=children.find(d=>d.Setting.type==="prefix"),u=children.find(d=>d.Setting.type==="suffix");c&&(n.prefix=jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:c,style:void 0,className:void 0})),u&&(n.suffix=jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:u,style:void 0,className:void 0}))}break}return n},[customProps,props.item.Type,dataValue,children,props.methods.watch(),location]);if(props.itemData&&props.itemData[props.item.Id])return props.type==="card"?props.itemData[props.item.Id](props.indexItem,props.index):props.itemData[props.item.Id];switch(props.item.Type){case ComponentType.navLink:if(props.childrenData&&props.childrenData[props.item.Id])var childComponent=props.type==="card"?props.childrenData[props.item.Id](props.indexItem,props.index):props.childrenData[props.item.Id];return Array.isArray(dataValue)?dataValue.map((n,a)=>{var c;const l={...typeProps};return l.indexItem={...props.indexItem,[props.item.NameField.split(".").length>1?props.item.NameField.split(".")[1]:props.item.NameField]:n},jsxRuntimeExports.jsx(NavLink,{...l,children:childComponent??((c=customProps.className)!=null&&c.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(u=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:u,style:void 0,className:void 0},u.Id)),props.bodyChildren]}):children.map(u=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:u,style:void 0,className:void 0},u.Id)))},`${n}-${a}`)}):jsxRuntimeExports.jsx(NavLink,{...typeProps,children:childComponent??((s=customProps.className)!=null&&s.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(n=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:n,style:void 0,className:void 0},n.Id)),props.bodyChildren]}):children.map(n=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:n,style:void 0,className:void 0},n.Id)))});case ComponentType.container:if(props.childrenData&&props.childrenData[props.item.Id])var childComponent=props.type==="card"?props.childrenData[props.item.Id](props.indexItem,props.index):props.childrenData[props.item.Id];if(dataValue&&dataValue.backgroundImage)var containerProps={...customProps,style:{...customProps.style,...dataValue}};return Array.isArray(dataValue)?dataValue.map((n,a)=>{var c;const l={...containerProps??customProps};return l.indexItem={...props.indexItem,[props.item.NameField.split(".").length>1?props.item.NameField.split(".")[1]:props.item.NameField]:n},jsxRuntimeExports.jsx("div",{...l,children:childComponent??((c=customProps.className)!=null&&c.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(u=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:u,style:void 0,className:void 0},u.Id)),props.bodyChildren]}):children.map(u=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:u,style:void 0,className:void 0},u.Id)))},`${n}-${a}`)}):jsxRuntimeExports.jsx("div",{...containerProps??customProps,children:childComponent??((o=customProps.className)!=null&&o.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(n=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:n,style:void 0,className:void 0},n.Id)),props.bodyChildren]}):children.map(n=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:n,style:void 0,className:void 0},n.Id)))});case ComponentType.text:return props.item.NameField?typeof dataValue=="object"?jsxRuntimeExports.jsx(Text$2,{...customProps,html:dataValue.__html}):jsxRuntimeExports.jsx(Text$2,{...customProps,children:dataValue}):jsxRuntimeExports.jsx(Text$2,{...customProps,children:customProps.value??""});case ComponentType.img:return props.item.NameField?dataValue?jsxRuntimeExports.jsx("img",{alt:"",referrerPolicy:"no-referrer",onError:n=>{n.currentTarget.src="https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/color/multimedia/image.svg"},...customProps,src:dataValue.startsWith("http")?dataValue:ConfigData.imgUrlId+dataValue},dataValue):null:jsxRuntimeExports.jsx("img",{alt:"",referrerPolicy:"no-referrer",onError:n=>{n.currentTarget.src="https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/color/multimedia/image.svg"},...customProps});case ComponentType.rate:return props.item.NameField?jsxRuntimeExports.jsx(Rating,{...customProps,value:dataValue}):jsxRuntimeExports.jsx(Rating,{...customProps});case ComponentType.progressBar:return props.item.NameField?jsxRuntimeExports.jsx(ProgressBar,{...customProps,progressBarOnly:!0,percent:dataValue}):jsxRuntimeExports.jsx(ProgressBar,{...customProps,progressBarOnly:!0});case ComponentType.progressCircle:return props.item.NameField?jsxRuntimeExports.jsx(ProgressCircle,{...customProps,percent:dataValue}):jsxRuntimeExports.jsx(ProgressCircle,{...customProps});case ComponentType.icon:return dataValue?jsxRuntimeExports.jsx(Winicon,{...customProps,src:dataValue}):props.item.NameField?null:jsxRuntimeExports.jsx(Winicon,{...customProps});case ComponentType.chart:return jsxRuntimeExports.jsx(ChartById,{...customProps,id:customProps.chartId});case ComponentType.form:return jsxRuntimeExports.jsx(FormById,{...customProps,id:customProps.formId});case ComponentType.card:return jsxRuntimeExports.jsx(CardById,{...typeProps,id:customProps.cardId});case ComponentType.view:return jsxRuntimeExports.jsx(ViewById,{...customProps,id:customProps.viewId});case ComponentType.popup:return customProps.id=props.item.Id,jsxRuntimeExports.jsx(ActionPopup,{...customProps,children:children.map(n=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:n,style:void 0,className:void 0},n.Id))});case ComponentType.button:return jsxRuntimeExports.jsx(SimpleButton,{...typeProps});default:return jsxRuntimeExports.jsx("div",{...customProps})}},ActionPopup=({id:s,children:o})=>{const n=React.useRef(null);return React.useEffect(()=>{n.current&&n.current.setState({...n.current.state,content:o})},[o]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:n}),jsxRuntimeExports.jsx("button",{hidden:!0,type:"button",className:`open-${s}`,onClick:()=>{showPopup({ref:n,content:o??jsxRuntimeExports.jsx("div",{})})}}),jsxRuntimeExports.jsx("button",{hidden:!0,type:"button",className:`close-${s}`,onClick:()=>{closePopup(n)}})]})},PageById=s=>{var h;const o=useForm({shouldFocusError:!1}),[n,a]=React.useState(),[l,c]=React.useState([]),[u,d]=React.useState([]);return React.useEffect(()=>{new TableController("page").getByListId([s.id]).then(g=>{if(g.code===200&&g.data[0]){const p=g.data[0];a(p);const v=new TableController("layer");p.LayoutId!==(n==null?void 0:n.LayoutId)?Promise.all([v.getListSimple({page:1,size:2e3,query:`(@Id:{${p.LayoutId}}) | (@LayoutId:{${p.LayoutId}})`}),v.getListSimple({page:1,size:1e3,query:`@PageId:{${p.Id}}`})]).then(b=>{b[0].code===200&&b[1].code===200&&(c(b[0].data.map(_=>({..._,Setting:JSON.parse(_.Setting),State:_.State?JSON.parse(_.State):void 0}))),d(b[1].data.map(_=>({..._,Setting:JSON.parse(_.Setting),State:_.State?JSON.parse(_.State):void 0}))))}):v.getListSimple({page:1,size:1e3,query:`@PageId:{${p.Id}}`}).then(b=>{b.code===200&&d(b.data.map(_=>({..._,Setting:JSON.parse(_.Setting),State:_.State?JSON.parse(_.State):void 0})))})}else a(void 0)})},[s.id]),n&&l.length?jsxRuntimeExports.jsx(RenderPageView,{layers:l,...s,methods:s.methods??o,children:jsxRuntimeExports.jsx(RenderPageView,{layers:u,...s,methods:s.methods??o,bodyId:(h=l.find(f=>{var g,p;return(p=(g=f.Setting)==null?void 0:g.className)==null?void 0:p.includes("layout-body")}))==null?void 0:h.Id})},n.LayoutId):null},PageByUrl=s=>{var h;const o=useForm({shouldFocusError:!1}),[n,a]=React.useState(),[l,c]=React.useState([]),[u,d]=React.useState([]);return React.useEffect(()=>{new TableController("page").getListSimple({page:1,size:1,query:`@Url:{${s.url.length?s.url.replace(/[\-\/]/g,g=>"\\"+g):"\\/"}}`}).then(g=>{if(g.code===200&&g.data[0]){const p=g.data[0];a(p);const v=new TableController("layer");p.LayoutId!==(n==null?void 0:n.LayoutId)?Promise.all([v.getListSimple({page:1,size:2e3,query:`(@Id:{${p.LayoutId}}) | (@LayoutId:{${p.LayoutId}})`}),v.getListSimple({page:1,size:1e3,query:`@PageId:{${p.Id}}`})]).then(b=>{b[0].code===200&&b[1].code===200&&(c(b[0].data.map(_=>({..._,Setting:JSON.parse(_.Setting),State:_.State?JSON.parse(_.State):void 0}))),d(b[1].data.map(_=>({..._,Setting:JSON.parse(_.Setting),State:_.State?JSON.parse(_.State):void 0}))))}):v.getListSimple({page:1,size:1e3,query:`@PageId:{${p.Id}}`}).then(b=>{b.code===200&&d(b.data.map(_=>({..._,Setting:JSON.parse(_.Setting),State:_.State?JSON.parse(_.State):void 0})))})}else a(void 0)})},[s.url]),n&&l.length?jsxRuntimeExports.jsx(RenderPageView,{layers:l,...s,methods:s.methods??o,children:jsxRuntimeExports.jsx(RenderPageView,{layers:u,...s,methods:s.methods??o,bodyId:(h=l.find(f=>{var g,p;return(p=(g=f.Setting)==null?void 0:g.className)==null?void 0:p.includes("layout-body")}))==null?void 0:h.Id},n.Id)},n.LayoutId):null},CardById=React.forwardRef((s,o)=>{var x;const n=useForm({shouldFocusError:!1}),[a,l]=React.useState(),c=React.useMemo(()=>(a==null?void 0:a.Props)??[],[a]),u=new TableController("column"),d=new TableController("rel"),h=React.useMemo(()=>c.filter(S=>{var C;return(C=S.NameField)==null?void 0:C.length}).map(S=>S.NameField),[c.length]),[f,g]=React.useState(),[p,v]=React.useState({data:[],totalCount:void 0});React.useEffect(()=>{s.id?new SettingDataController("card").getByIds([s.id]).then(async C=>{if(C.code===200){let T=C.data[0];T.Props&&typeof T.Props=="string"&&(T.Props=JSON.parse(T.Props)),l(T)}}):a&&l(void 0)},[s.id]),React.useEffect(()=>{!s.controller&&!f?g({page:1,size:8,searchRaw:"*"}):f!==s.controller&&(s.controller==="all"||!f||Object.keys(s.controller).every(S=>f[S]!==s.controller[S]))&&g(s.controller)},[s.controller]);const b=async()=>{const S=h.filter(T=>T.split(".").length>1),C=await d.getListSimple({page:1,size:100,query:`@TableFK:{${a.TbName}} @Column:{${S.map(T=>T.split(".")[0]).filter((T,R,A)=>A.indexOf(T)===R).join(" | ")}}`,returns:["Id","Column","TablePK"]});if(C.code===200){const T=await u.getListSimple({page:1,size:C.data.length*50,query:`@TableName:{${C.data.map(R=>R.TablePK).join(" | ")}} @Name:{${C.data.map(R=>S.filter(M=>M.split(".")[0]===R.Column).map(M=>M.split(".")[1])).flat(1/0).join(" | ")}}`});T.code===200&&n.setValue("_rels",T.data)}},_=async()=>{const S=await u.getListSimple({page:1,size:200,query:`@TableName:{${a.TbName}} @Name:{${h.filter(C=>C.split(".").length===1).join(" | ")}}`});S.code===200&&n.setValue("_cols",S.data)},w=async S=>{const C=new DataController(a.TbName);let T;if(f==="all"){const A=await C.getAll();A.code===200&&(T={data:A.data,totalCount:A.data.length})}else if(f.searchRaw){const A={...f,searchRaw:f.searchRaw??"*"};S&&(A.page=S);const M=await C.aggregateList(A);M.code===200&&(T={data:S?[...p.data,...M.data]:M.data,totalCount:M.totalCount})}else{let A=f.ids.split(",");f.maxLength&&f.maxLength!=="none"&&(A=A.slice(0,f.maxLength));const M=await C.getByListId(A),D=M.data.filter(O=>O!=null);M.code===200&&(T={data:D,totalCount:D.length})}if(!T)return;let R=c.filter(A=>A.Type===ComponentType.card&&A.Setting.controller.ids&&regexGetVariableByThis.test(A.Setting.controller.ids)).map(A=>regexGetVariableByThis.exec(A.Setting.controller.ids)[1]);if(R.push(...h.filter(A=>A.split(".").length>1).map(A=>A.split(".")[0])),R=R.filter((A,M,D)=>D.indexOf(A)===M),R.length)for(const A of R){const M=n.getValues(`_${A}`)??[],D=new DataController(A.replace("Id","")),O=T.data.map(H=>{var j;return(j=H[A])==null?void 0:j.split(",")}).flat(1/0).filter((H,j,q)=>(H==null?void 0:H.length)&&M.every(Y=>Y.Id!==H)&&q.indexOf(H)===j);O.length&&D.getByListId(O).then(H=>{H.code===200&&n.setValue(`_${A}`,[...M,...H.data.filter(j=>j!=null)])})}v(T),s.onLoaded&&s.onLoaded(T)};return React.useEffect(()=>{h.length&&(_(),b())},[h]),React.useEffect(()=>{a&&!s.loadMore&&(f&&!s.cardData?w():s.cardData&&v({data:s.cardData,totalCount:s.cardData.length}))},[a,f,(x=s.cardData)==null?void 0:x.length]),React.useEffect(()=>{s.loadMore&&f&&f!=="all"&&p.totalCount&&p.data.length<p.totalCount&&w(Math.floor(p.data.length/f.size)+1)},[s.loadMore,f,p]),React.useEffect(()=>{var S;return(S=s.onUnMount)==null?void 0:S.call(s)},[]),React.useImperativeHandle(o,()=>({getData:w,data:p,setData:v}),[p,a,f]),a?p.totalCount===0?s.emptyLink?jsxRuntimeExports.jsx(EmptyPage,{imgUrl:s.emptyLink,imgStyle:{maxWidth:"16.4rem"},style:s.style,title:"There are no data found."}):null:p.data.map((S,C)=>jsxRuntimeExports.jsx(RenderCard,{...s,cardItem:a,layers:c,methods:n,indexItem:S,index:C},S.Id)):null}),RenderCard=s=>s.cardItem.Props.filter(o=>!o.ParentId).map(o=>jsxRuntimeExports.jsx(RenderLayerElement,{item:o,list:s.layers,style:s.style,className:s.className,type:"card",methods:s.methods,indexItem:s.indexItem,index:s.index,itemData:s.itemData,childrenData:s.childrenData,propsData:s.propsData},o.Id)),appendDesignTokens=s=>{const o=s.map(n=>n.Value?{...n,Value:typeof n.Value=="string"?JSON.parse(n.Value):n.Value}:n);if(o.length){const n=o.filter(h=>{var f,g;return h.Type!==DesignTokenType.group&&(((f=h.Value)==null?void 0:f.lightMode)||((g=h.Value)==null?void 0:g.darkMode))}),a=o.filter(h=>h.Type===DesignTokenType.group);let l=document.head.querySelector(":scope > .designTokens")??document.createElement("style");l.type="text/css";const c=n.filter(h=>h.Type===DesignTokenType.color),u=n.filter(h=>h.Type!==DesignTokenType.color),d=`
        html { 
${c.map(h=>{var g;const f=a.find(p=>p.Id===h.ParentId);return(g=h.Value)!=null&&g.lightMode?`--${f?`${Util.toSlug(f.Name)}-`:""}${Util.toSlug(h.Name)}: ${h.Value.lightMode};`:""}).join(`
`)}
 }


        html.dark { 
${c.map(h=>{var g;const f=a.find(p=>p.Id===h.ParentId);return(g=h.Value)!=null&&g.darkMode?`--${f?`${Util.toSlug(f.Name)}-`:""}${Util.toSlug(h.Name)}: ${h.Value.darkMode};`:""}).join(`
`)}
 }


        ${u.map(h=>{let f;switch(h.Type){case DesignTokenType.font:f=`font: ${h.Value.lightMode}`;break;case DesignTokenType.border:f=`border: ${h.Value.lightMode}`;break;case DesignTokenType.boxShadow:f=`box-shadow: ${h.Value.lightMode}`;break;case DesignTokenType.custom:return h.Value.lightMode}return f?`.${h.Name} { 
${f};
 }`:""}).join(`
`)}
        `;l.innerHTML=d,l.classList.contains("designTokens")||(l.classList.add("designTokens"),document.head.appendChild(l))}},WiniProvider=s=>(ConfigData.pid=s.pid,ConfigData.url=s.url,ConfigData.imgUrlId=s.imgUrlId,s.onInvalidToken&&(ConfigData.onInvalidToken=s.onInvalidToken),React.useEffect(()=>{ConfigData.pid=s.pid,new TableController("designtoken").getAll().then(a=>{a.code===200&&a.data.length&&appendDesignTokens(a.data)}),new WiniController("Project").getByIds([s.pid]).then(a=>{a.code===200&&a.data[0]&&(document.head.querySelector(':scope > link[rel="icon"]').href=ConfigData.imgUrlId+a.data[0].LogoId,document.head.querySelector(":scope > title").innerHTML=a.data[0].Name,s.onProjectLoaded&&s.onProjectLoaded(a.data[0]))})},[s.pid]),React.useEffect(()=>{ConfigData.url=s.url},[s.url]),React.useEffect(()=>{ConfigData.imgUrlId=s.imgUrlId},[s.imgUrlId]),React.useEffect(()=>{s.onInvalidToken&&(ConfigData.onInvalidToken=s.onInvalidToken)},[s.onInvalidToken]),jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsx(Lt,{}),jsxRuntimeExports.jsx(Dialog$1,{}),jsxRuntimeExports.jsx(Routes,{children:s.children})]})),isString=s=>typeof s=="string",defer=()=>{let s,o;const n=new Promise((a,l)=>{s=a,o=l});return n.resolve=s,n.reject=o,n},makeString=s=>s==null?"":""+s,copy=(s,o,n)=>{s.forEach(a=>{o[a]&&(n[a]=o[a])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=s=>s&&s.indexOf("###")>-1?s.replace(lastOfPathSeparatorRegExp,"."):s,canNotTraverseDeeper=s=>!s||isString(s),getLastOfPath=(s,o,n)=>{const a=isString(o)?o.split("."):o;let l=0;for(;l<a.length-1;){if(canNotTraverseDeeper(s))return{};const c=cleanKey(a[l]);!s[c]&&n&&(s[c]=new n),Object.prototype.hasOwnProperty.call(s,c)?s=s[c]:s={},++l}return canNotTraverseDeeper(s)?{}:{obj:s,k:cleanKey(a[l])}},setPath=(s,o,n)=>{const{obj:a,k:l}=getLastOfPath(s,o,Object);if(a!==void 0||o.length===1){a[l]=n;return}let c=o[o.length-1],u=o.slice(0,o.length-1),d=getLastOfPath(s,u,Object);for(;d.obj===void 0&&u.length;)c=`${u[u.length-1]}.${c}`,u=u.slice(0,u.length-1),d=getLastOfPath(s,u,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${c}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${c}`]=n},pushPath=(s,o,n,a)=>{const{obj:l,k:c}=getLastOfPath(s,o,Object);l[c]=l[c]||[],l[c].push(n)},getPath=(s,o)=>{const{obj:n,k:a}=getLastOfPath(s,o);if(n&&Object.prototype.hasOwnProperty.call(n,a))return n[a]},getPathWithDefaults=(s,o,n)=>{const a=getPath(s,n);return a!==void 0?a:getPath(o,n)},deepExtend=(s,o,n)=>{for(const a in o)a!=="__proto__"&&a!=="constructor"&&(a in s?isString(s[a])||s[a]instanceof String||isString(o[a])||o[a]instanceof String?n&&(s[a]=o[a]):deepExtend(s[a],o[a],n):s[a]=o[a]);return s},regexEscape=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=s=>isString(s)?s.replace(/[&<>"'\/]/g,o=>_entityMap[o]):s;class RegExpCache{constructor(o){this.capacity=o,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(o){const n=this.regExpMap.get(o);if(n!==void 0)return n;const a=new RegExp(o);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(o,a),this.regExpQueue.push(o),a}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(s,o,n)=>{o=o||"",n=n||"";const a=chars.filter(u=>o.indexOf(u)<0&&n.indexOf(u)<0);if(a.length===0)return!0;const l=looksLikeObjectPathRegExpCache.getRegExp(`(${a.map(u=>u==="?"?"\\?":u).join("|")})`);let c=!l.test(s);if(!c){const u=s.indexOf(n);u>0&&!l.test(s.substring(0,u))&&(c=!0)}return c},deepFind=function(s,o){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!s)return;if(s[o])return Object.prototype.hasOwnProperty.call(s,o)?s[o]:void 0;const a=o.split(n);let l=s;for(let c=0;c<a.length;){if(!l||typeof l!="object")return;let u,d="";for(let h=c;h<a.length;++h)if(h!==c&&(d+=n),d+=a[h],u=l[d],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&h<a.length-1)continue;c+=h-c+1;break}l=u}return l},getCleanedCode=s=>s==null?void 0:s.replace("_","-"),consoleLogger={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,o){var n,a;(a=(n=console==null?void 0:console[s])==null?void 0:n.apply)==null||a.call(n,console,o)}};class Logger{constructor(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(o,n)}init(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=o||consoleLogger,this.options=n,this.debug=n.debug}log(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return this.forward(n,"log","",!0)}warn(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return this.forward(n,"warn","",!0)}error(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return this.forward(n,"error","")}deprecate(){for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(o,n,a,l){return l&&!this.debug?null:(isString(o[0])&&(o[0]=`${a}${this.prefix} ${o[0]}`),this.logger[n](o))}create(o){return new Logger(this.logger,{prefix:`${this.prefix}:${o}:`,...this.options})}clone(o){return o=o||this.options,o.prefix=o.prefix||this.prefix,new Logger(this.logger,o)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(o,n){return o.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const l=this.observers[a].get(n)||0;this.observers[a].set(n,l+1)}),this}off(o,n){if(this.observers[o]){if(!n){delete this.observers[o];return}this.observers[o].delete(n)}}emit(o){for(var n=arguments.length,a=new Array(n>1?n-1:0),l=1;l<n;l++)a[l-1]=arguments[l];this.observers[o]&&Array.from(this.observers[o].entries()).forEach(u=>{let[d,h]=u;for(let f=0;f<h;f++)d(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(u=>{let[d,h]=u;for(let f=0;f<h;f++)d.apply(d,[o,...a])})}}class ResourceStore extends EventEmitter{constructor(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=o||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(o){this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}removeNamespaces(o){const n=this.options.ns.indexOf(o);n>-1&&this.options.ns.splice(n,1)}getResource(o,n,a){var f,g;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,u=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;o.indexOf(".")>-1?d=o.split("."):(d=[o,n],a&&(Array.isArray(a)?d.push(...a):isString(a)&&c?d.push(...a.split(c)):d.push(a)));const h=getPath(this.data,d);return!h&&!n&&!a&&o.indexOf(".")>-1&&(o=d[0],n=d[1],a=d.slice(2).join(".")),h||!u||!isString(a)?h:deepFind((g=(f=this.data)==null?void 0:f[o])==null?void 0:g[n],a,c)}addResource(o,n,a,l){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const u=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let d=[o,n];a&&(d=d.concat(u?a.split(u):a)),o.indexOf(".")>-1&&(d=o.split("."),l=n,n=d[1]),this.addNamespaces(n),setPath(this.data,d,l),c.silent||this.emit("added",o,n,a,l)}addResources(o,n,a){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const c in a)(isString(a[c])||Array.isArray(a[c]))&&this.addResource(o,n,c,a[c],{silent:!0});l.silent||this.emit("added",o,n,a)}addResourceBundle(o,n,a,l,c){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},d=[o,n];o.indexOf(".")>-1&&(d=o.split("."),l=a,a=n,n=d[1]),this.addNamespaces(n);let h=getPath(this.data,d)||{};u.skipCopy||(a=JSON.parse(JSON.stringify(a))),l?deepExtend(h,a,c):h={...h,...a},setPath(this.data,d,h),u.silent||this.emit("added",o,n,a)}removeResourceBundle(o,n){this.hasResourceBundle(o,n)&&delete this.data[o][n],this.removeNamespaces(n),this.emit("removed",o,n)}hasResourceBundle(o,n){return this.getResource(o,n)!==void 0}getResourceBundle(o,n){return n||(n=this.options.defaultNS),this.getResource(o,n)}getDataByLanguage(o){return this.data[o]}hasLanguageSomeTranslations(o){const n=this.getDataByLanguage(o);return!!(n&&Object.keys(n)||[]).find(l=>n[l]&&Object.keys(n[l]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,o,n,a,l){return s.forEach(c=>{var u;o=((u=this.processors[c])==null?void 0:u.process(o,n,a,l))??o}),o}};const checkedLoadedFor={},shouldHandleAsObject=s=>!isString(s)&&typeof s!="boolean"&&typeof s!="number";class Translator extends EventEmitter{constructor(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],o,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(o){o&&(this.language=o)}exists(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(o==null)return!1;const a=this.resolve(o,n);return(a==null?void 0:a.res)!==void 0}extractFromKey(o,n){let a=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let c=n.ns||this.options.defaultNS||[];const u=a&&o.indexOf(a)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!looksLikeObjectPath(o,a,l);if(u&&!d){const h=o.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:o,namespaces:isString(c)?[c]:c};const f=o.split(a);(a!==l||a===l&&this.options.ns.indexOf(f[0])>-1)&&(c=f.shift()),o=f.join(l)}return{key:o,namespaces:isString(c)?[c]:c}}translate(o,n,a){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),o==null)return"";Array.isArray(o)||(o=[String(o)]);const l=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,c=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(o[o.length-1],n),h=d[d.length-1],f=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(g){const q=n.nsSeparator||this.options.nsSeparator;return l?{res:`${h}${q}${u}`,usedKey:u,exactUsedKey:u,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(n)}:`${h}${q}${u}`}return l?{res:u,usedKey:u,exactUsedKey:u,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(n)}:u}const p=this.resolve(o,n);let v=p==null?void 0:p.res;const b=(p==null?void 0:p.usedKey)||u,_=(p==null?void 0:p.exactUsedKey)||u,w=["[object Number]","[object Function]","[object RegExp]"],x=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,C=n.count!==void 0&&!isString(n.count),T=Translator.hasDefaultValue(n),R=C?this.pluralResolver.getSuffix(f,n.count,n):"",A=n.ordinal&&C?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",M=C&&!n.ordinal&&n.count===0,D=M&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${R}`]||n[`defaultValue${A}`]||n.defaultValue;let O=v;S&&!v&&T&&(O=D);const H=shouldHandleAsObject(O),j=Object.prototype.toString.apply(O);if(S&&O&&H&&w.indexOf(j)<0&&!(isString(x)&&Array.isArray(O))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const q=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,O,{...n,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return l?(p.res=q,p.usedParams=this.getUsedParamsDetails(n),p):q}if(c){const q=Array.isArray(O),Y=q?[]:{},ee=q?_:b;for(const te in O)if(Object.prototype.hasOwnProperty.call(O,te)){const re=`${ee}${c}${te}`;T&&!v?Y[te]=this.translate(re,{...n,defaultValue:shouldHandleAsObject(D)?D[te]:void 0,joinArrays:!1,ns:d}):Y[te]=this.translate(re,{...n,joinArrays:!1,ns:d}),Y[te]===re&&(Y[te]=O[te])}v=Y}}else if(S&&isString(x)&&Array.isArray(v))v=v.join(x),v&&(v=this.extendTranslation(v,o,n,a));else{let q=!1,Y=!1;!this.isValidLookup(v)&&T&&(q=!0,v=D),this.isValidLookup(v)||(Y=!0,v=u);const te=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Y?void 0:v,re=T&&D!==v&&this.options.updateMissing;if(Y||q||re){if(this.logger.log(re?"updateKey":"missingKey",f,h,u,re?D:v),c){const le=this.resolve(u,{...n,keySeparator:!1});le&&le.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ae=[];const ue=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ue&&ue[0])for(let le=0;le<ue.length;le++)ae.push(ue[le]);else this.options.saveMissingTo==="all"?ae=this.languageUtils.toResolveHierarchy(n.lng||this.language):ae.push(n.lng||this.language);const ce=(le,ie,de)=>{var pe;const ge=T&&de!==v?de:te;this.options.missingKeyHandler?this.options.missingKeyHandler(le,h,ie,ge,re,n):(pe=this.backendConnector)!=null&&pe.saveMissing&&this.backendConnector.saveMissing(le,h,ie,ge,re,n),this.emit("missingKey",le,h,ie,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&C?ae.forEach(le=>{const ie=this.pluralResolver.getSuffixes(le,n);M&&n[`defaultValue${this.options.pluralSeparator}zero`]&&ie.indexOf(`${this.options.pluralSeparator}zero`)<0&&ie.push(`${this.options.pluralSeparator}zero`),ie.forEach(de=>{ce([le],u+de,n[`defaultValue${de}`]||D)})}):ce(ae,u,D))}v=this.extendTranslation(v,o,n,p,a),Y&&v===u&&this.options.appendNamespaceToMissingKey&&(v=`${h}:${u}`),(Y||q)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}:${u}`:u,q?v:void 0))}return l?(p.res=v,p.usedParams=this.getUsedParamsDetails(n),p):v}extendTranslation(o,n,a,l,c){var f,g;var u=this;if((f=this.i18nFormat)!=null&&f.parse)o=this.i18nFormat.parse(o,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const p=isString(o)&&(((g=a==null?void 0:a.interpolation)==null?void 0:g.skipOnVariables)!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(p){const _=o.match(this.interpolator.nestingRegexp);v=_&&_.length}let b=a.replace&&!isString(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(b={...this.options.interpolation.defaultVariables,...b}),o=this.interpolator.interpolate(o,b,a.lng||this.language||l.usedLng,a),p){const _=o.match(this.interpolator.nestingRegexp),w=_&&_.length;v<w&&(a.nest=!1)}!a.lng&&l&&l.res&&(a.lng=this.language||l.usedLng),a.nest!==!1&&(o=this.interpolator.nest(o,function(){for(var _=arguments.length,w=new Array(_),x=0;x<_;x++)w[x]=arguments[x];return(c==null?void 0:c[0])===w[0]&&!a.context?(u.logger.warn(`It seems you are nesting recursively key: ${w[0]} in key: ${n[0]}`),null):u.translate(...w,n)},a)),a.interpolation&&this.interpolator.reset()}const d=a.postProcess||this.options.postProcess,h=isString(d)?[d]:d;return o!=null&&(h!=null&&h.length)&&a.applyPostProcessor!==!1&&(o=postProcessor.handle(h,o,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),o}resolve(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,l,c,u,d;return isString(o)&&(o=[o]),o.forEach(h=>{if(this.isValidLookup(a))return;const f=this.extractFromKey(h,n),g=f.key;l=g;let p=f.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const v=n.count!==void 0&&!isString(n.count),b=v&&!n.ordinal&&n.count===0,_=n.context!==void 0&&(isString(n.context)||typeof n.context=="number")&&n.context!=="",w=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(x=>{var S,C;this.isValidLookup(a)||(d=x,!checkedLoadedFor[`${w[0]}-${x}`]&&((S=this.utils)!=null&&S.hasLoadedNamespace)&&!((C=this.utils)!=null&&C.hasLoadedNamespace(d))&&(checkedLoadedFor[`${w[0]}-${x}`]=!0,this.logger.warn(`key "${l}" for languages "${w.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(T=>{var M;if(this.isValidLookup(a))return;u=T;const R=[g];if((M=this.i18nFormat)!=null&&M.addLookupKeys)this.i18nFormat.addLookupKeys(R,g,T,x,n);else{let D;v&&(D=this.pluralResolver.getSuffix(T,n.count,n));const O=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(R.push(g+D),n.ordinal&&D.indexOf(H)===0&&R.push(g+D.replace(H,this.options.pluralSeparator)),b&&R.push(g+O)),_){const j=`${g}${this.options.contextSeparator}${n.context}`;R.push(j),v&&(R.push(j+D),n.ordinal&&D.indexOf(H)===0&&R.push(j+D.replace(H,this.options.pluralSeparator)),b&&R.push(j+O))}}let A;for(;A=R.pop();)this.isValidLookup(a)||(c=A,a=this.getResource(T,x,A,n))}))})}),{res:a,usedKey:l,exactUsedKey:c,usedLng:u,usedNS:d}}isValidLookup(o){return o!==void 0&&!(!this.options.returnNull&&o===null)&&!(!this.options.returnEmptyString&&o==="")}getResource(o,n,a){var c;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(c=this.i18nFormat)!=null&&c.getResource?this.i18nFormat.getResource(o,n,a,l):this.resourceStore.getResource(o,n,a,l)}getUsedParamsDetails(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=o.replace&&!isString(o.replace);let l=a?o.replace:o;if(a&&typeof o.count<"u"&&(l.count=o.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!a){l={...l};for(const c of n)delete l[c]}return l}static hasDefaultValue(o){const n="defaultValue";for(const a in o)if(Object.prototype.hasOwnProperty.call(o,a)&&n===a.substring(0,n.length)&&o[a]!==void 0)return!0;return!1}}class LanguageUtil{constructor(o){this.options=o,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(o){if(o=getCleanedCode(o),!o||o.indexOf("-")<0)return null;const n=o.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(o){if(o=getCleanedCode(o),!o||o.indexOf("-")<0)return o;const n=o.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(o){if(isString(o)&&o.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(o)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?o.toLowerCase():o)}return this.options.cleanCode||this.options.lowerCaseLng?o.toLowerCase():o}isSupportedCode(o){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(o=this.getLanguagePartFromCode(o)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(o)>-1}getBestMatchFromCodes(o){if(!o)return null;let n;return o.forEach(a=>{if(n)return;const l=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(l))&&(n=l)}),!n&&this.options.supportedLngs&&o.forEach(a=>{if(n)return;const l=this.getLanguagePartFromCode(a);if(this.isSupportedCode(l))return n=l;n=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(o,n){if(!o)return[];if(typeof o=="function"&&(o=o(n)),isString(o)&&(o=[o]),Array.isArray(o))return o;if(!n)return o.default||[];let a=o[n];return a||(a=o[this.getScriptPartFromCode(n)]),a||(a=o[this.formatLanguageCode(n)]),a||(a=o[this.getLanguagePartFromCode(n)]),a||(a=o.default),a||[]}toResolveHierarchy(o,n){const a=this.getFallbackCodes(n||this.options.fallbackLng||[],o),l=[],c=u=>{u&&(this.isSupportedCode(u)?l.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return isString(o)&&(o.indexOf("-")>-1||o.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(o)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(o)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(o))):isString(o)&&c(this.formatLanguageCode(o)),a.forEach(u=>{l.indexOf(u)<0&&c(this.formatLanguageCode(u))}),l}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=o,this.options=n,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(o,n){this.rules[o]=n}clearCache(){this.pluralRulesCache={}}getRule(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=getCleanedCode(o==="dev"?"en":o),l=n.ordinal?"ordinal":"cardinal",c=JSON.stringify({cleanedCode:a,type:l});if(c in this.pluralRulesCache)return this.pluralRulesCache[c];let u;try{u=new Intl.PluralRules(a,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!o.match(/-|_/))return dummyRule;const h=this.languageUtils.getLanguagePartFromCode(o);u=this.getRule(h,n)}return this.pluralRulesCache[c]=u,u}needsPlural(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(o,n);return a||(a=this.getRule("dev",n)),(a==null?void 0:a.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(o,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(o,a).map(l=>`${n}${l}`)}getSuffixes(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(o,n);return a||(a=this.getRule("dev",n)),a?a.resolvedOptions().pluralCategories.sort((l,c)=>suffixesOrder[l]-suffixesOrder[c]).map(l=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(o,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=this.getRule(o,a);return l?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${l.select(n)}`:(this.logger.warn(`no plural rule found for: ${o}`),this.getSuffix("dev",n,a))}}const deepFindWithDefaults=function(s,o,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,c=getPathWithDefaults(s,o,n);return!c&&l&&isString(n)&&(c=deepFind(s,n,a),c===void 0&&(c=deepFind(o,n,a))),c},regexSafe=s=>s.replace(/\$/g,"$$$$");class Interpolator{constructor(){var n;let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=o,this.format=((n=o==null?void 0:o.interpolation)==null?void 0:n.format)||(a=>a),this.init(o)}init(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};o.interpolation||(o.interpolation={escapeValue:!0});const{escape:n,escapeValue:a,useRawValueToEscape:l,prefix:c,prefixEscaped:u,suffix:d,suffixEscaped:h,formatSeparator:f,unescapeSuffix:g,unescapePrefix:p,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:_,nestingSuffixEscaped:w,nestingOptionsSeparator:x,maxReplaces:S,alwaysFormat:C}=o.interpolation;this.escape=n!==void 0?n:escape,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=c?regexEscape(c):u||"{{",this.suffix=d?regexEscape(d):h||"}}",this.formatSeparator=f||",",this.unescapePrefix=g?"":p||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?regexEscape(v):b||regexEscape("$t("),this.nestingSuffix=_?regexEscape(_):w||regexEscape(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=S||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const o=(n,a)=>(n==null?void 0:n.source)===a?(n.lastIndex=0,n):new RegExp(a,"g");this.regexp=o(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=o(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=o(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(o,n,a,l){var b;let c,u,d;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=_=>{if(_.indexOf(this.formatSeparator)<0){const C=deepFindWithDefaults(n,h,_,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,a,{...l,...n,interpolationkey:_}):C}const w=_.split(this.formatSeparator),x=w.shift().trim(),S=w.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(n,h,x,this.options.keySeparator,this.options.ignoreJSONStructure),S,a,{...l,...n,interpolationkey:x})};this.resetRegExp();const g=(l==null?void 0:l.missingInterpolationHandler)||this.options.missingInterpolationHandler,p=((b=l==null?void 0:l.interpolation)==null?void 0:b.skipOnVariables)!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:_=>regexSafe(_)},{regex:this.regexp,safeValue:_=>this.escapeValue?regexSafe(this.escape(_)):regexSafe(_)}].forEach(_=>{for(d=0;c=_.regex.exec(o);){const w=c[1].trim();if(u=f(w),u===void 0)if(typeof g=="function"){const S=g(o,c,l);u=isString(S)?S:""}else if(l&&Object.prototype.hasOwnProperty.call(l,w))u="";else if(p){u=c[0];continue}else this.logger.warn(`missed to pass in variable ${w} for interpolating ${o}`),u="";else!isString(u)&&!this.useRawValueToEscape&&(u=makeString(u));const x=_.safeValue(u);if(o=o.replace(c[0],x),p?(_.regex.lastIndex+=u.length,_.regex.lastIndex-=c[0].length):_.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),o}nest(o,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l,c,u;const d=(h,f)=>{const g=this.nestingOptionsSeparator;if(h.indexOf(g)<0)return h;const p=h.split(new RegExp(`${g}[ ]*{`));let v=`{${p[1]}`;h=p[0],v=this.interpolate(v,u);const b=v.match(/'/g),_=v.match(/"/g);(((b==null?void 0:b.length)??0)%2===0&&!_||_.length%2!==0)&&(v=v.replace(/'/g,'"'));try{u=JSON.parse(v),f&&(u={...f,...u})}catch(w){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,w),`${h}${g}${v}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,h};for(;l=this.nestingRegexp.exec(o);){let h=[];u={...a},u=u.replace&&!isString(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;let f=!1;if(l[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(l[1])){const g=l[1].split(this.formatSeparator).map(p=>p.trim());l[1]=g.shift(),h=g,f=!0}if(c=n(d.call(this,l[1].trim(),u),u),c&&l[0]===o&&!isString(c))return c;isString(c)||(c=makeString(c)),c||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${o}`),c=""),f&&(c=h.reduce((g,p)=>this.format(g,p,a.lng,{...a,interpolationkey:l[1].trim()}),c.trim())),o=o.replace(l[0],c),this.regexp.lastIndex=0}return o}}const parseFormatStr=s=>{let o=s.toLowerCase().trim();const n={};if(s.indexOf("(")>-1){const a=s.split("(");o=a[0].toLowerCase().trim();const l=a[1].substring(0,a[1].length-1);o==="currency"&&l.indexOf(":")<0?n.currency||(n.currency=l.trim()):o==="relativetime"&&l.indexOf(":")<0?n.range||(n.range=l.trim()):l.split(";").forEach(u=>{if(u){const[d,...h]=u.split(":"),f=h.join(":").trim().replace(/^'+|'+$/g,""),g=d.trim();n[g]||(n[g]=f),f==="false"&&(n[g]=!1),f==="true"&&(n[g]=!0),isNaN(f)||(n[g]=parseInt(f,10))}})}return{formatName:o,formatOptions:n}},createCachedFormatter=s=>{const o={};return(n,a,l)=>{let c=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(c={...c,[l.interpolationkey]:void 0});const u=a+JSON.stringify(c);let d=o[u];return d||(d=s(getCleanedCode(a),l),o[u]=d),d(n)}};class Formatter{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=o,this.formats={number:createCachedFormatter((n,a)=>{const l=new Intl.NumberFormat(n,{...a});return c=>l.format(c)}),currency:createCachedFormatter((n,a)=>{const l=new Intl.NumberFormat(n,{...a,style:"currency"});return c=>l.format(c)}),datetime:createCachedFormatter((n,a)=>{const l=new Intl.DateTimeFormat(n,{...a});return c=>l.format(c)}),relativetime:createCachedFormatter((n,a)=>{const l=new Intl.RelativeTimeFormat(n,{...a});return c=>l.format(c,a.range||"day")}),list:createCachedFormatter((n,a)=>{const l=new Intl.ListFormat(n,{...a});return c=>l.format(c)})},this.init(o)}init(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(o,n){this.formats[o.toLowerCase().trim()]=n}addCached(o,n){this.formats[o.toLowerCase().trim()]=createCachedFormatter(n)}format(o,n,a){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=n.split(this.formatSeparator);if(c.length>1&&c[0].indexOf("(")>1&&c[0].indexOf(")")<0&&c.find(d=>d.indexOf(")")>-1)){const d=c.findIndex(h=>h.indexOf(")")>-1);c[0]=[c[0],...c.splice(1,d)].join(this.formatSeparator)}return c.reduce((d,h)=>{var p;const{formatName:f,formatOptions:g}=parseFormatStr(h);if(this.formats[f]){let v=d;try{const b=((p=l==null?void 0:l.formatParams)==null?void 0:p[l.interpolationkey])||{},_=b.locale||b.lng||l.locale||l.lng||a;v=this.formats[f](d,_,{...g,...l,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${f}`);return d},o)}}const removePending=(s,o)=>{s.pending[o]!==void 0&&(delete s.pending[o],s.pendingCount--)};class Connector extends EventEmitter{constructor(o,n,a){var c,u;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=o,this.store=n,this.services=a,this.languageUtils=a.languageUtils,this.options=l,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],(u=(c=this.backend)==null?void 0:c.init)==null||u.call(c,a,l.backend,l)}queueLoad(o,n,a,l){const c={},u={},d={},h={};return o.forEach(f=>{let g=!0;n.forEach(p=>{const v=`${f}|${p}`;!a.reload&&this.store.hasResourceBundle(f,p)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?u[v]===void 0&&(u[v]=!0):(this.state[v]=1,g=!1,u[v]===void 0&&(u[v]=!0),c[v]===void 0&&(c[v]=!0),h[p]===void 0&&(h[p]=!0)))}),g||(d[f]=!0)}),(Object.keys(c).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(c),pending:Object.keys(u),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}loaded(o,n,a){const l=o.split("|"),c=l[0],u=l[1];n&&this.emit("failedLoading",c,u,n),!n&&a&&this.store.addResourceBundle(c,u,a,void 0,void 0,{skipCopy:!0}),this.state[o]=n?-1:2,n&&a&&(this.state[o]=0);const d={};this.queue.forEach(h=>{pushPath(h.loaded,[c],u),removePending(h,o),n&&h.errors.push(n),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(f=>{d[f]||(d[f]={});const g=h.loaded[f];g.length&&g.forEach(p=>{d[f][p]===void 0&&(d[f][p]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(h=>!h.done)}read(o,n,a){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!o.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:o,ns:n,fcName:a,tried:l,wait:c,callback:u});return}this.readingCalls++;const d=(f,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(f&&g&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,o,n,a,l+1,c*2,u)},c);return}u(f,g)},h=this.backend[a].bind(this.backend);if(h.length===2){try{const f=h(o,n);f&&typeof f.then=="function"?f.then(g=>d(null,g)).catch(d):d(null,f)}catch(f){d(f)}return}return h(o,n,d)}prepareLoading(o,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();isString(o)&&(o=this.languageUtils.toResolveHierarchy(o)),isString(n)&&(n=[n]);const c=this.queueLoad(o,n,a,l);if(!c.toLoad.length)return c.pending.length||l(),null;c.toLoad.forEach(u=>{this.loadOne(u)})}load(o,n,a){this.prepareLoading(o,n,{},a)}reload(o,n,a){this.prepareLoading(o,n,{reload:!0},a)}loadOne(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const a=o.split("|"),l=a[0],c=a[1];this.read(l,c,"read",void 0,void 0,(u,d)=>{u&&this.logger.warn(`${n}loading namespace ${c} for language ${l} failed`,u),!u&&d&&this.logger.log(`${n}loaded namespace ${c} for language ${l}`,d),this.loaded(o,u,d)})}saveMissing(o,n,a,l,c){var h,f,g,p,v;let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(h=this.services)==null?void 0:h.utils)!=null&&f.hasLoadedNamespace&&!((p=(g=this.services)==null?void 0:g.utils)!=null&&p.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${a}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if((v=this.backend)!=null&&v.create){const b={...u,isUpdate:c},_=this.backend.create.bind(this.backend);if(_.length<6)try{let w;_.length===5?w=_(o,n,a,l,b):w=_(o,n,a,l),w&&typeof w.then=="function"?w.then(x=>d(null,x)).catch(d):d(null,w)}catch(w){d(w)}else _(o,n,a,l,d,b)}!o||!o[0]||this.store.addResource(o[0],n,a,l)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let o={};if(typeof s[1]=="object"&&(o=s[1]),isString(s[1])&&(o.defaultValue=s[1]),isString(s[2])&&(o.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const n=s[3]||s[2];Object.keys(n).forEach(a=>{o[a]=n[a]})}return o},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=s=>{var o,n;return isString(s.ns)&&(s.ns=[s.ns]),isString(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),isString(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),((n=(o=s.supportedLngs)==null?void 0:o.indexOf)==null?void 0:n.call(o,"cimode"))<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s},noop=()=>{},bindMemberFunctions=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(n=>{typeof s[n]=="function"&&(s[n]=s[n].bind(s))})};class I18n extends EventEmitter{constructor(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(o),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),n&&!this.isInitialized&&!o.isClone){if(!this.options.initAsync)return this.init(o,n),this;setTimeout(()=>{this.init(o,n)},0)}}init(){var o=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(a=n,n={}),n.defaultNS==null&&n.ns&&(isString(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const l=get();this.options={...l,...this.options,...transformOptions(n)},this.options.interpolation={...l.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const c=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(c(this.modules.logger),this.options):baseLogger.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=Formatter;const p=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const v=this.services;v.logger=baseLogger,v.resourceStore=this.store,v.languageUtils=p,v.pluralResolver=new PluralResolver(p,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(v.formatter=c(g),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new Interpolator(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new Connector(c(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(b){for(var _=arguments.length,w=new Array(_>1?_-1:0),x=1;x<_;x++)w[x-1]=arguments[x];o.emit(b,...w)}),this.modules.languageDetector&&(v.languageDetector=c(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=c(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(b){for(var _=arguments.length,w=new Array(_>1?_-1:0),x=1;x<_;x++)w[x-1]=arguments[x];o.emit(b,...w)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,a||(a=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return o.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return o.store[g](...arguments),o}});const h=defer(),f=()=>{const g=(p,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(v),a(p,v)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),h}loadResources(o){var c,u;let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const l=isString(o)?o:this.language;if(typeof o=="function"&&(a=o),!this.options.resources||this.options.partialBundledLanguages){if((l==null?void 0:l.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const d=[],h=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(p=>{p!=="cimode"&&d.indexOf(p)<0&&d.push(p)})};l?h(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>h(g)),(u=(c=this.options.preload)==null?void 0:c.forEach)==null||u.call(c,f=>h(f)),this.services.backendConnector.load(d,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(f)})}else a(null)}reloadResources(o,n,a){const l=defer();return typeof o=="function"&&(a=o,o=void 0),typeof n=="function"&&(a=n,n=void 0),o||(o=this.languages),n||(n=this.options.ns),a||(a=noop),this.services.backendConnector.reload(o,n,c=>{l.resolve(),a(c)}),l}use(o){if(!o)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!o.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return o.type==="backend"&&(this.modules.backend=o),(o.type==="logger"||o.log&&o.warn&&o.error)&&(this.modules.logger=o),o.type==="languageDetector"&&(this.modules.languageDetector=o),o.type==="i18nFormat"&&(this.modules.i18nFormat=o),o.type==="postProcessor"&&postProcessor.addPostProcessor(o),o.type==="formatter"&&(this.modules.formatter=o),o.type==="3rdParty"&&this.modules.external.push(o),this}setResolvedLanguage(o){if(!(!o||!this.languages)&&!(["cimode","dev"].indexOf(o)>-1))for(let n=0;n<this.languages.length;n++){const a=this.languages[n];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}changeLanguage(o,n){var a=this;this.isLanguageChangingTo=o;const l=defer();this.emit("languageChanging",o);const c=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},u=(h,f)=>{f?(c(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,l.resolve(function(){return a.t(...arguments)}),n&&n(h,function(){return a.t(...arguments)})},d=h=>{var g,p;!o&&!h&&this.services.languageDetector&&(h=[]);const f=isString(h)?h:this.services.languageUtils.getBestMatchFromCodes(h);f&&(this.language||c(f),this.translator.language||this.translator.changeLanguage(f),(p=(g=this.services.languageDetector)==null?void 0:g.cacheUserLanguage)==null||p.call(g,f)),this.loadResources(f,v=>{u(v,f)})};return!o&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!o&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(o),l}getFixedT(o,n,a){var l=this;const c=function(u,d){let h;if(typeof d!="object"){for(var f=arguments.length,g=new Array(f>2?f-2:0),p=2;p<f;p++)g[p-2]=arguments[p];h=l.options.overloadTranslationOptionHandler([u,d].concat(g))}else h={...d};h.lng=h.lng||c.lng,h.lngs=h.lngs||c.lngs,h.ns=h.ns||c.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||a||c.keyPrefix);const v=l.options.keySeparator||".";let b;return h.keyPrefix&&Array.isArray(u)?b=u.map(_=>`${h.keyPrefix}${v}${_}`):b=h.keyPrefix?`${h.keyPrefix}${v}${u}`:u,l.t(b,h)};return isString(o)?c.lng=o:c.lngs=o,c.ns=n,c.keyPrefix=a,c}t(){var l;for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(l=this.translator)==null?void 0:l.translate(...n)}exists(){var l;for(var o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return(l=this.translator)==null?void 0:l.exists(...n)}setDefaultNamespace(o){this.options.defaultNS=o}hasLoadedNamespace(o){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=n.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const u=(d,h)=>{const f=this.services.backendConnector.state[`${d}|${h}`];return f===-1||f===0||f===2};if(n.precheck){const d=n.precheck(this,u);if(d!==void 0)return d}return!!(this.hasResourceBundle(a,o)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(a,o)&&(!l||u(c,o)))}loadNamespaces(o,n){const a=defer();return this.options.ns?(isString(o)&&(o=[o]),o.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{a.resolve(),n&&n(l)}),a):(n&&n(),Promise.resolve())}loadLanguages(o,n){const a=defer();isString(o)&&(o=[o]);const l=this.options.preload||[],c=o.filter(u=>l.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return c.length?(this.options.preload=l.concat(c),this.loadResources(u=>{a.resolve(),n&&n(u)}),a):(n&&n(),Promise.resolve())}dir(o){var l,c;if(o||(o=this.resolvedLanguage||(((l=this.languages)==null?void 0:l.length)>0?this.languages[0]:this.language)),!o)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=((c=this.services)==null?void 0:c.languageUtils)||new LanguageUtil(get());return n.indexOf(a.getLanguagePartFromCode(o))>-1||o.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new I18n(o,n)}cloneInstance(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const a=o.forkResourceStore;a&&delete o.forkResourceStore;const l={...this.options,...o,isClone:!0},c=new I18n(l);if((o.debug!==void 0||o.prefix!==void 0)&&(c.logger=c.logger.clone(o)),["store","services","language"].forEach(d=>{c[d]=this[d]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},a){const d=Object.keys(this.store.data).reduce((h,f)=>(h[f]={...this.store.data[f]},Object.keys(h[f]).reduce((g,p)=>(g[p]={...h[f][p]},g),{})),{});c.store=new ResourceStore(d,l),c.services.resourceStore=c.store}return c.translator=new Translator(c.services,l),c.translator.on("*",function(d){for(var h=arguments.length,f=new Array(h>1?h-1:0),g=1;g<h;g++)f[g-1]=arguments[g];c.emit(d,...f)}),c.init(l,n),c.translator.options=l,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const resources={en:{translation:{su:"Su",mo:"Mo",tu:"Tu",we:"We",th:"Th",fr:"Fr",sa:"Sa",yesterday:"Yesterday",lastWeek:"Last week",lastMonth:"Last month",lastYear:"Last year",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",today:"Today",apply:"Apply",cancel:"Cancel",submit:"Submit",limitFileError:"File {{file.name}} exceeds the maximum size of {{sizeTitle}}",limitFileWarning:"File size should not exceed {{sizeTitle}}.",uploadFileAction:"Click or drag and drop to upload file",file:"File",remove:"Remove",choose:"Choose",select:"Select",add:"Add",all:"All",noResultFound:"No result found",ofItems:"of {{totalItem}} items",page:"Page",go:"Go to",or:"Or",username:"Username",password:"Password",dontHaveAccount:"Don't have an account?",forgotPassword:"Forgot your password?",login:"Log in",loginTo:"Log in to",signup:"Sign up",signupFor:"Sign up for","start-date":"Start date","end-date":"End date",reset:"Reset",date:"Date",on:"On",daily:"Daily",weekly:"Weekly",monthly:"Monthly",last:"Last"}},vi:{translation:{su:"CN",mo:"T2",tu:"T3",we:"T4",th:"T5",fr:"T6",sa:"T7",yesterday:"Hôm qua",lastWeek:"Tuần trước",lastMonth:"Tháng trước",lastYear:"Năm trước",january:"Tháng 1",february:"Tháng 2",march:"Tháng 3",april:"Tháng 4",may:"Tháng 5",june:"Tháng 6",july:"Tháng 7",august:"Tháng 8",september:"Tháng 9",october:"Tháng 10",november:"Tháng 11",december:"Tháng 12",today:"Hôm nay",apply:"Áp dụng",cancel:"Hủy",submit:"Xác nhận",limitFileError:"Tệp {{name}} vượt quá dung lượng tối đa {{sizeTitle}}",limitFileWarning:"Tệp không được vượt quá {{sizeTitle}}.",uploadFileAction:"Nhấn hoặc kéo vào để tải tệp lên",file:"Tệp",remove:"Xóa",choose:"Chọn",select:"Chọn",add:"Thêm",all:"Tất cả",noResultFound:"Không tìm thấy kết quả",ofItems:"trên {{totalItem}} kết quả",page:"Trang",go:"Đi tới",or:"Hoặc",username:"Tên đăng nhập",password:"Mật khẩu",dontHaveAccount:"Chưa có tài khoản?",forgotPassword:"Quên mật khẩu?",login:"Đăng nhập",loginTo:"Đăng nhập vào",signup:"Đăng ký",signupFor:"Đăng ký","start-date":"Ngày bắt đầu","end-date":"Ngày kết thúc",reset:"Mặc định",date:"Ngày",on:"Vào",daily:"Hàng ngày",weekly:"Hàng tuần",monthly:"Hàng tháng",last:"Cuối tháng"}}};instance.use(initReactI18next).init({resources,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});exports.AccountController=AccountController;exports.BaseDA=BaseDA;exports.Button=Button;exports.CKEditorForm=CKEditorForm;exports.Calendar=Calendar$1;exports.CardById=CardById;exports.Carousel=Carousel;exports.ChartById=ChartById;exports.Checkbox=Checkbox;exports.CheckboxForm=CheckboxForm;exports.CkEditorUploadAdapter=CkEditorUploadAdapter;exports.ColorPicker=ColorPicker;exports.ColorPickerForm=ColorPickerForm;exports.ComponentStatus=ComponentStatus;exports.CustomCkEditor5=CustomCkEditor5;exports.DataController=DataController;exports.DateTimePicker=DateTimePicker;exports.DateTimePickerForm=DateTimePickerForm;exports.DialogAlignment=DialogAlignment;exports.EmptyPage=EmptyPage;exports.FormById=FormById;exports.GroupCheckboxForm=GroupCheckboxForm;exports.GroupRadioButtonForm=GroupRadioButtonForm;exports.ImportFile=ImportFile;exports.ImportFileForm=ImportFileForm;exports.InfiniteScroll=InfiniteScroll;exports.InputOtp=InputOtp;exports.InputPasswordForm=InputPasswordForm;exports.NavLink=NavLink;exports.Navigate=Navigate;exports.NumberPicker=NumberPicker;exports.Outlet=Outlet;exports.PageById=PageById;exports.PageByUrl=PageByUrl;exports.Pagination=Pagination;exports.Popup=Popup;exports.ProgressBar=ProgressBar;exports.ProgressCircle=ProgressCircle;exports.RadioButton=RadioButton;exports.RadioButtonForm=RadioButtonForm;exports.RangeForm=RangeForm;exports.RateForm=RateForm;exports.Rating=Rating;exports.Route=Route;exports.Routes=Routes;exports.Select1=Select1;exports.Select1Form=Select1Form;exports.SelectMultiple=SelectMultiple;exports.SelectMultipleForm=SelectMultipleForm;exports.SettingDataController=SettingDataController;exports.SimpleButton=SimpleButton;exports.Slider=Slider;exports.Switch=Switch;exports.SwitchForm=SwitchForm;exports.Tag=Tag;exports.Text=Text$2;exports.TextArea=TextArea;exports.TextAreaForm=TextAreaForm;exports.TextField=TextField;exports.TextFieldForm=TextFieldForm;exports.ToastContainer=Lt;exports.ToastMessage=ToastMessage;exports.Util=Util;exports.ViewById=ViewById;exports.WLoginView=WLoginView;exports.Winicon=Winicon;exports.closePopup=closePopup;exports.default=WiniProvider;exports.formatNumberConvert=formatNumberConvert;exports.getStatusIcon=getStatusIcon;exports.i18n=instance;exports.imgFileTypes=imgFileTypes;exports.inputMoneyPattern=inputMoneyPattern;exports.randomGID=randomGID;exports.showDialog=showDialog;exports.showPopup=showPopup;exports.useLocation=useLocation;exports.useNavigate=useNavigate;exports.useParams=useParams;exports.useSearchParams=useSearchParams;
//# sourceMappingURL=index.cjs.js.map
