(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(`._checkbox-container_14721_1{position:relative;border-radius:.4rem;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950));background-color:transparent;transition:border,background-color .4s;cursor:pointer}._checkbox-container_14721_1>input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}._checkbox-container_14721_1>svg{width:100%;height:100%;visibility:hidden;opacity:0!important;transition:visibility,opacity .4s}._checkbox-container_14721_1>svg>path{fill:var(--check-color, #fff)}._checkbox-container_14721_1>input:checked~svg,._checkbox-container_14721_1[is-null-value=true]>svg{visibility:visible;opacity:1!important}._checkbox-container_14721_1:has(>input:checked),._checkbox-container_14721_1[is-null-value=true]{background-color:var(--primary-main-color, #287CF0);border:none}._checkbox-container_14721_1>svg>path:first-child{display:none}._checkbox-container_14721_1>svg>path:last-child{display:block}._checkbox-container_14721_1[is-null-value=true]>svg>path:first-child{display:block}._checkbox-container_14721_1[is-null-value=true]>svg>path:last-child{display:none}._checkbox-container_14721_1:has(>input:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._checkbox-container_14721_1:has(>input:disabled)>svg>path{fill:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))}._select1-container_l3ug4_1,._select1-simple-style_l3ug4_1{position:relative;box-sizing:border-box;cursor:pointer}._select1-container_l3ug4_1{width:100%;padding:.8rem 1.6rem;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));border-radius:.8rem;gap:.8rem}._select1-container_l3ug4_1._focus_l3ug4_29{border-color:var(--primary-main-color, #287CF0)}._select1-container_l3ug4_1._disabled_l3ug4_37{background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950));pointer-events:none;cursor:context-menu}._select1-container_l3ug4_1._helper-text_l3ug4_49,._select1-simple-style_l3ug4_1._helper-text_l3ug4_49{overflow:visible!important;border-color:var(--helper-text-color, #E14337)}._select1-container_l3ug4_1._helper-text_l3ug4_49:after,._select1-simple-style_l3ug4_1._helper-text_l3ug4_49:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}@keyframes _show-dropdown_l3ug4_1{0%{opacity:0;height:0;width:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}._select1-popup_l3ug4_117{position:fixed;animation:_show-dropdown_l3ug4_1 .4s ease-in-out;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b));border-radius:.8rem;z-index:999;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));padding:.8rem;min-width:12rem;box-shadow:2px 0 16px #0000000a;max-height:24rem;overflow:hidden auto;gap:2px}._select1-popup_l3ug4_117:has(>._search-options_l3ug4_147){padding-top:0}._search-options_l3ug4_147{position:sticky;top:0;z-index:2;padding:1.6rem .8rem .8rem;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._search-options_l3ug4_147>*{background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._select1-popup_l3ug4_117::-webkit-scrollbar{width:.5rem}._select1-popup_l3ug4_117 ._select-tile_l3ug4_187{gap:max(.8rem,5px);padding:5px max(.8rem,5px);border-radius:.8rem}._select1-popup_l3ug4_117 ._select-tile_l3ug4_187 *{font-size:inherit}._select-tile_l3ug4_187>span{flex:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;color:inherit;font-weight:inherit;font-family:inherit;font:inherit}._select1-popup_l3ug4_117 ._select-tile_l3ug4_187:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._select1-popup_l3ug4_117 ._select-tile_l3ug4_187._selected_l3ug4_237{background-color:var(--neutral-selected-background-color, light-dark(#18181B0A, #FFFFFF0A))}._select1-popup_l3ug4_117 ._select-tile_l3ug4_187._disabled_l3ug4_37{background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._select1-popup_l3ug4_117 ._select-tile_l3ug4_187._disabled_l3ug4_37 *{color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))}._see-more_l3ug4_261{padding:4px 8px;border-radius:.8rem;cursor:pointer;margin-left:calc(max(.8rem,5px) + max(.8rem,5px) + 8px);margin-bottom:2px;width:fit-content}._see-more_l3ug4_261:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A));opacity:.8}._wini-icon_1p4zy_1{display:flex;justify-content:center;align-items:center;width:fit-content;height:fit-content;padding:.2rem;font-size:1.6rem;color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))}._wini-icon_1p4zy_1 *{color:inherit}._wini-icon_1p4zy_1>svg{width:1em!important;height:1em!important}._wini-icon_1p4zy_1[class~=link-icon]>svg{width:auto!important;height:auto!important}._wini-icon_1p4zy_1[class~=fill-icon]>svg>*[fill^="#"]{fill:currentColor}._wini-icon_1p4zy_1[class~=outline-icon]>svg>*[stroke^="#"]{stroke:currentColor}._wini-icon_1p4zy_1._clickable_1p4zy_67{cursor:pointer}._wini-icon_1p4zy_1[class~=icon-button]{border-radius:50%;background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._wini-icon_1p4zy_1[class~=icon-button][class~=light]{background-color:transparent}._wini-icon_1p4zy_1[class~=border]{border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950))}._wini-icon_1p4zy_1[class~=dashed]{border-style:dashed}._wini-icon_1p4zy_1[class~=size64]{width:6.4rem;height:6.4rem;font-size:1.6rem}._wini-icon_1p4zy_1[class~=size56]{width:5.6rem;height:5.6rem;font-size:1.6rem}._wini-icon_1p4zy_1[class~=size48]{width:4.8rem;height:4.8rem;font-size:1.6rem}._wini-icon_1p4zy_1[class~=size40]{width:4rem;height:4rem;font-size:1.4rem}._wini-icon_1p4zy_1[class~=size32]{width:3.2rem;height:3.2rem;font-size:1.4rem}._wini-icon_1p4zy_1[class~=size24]{width:2.4rem;height:2.4rem;font-size:1.2rem}@keyframes _on-open-tooltip_1p4zy_1{0%{opacity:0}to{opacity:1}}._tooltip-container_1p4zy_201{position:fixed;z-index:999;animation:_on-open-tooltip_1p4zy_1 .2s ease-in-out;animation-fill-mode:forwards}._tooltip-container_1p4zy_201>._tooltip-message_1p4zy_215{color:var(--neutral-text-body-reverse-color, #EAEAEC);background-color:var(--neutral-main-reverse-background-color, light-dark(#242428, #EFEFF0));padding:.4rem 1.2rem;border-radius:.8rem;max-width:21.2rem;text-align:center}._wini-icon_1p4zy_1[class~=icon-button]:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._wini-icon_1p4zy_1[class~=icon-button][class~=light]:hover{background-color:transparent;opacity:.8;box-shadow:0 4px 12px #00000017}.comp-text{display:inline-block;-webkit-box-orient:vertical;-webkit-line-clamp:var(--max-line);word-break:break-word;overflow:hidden;text-overflow:ellipsis;-webkit-box-pack:center;text-align:start;vertical-align:middle;display:-webkit-box}.comp-text.type-button{cursor:pointer}.comp-text-innerhtml{overflow:hidden}._simple-text-field_1i10k_1,._text-field-container_1i10k_3{position:relative;box-sizing:border-box}._text-field-container_1i10k_3{padding:.8rem 1.5rem;border:var(--neutral-main-border, 1px solid light-dark(#D7D7DB, #494950));border-radius:.8rem;gap:.8rem}._text-field-container_1i10k_3[class~=size48]{padding:1.2rem 1.5rem}._text-field-container_1i10k_3[class~=size32]{padding:.4rem 1.1rem}._text-field-container_1i10k_3[class~=size24]{padding:0 .7rem}._text-field-container_1i10k_3:has(>input:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))!important;pointer-events:none!important}._text-field-container_1i10k_3:focus-within{border-color:var(--primary-main-color, #287CF0)}._text-field-container_1i10k_3>input,._simple-text-field_1i10k_1>input{flex:1;width:100%;border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._text-field-container_1i10k_3._helper-text_1i10k_125,._simple-text-field_1i10k_1._helper-text_1i10k_125{overflow:visible!important;border-color:var(--helper-text-color, #E14337)!important}._text-field-container_1i10k_3._helper-text_1i10k_125:after,._simple-text-field_1i10k_1._helper-text_1i10k_125:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._switch-container_1819y_1{--off-bg: var(--neutral-main-background-color, light-dark(#EFEFF0, #313135));--on-bg: var(--primary-main-color, #287CF0);--dot-color: var(--neutral-text-stable-color, #ffffff);position:relative;display:inline-block;background-color:var(--off-bg);border-radius:50vw!important;border:none;outline:none}._switch-container_1819y_1>input{opacity:0;width:0;height:0;border:none;outline:none}._switch-container_1819y_1>._slider_1819y_41{font-size:var(--size);position:absolute;height:calc(100% - .2em);aspect-ratio:1 / 1;left:.1em;top:.1em;background-color:var(--dot-color);transition:.4s;border-radius:50%}._switch-container_1819y_1>input:checked+._slider_1819y_41{-webkit-transform:translateX(calc(.8*(100% + .2em)));-ms-transform:translateX(calc(.8*(100% + .2em)));transform:translate(calc(.8*(100% + .2em)))}._switch-container_1819y_1:has(>input:checked){background-color:var(--on-bg)!important}._switch-container_1819y_1:has(>input:disabled:not(*:checked)){pointer-events:none;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950));background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._switch-container_1819y_1:has(>input:disabled:not(*:checked)) ._slider_1819y_41{background-color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))}._switch-container_1819y_1:has(>input:disabled:checked){pointer-events:none;background-color:var(--primary-lighter-color, light-dark(#5899F3, #0F62D7))}.popup-overlay{position:fixed;top:0!important;left:0!important;right:0!important;bottom:0!important;width:100dvw!important;height:100dvh!important;background-color:#000000b2;display:flex!important;justify-content:center;align-items:center;z-index:99}.popup-overlay>div{background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}.popup-overlay>div:not(.right-drawer,.left-drawer){border-radius:.8rem}.popup-container{position:relative;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));overflow:visible;max-width:86%;max-height:80%}.popup-header{align-items:center;justify-content:start;padding:1.6rem 2.4rem;border-bottom:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135))}.popup-footer{column-gap:.8rem;justify-content:end;padding:1.2rem 2.4rem;border-top:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135))}.popup-overlay.hidden-overlay{background-color:transparent;width:fit-content!important;height:fit-content!important}.popup-overlay.hidden-overlay>*{position:fixed!important;z-index:99;border-radius:.8rem;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}.popup-overlay>*{transition:width .8s ease-in-out,max-width .8s ease-in-out,height .8s ease-in-out,max-height .8s ease-in-out,border-radius .8s ease-in-out;box-shadow:2px 0 16px #0000000a}.popup-overlay.hidden-overlay>.popup-container{position:absolute;width:max-content;height:max-content;background-color:transparent}.popup-overlay.hidden-overlay>.popup-container .popup-close-btn{display:none!important}@keyframes open-drawer-right-to-left{0%{transform:translate(100%)}to{transform:translate(0)}}.right-drawer{position:fixed;top:0;right:0;height:100dvh;border-radius:0;animation:open-drawer-right-to-left .5s ease-in-out;animation-fill-mode:forwards;box-shadow:var(--shadow-left, 1px 0px 6px 0px #2D32390F)}@keyframes open-drawer-left-to-right{0%{transform:translate(-100%)}to{transform:translate(0)}}.left-drawer{position:fixed;top:0;left:0;height:100dvh;border-radius:0;animation:open-drawer-left-to-right .5s ease-in-out;animation-fill-mode:forwards;box-shadow:var(--shadow-right, 1px 0px 6px 0px #2D32390F)}@keyframes show-dropdown-popup{0%{opacity:0;height:0;width:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}.dropdown-popup{animation:show-dropdown-popup .4s ease-in-out;position:fixed;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));border-radius:.8rem;padding:4px}._dialog-overlay_ywiq6_1{position:fixed;top:0;left:0;width:100dvw;height:100dvh;background-color:#00000080;display:flex;justify-content:center;align-items:center;z-index:100}._dialog-container_ywiq6_27{position:relative;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b));padding:2.4rem;border-radius:8px;box-shadow:0 2px 8px #00000040;gap:2.4rem;overflow:visible}._dialog-container_ywiq6_27 button{outline:none;padding:0;border:none}._dialog-body_ywiq6_59{gap:1.6rem}._dialog-body_ywiq6_59>div:last-child{width:100%;align-items:inherit;gap:8px}._dialog-body_ywiq6_59>div:last-child>*{width:100%}._dialog-body_ywiq6_59>._dialog-status_ywiq6_87{width:5.6rem;height:5.6rem;border-radius:50%;align-items:center;justify-content:center}._dialog-footer_ywiq6_103{gap:8px;justify-content:end;width:100%}._dialog-footer_ywiq6_103>._dialog-action_ywiq6_115{height:4rem;justify-content:center;padding:0 1.6rem;border-radius:.8rem;background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._dialog-footer_ywiq6_103>._dialog-action_ywiq6_115>*{color:var(--neutral-text-subtitle-color, --neutral-text-subtitle-color)}._dialog-footer_ywiq6_103>._dialog-submit_ywiq6_139>*{color:var(--neutral-text-title-reverse-color, #F4F4F5)}._dialog-container_ywiq6_27[dialog-type="1"] ._dialog-status_ywiq6_87{background-color:var(--infor-background, light-dark(#ECF3FE, #031630))}._dialog-container_ywiq6_27[dialog-type="2"] ._dialog-status_ywiq6_87{background-color:var(--error-background, light-dark(#FCEEED, #2C0907))}._dialog-container_ywiq6_27[dialog-type="3"] ._dialog-status_ywiq6_87{background-color:var(--warning-background, light-dark(#FFF3EB, #321501))}._dialog-container_ywiq6_27[dialog-type="4"] ._dialog-status_ywiq6_87{background-color:var(--success-background, light-dark(#E8F7EF, #0D2618))}._dialog-container_ywiq6_27[dialog-type="1"] ._dialog-footer_ywiq6_103>._dialog-submit_ywiq6_139{background-color:var(--infor-main-color, #287CF0)}._dialog-container_ywiq6_27[dialog-type="2"] ._dialog-footer_ywiq6_103>._dialog-submit_ywiq6_139{background-color:var(--error-main-color, #E14337)}._dialog-container_ywiq6_27[dialog-type="3"] ._dialog-footer_ywiq6_103>._dialog-submit_ywiq6_139{background-color:var(--warning-main-color, #FC7A1C)}._dialog-container_ywiq6_27[dialog-type="4"] ._dialog-footer_ywiq6_103>._dialog-submit_ywiq6_139{background-color:var(--success-main-color, #3AAC6D)}._date-time-picker_hggwe_1{padding:.8rem 1.6rem;gap:.4rem;border-radius:.8rem;text-align:start}._date-time-picker_hggwe_1>._prefix-icon_hggwe_15{padding:.5rem;margin-right:.8rem;border-radius:50%;border:1px dashed var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))}._date-time-picker_hggwe_1>._value_hggwe_29,._simple-date-time-picker_hggwe_31>._value_hggwe_29{flex:1;width:100%;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._date-time-picker_hggwe_1>input,._simple-date-time-picker_hggwe_31>input{outline:none;border:none;background-color:transparent!important}._date-time-picker_hggwe_1:has(>input){padding:.7rem 1.6rem;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135))}._date-time-picker_hggwe_1:has(>input):focus-within{border-color:var(--primary-main-color, #287CF0)}._date-time-picker_hggwe_1:has(>input:disabled),._date-time-picker_hggwe_1._disabled_hggwe_97{background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;pointer-events:none!important}._date-time-picker_hggwe_1:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._date-time-picker_hggwe_1:focus{box-shadow:0 4px 20px #0000001a inset}._date-time-picker_hggwe_1._helper-text_hggwe_123,._simple-date-time-picker_hggwe_31._helper-text_hggwe_123{position:relative;overflow:visible!important;border-color:var(--helper-text-color, #E14337)!important}._date-time-picker_hggwe_1._helper-text_hggwe_123:after,._simple-date-time-picker_hggwe_31._helper-text_hggwe_123:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._popup-actions_hggwe_165{max-height:28rem;min-width:10rem;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._popup-actions_hggwe_165>button{padding:.8rem 1.2rem;border-radius:.8rem}._popup-actions_hggwe_165>button:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._calendar-container_gtk9b_1{background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b));border-radius:.8rem;align-items:stretch;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));width:fit-content}._calendar-sidebar-options_gtk9b_17{padding:.8rem 2.4rem .8rem 0;border-right:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135))}._calendar-sidebar-options_gtk9b_17>._calendar-sidebar-option-buttton_gtk9b_27{color:var(--neutral-text-title-color, light-dark(#18181B, #F4F4F5));padding:.8rem 1.6rem}._picker-time-container_gtk9b_37{border-left:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));height:34.2rem;align-items:center}._picker-time-container_gtk9b_37>div[class*=heading-7]:first-child{width:100%;padding:1.2rem 1.6rem;border-bottom:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));text-align:center}._picker-time-container_gtk9b_37 div[class*=scroll-picker-]{flex:1;height:100%;gap:.4rem;padding:.4rem 0;overflow:hidden auto;scrollbar-width:thin}._picker-time-container_gtk9b_37 ._scroll-picker-minutes_gtk9b_81{border-left:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));border-right:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135))}._picker-time-container_gtk9b_37 div[class*=scroll-picker-]>button{width:5.6rem;padding:.4rem 0}._picker-time-container_gtk9b_37 div[class*=scroll-picker-]>button._selected_gtk9b_101{background-color:var(--primary-background, light-dark(#ECF3FE, #031630));color:var(--primary-main-color)}._picker-date-header_gtk9b_111{padding:1.2rem 1.6rem;gap:1.2rem;background-color:transparent!important;border-bottom:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));justify-content:space-between}._picker-date-header_gtk9b_111>span{width:100%;max-width:15rem;flex:1;text-align:center;cursor:pointer;border-radius:.8rem}._picker-date-header_gtk9b_111>span:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._picker-date-header_gtk9b_111>button{width:1.6rem;height:1.6rem;display:flex;align-items:center;justify-content:center}._picker-date-header_gtk9b_111>button>svg{font-size:1.4rem;color:var(--neutral-text-title-color, light-dark(#18181B, #F4F4F5));pointer-events:none}._picker-date-body_gtk9b_181{padding:1.2rem 1.6rem;width:31.2rem;flex-wrap:wrap;gap:.8rem 0}._picker-date-body_gtk9b_181>div{height:3.2rem;padding:0 .4rem;display:flex}._picker-date-body_gtk9b_181>div>*{border:1px solid transparent;justify-content:center;height:100%;width:100%}._date-picker-circle_gtk9b_221{width:calc(100% / 7)}._date-picker-circle_gtk9b_221>*{border-radius:50%}._month-picker-circle_gtk9b_237,._year-picker-circle_gtk9b_239{width:calc(100% / 3)}._month-picker-circle_gtk9b_237>*,._year-picker-circle_gtk9b_239>*{border-radius:2.4rem}._picker-date-body_gtk9b_181>._in-range_gtk9b_257{background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._picker-date-body_gtk9b_181:has(>._in-range_gtk9b_257,>._end-range_gtk9b_265)>._start-range_gtk9b_265{background-image:linear-gradient(to right,transparent 50%,var(--neutral-main-background-color, light-dark(#EFEFF0, #313135)) 50%)}._end-range_gtk9b_265{background-image:linear-gradient(to left,transparent 50%,var(--neutral-main-background-color, light-dark(#EFEFF0, #313135)) 50%)!important}._picker-date-body_gtk9b_181>._today_gtk9b_281>*{border-color:var(--primary-main-color)}._picker-date-body_gtk9b_181>._selected_gtk9b_101>*{background-color:var(--primary-main-color);color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._picker-date-body_gtk9b_181>._invalid_gtk9b_299{opacity:.24!important;pointer-events:none!important}._button-container_ig51p_1{padding:.5rem 1.2rem;border-radius:.8rem;gap:.8rem;justify-content:center;color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));width:fit-content;outline:none}._button-container_ig51p_1[class~=border]{padding:.4rem 1.2rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-container_ig51p_1[class~=size64]{padding:2.1rem 2.4rem}._button-container_ig51p_1[class~=size64][class~=border]{padding:2rem 2.4rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-container_ig51p_1[class~=size56]{padding:1.7rem 2rem}._button-container_ig51p_1[class~=size56][class~=border]{padding:1.6rem 2rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-container_ig51p_1[class~=size48]{padding:1.2rem 2rem}._button-container_ig51p_1[class~=size48][class~=border]{padding:1.1rem 2rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-container_ig51p_1[class~=size40]{padding:.9rem 1.6rem}._button-container_ig51p_1[class~=size40][class~=border]{padding:.8rem 1.6rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-container_ig51p_1[class~=size24]{padding:.4rem .8rem}._button-container_ig51p_1[class~=size24][class~=border]{padding:.3rem .8rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-container_ig51p_1[class~=dashed]{border:1px dashed var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))}._button-label_ig51p_129{font:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._button-container_ig51p_1[class~=button-grey]{background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))!important;border-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))!important}._button-container_ig51p_1[class~=button-grey] *{color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))!important}._button-container_ig51p_1[class~=button-primary]{background-color:var(--primary-main-color, #287CF0)!important;border-color:var(--primary-main-color, #287CF0)!important}._button-container_ig51p_1[class~=button-primary] *{color:var(--neutral-text-stable-color, #FFFFFF)!important}._button-container_ig51p_1[class~=button-neutral] *{color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))!important}._button-container_ig51p_1[class~=button-neutral]{border-color:var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))!important}._button-container_ig51p_1[class~=button-black] *{color:var(--neutral-text-title-reverse-color, #F4F4F5)!important}._button-container_ig51p_1[class~=button-black]{background-color:var(--neutral-absolute-reverse-background-color, light-dark(#000000, #FFFFFF))!important;border-color:var(--neutral-bolder-reverse-border-color, #242428)!important}._button-container_ig51p_1[class~=button-white] *{color:var(--neutral-text-title-color, light-dark(#18181B, #F4F4F5))!important}._button-container_ig51p_1[class~=button-white]{background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))!important;border-color:var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))!important}._button-container_ig51p_1[class~=button-infor]{border-color:var(--infor-main-color, #287CF0)!important}._button-container_ig51p_1[class~=button-infor] *{color:var(--infor-main-color, #287CF0)!important}._button-container_ig51p_1[class~=button-warning]{border-color:var(--warning-main-color, #FC7A1C)!important}._button-container_ig51p_1[class~=button-warning] *{color:var(--warning-main-color, #FC7A1C)!important}._button-container_ig51p_1[class~=button-error]{border-color:var(--error-main-color, #E14337)!important}._button-container_ig51p_1[class~=button-error] *{color:var(--error-main-color, #E14337)!important}._button-container_ig51p_1[class~=button-success]{border-color:var(--success-main-color, #3AAC6D)!important}._button-container_ig51p_1[class~=button-success] *{color:var(--success-main-color, #3AAC6D)!important}._button-container_ig51p_1[class~=button-infor-main]{background-color:var(--infor-main-color, #287CF0)!important;border-color:var(--infor-main-color, #287CF0)!important}._button-container_ig51p_1[class~=button-warning-main]{background-color:var(--warning-main-color, #FC7A1C)!important;border-color:var(--warning-main-color, #FC7A1C)!important}._button-container_ig51p_1[class~=button-error-main]{background-color:var(--error-main-color, #E14337)!important;border-color:var(--error-main-color, #E14337)!important}._button-container_ig51p_1[class~=button-success-main]{background-color:var(--success-main-color, #3AAC6D)!important;border-color:var(--success-main-color, #3AAC6D)!important}._button-container_ig51p_1[class~=button-infor-main] *,._button-container_ig51p_1[class~=button-warning-main] *,._button-container_ig51p_1[class~=button-error-main] *,._button-container_ig51p_1[class~=button-success-main] *{color:var(--neutral-text-stable-color, #FFFFFF)!important}._button-container_ig51p_1:hover{opacity:.86}._button-container_ig51p_1:focus{box-shadow:0 4px 20px #0000001a inset}._button-container_ig51p_1:disabled{pointer-events:none;background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;border-color:var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))!important}._button-container_ig51p_1:disabled *{color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))!important}._select-multi-container_1wjox_1,._select-multi-simple-style_1wjox_1{position:relative;box-sizing:border-box;cursor:pointer}._select-multi-container_1wjox_1{width:100%;padding:.7rem 1.6rem;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));border-radius:.8rem;gap:.8rem}._preview-container_1wjox_29{flex:1;gap:4px max(.8rem,5px);flex-wrap:wrap}._preview-container_1wjox_29>._selected-item-value_1wjox_41{min-width:30px;min-width:4.8rem;padding:max(.3rem,1.5px) max(.7rem,4px);border-radius:100rem;gap:6px;justify-content:center;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950));font:400 1.2rem/1.33 Inter;color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._preview-container_1wjox_29>._selected-item-value_1wjox_41>span{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:inherit;color:inherit;font-weight:inherit;font-family:inherit;font:inherit}._select-multi-container_1wjox_1._focus_1wjox_91{border-color:var(--primary-main-color, #287CF0)}._select-multi-container_1wjox_1._disabled_1wjox_99{background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950));pointer-events:none;cursor:context-menu}._select-multi-container_1wjox_1._helper-text_1wjox_111,._select-multi-simple-style_1wjox_1._helper-text_1wjox_111{overflow:visible!important;border-color:var(--helper-text-color, #E14337)}._select-multi-container_1wjox_1._helper-text_1wjox_111:after,._select-multi-simple-style_1wjox_1._helper-text_1wjox_111:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}@keyframes _show-dropdown_1wjox_1{0%{opacity:0;height:0;width:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}._select-multi-popup_1wjox_179{position:fixed;animation:_show-dropdown_1wjox_1 .4s ease-in-out;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b));border-radius:.8rem;z-index:999;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));padding:.8rem;min-width:12rem;box-shadow:2px 0 16px #0000000a;max-height:24rem;overflow:hidden auto;gap:2px}._select-multi-popup_1wjox_179:has(>._search-options_1wjox_209){padding-top:0}._search-options_1wjox_209{position:sticky;top:0;z-index:2;gap:max(.8rem,5px);padding:1.6rem .8rem .8rem;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._search-options_1wjox_209>label:first-child{background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._select-multi-popup_1wjox_179::-webkit-scrollbar{width:.5rem}._select-multi-popup_1wjox_179 ._select-tile_1wjox_251{gap:max(.8rem,5px);padding:5px max(.8rem,5px);border-radius:.8rem}._select-multi-popup_1wjox_179 ._select-tile_1wjox_251 *{font-size:inherit}._select-tile_1wjox_251>span{flex:1;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;color:inherit;font-weight:inherit;font-family:inherit;font:inherit}._select-multi-popup_1wjox_179 ._select-tile_1wjox_251:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._select-multi-popup_1wjox_179 ._select-tile_1wjox_251._selected_1wjox_41{background-color:var(--neutral-selected-background-color, light-dark(#18181B0A, #FFFFFF0A))}._select-multi-popup_1wjox_179 ._select-tile_1wjox_251:has(input:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._select-multi-popup_1wjox_179 ._select-tile_1wjox_251:has(input:disabled) *{color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))}._see-more_1wjox_325{padding:4px 8px;border-radius:.8rem;cursor:pointer;margin-left:calc(max(.8rem,5px) + max(.8rem,5px) + 12px);margin-bottom:2px;width:fit-content}._see-more_1wjox_325:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A));opacity:.8}._progress-bar-container_fz6uc_1{row-gap:1.2rem;width:38.2rem;--full-color: var(--neutral-main-background-color, light-dark(#EFEFF0, #313135));--percent-color: var(--primary-main-color, #287CF0)}._progress-bar-container_fz6uc_1>._progress-bar-title_fz6uc_15{justify-content:space-between;width:100%}._progress-bar-container_fz6uc_1>._progress-bar-tile_fz6uc_25{column-gap:1.6rem;width:100%;height:2.2rem}._progress-bar-container_fz6uc_1>._progress-bar-tile_fz6uc_25>._progress-bar-value_fz6uc_37{width:100%;flex:1}._progress-bar-value_fz6uc_37{border-radius:10rem;height:.6rem;position:relative;overflow:hidden;background-color:var(--full-color)}._progress-bar-value_fz6uc_37:after{content:"";position:absolute;top:0;left:0;width:var(--percent);height:inherit;border-radius:10rem;background-color:var(--percent-color);transition:width ease-in-out 1s}._status-icon_fz6uc_87>div{width:1.6rem!important;height:1.6rem!important}._custom-pagination_1ig6j_1{width:100%;height:100%;justify-content:space-between;gap:1.6rem}._custom-pagination_1ig6j_1>._row_1ig6j_15{gap:1.6rem;height:100%}._items-per-page-container_1ig6j_25{gap:8px;height:100%}._pagination_1ig6j_35{gap:.8rem}._pagination_1ig6j_35>li{width:2.4rem;height:2.4rem;color:var(--neutral-text-subtitle-color,light-dark(#61616B, #A2A2AA));justify-content:center;border-radius:.4rem;font-weight:600}._pagination_1ig6j_35>li *{color:inherit;font:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit}._pagination_1ig6j_35>li._active_1ig6j_83{background-color:var(--infor-background, light-dark(#ECF3FE, #031630))}._pagination_1ig6j_35>li._active_1ig6j_83{color:var(--infor-main-color, #287CF0)}._radio-btn-container_1ba75_1{--off-color: var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B));--active-color: var(--primary-main-color, #287CF0);height:max(var(--size),1.2rem);width:max(var(--size),1.2rem);aspect-ratio:1 / 1!important;border-radius:50%;box-sizing:border-box;border:2px solid var(--off-color);background-color:transparent!important;transition:border-color ease-in-out .5s;justify-content:center;cursor:pointer}._radio-btn-container_1ba75_1>input{display:none;opacity:0;cursor:pointer}._radio-btn-container_1ba75_1>._checkmark_1ba75_43{height:inherit;width:inherit;scale:.5;transform-origin:center center;border-radius:50%;aspect-ratio:1 / 1;visibility:hidden;opacity:0;transition:visibility,opacity ease-in-out .5s}._radio-btn-container_1ba75_1>input:checked~._checkmark_1ba75_43{visibility:visible;opacity:1;background-color:var(--active-color)}._radio-btn-container_1ba75_1:has(>input:checked){border-color:var(--active-color)}._radio-btn-container_1ba75_1:has(input:disabled){pointer-events:none;border-color:var(--off-color);background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._radio-btn-container_1ba75_1>input:disabled~._checkmark_1ba75_43{display:block;background-color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))}._simple-text-area_1ygnl_1,._text-area-container_1ygnl_3{position:relative;box-sizing:border-box}._text-area-container_1ygnl_3{height:4.8rem;position:relative;gap:.8rem;border-radius:.8rem;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950));padding:.8rem 1.6rem;align-items:start}._text-area-container_1ygnl_3:has(>textarea:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))!important;pointer-events:none!important}._text-area-container_1ygnl_3:focus-within{border-color:var(--primary-main-color, #287CF0)}._text-area-container_1ygnl_3>textarea,._simple-text-area_1ygnl_1>textarea{flex:1;padding:0;width:100%;height:inherit;max-height:100%;border:none;outline:none;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit;resize:inherit}._text-area-container_1ygnl_3._helper-text_1ygnl_95,._simple-text-area_1ygnl_1._helper-text_1ygnl_95{overflow:visible!important;border-color:var(--helper-text-color, #E14337)!important}._text-area-container_1ygnl_3._helper-text_1ygnl_95:after,._simple-text-area_1ygnl_1._helper-text_1ygnl_95:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._import-file-container_1l2yi_1,._import-file-simple-style_1l2yi_1{position:relative}._import-file-container_1l2yi_1:has(input:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;pointer-events:none!important}._import-file-container_1l2yi_1:not(._button-only_1l2yi_19){max-width:57rem;padding:2.4rem;gap:1.6rem;border-radius:.8rem;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950))}._import-file-container_1l2yi_1:not(._button-only_1l2yi_19):has(svg._preview-icon_1l2yi_35){border-style:dashed}._import-file-prefix_1l2yi_43:not(*:has(>img)){width:4.8rem;height:4.8rem;border-radius:50%;background-color:var(--primary-background, light-dark(#ECF3FE, #031630))}._import-file-prefix_1l2yi_43>img{max-width:14rem;max-height:8.8rem;border-radius:.8rem}._file-preview-content_1l2yi_69{max-width:100%;flex:1;gap:.4rem;display:flex;flex-direction:inherit;align-items:inherit;flex-wrap:wrap}._remove-preview-file_1l2yi_89{width:1.6rem;height:1.6rem;margin-left:.6rem}div[class*=Toastify__toast-body]>div:last-child{font:500 1.2rem/1.6rem}._import-file-container_1l2yi_1._helper-text_1l2yi_109,._import-file-simple-style_1l2yi_1._helper-text_1l2yi_109{overflow:visible!important;border-color:var(--helper-text-color, #E14337)}._import-file-container_1l2yi_1._helper-text_1l2yi_109:after,._import-file-simple-style_1l2yi_1._helper-text_1l2yi_109:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #287CF0;--toastify-color-success: #3AAC6D;--toastify-color-warning: #FC7A1C;--toastify-color-error: #E14337;--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);transform:translateZ(var(--toastify-z-index));position:fixed;padding:4px;width:var(--toastify-toast-width);box-sizing:border-box;color:#fff}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%)}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right)}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%)}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right)}@media only screen and (max-width : 480px){.Toastify__toast-container{width:100vw;padding:0;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}}.Toastify__toast{--y: 0;position:relative;-ms-touch-action:none;touch-action:none;min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:8px;border-radius:var(--toastify-toast-bd-radius);box-shadow:0 4px 12px #0000001a;display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);cursor:default;direction:ltr;z-index:0;overflow:hidden}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-body{margin:auto 0;-ms-flex:1 1 auto;flex:1 1 auto;padding:6px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.Toastify__toast-body>div:last-child{word-break:break-word;-ms-flex:1;flex:1}.Toastify__toast-icon{-webkit-margin-end:10px;margin-inline-end:10px;width:20px;-ms-flex-negative:0;flex-shrink:0;display:-ms-flexbox;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}@media only screen and (max-width : 480px){.Toastify__toast{margin-bottom:0;border-radius:0}}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;-ms-flex-item-align:start;align-self:flex-start;z-index:1}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:var(--toastify-z-index);opacity:.7;transform-origin:left;border-bottom-left-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial;border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp{position:absolute;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._infinite-scroll_j4cjw_1._loading_j4cjw_1:after{content:"";position:sticky;width:1.2rem;height:1.2rem;border:.4rem solid var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b));border-radius:50%;border-top:.4rem solid var(--infor-main-color, #287CF0);-webkit-animation:_spin_j4cjw_1 2s linear infinite;animation:_spin_j4cjw_1 2s linear infinite;order:100000}@-webkit-keyframes _spin_j4cjw_1{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}@keyframes _spin_j4cjw_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}._rating-container_i1js0_1{gap:.8rem;height:fit-content;width:fit-content}._rating-container_i1js0_1 svg{cursor:pointer}._rating-container_i1js0_1 svg>*{pointer-events:none!important}.awssld{--organic-arrow-thickness: 4px;--organic-arrow-height: 40px;--slider-height-percentage: 60%;--loader-bar-color: #851515;--loader-bar-height: 6px;--control-button-width: 10%;--control-button-height: 25%;--control-button-opacity: .5;--control-button-hover-opacity: .75;--control-button-background: transparent;--transition-bezier: cubic-bezier(.5, .075, .25, .95);--slider-transition-duration: 575ms;--organic-arrow-color: #6a6a6a;--organic-arrow-border-radius: 0;--control-bullet-color: #6a6a6a;--control-bullet-active-color: #6a6a6a;--content-background-color: #2f2f2f}.awssld__startUp{background-color:red;height:100%;width:100%}.awssld__container figure,.awssld__content,.awssld__box{display:block;position:absolute;width:100%;height:100%;top:0;left:0}.awssld__controls button,.awssld__bullets button{outline-color:0;outline-style:none;outline-width:0}.awssld{--organic-arrow-thickness: 4px;--organic-arrow-height: 40px;--slider-height-percentage: 60%;--loader-bar-color: var(--primary-main-color, #287CF0);--loader-bar-height: 6px;--control-button-width: 10%;--control-button-height: 25%;--control-button-opacity: .5;--control-button-hover-opacity: .75;--control-button-background: transparent;--transition-bezier: cubic-bezier(.5, .075, .25, .95);--slider-transition-duration: 575ms;--organic-arrow-color: var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));--organic-arrow-border-radius: 0;--control-bullet-color: var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));--control-bullet-active-color: var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));--content-background-color: var(--neutral-main-reverse-background-color, light-dark(#242428, #EFEFF0))}.awssld{display:block;position:relative;width:100%;max-width:100%}.awssld__wrapper{display:block;overflow:hidden;position:relative;height:100%;width:100%}.awssld__container{display:block;width:100%;height:0;padding-bottom:var(--slider-height-percentage)}@media all and (max-width: 500px){.awssld__container{padding-bottom:calc(var(--slider-height-percentage) * 1.25)}}.awssld__startUp{background-color:var(--secondary6-main-color, #E14337);height:100%;width:100%}.awssld__startUp>div{height:100%;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.awssld__startUp img{width:35%;height:auto}.awssld__content{background-color:var(--content-background-color);overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.awssld__content>img,.awssld__content>video{-o-object-fit:cover;object-fit:cover;width:100%;height:100%;position:absolute;top:0;left:0}.awssld__controls button{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:var(--control-button-width);height:var(--control-button-height);position:absolute;z-index:10;top:calc(50% - (.5 * var(--control-button-height)));border:none;background-color:var(--control-button-background);color:#fff;cursor:pointer}.awssld__controls button .awssld__controls__arrow-left,.awssld__controls button .awssld__controls__arrow-right{opacity:var(--control-button-opacity)}.awssld__controls button:hover .awssld__controls__arrow-left,.awssld__controls button:hover .awssld__controls__arrow-right{opacity:var(--control-button-opacity-hover)}.awssld__controls--active .awssld__controls__arrow-left{opacity:var(--control-button-opacity-hover);-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.awssld__controls--active .awssld__controls__arrow-right{opacity:var(--control-button-opacity-hover);-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.awssld__controls--hidden{display:none}@media all and (max-width: 520px){.awssld__controls{visibility:hidden}}.awssld__bar{display:block;width:100%;height:var(--loader-bar-height);background-color:var(--loader-bar-color);position:absolute;top:0;left:0;z-index:101;-webkit-transition:-webkit-transform 3s var(--transition-bezier);transition:-webkit-transform 3s var(--transition-bezier);transition:transform 3s var(--transition-bezier);transition:transform 3s var(--transition-bezier),-webkit-transform 3s var(--transition-bezier);-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.awssld__bar--active{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0)}.awssld__bar--end{-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}.awssld__next{right:0}.awssld__prev{left:0}.awssld__box{z-index:1;visibility:hidden}.awssld--animated{will-change:transform;visibility:visible}.awssld--animated-mobile{will-change:transform;-webkit-transition:-webkit-transform 325ms cubic-bezier(.15,.65,.1,1);transition:-webkit-transform 325ms cubic-bezier(.15,.65,.1,1);transition:transform 325ms cubic-bezier(.15,.65,.1,1);transition:transform 325ms cubic-bezier(.15,.65,.1,1),-webkit-transform 325ms cubic-bezier(.15,.65,.1,1)}.awssld--active{visibility:visible;z-index:2;-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}.awssld--moveRight,.awssld--moveLeft{-webkit-backface-visibility:hidden;backface-visibility:hidden}.awssld--moveRight{-webkit-animation:slideFromRight var(--slider-transition-duration) both var(--transition-bezier);animation:slideFromRight var(--slider-transition-duration) both var(--transition-bezier)}.awssld--moveLeft{-webkit-animation:slideFromLeft var(--slider-transition-duration) both var(--transition-bezier);animation:slideFromLeft var(--slider-transition-duration) both var(--transition-bezier)}.awssld--exit{z-index:0}.awssld--exit.awssld--moveLeft{-webkit-animation:slideToLeft var(--slider-transition-duration) both var(--transition-bezier);animation:slideToLeft var(--slider-transition-duration) both var(--transition-bezier)}.awssld--exit.awssld--moveRight{-webkit-animation:slideToRight var(--slider-transition-duration) both var(--transition-bezier);animation:slideToRight var(--slider-transition-duration) both var(--transition-bezier)}.awssld--first .awssld__prev,.awssld--last .awssld__next{visibility:hidden}.awssld--fill-parent{position:absolute!important;width:100%!important;height:100%!important;top:0;left:0}.awssld--fill-parent .awssld__container{height:100%;padding:0}.awssld__bullets{position:absolute;bottom:-40px;width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.awssld__bullets button{padding:0;display:block;width:16px;height:16px;margin:5px;border-radius:50%;background:var(--control-bullet-color);text-indent:-9999px;overflow:hidden;cursor:pointer;border:none;-webkit-transition:background-color .175s ease-out,-webkit-transform .225s cubic-bezier(.8,1.35,.75,1.45);transition:background-color .175s ease-out,-webkit-transform .225s cubic-bezier(.8,1.35,.75,1.45);transition:transform .225s cubic-bezier(.8,1.35,.75,1.45),background-color .175s ease-out;transition:transform .225s cubic-bezier(.8,1.35,.75,1.45),background-color .175s ease-out,-webkit-transform .225s cubic-bezier(.8,1.35,.75,1.45)}.awssld__bullets button:hover,.awssld__bullets .awssld__bullets--loading{-webkit-transform:scale(1.2);transform:scale(1.2)}.awssld__bullets .awssld__bullets--active{-webkit-transform:scale(1.5);transform:scale(1.5);background:var(--control-bullet-active-color)}.awssld__bullets .awssld__bullets--active:hover{-webkit-transform:scale(1.5);transform:scale(1.5)}.awssld__controls__arrow-left,.awssld__controls__arrow-right{width:100%;height:var(--organic-arrow-height);position:relative;display:block;-webkit-transition:opacity .2s ease-out,-webkit-transform .2s ease-out .125s;transition:opacity .2s ease-out,-webkit-transform .2s ease-out .125s;transition:transform .2s ease-out .125s,opacity .2s ease-out;transition:transform .2s ease-out .125s,opacity .2s ease-out,-webkit-transform .2s ease-out .125s}.awssld__controls__arrow-left:before,.awssld__controls__arrow-left:after,.awssld__controls__arrow-right:before,.awssld__controls__arrow-right:after{content:" ";position:absolute;right:calc(50% - (.7071 * (var(--organic-arrow-height) + var(--organic-arrow-thickness))) / 2);height:100%;border-radius:var(--organic-arrow-border-radius);width:var(--organic-arrow-thickness);background-color:var(--organic-arrow-color);-webkit-transition:background-color .15s ease-out,-webkit-transform .15s ease-out;transition:background-color .15s ease-out,-webkit-transform .15s ease-out;transition:transform .15s ease-out,background-color .15s ease-out;transition:transform .15s ease-out,background-color .15s ease-out,-webkit-transform .15s ease-out}.awssld__controls__arrow-left:before,.awssld__controls__arrow-right:before{-webkit-transform-origin:100% 100% 0;transform-origin:100% 100% 0;top:-50%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.awssld__controls__arrow-left:after,.awssld__controls__arrow-right:after{-webkit-transform-origin:100% 0% 0;transform-origin:100% 0% 0;top:50%;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.awssld__controls__arrow-right--active{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}.awssld__controls__arrow-right--active:after{-webkit-transform:rotate(90deg) translate3d(50%,0,0)!important;transform:rotate(90deg) translate3d(50%,0,0)!important}.awssld__controls__arrow-right--active:before{-webkit-transform:rotate(-90deg) translate3d(50%,0,0)!important;transform:rotate(-90deg) translate3d(50%,0,0)!important}.awssld__controls__arrow-left:before,.awssld__controls__arrow-left:after{right:auto;left:calc(50% - (.7071 * (var(--organic-arrow-height) + var(--organic-arrow-thickness))) / 2)}.awssld__controls__arrow-left:before{-webkit-transform-origin:0 100% 0;transform-origin:0 100% 0;top:-50%;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.awssld__controls__arrow-left:after{-webkit-transform-origin:0 0 0;transform-origin:0 0 0;top:50%;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)}.awssld__controls__arrow-left--active{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}.awssld__controls__arrow-left--active:after{-webkit-transform:rotate(-90deg) translate3d(-50%,0,0)!important;transform:rotate(-90deg) translate3d(-50%,0,0)!important}.awssld__controls__arrow-left--active:before{-webkit-transform:rotate(90deg) translate3d(-50%,0,0)!important;transform:rotate(90deg) translate3d(-50%,0,0)!important}.awssld__controls button:hover .awssld__controls__arrow-left:before{opacity:1;-webkit-transform:rotate(30deg);transform:rotate(30deg)}.awssld__controls button:hover .awssld__controls__arrow-left:after{opacity:1;-webkit-transform:rotate(-30deg);transform:rotate(-30deg)}.awssld__controls button:hover .awssld__controls__arrow-right:before{opacity:1;-webkit-transform:rotate(-30deg);transform:rotate(-30deg)}.awssld__controls button:hover .awssld__controls__arrow-right:after{opacity:1;-webkit-transform:rotate(30deg);transform:rotate(30deg)}.awssld__timer{--timer-delay: 2s;--timer-release: .2s;--timer-height: 4px;--timer-background-color: rgba(0, 0, 0, .15);width:100%;height:var(--timer-height);background-color:var(--timer-background-color);position:absolute;top:0;left:0;z-index:100;-webkit-transform:translateX(-100%);transform:translate(-100%)}.awssld__timer--animated{will-change:transform;-webkit-transition:-webkit-transform var(--timer-delay) linear;transition:-webkit-transform var(--timer-delay) linear;transition:transform var(--timer-delay) linear;transition:transform var(--timer-delay) linear,-webkit-transform var(--timer-delay) linear}.awssld__timer--run{-webkit-transform:translateX(0);transform:translate(0)}.awssld__timer--fast{-webkit-transition:-webkit-transform calc(var(--timer-release) / 2) linear;transition:-webkit-transform calc(var(--timer-release) / 2) linear;transition:transform calc(var(--timer-release) / 2) linear;transition:transform calc(var(--timer-release) / 2) linear,-webkit-transform calc(var(--timer-release) / 2) linear;-webkit-transform:translateX(-.00001px);transform:translate(-.00001px)}.awssld__timer--end{-webkit-transform:translateX(-.0001px);transform:translate(-.0001px);-webkit-transition:-webkit-transform var(--timer-release) linear;transition:-webkit-transform var(--timer-release) linear;transition:transform var(--timer-release) linear;transition:transform var(--timer-release) linear,-webkit-transform var(--timer-release) linear}.awssld__timer--hidden{display:none}@-webkit-keyframes slideFromLeft{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes slideFromLeft{0%{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@-webkit-keyframes slideFromRight{0%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes slideFromRight{0%{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@-webkit-keyframes slideToLeft{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@keyframes slideToLeft{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(-100%,0,0);transform:translate3d(-100%,0,0)}}@-webkit-keyframes slideToRight{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}@keyframes slideToRight{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}to{-webkit-transform:translate3d(100%,0,0);transform:translate3d(100%,0,0)}}.custom-slider-container{--content-background-color: #00000000 !important}.custom-slider-container .awssld__content>*{width:100%;height:100%}.custom-slider-container .awssld__controls button{padding:2.4rem;width:fit-content;height:fit-content;top:50%;transform:translateY(-50%)}.awssld--scaleOutAnimation{--scale-out-scale: .85}.awssld--scaleOutAnimation .awssld--exit.awssld--moveRight,.awssld--scaleOutAnimation .awssld--exit.awssld--moveLeft{-webkit-animation:scaleOut var(--slider-transition-duration) both var(--transition-bezier);animation:scaleOut var(--slider-transition-duration) both var(--transition-bezier)}@-webkit-keyframes scaleOut{to{-webkit-transform:scale(var(--scale-out-scale));transform:scale(var(--scale-out-scale))}}@keyframes scaleOut{to{-webkit-transform:scale(var(--scale-out-scale));transform:scale(var(--scale-out-scale))}}.awssld--foldOutAnimation{--fold-out-perspective: 2000px;--fold-out-angle: 90deg}.awssld--foldOutAnimation .awssld__container{-webkit-perspective:var(--fold-out-perspective);perspective:var(--fold-out-perspective)}.awssld--foldOutAnimation .awssld--exit.awssld--moveLeft,.awssld--foldOutAnimation .awssld--exit.awssld--moveRight{-webkit-transform-style:preserve-3d;transform-style:preserve-3d}.awssld--foldOutAnimation .awssld--exit.awssld--moveLeft{-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-animation:foldLeft var(--slider-transition-duration) both var(--transition-bezier);animation:foldLeft var(--slider-transition-duration) both var(--transition-bezier)}.awssld--foldOutAnimation .awssld--exit.awssld--moveRight{-webkit-transform-origin:0% 50%;transform-origin:0% 50%;-webkit-animation:foldRight var(--slider-transition-duration) both var(--transition-bezier);animation:foldRight var(--slider-transition-duration) both var(--transition-bezier)}@-webkit-keyframes foldLeft{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1));transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1))}}@keyframes foldLeft{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1));transform:translate3d(-100%,0,0) rotateY(calc(var(--fold-out-angle) * -1))}}@-webkit-keyframes foldRight{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle));transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle))}}@keyframes foldRight{0%{-webkit-transform:translate3d(0,0,0) rotateY(0deg);transform:translateZ(0) rotateY(0)}to{-webkit-transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle));transform:translate3d(100%,0,0) rotateY(var(--fold-out-angle))}}.awssld--cubeAnimation{--cube-animation-duration: 675ms;--cube-animation-perspective: 1800px;--cube-animation-ease-in: cubic-bezier(.8, 0, 1, .8);--cube-animation-ease-out: cubic-bezier(0, .2, .2, 1);--cube-translateZ-distance: -225px}.awssld--cubeAnimation .awssld__container{-webkit-perspective:var(--cube-animation-perspective);perspective:var(--cube-animation-perspective)}.awssld--cubeAnimation .awssld--moveRight{-webkit-transform-origin:0% 50%;transform-origin:0% 50%;-webkit-animation:cubeLeftIn var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeLeftIn var(--cube-animation-duration) both var(--cube-animation-ease-in)}.awssld--cubeAnimation .awssld--moveLeft{-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-animation:cubeRightIn var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeRightIn var(--cube-animation-duration) both var(--cube-animation-ease-in)}.awssld--cubeAnimation .awssld--exit.awssld--moveLeft{-webkit-transform-origin:100% 50%;transform-origin:100% 50%;-webkit-animation:cubeLeftOut var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeLeftOut var(--cube-animation-duration) both var(--cube-animation-ease-in)}.awssld--cubeAnimation .awssld--exit.awssld--moveRight{-webkit-transform-origin:0% 50%;transform-origin:0% 50%;-webkit-animation:cubeRightOut var(--cube-animation-duration) both var(--cube-animation-ease-in);animation:cubeRightOut var(--cube-animation-duration) both var(--cube-animation-ease-in)}@-webkit-keyframes cubeLeftOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}to{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}}@keyframes cubeLeftOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}to{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}}@-webkit-keyframes cubeRightOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}to{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}}@keyframes cubeRightOut{50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}to{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}}@-webkit-keyframes cubeLeftIn{0%{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}}@keyframes cubeLeftIn{0%{-webkit-transform:translateX(100%) rotateY(90deg);transform:translate(100%) rotateY(90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg);transform:translate(50%) translateZ(var(--cube-translateZ-distance)) rotateY(45deg)}}@-webkit-keyframes cubeRightIn{0%{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}}@keyframes cubeRightIn{0%{-webkit-transform:translateX(-100%) rotateY(-90deg);transform:translate(-100%) rotateY(-90deg)}50%{-webkit-animation-timing-function:var(--cube-animation-ease-out);animation-timing-function:var(--cube-animation-ease-out);-webkit-transform:translateX(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg);transform:translate(-50%) translateZ(var(--cube-translateZ-distance)) rotateY(-45deg)}}.awssld--fallAnimation{--fall-animation-angle: 16deg;--fall-scaling-in-from: .9}.awssld--fallAnimation .awssld--moveRight,.awssld--fallAnimation .awssld--moveLeft{-webkit-animation:scaleUp calc(var(--slider-transition-duration) / 2) var(--transition-bezier) both;animation:scaleUp calc(var(--slider-transition-duration) / 2) var(--transition-bezier) both}.awssld--fallAnimation .awssld--exit{z-index:100}.awssld--fallAnimation .awssld--exit.awssld--moveLeft{-webkit-transform-origin:0% 0%;transform-origin:0% 0%;-webkit-animation:rotateFallRight var(--slider-transition-duration) both ease-in-out;animation:rotateFallRight var(--slider-transition-duration) both ease-in-out}.awssld--fallAnimation .awssld--exit.awssld--moveRight{-webkit-transform-origin:100% 0%;transform-origin:100% 0%;-webkit-animation:rotateFallLeft var(--slider-transition-duration) both ease-in-out;animation:rotateFallLeft var(--slider-transition-duration) both ease-in-out}@-webkit-keyframes scaleUp{0%{-webkit-transform:scale(var(--fall-scaling-in-from));transform:scale(var(--fall-scaling-in-from))}75%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes scaleUp{0%{-webkit-transform:scale(var(--fall-scaling-in-from));transform:scale(var(--fall-scaling-in-from))}75%{-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes rotateFallRight{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(var(--fall-animation-angle));transform:rotate(var(--fall-animation-angle))}60%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) - 2deg));transform:rotate(calc(var(--fall-animation-angle) - 2deg))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * 2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * 2))}}@keyframes rotateFallRight{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(var(--fall-animation-angle));transform:rotate(var(--fall-animation-angle))}60%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) - 2deg));transform:rotate(calc(var(--fall-animation-angle) - 2deg))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * 2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * 2))}}@-webkit-keyframes rotateFallLeft{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) * -1));transform:rotate(calc(var(--fall-animation-angle) * -1))}60%{-webkit-transform:rotateZ(calc((var(--fall-animation-angle) - 2deg) * -1));transform:rotate(calc((var(--fall-animation-angle) - 2deg) * -1))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * -2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * -2))}}@keyframes rotateFallLeft{0%{-webkit-transform:rotateZ(0deg);transform:rotate(0)}40%{-webkit-transform:rotateZ(calc(var(--fall-animation-angle) * -1));transform:rotate(calc(var(--fall-animation-angle) * -1))}60%{-webkit-transform:rotateZ(calc((var(--fall-animation-angle) - 2deg) * -1));transform:rotate(calc((var(--fall-animation-angle) - 2deg) * -1))}to{-webkit-transform:translateY(100%) rotateZ(calc(var(--fall-animation-angle) * -2));transform:translateY(100%) rotate(calc(var(--fall-animation-angle) * -2))}}._tag-container_1y7wn_1{padding:3px 7px;border-radius:100rem;gap:6px;justify-content:center;color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950))}._tag-container_1y7wn_1[class~=dashed]{border-style:dashed}._tag-container_1y7wn_1[class~=size32]{padding:4px 11px;gap:8px}._tag-container_1y7wn_1._type-button_1y7wn_37{cursor:pointer}._tag-container_1y7wn_1>._tag-label_1y7wn_45{color:inherit;font:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit}._tag-container_1y7wn_1._disabled_1y7wn_67{color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B));background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;border-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;pointer-events:none!important}._tag-container_1y7wn_1[class~=tag-primary]{background-color:var(--primary-main-color, #2F80ED)!important;border-color:var(--primary-main-color, #2F80ED)!important}._tag-container_1y7wn_1[class~=tag-primary] *{color:var(--neutral-text-stable-color, #FFFFFF)!important}._tag-container_1y7wn_1[class~=tag-grey]{border-color:var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))!important;background-color:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))!important}._tag-container_1y7wn_1[class~=tag-grey] *{color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))!important}._tag-container_1y7wn_1[class~=tag-neutral]{border-color:var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))!important}._tag-container_1y7wn_1[class~=tag-neutral] *{color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))!important}._tag-container_1y7wn_1[class~=tag-infor]{background-color:var(--infor-background, light-dark(#ECF3FE, #031630));border-color:var(--infor-main-color, #287CF0)!important}._tag-container_1y7wn_1[class~=tag-infor] *{color:var(--infor-main-color, #287CF0)!important}._tag-container_1y7wn_1[class~=tag-warning]{background-color:var(--warning-background, light-dark(#FFF3EB, #321501));border-color:var(--warning-main-color, #FC7A1C)!important}._tag-container_1y7wn_1[class~=tag-warning] *{color:var(--warning-main-color, #FC7A1C)!important}._tag-container_1y7wn_1[class~=tag-error]{background-color:var(--error-background, light-dark(#FCEEED, #2C0907));border-color:var(--error-main-color, #E14337)!important}._tag-container_1y7wn_1[class~=tag-error] *{color:var(--error-main-color, #E14337)!important}._tag-container_1y7wn_1[class~=tag-success]{background-color:var(--success-background, light-dark(#E8F7EF, #0D2618));border-color:var(--success-main-color, #3AAC6D)!important}._tag-container_1y7wn_1[class~=tag-success] *{color:var(--success-main-color, #3AAC6D)!important}._number-picker-container_163rx_1,._simple-number-picker_163rx_1{position:relative}._number-picker-container_163rx_1{gap:.4rem}._number-picker-container_163rx_1[number-picker-type=outline]{border-radius:.8rem;padding:0 .6rem;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950))}._number-picker-container_163rx_1[number-picker-type=outline]>div:has(>svg),._simple-number-picker_163rx_1[number-picker-type=outline]>div:has(>svg){padding:.6rem;border-radius:0}._number-picker-container_163rx_1[class~=size40]>div>svg{width:1.6rem;height:1.6rem}._number-picker-container_163rx_1[class~=size40]>div:has(>svg){padding:1.1rem}._number-picker-container_163rx_1[class~=size40][number-picker-type=outline]>div:has(>svg){padding:1rem}._number-picker-container_163rx_1[class~=size24]>div:has(>svg){padding:.5rem}._number-picker-container_163rx_1[class~=size24][number-picker-type=outline]>div:has(>svg){padding:.4rem}._number-picker-container_163rx_1[class~=size24]>div>svg{width:1.2rem;height:1.2rem}._number-picker-container_163rx_1[number-picker-type=icon-button]>div:has(>svg),._simple-number-picker_163rx_1[number-picker-type=icon-button]>div:has(>svg){color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA));border:1px solid currentColor}._number-picker-container_163rx_1>input,._simple-number-picker_163rx_1>input{flex:1;width:100%;min-width:5.6rem;border:none;border-color:transparent;color:inherit;outline:none;padding:0 .4rem;background-color:transparent!important;font:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:center;text-overflow:inherit}._number-picker-container_163rx_1 *,._simple-number-picker_163rx_1 *{font-size:inherit!important}._number-picker-container_163rx_1>input:focus{border-color:var(--primary-main-color, #2F80ED);border-radius:.8rem}._number-picker-container_163rx_1[number-picker-type=outline]:focus-within{border-color:var(--primary-main-color, #2F80ED)}._number-picker-container_163rx_1:has(>input:disabled){pointer-events:none!important;color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))}._number-picker-container_163rx_1[number-picker-type=outline]:has(>input:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._number-picker-container_163rx_1:has(>input:disabled)>div:has(>svg){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))}._number-picker-container_163rx_1._helper-text_163rx_197,._simple-number-picker_163rx_1._helper-text_163rx_197{overflow:visible!important;border-color:var(--helper-text-color, #E14337)}._number-picker-container_163rx_1._helper-text_163rx_197:after,._simple-number-picker_163rx_1._helper-text_163rx_197:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._input-opt-container_13315_1{height:4.8rem;gap:.8rem}._input-opt-container_13315_1>input{border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950));height:100%;aspect-ratio:1 / 1;border-radius:.8rem;text-align:center;min-width:3.2rem;font:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;font-style:inherit}._input-opt-container_13315_1:focus-within>input{border-color:var(--primary-main-color, #287CF0)}._input-opt-container_13315_1._helper-text_13315_49{overflow:visible!important;border-color:var(--helper-text-color, #E14337)!important}._input-opt-container_13315_1._helper-text_13315_49:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._login-view-container_ljuvx_1{gap:4.8rem;align-items:center;min-width:320px;max-width:460px}._login-view-form-container_ljuvx_15{gap:2rem;align-items:inherit;width:100%}._login-view-form-container_ljuvx_15>div:last-child{padding:.4rem 3.2rem;gap:inherit;align-items:inherit;width:100%}._login-view-form-container_ljuvx_15>div:last-child>div{width:100%}button._login-btn_ljuvx_49{height:4.8rem;width:100%;justify-content:center;background-color:var(--primary-main-color, #287CF0);color:var(--neutral-text-stable-color, #FFFFFF)}button:disabled._login-btn_ljuvx_49{background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950));color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B));cursor:context-menu}._forgot-password-btn_ljuvx_77{color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))}._forgot-password-btn_ljuvx_77:hover,._register-btn_ljuvx_95:hover{text-decoration:underline;cursor:pointer}._login-social-media_ljuvx_105{gap:1.6rem;flex-wrap:wrap}._login-social-media_ljuvx_105>button{height:4.8rem;width:calc((100% - 1.6rem)/2);gap:1.6rem;justify-content:center;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950));background-color:transparent}._or-spacing_ljuvx_133{gap:1.2rem}._or-spacing_ljuvx_133>div:nth-child(odd){height:1px;width:100%;flex:1;background-color:var(--neutral-text-body-reverse-color, #EAEAEC)}._or-spacing_ljuvx_133>div:nth-child(2n){color:var(--neutral-text-subtitle-color, light-dark(#61616B, #A2A2AA))}.editor-container{position:relative;--ck-color-text: var(--neutral-text-title-color, light-dark(#18181B, #F4F4F5));width:100%;height:400px;max-height:600px;border-radius:.8rem;border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950));overflow:hidden visible}.editor-container:has(.ck-read-only){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;pointer-events:none!important}.editor-container:focus-within{border-color:var(--primary-main-color, #287CF0)}.editor-container.helper-text{overflow:visible!important;border-color:var(--helper-text-color, #E14337)!important}.editor-container.helper-text:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}.ck-content{font-family:Inter;line-height:1.6;word-break:break-word}.ck-content h3.category{font-family:Inter;font-size:20px;font-weight:700;color:#555;letter-spacing:10px;margin:0;padding:0}.ck-content h2.document-title{font-family:Inter;font-size:50px;font-weight:700;margin:0;padding:0;border:0}.ck-content h3.document-subtitle{font-family:Inter;font-size:20px;color:#555;margin:0 0 1em;font-weight:700;padding:0}.ck-content blockquote.side-quote{font-family:Inter;font-style:normal;float:right;width:35%;position:relative;border:0;overflow:visible;z-index:1;margin-left:1em}.ck-content blockquote.side-quote:before{content:"“";position:absolute;top:-37px;left:-10px;display:block;font-size:200px;color:#e7e7e7;z-index:-1;line-height:1}.ck-content blockquote.side-quote p{font-size:2em;line-height:1}.ck-content blockquote.side-quote p:last-child:not(:first-child){font-size:1.3em;text-align:right;color:#555}.ck-content span.marker{background:#ff0}.ck-content span.spoiler{background:#000;color:#000}.ck-content span.spoiler:hover{background:#000;color:#fff}.ck-content pre.fancy-code{border:0;margin-left:2em;margin-right:2em;border-radius:10px}.ck-content pre.fancy-code:before{content:"";display:block;height:13px;background:url(data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NCAxMyI+CiAgPGNpcmNsZSBjeD0iNi41IiBjeT0iNi41IiByPSI2LjUiIGZpbGw9IiNGMzZCNUMiLz4KICA8Y2lyY2xlIGN4PSIyNi41IiBjeT0iNi41IiByPSI2LjUiIGZpbGw9IiNGOUJFNEQiLz4KICA8Y2lyY2xlIGN4PSI0Ny41IiBjeT0iNi41IiByPSI2LjUiIGZpbGw9IiM1NkM0NTMiLz4KPC9zdmc+Cg==);margin-bottom:8px;background-repeat:no-repeat}.ck-content pre.fancy-code-dark{background:#272822;color:#fff;box-shadow:5px 5px #0000001f}.ck-content pre.fancy-code-bright{background:#dddfe0;color:#000;box-shadow:5px 5px #b3b3b3}.editor-container_classic-editor .editor-container__editor .ck-editor .ck-editor__editable{border-radius:0}.ck-editor-container{--ck-font-size-base: 1.4rem}.editor-container__editor{flex:1;height:100%;overflow:hidden!important;display:flex;flex-direction:column}.editor-container__editor>div,.ck.ck-reset.ck-editor.ck-rounded-corners{flex:1;height:100%;overflow:hidden!important;display:flex;flex-direction:column}.ck.ck-editor__main>.ck.ck-content.ck-rounded-corners{min-height:100%}.ck.ck-toolbar{background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))!important;border-radius:.8rem .8rem 0 0!important}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content{height:40px;border:none!important;border-radius:.8rem .8rem 0 0!important;border-bottom:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))!important}.ck.ck-editor__main{flex:1;height:100%!important;overflow:hidden auto!important}.ck.ck-editor__main>div{background-color:transparent!important;border:none!important;font-size:16px!important}.ck.ck-color-grid>button{border:1px solid var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950));border-radius:.4rem!important}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover,.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))!important}.ck.ck-button.ck-list-item-button,.ck.ck-button.ck-list-item-button.ck-on,.ck.ck-list,.ck.ck-dropdown__panel{background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))!important}/**
* @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
* For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
*/:root{--ck-color-base-foreground: hsl(0, 0%, 98%);--ck-color-base-background: hsl(0, 0%, 100%);--ck-color-base-border: hsl(220, 6%, 81%);--ck-color-base-action: hsl(104, 50.2%, 42.5%);--ck-color-base-focus: hsl(209, 92%, 70%);--ck-color-base-text: hsl(0, 0%, 20%);--ck-color-base-active: hsl(218.1, 100%, 58%);--ck-color-base-active-focus: hsl(218.2, 100%, 52.5%);--ck-color-base-error: hsl(15, 100%, 43%);--ck-color-focus-border-coordinates: 218, 81.8%, 56.9%;--ck-color-focus-border: hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow: hsl(212.4, 89.3%, 89%);--ck-color-focus-disabled-shadow: hsla(209, 90%, 72%,.3);--ck-color-focus-error-shadow: hsla(9,100%,56%,.3);--ck-color-text: var(--ck-color-base-text);--ck-color-shadow-drop: hsla(0, 0%, 0%, .15);--ck-color-shadow-drop-active: hsla(0, 0%, 0%, .2);--ck-color-shadow-inner: hsla(0, 0%, 0%, .1);--ck-color-button-default-background: transparent;--ck-color-button-default-hover-background: hsl(0, 0%, 94.1%);--ck-color-button-default-active-background: hsl(0, 0%, 94.1%);--ck-color-button-default-disabled-background: transparent;--ck-color-button-on-background: hsl(212, 100%, 97.1%);--ck-color-button-on-hover-background: hsl(211.7, 100%, 92.9%);--ck-color-button-on-active-background: hsl(211.7, 100%, 92.9%);--ck-color-button-on-disabled-background: hsl(211, 15%, 95%);--ck-color-button-on-color: hsl(218.1, 100%, 58%);--ck-color-button-action-background: var(--ck-color-base-action);--ck-color-button-action-hover-background: hsl(104, 53.2%, 40.2%);--ck-color-button-action-active-background: hsl(104, 53.2%, 40.2%);--ck-color-button-action-disabled-background: hsl(104, 44%, 58%);--ck-color-button-action-text: var(--ck-color-base-background);--ck-color-button-save: hsl(120, 100%, 27%);--ck-color-button-cancel: hsl(15, 100%, 43%);--ck-color-switch-button-off-background: hsl(0, 0%, 57.6%);--ck-color-switch-button-off-hover-background: hsl(0, 0%, 49%);--ck-color-switch-button-on-background: var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background: hsl(104, 53.2%, 40.2%);--ck-color-switch-button-inner-background: var(--ck-color-base-background);--ck-color-switch-button-inner-shadow: hsla(0, 0%, 0%, .1);--ck-color-dropdown-panel-background: var(--ck-color-base-background);--ck-color-dropdown-panel-border: var(--ck-color-base-border);--ck-color-dialog-background: var(--ck-custom-background);--ck-color-dialog-form-header-border: var(--ck-custom-border);--ck-color-input-background: var(--ck-color-base-background);--ck-color-input-border: var(--ck-color-base-border);--ck-color-input-error-border: var(--ck-color-base-error);--ck-color-input-text: var(--ck-color-base-text);--ck-color-input-disabled-background: hsl(0, 0%, 95%);--ck-color-input-disabled-border: var(--ck-color-base-border);--ck-color-input-disabled-text: hsl(0, 0%, 46%);--ck-color-list-background: var(--ck-color-base-background);--ck-color-list-button-hover-background: var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background: var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus: var(--ck-color-button-on-color);--ck-color-list-button-on-text: var(--ck-color-base-background);--ck-color-panel-background: var(--ck-color-base-background);--ck-color-panel-border: var(--ck-color-base-border);--ck-color-toolbar-background: var(--ck-color-base-background);--ck-color-toolbar-border: var(--ck-color-base-border);--ck-color-tooltip-background: var(--ck-color-base-text);--ck-color-tooltip-text: var(--ck-color-base-background);--ck-color-engine-placeholder-text: hsl(0, 0%, 44%);--ck-color-upload-bar-background: hsl(209, 92%, 70%);--ck-color-link-default: hsl(240, 100%, 47%);--ck-color-link-selected-background: hsla(201, 100%, 56%, .1);--ck-color-link-fake-selection: hsla(201, 100%, 56%, .3);--ck-color-highlight-background: hsl(60, 100%, 50%);--ck-color-light-red: hsl(0, 100%, 90%)}:root{--ck-disabled-opacity: .5}:root{--ck-focus-outer-shadow-geometry: 0 0 0 3px;--ck-focus-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow: var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring: 1px solid var(--ck-color-focus-border)}:root{--ck-font-size-base: 13px;--ck-line-height-base: 1.84615;--ck-font-face: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;--ck-font-size-tiny: .7em;--ck-font-size-small: .75em;--ck-font-size-normal: 1em;--ck-font-size-big: 1.4em;--ck-font-size-large: 1.8em}:root{--ck-ui-component-min-height: 2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck-reset_all *:not(.ck-reset_all-excluded *){box-sizing:border-box;width:auto;height:auto;position:static;margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck-reset_all *:not(.ck-reset_all-excluded *){border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck-reset_all .ck-rtl *:not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all textarea:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){padding:10px;border:2px groove hsl(255,7%,88%)}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius: 2px}:root{--ck-inner-shadow: 2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow: 0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active: 0 3px 6px 1px var(--ck-color-shadow-drop-active)}:root{--ck-spacing-unit: .6em;--ck-spacing-large: calc(var(--ck-spacing-unit) * 1.5);--ck-spacing-standard: var(--ck-spacing-unit);--ck-spacing-medium: calc(var(--ck-spacing-unit) * .8);--ck-spacing-small: calc(var(--ck-spacing-unit) * .5);--ck-spacing-tiny: calc(var(--ck-spacing-unit) * .3);--ck-spacing-extra-tiny: calc(var(--ck-spacing-unit) * .16)}.ck.ck-autocomplete>.ck-search__results{border-radius:0;max-height:200px;overflow-y:auto;background:var(--ck-color-base-background);border:1px solid var(--ck-color-dropdown-panel-border);min-width:auto}.ck-rounded-corners .ck.ck-autocomplete>.ck-search__results,.ck.ck-autocomplete>.ck-search__results.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-autocomplete>.ck-search__results{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{border-top-left-radius:0;border-top-right-radius:0;margin-top:-1px}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background);border-radius:0;white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion: reduce){.ck.ck-button,a.ck.ck-button{transition:none}}.ck.ck-button:active,a.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit;opacity:.5}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-medium)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background);color:var(--ck-color-button-on-color)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background);color:var(--ck-color-button-action-text)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}:root{--ck-switch-button-toggle-width: 2.6153846154em;--ck-switch-button-toggle-inner-size: calc(1.0769230769em + 1px);--ck-switch-button-translation: calc( var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px );--ck-switch-button-inner-hover-shadow: 0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton:hover,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:active{color:inherit;background:transparent}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2 * var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2 * var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;border:1px solid transparent;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0;width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(.5 * var(--ck-border-radius))}@media (prefers-reduced-motion: reduce){.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{transition:none}}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;outline:none;box-shadow:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline-offset:1px;outline:var(--ck-focus-ring)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translate(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translate(calc(-1 * var( --ck-switch-button-translation )))}.ck.ck-button.ck-list-item-button{padding:var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard))}.ck.ck-button.ck-list-item-button,.ck.ck-button.ck-list-item-button.ck-on{background:var(--ck-color-list-background);color:var(--ck-color-text)}[dir=ltr] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-list-item-button:has(.ck-list-item-button__check-holder){padding-right:var(--ck-spacing-small)}.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover,.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable),.ck.ck-button.ck-list-item-button.ck-on:hover{background:var(--ck-color-list-button-hover-background)}.ck.ck-button.ck-list-item-button:hover:not(.ck-disabled):not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-button.ck-on:hover:not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:not(.ck-list-item-button_toggleable):not(.ck-disabled),.ck.ck-button.ck-list-item-button.ck-on:hover:not(.ck-disabled){color:var(--ck-color-text)}:root{--ck-collapsible-arrow-size: calc(.5 * var(--ck-icon-size))}.ck.ck-collapsible>.ck.ck-button{width:100%;font-weight:700;border-radius:0;color:inherit}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:not(:focus),.ck.ck-collapsible>.ck.ck-button:hover:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:var(--ck-spacing-medium) var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}:root{--ck-color-grid-tile-size: 24px;--ck-color-color-grid-check-icon: hsl(212, 81%, 46%)}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{transition:.2s ease box-shadow}@media (forced-colors: none){.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;border:0}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}}@media (forced-colors: active){.ck.ck-color-grid__tile{width:unset;height:unset;min-width:unset;min-height:unset;padding:0 var(--ck-spacing-small)}.ck.ck-color-grid__tile .ck-button__label{display:inline-block}}@media (prefers-reduced-motion: reduce){.ck.ck-color-grid__tile{transition:none}}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{width:100%}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{padding:calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker{padding:8px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker{height:100px;min-width:180px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer),.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer){width:15px;height:15px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{padding:0 8px 8px}:root{--ck-dialog-overlay-background-color: hsla( 0, 0%, 0%, .5 );--ck-dialog-drop-shadow: 0px 0px 6px 2px hsl(0deg 0% 0% / 15%);--ck-dialog-max-width: 100vw;--ck-dialog-max-height: 90vh;--ck-color-dialog-background: var(--ck-color-base-background);--ck-color-dialog-form-header-border: var(--ck-color-base-border)}.ck.ck-dialog-overlay{animation:ck-dialog-fade-in .3s;background:var(--ck-dialog-overlay-background-color);z-index:var(--ck-z-dialog)}.ck.ck-dialog{border-radius:0;--ck-drop-shadow: var(--ck-dialog-drop-shadow);background:var(--ck-color-dialog-background);max-height:var(--ck-dialog-max-height);max-width:var(--ck-dialog-max-width);border:1px solid var(--ck-color-base-border);overscroll-behavior:contain}.ck-rounded-corners .ck.ck-dialog,.ck.ck-dialog.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dialog{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dialog .ck.ck-form__header{border-bottom:1px solid var(--ck-color-dialog-form-header-border)}.ck-dialog-scroll-locked{overflow:hidden}@keyframes ck-dialog-fade-in{0%{background:#0000}to{background:var(--ck-dialog-overlay-background-color)}}.ck.ck-dialog .ck.ck-dialog__actions{padding:var(--ck-spacing-large)}.ck.ck-dialog .ck.ck-dialog__actions>*+*{margin-left:var(--ck-spacing-large)}:root{--ck-dropdown-arrow-size: calc(.5 * var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}.ck.ck-dropdown__panel:focus{outline:none}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:first-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button,.ck.ck-dropdown>.ck-dropdown__panel>.ck-list .ck-list__item:last-child>.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}:root{--ck-color-split-button-hover-background: hsl(0, 0%, 92%);--ck-color-split-button-hover-border: hsl(0, 0%, 70%)}[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-top-width:0px;border-bottom-width:0px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{content:"";position:absolute;width:1px;height:100%;background-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border: var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button{width:100%;padding:var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));border-radius:0}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus{border-color:transparent;box-shadow:none}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-icon-spacing:not(:has(.ck-button__icon))>.ck-button__label{margin-left:calc(var(--ck-icon-size) - var(--ck-spacing-small))}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{transform:rotate(-90deg);margin-right:calc(-1 * var(--ck-spacing-small))}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{transform:rotate(90deg);margin-left:calc(-1 * var(--ck-spacing-small))}.ck.ck-button.ck-dropdown-menu-list__nested-menu__button.ck-disabled>.ck-dropdown-menu-list__nested-menu__button__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=ltr] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}:root{--ck-dropdown-menu-menu-item-min-width: 18em}.ck.ck-dropdown-menu-list__nested-menu__item{min-width:var(--ck-dropdown-menu-menu-item-min-width)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button{border-radius:0}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container,.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size: 20px}.ck-button.ck-dropdown-menu-list__nested-menu__item__button>.ck-spinner-container{margin-left:calc(-1 * var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus{border-color:transparent;box-shadow:none}.ck-button.ck-dropdown-menu-list__nested-menu__item__button:focus:not(.ck-on){background:var(--ck-color-button-default-hover-background)}:root{--ck-dropdown-menu-menu-panel-max-width: 75vw}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;height:fit-content;max-width:var(--ck-dropdown-menu-menu-panel-max-width)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:after,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:before{display:none}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_es,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_se{border-top-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ws,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_sw{border-top-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_en,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_ne{border-bottom-left-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_wn,.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel.ck-balloon-panel_nw{border-bottom-right-radius:0}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel:focus{outline:none}:root{--ck-accessibility-help-dialog-max-width: 600px;--ck-accessibility-help-dialog-max-height: 400px;--ck-accessibility-help-dialog-border-color: hsl(220, 6%, 81%);--ck-accessibility-help-dialog-code-background-color: hsl(0deg 0% 92.94%);--ck-accessibility-help-dialog-kbd-shadow-color: hsl(0deg 0% 61%)}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content{padding:var(--ck-spacing-large);max-width:var(--ck-accessibility-help-dialog-max-width);max-height:var(--ck-accessibility-help-dialog-max-height);overflow:auto;-webkit-user-select:text;user-select:text;border:1px solid transparent}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content *{white-space:normal}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content .ck-label{display:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3{font-weight:700;font-size:1.2em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4{font-weight:700;font-size:1em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content p,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content table{margin:1em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl{display:grid;grid-template-columns:2fr 1fr;border-top:1px solid var(--ck-accessibility-help-dialog-border-color);border-bottom:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{border-bottom:1px solid var(--ck-accessibility-help-dialog-border-color);padding:.4em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{grid-column-start:1}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{grid-column-start:2;text-align:right}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{display:inline-block;background:var(--ck-accessibility-help-dialog-code-background-color);padding:.4em;vertical-align:middle;line-height:1;border-radius:2px;text-align:center;font-size:.9em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{font-family:monospace}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{min-width:1.8em;box-shadow:0 1px 1px var(--ck-accessibility-help-dialog-kbd-shadow-color);margin:0 1px}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd+kbd{margin-left:2px}:root{--ck-color-editable-blur-selection: hsl(0, 0%, 85%)}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>*:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>*:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background)}:root{--ck-form-header-height: 44px}.ck.ck-form__header{padding:var(--ck-spacing-small) var(--ck-spacing-large);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-form__header>.ck-icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-form__header>.ck-icon{margin-left:var(--ck-spacing-medium)}.ck.ck-form__header .ck-form__header__label{--ck-font-size-base: 15px;font-weight:700}:root{--ck-icon-size: calc(var(--ck-line-height-base) * var(--ck-font-size-normal));--ck-icon-font-size: .8333350694em}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:var(--ck-icon-font-size);cursor:inherit}.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color *:not([fill]){fill:currentColor}:root{--ck-input-width: 18em;--ck-input-text-width: var(--ck-input-width)}.ck.ck-input{border-radius:0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}@media (prefers-reduced-motion: reduce){.ck.ck-input{transition:none}}.ck.ck-input:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-input[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-input-shake .3s ease both}@media (prefers-reduced-motion: reduce){.ck.ck-input.ck-error{animation:none}}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translate(-2px)}40%{transform:translate(2px)}60%{transform:translate(-1px)}80%{transform:translate(1px)}}.ck.ck-label{font-weight:700}:root{--ck-labeled-field-view-transition: .1s cubic-bezier(0, 0, .24, .95);--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x: var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y: calc(.6 * var(--ck-font-size-base));--ck-color-labeled-field-label-background: var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0;pointer-events:none;background:var(--ck-color-labeled-field-label-background);padding:0 calc(.5 * var(--ck-font-size-tiny));line-height:initial;font-weight:400;text-overflow:ellipsis;overflow:hidden;max-width:100%;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0;transform-origin:0 0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75)}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0;transform-origin:100% 0;transform:translate(calc(-1 * var(--ck-spacing-medium)),-6px) scale(.75)}@media (prefers-reduced-motion: reduce){.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transition:none}}.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));background:transparent;padding:0}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(-1 * var(--ck-labeled-field-label-default-position-x)),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}.ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}.ck.ck-list{border-radius:0;list-style-type:none;background:var(--ck-color-list-background);padding:var(--ck-spacing-small) 0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list__item{cursor:default;min-width:15em}.ck.ck-list__item>.ck-button:not(.ck-list-item-button){padding:var(--ck-spacing-tiny) calc(2 * var(--ck-spacing-standard));min-height:unset;width:100%;border-radius:0}[dir=ltr] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:left}[dir=rtl] .ck.ck-list__item>.ck-button:not(.ck-list-item-button){text-align:right}.ck.ck-list__item>.ck-button:not(.ck-list-item-button) .ck-button__label{line-height:calc(var(--ck-line-height-base) * var(--ck-font-size-base))}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button){background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):active{box-shadow:none}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item>.ck-button.ck-on:not(.ck-list-item-button):focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item>.ck-button:not(.ck-list-item-button):hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item>.ck-button.ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck-list .ck-list__group{padding-top:var(--ck-spacing-medium)}.ck-list .ck-list__group:first-child{padding-top:0}*:not(.ck-hidden)~.ck-list .ck-list__group{border-top:1px solid var(--ck-color-base-border)}.ck-list .ck-list__group>.ck-label{font-size:11px;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large) 0}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border);margin:var(--ck-spacing-small) 0}.ck.ck-menu-bar{display:flex;flex-wrap:wrap;justify-content:flex-start;background:var(--ck-color-base-background);padding:var(--ck-spacing-small);gap:var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border);width:100%}.ck.ck-menu-bar__menu{font-size:inherit}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level{max-width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button{width:100%}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-button__label{flex-grow:1;overflow:hidden;text-overflow:ellipsis}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button.ck-disabled>.ck-button__label{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-menu-bar__menu>.ck-menu-bar__menu__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button{padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-height:unset}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-button__label{width:unset;line-height:unset;overflow:visible}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-menu-bar__menu.ck-menu-bar__menu_top-level>.ck-menu-bar__menu__button .ck-icon{display:none}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button{border-radius:0}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{transform:rotate(-90deg);margin-left:var(--ck-spacing-standard);margin-right:calc(-1 * var(--ck-spacing-small))}[dir=rtl] .ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{transform:rotate(90deg);left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small);margin-left:calc(-1 * var(--ck-spacing-small))}.ck.ck-menu-bar__menu:not(.ck-menu-bar__menu_top-level) .ck-menu-bar__menu__button.ck-disabled>.ck-menu-bar__menu__button__arrow{opacity:var(--ck-disabled-opacity)}:root{--ck-menu-bar-menu-item-min-width: 18em}.ck.ck-menu-bar__menu .ck.ck-menu-bar__menu__item{min-width:var(--ck-menu-bar-menu-item-min-width)}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button{border-radius:0}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container,.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container .ck-spinner{--ck-toolbar-spinner-size: 20px}.ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{font-size:var(--ck-icon-font-size)}[dir=ltr] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-menu-bar__menu .ck-button.ck-menu-bar__menu__item__button>.ck-spinner-container{margin-left:var(--ck-spacing-medium)}:root{--ck-menu-bar-menu-panel-max-width: 75vw}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{border-radius:0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;height:fit-content;max-width:var(--ck-menu-bar-menu-panel-max-width)}.ck-rounded-corners .ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{border-top-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{border-top-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne{border-bottom-left-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw{border-bottom-right-radius:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel:focus{outline:none}.ck.ck-menu-bar .ck-list-item-button:focus,.ck.ck-menu-bar .ck-list-item-button:active{border-color:transparent;box-shadow:none}.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:focus,.ck.ck-menu-bar.ck-menu-bar_focus-border-enabled .ck-list-item-button:active{position:relative;z-index:2;outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}:root{--ck-balloon-border-width: 1px;--ck-balloon-arrow-offset: 2px;--ck-balloon-arrow-height: 10px;--ck-balloon-arrow-half-width: 8px;--ck-balloon-arrow-drop-shadow: 0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0;min-height:15px;background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border)}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:before,.ck.ck-balloon-panel[class*=arrow_n]:after{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:before,.ck.ck-balloon-panel[class*=arrow_s]:after{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:before,.ck.ck-balloon-panel[class*=arrow_e]:after{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:before,.ck.ck-balloon-panel[class*=arrow_w]:after{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(-1 * var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after{left:50%;margin-left:calc(-1 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after{left:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after{right:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after{left:50%;margin-left:calc(-1 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after{left:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after{right:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after{right:25%;margin-right:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after{left:25%;margin-left:calc(2 * var(--ck-balloon-arrow-half-width));bottom:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after{right:25%;margin-right:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after{left:25%;margin-left:calc(2 * var(--ck-balloon-arrow-half-width));top:calc(-1 * var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after{right:calc(-1 * var(--ck-balloon-arrow-height));margin-top:calc(-1 * var(--ck-balloon-arrow-half-width));top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after{left:calc(-1 * var(--ck-balloon-arrow-height));margin-top:calc(-1 * var(--ck-balloon-arrow-half-width));top:50%}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}:root{--ck-balloon-fake-panel-offset-horizontal: 6px;--ck-balloon-fake-panel-offset-vertical: 6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:nth-child(1){margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal) * 2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical) * 2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal) * 3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical) * 3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical: -6px}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child){margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width: 600px){.ck.ck-responsive-form{padding:0;width:calc(.8 * var(--ck-input-width))}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text,.ck.ck-responsive-form .ck-labeled-field-view .ck-input-number{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:nth-last-child(1),.ck.ck-responsive-form>.ck-button:nth-last-child(2){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-large);border-radius:0}.ck.ck-responsive-form>.ck-button:nth-last-child(1):not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(1),[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(1),[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(1):last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}:root{--ck-search-field-view-horizontal-spacing: calc(var(--ck-icon-size) + var(--ck-spacing-medium))}.ck.ck-search>.ck-labeled-field-view .ck-input{width:100%}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon{--ck-labeled-field-label-default-position-x: var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon>.ck-labeled-field-view__input-wrapper>.ck-icon{opacity:.5;pointer-events:none}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{padding-left:var(--ck-search-field-view-horizontal-spacing)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input:not(.ck-input-text_empty){padding-left:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset{--ck-labeled-field-empty-unfocused-max-width: 100% - 2 * var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset.ck-labeled-field-view_empty{--ck-labeled-field-empty-unfocused-max-width: 100% - var(--ck-search-field-view-horizontal-spacing) - var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{min-width:auto;min-height:auto;background:none;opacity:.5;padding:0}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{left:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset:hover{opacity:1}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input:not(.ck-input-text_empty){padding-right:var(--ck-search-field-view-horizontal-spacing)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{padding-right:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-search__results{min-width:100%}.ck.ck-search>.ck-search__results>.ck-search__info{width:100%;padding:var(--ck-spacing-medium) var(--ck-spacing-large)}.ck.ck-search>.ck-search__results>.ck-search__info *{white-space:normal}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{font-weight:700}.ck.ck-search>.ck-search__results>.ck-search__info>span:last-child{margin-top:var(--ck-spacing-medium)}.ck.ck-spinner-container{width:var(--ck-toolbar-spinner-size);height:var(--ck-toolbar-spinner-size);animation:1.5s infinite ck-spinner-rotate linear}@media (prefers-reduced-motion: reduce){.ck.ck-spinner-container{animation-duration:3s}}.ck.ck-spinner{width:var(--ck-toolbar-spinner-size);height:var(--ck-toolbar-spinner-size);border-radius:50%;border:2px solid var(--ck-color-text);border-top-color:transparent}@keyframes ck-spinner-rotate{to{transform:rotate(360deg)}}.ck-textarea{overflow-x:hidden}:root{--ck-color-block-toolbar-button: var(--ck-color-text);--ck-block-toolbar-button-size: var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}.ck.ck-toolbar{border-radius:0;background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar .ck.ck-toolbar__separator{height:var(--ck-icon-size);width:1px;min-width:1px;background:var(--ck-color-toolbar-border);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>*:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck.ck-toolbar:focus{outline:none}.ck-toolbar-container .ck.ck-toolbar{border:0}[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck,.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck{margin-right:0}[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child{margin-left:0}[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator,.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child{margin-right:0}[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator,.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}.ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width: 0px;--ck-balloon-arrow-offset: 0px;--ck-balloon-arrow-half-width: 4px;--ck-balloon-arrow-height: 4px;--ck-tooltip-text-padding: 4px;--ck-color-panel-background: var(--ck-color-tooltip-background);padding:0 var(--ck-spacing-medium);box-shadow:none}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text)}.ck.ck-balloon-panel.ck-tooltip.ck-tooltip_multi-line .ck-tooltip__text{white-space:break-spaces;display:inline-block;padding:var(--ck-tooltip-text-padding) 0;max-width:200px}.ck.ck-balloon-panel.ck-tooltip:before{display:none}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content{border-radius:0;border:1px solid var(--ck-color-base-border);border-bottom-width:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content.ck-sticky-panel__content_sticky{border-bottom-width:1px}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-menu-bar{border:0;border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content .ck-toolbar{border:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}.ck .ck-fake-bookmark-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-bookmark-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:solid 1px hsla(0,0%,100%,.5)}:root{--ck-clipboard-drop-target-dot-width: 12px;--ck-clipboard-drop-target-dot-height: 8px;--ck-clipboard-drop-target-color: var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{bottom:calc(-.5 * var(--ck-clipboard-drop-target-dot-height));top:calc(-.5 * var(--ck-clipboard-drop-target-dot-height));border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-left:-1px}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{content:"";width:0;height:0;display:block;position:absolute;left:50%;top:calc(-.5 * var(--ck-clipboard-drop-target-dot-height));transform:translate(-50%);border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width));border-style:solid}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}.ck.ck-clipboard-drop-target-line{height:0;border:1px solid var(--ck-clipboard-drop-target-color);background:var(--ck-clipboard-drop-target-color);margin-top:-1px}.ck.ck-clipboard-drop-target-line:before{content:"";position:absolute;top:calc(-.5 * var(--ck-clipboard-drop-target-dot-width));width:0;height:0;border-style:solid}[dir=ltr] .ck.ck-clipboard-drop-target-line:before{left:-1px;border-width:calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0 calc(.5 * var(--ck-clipboard-drop-target-dot-width)) var(--ck-clipboard-drop-target-dot-height);border-color:transparent transparent transparent var(--ck-clipboard-drop-target-color)}[dir=rtl] .ck.ck-clipboard-drop-target-line:before{right:-1px;border-width:calc(.5 * var(--ck-clipboard-drop-target-dot-width)) var(--ck-clipboard-drop-target-dot-height) calc(.5 * var(--ck-clipboard-drop-target-dot-width)) 0;border-color:transparent var(--ck-clipboard-drop-target-color) transparent transparent}:root{--ck-color-code-block-label-background: hsl(0, 0%, 46%)}.ck.ck-editor__editable pre[data-language]:after{top:-1px;right:10px;background:var(--ck-color-code-block-label-background);font-size:10px;font-family:var(--ck-font-face);line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);color:#fff;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}@media (forced-colors: active){.ck.ck-placeholder,.ck .ck-placeholder{forced-color-adjust:preserve-parent-color}}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text}@media (forced-colors: none){.ck.ck-placeholder:before,.ck .ck-placeholder:before{color:var(--ck-color-engine-placeholder-text)}}@media (forced-colors: active){.ck.ck-placeholder:before,.ck .ck-placeholder:before{font-style:italic;margin-left:1px}}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{flex:1 1 auto;flex-direction:row;flex-wrap:wrap;align-items:center;align-content:stretch;padding:var(--ck-spacing-large);margin:0}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*,[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>*+*,[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-labeled-field-view .ck-input,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions .ck-labeled-field-view .ck-input{width:100%;min-width:50px}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs{align-items:flex-start}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{top:50%;transform:translateY(-50%);color:var(--ck-color-base-border)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{flex:0 0 100%;padding-top:var(--ck-spacing-standard)}[dir=ltr] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs>.ck-labeled-field-replace{margin-right:0}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(-1 * var(--ck-spacing-large))}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form .ck-switchbutton{width:100%;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;align-items:center}@media screen and (max-width: 600px){.ck.ck-find-and-replace-form{width:300px;max-width:100%}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input{flex-wrap:wrap}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input .ck-labeled-field-view{flex:1 0 auto;width:100%;margin-bottom:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__input>.ck-button:first-of-type .ck-button__label{width:100%;text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view){flex-wrap:wrap;flex:1 1 auto}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button{text-align:center}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form.ck-find-and-replace-form__actions>:not(.ck-labeled-field-view)>.ck-button .ck-button__label{width:100%;text-align:center}}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}:root{--ck-html-embed-content-width: calc(100% - 1.5 * var(--ck-icon-size));--ck-html-embed-source-height: 10em;--ck-html-embed-unfocused-outline-width: 1px;--ck-html-embed-content-min-height: calc(var(--ck-icon-size) + var(--ck-spacing-standard));--ck-html-embed-source-disabled-background: var(--ck-color-base-foreground);--ck-html-embed-source-disabled-color: hsl(0deg 0% 45%)}.ck-widget.raw-html-embed{font-size:var(--ck-font-size-base);background-color:var(--ck-color-base-foreground)}.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.raw-html-embed[dir=ltr]{text-align:left}.ck-widget.raw-html-embed[dir=rtl]{text-align:right}.ck-widget.raw-html-embed:before{content:attr(data-html-embed-label);top:calc(-1 * var(--ck-html-embed-unfocused-outline-width));left:var(--ck-spacing-standard);background:#999;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);font-size:var(--ck-font-size-tiny);font-family:var(--ck-font-face)}.ck-widget.raw-html-embed[dir=rtl]:before{left:auto;right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed[dir=ltr] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected:before{top:0;padding:var(--ck-spacing-tiny) var(--ck-spacing-small)}.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected:before{top:0;padding:var(--ck-spacing-tiny) var(--ck-spacing-small);background:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover:before{top:0;padding:var(--ck-spacing-tiny) var(--ck-spacing-small)}.ck-widget.raw-html-embed .raw-html-embed__content-wrapper{padding:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{top:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button{color:var(--ck-color-button-save)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button{color:var(--ck-color-button-cancel)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child){margin-top:var(--ck-spacing-small)}.ck-widget.raw-html-embed[dir=rtl] .raw-html-embed__buttons-wrapper{left:var(--ck-spacing-standard);right:auto}.ck-widget.raw-html-embed .raw-html-embed__source{box-sizing:border-box;height:var(--ck-html-embed-source-height);width:var(--ck-html-embed-content-width);resize:none;min-width:0;padding:var(--ck-spacing-standard);font-family:monospace;-moz-tab-size:4;tab-size:4;white-space:pre-wrap;font-size:var(--ck-font-size-base);text-align:left;direction:ltr}.ck-widget.raw-html-embed .raw-html-embed__source[disabled]{background:var(--ck-html-embed-source-disabled-background);color:var(--ck-html-embed-source-disabled-color);-webkit-text-fill-color:var(--ck-html-embed-source-disabled-color);opacity:1}.ck-widget.raw-html-embed .raw-html-embed__preview{min-height:var(--ck-html-embed-content-min-height);width:var(--ck-html-embed-content-width)}.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview{pointer-events:none}.ck-widget.raw-html-embed .raw-html-embed__preview-content{box-sizing:border-box;background-color:var(--ck-color-base-foreground)}.ck-widget.raw-html-embed .raw-html-embed__preview-content>*{margin-left:auto;margin-right:auto}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{color:var(--ck-html-embed-source-disabled-color)}:root{--ck-image-insert-insert-by-url-width: 250px}.ck.ck-image-insert-url{--ck-input-width: 100%}.ck.ck-image-insert-url .ck-image-insert-url__action-row{grid-column-gap:var(--ck-spacing-large);margin-top:var(--ck-spacing-large)}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-save,.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button-cancel{justify-content:center;min-width:auto}.ck.ck-image-insert-url .ck-image-insert-url__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}.ck.ck-image-insert-form>.ck.ck-button{display:block;width:100%}[dir=ltr] .ck.ck-image-insert-form>.ck.ck-button{text-align:left}[dir=rtl] .ck.ck-image-insert-form>.ck.ck-button{text-align:right}.ck.ck-image-insert-form>.ck.ck-collapsible{min-width:var(--ck-image-insert-insert-by-url-width)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:first-child){border-top:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-collapsible:not(:last-child){border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-image-insert-form>.ck.ck-image-insert-url{min-width:var(--ck-image-insert-insert-by-url-width);padding:var(--ck-spacing-large)}.ck.ck-image-insert-form:focus{outline:none}:root{--ck-color-image-upload-icon: hsl(0, 0%, 100%);--ck-color-image-upload-icon-background: hsl(120, 100%, 27%);--ck-image-upload-icon-size: 20;--ck-image-upload-icon-width: 2px;--ck-image-upload-icon-is-visible: clamp(0px, 100% - 50px, 1px)}.ck-image-upload-complete-icon{opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:calc(1px * var(--ck-image-upload-icon-size));animation-delay:0ms,3s;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@media (prefers-reduced-motion: reduce){.ck-image-upload-complete-icon{animation-duration:0ms}.ck-image-upload-complete-icon:after{animation:none;opacity:1;width:.3em;height:.45em}}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}:root{--ck-color-upload-placeholder-loader: hsl(0, 0%, 70%);--ck-upload-placeholder-loader-size: 32px;--ck-upload-placeholder-image-aspect-ratio: 2.8}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-image-upload-placeholder.image-inline{width:calc(2 * var(--ck-upload-placeholder-loader-size) * var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(360deg)}}.ck.ck-editor__editable .image.ck-appear,.ck.ck-editor__editable .image-inline.ck-appear{animation:fadeIn .7s}@media (prefers-reduced-motion: reduce){.ck.ck-editor__editable .image.ck-appear,.ck.ck-editor__editable .image-inline.ck-appear{opacity:1;animation:none}}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:solid 1px hsla(0,0%,100%,.5)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child){margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width: 600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-width)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical>.ck-button{padding:var(--ck-spacing-standard);margin:0;width:50%;border-radius:0}.ck.ck-link-form_layout-vertical>.ck-button:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:0 var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}:root{--ck-link-image-indicator-icon-size: 20;--ck-link-image-indicator-icon-is-visible: clamp(0px, 100% - 50px, 1px)}.ck.ck-editor__editable figure.image>a:after,.ck.ck-editor__editable a span.image-inline:after{content:"";top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);background-color:#0006;background-image:url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+);background-size:14px;background-repeat:no-repeat;background-position:center;border-radius:100%;overflow:hidden;width:calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));height:calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size))}.ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;padding-left:0;padding-right:0;margin-bottom:calc(-1 * var(--ck-spacing-tiny))}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{box-shadow:none;border-color:transparent;background:none}:root{--ck-list-style-button-size: 44px}.ck.ck-list-styles-list{grid-template-columns:repeat(3,auto);row-gap:var(--ck-spacing-medium);column-gap:var(--ck-spacing-medium);padding:var(--ck-spacing-large)}.ck.ck-list-styles-list .ck-button{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size);padding:0;margin:0;box-sizing:content-box}.ck.ck-list-styles-list .ck-button .ck-icon{width:var(--ck-list-style-button-size);height:var(--ck-list-style-button-size)}:root{--ck-media-embed-placeholder-icon-size: 3em;--ck-color-media-embed-placeholder-url-text: hsl(0, 0%, 46%);--ck-color-media-embed-placeholder-url-text-hover: var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3 * var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:center;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMCAwIDMuNzggMS42MWg0OS42MjFjMS42OTQgMCAzLjE5LS43OTggNC4xNDYtMi4wMzd6IiBmaWxsPSIjNWM4OGM1Ii8+PHBhdGggZD0iTTIyNi43NDIgMjIyLjk4OGMtOS4yNjYgMC0xNi43NzcgNy4xNy0xNi43NzcgMTYuMDE0LjAwNyAyLjc2Mi42NjMgNS40NzQgMi4wOTMgNy44NzUuNDMuNzAzLjgzIDEuNDA4IDEuMTkgMi4xMDcuMzMzLjUwMi42NSAxLjAwNS45NSAxLjUwOC4zNDMuNDc3LjY3My45NTcuOTg4IDEuNDQgMS4zMSAxLjc2OSAyLjUgMy41MDIgMy42MzcgNS4xNjguNzkzIDEuMjc1IDEuNjgzIDIuNjQgMi40NjYgMy45OSAyLjM2MyA0LjA5NCA0LjAwNyA4LjA5MiA0LjYgMTMuOTE0di4wMTJjLjE4Mi40MTIuNTE2LjY2Ni44NzkuNjY3LjQwMy0uMDAxLjc2OC0uMzE0LjkzLS43OTkuNjAzLTUuNzU2IDIuMjM4LTkuNzI5IDQuNTg1LTEzLjc5NC43ODItMS4zNSAxLjY3My0yLjcxNSAyLjQ2NS0zLjk5IDEuMTM3LTEuNjY2IDIuMzI4LTMuNCAzLjYzOC01LjE2OS4zMTUtLjQ4Mi42NDUtLjk2Mi45ODgtMS40MzkuMy0uNTAzLjYxNy0xLjAwNi45NS0xLjUwOC4zNTktLjcuNzYtMS40MDQgMS4xOS0yLjEwNyAxLjQyNi0yLjQwMiAyLTUuMTE0IDIuMDA0LTcuODc1IDAtOC44NDQtNy41MTEtMTYuMDE0LTE2Ljc3Ni0xNi4wMTR6IiBmaWxsPSIjZGQ0YjNlIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxlbGxpcHNlIHJ5PSI1LjU2NCIgcng9IjUuODI4IiBjeT0iMjM5LjAwMiIgY3g9IjIyNi43NDIiIGZpbGw9IiM4MDJkMjciIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTE5MC4zMDEgMjM3LjI4M2MtNC42NyAwLTguNDU3IDMuODUzLTguNDU3IDguNjA2czMuNzg2IDguNjA3IDguNDU3IDguNjA3YzMuMDQzIDAgNC44MDYtLjk1OCA2LjMzNy0yLjUxNiAxLjUzLTEuNTU3IDIuMDg3LTMuOTEzIDIuMDg3LTYuMjkgMC0uMzYyLS4wMjMtLjcyMi0uMDY0LTEuMDc5aC04LjI1N3YzLjA0M2g0Ljg1Yy0uMTk3Ljc1OS0uNTMxIDEuNDUtMS4wNTggMS45ODYtLjk0Mi45NTgtMi4wMjggMS41NDgtMy45MDEgMS41NDgtMi44NzYgMC01LjIwOC0yLjM3Mi01LjIwOC01LjI5OSAwLTIuOTI2IDIuMzMyLTUuMjk5IDUuMjA4LTUuMjk5IDEuMzk5IDAgMi42MTguNDA3IDMuNTg0IDEuMjkzbDIuMzgxLTIuMzhjMC0uMDAyLS4wMDMtLjAwNC0uMDA0LS4wMDUtMS41ODgtMS41MjQtMy42Mi0yLjIxNS01Ljk1NS0yLjIxNXptNC40MyA1LjY2bC4wMDMuMDA2di0uMDAzeiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjE1LjE4NCAyNTEuOTI5bC03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVjLjI4Ny0uNjQ5LjQ0OS0xLjM2Ni40NDktMi4xMjN2LTMxLjE2NWMtLjQ2OS42NzUtLjkzNCAxLjM0OS0xLjM4MiAyLjAwNS0uNzkyIDEuMjc1LTEuNjgyIDIuNjQtMi40NjUgMy45OS0yLjM0NyA0LjA2NS0zLjk4MiA4LjAzOC00LjU4NSAxMy43OTQtLjE2Mi40ODUtLjUyNy43OTgtLjkzLjc5OS0uMzYzLS4wMDEtLjY5Ny0uMjU1LS44NzktLjY2N3YtLjAxMmMtLjU5My01LjgyMi0yLjIzNy05LjgyLTQuNi0xMy45MTQtLjc4My0xLjM1LTEuNjczLTIuNzE1LTIuNDY2LTMuOTktMS4xMzctMS42NjYtMi4zMjctMy40LTMuNjM3LTUuMTY5bC0uMDAyLS4wMDN6IiBmaWxsPSIjYzNjM2MzIi8+PHBhdGggZD0iTTIxMi45ODMgMjQ4LjQ5NWwtMzYuOTUyIDM2Ljk1M3YuODEyYTUuMjI3IDUuMjI3IDAgMCAwIDUuMjM4IDUuMjM4aDEuMDE1bDM1LjY2Ni0zNS42NjZhMTM2LjI3NSAxMzYuMjc1IDAgMCAwLTIuNzY0LTMuOSAzNy41NzUgMzcuNTc1IDAgMCAwLS45ODktMS40NGMtLjI5OS0uNTAzLS42MTYtMS4wMDYtLjk1LTEuNTA4LS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjExLjk5OCAyNjEuMDgzbC02LjE1MiA2LjE1MSAyNC4yNjQgMjQuMjY0aC43ODFhNS4yMjcgNS4yMjcgMCAwIDAgNS4yMzktNS4yMzh2LTEuMDQ1eiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48L2c+PC9zdmc+)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxMDI0cHgiIGhlaWdodD0iMTAyNHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICAgICAgPHRpdGxlPkZpbGwgMTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9ImZMb2dvX1doaXRlIiBmaWxsPSIjRkZGRkZFIj4gICAgICAgICAgICA8cGF0aCBkPSJNOTY3LjQ4NCwwIEw1Ni41MTcsMCBDMjUuMzA0LDAgMCwyNS4zMDQgMCw1Ni41MTcgTDAsOTY3LjQ4MyBDMCw5OTguNjk0IDI1LjI5NywxMDI0IDU2LjUyMiwxMDI0IEw1NDcsMTAyNCBMNTQ3LDYyOCBMNDE0LDYyOCBMNDE0LDQ3MyBMNTQ3LDQ3MyBMNTQ3LDM1OS4wMjkgQzU0NywyMjYuNzY3IDYyNy43NzMsMTU0Ljc0NyA3NDUuNzU2LDE1NC43NDcgQzgwMi4yNjksMTU0Ljc0NyA4NTAuODQyLDE1OC45NTUgODY1LDE2MC44MzYgTDg2NSwyOTkgTDc4My4zODQsMjk5LjAzNyBDNzE5LjM5MSwyOTkuMDM3IDcwNywzMjkuNTI5IDcwNywzNzQuMjczIEw3MDcsNDczIEw4NjAuNDg3LDQ3MyBMODQwLjUwMSw2MjggTDcwNyw2MjggTDcwNywxMDI0IEw5NjcuNDg0LDEwMjQgQzk5OC42OTcsMTAyNCAxMDI0LDk5OC42OTcgMTAyNCw5NjcuNDg0IEwxMDI0LDU2LjUxNSBDMTAyNCwyNS4zMDMgOTk4LjY5NywwIDk2Ny40ODQsMCIgaWQ9IkZpbGwtMSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI1MDRweCIgaGVpZ2h0PSI1MDRweCIgdmlld0JveD0iMCAwIDUwNCA1MDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Z2x5cGgtbG9nb19NYXkyMDE2PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgtMSIgcG9pbnRzPSIwIDAuMTU5IDUwMy44NDEgMC4xNTkgNTAzLjg0MSA1MDMuOTQgMCA1MDMuOTQiPjwvcG9seWdvbj4gICAgPC9kZWZzPiAgICA8ZyBpZD0iZ2x5cGgtbG9nb19NYXkyMDE2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJHcm91cC0zIj4gICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgIDxnIGlkPSJDbGlwLTIiPjwvZz4gICAgICAgICAgICA8cGF0aCBkPSJNMjUxLjkyMSwwLjE1OSBDMTgzLjUwMywwLjE1OSAxNzQuOTI0LDAuNDQ5IDE0OC4wNTQsMS42NzUgQzEyMS4yNCwyLjg5OCAxMDIuOTI3LDcuMTU3IDg2LjkwMywxMy4zODUgQzcwLjMzNywxOS44MjIgNTYuMjg4LDI4LjQzNiA0Mi4yODIsNDIuNDQxIEMyOC4yNzcsNTYuNDQ3IDE5LjY2Myw3MC40OTYgMTMuMjI2LDg3LjA2MiBDNi45OTgsMTAzLjA4NiAyLjczOSwxMjEuMzk5IDEuNTE2LDE0OC4yMTMgQzAuMjksMTc1LjA4MyAwLDE4My42NjIgMCwyNTIuMDggQzAsMzIwLjQ5NyAwLjI5LDMyOS4wNzYgMS41MTYsMzU1Ljk0NiBDMi43MzksMzgyLjc2IDYuOTk4LDQwMS4wNzMgMTMuMjI2LDQxNy4wOTcgQzE5LjY2Myw0MzMuNjYzIDI4LjI3Nyw0NDcuNzEyIDQyLjI4Miw0NjEuNzE4IEM1Ni4yODgsNDc1LjcyMyA3MC4zMzcsNDg0LjMzNyA4Ni45MDMsNDkwLjc3NSBDMTAyLjkyNyw0OTcuMDAyIDEyMS4yNCw1MDEuMjYxIDE0OC4wNTQsNTAyLjQ4NCBDMTc0LjkyNCw1MDMuNzEgMTgzLjUwMyw1MDQgMjUxLjkyMSw1MDQgQzMyMC4zMzgsNTA0IDMyOC45MTcsNTAzLjcxIDM1NS43ODcsNTAyLjQ4NCBDMzgyLjYwMSw1MDEuMjYxIDQwMC45MTQsNDk3LjAwMiA0MTYuOTM4LDQ5MC43NzUgQzQzMy41MDQsNDg0LjMzNyA0NDcuNTUzLDQ3NS43MjMgNDYxLjU1OSw0NjEuNzE4IEM0NzUuNTY0LDQ0Ny43MTIgNDg0LjE3OCw0MzMuNjYzIDQ5MC42MTYsNDE3LjA5NyBDNDk2Ljg0Myw0MDEuMDczIDUwMS4xMDIsMzgyLjc2IDUwMi4zMjUsMzU1Ljk0NiBDNTAzLjU1MSwzMjkuMDc2IDUwMy44NDEsMzIwLjQ5NyA1MDMuODQxLDI1Mi4wOCBDNTAzLjg0MSwxODMuNjYyIDUwMy41NTEsMTc1LjA4MyA1MDIuMzI1LDE0OC4yMTMgQzUwMS4xMDIsMTIxLjM5OSA0OTYuODQzLDEwMy4wODYgNDkwLjYxNiw4Ny4wNjIgQzQ4NC4xNzgsNzAuNDk2IDQ3NS41NjQsNTYuNDQ3IDQ2MS41NTksNDIuNDQxIEM0NDcuNTUzLDI4LjQzNiA0MzMuNTA0LDE5LjgyMiA0MTYuOTM4LDEzLjM4NSBDNDAwLjkxNCw3LjE1NyAzODIuNjAxLDIuODk4IDM1NS43ODcsMS42NzUgQzMyOC45MTcsMC40NDkgMzIwLjMzOCwwLjE1OSAyNTEuOTIxLDAuMTU5IFogTTI1MS45MjEsNDUuNTUgQzMxOS4xODYsNDUuNTUgMzI3LjE1NCw0NS44MDcgMzUzLjcxOCw0Ny4wMTkgQzM3OC4yOCw0OC4xMzkgMzkxLjYxOSw1Mi4yNDMgNDAwLjQ5Niw1NS42OTMgQzQxMi4yNTUsNjAuMjYzIDQyMC42NDcsNjUuNzIyIDQyOS40NjIsNzQuNTM4IEM0MzguMjc4LDgzLjM1MyA0NDMuNzM3LDkxLjc0NSA0NDguMzA3LDEwMy41MDQgQzQ1MS43NTcsMTEyLjM4MSA0NTUuODYxLDEyNS43MiA0NTYuOTgxLDE1MC4yODIgQzQ1OC4xOTMsMTc2Ljg0NiA0NTguNDUsMTg0LjgxNCA0NTguNDUsMjUyLjA4IEM0NTguNDUsMzE5LjM0NSA0NTguMTkzLDMyNy4zMTMgNDU2Ljk4MSwzNTMuODc3IEM0NTUuODYxLDM3OC40MzkgNDUxLjc1NywzOTEuNzc4IDQ0OC4zMDcsNDAwLjY1NSBDNDQzLjczNyw0MTIuNDE0IDQzOC4yNzgsNDIwLjgwNiA0MjkuNDYyLDQyOS42MjEgQzQyMC42NDcsNDM4LjQzNyA0MTIuMjU1LDQ0My44OTYgNDAwLjQ5Niw0NDguNDY2IEMzOTEuNjE5LDQ1MS45MTYgMzc4LjI4LDQ1Ni4wMiAzNTMuNzE4LDQ1Ny4xNCBDMzI3LjE1OCw0NTguMzUyIDMxOS4xOTEsNDU4LjYwOSAyNTEuOTIxLDQ1OC42MDkgQzE4NC42NSw0NTguNjA5IDE3Ni42ODQsNDU4LjM1MiAxNTAuMTIzLDQ1Ny4xNCBDMTI1LjU2MSw0NTYuMDIgMTEyLjIyMiw0NTEuOTE2IDEwMy4zNDUsNDQ4LjQ2NiBDOTEuNTg2LDQ0My44OTYgODMuMTk0LDQzOC40MzcgNzQuMzc5LDQyOS42MjEgQzY1LjU2NCw0MjAuODA2IDYwLjEwNCw0MTIuNDE0IDU1LjUzNCw0MDAuNjU1IEM1Mi4wODQsMzkxLjc3OCA0Ny45OCwzNzguNDM5IDQ2Ljg2LDM1My44NzcgQzQ1LjY0OCwzMjcuMzEzIDQ1LjM5MSwzMTkuMzQ1IDQ1LjM5MSwyNTIuMDggQzQ1LjM5MSwxODQuODE0IDQ1LjY0OCwxNzYuODQ2IDQ2Ljg2LDE1MC4yODIgQzQ3Ljk4LDEyNS43MiA1Mi4wODQsMTEyLjM4MSA1NS41MzQsMTAzLjUwNCBDNjAuMTA0LDkxLjc0NSA2NS41NjMsODMuMzUzIDc0LjM3OSw3NC41MzggQzgzLjE5NCw2NS43MjIgOTEuNTg2LDYwLjI2MyAxMDMuMzQ1LDU1LjY5MyBDMTEyLjIyMiw1Mi4yNDMgMTI1LjU2MSw0OC4xMzkgMTUwLjEyMyw0Ny4wMTkgQzE3Ni42ODcsNDUuODA3IDE4NC42NTUsNDUuNTUgMjUxLjkyMSw0NS41NSBaIiBpZD0iRmlsbC0xIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgICAgIDxwYXRoIGQ9Ik0yNTEuOTIxLDMzNi4wNTMgQzIwNS41NDMsMzM2LjA1MyAxNjcuOTQ3LDI5OC40NTcgMTY3Ljk0NywyNTIuMDggQzE2Ny45NDcsMjA1LjcwMiAyMDUuNTQzLDE2OC4xMDYgMjUxLjkyMSwxNjguMTA2IEMyOTguMjk4LDE2OC4xMDYgMzM1Ljg5NCwyMDUuNzAyIDMzNS44OTQsMjUyLjA4IEMzMzUuODk0LDI5OC40NTcgMjk4LjI5OCwzMzYuMDUzIDI1MS45MjEsMzM2LjA1MyBaIE0yNTEuOTIxLDEyMi43MTUgQzE4MC40NzQsMTIyLjcxNSAxMjIuNTU2LDE4MC42MzMgMTIyLjU1NiwyNTIuMDggQzEyMi41NTYsMzIzLjUyNiAxODAuNDc0LDM4MS40NDQgMjUxLjkyMSwzODEuNDQ0IEMzMjMuMzY3LDM4MS40NDQgMzgxLjI4NSwzMjMuNTI2IDM4MS4yODUsMjUyLjA4IEMzODEuMjg1LDE4MC42MzMgMzIzLjM2NywxMjIuNzE1IDI1MS45MjEsMTIyLjcxNSBaIiBpZD0iRmlsbC00IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgICAgICA8cGF0aCBkPSJNNDE2LjYyNywxMTcuNjA0IEM0MTYuNjI3LDEzNC4zIDQwMy4wOTIsMTQ3LjgzNCAzODYuMzk2LDE0Ny44MzQgQzM2OS43MDEsMTQ3LjgzNCAzNTYuMTY2LDEzNC4zIDM1Ni4xNjYsMTE3LjYwNCBDMzU2LjE2NiwxMDAuOTA4IDM2OS43MDEsODcuMzczIDM4Ni4zOTYsODcuMzczIEM0MDMuMDkyLDg3LjM3MyA0MTYuNjI3LDEwMC45MDggNDE2LjYyNywxMTcuNjA0IiBpZD0iRmlsbC01IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgIDwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(to right,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IldoaXRlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQwMCA0MDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMjAwYzAsMTEwLjUtODkuNSwyMDAtMjAwLDIwMFMwLDMxMC41LDAsMjAwUzg5LjUsMCwyMDAsMFM0MDAsODkuNSw0MDAsMjAweiBNMTYzLjQsMzA1LjVjODguNywwLDEzNy4yLTczLjUsMTM3LjItMTM3LjJjMC0yLjEsMC00LjItMC4xLTYuMmM5LjQtNi44LDE3LjYtMTUuMywyNC4xLTI1Yy04LjYsMy44LTE3LjksNi40LTI3LjcsNy42YzEwLTYsMTcuNi0xNS40LDIxLjItMjYuN2MtOS4zLDUuNS0xOS42LDkuNS0zMC42LDExLjdjLTguOC05LjQtMjEuMy0xNS4yLTM1LjItMTUuMmMtMjYuNiwwLTQ4LjIsMjEuNi00OC4yLDQ4LjJjMCwzLjgsMC40LDcuNSwxLjMsMTFjLTQwLjEtMi03NS42LTIxLjItOTkuNC01MC40Yy00LjEsNy4xLTYuNSwxNS40LTYuNSwyNC4yYzAsMTYuNyw4LjUsMzEuNSwyMS41LDQwLjFjLTcuOS0wLjItMTUuMy0yLjQtMjEuOC02YzAsMC4yLDAsMC40LDAsMC42YzAsMjMuNCwxNi42LDQyLjgsMzguNyw0Ny4zYy00LDEuMS04LjMsMS43LTEyLjcsMS43Yy0zLjEsMC02LjEtMC4zLTkuMS0wLjljNi4xLDE5LjIsMjMuOSwzMy4xLDQ1LDMzLjVjLTE2LjUsMTIuOS0zNy4zLDIwLjYtNTkuOSwyMC42Yy0zLjksMC03LjctMC4yLTExLjUtMC43QzExMC44LDI5Ny41LDEzNi4yLDMwNS41LDE2My40LDMwNS41Ii8+PC9zdmc+)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}:root{--ck-color-mention-background: hsla(341, 100%, 30%, .1);--ck-color-mention-text: hsl(341, 100%, 30%)}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}:root{--ck-color-restricted-editing-exception-background: hsla(31, 100%, 65%, .2);--ck-color-restricted-editing-exception-hover-background: hsla(31, 100%, 65%, .35);--ck-color-restricted-editing-exception-brackets: hsla(31, 100%, 40%, .4);--ck-color-restricted-editing-selected-exception-background: hsla(31, 100%, 65%, .5);--ck-color-restricted-editing-selected-exception-brackets: hsla(31, 100%, 40%, .6)}.ck-editor__editable .restricted-editing-exception{transition:.2s ease-in-out background;background-color:var(--ck-color-restricted-editing-exception-background);border:1px solid;border-image:linear-gradient(to right,var(--ck-color-restricted-editing-exception-brackets) 0%,var(--ck-color-restricted-editing-exception-brackets) 5px,hsla(0,0%,0%,0) 6px,hsla(0,0%,0%,0) calc(100% - 6px),var(--ck-color-restricted-editing-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-exception-brackets) 100%) 1}@media (prefers-reduced-motion: reduce){.ck-editor__editable .restricted-editing-exception{transition:none}}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_selected{background-color:var(--ck-color-restricted-editing-selected-exception-background);border-image:linear-gradient(to right,var(--ck-color-restricted-editing-selected-exception-brackets) 0%,var(--ck-color-restricted-editing-selected-exception-brackets) 5px,var(--ck-color-restricted-editing-selected-exception-brackets) calc(100% - 5px),var(--ck-color-restricted-editing-selected-exception-brackets) 100%) 1}.ck-editor__editable .restricted-editing-exception.restricted-editing-exception_collapsed{padding-left:1ch}.ck-restricted-editing_mode_restricted,.ck-restricted-editing_mode_restricted *{cursor:default}.ck-restricted-editing_mode_restricted .restricted-editing-exception,.ck-restricted-editing_mode_restricted .restricted-editing-exception *{cursor:text}.ck-restricted-editing_mode_restricted .restricted-editing-exception:hover{background:var(--ck-color-restricted-editing-exception-hover-background)}:root{--ck-character-grid-tile-size: 24px}.ck.ck-character-grid{overflow-y:auto;overflow-x:hidden}.ck.ck-character-grid .ck-character-grid__tiles{grid-template-columns:repeat(auto-fill,minmax(var(--ck-character-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large);grid-gap:var(--ck-spacing-standard)}.ck.ck-character-grid .ck-character-grid__tile{width:var(--ck-character-grid-tile-size);height:var(--ck-character-grid-tile-size);min-width:var(--ck-character-grid-tile-size);min-height:var(--ck-character-grid-tile-size);font-size:1.5em;padding:0;transition:.2s ease box-shadow;border:0}@media (prefers-reduced-motion: reduce){.ck.ck-character-grid .ck-character-grid__tile{transition:none}}.ck.ck-character-grid .ck-character-grid__tile:focus:not(.ck-disabled),.ck.ck-character-grid .ck-character-grid__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-character-grid .ck-character-grid__tile .ck-button__label{line-height:var(--ck-character-grid-tile-size);width:100%;text-align:center}.ck.ck-character-info{padding:var(--ck-spacing-small) var(--ck-spacing-large);border-top:1px solid var(--ck-color-base-border)}.ck.ck-character-info>*{text-transform:uppercase;font-size:var(--ck-font-size-small)}.ck.ck-character-info .ck-character-info__name{max-width:280px;text-overflow:ellipsis;overflow:hidden}.ck.ck-character-info .ck-character-info__code{opacity:.6}.ck.ck-special-characters-navigation>.ck-label{max-width:160px;text-overflow:ellipsis;overflow:hidden}.ck.ck-special-characters-navigation>.ck-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}@media screen and (max-width: 600px){.ck.ck-special-characters-navigation{max-width:190px}.ck.ck-special-characters-navigation>.ck-form__header__label{text-overflow:ellipsis;overflow:hidden}}.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active>.ck-button>.ck-button__label{font-style:italic}:root{--ck-style-panel-button-width: 120px;--ck-style-panel-button-height: 80px;--ck-style-panel-button-label-background: hsl(0, 0%, 94.1%);--ck-style-panel-button-hover-label-background: hsl(0, 0%, 92.1%);--ck-style-panel-button-hover-border-color: hsl(0, 0%, 70%)}.ck.ck-style-panel .ck-style-grid{row-gap:var(--ck-spacing-large);column-gap:var(--ck-spacing-large)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{--ck-color-button-default-hover-background: var(--ck-color-base-background);--ck-color-button-default-active-background: var(--ck-color-base-background);padding:0;width:var(--ck-style-panel-button-width);height:var(--ck-style-panel-button-height)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label{height:22px;line-height:22px;width:100%;padding:0 var(--ck-spacing-medium);overflow:hidden;text-overflow:ellipsis;flex-shrink:0}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{width:100%;overflow:hidden;opacity:.9;padding:var(--ck-spacing-medium);background:var(--ck-color-base-background);border:2px solid var(--ck-color-base-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled{--ck-color-button-default-disabled-background: var(--ck-color-base-foreground)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus){border-color:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview{opacity:.4;border-color:var(--ck-color-base-foreground);filter:saturate(.3)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on{border-color:var(--ck-color-base-active)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label{box-shadow:0 -1px 0 var(--ck-color-base-active);z-index:1}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover{border-color:var(--ck-color-base-active-focus)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label{background:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label{background:var(--ck-style-panel-button-hover-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on){border-color:var(--ck-style-panel-button-hover-border-color)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview{opacity:1}.ck.ck-style-panel .ck-style-panel__style-group>.ck-label{margin:var(--ck-spacing-large) 0}.ck.ck-style-panel .ck-style-panel__style-group:first-child>.ck-label{margin-top:0}:root{--ck-style-panel-max-height: 470px}.ck.ck-style-panel{padding:var(--ck-spacing-large);overflow-y:auto;max-height:var(--ck-style-panel-max-height)}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-top-left-radius:0;border-bottom-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0;width:20px;height:20px;border:1px solid var(--ck-color-input-border)}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{top:-30%;left:50%;height:150%;width:8%;background:red;border-radius:2px;transform:rotate(45deg);transform-origin:50%}.ck.ck-input-color .ck.ck-input-color__remove-color{width:100%;padding:calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:0;margin-left:var(--ck-spacing-standard)}.ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>*:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>*:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{width:100%;min-width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}:root{--ck-insert-table-dropdown-padding: 10px;--ck-insert-table-dropdown-box-height: 11px;--ck-insert-table-dropdown-box-width: 12px;--ck-insert-table-dropdown-box-margin: 1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width) * 10 + var(--ck-insert-table-dropdown-box-margin) * 20 + var(--ck-insert-table-dropdown-padding) * 2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{min-width:var(--ck-insert-table-dropdown-box-width);min-height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px;outline:none;transition:none}@media (prefers-reduced-motion: reduce){.ck .ck-insert-table-dropdown-grid-box{transition:none}}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}:root{--ck-color-selector-focused-cell-background: hsla(212, 90%, 80%, .3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-selector-focused-cell-background);outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}:root{--ck-table-properties-error-arrow-size: 6px;--ck-table-properties-min-error-width: 150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{width:80px;min-width:80px;max-width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{border-radius:0;background:var(--ck-color-base-error);color:var(--ck-color-base-background);padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-width:var(--ck-table-properties-min-error-width);text-align:center;animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);border-style:solid}@media (prefers-reduced-motion: reduce){.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}:root{--ck-table-selected-cell-background: hsla(208, 90%, 80%, .3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{position:relative;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{content:"";pointer-events:none;background-color:var(--ck-table-selected-cell-background);position:absolute;top:0;left:0;right:0;bottom:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}:root{--ck-widget-outline-thickness: 3px;--ck-widget-handler-icon-size: 16px;--ck-widget-handler-animation-duration: .2s;--ck-widget-handler-animation-curve: ease;--ck-color-widget-blurred-border: hsl(0, 0%, 87%);--ck-color-widget-hover-border: hsl(43, 100%, 62%);--ck-color-widget-editable-focus-background: var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color: var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion: reduce){.ck .ck-widget{transition:none}}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{box-shadow:var(--ck-inner-shadow),0 0}@media (forced-colors: none){.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background)}}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused:not(td,th),.ck .ck-editor__nested-editable:focus:not(td,th){outline:none;border:var(--ck-focus-ring)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness));top:0}@media (prefers-reduced-motion: reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}@media (prefers-reduced-motion: reduce){.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{transition:none}}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness: 0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}:root{--ck-resizer-size: 10px;--ck-resizer-offset: calc( ( var(--ck-resizer-size) / -2 ) - 2px);--ck-resizer-border-width: 1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid hsl(0,0%,100%);border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}:root{--ck-widget-type-around-button-size: 20px;--ck-color-widget-type-around-button-active: var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover: var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable: var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha: 0;--ck-color-widget-type-around-button-radar-end-alpha: .3;--ck-color-widget-type-around-button-icon: var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{width:var(--ck-widget-type-around-button-size);height:var(--ck-widget-type-around-button-size);background:var(--ck-color-widget-type-around-button);border-radius:100px;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);opacity:0;pointer-events:none}@media (prefers-reduced-motion: reduce){.ck .ck-widget .ck-widget__type-around__button{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg{width:10px;height:8px;transform:translate(-50%,-50%);transition:transform .5s ease;margin-top:1px}@media (prefers-reduced-motion: reduce){.ck .ck-widget .ck-widget__type-around__button svg{transition:none}}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}@media (prefers-reduced-motion: reduce){.ck .ck-widget .ck-widget__type-around__button:hover{animation:none}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:none}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:none}}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{width:calc(var(--ck-widget-type-around-button-size) - 2px);height:calc(var(--ck-widget-type-around-button-size) - 2px);border-radius:100px;background:linear-gradient(135deg,#fff0,#ffffff4d)}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{pointer-events:none;height:1px;animation:ck-widget-type-around-fake-caret-pulse linear 1s infinite normal forwards;outline:solid 1px hsla(0,0%,100%,.5);background:var(--ck-color-base-text)}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle{opacity:0}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}.ck-content code{background-color:#c7c7c74d;padding:.15em;border-radius:2px}.ck.ck-editor__editable .ck-code_selected{background-color:#c7c7c780}.ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:solid 5px hsl(0,0%,80%)}.ck-content[dir=rtl] blockquote{border-left:0;border-right:solid 5px hsl(0,0%,80%)}:root{--ck-bookmark-icon-hover-fill-color: var(--ck-color-widget-hover-border);--ck-bookmark-icon-selected-fill-color: var(--ck-color-focus-border);--ck-bookmark-icon-animation-duration: var(--ck-widget-handler-animation-duration);--ck-bookmark-icon-animation-curve: var(--ck-widget-handler-animation-curve)}.ck-bookmark.ck-widget{outline:none}.ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon__fill{transition:fill var(--ck-bookmark-icon-animation-duration) var(--ck-bookmark-icon-animation-curve)}.ck-bookmark.ck-widget:hover .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-hover-fill-color)}.ck-bookmark.ck-widget.ck-widget_selected .ck-bookmark__icon .ck-icon__fill{fill:var(--ck-bookmark-icon-selected-fill-color)}.ck-bookmark.ck-widget.ck-widget_selected,.ck-bookmark.ck-widget.ck-widget_selected:hover{outline:none}.ck-bookmark.ck-widget .ck-bookmark__icon{position:relative;top:-.1em}.ck-bookmark.ck-widget .ck-bookmark__icon .ck-icon{height:1.2em;width:auto;vertical-align:middle}.ck.ck-bookmark-view:focus{outline:none}.ck.ck-bookmark-form{display:flex;align-items:flex-start}@media screen and (max-width: 600px){.ck.ck-bookmark-form{flex-wrap:wrap}.ck.ck-bookmark-form .ck-button,.ck.ck-bookmark-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-bookmark-form .ck-button{justify-content:center}}@media screen and (max-width: 600px){.ck.ck-bookmark-form.ck-responsive-form>.ck-button:nth-last-child(1){margin:var(--ck-spacing-large);padding:0 var(--ck-spacing-standard);border-radius:var(--ck-border-radius)}}.ck.ck-bookmark-actions{display:flex;align-items:center}.ck.ck-bookmark-actions .ck-bookmark-actions__preview{max-width:var(--ck-input-width);min-width:3em;font-weight:400;text-overflow:ellipsis;text-align:center;overflow:hidden;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;cursor:default}@media screen and (max-width: 600px){.ck.ck-bookmark-actions{display:flex;flex-wrap:wrap}.ck.ck-bookmark-actions .ck-bookmark-actions__preview{flex-basis:100%;margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0;min-width:auto}}@media screen and (max-width: 600px){.ck.ck-bookmark-actions.ck-responsive-form .ck-button{flex-basis:50%;margin-top:var(--ck-spacing-standard)}}:root{--ck-image-processing-highlight-color: hsl(220, 10%, 98%);--ck-image-processing-background-color: hsl(220, 10%, 90%)}.ck.ck-editor__editable .image.image-processing{position:relative}.ck.ck-editor__editable .image.image-processing:before{content:"";position:absolute;top:0;left:0;z-index:1;height:100%;width:100%;background:linear-gradient(90deg,var(--ck-image-processing-background-color),var(--ck-image-processing-highlight-color),var(--ck-image-processing-background-color));background-size:200% 100%;animation:ck-image-processing-animation 2s linear infinite}.ck.ck-editor__editable .image.image-processing img{height:100%}@keyframes ck-image-processing-animation{0%{background-position:200% 0}to{background-position:-200% 0}}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;position:relative;pointer-events:none}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle{display:none}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}.ck.ck-clipboard-drop-target-line{position:absolute;pointer-events:none}.ck-content pre{padding:1em;color:#353535;background:#c7c7c74d;border:1px solid hsl(0,0%,77%);border-radius:2px;text-align:left;direction:ltr;-moz-tab-size:4;tab-size:4;white-space:pre-wrap;font-style:normal;min-width:200px}.ck-content pre code{background:unset;padding:0;border-radius:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}.ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-panel)}.ck.ck-menu-bar{border:none;border-bottom:1px solid var(--ck-color-toolbar-border)}:root{--ck-emoji-grid-tile-size: 27px}.ck.ck-emoji .ck.ck-emoji__tiles{max-width:100%;max-height:min(265px,40vh);overflow-y:auto;overflow-x:hidden;border-top:1px solid var(--ck-color-base-border)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--ck-emoji-grid-tile-size),1fr));margin:var(--ck-spacing-standard) var(--ck-spacing-large);grid-gap:var(--ck-spacing-small)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{width:var(--ck-emoji-grid-tile-size);height:var(--ck-emoji-grid-tile-size);min-width:var(--ck-emoji-grid-tile-size);min-height:var(--ck-emoji-grid-tile-size);font-size:1.5em;padding:0;transition:.2s ease box-shadow;border:0}@media (prefers-reduced-motion: reduce){.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile{transition:none}}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:focus:not(.ck-disabled),.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile:hover:not(.ck-disabled){border:0;box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-emoji .ck.ck-emoji__tiles .ck-emoji__tile .ck-button__label{line-height:var(--ck-emoji-grid-tile-size);width:100%;text-align:center}.ck.ck-emoji__categories-list{display:flex;justify-content:space-between;margin:0 var(--ck-spacing-large)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text{border-width:0;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:transparent;padding:0;font-size:var(--ck-font-size-big);min-width:var(--ck-font-size-big);min-height:var(--ck-font-size-big)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text.ck-emoji__category-item.ck-on{border-bottom-color:var(--ck-color-base-active)}.ck.ck-emoji__categories-list>.ck.ck-button.ck-button_with-text>span{margin:auto}.ck.ck-emoji__skin-tone{margin-left:var(--ck-spacing-standard)}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck.ck-list__item{min-width:1em}.ck.ck-emoji__skin-tone>.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:initial}.ck.ck-emoji{width:320px}.ck .ck.ck-emoji__search{display:flex;padding:var(--ck-spacing-large);padding-bottom:var(--ck-spacing-medium);justify-content:space-between;align-items:center}.ck .ck-fake-emoji-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-emoji-selection_collapsed{height:100%;border-right:1px solid var(--ck-color-base-text);margin-right:-1px;outline:solid 1px hsla(0,0%,100%,.5)}.ck.ck-placeholder,.ck .ck-placeholder{position:relative}.ck.ck-placeholder:before,.ck .ck-placeholder:before{position:absolute;left:0;right:0;content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}.ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}.ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions{display:flex}.ck.ck-find-and-replace-form .ck-find-and-replace-form__inputs.ck-find-and-replace-form__inputs .ck-results-counter,.ck.ck-find-and-replace-form .ck-find-and-replace-form__actions.ck-find-and-replace-form__inputs .ck-results-counter{position:absolute}.ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}.ck.ck-heading_heading1 .ck-button__label{font-size:20px}.ck.ck-heading_heading2 .ck-button__label{font-size:17px}.ck.ck-heading_heading3 .ck-button__label{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}:root{--ck-highlight-marker-yellow: hsl(60, 97%, 73%);--ck-highlight-marker-green: hsl(120, 93%, 68%);--ck-highlight-marker-pink: hsl(345, 96%, 73%);--ck-highlight-marker-blue: hsl(201, 97%, 72%);--ck-highlight-pen-red: hsl(0, 85%, 49%);--ck-highlight-pen-green: hsl(112, 100%, 27%)}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{color:var(--ck-highlight-pen-red);background-color:transparent}.ck-content .pen-green{color:var(--ck-highlight-pen-green);background-color:transparent}.ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{margin:15px 0;height:4px;background:#dedede;border:0}.ck-widget.raw-html-embed{margin:.9em auto;position:relative;display:flow-root;min-width:15em;font-style:normal}.ck-widget.raw-html-embed:before{position:absolute;z-index:1}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{position:absolute;display:flex;flex-direction:column}.ck-widget.raw-html-embed .raw-html-embed__preview{position:relative;overflow:hidden;display:flex}.ck-widget.raw-html-embed .raw-html-embed__preview-content{width:100%;position:relative;margin:auto;display:table;border-collapse:separate;border-spacing:7px}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{position:absolute;left:0;top:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}:root{--ck-html-object-embed-unfocused-outline-width: 1px}.ck-widget.html-object-embed{font-size:var(--ck-font-size-base);background-color:var(--ck-color-base-foreground);padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large));min-width:calc(76px + var(--ck-spacing-standard))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{font-weight:400;font-style:normal;position:absolute;content:attr(data-html-object-embed-label);top:0;left:var(--ck-spacing-standard);background:#999;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);font-size:var(--ck-font-size-tiny);font-family:var(--ck-font-face)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}:root{--ck-color-image-caption-background: hsl(0, 0%, 97%);--ck-color-image-caption-text: hsl(0, 0%, 20%);--ck-color-image-caption-highlighted-background: hsl(52deg 100% 50%)}.ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:var(--ck-color-image-caption-text);background-color:var(--ck-color-image-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}@media (forced-colors: active){.ck-content .image>figcaption{background-color:unset;color:unset}}@media (forced-colors: none){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}}@media (prefers-reduced-motion: reduce){.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:none}}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highlighted-background)}to{background-color:var(--ck-color-image-caption-background)}}.ck.ck-image-insert-url{width:400px;padding:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-image-insert-url .ck-image-insert-url__action-row{display:grid;grid-template-columns:repeat(2,1fr)}.ck-content img.image_resized{height:auto}.ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}.ck.ck-image-custom-resize-form{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:flex-start}.ck.ck-image-custom-resize-form .ck-labeled-field-view{display:inline-block}.ck.ck-image-custom-resize-form .ck-label{display:none}@media screen and (max-width: 600px){.ck.ck-image-custom-resize-form{flex-wrap:wrap}.ck.ck-image-custom-resize-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-image-custom-resize-form .ck-button{flex-basis:50%}}:root{--ck-image-style-spacing: 1.5em;--ck-inline-image-style-spacing: calc(var(--ck-image-style-spacing) / 2)}.ck-content .image.image-style-block-align-left,.ck-content .image.image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image.image-style-align-left,.ck-content .image.image-style-align-right{clear:none}.ck-content .image.image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image.image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image.image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image.image-style-block-align-right{margin-right:0;margin-left:auto}.ck-content .image.image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content p+.image.image-style-align-left,.ck-content p+.image.image-style-align-right,.ck-content p+.image.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-top:var(--ck-inline-image-style-spacing);margin-bottom:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}.ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width: 600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{position:absolute;top:0;left:0}.ck-image-upload-complete-icon{display:block;position:absolute;top:min(var(--ck-spacing-medium),6%);right:min(var(--ck-spacing-medium),6%);border-radius:50%;z-index:1}.ck-image-upload-complete-icon:after{content:"";position:absolute}.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}.ck-content .image{display:table;clear:both;text-align:center;margin:.9em auto;min-width:50px}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%;height:auto}.ck-content .image-inline{display:inline-flex;max-width:100%;align-items:flex-start}.ck-content .image-inline picture{display:flex}.ck-content .image-inline picture,.ck-content .image-inline img{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ck.ck-editor__editable .image{z-index:1}.ck.ck-editor__editable .image.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected{z-index:2}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable .image-inline img{height:auto}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}.ck.ck-editor__editable img.image_placeholder{background-size:100% 100%}.ck.ck-editor__editable figure.image>a:after,.ck.ck-editor__editable a span.image-inline:after{display:block;position:absolute}.ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width: 600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-form{display:flex;align-items:flex-start}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width: 600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-save,.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel{margin-top:var(--ck-spacing-medium)}.ck-editor__editable .ck-list-bogus-paragraph{display:block}.ck.ck-list-styles-list{display:grid}.ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:disc}.ck-content ul ul{list-style-type:circle}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}:root{--ck-todo-list-checkmark-size: 16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{position:relative;margin-bottom:5px}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;display:inline-block;position:relative;width:var(--ck-todo-list-checkmark-size);height:var(--ck-todo-list-checkmark-size);vertical-align:middle;border:0;left:-25px;margin-right:-15px;right:0;margin-left:0}.ck-content[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-right:0;right:-25px;margin-left:-15px}.ck-content .todo-list .todo-list__label>input:before{display:block;position:absolute;box-sizing:border-box;content:"";width:100%;height:100%;border:1px solid hsl(0,0%,20%);border-radius:2px;transition:.25s ease-in-out box-shadow}@media (prefers-reduced-motion: reduce){.ck-content .todo-list .todo-list__label>input:before{transition:none}}.ck-content .todo-list .todo-list__label>input:after{display:block;position:absolute;box-sizing:content-box;pointer-events:none;content:"";left:calc(var(--ck-todo-list-checkmark-size) / 3);top:calc(var(--ck-todo-list-checkmark-size) / 5.3);width:calc(var(--ck-todo-list-checkmark-size) / 5.3);height:calc(var(--ck-todo-list-checkmark-size) / 2.6);border-style:solid;border-color:transparent;border-width:0 calc(var(--ck-todo-list-checkmark-size) / 8) calc(var(--ck-todo-list-checkmark-size) / 8) 0;transform:rotate(45deg)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-editor__editable.ck-content .todo-list .todo-list__label>input,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{cursor:pointer}.ck-editor__editable.ck-content .todo-list .todo-list__label>input:hover:before,.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:hover:before{box-shadow:0 0 0 5px #0000001a}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input{-webkit-appearance:none;display:inline-block;position:relative;width:var(--ck-todo-list-checkmark-size);height:var(--ck-todo-list-checkmark-size);vertical-align:middle;border:0;left:-25px;margin-right:-15px;right:0;margin-left:0}.ck-editor__editable.ck-content[dir=rtl] .todo-list .todo-list__label>span[contenteditable=false]>input{left:0;margin-right:0;right:-25px;margin-left:-15px}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{display:block;position:absolute;box-sizing:border-box;content:"";width:100%;height:100%;border:1px solid hsl(0,0%,20%);border-radius:2px;transition:.25s ease-in-out box-shadow}@media (prefers-reduced-motion: reduce){.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:before{transition:none}}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input:after{display:block;position:absolute;box-sizing:content-box;pointer-events:none;content:"";left:calc(var(--ck-todo-list-checkmark-size) / 3);top:calc(var(--ck-todo-list-checkmark-size) / 5.3);width:calc(var(--ck-todo-list-checkmark-size) / 5.3);height:calc(var(--ck-todo-list-checkmark-size) / 2.6);border-style:solid;border-color:transparent;border-width:0 calc(var(--ck-todo-list-checkmark-size) / 8) calc(var(--ck-todo-list-checkmark-size) / 8) 0;transform:rotate(45deg)}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-editor__editable.ck-content .todo-list .todo-list__label>span[contenteditable=false]>input[checked]:after{border-color:#fff}.ck-editor__editable.ck-content .todo-list .todo-list__label.todo-list__label_without-description input[type=checkbox]{position:absolute}.ck-content .media{clear:both;margin:.9em 0;display:block;min-width:15em}.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="goo.gl/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.google.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="maps.app.goo.gl"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>*:not(.ck-media__placeholder){pointer-events:none}.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}.ck-vertical-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:-1px;bottom:-1px;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width: 600px){.ck.ck-responsive-form .ck-button:after{content:"";width:0;position:absolute;right:-1px;top:-1px;bottom:-1px;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap;width:400px}.ck.ck-media-form .ck-labeled-field-view{display:inline-block;width:100%}.ck.ck-media-form .ck-label{display:none}.ck.ck-media-form .ck-input{width:100%}@media screen and (max-width: 600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}:root{--ck-mention-list-max-height: 300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-y:auto;overflow-x:hidden;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{overflow:hidden;flex-shrink:0}:root{--ck-color-minimap-tracker-background: 208, 0%, 51%;--ck-color-minimap-iframe-outline: hsl(0deg 0% 75%);--ck-color-minimap-iframe-shadow: hsl(0deg 0% 0% / 11%);--ck-color-minimap-progress-background: hsl(0,0%,40%)}.ck.ck-minimap{position:absolute;-webkit-user-select:none;user-select:none;background:var(--ck-color-base-background)}.ck.ck-minimap,.ck.ck-minimap iframe{width:100%;height:100%}.ck.ck-minimap iframe{border:0;pointer-events:none;position:relative;outline:1px solid var(--ck-color-minimap-iframe-outline);box-shadow:0 2px 5px var(--ck-color-minimap-iframe-shadow);margin:0}.ck.ck-minimap .ck.ck-minimap__position-tracker{position:absolute;width:100%;top:0;background:hsla(var(--ck-color-minimap-tracker-background),.2);z-index:1;transition:background .1s ease-in-out}@media (prefers-reduced-motion: reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker{transition:none}}.ck.ck-minimap .ck.ck-minimap__position-tracker:hover{background:hsla(var(--ck-color-minimap-tracker-background),.3)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover{background:hsla(var(--ck-color-minimap-tracker-background),.4)}.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:after,.ck.ck-minimap .ck.ck-minimap__position-tracker.ck-minimap__position-tracker_dragging:hover:after{opacity:1}.ck.ck-minimap .ck.ck-minimap__position-tracker:after{content:attr(data-progress) "%";position:absolute;top:5px;right:5px;background:var(--ck-color-minimap-progress-background);color:var(--ck-color-base-background);border:1px solid var(--ck-color-base-background);padding:2px 4px;font-size:10px;border-radius:3px;opacity:0;transition:opacity .1s ease-in-out}@media (prefers-reduced-motion: reduce){.ck.ck-minimap .ck.ck-minimap__position-tracker:after{transition:none}}.ck-content .page-break{position:relative;clear:both;padding:5px 0;display:flex;align-items:center;justify-content:center}.ck-content .page-break:after{content:"";position:absolute;border-bottom:2px dashed hsl(0,0%,77%);width:100%}.ck-content .page-break__label{position:relative;z-index:1;padding:.3em .6em;display:block;text-transform:uppercase;border:1px solid hsl(0,0%,77%);border-radius:2px;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;color:#333;background:#fff;box-shadow:2px 2px 1px #00000026;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}.ck-content *:has(+.page-break){margin-bottom:0}}:root{--ck-show-blocks-border-color: hsl(0, 0%, 46%)}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) address{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ADDRESS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) aside{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>ASIDE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) blockquote{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>BLOCKQUOTE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) details{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DETAILS</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *):not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) div:not(.ck-widget,.ck-widget *){background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>DIV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) footer{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FOOTER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h1{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H1</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h2{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H2</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h3{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H3</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h4{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H4</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h5{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H5</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) h6{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>H6</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) header{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>HEADER</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) main{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>MAIN</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) nav{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>NAV</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) pre{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>PRE</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ol{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>OL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) ul{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>UL</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) p{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>P</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) section{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>SECTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-repeat:no-repeat;padding-top:15px}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption:not(.ck-widget_selected):not(.ck-widget:hover){outline:1px dashed var(--ck-show-blocks-border-color)}[dir=ltr] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='3' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:1px 1px}[dir=rtl] .ck.ck-editor__editable.ck-editor__editable_inline.ck-show-blocks:not(.ck-widget) :where(figure.image,figure.table) figcaption{background-image:url("data:image/svg+xml;utf8,<svg width='120' height='12' xmlns='http://www.w3.org/2000/svg' ><text style='paint-order:stroke fill; clip-path: inset(-3px); transform:translate(-2px, 0)' stroke='%23EAEAEA' stroke-width='13' dominant-baseline='middle' fill='black' x='100%' text-anchor='end' y='7' font-size='9px' font-family='Consolas, %22Lucida Console%22, %22Lucida Sans Typewriter%22, %22DejaVu Sans Mono%22, %22Bitstream Vera Sans Mono%22, %22Liberation Mono%22, Monaco, %22Courier New%22, Courier, monospace'>FIGCAPTION</text></svg>");background-position:calc(100% - 1px) 1px}.ck-source-editing-area{position:relative;overflow:hidden}.ck-source-editing-area:after,.ck-source-editing-area textarea{padding:var(--ck-spacing-large);margin:0;border:1px solid transparent;line-height:var(--ck-line-height-base);font-size:var(--ck-font-size-normal);font-family:monospace;white-space:pre-wrap}.ck-source-editing-area:after{content:attr(data-value) " ";visibility:hidden;display:block}.ck-source-editing-area textarea{position:absolute;width:100%;height:100%;resize:none;outline:none;overflow:hidden;box-sizing:border-box;border-color:var(--ck-color-base-border);border-radius:0}.ck-rounded-corners .ck-source-editing-area textarea,.ck-source-editing-area textarea.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck-source-editing-area textarea:not([readonly]):focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-character-grid{max-width:100%}.ck.ck-character-grid .ck-character-grid__tiles{display:grid}.ck.ck-character-info{display:flex;justify-content:space-between}.ck.ck-special-characters>.ck-dialog__content>div{width:350px;max-width:100%;height:100%;display:grid;grid-column-gap:0px;grid-row-gap:0px;grid-template-columns:1fr;grid-template-rows:auto 1fr auto}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories{grid-area:1 / 1 / 2 / 2;padding:var(--ck-spacing-medium) var(--ck-spacing-large)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view{padding-top:var(--ck-spacing-standard);width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-width:var(--ck-table-properties-min-error-width);text-align:center;animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);border-style:solid}@media (prefers-reduced-motion: reduce){.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:none}}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories>.ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown{display:block;width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-categories .ck-dropdown>button>span{width:100%}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-grid{grid-area:2 / 1 / 3 / 2;max-height:200px}.ck.ck-special-characters>.ck-dialog__content>div>.ck-character-info{grid-area:3 / 1 / 4 / 2}:root{--ck-style-panel-columns: 3}.ck.ck-style-panel .ck-style-grid{display:grid;grid-template-columns:repeat(var(--ck-style-panel-columns),auto);justify-content:start}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{display:flex;justify-content:space-between;flex-direction:column}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{display:flex;align-content:center;justify-content:flex-start;align-items:center;flex-grow:1;flex-basis:100%}.ck-content .table{margin:.9em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double hsl(0,0%,70%)}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border:1px solid hsl(0,0%,75%)}.ck-content .table table th{font-weight:700;background:#0000000d}@media print{.ck-content .table table{height:initial}}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}.ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}.ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>*:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-save,.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel{justify-content:center}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-input-color{width:100%;display:flex;flex-direction:row-reverse}.ck.ck-input-color>input.ck.ck-input-text{min-width:auto;flex-grow:1}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{position:relative;overflow:hidden}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{position:absolute;display:block}.ck.ck-table-form .ck-form__row.ck-table-form__border-row,.ck.ck-table-form .ck-form__row.ck-table-form__background-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{flex-wrap:wrap;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{display:flex;flex-direction:column-reverse;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{position:absolute;left:50%;bottom:calc(-1 * var(--ck-table-properties-error-arrow-size));transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:"";position:absolute;top:calc(-1 * var(--ck-table-properties-error-arrow-size));left:50%;transform:translate(-50%)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{flex-wrap:wrap;flex-basis:0;align-content:baseline}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}:root{--ck-color-selector-caption-background: hsl(0, 0%, 97%);--ck-color-selector-caption-text: hsl(0, 0%, 20%);--ck-color-selector-caption-highlighted-background: hsl(52deg 100% 50%)}.ck-content .table>figcaption{display:table-caption;caption-side:top;word-break:break-word;text-align:center;color:var(--ck-color-selector-caption-text);background-color:var(--ck-color-selector-caption-background);padding:.6em;font-size:.75em;outline-offset:-1px}@media (forced-colors: active){.ck-content .table>figcaption{background-color:unset;color:unset}}@media (forced-colors: none){.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{padding-left:inherit;padding-right:inherit;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-selector-caption-highlighted-background)}to{background-color:var(--ck-color-selector-caption-background)}}:root{--ck-color-selector-column-resizer-hover: var(--ck-color-base-active);--ck-table-column-resizer-width: 7px;--ck-table-column-resizer-position-offset: calc(var(--ck-table-column-resizer-width) * -.5 - .5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table table{overflow:hidden}.ck-content .table td,.ck-content .table th{overflow-wrap:break-word;position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{position:absolute;top:0;bottom:0;right:var(--ck-table-column-resizer-position-offset);width:var(--ck-table-column-resizer-width);cursor:col-resize;-webkit-user-select:none;user-select:none;z-index:var(--ck-z-default)}.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer,.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-selector-column-resizer-hover);opacity:.25;top:-999999px;bottom:-999999px}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}.ck-hidden{display:none!important}:root{--ck-z-default: 1;--ck-z-panel: calc( var(--ck-z-default) + 999 );--ck-z-dialog: 9999}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-powered-by-font-size: calc(var(--ck-font-size-base) * 7.5 / 13);--ck-powered-by-line-height: calc(var(--ck-font-size-base) * 10 / 13);--ck-powered-by-letter-spacing: calc(var(--ck-font-size-base) * -.2 / 13);--ck-powered-by-padding-vertical: 2px;--ck-powered-by-padding-horizontal: 4px;--ck-powered-by-text-color: hsl(0, 0%, 31%);--ck-powered-by-border-radius: var(--ck-border-radius);--ck-powered-by-background: hsl(0, 0%, 100%);--ck-powered-by-border-color: var(--ck-color-focus-border);--ck-powered-by-svg-width: 53;--ck-powered-by-svg-height: 10;--ck-powered-by-icon-width: calc(var(--ck-font-size-base) * var(--ck-powered-by-svg-width) / 13);--ck-powered-by-icon-height: calc(var(--ck-font-size-base) * var(--ck-powered-by-svg-height) / 13)}.ck.ck-balloon-panel.ck-powered-by-balloon{--ck-border-radius: var(--ck-powered-by-border-radius);box-shadow:none;background:var(--ck-powered-by-background);min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by{line-height:var(--ck-powered-by-line-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a{cursor:pointer;display:flex;align-items:center;opacity:.66;filter:grayscale(80%);line-height:var(--ck-powered-by-line-height);padding:var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label{font-size:var(--ck-powered-by-font-size);letter-spacing:var(--ck-powered-by-letter-spacing);padding-left:2px;text-transform:uppercase;font-weight:700;margin-right:4px;cursor:pointer;line-height:normal;color:var(--ck-powered-by-text-color)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon{display:block;cursor:pointer;width:var(--ck-powered-by-icon-width);height:var(--ck-powered-by-icon-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a{filter:grayscale(0%);opacity:1}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-powered-by-border-color)}:root{--ck-evaluation-badge-font-size: calc(var(--ck-font-size-base) * 7.5 / 13);--ck-evaluation-badge-line-height: calc(var(--ck-font-size-base) * 7.5 / 13);--ck-evaluation-badge-letter-spacing: calc(var(--ck-font-size-base) * -.2 / 13);--ck-evaluation-badge-padding-vertical: 2px;--ck-evaluation-badge-padding-horizontal: 4px;--ck-evaluation-badge-text-color: hsl(0, 0%, 31%);--ck-evaluation-badge-border-radius: var(--ck-border-radius);--ck-evaluation-badge-background: hsl(0, 0%, 100%);--ck-evaluation-badge-border-color: var(--ck-color-focus-border)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon{--ck-border-radius: var(--ck-evaluation-badge-border-radius);box-shadow:none;background:var(--ck-evaluation-badge-background);min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge{line-height:var(--ck-evaluation-badge-line-height);padding:var(--ck-evaluation-badge-padding-vertical) var(--ck-evaluation-badge-padding-horizontal)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon .ck.ck-evaluation-badge .ck-evaluation-badge__label{display:block;padding:0 2px;font-size:var(--ck-evaluation-badge-font-size);letter-spacing:var(--ck-evaluation-badge-letter-spacing);font-weight:700;line-height:normal;text-transform:uppercase;color:var(--ck-evaluation-badge-text-color)}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-evaluation-badge-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-evaluation-badge-border-color)}.ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center}[dir=ltr] .ck.ck-button,[dir=ltr] a.ck.ck-button{justify-content:left}[dir=rtl] .ck.ck-button,[dir=rtl] a.ck.ck-button{justify-content:right}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}.ck.ck-list-item-button{min-height:unset;width:100%;border-radius:0}[dir=ltr] .ck.ck-list-item-button{text-align:left}[dir=rtl] .ck.ck-list-item-button{text-align:right}[dir=ltr] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button.ck-list-item-button_toggleable{padding-right:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-holder{display:inline-flex;width:.9em;height:.9em}[dir=ltr] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-list-item-button .ck-list-item-button__check-holder{margin-left:var(--ck-spacing-small)}.ck.ck-list-item-button .ck-list-item-button__check-icon{height:100%}.ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}.ck.ck-color-grid{display:grid}.color-picker-hex-input{width:max-content}.color-picker-hex-input .ck.ck-input{min-width:unset}.ck.ck-color-picker__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin:var(--ck-spacing-large) 0 0;width:unset}.ck.ck-color-picker__row .ck.ck-labeled-field-view{padding-top:unset}.ck.ck-color-picker__row .ck.ck-input-text{width:unset}.ck.ck-color-picker__row .ck-color-picker__hash-view{padding-top:var(--ck-spacing-tiny);padding-right:var(--ck-spacing-medium)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{display:flex;align-items:center}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color,[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{justify-content:flex-start}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{display:flex;flex-direction:row;justify-content:space-around}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save,.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel{flex:1}.ck.ck-dialog .ck.ck-dialog__actions{display:flex;justify-content:flex-end}.ck.ck-dialog-overlay{-webkit-user-select:none;user-select:none;overscroll-behavior:none;position:fixed;bottom:0;left:0;right:0;top:0}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent{pointer-events:none;animation:none;background:none}.ck.ck-dialog{overscroll-behavior:none;width:fit-content;position:absolute}.ck.ck-dialog .ck.ck-form__header{flex-shrink:0}.ck.ck-dialog:not(.ck-dialog_modal) .ck.ck-form__header .ck-form__header__label{cursor:grab}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent .ck.ck-dialog{pointer-events:all}:root{--ck-dropdown-max-width: 75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;z-index:var(--ck-z-panel);max-width:var(--ck-dropdown-max-width);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n{left:50%;transform:translate(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translate(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translate(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-toolbar-dropdown-max-width: 60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{width:max-content;max-width:var(--ck-toolbar-dropdown-max-width)}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-dropdown-menu-list__nested-menu__button>.ck-dropdown-menu-list__nested-menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-balloon-panel.ck-dropdown-menu__nested-menu__panel{position:absolute;max-height:314px;overflow-y:auto;z-index:calc(var(--ck-z-panel) + 1)}.ck.ck-dropdown-menu-list__nested-menu{display:block}.ck.ck-aria-live-announcer{position:absolute;left:-10000px;top:-10000px}.ck.ck-aria-live-region-list{list-style-type:none}.ck.ck-form__header{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:space-between}.ck.ck-form__header h2.ck-form__header__label{flex-grow:1}.ck.ck-icon{vertical-align:middle}.ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}.ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>*:focus{position:relative;z-index:var(--ck-z-default)}:root{--ck-balloon-panel-arrow-z-index: calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-panel)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}.ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-panel) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:nth-child(1){z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-panel);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-autocomplete{position:relative}.ck.ck-autocomplete>.ck-search__results{position:absolute;z-index:var(--ck-z-panel)}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{bottom:100%}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{top:100%;bottom:auto}.ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{left:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{right:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view .ck-search__reset{position:absolute;top:50%;transform:translateY(-50%)}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{display:block}.ck.ck-search>.ck-search__results>.ck-search__info:not(.ck-hidden)~*{display:none}.ck.ck-highlighted-text mark{background:var(--ck-color-highlight-background);vertical-align:initial;font-weight:inherit;line-height:inherit;font-size:inherit}.ck.ck-balloon-panel.ck-tooltip{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;z-index:calc(var(--ck-z-dialog) + 100)}:root{--ck-toolbar-spinner-size: 18px}.ck.ck-spinner-container{display:block;position:relative}.ck.ck-spinner{position:absolute;top:50%;left:0;right:0;margin:0 auto;transform:translateY(-50%);z-index:1}.ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}.ck.ck-menu-bar__menu>.ck-menu-bar__menu__button>.ck-menu-bar__menu__button__arrow{pointer-events:none;z-index:var(--ck-z-default)}:root{--ck-menu-bar-menu-max-width: 75vw;--ck-menu-bar-nested-menu-horizontal-offset: 5px}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel{z-index:var(--ck-z-panel);max-width:var(--ck-menu-bar-menu-max-width);position:absolute}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw{bottom:100%}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{top:100%;bottom:auto}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ne,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_se{left:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_nw,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_sw{right:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en{left:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_es{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_en{bottom:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws,.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{right:calc(100% - var(--ck-menu-bar-nested-menu-horizontal-offset))}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_ws{top:0}.ck.ck-menu-bar__menu>.ck.ck-menu-bar__menu__panel.ck-menu-bar__menu__panel_position_wn{bottom:0}.ck.ck-menu-bar__menu{display:block;position:relative}:root{--ck-color-resizer: var(--ck-color-focus-border);--ck-color-resizer-tooltip-background: hsl(0, 0%, 15%);--ck-color-resizer-tooltip-text: hsl(0, 0%, 95%);--ck-resizer-border-radius: var(--ck-border-radius);--ck-resizer-tooltip-offset: 10px;--ck-resizer-tooltip-height: calc(var(--ck-spacing-small) * 2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:0 var(--ck-spacing-small);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height)}.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-above-center{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{top:calc(var(--ck-resizer-tooltip-height) * -1);left:50%;transform:translate(-50%)}.ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{cursor:nesw-resize}.ck .ck-widget .ck-widget__type-around__button{display:block;position:absolute;overflow:hidden;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{position:absolute;top:50%;left:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{top:calc(-.5 * var(--ck-widget-outline-thickness));left:min(10%,30px);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(-.5 * var(--ck-widget-outline-thickness));right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;position:absolute;top:1px;left:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;position:absolute;left:0;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(-1 * var(--ck-widget-outline-thickness));right:calc(-1 * var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{top:calc(-1 * var(--ck-widget-outline-thickness) - 1px);display:block}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(-1 * var(--ck-widget-outline-thickness) - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}._slider-container_13ll3_1{position:relative;height:1.6rem;width:28rem}._range-bar_13ll3_13{position:absolute;top:50%;transform:translateY(-50%);width:100%;height:var(--range-width, 6px);border-radius:10rem;background:var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))}._value-bar_13ll3_33{border-radius:10rem;height:100%;background:var(--primary-main-color, #287CF0)}._slider-container_13ll3_1._vertical_13ll3_45{top:unset;left:50%;transform:translate(-50%);width:var(--range-width, 6px);height:100%}._thumb-dot_13ll3_61{top:50%;left:0;transform:translate(-50%,-50%);position:absolute;height:inherit;aspect-ratio:1 / 1;border-radius:50%;border:2px solid var(--primary-main-color, #287CF0);background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._thumb-dot_13ll3_61:focus{box-shadow:0 0 0 4px var(--primary-background, light-dark(#ECF3FE, #031630))}._slider-container_13ll3_1._vertical_13ll3_45{top:0;left:50%;height:unset;width:inherit}@keyframes _on-open-tooltip_13ll3_1{0%{opacity:0}to{opacity:1}}._tooltip-container_13ll3_127{position:fixed;z-index:999;animation:_on-open-tooltip_13ll3_1 .2s ease-in-out;animation-fill-mode:forwards}._tooltip-container_13ll3_127>._tooltip-message_13ll3_141{color:var(--neutral-text-body-reverse-color, #EAEAEC);background-color:var(--neutral-main-reverse-background-color, light-dark(#242428, #EFEFF0));padding:.4rem 1.2rem;border-radius:.8rem;max-width:21.2rem;text-align:center}._mark-point_13ll3_159{position:absolute;top:50%;transform:translate(-50%,-50%);height:calc(var(--range-width, 6px) + max(.3rem,1.5px));width:calc(var(--range-width, 6px) + max(.3rem,1.5px));border-radius:50%;border:2px solid var(--primary-main-color, #287CF0);background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._mark-text_13ll3_181{position:absolute;bottom:-2px;transform:translate(-50%,100%);font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;text-overflow:inherit}._simple-color-picker_zcr1r_1,._color-picker-container_zcr1r_3{position:relative;box-sizing:border-box}._color-picker-container_zcr1r_3{padding:.8rem 1.5rem;border:var(--neutral-main-border, 1px solid light-dark(#EAEAEC, #313135));border-radius:.8rem;gap:.8rem}input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}._color-picker-container_zcr1r_3[class~=size48]{padding:1.2rem 1.5rem}._color-picker-container_zcr1r_3[class~=size32]{padding:.4rem 1.1rem}._color-picker-container_zcr1r_3[class~=size24]{padding:0 .7rem}._color-picker-container_zcr1r_3:has(>input:disabled){background-color:var(--neutral-disable-background-color, light-dark(#F4F4F5, #494950))!important;color:var(--neutral-text-disabled-color, light-dark(#A2A2AA, #61616B))!important;pointer-events:none!important}._color-picker-container_zcr1r_3:focus-within{border-color:var(--primary-main-color, #287CF0)}._color-picker-container_zcr1r_3>label:has(>input[type=color]),._simple-color-picker_zcr1r_1>label:has(>input[type=color]){border-radius:.6rem;aspect-ratio:1 / 1;min-height:1.4rem;min-width:1.4rem;width:1em;border:var(--neutral-bolder-border, 1px solid light-dark(#D7D7DB, #494950))}._color-picker-container_zcr1r_3 input[type=color],._simple-color-picker_zcr1r_1 input[type=color]{width:100%;height:100%;visibility:hidden}._color-picker-container_zcr1r_3>label:has(>input[type=number]),._simple-color-picker_zcr1r_1>label:has(>input[type=number]){width:24%;border:inherit;border-left:inherit;border-color:inherit;border-style:solid;border-width:1px;border-top:none;border-right:none;border-bottom:none;min-width:5.4rem;padding-left:.6rem;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._color-picker-container_zcr1r_3 input:not([type=color]),._simple-color-picker_zcr1r_1 input:not([type=color]){flex:1;width:100%;border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._color-picker-container_zcr1r_3._helper-text_zcr1r_211,._simple-color-picker_zcr1r_1._helper-text_zcr1r_211{overflow:visible!important;border-color:var(--helper-text-color, #E14337)!important}._color-picker-container_zcr1r_3._helper-text_zcr1r_211:after,._simple-color-picker_zcr1r_1._helper-text_zcr1r_211:after{content:attr(helper-text);color:var(--helper-text-color, #E14337);position:absolute;left:0;bottom:-.4rem;width:max-content;font-size:1.2rem;line-height:1.6rem;font-family:inherit;transform:translateY(100%)}._icon-library-container_2pbq9_1{padding:0 .8rem;width:400px;height:400px;overflow:hidden auto;gap:.8rem;border-radius:.8rem;background-color:var(--neutral-absolute-background-color);box-shadow:2px 0 16px #0000000a;border:var(--neutral-main-border)}._search-container_2pbq9_25{position:sticky;top:0;z-index:2;overflow:visible;gap:.8rem;padding:.8rem;background-color:var(--neutral-absolute-background-color)}._search-input_2pbq9_45{flex:1;padding:2px .8rem!important;background-color:var(--neutral-main-background-color)}._filter-options_2pbq9_57{position:absolute;bottom:0;right:.4rem;transform:translateY(100%);background-color:var(--neutral-absolute-background-color);border-radius:.8rem;padding:.8rem;border:var(--neutral-main-border);width:10.8rem;gap:2px}._filter-options_2pbq9_57>._option_2pbq9_83{border-radius:.8rem;padding:5px .8rem}._option_2pbq9_83:hover{background-color:var(--neutral-hover-background-color)}._option_2pbq9_83._selected_2pbq9_101{width:100%;background-color:var(--neutral-selected-background-color)}._icon-item_2pbq9_113{gap:.8rem;--gutter: .8rem;padding:.8rem;align-items:center;border-radius:.8rem;cursor:pointer}._icon-item_2pbq9_113:hover{background-color:var(--neutral-hover-background-color)}._icon-item_2pbq9_113._selected_2pbq9_101{background-color:var(--neutral-selected-background-color)}._preview-container_2pbq9_147{position:sticky;bottom:0;z-index:2;background-color:var(--neutral-absolute-background-color);padding:.8rem;gap:.8rem;width:100%;border-top:var(--neutral-main-border)}._chart-block_1xm96_1{padding:2.4rem;border-radius:.8rem}._f-radio-button_1821r_1,._f-checkbox_1821r_3,._f-switch_1821r_5{width:fit-content}._f-radio-button_1821r_1>span,._f-checkbox_1821r_3>span,._f-switch_1821r_5>span{font:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit;font-weight:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit;flex:1}._f-color-picker_1821r_47 input{border:none;outline:none;padding:0;background-color:transparent;font:inherit;color:inherit;font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;text-align:inherit;letter-spacing:inherit;text-overflow:inherit;text-decoration:inherit;font-style:inherit}._f-color-picker_1821r_47>._f-color-opacity_1821r_83{width:24%;border:inherit;border-left:inherit;border-color:inherit;border-style:solid;border-width:1px;border-top:none;border-right:none;border-bottom:none;min-width:5.4rem;padding-left:.6rem}._customer-avatar_1pao8_1{border-radius:50%;width:2.4rem;height:2.4rem;justify-content:center;object-fit:cover;border:2px inset var(--primary-lighter-color, light-dark(#5899f3FF, #0F62D7FF))}._report-name-cell_1pao8_19>div:has(>svg){display:none}._report-name-cell_1pao8_19:hover>div:has(>svg){display:flex}._demo-table_1pao8_35{position:relative}._table-feature_1pao8_43{padding:1.2rem 0;gap:.8rem}._table_1pao8_43{width:100%;flex:1;height:100%;scrollbar-width:thin;overflow:auto!important}div[class~=resize-cell-stick]{position:absolute;top:50%;transform:translateY(-50%);width:.8rem;border-left:2px solid var(--neutral-bolder-background-color, light-dark(#EAEAEC, #242428));border-right:2px solid var(--neutral-bolder-background-color, light-dark(#EAEAEC, #242428));background-color:var(--primary-lighter-color);box-sizing:border-box;border-radius:4px;height:3.2rem;z-index:10;pointer-events:none}._header_1pao8_99:has(>div[class~=resize-cell-stick]){cursor:ew-resize}._table-row_1pao8_107,._header_1pao8_99{overflow:visible;min-width:100%;align-items:stretch;width:max-content;border-bottom:1px solid var(--neutral-main-border-color, light-dark(#EAEAEC, #313135))}._header_1pao8_99{position:sticky;top:0;z-index:3;border-top:1px solid var(--neutral-main-border-color, light-dark(#EAEAEC, #313135));background-color:var(--neutral-lighter-background-color, light-dark(#F4F4F5, #494950))}._table-row_1pao8_107{background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._cell_1pao8_147,._header-cell_1pao8_147{min-height:5.6rem;gap:.8rem;background-color:inherit}._header-cell_1pao8_147{min-height:4rem}._last-cell_1pao8_167{position:sticky;right:0}._table-row_1pao8_107:hover{background-color:light-dark(#ededed,#262a2d)}._table-row_1pao8_107:has(._cell_1pao8_147:first-child input:checked){background-color:light-dark(#dcdcdc,#373b3d)}._header-cell_1pao8_147:first-child:has(input[type=checkbox]),._cell_1pao8_147:first-child:has(input[type=checkbox]){width:4rem}._header-cell_1pao8_147:first-child:has(label+div),._cell_1pao8_147:first-child:has(label+div){width:8rem!important}._header-cell_1pao8_147:first-child,._cell_1pao8_147:first-child{position:sticky;left:0;z-index:2}._header-cell_1pao8_147:first-child:has(input[type=checkbox])+._header-cell_1pao8_147:nth-child(2),._cell_1pao8_147:first-child:has(input[type=checkbox])+._cell_1pao8_147:nth-child(2){position:sticky;left:4rem;z-index:2}._header-cell_1pao8_147:first-child:has(label+div)+._header-cell_1pao8_147:nth-child(2),._cell_1pao8_147:first-child:has(label+div)+._cell_1pao8_147:nth-child(2){left:8rem!important}._header-cell_1pao8_147>._title_1pao8_249,._cell_1pao8_147>._content_1pao8_251{height:100%;width:100%;gap:inherit;flex:1;padding:.8rem 1.6rem}._header-cell_1pao8_147:first-child>._title_1pao8_249,._cell_1pao8_147:first-child>._content_1pao8_251{padding-right:.4rem;justify-content:end}._cell_1pao8_147>._content_1pao8_251{flex-wrap:wrap}._table-row_1pao8_107 ._add-child-icon-btn_1pao8_287{display:none}._table-row_1pao8_107:hover ._cell_1pao8_147:has(._add-child-icon-btn_1pao8_287) p{flex:none!important;max-width:calc(100% - 5.2rem)!important}._table-row_1pao8_107:hover ._add-child-icon-btn_1pao8_287{display:flex!important}._column-action-icon_1pao8_313{font-size:.8rem!important;padding:.6rem!important;border-radius:.4rem;display:none!important;background-color:var(--neutral-absolute-background-color, light-dark(#FFFFFF, #14181b))}._column-sort-icon_1pao8_329>svg{font-size:1.4rem;color:var(--primary-main-color, #287CF0);background-color:var(--primary-background, light-dark(#ECF3FE, #031630));border-radius:50%}._header-cell_1pao8_147:hover,._header-cell_1pao8_147:has(>div[class~=hidden-overlay]){background-color:light-dark(#ededed,#262a2d)}._column-action-sort-icon_1pao8_351{display:none!important}._header-cell_1pao8_147:hover ._column-action-icon_1pao8_313,._header-cell_1pao8_147:hover ._column-action-sort-icon_1pao8_351,._header-cell_1pao8_147:has(>div[class~=hidden-overlay]) ._column-action-icon_1pao8_313{display:flex!important}._add-child-table-row_1pao8_371{position:sticky;left:0;width:100%;height:4.8rem;gap:1.6rem;align-items:start;border-bottom:1px solid var(--neutral-main-border-color, light-dark(#EAEAEC, #313135))}._add-child-table-row_1pao8_371 button{gap:4px;color:var(--neutral-text-placeholder-color, #878792);padding:1rem 1.6rem;margin-left:8rem;margin-top:.2rem}._add-child-table-row_1pao8_371 button:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}._table-img_1pao8_415{max-width:100%}._table-img_1pao8_415:has(>img){position:relative;height:4rem;width:6rem;overflow:hidden;box-shadow:var(--shadow-card, 0px 3px 4px 0px rgba(0, 0, 0, .03))}._table-img_1pao8_415:hover>div{text-decoration:underline}._table-img_1pao8_415>img{height:100%;width:100%;border-radius:.4rem;object-fit:cover;transition:scale ease-in-out .2s}._table-img_1pao8_415:hover>img{scale:1.1}._table-img_1pao8_415[img-length]:after{content:attr(img-length);display:flex;align-items:center;justify-content:center;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#0006;color:#fff;font:600 1.4rem Inter;border-radius:.4rem}._dropdown-select-btn_1pao8_503{width:20rem;gap:.8rem;padding:.4rem 1.2rem;border:1px solid var(--neutral-main-border-color, light-dark(#EAEAEC, #313135));border-radius:.8rem}._dropdown-select-btn_1pao8_503:focus{border-color:var(--primary-main-color, #287CF0)}._dropdown-select-btn_1pao8_503:disabled{cursor:context-menu;border:none;color:var(--neutral-text-placeholder-color, #878792);background-color:var(--neutral-lighter-background-color, light-dark(#F4F4F5, #494950))}._dropdown-select-btn_1pao8_503:disabled *{cursor:context-menu}._dropdown-select-btn_1pao8_503:disabled>div:has(>svg):last-child{display:none}._key-option-tile_1pao8_557{gap:.8rem;height:3.2rem;padding:0 .8rem;border-radius:.8rem}._input-action-title_1pao8_571{border-color:transparent!important;flex:1}._key-option-tile_1pao8_557:hover ._input-action-title_1pao8_571,._input-action-title_1pao8_571:focus{border-color:1px solid var(--neutral-main-border-color, light-dark(#EAEAEC, #313135)-color)!important}._button-filter_1pao8_591{border-radius:.8rem;border:1px solid var(--neutral-main-border-color, light-dark(#EAEAEC, #313135));height:3.2rem;padding:0 1.2rem;gap:.8rem;width:100%}._button-filter_1pao8_591:focus{border-color:var(--primary-main-color, #287CF0)}._button-filter_1pao8_591:hover{background-color:var(--neutral-hover-background-color, light-dark(#18181B0A, #FFFFFF0A))}div:has(._selected-item-options_1pao8_625){position:relative}._selected-item-options_1pao8_625{position:absolute;width:calc(100% - 3.2rem);max-width:972px;height:4.2rem;padding:0 2.4rem;border-radius:.8rem;background-color:var(--neutral-main-reverse-background-color, light-dark(#242428, #EFEFF0));bottom:2.4rem;left:50%;transform:translate(-50%)}._selected-item-total_1pao8_659{gap:4px;height:2.4rem;padding:0 .8rem;border-radius:.8rem;border:1px solid var(--neutral-lighter-reverse-border-color, #494950)}._selected-item-total_1pao8_659 *{color:var(--neutral-text-body-reverse-color, #EAEAEC)!important}._selected-item-actions_1pao8_683{flex:1;justify-content:end;gap:1.2rem}._html-value-cell_1pao8_695 *{text-align:justify;font-size:inherit;line-height:inherit;color:inherit;margin:0;padding:0;width:100%}`)),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
"use strict";var Or=Object.defineProperty;var Mr=(o,a,n)=>a in o?Or(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n;var M=(o,a,n)=>Mr(o,typeof a!="symbol"?a+"":a,n);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const React2=require("react"),ReactDOM=require("react-dom");function _interopNamespaceDefault(o){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(o){for(const n in o)if(n!=="default"){const s=Object.getOwnPropertyDescriptor(o,n);Object.defineProperty(a,n,s.get?s:{enumerable:!0,get:()=>o[n]})}}return a.default=o,Object.freeze(a)}function _mergeNamespaces(o,a){for(var n=0;n<a.length;n++){const s=a[n];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in o)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(o,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}const React2__namespace=_interopNamespaceDefault(React2);function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var o=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(s,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var d in l)d!=="key"&&(c[d]=l[d])}else c=l;return l=c.ref,{$$typeof:o,type:s,key:u,ref:l!==void 0?l:null,props:c}}return reactJsxRuntime_production.Fragment=a,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var reactJsxRuntime_development={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_development;function requireReactJsxRuntime_development(){return hasRequiredReactJsxRuntime_development||(hasRequiredReactJsxRuntime_development=1,process.env.NODE_ENV!=="production"&&function(){function o(ae){if(ae==null)return null;if(typeof ae=="function")return ae.$$typeof===q?null:ae.displayName||ae.name||null;if(typeof ae=="string")return ae;switch(ae){case x:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case j:return"SuspenseList";case H:return"Activity"}if(typeof ae=="object")switch(typeof ae.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),ae.$$typeof){case w:return"Portal";case C:return(ae.displayName||"Context")+".Provider";case T:return(ae._context.displayName||"Context")+".Consumer";case A:var pe=ae.render;return ae=ae.displayName,ae||(ae=pe.displayName||pe.name||"",ae=ae!==""?"ForwardRef("+ae+")":"ForwardRef"),ae;case D:return pe=ae.displayName||null,pe!==null?pe:o(ae.type)||"Memo";case O:pe=ae._payload,ae=ae._init;try{return o(ae(pe))}catch{}}return null}function a(ae){return""+ae}function n(ae){try{a(ae);var pe=!1}catch{pe=!0}if(pe){pe=console;var ie=pe.error,se=typeof Symbol=="function"&&Symbol.toStringTag&&ae[Symbol.toStringTag]||ae.constructor.name||"Object";return ie.call(pe,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",se),a(ae)}}function s(ae){if(ae===x)return"<>";if(typeof ae=="object"&&ae!==null&&ae.$$typeof===O)return"<...>";try{var pe=o(ae);return pe?"<"+pe+">":"<...>"}catch{return"<...>"}}function l(){var ae=Y.A;return ae===null?null:ae.getOwner()}function c(){return Error("react-stack-top-frame")}function u(ae){if(te.call(ae,"key")){var pe=Object.getOwnPropertyDescriptor(ae,"key").get;if(pe&&pe.isReactWarning)return!1}return ae.key!==void 0}function d(ae,pe){function ie(){ne||(ne=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",pe))}ie.isReactWarning=!0,Object.defineProperty(ae,"key",{get:ie,configurable:!0})}function h(){var ae=o(this.type);return ce[ae]||(ce[ae]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),ae=this.props.ref,ae!==void 0?ae:null}function f(ae,pe,ie,se,de,le,ge,Re){return ie=le.ref,ae={$$typeof:b,type:ae,key:pe,props:le,_owner:de},(ie!==void 0?ie:null)!==null?Object.defineProperty(ae,"ref",{enumerable:!1,get:h}):Object.defineProperty(ae,"ref",{enumerable:!1,value:null}),ae._store={},Object.defineProperty(ae._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(ae,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(ae,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ge}),Object.defineProperty(ae,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Re}),Object.freeze&&(Object.freeze(ae.props),Object.freeze(ae)),ae}function p(ae,pe,ie,se,de,le,ge,Re){var we=pe.children;if(we!==void 0)if(se)if(ee(we)){for(se=0;se<we.length;se++)g(we[se]);Object.freeze&&Object.freeze(we)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g(we);if(te.call(pe,"key")){we=o(ae);var Se=Object.keys(pe).filter(function(ke){return ke!=="key"});se=0<Se.length?"{key: someKey, "+Se.join(": ..., ")+": ...}":"{key: someKey}",me[we+se]||(Se=0<Se.length?"{"+Se.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,se,we,Se,we),me[we+se]=!0)}if(we=null,ie!==void 0&&(n(ie),we=""+ie),u(pe)&&(n(pe.key),we=""+pe.key),"key"in pe){ie={};for(var xe in pe)xe!=="key"&&(ie[xe]=pe[xe])}else ie=pe;return we&&d(ie,typeof ae=="function"?ae.displayName||ae.name||"Unknown":ae),f(ae,we,le,de,l(),ie,ge,Re)}function g(ae){typeof ae=="object"&&ae!==null&&ae.$$typeof===b&&ae._store&&(ae._store.validated=1)}var v=React2,b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),q=Symbol.for("react.client.reference"),Y=v.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=Object.prototype.hasOwnProperty,ee=Array.isArray,re=console.createTask?console.createTask:function(){return null};v={"react-stack-bottom-frame":function(ae){return ae()}};var ne,ce={},ve=v["react-stack-bottom-frame"].bind(v,c)(),be=re(s(c)),me={};reactJsxRuntime_development.Fragment=x,reactJsxRuntime_development.jsx=function(ae,pe,ie,se,de){var le=1e4>Y.recentlyCreatedOwnerStacks++;return p(ae,pe,ie,!1,se,de,le?Error("react-stack-top-frame"):ve,le?re(s(ae)):be)},reactJsxRuntime_development.jsxs=function(ae,pe,ie,se,de){var le=1e4>Y.recentlyCreatedOwnerStacks++;return p(ae,pe,ie,!0,se,de,le?Error("react-stack-top-frame"):ve,le?re(s(ae)):be)}}()),reactJsxRuntime_development}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,process.env.NODE_ENV==="production"?jsxRuntime.exports=requireReactJsxRuntime_production():jsxRuntime.exports=requireReactJsxRuntime_development()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime();const styles$q={"checkbox-container":"_checkbox-container_14721_1"},Checkbox=o=>{const[a,n]=React2.useState(o.value),s=React2.useRef(null),l=React2.useMemo(()=>{let c={width:o.size??"2.4rem",height:o.size??"2.4rem"};return o.style&&(delete o.style.width,delete o.style.minWidth,delete o.style.maxWidth,delete o.style.height,delete o.style.minHeight,delete o.style.maxHeight,c={...o.style,...c}),c},[o.size,o.style]);return React2.useEffect(()=>{o.value!==a&&n(o.value)},[o.value]),jsxRuntimeExports.jsxs("label",{id:o.id,className:`${styles$q["checkbox-container"]} row ${o.className??""}`,style:l,"is-null-value":`${o.value===null}`,children:[jsxRuntimeExports.jsx("input",{name:o.name,ref:s,type:"checkbox",checked:!!a,hidden:!0,disabled:o.disabled,onChange:c=>{n(c.target.checked),o.onChange&&o.onChange(c.target.checked,c.target)}}),jsxRuntimeExports.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{"--check-color":o.checkColor},children:[jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.79199 9.95298C4.79199 9.69148 5.00398 9.47949 5.26548 9.47949H14.7352C14.9967 9.47949 15.2087 9.69148 15.2087 9.95298C15.2087 10.2145 14.9967 10.4265 14.7352 10.4265H5.26548C5.00398 10.4265 4.79199 10.2145 4.79199 9.95298Z"}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.07 6.49317C15.2549 6.67808 15.2549 6.97787 15.07 7.16278L8.91467 13.3181C8.72977 13.503 8.42997 13.503 8.24507 13.3181L4.93067 10.0037C4.74577 9.81878 4.74577 9.51899 4.93067 9.33408C5.11558 9.14917 5.41537 9.14917 5.60028 9.33408L8.57987 12.3137L14.4004 6.49317C14.5853 6.30827 14.8851 6.30827 15.07 6.49317Z"})]})]})},focus$1="_focus_l3ug4_29",disabled$3="_disabled_l3ug4_37",selected$2="_selected_l3ug4_237",styles$p={"select1-container":"_select1-container_l3ug4_1","select1-simple-style":"_select1-simple-style_l3ug4_1",focus:focus$1,disabled:disabled$3,"helper-text":"_helper-text_l3ug4_49","select1-popup":"_select1-popup_l3ug4_117","search-options":"_search-options_l3ug4_147","select-tile":"_select-tile_l3ug4_187",selected:selected$2,"see-more":"_see-more_l3ug4_261"},warn$1=(o,a,n,s)=>{var c,u,d,h;const l=[n,{code:a,...s||{}}];if((u=(c=o==null?void 0:o.services)==null?void 0:c.logger)!=null&&u.forward)return o.services.logger.forward(l,"warn","react-i18next::",!0);isString$6(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(h=(d=o==null?void 0:o.services)==null?void 0:d.logger)!=null&&h.warn?o.services.logger.warn(...l):console!=null&&console.warn&&console.warn(...l)},alreadyWarned$1={},warnOnce=(o,a,n,s)=>{isString$6(n)&&alreadyWarned$1[n]||(isString$6(n)&&(alreadyWarned$1[n]=new Date),warn$1(o,a,n,s))},loadedClb=(o,a)=>()=>{if(o.isInitialized)a();else{const n=()=>{setTimeout(()=>{o.off("initialized",n)},0),a()};o.on("initialized",n)}},loadNamespaces=(o,a,n)=>{o.loadNamespaces(a,loadedClb(o,n))},loadLanguages=(o,a,n,s)=>{if(isString$6(n)&&(n=[n]),o.options.preload&&o.options.preload.indexOf(a)>-1)return loadNamespaces(o,n,s);n.forEach(l=>{o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),o.loadLanguages(a,loadedClb(o,s))},hasLoadedNamespace=(o,a,n={})=>!a.languages||!a.languages.length?(warnOnce(a,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:a.languages}),!0):a.hasLoadedNamespace(o,{lng:n.lng,precheck:(s,l)=>{var c;if(((c=n.bindI18n)==null?void 0:c.indexOf("languageChanging"))>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!l(s.isLanguageChangingTo,o))return!1}}),getDisplayName=o=>o.displayName||o.name||(isString$6(o)&&o.length>0?o:"Unknown"),isString$6=o=>typeof o=="string",isObject$8=o=>typeof o=="object"&&o!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=o=>htmlEntities[o],unescape$2=o=>o.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions$2={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$2};const setDefaults=(o={})=>{defaultOptions$2={...defaultOptions$2,...o}},getDefaults$1=()=>defaultOptions$2;let i18nInstance;const setI18n=o=>{i18nInstance=o},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(o){setDefaults(o.options.react),setI18n(o)}},I18nContext=React2.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(a){a.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(o,a)=>{const n=React2.useRef();return React2.useEffect(()=>{n.current=o},[o,a]),n.current},alwaysNewT=(o,a,n,s)=>o.getFixedT(a,n,s),useMemoizedT=(o,a,n,s)=>React2.useCallback(alwaysNewT(o,a,n,s),[o,a,n,s]),useTranslation=(o,a={})=>{var A,R,j,D;const{i18n:n}=a,{i18n:s,defaultNS:l}=React2.useContext(I18nContext)||{},c=n||s||getI18n();if(c&&!c.reportNamespaces&&(c.reportNamespaces=new ReportNamespaces),!c){warnOnce(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const O=(q,Y)=>isString$6(Y)?Y:isObject$8(Y)&&isString$6(Y.defaultValue)?Y.defaultValue:Array.isArray(q)?q[q.length-1]:q,H=[O,{},!1];return H.t=O,H.i18n={},H.ready=!1,H}(A=c.options.react)!=null&&A.wait&&warnOnce(c,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...getDefaults$1(),...c.options.react,...a},{useSuspense:d,keyPrefix:h}=u;let f=l||((R=c.options)==null?void 0:R.defaultNS);f=isString$6(f)?[f]:f||["translation"],(D=(j=c.reportNamespaces).addUsedNamespaces)==null||D.call(j,f);const p=(c.isInitialized||c.initializedStoreOnce)&&f.every(O=>hasLoadedNamespace(O,c,u)),g=useMemoizedT(c,a.lng||null,u.nsMode==="fallback"?f:f[0],h),v=()=>g,b=()=>alwaysNewT(c,a.lng||null,u.nsMode==="fallback"?f:f[0],h),[w,x]=React2.useState(v);let S=f.join();a.lng&&(S=`${a.lng}${S}`);const E=usePrevious(S),T=React2.useRef(!0);React2.useEffect(()=>{const{bindI18n:O,bindI18nStore:H}=u;T.current=!0,!p&&!d&&(a.lng?loadLanguages(c,a.lng,f,()=>{T.current&&x(b)}):loadNamespaces(c,f,()=>{T.current&&x(b)})),p&&E&&E!==S&&T.current&&x(b);const q=()=>{T.current&&x(b)};return O&&(c==null||c.on(O,q)),H&&(c==null||c.store.on(H,q)),()=>{T.current=!1,c&&(O==null||O.split(" ").forEach(Y=>c.off(Y,q))),H&&c&&H.split(" ").forEach(Y=>c.store.off(Y,q))}},[c,S]),React2.useEffect(()=>{T.current&&p&&x(v)},[c,h,p]);const C=[w,c,p];if(C.t=w,C.i18n=c,C.ready=p,p||!p&&!d)return C;throw new Promise(O=>{a.lng?loadLanguages(c,a.lng,f,()=>O()):loadNamespaces(c,f,()=>O())})},withTranslation=(o,a={})=>function(s){function l({forwardedRef:u,...d}){const[h,f,p]=useTranslation(o,{...d,keyPrefix:a.keyPrefix}),g={...d,t:h,i18n:f,tReady:p};return a.withRef&&u?g.ref=u:!a.withRef&&u&&(g.forwardedRef=u),React2.createElement(s,g)}l.displayName=`withI18nextTranslation(${getDisplayName(s)})`,l.WrappedComponent=s;const c=(u,d)=>React2.createElement(l,Object.assign({},u,{forwardedRef:d}));return a.withRef?React2.forwardRef(c):l},clickable="_clickable_1p4zy_67",styles$o={"wini-icon":"_wini-icon_1p4zy_1",clickable,"tooltip-container":"_tooltip-container_1p4zy_201","tooltip-message":"_tooltip-message_1p4zy_215"};let Text$2=class extends React2.Component{render(){let a=this.props.style??{};return this.props.maxLine&&(a={...a,"--max-line":this.props.maxLine}),this.props.html?jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:this.props.html},id:this.props.id,onMouseOver:this.props.onHover,onClick:this.props.onClick,className:`comp-text-innerhtml ${this.props.className??""}`,style:a}):jsxRuntimeExports.jsx("div",{id:this.props.id,onMouseOver:this.props.onHover,onClick:this.props.onClick,className:`comp-text ${this.props.onClick?"type-button":""} ${this.props.className??""}`,style:a,children:this.props.children})}};function Winicon({id:o,src:a,link:n,className:s,style:l,size:c,color:u,alt:d,onClick:h,tooltip:f}){const p=React2.useRef(null),[g,v]=React2.useState(),[b,w]=React2.useState(!1),x="https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/",S=React2.useMemo(()=>f?{"tooltip-value":f,onMouseOver:()=>{w(!0)},onMouseOut:()=>{w(!1)}}:{},[f]),E=async T=>{const C=T.replace(x,""),A=await caches.open(C),R=await A.match(T);if(R)return R;const j=await fetch(T);return j.ok&&await A.put(T,j.clone()),j};return React2.useEffect(()=>{a?E(x+a+".svg").then(async T=>{v(await T.text())}).catch(()=>{v(d??"error")}):n&&fetch(n).then(async T=>{T.ok&&v(await T.text())}).catch(()=>{v(d??"error")})},[a,n]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{ref:p,id:o,onClick:h,className:`${styles$o["wini-icon"]} ${g?"":"skeleton-loading"} ${h?styles$o.clickable:""} ${s??""} ${a?`${a.split("/")[0]}-icon`:""}${n?" link-icon":""}`,style:l?{...l,fontSize:c,color:u}:{fontSize:c,color:u},dangerouslySetInnerHTML:{__html:g??""},...S}),f&&b&&ReactDOM.createPortal(showTooltipElement({element:p.current,tooltip:f}),document.body)]})}const showTooltipElement=({element:o,tooltip:a})=>{if(!o)return null;const n=o.getBoundingClientRect();let s=a.position??"bottom";switch(document.body.offsetHeight-n.bottom<100&&s==="bottom"?s="top":n.top<100&&s==="top"&&(s="bottom"),document.body.offsetWidth-n.right<100&&s==="right"?s="left":n.left<100&&s==="left"&&(s="right"),s){case"top":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.x<0?(l.style.left=n.x+n.width/2+"px",l.style.transform="translateX(-1.8rem)",l.style.alignItems="start"):c.right>document.body.offsetWidth&&(l.style.left="unset",l.style.right=document.body.offsetWidth-n.right-n.width/2+"px",l.style.transform="translateX(-1.4rem)",l.style.alignItems="end")}},className:`col ${styles$o["tooltip-container"]}`,style:{alignItems:"center",bottom:document.body.offsetHeight-n.top-4,left:n.left+n.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$o["tooltip-message"]}`,maxLine:2,children:a.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderTop:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})})]});case"bottom":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.x<0?(l.style.left=n.x+n.width/2+"px",l.style.transform="translateX(-1.8rem)",l.style.alignItems="start"):c.right>document.body.offsetWidth&&(l.style.left="unset",l.style.right=document.body.offsetWidth-n.right-n.width/2+"px",l.style.transform="translateX(-1.4rem)",l.style.alignItems="end")}},className:`col ${styles$o["tooltip-container"]}`,style:{alignItems:"center",top:n.bottom+4,left:n.left+n.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderBottom:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$o["tooltip-message"]}`,maxLine:2,children:a.message})]});case"left":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.y<0?(l.style.top=n.y+n.height/2+"px",l.style.transform="translateY(-1.8rem)",l.style.alignItems="start"):c.bottom>document.body.offsetHeight&&(l.style.top="unset",l.style.bottom=document.body.offsetHeight-n.bottom-n.height/2+"px",l.style.transform="translateY(-1.4rem)",l.style.alignItems="end")}},className:`row ${styles$o["tooltip-container"]}`,style:{top:n.top+n.height/2,right:document.body.offsetWidth-n.left-4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$o["tooltip-message"]}`,maxLine:2,children:a.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderLeft:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})})]});case"right":return jsxRuntimeExports.jsxs("div",{ref:l=>{if(l){const c=l.getBoundingClientRect();c.y<0?(l.style.top=n.y+n.height/2+"px",l.style.transform="translateY(-1.8rem)",l.style.alignItems="start"):c.bottom>document.body.offsetHeight&&(l.style.top="unset",l.style.bottom=document.body.offsetHeight-n.bottom-n.height/2+"px",l.style.transform="translateY(-1.4rem)",l.style.alignItems="end")}},className:`row ${styles$o["tooltip-container"]}`,style:{top:n.top+n.height/2,left:n.right+4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderRight:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$o["tooltip-message"]}`,maxLine:2,children:a.message})]});default:return jsxRuntimeExports.jsx("div",{})}},styles$n={"simple-text-field":"_simple-text-field_1i10k_1","text-field-container":"_text-field-container_1i10k_3","helper-text":"_helper-text_1i10k_125"};class TextField extends React2.Component{constructor(){super(...arguments);M(this,"containerRef",React2.createRef());M(this,"getInput",()=>{var n;return(n=this.containerRef.current)==null?void 0:n.querySelector("input")})}render(){var s;const n=this.props.style??{};return jsxRuntimeExports.jsxs("label",{id:this.props.id,ref:this.containerRef,className:`${this.props.simpleStyle?styles$n["simple-text-field"]:styles$n["text-field-container"]} row ${this.props.className??(this.props.simpleStyle?"":"body-3")} ${(s=this.props.helperText)!=null&&s.length?styles$n["helper-text"]:""}`,"helper-text":this.props.helperText,style:{"--helper-text-color":this.props.helperTextColor??"#e14337",...n},children:[this.props.prefix,this.props.register?jsxRuntimeExports.jsx("input",{name:this.props.name,...this.props.register,autoComplete:this.props.autoComplete,autoFocus:this.props.autoFocus,maxLength:this.props.maxLength,type:this.props.type??"text",placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onFocus:this.props.onFocus,onKeyDown:this.props.onKeyDown??(this.props.onComplete?l=>{if(this.props.onComplete)switch(l.key.toLowerCase()){case"enter":this.props.onComplete(l);break}}:void 0)}):jsxRuntimeExports.jsx("input",{autoComplete:this.props.autoComplete,autoFocus:this.props.autoFocus,maxLength:this.props.maxLength,name:this.props.name,type:this.props.type??"text",defaultValue:this.props.defaultValue,value:this.props.value,placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,onKeyDown:this.props.onKeyDown??(this.props.onComplete?l=>{if(this.props.onComplete)switch(l.key.toLowerCase()){case"enter":this.props.onComplete(l);break}}:void 0)}),this.props.suffix]})}}const Select1=React2.forwardRef(({style:o={},...a},n)=>{var b;const s=React2.useRef(null),l=React2.useRef(null),[c,u]=React2.useState([]),[d,h]=React2.useState(),f=React2.useMemo(()=>c.find(w=>w.id===d),[c.length,d]),[p,g]=React2.useState(!1);React2.useEffect(()=>{h(a.value)},[a.value]),React2.useEffect(()=>{u(a.options??[])},[a.options]);const v=()=>{if(p)return null;const w=s.current.getBoundingClientRect();let x={width:w.width};w.bottom+240>=document.body.offsetHeight?x.bottom=`calc(100dvh - ${w.y}px + 2px)`:x.top=w.bottom+2,l.current=x,g(!0)};return React2.useImperativeHandle(n,()=>({element:s.current,isOpen:p,setIsOpen:g,options:c,setOptions:u,onOpenOptions:v}),[p,c,s]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{id:a.id,ref:s,className:`${a.simpleStyle?styles$p["select1-simple-style"]:styles$p["select1-container"]} ${p?styles$p.focus:""} row ${(b=a.helperText)!=null&&b.length?styles$p["helper-text"]:""} ${a.disabled?styles$p.disabled:""} ${a.className??(a.simpleStyle?"":"body-3")}`,"helper-text":a.helperText,style:{"--helper-text-color":a.helperTextColor??"#e14337",...o},onClick:a.disabled?void 0:v,children:[(f==null?void 0:f.prefix)??a.prefix,typeof(f==null?void 0:f.name)=="object"?f.name:jsxRuntimeExports.jsx("span",{style:{flex:1,textOverflow:"ellipsis",overflow:"hidden",opacity:f?void 0:.6},children:(f==null?void 0:f.name)??a.placeholder}),a.suffix??jsxRuntimeExports.jsx("div",{ref:w=>{w!=null&&w.parentElement&&w.parentElement.getBoundingClientRect().width<88&&(w.style.display="none")},className:"row",children:jsxRuntimeExports.jsx(Winicon,{src:`fill/arrows/${p?"up":"down"}-arrow`,size:12})})]}),p&&(a.customOptionsList??jsxRuntimeExports.jsx(OptionDropList$1,{onClose:()=>{setTimeout(()=>{g(!1)},150)},getOptions:a.getOptions??(async({search:w})=>{if(w!=null&&w.length){const x=c.filter(S=>w.toLowerCase().includes(`${S.id}`.toLowerCase())||`${S.id}`.toLowerCase().includes(w.toLowerCase())||w.toLowerCase().includes(`${S.name}`.toLowerCase())||`${S.name}`.toLowerCase().includes(w.toLowerCase()));return{data:x,totalCount:x.length}}return{data:c,totalCount:c.length}}),selected:d,style:l.current,onSelect:w=>{c.every(x=>x.id!==w.id)&&u([w]),h(w.id),a.onChange&&a.onChange(w),g(!1)}}))]})}),OptionDropList$1=o=>{const a=React2.useRef(null),n=React2.useRef(null),s=React2.useRef(null),[l,c]=React2.useState({data:[],totalCount:void 0}),{t:u}=useTranslation(),d=async h=>{var p,g;const f=await o.getOptions({length:h??0,search:((g=(p=n.current)==null?void 0:p.getInput())==null?void 0:g.value)??""});s.current===null&&(s.current=f.totalCount),c(h?{data:[...l.data,...f.data],totalCount:f.totalCount}:f)};return React2.useEffect(()=>{d()},[]),React2.useEffect(()=>{if(a.current){const h=f=>{(f.target===a.current||!a.current.contains(f.target))&&o.onClose()};return window.document.body.addEventListener("mousedown",h),()=>{window.document.body.removeEventListener("mousedown",h)}}},[a.current]),jsxRuntimeExports.jsx("div",{ref:a,onScroll:h=>{let f=h.target;Math.round(f.offsetHeight+f.scrollTop)>=f.scrollHeight-1&&l.totalCount&&l.data.length<l.totalCount&&d(l.data.length)},className:`col ${styles$p["select1-popup"]}`,style:o.style,children:l.totalCount===0&&!s.current?jsxRuntimeExports.jsxs("div",{className:"col",style:{alignItems:"center"},children:[jsxRuntimeExports.jsx(Winicon,{src:"color/files/archive-file",size:28}),jsxRuntimeExports.jsx("h6",{className:"heading-7",style:{margin:"0.8rem"},children:u("noResultFound")})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s.current&&s.current>10&&jsxRuntimeExports.jsx("div",{className:`col ${styles$p["search-options"]}`,children:jsxRuntimeExports.jsx(TextField,{ref:n,className:"body-3 size32",placeholder:u("search"),prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/development/zoom",size:"1.4rem"}),onChange:h=>{h.target.value.trim().length%2===0&&d()},onComplete:h=>{h.target.blur(),d()}})}),l.totalCount===0?jsxRuntimeExports.jsxs("div",{className:"col",style:{alignItems:"center"},children:[jsxRuntimeExports.jsx(Winicon,{src:"color/files/archive-file",size:28}),jsxRuntimeExports.jsx("h6",{className:"heading-7",style:{margin:"0.8rem"},children:u("noResultFound")})]}):l.data.filter(h=>!h.parentId).map((h,f)=>jsxRuntimeExports.jsx(OptionsItemTile$1,{item:h,selected:h.id===o.selected,children:l.data.filter(p=>p.parentId===h.id),onClick:o.onSelect,getOptions:p=>{var g,v,b;return(b=o.getOptions)==null?void 0:b.call(o,{...p,search:((v=(g=n.current)==null?void 0:g.getInput())==null?void 0:v.value)??""})}},h.id+"-"+f))]})})};function OptionsItemTile$1({item:o,children:a,selected:n,onClick:s,getOptions:l}){const[c,u]=React2.useState(!1),[d,h]=React2.useState({data:[],totalCount:0}),{t:f}=useTranslation();return React2.useEffect(()=>{a&&h({data:a,totalCount:a.length})},[a]),React2.useEffect(()=>{c&&!d.totalCount&&(l==null||l({length:0,parentId:o.id}).then(p=>h(p)))},[c]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",className:`row label-4 ${styles$p["select-tile"]} ${o.disabled?styles$p.disabled:""} ${n?styles$p.selected:""}`,onClick:()=>{o.totalChild?u(!c):s(o)},children:typeof(o==null?void 0:o.name)=="object"?o.name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[o.totalChild!==void 0&&jsxRuntimeExports.jsx(Winicon,{src:`fill/arrows/triangle-${c?"down":"right"}`,size:12}),o.prefix,jsxRuntimeExports.jsx("span",{children:o.name})]})}),c&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[d.data.map((p,g)=>jsxRuntimeExports.jsx("button",{type:"button",style:{paddingLeft:"calc(max(0.8rem, 5px) + max(0.8rem, 5px) + 16px)"},className:`row label-4 ${styles$p["select-tile"]} ${p.disabled?styles$p.disabled:""} ${n?styles$p.selected:""}`,onClick:()=>s(p),children:typeof(p==null?void 0:p.name)=="object"?p.name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[p.prefix,jsxRuntimeExports.jsx("span",{children:p.name})]})},p.id+"-"+g)),d.data.length<d.totalCount&&jsxRuntimeExports.jsx("div",{className:`button-text-5 ${styles$p["see-more"]}`,onClick:()=>{l==null||l({length:d.data.length,parentId:o.id}).then(p=>h(p))},children:f("seemore")})]})]})}const slider="_slider_1819y_41",styles$m={"switch-container":"_switch-container_1819y_1",slider},Switch=o=>{const[a,n]=React2.useState(o.value),s=React2.useRef(null),l=React2.useMemo(()=>{let c={"--size":o.size?typeof o.size=="number"?`${o.size}px`:o.size:"2rem"};o.offBackground&&(c["--off-bg"]=o.offBackground),o.onBackground&&(c["--on-bg"]=o.onBackground),o.dotColor&&(c["--dot-color"]=o.dotColor);let u={height:o.size??"2rem",width:`calc(${o.size?typeof o.size=="number"?`${o.size}px`:o.size:"2rem"} * 9 / 5)`,...c};return o.style&&(delete o.style.width,delete o.style.minWidth,delete o.style.maxWidth,delete o.style.height,delete o.style.minHeight,delete o.style.maxHeight,u={...o.style,...u}),u},[o.size,o.style,o.offBackground,o.onBackground,o.dotColor]);return React2.useEffect(()=>{o.value!==a&&n(o.value)},[o.value]),jsxRuntimeExports.jsxs("label",{id:o.id,className:`${styles$m["switch-container"]} row ${o.className??""}`,style:l,children:[jsxRuntimeExports.jsx("input",{ref:s,type:"checkbox",checked:!!a,hidden:!0,name:o.name,disabled:o.disabled,onChange:c=>{n(c.target.checked),o.onChange&&o.onChange(c.target.checked,c.target)}}),jsxRuntimeExports.jsx("span",{className:styles$m.slider})]})},showPopup=o=>{var a,n;(n=(a=o.ref)==null?void 0:a.current)==null||n.onOpen({heading:o.heading,content:o.content,body:o.body,footer:o.footer,clickOverlayClosePopup:o.clickOverlayClosePopup,style:o.style,className:o.className,hideOverlay:o.hideOverlay})},closePopup=o=>{o.current.onClose()};class Popup extends React2.Component{constructor(n){super(n);M(this,"state",{open:!1})}onOpen(n){this.setState({open:!0,...n})}onClose(){this.setState({open:!1})}render(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.open&&jsxRuntimeExports.jsx(PopupOverlay,{className:this.state.hideOverlay?"hidden-overlay":"",onClose:this.state.hideOverlay||this.state.clickOverlayClosePopup?()=>{this.onClose()}:void 0,children:this.state.content??jsxRuntimeExports.jsxs("div",{className:`popup-container col ${this.state.className??""}`,onClick:n=>n.stopPropagation(),style:this.state.style,children:[this.state.heading,this.state.body,this.state.footer]})})})}}function PopupOverlay({children:o,onClose:a,className:n,style:s,onOpen:l}){const c=React2.useRef(null);return React2.useEffect(()=>{if(c.current&&a){const u=d=>{(d.target===c.current||!c.current.contains(d.target))&&a(d)};return window.document.body.addEventListener("mousedown",u),()=>{window.document.body.removeEventListener("mousedown",u)}}},[c.current]),React2.useEffect(()=>{c.current&&l&&l(c.current)},[c.current,l]),React2.useEffect(()=>{if(c.current&&c.current.firstChild&&!l){const u=c.current.firstChild;if(!u.classList.contains("right-drawer")&&!u.classList.contains("left-drawer")){const d=setTimeout(()=>{const h=u.getBoundingClientRect();h.x<0?(u.style.left="0px",u.style.right="unset"):h.right>document.body.offsetWidth&&(u.style.right="0px",u.style.left="unset"),h.y<0?(u.style.top="0px",u.style.bottom="unset"):h.bottom>document.body.offsetHeight&&(u.style.bottom="0px",u.style.top="unset")},300);return()=>{clearTimeout(d)}}}},[c]),jsxRuntimeExports.jsx("div",{ref:c,className:`popup-overlay ${n??""}`,style:s,children:o})}const styles$l={"dialog-overlay":"_dialog-overlay_ywiq6_1","dialog-container":"_dialog-container_ywiq6_27","dialog-body":"_dialog-body_ywiq6_59","dialog-status":"_dialog-status_ywiq6_87","dialog-footer":"_dialog-footer_ywiq6_103","dialog-action":"_dialog-action_ywiq6_115","dialog-submit":"_dialog-submit_ywiq6_139"};var DialogAlignment=(o=>(o.start="start",o.center="center",o.end="end",o))(DialogAlignment||{});class TDialog extends React2.Component{constructor(a){super(a),this.state={open:!1,title:"",status:ComponentStatus.INFOR,content:"",onSubmit:()=>{}}}showDialogNoti(a){this.setState({open:!0,...a})}closeDialog(){this.setState({open:!1})}render(){const{t:a}=this.props;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:this.state.open&&ReactDOM.createPortal(jsxRuntimeExports.jsx("div",{className:styles$l["dialog-overlay"],children:jsxRuntimeExports.jsxs("div",{className:`${styles$l["dialog-container"]} col`,style:{width:"41.4rem",alignItems:this.state.alignment},"dialog-type":this.state.status,onClick:n=>n.stopPropagation(),children:[jsxRuntimeExports.jsxs("div",{className:`${styles$l["dialog-body"]} col`,style:{alignItems:"inherit"},children:[jsxRuntimeExports.jsx("div",{className:`${styles$l["dialog-status"]} row`,children:getStatusIcon(this.state.status)}),jsxRuntimeExports.jsxs("div",{className:"col",children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-6",style:{textAlign:this.state.alignment==="center"?"center":"start"},children:this.state.title}),jsxRuntimeExports.jsx(Text$2,{className:"body-3",style:{textAlign:this.state.alignment==="center"?"center":"start"},children:this.state.content})]})]}),jsxRuntimeExports.jsxs("div",{className:`${styles$l["dialog-footer"]} row`,children:[jsxRuntimeExports.jsx("button",{type:"button",style:this.state.alignment==="center"?{flex:1,width:"100%"}:void 0,onClick:()=>{this.state.onCancel&&this.state.onCancel(),this.setState({open:!1})},className:`${styles$l["dialog-action"]} row`,children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:this.state.cancelTitle??a("cancel")})}),jsxRuntimeExports.jsx("button",{type:"button",style:this.state.alignment==="center"?{flex:1,width:"100%"}:void 0,onClick:()=>{this.state.onSubmit(),this.setState({open:!1})},className:`${styles$l["dialog-action"]} row ${styles$l["dialog-submit"]}`,children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:this.state.submitTitle??a("submit")})})]})]})}),document.body)})}}const dialogRef=React2.createRef(),Dialog$1=()=>{const{t:o,i18n:a}=useTranslation();return jsxRuntimeExports.jsx(TDialog,{ref:dialogRef,t:o,i18n:a,tReady:!0})},showDialog=o=>{dialogRef.current&&dialogRef.current.showDialogNoti({title:o.title??"",status:o.status??ComponentStatus.INFOR,content:o.content??"",onSubmit:o.onSubmit??(()=>{}),onCancel:o.onCancel,submitTitle:o.submitTitle,cancelTitle:o.cancelTitle,alignment:o.alignment})},value="_value_hggwe_29",disabled$2="_disabled_hggwe_97",styles$k={"date-time-picker":"_date-time-picker_hggwe_1","prefix-icon":"_prefix-icon_hggwe_15",value,"simple-date-time-picker":"_simple-date-time-picker_hggwe_31",disabled:disabled$2,"helper-text":"_helper-text_hggwe_123","popup-actions":"_popup-actions_hggwe_165"};var isCheckBoxInput=o=>o.type==="checkbox",isDateObject=o=>o instanceof Date,isNullOrUndefined=o=>o==null;const isObjectType=o=>typeof o=="object";var isObject$7=o=>!isNullOrUndefined(o)&&!Array.isArray(o)&&isObjectType(o)&&!isDateObject(o),getEventValue=o=>isObject$7(o)&&o.target?isCheckBoxInput(o.target)?o.target.checked:o.target.value:o,getNodeParentName=o=>o.substring(0,o.search(/\.\d+(\.|$)/))||o,isNameInFieldArray=(o,a)=>o.has(getNodeParentName(a)),isPlainObject$2=o=>{const a=o.constructor&&o.constructor.prototype;return isObject$7(a)&&a.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(o){let a;const n=Array.isArray(o),s=typeof FileList<"u"?o instanceof FileList:!1;if(o instanceof Date)a=new Date(o);else if(o instanceof Set)a=new Set(o);else if(!(isWeb&&(o instanceof Blob||s))&&(n||isObject$7(o)))if(a=n?[]:{},!n&&!isPlainObject$2(o))a=o;else for(const l in o)o.hasOwnProperty(l)&&(a[l]=cloneObject(o[l]));else return o;return a}var compact=o=>Array.isArray(o)?o.filter(Boolean):[],isUndefined$1=o=>o===void 0,get$3=(o,a,n)=>{if(!a||!isObject$7(o))return n;const s=compact(a.split(/[,[\].]+?/)).reduce((l,c)=>isNullOrUndefined(l)?l:l[c],o);return isUndefined$1(s)||s===o?isUndefined$1(o[a])?n:o[a]:s},isBoolean$1=o=>typeof o=="boolean",isKey$1=o=>/^\w*$/.test(o),stringToPath$1=o=>compact(o.replace(/["|']|\]/g,"").split(/\.|\[/)),set$3=(o,a,n)=>{let s=-1;const l=isKey$1(a)?[a]:stringToPath$1(a),c=l.length,u=c-1;for(;++s<c;){const d=l[s];let h=n;if(s!==u){const f=o[d];h=isObject$7(f)||Array.isArray(f)?f:isNaN(+l[s+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;o[d]=h,o=o[d]}};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React2.createContext(null),useFormContext=()=>React2.useContext(HookFormContext);var getProxyFormState=(o,a,n,s=!0)=>{const l={defaultValues:a._defaultValues};for(const c in o)Object.defineProperty(l,c,{get:()=>{const u=c;return a._proxyFormState[u]!==VALIDATION_MODE.all&&(a._proxyFormState[u]=!s||VALIDATION_MODE.all),n&&(n[u]=!0),o[u]}});return l};const useIsomorphicLayoutEffect$1=typeof window<"u"?React2__namespace.useLayoutEffect:React2__namespace.useEffect;function useFormState(o){const a=useFormContext(),{control:n=a.control,disabled:s,name:l,exact:c}=o||{},[u,d]=React2.useState(n._formState),h=React2.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return useIsomorphicLayoutEffect$1(()=>n._subscribe({name:l,formState:h.current,exact:c,callback:f=>{!s&&d({...n._formState,...f})}}),[l,s,c]),React2.useEffect(()=>{h.current.isValid&&n._setValid(!0)},[n]),React2.useMemo(()=>getProxyFormState(u,n,h.current,!1),[u,n])}var isString$5=o=>typeof o=="string",generateWatchOutput=(o,a,n,s,l)=>isString$5(o)?(s&&a.watch.add(o),get$3(n,o,l)):Array.isArray(o)?o.map(c=>(s&&a.watch.add(c),get$3(n,c))):(s&&(a.watchAll=!0),n);function useWatch(o){const a=useFormContext(),{control:n=a.control,name:s,defaultValue:l,disabled:c,exact:u}=o||{},d=React2.useRef(l),[h,f]=React2.useState(n._getWatch(s,d.current));return useIsomorphicLayoutEffect$1(()=>n._subscribe({name:s,formState:{values:!0},exact:u,callback:p=>!c&&f(generateWatchOutput(s,n._names,p.values||n._formValues,!1,d.current))}),[s,n,c,u]),React2.useEffect(()=>n._removeUnmounted()),h}function useController(o){const a=useFormContext(),{name:n,disabled:s,control:l=a.control,shouldUnregister:c}=o,u=isNameInFieldArray(l._names.array,n),d=useWatch({control:l,name:n,defaultValue:get$3(l._formValues,n,get$3(l._defaultValues,n,o.defaultValue)),exact:!0}),h=useFormState({control:l,name:n,exact:!0}),f=React2.useRef(o),p=React2.useRef(l.register(n,{...o.rules,value:d,...isBoolean$1(o.disabled)?{disabled:o.disabled}:{}})),g=React2.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$3(h.errors,n)},isDirty:{enumerable:!0,get:()=>!!get$3(h.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!get$3(h.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!get$3(h.validatingFields,n)},error:{enumerable:!0,get:()=>get$3(h.errors,n)}}),[h,n]),v=React2.useCallback(S=>p.current.onChange({target:{value:getEventValue(S),name:n},type:EVENTS.CHANGE}),[n]),b=React2.useCallback(()=>p.current.onBlur({target:{value:get$3(l._formValues,n),name:n},type:EVENTS.BLUR}),[n,l._formValues]),w=React2.useCallback(S=>{const E=get$3(l._fields,n);E&&S&&(E._f.ref={focus:()=>S.focus&&S.focus(),select:()=>S.select&&S.select(),setCustomValidity:T=>S.setCustomValidity(T),reportValidity:()=>S.reportValidity()})},[l._fields,n]),x=React2.useMemo(()=>({name:n,value:d,...isBoolean$1(s)||h.disabled?{disabled:h.disabled||s}:{},onChange:v,onBlur:b,ref:w}),[n,s,h.disabled,v,b,w,d]);return React2.useEffect(()=>{const S=l._options.shouldUnregister||c;l.register(n,{...f.current.rules,...isBoolean$1(f.current.disabled)?{disabled:f.current.disabled}:{}});const E=(T,C)=>{const A=get$3(l._fields,T);A&&A._f&&(A._f.mount=C)};if(E(n,!0),S){const T=cloneObject(get$3(l._options.defaultValues,n));set$3(l._defaultValues,n,T),isUndefined$1(get$3(l._formValues,n))&&set$3(l._formValues,n,T)}return!u&&l.register(n),()=>{(u?S&&!l._state.action:S)?l.unregister(n):E(n,!1)}},[n,l,u,c]),React2.useEffect(()=>{l._setDisabledField({disabled:s,name:n})},[s,n,l]),React2.useMemo(()=>({field:x,formState:h,fieldState:g}),[x,h,g])}const Controller=o=>o.render(useController(o));var appendErrors=(o,a,n,s,l)=>a?{...n[o],types:{...n[o]&&n[o].types?n[o].types:{},[s]:l||!0}}:{},convertToArrayPayload=o=>Array.isArray(o)?o:[o],createSubject=()=>{let o=[];return{get observers(){return o},next:l=>{for(const c of o)c.next&&c.next(l)},subscribe:l=>(o.push(l),{unsubscribe:()=>{o=o.filter(c=>c!==l)}}),unsubscribe:()=>{o=[]}}},isPrimitive$1=o=>isNullOrUndefined(o)||!isObjectType(o);function deepEqual(o,a){if(isPrimitive$1(o)||isPrimitive$1(a))return o===a;if(isDateObject(o)&&isDateObject(a))return o.getTime()===a.getTime();const n=Object.keys(o),s=Object.keys(a);if(n.length!==s.length)return!1;for(const l of n){const c=o[l];if(!s.includes(l))return!1;if(l!=="ref"){const u=a[l];if(isDateObject(c)&&isDateObject(u)||isObject$7(c)&&isObject$7(u)||Array.isArray(c)&&Array.isArray(u)?!deepEqual(c,u):c!==u)return!1}}return!0}var isEmptyObject=o=>isObject$7(o)&&!Object.keys(o).length,isFileInput=o=>o.type==="file",isFunction$4=o=>typeof o=="function",isHTMLElement=o=>{if(!isWeb)return!1;const a=o?o.ownerDocument:0;return o instanceof(a&&a.defaultView?a.defaultView.HTMLElement:HTMLElement)},isMultipleSelect=o=>o.type==="select-multiple",isRadioInput=o=>o.type==="radio",isRadioOrCheckbox=o=>isRadioInput(o)||isCheckBoxInput(o),live=o=>isHTMLElement(o)&&o.isConnected;function baseGet$1(o,a){const n=a.slice(0,-1).length;let s=0;for(;s<n;)o=isUndefined$1(o)?s++:o[a[s++]];return o}function isEmptyArray(o){for(const a in o)if(o.hasOwnProperty(a)&&!isUndefined$1(o[a]))return!1;return!0}function unset$1(o,a){const n=Array.isArray(a)?a:isKey$1(a)?[a]:stringToPath$1(a),s=n.length===1?o:baseGet$1(o,n),l=n.length-1,c=n[l];return s&&delete s[c],l!==0&&(isObject$7(s)&&isEmptyObject(s)||Array.isArray(s)&&isEmptyArray(s))&&unset$1(o,n.slice(0,-1)),o}var objectHasFunction=o=>{for(const a in o)if(isFunction$4(o[a]))return!0;return!1};function markFieldsDirty(o,a={}){const n=Array.isArray(o);if(isObject$7(o)||n)for(const s in o)Array.isArray(o[s])||isObject$7(o[s])&&!objectHasFunction(o[s])?(a[s]=Array.isArray(o[s])?[]:{},markFieldsDirty(o[s],a[s])):isNullOrUndefined(o[s])||(a[s]=!0);return a}function getDirtyFieldsFromDefaultValues(o,a,n){const s=Array.isArray(o);if(isObject$7(o)||s)for(const l in o)Array.isArray(o[l])||isObject$7(o[l])&&!objectHasFunction(o[l])?isUndefined$1(a)||isPrimitive$1(n[l])?n[l]=Array.isArray(o[l])?markFieldsDirty(o[l],[]):{...markFieldsDirty(o[l])}:getDirtyFieldsFromDefaultValues(o[l],isNullOrUndefined(a)?{}:a[l],n[l]):n[l]=!deepEqual(o[l],a[l]);return n}var getDirtyFields=(o,a)=>getDirtyFieldsFromDefaultValues(o,a,markFieldsDirty(a));const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=o=>{if(Array.isArray(o)){if(o.length>1){const a=o.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:a,isValid:!!a.length}}return o[0].checked&&!o[0].disabled?o[0].attributes&&!isUndefined$1(o[0].attributes.value)?isUndefined$1(o[0].value)||o[0].value===""?validResult:{value:o[0].value,isValid:!0}:validResult:defaultResult}return defaultResult},getFieldValueAs=(o,{valueAsNumber:a,valueAsDate:n,setValueAs:s})=>isUndefined$1(o)?o:a?o===""?NaN:o&&+o:n&&isString$5(o)?new Date(o):s?s(o):o;const defaultReturn={isValid:!1,value:null};var getRadioValue=o=>Array.isArray(o)?o.reduce((a,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:a,defaultReturn):defaultReturn;function getFieldValue(o){const a=o.ref;return isFileInput(a)?a.files:isRadioInput(a)?getRadioValue(o.refs).value:isMultipleSelect(a)?[...a.selectedOptions].map(({value:n})=>n):isCheckBoxInput(a)?getCheckboxValue(o.refs).value:getFieldValueAs(isUndefined$1(a.value)?o.ref.value:a.value,o)}var getResolverOptions=(o,a,n,s)=>{const l={};for(const c of o){const u=get$3(a,c);u&&set$3(l,c,u._f)}return{criteriaMode:n,names:[...o],fields:l,shouldUseNativeValidation:s}},isRegex=o=>o instanceof RegExp,getRuleValue=o=>isUndefined$1(o)?o:isRegex(o)?o.source:isObject$7(o)?isRegex(o.value)?o.value.source:o.value:o,getValidationModes=o=>({isOnSubmit:!o||o===VALIDATION_MODE.onSubmit,isOnBlur:o===VALIDATION_MODE.onBlur,isOnChange:o===VALIDATION_MODE.onChange,isOnAll:o===VALIDATION_MODE.all,isOnTouch:o===VALIDATION_MODE.onTouched});const ASYNC_FUNCTION="AsyncFunction";var hasPromiseValidation=o=>!!o&&!!o.validate&&!!(isFunction$4(o.validate)&&o.validate.constructor.name===ASYNC_FUNCTION||isObject$7(o.validate)&&Object.values(o.validate).find(a=>a.constructor.name===ASYNC_FUNCTION)),hasValidation=o=>o.mount&&(o.required||o.min||o.max||o.maxLength||o.minLength||o.pattern||o.validate),isWatched=(o,a,n)=>!n&&(a.watchAll||a.watch.has(o)||[...a.watch].some(s=>o.startsWith(s)&&/^\.\w+/.test(o.slice(s.length))));const iterateFieldsByAction=(o,a,n,s)=>{for(const l of n||Object.keys(o)){const c=get$3(o,l);if(c){const{_f:u,...d}=c;if(u){if(u.refs&&u.refs[0]&&a(u.refs[0],l)&&!s)return!0;if(u.ref&&a(u.ref,u.name)&&!s)return!0;if(iterateFieldsByAction(d,a))break}else if(isObject$7(d)&&iterateFieldsByAction(d,a))break}}};function schemaErrorLookup(o,a,n){const s=get$3(o,n);if(s||isKey$1(n))return{error:s,name:n};const l=n.split(".");for(;l.length;){const c=l.join("."),u=get$3(a,c),d=get$3(o,c);if(u&&!Array.isArray(u)&&n!==c)return{name:n};if(d&&d.type)return{name:c,error:d};if(d&&d.root&&d.root.type)return{name:`${c}.root`,error:d.root};l.pop()}return{name:n}}var shouldRenderFormState=(o,a,n,s)=>{n(o);const{name:l,...c}=o;return isEmptyObject(c)||Object.keys(c).length>=Object.keys(a).length||Object.keys(c).find(u=>a[u]===(!s||VALIDATION_MODE.all))},shouldSubscribeByName=(o,a,n)=>!o||!a||o===a||convertToArrayPayload(o).some(s=>s&&(n?s===a:s.startsWith(a)||a.startsWith(s))),skipValidation=(o,a,n,s,l)=>l.isOnAll?!1:!n&&l.isOnTouch?!(a||o):(n?s.isOnBlur:l.isOnBlur)?!o:(n?s.isOnChange:l.isOnChange)?o:!0,unsetEmptyArray=(o,a)=>!compact(get$3(o,a)).length&&unset$1(o,a),updateFieldArrayRootError=(o,a,n)=>{const s=convertToArrayPayload(get$3(o,n));return set$3(s,"root",a[n]),set$3(o,n,s),o},isMessage=o=>isString$5(o);function getValidateError(o,a,n="validate"){if(isMessage(o)||Array.isArray(o)&&o.every(isMessage)||isBoolean$1(o)&&!o)return{type:n,message:isMessage(o)?o:"",ref:a}}var getValueAndMessage=o=>isObject$7(o)&&!isRegex(o)?o:{value:o,message:""},validateField=async(o,a,n,s,l,c)=>{const{ref:u,refs:d,required:h,maxLength:f,minLength:p,min:g,max:v,pattern:b,validate:w,name:x,valueAsNumber:S,mount:E}=o._f,T=get$3(n,x);if(!E||a.has(x))return{};const C=d?d[0]:u,A=te=>{l&&C.reportValidity&&(C.setCustomValidity(isBoolean$1(te)?"":te||""),C.reportValidity())},R={},j=isRadioInput(u),D=isCheckBoxInput(u),O=j||D,H=(S||isFileInput(u))&&isUndefined$1(u.value)&&isUndefined$1(T)||isHTMLElement(u)&&u.value===""||T===""||Array.isArray(T)&&!T.length,q=appendErrors.bind(null,x,s,R),Y=(te,ee,re,ne=INPUT_VALIDATION_RULES.maxLength,ce=INPUT_VALIDATION_RULES.minLength)=>{const ve=te?ee:re;R[x]={type:te?ne:ce,message:ve,ref:u,...q(te?ne:ce,ve)}};if(c?!Array.isArray(T)||!T.length:h&&(!O&&(H||isNullOrUndefined(T))||isBoolean$1(T)&&!T||D&&!getCheckboxValue(d).isValid||j&&!getRadioValue(d).isValid)){const{value:te,message:ee}=isMessage(h)?{value:!!h,message:h}:getValueAndMessage(h);if(te&&(R[x]={type:INPUT_VALIDATION_RULES.required,message:ee,ref:C,...q(INPUT_VALIDATION_RULES.required,ee)},!s))return A(ee),R}if(!H&&(!isNullOrUndefined(g)||!isNullOrUndefined(v))){let te,ee;const re=getValueAndMessage(v),ne=getValueAndMessage(g);if(!isNullOrUndefined(T)&&!isNaN(T)){const ce=u.valueAsNumber||T&&+T;isNullOrUndefined(re.value)||(te=ce>re.value),isNullOrUndefined(ne.value)||(ee=ce<ne.value)}else{const ce=u.valueAsDate||new Date(T),ve=ae=>new Date(new Date().toDateString()+" "+ae),be=u.type=="time",me=u.type=="week";isString$5(re.value)&&T&&(te=be?ve(T)>ve(re.value):me?T>re.value:ce>new Date(re.value)),isString$5(ne.value)&&T&&(ee=be?ve(T)<ve(ne.value):me?T<ne.value:ce<new Date(ne.value))}if((te||ee)&&(Y(!!te,re.message,ne.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!s))return A(R[x].message),R}if((f||p)&&!H&&(isString$5(T)||c&&Array.isArray(T))){const te=getValueAndMessage(f),ee=getValueAndMessage(p),re=!isNullOrUndefined(te.value)&&T.length>+te.value,ne=!isNullOrUndefined(ee.value)&&T.length<+ee.value;if((re||ne)&&(Y(re,te.message,ee.message),!s))return A(R[x].message),R}if(b&&!H&&isString$5(T)){const{value:te,message:ee}=getValueAndMessage(b);if(isRegex(te)&&!T.match(te)&&(R[x]={type:INPUT_VALIDATION_RULES.pattern,message:ee,ref:u,...q(INPUT_VALIDATION_RULES.pattern,ee)},!s))return A(ee),R}if(w){if(isFunction$4(w)){const te=await w(T,n),ee=getValidateError(te,C);if(ee&&(R[x]={...ee,...q(INPUT_VALIDATION_RULES.validate,ee.message)},!s))return A(ee.message),R}else if(isObject$7(w)){let te={};for(const ee in w){if(!isEmptyObject(te)&&!s)break;const re=getValidateError(await w[ee](T,n),C,ee);re&&(te={...re,...q(ee,re.message)},A(re.message),s&&(R[x]=te))}if(!isEmptyObject(te)&&(R[x]={ref:C,...te},!s))return R}}return A(!0),R};const defaultOptions$1={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(o={}){let a={...defaultOptions$1,...o},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:isFunction$4(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1};const s={};let l=isObject$7(a.defaultValues)||isObject$7(a.values)?cloneObject(a.defaultValues||a.values)||{}:{},c=a.shouldUnregister?{}:cloneObject(l),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},h,f=0;const p={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let g={...p};const v={array:createSubject(),state:createSubject()},b=a.criteriaMode===VALIDATION_MODE.all,w=fe=>Pe=>{clearTimeout(f),f=setTimeout(fe,Pe)},x=async fe=>{if(!a.disabled&&(p.isValid||g.isValid||fe)){const Pe=a.resolver?isEmptyObject((await D()).errors):await H(s,!0);Pe!==n.isValid&&v.state.next({isValid:Pe})}},S=(fe,Pe)=>{!a.disabled&&(p.isValidating||p.validatingFields||g.isValidating||g.validatingFields)&&((fe||Array.from(d.mount)).forEach(Oe=>{Oe&&(Pe?set$3(n.validatingFields,Oe,Pe):unset$1(n.validatingFields,Oe))}),v.state.next({validatingFields:n.validatingFields,isValidating:!isEmptyObject(n.validatingFields)}))},E=(fe,Pe=[],Oe,je,Ve=!0,ze=!0)=>{if(je&&Oe&&!a.disabled){if(u.action=!0,ze&&Array.isArray(get$3(s,fe))){const We=Oe(get$3(s,fe),je.argA,je.argB);Ve&&set$3(s,fe,We)}if(ze&&Array.isArray(get$3(n.errors,fe))){const We=Oe(get$3(n.errors,fe),je.argA,je.argB);Ve&&set$3(n.errors,fe,We),unsetEmptyArray(n.errors,fe)}if((p.touchedFields||g.touchedFields)&&ze&&Array.isArray(get$3(n.touchedFields,fe))){const We=Oe(get$3(n.touchedFields,fe),je.argA,je.argB);Ve&&set$3(n.touchedFields,fe,We)}(p.dirtyFields||g.dirtyFields)&&(n.dirtyFields=getDirtyFields(l,c)),v.state.next({name:fe,isDirty:Y(fe,Pe),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else set$3(c,fe,Pe)},T=(fe,Pe)=>{set$3(n.errors,fe,Pe),v.state.next({errors:n.errors})},C=fe=>{n.errors=fe,v.state.next({errors:n.errors,isValid:!1})},A=(fe,Pe,Oe,je)=>{const Ve=get$3(s,fe);if(Ve){const ze=get$3(c,fe,isUndefined$1(Oe)?get$3(l,fe):Oe);isUndefined$1(ze)||je&&je.defaultChecked||Pe?set$3(c,fe,Pe?ze:getFieldValue(Ve._f)):re(fe,ze),u.mount&&x()}},R=(fe,Pe,Oe,je,Ve)=>{let ze=!1,We=!1;const Ze={name:fe};if(!a.disabled){if(!Oe||je){(p.isDirty||g.isDirty)&&(We=n.isDirty,n.isDirty=Ze.isDirty=Y(),ze=We!==Ze.isDirty);const Je=deepEqual(get$3(l,fe),Pe);We=!!get$3(n.dirtyFields,fe),Je?unset$1(n.dirtyFields,fe):set$3(n.dirtyFields,fe,!0),Ze.dirtyFields=n.dirtyFields,ze=ze||(p.dirtyFields||g.dirtyFields)&&We!==!Je}if(Oe){const Je=get$3(n.touchedFields,fe);Je||(set$3(n.touchedFields,fe,Oe),Ze.touchedFields=n.touchedFields,ze=ze||(p.touchedFields||g.touchedFields)&&Je!==Oe)}ze&&Ve&&v.state.next(Ze)}return ze?Ze:{}},j=(fe,Pe,Oe,je)=>{const Ve=get$3(n.errors,fe),ze=(p.isValid||g.isValid)&&isBoolean$1(Pe)&&n.isValid!==Pe;if(a.delayError&&Oe?(h=w(()=>T(fe,Oe)),h(a.delayError)):(clearTimeout(f),h=null,Oe?set$3(n.errors,fe,Oe):unset$1(n.errors,fe)),(Oe?!deepEqual(Ve,Oe):Ve)||!isEmptyObject(je)||ze){const We={...je,...ze&&isBoolean$1(Pe)?{isValid:Pe}:{},errors:n.errors,name:fe};n={...n,...We},v.state.next(We)}},D=async fe=>{S(fe,!0);const Pe=await a.resolver(c,a.context,getResolverOptions(fe||d.mount,s,a.criteriaMode,a.shouldUseNativeValidation));return S(fe),Pe},O=async fe=>{const{errors:Pe}=await D(fe);if(fe)for(const Oe of fe){const je=get$3(Pe,Oe);je?set$3(n.errors,Oe,je):unset$1(n.errors,Oe)}else n.errors=Pe;return Pe},H=async(fe,Pe,Oe={valid:!0})=>{for(const je in fe){const Ve=fe[je];if(Ve){const{_f:ze,...We}=Ve;if(ze){const Ze=d.array.has(ze.name),Je=Ve._f&&hasPromiseValidation(Ve._f);Je&&p.validatingFields&&S([je],!0);const et=await validateField(Ve,d.disabled,c,b,a.shouldUseNativeValidation&&!Pe,Ze);if(Je&&p.validatingFields&&S([je]),et[ze.name]&&(Oe.valid=!1,Pe))break;!Pe&&(get$3(et,ze.name)?Ze?updateFieldArrayRootError(n.errors,et,ze.name):set$3(n.errors,ze.name,et[ze.name]):unset$1(n.errors,ze.name))}!isEmptyObject(We)&&await H(We,Pe,Oe)}}return Oe.valid},q=()=>{for(const fe of d.unMount){const Pe=get$3(s,fe);Pe&&(Pe._f.refs?Pe._f.refs.every(Oe=>!live(Oe)):!live(Pe._f.ref))&&Re(fe)}d.unMount=new Set},Y=(fe,Pe)=>!a.disabled&&(fe&&Pe&&set$3(c,fe,Pe),!deepEqual(ae(),l)),te=(fe,Pe,Oe)=>generateWatchOutput(fe,d,{...u.mount?c:isUndefined$1(Pe)?l:isString$5(fe)?{[fe]:Pe}:Pe},Oe,Pe),ee=fe=>compact(get$3(u.mount?c:l,fe,a.shouldUnregister?get$3(l,fe,[]):[])),re=(fe,Pe,Oe={})=>{const je=get$3(s,fe);let Ve=Pe;if(je){const ze=je._f;ze&&(!ze.disabled&&set$3(c,fe,getFieldValueAs(Pe,ze)),Ve=isHTMLElement(ze.ref)&&isNullOrUndefined(Pe)?"":Pe,isMultipleSelect(ze.ref)?[...ze.ref.options].forEach(We=>We.selected=Ve.includes(We.value)):ze.refs?isCheckBoxInput(ze.ref)?ze.refs.forEach(We=>{(!We.defaultChecked||!We.disabled)&&(Array.isArray(Ve)?We.checked=!!Ve.find(Ze=>Ze===We.value):We.checked=Ve===We.value||!!Ve)}):ze.refs.forEach(We=>We.checked=We.value===Ve):isFileInput(ze.ref)?ze.ref.value="":(ze.ref.value=Ve,ze.ref.type||v.state.next({name:fe,values:cloneObject(c)})))}(Oe.shouldDirty||Oe.shouldTouch)&&R(fe,Ve,Oe.shouldTouch,Oe.shouldDirty,!0),Oe.shouldValidate&&me(fe)},ne=(fe,Pe,Oe)=>{for(const je in Pe){if(!Pe.hasOwnProperty(je))return;const Ve=Pe[je],ze=fe+"."+je,We=get$3(s,ze);(d.array.has(fe)||isObject$7(Ve)||We&&!We._f)&&!isDateObject(Ve)?ne(ze,Ve,Oe):re(ze,Ve,Oe)}},ce=(fe,Pe,Oe={})=>{const je=get$3(s,fe),Ve=d.array.has(fe),ze=cloneObject(Pe);set$3(c,fe,ze),Ve?(v.array.next({name:fe,values:cloneObject(c)}),(p.isDirty||p.dirtyFields||g.isDirty||g.dirtyFields)&&Oe.shouldDirty&&v.state.next({name:fe,dirtyFields:getDirtyFields(l,c),isDirty:Y(fe,ze)})):je&&!je._f&&!isNullOrUndefined(ze)?ne(fe,ze,Oe):re(fe,ze,Oe),isWatched(fe,d)&&v.state.next({...n}),v.state.next({name:u.mount?fe:void 0,values:cloneObject(c)})},ve=async fe=>{u.mount=!0;const Pe=fe.target;let Oe=Pe.name,je=!0;const Ve=get$3(s,Oe),ze=Je=>{je=Number.isNaN(Je)||isDateObject(Je)&&isNaN(Je.getTime())||deepEqual(Je,get$3(c,Oe,Je))},We=getValidationModes(a.mode),Ze=getValidationModes(a.reValidateMode);if(Ve){let Je,et;const Tt=Pe.type?getFieldValue(Ve._f):getEventValue(fe),ut=fe.type===EVENTS.BLUR||fe.type===EVENTS.FOCUS_OUT,St=!hasValidation(Ve._f)&&!a.resolver&&!get$3(n.errors,Oe)&&!Ve._f.deps||skipValidation(ut,get$3(n.touchedFields,Oe),n.isSubmitted,Ze,We),kt=isWatched(Oe,d,ut);set$3(c,Oe,Tt),ut?(Ve._f.onBlur&&Ve._f.onBlur(fe),h&&h(0)):Ve._f.onChange&&Ve._f.onChange(fe);const Bt=R(Oe,Tt,ut),nr=!isEmptyObject(Bt)||kt;if(!ut&&v.state.next({name:Oe,type:fe.type,values:cloneObject(c)}),St)return(p.isValid||g.isValid)&&(a.mode==="onBlur"?ut&&x():ut||x()),nr&&v.state.next({name:Oe,...kt?{}:Bt});if(!ut&&kt&&v.state.next({...n}),a.resolver){const{errors:ir}=await D([Oe]);if(ze(Tt),je){const dr=schemaErrorLookup(n.errors,s,Oe),Zt=schemaErrorLookup(ir,s,dr.name||Oe);Je=Zt.error,Oe=Zt.name,et=isEmptyObject(ir)}}else S([Oe],!0),Je=(await validateField(Ve,d.disabled,c,b,a.shouldUseNativeValidation))[Oe],S([Oe]),ze(Tt),je&&(Je?et=!1:(p.isValid||g.isValid)&&(et=await H(s,!0)));je&&(Ve._f.deps&&me(Ve._f.deps),j(Oe,et,Je,Bt))}},be=(fe,Pe)=>{if(get$3(n.errors,Pe)&&fe.focus)return fe.focus(),1},me=async(fe,Pe={})=>{let Oe,je;const Ve=convertToArrayPayload(fe);if(a.resolver){const ze=await O(isUndefined$1(fe)?fe:Ve);Oe=isEmptyObject(ze),je=fe?!Ve.some(We=>get$3(ze,We)):Oe}else fe?(je=(await Promise.all(Ve.map(async ze=>{const We=get$3(s,ze);return await H(We&&We._f?{[ze]:We}:We)}))).every(Boolean),!(!je&&!n.isValid)&&x()):je=Oe=await H(s);return v.state.next({...!isString$5(fe)||(p.isValid||g.isValid)&&Oe!==n.isValid?{}:{name:fe},...a.resolver||!fe?{isValid:Oe}:{},errors:n.errors}),Pe.shouldFocus&&!je&&iterateFieldsByAction(s,be,fe?Ve:d.mount),je},ae=fe=>{const Pe={...u.mount?c:l};return isUndefined$1(fe)?Pe:isString$5(fe)?get$3(Pe,fe):fe.map(Oe=>get$3(Pe,Oe))},pe=(fe,Pe)=>({invalid:!!get$3((Pe||n).errors,fe),isDirty:!!get$3((Pe||n).dirtyFields,fe),error:get$3((Pe||n).errors,fe),isValidating:!!get$3(n.validatingFields,fe),isTouched:!!get$3((Pe||n).touchedFields,fe)}),ie=fe=>{fe&&convertToArrayPayload(fe).forEach(Pe=>unset$1(n.errors,Pe)),v.state.next({errors:fe?n.errors:{}})},se=(fe,Pe,Oe)=>{const je=(get$3(s,fe,{_f:{}})._f||{}).ref,Ve=get$3(n.errors,fe)||{},{ref:ze,message:We,type:Ze,...Je}=Ve;set$3(n.errors,fe,{...Je,...Pe,ref:je}),v.state.next({name:fe,errors:n.errors,isValid:!1}),Oe&&Oe.shouldFocus&&je&&je.focus&&je.focus()},de=(fe,Pe)=>isFunction$4(fe)?v.state.subscribe({next:Oe=>fe(te(void 0,Pe),Oe)}):te(fe,Pe,!0),le=fe=>v.state.subscribe({next:Pe=>{shouldSubscribeByName(fe.name,Pe.name,fe.exact)&&shouldRenderFormState(Pe,fe.formState||p,oe,fe.reRenderRoot)&&fe.callback({values:{...c},...n,...Pe})}}).unsubscribe,ge=fe=>(u.mount=!0,g={...g,...fe.formState},le({...fe,formState:g})),Re=(fe,Pe={})=>{for(const Oe of fe?convertToArrayPayload(fe):d.mount)d.mount.delete(Oe),d.array.delete(Oe),Pe.keepValue||(unset$1(s,Oe),unset$1(c,Oe)),!Pe.keepError&&unset$1(n.errors,Oe),!Pe.keepDirty&&unset$1(n.dirtyFields,Oe),!Pe.keepTouched&&unset$1(n.touchedFields,Oe),!Pe.keepIsValidating&&unset$1(n.validatingFields,Oe),!a.shouldUnregister&&!Pe.keepDefaultValue&&unset$1(l,Oe);v.state.next({values:cloneObject(c)}),v.state.next({...n,...Pe.keepDirty?{isDirty:Y()}:{}}),!Pe.keepIsValid&&x()},we=({disabled:fe,name:Pe})=>{(isBoolean$1(fe)&&u.mount||fe||d.disabled.has(Pe))&&(fe?d.disabled.add(Pe):d.disabled.delete(Pe))},Se=(fe,Pe={})=>{let Oe=get$3(s,fe);const je=isBoolean$1(Pe.disabled)||isBoolean$1(a.disabled);return set$3(s,fe,{...Oe||{},_f:{...Oe&&Oe._f?Oe._f:{ref:{name:fe}},name:fe,mount:!0,...Pe}}),d.mount.add(fe),Oe?we({disabled:isBoolean$1(Pe.disabled)?Pe.disabled:a.disabled,name:fe}):A(fe,!0,Pe.value),{...je?{disabled:Pe.disabled||a.disabled}:{},...a.progressive?{required:!!Pe.required,min:getRuleValue(Pe.min),max:getRuleValue(Pe.max),minLength:getRuleValue(Pe.minLength),maxLength:getRuleValue(Pe.maxLength),pattern:getRuleValue(Pe.pattern)}:{},name:fe,onChange:ve,onBlur:ve,ref:Ve=>{if(Ve){Se(fe,Pe),Oe=get$3(s,fe);const ze=isUndefined$1(Ve.value)&&Ve.querySelectorAll&&Ve.querySelectorAll("input,select,textarea")[0]||Ve,We=isRadioOrCheckbox(ze),Ze=Oe._f.refs||[];if(We?Ze.find(Je=>Je===ze):ze===Oe._f.ref)return;set$3(s,fe,{_f:{...Oe._f,...We?{refs:[...Ze.filter(live),ze,...Array.isArray(get$3(l,fe))?[{}]:[]],ref:{type:ze.type,name:fe}}:{ref:ze}}}),A(fe,!1,void 0,ze)}else Oe=get$3(s,fe,{}),Oe._f&&(Oe._f.mount=!1),(a.shouldUnregister||Pe.shouldUnregister)&&!(isNameInFieldArray(d.array,fe)&&u.action)&&d.unMount.add(fe)}}},xe=()=>a.shouldFocusError&&iterateFieldsByAction(s,be,d.mount),ke=fe=>{isBoolean$1(fe)&&(v.state.next({disabled:fe}),iterateFieldsByAction(s,(Pe,Oe)=>{const je=get$3(s,Oe);je&&(Pe.disabled=je._f.disabled||fe,Array.isArray(je._f.refs)&&je._f.refs.forEach(Ve=>{Ve.disabled=je._f.disabled||fe}))},0,!1))},Ie=(fe,Pe)=>async Oe=>{let je;Oe&&(Oe.preventDefault&&Oe.preventDefault(),Oe.persist&&Oe.persist());let Ve=cloneObject(c);if(v.state.next({isSubmitting:!0}),a.resolver){const{errors:ze,values:We}=await D();n.errors=ze,Ve=We}else await H(s);if(d.disabled.size)for(const ze of d.disabled)set$3(Ve,ze,void 0);if(unset$1(n.errors,"root"),isEmptyObject(n.errors)){v.state.next({errors:{}});try{await fe(Ve,Oe)}catch(ze){je=ze}}else Pe&&await Pe({...n.errors},Oe),xe(),setTimeout(xe);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(n.errors)&&!je,submitCount:n.submitCount+1,errors:n.errors}),je)throw je},He=(fe,Pe={})=>{get$3(s,fe)&&(isUndefined$1(Pe.defaultValue)?ce(fe,cloneObject(get$3(l,fe))):(ce(fe,Pe.defaultValue),set$3(l,fe,cloneObject(Pe.defaultValue))),Pe.keepTouched||unset$1(n.touchedFields,fe),Pe.keepDirty||(unset$1(n.dirtyFields,fe),n.isDirty=Pe.defaultValue?Y(fe,cloneObject(get$3(l,fe))):Y()),Pe.keepError||(unset$1(n.errors,fe),p.isValid&&x()),v.state.next({...n}))},Le=(fe,Pe={})=>{const Oe=fe?cloneObject(fe):l,je=cloneObject(Oe),Ve=isEmptyObject(fe),ze=Ve?l:je;if(Pe.keepDefaultValues||(l=Oe),!Pe.keepValues){if(Pe.keepDirtyValues){const We=new Set([...d.mount,...Object.keys(getDirtyFields(l,c))]);for(const Ze of Array.from(We))get$3(n.dirtyFields,Ze)?set$3(ze,Ze,get$3(c,Ze)):ce(Ze,get$3(ze,Ze))}else{if(isWeb&&isUndefined$1(fe))for(const We of d.mount){const Ze=get$3(s,We);if(Ze&&Ze._f){const Je=Array.isArray(Ze._f.refs)?Ze._f.refs[0]:Ze._f.ref;if(isHTMLElement(Je)){const et=Je.closest("form");if(et){et.reset();break}}}}for(const We of d.mount)ce(We,get$3(ze,We))}c=cloneObject(ze),v.array.next({values:{...ze}}),v.state.next({values:{...ze}})}d={mount:Pe.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!p.isValid||!!Pe.keepIsValid||!!Pe.keepDirtyValues,u.watch=!!a.shouldUnregister,v.state.next({submitCount:Pe.keepSubmitCount?n.submitCount:0,isDirty:Ve?!1:Pe.keepDirty?n.isDirty:!!(Pe.keepDefaultValues&&!deepEqual(fe,l)),isSubmitted:Pe.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ve?{}:Pe.keepDirtyValues?Pe.keepDefaultValues&&c?getDirtyFields(l,c):n.dirtyFields:Pe.keepDefaultValues&&fe?getDirtyFields(l,fe):Pe.keepDirty?n.dirtyFields:{},touchedFields:Pe.keepTouched?n.touchedFields:{},errors:Pe.keepErrors?n.errors:{},isSubmitSuccessful:Pe.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},De=(fe,Pe)=>Le(isFunction$4(fe)?fe(c):fe,Pe),Ee=(fe,Pe={})=>{const Oe=get$3(s,fe),je=Oe&&Oe._f;if(je){const Ve=je.refs?je.refs[0]:je.ref;Ve.focus&&(Ve.focus(),Pe.shouldSelect&&isFunction$4(Ve.select)&&Ve.select())}},oe=fe=>{n={...n,...fe}},Me={control:{register:Se,unregister:Re,getFieldState:pe,handleSubmit:Ie,setError:se,_subscribe:le,_runSchema:D,_focusError:xe,_getWatch:te,_getDirty:Y,_setValid:x,_setFieldArray:E,_setDisabledField:we,_setErrors:C,_getFieldArray:ee,_reset:Le,_resetDefaultValues:()=>isFunction$4(a.defaultValues)&&a.defaultValues().then(fe=>{De(fe,a.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:q,_disableForm:ke,_subjects:v,_proxyFormState:p,get _fields(){return s},get _formValues(){return c},get _state(){return u},set _state(fe){u=fe},get _defaultValues(){return l},get _names(){return d},set _names(fe){d=fe},get _formState(){return n},get _options(){return a},set _options(fe){a={...a,...fe}}},subscribe:ge,trigger:me,register:Se,handleSubmit:Ie,watch:de,setValue:ce,getValues:ae,reset:De,resetField:He,clearErrors:ie,unregister:Re,setError:se,setFocus:Ee,getFieldState:pe};return{...Me,formControl:Me}}function useForm(o={}){const a=React2.useRef(void 0),n=React2.useRef(void 0),[s,l]=React2.useState({isDirty:!1,isValidating:!1,isLoading:isFunction$4(o.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:o.errors||{},disabled:o.disabled||!1,isReady:!1,defaultValues:isFunction$4(o.defaultValues)?void 0:o.defaultValues});a.current||(a.current={...o.formControl?o.formControl:createFormControl(o),formState:s},o.formControl&&o.defaultValues&&!isFunction$4(o.defaultValues)&&o.formControl.reset(o.defaultValues,o.resetOptions));const c=a.current.control;return c._options=o,useIsomorphicLayoutEffect$1(()=>{const u=c._subscribe({formState:c._proxyFormState,callback:()=>l({...c._formState}),reRenderRoot:!0});return l(d=>({...d,isReady:!0})),c._formState.isReady=!0,u},[c]),React2.useEffect(()=>c._disableForm(o.disabled),[c,o.disabled]),React2.useEffect(()=>{o.mode&&(c._options.mode=o.mode),o.reValidateMode&&(c._options.reValidateMode=o.reValidateMode)},[c,o.mode,o.reValidateMode]),React2.useEffect(()=>{o.errors&&(c._setErrors(o.errors),c._focusError())},[c,o.errors]),React2.useEffect(()=>{o.shouldUnregister&&c._subjects.state.next({values:c._getWatch()})},[c,o.shouldUnregister]),React2.useEffect(()=>{if(c._proxyFormState.isDirty){const u=c._getDirty();u!==s.isDirty&&c._subjects.state.next({isDirty:u})}},[c,s.isDirty]),React2.useEffect(()=>{o.values&&!deepEqual(o.values,n.current)?(c._reset(o.values,c._options.resetOptions),n.current=o.values,l(u=>({...u}))):c._resetDefaultValues()},[c,o.values]),React2.useEffect(()=>{c._state.mount||(c._setValid(),c._state.mount=!0),c._state.watch&&(c._state.watch=!1,c._subjects.state.next({...c._formState})),c._removeUnmounted()}),a.current.formState=getProxyFormState(s,c),a.current}const millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5,millisecondsInSecond=1e3,constructFromSymbol=Symbol.for("constructDateFrom");function constructFrom(o,a){return typeof o=="function"?o(a):o&&typeof o=="object"&&constructFromSymbol in o?o[constructFromSymbol](a):o instanceof Date?new o.constructor(a):new Date(a)}function toDate(o,a){return constructFrom(a||o,o)}function addDays(o,a,n){const s=toDate(o,n==null?void 0:n.in);return isNaN(a)?constructFrom((n==null?void 0:n.in)||o,NaN):(a&&s.setDate(s.getDate()+a),s)}let defaultOptions={};function getDefaultOptions$1(){return defaultOptions}function startOfWeek(o,a){var d,h,f,p;const n=getDefaultOptions$1(),s=(a==null?void 0:a.weekStartsOn)??((h=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??n.weekStartsOn??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.weekStartsOn)??0,l=toDate(o,a==null?void 0:a.in),c=l.getDay(),u=(c<s?7:0)+c-s;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function startOfISOWeek(o,a){return startOfWeek(o,{...a,weekStartsOn:1})}function getISOWeekYear(o,a){const n=toDate(o,a==null?void 0:a.in),s=n.getFullYear(),l=constructFrom(n,0);l.setFullYear(s+1,0,4),l.setHours(0,0,0,0);const c=startOfISOWeek(l),u=constructFrom(n,0);u.setFullYear(s,0,4),u.setHours(0,0,0,0);const d=startOfISOWeek(u);return n.getTime()>=c.getTime()?s+1:n.getTime()>=d.getTime()?s:s-1}function getTimezoneOffsetInMilliseconds(o){const a=toDate(o),n=new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()));return n.setUTCFullYear(a.getFullYear()),+o-+n}function normalizeDates(o,...a){const n=constructFrom.bind(null,a.find(s=>typeof s=="object"));return a.map(n)}function startOfDay(o,a){const n=toDate(o,a==null?void 0:a.in);return n.setHours(0,0,0,0),n}function differenceInCalendarDays(o,a,n){const[s,l]=normalizeDates(n==null?void 0:n.in,o,a),c=startOfDay(s),u=startOfDay(l),d=+c-getTimezoneOffsetInMilliseconds(c),h=+u-getTimezoneOffsetInMilliseconds(u);return Math.round((d-h)/millisecondsInDay)}function startOfISOWeekYear(o,a){const n=getISOWeekYear(o,a),s=constructFrom(o,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),startOfISOWeek(s)}function getRoundingMethod(o){return a=>{const n=Math.trunc,s=n(a);return s===0?0:s}}function differenceInMilliseconds(o,a){return+toDate(o)-+toDate(a)}function differenceInMinutes(o,a,n){const s=differenceInMilliseconds(o,a)/millisecondsInMinute;return getRoundingMethod()(s)}function differenceInSeconds(o,a,n){const s=differenceInMilliseconds(o,a)/1e3;return getRoundingMethod()(s)}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(o,a,n)=>{let s;const l=formatDistanceLocale[o];return typeof l=="string"?s=l:a===1?s=l.one:s=l.other.replace("{{count}}",a.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function buildFormatLongFn(o){return(a={})=>{const n=a.width?String(a.width):o.defaultWidth;return o.formats[n]||o.formats[o.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(o,a,n,s)=>formatRelativeLocale[o];function buildLocalizeFn(o){return(a,n)=>{const s=n!=null&&n.context?String(n.context):"standalone";let l;if(s==="formatting"&&o.formattingValues){const u=o.defaultFormattingWidth||o.defaultWidth,d=n!=null&&n.width?String(n.width):u;l=o.formattingValues[d]||o.formattingValues[u]}else{const u=o.defaultWidth,d=n!=null&&n.width?String(n.width):o.defaultWidth;l=o.values[d]||o.values[u]}const c=o.argumentCallback?o.argumentCallback(a):a;return l[c]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(o,a)=>{const n=Number(o),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:o=>o-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(o){return(a,n={})=>{const s=n.width,l=s&&o.matchPatterns[s]||o.matchPatterns[o.defaultMatchWidth],c=a.match(l);if(!c)return null;const u=c[0],d=s&&o.parsePatterns[s]||o.parsePatterns[o.defaultParseWidth],h=Array.isArray(d)?findIndex(d,g=>g.test(u)):findKey$1(d,g=>g.test(u));let f;f=o.valueCallback?o.valueCallback(h):h,f=n.valueCallback?n.valueCallback(f):f;const p=a.slice(u.length);return{value:f,rest:p}}}function findKey$1(o,a){for(const n in o)if(Object.prototype.hasOwnProperty.call(o,n)&&a(o[n]))return n}function findIndex(o,a){for(let n=0;n<o.length;n++)if(a(o[n]))return n}function buildMatchPatternFn(o){return(a,n={})=>{const s=a.match(o.matchPattern);if(!s)return null;const l=s[0],c=a.match(o.parsePattern);if(!c)return null;let u=o.valueCallback?o.valueCallback(c[0]):c[0];u=n.valueCallback?n.valueCallback(u):u;const d=a.slice(l.length);return{value:u,rest:d}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:o=>parseInt(o,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:o=>o+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getISOWeek(o,a){const n=toDate(o,a==null?void 0:a.in),s=+startOfISOWeek(n)-+startOfISOWeekYear(n);return Math.round(s/millisecondsInWeek)+1}function getWeekYear(o,a){var p,g,v,b;const n=toDate(o,a==null?void 0:a.in),s=n.getFullYear(),l=getDefaultOptions$1(),c=(a==null?void 0:a.firstWeekContainsDate)??((g=(p=a==null?void 0:a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??l.firstWeekContainsDate??((b=(v=l.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,u=constructFrom((a==null?void 0:a.in)||o,0);u.setFullYear(s+1,0,c),u.setHours(0,0,0,0);const d=startOfWeek(u,a),h=constructFrom((a==null?void 0:a.in)||o,0);h.setFullYear(s,0,c),h.setHours(0,0,0,0);const f=startOfWeek(h,a);return+n>=+d?s+1:+n>=+f?s:s-1}function startOfWeekYear(o,a){var d,h,f,p;const n=getDefaultOptions$1(),s=(a==null?void 0:a.firstWeekContainsDate)??((h=(d=a==null?void 0:a.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??n.firstWeekContainsDate??((p=(f=n.locale)==null?void 0:f.options)==null?void 0:p.firstWeekContainsDate)??1,l=getWeekYear(o,a),c=constructFrom((a==null?void 0:a.in)||o,0);return c.setFullYear(l,0,s),c.setHours(0,0,0,0),startOfWeek(c,a)}function getWeek(o,a){const n=toDate(o,a==null?void 0:a.in),s=+startOfWeek(n,a)-+startOfWeekYear(n,a);return Math.round(s/millisecondsInWeek)+1}const dateLongFormatter=(o,a)=>{switch(o){case"P":return a.date({width:"short"});case"PP":return a.date({width:"medium"});case"PPP":return a.date({width:"long"});case"PPPP":default:return a.date({width:"full"})}},timeLongFormatter=(o,a)=>{switch(o){case"p":return a.time({width:"short"});case"pp":return a.time({width:"medium"});case"ppp":return a.time({width:"long"});case"pppp":default:return a.time({width:"full"})}},dateTimeLongFormatter=(o,a)=>{const n=o.match(/(P+)(p+)?/)||[],s=n[1],l=n[2];if(!l)return dateLongFormatter(o,a);let c;switch(s){case"P":c=a.dateTime({width:"short"});break;case"PP":c=a.dateTime({width:"medium"});break;case"PPP":c=a.dateTime({width:"long"});break;case"PPPP":default:c=a.dateTime({width:"full"});break}return c.replace("{{date}}",dateLongFormatter(s,a)).replace("{{time}}",timeLongFormatter(l,a))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(o){return dayOfYearTokenRE.test(o)}function isProtectedWeekYearToken(o){return weekYearTokenRE.test(o)}function warnOrThrowProtectedError(o,a,n){const s=message(o,a,n);if(console.warn(s),throwTokens.includes(o))throw new RangeError(s)}function message(o,a,n){const s=o[0]==="Y"?"years":"days of the month";return`Use \`${o.toLowerCase()}\` instead of \`${o}\` (in \`${a}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function getDefaultOptions(){return Object.assign({},getDefaultOptions$1())}function getISODay(o,a){const n=toDate(o,a==null?void 0:a.in).getDay();return n===0?7:n}function transpose(o,a){const n=isConstructor(a)?new a(0):constructFrom(a,0);return n.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),n.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()),n}function isConstructor(o){var a;return typeof o=="function"&&((a=o.prototype)==null?void 0:a.constructor)===o}const TIMEZONE_UNIT_PRIORITY=10;class Setter{constructor(){M(this,"subPriority",0)}validate(a,n){return!0}}class ValueSetter extends Setter{constructor(a,n,s,l,c){super(),this.value=a,this.validateValue=n,this.setValue=s,this.priority=l,c&&(this.subPriority=c)}validate(a,n){return this.validateValue(a,this.value,n)}set(a,n,s){return this.setValue(a,n,this.value,s)}}class DateTimezoneSetter extends Setter{constructor(n,s){super();M(this,"priority",TIMEZONE_UNIT_PRIORITY);M(this,"subPriority",-1);this.context=n||(l=>constructFrom(s,l))}set(n,s){return s.timestampIsSet?n:constructFrom(n,transpose(n,this.context))}}let Parser$1=class{run(a,n,s,l){const c=this.parse(a,n,s,l);return c?{setter:new ValueSetter(c.value,this.validate,this.set,this.priority,this.subPriority),rest:c.rest}:null}validate(a,n,s){return!0}};class EraParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",140);M(this,"incompatibleTokens",["R","u","t","T"])}parse(n,s,l){switch(s){case"G":case"GG":case"GGG":return l.era(n,{width:"abbreviated"})||l.era(n,{width:"narrow"});case"GGGGG":return l.era(n,{width:"narrow"});case"GGGG":default:return l.era(n,{width:"wide"})||l.era(n,{width:"abbreviated"})||l.era(n,{width:"narrow"})}}set(n,s,l){return s.era=l,n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}}const numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(o,a){return o&&{value:a(o.value),rest:o.rest}}function parseNumericPattern(o,a){const n=a.match(o);return n?{value:parseInt(n[0],10),rest:a.slice(n[0].length)}:null}function parseTimezonePattern(o,a){const n=a.match(o);if(!n)return null;if(n[0]==="Z")return{value:0,rest:a.slice(1)};const s=n[1]==="+"?1:-1,l=n[2]?parseInt(n[2],10):0,c=n[3]?parseInt(n[3],10):0,u=n[5]?parseInt(n[5],10):0;return{value:s*(l*millisecondsInHour+c*millisecondsInMinute+u*millisecondsInSecond),rest:a.slice(n[0].length)}}function parseAnyDigitsSigned(o){return parseNumericPattern(numericPatterns.anyDigitsSigned,o)}function parseNDigits(o,a){switch(o){case 1:return parseNumericPattern(numericPatterns.singleDigit,a);case 2:return parseNumericPattern(numericPatterns.twoDigits,a);case 3:return parseNumericPattern(numericPatterns.threeDigits,a);case 4:return parseNumericPattern(numericPatterns.fourDigits,a);default:return parseNumericPattern(new RegExp("^\\d{1,"+o+"}"),a)}}function parseNDigitsSigned(o,a){switch(o){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,a);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,a);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,a);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,a);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+o+"}"),a)}}function dayPeriodEnumToHours(o){switch(o){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(o,a){const n=a>0,s=n?a:1-a;let l;if(s<=50)l=o||100;else{const c=s+50,u=Math.trunc(c/100)*100,d=o>=c%100;l=o+u-(d?100:0)}return n?l:1-l}function isLeapYearIndex(o){return o%400===0||o%4===0&&o%100!==0}class YearParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",130);M(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,s,l){const c=u=>({year:u,isTwoDigitYear:s==="yy"});switch(s){case"y":return mapValue(parseNDigits(4,n),c);case"yo":return mapValue(l.ordinalNumber(n,{unit:"year"}),c);default:return mapValue(parseNDigits(s.length,n),c)}}validate(n,s){return s.isTwoDigitYear||s.year>0}set(n,s,l){const c=n.getFullYear();if(l.isTwoDigitYear){const d=normalizeTwoDigitYear(l.year,c);return n.setFullYear(d,0,1),n.setHours(0,0,0,0),n}const u=!("era"in s)||s.era===1?l.year:1-l.year;return n.setFullYear(u,0,1),n.setHours(0,0,0,0),n}}class LocalWeekYearParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",130);M(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,s,l){const c=u=>({year:u,isTwoDigitYear:s==="YY"});switch(s){case"Y":return mapValue(parseNDigits(4,n),c);case"Yo":return mapValue(l.ordinalNumber(n,{unit:"year"}),c);default:return mapValue(parseNDigits(s.length,n),c)}}validate(n,s){return s.isTwoDigitYear||s.year>0}set(n,s,l,c){const u=getWeekYear(n,c);if(l.isTwoDigitYear){const h=normalizeTwoDigitYear(l.year,u);return n.setFullYear(h,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),startOfWeek(n,c)}const d=!("era"in s)||s.era===1?l.year:1-l.year;return n.setFullYear(d,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),startOfWeek(n,c)}}class ISOWeekYearParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",130);M(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,s){return parseNDigitsSigned(s==="R"?4:s.length,n)}set(n,s,l){const c=constructFrom(n,0);return c.setFullYear(l,0,4),c.setHours(0,0,0,0),startOfISOWeek(c)}}class ExtendedYearParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",130);M(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,s){return parseNDigitsSigned(s==="u"?4:s.length,n)}set(n,s,l){return n.setFullYear(l,0,1),n.setHours(0,0,0,0),n}}class QuarterParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",120);M(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,s,l){switch(s){case"Q":case"QQ":return parseNDigits(s.length,n);case"Qo":return l.ordinalNumber(n,{unit:"quarter"});case"QQQ":return l.quarter(n,{width:"abbreviated",context:"formatting"})||l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return l.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return l.quarter(n,{width:"wide",context:"formatting"})||l.quarter(n,{width:"abbreviated",context:"formatting"})||l.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=1&&s<=4}set(n,s,l){return n.setMonth((l-1)*3,1),n.setHours(0,0,0,0),n}}class StandAloneQuarterParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",120);M(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,s,l){switch(s){case"q":case"qq":return parseNDigits(s.length,n);case"qo":return l.ordinalNumber(n,{unit:"quarter"});case"qqq":return l.quarter(n,{width:"abbreviated",context:"standalone"})||l.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return l.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return l.quarter(n,{width:"wide",context:"standalone"})||l.quarter(n,{width:"abbreviated",context:"standalone"})||l.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=1&&s<=4}set(n,s,l){return n.setMonth((l-1)*3,1),n.setHours(0,0,0,0),n}}class MonthParser extends Parser$1{constructor(){super(...arguments);M(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);M(this,"priority",110)}parse(n,s,l){const c=u=>u-1;switch(s){case"M":return mapValue(parseNumericPattern(numericPatterns.month,n),c);case"MM":return mapValue(parseNDigits(2,n),c);case"Mo":return mapValue(l.ordinalNumber(n,{unit:"month"}),c);case"MMM":return l.month(n,{width:"abbreviated",context:"formatting"})||l.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return l.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return l.month(n,{width:"wide",context:"formatting"})||l.month(n,{width:"abbreviated",context:"formatting"})||l.month(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=11}set(n,s,l){return n.setMonth(l,1),n.setHours(0,0,0,0),n}}class StandAloneMonthParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",110);M(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,s,l){const c=u=>u-1;switch(s){case"L":return mapValue(parseNumericPattern(numericPatterns.month,n),c);case"LL":return mapValue(parseNDigits(2,n),c);case"Lo":return mapValue(l.ordinalNumber(n,{unit:"month"}),c);case"LLL":return l.month(n,{width:"abbreviated",context:"standalone"})||l.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return l.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return l.month(n,{width:"wide",context:"standalone"})||l.month(n,{width:"abbreviated",context:"standalone"})||l.month(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=0&&s<=11}set(n,s,l){return n.setMonth(l,1),n.setHours(0,0,0,0),n}}function setWeek(o,a,n){const s=toDate(o,n==null?void 0:n.in),l=getWeek(s,n)-a;return s.setDate(s.getDate()-l*7),toDate(s,n==null?void 0:n.in)}class LocalWeekParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",100);M(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,s,l){switch(s){case"w":return parseNumericPattern(numericPatterns.week,n);case"wo":return l.ordinalNumber(n,{unit:"week"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=1&&s<=53}set(n,s,l,c){return startOfWeek(setWeek(n,l,c),c)}}function setISOWeek(o,a,n){const s=toDate(o,n==null?void 0:n.in),l=getISOWeek(s,n)-a;return s.setDate(s.getDate()-l*7),s}class ISOWeekParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",100);M(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,s,l){switch(s){case"I":return parseNumericPattern(numericPatterns.week,n);case"Io":return l.ordinalNumber(n,{unit:"week"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=1&&s<=53}set(n,s,l){return startOfISOWeek(setISOWeek(n,l))}}const DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];class DateParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",90);M(this,"subPriority",1);M(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,s,l){switch(s){case"d":return parseNumericPattern(numericPatterns.date,n);case"do":return l.ordinalNumber(n,{unit:"date"});default:return parseNDigits(s.length,n)}}validate(n,s){const l=n.getFullYear(),c=isLeapYearIndex(l),u=n.getMonth();return c?s>=1&&s<=DAYS_IN_MONTH_LEAP_YEAR[u]:s>=1&&s<=DAYS_IN_MONTH[u]}set(n,s,l){return n.setDate(l),n.setHours(0,0,0,0),n}}class DayOfYearParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",90);M(this,"subpriority",1);M(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,s,l){switch(s){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,n);case"Do":return l.ordinalNumber(n,{unit:"date"});default:return parseNDigits(s.length,n)}}validate(n,s){const l=n.getFullYear();return isLeapYearIndex(l)?s>=1&&s<=366:s>=1&&s<=365}set(n,s,l){return n.setMonth(0,l),n.setHours(0,0,0,0),n}}function setDay(o,a,n){var g,v,b,w;const s=getDefaultOptions$1(),l=(n==null?void 0:n.weekStartsOn)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??s.weekStartsOn??((w=(b=s.locale)==null?void 0:b.options)==null?void 0:w.weekStartsOn)??0,c=toDate(o,n==null?void 0:n.in),u=c.getDay(),h=(a%7+7)%7,f=7-l,p=a<0||a>6?a-(u+f)%7:(h+f)%7-(u+f)%7;return addDays(c,p,n)}class DayParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",90);M(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,s,l){switch(s){case"E":case"EE":case"EEE":return l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return l.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=6}set(n,s,l,c){return n=setDay(n,l,c),n.setHours(0,0,0,0),n}}class LocalDayParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",90);M(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,s,l,c){const u=d=>{const h=Math.floor((d-1)/7)*7;return(d+c.weekStartsOn+6)%7+h};switch(s){case"e":case"ee":return mapValue(parseNDigits(s.length,n),u);case"eo":return mapValue(l.ordinalNumber(n,{unit:"day"}),u);case"eee":return l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"eeeee":return l.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"})}}validate(n,s){return s>=0&&s<=6}set(n,s,l,c){return n=setDay(n,l,c),n.setHours(0,0,0,0),n}}class StandAloneLocalDayParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",90);M(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,s,l,c){const u=d=>{const h=Math.floor((d-1)/7)*7;return(d+c.weekStartsOn+6)%7+h};switch(s){case"c":case"cc":return mapValue(parseNDigits(s.length,n),u);case"co":return mapValue(l.ordinalNumber(n,{unit:"day"}),u);case"ccc":return l.day(n,{width:"abbreviated",context:"standalone"})||l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"});case"ccccc":return l.day(n,{width:"narrow",context:"standalone"});case"cccccc":return l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return l.day(n,{width:"wide",context:"standalone"})||l.day(n,{width:"abbreviated",context:"standalone"})||l.day(n,{width:"short",context:"standalone"})||l.day(n,{width:"narrow",context:"standalone"})}}validate(n,s){return s>=0&&s<=6}set(n,s,l,c){return n=setDay(n,l,c),n.setHours(0,0,0,0),n}}function setISODay(o,a,n){const s=toDate(o,n==null?void 0:n.in),l=getISODay(s,n),c=a-l;return addDays(s,c,n)}class ISODayParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",90);M(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,s,l){const c=u=>u===0?7:u;switch(s){case"i":case"ii":return parseNDigits(s.length,n);case"io":return l.ordinalNumber(n,{unit:"day"});case"iii":return mapValue(l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),c);case"iiiii":return mapValue(l.day(n,{width:"narrow",context:"formatting"}),c);case"iiiiii":return mapValue(l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),c);case"iiii":default:return mapValue(l.day(n,{width:"wide",context:"formatting"})||l.day(n,{width:"abbreviated",context:"formatting"})||l.day(n,{width:"short",context:"formatting"})||l.day(n,{width:"narrow",context:"formatting"}),c)}}validate(n,s){return s>=1&&s<=7}set(n,s,l){return n=setISODay(n,l),n.setHours(0,0,0,0),n}}class AMPMParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",80);M(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,s,l){switch(s){case"a":case"aa":case"aaa":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,l){return n.setHours(dayPeriodEnumToHours(l),0,0,0),n}}class AMPMMidnightParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",80);M(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,s,l){switch(s){case"b":case"bb":case"bbb":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,l){return n.setHours(dayPeriodEnumToHours(l),0,0,0),n}}class DayPeriodParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",80);M(this,"incompatibleTokens",["a","b","t","T"])}parse(n,s,l){switch(s){case"B":case"BB":case"BBB":return l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return l.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return l.dayPeriod(n,{width:"wide",context:"formatting"})||l.dayPeriod(n,{width:"abbreviated",context:"formatting"})||l.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,s,l){return n.setHours(dayPeriodEnumToHours(l),0,0,0),n}}class Hour1to12Parser extends Parser$1{constructor(){super(...arguments);M(this,"priority",70);M(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,s,l){switch(s){case"h":return parseNumericPattern(numericPatterns.hour12h,n);case"ho":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=1&&s<=12}set(n,s,l){const c=n.getHours()>=12;return c&&l<12?n.setHours(l+12,0,0,0):!c&&l===12?n.setHours(0,0,0,0):n.setHours(l,0,0,0),n}}class Hour0to23Parser extends Parser$1{constructor(){super(...arguments);M(this,"priority",70);M(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,s,l){switch(s){case"H":return parseNumericPattern(numericPatterns.hour23h,n);case"Ho":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=0&&s<=23}set(n,s,l){return n.setHours(l,0,0,0),n}}class Hour0To11Parser extends Parser$1{constructor(){super(...arguments);M(this,"priority",70);M(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,s,l){switch(s){case"K":return parseNumericPattern(numericPatterns.hour11h,n);case"Ko":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=0&&s<=11}set(n,s,l){return n.getHours()>=12&&l<12?n.setHours(l+12,0,0,0):n.setHours(l,0,0,0),n}}class Hour1To24Parser extends Parser$1{constructor(){super(...arguments);M(this,"priority",70);M(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,s,l){switch(s){case"k":return parseNumericPattern(numericPatterns.hour24h,n);case"ko":return l.ordinalNumber(n,{unit:"hour"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=1&&s<=24}set(n,s,l){const c=l<=24?l%24:l;return n.setHours(c,0,0,0),n}}class MinuteParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",60);M(this,"incompatibleTokens",["t","T"])}parse(n,s,l){switch(s){case"m":return parseNumericPattern(numericPatterns.minute,n);case"mo":return l.ordinalNumber(n,{unit:"minute"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=0&&s<=59}set(n,s,l){return n.setMinutes(l,0,0),n}}class SecondParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",50);M(this,"incompatibleTokens",["t","T"])}parse(n,s,l){switch(s){case"s":return parseNumericPattern(numericPatterns.second,n);case"so":return l.ordinalNumber(n,{unit:"second"});default:return parseNDigits(s.length,n)}}validate(n,s){return s>=0&&s<=59}set(n,s,l){return n.setSeconds(l,0),n}}class FractionOfSecondParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",30);M(this,"incompatibleTokens",["t","T"])}parse(n,s){const l=c=>Math.trunc(c*Math.pow(10,-s.length+3));return mapValue(parseNDigits(s.length,n),l)}set(n,s,l){return n.setMilliseconds(l),n}}class ISOTimezoneWithZParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",10);M(this,"incompatibleTokens",["t","T","x"])}parse(n,s){switch(s){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,n);case"XX":return parseTimezonePattern(timezonePatterns.basic,n);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,n);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,n);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,n)}}set(n,s,l){return s.timestampIsSet?n:constructFrom(n,n.getTime()-getTimezoneOffsetInMilliseconds(n)-l)}}class ISOTimezoneParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",10);M(this,"incompatibleTokens",["t","T","X"])}parse(n,s){switch(s){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,n);case"xx":return parseTimezonePattern(timezonePatterns.basic,n);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,n);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,n);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,n)}}set(n,s,l){return s.timestampIsSet?n:constructFrom(n,n.getTime()-getTimezoneOffsetInMilliseconds(n)-l)}}class TimestampSecondsParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",40);M(this,"incompatibleTokens","*")}parse(n){return parseAnyDigitsSigned(n)}set(n,s,l){return[constructFrom(n,l*1e3),{timestampIsSet:!0}]}}class TimestampMillisecondsParser extends Parser$1{constructor(){super(...arguments);M(this,"priority",20);M(this,"incompatibleTokens","*")}parse(n){return parseAnyDigitsSigned(n)}set(n,s,l){return[constructFrom(n,l),{timestampIsSet:!0}]}}const parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse$2(o,a,n,s){var S,E,T,C;const l=()=>constructFrom(n,NaN),c=getDefaultOptions(),u=c.locale??enUS,d=c.firstWeekContainsDate??((E=(S=c.locale)==null?void 0:S.options)==null?void 0:E.firstWeekContainsDate)??1,h=c.weekStartsOn??((C=(T=c.locale)==null?void 0:T.options)==null?void 0:C.weekStartsOn)??0,f={firstWeekContainsDate:d,weekStartsOn:h,locale:u},p=[new DateTimezoneSetter(s==null?void 0:s.in,n)],g=a.match(longFormattingTokensRegExp).map(A=>{const R=A[0];if(R in longFormatters){const j=longFormatters[R];return j(A,u.formatLong)}return A}).join("").match(formattingTokensRegExp),v=[];for(let A of g){isProtectedWeekYearToken(A)&&warnOrThrowProtectedError(A,a,o),isProtectedDayOfYearToken(A)&&warnOrThrowProtectedError(A,a,o);const R=A[0],j=parsers[R];if(j){const{incompatibleTokens:D}=j;if(Array.isArray(D)){const H=v.find(q=>D.includes(q.token)||q.token===R);if(H)throw new RangeError(`The format string mustn't contain \`${H.fullToken}\` and \`${A}\` at the same time`)}else if(j.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${A}\` and any other token at the same time`);v.push({token:R,fullToken:A});const O=j.run(o,A,u.match,f);if(!O)return l();p.push(O.setter),o=O.rest}else{if(R.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(A==="''"?A="'":R==="'"&&(A=cleanEscapedString(A)),o.indexOf(A)===0)o=o.slice(A.length);else return l()}}if(o.length>0&&notWhitespaceRegExp.test(o))return l();const b=p.map(A=>A.priority).sort((A,R)=>R-A).filter((A,R,j)=>j.indexOf(A)===R).map(A=>p.filter(R=>R.priority===A).sort((R,j)=>j.subPriority-R.subPriority)).map(A=>A[0]);let w=toDate(n,s==null?void 0:s.in);if(isNaN(+w))return l();const x={};for(const A of b){if(!A.validate(w,f))return l();const R=A.set(w,x,f);Array.isArray(R)?(w=R[0],Object.assign(x,R[1])):w=R}return w}function cleanEscapedString(o){return o.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}const selected$1="_selected_gtk9b_101",today$2="_today_gtk9b_281",invalid="_invalid_gtk9b_299",styles$j={"calendar-container":"_calendar-container_gtk9b_1","calendar-sidebar-options":"_calendar-sidebar-options_gtk9b_17","calendar-sidebar-option-buttton":"_calendar-sidebar-option-buttton_gtk9b_27","picker-time-container":"_picker-time-container_gtk9b_37","scroll-picker-minutes":"_scroll-picker-minutes_gtk9b_81",selected:selected$1,"picker-date-header":"_picker-date-header_gtk9b_111","picker-date-body":"_picker-date-body_gtk9b_181","date-picker-circle":"_date-picker-circle_gtk9b_221","month-picker-circle":"_month-picker-circle_gtk9b_237","year-picker-circle":"_year-picker-circle_gtk9b_239","in-range":"_in-range_gtk9b_257","end-range":"_end-range_gtk9b_265","start-range":"_start-range_gtk9b_265",today:today$2,invalid},today$1=new Date,startDate$1=new Date(today$1.getFullYear()-100,today$1.getMonth(),today$1.getDate()),endDate$1=new Date(today$1.getFullYear()+100,today$1.getMonth(),today$1.getDate()),inRangeTime$1=(o,a,n)=>differenceInCalendarDays(o,a)>-1&&differenceInCalendarDays(n,o)>-1,stateValue=(o,a,n,s)=>{let l;n?s?(n instanceof Date?l={sTime:n,eTime:n}:l=n,l.sTime.getTime()<o.getTime()&&(l.sTime=o),l.eTime.getTime()>a.getTime()&&(l.eTime=a)):(n instanceof Date?l=n:l=n.sTime,l.getTime()<o.getTime()&&(l=o),l.getTime()>a.getTime()&&(l=a)):l=s?{sTime:today$1,eTime:today$1}:today$1;const c=l instanceof Date?l.getMonth():l.sTime.getMonth(),u=l instanceof Date?l.getFullYear():l.sTime.getFullYear();return{value:n?l:void 0,selectMonth:c,selectYear:u,tab:0}};class TCalendar extends React2.Component{constructor(n){super(n);M(this,"minDate");M(this,"maxDate");this.minDate=!this.props.min||this.props.min.getTime()<startDate$1.getTime()?startDate$1:this.props.min,this.maxDate=!this.props.max||this.props.max.getTime()>endDate$1.getTime()?endDate$1:this.props.max,this.state=stateValue(this.minDate,this.maxDate,this.props.value,this.props.range),this.showDateInMonth=this.showDateInMonth.bind(this),this.showMonthInYear=this.showMonthInYear.bind(this),this.showYearInRange=this.showYearInRange.bind(this),this.getTitle=this.getTitle.bind(this)}componentDidUpdate(n){n.value!==this.props.value&&this.setState(stateValue(this.minDate,this.maxDate,this.props.value,this.props.range))}showDateInMonth(){let n=new Date(this.state.selectYear,this.state.selectMonth,1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Array.from({length:7}).map((s,l)=>{switch(l){case 0:var c=this.props.t("su");break;case 1:c=this.props.t("mo");break;case 2:c=this.props.t("tu");break;case 3:c=this.props.t("we");break;case 4:c=this.props.t("th");break;case 5:c=this.props.t("fr");break;case 6:c=this.props.t("sa");break;default:c="";break}return jsxRuntimeExports.jsx("div",{className:`${styles$j["date-picker-circle"]} date-picker-circle`,children:jsxRuntimeExports.jsx("span",{className:"label-4 row",children:c})},"dtwk-"+l)}),Array.from({length:42}).map((s,l)=>{var p,g,v;let c=l%7+Math.floor(l/7)*7-n.getDay();const u=new Date(this.state.selectYear,this.state.selectMonth,c+1);let d=`${styles$j["date-picker-circle"]} date-picker-circle`,h="body-3";c+1===today$1.getDate()&&this.state.selectMonth===today$1.getMonth()&&this.state.selectYear===today$1.getFullYear()&&(d+=` ${styles$j.today}`);let f;return inRangeTime$1(u,this.minDate,this.maxDate)?this.state.value instanceof Date?this.state.value.getTime()===u.getTime()&&(d+=` ${styles$j.selected}`):((p=this.state.value)==null?void 0:p.sTime.getDate())===u.getDate()&&Math.abs(differenceInCalendarDays(u,this.state.value.sTime))<1||((g=this.state.value)==null?void 0:g.eTime.getDate())===u.getDate()&&Math.abs(differenceInCalendarDays(u,this.state.value.eTime))<1?d+=` ${styles$j.selected} ${styles$j[`${((v=this.state.value)==null?void 0:v.sTime.getDate())===u.getDate()&&Math.abs(differenceInCalendarDays(u,this.state.value.sTime))<1?"start":"end"}-range`]}`:this.state.value&&inRangeTime$1(u,this.state.value.sTime,this.state.value.eTime)&&(d+=` ${styles$j["in-range"]}`):d+=` ${styles$j.invalid}`,u.getMonth()!==this.state.selectMonth&&(h="placeholder-2"),jsxRuntimeExports.jsx("div",{className:d,style:f,children:jsxRuntimeExports.jsx("button",{type:"button",className:`${h} row`,onClick:()=>{const b=this.state.value;if(this.props.range){const w=!b||u.getTime()<b.sTime.getTime()?{sTime:u,eTime:u}:{sTime:b.sTime,eTime:u};this.setState({...this.state,value:w}),this.props.onSelect&&this.props.onSelect(w)}else this.setState({...this.state,value:u}),this.props.onSelect&&this.props.onSelect(u)},children:u.getDate()})},u.toString())})]})}showMonthInYear(){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:Array.from({length:12}).map((n,s)=>{switch(s){case 0:var l=this.props.i18n.language==="en"?"Jan":this.props.t("january");break;case 1:l=this.props.i18n.language==="en"?"Feb":this.props.t("february");break;case 2:l=this.props.i18n.language==="en"?"Mar":this.props.t("march");break;case 3:l=this.props.i18n.language==="en"?"Apr":this.props.t("april");break;case 4:l=this.props.i18n.language==="en"?"May":this.props.t("may");break;case 5:l=this.props.i18n.language==="en"?"Jun":this.props.t("june");break;case 6:l=this.props.i18n.language==="en"?"Jul":this.props.t("july");break;case 7:l=this.props.i18n.language==="en"?"Aug":this.props.t("august");break;case 8:l=this.props.i18n.language==="en"?"Sep":this.props.t("september");break;case 9:l=this.props.i18n.language==="en"?"Oct":this.props.t("october");break;case 10:l=this.props.i18n.language==="en"?"Nov":this.props.t("november");break;case 11:l=this.props.i18n.language==="en"?"Dec":this.props.t("december");break;default:l="";break}const c=new Date(this.state.selectYear,s);let u=`${styles$j["month-picker-circle"]} month-picker-circle`;return this.state.selectYear===today$1.getFullYear()&&today$1.getMonth()===s&&(u+=` ${styles$j.today}`),inRangeTime$1(c,this.minDate,this.maxDate)?this.state.value instanceof Date?this.state.selectYear===this.state.value.getFullYear()&&s===this.state.value.getMonth()&&(u+=` ${styles$j.selected}`):this.state.value&&(s===this.state.value.sTime.getMonth()&&this.state.value.sTime.getFullYear()===this.state.selectYear||s===this.state.value.eTime.getMonth()&&this.state.value.eTime.getFullYear()===this.state.selectYear)?u+=` ${styles$j.selected} ${styles$j[`${s===this.state.value.sTime.getMonth()&&this.state.value.sTime.getFullYear()===this.state.selectYear?"start":"end"}-range`]}`:this.state.value&&inRangeTime$1(c,this.state.value.sTime,this.state.value.eTime)&&(u+=` ${styles$j["in-range"]}`):u+=` ${styles$j.invalid}`,jsxRuntimeExports.jsx("div",{className:u,children:jsxRuntimeExports.jsx("button",{type:"button",className:"body-3 row",onClick:()=>{this.setState({...this.state,selectMonth:s,tab:0})},children:l})},c.toString())})})}showYearInRange(){return Array.from({length:12}).map((n,s)=>{var d,h,f;let l=this.state.selectYear-(this.state.selectYear-startDate$1.getFullYear())%12,c=s+l,u=`${styles$j["year-picker-circle"]} year-picker-circle`;return c===today$1.getFullYear()&&(u+=` ${styles$j.today}`),c<this.minDate.getFullYear()||c>this.maxDate.getFullYear()?u+=` ${styles$j.invalid}`:this.state.value instanceof Date?c===this.state.value.getFullYear()&&(u+=` ${styles$j.selected}`):c===((d=this.state.value)==null?void 0:d.sTime.getFullYear())||c===((h=this.state.value)==null?void 0:h.eTime.getFullYear())?u+=` ${styles$j.selected} ${styles$j[`${c===((f=this.state.value)==null?void 0:f.sTime.getFullYear())?"start":"end"}-range`]}`:this.state.value&&c>this.state.value.sTime.getFullYear()&&c<this.state.value.eTime.getFullYear()&&(u+=` ${styles$j["in-range"]}`),jsxRuntimeExports.jsx("div",{className:u,children:jsxRuntimeExports.jsx("button",{type:"button",className:"body-3 row",onClick:()=>{this.setState({...this.state,tab:1,selectYear:c})},children:c})},c.toString())})}getTitle(){switch(this.state.tab){case 2:let s=this.state.selectYear-(this.state.selectYear-startDate$1.getFullYear())%12;return`${s}-${s+11}`;case 1:return this.state.selectYear;default:switch(this.state.selectMonth){case 0:var n=this.props.t("january");break;case 1:n=this.props.t("february");break;case 2:n=this.props.t("march");break;case 3:n=this.props.t("april");break;case 4:n=this.props.t("may");break;case 5:n=this.props.t("june");break;case 6:n=this.props.t("july");break;case 7:n=this.props.t("august");break;case 8:n=this.props.t("september");break;case 9:n=this.props.t("october");break;case 10:n=this.props.t("november");break;case 11:n=this.props.t("december");break;default:n="";break}return`${n}${this.props.i18n.language==="en"?" ":"/"}${this.state.selectYear}`}}render(){return jsxRuntimeExports.jsxs("div",{className:`${styles$j["calendar-container"]} col ${this.props.className??""}`,style:this.props.style,children:[this.props.header,jsxRuntimeExports.jsxs("div",{className:`${styles$j["picker-date-header"]} row`,children:[jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{switch(this.state.tab){case 2:this.state.selectYear-10<startDate$1.getFullYear()?this.setState({...this.state,selectYear:startDate$1.getFullYear()}):this.setState({...this.state,selectYear:this.state.selectYear-10});break;case 1:new Date(this.state.selectYear,this.state.selectMonth-1).getTime()>=startDate$1.getTime()&&this.setState({...this.state,selectYear:this.state.selectYear-1});break;default:const s=new Date(this.state.selectYear,this.state.selectMonth-1);s.getTime()>=startDate$1.getTime()&&this.setState({...this.state,selectMonth:s.getMonth(),selectYear:s.getFullYear()});break}},children:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/left-arrow",size:"1.4rem"})}),jsxRuntimeExports.jsx("span",{className:"heading-7",onClick:()=>{this.state.tab!==2&&this.setState({...this.state,tab:this.state.tab===0?1:2})},children:this.getTitle()}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{switch(this.state.tab){case 2:this.state.selectYear+10>endDate$1.getFullYear()?this.setState({...this.state,selectYear:endDate$1.getFullYear()}):this.setState({...this.state,selectYear:this.state.selectYear+10});break;case 1:new Date(this.state.selectYear,this.state.selectMonth+1).getTime()<=endDate$1.getTime()&&this.setState({...this.state,selectYear:this.state.selectYear+1});break;default:const s=new Date(this.state.selectYear,this.state.selectMonth+1);s.getTime()<=endDate$1.getTime()&&this.setState({...this.state,selectMonth:s.getMonth(),selectYear:s.getFullYear()});break}},children:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/right-arrow",size:"1.4rem"})})]}),jsxRuntimeExports.jsx("div",{className:`${styles$j["picker-date-body"]} row`,children:this.state.tab===2?this.showYearInRange():this.state.tab===1?this.showMonthInYear():this.showDateInMonth()}),this.props.footer]})}}const Calendar$1=withTranslation()(TCalendar),styles$i={"button-container":"_button-container_ig51p_1","button-label":"_button-label_ig51p_129"};function Button(o){const a=React2.useRef(null);return React2.useEffect(()=>{if(a.current)switch(o.type){case"submit":let n=function(s){switch(s.key.toLowerCase()){case"enter":a.current.click();break}};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}}},[o.type,a.current]),o.linkTo?jsxRuntimeExports.jsxs("a",{id:o.id,href:o.disabled?void 0:o.linkTo,target:o.target,className:`${styles$i["button-container"]} row ${o.className??"button-text-3"}`,style:o.style,onClick:o.onClick,onFocus:o.onFocus,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,onMouseMove:o.onMouseMove,children:[o.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$i["button-label"],children:o.label}),o.suffix]}):jsxRuntimeExports.jsxs("button",{ref:a,id:o.id,type:o.type??"button",disabled:o.disabled,className:`${styles$i["button-container"]} row ${o.className??"button-text-3"}`,style:o.style,onClick:o.onClick,onFocus:o.onFocus,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,onMouseMove:o.onMouseMove,children:[o.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$i["button-label"],children:o.label}),o.suffix]})}function SimpleButton(o){return jsxRuntimeExports.jsxs("button",{id:o.id,type:"button",disabled:o.disabled,className:`row ${o.className??""}`,style:o.style,onClick:o.onClick,onFocus:o.onFocus,onMouseEnter:o.onMouseEnter,onMouseLeave:o.onMouseLeave,onMouseMove:o.onMouseMove,children:[o.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$i["button-label"],children:o.label}),o.suffix]})}const today=new Date,startDate=new Date(today.getFullYear()-100,today.getMonth(),today.getDate()),endDate=new Date(today.getFullYear()+100,today.getMonth(),today.getDate()),dateToString=(o,a="dd/mm/yyyy")=>{let n=a.split(" "),s=n[0],l=n[1];s.includes("hh")&&(s=n[1],l=n[0]);let c=s.split(a.includes("/")?"/":"-").map(u=>{switch(u.toLowerCase()){case"dd":return o.getDate()<10?`0${o.getDate()}`:`${o.getDate()}`;case"mm":return o.getMonth()+1<10?`0${o.getMonth()+1}`:`${o.getMonth()+1}`;case"yyyy":return`${o.getFullYear()}`;default:return""}}).join(a.includes("/")?"/":"-");if(l){let u=l.split(":").map(d=>{switch(d){case"hh":return o.getHours()<10?`0${o.getHours()}`:`${o.getHours()}`;case"mm":return o.getMinutes()<10?`0${o.getMinutes()}`:`${o.getMinutes()}`;case"ss":return o.getSeconds()<10?`0${o.getSeconds()}`:`${o.getSeconds()}`;default:return""}}).join(":");return c+" "+u}return c},stringToDate=(o,a="dd/mm/yyyy",n="/")=>{let s=a,l="",c=o,u="",d=!1;a.trim().indexOf(" ")>-1&&(s=a.trim().split(" ")[0],l=a.trim().split(" ")[1],c=o.trim().split(" ")[0],u=o.trim().split(" ")[1]??"00:00:00",d=!0);let f=s.toLowerCase().split(n),p=c.split(n),g=f.indexOf("mm"),v=f.indexOf("dd"),b=f.indexOf("yyyy"),w=0,x=0,S=0;if(d){let C=l.split(":"),A=C.indexOf("HH");A<0&&(A=C.indexOf("hh"));let R=C.indexOf("mm"),j=C.indexOf("ss"),D=u.split(":");w=parseInt(D[A]??"0"),x=parseInt(D[R]??"0"),S=parseInt(D[j]??"0")}let E=parseInt(p[g]);E-=1;var T=new Date(parseInt(p[b]),E,parseInt(p[v]??"0"),w,x,S);return T},inRangeTime=(o,a,n)=>differenceInCalendarDays(o,a)>-1&&differenceInCalendarDays(n,o)>-1;function DateTimePicker({style:o={},...a}){const n=React2.useRef(null),s=React2.useRef(null),[l,c]=React2.useState(),u=React2.useMemo(()=>{var f,p,g;return l?l instanceof Date?jsxRuntimeExports.jsx(Text$2,{className:styles$k.value,children:dateToString(l,`dd/mm/yyyy${(f=a.pickerType)!=null&&f.includes("time")?" hh:mm":""}`)}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Text$2,{className:styles$k.value,style:{flex:"none",width:"fit-content"},children:[dateToString(l.start??new Date,`dd/mm/yyyy${(p=a.pickerType)!=null&&p.includes("time")||a.pickerType==="auto"?" hh:mm":""}`)," - ",dateToString(l.end??new Date,`dd/mm/yyyy${(g=a.pickerType)!=null&&g.includes("time")||a.pickerType==="auto"?" hh:mm":""}`)]}),l.repeatData&&jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/loop-2",size:"1.2rem"})]}):jsxRuntimeExports.jsx(Text$2,{className:styles$k.value,children:a.placeholder??""})},[l]);React2.useEffect(()=>{s.current&&(l&&l instanceof Date?s.current.value=dateToString(l,"dd/mm/yyyy"):s.current.value="")},[l,s.current]),React2.useEffect(()=>{switch(a.pickerType){case"date":case"datetime":c(a.value);break;default:c(!a.value||!a.endValue?void 0:{start:a.value,end:a.endValue,repeatData:a.pickerType==="auto"||!a.pickerType?a.repeatValue:void 0});break}},[a.value,a.endValue,a.repeatValue,a.pickerType]);const d=(f,p)=>{showPopup({ref:n,hideOverlay:!0,content:jsxRuntimeExports.jsx(PopupDateTimePicker,{ref:n,max:a.max,min:a.min,onClose:p,value:l instanceof Date?l:l==null?void 0:l.start,endValue:l instanceof Date||l==null?void 0:l.end,pickerType:a.pickerType,enableRepeat:a.enableRepeat||!!(!(l instanceof Date)&&(l!=null&&l.repeatData)),repeatValue:l instanceof Date||l==null?void 0:l.repeatData,style:{top:f.bottom+2,left:f.left+16},onApply:g=>{c(g),closePopup(n),a.onChange&&a.onChange(g),s.current&&s.current.focus()}})})},h=()=>{var f,p;switch(a.pickerType){case"date":return jsxRuntimeExports.jsxs("label",{id:a.id,className:`row ${a.simpleStyle?styles$k["simple-date-time-picker"]:styles$k["date-time-picker"]} ${a.className??(a.simpleStyle?"":"body-3")} ${(f=a.helperText)!=null&&f.length?styles$k["helper-text"]:""}`,"helper-text":a.helperText,style:{"--helper-text-color":a.helperTextColor??"#e14337",...o},onClick:g=>{const v=g.target.closest("label").getBoundingClientRect();d(v)},children:[a.prefix??jsxRuntimeExports.jsx(Winicon,{className:styles$k["prefix-icon"],src:"outline/user interface/calendar-date-2",size:"1.2rem"}),jsxRuntimeExports.jsx("input",{className:styles$k.value,ref:s,autoComplete:"off",disabled:a.disabled,placeholder:a.placeholder,readOnly:a.pickOnly,onKeyDown:g=>{switch(g.key.toLowerCase()){case"enter":g.target.blur();break}},onBlur:a.pickOnly?void 0:g=>{const v=g.target.value.trim();let b;v.match(/[0-9]{1,2}(\/|-)[0-9]{1,2}(\/|-)[0-9]{4}/g)&&(b=stringToDate(v,"dd/MM/yyyy","/"),inRangeTime(b,a.min??startDate,a.min??endDate)||(differenceInCalendarDays(a.min??startDate,b)>-1?b=a.min??startDate:differenceInCalendarDays(b,a.min??endDate)>-1?b=a.max??endDate:b=void 0)),c(b),a.onChange&&a.onChange(b)}}),a.suffix]});default:return jsxRuntimeExports.jsxs("div",{id:a.id,className:`row ${a.simpleStyle?styles$k["simple-date-time-picker"]:styles$k["date-time-picker"]} ${a.disabled?styles$k.disabled:""} ${a.className??(a.simpleStyle?"":"body-3")} ${(p=a.helperText)!=null&&p.length?styles$k["helper-text"]:""}`,"helper-text":a.helperText,style:{"--helper-text-color":a.helperTextColor??"#e14337",cursor:a.disabled?void 0:"pointer",...o},onClick:g=>{const v=g.target.closest(`div[class*="${a.simpleStyle?"simple-date-time-picker":"date-time-picker"}"]`);if(v.isOpen)return closePopup(n);const b=v.getBoundingClientRect();v.isOpen=!0,d(b,()=>{v.isOpen=!1})},children:[a.prefix??jsxRuntimeExports.jsx(Winicon,{className:styles$k["prefix-icon"],src:"outline/user interface/calendar-date-2",size:"1.2rem"}),u,a.suffix]})}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:n}),h()]})}const PopupDateTimePicker=React2.forwardRef(({value:o,style:a,endValue:n,repeatValue:s,onApply:l,pickerType:c="auto",enableRepeat:u=!1,min:d,max:h,onClose:f},p)=>{const g=useForm({shouldFocusError:!1}),[v,b]=React2.useState(!1),[w,x]=React2.useState(!1),S=new Date,[E,T]=React2.useState({type:1,value:["everyday"]}),C=React2.useRef(null),A=React2.useRef(null),R=React2.useRef(null),{t:j}=useTranslation(),D=/[0-9]{1,2}(\/|-)[0-9]{1,2}(\/|-)[0-9]{4}/g,O=/^(?:[01]\d|2[0-3]):[0-5]\d(?:[:][0-5]\d)?$/g;React2.useEffect(()=>()=>f==null?void 0:f(),[]),React2.useEffect(()=>{s&&u?(x(!0),T(s)):x(!1)},[s]),React2.useEffect(()=>{v&&c!=="auto"&&!c.includes("time")?(b(!1),g.setValue("time-start",null),g.setValue("time-end",null)):!v&&c.includes("time")&&b(!0)},[c]);const H=()=>{if(o){const Y=new Date(o);g.setValue("date-start",Y),A.current.getInput().value=dateToString(Y),(c.includes("time")||Y.getSeconds()===1)&&(b(!0),g.setValue("time-start",`${Y.getHours()<9?`0${Y.getHours()}`:Y.getHours()}:${Y.getMinutes()<9?`0${Y.getMinutes()}`:Y.getMinutes()}`))}else A.current.getInput().value=""},q=()=>{if((c!=null&&c.includes("range")||c==="auto")&&R.current)if(n){const Y=new Date(n);g.setValue("date-end",Y),R.current.getInput().value=dateToString(Y),(c.includes("time")||Y.getSeconds()===59)&&g.setValue("time-end",`${Y.getHours()<9?`0${Y.getHours()}`:Y.getHours()}:${Y.getMinutes()<9?`0${Y.getMinutes()}`:Y.getMinutes()}`)}else R.current.getInput().value=""};return React2.useEffect(()=>{o&&A.current&&H()},[o,A]),React2.useEffect(()=>{q()},[n,R,c]),jsxRuntimeExports.jsxs("div",{className:"col dropdown-popup",style:{padding:0,border:"none",backgroundColor:"transparent",...a},children:[jsxRuntimeExports.jsx(Popup,{ref:C}),jsxRuntimeExports.jsx(Calendar$1,{min:d,max:h,style:{width:"31.2rem"},range:c.includes("range")||c==="auto",value:c==="date"||c==="datetime"?g.watch("date-start"):g.watch("date-start")&&g.watch("date-end")?{sTime:g.watch("date-start"),eTime:g.watch("date-end")}:void 0,header:c!=="date"&&jsxRuntimeExports.jsxs("div",{className:"row",style:{flexWrap:"wrap",gap:"0.8rem 1.2rem",padding:"1.6rem",borderBottom:"var(--neutral-main-border,1px solid light-dark(#EAEAEC, #313135))"},children:[jsxRuntimeExports.jsx(TextField,{ref:A,autoComplete:"off",className:"col12 body-3",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},placeholder:c.includes("range")||c==="auto"?j("start-date"):"dd/mm/yyyy",onComplete:Y=>Y.target.blur(),onBlur:Y=>{const te=Y.target.value;if(D.test(te)){const ee=stringToDate(te,"dd/mm/yyyy","/");(c.includes("range")||c==="auto")&&differenceInCalendarDays(g.getValues("date-end"),ee)<0&&(g.setValue("date-end",ee),R.current.getInput().value=dateToString(ee)),g.setValue("date-start",ee)}else Y.target.value=g.getValues("date-start")?dateToString(g.getValues("date-start")):""}}),(c.includes("range")||c==="auto")&&jsxRuntimeExports.jsx(TextField,{ref:R,autoComplete:"off",className:"col12 body-3",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},placeholder:j("end-date"),onComplete:Y=>Y.target.blur(),onBlur:Y=>{const te=Y.target.value;if(D.test(te)){const ee=stringToDate(te,"dd/mm/yyyy","/");differenceInCalendarDays(ee,g.getValues("date-start"))<0&&(g.setValue("date-start",ee),A.current.getInput().value=dateToString(ee)),g.setValue("date-end",ee)}else Y.target.value=g.getValues("date-end")?dateToString(g.getValues("date-end")):""}}),v&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TextField,{autoComplete:"off",name:"time-start",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},onComplete:Y=>{Y.target.blur()},register:g.register("time-start",{onChange:Y=>Y.target.value=Y.target.value.trim(),onBlur:Y=>{O.test(Y.target.value)?g.setValue("time-start",Y.target.value):Y.target.value=""}}),className:"col12 body-3",placeholder:"hh:mm",onFocus:Y=>{const te=Y.target.closest("div").getBoundingClientRect();showPopup({ref:C,hideOverlay:!0,content:jsxRuntimeExports.jsx("div",{className:`col ${styles$k["popup-actions"]} dropdown-popup`,style:{maxHeight:"24rem",top:te.bottom+2,right:document.body.offsetWidth-te.right,width:te.width,overflow:"hidden auto",border:"var(--neutral-main-border,1px solid light-dark(#EAEAEC, #313135))"},children:Array.from({length:48}).map((ee,re)=>{if(re%2===0)var ne=`${re/2<9?`0${re/2}`:re/2}:00`;else ne=`${(re-1)/2<9?`0${(re-1)/2}`:(re-1)/2}:30`;return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{g.setValue("time-start",ne),closePopup(C)},children:jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:ne})},"time-"+re)})})})}}),(c.includes("range")||c==="auto")&&jsxRuntimeExports.jsx(TextField,{autoComplete:"off",name:"time-end",style:{"--gutter":"1.2rem",padding:"0.4rem 1.2rem"},onComplete:Y=>{Y.target.blur()},register:g.register("time-end",{onChange:Y=>Y.target.value=Y.target.value.trim(),onBlur:Y=>{O.test(Y.target.value)?g.setValue("time-end",Y.target.value):Y.target.value=""}}),className:"col12 body-3",placeholder:"hh:mm",onFocus:Y=>{const te=Y.target.closest("div").getBoundingClientRect();showPopup({ref:C,hideOverlay:!0,content:jsxRuntimeExports.jsx("div",{className:`col ${styles$k["popup-actions"]}`,style:{maxHeight:"24rem",top:te.bottom+2,right:document.body.offsetWidth-te.right,width:te.width,overflow:"hidden auto",border:"var(--neutral-main-border,1px solid light-dark(#EAEAEC, #313135))"},children:Array.from({length:48}).map((ee,re)=>{if(re%2===0)var ne=`${re/2<9?`0${re/2}`:re/2}:00`;else ne=`${(re-1)/2<9?`0${(re-1)/2}`:(re-1)/2}:30`;return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{g.setValue("time-end",ne),closePopup(C)},children:jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:ne})},"time-"+re)})})})}})]})]}),footer:c!=="date"&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[w&&jsxRuntimeExports.jsxs("div",{className:"col",style:{borderTop:"var(--neutral-main-border,1px solid light-dark(#EAEAEC, #313135))"},children:[jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:4,padding:"1.2rem 1.6rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{flex:1},children:"Lặp lại"}),jsxRuntimeExports.jsx(Button,{style:{padding:0},label:(()=>{switch(E.type){case 1:return j("daily");case 2:return j("weekly");case 3:return j("monthly");default:return""}})(),suffix:jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/down-arrow",size:"1.4rem",style:{padding:"0.2rem"}}),onClick:Y=>{const te=Y.target.closest("button").getBoundingClientRect();showPopup({ref:C,hideOverlay:!0,style:{position:"absolute",top:te.bottom+2,left:te.x+8},body:jsxRuntimeExports.jsx("div",{className:"col popup-actions",children:Array.from({length:3}).map((ee,re)=>{let ne="";switch(re){case 0:ne=j("daily");break;case 1:ne=j("weekly");break;case 2:ne=j("monthly");break}return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{let ce=["everyday"];switch(re){case 0:ce=["everyday"];break;case 1:ce=S.getDay();break;case 2:ce=S.getDate();break}T({type:re+1,value:[ce]}),closePopup(C)},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:ne})},"tStatus-"+re)})})})}})]}),(()=>{switch(E.type){case 2:return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{padding:"0 1.6rem"},children:j("on")+" "+j("date").toLowerCase()}),jsxRuntimeExports.jsx("div",{className:"row",style:{justifyContent:"space-between",padding:"0.4rem 1.6rem"},children:Array.from({length:7}).map((Y,te)=>{switch(te){case 0:var ee=j("su");break;case 1:ee=j("mo");break;case 2:ee=j("tu");break;case 3:ee=j("we");break;case 4:ee=j("th");break;case 5:ee=j("fr");break;case 6:ee=j("sa");break;default:ee="";break}return jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:4,alignItems:"center"},children:[jsxRuntimeExports.jsx(Checkbox,{size:"1.8rem",value:E.value.includes(te),disabled:E.value.includes(te)&&E.value.length===1,onChange:re=>{T(re?{type:2,value:[...E.value,te]}:{type:2,value:E.value.filter(ne=>ne!==te)})}}),jsxRuntimeExports.jsx(Text$2,{className:"placeholder-2",children:ee})]},"weekday-"+te)})})]});case 3:return jsxRuntimeExports.jsxs("div",{className:"row",style:{justifyContent:"space-between",padding:"0.4rem 1.6rem",gap:"1.2rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{flex:1},children:j("on")+" "+j("date").toLowerCase()}),jsxRuntimeExports.jsx(Button,{style:{padding:0},label:E.value[0]==="last"?j("Last"):`${E.value[0]}`,suffix:jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/down-arrow",size:"1.4rem",style:{padding:"0.2rem"}}),onClick:Y=>{const te=Y.target.closest("button").getBoundingClientRect();showPopup({ref:C,hideOverlay:!0,style:{top:te.bottom+2,right:document.body.offsetWidth-te.right,maxHeight:"30.4rem"},body:jsxRuntimeExports.jsx("div",{className:"col popup-actions",style:{flex:1,overflow:"hidden auto"},children:Array.from({length:29}).map((ee,re)=>{switch(re){case 28:var ne=j("Last");break;default:ne=`${re+1}`;break}return jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{T({type:3,value:[re===28?"last":re+1]}),closePopup(C)},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:ne})},"date-"+re)})})})}})]});default:return null}})()]}),l&&jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",padding:"1.2rem 1.6rem",borderTop:"var(--neutral-main-border,1px solid light-dark(#EAEAEC, #313135))"},children:[c==="auto"&&jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:4},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/time-alarm",size:"1.6rem",style:{padding:"0.7rem",borderRadius:"50%",backgroundColor:v?"var(--neutral-disable-background-color,light-dark(#F4F4F5, #494950))":void 0},onClick:()=>{b(!v)}}),(u||c==="auto")&&jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/loop-2",size:"1.6rem",style:{padding:"0.7rem",borderRadius:"50%",backgroundColor:w?"var(--neutral-disable-background-color,light-dark(#F4F4F5, #494950))":void 0},onClick:()=>{x(!w)}})]}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(Button,{label:j("reset"),onClick:()=>{g.setValue("date-start",null),g.setValue("date-end",null),g.setValue("time-start",null),g.setValue("time-end",null),H(),q()}}),jsxRuntimeExports.jsx(Button,{label:j("apply"),disabled:!g.watch("date-start")||!g.watch("date-end")&&(c.includes("range")||c==="auto"),className:"button-text-3 button-primary",onClick:()=>{var re,ne;let Y=g.getValues("date-start"),te=v&&(re=g.getValues("time-start"))!=null&&re.length?g.getValues("time-start"):"00:00";if(Y.setHours(parseInt(te.split(":")[0]),parseInt(te.split(":")[1]),v?1:0,0),c.includes("range")||c==="auto"){var ee=g.getValues("date-end");let ce=v&&(ne=g.getValues("time-end"))!=null&&ne.length?g.getValues("time-end"):"23:59";ee.setHours(parseInt(ce.split(":")[0]),parseInt(ce.split(":")[1]),v?59:0,0)}l(!c.includes("range")&&c!=="auto"?Y:{start:Y,end:ee,repeatData:w?E:void 0}),closePopup(p)}})]})]}),onSelect:Y=>{c!=="date"?Y instanceof Date?(g.setValue("date-start",Y),A.current&&(A.current.getInput().value=dateToString(Y))):(g.setValue("date-start",Y.sTime),A.current&&(A.current.getInput().value=dateToString(Y.sTime)),(c.includes("range")||c==="auto")&&(g.setValue("date-end",Y.eTime),R.current&&(R.current.getInput().value=dateToString(Y.eTime)))):l&&(l(Y),closePopup(p))}})]})}),focus="_focus_1wjox_91",disabled$1="_disabled_1wjox_99",styles$h={"select-multi-container":"_select-multi-container_1wjox_1","select-multi-simple-style":"_select-multi-simple-style_1wjox_1","preview-container":"_preview-container_1wjox_29","selected-item-value":"_selected-item-value_1wjox_41",focus,disabled:disabled$1,"helper-text":"_helper-text_1wjox_111","select-multi-popup":"_select-multi-popup_1wjox_179","search-options":"_search-options_1wjox_209","select-tile":"_select-tile_1wjox_251","see-more":"_see-more_1wjox_325"},SelectMultiple=React2.forwardRef(({style:o={},previewMaxLength:a=2,...n},s)=>{var x;const l=React2.useRef(null),c=React2.useRef(null),[u,d]=React2.useState([]),[h,f]=React2.useState([]),[p,g]=React2.useState(!1),v=(S,E)=>{var C;S.stopPropagation();let T=h.filter(A=>A!==E);f(T),(C=n.onChange)==null||C.call(n,T)};React2.useEffect(()=>{f(n.value??[])},[n.value]),React2.useEffect(()=>{d(n.options??[])},[n.options]);const b=S=>{var E;S.stopPropagation(),f([]),(E=n.onChange)==null||E.call(n,[])},w=()=>{if(p)return null;const S=l.current.getBoundingClientRect();let E={width:S.width};S.bottom+240>=document.body.offsetHeight?E.bottom=`calc(100dvh - ${S.y}px + 2px)`:E.top=S.bottom+2,c.current=E,g(!0)};return React2.useImperativeHandle(s,()=>({element:l.current,isOpen:p,setIsOpen:g,options:u,setOptions:d,onOpenOptions:w}),[p,u,l]),jsxRuntimeExports.jsxs("div",{id:n.id,ref:l,className:`${n.simpleStyle?styles$h["select-multi-simple-style"]:styles$h["select-multi-container"]} ${p?styles$h.focus:""} row ${(x=n.helperText)!=null&&x.length?styles$h["helper-text"]:""} ${n.disabled?styles$h.disabled:""} ${n.className??(n.simpleStyle?"":"body-3")}`,"helper-text":n.helperText,style:{"--helper-text-color":n.helperTextColor??"#e14337",...o},onClick:n.disabled?void 0:w,children:[n.prefix,jsxRuntimeExports.jsxs("div",{className:`row ${styles$h["preview-container"]}`,children:[!h.length&&jsxRuntimeExports.jsx("span",{style:{opacity:.6,font:"inherit"},children:n.placeholder}),h.slice(0,a).map(S=>{const E=u.find(T=>T.id===S);return jsxRuntimeExports.jsxs("div",{className:`row ${styles$h["selected-item-value"]}`,children:[jsxRuntimeExports.jsx("span",{children:E==null?void 0:E.name}),jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",className:`${styles$h["remove-icon"]}`,size:12,onClick:E!=null&&E.disabled?void 0:T=>v(T,S)})]},S)}),h.length>a&&jsxRuntimeExports.jsx("div",{className:`row ${styles$h["selected-item-value"]}`,children:jsxRuntimeExports.jsxs("span",{children:["+",h.length-a]})})]}),n.suffix||(n.showClearValueButton&&h.length?jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/c-remove",size:14,onClick:b}):jsxRuntimeExports.jsx("div",{ref:S=>{S!=null&&S.parentElement&&S.parentElement.getBoundingClientRect().width<88&&(S.style.display="none")},className:"row",children:jsxRuntimeExports.jsx(Winicon,{src:`fill/arrows/${p?"up":"down"}-arrow`,size:12})})),p&&(n.customOptionsList??jsxRuntimeExports.jsx(OptionDropList,{onClose:S=>{const E=S.target.closest('div[class*="selected-item-value"] > div:last-child');E?E.click():setTimeout(()=>g(!1),150)},getOptions:n.getOptions??(async({search:S})=>{if(S!=null&&S.length){const E=u.filter(T=>S.toLowerCase().includes(`${T.id}`.toLowerCase())||`${T.id}`.toLowerCase().includes(S.toLowerCase())||S.toLowerCase().includes(`${T.name}`.toLowerCase())||`${T.name}`.toLowerCase().includes(S.toLowerCase()));return{data:E,totalCount:E.length}}return{data:u,totalCount:u.length}}),selected:u.filter(S=>h.includes(S.id)),style:c.current,onChange:(S,E)=>{var A;const T=[];E.forEach(R=>{u.every(j=>j.id!==R.id)&&T.push(R)}),T.length&&d([...u,...T]);const C=h.filter(R=>!E.some(j=>R===j.id))??[];S&&C.push(...E.filter((R,j,D)=>D.every(O=>R.id!==O.parentId)).map(R=>R.id)),f(C),(A=n.onChange)==null||A.call(n,C)}}))]})}),OptionDropList=o=>{const a=React2.useRef(null),n=React2.useRef(null),s=React2.useRef(null),[l,c]=React2.useState({data:[],totalCount:void 0}),{t:u}=useTranslation(),d=async h=>{var p,g;const f=await o.getOptions({length:h??0,search:((g=(p=n.current)==null?void 0:p.getInput())==null?void 0:g.value)??""});s.current===null&&(s.current=f.totalCount),c(h?{data:[...l.data,...f.data],totalCount:f.totalCount}:f)};return React2.useEffect(()=>{d()},[]),React2.useEffect(()=>{if(a.current){const h=f=>{(f.target===a.current||!a.current.contains(f.target))&&o.onClose(f)};return window.document.body.addEventListener("mousedown",h),()=>{window.document.body.removeEventListener("mousedown",h)}}},[a.current]),jsxRuntimeExports.jsx("div",{ref:a,onScroll:h=>{let f=h.target;Math.round(f.offsetHeight+f.scrollTop)>=f.scrollHeight-1&&l.totalCount&&l.data.length<l.totalCount&&d(l.data.length)},className:`col ${styles$h["select-multi-popup"]}`,style:o.style,children:l.totalCount===0&&!s.current?jsxRuntimeExports.jsxs("div",{className:"col",style:{alignItems:"center"},children:[jsxRuntimeExports.jsx(Winicon,{src:"color/files/archive-file",size:28}),jsxRuntimeExports.jsx("h6",{className:"heading-7",style:{margin:"0.8rem"},children:u("noResultFound")})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[s.current&&s.current>10&&jsxRuntimeExports.jsx("div",{className:`col ${styles$h["search-options"]}`,children:jsxRuntimeExports.jsx(TextField,{ref:n,className:"body-3 size32",placeholder:u("search"),prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/development/zoom",size:"1.4rem"}),onChange:h=>{h.target.value.trim().length%2===0&&d()},onComplete:h=>{h.target.blur(),d()}})}),l.totalCount===0?jsxRuntimeExports.jsxs("div",{className:"col",style:{alignItems:"center"},children:[jsxRuntimeExports.jsx(Winicon,{src:"color/files/archive-file",size:28}),jsxRuntimeExports.jsx("h6",{className:"heading-7",style:{margin:"0.8rem"},children:u("noResultFound")})]}):l.data.filter(h=>!h.parentId).map((h,f,p)=>jsxRuntimeExports.jsx(OptionsItemTile,{item:h,selected:o.selected,children:l.data.filter(g=>g.parentId===h.id),getOptions:o.getOptions,arr:p,onChange:o.onChange},h.id+"-"+f))]})})};function OptionsItemTile({item:o,children:a,selected:n,onChange:s,getOptions:l}){const[c,u]=React2.useState(!1),[d,h]=React2.useState({data:[],totalCount:0}),{t:f}=useTranslation();return React2.useEffect(()=>{a&&!d.totalCount&&h({data:a,totalCount:a.length})},[a]),React2.useEffect(()=>{c&&!d.totalCount&&(l==null||l({length:0,parentId:o.id}).then(p=>h(p)))},[c]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[o.totalChild?jsxRuntimeExports.jsxs("div",{className:`row label-4 ${styles$h["select-tile"]} ${o.disabled?styles$h.disabled:""}`,onClick:()=>u(!c),children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:2},children:jsxRuntimeExports.jsx(Checkbox,{size:16,disabled:o.disabled,value:n!=null&&n.some(p=>p.id===o.id)||d.data.length&&d.data.every(p=>n==null?void 0:n.some(g=>g.id===p.id))?!0:[...n.filter(p=>p.parentId===o.id),...d.data].some(p=>n==null?void 0:n.some(g=>g.id===p.id))?null:!1,onChange:p=>{s(p,[o,...d.data])}})}),typeof(o==null?void 0:o.name)=="object"?o.name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[o.totalChild!==void 0&&jsxRuntimeExports.jsx(Winicon,{src:`fill/arrows/triangle-${c?"down":"right"}`,size:12}),o.prefix,jsxRuntimeExports.jsx("span",{children:o.name})]})]}):jsxRuntimeExports.jsxs("label",{className:`row label-4 ${styles$h["select-tile"]} ${o.disabled?styles$h.disabled:""}`,children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:2},children:jsxRuntimeExports.jsx(Checkbox,{size:16,disabled:o.disabled,value:n==null?void 0:n.some(p=>p.id===o.id),onChange:p=>{s(p,[o])}})}),typeof(o==null?void 0:o.name)=="object"?o.name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[o.prefix,jsxRuntimeExports.jsx("span",{children:o.name})]})]}),c&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[d.data.map((p,g)=>jsxRuntimeExports.jsxs("label",{style:{paddingLeft:"calc(max(0.8rem, 5px) + max(0.8rem, 5px) + 20px)"},className:`row label-4 ${styles$h["select-tile"]} ${p.disabled?styles$h.disabled:""}`,children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:2},children:jsxRuntimeExports.jsx(Checkbox,{size:16,disabled:p.disabled,value:n==null?void 0:n.some(v=>v.id===p.id),onChange:v=>{s(v,[p])}})}),typeof(p==null?void 0:p.name)=="object"?p.name:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[p.prefix,jsxRuntimeExports.jsx("span",{children:p.name})]})]},p.id+"-"+g)),d.data.length<d.totalCount&&jsxRuntimeExports.jsx("div",{className:`button-text-5 ${styles$h["see-more"]}`,onClick:()=>{l==null||l({length:d.data.length,parentId:o.id}).then(p=>h(p))},children:f("seemore")})]})]})}const styles$g={"progress-bar-container":"_progress-bar-container_fz6uc_1","progress-bar-title":"_progress-bar-title_fz6uc_15","progress-bar-tile":"_progress-bar-tile_fz6uc_25","progress-bar-value":"_progress-bar-value_fz6uc_37","status-icon":"_status-icon_fz6uc_87"};function ProgressBar({id:o,status:a=ComponentStatus.INFOR,percent:n=80,titleText:s,title:l,hideTitle:c=!1,progressBarOnly:u=!1,fullColor:d,percentColor:h,style:f,progressBarStyle:p,className:g=""}){const[v,b]=React2.useState(!0);return u?jsxRuntimeExports.jsx("div",{id:o,className:`${styles$g["progress-bar-value"]} ${g}`,style:{"--percent-color":h,"--full-color":d,"--percent":`${n}%`,minWidth:"16rem",...f??{}}}):jsxRuntimeExports.jsxs("div",{id:o,className:`col ${styles$g["progress-bar-container"]} ${g}`,style:f?{padding:"1.6rem 2.4rem",...f}:{padding:"1.6rem 2.4rem"},children:[c?null:l??jsxRuntimeExports.jsxs("div",{className:`row ${styles$g["progress-bar-title"]}`,children:[jsxRuntimeExports.jsx("div",{className:"heading-8",children:s}),jsxRuntimeExports.jsx(Winicon,{src:v?"fill/arrows/down-arrow":"fill/arrows/up-arrow",onClick:()=>{b(!v)}})]}),v?jsxRuntimeExports.jsxs("div",{className:`row ${styles$g["progress-bar-tile"]}`,children:[jsxRuntimeExports.jsx("div",{className:styles$g["progress-bar-value"],style:{"--percent-color":h,"--full-color":d,"--percent":`${n}%`,...p??{}}}),a===ComponentStatus.INFOR?null:jsxRuntimeExports.jsx("div",{className:`${styles$g["status-icon"]}`,children:getStatusIcon(a)}),jsxRuntimeExports.jsxs("div",{className:"label-4",children:[n,"/100"]})]}):null]})}var ComponentStatus=(o=>(o[o.INFOR=1]="INFOR",o[o.ERROR=2]="ERROR",o[o.WARNING=3]="WARNING",o[o.SUCCSESS=4]="SUCCSESS",o))(ComponentStatus||{});const getStatusIcon=o=>{switch(o){case 2:return errorSvg;case 3:return warningSvg;case 4:return successSvg;default:return inforSvg}},inforSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.0003 3.41669C15.116 3.41669 12.2965 4.27198 9.89826 5.87442C7.50005 7.47686 5.63087 9.75446 4.52709 12.4192C3.42331 15.084 3.13451 18.0162 3.69721 20.8451C4.25991 23.674 5.64884 26.2725 7.68836 28.312C9.72787 30.3515 12.3264 31.7404 15.1553 32.3031C17.9842 32.8658 20.9164 32.577 23.5811 31.4733C26.2459 30.3695 28.5235 28.5003 30.1259 26.1021C31.7284 23.7039 32.5837 20.8843 32.5837 18C32.5795 14.1336 31.0417 10.4267 28.3077 7.69266C25.5737 4.95867 21.8668 3.42087 18.0003 3.41669V3.41669ZM19.2496 26.1715H16.7401V15.5695H19.2496V26.1715ZM19.0418 12.2384C18.9034 12.3653 18.7407 12.463 18.5637 12.5256C18.3866 12.5883 18.1987 12.6146 18.0113 12.603C17.8204 12.6157 17.6289 12.5899 17.4481 12.5273C17.2673 12.4647 17.101 12.3664 16.9588 12.2384C16.8333 12.1032 16.7363 11.9441 16.6737 11.7706C16.611 11.5971 16.584 11.4127 16.5943 11.2285C16.5815 11.04 16.6073 10.8509 16.67 10.6727C16.7327 10.4945 16.8309 10.3309 16.9588 10.1919C17.1013 10.0644 17.2678 9.96649 17.4484 9.9039C17.6291 9.84131 17.8204 9.81526 18.0113 9.82728C18.1987 9.81637 18.3864 9.843 18.5633 9.90561C18.7403 9.96822 18.903 10.0655 19.0418 10.1919C19.1697 10.3309 19.268 10.4945 19.3307 10.6727C19.3934 10.8509 19.4191 11.04 19.4064 11.2285C19.4166 11.4127 19.3896 11.5971 19.327 11.7706C19.2644 11.9441 19.1674 12.1032 19.0418 12.2384Z",fill:"#366AE2"})})}),errorSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.0003 3.41669C15.116 3.41669 12.2965 4.27198 9.89826 5.87442C7.50005 7.47686 5.63087 9.75446 4.52709 12.4192C3.42331 15.084 3.13451 18.0162 3.69721 20.8451C4.25991 23.674 5.64884 26.2725 7.68836 28.312C9.72787 30.3515 12.3264 31.7404 15.1553 32.3031C17.9842 32.8658 20.9164 32.577 23.5811 31.4733C26.2459 30.3695 28.5235 28.5003 30.1259 26.1021C31.7284 23.7039 32.5837 20.8843 32.5837 18C32.5724 14.1357 31.0324 10.4329 28.2999 7.70044C25.5674 4.96797 21.8646 3.42791 18.0003 3.41669V3.41669ZM24.016 22.2972L22.2976 24.0156L18.0003 19.7184L13.7031 24.0156L11.9847 22.2972L16.2819 18L11.9847 13.7028L13.7031 11.9844L18.0003 16.2816L22.2976 11.9844L24.016 13.7028L19.7187 18L24.016 22.2972Z",fill:"#E14337"})})}),warningSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M32.1516 25.8877L21.3215 5.41379C21.0014 4.81074 20.5231 4.30622 19.938 3.95437C19.3529 3.60252 18.6831 3.41663 18.0003 3.41663C17.3176 3.41663 16.6477 3.60252 16.0626 3.95437C15.4775 4.30622 14.9993 4.81074 14.6792 5.41379L3.84901 25.8877C3.54781 26.459 3.39954 27.0984 3.41863 27.744C3.43771 28.3895 3.6235 29.0191 3.95793 29.5716C4.29235 30.1241 4.76404 30.5806 5.32713 30.8969C5.89022 31.2131 6.52555 31.3783 7.17136 31.3763H28.8293C29.4751 31.3783 30.1104 31.2131 30.6735 30.8969C31.2366 30.5806 31.7083 30.1241 32.0427 29.5716C32.3771 29.0191 32.5629 28.3895 32.582 27.744C32.6011 27.0984 32.4528 26.459 32.1516 25.8877ZM18.0003 27.7294C17.6397 27.7294 17.2871 27.6224 16.9873 27.4221C16.6874 27.2217 16.4537 26.9369 16.3157 26.6037C16.1776 26.2705 16.1415 25.9039 16.2119 25.5502C16.2823 25.1965 16.4559 24.8715 16.7109 24.6165C16.966 24.3615 17.2909 24.1878 17.6446 24.1175C17.9983 24.0471 18.3649 24.0832 18.6981 24.2212C19.0313 24.3593 19.3161 24.593 19.5165 24.8928C19.7168 25.1927 19.8238 25.5453 19.8238 25.9059C19.8238 26.3895 19.6317 26.8533 19.2897 27.1953C18.9477 27.5373 18.4839 27.7294 18.0003 27.7294ZM19.216 21.6512H16.7847L16.1769 11.926H19.8238L19.216 21.6512Z",fill:"#FC6B03"})})}),successSvg=jsxRuntimeExports.jsx("div",{style:{width:"3.6rem",height:"3.6rem"},children:jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M18.0003 3.41669C15.116 3.41669 12.2965 4.27198 9.89826 5.87442C7.50005 7.47686 5.63087 9.75446 4.52709 12.4192C3.42331 15.084 3.13451 18.0162 3.69721 20.8451C4.25991 23.674 5.64884 26.2725 7.68836 28.312C9.72787 30.3515 12.3264 31.7404 15.1553 32.3031C17.9842 32.8658 20.9164 32.577 23.5811 31.4733C26.2459 30.3695 28.5235 28.5003 30.1259 26.1021C31.7284 23.7039 32.5837 20.8843 32.5837 18C32.5724 14.1357 31.0324 10.4329 28.2999 7.70044C25.5674 4.96797 21.8646 3.42791 18.0003 3.41669V3.41669ZM15.5698 24.5795L8.99026 18L10.7087 16.2816L15.5698 21.1427L25.292 11.4205L27.0104 13.1389L15.5698 24.5795Z",fill:"#39AC6D"})})});var reactPaginate$1={exports:{}},reactPaginate=reactPaginate$1.exports,hasRequiredReactPaginate;function requireReactPaginate(){return hasRequiredReactPaginate||(hasRequiredReactPaginate=1,function(o,a){(function(n,s){o.exports=s(React2)})(reactPaginate,n=>(()=>{var s={703:(d,h,f)=>{var p=f(414);function g(){}function v(){}v.resetWarningCache=g,d.exports=function(){function b(S,E,T,C,A,R){if(R!==p){var j=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw j.name="Invariant Violation",j}}function w(){return b}b.isRequired=b;var x={array:b,bigint:b,bool:b,func:b,number:b,object:b,string:b,symbol:b,any:b,arrayOf:w,element:b,elementType:b,instanceOf:w,node:b,objectOf:w,oneOf:w,oneOfType:w,shape:w,exact:w,checkPropTypes:v,resetWarningCache:g};return x.PropTypes=x,x}},697:(d,h,f)=>{d.exports=f(703)()},414:d=>{d.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:d=>{d.exports=n}},l={};function c(d){var h=l[d];if(h!==void 0)return h.exports;var f=l[d]={exports:{}};return s[d](f,f.exports,c),f.exports}c.n=d=>{var h=d&&d.__esModule?()=>d.default:()=>d;return c.d(h,{a:h}),h},c.d=(d,h)=>{for(var f in h)c.o(h,f)&&!c.o(d,f)&&Object.defineProperty(d,f,{enumerable:!0,get:h[f]})},c.o=(d,h)=>Object.prototype.hasOwnProperty.call(d,h),c.r=d=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})};var u={};return(()=>{c.r(u),c.d(u,{default:()=>Y});var d=c(98),h=c.n(d),f=c(697),p=c.n(f);function g(){return g=Object.assign?Object.assign.bind():function(te){for(var ee=1;ee<arguments.length;ee++){var re=arguments[ee];for(var ne in re)Object.prototype.hasOwnProperty.call(re,ne)&&(te[ne]=re[ne])}return te},g.apply(this,arguments)}var v=function(te){var ee=te.pageClassName,re=te.pageLinkClassName,ne=te.page,ce=te.selected,ve=te.activeClassName,be=te.activeLinkClassName,me=te.getEventListener,ae=te.pageSelectedHandler,pe=te.href,ie=te.extraAriaContext,se=te.pageLabelBuilder,de=te.rel,le=te.ariaLabel||"Page "+ne+(ie?" "+ie:""),ge=null;return ce&&(ge="page",le=te.ariaLabel||"Page "+ne+" is your current page",ee=ee!==void 0?ee+" "+ve:ve,re!==void 0?be!==void 0&&(re=re+" "+be):re=be),h().createElement("li",{className:ee},h().createElement("a",g({rel:de,role:pe?void 0:"button",className:re,href:pe,tabIndex:ce?"-1":"0","aria-label":le,"aria-current":ge,onKeyPress:ae},me(ae)),se(ne)))};v.propTypes={pageSelectedHandler:p().func.isRequired,selected:p().bool.isRequired,pageClassName:p().string,pageLinkClassName:p().string,activeClassName:p().string,activeLinkClassName:p().string,extraAriaContext:p().string,href:p().string,ariaLabel:p().string,page:p().number.isRequired,getEventListener:p().func.isRequired,pageLabelBuilder:p().func.isRequired,rel:p().string};const b=v;function w(){return w=Object.assign?Object.assign.bind():function(te){for(var ee=1;ee<arguments.length;ee++){var re=arguments[ee];for(var ne in re)Object.prototype.hasOwnProperty.call(re,ne)&&(te[ne]=re[ne])}return te},w.apply(this,arguments)}var x=function(te){var ee=te.breakLabel,re=te.breakAriaLabel,ne=te.breakClassName,ce=te.breakLinkClassName,ve=te.breakHandler,be=te.getEventListener,me=ne||"break";return h().createElement("li",{className:me},h().createElement("a",w({className:ce,role:"button",tabIndex:"0","aria-label":re,onKeyPress:ve},be(ve)),ee))};x.propTypes={breakLabel:p().oneOfType([p().string,p().node]),breakAriaLabel:p().string,breakClassName:p().string,breakLinkClassName:p().string,breakHandler:p().func.isRequired,getEventListener:p().func.isRequired};const S=x;function E(te){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return te??ee}function T(te){return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee},T(te)}function C(){return C=Object.assign?Object.assign.bind():function(te){for(var ee=1;ee<arguments.length;ee++){var re=arguments[ee];for(var ne in re)Object.prototype.hasOwnProperty.call(re,ne)&&(te[ne]=re[ne])}return te},C.apply(this,arguments)}function A(te,ee){for(var re=0;re<ee.length;re++){var ne=ee[re];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(te,ne.key,ne)}}function R(te,ee){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(re,ne){return re.__proto__=ne,re},R(te,ee)}function j(te,ee){if(ee&&(T(ee)==="object"||typeof ee=="function"))return ee;if(ee!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(te)}function D(te){if(te===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return te}function O(te){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ee){return ee.__proto__||Object.getPrototypeOf(ee)},O(te)}function H(te,ee,re){return ee in te?Object.defineProperty(te,ee,{value:re,enumerable:!0,configurable:!0,writable:!0}):te[ee]=re,te}var q=function(te){(function(me,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function");me.prototype=Object.create(ae&&ae.prototype,{constructor:{value:me,writable:!0,configurable:!0}}),Object.defineProperty(me,"prototype",{writable:!1}),ae&&R(me,ae)})(be,te);var ee,re,ne,ce,ve=(ne=be,ce=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var me,ae=O(ne);if(ce){var pe=O(this).constructor;me=Reflect.construct(ae,arguments,pe)}else me=ae.apply(this,arguments);return j(this,me)});function be(me){var ae,pe;return function(ie,se){if(!(ie instanceof se))throw new TypeError("Cannot call a class as a function")}(this,be),H(D(ae=ve.call(this,me)),"handlePreviousPage",function(ie){var se=ae.state.selected;ae.handleClick(ie,null,se>0?se-1:void 0,{isPrevious:!0})}),H(D(ae),"handleNextPage",function(ie){var se=ae.state.selected,de=ae.props.pageCount;ae.handleClick(ie,null,se<de-1?se+1:void 0,{isNext:!0})}),H(D(ae),"handlePageSelected",function(ie,se){if(ae.state.selected===ie)return ae.callActiveCallback(ie),void ae.handleClick(se,null,void 0,{isActive:!0});ae.handleClick(se,null,ie)}),H(D(ae),"handlePageChange",function(ie){ae.state.selected!==ie&&(ae.setState({selected:ie}),ae.callCallback(ie))}),H(D(ae),"getEventListener",function(ie){return H({},ae.props.eventListener,ie)}),H(D(ae),"handleClick",function(ie,se,de){var le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ge=le.isPrevious,Re=ge!==void 0&&ge,we=le.isNext,Se=we!==void 0&&we,xe=le.isBreak,ke=xe!==void 0&&xe,Ie=le.isActive,He=Ie!==void 0&&Ie;ie.preventDefault?ie.preventDefault():ie.returnValue=!1;var Le=ae.state.selected,De=ae.props.onClick,Ee=de;if(De){var oe=De({index:se,selected:Le,nextSelectedPage:de,event:ie,isPrevious:Re,isNext:Se,isBreak:ke,isActive:He});if(oe===!1)return;Number.isInteger(oe)&&(Ee=oe)}Ee!==void 0&&ae.handlePageChange(Ee)}),H(D(ae),"handleBreakClick",function(ie,se){var de=ae.state.selected;ae.handleClick(se,ie,de<ie?ae.getForwardJump():ae.getBackwardJump(),{isBreak:!0})}),H(D(ae),"callCallback",function(ie){ae.props.onPageChange!==void 0&&typeof ae.props.onPageChange=="function"&&ae.props.onPageChange({selected:ie})}),H(D(ae),"callActiveCallback",function(ie){ae.props.onPageActive!==void 0&&typeof ae.props.onPageActive=="function"&&ae.props.onPageActive({selected:ie})}),H(D(ae),"getElementPageRel",function(ie){var se=ae.state.selected,de=ae.props,le=de.nextPageRel,ge=de.prevPageRel,Re=de.selectedPageRel;return se-1===ie?ge:se===ie?Re:se+1===ie?le:void 0}),H(D(ae),"pagination",function(){var ie=[],se=ae.props,de=se.pageRangeDisplayed,le=se.pageCount,ge=se.marginPagesDisplayed,Re=se.breakLabel,we=se.breakClassName,Se=se.breakLinkClassName,xe=se.breakAriaLabels,ke=ae.state.selected;if(le<=de)for(var Ie=0;Ie<le;Ie++)ie.push(ae.getPageElement(Ie));else{var He=de/2,Le=de-He;ke>le-de/2?He=de-(Le=le-ke):ke<de/2&&(Le=de-(He=ke));var De,Ee,oe=function(Pe){return ae.getPageElement(Pe)},he=[];for(De=0;De<le;De++){var Me=De+1;if(Me<=ge)he.push({type:"page",index:De,display:oe(De)});else if(Me>le-ge)he.push({type:"page",index:De,display:oe(De)});else if(De>=ke-He&&De<=ke+(ke===0&&de>1?Le-1:Le))he.push({type:"page",index:De,display:oe(De)});else if(Re&&he.length>0&&he[he.length-1].display!==Ee&&(de>0||ge>0)){var fe=De<ke?xe.backward:xe.forward;Ee=h().createElement(S,{key:De,breakAriaLabel:fe,breakLabel:Re,breakClassName:we,breakLinkClassName:Se,breakHandler:ae.handleBreakClick.bind(null,De),getEventListener:ae.getEventListener}),he.push({type:"break",index:De,display:Ee})}}he.forEach(function(Pe,Oe){var je=Pe;Pe.type==="break"&&he[Oe-1]&&he[Oe-1].type==="page"&&he[Oe+1]&&he[Oe+1].type==="page"&&he[Oe+1].index-he[Oe-1].index<=2&&(je={type:"page",index:Pe.index,display:oe(Pe.index)}),ie.push(je.display)})}return ie}),me.initialPage!==void 0&&me.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(me.initialPage,") and forcePage (").concat(me.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),pe=me.initialPage?me.initialPage:me.forcePage?me.forcePage:0,ae.state={selected:pe},ae}return ee=be,(re=[{key:"componentDidMount",value:function(){var me=this.props,ae=me.initialPage,pe=me.disableInitialCallback,ie=me.extraAriaContext,se=me.pageCount,de=me.forcePage;ae===void 0||pe||this.callCallback(ae),ie&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(se)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(se,"). Did you forget a Math.ceil()?")),ae!==void 0&&ae>se-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(ae," > ").concat(se-1,").")),de!==void 0&&de>se-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(de," > ").concat(se-1,")."))}},{key:"componentDidUpdate",value:function(me){this.props.forcePage!==void 0&&this.props.forcePage!==me.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(me.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var me=this.state.selected,ae=this.props,pe=ae.pageCount,ie=me+ae.pageRangeDisplayed;return ie>=pe?pe-1:ie}},{key:"getBackwardJump",value:function(){var me=this.state.selected-this.props.pageRangeDisplayed;return me<0?0:me}},{key:"getElementHref",value:function(me){var ae=this.props,pe=ae.hrefBuilder,ie=ae.pageCount,se=ae.hrefAllControls;if(pe)return se||me>=0&&me<ie?pe(me+1,ie,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(me){var ae=me===this.state.selected;if(this.props.ariaLabelBuilder&&me>=0&&me<this.props.pageCount){var pe=this.props.ariaLabelBuilder(me+1,ae);return this.props.extraAriaContext&&!ae&&(pe=pe+" "+this.props.extraAriaContext),pe}}},{key:"getPageElement",value:function(me){var ae=this.state.selected,pe=this.props,ie=pe.pageClassName,se=pe.pageLinkClassName,de=pe.activeClassName,le=pe.activeLinkClassName,ge=pe.extraAriaContext,Re=pe.pageLabelBuilder;return h().createElement(b,{key:me,pageSelectedHandler:this.handlePageSelected.bind(null,me),selected:ae===me,rel:this.getElementPageRel(me),pageClassName:ie,pageLinkClassName:se,activeClassName:de,activeLinkClassName:le,extraAriaContext:ge,href:this.getElementHref(me),ariaLabel:this.ariaLabelBuilder(me),page:me+1,pageLabelBuilder:Re,getEventListener:this.getEventListener})}},{key:"render",value:function(){var me=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&me!==void 0)return me&&me(this.props);var ae=this.props,pe=ae.disabledClassName,ie=ae.disabledLinkClassName,se=ae.pageCount,de=ae.className,le=ae.containerClassName,ge=ae.previousLabel,Re=ae.previousClassName,we=ae.previousLinkClassName,Se=ae.previousAriaLabel,xe=ae.prevRel,ke=ae.nextLabel,Ie=ae.nextClassName,He=ae.nextLinkClassName,Le=ae.nextAriaLabel,De=ae.nextRel,Ee=this.state.selected,oe=Ee===0,he=Ee===se-1,Me="".concat(E(Re)).concat(oe?" ".concat(E(pe)):""),fe="".concat(E(Ie)).concat(he?" ".concat(E(pe)):""),Pe="".concat(E(we)).concat(oe?" ".concat(E(ie)):""),Oe="".concat(E(He)).concat(he?" ".concat(E(ie)):""),je=oe?"true":"false",Ve=he?"true":"false";return h().createElement("ul",{className:de||le,role:"navigation","aria-label":"Pagination"},h().createElement("li",{className:Me},h().createElement("a",C({className:Pe,href:this.getElementHref(Ee-1),tabIndex:oe?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":je,"aria-label":Se,rel:xe},this.getEventListener(this.handlePreviousPage)),ge)),this.pagination(),h().createElement("li",{className:fe},h().createElement("a",C({className:Oe,href:this.getElementHref(Ee+1),tabIndex:he?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":Ve,"aria-label":Le,rel:De},this.getEventListener(this.handleNextPage)),ke)))}}])&&A(ee.prototype,re),Object.defineProperty(ee,"prototype",{writable:!1}),be}(d.Component);H(q,"propTypes",{pageCount:p().number.isRequired,pageRangeDisplayed:p().number,marginPagesDisplayed:p().number,previousLabel:p().node,previousAriaLabel:p().string,prevPageRel:p().string,prevRel:p().string,nextLabel:p().node,nextAriaLabel:p().string,nextPageRel:p().string,nextRel:p().string,breakLabel:p().oneOfType([p().string,p().node]),breakAriaLabels:p().shape({forward:p().string,backward:p().string}),hrefBuilder:p().func,hrefAllControls:p().bool,onPageChange:p().func,onPageActive:p().func,onClick:p().func,initialPage:p().number,forcePage:p().number,disableInitialCallback:p().bool,containerClassName:p().string,className:p().string,pageClassName:p().string,pageLinkClassName:p().string,pageLabelBuilder:p().func,activeClassName:p().string,activeLinkClassName:p().string,previousClassName:p().string,nextClassName:p().string,previousLinkClassName:p().string,nextLinkClassName:p().string,disabledClassName:p().string,disabledLinkClassName:p().string,breakClassName:p().string,breakLinkClassName:p().string,extraAriaContext:p().string,ariaLabelBuilder:p().func,eventListener:p().string,renderOnZeroPageCount:p().func,selectedPageRel:p().string}),H(q,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(te){return te},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const Y=q})(),u})())}(reactPaginate$1)),reactPaginate$1.exports}var reactPaginateExports=requireReactPaginate();const ReactPaginate=getDefaultExportFromCjs(reactPaginateExports),pagination="_pagination_1ig6j_35",active="_active_1ig6j_83",styles$f={"custom-pagination":"_custom-pagination_1ig6j_1",pagination,active};function Pagination({id:o,currentPage:a,itemPerPage:n=10,totalItem:s,onChangePage:l,hidePageSize:c=!1,hideGoToPage:u=!1,style:d}){const h=React2.useRef(null),{t:f}=useTranslation(),p=React2.useRef(null);return React2.useEffect(()=>{if(h.current){const g=h.current.getInput();g&&(g.value=a.toString())}},[a]),a>1&&(s===0||Math.floor(s/n)+(s%n===0?0:1)<a)?(l(1,n),jsxRuntimeExports.jsx("div",{})):s>0?jsxRuntimeExports.jsxs("div",{id:o,className:`${styles$f["custom-pagination"]} row`,style:d,children:[c?null:jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Popup,{ref:p}),jsxRuntimeExports.jsx(Select1,{value:n,options:[10,20,50,100,200].map((g,v)=>({id:g,name:`${g}`})),style:{width:"6.8rem",padding:"0 0.8rem",height:"2.4rem"},suffix:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/down-arrow",size:"1.2rem"}),onChange:g=>{l(a,isNaN(parseInt(g.id))?n:parseInt(g.id))}}),jsxRuntimeExports.jsx(Text$2,{className:"body-3",children:f("ofItems",{totalItem:s})})]}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(ReactPaginate,{onPageChange:g=>{l(g.selected+1,n)},forcePage:a-1,breakClassName:"row button-text-3",breakLabel:"...",pageCount:Math.ceil(s/n),previousClassName:"row",previousLabel:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/left-arrow",size:"1.4rem"}),nextClassName:"row",nextLabel:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/right-arrow",size:"1.4rem"}),containerClassName:`${styles$f.pagination} row`,pageClassName:"row button-text-3",activeClassName:styles$f.active,hrefBuilder:g=>g>=1&&g<=Math.ceil(s/n)?`/page/${g}`:"#",renderOnZeroPageCount:null}),!u&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",backgroundColor:"var(--neutral-bolder-border-color, light-dark(#D7D7DB, #494950))",width:1}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-3",children:[f("go")," ",f("page").toLowerCase()]}),jsxRuntimeExports.jsx(TextField,{ref:h,style:{width:"4.8rem",textAlign:"center"},className:"body-3 size24",type:"number",onBlur:g=>{const v=g.target.value.trim().length?parseInt(g.target.value.trim()):void 0;v&&!isNaN(v)&&v>0&&v<=Math.ceil(s/n)?l(v,n):g.target.value=""}})]})]}):jsxRuntimeExports.jsx("div",{id:o})}const checkmark="_checkmark_1ba75_43",styles$e={"radio-btn-container":"_radio-btn-container_1ba75_1",checkmark},RadioButton=o=>{const a=React2.useRef(null),n=React2.useMemo(()=>{let s={"--size":o.size?typeof o.size=="number"?`${o.size}px`:o.size:"20px"};return o.offColor&&(s["--off-color"]=o.offColor),o.offColor&&(s["--active-color"]=o.activeColor),o.style&&(delete o.style.width,delete o.style.minWidth,delete o.style.maxWidth,delete o.style.height,delete o.style.minHeight,delete o.style.maxHeight,s={...o.style,...s}),s},[o.style,o.offColor,o.activeColor,o.size]);return jsxRuntimeExports.jsxs("label",{id:o.id,className:`row ${styles$e["radio-btn-container"]} ${o.className??""}`,style:n,children:[jsxRuntimeExports.jsx("input",{ref:a,type:"radio",checked:o.checked,name:o.name,value:o.value,disabled:o.disabled,onChange:o.onChange}),jsxRuntimeExports.jsx("span",{className:styles$e.checkmark})]})},styles$d={"simple-text-area":"_simple-text-area_1ygnl_1","text-area-container":"_text-area-container_1ygnl_3","helper-text":"_helper-text_1ygnl_95"};class TextArea extends React2.Component{constructor(){super(...arguments);M(this,"containerRef",React2.createRef());M(this,"getTextarea",()=>{var n;return(n=this.containerRef.current)==null?void 0:n.querySelector("textarea")})}render(){var s;const n=this.props.style??{};return jsxRuntimeExports.jsxs("label",{id:this.props.id,ref:this.containerRef,className:`${this.props.simpleStyle?styles$d["simple-text-area"]:styles$d["text-area-container"]} row ${this.props.className??(this.props.simpleStyle?"":"body-3")} ${(s=this.props.helperText)!=null&&s.length?styles$d["helper-text"]:""}`,"helper-text":this.props.helperText,style:{"--helper-text-color":this.props.helperTextColor??"#e14337",...n},children:[this.props.prefix,this.props.register?jsxRuntimeExports.jsx("textarea",{name:this.props.name,autoFocus:this.props.autoFocus,...this.props.register,maxLength:this.props.maxLength,placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onFocus:this.props.onFocus}):jsxRuntimeExports.jsx("textarea",{autoFocus:this.props.autoFocus,maxLength:this.props.maxLength,name:this.props.name,defaultValue:this.props.defaultValue,value:this.props.value,placeholder:this.props.placeholder,readOnly:this.props.readOnly,disabled:this.props.disabled,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur}),this.props.suffix]})}}const styles$c={"import-file-container":"_import-file-container_1l2yi_1","import-file-simple-style":"_import-file-simple-style_1l2yi_1","button-only":"_button-only_1l2yi_19","preview-icon":"_preview-icon_1l2yi_35","import-file-prefix":"_import-file-prefix_1l2yi_43","file-preview-content":"_file-preview-content_1l2yi_69","remove-preview-file":"_remove-preview-file_1l2yi_89","helper-text":"_helper-text_1l2yi_109"},cloudSvg=jsxRuntimeExports.jsxs("svg",{width:"100%",height:"100%",style:{width:"3rem",height:"3rem"},viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M22.5312 6.51941C20.3258 6.12929 18.0555 6.35518 15.9702 7.1722C13.8849 7.98923 12.0654 9.36573 10.712 11.1502C9.53042 12.7081 8.74407 14.5243 8.41412 16.4432C6.99557 16.9154 5.7486 17.8144 4.85059 19.0274C3.77621 20.4786 3.27749 22.2764 3.45068 24.0737C3.62388 25.871 4.45672 27.5405 5.78845 28.7599C7.12018 29.9792 8.85639 30.6621 10.662 30.6766H13.1063C13.7786 30.6766 14.3236 30.1316 14.3236 29.4594C14.3236 28.7871 13.7786 28.2421 13.1063 28.2421H10.6769C9.47485 28.2313 8.31921 27.7762 7.43253 26.9643C6.54471 26.1514 5.98948 25.0384 5.87402 23.8402C5.75855 22.642 6.09103 21.4435 6.80729 20.476C7.52354 19.5085 8.57279 18.8406 9.75252 18.6013C10.2753 18.4952 10.6682 18.061 10.7216 17.5303C10.9012 15.7476 11.5691 14.049 12.6518 12.6214C13.7345 11.1938 15.1901 10.0926 16.8583 9.43899C18.5266 8.78536 20.3428 8.60466 22.1071 8.91675C23.8715 9.22884 25.5155 10.0216 26.8583 11.2079C28.2011 12.3941 29.1905 13.9278 29.7178 15.6402C30.2451 17.3526 30.2898 19.1772 29.8469 20.9134C29.404 22.6495 28.4907 24.2297 27.2075 25.4802C25.9244 26.7308 24.3211 27.603 22.5742 28.001C21.9187 28.1504 21.5084 28.8028 21.6577 29.4583C21.807 30.1138 22.4595 30.5241 23.115 30.3748C25.2987 29.8772 27.3028 28.7869 28.9067 27.2238C30.5107 25.6606 31.6523 23.6853 32.2059 21.5152C32.7595 19.345 32.7037 17.0642 32.0446 14.9237C31.3855 12.7833 30.1486 10.8661 28.4701 9.38333C26.7916 7.90052 24.7366 6.90953 22.5312 6.51941Z",style:{fill:"var(--primary-main-color, #287cf0)"}}),jsxRuntimeExports.jsx("path",{d:"M17.1146 17.6431C17.2313 17.5264 17.3658 17.4384 17.5094 17.379C17.6513 17.3201 17.8067 17.2874 17.9697 17.2866L17.9753 17.2866L17.9809 17.2866C18.2906 17.288 18.5998 17.4069 18.8361 17.6431L23.7052 22.5123C24.1806 22.9876 24.1806 23.7584 23.7052 24.2338C23.2298 24.7091 22.4591 24.7091 21.9837 24.2338L19.1926 21.4427V29.4594C19.1926 30.1317 18.6476 30.6767 17.9753 30.6767C17.303 30.6767 16.758 30.1317 16.758 29.4594V21.4427L13.9669 24.2338C13.4916 24.7091 12.7208 24.7091 12.2455 24.2338C11.7701 23.7584 11.7701 22.9876 12.2455 22.5123L17.1146 17.6431Z",style:{fill:"var(--primary-main-color, #287cf0)"}})]}),fileSvg=jsxRuntimeExports.jsxs("svg",{className:styles$c["preview-icon"],width:"100%",height:"100%",style:{width:"3rem",height:"3rem"},viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("path",{d:"M20.9163 3.41669H7.54829C7.22597 3.41669 6.91686 3.54472 6.68895 3.77263C6.46105 4.00054 6.33301 4.30965 6.33301 4.63196V31.3681C6.33301 31.6904 6.46105 31.9995 6.68895 32.2274C6.91686 32.4553 7.22597 32.5834 7.54829 32.5834H29.4233C29.7456 32.5834 30.0547 32.4553 30.2826 32.2274C30.5105 31.9995 30.6386 31.6904 30.6386 31.3681V13.1389H22.1316C21.8093 13.1389 21.5002 13.0109 21.2723 12.783C21.0444 12.5551 20.9163 12.2459 20.9163 11.9236V3.41669Z",style:{fill:"var(--primary-main-color, #287cf0)"}}),jsxRuntimeExports.jsx("path",{d:"M29.9264 10.7084H23.3469V4.12884L29.9264 10.7084Z",style:{fill:"var(--primary-main-color, #287cf0)"}})]}),closeSvg=jsxRuntimeExports.jsx("svg",{width:"100%",height:"100%",style:{width:"2.4rem",height:"2.4rem"},fill:"none",xmlns:"http://www.w3.org/2000/svg",children:jsxRuntimeExports.jsx("path",{d:"M13.4144 12.0002L20.4144 5.00015L19.0002 3.58594L12.0002 10.5859L5.00015 3.58594L3.58594 5.00015L10.5859 12.0002L3.58594 19.0002L5.00015 20.4144L12.0002 13.4144L19.0002 20.4144L20.4144 19.0002L13.4144 12.0002Z",style:{fill:"var(--error-main-color, #E14337)"}})});function formatFileSize(o,a=2){if(o===0)return"0 Bytes";const n=1024,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],l=Math.floor(Math.log(o)/Math.log(n)),c=Math.min(l,s.length-1),u=o/Math.pow(n,c);return c===0?Math.round(u)+" "+s[c]:Number(u.toFixed(a)).toString()+" "+s[c]}const ImportFile=React2.forwardRef(({style:o={},...a},n)=>{var f,p,g,v,b;const s=React2.useRef(null),[l,c]=React2.useState(),{t:u}=useTranslation(),d=React2.useMemo(()=>a.maxSize?formatFileSize(a.maxSize):void 0,[a.maxSize]),h=React2.useMemo(()=>{var w;return(w=l==null?void 0:l[0])!=null&&w.size?`${l==null?void 0:l[0].size}KB`:a.subTitle??(d?u("limitFileWarning",{sizeTitle:d}):"")},[a.subTitle,d,l]);return React2.useImperativeHandle(n,()=>({showFilePicker(){var w;(w=s.current)==null||w.showPicker()},inputElement:s.current})),React2.useEffect(()=>{c(a.value?Array.isArray(a.value)?a.value:[a.value]:void 0)},[a.value]),jsxRuntimeExports.jsxs("label",{id:a.id,className:`${a.simpleStyle?styles$c["import-file-simple-style"]:styles$c["import-file-container"]} ${a.className??"row"} ${a.buttonOnly?styles$c["button-only"]:""} ${(f=a.helperText)!=null&&f.length?styles$c["helper-text"]:""}`,style:{"--helper-text-color":a.helperTextColor??"#e14337",cursor:l!=null&&l.length?void 0:"pointer",...o},"helper-text":a.helperText,htmlFor:l!=null&&l.length?"":void 0,children:[jsxRuntimeExports.jsx("input",{ref:s,disabled:a.disabled,type:"file",hidden:!0,multiple:a.multiple,accept:(p=a.allowType)==null?void 0:p.join(","),onChange:w=>{var S,E,T,C;let x;if((S=w.target.files)!=null&&S.length&&(x=[...w.target.files],a.maxSize&&x.some(A=>A.size>a.maxSize*1024)&&(ToastMessage.errors(u("limitFileError",{name:(E=x.find(A=>A.size>a.maxSize*1024))==null?void 0:E.name,sizeTitle:d})),x=x.filter(A=>A.size<=a.maxSize*1024))),x)if(a.multiple){const A=(l==null?void 0:l.filter(R=>x.every(j=>R.name!==j.name&&R.size!==j.size&&R.lastModified!==j.lastModified)))??[];c([...A,...x]),(T=a.onChange)==null||T.call(a,[...A,...x])}else c(x),(C=a.onChange)==null||C.call(a,x)}}),!a.buttonOnly&&(a.multiple&&(l!=null&&l.length)?jsxRuntimeExports.jsx("div",{className:"row",style:{flex:1,flexWrap:"wrap",gap:"0.8rem"},children:l.map(w=>{var x;return jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",padding:"0.6rem 0.8rem",borderRadius:"0.4rem",border:"var(--neutral-main-border,1px solid light-dark(#EAEAEC, #313135))",flex:"0 calc((100% * 6 / 24) - 0.8rem * 3 / 4)",width:"auto",minWidth:"11.4rem",...a.fileTagStyle??{}},children:[jsxRuntimeExports.jsx(Winicon,{src:`outline/${(x=w.type)!=null&&x.includes("image")?"multimedia/image":"files/file-export"}`,size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"subtitle-4",style:{flex:1,width:"100%"},maxLine:1,children:w.name}),jsxRuntimeExports.jsx(Winicon,{src:"fill/user interface/e-remove",size:"1.4rem",onClick:()=>{var E;const S=l==null?void 0:l.filter(T=>T.name!==w.name&&T.size!==w.size&&T.lastModified!==w.lastModified);c(S),(E=a.onChange)==null||E.call(a,S)},color:"#E14337"})]},`${w.name}-${w.size}-${w.lastModified}`)})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:`${styles$c["import-file-prefix"]} row`,style:{justifyContent:"center"},children:l!=null&&l.length?(g=l[0].type)!=null&&g.includes("image")?jsxRuntimeExports.jsx("img",{src:l[0]instanceof File?URL.createObjectURL(l[0]):(v=l==null?void 0:l[0])==null?void 0:v.url}):fileSvg:cloudSvg}),jsxRuntimeExports.jsxs("div",{className:`${styles$c["file-preview-content"]}`,children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{width:"100%"},children:((b=l==null?void 0:l[0])==null?void 0:b.name)??a.label??u("uploadFileAction")}),!!(h!=null&&h.length)&&jsxRuntimeExports.jsx(Text$2,{className:"subtitle-3",style:{width:"fit-content"},children:h})]})]})),l!=null&&l.length&&a.buttonOnly&&!a.multiple?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"button-text-6",children:(l==null?void 0:l[0].name)??""}),jsxRuntimeExports.jsx("button",{type:"button",className:`${styles$c["remove-preview-file"]}`,onClick:()=>{var w;c(void 0),(w=a.onChange)==null||w.call(a,void 0)},children:closeSvg})]}):jsxRuntimeExports.jsx(Button,{label:l!=null&&l.length?a.multiple?`${u("add")} ${u("file").toLowerCase()}`:`${u("remove")} ${u("file").toLowerCase()}`:`${u("choose")} ${u("file").toLowerCase()}`,className:"button-text-3 button-grey",onClick:()=>{var w,x;l&&!a.multiple?(c(void 0),(w=a.onChange)==null||w.call(a,void 0)):(x=s.current)==null||x.showPicker()}})]})});function r(o){var a,n,s="";if(typeof o=="string"||typeof o=="number")s+=o;else if(typeof o=="object")if(Array.isArray(o)){var l=o.length;for(a=0;a<l;a++)o[a]&&(n=r(o[a]))&&(s&&(s+=" "),s+=n)}else for(n in o)o[n]&&(s&&(s+=" "),s+=n);return s}function clsx(){for(var o,a,n=0,s="",l=arguments.length;n<l;n++)(o=arguments[n])&&(a=r(o))&&(s&&(s+=" "),s+=a);return s}function Mt(o){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=o:n.appendChild(document.createTextNode(o))}Mt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var L=o=>typeof o=="number"&&!isNaN(o),N=o=>typeof o=="string",P=o=>typeof o=="function",mt=o=>N(o)||L(o),B=o=>N(o)||P(o)?o:null,pt=(o,a)=>o===!1||L(o)&&o>0?o:a,z=o=>React2.isValidElement(o)||N(o)||P(o)||L(o);function Z(o,a,n=300){let{scrollHeight:s,style:l}=o;requestAnimationFrame(()=>{l.minHeight="initial",l.height=s+"px",l.transition=`all ${n}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(a,n)})})}function $$1({enter:o,exit:a,appendPosition:n=!1,collapse:s=!0,collapseDuration:l=300}){return function({children:c,position:u,preventExitTransition:d,done:h,nodeRef:f,isIn:p,playToast:g}){let v=n?`${o}--${u}`:o,b=n?`${a}--${u}`:a,w=React2.useRef(0);return React2.useLayoutEffect(()=>{let x=f.current,S=v.split(" "),E=T=>{T.target===f.current&&(g(),x.removeEventListener("animationend",E),x.removeEventListener("animationcancel",E),w.current===0&&T.type!=="animationcancel"&&x.classList.remove(...S))};x.classList.add(...S),x.addEventListener("animationend",E),x.addEventListener("animationcancel",E)},[]),React2.useEffect(()=>{let x=f.current,S=()=>{x.removeEventListener("animationend",S),s?Z(x,h,l):h()};p||(d?S():(w.current=1,x.className+=` ${b}`,x.addEventListener("animationend",S)))},[p]),React2.createElement(React2.Fragment,null,c)}}function J(o,a){return{content:tt(o.content,o.props),containerId:o.props.containerId,id:o.props.toastId,theme:o.props.theme,type:o.props.type,data:o.props.data||{},isLoading:o.props.isLoading,icon:o.props.icon,reason:o.removalReason,status:a}}function tt(o,a,n=!1){return React2.isValidElement(o)&&!N(o.type)?React2.cloneElement(o,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:n}):P(o)?o({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:n}):o}function yt({closeToast:o,theme:a,ariaLabel:n="close"}){return React2.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:s=>{s.stopPropagation(),o(!0)},"aria-label":n},React2.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React2.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function gt({delay:o,isRunning:a,closeToast:n,type:s="default",hide:l,className:c,controlledProgress:u,progress:d,rtl:h,isIn:f,theme:p}){let g=l||u&&d===0,v={animationDuration:`${o}ms`,animationPlayState:a?"running":"paused"};u&&(v.transform=`scaleX(${d})`);let b=clsx("Toastify__progress-bar",u?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${p}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":h}),w=P(c)?c({rtl:h,type:s,defaultClassName:b}):clsx(b,c),x={[u&&d>=1?"onTransitionEnd":"onAnimationEnd"]:u&&d<1?null:()=>{f&&n()}};return React2.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":g},React2.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${p} Toastify__progress-bar--${s}`}),React2.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:w,style:v,...x}))}var Xt=1,at=()=>`${Xt++}`;function _t(o,a,n){let s=1,l=0,c=[],u=[],d=a,h=new Map,f=new Set,p=T=>(f.add(T),()=>f.delete(T)),g=()=>{u=Array.from(h.values()),f.forEach(T=>T())},v=({containerId:T,toastId:C,updateId:A})=>{let R=T?T!==o:o!==1,j=h.has(C)&&A==null;return R||j},b=(T,C)=>{h.forEach(A=>{var R;(C==null||C===A.props.toastId)&&((R=A.toggle)==null||R.call(A,T))})},w=T=>{var C,A;(A=(C=T.props)==null?void 0:C.onClose)==null||A.call(C,T.removalReason),T.isActive=!1},x=T=>{if(T==null)h.forEach(w);else{let C=h.get(T);C&&w(C)}g()},S=()=>{l-=c.length,c=[]},E=T=>{var C,A;let{toastId:R,updateId:j}=T.props,D=j==null;T.staleId&&h.delete(T.staleId),T.isActive=!0,h.set(R,T),g(),n(J(T,D?"added":"updated")),D&&((A=(C=T.props).onOpen)==null||A.call(C))};return{id:o,props:d,observe:p,toggle:b,removeToast:x,toasts:h,clearQueue:S,buildToast:(T,C)=>{if(v(C))return;let{toastId:A,updateId:R,data:j,staleId:D,delay:O}=C,H=R==null;H&&l++;let q={...d,style:d.toastStyle,key:s++,...Object.fromEntries(Object.entries(C).filter(([te,ee])=>ee!=null)),toastId:A,updateId:R,data:j,isIn:!1,className:B(C.className||d.toastClassName),progressClassName:B(C.progressClassName||d.progressClassName),autoClose:C.isLoading?!1:pt(C.autoClose,d.autoClose),closeToast(te){h.get(A).removalReason=te,x(A)},deleteToast(){let te=h.get(A);if(te!=null){if(n(J(te,"removed")),h.delete(A),l--,l<0&&(l=0),c.length>0){E(c.shift());return}g()}}};q.closeButton=d.closeButton,C.closeButton===!1||z(C.closeButton)?q.closeButton=C.closeButton:C.closeButton===!0&&(q.closeButton=z(d.closeButton)?d.closeButton:!0);let Y={content:T,props:q,staleId:D};d.limit&&d.limit>0&&l>d.limit&&H?c.push(Y):L(O)?setTimeout(()=>{E(Y)},O):E(Y)},setProps(T){d=T},setToggle:(T,C)=>{let A=h.get(T);A&&(A.toggle=C)},isToastActive:T=>{var C;return(C=h.get(T))==null?void 0:C.isActive},getSnapshot:()=>u}}var I=new Map,F=[],st=new Set,Vt=o=>st.forEach(a=>a(o)),bt=()=>I.size>0;function Qt(){F.forEach(o=>nt(o.content,o.options)),F=[]}var vt=(o,{containerId:a})=>{var n;return(n=I.get(a||1))==null?void 0:n.toasts.get(o)};function X(o,a){var n;if(a)return!!((n=I.get(a))!=null&&n.isToastActive(o));let s=!1;return I.forEach(l=>{l.isToastActive(o)&&(s=!0)}),s}function ht(o){if(!bt()){F=F.filter(a=>o!=null&&a.options.toastId!==o);return}if(o==null||mt(o))I.forEach(a=>{a.removeToast(o)});else if(o&&("containerId"in o||"id"in o)){let a=I.get(o.containerId);a?a.removeToast(o.id):I.forEach(n=>{n.removeToast(o.id)})}}var Ct=(o={})=>{I.forEach(a=>{a.props.limit&&(!o.containerId||a.id===o.containerId)&&a.clearQueue()})};function nt(o,a){z(o)&&(bt()||F.push({content:o,options:a}),I.forEach(n=>{n.buildToast(o,a)}))}function xt(o){var a;(a=I.get(o.containerId||1))==null||a.setToggle(o.id,o.fn)}function rt$1(o,a){I.forEach(n=>{(a==null||!(a!=null&&a.containerId)||(a==null?void 0:a.containerId)===n.id)&&n.toggle(o,a==null?void 0:a.id)})}function Et(o){let a=o.containerId||1;return{subscribe(n){let s=_t(a,o,Vt);I.set(a,s);let l=s.observe(n);return Qt(),()=>{l(),I.delete(a)}},setProps(n){var s;(s=I.get(a))==null||s.setProps(n)},getSnapshot(){var n;return(n=I.get(a))==null?void 0:n.getSnapshot()}}}function Pt(o){return st.add(o),()=>{st.delete(o)}}function Wt(o){return o&&(N(o.toastId)||L(o.toastId))?o.toastId:at()}function U(o,a){return nt(o,a),a.toastId}function V(o,a){return{...a,type:a&&a.type||o,toastId:Wt(a)}}function Q(o){return(a,n)=>U(a,V(o,n))}function y(o,a){return U(o,V("default",a))}y.loading=(o,a)=>U(o,V("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function Gt(o,{pending:a,error:n,success:s},l){let c;a&&(c=N(a)?y.loading(a,l):y.loading(a.render,{...l,...a}));let u={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},d=(f,p,g)=>{if(p==null){y.dismiss(c);return}let v={type:f,...u,...l,data:g},b=N(p)?{render:p}:p;return c?y.update(c,{...v,...b}):y(b.render,{...v,...b}),g},h=P(o)?o():o;return h.then(f=>d("success",s,f)).catch(f=>d("error",n,f)),h}y.promise=Gt;y.success=Q("success");y.info=Q("info");y.error=Q("error");y.warning=Q("warning");y.warn=y.warning;y.dark=(o,a)=>U(o,V("default",{theme:"dark",...a}));function qt(o){ht(o)}y.dismiss=qt;y.clearWaitingQueue=Ct;y.isActive=X;y.update=(o,a={})=>{let n=vt(o,a);if(n){let{props:s,content:l}=n,c={delay:100,...s,...a,toastId:a.toastId||o,updateId:at()};c.toastId!==o&&(c.staleId=o);let u=c.render||l;delete c.render,U(u,c)}};y.done=o=>{y.update(o,{progress:1})};y.onChange=Pt;y.play=o=>rt$1(!0,o);y.pause=o=>rt$1(!1,o);function It(o){var a;let{subscribe:n,getSnapshot:s,setProps:l}=React2.useRef(Et(o)).current;l(o);let c=(a=React2.useSyncExternalStore(n,s,s))==null?void 0:a.slice();function u(d){if(!c)return[];let h=new Map;return o.newestOnTop&&c.reverse(),c.forEach(f=>{let{position:p}=f.props;h.has(p)||h.set(p,[]),h.get(p).push(f)}),Array.from(h,f=>d(f[0],f[1]))}return{getToastToRender:u,isToastActive:X,count:c==null?void 0:c.length}}function At(o){let[a,n]=React2.useState(!1),[s,l]=React2.useState(!1),c=React2.useRef(null),u=React2.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:d,pauseOnHover:h,closeToast:f,onClick:p,closeOnClick:g}=o;xt({id:o.toastId,containerId:o.containerId,fn:n}),React2.useEffect(()=>{if(o.pauseOnFocusLoss)return v(),()=>{b()}},[o.pauseOnFocusLoss]);function v(){document.hasFocus()||E(),window.addEventListener("focus",S),window.addEventListener("blur",E)}function b(){window.removeEventListener("focus",S),window.removeEventListener("blur",E)}function w(D){if(o.draggable===!0||o.draggable===D.pointerType){T();let O=c.current;u.canCloseOnClick=!0,u.canDrag=!0,O.style.transition="none",o.draggableDirection==="x"?(u.start=D.clientX,u.removalDistance=O.offsetWidth*(o.draggablePercent/100)):(u.start=D.clientY,u.removalDistance=O.offsetHeight*(o.draggablePercent===80?o.draggablePercent*1.5:o.draggablePercent)/100)}}function x(D){let{top:O,bottom:H,left:q,right:Y}=c.current.getBoundingClientRect();D.nativeEvent.type!=="touchend"&&o.pauseOnHover&&D.clientX>=q&&D.clientX<=Y&&D.clientY>=O&&D.clientY<=H?E():S()}function S(){n(!0)}function E(){n(!1)}function T(){u.didMove=!1,document.addEventListener("pointermove",A),document.addEventListener("pointerup",R)}function C(){document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",R)}function A(D){let O=c.current;if(u.canDrag&&O){u.didMove=!0,a&&E(),o.draggableDirection==="x"?u.delta=D.clientX-u.start:u.delta=D.clientY-u.start,u.start!==D.clientX&&(u.canCloseOnClick=!1);let H=o.draggableDirection==="x"?`${u.delta}px, var(--y)`:`0, calc(${u.delta}px + var(--y))`;O.style.transform=`translate3d(${H},0)`,O.style.opacity=`${1-Math.abs(u.delta/u.removalDistance)}`}}function R(){C();let D=c.current;if(u.canDrag&&u.didMove&&D){if(u.canDrag=!1,Math.abs(u.delta)>u.removalDistance){l(!0),o.closeToast(!0),o.collapseAll();return}D.style.transition="transform 0.2s, opacity 0.2s",D.style.removeProperty("transform"),D.style.removeProperty("opacity")}}let j={onPointerDown:w,onPointerUp:x};return d&&h&&(j.onMouseEnter=E,o.stacked||(j.onMouseLeave=S)),g&&(j.onClick=D=>{p&&p(D),u.canCloseOnClick&&f(!0)}),{playToast:S,pauseToast:E,isRunning:a,preventExitTransition:s,toastRef:c,eventHandlers:j}}var Ot=typeof window<"u"?React2.useLayoutEffect:React2.useEffect,G=({theme:o,type:a,isLoading:n,...s})=>React2.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:o==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...s});function ao(o){return React2.createElement(G,{...o},React2.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function so(o){return React2.createElement(G,{...o},React2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function no(o){return React2.createElement(G,{...o},React2.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function ro(o){return React2.createElement(G,{...o},React2.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function io(){return React2.createElement("div",{className:"Toastify__spinner"})}var W={info:so,warning:ao,success:no,error:ro,spinner:io},lo=o=>o in W;function Nt({theme:o,type:a,isLoading:n,icon:s}){let l=null,c={theme:o,type:a};return s===!1||(P(s)?l=s({...c,isLoading:n}):React2.isValidElement(s)?l=React2.cloneElement(s,c):n?l=W.spinner():lo(a)&&(l=W[a](c))),l}var wt=o=>{let{isRunning:a,preventExitTransition:n,toastRef:s,eventHandlers:l,playToast:c}=At(o),{closeButton:u,children:d,autoClose:h,onClick:f,type:p,hideProgressBar:g,closeToast:v,transition:b,position:w,className:x,style:S,progressClassName:E,updateId:T,role:C,progress:A,rtl:R,toastId:j,deleteToast:D,isIn:O,isLoading:H,closeOnClick:q,theme:Y,ariaLabel:te}=o,ee=clsx("Toastify__toast",`Toastify__toast-theme--${Y}`,`Toastify__toast--${p}`,{"Toastify__toast--rtl":R},{"Toastify__toast--close-on-click":q}),re=P(x)?x({rtl:R,position:w,type:p,defaultClassName:ee}):clsx(ee,x),ne=Nt(o),ce=!!A||!h,ve={closeToast:v,type:p,theme:Y},be=null;return u===!1||(P(u)?be=u(ve):React2.isValidElement(u)?be=React2.cloneElement(u,ve):be=yt(ve)),React2.createElement(b,{isIn:O,done:D,position:w,preventExitTransition:n,nodeRef:s,playToast:c},React2.createElement("div",{id:j,tabIndex:0,onClick:f,"data-in":O,className:re,...l,style:S,ref:s,...O&&{role:C,"aria-label":te}},ne!=null&&React2.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!H})},ne),tt(d,o,!a),be,!o.customProgressBar&&React2.createElement(gt,{...T&&!ce?{key:`p-${T}`}:{},rtl:R,theme:Y,delay:h,isRunning:a,isIn:O,closeToast:v,hide:g,type:p,className:E,controlledProgress:ce,progress:A||0})))},K=(o,a=!1)=>({enter:`Toastify--animate Toastify__${o}-enter`,exit:`Toastify--animate Toastify__${o}-exit`,appendPosition:a}),lt$1=$$1(K("bounce",!0)),mo=$$1(K("slide",!0)),_o={position:"top-right",transition:lt$1,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:o=>o.altKey&&o.code==="KeyT"};function Lt(o){let a={..._o,...o},n=o.stacked,[s,l]=React2.useState(!0),c=React2.useRef(null),{getToastToRender:u,isToastActive:d,count:h}=It(a),{className:f,style:p,rtl:g,containerId:v,hotKeys:b}=a;function w(S){let E=clsx("Toastify__toast-container",`Toastify__toast-container--${S}`,{"Toastify__toast-container--rtl":g});return P(f)?f({position:S,rtl:g,defaultClassName:E}):clsx(E,B(f))}function x(){n&&(l(!0),y.play())}return Ot(()=>{var S;if(n){let E=c.current.querySelectorAll('[data-in="true"]'),T=12,C=(S=a.position)==null?void 0:S.includes("top"),A=0,R=0;Array.from(E).reverse().forEach((j,D)=>{let O=j;O.classList.add("Toastify__toast--stacked"),D>0&&(O.dataset.collapsed=`${s}`),O.dataset.pos||(O.dataset.pos=C?"top":"bot");let H=A*(s?.2:1)+(s?0:T*D);O.style.setProperty("--y",`${C?H:H*-1}px`),O.style.setProperty("--g",`${T}`),O.style.setProperty("--s",`${1-(s?R:0)}`),A+=O.offsetHeight,R+=.025})}},[s,h,n]),React2.useEffect(()=>{function S(E){var T;let C=c.current;b(E)&&((T=C.querySelector('[tabIndex="0"]'))==null||T.focus(),l(!1),y.pause()),E.key==="Escape"&&(document.activeElement===C||C!=null&&C.contains(document.activeElement))&&(l(!0),y.play())}return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}},[b]),React2.createElement("section",{ref:c,className:"Toastify",id:v,onMouseEnter:()=>{n&&(l(!1),y.pause())},onMouseLeave:x,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},u((S,E)=>{let T=E.length?{...p}:{...p,pointerEvents:"none"};return React2.createElement("div",{tabIndex:-1,className:w(S),"data-stacked":n,style:T,key:`c-${S}`},E.map(({content:C,props:A})=>React2.createElement(wt,{...A,stacked:n,collapseAll:x,isIn:d(A.toastId,A.containerId),key:`t-${A.key}`},C)))}))}class ToastMessage{static success(a){y.success(a,{hideProgressBar:!0,transition:mo,autoClose:800,theme:"colored"})}static errors(a){y.error(a,{theme:"colored",pauseOnHover:!1,hideProgressBar:!0,transition:mo,autoClose:800})}}const loading="_loading_j4cjw_1",styles$b={"infinite-scroll":"_infinite-scroll_j4cjw_1",loading};class InfiniteScroll extends React2.Component{constructor(){super(...arguments);M(this,"state",{loading:!1})}render(){return jsxRuntimeExports.jsx("div",{id:this.props.id,onScroll:async n=>{if(this.props.handleScroll){this.setState({...this.state,loading:!0});let s=n.target;await this.props.handleScroll(Math.round(s.offsetHeight+s.scrollTop)>=s.scrollHeight-1,n),this.setState({loading:!1})}},className:`${styles$b["infinite-scroll"]} ${this.state.loading?styles$b.loading:""} ${this.props.className??"col"}`,style:this.props.style??{overflow:"hidden auto"},children:this.props.children})}}const styles$a={"rating-container":"_rating-container_i1js0_1"},autoKeyId=()=>window.crypto.randomUUID().replace(/-/g,"");class Rating extends React2.Component{constructor(){super(...arguments);M(this,"state",{value:this.props.value??0})}componentDidUpdate(n){n.value!==this.props.value&&this.setState({value:this.props.value??0})}render(){return jsxRuntimeExports.jsx("div",{id:this.props.id,className:`row ${styles$a["rating-container"]} ${this.props.className??""}`,style:this.props.style,children:Array.from({length:5}).map((n,s)=>{let l="rating-star-grad-0",c=0;return this.state.value>=5?(l="rating-star-grad-5",c=100):this.state.value>=s&&(l=autoKeyId(),c=(this.state.value-s)*100),jsxRuntimeExports.jsxs("svg",{onClick:()=>{this.props.onChange&&(this.setState({value:s+1}),this.props.onChange(s+1))},width:"100%",height:"100%",style:{width:this.props.size??"2rem",height:this.props.size??"2rem"},viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:l,x1:"0%",x2:"100%",y1:"0%",y2:"0%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",style:{stopColor:this.props.fillColor??"var(--secondary3-main-color,#FAAD1E)"}}),jsxRuntimeExports.jsx("stop",{offset:`${c}%`,style:{stopColor:this.props.fillColor??"var(--secondary3-main-color,#FAAD1E)"}}),jsxRuntimeExports.jsx("stop",{offset:`${c}%`,style:{stopColor:"#00000000"}})]})}),jsxRuntimeExports.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 1.66667C10.2884 1.66667 10.5518 1.82993 10.6794 2.0878L12.844 6.46194L17.6847 7.16325C17.97 7.20459 18.2071 7.4039 18.2962 7.67736C18.3853 7.95082 18.311 8.25101 18.1045 8.45172L14.6018 11.8563L15.4285 16.6636C15.4772 16.947 15.3604 17.2334 15.127 17.4024C14.8937 17.5714 14.5844 17.5937 14.3292 17.4599L10 15.1897L5.67081 17.4599C5.41557 17.5937 5.10627 17.5714 4.87295 17.4024C4.63964 17.2334 4.52278 16.947 4.57151 16.6636L5.39815 11.8563L1.89545 8.45172C1.68896 8.25101 1.61465 7.95082 1.70377 7.67736C1.79288 7.4039 2.02996 7.20459 2.31533 7.16325L7.15599 6.46194L9.32063 2.0878C9.44825 1.82993 9.71162 1.66667 10 1.66667ZM10 4.12915L8.33846 7.48665C8.22811 7.70963 8.01479 7.86418 7.76802 7.89993L4.05223 8.43827L6.74094 11.0517C6.91947 11.2252 7.00094 11.4752 6.95881 11.7203L6.3243 15.4102L9.64738 13.6676C9.86813 13.5519 10.1319 13.5519 10.3526 13.6676L13.6757 15.4102L13.0412 11.7203C12.9991 11.4752 13.0805 11.2252 13.2591 11.0517L15.9478 8.43827L12.232 7.89993C11.9852 7.86418 11.7719 7.70963 11.6615 7.48665L10 4.12915Z",style:{fill:this.props.strokeColor??"var(--neutral-text-placeholder-color,#878792)"}}),jsxRuntimeExports.jsx("path",{d:"M17.738 7.18949L12.8212 6.47499L10.6249 2.02268C10.5611 1.91426 10.47 1.82438 10.3608 1.76194C10.2515 1.6995 10.1279 1.66666 10.0021 1.66666C9.87623 1.66666 9.75259 1.6995 9.64335 1.76194C9.53411 1.82438 9.44306 1.91426 9.37921 2.02268L7.17875 6.47499L2.26191 7.18949C2.13368 7.208 2.0132 7.26201 1.91406 7.34542C1.81493 7.42882 1.74111 7.5383 1.70095 7.66147C1.66078 7.78463 1.65588 7.91658 1.68678 8.04239C1.71769 8.1682 1.78317 8.28286 1.87583 8.3734L5.43449 11.8411L4.59499 16.7385C4.57311 16.8662 4.58739 16.9975 4.63622 17.1175C4.68505 17.2375 4.76648 17.3414 4.8713 17.4175C4.97612 17.4937 5.10016 17.539 5.22938 17.5483C5.3586 17.5577 5.48785 17.5306 5.60252 17.4704L9.99998 15.1588L14.3974 17.4704C14.5121 17.5306 14.6414 17.5577 14.7706 17.5483C14.8998 17.539 15.0238 17.4937 15.1286 17.4175C15.2335 17.3414 15.3149 17.2375 15.3637 17.1175C15.4126 16.9975 15.4268 16.8662 15.405 16.7385L14.5655 11.8411L18.1241 8.3734C18.2168 8.28295 18.2823 8.16841 18.3132 8.0427C18.3442 7.91699 18.3394 7.78512 18.2994 7.66199C18.2594 7.53886 18.1858 7.42937 18.0868 7.34587C17.9879 7.26238 17.8675 7.20822 17.7394 7.18949H17.738Z",fill:`url(#${l})`})]},"rate-"+s)})})}}function ProgressCircle({strokeWidth:o=4,percent:a=0,style:n={},textStyle:s={},...l}){const c=30-o,u=Math.PI*2*c,d=(1-a/100)*u;return jsxRuntimeExports.jsxs("svg",{id:l.id,className:l.className,width:"100%",height:"100%",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...n,width:l.size??"4.8rem",height:l.size??"4.8rem"},children:[jsxRuntimeExports.jsx("path",{d:`M 30,30 m 0,-${c} a ${c},${c} 0 1 1 0,${2*c} a ${c},${c} 0 1 1 0,-${2*c}`,style:{fill:"none",stroke:l.strokeColor??"var(--neutral-main-background-color, light-dark(#EFEFF0, #313135))",strokeWidth:o}}),jsxRuntimeExports.jsx("path",{d:`M 30,30 m 0,-${c} a ${c},${c} 0 1 1 0,${2*c} a ${c},${c} 0 1 1 0,-${2*c}`,style:{stroke:l.percentColor??"var(--primary-main-color, #287CF0)",strokeWidth:o,strokeLinecap:"round",strokeDasharray:`${u}px ${u}px`,strokeDashoffset:`${d}px`}}),jsxRuntimeExports.jsx("text",{x:"50%",y:"50%",dy:".3em",textAnchor:"middle",style:{fontSize:"1.6rem",fontWeight:"600",fill:"var(--neutral-text-title-color, light-dark(#18181B, #F4F4F5))",...s},children:l.title??`${a}%`})]})}var dist$4={exports:{}},propTypes={exports:{}},reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var o=typeof Symbol=="function"&&Symbol.for,a=o?Symbol.for("react.element"):60103,n=o?Symbol.for("react.portal"):60106,s=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,d=o?Symbol.for("react.context"):60110,h=o?Symbol.for("react.async_mode"):60111,f=o?Symbol.for("react.concurrent_mode"):60111,p=o?Symbol.for("react.forward_ref"):60112,g=o?Symbol.for("react.suspense"):60113,v=o?Symbol.for("react.suspense_list"):60120,b=o?Symbol.for("react.memo"):60115,w=o?Symbol.for("react.lazy"):60116,x=o?Symbol.for("react.block"):60121,S=o?Symbol.for("react.fundamental"):60117,E=o?Symbol.for("react.responder"):60118,T=o?Symbol.for("react.scope"):60119;function C(R){if(typeof R=="object"&&R!==null){var j=R.$$typeof;switch(j){case a:switch(R=R.type,R){case h:case f:case s:case c:case l:case g:return R;default:switch(R=R&&R.$$typeof,R){case d:case p:case w:case b:case u:return R;default:return j}}case n:return j}}}function A(R){return C(R)===f}return reactIs_production_min.AsyncMode=h,reactIs_production_min.ConcurrentMode=f,reactIs_production_min.ContextConsumer=d,reactIs_production_min.ContextProvider=u,reactIs_production_min.Element=a,reactIs_production_min.ForwardRef=p,reactIs_production_min.Fragment=s,reactIs_production_min.Lazy=w,reactIs_production_min.Memo=b,reactIs_production_min.Portal=n,reactIs_production_min.Profiler=c,reactIs_production_min.StrictMode=l,reactIs_production_min.Suspense=g,reactIs_production_min.isAsyncMode=function(R){return A(R)||C(R)===h},reactIs_production_min.isConcurrentMode=A,reactIs_production_min.isContextConsumer=function(R){return C(R)===d},reactIs_production_min.isContextProvider=function(R){return C(R)===u},reactIs_production_min.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===a},reactIs_production_min.isForwardRef=function(R){return C(R)===p},reactIs_production_min.isFragment=function(R){return C(R)===s},reactIs_production_min.isLazy=function(R){return C(R)===w},reactIs_production_min.isMemo=function(R){return C(R)===b},reactIs_production_min.isPortal=function(R){return C(R)===n},reactIs_production_min.isProfiler=function(R){return C(R)===c},reactIs_production_min.isStrictMode=function(R){return C(R)===l},reactIs_production_min.isSuspense=function(R){return C(R)===g},reactIs_production_min.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===s||R===f||R===c||R===l||R===g||R===v||typeof R=="object"&&R!==null&&(R.$$typeof===w||R.$$typeof===b||R.$$typeof===u||R.$$typeof===d||R.$$typeof===p||R.$$typeof===S||R.$$typeof===E||R.$$typeof===T||R.$$typeof===x)},reactIs_production_min.typeOf=C,reactIs_production_min}var reactIs_development={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_development;function requireReactIs_development(){return hasRequiredReactIs_development||(hasRequiredReactIs_development=1,process.env.NODE_ENV!=="production"&&function(){var o=typeof Symbol=="function"&&Symbol.for,a=o?Symbol.for("react.element"):60103,n=o?Symbol.for("react.portal"):60106,s=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,c=o?Symbol.for("react.profiler"):60114,u=o?Symbol.for("react.provider"):60109,d=o?Symbol.for("react.context"):60110,h=o?Symbol.for("react.async_mode"):60111,f=o?Symbol.for("react.concurrent_mode"):60111,p=o?Symbol.for("react.forward_ref"):60112,g=o?Symbol.for("react.suspense"):60113,v=o?Symbol.for("react.suspense_list"):60120,b=o?Symbol.for("react.memo"):60115,w=o?Symbol.for("react.lazy"):60116,x=o?Symbol.for("react.block"):60121,S=o?Symbol.for("react.fundamental"):60117,E=o?Symbol.for("react.responder"):60118,T=o?Symbol.for("react.scope"):60119;function C(Ie){return typeof Ie=="string"||typeof Ie=="function"||Ie===s||Ie===f||Ie===c||Ie===l||Ie===g||Ie===v||typeof Ie=="object"&&Ie!==null&&(Ie.$$typeof===w||Ie.$$typeof===b||Ie.$$typeof===u||Ie.$$typeof===d||Ie.$$typeof===p||Ie.$$typeof===S||Ie.$$typeof===E||Ie.$$typeof===T||Ie.$$typeof===x)}function A(Ie){if(typeof Ie=="object"&&Ie!==null){var He=Ie.$$typeof;switch(He){case a:var Le=Ie.type;switch(Le){case h:case f:case s:case c:case l:case g:return Le;default:var De=Le&&Le.$$typeof;switch(De){case d:case p:case w:case b:case u:return De;default:return He}}case n:return He}}}var R=h,j=f,D=d,O=u,H=a,q=p,Y=s,te=w,ee=b,re=n,ne=c,ce=l,ve=g,be=!1;function me(Ie){return be||(be=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),ae(Ie)||A(Ie)===h}function ae(Ie){return A(Ie)===f}function pe(Ie){return A(Ie)===d}function ie(Ie){return A(Ie)===u}function se(Ie){return typeof Ie=="object"&&Ie!==null&&Ie.$$typeof===a}function de(Ie){return A(Ie)===p}function le(Ie){return A(Ie)===s}function ge(Ie){return A(Ie)===w}function Re(Ie){return A(Ie)===b}function we(Ie){return A(Ie)===n}function Se(Ie){return A(Ie)===c}function xe(Ie){return A(Ie)===l}function ke(Ie){return A(Ie)===g}reactIs_development.AsyncMode=R,reactIs_development.ConcurrentMode=j,reactIs_development.ContextConsumer=D,reactIs_development.ContextProvider=O,reactIs_development.Element=H,reactIs_development.ForwardRef=q,reactIs_development.Fragment=Y,reactIs_development.Lazy=te,reactIs_development.Memo=ee,reactIs_development.Portal=re,reactIs_development.Profiler=ne,reactIs_development.StrictMode=ce,reactIs_development.Suspense=ve,reactIs_development.isAsyncMode=me,reactIs_development.isConcurrentMode=ae,reactIs_development.isContextConsumer=pe,reactIs_development.isContextProvider=ie,reactIs_development.isElement=se,reactIs_development.isForwardRef=de,reactIs_development.isFragment=le,reactIs_development.isLazy=ge,reactIs_development.isMemo=Re,reactIs_development.isPortal=we,reactIs_development.isProfiler=Se,reactIs_development.isStrictMode=xe,reactIs_development.isSuspense=ke,reactIs_development.isValidElementType=C,reactIs_development.typeOf=A}()),reactIs_development}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,process.env.NODE_ENV==="production"?reactIs.exports=requireReactIs_production_min():reactIs.exports=requireReactIs_development()),reactIs.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var objectAssign,hasRequiredObjectAssign;function requireObjectAssign(){if(hasRequiredObjectAssign)return objectAssign;hasRequiredObjectAssign=1;var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function s(c){if(c==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(c)}function l(){try{if(!Object.assign)return!1;var c=new String("abc");if(c[5]="de",Object.getOwnPropertyNames(c)[0]==="5")return!1;for(var u={},d=0;d<10;d++)u["_"+String.fromCharCode(d)]=d;var h=Object.getOwnPropertyNames(u).map(function(p){return u[p]});if(h.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(p){f[p]=p}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return objectAssign=l()?Object.assign:function(c,u){for(var d,h=s(c),f,p=1;p<arguments.length;p++){d=Object(arguments[p]);for(var g in d)a.call(d,g)&&(h[g]=d[g]);if(o){f=o(d);for(var v=0;v<f.length;v++)n.call(d,f[v])&&(h[f[v]]=d[f[v]])}}return h},objectAssign}var ReactPropTypesSecret_1,hasRequiredReactPropTypesSecret;function requireReactPropTypesSecret(){if(hasRequiredReactPropTypesSecret)return ReactPropTypesSecret_1;hasRequiredReactPropTypesSecret=1;var o="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ReactPropTypesSecret_1=o,ReactPropTypesSecret_1}var has$3,hasRequiredHas;function requireHas(){return hasRequiredHas||(hasRequiredHas=1,has$3=Function.call.bind(Object.prototype.hasOwnProperty)),has$3}var checkPropTypes_1,hasRequiredCheckPropTypes;function requireCheckPropTypes(){if(hasRequiredCheckPropTypes)return checkPropTypes_1;hasRequiredCheckPropTypes=1;var o=function(){};if(process.env.NODE_ENV!=="production"){var a=requireReactPropTypesSecret(),n={},s=requireHas();o=function(c){var u="Warning: "+c;typeof console<"u"&&console.error(u);try{throw new Error(u)}catch{}}}function l(c,u,d,h,f){if(process.env.NODE_ENV!=="production"){for(var p in c)if(s(c,p)){var g;try{if(typeof c[p]!="function"){var v=Error((h||"React class")+": "+d+" type `"+p+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof c[p]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw v.name="Invariant Violation",v}g=c[p](u,p,h,d,null,a)}catch(w){g=w}if(g&&!(g instanceof Error)&&o((h||"React class")+": type specification of "+d+" `"+p+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof g+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),g instanceof Error&&!(g.message in n)){n[g.message]=!0;var b=f?f():"";o("Failed "+d+" type: "+g.message+(b??""))}}}}return l.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(n={})},checkPropTypes_1=l,checkPropTypes_1}var factoryWithTypeCheckers,hasRequiredFactoryWithTypeCheckers;function requireFactoryWithTypeCheckers(){if(hasRequiredFactoryWithTypeCheckers)return factoryWithTypeCheckers;hasRequiredFactoryWithTypeCheckers=1;var o=requireReactIs(),a=requireObjectAssign(),n=requireReactPropTypesSecret(),s=requireHas(),l=requireCheckPropTypes(),c=function(){};process.env.NODE_ENV!=="production"&&(c=function(d){var h="Warning: "+d;typeof console<"u"&&console.error(h);try{throw new Error(h)}catch{}});function u(){return null}return factoryWithTypeCheckers=function(d,h){var f=typeof Symbol=="function"&&Symbol.iterator,p="@@iterator";function g(ae){var pe=ae&&(f&&ae[f]||ae[p]);if(typeof pe=="function")return pe}var v="<<anonymous>>",b={array:E("array"),bigint:E("bigint"),bool:E("boolean"),func:E("function"),number:E("number"),object:E("object"),string:E("string"),symbol:E("symbol"),any:T(),arrayOf:C,element:A(),elementType:R(),instanceOf:j,node:q(),objectOf:O,oneOf:D,oneOfType:H,shape:te,exact:ee};function w(ae,pe){return ae===pe?ae!==0||1/ae===1/pe:ae!==ae&&pe!==pe}function x(ae,pe){this.message=ae,this.data=pe&&typeof pe=="object"?pe:{},this.stack=""}x.prototype=Error.prototype;function S(ae){if(process.env.NODE_ENV!=="production")var pe={},ie=0;function se(le,ge,Re,we,Se,xe,ke){if(we=we||v,xe=xe||Re,ke!==n){if(h){var Ie=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Ie.name="Invariant Violation",Ie}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var He=we+":"+Re;!pe[He]&&ie<3&&(c("You are manually calling a React.PropTypes validation function for the `"+xe+"` prop on `"+we+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),pe[He]=!0,ie++)}}return ge[Re]==null?le?ge[Re]===null?new x("The "+Se+" `"+xe+"` is marked as required "+("in `"+we+"`, but its value is `null`.")):new x("The "+Se+" `"+xe+"` is marked as required in "+("`"+we+"`, but its value is `undefined`.")):null:ae(ge,Re,we,Se,xe)}var de=se.bind(null,!1);return de.isRequired=se.bind(null,!0),de}function E(ae){function pe(ie,se,de,le,ge,Re){var we=ie[se],Se=ce(we);if(Se!==ae){var xe=ve(we);return new x("Invalid "+le+" `"+ge+"` of type "+("`"+xe+"` supplied to `"+de+"`, expected ")+("`"+ae+"`."),{expectedType:ae})}return null}return S(pe)}function T(){return S(u)}function C(ae){function pe(ie,se,de,le,ge){if(typeof ae!="function")return new x("Property `"+ge+"` of component `"+de+"` has invalid PropType notation inside arrayOf.");var Re=ie[se];if(!Array.isArray(Re)){var we=ce(Re);return new x("Invalid "+le+" `"+ge+"` of type "+("`"+we+"` supplied to `"+de+"`, expected an array."))}for(var Se=0;Se<Re.length;Se++){var xe=ae(Re,Se,de,le,ge+"["+Se+"]",n);if(xe instanceof Error)return xe}return null}return S(pe)}function A(){function ae(pe,ie,se,de,le){var ge=pe[ie];if(!d(ge)){var Re=ce(ge);return new x("Invalid "+de+" `"+le+"` of type "+("`"+Re+"` supplied to `"+se+"`, expected a single ReactElement."))}return null}return S(ae)}function R(){function ae(pe,ie,se,de,le){var ge=pe[ie];if(!o.isValidElementType(ge)){var Re=ce(ge);return new x("Invalid "+de+" `"+le+"` of type "+("`"+Re+"` supplied to `"+se+"`, expected a single ReactElement type."))}return null}return S(ae)}function j(ae){function pe(ie,se,de,le,ge){if(!(ie[se]instanceof ae)){var Re=ae.name||v,we=me(ie[se]);return new x("Invalid "+le+" `"+ge+"` of type "+("`"+we+"` supplied to `"+de+"`, expected ")+("instance of `"+Re+"`."))}return null}return S(pe)}function D(ae){if(!Array.isArray(ae))return process.env.NODE_ENV!=="production"&&(arguments.length>1?c("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):c("Invalid argument supplied to oneOf, expected an array.")),u;function pe(ie,se,de,le,ge){for(var Re=ie[se],we=0;we<ae.length;we++)if(w(Re,ae[we]))return null;var Se=JSON.stringify(ae,function(ke,Ie){var He=ve(Ie);return He==="symbol"?String(Ie):Ie});return new x("Invalid "+le+" `"+ge+"` of value `"+String(Re)+"` "+("supplied to `"+de+"`, expected one of "+Se+"."))}return S(pe)}function O(ae){function pe(ie,se,de,le,ge){if(typeof ae!="function")return new x("Property `"+ge+"` of component `"+de+"` has invalid PropType notation inside objectOf.");var Re=ie[se],we=ce(Re);if(we!=="object")return new x("Invalid "+le+" `"+ge+"` of type "+("`"+we+"` supplied to `"+de+"`, expected an object."));for(var Se in Re)if(s(Re,Se)){var xe=ae(Re,Se,de,le,ge+"."+Se,n);if(xe instanceof Error)return xe}return null}return S(pe)}function H(ae){if(!Array.isArray(ae))return process.env.NODE_ENV!=="production"&&c("Invalid argument supplied to oneOfType, expected an instance of array."),u;for(var pe=0;pe<ae.length;pe++){var ie=ae[pe];if(typeof ie!="function")return c("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+be(ie)+" at index "+pe+"."),u}function se(de,le,ge,Re,we){for(var Se=[],xe=0;xe<ae.length;xe++){var ke=ae[xe],Ie=ke(de,le,ge,Re,we,n);if(Ie==null)return null;Ie.data&&s(Ie.data,"expectedType")&&Se.push(Ie.data.expectedType)}var He=Se.length>0?", expected one of type ["+Se.join(", ")+"]":"";return new x("Invalid "+Re+" `"+we+"` supplied to "+("`"+ge+"`"+He+"."))}return S(se)}function q(){function ae(pe,ie,se,de,le){return re(pe[ie])?null:new x("Invalid "+de+" `"+le+"` supplied to "+("`"+se+"`, expected a ReactNode."))}return S(ae)}function Y(ae,pe,ie,se,de){return new x((ae||"React class")+": "+pe+" type `"+ie+"."+se+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+de+"`.")}function te(ae){function pe(ie,se,de,le,ge){var Re=ie[se],we=ce(Re);if(we!=="object")return new x("Invalid "+le+" `"+ge+"` of type `"+we+"` "+("supplied to `"+de+"`, expected `object`."));for(var Se in ae){var xe=ae[Se];if(typeof xe!="function")return Y(de,le,ge,Se,ve(xe));var ke=xe(Re,Se,de,le,ge+"."+Se,n);if(ke)return ke}return null}return S(pe)}function ee(ae){function pe(ie,se,de,le,ge){var Re=ie[se],we=ce(Re);if(we!=="object")return new x("Invalid "+le+" `"+ge+"` of type `"+we+"` "+("supplied to `"+de+"`, expected `object`."));var Se=a({},ie[se],ae);for(var xe in Se){var ke=ae[xe];if(s(ae,xe)&&typeof ke!="function")return Y(de,le,ge,xe,ve(ke));if(!ke)return new x("Invalid "+le+" `"+ge+"` key `"+xe+"` supplied to `"+de+"`.\nBad object: "+JSON.stringify(ie[se],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(ae),null,"  "));var Ie=ke(Re,xe,de,le,ge+"."+xe,n);if(Ie)return Ie}return null}return S(pe)}function re(ae){switch(typeof ae){case"number":case"string":case"undefined":return!0;case"boolean":return!ae;case"object":if(Array.isArray(ae))return ae.every(re);if(ae===null||d(ae))return!0;var pe=g(ae);if(pe){var ie=pe.call(ae),se;if(pe!==ae.entries){for(;!(se=ie.next()).done;)if(!re(se.value))return!1}else for(;!(se=ie.next()).done;){var de=se.value;if(de&&!re(de[1]))return!1}}else return!1;return!0;default:return!1}}function ne(ae,pe){return ae==="symbol"?!0:pe?pe["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&pe instanceof Symbol:!1}function ce(ae){var pe=typeof ae;return Array.isArray(ae)?"array":ae instanceof RegExp?"object":ne(pe,ae)?"symbol":pe}function ve(ae){if(typeof ae>"u"||ae===null)return""+ae;var pe=ce(ae);if(pe==="object"){if(ae instanceof Date)return"date";if(ae instanceof RegExp)return"regexp"}return pe}function be(ae){var pe=ve(ae);switch(pe){case"array":case"object":return"an "+pe;case"boolean":case"date":case"regexp":return"a "+pe;default:return pe}}function me(ae){return!ae.constructor||!ae.constructor.name?v:ae.constructor.name}return b.checkPropTypes=l,b.resetWarningCache=l.resetWarningCache,b.PropTypes=b,b},factoryWithTypeCheckers}var factoryWithThrowingShims,hasRequiredFactoryWithThrowingShims;function requireFactoryWithThrowingShims(){if(hasRequiredFactoryWithThrowingShims)return factoryWithThrowingShims;hasRequiredFactoryWithThrowingShims=1;var o=requireReactPropTypesSecret();function a(){}function n(){}return n.resetWarningCache=a,factoryWithThrowingShims=function(){function s(u,d,h,f,p,g){if(g!==o){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}s.isRequired=s;function l(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:l,element:s,elementType:s,instanceOf:l,node:s,objectOf:l,oneOf:l,oneOfType:l,shape:l,exact:l,checkPropTypes:n,resetWarningCache:a};return c.PropTypes=c,c},factoryWithThrowingShims}var hasRequiredPropTypes;function requirePropTypes(){if(hasRequiredPropTypes)return propTypes.exports;if(hasRequiredPropTypes=1,process.env.NODE_ENV!=="production"){var o=requireReactIs(),a=!0;propTypes.exports=requireFactoryWithTypeCheckers()(o.isElement,a)}else propTypes.exports=requireFactoryWithThrowingShims()();return propTypes.exports}var dist$3=dist$4.exports,hasRequiredDist$1;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(o,a){(function(s,l){o.exports=l(requirePropTypes(),React2)})(dist$3,function(n,s){return function(l){var c={};function u(d){if(c[d])return c[d].exports;var h=c[d]={i:d,l:!1,exports:{}};return l[d].call(h.exports,h,h.exports,u),h.l=!0,h.exports}return u.m=l,u.c=c,u.d=function(d,h,f){u.o(d,h)||Object.defineProperty(d,h,{enumerable:!0,get:f})},u.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},u.t=function(d,h){if(1&h&&(d=u(d)),8&h||4&h&&typeof d=="object"&&d&&d.__esModule)return d;var f=Object.create(null);if(u.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:d}),2&h&&typeof d!="string")for(var p in d)u.d(f,p,(function(g){return d[g]}).bind(null,p));return f},u.n=function(d){var h=d&&d.__esModule?function(){return d.default}:function(){return d};return u.d(h,"a",h),h},u.o=function(d,h){return Object.prototype.hasOwnProperty.call(d,h)},u.p="",u(u.s=5)}([function(l,c,u){function d(g,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(g,w.key,w)}}u.d(c,"a",function(){return h}),u.d(c,"b",function(){return f}),u.d(c,"c",function(){return p});var h=function(){function g(){(function(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")})(this,g),typeof window<"u"&&(this.image=new Image,this.resolve=null,this.video=document.createElement("video"),this.events())}return function(b,w,x){return w&&d(b.prototype,w),b}(g,[{key:"events",value:function(){var b=this;this.video.addEventListener("loadeddata",function(){return b.resolve&&b.resolve(!0)}),this.video.addEventListener("loadeddata",function(){return b.resolve&&b.resolve(!1)}),this.image.onload=function(){return b.resolve&&b.resolve(!0)},this.image.onerror=function(){return b.resolve&&b.resolve(!1)}}},{key:"load",value:function(b){var w=this;return new Promise(function(x){b||x(!0),w.resolve=x,w.loading=!0,w.ended=!1,b.match(/\.(mp4|webm)/i)&&w.video.setAttribute("src",b),b.match(/\.(png|jp(e)?g|gif|webp)/i)&&(w.image.src=b,(w.image.width>0||w.image.height>0)&&x(!0))})}},{key:"loadImage",value:function(b){var w=this,x=new Image,S=!1;x.onload=function(){S||w.pumpLoaded()},x.onerror=function(){S||w.pumpLoaded()},x.src=b,S===!1&&(x.width>0||x.height>0)&&(S=!0,this.pumpLoaded())}},{key:"loadVideo",value:function(b){var w=this,x=document.createElement("video");x.addEventListener("loadeddata",function(){w.pumpLoaded()}),x.addEventListener("error",function(){w.pumpLoaded()}),x.setAttribute("src",b)}},{key:"pumpLoaded",value:function(){this.loaded+=1,this.loaded===this.toLoad&&this.resolver(!0)}},{key:"startLoad",value:function(b){b.match(/\.(mp4|webm)/i)&&this.loadVideo(b),b.match(/\.(png|jp(e)?g|gif|webp)/i)&&this.loadImage(b)}},{key:"loadMultiple",value:function(b){var w=this;return this.loaded=0,this.toLoad=b.length,new Promise(function(x){w.resolver=x,b.forEach(function(S){w.startLoad(S)})})}}]),g}();function f(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],v=arguments.length>1?arguments[1]:void 0;if(!v)return g.join(" ").trim();for(var b=[],w=g.length;w--;)v[g[w]]&&b.push(v[g[w]]);return b}function p(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",v=arguments.length>1?arguments[1]:void 0;return v&&v[g]||g}},function(l,c,u){u.d(c,"a",function(){return v}),u.d(c,"b",function(){return b}),u.d(c,"c",function(){return w}),u.d(c,"e",function(){return x}),u.d(c,"d",function(){return S}),u.d(c,"g",function(){return E}),u.d(c,"f",function(){return T});var d=u(0);function h(C){return function(R){if(Array.isArray(R)){for(var j=0,D=new Array(R.length);j<R.length;j++)D[j]=R[j];return D}}(C)||function(R){if(Symbol.iterator in Object(R)||Object.prototype.toString.call(R)==="[object Arguments]")return Array.from(R)}(C)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(C,A){var R=Object.keys(C);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(C);A&&(j=j.filter(function(D){return Object.getOwnPropertyDescriptor(C,D).enumerable})),R.push.apply(R,j)}return R}function p(C){for(var A=1;A<arguments.length;A++){var R=arguments[A]!=null?arguments[A]:{};A%2?f(Object(R),!0).forEach(function(j){g(C,j,R[j])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(R)):f(Object(R)).forEach(function(j){Object.defineProperty(C,j,Object.getOwnPropertyDescriptor(R,j))})}return C}function g(C,A,R){return A in C?Object.defineProperty(C,A,{value:R,enumerable:!0,configurable:!0,writable:!0}):C[A]=R,C}var v=function(A,R){typeof R=="string"&&A&&R.split(" ").forEach(function(j){A.classList.add(j)})},b=function(A,R){typeof R=="string"&&A&&R.split(" ").forEach(function(j){A.classList.remove(j)})},w=function(A){return typeof A=="string"&&A.split(" ")[0]||""},x=function(A){var R=Array.isArray(A)?A:[A];if(R.length===1)return R[0];for(var j=p({},R[0]),D=1;D<R.length;D+=1){for(var O in j)R[D][O]&&(j[O]=[j[O],R[D][O]].join(" "));for(var H in R[D])j[H]||(j[H]=R[D][H])}return j};function S(C){var A,R=C.rootElement,j=C.cssModule,D=C.disabled,O=C.organicArrows,H=C.className,q=C.total,Y=C.current,te=C.infinite,ee=C.animation,re=C.fillParent,ne=[R];return ee&&ne.push("".concat(R,"--").concat(ee)),O===!0&&ne.push("".concat(R,"--organic-arrows")),D===!0&&ne.push("".concat(R,"--disabled")),re&&ne.push("".concat(R,"--fill-parent")),te===!1&&(Y===0&&ne.push("".concat(R,"--first")),Y===q-1&&ne.push("".concat(R,"--last"))),j&&j[R]&&(ne=Object(d.b)(ne,j)),H&&(A=ne).push.apply(A,h(H.split(" "))),ne.join(" ").trim().replace(/[\s]+/gi," ")}function E(C){var A=[];return(C.constructor===Array?C:[C]).forEach(function(R){var j=p({},R.props);R.props["data-src"]&&(j.source=R.props["data-src"]),R.props["data-slug"]&&(j.slug=R.props["data-slug"]),A.push(j)}),A}function T(C,A){return{boxA:Object(d.c)("".concat(C,"__boxA"),A),boxB:Object(d.c)("".concat(C,"__boxB"),A),box:Object(d.c)("".concat(C,"__box"),A),container:Object(d.c)("".concat(C,"__container"),A),wrapper:Object(d.c)("".concat(C,"__wrapper"),A),bar:Object(d.c)("".concat(C,"__bar"),A),barActive:Object(d.c)("".concat(C,"__bar--active"),A),barEnd:Object(d.c)("".concat(C,"__bar--end"),A),content:Object(d.c)("".concat(C,"__content"),A),contentStatic:Object(d.c)("".concat(C,"__content--static"),A),contentMoveLeft:Object(d.c)("".concat(C,"__content--moveLeft"),A),contentMoveRight:Object(d.c)("".concat(C,"__content--moveRight"),A),controlsHidden:Object(d.c)("".concat(C,"__controls--hidden"),A),controlsActive:Object(d.c)("".concat(C,"__controls--active"),A),animated:Object(d.c)("".concat(C,"--animated"),A),animatedMobile:Object(d.c)("".concat(C,"--animated-mobile"),A),contentExit:Object(d.c)("".concat(C,"__content--exit"),A),exit:Object(d.c)("".concat(C,"--exit"),A),active:Object(d.c)("".concat(C,"--active"),A),moveLeft:Object(d.c)("".concat(C,"--moveLeft"),A),moveRight:Object(d.c)("".concat(C,"--moveRight"),A),startUp:Object(d.c)("".concat(C,"__startUp"),A),bulletsLoading:Object(d.c)("".concat(C,"__bullets--loading"),A)}}},function(l,c){l.exports=n},function(l,c){l.exports=s},function(l,c,u){l.exports=function(d){var h={};function f(p){if(h[p])return h[p].exports;var g=h[p]={i:p,l:!1,exports:{}};return d[p].call(g.exports,g,g.exports,f),g.l=!0,g.exports}return f.m=d,f.c=h,f.d=function(p,g,v){f.o(p,g)||Object.defineProperty(p,g,{enumerable:!0,get:v})},f.r=function(p){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(p,"__esModule",{value:!0})},f.t=function(p,g){if(1&g&&(p=f(p)),8&g||4&g&&typeof p=="object"&&p&&p.__esModule)return p;var v=Object.create(null);if(f.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:p}),2&g&&typeof p!="string")for(var b in p)f.d(v,b,(function(w){return p[w]}).bind(null,b));return v},f.n=function(p){var g=p&&p.__esModule?function(){return p.default}:function(){return p};return f.d(g,"a",g),g},f.o=function(p,g){return Object.prototype.hasOwnProperty.call(p,g)},f.p="",f(f.s=0)}([function(d,h,f){function p(v,b){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},x=w.tolerance,S=x===void 0?0:x,E=w.propertyName;return new Promise(function(T){if(v){var C=null,A=b.charAt(0).toUpperCase()+b.slice(1),R=0;v.style["Webkit"+A]!==void 0&&(C="webkit"+A+"End"),v.style.OTransition!==void 0&&(C="o"+b+"End"),v.style[b]!==void 0&&(C=b+"end"),v.clearCssEndEvent&&v.clearCssEndEvent(),v.clearCssEndEvent=function(){v.removeEventListener(C,j)},v.addEventListener(C,j)}else T(!1);function j(D){if((D.srcElement||D.target)===v){if(R>=S){if(E&&E!==D.propertyName)return;v.removeEventListener(C,j),T(D)}R+=1}}})}function g(v){window&&window.requestAnimationFrame(function(){window.requestAnimationFrame(v)})}Object.defineProperty(h,"__esModule",{value:!0}),h.setCssEndEvent=p,h.beforeCssLayout=function(v){window&&window.requestAnimationFrame(v)},h.beforeNextCssLayout=g,h.beforeFutureCssLayout=function(v,b){(function w(x,S){window&&x&&Number.isInteger(x)&&x>0?window.requestAnimationFrame(function(){w(x-1,S)}):S()})(v+1,b)},h.onceNextCssLayout=function(){return new Promise(function(v){g(v)})},h.onceTransitionEnd=function(v){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(w){p(v,"transition",b).then(w)})},h.onceAnimationEnd=function(v){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(w){p(v,"animation",b).then(w)})}}])},function(l,c,u){l.exports=u(13)},,,,,,,,function(l,c,u){u.r(c);var d=u(3),h=u.n(d),f=u(2),p=u.n(f),g=u(4),v=u(0),b=u(1);function w(Le){return(w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee})(Le)}function x(Le,De){for(var Ee=0;Ee<De.length;Ee++){var oe=De[Ee];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Le,oe.key,oe)}}function S(Le){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(Ee){return Ee.__proto__||Object.getPrototypeOf(Ee)})(Le)}function E(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}function T(Le,De){return(T=Object.setPrototypeOf||function(oe,he){return oe.__proto__=he,oe})(Le,De)}function C(Le,De,Ee){return De in Le?Object.defineProperty(Le,De,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):Le[De]=Ee,Le}var A=function(Le){function De(Ee){var oe;return function(Me,fe){if(!(Me instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,De),oe=function(Me,fe){return!fe||w(fe)!=="object"&&typeof fe!="function"?E(Me):fe}(this,S(De).call(this,Ee)),C(E(oe),"bulletClick",function(he){var Me=he.currentTarget;Me.classList.add(Object(v.c)("".concat(oe.rootElement,"__bullets--loading"),oe.props.cssModule));var fe=parseInt(Me.getAttribute("data-index"),10),Pe=!(oe.props.selected>fe);oe.props.onClick({index:fe,direction:Pe})}),oe.rootElement=Ee.rootElement,oe}return function(oe,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(he&&he.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),he&&T(oe,he)}(De,Le),function(oe,he,Me){return he&&x(oe.prototype,he),oe}(De,[{key:"renderBullets",value:function(){var oe=this,he=this.props,Me=he.cssModule,fe=he.selected,Pe=he.media;return(Pe===void 0?[]:Pe).map(function(Oe,je){var Ve=je===fe?Object(v.c)("".concat(oe.rootElement,"__bullets--active"),Me):null;return h.a.createElement("button",{key:"bullet-".concat(je),"data-index":je,onClick:oe.bulletClick,className:Ve},je)})}},{key:"render",value:function(){var oe=this.props,he=oe.cssModule,Me=oe.rootElement;return h.a.createElement("nav",{className:Object(v.c)("".concat(Me,"__bullets"),he)},this.renderBullets())}}]),De}(h.a.Component);function R(Le){return(R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee})(Le)}function j(Le,De){for(var Ee=0;Ee<De.length;Ee++){var oe=De[Ee];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Le,oe.key,oe)}}function D(Le,De){return!De||R(De)!=="object"&&typeof De!="function"?function(oe){if(oe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe}(Le):De}function O(Le){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(Ee){return Ee.__proto__||Object.getPrototypeOf(Ee)})(Le)}function H(Le,De){return(H=Object.setPrototypeOf||function(oe,he){return oe.__proto__=he,oe})(Le,De)}function q(Le,De,Ee){return De in Le?Object.defineProperty(Le,De,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):Le[De]=Ee,Le}C(A,"propTypes",{cssModule:p.a.object,rootElement:p.a.string.isRequired,media:p.a.array,onClick:p.a.func,selected:p.a.number}),C(A,"defaultProps",{cssModule:null,selected:0,media:[],onClick:function(){}});var Y=function(Le){function De(){return function(oe,he){if(!(oe instanceof he))throw new TypeError("Cannot call a class as a function")}(this,De),D(this,O(De).apply(this,arguments))}return function(oe,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(he&&he.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),he&&H(oe,he)}(De,Le),function(oe,he,Me){return he&&j(oe.prototype,he),oe}(De,[{key:"componentDidMount",value:function(){this.props.onMount({element:this.controls,next:this.next,prev:this.prev})}},{key:"render",value:function(){var oe=this,he=this.props,Me=he.rootElement,fe=he.cssModule,Pe=he.organicArrows,Oe=he.buttonContentLeft,je=he.buttonContentRight,Ve=he.onNext,ze=he.onPrev;return h.a.createElement("div",{ref:function(Ze){oe.controls=Ze,oe.props.onMount({element:oe.controls,next:oe.next||null,prev:oe.prev||null})},className:[Object(v.c)("".concat(Me,"__controls"),fe),Object(v.c)("".concat(Me,"__controls--hidden"),fe)].join(" ")},h.a.createElement("button",{ref:function(Ze){oe.next=Ze},"aria-label":"next",className:Object(v.c)("".concat(Me,"__next"),fe),onClick:Ve},Pe?h.a.createElement("span",{className:Object(v.c)("".concat(Me,"__controls__arrow-right"),fe)}):je),h.a.createElement("button",{ref:function(Ze){oe.prev=Ze},"aria-label":"previous",className:Object(v.c)("".concat(Me,"__prev"),fe),onClick:ze},Pe?h.a.createElement("span",{className:Object(v.c)("".concat(Me,"__controls__arrow-left"),fe)}):Oe))}}]),De}(h.a.Component);function te(Le){return(te=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee})(Le)}function ee(){return(ee=Object.assign||function(Le){for(var De=1;De<arguments.length;De++){var Ee=arguments[De];for(var oe in Ee)Object.prototype.hasOwnProperty.call(Ee,oe)&&(Le[oe]=Ee[oe])}return Le}).apply(this,arguments)}function re(Le,De){if(Le==null)return{};var Ee,oe,he=function(Pe,Oe){if(Pe==null)return{};var je,Ve,ze={},We=Object.keys(Pe);for(Ve=0;Ve<We.length;Ve++)je=We[Ve],Oe.indexOf(je)>=0||(ze[je]=Pe[je]);return ze}(Le,De);if(Object.getOwnPropertySymbols){var Me=Object.getOwnPropertySymbols(Le);for(oe=0;oe<Me.length;oe++)Ee=Me[oe],De.indexOf(Ee)>=0||Object.prototype.propertyIsEnumerable.call(Le,Ee)&&(he[Ee]=Le[Ee])}return he}function ne(Le,De){for(var Ee=0;Ee<De.length;Ee++){var oe=De[Ee];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Le,oe.key,oe)}}function ce(Le){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(Ee){return Ee.__proto__||Object.getPrototypeOf(Ee)})(Le)}function ve(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}function be(Le,De){return(be=Object.setPrototypeOf||function(oe,he){return oe.__proto__=he,oe})(Le,De)}function me(Le,De,Ee){return De in Le?Object.defineProperty(Le,De,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):Le[De]=Ee,Le}q(Y,"propTypes",{cssModule:p.a.object,rootElement:p.a.string.isRequired,onMount:p.a.func.isRequired,onNext:p.a.func.isRequired,onPrev:p.a.func.isRequired,buttonContentLeft:p.a.node,buttonContentRight:p.a.node,organicArrows:p.a.bool}),q(Y,"defaultProps",{cssModule:null,organicArrows:!0,buttonContentLeft:null,buttonContentRight:null});var ae=function(Le){function De(){var Ee,oe;(function(Oe,je){if(!(Oe instanceof je))throw new TypeError("Cannot call a class as a function")})(this,De);for(var he=arguments.length,Me=new Array(he),fe=0;fe<he;fe++)Me[fe]=arguments[fe];return oe=function(Oe,je){return!je||te(je)!=="object"&&typeof je!="function"?ve(Oe):je}(this,(Ee=ce(De)).call.apply(Ee,[this].concat(Me))),me(ve(oe),"state",{}),oe}return function(oe,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(he&&he.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),he&&be(oe,he)}(De,Le),function(oe,he,Me){return he&&ne(oe.prototype,he),oe}(De,[{key:"render",value:function(){var oe=this.props,he=oe.media,Me=oe.className,fe=he.source,Pe=he.children,Oe=he.style,je=(he.loader,he["data-src"],he["data-alt"],he.className),Ve=(he.onTransitionEnd,he.onTransitionStartOut,he.onTransitionStartIn,he.onTransitionRequestOut,he.onTransitionRequestIn,re(he,["source","children","style","loader","data-src","data-alt","className","onTransitionEnd","onTransitionStartOut","onTransitionStartIn","onTransitionRequestOut","onTransitionRequestIn"])),ze=null;return fe&&(ze=fe.match(/\.(mp4|webm)/)?h.a.createElement("video",{title:he.title||he["data-title"],src:fe,type:"video/mp4",controls:!0}):h.a.createElement("img",{alt:he.alt||he.title||he["data-alt"]||null,src:fe})),h.a.createElement("div",ee({className:Me,style:Oe||null},Ve),ze,Pe&&h.a.createElement("div",{className:je},he.children))}}]),De}(h.a.Component);function pe(Le){return(pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Ee){return typeof Ee}:function(Ee){return Ee&&typeof Symbol=="function"&&Ee.constructor===Symbol&&Ee!==Symbol.prototype?"symbol":typeof Ee})(Le)}function ie(){return(ie=Object.assign||function(Le){for(var De=1;De<arguments.length;De++){var Ee=arguments[De];for(var oe in Ee)Object.prototype.hasOwnProperty.call(Ee,oe)&&(Le[oe]=Ee[oe])}return Le}).apply(this,arguments)}function se(Le){return function(Ee){if(Array.isArray(Ee)){for(var oe=0,he=new Array(Ee.length);oe<Ee.length;oe++)he[oe]=Ee[oe];return he}}(Le)||function(Ee){if(Symbol.iterator in Object(Ee)||Object.prototype.toString.call(Ee)==="[object Arguments]")return Array.from(Ee)}(Le)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function de(Le,De){var Ee=Object.keys(Le);if(Object.getOwnPropertySymbols){var oe=Object.getOwnPropertySymbols(Le);De&&(oe=oe.filter(function(he){return Object.getOwnPropertyDescriptor(Le,he).enumerable})),Ee.push.apply(Ee,oe)}return Ee}function le(Le){for(var De=1;De<arguments.length;De++){var Ee=arguments[De]!=null?arguments[De]:{};De%2?de(Object(Ee),!0).forEach(function(oe){xe(Le,oe,Ee[oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Le,Object.getOwnPropertyDescriptors(Ee)):de(Object(Ee)).forEach(function(oe){Object.defineProperty(Le,oe,Object.getOwnPropertyDescriptor(Ee,oe))})}return Le}function ge(Le,De){for(var Ee=0;Ee<De.length;Ee++){var oe=De[Ee];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(Le,oe.key,oe)}}function Re(Le){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(Ee){return Ee.__proto__||Object.getPrototypeOf(Ee)})(Le)}function we(Le){if(Le===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Le}function Se(Le,De){return(Se=Object.setPrototypeOf||function(oe,he){return oe.__proto__=he,oe})(Le,De)}function xe(Le,De,Ee){return De in Le?Object.defineProperty(Le,De,{value:Ee,enumerable:!0,configurable:!0,writable:!0}):Le[De]=Ee,Le}me(ae,"propTypes",{media:p.a.object.isRequired,className:p.a.string.isRequired});var ke="awssld",Ie=new v.a,He=function(Le){function De(Ee){var oe;return function(Me,fe){if(!(Me instanceof fe))throw new TypeError("Cannot call a class as a function")}(this,De),oe=function(Me,fe){return!fe||pe(fe)!=="object"&&typeof fe!="function"?we(Me):fe}(this,Re(De).call(this,Ee)),xe(we(oe),"clickNext",function(){var he=oe.index===null?0:oe.index+1;oe.onTransitionRequest("next",he),oe.goTo({index:he,direction:!0})}),xe(we(oe),"clickPrev",function(){var he=oe.index-1;oe.onTransitionRequest("prev",he),oe.goTo({index:he,direction:!1})}),xe(we(oe),"touchStart",function(he){if(!oe.animating&&oe.index!==null){var Me=he.nativeEvent;oe.touchStartPoint=Me.touches[0].clientX}}),xe(we(oe),"touchMove",function(he){if(!oe.animating&&oe.touchStartPoint){var Me=he.nativeEvent,fe=Me.touches[0].clientX-oe.touchStartPoint,Pe=oe[oe.active],Oe=oe[oe.loader],je=!(fe>0),Ve=Math.abs(fe);oe.touchEnabled!==!1?Ve>=10&&(oe.loading===!1?oe.goTo({index:je?oe.index+1:oe.index-1,direction:je,touch:!0}):oe.direction===!0?(fe+=10,Math.abs(fe)>Pe.offsetWidth?fe=-Pe.offsetWidth:fe>0&&(fe=0),Pe.style.transform="translate3d(".concat(fe,"px, 0, 0)"),Oe.style.transform="translate3d(calc(100% + ".concat(fe,"px), 0, 0)")):(fe-=10,Math.abs(fe)>Pe.offsetWidth?fe=Pe.offsetWidth:fe<0&&(fe=0),Pe.style.transform="translate3d(".concat(fe,"px, 0, 0)"),Oe.style.transform="translate3d(calc(-100% + ".concat(fe,"px), 0, 0)"))):Ve>20&&(oe.touchEnabled=!0,oe.touchStartPoint=Me.touches[0].clientX)}}),xe(we(oe),"touchEnd",function(){!oe.animating&&oe.touchStartPoint&&oe.loading&&(oe.touchStartPoint=null,oe.animating=!0,oe.touchEnabled=!1,oe.animateMobileEnd(function(){oe.index=oe.nextIndex,oe.setState({index:oe.index}),oe.onTransitionEnd(),oe.animating=!1,oe.loading=!1,oe.unchargeIndex()}))}),xe(we(oe),"bulletClick",function(he){var Me=he.currentTarget,fe=parseInt(Me.getAttribute("data-index"),10);oe.goTo({index:fe,direction:!(oe.index>fe)},function(){Object(g.onceNextCssLayout)().then(function(){Object(b.a)(Me,oe.classNames.bulletsLoading)})})}),oe.rootElement=Ee.rootElement||ke,oe.boxA=null,oe.boxB=null,oe.loaded=[],oe.active="boxA",oe.loader="boxB",oe.nextIndex=null,oe.loading=!1,oe.media=null,oe.started=!1,oe.touchEnabled=!1,oe.setupStartup(Ee),oe}return function(oe,he){if(typeof he!="function"&&he!==null)throw new TypeError("Super expression must either be null or a function");oe.prototype=Object.create(he&&he.prototype,{constructor:{value:oe,writable:!0,configurable:!0}}),he&&Se(oe,he)}(De,Le),function(oe,he,Me){return he&&ge(oe.prototype,he),oe}(De,[{key:"componentDidMount",value:function(){var oe=this;Object(b.a)(this.boxA,this.classNames.active),this.props.startupScreen&&(this.buttons&&(Object(b.a)(this.buttons.element,this.classNames.controlsHidden),Object(b.a)(this.buttons.element,this.classNames.controlsActive)),this.props.startup===!0&&this.media.length>0&&this.startup()),this.props.onFirstMount&&this.props.onFirstMount(le({},this.getInfo())),this.buttons&&Object(g.onceNextCssLayout)().then(function(){oe.buttons&&oe.buttons.element&&Object(b.b)(oe.buttons.element,oe.classNames.controlsHidden)})}},{key:"UNSAFE_componentWillReceiveProps",value:function(oe){if(this.checkChildren(oe),this.setupClassNames(Object(b.e)(oe.cssModule)),oe.name===this.props.name)if(oe.startup!==!0||this.started!==!1)if(oe.selected===this.props.selected)this.refreshSlider();else{var he=this.getIndex(oe.selected),Me=oe.infinite===!0&&he===0&&this.index===this.media.length-1||!(this.index>he);this.goTo({index:he,direction:Me})}else this.startup();else this.resetSlider(oe.selected)}},{key:"onTransitionStart",value:function(){var oe=this.media[this.index],he=this.media[this.nextIndex],Me=le({},this.getInfo(),{nextSlide:this[this.loader],nextIndex:this.nextIndex,nextMedia:he});this.props.onTransitionStart&&this.props.onTransitionStart(Me),oe&&oe.onTransitionStartOut&&oe.onTransitionStartOut(Me),he&&he.onTransitionStartIn&&he.onTransitionStartIn(Me)}},{key:"onTransitionRequest",value:function(oe,he){var Me=this.media[this.index],fe=this.checkIndex(he),Pe=this.media[fe],Oe=le({eventName:oe},this.getInfo(),{nextSlide:null,nextIndex:fe,nextMedia:Pe});this.props.onTransitionRequest&&this.props.onTransitionRequest(Oe),Me&&Me.onTransitionRequestOut&&Me.onTransitionRequestOut(Oe),Pe&&Pe.onTransitionRequestIn&&Pe.onTransitionRequestIn(Oe)}},{key:"onTransitionEnd",value:function(){var oe=this.media[this.index],he=le({},this.getInfo());this.props.onTransitionEnd&&this.props.onTransitionEnd(he),oe&&oe.onTransitionEnd&&oe.onTransitionEnd(he)}},{key:"getRootClassName",value:function(){var oe=this.props,he=oe.animation,Me=oe.className,fe=oe.cssModule,Pe=oe.disabled,Oe=oe.fillParent,je=oe.infinite,Ve=oe.organicArrows;return Object(b.d)({animation:he,className:Me,cssModule:Object(b.e)(fe),current:this.state.index,disabled:Pe,fillParent:Oe,infinite:je,organicArrows:Ve,rootElement:this.rootElement,total:this.media.length})}},{key:"setupStartup",value:function(oe){if(this.checkChildren(oe),this.setupClassNames(Object(b.e)(oe.cssModule)),oe.startupScreen){var he=this.getIndex(this.props.selected);this.index=null,this.state={index:this.index,boxA:{className:this.classNames.startUp,children:oe.startupScreen},boxB:this.media[he]||null}}else this.started=!0,this.index=this.getIndex(this.props.selected),this.state={index:this.index,boxA:this.media[this.index]||null,boxB:null}}},{key:"getInfo",value:function(){return{slides:this.media.length,currentIndex:this.index,currentSlide:this[this.active],currentMedia:this.media[this.index],element:this.slider}}},{key:"getProgressBar",value:function(){if(!document)return{};var oe=document.createElement("div");return oe.className=this.classNames.bar,oe}},{key:"setupClassNames",value:function(oe){this.classNames=Object(b.f)(this.rootElement,oe)}},{key:"getIndex",value:function(oe){var he=0;return typeof oe=="number"?oe:(typeof oe=="string"&&this.media.forEach(function(Me,fe){Me.slug===oe&&(he=fe)}),he)}},{key:"refreshSlider",value:function(){var oe;if(this.loading!==!0&&this.props.startup!==!1&&this.index!==null){var he=this.index;this.setState((xe(oe={index:he},this.active,this.media[this.getIndex(he)]),xe(oe,this.loader,null),oe))}}},{key:"startup",value:function(){var oe=this;this.started=!0,setTimeout(function(){oe.goTo({index:oe.props.selected,direction:!0,touch:!1})},this.props.startupDelay||75)}},{key:"resetSlider",value:function(){var oe,he=this,Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.index=Me,this.setState((xe(oe={index:Me},this.active,this.media[this.getIndex(Me)]),xe(oe,this.loader,null),oe),function(){he.props.onResetSlider&&he.props.onResetSlider(le({},he.getInfo()))})}},{key:"checkChildren",value:function(oe){oe.children&&(oe.children!==this.props.children||this.props.children&&!this.media)?this.media=Object(b.g)(oe.children):oe.media&&oe.media.length?this.media=oe.media:this.media||(this.media=[])}},{key:"startBarAnimation",value:function(oe){var he=this,Me=oe.active;return new Promise(function(fe){he.bar=he.getProgressBar(),Me.appendChild(he.bar),Object(g.onceNextCssLayout)().then(function(){Object(g.onceNextCssLayout)().then(function(){Object(b.a)(he.bar,he.classNames.barActive),fe()})})})}},{key:"endBarAnimation",value:function(oe){var he=this;this.bar&&Object(g.onceNextCssLayout)().then(function(){Object(g.onceTransitionEnd)(he.bar).then(function(){oe()}),Object(b.a)(he.bar,he.classNames.barEnd)})}},{key:"loadContent",value:function(oe,he){var Me=this;return new Promise(function(fe,Pe){if(Me.props.onLoadStart||he&&he.onLoadStart){var Oe=Me.props.onLoadStart||he&&he.onLoadStart;return Me.startBarAnimation({active:oe}),void Oe(le({next:function(){Me.endBarAnimation(function(){fe(Me.bar)})},error:Pe},Me.getInfo()))}if(he&&(he.source||he.preload)){var je=he.preload?he.preload:he.source&&[he.source]||[];return Me.checkLoadedUrls(je)===!0?void fe(null):(Me.startBarAnimation({active:oe}),void Ie.loadMultiple(je).then(function(){Me.pushLoaded(je),Me.endBarAnimation(function(){fe(Me.bar)})}))}fe(null)})}},{key:"pushLoaded",value:function(oe){this.loaded=[].concat(se(this.loaded),se(oe))}},{key:"checkLoadedUrls",value:function(oe){var he=this,Me=!0;return oe.forEach(function(fe){he.loaded.includes(fe)||(Me=!1)}),Me}},{key:"startAnimationMobile",value:function(){var oe=this.direction,he=this[this.active],Me=this[this.loader],fe=oe?this.classNames.contentMoveRight:this.classNames.contentMoveLeft,Pe=oe?this.classNames.contentMoveLeft:this.classNames.contentMoveRight;this.props.onTransitionStart&&this.props.onTransitionStart(le({},this.getInfo(),{nextSlide:this[this.loader],nextIndex:this.nextIndex,nextMedia:this.media[this.nextIndex]}));var Oe=he.querySelector(".".concat(Object(b.c)(this.classNames.content)));Object(b.a)(Oe,Pe),Object(b.a)(Oe,this.classNames.contentExit);var je=Me.querySelector(".".concat(Object(b.c)(this.classNames.content)));Object(b.a)(je,fe),Object(b.a)(je,this.classNames.contentStatic),Object(b.a)(he,this.classNames.animated),Object(b.a)(Me,this.classNames.animated)}},{key:"animateMobileEnd",value:function(oe){var he=this,Me=this.direction,fe=this[this.active],Pe=this[this.loader],Oe=Me?this.classNames.moveLeft:this.classNames.moveRight,je=Me?this.classNames.contentMoveRight:this.classNames.contentMoveLeft,Ve=Me?this.classNames.contentMoveLeft:this.classNames.contentMoveRight,ze=Pe.querySelector(".".concat(Object(b.c)(this.classNames.content))),We=fe.querySelector(".".concat(Object(b.c)(this.classNames.content)));Object(b.b)(ze,this.classNames.contentStatic),Object(b.a)(Pe,this.classNames.animatedMobile),Object(b.a)(fe,this.classNames.animatedMobile),Object(g.onceNextCssLayout)().then(function(){Pe.style.transform="translate3d(0, 0, 0)",fe.style.transform="translate3d(".concat(he.direction?"-":"","100%, 0, 0)"),Object(g.onceTransitionEnd)(fe).then(function(){he.loading&&(Object(b.b)(fe,he.classNames.animated),Object(b.b)(Pe,he.classNames.animated),Object(b.a)(Pe,he.classNames.active),Object(b.b)(fe,he.classNames.active),Object(b.b)(fe,Oe),Object(b.b)(Pe,he.classNames.animatedMobile),Object(b.b)(fe,he.classNames.animatedMobile),Object(b.b)(We,Ve),Object(b.b)(We,he.classNames.contentExit),Object(b.b)(ze,je),he.buttons&&setTimeout(function(){he.buttons&&Object(b.b)(he.buttons.element,he.classNames.controlsActive)},he.props.controlsReturnDelay),he.activeArrow&&(Object(b.b)(he.activeArrow,he.activeArrowClass),he.activeArrow=null,he.activeArrowClass=null),he.active=he.active==="boxA"?"boxB":"boxA",he.loader=he.active==="boxA"?"boxB":"boxA",oe&&oe())})})}},{key:"runAnimation",value:function(oe){var he=this,Me=oe.active,fe=oe.media,Pe=oe.contentExitMoveClass,Oe=oe.contentEnterMoveClass,je=oe.activeContentElement,Ve=oe.loaderContentElement,ze=oe.loader,We=oe.loaderPosition,Ze=oe.exitPosition,Je=oe.callback,et=oe.transitionDelay;this.loadContent(Me,fe).then(function(Tt){Object(b.a)(je,Pe),Object(b.a)(je,he.classNames.contentExit),Object(b.a)(Ve,Oe),Object(b.a)(Ve,he.classNames.contentStatic),setTimeout(function(){Object(g.onceNextCssLayout)().then(function(){Object(b.a)(Me,he.classNames.animated),Object(b.a)(ze,he.classNames.animated),Object(b.b)(Ve,he.classNames.contentStatic),Object(b.a)(Me,he.classNames.exit),Object(b.a)(ze,We),Object(b.a)(Me,Ze),Object(g.onceAnimationEnd)(Me).then(function(){Object(b.a)(ze,he.classNames.active),Object(b.b)(ze,We),Object(b.b)(ze,he.classNames.animated),Object(b.b)(Me,he.classNames.animated),Object(b.b)(Me,he.classNames.active),Object(b.b)(Me,Ze),Object(b.b)(Me,he.classNames.exit),Object(b.b)(je,Pe),Object(b.b)(je,he.classNames.contentExit),Object(b.b)(Ve,Oe),Tt&&Me.removeChild(Tt),he.buttons&&setTimeout(function(){he.buttons&&Object(b.b)(he.buttons.element,he.classNames.controlsActive)},he.props.controlsReturnDelay),he.active=he.active==="boxA"?"boxB":"boxA",he.loader=he.active==="boxA"?"boxB":"boxA";var ut=!he.activeArrow;he.activeArrow&&(Object(g.onceTransitionEnd)(he.activeArrow,{tolerance:he.index===null?0:2}).then(function(){he.releaseTransition()}),Object(b.b)(he.activeArrow,he.activeArrowClass),he.activeArrow=null,he.activeArrowClass=null),Je({release:ut})})})},et)})}},{key:"releaseTransition",value:function(){this.loading=!1}},{key:"startAnimation",value:function(oe,he,Me){var fe=this.props.transitionDelay,Pe=this[this.active],Oe=this[this.loader],je=oe?this.classNames.moveRight:this.classNames.moveLeft,Ve=oe?this.classNames.moveLeft:this.classNames.moveRight,ze=oe?this.classNames.contentMoveRight:this.classNames.contentMoveLeft,We=oe?this.classNames.contentMoveLeft:this.classNames.contentMoveRight,Ze=Pe.querySelector(".".concat(Object(b.c)(this.classNames.content))),Je=Oe.querySelector(".".concat(Object(b.c)(this.classNames.content)));Pe.style.removeProperty("transform"),Oe.style.removeProperty("transform"),this.onTransitionStart();var et={active:Pe,media:he,contentExitMoveClass:We,contentEnterMoveClass:ze,activeContentElement:Ze,loaderContentElement:Je,loader:Oe,loaderPosition:je,exitPosition:Ve,callback:Me,transitionDelay:fe};this.runAnimation(et)}},{key:"goTo",value:function(oe){var he=this,Me=oe.index,fe=oe.direction,Pe=oe.touch,Oe=Pe!==void 0&&Pe,je=this.getIndex(Me);this.loading!==!0&&Me!==this.index?(this.loading=!0,this.direction=fe,Oe!==!0?this.activateArrows(fe,function(){he.chargeIndex(je,function(Ve){he.renderedLoader=!0,he.startAnimation(fe,Ve,function(ze){var We=ze.release,Ze=We===void 0||We;he.index=he.nextIndex,he.setState({index:he.index},function(){he.onTransitionEnd(),Ze===!0&&he.releaseTransition()})})})}):this.chargeIndex(je,function(){he.activateArrows(fe),he.startAnimationMobile()})):this.props.onTransitionReject&&this.props.onTransitionReject(le({},this.getInfo(),{forceTransition:function(){he.goTo({index:Me,direction:fe,touch:Oe})}}))}},{key:"checkIndex",value:function(oe){return oe>this.media.length-1?0:oe<0?this.media.length-1:oe}},{key:"chargeIndex",value:function(oe,he){this.nextIndex=this.checkIndex(oe);var Me={},fe=this.media[this.nextIndex];Me[this.loader]=le({loader:!0},fe),this.setState(Me,function(){he(fe)})}},{key:"unchargeIndex",value:function(){var oe={};oe[this.loader]=null,this.setState(oe,function(){})}},{key:"activateArrows",value:function(oe,he){var Me=oe?"right":"left",fe=Object(b.e)(this.props.cssModule),Pe=Object(b.c)(Object(v.c)("".concat(this.rootElement,"__controls__arrow-").concat(Me),fe));if(this.buttons){var Oe=oe?this.buttons.next:this.buttons.prev;this.activeArrow=Oe.querySelector(".".concat(Pe))}!this.activeArrow||this.buttons&&this.buttons.element&&this.buttons.element.classList.contains(this.classNames.controlsActive)?he&&he():(this.activeArrowClass=Object(v.c)("".concat(this.rootElement,"__controls__arrow-").concat(Me,"--active"),fe),Object(g.onceTransitionEnd)(this.activeArrow,{tolerance:this.index===null?0:2}).then(function(){he&&he()}),this.buttons&&this.buttons.element&&(Object(b.a)(this.buttons.element,this.classNames.controlsActive),Object(b.a)(this.activeArrow,this.activeArrowClass)))}},{key:"renderBox",value:function(oe){var he=this,Me={};return this.props.mobileTouch&&(Me.onTouchStart=this.touchStart,Me.onTouchMove=this.touchMove,Me.onTouchEnd=this.touchEnd),h.a.createElement("div",ie({ref:function(Pe){he["box".concat(oe)]=Pe},className:this.classNames.box},Me),this.state["box".concat(oe)]&&h.a.createElement(ae,{media:this.state["box".concat(oe)],className:this.classNames.content}))}},{key:"render",value:function(){var oe=this,he=this.props,Me=he.cssModule,fe=he.organicArrows,Pe=he.bullets,Oe=he.style,je=he.customContent,Ve=he.buttons,ze=he.buttonContentLeft,We=he.buttonContentRight,Ze=this.rootElement;return h.a.createElement("div",{ref:function(et){oe.slider=et},className:this.getRootClassName(),style:Oe},h.a.createElement("div",{ref:function(et){oe.wrapper=et},className:this.classNames.wrapper},h.a.createElement("div",{ref:function(et){oe.container=et},className:this.classNames.container},this.renderBox("A"),this.renderBox("B")),Ve&&h.a.createElement(Y,{rootElement:Ze,cssModule:Object(b.e)(Me),onMount:function(et){oe.buttons=et},onNext:this.clickNext,onPrev:this.clickPrev,organicArrows:fe,buttonContentLeft:ze,buttonContentRight:We}),je),Pe&&h.a.createElement(A,{cssModule:Object(b.e)(Me),rootElement:Ze,media:this.media,selected:this.state.index,onClick:function(et){oe.onTransitionRequest("bullet",et.index),oe.goTo(et)}}))}}]),De}(h.a.Component);xe(He,"propTypes",{animation:p.a.string,bullets:p.a.bool,buttonContentLeft:p.a.node,buttonContentRight:p.a.node,buttons:p.a.bool,children:p.a.node,className:p.a.string,controlsReturnDelay:p.a.number,cssModule:p.a.any,customContent:p.a.node,onLoadStart:p.a.func,disabled:p.a.bool,fillParent:p.a.bool,infinite:p.a.bool,media:p.a.array,name:p.a.string,onFirstMount:p.a.func,onResetSlider:p.a.func,onStartupRelease:p.a.func,onTransitionEnd:p.a.func,onTransitionRequest:p.a.func,onTransitionStart:p.a.func,organicArrows:p.a.bool,rootElement:p.a.string,selected:p.a.any,startup:p.a.bool,startupDelay:p.a.number,startupScreen:p.a.object,style:p.a.object,transitionDelay:p.a.number,mobileTouch:p.a.bool}),xe(He,"defaultProps",{animation:null,bullets:!0,buttonContentLeft:null,buttonContentRight:null,buttons:!0,children:null,className:null,controlsReturnDelay:0,cssModule:null,customContent:null,onLoadStart:null,disabled:!1,fillParent:!1,infinite:!0,media:[],name:"awesome-slider",onFirstMount:null,onResetSlider:null,onStartupRelease:null,onTransitionEnd:null,onTransitionRequest:null,onTransitionStart:null,organicArrows:!0,rootElement:ke,selected:0,startup:!0,startupDelay:0,startupScreen:null,style:{},transitionDelay:0,mobileTouch:!0}),c.default=He}])})}(dist$4)),dist$4.exports}var distExports=requireDist$1();const AwesomeSlider=getDefaultExportFromCjs(distExports);class Carousel extends React2.Component{constructor(n){super(n);M(this,"intervalPlay");M(this,"nextPage",()=>{var s,l;let n=((s=this.state)==null?void 0:s.page)??0;(l=this.props)!=null&&l.children&&n+1<this.props.children.length&&(this.setState({page:n+1}),this.props.onChage&&this.props.onChage(n+1))});M(this,"previousPage",()=>{var s,l;let n=((s=this.state)==null?void 0:s.page)??0;(l=this.props)!=null&&l.children&&n>0&&(this.setState({page:n-1}),this.props.onChage&&this.props.onChage(n-1))});M(this,"autoPlay",()=>{var s,l;let n=((s=this.state)==null?void 0:s.page)??0;(l=this.props)!=null&&l.children&&n+1===this.props.children.length&&(n=-1),this.setState({page:n+1}),this.props.onChage&&this.props.onChage(n+1)});n.buttons??(n.buttons=!0),this.state={page:0},this.autoPlay=this.autoPlay.bind(this),this.nextPage=this.nextPage.bind(this),this.previousPage=this.previousPage.bind(this)}componentDidMount(){this.props.autoPlay&&(this.intervalPlay=setInterval(this.autoPlay,this.props.duration??2e3))}componentDidUpdate(n){this.props.autoPlay!==n.autoPlay&&!this.props.autoPlay&&clearInterval(this.intervalPlay)}render(){var n;return jsxRuntimeExports.jsx(AwesomeSlider,{animation:this.props.animation,style:this.props.style,className:`custom-slider-container ${this.props.className??""}`,selected:this.state.page,bullets:!1,buttons:this.props.buttons?this.props.children&&((n=this.props.children)==null?void 0:n.length)>1:!1,organicArrows:!1,buttonContentLeft:this.props.prevButton??jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/circle-ctrl-left",size:"2.4rem",color:this.props.iconColor??"var(--neutral-absolute-background-color,light-dark(#FFFFFF, #14181b))"}),buttonContentRight:this.props.nextButton??jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/circle-ctrl-right",size:"2.4rem",color:this.props.iconColor??"var(--neutral-absolute-background-color,light-dark(#FFFFFF, #14181b))"}),children:this.props.children})}}const disabled="_disabled_1y7wn_67",styles$9={"tag-container":"_tag-container_1y7wn_1","type-button":"_type-button_1y7wn_37","tag-label":"_tag-label_1y7wn_45",disabled};class Tag extends React2.Component{render(){return jsxRuntimeExports.jsxs("div",{id:this.props.id,"tag-type":this.props.status??"default",className:`${styles$9["tag-container"]} row ${this.props.onClick?styles$9["type-button"]:""} ${this.props.disabled?styles$9.disabled:""} ${this.props.className??"button-text-6"} `,style:this.props.style,onClick:this.props.onClick,children:[this.props.prefix,jsxRuntimeExports.jsx(Text$2,{maxLine:1,className:styles$9["tag-label"],children:this.props.title}),this.props.suffix]})}}const styles$8={"number-picker-container":"_number-picker-container_163rx_1","simple-number-picker":"_simple-number-picker_163rx_1","helper-text":"_helper-text_163rx_197"},NumberPicker=({type:o="icon-button",volume:a=1,style:n={},...s})=>{var d;const[l,c]=React2.useState(0),u=React2.useRef(null);return React2.useEffect(()=>{u.current&&(c(s.value??0),u.current.value=`${s.value??0}`)},[s.value,u]),jsxRuntimeExports.jsxs("label",{id:s.id,className:`row ${s.simpleStyle?styles$8["simple-number-picker"]:styles$8["number-picker-container"]} ${s.className??(s.simpleStyle?"":"body-2")} ${(d=s.helperText)!=null&&d.length?styles$8["helper-text"]:""}`,"number-picker-type":o,"helper-text":s.helperText,style:{"--helper-text-color":s.helperTextColor??"#e14337",...n},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-delete",className:"icon-button light",style:{padding:"0.6rem",color:s.iconColor},onClick:()=>{var f;let h=l-a;(s.min===void 0||h>=s.min)&&(a%1===0?h=Math.round(h):h=parseFloat(h.toFixed(1)),c(h),u.current&&(u.current.value=`${h}`),(f=s.onChange)==null||f.call(s,h))}}),jsxRuntimeExports.jsx("input",{ref:u,readOnly:s.readOnly,disabled:s.disabled,onKeyDown:h=>{switch(h.key.toLowerCase()){case"enter":h.currentTarget.blur();break}},onFocus:h=>{h.currentTarget.select()},onBlur:h=>{var p,g,v;let f=a%1===0?parseInt(h.target.value.trim()):parseFloat(h.target.value.trim());isNaN(f)?h.target.value=`${l}`:(a%1===0?f=Math.round(f):f=parseFloat(f.toFixed(1)),s.min!==void 0&&f<s.min?(c(s.min),u.current&&(u.current.value=`${s.min}`),(p=s.onChange)==null||p.call(s,s.min)):s.max!==void 0&&f>s.max?(c(s.max),u.current&&(u.current.value=`${s.max}`),(g=s.onChange)==null||g.call(s,s.max)):(c(f),u.current&&(u.current.value=`${f}`),(v=s.onChange)==null||v.call(s,f)))}}),jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-add",className:"icon-button light",style:{padding:"0.6rem",color:s.iconColor},onClick:()=>{var f;let h=l+a;(s.max===void 0||h<=s.max)&&(a%1===0?h=Math.round(h):h=parseFloat(h.toFixed(1)),c(h),u.current&&(u.current.value=`${h}`),(f=s.onChange)==null||f.call(s,h))}})]})},styles$7={"input-opt-container":"_input-opt-container_13315_1"};class InputOtp extends React2.Component{constructor(n){super(n);M(this,"containerRef",React2.createRef());M(this,"getValue",()=>this.containerRef.current?[...this.containerRef.current.querySelectorAll("input")].map(n=>n.value).join(""):this.props.value??"");this.getValue=this.getValue.bind(this)}componentDidUpdate(n){var s;if(n.value!==this.props.value&&this.containerRef.current){const l=[...this.containerRef.current.querySelectorAll("input")];if((s=this.props.value)!=null&&s.length)for(let c=0;c<l.length;c++)l[c].value=this.props.value[c];else for(let c=0;c<l.length;c++)l[c].value=""}}render(){var n;return jsxRuntimeExports.jsx("div",{id:this.props.id,ref:this.containerRef,"helper-text":this.props.helperText,style:this.props.style?{"--helper-text-color":this.props.helperTextColor??"#e14337",...this.props.style}:{"--helper-text-color":this.props.helperTextColor??"#e14337"},className:`row body-1 ${styles$7["input-opt-container"]} ${((n=this.props.helperText)==null?void 0:n.length)&&"helper-text"} ${this.props.className??""}`,onMouseDown:s=>{s.stopPropagation(),s.preventDefault();const l=[...s.target.closest("div").childNodes];for(const[c,u]of l.entries())if(!u.value.length||c===l.length-1){u.focus();break}},children:Array.from({length:this.props.length??6}).map((s,l)=>jsxRuntimeExports.jsx("input",{autoFocus:l===0&&this.props.autoFocus,disabled:this.props.disabled,style:this.props.inputStyle,onKeyDown:c=>{var d,h;const u=c.key.toLowerCase();switch(u){case"backspace":c.target.value.length?c.target.value="":((d=c.target.previousSibling)==null?void 0:d.localName)==="input"?c.target.previousSibling.focus():c.target.blur();break;case"delete":c.target.value="";break;default:if(c.preventDefault(),c.stopPropagation(),u==="v"&&c.ctrlKey)return navigator.clipboard.readText().then(f=>{/^\d{6}$/g.test(f)&&[...c.target.closest("div").childNodes].forEach((v,b)=>{v.value=f[b],v.focus()})});/[0-9]/g.test(u)&&!u.startsWith("f")&&(c.target.value.length||(c.target.value=u),((h=c.target.nextSibling)==null?void 0:h.localName)==="input"&&!c.target.nextSibling.value.length?c.target.nextSibling.focus():c.target.blur());break}},onBlur:()=>{this.props.onChange&&this.props.onChange(this.getValue(),this.containerRef.current)}},"opt-"+l))})}}const styles$6={"login-view-container":"_login-view-container_ljuvx_1","login-view-form-container":"_login-view-form-container_ljuvx_15","login-btn":"_login-btn_ljuvx_49","forgot-password-btn":"_forgot-password-btn_ljuvx_77","register-btn":"_register-btn_ljuvx_95","login-social-media":"_login-social-media_ljuvx_105","or-spacing":"_or-spacing_ljuvx_133"};function WLoginView(o){var u,d,h,f,p,g;const a=useForm({shouldFocusError:!1}),[n,s]=React2.useState(!1),{t:l}=useTranslation(),c=v=>{o.onSubmit&&o.onSubmit(v,a)};return jsxRuntimeExports.jsxs("form",{id:o.id,className:`col login-view-container ${styles$6["login-view-container"]} ${o.className??""}`,style:o.style,children:[typeof o.logo=="string"?jsxRuntimeExports.jsx("img",{alt:"logo",src:o.logo,height:"36rem"}):o.logo,jsxRuntimeExports.jsxs("div",{className:`col login-view-form-container ${styles$6["login-view-form-container"]}`,children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-4",children:o.title??`${l("loginTo")} Wini`}),jsxRuntimeExports.jsxs("div",{className:"col",children:[jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",overflow:"visible"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.formData.username.label??l("username")}),jsxRuntimeExports.jsx(TextField,{autoComplete:"username",className:"placeholder-2",placeholder:o.formData.username.label,style:{height:"4.8rem"},prefix:o.formData.username.prefix,name:o.formData.username.name,register:(o.methods??a).register(o.formData.username.name,{onChange:v=>{v.target.value=v.target.value.trim()},onBlur:o.formData.username.onValidate}),onComplete:v=>{v.target.blur()},helperText:(d=(u=(o.methods??a).formState.errors)==null?void 0:u[o.formData.username.name])==null?void 0:d.message})]}),jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",overflow:"visible"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.formData.password.label??l("password")}),jsxRuntimeExports.jsx(TextField,{autoComplete:"current-password",className:"placeholder-2",placeholder:o.formData.password.label,style:{height:"4.8rem"},prefix:o.formData.password.prefix,suffix:jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{s(!n)},children:jsxRuntimeExports.jsx(Winicon,{src:`outline/user interface/${n?"view":"hide"}`,size:"1.6rem"})}),name:o.formData.password.name,type:n?"text":"password",register:(o.methods??a).register(o.formData.password.name,{onChange:v=>{v.target.value=v.target.value.trim()},onBlur:o.formData.password.onValidate}),onComplete:v=>{var b;(b=(o.methods??a).watch(o.formData.password.name))!=null&&b.length?(v.target.blur(),!o.formData.password.onValidate&&o.onSubmit&&c((o.methods??a).getValues())):v.target.blur()},helperText:(f=(h=(o.methods??a).formState.errors)==null?void 0:h[o.formData.password.name])==null?void 0:f.message})]}),jsxRuntimeExports.jsx(Text$2,{className:`button-text-3 ${styles$6["forgot-password-btn"]}`,onClick:o.onForgotPassword,children:o.forgotPasswordText??l("forgotPassword")}),jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"1.6rem"},children:[jsxRuntimeExports.jsx(Button,{disabled:!((p=(o.methods??a).watch(o.formData.username.name))!=null&&p.length&&((g=(o.methods??a).watch(o.formData.password.name))!=null&&g.length)),className:`button-text-1 ${styles$6["login-btn"]}`,onClick:o.onSubmit&&(o.methods??a).handleSubmit(c),label:o.buttonLoginLabel??l("login")}),jsxRuntimeExports.jsxs("div",{className:"row",style:{justifyContent:"center",gap:"0.4rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-4",children:o.registerPrefixText??l("dontHaveAccount")}),jsxRuntimeExports.jsx(Text$2,{className:`button-text-3 ${styles$6["register-btn"]}`,onClick:o.onRegister,children:o.registerText??`${l("signupFor")} Wini`})]})]}),o.loginWithGoogle||o.loginWithFacebook||o.loginWithApple||o.loginWithMicrosoft?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`row ${styles$6["or-spacing"]}`,children:[jsxRuntimeExports.jsx("div",{}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",children:o.orText??l("or")}),jsxRuntimeExports.jsx("div",{})]}),jsxRuntimeExports.jsxs("div",{className:`row ${styles$6["login-social-media"]}`,children:[o.loginWithGoogle&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:o.loginWithGoogle,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/social media/google",size:"2rem"}),label:"Google"}),o.loginWithFacebook&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:o.loginWithFacebook,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/social media/logo-facebook",size:"2rem"}),label:"Facebook"}),o.loginWithApple&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:o.loginWithApple,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/development/apple",size:"2rem"}),label:"Apple"}),o.loginWithMicrosoft&&jsxRuntimeExports.jsx(Button,{className:"label-1",onClick:o.loginWithMicrosoft,prefix:jsxRuntimeExports.jsx(Winicon,{src:"color/development/microsoft",size:"2rem"}),label:"Microsoft"})]})]}):null]})]})]})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createDefer(){const o={resolve:null,promise:null};return o.promise=new Promise(a=>{o.resolve=a}),o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function once(o){let a=null;return(...n)=>(a||(a={current:o(...n)}),a.current)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS$1=new Array(256).fill("").map((o,a)=>("0"+a.toString(16)).slice(-2));function uid$1(){const[o,a,n,s]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS$1[o>>0&255]+HEX_NUMBERS$1[o>>8&255]+HEX_NUMBERS$1[o>>16&255]+HEX_NUMBERS$1[o>>24&255]+HEX_NUMBERS$1[a>>0&255]+HEX_NUMBERS$1[a>>8&255]+HEX_NUMBERS$1[a>>16&255]+HEX_NUMBERS$1[a>>24&255]+HEX_NUMBERS$1[n>>0&255]+HEX_NUMBERS$1[n>>8&255]+HEX_NUMBERS$1[n>>16&255]+HEX_NUMBERS$1[n>>24&255]+HEX_NUMBERS$1[s>>0&255]+HEX_NUMBERS$1[s>>8&255]+HEX_NUMBERS$1[s>>16&255]+HEX_NUMBERS$1[s>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendExtraPluginsToEditorConfig(o,a){const n=o.extraPlugins||[];return{...o,extraPlugins:[...n,...a.filter(s=>!n.includes(s))]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isSemanticVersion(o){return!!o&&/^\d+\.\d+\.\d+/.test(o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKCdnTestingVersion(o){return o?["nightly","alpha","internal","nightly-","staging"].some(a=>o.includes(a)):!1}function isCKCdnVersion(o){return isSemanticVersion(o)||isCKCdnTestingVersion(o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function destructureSemanticVersion(o){if(!isSemanticVersion(o))throw new Error(`Invalid semantic version: ${o||"<blank>"}.`);const[a,n,s]=o.split(".");return{major:Number.parseInt(a,10),minor:Number.parseInt(n,10),patch:Number.parseInt(s,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLicenseVersionFromEditorVersion(o){if(isCKCdnTestingVersion(o))return 3;const{major:a}=destructureSemanticVersion(o);switch(!0){case a>=44:return 3;case a>=38:return 2;default:return 1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getCKBaseBundleInstallationInfo(){const{CKEDITOR_VERSION:o,CKEDITOR:a}=window;return isCKCdnVersion(o)?{source:a?"cdn":"npm",version:o}:null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSupportedLicenseVersionInstallationInfo(){const o=getCKBaseBundleInstallationInfo();return o?getLicenseVersionFromEditorVersion(o.version):null}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCKEditorFreeLicense(o,a){switch(a||(a=getSupportedLicenseVersionInstallationInfo()||void 0),a){case 1:case 2:return o===void 0;case 3:return o==="GPL";default:return!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createIntegrationUsageDataPlugin(o,a){return function(s){isCKEditorFreeLicense(s.config.get("licenseKey"))||s.on("collectUsageData",(l,{setUsageData:c})=>{c(`integration.${o}`,a)})}}var __defProp=Object.defineProperty,__defNormalProp=(o,a,n)=>a in o?__defProp(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n,__publicField=(o,a,n)=>__defNormalProp(o,typeof a!="symbol"?a+"":a,n);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const _LifeCycleElementSemaphore=class vr{constructor(a,n){__publicField(this,"_lifecycle"),__publicField(this,"_element"),__publicField(this,"_releaseLock",null),__publicField(this,"_value",null),__publicField(this,"_afterMountCallbacks",[]),__publicField(this,"_state",{destroyedBeforeInitialization:!1,mountingInProgress:null}),__publicField(this,"release",once(()=>{const{_releaseLock:s,_state:l,_element:c,_lifecycle:u}=this;l.mountingInProgress?l.mountingInProgress.then(()=>u.unmount({element:c,mountResult:this.value})).catch(d=>{console.error("Semaphore unmounting error:",d)}).then(s.resolve).then(()=>{this._value=null}):(l.destroyedBeforeInitialization=!0,s.resolve())})),this._element=a,this._lifecycle=n,this._lock()}get value(){return this._value}unsafeSetValue(a){this._value=a,this._afterMountCallbacks.forEach(n=>n(a)),this._afterMountCallbacks=[]}runAfterMount(a){const{_value:n,_afterMountCallbacks:s}=this;n?a(n):s.push(a)}_lock(){const{_semaphores:a}=vr,{_state:n,_element:s,_lifecycle:l}=this,c=a.get(s)||Promise.resolve(null),u=createDefer();this._releaseLock=u;const d=c.then(()=>n.destroyedBeforeInitialization?Promise.resolve(void 0):(n.mountingInProgress=l.mount().then(h=>(h&&this.unsafeSetValue(h),h)),n.mountingInProgress)).then(async h=>{h&&l.afterMount&&await l.afterMount({element:s,mountResult:h})}).then(()=>u.promise).catch(h=>{console.error("Semaphore mounting error:",h)}).then(()=>{a.get(s)===d&&a.delete(s)});a.set(s,d)}};__publicField(_LifeCycleElementSemaphore,"_semaphores",new Map);let LifeCycleElementSemaphore=_LifeCycleElementSemaphore;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactContextMetadataKey="$__CKEditorReactContextMetadata";function withCKEditorReactContextMetadata(o,a){return{...a,[ReactContextMetadataKey]:o}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ContextWatchdogContext=React2.createContext(null),isContextWatchdogValue=o=>!!o&&typeof o=="object"&&"status"in o&&["initializing","initialized","error"].includes(o.status),isContextWatchdogValueWithStatus=o=>a=>isContextWatchdogValue(a)&&a.status===o,isContextWatchdogInitializing=isContextWatchdogValueWithStatus("initializing"),isContextWatchdogReadyToUse=o=>isContextWatchdogValueWithStatus("initialized")(o)&&o.watchdog.state==="ready";/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const ReactIntegrationUsageDataPlugin=createIntegrationUsageDataPlugin("react",{version:"9.5.0",frameworkVersion:React2.version});/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function appendAllIntegrationPluginsToConfig(o){return isCKEditorFreeLicense(o.licenseKey)?o:appendExtraPluginsToEditorConfig(o,[ReactIntegrationUsageDataPlugin])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const REACT_INTEGRATION_READ_ONLY_LOCK_ID$1="Lock from React integration (@ckeditor/ckeditor5-react)";class CKEditor extends React2.Component{constructor(a){super(a),__publicField(this,"domContainer",React2.createRef()),__publicField(this,"editorSemaphore",null),this._checkVersion()}_checkVersion(){const{CKEDITOR_VERSION:a}=window;if(!a)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');const[n]=a.split(".").map(Number);n>=42||a.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}get _semaphoreValue(){const{editorSemaphore:a}=this;return a?a.value:null}get watchdog(){const{_semaphoreValue:a}=this;return a?a.watchdog:null}get editor(){const{_semaphoreValue:a}=this;return a?a.instance:null}shouldComponentUpdate(a){const{props:n,editorSemaphore:s}=this;return a.id!==n.id||a.disableWatchdog!==n.disableWatchdog?!0:(s&&(s.runAfterMount(({instance:l})=>{this._shouldUpdateEditorData(n,a,l)&&l.data.set(a.data)}),"disabled"in a&&s.runAfterMount(({instance:l})=>{a.disabled?l.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1):l.disableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)})),!1)}componentDidMount(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentDidUpdate(){isContextWatchdogInitializing(this.context)||this._initLifeCycleSemaphore()}componentWillUnmount(){this._unlockLifeCycleSemaphore()}_unlockLifeCycleSemaphore(){this.editorSemaphore&&(this.editorSemaphore.release(),this.editorSemaphore=null)}_initLifeCycleSemaphore(){this._unlockLifeCycleSemaphore(),this.editorSemaphore=new LifeCycleElementSemaphore(this.domContainer.current,{mount:async()=>this._initializeEditor(),afterMount:({mountResult:a})=>{const{onReady:n}=this.props;n&&this.domContainer.current!==null&&n(a.instance)},unmount:async({element:a,mountResult:n})=>{const{onAfterDestroy:s}=this.props;try{await this._destroyEditor(n),a.innerHTML=""}finally{s&&s(n.instance)}}})}render(){return React2.createElement("div",{ref:this.domContainer})}async _initializeEditor(){if(this.props.disableWatchdog)return{instance:await this._createEditor(this.domContainer.current,this._getConfig()),watchdog:null};const a=isContextWatchdogReadyToUse(this.context)?new EditorWatchdogAdapter(this.context.watchdog):new this.props.editor.EditorWatchdog(this.props.editor,this.props.watchdogConfig),n={current:0};return a.setCreator(async(s,l)=>{var c;const{editorSemaphore:u}=this,{onAfterDestroy:d}=this.props;n.current>0&&d&&((c=u==null?void 0:u.value)!=null&&c.instance)&&d(u.value.instance);const h=await this._createEditor(s,l);return u&&n.current>0&&(u.unsafeSetValue({instance:h,watchdog:a}),setTimeout(()=>{this.props.onReady&&this.props.onReady(a.editor)})),n.current++,h}),a.on("error",(s,{error:l,causesRestart:c})=>{(this.props.onError||console.error)(l,{phase:"runtime",willEditorRestart:c})}),await a.create(this.domContainer.current,this._getConfig()).catch(s=>{(this.props.onError||console.error)(s,{phase:"initialization",willEditorRestart:!1})}),{watchdog:a,instance:a.editor}}_createEditor(a,n){const{contextItemMetadata:s}=this.props;return s&&(n=withCKEditorReactContextMetadata(s,n)),this.props.editor.create(a,appendAllIntegrationPluginsToConfig(n)).then(l=>{if("disabled"in this.props){/* istanbul ignore else -- @preserve */this.props.disabled&&l.enableReadOnlyMode(REACT_INTEGRATION_READ_ONLY_LOCK_ID$1)}const c=l.model.document,u=l.editing.view.document;return c.on("change:data",d=>{/* istanbul ignore else -- @preserve */this.props.onChange&&this.props.onChange(d,l)}),u.on("focus",d=>{/* istanbul ignore else -- @preserve */this.props.onFocus&&this.props.onFocus(d,l)}),u.on("blur",d=>{/* istanbul ignore else -- @preserve */this.props.onBlur&&this.props.onBlur(d,l)}),l})}async _destroyEditor(a){const{watchdog:n,instance:s}=a;return new Promise((l,c)=>{/* istanbul ignore next -- @preserve */setTimeout(async()=>{try{if(n)return await n.destroy(),l();if(s)return await s.destroy(),l();l()}catch(u){console.error(u),c(u)}})})}_shouldUpdateEditorData(a,n,s){return!(a.data===n.data||s.data.get()===n.data)}_getConfig(){const a=this.props.config||{};return this.props.data&&a.initialData&&console.warn("Editor data should be provided either using `config.initialData` or `content` property. The config value takes precedence over `content` property and will be used when both are specified."),{...a,initialData:a.initialData||this.props.data||""}}}__publicField(CKEditor,"contextType",ContextWatchdogContext);class EditorWatchdogAdapter{constructor(a){__publicField(this,"_contextWatchdog"),__publicField(this,"_id"),__publicField(this,"_creator"),this._contextWatchdog=a,this._id=uid$1()}setCreator(a){this._creator=a}create(a,n){return this._contextWatchdog.add({sourceElementOrData:a,config:n,creator:this._creator,id:this._id,type:"editor"})}on(a,n){this._contextWatchdog.on("itemError",(s,{itemId:l,error:c})=>{l===this._id&&n(null,{error:c,causesRestart:void 0})})}destroy(){return this._contextWatchdog.state==="ready"?this._contextWatchdog.remove(this._id):Promise.resolve()}get editor(){return this._contextWatchdog.getItem(this._id)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function mergeRefs$1(...o){return a=>{o.forEach(n=>{typeof n=="function"?n(a):n!=null&&(n.current=a)})}}const EditorEditable=React2.memo(React2.forwardRef(({id:o,semaphore:a,rootName:n},s)=>{const l=React2.useRef(null);return React2.useEffect(()=>{let c,u;return a.runAfterMount(({instance:d})=>{if(!l.current)return;u=d;const{ui:h,model:f}=u,p=f.document.getRoot(n);p&&u.ui.getEditableElement(n)&&u.detachEditable(p),c=h.view.createEditable(n,l.current),h.addEditable(c),d.editing.view.forceRender()}),()=>{if(u&&u.state!=="destroyed"&&l.current){const d=u.model.document.getRoot(n);/* istanbul ignore else -- @preserve */d&&u.detachEditable(d)}}},[a.revision]),React2.createElement("div",{key:a.revision,id:o,ref:mergeRefs$1(s,l)})}));EditorEditable.displayName="EditorEditable";const EditorToolbarWrapper=React2.forwardRef(({editor:o},a)=>{const n=React2.useRef(null);return React2.useEffect(()=>{const s=n.current;if(!o||!s)return;const l=o.ui.view.toolbar.element;return s.appendChild(l),()=>{s.contains(l)&&s.removeChild(l)}},[o&&o.id]),React2.createElement("div",{ref:mergeRefs$1(n,a)})});EditorToolbarWrapper.displayName="EditorToolbarWrapper";var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),Symbol$2=root$1.Symbol,objectProto$f=Object.prototype,hasOwnProperty$d=objectProto$f.hasOwnProperty,nativeObjectToString$1=objectProto$f.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(o){var a=hasOwnProperty$d.call(o,symToStringTag$1),n=o[symToStringTag$1];try{o[symToStringTag$1]=void 0;var s=!0}catch{}var l=nativeObjectToString$1.call(o);return s&&(a?o[symToStringTag$1]=n:delete o[symToStringTag$1]),l}var objectProto$e=Object.prototype,nativeObjectToString=objectProto$e.toString;function objectToString(o){return nativeObjectToString.call(o)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(o){return o==null?o===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(o)?getRawTag(o):objectToString(o)}function isObjectLike(o){return o!=null&&typeof o=="object"}var symbolTag$3="[object Symbol]";function isSymbol(o){return typeof o=="symbol"||isObjectLike(o)&&baseGetTag(o)==symbolTag$3}function arrayMap(o,a){for(var n=-1,s=o==null?0:o.length,l=Array(s);++n<s;)l[n]=a(o[n],n,o);return l}var isArray$3=Array.isArray,symbolProto$2=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(o){if(typeof o=="string")return o;if(isArray$3(o))return arrayMap(o,baseToString)+"";if(isSymbol(o))return symbolToString?symbolToString.call(o):"";var a=o+"";return a=="0"&&1/o==-1/0?"-0":a}var reWhitespace=/\s/;function trimmedEndIndex(o){for(var a=o.length;a--&&reWhitespace.test(o.charAt(a)););return a}var reTrimStart=/^\s+/;function baseTrim(o){return o&&o.slice(0,trimmedEndIndex(o)+1).replace(reTrimStart,"")}function isObject$6(o){var a=typeof o;return o!=null&&(a=="object"||a=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(o){if(typeof o=="number")return o;if(isSymbol(o))return NAN;if(isObject$6(o)){var a=typeof o.valueOf=="function"?o.valueOf():o;o=isObject$6(a)?a+"":a}if(typeof o!="string")return o===0?o:+o;o=baseTrim(o);var n=reIsBinary.test(o);return n||reIsOctal.test(o)?freeParseInt(o.slice(2),n?2:8):reIsBadHex.test(o)?NAN:+o}function identity$1(o){return o}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(o){if(!isObject$6(o))return!1;var a=baseGetTag(o);return a==funcTag$2||a==genTag$1||a==asyncTag||a==proxyTag}var coreJsData=root$1["__core-js_shared__"],maskSrcKey=function(){var o=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}();function isMasked(o){return!!maskSrcKey&&maskSrcKey in o}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(o){if(o!=null){try{return funcToString$2.call(o)}catch{}try{return o+""}catch{}}return""}var reRegExpChar$1=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$d=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$c=objectProto$d.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$c).replace(reRegExpChar$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(o){if(!isObject$6(o)||isMasked(o))return!1;var a=isFunction$3(o)?reIsNative:reIsHostCtor;return a.test(toSource(o))}function getValue(o,a){return o==null?void 0:o[a]}function getNative(o,a){var n=getValue(o,a);return baseIsNative(n)?n:void 0}var WeakMap$2=getNative(root$1,"WeakMap"),objectCreate=Object.create,baseCreate=function(){function o(){}return function(a){if(!isObject$6(a))return{};if(objectCreate)return objectCreate(a);o.prototype=a;var n=new o;return o.prototype=void 0,n}}();function apply(o,a,n){switch(n.length){case 0:return o.call(a);case 1:return o.call(a,n[0]);case 2:return o.call(a,n[0],n[1]);case 3:return o.call(a,n[0],n[1],n[2])}return o.apply(a,n)}function copyArray(o,a){var n=-1,s=o.length;for(a||(a=Array(s));++n<s;)a[n]=o[n];return a}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(o){var a=0,n=0;return function(){var s=nativeNow(),l=HOT_SPAN-(s-n);if(n=s,l>0){if(++a>=HOT_COUNT)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}function constant$1(o){return function(){return o}}var defineProperty=function(){try{var o=getNative(Object,"defineProperty");return o({},"",{}),o}catch{}}(),baseSetToString=defineProperty?function(o,a){return defineProperty(o,"toString",{configurable:!0,enumerable:!1,value:constant$1(a),writable:!0})}:identity$1,setToString=shortOut(baseSetToString);function arrayEach(o,a){for(var n=-1,s=o==null?0:o.length;++n<s&&a(o[n],n,o)!==!1;);return o}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(o,a){var n=typeof o;return a=a??MAX_SAFE_INTEGER$2,!!a&&(n=="number"||n!="symbol"&&reIsUint.test(o))&&o>-1&&o%1==0&&o<a}function baseAssignValue(o,a,n){a=="__proto__"&&defineProperty?defineProperty(o,a,{configurable:!0,enumerable:!0,value:n,writable:!0}):o[a]=n}function eq(o,a){return o===a||o!==o&&a!==a}var objectProto$c=Object.prototype,hasOwnProperty$b=objectProto$c.hasOwnProperty;function assignValue(o,a,n){var s=o[a];(!(hasOwnProperty$b.call(o,a)&&eq(s,n))||n===void 0&&!(a in o))&&baseAssignValue(o,a,n)}function copyObject(o,a,n,s){var l=!n;n||(n={});for(var c=-1,u=a.length;++c<u;){var d=a[c],h=void 0;h===void 0&&(h=o[d]),l?baseAssignValue(n,d,h):assignValue(n,d,h)}return n}var nativeMax$1=Math.max;function overRest(o,a,n){return a=nativeMax$1(a===void 0?o.length-1:a,0),function(){for(var s=arguments,l=-1,c=nativeMax$1(s.length-a,0),u=Array(c);++l<c;)u[l]=s[a+l];l=-1;for(var d=Array(a+1);++l<a;)d[l]=s[l];return d[a]=n(u),apply(o,this,d)}}function baseRest(o,a){return setToString(overRest(o,a,identity$1),o+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength$1(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=MAX_SAFE_INTEGER$1}function isArrayLike$1(o){return o!=null&&isLength$1(o.length)&&!isFunction$3(o)}function isIterateeCall(o,a,n){if(!isObject$6(n))return!1;var s=typeof a;return(s=="number"?isArrayLike$1(n)&&isIndex(a,n.length):s=="string"&&a in n)?eq(n[a],o):!1}function createAssigner(o){return baseRest(function(a,n){var s=-1,l=n.length,c=l>1?n[l-1]:void 0,u=l>2?n[2]:void 0;for(c=o.length>3&&typeof c=="function"?(l--,c):void 0,u&&isIterateeCall(n[0],n[1],u)&&(c=l<3?void 0:c,l=1),a=Object(a);++s<l;){var d=n[s];d&&o(a,d,s,c)}return a})}var objectProto$b=Object.prototype;function isPrototype(o){var a=o&&o.constructor,n=typeof a=="function"&&a.prototype||objectProto$b;return o===n}function baseTimes(o,a){for(var n=-1,s=Array(o);++n<o;)s[n]=a(n);return s}var argsTag$3="[object Arguments]";function baseIsArguments(o){return isObjectLike(o)&&baseGetTag(o)==argsTag$3}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty,propertyIsEnumerable$1=objectProto$a.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(o){return isObjectLike(o)&&hasOwnProperty$a.call(o,"callee")&&!propertyIsEnumerable$1.call(o,"callee")};function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$2?Buffer$2.isBuffer:void 0,isBuffer$1=nativeIsBuffer||stubFalse,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$5="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$4="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$5]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$5]=typedArrayTags[stringTag$4]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(o){return isObjectLike(o)&&isLength$1(o.length)&&!!typedArrayTags[baseGetTag(o)]}function baseUnary(o){return function(a){return o(a)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var o=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return o||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function arrayLikeKeys(o,a){var n=isArray$3(o),s=!n&&isArguments(o),l=!n&&!s&&isBuffer$1(o),c=!n&&!s&&!l&&isTypedArray$2(o),u=n||s||l||c,d=u?baseTimes(o.length,String):[],h=d.length;for(var f in o)(a||hasOwnProperty$9.call(o,f))&&!(u&&(f=="length"||l&&(f=="offset"||f=="parent")||c&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||isIndex(f,h)))&&d.push(f);return d}function overArg(o,a){return function(n){return o(a(n))}}var nativeKeys=overArg(Object.keys,Object),objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function baseKeys(o){if(!isPrototype(o))return nativeKeys(o);var a=[];for(var n in Object(o))hasOwnProperty$8.call(o,n)&&n!="constructor"&&a.push(n);return a}function keys$2(o){return isArrayLike$1(o)?arrayLikeKeys(o):baseKeys(o)}function nativeKeysIn(o){var a=[];if(o!=null)for(var n in Object(o))a.push(n);return a}var objectProto$7=Object.prototype,hasOwnProperty$7=objectProto$7.hasOwnProperty;function baseKeysIn(o){if(!isObject$6(o))return nativeKeysIn(o);var a=isPrototype(o),n=[];for(var s in o)s=="constructor"&&(a||!hasOwnProperty$7.call(o,s))||n.push(s);return n}function keysIn(o){return isArrayLike$1(o)?arrayLikeKeys(o,!0):baseKeysIn(o)}var assignIn=createAssigner(function(o,a){copyObject(a,keysIn(a),o)}),reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(o,a){if(isArray$3(o))return!1;var n=typeof o;return n=="number"||n=="symbol"||n=="boolean"||o==null||isSymbol(o)?!0:reIsPlainProp.test(o)||!reIsDeepProp.test(o)||a!=null&&o in Object(a)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(o){var a=this.has(o)&&delete this.__data__[o];return this.size-=a?1:0,a}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty;function hashGet(o){var a=this.__data__;if(nativeCreate){var n=a[o];return n===HASH_UNDEFINED$2?void 0:n}return hasOwnProperty$6.call(a,o)?a[o]:void 0}var objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function hashHas(o){var a=this.__data__;return nativeCreate?a[o]!==void 0:hasOwnProperty$5.call(a,o)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(o,a){var n=this.__data__;return this.size+=this.has(o)?0:1,n[o]=nativeCreate&&a===void 0?HASH_UNDEFINED$1:a,this}function Hash(o){var a=-1,n=o==null?0:o.length;for(this.clear();++a<n;){var s=o[a];this.set(s[0],s[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(o,a){for(var n=o.length;n--;)if(eq(o[n][0],a))return n;return-1}var arrayProto$1=Array.prototype,splice=arrayProto$1.splice;function listCacheDelete(o){var a=this.__data__,n=assocIndexOf(a,o);if(n<0)return!1;var s=a.length-1;return n==s?a.pop():splice.call(a,n,1),--this.size,!0}function listCacheGet$1(o){var a=this.__data__,n=assocIndexOf(a,o);return n<0?void 0:a[n][1]}function listCacheHas(o){return assocIndexOf(this.__data__,o)>-1}function listCacheSet$1(o,a){var n=this.__data__,s=assocIndexOf(n,o);return s<0?(++this.size,n.push([o,a])):n[s][1]=a,this}function ListCache(o){var a=-1,n=o==null?0:o.length;for(this.clear();++a<n;){var s=o[a];this.set(s[0],s[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet$1;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet$1;var Map$1=getNative(root$1,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(o){var a=typeof o;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?o!=="__proto__":o===null}function getMapData(o,a){var n=o.__data__;return isKeyable(a)?n[typeof a=="string"?"string":"hash"]:n.map}function mapCacheDelete(o){var a=getMapData(this,o).delete(o);return this.size-=a?1:0,a}function mapCacheGet(o){return getMapData(this,o).get(o)}function mapCacheHas(o){return getMapData(this,o).has(o)}function mapCacheSet(o,a){var n=getMapData(this,o),s=n.size;return n.set(o,a),this.size+=n.size==s?0:1,this}function MapCache(o){var a=-1,n=o==null?0:o.length;for(this.clear();++a<n;){var s=o[a];this.set(s[0],s[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(o,a){if(typeof o!="function"||a!=null&&typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var n=function(){var s=arguments,l=a?a.apply(this,s):s[0],c=n.cache;if(c.has(l))return c.get(l);var u=o.apply(this,s);return n.cache=c.set(l,u)||c,u};return n.cache=new(memoize.Cache||MapCache),n}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(o){var a=memoize(o,function(s){return n.size===MAX_MEMOIZE_SIZE&&n.clear(),s}),n=a.cache;return a}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(rePropName,function(n,s,l,c){a.push(l?c.replace(reEscapeChar,"$1"):s||n)}),a});function toString$1(o){return o==null?"":baseToString(o)}function castPath(o,a){return isArray$3(o)?o:isKey(o,a)?[o]:stringToPath(toString$1(o))}function toKey(o){if(typeof o=="string"||isSymbol(o))return o;var a=o+"";return a=="0"&&1/o==-1/0?"-0":a}function baseGet(o,a){a=castPath(a,o);for(var n=0,s=a.length;o!=null&&n<s;)o=o[toKey(a[n++])];return n&&n==s?o:void 0}function get$2(o,a,n){var s=o==null?void 0:baseGet(o,a);return s===void 0?n:s}function arrayPush(o,a){for(var n=-1,s=a.length,l=o.length;++n<s;)o[l+n]=a[n];return o}var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$4=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$4=objectProto$4.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(o){if(!isObjectLike(o)||baseGetTag(o)!=objectTag$3)return!1;var a=getPrototype(o);if(a===null)return!0;var n=hasOwnProperty$4.call(a,"constructor")&&a.constructor;return typeof n=="function"&&n instanceof n&&funcToString.call(n)==objectCtorString}function baseSlice(o,a,n){var s=-1,l=o.length;a<0&&(a=-a>l?0:l+a),n=n>l?l:n,n<0&&(n+=l),l=a>n?0:n-a>>>0,a>>>=0;for(var c=Array(l);++s<l;)c[s]=o[s+a];return c}function castSlice(o,a,n){var s=o.length;return n=n===void 0?s:n,!a&&n>=s?o:baseSlice(o,a,n)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(o){return reHasUnicode.test(o)}function asciiToArray(o){return o.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(o){return o.match(reUnicode)||[]}function stringToArray(o){return hasUnicode(o)?unicodeToArray(o):asciiToArray(o)}function createCaseFirst(o){return function(a){a=toString$1(a);var n=hasUnicode(a)?stringToArray(a):void 0,s=n?n[0]:a.charAt(0),l=n?castSlice(n,1).join(""):a.slice(1);return s[o]()+l}}var upperFirst=createCaseFirst("toUpperCase");function arrayReduce(o,a,n,s){for(var l=-1,c=o==null?0:o.length;++l<c;)n=a(n,o[l],l,o);return n}function basePropertyOf(o){return function(a){return o==null?void 0:o[a]}}var deburredLetters={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},deburrLetter=basePropertyOf(deburredLetters),reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(o){return o=toString$1(o),o&&o.replace(reLatin,deburrLetter).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(o){return o.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(o){return reHasUnicodeWord.test(o)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="['’]",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(o){return o.match(reUnicodeWord)||[]}function words(o,a,n){return o=toString$1(o),a=a,a===void 0?hasUnicodeWord(o)?unicodeWords(o):asciiWords(o):o.match(a)||[]}var rsApos="['’]",reApos=RegExp(rsApos,"g");function createCompounder(o){return function(a){return arrayReduce(words(deburr(a).replace(reApos,"")),o,"")}}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(o){var a=this.__data__,n=a.delete(o);return this.size=a.size,n}function stackGet(o){return this.__data__.get(o)}function stackHas(o){return this.__data__.has(o)}var LARGE_ARRAY_SIZE=200;function stackSet(o,a){var n=this.__data__;if(n instanceof ListCache){var s=n.__data__;if(!Map$1||s.length<LARGE_ARRAY_SIZE-1)return s.push([o,a]),this.size=++n.size,this;n=this.__data__=new MapCache(s)}return n.set(o,a),this.size=n.size,this}function Stack(o){var a=this.__data__=new ListCache(o);this.size=a.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function baseAssign(o,a){return o&&copyObject(a,keys$2(a),o)}function baseAssignIn(o,a){return o&&copyObject(a,keysIn(a),o)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer$1=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(o,a){if(a)return o.slice();var n=o.length,s=allocUnsafe?allocUnsafe(n):new o.constructor(n);return o.copy(s),s}function arrayFilter(o,a){for(var n=-1,s=o==null?0:o.length,l=0,c=[];++n<s;){var u=o[n];a(u,n,o)&&(c[l++]=u)}return c}function stubArray(){return[]}var objectProto$3=Object.prototype,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(o){return o==null?[]:(o=Object(o),arrayFilter(nativeGetSymbols$1(o),function(a){return propertyIsEnumerable.call(o,a)}))}:stubArray;function copySymbols(o,a){return copyObject(o,getSymbols(o),a)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(o){for(var a=[];o;)arrayPush(a,getSymbols(o)),o=getPrototype(o);return a}:stubArray;function copySymbolsIn(o,a){return copyObject(o,getSymbolsIn(o),a)}function baseGetAllKeys(o,a,n){var s=a(o);return isArray$3(o)?s:arrayPush(s,n(o))}function getAllKeys(o){return baseGetAllKeys(o,keys$2,getSymbols)}function getAllKeysIn(o){return baseGetAllKeys(o,keysIn,getSymbolsIn)}var DataView$2=getNative(root$1,"DataView"),Promise$1=getNative(root$1,"Promise"),Set$1=getNative(root$1,"Set"),mapTag$4="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$4="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$1&&getTag(new Map$1)!=mapTag$4||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$4||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$1)&&(getTag=function(o){var a=baseGetTag(o),n=a==objectTag$2?o.constructor:void 0,s=n?toSource(n):"";if(s)switch(s){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$4;case promiseCtorString:return promiseTag;case setCtorString:return setTag$4;case weakMapCtorString:return weakMapTag$1}return a});var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function initCloneArray(o){var a=o.length,n=new o.constructor(a);return a&&typeof o[0]=="string"&&hasOwnProperty$3.call(o,"index")&&(n.index=o.index,n.input=o.input),n}var Uint8Array$1=root$1.Uint8Array;function cloneArrayBuffer(o){var a=new o.constructor(o.byteLength);return new Uint8Array$1(a).set(new Uint8Array$1(o)),a}function cloneDataView(o,a){var n=a?cloneArrayBuffer(o.buffer):o.buffer;return new o.constructor(n,o.byteOffset,o.byteLength)}var reFlags=/\w*$/;function cloneRegExp(o){var a=new o.constructor(o.source,reFlags.exec(o));return a.lastIndex=o.lastIndex,a}var symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(o){return symbolValueOf$1?Object(symbolValueOf$1.call(o)):{}}function cloneTypedArray(o,a){var n=a?cloneArrayBuffer(o.buffer):o.buffer;return new o.constructor(n,o.byteOffset,o.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$3="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(o,a,n){var s=o.constructor;switch(a){case arrayBufferTag$2:return cloneArrayBuffer(o);case boolTag$2:case dateTag$2:return new s(+o);case dataViewTag$2:return cloneDataView(o,n);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(o,n);case mapTag$3:return new s;case numberTag$2:case stringTag$3:return new s(o);case regexpTag$2:return cloneRegExp(o);case setTag$3:return new s;case symbolTag$2:return cloneSymbol(o)}}function initCloneObject(o){return typeof o.constructor=="function"&&!isPrototype(o)?baseCreate(getPrototype(o)):{}}var mapTag$2="[object Map]";function baseIsMap(o){return isObjectLike(o)&&getTag(o)==mapTag$2}var nodeIsMap=nodeUtil&&nodeUtil.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap,setTag$2="[object Set]";function baseIsSet(o){return isObjectLike(o)&&getTag(o)==setTag$2}var nodeIsSet=nodeUtil&&nodeUtil.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet,CLONE_DEEP_FLAG$2=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$3=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$1="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$1]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$1]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(o,a,n,s,l,c){var u,d=a&CLONE_DEEP_FLAG$2,h=a&CLONE_FLAT_FLAG,f=a&CLONE_SYMBOLS_FLAG$3;if(n&&(u=l?n(o,s,l,c):n(o)),u!==void 0)return u;if(!isObject$6(o))return o;var p=isArray$3(o);if(p){if(u=initCloneArray(o),!d)return copyArray(o,u)}else{var g=getTag(o),v=g==funcTag||g==genTag;if(isBuffer$1(o))return cloneBuffer(o,d);if(g==objectTag$1||g==argsTag$1||v&&!l){if(u=h||v?{}:initCloneObject(o),!d)return h?copySymbolsIn(o,baseAssignIn(u,o)):copySymbols(o,baseAssign(u,o))}else{if(!cloneableTags[g])return l?o:{};u=initCloneByTag(o,g,d)}}c||(c=new Stack);var b=c.get(o);if(b)return b;c.set(o,u),isSet(o)?o.forEach(function(S){u.add(baseClone(S,a,n,S,o,c))}):isMap(o)&&o.forEach(function(S,E){u.set(E,baseClone(S,a,n,E,o,c))});var w=f?h?getAllKeysIn:getAllKeys:h?keysIn:keys$2,x=p?void 0:w(o);return arrayEach(x||o,function(S,E){x&&(E=S,S=o[E]),assignValue(u,E,baseClone(S,a,n,E,o,c))}),u}var CLONE_SYMBOLS_FLAG$2=4;function clone$6(o){return baseClone(o,CLONE_SYMBOLS_FLAG$2)}var CLONE_DEEP_FLAG$1=1,CLONE_SYMBOLS_FLAG$1=4;function cloneDeep(o){return baseClone(o,CLONE_DEEP_FLAG$1|CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeepWith(o,a){return a=typeof a=="function"?a:void 0,baseClone(o,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG,a)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(o){return this.__data__.set(o,HASH_UNDEFINED),this}function setCacheHas(o){return this.__data__.has(o)}function SetCache(o){var a=-1,n=o==null?0:o.length;for(this.__data__=new MapCache;++a<n;)this.add(o[a])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(o,a){for(var n=-1,s=o==null?0:o.length;++n<s;)if(a(o[n],n,o))return!0;return!1}function cacheHas(o,a){return o.has(a)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(o,a,n,s,l,c){var u=n&COMPARE_PARTIAL_FLAG$5,d=o.length,h=a.length;if(d!=h&&!(u&&h>d))return!1;var f=c.get(o),p=c.get(a);if(f&&p)return f==a&&p==o;var g=-1,v=!0,b=n&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(c.set(o,a),c.set(a,o);++g<d;){var w=o[g],x=a[g];if(s)var S=u?s(x,w,g,a,o,c):s(w,x,g,o,a,c);if(S!==void 0){if(S)continue;v=!1;break}if(b){if(!arraySome(a,function(E,T){if(!cacheHas(b,T)&&(w===E||l(w,E,n,s,c)))return b.push(T)})){v=!1;break}}else if(!(w===x||l(w,x,n,s,c))){v=!1;break}}return c.delete(o),c.delete(a),v}function mapToArray(o){var a=-1,n=Array(o.size);return o.forEach(function(s,l){n[++a]=[l,s]}),n}function setToArray(o){var a=-1,n=Array(o.size);return o.forEach(function(s){n[++a]=s}),n}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(o,a,n,s,l,c,u){switch(n){case dataViewTag:if(o.byteLength!=a.byteLength||o.byteOffset!=a.byteOffset)return!1;o=o.buffer,a=a.buffer;case arrayBufferTag:return!(o.byteLength!=a.byteLength||!c(new Uint8Array$1(o),new Uint8Array$1(a)));case boolTag:case dateTag:case numberTag:return eq(+o,+a);case errorTag:return o.name==a.name&&o.message==a.message;case regexpTag:case stringTag$1:return o==a+"";case mapTag:var d=mapToArray;case setTag:var h=s&COMPARE_PARTIAL_FLAG$4;if(d||(d=setToArray),o.size!=a.size&&!h)return!1;var f=u.get(o);if(f)return f==a;s|=COMPARE_UNORDERED_FLAG$2,u.set(o,a);var p=equalArrays(d(o),d(a),s,l,c,u);return u.delete(o),p;case symbolTag:if(symbolValueOf)return symbolValueOf.call(o)==symbolValueOf.call(a)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function equalObjects(o,a,n,s,l,c){var u=n&COMPARE_PARTIAL_FLAG$3,d=getAllKeys(o),h=d.length,f=getAllKeys(a),p=f.length;if(h!=p&&!u)return!1;for(var g=h;g--;){var v=d[g];if(!(u?v in a:hasOwnProperty$2.call(a,v)))return!1}var b=c.get(o),w=c.get(a);if(b&&w)return b==a&&w==o;var x=!0;c.set(o,a),c.set(a,o);for(var S=u;++g<h;){v=d[g];var E=o[v],T=a[v];if(s)var C=u?s(T,E,v,a,o,c):s(E,T,v,o,a,c);if(!(C===void 0?E===T||l(E,T,n,s,c):C)){x=!1;break}S||(S=v=="constructor")}if(x&&!S){var A=o.constructor,R=a.constructor;A!=R&&"constructor"in o&&"constructor"in a&&!(typeof A=="function"&&A instanceof A&&typeof R=="function"&&R instanceof R)&&(x=!1)}return c.delete(o),c.delete(a),x}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function baseIsEqualDeep(o,a,n,s,l,c){var u=isArray$3(o),d=isArray$3(a),h=u?arrayTag:getTag(o),f=d?arrayTag:getTag(a);h=h==argsTag?objectTag:h,f=f==argsTag?objectTag:f;var p=h==objectTag,g=f==objectTag,v=h==f;if(v&&isBuffer$1(o)){if(!isBuffer$1(a))return!1;u=!0,p=!1}if(v&&!p)return c||(c=new Stack),u||isTypedArray$2(o)?equalArrays(o,a,n,s,l,c):equalByTag(o,a,h,n,s,l,c);if(!(n&COMPARE_PARTIAL_FLAG$2)){var b=p&&hasOwnProperty$1.call(o,"__wrapped__"),w=g&&hasOwnProperty$1.call(a,"__wrapped__");if(b||w){var x=b?o.value():o,S=w?a.value():a;return c||(c=new Stack),l(x,S,n,s,c)}}return v?(c||(c=new Stack),equalObjects(o,a,n,s,l,c)):!1}function baseIsEqual(o,a,n,s,l){return o===a?!0:o==null||a==null||!isObjectLike(o)&&!isObjectLike(a)?o!==o&&a!==a:baseIsEqualDeep(o,a,n,s,baseIsEqual,l)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(o,a,n,s){var l=n.length,c=l;if(o==null)return!c;for(o=Object(o);l--;){var u=n[l];if(u[2]?u[1]!==o[u[0]]:!(u[0]in o))return!1}for(;++l<c;){u=n[l];var d=u[0],h=o[d],f=u[1];if(u[2]){if(h===void 0&&!(d in o))return!1}else{var p=new Stack,g;if(!(g===void 0?baseIsEqual(f,h,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,s,p):g))return!1}}return!0}function isStrictComparable(o){return o===o&&!isObject$6(o)}function getMatchData(o){for(var a=keys$2(o),n=a.length;n--;){var s=a[n],l=o[s];a[n]=[s,l,isStrictComparable(l)]}return a}function matchesStrictComparable(o,a){return function(n){return n==null?!1:n[o]===a&&(a!==void 0||o in Object(n))}}function baseMatches(o){var a=getMatchData(o);return a.length==1&&a[0][2]?matchesStrictComparable(a[0][0],a[0][1]):function(n){return n===o||baseIsMatch(n,o,a)}}function baseHasIn(o,a){return o!=null&&a in Object(o)}function hasPath(o,a,n){a=castPath(a,o);for(var s=-1,l=a.length,c=!1;++s<l;){var u=toKey(a[s]);if(!(c=o!=null&&n(o,u)))break;o=o[u]}return c||++s!=l?c:(l=o==null?0:o.length,!!l&&isLength$1(l)&&isIndex(u,l)&&(isArray$3(o)||isArguments(o)))}function hasIn(o,a){return o!=null&&hasPath(o,a,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(o,a){return isKey(o)&&isStrictComparable(a)?matchesStrictComparable(toKey(o),a):function(n){var s=get$2(n,o);return s===void 0&&s===a?hasIn(n,o):baseIsEqual(a,s,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(o){return function(a){return a==null?void 0:a[o]}}function basePropertyDeep(o){return function(a){return baseGet(a,o)}}function property(o){return isKey(o)?baseProperty(toKey(o)):basePropertyDeep(o)}function baseIteratee(o){return typeof o=="function"?o:o==null?identity$1:typeof o=="object"?isArray$3(o)?baseMatchesProperty(o[0],o[1]):baseMatches(o):property(o)}function createBaseFor(o){return function(a,n,s){for(var l=-1,c=Object(a),u=s(a),d=u.length;d--;){var h=u[++l];if(n(c[h],h,c)===!1)break}return a}}var baseFor=createBaseFor();function baseForOwn(o,a){return o&&baseFor(o,a,keys$2)}function createBaseEach(o,a){return function(n,s){if(n==null)return n;if(!isArrayLike$1(n))return o(n,s);for(var l=n.length,c=-1,u=Object(n);++c<l&&s(u[c],c,u)!==!1;);return n}}var baseEach=createBaseEach(baseForOwn),now=function(){return root$1.Date.now()},FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce$1(o,a,n){var s,l,c,u,d,h,f=0,p=!1,g=!1,v=!0;if(typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$1);a=toNumber(a)||0,isObject$6(n)&&(p=!!n.leading,g="maxWait"in n,c=g?nativeMax(toNumber(n.maxWait)||0,a):c,v="trailing"in n?!!n.trailing:v);function b(j){var D=s,O=l;return s=l=void 0,f=j,u=o.apply(O,D),u}function w(j){return f=j,d=setTimeout(E,a),p?b(j):u}function x(j){var D=j-h,O=j-f,H=a-D;return g?nativeMin(H,c-O):H}function S(j){var D=j-h,O=j-f;return h===void 0||D>=a||D<0||g&&O>=c}function E(){var j=now();if(S(j))return T(j);d=setTimeout(E,x(j))}function T(j){return d=void 0,v&&s?b(j):(s=l=void 0,u)}function C(){d!==void 0&&clearTimeout(d),f=0,s=h=l=d=void 0}function A(){return d===void 0?u:T(now())}function R(){var j=now(),D=S(j);if(s=arguments,l=this,h=j,D){if(d===void 0)return w(h);if(g)return clearTimeout(d),d=setTimeout(E,a),b(h)}return d===void 0&&(d=setTimeout(E,a)),u}return R.cancel=C,R.flush=A,R}function assignMergeValue(o,a,n){(n!==void 0&&!eq(o[a],n)||n===void 0&&!(a in o))&&baseAssignValue(o,a,n)}function isArrayLikeObject(o){return isObjectLike(o)&&isArrayLike$1(o)}function safeGet(o,a){if(!(a==="constructor"&&typeof o[a]=="function")&&a!="__proto__")return o[a]}function toPlainObject(o){return copyObject(o,keysIn(o))}function baseMergeDeep(o,a,n,s,l,c,u){var d=safeGet(o,n),h=safeGet(a,n),f=u.get(h);if(f){assignMergeValue(o,n,f);return}var p=c?c(d,h,n+"",o,a,u):void 0,g=p===void 0;if(g){var v=isArray$3(h),b=!v&&isBuffer$1(h),w=!v&&!b&&isTypedArray$2(h);p=h,v||b||w?isArray$3(d)?p=d:isArrayLikeObject(d)?p=copyArray(d):b?(g=!1,p=cloneBuffer(h,!0)):w?(g=!1,p=cloneTypedArray(h,!0)):p=[]:isPlainObject$1(h)||isArguments(h)?(p=d,isArguments(d)?p=toPlainObject(d):(!isObject$6(d)||isFunction$3(d))&&(p=initCloneObject(h))):g=!1}g&&(u.set(h,p),l(p,h,s,c,u),u.delete(h)),assignMergeValue(o,n,p)}function baseMerge(o,a,n,s,l){o!==a&&baseFor(a,function(c,u){if(l||(l=new Stack),isObject$6(c))baseMergeDeep(o,a,u,n,baseMerge,s,l);else{var d=s?s(safeGet(o,u),c,u+"",o,a,l):void 0;d===void 0&&(d=c),assignMergeValue(o,u,d)}},keysIn)}var mergeWith=createAssigner(function(o,a,n,s){baseMerge(o,a,n,s)});function last(o){var a=o==null?0:o.length;return a?o[a-1]:void 0}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(o){return o=toString$1(o),o&&reHasRegExpChar.test(o)?o.replace(reRegExpChar,"\\$&"):o}function baseMap(o,a){var n=-1,s=isArrayLike$1(o)?Array(o.length):[];return baseEach(o,function(l,c,u){s[++n]=a(l,c,u)}),s}function map$2(o,a){var n=isArray$3(o)?arrayMap:baseMap;return n(o,baseIteratee(a))}var stringTag="[object String]";function isString$4(o){return typeof o=="string"||!isArray$3(o)&&isObjectLike(o)&&baseGetTag(o)==stringTag}function parent(o,a){return a.length<2?o:baseGet(o,baseSlice(a,0,-1))}function isElement$2(o){return isObjectLike(o)&&o.nodeType===1&&!isPlainObject$1(o)}function isEqual$1(o,a){return baseIsEqual(o,a)}function isEqualWith(o,a,n){n=typeof n=="function"?n:void 0;var s=n?n(o,a):void 0;return s===void 0?baseIsEqual(o,a,void 0,n):!!s}function mapValues(o,a){var n={};return a=baseIteratee(a),baseForOwn(o,function(s,l,c){baseAssignValue(n,l,a(s,l,c))}),n}var merge$3=createAssigner(function(o,a,n){baseMerge(o,a,n)});function baseUnset(o,a){return a=castPath(a,o),o=parent(o,a),o==null||delete o[toKey(last(a))]}function baseSet(o,a,n,s){if(!isObject$6(o))return o;a=castPath(a,o);for(var l=-1,c=a.length,u=c-1,d=o;d!=null&&++l<c;){var h=toKey(a[l]),f=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return o;if(l!=u){var p=d[h];f=void 0,f===void 0&&(f=isObject$6(p)?p:isIndex(a[l+1])?[]:{})}assignValue(d,h,f),d=d[h]}return o}function set$2(o,a,n){return o==null?o:baseSet(o,a,n)}var startCase=createCompounder(function(o,a,n){return o+(n?" ":"")+upperFirst(a)}),FUNC_ERROR_TEXT="Expected a function";function throttle$2(o,a,n){var s=!0,l=!0;if(typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$6(n)&&(s="leading"in n?!!n.leading:s,l="trailing"in n?!!n.trailing:l),debounce$1(o,a,{leading:s,maxWait:a,trailing:l})}function unset(o,a){return o==null?!0:baseUnset(o,a)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let globalVar;try{globalVar={window,document}}catch{/* istanbul ignore next -- @preserve */globalVar={window:{},document:{}}}var global$1=globalVar;function getUserAgent(){try{return navigator.userAgent.toLowerCase()}catch{return""}}const userAgent=getUserAgent(),env$1={isMac:isMac(userAgent),isWindows:isWindows(userAgent),isGecko:isGecko(userAgent),isSafari:isSafari(userAgent),isiOS:isiOS(userAgent),isAndroid:isAndroid(userAgent),isBlink:isBlink(userAgent),get isMediaForcedColors(){return isMediaForcedColors()},features:{isRegExpUnicodePropertySupported:isRegExpUnicodePropertySupported()}};function isMac(o){return o.indexOf("macintosh")>-1}function isWindows(o){return o.indexOf("windows")>-1}function isGecko(o){return!!o.match(/gecko\/\d+/)}function isSafari(o){return o.indexOf(" applewebkit/")>-1&&o.indexOf("chrome")===-1}function isiOS(o){return!!o.match(/iphone|ipad/i)||isMac(o)&&navigator.maxTouchPoints>0}function isAndroid(o){return o.indexOf("android")>-1}function isBlink(o){return o.indexOf("chrome/")>-1&&o.indexOf("edge/")<0}function isRegExpUnicodePropertySupported(){let o=!1;try{o="ć".search(new RegExp("[\\p{L}]","u"))===0}catch{}return o}function isMediaForcedColors(){return global$1.window.matchMedia?global$1.window.matchMedia("(forced-colors: active)").matches:!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function fastDiff(o,a,n,s){n=n||function(h,f){return h===f};const l=Array.isArray(o)?o:Array.prototype.slice.call(o),c=Array.isArray(a)?a:Array.prototype.slice.call(a),u=findChangeBoundaryIndexes(l,c,n);return s?changeIndexesToAtomicChanges(u,c.length):changeIndexesToChanges(c,u)}function findChangeBoundaryIndexes(o,a,n){const s=findFirstDifferenceIndex(o,a,n);if(s===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};const l=cutAndReverse(o,s),c=cutAndReverse(a,s),u=findFirstDifferenceIndex(l,c,n),d=o.length-u,h=a.length-u;return{firstIndex:s,lastIndexOld:d,lastIndexNew:h}}function findFirstDifferenceIndex(o,a,n){for(let s=0;s<Math.max(o.length,a.length);s++)if(o[s]===void 0||a[s]===void 0||!n(o[s],a[s]))return s;return-1}function cutAndReverse(o,a){return o.slice(a).reverse()}function changeIndexesToChanges(o,a){const n=[],{firstIndex:s,lastIndexOld:l,lastIndexNew:c}=a;return c-s>0&&n.push({index:s,type:"insert",values:o.slice(s,c)}),l-s>0&&n.push({index:s+(c-s),type:"delete",howMany:l-s}),n}function changeIndexesToAtomicChanges(o,a){const{firstIndex:n,lastIndexOld:s,lastIndexNew:l}=o;if(n===-1)return Array(a).fill("equal");let c=[];return n>0&&(c=c.concat(Array(n).fill("equal"))),l-n>0&&(c=c.concat(Array(l-n).fill("insert"))),s-n>0&&(c=c.concat(Array(s-n).fill("delete"))),l<a&&(c=c.concat(Array(a-l).fill("equal"))),c}function diff(o,a,n){n=n||function(x,S){return x===S};const s=o.length,l=a.length;if(s>200||l>200||s+l>300)return diff.fastDiff(o,a,n,!0);let c,u;if(l<s){const x=o;o=a,a=x,c="delete",u="insert"}else c="insert",u="delete";const d=o.length,h=a.length,f=h-d,p={},g={};function v(x){const S=(g[x-1]!==void 0?g[x-1]:-1)+1,E=g[x+1]!==void 0?g[x+1]:-1,T=S>E?-1:1;p[x+T]&&(p[x]=p[x+T].slice(0)),p[x]||(p[x]=[]),p[x].push(S>E?c:u);let C=Math.max(S,E),A=C-x;for(;A<d&&C<h&&n(o[A],a[C]);)A++,C++,p[x].push("equal");return C}let b=0,w;do{for(w=-b;w<f;w++)g[w]=v(w);for(w=f+b;w>f;w--)g[w]=v(w);g[f]=v(f),b++}while(g[f]!==h);return p[f].slice(1)}diff.fastDiff=fastDiff;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spy(){return function o(){o.called=!0}}class EventInfo{constructor(a,n){M(this,"source");M(this,"name");M(this,"path");M(this,"stop");M(this,"off");M(this,"return");this.source=a,this.name=n,this.path=[],this.stop=spy(),this.off=spy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_NUMBERS=new Array(256).fill("").map((o,a)=>("0"+a.toString(16)).slice(-2));function uid(){const[o,a,n,s]=crypto.getRandomValues(new Uint32Array(4));return"e"+HEX_NUMBERS[o>>0&255]+HEX_NUMBERS[o>>8&255]+HEX_NUMBERS[o>>16&255]+HEX_NUMBERS[o>>24&255]+HEX_NUMBERS[a>>0&255]+HEX_NUMBERS[a>>8&255]+HEX_NUMBERS[a>>16&255]+HEX_NUMBERS[a>>24&255]+HEX_NUMBERS[n>>0&255]+HEX_NUMBERS[n>>8&255]+HEX_NUMBERS[n>>16&255]+HEX_NUMBERS[n>>24&255]+HEX_NUMBERS[s>>0&255]+HEX_NUMBERS[s>>8&255]+HEX_NUMBERS[s>>16&255]+HEX_NUMBERS[s>>24&255]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const priorities={get(o="normal"){return typeof o!="number"?this[o]||this.normal:o},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function insertToPriorityArray(o,a){const n=priorities.get(a.priority);let s=0,l=o.length;for(;s<l;){const c=s+l>>1;priorities.get(o[c].priority)<n?l=c:s=c+1}o.splice(s,0,a)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const DOCUMENTATION_URL="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html";class CKEditorError extends Error{constructor(n,s,l){super(getErrorMessage(n,l));M(this,"context");M(this,"data");this.name="CKEditorError",this.context=s,this.data=l}is(n){return n==="CKEditorError"}static rethrowUnexpectedError(n,s){if(n.is&&n.is("CKEditorError"))throw n;const l=new CKEditorError(n.message,s);throw l.stack=n.stack,l}}function logWarning(o,a){console.warn(...formatConsoleArguments(o,a))}function logError$1(o,a){console.error(...formatConsoleArguments(o,a))}function getLinkToDocumentationMessage(o){return`
Read more: ${DOCUMENTATION_URL}#error-${o}`}function getErrorMessage(o,a){const n=new WeakSet,l=a?` ${JSON.stringify(a,(u,d)=>{if(typeof d=="object"&&d!==null){if(n.has(d))return`[object ${d.constructor.name}]`;n.add(d)}return d})}`:"",c=getLinkToDocumentationMessage(o);return o+l+c}function formatConsoleArguments(o,a){const n=getLinkToDocumentationMessage(o);return a?[o,a,n]:[o,n]}const version$2="44.3.0",releaseDate=new Date(2025,2,5);/* istanbul ignore next -- @preserve */if(globalThis.CKEDITOR_VERSION)throw new CKEditorError("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=version$2;const _listeningTo=Symbol("listeningTo"),_emitterId=Symbol("emitterId"),_delegations=Symbol("delegations"),defaultEmitterClass$1=EmitterMixin(Object);function EmitterMixin(o){if(!o)return defaultEmitterClass$1;class a extends o{on(s,l,c){this.listenTo(this,s,l,c)}once(s,l,c){let u=!1;const d=(h,...f)=>{u||(u=!0,h.off(),l.call(this,h,...f))};this.listenTo(this,s,d,c)}off(s,l){this.stopListening(this,s,l)}listenTo(s,l,c,u={}){let d,h;this[_listeningTo]||(this[_listeningTo]={});const f=this[_listeningTo];_getEmitterId(s)||_setEmitterId(s);const p=_getEmitterId(s);(d=f[p])||(d=f[p]={emitter:s,callbacks:{}}),(h=d.callbacks[l])||(h=d.callbacks[l]=[]),h.push(c),addEventListener$1(this,s,l,c,u)}stopListening(s,l,c){const u=this[_listeningTo];let d=s&&_getEmitterId(s);const h=u&&d?u[d]:void 0,f=h&&l?h.callbacks[l]:void 0;if(!(!u||s&&!h||l&&!f))if(c)removeEventListener$1(this,s,l,c),f.indexOf(c)!==-1&&(f.length===1?delete h.callbacks[l]:removeEventListener$1(this,s,l,c));else if(f){for(;c=f.pop();)removeEventListener$1(this,s,l,c);delete h.callbacks[l]}else if(h){for(l in h.callbacks)this.stopListening(s,l);delete u[d]}else{for(d in u)this.stopListening(u[d].emitter);delete this[_listeningTo]}}fire(s,...l){try{const c=s instanceof EventInfo?s:new EventInfo(this,s),u=c.name;let d=getCallbacksForEvent(this,u);if(c.path.push(this),d){d=d.slice();for(let f=0;f<d.length;f++){const p=d[f].callback;if(p.call(this,c,...l),c.off.called&&(delete c.off.called,this._removeEventListener(u,p)),c.stop.called)break}}const h=this[_delegations];if(h){const f=h.get(u),p=h.get("*");f&&fireDelegatedEvents(f,c,l),p&&fireDelegatedEvents(p,c,l)}return c.return}catch(c){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(c,this)}}delegate(...s){return{to:(l,c)=>{this[_delegations]||(this[_delegations]=new Map),s.forEach(u=>{const d=this[_delegations].get(u);d?d.set(l,c):this[_delegations].set(u,new Map([[l,c]]))})}}}stopDelegating(s,l){if(this[_delegations])if(!s)this[_delegations].clear();else if(!l)this[_delegations].delete(s);else{const c=this[_delegations].get(s);c&&c.delete(l)}}_addEventListener(s,l,c){createEventNamespace(this,s);const u=getCallbacksListsForNamespace(this,s),d=priorities.get(c.priority),h={callback:l,priority:d};for(const f of u)insertToPriorityArray(f,h)}_removeEventListener(s,l){const c=getCallbacksListsForNamespace(this,s);for(const u of c)for(let d=0;d<u.length;d++)u[d].callback==l&&(u.splice(d,1),d--)}}return a}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(o=>{EmitterMixin[o]=defaultEmitterClass$1.prototype[o]});function _getEmitterListenedTo(o,a){const n=o[_listeningTo];return n&&n[a]?n[a].emitter:null}function _setEmitterId(o,a){o[_emitterId]||(o[_emitterId]=a||uid())}function _getEmitterId(o){return o[_emitterId]}function getEvents(o){return o._events||Object.defineProperty(o,"_events",{value:{}}),o._events}function makeEventNode(){return{callbacks:[],childEvents:[]}}function createEventNamespace(o,a){const n=getEvents(o);if(n[a])return;let s=a,l=null;const c=[];for(;s!==""&&!n[s];)n[s]=makeEventNode(),c.push(n[s]),l&&n[s].childEvents.push(l),l=s,s=s.substr(0,s.lastIndexOf(":"));if(s!==""){for(const u of c)u.callbacks=n[s].callbacks.slice();n[s].childEvents.push(l)}}function getCallbacksListsForNamespace(o,a){const n=getEvents(o)[a];if(!n)return[];let s=[n.callbacks];for(let l=0;l<n.childEvents.length;l++){const c=getCallbacksListsForNamespace(o,n.childEvents[l]);s=s.concat(c)}return s}function getCallbacksForEvent(o,a){if(!o._events)return null;let n=a;do{const s=o._events[n];if(s&&s.callbacks&&s.callbacks.length)return s.callbacks;const l=n.lastIndexOf(":");n=l>-1?n.substring(0,l):""}while(n);return null}function fireDelegatedEvents(o,a,n){for(let[s,l]of o){l?typeof l=="function"&&(l=l(a.name)):l=a.name;const c=new EventInfo(a.source,l);c.path=[...a.path],s.fire(c,...n)}}function addEventListener$1(o,a,n,s,l){a._addEventListener?a._addEventListener(n,s,l):o._addEventListener.call(a,n,s,l)}function removeEventListener$1(o,a,n,s){a._removeEventListener?a._removeEventListener(n,s):o._removeEventListener.call(a,n,s)}const observablePropertiesSymbol=Symbol("observableProperties"),boundObservablesSymbol=Symbol("boundObservables"),boundPropertiesSymbol=Symbol("boundProperties"),decoratedMethods=Symbol("decoratedMethods"),decoratedOriginal=Symbol("decoratedOriginal"),defaultObservableClass=ObservableMixin(EmitterMixin());function ObservableMixin(o){var n,s,l,c,u;if(!o)return defaultObservableClass;class a extends(u=o,c=observablePropertiesSymbol,l=decoratedMethods,s=boundPropertiesSymbol,n=boundObservablesSymbol,u){constructor(){super(...arguments);M(this,c);M(this,l);M(this,s);M(this,n)}set(f,p){if(isObject$6(f)){Object.keys(f).forEach(v=>{this.set(v,f[v])},this);return}initObservable(this);const g=this[observablePropertiesSymbol];if(f in this&&!g.has(f))throw new CKEditorError("observable-set-cannot-override",this);Object.defineProperty(this,f,{enumerable:!0,configurable:!0,get(){return g.get(f)},set(v){const b=g.get(f);let w=this.fire(`set:${f}`,f,v,b);w===void 0&&(w=v),(b!==w||!g.has(f))&&(g.set(f,w),this.fire(`change:${f}`,f,w,b))}}),this[f]=p}bind(...f){if(!f.length||!isStringArray$1(f))throw new CKEditorError("observable-bind-wrong-properties",this);if(new Set(f).size!==f.length)throw new CKEditorError("observable-bind-duplicate-properties",this);initObservable(this);const p=this[boundPropertiesSymbol];f.forEach(v=>{if(p.has(v))throw new CKEditorError("observable-bind-rebind",this)});const g=new Map;return f.forEach(v=>{const b={property:v,to:[]};p.set(v,b),g.set(v,b)}),{to:bindTo,toMany:bindToMany,_observable:this,_bindProperties:f,_to:[],_bindings:g}}unbind(...f){if(!this[observablePropertiesSymbol])return;const p=this[boundPropertiesSymbol],g=this[boundObservablesSymbol];if(f.length){if(!isStringArray$1(f))throw new CKEditorError("observable-unbind-wrong-properties",this);f.forEach(v=>{const b=p.get(v);b&&(b.to.forEach(([w,x])=>{const S=g.get(w),E=S[x];E.delete(b),E.size||delete S[x],Object.keys(S).length||(g.delete(w),this.stopListening(w,"change"))}),p.delete(v))})}else g.forEach((v,b)=>{this.stopListening(b,"change")}),g.clear(),p.clear()}decorate(f){initObservable(this);const p=this[f];if(!p)throw new CKEditorError("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:f});this.on(f,(g,v)=>{g.return=p.apply(this,v)}),this[f]=function(...g){return this.fire(f,g)},this[f][decoratedOriginal]=p,this[decoratedMethods]||(this[decoratedMethods]=[]),this[decoratedMethods].push(f)}stopListening(f,p,g){if(!f&&this[decoratedMethods]){for(const v of this[decoratedMethods])this[v]=this[v][decoratedOriginal];delete this[decoratedMethods]}super.stopListening(f,p,g)}}return a}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(o=>{ObservableMixin[o]=defaultObservableClass.prototype[o]});function initObservable(o){o[observablePropertiesSymbol]||(Object.defineProperty(o,observablePropertiesSymbol,{value:new Map}),Object.defineProperty(o,boundObservablesSymbol,{value:new Map}),Object.defineProperty(o,boundPropertiesSymbol,{value:new Map}))}function bindTo(...o){const a=parseBindToArgs(...o),n=Array.from(this._bindings.keys()),s=n.length;if(!a.callback&&a.to.length>1)throw new CKEditorError("observable-bind-to-no-callback",this);if(s>1&&a.callback)throw new CKEditorError("observable-bind-to-extra-callback",this);a.to.forEach(l=>{if(l.properties.length&&l.properties.length!==s)throw new CKEditorError("observable-bind-to-properties-length",this);l.properties.length||(l.properties=this._bindProperties)}),this._to=a.to,a.callback&&(this._bindings.get(n[0]).callback=a.callback),attachBindToListeners(this._observable,this._to),updateBindToBound(this),this._bindProperties.forEach(l=>{updateBoundObservableProperty(this._observable,l)})}function bindToMany(o,a,n){if(this._bindings.size>1)throw new CKEditorError("observable-bind-to-many-not-one-binding",this);this.to(...getBindingTargets(o,a),n)}function getBindingTargets(o,a){const n=o.map(s=>[s,a]);return Array.prototype.concat.apply([],n)}function isStringArray$1(o){return o.every(a=>typeof a=="string")}function parseBindToArgs(...o){if(!o.length)throw new CKEditorError("observable-bind-to-parse-error",null);const a={to:[]};let n;return typeof o[o.length-1]=="function"&&(a.callback=o.pop()),o.forEach(s=>{if(typeof s=="string")n.properties.push(s);else if(typeof s=="object")n={observable:s,properties:[]},a.to.push(n);else throw new CKEditorError("observable-bind-to-parse-error",null)}),a}function updateBoundObservables(o,a,n,s){const l=o[boundObservablesSymbol],c=l.get(n),u=c||{};u[s]||(u[s]=new Set),u[s].add(a),c||l.set(n,u)}function updateBindToBound(o){let a;o._bindings.forEach((n,s)=>{o._to.forEach(l=>{a=l.properties[n.callback?0:o._bindProperties.indexOf(s)],n.to.push([l.observable,a]),updateBoundObservables(o._observable,n,l.observable,a)})})}function updateBoundObservableProperty(o,a){const s=o[boundPropertiesSymbol].get(a);let l;s.callback?l=s.callback.apply(o,s.to.map(c=>c[0][c[1]])):(l=s.to[0],l=l[0][l[1]]),Object.prototype.hasOwnProperty.call(o,a)?o[a]=l:o.set(a,l)}function attachBindToListeners(o,a){a.forEach(n=>{const s=o[boundObservablesSymbol];let l;s.get(n.observable)||o.listenTo(n.observable,"change",(c,u)=>{l=s.get(n.observable)[u],l&&l.forEach(d=>{updateBoundObservableProperty(o,d.property)})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ElementReplacer{constructor(){M(this,"_replacedElements");this._replacedElements=[]}replace(a,n){this._replacedElements.push({element:a,newElement:n}),a.style.display="none",n&&a.parentNode.insertBefore(n,a.nextSibling)}restore(){this._replacedElements.forEach(({element:a,newElement:n})=>{a.style.display="",n&&n.remove()}),this._replacedElements=[]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function count$1(o){let a=0;for(const n of o)a++;return a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function compareArrays(o,a){const n=Math.min(o.length,a.length);for(let s=0;s<n;s++)if(o[s]!=a[s])return s;return o.length==a.length?"same":o.length<a.length?"prefix":"extension"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isIterable$1(o){return!!(o&&o[Symbol.iterator])}function createElement$1(o,a,n={},s=[]){const l=n&&n.xmlns,c=l?o.createElementNS(l,a):o.createElement(a);for(const u in n)c.setAttribute(u,n[u]);(isString$4(s)||!isIterable$1(s))&&(s=[s]);for(let u of s)isString$4(u)&&(u=o.createTextNode(u)),c.appendChild(u);return c}class Config{constructor(a,n){M(this,"_config");this._config=Object.create(null),n&&this.define(cloneConfig(n)),a&&this._setObjectToTarget(this._config,a)}set(a,n){this._setToTarget(this._config,a,n)}define(a,n){this._setToTarget(this._config,a,n,!0)}get(a){return this._getFromSource(this._config,a)}*names(){for(const a of Object.keys(this._config))yield a}_setToTarget(a,n,s,l=!1){if(isPlainObject$1(n)){this._setObjectToTarget(a,n,l);return}const c=n.split(".");n=c.pop();for(const u of c)isPlainObject$1(a[u])||(a[u]=Object.create(null)),a=a[u];if(isPlainObject$1(s)){isPlainObject$1(a[n])||(a[n]=Object.create(null)),a=a[n],this._setObjectToTarget(a,s,l);return}l&&typeof a[n]<"u"||(a[n]=s)}_getFromSource(a,n){const s=n.split(".");n=s.pop();for(const l of s){if(!isPlainObject$1(a[l])){a=null;break}a=a[l]}return a?cloneConfig(a[n]):void 0}_setObjectToTarget(a,n,s){Object.keys(n).forEach(l=>{this._setToTarget(a,l,n[l],s)})}}function cloneConfig(o){return cloneDeepWith(o,leaveItemReferences)}function leaveItemReferences(o){return isElement$2(o)||typeof o=="function"?o:void 0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isNode(o){if(o){if(o.defaultView)return o instanceof o.defaultView.Document;if(o.ownerDocument&&o.ownerDocument.defaultView)return o instanceof o.ownerDocument.defaultView.Node}return!1}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isWindow(o){const a=Object.prototype.toString.apply(o);return a=="[object Window]"||a=="[object global]"}const defaultEmitterClass=DomEmitterMixin(EmitterMixin());function DomEmitterMixin(o){if(!o)return defaultEmitterClass;class a extends o{listenTo(s,l,c,u={}){if(isNode(s)||isWindow(s)){const d={capture:!!u.useCapture,passive:!!u.usePassive},h=this._getProxyEmitter(s,d)||new ProxyEmitter(s,d);this.listenTo(h,l,c,u)}else super.listenTo(s,l,c,u)}stopListening(s,l,c){if(isNode(s)||isWindow(s)){const u=this._getAllProxyEmitters(s);for(const d of u)this.stopListening(d,l,c)}else super.stopListening(s,l,c)}_getProxyEmitter(s,l){return _getEmitterListenedTo(this,getProxyEmitterId(s,l))}_getAllProxyEmitters(s){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(l=>this._getProxyEmitter(s,l)).filter(l=>!!l)}}return a}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(o=>{DomEmitterMixin[o]=defaultEmitterClass.prototype[o]});class ProxyEmitter extends EmitterMixin(){constructor(n,s){super();M(this,"_domNode");M(this,"_options");M(this,"_domListeners");_setEmitterId(this,getProxyEmitterId(n,s)),this._domNode=n,this._options=s}attach(n){if(this._domListeners&&this._domListeners[n])return;const s=this._createDomListener(n);this._domNode.addEventListener(n,s,this._options),this._domListeners||(this._domListeners={}),this._domListeners[n]=s}detach(n){let s;this._domListeners[n]&&(!(s=this._events[n])||!s.callbacks.length)&&this._domListeners[n].removeListener()}_addEventListener(n,s,l){this.attach(n),EmitterMixin().prototype._addEventListener.call(this,n,s,l)}_removeEventListener(n,s){EmitterMixin().prototype._removeEventListener.call(this,n,s),this.detach(n)}_createDomListener(n){const s=l=>{this.fire(n,l)};return s.removeListener=()=>{this._domNode.removeEventListener(n,s,this._options),delete this._domListeners[n]},s}}function getNodeUID(o){return o["data-ck-expando"]||(o["data-ck-expando"]=uid())}function getProxyEmitterId(o,a){let n=getNodeUID(o);for(const s of Object.keys(a).sort())a[s]&&(n+="-"+s);return n}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getAncestors(o){const a=[];let n=o;for(;n&&n.nodeType!=Node.DOCUMENT_NODE;)a.unshift(n),n=n.parentNode;return a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getDataFromElement(o){return o instanceof HTMLTextAreaElement?o.value:o.innerHTML}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getBorderWidths(o){const a=o.ownerDocument.defaultView.getComputedStyle(o);return{top:parseInt(a.borderTopWidth,10),right:parseInt(a.borderRightWidth,10),bottom:parseInt(a.borderBottomWidth,10),left:parseInt(a.borderLeftWidth,10)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getRangeFromMouseEvent(o){if(!o.target)return null;const a=o.target.ownerDocument,n=o.clientX,s=o.clientY;let l=null;return a.caretRangeFromPoint&&a.caretRangeFromPoint(n,s)?l=a.caretRangeFromPoint(n,s):o.rangeParent&&(l=a.createRange(),l.setStart(o.rangeParent,o.rangeOffset),l.collapse(!0)),l}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isText(o){return Object.prototype.toString.call(o)=="[object Text]"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isRange(o){return Object.prototype.toString.apply(o)=="[object Range]"}function getPositionedAncestor(o){return!o||!o.parentNode||o.offsetParent===global$1.document.body?null:o.offsetParent}const rectProperties=["top","right","bottom","left","width","height"];let Rect$3=class zt{constructor(a){M(this,"top");M(this,"right");M(this,"bottom");M(this,"left");M(this,"width");M(this,"height");M(this,"_source");const n=isRange(a);if(Object.defineProperty(this,"_source",{value:a._source||a,writable:!0,enumerable:!1}),isDomElement(a)||n)if(n){const s=zt.getDomRangeRects(a);copyRectProperties(this,zt.getBoundingRect(s))}else copyRectProperties(this,a.getBoundingClientRect());else if(isWindow(a)){const{innerWidth:s,innerHeight:l}=a;copyRectProperties(this,{top:0,right:s,bottom:l,left:0,width:s,height:l})}else copyRectProperties(this,a)}clone(){return new zt(this)}moveTo(a,n){return this.top=n,this.right=a+this.width,this.bottom=n+this.height,this.left=a,this}moveBy(a,n){return this.top+=n,this.right+=a,this.left+=a,this.bottom+=n,this}getIntersection(a){const n={top:Math.max(this.top,a.top),right:Math.min(this.right,a.right),bottom:Math.min(this.bottom,a.bottom),left:Math.max(this.left,a.left),width:0,height:0};if(n.width=n.right-n.left,n.height=n.bottom-n.top,n.width<0||n.height<0)return null;{const s=new zt(n);return s._source=this._source,s}}getIntersectionArea(a){const n=this.getIntersection(a);return n?n.getArea():0}getArea(){return this.width*this.height}getVisible(){const a=this._source;let n=this.clone();if(isBody(a))return n;let s=a,l=a.parentNode||a.commonAncestorContainer,c;for(;l&&!isBody(l);){const u=getElementOverflow(l)==="visible";s instanceof HTMLElement&&getElementPosition(s)==="absolute"&&(c=s);const d=getElementPosition(l);if(u||c&&(d==="relative"&&u||d!=="relative")){s=l,l=l.parentNode;continue}const h=new zt(l),f=n.getIntersection(h);if(f)f.getArea()<n.getArea()&&(n=f);else return null;s=l,l=l.parentNode}return n}isEqual(a){for(const n of rectProperties)if(this[n]!==a[n])return!1;return!0}contains(a){const n=this.getIntersection(a);return!!(n&&n.isEqual(a))}toAbsoluteRect(){const{scrollX:a,scrollY:n}=global$1.window,s=this.clone().moveBy(a,n);if(isDomElement(s._source)){const l=getPositionedAncestor(s._source);l&&shiftRectToCompensatePositionedAncestor(s,l)}return s}excludeScrollbarsAndBorders(){const a=this._source;let n,s,l;if(isWindow(a))n=a.innerWidth-a.document.documentElement.clientWidth,s=a.innerHeight-a.document.documentElement.clientHeight,l=a.getComputedStyle(a.document.documentElement).direction;else{const c=getBorderWidths(a);n=a.offsetWidth-a.clientWidth-c.left-c.right,s=a.offsetHeight-a.clientHeight-c.top-c.bottom,l=a.ownerDocument.defaultView.getComputedStyle(a).direction,this.left+=c.left,this.top+=c.top,this.right-=c.right,this.bottom-=c.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=n,l==="ltr"?this.right-=n:this.left+=n,this.height-=s,this.bottom-=s,this}static getDomRangeRects(a){const n=[],s=Array.from(a.getClientRects());if(s.length)for(const l of s)n.push(new zt(l));else{let l=a.startContainer;isText(l)&&(l=l.parentNode);const c=new zt(l.getBoundingClientRect());c.right=c.left,c.width=0,n.push(c)}return n}static getBoundingRect(a){const n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0};let s=0;for(const l of a)s++,n.left=Math.min(n.left,l.left),n.top=Math.min(n.top,l.top),n.right=Math.max(n.right,l.right),n.bottom=Math.max(n.bottom,l.bottom);return s==0?null:(n.width=n.right-n.left,n.height=n.bottom-n.top,new zt(n))}};function copyRectProperties(o,a){for(const n of rectProperties)o[n]=a[n]}function isBody(o){return isDomElement(o)?o===o.ownerDocument.body:!1}function isDomElement(o){return o!==null&&typeof o=="object"&&o.nodeType===1&&typeof o.getBoundingClientRect=="function"}function getElementPosition(o){return o instanceof HTMLElement?o.ownerDocument.defaultView.getComputedStyle(o).position:"static"}function getElementOverflow(o){return o instanceof HTMLElement?o.ownerDocument.defaultView.getComputedStyle(o).overflow:"visible"}function shiftRectToCompensatePositionedAncestor(o,a){const n=new Rect$3(a),s=getBorderWidths(a);let l=0,c=0;l-=n.left,c-=n.top,l+=a.scrollLeft,c+=a.scrollTop,l-=s.left,c-=s.top,o.moveBy(l,c)}var it;let ResizeObserver$1=(it=class{constructor(a,n){M(this,"_element");M(this,"_callback");it._observerInstance||it._createObserver(),this._element=a,this._callback=n,it._addElementCallback(a,n),it._observerInstance.observe(a)}get element(){return this._element}destroy(){it._deleteElementCallback(this._element,this._callback)}static _addElementCallback(a,n){it._elementCallbacks||(it._elementCallbacks=new Map);let s=it._elementCallbacks.get(a);s||(s=new Set,it._elementCallbacks.set(a,s)),s.add(n)}static _deleteElementCallback(a,n){const s=it._getElementCallbacks(a);s&&(s.delete(n),s.size||(it._elementCallbacks.delete(a),it._observerInstance.unobserve(a))),it._elementCallbacks&&!it._elementCallbacks.size&&(it._observerInstance=null,it._elementCallbacks=null)}static _getElementCallbacks(a){return it._elementCallbacks?it._elementCallbacks.get(a):null}static _createObserver(){it._observerInstance=new global$1.window.ResizeObserver(a=>{for(const n of a){const s=it._getElementCallbacks(n.target);if(s)for(const l of s)l(n)}})}},M(it,"_observerInstance",null),M(it,"_elementCallbacks",null),it);/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function setDataInElement(o,a){o instanceof HTMLTextAreaElement&&(o.value=a),o.innerHTML=a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toUnit(o){return a=>a+o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function indexOf$2(o){let a=0;for(;o.previousSibling;)o=o.previousSibling,a++;return a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function insertAt(o,a,n){o.insertBefore(n,o.childNodes[a]||null)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isComment(o){return o&&o.nodeType===Node.COMMENT_NODE}function isValidAttributeName(o){try{global$1.document.createAttribute(o)}catch{return!1}return!0}function isVisible(o){return o?isText(o)?isVisible(o.parentElement):o.getClientRects?!!o.getClientRects().length:!1:!1}function getOptimalPosition({element:o,target:a,positions:n,limiter:s,fitInViewport:l,viewportOffsetConfig:c}){isFunction$3(a)&&(a=a()),isFunction$3(s)&&(s=s());const u=getPositionedAncestor(o),d=getConstrainedViewportRect(c),h=new Rect$3(o),f=getVisibleViewportIntersectionRect(a,d);let p;if(!f||!d.getIntersection(f))return null;const g={targetRect:f,elementRect:h,positionedElementAncestor:u,viewportRect:d};if(!s&&!l)p=new PositionObject(n[0],g);else{if(s){const v=getVisibleViewportIntersectionRect(s,d);v&&(g.limiterRect=v)}p=getBestPosition(n,g)}return p}function getVisibleViewportIntersectionRect(o,a){const n=new Rect$3(o).getVisible();return n?n.getIntersection(a):null}function getConstrainedViewportRect(o){o=Object.assign({top:0,bottom:0,left:0,right:0},o);const a=new Rect$3(global$1.window);return a.top+=o.top,a.height-=o.top,a.bottom-=o.bottom,a.height-=o.bottom,a}function getBestPosition(o,a){const{elementRect:n}=a,s=n.getArea(),l=o.map(d=>new PositionObject(d,a)).filter(d=>!!d.name);let c=0,u=null;for(const d of l){const{limiterIntersectionArea:h,viewportIntersectionArea:f}=d;if(h===s)return d;const p=f**2+h**2;p>c&&(c=p,u=d)}return u}class PositionObject{constructor(a,n){M(this,"name");M(this,"config");M(this,"_positioningFunctionCoordinates");M(this,"_options");M(this,"_cachedRect");M(this,"_cachedAbsoluteRect");const s=a(n.targetRect,n.elementRect,n.viewportRect,n.limiterRect);if(!s)return;const{left:l,top:c,name:u,config:d}=s;this.name=u,this.config=d,this._positioningFunctionCoordinates={left:l,top:c},this._options=n}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){const a=this._options.limiterRect;return a?a.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function remove$3(o){const a=o.parentNode;a&&a.removeChild(o)}function scrollViewportToShowTarget({target:o,viewportOffset:a=0,ancestorOffset:n=0,alignToTop:s,forceScroll:l}){const c=getWindow(o);let u=c,d=null;for(a=normalizeViewportOffset(a);u;){let h;u==c?h=getParentElement(o):h=getParentElement(d),scrollAncestorsToShowRect({parent:h,getRect:()=>getRectRelativeToWindow(o,u),alignToTop:s,ancestorOffset:n,forceScroll:l});let f=getRectRelativeToWindow(o,u);const p=getRectRelativeToWindow(h,u);if(f.height>p.height){const g=f.getIntersection(p);g&&(f=g)}if(scrollWindowToShowRect({window:u,rect:f,viewportOffset:a,alignToTop:s,forceScroll:l}),u.parent!=u){if(d=u.frameElement,u=u.parent,!d)return}else u=null}}function scrollWindowToShowRect({window:o,rect:a,alignToTop:n,forceScroll:s,viewportOffset:l}){const c=a.clone().moveBy(0,l.bottom),u=a.clone().moveBy(0,-l.top),d=new Rect$3(o).excludeScrollbarsAndBorders(),h=[u,c],f=n&&s,p=h.every(x=>d.contains(x));let{scrollX:g,scrollY:v}=o;const b=g,w=v;f?v-=d.top-a.top+l.top:p||(isAbove(u,d)?v-=d.top-a.top+l.top:isBelow(c,d)&&(n?v+=a.top-d.top-l.top:v+=a.bottom-d.bottom+l.bottom)),p||(isLeftOf(a,d)?g-=d.left-a.left+l.left:isRightOf(a,d)&&(g+=a.right-d.right+l.right)),(g!=b||v!==w)&&o.scrollTo(g,v)}function scrollAncestorsToShowRect({parent:o,getRect:a,alignToTop:n,forceScroll:s,ancestorOffset:l=0,limiterElement:c}){const u=getWindow(o),d=n&&s;let h,f,p;const g=c||u.document.body;for(;o!=g;)f=a(),h=new Rect$3(o).excludeScrollbarsAndBorders(),p=h.contains(f),d?o.scrollTop-=h.top-f.top+l:p||(isAbove(f,h)?o.scrollTop-=h.top-f.top+l:isBelow(f,h)&&(n?o.scrollTop+=f.top-h.top-l:o.scrollTop+=f.bottom-h.bottom+l)),p||(isLeftOf(f,h)?o.scrollLeft-=h.left-f.left+l:isRightOf(f,h)&&(o.scrollLeft+=f.right-h.right+l)),o=o.parentNode}function isBelow(o,a){return o.bottom>a.bottom}function isAbove(o,a){return o.top<a.top}function isLeftOf(o,a){return o.left<a.left}function isRightOf(o,a){return o.right>a.right}function getWindow(o){return isRange(o)?o.startContainer.ownerDocument.defaultView:o.ownerDocument.defaultView}function getParentElement(o){if(isRange(o)){let a=o.commonAncestorContainer;return isText(a)&&(a=a.parentNode),a}else return o.parentNode}function getRectRelativeToWindow(o,a){const n=getWindow(o),s=new Rect$3(o);if(n===a)return s;{let l=n;for(;l!=a;){const c=l.frameElement,u=new Rect$3(c).excludeScrollbarsAndBorders();s.moveBy(u.left,u.top),l=l.parent}}return s}function normalizeViewportOffset(o){return typeof o=="number"?{top:o,bottom:o,left:o,right:o}:o}const modifiersToGlyphsMac={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},modifiersToGlyphsNonMac={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},keyCodesToGlyphs={37:"←",38:"↑",39:"→",40:"↓",9:"⇥",33:"Page Up",34:"Page Down"},keyCodes=generateKnownKeyCodes(),keyCodeNames=Object.fromEntries(Object.entries(keyCodes).map(([o,a])=>{let n;return a in keyCodesToGlyphs?n=keyCodesToGlyphs[a]:n=o.charAt(0).toUpperCase()+o.slice(1),[a,n]}));function getCode(o){let a;if(typeof o=="string"){if(a=keyCodes[o.toLowerCase()],!a)throw new CKEditorError("keyboard-unknown-key",null,{key:o})}else a=o.keyCode+(o.altKey?keyCodes.alt:0)+(o.ctrlKey?keyCodes.ctrl:0)+(o.shiftKey?keyCodes.shift:0)+(o.metaKey?keyCodes.cmd:0);return a}function parseKeystroke(o){return typeof o=="string"&&(o=splitKeystrokeText(o)),o.map(a=>typeof a=="string"?getEnvKeyCode(a):a).reduce((a,n)=>n+a,0)}function getEnvKeystrokeText(o,a){let n=parseKeystroke(o);const s=env$1.isMac||env$1.isiOS;return Object.entries(s?modifiersToGlyphsMac:modifiersToGlyphsNonMac).reduce((u,[d,h])=>((n&keyCodes[d])!=0&&(n&=~keyCodes[d],u+=h),u),"")+(n?keyCodeNames[n]:"")}function isArrowKeyCode(o){return o==keyCodes.arrowright||o==keyCodes.arrowleft||o==keyCodes.arrowup||o==keyCodes.arrowdown}function getLocalizedArrowKeyCodeDirection(o,a){const n=a==="ltr";switch(o){case keyCodes.arrowleft:return n?"left":"right";case keyCodes.arrowright:return n?"right":"left";case keyCodes.arrowup:return"up";case keyCodes.arrowdown:return"down"}}function getEnvKeyCode(o){if(o.endsWith("!"))return getCode(o.slice(0,-1));const a=getCode(o);return(env$1.isMac||env$1.isiOS)&&a==keyCodes.ctrl?keyCodes.cmd:a}function isForwardArrowKeyCode(o,a){const n=getLocalizedArrowKeyCodeDirection(o,a);return n==="down"||n==="right"}function generateKnownKeyCodes(){const o={pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let a=65;a<=90;a++){const n=String.fromCharCode(a);o[n.toLowerCase()]=a}for(let a=48;a<=57;a++)o[a-48]=a;for(let a=112;a<=123;a++)o["f"+(a-111)]=a;return Object.assign(o,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),o}function splitKeystrokeText(o){return o.split("+").map(a=>a.trim())}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const RTL_LANGUAGE_CODES=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function getLanguageDirection(o){return RTL_LANGUAGE_CODES.includes(o)?"rtl":"ltr"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function toArray$2(o){return Array.isArray(o)?o:[o]}/* istanbul ignore else -- @preserve */global$1.window.CKEDITOR_TRANSLATIONS||(global$1.window.CKEDITOR_TRANSLATIONS={});function _translate(o,a,n=1,s){if(typeof n!="number")throw new CKEditorError("translation-service-quantity-not-a-number",null,{quantity:n});const l=s||global$1.window.CKEDITOR_TRANSLATIONS,c=getNumberOfLanguages(l);c===1&&(o=Object.keys(l)[0]);const u=a.id||a.string;if(c===0||!hasTranslation(o,u,l))return n!==1?a.plural:a.string;const d=l[o].dictionary,h=l[o].getPluralForm||(g=>g===1?0:1),f=d[u];if(typeof f=="string")return f;const p=Number(h(n));return f[p]}function _unifyTranslations(o){return Array.isArray(o)?o.reduce((a,n)=>merge$3(a,n)):o}function hasTranslation(o,a,n){return!!n[o]&&!!n[o].dictionary[a]}function getNumberOfLanguages(o){return Object.keys(o).length}class Locale{constructor({uiLanguage:a="en",contentLanguage:n,translations:s}={}){M(this,"uiLanguage");M(this,"uiLanguageDirection");M(this,"contentLanguage");M(this,"contentLanguageDirection");M(this,"t");M(this,"translations");this.uiLanguage=a,this.contentLanguage=n||this.uiLanguage,this.uiLanguageDirection=getLanguageDirection(this.uiLanguage),this.contentLanguageDirection=getLanguageDirection(this.contentLanguage),this.translations=_unifyTranslations(s),this.t=(l,c)=>this._t(l,c)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(a,n=[]){n=toArray$2(n),typeof a=="string"&&(a={string:a});const l=!!a.plural?n[0]:1,c=_translate(this.uiLanguage,a,l,this.translations);return interpolateString(c,n)}}function interpolateString(o,a){return o.replace(/%(\d+)/g,(n,s)=>s<a.length?a[s]:n)}class Collection extends EmitterMixin(){constructor(n={},s={}){super();M(this,"_items");M(this,"_itemMap");M(this,"_idProperty");M(this,"_bindToCollection");M(this,"_bindToExternalToInternalMap");M(this,"_bindToInternalToExternalMap");M(this,"_skippedIndexesFromExternal");const l=isIterable$1(n);if(l||(s=n),this._items=[],this._itemMap=new Map,this._idProperty=s.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],l)for(const c of n)this._items.push(c),this._itemMap.set(this._getItemIdBeforeAdding(c),c)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(n,s){return this.addMany([n],s)}addMany(n,s){if(s===void 0)s=this._items.length;else if(s>this._items.length||s<0)throw new CKEditorError("collection-add-item-invalid-index",this);let l=0;for(const c of n){const u=this._getItemIdBeforeAdding(c),d=s+l;this._items.splice(d,0,c),this._itemMap.set(u,c),this.fire("add",c,d),l++}return this.fire("change",{added:n,removed:[],index:s}),this}get(n){let s;if(typeof n=="string")s=this._itemMap.get(n);else if(typeof n=="number")s=this._items[n];else throw new CKEditorError("collection-get-invalid-arg",this);return s||null}has(n){if(typeof n=="string")return this._itemMap.has(n);{const s=this._idProperty,l=n[s];return l&&this._itemMap.has(l)}}getIndex(n){let s;return typeof n=="string"?s=this._itemMap.get(n):s=n,s?this._items.indexOf(s):-1}remove(n){const[s,l]=this._remove(n);return this.fire("change",{added:[],removed:[s],index:l}),s}map(n,s){return this._items.map(n,s)}forEach(n,s){this._items.forEach(n,s)}find(n,s){return this._items.find(n,s)}filter(n,s){return this._items.filter(n,s)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);const n=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:n,index:0})}bindTo(n){if(this._bindToCollection)throw new CKEditorError("collection-bind-to-rebind",this);return this._bindToCollection=n,{as:s=>{this._setUpBindToBinding(l=>new s(l))},using:s=>{typeof s=="function"?this._setUpBindToBinding(s):this._setUpBindToBinding(l=>l[s])}}}_setUpBindToBinding(n){const s=this._bindToCollection,l=(c,u,d)=>{const h=s._bindToCollection==this,f=s._bindToInternalToExternalMap.get(u);if(h&&f)this._bindToExternalToInternalMap.set(u,f),this._bindToInternalToExternalMap.set(f,u);else{const p=n(u);if(!p){this._skippedIndexesFromExternal.push(d);return}let g=d;for(const v of this._skippedIndexesFromExternal)d>v&&g--;for(const v of s._skippedIndexesFromExternal)g>=v&&g++;this._bindToExternalToInternalMap.set(u,p),this._bindToInternalToExternalMap.set(p,u),this.add(p,g);for(let v=0;v<s._skippedIndexesFromExternal.length;v++)g<=s._skippedIndexesFromExternal[v]&&s._skippedIndexesFromExternal[v]++}};for(const c of s)l(null,c,s.getIndex(c));this.listenTo(s,"add",l),this.listenTo(s,"remove",(c,u,d)=>{const h=this._bindToExternalToInternalMap.get(u);h&&this.remove(h),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((f,p)=>(d<p&&f.push(p-1),d>p&&f.push(p),f),[])})}_getItemIdBeforeAdding(n){const s=this._idProperty;let l;if(s in n){if(l=n[s],typeof l!="string")throw new CKEditorError("collection-add-invalid-id",this);if(this.get(l))throw new CKEditorError("collection-add-item-already-exists",this)}else n[s]=l=uid();return l}_remove(n){let s,l,c,u=!1;const d=this._idProperty;if(typeof n=="string"?(l=n,c=this._itemMap.get(l),u=!c,c&&(s=this._items.indexOf(c))):typeof n=="number"?(s=n,c=this._items[s],u=!c,c&&(l=c[d])):(c=n,l=c[d],s=this._items.indexOf(c),u=s==-1||!this._itemMap.get(l)),u)throw new CKEditorError("collection-remove-404",this);this._items.splice(s,1),this._itemMap.delete(l);const h=this._bindToInternalToExternalMap.get(c);return this._bindToInternalToExternalMap.delete(c),this._bindToExternalToInternalMap.delete(h),this.fire("remove",c,s),[c,s]}[Symbol.iterator](){return this._items[Symbol.iterator]()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function first(o){const a=o.next();return a.done?null:a.value}class FocusTracker extends DomEmitterMixin(ObservableMixin()){constructor(){super();M(this,"_elements",new Set);M(this,"_externalViews",new Set);M(this,"_blurTimeout",null);this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(n){if(isElement$1(n))this._addElement(n);else if(isViewWithFocusTracker(n))this._addView(n);else{if(!n.element)throw new CKEditorError("focustracker-add-view-missing-element",{focusTracker:this,view:n});this._addElement(n.element)}}remove(n){isElement$1(n)?this._removeElement(n):isViewWithFocusTracker(n)?this._removeView(n):this._removeElement(n.element)}_addElement(n){if(this._elements.has(n))throw new CKEditorError("focustracker-add-element-already-exist",this);this.listenTo(n,"focus",()=>{const s=this.externalViews.find(l=>isExternalViewSubtreeFocused(n,l));s?this._focus(s.element):this._focus(n)},{useCapture:!0}),this.listenTo(n,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(n)}_removeElement(n){this._elements.has(n)&&(this.stopListening(n),this._elements.delete(n)),n===this.focusedElement&&this._blur()}_addView(n){n.element&&this._addElement(n.element),this.listenTo(n.focusTracker,"change:focusedElement",()=>{n.focusTracker.focusedElement?n.element&&this._focus(n.element):this._blur()}),this._externalViews.add(n)}_removeView(n){n.element&&this._removeElement(n.element),this.stopListening(n.focusTracker),this._externalViews.delete(n)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(n){this._clearBlurTimeout(),this.focusedElement=n,this.isFocused=!0}_blur(){this.elements.find(l=>l.contains(document.activeElement))||this.externalViews.find(l=>l.focusTracker.isFocused&&!l.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}}function isViewWithFocusTracker(o){return"focusTracker"in o&&o.focusTracker instanceof FocusTracker}function isElement$1(o){return isElement$2(o)}function isExternalViewSubtreeFocused(o,a){return isFocusedView(o,a)?!0:!!a.focusTracker.externalViews.find(n=>isFocusedView(o,n))}function isFocusedView(o,a){return!!a.element&&a.element.contains(document.activeElement)&&o.contains(a.element)}class KeystrokeHandler{constructor(){M(this,"_listener");this._listener=new(DomEmitterMixin())}listenTo(a){this._listener.listenTo(a,"keydown",(n,s)=>{this._listener.fire("_keydown:"+getCode(s),s)})}set(a,n,s={}){const l=parseKeystroke(a),c=s.priority;this._listener.listenTo(this._listener,"_keydown:"+l,(u,d)=>{s.filter&&!s.filter(d)||(n(d,()=>{d.preventDefault(),d.stopPropagation(),u.stop()}),u.return=!0)},{priority:c})}press(a){return!!this._listener.fire("_keydown:"+getCode(a),a)}stopListening(a){this._listener.stopListening(a)}destroy(){this.stopListening()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function objectToMap(o){const a=new Map;for(const n in o)a.set(n,o[n]);return a}function toMap(o){return isIterable$1(o)?new Map(o):objectToMap(o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function spliceArray(o,a,n){const s=o.length,l=a.length;for(let c=s-1;c>=n;c--)o[c+l]=o[c];for(let c=0;c<l;c++)o[n+c]=a[c]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function delay(o,a){let n;function s(...l){s.cancel(),n=setTimeout(()=>o(...l),a)}return s.cancel=()=>{clearTimeout(n)},s}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function parseBase64EncodedObject(o){try{if(!o.startsWith("ey"))return null;const a=atob(o.replace(/-/g,"+").replace(/_/g,"/"));return JSON.parse(a)}catch{return null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function makeCrcTable(){const o=[];for(let a=0;a<256;a++){let n=a;for(let s=0;s<8;s++)n&1?n=3988292384^n>>>1:n=n>>>1;o[a]=n}return o}function crc32(o){const a=Array.isArray(o)?o:[o],n=makeCrcTable();let s=-1;const l=a.map(c=>Array.isArray(c)?c.join(""):String(c)).join("");for(let c=0;c<l.length;c++){const u=l.charCodeAt(c);s=s>>>8^n[(s^u)&255]}return s=(s^-1)>>>0,s.toString(16).padStart(8,"0")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isCombiningMark(o){return!!o&&o.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(o)}function isHighSurrogateHalf(o){return!!o&&o.length==1&&/[\ud800-\udbff]/.test(o)}function isLowSurrogateHalf(o){return!!o&&o.length==1&&/[\udc00-\udfff]/.test(o)}function isInsideSurrogatePair(o,a){return isHighSurrogateHalf(o.charAt(a-1))&&isLowSurrogateHalf(o.charAt(a))}function isInsideCombinedSymbol(o,a){return isCombiningMark(o.charAt(a))}const EMOJI_PATTERN=buildEmojiRegexp();function isInsideEmojiSequence(o,a){const n=String(o).matchAll(EMOJI_PATTERN);return Array.from(n).some(s=>s.index<a&&a<s.index+s[0].length)}function buildEmojiRegexp(){const o=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],a=new RegExp("\\p{Regional_Indicator}{2}","u").source,n="(?:"+o.map(l=>l.source).join("|")+")",s=`${a}|${n}(?:‍${n})*`;return new RegExp(s,"ug")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const documentPlaceholders=new WeakMap;let hasDisplayedPlaceholderDeprecationWarning=!1;function enablePlaceholder({view:o,element:a,text:n,isDirectHost:s=!0,keepOnFocus:l=!1}){const c=o.document;documentPlaceholders.has(c)||(documentPlaceholders.set(c,new Map),c.registerPostFixer(d=>updateDocumentPlaceholders(documentPlaceholders.get(c),d)),c.on("change:isComposing",()=>{o.change(d=>updateDocumentPlaceholders(documentPlaceholders.get(c),d))},{priority:"high"})),a.is("editableElement")&&a.on("change:placeholder",(d,h,f)=>u(f)),a.placeholder?u(a.placeholder):n&&u(n),n&&showPlaceholderTextDeprecationWarning();function u(d){const h={text:d,isDirectHost:s,keepOnFocus:l,hostElement:s?a:null};documentPlaceholders.get(c).set(a,h),o.change(f=>updateDocumentPlaceholders([[a,h]],f))}}function showPlaceholder(o,a){return a.hasClass("ck-placeholder")?!1:(o.addClass("ck-placeholder",a),!0)}function hidePlaceholder(o,a){return a.hasClass("ck-placeholder")?(o.removeClass("ck-placeholder",a),!0):!1}function needsPlaceholder(o,a){if(!o.isAttached()||hasContent(o))return!1;const n=o.document,l=n.selection.anchor;return n.isComposing&&l&&l.parent===o?!1:a||!n.isFocused?!0:!!l&&l.parent!==o}function hasContent(o){for(const a of o.getChildren())if(!a.is("uiElement"))return!0;return!1}function updateDocumentPlaceholders(o,a){const n=[];let s=!1;for(const[l,c]of o)c.isDirectHost&&(n.push(l),updatePlaceholder(a,l,c)&&(s=!0));for(const[l,c]of o){if(c.isDirectHost)continue;const u=getChildPlaceholderHostSubstitute(l);u&&(n.includes(u)||(c.hostElement=u,updatePlaceholder(a,l,c)&&(s=!0)))}return s}function updatePlaceholder(o,a,n){const{text:s,isDirectHost:l,hostElement:c}=n;let u=!1;return c.getAttribute("data-placeholder")!==s&&(o.setAttribute("data-placeholder",s,c),u=!0),(l||a.childCount==1)&&needsPlaceholder(c,n.keepOnFocus)?showPlaceholder(o,c)&&(u=!0):hidePlaceholder(o,c)&&(u=!0),u}function getChildPlaceholderHostSubstitute(o){if(o.childCount){const a=o.getChild(0);if(a.is("element")&&!a.is("uiElement")&&!a.is("attributeElement"))return a}return null}function showPlaceholderTextDeprecationWarning(){hasDisplayedPlaceholderDeprecationWarning||logWarning("enableplaceholder-deprecated-text-option"),hasDisplayedPlaceholderDeprecationWarning=!0}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let TypeCheckable$1=class{is(){throw new Error("is() method is abstract")}},Node$2=class extends EmitterMixin(TypeCheckable$1){constructor(n){super();M(this,"document");M(this,"parent");this.document=n,this.parent=null}get index(){let n;if(!this.parent)return null;if((n=this.parent.getChildIndex(this))==-1)throw new CKEditorError("view-node-not-found-in-parent",this);return n}get nextSibling(){const n=this.index;return n!==null&&this.parent.getChild(n+1)||null}get previousSibling(){const n=this.index;return n!==null&&this.parent.getChild(n-1)||null}get root(){let n=this;for(;n.parent;)n=n.parent;return n}isAttached(){return this.root.is("rootElement")}getPath(){const n=[];let s=this;for(;s.parent;)n.unshift(s.index),s=s.parent;return n}getAncestors(n={}){const s=[];let l=n.includeSelf?this:this.parent;for(;l;)s[n.parentFirst?"push":"unshift"](l),l=l.parent;return s}getCommonAncestor(n,s={}){const l=this.getAncestors(s),c=n.getAncestors(s);let u=0;for(;l[u]==c[u]&&l[u];)u++;return u===0?null:l[u-1]}isBefore(n){if(this==n||this.root!==n.root)return!1;const s=this.getPath(),l=n.getPath(),c=compareArrays(s,l);switch(c){case"prefix":return!0;case"extension":return!1;default:return s[c]<l[c]}}isAfter(n){return this==n||this.root!==n.root?!1:!this.isBefore(n)}_remove(){this.parent._removeChildren(this.index)}_fireChange(n,s,l){this.fire(`change:${n}`,s,l),this.parent&&this.parent._fireChange(n,s,l)}toJSON(){const n=clone$6(this);return delete n.parent,n}};Node$2.prototype.is=function(o){return o==="node"||o==="view:node"};let Text$1=class mr extends Node$2{constructor(n,s){super(n);M(this,"_textData");this._textData=s}get data(){return this._textData}get _data(){return this.data}set _data(n){this._fireChange("text",this),this._textData=n}isSimilar(n){return n instanceof mr?this===n||this.data===n.data:!1}_clone(){return new mr(this.document,this.data)}};Text$1.prototype.is=function(o){return o==="$text"||o==="view:$text"||o==="text"||o==="view:text"||o==="node"||o==="view:node"};let TextProxy$1=class extends TypeCheckable$1{constructor(n,s,l){super();M(this,"textNode");M(this,"data");M(this,"offsetInText");if(this.textNode=n,s<0||s>n.data.length)throw new CKEditorError("view-textproxy-wrong-offsetintext",this);if(l<0||s+l>n.data.length)throw new CKEditorError("view-textproxy-wrong-length",this);this.data=n.data.substring(s,s+l),this.offsetInText=s}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(n={}){const s=[];let l=n.includeSelf?this.textNode:this.parent;for(;l!==null;)s[n.parentFirst?"push":"unshift"](l),l=l.parent;return s}};TextProxy$1.prototype.is=function(o){return o==="$textProxy"||o==="view:$textProxy"||o==="textProxy"||o==="view:textProxy"};class ViewConsumable{constructor(){M(this,"_consumables",new Map)}add(a,n){let s;if(a.is("$text")||a.is("documentFragment")){this._consumables.set(a,!0);return}this._consumables.has(a)?s=this._consumables.get(a):(s=new ViewElementConsumables(a),this._consumables.set(a,s)),s.add(n?normalizeConsumables(n):a._getConsumables())}test(a,n){const s=this._consumables.get(a);return s===void 0?null:a.is("$text")||a.is("documentFragment")?s:s.test(normalizeConsumables(n))}consume(a,n){if(a.is("$text")||a.is("documentFragment"))return this.test(a,n)?(this._consumables.set(a,!1),!0):!1;const s=this._consumables.get(a);return s===void 0?!1:s.consume(normalizeConsumables(n))}revert(a,n){const s=this._consumables.get(a);s!==void 0&&(a.is("$text")||a.is("documentFragment")?this._consumables.set(a,!0):s.revert(normalizeConsumables(n)))}static createFrom(a,n){if(n||(n=new ViewConsumable),a.is("$text"))n.add(a);else if(a.is("element")||a.is("documentFragment")){n.add(a);for(const s of a.getChildren())ViewConsumable.createFrom(s,n)}return n}}class ViewElementConsumables{constructor(a){M(this,"element");M(this,"_canConsumeName",null);M(this,"_attributes",new Map);this.element=a}add(a){a.name&&(this._canConsumeName=!0);for(const[n,s]of a.attributes)if(s){let l=this._attributes.get(n);(!l||typeof l=="boolean")&&(l=new Map,this._attributes.set(n,l)),l.set(s,!0)}else{if(n=="style"||n=="class")throw new CKEditorError("viewconsumable-invalid-attribute",this);this._attributes.set(n,!0)}}test(a){if(a.name&&!this._canConsumeName)return this._canConsumeName;for(const[n,s]of a.attributes){const l=this._attributes.get(n);if(l===void 0)return null;if(l===!1)return!1;if(l!==!0){if(s){const c=l.get(s);if(c===void 0)return null;if(!c)return!1}else for(const c of l.values())if(!c)return!1}}return!0}consume(a){if(!this.test(a))return!1;a.name&&(this._canConsumeName=!1);for(const[n,s]of a.attributes){const l=this._attributes.get(n);if(typeof l=="boolean")for(const[c]of this.element._getConsumables(n,s).attributes)this._attributes.set(c,!1);else if(s)for(const[,c]of this.element._getConsumables(n,s).attributes)l.set(c,!1);else for(const c of l.keys())l.set(c,!1)}return!0}revert(a){a.name&&(this._canConsumeName=!0);for(const[n,s]of a.attributes){const l=this._attributes.get(n);if(l===!1){this._attributes.set(n,!0);continue}if(!(l===void 0||l===!0))if(s)l.get(s)===!1&&l.set(s,!0);else for(const c of l.keys())l.set(c,!0)}}}function normalizeConsumables(o){const a=[];return"attributes"in o&&o.attributes&&normalizeConsumablePart(a,o.attributes),"classes"in o&&o.classes&&normalizeConsumablePart(a,o.classes,"class"),"styles"in o&&o.styles&&normalizeConsumablePart(a,o.styles,"style"),{name:o.name||!1,attributes:a}}function normalizeConsumablePart(o,a,n){if(typeof a=="string"){o.push(n?[n,a]:[a]);return}for(const s of a)Array.isArray(s)?o.push(s):o.push(n?[n,s]:[s])}class Matcher{constructor(...a){M(this,"_patterns",[]);this.add(...a)}add(...a){for(let n of a)(typeof n=="string"||n instanceof RegExp)&&(n={name:n}),this._patterns.push(n)}match(...a){for(const n of a)for(const s of this._patterns){const l=this._isElementMatching(n,s);if(l)return{element:n,pattern:s,match:l}}return null}matchAll(...a){const n=[];for(const s of a)for(const l of this._patterns){const c=this._isElementMatching(s,l);c&&n.push({element:s,pattern:l,match:c})}return n.length>0?n:null}getElementName(){if(this._patterns.length!==1)return null;const a=this._patterns[0],n=a.name;return typeof a!="function"&&n&&!(n instanceof RegExp)?n:null}_isElementMatching(a,n){if(typeof n=="function"){const c=n(a);return!c||typeof c!="object"?c:normalizeConsumables(c)}const s={};if(n.name&&(s.name=matchName(n.name,a.name),!s.name))return null;const l=[];return n.attributes&&!matchAttributes(n.attributes,a,l)||n.classes&&!matchClasses(n.classes,a,l)||n.styles&&!matchStyles(n.styles,a,l)?null:(l.length&&(s.attributes=l),s)}}function isPatternMatched(o,a){return o===!0||o===a||o instanceof RegExp&&!!String(a).match(o)}function matchName(o,a){return o instanceof RegExp?!!a.match(o):o===a}function normalizePatterns(o,a){if(Array.isArray(o))return o.map(s=>typeof s!="object"||s instanceof RegExp?a?[a,s,!0]:[s,!0]:((s.key===void 0||s.value===void 0)&&logWarning("matcher-pattern-missing-key-or-value",s),a?[a,s.key,s.value]:[s.key,s.value]));if(typeof o!="object"||o instanceof RegExp)return[a?[a,o,!0]:[o,!0]];const n=[];for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&n.push(a?[a,s,o[s]]:[s,o[s]]);return n}function matchAttributes(o,a,n){let s;return typeof o=="object"&&!(o instanceof RegExp)&&!Array.isArray(o)?(o.style!==void 0&&logWarning("matcher-pattern-deprecated-attributes-style-key",o),o.class!==void 0&&logWarning("matcher-pattern-deprecated-attributes-class-key",o)):s=["class","style"],a._collectAttributesMatch(normalizePatterns(o),n,s)}function matchClasses(o,a,n){return a._collectAttributesMatch(normalizePatterns(o,"class"),n)}function matchStyles(o,a,n){return a._collectAttributesMatch(normalizePatterns(o,"style"),n)}class StylesMap{constructor(a){M(this,"_styles");M(this,"_cachedStyleNames",null);M(this,"_cachedExpandedStyleNames",null);M(this,"_styleProcessor");this._styles={},this._styleProcessor=a}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(a){this.clear();const n=parseInlineStyles(a);for(const[s,l]of n)this._styleProcessor.toNormalizedForm(s,l,this._styles);return this}has(a){if(this.isEmpty)return!1;const s=this._styleProcessor.getReducedForm(a,this._styles).find(([l])=>l===a);return Array.isArray(s)}set(a,n){if(this._cachedStyleNames=null,this._cachedExpandedStyleNames=null,isObject$6(a))for(const[s,l]of Object.entries(a))this._styleProcessor.toNormalizedForm(s,l,this._styles);else this._styleProcessor.toNormalizedForm(a,n,this._styles)}remove(a){for(const n of toArray$2(a)){this._cachedStyleNames=null,this._cachedExpandedStyleNames=null;const s=toPath(n);unset(this._styles,s),delete this._styles[n],this._cleanEmptyObjectsOnPath(s)}}getNormalized(a){return this._styleProcessor.getNormalized(a,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(a=>a.join(":")).sort().join(";")+";"}getAsString(a){if(this.isEmpty)return;if(this._styles[a]&&!isObject$6(this._styles[a]))return this._styles[a];const s=this._styleProcessor.getReducedForm(a,this._styles).find(([l])=>l===a);if(Array.isArray(s))return s[1]}getStyleNames(a=!1){return this.isEmpty?[]:a?(this._cachedExpandedStyleNames=this._cachedExpandedStyleNames||this._styleProcessor.getStyleNames(this._styles),this._cachedExpandedStyleNames):(this._cachedStyleNames=this._cachedStyleNames||this.getStylesEntries().map(([n])=>n),this._cachedStyleNames)}keys(){return this.getStyleNames()}clear(){this._styles={},this._cachedStyleNames=null,this._cachedExpandedStyleNames=null}isSimilar(a){if(this.size!==a.size)return!1;for(const n of this.getStyleNames())if(!a.has(n)||a.getAsString(n)!==this.getAsString(n))return!1;return!0}getStylesEntries(){const a=[],n=Object.keys(this._styles);for(const s of n)a.push(...this._styleProcessor.getReducedForm(s,this._styles));return a}_clone(){const a=new this.constructor(this._styleProcessor);return a.set(this.getNormalized()),a}_getTokensMatch(a,n){const s=[];for(const l of this.getStyleNames(!0))if(isPatternMatched(a,l)){if(n===!0){s.push(l);continue}const c=this.getAsString(l);isPatternMatched(n,c)&&s.push(l)}return s.length?s:void 0}_getConsumables(a){const n=[];if(a){n.push(a);for(const s of this._styleProcessor.getRelatedStyles(a))n.push(s)}else for(const s of this.getStyleNames()){for(const l of this._styleProcessor.getRelatedStyles(s))n.push(l);n.push(s)}return n}_canMergeFrom(a){for(const n of a.getStyleNames())if(this.has(n)&&this.getAsString(n)!==a.getAsString(n))return!1;return!0}_mergeFrom(a){for(const n of a.getStyleNames())this.has(n)||this.set(n,a.getAsString(n))}_isMatching(a){for(const n of a.getStyleNames())if(!this.has(n)||this.getAsString(n)!==a.getAsString(n))return!1;return!0}_cleanEmptyObjectsOnPath(a){const n=a.split(".");if(!(n.length>1))return;const l=n.splice(0,n.length-1).join("."),c=get$2(this._styles,l);if(!c)return;!Object.keys(c).length&&this.remove(l)}}class StylesProcessor{constructor(){M(this,"_normalizers");M(this,"_extractors");M(this,"_reducers");M(this,"_consumables");this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(a,n,s){if(isObject$6(n)){appendStyleValue(s,toPath(a),n);return}if(this._normalizers.has(a)){const l=this._normalizers.get(a),{path:c,value:u}=l(n);appendStyleValue(s,c,u)}else appendStyleValue(s,a,n)}getNormalized(a,n){if(!a)return merge$3({},n);if(n[a]!==void 0)return n[a];if(this._extractors.has(a)){const s=this._extractors.get(a);if(typeof s=="string")return get$2(n,s);const l=s(a,n);if(l)return l}return get$2(n,toPath(a))}getReducedForm(a,n){const s=this.getNormalized(a,n);return s===void 0?[]:this._reducers.has(a)?this._reducers.get(a)(s):[[a,s]]}getStyleNames(a){const n=new Set;for(const s of this._consumables.keys()){const l=this.getNormalized(s,a);l&&(typeof l!="object"||Object.keys(l).length)&&n.add(s)}for(const s of Object.keys(a))n.add(s);return Array.from(n)}getRelatedStyles(a){return this._consumables.get(a)||[]}setNormalizer(a,n){this._normalizers.set(a,n)}setExtractor(a,n){this._extractors.set(a,n)}setReducer(a,n){this._reducers.set(a,n)}setStyleRelation(a,n){this._mapStyleNames(a,n);for(const s of n)this._mapStyleNames(s,[a])}_mapStyleNames(a,n){this._consumables.has(a)||this._consumables.set(a,[]),this._consumables.get(a).push(...n)}}function parseInlineStyles(o){let a=null,n=0,s=0,l=null;const c=new Map;if(o==="")return c;o.charAt(o.length-1)!=";"&&(o=o+";");for(let u=0;u<o.length;u++){const d=o.charAt(u);if(a===null)switch(d){case":":l||(l=o.substr(n,u-n),s=u+1);break;case'"':case"'":a=d;break;case";":{const h=o.substr(s,u-s);l&&c.set(l.trim(),h.trim()),l=null,n=u+1;break}}else d===a&&(a=null)}return c}function toPath(o){return o.replace("-",".")}function appendStyleValue(o,a,n){let s=n;isObject$6(n)&&(s=merge$3({},get$2(o,a),n)),set$2(o,a,s)}class TokenList{constructor(){M(this,"_set",new Set)}get isEmpty(){return this._set.size==0}get size(){return this._set.size}has(a){return this._set.has(a)}keys(){return Array.from(this._set.keys())}setTo(a){this.clear();for(const n of a.split(/\s+/))n&&this._set.add(n);return this}set(a){for(const n of toArray$2(a))n&&this._set.add(n)}remove(a){for(const n of toArray$2(a))this._set.delete(n)}clear(){this._set.clear()}toString(){return Array.from(this._set).join(" ")}isSimilar(a){if(this.size!==a.size)return!1;for(const n of this.keys())if(!a.has(n))return!1;return!0}_clone(){const a=new this.constructor;return a._set=new Set(this._set),a}_getTokensMatch(a){const n=[];if(a===!0){for(const s of this._set.keys())n.push(s);return n}if(typeof a=="string"){for(const s of a.split(/\s+/))if(this._set.has(s))n.push(s);else return;return n}for(const s of this._set.keys())s.match(a)&&n.push(s);return n.length?n:void 0}_getConsumables(a){return a?[a]:this.keys()}_canMergeFrom(){return!0}_mergeFrom(a){for(const n of a._set.keys())this._set.has(n)||this._set.add(n)}_isMatching(a){for(const n of a._set.keys())if(!this._set.has(n))return!1;return!0}}let Element$1=class yr extends Node$2{constructor(n,s,l,c){super(n);M(this,"name");M(this,"_unsafeAttributesToRender",[]);M(this,"_attrs");M(this,"_children");M(this,"_customProperties",new Map);this.name=s,this._attrs=this._parseAttributes(l),this._children=[],c&&this._insertChild(0,c)}get _classes(){return this._attrs.get("class")}get _styles(){return this._attrs.get("style")}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(n){return this._children[n]}getChildIndex(n){return this._children.indexOf(n)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes&&(yield"class"),this._styles&&(yield"style");for(const n of this._attrs.keys())n!="class"&&n!="style"&&(yield n)}*getAttributes(){for(const[n,s]of this._attrs.entries())yield[n,String(s)]}getAttribute(n){return this._attrs.has(n)?String(this._attrs.get(n)):void 0}hasAttribute(n,s){return this._attrs.has(n)?s!==void 0?usesStylesMap(this.name,n)||usesTokenList(this.name,n)?this._attrs.get(n).has(s):this._attrs.get(n)===s:!0:!1}isSimilar(n){if(!(n instanceof yr))return!1;if(this===n)return!0;if(this.name!=n.name||this._attrs.size!==n._attrs.size)return!1;for(const[s,l]of this._attrs){const c=n._attrs.get(s);if(c===void 0)return!1;if(typeof l=="string"||typeof c=="string"){if(c!==l)return!1}else if(!l.isSimilar(c))return!1}return!0}hasClass(...n){for(const s of n)if(!this._classes||!this._classes.has(s))return!1;return!0}getClassNames(){const n=this._classes?this._classes.keys():[],s=n[Symbol.iterator]();return Object.assign(n,{next:s.next.bind(s)})}getStyle(n){return this._styles&&this._styles.getAsString(n)}getNormalizedStyle(n){return this._styles&&this._styles.getNormalized(n)}getStyleNames(n){return this._styles?this._styles.getStyleNames(n):[]}hasStyle(...n){for(const s of n)if(!this._styles||!this._styles.has(s))return!1;return!0}findAncestor(...n){const s=new Matcher(...n);let l=this.parent;for(;l&&!l.is("documentFragment");){if(s.match(l))return l;l=l.parent}return null}getCustomProperty(n){return this._customProperties.get(n)}*getCustomProperties(){yield*this._customProperties.entries()}getIdentity(){const n=this._classes?this._classes.keys().sort().join(","):"",s=this._styles&&String(this._styles),l=Array.from(this._attrs).filter(([c])=>c!="style"&&c!="class").map(c=>`${c[0]}="${c[1]}"`).sort().join(" ");return this.name+(n==""?"":` class="${n}"`)+(s?` style="${s}"`:"")+(l==""?"":` ${l}`)}shouldRenderUnsafeAttribute(n){return this._unsafeAttributesToRender.includes(n)}_clone(n=!1){const s=[];if(n)for(const c of this.getChildren())s.push(c._clone(n));const l=new this.constructor(this.document,this.name,this._attrs,s);return l._customProperties=new Map(this._customProperties),l.getFillerOffset=this.getFillerOffset,l._unsafeAttributesToRender=this._unsafeAttributesToRender,l}_appendChild(n){return this._insertChild(this.childCount,n)}_insertChild(n,s){this._fireChange("children",this,{index:n});let l=0;const c=normalize$3$1(this.document,s);for(const u of c)u.parent!==null&&u._remove(),u.parent=this,u.document=this.document,this._children.splice(n,0,u),n++,l++;return l}_removeChildren(n,s=1){this._fireChange("children",this,{index:n});for(let l=n;l<n+s;l++)this._children[l].parent=null;return this._children.splice(n,s)}_setAttribute(n,s,l=!0){if(this._fireChange("attributes",this),usesStylesMap(this.name,n)||usesTokenList(this.name,n)){let c=this._attrs.get(n);c||(c=usesStylesMap(this.name,n)?new StylesMap(this.document.stylesProcessor):new TokenList,this._attrs.set(n,c)),l?c.setTo(String(s)):usesStylesMap(this.name,n)?Array.isArray(s)?c.set(s[0],s[1]):c.set(s):c.set(typeof s=="string"?s.split(/\s+/):s)}else this._attrs.set(n,String(s))}_removeAttribute(n,s){if(this._fireChange("attributes",this),s!==void 0&&(usesStylesMap(this.name,n)||usesTokenList(this.name,n))){const l=this._attrs.get(n);return l?(usesTokenList(this.name,n)&&typeof s=="string"&&(s=s.split(/\s+/)),l.remove(s),l.isEmpty?this._attrs.delete(n):!1):!1}return this._attrs.delete(n)}_addClass(n){this._setAttribute("class",n,!1)}_removeClass(n){this._removeAttribute("class",n)}_setStyle(n,s){typeof n!="string"?this._setAttribute("style",n,!1):this._setAttribute("style",[n,s],!1)}_removeStyle(n){this._removeAttribute("style",n)}_collectAttributesMatch(n,s,l){for(const[c,u,d]of n){let h=!1,f=!1;for(const[p,g]of this._attrs)if(!(l&&l.includes(p)||!isPatternMatched(c,p)))if(h=!0,typeof g=="string"){if(isPatternMatched(u,g))s.push([p]),f=!0;else if(!(c instanceof RegExp))return!1}else{const v=g._getTokensMatch(u,d||!0);if(v){f=!0;for(const b of v)s.push([p,b])}else if(!(c instanceof RegExp))return!1}if(!h||!f)return!1}return!0}_getConsumables(n,s){const l=[];if(n){const c=this._attrs.get(n);if(c!==void 0)if(typeof c=="string")l.push([n]);else for(const u of c._getConsumables(s))l.push([n,u])}else for(const[c,u]of this._attrs)if(typeof u=="string")l.push([c]);else for(const d of u._getConsumables())l.push([c,d]);return{name:!n,attributes:l}}_canMergeAttributesFrom(n){if(this.name!=n.name)return!1;for(const[s,l]of n._attrs){const c=this._attrs.get(s);if(c!==void 0){if(typeof c=="string"||typeof l=="string"){if(c!==l)return!1}else if(!c._canMergeFrom(l))return!1}}return!0}_mergeAttributesFrom(n){this._fireChange("attributes",this);for(const[s,l]of n._attrs){const c=this._attrs.get(s);c===void 0||typeof c=="string"||typeof l=="string"?this._setAttribute(s,l):c._mergeFrom(l)}}_canSubtractAttributesOf(n){if(this.name!=n.name)return!1;for(const[s,l]of n._attrs){const c=this._attrs.get(s);if(c===void 0)return!1;if(typeof c=="string"||typeof l=="string"){if(c!==l)return!1}else if(!c._isMatching(l))return!1}return!0}_subtractAttributesOf(n){this._fireChange("attributes",this);for(const[s,l]of n._attrs){const c=this._attrs.get(s);typeof c=="string"||typeof l=="string"?this._attrs.delete(s):(c.remove(l.keys()),c.isEmpty&&this._attrs.delete(s))}}_setCustomProperty(n,s){this._customProperties.set(n,s)}_removeCustomProperty(n){return this._customProperties.delete(n)}_parseAttributes(n){const s=toMap(n);for(const[l,c]of s)if(c===null)s.delete(l);else if(usesStylesMap(this.name,l)){const u=c instanceof StylesMap?c._clone():new StylesMap(this.document.stylesProcessor).setTo(String(c));s.set(l,u)}else if(usesTokenList(this.name,l)){const u=c instanceof TokenList?c._clone():new TokenList().setTo(String(c));s.set(l,u)}else typeof c!="string"&&s.set(l,String(c));return s}};Element$1.prototype.is=function(o,a){return a?a===this.name&&(o==="element"||o==="view:element"):o==="element"||o==="view:element"||o==="node"||o==="view:node"};function normalize$3$1(o,a){if(typeof a=="string")return[new Text$1(o,a)];isIterable$1(a)||(a=[a]);const n=[];for(const s of a)typeof s=="string"?n.push(new Text$1(o,s)):s instanceof TextProxy$1?n.push(new Text$1(o,s.data)):n.push(s);return n}function usesTokenList(o,a){return a=="class"||o=="a"&&a=="rel"}function usesStylesMap(o,a){return a=="style"}class ContainerElement extends Element$1{constructor(a,n,s,l){super(a,n,s,l),this.getFillerOffset=getFillerOffset$4}}ContainerElement.prototype.is=function(o,a){return a?a===this.name&&(o==="containerElement"||o==="view:containerElement"||o==="element"||o==="view:element"):o==="containerElement"||o==="view:containerElement"||o==="element"||o==="view:element"||o==="node"||o==="view:node"};function getFillerOffset$4(){const o=[...this.getChildren()],a=o[this.childCount-1];if(a&&a.is("element","br"))return this.childCount;for(const n of o)if(!n.is("uiElement"))return null;return this.childCount}class EditableElement extends ObservableMixin(ContainerElement){constructor(a,n,s,l){super(a,n,s,l),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(a),this.bind("isFocused").to(a,"isFocused",c=>c&&a.selection.editableElement==this),this.listenTo(a.selection,"change",()=>{this.isFocused=a.isFocused&&a.selection.editableElement==this})}destroy(){this.stopListening()}}EditableElement.prototype.is=function(o,a){return a?a===this.name&&(o==="editableElement"||o==="view:editableElement"||o==="containerElement"||o==="view:containerElement"||o==="element"||o==="view:element"):o==="editableElement"||o==="view:editableElement"||o==="containerElement"||o==="view:containerElement"||o==="element"||o==="view:element"||o==="node"||o==="view:node"};const rootNameSymbol=Symbol("rootName");class RootEditableElement extends EditableElement{constructor(a,n){super(a,n),this.rootName="main"}get rootName(){return this.getCustomProperty(rootNameSymbol)}set rootName(a){this._setCustomProperty(rootNameSymbol,a)}set _name(a){this.name=a}}RootEditableElement.prototype.is=function(o,a){return a?a===this.name&&(o==="rootElement"||o==="view:rootElement"||o==="editableElement"||o==="view:editableElement"||o==="containerElement"||o==="view:containerElement"||o==="element"||o==="view:element"):o==="rootElement"||o==="view:rootElement"||o==="editableElement"||o==="view:editableElement"||o==="containerElement"||o==="view:containerElement"||o==="element"||o==="view:element"||o==="node"||o==="view:node"};let TreeWalker$1=class{constructor(a={}){M(this,"direction");M(this,"boundaries");M(this,"singleCharacters");M(this,"shallow");M(this,"ignoreElementEnd");M(this,"_position");M(this,"_boundaryStartParent");M(this,"_boundaryEndParent");if(!a.boundaries&&!a.startPosition)throw new CKEditorError("view-tree-walker-no-start-position",null);if(a.direction&&a.direction!="forward"&&a.direction!="backward")throw new CKEditorError("view-tree-walker-unknown-direction",a.startPosition,{direction:a.direction});this.boundaries=a.boundaries||null,a.startPosition?this._position=Position$1._createAt(a.startPosition):this._position=Position$1._createAt(a.boundaries[a.direction=="backward"?"end":"start"]),this.direction=a.direction||"forward",this.singleCharacters=!!a.singleCharacters,this.shallow=!!a.shallow,this.ignoreElementEnd=!!a.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(a){let n,s;do s=this.position,n=this.next();while(!n.done&&a(n.value));n.done||(this._position=s)}jumpTo(a){this._boundaryStartParent&&a.isBefore(this.boundaries.start)?a=this.boundaries.start:this._boundaryEndParent&&a.isAfter(this.boundaries.end)&&(a=this.boundaries.end),this._position=a.clone()}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let a=this.position.clone();const n=this.position,s=a.parent;if(s.parent===null&&a.offset===s.childCount)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&a.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let l;if(s&&s.is("view:$text")){if(a.isAtEnd)return this._position=Position$1._createAfter(s),this._next();l=s.data[a.offset]}else l=s.getChild(a.offset);if(typeof l=="string"){let c;this.singleCharacters?c=1:c=(s===this._boundaryEndParent?this.boundaries.end.offset:s.data.length)-a.offset;const u=new TextProxy$1(s,a.offset,c);return a.offset+=c,this._position=a,this._formatReturnValue("text",u,n,a,c)}if(l&&l.is("view:element")){if(!this.shallow)a=new Position$1(l,0);else{if(this.boundaries&&this.boundaries.end.isBefore(a))return{done:!0,value:void 0};a.offset++}return this._position=a,this._formatReturnValue("elementStart",l,n,a,1)}if(l&&l.is("view:$text")){if(this.singleCharacters)return a=new Position$1(l,0),this._position=a,this._next();let c=l.data.length,u;return l==this._boundaryEndParent?(c=this.boundaries.end.offset,u=new TextProxy$1(l,0,c),a=Position$1._createAfter(u)):(u=new TextProxy$1(l,0,l.data.length),a.offset++),this._position=a,this._formatReturnValue("text",u,n,a,c)}return a=Position$1._createAfter(s),this._position=a,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",s,n,a)}_previous(){let a=this.position.clone();const n=this.position,s=a.parent;if(s.parent===null&&a.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&a.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let l;if(s.is("view:$text")){if(a.isAtStart)return this._position=Position$1._createBefore(s),this._previous();l=s.data[a.offset-1]}else l=s.getChild(a.offset-1);if(typeof l=="string"){let c;if(this.singleCharacters)c=1;else{const d=s===this._boundaryStartParent?this.boundaries.start.offset:0;c=a.offset-d}a.offset-=c;const u=new TextProxy$1(s,a.offset,c);return this._position=a,this._formatReturnValue("text",u,n,a,c)}if(l&&l.is("view:element"))return this.shallow?(a.offset--,this._position=a,this._formatReturnValue("elementStart",l,n,a,1)):(a=new Position$1(l,l.childCount),this._position=a,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",l,n,a));if(l&&l.is("view:$text")){if(this.singleCharacters)return a=new Position$1(l,l.data.length),this._position=a,this._previous();let c=l.data.length,u;if(l==this._boundaryStartParent){const d=this.boundaries.start.offset;u=new TextProxy$1(l,d,l.data.length-d),c=u.data.length,a=Position$1._createBefore(u)}else u=new TextProxy$1(l,0,l.data.length),a.offset--;return this._position=a,this._formatReturnValue("text",u,n,a,c)}return a=Position$1._createBefore(s),this._position=a,this._formatReturnValue("elementStart",s,n,a,1)}_formatReturnValue(a,n,s,l,c){return n.is("view:$textProxy")&&(n.offsetInText+n.data.length==n.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(l=Position$1._createAfter(n.textNode),this._position=l):s=Position$1._createAfter(n.textNode)),n.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(l=Position$1._createBefore(n.textNode),this._position=l):s=Position$1._createBefore(n.textNode))),{done:!1,value:{type:a,item:n,previousPosition:s,nextPosition:l,length:c}}}},Position$1=class Ut extends TypeCheckable$1{constructor(n,s){super();M(this,"parent");M(this,"offset");this.parent=n,this.offset=s}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){const n=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===n}get root(){return this.parent.root}get editableElement(){let n=this.parent;for(;!(n instanceof EditableElement);)if(n.parent)n=n.parent;else return null;return n}getShiftedBy(n){const s=Ut._createAt(this),l=s.offset+n;return s.offset=l<0?0:l,s}getLastMatchingPosition(n,s={}){s.startPosition=this;const l=new TreeWalker$1(s);return l.skip(n),l.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(n){const s=this.getAncestors(),l=n.getAncestors();let c=0;for(;s[c]==l[c]&&s[c];)c++;return c===0?null:s[c-1]}isEqual(n){return this.parent==n.parent&&this.offset==n.offset}isBefore(n){return this.compareWith(n)=="before"}isAfter(n){return this.compareWith(n)=="after"}compareWith(n){if(this.root!==n.root)return"different";if(this.isEqual(n))return"same";const s=this.parent.is("node")?this.parent.getPath():[],l=n.parent.is("node")?n.parent.getPath():[];s.push(this.offset),l.push(n.offset);const c=compareArrays(s,l);switch(c){case"prefix":return"before";case"extension":return"after";default:return s[c]<l[c]?"before":"after"}}getWalker(n={}){return n.startPosition=this,new TreeWalker$1(n)}clone(){return new Ut(this.parent,this.offset)}static _createAt(n,s){if(n instanceof Ut)return new this(n.parent,n.offset);{const l=n;if(s=="end")s=l.is("$text")?l.data.length:l.childCount;else{if(s=="before")return this._createBefore(l);if(s=="after")return this._createAfter(l);if(s!==0&&!s)throw new CKEditorError("view-createpositionat-offset-required",l)}return new Ut(l,s)}}static _createAfter(n){if(n.is("$textProxy"))return new Ut(n.textNode,n.offsetInText+n.data.length);if(!n.parent)throw new CKEditorError("view-position-after-root",n,{root:n});return new Ut(n.parent,n.index+1)}static _createBefore(n){if(n.is("$textProxy"))return new Ut(n.textNode,n.offsetInText);if(!n.parent)throw new CKEditorError("view-position-before-root",n,{root:n});return new Ut(n.parent,n.index)}};Position$1.prototype.is=function(o){return o==="position"||o==="view:position"};let Range$1=class Ht extends TypeCheckable$1{constructor(n,s=null){super();M(this,"start");M(this,"end");this.start=n.clone(),this.end=s?s.clone():n.clone()}*[Symbol.iterator](){yield*new TreeWalker$1({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let n=this.start.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"}),s=this.end.getLastMatchingPosition(enlargeTrimSkip);return n.parent.is("$text")&&n.isAtStart&&(n=Position$1._createBefore(n.parent)),s.parent.is("$text")&&s.isAtEnd&&(s=Position$1._createAfter(s.parent)),new Ht(n,s)}getTrimmed(){let n=this.start.getLastMatchingPosition(enlargeTrimSkip);if(n.isAfter(this.end)||n.isEqual(this.end))return new Ht(n,n);let s=this.end.getLastMatchingPosition(enlargeTrimSkip,{direction:"backward"});const l=n.nodeAfter,c=s.nodeBefore;return l&&l.is("$text")&&(n=new Position$1(l,0)),c&&c.is("$text")&&(s=new Position$1(c,c.data.length)),new Ht(n,s)}isEqual(n){return this==n||this.start.isEqual(n.start)&&this.end.isEqual(n.end)}containsPosition(n){return n.isAfter(this.start)&&n.isBefore(this.end)}containsRange(n,s=!1){n.isCollapsed&&(s=!1);const l=this.containsPosition(n.start)||s&&this.start.isEqual(n.start),c=this.containsPosition(n.end)||s&&this.end.isEqual(n.end);return l&&c}getDifference(n){const s=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&s.push(new Ht(this.start,n.start)),this.containsPosition(n.end)&&s.push(new Ht(n.end,this.end))):s.push(this.clone()),s}getIntersection(n){if(this.isIntersecting(n)){let s=this.start,l=this.end;return this.containsPosition(n.start)&&(s=n.start),this.containsPosition(n.end)&&(l=n.end),new Ht(s,l)}return null}getWalker(n={}){return n.boundaries=this,new TreeWalker$1(n)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let n=this.start.nodeAfter,s=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(n=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(s=this.end.parent.previousSibling),n&&n.is("element")&&n===s?n:null}clone(){return new Ht(this.start,this.end)}*getItems(n={}){n.boundaries=this,n.ignoreElementEnd=!0;const s=new TreeWalker$1(n);for(const l of s)yield l.item}*getPositions(n={}){n.boundaries=this;const s=new TreeWalker$1(n);yield s.position;for(const l of s)yield l.nextPosition}isIntersecting(n){return this.start.isBefore(n.end)&&this.end.isAfter(n.start)}static _createFromParentsAndOffsets(n,s,l,c){return new this(new Position$1(n,s),new Position$1(l,c))}static _createFromPositionAndShift(n,s){const l=n,c=n.getShiftedBy(s);return s>0?new this(l,c):new this(c,l)}static _createIn(n){return this._createFromParentsAndOffsets(n,0,n,n.childCount)}static _createOn(n){const s=n.is("$textProxy")?n.offsetSize:1;return this._createFromPositionAndShift(Position$1._createBefore(n),s)}};Range$1.prototype.is=function(o){return o==="range"||o==="view:range"};function enlargeTrimSkip(o){return!!(o.item.is("attributeElement")||o.item.is("uiElement"))}let Selection$1=class _r extends EmitterMixin(TypeCheckable$1){constructor(...n){super();M(this,"_ranges");M(this,"_lastRangeBackward");M(this,"_isFake");M(this,"_fakeSelectionLabel");this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",n.length&&this.setTo(...n)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;const n=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?n.end:n.start).clone()}get focus(){if(!this._ranges.length)return null;const n=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?n.start:n.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(const n of this._ranges)yield n.clone()}getFirstRange(){let n=null;for(const s of this._ranges)(!n||s.start.isBefore(n.start))&&(n=s);return n?n.clone():null}getLastRange(){let n=null;for(const s of this._ranges)(!n||s.end.isAfter(n.end))&&(n=s);return n?n.clone():null}getFirstPosition(){const n=this.getFirstRange();return n?n.start.clone():null}getLastPosition(){const n=this.getLastRange();return n?n.end.clone():null}isEqual(n){if(this.isFake!=n.isFake||this.isFake&&this.fakeSelectionLabel!=n.fakeSelectionLabel||this.rangeCount!=n.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(n.anchor)||!this.focus.isEqual(n.focus))return!1;for(const s of this._ranges){let l=!1;for(const c of n._ranges)if(s.isEqual(c)){l=!0;break}if(!l)return!1}return!0}isSimilar(n){if(this.isBackward!=n.isBackward)return!1;const s=count$1(this.getRanges()),l=count$1(n.getRanges());if(s!=l)return!1;if(s==0)return!0;for(let c of this.getRanges()){c=c.getTrimmed();let u=!1;for(let d of n.getRanges())if(d=d.getTrimmed(),c.start.isEqual(d.start)&&c.end.isEqual(d.end)){u=!0;break}if(!u)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...n){let[s,l,c]=n;if(typeof l=="object"&&(c=l,l=void 0),s===null)this._setRanges([]),this._setFakeOptions(c);else if(s instanceof _r||s instanceof DocumentSelection$1)this._setRanges(s.getRanges(),s.isBackward),this._setFakeOptions({fake:s.isFake,label:s.fakeSelectionLabel});else if(s instanceof Range$1)this._setRanges([s],c&&c.backward),this._setFakeOptions(c);else if(s instanceof Position$1)this._setRanges([new Range$1(s)]),this._setFakeOptions(c);else if(s instanceof Node$2){const u=!!c&&!!c.backward;let d;if(l===void 0)throw new CKEditorError("view-selection-setto-required-second-parameter",this);l=="in"?d=Range$1._createIn(s):l=="on"?d=Range$1._createOn(s):d=new Range$1(Position$1._createAt(s,l)),this._setRanges([d],u),this._setFakeOptions(c)}else if(isIterable$1(s))this._setRanges(s,c&&c.backward),this._setFakeOptions(c);else throw new CKEditorError("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(n,s){if(this.anchor===null)throw new CKEditorError("view-selection-setfocus-no-ranges",this);const l=Position$1._createAt(n,s);if(l.compareWith(this.focus)=="same")return;const c=this.anchor;this._ranges.pop(),l.compareWith(c)=="before"?this._addRange(new Range$1(l,c),!0):this._addRange(new Range$1(c,l)),this.fire("change")}_setRanges(n,s=!1){n=Array.from(n),this._ranges=[];for(const l of n)this._addRange(l);this._lastRangeBackward=!!s}_setFakeOptions(n={}){this._isFake=!!n.fake,this._fakeSelectionLabel=n.fake&&n.label||""}_addRange(n,s=!1){if(!(n instanceof Range$1))throw new CKEditorError("view-selection-add-range-not-range",this);this._pushRange(n),this._lastRangeBackward=!!s}_pushRange(n){for(const s of this._ranges)if(n.isIntersecting(s))throw new CKEditorError("view-selection-range-intersects",this,{addedRange:n,intersectingRange:s});this._ranges.push(new Range$1(n.start,n.end))}};Selection$1.prototype.is=function(o){return o==="selection"||o==="view:selection"};let DocumentSelection$1=class extends EmitterMixin(TypeCheckable$1){constructor(...n){super();M(this,"_selection");this._selection=new Selection$1,this._selection.delegate("change").to(this),n.length&&this._selection.setTo(...n)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*this._selection.getRanges()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(n){return this._selection.isEqual(n)}isSimilar(n){return this._selection.isSimilar(n)}_setTo(...n){this._selection.setTo(...n)}_setFocus(n,s){this._selection.setFocus(n,s)}};DocumentSelection$1.prototype.is=function(o){return o==="selection"||o=="documentSelection"||o=="view:selection"||o=="view:documentSelection"};class BubblingEventInfo extends EventInfo{constructor(n,s,l){super(n,s);M(this,"startRange");M(this,"_eventPhase");M(this,"_currentTarget");this.startRange=l,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}}const contextsSymbol=Symbol("bubbling contexts");function BubblingEmitterMixin(o){class a extends o{fire(s,...l){try{const c=s instanceof EventInfo?s:new EventInfo(this,s),u=getBubblingContexts(this);if(!u.size)return;if(updateEventInfo(c,"capturing",this),fireListenerFor(u,"$capture",c,...l))return c.return;const d=c.startRange||this.selection.getFirstRange(),h=d?d.getContainedElement():null,f=h?!!getCustomContext(u,h):!1;let p=h||getDeeperRangeParent(d);if(updateEventInfo(c,"atTarget",p),!f){if(fireListenerFor(u,"$text",c,...l))return c.return;updateEventInfo(c,"bubbling",p)}for(;p;){if(p.is("rootElement")){if(fireListenerFor(u,"$root",c,...l))return c.return}else if(p.is("element")&&fireListenerFor(u,p.name,c,...l))return c.return;if(fireListenerFor(u,p,c,...l))return c.return;p=p.parent,updateEventInfo(c,"bubbling",p)}return updateEventInfo(c,"bubbling",this),fireListenerFor(u,"$document",c,...l),c.return}catch(c){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(c,this)}}_addEventListener(s,l,c){const u=toArray$2(c.context||"$document"),d=getBubblingContexts(this);for(const h of u){let f=d.get(h);f||(f=new(EmitterMixin()),d.set(h,f)),this.listenTo(f,s,l,c)}}_removeEventListener(s,l){const c=getBubblingContexts(this);for(const u of c.values())this.stopListening(u,s,l)}}return a}{const o=BubblingEmitterMixin(Object);["fire","_addEventListener","_removeEventListener"].forEach(a=>{BubblingEmitterMixin[a]=o.prototype[a]})}function updateEventInfo(o,a,n){o instanceof BubblingEventInfo&&(o._eventPhase=a,o._currentTarget=n)}function fireListenerFor(o,a,n,...s){const l=typeof a=="string"?o.get(a):getCustomContext(o,a);return l?(l.fire(n,...s),n.stop.called):!1}function getCustomContext(o,a){for(const[n,s]of o)if(typeof n=="function"&&n(a))return s;return null}function getBubblingContexts(o){return o[contextsSymbol]||(o[contextsSymbol]=new Map),o[contextsSymbol]}function getDeeperRangeParent(o){if(!o)return null;const a=o.start.parent,n=o.end.parent,s=a.getPath(),l=n.getPath();return s.length>l.length?a:n}let Document$1=class extends BubblingEmitterMixin(ObservableMixin()){constructor(n){super();M(this,"selection");M(this,"roots");M(this,"stylesProcessor");M(this,"_postFixers",new Set);this.selection=new DocumentSelection$1,this.roots=new Collection({idProperty:"rootName"}),this.stylesProcessor=n,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(n="main"){return this.roots.get(n)}registerPostFixer(n){this._postFixers.add(n)}destroy(){this.roots.forEach(n=>n.destroy()),this.stopListening()}_callPostFixers(n){let s=!1;do for(const l of this._postFixers)if(s=l(n),s)break;while(s)}};const DEFAULT_PRIORITY=10;class AttributeElement extends Element$1{constructor(n,s,l,c){super(n,s,l,c);M(this,"_priority",DEFAULT_PRIORITY);M(this,"_id",null);M(this,"_clonesGroup",null);this.getFillerOffset=getFillerOffset$3}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new CKEditorError("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(n){return this.id!==null||n.id!==null?this.id===n.id:super.isSimilar(n)&&this.priority==n.priority}_clone(n=!1){const s=super._clone(n);return s._priority=this._priority,s._id=this._id,s}_canMergeAttributesFrom(n){return this.id!==null||n.id!==null||this.priority!==n.priority?!1:super._canMergeAttributesFrom(n)}_canSubtractAttributesOf(n){return this.id!==null||n.id!==null||this.priority!==n.priority?!1:super._canSubtractAttributesOf(n)}}M(AttributeElement,"DEFAULT_PRIORITY",DEFAULT_PRIORITY);AttributeElement.prototype.is=function(o,a){return a?a===this.name&&(o==="attributeElement"||o==="view:attributeElement"||o==="element"||o==="view:element"):o==="attributeElement"||o==="view:attributeElement"||o==="element"||o==="view:element"||o==="node"||o==="view:node"};function getFillerOffset$3(){if(nonUiChildrenCount(this))return null;let o=this.parent;for(;o&&o.is("attributeElement");){if(nonUiChildrenCount(o)>1)return null;o=o.parent}return!o||nonUiChildrenCount(o)>1?null:this.childCount}function nonUiChildrenCount(o){return Array.from(o.getChildren()).filter(a=>!a.is("uiElement")).length}class EmptyElement extends Element$1{constructor(a,n,s,l){super(a,n,s,l),this.getFillerOffset=getFillerOffset$2}_insertChild(a,n){if(n&&(n instanceof Node$2||Array.from(n).length>0))throw new CKEditorError("view-emptyelement-cannot-add",[this,n]);return 0}}EmptyElement.prototype.is=function(o,a){return a?a===this.name&&(o==="emptyElement"||o==="view:emptyElement"||o==="element"||o==="view:element"):o==="emptyElement"||o==="view:emptyElement"||o==="element"||o==="view:element"||o==="node"||o==="view:node"};function getFillerOffset$2(){return null}class UIElement extends Element$1{constructor(a,n,s,l){super(a,n,s,l),this.getFillerOffset=getFillerOffset$1}_insertChild(a,n){if(n&&(n instanceof Node$2||Array.from(n).length>0))throw new CKEditorError("view-uielement-cannot-add",[this,n]);return 0}render(a,n){return this.toDomElement(a)}toDomElement(a){const n=a.createElement(this.name);for(const s of this.getAttributeKeys())n.setAttribute(s,this.getAttribute(s));return n}}UIElement.prototype.is=function(o,a){return a?a===this.name&&(o==="uiElement"||o==="view:uiElement"||o==="element"||o==="view:element"):o==="uiElement"||o==="view:uiElement"||o==="element"||o==="view:element"||o==="node"||o==="view:node"};function injectUiElementHandling(o){o.document.on("arrowKey",(a,n)=>jumpOverUiElement(a,n,o.domConverter),{priority:"low"})}function getFillerOffset$1(){return null}function jumpOverUiElement(o,a,n){if(a.keyCode==keyCodes.arrowright){const s=a.domTarget.ownerDocument.defaultView.getSelection(),l=s.rangeCount==1&&s.getRangeAt(0).collapsed;if(l||a.shiftKey){const c=s.focusNode,u=s.focusOffset,d=n.domPositionToView(c,u);if(d===null)return;let h=!1;const f=d.getLastMatchingPosition(p=>(p.item.is("uiElement")&&(h=!0),!!(p.item.is("uiElement")||p.item.is("attributeElement"))));if(h){const p=n.viewPositionToDom(f);l?s.collapse(p.parent,p.offset):s.extend(p.parent,p.offset)}}}}class RawElement extends Element$1{constructor(a,n,s,l){super(a,n,s,l),this.getFillerOffset=getFillerOffset$5}_insertChild(a,n){if(n&&(n instanceof Node$2||Array.from(n).length>0))throw new CKEditorError("view-rawelement-cannot-add",[this,n]);return 0}render(a,n){}}RawElement.prototype.is=function(o,a){return a?a===this.name&&(o==="rawElement"||o==="view:rawElement"||o==="element"||o==="view:element"):o==="rawElement"||o==="view:rawElement"||o===this.name||o==="view:"+this.name||o==="element"||o==="view:element"||o==="node"||o==="view:node"};function getFillerOffset$5(){return null}let DocumentFragment$1=class extends EmitterMixin(TypeCheckable$1){constructor(n,s){super();M(this,"document");M(this,"_children",[]);M(this,"_customProperties",new Map);this.document=n,s&&this._insertChild(0,s)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(n){return this._customProperties.get(n)}*getCustomProperties(){yield*this._customProperties.entries()}_appendChild(n){return this._insertChild(this.childCount,n)}getChild(n){return this._children[n]}getChildIndex(n){return this._children.indexOf(n)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(n,s){this._fireChange("children",this,{index:n});let l=0;const c=normalize$2$1(this.document,s);for(const u of c)u.parent!==null&&u._remove(),u.parent=this,this._children.splice(n,0,u),n++,l++;return l}_removeChildren(n,s=1){this._fireChange("children",this,{index:n});for(let l=n;l<n+s;l++)this._children[l].parent=null;return this._children.splice(n,s)}_fireChange(n,s,l){this.fire(`change:${n}`,s,l)}_setCustomProperty(n,s){this._customProperties.set(n,s)}_removeCustomProperty(n){return this._customProperties.delete(n)}};DocumentFragment$1.prototype.is=function(o){return o==="documentFragment"||o==="view:documentFragment"};function normalize$2$1(o,a){return typeof a=="string"?[new Text$1(o,a)]:(isIterable$1(a)||(a=[a]),Array.from(a).map(n=>typeof n=="string"?new Text$1(o,n):n instanceof TextProxy$1?new Text$1(o,n.data):n))}class DowncastWriter{constructor(a){M(this,"document");M(this,"_cloneGroups",new Map);M(this,"_slotFactory",null);this.document=a}setSelection(...a){this.document.selection._setTo(...a)}setSelectionFocus(a,n){this.document.selection._setFocus(a,n)}createDocumentFragment(a){return new DocumentFragment$1(this.document,a)}createText(a){return new Text$1(this.document,a)}createAttributeElement(a,n,s={}){const l=new AttributeElement(this.document,a,n);return typeof s.priority=="number"&&(l._priority=s.priority),s.id&&(l._id=s.id),s.renderUnsafeAttributes&&l._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),l}createContainerElement(a,n,s={},l={}){let c=null;isPlainObject$1(s)?l=s:c=s;const u=new ContainerElement(this.document,a,n,c);return l.renderUnsafeAttributes&&u._unsafeAttributesToRender.push(...l.renderUnsafeAttributes),u}createEditableElement(a,n,s={}){const l=new EditableElement(this.document,a,n);return s.renderUnsafeAttributes&&l._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),l}createEmptyElement(a,n,s={}){const l=new EmptyElement(this.document,a,n);return s.renderUnsafeAttributes&&l._unsafeAttributesToRender.push(...s.renderUnsafeAttributes),l}createUIElement(a,n,s){const l=new UIElement(this.document,a,n);return s&&(l.render=s),l}createRawElement(a,n,s,l={}){const c=new RawElement(this.document,a,n);return s&&(c.render=s),l.renderUnsafeAttributes&&c._unsafeAttributesToRender.push(...l.renderUnsafeAttributes),c}setAttribute(a,n,s,l){l!==void 0?l._setAttribute(a,n,s):s._setAttribute(a,n)}removeAttribute(a,n,s){s!==void 0?s._removeAttribute(a,n):n._removeAttribute(a)}addClass(a,n){n._addClass(a)}removeClass(a,n){n._removeClass(a)}setStyle(a,n,s){isPlainObject$1(a)&&s===void 0?n._setStyle(a):s._setStyle(a,n)}removeStyle(a,n){n._removeStyle(a)}setCustomProperty(a,n,s){s._setCustomProperty(a,n)}removeCustomProperty(a,n){return n._removeCustomProperty(a)}breakAttributes(a){return a instanceof Position$1?this._breakAttributes(a):this._breakAttributesRange(a)}breakContainer(a){const n=a.parent;if(!n.is("containerElement"))throw new CKEditorError("view-writer-break-non-container-element",this.document);if(!n.parent)throw new CKEditorError("view-writer-break-root",this.document);if(a.isAtStart)return Position$1._createBefore(n);if(!a.isAtEnd){const s=n._clone(!1);this.insert(Position$1._createAfter(n),s);const l=new Range$1(a,Position$1._createAt(n,"end")),c=new Position$1(s,0);this.move(l,c)}return Position$1._createAfter(n)}mergeAttributes(a){const n=a.offset,s=a.parent;if(s.is("$text"))return a;if(s.is("attributeElement")&&s.childCount===0){const u=s.parent,d=s.index;return s._remove(),this._removeFromClonedElementsGroup(s),this.mergeAttributes(new Position$1(u,d))}const l=s.getChild(n-1),c=s.getChild(n);if(!l||!c)return a;if(l.is("$text")&&c.is("$text"))return mergeTextNodes(l,c);if(l.is("attributeElement")&&c.is("attributeElement")&&l.isSimilar(c)){const u=l.childCount;return l._appendChild(c.getChildren()),c._remove(),this._removeFromClonedElementsGroup(c),this.mergeAttributes(new Position$1(l,u))}return a}mergeContainers(a){const n=a.nodeBefore,s=a.nodeAfter;if(!n||!s||!n.is("containerElement")||!s.is("containerElement"))throw new CKEditorError("view-writer-merge-containers-invalid-position",this.document);const l=n.getChild(n.childCount-1),c=l instanceof Text$1?Position$1._createAt(l,"end"):Position$1._createAt(n,"end");return this.move(Range$1._createIn(s),Position$1._createAt(n,"end")),this.remove(Range$1._createOn(s)),c}insert(a,n){n=isIterable$1(n)?[...n]:[n],validateNodesToInsert(n,this.document);const s=n.reduce((u,d)=>{const h=u[u.length-1],f=!d.is("uiElement");return!h||h.breakAttributes!=f?u.push({breakAttributes:f,nodes:[d]}):h.nodes.push(d),u},[]);let l=null,c=a;for(const{nodes:u,breakAttributes:d}of s){const h=this._insertNodes(c,u,d);l||(l=h.start),c=h.end}return l?new Range$1(l,c):new Range$1(a)}remove(a){const n=a instanceof Range$1?a:Range$1._createOn(a);if(validateRangeContainer(n,this.document),n.isCollapsed)return new DocumentFragment$1(this.document);const{start:s,end:l}=this._breakAttributesRange(n,!0),c=s.parent,u=l.offset-s.offset,d=c._removeChildren(s.offset,u);for(const f of d)this._removeFromClonedElementsGroup(f);const h=this.mergeAttributes(s);return n.start=h,n.end=h.clone(),new DocumentFragment$1(this.document,d)}clear(a,n){validateRangeContainer(a,this.document);const s=a.getWalker({direction:"backward",ignoreElementEnd:!0});for(const l of s){const c=l.item;let u;if(c.is("element")&&n.isSimilar(c))u=Range$1._createOn(c);else if(!l.nextPosition.isAfter(a.start)&&c.is("$textProxy")){const d=c.getAncestors().find(h=>h.is("element")&&n.isSimilar(h));d&&(u=Range$1._createIn(d))}u&&(u.end.isAfter(a.end)&&(u.end=a.end),u.start.isBefore(a.start)&&(u.start=a.start),this.remove(u))}}move(a,n){let s;if(n.isAfter(a.end)){n=this._breakAttributes(n,!0);const l=n.parent,c=l.childCount;a=this._breakAttributesRange(a,!0),s=this.remove(a),n.offset+=l.childCount-c}else s=this.remove(a);return this.insert(n,s)}wrap(a,n){if(!(n instanceof AttributeElement))throw new CKEditorError("view-writer-wrap-invalid-attribute",this.document);if(validateRangeContainer(a,this.document),a.isCollapsed){let s=a.start;s.parent.is("element")&&!_hasNonUiChildren(s.parent)&&(s=s.getLastMatchingPosition(c=>c.item.is("uiElement"))),s=this._wrapPosition(s,n);const l=this.document.selection;return l.isCollapsed&&l.getFirstPosition().isEqual(a.start)&&this.setSelection(s),new Range$1(s)}else return this._wrapRange(a,n)}unwrap(a,n){if(!(n instanceof AttributeElement))throw new CKEditorError("view-writer-unwrap-invalid-attribute",this.document);if(validateRangeContainer(a,this.document),a.isCollapsed)return a;const{start:s,end:l}=this._breakAttributesRange(a,!0),c=s.parent,u=this._unwrapChildren(c,s.offset,l.offset,n),d=this.mergeAttributes(u.start);d.isEqual(u.start)||u.end.offset--;const h=this.mergeAttributes(u.end);return new Range$1(d,h)}rename(a,n){const s=new ContainerElement(this.document,a,n.getAttributes());return this.insert(Position$1._createAfter(n),s),this.move(Range$1._createIn(n),Position$1._createAt(s,0)),this.remove(Range$1._createOn(n)),s}clearClonedElementsGroup(a){this._cloneGroups.delete(a)}createPositionAt(a,n){return Position$1._createAt(a,n)}createPositionAfter(a){return Position$1._createAfter(a)}createPositionBefore(a){return Position$1._createBefore(a)}createRange(a,n){return new Range$1(a,n)}createRangeOn(a){return Range$1._createOn(a)}createRangeIn(a){return Range$1._createIn(a)}createSelection(...a){return new Selection$1(...a)}createSlot(a="children"){if(!this._slotFactory)throw new CKEditorError("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,a)}_registerSlotFactory(a){this._slotFactory=a}_clearSlotFactory(){this._slotFactory=null}_insertNodes(a,n,s){let l;if(s?l=getParentContainer(a):l=a.parent.is("$text")?a.parent.parent:a.parent,!l)throw new CKEditorError("view-writer-invalid-position-container",this.document);let c;s?c=this._breakAttributes(a,!0):c=a.parent.is("$text")?breakTextNode(a):a;const u=l._insertChild(c.offset,n);for(const p of n)this._addToClonedElementsGroup(p);const d=c.getShiftedBy(u),h=this.mergeAttributes(c);h.isEqual(c)||d.offset--;const f=this.mergeAttributes(d);return new Range$1(h,f)}_wrapChildren(a,n,s,l){let c=n;const u=[];for(;c<s;){const h=a.getChild(c),f=h.is("$text"),p=h.is("attributeElement");if(p&&h._canMergeAttributesFrom(l))h._mergeAttributesFrom(l),u.push(new Position$1(a,c));else if(f||!p||shouldABeOutsideB(l,h)){const g=l._clone();h._remove(),g._appendChild(h),a._insertChild(c,g),this._addToClonedElementsGroup(g),u.push(new Position$1(a,c))}else this._wrapChildren(h,0,h.childCount,l);c++}let d=0;for(const h of u){if(h.offset-=d,h.offset==n)continue;this.mergeAttributes(h).isEqual(h)||(d++,s--)}return Range$1._createFromParentsAndOffsets(a,n,a,s)}_unwrapChildren(a,n,s,l){let c=n;const u=[];for(;c<s;){const h=a.getChild(c);if(!h.is("attributeElement")){c++;continue}if(h.isSimilar(l)){const f=h.getChildren(),p=h.childCount;h._remove(),a._insertChild(c,f),this._removeFromClonedElementsGroup(h),u.push(new Position$1(a,c),new Position$1(a,c+p)),c+=p,s+=p-1;continue}if(h._canSubtractAttributesOf(l)){h._subtractAttributesOf(l),u.push(new Position$1(a,c),new Position$1(a,c+1)),c++;continue}this._unwrapChildren(h,0,h.childCount,l),c++}let d=0;for(const h of u){if(h.offset-=d,h.offset==n||h.offset==s)continue;this.mergeAttributes(h).isEqual(h)||(d++,s--)}return Range$1._createFromParentsAndOffsets(a,n,a,s)}_wrapRange(a,n){const{start:s,end:l}=this._breakAttributesRange(a,!0),c=s.parent,u=this._wrapChildren(c,s.offset,l.offset,n),d=this.mergeAttributes(u.start);d.isEqual(u.start)||u.end.offset--;const h=this.mergeAttributes(u.end);return new Range$1(d,h)}_wrapPosition(a,n){if(n.isSimilar(a.parent))return movePositionToTextNode(a.clone());a.parent.is("$text")&&(a=breakTextNode(a));const s=this.createAttributeElement("_wrapPosition-fake-element");s._priority=Number.POSITIVE_INFINITY,s.isSimilar=()=>!1,a.parent._insertChild(a.offset,s);const l=new Range$1(a,a.getShiftedBy(1));this.wrap(l,n);const c=new Position$1(s.parent,s.index);s._remove();const u=c.nodeBefore,d=c.nodeAfter;return u&&u.is("view:$text")&&d&&d.is("view:$text")?mergeTextNodes(u,d):movePositionToTextNode(c)}_breakAttributesRange(a,n=!1){const s=a.start,l=a.end;if(validateRangeContainer(a,this.document),a.isCollapsed){const h=this._breakAttributes(a.start,n);return new Range$1(h,h)}const c=this._breakAttributes(l,n),u=c.parent.childCount,d=this._breakAttributes(s,n);return c.offset+=c.parent.childCount-u,new Range$1(d,c)}_breakAttributes(a,n=!1){const s=a.offset,l=a.parent;if(a.parent.is("emptyElement"))throw new CKEditorError("view-writer-cannot-break-empty-element",this.document);if(a.parent.is("uiElement"))throw new CKEditorError("view-writer-cannot-break-ui-element",this.document);if(a.parent.is("rawElement"))throw new CKEditorError("view-writer-cannot-break-raw-element",this.document);if(!n&&l.is("$text")&&isContainerOrFragment(l.parent)||isContainerOrFragment(l))return a.clone();if(l.is("$text"))return this._breakAttributes(breakTextNode(a),n);const c=l.childCount;if(s==c){const u=new Position$1(l.parent,l.index+1);return this._breakAttributes(u,n)}else if(s===0){const u=new Position$1(l.parent,l.index);return this._breakAttributes(u,n)}else{const u=l.index+1,d=l._clone();l.parent._insertChild(u,d),this._addToClonedElementsGroup(d);const h=l.childCount-s,f=l._removeChildren(s,h);d._appendChild(f);const p=new Position$1(l.parent,u);return this._breakAttributes(p,n)}}_addToClonedElementsGroup(a){if(!a.root.is("rootElement"))return;if(a.is("element"))for(const l of a.getChildren())this._addToClonedElementsGroup(l);const n=a.id;if(!n)return;let s=this._cloneGroups.get(n);s||(s=new Set,this._cloneGroups.set(n,s)),s.add(a),a._clonesGroup=s}_removeFromClonedElementsGroup(a){if(a.is("element"))for(const l of a.getChildren())this._removeFromClonedElementsGroup(l);const n=a.id;if(!n)return;const s=this._cloneGroups.get(n);s&&s.delete(a)}}function _hasNonUiChildren(o){return Array.from(o.getChildren()).some(a=>!a.is("uiElement"))}function getParentContainer(o){let a=o.parent;for(;!isContainerOrFragment(a);){if(!a)return;a=a.parent}return a}function shouldABeOutsideB(o,a){return o.priority<a.priority?!0:o.priority>a.priority?!1:o.getIdentity()<a.getIdentity()}function movePositionToTextNode(o){const a=o.nodeBefore;if(a&&a.is("$text"))return new Position$1(a,a.data.length);const n=o.nodeAfter;return n&&n.is("$text")?new Position$1(n,0):o}function breakTextNode(o){if(o.offset==o.parent.data.length)return new Position$1(o.parent.parent,o.parent.index+1);if(o.offset===0)return new Position$1(o.parent.parent,o.parent.index);const a=o.parent.data.slice(o.offset);return o.parent._data=o.parent.data.slice(0,o.offset),o.parent.parent._insertChild(o.parent.index+1,new Text$1(o.root.document,a)),new Position$1(o.parent.parent,o.parent.index+1)}function mergeTextNodes(o,a){const n=o.data.length;return o._data+=a.data,a._remove(),new Position$1(o,n)}const validNodesToInsert=[Text$1,AttributeElement,ContainerElement,EmptyElement,RawElement,UIElement];function validateNodesToInsert(o,a){for(const n of o){if(!validNodesToInsert.some(s=>n instanceof s))throw new CKEditorError("view-writer-insert-invalid-node-type",a);n.is("$text")||validateNodesToInsert(n.getChildren(),a)}}function isContainerOrFragment(o){return o&&(o.is("containerElement")||o.is("documentFragment"))}function validateRangeContainer(o,a){const n=getParentContainer(o.start),s=getParentContainer(o.end);if(!n||!s||n!==s)throw new CKEditorError("view-writer-invalid-range-container",a)}const NBSP_FILLER=o=>o.createTextNode(" "),MARKED_NBSP_FILLER=o=>{const a=o.createElement("span");return a.dataset.ckeFiller="true",a.innerText=" ",a},BR_FILLER=o=>{const a=o.createElement("br");return a.dataset.ckeFiller="true",a},INLINE_FILLER_LENGTH=7,INLINE_FILLER="⁠".repeat(INLINE_FILLER_LENGTH);function startsWithFiller(o){return typeof o=="string"?o.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER:isText(o)&&o.data.substr(0,INLINE_FILLER_LENGTH)===INLINE_FILLER}function isInlineFiller(o){return o.data.length==INLINE_FILLER_LENGTH&&startsWithFiller(o)}function getDataWithoutFiller(o){const a=typeof o=="string"?o:o.data;return startsWithFiller(o)?a.slice(INLINE_FILLER_LENGTH):a}function injectQuirksHandling(o){o.document.on("arrowKey",jumpOverInlineFiller,{priority:"low"})}function jumpOverInlineFiller(o,a){if(a.keyCode==keyCodes.arrowleft){const n=a.domTarget.ownerDocument.defaultView.getSelection();if(n.rangeCount==1&&n.getRangeAt(0).collapsed){const s=n.getRangeAt(0).startContainer,l=n.getRangeAt(0).startOffset;startsWithFiller(s)&&l<=INLINE_FILLER_LENGTH&&n.collapse(s,0)}}}let Renderer$1=class extends ObservableMixin(){constructor(n,s){super();M(this,"domDocuments",new Set);M(this,"domConverter");M(this,"markedAttributes",new Set);M(this,"markedChildren",new Set);M(this,"markedTexts",new Set);M(this,"selection");M(this,"_inlineFiller",null);M(this,"_fakeSelectionContainer",null);this.domConverter=n,this.selection=s,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),env$1.isBlink&&!env$1.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(n,s){if(n==="text")this.domConverter.mapViewToDom(s.parent)&&this.markedTexts.add(s);else{if(!this.domConverter.mapViewToDom(s))return;if(n==="attributes")this.markedAttributes.add(s);else if(n==="children")this.markedChildren.add(s);else throw new CKEditorError("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!env$1.isAndroid)return;let n=null;const s=env$1.isBlink&&!env$1.isAndroid?!this.isSelecting:!0;for(const l of this.markedChildren)this._updateChildrenMappings(l);s?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?n=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(n=this.selection.getFirstPosition(),this.markedChildren.add(n.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(n=this.domConverter.domPositionToView(this._inlineFiller),n&&n.parent.is("$text")&&(n=Position$1._createBefore(n.parent)));for(const l of this.markedAttributes)this._updateAttrs(l);for(const l of this.markedChildren)this._updateChildren(l,{inlineFillerPosition:n});for(const l of this.markedTexts)!this.markedChildren.has(l.parent)&&this.domConverter.mapViewToDom(l.parent)&&this._updateText(l,{inlineFillerPosition:n});if(s)if(n){const l=this.domConverter.viewPositionToDom(n),c=l.parent.ownerDocument;startsWithFiller(l.parent)?this._inlineFiller=l.parent:this._inlineFiller=addInlineFiller(c,l.parent,l.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(n){const s=this.domConverter.mapViewToDom(n);if(!s)return;const l=Array.from(s.childNodes),c=Array.from(this.domConverter.viewChildrenToDom(n,{withChildren:!1})),u=this._diffNodeLists(l,c),d=this._findUpdateActions(u,l,c,areSimilarElements);if(d.indexOf("update")!==-1){const h={equal:0,insert:0,delete:0};for(const f of d)if(f==="update"){const p=h.equal+h.insert,g=h.equal+h.delete,v=n.getChild(p);v&&!v.is("uiElement")&&!v.is("rawElement")&&this._updateElementMappings(v,l[g]),remove$3(c[p]),h.equal++}else h[f]++}}_updateElementMappings(n,s){this.domConverter.unbindDomElement(s),this.domConverter.bindElements(s,n),this.markedChildren.add(n),this.markedAttributes.add(n)}_getInlineFillerPosition(){const n=this.selection.getFirstPosition();return n.parent.is("$text")?Position$1._createBefore(n.parent):n}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),s=this.domConverter.viewPositionToDom(n);return!!(s&&isText(s.parent)&&startsWithFiller(s.parent))}_removeInlineFiller(){const n=this._inlineFiller;if(!startsWithFiller(n))throw new CKEditorError("view-renderer-filler-was-lost",this);isInlineFiller(n)?n.remove():n.data=n.data.substr(INLINE_FILLER_LENGTH),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;const n=this.selection.getFirstPosition(),s=n.parent,l=n.offset;if(!this.domConverter.mapViewToDom(s.root)||!s.is("element")||!isEditable(s))return!1;const c=n.nodeBefore,u=n.nodeAfter;return!(c instanceof Text$1||u instanceof Text$1||l===s.getFillerOffset()&&(!c||!c.is("element","br"))||env$1.isAndroid&&(c||u))}_updateText(n,s){const l=this.domConverter.findCorrespondingDomText(n);let u=this.domConverter.viewToDom(n).data;const d=s.inlineFillerPosition;d&&d.parent==n.parent&&d.offset==n.index&&(u=INLINE_FILLER+u),this._updateTextNode(l,u)}_updateAttrs(n){const s=this.domConverter.mapViewToDom(n);if(s){for(const l of Array.from(s.attributes)){const c=l.name;n.hasAttribute(c)||this.domConverter.removeDomElementAttribute(s,c)}for(const l of n.getAttributeKeys())this.domConverter.setDomElementAttribute(s,l,n.getAttribute(l),n)}}_updateChildren(n,s){const l=this.domConverter.mapViewToDom(n);if(!l)return;if(env$1.isAndroid){let v=null;for(const b of Array.from(l.childNodes)){if(v&&isText(v)&&isText(b)){l.normalize();break}v=b}}const c=s.inlineFillerPosition,u=l.childNodes,d=Array.from(this.domConverter.viewChildrenToDom(n,{bind:!0}));c&&c.parent===n&&addInlineFiller(l.ownerDocument,d,c.offset);const h=this._diffNodeLists(u,d),f=this._findUpdateActions(h,u,d,areTextNodes);let p=0;const g=new Set;for(const v of f)v==="delete"?(g.add(u[p]),remove$3(u[p])):(v==="equal"||v==="update")&&p++;p=0;for(const v of f)v==="insert"?(insertAt(l,p,d[p]),p++):v==="update"?(this._updateTextNode(u[p],d[p].data),p++):v==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(d[p])),p++);for(const v of g)v.parentNode||this.domConverter.unbindDomElement(v)}_diffNodeLists(n,s){return n=filterOutFakeSelectionContainer(n,this._fakeSelectionContainer),diff(n,s,sameNodes$1.bind(null,this.domConverter))}_findUpdateActions(n,s,l,c){if(n.indexOf("insert")===-1||n.indexOf("delete")===-1)return n;let u=[],d=[],h=[];const f={equal:0,insert:0,delete:0};for(const p of n)p==="insert"?h.push(l[f.equal+f.insert]):p==="delete"?d.push(s[f.equal+f.delete]):(u=u.concat(diff(d,h,c).map(g=>g==="equal"?"update":g)),u.push("equal"),d=[],h=[]),f[p]++;return u.concat(diff(d,h,c).map(p=>p==="equal"?"update":p))}_updateTextNode(n,s){const l=n.data;l!=s&&(env$1.isAndroid&&this.isComposing&&l.replace(/\u00A0/g," ")==s.replace(/\u00A0/g," ")||this._updateTextNodeInternal(n,s))}_updateTextNodeInternal(n,s){const l=fastDiff(n.data,s);for(const c of l)c.type==="insert"?n.insertData(c.index,c.values.join("")):n.deleteData(c.index,c.howMany)}_markDescendantTextToSync(n){if(n){if(n.is("$text"))this.markedTexts.add(n);else if(n.is("element"))for(const s of n.getChildren())this._markDescendantTextToSync(s)}}_updateSelection(){if(env$1.isBlink&&!env$1.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}const n=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!n||(this.selection.isFake?this._updateFakeSelection(n):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(n)):this.isComposing&&env$1.isAndroid||this._updateDomSelection(n))}_updateFakeSelection(n){const s=n.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=createFakeSelectionContainer(s));const l=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(l,this.selection),!this._fakeSelectionNeedsUpdate(n))return;(!l.parentElement||l.parentElement!=n)&&n.appendChild(l),l.textContent=this.selection.fakeSelectionLabel||" ";const c=s.getSelection(),u=s.createRange();c.removeAllRanges(),u.selectNodeContents(l),c.addRange(u)}_updateDomSelection(n){const s=n.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(s))return;const l=this.domConverter.viewPositionToDom(this.selection.anchor),c=this.domConverter.viewPositionToDom(this.selection.focus);s.setBaseAndExtent(l.parent,l.offset,c.parent,c.offset),env$1.isGecko&&fixGeckoSelectionAfterBr(c,s)}_domSelectionNeedsUpdate(n){if(!this.domConverter.isDomSelectionCorrect(n))return!0;const s=n&&this.domConverter.domSelectionToView(n);return!(s&&this.selection.isEqual(s)||!this.selection.isCollapsed&&this.selection.isSimilar(s))}_fakeSelectionNeedsUpdate(n){const s=this._fakeSelectionContainer,l=n.ownerDocument.getSelection();return!s||s.parentElement!==n||l.anchorNode!==s&&!s.contains(l.anchorNode)?!0:s.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(const n of this.domDocuments){const s=n.getSelection();if(s.rangeCount){const l=n.activeElement,c=this.domConverter.mapDomToView(l);l&&c&&s.removeAllRanges()}}}_removeFakeSelection(){const n=this._fakeSelectionContainer;n&&n.remove()}_updateFocus(){if(this.isFocused){const n=this.selection.editableElement;n&&this.domConverter.focus(n)}}};function isEditable(o){if(o.getAttribute("contenteditable")=="false")return!1;const a=o.findAncestor(n=>n.hasAttribute("contenteditable"));return!a||a.getAttribute("contenteditable")=="true"}function addInlineFiller(o,a,n){const s=a instanceof Array?a:a.childNodes,l=s[n];if(isText(l))return l.data=INLINE_FILLER+l.data,l;{const c=o.createTextNode(INLINE_FILLER);return Array.isArray(a)?s.splice(n,0,c):insertAt(a,n,c),c}}function areSimilarElements(o,a){return isNode(o)&&isNode(a)&&!isText(o)&&!isText(a)&&!isComment(o)&&!isComment(a)&&o.tagName.toLowerCase()===a.tagName.toLowerCase()}function areTextNodes(o,a){return isNode(o)&&isNode(a)&&isText(o)&&isText(a)}function sameNodes$1(o,a,n){return a===n?!0:isText(a)&&isText(n)?a.data===n.data:!!(o.isBlockFiller(a)&&o.isBlockFiller(n))}function fixGeckoSelectionAfterBr(o,a){let n=o.parent,s=o.offset;if(isText(n)&&isInlineFiller(n)&&(s=indexOf$2(n)+1,n=n.parentNode),n.nodeType!=Node.ELEMENT_NODE||s!=n.childNodes.length-1)return;const l=n.childNodes[s];l&&l.tagName=="BR"&&a.addRange(a.getRangeAt(0))}function filterOutFakeSelectionContainer(o,a){const n=Array.from(o);return n.length==0||!a||n[n.length-1]==a&&n.pop(),n}function createFakeSelectionContainer(o){const a=o.createElement("div");return a.className="ck-fake-selection-container",Object.assign(a.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),a.textContent=" ",a}const BR_FILLER_REF=BR_FILLER(global$1.document),NBSP_FILLER_REF=NBSP_FILLER(global$1.document),MARKED_NBSP_FILLER_REF=MARKED_NBSP_FILLER(global$1.document),UNSAFE_ATTRIBUTE_NAME_PREFIX="data-ck-unsafe-attribute-",UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE="data-ck-unsafe-element";class DomConverter{constructor(a,{blockFillerMode:n,renderingMode:s="editing"}={}){M(this,"document");M(this,"renderingMode");M(this,"blockFillerMode");M(this,"preElements");M(this,"blockElements");M(this,"inlineObjectElements");M(this,"unsafeElements");M(this,"_domDocument");M(this,"_domToViewMapping",new WeakMap);M(this,"_viewToDomMapping",new WeakMap);M(this,"_fakeSelectionMapping",new WeakMap);M(this,"_rawContentElementMatcher",new Matcher);M(this,"_inlineObjectElementMatcher",new Matcher);M(this,"_elementsWithTemporaryCustomProperties",new Set);this.document=a,this.renderingMode=s,this.blockFillerMode=n||(s==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?global$1.document:global$1.document.implementation.createHTMLDocument("")}bindFakeSelection(a,n){this._fakeSelectionMapping.set(a,new Selection$1(n))}fakeSelectionToView(a){return this._fakeSelectionMapping.get(a)}bindElements(a,n){this._domToViewMapping.set(a,n),this._viewToDomMapping.set(n,a)}unbindDomElement(a){const n=this._domToViewMapping.get(a);if(n){this._domToViewMapping.delete(a),this._viewToDomMapping.delete(n);for(const s of a.children)this.unbindDomElement(s)}}bindDocumentFragments(a,n){this._domToViewMapping.set(a,n),this._viewToDomMapping.set(n,a)}shouldRenderAttribute(a,n,s){return this.renderingMode==="data"?!0:(a=a.toLowerCase(),a.startsWith("on")||a==="srcdoc"&&n.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:s==="img"&&(a==="src"||a==="srcset")||s==="source"&&a==="srcset"?!0:!n.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(a,n){if(this.renderingMode==="data"){a.innerHTML=n;return}const s=new DOMParser().parseFromString(n,"text/html"),l=s.createDocumentFragment(),c=s.body.childNodes;for(;c.length>0;)l.appendChild(c[0]);const u=s.createTreeWalker(l,NodeFilter.SHOW_ELEMENT),d=[];let h;for(;h=u.nextNode();)d.push(h);for(const f of d){for(const g of f.getAttributeNames())this.setDomElementAttribute(f,g,f.getAttribute(g));const p=f.tagName.toLowerCase();this._shouldRenameElement(p)&&(_logUnsafeElement(p),f.replaceWith(this._createReplacementDomElement(p,f)))}for(;a.firstChild;)a.firstChild.remove();a.append(l)}viewToDom(a,n={}){if(a.is("$text")){const s=this._processDataFromViewText(a);return this._domDocument.createTextNode(s)}else{const s=a;if(this.mapViewToDom(s))if(s.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(s);else return this.mapViewToDom(s);let l;if(s.is("documentFragment"))l=this._domDocument.createDocumentFragment(),n.bind&&this.bindDocumentFragments(l,s);else{if(s.is("uiElement"))return s.name==="$comment"?l=this._domDocument.createComment(s.getCustomProperty("$rawContent")):l=s.render(this._domDocument,this),n.bind&&this.bindElements(l,s),l;this._shouldRenameElement(s.name)?(_logUnsafeElement(s.name),l=this._createReplacementDomElement(s.name)):s.hasAttribute("xmlns")?l=this._domDocument.createElementNS(s.getAttribute("xmlns"),s.name):l=this._domDocument.createElement(s.name),s.is("rawElement")&&s.render(l,this),n.bind&&this.bindElements(l,s);for(const c of s.getAttributeKeys())this.setDomElementAttribute(l,c,s.getAttribute(c),s)}if(n.withChildren!==!1)for(const c of this.viewChildrenToDom(s,n))l instanceof HTMLTemplateElement?l.content.appendChild(c):l.appendChild(c);return l}}setDomElementAttribute(a,n,s,l){const c=this.shouldRenderAttribute(n,s,a.tagName.toLowerCase())||l&&l.shouldRenderUnsafeAttribute(n);if(c||logWarning("domconverter-unsafe-attribute-detected",{domElement:a,key:n,value:s}),!isValidAttributeName(n)){logWarning("domconverter-invalid-attribute-detected",{domElement:a,key:n,value:s});return}a.hasAttribute(n)&&!c?a.removeAttribute(n):a.hasAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+n)&&c&&a.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+n),a.setAttribute(c?n:UNSAFE_ATTRIBUTE_NAME_PREFIX+n,s)}removeDomElementAttribute(a,n){n!=UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE&&(a.removeAttribute(n),a.removeAttribute(UNSAFE_ATTRIBUTE_NAME_PREFIX+n))}*viewChildrenToDom(a,n={}){const s=a.getFillerOffset&&a.getFillerOffset();let l=0;for(const c of a.getChildren()){s===l&&(yield this._getBlockFiller());const u=c.is("element")&&!!c.getCustomProperty("dataPipeline:transparentRendering")&&!first(c.getAttributes());if(u&&this.renderingMode=="data")if(c.is("rawElement")){const d=this._domDocument.createElement(c.name);c.render(d,this),yield*[...d.childNodes]}else yield*this.viewChildrenToDom(c,n);else u&&logWarning("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:c}),yield this.viewToDom(c,n);l++}s===l&&(yield this._getBlockFiller())}viewRangeToDom(a){const n=this.viewPositionToDom(a.start),s=this.viewPositionToDom(a.end),l=this._domDocument.createRange();return l.setStart(n.parent,n.offset),l.setEnd(s.parent,s.offset),l}viewPositionToDom(a){const n=a.parent;if(n.is("$text")){const s=this.findCorrespondingDomText(n);if(!s)return null;let l=a.offset;return startsWithFiller(s)&&(l+=INLINE_FILLER_LENGTH),{parent:s,offset:l}}else{let s,l,c;if(a.offset===0){if(s=this.mapViewToDom(n),!s)return null;c=s.childNodes[0]}else{const d=a.nodeBefore;if(l=d.is("$text")?this.findCorrespondingDomText(d):this.mapViewToDom(d),!l)return null;s=l.parentNode,c=l.nextSibling}if(isText(c)&&startsWithFiller(c))return{parent:c,offset:INLINE_FILLER_LENGTH};const u=l?indexOf$2(l)+1:0;return{parent:s,offset:u}}}domToView(a,n={}){const s=[],l=this._domToView(a,n,s),c=l.next().value;return!c||(l.next(),this._processDomInlineNodes(null,s,n),this.blockFillerMode=="br"&&isViewBrFiller(c))||c.is("$text")&&c.data.length==0?null:c}*domChildrenToView(a,n={},s=[]){let l=[];a instanceof HTMLTemplateElement?l=[...a.content.childNodes]:l=[...a.childNodes];for(let c=0;c<l.length;c++){const u=l[c],d=this._domToView(u,n,s),h=d.next().value;h!==null&&(this._isBlockViewElement(h)&&this._processDomInlineNodes(a,s,n),this.blockFillerMode=="br"&&isViewBrFiller(h)||(yield h),d.next())}this._processDomInlineNodes(a,s,n)}domSelectionToView(a){if(isGeckoRestrictedDomSelection(a))return new Selection$1([]);if(a.rangeCount===1){let l=a.getRangeAt(0).startContainer;isText(l)&&(l=l.parentNode);const c=this.fakeSelectionToView(l);if(c)return c}const n=this.isDomSelectionBackward(a),s=[];for(let l=0;l<a.rangeCount;l++){const c=a.getRangeAt(l),u=this.domRangeToView(c);u&&s.push(u)}return new Selection$1(s,{backward:n})}domRangeToView(a){const n=this.domPositionToView(a.startContainer,a.startOffset),s=this.domPositionToView(a.endContainer,a.endOffset);return n&&s?new Range$1(n,s):null}domPositionToView(a,n=0){if(this.isBlockFiller(a))return this.domPositionToView(a.parentNode,indexOf$2(a));const s=this.mapDomToView(a);if(s&&(s.is("uiElement")||s.is("rawElement")))return Position$1._createBefore(s);if(isText(a)){if(isInlineFiller(a))return this.domPositionToView(a.parentNode,indexOf$2(a));const l=this.findCorrespondingViewText(a);let c=n;return l?(startsWithFiller(a)&&(c-=INLINE_FILLER_LENGTH,c=c<0?0:c),new Position$1(l,c)):null}else{if(n===0){const l=this.mapDomToView(a);if(l)return new Position$1(l,0)}else{const l=a.childNodes[n-1];if(isText(l)&&isInlineFiller(l)||l&&this.isBlockFiller(l))return this.domPositionToView(l.parentNode,indexOf$2(l));const c=isText(l)?this.findCorrespondingViewText(l):this.mapDomToView(l);if(c&&c.parent)return new Position$1(c.parent,c.index+1)}return null}}mapDomToView(a){return this.getHostViewElement(a)||this._domToViewMapping.get(a)}findCorrespondingViewText(a){if(isInlineFiller(a))return null;const n=this.getHostViewElement(a);if(n)return n;const s=a.previousSibling;if(s){if(!this.isElement(s))return null;const l=this.mapDomToView(s);if(l){const c=l.nextSibling;return c instanceof Text$1?c:null}}else{const l=this.mapDomToView(a.parentNode);if(l){const c=l.getChild(0);return c instanceof Text$1?c:null}}return null}mapViewToDom(a){return this._viewToDomMapping.get(a)}findCorrespondingDomText(a){const n=a.previousSibling;return n&&this.mapViewToDom(n)?this.mapViewToDom(n).nextSibling:!n&&a.parent&&this.mapViewToDom(a.parent)?this.mapViewToDom(a.parent).childNodes[0]:null}focus(a){const n=this.mapViewToDom(a);if(n&&n.ownerDocument.activeElement!==n){const{scrollX:s,scrollY:l}=global$1.window,c=[];forEachDomElementAncestor(n,u=>{const{scrollLeft:d,scrollTop:h}=u;c.push([d,h])}),n.focus(),forEachDomElementAncestor(n,u=>{const[d,h]=c.shift();u.scrollLeft=d,u.scrollTop=h}),global$1.window.scrollTo(s,l)}}_clearDomSelection(){const a=this.mapViewToDom(this.document.selection.editableElement);if(!a)return;const n=a.ownerDocument.defaultView.getSelection(),s=this.domSelectionToView(n);s&&s.rangeCount>0&&n.removeAllRanges()}isElement(a){return a&&a.nodeType==Node.ELEMENT_NODE}isDocumentFragment(a){return a&&a.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(a){return this.blockFillerMode=="br"?a.isEqualNode(BR_FILLER_REF):isOnlyBrInBlock(a,this.blockElements)?!0:a.isEqualNode(MARKED_NBSP_FILLER_REF)||isNbspBlockFiller(a,this.blockElements)}isDomSelectionBackward(a){if(a.isCollapsed)return!1;const n=this._domDocument.createRange();try{n.setStart(a.anchorNode,a.anchorOffset),n.setEnd(a.focusNode,a.focusOffset)}catch{return!1}const s=n.collapsed;return n.detach(),s}getHostViewElement(a){const n=getAncestors(a);for(n.pop();n.length;){const s=n.pop(),l=this._domToViewMapping.get(s);if(l&&(l.is("uiElement")||l.is("rawElement")))return l}return null}isDomSelectionCorrect(a){return this._isDomSelectionPositionCorrect(a.anchorNode,a.anchorOffset)&&this._isDomSelectionPositionCorrect(a.focusNode,a.focusOffset)}registerRawContentMatcher(a){this._rawContentElementMatcher.add(a)}registerInlineObjectMatcher(a){this._inlineObjectElementMatcher.add(a)}_clearTemporaryCustomProperties(){for(const a of this._elementsWithTemporaryCustomProperties)a._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return NBSP_FILLER(this._domDocument);case"markedNbsp":return MARKED_NBSP_FILLER(this._domDocument);case"br":return BR_FILLER(this._domDocument)}}_isDomSelectionPositionCorrect(a,n){if(isText(a)&&startsWithFiller(a)&&n<INLINE_FILLER_LENGTH||this.isElement(a)&&startsWithFiller(a.childNodes[n]))return!1;const s=this.mapDomToView(a);return!(s&&(s.is("uiElement")||s.is("rawElement")))}*_domToView(a,n,s){if(this.blockFillerMode!="br"&&isOnlyBrInBlock(a,this.blockElements))return null;const l=this.getHostViewElement(a);if(l)return l;if(isComment(a)&&n.skipComments)return null;if(isText(a)){if(isInlineFiller(a))return null;{const c=a.data;if(c==="")return null;const u=new Text$1(this.document,c);return s.push(u),u}}else{let c=this.mapDomToView(a);if(c)return this._isInlineObjectElement(c)&&s.push(c),c;if(this.isDocumentFragment(a))c=new DocumentFragment$1(this.document),n.bind&&this.bindDocumentFragments(a,c);else{c=this._createViewElement(a,n),n.bind&&this.bindElements(a,c);const d=a.attributes;if(d)for(let h=d.length,f=0;f<h;f++)c._setAttribute(d[f].name,d[f].value);if(this._isViewElementWithRawContent(c,n))return c._setCustomProperty("$rawContent",a.innerHTML),this._isBlockViewElement(c)||s.push(c),c;if(isComment(a))return c._setCustomProperty("$rawContent",a.data),c}yield c;const u=[];if(n.withChildren!==!1)for(const d of this.domChildrenToView(a,n,u))c._appendChild(d);if(this._isInlineObjectElement(c))s.push(c),this._processDomInlineNodes(null,u,n);else for(const d of u)s.push(d)}}_processDomInlineNodes(a,n,s){if(!n.length||a&&!this.isDocumentFragment(a)&&!this._isBlockDomElement(a))return;let l=!1;for(let c=0;c<n.length;c++){const u=n[c];if(!u.is("$text")){l=!1;continue}let d,h=!1;if(this._isPreFormatted(u))d=getDataWithoutFiller(u.data);else{d=u.data.replace(/[ \n\t\r]{1,}/g," "),h=/[^\S\u00A0]/.test(d.charAt(d.length-1));const f=c>0?n[c-1]:null,p=c+1<n.length?n[c+1]:null,g=!f||f.is("element")&&f.name=="br"||l,v=p?!1:!startsWithFiller(u.data);s.withChildren!==!1&&(g&&(d=d.replace(/^ /,"")),v&&(d=d.replace(/ $/,""))),d=getDataWithoutFiller(d),this.blockFillerMode!="br"&&u.parent&&(isViewMarkedNbspFiller(u.parent,d)?(d="",u.parent.parent&&(u.parent.parent._setCustomProperty("$hasBlockFiller",!0),u.parent._remove())):isViewNbspFiller(u.parent,d,this.blockElements)&&(d="",u.parent._setCustomProperty("$hasBlockFiller",!0))),d=d.replace(/ \u00A0/g,"  ");const b=p&&p.is("element")&&p.name!="br",w=p&&p.is("$text")&&p.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(d)||!p||b||w)&&(d=d.replace(/\u00A0$/," ")),(g||f&&f.is("element")&&f.name!="br")&&(d=d.replace(/^\u00A0/," "))}d.length==0&&u.parent?(u._remove(),n.splice(c,1),c--):(u._data=d,l=h)}n.length=0}_processDataFromViewText(a){let n=a.data;if(this._isPreFormatted(a))return n;if(n.charAt(0)==" "){const s=this._getTouchingInlineViewNode(a,!1);(s&&s.is("$textProxy")&&this._nodeEndsWithSpace(s)||!s)&&(n=" "+n.substr(1))}if(n.charAt(n.length-1)==" "){const s=this._getTouchingInlineViewNode(a,!0),l=s&&s.is("$textProxy")&&s.data.charAt(0)==" ";(n.charAt(n.length-2)==" "||!s||l)&&(n=n.substr(0,n.length-1)+" ")}return n.replace(/ {2}/g,"  ")}_nodeEndsWithSpace(a){if(this._isPreFormatted(a))return!1;const n=this._processDataFromViewText(a);return n.charAt(n.length-1)==" "}_isPreFormatted(a){if(_hasViewParentOfType(a,this.preElements))return!0;for(const n of a.getAncestors({parentFirst:!0}))if(!(!n.is("element")||!n.hasStyle("white-space")||n.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(n.getStyle("white-space"));return!1}_getTouchingInlineViewNode(a,n){const s=new TreeWalker$1({startPosition:n?Position$1._createAfter(a):Position$1._createBefore(a),direction:n?"forward":"backward"});for(const{item:l}of s){if(l.is("$textProxy"))return l;if(l.is("element")&&l.getCustomProperty("dataPipeline:transparentRendering"))continue;if(l.is("element","br"))return null;if(this._isInlineObjectElement(l))return l;if(l.is("containerElement"))return null}return null}_isBlockDomElement(a){return this.isElement(a)&&this.blockElements.includes(a.tagName.toLowerCase())}_isBlockViewElement(a){return a.is("element")&&this.blockElements.includes(a.name)}_isInlineObjectElement(a){return a.is("element")?a.name=="br"||this.inlineObjectElements.includes(a.name)||!!this._inlineObjectElementMatcher.match(a):!1}_createViewElement(a,n){if(isComment(a))return new UIElement(this.document,"$comment");const s=n.keepOriginalCase?a.tagName:a.tagName.toLowerCase();return new Element$1(this.document,s)}_isViewElementWithRawContent(a,n){return n.withChildren!==!1&&a.is("element")&&!!this._rawContentElementMatcher.match(a)}_shouldRenameElement(a){const n=a.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(n)}_createReplacementDomElement(a,n){const s=this._domDocument.createElement("span");if(s.setAttribute(UNSAFE_ELEMENT_REPLACEMENT_ATTRIBUTE,a),n){for(;n.firstChild;)s.appendChild(n.firstChild);for(const l of n.getAttributeNames())s.setAttribute(l,n.getAttribute(l))}return s}}function _hasViewParentOfType(o,a){return o.getAncestors().some(n=>n.is("element")&&a.includes(n.name))}function forEachDomElementAncestor(o,a){let n=o;for(;n;)a(n),n=n.parentElement}function isNbspBlockFiller(o,a){return o.isEqualNode(NBSP_FILLER_REF)&&hasBlockParent(o,a)&&o.parentNode.childNodes.length===1}function hasBlockParent(o,a){const n=o.parentNode;return!!n&&!!n.tagName&&a.includes(n.tagName.toLowerCase())}function isViewNbspFiller(o,a,n){return a==" "&&o&&o.is("element")&&o.childCount==1&&n.includes(o.name)}function isViewMarkedNbspFiller(o,a){return a==" "&&o&&o.is("element","span")&&o.childCount==1&&o.hasAttribute("data-cke-filler")}function isViewBrFiller(o){return o.is("element","br")&&o.hasAttribute("data-cke-filler")}function isOnlyBrInBlock(o,a){return o.tagName==="BR"&&hasBlockParent(o,a)&&o.parentNode.childNodes.length===1}function _logUnsafeElement(o){o==="script"&&logWarning("domconverter-unsafe-script-element-detected"),o==="style"&&logWarning("domconverter-unsafe-style-element-detected")}function isGeckoRestrictedDomSelection(o){if(!env$1.isGecko||!o.rangeCount)return!1;const a=o.getRangeAt(0).startContainer;try{Object.prototype.toString.call(a)}catch{return!0}return!1}class Observer extends DomEmitterMixin(){constructor(n){super();M(this,"view");M(this,"document");M(this,"_isEnabled",!1);this.view=n,this.document=n.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(n){return n&&n.nodeType===3&&(n=n.parentNode),!n||n.nodeType!==1?!1:n.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}class DomEventData{constructor(a,n,s){M(this,"view");M(this,"document");M(this,"domEvent");M(this,"domTarget");this.view=a,this.document=a.document,this.domEvent=n,this.domTarget=n.target,assignIn(this,s)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}}class DomEventObserver extends Observer{constructor(){super(...arguments);M(this,"useCapture",!1);M(this,"usePassive",!1)}observe(n){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(l=>{this.listenTo(n,l,(c,u)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(u.target)&&this.onDomEvent(u)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(n){this.stopListening(n)}fire(n,s,l){this.isEnabled&&this.document.fire(n,new DomEventData(this.view,s,l))}}class KeyObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType",["keydown","keyup"])}onDomEvent(n){const s={keyCode:n.keyCode,altKey:n.altKey,ctrlKey:n.ctrlKey,shiftKey:n.shiftKey,metaKey:n.metaKey,get keystroke(){return getCode(this)}};this.fire(n.type,n,s)}}class FakeSelectionObserver extends Observer{constructor(n){super(n);M(this,"_fireSelectionChangeDoneDebounced");this._fireSelectionChangeDoneDebounced=debounce$1(s=>{this.document.fire("selectionChangeDone",s)},200)}observe(){const n=this.document;n.on("arrowKey",(s,l)=>{n.selection.isFake&&this.isEnabled&&l.preventDefault()},{context:"$capture"}),n.on("arrowKey",(s,l)=>{n.selection.isFake&&this.isEnabled&&this._handleSelectionMove(l.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(n){const s=this.document.selection,l=new Selection$1(s.getRanges(),{backward:s.isBackward,fake:!1});(n==keyCodes.arrowleft||n==keyCodes.arrowup)&&l.setTo(l.getFirstPosition()),(n==keyCodes.arrowright||n==keyCodes.arrowdown)&&l.setTo(l.getLastPosition());const c={oldSelection:s,newSelection:l,domSelection:null};this.document.fire("selectionChange",c),this._fireSelectionChangeDoneDebounced(c)}}let MutationObserver$1=class extends Observer{constructor(n){super(n);M(this,"domConverter");M(this,"_config");M(this,"_domElements");M(this,"_mutationObserver");this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=n.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(n){this._domElements.add(n),this.isEnabled&&this._mutationObserver.observe(n,this._config)}stopObserving(n){if(this._domElements.delete(n),this.isEnabled){this._mutationObserver.disconnect();for(const s of this._domElements)this._mutationObserver.observe(s,this._config)}}enable(){super.enable();for(const n of this._domElements)this._mutationObserver.observe(n,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(n){if(n.length===0)return;const s=this.domConverter,l=new Set,c=new Set;for(const d of n){const h=s.mapDomToView(d.target);h&&(h.is("uiElement")||h.is("rawElement")||d.type==="childList"&&!this._isBogusBrMutation(d)&&c.add(h))}for(const d of n){const h=s.mapDomToView(d.target);if(!(h&&(h.is("uiElement")||h.is("rawElement")))&&d.type==="characterData"){const f=s.findCorrespondingViewText(d.target);f&&!c.has(f.parent)?l.add(f):!f&&startsWithFiller(d.target)&&c.add(s.mapDomToView(d.target.parentNode))}}const u=[];for(const d of l)u.push({type:"text",node:d});for(const d of c){const h=s.mapViewToDom(d),f=Array.from(d.getChildren()),p=Array.from(s.domChildrenToView(h,{withChildren:!1}));isEqualWith(f,p,sameNodes)||u.push({type:"children",node:d})}u.length&&this.document.fire("mutations",{mutations:u})}_isBogusBrMutation(n){let s=null;return n.nextSibling===null&&n.removedNodes.length===0&&n.addedNodes.length==1&&(s=this.domConverter.domToView(n.addedNodes[0],{withChildren:!1})),s&&s.is("element","br")}};function sameNodes(o,a){if(!Array.isArray(o))return o===a?!0:o.is("$text")&&a.is("$text")?o.data===a.data:!1}class FocusObserver extends DomEventObserver{constructor(n){super(n);M(this,"_renderTimeoutId",null);M(this,"_isFocusChanging",!1);M(this,"domEventType",["focus","blur"]);this.useCapture=!0;const s=this.document;s.on("focus",()=>this._handleFocus()),s.on("blur",(l,c)=>this._handleBlur(c)),s.on("beforeinput",()=>{s.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(n){this.fire(n.type,n)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(n){const s=this.document.selection.editableElement;(s===null||s===n.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}}class SelectionObserver extends Observer{constructor(n){super(n);M(this,"mutationObserver");M(this,"focusObserver");M(this,"selection");M(this,"domConverter");M(this,"_documents");M(this,"_fireSelectionChangeDoneDebounced");M(this,"_clearInfiniteLoopInterval");M(this,"_documentIsSelectingInactivityTimeoutDebounced");M(this,"_loopbackCounter");this.mutationObserver=n.getObserver(MutationObserver$1),this.focusObserver=n.getObserver(FocusObserver),this.selection=this.document.selection,this.domConverter=n.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=debounce$1(s=>{this.document.fire("selectionChangeDone",s)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=debounce$1(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(n){const s=n.ownerDocument,l=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},c=()=>{this.document.isSelecting&&(this._handleSelectionChange(s),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(n,"selectstart",l,{priority:"highest"}),this.listenTo(n,"keydown",c,{priority:"highest",useCapture:!0}),this.listenTo(n,"keyup",c,{priority:"highest",useCapture:!0}),!this._documents.has(s)&&(this.listenTo(s,"mouseup",c,{priority:"highest",useCapture:!0}),this.listenTo(s,"selectionchange",()=>{this.document.isComposing&&!env$1.isAndroid||(this._handleSelectionChange(s),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(s)},{priority:"lowest"}),this._documents.add(s))}stopObserving(n){this.stopListening(n)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(n){if(!this.isEnabled)return;const s=n.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(s.anchorNode))return;this.mutationObserver.flush();const l=this.domConverter.domSelectionToView(s);if(l.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(l)&&this.domConverter.isDomSelectionCorrect(s))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(l))this.view.forceRender();else{const c={oldSelection:this.selection,newSelection:l,domSelection:s};this.document.fire("selectionChange",c),this._fireSelectionChangeDoneDebounced(c)}}}_clearInfiniteLoop(){this._loopbackCounter=0}}class CompositionObserver extends DomEventObserver{constructor(n){super(n);M(this,"domEventType",["compositionstart","compositionupdate","compositionend"]);const s=this.document;s.on("compositionstart",()=>{s.isComposing=!0},{priority:"low"}),s.on("compositionend",()=>{s.isComposing=!1},{priority:"low"})}onDomEvent(n){this.fire(n.type,n,{data:n.data})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class DataTransfer{constructor(a,n={}){M(this,"_files");M(this,"_native");this._files=n.cacheFiles?getFiles(a):null,this._native=a}get files(){return this._files||(this._files=getFiles(this._native)),this._files}get types(){return this._native.types}getData(a){return this._native.getData(a)}setData(a,n){this._native.setData(a,n)}set effectAllowed(a){this._native.effectAllowed=a}get effectAllowed(){return this._native.effectAllowed}set dropEffect(a){this._native.dropEffect=a}get dropEffect(){return this._native.dropEffect}setDragImage(a,n,s){this._native.setDragImage(a,n,s)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}}function getFiles(o){const a=Array.from(o.files||[]),n=Array.from(o.items||[]);return a.length?a:n.filter(s=>s.kind==="file").map(s=>s.getAsFile())}class InputObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType","beforeinput")}onDomEvent(n){const s=n.getTargetRanges(),l=this.view,c=l.document;let u=null,d=null,h=[];if(n.dataTransfer&&(u=new DataTransfer(n.dataTransfer)),n.data!==null?d=n.data:u&&(d=u.getData("text/plain")),c.selection.isFake)h=Array.from(c.selection.getRanges());else if(s.length)h=s.map(f=>{const p=l.domConverter.domPositionToView(f.startContainer,f.startOffset),g=l.domConverter.domPositionToView(f.endContainer,f.endOffset);if(p)return l.createRange(p,g);if(g)return l.createRange(g)}).filter(f=>!!f);else if(env$1.isAndroid){const f=n.target.ownerDocument.defaultView.getSelection();h=Array.from(l.domConverter.domSelectionToView(f).getRanges())}if(env$1.isAndroid&&n.inputType=="insertCompositionText"&&d&&d.endsWith(`
`)){this.fire(n.type,n,{inputType:"insertParagraph",targetRanges:[l.createRange(h[0].end)]});return}if(n.inputType=="insertText"&&d&&d.includes(`
`)){const f=d.split(/\n{1,2}/g);let p=h;for(let g=0;g<f.length;g++){const v=f[g];v!=""&&(this.fire(n.type,n,{data:v,dataTransfer:u,targetRanges:p,inputType:n.inputType,isComposing:n.isComposing}),p=[c.selection.getFirstRange()]),g+1<f.length&&(this.fire(n.type,n,{inputType:"insertParagraph",targetRanges:p}),p=[c.selection.getFirstRange()])}return}this.fire(n.type,n,{data:d,dataTransfer:u,targetRanges:h,inputType:n.inputType,isComposing:n.isComposing})}}class ArrowKeysObserver extends Observer{constructor(a){super(a),this.document.on("keydown",(n,s)=>{if(this.isEnabled&&isArrowKeyCode(s.keyCode)){const l=new BubblingEventInfo(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(l,s),l.stop.called&&n.stop()}})}observe(){}stopObserving(){}}class TabObserver extends Observer{constructor(a){super(a);const n=this.document;n.on("keydown",(s,l)=>{if(!this.isEnabled||l.keyCode!=keyCodes.tab||l.ctrlKey)return;const c=new BubblingEventInfo(n,"tab",n.selection.getFirstRange());n.fire(c,l),c.stop.called&&s.stop()})}observe(){}stopObserving(){}}let View$2=class extends ObservableMixin(){constructor(n){super();M(this,"document");M(this,"domConverter");M(this,"domRoots",new Map);M(this,"_renderer");M(this,"_initialDomRootAttributes",new WeakMap);M(this,"_observers",new Map);M(this,"_writer");M(this,"_ongoingChange",!1);M(this,"_postFixersInProgress",!1);M(this,"_renderingDisabled",!1);M(this,"_hasChangedSinceTheLastRendering",!1);this.document=new Document$1(n),this.domConverter=new DomConverter(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Renderer$1(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new DowncastWriter(this.document),this.addObserver(MutationObserver$1),this.addObserver(FocusObserver),this.addObserver(SelectionObserver),this.addObserver(KeyObserver),this.addObserver(FakeSelectionObserver),this.addObserver(CompositionObserver),this.addObserver(ArrowKeysObserver),this.addObserver(InputObserver),this.addObserver(TabObserver),injectQuirksHandling(this),injectUiElementHandling(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),env$1.isiOS&&this.listenTo(this.document,"blur",(s,l)=>{this.domConverter.mapDomToView(l.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(s,{mutations:l})=>{l.forEach(c=>this._renderer.markToSync(c.type,c.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(n,s="main"){const l=this.document.getRoot(s);l._name=n.tagName.toLowerCase();const c={};for(const{name:d,value:h}of Array.from(n.attributes))c[d]=h,d==="class"?this._writer.addClass(h.split(" "),l):l.hasAttribute(d)||this._writer.setAttribute(d,h,l);this._initialDomRootAttributes.set(n,c);const u=()=>{this._writer.setAttribute("contenteditable",(!l.isReadOnly).toString(),l),l.isReadOnly?this._writer.addClass("ck-read-only",l):this._writer.removeClass("ck-read-only",l)};u(),this.domRoots.set(s,n),this.domConverter.bindElements(n,l),this._renderer.markToSync("children",l),this._renderer.markToSync("attributes",l),this._renderer.domDocuments.add(n.ownerDocument),l.on("change:children",(d,h)=>this._renderer.markToSync("children",h)),l.on("change:attributes",(d,h)=>this._renderer.markToSync("attributes",h)),l.on("change:text",(d,h)=>this._renderer.markToSync("text",h)),l.on("change:isReadOnly",()=>this.change(u)),l.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(const d of this._observers.values())d.observe(n,s)}detachDomRoot(n){const s=this.domRoots.get(n);Array.from(s.attributes).forEach(({name:c})=>s.removeAttribute(c));const l=this._initialDomRootAttributes.get(s);for(const c in l)s.setAttribute(c,l[c]);this.domRoots.delete(n),this.domConverter.unbindDomElement(s);for(const c of this._observers.values())c.stopObserving(s)}getDomRoot(n="main"){return this.domRoots.get(n)}addObserver(n){let s=this._observers.get(n);if(s)return s;s=new n(this),this._observers.set(n,s);for(const[l,c]of this.domRoots)s.observe(c,l);return s.enable(),s}getObserver(n){return this._observers.get(n)}disableObservers(){for(const n of this._observers.values())n.disable()}enableObservers(){for(const n of this._observers.values())n.enable()}scrollToTheSelection({alignToTop:n,forceScroll:s,viewportOffset:l=20,ancestorOffset:c=20}={}){const u=this.document.selection.getFirstRange();if(!u)return;const d=cloneDeep({alignToTop:n,forceScroll:s,viewportOffset:l,ancestorOffset:c});typeof l=="number"&&(l={top:l,bottom:l,left:l,right:l});const h={target:this.domConverter.viewRangeToDom(u),viewportOffset:l,ancestorOffset:c,alignToTop:n,forceScroll:s};this.fire("scrollToTheSelection",h,d),scrollViewportToShowTarget(h)}focus(){if(!this.document.isFocused){const n=this.document.selection.editableElement;n&&(this.domConverter.focus(n),this.forceRender())}}change(n){if(this.isRenderingInProgress||this._postFixersInProgress)throw new CKEditorError("cannot-change-view-tree",this);try{if(this._ongoingChange)return n(this._writer);this._ongoingChange=!0;const s=n(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),s}catch(s){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(s,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(FocusObserver).flush(),this.change(()=>{})}destroy(){for(const n of this._observers.values())n.destroy();this.document.destroy(),this.stopListening()}createPositionAt(n,s){return Position$1._createAt(n,s)}createPositionAfter(n){return Position$1._createAfter(n)}createPositionBefore(n){return Position$1._createBefore(n)}createRange(n,s){return new Range$1(n,s)}createRangeOn(n){return Range$1._createOn(n)}createRangeIn(n){return Range$1._createIn(n)}createSelection(...n){return new Selection$1(...n)}_disableRendering(n){this._renderingDisabled=n,n==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TypeCheckable{is(){throw new Error("is() method is abstract")}}class TextProxy extends TypeCheckable{constructor(n,s,l){super();M(this,"textNode");M(this,"data");M(this,"offsetInText");if(this.textNode=n,s<0||s>n.offsetSize)throw new CKEditorError("model-textproxy-wrong-offsetintext",this);if(l<0||s+l>n.offsetSize)throw new CKEditorError("model-textproxy-wrong-length",this);this.data=n.data.substring(s,s+l),this.offsetInText=s}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){const n=this.textNode.getPath();return n.length>0&&(n[n.length-1]+=this.offsetInText),n}getAncestors(n={}){const s=[];let l=n.includeSelf?this:this.parent;for(;l;)s[n.parentFirst?"push":"unshift"](l),l=l.parent;return s}hasAttribute(n){return this.textNode.hasAttribute(n)}getAttribute(n){return this.textNode.getAttribute(n)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}}TextProxy.prototype.is=function(o){return o==="$textProxy"||o==="model:$textProxy"||o==="textProxy"||o==="model:textProxy"};class TreeWalker{constructor(a){M(this,"direction");M(this,"boundaries");M(this,"singleCharacters");M(this,"shallow");M(this,"ignoreElementEnd");M(this,"_position");M(this,"_boundaryStartParent");M(this,"_boundaryEndParent");M(this,"_visitedParent");if(!a||!a.boundaries&&!a.startPosition)throw new CKEditorError("model-tree-walker-no-start-position",null);const n=a.direction||"forward";if(n!="forward"&&n!="backward")throw new CKEditorError("model-tree-walker-unknown-direction",a,{direction:n});this.direction=n,this.boundaries=a.boundaries||null,a.startPosition?this._position=a.startPosition.clone():this._position=Position._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!a.singleCharacters,this.shallow=!!a.shallow,this.ignoreElementEnd=!!a.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(a){let n,s,l,c;do l=this.position,c=this._visitedParent,{done:n,value:s}=this.next();while(!n&&a(s));n||(this._position=l,this._visitedParent=c)}jumpTo(a){this._boundaryStartParent&&a.isBefore(this.boundaries.start)?a=this.boundaries.start:this._boundaryEndParent&&a.isAfter(this.boundaries.end)&&(a=this.boundaries.end),this._position=a.clone(),this._visitedParent=a.parent}next(){return this.direction=="forward"?this._next():this._previous()}_next(){const a=this.position,n=this.position.clone(),s=this._visitedParent;if(s.parent===null&&n.offset===s.maxOffset)return{done:!0,value:void 0};if(s===this._boundaryEndParent&&n.offset==this.boundaries.end.offset)return{done:!0,value:void 0};const l=getTextNodeAtPosition(n,s),c=l||getNodeAfterPosition(n,s,l);if(c&&c.is("model:element")){if(!this.shallow)n.path.push(0),this._visitedParent=c;else{if(this.boundaries&&this.boundaries.end.isBefore(n))return{done:!0,value:void 0};n.offset++}return this._position=n,formatReturnValue("elementStart",c,a,n,1)}if(c&&c.is("model:$text")){let u;if(this.singleCharacters)u=1;else{let f=c.endOffset;this._boundaryEndParent==s&&this.boundaries.end.offset<f&&(f=this.boundaries.end.offset),u=f-n.offset}const d=n.offset-c.startOffset,h=new TextProxy(c,d,u);return n.offset+=u,this._position=n,formatReturnValue("text",h,a,n,u)}return n.path.pop(),n.offset++,this._position=n,this._visitedParent=s.parent,this.ignoreElementEnd?this._next():formatReturnValue("elementEnd",s,a,n)}_previous(){const a=this.position,n=this.position.clone(),s=this._visitedParent;if(s.parent===null&&n.offset===0)return{done:!0,value:void 0};if(s==this._boundaryStartParent&&n.offset==this.boundaries.start.offset)return{done:!0,value:void 0};const l=n.parent,c=getTextNodeAtPosition(n,l),u=c||getNodeBeforePosition(n,l,c);if(u&&u.is("model:element"))return n.offset--,this.shallow?(this._position=n,formatReturnValue("elementStart",u,a,n,1)):(n.path.push(u.maxOffset),this._position=n,this._visitedParent=u,this.ignoreElementEnd?this._previous():formatReturnValue("elementEnd",u,a,n));if(u&&u.is("model:$text")){let d;if(this.singleCharacters)d=1;else{let p=u.startOffset;this._boundaryStartParent==s&&this.boundaries.start.offset>p&&(p=this.boundaries.start.offset),d=n.offset-p}const h=n.offset-u.startOffset,f=new TextProxy(u,h-d,d);return n.offset-=d,this._position=n,formatReturnValue("text",f,a,n,d)}return n.path.pop(),this._position=n,this._visitedParent=s.parent,formatReturnValue("elementStart",s,a,n,1)}}function formatReturnValue(o,a,n,s,l){return{done:!1,value:{type:o,item:a,previousPosition:n,nextPosition:s,length:l}}}class Position extends TypeCheckable{constructor(n,s,l="toNone"){super();M(this,"root");M(this,"path");M(this,"stickiness");if(!n.is("element")&&!n.is("documentFragment"))throw new CKEditorError("model-position-root-invalid",n);if(!Array.isArray(s)||s.length===0)throw new CKEditorError("model-position-path-incorrect-format",n,{path:s});n.is("rootElement")?s=s.slice():(s=[...n.getPath(),...s],n=n.root),this.root=n,this.path=s,this.stickiness=l}get offset(){return this.path[this.path.length-1]}set offset(n){this.path[this.path.length-1]=n}get parent(){let n=this.root;for(let s=0;s<this.path.length-1;s++)if(n=n.getChildAtOffset(this.path[s]),!n)throw new CKEditorError("model-position-path-incorrect",this,{position:this});if(n.is("$text"))throw new CKEditorError("model-position-path-incorrect",this,{position:this});return n}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return getTextNodeAtPosition(this,this.parent)}get nodeAfter(){const n=this.parent;return getNodeAfterPosition(this,n,getTextNodeAtPosition(this,n))}get nodeBefore(){const n=this.parent;return getNodeBeforePosition(this,n,getTextNodeAtPosition(this,n))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let n=this.root;for(let s=0;s<this.path.length-1;s++)if(n=n.getChildAtOffset(this.path[s]),!n)return!1;return this.offset<=n.maxOffset}compareWith(n){if(this.root!=n.root)return"different";const s=compareArrays(this.path,n.path);switch(s){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[s]<n.path[s]?"before":"after"}}getLastMatchingPosition(n,s={}){s.startPosition=this;const l=new TreeWalker(s);return l.skip(n),l.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){const n=this.parent;return n.is("documentFragment")?[n]:n.getAncestors({includeSelf:!0})}findAncestor(n){const s=this.parent;return s.is("element")?s.findAncestor(n,{includeSelf:!0}):null}getCommonPath(n){if(this.root!=n.root)return[];const s=compareArrays(this.path,n.path),l=typeof s=="string"?Math.min(this.path.length,n.path.length):s;return this.path.slice(0,l)}getCommonAncestor(n){const s=this.getAncestors(),l=n.getAncestors();let c=0;for(;s[c]==l[c]&&s[c];)c++;return c===0?null:s[c-1]}getShiftedBy(n){const s=this.clone(),l=s.offset+n;return s.offset=l<0?0:l,s}isAfter(n){return this.compareWith(n)=="after"}isBefore(n){return this.compareWith(n)=="before"}isEqual(n){return this.compareWith(n)=="same"}isTouching(n){if(this.root!==n.root)return!1;const s=Math.min(this.path.length,n.path.length);for(let l=0;l<s;l++){const c=this.path[l]-n.path[l];if(c<-1||c>1)return!1;if(c===1)return checkTouchingBranch(n,this,l);if(c===-1)return checkTouchingBranch(this,n,l)}return this.path.length===n.path.length?!0:this.path.length>n.path.length?checkOnlyZeroes(this.path,s):checkOnlyZeroes(n.path,s)}hasSameParentAs(n){if(this.root!==n.root)return!1;const s=this.getParentPath(),l=n.getParentPath();return compareArrays(s,l)=="same"}getTransformedByOperation(n){let s;switch(n.type){case"insert":s=this._getTransformedByInsertOperation(n);break;case"move":case"remove":case"reinsert":s=this._getTransformedByMoveOperation(n);break;case"split":s=this._getTransformedBySplitOperation(n);break;case"merge":s=this._getTransformedByMergeOperation(n);break;default:s=Position._createAt(this);break}return s}_getTransformedByInsertOperation(n){return this._getTransformedByInsertion(n.position,n.howMany)}_getTransformedByMoveOperation(n){return this._getTransformedByMove(n.sourcePosition,n.targetPosition,n.howMany)}_getTransformedBySplitOperation(n){const s=n.movedRange;return s.containsPosition(this)||s.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(n.splitPosition,n.moveTargetPosition):n.graveyardPosition?this._getTransformedByMove(n.graveyardPosition,n.insertionPosition,1):this._getTransformedByInsertion(n.insertionPosition,1)}_getTransformedByMergeOperation(n){const s=n.movedRange,l=s.containsPosition(this)||s.start.isEqual(this);let c;return l?(c=this._getCombined(n.sourcePosition,n.targetPosition),n.sourcePosition.isBefore(n.targetPosition)&&(c=c._getTransformedByDeletion(n.deletionPosition,1))):this.isEqual(n.deletionPosition)?c=Position._createAt(n.deletionPosition):c=this._getTransformedByMove(n.deletionPosition,n.graveyardPosition,1),c}_getTransformedByDeletion(n,s){const l=Position._createAt(this);if(this.root!=n.root)return l;if(compareArrays(n.getParentPath(),this.getParentPath())=="same"){if(n.offset<this.offset){if(n.offset+s>this.offset)return null;l.offset-=s}}else if(compareArrays(n.getParentPath(),this.getParentPath())=="prefix"){const c=n.path.length-1;if(n.offset<=this.path[c]){if(n.offset+s>this.path[c])return null;l.path[c]-=s}}return l}_getTransformedByInsertion(n,s){const l=Position._createAt(this);if(this.root!=n.root)return l;if(compareArrays(n.getParentPath(),this.getParentPath())=="same")(n.offset<this.offset||n.offset==this.offset&&this.stickiness!="toPrevious")&&(l.offset+=s);else if(compareArrays(n.getParentPath(),this.getParentPath())=="prefix"){const c=n.path.length-1;n.offset<=this.path[c]&&(l.path[c]+=s)}return l}_getTransformedByMove(n,s,l){if(s=s._getTransformedByDeletion(n,l),n.isEqual(s))return Position._createAt(this);const c=this._getTransformedByDeletion(n,l);return c===null||n.isEqual(this)&&this.stickiness=="toNext"||n.getShiftedBy(l).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(n,s):c._getTransformedByInsertion(s,l)}_getCombined(n,s){const l=n.path.length-1,c=Position._createAt(s);return c.stickiness=this.stickiness,c.offset=c.offset+this.path[l]-n.offset,c.path=[...c.path,...this.path.slice(l+1)],c}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(n,s,l="toNone"){if(n.is("model:position"))return new Position(n.root,n.path,n.stickiness);{const c=n;if(s=="end")s=c.maxOffset;else{if(s=="before")return this._createBefore(c,l);if(s=="after")return this._createAfter(c,l);if(s!==0&&!s)throw new CKEditorError("model-createpositionat-offset-required",[this,n])}if(!c.is("element")&&!c.is("documentFragment"))throw new CKEditorError("model-position-parent-incorrect",[this,n]);const u=c.getPath();return u.push(s),new this(c.root,u,l)}}static _createAfter(n,s){if(!n.parent)throw new CKEditorError("model-position-after-root",[this,n],{root:n});return this._createAt(n.parent,n.endOffset,s)}static _createBefore(n,s){if(!n.parent)throw new CKEditorError("model-position-before-root",n,{root:n});return this._createAt(n.parent,n.startOffset,s)}static fromJSON(n,s){if(n.root==="$graveyard"){const l=new Position(s.graveyard,n.path);return l.stickiness=n.stickiness,l}if(!s.getRoot(n.root))throw new CKEditorError("model-position-fromjson-no-root",s,{rootName:n.root});return new Position(s.getRoot(n.root),n.path,n.stickiness)}}Position.prototype.is=function(o){return o==="position"||o==="model:position"};function getTextNodeAtPosition(o,a){const n=a.getChildAtOffset(o.offset);return n&&n.is("$text")&&n.startOffset<o.offset?n:null}function getNodeAfterPosition(o,a,n){return n!==null?null:a.getChildAtOffset(o.offset)}function getNodeBeforePosition(o,a,n){return n!==null?null:a.getChild(a.offsetToIndex(o.offset)-1)}function checkTouchingBranch(o,a,n){return!(n+1===o.path.length||!checkOnlyZeroes(a.path,n+1)||!checkOnlyMaxOffset(o,n+1))}function checkOnlyZeroes(o,a){for(;a<o.length;){if(o[a]!==0)return!1;a++}return!0}function checkOnlyMaxOffset(o,a){let n=o.parent,s=o.path.length-1,l=0;for(;s>=a;){if(o.path[s]+l!==n.maxOffset)return!1;l=1,s--,n=n.parent}return!0}class Range extends TypeCheckable{constructor(n,s){super();M(this,"start");M(this,"end");this.start=Position._createAt(n),this.end=s?Position._createAt(s):Position._createAt(n),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*new TreeWalker({boundaries:this,ignoreElementEnd:!0})}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){const n=this.start.getParentPath(),s=this.end.getParentPath();return compareArrays(n,s)=="same"}get root(){return this.start.root}containsPosition(n){return n.isAfter(this.start)&&n.isBefore(this.end)}containsRange(n,s=!1){n.isCollapsed&&(s=!1);const l=this.containsPosition(n.start)||s&&this.start.isEqual(n.start),c=this.containsPosition(n.end)||s&&this.end.isEqual(n.end);return l&&c}containsItem(n){const s=Position._createBefore(n);return this.containsPosition(s)||this.start.isEqual(s)}isEqual(n){return this.start.isEqual(n.start)&&this.end.isEqual(n.end)}isIntersecting(n){return this.start.isBefore(n.end)&&this.end.isAfter(n.start)}getDifference(n){const s=[];return this.isIntersecting(n)?(this.containsPosition(n.start)&&s.push(new Range(this.start,n.start)),this.containsPosition(n.end)&&s.push(new Range(n.end,this.end))):s.push(new Range(this.start,this.end)),s}getIntersection(n){if(this.isIntersecting(n)){let s=this.start,l=this.end;return this.containsPosition(n.start)&&(s=n.start),this.containsPosition(n.end)&&(l=n.end),new Range(s,l)}return null}getJoined(n,s=!1){let l=this.isIntersecting(n);if(l||(this.start.isBefore(n.start)?l=s?this.end.isTouching(n.start):this.end.isEqual(n.start):l=s?n.end.isTouching(this.start):n.end.isEqual(this.start)),!l)return null;let c=this.start,u=this.end;return n.start.isBefore(c)&&(c=n.start),n.end.isAfter(u)&&(u=n.end),new Range(c,u)}getMinimalFlatRanges(){const n=[],s=this.start.getCommonPath(this.end).length,l=Position._createAt(this.start);let c=l.parent;for(;l.path.length>s+1;){const u=c.maxOffset-l.offset;u!==0&&n.push(new Range(l,l.getShiftedBy(u))),l.path=l.path.slice(0,-1),l.offset++,c=c.parent}for(;l.path.length<=this.end.path.length;){const u=this.end.path[l.path.length-1],d=u-l.offset;d!==0&&n.push(new Range(l,l.getShiftedBy(d))),l.offset=u,l.path.push(0)}return n}getWalker(n={}){return n.boundaries=this,new TreeWalker(n)}*getItems(n={}){n.boundaries=this,n.ignoreElementEnd=!0;const s=new TreeWalker(n);for(const l of s)yield l.item}*getPositions(n={}){n.boundaries=this;const s=new TreeWalker(n);yield s.position;for(const l of s)yield l.nextPosition}getTransformedByOperation(n){switch(n.type){case"insert":return this._getTransformedByInsertOperation(n);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(n);case"split":return[this._getTransformedBySplitOperation(n)];case"merge":return[this._getTransformedByMergeOperation(n)]}return[new Range(this.start,this.end)]}getTransformedByOperations(n){const s=[new Range(this.start,this.end)];for(const l of n)for(let c=0;c<s.length;c++){const u=s[c].getTransformedByOperation(l);s.splice(c,1,...u),c+=u.length-1}for(let l=0;l<s.length;l++){const c=s[l];for(let u=l+1;u<s.length;u++){const d=s[u];(c.containsRange(d)||d.containsRange(c)||c.isEqual(d))&&s.splice(u,1)}}return s}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;const n=this.start.nodeAfter,s=this.end.nodeBefore;return n&&n.is("element")&&n===s?n:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(n,s=!1){return this._getTransformedByInsertion(n.position,n.howMany,s)}_getTransformedByMoveOperation(n,s=!1){const l=n.sourcePosition,c=n.howMany,u=n.targetPosition;return this._getTransformedByMove(l,u,c,s)}_getTransformedBySplitOperation(n){const s=this.start._getTransformedBySplitOperation(n);let l=this.end._getTransformedBySplitOperation(n);return this.end.isEqual(n.insertionPosition)&&(l=this.end.getShiftedBy(1)),s.root!=l.root&&(l=this.end.getShiftedBy(-1)),new Range(s,l)}_getTransformedByMergeOperation(n){if(this.start.isEqual(n.targetPosition)&&this.end.isEqual(n.deletionPosition))return new Range(this.start);let s=this.start._getTransformedByMergeOperation(n),l=this.end._getTransformedByMergeOperation(n);return s.root!=l.root&&(l=this.end.getShiftedBy(-1)),s.isAfter(l)?(n.sourcePosition.isBefore(n.targetPosition)?(s=Position._createAt(l),s.offset=0):(n.deletionPosition.isEqual(s)||(l=n.deletionPosition),s=n.targetPosition),new Range(s,l)):new Range(s,l)}_getTransformedByInsertion(n,s,l=!1){if(l&&this.containsPosition(n))return[new Range(this.start,n),new Range(n.getShiftedBy(s),this.end._getTransformedByInsertion(n,s))];{const c=new Range(this.start,this.end);return c.start=c.start._getTransformedByInsertion(n,s),c.end=c.end._getTransformedByInsertion(n,s),[c]}}_getTransformedByMove(n,s,l,c=!1){if(this.isCollapsed){const v=this.start._getTransformedByMove(n,s,l);return[new Range(v)]}const u=Range._createFromPositionAndShift(n,l),d=s._getTransformedByDeletion(n,l);if(this.containsPosition(s)&&!c&&(u.containsPosition(this.start)||u.containsPosition(this.end))){const v=this.start._getTransformedByMove(n,s,l),b=this.end._getTransformedByMove(n,s,l);return[new Range(v,b)]}let h;const f=this.getDifference(u);let p=null;const g=this.getIntersection(u);if(f.length==1?p=new Range(f[0].start._getTransformedByDeletion(n,l),f[0].end._getTransformedByDeletion(n,l)):f.length==2&&(p=new Range(this.start,this.end._getTransformedByDeletion(n,l))),p?h=p._getTransformedByInsertion(d,l,g!==null||c):h=[],g){const v=new Range(g.start._getCombined(u.start,d),g.end._getCombined(u.start,d));h.length==2?h.splice(1,0,v):h.push(v)}return h}_getTransformedByDeletion(n,s){let l=this.start._getTransformedByDeletion(n,s),c=this.end._getTransformedByDeletion(n,s);return l==null&&c==null?null:(l==null&&(l=n),c==null&&(c=n),new Range(l,c))}static _createFromPositionAndShift(n,s){const l=n,c=n.getShiftedBy(s);return s>0?new this(l,c):new this(c,l)}static _createIn(n){return new this(Position._createAt(n,0),Position._createAt(n,n.maxOffset))}static _createOn(n){return this._createFromPositionAndShift(Position._createBefore(n),n.offsetSize)}static _createFromRanges(n){if(n.length===0)throw new CKEditorError("range-create-from-ranges-empty-array",null);if(n.length==1)return n[0].clone();const s=n[0];n.sort((u,d)=>u.start.isAfter(d.start)?1:-1);const l=n.indexOf(s),c=new this(s.start,s.end);for(let u=l-1;u>=0&&n[u].end.isEqual(c.start);u--)c.start=Position._createAt(n[u].start);for(let u=l+1;u<n.length&&n[u].start.isEqual(c.end);u++)c.end=Position._createAt(n[u].end);return c}static fromJSON(n,s){return new this(Position.fromJSON(n.start,s),Position.fromJSON(n.end,s))}}Range.prototype.is=function(o){return o==="range"||o==="model:range"};class Mapper extends EmitterMixin(){constructor(){super();M(this,"_modelToViewMapping",new WeakMap);M(this,"_viewToModelMapping",new WeakMap);M(this,"_viewToModelLengthCallbacks",new Map);M(this,"_markerNameToElements",new Map);M(this,"_elementToMarkerNames",new Map);M(this,"_deferredBindingRemovals",new Map);M(this,"_unboundMarkerNames",new Set);M(this,"_cache",new MapperCache);this.on("modelToViewPosition",(n,s)=>{if(s.viewPosition)return;const l=this._modelToViewMapping.get(s.modelPosition.parent);if(!l)throw new CKEditorError("mapping-model-position-view-parent-not-found",this,{modelPosition:s.modelPosition});s.viewPosition=this.findPositionIn(l,s.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(n,s)=>{if(s.modelPosition)return;const l=this.findMappedViewAncestor(s.viewPosition),c=this._viewToModelMapping.get(l),u=this._toModelOffset(s.viewPosition.parent,s.viewPosition.offset,l);s.modelPosition=Position._createAt(c,u)},{priority:"low"})}bindElements(n,s){this._modelToViewMapping.set(n,s),this._viewToModelMapping.set(s,n)}unbindViewElement(n,s={}){const l=this.toModelElement(n);if(this._elementToMarkerNames.has(n))for(const c of this._elementToMarkerNames.get(n))this._unboundMarkerNames.add(c);s.defer?this._deferredBindingRemovals.set(n,n.root):(this._viewToModelMapping.delete(n)&&this._cache.stopTracking(n),this._modelToViewMapping.get(l)==n&&this._modelToViewMapping.delete(l))}unbindModelElement(n){const s=this.toViewElement(n);this._modelToViewMapping.delete(n),this._viewToModelMapping.get(s)==n&&this._viewToModelMapping.delete(s)&&this._cache.stopTracking(s)}bindElementToMarker(n,s){const l=this._markerNameToElements.get(s)||new Set;l.add(n);const c=this._elementToMarkerNames.get(n)||new Set;c.add(s),this._markerNameToElements.set(s,l),this._elementToMarkerNames.set(n,c)}unbindElementFromMarkerName(n,s){const l=this._markerNameToElements.get(s);l&&(l.delete(n),l.size==0&&this._markerNameToElements.delete(s));const c=this._elementToMarkerNames.get(n);c&&(c.delete(s),c.size==0&&this._elementToMarkerNames.delete(n))}flushUnboundMarkerNames(){const n=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),n}flushDeferredBindings(){for(const[n,s]of this._deferredBindingRemovals)n.root==s&&this.unbindViewElement(n);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(n){return this._viewToModelMapping.get(n)}toViewElement(n){return this._modelToViewMapping.get(n)}toModelRange(n){return new Range(this.toModelPosition(n.start),this.toModelPosition(n.end))}toViewRange(n){return new Range$1(this.toViewPosition(n.start),this.toViewPosition(n.end))}toModelPosition(n){const s={viewPosition:n,mapper:this};return this.fire("viewToModelPosition",s),s.modelPosition}toViewPosition(n,s={}){const l={modelPosition:n,mapper:this,isPhantom:s.isPhantom};return this.fire("modelToViewPosition",l),l.viewPosition}markerNameToElements(n){const s=this._markerNameToElements.get(n);if(!s)return null;const l=new Set;for(const c of s)if(c.is("attributeElement"))for(const u of c.getElementsWithSameId())l.add(u);else l.add(c);return l}registerViewToModelLength(n,s){this._viewToModelLengthCallbacks.set(n,s)}findMappedViewAncestor(n){let s=n.parent;for(;!this._viewToModelMapping.has(s);)s=s.parent;return s}_toModelOffset(n,s,l){if(l!=n){const u=this._toModelOffset(n.parent,n.index,l),d=this._toModelOffset(n,s,n);return u+d}if(n.is("$text"))return s;let c=0;for(let u=0;u<s;u++)c+=this.getModelLength(n.getChild(u));return c}getModelLength(n){const s=[n];let l=0;for(;s.length>0;){const c=s.pop(),u=c.name&&this._viewToModelLengthCallbacks.size>0&&this._viewToModelLengthCallbacks.get(c.name);if(u)l+=u(c);else if(this._viewToModelMapping.has(c))l+=1;else if(c.is("$text"))l+=c.data.length;else{if(c.is("uiElement"))continue;for(const d of c.getChildren())s.push(d)}}return l}findPositionIn(n,s){if(s===0)return this._moveViewPositionToTextNode(new Position$1(n,0));if(this._viewToModelLengthCallbacks.size==0&&this._viewToModelMapping.has(n)){const c=this._cache.getClosest(n,s);return this._findPositionStartingFrom(c.viewPosition,c.modelOffset,s,n,!0)}else return this._findPositionStartingFrom(new Position$1(n,0),0,s,n,!1)}_findPositionStartingFrom(n,s,l,c,u){let d=n.parent,h=n.offset;if(d.is("$text"))return new Position$1(d,l-s);let f,p=s,g=0;for(;p<l;){if(f=d.getChild(h),!f){if(d==c)throw new CKEditorError("mapping-model-offset-not-found",this,{modelOffset:l,viewContainer:c});h=d.parent.getChildIndex(d)+1,d=d.parent;continue}g=this.getModelLength(f),p+=g,h++,u&&this._cache.save(d,h,c,p)}return p==l?this._moveViewPositionToTextNode(new Position$1(d,h)):this._findPositionStartingFrom(new Position$1(f,0),p-g,l,c,u)}_moveViewPositionToTextNode(n){const s=n.nodeBefore,l=n.nodeAfter;return s&&s.is("view:$text")?new Position$1(s,s.data.length):l&&l.is("view:$text")?new Position$1(l,0):n}}class MapperCache extends EmitterMixin(){constructor(){super(...arguments);M(this,"_cachedMapping",new WeakMap);M(this,"_nodeToCacheListIndex",new WeakMap);M(this,"_invalidateOnChildrenChangeCallback",(n,s,l)=>{this._clearCacheInsideParent(s,l.index)});M(this,"_invalidateOnTextChangeCallback",(n,s)=>{this._clearCacheStartingBefore(s)})}save(n,s,l,c){const u=this._cachedMapping.get(l),d=u.cacheMap.get(c);if(d){const g=n.getChild(s-1),v=d.viewPosition.nodeBefore?this._nodeToCacheListIndex.get(d.viewPosition.nodeBefore):0;this._nodeToCacheListIndex.set(g,v);return}const f={viewPosition:new Position$1(n,s),modelOffset:c};u.maxModelOffset=c>u.maxModelOffset?c:u.maxModelOffset,u.cacheMap.set(c,f);let p=u.cacheList.length-1;for(;p>=0&&u.cacheList[p].modelOffset>c;)p--;if(u.cacheList.splice(p+1,0,f),s>0){const g=n.getChild(s-1);this._nodeToCacheListIndex.set(g,p+1)}}getClosest(n,s){const l=this._cachedMapping.get(n);let c;if(l)if(s>l.maxModelOffset)c=l.cacheList[l.cacheList.length-1];else{const d=l.cacheMap.get(s);d?c=d:c=this._findInCacheList(l.cacheList,s)}else c=this.startTracking(n);const u=this._hoistViewPosition(c.viewPosition);return{modelOffset:c.modelOffset,viewPosition:u}}_hoistViewPosition(n){for(;n.parent.parent&&!this._cachedMapping.has(n.parent)&&n.isAtEnd;){const s=n.parent.parent,l=s.getChildIndex(n.parent)+1;n=new Position$1(s,l)}return n}startTracking(n){const l={viewPosition:new Position$1(n,0),modelOffset:0},c={maxModelOffset:0,cacheList:[l],cacheMap:new Map([[0,l]])};return this._cachedMapping.set(n,c),n.on("change:children",this._invalidateOnChildrenChangeCallback),n.on("change:text",this._invalidateOnTextChangeCallback),l}stopTracking(n){n.off("change:children",this._invalidateOnChildrenChangeCallback),n.off("change:text",this._invalidateOnTextChangeCallback),this._cachedMapping.delete(n)}_clearCacheInsideParent(n,s){if(s==0)this._cachedMapping.has(n)?this._clearCacheAll(n):this._clearCacheStartingBefore(n);else{const l=n.getChild(s-1);this._clearCacheStartingBefore(l)}}_clearCacheAll(n){const s=this._cachedMapping.get(n);s.maxModelOffset>0&&(s.maxModelOffset=0,s.cacheList.length=1,s.cacheMap.clear(),s.cacheMap.set(0,s.cacheList[0]))}_clearCacheStartingBefore(n){const s=this._nodeToCacheListIndex.get(n);if(s===void 0){const c=n.parent;this._cachedMapping.has(c)||this._clearCacheStartingBefore(c);return}let l=n.parent;for(;!this._cachedMapping.has(l);)l=l.parent;this._clearCacheFromIndex(l,s)}_clearCacheFromIndex(n,s){s===0&&(s=1);const l=this._cachedMapping.get(n),c=l.cacheList[s-1];if(!c)return;l.maxModelOffset=c.modelOffset;const u=l.cacheList.splice(s);for(const d of u){l.cacheMap.delete(d.modelOffset);const h=d.viewPosition.nodeBefore;this._nodeToCacheListIndex.delete(h)}}_findInCacheList(n,s){let l=0,c=n.length-1,u=c-l>>1,d=n[u];for(;l<c;)d.modelOffset<s?l=u+1:c=u-1,u=l+(c-l>>1),d=n[u];return d.modelOffset<=s?d:n[u-1]}}class ModelConsumable{constructor(){M(this,"_consumable",new Map);M(this,"_textProxyRegistry",new Map)}add(a,n){n=_normalizeConsumableType(n),a instanceof TextProxy&&(a=this._getSymbolForTextProxy(a)),this._consumable.has(a)||this._consumable.set(a,new Map),this._consumable.get(a).set(n,!0)}consume(a,n){return n=_normalizeConsumableType(n),a instanceof TextProxy&&(a=this._getSymbolForTextProxy(a)),this.test(a,n)?(this._consumable.get(a).set(n,!1),!0):!1}test(a,n){n=_normalizeConsumableType(n),a instanceof TextProxy&&(a=this._getSymbolForTextProxy(a));const s=this._consumable.get(a);if(s===void 0)return null;const l=s.get(n);return l===void 0?null:l}revert(a,n){n=_normalizeConsumableType(n),a instanceof TextProxy&&(a=this._getSymbolForTextProxy(a));const s=this.test(a,n);return s===!1?(this._consumable.get(a).set(n,!0),!0):s===!0?!1:null}verifyAllConsumed(a){const n=[];for(const[s,l]of this._consumable)for(const[c,u]of l){const d=c.split(":")[0];u&&a==d&&n.push({event:c,item:s.name||s.description})}if(n.length)throw new CKEditorError("conversion-model-consumable-not-consumed",null,{items:n})}_getSymbolForTextProxy(a){let n=null;const s=this._textProxyRegistry.get(a.startOffset);if(s){const l=s.get(a.endOffset);l&&(n=l.get(a.parent))}return n||(n=this._addSymbolForTextProxy(a)),n}_addSymbolForTextProxy(a){const n=a.startOffset,s=a.endOffset,l=a.parent,c=Symbol("$textProxy:"+a.data);let u,d;return u=this._textProxyRegistry.get(n),u||(u=new Map,this._textProxyRegistry.set(n,u)),d=u.get(s),d||(d=new Map,u.set(s,d)),d.set(l,c),c}}function _normalizeConsumableType(o){const a=o.split(":");return a[0]=="insert"?a[0]:a[0]=="addMarker"||a[0]=="removeMarker"?o:a.length>1?a[0]+":"+a[1]:a[0]}class DowncastDispatcher extends EmitterMixin(){constructor(n){super();M(this,"_conversionApi");M(this,"_firedEventsMap");this._conversionApi={dispatcher:this,...n},this._firedEventsMap=new WeakMap}convertChanges(n,s,l){const c=this._createConversionApi(l,n.getRefreshedItems());for(const d of n.getMarkersToRemove())this._convertMarkerRemove(d.name,d.range,c);const u=this._reduceChanges(n.getChanges());for(const d of u)d.type==="insert"?this._convertInsert(Range._createFromPositionAndShift(d.position,d.length),c):d.type==="reinsert"?this._convertReinsert(Range._createFromPositionAndShift(d.position,d.length),c):d.type==="remove"?this._convertRemove(d.position,d.length,d.name,c):this._convertAttribute(d.range,d.attributeKey,d.attributeOldValue,d.attributeNewValue,c);c.mapper.flushDeferredBindings();for(const d of c.mapper.flushUnboundMarkerNames()){const h=s.get(d).getRange();this._convertMarkerRemove(d,h,c),this._convertMarkerAdd(d,h,c)}for(const d of n.getMarkersToAdd())this._convertMarkerAdd(d.name,d.range,c);c.consumable.verifyAllConsumed("insert")}convert(n,s,l,c={}){const u=this._createConversionApi(l,void 0,c);this._convertInsert(n,u);for(const[d,h]of s)this._convertMarkerAdd(d,h,u);u.consumable.verifyAllConsumed("insert")}convertSelection(n,s,l){const c=this._createConversionApi(l);this.fire("cleanSelection",{selection:n},c);const u=n.getFirstPosition().root;if(!c.mapper.toViewElement(u))return;const d=Array.from(s.getMarkersAtPosition(n.getFirstPosition()));if(this._addConsumablesForSelection(c.consumable,n,d),this.fire("selection",{selection:n},c),!!n.isCollapsed){for(const h of d)if(c.consumable.test(n,"addMarker:"+h.name)){const f=h.getRange();if(!shouldMarkerChangeBeConverted(n.getFirstPosition(),h,c.mapper))continue;const p={item:n,markerName:h.name,markerRange:f};this.fire(`addMarker:${h.name}`,p,c)}for(const h of n.getAttributeKeys())if(c.consumable.test(n,"attribute:"+h)){const f={item:n,range:n.getFirstRange(),attributeKey:h,attributeOldValue:null,attributeNewValue:n.getAttribute(h)};this.fire(`attribute:${h}:$text`,f,c)}}}_convertInsert(n,s,l={}){l.doNotAddConsumables||this._addConsumablesForInsert(s.consumable,n);for(const c of n.getWalker({shallow:!0}))this._testAndFire("insert",walkerValueToEventData(c),s)}_convertRemove(n,s,l,c){this.fire(`remove:${l}`,{position:n,length:s},c)}_convertAttribute(n,s,l,c,u){this._addConsumablesForRange(u.consumable,n,`attribute:${s}`);for(const d of n){const h={item:d.item,range:Range._createFromPositionAndShift(d.previousPosition,d.length),attributeKey:s,attributeOldValue:l,attributeNewValue:c};this._testAndFire(`attribute:${s}`,h,u)}}_convertReinsert(n,s){const l=Array.from(n.getWalker({shallow:!0}));this._addConsumablesForInsert(s.consumable,l);for(const c of l.map(walkerValueToEventData))this._testAndFire("insert",{...c,reconversion:!0},s)}_convertMarkerAdd(n,s,l){if(s.root.rootName=="$graveyard")return;const c=`addMarker:${n}`;if(l.consumable.add(s,c),this.fire(c,{markerName:n,markerRange:s},l),!!l.consumable.consume(s,c)){this._addConsumablesForRange(l.consumable,s,c);for(const u of s.getItems()){if(!l.consumable.test(u,c))continue;const d={item:u,range:Range._createOn(u),markerName:n,markerRange:s};this.fire(c,d,l)}}}_convertMarkerRemove(n,s,l){s.root.rootName!="$graveyard"&&this.fire(`removeMarker:${n}`,{markerName:n,markerRange:s},l)}_reduceChanges(n){const s={changes:n};return this.fire("reduceChanges",s),s.changes}_addConsumablesForInsert(n,s){for(const l of s){const c=l.item;if(n.test(c,"insert")===null){n.add(c,"insert");for(const u of c.getAttributeKeys())n.add(c,"attribute:"+u)}}return n}_addConsumablesForRange(n,s,l){for(const c of s.getItems())n.add(c,l);return n}_addConsumablesForSelection(n,s,l){n.add(s,"selection");for(const c of l)n.add(s,"addMarker:"+c.name);for(const c of s.getAttributeKeys())n.add(s,"attribute:"+c);return n}_testAndFire(n,s,l){const c=getEventName(n,s),u=s.item.is("$textProxy")?l.consumable._getSymbolForTextProxy(s.item):s.item,d=this._firedEventsMap.get(l),h=d.get(u);if(!h)d.set(u,new Set([c]));else if(!h.has(c))h.add(c);else return;this.fire(c,s,l)}_testAndFireAddAttributes(n,s){const l={item:n,range:Range._createOn(n)};for(const c of l.item.getAttributeKeys())l.attributeKey=c,l.attributeOldValue=null,l.attributeNewValue=l.item.getAttribute(c),this._testAndFire(`attribute:${c}`,l,s)}_createConversionApi(n,s=new Set,l={}){const c={...this._conversionApi,consumable:new ModelConsumable,writer:n,options:l,convertItem:u=>this._convertInsert(Range._createOn(u),c),convertChildren:u=>this._convertInsert(Range._createIn(u),c,{doNotAddConsumables:!0}),convertAttributes:u=>this._testAndFireAddAttributes(u,c),canReuseView:u=>!s.has(c.mapper.toModelElement(u))};return this._firedEventsMap.set(c,new Map),c}}function shouldMarkerChangeBeConverted(o,a,n){const s=a.getRange(),l=Array.from(o.getAncestors());return l.shift(),l.reverse(),!l.some(u=>{if(s.containsItem(u))return!!n.toViewElement(u).getCustomProperty("addHighlight")})}function getEventName(o,a){const n=a.item.is("element")?a.item.name:"$text";return`${o}:${n}`}function walkerValueToEventData(o){return{item:o.item,range:Range._createFromPositionAndShift(o.previousPosition,o.length)}}let Node$1$1=class extends TypeCheckable{constructor(n){super();M(this,"parent",null);M(this,"_attrs");M(this,"_index",null);M(this,"_startOffset",null);this._attrs=toMap(n)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){const n=this.index;return n!==null&&this.parent.getChild(n+1)||null}get previousSibling(){const n=this.index;return n!==null&&this.parent.getChild(n-1)||null}get root(){let n=this;for(;n.parent;)n=n.parent;return n}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){const n=[];let s=this;for(;s.parent;)n.unshift(s.startOffset),s=s.parent;return n}getAncestors(n={}){const s=[];let l=n.includeSelf?this:this.parent;for(;l;)s[n.parentFirst?"push":"unshift"](l),l=l.parent;return s}getCommonAncestor(n,s={}){const l=this.getAncestors(s),c=n.getAncestors(s);let u=0;for(;l[u]==c[u]&&l[u];)u++;return u===0?null:l[u-1]}isBefore(n){if(this==n||this.root!==n.root)return!1;const s=this.getPath(),l=n.getPath(),c=compareArrays(s,l);switch(c){case"prefix":return!0;case"extension":return!1;default:return s[c]<l[c]}}isAfter(n){return this==n||this.root!==n.root?!1:!this.isBefore(n)}hasAttribute(n){return this._attrs.has(n)}getAttribute(n){return this._attrs.get(n)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){const n={};return this._attrs.size&&(n.attributes=Array.from(this._attrs).reduce((s,l)=>(s[l[0]]=l[1],s),{})),n}_clone(n){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(n,s){this._attrs.set(n,s)}_setAttributesTo(n){this._attrs=toMap(n)}_removeAttribute(n){return this._attrs.delete(n)}_clearAttributes(){this._attrs.clear()}};Node$1$1.prototype.is=function(o){return o==="node"||o==="model:node"};class Selection extends EmitterMixin(TypeCheckable){constructor(...n){super();M(this,"_lastRangeBackward",!1);M(this,"_attrs",new Map);M(this,"_ranges",[]);n.length&&this.setTo(...n)}get anchor(){if(this._ranges.length>0){const n=this._ranges[this._ranges.length-1];return this._lastRangeBackward?n.end:n.start}return null}get focus(){if(this._ranges.length>0){const n=this._ranges[this._ranges.length-1];return this._lastRangeBackward?n.start:n.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(n){if(this.rangeCount!=n.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(n.anchor)||!this.focus.isEqual(n.focus))return!1;for(const s of this._ranges){let l=!1;for(const c of n._ranges)if(s.isEqual(c)){l=!0;break}if(!l)return!1}return!0}*getRanges(){for(const n of this._ranges)yield new Range(n.start,n.end)}getFirstRange(){let n=null;for(const s of this._ranges)(!n||s.start.isBefore(n.start))&&(n=s);return n?new Range(n.start,n.end):null}getLastRange(){let n=null;for(const s of this._ranges)(!n||s.end.isAfter(n.end))&&(n=s);return n?new Range(n.start,n.end):null}getFirstPosition(){const n=this.getFirstRange();return n?n.start.clone():null}getLastPosition(){const n=this.getLastRange();return n?n.end.clone():null}setTo(...n){let[s,l,c]=n;if(typeof l=="object"&&(c=l,l=void 0),s===null)this._setRanges([]);else if(s instanceof Selection)this._setRanges(s.getRanges(),s.isBackward);else if(s&&typeof s.getRanges=="function")this._setRanges(s.getRanges(),s.isBackward);else if(s instanceof Range)this._setRanges([s],!!c&&!!c.backward);else if(s instanceof Position)this._setRanges([new Range(s)]);else if(s instanceof Node$1$1){const u=!!c&&!!c.backward;let d;if(l=="in")d=Range._createIn(s);else if(l=="on")d=Range._createOn(s);else if(l!==void 0)d=new Range(Position._createAt(s,l));else throw new CKEditorError("model-selection-setto-required-second-parameter",[this,s]);this._setRanges([d],u)}else if(isIterable$1(s))this._setRanges(s,c&&!!c.backward);else throw new CKEditorError("model-selection-setto-not-selectable",[this,s])}_setRanges(n,s=!1){const l=Array.from(n),c=l.some(u=>{if(!(u instanceof Range))throw new CKEditorError("model-selection-set-ranges-not-range",[this,n]);return this._ranges.every(d=>!d.isEqual(u))});l.length===this._ranges.length&&!c||(this._replaceAllRanges(l),this._lastRangeBackward=!!s,this.fire("change:range",{directChange:!0}))}setFocus(n,s){if(this.anchor===null)throw new CKEditorError("model-selection-setfocus-no-ranges",[this,n]);const l=Position._createAt(n,s);if(l.compareWith(this.focus)=="same")return;const c=this.anchor;this._ranges.length&&this._popRange(),l.compareWith(c)=="before"?(this._pushRange(new Range(l,c)),this._lastRangeBackward=!0):(this._pushRange(new Range(c,l)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(n){return this._attrs.get(n)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(n){return this._attrs.has(n)}removeAttribute(n){this.hasAttribute(n)&&(this._attrs.delete(n),this.fire("change:attribute",{attributeKeys:[n],directChange:!0}))}setAttribute(n,s){this.getAttribute(n)!==s&&(this._attrs.set(n,s),this.fire("change:attribute",{attributeKeys:[n],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){const n=new WeakSet;for(const s of this.getRanges()){const l=getParentBlock$1(s.start,n);isStartBlockSelected(l,s)&&(yield l);const c=s.getWalker();for(const d of c){const h=d.item;d.type=="elementEnd"&&isUnvisitedTopBlock(h,n,s)?yield h:d.type=="elementStart"&&h.is("model:element")&&h.root.document.model.schema.isBlock(h)&&c.jumpTo(Position._createAt(h,"end"))}const u=getParentBlock$1(s.end,n);isEndBlockSelected(u,s)&&(yield u)}}containsEntireContent(n=this.anchor.root){const s=Position._createAt(n,0),l=Position._createAt(n,"end");return s.isTouching(this.getFirstPosition())&&l.isTouching(this.getLastPosition())}_pushRange(n){this._checkRange(n),this._ranges.push(new Range(n.start,n.end))}_checkRange(n){for(let s=0;s<this._ranges.length;s++)if(n.isIntersecting(this._ranges[s]))throw new CKEditorError("model-selection-range-intersects",[this,n],{addedRange:n,intersectingRange:this._ranges[s]})}_replaceAllRanges(n){this._removeAllRanges();for(const s of n)this._pushRange(s)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}}Selection.prototype.is=function(o){return o==="selection"||o==="model:selection"};function isUnvisitedBlock(o,a){return a.has(o)?!1:(a.add(o),o.root.document.model.schema.isBlock(o)&&!!o.parent)}function isUnvisitedTopBlock(o,a,n){return isUnvisitedBlock(o,a)&&isTopBlockInRange(o,n)}function getParentBlock$1(o,a){const s=o.parent.root.document.model.schema,l=o.parent.getAncestors({parentFirst:!0,includeSelf:!0});let c=!1;const u=l.find(d=>c?!1:(c=s.isLimit(d),!c&&isUnvisitedBlock(d,a)));return l.forEach(d=>a.add(d)),u}function isTopBlockInRange(o,a){const n=findAncestorBlock(o);return n?!a.containsRange(Range._createOn(n),!0):!0}function isStartBlockSelected(o,a){return o?a.isCollapsed||o.isEmpty?!0:a.start.isTouching(Position._createAt(o,o.maxOffset))?!1:isTopBlockInRange(o,a):!1}function isEndBlockSelected(o,a){return o?a.isCollapsed||o.isEmpty?!0:a.end.isTouching(Position._createAt(o,0))?!1:isTopBlockInRange(o,a):!1}function findAncestorBlock(o){const a=o.root.document.model.schema;let n=o.parent;for(;n;){if(a.isBlock(n))return n;n=n.parent}}class LiveRange extends EmitterMixin(Range){constructor(a,n){super(a,n),bindWithDocument$1.call(this)}detach(){this.stopListening()}toRange(){return new Range(this.start,this.end)}static fromRange(a){return new LiveRange(a.start,a.end)}}LiveRange.prototype.is=function(o){return o==="liveRange"||o==="model:liveRange"||o=="range"||o==="model:range"};function bindWithDocument$1(){this.listenTo(this.root.document.model,"applyOperation",(o,a)=>{const n=a[0];n.isDocumentOperation&&transform$2.call(this,n)},{priority:"low"})}function transform$2(o){const a=this.getTransformedByOperation(o),n=Range._createFromRanges(a),s=!n.isEqual(this),l=doesOperationChangeRangeContent(this,o);let c=null;if(s){n.root.rootName=="$graveyard"&&(o.type=="remove"?c=o.sourcePosition:c=o.deletionPosition);const u=this.toRange();this.start=n.start,this.end=n.end,this.fire("change:range",u,{deletionPosition:c})}else l&&this.fire("change:content",this.toRange(),{deletionPosition:c})}function doesOperationChangeRangeContent(o,a){switch(a.type){case"insert":return o.containsPosition(a.position);case"move":case"remove":case"reinsert":case"merge":return o.containsPosition(a.sourcePosition)||o.start.isEqual(a.sourcePosition)||o.containsPosition(a.targetPosition);case"split":return o.containsPosition(a.splitPosition)||o.containsPosition(a.insertionPosition)}return!1}class Text extends Node$1$1{constructor(n,s){super(s);M(this,"_data");this._data=n||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){const n=super.toJSON();return n.data=this.data,n}_clone(){return new Text(this.data,this.getAttributes())}static fromJSON(n){return new Text(n.data,n.attributes)}}Text.prototype.is=function(o){return o==="$text"||o==="model:$text"||o==="text"||o==="model:text"||o==="node"||o==="model:node"};const storePrefix="selection:";class DocumentSelection extends EmitterMixin(TypeCheckable){constructor(n){super();M(this,"_selection");this._selection=new LiveSelection(n),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(n){return this._selection.containsEntireContent(n)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(n){return this._selection.getAttribute(n)}hasAttribute(n){return this._selection.hasAttribute(n)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(n){this._selection.observeMarkers(n)}_setFocus(n,s){this._selection.setFocus(n,s)}_setTo(...n){this._selection.setTo(...n)}_setAttribute(n,s){this._selection.setAttribute(n,s)}_removeAttribute(n){this._selection.removeAttribute(n)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(n){this._selection.restoreGravity(n)}static _getStoreAttributeKey(n){return storePrefix+n}static _isStoreAttributeKey(n){return n.startsWith(storePrefix)}}DocumentSelection.prototype.is=function(o){return o==="selection"||o=="model:selection"||o=="documentSelection"||o=="model:documentSelection"};class LiveSelection extends Selection{constructor(n){super();M(this,"markers",new Collection({idProperty:"name"}));M(this,"_model");M(this,"_document");M(this,"_attributePriority",new Map);M(this,"_selectionRestorePosition",null);M(this,"_hasChangedRange",!1);M(this,"_overriddenGravityRegister",new Set);M(this,"_observedMarkers",new Set);this._model=n.model,this._document=n,this.listenTo(this._model,"applyOperation",(s,l)=>{const c=l[0];!c.isDocumentOperation||c.type=="marker"||c.type=="rename"||c.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(s,l,c,u)=>{this._updateMarker(l,u)}),this.listenTo(this._document,"change",(s,l)=>{clearAttributesStoredInElement(this._model,l)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let n=0;n<this._ranges.length;n++)this._ranges[n].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*super.getRanges():yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...n){super.setTo(...n),this._updateAttributes(!0),this.updateMarkers()}setFocus(n,s){super.setFocus(n,s),this._updateAttributes(!0),this.updateMarkers()}setAttribute(n,s){if(this._setAttribute(n,s)){const l=[n];this.fire("change:attribute",{attributeKeys:l,directChange:!0})}}removeAttribute(n){if(this._removeAttribute(n)){const s=[n];this.fire("change:attribute",{attributeKeys:s,directChange:!0})}}overrideGravity(){const n=uid();return this._overriddenGravityRegister.add(n),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),n}restoreGravity(n){if(!this._overriddenGravityRegister.has(n))throw new CKEditorError("document-selection-gravity-wrong-restore",this,{uid:n});this._overriddenGravityRegister.delete(n),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(n){this._observedMarkers.add(n),this.updateMarkers()}_replaceAllRanges(n){this._validateSelectionRanges(n),super._replaceAllRanges(n)}_popRange(){this._ranges.pop().detach()}_pushRange(n){const s=this._prepareRange(n);s&&this._ranges.push(s)}_validateSelectionRanges(n){for(const s of n)if(!this._document._validateSelectionRange(s))throw new CKEditorError("document-selection-wrong-position",this,{range:s})}_prepareRange(n){if(this._checkRange(n),n.root==this._document.graveyard)return;const s=LiveRange.fromRange(n);return s.on("change:range",(l,c,u)=>{if(this._hasChangedRange=!0,s.root==this._document.graveyard){this._selectionRestorePosition=u.deletionPosition;const d=this._ranges.indexOf(s);this._ranges.splice(d,1),s.detach()}}),s}updateMarkers(){if(!this._observedMarkers.size)return;const n=[];let s=!1;for(const c of this._model.markers){const u=c.name.split(":",1)[0];if(!this._observedMarkers.has(u))continue;const d=c.getRange();for(const h of this.getRanges())d.containsRange(h,!h.isCollapsed)&&n.push(c)}const l=Array.from(this.markers);for(const c of n)this.markers.has(c)||(this.markers.add(c),s=!0);for(const c of Array.from(this.markers))n.includes(c)||(this.markers.remove(c),s=!0);s&&this.fire("change:marker",{oldMarkers:l,directChange:!1})}_updateMarker(n,s){const l=n.name.split(":",1)[0];if(!this._observedMarkers.has(l))return;let c=!1;const u=Array.from(this.markers),d=this.markers.has(n);if(!s)d&&(this.markers.remove(n),c=!0);else{let h=!1;for(const f of this.getRanges())if(s.containsRange(f,!f.isCollapsed)){h=!0;break}h&&!d?(this.markers.add(n),c=!0):!h&&d&&(this.markers.remove(n),c=!0)}c&&this.fire("change:marker",{oldMarkers:u,directChange:!1})}_updateAttributes(n){const s=toMap(this._getSurroundingAttributes()),l=toMap(this.getAttributes());if(n)this._attributePriority=new Map,this._attrs=new Map;else for(const[u,d]of this._attributePriority)d=="low"&&(this._attrs.delete(u),this._attributePriority.delete(u));this._setAttributesTo(s);const c=[];for(const[u,d]of this.getAttributes())(!l.has(u)||l.get(u)!==d)&&c.push(u);for(const[u]of l)this.hasAttribute(u)||c.push(u);c.length>0&&this.fire("change:attribute",{attributeKeys:c,directChange:!1})}_setAttribute(n,s,l=!0){const c=l?"normal":"low";return c=="low"&&this._attributePriority.get(n)=="normal"||super.getAttribute(n)===s?!1:(this._attrs.set(n,s),this._attributePriority.set(n,c),!0)}_removeAttribute(n,s=!0){const l=s?"normal":"low";return l=="low"&&this._attributePriority.get(n)=="normal"||(this._attributePriority.set(n,l),!super.hasAttribute(n))?!1:(this._attrs.delete(n),!0)}_setAttributesTo(n){const s=new Set;for(const[l,c]of this.getAttributes())n.get(l)!==c&&this._removeAttribute(l,!1);for(const[l,c]of n)this._setAttribute(l,c,!1)&&s.add(l);return s}*getStoredAttributes(){const n=this.getFirstPosition().parent;if(this.isCollapsed&&n.isEmpty)for(const s of n.getAttributeKeys())s.startsWith(storePrefix)&&(yield[s.substr(storePrefix.length),n.getAttribute(s)])}_getSurroundingAttributes(){const n=this.getFirstPosition(),s=this._model.schema;if(n.root.rootName=="$graveyard")return null;let l=null;if(this.isCollapsed){const c=n.textNode?n.textNode:n.nodeBefore,u=n.textNode?n.textNode:n.nodeAfter;if(this.isGravityOverridden||(l=getTextAttributes(c,s)),l||(l=getTextAttributes(u,s)),!this.isGravityOverridden&&!l){let d=c;for(;d&&!l;)d=d.previousSibling,l=getTextAttributes(d,s)}if(!l){let d=u;for(;d&&!l;)d=d.nextSibling,l=getTextAttributes(d,s)}l||(l=this.getStoredAttributes())}else{const c=this.getFirstRange();for(const u of c){if(u.item.is("element")&&s.isObject(u.item)){l=getTextAttributes(u.item,s);break}if(u.type=="text"){l=u.item.getAttributes();break}}}return l}_fixGraveyardSelection(n){const s=this._model.schema.getNearestSelectionRange(n);s&&this._pushRange(s)}}function getTextAttributes(o,a){if(!o)return null;if(o instanceof TextProxy||o instanceof Text)return o.getAttributes();if(!a.isInline(o))return null;if(!a.isObject(o))return[];const n=[];for(const[s,l]of o.getAttributes())a.checkAttribute("$text",s)&&a.getAttributeProperties(s).copyFromObject!==!1&&n.push([s,l]);return n}function clearAttributesStoredInElement(o,a){const n=o.document.differ;for(const s of n.getChanges()){if(s.type!="insert")continue;const l=s.position.parent;s.length===l.maxOffset&&o.enqueueChange(a,u=>{const d=Array.from(l.getAttributeKeys()).filter(h=>h.startsWith(storePrefix));for(const h of d)u.removeAttribute(h,l)})}}class NodeList{constructor(a){M(this,"_nodes",[]);M(this,"_offsetToNode",[]);a&&this._insertNodes(0,a)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(a){return this._nodes[a]||null}getNodeAtOffset(a){return this._offsetToNode[a]||null}getNodeIndex(a){return a.index}getNodeStartOffset(a){return a.startOffset}indexToOffset(a){if(a==this._nodes.length)return this.maxOffset;const n=this._nodes[a];if(!n)throw new CKEditorError("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(n)}offsetToIndex(a){if(a==this._offsetToNode.length)return this._nodes.length;const n=this._offsetToNode[a];if(!n)throw new CKEditorError("model-nodelist-offset-out-of-bounds",this,{offset:a,nodeList:this});return this.getNodeIndex(n)}_insertNodes(a,n){const s=[];for(const c of n){if(!(c instanceof Node$1$1))throw new CKEditorError("model-nodelist-insertnodes-not-node",this);s.push(c)}let l=this.indexToOffset(a);spliceArray(this._nodes,s,a),spliceArray(this._offsetToNode,makeOffsetsArray(s),l);for(let c=a;c<this._nodes.length;c++)this._nodes[c]._index=c,this._nodes[c]._startOffset=l,l+=this._nodes[c].offsetSize}_removeNodes(a,n=1){if(n==0)return[];let s=this.indexToOffset(a);const l=this._nodes.splice(a,n),c=l[l.length-1],u=c.startOffset+c.offsetSize-s;this._offsetToNode.splice(s,u);for(const d of l)d._index=null,d._startOffset=null;for(let d=a;d<this._nodes.length;d++)this._nodes[d]._index=d,this._nodes[d]._startOffset=s,s+=this._nodes[d].offsetSize;return l}_removeNodesArray(a){if(a.length==0)return;for(const s of a)s._index=null,s._startOffset=null;this._nodes=this._nodes.filter(s=>s.index!==null),this._offsetToNode=this._offsetToNode.filter(s=>s.index!==null);let n=0;for(let s=0;s<this._nodes.length;s++)this._nodes[s]._index=s,this._nodes[s]._startOffset=n,n+=this._nodes[s].offsetSize}toJSON(){return this._nodes.map(a=>a.toJSON())}}function makeOffsetsArray(o){const a=[];let n=0;for(const s of o)for(let l=0;l<s.offsetSize;l++)a[n++]=s;return a}let Element$2=class or extends Node$1$1{constructor(n,s,l){super(s);M(this,"name");M(this,"_children",new NodeList);this.name=n,l&&this._insertChild(0,l)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(n){return this._children.getNode(n)}getChildAtOffset(n){return this._children.getNodeAtOffset(n)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(n){return this._children.getNodeIndex(n)}getChildStartOffset(n){return this._children.getNodeStartOffset(n)}offsetToIndex(n){return this._children.offsetToIndex(n)}getNodeByPath(n){let s=this;for(const l of n)s=s.getChildAtOffset(l);return s}findAncestor(n,s={}){let l=s.includeSelf?this:this.parent;for(;l;){if(l.name===n)return l;l=l.parent}return null}toJSON(){const n=super.toJSON();if(n.name=this.name,this._children.length>0){n.children=[];for(const s of this._children)n.children.push(s.toJSON())}return n}_clone(n=!1){const s=n?cloneNodes(this._children):void 0;return new or(this.name,this.getAttributes(),s)}_appendChild(n){this._insertChild(this.childCount,n)}_insertChild(n,s){const l=normalize$1$1(s);for(const c of l)c.parent!==null&&c._remove(),c.parent=this;this._children._insertNodes(n,l)}_removeChildren(n,s=1){const l=this._children._removeNodes(n,s);for(const c of l)c.parent=null;return l}_removeChildrenArray(n){this._children._removeNodesArray(n);for(const s of n)s.parent=null}static fromJSON(n){let s;if(n.children){s=[];for(const l of n.children)l.name?s.push(or.fromJSON(l)):s.push(Text.fromJSON(l))}return new or(n.name,n.attributes,s)}};Element$2.prototype.is=function(o,a){return a?a===this.name&&(o==="element"||o==="model:element"):o==="element"||o==="model:element"||o==="node"||o==="model:node"};function normalize$1$1(o){if(typeof o=="string")return[new Text(o)];isIterable$1(o)||(o=[o]);const a=[];for(const n of o)typeof n=="string"?a.push(new Text(n)):n instanceof TextProxy?a.push(new Text(n.data,n.getAttributes())):a.push(n);return a}function cloneNodes(o){const a=[];for(const n of o)a.push(n._clone(!0));return a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ConversionHelpers{constructor(a){M(this,"_dispatchers");this._dispatchers=a}add(a){for(const n of this._dispatchers)a(n);return this}}class DowncastHelpers extends ConversionHelpers{elementToElement(a){return this.add(downcastElementToElement(a))}elementToStructure(a){return this.add(downcastElementToStructure(a))}attributeToElement(a){return this.add(downcastAttributeToElement(a))}attributeToAttribute(a){return this.add(downcastAttributeToAttribute(a))}markerToElement(a){return this.add(downcastMarkerToElement(a))}markerToHighlight(a){return this.add(downcastMarkerToHighlight(a))}markerToData(a){return this.add(downcastMarkerToData(a))}}function insertText(){return(o,a,n)=>{if(!n.consumable.consume(a.item,o.name))return;const s=n.writer,l=n.mapper.toViewPosition(a.range.start),c=s.createText(a.item.data);s.insert(l,c)}}function insertAttributesAndChildren(){return(o,a,n)=>{n.convertAttributes(a.item),!a.reconversion&&a.item.is("element")&&!a.item.isEmpty&&n.convertChildren(a.item)}}function remove$2(){return(o,a,n)=>{const s=n.mapper.toViewPosition(a.position),l=a.position.getShiftedBy(a.length),c=n.mapper.toViewPosition(l,{isPhantom:!0}),u=n.writer.createRange(s,c),d=n.writer.remove(u.getTrimmed());for(const h of n.writer.createRangeIn(d).getItems())n.mapper.unbindViewElement(h,{defer:!0})}}function createViewElementFromHighlightDescriptor(o,a){const n=o.createAttributeElement("span",a.attributes);return a.classes&&n._addClass(a.classes),typeof a.priority=="number"&&(n._priority=a.priority),n._id=a.id,n}function convertRangeSelection(){return(o,a,n)=>{const s=a.selection;if(s.isCollapsed||!n.consumable.consume(s,"selection"))return;const l=[];for(const c of s.getRanges())l.push(n.mapper.toViewRange(c));n.writer.setSelection(l,{backward:s.isBackward})}}function convertCollapsedSelection(){return(o,a,n)=>{const s=a.selection;if(!s.isCollapsed||!n.consumable.consume(s,"selection"))return;const l=n.writer,c=s.getFirstPosition(),u=n.mapper.toViewPosition(c),d=l.breakAttributes(u);l.setSelection(d)}}function cleanSelection(){return(o,a,n)=>{const s=n.writer,l=s.document.selection;for(const c of l.getRanges())c.isCollapsed&&c.end.parent.isAttached()&&n.writer.mergeAttributes(c.start);s.setSelection(null)}}function wrap(o){return(a,n,s)=>{if(!s.consumable.test(n.item,a.name))return;const l=o(n.attributeOldValue,s,n),c=o(n.attributeNewValue,s,n);if(!l&&!c)return;s.consumable.consume(n.item,a.name);const u=s.writer,d=u.document.selection;if(n.item instanceof Selection||n.item instanceof DocumentSelection)u.wrap(d.getFirstRange(),c);else{let h=s.mapper.toViewRange(n.range);n.attributeOldValue!==null&&l&&(h=u.unwrap(h,l)),n.attributeNewValue!==null&&c&&u.wrap(h,c)}}}function insertElement(o,a=defaultConsumer){return(n,s,l)=>{if(!a(s.item,l.consumable,{preflight:!0}))return;const c=o(s.item,l,s);if(!c)return;a(s.item,l.consumable);const u=l.mapper.toViewPosition(s.range.start);l.mapper.bindElements(s.item,c),l.writer.insert(u,c),l.convertAttributes(s.item),reinsertOrConvertNodes(c,s.item.getChildren(),l,{reconversion:s.reconversion})}}function insertStructure(o,a){return(n,s,l)=>{if(!a(s.item,l.consumable,{preflight:!0}))return;const c=new Map;l.writer._registerSlotFactory(createSlotFactory(s.item,c,l));const u=o(s.item,l,s);if(l.writer._clearSlotFactory(),!u)return;validateSlotsChildren(s.item,c,l),a(s.item,l.consumable);const d=l.mapper.toViewPosition(s.range.start);l.mapper.bindElements(s.item,u),l.writer.insert(d,u),l.convertAttributes(s.item),fillSlots(u,c,l,{reconversion:s.reconversion})}}function insertUIElement(o){return(a,n,s)=>{n.isOpening=!0;const l=o(n,s);n.isOpening=!1;const c=o(n,s);if(!l||!c)return;const u=n.markerRange;if(u.isCollapsed&&!s.consumable.consume(u,a.name))return;for(const f of u)if(!s.consumable.consume(f.item,a.name))return;const d=s.mapper,h=s.writer;h.insert(d.toViewPosition(u.start),l),s.mapper.bindElementToMarker(l,n.markerName),u.isCollapsed||(h.insert(d.toViewPosition(u.end),c),s.mapper.bindElementToMarker(c,n.markerName)),a.stop()}}function removeUIElement(){return(o,a,n)=>{const s=n.mapper.markerNameToElements(a.markerName);if(s){for(const l of s)n.mapper.unbindElementFromMarkerName(l,a.markerName),n.writer.clear(n.writer.createRangeOn(l),l);n.writer.clearClonedElementsGroup(a.markerName),o.stop()}}}function insertMarkerData(o){return(a,n,s)=>{const l=o(n.markerName,s);if(!l)return;const c=n.markerRange;s.consumable.consume(c,a.name)&&(handleMarkerBoundary(c,!1,s,n,l),handleMarkerBoundary(c,!0,s,n,l),a.stop())}}function handleMarkerBoundary(o,a,n,s,l){const c=a?o.start:o.end,u=c.nodeAfter&&c.nodeAfter.is("element")?c.nodeAfter:null,d=c.nodeBefore&&c.nodeBefore.is("element")?c.nodeBefore:null;if(u||d){let f,p;a&&u||!a&&!d?(f=u,p=!0):(f=d,p=!1);const g=n.mapper.toViewElement(f);if(g){insertMarkerAsAttribute(g,a,p,n,s,l);return}}const h=n.mapper.toViewPosition(c);insertMarkerAsElement(h,a,n,s,l)}function insertMarkerAsAttribute(o,a,n,s,l,c){const u=`data-${c.group}-${a?"start":"end"}-${n?"before":"after"}`,d=o.hasAttribute(u)?o.getAttribute(u).split(","):[];d.unshift(c.name),s.writer.setAttribute(u,d.join(","),o),s.mapper.bindElementToMarker(o,l.markerName)}function insertMarkerAsElement(o,a,n,s,l){const c=`${l.group}-${a?"start":"end"}`,u=l.name?{name:l.name}:null,d=n.writer.createUIElement(c,u);n.writer.insert(o,d),n.mapper.bindElementToMarker(d,s.markerName)}function removeMarkerData(o){return(a,n,s)=>{const l=o(n.markerName,s);if(!l)return;const c=s.mapper.markerNameToElements(n.markerName);if(!c)return;for(const d of c)s.mapper.unbindElementFromMarkerName(d,n.markerName),d.is("containerElement")?(u(`data-${l.group}-start-before`,d),u(`data-${l.group}-start-after`,d),u(`data-${l.group}-end-before`,d),u(`data-${l.group}-end-after`,d)):s.writer.clear(s.writer.createRangeOn(d),d);s.writer.clearClonedElementsGroup(n.markerName),a.stop();function u(d,h){if(h.hasAttribute(d)){const f=new Set(h.getAttribute(d).split(","));f.delete(l.name),f.size==0?s.writer.removeAttribute(d,h):s.writer.setAttribute(d,Array.from(f).join(","),h)}}}}function changeAttribute(o){return(a,n,s)=>{if(!s.consumable.test(n.item,a.name))return;const l=o(n.attributeOldValue,s,n),c=o(n.attributeNewValue,s,n);if(!l&&!c)return;s.consumable.consume(n.item,a.name);const u=s.mapper.toViewElement(n.item),d=s.writer;if(!u)throw new CKEditorError("conversion-attribute-to-attribute-on-text",s.dispatcher,n);if(n.attributeOldValue!==null&&l){let h=l.value;l.key=="style"&&(typeof l.value=="string"?h=new StylesMap(d.document.stylesProcessor).setTo(l.value).getStylesEntries().map(([f])=>f):h=Object.keys(l.value)),d.removeAttribute(l.key,h,u)}if(n.attributeNewValue!==null&&c){let h=c.value;c.key=="style"&&typeof c.value=="string"&&(h=Object.fromEntries(new StylesMap(d.document.stylesProcessor).setTo(c.value).getStylesEntries())),d.setAttribute(c.key,h,!1,u)}}}function highlightText(o){return(a,n,s)=>{if(!n.item||!(n.item instanceof Selection||n.item instanceof DocumentSelection)&&!n.item.is("$textProxy"))return;const l=prepareDescriptor(o,n,s);if(!l||!s.consumable.consume(n.item,a.name))return;const c=s.writer,u=createViewElementFromHighlightDescriptor(c,l),d=c.document.selection;if(n.item instanceof Selection||n.item instanceof DocumentSelection)c.wrap(d.getFirstRange(),u);else{const h=s.mapper.toViewRange(n.range),f=c.wrap(h,u);for(const p of f.getItems())if(p.is("attributeElement")&&p.isSimilar(u)){s.mapper.bindElementToMarker(p,n.markerName);break}}}}function highlightElement(o){return(a,n,s)=>{if(!n.item||!(n.item instanceof Element$2))return;const l=prepareDescriptor(o,n,s);if(!l||!s.consumable.test(n.item,a.name))return;const c=s.mapper.toViewElement(n.item);if(c&&c.getCustomProperty("addHighlight")){s.consumable.consume(n.item,a.name);for(const d of Range._createIn(n.item))s.consumable.consume(d.item,a.name);c.getCustomProperty("addHighlight")(c,l,s.writer),s.mapper.bindElementToMarker(c,n.markerName)}}}function removeHighlight$1(o){return(a,n,s)=>{if(n.markerRange.isCollapsed)return;const l=prepareDescriptor(o,n,s);if(!l)return;const c=createViewElementFromHighlightDescriptor(s.writer,l),u=s.mapper.markerNameToElements(n.markerName);if(u){for(const d of u)s.mapper.unbindElementFromMarkerName(d,n.markerName),d.is("attributeElement")?s.writer.unwrap(s.writer.createRangeOn(d),c):d.getCustomProperty("removeHighlight")(d,l.id,s.writer);s.writer.clearClonedElementsGroup(n.markerName),a.stop()}}}function downcastElementToElement(o){const a=normalizeModelElementConfig(o.model),n=normalizeToElementConfig(o.view,"container");return a.attributes.length&&(a.children=!0),s=>{s.on(`insert:${a.name}`,insertElement(n,createConsumer(a)),{priority:o.converterPriority||"normal"}),(a.children||a.attributes.length)&&s.on("reduceChanges",createChangeReducer(a),{priority:"low"})}}function downcastElementToStructure(o){const a=normalizeModelElementConfig(o.model),n=normalizeToElementConfig(o.view,"container");return a.children=!0,s=>{if(s._conversionApi.schema.checkChild(a.name,"$text"))throw new CKEditorError("conversion-element-to-structure-disallowed-text",s,{elementName:a.name});s.on(`insert:${a.name}`,insertStructure(n,createConsumer(a)),{priority:o.converterPriority||"normal"}),s.on("reduceChanges",createChangeReducer(a),{priority:"low"})}}function downcastAttributeToElement(o){o=cloneDeep(o);let a=o.model;typeof a=="string"&&(a={key:a});let n=`attribute:${a.key}`;if(a.name&&(n+=":"+a.name),a.values)for(const l of a.values)o.view[l]=normalizeToElementConfig(o.view[l],"attribute");else o.view=normalizeToElementConfig(o.view,"attribute");const s=getFromAttributeCreator(o);return l=>{l.on(n,wrap(s),{priority:o.converterPriority||"normal"})}}function downcastAttributeToAttribute(o){o=cloneDeep(o);let a=o.model;typeof a=="string"&&(a={key:a});let n=`attribute:${a.key}`;if(a.name&&(n+=":"+a.name),a.values)for(const l of a.values)o.view[l]=normalizeToAttributeConfig(o.view[l]);else o.view=normalizeToAttributeConfig(o.view);const s=getFromAttributeCreator(o);return l=>{l.on(n,changeAttribute(s),{priority:o.converterPriority||"normal"})}}function downcastMarkerToElement(o){const a=normalizeToElementConfig(o.view,"ui");return n=>{n.on(`addMarker:${o.model}`,insertUIElement(a),{priority:o.converterPriority||"normal"}),n.on(`removeMarker:${o.model}`,removeUIElement(),{priority:o.converterPriority||"normal"})}}function downcastMarkerToData(o){o=cloneDeep(o);const a=o.model;let n=o.view;return n||(n=s=>({group:a,name:s.substr(o.model.length+1)})),s=>{s.on(`addMarker:${a}`,insertMarkerData(n),{priority:o.converterPriority||"normal"}),s.on(`removeMarker:${a}`,removeMarkerData(n),{priority:o.converterPriority||"normal"})}}function downcastMarkerToHighlight(o){return a=>{a.on(`addMarker:${o.model}`,highlightText(o.view),{priority:o.converterPriority||"normal"}),a.on(`addMarker:${o.model}`,highlightElement(o.view),{priority:o.converterPriority||"normal"}),a.on(`removeMarker:${o.model}`,removeHighlight$1(o.view),{priority:o.converterPriority||"normal"})}}function normalizeModelElementConfig(o){return typeof o=="string"&&(o={name:o}),{name:o.name,attributes:o.attributes?toArray$2(o.attributes):[],children:!!o.children}}function normalizeToElementConfig(o,a){return typeof o=="function"?o:(n,s)=>createViewElementFromDefinition(o,s,a)}function createViewElementFromDefinition(o,a,n){typeof o=="string"&&(o={name:o});let s;const l=a.writer,c=Object.assign({},o.attributes);if(n=="container")s=l.createContainerElement(o.name,c);else if(n=="attribute"){const u={priority:o.priority||AttributeElement.DEFAULT_PRIORITY};s=l.createAttributeElement(o.name,c,u)}else s=l.createUIElement(o.name,c);if(o.styles){const u=Object.keys(o.styles);for(const d of u)l.setStyle(d,o.styles[d],s)}if(o.classes){const u=o.classes;if(typeof u=="string")l.addClass(u,s);else for(const d of u)l.addClass(d,s)}return s}function getFromAttributeCreator(o){return o.model.values?(a,n,s)=>{const l=o.view[a];return l?l(a,n,s):null}:o.view}function normalizeToAttributeConfig(o){return typeof o=="string"?a=>({key:o,value:a}):typeof o=="object"?o.value?()=>o:a=>({key:o.key,value:a}):o}function prepareDescriptor(o,a,n){const s=typeof o=="function"?o(a,n):o;return s?(s.priority||(s.priority=10),s.id||(s.id=a.markerName),s):null}function createChangeReducerCallback(o){return(a,n)=>{if(!a.is("element",o.name))return!1;if(n.type=="attribute"){if(o.attributes.includes(n.attributeKey))return!0}else{/* istanbul ignore else: This is always true because otherwise it would not register a reducer callback. -- @preserve */if(o.children)return!0}return!1}}function createChangeReducer(o){const a=createChangeReducerCallback(o);return(n,s)=>{const l=[];s.reconvertedElements||(s.reconvertedElements=new Set);for(const c of s.changes){const u=c.type=="attribute"?c.range.start.nodeAfter:c.position.parent;if(!u||!a(u,c)){l.push(c);continue}if(!s.reconvertedElements.has(u)){s.reconvertedElements.add(u);const d=Position._createBefore(u);let h=l.length;for(let f=l.length-1;f>=0;f--){const p=l[f],v=(p.type=="attribute"?p.range.start:p.position).compareWith(d);if(v=="before"||p.type=="remove"&&v=="same")break;h=f}l.splice(h,0,{type:"remove",name:u.name,position:d,length:1},{type:"reinsert",name:u.name,position:d,length:1})}}s.changes=l}}function createConsumer(o){return(a,n,s={})=>{const l=["insert"];for(const c of o.attributes)a.hasAttribute(c)&&l.push(`attribute:${c}`);return l.every(c=>n.test(a,c))?(s.preflight||l.forEach(c=>n.consume(a,c)),!0):!1}}function createSlotFactory(o,a,n){return(s,l)=>{const c=s.createContainerElement("$slot");let u=null;if(l==="children")u=Array.from(o.getChildren());else if(typeof l=="function")u=Array.from(o.getChildren()).filter(d=>l(d));else throw new CKEditorError("conversion-slot-mode-unknown",n.dispatcher,{modeOrFilter:l});return a.set(c,u),c}}function validateSlotsChildren(o,a,n){const s=Array.from(a.values()).flat(),l=new Set(s);if(l.size!=s.length)throw new CKEditorError("conversion-slot-filter-overlap",n.dispatcher,{element:o});if(l.size!=o.childCount)throw new CKEditorError("conversion-slot-filter-incomplete",n.dispatcher,{element:o})}function fillSlots(o,a,n,s){n.mapper.on("modelToViewPosition",u,{priority:"highest"});let l=null,c=null;for([l,c]of a)reinsertOrConvertNodes(o,c,n,s),n.writer.move(n.writer.createRangeIn(l),n.writer.createPositionBefore(l)),n.writer.remove(l);n.mapper.off("modelToViewPosition",u);function u(d,h){const f=h.modelPosition.nodeAfter,p=c.indexOf(f);p<0||(h.viewPosition=h.mapper.findPositionIn(l,p))}}function reinsertOrConvertNodes(o,a,n,s){for(const l of a)reinsertNode(o.root,l,n,s)||n.convertItem(l)}function reinsertNode(o,a,n,s){const{writer:l,mapper:c}=n;if(!s.reconversion)return!1;const u=c.toViewElement(a);return!u||u.root==o||!n.canReuseView(u)?!1:(l.move(l.createRangeOn(u),c.toViewPosition(Position._createBefore(a))),!0)}function defaultConsumer(o,a,{preflight:n}={}){return n?a.test(o,"insert"):a.consume(o,"insert")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function autoParagraphEmptyRoots(o){const{schema:a,document:n}=o.model;for(const s of n.getRoots())if(s.isEmpty&&!a.checkChild(s,"$text")&&a.checkChild(s,"paragraph"))return o.insertElement("paragraph",s),!0;return!1}function isParagraphable(o,a,n){const s=n.createContext(o);return!(!n.checkChild(s,"paragraph")||!n.checkChild(s.push("paragraph"),a))}function wrapInParagraph(o,a){const n=a.createElement("paragraph");return a.insert(n,o),a.createPositionAt(n,0)}class UpcastHelpers extends ConversionHelpers{elementToElement(a){return this.add(upcastElementToElement(a))}elementToAttribute(a){return this.add(upcastElementToAttribute(a))}attributeToAttribute(a){return this.add(upcastAttributeToAttribute(a))}elementToMarker(a){return this.add(upcastElementToMarker(a))}dataToMarker(a){return this.add(upcastDataToMarker(a))}}function convertToModelFragment$1(){return(o,a,n)=>{if(!a.modelRange&&n.consumable.consume(a.viewItem,{name:!0})){const{modelRange:s,modelCursor:l}=n.convertChildren(a.viewItem,a.modelCursor);a.modelRange=s,a.modelCursor=l}}}function convertText(){return(o,a,{schema:n,consumable:s,writer:l})=>{let c=a.modelCursor;if(!s.test(a.viewItem))return;if(!n.checkChild(c,"$text")){if(!isParagraphable(c,"$text",n)||a.viewItem.data.trim().length==0)return;c=wrapInParagraph(c,l)}s.consume(a.viewItem);const u=l.createText(a.viewItem.data);l.insert(u,c),a.modelRange=l.createRange(c,c.getShiftedBy(u.offsetSize)),a.modelCursor=a.modelRange.end}}function convertSelectionChange(o,a){return(n,s)=>{const l=s.newSelection,c=[];for(const d of l.getRanges())c.push(a.toModelRange(d));const u=o.createSelection(c,{backward:l.isBackward});u.isEqual(o.document.selection)||o.change(d=>{d.setSelection(u)})}}function upcastElementToElement(o){o=cloneDeep(o);const a=prepareToElementConverter(o),n=getViewElementNameFromConfig(o.view),s=n?`element:${n}`:"element";return l=>{l.on(s,a,{priority:o.converterPriority||"normal"})}}function upcastElementToAttribute(o){o=cloneDeep(o),normalizeModelAttributeConfig(o);const a=prepareToAttributeConverter(o,!1),n=getViewElementNameFromConfig(o.view),s=n?`element:${n}`:"element";return l=>{l.on(s,a,{priority:o.converterPriority||"low"})}}function upcastAttributeToAttribute(o){o=cloneDeep(o);let a=null;(typeof o.view=="string"||o.view.key)&&(a=normalizeViewAttributeKeyValueConfig(o)),normalizeModelAttributeConfig(o,a);const n=prepareToAttributeConverter(o,!0);return s=>{s.on("element",n,{priority:o.converterPriority||"low"})}}function upcastElementToMarker(o){const a=normalizeElementToMarkerModelConfig(o.model);return upcastElementToElement({...o,model:a})}function upcastDataToMarker(o){o=cloneDeep(o),o.model||(o.model=l=>l?o.view+":"+l:o.view);const a={view:o.view,model:o.model},n=prepareToElementConverter(normalizeDataToMarkerConfig(a,"start")),s=prepareToElementConverter(normalizeDataToMarkerConfig(a,"end"));return l=>{l.on(`element:${o.view}-start`,n,{priority:o.converterPriority||"normal"}),l.on(`element:${o.view}-end`,s,{priority:o.converterPriority||"normal"});const c=priorities.low,u=priorities.highest,d=priorities.get(o.converterPriority)/u;l.on("element",upcastAttributeToMarker(a),{priority:c+d})}}function upcastAttributeToMarker(o){return(a,n,s)=>{const l=`data-${o.view}`;if(!s.consumable.test(n.viewItem,{attributes:l+"-end-after"})&&!s.consumable.test(n.viewItem,{attributes:l+"-start-after"})&&!s.consumable.test(n.viewItem,{attributes:l+"-end-before"})&&!s.consumable.test(n.viewItem,{attributes:l+"-start-before"}))return;n.modelRange||Object.assign(n,s.convertChildren(n.viewItem,n.modelCursor)),s.consumable.consume(n.viewItem,{attributes:l+"-end-after"})&&c(n.modelRange.end,n.viewItem.getAttribute(l+"-end-after").split(",")),s.consumable.consume(n.viewItem,{attributes:l+"-start-after"})&&c(n.modelRange.end,n.viewItem.getAttribute(l+"-start-after").split(",")),s.consumable.consume(n.viewItem,{attributes:l+"-end-before"})&&c(n.modelRange.start,n.viewItem.getAttribute(l+"-end-before").split(",")),s.consumable.consume(n.viewItem,{attributes:l+"-start-before"})&&c(n.modelRange.start,n.viewItem.getAttribute(l+"-start-before").split(","));function c(u,d){for(const h of d){const f=o.model(h,s),p=s.writer.createElement("$marker",{"data-name":f});s.writer.insert(p,u),n.modelCursor.isEqual(u)?n.modelCursor=n.modelCursor.getShiftedBy(1):n.modelCursor=n.modelCursor._getTransformedByInsertion(u,1),n.modelRange=n.modelRange._getTransformedByInsertion(u,1)[0]}}}}function getViewElementNameFromConfig(o){return typeof o=="string"?o:typeof o=="object"&&typeof o.name=="string"?o.name:null}function prepareToElementConverter(o){const a=new Matcher(o.view);return(n,s,l)=>{const c=a.match(s.viewItem);if(!c)return;const u=c.match;if(u.name=!0,!l.consumable.test(s.viewItem,u))return;const d=getModelElement(o.model,s.viewItem,l);d&&l.safeInsert(d,s.modelCursor)&&(l.consumable.consume(s.viewItem,u),l.convertChildren(s.viewItem,d),l.updateConversionResult(d,s))}}function getModelElement(o,a,n){return o instanceof Function?o(a,n):n.writer.createElement(o)}function normalizeViewAttributeKeyValueConfig(o){typeof o.view=="string"&&(o.view={key:o.view});const a=o.view.key,n=typeof o.view.value>"u"?/[\s\S]*/:o.view.value;let s;return a=="class"||a=="style"?s={[a=="class"?"classes":"styles"]:n}:s={attributes:{[a]:n}},o.view.name&&(s.name=o.view.name),o.view=s,a}function normalizeModelAttributeConfig(o,a=null){const n=a===null?!0:c=>c.getAttribute(a),s=typeof o.model!="object"?o.model:o.model.key,l=typeof o.model!="object"||typeof o.model.value>"u"?n:o.model.value;o.model={key:s,value:l}}function prepareToAttributeConverter(o,a){const n=new Matcher(o.view);return(s,l,c)=>{if(!l.modelRange&&a)return;const u=n.match(l.viewItem);if(!u||(onlyViewNameIsDefined(o.view,l.viewItem)?u.match.name=!0:delete u.match.name,!c.consumable.test(l.viewItem,u.match)))return;const d=o.model.key,h=typeof o.model.value=="function"?o.model.value(l.viewItem,c):o.model.value;if(h===null)return;l.modelRange||Object.assign(l,c.convertChildren(l.viewItem,l.modelCursor)),setAttributeOn(l.modelRange,{key:d,value:h},a,c)&&(c.consumable.test(l.viewItem,{name:!0})&&(u.match.name=!0),c.consumable.consume(l.viewItem,u.match))}}function onlyViewNameIsDefined(o,a){const n=typeof o=="function"?o(a):o;return typeof n=="object"&&!getViewElementNameFromConfig(n)?!1:!n.classes&&!n.attributes&&!n.styles}function setAttributeOn(o,a,n,s){let l=!1;for(const c of Array.from(o.getItems({shallow:n})))s.schema.checkAttribute(c,a.key)&&(l=!0,!c.hasAttribute(a.key)&&s.writer.setAttribute(a.key,a.value,c));return l}function normalizeElementToMarkerModelConfig(o){return(a,n)=>{const s=typeof o=="string"?o:o(a,n);return n.writer.createElement("$marker",{"data-name":s})}}function normalizeDataToMarkerConfig(o,a){const n=(s,l)=>{const c=s.getAttribute("name"),u=o.model(c,l);return l.writer.createElement("$marker",{"data-name":u})};return{view:`${o.view}-${a}`,model:n}}function injectSelectionPostFixer(o){o.document.registerPostFixer(a=>selectionPostFixer(a,o))}function selectionPostFixer(o,a){const n=a.document.selection,s=a.schema,l=[];let c=!1;for(const u of n.getRanges()){const d=tryFixingRange(u,s);d&&!d.isEqual(u)?(l.push(d),c=!0):l.push(u)}return c&&o.setSelection(mergeIntersectingRanges(l),{backward:n.isBackward}),!1}function tryFixingRange(o,a){return o.isCollapsed?tryFixingCollapsedRange(o,a):tryFixingNonCollapsedRage(o,a)}function tryFixingCollapsedRange(o,a){const n=o.start,s=a.getNearestSelectionRange(n);if(!s){const c=n.getAncestors().reverse().find(u=>a.isObject(u));return c?Range._createOn(c):null}if(!s.isCollapsed)return s;const l=s.start;return n.isEqual(l)?null:new Range(l)}function tryFixingNonCollapsedRage(o,a){const{start:n,end:s}=o,l=a.checkChild(n,"$text"),c=a.checkChild(s,"$text"),u=a.getLimitElement(n),d=a.getLimitElement(s);if(u===d){if(l&&c)return null;if(checkSelectionOnNonLimitElements(n,s,a)){const g=n.nodeAfter&&a.isSelectable(n.nodeAfter)?null:a.getNearestSelectionRange(n,"forward"),b=s.nodeBefore&&a.isSelectable(s.nodeBefore)?null:a.getNearestSelectionRange(s,"backward"),w=g?g.start:n,x=b?b.end:s;return new Range(w,x)}}const h=u&&!u.is("rootElement"),f=d&&!d.is("rootElement");if(h||f){const p=n.nodeAfter&&s.nodeBefore&&n.nodeAfter.parent===s.nodeBefore.parent,g=h&&(!p||!isSelectable(n.nodeAfter,a)),v=f&&(!p||!isSelectable(s.nodeBefore,a));let b=n,w=s;return g&&(b=Position._createBefore(findOutermostLimitAncestor(u,a))),v&&(w=Position._createAfter(findOutermostLimitAncestor(d,a))),new Range(b,w)}return null}function findOutermostLimitAncestor(o,a){let n=o,s=n;for(;a.isLimit(s)&&s.parent;)n=s,s=s.parent;return n}function checkSelectionOnNonLimitElements(o,a,n){const s=o.nodeAfter&&!n.isLimit(o.nodeAfter)||n.checkChild(o,"$text"),l=a.nodeBefore&&!n.isLimit(a.nodeBefore)||n.checkChild(a,"$text");return s||l}function mergeIntersectingRanges(o){const a=[...o],n=new Set;let s=1;for(;s<a.length;){const c=a[s],u=a.slice(0,s);for(const[d,h]of u.entries())if(!n.has(d)){if(c.isEqual(h))n.add(d);else if(c.isIntersecting(h)){n.add(d),n.add(s);const f=c.getJoined(h);a.push(f)}}s++}return a.filter((c,u)=>!n.has(u))}function isSelectable(o,a){return o&&a.isSelectable(o)}class EditingController extends ObservableMixin(){constructor(n,s){super();M(this,"model");M(this,"view");M(this,"mapper");M(this,"downcastDispatcher");this.model=n,this.view=new View$2(s),this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:n.schema});const l=this.model.document,c=l.selection,u=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(l,"change",()=>{this.view.change(d=>{this.downcastDispatcher.convertChanges(l.differ,u,d),this.downcastDispatcher.convertSelection(c,u,d)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",convertSelectionChange(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",fixTargetRanges(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.downcastDispatcher.on("remove",remove$2(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",cleanSelection()),this.downcastDispatcher.on("selection",convertRangeSelection(),{priority:"low"}),this.downcastDispatcher.on("selection",convertCollapsedSelection(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(d=>{if(d.rootName=="$graveyard")return null;const h=new RootEditableElement(this.view.document,d.name);return h.rootName=d.rootName,this.mapper.bindElements(d,h),h})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(n){const s=typeof n=="string"?n:n.name,l=this.model.markers.get(s);if(!l)throw new CKEditorError("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:s});this.model.change(()=>{this.model.markers._refresh(l)})}reconvertItem(n){this.model.change(()=>{this.model.document.differ._refreshItem(n)})}}function fixTargetRanges(o,a,n){return(s,l)=>{if(!(n.document.isComposing&&!env$1.isAndroid))for(let c=0;c<l.targetRanges.length;c++){const u=l.targetRanges[c],d=o.toModelRange(u),h=tryFixingRange(d,a);!h||h.isEqual(d)||(l.targetRanges[c]=o.toViewRange(h))}}}class Schema extends ObservableMixin(){constructor(){super();M(this,"_sourceDefinitions",{});M(this,"_attributeProperties",Object.create(null));M(this,"_customChildChecks",new Map);M(this,"_customAttributeChecks",new Map);M(this,"_genericCheckSymbol",Symbol("$generic"));M(this,"_compiledDefinitions");this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(n,s)=>{s[0]=new SchemaContext(s[0])},{priority:"highest"}),this.on("checkChild",(n,s)=>{s[0]=new SchemaContext(s[0]),s[1]=this.getDefinition(s[1])},{priority:"highest"})}register(n,s){if(this._sourceDefinitions[n])throw new CKEditorError("schema-cannot-register-item-twice",this,{itemName:n});this._sourceDefinitions[n]=[Object.assign({},s)],this._clearCache()}extend(n,s){if(!this._sourceDefinitions[n])throw new CKEditorError("schema-cannot-extend-missing-item",this,{itemName:n});this._sourceDefinitions[n].push(Object.assign({},s)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(n){let s;return typeof n=="string"?s=n:"is"in n&&(n.is("$text")||n.is("$textProxy"))?s="$text":s=n.name,this.getDefinitions()[s]}isRegistered(n){return!!this.getDefinition(n)}isBlock(n){const s=this.getDefinition(n);return!!(s&&s.isBlock)}isLimit(n){const s=this.getDefinition(n);return s?!!(s.isLimit||s.isObject):!1}isObject(n){const s=this.getDefinition(n);return s?!!(s.isObject||s.isLimit&&s.isSelectable&&s.isContent):!1}isInline(n){const s=this.getDefinition(n);return!!(s&&s.isInline)}isSelectable(n){const s=this.getDefinition(n);return s?!!(s.isSelectable||s.isObject):!1}isContent(n){const s=this.getDefinition(n);return s?!!(s.isContent||s.isObject):!1}checkChild(n,s){return s?this._checkContextMatch(n,s):!1}checkAttribute(n,s){const l=this.getDefinition(n.last);if(!l)return!1;const c=this._evaluateAttributeChecks(n,s);return c!==void 0?c:l.allowAttributes.includes(s)}checkMerge(n,s){if(n instanceof Position){const l=n.nodeBefore,c=n.nodeAfter;if(!(l instanceof Element$2))throw new CKEditorError("schema-check-merge-no-element-before",this);if(!(c instanceof Element$2))throw new CKEditorError("schema-check-merge-no-element-after",this);return this.checkMerge(l,c)}if(this.isLimit(n)||this.isLimit(s))return!1;for(const l of s.getChildren())if(!this.checkChild(n,l))return!1;return!0}addChildCheck(n,s){const l=s!==void 0?s:this._genericCheckSymbol,c=this._customChildChecks.get(l)||[];c.push(n),this._customChildChecks.set(l,c)}addAttributeCheck(n,s){const l=s!==void 0?s:this._genericCheckSymbol,c=this._customAttributeChecks.get(l)||[];c.push(n),this._customAttributeChecks.set(l,c)}setAttributeProperties(n,s){this._attributeProperties[n]=Object.assign(this.getAttributeProperties(n),s)}getAttributeProperties(n){return this._attributeProperties[n]||Object.create(null)}getLimitElement(n){let s;for(n instanceof Position?s=n.parent:s=(n instanceof Range?[n]:Array.from(n.getRanges())).reduce((c,u)=>{const d=u.getCommonAncestor();return c?c.getCommonAncestor(d,{includeSelf:!0}):d},null);!this.isLimit(s)&&s.parent;)s=s.parent;return s}checkAttributeInSelection(n,s){if(n.isCollapsed){const c=[...n.getFirstPosition().getAncestors(),new Text("",n.getAttributes())];return this.checkAttribute(c,s)}else{const l=n.getRanges();for(const c of l)for(const u of c)if(this.checkAttribute(u.item,s))return!0}return!1}*getValidRanges(n,s){n=convertToMinimalFlatRanges(n);for(const l of n)yield*this._getValidRangesForRange(l,s)}getNearestSelectionRange(n,s="both"){if(n.root.rootName=="$graveyard")return null;if(this.checkChild(n,"$text"))return new Range(n);let l,c;const u=n.getAncestors().reverse().find(d=>this.isLimit(d))||n.root;(s=="both"||s=="backward")&&(l=new TreeWalker({boundaries:Range._createIn(u),startPosition:n,direction:"backward"})),(s=="both"||s=="forward")&&(c=new TreeWalker({boundaries:Range._createIn(u),startPosition:n}));for(const d of combineWalkers(l,c)){const h=d.walker==l?"elementEnd":"elementStart",f=d.value;if(f.type==h&&this.isObject(f.item))return Range._createOn(f.item);if(this.checkChild(f.nextPosition,"$text"))return new Range(f.nextPosition)}return null}findAllowedParent(n,s){let l=n.parent;for(;l;){if(this.checkChild(l,s))return l;if(this.isLimit(l))return null;l=l.parent}return null}setAllowedAttributes(n,s,l){const c=l.model;for(const[u,d]of Object.entries(s))c.schema.checkAttribute(n,u)&&l.setAttribute(u,d,n)}removeDisallowedAttributes(n,s){for(const l of n)if(l.is("$text"))removeDisallowedAttributeFromNode(this,l,s);else{const u=Range._createIn(l).getPositions();for(const d of u){const h=d.nodeBefore||d.parent;removeDisallowedAttributeFromNode(this,h,s)}}}getAttributesWithProperty(n,s,l){const c={};for(const[u,d]of n.getAttributes()){const h=this.getAttributeProperties(u);h[s]!==void 0&&(l===void 0||l===h[s])&&(c[u]=d)}return c}createContext(n){return new SchemaContext(n)}_clearCache(){this._compiledDefinitions=null}_compile(){const n={},s=this._sourceDefinitions,l=Object.keys(s);for(const u of l)n[u]=compileBaseItemRule(s[u],u);const c=Object.values(n);for(const u of c)propagateAllowIn(n,u),propagateAllowChildren(n,u),propagateDisallowIn(n,u),propagateDisallowChildren(n,u);for(const u of c)resolveDisallows(n,u);for(const u of c)compileAllowContentOf(n,u);for(const u of c)compileAllowWhere(n,u);for(const u of c)compileAllowAttributesOf(n,u);for(const u of c)compileInheritPropertiesFrom(n,u);this._compiledDefinitions=compileDefinitions(n)}_checkContextMatch(n,s){const l=n.last;let c=this._evaluateChildChecks(n,s);if(c=c!==void 0?c:s.allowIn.includes(l.name),!c)return!1;const u=this.getDefinition(l),d=n.trimLast();return u?d.length==0?!0:this._checkContextMatch(d,u):!1}_evaluateChildChecks(n,s){const l=this._customChildChecks.get(this._genericCheckSymbol)||[],c=this._customChildChecks.get(s.name)||[];for(const u of[...l,...c]){const d=u(n,s);if(d!==void 0)return d}}_evaluateAttributeChecks(n,s){const l=this._customAttributeChecks.get(this._genericCheckSymbol)||[],c=this._customAttributeChecks.get(s)||[];for(const u of[...l,...c]){const d=u(n,s);if(d!==void 0)return d}}*_getValidRangesForRange(n,s){let l=n.start,c=n.start;for(const u of n.getItems({shallow:!0}))u.is("element")&&(yield*this._getValidRangesForRange(Range._createIn(u),s)),this.checkAttribute(u,s)||(l.isEqual(c)||(yield new Range(l,c)),l=Position._createAfter(u)),c=Position._createAfter(u);l.isEqual(c)||(yield new Range(l,c))}findOptimalInsertionRange(n,s){const l=n.getSelectedElement();if(l&&this.isObject(l)&&!this.isInline(l))return s=="before"||s=="after"?new Range(Position._createAt(l,s)):Range._createOn(l);const c=first(n.getSelectedBlocks());if(!c)return new Range(n.focus);if(c.isEmpty)return new Range(Position._createAt(c,0));const u=Position._createAfter(c);return n.focus.isTouching(u)?new Range(u):new Range(Position._createBefore(c))}}class SchemaContext{constructor(a){M(this,"_items");if(a instanceof SchemaContext)return a;let n;typeof a=="string"?n=[a]:Array.isArray(a)?n=a:n=a.getAncestors({includeSelf:!0}),this._items=n.map(mapContextItem)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(a){const n=new SchemaContext([a]);return n._items=[...this._items,...n._items],n}trimLast(){const a=new SchemaContext([]);return a._items=this._items.slice(0,-1),a}getItem(a){return this._items[a]}*getNames(){yield*this._items.map(a=>a.name)}endsWith(a){return Array.from(this.getNames()).join(" ").endsWith(a)}startsWith(a){return Array.from(this.getNames()).join(" ").startsWith(a)}}function compileBaseItemRule(o,a){const n={name:a,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return copyTypes(o,n),copyProperty(o,n,"allowIn"),copyProperty(o,n,"allowChildren"),copyProperty(o,n,"disallowIn"),copyProperty(o,n,"disallowChildren"),copyProperty(o,n,"allowContentOf"),copyProperty(o,n,"allowWhere"),copyProperty(o,n,"allowAttributes"),copyProperty(o,n,"disallowAttributes"),copyProperty(o,n,"allowAttributesOf"),copyProperty(o,n,"inheritTypesFrom"),resolveInheritAll(o,n),n}function propagateAllowIn(o,a){for(const n of a.allowIn){const s=o[n];s?s.allowChildren.add(a.name):a.allowIn.delete(n)}}function propagateAllowChildren(o,a){for(const n of a.allowChildren){const s=o[n];s?s.allowIn.add(a.name):a.allowChildren.delete(n)}}function propagateDisallowIn(o,a){for(const n of a.disallowIn){const s=o[n];s?s.disallowChildren.add(a.name):a.disallowIn.delete(n)}}function propagateDisallowChildren(o,a){for(const n of a.disallowChildren){const s=o[n];s?s.disallowIn.add(a.name):a.disallowChildren.delete(n)}}function resolveDisallows(o,a){for(const n of a.disallowChildren)a.allowChildren.delete(n);for(const n of a.disallowIn)a.allowIn.delete(n);for(const n of a.disallowAttributes)a.allowAttributes.delete(n)}function compileAllowContentOf(o,a){for(const n of a.allowContentOf){const s=o[n];s&&(s.disallowChildren.forEach(l=>{a.allowChildren.has(l)||(a.disallowChildren.add(l),o[l].disallowIn.add(a.name))}),s.allowChildren.forEach(l=>{a.disallowChildren.has(l)||(a.allowChildren.add(l),o[l].allowIn.add(a.name))}))}}function compileAllowWhere(o,a){for(const n of a.allowWhere){const s=o[n];s&&(s.disallowIn.forEach(l=>{a.allowIn.has(l)||(a.disallowIn.add(l),o[l].disallowChildren.add(a.name))}),s.allowIn.forEach(l=>{a.disallowIn.has(l)||(a.allowIn.add(l),o[l].allowChildren.add(a.name))}))}}function compileDefinitions(o){const a={};for(const n of Object.values(o))a[n.name]={name:n.name,isBlock:!!n.isBlock,isContent:!!n.isContent,isInline:!!n.isInline,isLimit:!!n.isLimit,isObject:!!n.isObject,isSelectable:!!n.isSelectable,allowIn:Array.from(n.allowIn).filter(s=>!!o[s]),allowChildren:Array.from(n.allowChildren).filter(s=>!!o[s]),allowAttributes:Array.from(n.allowAttributes)};return a}function compileAllowAttributesOf(o,a){for(const n of a.allowAttributesOf){const s=o[n];if(!s)return;s.allowAttributes.forEach(l=>{a.disallowAttributes.has(l)||a.allowAttributes.add(l)})}}function compileInheritPropertiesFrom(o,a){for(const n of a.inheritTypesFrom){const s=o[n];if(s){const l=Object.keys(s).filter(c=>c.startsWith("is"));for(const c of l)c in a||(a[c]=s[c])}}}function copyTypes(o,a){for(const n of o){const s=Object.keys(n).filter(l=>l.startsWith("is"));for(const l of s)a[l]=!!n[l]}}function copyProperty(o,a,n){for(const s of o){let l=s[n];typeof l=="string"&&(l=[l]),Array.isArray(l)&&l.forEach(c=>a[n].add(c))}}function resolveInheritAll(o,a){for(const n of o){const s=n.inheritAllFrom;s&&(a.allowContentOf.add(s),a.allowWhere.add(s),a.allowAttributesOf.add(s),a.inheritTypesFrom.add(s))}}function mapContextItem(o){return typeof o=="string"||o.is("documentFragment")?{name:typeof o=="string"?o:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:o.is("element")?o.name:"$text",*getAttributeKeys(){yield*o.getAttributeKeys()},getAttribute(a){return o.getAttribute(a)}}}function*combineWalkers(o,a){let n=!1;for(;!n;){if(n=!0,o){const s=o.next();s.done||(n=!1,yield{walker:o,value:s.value})}if(a){const s=a.next();s.done||(n=!1,yield{walker:a,value:s.value})}}}function*convertToMinimalFlatRanges(o){for(const a of o)yield*a.getMinimalFlatRanges()}function removeDisallowedAttributeFromNode(o,a,n){for(const s of a.getAttributeKeys())o.checkAttribute(a,s)||n.removeAttribute(s,a)}class UpcastDispatcher extends EmitterMixin(){constructor(n){super();M(this,"conversionApi");M(this,"_splitParts",new Map);M(this,"_cursorParents",new Map);M(this,"_modelCursor",null);M(this,"_emptyElementsToKeep",new Set);this.conversionApi={...n,consumable:null,writer:null,store:null,convertItem:(s,l)=>this._convertItem(s,l),convertChildren:(s,l)=>this._convertChildren(s,l),safeInsert:(s,l)=>this._safeInsert(s,l),updateConversionResult:(s,l)=>this._updateConversionResult(s,l),splitToAllowedParent:(s,l)=>this._splitToAllowedParent(s,l),getSplitParts:s=>this._getSplitParts(s),keepEmptyElement:s=>this._keepEmptyElement(s)}}convert(n,s,l=["$root"]){this.fire("viewCleanup",n),this._modelCursor=createContextTree(l,s),this.conversionApi.writer=s,this.conversionApi.consumable=ViewConsumable.createFrom(n),this.conversionApi.store={};const{modelRange:c}=this._convertItem(n,this._modelCursor),u=s.createDocumentFragment();if(c){this._removeEmptyElements();const d=this._modelCursor.parent,h=d._removeChildren(0,d.childCount);u._insertChild(0,h),u.markers=extractMarkersFromModelFragment(u,s)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,u}_convertItem(n,s){const l={viewItem:n,modelCursor:s,modelRange:null};if(n.is("element")?this.fire(`element:${n.name}`,l,this.conversionApi):n.is("$text")?this.fire("text",l,this.conversionApi):this.fire("documentFragment",l,this.conversionApi),l.modelRange&&!(l.modelRange instanceof Range))throw new CKEditorError("view-conversion-dispatcher-incorrect-result",this);return{modelRange:l.modelRange,modelCursor:l.modelCursor}}_convertChildren(n,s){let l=s.is("position")?s:Position._createAt(s,0);const c=new Range(l);for(const u of Array.from(n.getChildren())){const d=this._convertItem(u,l);d.modelRange instanceof Range&&(c.end=d.modelRange.end,l=d.modelCursor)}return{modelRange:c,modelCursor:l}}_safeInsert(n,s){const l=this._splitToAllowedParent(n,s);return l?(this.conversionApi.writer.insert(n,l.position),!0):!1}_updateConversionResult(n,s){const l=this._getSplitParts(n),c=this.conversionApi.writer;s.modelRange||(s.modelRange=c.createRange(c.createPositionBefore(n),c.createPositionAfter(l[l.length-1])));const u=this._cursorParents.get(n);u?s.modelCursor=c.createPositionAt(u,0):s.modelCursor=s.modelRange.end}_splitToAllowedParent(n,s){const{schema:l,writer:c}=this.conversionApi;let u=l.findAllowedParent(s,n);if(u){if(u===s.parent)return{position:s};this._modelCursor.parent.getAncestors().includes(u)&&(u=null)}if(!u)return isParagraphable(s,n,l)?{position:wrapInParagraph(s,c)}:null;const d=this.conversionApi.writer.split(s,u),h=[];for(const p of d.range.getWalker())if(p.type=="elementEnd")h.push(p.item);else{const g=h.pop(),v=p.item;this._registerSplitPair(g,v)}const f=d.range.end.parent;return this._cursorParents.set(n,f),{position:d.position,cursorParent:f}}_registerSplitPair(n,s){this._splitParts.has(n)||this._splitParts.set(n,[n]);const l=this._splitParts.get(n);this._splitParts.set(s,l),l.push(s)}_getSplitParts(n){let s;return this._splitParts.has(n)?s=this._splitParts.get(n):s=[n],s}_keepEmptyElement(n){this._emptyElementsToKeep.add(n)}_removeEmptyElements(){const n=new Map;for(const s of this._splitParts.keys())if(s.isEmpty&&!this._emptyElementsToKeep.has(s)){const l=n.get(s.parent)||[];l.push(s),this._splitParts.delete(s),n.set(s.parent,l)}for(const[s,l]of n)s._removeChildrenArray(l);n.size&&this._removeEmptyElements()}}function extractMarkersFromModelFragment(o,a){const n=new Set,s=new Map,l=Range._createIn(o).getItems();for(const c of l)c.is("element","$marker")&&n.add(c);for(const c of n){const u=c.getAttribute("data-name"),d=a.createPositionBefore(c);s.has(u)?s.get(u).end=d.clone():s.set(u,new Range(d.clone())),a.remove(c)}return s}function createContextTree(o,a){let n;for(const s of new SchemaContext(o)){const l={};for(const u of s.getAttributeKeys())l[u]=s.getAttribute(u);const c=a.createElement(s.name,l);n&&a.insert(c,n),n=Position._createAt(c,0)}return n}class BasicHtmlWriter{getHtml(a){const s=global$1.document.implementation.createHTMLDocument("").createElement("div");return s.appendChild(a),s.innerHTML}}class HtmlDataProcessor{constructor(a){M(this,"domParser");M(this,"domConverter");M(this,"htmlWriter");M(this,"skipComments",!0);this.domParser=new DOMParser,this.domConverter=new DomConverter(a,{renderingMode:"data"}),this.htmlWriter=new BasicHtmlWriter}toData(a){const n=this.domConverter.viewToDom(a);return this.htmlWriter.getHtml(n)}toView(a){const n=this._toDom(a);return this.domConverter.domToView(n,{skipComments:this.skipComments})}registerRawContentMatcher(a){this.domConverter.registerRawContentMatcher(a)}useFillerType(a){this.domConverter.blockFillerMode=a=="marked"?"markedNbsp":"nbsp"}_toDom(a){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(a.trim().slice(0,1e4))||(a=`<body>${a}</body>`);const n=this.domParser.parseFromString(a,"text/html"),s=n.createDocumentFragment(),l=n.body.childNodes;for(;l.length>0;)s.appendChild(l[0]);return s}}let DataController$1=class extends EmitterMixin(){constructor(n,s){super();M(this,"model");M(this,"mapper");M(this,"downcastDispatcher");M(this,"upcastDispatcher");M(this,"viewDocument");M(this,"stylesProcessor");M(this,"htmlProcessor");M(this,"processor");M(this,"_viewWriter");this.model=n,this.mapper=new Mapper,this.downcastDispatcher=new DowncastDispatcher({mapper:this.mapper,schema:n.schema}),this.downcastDispatcher.on("insert:$text",insertText(),{priority:"lowest"}),this.downcastDispatcher.on("insert",insertAttributesAndChildren(),{priority:"lowest"}),this.upcastDispatcher=new UpcastDispatcher({schema:n.schema}),this.viewDocument=new Document$1(s),this.stylesProcessor=s,this.htmlProcessor=new HtmlDataProcessor(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new DowncastWriter(this.viewDocument),this.upcastDispatcher.on("text",convertText(),{priority:"lowest"}),this.upcastDispatcher.on("element",convertToModelFragment$1(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",convertToModelFragment$1(),{priority:"lowest"}),ObservableMixin().prototype.decorate.call(this,"init"),ObservableMixin().prototype.decorate.call(this,"set"),ObservableMixin().prototype.decorate.call(this,"get"),ObservableMixin().prototype.decorate.call(this,"toView"),ObservableMixin().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},autoParagraphEmptyRoots)},{priority:"lowest"})}get(n={}){const{rootName:s="main",trim:l="empty"}=n;if(!this._checkIfRootsExists([s]))throw new CKEditorError("datacontroller-get-non-existent-root",this);const c=this.model.document.getRoot(s);return c.isAttached()||logWarning("datacontroller-get-detached-root",this),l==="empty"&&!this.model.hasContent(c,{ignoreWhitespaces:!0})?"":this.stringify(c,n)}stringify(n,s={}){const l=this.toView(n,s);return this.processor.toData(l)}toView(n,s={}){const l=this.viewDocument,c=this._viewWriter;this.mapper.clearBindings();const u=Range._createIn(n),d=new DocumentFragment$1(l);this.mapper.bindElements(n,d);const h=n.is("documentFragment")?n.markers:_getMarkersRelativeToElement(n);return this.downcastDispatcher.convert(u,h,c,s),d}init(n){if(this.model.document.version)throw new CKEditorError("datacontroller-init-document-not-empty",this);let s={};if(typeof n=="string"?s.main=n:s=n,!this._checkIfRootsExists(Object.keys(s)))throw new CKEditorError("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},l=>{for(const c of Object.keys(s)){const u=this.model.document.getRoot(c);l.insert(this.parse(s[c],u),u,0)}}),Promise.resolve()}set(n,s={}){let l={};if(typeof n=="string"?l.main=n:l=n,!this._checkIfRootsExists(Object.keys(l)))throw new CKEditorError("datacontroller-set-non-existent-root",this);this.model.enqueueChange(s.batchType||{},c=>{c.setSelection(null),c.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(const u of Object.keys(l)){const d=this.model.document.getRoot(u);c.remove(c.createRangeIn(d)),c.insert(this.parse(l[u],d),d,0)}})}parse(n,s="$root"){const l=this.processor.toView(n);return this.toModel(l,s)}toModel(n,s="$root"){return this.model.change(l=>this.upcastDispatcher.convert(n,l,s))}addStyleProcessorRules(n){n(this.stylesProcessor)}registerRawContentMatcher(n){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(n),this.htmlProcessor.registerRawContentMatcher(n)}destroy(){this.stopListening()}_checkIfRootsExists(n){for(const s of n)if(!this.model.document.getRoot(s))return!1;return!0}};function _getMarkersRelativeToElement(o){const a=[],n=o.root.document;if(!n)return new Map;const s=Range._createIn(o);for(const l of n.model.markers){const c=l.getRange(),u=c.isCollapsed,d=c.start.isEqual(s.start)||c.end.isEqual(s.end);if(u&&d)a.push([l.name,c]);else{const h=s.getIntersection(c);h&&a.push([l.name,h])}}return a.sort(([l,c],[u,d])=>{if(c.end.compareWith(d.start)!=="after")return 1;if(c.start.compareWith(d.end)!=="before")return-1;switch(c.start.compareWith(d.start)){case"before":return 1;case"after":return-1;default:switch(c.end.compareWith(d.end)){case"before":return 1;case"after":return-1;default:return u.localeCompare(l)}}}),new Map(a)}class Conversion{constructor(a,n){M(this,"_helpers",new Map);M(this,"_downcast");M(this,"_upcast");this._downcast=toArray$2(a),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=toArray$2(n),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(a,n){const s=this._downcast.includes(n);if(!this._upcast.includes(n)&&!s)throw new CKEditorError("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:a,dispatchers:[n],isDowncast:s})}for(a){if(!this._helpers.has(a))throw new CKEditorError("conversion-for-unknown-group",this);return this._helpers.get(a)}elementToElement(a){this.for("downcast").elementToElement(a);for(const{model:n,view:s}of _getAllUpcastDefinitions(a))this.for("upcast").elementToElement({model:n,view:s,converterPriority:a.converterPriority})}attributeToElement(a){this.for("downcast").attributeToElement(a);for(const{model:n,view:s}of _getAllUpcastDefinitions(a))this.for("upcast").elementToAttribute({view:s,model:n,converterPriority:a.converterPriority})}attributeToAttribute(a){this.for("downcast").attributeToAttribute(a);for(const{model:n,view:s}of _getAllUpcastDefinitions(a))this.for("upcast").attributeToAttribute({view:s,model:n})}_createConversionHelpers({name:a,dispatchers:n,isDowncast:s}){if(this._helpers.has(a))throw new CKEditorError("conversion-group-exists",this);const l=s?new DowncastHelpers(n):new UpcastHelpers(n);this._helpers.set(a,l)}}function*_getAllUpcastDefinitions(o){if(o.model.values)for(const a of o.model.values){const n={key:o.model.key,value:a},s=o.view[a],l=o.upcastAlso?o.upcastAlso[a]:void 0;yield*_getUpcastDefinition(n,s,l)}else yield*_getUpcastDefinition(o.model,o.view,o.upcastAlso)}function*_getUpcastDefinition(o,a,n){if(yield{model:o,view:a},n)for(const s of toArray$2(n))yield{model:o,view:s}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Operation{constructor(a){M(this,"baseVersion");M(this,"isDocumentOperation");M(this,"batch");this.baseVersion=a,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){const a=Object.assign({},this);return a.__className=this.constructor.className,delete a.batch,delete a.isDocumentOperation,a}static get className(){return"Operation"}static fromJSON(a,n){return new this(a.baseVersion)}}function _insert(o,a){const n=_normalizeNodes(a),s=n.reduce((u,d)=>u+d.offsetSize,0),l=o.parent;_splitNodeAtPosition(o);const c=o.index;return l._insertChild(c,n),_mergeNodesAtIndex(l,c+n.length),_mergeNodesAtIndex(l,c),new Range(o,o.getShiftedBy(s))}function _remove(o){if(!o.isFlat)throw new CKEditorError("operation-utils-remove-range-not-flat",this);const a=o.start.parent;_splitNodeAtPosition(o.start),_splitNodeAtPosition(o.end);const n=a._removeChildren(o.start.index,o.end.index-o.start.index);return _mergeNodesAtIndex(a,o.start.index),n}function _move(o,a){if(!o.isFlat)throw new CKEditorError("operation-utils-move-range-not-flat",this);const n=_remove(o);return a=a._getTransformedByDeletion(o.start,o.end.offset-o.start.offset),_insert(a,n)}function _setAttribute(o,a,n){_splitNodeAtPosition(o.start),_splitNodeAtPosition(o.end);for(const s of o.getItems({shallow:!0})){const l=s.is("$textProxy")?s.textNode:s;n!==null?l._setAttribute(a,n):l._removeAttribute(a),_mergeNodesAtIndex(l.parent,l.index)}_mergeNodesAtIndex(o.end.parent,o.end.index)}function _normalizeNodes(o){const a=[];function n(s){if(typeof s=="string")a.push(new Text(s));else if(s instanceof TextProxy)a.push(new Text(s.data,s.getAttributes()));else if(s instanceof Node$1$1)a.push(s);else if(isIterable$1(s))for(const l of s)n(l)}n(o);for(let s=1;s<a.length;s++){const l=a[s],c=a[s-1];l instanceof Text&&c instanceof Text&&_haveSameAttributes(l,c)&&(a.splice(s-1,2,new Text(c.data+l.data,c.getAttributes())),s--)}return a}function _mergeNodesAtIndex(o,a){const n=o.getChild(a-1),s=o.getChild(a);if(n&&s&&n.is("$text")&&s.is("$text")&&_haveSameAttributes(n,s)){const l=new Text(n.data+s.data,n.getAttributes());o._removeChildren(a-1,2),o._insertChild(a-1,l)}}function _splitNodeAtPosition(o){const a=o.textNode,n=o.parent;if(a){const s=o.offset-a.startOffset,l=a.index;n._removeChildren(l,1);const c=new Text(a.data.substr(0,s),a.getAttributes()),u=new Text(a.data.substr(s),a.getAttributes());n._insertChild(l,[c,u])}}function _haveSameAttributes(o,a){const n=o.getAttributes(),s=a.getAttributes();for(const l of n){if(l[1]!==a.getAttribute(l[0]))return!1;s.next()}return s.next().done}class MoveOperation extends Operation{constructor(n,s,l,c){super(c);M(this,"sourcePosition");M(this,"howMany");M(this,"targetPosition");this.sourcePosition=n.clone(),this.sourcePosition.stickiness="toNext",this.howMany=s,this.targetPosition=l.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[Range._createFromPositionAndShift(this.sourcePosition,this.howMany),Range._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new MoveOperation(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){const n=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new MoveOperation(this.getMovedRangeStart(),this.howMany,n,this.baseVersion+1)}_validate(){const n=this.sourcePosition.parent,s=this.targetPosition.parent,l=this.sourcePosition.offset,c=this.targetPosition.offset;if(l+this.howMany>n.maxOffset)throw new CKEditorError("move-operation-nodes-do-not-exist",this);if(n===s&&l<c&&c<l+this.howMany)throw new CKEditorError("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&compareArrays(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){const u=this.sourcePosition.path.length-1;if(this.targetPosition.path[u]>=l&&this.targetPosition.path[u]<l+this.howMany)throw new CKEditorError("move-operation-node-into-itself",this)}}_execute(){_move(Range._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){const n=super.toJSON();return n.sourcePosition=this.sourcePosition.toJSON(),n.targetPosition=this.targetPosition.toJSON(),n}static get className(){return"MoveOperation"}static fromJSON(n,s){const l=Position.fromJSON(n.sourcePosition,s),c=Position.fromJSON(n.targetPosition,s);return new this(l,n.howMany,c,n.baseVersion)}}class InsertOperation extends Operation{constructor(n,s,l){super(l);M(this,"position");M(this,"nodes");M(this,"shouldReceiveAttributes");this.position=n.clone(),this.position.stickiness="toNone",this.nodes=new NodeList(_normalizeNodes(s)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){const n=new NodeList([...this.nodes].map(l=>l._clone(!0))),s=new InsertOperation(this.position,n,this.baseVersion);return s.shouldReceiveAttributes=this.shouldReceiveAttributes,s}getReversed(){const n=this.position.root.document.graveyard,s=new Position(n,[0]);return new MoveOperation(this.position,this.nodes.maxOffset,s,this.baseVersion+1)}_validate(){const n=this.position.parent;if(!n||n.maxOffset<this.position.offset)throw new CKEditorError("insert-operation-position-invalid",this)}_execute(){const n=this.nodes;this.nodes=new NodeList([...n].map(s=>s._clone(!0))),_insert(this.position,n)}toJSON(){const n=super.toJSON();return n.position=this.position.toJSON(),n.nodes=this.nodes.toJSON(),n}static get className(){return"InsertOperation"}static fromJSON(n,s){const l=[];for(const u of n.nodes)u.name?l.push(Element$2.fromJSON(u)):l.push(Text.fromJSON(u));const c=new InsertOperation(Position.fromJSON(n.position,s),l,n.baseVersion);return c.shouldReceiveAttributes=n.shouldReceiveAttributes,c}}class SplitOperation extends Operation{constructor(n,s,l,c,u){super(u);M(this,"splitPosition");M(this,"howMany");M(this,"insertionPosition");M(this,"graveyardPosition");this.splitPosition=n.clone(),this.splitPosition.stickiness="toNext",this.howMany=s,this.insertionPosition=l,this.graveyardPosition=c?c.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){const n=this.insertionPosition.path.slice();return n.push(0),new Position(this.insertionPosition.root,n)}get movedRange(){const n=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.splitPosition,n)}get affectedSelectable(){const n=[Range._createFromPositionAndShift(this.splitPosition,0),Range._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&n.push(Range._createFromPositionAndShift(this.graveyardPosition,0)),n}clone(){return new SplitOperation(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const n=this.splitPosition.root.document.graveyard,s=new Position(n,[0]);return new MergeOperation(this.moveTargetPosition,this.howMany,this.splitPosition,s,this.baseVersion+1)}_validate(){const n=this.splitPosition.parent,s=this.splitPosition.offset;if(!n||n.maxOffset<s)throw new CKEditorError("split-operation-position-invalid",this);if(n.parent){if(this.howMany!=n.maxOffset-this.splitPosition.offset)throw new CKEditorError("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new CKEditorError("split-operation-graveyard-position-invalid",this)}else throw new CKEditorError("split-operation-split-in-root",this)}_execute(){const n=this.splitPosition.parent;if(this.graveyardPosition)_move(Range._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{const l=n._clone();_insert(this.insertionPosition,l)}const s=new Range(Position._createAt(n,this.splitPosition.offset),Position._createAt(n,n.maxOffset));_move(s,this.moveTargetPosition)}toJSON(){const n=super.toJSON();return n.splitPosition=this.splitPosition.toJSON(),n.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(n.graveyardPosition=this.graveyardPosition.toJSON()),n}static get className(){return"SplitOperation"}static getInsertionPosition(n){const s=n.path.slice(0,-1);return s[s.length-1]++,new Position(n.root,s,"toPrevious")}static fromJSON(n,s){const l=Position.fromJSON(n.splitPosition,s),c=Position.fromJSON(n.insertionPosition,s),u=n.graveyardPosition?Position.fromJSON(n.graveyardPosition,s):null;return new this(l,n.howMany,c,u,n.baseVersion)}}class MergeOperation extends Operation{constructor(n,s,l,c,u){super(u);M(this,"sourcePosition");M(this,"howMany");M(this,"targetPosition");M(this,"graveyardPosition");this.sourcePosition=n.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=s,this.targetPosition=l.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=c.clone()}get type(){return"merge"}get deletionPosition(){return new Position(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){const n=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Range(this.sourcePosition,n)}get affectedSelectable(){const n=this.sourcePosition.parent;return[Range._createOn(n),Range._createFromPositionAndShift(this.targetPosition,0),Range._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new MergeOperation(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){const n=this.targetPosition._getTransformedByMergeOperation(this),s=this.sourcePosition.path.slice(0,-1),l=new Position(this.sourcePosition.root,s)._getTransformedByMergeOperation(this);return new SplitOperation(n,this.howMany,l,this.graveyardPosition,this.baseVersion+1)}_validate(){const n=this.sourcePosition.parent,s=this.targetPosition.parent;if(n.parent)if(s.parent){if(this.howMany!=n.maxOffset)throw new CKEditorError("merge-operation-how-many-invalid",this)}else throw new CKEditorError("merge-operation-target-position-invalid",this);else throw new CKEditorError("merge-operation-source-position-invalid",this)}_execute(){const n=this.sourcePosition.parent,s=Range._createIn(n);_move(s,this.targetPosition),_move(Range._createOn(n),this.graveyardPosition)}toJSON(){const n=super.toJSON();return n.sourcePosition=n.sourcePosition.toJSON(),n.targetPosition=n.targetPosition.toJSON(),n.graveyardPosition=n.graveyardPosition.toJSON(),n}static get className(){return"MergeOperation"}static fromJSON(n,s){const l=Position.fromJSON(n.sourcePosition,s),c=Position.fromJSON(n.targetPosition,s),u=Position.fromJSON(n.graveyardPosition,s);return new this(l,n.howMany,c,u,n.baseVersion)}}class MarkerOperation extends Operation{constructor(n,s,l,c,u,d){super(d);M(this,"name");M(this,"oldRange");M(this,"newRange");M(this,"affectsData");M(this,"_markers");this.name=n,this.oldRange=s?s.clone():null,this.newRange=l?l.clone():null,this.affectsData=u,this._markers=c}get type(){return"marker"}get affectedSelectable(){const n=[];return this.oldRange&&n.push(this.oldRange.clone()),this.newRange&&(this.oldRange?n.push(...this.newRange.getDifference(this.oldRange)):n.push(this.newRange.clone())),n}clone(){return new MarkerOperation(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new MarkerOperation(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){const n=super.toJSON();return this.oldRange&&(n.oldRange=this.oldRange.toJSON()),this.newRange&&(n.newRange=this.newRange.toJSON()),delete n._markers,n}static get className(){return"MarkerOperation"}static fromJSON(n,s){return new MarkerOperation(n.name,n.oldRange?Range.fromJSON(n.oldRange,s):null,n.newRange?Range.fromJSON(n.newRange,s):null,s.model.markers,n.affectsData,n.baseVersion)}}class AttributeOperation extends Operation{constructor(n,s,l,c,u){super(u);M(this,"range");M(this,"key");M(this,"oldValue");M(this,"newValue");this.range=n.clone(),this.key=s,this.oldValue=l===void 0?null:l,this.newValue=c===void 0?null:c}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new AttributeOperation(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new AttributeOperation(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){const n=super.toJSON();return n.range=this.range.toJSON(),n}_validate(){if(!this.range.isFlat)throw new CKEditorError("attribute-operation-range-not-flat",this);for(const n of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!isEqual$1(n.getAttribute(this.key),this.oldValue))throw new CKEditorError("attribute-operation-wrong-old-value",this,{item:n,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&n.hasAttribute(this.key))throw new CKEditorError("attribute-operation-attribute-exists",this,{node:n,key:this.key})}}_execute(){isEqual$1(this.oldValue,this.newValue)||_setAttribute(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(n,s){return new AttributeOperation(Range.fromJSON(n.range,s),n.key,n.oldValue,n.newValue,n.baseVersion)}}class NoOperation extends Operation{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new NoOperation(this.baseVersion)}getReversed(){return new NoOperation(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}}class RenameOperation extends Operation{constructor(n,s,l,c){super(c);M(this,"position");M(this,"oldName");M(this,"newName");this.position=n,this.position.stickiness="toNext",this.oldName=s,this.newName=l}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new RenameOperation(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new RenameOperation(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){const n=this.position.nodeAfter;if(n instanceof Element$2){if(n.name!==this.oldName)throw new CKEditorError("rename-operation-wrong-name",this)}else throw new CKEditorError("rename-operation-wrong-position",this)}_execute(){const n=this.position.nodeAfter;n.name=this.newName}toJSON(){const n=super.toJSON();return n.position=this.position.toJSON(),n}static get className(){return"RenameOperation"}static fromJSON(n,s){return new RenameOperation(Position.fromJSON(n.position,s),n.oldName,n.newName,n.baseVersion)}}class RootAttributeOperation extends Operation{constructor(n,s,l,c,u){super(u);M(this,"root");M(this,"key");M(this,"oldValue");M(this,"newValue");this.root=n,this.key=s,this.oldValue=l===void 0?null:l,this.newValue=c===void 0?null:c}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new RootAttributeOperation(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new RootAttributeOperation(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new CKEditorError("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new CKEditorError("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new CKEditorError("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){const n=super.toJSON();return n.root=this.root.toJSON(),n}static get className(){return"RootAttributeOperation"}static fromJSON(n,s){if(!s.getRoot(n.root))throw new CKEditorError("rootattribute-operation-fromjson-no-root",this,{rootName:n.root});return new RootAttributeOperation(s.getRoot(n.root),n.key,n.oldValue,n.newValue,n.baseVersion)}}class RootOperation extends Operation{constructor(n,s,l,c,u){super(u);M(this,"rootName");M(this,"elementName");M(this,"isAdd");M(this,"_document");if(this.rootName=n,this.elementName=s,this.isAdd=l,this._document=c,!this._document.getRoot(this.rootName)){const d=this._document.createRoot(this.elementName,this.rootName);d._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new RootOperation(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new RootOperation(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){const n=super.toJSON();return delete n._document,n}static get className(){return"RootOperation"}static fromJSON(n,s){return new RootOperation(n.rootName,n.elementName,n.isAdd,s,n.baseVersion)}}const operations={};operations[AttributeOperation.className]=AttributeOperation;operations[InsertOperation.className]=InsertOperation;operations[MarkerOperation.className]=MarkerOperation;operations[MoveOperation.className]=MoveOperation;operations[NoOperation.className]=NoOperation;operations[Operation.className]=Operation;operations[RenameOperation.className]=RenameOperation;operations[RootAttributeOperation.className]=RootAttributeOperation;operations[RootOperation.className]=RootOperation;operations[SplitOperation.className]=SplitOperation;operations[MergeOperation.className]=MergeOperation;class OperationFactory{static fromJSON(a,n){return operations[a.__className].fromJSON(a,n)}}const transformations=new Map;function setTransformation(o,a,n){let s=transformations.get(o);s||(s=new Map,transformations.set(o,s)),s.set(a,n)}function getTransformation(o,a){const n=transformations.get(o);return n&&n.has(a)?n.get(a):noUpdateTransformation}function noUpdateTransformation(o){return[o]}function transform$1(o,a,n={}){const s=getTransformation(o.constructor,a.constructor);try{return o=o.clone(),s(o,a,n)}catch(l){throw l}}function transformSets(o,a,n){o=o.slice(),a=a.slice();const s=new ContextFactory(n.document,n.useRelations,n.forceWeakRemove);s.setOriginalOperations(o),s.setOriginalOperations(a);const l=s.originalOperations;if(o.length==0||a.length==0)return{operationsA:o,operationsB:a,originalOperations:l};const c=new WeakMap;for(const h of o)c.set(h,0);const u={nextBaseVersionA:o[o.length-1].baseVersion+1,nextBaseVersionB:a[a.length-1].baseVersion+1,originalOperationsACount:o.length,originalOperationsBCount:a.length};let d=0;for(;d<o.length;){const h=o[d],f=c.get(h);if(f==a.length){d++;continue}const p=a[f],g=transform$1(h,p,s.getContext(h,p,!0)),v=transform$1(p,h,s.getContext(p,h,!1));s.updateRelation(h,p),s.setOriginalOperations(g,h),s.setOriginalOperations(v,p);for(const b of g)c.set(b,f+v.length);o.splice(d,1,...g),a.splice(f,1,...v)}return handlePartialMarkerOperations(o),handlePartialMarkerOperations(a),updateBaseVersions(o,u.nextBaseVersionB),updateBaseVersions(a,u.nextBaseVersionA),{operationsA:o,operationsB:a,originalOperations:l}}class ContextFactory{constructor(a,n,s=!1){M(this,"originalOperations");M(this,"_history");M(this,"_useRelations");M(this,"_forceWeakRemove");M(this,"_relations");this.originalOperations=new Map,this._history=a.history,this._useRelations=n,this._forceWeakRemove=!!s,this._relations=new Map}setOriginalOperations(a,n=null){const s=n?this.originalOperations.get(n):null;for(const l of a)this.originalOperations.set(l,s||l)}updateRelation(a,n){if(a instanceof MoveOperation)n instanceof MergeOperation?a.targetPosition.isEqual(n.sourcePosition)||n.movedRange.containsPosition(a.targetPosition)?this._setRelation(a,n,"insertAtSource"):a.targetPosition.isEqual(n.deletionPosition)?this._setRelation(a,n,"insertBetween"):a.targetPosition.isAfter(n.sourcePosition)&&this._setRelation(a,n,"moveTargetAfter"):n instanceof MoveOperation&&(a.targetPosition.isEqual(n.sourcePosition)||a.targetPosition.isBefore(n.sourcePosition)?this._setRelation(a,n,"insertBefore"):this._setRelation(a,n,"insertAfter"));else if(a instanceof SplitOperation){if(n instanceof MergeOperation)a.splitPosition.isBefore(n.sourcePosition)&&this._setRelation(a,n,"splitBefore");else if(n instanceof MoveOperation)if(a.splitPosition.isEqual(n.sourcePosition)||a.splitPosition.isBefore(n.sourcePosition))this._setRelation(a,n,"splitBefore");else{const s=Range._createFromPositionAndShift(n.sourcePosition,n.howMany);if(a.splitPosition.hasSameParentAs(n.sourcePosition)&&s.containsPosition(a.splitPosition)){const l=s.end.offset-a.splitPosition.offset,c=a.splitPosition.offset-s.start.offset;this._setRelation(a,n,{howMany:l,offset:c})}}}else if(a instanceof MergeOperation)n instanceof MergeOperation?(a.targetPosition.isEqual(n.sourcePosition)||this._setRelation(a,n,"mergeTargetNotMoved"),a.sourcePosition.isEqual(n.targetPosition)&&this._setRelation(a,n,"mergeSourceNotMoved"),a.sourcePosition.isEqual(n.sourcePosition)&&this._setRelation(a,n,"mergeSameElement")):n instanceof SplitOperation?a.sourcePosition.isEqual(n.splitPosition)&&this._setRelation(a,n,"splitAtSource"):n instanceof MoveOperation&&n.howMany>0&&(a.sourcePosition.isEqual(n.sourcePosition.getShiftedBy(n.howMany))&&this._setRelation(a,n,"mergeSourceAffected"),a.targetPosition.isEqual(n.sourcePosition)&&this._setRelation(a,n,"mergeTargetWasBefore"));else if(a instanceof MarkerOperation){const s=a.newRange;if(!s)return;if(n instanceof MergeOperation){const l=s.start.isEqual(n.targetPosition),c=s.start.isEqual(n.deletionPosition),u=s.end.isEqual(n.deletionPosition),d=s.end.isEqual(n.sourcePosition);(l||c||u||d)&&this._setRelation(a,n,{wasInLeftElement:l,wasStartBeforeMergedElement:c,wasEndBeforeMergedElement:u,wasInRightElement:d})}}}getContext(a,n,s){return{aIsStrong:s,aWasUndone:this._wasUndone(a),bWasUndone:this._wasUndone(n),abRelation:this._useRelations?this._getRelation(a,n):null,baRelation:this._useRelations?this._getRelation(n,a):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(a){const n=this.originalOperations.get(a);return n.wasUndone||this._history.isUndoneOperation(n)}_getRelation(a,n){const s=this.originalOperations.get(n),l=this._history.getUndoneOperation(s);if(!l)return null;const c=this.originalOperations.get(a),u=this._relations.get(c);return u&&u.get(l)||null}_setRelation(a,n,s){const l=this.originalOperations.get(a),c=this.originalOperations.get(n);let u=this._relations.get(l);u||(u=new Map,this._relations.set(l,u)),u.set(c,s)}}function updateBaseVersions(o,a){for(const n of o)n.baseVersion=a++}function handlePartialMarkerOperations(o){const a=new Map;for(let n=0;n<o.length;n++){const s=o[n];s instanceof MarkerOperation&&(s.baseVersion!==-1?a.set(s.name,{op:s,ranges:s.newRange?[s.newRange]:[]}):(s.newRange&&a.get(s.name).ranges.push(s.newRange),o.splice(n,1),n--))}for(const{op:n,ranges:s}of a.values())s.length?n.newRange=Range._createFromRanges(s):n.newRange=null}setTransformation(AttributeOperation,AttributeOperation,(o,a,n)=>{if(o.key===a.key&&o.range.start.hasSameParentAs(a.range.start)){const s=o.range.getDifference(a.range).map(c=>new AttributeOperation(c,o.key,o.oldValue,o.newValue,0)),l=o.range.getIntersection(a.range);return l&&n.aIsStrong&&s.push(new AttributeOperation(l,a.key,a.newValue,o.newValue,0)),s.length==0?[new NoOperation(0)]:s}else return[o]});setTransformation(AttributeOperation,InsertOperation,(o,a)=>{if(o.range.start.hasSameParentAs(a.position)&&o.range.containsPosition(a.position)){const s=o.range._getTransformedByInsertion(a.position,a.howMany,!a.shouldReceiveAttributes).map(l=>new AttributeOperation(l,o.key,o.oldValue,o.newValue,o.baseVersion));if(a.shouldReceiveAttributes){const l=_getComplementaryAttributeOperations(a,o.key,o.oldValue);l&&s.unshift(l)}return s}return o.range=o.range._getTransformedByInsertion(a.position,a.howMany,!1)[0],[o]});function _getComplementaryAttributeOperations(o,a,n){const l=o.nodes.getNode(0).getAttribute(a);if(l==n)return null;const c=new Range(o.position,o.position.getShiftedBy(o.howMany));return new AttributeOperation(c,a,l,n,0)}setTransformation(AttributeOperation,MergeOperation,(o,a)=>{const n=[];o.range.start.hasSameParentAs(a.deletionPosition)&&(o.range.containsPosition(a.deletionPosition)||o.range.start.isEqual(a.deletionPosition))&&n.push(Range._createFromPositionAndShift(a.graveyardPosition,1));const s=o.range._getTransformedByMergeOperation(a);return s.isCollapsed||n.push(s),n.map(l=>new AttributeOperation(l,o.key,o.oldValue,o.newValue,o.baseVersion))});setTransformation(AttributeOperation,MoveOperation,(o,a)=>_breakRangeByMoveOperation(o.range,a).map(s=>new AttributeOperation(s,o.key,o.oldValue,o.newValue,o.baseVersion)));function _breakRangeByMoveOperation(o,a){const n=Range._createFromPositionAndShift(a.sourcePosition,a.howMany);let s=null,l=[];n.containsRange(o,!0)?s=o:o.start.hasSameParentAs(n.start)?(l=o.getDifference(n),s=o.getIntersection(n)):l=[o];const c=[];for(let u of l){u=u._getTransformedByDeletion(a.sourcePosition,a.howMany);const d=a.getMovedRangeStart(),h=u.start.hasSameParentAs(d),f=u._getTransformedByInsertion(d,a.howMany,h);c.push(...f)}return s&&c.push(s._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany,!1)[0]),c}setTransformation(AttributeOperation,SplitOperation,(o,a)=>{if(o.range.end.isEqual(a.insertionPosition))return a.graveyardPosition||o.range.end.offset++,[o];if(o.range.start.hasSameParentAs(a.splitPosition)&&o.range.containsPosition(a.splitPosition)){const n=o.clone();return n.range=new Range(a.moveTargetPosition.clone(),o.range.end._getCombined(a.splitPosition,a.moveTargetPosition)),o.range.end=a.splitPosition.clone(),o.range.end.stickiness="toPrevious",[o,n]}return o.range=o.range._getTransformedBySplitOperation(a),[o]});setTransformation(InsertOperation,AttributeOperation,(o,a)=>{const n=[o];if(o.shouldReceiveAttributes&&o.position.hasSameParentAs(a.range.start)&&a.range.containsPosition(o.position)){const s=_getComplementaryAttributeOperations(o,a.key,a.newValue);s&&n.push(s)}return n});setTransformation(InsertOperation,InsertOperation,(o,a,n)=>o.position.isEqual(a.position)&&n.aIsStrong?[o]:(o.position=o.position._getTransformedByInsertOperation(a),[o]));setTransformation(InsertOperation,MoveOperation,(o,a)=>(o.position=o.position._getTransformedByMoveOperation(a),[o]));setTransformation(InsertOperation,SplitOperation,(o,a)=>(o.position=o.position._getTransformedBySplitOperation(a),[o]));setTransformation(InsertOperation,MergeOperation,(o,a)=>(o.position=o.position._getTransformedByMergeOperation(a),[o]));setTransformation(MarkerOperation,InsertOperation,(o,a)=>(o.oldRange&&(o.oldRange=o.oldRange._getTransformedByInsertOperation(a)[0]),o.newRange&&(o.newRange=o.newRange._getTransformedByInsertOperation(a)[0]),[o]));setTransformation(MarkerOperation,MarkerOperation,(o,a,n)=>{if(o.name==a.name)if(n.aIsStrong)o.oldRange=a.newRange?a.newRange.clone():null;else return[new NoOperation(0)];return[o]});setTransformation(MarkerOperation,MergeOperation,(o,a)=>(o.oldRange&&(o.oldRange=o.oldRange._getTransformedByMergeOperation(a)),o.newRange&&(o.newRange=o.newRange._getTransformedByMergeOperation(a)),[o]));setTransformation(MarkerOperation,MoveOperation,(o,a)=>{const n=[o];if(o.oldRange&&(o.oldRange=Range._createFromRanges(o.oldRange._getTransformedByMoveOperation(a))),o.newRange){const s=o.newRange._getTransformedByMoveOperation(a);o.newRange=s[0];for(let l=1;l<s.length;l++){const c=o.clone();c.oldRange=null,c.newRange=s[l],c.baseVersion=-1,n.push(c)}}return n});setTransformation(MarkerOperation,SplitOperation,(o,a,n)=>{if(o.oldRange&&(o.oldRange=o.oldRange._getTransformedBySplitOperation(a)),o.newRange){if(n.abRelation){const s=o.newRange._getTransformedBySplitOperation(a);return o.newRange.start.isEqual(a.splitPosition)&&n.abRelation.wasStartBeforeMergedElement?o.newRange.start=Position._createAt(a.insertionPosition):o.newRange.start.isEqual(a.splitPosition)&&!n.abRelation.wasInLeftElement?o.newRange.start=Position._createAt(a.moveTargetPosition):o.newRange.start=s.start,o.newRange.end.isEqual(a.splitPosition)&&n.abRelation.wasInRightElement?o.newRange.end=Position._createAt(a.moveTargetPosition):o.newRange.end.isEqual(a.splitPosition)&&n.abRelation.wasEndBeforeMergedElement?o.newRange.end=Position._createAt(a.insertionPosition):o.newRange.end=s.end,[o]}o.newRange=o.newRange._getTransformedBySplitOperation(a)}return[o]});setTransformation(MergeOperation,InsertOperation,(o,a)=>(o.sourcePosition.hasSameParentAs(a.position)&&(o.howMany+=a.howMany),o.sourcePosition=o.sourcePosition._getTransformedByInsertOperation(a),o.targetPosition=o.targetPosition._getTransformedByInsertOperation(a),[o]));setTransformation(MergeOperation,MergeOperation,(o,a,n)=>{if(o.sourcePosition.isEqual(a.sourcePosition)&&o.targetPosition.isEqual(a.targetPosition))if(n.bWasUndone){const s=a.graveyardPosition.path.slice();return s.push(0),o.sourcePosition=new Position(a.graveyardPosition.root,s),o.howMany=0,[o]}else return[new NoOperation(0)];if(o.sourcePosition.isEqual(a.sourcePosition)&&!o.targetPosition.isEqual(a.targetPosition)&&!n.bWasUndone&&n.abRelation!="splitAtSource"){const s=o.targetPosition.root.rootName=="$graveyard",l=a.targetPosition.root.rootName=="$graveyard";if(l&&!s||!(s&&!l)&&n.aIsStrong){const h=a.targetPosition._getTransformedByMergeOperation(a),f=o.targetPosition._getTransformedByMergeOperation(a);return[new MoveOperation(h,o.howMany,f,0)]}else return[new NoOperation(0)]}return o.sourcePosition.hasSameParentAs(a.targetPosition)&&(o.howMany+=a.howMany),o.sourcePosition=o.sourcePosition._getTransformedByMergeOperation(a),o.targetPosition=o.targetPosition._getTransformedByMergeOperation(a),(!o.graveyardPosition.isEqual(a.graveyardPosition)||!n.aIsStrong)&&(o.graveyardPosition=o.graveyardPosition._getTransformedByMergeOperation(a)),[o]});setTransformation(MergeOperation,MoveOperation,(o,a,n)=>{const s=Range._createFromPositionAndShift(a.sourcePosition,a.howMany);return a.type=="remove"&&!n.bWasUndone&&o.deletionPosition.hasSameParentAs(a.sourcePosition)&&s.containsPosition(o.sourcePosition)?[new NoOperation(0)]:(a.sourcePosition.getShiftedBy(a.howMany).isEqual(o.sourcePosition)?o.sourcePosition.stickiness="toNone":a.targetPosition.isEqual(o.sourcePosition)&&n.abRelation=="mergeSourceAffected"?o.sourcePosition.stickiness="toNext":a.sourcePosition.isEqual(o.targetPosition)?(o.targetPosition.stickiness="toNone",o.howMany-=a.howMany):a.targetPosition.isEqual(o.targetPosition)&&n.abRelation=="mergeTargetWasBefore"?(o.targetPosition.stickiness="toPrevious",o.howMany+=a.howMany):(o.sourcePosition.hasSameParentAs(a.targetPosition)&&(o.howMany+=a.howMany),o.sourcePosition.hasSameParentAs(a.sourcePosition)&&(o.howMany-=a.howMany)),o.sourcePosition=o.sourcePosition._getTransformedByMoveOperation(a),o.targetPosition=o.targetPosition._getTransformedByMoveOperation(a),o.sourcePosition.stickiness="toPrevious",o.targetPosition.stickiness="toNext",o.graveyardPosition.isEqual(a.targetPosition)||(o.graveyardPosition=o.graveyardPosition._getTransformedByMoveOperation(a)),[o])});setTransformation(MergeOperation,SplitOperation,(o,a,n)=>{if(a.graveyardPosition&&(o.graveyardPosition=o.graveyardPosition._getTransformedByDeletion(a.graveyardPosition,1),o.deletionPosition.isEqual(a.graveyardPosition)&&(o.howMany=a.howMany)),o.targetPosition.isEqual(a.splitPosition)&&(a.graveyardPosition&&o.deletionPosition.isEqual(a.graveyardPosition)||n.abRelation=="mergeTargetNotMoved"))return o.sourcePosition=o.sourcePosition._getTransformedBySplitOperation(a),[o];if(o.sourcePosition.isEqual(a.splitPosition)){if(n.abRelation=="mergeSourceNotMoved")return o.howMany=0,o.targetPosition=o.targetPosition._getTransformedBySplitOperation(a),[o];if(n.abRelation=="mergeSameElement"||o.sourcePosition.offset>0)return o.sourcePosition=a.moveTargetPosition.clone(),o.targetPosition=o.targetPosition._getTransformedBySplitOperation(a),[o]}return o.sourcePosition.hasSameParentAs(a.splitPosition)&&(o.howMany=a.splitPosition.offset),o.sourcePosition=o.sourcePosition._getTransformedBySplitOperation(a),o.targetPosition=o.targetPosition._getTransformedBySplitOperation(a),[o]});setTransformation(MoveOperation,InsertOperation,(o,a)=>{const s=Range._createFromPositionAndShift(o.sourcePosition,o.howMany)._getTransformedByInsertOperation(a,!1)[0];return o.sourcePosition=s.start,o.howMany=s.end.offset-s.start.offset,o.targetPosition.isEqual(a.position)||(o.targetPosition=o.targetPosition._getTransformedByInsertOperation(a)),[o]});setTransformation(MoveOperation,MoveOperation,(o,a,n)=>{const s=Range._createFromPositionAndShift(o.sourcePosition,o.howMany),l=Range._createFromPositionAndShift(a.sourcePosition,a.howMany);let c=n.aIsStrong,u=!n.aIsStrong;n.abRelation=="insertBefore"||n.baRelation=="insertAfter"?u=!0:(n.abRelation=="insertAfter"||n.baRelation=="insertBefore")&&(u=!1);let d;if(o.targetPosition.isEqual(a.targetPosition)&&u?d=o.targetPosition._getTransformedByDeletion(a.sourcePosition,a.howMany):d=o.targetPosition._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany),_moveTargetIntoMovedRange(o,a)&&_moveTargetIntoMovedRange(a,o))return[a.getReversed()];if(s.containsPosition(a.targetPosition)&&s.containsRange(l,!0))return s.start=s.start._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany),s.end=s.end._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany),_makeMoveOperationsFromRanges([s],d);if(l.containsPosition(o.targetPosition)&&l.containsRange(s,!0))return s.start=s.start._getCombined(a.sourcePosition,a.getMovedRangeStart()),s.end=s.end._getCombined(a.sourcePosition,a.getMovedRangeStart()),_makeMoveOperationsFromRanges([s],d);const p=compareArrays(o.sourcePosition.getParentPath(),a.sourcePosition.getParentPath());if(p=="prefix"||p=="extension")return s.start=s.start._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany),s.end=s.end._getTransformedByMove(a.sourcePosition,a.targetPosition,a.howMany),_makeMoveOperationsFromRanges([s],d);o.type=="remove"&&a.type!="remove"&&!n.aWasUndone&&!n.forceWeakRemove?c=!0:o.type!="remove"&&a.type=="remove"&&!n.bWasUndone&&!n.forceWeakRemove&&(c=!1);const g=[],v=s.getDifference(l);for(const w of v){w.start=w.start._getTransformedByDeletion(a.sourcePosition,a.howMany),w.end=w.end._getTransformedByDeletion(a.sourcePosition,a.howMany);const x=compareArrays(w.start.getParentPath(),a.getMovedRangeStart().getParentPath())=="same",S=w._getTransformedByInsertion(a.getMovedRangeStart(),a.howMany,x);g.push(...S)}const b=s.getIntersection(l);return b!==null&&c&&(b.start=b.start._getCombined(a.sourcePosition,a.getMovedRangeStart()),b.end=b.end._getCombined(a.sourcePosition,a.getMovedRangeStart()),g.length===0?g.push(b):g.length==1?l.start.isBefore(s.start)||l.start.isEqual(s.start)?g.unshift(b):g.push(b):g.splice(1,0,b)),g.length===0?[new NoOperation(o.baseVersion)]:_makeMoveOperationsFromRanges(g,d)});setTransformation(MoveOperation,SplitOperation,(o,a,n)=>{let s=o.targetPosition.clone();(!o.targetPosition.isEqual(a.insertionPosition)||!a.graveyardPosition||n.abRelation=="moveTargetAfter")&&(s=o.targetPosition._getTransformedBySplitOperation(a));const l=Range._createFromPositionAndShift(o.sourcePosition,o.howMany);if(l.end.isEqual(a.insertionPosition))return a.graveyardPosition||o.howMany++,o.targetPosition=s,[o];if(l.start.hasSameParentAs(a.splitPosition)&&l.containsPosition(a.splitPosition)){let d=new Range(a.splitPosition,l.end);d=d._getTransformedBySplitOperation(a);const h=[new Range(l.start,a.splitPosition),d];return _makeMoveOperationsFromRanges(h,s)}o.targetPosition.isEqual(a.splitPosition)&&n.abRelation=="insertAtSource"&&(s=a.moveTargetPosition),o.targetPosition.isEqual(a.insertionPosition)&&n.abRelation=="insertBetween"&&(s=o.targetPosition);const u=[l._getTransformedBySplitOperation(a)];if(a.graveyardPosition){const d=l.start.isEqual(a.graveyardPosition)||l.containsPosition(a.graveyardPosition);o.howMany>1&&d&&!n.aWasUndone&&u.push(Range._createFromPositionAndShift(a.insertionPosition,1))}return _makeMoveOperationsFromRanges(u,s)});setTransformation(MoveOperation,MergeOperation,(o,a,n)=>{const s=Range._createFromPositionAndShift(o.sourcePosition,o.howMany);if(a.deletionPosition.hasSameParentAs(o.sourcePosition)&&s.containsPosition(a.sourcePosition)){if(o.type=="remove"&&!n.forceWeakRemove){if(!n.aWasUndone){const u=[];let d=a.graveyardPosition.clone(),h=a.targetPosition._getTransformedByMergeOperation(a);const f=o.targetPosition.getTransformedByOperation(a);o.howMany>1&&(u.push(new MoveOperation(o.sourcePosition,o.howMany-1,f,0)),d=d._getTransformedByMove(o.sourcePosition,f,o.howMany-1),h=h._getTransformedByMove(o.sourcePosition,f,o.howMany-1));const p=a.deletionPosition._getCombined(o.sourcePosition,f),g=new MoveOperation(d,1,p,0),v=g.getMovedRangeStart().path.slice();v.push(0);const b=new Position(g.targetPosition.root,v);h=h._getTransformedByMove(d,p,1);const w=new MoveOperation(h,a.howMany,b,0);return u.push(g),u.push(w),u}}else if(o.howMany==1)return n.bWasUndone?(o.sourcePosition=a.graveyardPosition.clone(),o.targetPosition=o.targetPosition._getTransformedByMergeOperation(a),[o]):[new NoOperation(0)]}const c=Range._createFromPositionAndShift(o.sourcePosition,o.howMany)._getTransformedByMergeOperation(a);return o.sourcePosition=c.start,o.howMany=c.end.offset-c.start.offset,o.targetPosition=o.targetPosition._getTransformedByMergeOperation(a),[o]});setTransformation(RenameOperation,InsertOperation,(o,a)=>(o.position=o.position._getTransformedByInsertOperation(a),[o]));setTransformation(RenameOperation,MergeOperation,(o,a)=>o.position.isEqual(a.deletionPosition)?(o.position=a.graveyardPosition.clone(),o.position.stickiness="toNext",[o]):(o.position=o.position._getTransformedByMergeOperation(a),[o]));setTransformation(RenameOperation,MoveOperation,(o,a)=>(o.position=o.position._getTransformedByMoveOperation(a),[o]));setTransformation(RenameOperation,RenameOperation,(o,a,n)=>{if(o.position.isEqual(a.position))if(n.aIsStrong)o.oldName=a.newName;else return[new NoOperation(0)];return[o]});setTransformation(RenameOperation,SplitOperation,(o,a)=>{const n=o.position.path,s=a.splitPosition.getParentPath();if(compareArrays(n,s)=="same"&&!a.graveyardPosition){const l=new RenameOperation(o.position.getShiftedBy(1),o.oldName,o.newName,0);return[o,l]}return o.position=o.position._getTransformedBySplitOperation(a),[o]});setTransformation(RootAttributeOperation,RootAttributeOperation,(o,a,n)=>{if(o.root===a.root&&o.key===a.key){if(!n.aIsStrong||o.newValue===a.newValue)return[new NoOperation(0)];o.oldValue=a.newValue}return[o]});setTransformation(RootOperation,RootOperation,(o,a)=>o.rootName===a.rootName&&o.isAdd===a.isAdd?[new NoOperation(0)]:[o]);setTransformation(SplitOperation,InsertOperation,(o,a)=>(o.splitPosition.hasSameParentAs(a.position)&&o.splitPosition.offset<a.position.offset&&(o.howMany+=a.howMany),o.splitPosition=o.splitPosition._getTransformedByInsertOperation(a),o.insertionPosition=o.insertionPosition._getTransformedByInsertOperation(a),[o]));setTransformation(SplitOperation,MergeOperation,(o,a,n)=>{if(!o.graveyardPosition&&!n.bWasUndone&&o.splitPosition.hasSameParentAs(a.sourcePosition)){const s=a.graveyardPosition.path.slice();s.push(0);const l=new Position(a.graveyardPosition.root,s),c=SplitOperation.getInsertionPosition(new Position(a.graveyardPosition.root,s)),u=new SplitOperation(l,0,c,null,0);return o.splitPosition=o.splitPosition._getTransformedByMergeOperation(a),o.insertionPosition=SplitOperation.getInsertionPosition(o.splitPosition),o.graveyardPosition=u.insertionPosition.clone(),o.graveyardPosition.stickiness="toNext",[u,o]}return o.splitPosition.hasSameParentAs(a.deletionPosition)&&!o.splitPosition.isAfter(a.deletionPosition)&&o.howMany--,o.splitPosition.hasSameParentAs(a.targetPosition)&&(o.howMany+=a.howMany),o.splitPosition=o.splitPosition._getTransformedByMergeOperation(a),o.insertionPosition=SplitOperation.getInsertionPosition(o.splitPosition),o.graveyardPosition&&(o.graveyardPosition=o.graveyardPosition._getTransformedByMergeOperation(a)),[o]});setTransformation(SplitOperation,MoveOperation,(o,a,n)=>{const s=Range._createFromPositionAndShift(a.sourcePosition,a.howMany);if(o.graveyardPosition){const c=s.start.isEqual(o.graveyardPosition)||s.containsPosition(o.graveyardPosition);if(!n.bWasUndone&&c){const u=o.splitPosition._getTransformedByMoveOperation(a),d=o.graveyardPosition._getTransformedByMoveOperation(a),h=d.path.slice();h.push(0);const f=new Position(d.root,h);return[new MoveOperation(u,o.howMany,f,0)]}o.graveyardPosition=o.graveyardPosition._getTransformedByMoveOperation(a)}const l=o.splitPosition.isEqual(a.targetPosition);if(l&&(n.baRelation=="insertAtSource"||n.abRelation=="splitBefore"))return o.howMany+=a.howMany,o.splitPosition=o.splitPosition._getTransformedByDeletion(a.sourcePosition,a.howMany),o.insertionPosition=SplitOperation.getInsertionPosition(o.splitPosition),[o];if(l&&n.abRelation&&n.abRelation.howMany){const{howMany:c,offset:u}=n.abRelation;return o.howMany+=c,o.splitPosition=o.splitPosition.getShiftedBy(u),[o]}if(o.splitPosition.hasSameParentAs(a.sourcePosition)&&s.containsPosition(o.splitPosition)){const c=a.howMany-(o.splitPosition.offset-a.sourcePosition.offset);return o.howMany-=c,o.splitPosition.hasSameParentAs(a.targetPosition)&&o.splitPosition.offset<a.targetPosition.offset&&(o.howMany+=a.howMany),o.splitPosition=a.sourcePosition.clone(),o.insertionPosition=SplitOperation.getInsertionPosition(o.splitPosition),[o]}return a.sourcePosition.isEqual(a.targetPosition)||(o.splitPosition.hasSameParentAs(a.sourcePosition)&&o.splitPosition.offset<=a.sourcePosition.offset&&(o.howMany-=a.howMany),o.splitPosition.hasSameParentAs(a.targetPosition)&&o.splitPosition.offset<a.targetPosition.offset&&(o.howMany+=a.howMany)),o.splitPosition.stickiness="toNone",o.splitPosition=o.splitPosition._getTransformedByMoveOperation(a),o.splitPosition.stickiness="toNext",o.graveyardPosition?o.insertionPosition=o.insertionPosition._getTransformedByMoveOperation(a):o.insertionPosition=SplitOperation.getInsertionPosition(o.splitPosition),[o]});setTransformation(SplitOperation,SplitOperation,(o,a,n)=>{if(o.splitPosition.isEqual(a.splitPosition)){if(!o.graveyardPosition&&!a.graveyardPosition)return[new NoOperation(0)];if(o.graveyardPosition&&a.graveyardPosition&&o.graveyardPosition.isEqual(a.graveyardPosition))return[new NoOperation(0)];if(n.abRelation=="splitBefore")return o.howMany=0,o.graveyardPosition=o.graveyardPosition._getTransformedBySplitOperation(a),[o]}if(o.graveyardPosition&&a.graveyardPosition&&o.graveyardPosition.isEqual(a.graveyardPosition)){const s=o.splitPosition.root.rootName=="$graveyard",l=a.splitPosition.root.rootName=="$graveyard";if(l&&!s||!(s&&!l)&&n.aIsStrong){const h=[];return a.howMany&&h.push(new MoveOperation(a.moveTargetPosition,a.howMany,a.splitPosition,0)),o.howMany&&h.push(new MoveOperation(o.splitPosition,o.howMany,o.moveTargetPosition,0)),h}else return[new NoOperation(0)]}if(o.graveyardPosition&&(o.graveyardPosition=o.graveyardPosition._getTransformedBySplitOperation(a)),o.splitPosition.isEqual(a.insertionPosition)&&n.abRelation=="splitBefore")return o.howMany++,[o];if(a.splitPosition.isEqual(o.insertionPosition)&&n.baRelation=="splitBefore"){const s=a.insertionPosition.path.slice();s.push(0);const l=new Position(a.insertionPosition.root,s),c=new MoveOperation(o.insertionPosition,1,l,0);return[o,c]}return o.splitPosition.hasSameParentAs(a.splitPosition)&&o.splitPosition.offset<a.splitPosition.offset&&(o.howMany-=a.howMany),o.splitPosition=o.splitPosition._getTransformedBySplitOperation(a),o.insertionPosition=SplitOperation.getInsertionPosition(o.splitPosition),[o]});function _moveTargetIntoMovedRange(o,a){return o.targetPosition._getTransformedByDeletion(a.sourcePosition,a.howMany)===null}function _makeMoveOperationsFromRanges(o,a){const n=[];for(let s=0;s<o.length;s++){const l=o[s],c=new MoveOperation(l.start,l.end.offset-l.start.offset,a,0);n.push(c);for(let u=s+1;u<o.length;u++)o[u]=o[u]._getTransformedByMove(c.sourcePosition,c.targetPosition,c.howMany)[0];a=a._getTransformedByMove(c.sourcePosition,c.targetPosition,c.howMany)}return n}class LivePosition extends EmitterMixin(Position){constructor(a,n,s="toNone"){if(super(a,n,s),!this.root.is("rootElement"))throw new CKEditorError("model-liveposition-root-not-rootelement",a);bindWithDocument.call(this)}detach(){this.stopListening()}toPosition(){return new Position(this.root,this.path.slice(),this.stickiness)}static fromPosition(a,n){return new this(a.root,a.path.slice(),n||a.stickiness)}}LivePosition.prototype.is=function(o){return o==="livePosition"||o==="model:livePosition"||o=="position"||o==="model:position"};function bindWithDocument(){this.listenTo(this.root.document.model,"applyOperation",(o,a)=>{const n=a[0];n.isDocumentOperation&&transform.call(this,n)},{priority:"low"})}function transform(o){const a=this.getTransformedByOperation(o);if(!this.isEqual(a)){const n=this.toPosition();this.path=a.path,this.root=a.root,this.fire("change",n)}}class Batch{constructor(a={}){M(this,"operations");M(this,"isUndoable");M(this,"isLocal");M(this,"isUndo");M(this,"isTyping");typeof a=="string"&&(a=a==="transparent"?{isUndoable:!1}:{},logWarning("batch-constructor-deprecated-string-type"));const{isUndoable:n=!0,isLocal:s=!0,isUndo:l=!1,isTyping:c=!1}=a;this.operations=[],this.isUndoable=n,this.isLocal=s,this.isUndo=l,this.isTyping=c}get type(){return logWarning("batch-type-deprecated"),"default"}get baseVersion(){for(const a of this.operations)if(a.baseVersion!==null)return a.baseVersion;return null}addOperation(a){return a.isDocumentOperation&&(a.batch=this,this.operations.push(a)),a}}const rr=class rr{constructor(a){M(this,"_markerCollection");M(this,"_changesInElement",new Map);M(this,"_elementsSnapshots",new Map);M(this,"_elementChildrenSnapshots",new Map);M(this,"_elementState",new Map);M(this,"_changedMarkers",new Map);M(this,"_changedRoots",new Map);M(this,"_changeCount",0);M(this,"_cachedChanges",null);M(this,"_cachedChangesWithGraveyard",null);M(this,"_refreshedItems",new Set);this._markerCollection=a}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(a){const n=a;switch(n.type){case"insert":{if(this._isInInsertedElement(n.position.parent))return;this._markInsert(n.position.parent,n.position.offset,n.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(const s of n.range.getItems({shallow:!0}))this._isInInsertedElement(s.parent)||this._markAttribute(s);break}case"remove":case"move":case"reinsert":{if(n.sourcePosition.isEqual(n.targetPosition)||n.sourcePosition.getShiftedBy(n.howMany).isEqual(n.targetPosition))return;const s=this._isInInsertedElement(n.sourcePosition.parent),l=this._isInInsertedElement(n.targetPosition.parent);s||this._markRemove(n.sourcePosition.parent,n.sourcePosition.offset,n.howMany),l||this._markInsert(n.targetPosition.parent,n.getMovedRangeStart().offset,n.howMany);const c=Range._createFromPositionAndShift(n.sourcePosition,n.howMany);for(const u of c.getItems({shallow:!0}))this._setElementState(u,"move");break}case"rename":{if(this._isInInsertedElement(n.position.parent))return;this._markRemove(n.position.parent,n.position.offset,1),this._markInsert(n.position.parent,n.position.offset,1);const s=Range._createFromPositionAndShift(n.position,1);for(const l of this._markerCollection.getMarkersIntersectingRange(s)){const c=l.getData();this.bufferMarkerChange(l.name,c,c)}this._setElementState(n.position.nodeAfter,"rename");break}case"split":{const s=n.splitPosition.parent;if(!this._isInInsertedElement(s)){this._markRemove(s,n.splitPosition.offset,n.howMany);const l=Range._createFromPositionAndShift(n.splitPosition,n.howMany);for(const c of l.getItems({shallow:!0}))this._setElementState(c,"move")}this._isInInsertedElement(n.insertionPosition.parent)||this._markInsert(n.insertionPosition.parent,n.insertionPosition.offset,1),n.graveyardPosition&&(this._markRemove(n.graveyardPosition.parent,n.graveyardPosition.offset,1),this._setElementState(n.graveyardPosition.nodeAfter,"move"));break}case"merge":{const s=n.sourcePosition.parent;this._isInInsertedElement(s.parent)||this._markRemove(s.parent,s.startOffset,1);const l=n.graveyardPosition.parent;this._markInsert(l,n.graveyardPosition.offset,1),this._setElementState(s,"move");const c=n.targetPosition.parent;if(!this._isInInsertedElement(c)){this._markInsert(c,n.targetPosition.offset,s.maxOffset);const u=Range._createFromPositionAndShift(n.sourcePosition,n.howMany);for(const d of u.getItems({shallow:!0}))this._setElementState(d,"move")}break}case"detachRoot":case"addRoot":{const s=n.affectedSelectable;if(!s._isLoaded||s.isAttached()==n.isAdd)return;this._bufferRootStateChange(n.rootName,n.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!n.root._isLoaded)return;const s=n.root.rootName;this._bufferRootAttributeChange(s,n.key,n.oldValue,n.newValue);break}}this._cachedChanges=null}bufferMarkerChange(a,n,s){n.range&&n.range.root.is("rootElement")&&!n.range.root._isLoaded&&(n.range=null),s.range&&s.range.root.is("rootElement")&&!s.range.root._isLoaded&&(s.range=null);let l=this._changedMarkers.get(a);l?l.newMarkerData=s:(l={newMarkerData:s,oldMarkerData:n},this._changedMarkers.set(a,l)),l.oldMarkerData.range==null&&s.range==null&&this._changedMarkers.delete(a)}getMarkersToRemove(){const a=[];for(const[n,s]of this._changedMarkers)s.oldMarkerData.range!=null&&a.push({name:n,range:s.oldMarkerData.range});return a}getMarkersToAdd(){const a=[];for(const[n,s]of this._changedMarkers)s.newMarkerData.range!=null&&a.push({name:n,range:s.newMarkerData.range});return a}getChangedMarkers(){return Array.from(this._changedMarkers).map(([a,n])=>({name:a,data:{oldRange:n.oldMarkerData.range,newRange:n.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(const{newMarkerData:a,oldMarkerData:n}of this._changedMarkers.values()){if(a.affectsData!==n.affectsData)return!0;if(a.affectsData){const s=a.range&&!n.range,l=!a.range&&n.range,c=a.range&&n.range&&!a.range.isEqual(n.range);if(s||l||c)return!0}}return!1}getChanges(a={}){if(this._cachedChanges)return a.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let n=[];for(const s of this._changesInElement.keys()){const l=this._changesInElement.get(s).sort((p,g)=>p.offset===g.offset?p.type!=g.type?p.type=="remove"?-1:1:0:p.offset<g.offset?-1:1),c=this._elementChildrenSnapshots.get(s),u=_getChildrenSnapshots(s.getChildren()),d=_generateDiffInstructionsFromChanges(c.length,l);let h=0,f=0;for(const p of d)if(p==="i"){const g=this._getDiffActionForNode(u[h].node,"insert"),v=this._elementsSnapshots.get(u[h].node),b=this._getInsertDiff(s,h,g,u[h],v);n.push(b),h++}else if(p==="r"){const g=this._getDiffActionForNode(c[f].node,"remove"),v=this._getRemoveDiff(s,h,g,c[f]);n.push(v),f++}else if(p==="a"){const g=c[f].attributes,v=u[h].attributes;let b;if(u[h].name=="$text")b=new Range(Position._createAt(s,h),Position._createAt(s,h+1));else{const x=s.offsetToIndex(h);b=new Range(Position._createAt(s,h),Position._createAt(s.getChild(x),0))}const w=this._getAttributesDiff(b,g,v);n.push(...w),h++,f++}else h++,f++}n.sort((s,l)=>s.position.root!=l.position.root?s.position.root.rootName<l.position.root.rootName?-1:1:s.position.isEqual(l.position)?s.changeCount-l.changeCount:s.position.isBefore(l.position)?-1:1);for(let s=1,l=0;s<n.length;s++){const c=n[l],u=n[s],d=c.type=="remove"&&u.type=="remove"&&c.name=="$text"&&u.name=="$text"&&c.position.isEqual(u.position),h=c.type=="insert"&&u.type=="insert"&&c.name=="$text"&&u.name=="$text"&&c.position.parent==u.position.parent&&c.position.offset+c.length==u.position.offset,f=c.type=="attribute"&&u.type=="attribute"&&c.position.parent==u.position.parent&&c.range.isFlat&&u.range.isFlat&&c.position.offset+c.length==u.position.offset&&c.attributeKey==u.attributeKey&&c.attributeOldValue==u.attributeOldValue&&c.attributeNewValue==u.attributeNewValue;d||h||f?(c.length++,f&&(c.range.end=c.range.end.getShiftedBy(1)),n[s]=null):l=s}n=n.filter(s=>s);for(const s of n)delete s.changeCount,s.type=="attribute"&&(delete s.position,delete s.length);return this._changeCount=0,this._cachedChangesWithGraveyard=n,this._cachedChanges=n.filter(_changesInGraveyardFilter),a.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(a=>{const n={...a};return n.state!==void 0&&delete n.attributes,n})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(a){if(this._isInInsertedElement(a.parent))return;this._markRemove(a.parent,a.startOffset,a.offsetSize),this._markInsert(a.parent,a.startOffset,a.offsetSize),this._refreshedItems.add(a),this._setElementState(a,"refresh");const n=Range._createOn(a);for(const s of this._markerCollection.getMarkersIntersectingRange(n)){const l=s.getData();this.bufferMarkerChange(s.name,l,l)}this._cachedChanges=null}_bufferRootLoad(a){if(a.isAttached()){this._bufferRootStateChange(a.rootName,!0),this._markInsert(a,0,a.maxOffset);for(const n of a.getAttributeKeys())this._bufferRootAttributeChange(a.rootName,n,null,a.getAttribute(n));for(const n of this._markerCollection)if(n.getRange().root==a){const s=n.getData();this.bufferMarkerChange(n.name,{...s,range:null},s)}}}_bufferRootStateChange(a,n){if(!this._changedRoots.has(a)){this._changedRoots.set(a,{name:a,state:n?"attached":"detached"});return}const s=this._changedRoots.get(a);s.state!==void 0?(delete s.state,s.attributes===void 0&&this._changedRoots.delete(a)):s.state=n?"attached":"detached"}_bufferRootAttributeChange(a,n,s,l){const c=this._changedRoots.get(a)||{name:a},u=c.attributes||{};if(u[n]){const d=u[n];l===d.oldValue?delete u[n]:d.newValue=l}else u[n]={oldValue:s,newValue:l};Object.entries(u).length===0?(delete c.attributes,c.state===void 0&&this._changedRoots.delete(a)):(c.attributes=u,this._changedRoots.set(a,c))}_markInsert(a,n,s){if(a.root.is("rootElement")&&!a.root._isLoaded)return;const l={type:"insert",offset:n,howMany:s,count:this._changeCount++};this._markChange(a,l)}_markRemove(a,n,s){if(a.root.is("rootElement")&&!a.root._isLoaded)return;const l={type:"remove",offset:n,howMany:s,count:this._changeCount++};this._markChange(a,l),this._removeAllNestedChanges(a,n,s)}_markAttribute(a){if(a.root.is("rootElement")&&!a.root._isLoaded)return;const n={type:"attribute",offset:a.startOffset,howMany:a.offsetSize,count:this._changeCount++};this._markChange(a.parent,n)}_markChange(a,n){this._makeSnapshots(a);const s=this._getChangesForElement(a);this._handleChange(n,s),s.push(n);for(let l=0;l<s.length;l++)s[l].howMany<1&&(s.splice(l,1),l--)}_setElementState(a,n){if(!a.is("element"))return;const s=rr._statesPriority.indexOf(this._elementState.get(a));rr._statesPriority.indexOf(n)>s&&this._elementState.set(a,n)}_getDiffActionForNode(a,n){if(!a.is("element")||!this._elementsSnapshots.has(a))return n;const s=this._elementState.get(a);return!s||s=="move"?n:s}_getChangesForElement(a){let n;return this._changesInElement.has(a)?n=this._changesInElement.get(a):(n=[],this._changesInElement.set(a,n)),n}_makeSnapshots(a){if(this._elementChildrenSnapshots.has(a))return;const n=_getChildrenSnapshots(a.getChildren());this._elementChildrenSnapshots.set(a,n);for(const s of n)this._elementsSnapshots.set(s.node,s)}_handleChange(a,n){a.nodesToHandle=a.howMany;for(const s of n){const l=a.offset+a.howMany,c=s.offset+s.howMany;if(a.type=="insert"&&(s.type=="insert"&&(a.offset<=s.offset?s.offset+=a.howMany:a.offset<c&&(s.howMany+=a.nodesToHandle,a.nodesToHandle=0)),s.type=="remove"&&a.offset<s.offset&&(s.offset+=a.howMany),s.type=="attribute")){if(a.offset<=s.offset)s.offset+=a.howMany;else if(a.offset<c){const u=s.howMany;s.howMany=a.offset-s.offset,n.unshift({type:"attribute",offset:l,howMany:u-s.howMany,count:this._changeCount++})}}if(a.type=="remove"){if(s.type=="insert"){if(l<=s.offset)s.offset-=a.howMany;else if(l<=c)if(a.offset<s.offset){const u=l-s.offset;s.offset=a.offset,s.howMany-=u,a.nodesToHandle-=u}else s.howMany-=a.nodesToHandle,a.nodesToHandle=0;else if(a.offset<=s.offset)a.nodesToHandle-=s.howMany,s.howMany=0;else if(a.offset<c){const u=c-a.offset;s.howMany-=u,a.nodesToHandle-=u}}if(s.type=="remove"&&(l<=s.offset?s.offset-=a.howMany:a.offset<s.offset&&(a.nodesToHandle+=s.howMany,s.howMany=0)),s.type=="attribute"){if(l<=s.offset)s.offset-=a.howMany;else if(a.offset<s.offset){const u=l-s.offset;s.offset=a.offset,s.howMany-=u}else if(a.offset<c)if(l<=c){const u=s.howMany;s.howMany=a.offset-s.offset;const d=u-s.howMany-a.nodesToHandle;n.unshift({type:"attribute",offset:a.offset,howMany:d,count:this._changeCount++})}else s.howMany-=c-a.offset}}if(a.type=="attribute"){if(s.type=="insert")if(a.offset<s.offset&&l>s.offset){if(l>c){const u={type:"attribute",offset:c,howMany:l-c,count:this._changeCount++};this._handleChange(u,n),n.push(u)}a.nodesToHandle=s.offset-a.offset,a.howMany=a.nodesToHandle}else a.offset>=s.offset&&a.offset<c&&(l>c?(a.nodesToHandle=l-c,a.offset=c):a.nodesToHandle=0);if(s.type=="remove"&&a.offset<s.offset&&l>s.offset){const u={type:"attribute",offset:s.offset,howMany:l-s.offset,count:this._changeCount++};this._handleChange(u,n),n.push(u),a.nodesToHandle=s.offset-a.offset,a.howMany=a.nodesToHandle}s.type=="attribute"&&(a.offset>=s.offset&&l<=c?(a.nodesToHandle=0,a.howMany=0,a.offset=0):a.offset<=s.offset&&l>=c&&(s.howMany=0))}}a.howMany=a.nodesToHandle,delete a.nodesToHandle}_getInsertDiff(a,n,s,l,c){const u={type:"insert",position:Position._createAt(a,n),name:l.name,attributes:new Map(l.attributes),length:1,changeCount:this._changeCount++,action:s};return s!="insert"&&c&&(u.before={name:c.name,attributes:new Map(c.attributes)}),u}_getRemoveDiff(a,n,s,l){return{type:"remove",action:s,position:Position._createAt(a,n),name:l.name,attributes:new Map(l.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(a,n,s){const l=[];s=new Map(s);for(const[c,u]of n){const d=s.has(c)?s.get(c):null;d!==u&&l.push({type:"attribute",position:a.start,range:a.clone(),length:1,attributeKey:c,attributeOldValue:u,attributeNewValue:d,changeCount:this._changeCount++}),s.delete(c)}for(const[c,u]of s)l.push({type:"attribute",position:a.start,range:a.clone(),length:1,attributeKey:c,attributeOldValue:null,attributeNewValue:u,changeCount:this._changeCount++});return l}_isInInsertedElement(a){const n=a.parent;if(!n)return!1;const s=this._changesInElement.get(n),l=a.startOffset;if(s){for(const c of s)if(c.type=="insert"&&l>=c.offset&&l<c.offset+c.howMany)return!0}return this._isInInsertedElement(n)}_removeAllNestedChanges(a,n,s){const l=new Range(Position._createAt(a,n),Position._createAt(a,n+s));for(const c of l.getItems({shallow:!0}))c.is("element")&&(this._changesInElement.delete(c),this._removeAllNestedChanges(c,0,c.maxOffset))}};M(rr,"_statesPriority",[void 0,"refresh","rename","move"]);let Differ=rr;function _getSingleNodeSnapshot(o){return{node:o,name:o.is("$text")?"$text":o.name,attributes:new Map(o.getAttributes())}}function _getChildrenSnapshots(o){const a=[];for(const n of o)if(n.is("$text"))for(let s=0;s<n.data.length;++s)a.push(_getSingleNodeSnapshot(n));else a.push(_getSingleNodeSnapshot(n));return a}function _generateDiffInstructionsFromChanges(o,a){const n=[];let s=0,l=0;for(const c of a){if(c.offset>s){for(let u=0;u<c.offset-s;u++)n.push("e");l+=c.offset-s}if(c.type=="insert"){for(let u=0;u<c.howMany;u++)n.push("i");s=c.offset+c.howMany}else if(c.type=="remove"){for(let u=0;u<c.howMany;u++)n.push("r");s=c.offset,l+=c.howMany}else{if(c.howMany>1500)for(let u=0;u<c.howMany;u++)n.push("a");else n.push(..."a".repeat(c.howMany).split(""));s=c.offset+c.howMany,l+=c.howMany}}if(l<o)for(let c=0;c<o-l-s;c++)n.push("e");return n}function _changesInGraveyardFilter(o){const a="position"in o&&o.position.root.rootName=="$graveyard",n="range"in o&&o.range.root.rootName=="$graveyard";return!a&&!n}class History{constructor(){M(this,"_operations",[]);M(this,"_undoPairs",new Map);M(this,"_undoneOperations",new Set);M(this,"_baseVersionToOperationIndex",new Map);M(this,"_version",0);M(this,"_gaps",new Map)}get version(){return this._version}set version(a){this._operations.length&&a>this._version+1&&this._gaps.set(this._version,a),this._version=a}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(a){if(a.baseVersion!==this.version)throw new CKEditorError("model-document-history-addoperation-incorrect-version",this,{operation:a,historyVersion:this.version});this._operations.push(a),this._version++,this._baseVersionToOperationIndex.set(a.baseVersion,this._operations.length-1)}getOperations(a,n=this.version){if(!this._operations.length)return[];const s=this._operations[0];a===void 0&&(a=s.baseVersion);let l=n-1;for(const[d,h]of this._gaps)a>d&&a<h&&(a=h),l>d&&l<h&&(l=d-1);if(l<s.baseVersion||a>this.lastOperation.baseVersion)return[];let c=this._baseVersionToOperationIndex.get(a);c===void 0&&(c=0);let u=this._baseVersionToOperationIndex.get(l);return u===void 0&&(u=this._operations.length-1),this._operations.slice(c,u+1)}getOperation(a){const n=this._baseVersionToOperationIndex.get(a);if(n!==void 0)return this._operations[n]}setOperationAsUndone(a,n){this._undoPairs.set(n,a),this._undoneOperations.add(a)}isUndoingOperation(a){return this._undoPairs.has(a)}isUndoneOperation(a){return this._undoneOperations.has(a)}getUndoneOperation(a){return this._undoPairs.get(a)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}class RootElement extends Element$2{constructor(n,s,l="main"){super(s);M(this,"rootName");M(this,"_document");M(this,"_isAttached",!0);M(this,"_isLoaded",!0);this._document=n,this.rootName=l}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}}RootElement.prototype.is=function(o,a){return a?a===this.name&&(o==="rootElement"||o==="model:rootElement"||o==="element"||o==="model:element"):o==="rootElement"||o==="model:rootElement"||o==="element"||o==="model:element"||o==="node"||o==="model:node"};const graveyardName="$graveyard";class Document extends EmitterMixin(){constructor(n){super();M(this,"model");M(this,"history");M(this,"selection");M(this,"roots");M(this,"differ");M(this,"isReadOnly");M(this,"_postFixers");M(this,"_hasSelectionChangedFromTheLastChangeBlock");this.model=n,this.history=new History,this.selection=new DocumentSelection(this),this.roots=new Collection({idProperty:"rootName"}),this.differ=new Differ(n.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",graveyardName),this.listenTo(n,"applyOperation",(s,l)=>{const c=l[0];c.isDocumentOperation&&this.differ.bufferOperation(c)},{priority:"high"}),this.listenTo(n,"applyOperation",(s,l)=>{const c=l[0];c.isDocumentOperation&&this.history.addOperation(c)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(n.markers,"update",(s,l,c,u,d)=>{const h={...l.getData(),range:u};this.differ.bufferMarkerChange(l.name,d,h),c===null&&l.on("change",(f,p)=>{const g=l.getData();this.differ.bufferMarkerChange(l.name,{...g,range:p},g)})}),this.registerPostFixer(s=>{let l=!1;for(const c of this.roots)!c.isAttached()&&!c.isEmpty&&(s.remove(s.createRangeIn(c)),l=!0);for(const c of this.model.markers)c.getRange().root.isAttached()||(s.removeMarker(c),l=!0);return l})}get version(){return this.history.version}set version(n){this.history.version=n}get graveyard(){return this.getRoot(graveyardName)}createRoot(n="$root",s="main"){if(this.roots.get(s))throw new CKEditorError("model-document-createroot-name-exists",this,{name:s});const l=new RootElement(this,n,s);return this.roots.add(l),l}destroy(){this.selection.destroy(),this.stopListening()}getRoot(n="main"){return this.roots.get(n)}getRootNames(n=!1){return this.getRoots(n).map(s=>s.rootName)}getRoots(n=!1){return this.roots.filter(s=>s!=this.graveyard&&(n||s.isAttached())&&s._isLoaded)}registerPostFixer(n){this._postFixers.add(n)}toJSON(){const n=clone$6(this);return n.selection="[engine.model.DocumentSelection]",n.model="[engine.model.Model]",n}_handleChangeBlock(n){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(n),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",n.batch):this.fire("change",n.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){const n=this.getRoots();return n.length?n[0]:this.graveyard}_getDefaultRange(){const n=this._getDefaultRoot(),s=this.model,l=s.schema,c=s.createPositionFromPath(n,[0]);return l.getNearestSelectionRange(c)||s.createRange(c)}_validateSelectionRange(n){return n.start.isValid()&&n.end.isValid()&&validateTextNodePosition(n.start)&&validateTextNodePosition(n.end)}_callPostFixers(n){let s=!1;do for(const l of this._postFixers)if(this.selection.refresh(),s=l(n),s)break;while(s)}}function validateTextNodePosition(o){const a=o.textNode;if(a){const n=a.data,s=o.offset-a.startOffset;return!isInsideSurrogatePair(n,s)&&!isInsideCombinedSymbol(n,s)}return!0}class MarkerCollection extends EmitterMixin(){constructor(){super(...arguments);M(this,"_markers",new Map)}[Symbol.iterator](){return this._markers.values()}has(n){const s=n instanceof Marker?n.name:n;return this._markers.has(s)}get(n){return this._markers.get(n)||null}_set(n,s,l=!1,c=!1){const u=n instanceof Marker?n.name:n;if(u.includes(","))throw new CKEditorError("markercollection-incorrect-marker-name",this);const d=this._markers.get(u);if(d){const p=d.getData(),g=d.getRange();let v=!1;return g.isEqual(s)||(d._attachLiveRange(LiveRange.fromRange(s)),v=!0),l!=d.managedUsingOperations&&(d._managedUsingOperations=l,v=!0),typeof c=="boolean"&&c!=d.affectsData&&(d._affectsData=c,v=!0),v&&this.fire(`update:${u}`,d,g,s,p),d}const h=LiveRange.fromRange(s),f=new Marker(u,h,l,c);return this._markers.set(u,f),this.fire(`update:${u}`,f,null,s,{...f.getData(),range:null}),f}_remove(n){const s=n instanceof Marker?n.name:n,l=this._markers.get(s);return l?(this._markers.delete(s),this.fire(`update:${s}`,l,l.getRange(),null,l.getData()),this._destroyMarker(l),!0):!1}_refresh(n){const s=n instanceof Marker?n.name:n,l=this._markers.get(s);if(!l)throw new CKEditorError("markercollection-refresh-marker-not-exists",this);const c=l.getRange();this.fire(`update:${s}`,l,c,c,l.getData())}*getMarkersAtPosition(n){for(const s of this)s.getRange().containsPosition(n)&&(yield s)}*getMarkersIntersectingRange(n){for(const s of this)s.getRange().getIntersection(n)!==null&&(yield s)}destroy(){for(const n of this._markers.values())this._destroyMarker(n);this._markers=null,this.stopListening()}*getMarkersGroup(n){for(const s of this._markers.values())s.name.startsWith(n+":")&&(yield s)}_destroyMarker(n){n.stopListening(),n._detachLiveRange()}}class Marker extends EmitterMixin(TypeCheckable){constructor(n,s,l,c){super();M(this,"name");M(this,"_managedUsingOperations");M(this,"_affectsData");M(this,"_liveRange");this.name=n,this._liveRange=this._attachLiveRange(s),this._managedUsingOperations=l,this._affectsData=c}get managedUsingOperations(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new CKEditorError("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(n){return this._liveRange&&this._detachLiveRange(),n.delegate("change:range").to(this),n.delegate("change:content").to(this),this._liveRange=n,n}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}Marker.prototype.is=function(o){return o==="marker"||o==="model:marker"};class DetachOperation extends Operation{constructor(n,s){super(null);M(this,"sourcePosition");M(this,"howMany");this.sourcePosition=n.clone(),this.howMany=s}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){const n=super.toJSON();return n.sourcePosition=this.sourcePosition.toJSON(),n}_validate(){if(this.sourcePosition.root.document)throw new CKEditorError("detach-operation-on-document-node",this)}_execute(){_remove(Range._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}}class DocumentFragment extends TypeCheckable{constructor(n){super();M(this,"markers",new Map);M(this,"_children",new NodeList);n&&this._insertChild(0,n)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(n){return this._children.getNode(n)}getChildAtOffset(n){return this._children.getNodeAtOffset(n)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(n){return this._children.getNodeIndex(n)}getChildStartOffset(n){return this._children.getNodeStartOffset(n)}getPath(){return[]}getNodeByPath(n){let s=this;for(const l of n)s=s.getChildAtOffset(l);return s}offsetToIndex(n){return this._children.offsetToIndex(n)}toJSON(){const n=[];for(const s of this._children)n.push(s.toJSON());return n}static fromJSON(n){const s=[];for(const l of n)l.name?s.push(Element$2.fromJSON(l)):s.push(Text.fromJSON(l));return new DocumentFragment(s)}_appendChild(n){this._insertChild(this.childCount,n)}_insertChild(n,s){const l=normalize$5(s);for(const c of l)c.parent!==null&&c._remove(),c.parent=this;this._children._insertNodes(n,l)}_removeChildren(n,s=1){const l=this._children._removeNodes(n,s);for(const c of l)c.parent=null;return l}_removeChildrenArray(n){this._children._removeNodesArray(n);for(const s of n)s.parent=null}}DocumentFragment.prototype.is=function(o){return o==="documentFragment"||o==="model:documentFragment"};function normalize$5(o){return typeof o=="string"?[new Text(o)]:(isIterable$1(o)||(o=[o]),Array.from(o).map(a=>typeof a=="string"?new Text(a):a instanceof TextProxy?new Text(a.data,a.getAttributes()):a))}class Writer{constructor(a,n){M(this,"model");M(this,"batch");this.model=a,this.batch=n}createText(a,n){return new Text(a,n)}createElement(a,n){return new Element$2(a,n)}createDocumentFragment(){return new DocumentFragment}cloneElement(a,n=!0){return a._clone(n)}insert(a,n,s=0){if(this._assertWriterUsedCorrectly(),a instanceof Text&&a.data=="")return;const l=Position._createAt(n,s);if(a.parent)if(isSameTree(a.root,l.root)){this.move(Range._createOn(a),l);return}else{if(a.root.document)throw new CKEditorError("model-writer-insert-forbidden-move",this);this.remove(a)}const c=l.root.document?l.root.document.version:null,u=a instanceof DocumentFragment?a._removeChildren(0,a.childCount):a,d=new InsertOperation(l,u,c);if(a instanceof Text&&(d.shouldReceiveAttributes=!0),this.batch.addOperation(d),this.model.applyOperation(d),a instanceof DocumentFragment)for(const[h,f]of a.markers){const p=Position._createAt(f.root,0),v={range:new Range(f.start._getCombined(p,l),f.end._getCombined(p,l)),usingOperation:!0,affectsData:!0};this.model.markers.has(h)?this.updateMarker(h,v):this.addMarker(h,v)}}insertText(a,n,s,l){n instanceof DocumentFragment||n instanceof Element$2||n instanceof Position?this.insert(this.createText(a),n,s):this.insert(this.createText(a,n),s,l)}insertElement(a,n,s,l){n instanceof DocumentFragment||n instanceof Element$2||n instanceof Position?this.insert(this.createElement(a),n,s):this.insert(this.createElement(a,n),s,l)}append(a,n){this.insert(a,n,"end")}appendText(a,n,s){n instanceof DocumentFragment||n instanceof Element$2?this.insert(this.createText(a),n,"end"):this.insert(this.createText(a,n),s,"end")}appendElement(a,n,s){n instanceof DocumentFragment||n instanceof Element$2?this.insert(this.createElement(a),n,"end"):this.insert(this.createElement(a,n),s,"end")}setAttribute(a,n,s){if(this._assertWriterUsedCorrectly(),s instanceof Range){const l=s.getMinimalFlatRanges();for(const c of l)setAttributeOnRange(this,a,n,c)}else setAttributeOnItem(this,a,n,s)}setAttributes(a,n){for(const[s,l]of toMap(a))this.setAttribute(s,l,n)}removeAttribute(a,n){if(this._assertWriterUsedCorrectly(),n instanceof Range){const s=n.getMinimalFlatRanges();for(const l of s)setAttributeOnRange(this,a,null,l)}else setAttributeOnItem(this,a,null,n)}clearAttributes(a){this._assertWriterUsedCorrectly();const n=s=>{for(const l of s.getAttributeKeys())this.removeAttribute(l,s)};if(!(a instanceof Range))n(a);else for(const s of a.getItems())n(s)}move(a,n,s){if(this._assertWriterUsedCorrectly(),!(a instanceof Range))throw new CKEditorError("writer-move-invalid-range",this);if(!a.isFlat)throw new CKEditorError("writer-move-range-not-flat",this);const l=Position._createAt(n,s);if(l.isEqual(a.start))return;if(this._addOperationForAffectedMarkers("move",a),!isSameTree(a.root,l.root))throw new CKEditorError("writer-move-different-document",this);const c=a.root.document?a.root.document.version:null,u=new MoveOperation(a.start,a.end.offset-a.start.offset,l,c);this.batch.addOperation(u),this.model.applyOperation(u)}remove(a){this._assertWriterUsedCorrectly();const s=(a instanceof Range?a:Range._createOn(a)).getMinimalFlatRanges().reverse();for(const l of s)this._addOperationForAffectedMarkers("move",l),applyRemoveOperation(l.start,l.end.offset-l.start.offset,this.batch,this.model)}merge(a){this._assertWriterUsedCorrectly();const n=a.nodeBefore,s=a.nodeAfter;if(this._addOperationForAffectedMarkers("merge",a),!(n instanceof Element$2))throw new CKEditorError("writer-merge-no-element-before",this);if(!(s instanceof Element$2))throw new CKEditorError("writer-merge-no-element-after",this);a.root.document?this._merge(a):this._mergeDetached(a)}createPositionFromPath(a,n,s){return this.model.createPositionFromPath(a,n,s)}createPositionAt(a,n){return this.model.createPositionAt(a,n)}createPositionAfter(a){return this.model.createPositionAfter(a)}createPositionBefore(a){return this.model.createPositionBefore(a)}createRange(a,n){return this.model.createRange(a,n)}createRangeIn(a){return this.model.createRangeIn(a)}createRangeOn(a){return this.model.createRangeOn(a)}createSelection(...a){return this.model.createSelection(...a)}_mergeDetached(a){const n=a.nodeBefore,s=a.nodeAfter;this.move(Range._createIn(s),Position._createAt(n,"end")),this.remove(s)}_merge(a){const n=Position._createAt(a.nodeBefore,"end"),s=Position._createAt(a.nodeAfter,0),l=a.root.document.graveyard,c=new Position(l,[0]),u=a.root.document.version,d=new MergeOperation(s,a.nodeAfter.maxOffset,n,c,u);this.batch.addOperation(d),this.model.applyOperation(d)}rename(a,n){if(this._assertWriterUsedCorrectly(),!(a instanceof Element$2))throw new CKEditorError("writer-rename-not-element-instance",this);const s=a.root.document?a.root.document.version:null,l=new RenameOperation(Position._createBefore(a),a.name,n,s);this.batch.addOperation(l),this.model.applyOperation(l)}split(a,n){this._assertWriterUsedCorrectly();let s=a.parent;if(!s.parent)throw new CKEditorError("writer-split-element-no-parent",this);if(n||(n=s.parent),!a.parent.getAncestors({includeSelf:!0}).includes(n))throw new CKEditorError("writer-split-invalid-limit-element",this);let l,c;do{const u=s.root.document?s.root.document.version:null,d=s.maxOffset-a.offset,h=SplitOperation.getInsertionPosition(a),f=new SplitOperation(a,d,h,null,u);this.batch.addOperation(f),this.model.applyOperation(f),!l&&!c&&(l=s,c=a.parent.nextSibling),a=this.createPositionAfter(a.parent),s=a.parent}while(s!==n);return{position:a,range:new Range(Position._createAt(l,"end"),Position._createAt(c,0))}}wrap(a,n){if(this._assertWriterUsedCorrectly(),!a.isFlat)throw new CKEditorError("writer-wrap-range-not-flat",this);const s=n instanceof Element$2?n:new Element$2(n);if(s.childCount>0)throw new CKEditorError("writer-wrap-element-not-empty",this);if(s.parent!==null)throw new CKEditorError("writer-wrap-element-attached",this);this.insert(s,a.start);const l=new Range(a.start.getShiftedBy(1),a.end.getShiftedBy(1));this.move(l,Position._createAt(s,0))}unwrap(a){if(this._assertWriterUsedCorrectly(),a.parent===null)throw new CKEditorError("writer-unwrap-element-no-parent",this);this.move(Range._createIn(a),this.createPositionAfter(a)),this.remove(a)}addMarker(a,n){if(this._assertWriterUsedCorrectly(),!n||typeof n.usingOperation!="boolean")throw new CKEditorError("writer-addmarker-no-usingoperation",this);const s=n.usingOperation,l=n.range,c=n.affectsData===void 0?!1:n.affectsData;if(this.model.markers.has(a))throw new CKEditorError("writer-addmarker-marker-exists",this);if(!l)throw new CKEditorError("writer-addmarker-no-range",this);return s?(applyMarkerOperation(this,a,null,l,c),this.model.markers.get(a)):this.model.markers._set(a,l,s,c)}updateMarker(a,n){this._assertWriterUsedCorrectly();const s=typeof a=="string"?a:a.name,l=this.model.markers.get(s);if(!l)throw new CKEditorError("writer-updatemarker-marker-not-exists",this);if(!n){logWarning("writer-updatemarker-reconvert-using-editingcontroller",{markerName:s}),this.model.markers._refresh(l);return}const c=typeof n.usingOperation=="boolean",u=typeof n.affectsData=="boolean",d=u?n.affectsData:l.affectsData;if(!c&&!n.range&&!u)throw new CKEditorError("writer-updatemarker-wrong-options",this);const h=l.getRange(),f=n.range?n.range:h;if(c&&n.usingOperation!==l.managedUsingOperations){n.usingOperation?applyMarkerOperation(this,s,null,f,d):(applyMarkerOperation(this,s,h,null,d),this.model.markers._set(s,f,void 0,d));return}l.managedUsingOperations?applyMarkerOperation(this,s,h,f,d):this.model.markers._set(s,f,void 0,d)}removeMarker(a){this._assertWriterUsedCorrectly();const n=typeof a=="string"?a:a.name;if(!this.model.markers.has(n))throw new CKEditorError("writer-removemarker-no-marker",this);const s=this.model.markers.get(n);if(!s.managedUsingOperations){this.model.markers._remove(n);return}const l=s.getRange();applyMarkerOperation(this,n,l,null,s.affectsData)}addRoot(a,n="$root"){this._assertWriterUsedCorrectly();const s=this.model.document.getRoot(a);if(s&&s.isAttached())throw new CKEditorError("writer-addroot-root-exists",this);const l=this.model.document,c=new RootOperation(a,n,!0,l,l.version);return this.batch.addOperation(c),this.model.applyOperation(c),this.model.document.getRoot(a)}detachRoot(a){this._assertWriterUsedCorrectly();const n=typeof a=="string"?this.model.document.getRoot(a):a;if(!n||!n.isAttached())throw new CKEditorError("writer-detachroot-no-root",this);for(const c of this.model.markers)c.getRange().root===n&&this.removeMarker(c);for(const c of n.getAttributeKeys())this.removeAttribute(c,n);this.remove(this.createRangeIn(n));const s=this.model.document,l=new RootOperation(n.rootName,n.name,!1,s,s.version);this.batch.addOperation(l),this.model.applyOperation(l)}setSelection(...a){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...a)}setSelectionFocus(a,n){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(a,n)}setSelectionAttribute(a,n){if(this._assertWriterUsedCorrectly(),typeof a=="string")this._setSelectionAttribute(a,n);else for(const[s,l]of toMap(a))this._setSelectionAttribute(s,l)}removeSelectionAttribute(a){if(this._assertWriterUsedCorrectly(),typeof a=="string")this._removeSelectionAttribute(a);else for(const n of a)this._removeSelectionAttribute(n)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(a){this.model.document.selection._restoreGravity(a)}_setSelectionAttribute(a,n){const s=this.model.document.selection;if(s.isCollapsed&&s.anchor.parent.isEmpty){const l=DocumentSelection._getStoreAttributeKey(a);this.setAttribute(l,n,s.anchor.parent)}s._setAttribute(a,n)}_removeSelectionAttribute(a){const n=this.model.document.selection;if(n.isCollapsed&&n.anchor.parent.isEmpty){const s=DocumentSelection._getStoreAttributeKey(a);this.removeAttribute(s,n.anchor.parent)}n._removeAttribute(a)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new CKEditorError("writer-incorrect-use",this)}_addOperationForAffectedMarkers(a,n){for(const s of this.model.markers){if(!s.managedUsingOperations)continue;const l=s.getRange();let c=!1;if(a==="move"){const u=n;c=u.containsPosition(l.start)||u.start.isEqual(l.start)||u.containsPosition(l.end)||u.end.isEqual(l.end)}else{const u=n,d=u.nodeBefore,h=u.nodeAfter,f=l.start.parent==d&&l.start.isAtEnd,p=l.end.parent==h&&l.end.offset==0,g=l.end.nodeAfter==h,v=l.start.nodeAfter==h;c=f||p||g||v}c&&this.updateMarker(s.name,{range:l})}}}function setAttributeOnRange(o,a,n,s){const l=o.model,c=l.document;let u=s.start,d,h,f;for(const g of s.getWalker({shallow:!0}))f=g.item.getAttribute(a),d&&h!=f&&(h!=n&&p(),u=d),d=g.nextPosition,h=f;d instanceof Position&&d!=u&&h!=n&&p();function p(){const g=new Range(u,d),v=g.root.document?c.version:null,b=new AttributeOperation(g,a,h,n,v);o.batch.addOperation(b),l.applyOperation(b)}}function setAttributeOnItem(o,a,n,s){const l=o.model,c=l.document,u=s.getAttribute(a);let d,h;if(u!=n){if(s.root===s){const p=s.document?c.version:null;h=new RootAttributeOperation(s,a,u,n,p)}else{d=new Range(Position._createBefore(s),o.createPositionAfter(s));const p=d.root.document?c.version:null;h=new AttributeOperation(d,a,u,n,p)}o.batch.addOperation(h),l.applyOperation(h)}}function applyMarkerOperation(o,a,n,s,l){const c=o.model,u=c.document,d=new MarkerOperation(a,n,s,c.markers,!!l,u.version);o.batch.addOperation(d),c.applyOperation(d)}function applyRemoveOperation(o,a,n,s){let l;if(o.root.document){const c=s.document,u=new Position(c.graveyard,[0]);l=new MoveOperation(o,a,u,c.version)}else l=new DetachOperation(o,a);n.addOperation(l),s.applyOperation(l)}function isSameTree(o,a){return o===a||o instanceof RootElement&&a instanceof RootElement}function deleteContent(o,a,n={}){if(a.isCollapsed)return;const s=a.getFirstRange();if(s.root.rootName=="$graveyard")return;const l=o.schema;o.change(c=>{if(!n.doNotResetEntireContent&&shouldEntireContentBeReplacedWithParagraph(l,a)){replaceEntireContentWithParagraph(c,a);return}const u={};if(!n.doNotAutoparagraph){const f=a.getSelectedElement();f&&Object.assign(u,l.getAttributesWithProperty(f,"copyOnReplace",!0))}const[d,h]=getLivePositionsForSelectedBlocks(s);d.isTouching(h)||c.remove(c.createRange(d,h)),n.leaveUnmerged||(mergeBranches(c,d,h),l.removeDisallowedAttributes(d.parent.getChildren(),c)),collapseSelectionAt(c,a,d),!n.doNotAutoparagraph&&shouldAutoparagraph(l,d)&&insertParagraph(c,d,a,u),d.detach(),h.detach()})}function getLivePositionsForSelectedBlocks(o){const a=o.root.document.model,n=o.start;let s=o.end;if(a.hasContent(o,{ignoreMarkers:!0})){const l=getParentBlock(s);if(l&&s.isTouching(a.createPositionAt(l,0))){const c=a.createSelection(o);a.modifySelection(c,{direction:"backward"});const u=c.getLastPosition(),d=a.createRange(u,s);a.hasContent(d,{ignoreMarkers:!0})||(s=u)}}return[LivePosition.fromPosition(n,"toPrevious"),LivePosition.fromPosition(s,"toNext")]}function getParentBlock(o){const a=o.parent,n=a.root.document.model.schema,s=a.getAncestors({parentFirst:!0,includeSelf:!0});for(const l of s){if(n.isLimit(l))return null;if(n.isBlock(l))return l}}function mergeBranches(o,a,n){const s=o.model;if(!checkShouldMerge(o.model.schema,a,n))return;const[l,c]=getAncestorsJustBelowCommonAncestor(a,n);!l||!c||(!s.hasContent(l,{ignoreMarkers:!0})&&s.hasContent(c,{ignoreMarkers:!0})?mergeBranchesRight(o,a,n,l.parent):mergeBranchesLeft(o,a,n,l.parent))}function mergeBranchesLeft(o,a,n,s){const l=a.parent,c=n.parent;if(!(l==s||c==s)){for(a=o.createPositionAfter(l),n=o.createPositionBefore(c),n.isEqual(a)||o.insert(c,a),o.merge(a);n.parent.isEmpty;){const u=n.parent;n=o.createPositionBefore(u),o.remove(u)}checkShouldMerge(o.model.schema,a,n)&&mergeBranchesLeft(o,a,n,s)}}function mergeBranchesRight(o,a,n,s){const l=a.parent,c=n.parent;if(!(l==s||c==s)){for(a=o.createPositionAfter(l),n=o.createPositionBefore(c),n.isEqual(a)||o.insert(l,n);a.parent.isEmpty;){const u=a.parent;a=o.createPositionBefore(u),o.remove(u)}n=o.createPositionBefore(c),mergeRight(o,n),checkShouldMerge(o.model.schema,a,n)&&mergeBranchesRight(o,a,n,s)}}function mergeRight(o,a){const n=a.nodeBefore,s=a.nodeAfter;n.name!=s.name&&o.rename(n,s.name),o.clearAttributes(n),o.setAttributes(Object.fromEntries(s.getAttributes()),n),o.merge(a)}function checkShouldMerge(o,a,n){const s=a.parent,l=n.parent;return s==l||o.isLimit(s)||o.isLimit(l)?!1:isCrossingLimitElement(a,n,o)}function getAncestorsJustBelowCommonAncestor(o,a){const n=o.getAncestors(),s=a.getAncestors();let l=0;for(;n[l]&&n[l]==s[l];)l++;return[n[l],s[l]]}function shouldAutoparagraph(o,a){const n=o.checkChild(a,"$text"),s=o.checkChild(a,"paragraph");return!n&&s}function isCrossingLimitElement(o,a,n){const s=new Range(o,a);for(const l of s.getWalker())if(n.isLimit(l.item))return!1;return!0}function insertParagraph(o,a,n,s={}){const l=o.createElement("paragraph");o.model.schema.setAllowedAttributes(l,s,o),o.insert(l,a),collapseSelectionAt(o,n,o.createPositionAt(l,0))}function replaceEntireContentWithParagraph(o,a){const n=o.model.schema.getLimitElement(a);o.remove(o.createRangeIn(n)),insertParagraph(o,o.createPositionAt(n,0),a)}function shouldEntireContentBeReplacedWithParagraph(o,a){const n=o.getLimitElement(a);if(!a.containsEntireContent(n))return!1;const s=a.getFirstRange();return s.start.parent==s.end.parent?!1:o.checkChild(n,"paragraph")}function collapseSelectionAt(o,a,n){a instanceof DocumentSelection?o.setSelection(n):a.setTo(n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedContent(o,a){return o.change(n=>{const s=n.createDocumentFragment(),l=a.getFirstRange();if(!l||l.isCollapsed)return s;const c=l.start.root,u=l.start.getCommonPath(l.end),d=c.getNodeByPath(u);let h;l.start.parent==l.end.parent?h=l:h=n.createRange(n.createPositionAt(d,l.start.path[u.length]),n.createPositionAt(d,l.end.path[u.length]+1));const f=h.end.offset-h.start.offset;for(const p of h.getItems({shallow:!0}))p.is("$textProxy")?n.appendText(p.data,p.getAttributes(),s):n.append(n.cloneElement(p,!0),s);if(h!=l){const p=l._getTransformedByMove(h.start,n.createPositionAt(s,0),f)[0],g=n.createRange(n.createPositionAt(s,0),p.start),v=n.createRange(p.end,n.createPositionAt(s,"end"));removeRangeContent(v,n),removeRangeContent(g,n)}return s})}function removeRangeContent(o,a){const n=[];Array.from(o.getItems({direction:"backward"})).map(s=>a.createRangeOn(s)).filter(s=>(s.start.isAfter(o.start)||s.start.isEqual(o.start))&&(s.end.isBefore(o.end)||s.end.isEqual(o.end))).forEach(s=>{n.push(s.start.parent),a.remove(s)}),n.forEach(s=>{let l=s;for(;l.parent&&l.isEmpty;){const c=a.createRangeOn(l);l=l.parent,a.remove(c)}})}function insertContent(o,a,n){return o.change(s=>{const l=n||o.document.selection;l.isCollapsed||o.deleteContent(l,{doNotAutoparagraph:!0});const c=new Insertion(o,s,l.anchor),u=[];let d;if(a.is("documentFragment")){if(a.markers.size){const p=[];for(const[g,v]of a.markers){const{start:b,end:w}=v,x=b.isEqual(w);p.push({position:b,name:g,isCollapsed:x},{position:w,name:g,isCollapsed:x})}p.sort(({position:g},{position:v})=>g.isBefore(v)?1:-1);for(const{position:g,name:v,isCollapsed:b}of p){let w=null,x=null;const S=g.parent===a&&g.isAtStart,E=g.parent===a&&g.isAtEnd;!S&&!E?(w=s.createElement("$marker"),s.insert(w,g)):b&&(x=S?"start":"end"),u.push({name:v,element:w,collapsed:x})}}d=a.getChildren()}else d=[a];c.handleNodes(d);let h=c.getSelectionRange();if(a.is("documentFragment")&&u.length){const p=h?LiveRange.fromRange(h):null,g={};for(let v=u.length-1;v>=0;v--){const{name:b,element:w,collapsed:x}=u[v],S=!g[b];if(S&&(g[b]=[]),w){const E=s.createPositionAt(w,"before");g[b].push(E),s.remove(w)}else{const E=c.getAffectedRange();if(!E){x&&g[b].push(c.position);continue}x?g[b].push(E[x]):g[b].push(S?E.start:E.end)}}for(const[v,[b,w]]of Object.entries(g))b&&w&&b.root===w.root&&b.root.document&&!s.model.markers.has(v)&&s.addMarker(v,{usingOperation:!0,affectsData:!0,range:new Range(b,w)});p&&(h=p.toRange(),p.detach())}/* istanbul ignore else -- @preserve */h&&(l instanceof DocumentSelection?s.setSelection(h):l.setTo(h));const f=c.getAffectedRange()||o.createRange(l.anchor);return c.destroy(),f})}class Insertion{constructor(a,n,s){M(this,"model");M(this,"writer");M(this,"position");M(this,"canMergeWith");M(this,"schema");M(this,"_documentFragment");M(this,"_documentFragmentPosition");M(this,"_firstNode",null);M(this,"_lastNode",null);M(this,"_lastAutoParagraph",null);M(this,"_filterAttributesOf",[]);M(this,"_affectedStart",null);M(this,"_affectedEnd",null);M(this,"_nodeToSelect",null);this.model=a,this.writer=n,this.position=s,this.canMergeWith=new Set([this.position.parent]),this.schema=a.schema,this._documentFragment=n.createDocumentFragment(),this._documentFragmentPosition=n.createPositionAt(this._documentFragment,0)}handleNodes(a){for(const n of Array.from(a))this._handleNode(n);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(a){const n=this.writer.createPositionAfter(this._lastNode),s=this.writer.createPositionAfter(a);if(s.isAfter(n)){this._lastNode=a;/* istanbul ignore if -- @preserve */if(this.position.parent!=a||!this.position.isAtEnd)throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=s,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?Range._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new Range(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(a){if(!this._checkAndSplitToAllowedPosition(a)){this.schema.isObject(a)||this._handleDisallowedNode(a);return}this._appendToFragment(a),this._firstNode||(this._firstNode=a),this._lastNode=a}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;const a=LivePosition.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=a.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=a.toPosition(),a.detach()}_handleDisallowedNode(a){a.is("element")&&this.handleNodes(a.getChildren())}_appendToFragment(a){/* istanbul ignore if -- @preserve */if(!this.schema.checkChild(this.position,a))throw new CKEditorError("insertcontent-wrong-position",this,{node:a,position:this.position});this.writer.insert(a,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(a.offsetSize),this.schema.isObject(a)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=a:this._nodeToSelect=null,this._filterAttributesOf.push(a)}_setAffectedBoundaries(a){this._affectedStart||(this._affectedStart=LivePosition.fromPosition(a,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(a))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=LivePosition.fromPosition(a,"toNext"))}_mergeOnLeft(){const a=this._firstNode;if(!(a instanceof Element$2)||!this._canMergeLeft(a))return;const n=LivePosition._createBefore(a);n.stickiness="toNext";const s=LivePosition.fromPosition(this.position,"toNext");this._affectedStart.isEqual(n)&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(n.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=n.nodeBefore,this._lastNode=n.nodeBefore),this.writer.merge(n),n.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(n.nodeBefore,"end","toNext")),this.position=s.toPosition(),s.detach(),this._filterAttributesOf.push(this.position.parent),n.detach()}_mergeOnRight(){const a=this._lastNode;if(!(a instanceof Element$2)||!this._canMergeRight(a))return;const n=LivePosition._createAfter(a);n.stickiness="toNext";/* istanbul ignore if -- @preserve */if(!this.position.isEqual(n))throw new CKEditorError("insertcontent-invalid-insertion-position",this);this.position=Position._createAt(n.nodeBefore,"end");const s=LivePosition.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(n)&&(this._affectedEnd.detach(),this._affectedEnd=LivePosition._createAt(n.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=n.nodeBefore,this._lastNode=n.nodeBefore),this.writer.merge(n),n.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=LivePosition._createAt(n.nodeBefore,0,"toPrevious")),this.position=s.toPosition(),s.detach(),this._filterAttributesOf.push(this.position.parent),n.detach()}_canMergeLeft(a){const n=a.previousSibling;return n instanceof Element$2&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(n,a)}_canMergeRight(a){const n=a.nextSibling;return n instanceof Element$2&&this.canMergeWith.has(n)&&this.model.schema.checkMerge(a,n)}_insertAutoParagraph(){this._insertPartialFragment();const a=this.writer.createElement("paragraph");this.writer.insert(a,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=a,this.position=this.writer.createPositionAt(a,0)}_checkAndSplitToAllowedPosition(a){const n=this._getAllowedIn(this.position.parent,a);if(!n)return!1;for(n!=this.position.parent&&this._insertPartialFragment();n!=this.position.parent;)if(this.position.isAtStart){const s=this.position.parent;this.position=this.writer.createPositionBefore(s),s.isEmpty&&s.parent===n&&this.writer.remove(s)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{const s=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=s,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,a)||this._insertAutoParagraph(),!0}_getAllowedIn(a,n){return this.schema.checkChild(a,n)||this.schema.checkChild(a,"paragraph")&&this.schema.checkChild("paragraph",n)?a:this.schema.isLimit(a)?null:this._getAllowedIn(a.parent,n)}}function insertObject(o,a,n,s={}){if(!o.schema.isObject(a))throw new CKEditorError("insertobject-element-not-an-object",o,{object:a});const l=n||o.document.selection;let c=l;s.findOptimalPosition&&o.schema.isBlock(a)&&(c=o.createSelection(o.schema.findOptimalInsertionRange(l,s.findOptimalPosition)));const u=first(l.getSelectedBlocks()),d={};return u&&Object.assign(d,o.schema.getAttributesWithProperty(u,"copyOnReplace",!0)),o.change(h=>{c.isCollapsed||o.deleteContent(c,{doNotAutoparagraph:!0});let f=a;const p=c.anchor.parent;!o.schema.checkChild(p,a)&&o.schema.checkChild(p,"paragraph")&&o.schema.checkChild("paragraph",a)&&(f=h.createElement("paragraph"),h.insert(a,f)),o.schema.setAllowedAttributes(f,d,h);const g=o.insertContent(f,c);return g.isCollapsed||s.setSelection&&updateSelection(h,a,s.setSelection,d),g})}function updateSelection(o,a,n,s){const l=o.model;if(n=="on"){o.setSelection(a,"on");return}if(n!="after")throw new CKEditorError("insertobject-invalid-place-parameter-value",l);let c=a.nextSibling;if(l.schema.isInline(a)){o.setSelection(a,"after");return}!(c&&l.schema.checkChild(c,"$text"))&&l.schema.checkChild(a.parent,"paragraph")&&(c=o.createElement("paragraph"),l.schema.setAllowedAttributes(c,s,o),l.insertContent(c,o.createPositionAfter(a))),c&&o.setSelection(c,0)}const wordBoundaryCharacters=' ,.?!:;"-()';function modifySelection(o,a,n={}){const s=o.schema,l=n.direction!="backward",c=n.unit?n.unit:"character",u=!!n.treatEmojiAsSingleUnit,d=a.focus,h=new TreeWalker({boundaries:getSearchRange(d,l),singleCharacters:!0,direction:l?"forward":"backward"}),f={walker:h,schema:s,isForward:l,unit:c,treatEmojiAsSingleUnit:u};let p;for(;p=h.next();){if(p.done)return;const g=tryExtendingTo(f,p.value);if(g){a instanceof DocumentSelection?o.change(v=>{v.setSelectionFocus(g)}):a.setFocus(g);return}}}function tryExtendingTo(o,a){const{isForward:n,walker:s,unit:l,schema:c,treatEmojiAsSingleUnit:u}=o,{type:d,item:h,nextPosition:f}=a;if(d=="text")return o.unit==="word"?getCorrectWordBreakPosition(s,n):getCorrectPosition(s,l,u);if(d==(n?"elementStart":"elementEnd")){if(c.isSelectable(h))return Position._createAt(h,n?"after":"before");if(c.checkChild(f,"$text"))return f}else{if(c.isLimit(h)){s.skip(()=>!0);return}if(c.checkChild(f,"$text"))return f}}function getCorrectPosition(o,a,n){const s=o.position.textNode;if(s){const l=s.data;let c=o.position.offset-s.startOffset;for(;isInsideSurrogatePair(l,c)||a=="character"&&isInsideCombinedSymbol(l,c)||n&&isInsideEmojiSequence(l,c);)o.next(),c=o.position.offset-s.startOffset}return o.position}function getCorrectWordBreakPosition(o,a){let n=o.position.textNode;for(n||(n=a?o.position.nodeAfter:o.position.nodeBefore);n&&n.is("$text");){const s=o.position.offset-n.startOffset;if(isAtNodeBoundary(n,s,a))n=a?o.position.nodeAfter:o.position.nodeBefore;else{if(isAtWordBoundary(n.data,s,a))break;o.next()}}return o.position}function getSearchRange(o,a){const n=o.root,s=Position._createAt(n,a?"end":0);return a?new Range(o,s):new Range(s,o)}function isAtWordBoundary(o,a,n){const s=a+(n?0:-1);return wordBoundaryCharacters.includes(o.charAt(s))}function isAtNodeBoundary(o,a,n){return a===(n?o.offsetSize:0)}let Model$2=class extends ObservableMixin(){constructor(){super();M(this,"markers");M(this,"document");M(this,"schema");M(this,"_pendingChanges");M(this,"_currentWriter");this.markers=new MarkerCollection,this.document=new Document(this),this.schema=new Schema,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(n=>this.decorate(n)),this.on("applyOperation",(n,s)=>{s[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),injectSelectionPostFixer(this),this.document.registerPostFixer(autoParagraphEmptyRoots),this.on("insertContent",(n,[s,l])=>{n.return=insertContent(this,s,l)}),this.on("insertObject",(n,[s,l,c])=>{n.return=insertObject(this,s,l,c)}),this.on("canEditAt",n=>{const s=!this.document.isReadOnly;n.return=s,s||n.stop()})}change(n){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Batch,callback:n}),this._runPendingChanges()[0]):n(this._currentWriter)}catch(s){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(s,this)}}enqueueChange(n,s){try{n?typeof n=="function"?(s=n,n=new Batch):n instanceof Batch||(n=new Batch(n)):n=new Batch,this._pendingChanges.push({batch:n,callback:s}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(l){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(l,this)}}applyOperation(n){n._execute()}insertContent(n,s,l,...c){const u=normalizeSelectable(s,l);return this.fire("insertContent",[n,u,l,...c])}insertObject(n,s,l,c,...u){const d=normalizeSelectable(s,l);return this.fire("insertObject",[n,d,c,c,...u])}deleteContent(n,s){deleteContent(this,n,s)}modifySelection(n,s){modifySelection(this,n,s)}getSelectedContent(n){return getSelectedContent(this,n)}hasContent(n,s={}){const l=n instanceof Range?n:Range._createIn(n);if(l.isCollapsed)return!1;const{ignoreWhitespaces:c=!1,ignoreMarkers:u=!1}=s;if(!u){for(const d of this.markers.getMarkersIntersectingRange(l))if(d.affectsData)return!0}for(const d of l.getItems())if(this.schema.isContent(d))if(d.is("$textProxy"))if(c){if(d.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(n){const s=normalizeSelectable(n);return this.fire("canEditAt",[s])}createPositionFromPath(n,s,l){return new Position(n,s,l)}createPositionAt(n,s){return Position._createAt(n,s)}createPositionAfter(n){return Position._createAfter(n)}createPositionBefore(n){return Position._createBefore(n)}createRange(n,s){return new Range(n,s)}createRangeIn(n){return Range._createIn(n)}createRangeOn(n){return Range._createOn(n)}createSelection(...n){return new Selection(...n)}createBatch(n){return new Batch(n)}createOperationFromJSON(n){return OperationFactory.fromJSON(n,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){const n=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){const s=this._pendingChanges[0].batch;this._currentWriter=new Writer(this,s);const l=this._pendingChanges[0].callback(this._currentWriter);n.push(l),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return n}};function normalizeSelectable(o,a){if(o)return o instanceof Selection||o instanceof DocumentSelection?o:o instanceof Node$1$1?a||a===0?new Selection(o,a):o.is("rootElement")?new Selection(o,"in"):new Selection(o,"on"):new Selection(o)}class ClickObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType","click")}onDomEvent(n){this.fire(n.type,n)}}class MouseObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType",["mousedown","mouseup","mouseover","mouseout"])}onDomEvent(n){this.fire(n.type,n)}}class TouchObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType",["touchstart","touchend","touchmove"])}onDomEvent(n){this.fire(n.type,n)}}class UpcastWriter{constructor(a){M(this,"document");this.document=a}createDocumentFragment(a){return new DocumentFragment$1(this.document,a)}createElement(a,n,s){return new Element$1(this.document,a,n,s)}createText(a){return new Text$1(this.document,a)}clone(a,n=!1){return a._clone(n)}appendChild(a,n){return n._appendChild(a)}insertChild(a,n,s){return s._insertChild(a,n)}removeChildren(a,n,s){return s._removeChildren(a,n)}remove(a){const n=a.parent;return n?this.removeChildren(n.getChildIndex(a),1,n):[]}replace(a,n){const s=a.parent;if(s){const l=s.getChildIndex(a);return this.removeChildren(l,1,s),this.insertChild(l,n,s),!0}return!1}unwrapElement(a){const n=a.parent;if(n){const s=n.getChildIndex(a);this.remove(a),this.insertChild(s,a.getChildren(),n)}}rename(a,n){const s=new Element$1(this.document,a,n.getAttributes(),n.getChildren());return this.replace(n,s)?s:null}setAttribute(a,n,s){s._setAttribute(a,n)}removeAttribute(a,n){n._removeAttribute(a)}addClass(a,n){n._addClass(a)}removeClass(a,n){n._removeClass(a)}setStyle(a,n,s){isPlainObject$1(a)&&s===void 0?n._setStyle(a):s._setStyle(a,n)}removeStyle(a,n){n._removeStyle(a)}setCustomProperty(a,n,s){s._setCustomProperty(a,n)}removeCustomProperty(a,n){return n._removeCustomProperty(a)}createPositionAt(a,n){return Position$1._createAt(a,n)}createPositionAfter(a){return Position$1._createAfter(a)}createPositionBefore(a){return Position$1._createBefore(a)}createRange(a,n){return new Range$1(a,n)}createRangeOn(a){return Range$1._createOn(a)}createRangeIn(a){return Range$1._createIn(a)}createSelection(...a){return new Selection$1(...a)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const HEX_COLOR_REGEXP=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i,RGB_COLOR_REGEXP=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i,RGBA_COLOR_REGEXP=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,HSL_COLOR_REGEXP=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i,HSLA_COLOR_REGEXP=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i,CSS_SHORTHAND_VALUE_REGEXP=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi,COLOR_NAMES=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);function isColor(o){return o.startsWith("#")?HEX_COLOR_REGEXP.test(o):o.startsWith("rgb")?RGB_COLOR_REGEXP.test(o)||RGBA_COLOR_REGEXP.test(o):o.startsWith("hsl")?HSL_COLOR_REGEXP.test(o)||HSLA_COLOR_REGEXP.test(o):COLOR_NAMES.has(o.toLowerCase())}const lineStyleValues=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function isLineStyle(o){return lineStyleValues.includes(o)}const lengthRegExp=/^([+-]?[0-9]*([.][0-9]+)?(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function isLength(o){return lengthRegExp.test(o)}const PERCENTAGE_VALUE_REGEXP=/^[+-]?[0-9]*([.][0-9]+)?%$/;function isPercentage(o){return PERCENTAGE_VALUE_REGEXP.test(o)}const repeatValues=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function isRepeat(o){return repeatValues.includes(o)}const positionValues=["center","top","bottom","left","right"];function isPosition(o){return positionValues.includes(o)}const attachmentValues=["fixed","scroll","local"];function isAttachment(o){return attachmentValues.includes(o)}const urlRegExp=/^url\(/;function isURL(o){return urlRegExp.test(o)}function getBoxSidesValues(o=""){if(o==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};const a=getShorthandValues(o),n=a[0],s=a[2]||n,l=a[1]||n,c=a[3]||l;return{top:n,bottom:s,right:l,left:c}}function getBoxSidesValueReducer(o){return a=>{const{top:n,right:s,bottom:l,left:c}=a,u=[];return[n,s,c,l].every(d=>!!d)?u.push([o,getBoxSidesShorthandValue(a)]):(n&&u.push([o+"-top",n]),s&&u.push([o+"-right",s]),l&&u.push([o+"-bottom",l]),c&&u.push([o+"-left",c])),u}}function getBoxSidesShorthandValue({top:o,right:a,bottom:n,left:s}){const l=[];return s!==a?l.push(o,a,n,s):n!==o?l.push(o,a,n):a!==o?l.push(o,a):l.push(o),l.join(" ")}function getPositionShorthandNormalizer(o){return a=>({path:o,value:getBoxSidesValues(a)})}function getShorthandValues(o){const a=o.trim().slice(0,1500).matchAll(CSS_SHORTHAND_VALUE_REGEXP);return Array.from(a).map(n=>n[0])}function addBackgroundRules(o){o.setNormalizer("background",getBackgroundNormalizer()),o.setNormalizer("background-color",getBackgroundColorNormalizer()),o.setReducer("background",getBackgroundReducer()),o.setStyleRelation("background",["background-color"])}function getBackgroundNormalizer(){return o=>{const a={},n=getShorthandValues(o);for(const s of n)isRepeat(s)?(a.repeat=a.repeat||[],a.repeat.push(s)):isPosition(s)?(a.position=a.position||[],a.position.push(s)):isAttachment(s)?a.attachment=s:isColor(s)?a.color=s:isURL(s)&&(a.image=s);return{path:"background",value:a}}}function getBackgroundColorNormalizer(){return o=>({path:"background.color",value:o})}function getBackgroundReducer(){return o=>{const a=[];return a.push(["background-color",o.color]),a}}function addBorderRules(o){o.setNormalizer("border",getBorderNormalizer()),o.setNormalizer("border-top",getBorderPositionNormalizer("top")),o.setNormalizer("border-right",getBorderPositionNormalizer("right")),o.setNormalizer("border-bottom",getBorderPositionNormalizer("bottom")),o.setNormalizer("border-left",getBorderPositionNormalizer("left")),o.setNormalizer("border-color",getBorderPropertyNormalizer("color")),o.setNormalizer("border-width",getBorderPropertyNormalizer("width")),o.setNormalizer("border-style",getBorderPropertyNormalizer("style")),o.setNormalizer("border-top-color",getBorderPropertyPositionNormalizer("color","top")),o.setNormalizer("border-top-style",getBorderPropertyPositionNormalizer("style","top")),o.setNormalizer("border-top-width",getBorderPropertyPositionNormalizer("width","top")),o.setNormalizer("border-right-color",getBorderPropertyPositionNormalizer("color","right")),o.setNormalizer("border-right-style",getBorderPropertyPositionNormalizer("style","right")),o.setNormalizer("border-right-width",getBorderPropertyPositionNormalizer("width","right")),o.setNormalizer("border-bottom-color",getBorderPropertyPositionNormalizer("color","bottom")),o.setNormalizer("border-bottom-style",getBorderPropertyPositionNormalizer("style","bottom")),o.setNormalizer("border-bottom-width",getBorderPropertyPositionNormalizer("width","bottom")),o.setNormalizer("border-left-color",getBorderPropertyPositionNormalizer("color","left")),o.setNormalizer("border-left-style",getBorderPropertyPositionNormalizer("style","left")),o.setNormalizer("border-left-width",getBorderPropertyPositionNormalizer("width","left")),o.setExtractor("border-top",getBorderPositionExtractor("top")),o.setExtractor("border-right",getBorderPositionExtractor("right")),o.setExtractor("border-bottom",getBorderPositionExtractor("bottom")),o.setExtractor("border-left",getBorderPositionExtractor("left")),o.setExtractor("border-top-color","border.color.top"),o.setExtractor("border-right-color","border.color.right"),o.setExtractor("border-bottom-color","border.color.bottom"),o.setExtractor("border-left-color","border.color.left"),o.setExtractor("border-top-width","border.width.top"),o.setExtractor("border-right-width","border.width.right"),o.setExtractor("border-bottom-width","border.width.bottom"),o.setExtractor("border-left-width","border.width.left"),o.setExtractor("border-top-style","border.style.top"),o.setExtractor("border-right-style","border.style.right"),o.setExtractor("border-bottom-style","border.style.bottom"),o.setExtractor("border-left-style","border.style.left"),o.setReducer("border-color",getBoxSidesValueReducer("border-color")),o.setReducer("border-style",getBoxSidesValueReducer("border-style")),o.setReducer("border-width",getBoxSidesValueReducer("border-width")),o.setReducer("border-top",getBorderPositionReducer("top")),o.setReducer("border-right",getBorderPositionReducer("right")),o.setReducer("border-bottom",getBorderPositionReducer("bottom")),o.setReducer("border-left",getBorderPositionReducer("left")),o.setReducer("border",getBorderReducer()),o.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]),o.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]),o.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]),o.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]),o.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]),o.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]),o.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]),o.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"])}function getBorderNormalizer(){return o=>{const{color:a,style:n,width:s}=normalizeBorderShorthand(o);return{path:"border",value:{color:getBoxSidesValues(a),style:getBoxSidesValues(n),width:getBoxSidesValues(s)}}}}function getBorderPositionNormalizer(o){return a=>{const{color:n,style:s,width:l}=normalizeBorderShorthand(a),c={};return n!==void 0&&(c.color={[o]:n}),s!==void 0&&(c.style={[o]:s}),l!==void 0&&(c.width={[o]:l}),{path:"border",value:c}}}function getBorderPropertyNormalizer(o){return a=>({path:"border",value:toBorderPropertyShorthand(a,o)})}function toBorderPropertyShorthand(o,a){return{[a]:getBoxSidesValues(o)}}function getBorderPropertyPositionNormalizer(o,a){return n=>({path:"border",value:{[o]:{[a]:n}}})}function getBorderPositionExtractor(o){return(a,n)=>{if(n.border)return extractBorderPosition(n.border,o)}}function extractBorderPosition(o,a){const n={};return o.width&&o.width[a]&&(n.width=o.width[a]),o.style&&o.style[a]&&(n.style=o.style[a]),o.color&&o.color[a]&&(n.color=o.color[a]),n}function normalizeBorderShorthand(o){const a={},n=getShorthandValues(o);for(const s of n)isLength(s)||/thin|medium|thick/.test(s)?a.width=s:isLineStyle(s)?a.style=s:a.color=s;return a}function getBorderReducer(){return a=>{const n=extractBorderPosition(a,"top"),s=extractBorderPosition(a,"right"),l=extractBorderPosition(a,"bottom"),c=extractBorderPosition(a,"left"),u=[n,s,l,c],d={width:o(u,"width"),style:o(u,"style"),color:o(u,"color")},h=reduceBorderPosition(d,"all");return h.length?h:[...Object.entries(d).reduce((p,[g,v])=>(v&&(p.push([`border-${g}`,v]),u.forEach(b=>delete b[g])),p),[]),...reduceBorderPosition(n,"top"),...reduceBorderPosition(s,"right"),...reduceBorderPosition(l,"bottom"),...reduceBorderPosition(c,"left")]};function o(a,n){return a.map(s=>s[n]).reduce((s,l)=>s==l?s:null)}}function getBorderPositionReducer(o){return a=>reduceBorderPosition(a,o)}function reduceBorderPosition(o,a){const n=[];if(o&&o.width&&n.push("width"),o&&o.style&&n.push("style"),o&&o.color&&n.push("color"),n.length==3){const s=n.map(l=>o[l]).join(" ");return[a=="all"?["border",s]:[`border-${a}`,s]]}return a=="all"?[]:n.map(s=>[`border-${a}-${s}`,o[s]])}function addMarginRules(o){o.setNormalizer("margin",getPositionShorthandNormalizer("margin")),o.setNormalizer("margin-top",a=>({path:"margin.top",value:a})),o.setNormalizer("margin-right",a=>({path:"margin.right",value:a})),o.setNormalizer("margin-bottom",a=>({path:"margin.bottom",value:a})),o.setNormalizer("margin-left",a=>({path:"margin.left",value:a})),o.setReducer("margin",getBoxSidesValueReducer("margin")),o.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}function addPaddingRules(o){o.setNormalizer("padding",getPositionShorthandNormalizer("padding")),o.setNormalizer("padding-top",a=>({path:"padding.top",value:a})),o.setNormalizer("padding-right",a=>({path:"padding.right",value:a})),o.setNormalizer("padding-bottom",a=>({path:"padding.bottom",value:a})),o.setNormalizer("padding-left",a=>({path:"padding.left",value:a})),o.setReducer("padding",getBoxSidesValueReducer("padding")),o.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Watchdog{constructor(a){M(this,"crashes",[]);M(this,"state","initializing");M(this,"_crashNumberLimit");M(this,"_now",Date.now);M(this,"_minimumNonErrorTimePeriod");M(this,"_boundErrorHandler");M(this,"_listeners");if(this.crashes=[],this._crashNumberLimit=typeof a.crashNumberLimit=="number"?a.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof a.minimumNonErrorTimePeriod=="number"?a.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=n=>{const s="error"in n?n.error:n.reason;s instanceof Error&&this._handleError(s,n)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(a,n){this._listeners[a]||(this._listeners[a]=[]),this._listeners[a].push(n)}off(a,n){this._listeners[a]=this._listeners[a].filter(s=>s!==n)}_fire(a,...n){const s=this._listeners[a]||[];for(const l of s)l.apply(this,[null,...n])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(a,n){if(this._shouldReactToError(a)){this.crashes.push({message:a.message,stack:a.stack,filename:n instanceof ErrorEvent?n.filename:void 0,lineno:n instanceof ErrorEvent?n.lineno:void 0,colno:n instanceof ErrorEvent?n.colno:void 0,date:this._now()});const s=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:a,causesRestart:s}),s?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(a){return a.is&&a.is("CKEditorError")&&a.context!==void 0&&a.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(a)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;const a=this.crashes[this.crashes.length-1].date,n=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(a-n)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSubNodes(o,a=new Set){const n=[o],s=new Set;let l=0;for(;n.length>l;){const c=n[l++];if(!(s.has(c)||!shouldNodeBeIncluded(c)||a.has(c)))if(s.add(c),Symbol.iterator in c)try{for(const u of c)n.push(u)}catch{}else for(const u in c)u!=="defaultValue"&&n.push(c[u])}return s}function shouldNodeBeIncluded(o){const a=Object.prototype.toString.call(o),n=typeof o;return!(n==="number"||n==="boolean"||n==="string"||n==="symbol"||n==="function"||a==="[object Date]"||a==="[object RegExp]"||a==="[object Module]"||o===void 0||o===null||o._watchdogExcluded||o instanceof EventTarget||o instanceof Event)}function areConnectedThroughProperties(o,a,n=new Set){if(o===a&&isObject$5(o))return!0;const s=getSubNodes(o,n),l=getSubNodes(a,n);for(const c of s)if(l.has(c))return!0;return!1}function isObject$5(o){return typeof o=="object"&&o!==null}class EditorWatchdog extends Watchdog{constructor(n,s={}){super(s);M(this,"_editor",null);M(this,"_lifecyclePromise",null);M(this,"_throttledSave");M(this,"_data");M(this,"_lastDocumentVersion");M(this,"_elementOrData");M(this,"_initUsingData",!0);M(this,"_editables",{});M(this,"_config");M(this,"_excludedProps");this._throttledSave=throttle$2(this._save.bind(this),typeof s.saveInterval=="number"?s.saveInterval:5e3),n&&(this._creator=(l,c)=>n.create(l,c)),this._destructor=l=>l.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(n){this._creator=n}setDestructor(n){this._destructor=n}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(n=>{console.error("An error happened during the editor destroying.",n)}).then(()=>{const n={},s=[],l=this._config.rootsAttributes||{},c={};for(const[d,h]of Object.entries(this._data.roots))h.isLoaded?(n[d]="",c[d]=l[d]||{}):s.push(d);const u={...this._config,extraPlugins:this._config.extraPlugins||[],lazyRoots:s,rootsAttributes:c,_watchdogInitialData:this._data};return delete u.initialData,u.extraPlugins.push(EditorWatchdogInitPlugin),this._initUsingData?this.create(n,u,u.context):isElement$2(this._elementOrData)?this.create(this._elementOrData,u,u.context):this.create(this._editables,u,u.context)}).then(()=>{this._fire("restart")})}create(n=this._elementOrData,s=this._config,l){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=n,this._initUsingData=typeof n=="string"||Object.keys(n).length>0&&typeof Object.values(n)[0]=="string",this._config=this._cloneEditorConfiguration(s)||{},this._config.context=l,this._creator(n,this._config))).then(c=>{this._editor=c,c.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=c.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();const n=this._editor;return this._editor=null,n.model.document.off("change:data",this._throttledSave),this._destructor(n)})}_save(){const n=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=n}catch(s){console.error(s,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(n){this._excludedProps=n}_getData(){const n=this._editor,s=n.model.document.roots.filter(h=>h.isAttached()&&h.rootName!="$graveyard"),{plugins:l}=n,c=l.has("CommentsRepository")&&l.get("CommentsRepository"),u=l.has("TrackChanges")&&l.get("TrackChanges"),d={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};s.forEach(h=>{d.roots[h.rootName]={content:JSON.stringify(Array.from(h.getChildren())),attributes:JSON.stringify(Array.from(h.getAttributes())),isLoaded:h._isLoaded}});for(const h of n.model.markers)h._affectsData&&(d.markers[h.name]={rangeJSON:h.getRange().toJSON(),usingOperation:h._managedUsingOperations,affectsData:h._affectsData});return c&&(d.commentThreads=JSON.stringify(c.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),u&&(d.suggestions=JSON.stringify(u.getSuggestions({toJSON:!0,skipNotAttached:!0}))),d}_getEditables(){const n={};for(const s of this.editor.model.document.getRootNames()){const l=this.editor.ui.getEditableElement(s);l&&(n[s]=l)}return n}_isErrorComingFromThisItem(n){return areConnectedThroughProperties(this._editor,n.context,this._excludedProps)}_cloneEditorConfiguration(n){return cloneDeepWith(n,(s,l)=>{if(isElement$2(s)||l==="context")return s})}}class EditorWatchdogInitPlugin{constructor(a){M(this,"editor");M(this,"_data");this.editor=a,this._data=a.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",a=>{a.stop(),this.editor.model.enqueueChange({isUndoable:!1},n=>{this._restoreCollaborationData(),this._restoreEditorData(n)}),this.editor.data.fire("ready")},{priority:999})}_createNode(a,n){if("name"in n){const s=a.createElement(n.name,n.attributes);if(n.children)for(const l of n.children)s._appendChild(this._createNode(a,l));return s}else return a.createText(n.data,n.attributes)}_restoreEditorData(a){const n=this.editor;Object.entries(this._data.roots).forEach(([s,{content:l,attributes:c}])=>{const u=JSON.parse(l),d=JSON.parse(c),h=n.model.document.getRoot(s);for(const[f,p]of d)a.setAttribute(f,p,h);for(const f of u){const p=this._createNode(a,f);a.insert(p,h,"end")}}),Object.entries(this._data.markers).forEach(([s,l])=>{const{document:c}=n.model,{rangeJSON:{start:u,end:d},...h}=l,f=c.getRoot(u.root),p=a.createPositionFromPath(f,u.path,u.stickiness),g=a.createPositionFromPath(f,d.path,d.stickiness),v=a.createRange(p,g);a.addMarker(s,{range:v,...h})})}_restoreCollaborationData(){const a=JSON.parse(this._data.commentThreads),n=JSON.parse(this._data.suggestions);a.forEach(s=>{const l=this.editor.config.get("collaboration.channelId"),c=this.editor.plugins.get("CommentsRepository");c.hasCommentThread(s.threadId)&&c.getCommentThread(s.threadId).remove(),c.addCommentThread({channelId:l,...s})}),n.forEach(s=>{const l=this.editor.plugins.get("TrackChangesEditing");if(l.hasSuggestion(s.id)){const c=l.getSuggestion(s.id);c.attributes=s.attributes}else l.addSuggestionData(s)})}}const mainQueueId=Symbol("MainQueueId");class ContextWatchdog extends Watchdog{constructor(n,s={}){super(s);M(this,"_watchdogs",new Map);M(this,"_watchdogConfig");M(this,"_context",null);M(this,"_contextProps",new Set);M(this,"_actionQueues",new ActionQueues);M(this,"_contextConfig");M(this,"_item");this._watchdogConfig=s,this._creator=l=>n.create(l),this._destructor=l=>l.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(n){this._creator=n}setDestructor(n){this._destructor=n}get context(){return this._context}create(n={}){return this._actionQueues.enqueue(mainQueueId,()=>(this._contextConfig=n,this._create()))}getItem(n){return this._getWatchdog(n)._item}getItemState(n){return this._getWatchdog(n).state}add(n){const s=toArray$1(n);return Promise.all(s.map(l=>this._actionQueues.enqueue(l.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let c;if(this._watchdogs.has(l.id))throw new Error(`Item with the given id is already added: '${l.id}'.`);if(l.type==="editor")return c=new EditorWatchdog(null,this._watchdogConfig),c.setCreator(l.creator),c._setExcludedProperties(this._contextProps),l.destructor&&c.setDestructor(l.destructor),this._watchdogs.set(l.id,c),c.on("error",(u,{error:d,causesRestart:h})=>{this._fire("itemError",{itemId:l.id,error:d}),h&&this._actionQueues.enqueue(l.id,()=>new Promise(f=>{const p=()=>{c.off("restart",p),this._fire("itemRestart",{itemId:l.id}),f()};c.on("restart",p)}))}),c.create(l.sourceElementOrData,l.config,this._context);throw new Error(`Not supported item type: '${l.type}'.`)})))}remove(n){const s=toArray$1(n);return Promise.all(s.map(l=>this._actionQueues.enqueue(l,()=>{const c=this._getWatchdog(l);return this._watchdogs.delete(l),c.destroy()})))}destroy(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(mainQueueId,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(n=>{console.error("An error happened during destroying the context or items.",n)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(n=>(this._context=n,this._contextProps=getSubNodes(this._context),Promise.all(Array.from(this._watchdogs.values()).map(s=>(s._setExcludedProperties(this._contextProps),s.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();const n=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(s=>s.destroy())).then(()=>this._destructor(n))})}_getWatchdog(n){const s=this._watchdogs.get(n);if(!s)throw new Error(`Item with the given id was not registered: ${n}.`);return s}_isErrorComingFromThisItem(n){for(const s of this._watchdogs.values())if(s._isErrorComingFromThisItem(n))return!1;return areConnectedThroughProperties(this._context,n.context)}}class ActionQueues{constructor(){M(this,"_onEmptyCallbacks",[]);M(this,"_queues",new Map);M(this,"_activeActions",0)}onEmpty(a){this._onEmptyCallbacks.push(a)}enqueue(a,n){const s=a===mainQueueId;this._activeActions++,this._queues.get(a)||this._queues.set(a,Promise.resolve());const c=(s?Promise.all(this._queues.values()):Promise.all([this._queues.get(mainQueueId),this._queues.get(a)])).then(n),u=c.catch(()=>{});return this._queues.set(a,u),c.finally(()=>{this._activeActions--,this._queues.get(a)===u&&this._activeActions===0&&this._onEmptyCallbacks.forEach(d=>d())})}}function toArray$1(o){return Array.isArray(o)?o:[o]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Plugin extends ObservableMixin(){constructor(n){super();M(this,"editor");M(this,"_disableStack",new Set);this.editor=n,this.set("isEnabled",!0)}forceDisabled(n){this._disableStack.add(n),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable$1,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(n){this._disableStack.delete(n),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable$1),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}function forceDisable$1(o){o.return=!1,o.stop()}class Command extends ObservableMixin(){constructor(n){super();M(this,"editor");M(this,"_isEnabledBasedOnSelection");M(this,"_affectsData");M(this,"_disableStack");this.editor=n,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(n,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",s=>{if(!this.affectsData)return;const l=n.model.document.selection,u=!(l.getFirstPosition().root.rootName=="$graveyard")&&n.model.canEditAt(l);(n.isReadOnly||this._isEnabledBasedOnSelection&&!u)&&(s.return=!1,s.stop())},{priority:"highest"}),this.on("execute",s=>{this.isEnabled||s.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(n){this._affectsData=n}refresh(){this.isEnabled=!0}forceDisabled(n){this._disableStack.add(n),this._disableStack.size==1&&(this.on("set:isEnabled",forceDisable,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(n){this._disableStack.delete(n),this._disableStack.size==0&&(this.off("set:isEnabled",forceDisable),this.refresh())}execute(...n){}destroy(){this.stopListening()}}function forceDisable(o){o.return=!1,o.stop()}class MultiCommand extends Command{constructor(){super(...arguments);M(this,"_childCommandsDefinitions",[])}refresh(){}execute(...n){const s=this._getFirstEnabledCommand();return!!s&&s.execute(n)}registerChildCommand(n,s={}){insertToPriorityArray(this._childCommandsDefinitions,{command:n,priority:s.priority||"normal"}),n.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){const n=this._childCommandsDefinitions.find(({command:s})=>s.isEnabled);return n&&n.command}}class PluginCollection extends EmitterMixin(){constructor(n,s=[],l=[]){super();M(this,"_context");M(this,"_plugins",new Map);M(this,"_availablePlugins");M(this,"_contextPlugins");this._context=n,this._availablePlugins=new Map;for(const c of s)c.pluginName&&this._availablePlugins.set(c.pluginName,c);this._contextPlugins=new Map;for(const[c,u]of l)this._contextPlugins.set(c,u),this._contextPlugins.set(u,c),c.pluginName&&this._availablePlugins.set(c.pluginName,c)}*[Symbol.iterator](){for(const n of this._plugins)typeof n[0]=="function"&&(yield n)}get(n){const s=this._plugins.get(n);if(!s){let l=n;throw typeof n=="function"&&(l=n.pluginName||n.name),new CKEditorError("plugincollection-plugin-not-loaded",this._context,{plugin:l})}return s}has(n){return this._plugins.has(n)}init(n,s=[],l=[]){const c=this,u=this._context;w(n),S(n);const d=n.filter(D=>!v(D,s)),h=[...x(d)];j(h,l);const f=A(h);return R(f,"init").then(()=>R(f,"afterInit")).then(()=>f);function p(D){return typeof D=="function"}function g(D){return p(D)&&!!D.isContextPlugin}function v(D,O){return O.some(H=>H===D||b(D)===H||b(H)===D)}function b(D){return p(D)?D.pluginName||D.name:D}function w(D,O=new Set){D.forEach(H=>{p(H)&&(O.has(H)||(O.add(H),H.pluginName&&!c._availablePlugins.has(H.pluginName)&&c._availablePlugins.set(H.pluginName,H),H.requires&&w(H.requires,O)))})}function x(D,O=new Set){return D.map(H=>p(H)?H:c._availablePlugins.get(H)).reduce((H,q)=>O.has(q)?H:(O.add(q),q.requires&&(S(q.requires,q),x(q.requires,O).forEach(Y=>H.add(Y))),H.add(q)),new Set)}function S(D,O=null){D.map(H=>p(H)?H:c._availablePlugins.get(H)||H).forEach(H=>{E(H,O),T(H,O),C(H,O)})}function E(D,O){if(!p(D))throw O?new CKEditorError("plugincollection-soft-required",u,{missingPlugin:D,requiredBy:b(O)}):new CKEditorError("plugincollection-plugin-not-found",u,{plugin:D})}function T(D,O){if(g(O)&&!g(D))throw new CKEditorError("plugincollection-context-required",u,{plugin:b(D),requiredBy:b(O)})}function C(D,O){if(O&&v(D,s))throw new CKEditorError("plugincollection-required",u,{plugin:b(D),requiredBy:b(O)})}function A(D){return D.map(O=>{let H=c._contextPlugins.get(O);return H=H||new O(u),c._add(O,H),H})}function R(D,O){return D.reduce((H,q)=>!q[O]||c._contextPlugins.has(q)?H:H.then(q[O].bind(q)),Promise.resolve())}function j(D,O){for(const H of O){if(typeof H!="function")throw new CKEditorError("plugincollection-replace-plugin-invalid-type",null,{pluginItem:H});const q=H.pluginName;if(!q)throw new CKEditorError("plugincollection-replace-plugin-missing-name",null,{pluginItem:H});if(H.requires&&H.requires.length)throw new CKEditorError("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:q});const Y=c._availablePlugins.get(q);if(!Y)throw new CKEditorError("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:q});const te=D.indexOf(Y);if(te===-1){if(c._contextPlugins.has(Y))return;throw new CKEditorError("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:q})}if(Y.requires&&Y.requires.length)throw new CKEditorError("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:q});D.splice(te,1,H),c._availablePlugins.set(q,H)}}}destroy(){const n=[];for(const[,s]of this)typeof s.destroy=="function"&&!this._contextPlugins.has(s)&&n.push(s.destroy());return Promise.all(n)}_add(n,s){this._plugins.set(n,s);const l=n.pluginName;if(l){if(this._plugins.has(l))throw new CKEditorError("plugincollection-plugin-name-conflict",null,{pluginName:l,plugin1:this._plugins.get(l).constructor,plugin2:n});this._plugins.set(l,s)}}}class Context{constructor(a){M(this,"config");M(this,"plugins");M(this,"locale");M(this,"t");M(this,"editors");M(this,"_contextOwner",null);const{translations:n,...s}=a||{};this.config=new Config(s,this.constructor.defaultConfig);const l=this.constructor.builtinPlugins;this.config.define("plugins",l),this.plugins=new PluginCollection(this,l);const c=this.config.get("language")||{};this.locale=new Locale({uiLanguage:typeof c=="string"?c:c.ui,contentLanguage:this.config.get("language.content"),translations:n}),this.t=this.locale.t,this.editors=new Collection}initPlugins(){const a=this.config.get("plugins")||[],n=this.config.get("substitutePlugins")||[];for(const s of a.concat(n)){if(typeof s!="function")throw new CKEditorError("context-initplugins-constructor-only",null,{Plugin:s});if(s.isContextPlugin!==!0)throw new CKEditorError("context-initplugins-invalid-plugin",null,{Plugin:s})}return this.plugins.init(a,[],n)}destroy(){return Promise.all(Array.from(this.editors,a=>a.destroy())).then(()=>this.plugins.destroy())}_addEditor(a,n){if(this._contextOwner)throw new CKEditorError("context-addeditor-private-context");this.editors.add(a),n&&(this._contextOwner=a)}_removeEditor(a){return this.editors.has(a)&&this.editors.remove(a),this._contextOwner===a?this.destroy():Promise.resolve()}_getEditorConfig(){const a={};for(const n of this.config.names())["plugins","removePlugins","extraPlugins"].includes(n)||(a[n]=this.config.get(n));return a}static create(a){return new Promise(n=>{const s=new this(a);n(s.initPlugins().then(()=>s))})}}M(Context,"defaultConfig"),M(Context,"builtinPlugins");class ContextPlugin extends ObservableMixin(){constructor(n){super();M(this,"context");this.context=n}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}}class CommandCollection{constructor(){M(this,"_commands");this._commands=new Map}add(a,n){this._commands.set(a,n)}get(a){return this._commands.get(a)}execute(a,...n){const s=this.get(a);if(!s)throw new CKEditorError("commandcollection-command-not-found",this,{commandName:a});return s.execute(...n)}*names(){yield*this._commands.keys()}*commands(){yield*this._commands.values()}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(const a of this.commands())a.destroy()}}class EditingKeystrokeHandler extends KeystrokeHandler{constructor(n){super();M(this,"editor");this.editor=n}set(n,s,l={}){if(typeof s=="string"){const c=s;s=(u,d)=>{this.editor.execute(c),d()}}super.set(n,s,l)}}const DEFAULT_CATEGORY_ID="contentEditing",DEFAULT_GROUP_ID="common";class Accessibility{constructor(a){M(this,"keystrokeInfos",new Map);M(this,"_editor");this._editor=a;const n=a.config.get("menuBar.isVisible"),s=a.locale.t;this.addKeystrokeInfoCategory({id:DEFAULT_CATEGORY_ID,label:s("Content editing keystrokes"),description:s("These keyboard shortcuts allow for quick access to content editing features.")});const l=[{label:s("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:s("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:s("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:s("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:s("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:s("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];n&&l.push({label:s("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:s("User interface and content navigation keystrokes"),description:s("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:l}]})}addKeystrokeInfoCategory({id:a,label:n,description:s,groups:l}){this.keystrokeInfos.set(a,{id:a,label:n,description:s,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:a,id:DEFAULT_GROUP_ID}),l&&l.forEach(c=>{this.addKeystrokeInfoGroup({categoryId:a,...c})})}addKeystrokeInfoGroup({categoryId:a=DEFAULT_CATEGORY_ID,id:n,label:s,keystrokes:l}){const c=this.keystrokeInfos.get(a);if(!c)throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{groupId:n,categoryId:a});c.groups.set(n,{id:n,label:s,keystrokes:l||[]})}addKeystrokeInfos({categoryId:a=DEFAULT_CATEGORY_ID,groupId:n=DEFAULT_GROUP_ID,keystrokes:s}){if(!this.keystrokeInfos.has(a))throw new CKEditorError("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:a,keystrokes:s});const l=this.keystrokeInfos.get(a);if(!l.groups.has(n))throw new CKEditorError("accessibility-unknown-keystroke-info-group",this._editor,{groupId:n,categoryId:a,keystrokes:s});l.groups.get(n).keystrokes.push(...s)}}function getEditorUsageData(o){return{sessionId:getSessionId(),pageSessionId:getPageSessionID(),hostname:window.location.hostname,version:globalThis.CKEDITOR_VERSION,type:getEditorType(o),plugins:getPluginsUsageData(o.plugins),distribution:getDistributionUsageData(),env:getEnvUsageData(),integration:Object.create(null),menuBar:{isVisible:!!o.config.get("menuBar.isVisible")},language:{ui:o.locale.uiLanguage,content:o.locale.contentLanguage},toolbar:{main:getToolbarUsageData(o.config.get("toolbar")),block:getToolbarUsageData(o.config.get("blockToolbar")),balloon:getToolbarUsageData(o.config.get("balloonToolbar"))}}}function getEditorType(o){return Object.getPrototypeOf(o).constructor.editorName}function getPluginsUsageData(o){return Array.from(o).filter(([a])=>!!a.pluginName).map(([a])=>{const{pluginName:n,isContextPlugin:s,isOfficialPlugin:l,isPremiumPlugin:c}=a;return{isContext:!!s,isOfficial:!!l,isPremium:!!c,name:n}})}function getToolbarUsageData(o){if(!o)return;const a=Array.isArray(o)?{items:o}:o,n=c(a.items||[]);return{isMultiline:n.includes("-"),shouldNotGroupWhenFull:!!a.shouldNotGroupWhenFull,items:l(n)};function l(u){return u.filter(d=>d!=="|"&&d!=="-")}function c(u){return u.flatMap(d=>typeof d=="string"?[d]:c(d.items))}}function getDistributionUsageData(){return{channel:window[Symbol.for("cke distribution")]||"sh"}}function getEnvUsageData(){let o="unknown",a="unknown";return env$1.isMac?o="mac":env$1.isWindows?o="windows":env$1.isiOS?o="ios":env$1.isAndroid&&(o="android"),env$1.isGecko?a="gecko":env$1.isBlink?a="blink":env$1.isSafari&&(a="safari"),{os:o,browser:a}}function getSessionId(){return localStorage.getItem("__ckeditor-session-id")||localStorage.setItem("__ckeditor-session-id",uid()),localStorage.getItem("__ckeditor-session-id")}function getPageSessionID(){return global$1.window.CKEDITOR_PAGE_SESSION_ID=global$1.window.CKEDITOR_PAGE_SESSION_ID||uid(),global$1.window.CKEDITOR_PAGE_SESSION_ID}class Editor extends ObservableMixin(){constructor(n={}){super();M(this,"accessibility");M(this,"commands");M(this,"config");M(this,"conversion");M(this,"data");M(this,"editing");M(this,"locale");M(this,"model");M(this,"plugins");M(this,"keystrokes");M(this,"t");M(this,"_context");M(this,"_readOnlyLocks");if("sanitizeHtml"in n)throw new CKEditorError("editor-config-sanitizehtml-not-supported");const s=this.constructor,{translations:l,...c}=s.defaultConfig||{},{translations:u=l,...d}=n,h=n.language||c.language;this._context=n.context||new Context({language:h,translations:u}),this._context._addEditor(this,!n.context);const f=Array.from(s.builtinPlugins||[]);this.config=new Config(d,c),this.config.define("plugins",f),this.config.define(this._context._getEditorConfig()),g(this.config),this.plugins=new PluginCollection(this,f,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new CommandCollection,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Model$2,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});const p=new StylesProcessor;this.data=new DataController$1(this.model,p),this.editing=new EditingController(this.model,p),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Conversion([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new EditingKeystrokeHandler(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Accessibility(this),v(this);function g(b){let w=b.get("licenseKey");if(!w&&window.CKEDITOR_GLOBAL_LICENSE_KEY&&(w=window.CKEDITOR_GLOBAL_LICENSE_KEY,b.set("licenseKey",w)),!w)throw new CKEditorError("license-key-missing")}function v(b){const w=b.config.get("licenseKey"),x=window[Symbol.for("cke distribution")]||"sh";function S(H){b.enableReadOnlyMode(Symbol("invalidLicense")),b._showLicenseError(H)}function E(H){const q=H.split(".");return q.length!=3?null:q[1]}function T(H){return["exp","jti","vc"].every(Y=>Y in H)}function C(H){return Object.getOwnPropertyNames(H).sort().filter(te=>te!="vc"&&H[te]!=null).map(te=>H[te])}function A(H){const{hostname:q}=new URL(window.location.href);if(H.includes(q))return!0;const Y=q.split(".");return H.filter(te=>te.includes("*")).map(te=>te.split(".")).filter(te=>te.length<=Y.length).map(te=>Array(Y.length-te.length).fill(te[0]==="*"?"*":"").concat(te)).some(te=>Y.every((ee,re)=>te[re]===ee||te[re]==="*"))}if(w=="GPL"){x=="cloud"&&S("distributionChannel");return}const R=E(w);if(!R){S("invalid");return}const j=parseBase64EncodedObject(R);if(!j){S("invalid");return}if(!T(j)){S("invalid");return}if(j.distributionChannel&&!toArray$2(j.distributionChannel).includes(x)){S("distributionChannel");return}if(crc32(C(j))!=j.vc.toLowerCase()){S("invalid");return}if(new Date(j.exp*1e3)<releaseDate){S("expired");return}const O=j.licensedHosts;if(O&&O.length>0&&!A(O)){S("domainLimit");return}if(["evaluation","trial"].includes(j.licenseType)&&j.exp*1e3<Date.now()){S("expired");return}if(["development","evaluation","trial"].includes(j.licenseType)){const{licenseType:H}=j,q=H[0].toUpperCase()+H.slice(1),Y=H==="evaluation"?"an":"a";console.info(`%cCKEditor 5 ${q} License`,"color: #ffffff; background: #743CCD; font-size: 14px; padding: 4px 8px; border-radius: 4px;"),console.warn(`⚠️ You are using ${Y} ${H} license of CKEditor 5${H==="trial"?" which is for evaluation purposes only":""}. For production usage, please obtain a production license at https://portal.ckeditor.com/`)}if(["evaluation","trial"].includes(j.licenseType)){const H=j.licenseType,q=setTimeout(()=>{S(`${H}Limit`)},6e5);b.on("destroy",()=>{clearTimeout(q)})}j.usageEndpoint&&b.once("ready",()=>{const H={requestId:uid(),requestTime:Math.round(Date.now()/1e3),license:w,editor:collectUsageData(b)};b._sendUsageRequest(j.usageEndpoint,H).then(q=>{const{status:Y,message:te}=q;te&&console.warn(te),Y!="ok"&&S("usageLimit")},()=>{logError$1("license-key-validation-endpoint-not-reachable",{url:j.usageEndpoint})})},{priority:"high"})}}static get editorName(){return"Editor"}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(n){throw new CKEditorError("editor-isreadonly-has-no-setter")}enableReadOnlyMode(n){if(typeof n!="string"&&typeof n!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:n});this._readOnlyLocks.has(n)||(this._readOnlyLocks.add(n),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(n){if(typeof n!="string"&&typeof n!="symbol")throw new CKEditorError("editor-read-only-lock-id-invalid",null,{lockId:n});this._readOnlyLocks.has(n)&&(this._readOnlyLocks.delete(n),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(n){this.data.set(n)}getData(n){return this.data.get(n)}initPlugins(){const n=this.config,s=n.get("plugins"),l=n.get("removePlugins")||[],c=n.get("extraPlugins")||[],u=n.get("substitutePlugins")||[];return this.plugins.init(s.concat(c),l,u)}destroy(){let n=Promise.resolve();return this.state=="initializing"&&(n=new Promise(s=>this.once("ready",s))),n.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(n,...s){try{return this.commands.execute(n,...s)}catch(l){/* istanbul ignore next -- @preserve */CKEditorError.rethrowUnexpectedError(l,this)}}focus(){this.editing.view.focus()}static create(...n){throw new Error("This is an abstract method.")}_showLicenseError(n,s){setTimeout(()=>{if(n=="invalid")throw new CKEditorError("invalid-license-key");if(n=="expired")throw new CKEditorError("license-key-expired");if(n=="domainLimit")throw new CKEditorError("license-key-domain-limit");if(n=="featureNotAllowed")throw new CKEditorError("license-key-plugin-not-allowed",null,{pluginName:s});if(n=="evaluationLimit")throw new CKEditorError("license-key-evaluation-limit");if(n=="trialLimit")throw new CKEditorError("license-key-trial-limit");if(n=="developmentLimit")throw new CKEditorError("license-key-development-limit");if(n=="usageLimit")throw new CKEditorError("license-key-usage-limit");if(n=="distributionChannel")throw new CKEditorError("license-key-invalid-distribution-channel")},0),this._showLicenseError=()=>{}}async _sendUsageRequest(n,s){const l=new Headers({"Content-Type":"application/json"}),c=await fetch(new URL(n),{method:"POST",headers:l,body:JSON.stringify(s)});if(!c.ok)throw new Error(`HTTP Response: ${c.status}`);return c.json()}}M(Editor,"defaultConfig"),M(Editor,"builtinPlugins"),M(Editor,"Context",Context),M(Editor,"EditorWatchdog",EditorWatchdog),M(Editor,"ContextWatchdog",ContextWatchdog);function collectUsageData(o){const a=getEditorUsageData(o);function n(s,l){if(get$2(a,s)!==void 0)throw new CKEditorError("editor-usage-data-path-already-set",{path:s});set$2(a,s,l)}return o.fire("collectUsageData",{setUsageData:n}),a}function attachToForm(o){if(!isFunction$3(o.updateSourceElement))throw new CKEditorError("attachtoform-missing-elementapi-interface",o);const a=o.sourceElement;if(isTextArea(a)&&a.form){let n;const s=a.form,l=()=>o.updateSourceElement();isFunction$3(s.submit)&&(n=s.submit,s.submit=()=>{l(),n.apply(s)}),s.addEventListener("submit",l),o.on("destroy",()=>{s.removeEventListener("submit",l),n&&(s.submit=n)})}}function isTextArea(o){return!!o&&o.tagName.toLowerCase()==="textarea"}function ElementApiMixin(o){class a extends o{constructor(){super(...arguments);M(this,"sourceElement")}updateSourceElement(l){if(!this.sourceElement)throw new CKEditorError("editor-missing-sourceelement",this);const c=this.config.get("updateSourceElementOnDestroy"),u=this.sourceElement instanceof HTMLTextAreaElement;if(!c&&!u){setDataInElement(this.sourceElement,"");return}const d=typeof l=="string"?l:this.data.get();setDataInElement(this.sourceElement,d)}}return a}ElementApiMixin.updateSourceElement=ElementApiMixin(Object).prototype.updateSourceElement;class PendingActions extends ContextPlugin{constructor(){super(...arguments);M(this,"_actions")}static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new Collection({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(n){if(typeof n!="string")throw new CKEditorError("pendingactions-add-invalid-message",this);const s=new(ObservableMixin());return s.set("message",n),this._actions.add(s),this.hasAny=!0,s}remove(n){this._actions.remove(n),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}}var cancel='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',caption='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',check='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',cog='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',colorPalette$1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',eraser='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',history='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',lowVision='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',textAlternative='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',loupe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',previousArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',nextArrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',image='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',imageUpload='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',imageAssetManager='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',imageUrl='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',alignBottom='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',alignMiddle='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',alignTop='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',alignLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',alignCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',alignRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',alignJustify='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',objectBlockLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectCenter='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',objectBlockRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectFullWidth='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',objectInline='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectLeft='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',objectRight='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',objectSizeFull='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',objectSizeCustom='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',objectSizeLarge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',objectSizeSmall='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',objectSizeMedium='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',pencil='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',pilcrow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',quote='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',threeVerticalDots='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',dragIndicator='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',bold='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',paragraph='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',importExport='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',redo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',undo='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',bulletedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',numberedList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',todoList='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',codeBlock='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',browseFiles='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',heading1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',heading2='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',heading3='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',heading4='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',heading5='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',heading6='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',horizontalLine='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',html='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',indent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',outdent='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',table$1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',source=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>
`,remove$1='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 7h9.2c.6 0 1 .4 1 1v9.9c0 .5-.4 1-1 1H5.2a1 1 0 0 1-1-1V8c0-.6.4-1 1-1Zm1 1.5c-.3 0-.5.2-.5.5v8c0 .3.2.5.5.5h.5c.2 0 .5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5Zm3.2 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm3.5 0c-.2 0-.5.2-.5.5v8c0 .3.3.5.5.5h.5c.3 0 .5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5Zm-1.4-7.1H8.3L6.5 3.6H3.8c-.5 0-.7.3-.7.8s.2.7.7.7h12c.6 0 .9-.2.9-.7 0-.5-.3-.8-1-.8h-2.4l-1.8-2.2Z"/></svg>',bookmark='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M5.68 3.417a.238.238 0 0 0-.24.236v12.66l3.793-3.102a1.215 1.215 0 0 1 1.534 0l3.793 3.103V3.654a.238.238 0 0 0-.24-.237H5.68ZM4 3.653C4 2.74 4.752 2 5.68 2h8.64c.928 0 1.68.74 1.68 1.653v13.164c0 1-1.185 1.547-1.967.908L10 14.426l-4.033 3.299c-.782.64-1.967.092-1.967-.908V3.653Z"/></svg>',bookmarkInline='<svg viewBox="0 0 14 16" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M2 14.436V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v12.436a.5.5 0 0 1-.819.385l-3.862-3.2a.5.5 0 0 0-.638 0l-3.862 3.2A.5.5 0 0 1 2 14.436Z"/></svg>',emoji=`<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path clip-rule="evenodd" d="M8.5 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 8.5 8.25Z"/><path clip-rule="evenodd" d="M14 8.25a1.25 1.25 0 1 1-2.499.001A1.25 1.25 0 0 1 14 8.25Z"/><path clip-rule="evenodd" d="M7.127 12.088a.75.75 0 1 0-1.254.824C6.88 14.444 8.423 15.25 10 15.25c1.578 0 3.12-.805 4.127-2.338a.75.75 0 0 0-1.254-.824C12.13 13.221 11.048 13.75 10 13.75c-1.047 0-2.13-.529-2.873-1.662Z"/><path d="M10 19a9 9 0 1 0 0-18 9 9 0 0 0 0 18Zm0-1.5a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"/></svg>
`;const icons={bold,cancel,caption,check,cog,colorPalette:colorPalette$1,eraser,history,image,imageUpload,imageAssetManager,imageUrl,lowVision,textAlternative,loupe,previousArrow,nextArrow,importExport,paragraph,plus,text,alignBottom,alignMiddle,alignTop,alignLeft,alignCenter,alignRight,alignJustify,objectLeft,objectCenter,objectRight,objectFullWidth,objectInline,objectBlockLeft,objectBlockRight,objectSizeCustom,objectSizeFull,objectSizeLarge,objectSizeSmall,objectSizeMedium,pencil,pilcrow,quote,threeVerticalDots,dragIndicator,redo,undo,bulletedList,numberedList,todoList,codeBlock,browseFiles,heading1,heading2,heading3,heading4,heading5,heading6,horizontalLine,html,indent,outdent,table:table$1,source,remove:remove$1,bookmark,bookmarkInline,emoji};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */let FileReader$1=class extends ObservableMixin(){constructor(){super();M(this,"total");M(this,"_reader");M(this,"_data");const n=new window.FileReader;this._reader=n,this._data=void 0,this.set("loaded",0),n.onprogress=s=>{this.loaded=s.loaded}}get error(){return this._reader.error}get data(){return this._data}read(n){const s=this._reader;return this.total=n.size,new Promise((l,c)=>{s.onload=()=>{const u=s.result;this._data=u,l(u)},s.onerror=()=>{c("error")},s.onabort=()=>{c("aborted")},this._reader.readAsDataURL(n)})}abort(){this._reader.abort()}};class FileRepository extends Plugin{constructor(){super(...arguments);M(this,"loaders",new Collection);M(this,"_loadersMap",new Map);M(this,"_pendingAction",null)}static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(n,s)=>s?n/s*100:0)}getLoader(n){return this._loadersMap.get(n)||null}createLoader(n){if(!this.createUploadAdapter)return logWarning("filerepository-no-upload-adapter"),null;const s=new FileLoader(Promise.resolve(n),this.createUploadAdapter);return this.loaders.add(s),this._loadersMap.set(n,s),n instanceof Promise&&s.file.then(l=>{this._loadersMap.set(l,s)}).catch(()=>{}),s.on("change:uploaded",()=>{let l=0;for(const c of this.loaders)l+=c.uploaded;this.uploaded=l}),s.on("change:uploadTotal",()=>{let l=0;for(const c of this.loaders)c.uploadTotal&&(l+=c.uploadTotal);this.uploadTotal=l}),s}destroyLoader(n){const s=n instanceof FileLoader?n:this.getLoader(n);s._destroy(),this.loaders.remove(s),this._loadersMap.forEach((l,c)=>{l===s&&this._loadersMap.delete(c)})}_updatePendingAction(){const n=this.editor.plugins.get(PendingActions);if(this.loaders.length){if(!this._pendingAction){const s=this.editor.t,l=c=>`${s("Upload in progress")} ${parseInt(c)}%.`;this._pendingAction=n.add(l(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",l)}}else n.remove(this._pendingAction),this._pendingAction=null}}class FileLoader extends ObservableMixin(){constructor(n,s){super();M(this,"id");M(this,"_filePromiseWrapper");M(this,"_adapter");M(this,"_reader");this.id=uid(),this._filePromiseWrapper=this._createFilePromiseWrapper(n),this._adapter=s(this),this._reader=new FileReader$1,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(l,c)=>c?l/c*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(n=>this._filePromiseWrapper?n:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new CKEditorError("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(n=>this._reader.read(n)).then(n=>{if(this.status!=="reading")throw this.status;return this.status="idle",n}).catch(n=>{throw n==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:n)})}upload(){if(this.status!="idle")throw new CKEditorError("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(n=>(this.uploadResponse=n,this.status="idle",n)).catch(n=>{throw this.status==="aborted"?"aborted":(this.status="error",n)})}abort(){const n=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?n=="reading"?this._reader.abort():n=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(n){const s={};return s.promise=new Promise((l,c)=>{s.rejecter=c,s.isFulfilled=!1,n.then(u=>{s.isFulfilled=!0,l(u)}).catch(u=>{s.isFulfilled=!0,c(u)})}),s}}var colorName,hasRequiredColorName;function requireColorName(){return hasRequiredColorName||(hasRequiredColorName=1,colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),colorName}var colorNameExports=requireColorName();const names=getDefaultExportFromCjs(colorNameExports);var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$1(o){var a,n=[],s=1,l;if(typeof o=="string")if(names[o])n=names[o].slice(),l="rgb";else if(o==="transparent")s=0,l="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var c=o.slice(1),u=c.length,d=u<=4;s=1,d?(n=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],u===4&&(s=parseInt(c[3]+c[3],16)/255)):(n=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],u===8&&(s=parseInt(c[6]+c[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),l="rgb"}else if(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var h=a[1],f=h==="rgb",c=h.replace(/a$/,"");l=c;var u=c==="cmyk"?4:c==="gray"?1:3;n=a[2].trim().split(/\s*[,\/]\s*|\s+/).map(function(v,b){if(/%$/.test(v))return b===u?parseFloat(v)/100:c==="rgb"?parseFloat(v)*255/100:parseFloat(v);if(c[b]==="h"){if(/deg$/.test(v))return parseFloat(v);if(baseHues[v]!==void 0)return baseHues[v]}return parseFloat(v)}),h===c&&n.push(1),s=f||n[u]===void 0?1:n[u],n=n.slice(0,u)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(n=o.match(/([0-9]+)/g).map(function(p){return parseFloat(p)}),l=o.match(/([a-z])/ig).join("").toLowerCase());else isNaN(o)?Array.isArray(o)||o.length?(n=[o[0],o[1],o[2]],l="rgb",s=o.length===4?o[3]:1):o instanceof Object&&(o.r!=null||o.red!=null||o.R!=null?(l="rgb",n=[o.r||o.red||o.R||0,o.g||o.green||o.G||0,o.b||o.blue||o.B||0]):(l="hsl",n=[o.h||o.hue||o.H||0,o.s||o.saturation||o.S||0,o.l||o.lightness||o.L||o.b||o.brightness]),s=o.a||o.alpha||o.opacity||1,o.opacity!=null&&(s/=100)):(l="rgb",n=[o>>>16,(o&65280)>>>8,o&255]);return{space:l,values:n,alpha:s}}var conversions,hasRequiredConversions;function requireConversions(){if(hasRequiredConversions)return conversions;hasRequiredConversions=1;const o=requireColorName(),a={};for(const l of Object.keys(o))a[o[l]]=l;const n={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};conversions=n;for(const l of Object.keys(n)){if(!("channels"in n[l]))throw new Error("missing channels property: "+l);if(!("labels"in n[l]))throw new Error("missing channel labels property: "+l);if(n[l].labels.length!==n[l].channels)throw new Error("channel and label counts mismatch: "+l);const{channels:c,labels:u}=n[l];delete n[l].channels,delete n[l].labels,Object.defineProperty(n[l],"channels",{value:c}),Object.defineProperty(n[l],"labels",{value:u})}n.rgb.hsl=function(l){const c=l[0]/255,u=l[1]/255,d=l[2]/255,h=Math.min(c,u,d),f=Math.max(c,u,d),p=f-h;let g,v;f===h?g=0:c===f?g=(u-d)/p:u===f?g=2+(d-c)/p:d===f&&(g=4+(c-u)/p),g=Math.min(g*60,360),g<0&&(g+=360);const b=(h+f)/2;return f===h?v=0:b<=.5?v=p/(f+h):v=p/(2-f-h),[g,v*100,b*100]},n.rgb.hsv=function(l){let c,u,d,h,f;const p=l[0]/255,g=l[1]/255,v=l[2]/255,b=Math.max(p,g,v),w=b-Math.min(p,g,v),x=function(S){return(b-S)/6/w+1/2};return w===0?(h=0,f=0):(f=w/b,c=x(p),u=x(g),d=x(v),p===b?h=d-u:g===b?h=1/3+c-d:v===b&&(h=2/3+u-c),h<0?h+=1:h>1&&(h-=1)),[h*360,f*100,b*100]},n.rgb.hwb=function(l){const c=l[0],u=l[1];let d=l[2];const h=n.rgb.hsl(l)[0],f=1/255*Math.min(c,Math.min(u,d));return d=1-1/255*Math.max(c,Math.max(u,d)),[h,f*100,d*100]},n.rgb.cmyk=function(l){const c=l[0]/255,u=l[1]/255,d=l[2]/255,h=Math.min(1-c,1-u,1-d),f=(1-c-h)/(1-h)||0,p=(1-u-h)/(1-h)||0,g=(1-d-h)/(1-h)||0;return[f*100,p*100,g*100,h*100]};function s(l,c){return(l[0]-c[0])**2+(l[1]-c[1])**2+(l[2]-c[2])**2}return n.rgb.keyword=function(l){const c=a[l];if(c)return c;let u=1/0,d;for(const h of Object.keys(o)){const f=o[h],p=s(l,f);p<u&&(u=p,d=h)}return d},n.keyword.rgb=function(l){return o[l]},n.rgb.xyz=function(l){let c=l[0]/255,u=l[1]/255,d=l[2]/255;c=c>.04045?((c+.055)/1.055)**2.4:c/12.92,u=u>.04045?((u+.055)/1.055)**2.4:u/12.92,d=d>.04045?((d+.055)/1.055)**2.4:d/12.92;const h=c*.4124+u*.3576+d*.1805,f=c*.2126+u*.7152+d*.0722,p=c*.0193+u*.1192+d*.9505;return[h*100,f*100,p*100]},n.rgb.lab=function(l){const c=n.rgb.xyz(l);let u=c[0],d=c[1],h=c[2];u/=95.047,d/=100,h/=108.883,u=u>.008856?u**(1/3):7.787*u+16/116,d=d>.008856?d**(1/3):7.787*d+16/116,h=h>.008856?h**(1/3):7.787*h+16/116;const f=116*d-16,p=500*(u-d),g=200*(d-h);return[f,p,g]},n.hsl.rgb=function(l){const c=l[0]/360,u=l[1]/100,d=l[2]/100;let h,f,p;if(u===0)return p=d*255,[p,p,p];d<.5?h=d*(1+u):h=d+u-d*u;const g=2*d-h,v=[0,0,0];for(let b=0;b<3;b++)f=c+1/3*-(b-1),f<0&&f++,f>1&&f--,6*f<1?p=g+(h-g)*6*f:2*f<1?p=h:3*f<2?p=g+(h-g)*(2/3-f)*6:p=g,v[b]=p*255;return v},n.hsl.hsv=function(l){const c=l[0];let u=l[1]/100,d=l[2]/100,h=u;const f=Math.max(d,.01);d*=2,u*=d<=1?d:2-d,h*=f<=1?f:2-f;const p=(d+u)/2,g=d===0?2*h/(f+h):2*u/(d+u);return[c,g*100,p*100]},n.hsv.rgb=function(l){const c=l[0]/60,u=l[1]/100;let d=l[2]/100;const h=Math.floor(c)%6,f=c-Math.floor(c),p=255*d*(1-u),g=255*d*(1-u*f),v=255*d*(1-u*(1-f));switch(d*=255,h){case 0:return[d,v,p];case 1:return[g,d,p];case 2:return[p,d,v];case 3:return[p,g,d];case 4:return[v,p,d];case 5:return[d,p,g]}},n.hsv.hsl=function(l){const c=l[0],u=l[1]/100,d=l[2]/100,h=Math.max(d,.01);let f,p;p=(2-u)*d;const g=(2-u)*h;return f=u*h,f/=g<=1?g:2-g,f=f||0,p/=2,[c,f*100,p*100]},n.hwb.rgb=function(l){const c=l[0]/360;let u=l[1]/100,d=l[2]/100;const h=u+d;let f;h>1&&(u/=h,d/=h);const p=Math.floor(6*c),g=1-d;f=6*c-p,(p&1)!==0&&(f=1-f);const v=u+f*(g-u);let b,w,x;switch(p){default:case 6:case 0:b=g,w=v,x=u;break;case 1:b=v,w=g,x=u;break;case 2:b=u,w=g,x=v;break;case 3:b=u,w=v,x=g;break;case 4:b=v,w=u,x=g;break;case 5:b=g,w=u,x=v;break}return[b*255,w*255,x*255]},n.cmyk.rgb=function(l){const c=l[0]/100,u=l[1]/100,d=l[2]/100,h=l[3]/100,f=1-Math.min(1,c*(1-h)+h),p=1-Math.min(1,u*(1-h)+h),g=1-Math.min(1,d*(1-h)+h);return[f*255,p*255,g*255]},n.xyz.rgb=function(l){const c=l[0]/100,u=l[1]/100,d=l[2]/100;let h,f,p;return h=c*3.2406+u*-1.5372+d*-.4986,f=c*-.9689+u*1.8758+d*.0415,p=c*.0557+u*-.204+d*1.057,h=h>.0031308?1.055*h**(1/2.4)-.055:h*12.92,f=f>.0031308?1.055*f**(1/2.4)-.055:f*12.92,p=p>.0031308?1.055*p**(1/2.4)-.055:p*12.92,h=Math.min(Math.max(0,h),1),f=Math.min(Math.max(0,f),1),p=Math.min(Math.max(0,p),1),[h*255,f*255,p*255]},n.xyz.lab=function(l){let c=l[0],u=l[1],d=l[2];c/=95.047,u/=100,d/=108.883,c=c>.008856?c**(1/3):7.787*c+16/116,u=u>.008856?u**(1/3):7.787*u+16/116,d=d>.008856?d**(1/3):7.787*d+16/116;const h=116*u-16,f=500*(c-u),p=200*(u-d);return[h,f,p]},n.lab.xyz=function(l){const c=l[0],u=l[1],d=l[2];let h,f,p;f=(c+16)/116,h=u/500+f,p=f-d/200;const g=f**3,v=h**3,b=p**3;return f=g>.008856?g:(f-16/116)/7.787,h=v>.008856?v:(h-16/116)/7.787,p=b>.008856?b:(p-16/116)/7.787,h*=95.047,f*=100,p*=108.883,[h,f,p]},n.lab.lch=function(l){const c=l[0],u=l[1],d=l[2];let h;h=Math.atan2(d,u)*360/2/Math.PI,h<0&&(h+=360);const p=Math.sqrt(u*u+d*d);return[c,p,h]},n.lch.lab=function(l){const c=l[0],u=l[1],h=l[2]/360*2*Math.PI,f=u*Math.cos(h),p=u*Math.sin(h);return[c,f,p]},n.rgb.ansi16=function(l,c=null){const[u,d,h]=l;let f=c===null?n.rgb.hsv(l)[2]:c;if(f=Math.round(f/50),f===0)return 30;let p=30+(Math.round(h/255)<<2|Math.round(d/255)<<1|Math.round(u/255));return f===2&&(p+=60),p},n.hsv.ansi16=function(l){return n.rgb.ansi16(n.hsv.rgb(l),l[2])},n.rgb.ansi256=function(l){const c=l[0],u=l[1],d=l[2];return c===u&&u===d?c<8?16:c>248?231:Math.round((c-8)/247*24)+232:16+36*Math.round(c/255*5)+6*Math.round(u/255*5)+Math.round(d/255*5)},n.ansi16.rgb=function(l){let c=l%10;if(c===0||c===7)return l>50&&(c+=3.5),c=c/10.5*255,[c,c,c];const u=(~~(l>50)+1)*.5,d=(c&1)*u*255,h=(c>>1&1)*u*255,f=(c>>2&1)*u*255;return[d,h,f]},n.ansi256.rgb=function(l){if(l>=232){const f=(l-232)*10+8;return[f,f,f]}l-=16;let c;const u=Math.floor(l/36)/5*255,d=Math.floor((c=l%36)/6)/5*255,h=c%6/5*255;return[u,d,h]},n.rgb.hex=function(l){const u=(((Math.round(l[0])&255)<<16)+((Math.round(l[1])&255)<<8)+(Math.round(l[2])&255)).toString(16).toUpperCase();return"000000".substring(u.length)+u},n.hex.rgb=function(l){const c=l.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!c)return[0,0,0];let u=c[0];c[0].length===3&&(u=u.split("").map(g=>g+g).join(""));const d=parseInt(u,16),h=d>>16&255,f=d>>8&255,p=d&255;return[h,f,p]},n.rgb.hcg=function(l){const c=l[0]/255,u=l[1]/255,d=l[2]/255,h=Math.max(Math.max(c,u),d),f=Math.min(Math.min(c,u),d),p=h-f;let g,v;return p<1?g=f/(1-p):g=0,p<=0?v=0:h===c?v=(u-d)/p%6:h===u?v=2+(d-c)/p:v=4+(c-u)/p,v/=6,v%=1,[v*360,p*100,g*100]},n.hsl.hcg=function(l){const c=l[1]/100,u=l[2]/100,d=u<.5?2*c*u:2*c*(1-u);let h=0;return d<1&&(h=(u-.5*d)/(1-d)),[l[0],d*100,h*100]},n.hsv.hcg=function(l){const c=l[1]/100,u=l[2]/100,d=c*u;let h=0;return d<1&&(h=(u-d)/(1-d)),[l[0],d*100,h*100]},n.hcg.rgb=function(l){const c=l[0]/360,u=l[1]/100,d=l[2]/100;if(u===0)return[d*255,d*255,d*255];const h=[0,0,0],f=c%1*6,p=f%1,g=1-p;let v=0;switch(Math.floor(f)){case 0:h[0]=1,h[1]=p,h[2]=0;break;case 1:h[0]=g,h[1]=1,h[2]=0;break;case 2:h[0]=0,h[1]=1,h[2]=p;break;case 3:h[0]=0,h[1]=g,h[2]=1;break;case 4:h[0]=p,h[1]=0,h[2]=1;break;default:h[0]=1,h[1]=0,h[2]=g}return v=(1-u)*d,[(u*h[0]+v)*255,(u*h[1]+v)*255,(u*h[2]+v)*255]},n.hcg.hsv=function(l){const c=l[1]/100,u=l[2]/100,d=c+u*(1-c);let h=0;return d>0&&(h=c/d),[l[0],h*100,d*100]},n.hcg.hsl=function(l){const c=l[1]/100,d=l[2]/100*(1-c)+.5*c;let h=0;return d>0&&d<.5?h=c/(2*d):d>=.5&&d<1&&(h=c/(2*(1-d))),[l[0],h*100,d*100]},n.hcg.hwb=function(l){const c=l[1]/100,u=l[2]/100,d=c+u*(1-c);return[l[0],(d-c)*100,(1-d)*100]},n.hwb.hcg=function(l){const c=l[1]/100,d=1-l[2]/100,h=d-c;let f=0;return h<1&&(f=(d-h)/(1-h)),[l[0],h*100,f*100]},n.apple.rgb=function(l){return[l[0]/65535*255,l[1]/65535*255,l[2]/65535*255]},n.rgb.apple=function(l){return[l[0]/255*65535,l[1]/255*65535,l[2]/255*65535]},n.gray.rgb=function(l){return[l[0]/100*255,l[0]/100*255,l[0]/100*255]},n.gray.hsl=function(l){return[0,0,l[0]]},n.gray.hsv=n.gray.hsl,n.gray.hwb=function(l){return[0,100,l[0]]},n.gray.cmyk=function(l){return[0,0,0,l[0]]},n.gray.lab=function(l){return[l[0],0,0]},n.gray.hex=function(l){const c=Math.round(l[0]/100*255)&255,d=((c<<16)+(c<<8)+c).toString(16).toUpperCase();return"000000".substring(d.length)+d},n.rgb.gray=function(l){return[(l[0]+l[1]+l[2])/3/255*100]},conversions}var route,hasRequiredRoute;function requireRoute(){if(hasRequiredRoute)return route;hasRequiredRoute=1;const o=requireConversions();function a(){const c={},u=Object.keys(o);for(let d=u.length,h=0;h<d;h++)c[u[h]]={distance:-1,parent:null};return c}function n(c){const u=a(),d=[c];for(u[c].distance=0;d.length;){const h=d.pop(),f=Object.keys(o[h]);for(let p=f.length,g=0;g<p;g++){const v=f[g],b=u[v];b.distance===-1&&(b.distance=u[h].distance+1,b.parent=h,d.unshift(v))}}return u}function s(c,u){return function(d){return u(c(d))}}function l(c,u){const d=[u[c].parent,c];let h=o[u[c].parent][c],f=u[c].parent;for(;u[f].parent;)d.unshift(u[f].parent),h=s(o[u[f].parent][f],h),f=u[f].parent;return h.conversion=d,h}return route=function(c){const u=n(c),d={},h=Object.keys(u);for(let f=h.length,p=0;p<f;p++){const g=h[p];u[g].parent!==null&&(d[g]=l(g,u))}return d},route}var colorConvert,hasRequiredColorConvert;function requireColorConvert(){if(hasRequiredColorConvert)return colorConvert;hasRequiredColorConvert=1;const o=requireConversions(),a=requireRoute(),n={},s=Object.keys(o);function l(u){const d=function(...h){const f=h[0];return f==null?f:(f.length>1&&(h=f),u(h))};return"conversion"in u&&(d.conversion=u.conversion),d}function c(u){const d=function(...h){const f=h[0];if(f==null)return f;f.length>1&&(h=f);const p=u(h);if(typeof p=="object")for(let g=p.length,v=0;v<g;v++)p[v]=Math.round(p[v]);return p};return"conversion"in u&&(d.conversion=u.conversion),d}return s.forEach(u=>{n[u]={},Object.defineProperty(n[u],"channels",{value:o[u].channels}),Object.defineProperty(n[u],"labels",{value:o[u].labels});const d=a(u);Object.keys(d).forEach(f=>{const p=d[f];n[u][f]=c(p),n[u][f].raw=l(p)})}),colorConvert=n,colorConvert}var colorConvertExports=requireColorConvert();const index=getDefaultExportFromCjs(colorConvertExports),convert=_mergeNamespaces({__proto__:null,default:index},[colorConvertExports]),clamp$2=(o,a=0,n=1)=>o>n?n:o<a?a:o,round$4=(o,a=0,n=Math.pow(10,a))=>Math.round(n*o)/n,hexToHsva=o=>rgbaToHsva(hexToRgba(o)),hexToRgba=o=>(o[0]==="#"&&(o=o.substring(1)),o.length<6?{r:parseInt(o[0]+o[0],16),g:parseInt(o[1]+o[1],16),b:parseInt(o[2]+o[2],16),a:o.length===4?round$4(parseInt(o[3]+o[3],16)/255,2):1}:{r:parseInt(o.substring(0,2),16),g:parseInt(o.substring(2,4),16),b:parseInt(o.substring(4,6),16),a:o.length===8?round$4(parseInt(o.substring(6,8),16)/255,2):1}),hsvaToHex=o=>rgbaToHex(hsvaToRgba(o)),hsvaToHsla=({h:o,s:a,v:n,a:s})=>{const l=(200-a)*n/100;return{h:round$4(o),s:round$4(l>0&&l<200?a*n/100/(l<=100?l:200-l)*100:0),l:round$4(l/2),a:round$4(s,2)}},hsvaToHslString=o=>{const{h:a,s:n,l:s}=hsvaToHsla(o);return`hsl(${a}, ${n}%, ${s}%)`},hsvaToRgba=({h:o,s:a,v:n,a:s})=>{o=o/360*6,a=a/100,n=n/100;const l=Math.floor(o),c=n*(1-a),u=n*(1-(o-l)*a),d=n*(1-(1-o+l)*a),h=l%6;return{r:round$4([n,u,c,c,d,n][h]*255),g:round$4([d,n,n,u,c,c][h]*255),b:round$4([c,c,d,n,n,u][h]*255),a:round$4(s,2)}},format$2=o=>{const a=o.toString(16);return a.length<2?"0"+a:a},rgbaToHex=({r:o,g:a,b:n,a:s})=>{const l=s<1?format$2(round$4(s*255)):"";return"#"+format$2(o)+format$2(a)+format$2(n)+l},rgbaToHsva=({r:o,g:a,b:n,a:s})=>{const l=Math.max(o,a,n),c=l-Math.min(o,a,n),u=c?l===o?(a-n)/c:l===a?2+(n-o)/c:4+(o-a)/c:0;return{h:round$4(60*(u<0?u+6:u)),s:round$4(l?c/l*100:0),v:round$4(l/255*100),a:s}},equalColorObjects=(o,a)=>{if(o===a)return!0;for(const n in o)if(o[n]!==a[n])return!1;return!0},equalHex=(o,a)=>o.toLowerCase()===a.toLowerCase()?!0:equalColorObjects(hexToRgba(o),hexToRgba(a)),cache={},tpl=o=>{let a=cache[o];return a||(a=document.createElement("template"),a.innerHTML=o,cache[o]=a),a},fire=(o,a,n)=>{o.dispatchEvent(new CustomEvent(a,{bubbles:!0,detail:n}))};let hasTouched=!1;const isTouch=o=>"touches"in o,isValid=o=>hasTouched&&!isTouch(o)?!1:(hasTouched||(hasTouched=isTouch(o)),!0),pointerMove=(o,a)=>{const n=isTouch(a)?a.touches[0]:a,s=o.el.getBoundingClientRect();fire(o.el,"move",o.getMove({x:clamp$2((n.pageX-(s.left+window.pageXOffset))/s.width),y:clamp$2((n.pageY-(s.top+window.pageYOffset))/s.height)}))},keyMove=(o,a)=>{const n=a.keyCode;n>40||o.xy&&n<37||n<33||(a.preventDefault(),fire(o.el,"move",o.getMove({x:n===39?.01:n===37?-.01:n===34?.05:n===33?-.05:n===35?1:n===36?-1:0,y:n===40?.01:n===38?-.01:0},!0)))};let Slider$1=class{constructor(a,n,s,l){const c=tpl(`<div role="slider" tabindex="0" part="${n}" ${s}><div part="${n}-pointer"></div></div>`);a.appendChild(c.content.cloneNode(!0));const u=a.querySelector(`[part=${n}]`);u.addEventListener("mousedown",this),u.addEventListener("touchstart",this),u.addEventListener("keydown",this),this.el=u,this.xy=l,this.nodes=[u.firstChild,u]}set dragging(a){const n=a?document.addEventListener:document.removeEventListener;n(hasTouched?"touchmove":"mousemove",this),n(hasTouched?"touchend":"mouseup",this)}handleEvent(a){switch(a.type){case"mousedown":case"touchstart":if(a.preventDefault(),!isValid(a)||!hasTouched&&a.button!=0)return;this.el.focus(),pointerMove(this,a),this.dragging=!0;break;case"mousemove":case"touchmove":a.preventDefault(),pointerMove(this,a);break;case"mouseup":case"touchend":this.dragging=!1;break;case"keydown":keyMove(this,a);break}}style(a){a.forEach((n,s)=>{for(const l in n)this.nodes[s].style.setProperty(l,n[l])})}};class Hue extends Slider$1{constructor(a){super(a,"hue",'aria-label="Hue" aria-valuemin="0" aria-valuemax="360"',!1)}update({h:a}){this.h=a,this.style([{left:`${a/360*100}%`,color:hsvaToHslString({h:a,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuenow",`${round$4(a)}`)}getMove(a,n){return{h:n?clamp$2(this.h+a.x*360,0,360):360*a.x}}}class Saturation extends Slider$1{constructor(a){super(a,"saturation",'aria-label="Color"',!0)}update(a){this.hsva=a,this.style([{top:`${100-a.v}%`,left:`${a.s}%`,color:hsvaToHslString(a)},{"background-color":hsvaToHslString({h:a.h,s:100,v:100,a:1})}]),this.el.setAttribute("aria-valuetext",`Saturation ${round$4(a.s)}%, Brightness ${round$4(a.v)}%`)}getMove(a,n){return{s:n?clamp$2(this.hsva.s+a.x*100,0,100):a.x*100,v:n?clamp$2(this.hsva.v-a.y*100,0,100):Math.round(100-a.y*100)}}}const css=':host{display:flex;flex-direction:column;position:relative;width:200px;height:200px;user-select:none;-webkit-user-select:none;cursor:default}:host([hidden]){display:none!important}[role=slider]{position:relative;touch-action:none;user-select:none;-webkit-user-select:none;outline:0}[role=slider]:last-child{border-radius:0 0 8px 8px}[part$=pointer]{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;display:flex;place-content:center center;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}[part$=pointer]::after{content:"";width:100%;height:100%;border-radius:inherit;background-color:currentColor}[role=slider]:focus [part$=pointer]{transform:translate(-50%,-50%) scale(1.1)}',hueCss="[part=hue]{flex:0 0 24px;background:linear-gradient(to right,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red 100%)}[part=hue-pointer]{top:50%;z-index:2}",saturationCss="[part=saturation]{flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(to top,#000,transparent),linear-gradient(to right,#fff,rgba(255,255,255,0));box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}[part=saturation-pointer]{z-index:3}",$isSame=Symbol("same"),$color=Symbol("color"),$hsva=Symbol("hsva"),$update=Symbol("update"),$parts=Symbol("parts"),$css=Symbol("css"),$sliders=Symbol("sliders");let ColorPicker$1=class extends HTMLElement{static get observedAttributes(){return["color"]}get[$css](){return[css,hueCss,saturationCss]}get[$sliders](){return[Saturation,Hue]}get color(){return this[$color]}set color(a){if(!this[$isSame](a)){const n=this.colorModel.toHsva(a);this[$update](n),this[$color]=a}}constructor(){super();const a=tpl(`<style>${this[$css].join("")}</style>`),n=this.attachShadow({mode:"open"});n.appendChild(a.content.cloneNode(!0)),n.addEventListener("move",this),this[$parts]=this[$sliders].map(s=>new s(n))}connectedCallback(){if(this.hasOwnProperty("color")){const a=this.color;delete this.color,this.color=a}else this.color||(this.color=this.colorModel.defaultColor)}attributeChangedCallback(a,n,s){const l=this.colorModel.fromAttr(s);this[$isSame](l)||(this.color=l)}handleEvent(a){const n=this[$hsva],s={...n,...a.detail};this[$update](s);let l;!equalColorObjects(s,n)&&!this[$isSame](l=this.colorModel.fromHsva(s))&&(this[$color]=l,fire(this,"color-changed",{value:l}))}[$isSame](a){return this.color&&this.colorModel.equal(a,this.color)}[$update](a){this[$hsva]=a,this[$parts].forEach(n=>n.update(a))}};const colorModel={defaultColor:"#000",toHsva:hexToHsva,fromHsva:({h:o,s:a,v:n})=>hsvaToHex({h:o,s:a,v:n,a:1}),equal:equalHex,fromAttr:o=>o};class HexBase extends ColorPicker$1{get colorModel(){return colorModel}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ViewCollection extends Collection{constructor(n=[]){super(n,{idProperty:"viewUid"});M(this,"_parentElement");this.on("add",(s,l,c)=>{this._renderViewIntoCollectionParent(l,c)}),this.on("remove",(s,l)=>{l.element&&this._parentElement&&l.element.remove()}),this._parentElement=null}destroy(){this.map(n=>n.destroy())}setParent(n){this._parentElement=n;for(const s of this)this._renderViewIntoCollectionParent(s)}delegate(...n){if(!n.length||!isStringArray(n))throw new CKEditorError("ui-viewcollection-delegate-wrong-events",this);return{to:s=>{for(const l of this)for(const c of n)l.delegate(c).to(s);this.on("add",(l,c)=>{for(const u of n)c.delegate(u).to(s)}),this.on("remove",(l,c)=>{for(const u of n)c.stopDelegating(u,s)})}}}_renderViewIntoCollectionParent(n,s){n.isRendered||n.render(),n.element&&this._parentElement&&this._parentElement.insertBefore(n.element,this._parentElement.children[s])}remove(n){return super.remove(n)}}function isStringArray(o){return o.every(a=>typeof a=="string")}const xhtmlNs="http://www.w3.org/1999/xhtml";class Template extends EmitterMixin(){constructor(n){super();M(this,"ns");M(this,"tag");M(this,"text");M(this,"attributes");M(this,"children");M(this,"eventListeners");M(this,"_isRendered");M(this,"_revertData");Object.assign(this,normalize$4(clone$5(n))),this._isRendered=!1,this._revertData=null}render(){const n=this._renderNode({intoFragment:!0});return this._isRendered=!0,n}apply(n){return this._revertData=getEmptyRevertData(),this._renderNode({node:n,intoFragment:!1,isApplying:!0,revertData:this._revertData}),n}revert(n){if(!this._revertData)throw new CKEditorError("ui-template-revert-not-applied",[this,n]);this._revertTemplateFromNode(n,this._revertData)}*getViews(){function*n(s){if(s.children)for(const l of s.children)isView(l)?yield l:isTemplate(l)&&(yield*n(l))}yield*n(this)}static bind(n,s){return{to(l,c){return new TemplateToBinding({eventNameOrFunction:l,attribute:l,observable:n,emitter:s,callback:c})},if(l,c,u){return new TemplateIfBinding({observable:n,emitter:s,attribute:l,valueIfTrue:c,callback:u})}}}static extend(n,s){if(n._isRendered)throw new CKEditorError("template-extend-render",[this,n]);extendTemplate(n,normalize$4(clone$5(s)))}_renderNode(n){let s;if(n.node?s=this.tag&&this.text:s=this.tag?this.text:!this.text,s)throw new CKEditorError("ui-template-wrong-syntax",this);return this.text?this._renderText(n):this._renderElement(n)}_renderElement(n){let s=n.node;return s||(s=n.node=document.createElementNS(this.ns||xhtmlNs,this.tag)),this._renderAttributes(n),this._renderElementChildren(n),this._setUpListeners(n),s}_renderText(n){let s=n.node;return s?n.revertData.text=s.textContent:s=n.node=document.createTextNode(""),hasTemplateBinding(this.text)?this._bindToObservable({schema:this.text,updater:getTextUpdater(s),data:n}):s.textContent=this.text.join(""),s}_renderAttributes(n){if(!this.attributes)return;const s=n.node,l=n.revertData;for(const c in this.attributes){const u=s.getAttribute(c),d=this.attributes[c];l&&(l.attributes[c]=u);const h=isNamespaced(d)?d[0].ns:null;if(hasTemplateBinding(d)){const f=isNamespaced(d)?d[0].value:d;l&&shouldExtend(c)&&f.unshift(u),this._bindToObservable({schema:f,updater:getAttributeUpdater(s,c,h),data:n})}else if(c=="style"&&typeof d[0]!="string")this._renderStyleAttribute(d[0],n);else{l&&u&&shouldExtend(c)&&d.unshift(u);const f=d.map(p=>p&&(p.value||p)).reduce((p,g)=>p.concat(g),[]).reduce(arrayValueReducer,"");isFalsy(f)||s.setAttributeNS(h,c,f)}}}_renderStyleAttribute(n,s){const l=s.node;for(const c in n){const u=n[c];hasTemplateBinding(u)?this._bindToObservable({schema:[u],updater:getStyleUpdater(l,c),data:s}):l.style[c]=u}}_renderElementChildren(n){const s=n.node,l=n.intoFragment?document.createDocumentFragment():s,c=n.isApplying;let u=0;for(const d of this.children)if(isViewCollection(d)){if(!c){d.setParent(s);for(const h of d)l.appendChild(h.element)}}else if(isView(d))c||(d.isRendered||d.render(),l.appendChild(d.element));else if(isNode(d))l.appendChild(d);else if(c){const h=n.revertData,f=getEmptyRevertData();h.children.push(f),d._renderNode({intoFragment:!1,node:l.childNodes[u++],isApplying:!0,revertData:f})}else l.appendChild(d.render());n.intoFragment&&s.appendChild(l)}_setUpListeners(n){if(this.eventListeners)for(const s in this.eventListeners){const l=this.eventListeners[s].map(c=>{const[u,d]=s.split("@");return c.activateDomEventListener(u,d,n)});n.revertData&&n.revertData.bindings.push(l)}}_bindToObservable({schema:n,updater:s,data:l}){const c=l.revertData;syncValueSchemaValue(n,s,l);const u=n.filter(d=>!isFalsy(d)).filter(d=>d.observable).map(d=>d.activateAttributeListener(n,s,l));c&&c.bindings.push(u)}_revertTemplateFromNode(n,s){for(const c of s.bindings)for(const u of c)u();if(s.text){n.textContent=s.text;return}const l=n;for(const c in s.attributes){const u=s.attributes[c];u===null?l.removeAttribute(c):l.setAttribute(c,u)}for(let c=0;c<s.children.length;++c)this._revertTemplateFromNode(l.childNodes[c],s.children[c])}}class TemplateBinding{constructor(a){M(this,"attribute");M(this,"observable");M(this,"emitter");M(this,"callback");this.attribute=a.attribute,this.observable=a.observable,this.emitter=a.emitter,this.callback=a.callback}getValue(a){const n=this.observable[this.attribute];return this.callback?this.callback(n,a):n}activateAttributeListener(a,n,s){const l=()=>syncValueSchemaValue(a,n,s);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,l),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,l)}}}class TemplateToBinding extends TemplateBinding{constructor(n){super(n);M(this,"eventNameOrFunction");this.eventNameOrFunction=n.eventNameOrFunction}activateDomEventListener(n,s,l){const c=(u,d)=>{(!s||d.target.matches(s))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(d):this.observable.fire(this.eventNameOrFunction,d))};return this.emitter.listenTo(l.node,n,c),()=>{this.emitter.stopListening(l.node,n,c)}}}class TemplateIfBinding extends TemplateBinding{constructor(n){super(n);M(this,"valueIfTrue");this.valueIfTrue=n.valueIfTrue}getValue(n){const s=super.getValue(n);return isFalsy(s)?!1:this.valueIfTrue||!0}}function hasTemplateBinding(o){return o?(o.value&&(o=o.value),Array.isArray(o)?o.some(hasTemplateBinding):o instanceof TemplateBinding):!1}function getValueSchemaValue(o,a){return o.map(n=>n instanceof TemplateBinding?n.getValue(a):n)}function syncValueSchemaValue(o,a,{node:n}){const s=getValueSchemaValue(o,n);let l;o.length==1&&o[0]instanceof TemplateIfBinding?l=s[0]:l=s.reduce(arrayValueReducer,""),isFalsy(l)?a.remove():a.set(l)}function getTextUpdater(o){return{set(a){o.textContent=a},remove(){o.textContent=""}}}function getAttributeUpdater(o,a,n){return{set(s){o.setAttributeNS(n,a,s)},remove(){o.removeAttributeNS(n,a)}}}function getStyleUpdater(o,a){return{set(n){o.style[a]=n},remove(){o.style[a]=null}}}function clone$5(o){return cloneDeepWith(o,n=>{if(n&&(n instanceof TemplateBinding||isTemplate(n)||isView(n)||isViewCollection(n)))return n})}function normalize$4(o){if(typeof o=="string"?o=normalizePlainTextDefinition(o):o.text&&normalizeTextDefinition(o),o.on&&(o.eventListeners=normalizeListeners(o.on),delete o.on),!o.text){o.attributes&&normalizeAttributes(o.attributes);const a=[];if(o.children)if(isViewCollection(o.children))a.push(o.children);else for(const n of o.children)isTemplate(n)||isView(n)||isNode(n)?a.push(n):a.push(new Template(n));o.children=a}return o}function normalizeAttributes(o){for(const a in o)o[a].value&&(o[a].value=toArray$2(o[a].value)),arrayify(o,a)}function normalizeListeners(o){for(const a in o)arrayify(o,a);return o}function normalizePlainTextDefinition(o){return{text:[o]}}function normalizeTextDefinition(o){o.text=toArray$2(o.text)}function arrayify(o,a){o[a]=toArray$2(o[a])}function arrayValueReducer(o,a){return isFalsy(a)?o:isFalsy(o)?a:`${o} ${a}`}function extendObjectValueArray(o,a){for(const n in a)o[n]?o[n].push(...a[n]):o[n]=a[n]}function extendTemplate(o,a){if(a.attributes&&(o.attributes||(o.attributes={}),extendObjectValueArray(o.attributes,a.attributes)),a.eventListeners&&(o.eventListeners||(o.eventListeners={}),extendObjectValueArray(o.eventListeners,a.eventListeners)),a.text&&o.text.push(...a.text),a.children&&a.children.length){if(o.children.length!=a.children.length)throw new CKEditorError("ui-template-extend-children-mismatch",o);let n=0;for(const s of a.children)extendTemplate(o.children[n++],s)}}function isFalsy(o){return!o&&o!==0}function isView(o){return o instanceof View$1}function isTemplate(o){return o instanceof Template}function isViewCollection(o){return o instanceof ViewCollection}function isNamespaced(o){return isObject$6(o[0])&&o[0].ns}function getEmptyRevertData(){return{children:[],bindings:[],attributes:{}}}function shouldExtend(o){return o=="class"||o=="style"}let View$1=class extends DomEmitterMixin(ObservableMixin()){constructor(n){super();M(this,"element");M(this,"isRendered");M(this,"locale");M(this,"t");M(this,"template");M(this,"_viewCollections");M(this,"_unboundChildren");M(this,"_bindTemplate");this.element=null,this.isRendered=!1,this.locale=n,this.t=n&&n.t,this._viewCollections=new Collection,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(s,l)=>{l.locale=n,l.t=n&&n.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Template.bind(this,this)}createCollection(n){const s=new ViewCollection(n);return this._viewCollections.add(s),s}registerChild(n){isIterable$1(n)||(n=[n]);for(const s of n)this._unboundChildren.add(s)}deregisterChild(n){isIterable$1(n)||(n=[n]);for(const s of n)this._unboundChildren.remove(s)}setTemplate(n){this.template=new Template(n)}extendTemplate(n){Template.extend(this.template,n)}render(){if(this.isRendered)throw new CKEditorError("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(n=>n.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function clickOutsideHandler({emitter:o,activator:a,callback:n,contextElements:s,listenerOptions:l}){o.listenTo(document,"mousedown",(c,u)=>{if(!a())return;const d=typeof u.composedPath=="function"?u.composedPath():[],h=typeof s=="function"?s():s;for(const f of h)if(f.contains(u.target)||d.includes(f))return;n()},l)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function CssTransitionDisablerMixin(o){class a extends o{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...s){super(...s),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function submitHandler({view:o}){o.listenTo(o.element,"submit",(a,n)=>{n.preventDefault(),o.fire("submit")},{useCapture:!0})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function addKeyboardHandlingForGrid({keystrokeHandler:o,focusTracker:a,gridItems:n,numberOfColumns:s,uiLanguageDirection:l}){const c=typeof s=="number"?()=>s:s;o.set("arrowright",u((f,p)=>l==="rtl"?h(f,p.length):d(f,p.length))),o.set("arrowleft",u((f,p)=>l==="rtl"?d(f,p.length):h(f,p.length))),o.set("arrowup",u((f,p)=>{let g=f-c();return g<0&&(g=f+c()*Math.floor(p.length/c()),g>p.length-1&&(g-=c())),g})),o.set("arrowdown",u((f,p)=>{let g=f+c();return g>p.length-1&&(g=f%c()),g}));function u(f){return p=>{const g=n.find(w=>w.element===a.focusedElement),v=n.getIndex(g),b=f(v,n);n.get(b).focus(),p.stopPropagation(),p.preventDefault()}}function d(f,p){return f===p-1?0:f+1}function h(f,p){return f===0?p-1:f-1}}const sr=class sr extends View$1{constructor(){super();const a=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",a.if("isVisible","ck-hidden",n=>!n),"ck-reset_all-excluded",a.if("isColorInherited","ck-icon_inherit-color")],viewBox:a.to("viewBox"),"aria-hidden":!0}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){const n=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),s=n.getAttribute("viewBox");s&&(this.viewBox=s);for(const{name:l,value:c}of Array.from(n.attributes))sr.presentationalAttributeNames.includes(l)&&this.element.setAttribute(l,c);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;n.childNodes.length>0;)this.element.appendChild(n.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(a=>{a.style.fill=this.fillColor})}};M(sr,"presentationalAttributeNames",["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"]);let IconView=sr;class ButtonLabelView extends View$1{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});const a=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:a.to("style"),id:a.to("id")},children:[{text:a.to("text")}]})}}class ButtonView extends View$1{constructor(n,s=new ButtonLabelView){super(n);M(this,"children");M(this,"labelView");M(this,"iconView");M(this,"keystrokeView");M(this,"_focusDelayed",null);const l=this.bindTemplate,c=uid();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${c}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(s),this.iconView=new IconView,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));const u={tag:"button",attributes:{class:["ck","ck-button",l.to("class"),l.if("isEnabled","ck-disabled",d=>!d),l.if("isVisible","ck-hidden",d=>!d),l.to("isOn",d=>d?"ck-on":"ck-off"),l.if("withText","ck-button_with-text"),l.if("withKeystroke","ck-button_with-keystroke")],role:l.to("role"),type:l.to("type",d=>d||"button"),tabindex:l.to("tabindex"),"aria-checked":l.to("_ariaChecked"),"aria-pressed":l.to("_ariaPressed"),"aria-label":l.to("ariaLabel"),"aria-labelledby":l.to("ariaLabelledBy"),"aria-disabled":l.if("isEnabled",!0,d=>!d),"data-cke-tooltip-text":l.to("_tooltipString"),"data-cke-tooltip-position":l.to("tooltipPosition")},children:this.children,on:{click:l.to(d=>{this.isEnabled?this.fire("execute"):d.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(d,h,f)=>!h||isCheckableRole(f)?!1:String(!!d)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(d,h,f)=>!h||!isCheckableRole(f)?!1:String(!!d)),env$1.isSafari&&(this._focusDelayed||(this._focusDelayed=delay(()=>this.focus(),0)),u.on.mousedown=l.to(()=>{this._focusDelayed()}),u.on.mouseup=l.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(u)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(n){return n.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),n}_createKeystrokeView(){const n=new View$1;return n.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",s=>getEnvKeystrokeText(s))}]}),n}_getTooltipString(n,s,l){return n?typeof n=="string"?n:(l&&(l=getEnvKeystrokeText(l)),n instanceof Function?n(s,l):`${s}${l?` (${l})`:""}`):""}}function isCheckableRole(o){switch(o){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}class FormHeaderView extends View$1{constructor(n,s={}){super(n);M(this,"children");M(this,"iconView");const l=this.bindTemplate;this.set("label",s.label||""),this.set("class",s.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",l.to("class")]},children:this.children}),s.icon&&(this.iconView=new IconView,this.iconView.content=s.icon,this.children.add(this.iconView));const c=new View$1(n);c.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:l.to("label")}]}),this.children.add(c)}}class FocusCycler extends EmitterMixin(){constructor(n){super();M(this,"focusables");M(this,"focusTracker");M(this,"keystrokeHandler");M(this,"actions");if(this.focusables=n.focusables,this.focusTracker=n.focusTracker,this.keystrokeHandler=n.keystrokeHandler,this.actions=n.actions,n.actions&&n.keystrokeHandler)for(const s in n.actions){let l=n.actions[s];typeof l=="string"&&(l=[l]);for(const c of l)n.keystrokeHandler.set(c,(u,d)=>{this[s](),d()},n.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(isDomFocusable)||null}get last(){return this.focusables.filter(isDomFocusable).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let n=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((s,l)=>{const c=s.element===this.focusTracker.focusedElement;return c&&(n=l),c}),n)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){const n=this.next;if(n&&this.focusables.getIndex(n)===this.current){this.fire("forwardCycle");return}n===this.first?this.fire("forwardCycle"):this._focus(n,1)}focusPrevious(){const n=this.previous;if(n&&this.focusables.getIndex(n)===this.current){this.fire("backwardCycle");return}n===this.last?this.fire("backwardCycle"):this._focus(n,-1)}chain(n){const s=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(n,"forwardCycle",l=>{const c=s();this.focusNext(),c!==s()&&l.stop()},{priority:"low"}),this.listenTo(n,"backwardCycle",l=>{const c=s();this.focusPrevious(),c!==s()&&l.stop()},{priority:"low"})}unchain(n){this.stopListening(n)}_focus(n,s){n&&this.focusTracker.focusedElement!==n.element&&n.focus(s)}_getDomFocusableItem(n){const s=this.focusables.length;if(!s)return null;const l=this.current;if(l===null)return this[n===1?"first":"last"];let c=this.focusables.get(l),u=(l+s+n)%s;do{const d=this.focusables.get(u);if(isDomFocusable(d)){c=d;break}u=(u+s+n)%s}while(u!==l);return c}}function isDomFocusable(o){return isFocusable(o)&&isVisible(o.element)}function isFocusable(o){return"focus"in o&&typeof o.focus=="function"}function isViewWithFocusCycler(o){return isFocusable(o)&&"focusCycler"in o&&o.focusCycler instanceof FocusCycler}function DraggableViewMixin(o){class a extends o{constructor(...l){super(...l);M(this,"_onDragBound",this._onDrag.bind(this));M(this,"_onDragEndBound",this._onDragEnd.bind(this));M(this,"_lastDraggingCoordinates",{x:0,y:0});this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(global$1.document,"mouseup",this._onDragEndBound),this.listenTo(global$1.document,"touchend",this._onDragEndBound),this.listenTo(global$1.document,"mousemove",this._onDragBound),this.listenTo(global$1.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(global$1.document,"mouseup",this._onDragEndBound),this.stopListening(global$1.document,"touchend",this._onDragEndBound),this.stopListening(global$1.document,"mousemove",this._onDragBound),this.stopListening(global$1.document,"touchmove",this._onDragBound)}_onDragStart(l,c){if(!this._isHandleElementPressed(c))return;this._attachDragListeners();let u=0,d=0;c instanceof MouseEvent?(u=c.clientX,d=c.clientY):(u=c.touches[0].clientX,d=c.touches[0].clientY),this._lastDraggingCoordinates={x:u,y:d},this.isDragging=!0}_onDrag(l,c){if(!this.isDragging){this._detachDragListeners();return}let u=0,d=0;c instanceof MouseEvent?(u=c.clientX,d=c.clientY):(u=c.touches[0].clientX,d=c.touches[0].clientY),c.preventDefault(),this.fire("drag",{deltaX:Math.round(u-this._lastDraggingCoordinates.x),deltaY:Math.round(d-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:u,y:d}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(l){return this.dragHandleElement?this.dragHandleElement===l.target||l.target instanceof HTMLElement&&this.dragHandleElement.contains(l.target):!1}}return a}class DialogActionsView extends View$1{constructor(n){super(n);M(this,"children");M(this,"keystrokes");M(this,"focusCycler");M(this,"_focusTracker");M(this,"_focusables");this.children=this.createCollection(),this.keystrokes=new KeystrokeHandler,this._focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(n){for(const s of n){const l=new ButtonView(this.locale);let c;l.on("execute",()=>s.onExecute()),s.onCreate&&s.onCreate(l);for(c in s)c!="onExecute"&&c!="onCreate"&&l.set(c,s[c]);this.children.add(l)}this._updateFocusCyclableItems()}focus(n){n===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(n=>{this._focusables.add(n),this._focusTracker.add(n.element)})}}class DialogContentView extends View$1{constructor(n){super(n);M(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}}const DialogViewPosition={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},toPx$6=toUnit("px"),lr=class lr extends DraggableViewMixin(View$1){constructor(n,{getCurrentDomRoot:s,getViewportOffset:l,keystrokeHandlerOptions:c}){super(n);M(this,"parts");M(this,"headerView");M(this,"closeButtonView");M(this,"actionsView");M(this,"contentView");M(this,"keystrokes");M(this,"focusTracker");M(this,"wasMoved",!1);M(this,"_getCurrentDomRoot");M(this,"_getViewportOffset");M(this,"_focusables");M(this,"_focusCycler");const u=this.bindTemplate,d=n.t;this.set("className",""),this.set("ariaLabel",d("Editor dialog")),this.set("isModal",!1),this.set("position",DialogViewPosition.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=s,this._getViewportOffset=l,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"},keystrokeHandlerOptions:c}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",u.if("isModal","ck-dialog-overlay__transparent",h=>!h),u.if("_isVisible","ck-hidden",h=>!h)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",u.if("isModal","ck-dialog_modal"),u.to("className")],role:"dialog","aria-label":u.to("ariaLabel"),style:{top:u.to("_top",h=>toPx$6(h)),left:u.to("_left",h=>toPx$6(h)),visibility:u.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(n,s)=>{n.defaultPrevented||(this.fire("close",{source:"escKeyPress"}),s())}),this.on("drag",(n,{deltaX:s,deltaY:l})=>{this.wasMoved=!0,this.moveBy(s,l)}),this.listenTo(global$1.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(global$1.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(n,s,l)=>{l&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:n,title:s,hasCloseButton:l=!0,content:c,actionButtons:u}){s&&(this.headerView=new FormHeaderView(this.locale,{icon:n}),l&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=s,this.ariaLabel=s,this.parts.add(this.headerView,0)),c&&(c instanceof View$1&&(c=[c]),this.contentView=new DialogContentView(this.locale),this.contentView.children.addMany(c),this.parts.add(this.contentView)),u&&(this.actionsView=new DialogActionsView(this.locale),this.actionsView.setButtons(u),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(n,s){const l=this._getViewportRect(),c=this._getDialogRect();n+c.width>l.right&&(n=l.right-c.width),n<l.left&&(n=l.left),s<l.top&&(s=l.top),this._moveTo(n,s)}_moveTo(n,s){this._left=n,this._top=s}moveBy(n,s){this.moveTo(this._left+n,this._top+s)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;const n=this._getViewportRect();let s=this.position,l;this._getCurrentDomRoot()?l=this._getVisibleDomRootRect(n):s=DialogViewPosition.SCREEN_CENTER;const c=lr.defaultOffset,u=this._getDialogRect();switch(s){case DialogViewPosition.EDITOR_TOP_SIDE:{if(l){const d=this.locale.contentLanguageDirection==="ltr"?l.right-u.width-c:l.left+c;this.moveTo(d,l.top+c)}else this._moveOffScreen();break}case DialogViewPosition.EDITOR_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),Math.round(l.top+l.height/2-u.height/2)):this._moveOffScreen();break}case DialogViewPosition.SCREEN_CENTER:{this.moveTo(Math.round((n.width-u.width)/2),Math.round((n.height-u.height)/2));break}case DialogViewPosition.EDITOR_TOP_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.top+c):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BOTTOM_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.bottom-u.height-c):this._moveOffScreen();break}case DialogViewPosition.EDITOR_ABOVE_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.top-u.height-c):this._moveOffScreen();break}case DialogViewPosition.EDITOR_BELOW_CENTER:{l?this.moveTo(Math.round(l.left+l.width/2-u.width/2),l.bottom+c):this._moveOffScreen();break}}}_getVisibleDomRootRect(n){let s=new Rect$3(this._getCurrentDomRoot()).getVisible();if(s){if(s=n.getIntersection(s),!s)return null}else return null;return s}_getDialogRect(){return new Rect$3(this.element.firstElementChild)}_getViewportRect(){const n=new Rect$3(global$1.window);if(this.isModal)return n;const s={top:0,bottom:0,left:0,right:0,...this._getViewportOffset()};return n.top+=s.top,n.height-=s.top,n.bottom-=s.bottom,n.height-=s.bottom,n.left+=s.left,n.right-=s.right,n.width-=s.left+s.right,n}_updateFocusCyclableItems(){const n=[];if(this.contentView)for(const s of this.contentView.children)isFocusable(s)&&n.push(s);this.actionsView&&n.push(this.actionsView),this.closeButtonView&&n.push(this.closeButtonView),n.forEach(s=>{this._focusables.add(s),this.focusTracker.add(s.element),isViewWithFocusCycler(s)&&this._focusCycler.chain(s.focusCycler)})}_createCloseButton(){const n=new ButtonView(this.locale),s=this.locale.t;return n.set({label:s("Close"),tooltip:!0,icon:icons.cancel}),n.on("execute",()=>this.fire("close",{source:"closeButton"})),n}};M(lr,"defaultOffset",15);let DialogView=lr;const $t=class $t extends Plugin{constructor(n){super(n);M(this,"view");M(this,"_onHide");const s=n.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),n.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:s("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),$t._visibleDialogPlugin===this&&this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(n,s)=>{this._show(s)}),this.on("show",(n,s)=>{s.onShow&&s.onShow(this)},{priority:"low"}),this.on("hide",()=>{$t._visibleDialogPlugin&&$t._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){const n=this.editor;n.keystrokes.set("Ctrl+F6",(s,l)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?n.editing.view.focus():this.view.focus(),l())})}_initMultiRootIntegration(){const n=this.editor.model;n.document.on("change:data",()=>{if(!this.view)return;const s=n.document.differ.getChangedRoots();for(const l of s)l.state&&this.view.updatePosition()})}show(n){this.hide(),this.fire(`show:${n.id}`,n)}_show({id:n,icon:s,title:l,hasCloseButton:c=!0,content:u,actionButtons:d,className:h,isModal:f,position:p,onHide:g,keystrokeHandlerOptions:v}){const b=this.editor;this.view=new DialogView(b.locale,{getCurrentDomRoot:()=>b.editing.view.getDomRoot(b.model.document.selection.anchor.root.rootName),getViewportOffset:()=>b.ui.viewportOffset,keystrokeHandlerOptions:v});const w=this.view;w.on("close",()=>{this.hide()}),b.ui.view.body.add(w),b.keystrokes.listenTo(w.element),p||(p=f?DialogViewPosition.SCREEN_CENTER:DialogViewPosition.EDITOR_CENTER),f&&this._lockBodyScroll(),w.set({position:p,_isVisible:!0,className:h,isModal:f}),w.setupParts({icon:s,title:l,hasCloseButton:c,content:u,actionButtons:d}),this.id=n,g&&(this._onHide=g),this.isOpen=!0,$t._visibleDialogPlugin=this}hide(){$t._visibleDialogPlugin&&$t._visibleDialogPlugin.fire(`hide:${$t._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;const n=this.editor,s=this.view;s.isModal&&this._unlockBodyScroll(),s.contentView&&s.contentView.reset(),n.ui.view.body.remove(s),n.ui.focusTracker.remove(s.element),n.keystrokes.stopListening(s.element),s.destroy(),n.editing.view.focus(),this.id=null,this.isOpen=!1,$t._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}};M($t,"_visibleDialogPlugin");let Dialog=$t;class ListItemButtonView extends ButtonView{constructor(n,s=new ButtonLabelView){super(n,s);M(this,"_checkIconHolderView",new CheckIconHolderView);this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});const l=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",l.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(c,u)=>c||u)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",n=>this.isToggleable&&n),this.on("change:_hasCheck",(n,s,l)=>{const{children:c,_checkIconHolderView:u}=this;l?c.add(u,0):c.remove(u)})}}class CheckIconHolderView extends View$1{constructor(){super();M(this,"children");M(this,"_checkIconView",this._createCheckIconView());const n=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",n.to("isOn",s=>s?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(n,s,l)=>{const{children:c,_checkIconView:u}=this;l&&!c.has(u)?c.add(u):!l&&c.has(u)&&c.remove(u)})}_createCheckIconView(){const n=new IconView;return n.content=icons.check,n.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),n}}class MenuBarMenuListItemButtonView extends ListItemButtonView{constructor(a){super(a),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}class LabelView extends View$1{constructor(n){super(n);M(this,"id");this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${uid()}`;const s=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:s.to("for")},children:[{text:s.to("text")}]})}}class AccessibilityHelpContentView extends View$1{constructor(a,n){super(a);const s=a.t,l=new LabelView;l.text=s("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":l.id,role:"document",tabindex:-1},children:[createElement$1(document,"p",{},s("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(n.values())),l]})}focus(){this.element.focus()}_createCategories(a){return a.map(n=>{const s=[createElement$1(document,"h3",{},n.label),...Array.from(n.groups.values()).map(l=>this._createGroup(l)).flat()];return n.description&&s.splice(1,0,createElement$1(document,"p",{},n.description)),createElement$1(document,"section",{},s)})}_createGroup(a){const n=a.keystrokes.sort((l,c)=>l.label.localeCompare(c.label)).map(l=>this._createGroupRow(l)).flat(),s=[createElement$1(document,"dl",{},n)];return a.label&&s.unshift(createElement$1(document,"h4",{},a.label)),s}_createGroupRow(a){const n=this.locale.t,s=createElement$1(document,"dt"),l=createElement$1(document,"dd"),c=normalizeKeystrokeDefinition(a.keystroke),u=[];for(const d of c)u.push(d.map(keystrokeToEnvKbd).join(""));return s.innerHTML=a.label,l.innerHTML=u.join(", ")+(a.mayRequireFn&&env$1.isMac?` ${n("(may require <kbd>Fn</kbd>)")}`:""),[s,l]}}function keystrokeToEnvKbd(o){return getEnvKeystrokeText(o).split("+").map(a=>`<kbd>${a}</kbd>`).join("+")}function normalizeKeystrokeDefinition(o){return typeof o=="string"?[[o]]:typeof o[0]=="string"?[o]:o}var accessibilityIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';class AccessibilityHelp extends Plugin{constructor(){super(...arguments);M(this,"contentView",null)}static get requires(){return[Dialog]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.locale.t;n.ui.componentFactory.add("accessibilityHelp",()=>{const l=this._createButton(ButtonView);return l.set({tooltip:!0,withText:!1,label:s("Accessibility help")}),l}),n.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{const l=this._createButton(MenuBarMenuListItemButtonView);return l.label=s("Accessibility"),l}),n.keystrokes.set("Alt+0",(l,c)=>{this._toggleDialog(),c()}),this._setupRootLabels()}_createButton(n){const s=this.editor,l=s.plugins.get("Dialog"),c=s.locale,u=new n(c);return u.set({keystroke:"Alt+0",icon:accessibilityIcon,isToggleable:!0}),u.on("execute",()=>this._toggleDialog()),u.bind("isOn").to(l,"id",d=>d==="accessibilityHelp"),u}_setupRootLabels(){const n=this.editor,s=n.editing.view,l=n.t;n.ui.on("ready",()=>{s.change(u=>{for(const d of s.document.roots)c(u,d)}),n.on("addRoot",(u,d)=>{const h=n.editing.view.document.getRoot(d.rootName);s.change(f=>c(f,h))},{priority:"low"})});function c(u,d){const f=[d.getAttribute("aria-label"),l("Press %0 for help.",[getEnvKeystrokeText("Alt+0")])].filter(p=>p).join(". ");u.setAttribute("aria-label",f,d)}}_toggleDialog(){const n=this.editor,s=n.plugins.get("Dialog"),l=n.locale.t;this.contentView||(this.contentView=new AccessibilityHelpContentView(n.locale,n.accessibility.keystrokeInfos)),s.id==="accessibilityHelp"?s.hide():s.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:l("Accessibility help"),icon:accessibilityIcon,hasCloseButton:!0,content:this.contentView})}}const Dt=class Dt extends ViewCollection{constructor(n,s=[]){super(s);M(this,"locale");M(this,"_bodyCollectionContainer");this.locale=n}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Template({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render(),(!Dt._bodyWrapper||!Dt._bodyWrapper.isConnected)&&(Dt._bodyWrapper=createElement$1(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(Dt._bodyWrapper)),Dt._bodyWrapper.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove(),Dt._bodyWrapper&&!Dt._bodyWrapper.childElementCount&&(Dt._bodyWrapper.remove(),delete Dt._bodyWrapper)}};M(Dt,"_bodyWrapper");let BodyCollection=Dt;class SwitchButtonView extends ButtonView{constructor(n){super(n);M(this,"toggleSwitchView");this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){const n=new View$1;return n.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),n}}class FileDialogButtonView extends FileDialogViewMixin(ButtonView){}class FileDialogListItemButtonView extends FileDialogViewMixin(ListItemButtonView){}function FileDialogViewMixin(o){class a extends o{constructor(...l){super(...l);M(this,"buttonView");M(this,"_fileInputView");this.buttonView=this,this._fileInputView=new FileInputView(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return a}class FileInputView extends View$1{constructor(a){super(a),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);const n=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:n.to("acceptedType"),multiple:n.to("allowMultipleFiles")},on:{change:n.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}}var dropdownArrowIcon='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';class CollapsibleView extends View$1{constructor(n,s){super(n);M(this,"buttonView");M(this,"children");const l=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),s&&this.children.addMany(s),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",l.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:l.if("isCollapsed","hidden"),"aria-labelledby":l.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){const n=new ButtonView(this.locale),s=n.bindTemplate;return n.set({withText:!0,icon:dropdownArrowIcon}),n.extendTemplate({attributes:{"aria-expanded":s.to("isOn",l=>String(l))}}),n.bind("label").to(this),n.bind("isOn").to(this,"isCollapsed",l=>!l),n.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedColorOptions(o,a){const n=o.t,s={Black:n("Black"),"Dim grey":n("Dim grey"),Grey:n("Grey"),"Light grey":n("Light grey"),White:n("White"),Red:n("Red"),Orange:n("Orange"),Yellow:n("Yellow"),"Light green":n("Light green"),Green:n("Green"),Aquamarine:n("Aquamarine"),Turquoise:n("Turquoise"),"Light blue":n("Light blue"),Blue:n("Blue"),Purple:n("Purple")};return a.map(l=>{const c=s[l.label];return c&&c!=l.label&&(l.label=c),l})}function normalizeColorOptions(o){return o.map(normalizeSingleColorDefinition).filter(a=>!!a)}function normalizeSingleColorDefinition(o){return typeof o=="string"?{model:o,label:o,hasBorder:!1,view:{name:"span",styles:{color:o}}}:{model:o.color,label:o.label||o.color,hasBorder:o.hasBorder===void 0?!1:o.hasBorder,view:{name:"span",styles:{color:`${o.color}`}}}}var checkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035 8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';class ColorTileView extends ButtonView{constructor(a){super(a);const n=this.bindTemplate;this.set("color",void 0),this.set("hasBorder",!1),this.icon=checkIcon,this.extendTemplate({attributes:{style:{backgroundColor:n.to("color",s=>env$1.isMediaForcedColors?null:s)},class:["ck","ck-color-grid__tile",n.if("hasBorder","ck-color-selector__color-tile_bordered")]}})}render(){super.render(),this.iconView.fillColor="hsl(0, 0%, 100%)"}}class ColorGridView extends View$1{constructor(n,s){super(n);M(this,"columns");M(this,"items");M(this,"focusTracker");M(this,"keystrokes");const l=s&&s.colorDefinitions?s.colorDefinitions:[];this.columns=s&&s.columns?s.columns:5;const c={gridTemplateColumns:`repeat( ${this.columns}, 1fr)`};this.set("selectedColor",void 0),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.items.on("add",(u,d)=>{d.isOn=d.color===this.selectedColor}),l.forEach(u=>{const d=new ColorTileView;d.set({color:u.color,label:u.label,tooltip:!0,hasBorder:u.options.hasBorder}),d.on("execute",()=>{this.fire("execute",{value:u.color,hasBorder:u.options.hasBorder,label:u.label})}),this.items.add(d)}),this.setTemplate({tag:"div",children:this.items,attributes:{class:["ck","ck-color-grid"],style:c}}),this.on("change:selectedColor",(u,d,h)=>{for(const f of this.items)f.isOn=f.color===h})}focus(){this.items.length&&this.items.first.focus()}focusLast(){this.items.length&&this.items.last.focus()}render(){super.render();for(const n of this.items)this.focusTracker.add(n.element);this.items.on("add",(n,s)=>{this.focusTracker.add(s.element)}),this.items.on("remove",(n,s)=>{this.focusTracker.remove(s.element)}),this.keystrokes.listenTo(this.element),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:this.columns,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertColor(o,a){if(!o)return"";const n=parseColorString(o);if(!n)return"";if(n.space===a)return o;if(!canConvertParsedColor(n))return"";const l=convert[n.space][a];if(!l)return"";const c=l(n.space==="hex"?n.hexValue:n.values);return formatColorOutput(c,a)}function convertToHex(o){if(!o)return"";const a=parseColorString(o);return a?a.space==="hex"?a.hexValue:convertColor(o,"hex"):"#000"}function registerCustomElement(o,a){customElements.get(o)===void 0&&customElements.define(o,a)}function formatColorOutput(o,a){switch(a){case"hex":return`#${o}`;case"rgb":return`rgb(${o[0]}, ${o[1]}, ${o[2]})`;case"hsl":return`hsl(${o[0]}, ${o[1]}%, ${o[2]}%)`;case"hwb":return`hwb(${o[0]}, ${o[1]}, ${o[2]})`;case"lab":return`lab(${o[0]}% ${o[1]} ${o[2]})`;case"lch":return`lch(${o[0]}% ${o[1]} ${o[2]})`;default:return""}}function parseColorString(o){if(o.startsWith("#")){const n=parse$1(o);return{space:"hex",values:n.values,hexValue:o,alpha:n.alpha}}const a=parse$1(o);return a.space?a:null}function canConvertParsedColor(o){return Object.keys(convert).includes(o.space)}class LabeledFieldView extends View$1{constructor(n,s){super(n);M(this,"fieldView");M(this,"labelView");M(this,"statusView");M(this,"fieldWrapperChildren");const l=`ck-labeled-field-view-${uid()}`,c=`ck-labeled-field-view-status-${uid()}`;this.fieldView=s(this,l,c),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(l),this.statusView=this._createStatusView(c),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(d,h)=>d||h);const u=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",u.to("class"),u.if("isEnabled","ck-disabled",d=>!d),u.if("isEmpty","ck-labeled-field-view_empty"),u.if("isFocused","ck-labeled-field-view_focused"),u.if("placeholder","ck-labeled-field-view_placeholder"),u.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(n){const s=new LabelView(this.locale);return s.for=n,s.bind("text").to(this,"label"),s}_createStatusView(n){const s=new View$1(this.locale),l=this.bindTemplate;return s.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",l.if("errorText","ck-labeled-field-view__status_error"),l.if("_statusText","ck-hidden",c=>!c)],id:n,role:l.if("errorText","alert")},children:[{text:l.to("_statusText")}]}),s}focus(n){this.fieldView.focus(n)}}class InputBase extends View$1{constructor(n){super(n);M(this,"focusTracker");this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new FocusTracker,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);const s=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",s.if("isFocused","ck-input_focused"),s.if("isEmpty","ck-input-text_empty"),s.if("hasError","ck-error")],id:s.to("id"),placeholder:s.to("placeholder"),tabindex:s.to("tabIndex"),readonly:s.to("isReadOnly"),"aria-invalid":s.if("hasError",!0),"aria-describedby":s.to("ariaDescribedById"),"aria-label":s.to("ariaLabel")},on:{input:s.to((...l)=>{this.fire("input",...l),this._updateIsEmpty()}),change:s.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(n,s,l)=>{this._setDomElementValue(l),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=isInputElementEmpty(this.element)}_setDomElementValue(n){this.element.value=!n&&n!==0?"":n}}function isInputElementEmpty(o){return!o.value}class InputView extends InputBase{constructor(a){super(a),this.set("inputMode","text");const n=this.bindTemplate;this.extendTemplate({attributes:{inputmode:n.to("inputMode")}})}}class InputTextView extends InputView{constructor(a){super(a),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}}class InputNumberView extends InputView{constructor(a,{min:n,max:s,step:l}={}){super(a);const c=this.bindTemplate;this.set("min",n),this.set("max",s),this.set("step",l),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:c.to("min"),max:c.to("max"),step:c.to("step")}})}}class DropdownPanelView extends View$1{constructor(n){super(n);M(this,"children");const s=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",s.to("position",l=>`ck-dropdown__panel_${l}`),s.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:s.to(l=>{l.target.tagName.toLocaleLowerCase()!=="input"&&l.preventDefault()})}})}focus(){if(this.children.length){const n=this.children.first;typeof n.focus=="function"?n.focus():logWarning("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){const n=this.children.last;typeof n.focusLast=="function"?n.focusLast():n.focus()}}}const Kt=class Kt extends View$1{constructor(n,s,l){super(n);M(this,"buttonView");M(this,"panelView");M(this,"focusTracker");M(this,"keystrokes");M(this,"listView");M(this,"toolbarView");M(this,"menuView");const c=this.bindTemplate;this.buttonView=s,this.panelView=l,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",c.to("class"),c.if("isEnabled","ck-disabled",u=>!u)],id:c.to("id"),"aria-describedby":c.to("ariaDescribedById")},children:[s,l]}),s.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":c.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(s,l,c)=>{if(c)if(this.panelPosition==="auto"){const u=Kt._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=u?u.name:this._defaultPanelPositionName}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);const n=(s,l)=>{this.isOpen&&(this.isOpen=!1,l())};this.keystrokes.set("arrowdown",(s,l)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,l())}),this.keystrokes.set("arrowright",(s,l)=>{this.isOpen&&l()}),this.keystrokes.set("arrowleft",n),this.keystrokes.set("esc",n)}focus(){this.buttonView.focus()}get _panelPositions(){const{south:n,north:s,southEast:l,southWest:c,northEast:u,northWest:d,southMiddleEast:h,southMiddleWest:f,northMiddleEast:p,northMiddleWest:g}=Kt.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[l,c,h,f,n,u,d,p,g,s]:[c,l,f,h,n,d,u,g,p,s]}get _defaultPanelPositionName(){return this.locale.uiLanguageDirection==="rtl"?"sw":"se"}};M(Kt,"defaultPanelPositions",{south:(n,s)=>({top:n.bottom,left:n.left-(s.width-n.width)/2,name:"s"}),southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,s)=>({top:n.bottom,left:n.left-s.width+n.width,name:"sw"}),southMiddleEast:(n,s)=>({top:n.bottom,left:n.left-(s.width-n.width)/4,name:"sme"}),southMiddleWest:(n,s)=>({top:n.bottom,left:n.left-(s.width-n.width)*3/4,name:"smw"}),north:(n,s)=>({top:n.top-s.height,left:n.left-(s.width-n.width)/2,name:"n"}),northEast:(n,s)=>({top:n.top-s.height,left:n.left,name:"ne"}),northWest:(n,s)=>({top:n.top-s.height,left:n.left-s.width+n.width,name:"nw"}),northMiddleEast:(n,s)=>({top:n.top-s.height,left:n.left-(s.width-n.width)/4,name:"nme"}),northMiddleWest:(n,s)=>({top:n.top-s.height,left:n.left-(s.width-n.width)*3/4,name:"nmw"})}),M(Kt,"_getOptimalPosition",getOptimalPosition);let DropdownView=Kt;class DropdownButtonView extends ButtonView{constructor(n){super(n);M(this,"arrowView");this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",s=>String(s))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const n=new IconView;return n.content=dropdownArrowIcon,n.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),n}}class ListItemView extends View$1{constructor(n){super(n);M(this,"children");const s=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",s.if("isVisible","ck-hidden",l=>!l)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}}class ListSeparatorView extends View$1{constructor(a){super(a),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}}class ListItemGroupView extends View$1{constructor(n,s=new LabelView){super(n);M(this,"labelView");M(this,"items");M(this,"children");const l=this.bindTemplate,c=new ListView(n);this.set({label:"",isVisible:!0}),this.labelView=s,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,c]),c.set({role:"group",ariaLabelledBy:s.id}),c.focusTracker.destroy(),c.keystrokes.destroy(),this.items=c.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",l.if("isVisible","ck-hidden",u=>!u)]},children:this.children})}focus(){if(this.items){const n=this.items.find(s=>!(s instanceof ListSeparatorView));n&&n.focus()}}}class ListView extends View$1{constructor(n){super(n);M(this,"focusables");M(this,"items");M(this,"focusTracker");M(this,"keystrokes");M(this,"_focusCycler");M(this,"_listItemGroupToChangeListeners",new WeakMap);const s=this.bindTemplate;this.focusables=new ViewCollection,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:s.to("role"),"aria-label":s.to("ariaLabel"),"aria-labelledby":s.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(const n of this.items)n instanceof ListItemGroupView?this._registerFocusableItemsGroup(n):n instanceof ListItemView&&this._registerFocusableListItem(n);this.items.on("change",(n,s)=>{for(const l of s.removed)l instanceof ListItemGroupView?this._deregisterFocusableItemsGroup(l):l instanceof ListItemView&&this._deregisterFocusableListItem(l);for(const l of Array.from(s.added).reverse())l instanceof ListItemGroupView?this._registerFocusableItemsGroup(l,s.index):this._registerFocusableListItem(l,s.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(n,s){this.focusTracker.add(n.element),this.focusables.add(n,s)}_deregisterFocusableListItem(n){this.focusTracker.remove(n.element),this.focusables.remove(n)}_getOnGroupItemsChangeCallback(n){return(s,l)=>{for(const c of l.removed)this._deregisterFocusableListItem(c);for(const c of Array.from(l.added).reverse())this._registerFocusableListItem(c,this.items.getIndex(n)+l.index)}}_registerFocusableItemsGroup(n,s){Array.from(n.items).forEach((c,u)=>{const d=typeof s<"u"?s+u:void 0;this._registerFocusableListItem(c,d)});const l=this._getOnGroupItemsChangeCallback(n);this._listItemGroupToChangeListeners.set(n,l),n.items.on("change",l)}_deregisterFocusableItemsGroup(n){for(const s of n.items)this._deregisterFocusableListItem(s);n.items.off("change",this._listItemGroupToChangeListeners.get(n)),this._listItemGroupToChangeListeners.delete(n)}}const toPx$5=toUnit("px"),POSITION_OFF_SCREEN={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},Rt=class Rt extends View$1{constructor(n){super(n);M(this,"content");M(this,"_pinWhenIsVisibleCallback");M(this,"_resizeObserver");const s=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",s.to("position",l=>`ck-balloon-panel_${l}`),s.if("isVisible","ck-balloon-panel_visible"),s.if("withArrow","ck-balloon-panel_with-arrow"),s.to("class")],style:{top:s.to("top",toPx$5),left:s.to("left",toPx$5)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(n){const s=getDomElement(n.target);if(s&&!isVisible(s))return!1;this.show();const l=Rt.defaultPositions,c=Object.assign({},{element:this.element,positions:[l.southArrowNorth,l.southArrowNorthMiddleWest,l.southArrowNorthMiddleEast,l.southArrowNorthWest,l.southArrowNorthEast,l.northArrowSouth,l.northArrowSouthMiddleWest,l.northArrowSouthMiddleEast,l.northArrowSouthWest,l.northArrowSouthEast,l.viewportStickyNorth],limiter:global$1.document.body,fitInViewport:!0},n),u=Rt._getOptimalPosition(c)||POSITION_OFF_SCREEN,d=parseInt(u.left),h=parseInt(u.top),f=u.name,p=u.config||{},{withArrow:g=!0}=p;return this.top=h,this.left=d,this.position=f,this.withArrow=g,!0}pin(n){this.unpin(),this._startPinning(n)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(n):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(n){if(!this.attachTo(n))return!1;let s=getDomElement(n.target);const l=n.limiter?getDomElement(n.limiter):global$1.document.body;if(this.listenTo(global$1.document,"scroll",(c,u)=>{const d=u.target,h=s&&d.contains(s),f=l&&d.contains(l);(h||f||!s||!l)&&this.attachTo(n)},{useCapture:!0}),this.listenTo(global$1.window,"resize",()=>{this.attachTo(n)}),!this._resizeObserver&&(s&&isText(s)&&(s=s.parentElement),s)){const c=()=>{isVisible(s)||this.unpin()};this._resizeObserver=new ResizeObserver$1(s,c)}return!0}_stopPinning(){this.stopListening(global$1.document,"scroll"),this.stopListening(global$1.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(n={}){const{sideOffset:s=Rt.arrowSideOffset,heightOffset:l=Rt.arrowHeightOffset,stickyVerticalOffset:c=Rt.stickyVerticalOffset,config:u}=n;return{northWestArrowSouthWest:(f,p)=>({top:d(f,p),left:f.left-s,name:"arrow_sw",...u&&{config:u}}),northWestArrowSouthMiddleWest:(f,p)=>({top:d(f,p),left:f.left-p.width*.25-s,name:"arrow_smw",...u&&{config:u}}),northWestArrowSouth:(f,p)=>({top:d(f,p),left:f.left-p.width/2,name:"arrow_s",...u&&{config:u}}),northWestArrowSouthMiddleEast:(f,p)=>({top:d(f,p),left:f.left-p.width*.75+s,name:"arrow_sme",...u&&{config:u}}),northWestArrowSouthEast:(f,p)=>({top:d(f,p),left:f.left-p.width+s,name:"arrow_se",...u&&{config:u}}),northArrowSouthWest:(f,p)=>({top:d(f,p),left:f.left+f.width/2-s,name:"arrow_sw",...u&&{config:u}}),northArrowSouthMiddleWest:(f,p)=>({top:d(f,p),left:f.left+f.width/2-p.width*.25-s,name:"arrow_smw",...u&&{config:u}}),northArrowSouth:(f,p)=>({top:d(f,p),left:f.left+f.width/2-p.width/2,name:"arrow_s",...u&&{config:u}}),northArrowSouthMiddleEast:(f,p)=>({top:d(f,p),left:f.left+f.width/2-p.width*.75+s,name:"arrow_sme",...u&&{config:u}}),northArrowSouthEast:(f,p)=>({top:d(f,p),left:f.left+f.width/2-p.width+s,name:"arrow_se",...u&&{config:u}}),northEastArrowSouthWest:(f,p)=>({top:d(f,p),left:f.right-s,name:"arrow_sw",...u&&{config:u}}),northEastArrowSouthMiddleWest:(f,p)=>({top:d(f,p),left:f.right-p.width*.25-s,name:"arrow_smw",...u&&{config:u}}),northEastArrowSouth:(f,p)=>({top:d(f,p),left:f.right-p.width/2,name:"arrow_s",...u&&{config:u}}),northEastArrowSouthMiddleEast:(f,p)=>({top:d(f,p),left:f.right-p.width*.75+s,name:"arrow_sme",...u&&{config:u}}),northEastArrowSouthEast:(f,p)=>({top:d(f,p),left:f.right-p.width+s,name:"arrow_se",...u&&{config:u}}),southWestArrowNorthWest:f=>({top:h(f),left:f.left-s,name:"arrow_nw",...u&&{config:u}}),southWestArrowNorthMiddleWest:(f,p)=>({top:h(f),left:f.left-p.width*.25-s,name:"arrow_nmw",...u&&{config:u}}),southWestArrowNorth:(f,p)=>({top:h(f),left:f.left-p.width/2,name:"arrow_n",...u&&{config:u}}),southWestArrowNorthMiddleEast:(f,p)=>({top:h(f),left:f.left-p.width*.75+s,name:"arrow_nme",...u&&{config:u}}),southWestArrowNorthEast:(f,p)=>({top:h(f),left:f.left-p.width+s,name:"arrow_ne",...u&&{config:u}}),southArrowNorthWest:f=>({top:h(f),left:f.left+f.width/2-s,name:"arrow_nw",...u&&{config:u}}),southArrowNorthMiddleWest:(f,p)=>({top:h(f),left:f.left+f.width/2-p.width*.25-s,name:"arrow_nmw",...u&&{config:u}}),southArrowNorth:(f,p)=>({top:h(f),left:f.left+f.width/2-p.width/2,name:"arrow_n",...u&&{config:u}}),southArrowNorthMiddleEast:(f,p)=>({top:h(f),left:f.left+f.width/2-p.width*.75+s,name:"arrow_nme",...u&&{config:u}}),southArrowNorthEast:(f,p)=>({top:h(f),left:f.left+f.width/2-p.width+s,name:"arrow_ne",...u&&{config:u}}),southEastArrowNorthWest:f=>({top:h(f),left:f.right-s,name:"arrow_nw",...u&&{config:u}}),southEastArrowNorthMiddleWest:(f,p)=>({top:h(f),left:f.right-p.width*.25-s,name:"arrow_nmw",...u&&{config:u}}),southEastArrowNorth:(f,p)=>({top:h(f),left:f.right-p.width/2,name:"arrow_n",...u&&{config:u}}),southEastArrowNorthMiddleEast:(f,p)=>({top:h(f),left:f.right-p.width*.75+s,name:"arrow_nme",...u&&{config:u}}),southEastArrowNorthEast:(f,p)=>({top:h(f),left:f.right-p.width+s,name:"arrow_ne",...u&&{config:u}}),westArrowEast:(f,p)=>({top:f.top+f.height/2-p.height/2,left:f.left-p.width-l,name:"arrow_e",...u&&{config:u}}),eastArrowWest:(f,p)=>({top:f.top+f.height/2-p.height/2,left:f.right+l,name:"arrow_w",...u&&{config:u}}),viewportStickyNorth:(f,p,g,v)=>{const b=v||g;return!f.getIntersection(b)||b.height-f.height>c?null:{top:b.top+c,left:f.left+f.width/2-p.width/2,name:"arrowless",config:{withArrow:!1,...u}}}};function d(f,p){return f.top-p.height-l}function h(f){return f.bottom+l}}};M(Rt,"arrowSideOffset",25),M(Rt,"arrowHeightOffset",10),M(Rt,"stickyVerticalOffset",20),M(Rt,"_getOptimalPosition",getOptimalPosition),M(Rt,"defaultPositions",Rt.generatePositions());let BalloonPanelView=Rt;function getDomElement(o){return isElement$2(o)?o:isRange(o)?o.commonAncestorContainer:typeof o=="function"?getDomElement(o()):null}class ToolbarSeparatorView extends View$1{constructor(a){super(a),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}}class ToolbarLineBreakView extends View$1{constructor(a){super(a),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function preventDefault$1(o){return o.bindTemplate.to(a=>{a.target===o.element&&a.preventDefault()})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeToolbarConfig(o){if(Array.isArray(o))return{items:o,removeItems:[]};const a={items:[],removeItems:[]};return o?{...a,...o}:a}const NESTED_TOOLBAR_ICONS={alignLeft:icons.alignLeft,bold:icons.bold,importExport:icons.importExport,paragraph:icons.paragraph,plus:icons.plus,text:icons.text,threeVerticalDots:icons.threeVerticalDots,pilcrow:icons.pilcrow,dragIndicator:icons.dragIndicator};class ToolbarView extends View$1{constructor(n,s){super(n);M(this,"options");M(this,"items");M(this,"focusTracker");M(this,"keystrokes");M(this,"itemsView");M(this,"children");M(this,"focusables");M(this,"_focusCycler");M(this,"_behavior");const l=this.bindTemplate,c=this.t;this.options=s||{},this.set("ariaLabel",c("Editor toolbar")),this.set("maxWidth","auto"),this.set("role","toolbar"),this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new ItemsView(n),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();const u=n.uiLanguageDirection==="rtl";this._focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[u?"arrowright":"arrowleft","arrowup"],focusNext:[u?"arrowleft":"arrowright","arrowdown"]}});const d=["ck","ck-toolbar",l.to("class"),l.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&d.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:d,role:l.to("role"),"aria-label":l.to("ariaLabel"),style:{maxWidth:l.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:preventDefault$1(this)}}),this._behavior=this.options.shouldGroupWhenFull?new DynamicGrouping(this):new StaticLayout(this)}render(){super.render(),this.focusTracker.add(this.element);for(const n of this.items)this.focusTracker.add(n);this.items.on("add",(n,s)=>{this.focusTracker.add(s)}),this.items.on("remove",(n,s)=>{this.focusTracker.remove(s)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(n,s,l){this.items.addMany(this._buildItemsFromConfig(n,s,l))}_buildItemsFromConfig(n,s,l){const c=normalizeToolbarConfig(n),u=l||c.removeItems;return this._cleanItemsConfiguration(c.items,s,u).map(h=>isObject$6(h)?this._createNestedToolbarDropdown(h,s,u):h==="|"?new ToolbarSeparatorView:h==="-"?new ToolbarLineBreakView:s.create(h)).filter(h=>!!h)}_cleanItemsConfiguration(n,s,l){const c=n.filter((u,d,h)=>u==="|"?!0:l.indexOf(u)!==-1?!1:u==="-"?this.options.shouldGroupWhenFull?(logWarning("toolbarview-line-break-ignored-when-grouping-items",h),!1):!0:!isObject$6(u)&&!s.has(u)?(logWarning("toolbarview-item-unavailable",{item:u}),!1):!0);return this._cleanSeparatorsAndLineBreaks(c)}_cleanSeparatorsAndLineBreaks(n){const s=d=>d!=="-"&&d!=="|",l=n.length,c=n.findIndex(s);if(c===-1)return[];const u=l-n.slice().reverse().findIndex(s);return n.slice(c,u).filter((d,h,f)=>s(d)?!0:!(h>0&&f[h-1]===d))}_createNestedToolbarDropdown(n,s,l){let{label:c,icon:u,items:d,tooltip:h=!0,withText:f=!1}=n;if(d=this._cleanItemsConfiguration(d,s,l),!d.length)return null;const p=this.locale,g=createDropdown(p);return c||logWarning("toolbarview-nested-toolbar-dropdown-missing-label",n),g.class="ck-toolbar__nested-toolbar-dropdown",g.buttonView.set({label:c,tooltip:h,withText:!!f}),u!==!1?g.buttonView.icon=NESTED_TOOLBAR_ICONS[u]||u||icons.threeVerticalDots:g.buttonView.withText=!0,addToolbarToDropdown(g,()=>g.toolbarView._buildItemsFromConfig(d,s,l)),g}}class ItemsView extends View$1{constructor(n){super(n);M(this,"children");this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}}class StaticLayout{constructor(a){const n=a.bindTemplate;a.set("isVertical",!1),a.itemsView.children.bindTo(a.items).using(s=>s),a.focusables.bindTo(a.items).using(s=>isFocusable(s)?s:null),a.extendTemplate({attributes:{class:[n.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}}class DynamicGrouping{constructor(a){M(this,"view");M(this,"viewChildren");M(this,"viewFocusables");M(this,"viewItemsView");M(this,"viewFocusTracker");M(this,"viewLocale");M(this,"ungroupedItems");M(this,"groupedItems");M(this,"groupedItemsDropdown");M(this,"resizeObserver",null);M(this,"cachedPadding",null);M(this,"shouldUpdateGroupingOnNextResize",!1);M(this,"viewElement");this.view=a,this.viewChildren=a.children,this.viewFocusables=a.focusables,this.viewItemsView=a.itemsView,this.viewFocusTracker=a.focusTracker,this.viewLocale=a.locale,this.ungroupedItems=a.createCollection(),this.groupedItems=a.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),a.itemsView.children.bindTo(this.ungroupedItems).using(n=>n),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),a.children.on("change",this._updateFocusCyclableItems.bind(this)),a.items.on("change",(n,s)=>{const l=s.index,c=Array.from(s.added);for(const u of s.removed)l>=this.ungroupedItems.length?this.groupedItems.remove(u):this.ungroupedItems.remove(u);for(let u=l;u<l+c.length;u++){const d=c[u-l];u>this.ungroupedItems.length?this.groupedItems.add(d,u-this.ungroupedItems.length):this.ungroupedItems.add(d,u)}this._updateGrouping()}),a.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(a){this.viewElement=a.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(a)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!isVisible(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}const a=this.groupedItems.length;let n;for(;this._areItemsOverflowing;)this._groupLastItem(),n=!0;if(!n&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==a&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;const a=this.viewElement,n=this.viewLocale.uiLanguageDirection,s=new Rect$3(a.lastChild),l=new Rect$3(a);if(!this.cachedPadding){const c=global$1.window.getComputedStyle(a),u=n==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(c[u])}return n==="ltr"?s.right>l.right-this.cachedPadding:s.left<l.left+this.cachedPadding}_enableGroupingOnResize(){let a;this.resizeObserver=new ResizeObserver$1(this.viewElement,n=>{(!a||a!==n.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),a=n.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(a){a.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new ToolbarSeparatorView),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){const a=this.viewLocale,n=a.t,s=createDropdown(a);return s.class="ck-toolbar__grouped-dropdown",s.panelPosition=a.uiLanguageDirection==="ltr"?"sw":"se",addToolbarToDropdown(s,this.groupedItems),s.buttonView.set({label:n("Show more items"),tooltip:!0,tooltipPosition:a.uiLanguageDirection==="rtl"?"se":"sw",icon:icons.threeVerticalDots}),s}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(a=>{isFocusable(a)&&this.viewFocusables.add(a)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}class SplitButtonView extends View$1{constructor(n,s){super(n);M(this,"children");M(this,"actionView");M(this,"arrowView");M(this,"keystrokes");M(this,"focusTracker");const l=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(s),this.arrowView=this._createArrowView(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",l.to("class"),l.if("isVisible","ck-hidden",c=>!c),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(n,s)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),s())}),this.keystrokes.set("arrowleft",(n,s)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),s())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(n){const s=n||new ButtonView;return n||s.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),s.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),s.delegate("execute").to(this),s}_createArrowView(){const n=new ButtonView,s=n.bindTemplate;return n.icon=dropdownArrowIcon,n.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":s.to("isOn"),"aria-haspopup":!0,"aria-expanded":s.to("isOn",l=>String(l))}}),n.bind("isEnabled").to(this),n.bind("label").to(this),n.bind("tooltip").to(this),n.delegate("execute").to(this,"open"),n}}function createDropdown(o,a=DropdownButtonView){const n=typeof a=="function"?new a(o):a,s=new DropdownPanelView(o),l=new DropdownView(o,n,s);return n.bind("isEnabled").to(l),n instanceof SplitButtonView?n.arrowView.bind("isOn").to(l,"isOpen"):n.bind("isOn").to(l,"isOpen"),addDefaultBehaviors(l),l}function addToolbarToDropdown(o,a,n={}){o.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),o.isOpen?addToolbarToOpenDropdown(o,a,n):o.once("change:isOpen",()=>addToolbarToOpenDropdown(o,a,n),{priority:"highest"}),n.enableActiveItemFocusOnDropdownOpen&&focusChildOnDropdownOpen(o,()=>o.toolbarView.items.find(s=>s.isOn))}function addToolbarToOpenDropdown(o,a,n){const s=o.locale,l=s.t,c=o.toolbarView=new ToolbarView(s),u=typeof a=="function"?a():a;c.ariaLabel=n.ariaLabel||l("Dropdown toolbar"),n.maxWidth&&(c.maxWidth=n.maxWidth),n.class&&(c.class=n.class),n.isCompact&&(c.isCompact=n.isCompact),n.isVertical&&(c.isVertical=!0),u instanceof ViewCollection?c.items.bindTo(u).using(d=>d):c.items.addMany(u),o.panelView.children.add(c),o.focusTracker.add(c),c.items.delegate("execute").to(o)}function addListToDropdown(o,a,n={}){o.isOpen?addListToOpenDropdown(o,a,n):o.once("change:isOpen",()=>addListToOpenDropdown(o,a,n),{priority:"highest"}),focusChildOnDropdownOpen(o,()=>o.listView.items.find(s=>s instanceof ListItemView?s.children.first.isOn:!1))}function addListToOpenDropdown(o,a,n){const s=o.locale,l=o.listView=new ListView(s),c=typeof a=="function"?a():a;l.ariaLabel=n.ariaLabel,l.role=n.role,bindViewCollectionItemsToDefinitions(o,l.items,c,s),o.panelView.children.add(l),l.items.delegate("execute").to(o)}function focusChildOnDropdownOpen(o,a){o.on("change:isOpen",()=>{if(!o.isOpen)return;const n=a();n&&(typeof n.focus=="function"?n.focus():logWarning("ui-dropdown-focus-child-on-open-child-missing-focus",{view:n}))},{priority:priorities.low-10})}function addDefaultBehaviors(o){closeDropdownOnClickOutside(o),closeDropdownOnExecute(o),closeDropdownOnBlur(o),focusDropdownContentsOnArrows(o),focusDropdownButtonOnClose(o),focusDropdownPanelOnOpen(o)}function closeDropdownOnClickOutside(o){clickOutsideHandler({emitter:o,activator:()=>o.isRendered&&o.isOpen,callback:()=>{o.isOpen=!1},contextElements:()=>[o.element,...getFocusTrackerTreeElements(o.focusTracker).filter(a=>!o.element.contains(a))]})}function getFocusTrackerTreeElements(o){return[...o.elements,...o.externalViews.flatMap(a=>getFocusTrackerTreeElements(a.focusTracker))]}function closeDropdownOnExecute(o){o.on("execute",a=>{a.source instanceof SwitchButtonView||(o.isOpen=!1)})}function closeDropdownOnBlur(o){o.focusTracker.on("change:isFocused",(a,n,s)=>{s||!o.isOpen||(o.isOpen=!1)})}function focusDropdownContentsOnArrows(o){o.keystrokes.set("arrowdown",(a,n)=>{o.isOpen&&(o.panelView.focus(),n())}),o.keystrokes.set("arrowup",(a,n)=>{o.isOpen&&(o.panelView.focusLast(),n())})}function focusDropdownButtonOnClose(o){o.on("change:isOpen",(a,n,s)=>{if(s)return;o.focusTracker.elements.some(c=>c.contains(global$1.document.activeElement))&&o.buttonView.focus()})}function focusDropdownPanelOnOpen(o){o.on("change:isOpen",(a,n,s)=>{s&&o.panelView.focus()},{priority:"low"})}function bindViewCollectionItemsToDefinitions(o,a,n,s){a.on("change",()=>{const l=[...a].reduce((u,d)=>(d instanceof ListItemView&&d.children.first instanceof ListItemButtonView&&u.push(d.children.first),u),[]),c=l.some(u=>u.isToggleable);l.forEach(u=>{u.hasCheckSpace=c})}),a.bindTo(n).using(l=>{if(l.type==="separator")return new ListSeparatorView(s);if(l.type==="group"){const c=new ListItemGroupView(s);return c.set({label:l.label}),bindViewCollectionItemsToDefinitions(o,c.items,l.items,s),c.items.delegate("execute").to(o),c}else if(l.type==="button"||l.type==="switchbutton"){const c=l.model.role==="menuitemcheckbox"||l.model.role==="menuitemradio",u=new ListItemView(s);let d;return l.type==="button"?(d=new ListItemButtonView(s),d.set({isToggleable:c})):d=new SwitchButtonView(s),d.bind(...Object.keys(l.model)).to(l.model),d.delegate("execute").to(u),u.children.add(d),u}return null})}const createLabeledInputText=(o,a,n)=>{const s=new InputTextView(o.locale);return s.set({id:a,ariaDescribedById:n}),s.bind("isReadOnly").to(o,"isEnabled",l=>!l),s.bind("hasError").to(o,"errorText",l=>!!l),s.on("input",()=>{o.errorText=null}),o.bind("isEmpty","isFocused","placeholder").to(s),s},createLabeledInputNumber=(o,a,n)=>{const s=new InputNumberView(o.locale);return s.set({id:a,ariaDescribedById:n,inputMode:"numeric"}),s.bind("isReadOnly").to(o,"isEnabled",l=>!l),s.bind("hasError").to(o,"errorText",l=>!!l),s.on("input",()=>{o.errorText=null}),o.bind("isEmpty","isFocused","placeholder").to(s),s},createLabeledDropdown=(o,a,n)=>{const s=createDropdown(o.locale);return s.set({id:a,ariaDescribedById:n}),s.bind("isEnabled").to(o),s},waitingTime=150;class ColorPickerView extends View$1{constructor(n,s={}){super(n);M(this,"hexInputRow");M(this,"_debounceColorPickerEvent");M(this,"_config");this.set({color:"",_hexColor:""}),this.hexInputRow=this._createInputRow();const l=this.createCollection();s.hideInput||l.add(this.hexInputRow),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker"],tabindex:-1},children:l}),this._config=s,this._debounceColorPickerEvent=debounce$1(c=>{this.set("color",c),this.fire("colorSelected",{color:this.color})},waitingTime,{leading:!0}),this.on("set:color",(c,u,d)=>{c.return=convertColor(d,this._config.format||"hsl")}),this.on("change:color",()=>{this._hexColor=convertColorToCommonHexFormat(this.color)}),this.on("change:_hexColor",()=>{document.activeElement!==this.picker&&this.picker.setAttribute("color",this._hexColor),convertColorToCommonHexFormat(this.color)!=convertColorToCommonHexFormat(this._hexColor)&&(this.color=this._hexColor)})}render(){if(super.render(),registerCustomElement("hex-color-picker",HexBase),this.picker=global$1.document.createElement("hex-color-picker"),this.picker.setAttribute("class","hex-color-picker"),this.picker.setAttribute("tabindex","-1"),this._createSlidersView(),this.element){this.hexInputRow.element?this.element.insertBefore(this.picker,this.hexInputRow.element):this.element.appendChild(this.picker);const n=document.createElement("style");n.textContent='[role="slider"]:focus [part$="pointer"] {border: 1px solid #fff;outline: 1px solid var(--ck-color-focus-border);box-shadow: 0 0 0 2px #fff;}',this.picker.shadowRoot.appendChild(n)}this.picker.addEventListener("color-changed",n=>{const s=n.detail.value;this._debounceColorPickerEvent(s)})}focus(){/* istanbul ignore next -- @preserve */!this._config.hideInput&&(env$1.isGecko||env$1.isiOS||env$1.isSafari||env$1.isBlink)&&this.hexInputRow.children.get(1).focus(),this.slidersView.first.focus()}_createSlidersView(){const l=[...this.picker.shadowRoot.children].filter(c=>c.getAttribute("role")==="slider").map(c=>new SliderView(c));this.slidersView=this.createCollection(),l.forEach(c=>{this.slidersView.add(c)})}_createInputRow(){const n=this._createColorInput();return new ColorPickerInputRowView(this.locale,n)}_createColorInput(){const n=new LabeledFieldView(this.locale,createLabeledInputText),{t:s}=this.locale;return n.set({label:s("HEX"),class:"color-picker-hex-input"}),n.fieldView.bind("value").to(this,"_hexColor",l=>n.isFocused?n.fieldView.value:l.startsWith("#")?l.substring(1):l),n.fieldView.on("input",()=>{const l=n.fieldView.element.value;if(l){const c=tryParseHexColor(l);c&&this._debounceColorPickerEvent(c)}}),n}isValid(){const{t:n}=this.locale;return this._config.hideInput?!0:(this.resetValidationStatus(),this.hexInputRow.getParsedColor()?!0:(this.hexInputRow.inputView.errorText=n('Please enter a valid color (e.g. "ff0000").'),!1))}resetValidationStatus(){this.hexInputRow.inputView.errorText=null}}function convertColorToCommonHexFormat(o){let a=convertToHex(o);return a||(a="#000"),a.length===4&&(a="#"+[a[1],a[1],a[2],a[2],a[3],a[3]].join("")),a.toLowerCase()}class SliderView extends View$1{constructor(a){super(),this.element=a}focus(){this.element.focus()}}class HashView extends View$1{constructor(a){super(a),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__hash-view"]},children:"#"})}}class ColorPickerInputRowView extends View$1{constructor(n,s){super(n);M(this,"children");M(this,"inputView");this.inputView=s,this.children=this.createCollection([new HashView,this.inputView]),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-picker__row"]},children:this.children})}getParsedColor(){return tryParseHexColor(this.inputView.fieldView.element.value)}}function tryParseHexColor(o){if(!o)return null;const a=o.trim().replace(/^#/,"");return![3,4,6,8].includes(a.length)||!/^(([0-9a-fA-F]{2}){3,4}|([0-9a-fA-F]){3,4})$/.test(a)?null:`#${a}`}class DocumentColorCollection extends ObservableMixin(Collection){constructor(a){super(a),this.set("isEmpty",!0),this.on("change",()=>{this.set("isEmpty",this.length===0)})}add(a,n){return this.find(s=>s.color===a.color)?this:super.add(a,n)}hasColor(a){return!!this.find(n=>n.color===a)}}class ColorGridsFragmentView extends View$1{constructor(n,{colors:s,columns:l,removeButtonLabel:c,documentColorsLabel:u,documentColorsCount:d,colorPickerLabel:h,focusTracker:f,focusables:p}){super(n);M(this,"items");M(this,"colorDefinitions");M(this,"focusTracker");M(this,"columns");M(this,"documentColors");M(this,"documentColorsCount");M(this,"staticColorsGrid");M(this,"documentColorsGrid");M(this,"colorPickerButtonView");M(this,"removeColorButtonView");M(this,"_focusables");M(this,"_documentColorsLabel");M(this,"_removeButtonLabel");M(this,"_colorPickerLabel");const g=this.bindTemplate;this.set("isVisible",!0),this.focusTracker=f,this.items=this.createCollection(),this.colorDefinitions=s,this.columns=l,this.documentColors=new DocumentColorCollection,this.documentColorsCount=d,this._focusables=p,this._removeButtonLabel=c,this._colorPickerLabel=h,this._documentColorsLabel=u,this.setTemplate({tag:"div",attributes:{class:["ck-color-grids-fragment",g.if("isVisible","ck-hidden",v=>!v)]},children:this.items}),this.removeColorButtonView=this._createRemoveColorButton(),this.items.add(this.removeColorButtonView)}updateDocumentColors(n,s){const l=n.document,c=this.documentColorsCount;this.documentColors.clear();for(const u of l.getRoots()){const d=n.createRangeIn(u);for(const h of d.getItems())if(h.is("$textProxy")&&h.hasAttribute(s)&&(this._addColorToDocumentColors(h.getAttribute(s)),this.documentColors.length>=c))return}}updateSelectedColors(){const n=this.documentColorsGrid,s=this.staticColorsGrid,l=this.selectedColor;s.selectedColor=l,n&&(n.selectedColor=l)}render(){if(super.render(),this.staticColorsGrid=this._createStaticColorsGrid(),this.items.add(this.staticColorsGrid),this.documentColorsCount){const n=Template.bind(this.documentColors,this.documentColors),s=new View$1(this.locale);s.setTemplate({tag:"span",attributes:{class:["ck","ck-color-grid__label",n.if("isEmpty","ck-hidden")]},children:[{text:this._documentColorsLabel}]}),this.items.add(s),this.documentColorsGrid=this._createDocumentColorsGrid(),this.items.add(this.documentColorsGrid)}this._createColorPickerButton(),this._addColorSelectorElementsToFocusTracker()}focus(){this.removeColorButtonView.focus()}destroy(){super.destroy()}addColorPickerButton(){this.colorPickerButtonView&&(this.items.add(this.colorPickerButtonView),this.focusTracker.add(this.colorPickerButtonView.element),this._focusables.add(this.colorPickerButtonView))}_addColorSelectorElementsToFocusTracker(){this.focusTracker.add(this.removeColorButtonView.element),this._focusables.add(this.removeColorButtonView),this.staticColorsGrid&&(this.focusTracker.add(this.staticColorsGrid.element),this._focusables.add(this.staticColorsGrid)),this.documentColorsGrid&&(this.focusTracker.add(this.documentColorsGrid.element),this._focusables.add(this.documentColorsGrid))}_createColorPickerButton(){this.colorPickerButtonView=new ButtonView,this.colorPickerButtonView.set({label:this._colorPickerLabel,withText:!0,icon:icons.colorPalette,class:"ck-color-selector__color-picker"}),this.colorPickerButtonView.on("execute",()=>{this.fire("colorPicker:show")})}_createRemoveColorButton(){const n=new ButtonView;return n.set({withText:!0,icon:icons.eraser,label:this._removeButtonLabel}),n.class="ck-color-selector__remove-color",n.on("execute",()=>{this.fire("execute",{value:null,source:"removeColorButton"})}),n.render(),n}_createStaticColorsGrid(){const n=new ColorGridView(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});return n.on("execute",(s,l)=>{this.fire("execute",{value:l.value,source:"staticColorsGrid"})}),n}_createDocumentColorsGrid(){const n=Template.bind(this.documentColors,this.documentColors),s=new ColorGridView(this.locale,{columns:this.columns});return s.extendTemplate({attributes:{class:n.if("isEmpty","ck-hidden")}}),s.items.bindTo(this.documentColors).using(l=>{const c=new ColorTileView;return c.set({color:l.color,hasBorder:l.options&&l.options.hasBorder}),l.label&&c.set({label:l.label,tooltip:!0}),c.on("execute",()=>{this.fire("execute",{value:l.color,source:"documentColorsGrid"})}),c}),this.documentColors.on("change:isEmpty",(l,c,u)=>{u&&(s.selectedColor=null)}),s}_addColorToDocumentColors(n){const s=this.colorDefinitions.find(l=>l.color===n);s?this.documentColors.add(Object.assign({},s)):this.documentColors.add({color:n,label:n,options:{hasBorder:!1}})}}class ColorPickerFragmentView extends View$1{constructor(n,{focusTracker:s,focusables:l,keystrokes:c,colorPickerViewConfig:u}){super(n);M(this,"items");M(this,"colorPickerView");M(this,"saveButtonView");M(this,"cancelButtonView");M(this,"actionBarView");M(this,"focusTracker");M(this,"keystrokes");M(this,"_focusables");M(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=s,this.keystrokes=c,this.set("isVisible",!1),this.set("selectedColor",void 0),this._focusables=l,this._colorPickerViewConfig=u;const d=this.bindTemplate,{saveButtonView:h,cancelButtonView:f}=this._createActionButtons();this.saveButtonView=h,this.cancelButtonView=f,this.actionBarView=this._createActionBarView({saveButtonView:h,cancelButtonView:f}),this.setTemplate({tag:"div",attributes:{class:["ck-color-picker-fragment",d.if("isVisible","ck-hidden",p=>!p)]},children:this.items})}render(){super.render();const n=new ColorPickerView(this.locale,{...this._colorPickerViewConfig});this.colorPickerView=n,this.colorPickerView.render(),this.selectedColor&&(n.color=this.selectedColor),this.listenTo(this,"change:selectedColor",(s,l,c)=>{n.color=c}),this.items.add(this.colorPickerView),this.items.add(this.actionBarView),this._addColorPickersElementsToFocusTracker(),this._stopPropagationOnArrowsKeys(),this._executeOnEnterPress(),this._executeUponColorChange()}destroy(){super.destroy()}focus(){this.colorPickerView.focus()}resetValidationStatus(){this.colorPickerView.resetValidationStatus()}_executeOnEnterPress(){this.keystrokes.set("enter",n=>{this.isVisible&&this.focusTracker.focusedElement!==this.cancelButtonView.element&&this.colorPickerView.isValid()&&(this.fire("execute",{value:this.selectedColor}),n.stopPropagation(),n.preventDefault())})}_stopPropagationOnArrowsKeys(){const n=s=>s.stopPropagation();this.keystrokes.set("arrowright",n),this.keystrokes.set("arrowleft",n),this.keystrokes.set("arrowup",n),this.keystrokes.set("arrowdown",n)}_addColorPickersElementsToFocusTracker(){for(const s of this.colorPickerView.slidersView)this.focusTracker.add(s.element),this._focusables.add(s);const n=this.colorPickerView.hexInputRow.children.get(1);n.element&&(this.focusTracker.add(n.element),this._focusables.add(n)),this.focusTracker.add(this.saveButtonView.element),this._focusables.add(this.saveButtonView),this.focusTracker.add(this.cancelButtonView.element),this._focusables.add(this.cancelButtonView)}_createActionBarView({saveButtonView:n,cancelButtonView:s}){const l=new View$1,c=this.createCollection();return c.add(n),c.add(s),l.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector_action-bar"]},children:c}),l}_createActionButtons(){const n=this.locale,s=n.t,l=new ButtonView(n),c=new ButtonView(n);return l.set({icon:icons.check,class:"ck-button-save",type:"button",withText:!1,label:s("Accept")}),c.set({icon:icons.cancel,class:"ck-button-cancel",type:"button",withText:!1,label:s("Cancel")}),l.on("execute",()=>{this.colorPickerView.isValid()&&this.fire("execute",{source:"colorPickerSaveButton",value:this.selectedColor})}),c.on("execute",()=>{this.fire("colorPicker:cancel")}),{saveButtonView:l,cancelButtonView:c}}_executeUponColorChange(){this.colorPickerView.on("colorSelected",(n,s)=>{this.fire("execute",{value:s.color,source:"colorPicker"}),this.set("selectedColor",s.color)})}}class ColorSelectorView extends View$1{constructor(n,{colors:s,columns:l,removeButtonLabel:c,documentColorsLabel:u,documentColorsCount:d,colorPickerLabel:h,colorPickerViewConfig:f}){super(n);M(this,"focusTracker");M(this,"keystrokes");M(this,"items");M(this,"colorGridsFragmentView");M(this,"colorPickerFragmentView");M(this,"_focusCycler");M(this,"_focusables");M(this,"_colorPickerViewConfig");this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this._colorPickerViewConfig=f,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.colorGridsFragmentView=new ColorGridsFragmentView(n,{colors:s,columns:l,removeButtonLabel:c,documentColorsLabel:u,documentColorsCount:d,colorPickerLabel:h,focusTracker:this.focusTracker,focusables:this._focusables}),this.colorPickerFragmentView=new ColorPickerFragmentView(n,{focusables:this._focusables,focusTracker:this.focusTracker,keystrokes:this.keystrokes,colorPickerViewConfig:f}),this.set("_isColorGridsFragmentVisible",!0),this.set("_isColorPickerFragmentVisible",!1),this.set("selectedColor",void 0),this.colorGridsFragmentView.bind("isVisible").to(this,"_isColorGridsFragmentVisible"),this.colorPickerFragmentView.bind("isVisible").to(this,"_isColorPickerFragmentVisible"),this.on("change:selectedColor",(p,g,v)=>{this.colorGridsFragmentView.set("selectedColor",v),this.colorPickerFragmentView.set("selectedColor",v)}),this.colorGridsFragmentView.on("change:selectedColor",(p,g,v)=>{this.set("selectedColor",v)}),this.colorPickerFragmentView.on("change:selectedColor",(p,g,v)=>{this.set("selectedColor",v)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-color-selector"]},children:this.items})}render(){super.render(),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}appendUI(){this._appendColorGridsFragment(),this._colorPickerViewConfig&&this._appendColorPickerFragment()}showColorPickerFragment(){!this.colorPickerFragmentView.colorPickerView||this._isColorPickerFragmentVisible||(this._isColorPickerFragmentVisible=!0,this.colorPickerFragmentView.focus(),this.colorPickerFragmentView.resetValidationStatus(),this._isColorGridsFragmentVisible=!1)}showColorGridsFragment(){this._isColorGridsFragmentVisible||(this._isColorGridsFragmentVisible=!0,this.colorGridsFragmentView.focus(),this._isColorPickerFragmentVisible=!1)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}updateDocumentColors(n,s){this.colorGridsFragmentView.updateDocumentColors(n,s)}updateSelectedColors(){this.colorGridsFragmentView.updateSelectedColors()}_appendColorGridsFragment(){this.items.length||(this.items.add(this.colorGridsFragmentView),this.colorGridsFragmentView.delegate("execute").to(this),this.colorGridsFragmentView.delegate("colorPicker:show").to(this))}_appendColorPickerFragment(){this.items.length!==2&&(this.items.add(this.colorPickerFragmentView),this.colorGridsFragmentView.colorPickerButtonView&&this.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{this.showColorPickerFragment()}),this.colorGridsFragmentView.addColorPickerButton(),this.colorPickerFragmentView.delegate("execute").to(this),this.colorPickerFragmentView.delegate("colorPicker:cancel").to(this))}}class ComponentFactory{constructor(a){M(this,"editor");M(this,"_components",new Map);this.editor=a}*names(){for(const a of this._components.values())yield a.originalName}add(a,n){this._components.set(getNormalized(a),{callback:n,originalName:a})}create(a){if(!this.has(a))throw new CKEditorError("componentfactory-item-missing",this,{name:a});return this._components.get(getNormalized(a)).callback(this.editor.locale)}has(a){return this._components.has(getNormalized(a))}}function getNormalized(o){return String(o).toLowerCase()}const BALLOON_CLASS="ck-tooltip",dt=class dt extends DomEmitterMixin(){constructor(n){super();M(this,"tooltipTextView");M(this,"balloonPanelView");M(this,"_currentElementWithTooltip",null);M(this,"_currentTooltipPosition",null);M(this,"_mutationObserver",null);M(this,"_pinTooltipDebounced");M(this,"_unpinTooltipDebounced");M(this,"_watchdogExcluded");if(dt._editors.add(n),dt._instance)return dt._instance;dt._instance=this,this.tooltipTextView=new View$1(n.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new BalloonPanelView(n.locale),this.balloonPanelView.class=BALLOON_CLASS,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=createMutationObserver(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=debounce$1(this._pinTooltip,600),this._unpinTooltipDebounced=debounce$1(this._unpinTooltip,400),this.listenTo(global$1.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(global$1.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(n){const s=n.ui.view&&n.ui.view.body;dt._editors.delete(n),this.stopListening(n.ui),s&&s.has(this.balloonPanelView)&&s.remove(this.balloonPanelView),dt._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),dt._instance=null)}static getPositioningFunctions(n){const s=dt.defaultBalloonPositions;return{s:[s.southArrowNorth,s.southArrowNorthEast,s.southArrowNorthWest],n:[s.northArrowSouth],e:[s.eastArrowWest],w:[s.westArrowEast],sw:[s.southArrowNorthEast],se:[s.southArrowNorthWest]}[n]}_onKeyDown(n,s){s.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),s.stopPropagation())}_onEnterOrFocus(n,{target:s}){const l=getDescendantWithTooltip(s);if(!l){n.name==="focus"&&this._unpinTooltip();return}if(l===this._currentElementWithTooltip){this._unpinTooltipDebounced.cancel();return}this._unpinTooltip(),n.name==="focus"&&!l.matches(":hover")||l.matches("[data-cke-tooltip-instant]")?this._pinTooltip(l,getTooltipData(l)):this._pinTooltipDebounced(l,getTooltipData(l))}_onLeaveOrBlur(n,{target:s,relatedTarget:l}){if(n.name==="mouseleave"){if(!isElement$2(s))return;const c=this.balloonPanelView.element,u=c&&(c===l||c.contains(l)),d=!u&&s===c;if(u){this._unpinTooltipDebounced.cancel();return}if(!d&&this._currentElementWithTooltip&&s!==this._currentElementWithTooltip)return;const h=getDescendantWithTooltip(s),f=getDescendantWithTooltip(l);(d||h&&h!==f)&&(this._pinTooltipDebounced.cancel(),this._currentElementWithTooltip&&this._currentElementWithTooltip.matches("[data-cke-tooltip-instant]")||h&&h.matches("[data-cke-tooltip-instant]")?this._unpinTooltip():this._unpinTooltipDebounced())}else{if(this._currentElementWithTooltip&&s!==this._currentElementWithTooltip)return;this._pinTooltipDebounced.cancel(),this._unpinTooltipDebounced()}}_onScroll(n,{target:s}){this._currentElementWithTooltip&&(s.contains(this.balloonPanelView.element)&&s.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(n,{text:s,position:l,cssClass:c}){this._unpinTooltip();const u=first(dt._editors.values()).ui.view.body;u.has(this.balloonPanelView)||u.add(this.balloonPanelView),this.tooltipTextView.text=s,this.balloonPanelView.class=[BALLOON_CLASS,c].filter(d=>d).join(" "),this.balloonPanelView.pin({target:n,positions:dt.getPositioningFunctions(l)}),this._mutationObserver.attach(n);for(const d of dt._editors)this.listenTo(d.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=n,this._currentTooltipPosition=l}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(const n of dt._editors)this.stopListening(n.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;const n=getTooltipData(this._currentElementWithTooltip);if(!isVisible(this._currentElementWithTooltip)||!n.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:dt.getPositioningFunctions(n.position)})}};M(dt,"defaultBalloonPositions",BalloonPanelView.generatePositions({heightOffset:5,sideOffset:13})),M(dt,"_editors",new Set),M(dt,"_instance",null);let TooltipManager=dt;function getDescendantWithTooltip(o){return isElement$2(o)?o.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function getTooltipData(o){return{text:o.dataset.ckeTooltipText,position:o.dataset.ckeTooltipPosition||"s",cssClass:o.dataset.ckeTooltipClass||""}}function createMutationObserver(o){const a=new MutationObserver(()=>{o()});return{attach(n){a.observe(n,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){a.disconnect()}}}const NARROW_ROOT_HEIGHT_THRESHOLD=50,NARROW_ROOT_WIDTH_THRESHOLD=350;class Badge extends DomEmitterMixin(){constructor(n,s={}){super();M(this,"editor");M(this,"_balloonView",null);M(this,"_showBalloonThrottled",throttle$2(()=>this._showBalloon(),50,{leading:!0}));M(this,"_lastFocusedEditableElement",null);M(this,"_balloonClass");this.editor=n,this._balloonClass=s.balloonClass,n.on("ready",()=>this._handleEditorReady())}destroy(){const n=this._balloonView;n&&(n.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){const n=this.editor;this._isEnabled()&&n.ui.view&&(n.ui.focusTracker.on("change:isFocused",(s,l,c)=>{this._updateLastFocusedEditableElement(),c?this._showBalloon():this._hideBalloon()}),n.ui.focusTracker.on("change:focusedElement",(s,l,c)=>{this._updateLastFocusedEditableElement(),c&&this._showBalloon()}),n.ui.on("update",()=>{this._showBalloonThrottled()}))}_getNormalizedConfig(){return{side:this.editor.locale.contentLanguageDirection==="ltr"?"right":"left",position:"border",verticalOffset:0,horizontalOffset:5}}_showBalloon(){const n=this._getBalloonAttachOptions();n&&(this._balloonView||(this._balloonView=this._createBalloonView()),this._balloonView.pin(n))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_createBalloonView(){const n=this.editor,s=new BalloonPanelView,l=this._createBadgeContent();return s.content.add(l),this._balloonClass&&(s.class=this._balloonClass),n.ui.view.body.add(s),s}_getBalloonAttachOptions(){if(!this._lastFocusedEditableElement)return null;const n=this._getNormalizedConfig(),s=n.side==="right"?getLowerRightCornerPosition(this._lastFocusedEditableElement,n):getLowerLeftCornerPosition(this._lastFocusedEditableElement,n);return{target:this._lastFocusedEditableElement,positions:[s]}}_updateLastFocusedEditableElement(){const n=this.editor,s=n.ui.focusTracker.isFocused,l=n.ui.focusTracker.focusedElement;if(!s||!l){this._lastFocusedEditableElement=null;return}const c=Array.from(n.ui.getEditableElementsNames()).map(u=>n.ui.getEditableElement(u));c.includes(l)?this._lastFocusedEditableElement=l:this._lastFocusedEditableElement=c[0]}}function getLowerRightCornerPosition(o,a){return getLowerCornerPosition(o,a,(n,s)=>n.left+n.width-s.width-a.horizontalOffset)}function getLowerLeftCornerPosition(o,a){return getLowerCornerPosition(o,a,n=>n.left+a.horizontalOffset)}function getLowerCornerPosition(o,a,n){return(s,l)=>{const c=new Rect$3(o);if(c.width<NARROW_ROOT_WIDTH_THRESHOLD||c.height<NARROW_ROOT_HEIGHT_THRESHOLD)return null;let u;a.position==="inside"?u=c.bottom-l.height:u=c.bottom-l.height/2,u-=a.verticalOffset;const d=n(c,l),f=s.clone().moveTo(d,u).getIntersection(l.clone().moveTo(d,u)).getVisible();return!f||f.getArea()<l.getArea()?null:{top:u,left:d,name:`position_${a.position}-side_${a.side}`,config:{withArrow:!1}}}}var poweredByIcon=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`;const DEFAULT_LABEL="Powered by";class PoweredBy extends Badge{constructor(a){super(a,{balloonClass:"ck-powered-by-balloon"})}_isEnabled(){const a=this.editor;if(a.config.get("ui.poweredBy.forceVisible"))return!0;const s=a.config.get("licenseKey");if(s=="GPL")return!0;const l=parseBase64EncodedObject(s.split(".")[1]);return l?!l.whiteLabel:!0}_createBadgeContent(){return new PoweredByView(this.editor.locale,this._getNormalizedConfig().label)}_getNormalizedConfig(){const a=super._getNormalizedConfig(),n=this.editor.config.get("ui.poweredBy")||{},s=n.position||a.position,l=s==="inside"?5:a.verticalOffset;return{position:s,side:n.side||a.side,label:n.label===void 0?DEFAULT_LABEL:n.label,verticalOffset:n.verticalOffset!==void 0?n.verticalOffset:l,horizontalOffset:n.horizontalOffset!==void 0?n.horizontalOffset:a.horizontalOffset,forceVisible:!!n.forceVisible}}}class PoweredByView extends View$1{constructor(a,n){super(a);const s=new IconView,l=this.bindTemplate;s.set({content:poweredByIcon,isColorInherited:!1}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...n?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[n]}]:[],s],on:{dragstart:l.to(c=>c.preventDefault())}}]})}}class EvaluationBadge extends Badge{constructor(n){super(n,{balloonClass:"ck-evaluation-badge-balloon"});M(this,"licenseTypeMessage",{evaluation:"For evaluation purposes only",trial:"For evaluation purposes only",development:"For development purposes only"})}_isEnabled(){const s=this.editor.config.get("licenseKey"),l=getLicenseTypeFromLicenseKey(s);return!!(l&&this.licenseTypeMessage[l])}_createBadgeContent(){const n=this.editor.config.get("licenseKey"),s=getLicenseTypeFromLicenseKey(n);return new EvaluationBadgeView(this.editor.locale,this.licenseTypeMessage[s])}_getNormalizedConfig(){const n=super._getNormalizedConfig(),s=this.editor.config.get("ui.poweredBy")||{},l=s.position||n.position,c=s.side||n.side;return{position:l,side:c==="left"?"right":"left",verticalOffset:n.verticalOffset,horizontalOffset:n.horizontalOffset}}}class EvaluationBadgeView extends View$1{constructor(a,n){super(a),this.setTemplate({tag:"div",attributes:{class:["ck","ck-evaluation-badge"],"aria-hidden":!0},children:[{tag:"span",attributes:{class:["ck","ck-evaluation-badge__label"]},children:[n]}]})}}function getLicenseTypeFromLicenseKey(o){if(o=="GPL")return"GPL";const a=parseBase64EncodedObject(o.split(".")[1]);return a?a.licenseType||"production":null}const AriaLiveAnnouncerPoliteness={POLITE:"polite",ASSERTIVE:"assertive"};class AriaLiveAnnouncer{constructor(a){M(this,"editor");M(this,"view");this.editor=a,a.once("ready",()=>{for(const n of Object.values(AriaLiveAnnouncerPoliteness))this.announce("",n)})}announce(a,n=AriaLiveAnnouncerPoliteness.POLITE){const s=this.editor;if(!s.ui.view)return;this.view||(this.view=new AriaLiveAnnouncerView(s.locale),s.ui.view.body.add(this.view));const{politeness:l,isUnsafeHTML:c}=typeof n=="string"?{politeness:n}:n;let u=this.view.regionViews.find(d=>d.politeness===l);u||(u=new AriaLiveAnnouncerRegionView(s,l),this.view.regionViews.add(u)),u.announce({announcement:a,isUnsafeHTML:c})}}class AriaLiveAnnouncerView extends View$1{constructor(n){super(n);M(this,"regionViews");this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}}class AriaLiveAnnouncerRegionView extends View$1{constructor(n,s){super(n.locale);M(this,"politeness");M(this,"_domConverter");M(this,"_pruneAnnouncementsInterval");this.setTemplate({tag:"div",attributes:{"aria-live":s,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),n.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=s,this._domConverter=n.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:n,isUnsafeHTML:s}){if(!n.trim().length)return;const l=document.createElement("li");s?this._domConverter.setContentOf(l,n):l.innerText=n,this._listElement.appendChild(l)}get _listElement(){return this.element.querySelector("ul")}}class MenuBarMenuListItemView extends ListItemView{constructor(a,n){super(a);const s=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:s.to("mouseenter")}}),this.delegate("mouseenter").to(n)}}const NESTED_PANEL_HORIZONTAL_OFFSET=5,MenuBarBehaviors={toggleMenusAndFocusItemsOnHover(o){o.on("menu:mouseenter",a=>{if(!(!o.isFocusBorderEnabled&&!o.isOpen)){if(o.isOpen)for(const n of o.menus){const s=a.path[0],l=s instanceof MenuBarMenuListItemView&&s.children.first===n;n.isOpen=(a.path.includes(n)||l)&&n.isEnabled}a.source.focus()}})},focusCycleMenusOnArrows(o){const a=o.locale.uiLanguageDirection==="rtl";o.on("menu:arrowright",s=>{n(s.source,a?-1:1)}),o.on("menu:arrowleft",s=>{n(s.source,a?1:-1)});function n(s,l){const c=o.children.getIndex(s),u=s.isOpen,d=o.children.length,h=o.children.get((c+d+l)%d);s.isOpen=!1,u&&(h.isOpen=!0),h.buttonView.focus()}},closeMenusWhenTheBarCloses(o){o.on("change:isOpen",()=>{o.isOpen||o.menus.forEach(a=>{a.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(o){o.on("menu:change:isOpen",(a,n,s)=>{s&&o.menus.filter(l=>a.source.parentMenuView===l.parentMenuView&&a.source!==l&&l.isOpen).forEach(l=>{l.isOpen=!1})})},closeOnClickOutside(o){clickOutsideHandler({emitter:o,activator:()=>o.isOpen,callback:()=>o.close(),contextElements:()=>o.children.map(a=>a.element)})},enableFocusHighlightOnInteraction(o){let a=!1;o.on("change:isOpen",(n,s,l)=>{l||(a||(o.isFocusBorderEnabled=!1),a=!1)}),o.listenTo(o.element,"keydown",()=>{a=!0},{useCapture:!0}),o.listenTo(o.element,"keyup",()=>{a=!1},{useCapture:!0}),o.listenTo(o.element,"focus",()=>{a&&(o.isFocusBorderEnabled=!0)},{useCapture:!0})}},MenuBarMenuBehaviors={openAndFocusPanelOnArrowDownKey(o){o.keystrokes.set("arrowdown",(a,n)=>{o.focusTracker.focusedElement===o.buttonView.element&&(o.isOpen||(o.isOpen=!0),o.panelView.focus(),n())})},openOnArrowRightKey(o){const a=o.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";o.keystrokes.set(a,(n,s)=>{o.focusTracker.focusedElement!==o.buttonView.element||!o.isEnabled||(o.isOpen||(o.isOpen=!0),o.panelView.focus(),s())})},openOnButtonClick(o){o.buttonView.on("execute",()=>{o.isOpen=!0})},toggleOnButtonClick(o){o.buttonView.on("execute",()=>{o.isOpen=!o.isOpen})},openAndFocusOnEnterKeyPress(o){o.keystrokes.set("enter",(a,n)=>{o.focusTracker.focusedElement===o.buttonView.element&&(o.isOpen=!0,o.panelView.focus(),n())})},closeOnArrowLeftKey(o){const a=o.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";o.keystrokes.set(a,(n,s)=>{o.isOpen&&(o.isOpen=!1,o.focus(),s())})},closeOnEscKey(o){o.keystrokes.set("esc",(a,n)=>{o.isOpen&&(o.isOpen=!1,o.focus(),n())})},closeOnParentClose(o){o.parentMenuView.on("change:isOpen",(a,n,s)=>{!s&&a.source===o.parentMenuView&&(o.isOpen=!1)})}},MenuBarMenuViewPanelPositioningFunctions={southEast:o=>({top:o.bottom,left:o.left,name:"se"}),southWest:(o,a)=>({top:o.bottom,left:o.left-a.width+o.width,name:"sw"}),northEast:(o,a)=>({top:o.top-a.height,left:o.left,name:"ne"}),northWest:(o,a)=>({top:o.top-a.height,left:o.left-a.width+o.width,name:"nw"}),eastSouth:o=>({top:o.top,left:o.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"es"}),eastNorth:(o,a)=>({top:o.top-a.height,left:o.right-NESTED_PANEL_HORIZONTAL_OFFSET,name:"en"}),westSouth:(o,a)=>({top:o.top,left:o.left-a.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"ws"}),westNorth:(o,a)=>({top:o.top-a.height,left:o.left-a.width+NESTED_PANEL_HORIZONTAL_OFFSET,name:"wn"})},DefaultMenuBarItems=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditingEnhanced",items:["menuBar:sourceEditingEnhanced"]},{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:bookmark","menuBar:comment","menuBar:insertMergeField","menuBar:emoji"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function normalizeMenuBarConfig(o){let a;return!("items"in o)||!o.items?a={items:cloneDeep(DefaultMenuBarItems),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0,...o}:a={items:o.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1,...o},a}function processMenuBarConfig({normalizedConfig:o,locale:a,componentFactory:n,extraItems:s}){const l=cloneDeep(o);return handleAdditions(o,l,s),handleRemovals(o,l),handleAdditions(o,l,l.addItems),purgeUnavailableComponents(o,l,n),purgeEmptyMenus(o,l),localizeMenuLabels(l,a),l}function handleRemovals(o,a){const n=a.removeItems,s=[];a.items=a.items.filter(({menuId:l})=>n.includes(l)?(s.push(l),!1):!0),walkConfigMenus(a.items,l=>{l.groups=l.groups.filter(({groupId:c})=>n.includes(c)?(s.push(c),!1):!0);for(const c of l.groups)c.items=c.items.filter(u=>{const d=getIdFromGroupItem(u);return n.includes(d)?(s.push(d),!1):!0})});for(const l of n)s.includes(l)||logWarning("menu-bar-item-could-not-be-removed",{menuBarConfig:o,itemName:l})}function handleAdditions(o,a,n){const s=[];if(n.length!=0){for(const l of n){const c=getRelationFromPosition(l.position),u=getRelativeIdFromPosition(l.position);if(isMenuBarMenuAddition(l))if(!u)c==="start"?(a.items.unshift(l.menu),s.push(l)):c==="end"&&(a.items.push(l.menu),s.push(l));else{const d=a.items.findIndex(h=>h.menuId===u);d!=-1?c==="before"?(a.items.splice(d,0,l.menu),s.push(l)):c==="after"&&(a.items.splice(d+1,0,l.menu),s.push(l)):addMenuOrItemToGroup(a,l.menu,u,c)&&s.push(l)}else isMenuBarMenuGroupAddition(l)?walkConfigMenus(a.items,d=>{if(d.menuId===u)c==="start"?(d.groups.unshift(l.group),s.push(l)):c==="end"&&(d.groups.push(l.group),s.push(l));else{const h=d.groups.findIndex(f=>f.groupId===u);h!==-1&&(c==="before"?(d.groups.splice(h,0,l.group),s.push(l)):c==="after"&&(d.groups.splice(h+1,0,l.group),s.push(l)))}}):addMenuOrItemToGroup(a,l.item,u,c)&&s.push(l)}for(const l of n)s.includes(l)||logWarning("menu-bar-item-could-not-be-added",{menuBarConfig:o,addedItemConfig:l})}}function addMenuOrItemToGroup(o,a,n,s){let l=!1;return walkConfigMenus(o.items,c=>{for(const{groupId:u,items:d}of c.groups){if(l)return;if(u===n)s==="start"?(d.unshift(a),l=!0):s==="end"&&(d.push(a),l=!0);else{const h=d.findIndex(f=>getIdFromGroupItem(f)===n);h!==-1&&(s==="before"?(d.splice(h,0,a),l=!0):s==="after"&&(d.splice(h+1,0,a),l=!0))}}}),l}function purgeUnavailableComponents(o,a,n){walkConfigMenus(a.items,s=>{for(const l of s.groups)l.items=l.items.filter(c=>{const u=typeof c=="string"&&!n.has(c);return u&&!a.isUsingDefaultConfig&&logWarning("menu-bar-item-unavailable",{menuBarConfig:o,parentMenuConfig:cloneDeep(s),componentName:c}),!u})})}function purgeEmptyMenus(o,a){const n=a.isUsingDefaultConfig;let s=!1;if(a.items=a.items.filter(l=>l.groups.length?!0:(warnAboutEmptyMenu(o,l,n),!1)),!a.items.length){warnAboutEmptyMenu(o,o,n);return}walkConfigMenus(a.items,l=>{l.groups=l.groups.filter(c=>c.items.length?!0:(s=!0,!1));for(const c of l.groups)c.items=c.items.filter(u=>isMenuDefinition(u)&&!u.groups.length?(warnAboutEmptyMenu(o,u,n),s=!0,!1):!0)}),s&&purgeEmptyMenus(o,a)}function warnAboutEmptyMenu(o,a,n){n||logWarning("menu-bar-menu-empty",{menuBarConfig:o,emptyMenuConfig:a})}function localizeMenuLabels(o,a){const n=a.t,s={File:n({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:n({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:n({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:n({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:n({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:n({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:n({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:n({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:n({string:"Font",id:"MENU_BAR_MENU_FONT"})};walkConfigMenus(o.items,l=>{l.label in s&&(l.label=s[l.label])})}function walkConfigMenus(o,a){if(Array.isArray(o))for(const s of o)n(s);function n(s){a(s);for(const l of s.groups)for(const c of l.items)isMenuDefinition(c)&&n(c)}}function isMenuBarMenuAddition(o){return typeof o=="object"&&"menu"in o}function isMenuBarMenuGroupAddition(o){return typeof o=="object"&&"group"in o}function getRelationFromPosition(o){return o.startsWith("start")?"start":o.startsWith("end")?"end":o.startsWith("after")?"after":"before"}function getRelativeIdFromPosition(o){const a=o.match(/^[^:]+:(.+)/);return a?a[1]:null}function getIdFromGroupItem(o){return typeof o=="string"?o:o.menuId}function isMenuDefinition(o){return typeof o=="object"&&"menuId"in o}class EditorUI extends ObservableMixin(){constructor(n){super();M(this,"editor");M(this,"componentFactory");M(this,"focusTracker");M(this,"tooltipManager");M(this,"poweredBy");M(this,"evaluationBadge");M(this,"ariaLiveAnnouncer");M(this,"isReady",!1);M(this,"_editableElementsMap",new Map);M(this,"_focusableToolbarDefinitions",[]);M(this,"_extraMenuBarElements",[]);M(this,"_lastFocusedForeignElement",null);const s=n.editing.view;this.editor=n,this.componentFactory=new ComponentFactory(n),this.focusTracker=new FocusTracker,this.tooltipManager=new TooltipManager(n),this.poweredBy=new PoweredBy(n),this.evaluationBadge=new EvaluationBadge(n),this.ariaLiveAnnouncer=new AriaLiveAnnouncer(n),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(s.document,"layoutChanged",this.update.bind(this)),this.listenTo(s,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy(),this.evaluationBadge.destroy();for(const n of this._editableElementsMap.values())n.ckeditorInstance=null,this.editor.keystrokes.stopListening(n);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(n,s){this._editableElementsMap.set(n,s),s.ckeditorInstance||(s.ckeditorInstance=this.editor),this.focusTracker.add(s);const l=()=>{this.editor.editing.view.getDomRoot(n)||this.editor.keystrokes.listenTo(s)};this.isReady?l():this.once("ready",l)}removeEditableElement(n){const s=this._editableElementsMap.get(n);s&&(this._editableElementsMap.delete(n),this.editor.keystrokes.stopListening(s),this.focusTracker.remove(s),s.ckeditorInstance=null)}getEditableElement(n="main"){return this._editableElementsMap.get(n)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(n,s={}){n.isRendered?(this.focusTracker.add(n),this.editor.keystrokes.listenTo(n.element)):n.once("render",()=>{this.focusTracker.add(n),this.editor.keystrokes.listenTo(n.element)}),this._focusableToolbarDefinitions.push({toolbarView:n,options:s})}extendMenuBar(n){this._extraMenuBarElements.push(n)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(n){const s=n.element;this.focusTracker.add(s),this.editor.keystrokes.listenTo(s);const l=normalizeMenuBarConfig(this.editor.config.get("menuBar")||{});n.fillFromConfig(l,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(c,u)=>{s.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),u())}),this.editor.keystrokes.set("Alt+F9",(c,u)=>{s.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),n.isFocusBorderEnabled=!0,n.focus(),u())})}_readViewportOffsetFromConfig(){const n=this.editor,s=n.config.get("ui.viewportOffset");if(s)return s;const l=n.config.get("toolbar.viewportTopOffset");return l?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:l}):{top:0}}_initFocusTracking(){const n=this.editor;let s;n.keystrokes.set("Alt+F10",(l,c)=>{this._saveLastFocusedForeignElement();const u=this._getCurrentFocusedToolbarDefinition();(!u||!s)&&(s=this._getFocusableCandidateToolbarDefinitions());for(let d=0;d<s.length;d++){const h=s.shift();if(s.push(h),h!==u&&this._focusFocusableCandidateToolbar(h)){u&&u.options.afterBlur&&u.options.afterBlur();break}}c()}),n.keystrokes.set("Esc",(l,c)=>{const u=this._getCurrentFocusedToolbarDefinition();u&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):n.editing.view.focus(),u.options.afterBlur&&u.options.afterBlur(),c())})}_saveLastFocusedForeignElement(){const n=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(n)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(n)&&(this._lastFocusedForeignElement=n)}_getFocusableCandidateToolbarDefinitions(){const n=[];for(const s of this._focusableToolbarDefinitions){const{toolbarView:l,options:c}=s;(isVisible(l.element)||c.beforeFocus)&&n.push(s)}return n.sort((s,l)=>getToolbarDefinitionWeight(s)-getToolbarDefinitionWeight(l)),n}_getCurrentFocusedToolbarDefinition(){for(const n of this._focusableToolbarDefinitions)if(n.toolbarView.element&&n.toolbarView.element.contains(this.focusTracker.focusedElement))return n;return null}_focusFocusableCandidateToolbar(n){const{toolbarView:s,options:{beforeFocus:l}}=n;return l&&l(),isVisible(s.element)?(s.focus(),!0):!1}_handleScrollToTheSelection(n,s){const l={top:0,bottom:0,left:0,right:0,...this.viewportOffset};s.viewportOffset.top+=l.top,s.viewportOffset.bottom+=l.bottom,s.viewportOffset.left+=l.left,s.viewportOffset.right+=l.right}_bindBodyCollectionWithFocusTracker(){const n=this.view.body;for(const s of n)this.focusTracker.add(s.element);n.on("add",(s,l)=>{this.focusTracker.add(l.element)}),n.on("remove",(s,l)=>{this.focusTracker.remove(l.element)})}}function getToolbarDefinitionWeight(o){const{toolbarView:a,options:n}=o;let s=10;return isVisible(a.element)&&s--,n.isContextual&&s--,s}class EditorUIView extends View$1{constructor(n){super(n);M(this,"body");M(this,"menuBarView");this.body=new BodyCollection(n)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}}class BoxedEditorUIView extends EditorUIView{constructor(n){super(n);M(this,"top");M(this,"main");M(this,"_voiceLabelView");this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:n.uiLanguageDirection,lang:n.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){const n=this.t,s=new LabelView;return s.text=n("Rich Text Editor"),s.extendTemplate({attributes:{class:"ck-voice-label"}}),s}}class EditableUIView extends View$1{constructor(n,s,l){super(n);M(this,"name",null);M(this,"_editingView");M(this,"_editableElement");M(this,"_hasExternalElement");this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:n.contentLanguage,dir:n.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=l,this._hasExternalElement=!!this._editableElement,this._editingView=s}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){const n=this._editingView;n.isRenderingInProgress?l(this):s(this);function s(c){n.change(u=>{const d=n.document.getRoot(c.name);u.addClass(c.isFocused?"ck-focused":"ck-blurred",d),u.removeClass(c.isFocused?"ck-blurred":"ck-focused",d)})}function l(c){n.once("change:isRenderingInProgress",(u,d,h)=>{h?l(c):s(c)})}}}class InlineEditableUIView extends EditableUIView{constructor(n,s,l,c={}){super(n,s,l);M(this,"_options");this._options=c,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();const n=this._editingView;n.change(s=>{const l=n.document.getRoot(this.name);s.setAttribute("aria-label",this.getEditableAriaLabel(),l)})}getEditableAriaLabel(){const n=this.locale.t,s=this._options.label,l=this._editableElement,c=this.name;if(typeof s=="string")return s;if(typeof s=="object")return s[c];if(typeof s=="function")return s(this);if(l){const u=l.getAttribute("aria-label");if(u)return u}return n("Rich Text Editor. Editing area: %0",c)}}class Notification extends ContextPlugin{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(a,n)=>{window.alert(n.message)},{priority:"lowest"})}showSuccess(a,n={}){this._showNotification({message:a,type:"success",namespace:n.namespace,title:n.title})}showInfo(a,n={}){this._showNotification({message:a,type:"info",namespace:n.namespace,title:n.title})}showWarning(a,n={}){this._showNotification({message:a,type:"warning",namespace:n.namespace,title:n.title})}_showNotification(a){const n=a.namespace?`show:${a.type}:${a.namespace}`:`show:${a.type}`;this.fire(n,{message:a.message,type:a.type,title:a.title||""})}}let Model$1=class extends ObservableMixin(){constructor(a,n){super(),n&&assignIn(this,n),a&&this.set(a)}};const toPx$4=toUnit("px");class ContextualBalloon extends Plugin{constructor(n){super(n);M(this,"positionLimiter");M(this,"visibleStack");M(this,"_viewToStack",new Map);M(this,"_idToStack",new Map);M(this,"_view",null);M(this,"_rotatorView",null);M(this,"_fakePanelsView",null);this.positionLimiter=()=>{const s=this.editor.editing.view,c=s.document.selection.editableElement;return c?s.domConverter.mapViewToDom(c.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(n){return Array.from(this._viewToStack.keys()).includes(n)}add(n){if(this._view||this._createPanelView(),this.hasView(n.view))throw new CKEditorError("contextualballoon-add-view-exist",[this,n]);const s=n.stackId||"main";if(!this._idToStack.has(s)){this._idToStack.set(s,new Map([[n.view,n]])),this._viewToStack.set(n.view,this._idToStack.get(s)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||n.singleViewMode)&&this.showStack(s);return}const l=this._idToStack.get(s);n.singleViewMode&&this.showStack(s),l.set(n.view,n),this._viewToStack.set(n.view,l),l===this._visibleStack&&this._showView(n)}remove(n){if(!this.hasView(n))throw new CKEditorError("contextualballoon-remove-view-not-exist",[this,n]);const s=this._viewToStack.get(n);this._singleViewMode&&this.visibleView===n&&(this._singleViewMode=!1),this.visibleView===n&&(s.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(s.values())[s.size-2])),s.size===1?(this._idToStack.delete(this._getStackId(s)),this._numberOfStacks=this._idToStack.size):s.delete(n),this._viewToStack.delete(n)}updatePosition(n){n&&(this._visibleStack.get(this.visibleView).position=n),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let n=Array.from(this._visibleStack.values()).pop().position;return n&&(n.limiter||(n=Object.assign({},n,{limiter:this.positionLimiter})),n=Object.assign({},n,{viewportOffsetConfig:this.editor.ui.viewportOffset})),n}showStack(n){this.visibleStack=n;const s=this._idToStack.get(n);if(!s)throw new CKEditorError("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==s&&this._showView(Array.from(s.values()).pop())}_createPanelView(){this._view=new BalloonPanelView(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(n){return Array.from(this._idToStack.entries()).find(l=>l[1]===n)[0]}_showNextStack(){const n=Array.from(this._idToStack.values());let s=n.indexOf(this._visibleStack)+1;n[s]||(s=0),this.showStack(this._getStackId(n[s]))}_showPrevStack(){const n=Array.from(this._idToStack.values());let s=n.indexOf(this._visibleStack)-1;n[s]||(s=n.length-1),this.showStack(this._getStackId(n[s]))}_createRotatorView(){const n=new RotatorView(this.editor.locale),s=this.editor.locale.t;return this.view.content.add(n),n.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(l,c)=>!c&&l>1),n.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),n.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(l,c)=>{if(c<2)return"";const u=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return s("%0 of %1",[u,c])}),n.buttonNextView.on("execute",()=>{n.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),n.buttonPrevView.on("execute",()=>{n.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),n}_createFakePanelsView(){const n=new FakePanelsView(this.editor.locale,this.view);return n.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(s,l)=>!l&&s>=2?Math.min(s-1,2):0),n.listenTo(this.view,"change:top",()=>n.updatePosition()),n.listenTo(this.view,"change:left",()=>n.updatePosition()),this.editor.ui.view.body.add(n),n}_showView({view:n,balloonClassName:s="",withArrow:l=!0,singleViewMode:c=!1}){this.view.class=s,this.view.withArrow=l,this._rotatorView.showView(n),this.visibleView=n,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),c&&(this._singleViewMode=!0)}}class RotatorView extends View$1{constructor(n){super(n);M(this,"focusTracker");M(this,"buttonPrevView");M(this,"buttonNextView");M(this,"content");const s=n.t,l=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new FocusTracker,this.buttonPrevView=this._createButtonView(s("Previous"),icons.previousArrow),this.buttonNextView=this._createButtonView(s("Next"),icons.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",l.to("isNavigationVisible",c=>c?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:l.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(n){this.hideView(),this.content.add(n)}hideView(){this.content.clear()}_createButtonView(n,s){const l=new ButtonView(this.locale);return l.set({label:n,icon:s,tooltip:!0}),l}}class FakePanelsView extends View$1{constructor(n,s){super(n);M(this,"content");M(this,"_balloonPanelView");const l=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=s,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",l.to("numberOfPanels",c=>c?"":"ck-hidden")],style:{top:l.to("top",toPx$4),left:l.to("left",toPx$4),width:l.to("width",toPx$4),height:l.to("height",toPx$4)}},children:this.content}),this.on("change:numberOfPanels",(c,u,d,h)=>{d>h?this._addPanels(d-h):this._removePanels(h-d),this.updatePosition()})}_addPanels(n){for(;n--;){const s=new View$1;s.setTemplate({tag:"div"}),this.content.add(s),this.registerChild(s)}}_removePanels(n){for(;n--;){const s=this.content.last;this.content.remove(s),this.deregisterChild(s),s.destroy()}}updatePosition(){if(this.numberOfPanels){const{top:n,left:s}=this._balloonPanelView,{width:l,height:c}=new Rect$3(this._balloonPanelView.element);Object.assign(this,{top:n,left:s,width:l,height:c})}}}const toPx$3=toUnit("px");class StickyPanelView extends View$1{constructor(n){super(n);M(this,"content");M(this,"contentPanelElement");M(this,"_contentPanelPlaceholder");const s=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:s.to("isSticky",l=>l?"block":"none"),height:s.to("isSticky",l=>l?toPx$3(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Template({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",s.if("isSticky","ck-sticky-panel__content_sticky"),s.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:s.to("isSticky",l=>l?toPx$3(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:s.to("_stickyTopOffset",l=>l&&toPx$3(l)),bottom:s.to("_stickyBottomOffset",l=>l&&toPx$3(l)),marginLeft:s.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(global$1.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}const n=new Rect$3(this.limiterElement);let s=n.getVisible();if(s){const l=new Rect$3(global$1.window);l.top+=this.viewportTopOffset,l.height-=this.viewportTopOffset,s=s.getIntersection(l)}if(s&&n.top<s.top){const l=s.top;if(l+this._contentPanelRect.height+this.limiterBottomOffset>s.bottom){const c=Math.max(n.bottom-s.bottom,0)+this.limiterBottomOffset;n.bottom-c>n.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(c):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<n.height?this._stickToTopOfAncestors(l):this._unstick()}else this._unstick()}_stickToTopOfAncestors(n){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=n,this._stickyBottomOffset=null,this._marginLeft=toPx$3(-global$1.window.scrollX)}_stickToBottomOfLimiter(n){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=n,this._marginLeft=toPx$3(-global$1.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Rect$3(this.contentPanelElement)}}const toPx$2=toUnit("px");class BalloonToolbar extends Plugin{constructor(n){super(n);M(this,"toolbarView");M(this,"focusTracker");M(this,"_balloonConfig");M(this,"_resizeObserver",null);M(this,"_balloon");M(this,"_fireSelectionChangeDebounced");this._balloonConfig=normalizeToolbarConfig(n.config.get("balloonToolbar")),this.toolbarView=this._createToolbarView(),this.focusTracker=new FocusTracker,this._trackFocusableEditableElements(),this.focusTracker.add(this.toolbarView),n.ui.addToolbar(this.toolbarView,{beforeFocus:()=>this.show(!0),afterBlur:()=>this.hide(),isContextual:!0}),this._balloon=n.plugins.get(ContextualBalloon),this._fireSelectionChangeDebounced=debounce$1(()=>this.fire("_selectionChangeDebounced"),200),this.decorate("show")}static get pluginName(){return"BalloonToolbar"}static get isOfficialPlugin(){return!0}static get requires(){return[ContextualBalloon]}init(){const n=this.editor,s=n.model.document.selection;this.listenTo(this.focusTracker,"change:isFocused",(l,c,u)=>{const d=this._balloon.visibleView===this.toolbarView;!u&&d?this.hide():u&&this.show()}),this.listenTo(s,"change:range",(l,c)=>{(c.directChange||s.isCollapsed)&&this.hide(),this._fireSelectionChangeDebounced()}),this.listenTo(this,"_selectionChangeDebounced",()=>{this.editor.editing.view.document.isFocused&&this.show()}),this._balloonConfig.shouldNotGroupWhenFull||this.listenTo(n,"ready",()=>{const l=n.ui.view.editable.element;this._resizeObserver=new ResizeObserver$1(l,c=>{this.toolbarView.maxWidth=toPx$2(c.contentRect.width*.9)})}),this.listenTo(this.toolbarView,"groupedItemsUpdate",()=>{this._updatePosition()}),n.ui.once("ready",()=>{this.toolbarView.fillFromConfig(this._balloonConfig,this.editor.ui.componentFactory)})}_createToolbarView(){const n=this.editor.locale.t,s=!this._balloonConfig.shouldNotGroupWhenFull,l=new ToolbarView(this.editor.locale,{shouldGroupWhenFull:s,isFloating:!0});return l.ariaLabel=n("Editor contextual toolbar"),l.render(),l}show(n=!1){const s=this.editor,l=s.model.document.selection,c=s.model.schema;this._balloon.hasView(this.toolbarView)||l.isCollapsed&&!n||selectionContainsOnlyMultipleSelectables(l,c)||Array.from(this.toolbarView.items).every(u=>u.isEnabled!==void 0&&!u.isEnabled)||(this.listenTo(this.editor.ui,"update",()=>{this._updatePosition()}),this._balloon.add({view:this.toolbarView,position:this._getBalloonPositionData(),balloonClassName:"ck-toolbar-container"}))}hide(){this._balloon.hasView(this.toolbarView)&&(this.stopListening(this.editor.ui,"update"),this._balloon.remove(this.toolbarView))}_trackFocusableEditableElements(){const{editor:n,focusTracker:s}=this,{editing:l}=n;l.view.addObserver(class extends Observer{observe(u){s.add(u)}stopObserving(u){s.remove(u)}})}_getBalloonPositionData(){const s=this.editor.editing.view,l=s.document,c=l.selection,u=l.selection.isBackward;return{target:()=>{const d=u?c.getFirstRange():c.getLastRange(),h=Rect$3.getDomRangeRects(s.domConverter.viewRangeToDom(d));return u?h[0]:(h.length>1&&h[h.length-1].width===0&&h.pop(),h[h.length-1])},positions:this._getBalloonPositions(u)}}_updatePosition(){this._balloon.updatePosition(this._getBalloonPositionData())}destroy(){super.destroy(),this.stopListening(),this._fireSelectionChangeDebounced.cancel(),this.toolbarView.destroy(),this.focusTracker.destroy(),this._resizeObserver&&this._resizeObserver.destroy()}_getBalloonPositions(n){const l=env$1.isSafari&&env$1.isiOS?BalloonPanelView.generatePositions({heightOffset:Math.max(BalloonPanelView.arrowHeightOffset,Math.round(20/global$1.window.visualViewport.scale))}):BalloonPanelView.defaultPositions;return n?[l.northWestArrowSouth,l.northWestArrowSouthWest,l.northWestArrowSouthEast,l.northWestArrowSouthMiddleEast,l.northWestArrowSouthMiddleWest,l.southWestArrowNorth,l.southWestArrowNorthWest,l.southWestArrowNorthEast,l.southWestArrowNorthMiddleWest,l.southWestArrowNorthMiddleEast]:[l.southEastArrowNorth,l.southEastArrowNorthEast,l.southEastArrowNorthWest,l.southEastArrowNorthMiddleEast,l.southEastArrowNorthMiddleWest,l.northEastArrowSouth,l.northEastArrowSouthEast,l.northEastArrowSouthWest,l.northEastArrowSouthMiddleEast,l.northEastArrowSouthMiddleWest]}}function selectionContainsOnlyMultipleSelectables(o,a){return o.rangeCount===1?!1:[...o.getRanges()].every(n=>{const s=n.getContainedElement();return s&&a.isSelectable(s)})}class MenuBarMenuButtonView extends ListItemButtonView{constructor(n){super(n);M(this,"arrowView");const s=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",l=>String(l)),"data-cke-tooltip-disabled":s.to("isOn")},on:{mouseenter:s.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){const n=new IconView;return n.content=dropdownArrowIcon,n.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),n}}class MenuBarMenuPanelView extends View$1{constructor(n){super(n);M(this,"children");const s=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",s.to("position",l=>`ck-menu-bar__menu__panel_position_${l}`),s.if("isVisible","ck-hidden",l=>!l)],tabindex:"-1"},children:this.children,on:{selectstart:s.to(l=>{l.target.tagName.toLocaleLowerCase()!=="input"&&l.preventDefault()})}})}focus(n=1){this.children.length&&(n===1?this.children.first.focus():this.children.last.focus())}}const cr=class cr extends View$1{constructor(n){super(n);M(this,"buttonView");M(this,"panelView");M(this,"focusTracker");M(this,"keystrokes");const s=this.bindTemplate;this.buttonView=new MenuBarMenuButtonView(n),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new MenuBarMenuPanelView(n),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",s.to("class"),s.if("isEnabled","ck-disabled",l=>!l),s.if("parentMenuView","ck-menu-bar__menu_top-level",l=>!l)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),MenuBarMenuBehaviors.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(MenuBarMenuBehaviors.openOnButtonClick(this),MenuBarMenuBehaviors.openOnArrowRightKey(this),MenuBarMenuBehaviors.closeOnArrowLeftKey(this),MenuBarMenuBehaviors.openAndFocusOnEnterKeyPress(this),MenuBarMenuBehaviors.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),MenuBarMenuBehaviors.openAndFocusPanelOnArrowDownKey(this),MenuBarMenuBehaviors.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(n,s)=>{this.fire("arrowright"),s()}),this.keystrokes.set("arrowleft",(n,s)=>{this.fire("arrowleft"),s()})}_repositionPanelOnOpen(){this.on("change:isOpen",(n,s,l)=>{if(!l)return;const c=cr._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=c?c.name:this._defaultMenuPositionName})}focus(){this.buttonView.focus()}get _panelPositions(){const{southEast:n,southWest:s,northEast:l,northWest:c,westSouth:u,eastSouth:d,westNorth:h,eastNorth:f}=MenuBarMenuViewPanelPositioningFunctions;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[d,f,u,h]:[n,s,l,c]:this.parentMenuView?[u,h,d,f]:[s,n,c,l]}get _defaultMenuPositionName(){return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?"es":"se":this.parentMenuView?"ws":"sw"}};M(cr,"_getOptimalPosition",getOptimalPosition);let MenuBarMenuView=cr;class MenuBarMenuListView extends ListView{constructor(a){super(a),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){const a=Array.from(this.items).some(n=>{const s=pickListButtonMenuViewIfPresent(n);return s&&s.isToggleable});this.items.forEach(n=>{const s=pickListButtonMenuViewIfPresent(n);s&&(s.hasCheckSpace=a)})}}function pickListButtonMenuViewIfPresent(o){return o instanceof ListItemView?o.children.map(a=>isNestedMenuLikeView(a)?a.buttonView:a).find(a=>a instanceof ListItemButtonView):null}function isNestedMenuLikeView(o){return typeof o=="object"&&"buttonView"in o&&o.buttonView instanceof ButtonView}class MenuBarMenuListItemFileDialogButtonView extends FileDialogListItemButtonView{constructor(a){super(a),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}}const EVENT_NAME_DELEGATES=["mouseenter","arrowleft","arrowright","change:isOpen"];class MenuBarView extends View$1{constructor(n){super(n);M(this,"children");M(this,"menus",[]);const s=n.t,l=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",l.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":s("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(n,s,l=[]){const c=this.locale,d=processMenuBarConfig({normalizedConfig:n,locale:c,componentFactory:s,extraItems:l}).items.map(h=>this._createMenu({componentFactory:s,menuDefinition:h}));this.children.addMany(d)}render(){super.render(),MenuBarBehaviors.toggleMenusAndFocusItemsOnHover(this),MenuBarBehaviors.closeMenusWhenTheBarCloses(this),MenuBarBehaviors.closeMenuWhenAnotherOnTheSameLevelOpens(this),MenuBarBehaviors.focusCycleMenusOnArrows(this),MenuBarBehaviors.closeOnClickOutside(this),MenuBarBehaviors.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(const n of this.children)n.isOpen=!1}registerMenu(n,s=null){s?(n.delegate(...EVENT_NAME_DELEGATES).to(s),n.parentMenuView=s):n.delegate(...EVENT_NAME_DELEGATES).to(this,l=>"menu:"+l),n._attachBehaviors(),this.menus.push(n)}_createMenu({componentFactory:n,menuDefinition:s,parentMenuView:l}){const c=this.locale,u=new MenuBarMenuView(c);return this.registerMenu(u,l),u.buttonView.set({label:s.label}),u.once("change:isOpen",()=>{const d=new MenuBarMenuListView(c);d.ariaLabel=s.label,u.panelView.children.add(d),d.items.addMany(this._createMenuItems({menuDefinition:s,parentMenuView:u,componentFactory:n}))}),u}_createMenuItems({menuDefinition:n,parentMenuView:s,componentFactory:l}){const c=this.locale,u=[];for(const d of n.groups){for(const h of d.items){const f=new MenuBarMenuListItemView(c,s);if(isObject$6(h))f.children.add(this._createMenu({componentFactory:l,menuDefinition:h,parentMenuView:s}));else{const p=this._createMenuItemContentFromFactory({componentName:h,componentFactory:l,parentMenuView:s});if(!p)continue;f.children.add(p)}u.push(f)}d!==n.groups[n.groups.length-1]&&u.push(new ListSeparatorView(c))}return u}_createMenuItemContentFromFactory({componentName:n,parentMenuView:s,componentFactory:l}){const c=l.create(n);return c instanceof MenuBarMenuView||c instanceof MenuBarMenuListItemButtonView||c instanceof MenuBarMenuListItemFileDialogButtonView?(this._registerMenuTree(c,s),c.on("execute",()=>{this.close()}),c):(logWarning("menu-bar-component-unsupported",{componentName:n,componentView:c}),null)}_registerMenuTree(n,s){if(!(n instanceof MenuBarMenuView)){n.delegate("mouseenter").to(s);return}this.registerMenu(n,s);const l=n.panelView.children.filter(u=>u instanceof MenuBarMenuListView)[0];if(!l){n.delegate("mouseenter").to(s);return}const c=l.items.filter(u=>u instanceof ListItemView);for(const u of c)this._registerMenuTree(u.children.get(0),n)}_setupIsOpenUpdater(){let n;this.on("menu:change:isOpen",(s,l,c)=>{clearTimeout(n),c?this.isOpen=!0:n=setTimeout(()=>{this.isOpen=Array.from(this.children).some(u=>u.isOpen)},0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const supportedOptions=["left","right","center","justify"];function isSupported(o){return supportedOptions.includes(o)}function isDefault(o,a){return a.contentLanguageDirection=="rtl"?o==="right":o==="left"}function normalizeAlignmentOptions(o){const a=o.map(s=>{let l;return typeof s=="string"?l={name:s}:l=s,l}).filter(s=>{const l=supportedOptions.includes(s.name);return l||logWarning("alignment-config-name-not-recognized",{option:s}),l}),n=a.filter(s=>!!s.className).length;if(n&&n<a.length)throw new CKEditorError("alignment-config-classnames-are-missing",{configuredOptions:o});return a.forEach((s,l,c)=>{const u=c.slice(l+1);if(u.some(h=>h.name==s.name))throw new CKEditorError("alignment-config-name-already-defined",{option:s,configuredOptions:o});if(s.className&&u.some(f=>f.className==s.className))throw new CKEditorError("alignment-config-classname-already-defined",{option:s,configuredOptions:o})}),a}const ALIGNMENT="alignment";class AlignmentCommand extends Command{refresh(){const n=this.editor.locale,s=first(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!s&&this._canBeAligned(s),this.isEnabled&&s.hasAttribute("alignment")?this.value=s.getAttribute("alignment"):this.value=n.contentLanguageDirection==="rtl"?"right":"left"}execute(a={}){const n=this.editor,s=n.locale,l=n.model,c=l.document,u=a.value;l.change(d=>{const h=Array.from(c.selection.getSelectedBlocks()).filter(g=>this._canBeAligned(g)),f=h[0].getAttribute("alignment");isDefault(u,s)||f===u||!u?removeAlignmentFromSelection(h,d):setAlignmentOnSelection(h,d,u)})}_canBeAligned(a){return this.editor.model.schema.checkAttribute(a,ALIGNMENT)}}function removeAlignmentFromSelection(o,a){for(const n of o)a.removeAttribute(ALIGNMENT,n)}function setAlignmentOnSelection(o,a,n){for(const s of o)a.setAttribute(ALIGNMENT,n,s)}class AlignmentEditing extends Plugin{static get pluginName(){return"AlignmentEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("alignment",{options:supportedOptions.map(n=>({name:n}))})}init(){const a=this.editor,n=a.locale,s=a.model.schema,c=normalizeAlignmentOptions(a.config.get("alignment.options")).filter(f=>isSupported(f.name)&&!isDefault(f.name,n)),u=c.some(f=>!!f.className);s.extend("$block",{allowAttributes:"alignment"}),a.model.schema.setAttributeProperties("alignment",{isFormatting:!0}),u?a.conversion.attributeToAttribute(buildClassDefinition(c)):a.conversion.for("downcast").attributeToAttribute(buildDowncastInlineDefinition(c));const d=buildUpcastInlineDefinitions(c);for(const f of d)a.conversion.for("upcast").attributeToAttribute(f);const h=buildUpcastCompatibilityDefinitions(c);for(const f of h)a.conversion.for("upcast").attributeToAttribute(f);a.commands.add("alignment",new AlignmentCommand(a))}}function buildDowncastInlineDefinition(o){const a={};for(const{name:s}of o)a[s]={key:"style",value:{"text-align":s}};return{model:{key:"alignment",values:o.map(s=>s.name)},view:a}}function buildUpcastInlineDefinitions(o){const a=[];for(const{name:n}of o)a.push({view:{key:"style",value:{"text-align":n}},model:{key:"alignment",value:n}});return a}function buildUpcastCompatibilityDefinitions(o){const a=[];for(const{name:n}of o)a.push({view:{key:"align",value:n},model:{key:"alignment",value:n}});return a}function buildClassDefinition(o){const a={};for(const s of o)a[s.name]={key:"class",value:s.className};return{model:{key:"alignment",values:o.map(s=>s.name)},view:a}}const iconsMap=new Map([["left",icons.alignLeft],["right",icons.alignRight],["center",icons.alignCenter],["justify",icons.alignJustify]]);class AlignmentUI extends Plugin{get localizedOptionTitles(){const a=this.editor.t;return{left:a("Align left"),right:a("Align right"),center:a("Align center"),justify:a("Justify")}}static get pluginName(){return"AlignmentUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=normalizeAlignmentOptions(a.config.get("alignment.options"));n.map(s=>s.name).filter(isSupported).forEach(s=>this._addButton(s)),this._addToolbarDropdown(n),this._addMenuBarMenu(n)}_addButton(a){this.editor.ui.componentFactory.add(`alignment:${a}`,s=>this._createButton(s,a))}_createButton(a,n,s={}){const l=this.editor,c=l.commands.get("alignment"),u=new ButtonView(a);return u.set({label:this.localizedOptionTitles[n],icon:iconsMap.get(n),tooltip:!0,isToggleable:!0,...s}),u.bind("isEnabled").to(c),u.bind("isOn").to(c,"value",d=>d===n),this.listenTo(u,"execute",()=>{l.execute("alignment",{value:n}),l.editing.view.focus()}),u}_addToolbarDropdown(a){const n=this.editor;n.ui.componentFactory.add("alignment",l=>{const c=createDropdown(l),u=l.uiLanguageDirection==="rtl"?"w":"e",d=l.t;addToolbarToDropdown(c,()=>a.map(p=>this._createButton(l,p.name,{tooltipPosition:u})),{enableActiveItemFocusOnDropdownOpen:!0,isVertical:!0,ariaLabel:d("Text alignment toolbar")}),c.buttonView.set({label:d("Text alignment"),tooltip:!0}),c.extendTemplate({attributes:{class:"ck-alignment-dropdown"}});const h=l.contentLanguageDirection==="rtl"?iconsMap.get("right"):iconsMap.get("left"),f=n.commands.get("alignment");return c.buttonView.bind("icon").to(f,"value",p=>iconsMap.get(p)||h),c.bind("isEnabled").to(f,"isEnabled"),this.listenTo(c,"execute",()=>{n.editing.view.focus()}),c})}_addMenuBarMenu(a){const n=this.editor;n.ui.componentFactory.add("menuBar:alignment",s=>{const l=n.commands.get("alignment"),c=s.t,u=new MenuBarMenuView(s),d=new MenuBarMenuListView(s);u.bind("isEnabled").to(l),d.set({ariaLabel:c("Text alignment"),role:"menu"}),u.buttonView.set({label:c("Text alignment")});for(const h of a){const f=new MenuBarMenuListItemView(s,u),p=new MenuBarMenuListItemButtonView(s);p.delegate("execute").to(u),p.set({label:this.localizedOptionTitles[h.name],icon:iconsMap.get(h.name),role:"menuitemcheckbox",isToggleable:!0}),p.on("execute",()=>{n.execute("alignment",{value:h.name}),n.editing.view.focus()}),p.bind("isOn").to(l,"value",g=>g===h.name),p.bind("isEnabled").to(l,"isEnabled"),f.children.add(p),d.items.add(f)}return u.panelView.children.add(d),u})}}class Alignment extends Plugin{static get requires(){return[AlignmentEditing,AlignmentUI]}static get pluginName(){return"Alignment"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ChangeBuffer{constructor(a,n=20){M(this,"model");M(this,"limit");M(this,"_isLocked");M(this,"_size");M(this,"_batch",null);M(this,"_changeCallback");M(this,"_selectionChangeCallback");this.model=a,this._size=0,this.limit=n,this._isLocked=!1,this._changeCallback=(s,l)=>{l.isLocal&&l.isUndoable&&l!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(a){this._size+=a,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(a=!1){(!this.isLocked||a)&&(this._batch=null,this._size=0)}}class InsertTextCommand extends Command{constructor(n,s){super(n);M(this,"_buffer");this._buffer=new ChangeBuffer(n.model,s),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(n={}){const s=this.editor.model,l=s.document,c=n.text||"",u=c.length;let d=l.selection;if(n.selection?d=n.selection:n.range&&(d=s.createSelection(n.range)),!s.canEditAt(d))return;const h=n.resultRange;s.enqueueChange(this._buffer.batch,f=>{this._buffer.lock();const p=Array.from(l.selection.getAttributes());s.deleteContent(d),c&&s.insertContent(f.createText(c,p),d),h?f.setSelection(h):d.is("documentSelection")||f.setSelection(d),this._buffer.unlock(),this._buffer.input(u)})}}const TYPING_INPUT_TYPES=["insertText","insertReplacementText"],TYPING_INPUT_TYPES_ANDROID=[...TYPING_INPUT_TYPES,"insertCompositionText"];class InsertTextObserver extends Observer{constructor(n){super(n);M(this,"focusObserver");this.focusObserver=n.getObserver(FocusObserver);const s=env$1.isAndroid?TYPING_INPUT_TYPES_ANDROID:TYPING_INPUT_TYPES,l=n.document;l.on("beforeinput",(c,u)=>{if(!this.isEnabled)return;const{data:d,targetRanges:h,inputType:f,domEvent:p}=u;if(!s.includes(f))return;this.focusObserver.flush();const g=new EventInfo(l,"insertText");l.fire(g,new DomEventData(n,p,{text:d,selection:n.createSelection(h)})),g.stop.called&&c.stop()}),env$1.isAndroid||l.on("compositionend",(c,{data:u,domEvent:d})=>{this.isEnabled&&u&&l.fire("insertText",new DomEventData(n,d,{text:u}))},{priority:"lowest"})}observe(){}stopObserving(){}}class Input extends Plugin{constructor(){super(...arguments);M(this,"_compositionQueue")}static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model,l=n.editing.view,c=n.editing.mapper,u=s.document.selection;this._compositionQueue=new CompositionQueue(n),l.addObserver(InsertTextObserver);const d=new InsertTextCommand(n,n.config.get("typing.undoStep")||20);n.commands.add("insertText",d),n.commands.add("input",d),this.listenTo(l.document,"insertText",(h,f)=>{l.document.isComposing||f.preventDefault(),env$1.isAndroid&&l.document.isComposing&&this._compositionQueue.flush("next beforeinput");const{text:p,selection:g}=f;let v;g?v=Array.from(g.getRanges()).map(x=>c.toModelRange(x)):v=Array.from(u.getRanges());let b=p;if(env$1.isAndroid){const x=Array.from(v[0].getItems()).reduce((S,E)=>S+(E.is("$textProxy")?E.data:""),"");if(x&&(x.length<=b.length?b.startsWith(x)&&(b=b.substring(x.length),v[0].start=v[0].start.getShiftedBy(x.length)):x.startsWith(b)&&(v[0].start=v[0].start.getShiftedBy(b.length),b="")),b.length==0&&v[0].isCollapsed)return}const w={text:b,selection:s.createSelection(v)};env$1.isAndroid&&l.document.isComposing?this._compositionQueue.push(w):(n.execute("insertText",w),l.scrollToTheSelection())}),env$1.isAndroid?this.listenTo(l.document,"keydown",(h,f)=>{u.isCollapsed||f.keyCode!=229||!l.document.isComposing||deleteSelectionContent(s,d)}):this.listenTo(l.document,"compositionstart",()=>{u.isCollapsed||deleteSelectionContent(s,d)}),env$1.isAndroid?(this.listenTo(l.document,"mutations",(h,{mutations:f})=>{if(l.document.isComposing)for(const{node:p}of f){const g=findMappedViewAncestor(p,c),v=c.toModelElement(g);if(this._compositionQueue.isComposedElement(v)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(l.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(l.document,"compositionend",()=>{const h=[];for(const f of this._compositionQueue.flushComposedElements()){const p=c.toViewElement(f);p&&h.push({type:"children",node:p})}h.length&&l.document.fire("mutations",{mutations:h})},{priority:"lowest"})):this.listenTo(l.document,"compositionend",()=>{l.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}}class CompositionQueue{constructor(a){M(this,"editor");M(this,"flushDebounced",debounce$1(()=>this.flush("timeout"),50));M(this,"_queue",[]);M(this,"_compositionElements",new Set);this.editor=a}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(a){const n={text:a.text};if(a.selection){n.selectionRanges=[];for(const s of a.selection.getRanges())n.selectionRanges.push(LiveRange.fromRange(s)),this._compositionElements.add(s.start.parent)}this._queue.push(n),this.flushDebounced()}shift(){const a=this._queue.shift(),n={text:a.text};if(a.selectionRanges){const s=a.selectionRanges.map(l=>detachLiveRange(l)).filter(l=>!!l);s.length&&(n.selection=this.editor.model.createSelection(s))}return n}flush(a){const n=this.editor,s=n.model,l=n.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;const u=n.commands.get("insertText").buffer;s.enqueueChange(u.batch,()=>{for(u.lock();this._queue.length;){const d=this.shift();n.execute("insertText",d)}u.unlock()}),l.scrollToTheSelection()}isComposedElement(a){return this._compositionElements.has(a)}flushComposedElements(){const a=Array.from(this._compositionElements);return this._compositionElements.clear(),a}}function deleteSelectionContent(o,a){if(!a.isEnabled)return;const n=a.buffer;n.lock(),o.enqueueChange(n.batch,()=>{o.deleteContent(o.document.selection)}),n.unlock()}function detachLiveRange(o){const a=o.toRange();return o.detach(),a.root.rootName=="$graveyard"?null:a}function findMappedViewAncestor(o,a){let n=o.is("$text")?o.parent:o;for(;!a.toModelElement(n);)n=n.parent;return n}class DeleteCommand extends Command{constructor(n,s){super(n);M(this,"direction");M(this,"_buffer");this.direction=s,this._buffer=new ChangeBuffer(n.model,n.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(n={}){const s=this.editor.model,l=s.document;s.enqueueChange(this._buffer.batch,c=>{this._buffer.lock();const u=c.createSelection(n.selection||l.selection);if(!s.canEditAt(u))return;const d=n.sequence||1,h=u.isCollapsed;if(u.isCollapsed&&s.modifySelection(u,{direction:this.direction,unit:n.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(d)){this._replaceEntireContentWithParagraph(c);return}if(this._shouldReplaceFirstBlockWithParagraph(u,d)){this.editor.execute("paragraph",{selection:u});return}if(u.isCollapsed)return;let f=0;u.getFirstRange().getMinimalFlatRanges().forEach(p=>{f+=count$1(p.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),s.deleteContent(u,{doNotResetEntireContent:h,direction:this.direction}),this._buffer.input(f),c.setSelection(u),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(n){if(n>1)return!1;const s=this.editor.model,c=s.document.selection,u=s.schema.getLimitElement(c);if(!(c.isCollapsed&&c.containsEntireContent(u))||!s.schema.checkChild(u,"paragraph"))return!1;const h=u.getChild(0);return!(h&&h.is("element","paragraph"))}_replaceEntireContentWithParagraph(n){const s=this.editor.model,c=s.document.selection,u=s.schema.getLimitElement(c),d=n.createElement("paragraph");n.remove(n.createRangeIn(u)),n.insert(d,u),n.setSelection(d,0)}_shouldReplaceFirstBlockWithParagraph(n,s){const l=this.editor.model;if(s>1||this.direction!="backward"||!n.isCollapsed)return!1;const c=n.getFirstPosition(),u=l.schema.getLimitElement(c),d=u.getChild(0);return!(c.parent!=d||!n.containsEntireContent(d)||!l.schema.checkChild(u,"paragraph")||d.name=="paragraph")}}const DELETE_CHARACTER="character",DELETE_WORD="word",DELETE_CODE_POINT="codePoint",DELETE_SELECTION="selection",DELETE_BACKWARD="backward",DELETE_FORWARD="forward",DELETE_EVENT_TYPES={deleteContent:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentBackward:{unit:DELETE_CODE_POINT,direction:DELETE_BACKWARD},deleteWordBackward:{unit:DELETE_WORD,direction:DELETE_BACKWARD},deleteHardLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteSoftLineBackward:{unit:DELETE_SELECTION,direction:DELETE_BACKWARD},deleteContentForward:{unit:DELETE_CHARACTER,direction:DELETE_FORWARD},deleteWordForward:{unit:DELETE_WORD,direction:DELETE_FORWARD},deleteHardLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD},deleteSoftLineForward:{unit:DELETE_SELECTION,direction:DELETE_FORWARD}};class DeleteObserver extends Observer{constructor(a){super(a);const n=a.document;let s=0;n.on("keydown",()=>{s++}),n.on("keyup",()=>{s=0}),n.on("beforeinput",(l,c)=>{if(!this.isEnabled)return;const{targetRanges:u,domEvent:d,inputType:h}=c,f=DELETE_EVENT_TYPES[h];if(!f)return;const p={direction:f.direction,unit:f.unit,sequence:s};p.unit==DELETE_SELECTION&&(p.selectionToRemove=a.createSelection(u[0])),h==="deleteContentBackward"&&(env$1.isAndroid&&(p.sequence=1),shouldUseTargetRanges(u)&&(p.unit=DELETE_SELECTION,p.selectionToRemove=a.createSelection(u)));const g=new BubblingEventInfo(n,"delete",u[0]);n.fire(g,new DomEventData(a,d,p)),g.stop.called&&l.stop()}),env$1.isBlink&&enableChromeWorkaround(this)}observe(){}stopObserving(){}}function enableChromeWorkaround(o){const a=o.view,n=a.document;let s=null,l=!1;n.on("keydown",(d,{keyCode:h})=>{s=h,l=!1}),n.on("keyup",(d,{keyCode:h,domEvent:f})=>{const p=n.selection,g=o.isEnabled&&h==s&&c(h)&&!p.isCollapsed&&!l;if(s=null,g){const v=p.getFirstRange(),b=new BubblingEventInfo(n,"delete",v),w={unit:DELETE_SELECTION,direction:u(h),selectionToRemove:p};n.fire(b,new DomEventData(a,f,w))}}),n.on("beforeinput",(d,{inputType:h})=>{const f=DELETE_EVENT_TYPES[h];c(s)&&f&&f.direction==u(s)&&(l=!0)},{priority:"high"}),n.on("beforeinput",(d,{inputType:h,data:f})=>{s==keyCodes.delete&&h=="insertText"&&f==""&&d.stop()},{priority:"high"});function c(d){return d==keyCodes.backspace||d==keyCodes.delete}function u(d){return d==keyCodes.backspace?DELETE_BACKWARD:DELETE_FORWARD}}function shouldUseTargetRanges(o){if(o.length!=1||o[0].isCollapsed)return!1;const a=o[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0});let n=0;for(const{nextPosition:s,item:l}of a){if(s.parent.is("$text")){const c=s.parent.data,u=s.offset;if(isInsideSurrogatePair(c,u)||isInsideCombinedSymbol(c,u)||isInsideEmojiSequence(c,u))continue;n++}else(l.is("containerElement")||l.is("emptyElement"))&&n++;if(n>1)return!0}return!1}class Delete extends Plugin{constructor(){super(...arguments);M(this,"_undoOnBackspace")}static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.editing.view,l=s.document,c=n.model.document;s.addObserver(DeleteObserver),this._undoOnBackspace=!1;const u=new DeleteCommand(n,"forward");n.commands.add("deleteForward",u),n.commands.add("forwardDelete",u),n.commands.add("delete",new DeleteCommand(n,"backward")),this.listenTo(l,"delete",(d,h)=>{l.isComposing||h.preventDefault();const{direction:f,sequence:p,selectionToRemove:g,unit:v}=h,b=f==="forward"?"deleteForward":"delete",w={sequence:p};if(v=="selection"){const x=Array.from(g.getRanges()).map(S=>n.editing.mapper.toModelRange(S));w.selection=n.model.createSelection(x)}else w.unit=v;n.execute(b,w),s.scrollToTheSelection()},{priority:"low"}),this.listenTo(l,"keydown",(d,h)=>{if(l.isComposing||h.keyCode!=keyCodes.backspace||!c.selection.isCollapsed)return;const f=n.model.schema.getLimitElement(c.selection);n.model.createPositionAt(f,0).isTouching(c.selection.getFirstPosition())&&h.preventDefault()}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(l,"delete",(d,h)=>{this._undoOnBackspace&&h.direction=="backward"&&h.sequence==1&&h.unit=="codePoint"&&(this._undoOnBackspace=!1,n.execute("undo"),h.preventDefault(),d.stop())},{context:"$capture"}),this.listenTo(c,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}class Typing extends Plugin{static get requires(){return[Input,Delete]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLastTextLine(o,a){let n=o.start;return{text:Array.from(o.getWalker({ignoreElementEnd:!1})).reduce((l,{item:c})=>c.is("$text")||c.is("$textProxy")?l+c.data:(n=a.createPositionAfter(c),""),""),range:a.createRange(n,o.end)}}class TextWatcher extends ObservableMixin(){constructor(n,s){super();M(this,"model");M(this,"testCallback");M(this,"_hasMatch");this.model=n,this.testCallback=s,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(n.document.selection),this.stopListening(n.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){const s=this.model.document;this.listenTo(s.selection,"change:range",(l,{directChange:c})=>{if(c){if(!s.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(s,"change:data",(l,c)=>{c.isUndo||!c.isLocal||this._evaluateTextBeforeSelection("data",{batch:c})})}_evaluateTextBeforeSelection(n,s={}){const l=this.model,u=l.document.selection,d=l.createRange(l.createPositionAt(u.focus.parent,0),u.focus),{text:h,range:f}=getLastTextLine(d,l),p=this.testCallback(h);if(!p&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!p,p){const g=Object.assign(s,{text:h,range:f});typeof p=="object"&&Object.assign(g,p),this.fire(`matched:${n}`,g)}}}class TwoStepCaretMovement extends Plugin{constructor(n){super(n);M(this,"attributes");M(this,"_overrideUid");M(this,"_isNextGravityRestorationSkipped",!1);this.attributes=new Set,this._overrideUid=null}static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model,l=n.editing.view,c=n.locale,u=s.document.selection;this.listenTo(l.document,"arrowKey",(d,h)=>{if(!u.isCollapsed||h.shiftKey||h.altKey||h.ctrlKey)return;const f=h.keyCode==keyCodes.arrowright,p=h.keyCode==keyCodes.arrowleft;if(!f&&!p)return;const g=c.contentLanguageDirection;let v=!1;g==="ltr"&&f||g==="rtl"&&p?v=this._handleForwardMovement(h):v=this._handleBackwardMovement(h),v===!0&&d.stop()},{context:"$text",priority:"highest"}),this.listenTo(u,"change:range",(d,h)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!h.directChange&&isBetweenDifferentAttributes(u.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(n){this.attributes.add(n)}_handleForwardMovement(n){const s=this.attributes,l=this.editor.model,c=l.document.selection,u=c.getFirstPosition();return this._isGravityOverridden||u.isAtStart&&hasAnyAttribute$1(c,s)?!1:isBetweenDifferentAttributes(u,s)?(preventCaretMovement(n),hasAnyAttribute$1(c,s)&&isBetweenDifferentAttributes(u,s,!0)?clearSelectionAttributes(l,s):this._overrideGravity(),!0):!1}_handleBackwardMovement(n){const s=this.attributes,l=this.editor.model,c=l.document.selection,u=c.getFirstPosition();return this._isGravityOverridden?(preventCaretMovement(n),this._restoreGravity(),isBetweenDifferentAttributes(u,s,!0)?clearSelectionAttributes(l,s):setSelectionAttributesFromTheNodeBefore(l,s,u),!0):u.isAtStart?hasAnyAttribute$1(c,s)?(preventCaretMovement(n),setSelectionAttributesFromTheNodeBefore(l,s,u),!0):!1:!hasAnyAttribute$1(c,s)&&isBetweenDifferentAttributes(u,s,!0)?(preventCaretMovement(n),setSelectionAttributesFromTheNodeBefore(l,s,u),!0):isStepAfterAnyAttributeBoundary(u,s)?u.isAtEnd&&!hasAnyAttribute$1(c,s)&&isBetweenDifferentAttributes(u,s)?(preventCaretMovement(n),setSelectionAttributesFromTheNodeBefore(l,s,u),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){const n=this.editor,s=n.model,l=s.document.selection,c=n.editing.view.document;n.editing.view.addObserver(MouseObserver),n.editing.view.addObserver(TouchObserver);let u=!1,d=!1;this.listenTo(c,"touchstart",()=>{d=!1,u=!0}),this.listenTo(c,"mousedown",()=>{d=!0}),this.listenTo(c,"selectionChange",()=>{const h=this.attributes;if(!d&&!u||(d=!1,u=!1,!l.isCollapsed)||!hasAnyAttribute$1(l,h))return;const f=l.getFirstPosition();isBetweenDifferentAttributes(f,h)&&(f.isAtStart||isBetweenDifferentAttributes(f,h,!0)?clearSelectionAttributes(s,h):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){const s=this.editor.model,l=s.document.selection,c=this.attributes;this.listenTo(s,"insertContent",()=>{const u=l.getFirstPosition();hasAnyAttribute$1(l,c)&&isBetweenDifferentAttributes(u,c)&&clearSelectionAttributes(s,c)},{priority:"low"})}_handleDeleteContentAfterNode(){const n=this.editor,s=n.model,l=s.document.selection,c=n.editing.view;let u=!1,d=!1;this.listenTo(c.document,"delete",(h,f)=>{u=f.direction==="backward"},{priority:"high"}),this.listenTo(s,"deleteContent",()=>{if(!u)return;const h=l.getFirstPosition();d=hasAnyAttribute$1(l,this.attributes)&&!isStepAfterAnyAttributeBoundary(h,this.attributes)},{priority:"high"}),this.listenTo(s,"deleteContent",()=>{u&&(u=!1,!d&&n.model.enqueueChange(()=>{const h=l.getFirstPosition();hasAnyAttribute$1(l,this.attributes)&&isBetweenDifferentAttributes(h,this.attributes)&&(h.isAtStart||isBetweenDifferentAttributes(h,this.attributes,!0)?clearSelectionAttributes(s,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(n=>n.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(n=>{n.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}}function hasAnyAttribute$1(o,a){for(const n of a)if(o.hasAttribute(n))return!0;return!1}function setSelectionAttributesFromTheNodeBefore(o,a,n){const s=n.nodeBefore;o.change(l=>{if(s){const c=[],u=o.schema.isObject(s)&&o.schema.isInline(s);for(const[d,h]of s.getAttributes())o.schema.checkAttribute("$text",d)&&(!u||o.schema.getAttributeProperties(d).copyFromObject!==!1)&&c.push([d,h]);l.setSelectionAttribute(c)}else l.removeSelectionAttribute(a)})}function clearSelectionAttributes(o,a){o.change(n=>{n.removeSelectionAttribute(a)})}function preventCaretMovement(o){o.preventDefault()}function isStepAfterAnyAttributeBoundary(o,a){const n=o.getShiftedBy(-1);return isBetweenDifferentAttributes(n,a)}function isBetweenDifferentAttributes(o,a,n=!1){const{nodeBefore:s,nodeAfter:l}=o;for(const c of a){const u=s?s.getAttribute(c):void 0,d=l?l.getAttribute(c):void 0;if(!(n&&(u===void 0||d===void 0))&&d!==u)return!0}return!1}const TRANSFORMATIONS={copyright:{from:"(c)",to:"©"},registeredTrademark:{from:"(r)",to:"®"},trademark:{from:"(tm)",to:"™"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"½",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"⅓",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"⅔",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"¼",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"¾",null]},lessThanOrEqual:{from:"<=",to:"≤"},greaterThanOrEqual:{from:">=",to:"≥"},notEqual:{from:"!=",to:"≠"},arrowLeft:{from:"<-",to:"←"},arrowRight:{from:"->",to:"→"},horizontalEllipsis:{from:"...",to:"…"},enDash:{from:/(^| )(--)( )$/,to:[null,"–",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"—",null]},quotesPrimary:{from:buildQuotesRegExp('"'),to:[null,"“",null,"”"]},quotesSecondary:{from:buildQuotesRegExp("'"),to:[null,"‘",null,"’"]},quotesPrimaryEnGb:{from:buildQuotesRegExp("'"),to:[null,"‘",null,"’"]},quotesSecondaryEnGb:{from:buildQuotesRegExp('"'),to:[null,"“",null,"”"]},quotesPrimaryPl:{from:buildQuotesRegExp('"'),to:[null,"„",null,"”"]},quotesSecondaryPl:{from:buildQuotesRegExp("'"),to:[null,"‚",null,"’"]}},TRANSFORMATION_GROUPS={symbols:["copyright","registeredTrademark","trademark"],mathematical:["oneHalf","oneThird","twoThirds","oneForth","threeQuarters","lessThanOrEqual","greaterThanOrEqual","notEqual","arrowLeft","arrowRight"],typography:["horizontalEllipsis","enDash","emDash"],quotes:["quotesPrimary","quotesSecondary"]},DEFAULT_TRANSFORMATIONS=["symbols","mathematical","typography","quotes"];class TextTransformation extends Plugin{static get requires(){return["Delete","Input"]}static get pluginName(){return"TextTransformation"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("typing",{transformations:{include:DEFAULT_TRANSFORMATIONS}})}init(){const n=this.editor.model.document.selection;n.on("change:range",()=>{this.isEnabled=!n.anchor.parent.is("element","codeBlock")}),this._enableTransformationWatchers()}_enableTransformationWatchers(){const a=this.editor,n=a.model,s=a.plugins.get("Delete"),l=normalizeTransformations(a.config.get("typing.transformations")),c=d=>{for(const h of l)if(h.from.test(d))return{normalizedTransformation:h}},u=new TextWatcher(a.model,c);u.on("matched:data",(d,h)=>{if(!h.batch.isTyping)return;const{from:f,to:p}=h.normalizedTransformation,g=f.exec(h.text),v=p(g.slice(1)),b=h.range;let w=g.index;n.enqueueChange(x=>{for(let S=1;S<g.length;S++){const E=g[S],T=v[S-1];if(T==null){w+=E.length;continue}const C=b.start.getShiftedBy(w),A=n.createRange(C,C.getShiftedBy(E.length)),R=getTextAttributesAfterPosition(C);n.insertContent(x.createText(T,R),A),w+=T.length}n.enqueueChange(()=>{s.requestUndoOnBackspace()})})}),u.bind("isEnabled").to(this)}}function normalizeFrom(o){return typeof o=="string"?new RegExp(`(${escapeRegExp(o)})$`):o}function normalizeTo(o){return typeof o=="string"?()=>[o]:o instanceof Array?()=>o:o}function getTextAttributesAfterPosition(o){return(o.textNode?o.textNode:o.nodeAfter).getAttributes()}function buildQuotesRegExp(o){return new RegExp(`(^|\\s)(${o})([^${o}]*)(${o})$`)}function normalizeTransformations(o){const a=o.extra||[],n=o.remove||[],s=c=>!n.includes(c),l=o.include.concat(a).filter(s);return expandGroupsAndRemoveDuplicates(l).filter(s).map(c=>typeof c=="string"&&TRANSFORMATIONS[c]?TRANSFORMATIONS[c]:c).filter(c=>typeof c=="object").map(c=>({from:normalizeFrom(c.from),to:normalizeTo(c.to)}))}function expandGroupsAndRemoveDuplicates(o){const a=new Set;for(const n of o)if(typeof n=="string"&&TRANSFORMATION_GROUPS[n])for(const s of TRANSFORMATION_GROUPS[n])a.add(s);else a.add(n);return Array.from(a)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function findAttributeRange(o,a,n,s){return s.createRange(findAttributeRangeBound(o,a,n,!0,s),findAttributeRangeBound(o,a,n,!1,s))}function findAttributeRangeBound(o,a,n,s,l){let c=o.textNode||(s?o.nodeBefore:o.nodeAfter),u=null;for(;c&&c.getAttribute(a)==n;)u=c,c=s?c.previousSibling:c.nextSibling;return u?l.createPositionAt(u,s?"before":"after"):o}function inlineHighlight(o,a,n,s){const l=o.editing.view,c=new Set;l.document.registerPostFixer(u=>{const d=o.model.document.selection;let h=!1;if(d.hasAttribute(a)){const f=findAttributeRange(d.getFirstPosition(),a,d.getAttribute(a),o.model),p=o.editing.mapper.toViewRange(f);for(const g of p.getItems())g.is("element",n)&&!g.hasClass(s)&&(u.addClass(s,g),c.add(g),h=!0)}return h}),o.conversion.for("editingDowncast").add(u=>{u.on("insert",d,{priority:"highest"}),u.on("remove",d,{priority:"highest"}),u.on("attribute",d,{priority:"highest"}),u.on("selection",d,{priority:"highest"});function d(){l.change(h=>{for(const f of c.values())h.removeClass(s,f),c.delete(f)})}})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function blockAutoformatEditing(o,a,n,s){let l,c=null;typeof s=="function"?l=s:(c=o.commands.get(s),l=()=>{o.execute(s)}),o.model.document.on("change:data",(u,d)=>{if(c&&!c.isEnabled||!a.isEnabled)return;const h=first(o.model.document.selection.getRanges());if(!h.isCollapsed||d.isUndo||!d.isLocal)return;const f=Array.from(o.model.document.differ.getChanges()),p=f[0];if(f.length!=1||p.type!=="insert"||p.name!="$text"||p.length!=1)return;const g=p.position.parent;if(g.is("element","codeBlock")||g.is("element","listItem")&&typeof s!="function"&&!["numberedList","bulletedList","todoList"].includes(s)||c&&c.value===!0)return;const v=g.getChild(0),b=o.model.createRangeOn(v);if(!b.containsRange(h)&&!h.end.isEqual(b.end))return;const w=n.exec(v.data.substr(0,h.end.offset));w&&o.model.enqueueChange(x=>{const S=x.createPositionAt(g,0),E=x.createPositionAt(g,w[0].length),T=new LiveRange(S,E);if(l({match:w})!==!1){x.remove(T);const A=o.model.document.selection.getFirstRange(),R=x.createRangeIn(g);g.isEmpty&&!R.isEqual(A)&&!R.containsRange(A,!0)&&x.remove(g)}T.detach(),o.model.enqueueChange(()=>{o.plugins.get("Delete").requestUndoOnBackspace()})})})}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function inlineAutoformatEditing(o,a,n,s){let l,c;n instanceof RegExp?l=n:c=n,c=c||(u=>{let d;const h=[],f=[];for(;(d=l.exec(u))!==null&&!(d&&d.length<4);){let{index:p,"1":g,"2":v,"3":b}=d;const w=g+v+b;p+=d[0].length-w.length;const x=[p,p+g.length],S=[p+g.length+v.length,p+g.length+v.length+b.length];h.push(x),h.push(S),f.push([p+g.length,p+g.length+v.length])}return{remove:h,format:f}}),o.model.document.on("change:data",(u,d)=>{if(d.isUndo||!d.isLocal||!a.isEnabled)return;const h=o.model,f=h.document.selection;if(!f.isCollapsed)return;const p=Array.from(h.document.differ.getChanges()),g=p[0];if(p.length!=1||g.type!=="insert"||g.name!="$text"||g.length!=1)return;const v=f.focus,b=v.parent,{text:w,range:x}=getTextAfterCode(h.createRange(h.createPositionAt(b,0),v),h),S=c(w),E=testOutputToRanges(x.start,S.format,h),T=testOutputToRanges(x.start,S.remove,h);E.length&&T.length&&h.enqueueChange(C=>{if(s(C,E)!==!1){for(const R of T.reverse())C.remove(R);h.enqueueChange(()=>{o.plugins.get("Delete").requestUndoOnBackspace()})}})})}function testOutputToRanges(o,a,n){return a.filter(s=>s[0]!==void 0&&s[1]!==void 0).map(s=>n.createRange(o.getShiftedBy(s[0]),o.getShiftedBy(s[1])))}function getTextAfterCode(o,a){let n=o.start;return{text:Array.from(o.getItems()).reduce((l,c)=>!(c.is("$text")||c.is("$textProxy"))||c.getAttribute("code")?(n=a.createPositionAfter(c),""):l+c.data,""),range:a.createRange(n,o.end)}}class Autoformat extends Plugin{static get requires(){return[Delete]}static get pluginName(){return"Autoformat"}static get isOfficialPlugin(){return!0}afterInit(){const a=this.editor,n=this.editor.t;this._addListAutoformats(),this._addBasicStylesAutoformats(),this._addHeadingAutoformats(),this._addBlockQuoteAutoformats(),this._addCodeBlockAutoformats(),this._addHorizontalLineAutoformats(),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Revert autoformatting action"),keystroke:"Backspace"}]})}_addListAutoformats(){const a=this.editor.commands;a.get("bulletedList")&&blockAutoformatEditing(this.editor,this,/^[*-]\s$/,"bulletedList"),a.get("numberedList")&&blockAutoformatEditing(this.editor,this,/^1[.|)]\s$/,"numberedList"),a.get("todoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?\]\s$/,"todoList"),a.get("checkTodoList")&&blockAutoformatEditing(this.editor,this,/^\[\s?x\s?\]\s$/,()=>{this.editor.execute("todoList"),this.editor.execute("checkTodoList")})}_addBasicStylesAutoformats(){const a=this.editor.commands;if(a.get("bold")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"bold");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*\*)([^*]+)(\*\*)$/g,n),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(__)([^_]+)(__)$/g,n)}if(a.get("italic")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"italic");inlineAutoformatEditing(this.editor,this,/(?:^|\s)(\*)([^*_]+)(\*)$/g,n),inlineAutoformatEditing(this.editor,this,/(?:^|\s)(_)([^_]+)(_)$/g,n)}if(a.get("code")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"code");inlineAutoformatEditing(this.editor,this,/(`)([^`]+)(`)$/g,n)}if(a.get("strikethrough")){const n=getCallbackFunctionForInlineAutoformat(this.editor,"strikethrough");inlineAutoformatEditing(this.editor,this,/(~~)([^~]+)(~~)$/g,n)}}_addHeadingAutoformats(){const a=this.editor.commands.get("heading");a&&a.modelElements.filter(n=>n.match(/^heading[1-6]$/)).forEach(n=>{const s=n[7],l=new RegExp(`^(#{${s}})\\s$`);blockAutoformatEditing(this.editor,this,l,()=>{if(!a.isEnabled||a.value===n)return!1;this.editor.execute("heading",{value:n})})})}_addBlockQuoteAutoformats(){this.editor.commands.get("blockQuote")&&blockAutoformatEditing(this.editor,this,/^>\s$/,"blockQuote")}_addCodeBlockAutoformats(){const a=this.editor,n=a.model.document.selection;a.commands.get("codeBlock")&&blockAutoformatEditing(a,this,/^```$/,()=>{if(n.getFirstPosition().parent.is("element","listItem"))return!1;this.editor.execute("codeBlock",{usePreviousLanguageChoice:!0})})}_addHorizontalLineAutoformats(){this.editor.commands.get("horizontalLine")&&blockAutoformatEditing(this.editor,this,/^---$/,"horizontalLine")}}function getCallbackFunctionForInlineAutoformat(o,a){return(n,s)=>{if(!o.commands.get(a).isEnabled)return!1;const c=o.model.schema.getValidRanges(s,a);for(const u of c)n.setAttribute(a,!0,u);n.removeSelectionAttribute(a)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Autosave extends Plugin{constructor(n){super(n);M(this,"adapter");M(this,"_debouncedSave");M(this,"_lastDocumentVersion");M(this,"_savePromise");M(this,"_domEmitter");M(this,"_config");M(this,"_pendingActions");M(this,"_makeImmediateSave");M(this,"_action",null);const s=n.config.get("autosave")||{},l=s.waitingTime||1e3;this.set("state","synchronized"),this._debouncedSave=debounce$1(this._save.bind(this),l),this._lastDocumentVersion=n.model.document.version,this._savePromise=null,this._domEmitter=new(DomEmitterMixin()),this._config=s,this._pendingActions=n.plugins.get(PendingActions),this._makeImmediateSave=!1}static get pluginName(){return"Autosave"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){const n=this.editor,s=n.model.document;this.listenTo(n,"ready",()=>{this.listenTo(s,"change:data",(l,c)=>{this._saveCallbacks.length&&c.isLocal&&(this.state==="synchronized"&&(this.state="waiting",this._setPendingAction()),this.state==="waiting"&&this._debouncedSave())})}),this.listenTo(n,"destroy",()=>this._flush(),{priority:"highest"});/* istanbul ignore next -- @preserve */this._domEmitter.listenTo(window,"beforeunload",(l,c)=>{this._pendingActions.hasAny&&(c.returnValue=this._pendingActions.first.message)})}destroy(){this._domEmitter.stopListening(),super.destroy()}save(){return this._debouncedSave.cancel(),this._save()}_flush(){this._debouncedSave.flush()}_save(){return this._savePromise?(this._makeImmediateSave=this.editor.model.document.version>this._lastDocumentVersion,this._savePromise):(this._setPendingAction(),this.state="saving",this._lastDocumentVersion=this.editor.model.document.version,this._savePromise=Promise.resolve().then(()=>Promise.all(this._saveCallbacks.map(n=>n(this.editor)))).finally(()=>{this._savePromise=null}).then(()=>{if(this._makeImmediateSave)return this._makeImmediateSave=!1,this._save();this.editor.model.document.version>this._lastDocumentVersion?(this.state="waiting",this._debouncedSave()):(this.state="synchronized",this._pendingActions.remove(this._action),this._action=null)}).catch(n=>{throw this.state="error",this.state="saving",this._debouncedSave(),n}),this._savePromise)}_setPendingAction(){const n=this.editor.t;this._action||(this._action=this._pendingActions.add(n("Saving changes")))}get _saveCallbacks(){const n=[];return this.adapter&&this.adapter.save&&n.push(this.adapter.save),this._config.save&&n.push(this._config.save),n}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AttributeCommand extends Command{constructor(n,s){super(n);M(this,"attributeKey");this.attributeKey=s}refresh(){const n=this.editor.model,s=n.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=n.schema.checkAttributeInSelection(s.selection,this.attributeKey)}execute(n={}){const s=this.editor.model,c=s.document.selection,u=n.forceValue===void 0?!this.value:n.forceValue;s.change(d=>{if(c.isCollapsed)u?d.setSelectionAttribute(this.attributeKey,!0):d.removeSelectionAttribute(this.attributeKey);else{const h=s.schema.getValidRanges(c.getRanges(),this.attributeKey);for(const f of h)u?d.setAttribute(this.attributeKey,u,f):d.removeAttribute(this.attributeKey,f)}})}_getValueFromFirstAllowedNode(){const n=this.editor.model,s=n.schema,l=n.document.selection;if(l.isCollapsed)return l.hasAttribute(this.attributeKey);for(const c of l.getRanges())for(const u of c.getItems())if(s.checkAttribute(u,this.attributeKey))return u.hasAttribute(this.attributeKey);return!1}}const BOLD$1="bold";class BoldEditing extends Plugin{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=this.editor.t;a.model.schema.extend("$text",{allowAttributes:BOLD$1}),a.model.schema.setAttributeProperties(BOLD$1,{isFormatting:!0,copyOnEnter:!0}),a.conversion.attributeToElement({model:BOLD$1,view:"strong",upcastAlso:["b",s=>{const l=s.getStyle("font-weight");return l&&(l=="bold"||Number(l)>=600)?{name:!0,styles:["font-weight"]}:null}]}),a.commands.add(BOLD$1,new AttributeCommand(a,BOLD$1)),a.keystrokes.set("CTRL+B",BOLD$1),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Bold text"),keystroke:"CTRL+B"}]})}}function getButtonCreator({editor:o,commandName:a,plugin:n,icon:s,label:l,keystroke:c}){return u=>{const d=o.commands.get(a),h=new u(o.locale);return h.set({label:l,icon:s,keystroke:c,isToggleable:!0}),h.bind("isEnabled").to(d,"isEnabled"),h.bind("isOn").to(d,"value"),h instanceof MenuBarMenuListItemButtonView?h.set({role:"menuitemcheckbox"}):h.set({tooltip:!0}),n.listenTo(h,"execute",()=>{o.execute(a),o.editing.view.focus()}),h}}const BOLD="bold";class BoldUI extends Plugin{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:BOLD,plugin:this,icon:icons.bold,label:n("Bold"),keystroke:"CTRL+B"});a.ui.componentFactory.add(BOLD,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+BOLD,()=>s(MenuBarMenuListItemButtonView))}}class Bold extends Plugin{static get requires(){return[BoldEditing,BoldUI]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}}const CODE$1="code",HIGHLIGHT_CLASS$2="ck-code_selected";class CodeEditing extends Plugin{static get pluginName(){return"CodeEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement]}init(){const a=this.editor,n=this.editor.t;a.model.schema.extend("$text",{allowAttributes:CODE$1}),a.model.schema.setAttributeProperties(CODE$1,{isFormatting:!0,copyOnEnter:!1}),a.conversion.attributeToElement({model:CODE$1,view:"code"}),a.commands.add(CODE$1,new AttributeCommand(a,CODE$1)),a.plugins.get(TwoStepCaretMovement).registerAttribute(CODE$1),inlineHighlight(a,CODE$1,"code",HIGHLIGHT_CLASS$2),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Move out of an inline code style"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}}var codeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';const CODE="code";class CodeUI extends Plugin{static get pluginName(){return"CodeUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:CODE,plugin:this,icon:codeIcon,label:n("Code")});a.ui.componentFactory.add(CODE,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+CODE,()=>s(MenuBarMenuListItemButtonView))}}class Code extends Plugin{static get requires(){return[CodeEditing,CodeUI]}static get pluginName(){return"Code"}static get isOfficialPlugin(){return!0}}const ITALIC$1="italic";class ItalicEditing extends Plugin{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=this.editor.t;a.model.schema.extend("$text",{allowAttributes:ITALIC$1}),a.model.schema.setAttributeProperties(ITALIC$1,{isFormatting:!0,copyOnEnter:!0}),a.conversion.attributeToElement({model:ITALIC$1,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),a.commands.add(ITALIC$1,new AttributeCommand(a,ITALIC$1)),a.keystrokes.set("CTRL+I",ITALIC$1),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Italic text"),keystroke:"CTRL+I"}]})}}var italicIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';const ITALIC="italic";class ItalicUI extends Plugin{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:ITALIC,plugin:this,icon:italicIcon,keystroke:"CTRL+I",label:n("Italic")});a.ui.componentFactory.add(ITALIC,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+ITALIC,()=>s(MenuBarMenuListItemButtonView))}}class Italic extends Plugin{static get requires(){return[ItalicEditing,ItalicUI]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}}const STRIKETHROUGH$1="strikethrough";class StrikethroughEditing extends Plugin{static get pluginName(){return"StrikethroughEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=this.editor.t;a.model.schema.extend("$text",{allowAttributes:STRIKETHROUGH$1}),a.model.schema.setAttributeProperties(STRIKETHROUGH$1,{isFormatting:!0,copyOnEnter:!0}),a.conversion.attributeToElement({model:STRIKETHROUGH$1,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]}),a.commands.add(STRIKETHROUGH$1,new AttributeCommand(a,STRIKETHROUGH$1)),a.keystrokes.set("CTRL+SHIFT+X","strikethrough"),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Strikethrough text"),keystroke:"CTRL+SHIFT+X"}]})}}var strikethroughIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';const STRIKETHROUGH="strikethrough";class StrikethroughUI extends Plugin{static get pluginName(){return"StrikethroughUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:STRIKETHROUGH,plugin:this,icon:strikethroughIcon,keystroke:"CTRL+SHIFT+X",label:n("Strikethrough")});a.ui.componentFactory.add(STRIKETHROUGH,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+STRIKETHROUGH,()=>s(MenuBarMenuListItemButtonView))}}class Strikethrough extends Plugin{static get requires(){return[StrikethroughEditing,StrikethroughUI]}static get pluginName(){return"Strikethrough"}static get isOfficialPlugin(){return!0}}const SUBSCRIPT$1="subscript";class SubscriptEditing extends Plugin{static get pluginName(){return"SubscriptEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.model.schema.extend("$text",{allowAttributes:SUBSCRIPT$1}),a.model.schema.setAttributeProperties(SUBSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),a.conversion.attributeToElement({model:SUBSCRIPT$1,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]}),a.commands.add(SUBSCRIPT$1,new AttributeCommand(a,SUBSCRIPT$1))}}var subscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';const SUBSCRIPT="subscript";class SubscriptUI extends Plugin{static get pluginName(){return"SubscriptUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:SUBSCRIPT,plugin:this,icon:subscriptIcon,label:n("Subscript")});a.ui.componentFactory.add(SUBSCRIPT,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+SUBSCRIPT,()=>s(MenuBarMenuListItemButtonView))}}class Subscript extends Plugin{static get requires(){return[SubscriptEditing,SubscriptUI]}static get pluginName(){return"Subscript"}static get isOfficialPlugin(){return!0}}const SUPERSCRIPT$1="superscript";class SuperscriptEditing extends Plugin{static get pluginName(){return"SuperscriptEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.model.schema.extend("$text",{allowAttributes:SUPERSCRIPT$1}),a.model.schema.setAttributeProperties(SUPERSCRIPT$1,{isFormatting:!0,copyOnEnter:!0}),a.conversion.attributeToElement({model:SUPERSCRIPT$1,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]}),a.commands.add(SUPERSCRIPT$1,new AttributeCommand(a,SUPERSCRIPT$1))}}var superscriptIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';const SUPERSCRIPT="superscript";class SuperscriptUI extends Plugin{static get pluginName(){return"SuperscriptUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:SUPERSCRIPT,plugin:this,icon:superscriptIcon,label:n("Superscript")});a.ui.componentFactory.add(SUPERSCRIPT,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+SUPERSCRIPT,()=>s(MenuBarMenuListItemButtonView))}}class Superscript extends Plugin{static get requires(){return[SuperscriptEditing,SuperscriptUI]}static get pluginName(){return"Superscript"}static get isOfficialPlugin(){return!0}}const UNDERLINE$1="underline";class UnderlineEditing extends Plugin{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=this.editor.t;a.model.schema.extend("$text",{allowAttributes:UNDERLINE$1}),a.model.schema.setAttributeProperties(UNDERLINE$1,{isFormatting:!0,copyOnEnter:!0}),a.conversion.attributeToElement({model:UNDERLINE$1,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),a.commands.add(UNDERLINE$1,new AttributeCommand(a,UNDERLINE$1)),a.keystrokes.set("CTRL+U","underline"),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Underline text"),keystroke:"CTRL+U"}]})}}var underlineIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';const UNDERLINE="underline";class UnderlineUI extends Plugin{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=getButtonCreator({editor:a,commandName:UNDERLINE,plugin:this,icon:underlineIcon,label:n("Underline"),keystroke:"CTRL+U"});a.ui.componentFactory.add(UNDERLINE,()=>s(ButtonView)),a.ui.componentFactory.add("menuBar:"+UNDERLINE,()=>s(MenuBarMenuListItemButtonView))}}class Underline extends Plugin{static get requires(){return[UnderlineEditing,UnderlineUI]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function*getCopyOnEnterAttributes(o,a){for(const n of a)n&&o.getAttributeProperties(n[0]).copyOnEnter&&(yield n)}class EnterCommand extends Command{execute(){this.editor.model.change(a=>{this.enterBlock(a),this.fire("afterExecute",{writer:a})})}enterBlock(a){const n=this.editor.model,s=n.document.selection,l=n.schema,c=s.isCollapsed,u=s.getFirstRange(),d=u.start.parent,h=u.end.parent;if(l.isLimit(d)||l.isLimit(h))return!c&&d==h&&n.deleteContent(s),!1;if(c){const f=getCopyOnEnterAttributes(a.model.schema,s.getAttributes());return splitBlock(a,u.start),a.setSelectionAttribute(f),!0}else{const f=!(u.start.isAtStart&&u.end.isAtEnd),p=d==h;if(n.deleteContent(s,{leaveUnmerged:f}),f){if(p)return splitBlock(a,s.focus),!0;a.setSelection(h,0)}}return!1}}function splitBlock(o,a){o.split(a),o.setSelection(a.parent.nextSibling,0)}const ENTER_EVENT_TYPES={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}};class EnterObserver extends Observer{constructor(a){super(a);const n=this.document;let s=!1;n.on("keydown",(l,c)=>{s=c.shiftKey}),n.on("beforeinput",(l,c)=>{if(!this.isEnabled)return;let u=c.inputType;env$1.isSafari&&s&&u=="insertParagraph"&&(u="insertLineBreak");const d=c.domEvent,h=ENTER_EVENT_TYPES[u];if(!h)return;const f=new BubblingEventInfo(n,"enter",c.targetRanges[0]);n.fire(f,new DomEventData(a,d,{isSoft:h.isSoft})),f.stop.called&&l.stop()})}observe(){}stopObserving(){}}class Enter extends Plugin{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.editing.view,s=n.document,l=this.editor.t;n.addObserver(EnterObserver),a.commands.add("enter",new EnterCommand(a)),this.listenTo(s,"enter",(c,u)=>{s.isComposing||u.preventDefault(),!u.isSoft&&(a.execute("enter"),n.scrollToTheSelection())},{priority:"low"}),a.accessibility.addKeystrokeInfos({keystrokes:[{label:l("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}class ShiftEnterCommand extends Command{execute(){const a=this.editor.model,n=a.document;a.change(s=>{softBreakAction(a,s,n.selection),this.fire("afterExecute",{writer:s})})}refresh(){const a=this.editor.model,n=a.document;this.isEnabled=isEnabled(a.schema,n.selection)}}function isEnabled(o,a){if(a.rangeCount>1)return!1;const n=a.anchor;if(!n||!o.checkChild(n,"softBreak"))return!1;const s=a.getFirstRange(),l=s.start.parent,c=s.end.parent;return!((isInsideLimitElement(l,o)||isInsideLimitElement(c,o))&&l!==c)}function softBreakAction(o,a,n){const s=n.isCollapsed,l=n.getFirstRange(),c=l.start.parent,u=l.end.parent,d=c==u;if(s){const h=getCopyOnEnterAttributes(o.schema,n.getAttributes());insertBreak(o,a,l.end),a.removeSelectionAttribute(n.getAttributeKeys()),a.setSelectionAttribute(h)}else{const h=!(l.start.isAtStart&&l.end.isAtEnd);o.deleteContent(n,{leaveUnmerged:h}),d?insertBreak(o,a,n.focus):h&&a.setSelection(u,0)}}function insertBreak(o,a,n){const s=a.createElement("softBreak");o.insertContent(s,n),a.setSelection(s,"after")}function isInsideLimitElement(o,a){return o.is("rootElement")?!1:a.isLimit(o)||isInsideLimitElement(o.parent,a)}class ShiftEnter extends Plugin{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.model.schema,s=a.conversion,l=a.editing.view,c=l.document,u=this.editor.t;n.register("softBreak",{allowWhere:"$text",isInline:!0}),s.for("upcast").elementToElement({model:"softBreak",view:"br"}),s.for("downcast").elementToElement({model:"softBreak",view:(d,{writer:h})=>h.createEmptyElement("br")}),l.addObserver(EnterObserver),a.commands.add("shiftEnter",new ShiftEnterCommand(a)),this.listenTo(c,"enter",(d,h)=>{c.isComposing||h.preventDefault(),h.isSoft&&(a.execute("shiftEnter"),l.scrollToTheSelection())},{priority:"low"}),a.accessibility.addKeystrokeInfos({keystrokes:[{label:u("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BlockQuoteCommand extends Command{refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(a={}){const n=this.editor.model,s=n.schema,l=n.document.selection,c=Array.from(l.getSelectedBlocks()),u=a.forceValue===void 0?!this.value:a.forceValue;n.change(d=>{if(!u)this._removeQuote(d,c.filter(findQuote));else{const h=c.filter(f=>findQuote(f)||checkCanBeQuoted(s,f));this._applyQuote(d,h)}})}_getValue(){const a=this.editor.model.document.selection,n=first(a.getSelectedBlocks());return!!(n&&findQuote(n))}_checkEnabled(){if(this.value)return!0;const a=this.editor.model.document.selection,n=this.editor.model.schema,s=first(a.getSelectedBlocks());return s?checkCanBeQuoted(n,s):!1}_removeQuote(a,n){getRangesOfBlockGroups(a,n).reverse().forEach(s=>{if(s.start.isAtStart&&s.end.isAtEnd){a.unwrap(s.start.parent);return}if(s.start.isAtStart){const c=a.createPositionBefore(s.start.parent);a.move(s,c);return}s.end.isAtEnd||a.split(s.end);const l=a.createPositionAfter(s.end.parent);a.move(s,l)})}_applyQuote(a,n){const s=[];getRangesOfBlockGroups(a,n).reverse().forEach(l=>{let c=findQuote(l.start);c||(c=a.createElement("blockQuote"),a.wrap(l,c)),s.push(c)}),s.reverse().reduce((l,c)=>l.nextSibling==c?(a.merge(a.createPositionAfter(l)),l):c)}}function findQuote(o){return o.parent.name=="blockQuote"?o.parent:null}function getRangesOfBlockGroups(o,a){let n,s=0;const l=[];for(;s<a.length;){const c=a[s],u=a[s+1];n||(n=o.createPositionBefore(c)),(!u||c.nextSibling!=u)&&(l.push(o.createRange(n,o.createPositionAfter(c))),n=null),s++}return l}function checkCanBeQuoted(o,a){const n=o.checkChild(a.parent,"blockQuote"),s=o.checkChild(["$root","blockQuote"],a);return n&&s}class BlockQuoteEditing extends Plugin{static get pluginName(){return"BlockQuoteEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const a=this.editor,n=a.model.schema;a.commands.add("blockQuote",new BlockQuoteCommand(a)),n.register("blockQuote",{inheritAllFrom:"$container"}),a.conversion.elementToElement({model:"blockQuote",view:"blockquote"}),a.model.document.registerPostFixer(u=>{const d=a.model.document.differ.getChanges();for(const h of d)if(h.type=="insert"){const f=h.position.nodeAfter;if(!f)continue;if(f.is("element","blockQuote")&&f.isEmpty)return u.remove(f),!0;if(f.is("element","blockQuote")&&!n.checkChild(h.position,f))return u.unwrap(f),!0;if(f.is("element")){const p=u.createRangeIn(f);for(const g of p.getItems())if(g.is("element","blockQuote")&&!n.checkChild(u.createPositionBefore(g),g))return u.unwrap(g),!0}}else if(h.type=="remove"){const f=h.position.parent;if(f.is("element","blockQuote")&&f.isEmpty)return u.remove(f),!0}return!1});const s=this.editor.editing.view.document,l=a.model.document.selection,c=a.commands.get("blockQuote");this.listenTo(s,"enter",(u,d)=>{if(!l.isCollapsed||!c.value)return;l.getLastPosition().parent.isEmpty&&(a.execute("blockQuote"),a.editing.view.scrollToTheSelection(),d.preventDefault(),u.stop())},{context:"blockquote"}),this.listenTo(s,"delete",(u,d)=>{if(d.direction!="backward"||!l.isCollapsed||!c.value)return;const h=l.getLastPosition().parent;h.isEmpty&&!h.previousSibling&&(a.execute("blockQuote"),a.editing.view.scrollToTheSelection(),d.preventDefault(),u.stop())},{context:"blockquote"})}}class BlockQuoteUI extends Plugin{static get pluginName(){return"BlockQuoteUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add("blockQuote",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),a.ui.componentFactory.add("menuBar:blockQuote",()=>{const n=this._createButton(MenuBarMenuListItemButtonView);return n.set({role:"menuitemcheckbox"}),n})}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get("blockQuote"),c=new a(n.locale),u=s.t;return c.set({label:u("Block quote"),icon:icons.quote,isToggleable:!0}),c.bind("isEnabled").to(l,"isEnabled"),c.bind("isOn").to(l,"value"),this.listenTo(c,"execute",()=>{n.execute("blockQuote"),n.editing.view.focus()}),c}}class BlockQuote extends Plugin{static get requires(){return[BlockQuoteEditing,BlockQuoteUI]}static get pluginName(){return"BlockQuote"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightStack extends EmitterMixin(){constructor(){super(...arguments);M(this,"_stack",[])}add(n,s){const l=this._stack,c=l[0];this._insertDescriptor(n);const u=l[0];c!==u&&!compareDescriptors(c,u)&&this.fire("change:top",{oldDescriptor:c,newDescriptor:u,writer:s})}remove(n,s){const l=this._stack,c=l[0];this._removeDescriptor(n);const u=l[0];c!==u&&!compareDescriptors(c,u)&&this.fire("change:top",{oldDescriptor:c,newDescriptor:u,writer:s})}_insertDescriptor(n){const s=this._stack,l=s.findIndex(u=>u.id===n.id);if(compareDescriptors(n,s[l]))return;l>-1&&s.splice(l,1);let c=0;for(;s[c]&&shouldABeBeforeB(s[c],n);)c++;s.splice(c,0,n)}_removeDescriptor(n){const s=this._stack,l=s.findIndex(c=>c.id===n);l>-1&&s.splice(l,1)}}function compareDescriptors(o,a){return o&&a&&o.priority==a.priority&&classesToString(o.classes)==classesToString(a.classes)}function shouldABeBeforeB(o,a){return o.priority>a.priority?!0:o.priority<a.priority?!1:classesToString(o.classes)>classesToString(a.classes)}function classesToString(o){return Array.isArray(o)?o.sort().join(","):o}var dragHandleIcon='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';const WIDGET_CLASS_NAME="ck-widget",WIDGET_SELECTED_CLASS_NAME="ck-widget_selected";function isWidget(o){return o.is("element")?!!o.getCustomProperty("widget"):!1}function toWidget(o,a,n={}){if(!o.is("containerElement"))throw new CKEditorError("widget-to-widget-wrong-element-type",null,{element:o});return a.setAttribute("contenteditable","false",o),a.addClass(WIDGET_CLASS_NAME,o),a.setCustomProperty("widget",!0,o),o.getFillerOffset=getFillerOffset,a.setCustomProperty("widgetLabel",[],o),n.label&&setLabel(o,n.label),n.hasSelectionHandle&&addSelectionHandle(o,a),setHighlightHandling(o,a),o}function addHighlight(o,a,n){if(a.classes&&n.addClass(toArray$2(a.classes),o),a.attributes)for(const s in a.attributes)n.setAttribute(s,a.attributes[s],o)}function removeHighlight(o,a,n){if(a.classes&&n.removeClass(toArray$2(a.classes),o),a.attributes)for(const s in a.attributes)n.removeAttribute(s,o)}function setHighlightHandling(o,a,n=addHighlight,s=removeHighlight){const l=new HighlightStack;l.on("change:top",(d,h)=>{h.oldDescriptor&&s(o,h.oldDescriptor,h.writer),h.newDescriptor&&n(o,h.newDescriptor,h.writer)});const c=(d,h,f)=>l.add(h,f),u=(d,h,f)=>l.remove(h,f);a.setCustomProperty("addHighlight",c,o),a.setCustomProperty("removeHighlight",u,o)}function setLabel(o,a){o.getCustomProperty("widgetLabel").push(a)}function getLabel(o){return o.getCustomProperty("widgetLabel").reduce((n,s)=>typeof s=="function"?n?n+". "+s():s():n?n+". "+s:s,"")}function toWidgetEditable(o,a,n={}){return a.addClass(["ck-editor__editable","ck-editor__nested-editable"],o),a.setAttribute("role","textbox",o),a.setAttribute("tabindex","-1",o),n.label&&a.setAttribute("aria-label",n.label,o),a.setAttribute("contenteditable",o.isReadOnly?"false":"true",o),o.on("change:isReadOnly",(s,l,c)=>{a.setAttribute("contenteditable",c?"false":"true",o)}),o.on("change:isFocused",(s,l,c)=>{c?a.addClass("ck-editor__nested-editable_focused",o):a.removeClass("ck-editor__nested-editable_focused",o)}),setHighlightHandling(o,a),o}function findOptimalInsertionRange(o,a){const n=o.getSelectedElement();if(n){const s=getTypeAroundFakeCaretPosition(o);if(s)return a.createRange(a.createPositionAt(n,s))}return a.schema.findOptimalInsertionRange(o)}function getFillerOffset(){return null}function addSelectionHandle(o,a){const n=a.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(s){const l=this.toDomElement(s),c=new IconView;return c.set("content",dragHandleIcon),c.render(),l.appendChild(c.element),l});a.insert(a.createPositionAt(o,0),n),a.addClass(["ck-widget_with-selection-handle"],o)}function calculateResizeHostAncestorWidth(o){const a=d=>{const{width:h,paddingLeft:f,paddingRight:p}=d.ownerDocument.defaultView.getComputedStyle(d);return parseFloat(h)-(parseFloat(f)||0)-(parseFloat(p)||0)},n=o.parentElement;if(!n)return 0;let s=a(n);const l=5;let c=0,u=n;for(;isNaN(s);){if(u=u.parentElement,++c>l)return 0;s=a(u)}return s}function calculateResizeHostPercentageWidth(o,a=new Rect$3(o)){const n=calculateResizeHostAncestorWidth(o);return n?a.width/n*100:0}const TYPE_AROUND_SELECTION_ATTRIBUTE="widget-type-around";function isTypeAroundWidget(o,a,n){return!!o&&isWidget(o)&&!n.isInline(a)}function getClosestTypeAroundDomButton(o){return o.closest(".ck-widget__type-around__button")}function getTypeAroundButtonPosition(o){return o.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function getClosestWidgetViewElement(o,a){const n=o.closest(".ck-widget");return a.mapDomToView(n)}function getTypeAroundFakeCaretPosition(o){return o.getAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)}var returnIcon='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>';const POSSIBLE_INSERTION_POSITIONS=["before","after"],RETURN_ARROW_ICON_ELEMENT=new DOMParser().parseFromString(returnIcon,"image/svg+xml").firstChild,PLUGIN_DISABLED_EDITING_ROOT_CLASS="ck-widget__type-around_disabled";class WidgetTypeAround extends Plugin{constructor(){super(...arguments);M(this,"_currentFakeCaretModelElement",null)}static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete]}init(){const n=this.editor,s=n.editing.view;this.on("change:isEnabled",(l,c,u)=>{s.change(d=>{for(const h of s.document.roots)u?d.removeClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,h):d.addClass(PLUGIN_DISABLED_EDITING_ROOT_CLASS,h)}),u||n.model.change(d=>{d.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(n,s){const l=this.editor,c=l.editing.view,u=l.model.schema.getAttributesWithProperty(n,"copyOnReplace",!0);l.execute("insertParagraph",{position:l.model.createPositionAt(n,s),attributes:u}),c.focus(),c.scrollToTheSelection()}_listenToIfEnabled(n,s,l,c){this.listenTo(n,s,(...u)=>{this.isEnabled&&l(...u)},c)}_insertParagraphAccordingToFakeCaretPosition(){const l=this.editor.model.document.selection,c=getTypeAroundFakeCaretPosition(l);if(!c)return!1;const u=l.getSelectedElement();return this._insertParagraph(u,c),!0}_enableTypeAroundUIInjection(){const n=this.editor,s=n.model.schema,l=n.locale.t,c={before:l("Insert paragraph before block"),after:l("Insert paragraph after block")};n.editing.downcastDispatcher.on("insert",(u,d,h)=>{const f=h.mapper.toViewElement(d.item);f&&isTypeAroundWidget(f,d.item,s)&&(injectUIIntoWidget(h.writer,c,f),f.getCustomProperty("widgetLabel").push(()=>this.isEnabled?l("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){const n=this.editor,s=n.model,l=s.document.selection,c=s.schema,u=n.editing.view;this._listenToIfEnabled(u.document,"arrowKey",(h,f)=>{this._handleArrowKeyPress(h,f)},{context:[isWidget,"$text"],priority:"high"}),this._listenToIfEnabled(l,"change:range",(h,f)=>{f.directChange&&n.model.change(p=>{p.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(s.document,"change:data",()=>{const h=l.getSelectedElement();if(h){const f=n.editing.mapper.toViewElement(h);if(isTypeAroundWidget(f,h,c))return}n.model.change(f=>{f.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})}),this._listenToIfEnabled(n.editing.downcastDispatcher,"selection",(h,f,p)=>{const g=p.writer;if(this._currentFakeCaretModelElement){const x=p.mapper.toViewElement(this._currentFakeCaretModelElement);x&&(g.removeClass(POSSIBLE_INSERTION_POSITIONS.map(d),x),this._currentFakeCaretModelElement=null)}const v=f.selection.getSelectedElement();if(!v)return;const b=p.mapper.toViewElement(v);if(!isTypeAroundWidget(b,v,c))return;const w=getTypeAroundFakeCaretPosition(f.selection);w&&(g.addClass(d(w),b),this._currentFakeCaretModelElement=v)}),this._listenToIfEnabled(n.ui.focusTracker,"change:isFocused",(h,f,p)=>{p||n.model.change(g=>{g.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE)})});function d(h){return`ck-widget_type-around_show-fake-caret_${h}`}}_handleArrowKeyPress(n,s){const l=this.editor,c=l.model,u=c.document.selection,d=c.schema,h=l.editing.view,f=s.keyCode,p=isForwardArrowKeyCode(f,l.locale.contentLanguageDirection),g=h.document.selection.getSelectedElement(),v=l.editing.mapper.toModelElement(g);let b;isTypeAroundWidget(g,v,d)?b=this._handleArrowKeyPressOnSelectedWidget(p):u.isCollapsed?b=this._handleArrowKeyPressWhenSelectionNextToAWidget(p):s.shiftKey||(b=this._handleArrowKeyPressWhenNonCollapsedSelection(p)),b&&(s.preventDefault(),n.stop())}_handleArrowKeyPressOnSelectedWidget(n){const l=this.editor.model,c=l.document.selection,u=getTypeAroundFakeCaretPosition(c);return l.change(d=>{if(u){if(!(u===(n?"after":"before")))return d.removeSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE),!0}else return d.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,n?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(n){const s=this.editor,l=s.model,c=l.schema,u=s.plugins.get("Widget"),d=u._getObjectElementNextToSelection(n),h=s.editing.mapper.toViewElement(d);return isTypeAroundWidget(h,d,c)?(l.change(f=>{u._setSelectionOverElement(d),f.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,n?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(n){const s=this.editor,l=s.model,c=l.schema,u=s.editing.mapper,d=l.document.selection,h=n?d.getLastPosition().nodeBefore:d.getFirstPosition().nodeAfter,f=u.toViewElement(h);return isTypeAroundWidget(f,h,c)?(l.change(p=>{p.setSelection(h,"on"),p.setSelectionAttribute(TYPE_AROUND_SELECTION_ATTRIBUTE,n?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){const n=this.editor,s=n.editing.view;this._listenToIfEnabled(s.document,"mousedown",(l,c)=>{const u=getClosestTypeAroundDomButton(c.domTarget);if(!u)return;const d=getTypeAroundButtonPosition(u),h=getClosestWidgetViewElement(u,s.domConverter),f=n.editing.mapper.toModelElement(h);this._insertParagraph(f,d),c.preventDefault(),l.stop()})}_enableInsertingParagraphsOnEnterKeypress(){const n=this.editor,s=n.model.document.selection,l=n.editing.view;this._listenToIfEnabled(l.document,"enter",(c,u)=>{if(c.eventPhase!="atTarget")return;const d=s.getSelectedElement(),h=n.editing.mapper.toViewElement(d),f=n.model.schema;let p;this._insertParagraphAccordingToFakeCaretPosition()?p=!0:isTypeAroundWidget(h,d,f)&&(this._insertParagraph(d,u.isSoft?"before":"after"),p=!0),p&&(u.preventDefault(),c.stop())},{context:isWidget})}_enableInsertingParagraphsOnTypingKeystroke(){const s=this.editor.editing.view.document;this._listenToIfEnabled(s,"insertText",(l,c)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(c.selection=s.selection)},{priority:"high"}),env$1.isAndroid?this._listenToIfEnabled(s,"keydown",(l,c)=>{c.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(s,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){const n=this.editor,s=n.editing.view,l=n.model,c=l.schema;this._listenToIfEnabled(s.document,"delete",(u,d)=>{if(u.eventPhase!="atTarget")return;const h=getTypeAroundFakeCaretPosition(l.document.selection);if(!h)return;const f=d.direction,p=l.document.selection.getSelectedElement(),g=h==="before",v=f=="forward";if(g===v)n.execute("delete",{selection:l.createSelection(p,"on")});else{const w=c.getNearestSelectionRange(l.createPositionAt(p,h),f);if(w)if(!w.isCollapsed)l.change(x=>{x.setSelection(w),n.execute(v?"deleteForward":"delete")});else{const x=l.createSelection(w.start);if(l.modifySelection(x,{direction:f}),!x.focus.isEqual(w.start))l.change(S=>{S.setSelection(w),n.execute(v?"deleteForward":"delete")});else{const S=getDeepestEmptyElementAncestor(c,w.start.parent);l.deleteContent(l.createSelection(S,"on"),{doNotAutoparagraph:!0})}}}d.preventDefault(),u.stop()},{context:isWidget})}_enableInsertContentIntegration(){const n=this.editor,s=this.editor.model,l=s.document.selection;this._listenToIfEnabled(n.model,"insertContent",(c,[u,d])=>{if(d&&!d.is("documentSelection"))return;const h=getTypeAroundFakeCaretPosition(l);if(h)return c.stop(),s.change(f=>{const p=l.getSelectedElement(),g=s.createPositionAt(p,h),v=f.createSelection(g),b=s.insertContent(u,v);return f.setSelection(v),b})},{priority:"high"})}_enableInsertObjectIntegration(){const n=this.editor,l=this.editor.model.document.selection;this._listenToIfEnabled(n.model,"insertObject",(c,u)=>{const[,d,h={}]=u;if(d&&!d.is("documentSelection"))return;const f=getTypeAroundFakeCaretPosition(l);f&&(h.findOptimalPosition=f,u[3]=h)},{priority:"high"})}_enableDeleteContentIntegration(){const n=this.editor,l=this.editor.model.document.selection;this._listenToIfEnabled(n.model,"deleteContent",(c,[u])=>{if(u&&!u.is("documentSelection"))return;getTypeAroundFakeCaretPosition(l)&&c.stop()},{priority:"high"})}}function injectUIIntoWidget(o,a,n){const s=o.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(l){const c=this.toDomElement(l);return injectButtons(c,a),injectFakeCaret(c),c});o.insert(o.createPositionAt(n,"end"),s)}function injectButtons(o,a){for(const n of POSSIBLE_INSERTION_POSITIONS){const s=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${n}`],title:a[n],"aria-hidden":"true"},children:[o.ownerDocument.importNode(RETURN_ARROW_ICON_ELEMENT,!0)]});o.appendChild(s.render())}}function injectFakeCaret(o){const a=new Template({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});o.appendChild(a.render())}function getDeepestEmptyElementAncestor(o,a){let n=a;for(const s of a.getAncestors({parentFirst:!0})){if(s.childCount>1||o.isLimit(s))break;n=s}return n}function verticalNavigationHandler(o){const a=o.model;return(n,s)=>{const l=s.keyCode==keyCodes.arrowup,c=s.keyCode==keyCodes.arrowdown,u=s.shiftKey,d=a.document.selection;if(!l&&!c)return;const h=c;if(u&&selectionWillShrink(d,h))return;const f=findTextRangeFromSelection(o,d,h);if(f){if(f.isCollapsed){if(d.isCollapsed)return;if(u)return}(f.isCollapsed||isSingleLineRange(o,f,h))&&(a.change(p=>{const g=h?f.end:f.start;if(u){const v=a.createSelection(d.anchor);v.setFocus(g),p.setSelection(v)}else p.setSelection(g)}),n.stop(),s.preventDefault(),s.stopPropagation())}}}function findTextRangeFromSelection(o,a,n){const s=o.model;if(n){const l=a.isCollapsed?a.focus:a.getLastPosition(),c=getNearestNonInlineLimit(s,l,"forward");if(!c)return null;const u=s.createRange(l,c),d=getNearestTextPosition(s.schema,u,"backward");return d?s.createRange(l,d):null}else{const l=a.isCollapsed?a.focus:a.getFirstPosition(),c=getNearestNonInlineLimit(s,l,"backward");if(!c)return null;const u=s.createRange(c,l),d=getNearestTextPosition(s.schema,u,"forward");return d?s.createRange(d,l):null}}function getNearestNonInlineLimit(o,a,n){const s=o.schema,l=o.createRangeIn(a.root),c=n=="forward"?"elementStart":"elementEnd";for(const{previousPosition:u,item:d,type:h}of l.getWalker({startPosition:a,direction:n})){if(s.isLimit(d)&&!s.isInline(d))return u;if(h==c&&s.isBlock(d))return null}return null}function getNearestTextPosition(o,a,n){const s=n=="backward"?a.end:a.start;if(o.checkChild(s,"$text"))return s;for(const{nextPosition:l}of a.getWalker({direction:n}))if(o.checkChild(l,"$text"))return l;return null}function isSingleLineRange(o,a,n){const s=o.model,l=o.view.domConverter;if(n){const f=s.createSelection(a.start);s.modifySelection(f),!f.focus.isAtEnd&&!a.start.isEqual(f.focus)&&(a=s.createRange(f.focus,a.end))}const c=o.mapper.toViewRange(a),u=l.viewRangeToDom(c),d=Rect$3.getDomRangeRects(u);let h;for(const f of d){if(h===void 0){h=Math.round(f.bottom);continue}if(Math.round(f.top)>=h)return!1;h=Math.max(h,Math.round(f.bottom))}return!0}function selectionWillShrink(o,a){return!o.isCollapsed&&o.isBackward==a}class Widget extends Plugin{constructor(){super(...arguments);M(this,"_previouslySelected",new Set)}static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[WidgetTypeAround,Delete]}init(){const n=this.editor,s=n.editing.view,l=s.document,c=n.t;this.editor.editing.downcastDispatcher.on("selection",(u,d,h)=>{const f=h.writer,p=d.selection;if(p.isCollapsed)return;const g=p.getSelectedElement();if(!g)return;const v=n.editing.mapper.toViewElement(g);isWidget(v)&&h.consumable.consume(p,"selection")&&f.setSelection(f.createRangeOn(v),{fake:!0,label:getLabel(v)})}),this.editor.editing.downcastDispatcher.on("selection",(u,d,h)=>{this._clearPreviouslySelectedWidgets(h.writer);const f=h.writer,p=f.document.selection;let g=null;for(const v of p.getRanges())for(const b of v){const w=b.item;isWidget(w)&&!isChild(w,g)&&(f.addClass(WIDGET_SELECTED_CLASS_NAME,w),this._previouslySelected.add(w),g=w)}},{priority:"low"}),s.addObserver(MouseObserver),this.listenTo(l,"mousedown",(...u)=>this._onMousedown(...u)),this.listenTo(l,"arrowKey",(...u)=>{this._handleSelectionChangeOnArrowKeyPress(...u)},{context:[isWidget,"$text"]}),this.listenTo(l,"arrowKey",(...u)=>{this._preventDefaultOnArrowKeyPress(...u)},{context:"$root"}),this.listenTo(l,"arrowKey",verticalNavigationHandler(this.editor.editing),{context:"$text"}),this.listenTo(l,"delete",(u,d)=>{this._handleDelete(d.direction=="forward")&&(d.preventDefault(),u.stop())},{context:"$root"}),this.listenTo(l,"tab",(u,d)=>{u.eventPhase=="atTarget"&&(d.shiftKey||this._selectFirstNestedEditable()&&(d.preventDefault(),u.stop()))},{context:isWidget,priority:"low"}),this.listenTo(l,"tab",(u,d)=>{d.shiftKey&&this._selectAncestorWidget()&&(d.preventDefault(),u.stop())},{priority:"low"}),this.listenTo(l,"keydown",(u,d)=>{d.keystroke==keyCodes.esc&&this._selectAncestorWidget()&&(d.preventDefault(),u.stop())},{priority:"low"}),n.accessibility.addKeystrokeInfoGroup({id:"widget",label:c("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:c("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:c("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:c("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:c("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:c("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(n,s){const l=this.editor,c=l.editing.view,u=c.document;let d=s.target;if(!d)return;if(s.domEvent.detail>=3){this._selectBlockContent(d)&&s.preventDefault();return}if(!isWidget(d)){const f=findClosestEditableOrWidgetAncestor(d);if(!f)return;if(isWidget(f))d=f;else{const p=getElementFromMouseEvent(c,s);if(p&&isWidget(p))d=p;else return}}env$1.isAndroid&&s.preventDefault(),u.isFocused||c.focus();const h=l.editing.mapper.toModelElement(d);this._setSelectionOverElement(h)}_selectBlockContent(n){const s=this.editor,l=s.model,c=s.editing.mapper,u=l.schema,d=c.findMappedViewAncestor(this.editor.editing.view.createPositionAt(n,0)),h=findTextBlockAncestor(c.toModelElement(d),l.schema);return h?(l.change(f=>{const p=u.isLimit(h)?null:findNextTextBlock(f.createPositionAfter(h),u),g=f.createPositionAt(h,0),v=p?f.createPositionAt(p,0):f.createPositionAt(h,"end");f.setSelection(f.createRange(g,v))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(n,s){const l=s.keyCode,c=this.editor.model,u=c.schema,d=c.document.selection,h=d.getSelectedElement(),f=getLocalizedArrowKeyCodeDirection(l,this.editor.locale.contentLanguageDirection),p=f=="down"||f=="right",g=f=="up"||f=="down";if(h&&u.isObject(h)){const b=p?d.getLastPosition():d.getFirstPosition(),w=u.getNearestSelectionRange(b,p?"forward":"backward");w&&(c.change(x=>{x.setSelection(w)}),s.preventDefault(),n.stop());return}if(!d.isCollapsed&&!s.shiftKey){const b=d.getFirstPosition(),w=d.getLastPosition(),x=b.nodeAfter,S=w.nodeBefore;(x&&u.isObject(x)||S&&u.isObject(S))&&(c.change(E=>{E.setSelection(p?w:b)}),s.preventDefault(),n.stop());return}if(!d.isCollapsed)return;const v=this._getObjectElementNextToSelection(p);if(v&&u.isObject(v)){if(u.isInline(v)&&g)return;this._setSelectionOverElement(v),s.preventDefault(),n.stop()}}_preventDefaultOnArrowKeyPress(n,s){const l=this.editor.model,c=l.schema,u=l.document.selection.getSelectedElement();u&&c.isObject(u)&&(s.preventDefault(),n.stop())}_handleDelete(n){const l=this.editor.model.document.selection;if(!this.editor.model.canEditAt(l)||!l.isCollapsed)return;const c=this._getObjectElementNextToSelection(n);if(c)return this.editor.model.change(u=>{let d=l.anchor.parent;for(;d.isEmpty;){const h=d;d=h.parent,u.remove(h)}this._setSelectionOverElement(c)}),!0}_setSelectionOverElement(n){this.editor.model.change(s=>{s.setSelection(s.createRangeOn(n))})}_getObjectElementNextToSelection(n){const s=this.editor.model,l=s.schema,c=s.document.selection,u=s.createSelection(c);if(s.modifySelection(u,{direction:n?"forward":"backward"}),u.isEqual(c))return null;const d=n?u.focus.nodeBefore:u.focus.nodeAfter;return d&&l.isObject(d)?d:null}_clearPreviouslySelectedWidgets(n){for(const s of this._previouslySelected)n.removeClass(WIDGET_SELECTED_CLASS_NAME,s);this._previouslySelected.clear()}_selectFirstNestedEditable(){const n=this.editor,l=this.editor.editing.view.document;for(const c of l.selection.getFirstRange().getItems())if(c.is("editableElement")){const u=n.editing.mapper.toModelElement(c);/* istanbul ignore next -- @preserve */if(!u)continue;const d=n.model.createPositionAt(u,0),h=n.model.schema.getNearestSelectionRange(d,"forward");return n.model.change(f=>{f.setSelection(h)}),!0}return!1}_selectAncestorWidget(){const n=this.editor,s=n.editing.mapper,c=n.editing.view.document.selection.getFirstPosition().parent,d=(c.is("$text")?c.parent:c).findAncestor(isWidget);if(!d)return!1;const h=s.toModelElement(d);/* istanbul ignore next -- @preserve */return h?(n.model.change(f=>{f.setSelection(h,"on")}),!0):!1}}function findClosestEditableOrWidgetAncestor(o){let a=o;for(;a;){if(a.is("editableElement")||isWidget(a))return a;a=a.parent}return null}function getElementFromMouseEvent(o,a){const n=getRangeFromMouseEvent(a.domEvent);let s=null;if(n?s=o.domConverter.domRangeToView(n):s=o.createRange(o.createPositionAt(a.target,0)),!s)return null;const l=s.start;if(!l.parent)return null;let c=l.parent;return l.parent.is("editableElement")&&(l.isAtEnd&&l.nodeBefore?c=l.nodeBefore:l.isAtStart&&l.nodeAfter&&(c=l.nodeAfter)),c.is("$text")?c.parent:c}function isChild(o,a){return a?Array.from(o.getAncestors()).includes(a):!1}function findTextBlockAncestor(o,a){for(const n of o.getAncestors({includeSelf:!0,parentFirst:!0})){if(a.checkChild(n,"$text"))return n;if(a.isLimit(n)&&!a.isObject(n))break}return null}function findNextTextBlock(o,a){const n=new TreeWalker({startPosition:o});for(const{item:s}of n){if(a.isLimit(s)||!s.is("element"))return null;if(a.checkChild(s,"$text"))return s}return null}class WidgetToolbarRepository extends Plugin{constructor(){super(...arguments);M(this,"_toolbarDefinitions",new Map);M(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;if(n.plugins.has("BalloonToolbar")){const s=n.plugins.get("BalloonToolbar");this.listenTo(s,"show",l=>{isWidgetSelected(n.editing.view.document.selection)&&l.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(n.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(n.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(const n of this._toolbarDefinitions.values())n.view.destroy()}register(n,{ariaLabel:s,items:l,getRelatedElement:c,balloonClassName:u="ck-toolbar-container"}){if(!l.length){logWarning("widget-toolbar-no-items",{toolbarId:n});return}const d=this.editor,h=d.t,f=new ToolbarView(d.locale);if(f.ariaLabel=s||h("Widget toolbar"),this._toolbarDefinitions.has(n))throw new CKEditorError("widget-toolbar-duplicated",this,{toolbarId:n});const p={view:f,getRelatedElement:c,balloonClassName:u,itemsConfig:l,initialized:!1};d.ui.addToolbar(f,{isContextual:!0,beforeFocus:()=>{const g=c(d.editing.view.document.selection);g&&this._showToolbar(p,g)},afterBlur:()=>{this._hideToolbar(p)}}),this._toolbarDefinitions.set(n,p)}_updateToolbarsVisibility(){let n=0,s=null,l=null;for(const c of this._toolbarDefinitions.values()){const u=c.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!u)this._isToolbarInBalloon(c)&&this._hideToolbar(c);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(c)&&this._hideToolbar(c);else{const d=u.getAncestors().length;d>n&&(n=d,s=u,l=c)}}l&&this._showToolbar(l,s)}_hideToolbar(n){this._balloon.remove(n.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(n,s){this._isToolbarVisible(n)?repositionContextualBalloon$2(this.editor,s):this._isToolbarInBalloon(n)||(n.initialized||(n.initialized=!0,n.view.fillFromConfig(n.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:n.view,position:getBalloonPositionData$1(this.editor,s),balloonClassName:n.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(const l of this._toolbarDefinitions.values())if(this._isToolbarVisible(l)){const c=l.getRelatedElement(this.editor.editing.view.document.selection);repositionContextualBalloon$2(this.editor,c)}}))}_isToolbarVisible(n){return this._balloon.visibleView===n.view}_isToolbarInBalloon(n){return this._balloon.hasView(n.view)}}function repositionContextualBalloon$2(o,a){const n=o.plugins.get("ContextualBalloon"),s=getBalloonPositionData$1(o,a);n.updatePosition(s)}function getBalloonPositionData$1(o,a){const n=o.editing.view,s=BalloonPanelView.defaultPositions;return{target:n.domConverter.mapViewToDom(a),positions:[s.northArrowSouth,s.northArrowSouthWest,s.northArrowSouthEast,s.southArrowNorth,s.southArrowNorthWest,s.southArrowNorthEast,s.viewportStickyNorth]}}function isWidgetSelected(o){const a=o.getSelectedElement();return!!(a&&isWidget(a))}class ResizeState extends ObservableMixin(){constructor(n){super();M(this,"_referenceCoordinates");M(this,"_options");M(this,"_originalWidth");M(this,"_originalHeight");M(this,"_originalWidthPercents");M(this,"_aspectRatio");this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=n,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(n,s,l){const c=new Rect$3(s);this.activeHandlePosition=getHandlePosition(n),this._referenceCoordinates=getAbsoluteBoundaryPoint(s,getOppositePosition(this.activeHandlePosition)),this._originalWidth=c.width,this._originalHeight=c.height,this._aspectRatio=c.width/c.height;const u=l.style.width;u&&u.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(u):this._originalWidthPercents=calculateResizeHostPercentageWidth(l,c)}update(n){this.proposedWidth=n.width,this.proposedHeight=n.height,this.proposedWidthPercents=n.widthPercents,this.proposedHandleHostWidth=n.handleHostWidth,this.proposedHandleHostHeight=n.handleHostHeight}}function getAbsoluteBoundaryPoint(o,a){const n=new Rect$3(o),s=a.split("-"),l={x:s[1]=="right"?n.right:n.left,y:s[0]=="bottom"?n.bottom:n.top};return l.x+=o.ownerDocument.defaultView.scrollX,l.y+=o.ownerDocument.defaultView.scrollY,l}function getResizerHandleClass(o){return`ck-widget__resizer__handle-${o}`}function getHandlePosition(o){const a=["top-left","top-right","bottom-right","bottom-left"];for(const n of a)if(o.classList.contains(getResizerHandleClass(n)))return n}function getOppositePosition(o){const a=o.split("-"),n={top:"bottom",bottom:"top",left:"right",right:"left"};return`${n[a[0]]}-${n[a[1]]}`}class SizeView extends View$1{constructor(){super();const a=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",a.to("_viewPosition",n=>n?`ck-orientation-${n}`:"")],style:{display:a.if("_isVisible","none",n=>!n)}},children:[{text:a.to("_label")}]})}_bindToState(a,n){this.bind("_isVisible").to(n,"proposedWidth",n,"proposedHeight",(s,l)=>s!==null&&l!==null),this.bind("_label").to(n,"proposedHandleHostWidth",n,"proposedHandleHostHeight",n,"proposedWidthPercents",(s,l,c)=>a.unit==="px"?`${s}×${l}`:`${c}%`),this.bind("_viewPosition").to(n,"activeHandlePosition",n,"proposedHandleHostWidth",n,"proposedHandleHostHeight",(s,l,c)=>l<50||c<50?"above-center":s)}_dismiss(){this.unbind(),this._isVisible=!1}}class Resizer extends ObservableMixin(){constructor(n){super();M(this,"_state");M(this,"_sizeView");M(this,"_options");M(this,"_viewResizerWrapper",null);M(this,"_initialViewWidth");this._options=n,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(s,l)=>s&&l),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",s=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),s.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(s=>{s.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(s=>{s.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){const n=this,s=this._options.viewElement;this._options.editor.editing.view.change(c=>{const u=c.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(d){const h=this.toDomElement(d);return n._appendHandles(h),n._appendSizeUI(h),h});c.insert(c.createPositionAt(s,"end"),u),c.addClass("ck-widget_with-resizer",s),this._viewResizerWrapper=u,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(n){this._state=new ResizeState(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(n,this._getHandleHost(),this._getResizeHost())}updateSize(n){const s=this._proposeNewSize(n);this._options.editor.editing.view.change(p=>{const g=this._options.unit||"%",v=(g==="%"?s.widthPercents:s.width)+g;p.setStyle("width",v,this._options.viewElement)});const c=this._getHandleHost(),u=new Rect$3(c),d=Math.round(u.width),h=Math.round(u.height),f=new Rect$3(c);s.width=Math.round(f.width),s.height=Math.round(f.height),this.redraw(u),this.state.update({...s,handleHostWidth:d,handleHostHeight:h})}commit(){const n=this._options.unit||"%",s=(n==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+n;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(s)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(n){const s=this._domResizerWrapper;if(!existsInDom(s))return;const l=s.parentElement,c=this._getHandleHost(),u=this._viewResizerWrapper,d=[u.getStyle("width"),u.getStyle("height"),u.getStyle("left"),u.getStyle("top")];let h;if(l.isSameNode(c)){const f=n||new Rect$3(c);h=[f.width+"px",f.height+"px",void 0,void 0]}else h=[c.offsetWidth+"px",c.offsetHeight+"px",c.offsetLeft+"px",c.offsetTop+"px"];compareArrays(d,h)!=="same"&&this._options.editor.editing.view.change(f=>{f.setStyle({width:h[0],height:h[1],left:h[2],top:h[3]},u)})}containsHandle(n){return this._domResizerWrapper.contains(n)}static isResizeHandle(n){return n.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(s=>{s.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(n){const s=this.state,l=extractCoordinates(n),c=this._options.isCentered?this._options.isCentered(this):!0,u={x:s._referenceCoordinates.x-(l.x+s.originalWidth),y:l.y-s.originalHeight-s._referenceCoordinates.y};c&&s.activeHandlePosition.endsWith("-right")&&(u.x=l.x-(s._referenceCoordinates.x+s.originalWidth)),c&&(u.x*=2);let d=Math.abs(s.originalWidth+u.x),h=Math.abs(s.originalHeight+u.y);return(d/s.aspectRatio>h?"width":"height")=="width"?h=d/s.aspectRatio:d=h*s.aspectRatio,{width:Math.round(d),height:Math.round(h),widthPercents:Math.min(Math.round(s.originalWidthPercents/s.originalWidth*d*100)/100,100)}}_getResizeHost(){const n=this._domResizerWrapper.parentElement;return this._options.getResizeHost(n)}_getHandleHost(){const n=this._domResizerWrapper.parentElement;return this._options.getHandleHost(n)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(n){const s=["top-left","top-right","bottom-right","bottom-left"];for(const l of s)n.appendChild(new Template({tag:"div",attributes:{class:`ck-widget__resizer__handle ${getResizerClass(l)}`}}).render())}_appendSizeUI(n){this._sizeView=new SizeView,this._sizeView.render(),n.appendChild(this._sizeView.element)}}function getResizerClass(o){return`ck-widget__resizer__handle-${o}`}function extractCoordinates(o){return{x:o.pageX,y:o.pageY}}function existsInDom(o){return o&&o.ownerDocument&&o.ownerDocument.contains(o)}class WidgetResize extends Plugin{constructor(){super(...arguments);M(this,"_resizers",new Map);M(this,"_observer");M(this,"_redrawSelectedResizerThrottled")}static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){const n=this.editor.editing,s=global$1.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),n.view.addObserver(MouseObserver),this._observer=new(DomEmitterMixin()),this.listenTo(n.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(s,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(s,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=throttle$2(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(const[c,u]of this._resizers)c.isAttached()||(this._resizers.delete(c),u.destroy())},{priority:"lowest"}),this._observer.listenTo(global$1.window,"resize",this._redrawSelectedResizerThrottled);const l=this.editor.editing.view.document.selection;l.on("change",()=>{const c=l.getSelectedElement(),u=this.getResizerByViewElement(c)||null;u?this.select(u):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(const n of this._resizers.values())n.destroy();this._redrawSelectedResizerThrottled.cancel()}select(n){this.deselect(),this.selectedResizer=n,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(n){const s=new Resizer(n),l=this.editor.plugins;if(s.attach(),l.has("WidgetToolbarRepository")){const d=l.get("WidgetToolbarRepository");s.on("begin",()=>{d.forceDisabled("resize")},{priority:"lowest"}),s.on("cancel",()=>{d.clearForceDisabled("resize")},{priority:"highest"}),s.on("commit",()=>{d.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(n.viewElement,s);const u=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(u)==s&&this.select(s),s}getResizerByViewElement(n){return this._resizers.get(n)}_getResizerByHandle(n){for(const s of this._resizers.values())if(s.containsHandle(n))return s}_mouseDownListener(n,s){const l=s.domTarget;Resizer.isResizeHandle(l)&&(this._activeResizer=this._getResizerByHandle(l)||null,this._activeResizer&&(this._activeResizer.begin(l),n.stop(),s.preventDefault()))}_mouseMoveListener(n,s){this._activeResizer&&this._activeResizer.updateSize(s)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BookmarkFormView extends View$1{constructor(n,s){super(n);M(this,"focusTracker",new FocusTracker);M(this,"keystrokes",new KeystrokeHandler);M(this,"idInputView");M(this,"buttonView");M(this,"children");M(this,"_validators");M(this,"_focusables",new ViewCollection);M(this,"_focusCycler");const l=n.t;this._validators=s,this.idInputView=this._createIdInput(),this.buttonView=this._createButton(l("Insert"),"ck-button-action ck-button-bold"),this.buttonView.type="submit",this.children=this._createViewChildren(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const c=["ck","ck-bookmark-view"];this.setTemplate({tag:"form",attributes:{class:c,tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.idInputView,this.buttonView].forEach(s=>{this._focusables.add(s),this.focusTracker.add(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const n of this._validators){const s=n(this);if(s)return this.idInputView.errorText=s,!1}return!0}resetFormStatus(){this.idInputView.errorText=null}_createViewChildren(){const n=this.createCollection(),s=this.t;return n.add(new FormHeaderView(this.locale,{label:s("Bookmark")})),n.add(this._createFormContentView()),n}_createFormContentView(){const n=new View$1(this.locale),s=this.createCollection(),l=["ck","ck-bookmark-form","ck-responsive-form"];return s.add(this.idInputView),s.add(this.buttonView),n.setTemplate({tag:"div",attributes:{class:l},children:s}),n}_createIdInput(){const n=this.locale.t,s=new LabeledFieldView(this.locale,createLabeledInputText);return s.label=n("Bookmark name"),s.infoText=n("Enter the bookmark name without spaces."),s}_createButton(n,s){const l=new ButtonView(this.locale);return l.set({label:n,withText:!0}),l.extendTemplate({attributes:{class:s}}),l}get id(){const{element:n}=this.idInputView.fieldView;return n?n.value.trim():null}}class BookmarkActionsView extends View$1{constructor(n){super(n);M(this,"focusTracker",new FocusTracker);M(this,"keystrokes",new KeystrokeHandler);M(this,"bookmarkPreviewView");M(this,"removeButtonView");M(this,"editButtonView");M(this,"_focusables",new ViewCollection);M(this,"_focusCycler");const s=n.t;this.bookmarkPreviewView=this._createBookmarkPreviewView(),this.removeButtonView=this._createButton(s("Remove bookmark"),icons.remove,"remove",this.bookmarkPreviewView),this.editButtonView=this._createButton(s("Edit bookmark"),icons.pencil,"edit",this.bookmarkPreviewView),this.set("id",void 0),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-bookmark-actions","ck-responsive-form"],tabindex:"-1"},children:[this.bookmarkPreviewView,this.editButtonView,this.removeButtonView]})}render(){super.render(),[this.editButtonView,this.removeButtonView].forEach(s=>{this._focusables.add(s),this.focusTracker.add(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(n,s,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:s,tooltip:!0}),u.delegate("execute").to(this,l),u.labelView.unbind("id"),u.labelView.bind("id").to(u,"ariaLabelledBy",d=>getFirstToken(d)),u.ariaLabelledBy=`${u.ariaLabelledBy} ${c.id}`,u}_createBookmarkPreviewView(){const n=new LabelView(this.locale);return n.extendTemplate({attributes:{class:["ck","ck-bookmark-actions__preview"]}}),n.bind("text").to(this,"id"),n}}function getFirstToken(o){return o.split(" ")[0]}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isBookmarkIdValid(o){return!(!o||typeof o!="string"||/\s/.test(o))}class InsertBookmarkCommand extends Command{refresh(){const n=this.editor.model.document.selection,s=this._getPositionToInsertBookmark(n);this.isEnabled=!!s}execute(a){if(!a)return;const{bookmarkId:n}=a;if(!isBookmarkIdValid(n)){logWarning("insert-bookmark-command-executed-with-invalid-name");return}const s=this.editor,l=s.model,c=l.document.selection;l.change(u=>{let d=this._getPositionToInsertBookmark(c);if(!l.schema.checkChild(d,"bookmark")){const p=s.execute("insertParagraph",{position:d});if(!p)return;d=p}const f=u.createElement("bookmark",{...Object.fromEntries(c.getAttributes()),bookmarkId:n});l.insertObject(f,d,null,{setSelection:"on"})})}_getPositionToInsertBookmark(a){const n=this.editor.model,s=n.schema,l=a.getFirstRange(),c=l.start;if(isBookmarkAllowed(c,s))return c;for(const{previousPosition:u,item:d}of l){if(d.is("element")&&s.checkChild(d,"$text")&&isBookmarkAllowed(d,s))return n.createPositionAt(d,0);if(isBookmarkAllowed(u,s))return u}return null}}function isBookmarkAllowed(o,a){return a.checkChild(o,"bookmark")?!0:a.checkChild(o,"paragraph")?a.checkChild("paragraph","bookmark"):!1}class UpdateBookmarkCommand extends Command{refresh(){const n=this.editor.model.document.selection,s=getSelectedBookmark(n);this.isEnabled=!!s,this.value=s?s.getAttribute("bookmarkId"):void 0}execute(a){if(!a)return;const{bookmarkId:n}=a;if(!isBookmarkIdValid(n)){logWarning("update-bookmark-command-executed-with-invalid-name");return}const s=this.editor.model,l=s.document.selection,c=getSelectedBookmark(l);c&&s.change(u=>{u.setAttribute("bookmarkId",n,c)})}}function getSelectedBookmark(o){const a=o.getSelectedElement();return a&&a.is("element","bookmark")?a:null}class BookmarkEditing extends Plugin{constructor(){super(...arguments);M(this,"_bookmarkElements",new Map)}static get pluginName(){return"BookmarkEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:n}=this;this._defineSchema(),this._defineConverters(),n.commands.add("insertBookmark",new InsertBookmarkCommand(n)),n.commands.add("updateBookmark",new UpdateBookmarkCommand(n)),this.listenTo(n.model.document,"change:data",()=>{this._trackBookmarkElements()})}getElementForBookmarkId(n){for(const[s,l]of this._bookmarkElements)if(l==n)return s;return null}_defineSchema(){this.editor.model.schema.register("bookmark",{inheritAllFrom:"$inlineObject",allowAttributes:"bookmarkId",disallowAttributes:["linkHref","htmlA"]})}_defineConverters(){const{editor:n}=this,{conversion:s,t:l}=n;n.data.htmlProcessor.domConverter.registerInlineObjectMatcher(c=>upcastMatcher(c)),n.editing.view.domConverter.registerInlineObjectMatcher(c=>upcastMatcher(c,!1)),s.for("dataDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(c,{writer:u})=>u.createEmptyElement("a",{id:c.getAttribute("bookmarkId")})}),s.for("editingDowncast").elementToElement({model:{name:"bookmark",attributes:["bookmarkId"]},view:(c,{writer:u})=>{const d=c.getAttribute("bookmarkId"),h=u.createContainerElement("a",{id:d,class:"ck-bookmark"},[this._createBookmarkUIElement(u)]);return this._bookmarkElements.set(c,d),toWidget(h,u,{label:()=>`${d} ${l("bookmark widget")}`})}}),s.for("upcast").add(c=>c.on("element:a",dataViewModelAnchorInsertion(n)))}_createBookmarkUIElement(n){return n.createUIElement("span",{class:"ck-bookmark__icon"},function(s){const l=this.toDomElement(s),c=new IconView;return c.set({content:icons.bookmarkInline,isColorInherited:!1}),c.render(),l.appendChild(c.element),l})}_trackBookmarkElements(){this._bookmarkElements.forEach((n,s)=>{s.root.rootName==="$graveyard"&&this._bookmarkElements.delete(s)})}}function upcastMatcher(o,a=!0){if(!(o.name==="a")||a&&!o.isEmpty)return null;const s=o.hasAttribute("id"),l=o.hasAttribute("name"),c=o.hasAttribute("href");return s&&!c?{name:!0,attributes:["id"]}:l&&!c?{name:!0,attributes:["name"]}:null}function dataViewModelAnchorInsertion(o){return(a,n,s)=>{const l=n.viewItem,c=upcastMatcher(l,!1);if(!c||!s.consumable.test(l,c)||!isEnabledNonEmptyAnchorConversion(o)&&!l.isEmpty)return;const d=s.writer,h=l.getAttribute("id"),f=l.getAttribute("name"),p=h||f,g=d.createElement("bookmark",{bookmarkId:p});if(!s.safeInsert(g,n.modelCursor))return;s.consumable.consume(l,c),h===f&&s.consumable.consume(l,{attributes:["name"]}),s.updateConversionResult(g,n);const{modelCursor:v,modelRange:b}=s.convertChildren(l,n.modelCursor);n.modelCursor=v,n.modelRange=d.createRange(n.modelRange.start,b.end)}}function isEnabledNonEmptyAnchorConversion(o){const a=o.config.get("bookmark.enableNonEmptyAnchorConversion");return a!==void 0?a:!0}const VISUAL_SELECTION_MARKER_NAME$1="bookmark-ui";class BookmarkUI extends Plugin{constructor(){super(...arguments);M(this,"actionsView",null);M(this,"formView",null);M(this,"_balloon")}static get requires(){return[BookmarkEditing,ContextualBalloon]}static get pluginName(){return"BookmarkUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.editing.view.addObserver(ClickObserver),this._balloon=n.plugins.get(ContextualBalloon),this._createToolbarBookmarkButton(),this._enableBalloonActivators(),n.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME$1,view:{classes:["ck-fake-bookmark-selection"]}}),n.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME$1,view:(s,{writer:l})=>{if(!s.markerRange.isCollapsed)return null;const c=l.createUIElement("span");return l.addClass(["ck-fake-bookmark-selection","ck-fake-bookmark-selection_collapsed"],c),c}})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const n=this.editor,s=new BookmarkActionsView(n.locale),l=n.commands.get("updateBookmark"),c=n.commands.get("delete");return s.bind("id").to(l,"value"),s.editButtonView.bind("isEnabled").to(l),s.removeButtonView.bind("isEnabled").to(c),this.listenTo(s,"edit",()=>{this._addFormView()}),this.listenTo(s,"remove",()=>{this._hideUI(),n.execute("delete")}),s.keystrokes.set("Esc",(u,d)=>{this._hideUI(),d()}),s}_createFormView(){const n=this.editor,s=n.locale,l=n.commands.get("insertBookmark"),c=n.commands.get("updateBookmark"),u=[l,c],d=new(CssTransitionDisablerMixin(BookmarkFormView))(s,getFormValidators$3(n));return d.idInputView.fieldView.bind("value").to(c,"value"),d.idInputView.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),d.buttonView.bind("isEnabled").toMany(u,"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(d,"submit",()=>{if(d.isValid()){const h=d.id;this._getSelectedBookmarkElement()?n.execute("updateBookmark",{bookmarkId:h}):n.execute("insertBookmark",{bookmarkId:h}),this._closeFormView()}}),this.listenTo(d.idInputView,"change:errorText",()=>{n.ui.update()}),d.keystrokes.set("Esc",(h,f)=>{this._closeFormView(),f()}),d}_createToolbarBookmarkButton(){const n=this.editor;n.ui.componentFactory.add("bookmark",()=>{const s=this._createButton(ButtonView);return s.set({tooltip:!0}),s}),n.ui.componentFactory.add("menuBar:bookmark",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(n){const s=this.editor,l=s.locale,c=new n(l),u=s.commands.get("insertBookmark"),d=s.commands.get("updateBookmark"),h=l.t;return c.set({label:h("Bookmark"),icon:icons.bookmark}),this.listenTo(c,"execute",()=>this._showUI(!0)),c.bind("isEnabled").toMany([u,d],"isEnabled",(...f)=>f.some(p=>p)),c.bind("isOn").to(d,"value",f=>!!f),c}_enableBalloonActivators(){const s=this.editor.editing.view.document;this.listenTo(s,"click",()=>{this._getSelectedBookmarkElement()&&this._showUI()})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(n,s)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),s())},{priority:"high"}),this.editor.keystrokes.set("Esc",(n,s)=>{this._isUIVisible&&(this._hideUI(),s())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_updateFormButtonLabel(n){const s=this.editor.locale.t;this.formView.buttonView.label=s(n?"Update":"Insert")}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const s=this.editor.commands.get("updateBookmark");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.idInputView.fieldView.value=s.value||"",this._balloon.visibleView===this.formView&&this.formView.idInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){this.editor.commands.get("updateBookmark").value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.buttonView.focus(),this.formView.idInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(n=!1){this.formView||this._createViews(),this._getSelectedBookmarkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),n&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),n&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const n=this.editor;this.stopListening(n.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),n.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const n=this.editor,s=n.editing.view.document;let l=this._getSelectedBookmarkElement(),c=d();this._updateFormButtonLabel(!!l);const u=()=>{const h=this._getSelectedBookmarkElement(),f=d();l&&!h||!l&&f!==c?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),this._updateFormButtonLabel(!!l),l=h,c=f};function d(){return s.selection.focus.getAncestors().reverse().find(h=>h.is("element"))}this.listenTo(n.ui,"update",u),this.listenTo(this._balloon,"change:visibleView",u)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const n=this._balloon.visibleView;return!!this.formView&&n==this.formView||this._areActionsVisible}_getBalloonPositionData(){const n=this.editor.editing.view,s=this.editor.model;let l;const c=this._getSelectedBookmarkElement();if(s.markers.has(VISUAL_SELECTION_MARKER_NAME$1)){const u=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME$1)),d=n.createRange(n.createPositionBefore(u[0]),n.createPositionAfter(u[u.length-1]));l=n.domConverter.viewRangeToDom(d)}else c&&(l=()=>{const u=this.editor.editing.mapper,d=n.domConverter,h=u.toViewElement(c);return d.mapViewToDom(h)});return l&&{target:l}}_getSelectedBookmarkElement(){const s=this.editor.model.document.selection.getSelectedElement();return s&&s.is("element","bookmark")?s:null}_showFakeVisualSelection(){const n=this.editor.model;n.change(s=>{const l=n.document.selection.getFirstRange();if(n.markers.has(VISUAL_SELECTION_MARKER_NAME$1))s.updateMarker(VISUAL_SELECTION_MARKER_NAME$1,{range:l});else if(l.start.isAtEnd){const c=l.start.getLastMatchingPosition(({item:u})=>!n.schema.isContent(u),{boundaries:l});s.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:s.createRange(c,l.end)})}else s.addMarker(VISUAL_SELECTION_MARKER_NAME$1,{usingOperation:!1,affectsData:!1,range:l})})}_hideFakeVisualSelection(){const n=this.editor.model;n.markers.has(VISUAL_SELECTION_MARKER_NAME$1)&&n.change(s=>{s.removeMarker(VISUAL_SELECTION_MARKER_NAME$1)})}}function getFormValidators$3(o){const{t:a}=o,n=o.plugins.get(BookmarkEditing);return[s=>{if(!s.id)return a("Bookmark must not be empty.")},s=>{if(s.id&&/\s/.test(s.id))return a("Bookmark name cannot contain space characters.")},s=>{const l=o.model.document.selection.getSelectedElement(),c=n.getElementForBookmarkId(s.id);if(l!==c&&c)return a("Bookmark name already exists.")}]}class Bookmark extends Plugin{static get pluginName(){return"Bookmark"}static get requires(){return[BookmarkEditing,BookmarkUI,Widget]}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClipboardObserver extends DomEventObserver{constructor(n){super(n);M(this,"domEventType",["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"]);const s=this.document;this.listenTo(s,"paste",l("clipboardInput"),{priority:"low"}),this.listenTo(s,"drop",l("clipboardInput"),{priority:"low"}),this.listenTo(s,"dragover",l("dragging"),{priority:"low"});function l(c){return(u,d)=>{d.preventDefault();const h=d.dropRange?[d.dropRange]:null,f=new EventInfo(s,c);s.fire(f,{dataTransfer:d.dataTransfer,method:u.name,targetRanges:h,target:d.target,domEvent:d.domEvent}),f.stop.called&&d.stopPropagation()}}}onDomEvent(n){const s="clipboardData"in n?n.clipboardData:n.dataTransfer,l=n.type=="drop"||n.type=="paste",c={dataTransfer:new DataTransfer(s,{cacheFiles:l})};if(n.type=="drop"||n.type=="dragover"){const u=getRangeFromMouseEvent(n);c.dropRange=u&&this.view.domConverter.domRangeToView(u)}this.fire(n.type,n,c)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function plainTextToHtml(o){return o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(o.includes("</p><p>")||o.includes("<br>"))&&(o=`<p>${o}</p>`),o}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeClipboardData(o){return o.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(a,n)=>n.length==1?" ":n).replace(/<!--[\s\S]*?-->/g,"")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const smallPaddingElements=["figcaption","li"],listElements=["ol","ul"];function viewToPlainText(o,a){if(a.is("$text")||a.is("$textProxy"))return a.data;if(a.is("element","img")&&a.hasAttribute("alt"))return a.getAttribute("alt");if(a.is("element","br"))return`
`;let n="",s=null;for(const l of a.getChildren())n+=newLinePadding(l,s)+viewToPlainText(o,l),s=l;if(a.is("rawElement")){const l=document.createElement("div");a.render(l,o),n+=domElementToPlainText(l)}return n}function domElementToPlainText(o){let a="";if(o.nodeType===Node.TEXT_NODE)return o.textContent;if(o.tagName==="BR")return`
`;for(const n of o.childNodes)a+=domElementToPlainText(n);return a}function newLinePadding(o,a){return a?o.is("element","li")&&!o.isEmpty&&o.getChild(0).is("containerElement")||listElements.includes(o.name)&&listElements.includes(a.name)?`

`:!o.is("containerElement")&&!a.is("containerElement")?"":smallPaddingElements.includes(o.name)||smallPaddingElements.includes(a.name)?`
`:o.is("element")&&o.getCustomProperty("dataPipeline:transparentRendering")||a.is("element")&&a.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}class ClipboardMarkersUtils extends Plugin{constructor(){super(...arguments);M(this,"_markersToCopy",new Map)}static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(n,s){this._markersToCopy.set(n,s)}_copySelectedFragmentWithMarkers(n,s,l=c=>c.model.getSelectedContent(c.model.document.selection)){return this.editor.model.change(c=>{const u=c.model.document.selection;c.setSelection(s);const d=this._insertFakeMarkersIntoSelection(c,c.model.document.selection,n),h=l(c),f=this._removeFakeMarkersInsideElement(c,h);for(const[p,g]of Object.entries(d)){f[p]||(f[p]=c.createRangeIn(h));for(const v of g)c.remove(v)}h.markers.clear();for(const[p,g]of Object.entries(f))h.markers.set(p,g);return c.setSelection(u),h})}_pasteMarkersIntoTransformedElement(n,s){const l=this._getPasteMarkersFromRangeMap(n);return this.editor.model.change(c=>{const u=this._insertFakeMarkersElements(c,l),d=s(c),h=this._removeFakeMarkersInsideElement(c,d);for(const f of Object.values(u).flat())c.remove(f);for(const[f,p]of Object.entries(h))c.model.markers.has(f)||c.addMarker(f,{usingOperation:!0,affectsData:!0,range:p});return d})}_pasteFragmentWithMarkers(n){const s=this._getPasteMarkersFromRangeMap(n.markers);n.markers.clear();for(const l of s)n.markers.set(l.name,l.range);return this.editor.model.insertContent(n)}_forceMarkersCopy(n,s,l={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){const c=this._markersToCopy.get(n);this._markersToCopy.set(n,l),s(),c?this._markersToCopy.set(n,c):this._markersToCopy.delete(n)}_isMarkerCopyable(n,s){const l=this._getMarkerClipboardConfig(n);if(!l)return!1;if(!s)return!0;const{allowedActions:c}=l;return c==="all"||c.includes(s)}_hasMarkerConfiguration(n){return!!this._getMarkerClipboardConfig(n)}_getMarkerClipboardConfig(n){const[s]=n.split(":");return this._markersToCopy.get(s)||null}_insertFakeMarkersIntoSelection(n,s,l){const c=this._getCopyableMarkersFromSelection(n,s,l);return this._insertFakeMarkersElements(n,c)}_getCopyableMarkersFromSelection(n,s,l){const c=Array.from(s.getRanges()),u=new Set(c.flatMap(h=>Array.from(n.model.markers.getMarkersIntersectingRange(h)))),d=h=>{if(!this._isMarkerCopyable(h.name,l))return!1;const{copyPartiallySelected:p}=this._getMarkerClipboardConfig(h.name);if(!p){const g=h.getRange();return c.some(v=>v.containsRange(g,!0))}return!0};return Array.from(u).filter(d).map(h=>({name:l==="dragstart"?this._getUniqueMarkerName(h.name):h.name,range:h.getRange()}))}_getPasteMarkersFromRangeMap(n,s=null){const{model:l}=this.editor;return(n instanceof Map?Array.from(n.entries()):Object.entries(n)).flatMap(([u,d])=>{if(!this._hasMarkerConfiguration(u))return[{name:u,range:d}];if(this._isMarkerCopyable(u,s)){const h=this._getMarkerClipboardConfig(u),f=l.markers.has(u)&&l.markers.get(u).getRange().root.rootName==="$graveyard";return(h.duplicateOnPaste||f)&&(u=this._getUniqueMarkerName(u)),[{name:u,range:d}]}return[]})}_insertFakeMarkersElements(n,s){const l={},c=s.flatMap(u=>{const{start:d,end:h}=u.range;return[{position:d,marker:u,type:"start"},{position:h,marker:u,type:"end"}]}).sort(({position:u},{position:d})=>u.isBefore(d)?1:-1);for(const{position:u,marker:d,type:h}of c){const f=n.createElement("$marker",{"data-name":d.name,"data-type":h});l[d.name]||(l[d.name]=[]),l[d.name].push(f),n.insert(f,u)}return l}_removeFakeMarkersInsideElement(n,s){const c=this._getAllFakeMarkersFromElement(n,s).reduce((u,d)=>{const h=d.markerElement&&n.createPositionBefore(d.markerElement);let f=u[d.name],p=!1;return f&&f.start&&f.end&&(this._getMarkerClipboardConfig(d.name).duplicateOnPaste?u[this._getUniqueMarkerName(d.name)]=u[d.name]:p=!0,f=null),p||(u[d.name]={...f,[d.type]:h}),d.markerElement&&n.remove(d.markerElement),u},{});return mapValues(c,u=>new Range(u.start||n.createPositionFromPath(s,[0]),u.end||n.createPositionAt(s,"end")))}_getAllFakeMarkersFromElement(n,s){const l=Array.from(n.createRangeIn(s)).flatMap(({item:d})=>{if(!d.is("element","$marker"))return[];const h=d.getAttribute("data-name"),f=d.getAttribute("data-type");return[{markerElement:d,name:h,type:f}]}),c=[],u=[];for(const d of l)d.type==="end"&&(l.some(f=>f.name===d.name&&f.type==="start")||c.push({markerElement:null,name:d.name,type:"start"})),d.type==="start"&&(l.some(f=>f.name===d.name&&f.type==="end")||u.unshift({markerElement:null,name:d.name,type:"end"}));return[...c,...l,...u]}_getUniqueMarkerName(n){const s=n.split(":"),l=uid().substring(1,6);return s.length===3?`${s.slice(0,2).join(":")}:${l}`:`${s.join(":")}:${l}`}}class ClipboardPipeline extends Plugin{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils]}init(){this.editor.editing.view.addObserver(ClipboardObserver),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(a,n,s){const l=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:s==="cut"},()=>{const c=l._copySelectedFragmentWithMarkers(s,n);this.fire("outputTransformation",{dataTransfer:a,content:c,method:s})})}_setupPasteDrop(){const a=this.editor,n=a.model,s=a.editing.view,l=s.document,c=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(l,"clipboardInput",(u,d)=>{d.method=="paste"&&!a.model.canEditAt(a.model.document.selection)&&u.stop()},{priority:"highest"}),this.listenTo(l,"clipboardInput",(u,d)=>{const h=d.dataTransfer;let f;if(d.content)f=d.content;else{let v="";h.getData("text/html")?v=normalizeClipboardData(h.getData("text/html")):h.getData("text/plain")&&(v=plainTextToHtml(h.getData("text/plain"))),f=this.editor.data.htmlProcessor.toView(v)}const p=new EventInfo(this,"inputTransformation"),g=h.getData("application/ckeditor5-editor-id")||null;this.fire(p,{content:f,dataTransfer:h,sourceEditorId:g,targetRanges:d.targetRanges,method:d.method}),p.stop.called&&u.stop(),s.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(u,d)=>{if(d.content.isEmpty)return;const f=this.editor.data.toModel(d.content,"$clipboardHolder");f.childCount!=0&&(u.stop(),n.change(()=>{this.fire("contentInsertion",{content:f,method:d.method,sourceEditorId:d.sourceEditorId,dataTransfer:d.dataTransfer,targetRanges:d.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(u,d)=>{d.resultRange=c._pasteFragmentWithMarkers(d.content)},{priority:"low"})}_setupCopyCut(){const a=this.editor,n=a.model.document,l=a.editing.view.document,c=(u,d)=>{const h=d.dataTransfer;d.preventDefault(),this._fireOutputTransformationEvent(h,n.selection,u.name)};this.listenTo(l,"copy",c,{priority:"low"}),this.listenTo(l,"cut",(u,d)=>{a.model.canEditAt(a.model.document.selection)?c(u,d):d.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(u,d)=>{const h=a.data.toView(d.content,{isClipboardPipeline:!0});l.fire("clipboardOutput",{dataTransfer:d.dataTransfer,content:h,method:d.method})},{priority:"low"}),this.listenTo(l,"clipboardOutput",(u,d)=>{d.content.isEmpty||(d.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(d.content)),d.dataTransfer.setData("text/plain",viewToPlainText(a.data.htmlProcessor.domConverter,d.content)),d.dataTransfer.setData("application/ckeditor5-editor-id",this.editor.id)),d.method=="cut"&&a.model.deleteContent(n.selection)},{priority:"low"})}}const toPx$1=toUnit("px");let LineView$1=class extends View$1{constructor(){super();const a=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",a.if("isVisible","ck-hidden",n=>!n)],style:{left:a.to("left",n=>toPx$1(n)),top:a.to("top",n=>toPx$1(n)),width:a.to("width",n=>toPx$1(n))}}})}};class DragDropTarget extends Plugin{constructor(){super(...arguments);M(this,"removeDropMarkerDelayed",delay(()=>this.removeDropMarker(),40));M(this,"_updateDropMarkerThrottled",throttle$2(n=>this._updateDropMarker(n),40));M(this,"_reconvertMarkerThrottled",throttle$2(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0));M(this,"_dropTargetLineView",new LineView$1);M(this,"_domEmitter",new(DomEmitterMixin()));M(this,"_scrollables",new Map)}static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(const{resizeObserver:n}of this._scrollables.values())n.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(n,s,l,c,u,d){this.removeDropMarkerDelayed.cancel();const h=findDropTargetRange(this.editor,n,s,l,c,u,d);/* istanbul ignore next -- @preserve */if(h){if(d&&d.containsRange(h))return this.removeDropMarker();this._updateDropMarkerThrottled(h)}}getFinalDropRange(n,s,l,c,u,d){const h=findDropTargetRange(this.editor,n,s,l,c,u,d);return this.removeDropMarker(),h}removeDropMarker(){const n=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,n.markers.has("drop-target")&&n.change(s=>{s.removeMarker("drop-target")})}_setupDropMarker(){const n=this.editor;n.ui.view.body.add(this._dropTargetLineView),n.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),n.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(s,{writer:l})=>{if(n.model.schema.checkChild(s.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(l);s.markerRange.isCollapsed?this._updateDropTargetLine(s.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(n){const s=this.editor,l=s.model.markers;s.model.change(c=>{l.has("drop-target")?l.get("drop-target").getRange().isEqual(n)||c.updateMarker("drop-target",{range:n}):c.addMarker("drop-target",{range:n,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(n){return n.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(s){const l=this.toDomElement(s);return l.append("⁠",s.createElement("span"),"⁠"),l})}_updateDropTargetLine(n){const s=this.editor.editing,l=n.start.nodeBefore,c=n.start.nodeAfter,u=n.start.parent,d=l?s.mapper.toViewElement(l):null,h=d?s.view.domConverter.mapViewToDom(d):null,f=c?s.mapper.toViewElement(c):null,p=f?s.view.domConverter.mapViewToDom(f):null,g=s.mapper.toViewElement(u);if(!g)return;const v=s.view.domConverter.mapViewToDom(g),b=this._getScrollableRect(g),{scrollX:w,scrollY:x}=global$1.window,S=h?new Rect$3(h):null,E=p?new Rect$3(p):null,T=new Rect$3(v).excludeScrollbarsAndBorders(),C=S?S.bottom:T.top,A=E?E.top:T.bottom,R=global$1.window.getComputedStyle(v),j=C<=A?(C+A)/2:A;if(b.top<j&&j<b.bottom){const D=T.left+parseFloat(R.paddingLeft),O=T.right-parseFloat(R.paddingRight),H=Math.max(D+w,b.left),q=Math.min(O+w,b.right);this._dropTargetLineView.set({isVisible:!0,left:H,top:j+x,width:q-H})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(n){const s=n.root.rootName;let l;if(this._scrollables.has(s))l=this._scrollables.get(s).domElement;else{const c=this.editor.editing.view.domConverter.mapViewToDom(n);l=findScrollableElement(c),this._domEmitter.listenTo(l,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});const u=new ResizeObserver$1(l,this._reconvertMarkerThrottled);this._scrollables.set(s,{domElement:l,resizeObserver:u})}return new Rect$3(l).excludeScrollbarsAndBorders()}}function findDropTargetRange(o,a,n,s,l,c,u){const d=o.model,h=o.editing.mapper;let p=getClosestMappedModelElement(o,a);for(;p;){if(!c){if(d.schema.checkChild(p,"$text")){if(n){const g=n[0].start,v=h.toModelPosition(g);if(!u||Array.from(u.getItems({shallow:!0})).every(w=>d.schema.checkChild(v,w))){if(d.schema.checkChild(v,"$text"))return d.createRange(v);if(g)return findDropTargetRangeForElement(o,getClosestMappedModelElement(o,g.parent),s,l)}}}else if(d.schema.isInline(p))return findDropTargetRangeForElement(o,p,s,l)}if(d.schema.isBlock(p))return findDropTargetRangeForElement(o,p,s,l);if(d.schema.checkChild(p,"$block")){const g=Array.from(p.getChildren()).filter(w=>w.is("element")&&!shouldIgnoreElement(o,w));let v=0,b=g.length;if(b==0)return d.createRange(d.createPositionAt(p,"end"));for(;v<b-1;){const w=Math.floor((v+b)/2);findElementSide(o,g[w],s,l)=="before"?b=w:v=w}return findDropTargetRangeForElement(o,g[v],s,l)}p=p.parent}return null}function shouldIgnoreElement(o,a){const n=o.editing.mapper,s=o.editing.view.domConverter,l=n.toViewElement(a);if(!l)return!0;const c=s.mapViewToDom(l);return global$1.window.getComputedStyle(c).float!="none"}function findDropTargetRangeForElement(o,a,n,s){const l=o.model;return l.createRange(l.createPositionAt(a,findElementSide(o,a,n,s)))}function findElementSide(o,a,n,s){const l=o.editing.mapper,c=o.editing.view.domConverter,u=l.toViewElement(a),d=c.mapViewToDom(u),h=new Rect$3(d);return o.model.schema.isInline(a)?n<(h.left+h.right)/2?"before":"after":s<(h.top+h.bottom)/2?"before":"after"}function getClosestMappedModelElement(o,a){const n=o.editing.mapper,s=o.editing.view,l=n.toModelElement(a);if(l)return l;const c=s.createPositionBefore(a),u=n.findMappedViewAncestor(c);return n.toModelElement(u)}function findScrollableElement(o){let a=o;do{a=a.parentElement;const n=global$1.window.getComputedStyle(a).overflowY;if(n=="auto"||n=="scroll")break}while(a.tagName!="BODY");return a}class DragDropBlockToolbar extends Plugin{constructor(){super(...arguments);M(this,"_isBlockDragging",!1);M(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;if(this.listenTo(n,"change:isReadOnly",(s,l,c)=>{c?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),env$1.isAndroid&&this.forceDisabled("noAndroidSupport"),n.plugins.has("BlockToolbar")){const l=n.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(l,"dragstart",(c,u)=>this._handleBlockDragStart(u)),this._domEmitter.listenTo(global$1.document,"dragover",(c,u)=>this._handleBlockDragging(u)),this._domEmitter.listenTo(global$1.document,"drop",(c,u)=>this._handleBlockDragging(u)),this._domEmitter.listenTo(global$1.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&l.setAttribute("draggable","true"),this.on("change:isEnabled",(c,u,d)=>{l.setAttribute("draggable",d?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(n){if(!this.isEnabled)return;const s=this.editor.model,l=s.document.selection,c=this.editor.editing.view,u=Array.from(l.getSelectedBlocks()),d=s.createRange(s.createPositionBefore(u[0]),s.createPositionAfter(u[u.length-1]));s.change(h=>h.setSelection(d)),this._isBlockDragging=!0,c.focus(),c.getObserver(ClipboardObserver).onDomEvent(n)}_handleBlockDragging(n){if(!this.isEnabled||!this._isBlockDragging)return;const s=n.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),l=n.clientY,c=document.elementFromPoint(s,l),u=this.editor.editing.view;!c||!c.closest(".ck-editor__editable")||u.getObserver(ClipboardObserver).onDomEvent({...n,type:n.type,dataTransfer:n.dataTransfer,target:c,clientX:s,clientY:l,preventDefault:()=>n.preventDefault(),stopPropagation:()=>n.stopPropagation()})}_handleBlockDragEnd(){this._isBlockDragging=!1}}class DragDrop extends Plugin{constructor(){super(...arguments);M(this,"_draggedRange");M(this,"_draggingUid");M(this,"_draggableElement");M(this,"_clearDraggableAttributesDelayed",delay(()=>this._clearDraggableAttributes(),40));M(this,"_blockMode",!1);M(this,"_domEmitter",new(DomEmitterMixin()));M(this,"_previewContainer")}static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline,Widget,DragDropTarget,DragDropBlockToolbar]}init(){const n=this.editor,s=n.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,s.addObserver(ClipboardObserver),s.addObserver(MouseObserver),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(n,"change:isReadOnly",(l,c,u)=>{u?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(l,c,u)=>{u||this._finalizeDragging(!1)}),env$1.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){const n=this.editor,s=n.model,l=n.editing.view,c=l.document,u=n.plugins.get(DragDropTarget);this.listenTo(c,"dragstart",(d,h)=>{if(h.target&&h.target.is("editableElement")){h.preventDefault();return}if(this._prepareDraggedRange(h.target),!this._draggedRange){h.preventDefault();return}this._draggingUid=uid(),h.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",h.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);const f=s.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(h.dataTransfer,f,"dragstart");const{dataTransfer:g,domTarget:v,domEvent:b}=h,{clientX:w}=b;this._updatePreview({dataTransfer:g,domTarget:v,clientX:w}),h.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(c,"dragend",(d,h)=>{this._finalizeDragging(!h.dataTransfer.isCanceled&&h.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(global$1.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(c,"dragenter",()=>{this.isEnabled&&l.focus()}),this.listenTo(c,"dragleave",()=>{u.removeDropMarkerDelayed()}),this.listenTo(c,"dragging",(d,h)=>{if(!this.isEnabled){h.dataTransfer.dropEffect="none";return}const{clientX:f,clientY:p}=h.domEvent;u.updateDropMarker(h.target,h.targetRanges,f,p,this._blockMode,this._draggedRange),this._draggedRange||(h.dataTransfer.dropEffect="copy"),env$1.isGecko||(h.dataTransfer.effectAllowed=="copy"?h.dataTransfer.dropEffect="copy":["all","copyMove"].includes(h.dataTransfer.effectAllowed)&&(h.dataTransfer.dropEffect="move")),d.stop()},{priority:"low"})}_setupClipboardInputIntegration(){const n=this.editor,l=n.editing.view.document,c=n.plugins.get(DragDropTarget);this.listenTo(l,"clipboardInput",(u,d)=>{if(d.method!="drop")return;const{clientX:h,clientY:f}=d.domEvent,p=c.getFinalDropRange(d.target,d.targetRanges,h,f,this._blockMode,this._draggedRange);if(!p){this._finalizeDragging(!1),u.stop();return}if(this._draggedRange&&this._draggingUid!=d.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),getFinalDropEffect(d.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(p,!0)){this._finalizeDragging(!1),u.stop();return}d.targetRanges=[n.editing.mapper.toViewRange(p)]},{priority:"high"})}_setupContentInsertionIntegration(){const n=this.editor.plugins.get(ClipboardPipeline);n.on("contentInsertion",(s,l)=>{if(!this.isEnabled||l.method!=="drop")return;const c=l.targetRanges.map(u=>this.editor.editing.mapper.toModelRange(u));this.editor.model.change(u=>u.setSelection(c))},{priority:"high"}),n.on("contentInsertion",(s,l)=>{if(!this.isEnabled||l.method!=="drop")return;const c=getFinalDropEffect(l.dataTransfer)=="move",u=!l.resultRange||!l.resultRange.isCollapsed;this._finalizeDragging(u&&c)},{priority:"lowest"})}_setupDraggableAttributeHandling(){const n=this.editor,s=n.editing.view,l=s.document;this.listenTo(l,"mousedown",(c,u)=>{if(env$1.isAndroid||!u)return;this._clearDraggableAttributesDelayed.cancel();let d=findDraggableWidget(u.target);if(env$1.isBlink&&!n.isReadOnly&&!d&&!l.selection.isCollapsed){const h=l.selection.getSelectedElement();(!h||!isWidget(h))&&(d=l.selection.editableElement)}d&&(s.change(h=>{h.setAttribute("draggable","true",d)}),this._draggableElement=n.editing.mapper.toModelElement(d))}),this.listenTo(l,"mouseup",()=>{env$1.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){const n=this.editor.editing;n.view.change(s=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&s.removeAttribute("draggable",n.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(n){const s=this.editor,l=s.model;s.plugins.get(DragDropTarget).removeDropMarker(),this._clearDraggableAttributes(),s.plugins.has("WidgetToolbarRepository")&&s.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(n&&this.isEnabled&&l.change(u=>{const d=l.createSelection(this._draggedRange);l.deleteContent(d,{doNotAutoparagraph:!0});const h=d.getFirstPosition().parent;h.isEmpty&&!l.schema.checkChild(h,"$text")&&l.schema.checkChild(h,"paragraph")&&u.insertElement("paragraph",h,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(n){const s=this.editor,l=s.model,c=l.document.selection,u=n?findDraggableWidget(n):null;if(u){const p=s.editing.mapper.toModelElement(u);this._draggedRange=LiveRange.fromRange(l.createRangeOn(p)),this._blockMode=l.schema.isBlock(p),s.plugins.has("WidgetToolbarRepository")&&s.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(c.isCollapsed&&!c.getFirstPosition().parent.isEmpty)return;const d=Array.from(c.getSelectedBlocks()),h=c.getFirstRange();if(d.length==0){this._draggedRange=LiveRange.fromRange(h);return}const f=getRangeIncludingFullySelectedParents(l,d);if(d.length>1)this._draggedRange=LiveRange.fromRange(f),this._blockMode=!0;else if(d.length==1){const p=h.start.isTouching(f.start)&&h.end.isTouching(f.end);this._draggedRange=LiveRange.fromRange(p?f:h),this._blockMode=p}l.change(p=>p.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:n,domTarget:s,clientX:l}){const c=this.editor.editing.view,u=c.document.selection.editableElement,d=c.domConverter.mapViewToDom(u),h=global$1.window.getComputedStyle(d);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=createElement$1(global$1.document,"div",{style:"position: fixed; left: -999999px;"}),global$1.document.body.appendChild(this._previewContainer));const f=new Rect$3(d);if(d.contains(s))return;const p=parseFloat(h.paddingLeft),g=createElement$1(global$1.document,"div");g.className="ck ck-content",g.style.width=h.width,g.style.paddingLeft=`${f.left-l+p}px`,env$1.isiOS&&(g.style.backgroundColor="white"),c.domConverter.setContentOf(g,n.getData("text/html")),n.setDragImage(g,0,0),this._previewContainer.appendChild(g)}}function getFinalDropEffect(o){return env$1.isGecko?o.dropEffect:["all","copyMove"].includes(o.effectAllowed)?"move":"copy"}function findDraggableWidget(o){if(o.is("editableElement"))return null;if(o.hasClass("ck-widget__selection-handle"))return o.findAncestor(isWidget);if(isWidget(o))return o;const a=o.findAncestor(n=>isWidget(n)||n.is("editableElement"));return isWidget(a)?a:null}function getRangeIncludingFullySelectedParents(o,a){const n=a[0],s=a[a.length-1],l=n.getCommonAncestor(s),c=o.createPositionBefore(n),u=o.createPositionAfter(s);if(l&&l.is("element")&&!o.schema.isLimit(l)){const d=o.createRangeOn(l),h=c.isTouching(d.start),f=u.isTouching(d.end);if(h&&f)return getRangeIncludingFullySelectedParents(o,[l])}return o.createRange(c,u)}class PastePlainText extends Plugin{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const a=this.editor,n=a.model,s=a.editing.view,l=n.document.selection;s.addObserver(ClipboardObserver),a.plugins.get(ClipboardPipeline).on("contentInsertion",(c,u)=>{isUnformattedInlineContent(u.content,n)&&n.change(d=>{const h=Array.from(l.getAttributes()).filter(([p])=>n.schema.getAttributeProperties(p).isFormatting);l.isCollapsed||n.deleteContent(l,{doNotAutoparagraph:!0}),h.push(...l.getAttributes());const f=d.createRangeIn(u.content);for(const p of f.getItems())for(const g of h)n.schema.checkAttribute(p,g[0])&&d.setAttribute(g[0],g[1],p)})})}}function isUnformattedInlineContent(o,a){let n=a.createRangeIn(o);if(o.childCount==1){const s=o.getChild(0);s.is("element")&&a.schema.isBlock(s)&&!a.schema.isObject(s)&&!a.schema.isLimit(s)&&(n=a.createRangeIn(s))}for(const s of n.getItems())if(!a.schema.isInline(s)||Array.from(s.getAttributeKeys()).find(c=>a.schema.getAttributeProperties(c).isFormatting))return!1;return!0}class Clipboard extends Plugin{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,DragDrop,PastePlainText]}init(){const a=this.editor,n=this.editor.t;a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Copy selected content"),keystroke:"CTRL+C"},{label:n("Paste content"),keystroke:"CTRL+V"},{label:n("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getNormalizedAndLocalizedLanguageDefinitions(o){const a=o.t,n=o.config.get("codeBlock.languages");for(const s of n)s.label==="Plain text"&&(s.label=a("Plain text")),s.class===void 0&&(s.class=`language-${s.language}`);return n}function getPropertyAssociation(o,a,n){const s={};for(const l of o)if(a==="class"){const c=l[a].split(" ").shift();s[c]=l[n]}else s[l[a]]=l[n];return s}function getLeadingWhiteSpaces(o){return o.data.match(/^(\s*)/)[0]}function rawSnippetTextToViewDocumentFragment(o,a){const n=o.createDocumentFragment(),s=a.split(`
`),l=s.reduce((c,u,d)=>(c.push(u),d<s.length-1&&c.push(o.createElement("br")),c),[]);return o.appendChild(l,n),n}function getIndentOutdentPositions(o){const a=o.document.selection,n=[];if(a.isCollapsed)return[a.anchor];const s=a.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(const{item:l}of s){let c=l.is("$textProxy")?l.textNode:l;const u=c.parent;if(!u.is("element","codeBlock")||c.is("element","softBreak"))continue;for(;c.previousSibling&&!c.previousSibling.is("element","softBreak");)c=c.previousSibling;const d=c.is("$text")?c.startOffset+getLeadingWhiteSpaces(c).length:c.startOffset,h=o.createPositionAt(u,d);n.every(f=>!f.isEqual(h))&&n.push(h)}return n}function isModelSelectionInCodeBlock(o){const a=first(o.getSelectedBlocks());return!!a&&a.is("element","codeBlock")}function canBeCodeBlock(o,a){return a.is("rootElement")||o.isLimit(a)?!1:o.checkChild(a.parent,"codeBlock")}function getCodeBlockAriaAnnouncement(o,a,n,s){const l=getPropertyAssociation(a,"language","label"),c=n.getAttribute("language");if(c in l){const u=l[c];return o(s==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",u)}return o(s==="enter"?"Entering code snippet":"Leaving code snippet")}function getTextNodeAtLineStart(o,a){for(o.textNode&&(o=a.createPositionBefore(o.textNode));o.nodeBefore&&!o.nodeBefore.is("element","softBreak");)o=a.createPositionBefore(o.nodeBefore);const n=o.nodeAfter;return n&&n.is("$text")?n:null}class CodeBlockCommand extends Command{constructor(n){super(n);M(this,"_lastLanguage");this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(n={}){const s=this.editor,l=s.model,c=l.document.selection,d=getNormalizedAndLocalizedLanguageDefinitions(s)[0],h=Array.from(c.getSelectedBlocks()),f=n.forceValue==null?!this.value:n.forceValue,p=getLanguage(n,this._lastLanguage,d.language);l.change(g=>{f?this._applyCodeBlock(g,h,p):this._removeCodeBlock(g,h)})}_getValue(){const n=this.editor.model.document.selection,s=first(n.getSelectedBlocks());return!!(s&&s.is("element","codeBlock"))?s.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;const n=this.editor.model.document.selection,s=this.editor.model.schema,l=first(n.getSelectedBlocks());return l?canBeCodeBlock(s,l):!1}_applyCodeBlock(n,s,l){this._lastLanguage=l;const c=this.editor.model.schema,u=s.filter(d=>canBeCodeBlock(c,d));for(const d of u)n.rename(d,"codeBlock"),n.setAttribute("language",l,d),c.removeDisallowedAttributes([d],n),Array.from(d.getChildren()).filter(h=>!c.checkChild(d,h)).forEach(h=>n.remove(h));u.reverse().forEach((d,h)=>{const f=u[h+1];d.previousSibling===f&&(n.appendElement("softBreak",f),n.merge(n.createPositionBefore(d)))})}_removeCodeBlock(n,s){const l=s.filter(c=>c.is("element","codeBlock"));for(const c of l){const u=n.createRangeOn(c);for(const d of Array.from(u.getItems()).reverse())if(d.is("element","softBreak")&&d.parent.is("element","codeBlock")){const{position:h}=n.split(n.createPositionBefore(d)),f=h.nodeAfter;n.rename(f,"paragraph"),n.removeAttribute("language",f),n.remove(d)}n.rename(c,"paragraph"),n.removeAttribute("language",c)}}}function getLanguage(o,a,n){return o.language?o.language:o.usePreviousLanguageChoice&&a?a:n}class IndentCodeBlockCommand extends Command{constructor(n){super(n);M(this,"_indentSequence");this._indentSequence=n.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const s=this.editor.model;s.change(l=>{const c=getIndentOutdentPositions(s);for(const u of c){const d=l.createText(this._indentSequence);s.insertContent(d,u)}})}_checkEnabled(){return this._indentSequence?isModelSelectionInCodeBlock(this.editor.model.document.selection):!1}}class OutdentCodeBlockCommand extends Command{constructor(n){super(n);M(this,"_indentSequence");this._indentSequence=n.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){const s=this.editor.model;s.change(()=>{const l=getIndentOutdentPositions(s);for(const c of l){const u=getLastOutdentableSequenceRange(s,c,this._indentSequence);u&&s.deleteContent(s.createSelection(u))}})}_checkEnabled(){if(!this._indentSequence)return!1;const n=this.editor.model;return isModelSelectionInCodeBlock(n.document.selection)?getIndentOutdentPositions(n).some(s=>getLastOutdentableSequenceRange(n,s,this._indentSequence)):!1}}function getLastOutdentableSequenceRange(o,a,n){const s=getTextNodeAtLineStart(a,o);if(!s)return null;const l=getLeadingWhiteSpaces(s),c=l.lastIndexOf(n);if(c+n.length!==l.length||c===-1)return null;const{parent:u,startOffset:d}=s;return o.createRange(o.createPositionAt(u,d+c),o.createPositionAt(u,d+c+n.length))}function modelToViewCodeBlockInsertion(o,a,n=!1){const s=getPropertyAssociation(a,"language","class"),l=getPropertyAssociation(a,"language","label");return(c,u,d)=>{const{writer:h,mapper:f,consumable:p}=d;if(!p.consume(u.item,"insert"))return;const g=u.item.getAttribute("language"),v=f.toViewPosition(o.createPositionBefore(u.item)),b={};n&&(b["data-language"]=l[g],b.spellcheck="false");const w=s[g]?{class:s[g]}:void 0,x=h.createContainerElement("code",w),S=h.createContainerElement("pre",b,x);h.insert(v,S),f.bindElements(u.item,x)}}function modelToDataViewSoftBreakInsertion(o){return(a,n,s)=>{if(n.item.parent.name!=="codeBlock")return;const{writer:l,mapper:c,consumable:u}=s;if(!u.consume(n.item,"insert"))return;const d=c.toViewPosition(o.createPositionBefore(n.item));l.insert(d,l.createText(`
`))}}function dataViewToModelCodeBlockInsertion(o,a){const n=getPropertyAssociation(a,"class","language"),s=a[0].language;return(l,c,u)=>{const d=c.viewItem,h=d.parent;if(!h||!h.is("element","pre")||c.modelCursor.findAncestor("codeBlock"))return;const{consumable:f,writer:p}=u;if(!f.test(d,{name:!0}))return;const g=p.createElement("codeBlock"),v=[...d.getClassNames()];v.length||v.push("");for(const b of v){const w=n[b];if(w){p.setAttribute("language",w,g);break}}g.hasAttribute("language")||p.setAttribute("language",s,g),u.convertChildren(d,g),u.safeInsert(g,c.modelCursor)&&(f.consume(d,{name:!0}),u.updateConversionResult(g,c))}}function dataViewToModelTextNewlinesInsertion(){return(o,a,{consumable:n,writer:s})=>{let l=a.modelCursor;if(!n.test(a.viewItem)||!l.findAncestor("codeBlock"))return;n.consume(a.viewItem);const u=a.viewItem.data.split(`
`).map(h=>s.createText(h)),d=u[u.length-1];for(const h of u)if(s.insert(h,l),l=l.getShiftedBy(h.offsetSize),h!==d){const f=s.createElement("softBreak");s.insert(f,l),l=s.createPositionAfter(f)}a.modelRange=s.createRange(a.modelCursor,l),a.modelCursor=l}}function dataViewToModelOrphanNodeConsumer(){return(o,a,{consumable:n})=>{const s=a.viewItem;if(s.findAncestor("pre"))return;const l=Array.from(s.getChildren()),c=l.find(u=>u.is("element","code"));if(c)for(const u of l)u===c||!u.is("$text")||n.consume(u,{name:!0})}}const DEFAULT_ELEMENT="paragraph";class CodeBlockEditing extends Plugin{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ShiftEnter]}constructor(a){super(a),a.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){const a=this.editor,n=a.model.schema,s=a.model,l=a.editing.view,c=getNormalizedAndLocalizedLanguageDefinitions(a);a.commands.add("codeBlock",new CodeBlockCommand(a)),a.commands.add("indentCodeBlock",new IndentCodeBlockCommand(a)),a.commands.add("outdentCodeBlock",new OutdentCodeBlockCommand(a)),this.listenTo(l.document,"tab",(u,d)=>{const h=d.shiftKey?"outdentCodeBlock":"indentCodeBlock";a.commands.get(h).isEnabled&&(a.execute(h),d.stopPropagation(),d.preventDefault(),u.stop())},{context:"pre"}),n.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),n.addAttributeCheck((u,d)=>{const h=u.getItem(u.length-2);if(n.getAttributeProperties(d).isFormatting&&h&&h.name=="codeBlock")return!1}),a.editing.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(s,c,!0)),a.data.downcastDispatcher.on("insert:codeBlock",modelToViewCodeBlockInsertion(s,c)),a.data.downcastDispatcher.on("insert:softBreak",modelToDataViewSoftBreakInsertion(s),{priority:"high"}),a.data.upcastDispatcher.on("element:code",dataViewToModelCodeBlockInsertion(l,c)),a.data.upcastDispatcher.on("text",dataViewToModelTextNewlinesInsertion()),a.data.upcastDispatcher.on("element:pre",dataViewToModelOrphanNodeConsumer(),{priority:"high"}),this.listenTo(a.editing.view.document,"clipboardInput",(u,d)=>{let h=s.createRange(s.document.selection.anchor);if(d.targetRanges&&(h=a.editing.mapper.toModelRange(d.targetRanges[0])),!h.start.parent.is("element","codeBlock"))return;const f=d.dataTransfer.getData("text/plain"),p=new UpcastWriter(a.editing.view.document);d.content=rawSnippetTextToViewDocumentFragment(p,f)}),a.plugins.has("ClipboardPipeline")&&a.plugins.get(ClipboardPipeline).on("contentInsertion",(u,d)=>{const h=a.model,f=h.document.selection;f.anchor.parent.is("element","codeBlock")&&h.change(p=>{const g=p.createRangeIn(d.content);for(const v of[...g.getItems()])v.is("node")&&!n.checkChild(f.anchor,v)&&p.remove(v)})}),this.listenTo(s,"getSelectedContent",(u,[d])=>{const h=d.anchor;d.isCollapsed||!h.parent.is("element","codeBlock")||!h.hasSameParentAs(d.focus)||s.change(f=>{const p=u.return;if(h.parent.is("element")&&(p.childCount>1||d.containsEntireContent(h.parent))){const v=f.createElement("codeBlock",h.parent.getAttributes());f.append(p,v);const b=f.createDocumentFragment();f.append(v,b),u.return=b;return}const g=p.getChild(0);n.checkAttribute(g,"code")&&f.setAttribute("code",!0,g)})})}afterInit(){const a=this.editor,n=a.commands,s=n.get("indent"),l=n.get("outdent");s&&s.registerChildCommand(n.get("indentCodeBlock"),{priority:"highest"}),l&&l.registerChildCommand(n.get("outdentCodeBlock")),this.listenTo(a.editing.view.document,"enter",(c,u)=>{a.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!leaveBlockStartOnEnter(a,u.isSoft)&&!leaveBlockEndOnEnter(a,u.isSoft)&&breakLineOnEnter(a),u.preventDefault(),c.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){const{model:a,ui:n,t:s}=this.editor,l=getNormalizedAndLocalizedLanguageDefinitions(this.editor);let c=null;a.document.selection.on("change:range",()=>{const u=a.document.selection.focus.parent;!n||c===u||!u.is("element")||(c&&c.is("element","codeBlock")&&n.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(s,l,c,"leave")),u.is("element","codeBlock")&&n.ariaLiveAnnouncer.announce(getCodeBlockAriaAnnouncement(s,l,u,"enter")),c=u)})}}function breakLineOnEnter(o){const a=o.model,n=a.document,s=n.selection.getLastPosition();let l;const c=getTextNodeAtLineStart(s,a);c&&c.is("$text")&&(l=getLeadingWhiteSpaces(c)),o.model.change(u=>{o.execute("shiftEnter"),l&&u.insertText(l,n.selection.anchor)})}function leaveBlockStartOnEnter(o,a){const s=o.model.document,l=o.editing.view,c=s.selection.getLastPosition(),u=c.nodeAfter;return a||!s.selection.isCollapsed||!c.isAtStart||!isSoftBreakNode(u)?!1:(o.model.change(d=>{o.execute("enter");const h=s.selection.anchor.parent.previousSibling;d.rename(h,DEFAULT_ELEMENT),d.setSelection(h,"in"),o.model.schema.removeDisallowedAttributes([h],d),d.remove(u)}),l.scrollToTheSelection(),!0)}function leaveBlockEndOnEnter(o,a){const n=o.model,s=n.document,l=o.editing.view,c=s.selection.getLastPosition(),u=c.nodeBefore;let d;if(a||!s.selection.isCollapsed||!c.isAtEnd||!u||!u.previousSibling)return!1;if(isSoftBreakNode(u)&&isSoftBreakNode(u.previousSibling))d=n.createRange(n.createPositionBefore(u.previousSibling),n.createPositionAfter(u));else if(isEmptyishTextNode(u)&&isSoftBreakNode(u.previousSibling)&&isSoftBreakNode(u.previousSibling.previousSibling))d=n.createRange(n.createPositionBefore(u.previousSibling.previousSibling),n.createPositionAfter(u));else if(isEmptyishTextNode(u)&&isSoftBreakNode(u.previousSibling)&&isEmptyishTextNode(u.previousSibling.previousSibling)&&u.previousSibling.previousSibling&&isSoftBreakNode(u.previousSibling.previousSibling.previousSibling))d=n.createRange(n.createPositionBefore(u.previousSibling.previousSibling.previousSibling),n.createPositionAfter(u));else return!1;return o.model.change(h=>{h.remove(d),o.execute("enter");const f=s.selection.anchor.parent;h.rename(f,DEFAULT_ELEMENT),o.model.schema.removeDisallowedAttributes([f],h)}),l.scrollToTheSelection(),!0}function isEmptyishTextNode(o){return o&&o.is("$text")&&!o.data.match(/\S/)}function isSoftBreakNode(o){return o&&o.is("element","softBreak")}class CodeBlockUI extends Plugin{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t,s=a.ui.componentFactory,l=getNormalizedAndLocalizedLanguageDefinitions(a),c=this._getLanguageListItemDefinitions(l),u=a.commands.get("codeBlock");s.add("codeBlock",d=>{const h=createDropdown(d,SplitButtonView),f=h.buttonView,p=n("Insert code block");return f.set({label:p,tooltip:!0,icon:icons.codeBlock,isToggleable:!0}),f.bind("isOn").to(u,"value",g=>!!g),f.on("execute",()=>{a.execute("codeBlock",{usePreviousLanguageChoice:!0}),a.editing.view.focus()}),h.on("execute",g=>{a.execute("codeBlock",{language:g.source._codeBlockLanguage,forceValue:!0}),a.editing.view.focus()}),h.class="ck-code-block-dropdown",h.bind("isEnabled").to(u),addListToDropdown(h,c,{role:"menu",ariaLabel:p}),h}),s.add("menuBar:codeBlock",d=>{const h=new MenuBarMenuView(d);h.buttonView.set({role:"menuitem",label:n("Code block"),icon:icons.codeBlock}),h.bind("isEnabled").to(u);const f=new MenuBarMenuListView(d);f.set({ariaLabel:n("Insert code block")});for(const p of c){const g=new MenuBarMenuListItemView(d,h),v=new MenuBarMenuListItemButtonView(d);v.bind(...Object.keys(p.model)).to(p.model),v.set({isToggleable:!0,role:"menuitemcheckbox"}),v.delegate("execute").to(h),v.on("execute",()=>{a.execute("codeBlock",{language:p.model._codeBlockLanguage,forceValue:u.value!=p.model._codeBlockLanguage}),a.editing.view.focus()}),g.children.add(v),f.items.add(g)}return h.panelView.children.add(f),h})}_getLanguageListItemDefinitions(a){const s=this.editor.commands.get("codeBlock"),l=new Collection;for(const c of a){const u={type:"button",model:new Model$1({_codeBlockLanguage:c.language,label:c.label,role:"menuitemradio",withText:!0})};u.model.bind("isOn").to(s,"value",d=>d===u.model._codeBlockLanguage),l.add(u)}return l}}class CodeBlock extends Plugin{static get requires(){return[CodeBlockEditing,CodeBlockUI]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ClassicEditorUI extends EditorUI{constructor(n,s){super(n);M(this,"view");M(this,"_toolbarConfig");M(this,"_elementReplacer");this.view=s,this._toolbarConfig=normalizeToolbarConfig(n.config.get("toolbar")),this._elementReplacer=new ElementReplacer,this.listenTo(n.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(n){const s=this.editor,l=this.view,c=s.editing.view,u=l.editable,d=c.document.getRoot();u.name=d.rootName,l.render();const h=u.element;this.setEditableElement(u.name,h),l.editable.bind("isFocused").to(this.focusTracker),c.attachDomRoot(h),n&&this._elementReplacer.replace(n,this.element),this._initPlaceholder(),this._initToolbar(),l.menuBarView&&this._initMenuBar(l.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();const n=this.view,s=this.editor.editing.view;this._elementReplacer.restore(),s.getDomRoot(n.editable.name)&&s.detachDomRoot(n.editable.name),n.destroy()}_initToolbar(){const n=this.view;n.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),n.stickyPanel.limiterElement=n.element,n.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:s})=>s||0),n.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(n.toolbar)}_initPlaceholder(){const n=this.editor,s=n.editing.view,l=s.document.getRoot(),c=n.sourceElement;let u;const d=n.config.get("placeholder");d&&(u=typeof d=="string"?d:d[this.view.editable.name]),!u&&c&&c.tagName.toLowerCase()==="textarea"&&(u=c.getAttribute("placeholder")),u&&(l.placeholder=u),enablePlaceholder({view:s,element:l,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;const{stickyPanel:n}=this.view,s=this.editor.plugins.get("ContextualBalloon");s.on("getPositionOptions",c=>{const u=c.return;if(!u||!n.isSticky||!n.element)return;const d=new Rect$3(n.element).height,h=typeof u.target=="function"?u.target():u.target,f=typeof u.limiter=="function"?u.limiter():u.limiter;if(h&&f&&new Rect$3(h).height>=new Rect$3(f).height-d)return;const p={...u.viewportOffsetConfig},g=(p.top||0)+d;c.return={...u,viewportOffsetConfig:{...p,top:g}}},{priority:"low"});const l=()=>{s.visibleView&&s.updatePosition()};this.listenTo(n,"change:isSticky",l),this.listenTo(this.editor.ui,"change:viewportOffset",l)}_handleScrollToTheSelectionWithStickyPanel(n,s,l){const c=this.view.stickyPanel;if(c.isSticky){const u=new Rect$3(c.element).height;s.viewportOffset.top+=u}else{const u=()=>{this.editor.editing.view.scrollToTheSelection(l)};this.listenTo(c,"change:isSticky",u),setTimeout(()=>{this.stopListening(c,"change:isSticky",u)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;const n=this.view.stickyPanel,s=this.editor.plugins.get("Dialog");s.on("show",()=>{const l=s.view;l.on("moveTo",(c,u)=>{if(!n.isSticky||l.wasMoved||l.isModal)return;const d=new Rect$3(n.contentPanelElement);u[1]<d.bottom+DialogView.defaultOffset&&(u[1]=d.bottom+DialogView.defaultOffset)},{priority:"high"})},{priority:"low"})}}class ClassicEditorUIView extends BoxedEditorUIView{constructor(n,s,l={}){super(n);M(this,"stickyPanel");M(this,"toolbar");M(this,"editable");this.stickyPanel=new StickyPanelView(n),this.toolbar=new ToolbarView(n,{shouldGroupWhenFull:l.shouldToolbarGroupWhenFull}),l.useMenuBar&&(this.menuBarView=new MenuBarView(n)),this.editable=new InlineEditableUIView(n,s,void 0,{label:l.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}class ClassicEditor extends ElementApiMixin(Editor){constructor(n,s={}){if(!isElement(n)&&s.initialData!==void 0)throw new CKEditorError("editor-create-initial-data",null);super(s);M(this,"ui");this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",getInitialData(n)),isElement(n)&&(this.sourceElement=n),this.model.document.createRoot();const l=!this.config.get("toolbar.shouldNotGroupWhenFull"),c=this.config.get("menuBar"),u=new ClassicEditorUIView(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:l,useMenuBar:c.isVisible,label:this.config.get("label")});this.ui=new ClassicEditorUI(this,u),attachToForm(this)}static get editorName(){return"ClassicEditor"}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(n,s={}){return new Promise(l=>{const c=new this(n,s);l(c.initPlugins().then(()=>c.ui.init(isElement(n)?n:null)).then(()=>c.data.init(c.config.get("initialData"))).then(()=>c.fire("ready")).then(()=>c))})}}function getInitialData(o){return isElement(o)?getDataFromElement(o):o}function isElement(o){return isElement$2(o)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class SelectAllCommand extends Command{constructor(a){super(a),this.affectsData=!1}execute(){const a=this.editor.model,n=a.document.selection;let s=a.schema.getLimitElement(n);if(n.containsEntireContent(s)||!isSelectAllScope(a.schema,s))do if(s=s.parent,!s)return;while(!isSelectAllScope(a.schema,s));a.change(l=>{l.setSelection(s,"in")})}}function isSelectAllScope(o,a){return o.isLimit(a)&&(o.checkChild(a,"$text")||o.checkChild(a,"paragraph"))}const SELECT_ALL_KEYSTROKE=parseKeystroke("Ctrl+A");class SelectAllEditing extends Plugin{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t,l=a.editing.view.document;a.commands.add("selectAll",new SelectAllCommand(a)),this.listenTo(l,"keydown",(c,u)=>{getCode(u)===SELECT_ALL_KEYSTROKE&&(a.execute("selectAll"),u.preventDefault())}),a.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Select all"),keystroke:"CTRL+A"}]})}}var selectAllIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>';class SelectAllUI extends Plugin{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add("selectAll",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),a.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get("selectAll"),c=new a(n.locale),u=s.t;return c.set({label:u("Select all"),icon:selectAllIcon,keystroke:"Ctrl+A"}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute("selectAll"),n.editing.view.focus()}),c}}class SelectAll extends Plugin{static get requires(){return[SelectAllEditing,SelectAllUI]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class BaseCommand extends Command{constructor(n){super(n);M(this,"_stack",[]);M(this,"_createdBatches",new WeakSet);this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(n.data,"set",(s,l)=>{l[1]={...l[1]};const c=l[1];c.batchType||(c.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(n.data,"set",(s,l)=>{l[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(n){const s=this.editor.model.document.selection,l={ranges:s.hasOwnRange?Array.from(s.getRanges()):[],isBackward:s.isBackward};this._stack.push({batch:n,selection:l}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(n,s,l){const c=this.editor.model,u=c.document,d=[],h=n.map(p=>p.getTransformedByOperations(l)),f=h.flat();for(const p of h){const g=p.filter(v=>v.root!=u.graveyard).filter(v=>!isRangeContainedByAnyOtherRange(v,f));g.length&&(normalizeRanges$1(g),d.push(g[0]))}d.length&&c.change(p=>{p.setSelection(d,{backward:s})})}_undo(n,s){const l=this.editor.model,c=l.document;this._createdBatches.add(s);const u=n.operations.slice().filter(d=>d.isDocumentOperation);u.reverse();for(const d of u){const h=d.baseVersion+1,f=Array.from(c.history.getOperations(h)),g=transformSets([d.getReversed()],f,{useRelations:!0,document:this.editor.model.document,forceWeakRemove:!0}).operationsA;for(let v of g){const b=v.affectedSelectable;b&&!l.canEditAt(b)&&(v=new NoOperation(v.baseVersion)),s.addOperation(v),l.applyOperation(v),c.history.setOperationAsUndone(d,v)}}}}function normalizeRanges$1(o){o.sort((a,n)=>a.start.isBefore(n.start)?-1:1);for(let a=1;a<o.length;a++){const s=o[a-1].getJoined(o[a],!0);s&&(a--,o.splice(a,2,s))}}function isRangeContainedByAnyOtherRange(o,a){return a.some(n=>n!==o&&n.containsRange(o,!0))}class UndoCommand extends BaseCommand{execute(a=null){const n=a?this._stack.findIndex(c=>c.batch==a):this._stack.length-1,s=this._stack.splice(n,1)[0],l=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(l,()=>{this._undo(s.batch,l);const c=this.editor.model.document.history.getOperations(s.batch.baseVersion);this._restoreSelection(s.selection.ranges,s.selection.isBackward,c)}),this.fire("revert",s.batch,l),this.refresh()}}class RedoCommand extends BaseCommand{execute(){const a=this._stack.pop(),n=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(n,()=>{const l=a.batch.operations[a.batch.operations.length-1].baseVersion+1,c=this.editor.model.document.history.getOperations(l);this._restoreSelection(a.selection.ranges,a.selection.isBackward,c),this._undo(a.batch,n)}),this.refresh()}}class UndoEditing extends Plugin{constructor(){super(...arguments);M(this,"_undoCommand");M(this,"_redoCommand");M(this,"_batchRegistry",new WeakSet)}static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.t;this._undoCommand=new UndoCommand(n),this._redoCommand=new RedoCommand(n),n.commands.add("undo",this._undoCommand),n.commands.add("redo",this._redoCommand),this.listenTo(n.model,"applyOperation",(l,c)=>{const u=c[0];if(!u.isDocumentOperation)return;const d=u.batch,h=this._redoCommand.createdBatches.has(d),f=this._undoCommand.createdBatches.has(d);this._batchRegistry.has(d)||(this._batchRegistry.add(d),d.isUndoable&&(h?this._undoCommand.addBatch(d):f||(this._undoCommand.addBatch(d),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(l,c,u)=>{this._redoCommand.addBatch(u)}),n.keystrokes.set("CTRL+Z","undo"),n.keystrokes.set("CTRL+Y","redo"),n.keystrokes.set("CTRL+SHIFT+Z","redo"),n.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Undo"),keystroke:"CTRL+Z"},{label:s("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}class UndoUI extends Plugin{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale,s=a.t,l=n.uiLanguageDirection=="ltr"?icons.undo:icons.redo,c=n.uiLanguageDirection=="ltr"?icons.redo:icons.undo;this._addButtonsToFactory("undo",s("Undo"),"CTRL+Z",l),this._addButtonsToFactory("redo",s("Redo"),"CTRL+Y",c)}_addButtonsToFactory(a,n,s,l){const c=this.editor;c.ui.componentFactory.add(a,()=>{const u=this._createButton(ButtonView,a,n,s,l);return u.set({tooltip:!0}),u}),c.ui.componentFactory.add("menuBar:"+a,()=>this._createButton(MenuBarMenuListItemButtonView,a,n,s,l))}_createButton(a,n,s,l,c){const u=this.editor,d=u.locale,h=u.commands.get(n),f=new a(d);return f.set({label:s,icon:c,keystroke:l}),f.bind("isEnabled").to(h,"isEnabled"),this.listenTo(f,"execute",()=>{u.execute(n),u.editing.view.focus()}),f}}class Undo extends Plugin{static get requires(){return[UndoEditing,UndoUI]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class Essentials extends Plugin{static get requires(){return[AccessibilityHelp,Clipboard,Enter,SelectAll,ShiftEnter,Typing,Undo]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FindAndReplaceFormView extends View$1{constructor(n){super(n);M(this,"children");M(this,"_findInputView");M(this,"_replaceInputView");M(this,"_findButtonView");M(this,"_findPrevButtonView");M(this,"_findNextButtonView");M(this,"_advancedOptionsCollapsibleView");M(this,"_matchCaseSwitchView");M(this,"_wholeWordsOnlySwitchView");M(this,"_replaceButtonView");M(this,"_replaceAllButtonView");M(this,"_inputsDivView");M(this,"_actionButtonsDivView");M(this,"_focusTracker");M(this,"_keystrokes");M(this,"_focusables");M(this,"focusCycler");const s=n.t;this.children=this.createCollection(),this.set("matchCount",0),this.set("highlightOffset",0),this.set("isDirty",!1),this.set("_areCommandsEnabled",{}),this.set("_resultsCounterText",""),this.set("_matchCase",!1),this.set("_wholeWordsOnly",!1),this.bind("_searchResultsFound").to(this,"matchCount",this,"isDirty",(l,c)=>l>0&&!c),this._findInputView=this._createInputField(s("Find in text…")),this._findPrevButtonView=this._createButton({label:s("Previous result"),class:"ck-button-prev",icon:icons.previousArrow,keystroke:"Shift+F3",tooltip:!0}),this._findNextButtonView=this._createButton({label:s("Next result"),class:"ck-button-next",icon:icons.previousArrow,keystroke:"F3",tooltip:!0}),this._replaceInputView=this._createInputField(s("Replace with…"),"ck-labeled-field-replace"),this._inputsDivView=this._createInputsDiv(),this._matchCaseSwitchView=this._createMatchCaseSwitch(),this._wholeWordsOnlySwitchView=this._createWholeWordsOnlySwitch(),this._advancedOptionsCollapsibleView=this._createAdvancedOptionsCollapsible(),this._replaceAllButtonView=this._createButton({label:s("Replace all"),class:"ck-button-replaceall",withText:!0}),this._replaceButtonView=this._createButton({label:s("Replace"),class:"ck-button-replace",withText:!0}),this._findButtonView=this._createButton({label:s("Find"),class:"ck-button-find ck-button-action",withText:!0}),this._actionButtonsDivView=this._createActionButtonsDiv(),this._focusTracker=new FocusTracker,this._keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this._keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.addMany([this._inputsDivView,this._advancedOptionsCollapsibleView,this._actionButtonsDivView]),this.setTemplate({tag:"form",attributes:{class:["ck","ck-find-and-replace-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),this._initFocusCycling(),this._initKeystrokeHandling()}destroy(){super.destroy(),this._focusTracker.destroy(),this._keystrokes.destroy()}focus(n){n===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}reset(){this._findInputView.errorText=null,this.isDirty=!0}get _textToFind(){return this._findInputView.fieldView.element.value}get _textToReplace(){return this._replaceInputView.fieldView.element.value}_createInputsDiv(){const n=this.locale,s=n.t,l=new View$1(n);return this._findInputView.fieldView.on("input",()=>{this.isDirty=!0}),this._findPrevButtonView.delegate("execute").to(this,"findPrevious"),this._findNextButtonView.delegate("execute").to(this,"findNext"),this._findPrevButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findPrevious:c})=>c),this._findNextButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",({findNext:c})=>c),this._injectFindResultsCounter(),this._replaceInputView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:c},u)=>c&&u),this._replaceInputView.bind("infoText").to(this._replaceInputView,"isEnabled",this._replaceInputView,"isFocused",(c,u)=>c||!u?"":s("Tip: Find some text first in order to replace it.")),l.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__inputs"]},children:[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView]}),l}_onFindButtonExecute(){if(!this._textToFind){const n=this.t;this._findInputView.errorText=n("Text to find must not be empty.");return}this.isDirty=!1,this.fire("findNext",{searchText:this._textToFind,matchCase:this._matchCase,wholeWords:this._wholeWordsOnly})}_injectFindResultsCounter(){const n=this.locale,s=n.t,l=this.bindTemplate,c=new View$1(this.locale);this.bind("_resultsCounterText").to(this,"highlightOffset",this,"matchCount",(d,h)=>s("%0 of %1",[d,h])),c.setTemplate({tag:"span",attributes:{class:["ck","ck-results-counter",l.if("isDirty","ck-hidden")]},children:[{text:l.to("_resultsCounterText")}]});const u=()=>{const d=this._findInputView.fieldView.element;if(!d||!isVisible(d))return;const h=new Rect$3(c.element).width,f=n.uiLanguageDirection==="ltr"?"paddingRight":"paddingLeft";h?d.style[f]=`calc( 2 * var(--ck-spacing-standard) + ${h}px )`:d.style[f]=""};this.on("change:_resultsCounterText",u,{priority:"low"}),this.on("change:isDirty",u,{priority:"low"}),this._findInputView.template.children[0].children.push(c)}_createAdvancedOptionsCollapsible(){const n=this.locale.t,s=new CollapsibleView(this.locale,[this._matchCaseSwitchView,this._wholeWordsOnlySwitchView]);return s.set({label:n("Advanced options"),isCollapsed:!0}),s}_createActionButtonsDiv(){const n=new View$1(this.locale);return this._replaceButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replace:s},l)=>s&&l),this._replaceAllButtonView.bind("isEnabled").to(this,"_areCommandsEnabled",this,"_searchResultsFound",({replaceAll:s},l)=>s&&l),this._replaceButtonView.on("execute",()=>{this.fire("replace",{searchText:this._textToFind,replaceText:this._textToReplace})}),this._replaceAllButtonView.on("execute",()=>{this.fire("replaceAll",{searchText:this._textToFind,replaceText:this._textToReplace}),this.focus()}),this._findButtonView.on("execute",this._onFindButtonExecute.bind(this)),n.setTemplate({tag:"div",attributes:{class:["ck","ck-find-and-replace-form__actions"]},children:[this._replaceAllButtonView,this._replaceButtonView,this._findButtonView]}),n}_createMatchCaseSwitch(){const n=this.locale.t,s=new SwitchButtonView(this.locale);return s.set({label:n("Match case"),withText:!0}),s.bind("isOn").to(this,"_matchCase"),s.on("execute",()=>{this._matchCase=!this._matchCase,this.isDirty=!0}),s}_createWholeWordsOnlySwitch(){const n=this.locale.t,s=new SwitchButtonView(this.locale);return s.set({label:n("Whole words only"),withText:!0}),s.bind("isOn").to(this,"_wholeWordsOnly"),s.on("execute",()=>{this._wholeWordsOnly=!this._wholeWordsOnly,this.isDirty=!0}),s}_initFocusCycling(){[this._findInputView,this._findPrevButtonView,this._findNextButtonView,this._replaceInputView,this._advancedOptionsCollapsibleView.buttonView,this._matchCaseSwitchView,this._wholeWordsOnlySwitchView,this._replaceAllButtonView,this._replaceButtonView,this._findButtonView].forEach(s=>{this._focusables.add(s),this._focusTracker.add(s.element)})}_initKeystrokeHandling(){const n=l=>l.stopPropagation(),s=l=>{l.stopPropagation(),l.preventDefault()};this._keystrokes.listenTo(this.element),this._keystrokes.set("f3",l=>{s(l),this._findNextButtonView.fire("execute")}),this._keystrokes.set("shift+f3",l=>{s(l),this._findPrevButtonView.fire("execute")}),this._keystrokes.set("enter",l=>{const c=l.target;c===this._findInputView.fieldView.element?(this._areCommandsEnabled.findNext?this._findNextButtonView.fire("execute"):this._findButtonView.fire("execute"),s(l)):c===this._replaceInputView.fieldView.element&&!this.isDirty&&(this._replaceButtonView.fire("execute"),s(l))}),this._keystrokes.set("shift+enter",l=>{l.target===this._findInputView.fieldView.element&&(this._areCommandsEnabled.findPrevious?this._findPrevButtonView.fire("execute"):this._findButtonView.fire("execute"),s(l))}),this._keystrokes.set("arrowright",n),this._keystrokes.set("arrowleft",n),this._keystrokes.set("arrowup",n),this._keystrokes.set("arrowdown",n)}_createButton(n){const s=new ButtonView(this.locale);return s.set(n),s}_createInputField(n,s){const l=new LabeledFieldView(this.locale,createLabeledInputText);return l.label=n,l.class=s,l}}var loupeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z"/><path d="M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z"/><path d="M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z"/></svg>';class FindAndReplaceUI extends Plugin{constructor(n){super(n);M(this,"formView");n.config.define("findAndReplace.uiType","dialog"),this.formView=null}static get requires(){return[Dialog]}static get pluginName(){return"FindAndReplaceUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.config.get("findAndReplace.uiType")==="dropdown",l=n.commands.get("find"),c=this.editor.t;n.ui.componentFactory.add("findAndReplace",()=>{let u;return s?(u=this._createDropdown(),u.bind("isEnabled").to(l)):u=this._createDialogButtonForToolbar(),n.keystrokes.set("Ctrl+F",(d,h)=>{if(l.isEnabled){if(u instanceof DropdownView){const f=u.buttonView;f.isOn||f.fire("execute")}else u.isOn?n.plugins.get("Dialog").view.focus():u.fire("execute");h()}}),u}),s||n.ui.componentFactory.add("menuBar:findAndReplace",()=>this._createDialogButtonForMenuBar()),n.accessibility.addKeystrokeInfos({keystrokes:[{label:c("Find in the document"),keystroke:"CTRL+F"}]})}_createDropdown(){const n=this.editor,s=n.locale.t,l=createDropdown(n.locale);return l.once("change:isOpen",()=>{this.formView=this._createFormView(),this.formView.children.add(new FormHeaderView(n.locale,{label:s("Find and replace")}),0),l.panelView.children.add(this.formView)}),l.on("change:isOpen",(c,u,d)=>{d?this._setupFormView():this.fire("searchReseted")},{priority:"low"}),l.buttonView.set({icon:loupeIcon,label:s("Find and replace"),keystroke:"CTRL+F",tooltip:!0}),l}_createDialogButtonForToolbar(){const n=this.editor,s=this._createButton(ButtonView),l=n.plugins.get("Dialog");return s.set({tooltip:!0}),s.bind("isOn").to(l,"id",c=>c==="findAndReplace"),s.on("execute",()=>{s.isOn?l.hide():this._showDialog()}),s}_createDialogButtonForMenuBar(){const n=this._createButton(MenuBarMenuListItemButtonView),s=this.editor.plugins.get("Dialog"),l=this.editor.plugins.get("Dialog");return n.set({role:"menuitemcheckbox",isToggleable:!0}),n.bind("isOn").to(l,"id",c=>c==="findAndReplace"),n.on("execute",()=>{if(s.id==="findAndReplace"){s.hide();return}this._showDialog()}),n}_createButton(n){const s=this.editor,l=s.commands.get("find"),c=new n(s.locale),u=s.locale.t;return c.bind("isEnabled").to(l),c.set({icon:loupeIcon,label:u("Find and replace"),keystroke:"CTRL+F"}),c}_showDialog(){const n=this.editor,s=n.plugins.get("Dialog"),l=n.locale.t;this.formView||(this.formView=this._createFormView()),s.show({id:"findAndReplace",title:l("Find and replace"),content:this.formView,position:DialogViewPosition.EDITOR_TOP_SIDE,onShow:()=>{this._setupFormView()},onHide:()=>{this.fire("searchReseted")}})}_createFormView(){const n=this.editor,s=new(CssTransitionDisablerMixin(FindAndReplaceFormView))(n.locale),l=n.commands,u=this.editor.plugins.get("FindAndReplaceEditing").state;s.bind("highlightOffset").to(u,"highlightedOffset"),s.listenTo(u.results,"change",()=>{s.matchCount=u.results.length});const d=l.get("findNext"),h=l.get("findPrevious"),f=l.get("replace"),p=l.get("replaceAll");return s.bind("_areCommandsEnabled").to(d,"isEnabled",h,"isEnabled",f,"isEnabled",p,"isEnabled",(g,v,b,w)=>({findNext:g,findPrevious:v,replace:b,replaceAll:w})),s.delegate("findNext","findPrevious","replace","replaceAll").to(this),s.on("change:isDirty",(g,v,b)=>{b&&this.fire("searchReseted")}),s}_setupFormView(){this.formView.disableCssTransitions(),this.formView.reset(),this.formView._findInputView.fieldView.select(),this.formView.enableCssTransitions()}}class FindCommand extends Command{constructor(n,s){super(n);M(this,"_state");this.isEnabled=!0,this.affectsData=!1,this._state=s}execute(n,{matchCase:s,wholeWords:l}={}){const{editor:c}=this,{model:u}=c,d=c.plugins.get("FindAndReplaceUtils");let h,f="";typeof n=="string"?h=(...v)=>({results:d.findByTextCallback(n,{matchCase:s,wholeWords:l})(...v),searchText:n}):h=n;const p=h;h=(...v)=>{const b=p(...v);return b&&"searchText"in b&&(f=b.searchText),b};const g=u.document.getRootNames().reduce((v,b)=>d.updateFindResultFromRange(u.createRangeIn(u.document.getRoot(b)),u,h,v),null);return this._state.clear(u),this._state.results.addMany(g),this._state.highlightedResult=g.get(0),this._state.searchText=f,h&&(this._state.lastSearchCallback=h),this._state.matchCase=!!s,this._state.matchWholeWords=!!l,{results:g,findCallback:h}}}class FindAndReplaceState extends ObservableMixin(){constructor(a){super(),this.set("results",new Collection),this.set("highlightedResult",null),this.set("highlightedOffset",0),this.set("searchText",""),this.set("replaceText",""),this.set("lastSearchCallback",null),this.set("matchCase",!1),this.set("matchWholeWords",!1),this.results.on("change",(n,{removed:s,index:l})=>{if(Array.from(s).length){let c=!1;if(a.change(u=>{for(const d of s)this.highlightedResult===d&&(c=!0),a.markers.has(d.marker.name)&&u.removeMarker(d.marker)}),c){const u=l>=this.results.length?0:l;this.highlightedResult=this.results.get(u)}}}),this.on("change:highlightedResult",()=>{this.refreshHighlightOffset(a)})}clear(a){this.searchText="",a.change(n=>{if(this.highlightedResult){const s=this.highlightedResult.marker.name.split(":")[1],l=a.markers.get(`findResultHighlighted:${s}`);l&&n.removeMarker(l)}[...this.results].forEach(({marker:s})=>{n.removeMarker(s)})}),this.results.clear()}refreshHighlightOffset(a){const{highlightedResult:n,results:s}=this;n?this.highlightedOffset=sortSearchResultsByMarkerPositions(a,[...s]).indexOf(n)+1:this.highlightedOffset=0}}function sortSearchResultsByMarkerPositions(o,a){const n={before:-1,same:0,after:1,different:1};return o.document.getRootNames().flatMap(s=>a.filter(l=>l.marker.getStart().root.rootName===s).sort((l,c)=>n[l.marker.getStart().compareWith(c.marker.getStart())]))}class ReplaceCommandBase extends Command{constructor(n,s){super(n);M(this,"_state");this.isEnabled=!0,this._state=s,this._isEnabledBasedOnSelection=!1}_replace(n,s){const{model:l}=this.editor,c=s.marker.getRange();l.canEditAt(c)&&l.change(u=>{if(c.root.rootName==="$graveyard"){this._state.results.remove(s);return}let d={};for(const h of c.getItems())if(h.is("$text")||h.is("$textProxy")){d=h.getAttributes();break}l.insertContent(u.createText(n,d),c),this._state.results.has(s)&&this._state.results.remove(s)})}}class ReplaceCommand extends ReplaceCommandBase{execute(a,n){const s=Math.max(this._state.highlightedOffset-1,0);if(this._replace(a,n),this._state.results.length){const l=sortSearchResultsByMarkerPositions(this.editor.model,[...this._state.results]);this._state.highlightedResult=l[s%l.length]}}}class ReplaceAllCommand extends ReplaceCommandBase{execute(a,n){const{editor:s}=this,{model:l}=s,c=s.plugins.get("FindAndReplaceUtils"),u=n instanceof Collection?n:l.document.getRootNames().reduce((d,h)=>c.updateFindResultFromRange(l.createRangeIn(l.document.getRoot(h)),l,c.findByTextCallback(n,this._state),d),null);u.length&&l.change(()=>{[...u].forEach(d=>{this._replace(a,d)})})}}class FindNextCommand extends Command{constructor(n,s){super(n);M(this,"_state");this.affectsData=!1,this._state=s,this.isEnabled=!1,this.listenTo(this._state.results,"change",()=>{this.isEnabled=this._state.results.length>1})}refresh(){this.isEnabled=this._state.results.length>1}execute(){const n=this._state.results,s=n.getIndex(this._state.highlightedResult),l=s+1>=n.length?0:s+1;this._state.highlightedResult=this._state.results.get(l)}}class FindPreviousCommand extends FindNextCommand{execute(){const n=this._state.results.getIndex(this._state.highlightedResult),s=n-1<0?this._state.results.length-1:n-1;this._state.highlightedResult=this._state.results.get(s)}}class FindAndReplaceUtils extends Plugin{static get pluginName(){return"FindAndReplaceUtils"}static get isOfficialPlugin(){return!0}updateFindResultFromRange(a,n,s,l){const c=l||new Collection,u=d=>c.find(h=>{const{marker:f}=h,p=f.getRange(),g=d.getRange();return p.isEqual(g)});return n.change(d=>{[...a].forEach(({type:h,item:f})=>{if(h==="elementStart"&&n.schema.checkChild(f,"$text")){let p=s({item:f,text:this.rangeToText(n.createRangeIn(f))});if(!p)return;"results"in p&&(p=p.results),p.forEach(g=>{const v=`findResult:${uid()}`,b=d.addMarker(v,{usingOperation:!1,affectsData:!1,range:d.createRange(d.createPositionAt(f,g.start),d.createPositionAt(f,g.end))}),w=findInsertIndex(c,b);u(b)||c.add({id:v,label:g.label,marker:b},w)})}})}),c}rangeToText(a){return Array.from(a.getItems({shallow:!0})).reduce((n,s)=>s.is("$text")||s.is("$textProxy")?n+s.data:`${n}
`,"")}findByTextCallback(a,n){let s="gu";n.matchCase||(s+="i");let l=`(${escapeRegExp(a)})`;if(n.wholeWords){const d="[^a-zA-ZÀ-ɏḀ-ỿ]";new RegExp("^"+d).test(a)||(l=`(^|${d}|_)${l}`),new RegExp(d+"$").test(a)||(l=`${l}(?=_|${d}|$)`)}const c=new RegExp(l,s);function u({text:d}){return[...d.matchAll(c)].map(regexpMatchToFindResult)}return u}}function findInsertIndex(o,a){const n=o.find(({marker:s})=>a.getStart().isBefore(s.getStart()));return n?o.getIndex(n):o.length}function regexpMatchToFindResult(o){const a=o.length-1;let n=o.index;return o.length===3&&(n+=o[1].length),{label:o[a],start:n,end:n+o[a].length}}const HIGHLIGHT_CLASS$1="ck-find-result_selected";class FindAndReplaceEditing extends Plugin{constructor(){super(...arguments);M(this,"state");M(this,"_onDocumentChange",()=>{const n=new Set,s=new Set,l=this.editor.model,{results:c}=this.state,u=l.document.differ.getChanges(),d=l.document.differ.getChangedMarkers();u.forEach(p=>{p.position&&(p.name==="$text"||p.position.nodeAfter&&l.schema.isInline(p.position.nodeAfter)?(n.add(p.position.parent),[...l.markers.getMarkersAtPosition(p.position)].forEach(g=>{s.add(g.name)})):p.type==="insert"&&p.position.nodeAfter&&n.add(p.position.nodeAfter))}),d.forEach(({name:p,data:{newRange:g}})=>{g&&g.start.root.rootName==="$graveyard"&&s.add(p)}),n.forEach(p=>{[...l.markers.getMarkersIntersectingRange(l.createRangeIn(p))].forEach(v=>s.add(v.name))}),s.forEach(p=>{c.has(p)&&(c.get(p)===this.state.highlightedResult&&(this.state.highlightedResult=null),c.remove(p))});const h=[],f=this.editor.plugins.get("FindAndReplaceUtils");n.forEach(p=>{const g=f.updateFindResultFromRange(l.createRangeOn(p),l,this.state.lastSearchCallback,c);h.push(...g)}),d.forEach(p=>{if(p.data.newRange){const g=f.updateFindResultFromRange(p.data.newRange,l,this.state.lastSearchCallback,c);h.push(...g)}}),!this.state.highlightedResult&&h.length?this.state.highlightedResult=h[0]:this.state.refreshHighlightOffset(l)})}static get requires(){return[FindAndReplaceUtils]}static get pluginName(){return"FindAndReplaceEditing"}static get isOfficialPlugin(){return!0}init(){this.state=new FindAndReplaceState(this.editor.model),this.set("_isSearchActive",!1),this._defineConverters(),this._defineCommands(),this.listenTo(this.state,"change:highlightedResult",(l,c,u,d)=>{const{model:h}=this.editor;h.change(f=>{if(d){const p=d.marker.name.split(":")[1],g=h.markers.get(`findResultHighlighted:${p}`);g&&f.removeMarker(g)}if(u){const p=u.marker.name.split(":")[1];f.addMarker(`findResultHighlighted:${p}`,{usingOperation:!1,affectsData:!1,range:u.marker.getRange()})}})});/* istanbul ignore next -- @preserve */const s=debounce$1(((l,c,u)=>{if(u){const d=this.editor.editing.view.domConverter,h=this.editor.editing.mapper.toViewRange(u.marker.getRange());scrollViewportToShowTarget({target:d.viewRangeToDom(h),viewportOffset:40})}}).bind(this),32);this.listenTo(this.state,"change:highlightedResult",s,{priority:"low"}),this.listenTo(this.editor,"destroy",s.cancel),this.on("change:_isSearchActive",(l,c,u)=>{u?this.listenTo(this.editor.model.document,"change:data",this._onDocumentChange):this.stopListening(this.editor.model.document,"change:data",this._onDocumentChange)})}find(n,s){return this._isSearchActive=!0,this.editor.execute("find",n,s),this.state.results}stop(){this.state.clear(this.editor.model),this._isSearchActive=!1}_defineCommands(){this.editor.commands.add("find",new FindCommand(this.editor,this.state)),this.editor.commands.add("findNext",new FindNextCommand(this.editor,this.state)),this.editor.commands.add("findPrevious",new FindPreviousCommand(this.editor,this.state)),this.editor.commands.add("replace",new ReplaceCommand(this.editor,this.state)),this.editor.commands.add("replaceAll",new ReplaceAllCommand(this.editor,this.state))}_defineConverters(){const{editor:n}=this;n.conversion.for("editingDowncast").markerToHighlight({model:"findResult",view:({markerName:s})=>{const[,l]=s.split(":");return{name:"span",classes:["ck-find-result"],attributes:{"data-find-result":l}}}}),n.conversion.for("editingDowncast").markerToHighlight({model:"findResultHighlighted",view:({markerName:s})=>{const[,l]=s.split(":");return{name:"span",classes:[HIGHLIGHT_CLASS$1],attributes:{"data-find-result":l}}}})}}class FindAndReplace extends Plugin{static get requires(){return[FindAndReplaceEditing,FindAndReplaceUI]}static get pluginName(){return"FindAndReplace"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.plugins.get("FindAndReplaceUI"),n=this.editor.plugins.get("FindAndReplaceEditing"),s=n.state;a.on("findNext",(l,c)=>{c?(s.searchText=c.searchText,n.find(c.searchText,c)):this.editor.execute("findNext")}),a.on("findPrevious",(l,c)=>{c&&s.searchText!==c.searchText?n.find(c.searchText):this.editor.execute("findPrevious")}),a.on("replace",(l,c)=>{s.searchText!==c.searchText&&n.find(c.searchText);const u=s.highlightedResult;u&&this.editor.execute("replace",c.replaceText,u)}),a.on("replaceAll",(l,c)=>{s.searchText!==c.searchText&&n.find(c.searchText),this.editor.execute("replaceAll",c.replaceText,s.results)}),a.on("searchReseted",()=>{s.clear(this.editor.model),n.stop()})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class FontCommand extends Command{constructor(n,s){super(n);M(this,"attributeKey");this.attributeKey=s}refresh(){const n=this.editor.model,s=n.document;this.value=s.selection.getAttribute(this.attributeKey),this.isEnabled=n.schema.checkAttributeInSelection(s.selection,this.attributeKey)}execute(n={}){const s=this.editor.model,c=s.document.selection,u=n.value,d=n.batch,h=f=>{if(c.isCollapsed)u?f.setSelectionAttribute(this.attributeKey,u):f.removeSelectionAttribute(this.attributeKey);else{const p=s.schema.getValidRanges(c.getRanges(),this.attributeKey);for(const g of p)u?f.setAttribute(this.attributeKey,u,g):f.removeAttribute(this.attributeKey,g)}};d?s.enqueueChange(d,f=>{h(f)}):s.change(f=>{h(f)})}}const FONT_SIZE="fontSize",FONT_FAMILY="fontFamily",FONT_COLOR="fontColor",FONT_BACKGROUND_COLOR="fontBackgroundColor";function buildDefinition(o,a){const n={model:{key:o,values:[]},view:{},upcastAlso:{}};for(const s of a)n.model.values.push(s.model),n.view[s.model]=s.view,s.upcastAlso&&(n.upcastAlso[s.model]=s.upcastAlso);return n}function renderUpcastAttribute(o){return a=>normalizeColorCode(a.getStyle(o))}function renderDowncastElement(o){return(a,{writer:n})=>n.createAttributeElement("span",{style:`${o}:${a}`},{priority:7})}function addColorSelectorToDropdown({dropdownView:o,colors:a,columns:n,removeButtonLabel:s,colorPickerLabel:l,documentColorsLabel:c,documentColorsCount:u,colorPickerViewConfig:d}){const h=o.locale,f=new ColorSelectorView(h,{colors:a,columns:n,removeButtonLabel:s,colorPickerLabel:l,documentColorsLabel:c,documentColorsCount:u,colorPickerViewConfig:d});return o.colorSelectorView=f,o.panelView.children.add(f),f}function normalizeColorCode(o){return o.replace(/\s/g,"")}class FontFamilyCommand extends FontCommand{constructor(a){super(a,FONT_FAMILY)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeOptions$1(o){return o.map(getOptionDefinition$1).filter(a=>a!==void 0)}function getOptionDefinition$1(o){if(typeof o=="object")return o;if(o==="default")return{title:"Default",model:void 0};if(typeof o=="string")return generateFontPreset(o)}function generateFontPreset(o){const a=o.replace(/"|'/g,"").split(","),n=a[0],s=a.map(normalizeFontNameForCSS).join(", ");return{title:n,model:s,view:{name:"span",styles:{"font-family":s},priority:7}}}function normalizeFontNameForCSS(o){return o=o.trim(),o.indexOf(" ")>0&&(o=`'${o}'`),o}class FontFamilyEditing extends Plugin{static get pluginName(){return"FontFamilyEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define(FONT_FAMILY,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],supportAllValues:!1})}init(){const a=this.editor;a.model.schema.extend("$text",{allowAttributes:FONT_FAMILY}),a.model.schema.setAttributeProperties(FONT_FAMILY,{isFormatting:!0,copyOnEnter:!0});const n=normalizeOptions$1(a.config.get("fontFamily.options")).filter(l=>l.model),s=buildDefinition(FONT_FAMILY,n);a.config.get("fontFamily.supportAllValues")?(this._prepareAnyValueConverters(),this._prepareCompatibilityConverter()):a.conversion.attributeToElement(s),a.commands.add(FONT_FAMILY,new FontFamilyCommand(a))}_prepareAnyValueConverters(){const a=this.editor;a.conversion.for("downcast").attributeToElement({model:FONT_FAMILY,view:(n,{writer:s})=>s.createAttributeElement("span",{style:"font-family:"+n},{priority:7})}),a.conversion.for("upcast").elementToAttribute({model:{key:FONT_FAMILY,value:n=>n.getStyle("font-family")},view:{name:"span",styles:{"font-family":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{face:/.*/}},model:{key:FONT_FAMILY,value:n=>n.getAttribute("face")}})}}var fontFamilyIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';class FontFamilyUI extends Plugin{static get pluginName(){return"FontFamilyUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t,s=this._getLocalizedOptions(),l=a.commands.get(FONT_FAMILY),c=n("Font Family"),u=_prepareListOptions$1(s,l);a.ui.componentFactory.add(FONT_FAMILY,d=>{const h=createDropdown(d);return addListToDropdown(h,u,{role:"menu",ariaLabel:c}),h.buttonView.set({label:c,icon:fontFamilyIcon,tooltip:!0}),h.extendTemplate({attributes:{class:"ck-font-family-dropdown"}}),h.bind("isEnabled").to(l),this.listenTo(h,"execute",f=>{a.execute(f.source.commandName,{value:f.source.commandParam}),a.editing.view.focus()}),h}),a.ui.componentFactory.add(`menuBar:${FONT_FAMILY}`,d=>{const h=new MenuBarMenuView(d);h.buttonView.set({label:c,icon:fontFamilyIcon}),h.bind("isEnabled").to(l);const f=new MenuBarMenuListView(d);for(const p of u){const g=new MenuBarMenuListItemView(d,h),v=new MenuBarMenuListItemButtonView(d);v.set({role:"menuitemradio",isToggleable:!0}),v.bind(...Object.keys(p.model)).to(p.model),v.delegate("execute").to(h),v.on("execute",()=>{a.execute(p.model.commandName,{value:p.model.commandParam}),a.editing.view.focus()}),g.children.add(v),f.items.add(g)}return h.panelView.children.add(f),h})}_getLocalizedOptions(){const a=this.editor,n=a.t;return normalizeOptions$1(a.config.get(FONT_FAMILY).options).map(l=>(l.title==="Default"&&(l.title=n("Default")),l))}}function _prepareListOptions$1(o,a){const n=new Collection;for(const s of o){const l={type:"button",model:new Model$1({commandName:FONT_FAMILY,commandParam:s.model,label:s.title,role:"menuitemradio",withText:!0})};l.model.bind("isOn").to(a,"value",c=>c===s.model?!0:!c||!s.model?!1:c.split(",")[0].replace(/'/g,"").toLowerCase()===s.model.toLowerCase()),s.view&&typeof s.view!="string"&&s.view.styles&&l.model.set("labelStyle",`font-family: ${s.view.styles["font-family"]}`),n.add(l)}return n}class FontFamily extends Plugin{static get requires(){return[FontFamilyEditing,FontFamilyUI]}static get pluginName(){return"FontFamily"}static get isOfficialPlugin(){return!0}}class FontSizeCommand extends FontCommand{constructor(a){super(a,FONT_SIZE)}}function normalizeOptions(o){return o.map(a=>getOptionDefinition(a)).filter(a=>a!==void 0)}const namedPresets={get tiny(){return{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}}},get small(){return{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}}},get big(){return{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}}},get huge(){return{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}}};function getOptionDefinition(o){if(typeof o=="number"&&(o=String(o)),typeof o=="object"&&isFullItemDefinition(o))return attachPriority(o);const a=findPreset(o);if(a)return attachPriority(a);if(o==="default")return{model:void 0,title:"Default"};if(!isNumericalDefinition(o))return generatePixelPreset(o)}function generatePixelPreset(o){return typeof o=="string"&&(o={title:o,model:`${parseFloat(o)}px`}),o.view={name:"span",styles:{"font-size":o.model}},attachPriority(o)}function attachPriority(o){return o.view&&typeof o.view!="string"&&!o.view.priority&&(o.view.priority=7),o}function findPreset(o){return typeof o=="string"?namedPresets[o]:namedPresets[o.model]}function isFullItemDefinition(o){return o.title&&o.model&&o.view}function isNumericalDefinition(o){let a;if(typeof o=="object")if(o.model)a=parseFloat(o.model);else throw new CKEditorError("font-size-invalid-definition",null,o);else a=parseFloat(o);return isNaN(a)}const styleFontSize=["x-small","x-small","small","medium","large","x-large","xx-large","xxx-large"];class FontSizeEditing extends Plugin{static get pluginName(){return"FontSizeEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define(FONT_SIZE,{options:["tiny","small","default","big","huge"],supportAllValues:!1})}init(){const a=this.editor;a.model.schema.extend("$text",{allowAttributes:FONT_SIZE}),a.model.schema.setAttributeProperties(FONT_SIZE,{isFormatting:!0,copyOnEnter:!0});const n=a.config.get("fontSize.supportAllValues"),s=normalizeOptions(this.editor.config.get("fontSize.options")).filter(c=>c.model),l=buildDefinition(FONT_SIZE,s);n?(this._prepareAnyValueConverters(l),this._prepareCompatibilityConverter()):a.conversion.attributeToElement(l),a.commands.add(FONT_SIZE,new FontSizeCommand(a))}_prepareAnyValueConverters(a){const n=this.editor,s=a.model.values.filter(l=>!isLength(String(l))&&!isPercentage(String(l)));if(s.length)throw new CKEditorError("font-size-invalid-use-of-named-presets",null,{presets:s});n.conversion.for("downcast").attributeToElement({model:FONT_SIZE,view:(l,{writer:c})=>{if(l)return c.createAttributeElement("span",{style:"font-size:"+l},{priority:7})}}),n.conversion.for("upcast").elementToAttribute({model:{key:FONT_SIZE,value:l=>l.getStyle("font-size")},view:{name:"span",styles:{"font-size":/.*/}}})}_prepareCompatibilityConverter(){this.editor.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{size:/^[+-]?\d{1,3}$/}},model:{key:FONT_SIZE,value:n=>{const s=n.getAttribute("size"),l=s[0]==="-"||s[0]==="+";let c=parseInt(s,10);l&&(c=3+c);const u=styleFontSize.length-1,d=Math.min(Math.max(c,0),u);return styleFontSize[d]}}})}}var fontSizeIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';class FontSizeUI extends Plugin{static get pluginName(){return"FontSizeUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t,s=this._getLocalizedOptions(),l=a.commands.get(FONT_SIZE),c=n("Font Size"),u=_prepareListOptions(s,l);a.ui.componentFactory.add(FONT_SIZE,d=>{const h=createDropdown(d);return addListToDropdown(h,u,{role:"menu",ariaLabel:c}),h.buttonView.set({label:c,icon:fontSizeIcon,tooltip:!0}),h.extendTemplate({attributes:{class:["ck-font-size-dropdown"]}}),h.bind("isEnabled").to(l),this.listenTo(h,"execute",f=>{a.execute(f.source.commandName,{value:f.source.commandParam}),a.editing.view.focus()}),h}),a.ui.componentFactory.add(`menuBar:${FONT_SIZE}`,d=>{const h=new MenuBarMenuView(d);h.buttonView.set({label:c,icon:fontSizeIcon}),h.bind("isEnabled").to(l);const f=new MenuBarMenuListView(d);for(const p of u){const g=new MenuBarMenuListItemView(d,h),v=new MenuBarMenuListItemButtonView(d);v.set({role:"menuitemradio",isToggleable:!0}),v.bind(...Object.keys(p.model)).to(p.model),v.delegate("execute").to(h),v.on("execute",()=>{a.execute(p.model.commandName,{value:p.model.commandParam}),a.editing.view.focus()}),g.children.add(v),f.items.add(g)}return h.panelView.children.add(f),h})}_getLocalizedOptions(){const a=this.editor,n=a.t,s={Default:n("Default"),Tiny:n("Tiny"),Small:n("Small"),Big:n("Big"),Huge:n("Huge")};return normalizeOptions(a.config.get(FONT_SIZE).options).map(c=>{const u=s[c.title];return u&&u!=c.title&&(c=Object.assign({},c,{title:u})),c})}}function _prepareListOptions(o,a){const n=new Collection;for(const s of o){const l={type:"button",model:new Model$1({commandName:FONT_SIZE,commandParam:s.model,label:s.title,class:"ck-fontsize-option",role:"menuitemradio",withText:!0})};s.view&&typeof s.view!="string"&&(s.view.styles&&l.model.set("labelStyle",`font-size:${s.view.styles["font-size"]}`),s.view.classes&&l.model.set("class",`${l.model.class} ${s.view.classes}`)),l.model.bind("isOn").to(a,"value",c=>c===s.model),n.add(l)}return n}class FontSize extends Plugin{static get requires(){return[FontSizeEditing,FontSizeUI]}static get pluginName(){return"FontSize"}static get isOfficialPlugin(){return!0}normalizeSizeOptions(a){return normalizeOptions(a)}}class FontColorCommand extends FontCommand{constructor(a){super(a,FONT_COLOR)}}class FontColorEditing extends Plugin{static get pluginName(){return"FontColorEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define(FONT_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),a.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:FONT_COLOR,value:renderUpcastAttribute("color")}}),a.conversion.for("upcast").elementToAttribute({view:{name:"font",attributes:{color:/^#?\w+$/}},model:{key:FONT_COLOR,value:n=>n.getAttribute("color")}}),a.conversion.for("downcast").attributeToElement({model:FONT_COLOR,view:renderDowncastElement("color")}),a.commands.add(FONT_COLOR,new FontColorCommand(a)),a.model.schema.extend("$text",{allowAttributes:FONT_COLOR}),a.model.schema.setAttributeProperties(FONT_COLOR,{isFormatting:!0,copyOnEnter:!0})}}class ColorUI extends Plugin{constructor(n,{commandName:s,componentName:l,icon:c,dropdownLabel:u}){super(n);M(this,"commandName");M(this,"componentName");M(this,"icon");M(this,"dropdownLabel");M(this,"columns");this.commandName=s,this.componentName=l,this.icon=c,this.dropdownLabel=u,this.columns=n.config.get(`${this.componentName}.columns`)}init(){const n=this.editor,s=n.locale,l=s.t,c=n.commands.get(this.commandName),u=n.config.get(this.componentName),d=normalizeColorOptions(u.colors),h=getLocalizedColorOptions(s,d),f=u.documentColors,p=u.colorPicker!==!1;n.ui.componentFactory.add(this.componentName,g=>{const v=createDropdown(g);let b=!1;const w=addColorSelectorToDropdown({dropdownView:v,colors:h.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:l("Remove color"),colorPickerLabel:l("Color picker"),documentColorsLabel:f!==0?l("Document colors"):"",documentColorsCount:f===void 0?this.columns:f,colorPickerViewConfig:p?u.colorPicker||{}:!1});return w.bind("selectedColor").to(c,"value"),v.buttonView.set({label:this.dropdownLabel,icon:this.icon,tooltip:!0}),v.extendTemplate({attributes:{class:"ck-color-ui-dropdown"}}),v.bind("isEnabled").to(c),w.on("execute",(x,S)=>{v.isOpen&&n.execute(this.commandName,{value:S.value,batch:this._undoStepBatch}),S.source!=="colorPicker"&&n.editing.view.focus(),S.source==="colorPickerSaveButton"&&(v.isOpen=!1)}),w.on("colorPicker:show",()=>{this._undoStepBatch=n.model.createBatch()}),w.on("colorPicker:cancel",()=>{this._undoStepBatch.operations.length&&(v.isOpen=!1,n.execute("undo",this._undoStepBatch)),n.editing.view.focus()}),v.on("change:isOpen",(x,S,E)=>{b||(b=!0,v.colorSelectorView.appendUI()),E&&(f!==0&&w.updateDocumentColors(n.model,this.componentName),w.updateSelectedColors(),w.showColorGridsFragment())}),focusChildOnDropdownOpen(v,()=>v.colorSelectorView.colorGridsFragmentView.staticColorsGrid.items.find(x=>x.isOn)),v}),n.ui.componentFactory.add(`menuBar:${this.componentName}`,g=>{const v=new MenuBarMenuView(g);v.buttonView.set({label:this.dropdownLabel,icon:this.icon}),v.bind("isEnabled").to(c);let b=!1;const w=new ColorSelectorView(g,{colors:h.map(x=>({label:x.label,color:x.model,options:{hasBorder:x.hasBorder}})),columns:this.columns,removeButtonLabel:l("Remove color"),colorPickerLabel:l("Color picker"),documentColorsLabel:f!==0?l("Document colors"):"",documentColorsCount:f===void 0?this.columns:f,colorPickerViewConfig:!1});return w.bind("selectedColor").to(c,"value"),w.delegate("execute").to(v),w.on("execute",(x,S)=>{n.execute(this.commandName,{value:S.value,batch:this._undoStepBatch}),n.editing.view.focus()}),v.on("change:isOpen",(x,S,E)=>{b||(b=!0,w.appendUI()),E&&(f!==0&&w.updateDocumentColors(n.model,this.componentName),w.updateSelectedColors(),w.showColorGridsFragment())}),v.panelView.children.add(w),v})}}var fontColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';class FontColorUI extends ColorUI{constructor(a){const n=a.locale.t;super(a,{commandName:FONT_COLOR,componentName:FONT_COLOR,icon:fontColorIcon,dropdownLabel:n("Font Color")})}static get pluginName(){return"FontColorUI"}}class FontColor extends Plugin{static get requires(){return[FontColorEditing,FontColorUI]}static get pluginName(){return"FontColor"}static get isOfficialPlugin(){return!0}}class FontBackgroundColorCommand extends FontCommand{constructor(a){super(a,FONT_BACKGROUND_COLOR)}}class FontBackgroundColorEditing extends Plugin{static get pluginName(){return"FontBackgroundColorEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define(FONT_BACKGROUND_COLOR,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5}),a.data.addStyleProcessorRules(addBackgroundRules),a.conversion.for("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:FONT_BACKGROUND_COLOR,value:renderUpcastAttribute("background-color")}}),a.conversion.for("downcast").attributeToElement({model:FONT_BACKGROUND_COLOR,view:renderDowncastElement("background-color")}),a.commands.add(FONT_BACKGROUND_COLOR,new FontBackgroundColorCommand(a)),a.model.schema.extend("$text",{allowAttributes:FONT_BACKGROUND_COLOR}),a.model.schema.setAttributeProperties(FONT_BACKGROUND_COLOR,{isFormatting:!0,copyOnEnter:!0})}}var fontBackgroundColorIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';class FontBackgroundColorUI extends ColorUI{constructor(a){const n=a.locale.t;super(a,{commandName:FONT_BACKGROUND_COLOR,componentName:FONT_BACKGROUND_COLOR,icon:fontBackgroundColorIcon,dropdownLabel:n("Font Background Color")})}static get pluginName(){return"FontBackgroundColorUI"}}class FontBackgroundColor extends Plugin{static get requires(){return[FontBackgroundColorEditing,FontBackgroundColorUI]}static get pluginName(){return"FontBackgroundColor"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ParagraphCommand extends Command{constructor(a){super(a),this._isEnabledBasedOnSelection=!1}refresh(){const a=this.editor.model,n=a.document,s=first(n.selection.getSelectedBlocks());this.value=!!s&&s.is("element","paragraph"),this.isEnabled=!!s&&checkCanBecomeParagraph(s,a.schema)}execute(a={}){const n=this.editor.model,s=n.document,l=a.selection||s.selection;n.canEditAt(l)&&n.change(c=>{const u=l.getSelectedBlocks();for(const d of u)!d.is("element","paragraph")&&checkCanBecomeParagraph(d,n.schema)&&c.rename(d,"paragraph")})}}function checkCanBecomeParagraph(o,a){return a.checkChild(o.parent,"paragraph")&&!a.isObject(o)}class InsertParagraphCommand extends Command{constructor(a){super(a),this._isEnabledBasedOnSelection=!1}execute(a){const n=this.editor.model,s=a.attributes;let l=a.position;return n.canEditAt(l)?n.change(c=>{if(l=this._findPositionToInsertParagraph(l,c),!l)return null;const u=c.createElement("paragraph");return s&&n.schema.setAllowedAttributes(u,s,c),n.insertContent(u,l),c.setSelection(u,"in"),c.createPositionAt(u,0)}):null}_findPositionToInsertParagraph(a,n){const s=this.editor.model;if(s.schema.checkChild(a,"paragraph"))return a;const l=s.schema.findAllowedParent(a,"paragraph");if(!l)return null;const c=a.parent,u=s.schema.checkChild(c,"$text");return c.isEmpty||u&&a.isAtEnd?s.createPositionAfter(c):!c.isEmpty&&u&&a.isAtStart?s.createPositionBefore(c):n.split(a,l).position}}const ur=class ur extends Plugin{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.model;a.commands.add("paragraph",new ParagraphCommand(a)),a.commands.add("insertParagraph",new InsertParagraphCommand(a)),n.schema.register("paragraph",{inheritAllFrom:"$block"}),a.conversion.elementToElement({model:"paragraph",view:"p"}),a.conversion.for("upcast").elementToElement({model:(s,{writer:l})=>!ur.paragraphLikeElements.has(s.name)||s.isEmpty?null:l.createElement("paragraph"),view:/.+/,converterPriority:"low"})}};M(ur,"paragraphLikeElements",new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]));let Paragraph=ur;/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HeadingCommand extends Command{constructor(n,s){super(n);M(this,"modelElements");this.modelElements=s}refresh(){const n=first(this.editor.model.document.selection.getSelectedBlocks());this.value=!!n&&this.modelElements.includes(n.name)&&n.name,this.isEnabled=!!n&&this.modelElements.some(s=>checkCanBecomeHeading(n,s,this.editor.model.schema))}execute(n){const s=this.editor.model,l=s.document,c=n.value;s.change(u=>{const d=Array.from(l.selection.getSelectedBlocks()).filter(h=>checkCanBecomeHeading(h,c,s.schema));for(const h of d)h.is("element",c)||u.rename(h,c)})}}function checkCanBecomeHeading(o,a,n){return n.checkChild(o.parent,a)&&!n.isObject(o)}const defaultModelElement="paragraph";class HeadingEditing extends Plugin{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Paragraph]}init(){const a=this.editor,n=a.config.get("heading.options"),s=[];for(const l of n)l.model!=="paragraph"&&(a.model.schema.register(l.model,{inheritAllFrom:"$block"}),a.conversion.elementToElement(l),s.push(l.model));this._addDefaultH1Conversion(a),a.commands.add("heading",new HeadingCommand(a,s))}afterInit(){const a=this.editor,n=a.commands.get("enter"),s=a.config.get("heading.options");n&&this.listenTo(n,"afterExecute",(l,c)=>{const u=a.model.document.selection.getFirstPosition().parent;s.some(h=>u.is("element",h.model))&&!u.is("element",defaultModelElement)&&u.childCount===0&&c.writer.rename(u,defaultModelElement)})}_addDefaultH1Conversion(a){a.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:priorities.low+1})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getLocalizedOptions(o){const a=o.t,n={Paragraph:a("Paragraph"),"Heading 1":a("Heading 1"),"Heading 2":a("Heading 2"),"Heading 3":a("Heading 3"),"Heading 4":a("Heading 4"),"Heading 5":a("Heading 5"),"Heading 6":a("Heading 6")};return o.config.get("heading.options").map(s=>{const l=n[s.title];return l&&l!=s.title&&(s.title=l),s})}class HeadingUI extends Plugin{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t,s=getLocalizedOptions(a),l=n("Choose heading"),c=n("Heading");a.ui.componentFactory.add("heading",u=>{const d={},h=new Collection,f=a.commands.get("heading"),p=a.commands.get("paragraph"),g=[f];for(const b of s){const w={type:"button",model:new Model$1({label:b.title,class:b.class,role:"menuitemradio",withText:!0})};b.model==="paragraph"?(w.model.bind("isOn").to(p,"value"),w.model.set("commandName","paragraph"),g.push(p)):(w.model.bind("isOn").to(f,"value",x=>x===b.model),w.model.set({commandName:"heading",commandValue:b.model})),h.add(w),d[b.model]=b.title}const v=createDropdown(u);return addListToDropdown(v,h,{ariaLabel:c,role:"menu"}),v.buttonView.set({ariaLabel:c,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:c}),v.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),v.bind("isEnabled").toMany(g,"isEnabled",(...b)=>b.some(w=>w)),v.buttonView.bind("label").to(f,"value",p,"value",(b,w)=>{const x=w?"paragraph":b;return typeof x=="boolean"||!d[x]?l:d[x]}),v.buttonView.bind("ariaLabel").to(f,"value",p,"value",(b,w)=>{const x=w?"paragraph":b;return typeof x=="boolean"||!d[x]?c:`${d[x]}, ${c}`}),this.listenTo(v,"execute",b=>{const{commandName:w,commandValue:x}=b.source;a.execute(w,x?{value:x}:void 0),a.editing.view.focus()}),v}),a.ui.componentFactory.add("menuBar:heading",u=>{const d=new MenuBarMenuView(u),h=a.commands.get("heading"),f=a.commands.get("paragraph"),p=[h],g=new MenuBarMenuListView(u);d.set({class:"ck-heading-dropdown"}),g.set({ariaLabel:n("Heading"),role:"menu"}),d.buttonView.set({label:n("Heading")}),d.panelView.children.add(g);for(const v of s){const b=new MenuBarMenuListItemView(u,d),w=new MenuBarMenuListItemButtonView(u);b.children.add(w),g.items.add(b),w.set({isToggleable:!0,label:v.title,role:"menuitemradio",class:v.class}),w.delegate("execute").to(d),w.on("execute",()=>{const x=v.model==="paragraph"?"paragraph":"heading";a.execute(x,{value:v.model}),a.editing.view.focus()}),v.model==="paragraph"?(w.bind("isOn").to(f,"value"),p.push(f)):w.bind("isOn").to(h,"value",x=>x===v.model)}return d.bind("isEnabled").toMany(p,"isEnabled",(...v)=>v.some(b=>b)),d})}}class Heading extends Plugin{static get requires(){return[HeadingEditing,HeadingUI]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HighlightCommand extends Command{refresh(){const a=this.editor.model,n=a.document;this.value=n.selection.getAttribute("highlight"),this.isEnabled=a.schema.checkAttributeInSelection(n.selection,"highlight")}execute(a={}){const n=this.editor.model,l=n.document.selection,c=a.value;n.change(u=>{if(l.isCollapsed){const d=l.getFirstPosition();if(l.hasAttribute("highlight")){const h=v=>v.item.hasAttribute("highlight")&&v.item.getAttribute("highlight")===this.value,f=d.getLastMatchingPosition(h,{direction:"backward"}),p=d.getLastMatchingPosition(h),g=u.createRange(f,p);!c||this.value===c?(d.isEqual(p)||u.removeAttribute("highlight",g),u.removeSelectionAttribute("highlight")):(d.isEqual(p)||u.setAttribute("highlight",c,g),u.setSelectionAttribute("highlight",c))}else c&&u.setSelectionAttribute("highlight",c)}else{const d=n.schema.getValidRanges(l.getRanges(),"highlight");for(const h of d)c?u.setAttribute("highlight",c,h):u.removeAttribute("highlight",h)}})}}class HighlightEditing extends Plugin{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){const a=this.editor;a.model.schema.extend("$text",{allowAttributes:"highlight"});const n=a.config.get("highlight.options");a.conversion.attributeToElement(_buildDefinition(n)),a.commands.add("highlight",new HighlightCommand(a))}}function _buildDefinition(o){const a={model:{key:"highlight",values:[]},view:{}};for(const n of o)a.model.values.push(n.model),a.view[n.model]={name:"mark",classes:n.class};return a}var markerIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',penIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>';class HighlightUI extends Plugin{get localizedOptionTitles(){const a=this.editor.t;return{"Yellow marker":a("Yellow marker"),"Green marker":a("Green marker"),"Pink marker":a("Pink marker"),"Blue marker":a("Blue marker"),"Red pen":a("Red pen"),"Green pen":a("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.config.get("highlight.options");for(const n of a)this._addHighlighterButton(n);this._addRemoveHighlightButton(),this._addDropdown(a),this._addMenuBarButton(a)}_addRemoveHighlightButton(){const a=this.editor.t,n=this.editor.commands.get("highlight");this._addButton("removeHighlight",a("Remove highlight"),icons.eraser,null,s=>{s.bind("isEnabled").to(n,"isEnabled")})}_addHighlighterButton(a){const n=this.editor.commands.get("highlight");this._addButton("highlight:"+a.model,a.title,getIconForType(a.type),a.model,s);function s(l){l.bind("isEnabled").to(n,"isEnabled"),l.bind("isOn").to(n,"value",c=>c===a.model),l.iconView.fillColor=a.color,l.isToggleable=!0}}_addButton(a,n,s,l,c){const u=this.editor;u.ui.componentFactory.add(a,d=>{const h=new ButtonView(d),f=this.localizedOptionTitles[n]?this.localizedOptionTitles[n]:n;return h.set({label:f,icon:s,tooltip:!0}),h.on("execute",()=>{u.execute("highlight",{value:l}),u.editing.view.focus()}),c(h),h})}_addDropdown(a){const n=this.editor,s=n.t,l=n.ui.componentFactory,c=a[0],u=a.reduce((d,h)=>(d[h.model]=h,d),{});l.add("highlight",d=>{const h=n.commands.get("highlight"),f=createDropdown(d,SplitButtonView),p=f.buttonView;p.set({label:s("Highlight"),tooltip:!0,lastExecuted:c.model,commandValue:c.model,isToggleable:!0}),p.bind("icon").to(h,"value",b=>getIconForType(v(b,"type"))),p.bind("color").to(h,"value",b=>v(b,"color")),p.bind("commandValue").to(h,"value",b=>v(b,"model")),p.bind("isOn").to(h,"value",b=>!!b),p.delegate("execute").to(f);const g=()=>{const b=a.map(w=>{const x=l.create("highlight:"+w.model);return this.listenTo(x,"execute",()=>{f.buttonView.set({lastExecuted:w.model})}),x});return b.push(new ToolbarSeparatorView),b.push(l.create("removeHighlight")),b};f.bind("isEnabled").to(h,"isEnabled"),addToolbarToDropdown(f,g,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:s("Text highlight toolbar")}),bindToolbarIconStyleToActiveColor(f),p.on("execute",()=>{n.execute("highlight",{value:p.commandValue})}),this.listenTo(f,"execute",()=>{n.editing.view.focus()});function v(b,w){const x=!b||b===p.lastExecuted?p.lastExecuted:b;return u[x][w]}return f})}_addMenuBarButton(a){const n=this.editor,s=n.t,l=n.commands.get("highlight");n.ui.componentFactory.add("menuBar:highlight",c=>{const u=new MenuBarMenuView(c);u.buttonView.set({label:s("Highlight"),icon:getIconForType("marker")}),u.bind("isEnabled").to(l),u.buttonView.iconView.fillColor="transparent";const d=new MenuBarMenuListView(c);for(const p of a){const g=new MenuBarMenuListItemView(c,u),v=new MenuBarMenuListItemButtonView(c);v.set({label:p.title,icon:getIconForType(p.type),role:"menuitemradio",isToggleable:!0}),v.iconView.fillColor=p.color,v.delegate("execute").to(u),v.bind("isOn").to(l,"value",b=>b===p.model),v.on("execute",()=>{n.execute("highlight",{value:p.model}),n.editing.view.focus()}),g.children.add(v),d.items.add(g)}d.items.add(new ListSeparatorView(c));const h=new MenuBarMenuListItemView(c,u),f=new MenuBarMenuListItemButtonView(c);return f.set({label:s("Remove highlight"),icon:icons.eraser}),f.delegate("execute").to(u),f.on("execute",()=>{n.execute("highlight",{value:null}),n.editing.view.focus()}),h.children.add(f),d.items.add(h),u.panelView.children.add(d),u})}}function bindToolbarIconStyleToActiveColor(o){o.buttonView.actionView.iconView.bind("fillColor").to(o.buttonView,"color")}function getIconForType(o){return o==="marker"?markerIcon:penIcon}class Highlight extends Plugin{static get requires(){return[HighlightEditing,HighlightUI]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HorizontalLineCommand extends Command{refresh(){const a=this.editor.model,n=a.schema,s=a.document.selection;this.isEnabled=isHorizontalLineAllowedInParent(s,n,a)}execute(){const a=this.editor.model;a.change(n=>{const s=n.createElement("horizontalLine");a.insertObject(s,null,null,{setSelection:"after"})})}}function isHorizontalLineAllowedInParent(o,a,n){const s=getInsertHorizontalLineParent(o,n);return a.checkChild(s,"horizontalLine")}function getInsertHorizontalLineParent(o,a){const s=findOptimalInsertionRange(o,a).start.parent;return s.isEmpty&&!s.is("element","$root")?s.parent:s}class HorizontalLineEditing extends Plugin{static get pluginName(){return"HorizontalLineEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.model.schema,s=a.t,l=a.conversion;n.register("horizontalLine",{inheritAllFrom:"$blockObject"}),l.for("dataDowncast").elementToElement({model:"horizontalLine",view:(c,{writer:u})=>u.createEmptyElement("hr")}),l.for("editingDowncast").elementToStructure({model:"horizontalLine",view:(c,{writer:u})=>{const d=s("Horizontal line"),h=u.createContainerElement("div",null,u.createEmptyElement("hr"));return u.addClass("ck-horizontal-line",h),u.setCustomProperty("hr",!0,h),toHorizontalLineWidget(h,u,d)}}),l.for("upcast").elementToElement({view:"hr",model:"horizontalLine"}),a.commands.add("horizontalLine",new HorizontalLineCommand(a))}}function toHorizontalLineWidget(o,a,n){return a.setCustomProperty("horizontalLine",!0,o),toWidget(o,a,{label:n})}class HorizontalLineUI extends Plugin{static get pluginName(){return"HorizontalLineUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add("horizontalLine",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),a.ui.componentFactory.add("menuBar:horizontalLine",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get("horizontalLine"),c=new a(n.locale),u=s.t;return c.set({label:u("Horizontal line"),icon:icons.horizontalLine}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute("horizontalLine"),n.editing.view.focus()}),c}}class HorizontalLine extends Plugin{static get requires(){return[HorizontalLineEditing,HorizontalLineUI,Widget]}static get pluginName(){return"HorizontalLine"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class HtmlEmbedCommand extends Command{refresh(){const a=this.editor.model,n=a.schema,s=a.document.selection,l=getSelectedRawHtmlModelWidget(s);this.isEnabled=isHtmlEmbedAllowedInParent(s,n,a),this.value=l?l.getAttribute("value")||"":null}execute(a){const n=this.editor.model,s=n.document.selection;n.change(l=>{let c;this.value!==null?c=getSelectedRawHtmlModelWidget(s):(c=l.createElement("rawHtml"),n.insertObject(c,null,null,{setSelection:"on"})),l.setAttribute("value",a,c)})}}function isHtmlEmbedAllowedInParent(o,a,n){const s=getInsertHtmlEmbedParent(o,n);return a.checkChild(s,"rawHtml")}function getInsertHtmlEmbedParent(o,a){const s=findOptimalInsertionRange(o,a).start.parent;return s.isEmpty&&!s.is("rootElement")?s.parent:s}function getSelectedRawHtmlModelWidget(o){const a=o.getSelectedElement();return a&&a.is("element","rawHtml")?a:null}class HtmlEmbedEditing extends Plugin{constructor(n){super(n);M(this,"_widgetButtonViewReferences",new Set);n.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:s=>(logWarning("html-embed-provide-sanitize-function"),{html:s,hasChanged:!1})})}static get pluginName(){return"HtmlEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),n.commands.add("htmlEmbed",new HtmlEmbedCommand(n)),this._setupConversion()}_setupConversion(){const n=this.editor,s=n.t,l=n.editing.view,c=this._widgetButtonViewReferences,u=n.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(const g of c){if(g.element&&g.element.isConnected)return;g.destroy(),c.delete(g)}},{priority:"lowest"}),n.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),n.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(g,{writer:v})=>v.createElement("rawHtml",{value:g.getCustomProperty("$rawContent")})}),n.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(g,{writer:v})=>v.createRawElement("div",{class:"raw-html-embed"},function(b){b.innerHTML=g.getAttribute("value")||""})}),n.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(g,{writer:v})=>{let b,w,x;const S=v.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(C){b=C,d({editor:n,domElement:C,state:w,props:x}),b.addEventListener("mousedown",()=>{if(w.isEditable){const A=n.model;A.document.selection.getSelectedElement()!==g&&A.change(j=>j.setSelection(g,"on"))}},!0)}),E={makeEditable(){w=Object.assign({},w,{isEditable:!0}),d({domElement:b,editor:n,state:w,props:x}),l.change(C=>{C.setAttribute("data-cke-ignore-events","true",S)}),b.querySelector("textarea").focus()},save(C){C!==w.getRawHtmlValue()?(n.execute("htmlEmbed",C),n.editing.view.focus()):this.cancel()},cancel(){w=Object.assign({},w,{isEditable:!1}),d({domElement:b,editor:n,state:w,props:x}),n.editing.view.focus(),l.change(C=>{C.removeAttribute("data-cke-ignore-events",S)})}};w={showPreviews:u.showPreviews,isEditable:!1,getRawHtmlValue:()=>g.getAttribute("value")||""},x={sanitizeHtml:u.sanitizeHtml,textareaPlaceholder:s("Paste raw HTML here..."),onEditClick(){E.makeEditable()},onSaveClick(C){E.save(C)},onCancelClick(){E.cancel()}};const T=v.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":s("HTML snippet"),dir:n.locale.uiLanguageDirection},S);return v.setCustomProperty("rawHtmlApi",E,T),v.setCustomProperty("rawHtml",!0,T),toWidget(T,v,{label:s("HTML snippet"),hasSelectionHandle:!0})}});function d({editor:g,domElement:v,state:b,props:w}){v.textContent="";const x=v.ownerDocument;let S;if(b.isEditable){const T={isDisabled:!1,placeholder:w.textareaPlaceholder};S=f({domDocument:x,state:b,props:T}),v.append(S)}else if(b.showPreviews){const T={sanitizeHtml:w.sanitizeHtml};v.append(p({domDocument:x,state:b,props:T,editor:g}))}else{const T={isDisabled:!0,placeholder:w.textareaPlaceholder};v.append(f({domDocument:x,state:b,props:T}))}const E={onEditClick:w.onEditClick,onSaveClick:()=>{w.onSaveClick(S.value)},onCancelClick:w.onCancelClick};v.prepend(h({editor:g,domDocument:x,state:b,props:E}))}function h({editor:g,domDocument:v,state:b,props:w}){const x=createElement$1(v,"div",{class:"raw-html-embed__buttons-wrapper"});if(b.isEditable){const S=createUIButton(g,"save",w.onSaveClick),E=createUIButton(g,"cancel",w.onCancelClick);x.append(S.element,E.element),c.add(S).add(E)}else{const S=createUIButton(g,"edit",w.onEditClick);x.append(S.element),c.add(S)}return x}function f({domDocument:g,state:v,props:b}){const w=createElement$1(g,"textarea",{placeholder:b.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return w.disabled=b.isDisabled,w.value=v.getRawHtmlValue(),w}function p({editor:g,domDocument:v,state:b,props:w}){const x=w.sanitizeHtml(b.getRawHtmlValue()),S=b.getRawHtmlValue().length>0?s("No preview available"):s("Empty snippet content"),E=createElement$1(v,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},S),T=createElement$1(v,"div",{class:"raw-html-embed__preview-content",dir:g.locale.contentLanguageDirection}),A=v.createRange().createContextualFragment(x.html);return T.appendChild(A),createElement$1(v,"div",{class:"raw-html-embed__preview"},[E,T])}}}function createUIButton(o,a,n){const{t:s}=o.locale,l=new ButtonView(o.locale),c=o.commands.get("htmlEmbed");return l.set({class:`raw-html-embed__${a}-button`,icon:icons.pencil,tooltip:!0,tooltipPosition:o.locale.uiLanguageDirection==="rtl"?"e":"w"}),l.render(),a==="edit"?(l.set({icon:icons.pencil,label:s("Edit source")}),l.bind("isEnabled").to(c)):a==="save"?(l.set({icon:icons.check,label:s("Save changes")}),l.bind("isEnabled").to(c)):l.set({icon:icons.cancel,label:s("Cancel")}),l.on("execute",n),l}class HtmlEmbedUI extends Plugin{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,s=a.locale.t;a.ui.componentFactory.add("htmlEmbed",()=>{const l=this._createButton(ButtonView);return l.set({tooltip:!0,label:s("Insert HTML")}),l}),a.ui.componentFactory.add("menuBar:htmlEmbed",()=>{const l=this._createButton(MenuBarMenuListItemButtonView);return l.set({label:s("HTML snippet")}),l})}_createButton(a){const n=this.editor,s=n.commands.get("htmlEmbed"),l=new a(n.locale);return l.set({icon:icons.html}),l.bind("isEnabled").to(s,"isEnabled"),this.listenTo(l,"execute",()=>{n.execute("htmlEmbed"),n.editing.view.focus(),n.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),l}}class HtmlEmbed extends Plugin{static get requires(){return[HtmlEmbedEditing,HtmlEmbedUI,Widget]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function updateViewAttributes(o,a,n,s){a&&removeViewAttributes(o,a,s),n&&setViewAttributes(o,n,s)}function setViewAttributes(o,a,n){if(a.attributes)for(const[s,l]of Object.entries(a.attributes))o.setAttribute(s,l,n);a.styles&&o.setStyle(a.styles,n),a.classes&&o.addClass(a.classes,n)}function removeViewAttributes(o,a,n){if(a.attributes)for(const[s]of Object.entries(a.attributes))o.removeAttribute(s,n);if(a.styles)for(const s of Object.keys(a.styles))o.removeStyle(s,n);a.classes&&o.removeClass(a.classes,n)}function mergeViewElementAttributes(o,a){const n=cloneDeep(o);let s="attributes";for(s in a)s=="classes"?n[s]=Array.from(new Set([...o[s]||[],...a[s]])):n[s]={...o[s],...a[s]};return n}function modifyGhsAttribute(o,a,n,s,l){const c=a.getAttribute(n),u={};for(const d of["attributes","styles","classes"]){if(d!=s){c&&c[d]&&(u[d]=c[d]);continue}if(s=="classes"){const f=new Set(c&&c.classes||[]);l(f),f.size&&(u[d]=Array.from(f));continue}const h=new Map(Object.entries(c&&c[d]||{}));l(h),h.size&&(u[d]=Object.fromEntries(h))}Object.keys(u).length?a.is("documentSelection")?o.setSelectionAttribute(n,u):o.setAttribute(n,u,a):c&&(a.is("documentSelection")?o.removeSelectionAttribute(n):o.removeAttribute(n,a))}function toPascalCase(o){return startCase(o).replace(/ /g,"")}function getHtmlAttributeName(o){return`html${toPascalCase(o)}Attributes`}function viewToModelObjectConverter({model:o}){return(a,n)=>n.writer.createElement(o,{htmlContent:a.getCustomProperty("$rawContent")})}function toObjectWidgetConverter(o,{view:a,isInline:n}){const s=o.t;return(l,{writer:c})=>{const u=s("HTML object"),d=createObjectView(a,l,c),h=l.getAttribute(getHtmlAttributeName(a));c.addClass("html-object-embed__content",d),h&&setViewAttributes(c,h,d);const f=c.createContainerElement(n?"span":"div",{class:"html-object-embed","data-html-object-embed-label":u},d);return toWidget(f,c,{label:u})}}function createObjectView(o,a,n){return n.createRawElement(o,null,(s,l)=>{l.setContentOf(s,a.getAttribute("htmlContent"))})}function viewToAttributeInlineConverter({view:o,model:a,allowEmpty:n},s){return c=>{c.on(`element:${o}`,(u,d,h)=>{let f=s.processViewAttributes(d.viewItem,h);if(!(!f&&!h.consumable.test(d.viewItem,{name:!0}))){if(f=f||{},h.consumable.consume(d.viewItem,{name:!0}),d.modelRange||(d=Object.assign(d,h.convertChildren(d.viewItem,d.modelCursor))),n&&d.modelRange.isCollapsed&&Object.keys(f).length){const p=h.writer.createElement("htmlEmptyElement");if(!h.safeInsert(p,d.modelCursor))return;const g=h.getSplitParts(p);d.modelRange=h.writer.createRange(d.modelRange.start,h.writer.createPositionAfter(g[g.length-1])),h.updateConversionResult(p,d),l(p,f,h);return}for(const p of d.modelRange.getItems())l(p,f,h)}},{priority:"low"})};function l(c,u,d){if(d.schema.checkAttribute(c,a)){const h=c.getAttribute(a),f=mergeViewElementAttributes(u,h||{});d.writer.setAttribute(a,f,c)}}}function emptyInlineModelElementToViewConverter({model:o,view:a},n){return(s,{writer:l,consumable:c})=>{if(!s.hasAttribute(o))return null;const u=l.createContainerElement(a),d=s.getAttribute(o);return c.consume(s,`attribute:${o}`),setViewAttributes(l,d,u),u.getFillerOffset=()=>null,n?toWidget(u,l):u}}function attributeToViewInlineConverter({priority:o,view:a}){return(n,s)=>{if(!n)return;const{writer:l}=s,c=l.createAttributeElement(a,null,{priority:o});return setViewAttributes(l,n,c),c}}function viewToModelBlockAttributeConverter({view:o},a){return n=>{n.on(`element:${o}`,(s,l,c)=>{if(!l.modelRange||l.modelRange.isCollapsed)return;const u=a.processViewAttributes(l.viewItem,c);u&&c.writer.setAttribute(getHtmlAttributeName(l.viewItem.name),u,l.modelRange)},{priority:"low"})}}function modelToViewBlockAttributeConverter({view:o,model:a}){return n=>{n.on(`attribute:${getHtmlAttributeName(o)}:${a}`,(s,l,c)=>{if(!c.consumable.consume(l.item,s.name))return;const{attributeOldValue:u,attributeNewValue:d}=l,h=c.writer,f=c.mapper.toViewElement(l.item);updateViewAttributes(h,u,d,f)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var defaultConfig={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"horizontalLine",view:"hr"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlHr",view:"hr",isEmpty:!0,modelSchema:{inheritAllFrom:"$blockObject"}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]};class DataSchema extends Plugin{constructor(){super(...arguments);M(this,"_definitions",[])}static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(const n of defaultConfig.block)this.registerBlockElement(n);for(const n of defaultConfig.inline)this.registerInlineElement(n)}registerBlockElement(n){this._definitions.push({...n,isBlock:!0})}registerInlineElement(n){this._definitions.push({...n,isInline:!0})}extendBlockElement(n){this._extendDefinition({...n,isBlock:!0})}extendInlineElement(n){this._extendDefinition({...n,isInline:!0})}getDefinitionsForView(n,s=!1){const l=new Set;for(const c of this._getMatchingViewDefinitions(n)){if(s)for(const u of this._getReferences(c.model))l.add(u);l.add(c)}return l}getDefinitionsForModel(n){return this._definitions.filter(s=>s.model==n)}_getMatchingViewDefinitions(n){return this._definitions.filter(s=>s.view&&testViewName(n,s.view))}*_getReferences(n){const s=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],l=this._definitions.filter(c=>c.model==n);for(const{modelSchema:c}of l)if(c)for(const u of s)for(const d of toArray$2(c[u]||[])){const h=this._definitions.filter(f=>f.model==d);for(const f of h)d!==n&&(yield*this._getReferences(f.model),yield f)}}_extendDefinition(n){const s=Array.from(this._definitions.entries()).filter(([,l])=>l.model==n.model);if(s.length==0){this._definitions.push(n);return}for(const[l,c]of s)this._definitions[l]=mergeWith({},c,n,(u,d)=>Array.isArray(u)?u.concat(d):void 0)}}function testViewName(o,a){return typeof o=="string"?o===a:o instanceof RegExp?o.test(a):!1}class DataFilter extends Plugin{constructor(n){super(n);M(this,"_dataSchema");M(this,"_allowedAttributes");M(this,"_disallowedAttributes");M(this,"_allowedElements");M(this,"_disallowedElements");M(this,"_dataInitialized");M(this,"_coupledAttributes");this._dataSchema=n.plugins.get("DataSchema"),this._allowedAttributes=new Matcher,this._disallowedAttributes=new Matcher,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[DataSchema,Widget]}loadAllowedConfig(n){for(const s of n){const l=s.name||/[\s\S]+/,c=splitRules(s);this.allowElement(l),c.forEach(u=>this.allowAttributes(u))}}loadDisallowedConfig(n){for(const s of n){const l=s.name||/[\s\S]+/,c=splitRules(s);c.length==0?this.disallowElement(l):c.forEach(u=>this.disallowAttributes(u))}}loadAllowedEmptyElementsConfig(n){for(const s of n)this.allowEmptyElement(s)}allowElement(n){for(const s of this._dataSchema.getDefinitionsForView(n,!0))this._addAllowedElement(s),this._coupledAttributes=null}disallowElement(n){for(const s of this._dataSchema.getDefinitionsForView(n,!1))this._disallowedElements.add(s.view)}allowEmptyElement(n){for(const s of this._dataSchema.getDefinitionsForView(n,!0))s.isInline&&this._dataSchema.extendInlineElement({...s,allowEmpty:!0})}allowAttributes(n){this._allowedAttributes.add(n)}disallowAttributes(n){this._disallowedAttributes.add(n)}processViewAttributes(n,s){const{consumable:l}=s;return matchAndConsumeAttributes(n,this._disallowedAttributes,l),prepareGHSAttribute(n,matchAndConsumeAttributes(n,this._allowedAttributes,l))}_addAllowedElement(n){if(!this._allowedElements.has(n)){if(this._allowedElements.add(n),"appliesToBlock"in n&&typeof n.appliesToBlock=="string")for(const s of this._dataSchema.getDefinitionsForModel(n.appliesToBlock))s.isBlock&&this._addAllowedElement(s);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(n)},{priority:priorities.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(const n of this._allowedElements)this._fireRegisterEvent(n)},{priority:priorities.highest+1})}_registerElementHandlers(){this.on("register",(n,s)=>{const l=this.editor.model.schema;if(s.isObject&&!l.isRegistered(s.model))this._registerObjectElement(s);else if(s.isBlock)this._registerBlockElement(s);else if(s.isInline)this._registerInlineElement(s);else throw new CKEditorError("data-filter-invalid-definition",null,s);n.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){const n=this.editor.model,s=n.document.selection;n.document.registerPostFixer(l=>{const c=n.document.differ.getChanges();let u=!1;const d=this._getCoupledAttributesMap();for(const h of c){if(h.type!="attribute"||h.attributeNewValue!==null)continue;const f=d.get(h.attributeKey);if(f)for(const{item:p}of h.range.getWalker())for(const g of f)p.hasAttribute(g)&&(l.removeAttribute(g,p),u=!0)}return u}),this.listenTo(s,"change:attribute",(l,{attributeKeys:c})=>{const u=new Set,d=this._getCoupledAttributesMap();for(const h of c){if(s.hasAttribute(h))continue;const f=d.get(h);if(f)for(const p of f)s.hasAttribute(p)&&u.add(p)}u.size!=0&&n.change(h=>{for(const f of u)h.removeSelectionAttribute(f)})})}_registerAssociatedHtmlAttributesPostFixer(){const n=this.editor.model;n.document.registerPostFixer(s=>{const l=n.document.differ.getChanges();let c=!1;for(const u of l)if(!(u.type!=="insert"||u.name==="$text"))for(const d of u.attributes.keys())!d.startsWith("html")||!d.endsWith("Attributes")||n.schema.checkAttribute(u.name,d)||(s.removeAttribute(d,u.position.nodeAfter),c=!0);return c})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(const n of this._allowedElements)if(n.coupledAttribute&&n.model){const s=this._coupledAttributes.get(n.coupledAttribute);s?s.push(n.model):this._coupledAttributes.set(n.coupledAttribute,[n.model])}return this._coupledAttributes}_fireRegisterEvent(n){n.view&&this._disallowedElements.has(n.view)||this.fire(n.view?`register:${n.view}`:"register",n)}_registerObjectElement(n){const s=this.editor,l=s.model.schema,c=s.conversion,{view:u,model:d}=n;l.register(d,n.modelSchema);/* istanbul ignore next: paranoid check -- @preserve */u&&(l.extend(n.model,{allowAttributes:[getHtmlAttributeName(u),"htmlContent"]}),s.data.registerRawContentMatcher({name:u}),c.for("upcast").elementToElement({view:u,model:viewToModelObjectConverter(n),converterPriority:priorities.low+2}),c.for("upcast").add(viewToModelBlockAttributeConverter(n,this)),c.for("editingDowncast").elementToStructure({model:{name:d,attributes:[getHtmlAttributeName(u)]},view:toObjectWidgetConverter(s,n)}),c.for("dataDowncast").elementToElement({model:d,view:(h,{writer:f})=>createObjectView(u,h,f)}),c.for("dataDowncast").add(modelToViewBlockAttributeConverter(n)))}_registerBlockElement(n){const s=this.editor,l=s.model.schema,c=s.conversion,{view:u,model:d}=n;if(!l.isRegistered(n.model)){if(!n.modelSchema||(l.register(n.model,n.modelSchema),!u))return;c.for("upcast").elementToElement({model:d,view:u,converterPriority:priorities.low+2}),c.for("downcast").elementToElement({model:d,view:(h,{writer:f})=>n.isEmpty?f.createEmptyElement(u):f.createContainerElement(u)})}u&&(l.extend(n.model,{allowAttributes:getHtmlAttributeName(u)}),c.for("upcast").add(viewToModelBlockAttributeConverter(n,this)),c.for("downcast").add(modelToViewBlockAttributeConverter(n)))}_registerInlineElement(n){const s=this.editor,l=s.model.schema,c=s.conversion,u=n.model;n.appliesToBlock||(l.extend("$text",{allowAttributes:u}),n.attributeProperties&&l.setAttributeProperties(u,n.attributeProperties),c.for("upcast").add(viewToAttributeInlineConverter(n,this)),c.for("downcast").attributeToElement({model:u,view:attributeToViewInlineConverter(n)}),n.allowEmpty&&(l.setAttributeProperties(u,{copyFromObject:!1}),l.isRegistered("htmlEmptyElement")||l.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),s.data.htmlProcessor.domConverter.registerInlineObjectMatcher(d=>d.name==n.view&&d.isEmpty&&Array.from(d.getAttributeKeys()).length?{name:!0}:null),c.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:emptyInlineModelElementToViewConverter(n,!0)}),c.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:emptyInlineModelElementToViewConverter(n)})))}}function matchAndConsumeAttributes(o,a,n){const s=a.matchAll(o)||[],l=o.document.stylesProcessor;return s.reduce((c,{match:u})=>{for(const[d,h]of u.attributes||[])if(d=="style"){const f=h,p=l.getRelatedStyles(f).filter(g=>g.split("-").length>f.split("-").length).sort((g,v)=>v.split("-").length-g.split("-").length);for(const g of p)n.consume(o,{styles:[g]})&&c.styles.push(g);n.consume(o,{styles:[f]})&&c.styles.push(f)}else if(d=="class"){const f=h;n.consume(o,{classes:[f]})&&c.classes.push(f)}else n.consume(o,{attributes:[d]})&&c.attributes.push(d);return c},{attributes:[],classes:[],styles:[]})}function prepareGHSAttribute(o,{attributes:a,classes:n,styles:s}){return!a.length&&!n.length&&!s.length?null:{...a.length&&{attributes:getAttributes(o,a)},...s.length&&{styles:getReducedStyles(o,s)},...n.length&&{classes:n}}}function getAttributes(o,a){const n={};for(const s of a){const l=o.getAttribute(s);l!==void 0&&isValidAttributeName(s)&&(n[s]=l)}return n}function getReducedStyles(o,a){const n=new StylesMap(o.document.stylesProcessor);for(const s of a){const l=o.getStyle(s);l!==void 0&&n.set(s,l)}return Object.fromEntries(n.getStylesEntries())}function splitPattern(o,a){const{name:n}=o,s=o[a];return isPlainObject$1(s)?Object.entries(s).map(([l,c])=>({name:n,[a]:{[l]:c}})):Array.isArray(s)?s.map(l=>({name:n,[a]:[l]})):[o]}function splitRules(o){const{name:a,attributes:n,classes:s,styles:l}=o,c=[];return n&&c.push(...splitPattern({name:a,attributes:n},"attributes")),s&&c.push(...splitPattern({name:a,classes:s},"classes")),l&&c.push(...splitPattern({name:a,styles:l},"styles")),c}class CodeBlockElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;const a=this.editor.plugins.get(DataFilter);a.on("register:pre",(n,s)=>{if(s.model!=="codeBlock")return;const l=this.editor,c=l.model.schema,u=l.conversion;c.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),u.for("upcast").add(viewToModelCodeBlockAttributeConverter(a)),u.for("downcast").add(modelToViewCodeBlockAttributeConverter()),n.stop()})}}function viewToModelCodeBlockAttributeConverter(o){return a=>{a.on("element:code",(n,s,l)=>{const c=s.viewItem,u=c.parent;if(!u||!u.is("element","pre"))return;d(u,"htmlPreAttributes"),d(c,"htmlContentAttributes");function d(h,f){const p=o.processViewAttributes(h,l);p&&l.writer.setAttribute(f,p,s.modelRange)}},{priority:"low"})}}function modelToViewCodeBlockAttributeConverter(){return o=>{o.on("attribute:htmlPreAttributes:codeBlock",(a,n,s)=>{if(!s.consumable.consume(n.item,a.name))return;const{attributeOldValue:l,attributeNewValue:c}=n,d=s.mapper.toViewElement(n.item).parent;updateViewAttributes(s.writer,l,c,d)}),o.on("attribute:htmlContentAttributes:codeBlock",(a,n,s)=>{if(!s.consumable.consume(n.item,a.name))return;const{attributeOldValue:l,attributeNewValue:c}=n,u=s.mapper.toViewElement(n.item);updateViewAttributes(s.writer,l,c,u)})}}class DualContentModelElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(DataFilter).on("register",(n,s)=>{const l=s,c=this.editor,u=c.model.schema,d=c.conversion;if(!l.paragraphLikeModel||u.isRegistered(l.model)||u.isRegistered(l.paragraphLikeModel))return;const h={model:l.paragraphLikeModel,view:l.view};u.register(l.model,l.modelSchema),u.register(h.model,{inheritAllFrom:"$block"}),d.for("upcast").elementToElement({view:l.view,model:(f,{writer:p})=>this._hasBlockContent(f)?p.createElement(l.model):p.createElement(h.model),converterPriority:priorities.low+.5}),d.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),d.for("downcast").elementToElement({view:h.view,model:h.model}),this._addAttributeConversion(h),n.stop()})}_hasBlockContent(a){const n=this.editor.editing.view,s=n.domConverter.blockElements;for(const l of n.createRangeIn(a).getItems())if(l.is("element")&&s.includes(l.name))return!0;return!1}_addAttributeConversion(a){const n=this.editor,s=n.conversion,l=n.plugins.get(DataFilter);n.model.schema.extend(a.model,{allowAttributes:getHtmlAttributeName(a.view)}),s.for("upcast").add(viewToModelBlockAttributeConverter(a,l)),s.for("downcast").add(modelToViewBlockAttributeConverter(a))}}class HeadingElementSupport extends Plugin{static get requires(){return[DataSchema,Enter]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;if(!a.plugins.has("HeadingEditing"))return;const n=a.config.get("heading.options");this.registerHeadingElements(a,n)}registerHeadingElements(a,n){const s=a.plugins.get(DataSchema),l=[];for(const c of n)"model"in c&&"view"in c&&(s.registerBlockElement({view:c.view,model:c.model}),l.push(c.model));s.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:l}}),s.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:l}})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getDescendantElement(o,a,n){const s=o.createRangeOn(a);for(const{item:l}of s.getWalker())if(l.is("element",n))return l}class ImageElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;if(!a.plugins.has("ImageInlineEditing")&&!a.plugins.has("ImageBlockEditing"))return;const n=a.model.schema,s=a.conversion,l=a.plugins.get(DataFilter);l.on("register:figure",()=>{s.for("upcast").add(viewToModelFigureAttributeConverter$1(l))}),l.on("register:img",(c,u)=>{u.model!=="imageBlock"&&u.model!=="imageInline"||(n.isRegistered("imageBlock")&&n.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),n.isRegistered("imageInline")&&n.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),s.for("upcast").add(viewToModelImageAttributeConverter(l)),s.for("downcast").add(modelToViewImageAttributeConverter()),a.plugins.has("LinkImage")&&s.for("upcast").add(viewToModelLinkImageAttributeConverter(l,a)),c.stop())})}}function viewToModelImageAttributeConverter(o){return a=>{a.on("element:img",(n,s,l)=>{if(!s.modelRange)return;const c=s.viewItem,u=o.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlImgAttributes",u,s.modelRange)},{priority:"low"})}}function viewToModelLinkImageAttributeConverter(o,a){const n=a.plugins.get("ImageUtils");return s=>{s.on("element:a",(l,c,u)=>{const d=c.viewItem;if(!n.findViewImgElement(d))return;const f=c.modelCursor.parent;if(!f.is("element","imageBlock"))return;const p=o.processViewAttributes(d,u);p&&u.writer.setAttribute("htmlLinkAttributes",p,f)},{priority:"low"})}}function viewToModelFigureAttributeConverter$1(o){return a=>{a.on("element:figure",(n,s,l)=>{const c=s.viewItem;if(!s.modelRange||!c.hasClass("image"))return;const u=o.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlFigureAttributes",u,s.modelRange)},{priority:"low"})}}function modelToViewImageAttributeConverter(){return o=>{a("htmlImgAttributes"),n("img","htmlImgAttributes"),n("figure","htmlFigureAttributes"),n("a","htmlLinkAttributes");function a(s){o.on(`attribute:${s}:imageInline`,(l,c,u)=>{if(!u.consumable.consume(c.item,l.name))return;const{attributeOldValue:d,attributeNewValue:h}=c,f=u.mapper.toViewElement(c.item);updateViewAttributes(u.writer,d,h,f)},{priority:"low"})}function n(s,l){o.on(`attribute:${l}:imageBlock`,(c,u,d)=>{if(!d.consumable.test(u.item,c.name))return;const{attributeOldValue:h,attributeNewValue:f}=u,p=d.mapper.toViewElement(u.item),g=getDescendantElement(d.writer,p,s);g&&(updateViewAttributes(d.writer,h,f,g),d.consumable.consume(u.item,c.name))},{priority:"low"}),s==="a"&&o.on("attribute:linkHref:imageBlock",(c,u,d)=>{if(!d.consumable.consume(u.item,"attribute:htmlLinkAttributes:imageBlock"))return;const h=d.mapper.toViewElement(u.item),f=getDescendantElement(d.writer,h,"a");setViewAttributes(d.writer,u.item.getAttribute("htmlLinkAttributes"),f)},{priority:"low"})}}}class MediaEmbedElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;if(!a.plugins.has("MediaEmbed")||a.config.get("mediaEmbed.previewsInData"))return;const n=a.model.schema,s=a.conversion,l=this.editor.plugins.get(DataFilter),c=this.editor.plugins.get(DataSchema),u=a.config.get("mediaEmbed.elementName");c.registerBlockElement({model:"media",view:u}),l.on("register:figure",()=>{s.for("upcast").add(viewToModelFigureAttributesConverter(l))}),l.on(`register:${u}`,(d,h)=>{h.model==="media"&&(n.extend("media",{allowAttributes:[getHtmlAttributeName(u),"htmlFigureAttributes"]}),s.for("upcast").add(viewToModelMediaAttributesConverter(l,u)),s.for("dataDowncast").add(modelToViewMediaAttributeConverter(u)),d.stop())})}}function viewToModelMediaAttributesConverter(o,a){const n=(s,l,c)=>{const u=l.viewItem;d(u,getHtmlAttributeName(a));function d(h,f){const p=o.processViewAttributes(h,c);p&&c.writer.setAttribute(f,p,l.modelRange)}};return s=>{s.on(`element:${a}`,n,{priority:"low"})}}function viewToModelFigureAttributesConverter(o){return a=>{a.on("element:figure",(n,s,l)=>{const c=s.viewItem;if(!s.modelRange||!c.hasClass("media"))return;const u=o.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlFigureAttributes",u,s.modelRange)},{priority:"low"})}}function modelToViewMediaAttributeConverter(o){return a=>{n(o,getHtmlAttributeName(o)),n("figure","htmlFigureAttributes");function n(s,l){a.on(`attribute:${l}:media`,(c,u,d)=>{if(!d.consumable.consume(u.item,c.name))return;const{attributeOldValue:h,attributeNewValue:f}=u,p=d.mapper.toViewElement(u.item),g=getDescendantElement(d.writer,p,s);updateViewAttributes(d.writer,h,f,g)})}}}class ScriptElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.plugins.get(DataFilter);a.on("register:script",(n,s)=>{const l=this.editor,c=l.model.schema,u=l.conversion;c.register("htmlScript",s.modelSchema),c.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),l.data.registerRawContentMatcher({name:"script"}),u.for("upcast").elementToElement({view:"script",model:viewToModelObjectConverter(s)}),u.for("upcast").add(viewToModelBlockAttributeConverter(s,a)),u.for("downcast").elementToElement({model:"htmlScript",view:(d,{writer:h})=>createObjectView("script",d,h)}),u.for("downcast").add(modelToViewBlockAttributeConverter(s)),n.stop()})}}class TableElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;if(!a.plugins.has("TableEditing"))return;const n=a.model.schema,s=a.conversion,l=a.plugins.get(DataFilter),c=a.plugins.get("TableUtils");l.on("register:figure",()=>{s.for("upcast").add(viewToModelFigureAttributeConverter(l))}),l.on("register:table",(u,d)=>{d.model==="table"&&(n.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),s.for("upcast").add(viewToModelTableAttributeConverter(l)),s.for("downcast").add(modelToViewTableAttributeConverter()),a.model.document.registerPostFixer(createHeadingRowsPostFixer(a.model,c)),u.stop())})}}function createHeadingRowsPostFixer(o,a){return n=>{const s=o.document.differ.getChanges();let l=!1;for(const c of s){if(c.type!="attribute"||c.attributeKey!="headingRows")continue;const u=c.range.start.nodeAfter,d=u.getAttribute("htmlTheadAttributes"),h=u.getAttribute("htmlTbodyAttributes");d&&!c.attributeNewValue?(n.removeAttribute("htmlTheadAttributes",u),l=!0):h&&c.attributeNewValue==a.getRows(u)&&(n.removeAttribute("htmlTbodyAttributes",u),l=!0)}return l}}function viewToModelTableAttributeConverter(o){return a=>{a.on("element:table",(n,s,l)=>{if(!s.modelRange)return;const c=s.viewItem;u(c,"htmlTableAttributes");for(const d of c.getChildren())d.is("element","thead")&&u(d,"htmlTheadAttributes"),d.is("element","tbody")&&u(d,"htmlTbodyAttributes");function u(d,h){const f=o.processViewAttributes(d,l);f&&l.writer.setAttribute(h,f,s.modelRange)}},{priority:"low"})}}function viewToModelFigureAttributeConverter(o){return a=>{a.on("element:figure",(n,s,l)=>{const c=s.viewItem;if(!s.modelRange||!c.hasClass("table"))return;const u=o.processViewAttributes(c,l);u&&l.writer.setAttribute("htmlFigureAttributes",u,s.modelRange)},{priority:"low"})}}function modelToViewTableAttributeConverter(){return o=>{a("table","htmlTableAttributes"),a("figure","htmlFigureAttributes"),a("thead","htmlTheadAttributes"),a("tbody","htmlTbodyAttributes");function a(n,s){o.on(`attribute:${s}:table`,(l,c,u)=>{if(!u.consumable.test(c.item,l.name))return;const d=u.mapper.toViewElement(c.item),h=getDescendantElement(u.writer,d,n);h&&(u.consumable.consume(c.item,l.name),updateViewAttributes(u.writer,c.attributeOldValue,c.attributeNewValue,h))})}}}class StyleElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.plugins.get(DataFilter);a.on("register:style",(n,s)=>{const l=this.editor,c=l.model.schema,u=l.conversion;c.register("htmlStyle",s.modelSchema),c.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),l.data.registerRawContentMatcher({name:"style"}),u.for("upcast").elementToElement({view:"style",model:viewToModelObjectConverter(s)}),u.for("upcast").add(viewToModelBlockAttributeConverter(s,a)),u.for("downcast").elementToElement({model:"htmlStyle",view:(d,{writer:h})=>createObjectView("style",d,h)}),u.for("downcast").add(modelToViewBlockAttributeConverter(s)),n.stop()})}}class ListElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;if(!a.plugins.has("ListEditing"))return;const n=a.model.schema,s=a.conversion,l=a.plugins.get(DataFilter),c=a.plugins.get("ListEditing"),u=a.plugins.get("ListUtils"),d=["ul","ol","li"];c.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:setViewAttributes}),c.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:setViewAttributes}),c.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:setViewAttributes}),l.on("register",(h,f)=>{if(!d.includes(f.view)||(h.stop(),n.checkAttribute("$block","htmlLiAttributes")))return;const p=d.map(g=>getHtmlAttributeName(g));n.extend("$listItem",{allowAttributes:p}),s.for("upcast").add(g=>{g.on("element:ul",viewToModelListAttributeConverter("htmlUlAttributes",l),{priority:"low"}),g.on("element:ol",viewToModelListAttributeConverter("htmlOlAttributes",l),{priority:"low"}),g.on("element:li",viewToModelListAttributeConverter("htmlLiAttributes",l),{priority:"low"})})}),c.on("postFixer",(h,{listNodes:f,writer:p})=>{for(const{node:g,previousNodeInList:v}of f)if(v){if(v.getAttribute("listType")==g.getAttribute("listType")){const b=getAttributeFromListType(v.getAttribute("listType")),w=v.getAttribute(b);!isEqual$1(g.getAttribute(b),w)&&p.model.schema.checkAttribute(g,b)&&(p.setAttribute(b,w,g),h.return=!0)}if(v.getAttribute("listItemId")==g.getAttribute("listItemId")){const b=v.getAttribute("htmlLiAttributes");!isEqual$1(g.getAttribute("htmlLiAttributes"),b)&&p.model.schema.checkAttribute(g,"htmlLiAttributes")&&(p.setAttribute("htmlLiAttributes",b,g),h.return=!0)}}}),c.on("postFixer",(h,{listNodes:f,writer:p})=>{for(const{node:g}of f){const v=g.getAttribute("listType");!u.isNumberedListType(v)&&g.getAttribute("htmlOlAttributes")&&(p.removeAttribute("htmlOlAttributes",g),h.return=!0),u.isNumberedListType(v)&&g.getAttribute("htmlUlAttributes")&&(p.removeAttribute("htmlUlAttributes",g),h.return=!0)}})}afterInit(){const a=this.editor;if(!a.commands.get("indentList"))return;const n=a.commands.get("indentList");this.listenTo(n,"afterExecute",(s,l)=>{a.model.change(c=>{for(const u of l){const d=getAttributeFromListType(u.getAttribute("listType"));a.model.schema.checkAttribute(u,d)&&c.setAttribute(d,{},u)}})})}}function viewToModelListAttributeConverter(o,a){return(n,s,l)=>{const c=s.viewItem;s.modelRange||Object.assign(s,l.convertChildren(s.viewItem,s.modelCursor));const u=a.processViewAttributes(c,l);for(const d of s.modelRange.getItems({shallow:!0}))d.hasAttribute("listItemId")&&(d.hasAttribute("htmlUlAttributes")||d.hasAttribute("htmlOlAttributes")||l.writer.model.schema.checkAttribute(d,o)&&l.writer.setAttribute(o,u||{},d))}}function getAttributeFromListType(o){return o==="numbered"||o=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}class HorizontalLineElementSupport extends Plugin{static get requires(){return[DataFilter]}static get pluginName(){return"HorizontalLineElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;if(!a.plugins.has("HorizontalLineEditing"))return;const n=a.model.schema,s=a.conversion,l=a.plugins.get(DataFilter);l.on("register:hr",(c,u)=>{u.model==="horizontalLine"&&(n.extend("horizontalLine",{allowAttributes:["htmlHrAttributes"]}),s.for("upcast").add(viewToModelBlockAttributeConverter(u,l)),s.for("downcast").add(modelToViewHorizontalLineAttributeConverter()),c.stop())})}}function modelToViewHorizontalLineAttributeConverter(){return o=>{o.on("attribute:htmlHrAttributes:horizontalLine",(a,n,s)=>{if(!s.consumable.test(n.item,a.name))return;const{attributeOldValue:l,attributeNewValue:c}=n,u=s.mapper.toViewElement(n.item),d=getDescendantElement(s.writer,u,"hr");d&&(updateViewAttributes(s.writer,l,c,d),s.consumable.consume(n.item,a.name))},{priority:"low"})}}class CustomElementSupport extends Plugin{static get requires(){return[DataFilter,DataSchema]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.plugins.get(DataFilter),n=this.editor.plugins.get(DataSchema);a.on("register:$customElement",(s,l)=>{s.stop();const c=this.editor,u=c.model.schema,d=c.conversion,h=c.editing.view.domConverter.unsafeElements,f=c.data.htmlProcessor.domConverter.preElements;u.register(l.model,l.modelSchema),u.extend(l.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),c.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),d.for("upcast").elementToElement({view:/.*/,model:(p,g)=>{if(p.name=="$comment"||!isValidElementName(p.name)||n.getDefinitionsForView(p.name).size)return null;h.includes(p.name)||h.push(p.name),f.includes(p.name)||f.push(p.name);const v=g.writer.createElement(l.model,{htmlElementName:p.name}),b=a.processViewAttributes(p,g);b&&g.writer.setAttribute("htmlCustomElementAttributes",b,v);let w;if(p.is("element","template")&&p.getCustomProperty("$rawContent"))w=p.getCustomProperty("$rawContent");else{const S=new UpcastWriter(p.document).createDocumentFragment(p),E=c.data.htmlProcessor.domConverter.viewToDom(S),T=E.firstChild;for(;T.firstChild;)E.appendChild(T.firstChild);T.remove(),w=c.data.htmlProcessor.htmlWriter.getHtml(E)}g.writer.setAttribute("htmlContent",w,v);for(const{item:x}of c.editing.view.createRangeIn(p))g.consumable.consume(x,{name:!0});return v},converterPriority:"low"}),d.for("editingDowncast").elementToElement({model:{name:l.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(p,{writer:g})=>{const v=p.getAttribute("htmlElementName"),b=g.createRawElement(v);return p.hasAttribute("htmlCustomElementAttributes")&&setViewAttributes(g,p.getAttribute("htmlCustomElementAttributes"),b),b}}),d.for("dataDowncast").elementToElement({model:{name:l.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(p,{writer:g})=>{const v=p.getAttribute("htmlElementName"),b=p.getAttribute("htmlContent"),w=g.createRawElement(v,null,(x,S)=>{S.setContentOf(x,b)});return p.hasAttribute("htmlCustomElementAttributes")&&setViewAttributes(g,p.getAttribute("htmlCustomElementAttributes"),w),w}})})}}function isValidElementName(o){try{document.createElement(o)}catch{return!1}return!0}class GeneralHtmlSupport extends Plugin{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[DataFilter,CodeBlockElementSupport,DualContentModelElementSupport,HeadingElementSupport,ImageElementSupport,MediaEmbedElementSupport,ScriptElementSupport,TableElementSupport,StyleElementSupport,ListElementSupport,HorizontalLineElementSupport,CustomElementSupport]}init(){const a=this.editor,n=a.plugins.get(DataFilter);n.loadAllowedEmptyElementsConfig(a.config.get("htmlSupport.allowEmpty")||[]),n.loadAllowedConfig(a.config.get("htmlSupport.allow")||[]),n.loadDisallowedConfig(a.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(a){const n=this.editor.plugins.get("DataSchema"),s=Array.from(n.getDefinitionsForView(a,!1)),l=s.find(c=>c.isInline&&!s[0].isObject);return l?l.model:getHtmlAttributeName(a)}addModelHtmlClass(a,n,s){const l=this.editor.model,c=this.getGhsAttributeNameForElement(a);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,s,c))modifyGhsAttribute(u,d,c,"classes",h=>{for(const f of toArray$2(n))h.add(f)})})}removeModelHtmlClass(a,n,s){const l=this.editor.model,c=this.getGhsAttributeNameForElement(a);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,s,c))modifyGhsAttribute(u,d,c,"classes",h=>{for(const f of toArray$2(n))h.delete(f)})})}setModelHtmlAttributes(a,n,s){const l=this.editor.model,c=this.getGhsAttributeNameForElement(a);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,s,c))modifyGhsAttribute(u,d,c,"attributes",h=>{for(const[f,p]of Object.entries(n))h.set(f,p)})})}removeModelHtmlAttributes(a,n,s){const l=this.editor.model,c=this.getGhsAttributeNameForElement(a);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,s,c))modifyGhsAttribute(u,d,c,"attributes",h=>{for(const f of toArray$2(n))h.delete(f)})})}setModelHtmlStyles(a,n,s){const l=this.editor.model,c=this.getGhsAttributeNameForElement(a);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,s,c))modifyGhsAttribute(u,d,c,"styles",h=>{for(const[f,p]of Object.entries(n))h.set(f,p)})})}removeModelHtmlStyles(a,n,s){const l=this.editor.model,c=this.getGhsAttributeNameForElement(a);l.change(u=>{for(const d of getItemsToUpdateGhsAttribute(l,s,c))modifyGhsAttribute(u,d,c,"styles",h=>{for(const f of toArray$2(n))h.delete(f)})})}}function*getItemsToUpdateGhsAttribute(o,a,n){if(a)if(!(Symbol.iterator in a)&&a.is("documentSelection")&&a.isCollapsed)o.schema.checkAttributeInSelection(a,n)&&(yield a);else for(const s of getValidRangesForSelectable(o,a,n))yield*s.getItems({shallow:!0})}function getValidRangesForSelectable(o,a,n){return!(Symbol.iterator in a)&&(a.is("node")||a.is("$text")||a.is("$textProxy"))?o.schema.checkAttribute(a,n)?[o.createRangeOn(a)]:[]:o.schema.getValidRanges(o.createSelection(a).getRanges(),n)}class HtmlComment extends Plugin{static get pluginName(){return"HtmlComment"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=new Map;a.data.processor.skipComments=!1,a.model.schema.addAttributeCheck((s,l)=>{if(s.endsWith("$root")&&l.startsWith("$comment"))return!0}),a.conversion.for("upcast").elementToMarker({view:"$comment",model:s=>{const c=`$comment:${uid()}`,u=s.getCustomProperty("$rawContent");return n.set(c,u),c}}),a.conversion.for("dataDowncast").markerToElement({model:"$comment",view:(s,{writer:l})=>{let c;for(const f of this.editor.model.document.getRootNames())if(c=this.editor.model.document.getRoot(f),c.hasAttribute(s.markerName))break;const u=s.markerName,d=c.getAttribute(u),h=l.createUIElement("$comment");return l.setCustomProperty("$rawContent",d,h),h}}),a.model.document.registerPostFixer(s=>{let l=!1;const c=a.model.document.differ.getChangedMarkers().filter(u=>u.name.startsWith("$comment:"));for(const u of c){const{oldRange:d,newRange:h}=u.data;if(!(d&&h&&d.root==h.root)){if(d){const f=d.root;f.hasAttribute(u.name)&&(s.removeAttribute(u.name,f),l=!0)}if(h){const f=h.root;f.rootName=="$graveyard"?(s.removeMarker(u.name),l=!0):f.hasAttribute(u.name)||(s.setAttribute(u.name,n.get(u.name)||"",f),l=!0)}}}return l}),a.data.on("set",()=>{for(const s of a.model.markers.getMarkersGroup("$comment"))this.removeHtmlComment(s.name)},{priority:"high"}),a.model.on("deleteContent",(s,[l])=>{for(const c of l.getRanges()){const u=a.model.schema.getLimitElement(c),d=a.model.createPositionAt(u,0),h=a.model.createPositionAt(u,"end");let f;d.isTouching(c.start)&&h.isTouching(c.end)?f=this.getHtmlCommentsInRange(a.model.createRange(d,h)):f=this.getHtmlCommentsInRange(c,{skipBoundaries:!0});for(const p of f)this.removeHtmlComment(p)}},{priority:"high"})}createHtmlComment(a,n){const s=uid(),c=this.editor.model,u=c.document.getRoot(a.root.rootName),d=`$comment:${s}`;return c.change(h=>{const f=h.createRange(a);return h.addMarker(d,{usingOperation:!0,affectsData:!0,range:f}),h.setAttribute(d,n,u),d})}removeHtmlComment(a){const n=this.editor,s=n.model.markers.get(a);return s?(n.model.change(l=>{l.removeMarker(s)}),!0):!1}getHtmlCommentData(a){const s=this.editor.model.markers.get(a);if(!s)return null;let l="";for(const c of this.editor.model.document.getRoots())if(c.hasAttribute(a)){l=c.getAttribute(a);break}return{content:l,position:s.getStart()}}getHtmlCommentsInRange(a,{skipBoundaries:n=!1}={}){const s=!n;return Array.from(this.editor.model.markers.getMarkersGroup("$comment")).filter(c=>l(c,a)).map(c=>c.name);function l(c,u){const d=c.getRange().start;return(d.isAfter(u.start)||s&&d.isEqual(u.start))&&(d.isBefore(u.end)||s&&d.isEqual(u.end))}}}class HtmlPageDataProcessor extends HtmlDataProcessor{toView(a){if(!/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(a.trim().slice(0,1e4)))return super.toView(a);let n="",s="";a=a.trim().replace(/<\?xml\s[^?]*\?>/i,d=>(s=d,"")),a=a.trim().replace(/^<!DOCTYPE\s[^>]*?>/i,d=>(n=d,""));const l=this._toDom(a),c=this.domConverter.domToView(l,{skipComments:this.skipComments}),u=new UpcastWriter(c.document);return u.setCustomProperty("$fullPageDocument",l.ownerDocument.documentElement.outerHTML,c),n&&u.setCustomProperty("$fullPageDocType",n,c),s&&u.setCustomProperty("$fullPageXmlDeclaration",s,c),c}toData(a){let n=super.toData(a);const s=a.getCustomProperty("$fullPageDocument"),l=a.getCustomProperty("$fullPageDocType"),c=a.getCustomProperty("$fullPageXmlDeclaration");return s&&(n=s.replace(/<\/body\s*>/,n+"$&"),l&&(n=l+`
`+n),c&&(n=c+`
`+n)),n}}class FullPage extends Plugin{static get pluginName(){return"FullPage"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=["$fullPageDocument","$fullPageDocType","$fullPageXmlDeclaration"];a.data.processor=new HtmlPageDataProcessor(a.data.viewDocument),a.model.schema.extend("$root",{allowAttributes:n}),a.data.on("toModel",(s,[l])=>{const c=a.model.document.getRoot();a.model.change(u=>{for(const d of n){const h=l.getCustomProperty(d);h&&u.setAttribute(d,h,c)}})},{priority:"low"}),a.data.on("toView",(s,[l])=>{if(!l.is("rootElement"))return;const c=l,u=s.return;if(!c.hasAttribute("$fullPageDocument"))return;const d=new UpcastWriter(u.document);for(const h of n){const f=c.getAttribute(h);f&&d.setCustomProperty(h,f,u)}},{priority:"low"}),a.data.on("set",()=>{const s=a.model.document.getRoot();a.model.change(l=>{for(const c of n)s.hasAttribute(c)&&l.removeAttribute(c,s)})},{priority:"high"}),a.data.on("get",(s,l)=>{l[0]||(l[0]={}),l[0].trim=!1},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function createInlineImageViewElement(o){return o.createContainerElement("span",{class:"image-inline"},o.createEmptyElement("img"))}function createBlockImageViewElement(o){return o.createContainerElement("figure",{class:"image"},[o.createEmptyElement("img"),o.createSlot("children")])}function getImgViewElementMatcher(o,a){const n=o.plugins.get("ImageUtils"),s=o.plugins.has("ImageInlineEditing")&&o.plugins.has("ImageBlockEditing");return c=>n.isInlineImageView(c)?s&&(c.getStyle("display")=="block"||c.findAncestor(n.isBlockImageView)?"imageBlock":"imageInline")!==a?null:l(c):null;function l(c){const u={name:!0};return c.hasAttribute("src")&&(u.attributes=["src"]),u}}function determineImageTypeForInsertionAtSelection(o,a){const n=first(a.getSelectedBlocks());return!n||o.isObject(n)||n.isEmpty&&n.name!="listItem"?"imageBlock":"imageInline"}function getSizeValueIfInPx(o){return o&&o.endsWith("px")?parseInt(o):null}function widthAndHeightStylesAreBothSet(o){const a=getSizeValueIfInPx(o.getStyle("width")),n=getSizeValueIfInPx(o.getStyle("height"));return!!(a&&n)}const IMAGE_WIDGETS_CLASSES_MATCH_REGEXP=/^(image|image-inline)$/;class ImageUtils extends Plugin{constructor(){super(...arguments);M(this,"_domEmitter",new(DomEmitterMixin()))}static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(n){return this.isInlineImage(n)||this.isBlockImage(n)}isInlineImageView(n){return!!n&&n.is("element","img")}isBlockImageView(n){return!!n&&n.is("element","figure")&&n.hasClass("image")}insertImage(n={},s=null,l=null,c={}){const u=this.editor,d=u.model,h=d.document.selection,f=determineImageTypeForInsertion(u,s||h,l);n={...Object.fromEntries(h.getAttributes()),...n};for(const p in n)d.schema.checkAttribute(f,p)||delete n[p];return d.change(p=>{const{setImageSizes:g=!0}=c,v=p.createElement(f,n);return d.insertObject(v,s,null,{setSelection:"on",findOptimalPosition:!s&&f!="imageInline"?"auto":void 0}),v.parent?(g&&this.setImageNaturalSizeAttributes(v),v):null})}setImageNaturalSizeAttributes(n){const s=n.getAttribute("src");s&&(n.getAttribute("width")||n.getAttribute("height")||this.editor.model.change(l=>{const c=new global$1.window.Image;this._domEmitter.listenTo(c,"load",()=>{!n.getAttribute("width")&&!n.getAttribute("height")&&this.editor.model.enqueueChange(l.batch,u=>{u.setAttribute("width",c.naturalWidth,n),u.setAttribute("height",c.naturalHeight,n)}),this._domEmitter.stopListening(c,"load")}),c.src=s}))}getClosestSelectedImageWidget(n){const s=n.getFirstPosition();if(!s)return null;const l=n.getSelectedElement();if(l&&this.isImageWidget(l))return l;let c=s.parent;for(;c;){if(c.is("element")&&this.isImageWidget(c))return c;c=c.parent}return null}getClosestSelectedImageElement(n){const s=n.getSelectedElement();return this.isImage(s)?s:n.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(n){return n.findAncestor({classes:IMAGE_WIDGETS_CLASSES_MATCH_REGEXP})}isImageAllowed(){const s=this.editor.model.document.selection;return isImageAllowedInParent(this.editor,s)&&isNotInsideImage(s)}toImageWidget(n,s,l){return s.setCustomProperty("image",!0,n),toWidget(n,s,{label:()=>{const d=this.findViewImgElement(n).getAttribute("alt");return d?`${d} ${l}`:l}})}isImageWidget(n){return!!n.getCustomProperty("image")&&isWidget(n)}isBlockImage(n){return!!n&&n.is("element","imageBlock")}isInlineImage(n){return!!n&&n.is("element","imageInline")}findViewImgElement(n){if(this.isInlineImageView(n))return n;const s=this.editor.editing.view;for(const{item:l}of s.createRangeIn(n))if(this.isInlineImageView(l))return l}destroy(){return this._domEmitter.stopListening(),super.destroy()}}function isImageAllowedInParent(o,a){if(determineImageTypeForInsertion(o,a,null)=="imageBlock"){const s=getInsertImageParent(a,o.model);if(o.model.schema.checkChild(s,"imageBlock"))return!0}else if(o.model.schema.checkChild(a.focus,"imageInline"))return!0;return!1}function isNotInsideImage(o){return[...o.focus.getAncestors()].every(a=>!a.is("element","imageBlock"))}function getInsertImageParent(o,a){const s=findOptimalInsertionRange(o,a).start.parent;return s.isEmpty&&!s.is("element","$root")?s.parent:s}function determineImageTypeForInsertion(o,a,n){const s=o.model.schema,l=o.config.get("image.insert.type");return o.plugins.has("ImageBlockEditing")?o.plugins.has("ImageInlineEditing")?n||(l==="inline"?"imageInline":l!=="auto"?"imageBlock":a.is("selection")?determineImageTypeForInsertionAtSelection(s,a):s.checkChild(a,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}const IMAGE_URL_REGEXP=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));class AutoImage extends Plugin{constructor(n){super(n);M(this,"_timeoutId");M(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Clipboard,ImageUtils,Undo,Delete]}static get pluginName(){return"AutoImage"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model.document,l=n.plugins.get("ClipboardPipeline");this.listenTo(l,"inputTransformation",()=>{const c=s.selection.getFirstRange(),u=LivePosition.fromPosition(c.start);u.stickiness="toPrevious";const d=LivePosition.fromPosition(c.end);d.stickiness="toNext",s.once("change:data",()=>{this._embedImageBetweenPositions(u,d),u.detach(),d.detach()},{priority:"high"})}),n.commands.get("undo").on("execute",()=>{this._timeoutId&&(global$1.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedImageBetweenPositions(n,s){const l=this.editor,c=new LiveRange(n,s),u=c.getWalker({ignoreElementEnd:!0}),d=Object.fromEntries(l.model.document.selection.getAttributes()),h=this.editor.plugins.get("ImageUtils");let f="";for(const p of u)p.item.is("$textProxy")&&(f+=p.item.data);if(f=f.trim(),!f.match(IMAGE_URL_REGEXP)){c.detach();return}this._positionToInsert=LivePosition.fromPosition(n),this._timeoutId=setTimeout(()=>{if(!l.commands.get("insertImage").isEnabled){c.detach();return}l.model.change(v=>{this._timeoutId=null,v.remove(c),c.detach();let b;this._positionToInsert.root.rootName!=="$graveyard"&&(b=this._positionToInsert.toPosition()),h.insertImage({...d,src:f},b),this._positionToInsert.detach(),this._positionToInsert=null}),l.plugins.get("Delete").requestUndoOnBackspace()},100)}}class ImageTextAlternativeCommand extends Command{refresh(){const s=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!s,this.isEnabled&&s.hasAttribute("alt")?this.value=s.getAttribute("alt"):this.value=!1}execute(a){const n=this.editor,s=n.plugins.get("ImageUtils"),l=n.model,c=s.getClosestSelectedImageElement(l.document.selection);l.change(u=>{u.setAttribute("alt",a.newValue,c)})}}class ImageTextAlternativeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new ImageTextAlternativeCommand(this.editor))}}class TextAlternativeFormView extends View$1{constructor(n){super(n);M(this,"focusTracker");M(this,"keystrokes");M(this,"labeledInput");M(this,"saveButtonView");M(this,"cancelButtonView");M(this,"_focusables");M(this,"_focusCycler");const s=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(s("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(s("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(n,s,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:s,tooltip:!0}),u.extendTemplate({attributes:{class:l}}),c&&u.delegate("execute").to(this,c),u}_createLabeledInputView(){const n=this.locale.t,s=new LabeledFieldView(this.locale,createLabeledInputText);return s.label=n("Text alternative"),s}}function repositionContextualBalloon$1(o){const a=o.plugins.get("ContextualBalloon");if(o.plugins.get("ImageUtils").getClosestSelectedImageWidget(o.editing.view.document.selection)){const s=getBalloonPositionData(o);a.updatePosition(s)}}function getBalloonPositionData(o){const a=o.editing.view,n=BalloonPanelView.defaultPositions,s=o.plugins.get("ImageUtils");return{target:a.domConverter.mapViewToDom(s.getClosestSelectedImageWidget(a.document.selection)),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast,n.viewportStickyNorth]}}class ImageTextAlternativeUI extends Plugin{constructor(){super(...arguments);M(this,"_balloon");M(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){const n=this.editor,s=n.t;n.ui.componentFactory.add("imageTextAlternative",l=>{const c=n.commands.get("imageTextAlternative"),u=new ButtonView(l);return u.set({label:s("Change image text alternative"),icon:icons.textAlternative,tooltip:!0}),u.bind("isEnabled").to(c,"isEnabled"),u.bind("isOn").to(c,"value",d=>!!d),this.listenTo(u,"execute",()=>{this._showForm()}),u})}_createForm(){const n=this.editor,l=n.editing.view.document,c=n.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(TextAlternativeFormView))(n.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{n.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(u,d)=>{this._hideForm(!0),d()}),this.listenTo(n.ui,"update",()=>{c.getClosestSelectedImageWidget(l.selection)?this._isVisible&&repositionContextualBalloon$1(n):this._hideForm(!0)}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();const n=this.editor,s=n.commands.get("imageTextAlternative"),l=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(n)}),l.fieldView.value=l.fieldView.element.value=s.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(n=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),n&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}class ImageTextAlternative extends Plugin{static get requires(){return[ImageTextAlternativeEditing,ImageTextAlternativeUI]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}}function upcastImageFigure(o){const a=(n,s,l)=>{if(!l.consumable.test(s.viewItem,{name:!0,classes:"image"}))return;const c=o.findViewImgElement(s.viewItem);if(!c||!l.consumable.test(c,{name:!0}))return;l.consumable.consume(s.viewItem,{name:!0,classes:"image"});const u=l.convertItem(c,s.modelCursor),d=first(u.modelRange.getItems());if(!d){l.consumable.revert(s.viewItem,{name:!0,classes:"image"});return}l.convertChildren(s.viewItem,d),l.updateConversionResult(d,s)};return n=>{n.on("element:figure",a)}}function upcastPicture(o){const a=["srcset","media","type","sizes"],n=(s,l,c)=>{const u=l.viewItem;if(!c.consumable.test(u,{name:!0}))return;const d=new Map;for(const p of u.getChildren())if(p.is("element","source")){const g={};for(const v of a)p.hasAttribute(v)&&c.consumable.test(p,{attributes:v})&&(g[v]=p.getAttribute(v));Object.keys(g).length&&d.set(p,g)}const h=o.findViewImgElement(u);if(!h)return;let f=l.modelCursor.parent;if(!f.is("element","imageBlock")){const p=c.convertItem(h,l.modelCursor);l.modelRange=p.modelRange,l.modelCursor=p.modelCursor,f=first(p.modelRange.getItems())}c.consumable.consume(u,{name:!0});for(const[p,g]of d)c.consumable.consume(p,{attributes:Object.keys(g)});d.size&&c.writer.setAttribute("sources",Array.from(d.values()),f),c.convertChildren(u,f)};return s=>{s.on("element:picture",n)}}function downcastSrcsetAttribute(o,a){const n=(s,l,c)=>{if(!c.consumable.consume(l.item,s.name))return;const u=c.writer,d=c.mapper.toViewElement(l.item),h=o.findViewImgElement(d);l.attributeNewValue===null?(u.removeAttribute("srcset",h),u.removeAttribute("sizes",h)):l.attributeNewValue&&(u.setAttribute("srcset",l.attributeNewValue,h),u.setAttribute("sizes","100vw",h))};return s=>{s.on(`attribute:srcset:${a}`,n)}}function downcastSourcesAttribute(o){const a=(n,s,l)=>{if(!l.consumable.consume(s.item,n.name))return;const c=l.writer,u=l.mapper.toViewElement(s.item),d=o.findViewImgElement(u),h=s.attributeNewValue;if(h&&h.length){const f=[];let p=d.parent;for(;p&&p.is("attributeElement");){const b=p.parent;c.unwrap(c.createRangeOn(d),p),f.unshift(p),p=b}const g=d.parent.is("element","picture"),v=g?d.parent:c.createContainerElement("picture",null);g||c.insert(c.createPositionBefore(d),v),c.remove(c.createRangeIn(v)),c.insert(c.createPositionAt(v,"end"),h.map(b=>c.createEmptyElement("source",b))),c.move(c.createRangeOn(d),c.createPositionAt(v,"end"));for(const b of f)c.wrap(c.createRangeOn(v),b)}else if(d.parent.is("element","picture")){const f=d.parent;c.move(c.createRangeOn(d),c.createPositionBefore(f)),c.remove(f)}};return n=>{n.on("attribute:sources:imageBlock",a),n.on("attribute:sources:imageInline",a)}}function downcastImageAttribute(o,a,n){const s=(l,c,u)=>{if(!u.consumable.consume(c.item,l.name))return;const d=u.writer,h=u.mapper.toViewElement(c.item),f=o.findViewImgElement(h);d.setAttribute(c.attributeKey,c.attributeNewValue||"",f)};return l=>{l.on(`attribute:${n}:${a}`,s)}}class ImageLoadObserver extends Observer{observe(a){this.listenTo(a,"load",(n,s)=>{const l=s.target;this.checkShouldIgnoreEventFromTarget(l)||l.tagName=="IMG"&&this._fireEvents(s)},{useCapture:!0})}stopObserving(a){this.stopListening(a)}_fireEvents(a){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",a))}}class InsertImageCommand extends Command{constructor(a){super(a);const n=a.config.get("image.insert.type");a.plugins.has("ImageBlockEditing")||n==="block"&&logWarning("image-block-plugin-required"),a.plugins.has("ImageInlineEditing")||n==="inline"&&logWarning("image-inline-plugin-required")}refresh(){const a=this.editor.plugins.get("ImageUtils");this.isEnabled=a.isImageAllowed()}execute(a){const n=toArray$2(a.source),s=this.editor.model.document.selection,l=this.editor.plugins.get("ImageUtils"),c=Object.fromEntries(s.getAttributes());n.forEach((u,d)=>{const h=s.getSelectedElement();if(typeof u=="string"&&(u={src:u}),d&&h&&l.isImage(h)){const f=this.editor.model.createPositionAfter(h);l.insertImage({...u,...c},f,a.imageType)}else a.breakBlock?l.insertImage({...u,...c},s.getFirstPosition(),a.imageType):l.insertImage({...u,...c},null,a.imageType)})}}class ReplaceImageSourceCommand extends Command{constructor(a){super(a),this.decorate("cleanupImage")}refresh(){const n=this.editor.plugins.get("ImageUtils"),s=this.editor.model.document.selection.getSelectedElement();this.isEnabled=n.isImage(s),this.value=this.isEnabled?s.getAttribute("src"):null}execute(a){const n=this.editor.model.document.selection.getSelectedElement(),s=this.editor.plugins.get("ImageUtils");this.editor.model.change(l=>{l.setAttribute("src",a.source,n),this.cleanupImage(l,n),s.setImageNaturalSizeAttributes(n)})}cleanupImage(a,n){a.removeAttribute("srcset",n),a.removeAttribute("sizes",n),a.removeAttribute("sources",n),a.removeAttribute("width",n),a.removeAttribute("height",n),a.removeAttribute("alt",n)}}class ImageEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.conversion;a.editing.view.addObserver(ImageLoadObserver),n.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});const s=new InsertImageCommand(a),l=new ReplaceImageSourceCommand(a);a.commands.add("insertImage",s),a.commands.add("replaceImageSource",l),a.commands.add("imageInsert",s)}}class ImageSizeAttributes extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(a){const n=this.editor,s=n.plugins.get("ImageUtils"),l=a==="imageBlock"?"figure":"img";n.conversion.for("upcast").attributeToAttribute({view:{name:l,styles:{width:/.+/}},model:{key:"width",value:u=>widthAndHeightStylesAreBothSet(u)?getSizeValueIfInPx(u.getStyle("width")):null}}).attributeToAttribute({view:{name:l,key:"width"},model:"width"}).attributeToAttribute({view:{name:l,styles:{height:/.+/}},model:{key:"height",value:u=>widthAndHeightStylesAreBothSet(u)?getSizeValueIfInPx(u.getStyle("height")):null}}).attributeToAttribute({view:{name:l,key:"height"},model:"height"}),n.conversion.for("editingDowncast").add(u=>{c(u,"width","width",!0,!0),c(u,"height","height",!0,!0)}),n.conversion.for("dataDowncast").add(u=>{c(u,"width","width",!1),c(u,"height","height",!1)});function c(u,d,h,f,p=!1){u.on(`attribute:${d}:${a}`,(g,v,b)=>{if(!b.consumable.consume(v.item,g.name))return;const w=b.writer,x=b.mapper.toViewElement(v.item),S=s.findViewImgElement(x);v.attributeNewValue!==null?w.setAttribute(h,v.attributeNewValue,S):w.removeAttribute(h,S);const E=v.item.getAttribute("width"),T=v.item.getAttribute("height"),C=E&&T;if(C&&p&&w.setAttribute("loading","lazy",S),v.item.hasAttribute("sources"))return;const A=v.item.hasAttribute("resizedWidth");a==="imageInline"&&!A&&!f||C&&w.setStyle("aspect-ratio",`${E}/${T}`,S)})}}}class ImageTypeCommand extends Command{constructor(n,s){super(n);M(this,"_modelElementName");this._modelElementName=s}refresh(){const s=this.editor.plugins.get("ImageUtils"),l=s.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=s.isInlineImage(l):this.isEnabled=s.isBlockImage(l)}execute(n={}){const s=this.editor,l=this.editor.model,c=s.plugins.get("ImageUtils"),u=c.getClosestSelectedImageElement(l.document.selection),d=Object.fromEntries(u.getAttributes());return!d.src&&!d.uploadId?null:l.change(h=>{const{setImageSizes:f=!0}=n,p=Array.from(l.markers).filter(b=>b.getRange().containsItem(u)),g=c.insertImage(d,l.createSelection(u,"on"),this._modelElementName,{setImageSizes:f});if(!g)return null;const v=h.createRangeOn(g);for(const b of p){const w=b.getRange(),x=w.root.rootName!="$graveyard"?w.getJoined(v,!0):v;h.updateMarker(b,{range:x})}return{oldElement:u,newElement:g}})}}class ImagePlaceholder extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){const a=this.editor.model.schema;a.isRegistered("imageBlock")&&a.extend("imageBlock",{allowAttributes:["placeholder"]}),a.isRegistered("imageInline")&&a.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){const a=this.editor,n=a.conversion,s=a.plugins.get("ImageUtils");n.for("editingDowncast").add(l=>{l.on("attribute:placeholder",(c,u,d)=>{if(!d.consumable.test(u.item,c.name)||!u.item.is("element","imageBlock")&&!u.item.is("element","imageInline"))return;d.consumable.consume(u.item,c.name);const h=d.writer,f=d.mapper.toViewElement(u.item),p=s.findViewImgElement(f);u.attributeNewValue?(h.addClass("image_placeholder",p),h.setStyle("background-image",`url(${u.attributeNewValue})`,p),h.setCustomProperty("editingPipeline:doNotReuseOnce",!0,p)):(h.removeClass("image_placeholder",p),h.removeStyle("background-image",p))})})}_setupLoadListener(){const a=this.editor,n=a.model,s=a.editing,l=s.view,c=a.plugins.get("ImageUtils");l.addObserver(ImageLoadObserver),this.listenTo(l.document,"imageLoaded",(u,d)=>{const h=l.domConverter.mapDomToView(d.target);if(!h)return;const f=c.getImageWidgetFromImageView(h);if(!f)return;const p=s.mapper.toModelElement(f);!p||!p.hasAttribute("placeholder")||n.enqueueChange({isUndoable:!1},g=>{g.removeAttribute("placeholder",p)})})}}class ImageBlockEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),a.plugins.has("ImageInlineEditing")&&(a.commands.add("imageTypeBlock",new ImageTypeCommand(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){const a=this.editor,n=a.t,s=a.conversion,l=a.plugins.get("ImageUtils");s.for("dataDowncast").elementToStructure({model:"imageBlock",view:(c,{writer:u})=>createBlockImageViewElement(u)}),s.for("editingDowncast").elementToStructure({model:"imageBlock",view:(c,{writer:u})=>l.toImageWidget(createBlockImageViewElement(u),u,n("image widget"))}),s.for("downcast").add(downcastImageAttribute(l,"imageBlock","src")).add(downcastImageAttribute(l,"imageBlock","alt")).add(downcastSrcsetAttribute(l,"imageBlock")),s.for("upcast").elementToElement({view:getImgViewElementMatcher(a,"imageBlock"),model:(c,{writer:u})=>u.createElement("imageBlock",c.hasAttribute("src")?{src:c.getAttribute("src")}:void 0)}).add(upcastImageFigure(l))}_setupClipboardIntegration(){const a=this.editor,n=a.model,s=a.editing.view,l=a.plugins.get("ImageUtils"),c=a.plugins.get("ClipboardPipeline");this.listenTo(c,"inputTransformation",(u,d)=>{const h=Array.from(d.content.getChildren());let f;if(!h.every(l.isInlineImageView))return;d.targetRanges?f=a.editing.mapper.toModelRange(d.targetRanges[0]):f=n.document.selection.getFirstRange();const p=n.createSelection(f);if(determineImageTypeForInsertionAtSelection(n.schema,p)==="imageBlock"){const g=new UpcastWriter(s.document),v=h.map(b=>g.createElement("figure",{class:"image"},b));d.content=g.createDocumentFragment(v)}}),this.listenTo(c,"contentInsertion",(u,d)=>{d.method==="paste"&&n.change(h=>{const f=h.createRangeIn(d.content);for(const p of f.getItems())p.is("element","imageBlock")&&l.setImageNaturalSizeAttributes(p)})})}}class ImageInsertFormView extends View$1{constructor(n,s=[]){super(n);M(this,"focusTracker");M(this,"keystrokes");M(this,"_focusables");M(this,"_focusCycler");M(this,"children");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusables=new ViewCollection,this.children=this.createCollection(),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(const l of s)this.children.add(l),this._focusables.add(l),l instanceof CollapsibleView&&this._focusables.addMany(l.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),submitHandler({view:this});for(const s of this._focusables)this.focusTracker.add(s.element);this.keystrokes.listenTo(this.element);const n=s=>s.stopPropagation();this.keystrokes.set("arrowright",n),this.keystrokes.set("arrowleft",n),this.keystrokes.set("arrowup",n),this.keystrokes.set("arrowdown",n)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}class ImageInsertUI extends Plugin{constructor(n){super(n);M(this,"dropdownView");M(this,"_integrations",new Map);n.config.define("image.insert.integrations",["upload","assetManager","url"])}static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const n=this.editor,s=n.model.document.selection,l=n.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(n.model.document,"change",()=>{this.isImageSelected=l.isImage(s.getSelectedElement())});const c=d=>this._createToolbarComponent(d),u=d=>this._createMenuBarComponent(d);n.ui.componentFactory.add("insertImage",c),n.ui.componentFactory.add("imageInsert",c),n.ui.componentFactory.add("menuBar:insertImage",u)}registerIntegration({name:n,observable:s,buttonViewCreator:l,formViewCreator:c,menuBarButtonViewCreator:u,requiresForm:d=!1,override:h=!1}){this._integrations.has(n)&&!h&&logWarning("image-insert-integration-exists",{name:n}),this._integrations.set(n,{observable:s,buttonViewCreator:l,menuBarButtonViewCreator:u,formViewCreator:c,requiresForm:d})}_createToolbarComponent(n){const s=this.editor,l=n.t,c=this._prepareIntegrations();if(!c.length)return null;let u;const d=c[0];if(c.length==1){if(!d.requiresForm)return d.buttonViewCreator(!0);u=d.buttonViewCreator(!0)}else{const p=d.buttonViewCreator(!1);u=new SplitButtonView(n,p),u.tooltip=!0,u.bind("label").to(this,"isImageSelected",g=>l(g?"Replace image":"Insert image"))}const h=this.dropdownView=createDropdown(n,u),f=c.map(({observable:p})=>typeof p=="function"?p():p);return h.bind("isEnabled").toMany(f,"isEnabled",(...p)=>p.some(g=>g)),h.once("change:isOpen",()=>{const p=c.flatMap(({formViewCreator:v})=>v(c.length==1)),g=new ImageInsertFormView(s.locale,p);h.panelView.children.add(g)}),h}_createMenuBarComponent(n){const s=n.t,l=this._prepareIntegrations();if(!l.length)return null;const c=l.flatMap(({menuBarButtonViewCreator:h})=>h(l.length==1)),u=new MenuBarMenuView(n),d=new MenuBarMenuListView(n);u.panelView.children.add(d),u.buttonView.set({icon:icons.image,label:s("Image")});for(const h of c){const f=new MenuBarMenuListItemView(n,u);f.children.add(h),d.items.add(f),h.delegate("execute").to(u)}return u}_prepareIntegrations(){const s=this.editor.config.get("image.insert.integrations"),l=[];if(!s.length)return logWarning("image-insert-integrations-not-specified"),l;for(const c of s){if(!this._integrations.has(c)){["upload","assetManager","url"].includes(c)||logWarning("image-insert-unknown-integration",{item:c});continue}l.push(this._integrations.get(c))}return l.length||logWarning("image-insert-integrations-not-registered"),l}}class ImageBlock extends Plugin{static get requires(){return[ImageBlockEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}}class ImageInlineEditing extends Plugin{static get requires(){return[ImageEditing,ImageSizeAttributes,ImageUtils,ImagePlaceholder,ClipboardPipeline]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),a.plugins.has("ImageBlockEditing")&&(a.commands.add("imageTypeInline",new ImageTypeCommand(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){const a=this.editor,n=a.t,s=a.conversion,l=a.plugins.get("ImageUtils");s.for("dataDowncast").elementToElement({model:"imageInline",view:(c,{writer:u})=>u.createEmptyElement("img")}),s.for("editingDowncast").elementToStructure({model:"imageInline",view:(c,{writer:u})=>l.toImageWidget(createInlineImageViewElement(u),u,n("image widget"))}),s.for("downcast").add(downcastImageAttribute(l,"imageInline","src")).add(downcastImageAttribute(l,"imageInline","alt")).add(downcastSrcsetAttribute(l,"imageInline")),s.for("upcast").elementToElement({view:getImgViewElementMatcher(a,"imageInline"),model:(c,{writer:u})=>u.createElement("imageInline",c.hasAttribute("src")?{src:c.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){const a=this.editor,n=a.model,s=a.editing.view,l=a.plugins.get("ImageUtils"),c=a.plugins.get("ClipboardPipeline");this.listenTo(c,"inputTransformation",(u,d)=>{const h=Array.from(d.content.getChildren());let f;if(!h.every(l.isBlockImageView))return;d.targetRanges?f=a.editing.mapper.toModelRange(d.targetRanges[0]):f=n.document.selection.getFirstRange();const p=n.createSelection(f);if(determineImageTypeForInsertionAtSelection(n.schema,p)==="imageInline"){const g=new UpcastWriter(s.document),v=h.map(b=>b.childCount===1?(Array.from(b.getAttributes()).forEach(w=>g.setAttribute(...w,l.findViewImgElement(b))),b.getChild(0)):b);d.content=g.createDocumentFragment(v)}}),this.listenTo(c,"contentInsertion",(u,d)=>{d.method==="paste"&&n.change(h=>{const f=h.createRangeIn(d.content);for(const p of f.getItems())p.is("element","imageInline")&&l.setImageNaturalSizeAttributes(p)})})}}class ImageInline extends Plugin{static get requires(){return[ImageInlineEditing,Widget,ImageTextAlternative,ImageInsertUI]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}}class ImageCaptionUtils extends Plugin{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}getCaptionFromImageModelElement(a){for(const n of a.getChildren())if(n&&n.is("element","caption"))return n;return null}getCaptionFromModelSelection(a){const n=this.editor.plugins.get("ImageUtils"),s=a.getFirstPosition().findAncestor("caption");return s&&n.isBlockImage(s.parent)?s:null}matchImageCaptionViewElement(a){const n=this.editor.plugins.get("ImageUtils");return a.name=="figcaption"&&n.isBlockImageView(a.parent)?{name:!0}:null}}class ToggleImageCaptionCommand extends Command{refresh(){const a=this.editor,n=a.plugins.get("ImageCaptionUtils"),s=a.plugins.get("ImageUtils");if(!a.plugins.has(ImageBlockEditing)){this.isEnabled=!1,this.value=!1;return}const l=a.model.document.selection,c=l.getSelectedElement();if(!c){const u=n.getCaptionFromModelSelection(l);this.isEnabled=!!u,this.value=!!u;return}this.isEnabled=s.isImage(c),this.isEnabled?this.value=!!n.getCaptionFromImageModelElement(c):this.value=!1}execute(a={}){const{focusCaptionOnShow:n}=a;this.editor.model.change(s=>{this.value?this._hideImageCaption(s):this._showImageCaption(s,n)})}_showImageCaption(a,n){const l=this.editor.model.document.selection,c=this.editor.plugins.get("ImageCaptionEditing"),u=this.editor.plugins.get("ImageUtils");let d=l.getSelectedElement();const h=c._getSavedCaption(d);u.isInlineImage(d)&&(this.editor.execute("imageTypeBlock"),d=l.getSelectedElement());const f=h||a.createElement("caption");a.append(f,d),n&&a.setSelection(f,"in")}_hideImageCaption(a){const n=this.editor,s=n.model.document.selection,l=n.plugins.get("ImageCaptionEditing"),c=n.plugins.get("ImageCaptionUtils");let u=s.getSelectedElement(),d;u?d=c.getCaptionFromImageModelElement(u):(d=c.getCaptionFromModelSelection(s),u=d.parent),l._saveCaption(u,d),a.setSelection(u,"on"),a.remove(d)}}class ImageCaptionEditing extends Plugin{constructor(n){super(n);M(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get requires(){return[ImageUtils,ImageCaptionUtils]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model.schema;s.isRegistered("caption")?s.extend("caption",{allowIn:"imageBlock"}):s.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),n.commands.add("toggleImageCaption",new ToggleImageCaptionCommand(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){const n=this.editor,s=n.editing.view,l=n.plugins.get("ImageUtils"),c=n.plugins.get("ImageCaptionUtils"),u=n.t;n.conversion.for("upcast").elementToElement({view:d=>c.matchImageCaptionViewElement(d),model:"caption"}),n.conversion.for("dataDowncast").elementToElement({model:"caption",view:(d,{writer:h})=>l.isBlockImage(d.parent)?h.createContainerElement("figcaption"):null}),n.conversion.for("editingDowncast").elementToElement({model:"caption",view:(d,{writer:h})=>{if(!l.isBlockImage(d.parent))return null;const f=h.createEditableElement("figcaption");h.setCustomProperty("imageCaption",!0,f),f.placeholder=u("Enter image caption"),enablePlaceholder({view:s,element:f,keepOnFocus:!0});const p=d.parent.getAttribute("alt"),g=p?u("Caption for image: %0",[p]):u("Caption for the image");return toWidgetEditable(f,h,{label:g})}})}_setupImageTypeCommandsIntegration(){const n=this.editor,s=n.plugins.get("ImageUtils"),l=n.plugins.get("ImageCaptionUtils"),c=n.commands.get("imageTypeInline"),u=n.commands.get("imageTypeBlock"),d=h=>{if(!h.return)return;const{oldElement:f,newElement:p}=h.return;/* istanbul ignore if: paranoid check -- @preserve */if(!f)return;if(s.isBlockImage(f)){const v=l.getCaptionFromImageModelElement(f);if(v){this._saveCaption(p,v);return}}const g=this._getSavedCaption(f);g&&this._saveCaption(p,g)};c&&this.listenTo(c,"execute",d,{priority:"low"}),u&&this.listenTo(u,"execute",d,{priority:"low"})}_getSavedCaption(n){const s=this._savedCaptionsMap.get(n);return s?Element$2.fromJSON(s):null}_saveCaption(n,s){this._savedCaptionsMap.set(n,s.toJSON())}_registerCaptionReconversion(){const n=this.editor,s=n.model,l=n.plugins.get("ImageUtils"),c=n.plugins.get("ImageCaptionUtils");s.document.on("change:data",()=>{const u=s.document.differ.getChanges();for(const d of u){if(d.attributeKey!=="alt")continue;const h=d.range.start.nodeAfter;if(l.isBlockImage(h)){const f=c.getCaptionFromImageModelElement(h);if(!f)return;n.editing.reconvertItem(f)}}})}}class ImageCaptionUI extends Plugin{static get requires(){return[ImageCaptionUtils]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.editing.view,s=a.plugins.get("ImageCaptionUtils"),l=a.t;a.ui.componentFactory.add("toggleImageCaption",c=>{const u=a.commands.get("toggleImageCaption"),d=new ButtonView(c);return d.set({icon:icons.caption,tooltip:!0,isToggleable:!0}),d.bind("isOn","isEnabled").to(u,"value","isEnabled"),d.bind("label").to(u,"value",h=>l(h?"Toggle caption off":"Toggle caption on")),this.listenTo(d,"execute",()=>{a.execute("toggleImageCaption",{focusCaptionOnShow:!0});const h=s.getCaptionFromModelSelection(a.model.document.selection);if(h){const f=a.editing.mapper.toViewElement(h);n.scrollToTheSelection(),n.change(p=>{p.addClass("image__caption_highlighted",f)})}a.editing.view.focus()}),d})}}class ImageCaption extends Plugin{static get requires(){return[ImageCaptionEditing,ImageCaptionUI]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}}function createImageTypeRegExp(o){const a=o.map(n=>n.replace("+","\\+"));return new RegExp(`^image\\/(${a.join("|")})$`)}function fetchLocalImage(o){return new Promise((a,n)=>{const s=o.getAttribute("src");fetch(s).then(l=>l.blob()).then(l=>{const c=getImageMimeType(l,s),d=`image.${c.replace("image/","")}`,h=new File([l],d,{type:c});a(h)}).catch(l=>l&&l.name==="TypeError"?convertLocalImageOnCanvas(s).then(a).catch(n):n(l))})}function isLocalImage(o,a){return!o.isInlineImageView(a)||!a.getAttribute("src")?!1:!!a.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!a.getAttribute("src").match(/^blob:/g)}function getImageMimeType(o,a){return o.type?o.type:a.match(/data:(image\/\w+);base64/)?a.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function convertLocalImageOnCanvas(o){return getBlobFromCanvas(o).then(a=>{const n=getImageMimeType(a,o),l=`image.${n.replace("image/","")}`;return new File([a],l,{type:n})})}function getBlobFromCanvas(o){return new Promise((a,n)=>{const s=global$1.document.createElement("img");s.addEventListener("load",()=>{const l=global$1.document.createElement("canvas");l.width=s.width,l.height=s.height,l.getContext("2d").drawImage(s,0,0),l.toBlob(u=>u?a(u):n())}),s.addEventListener("error",()=>n()),s.src=o})}class ImageUploadUI extends Plugin{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),a.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),a.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),a.plugins.has("ImageInsertUI")&&a.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>a.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:n=>this._createMenuBarButton(n?"insertOnly":"insertNested")})}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get("uploadImage"),c=n.config.get("image.upload.types"),u=createImageTypeRegExp(c),d=new a(n.locale),h=s.t;return d.set({acceptedType:c.map(f=>`image/${f}`).join(","),allowMultipleFiles:!0,label:h("Upload from computer"),icon:icons.imageUpload}),d.bind("isEnabled").to(l),d.on("done",(f,p)=>{const g=Array.from(p).filter(v=>u.test(v.type));g.length&&(n.execute("uploadImage",{file:g}),n.editing.view.focus())}),d}_createToolbarButton(){const a=this.editor.locale.t,n=this.editor.plugins.get("ImageInsertUI"),s=this.editor.commands.get("uploadImage"),l=this._createButton(FileDialogButtonView);return l.tooltip=!0,l.bind("label").to(n,"isImageSelected",s,"isAccessAllowed",(c,u)=>a(u?c?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),l}_createDropdownButton(){const a=this.editor.locale.t,n=this.editor.plugins.get("ImageInsertUI"),s=this._createButton(FileDialogButtonView);return s.withText=!0,s.bind("label").to(n,"isImageSelected",l=>a(l?"Replace from computer":"Upload from computer")),s.on("execute",()=>{n.dropdownView.isOpen=!1}),s}_createMenuBarButton(a){const n=this.editor.locale.t,s=this._createButton(MenuBarMenuListItemFileDialogButtonView);switch(s.withText=!0,a){case"standalone":s.label=n("Image from computer");break;case"insertOnly":s.label=n("Image");break;case"insertNested":s.label=n("From computer");break}return s}}class ImageUploadProgress extends Plugin{constructor(n){super(n);M(this,"placeholder");M(this,"uploadStatusChange",(n,s,l)=>{const c=this.editor,u=s.item,d=u.getAttribute("uploadId");if(!l.consumable.consume(s.item,n.name))return;const h=c.plugins.get("ImageUtils"),f=c.plugins.get(FileRepository),p=d?s.attributeNewValue:null,g=this.placeholder,v=c.editing.mapper.toViewElement(u),b=l.writer;if(p=="reading"){_startAppearEffect(v,b),_showPlaceholder(h,g,v,b);return}if(p=="uploading"){const w=f.loaders.get(d);_startAppearEffect(v,b),w?(_hidePlaceholder(v,b),_showProgressBar(v,b,w,c.editing.view),_displayLocalImage(h,v,b,w)):_showPlaceholder(h,g,v,b);return}p=="complete"&&f.loaders.get(d)&&_showCompleteIcon(v,b,c.editing.view),_hideProgressBar(v,b),_hidePlaceholder(v,b),_stopAppearEffect(v,b)});this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.plugins.has("ImageBlockEditing")&&n.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),n.plugins.has("ImageInlineEditing")&&n.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}}function _startAppearEffect(o,a){o.hasClass("ck-appear")||a.addClass("ck-appear",o)}function _stopAppearEffect(o,a){a.removeClass("ck-appear",o)}function _showPlaceholder(o,a,n,s){n.hasClass("ck-image-upload-placeholder")||s.addClass("ck-image-upload-placeholder",n);const l=o.findViewImgElement(n);l.getAttribute("src")!==a&&s.setAttribute("src",a,l),_getUIElement(n,"placeholder")||s.insert(s.createPositionAfter(l),_createPlaceholder(s))}function _hidePlaceholder(o,a){o.hasClass("ck-image-upload-placeholder")&&a.removeClass("ck-image-upload-placeholder",o),_removeUIElement(o,a,"placeholder")}function _showProgressBar(o,a,n,s){const l=_createProgressBar(a);a.insert(a.createPositionAt(o,"end"),l),n.on("change:uploadedPercent",(c,u,d)=>{s.change(h=>{h.setStyle("width",d+"%",l)})})}function _hideProgressBar(o,a){_removeUIElement(o,a,"progressBar")}function _showCompleteIcon(o,a,n){const s=a.createUIElement("div",{class:"ck-image-upload-complete-icon"});a.insert(a.createPositionAt(o,"end"),s),setTimeout(()=>{n.change(l=>l.remove(l.createRangeOn(s)))},3e3)}function _createProgressBar(o){const a=o.createUIElement("div",{class:"ck-progress-bar"});return o.setCustomProperty("progressBar",!0,a),a}function _createPlaceholder(o){const a=o.createUIElement("div",{class:"ck-upload-placeholder-loader"});return o.setCustomProperty("placeholder",!0,a),a}function _getUIElement(o,a){for(const n of o.getChildren())if(n.getCustomProperty(a))return n}function _removeUIElement(o,a,n){const s=_getUIElement(o,n);s&&a.remove(a.createRangeOn(s))}function _displayLocalImage(o,a,n,s){if(s.data){const l=o.findViewImgElement(a);n.setAttribute("src",s.data,l)}}class UploadImageCommand extends Command{constructor(a){super(a),this.set("isAccessAllowed",!0)}refresh(){const a=this.editor,n=a.plugins.get("ImageUtils"),s=a.model.document.selection.getSelectedElement();this.isEnabled=n.isImageAllowed()||n.isImage(s)}execute(a){const n=toArray$2(a.file),s=this.editor.model.document.selection,l=this.editor.plugins.get("ImageUtils"),c=Object.fromEntries(s.getAttributes());n.forEach((u,d)=>{const h=s.getSelectedElement();if(d&&h&&l.isImage(h)){const f=this.editor.model.createPositionAfter(h);this._uploadImage(u,c,f)}else this._uploadImage(u,c)})}_uploadImage(a,n,s){const l=this.editor,u=l.plugins.get(FileRepository).createLoader(a),d=l.plugins.get("ImageUtils");u&&d.insertImage({...n,uploadId:u.id},s)}}class ImageUploadEditing extends Plugin{constructor(n){super(n);M(this,"_uploadImageElements");M(this,"_uploadedImages",new Map);n.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}static get requires(){return[FileRepository,Notification,ClipboardPipeline,ImageUtils]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model.document,l=n.conversion,c=n.plugins.get(FileRepository),u=n.plugins.get("ImageUtils"),d=n.plugins.get("ClipboardPipeline"),h=createImageTypeRegExp(n.config.get("image.upload.types")),f=new UploadImageCommand(n);n.commands.add("uploadImage",f),n.commands.add("imageUpload",f),l.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}).add(p=>p.on("element:img",(g,v,b)=>{if(!b.consumable.test(v.viewItem,{attributes:["data-ck-upload-id"]}))return;const w=v.viewItem.getAttribute("data-ck-upload-id");if(!w)return;const[x]=Array.from(v.modelRange.getItems({shallow:!0})),S=c.loaders.get(w);x&&(b.writer.setAttribute("uploadId",w,x),b.consumable.consume(v.viewItem,{attributes:["data-ck-upload-id"]}),S&&S.data&&b.writer.setAttribute("uploadStatus",S.status,x))},{priority:"low"})),this.listenTo(n.editing.view.document,"clipboardInput",(p,g)=>{if(isHtmlIncluded(g.dataTransfer))return;const v=Array.from(g.dataTransfer.files).filter(w=>w?h.test(w.type):!1);if(!v.length)return;if(p.stop(),n.model.change(w=>{g.targetRanges&&w.setSelection(g.targetRanges.map(x=>n.editing.mapper.toModelRange(x))),n.execute("uploadImage",{file:v})}),!n.commands.get("uploadImage").isAccessAllowed){const w=n.plugins.get("Notification"),x=n.locale.t;w.showWarning(x("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(d,"inputTransformation",(p,g)=>{const v=Array.from(n.editing.view.createRangeIn(g.content)).map(w=>w.item).filter(w=>isLocalImage(u,w)&&!w.getAttribute("uploadProcessed")).map(w=>({promise:fetchLocalImage(w),imageElement:w}));if(!v.length)return;const b=new UpcastWriter(n.editing.view.document);for(const w of v){b.setAttribute("uploadProcessed",!0,w.imageElement);const x=c.createLoader(w.promise);x&&(b.setAttribute("src","",w.imageElement),b.setAttribute("uploadId",x.id,w.imageElement))}}),n.editing.view.document.on("dragover",(p,g)=>{g.preventDefault()}),s.on("change",()=>{const p=s.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),g=new Set;for(const v of p)if(v.type=="insert"&&v.name!="$text"){const b=v.position.nodeAfter,w=v.position.root.rootName=="$graveyard";for(const x of getImagesFromChangeItem(n,b)){const S=x.getAttribute("uploadId");if(!S)continue;const E=c.loaders.get(S);if(!E){!w&&this._uploadedImages.has(S)&&n.model.enqueueChange({isUndoable:!1},T=>{T.setAttribute("uploadStatus","complete",x),this.fire("uploadComplete",{data:this._uploadedImages.get(S),imageElement:x})});continue}w?g.has(S)||Array.from(this._uploadImageElements.get(S)).every(C=>C.root.rootName=="$graveyard")&&E.abort():(g.add(S),this._uploadImageElements.has(S)?this._uploadImageElements.get(S).add(x):this._uploadImageElements.set(S,new Set([x])),E.status=="idle"&&this._readAndUpload(E))}}}),this.on("uploadComplete",(p,{imageElement:g,data:v})=>{const b=v.urls?v.urls:v;this.editor.model.change(w=>{w.setAttribute("src",b.default,g),this._parseAndSetSrcsetAttributeOnImage(b,g,w),u.setImageNaturalSizeAttributes(g)})},{priority:"low"})}afterInit(){const n=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&(n.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageBlock")),this.editor.plugins.has("ImageInlineEditing")&&(n.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]}),this._registerConverters("imageInline"))}_readAndUpload(n){const s=this.editor,l=s.model,c=s.locale.t,u=s.plugins.get(FileRepository),d=s.plugins.get(Notification),h=s.plugins.get("ImageUtils"),f=this._uploadImageElements;return l.enqueueChange({isUndoable:!1},g=>{const v=f.get(n.id);for(const b of v)g.setAttribute("uploadStatus","reading",b)}),n.read().then(()=>{const g=n.upload();s.ui&&s.ui.ariaLiveAnnouncer.announce(c("Uploading image"));for(const v of f.get(n.id)){/* istanbul ignore next -- @preserve */if(env$1.isSafari){const b=s.editing.mapper.toViewElement(v),w=h.findViewImgElement(b);s.editing.view.once("render",()=>{if(!w.parent)return;const x=s.editing.view.domConverter.mapViewToDom(w.parent);if(!x)return;const S=x.style.display;x.style.display="none",x._ckHack=x.offsetHeight,x.style.display=S})}l.enqueueChange({isUndoable:!1},b=>{b.setAttribute("uploadStatus","uploading",v)})}return g}).then(g=>{l.enqueueChange({isUndoable:!1},v=>{for(const b of f.get(n.id))v.setAttribute("uploadStatus","complete",b),this.fire("uploadComplete",{data:g,imageElement:b});s.ui&&s.ui.ariaLiveAnnouncer.announce(c("Image upload complete")),this._uploadedImages.set(n.id,g)}),p()}).catch(g=>{if(s.ui&&s.ui.ariaLiveAnnouncer.announce(c("Error during image upload")),n.status!=="error"&&n.status!=="aborted")throw g;n.status=="error"&&g&&d.showWarning(g,{title:c("Upload failed"),namespace:"upload"}),l.enqueueChange({isUndoable:!1},v=>{for(const b of f.get(n.id))b.root.rootName!=="$graveyard"&&v.remove(b)}),p()});function p(){l.enqueueChange({isUndoable:!1},g=>{for(const v of f.get(n.id))g.removeAttribute("uploadId",v),g.removeAttribute("uploadStatus",v);f.delete(n.id)}),u.destroyLoader(n)}}_parseAndSetSrcsetAttributeOnImage(n,s,l){let c=0;const u=Object.keys(n).filter(d=>{const h=parseInt(d,10);if(!isNaN(h))return c=Math.max(c,h),!0}).map(d=>`${n[d]} ${d}w`).join(", ");if(u!=""){const d={srcset:u};!s.hasAttribute("width")&&!s.hasAttribute("height")&&(d.width=c),l.setAttributes(d,s)}}_registerConverters(n){const{conversion:s,plugins:l}=this.editor,c=l.get(FileRepository),u=l.get(ImageUtils);s.for("dataDowncast").add(d=>{d.on(`attribute:uploadId:${n}`,(h,f,p)=>{if(!p.consumable.test(f.item,h.name))return;const g=c.loaders.get(f.attributeNewValue);if(!g||!g.data)return null;const v=p.mapper.toViewElement(f.item),b=u.findViewImgElement(v);b&&(p.consumable.consume(f.item,h.name),p.writer.setAttribute("data-ck-upload-id",g.id,b))})})}}function isHtmlIncluded(o){return Array.from(o.types).includes("text/html")&&o.getData("text/html")!==""}function getImagesFromChangeItem(o,a){const n=o.plugins.get("ImageUtils");return Array.from(o.model.createRangeOn(a)).filter(s=>n.isImage(s.item)).map(s=>s.item)}class ImageUpload extends Plugin{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUploadEditing,ImageUploadUI,ImageUploadProgress]}}class ImageInsertUrlView extends View$1{constructor(n){super(n);M(this,"urlInputView");M(this,"keystrokes");this.set("imageURLInputValue",""),this.set("isImageSelected",!1),this.set("isEnabled",!0),this.keystrokes=new KeystrokeHandler,this.urlInputView=this._createUrlInputView(),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-url"],tabindex:"-1"},children:[this.urlInputView,{tag:"div",attributes:{class:["ck","ck-image-insert-url__action-row"]}}]})}render(){super.render(),submitHandler({view:this}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}_createUrlInputView(){const n=this.locale,s=n.t,l=new LabeledFieldView(n,createLabeledInputText);return l.bind("label").to(this,"isImageSelected",c=>s(c?"Update image URL":"Insert image via URL")),l.bind("isEnabled").to(this),l.fieldView.inputMode="url",l.fieldView.placeholder="https://example.com/image.png",l.fieldView.bind("value").to(this,"imageURLInputValue",c=>c||""),l.fieldView.on("input",()=>{this.imageURLInputValue=l.fieldView.element.value.trim()}),l}focus(){this.urlInputView.focus()}}class ImageInsertViaUrlUI extends Plugin{constructor(){super(...arguments);M(this,"_imageInsertUI");M(this,"_formView")}static get pluginName(){return"ImageInsertViaUrlUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertUI,Dialog]}init(){this.editor.ui.componentFactory.add("insertImageViaUrl",()=>this._createToolbarButton()),this.editor.ui.componentFactory.add("menuBar:insertImageViaUrl",()=>this._createMenuBarButton("standalone"))}afterInit(){this._imageInsertUI=this.editor.plugins.get("ImageInsertUI"),this._imageInsertUI.registerIntegration({name:"url",observable:()=>this.editor.commands.get("insertImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:n=>this._createMenuBarButton(n?"insertOnly":"insertNested")})}_createInsertUrlButton(n){const s=new n(this.editor.locale);return s.icon=icons.imageUrl,s.on("execute",()=>{this._showModal()}),s}_createToolbarButton(){const n=this.editor.locale.t,s=this._createInsertUrlButton(ButtonView);return s.tooltip=!0,s.bind("label").to(this._imageInsertUI,"isImageSelected",l=>n(l?"Update image URL":"Insert image via URL")),s}_createDropdownButton(){const n=this.editor.locale.t,s=this._createInsertUrlButton(ButtonView);return s.withText=!0,s.bind("label").to(this._imageInsertUI,"isImageSelected",l=>n(l?"Update image URL":"Insert via URL")),s}_createMenuBarButton(n){const s=this.editor.locale.t,l=this._createInsertUrlButton(MenuBarMenuListItemButtonView);switch(l.withText=!0,n){case"standalone":l.label=s("Image via URL");break;case"insertOnly":l.label=s("Image");break;case"insertNested":l.label=s("Via URL");break}return l}_createInsertUrlView(){const n=this.editor,s=n.locale,l=n.commands.get("replaceImageSource"),c=n.commands.get("insertImage"),u=new ImageInsertUrlView(s);return u.bind("isImageSelected").to(this._imageInsertUI),u.bind("isEnabled").toMany([c,l],"isEnabled",(...d)=>d.some(h=>h)),u}_showModal(){const n=this.editor,l=n.locale.t,c=n.plugins.get("Dialog");this._formView||(this._formView=this._createInsertUrlView(),this._formView.on("submit",()=>this._handleSave()));const u=n.commands.get("replaceImageSource");this._formView.imageURLInputValue=u.value||"",c.show({id:"insertImageViaUrl",title:this._imageInsertUI.isImageSelected?l("Update image URL"):l("Insert image via URL"),isModal:!0,content:this._formView,actionButtons:[{label:l("Cancel"),withText:!0,onExecute:()=>c.hide()},{label:l("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSave()}]})}_handleSave(){this.editor.commands.get("replaceImageSource").isEnabled?this.editor.execute("replaceImageSource",{source:this._formView.imageURLInputValue}):this.editor.execute("insertImage",{source:this._formView.imageURLInputValue}),this.editor.plugins.get("Dialog").hide()}}class ImageInsertViaUrl extends Plugin{static get pluginName(){return"ImageInsertViaUrl"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageInsertViaUrlUI,ImageInsertUI]}}class ImageInsert extends Plugin{static get pluginName(){return"ImageInsert"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUpload,ImageInsertViaUrl,ImageInsertUI]}}class ResizeImageCommand extends Command{refresh(){const a=this.editor,s=a.plugins.get("ImageUtils").getClosestSelectedImageElement(a.model.document.selection);this.isEnabled=!!s,!s||!s.hasAttribute("resizedWidth")?this.value=null:this.value={width:s.getAttribute("resizedWidth"),height:null}}execute(a){const n=this.editor,s=n.model,l=n.plugins.get("ImageUtils"),c=l.getClosestSelectedImageElement(s.document.selection);this.value={width:a.width,height:null},c&&s.change(u=>{u.setAttribute("resizedWidth",a.width,c),u.removeAttribute("resizedHeight",c),l.setImageNaturalSizeAttributes(c)})}}class ImageResizeEditing extends Plugin{static get requires(){return[ImageUtils]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){const a=this.editor,n=new ResizeImageCommand(a);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),a.commands.add("resizeImage",n),a.commands.add("imageResize",n)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(a){const n=this.editor,s=n.plugins.get("ImageUtils");n.conversion.for("downcast").add(l=>l.on(`attribute:resizedWidth:${a}`,(c,u,d)=>{if(!d.consumable.consume(u.item,c.name))return;const h=d.writer,f=d.mapper.toViewElement(u.item);u.attributeNewValue!==null?(h.setStyle("width",u.attributeNewValue,f),h.addClass("image_resized",f)):(h.removeStyle("width",f),h.removeClass("image_resized",f))})),n.conversion.for("dataDowncast").attributeToAttribute({model:{name:a,key:"resizedHeight"},view:l=>({key:"style",value:{height:l}})}),n.conversion.for("editingDowncast").add(l=>l.on(`attribute:resizedHeight:${a}`,(c,u,d)=>{if(!d.consumable.consume(u.item,c.name))return;const h=d.writer,f=d.mapper.toViewElement(u.item),p=a==="imageInline"?s.findViewImgElement(f):f;u.attributeNewValue!==null?h.setStyle("height",u.attributeNewValue,p):h.removeStyle("height",p)})),n.conversion.for("upcast").attributeToAttribute({view:{name:a==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:l=>widthAndHeightStylesAreBothSet(l)?null:l.getStyle("width")}}),n.conversion.for("upcast").attributeToAttribute({view:{name:a==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:l=>widthAndHeightStylesAreBothSet(l)?null:l.getStyle("height")}})}}const RESIZE_ICONS={small:icons.objectSizeSmall,medium:icons.objectSizeMedium,large:icons.objectSizeLarge,custom:icons.objectSizeCustom,original:icons.objectSizeFull};class ImageResizeButtons extends Plugin{constructor(n){super(n);M(this,"_resizeUnit");this._resizeUnit=n.config.get("image.resizeUnit")}static get requires(){return[ImageResizeEditing]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.config.get("image.resizeOptions"),l=n.commands.get("resizeImage");this.bind("isEnabled").to(l);for(const c of s)this._registerImageResizeButton(c);this._registerImageResizeDropdown(s)}_registerImageResizeButton(n){const s=this.editor,{name:l,value:c,icon:u}=n;s.ui.componentFactory.add(l,d=>{const h=new ButtonView(d),f=s.commands.get("resizeImage"),p=this._getOptionLabelValue(n,!0);if(!RESIZE_ICONS[u])throw new CKEditorError("imageresizebuttons-missing-icon",s,n);if(h.set({label:p,icon:RESIZE_ICONS[u],tooltip:p,isToggleable:!0}),h.bind("isEnabled").to(this),s.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(n)){const g=s.plugins.get("ImageCustomResizeUI");this.listenTo(h,"execute",()=>{g._showForm(this._resizeUnit)})}else{const g=c?c+this._resizeUnit:null;h.bind("isOn").to(f,"value",getIsOnButtonCallback(g)),this.listenTo(h,"execute",()=>{s.execute("resizeImage",{width:g})})}return h})}_registerImageResizeDropdown(n){const s=this.editor,l=s.t,c=n.find(d=>!d.value),u=d=>{const h=s.commands.get("resizeImage"),f=createDropdown(d,DropdownButtonView),p=f.buttonView,g=l("Resize image");return p.set({tooltip:g,commandValue:c.value,icon:RESIZE_ICONS.medium,isToggleable:!0,label:this._getOptionLabelValue(c),withText:!0,class:"ck-resize-image-button",ariaLabel:g,ariaLabelledBy:void 0}),p.bind("label").to(h,"value",v=>v&&v.width?v.width:this._getOptionLabelValue(c)),f.bind("isEnabled").to(this),addListToDropdown(f,()=>this._getResizeDropdownListItemDefinitions(n,h),{ariaLabel:l("Image resize list"),role:"menu"}),this.listenTo(f,"execute",v=>{"onClick"in v.source?v.source.onClick():(s.execute(v.source.commandName,{width:v.source.commandValue}),s.editing.view.focus())}),f};s.ui.componentFactory.add("resizeImage",u),s.ui.componentFactory.add("imageResize",u)}_getOptionLabelValue(n,s=!1){const l=this.editor.t;return n.label?n.label:s?isCustomImageResizeOption(n)?l("Custom image size"):n.value?l("Resize image to %0",n.value+this._resizeUnit):l("Resize image to the original size"):isCustomImageResizeOption(n)?l("Custom"):n.value?n.value+this._resizeUnit:l("Original")}_getResizeDropdownListItemDefinitions(n,s){const{editor:l}=this,c=new Collection,u=n.map(d=>isCustomImageResizeOption(d)?{...d,valueWithUnits:"custom"}:d.value?{...d,valueWithUnits:`${d.value}${this._resizeUnit}`}:{...d,valueWithUnits:null});for(const d of u){let h=null;if(l.plugins.has("ImageCustomResizeUI")&&isCustomImageResizeOption(d)){const f=l.plugins.get("ImageCustomResizeUI");h={type:"button",model:new Model$1({label:this._getOptionLabelValue(d),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{f._showForm(this._resizeUnit)}})};const p=map$2(u,"valueWithUnits");h.model.bind("isOn").to(s,"value",getIsOnCustomButtonCallback(p))}else h={type:"button",model:new Model$1({commandName:"resizeImage",commandValue:d.valueWithUnits,label:this._getOptionLabelValue(d),role:"menuitemradio",withText:!0,icon:null})},h.model.bind("isOn").to(s,"value",getIsOnButtonCallback(d.valueWithUnits));h.model.bind("isEnabled").to(s,"isEnabled"),c.add(h)}return c}}function isCustomImageResizeOption(o){return o.value==="custom"}function getIsOnButtonCallback(o){return a=>{const n=a;return o===null&&n===o?!0:n!==null&&n.width===o}}function getIsOnCustomButtonCallback(o){return a=>!o.some(n=>getIsOnButtonCallback(n)(a))}const RESIZABLE_IMAGES_CSS_SELECTOR="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",RESIZED_IMAGE_CLASS="image_resized";class ImageResizeHandles extends Plugin{static get requires(){return[WidgetResize,ImageUtils]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(a),this._setupResizerCreator()}_setupResizerCreator(){const a=this.editor,n=a.editing.view,s=a.plugins.get("ImageUtils");n.addObserver(ImageLoadObserver),this.listenTo(n.document,"imageLoaded",(l,c)=>{if(!c.target.matches(RESIZABLE_IMAGES_CSS_SELECTOR))return;const u=a.editing.view.domConverter,d=u.domToView(c.target),h=s.getImageWidgetFromImageView(d);let f=this.editor.plugins.get(WidgetResize).getResizerByViewElement(h);if(f){f.redraw();return}const p=a.editing.mapper,g=p.toModelElement(h);f=a.plugins.get(WidgetResize).attachTo({unit:a.config.get("image.resizeUnit"),modelElement:g,viewElement:h,editor:a,getHandleHost(v){return v.querySelector("img")},getResizeHost(){return u.mapViewToDom(p.toViewElement(g))},isCentered(){return g.getAttribute("imageStyle")=="alignCenter"},onCommit(v){n.change(b=>{b.removeClass(RESIZED_IMAGE_CLASS,h)}),a.execute("resizeImage",{width:v})}}),f.on("updateSize",()=>{h.hasClass(RESIZED_IMAGE_CLASS)||n.change(b=>{b.addClass(RESIZED_IMAGE_CLASS,h)});const v=g.name==="imageInline"?d:h;v.getStyle("height")&&n.change(b=>{b.removeStyle("height",v)})}),f.bind("isEnabled").to(this)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function tryParseDimensionWithUnit(o){if(!o)return null;const[,a,n]=o.trim().match(/([.,\d]+)(%|px)$/)||[],s=Number.parseFloat(a);return Number.isNaN(s)?null:{value:s,unit:n}}function tryCastDimensionsToUnit(o,a,n){return n==="px"?{value:a.value,unit:"px"}:{value:a.value/o*100,unit:"%"}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function getSelectedImageEditorNodes(o){const{editing:a}=o,s=o.plugins.get("ImageUtils").getClosestSelectedImageElement(o.model.document.selection);if(!s)return null;const l=a.mapper.toViewElement(s),c=a.view.domConverter.mapViewToDom(l);return{model:s,view:l,dom:c}}function getSelectedImageWidthInUnits(o,a){const n=getSelectedImageEditorNodes(o);if(!n)return null;const s=tryParseDimensionWithUnit(n.model.getAttribute("resizedWidth")||null);if(!s)return null;if(s.unit===a)return s;const l=calculateResizeHostAncestorWidth(n.dom),c={value:new Rect$3(n.dom).width};return tryCastDimensionsToUnit(l,c,a)}class ImageCustomResizeFormView extends View$1{constructor(n,s,l){super(n);M(this,"focusTracker");M(this,"keystrokes");M(this,"unit");M(this,"labeledInput");M(this,"saveButtonView");M(this,"cancelButtonView");M(this,"_focusables");M(this,"_focusCycler");M(this,"_validators");const c=this.locale.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.unit=s,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(c("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(c("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._focusables=new ViewCollection,this._validators=l,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),submitHandler({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(n,s,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:s,tooltip:!0}),u.extendTemplate({attributes:{class:l}}),c&&u.delegate("execute").to(this,c),u}_createLabeledInputView(){const n=this.locale.t,s=new LabeledFieldView(this.locale,createLabeledInputNumber);return s.label=n("Resize image (in %0)",this.unit),s.fieldView.set({step:.1}),s}isValid(){this.resetFormStatus();for(const n of this._validators){const s=n(this);if(s)return this.labeledInput.errorText=s,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){const{element:n}=this.labeledInput.fieldView;return n?n.value:null}get parsedSize(){const{rawSize:n}=this;if(n===null)return null;const s=Number.parseFloat(n);return Number.isNaN(s)?null:s}get sizeWithUnits(){const{parsedSize:n,unit:s}=this;return n===null?null:`${n}${s}`}}function getSelectedImagePossibleResizeRange(o,a){const n=getSelectedImageEditorNodes(o);if(!n)return null;const s=calculateResizeHostAncestorWidth(n.dom),l=tryParseDimensionWithUnit(window.getComputedStyle(n.dom).minWidth)||{value:1},c=Math.max(.1,tryCastDimensionsToUnit(s,l,a).value);return{unit:a,lower:c,upper:a==="px"?s:100}}class ImageCustomResizeUI extends Plugin{constructor(){super(...arguments);M(this,"_balloon");M(this,"_form")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(n){const s=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(CssTransitionDisablerMixin(ImageCustomResizeFormView))(s.locale,n,getFormValidators$2(s)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(s.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{s.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(l,c)=>{this._hideForm(!0),c()}),clickOutsideHandler({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(n){if(this._isVisible)return;this._form||this._createForm(n);const s=this.editor,l=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:getBalloonPositionData(s)});const c=getSelectedImageWidthInUnits(s,n),u=c?c.value.toFixed(1):"",d=getSelectedImagePossibleResizeRange(s,n);l.fieldView.value=l.fieldView.element.value=u,d&&Object.assign(l.fieldView,{min:d.lower.toFixed(1),max:Math.ceil(d.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(n=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),n&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}}function getFormValidators$2(o){const a=o.t;return[n=>{if(n.rawSize.trim()==="")return a("The value must not be empty.");if(n.parsedSize===null)return a("The value should be a plain number.")}]}class ImageResize extends Plugin{static get requires(){return[ImageResizeEditing,ImageResizeHandles,ImageCustomResizeUI,ImageResizeButtons]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}}class ImageStyleCommand extends Command{constructor(n,s){super(n);M(this,"_defaultStyles");M(this,"_styles");this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(s.map(l=>{if(l.isDefault)for(const c of l.modelElements)this._defaultStyles[c]=l.name;return[l.name,l]}))}refresh(){const l=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!l,this.isEnabled?l.hasAttribute("imageStyle")?this.value=l.getAttribute("imageStyle"):this.value=this._defaultStyles[l.name]:this.value=!1}execute(n={}){const s=this.editor,l=s.model,c=s.plugins.get("ImageUtils");l.change(u=>{const d=n.value,{setImageSizes:h=!0}=n;let f=c.getClosestSelectedImageElement(l.document.selection);d&&this.shouldConvertImageType(d,f)&&(this.editor.execute(c.isBlockImage(f)?"imageTypeInline":"imageTypeBlock",{setImageSizes:h}),f=c.getClosestSelectedImageElement(l.document.selection)),!d||this._styles.get(d).isDefault?u.removeAttribute("imageStyle",f):u.setAttribute("imageStyle",d,f),h&&c.setImageNaturalSizeAttributes(f)})}shouldConvertImageType(n,s){return!this._styles.get(n).modelElements.includes(s.name)}}const DEFAULT_OPTIONS={get inline(){return{name:"inline",title:"In line",icon:icons.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:icons.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:icons.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:icons.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:icons.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:icons.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:icons.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},DEFAULT_ICONS={full:icons.objectFullWidth,left:icons.objectBlockLeft,right:icons.objectBlockRight,center:icons.objectCenter,inlineLeft:icons.objectLeft,inlineRight:icons.objectRight,inline:icons.objectInline},DEFAULT_DROPDOWN_DEFINITIONS=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function normalizeStyles(o){return(o.configuredStyles.options||[]).map(s=>normalizeDefinition(s)).filter(s=>isValidOption(s,o))}function getDefaultStylesConfiguration(o,a){return o&&a?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:o?{options:["block","side"]}:a?{options:["inline","alignLeft","alignRight"]}:{}}function getDefaultDropdownDefinitions(o){return o.has("ImageBlockEditing")&&o.has("ImageInlineEditing")?[...DEFAULT_DROPDOWN_DEFINITIONS]:[]}function normalizeDefinition(o){return typeof o=="string"?DEFAULT_OPTIONS[o]?o={...DEFAULT_OPTIONS[o]}:o={name:o}:o=extendStyle(DEFAULT_OPTIONS[o.name],o),typeof o.icon=="string"&&(o.icon=DEFAULT_ICONS[o.icon]||o.icon),o}function isValidOption(o,{isBlockPluginLoaded:a,isInlinePluginLoaded:n}){const{modelElements:s,name:l}=o;if(!s||!s.length||!l)return warnInvalidStyle({style:o}),!1;{const c=[a?"imageBlock":null,n?"imageInline":null];if(!s.some(u=>c.includes(u)))return logWarning("image-style-missing-dependency",{style:o,missingPlugins:s.map(u=>u==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function extendStyle(o,a){const n={...a};for(const s in o)Object.prototype.hasOwnProperty.call(a,s)||(n[s]=o[s]);return n}function warnInvalidStyle(o){logWarning("image-style-configuration-definition-invalid",o)}var utils$3={normalizeStyles,getDefaultStylesConfiguration,getDefaultDropdownDefinitions,warnInvalidStyle,DEFAULT_OPTIONS,DEFAULT_ICONS,DEFAULT_DROPDOWN_DEFINITIONS};function modelToViewStyleAttribute(o){return(a,n,s)=>{if(!s.consumable.consume(n.item,a.name))return;const l=getStyleDefinitionByName(n.attributeNewValue,o),c=getStyleDefinitionByName(n.attributeOldValue,o),u=s.mapper.toViewElement(n.item),d=s.writer;c&&d.removeClass(c.className,u),l&&d.addClass(l.className,u)}}function viewToModelStyleAttribute(o){const a={imageInline:o.filter(n=>!n.isDefault&&n.modelElements.includes("imageInline")),imageBlock:o.filter(n=>!n.isDefault&&n.modelElements.includes("imageBlock"))};return(n,s,l)=>{if(!s.modelRange)return;const c=s.viewItem,u=first(s.modelRange.getItems());if(u&&l.schema.checkAttribute(u,"imageStyle"))for(const d of a[u.name])l.consumable.consume(c,{classes:d.className})&&l.writer.setAttribute("imageStyle",d.name,u)}}function getStyleDefinitionByName(o,a){for(const n of a)if(n.name===o)return n}class ImageStyleEditing extends Plugin{constructor(){super(...arguments);M(this,"normalizedStyles")}static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ImageUtils]}init(){const{normalizeStyles:n,getDefaultStylesConfiguration:s}=utils$3,l=this.editor,c=l.plugins.has("ImageBlockEditing"),u=l.plugins.has("ImageInlineEditing");l.config.define("image.styles",s(c,u)),this.normalizedStyles=n({configuredStyles:l.config.get("image.styles"),isBlockPluginLoaded:c,isInlinePluginLoaded:u}),this._setupConversion(c,u),this._setupPostFixer(),l.commands.add("imageStyle",new ImageStyleCommand(l,this.normalizedStyles))}_setupConversion(n,s){const l=this.editor,c=l.model.schema,u=modelToViewStyleAttribute(this.normalizedStyles),d=viewToModelStyleAttribute(this.normalizedStyles);l.editing.downcastDispatcher.on("attribute:imageStyle",u),l.data.downcastDispatcher.on("attribute:imageStyle",u),n&&(c.extend("imageBlock",{allowAttributes:"imageStyle"}),l.data.upcastDispatcher.on("element:figure",d,{priority:"low"})),s&&(c.extend("imageInline",{allowAttributes:"imageStyle"}),l.data.upcastDispatcher.on("element:img",d,{priority:"low"}))}_setupPostFixer(){const n=this.editor,s=n.model.document,l=n.plugins.get(ImageUtils),c=new Map(this.normalizedStyles.map(u=>[u.name,u]));s.registerPostFixer(u=>{let d=!1;for(const h of s.differ.getChanges())if(h.type=="insert"||h.type=="attribute"&&h.attributeKey=="imageStyle"){let f=h.type=="insert"?h.position.nodeAfter:h.range.start.nodeAfter;if(f&&f.is("element","paragraph")&&f.childCount>0&&(f=f.getChild(0)),!l.isImage(f))continue;const p=f.getAttribute("imageStyle");if(!p)continue;const g=c.get(p);(!g||!g.modelElements.includes(f.name))&&(u.removeAttribute("imageStyle",f),d=!0)}return d})}}class ImageStyleUI extends Plugin{static get requires(){return[ImageStyleEditing]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){const a=this.editor.t;return{"Wrap text":a("Wrap text"),"Break text":a("Break text"),"In line":a("In line"),"Full size image":a("Full size image"),"Side image":a("Side image"),"Left aligned image":a("Left aligned image"),"Centered image":a("Centered image"),"Right aligned image":a("Right aligned image")}}init(){const a=this.editor.plugins,n=this.editor.config.get("image.toolbar")||[],s=a.get("ImageStyleEditing"),l=translateStyles(s.normalizedStyles,this.localizedDefaultStylesTitles);for(const u of l)this._createButton(u);const c=translateStyles([...n.filter(isObject$6),...utils$3.getDefaultDropdownDefinitions(a)],this.localizedDefaultStylesTitles);for(const u of c)this._createDropdown(u,l)}_createDropdown(a,n){const s=this.editor.ui.componentFactory;s.add(a.name,l=>{let c;const{defaultItem:u,items:d,title:h}=a,f=d.filter(b=>n.find(({name:w})=>getUIComponentName(w)===b)).map(b=>{const w=s.create(b);return b===u&&(c=w),w});d.length!==f.length&&utils$3.warnInvalidStyle({dropdown:a});const p=createDropdown(l,SplitButtonView),g=p.buttonView,v=g.arrowView;return addToolbarToDropdown(p,f,{enableActiveItemFocusOnDropdownOpen:!0}),g.set({label:getDropdownButtonTitle(h,c.label),class:null,tooltip:!0}),v.unbind("label"),v.set({label:h}),g.bind("icon").toMany(f,"isOn",(...b)=>{const w=b.findIndex(identity$1);return w<0?c.icon:f[w].icon}),g.bind("label").toMany(f,"isOn",(...b)=>{const w=b.findIndex(identity$1);return getDropdownButtonTitle(h,w<0?c.label:f[w].label)}),g.bind("isOn").toMany(f,"isOn",(...b)=>b.some(identity$1)),g.bind("class").toMany(f,"isOn",(...b)=>b.some(identity$1)?"ck-splitbutton_flatten":void 0),g.on("execute",()=>{f.some(({isOn:b})=>b)?p.isOpen=!p.isOpen:c.fire("execute")}),p.bind("isEnabled").toMany(f,"isEnabled",(...b)=>b.some(identity$1)),this.listenTo(p,"execute",()=>{this.editor.editing.view.focus()}),p})}_createButton(a){const n=a.name;this.editor.ui.componentFactory.add(getUIComponentName(n),s=>{const l=this.editor.commands.get("imageStyle"),c=new ButtonView(s);return c.set({label:a.title,icon:a.icon,tooltip:!0,isToggleable:!0}),c.bind("isEnabled").to(l,"isEnabled"),c.bind("isOn").to(l,"value",u=>u===n),c.on("execute",this._executeCommand.bind(this,n)),c})}_executeCommand(a){this.editor.execute("imageStyle",{value:a}),this.editor.editing.view.focus()}}function translateStyles(o,a){for(const n of o)a[n.title]&&(n.title=a[n.title]);return o}function getUIComponentName(o){return`imageStyle:${o}`}function getDropdownButtonTitle(o,a){return(o?o+": ":"")+a}class ImageStyle extends Plugin{static get requires(){return[ImageStyleEditing,ImageStyleUI]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}}class ImageToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository,ImageUtils]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const a=this.editor,n=a.t,s=a.plugins.get(WidgetToolbarRepository),l=a.plugins.get("ImageUtils");s.register("image",{ariaLabel:n("Image toolbar"),items:normalizeDeclarativeConfig(a.config.get("image.toolbar")||[]),getRelatedElement:c=>l.getClosestSelectedImageWidget(c)})}}function normalizeDeclarativeConfig(o){return o.map(a=>isObject$6(a)?a.name:a)}class PictureEditing extends Plugin{static get requires(){return[ImageEditing,ImageUtils]}static get pluginName(){return"PictureEditing"}static get isOfficialPlugin(){return!0}afterInit(){const a=this.editor;a.plugins.has("ImageBlockEditing")&&a.model.schema.extend("imageBlock",{allowAttributes:["sources"]}),a.plugins.has("ImageInlineEditing")&&a.model.schema.extend("imageInline",{allowAttributes:["sources"]}),this._setupConversion(),this._setupImageUploadEditingIntegration()}_setupConversion(){const a=this.editor,n=a.conversion,s=a.plugins.get("ImageUtils");n.for("upcast").add(upcastPicture(s)),n.for("downcast").add(downcastSourcesAttribute(s))}_setupImageUploadEditingIntegration(){const a=this.editor;if(!a.plugins.has("ImageUploadEditing"))return;const n=a.plugins.get("ImageUploadEditing");this.listenTo(n,"uploadComplete",(s,{imageElement:l,data:c})=>{const u=c.sources;u&&a.model.change(d=>{d.setAttributes({sources:u},l)})})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentEditing extends Plugin{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.commands.add("indent",new MultiCommand(a)),a.commands.add("outdent",new MultiCommand(a))}}class IndentUI extends Plugin{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale,s=a.t,l=n.uiLanguageDirection=="ltr"?icons.indent:icons.outdent,c=n.uiLanguageDirection=="ltr"?icons.outdent:icons.indent;this._defineButton("indent",s("Increase indent"),l),this._defineButton("outdent",s("Decrease indent"),c)}_defineButton(a,n,s){const l=this.editor;l.ui.componentFactory.add(a,()=>{const c=this._createButton(ButtonView,a,n,s);return c.set({tooltip:!0}),c}),l.ui.componentFactory.add("menuBar:"+a,()=>this._createButton(MenuBarMenuListItemButtonView,a,n,s))}_createButton(a,n,s,l){const c=this.editor,u=c.commands.get(n),d=new a(c.locale);return d.set({label:s,icon:l}),d.bind("isEnabled").to(u,"isEnabled"),this.listenTo(d,"execute",()=>{c.execute(n),c.editing.view.focus()}),d}}class Indent extends Plugin{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[IndentEditing,IndentUI]}}class IndentBlockCommand extends Command{constructor(n,s){super(n);M(this,"_indentBehavior");this._indentBehavior=s}refresh(){const s=this.editor.model,l=first(s.document.selection.getSelectedBlocks());if(!l||!this._isIndentationChangeAllowed(l)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(l.getAttribute("blockIndent"))}execute(){const n=this.editor.model,s=this._getBlocksToChange();n.change(l=>{for(const c of s){const u=c.getAttribute("blockIndent"),d=this._indentBehavior.getNextIndent(u);d?l.setAttribute("blockIndent",d,c):l.removeAttribute("blockIndent",c)}})}_getBlocksToChange(){const s=this.editor.model.document.selection;return Array.from(s.getSelectedBlocks()).filter(c=>this._isIndentationChangeAllowed(c))}_isIndentationChangeAllowed(n){const s=this.editor;return s.model.schema.checkAttribute(n,"blockIndent")?!s.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!s.plugins.get("ListUtils").isListItemBlock(n):!1}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingOffset{constructor(a){M(this,"isForward");M(this,"offset");M(this,"unit");this.isForward=a.direction==="forward",this.offset=a.offset,this.unit=a.unit}checkEnabled(a){const n=parseFloat(a||"0");return this.isForward||n>0}getNextIndent(a){const n=parseFloat(a||"0");if(!(!a||a.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;const l=this.isForward?this.offset:-this.offset,c=n+l;return c>0?c+this.unit:void 0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class IndentUsingClasses{constructor(a){M(this,"isForward");M(this,"classes");this.isForward=a.direction==="forward",this.classes=a.classes}checkEnabled(a){const n=this.classes.indexOf(a);return this.isForward?n<this.classes.length-1:n>=0}getNextIndent(a){const n=this.classes.indexOf(a),s=this.isForward?1:-1;return this.classes[n+s]}}const DEFAULT_ELEMENTS=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];class IndentBlock extends Plugin{constructor(a){super(a),a.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.config.get("indentBlock");n.classes&&n.classes.length?(this._setupConversionUsingClasses(n.classes),a.commands.add("indentBlock",new IndentBlockCommand(a,new IndentUsingClasses({direction:"forward",classes:n.classes}))),a.commands.add("outdentBlock",new IndentBlockCommand(a,new IndentUsingClasses({direction:"backward",classes:n.classes})))):(a.data.addStyleProcessorRules(addMarginRules),this._setupConversionUsingOffset(),a.commands.add("indentBlock",new IndentBlockCommand(a,new IndentUsingOffset({direction:"forward",offset:n.offset,unit:n.unit}))),a.commands.add("outdentBlock",new IndentBlockCommand(a,new IndentUsingOffset({direction:"backward",offset:n.offset,unit:n.unit}))))}afterInit(){const a=this.editor,n=a.model.schema,s=a.commands.get("indent"),l=a.commands.get("outdent"),c=a.config.get("heading.options");(c&&c.map(h=>h.model)||DEFAULT_ELEMENTS).forEach(h=>{n.isRegistered(h)&&n.extend(h,{allowAttributes:"blockIndent"})}),n.setAttributeProperties("blockIndent",{isFormatting:!0}),s.registerChildCommand(a.commands.get("indentBlock")),l.registerChildCommand(a.commands.get("outdentBlock"))}_setupConversionUsingOffset(){const a=this.editor.conversion,s=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";a.for("upcast").attributeToAttribute({view:{styles:{[s]:/[\s\S]+/}},model:{key:"blockIndent",value:l=>{if(!l.is("element","li"))return l.getStyle(s)}}}),a.for("downcast").attributeToAttribute({model:"blockIndent",view:l=>({key:"style",value:{[s]:l}})})}_setupConversionUsingClasses(a){const n={model:{key:"blockIndent",values:[]},view:{}};for(const s of a)n.model.values.push(s),n.view[s]={key:"class",value:[s]};this.editor.conversion.attributeToAttribute(n)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function stringifyLanguageAttribute(o,a){return a=a||getLanguageDirection(o),`${o}:${a}`}function parseLanguageAttribute(o){const[a,n]=o.split(":");return{languageCode:a,textDirection:n}}class TextPartLanguageCommand extends Command{refresh(){const a=this.editor.model,n=a.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=a.schema.checkAttributeInSelection(n.selection,"language")}execute({languageCode:a,textDirection:n}={}){const s=this.editor.model,c=s.document.selection,u=a?stringifyLanguageAttribute(a,n):!1;s.change(d=>{if(c.isCollapsed)u?d.setSelectionAttribute("language",u):d.removeSelectionAttribute("language");else{const h=s.schema.getValidRanges(c.getRanges(),"language");for(const f of h)u?d.setAttribute("language",u,f):d.removeAttribute("language",f)}})}_getValueFromFirstAllowedNode(){const a=this.editor.model,n=a.schema,s=a.document.selection;if(s.isCollapsed)return s.getAttribute("language")||!1;for(const l of s.getRanges())for(const c of l.getItems())if(n.checkAttribute(c,"language"))return c.getAttribute("language")||!1;return!1}}class TextPartLanguageEditing extends Plugin{static get pluginName(){return"TextPartLanguageEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("language",{textPartLanguage:[{title:"Arabic",languageCode:"ar"},{title:"French",languageCode:"fr"},{title:"Spanish",languageCode:"es"}]})}init(){const a=this.editor;a.model.schema.extend("$text",{allowAttributes:"language"}),a.model.schema.setAttributeProperties("language",{copyOnEnter:!0}),this._defineConverters(),a.commands.add("textPartLanguage",new TextPartLanguageCommand(a))}_defineConverters(){const a=this.editor.conversion;a.for("upcast").elementToAttribute({model:{key:"language",value:n=>{const s=n.getAttribute("lang"),l=n.getAttribute("dir");return stringifyLanguageAttribute(s,l)}},view:{name:"span",attributes:{lang:/[\s\S]+/}}}),a.for("downcast").attributeToElement({model:"language",view:(n,{writer:s},l)=>{if(!n||!l.item.is("$textProxy")&&!l.item.is("documentSelection"))return;const{languageCode:c,textDirection:u}=parseLanguageAttribute(n);return s.createAttributeElement("span",{lang:c,dir:u})}})}}class TextPartLanguageUI extends Plugin{static get pluginName(){return"TextPartLanguageUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t,s=n("Choose language"),l=n("Language");a.ui.componentFactory.add("textPartLanguage",c=>{const{definitions:u,titles:d}=this._getItemMetadata(),h=a.commands.get("textPartLanguage"),f=createDropdown(c);return addListToDropdown(f,u,{ariaLabel:l,role:"menu"}),f.buttonView.set({ariaLabel:l,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:l}),f.extendTemplate({attributes:{class:["ck-text-fragment-language-dropdown"]}}),f.bind("isEnabled").to(h,"isEnabled"),f.buttonView.bind("label").to(h,"value",p=>p&&d[p]||s),f.buttonView.bind("ariaLabel").to(h,"value",p=>{const g=p&&d[p];return g?`${g}, ${l}`:l}),this.listenTo(f,"execute",p=>{h.execute({languageCode:p.source.languageCode,textDirection:p.source.textDirection}),a.editing.view.focus()}),f}),a.ui.componentFactory.add("menuBar:textPartLanguage",c=>{const{definitions:u}=this._getItemMetadata(),d=a.commands.get("textPartLanguage"),h=new MenuBarMenuView(c);h.buttonView.set({label:l});const f=new MenuBarMenuListView(c);f.set({ariaLabel:n("Language"),role:"menu"});for(const p of u){if(p.type!="button"){f.items.add(new ListSeparatorView(c));continue}const g=new MenuBarMenuListItemView(c,h),v=new MenuBarMenuListItemButtonView(c);v.set({role:"menuitemradio",isToggleable:!0}),v.bind(...Object.keys(p.model)).to(p.model),v.delegate("execute").to(h),g.children.add(v),f.items.add(g)}return h.bind("isEnabled").to(d,"isEnabled"),h.panelView.children.add(f),h.on("execute",p=>{d.execute({languageCode:p.source.languageCode,textDirection:p.source.textDirection}),a.editing.view.focus()}),h})}_getItemMetadata(){const a=this.editor,n=new Collection,s={},l=a.commands.get("textPartLanguage"),c=a.config.get("language.textPartLanguage"),u=a.locale.t,d=u("Remove language");n.add({type:"button",model:new Model$1({label:d,languageCode:!1,withText:!0})}),n.add({type:"separator"});for(const h of c){const f={type:"button",model:new Model$1({label:h.title,languageCode:h.languageCode,role:"menuitemradio",textDirection:h.textDirection,withText:!0})},p=stringifyLanguageAttribute(h.languageCode,h.textDirection);f.model.bind("isOn").to(l,"value",g=>g===p),n.add(f),s[p]=h.title}return{definitions:n,titles:s}}}class TextPartLanguage extends Plugin{static get requires(){return[TextPartLanguageEditing,TextPartLanguageUI]}static get pluginName(){return"TextPartLanguage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class AutomaticDecorators{constructor(){M(this,"_definitions",new Set)}get length(){return this._definitions.size}add(a){Array.isArray(a)?a.forEach(n=>this._definitions.add(n)):this._definitions.add(a)}getDispatcher(){return a=>{a.on("attribute:linkHref",(n,s,l)=>{if(!l.consumable.test(s.item,"attribute:linkHref")||!(s.item.is("selection")||l.schema.isInline(s.item)))return;const c=l.writer,u=c.document.selection;for(const d of this._definitions){const h=c.createAttributeElement("a",d.attributes,{priority:5});d.classes&&c.addClass(d.classes,h);for(const f in d.styles)c.setStyle(f,d.styles[f],h);c.setCustomProperty("link",!0,h),d.callback(s.attributeNewValue)?s.item.is("selection")?c.wrap(u.getFirstRange(),h):c.wrap(l.mapper.toViewRange(s.range),h):c.unwrap(l.mapper.toViewRange(s.range),h)}},{priority:"high"})}}getDispatcherForLinkedImage(){return a=>{a.on("attribute:linkHref:imageBlock",(n,s,{writer:l,mapper:c})=>{const u=c.toViewElement(s.item),d=Array.from(u.getChildren()).find(h=>h.is("element","a"));if(d)for(const h of this._definitions){const f=toMap(h.attributes);if(h.callback(s.attributeNewValue)){for(const[p,g]of f)p==="class"?l.addClass(g,d):l.setAttribute(p,g,d);h.classes&&l.addClass(h.classes,d);for(const p in h.styles)l.setStyle(p,h.styles[p],d)}else{for(const[p,g]of f)p==="class"?l.removeClass(g,d):l.removeAttribute(p,d);h.classes&&l.removeClass(h.classes,d);for(const p in h.styles)l.removeStyle(p,d)}}})}}}const ATTRIBUTE_WHITESPACES=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,SAFE_URL_TEMPLATE="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",EMAIL_REG_EXP=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,PROTOCOL_REG_EXP=/^((\w+:(\/{2,})?)|(\W))/i,DEFAULT_LINK_PROTOCOLS=["https?","ftps?","mailto"],LINK_KEYSTROKE="Ctrl+K";function isLinkElement(o){return o.is("attributeElement")&&!!o.getCustomProperty("link")}function createLinkElement(o,{writer:a}){const n=a.createAttributeElement("a",{href:o},{priority:5});return a.setCustomProperty("link",!0,n),n}function ensureSafeUrl(o,a=DEFAULT_LINK_PROTOCOLS){const n=String(o),s=a.join("|"),l=new RegExp(`${SAFE_URL_TEMPLATE.replace("<protocols>",s)}`,"i");return isSafeUrl(n,l)?n:"#"}function isSafeUrl(o,a){return!!o.replace(ATTRIBUTE_WHITESPACES,"").match(a)}function getLocalizedDecorators(o,a){const n={"Open in a new tab":o("Open in a new tab"),Downloadable:o("Downloadable")};return a.forEach(s=>("label"in s&&n[s.label]&&(s.label=n[s.label]),s)),a}function normalizeDecorators(o){const a=[];if(o)for(const[n,s]of Object.entries(o)){const l=Object.assign({},s,{id:`link${upperFirst(n)}`});a.push(l)}return a}function isLinkableElement(o,a){return o?a.checkAttribute(o.name,"linkHref"):!1}function isEmail(o){return EMAIL_REG_EXP.test(o)}function addLinkProtocolIfApplicable(o,a){const n=isEmail(o)?"mailto:":a,s=!!n&&!linkHasProtocol(o);return o&&s?n+o:o}function linkHasProtocol(o){return PROTOCOL_REG_EXP.test(o)}function openLink(o){window.open(o,"_blank","noopener")}function createBookmarkCallbacks(o){const a=o.plugins.has("BookmarkEditing")?o.plugins.get("BookmarkEditing"):null;function n(l){return!!l&&l.startsWith("#")&&!!a&&!!a.getElementForBookmarkId(l.slice(1))}function s(l){const c=l.slice(1),u=a.getElementForBookmarkId(c);o.model.change(d=>{d.setSelection(u,"on")}),o.editing.view.scrollToTheSelection({alignToTop:!0,forceScroll:!0})}return{isScrollableToTarget:n,scrollToTarget:s}}class LinkCommand extends Command{constructor(){super(...arguments);M(this,"manualDecorators",new Collection);M(this,"automaticDecorators",new AutomaticDecorators)}restoreManualDecoratorStates(){for(const n of this.manualDecorators)n.value=this._getDecoratorStateFromModel(n.id)}refresh(){const n=this.editor.model,s=n.document.selection,l=s.getSelectedElement()||first(s.getSelectedBlocks());isLinkableElement(l,n.schema)?(this.value=l.getAttribute("linkHref"),this.isEnabled=n.schema.checkAttribute(l,"linkHref")):(this.value=s.getAttribute("linkHref"),this.isEnabled=n.schema.checkAttributeInSelection(s,"linkHref"));for(const c of this.manualDecorators)c.value=this._getDecoratorStateFromModel(c.id)}execute(n,s={}){const l=this.editor.model,c=l.document.selection,u=[],d=[];for(const h in s)s[h]?u.push(h):d.push(h);l.change(h=>{if(c.isCollapsed){const f=c.getFirstPosition();if(c.hasAttribute("linkHref")){const p=extractTextFromSelection(c);let g=findAttributeRange(f,"linkHref",c.getAttribute("linkHref"),l);c.getAttribute("linkHref")===p&&(g=this._updateLinkContent(l,h,g,n)),h.setAttribute("linkHref",n,g),u.forEach(v=>{h.setAttribute(v,!0,g)}),d.forEach(v=>{h.removeAttribute(v,g)}),h.setSelection(h.createPositionAfter(g.end.nodeBefore))}else if(n!==""){const p=toMap(c.getAttributes());p.set("linkHref",n),u.forEach(v=>{p.set(v,!0)});const{end:g}=l.insertContent(h.createText(n,p),f);h.setSelection(g)}["linkHref",...u,...d].forEach(p=>{h.removeSelectionAttribute(p)})}else{const f=l.schema.getValidRanges(c.getRanges(),"linkHref"),p=[];for(const v of c.getSelectedBlocks())l.schema.checkAttribute(v,"linkHref")&&p.push(h.createRangeOn(v));const g=p.slice();for(const v of f)this._isRangeToUpdate(v,p)&&g.push(v);for(const v of g){let b=v;if(g.length===1){const w=extractTextFromSelection(c);c.getAttribute("linkHref")===w&&(b=this._updateLinkContent(l,h,v,n),h.setSelection(h.createSelection(b)))}h.setAttribute("linkHref",n,b),u.forEach(w=>{h.setAttribute(w,!0,b)}),d.forEach(w=>{h.removeAttribute(w,b)})}}})}_getDecoratorStateFromModel(n){const s=this.editor.model,l=s.document.selection,c=l.getSelectedElement();return isLinkableElement(c,s.schema)?c.getAttribute(n):l.getAttribute(n)}_isRangeToUpdate(n,s){for(const l of s)if(l.containsRange(n))return!1;return!0}_updateLinkContent(n,s,l,c){const u=s.createText(c,{linkHref:c});return n.insertContent(u,l)}}function extractTextFromSelection(o){if(o.isCollapsed){const a=o.getFirstPosition();return a.textNode&&a.textNode.data}else{const a=Array.from(o.getFirstRange().getItems());if(a.length>1)return null;const n=a[0];return n.is("$text")||n.is("$textProxy")?n.data:null}}class UnlinkCommand extends Command{refresh(){const a=this.editor.model,n=a.document.selection,s=n.getSelectedElement();isLinkableElement(s,a.schema)?this.isEnabled=a.schema.checkAttribute(s,"linkHref"):this.isEnabled=a.schema.checkAttributeInSelection(n,"linkHref")}execute(){const a=this.editor,n=this.editor.model,s=n.document.selection,l=a.commands.get("link");n.change(c=>{const u=s.isCollapsed?[findAttributeRange(s.getFirstPosition(),"linkHref",s.getAttribute("linkHref"),n)]:n.schema.getValidRanges(s.getRanges(),"linkHref");for(const d of u)if(c.removeAttribute("linkHref",d),l)for(const h of l.manualDecorators)c.removeAttribute(h.id,d)})}}class ManualDecorator extends ObservableMixin(){constructor({id:n,label:s,attributes:l,classes:c,styles:u,defaultValue:d}){super();M(this,"id");M(this,"defaultValue");M(this,"label");M(this,"attributes");M(this,"classes");M(this,"styles");this.id=n,this.set("value",void 0),this.defaultValue=d,this.label=s,this.attributes=l,this.classes=c,this.styles=u}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}}const HIGHLIGHT_CLASS="ck-link_selected",DECORATOR_AUTOMATIC="automatic",DECORATOR_MANUAL="manual",EXTERNAL_LINKS_REGEXP=/^(https?:)?\/\//;class LinkEditing extends Plugin{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TwoStepCaretMovement,Input,ClipboardPipeline]}constructor(a){super(a),a.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){const a=this.editor,n=this.editor.config.get("link.allowedProtocols");a.model.schema.extend("$text",{allowAttributes:"linkHref"}),a.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:createLinkElement}),a.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(c,u)=>createLinkElement(ensureSafeUrl(c,n),u)}),a.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:c=>c.getAttribute("href")}}),a.commands.add("link",new LinkCommand(a)),a.commands.add("unlink",new UnlinkCommand(a));const s=getLocalizedDecorators(a.t,normalizeDecorators(a.config.get("link.decorators")));this._enableAutomaticDecorators(s.filter(c=>c.mode===DECORATOR_AUTOMATIC)),this._enableManualDecorators(s.filter(c=>c.mode===DECORATOR_MANUAL)),a.plugins.get(TwoStepCaretMovement).registerAttribute("linkHref"),inlineHighlight(a,"linkHref","a",HIGHLIGHT_CLASS),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(a){const n=this.editor,l=n.commands.get("link").automaticDecorators;n.config.get("link.addTargetToExternalLinks")&&l.add({id:"linkIsExternal",mode:DECORATOR_AUTOMATIC,callback:c=>!!c&&EXTERNAL_LINKS_REGEXP.test(c),attributes:{target:"_blank",rel:"noopener noreferrer"}}),l.add(a),l.length&&n.conversion.for("downcast").add(l.getDispatcher())}_enableManualDecorators(a){if(!a.length)return;const n=this.editor,l=n.commands.get("link").manualDecorators;a.forEach(c=>{n.model.schema.extend("$text",{allowAttributes:c.id});const u=new ManualDecorator(c);l.add(u),n.conversion.for("downcast").attributeToElement({model:u.id,view:(d,{writer:h,schema:f},{item:p})=>{if((p.is("selection")||f.isInline(p))&&d){const g=h.createAttributeElement("a",u.attributes,{priority:5});u.classes&&h.addClass(u.classes,g);for(const v in u.styles)h.setStyle(v,u.styles[v],g);return h.setCustomProperty("link",!0,g),g}}}),n.conversion.for("upcast").elementToAttribute({view:{name:"a",...u._createPattern()},model:{key:u.id}})})}_enableLinkOpen(){const a=this.editor,s=a.editing.view.document,l=createBookmarkCallbacks(a);function c(u){l.isScrollableToTarget(u)?l.scrollToTarget(u):openLink(u)}this.listenTo(s,"click",(u,d)=>{if(!(env$1.isMac?d.domEvent.metaKey:d.domEvent.ctrlKey))return;let f=d.domTarget;if(f.tagName.toLowerCase()!="a"&&(f=f.closest("a")),!f)return;const p=f.getAttribute("href");p&&(u.stop(),d.preventDefault(),c(p))},{context:"$capture"}),this.listenTo(s,"keydown",(u,d)=>{const f=a.commands.get("link").value;f&&d.keyCode===keyCodes.enter&&d.altKey&&(u.stop(),c(f))})}_enableSelectionAttributesFixer(){const n=this.editor.model,s=n.document.selection;this.listenTo(s,"change:attribute",(l,{attributeKeys:c})=>{!c.includes("linkHref")||s.hasAttribute("linkHref")||n.change(u=>{removeLinkAttributesFromSelection(u,getLinkAttributesAllowedOnText(n.schema))})})}_enableClipboardIntegration(){const a=this.editor,n=a.model,s=this.editor.config.get("link.defaultProtocol");s&&this.listenTo(a.plugins.get("ClipboardPipeline"),"contentInsertion",(l,c)=>{n.change(u=>{const d=u.createRangeIn(c.content);for(const h of d.getItems())if(h.hasAttribute("linkHref")){const f=addLinkProtocolIfApplicable(h.getAttribute("linkHref"),s);u.setAttribute("linkHref",f,h)}})})}}function removeLinkAttributesFromSelection(o,a){o.removeSelectionAttribute("linkHref");for(const n of a)o.removeSelectionAttribute(n)}function getLinkAttributesAllowedOnText(o){return o.getDefinition("$text").allowAttributes.filter(n=>n.startsWith("link"))}class LinkFormView extends View$1{constructor(n,s,l){super(n);M(this,"focusTracker",new FocusTracker);M(this,"keystrokes",new KeystrokeHandler);M(this,"urlInputView");M(this,"saveButtonView");M(this,"cancelButtonView");M(this,"_manualDecoratorSwitches");M(this,"children");M(this,"_validators");M(this,"_focusables",new ViewCollection);M(this,"_focusCycler");const c=n.t;this._validators=l,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(c("Save"),icons.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(c("Cancel"),icons.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(s),this.children=this._createFormChildren(s.manualDecorators),this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});const u=["ck","ck-link-form","ck-responsive-form"];s.manualDecorators.length&&u.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:u,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((n,s)=>(n[s.name]=s.isOn,n),{})}render(){super.render(),submitHandler({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(s=>{this._focusables.add(s),this.focusTracker.add(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(const n of this._validators){const s=n(this);if(s)return this.urlInputView.errorText=s,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){const n=this.locale.t,s=new LabeledFieldView(this.locale,createLabeledInputText);return s.fieldView.inputMode="url",s.label=n("Link URL"),s}_createButton(n,s,l,c){const u=new ButtonView(this.locale);return u.set({label:n,icon:s,tooltip:!0}),u.extendTemplate({attributes:{class:l}}),c&&u.delegate("execute").to(this,c),u}_createManualDecoratorSwitches(n){const s=this.createCollection();for(const l of n.manualDecorators){const c=new SwitchButtonView(this.locale);c.set({name:l.id,label:l.label,withText:!0}),c.bind("isOn").toMany([l,n],"value",(u,d)=>d===void 0&&u===void 0?!!l.defaultValue:!!u),c.on("execute",()=>{l.set("value",!c.isOn)}),s.add(c)}return s}_createFormChildren(n){const s=this.createCollection();if(s.add(this.urlInputView),n.length){const l=new View$1;l.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(c=>({tag:"li",children:[c],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),s.add(l)}return s.add(this.saveButtonView),s.add(this.cancelButtonView),s}get url(){const{element:n}=this.urlInputView.fieldView;return n?n.value.trim():null}}var unlinkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';class LinkActionsView extends View$1{constructor(n,s={},l){super(n);M(this,"focusTracker",new FocusTracker);M(this,"keystrokes",new KeystrokeHandler);M(this,"previewButtonView");M(this,"unlinkButtonView");M(this,"editButtonView");M(this,"_focusables",new ViewCollection);M(this,"_focusCycler");M(this,"_linkConfig");M(this,"_options");const c=n.t;this._options=l,this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(c("Unlink"),unlinkIcon,"unlink"),this.editButtonView=this._createButton(c("Edit link"),icons.pencil,"edit"),this.set("href",void 0),this._linkConfig=s,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(s=>{this._focusables.add(s),this.focusTracker.add(s.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(n,s,l){const c=new ButtonView(this.locale);return c.set({label:n,icon:s,tooltip:!0}),c.delegate("execute").to(this,l),c}_createPreviewButton(){const n=new ButtonView(this.locale),s=this.bindTemplate,l=this.t;return n.set({withText:!0}),n.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:s.to("href",c=>c&&ensureSafeUrl(c,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"},on:{click:s.to(c=>{this._options&&this._options.isScrollableToTarget(this.href)?(c.preventDefault(),this._options.scrollToTarget(this.href)):openLink(this.href)})}}),n.bind("tooltip").to(this,"href",c=>this._options&&this._options.isScrollableToTarget(c)?l("Scroll to target"):l("Open link in new tab")),n.bind("label").to(this,"href",c=>c||l("This link has no URL")),n.bind("isEnabled").to(this,"href",c=>!!c),n.template.tag="a",n}}var linkIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';const VISUAL_SELECTION_MARKER_NAME="link-ui";class LinkUI extends Plugin{constructor(){super(...arguments);M(this,"actionsView",null);M(this,"formView",null);M(this,"_balloon")}static get requires(){return[ContextualBalloon]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=this.editor.t;n.editing.view.addObserver(ClickObserver),this._balloon=n.plugins.get(ContextualBalloon),this._createToolbarLinkButton(),this._enableBalloonActivators(),n.conversion.for("editingDowncast").markerToHighlight({model:VISUAL_SELECTION_MARKER_NAME,view:{classes:["ck-fake-link-selection"]}}),n.conversion.for("editingDowncast").markerToElement({model:VISUAL_SELECTION_MARKER_NAME,view:(l,{writer:c})=>{if(!l.markerRange.isCollapsed)return null;const u=c.createUIElement("span");return c.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],u),u}}),n.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Create link"),keystroke:LINK_KEYSTROKE},{label:s("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){const n=this.editor,s=new LinkActionsView(n.locale,n.config.get("link"),createBookmarkCallbacks(n)),l=n.commands.get("link"),c=n.commands.get("unlink");return s.bind("href").to(l,"value"),s.editButtonView.bind("isEnabled").to(l),s.unlinkButtonView.bind("isEnabled").to(c),this.listenTo(s,"edit",()=>{this._addFormView()}),this.listenTo(s,"unlink",()=>{n.execute("unlink"),this._hideUI()}),s.keystrokes.set("Esc",(u,d)=>{this._hideUI(),d()}),s.keystrokes.set(LINK_KEYSTROKE,(u,d)=>{this._addFormView(),d()}),s}_createFormView(){const n=this.editor,s=n.commands.get("link"),l=n.config.get("link.defaultProtocol"),c=new(CssTransitionDisablerMixin(LinkFormView))(n.locale,s,getFormValidators$1(n));return c.urlInputView.fieldView.bind("value").to(s,"value"),c.urlInputView.bind("isEnabled").to(s,"isEnabled"),c.saveButtonView.bind("isEnabled").to(s,"isEnabled"),this.listenTo(c,"submit",()=>{if(c.isValid()){const{value:u}=c.urlInputView.fieldView.element,d=addLinkProtocolIfApplicable(u,l);n.execute("link",d,c.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(c.urlInputView,"change:errorText",()=>{n.ui.update()}),this.listenTo(c,"cancel",()=>{this._closeFormView()}),c.keystrokes.set("Esc",(u,d)=>{this._closeFormView(),d()}),c}_createToolbarLinkButton(){const n=this.editor;n.ui.componentFactory.add("link",()=>{const s=this._createButton(ButtonView);return s.set({tooltip:!0}),s}),n.ui.componentFactory.add("menuBar:link",()=>{const s=this._createButton(MenuBarMenuListItemButtonView);return s.set({role:"menuitemcheckbox"}),s})}_createButton(n){const s=this.editor,l=s.locale,c=s.commands.get("link"),u=new n(s.locale),d=l.t;return u.set({label:d("Link"),icon:linkIcon,keystroke:LINK_KEYSTROKE,isToggleable:!0}),u.bind("isEnabled").to(c,"isEnabled"),u.bind("isOn").to(c,"value",h=>!!h),this.listenTo(u,"execute",()=>this._showUI(!0)),u}_enableBalloonActivators(){const n=this.editor,s=n.editing.view.document;this.listenTo(s,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),n.keystrokes.set(LINK_KEYSTROKE,(l,c)=>{c(),n.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(n,s)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),s())},{priority:"high"}),this.editor.keystrokes.set("Esc",(n,s)=>{this._isUIVisible&&(this._hideUI(),s())}),clickOutsideHandler({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;const s=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=s.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){const n=this.editor.commands.get("link");n.restoreManualDecoratorStates(),n.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(n=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),n&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),n&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;const n=this.editor;this.stopListening(n.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),n.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){const n=this.editor,s=n.editing.view.document;let l=this._getSelectedLinkElement(),c=d();const u=()=>{const h=this._getSelectedLinkElement(),f=d();l&&!h||!l&&f!==c?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),l=h,c=f};function d(){return s.selection.focus.getAncestors().reverse().find(h=>h.is("element"))}this.listenTo(n.ui,"update",u),this.listenTo(this._balloon,"change:visibleView",u)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){const n=this._balloon.visibleView;return!!this.formView&&n==this.formView||this._areActionsVisible}_getBalloonPositionData(){const n=this.editor.editing.view,s=this.editor.model,l=n.document;let c;if(s.markers.has(VISUAL_SELECTION_MARKER_NAME)){const u=Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME)),d=n.createRange(n.createPositionBefore(u[0]),n.createPositionAfter(u[u.length-1]));c=n.domConverter.viewRangeToDom(d)}else c=()=>{const u=this._getSelectedLinkElement();return u?n.domConverter.mapViewToDom(u):n.domConverter.viewRangeToDom(l.selection.getFirstRange())};return{target:c}}_getSelectedLinkElement(){const n=this.editor.editing.view,s=n.document.selection,l=s.getSelectedElement();if(s.isCollapsed||l&&isWidget(l))return findLinkElementAncestor(s.getFirstPosition());{const c=s.getFirstRange().getTrimmed(),u=findLinkElementAncestor(c.start),d=findLinkElementAncestor(c.end);return!u||u!=d?null:n.createRangeIn(u).getTrimmed().isEqual(c)?u:null}}_showFakeVisualSelection(){const n=this.editor.model;n.change(s=>{const l=n.document.selection.getFirstRange();if(n.markers.has(VISUAL_SELECTION_MARKER_NAME))s.updateMarker(VISUAL_SELECTION_MARKER_NAME,{range:l});else if(l.start.isAtEnd){const c=l.start.getLastMatchingPosition(({item:u})=>!n.schema.isContent(u),{boundaries:l});s.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:s.createRange(c,l.end)})}else s.addMarker(VISUAL_SELECTION_MARKER_NAME,{usingOperation:!1,affectsData:!1,range:l})})}_hideFakeVisualSelection(){const n=this.editor.model;n.markers.has(VISUAL_SELECTION_MARKER_NAME)&&n.change(s=>{s.removeMarker(VISUAL_SELECTION_MARKER_NAME)})}}function findLinkElementAncestor(o){return o.getAncestors().find(a=>isLinkElement(a))||null}function getFormValidators$1(o){const a=o.t,n=o.config.get("link.allowCreatingEmptyLinks");return[s=>{if(!n&&!s.url.length)return a("Link URL must not be empty.")}]}const MIN_LINK_LENGTH_WITH_SPACE_AT_END=4,URL_REG_EXP=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),URL_GROUP_IN_MATCH=2;class AutoLink extends Plugin{static get requires(){return[Delete,LinkEditing]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){const n=this.editor.model.document.selection;n.on("change:range",()=>{this.isEnabled=!n.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(a,n){return n.textNode&&n.textNode.hasAttribute("linkHref")?findAttributeRange(n,"linkHref",n.textNode.getAttribute("linkHref"),a):null}_selectEntireLinks(a,n){const l=this.editor.model,c=l.document.selection,u=c.getFirstPosition(),d=c.getLastPosition();let h=n.getJoined(this._expandLinkRange(l,u)||n);h&&(h=h.getJoined(this._expandLinkRange(l,d)||n)),h&&(h.start.isBefore(u)||h.end.isAfter(d))&&a.setSelection(h)}_enablePasteLinking(){const a=this.editor,n=a.model,s=n.document.selection,l=a.plugins.get("ClipboardPipeline"),c=a.commands.get("link");l.on("inputTransformation",(u,d)=>{if(!this.isEnabled||!c.isEnabled||s.isCollapsed||d.method!=="paste"||s.rangeCount>1)return;const h=s.getFirstRange(),f=d.dataTransfer.getData("text/plain");if(!f)return;const p=f.match(URL_REG_EXP);p&&p[2]===f&&(n.change(g=>{this._selectEntireLinks(g,h),c.execute(f)}),u.stop())},{priority:"high"})}_enableTypingHandling(){const a=this.editor,n=new TextWatcher(a.model,s=>{let l=s;if(!isSingleSpaceAtTheEnd(l))return;l=l.slice(0,-1),"!.:,;?".includes(l[l.length-1])&&(l=l.slice(0,-1));const c=getUrlAtTextEnd(l);if(c)return{url:c,removedTrailingCharacters:s.length-l.length}});n.on("matched:data",(s,l)=>{const{batch:c,range:u,url:d,removedTrailingCharacters:h}=l;if(!c.isTyping)return;const f=u.end.getShiftedBy(-h),p=f.getShiftedBy(-d.length),g=a.model.createRange(p,f);this._applyAutoLink(d,g)}),n.bind("isEnabled").to(this)}_enableEnterHandling(){const a=this.editor,n=a.model,s=a.commands.get("enter");s&&s.on("execute",()=>{const l=n.document.selection.getFirstPosition();if(!l.parent.previousSibling)return;const c=n.createRangeIn(l.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(c)})}_enableShiftEnterHandling(){const a=this.editor,n=a.model,s=a.commands.get("shiftEnter");s&&s.on("execute",()=>{const l=n.document.selection.getFirstPosition(),c=n.createRange(n.createPositionAt(l.parent,0),l.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(c)})}_checkAndApplyAutoLinkOnRange(a){const n=this.editor.model,{text:s,range:l}=getLastTextLine(a,n),c=getUrlAtTextEnd(s);if(c){const u=n.createRange(l.end.getShiftedBy(-c.length),l.end);this._applyAutoLink(c,u)}}_applyAutoLink(a,n){const s=this.editor.model,l=this.editor.config.get("link.defaultProtocol"),c=addLinkProtocolIfApplicable(a,l);!this.isEnabled||!isLinkAllowedOnRange(n,s)||!linkHasProtocol(c)||linkIsAlreadySet(n)||this._persistAutoLink(c,n)}_persistAutoLink(a,n){const s=this.editor.model,l=this.editor.plugins.get("Delete");s.enqueueChange(c=>{c.setAttribute("linkHref",a,n),s.enqueueChange(()=>{l.requestUndoOnBackspace()})})}}function isSingleSpaceAtTheEnd(o){return o.length>MIN_LINK_LENGTH_WITH_SPACE_AT_END&&o[o.length-1]===" "&&o[o.length-2]!==" "}function getUrlAtTextEnd(o){const a=URL_REG_EXP.exec(o);return a?a[URL_GROUP_IN_MATCH]:null}function isLinkAllowedOnRange(o,a){return a.schema.checkAttributeInSelection(a.createSelection(o),"linkHref")}function linkIsAlreadySet(o){const a=o.start.nodeAfter;return!!a&&a.hasAttribute("linkHref")}let Link$1=class extends Plugin{static get requires(){return[LinkEditing,LinkUI,AutoLink]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}};class LinkImageEditing extends Plugin{static get requires(){return["ImageEditing","ImageUtils",LinkEditing]}static get pluginName(){return"LinkImageEditing"}static get isOfficialPlugin(){return!0}afterInit(){const a=this.editor,n=a.model.schema;a.plugins.has("ImageBlockEditing")&&n.extend("imageBlock",{allowAttributes:["linkHref"]}),a.conversion.for("upcast").add(upcastLink(a)),a.conversion.for("downcast").add(downcastImageLink(a)),this._enableAutomaticDecorators(),this._enableManualDecorators()}_enableAutomaticDecorators(){const a=this.editor,s=a.commands.get("link").automaticDecorators;s.length&&a.conversion.for("downcast").add(s.getDispatcherForLinkedImage())}_enableManualDecorators(){const a=this.editor,n=a.commands.get("link");for(const s of n.manualDecorators)a.plugins.has("ImageBlockEditing")&&a.model.schema.extend("imageBlock",{allowAttributes:s.id}),a.plugins.has("ImageInlineEditing")&&a.model.schema.extend("imageInline",{allowAttributes:s.id}),a.conversion.for("downcast").add(downcastImageLinkManualDecorator(s)),a.conversion.for("upcast").add(upcastImageLinkManualDecorator(a,s))}}function upcastLink(o){const a=o.plugins.has("ImageInlineEditing"),n=o.plugins.get("ImageUtils");return s=>{s.on("element:a",(l,c,u)=>{const d=c.viewItem,h=n.findViewImgElement(d);if(!h)return;const f=h.findAncestor(b=>n.isBlockImageView(b));if(a&&!f)return;const p={attributes:["href"]};if(!u.consumable.consume(d,p))return;const g=d.getAttribute("href");if(!g)return;let v=c.modelCursor.parent;if(!v.is("element","imageBlock")){const b=u.convertItem(h,c.modelCursor);c.modelRange=b.modelRange,c.modelCursor=b.modelCursor,v=c.modelCursor.nodeBefore}v&&v.is("element","imageBlock")&&u.writer.setAttribute("linkHref",g,v)},{priority:"high"})}}function downcastImageLink(o){const a=o.plugins.get("ImageUtils");return n=>{n.on("attribute:linkHref:imageBlock",(s,l,c)=>{if(!c.consumable.consume(l.item,s.name))return;const u=c.mapper.toViewElement(l.item),d=c.writer,h=Array.from(u.getChildren()).find(g=>g.is("element","a")),f=a.findViewImgElement(u),p=f.parent.is("element","picture")?f.parent:f;if(h)l.attributeNewValue?d.setAttribute("href",l.attributeNewValue,h):(d.move(d.createRangeOn(p),d.createPositionAt(u,0)),d.remove(h));else{const g=d.createContainerElement("a",{href:l.attributeNewValue});d.insert(d.createPositionAt(u,0),g),d.move(d.createRangeOn(p),d.createPositionAt(g,0))}},{priority:"high"})}}function downcastImageLinkManualDecorator(o){return a=>{a.on(`attribute:${o.id}:imageBlock`,(n,s,l)=>{const c=l.mapper.toViewElement(s.item),u=Array.from(c.getChildren()).find(d=>d.is("element","a"));if(u){for(const[d,h]of toMap(o.attributes))l.writer.setAttribute(d,h,u);o.classes&&l.writer.addClass(o.classes,u);for(const d in o.styles)l.writer.setStyle(d,o.styles[d],u)}})}}function upcastImageLinkManualDecorator(o,a){const n=o.plugins.has("ImageInlineEditing"),s=o.plugins.get("ImageUtils");return l=>{l.on("element:a",(c,u,d)=>{const h=u.viewItem,f=s.findViewImgElement(h);if(!f)return;const p=f.findAncestor(w=>s.isBlockImageView(w));if(n&&!p)return;const v=new Matcher(a._createPattern()).match(h);if(!v||!d.consumable.consume(h,v.match))return;const b=u.modelCursor.nodeBefore||u.modelCursor.parent;d.writer.setAttribute(a.id,!0,b)},{priority:"high"})}}class LinkImageUI extends Plugin{static get requires(){return[LinkEditing,LinkUI,"ImageBlockEditing"]}static get pluginName(){return"LinkImageUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.editing.view.document;this.listenTo(n,"click",(s,l)=>{this._isSelectedLinkedImage(a.model.document.selection)&&(l.preventDefault(),s.stop())},{priority:"high"}),this._createToolbarLinkImageButton()}_createToolbarLinkImageButton(){const a=this.editor,n=a.t;a.ui.componentFactory.add("linkImage",s=>{const l=new ButtonView(s),c=a.plugins.get("LinkUI"),u=a.commands.get("link");return l.set({isEnabled:!0,label:n("Link image"),icon:linkIcon,keystroke:LINK_KEYSTROKE,tooltip:!0,isToggleable:!0}),l.bind("isEnabled").to(u,"isEnabled"),l.bind("isOn").to(u,"value",d=>!!d),this.listenTo(l,"execute",()=>{this._isSelectedLinkedImage(a.model.document.selection)?c._addActionsView():c._showUI(!0)}),l})}_isSelectedLinkedImage(a){const n=a.getSelectedElement();return this.editor.plugins.get("ImageUtils").isImage(n)&&n.hasAttribute("linkHref")}}class LinkImage extends Plugin{static get requires(){return[LinkImageEditing,LinkImageUI]}static get pluginName(){return"LinkImage"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ListWalker{constructor(a,n){M(this,"_startElement");M(this,"_referenceIndent");M(this,"_isForward");M(this,"_includeSelf");M(this,"_sameAttributes");M(this,"_sameIndent");M(this,"_lowerIndent");M(this,"_higherIndent");this._startElement=a,this._referenceIndent=a.getAttribute("listIndent"),this._isForward=n.direction=="forward",this._includeSelf=!!n.includeSelf,this._sameAttributes=toArray$2(n.sameAttributes||[]),this._sameIndent=!!n.sameIndent,this._lowerIndent=!!n.lowerIndent,this._higherIndent=!!n.higherIndent}static first(a,n){const l=new this(a,n)[Symbol.iterator]();return first(l)}*[Symbol.iterator](){const a=[];for(const{node:n}of new SiblingListBlocksIterator(this._getStartNode(),this._isForward?"forward":"backward")){const s=n.getAttribute("listIndent");if(s<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=s}else if(s>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){a.push(n);continue}}else{if(!this._sameIndent){if(this._higherIndent){a.length&&(yield*a,a.length=0);break}continue}if(this._sameAttributes.some(l=>n.getAttribute(l)!==this._startElement.getAttribute(l)))break}a.length&&(yield*a,a.length=0),yield n}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}}class SiblingListBlocksIterator{constructor(a,n="forward"){M(this,"_node");M(this,"_isForward");M(this,"_previousNodesByIndent",[]);M(this,"_previous",null);M(this,"_previousNodeIndent",null);this._node=a,this._isForward=n==="forward"}[Symbol.iterator](){return this}next(){if(!isListItemBlock(this._node))return{done:!0,value:void 0};const a=this._node.getAttribute("listIndent");let n=null;if(this._previous){const l=this._previousNodeIndent;a>l?this._previousNodesByIndent[l]=this._previous:a<l?(n=this._previousNodesByIndent[a]||null,this._previousNodesByIndent.length=a):n=this._previous}const s={node:this._node,previous:this._previous,previousNodeInList:n};return this._previous=this._node,this._previousNodeIndent=a,this._node=this._isForward?this._node.nextSibling:this._node.previousSibling,{value:s,done:!1}}}class ListBlocksIterable{constructor(a){M(this,"_listHead");this._listHead=a}[Symbol.iterator](){return new SiblingListBlocksIterator(this._listHead)}}class ListItemUid{static next(){return uid()}}function isListItemBlock(o){return!!o&&o.is("element")&&o.hasAttribute("listItemId")}function getAllListItemBlocks(o,a={}){return[...getListItemBlocks(o,{...a,direction:"backward"}),...getListItemBlocks(o,{...a,direction:"forward"})]}function getListItemBlocks(o,a={}){const n=a.direction=="forward",s=Array.from(new ListWalker(o,{...a,includeSelf:n,sameIndent:!0,sameAttributes:"listItemId"}));return n?s:s.reverse()}function getNestedListBlocks(o){return Array.from(new ListWalker(o,{direction:"forward",higherIndent:!0}))}function getListItems(o,a){const n=new ListWalker(o,{sameIndent:!0,sameAttributes:"listType",...a}),s=new ListWalker(o,{sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward",...a});return[...Array.from(n).reverse(),...s]}function isFirstBlockOfListItem(o){return!ListWalker.first(o,{sameIndent:!0,sameAttributes:"listItemId"})}function isLastBlockOfListItem(o){return!ListWalker.first(o,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function expandListBlocksToCompleteItems(o,a={}){o=toArray$2(o);const n=a.withNested!==!1,s=new Set;for(const l of o)for(const c of getAllListItemBlocks(l,{higherIndent:n}))s.add(c);return sortBlocks(s)}function expandListBlocksToCompleteList(o){o=toArray$2(o);const a=new Set;for(const n of o)for(const s of getListItems(n))a.add(s);return sortBlocks(a)}function splitListItemBefore(o,a){const n=getListItemBlocks(o,{direction:"forward"}),s=ListItemUid.next();for(const l of n)a.setAttribute("listItemId",s,l);return n}function mergeListItemBefore(o,a,n){const s={};for(const[c,u]of a.getAttributes())c.startsWith("list")&&(s[c]=u);const l=getListItemBlocks(o,{direction:"forward"});for(const c of l)n.setAttributes(s,c);return l}function indentBlocks(o,a,{expand:n,indentBy:s=1}={}){o=toArray$2(o);const l=n?expandListBlocksToCompleteItems(o):o;for(const c of l){const u=c.getAttribute("listIndent")+s;u<0?removeListAttributes(c,a):a.setAttribute("listIndent",u,c)}return l}function outdentBlocksWithMerge(o,a){o=toArray$2(o);const n=expandListBlocksToCompleteItems(o),s=new Set,l=Math.min(...n.map(u=>u.getAttribute("listIndent"))),c=new Map;for(const u of n)c.set(u,ListWalker.first(u,{lowerIndent:!0}));for(const u of n){if(s.has(u))continue;s.add(u);const d=u.getAttribute("listIndent")-1;if(d<0){removeListAttributes(u,a);continue}if(u.getAttribute("listIndent")==l){const h=mergeListItemIfNotLast(u,c.get(u),a);for(const f of h)s.add(f);if(h.length)continue}a.setAttribute("listIndent",d,u)}return sortBlocks(s)}function removeListAttributes(o,a){o=toArray$2(o);for(const n of o)n.is("element","listItem")&&a.rename(n,"paragraph");for(const n of o)for(const s of n.getAttributeKeys())s.startsWith("list")&&a.removeAttribute(s,n);return o}function isSingleListItem(o){if(!o.length)return!1;const a=o[0].getAttribute("listItemId");return a?!o.some(n=>n.getAttribute("listItemId")!=a):!1}function outdentFollowingItems(o,a){const n=[];let s=Number.POSITIVE_INFINITY;for(const{node:l}of new SiblingListBlocksIterator(o.nextSibling)){const c=l.getAttribute("listIndent");if(c==0)break;c<s&&(s=c);const u=c-s;a.setAttribute("listIndent",u,l),n.push(l)}return n}function sortBlocks(o){return Array.from(o).filter(a=>a.root.rootName!=="$graveyard").sort((a,n)=>a.index-n.index)}function getSelectedBlockObject(o){const a=o.document.selection.getSelectedElement();return a&&o.schema.isObject(a)&&o.schema.isBlock(a)?a:null}function canBecomeSimpleListItem(o,a){return a.checkChild(o.parent,"listItem")&&a.checkChild(o,"$text")&&!a.isObject(o)}function isNumberedListType(o){return o=="numbered"||o=="customNumbered"}function mergeListItemIfNotLast(o,a,n){return getListItemBlocks(a,{direction:"forward"}).pop().index>o.index?mergeListItemBefore(o,a,n):[]}class ListIndentCommand extends Command{constructor(n,s){super(n);M(this,"_direction");this._direction=s}refresh(){this.isEnabled=this._checkEnabled()}execute(){const n=this.editor.model,s=getSelectedListBlocks(n.document.selection);n.change(l=>{const c=[];isSingleListItem(s)&&!isFirstBlockOfListItem(s[0])?(this._direction=="forward"&&c.push(...indentBlocks(s,l)),c.push(...splitListItemBefore(s[0],l))):this._direction=="forward"?c.push(...indentBlocks(s,l,{expand:!0})):c.push(...outdentBlocksWithMerge(s,l));for(const u of c){if(!u.hasAttribute("listType"))continue;const d=ListWalker.first(u,{sameIndent:!0});d&&l.setAttribute("listType",d.getAttribute("listType"),u)}this._fireAfterExecute(c)})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_checkEnabled(){let n=getSelectedListBlocks(this.editor.model.document.selection),s=n[0];if(!s)return!1;if(this._direction=="backward"||isSingleListItem(n)&&!isFirstBlockOfListItem(n[0]))return!0;n=expandListBlocksToCompleteItems(n),s=n[0];const l=ListWalker.first(s,{sameIndent:!0});return l?l.getAttribute("listType")==s.getAttribute("listType"):!1}}function getSelectedListBlocks(o){const a=Array.from(o.getSelectedBlocks()),n=a.findIndex(s=>!isListItemBlock(s));return n!=-1&&(a.length=n),a}class ListCommand extends Command{constructor(n,s,l={}){super(n);M(this,"type");M(this,"_listWalkerOptions");this.type=s,this._listWalkerOptions=l.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(n={}){const s=this.editor.model,l=s.document,c=getSelectedBlockObject(s),u=Array.from(l.selection.getSelectedBlocks()).filter(h=>s.schema.checkAttribute(h,"listType")||canBecomeSimpleListItem(h,s.schema)),d=n.forceValue!==void 0?!n.forceValue:this.value;s.change(h=>{if(d){const f=u[u.length-1],p=getListItemBlocks(f,{direction:"forward"}),g=[];p.length>1&&g.push(...splitListItemBefore(p[1],h)),g.push(...removeListAttributes(u,h)),g.push(...outdentFollowingItems(f,h)),this._fireAfterExecute(g)}else if((c||l.selection.isCollapsed)&&isListItemBlock(u[0])){const f=getListItems(c||u[0],this._listWalkerOptions);for(const p of f)h.setAttributes({...n.additionalAttributes,listType:this.type},p);this._fireAfterExecute(f)}else{const f=[];for(const p of u)if(!p.hasAttribute("listType"))!p.is("element","listItem")&&canBecomeSimpleListItem(p,s.schema)&&h.rename(p,"listItem"),h.setAttributes({...n.additionalAttributes,listIndent:0,listItemId:ListItemUid.next(),listType:this.type},p),f.push(p);else for(const g of expandListBlocksToCompleteItems(p,{withNested:!1}))g.getAttribute("listType")!=this.type&&(h.setAttributes({...n.additionalAttributes,listType:this.type},g),f.push(g));this._fireAfterExecute(f)}})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_getValue(){const n=this.editor.model.document.selection,s=Array.from(n.getSelectedBlocks());if(!s.length)return!1;for(const l of s)if(l.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){const n=this.editor.model,s=n.schema,l=n.document.selection,c=Array.from(l.getSelectedBlocks());if(!c.length)return!1;if(this.value)return!0;for(const u of c)if(s.checkAttribute(u,"listType")||canBecomeSimpleListItem(u,s))return!0;return!1}}class ListMergeCommand extends Command{constructor(n,s){super(n);M(this,"_direction");this._direction=s}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:n=!1}={}){const s=this.editor.model,l=s.document.selection,c=[];s.change(u=>{const{firstElement:d,lastElement:h}=this._getMergeSubjectElements(l,n),f=d.getAttribute("listIndent")||0,p=h.getAttribute("listIndent"),g=h.getAttribute("listItemId");if(f!=p){const v=getNestedListBlocks(h);c.push(...indentBlocks([h,...v],u,{indentBy:f-p,expand:f<p}))}if(n){let v=l;l.isCollapsed&&(v=u.createSelection(u.createRange(u.createPositionAt(d,"end"),u.createPositionAt(h,0)))),s.deleteContent(v,{doNotResetEntireContent:l.isCollapsed});const b=v.getLastPosition().parent,w=b.nextSibling;c.push(b),w&&w!==h&&w.getAttribute("listItemId")==g&&c.push(...mergeListItemBefore(w,b,u))}else c.push(...mergeListItemBefore(h,d,u));this._fireAfterExecute(c)})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_checkEnabled(){const n=this.editor.model,s=n.document.selection,l=getSelectedBlockObject(n);if(s.isCollapsed||l){const c=l||s.getFirstPosition().parent;if(!isListItemBlock(c))return!1;const u=this._direction=="backward"?c.previousSibling:c.nextSibling;if(!u||isSingleListItem([c,u]))return!1}else{const c=s.getLastPosition(),u=s.getFirstPosition();if(c.parent===u.parent||!isListItemBlock(c.parent))return!1}return!0}_getMergeSubjectElements(n,s){const l=this.editor.model,c=getSelectedBlockObject(l);let u,d;if(n.isCollapsed||c){const h=c||n.getFirstPosition().parent,f=isFirstBlockOfListItem(h);this._direction=="backward"?(d=h,f&&!s?u=ListWalker.first(h,{sameIndent:!0,lowerIndent:!0}):u=h.previousSibling):(u=h,d=h.nextSibling)}else u=n.getFirstPosition().parent,d=n.getLastPosition().parent;return{firstElement:u,lastElement:d}}}class ListSplitCommand extends Command{constructor(n,s){super(n);M(this,"_direction");this._direction=s}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(s=>{const l=splitListItemBefore(this._getStartBlock(),s);this._fireAfterExecute(l)})}_fireAfterExecute(n){this.fire("afterExecute",sortBlocks(new Set(n)))}_checkEnabled(){const n=this.editor.model.document.selection,s=this._getStartBlock();return n.isCollapsed&&isListItemBlock(s)&&!isFirstBlockOfListItem(s)}_getStartBlock(){const s=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?s:s.nextSibling}}class ListUtils extends Plugin{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(a){return expandListBlocksToCompleteList(a)}isFirstBlockOfListItem(a){return isFirstBlockOfListItem(a)}isListItemBlock(a){return isListItemBlock(a)}expandListBlocksToCompleteItems(a,n={}){return expandListBlocksToCompleteItems(a,n)}isNumberedListType(a){return isNumberedListType(a)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function isListView(o){return o.is("element","ol")||o.is("element","ul")}function isListItemView(o){return o.is("element","li")}function getIndent$1(o){let a=0,n=o.parent;for(;n;){if(isListItemView(n))a++;else{const s=n.previousSibling;s&&isListItemView(s)&&a++}n=n.parent}return a}function createListElement(o,a,n,s=getViewElementIdForListType(n,a)){return o.createAttributeElement(getViewElementNameForListType(n),null,{priority:2*a/100-100,id:s})}function createListItemElement(o,a,n){return o.createAttributeElement("li",null,{priority:(2*a+1)/100-100,id:n})}function getViewElementNameForListType(o){return o=="numbered"||o=="customNumbered"?"ol":"ul"}function getViewElementIdForListType(o,a){return`list-${o}-${a}`}function findAndAddListHeadToMap(o,a,n){const s=o.nodeBefore;if(isListItemBlock(s)){let l=s;for(const{node:c}of new SiblingListBlocksIterator(l,"backward"))if(l=c,n.has(l)||(n.add(l),a.has(s)))return;a.add(l)}else{const l=o.nodeAfter;isListItemBlock(l)&&a.add(l)}}function fixListIndents(o,a){let n=0,s=-1,l=null,c=!1;for(const{node:u}of o){const d=u.getAttribute("listIndent");if(d>n){let h;l===null?(l=d-n,h=n):(l>d&&(l=d),h=d-l),h>s+1&&(h=s+1),a.setAttribute("listIndent",h,u),c=!0,s=h}else l=null,n=d+1,s=d}return c}function fixListItemIds(o,a,n){const s=new Set;let l=!1;for(const{node:c}of o){if(s.has(c))continue;let u=c.getAttribute("listType"),d=c.getAttribute("listItemId");if(a.has(d)&&(d=ListItemUid.next()),a.add(d),c.is("element","listItem")){c.getAttribute("listItemId")!=d&&(n.setAttribute("listItemId",d,c),l=!0);continue}for(const h of getListItemBlocks(c,{direction:"forward"}))s.add(h),h.getAttribute("listType")!=u&&(d=ListItemUid.next(),u=h.getAttribute("listType")),h.getAttribute("listItemId")!=d&&(n.setAttribute("listItemId",d,h),l=!0)}return l}function listItemUpcastConverter(){return(o,a,n)=>{const{writer:s,schema:l}=n;if(!a.modelRange)return;const c=Array.from(a.modelRange.getItems({shallow:!0})).filter(g=>l.checkAttribute(g,"listItemId"));if(!c.length)return;const u=ListItemUid.next(),d=getIndent$1(a.viewItem);let h=a.viewItem.parent&&a.viewItem.parent.is("element","ol")?"numbered":"bulleted";const f=c[0].getAttribute("listType");f&&(h=f);const p={listItemId:u,listIndent:d,listType:h};for(const g of c)g.hasAttribute("listItemId")||s.setAttributes(p,g);c.length>1&&c[1].getAttribute("listItemId")!=p.listItemId&&n.keepEmptyElement(c[0])}}function reconvertItemsOnDataChange(o,a,n,s){return()=>{const d=o.document.differ.getChanges(),h=[],f=new Set,p=new Set,g=new Set;for(const v of d)if(v.type=="insert"&&v.name!="$text")findAndAddListHeadToMap(v.position,f,g),v.attributes.has("listItemId")?p.add(v.position.nodeAfter):findAndAddListHeadToMap(v.position.getShiftedBy(v.length),f,g);else if(v.type=="remove"&&v.attributes.has("listItemId"))findAndAddListHeadToMap(v.position,f,g);else if(v.type=="attribute"){const b=v.range.start.nodeAfter;n.includes(v.attributeKey)?(findAndAddListHeadToMap(v.range.start,f,g),v.attributeNewValue===null?(findAndAddListHeadToMap(v.range.start.getShiftedBy(1),f,g),c(b)&&h.push(b)):p.add(b)):isListItemBlock(b)&&c(b)&&h.push(b)}for(const v of f.values())h.push(...l(v,p));for(const v of new Set(h))a.reconvertItem(v)};function l(d,h){const f=[],p=new Set,g=[];for(const{node:v,previous:b}of new SiblingListBlocksIterator(d)){if(p.has(v))continue;const w=v.getAttribute("listIndent");b&&w<b.getAttribute("listIndent")&&(g.length=w+1),g[w]=Object.fromEntries(Array.from(v.getAttributes()).filter(([S])=>n.includes(S)));const x=getListItemBlocks(v,{direction:"forward"});for(const S of x)p.add(S),(c(S,x)||u(S,g,h))&&f.push(S)}return f}function c(d,h){const f=a.mapper.toViewElement(d);if(!f)return!1;if(s.fire("checkElement",{modelElement:d,viewElement:f}))return!0;if(!d.is("element","paragraph")&&!d.is("element","listItem"))return!1;const g=shouldUseBogusParagraph(d,n,h);return g&&f.is("element","p")?!0:!!(!g&&f.is("element","span"))}function u(d,h,f){if(f.has(d))return!1;const p=a.mapper.toViewElement(d);let g=h.length-1;for(let v=p.parent;!v.is("editableElement");v=v.parent){const b=isListItemView(v),w=isListView(v);if(!w&&!b)continue;const x=`checkAttributes:${b?"item":"list"}`;if(s.fire(x,{viewElement:v,modelAttributes:h[g]}))break;if(w&&(g--,g<0))return!1}return!0}}function listItemDowncastConverter(o,a,n,{dataPipeline:s}={}){const l=createAttributesConsumer(o);return(c,u,d)=>{const{writer:h,mapper:f,consumable:p}=d,g=u.item;if(!o.includes(u.attributeKey)||!l(g,p))return;const v=findMappedViewElement(g,f,n);removeCustomMarkerElements(v,h,f),unwrapListItemBlock(v,h);const b=insertCustomMarkerElements(g,v,a,h,{dataPipeline:s});wrapListItemBlock(g,b,a,h)}}function listItemDowncastRemoveConverter(o){return(a,n,s)=>{const{writer:l,mapper:c}=s,u=a.name.split(":")[1];if(!o.checkAttribute(u,"listItemId"))return;const d=c.toViewPosition(n.position),h=n.position.getShiftedBy(n.length),f=c.toViewPosition(h,{isPhantom:!0}),g=l.createRange(d,f).getTrimmed().end.nodeBefore;/* istanbul ignore next -- @preserve */g&&removeCustomMarkerElements(g,l,c)}}function bogusParagraphCreator(o,{dataPipeline:a}={}){return(n,{writer:s})=>{if(!shouldUseBogusParagraph(n,o))return null;if(!a)return s.createContainerElement("span",{class:"ck-list-bogus-paragraph"});const l=s.createContainerElement("p");return s.setCustomProperty("dataPipeline:transparentRendering",!0,l),l}}function findMappedViewElement(o,a,n){const s=n.createRangeOn(o);return a.toViewRange(s).getTrimmed().end.nodeBefore}function createModelToViewPositionMapper(o,a){return(n,s)=>{if(s.modelPosition.offset>0)return;const l=s.modelPosition.parent;if(!isListItemBlock(l)||!o.some(f=>f.scope=="itemMarker"&&f.canInjectMarkerIntoElement&&f.canInjectMarkerIntoElement(l)))return;const c=s.mapper.toViewElement(l),u=a.createRangeIn(c),d=u.getWalker();let h=u.start;for(const{item:f}of d){if(f.is("element")&&s.mapper.toModelElement(f)||f.is("$textProxy"))break;f.is("element")&&f.getCustomProperty("listItemMarker")&&(h=a.createPositionAfter(f),d.skip(({previousPosition:p})=>!p.isEqual(h)))}s.viewPosition=h}}function removeCustomMarkerElements(o,a,n){for(;o.parent.is("attributeElement")&&o.parent.getCustomProperty("listItemWrapper");)a.unwrap(a.createRangeOn(o),o.parent);const s=[];l(a.createPositionBefore(o).getWalker({direction:"backward"})),l(a.createRangeIn(o).getWalker());for(const c of s)a.remove(c);function l(c){for(const{item:u}of c){if(u.is("element")&&n.toModelElement(u))break;u.is("element")&&u.getCustomProperty("listItemMarker")&&s.push(u)}}}function insertCustomMarkerElements(o,a,n,s,{dataPipeline:l}){let c=s.createRangeOn(a);if(!isFirstBlockOfListItem(o))return c;for(const u of n){if(u.scope!="itemMarker")continue;const d=u.createElement(s,o,{dataPipeline:l});if(!d||(s.setCustomProperty("listItemMarker",!0,d),u.canInjectMarkerIntoElement&&u.canInjectMarkerIntoElement(o)?s.insert(s.createPositionAt(a,0),d):(s.insert(c.start,d),c=s.createRange(s.createPositionBefore(d),s.createPositionAfter(a))),!u.createWrapperElement||!u.canWrapElement))continue;const h=u.createWrapperElement(s,o,{dataPipeline:l});s.setCustomProperty("listItemWrapper",!0,h),u.canWrapElement(o)?c=s.wrap(c,h):(c=s.wrap(s.createRangeOn(d),h),c=s.createRange(c.start,s.createPositionAfter(a)))}return c}function unwrapListItemBlock(o,a){let n=o.parent;for(;n.is("attributeElement")&&["ul","ol","li"].includes(n.name);){const s=n.parent;a.unwrap(a.createRangeOn(o),n),n=s}}function wrapListItemBlock(o,a,n,s){if(!o.hasAttribute("listIndent"))return;const l=o.getAttribute("listIndent");let c=o;for(let u=l;u>=0;u--){const d=createListItemElement(s,u,c.getAttribute("listItemId")),h=createListElement(s,u,c.getAttribute("listType"));for(const f of n)(f.scope=="list"||f.scope=="item")&&c.hasAttribute(f.attributeName)&&f.setAttributeOnDowncast(s,c.getAttribute(f.attributeName),f.scope=="list"?h:d);if(a=s.wrap(a,d),a=s.wrap(a,h),u==0||(c=ListWalker.first(c,{lowerIndent:!0}),!c))break}}function createAttributesConsumer(o){return(a,n)=>{const s=[];for(const l of o)a.hasAttribute(l)&&s.push(`attribute:${l}`);return s.every(l=>n.test(a,l)!==!1)?(s.forEach(l=>n.consume(a,l)),!0):!1}}function shouldUseBogusParagraph(o,a,n=getAllListItemBlocks(o)){if(!isListItemBlock(o))return!1;for(const s of o.getAttributeKeys())if(!(s.startsWith("selection:")||s=="htmlEmptyBlock")&&!a.includes(s))return!1;return n.length<2}const LIST_BASE_ATTRIBUTES=["listType","listIndent","listItemId"];class ListEditing extends Plugin{constructor(n){super(n);M(this,"_downcastStrategies",[]);n.config.define("list.multiBlock",!0)}static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Enter,Delete,ListUtils,ClipboardPipeline]}init(){const n=this.editor,s=n.model,l=n.config.get("list.multiBlock");if(n.plugins.has("LegacyListEditing"))throw new CKEditorError("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});s.schema.register("$listItem",{allowAttributes:LIST_BASE_ATTRIBUTES}),l?(s.schema.extend("$container",{allowAttributesOf:"$listItem"}),s.schema.extend("$block",{allowAttributesOf:"$listItem"}),s.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):s.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(const c of LIST_BASE_ATTRIBUTES)s.schema.setAttributeProperties(c,{copyOnReplace:!0});n.commands.add("numberedList",new ListCommand(n,"numbered")),n.commands.add("bulletedList",new ListCommand(n,"bulleted")),n.commands.add("customNumberedList",new ListCommand(n,"customNumbered",{multiLevel:!0})),n.commands.add("customBulletedList",new ListCommand(n,"customBulleted",{multiLevel:!0})),n.commands.add("indentList",new ListIndentCommand(n,"forward")),n.commands.add("outdentList",new ListIndentCommand(n,"backward")),n.commands.add("splitListItemBefore",new ListSplitCommand(n,"before")),n.commands.add("splitListItemAfter",new ListSplitCommand(n,"after")),l&&(n.commands.add("mergeListItemBackward",new ListMergeCommand(n,"backward")),n.commands.add("mergeListItemForward",new ListMergeCommand(n,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){const s=this.editor.commands,l=s.get("indent"),c=s.get("outdent");l&&l.registerChildCommand(s.get("indentList"),{priority:"high"}),c&&c.registerChildCommand(s.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(n){this._downcastStrategies.push(n)}getListAttributeNames(){return[...LIST_BASE_ATTRIBUTES,...this._downcastStrategies.map(n=>n.attributeName)]}_setupDeleteIntegration(){const n=this.editor,s=n.commands.get("mergeListItemBackward"),l=n.commands.get("mergeListItemForward");this.listenTo(n.editing.view.document,"delete",(c,u)=>{const d=n.model.document.selection;getSelectedBlockObject(n.model)||n.model.change(()=>{const h=d.getFirstPosition();if(d.isCollapsed&&u.direction=="backward"){if(!h.isAtStart)return;const f=h.parent;if(!isListItemBlock(f))return;if(!ListWalker.first(f,{sameAttributes:"listType",sameIndent:!0})&&f.getAttribute("listIndent")===0)isLastBlockOfListItem(f)||n.execute("splitListItemAfter"),n.execute("outdentList");else{if(!s||!s.isEnabled)return;s.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(n.model,"backward")})}u.preventDefault(),c.stop()}else{if(d.isCollapsed&&!d.getLastPosition().isAtEnd||!l||!l.isEnabled)return;l.execute({shouldMergeOnBlocksContentLevel:shouldMergeOnBlocksContentLevel(n.model,"forward")}),u.preventDefault(),c.stop()}})},{context:"li"})}_setupEnterIntegration(){const n=this.editor,s=n.model,l=n.commands,c=l.get("enter");this.listenTo(n.editing.view.document,"enter",(u,d)=>{const h=s.document,f=h.selection.getFirstPosition().parent;if(h.selection.isCollapsed&&isListItemBlock(f)&&f.isEmpty&&!d.isSoft){const p=isFirstBlockOfListItem(f),g=isLastBlockOfListItem(f);p&&g?(n.execute("outdentList"),d.preventDefault(),u.stop()):p&&!g?(n.execute("splitListItemAfter"),d.preventDefault(),u.stop()):g&&(n.execute("splitListItemBefore"),d.preventDefault(),u.stop())}},{context:"li"}),this.listenTo(c,"afterExecute",()=>{const u=l.get("splitListItemBefore");if(u.refresh(),!u.isEnabled)return;const h=n.model.document.selection.getLastPosition().parent;getAllListItemBlocks(h).length===2&&u.execute()})}_setupTabIntegration(){const n=this.editor;this.listenTo(n.editing.view.document,"tab",(s,l)=>{const c=l.shiftKey?"outdentList":"indentList";this.editor.commands.get(c).isEnabled&&(n.execute(c),l.stopPropagation(),l.preventDefault(),s.stop())},{context:"li"})}_setupConversion(){const n=this.editor,s=n.model,l=this.getListAttributeNames(),c=n.config.get("list.multiBlock"),u=c?"paragraph":"listItem";n.conversion.for("upcast").elementToElement({view:"li",model:(h,{writer:f})=>f.createElement(u,{listType:""})}).elementToElement({view:"p",model:(h,{writer:f})=>h.parent&&h.parent.is("element","li")?f.createElement(u,{listType:""}):null,converterPriority:"high"}).add(h=>{h.on("element:li",listItemUpcastConverter())}),c||n.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),n.conversion.for("editingDowncast").elementToElement({model:u,view:bogusParagraphCreator(l),converterPriority:"high"}).add(h=>{h.on("attribute",listItemDowncastConverter(l,this._downcastStrategies,s)),h.on("remove",listItemDowncastRemoveConverter(s.schema))}),n.conversion.for("dataDowncast").elementToElement({model:u,view:bogusParagraphCreator(l,{dataPipeline:!0}),converterPriority:"high"}).add(h=>{h.on("attribute",listItemDowncastConverter(l,this._downcastStrategies,s,{dataPipeline:!0}))});const d=createModelToViewPositionMapper(this._downcastStrategies,n.editing.view);n.editing.mapper.on("modelToViewPosition",d),n.data.mapper.on("modelToViewPosition",d),this.listenTo(s.document,"change:data",reconvertItemsOnDataChange(s,n.editing,l,this),{priority:"high"}),this.on("checkAttributes:item",(h,{viewElement:f,modelAttributes:p})=>{f.id!=p.listItemId&&(h.return=!0,h.stop())}),this.on("checkAttributes:list",(h,{viewElement:f,modelAttributes:p})=>{(f.name!=getViewElementNameForListType(p.listType)||f.id!=getViewElementIdForListType(p.listType,p.listIndent))&&(h.return=!0,h.stop())})}_setupModelPostFixing(){const n=this.editor.model,s=this.getListAttributeNames();n.document.registerPostFixer(l=>modelChangePostFixer$1(n,l,s,this)),this.on("postFixer",(l,{listNodes:c,writer:u})=>{l.return=fixListIndents(c,u)||l.return},{priority:"high"}),this.on("postFixer",(l,{listNodes:c,writer:u,seenIds:d})=>{l.return=fixListItemIds(c,d,u)||l.return},{priority:"high"})}_setupClipboardIntegration(){const n=this.editor.model,s=this.editor.plugins.get("ClipboardPipeline");this.listenTo(n,"insertContent",createModelIndentPasteFixer(n),{priority:"high"}),this.listenTo(s,"outputTransformation",(l,c)=>{n.change(u=>{const d=Array.from(c.content.getChildren()),h=d[d.length-1];if(d.length>1&&h.is("element")&&h.isEmpty&&d.slice(0,-1).every(isListItemBlock)&&u.remove(h),c.method=="copy"||c.method=="cut"){const f=Array.from(c.content.getChildren());isSingleListItem(f)&&removeListAttributes(f,u)}})})}_setupAccessibilityIntegration(){const n=this.editor,s=n.t;n.accessibility.addKeystrokeInfoGroup({id:"list",label:s("Keystrokes that can be used in a list"),keystrokes:[{label:s("Increase list item indent"),keystroke:"Tab"},{label:s("Decrease list item indent"),keystroke:"Shift+Tab"}]})}}function modelChangePostFixer$1(o,a,n,s){const l=o.document.differ.getChanges(),c=new Set,u=new Set,d=s.editor.config.get("list.multiBlock");let h=!1;for(const p of l){if(p.type=="insert"&&p.name!="$text"){const g=p.position.nodeAfter;if(!o.schema.checkAttribute(g,"listItemId"))for(const v of Array.from(g.getAttributeKeys()))n.includes(v)&&(a.removeAttribute(v,g),h=!0);findAndAddListHeadToMap(p.position,u,c),p.attributes.has("listItemId")||findAndAddListHeadToMap(p.position.getShiftedBy(p.length),u,c);for(const{item:v,previousPosition:b}of o.createRangeIn(g))isListItemBlock(v)&&findAndAddListHeadToMap(b,u,c)}else p.type=="remove"?findAndAddListHeadToMap(p.position,u,c):p.type=="attribute"&&n.includes(p.attributeKey)&&(findAndAddListHeadToMap(p.range.start,u,c),p.attributeNewValue===null&&findAndAddListHeadToMap(p.range.start.getShiftedBy(1),u,c));if(!d&&p.type=="attribute"&&LIST_BASE_ATTRIBUTES.includes(p.attributeKey)){const g=p.range.start.nodeAfter;p.attributeNewValue===null&&g&&g.is("element","listItem")?(a.rename(g,"paragraph"),h=!0):p.attributeOldValue===null&&g&&g.is("element")&&g.name!="listItem"&&(a.rename(g,"listItem"),h=!0)}}const f=new Set;for(const p of u.values())h=s.fire("postFixer",{listNodes:new ListBlocksIterable(p),listHead:p,writer:a,seenIds:f})||h;return h}function createModelIndentPasteFixer(o){return(a,[n,s])=>{const l=n.is("documentFragment")?Array.from(n.getChildren()):[n];if(!l.length)return;const u=(s?o.createSelection(s):o.document.selection).getFirstPosition();let d;if(isListItemBlock(u.parent))d=u.parent;else if(isListItemBlock(u.nodeBefore)&&isListItemBlock(u.nodeAfter))d=u.nodeBefore;else return;o.change(h=>{const f=d.getAttribute("listType"),p=d.getAttribute("listIndent"),g=l[0].getAttribute("listIndent")||0,v=Math.max(p-g,0);for(const b of l){const w=isListItemBlock(b);d.is("element","listItem")&&b.is("element","paragraph")&&h.rename(b,"listItem"),h.setAttributes({listIndent:(w?b.getAttribute("listIndent"):0)+v,listItemId:w?b.getAttribute("listItemId"):ListItemUid.next(),listType:f},b)}})}}function shouldMergeOnBlocksContentLevel(o,a){const n=o.document.selection;if(!n.isCollapsed)return!getSelectedBlockObject(o);if(a==="forward")return!0;const l=n.getFirstPosition().parent,c=l.previousSibling;return o.schema.isObject(c)?!1:c.isEmpty?!0:isSingleListItem([l,c])}function createUIComponents(o,a,n,s){o.ui.componentFactory.add(a,()=>{const l=_createButton(ButtonView,o,a,n,s);return l.set({tooltip:!0,isToggleable:!0}),l}),o.ui.componentFactory.add(`menuBar:${a}`,()=>{const l=_createButton(MenuBarMenuListItemButtonView,o,a,n,s);return l.set({role:"menuitemcheckbox",isToggleable:!0}),l})}function _createButton(o,a,n,s,l){const c=a.commands.get(n),u=new o(a.locale);return u.set({label:s,icon:l}),u.bind("isOn","isEnabled").to(c,"value","isEnabled"),u.on("execute",()=>{a.execute(n),a.editing.view.focus()}),u}class ListUI extends Plugin{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||createUIComponents(this.editor,"numberedList",a("Numbered List"),icons.numberedList),this.editor.ui.componentFactory.has("bulletedList")||createUIComponents(this.editor,"bulletedList",a("Bulleted List"),icons.bulletedList)}}class List extends Plugin{static get requires(){return[ListEditing,ListUI]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}}class ListStartCommand extends Command{refresh(){const a=this._getValue();this.value=a,this.isEnabled=a!=null}execute({startIndex:a=1}={}){const n=this.editor.model,s=n.document;let l=Array.from(s.selection.getSelectedBlocks()).filter(c=>isListItemBlock(c)&&isNumberedListType(c.getAttribute("listType")));l=expandListBlocksToCompleteList(l),n.change(c=>{for(const u of l)c.setAttribute("listStart",a>=0?a:1,u)})}_getValue(){const n=this.editor.model.document,s=first(n.selection.getSelectedBlocks());return s&&isListItemBlock(s)&&isNumberedListType(s.getAttribute("listType"))?s.getAttribute("listStart"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const LIST_STYLE_TO_LIST_TYPE={},LIST_STYLE_TO_TYPE_ATTRIBUTE={},TYPE_ATTRIBUTE_TO_LIST_STYLE={},LIST_STYLE_TYPES=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(const{listStyle:o,typeAttribute:a,listType:n}of LIST_STYLE_TYPES)LIST_STYLE_TO_LIST_TYPE[o]=n,LIST_STYLE_TO_TYPE_ATTRIBUTE[o]=a,a&&(TYPE_ATTRIBUTE_TO_LIST_STYLE[a]=o);function getAllSupportedStyleTypes(){return LIST_STYLE_TYPES.map(o=>o.listStyle)}function getListTypeFromListStyleType$1(o){return LIST_STYLE_TO_LIST_TYPE[o]||null}function getListStyleTypeFromTypeAttribute(o){return TYPE_ATTRIBUTE_TO_LIST_STYLE[o]||null}function getTypeAttributeFromListStyleType(o){return LIST_STYLE_TO_TYPE_ATTRIBUTE[o]||null}function normalizeListStyle(o){switch(o){case"lower-alpha":return"lower-latin";case"upper-alpha":return"upper-latin";default:return o}}class ListStyleCommand extends Command{constructor(n,s,l){super(n);M(this,"defaultType");M(this,"_supportedTypes");this.defaultType=s,this._supportedTypes=l}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(n={}){const s=this.editor.model,l=s.document;s.change(c=>{this._tryToConvertItemsToList(n);let u=Array.from(l.selection.getSelectedBlocks()).filter(d=>d.hasAttribute("listType"));if(u.length){u=expandListBlocksToCompleteList(u);for(const d of u)c.setAttribute("listStyle",n.type||this.defaultType,d)}})}isStyleTypeSupported(n){return this._supportedTypes?this._supportedTypes.includes(n):!0}_getValue(){const n=first(this.editor.model.document.selection.getSelectedBlocks());return isListItemBlock(n)?n.getAttribute("listStyle"):null}_checkEnabled(){const n=this.editor,s=n.commands.get("numberedList"),l=n.commands.get("bulletedList");return s.isEnabled||l.isEnabled}_tryToConvertItemsToList(n){if(!n.type)return;const s=getListTypeFromListStyleType$1(n.type);if(!s)return;const l=this.editor,c=`${s}List`;l.commands.get(c).value||l.execute(c)}}class ListReversedCommand extends Command{refresh(){const a=this._getValue();this.value=a,this.isEnabled=a!=null}execute(a={}){const n=this.editor.model,s=n.document;let l=Array.from(s.selection.getSelectedBlocks()).filter(c=>isListItemBlock(c)&&c.getAttribute("listType")=="numbered");l=expandListBlocksToCompleteList(l),n.change(c=>{for(const u of l)c.setAttribute("listReversed",!!a.reversed,u)})}_getValue(){const n=this.editor.model.document,s=first(n.selection.getSelectedBlocks());return isListItemBlock(s)&&s.getAttribute("listType")=="numbered"?s.getAttribute("listReversed"):null}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function listPropertiesUpcastConverter(o){return(a,n,s)=>{const{writer:l,schema:c,consumable:u}=s;if(u.test(n.viewItem,o.viewConsumables)===!1)return;n.modelRange||Object.assign(n,s.convertChildren(n.viewItem,n.modelCursor));let d=!1;for(const h of n.modelRange.getItems({shallow:!0}))c.checkAttribute(h,o.attributeName)&&o.appliesToListItem(h)&&(h.hasAttribute(o.attributeName)||(l.setAttribute(o.attributeName,o.getAttributeOnUpcast(n.viewItem),h),d=!0));d&&u.consume(n.viewItem,o.viewConsumables)}}class ListPropertiesUtils extends Plugin{static get pluginName(){return"ListPropertiesUtils"}static get isOfficialPlugin(){return!0}getAllSupportedStyleTypes(){return getAllSupportedStyleTypes()}getListTypeFromListStyleType(a){return getListTypeFromListStyleType$1(a)}getListStyleTypeFromTypeAttribute(a){return getListStyleTypeFromTypeAttribute(a)}getTypeAttributeFromListStyleType(a){return getTypeAttributeFromListStyleType(a)}}function getNormalizedConfig(o){const{startIndex:a,reversed:n,styles:s}=o;return{styles:getNormalizedStylesConfig(s),startIndex:a||!1,reversed:n||!1}}function getNormalizedStylesConfig(o){const a={listTypes:["bulleted","numbered"],useAttribute:!1};return o===!0||(o?Array.isArray(o)||typeof o=="string"?a.listTypes=toArray$2(o):(a.listTypes=o.listTypes?toArray$2(o.listTypes):a.listTypes,a.useAttribute=!!o.useAttribute,o.listStyleTypes&&(a.listStyleTypes=o.listStyleTypes)):a.listTypes=[]),a}const DEFAULT_LIST_TYPE$1="default";class ListPropertiesEditing extends Plugin{static get requires(){return[ListEditing,ListPropertiesUtils]}static get pluginName(){return"ListPropertiesEditing"}static get isOfficialPlugin(){return!0}constructor(a){super(a),a.config.define("list.properties",{styles:!0,startIndex:!1,reversed:!1})}init(){const a=this.editor,n=a.model,s=a.plugins.get(ListEditing),l=a.config.get("list.properties"),c=createAttributeStrategies$1(l);for(const u of c)u.addCommand(a),n.schema.extend("$listItem",{allowAttributes:u.attributeName}),s.registerDowncastStrategy({scope:"list",attributeName:u.attributeName,setAttributeOnDowncast(d,h,f){u.setAttributeOnDowncast(d,h,f)}});a.conversion.for("upcast").add(u=>{for(const d of c)u.on("element:ol",listPropertiesUpcastConverter(d)),u.on("element:ul",listPropertiesUpcastConverter(d))}),s.on("checkAttributes:list",(u,{viewElement:d,modelAttributes:h})=>{for(const f of c)f.getAttributeOnUpcast(d)!=h[f.attributeName]&&(u.return=!0,u.stop())}),this.listenTo(a.commands.get("indentList"),"afterExecute",(u,d)=>{n.change(h=>{for(const f of d)for(const p of c)p.appliesToListItem(f)&&h.setAttribute(p.attributeName,p.defaultValue,f)})}),s.on("postFixer",(u,{listNodes:d,writer:h})=>{for(const{node:f}of d)for(const p of c)p.hasValidAttribute(f)||(p.appliesToListItem(f)?h.setAttribute(p.attributeName,p.defaultValue,f):h.removeAttribute(p.attributeName,f),u.return=!0)}),s.on("postFixer",(u,{listNodes:d,writer:h})=>{for(const{node:f,previousNodeInList:p}of d)if(p&&p.getAttribute("listType")==f.getAttribute("listType"))for(const g of c){const{attributeName:v}=g;if(!g.appliesToListItem(f))continue;const b=p.getAttribute(v);f.getAttribute(v)!=b&&(h.setAttribute(v,b,f),u.return=!0)}})}}function createAttributeStrategies$1(o){const a=[],n=getNormalizedConfig(o);if(o.styles){const s=n.styles.useAttribute;a.push({attributeName:"listStyle",defaultValue:DEFAULT_LIST_TYPE$1,viewConsumables:{styles:"list-style-type"},addCommand(l){let c=getAllSupportedStyleTypes();s&&(c=c.filter(u=>!!getTypeAttributeFromListStyleType(u))),l.commands.add("listStyle",new ListStyleCommand(l,DEFAULT_LIST_TYPE$1,c))},appliesToListItem(l){return l.getAttribute("listType")=="numbered"||l.getAttribute("listType")=="bulleted"},hasValidAttribute(l){if(!this.appliesToListItem(l))return!l.hasAttribute("listStyle");if(!l.hasAttribute("listStyle"))return!1;const c=l.getAttribute("listStyle");return c==DEFAULT_LIST_TYPE$1?!0:getListTypeFromListStyleType$1(c)==l.getAttribute("listType")},setAttributeOnDowncast(l,c,u){if(c&&c!==DEFAULT_LIST_TYPE$1)if(s){const d=getTypeAttributeFromListStyleType(c);if(d){l.setAttribute("type",d,u);return}}else{l.setStyle("list-style-type",c,u);return}l.removeStyle("list-style-type",u),l.removeAttribute("type",u)},getAttributeOnUpcast(l){const c=l.getStyle("list-style-type");if(c)return normalizeListStyle(c);const u=l.getAttribute("type");return u?getListStyleTypeFromTypeAttribute(u):DEFAULT_LIST_TYPE$1}})}return o.reversed&&a.push({attributeName:"listReversed",defaultValue:!1,viewConsumables:{attributes:"reversed"},addCommand(s){s.commands.add("listReversed",new ListReversedCommand(s))},appliesToListItem(s){return s.getAttribute("listType")=="numbered"},hasValidAttribute(s){return this.appliesToListItem(s)==s.hasAttribute("listReversed")},setAttributeOnDowncast(s,l,c){l?s.setAttribute("reversed","reversed",c):s.removeAttribute("reversed",c)},getAttributeOnUpcast(s){return s.hasAttribute("reversed")}}),o.startIndex&&a.push({attributeName:"listStart",defaultValue:1,viewConsumables:{attributes:"start"},addCommand(s){s.commands.add("listStart",new ListStartCommand(s))},appliesToListItem(s){return isNumberedListType(s.getAttribute("listType"))},hasValidAttribute(s){return this.appliesToListItem(s)==s.hasAttribute("listStart")},setAttributeOnDowncast(s,l,c){l==0||l>1?s.setAttribute("start",l,c):s.removeAttribute("start",c)},getAttributeOnUpcast(s){const l=s.getAttribute("start");return l>=0?l:1}}),a}class ListPropertiesView extends View$1{constructor(n,{enabledProperties:s,styleButtonViews:l,styleGridAriaLabel:c}){super(n);M(this,"children");M(this,"stylesView",null);M(this,"additionalPropertiesCollapsibleView",null);M(this,"startIndexFieldView",null);M(this,"reversedSwitchButtonView",null);M(this,"focusTracker",new FocusTracker);M(this,"keystrokes",new KeystrokeHandler);M(this,"focusables",new ViewCollection);M(this,"focusCycler");const u=["ck","ck-list-properties"];this.children=this.createCollection(),this.focusCycler=new FocusCycler({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),l&&l.length?(this.stylesView=this._createStylesView(l,c),this.children.add(this.stylesView)):u.push("ck-list-properties_without-styles"),(s.startIndex||s.reversed)&&(this._addNumberedListPropertyViews(s),u.push("ck-list-properties_with-numbered-properties")),this.setTemplate({tag:"div",attributes:{class:u},children:this.children})}render(){if(super.render(),this.stylesView){this.focusables.add(this.stylesView),this.focusTracker.add(this.stylesView.element),(this.startIndexFieldView||this.reversedSwitchButtonView)&&(this.focusables.add(this.children.last.buttonView),this.focusTracker.add(this.children.last.buttonView.element));for(const n of this.stylesView.children)this.stylesView.focusTracker.add(n.element);addKeyboardHandlingForGrid({keystrokeHandler:this.stylesView.keystrokes,focusTracker:this.stylesView.focusTracker,gridItems:this.stylesView.children,numberOfColumns:()=>global$1.window.getComputedStyle(this.stylesView.element).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}if(this.startIndexFieldView){this.focusables.add(this.startIndexFieldView),this.focusTracker.add(this.startIndexFieldView.element);const n=s=>s.stopPropagation();this.keystrokes.set("arrowright",n),this.keystrokes.set("arrowleft",n),this.keystrokes.set("arrowup",n),this.keystrokes.set("arrowdown",n)}this.reversedSwitchButtonView&&(this.focusables.add(this.reversedSwitchButtonView),this.focusTracker.add(this.reversedSwitchButtonView.element)),this.keystrokes.listenTo(this.element)}focus(){this.focusCycler.focusFirst()}focusLast(){this.focusCycler.focusLast()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createStylesView(n,s){const l=new View$1(this.locale);return l.children=l.createCollection(),l.children.addMany(n),l.setTemplate({tag:"div",attributes:{"aria-label":s,class:["ck","ck-list-styles-list"]},children:l.children}),l.children.delegate("execute").to(this),l.focus=function(){for(const c of this.children)if(c instanceof ButtonView&&c.isOn){c.focus();return}this.children.first.focus()},l.focusTracker=new FocusTracker,l.keystrokes=new KeystrokeHandler,l.render(),l.keystrokes.listenTo(l.element),l}_addNumberedListPropertyViews(n){const s=this.locale.t,l=[];n.startIndex&&(this.startIndexFieldView=this._createStartIndexField(),l.push(this.startIndexFieldView)),n.reversed&&(this.reversedSwitchButtonView=this._createReversedSwitchButton(),l.push(this.reversedSwitchButtonView)),this.stylesView?(this.additionalPropertiesCollapsibleView=new CollapsibleView(this.locale,l),this.additionalPropertiesCollapsibleView.set({label:s("List properties"),isCollapsed:!0}),this.additionalPropertiesCollapsibleView.buttonView.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),this.additionalPropertiesCollapsibleView.buttonView.on("change:isEnabled",(c,u,d)=>{d||(this.additionalPropertiesCollapsibleView.isCollapsed=!0)}),this.children.add(this.additionalPropertiesCollapsibleView)):this.children.addMany(l)}_createStartIndexField(){const n=this.locale.t,s=new LabeledFieldView(this.locale,createLabeledInputNumber);return s.set({label:n("Start at"),class:"ck-numbered-list-properties__start-index"}),s.fieldView.set({min:0,step:1,value:1,inputMode:"numeric"}),s.fieldView.on("input",()=>{const l=s.fieldView.element,c=l.valueAsNumber;if(Number.isNaN(c)){s.errorText=n("Invalid start index value.");return}l.checkValidity()?this.fire("listStart",{startIndex:c}):s.errorText=n("Start index must be greater than 0.")}),s}_createReversedSwitchButton(){const n=this.locale.t,s=new SwitchButtonView(this.locale);return s.set({withText:!0,label:n("Reversed order"),class:"ck-numbered-list-properties__reversed-order"}),s.delegate("execute").to(this,"listReversed"),s}}var listStyleDiscIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z"/></svg>',listStyleCircleIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"/></svg>',listStyleSquareIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z"/></svg>',listStyleDecimalIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z"/></svg>',listStyleDecimalWithLeadingZeroIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperRomanIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z"/></svg>',listStyleLowerLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z"/></svg>',listStyleUpperLatinIcon='<svg viewBox="0 0 44 44" xmlns="http://www.w3.org/2000/svg"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163"/><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z"/></svg>';class ListPropertiesUI extends Plugin{static get pluginName(){return"ListPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.locale.t,s=a.config.get("list.properties"),l=getNormalizedConfig(s),c=l.styles.listTypes;if(c.includes("bulleted")){const u=[{label:n("Toggle the disc list style"),tooltip:n("Disc"),type:"disc",icon:listStyleDiscIcon},{label:n("Toggle the circle list style"),tooltip:n("Circle"),type:"circle",icon:listStyleCircleIcon},{label:n("Toggle the square list style"),tooltip:n("Square"),type:"square",icon:listStyleSquareIcon}],d=n("Bulleted List"),h=n("Bulleted list styles toolbar"),f="bulletedList";a.ui.componentFactory.add(f,getDropdownViewCreator({editor:a,normalizedConfig:l,parentCommandName:f,buttonLabel:d,buttonIcon:icons.bulletedList,styleGridAriaLabel:h,styleDefinitions:u})),a.ui.componentFactory.add(`menuBar:${f}`,getMenuBarStylesMenuCreator({editor:a,normalizedConfig:l,parentCommandName:f,buttonLabel:d,styleGridAriaLabel:h,styleDefinitions:u}))}if(c.includes("numbered")||s.startIndex||s.reversed){const u=[{label:n("Toggle the decimal list style"),tooltip:n("Decimal"),type:"decimal",icon:listStyleDecimalIcon},{label:n("Toggle the decimal with leading zero list style"),tooltip:n("Decimal with leading zero"),type:"decimal-leading-zero",icon:listStyleDecimalWithLeadingZeroIcon},{label:n("Toggle the lower–roman list style"),tooltip:n("Lower–roman"),type:"lower-roman",icon:listStyleLowerRomanIcon},{label:n("Toggle the upper–roman list style"),tooltip:n("Upper-roman"),type:"upper-roman",icon:listStyleUpperRomanIcon},{label:n("Toggle the lower–latin list style"),tooltip:n("Lower-latin"),type:"lower-latin",icon:listStyleLowerLatinIcon},{label:n("Toggle the upper–latin list style"),tooltip:n("Upper-latin"),type:"upper-latin",icon:listStyleUpperLatinIcon}],d=n("Numbered List"),h=n("Numbered list styles toolbar"),f="numberedList";a.ui.componentFactory.add(f,getDropdownViewCreator({editor:a,normalizedConfig:l,parentCommandName:f,buttonLabel:d,buttonIcon:icons.numberedList,styleGridAriaLabel:h,styleDefinitions:u})),c.includes("numbered")&&a.ui.componentFactory.add(`menuBar:${f}`,getMenuBarStylesMenuCreator({editor:a,normalizedConfig:l,parentCommandName:f,buttonLabel:d,styleGridAriaLabel:h,styleDefinitions:u}))}}}function getDropdownViewCreator({editor:o,normalizedConfig:a,parentCommandName:n,buttonLabel:s,buttonIcon:l,styleGridAriaLabel:c,styleDefinitions:u}){const d=o.commands.get(n);return h=>{const f=createDropdown(h,SplitButtonView),p=f.buttonView;return f.bind("isEnabled").to(d),f.class="ck-list-styles-dropdown",p.on("execute",()=>{o.execute(n),o.editing.view.focus()}),p.set({label:s,icon:l,tooltip:!0,isToggleable:!0}),p.bind("isOn").to(d,"value",g=>!!g),f.once("change:isOpen",()=>{const g=createListPropertiesView({editor:o,normalizedConfig:a,dropdownView:f,parentCommandName:n,styleGridAriaLabel:c,styleDefinitions:u});f.panelView.children.add(g)}),f.on("execute",()=>{o.editing.view.focus()}),f}}function getStyleButtonCreator({editor:o,listStyleCommand:a,parentCommandName:n}){const s=o.locale,l=o.commands.get(n);return({label:c,type:u,icon:d,tooltip:h})=>{const f=new ButtonView(s);return f.set({label:c,icon:d,tooltip:h}),f.bind("isOn").to(a,"value",p=>p===u),f.on("execute",()=>{l.value?a.value===u?o.execute(n):a.value!==u&&o.execute("listStyle",{type:u}):o.model.change(()=>{o.execute("listStyle",{type:u})})}),f}}function createListPropertiesView({editor:o,normalizedConfig:a,dropdownView:n,parentCommandName:s,styleDefinitions:l,styleGridAriaLabel:c}){const u=o.locale,d={...a,...s!="numberedList"?{startIndex:!1,reversed:!1}:null},h=s.replace("List","");let f=null;if(a.styles.listTypes.includes(h)){const g=o.commands.get("listStyle"),v=getStyleButtonCreator({editor:o,parentCommandName:s,listStyleCommand:g}),b=a.styles.listStyleTypes;let w=l;if(b){const S=b[h];S&&(w=l.filter(E=>S.includes(E.type)))}const x=getStyleTypeSupportChecker(g);f=w.filter(x).map(v)}const p=new ListPropertiesView(u,{styleGridAriaLabel:c,enabledProperties:d,styleButtonViews:f});if(a.styles.listTypes.includes(h)&&focusChildOnDropdownOpen(n,()=>p.stylesView.children.find(g=>g.isOn)),d.startIndex){const g=o.commands.get("listStart");p.startIndexFieldView.bind("isEnabled").to(g),p.startIndexFieldView.fieldView.bind("value").to(g),p.on("listStart",(v,b)=>o.execute("listStart",b))}if(d.reversed){const g=o.commands.get("listReversed");p.reversedSwitchButtonView.bind("isEnabled").to(g),p.reversedSwitchButtonView.bind("isOn").to(g,"value",v=>!!v),p.on("listReversed",()=>{const v=g.value;o.execute("listReversed",{reversed:!v})})}return p.delegate("execute").to(n),p}function getMenuBarStylesMenuCreator({editor:o,normalizedConfig:a,parentCommandName:n,buttonLabel:s,styleGridAriaLabel:l,styleDefinitions:c}){return u=>{const d=new MenuBarMenuView(u),h=o.commands.get(n),f=o.commands.get("listStyle"),p=getStyleTypeSupportChecker(f),g=getStyleButtonCreator({editor:o,parentCommandName:n,listStyleCommand:f}),v=a.styles.listStyleTypes;let b=c;if(v){const S=h.type,E=v[S];E&&(b=c.filter(T=>E.includes(T.type)))}const w=b.filter(p).map(g),x=new ListPropertiesView(u,{styleGridAriaLabel:l,enabledProperties:{...a,startIndex:!1,reversed:!1},styleButtonViews:w});return x.delegate("execute").to(d),d.buttonView.set({label:s,icon:icons[n]}),d.panelView.children.add(x),d.bind("isEnabled").to(h,"isEnabled"),d.on("execute",()=>{o.editing.view.focus()}),d}}function getStyleTypeSupportChecker(o){return typeof o.isStyleTypeSupported=="function"?a=>o.isStyleTypeSupported(a.type):()=>!0}class ListProperties extends Plugin{static get requires(){return[ListPropertiesEditing,ListPropertiesUI]}static get pluginName(){return"ListProperties"}static get isOfficialPlugin(){return!0}}class CheckTodoListCommand extends Command{constructor(a){super(a),this.on("execute",()=>{this.refresh()},{priority:"highest"})}refresh(){const a=this._getSelectedItems();this.value=this._getValue(a),this.isEnabled=!!a.length}execute(a={}){this.editor.model.change(n=>{const s=this._getSelectedItems(),l=a.forceValue===void 0?!this._getValue(s):a.forceValue;for(const c of s)l?n.setAttribute("todoListChecked",!0,c):n.removeAttribute("todoListChecked",c)})}_getValue(a){return a.every(n=>n.getAttribute("todoListChecked"))}_getSelectedItems(){const a=this.editor.model,n=a.schema,s=a.document.selection.getFirstRange(),l=s.start.parent,c=[];n.checkAttribute(l,"todoListChecked")&&c.push(...getAllListItemBlocks(l));for(const u of s.getItems({shallow:!0}))n.checkAttribute(u,"todoListChecked")&&!c.includes(u)&&c.push(...getAllListItemBlocks(u));return c}}class TodoCheckboxChangeObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType",["change"])}onDomEvent(n){if(n.target){const s=this.view.domConverter.mapDomToView(n.target);s&&s.is("element","input")&&s.getAttribute("type")=="checkbox"&&s.findAncestor({classes:"todo-list__label"})&&this.fire("todoCheckboxChange",n)}}}const ITEM_TOGGLE_KEYSTROKE$1=parseKeystroke("Ctrl+Enter");class TodoListEditing extends Plugin{static get pluginName(){return"TodoListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[ListEditing]}init(){const a=this.editor,n=a.model,s=a.editing,l=a.plugins.get(ListEditing),u=a.config.get("list.multiBlock")?"paragraph":"listItem";a.commands.add("todoList",new ListCommand(a,"todo")),a.commands.add("checkTodoList",new CheckTodoListCommand(a)),s.view.addObserver(TodoCheckboxChangeObserver),n.schema.extend("$listItem",{allowAttributes:"todoListChecked"}),n.schema.addAttributeCheck(d=>{const h=d.last;if(!h.getAttribute("listItemId")||h.getAttribute("listType")!="todo")return!1},"todoListChecked"),a.conversion.for("upcast").add(d=>{d.on("element:input",todoItemInputConverter()),d.on("element:li",todoListItemUpcastConverter(),{priority:"low"}),d.on("element:label",elementUpcastConsumingConverter({name:"label",classes:"todo-list__label"})),d.on("element:label",elementUpcastConsumingConverter({name:"label",classes:["todo-list__label","todo-list__label_without-description"]})),d.on("element:span",elementUpcastConsumingConverter({name:"span",classes:"todo-list__label__description"})),d.on("element:ul",attributeUpcastConsumingConverter({name:"ul",classes:"todo-list"}))}),a.conversion.for("downcast").elementToElement({model:u,view:(d,{writer:h})=>{if(isDescriptionBlock(d,l.getListAttributeNames()))return h.createContainerElement("span",{class:"todo-list__label__description"})},converterPriority:"highest"}),l.registerDowncastStrategy({scope:"list",attributeName:"listType",setAttributeOnDowncast(d,h,f){h=="todo"?d.addClass("todo-list",f):d.removeClass("todo-list",f)}}),l.registerDowncastStrategy({scope:"itemMarker",attributeName:"todoListChecked",createElement(d,h,{dataPipeline:f}){if(h.getAttribute("listType")!="todo")return null;const p=d.createUIElement("input",{type:"checkbox",...h.getAttribute("todoListChecked")?{checked:"checked"}:null,...f?{disabled:"disabled"}:{tabindex:"-1"}});if(f)return p;const g=d.createContainerElement("span",{contenteditable:"false"},p);return g.getFillerOffset=()=>null,g},canWrapElement(d){return isDescriptionBlock(d,l.getListAttributeNames())},createWrapperElement(d,h,{dataPipeline:f}){const p=["todo-list__label"];return isDescriptionBlock(h,l.getListAttributeNames())||p.push("todo-list__label_without-description"),d.createAttributeElement(f?"label":"span",{class:p.join(" ")})}}),l.on("checkElement",(d,{modelElement:h,viewElement:f})=>{const p=isDescriptionBlock(h,l.getListAttributeNames());f.hasClass("todo-list__label__description")!=p&&(d.return=!0,d.stop())}),l.on("checkElement",(d,{modelElement:h,viewElement:f})=>{const p=h.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(h);let g=!1;const v=a.editing.view.createPositionBefore(f).getWalker({direction:"backward"});for(const{item:b}of v){if(b.is("element")&&a.editing.mapper.toModelElement(b))break;b.is("element","input")&&b.getAttribute("type")=="checkbox"&&(g=!0)}g!=p&&(d.return=!0,d.stop())}),l.on("postFixer",(d,{listNodes:h,writer:f})=>{for(const{node:p,previousNodeInList:g}of h){if(!g||g.getAttribute("listItemId")!=p.getAttribute("listItemId"))continue;const v=g.hasAttribute("todoListChecked"),b=p.hasAttribute("todoListChecked");b&&!v?(f.removeAttribute("todoListChecked",p),d.return=!0):!b&&v&&(f.setAttribute("todoListChecked",!0,p),d.return=!0)}}),n.document.registerPostFixer(d=>{const h=n.document.differ.getChanges();let f=!1;for(const p of h)if(p.type=="attribute"&&p.attributeKey=="listType"){const g=p.range.start.nodeAfter;p.attributeOldValue=="todo"&&g.hasAttribute("todoListChecked")&&(d.removeAttribute("todoListChecked",g),f=!0)}else if(p.type=="insert"&&p.name!="$text")for(const{item:g}of d.createRangeOn(p.position.nodeAfter))g.is("element")&&g.getAttribute("listType")!="todo"&&g.hasAttribute("todoListChecked")&&(d.removeAttribute("todoListChecked",g),f=!0);return f}),this.listenTo(s.view.document,"keydown",(d,h)=>{getCode(h)===ITEM_TOGGLE_KEYSTROKE$1&&(a.execute("checkTodoList"),d.stop())},{priority:"high"}),this.listenTo(s.view.document,"todoCheckboxChange",(d,h)=>{const f=h.target;if(!f||!f.is("element","input"))return;const p=s.view.createPositionAfter(f),v=s.mapper.toModelPosition(p).parent;v&&isListItemBlock(v)&&v.getAttribute("listType")=="todo"&&this._handleCheckmarkChange(v)}),this.listenTo(s.view.document,"arrowKey",jumpOverCheckmarkOnSideArrowKeyPress$1(n,a.locale),{context:"$text"}),this.listenTo(s.mapper,"viewToModelPosition",(d,h)=>{const f=h.viewPosition.parent,p=f.is("attributeElement","li")&&h.viewPosition.offset==0,g=isLabelElement(f)&&h.viewPosition.offset<=1,v=f.is("element","span")&&f.getAttribute("contenteditable")=="false"&&isLabelElement(f.parent);if(!p&&!g&&!v)return;const b=h.modelPosition.nodeAfter;b&&b.getAttribute("listType")=="todo"&&(h.modelPosition=n.createPositionAt(b,0))},{priority:"low"}),this._initAriaAnnouncements()}_handleCheckmarkChange(a){const n=this.editor,s=n.model,l=Array.from(s.document.selection.getRanges());s.change(c=>{c.setSelection(a,"end"),n.execute("checkTodoList"),c.setSelection(l)})}_initAriaAnnouncements(){const{model:a,ui:n,t:s}=this.editor;let l=null;n&&a.document.selection.on("change:range",()=>{const c=a.document.selection.focus.parent,u=isTodoListItemElement(l),d=isTodoListItemElement(c);u&&!d?n.ariaLiveAnnouncer.announce(s("Leaving a to-do list")):!u&&d&&n.ariaLiveAnnouncer.announce(s("Entering a to-do list")),l=c})}}function todoListItemUpcastConverter(){return(o,a,n)=>{const{writer:s,schema:l}=n;if(!a.modelRange)return;const c=Array.from(a.modelRange.getItems({shallow:!0})).filter(u=>u.getAttribute("listType")==="todo"&&l.checkAttribute(u,"listItemId")).reduce((u,d)=>{const h=d.getAttribute("listItemId");return u.has(h)||u.set(h,getAllListItemBlocks(d)),u},new Map);for(const[,u]of c.entries())if(u.some(d=>d.getAttribute("todoListChecked")))for(const d of u)s.setAttribute("todoListChecked",!0,d)}}function todoItemInputConverter(){return(o,a,n)=>{const s=a.modelCursor,l=s.parent,c=a.viewItem;if(!n.consumable.test(c,{name:!0})||c.getAttribute("type")!="checkbox"||!s.isAtStart||!l.hasAttribute("listType"))return;n.consumable.consume(c,{name:!0});const u=n.writer;u.setAttribute("listType","todo",l),a.viewItem.hasAttribute("checked")&&u.setAttribute("todoListChecked",!0,l),a.modelRange=u.createRange(s)}}function elementUpcastConsumingConverter(o){const a=new Matcher(o);return(n,s,l)=>{const c=a.match(s.viewItem);c&&l.consumable.consume(s.viewItem,c.match)&&Object.assign(s,l.convertChildren(s.viewItem,s.modelCursor))}}function attributeUpcastConsumingConverter(o){const a=new Matcher(o);return(n,s,l)=>{const c=a.match(s.viewItem);if(!c)return;const u=c.match;u.name=!1,l.consumable.consume(s.viewItem,u)}}function isDescriptionBlock(o,a){return(o.is("element","paragraph")||o.is("element","listItem"))&&o.getAttribute("listType")=="todo"&&isFirstBlockOfListItem(o)&&hasOnlyListAttributes(o,a)}function hasOnlyListAttributes(o,a){for(const n of o.getAttributeKeys())if(!n.startsWith("selection:")&&!a.includes(n))return!1;return!0}function jumpOverCheckmarkOnSideArrowKeyPress$1(o,a){return(n,s)=>{const l=getLocalizedArrowKeyCodeDirection(s.keyCode,a.contentLanguageDirection),c=o.schema,u=o.document.selection;if(!u.isCollapsed)return;const d=u.getFirstPosition(),h=d.parent;if(l=="right"&&d.isAtEnd){const f=c.getNearestSelectionRange(o.createPositionAfter(h),"forward");if(!f)return;const p=f.start.parent;p&&isListItemBlock(p)&&p.getAttribute("listType")=="todo"&&(o.change(g=>g.setSelection(f)),s.preventDefault(),s.stopPropagation(),n.stop())}else if(l=="left"&&d.isAtStart&&isListItemBlock(h)&&h.getAttribute("listType")=="todo"){const f=c.getNearestSelectionRange(o.createPositionBefore(h),"backward");if(!f)return;o.change(p=>p.setSelection(f)),s.preventDefault(),s.stopPropagation(),n.stop()}}}function isLabelElement(o){return!!o&&o.is("attributeElement")&&o.hasClass("todo-list__label")}function isTodoListItemElement(o){return!o||!o.is("element","paragraph")&&!o.is("element","listItem")?!1:o.getAttribute("listType")=="todo"}class TodoListUI extends Plugin{static get pluginName(){return"TodoListUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor.t;createUIComponents(this.editor,"todoList",a("To-do List"),icons.todoList)}}class TodoList extends Plugin{static get requires(){return[TodoListEditing,TodoListUI]}static get pluginName(){return"TodoList"}static get isOfficialPlugin(){return!0}}function getDefaults(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let defaults$2=getDefaults();function changeDefaults(o){defaults$2=o}const escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=o=>escapeReplacements[o];function escape$1(o,a){if(a){if(escapeTest.test(o))return o.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(o))return o.replace(escapeReplaceNoEncode,getEscapeReplacement);return o}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(o){return o.replace(unescapeTest,(a,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit(o,a){o=o.source||o,a=a||"";const n={replace:(s,l)=>(l=l.source||l,l=l.replace(caret,"$1"),o=o.replace(s,l),n),getRegex:()=>new RegExp(o,a)};return n}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl(o,a,n){if(o){let s;try{s=decodeURIComponent(unescape$1(n)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(s.indexOf("javascript:")===0||s.indexOf("vbscript:")===0||s.indexOf("data:")===0)return null}a&&!originIndependentUrl.test(n)&&(n=resolveUrl(a,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(o,a){baseUrls[" "+o]||(justDomain.test(o)?baseUrls[" "+o]=o+"/":baseUrls[" "+o]=rtrim(o,"/",!0)),o=baseUrls[" "+o];const n=o.indexOf(":")===-1;return a.substring(0,2)==="//"?n?a:o.replace(protocol,"$1")+a:a.charAt(0)==="/"?n?a:o.replace(domain,"$1")+a:o+a}const noopTest={exec:function(){}};function merge$2(o){let a=1,n,s;for(;a<arguments.length;a++){n=arguments[a];for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(o[s]=n[s])}return o}function splitCells(o,a){const n=o.replace(/\|/g,(c,u,d)=>{let h=!1,f=u;for(;--f>=0&&d[f]==="\\";)h=!h;return h?"|":" |"}),s=n.split(/ \|/);let l=0;if(s[0].trim()||s.shift(),s.length>0&&!s[s.length-1].trim()&&s.pop(),s.length>a)s.splice(a);else for(;s.length<a;)s.push("");for(;l<s.length;l++)s[l]=s[l].trim().replace(/\\\|/g,"|");return s}function rtrim(o,a,n){const s=o.length;if(s===0)return"";let l=0;for(;l<s;){const c=o.charAt(s-l-1);if(c===a&&!n)l++;else if(c!==a&&n)l++;else break}return o.substr(0,s-l)}function findClosingBracket(o,a){if(o.indexOf(a[1])===-1)return-1;const n=o.length;let s=0,l=0;for(;l<n;l++)if(o[l]==="\\")l++;else if(o[l]===a[0])s++;else if(o[l]===a[1]&&(s--,s<0))return l;return-1}function checkSanitizeDeprecation(o){o&&o.sanitize&&!o.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString(o,a){if(a<1)return"";let n="";for(;a>1;)a&1&&(n+=o),a>>=1,o+=o;return n+o}function outputLink(o,a,n,s){const l=a.href,c=a.title?escape$1(a.title):null,u=o[1].replace(/\\([\[\]])/g,"$1");if(o[0].charAt(0)!=="!"){s.state.inLink=!0;const d={type:"link",raw:n,href:l,title:c,text:u,tokens:s.inlineTokens(u,[])};return s.state.inLink=!1,d}else return{type:"image",raw:n,href:l,title:c,text:escape$1(u)}}function indentCodeCompensation(o,a){const n=o.match(/^(\s+)(?:```)/);if(n===null)return a;const s=n[1];return a.split(`
`).map(l=>{const c=l.match(/^\s+/);if(c===null)return l;const[u]=c;return u.length>=s.length?l.slice(s.length):l}).join(`
`)}class Tokenizer{constructor(a){this.options=a||defaults$2}space(a){const n=this.rules.block.newline.exec(a);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(a){const n=this.rules.block.code.exec(a);if(n){const s=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?s:rtrim(s,`
`)}}}fences(a){const n=this.rules.block.fences.exec(a);if(n){const s=n[0],l=indentCodeCompensation(s,n[3]||"");return{type:"code",raw:s,lang:n[2]?n[2].trim():n[2],text:l}}}heading(a){const n=this.rules.block.heading.exec(a);if(n){let s=n[2].trim();if(/#$/.test(s)){const c=rtrim(s,"#");(this.options.pedantic||!c||/ $/.test(c))&&(s=c.trim())}const l={type:"heading",raw:n[0],depth:n[1].length,text:s,tokens:[]};return this.lexer.inline(l.text,l.tokens),l}}hr(a){const n=this.rules.block.hr.exec(a);if(n)return{type:"hr",raw:n[0]}}blockquote(a){const n=this.rules.block.blockquote.exec(a);if(n){const s=n[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(s,[]),text:s}}}list(a){let n=this.rules.block.list.exec(a);if(n){let s,l,c,u,d,h,f,p,g,v,b,w,x=n[1].trim();const S=x.length>1,E={type:"list",raw:"",ordered:S,start:S?+x.slice(0,-1):"",loose:!1,items:[]};x=S?`\\d{1,9}\\${x.slice(-1)}`:`\\${x}`,this.options.pedantic&&(x=S?x:"[*+-]");const T=new RegExp(`^( {0,3}${x})((?: [^\\n]*)?(?:\\n|$))`);for(;a&&(w=!1,!(!(n=T.exec(a))||this.rules.block.hr.test(a)));){if(s=n[0],a=a.substring(s.length),p=n[2].split(`
`,1)[0],g=a.split(`
`,1)[0],this.options.pedantic?(u=2,b=p.trimLeft()):(u=n[2].search(/[^ ]/),u=u>4?1:u,b=p.slice(u),u+=n[1].length),h=!1,!p&&/^ *$/.test(g)&&(s+=g+`
`,a=a.substring(g.length+1),w=!0),!w){const A=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;a&&(v=a.split(`
`,1)[0],p=v,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!A.test(p));){if(p.search(/[^ ]/)>=u||!p.trim())b+=`
`+p.slice(u);else if(!h)b+=`
`+p;else break;!h&&!p.trim()&&(h=!0),s+=v+`
`,a=a.substring(v.length+1)}}E.loose||(f?E.loose=!0:/\n *\n *$/.test(s)&&(f=!0)),this.options.gfm&&(l=/^\[[ xX]\] /.exec(b),l&&(c=l[0]!=="[ ] ",b=b.replace(/^\[[ xX]\] +/,""))),E.items.push({type:"list_item",raw:s,task:!!l,checked:c,loose:!1,text:b}),E.raw+=s}E.items[E.items.length-1].raw=s.trimRight(),E.items[E.items.length-1].text=b.trimRight(),E.raw=E.raw.trimRight();const C=E.items.length;for(d=0;d<C;d++){this.lexer.state.top=!1,E.items[d].tokens=this.lexer.blockTokens(E.items[d].text,[]);const A=E.items[d].tokens.filter(j=>j.type==="space"),R=A.every(j=>{const D=j.raw.split("");let O=0;for(const H of D)if(H===`
`&&(O+=1),O>1)return!0;return!1});!E.loose&&A.length&&R&&(E.loose=!0,E.items[d].loose=!0)}return E}}html(a){const n=this.rules.block.html.exec(a);if(n){const s={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};return this.options.sanitize&&(s.type="paragraph",s.text=this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]),s.tokens=[],this.lexer.inline(s.text,s.tokens)),s}}def(a){const n=this.rules.block.def.exec(a);if(n)return n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),{type:"def",tag:n[1].toLowerCase().replace(/\s+/g," "),raw:n[0],href:n[2],title:n[3]}}table(a){const n=this.rules.block.table.exec(a);if(n){const s={type:"table",header:splitCells(n[1]).map(l=>({text:l})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(s.header.length===s.align.length){s.raw=n[0];let l=s.align.length,c,u,d,h;for(c=0;c<l;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(l=s.rows.length,c=0;c<l;c++)s.rows[c]=splitCells(s.rows[c],s.header.length).map(f=>({text:f}));for(l=s.header.length,u=0;u<l;u++)s.header[u].tokens=[],this.lexer.inlineTokens(s.header[u].text,s.header[u].tokens);for(l=s.rows.length,u=0;u<l;u++)for(h=s.rows[u],d=0;d<h.length;d++)h[d].tokens=[],this.lexer.inlineTokens(h[d].text,h[d].tokens);return s}}}lheading(a){const n=this.rules.block.lheading.exec(a);if(n){const s={type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}paragraph(a){const n=this.rules.block.paragraph.exec(a);if(n){const s={type:"paragraph",raw:n[0],text:n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}text(a){const n=this.rules.block.text.exec(a);if(n){const s={type:"text",raw:n[0],text:n[0],tokens:[]};return this.lexer.inline(s.text,s.tokens),s}}escape(a){const n=this.rules.inline.escape.exec(a);if(n)return{type:"escape",raw:n[0],text:escape$1(n[1])}}tag(a){const n=this.rules.inline.tag.exec(a);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):escape$1(n[0]):n[0]}}link(a){const n=this.rules.inline.link.exec(a);if(n){const s=n[2].trim();if(!this.options.pedantic&&/^</.test(s)){if(!/>$/.test(s))return;const u=rtrim(s.slice(0,-1),"\\");if((s.length-u.length)%2===0)return}else{const u=findClosingBracket(n[2],"()");if(u>-1){const h=(n[0].indexOf("!")===0?5:4)+n[1].length+u;n[2]=n[2].substring(0,u),n[0]=n[0].substring(0,h).trim(),n[3]=""}}let l=n[2],c="";if(this.options.pedantic){const u=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(l);u&&(l=u[1],c=u[3])}else c=n[3]?n[3].slice(1,-1):"";return l=l.trim(),/^</.test(l)&&(this.options.pedantic&&!/>$/.test(s)?l=l.slice(1):l=l.slice(1,-1)),outputLink(n,{href:l&&l.replace(this.rules.inline._escapes,"$1"),title:c&&c.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(a,n){let s;if((s=this.rules.inline.reflink.exec(a))||(s=this.rules.inline.nolink.exec(a))){let l=(s[2]||s[1]).replace(/\s+/g," ");if(l=n[l.toLowerCase()],!l||!l.href){const c=s[0].charAt(0);return{type:"text",raw:c,text:c}}return outputLink(s,l,s[0],this.lexer)}}emStrong(a,n,s=""){let l=this.rules.inline.emStrong.lDelim.exec(a);if(!l||l[3]&&s.match(/[\p{L}\p{N}]/u))return;const c=l[1]||l[2]||"";if(!c||c&&(s===""||this.rules.inline.punctuation.exec(s))){const u=l[0].length-1;let d,h,f=u,p=0;const g=l[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(g.lastIndex=0,n=n.slice(-1*a.length+u);(l=g.exec(n))!=null;){if(d=l[1]||l[2]||l[3]||l[4]||l[5]||l[6],!d)continue;if(h=d.length,l[3]||l[4]){f+=h;continue}else if((l[5]||l[6])&&u%3&&!((u+h)%3)){p+=h;continue}if(f-=h,f>0)continue;if(h=Math.min(h,h+f+p),Math.min(u,h)%2){const b=a.slice(1,u+l.index+h);return{type:"em",raw:a.slice(0,u+l.index+h+1),text:b,tokens:this.lexer.inlineTokens(b,[])}}const v=a.slice(2,u+l.index+h-1);return{type:"strong",raw:a.slice(0,u+l.index+h+1),text:v,tokens:this.lexer.inlineTokens(v,[])}}}}codespan(a){const n=this.rules.inline.code.exec(a);if(n){let s=n[2].replace(/\n/g," ");const l=/[^ ]/.test(s),c=/^ /.test(s)&&/ $/.test(s);return l&&c&&(s=s.substring(1,s.length-1)),s=escape$1(s,!0),{type:"codespan",raw:n[0],text:s}}}br(a){const n=this.rules.inline.br.exec(a);if(n)return{type:"br",raw:n[0]}}del(a){const n=this.rules.inline.del.exec(a);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2],[])}}autolink(a,n){const s=this.rules.inline.autolink.exec(a);if(s){let l,c;return s[2]==="@"?(l=escape$1(this.options.mangle?n(s[1]):s[1]),c="mailto:"+l):(l=escape$1(s[1]),c=l),{type:"link",raw:s[0],text:l,href:c,tokens:[{type:"text",raw:l,text:l}]}}}url(a,n){let s;if(s=this.rules.inline.url.exec(a)){let l,c;if(s[2]==="@")l=escape$1(this.options.mangle?n(s[0]):s[0]),c="mailto:"+l;else{let u;do u=s[0],s[0]=this.rules.inline._backpedal.exec(s[0])[0];while(u!==s[0]);l=escape$1(s[0]),s[1]==="www."?c="http://"+l:c=l}return{type:"link",raw:s[0],text:l,href:c,tokens:[{type:"text",raw:l,text:l}]}}}inlineText(a,n){const s=this.rules.inline.text.exec(a);if(s){let l;return this.lexer.state.inRawBlock?l=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):escape$1(s[0]):s[0]:l=escape$1(this.options.smartypants?n(s[0]):s[0]),{type:"text",raw:s[0],text:l}}}}const block={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};block._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;block._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block.def=edit(block.def).replace("label",block._label).replace("title",block._title).getRegex();block.bullet=/(?:[*+-]|\d{1,9}[.)])/;block.listItemStart=edit(/^( *)(bull) */).replace("bull",block.bullet).getRegex();block.list=edit(block.list).replace(/bull/g,block.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block.def.source+")").getRegex();block._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block.html=edit(block.html,"i").replace("comment",block._comment).replace("tag",block._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.blockquote=edit(block.blockquote).replace("paragraph",block.paragraph).getRegex();block.normal=merge$2({},block);block.gfm=merge$2({},block.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block.gfm.table=edit(block.gfm.table).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.gfm.paragraph=edit(block._paragraph).replace("hr",block.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",block.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block._tag).getRegex();block.pedantic=merge$2({},block.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block.normal._paragraph).replace("hr",block.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline.punctuation=edit(inline.punctuation).replace(/punctuation/g,inline._punctuation).getRegex();inline.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline.escapedEmSt=/\\\*|\\_/g;inline._comment=edit(block._comment).replace("(?:-->|$)","-->").getRegex();inline.emStrong.lDelim=edit(inline.emStrong.lDelim).replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimAst=edit(inline.emStrong.rDelimAst,"g").replace(/punct/g,inline._punctuation).getRegex();inline.emStrong.rDelimUnd=edit(inline.emStrong.rDelimUnd,"g").replace(/punct/g,inline._punctuation).getRegex();inline._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline.autolink=edit(inline.autolink).replace("scheme",inline._scheme).replace("email",inline._email).getRegex();inline._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline.tag=edit(inline.tag).replace("comment",inline._comment).replace("attribute",inline._attribute).getRegex();inline._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline.link=edit(inline.link).replace("label",inline._label).replace("href",inline._href).replace("title",inline._title).getRegex();inline.reflink=edit(inline.reflink).replace("label",inline._label).replace("ref",block._label).getRegex();inline.nolink=edit(inline.nolink).replace("ref",block._label).getRegex();inline.reflinkSearch=edit(inline.reflinkSearch,"g").replace("reflink",inline.reflink).replace("nolink",inline.nolink).getRegex();inline.normal=merge$2({},inline);inline.pedantic=merge$2({},inline.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline._label).getRegex()});inline.gfm=merge$2({},inline.normal,{escape:edit(inline.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline.gfm.url=edit(inline.gfm.url,"i").replace("email",inline.gfm._extended_email).getRegex();inline.breaks=merge$2({},inline.gfm,{br:edit(inline.br).replace("{2,}","*").getRegex(),text:edit(inline.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function smartypants(o){return o.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function mangle(o){let a="",n,s;const l=o.length;for(n=0;n<l;n++)s=o.charCodeAt(n),Math.random()>.5&&(s="x"+s.toString(16)),a+="&#"+s+";";return a}class Lexer{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||defaults$2,this.options.tokenizer=this.options.tokenizer||new Tokenizer,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:block.normal,inline:inline.normal};this.options.pedantic?(n.block=block.pedantic,n.inline=inline.pedantic):this.options.gfm&&(n.block=block.gfm,this.options.breaks?n.inline=inline.breaks:n.inline=inline.gfm),this.tokenizer.rules=n}static get rules(){return{block,inline}}static lex(a,n){return new Lexer(n).lex(a)}static lexInline(a,n){return new Lexer(n).inlineTokens(a)}lex(a){a=a.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(a,this.tokens);let n;for(;n=this.inlineQueue.shift();)this.inlineTokens(n.src,n.tokens);return this.tokens}blockTokens(a,n=[]){this.options.pedantic&&(a=a.replace(/^ +$/gm,""));let s,l,c,u;for(;a;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(d=>(s=d.call({lexer:this},a,n))?(a=a.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.space(a)){a=a.substring(s.raw.length),s.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(s);continue}if(s=this.tokenizer.code(a)){a=a.substring(s.raw.length),l=n[n.length-1],l&&(l.type==="paragraph"||l.type==="text")?(l.raw+=`
`+s.raw,l.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=l.text):n.push(s);continue}if(s=this.tokenizer.fences(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.heading(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.hr(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.blockquote(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.list(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.html(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.def(a)){a=a.substring(s.raw.length),l=n[n.length-1],l&&(l.type==="paragraph"||l.type==="text")?(l.raw+=`
`+s.raw,l.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=l.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.lheading(a)){a=a.substring(s.raw.length),n.push(s);continue}if(c=a,this.options.extensions&&this.options.extensions.startBlock){let d=1/0;const h=a.slice(1);let f;this.options.extensions.startBlock.forEach(function(p){f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(d=Math.min(d,f))}),d<1/0&&d>=0&&(c=a.substring(0,d+1))}if(this.state.top&&(s=this.tokenizer.paragraph(c))){l=n[n.length-1],u&&l.type==="paragraph"?(l.raw+=`
`+s.raw,l.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):n.push(s),u=c.length!==a.length,a=a.substring(s.raw.length);continue}if(s=this.tokenizer.text(a)){a=a.substring(s.raw.length),l=n[n.length-1],l&&l.type==="text"?(l.raw+=`
`+s.raw,l.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=l.text):n.push(s);continue}if(a){const d="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return this.state.top=!0,n}inline(a,n){this.inlineQueue.push({src:a,tokens:n})}inlineTokens(a,n=[]){let s,l,c,u=a,d,h,f;if(this.tokens.links){const p=Object.keys(this.tokens.links);if(p.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(u))!=null;)p.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,d.index)+"["+repeatString("a",d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(u))!=null;)u=u.slice(0,d.index)+"["+repeatString("a",d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.escapedEmSt.exec(u))!=null;)u=u.slice(0,d.index)+"++"+u.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;a;)if(h||(f=""),h=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(p=>(s=p.call({lexer:this},a,n))?(a=a.substring(s.raw.length),n.push(s),!0):!1))){if(s=this.tokenizer.escape(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.tag(a)){a=a.substring(s.raw.length),l=n[n.length-1],l&&s.type==="text"&&l.type==="text"?(l.raw+=s.raw,l.text+=s.text):n.push(s);continue}if(s=this.tokenizer.link(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.reflink(a,this.tokens.links)){a=a.substring(s.raw.length),l=n[n.length-1],l&&s.type==="text"&&l.type==="text"?(l.raw+=s.raw,l.text+=s.text):n.push(s);continue}if(s=this.tokenizer.emStrong(a,u,f)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.codespan(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.br(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.del(a)){a=a.substring(s.raw.length),n.push(s);continue}if(s=this.tokenizer.autolink(a,mangle)){a=a.substring(s.raw.length),n.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(a,mangle))){a=a.substring(s.raw.length),n.push(s);continue}if(c=a,this.options.extensions&&this.options.extensions.startInline){let p=1/0;const g=a.slice(1);let v;this.options.extensions.startInline.forEach(function(b){v=b.call({lexer:this},g),typeof v=="number"&&v>=0&&(p=Math.min(p,v))}),p<1/0&&p>=0&&(c=a.substring(0,p+1))}if(s=this.tokenizer.inlineText(c,smartypants)){a=a.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(f=s.raw.slice(-1)),h=!0,l=n[n.length-1],l&&l.type==="text"?(l.raw+=s.raw,l.text+=s.text):n.push(s);continue}if(a){const p="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return n}}class Renderer{constructor(a){this.options=a||defaults$2}code(a,n,s){const l=(n||"").match(/\S*/)[0];if(this.options.highlight){const c=this.options.highlight(a,l);c!=null&&c!==a&&(s=!0,a=c)}return a=a.replace(/\n$/,"")+`
`,l?'<pre><code class="'+this.options.langPrefix+escape$1(l,!0)+'">'+(s?a:escape$1(a,!0))+`</code></pre>
`:"<pre><code>"+(s?a:escape$1(a,!0))+`</code></pre>
`}blockquote(a){return`<blockquote>
`+a+`</blockquote>
`}html(a){return a}heading(a,n,s,l){return this.options.headerIds?"<h"+n+' id="'+this.options.headerPrefix+l.slug(s)+'">'+a+"</h"+n+`>
`:"<h"+n+">"+a+"</h"+n+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(a,n,s){const l=n?"ol":"ul",c=n&&s!==1?' start="'+s+'"':"";return"<"+l+c+`>
`+a+"</"+l+`>
`}listitem(a){return"<li>"+a+`</li>
`}checkbox(a){return"<input "+(a?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(a){return"<p>"+a+`</p>
`}table(a,n){return n&&(n="<tbody>"+n+"</tbody>"),`<table>
<thead>
`+a+`</thead>
`+n+`</table>
`}tablerow(a){return`<tr>
`+a+`</tr>
`}tablecell(a,n){const s=n.header?"th":"td";return(n.align?"<"+s+' align="'+n.align+'">':"<"+s+">")+a+"</"+s+`>
`}strong(a){return"<strong>"+a+"</strong>"}em(a){return"<em>"+a+"</em>"}codespan(a){return"<code>"+a+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(a){return"<del>"+a+"</del>"}link(a,n,s){if(a=cleanUrl(this.options.sanitize,this.options.baseUrl,a),a===null)return s;let l='<a href="'+escape$1(a)+'"';return n&&(l+=' title="'+n+'"'),l+=">"+s+"</a>",l}image(a,n,s){if(a=cleanUrl(this.options.sanitize,this.options.baseUrl,a),a===null)return s;let l='<img src="'+a+'" alt="'+s+'"';return n&&(l+=' title="'+n+'"'),l+=this.options.xhtml?"/>":">",l}text(a){return a}}class TextRenderer{strong(a){return a}em(a){return a}codespan(a){return a}del(a){return a}html(a){return a}text(a){return a}link(a,n,s){return""+s}image(a,n,s){return""+s}br(){return""}}class Slugger{constructor(){this.seen={}}serialize(a){return a.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(a,n){let s=a,l=0;if(this.seen.hasOwnProperty(s)){l=this.seen[a];do l++,s=a+"-"+l;while(this.seen.hasOwnProperty(s))}return n||(this.seen[a]=l,this.seen[s]=0),s}slug(a,n={}){const s=this.serialize(a);return this.getNextSafeSlug(s,n.dryrun)}}class Parser{constructor(a){this.options=a||defaults$2,this.options.renderer=this.options.renderer||new Renderer,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer,this.slugger=new Slugger}static parse(a,n){return new Parser(n).parse(a)}static parseInline(a,n){return new Parser(n).parseInline(a)}parse(a,n=!0){let s="",l,c,u,d,h,f,p,g,v,b,w,x,S,E,T,C,A,R,j;const D=a.length;for(l=0;l<D;l++){if(b=a[l],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[b.type]&&(j=this.options.extensions.renderers[b.type].call({parser:this},b),j!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(b.type))){s+=j||"";continue}switch(b.type){case"space":continue;case"hr":{s+=this.renderer.hr();continue}case"heading":{s+=this.renderer.heading(this.parseInline(b.tokens),b.depth,unescape$1(this.parseInline(b.tokens,this.textRenderer)),this.slugger);continue}case"code":{s+=this.renderer.code(b.text,b.lang,b.escaped);continue}case"table":{for(g="",p="",d=b.header.length,c=0;c<d;c++)p+=this.renderer.tablecell(this.parseInline(b.header[c].tokens),{header:!0,align:b.align[c]});for(g+=this.renderer.tablerow(p),v="",d=b.rows.length,c=0;c<d;c++){for(f=b.rows[c],p="",h=f.length,u=0;u<h;u++)p+=this.renderer.tablecell(this.parseInline(f[u].tokens),{header:!1,align:b.align[u]});v+=this.renderer.tablerow(p)}s+=this.renderer.table(g,v);continue}case"blockquote":{v=this.parse(b.tokens),s+=this.renderer.blockquote(v);continue}case"list":{for(w=b.ordered,x=b.start,S=b.loose,d=b.items.length,v="",c=0;c<d;c++)T=b.items[c],C=T.checked,A=T.task,E="",T.task&&(R=this.renderer.checkbox(C),S?T.tokens.length>0&&T.tokens[0].type==="paragraph"?(T.tokens[0].text=R+" "+T.tokens[0].text,T.tokens[0].tokens&&T.tokens[0].tokens.length>0&&T.tokens[0].tokens[0].type==="text"&&(T.tokens[0].tokens[0].text=R+" "+T.tokens[0].tokens[0].text)):T.tokens.unshift({type:"text",text:R}):E+=R),E+=this.parse(T.tokens,S),v+=this.renderer.listitem(E,A,C);s+=this.renderer.list(v,w,x);continue}case"html":{s+=this.renderer.html(b.text);continue}case"paragraph":{s+=this.renderer.paragraph(this.parseInline(b.tokens));continue}case"text":{for(v=b.tokens?this.parseInline(b.tokens):b.text;l+1<D&&a[l+1].type==="text";)b=a[++l],v+=`
`+(b.tokens?this.parseInline(b.tokens):b.text);s+=n?this.renderer.paragraph(v):v;continue}default:{const O='Token with "'+b.type+'" type was not found.';if(this.options.silent){console.error(O);return}else throw new Error(O)}}}return s}parseInline(a,n){n=n||this.renderer;let s="",l,c,u;const d=a.length;for(l=0;l<d;l++){if(c=a[l],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type]&&(u=this.options.extensions.renderers[c.type].call({parser:this},c),u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(c.type))){s+=u||"";continue}switch(c.type){case"escape":{s+=n.text(c.text);break}case"html":{s+=n.html(c.text);break}case"link":{s+=n.link(c.href,c.title,this.parseInline(c.tokens,n));break}case"image":{s+=n.image(c.href,c.title,c.text);break}case"strong":{s+=n.strong(this.parseInline(c.tokens,n));break}case"em":{s+=n.em(this.parseInline(c.tokens,n));break}case"codespan":{s+=n.codespan(c.text);break}case"br":{s+=n.br();break}case"del":{s+=n.del(this.parseInline(c.tokens,n));break}case"text":{s+=n.text(c.text);break}default:{const h='Token with "'+c.type+'" type was not found.';if(this.options.silent){console.error(h);return}else throw new Error(h)}}}return s}}function marked(o,a,n){if(typeof o>"u"||o===null)throw new Error("marked(): input parameter is undefined or null");if(typeof o!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected");if(typeof a=="function"&&(n=a,a=null),a=merge$2({},marked.defaults,a||{}),checkSanitizeDeprecation(a),n){const s=a.highlight;let l;try{l=Lexer.lex(o,a)}catch(d){return n(d)}const c=function(d){let h;if(!d)try{a.walkTokens&&marked.walkTokens(l,a.walkTokens),h=Parser.parse(l,a)}catch(f){d=f}return a.highlight=s,d?n(d):n(null,h)};if(!s||s.length<3||(delete a.highlight,!l.length))return c();let u=0;marked.walkTokens(l,function(d){d.type==="code"&&(u++,setTimeout(()=>{s(d.text,d.lang,function(h,f){if(h)return c(h);f!=null&&f!==d.text&&(d.text=f,d.escaped=!0),u--,u===0&&c()})},0))}),u===0&&c();return}try{const s=Lexer.lex(o,a);return a.walkTokens&&marked.walkTokens(s,a.walkTokens),Parser.parse(s,a)}catch(s){if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+escape$1(s.message+"",!0)+"</pre>";throw s}}marked.options=marked.setOptions=function(o){return merge$2(marked.defaults,o),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$2;marked.use=function(...o){const a=merge$2({},...o),n=marked.defaults.extensions||{renderers:{},childTokens:{}};let s;o.forEach(l=>{if(l.extensions&&(s=!0,l.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if(c.renderer){const u=n.renderers?n.renderers[c.name]:null;u?n.renderers[c.name]=function(...d){let h=c.renderer.apply(this,d);return h===!1&&(h=u.apply(this,d)),h}:n.renderers[c.name]=c.renderer}if(c.tokenizer){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");n[c.level]?n[c.level].unshift(c.tokenizer):n[c.level]=[c.tokenizer],c.start&&(c.level==="block"?n.startBlock?n.startBlock.push(c.start):n.startBlock=[c.start]:c.level==="inline"&&(n.startInline?n.startInline.push(c.start):n.startInline=[c.start]))}c.childTokens&&(n.childTokens[c.name]=c.childTokens)})),l.renderer){const c=marked.defaults.renderer||new Renderer;for(const u in l.renderer){const d=c[u];c[u]=(...h)=>{let f=l.renderer[u].apply(c,h);return f===!1&&(f=d.apply(c,h)),f}}a.renderer=c}if(l.tokenizer){const c=marked.defaults.tokenizer||new Tokenizer;for(const u in l.tokenizer){const d=c[u];c[u]=(...h)=>{let f=l.tokenizer[u].apply(c,h);return f===!1&&(f=d.apply(c,h)),f}}a.tokenizer=c}if(l.walkTokens){const c=marked.defaults.walkTokens;a.walkTokens=function(u){l.walkTokens.call(this,u),c&&c.call(this,u)}}s&&(a.extensions=n),marked.setOptions(a)})};marked.walkTokens=function(o,a){for(const n of o)switch(a.call(marked,n),n.type){case"table":{for(const s of n.header)marked.walkTokens(s.tokens,a);for(const s of n.rows)for(const l of s)marked.walkTokens(l.tokens,a);break}case"list":{marked.walkTokens(n.items,a);break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[n.type]?marked.defaults.extensions.childTokens[n.type].forEach(function(s){marked.walkTokens(n[s],a)}):n.tokens&&marked.walkTokens(n.tokens,a)}};marked.parseInline=function(o,a){if(typeof o>"u"||o===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof o!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected");a=merge$2({},marked.defaults,a||{}),checkSanitizeDeprecation(a);try{const n=Lexer.lexInline(o,a);return a.walkTokens&&marked.walkTokens(n,a.walkTokens),Parser.parseInline(n,a)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+escape$1(n.message+"",!0)+"</pre>";throw n}};marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger;marked.parse=marked;marked.options;marked.setOptions;marked.use;marked.walkTokens;marked.parseInline;Parser.parse;Lexer.lex;function extend$2(o){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var s in n)n.hasOwnProperty(s)&&(o[s]=n[s])}return o}function repeat(o,a){return Array(a+1).join(o)}function trimLeadingNewlines(o){return o.replace(/^\n*/,"")}function trimTrailingNewlines(o){for(var a=o.length;a>0&&o[a-1]===`
`;)a--;return o.substring(0,a)}var blockElements=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function isBlock(o){return is(o,blockElements)}var voidElements=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function isVoid(o){return is(o,voidElements)}function hasVoid(o){return has$2(o,voidElements)}var meaningfulWhenBlankElements=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function isMeaningfulWhenBlank(o){return is(o,meaningfulWhenBlankElements)}function hasMeaningfulWhenBlank(o){return has$2(o,meaningfulWhenBlankElements)}function is(o,a){return a.indexOf(o.nodeName)>=0}function has$2(o,a){return o.getElementsByTagName&&a.some(function(n){return o.getElementsByTagName(n).length})}var rules$1={};rules$1.paragraph={filter:"p",replacement:function(o){return`

`+o+`

`}};rules$1.lineBreak={filter:"br",replacement:function(o,a,n){return n.br+`
`}};rules$1.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(o,a,n){var s=Number(a.nodeName.charAt(1));if(n.headingStyle==="setext"&&s<3){var l=repeat(s===1?"=":"-",o.length);return`

`+o+`
`+l+`

`}else return`

`+repeat("#",s)+" "+o+`

`}};rules$1.blockquote={filter:"blockquote",replacement:function(o){return o=o.replace(/^\n+|\n+$/g,""),o=o.replace(/^/gm,"> "),`

`+o+`

`}};rules$1.list={filter:["ul","ol"],replacement:function(o,a){var n=a.parentNode;return n.nodeName==="LI"&&n.lastElementChild===a?`
`+o:`

`+o+`

`}};rules$1.listItem={filter:"li",replacement:function(o,a,n){o=o.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var s=n.bulletListMarker+"   ",l=a.parentNode;if(l.nodeName==="OL"){var c=l.getAttribute("start"),u=Array.prototype.indexOf.call(l.children,a);s=(c?Number(c)+u:u+1)+".  "}return s+o+(a.nextSibling&&!/\n$/.test(o)?`
`:"")}};rules$1.indentedCodeBlock={filter:function(o,a){return a.codeBlockStyle==="indented"&&o.nodeName==="PRE"&&o.firstChild&&o.firstChild.nodeName==="CODE"},replacement:function(o,a,n){return`

    `+a.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};rules$1.fencedCodeBlock={filter:function(o,a){return a.codeBlockStyle==="fenced"&&o.nodeName==="PRE"&&o.firstChild&&o.firstChild.nodeName==="CODE"},replacement:function(o,a,n){for(var s=a.firstChild.getAttribute("class")||"",l=(s.match(/language-(\S+)/)||[null,""])[1],c=a.firstChild.textContent,u=n.fence.charAt(0),d=3,h=new RegExp("^"+u+"{3,}","gm"),f;f=h.exec(c);)f[0].length>=d&&(d=f[0].length+1);var p=repeat(u,d);return`

`+p+l+`
`+c.replace(/\n$/,"")+`
`+p+`

`}};rules$1.horizontalRule={filter:"hr",replacement:function(o,a,n){return`

`+n.hr+`

`}};rules$1.inlineLink={filter:function(o,a){return a.linkStyle==="inlined"&&o.nodeName==="A"&&o.getAttribute("href")},replacement:function(o,a){var n=a.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var s=cleanAttribute(a.getAttribute("title"));return s&&(s=' "'+s.replace(/"/g,'\\"')+'"'),"["+o+"]("+n+s+")"}};rules$1.referenceLink={filter:function(o,a){return a.linkStyle==="referenced"&&o.nodeName==="A"&&o.getAttribute("href")},replacement:function(o,a,n){var s=a.getAttribute("href"),l=cleanAttribute(a.getAttribute("title"));l&&(l=' "'+l+'"');var c,u;switch(n.linkReferenceStyle){case"collapsed":c="["+o+"][]",u="["+o+"]: "+s+l;break;case"shortcut":c="["+o+"]",u="["+o+"]: "+s+l;break;default:var d=this.references.length+1;c="["+o+"]["+d+"]",u="["+d+"]: "+s+l}return this.references.push(u),c},references:[],append:function(o){var a="";return this.references.length&&(a=`

`+this.references.join(`
`)+`

`,this.references=[]),a}};rules$1.emphasis={filter:["em","i"],replacement:function(o,a,n){return o.trim()?n.emDelimiter+o+n.emDelimiter:""}};rules$1.strong={filter:["strong","b"],replacement:function(o,a,n){return o.trim()?n.strongDelimiter+o+n.strongDelimiter:""}};rules$1.code={filter:function(o){var a=o.previousSibling||o.nextSibling,n=o.parentNode.nodeName==="PRE"&&!a;return o.nodeName==="CODE"&&!n},replacement:function(o){if(!o)return"";o=o.replace(/\r?\n|\r/g," ");for(var a=/^`|^ .*?[^ ].* $|`$/.test(o)?" ":"",n="`",s=o.match(/`+/gm)||[];s.indexOf(n)!==-1;)n=n+"`";return n+a+o+a+n}};rules$1.image={filter:"img",replacement:function(o,a){var n=cleanAttribute(a.getAttribute("alt")),s=a.getAttribute("src")||"",l=cleanAttribute(a.getAttribute("title")),c=l?' "'+l+'"':"";return s?"!["+n+"]("+s+c+")":""}};function cleanAttribute(o){return o?o.replace(/(\n+\s*)+/g,`
`):""}function Rules(o){this.options=o,this._keep=[],this._remove=[],this.blankRule={replacement:o.blankReplacement},this.keepReplacement=o.keepReplacement,this.defaultRule={replacement:o.defaultReplacement},this.array=[];for(var a in o.rules)this.array.push(o.rules[a])}Rules.prototype={add:function(o,a){this.array.unshift(a)},keep:function(o){this._keep.unshift({filter:o,replacement:this.keepReplacement})},remove:function(o){this._remove.unshift({filter:o,replacement:function(){return""}})},forNode:function(o){if(o.isBlank)return this.blankRule;var a;return(a=findRule(this.array,o,this.options))||(a=findRule(this._keep,o,this.options))||(a=findRule(this._remove,o,this.options))?a:this.defaultRule},forEach:function(o){for(var a=0;a<this.array.length;a++)o(this.array[a],a)}};function findRule(o,a,n){for(var s=0;s<o.length;s++){var l=o[s];if(filterValue(l,a,n))return l}}function filterValue(o,a,n){var s=o.filter;if(typeof s=="string"){if(s===a.nodeName.toLowerCase())return!0}else if(Array.isArray(s)){if(s.indexOf(a.nodeName.toLowerCase())>-1)return!0}else if(typeof s=="function"){if(s.call(o,a,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function collapseWhitespace(o){var a=o.element,n=o.isBlock,s=o.isVoid,l=o.isPre||function(g){return g.nodeName==="PRE"};if(!(!a.firstChild||l(a))){for(var c=null,u=!1,d=null,h=next(d,a,l);h!==a;){if(h.nodeType===3||h.nodeType===4){var f=h.data.replace(/[ \r\n\t]+/g," ");if((!c||/ $/.test(c.data))&&!u&&f[0]===" "&&(f=f.substr(1)),!f){h=remove(h);continue}h.data=f,c=h}else if(h.nodeType===1)n(h)||h.nodeName==="BR"?(c&&(c.data=c.data.replace(/ $/,"")),c=null,u=!1):s(h)||l(h)?(c=null,u=!0):c&&(u=!1);else{h=remove(h);continue}var p=next(d,h,l);d=h,h=p}c&&(c.data=c.data.replace(/ $/,""),c.data||remove(c))}}function remove(o){var a=o.nextSibling||o.parentNode;return o.parentNode.removeChild(o),a}function next(o,a,n){return o&&o.parentNode===a||n(a)?a.nextSibling||a.parentNode:a.firstChild||a.nextSibling||a.parentNode}var root=typeof window<"u"?window:{};function canParseHTMLNatively(){var o=root.DOMParser,a=!1;try{new o().parseFromString("","text/html")&&(a=!0)}catch{}return a}function createHTMLParser(){var o=function(){};return shouldUseActiveX()?o.prototype.parseFromString=function(a){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(a),n.close(),n}:o.prototype.parseFromString=function(a){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(a),n.close(),n},o}function shouldUseActiveX(){var o=!1;try{document.implementation.createHTMLDocument("").open()}catch{root.ActiveXObject&&(o=!0)}return o}var HTMLParser=canParseHTMLNatively()?root.DOMParser:createHTMLParser();function RootNode(o,a){var n;if(typeof o=="string"){var s=htmlParser().parseFromString('<x-turndown id="turndown-root">'+o+"</x-turndown>","text/html");n=s.getElementById("turndown-root")}else n=o.cloneNode(!0);return collapseWhitespace({element:n,isBlock,isVoid,isPre:a.preformattedCode?isPreOrCode:null}),n}var _htmlParser;function htmlParser(){return _htmlParser=_htmlParser||new HTMLParser,_htmlParser}function isPreOrCode(o){return o.nodeName==="PRE"||o.nodeName==="CODE"}function Node$1(o,a){return o.isBlock=isBlock(o),o.isCode=o.nodeName==="CODE"||o.parentNode.isCode,o.isBlank=isBlank(o),o.flankingWhitespace=flankingWhitespace(o,a),o}function isBlank(o){return!isVoid(o)&&!isMeaningfulWhenBlank(o)&&/^\s*$/i.test(o.textContent)&&!hasVoid(o)&&!hasMeaningfulWhenBlank(o)}function flankingWhitespace(o,a){if(o.isBlock||a.preformattedCode&&o.isCode)return{leading:"",trailing:""};var n=edgeWhitespace(o.textContent);return n.leadingAscii&&isFlankedByWhitespace("left",o,a)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&isFlankedByWhitespace("right",o,a)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function edgeWhitespace(o){var a=o.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:a[1],leadingAscii:a[2],leadingNonAscii:a[3],trailing:a[4],trailingNonAscii:a[5],trailingAscii:a[6]}}function isFlankedByWhitespace(o,a,n){var s,l,c;return o==="left"?(s=a.previousSibling,l=/ $/):(s=a.nextSibling,l=/^ /),s&&(s.nodeType===3?c=l.test(s.nodeValue):n.preformattedCode&&s.nodeName==="CODE"?c=!1:s.nodeType===1&&!isBlock(s)&&(c=l.test(s.textContent))),c}var reduce$1=Array.prototype.reduce,escapes=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function TurndownService(o){if(!(this instanceof TurndownService))return new TurndownService(o);var a={rules:rules$1,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,s){return s.isBlock?`

`:""},keepReplacement:function(n,s){return s.isBlock?`

`+s.outerHTML+`

`:s.outerHTML},defaultReplacement:function(n,s){return s.isBlock?`

`+n+`

`:n}};this.options=extend$2({},a,o),this.rules=new Rules(this.options)}TurndownService.prototype={turndown:function(o){if(!canConvert(o))throw new TypeError(o+" is not a string, or an element/document/fragment node.");if(o==="")return"";var a=process$1.call(this,new RootNode(o,this.options));return postProcess.call(this,a)},use:function(o){if(Array.isArray(o))for(var a=0;a<o.length;a++)this.use(o[a]);else if(typeof o=="function")o(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(o,a){return this.rules.add(o,a),this},keep:function(o){return this.rules.keep(o),this},remove:function(o){return this.rules.remove(o),this},escape:function(o){return escapes.reduce(function(a,n){return a.replace(n[0],n[1])},o)}};function process$1(o){var a=this;return reduce$1.call(o.childNodes,function(n,s){s=new Node$1(s,a.options);var l="";return s.nodeType===3?l=s.isCode?s.nodeValue:a.escape(s.nodeValue):s.nodeType===1&&(l=replacementForNode.call(a,s)),join(n,l)},"")}function postProcess(o){var a=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(o=join(o,n.append(a.options)))}),o.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function replacementForNode(o){var a=this.rules.forNode(o),n=process$1.call(this,o),s=o.flankingWhitespace;return(s.leading||s.trailing)&&(n=n.trim()),s.leading+a.replacement(n,o,this.options)+s.trailing}function join(o,a){var n=trimTrailingNewlines(o),s=trimLeadingNewlines(a),l=Math.max(o.length-n.length,a.length-s.length),c=`

`.substring(0,l);return n+c+s}function canConvert(o){return o!=null&&(typeof o=="string"||o.nodeType&&(o.nodeType===1||o.nodeType===9||o.nodeType===11))}var highlightRegExp=/highlight-(?:text|source)-([a-z0-9]+)/;function highlightedCodeBlock(o){o.addRule("highlightedCodeBlock",{filter:function(a){var n=a.firstChild;return a.nodeName==="DIV"&&highlightRegExp.test(a.className)&&n&&n.nodeName==="PRE"},replacement:function(a,n,s){var l=n.className||"",c=(l.match(highlightRegExp)||[null,""])[1];return`

`+s.fence+c+`
`+n.firstChild.textContent+`
`+s.fence+`

`}})}function strikethrough(o){o.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(a){return"~"+a+"~"}})}var indexOf$1=Array.prototype.indexOf,every=Array.prototype.every,rules={};rules.tableCell={filter:["th","td"],replacement:function(o,a){return cell$1(o,a)}};rules.tableRow={filter:"tr",replacement:function(o,a){var n="",s={left:":--",right:"--:",center:":-:"};if(isHeadingRow(a))for(var l=0;l<a.childNodes.length;l++){var c="---",u=(a.childNodes[l].getAttribute("align")||"").toLowerCase();u&&(c=s[u]||c),n+=cell$1(c,a.childNodes[l])}return`
`+o+(n?`
`+n:"")}};rules.table={filter:function(o){return o.nodeName==="TABLE"&&isHeadingRow(o.rows[0])},replacement:function(o){return o=o.replace(`

`,`
`),`

`+o+`

`}};rules.tableSection={filter:["thead","tbody","tfoot"],replacement:function(o){return o}};function isHeadingRow(o){var a=o.parentNode;return a.nodeName==="THEAD"||a.firstChild===o&&(a.nodeName==="TABLE"||isFirstTbody(a))&&every.call(o.childNodes,function(n){return n.nodeName==="TH"})}function isFirstTbody(o){var a=o.previousSibling;return o.nodeName==="TBODY"&&(!a||a.nodeName==="THEAD"&&/^\s*$/i.test(a.textContent))}function cell$1(o,a){var n=indexOf$1.call(a.parentNode.childNodes,a),s=" ";return n===0&&(s="| "),s+o+" |"}function tables(o){o.keep(function(n){return n.nodeName==="TABLE"&&!isHeadingRow(n.rows[0])});for(var a in rules)o.addRule(a,rules[a])}function taskListItems(o){o.addRule("taskListItems",{filter:function(a){return a.type==="checkbox"&&a.parentNode.nodeName==="LI"},replacement:function(a,n){return(n.checked?"[x]":"[ ]")+" "}})}function gfm(o){o.use([highlightedCodeBlock,strikethrough,tables,taskListItems])}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class MarkdownToHtml{constructor(){M(this,"_parser");M(this,"_options",{gfm:!0,breaks:!0,tables:!0,xhtml:!0,headerIds:!1});marked.use({tokenizer:{autolink:()=>null,url:()=>null},renderer:{checkbox(...a){return Object.getPrototypeOf(this).checkbox.call(this,...a).trimRight()},code(...a){return Object.getPrototypeOf(this).code.call(this,...a).replace(`
</code>`,"</code>")}}}),this._parser=marked}parse(a){return this._parser.parse(a,this._options)}}const autolinkRegex=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");class UpdatedTurndown extends TurndownService{escape(a){const n=super.escape;function s(u){return u=n(u),u=u.replace(/</g,"\\<"),u}let l="",c=0;for(const u of this._matchAutolink(a)){const d=u.index;d>c&&(l+=s(a.substring(c,d)));const h=u[0];l+=h,c=d+h.length}return c<a.length&&(l+=s(a.substring(c,a.length))),l}*_matchAutolink(a){for(const n of a.matchAll(autolinkRegex)){const s=n[0],l=this._autolinkFindEnd(s);yield Object.assign([s.substring(0,l)],{index:n.index})}}_autolinkFindEnd(a){let n=a.length;for(;n>0;){const s=a[n-1];if(`?!.,:*_~'"`.includes(s))n--;else if(s==")"){let l=0;for(let c=0;c<n;c++)a[c]=="("?l++:a[c]==")"&&l--;if(l<0)n--;else break}else break}return n}}class HtmlToMarkdown{constructor(){M(this,"_parser");this._parser=this._createParser()}parse(a){return this._parser.turndown(a)}keep(a){this._parser.keep(a)}_createParser(){const a=new UpdatedTurndown({codeBlockStyle:"fenced",hr:"---",headingStyle:"atx"});return a.use([gfm,this._todoList]),a}_todoList(a){a.addRule("taskListItems",{filter(n){return n.type==="checkbox"&&(n.parentNode.nodeName==="LI"||n.parentNode.parentNode.nodeName==="LI")},replacement(n,s){return(s.checked?"[x]":"[ ]")+" "}})}}class GFMDataProcessor{constructor(a){M(this,"_htmlDP");M(this,"_markdown2html");M(this,"_html2markdown");this._htmlDP=new HtmlDataProcessor(a),this._markdown2html=new MarkdownToHtml,this._html2markdown=new HtmlToMarkdown}keepHtml(a){this._html2markdown.keep([a])}toView(a){const n=this._markdown2html.parse(a);return this._htmlDP.toView(n)}toData(a){const n=this._htmlDP.toData(a);return this._html2markdown.parse(n)}registerRawContentMatcher(a){this._htmlDP.registerRawContentMatcher(a)}useFillerType(){}}class Markdown extends Plugin{constructor(a){super(a),a.data.processor=new GFMDataProcessor(a.data.viewDocument)}static get pluginName(){return"Markdown"}static get isOfficialPlugin(){return!0}}const ALLOWED_MARKDOWN_FIRST_LEVEL_TAGS=["SPAN","BR","PRE","CODE"];class PasteFromMarkdownExperimental extends Plugin{constructor(n){super(n);M(this,"_gfmDataProcessor");this._gfmDataProcessor=new GFMDataProcessor(n.data.viewDocument)}static get pluginName(){return"PasteFromMarkdownExperimental"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const n=this.editor,l=n.editing.view.document,c=n.plugins.get("ClipboardPipeline");let u=!1;this.listenTo(l,"keydown",(d,h)=>{u=h.shiftKey}),this.listenTo(c,"inputTransformation",(d,h)=>{if(u)return;const f=h.dataTransfer.getData("text/html");if(!f){const g=h.dataTransfer.getData("text/plain");h.content=this._gfmDataProcessor.toView(g);return}const p=this._parseMarkdownFromHtml(f);p&&(h.content=this._gfmDataProcessor.toView(p))})}_parseMarkdownFromHtml(n){const s=this._removeOsSpecificTags(n);if(!this._containsOnlyAllowedFirstLevelTags(s))return null;const l=this._removeFirstLevelWrapperTagsAndBrs(s);return this._containsAnyRemainingHtmlTags(l)?null:this._replaceHtmlReservedEntitiesWithCharacters(l)}_removeOsSpecificTags(n){return n.replace(/^<meta\b[^>]*>/,"").trim().replace(/^<html>/,"").replace(/<\/html>$/,"").trim().replace(/^<body>/,"").replace(/<\/body>$/,"").trim().replace(/^<!--StartFragment-->/,"").replace(/<!--EndFragment-->$/,"").trim()}_containsOnlyAllowedFirstLevelTags(n){const s=new DOMParser,{body:l}=s.parseFromString(n,"text/html");return Array.from(l.children).map(u=>u.tagName).every(u=>ALLOWED_MARKDOWN_FIRST_LEVEL_TAGS.includes(u))}_removeFirstLevelWrapperTagsAndBrs(n){const s=new DOMParser,{body:l}=s.parseFromString(n,"text/html"),c=l.querySelectorAll("br");for(const d of c)d.replaceWith(`
`);const u=l.querySelectorAll(":scope > *");for(const d of u){const h=d.cloneNode(!0);d.replaceWith(...h.childNodes)}return l.innerHTML}_containsAnyRemainingHtmlTags(n){return n.includes("<")}_replaceHtmlReservedEntitiesWithCharacters(n){return n.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&nbsp;/g," ")}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelToViewUrlAttributeConverter(o,a){const n=(s,l,c)=>{if(!c.consumable.consume(l.item,s.name))return;const u=l.attributeNewValue,d=c.writer,h=c.mapper.toViewElement(l.item),f=[...h.getChildren()].find(g=>g.getCustomProperty("media-content"));d.remove(f);const p=o.getMediaViewElement(d,u,a);d.insert(d.createPositionAt(h,0),p)};return s=>{s.on("attribute:url:media",n)}}function toMediaWidget(o,a,n){return a.setCustomProperty("media",!0,o),toWidget(o,a,{label:n})}function createMediaFigureElement(o,a,n,s){return o.createContainerElement("figure",{class:"media"},[a.getMediaViewElement(o,n,s),o.createSlot()])}function getSelectedMediaModelWidget(o){const a=o.getSelectedElement();return a&&a.is("element","media")?a:null}function insertMedia(o,a,n,s){o.change(l=>{const c=l.createElement("media",{url:a});o.insertObject(c,n,null,{setSelection:"on",findOptimalPosition:s?"auto":void 0})})}class MediaEmbedCommand extends Command{refresh(){const a=this.editor.model,n=a.document.selection,s=getSelectedMediaModelWidget(n);this.value=s?s.getAttribute("url"):void 0,this.isEnabled=isMediaSelected(n)||isAllowedInParent$1(n,a)}execute(a){const n=this.editor.model,s=n.document.selection,l=getSelectedMediaModelWidget(s);l?n.change(c=>{c.setAttribute("url",a,l)}):insertMedia(n,a,s,!0)}}function isAllowedInParent$1(o,a){let s=findOptimalInsertionRange(o,a).start.parent;return s.isEmpty&&!a.schema.isLimit(s)&&(s=s.parent),a.schema.checkChild(s,"media")}function isMediaSelected(o){const a=o.getSelectedElement();return!!a&&a.name==="media"}var mediaPlaceholderIcon='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';const mediaPlaceholderIconViewBox="0 0 64 42";class MediaRegistry{constructor(a,n){M(this,"locale");M(this,"providerDefinitions");const s=n.providers,l=n.extraProviders||[],c=new Set(n.removeProviders),u=s.concat(l).filter(d=>{const h=d.name;return h?!c.has(h):(logWarning("media-embed-no-provider-name",{provider:d}),!1)});this.locale=a,this.providerDefinitions=u}hasMedia(a){return!!this._getMedia(a)}getMediaViewElement(a,n,s){return this._getMedia(n).getViewElement(a,s)}_getMedia(a){if(!a)return new Media(this.locale);a=a.trim();for(const n of this.providerDefinitions){const s=n.html,l=toArray$2(n.url);for(const c of l){const u=this._getUrlMatches(a,c);if(u)return new Media(this.locale,a,u,s)}}return null}_getUrlMatches(a,n){let s=a.match(n);if(s)return s;let l=a.replace(/^https?:\/\//,"");return s=l.match(n),s||(l=l.replace(/^www\./,""),s=l.match(n),s)?s:null}}class Media{constructor(a,n,s,l){M(this,"url");M(this,"_locale");M(this,"_match");M(this,"_previewRenderer");this.url=this._getValidUrl(n),this._locale=a,this._match=s,this._previewRenderer=l}getViewElement(a,n){const s={};let l;if(n.renderForEditingView||n.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(s["data-oembed-url"]=this.url),n.renderForEditingView&&(s.class="ck-media__wrapper");const c=this._getPreviewHtml(n);l=a.createRawElement("div",s,(u,d)=>{d.setContentOf(u,c)})}else this.url&&(s.url=this.url),l=a.createEmptyElement(n.elementName,s);return a.setCustomProperty("media-content",!0,l),l}_getPreviewHtml(a){return this._previewRenderer?this._previewRenderer(this._match):this.url&&a.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){const a=new IconView,n=this._locale.t;return a.content=mediaPlaceholderIcon,a.viewBox=mediaPlaceholderIconViewBox,new Template({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[a]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":n("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(a){return a?a.match(/^https?/)?a:"https://"+a:null}}class MediaEmbedEditing extends Plugin{constructor(n){super(n);M(this,"registry");n.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:s=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${s[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:s=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${s[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:s=>{const l=s[1],c=s[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${l}${c?`?start=${c}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:s=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${s[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new MediaRegistry(n.locale,n.config.get("mediaEmbed"))}static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model.schema,l=n.t,c=n.conversion,u=n.config.get("mediaEmbed.previewsInData"),d=n.config.get("mediaEmbed.elementName"),h=this.registry;n.commands.add("mediaEmbed",new MediaEmbedCommand(n)),s.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),c.for("dataDowncast").elementToStructure({model:"media",view:(f,{writer:p})=>{const g=f.getAttribute("url");return createMediaFigureElement(p,h,g,{elementName:d,renderMediaPreview:!!g&&u})}}),c.for("dataDowncast").add(modelToViewUrlAttributeConverter(h,{elementName:d,renderMediaPreview:u})),c.for("editingDowncast").elementToStructure({model:"media",view:(f,{writer:p})=>{const g=f.getAttribute("url"),v=createMediaFigureElement(p,h,g,{elementName:d,renderForEditingView:!0});return toMediaWidget(v,p,l("media widget"))}}),c.for("editingDowncast").add(modelToViewUrlAttributeConverter(h,{elementName:d,renderForEditingView:!0})),c.for("upcast").elementToElement({view:f=>["oembed",d].includes(f.name)&&f.getAttribute("url")?{name:!0}:null,model:(f,{writer:p})=>{const g=f.getAttribute("url");return h.hasMedia(g)?p.createElement("media",{url:g}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(f,{writer:p})=>{const g=f.getAttribute("data-oembed-url");return h.hasMedia(g)?p.createElement("media",{url:g}):null}}).add(f=>{const p=(g,v,b)=>{if(!b.consumable.consume(v.viewItem,{name:!0,classes:"media"}))return;const{modelRange:w,modelCursor:x}=b.convertChildren(v.viewItem,v.modelCursor);v.modelRange=w,v.modelCursor=x,first(w.getItems())||b.consumable.revert(v.viewItem,{name:!0,classes:"media"})};f.on("element:figure",p)})}}const URL_REGEXP=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/;class AutoMediaEmbed extends Plugin{constructor(n){super(n);M(this,"_timeoutId");M(this,"_positionToInsert");this._timeoutId=null,this._positionToInsert=null}static get requires(){return[Clipboard,Delete,Undo]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model.document,l=n.plugins.get("ClipboardPipeline");this.listenTo(l,"inputTransformation",()=>{const u=s.selection.getFirstRange(),d=LivePosition.fromPosition(u.start);d.stickiness="toPrevious";const h=LivePosition.fromPosition(u.end);h.stickiness="toNext",s.once("change:data",()=>{this._embedMediaBetweenPositions(d,h),d.detach(),h.detach()},{priority:"high"})}),n.commands.get("undo").on("execute",()=>{this._timeoutId&&(global$1.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(n,s){const l=this.editor,c=l.plugins.get(MediaEmbedEditing).registry,u=new LiveRange(n,s),d=u.getWalker({ignoreElementEnd:!0});let h="";for(const p of d)p.item.is("$textProxy")&&(h+=p.item.data);if(h=h.trim(),!h.match(URL_REGEXP)){u.detach();return}if(!c.hasMedia(h)){u.detach();return}if(!l.commands.get("mediaEmbed").isEnabled){u.detach();return}this._positionToInsert=LivePosition.fromPosition(n),this._timeoutId=global$1.window.setTimeout(()=>{l.model.change(p=>{this._timeoutId=null,p.remove(u),u.detach();let g=null;this._positionToInsert.root.rootName!=="$graveyard"&&(g=this._positionToInsert),insertMedia(l.model,h,g,!1),this._positionToInsert.detach(),this._positionToInsert=null}),l.plugins.get(Delete).requestUndoOnBackspace()},100)}}class MediaFormView extends View$1{constructor(n,s){super(s);M(this,"focusTracker");M(this,"keystrokes");M(this,"urlInputView");M(this,"_validators");M(this,"_urlInputViewInfoDefault");M(this,"_urlInputViewInfoTip");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=n,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),submitHandler({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(n){this.urlInputView.fieldView.value=n.trim()}isValid(){this.resetFormStatus();for(const n of this._validators){const s=n(this);if(s)return this.urlInputView.errorText=s,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){const n=this.locale.t,s=new LabeledFieldView(this.locale,createLabeledInputText),l=s.fieldView;return this._urlInputViewInfoDefault=n("Paste the media URL in the input."),this._urlInputViewInfoTip=n("Tip: Paste the URL into the content to embed faster."),s.label=n("Media URL"),s.infoText=this._urlInputViewInfoDefault,l.inputMode="url",l.on("input",()=>{s.infoText=l.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=l.element.value.trim()}),s}}var mediaIcon='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>';class MediaEmbedUI extends Plugin{constructor(){super(...arguments);M(this,"_formView")}static get requires(){return[MediaEmbedEditing,Dialog]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.ui.componentFactory.add("mediaEmbed",()=>{const s=this.editor.locale.t,l=this._createDialogButton(ButtonView);return l.tooltip=!0,l.label=s("Insert media"),l}),n.ui.componentFactory.add("menuBar:mediaEmbed",()=>{const s=this.editor.locale.t,l=this._createDialogButton(MenuBarMenuListItemButtonView);return l.label=s("Media"),l})}_createDialogButton(n){const s=this.editor,l=new n(s.locale),c=s.commands.get("mediaEmbed"),u=this.editor.plugins.get("Dialog");return l.icon=mediaIcon,l.bind("isEnabled").to(c,"isEnabled"),l.on("execute",()=>{u.id==="mediaEmbed"?u.hide():this._showDialog()}),l}_showDialog(){const n=this.editor,s=n.plugins.get("Dialog"),l=n.commands.get("mediaEmbed"),c=n.locale.t;if(!this._formView){const u=n.plugins.get(MediaEmbedEditing).registry;this._formView=new(CssTransitionDisablerMixin(MediaFormView))(getFormValidators(n.t,u),n.locale),this._formView.on("submit",()=>this._handleSubmitForm())}s.show({id:"mediaEmbed",title:c("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=l.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:c("Cancel"),withText:!0,onExecute:()=>s.hide()},{label:c("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){const n=this.editor,s=n.plugins.get("Dialog");this._formView.isValid()&&(n.execute("mediaEmbed",this._formView.url),s.hide(),n.editing.view.focus())}}function getFormValidators(o,a){return[n=>{if(!n.url.length)return o("The URL must not be empty.")},n=>{if(!a.hasMedia(n.url))return o("This media URL is not supported.")}]}class MediaEmbed extends Plugin{static get requires(){return[MediaEmbedEditing,MediaEmbedUI,AutoMediaEmbed,Widget]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const BRACKET_PAIRS={"(":")","[":"]","{":"}"};class MentionCommand extends Command{constructor(a){super(a),this._isEnabledBasedOnSelection=!1}refresh(){const a=this.editor.model,n=a.document;this.isEnabled=a.schema.checkAttributeInSelection(n.selection,"mention")}execute(a){const n=this.editor.model,l=n.document.selection,c=typeof a.mention=="string"?{id:a.mention}:a.mention,u=c.id,d=a.range||l.getFirstRange();if(!n.canEditAt(d))return;const h=a.text||u,f=_addMentionAttributes({_text:h,id:u},c);if(!u.startsWith(a.marker))throw new CKEditorError("mentioncommand-incorrect-id",this);n.change(p=>{const g=toMap(l.getAttributes()),v=new Map(g.entries());v.set("mention",f);const b=n.insertContent(p.createText(h,v),d),w=b.start.nodeBefore,x=b.end.nodeAfter,S=x&&x.is("$text")&&x.data.startsWith(" ");let E=!1;if(w&&x&&w.is("$text")&&x.is("$text")){const T=w.data.slice(-1),C=T in BRACKET_PAIRS,A=C&&x.data.startsWith(BRACKET_PAIRS[T]);E=C&&A}!E&&!S&&n.insertContent(p.createText(" ",g),d.start.getShiftedBy(h.length))})}}class MentionEditing extends Plugin{static get pluginName(){return"MentionEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.model,s=n.document;n.schema.extend("$text",{allowAttributes:"mention"}),a.conversion.for("upcast").elementToAttribute({view:{name:"span",attributes:"data-mention",classes:"mention"},model:{key:"mention",value:l=>_toMentionAttribute(l)}}),a.conversion.for("downcast").attributeToElement({model:"mention",view:createViewMentionElement}),a.conversion.for("downcast").add(preventPartialMentionDowncast),s.registerPostFixer(l=>removePartialMentionPostFixer(l,s,n.schema)),s.registerPostFixer(l=>extendAttributeOnMentionPostFixer(l,s)),s.registerPostFixer(l=>selectionMentionAttributePostFixer(l,s)),a.commands.add("mention",new MentionCommand(a))}}function _addMentionAttributes(o,a){return Object.assign({uid:uid()},o,a||{})}function _toMentionAttribute(o,a){const n=o.getAttribute("data-mention"),s=o.getChild(0);if(!s)return;const l={id:n,_text:s.data};return _addMentionAttributes(l,a)}function preventPartialMentionDowncast(o){o.on("attribute:mention",(a,n,s)=>{const l=n.attributeNewValue;if(!n.item.is("$textProxy")||!l)return;const c=n.range.start;(c.textNode||c.nodeAfter).data!=l._text&&s.consumable.consume(n.item,a.name)},{priority:"highest"})}function createViewMentionElement(o,{writer:a}){if(!o)return;const n={class:"mention","data-mention":o.id},s={id:o.uid,priority:20};return a.createAttributeElement("span",n,s)}function selectionMentionAttributePostFixer(o,a){const n=a.selection,s=n.focus;return n.isCollapsed&&n.hasAttribute("mention")&&shouldNotTypeWithMentionAt(s)?(o.removeSelectionAttribute("mention"),!0):!1}function shouldNotTypeWithMentionAt(o){const a=o.isAtStart;return o.nodeBefore&&o.nodeBefore.is("$text")||a}function removePartialMentionPostFixer(o,a,n){const s=a.differ.getChanges();let l=!1;for(const c of s){if(c.type=="attribute")continue;const u=c.position;if(c.name=="$text"){const d=u.textNode&&u.textNode.nextSibling;l=checkAndFix(u.textNode,o)||l,l=checkAndFix(d,o)||l,l=checkAndFix(u.nodeBefore,o)||l,l=checkAndFix(u.nodeAfter,o)||l}if(c.name!="$text"&&c.type=="insert"){const d=u.nodeAfter;for(const h of o.createRangeIn(d).getItems())l=checkAndFix(h,o)||l}if(c.type=="insert"&&n.isInline(c.name)){const d=u.nodeAfter&&u.nodeAfter.nextSibling;l=checkAndFix(u.nodeBefore,o)||l,l=checkAndFix(d,o)||l}}return l}function extendAttributeOnMentionPostFixer(o,a){const n=a.differ.getChanges();let s=!1;for(const l of n)if(l.type==="attribute"&&l.attributeKey!="mention"){const c=l.range.start.nodeBefore,u=l.range.end.nodeAfter;for(const d of[c,u])isBrokenMentionNode(d)&&d.getAttribute(l.attributeKey)!=l.attributeNewValue&&(o.setAttribute(l.attributeKey,l.attributeNewValue,d),s=!0)}return s}function isBrokenMentionNode(o){if(!o||!(o.is("$text")||o.is("$textProxy"))||!o.hasAttribute("mention"))return!1;const a=o.data,s=o.getAttribute("mention")._text;return a!=s}function checkAndFix(o,a){return isBrokenMentionNode(o)?(a.removeAttribute("mention",o),!0):!1}class MentionsView extends ListView{constructor(n){super(n);M(this,"selected");M(this,"position");this.extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}})}selectFirst(){this.select(0)}selectNext(){const n=this.selected,s=this.items.getIndex(n);this.select(s+1)}selectPrevious(){const n=this.selected,s=this.items.getIndex(n);this.select(s-1)}select(n){let s=0;n>0&&n<this.items.length?s=n:n<0&&(s=this.items.length-1);const l=this.items.get(s);this.selected!==l&&(this.selected&&this.selected.removeHighlight(),l.highlight(),this.selected=l,this._isItemVisibleInScrolledArea(l)||(this.element.scrollTop=l.element.offsetTop))}executeSelected(){this.selected.fire("execute")}_isItemVisibleInScrolledArea(n){return new Rect$3(this.element).contains(new Rect$3(n.element))}}class DomWrapperView extends View$1{constructor(n,s){super(n);M(this,"domElement");this.template=void 0,this.domElement=s,this.domElement.classList.add("ck-button"),this.set("isOn",!1),this.on("change:isOn",(l,c,u)=>{u?(this.domElement.classList.add("ck-on"),this.domElement.classList.remove("ck-off")):(this.domElement.classList.add("ck-off"),this.domElement.classList.remove("ck-on"))}),this.listenTo(this.domElement,"click",()=>{this.fire("execute")})}render(){super.render(),this.element=this.domElement}focus(){this.domElement.focus()}}class MentionListItemView extends ListItemView{constructor(){super(...arguments);M(this,"item");M(this,"marker")}highlight(){const n=this.children.first;n.isOn=!0}removeHighlight(){const n=this.children.first;n.isOn=!1}}const VERTICAL_SPACING=3,defaultHandledKeyCodes=[keyCodes.arrowup,keyCodes.arrowdown,keyCodes.esc],defaultCommitKeyCodes=[keyCodes.enter,keyCodes.tab];class MentionUI extends Plugin{constructor(n){super(n);M(this,"_mentionsView");M(this,"_mentionsConfigurations");M(this,"_balloon");M(this,"_items",new Collection);M(this,"_lastRequested");M(this,"_requestFeedDebounced");this._mentionsView=this._createMentionView(),this._mentionsConfigurations=new Map,this._requestFeedDebounced=debounce$1(this._requestFeed,100),n.config.define("mention",{feeds:[]})}static get pluginName(){return"MentionUI"}static get isOfficialPlugin(){return!0}static get requires(){return[ContextualBalloon]}init(){const n=this.editor,s=n.config.get("mention.commitKeys")||defaultCommitKeyCodes,l=defaultHandledKeyCodes.concat(s);this._balloon=n.plugins.get(ContextualBalloon),n.editing.view.document.on("keydown",(d,h)=>{u(h.keyCode)&&this._isUIVisible&&(h.preventDefault(),d.stop(),h.keyCode==keyCodes.arrowdown&&this._mentionsView.selectNext(),h.keyCode==keyCodes.arrowup&&this._mentionsView.selectPrevious(),s.includes(h.keyCode)&&this._mentionsView.executeSelected(),h.keyCode==keyCodes.esc&&this._hideUIAndRemoveMarker())},{priority:"highest"}),clickOutsideHandler({emitter:this._mentionsView,activator:()=>this._isUIVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUIAndRemoveMarker()});const c=n.config.get("mention.feeds");for(const d of c){const{feed:h,marker:f,dropdownLimit:p}=d;if(!isValidMentionMarker(f))throw new CKEditorError("mentionconfig-incorrect-marker",null,{marker:f});const g=typeof h=="function"?h.bind(this.editor):createFeedCallback(h),v=d.itemRenderer,b={marker:f,feedCallback:g,itemRenderer:v,dropdownLimit:p};this._mentionsConfigurations.set(f,b)}this._setupTextWatcher(c),this.listenTo(n,"change:isReadOnly",()=>{this._hideUIAndRemoveMarker()}),this.on("requestFeed:response",(d,h)=>this._handleFeedResponse(h)),this.on("requestFeed:error",()=>this._hideUIAndRemoveMarker());function u(d){return l.includes(d)}}destroy(){super.destroy(),this._mentionsView.destroy()}get _isUIVisible(){return this._balloon.visibleView===this._mentionsView}_createMentionView(){const n=this.editor.locale,s=new MentionsView(n);return s.items.bindTo(this._items).using(l=>{const{item:c,marker:u}=l,{dropdownLimit:d}=this._mentionsConfigurations.get(u),h=d||this.editor.config.get("mention.dropdownLimit")||10;if(s.items.length>=h)return null;const f=new MentionListItemView(n),p=this._renderItem(c,u);return p.delegate("execute").to(f),f.children.add(p),f.item=c,f.marker=u,f.on("execute",()=>{s.fire("execute",{item:c,marker:u})}),f}),s.on("execute",(l,c)=>{const u=this.editor,d=u.model,h=c.item,f=c.marker,p=u.model.markers.get("mention"),g=d.createPositionAt(d.document.selection.focus),v=d.createPositionAt(p.getStart()),b=d.createRange(v,g);this._hideUIAndRemoveMarker(),u.execute("mention",{mention:h,text:h.text,marker:f,range:b}),u.editing.view.focus()}),s}_getItemRenderer(n){const{itemRenderer:s}=this._mentionsConfigurations.get(n);return s}_requestFeed(n,s){this._lastRequested=s;const{feedCallback:l}=this._mentionsConfigurations.get(n),c=l(s);if(!(c instanceof Promise)){this.fire("requestFeed:response",{feed:c,marker:n,feedText:s});return}c.then(d=>{this._lastRequested==s?this.fire("requestFeed:response",{feed:d,marker:n,feedText:s}):this.fire("requestFeed:discarded",{feed:d,marker:n,feedText:s})}).catch(d=>{this.fire("requestFeed:error",{error:d}),logWarning("mention-feed-callback-error",{marker:n})})}_setupTextWatcher(n){const s=this.editor,l=n.map(d=>({...d,pattern:createRegExp(d.marker,d.minimumCharacters||0)})),c=new TextWatcher(s.model,createTestCallback(l));c.on("matched",(d,h)=>{const f=getLastValidMarkerInText(l,h.text),g=s.model.document.selection.focus,v=s.model.createPositionAt(g.parent,f.position);if(isPositionInExistingMention(g)||isMarkerInExistingMention(v)){this._hideUIAndRemoveMarker();return}const b=requestFeedText(f,h.text),w=f.marker.length+b.length,x=g.getShiftedBy(-w),S=g.getShiftedBy(-b.length),E=s.model.createRange(x,S);if(checkIfStillInCompletionMode(s)){const T=s.model.markers.get("mention");s.model.change(C=>{C.updateMarker(T,{range:E})})}else s.model.change(T=>{T.addMarker("mention",{range:E,usingOperation:!1,affectsData:!1})});this._requestFeedDebounced(f.marker,b)}),c.on("unmatched",()=>{this._hideUIAndRemoveMarker()});const u=s.commands.get("mention");return c.bind("isEnabled").to(u),c}_handleFeedResponse(n){const{feed:s,marker:l}=n;if(!checkIfStillInCompletionMode(this.editor))return;this._items.clear();for(const u of s){const d=typeof u!="object"?{id:u,text:u}:u;this._items.add({item:d,marker:l})}const c=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(c):this._hideUIAndRemoveMarker()}_showOrUpdateUI(n){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(n,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(n,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}_hideUIAndRemoveMarker(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),checkIfStillInCompletionMode(this.editor)&&this.editor.model.change(n=>n.removeMarker("mention")),this._mentionsView.position=void 0}_renderItem(n,s){const l=this.editor;let c,u=n.id;const d=this._getItemRenderer(s);if(d){const h=d(n);typeof h!="string"?c=new DomWrapperView(l.locale,h):u=h}if(!c){const h=new ButtonView(l.locale);h.label=u,h.withText=!0,c=h}return c}_getBalloonPanelPositionData(n,s){const l=this.editor,c=l.editing,u=c.view.domConverter,d=c.mapper,h=l.locale.uiLanguageDirection;return{target:()=>{let f=n.getRange();f.start.root.rootName=="$graveyard"&&(f=l.model.document.selection.getFirstRange());const p=d.toViewRange(f);return Rect$3.getDomRangeRects(u.viewRangeToDom(p)).pop()},limiter:()=>{const f=this.editor.editing.view,g=f.document.selection.editableElement;return g?f.domConverter.mapViewToDom(g.root):null},positions:getBalloonPanelPositions(s,h)}}}function getBalloonPanelPositions(o,a){const n={caret_se:s=>({top:s.bottom+VERTICAL_SPACING,left:s.right,name:"caret_se",config:{withArrow:!1}}),caret_ne:(s,l)=>({top:s.top-l.height-VERTICAL_SPACING,left:s.right,name:"caret_ne",config:{withArrow:!1}}),caret_sw:(s,l)=>({top:s.bottom+VERTICAL_SPACING,left:s.right-l.width,name:"caret_sw",config:{withArrow:!1}}),caret_nw:(s,l)=>({top:s.top-l.height-VERTICAL_SPACING,left:s.right-l.width,name:"caret_nw",config:{withArrow:!1}})};return Object.prototype.hasOwnProperty.call(n,o)?[n[o]]:a!=="rtl"?[n.caret_se,n.caret_sw,n.caret_ne,n.caret_nw]:[n.caret_sw,n.caret_se,n.caret_nw,n.caret_ne]}function getLastValidMarkerInText(o,a){let n;for(const s of o){const l=a.lastIndexOf(s.marker);l>0&&!a.substring(l-1).match(s.pattern)||(!n||l>=n.position)&&(n={marker:s.marker,position:l,minimumCharacters:s.minimumCharacters,pattern:s.pattern})}return n}function createRegExp(o,a){const n=a==0?"*":`{${a},}`,s=env$1.features.isRegExpUnicodePropertySupported?`\\p{Ps}\\p{Pi}"'`:`\\(\\[{"'`,l=".";o=o.replace(/[.*+?^${}()\-|[\]\\]/g,"\\$&");const c=`(?:^|[ ${s}])(${o})(${l}${n})$`;return new RegExp(c,"u")}function createTestCallback(o){return n=>{const s=getLastValidMarkerInText(o,n);if(!s)return!1;let l=0;s.position!==0&&(l=s.position-1);const c=n.substring(l);return s.pattern.test(c)}}function requestFeedText(o,a){let n=0;o.position!==0&&(n=o.position-1);const s=createRegExp(o.marker,0);return a.substring(n).match(s)[2]}function createFeedCallback(o){return a=>o.filter(s=>(typeof s=="string"?s:String(s.id)).toLowerCase().includes(a.toLowerCase()))}function isPositionInExistingMention(o){const a=o.textNode&&o.textNode.hasAttribute("mention"),n=o.nodeBefore;return a||n&&n.is("$text")&&n.hasAttribute("mention")}function isMarkerInExistingMention(o){const a=o.nodeAfter;return a&&a.is("$text")&&a.hasAttribute("mention")}function isValidMentionMarker(o){return!!o}function checkIfStillInCompletionMode(o){return o.model.markers.has("mention")}class Mention extends Plugin{toMentionAttribute(a,n){return _toMentionAttribute(a,n)}static get pluginName(){return"Mention"}static get isOfficialPlugin(){return!0}static get requires(){return[MentionEditing,MentionUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class PageBreakCommand extends Command{refresh(){const a=this.editor.model,n=a.schema,s=a.document.selection;this.isEnabled=isPageBreakAllowedInParent(s,n,a)}execute(){const a=this.editor.model;a.change(n=>{const s=n.createElement("pageBreak");a.insertObject(s,null,null,{setSelection:"after"})})}}function isPageBreakAllowedInParent(o,a,n){const s=getInsertPageBreakParent(o,n);return a.checkChild(s,"pageBreak")}function getInsertPageBreakParent(o,a){const s=findOptimalInsertionRange(o,a).start.parent;return s.isEmpty&&!s.is("element","$root")?s.parent:s}class PageBreakEditing extends Plugin{static get pluginName(){return"PageBreakEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.model.schema,s=a.t,l=a.conversion;n.register("pageBreak",{inheritAllFrom:"$blockObject"}),l.for("dataDowncast").elementToStructure({model:"pageBreak",view:(c,{writer:u})=>u.createContainerElement("div",{class:"page-break",style:"page-break-after: always"},u.createContainerElement("span",{style:"display: none"}))}),l.for("editingDowncast").elementToStructure({model:"pageBreak",view:(c,{writer:u})=>{const d=s("Page break"),h=u.createContainerElement("div"),f=u.createRawElement("span",{class:"page-break__label"},function(p){p.innerText=s("Page break")});return u.addClass("page-break",h),u.insert(u.createPositionAt(h,0),f),toPageBreakWidget(h,u,d)}}),l.for("upcast").elementToElement({view:c=>{const u=c.getStyle("page-break-before")=="always",d=c.getStyle("page-break-after")=="always";if(!u&&!d)return null;if(c.childCount==1){const h=c.getChild(0);if(!h.is("element","span")||h.getStyle("display")!="none")return null}else if(c.childCount>1)return null;return{name:!0}},model:"pageBreak",converterPriority:"high"}),a.commands.add("pageBreak",new PageBreakCommand(a))}}function toPageBreakWidget(o,a,n){return a.setCustomProperty("pageBreak",!0,o),toWidget(o,a,{label:n})}var pageBreakIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z"/><path d="M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z"/><path d="M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z"/></svg>';class PageBreakUI extends Plugin{static get pluginName(){return"PageBreakUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add("pageBreak",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),a.ui.componentFactory.add("menuBar:pageBreak",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get("pageBreak"),c=new a(n.locale),u=s.t;return c.set({label:u("Page break"),icon:pageBreakIcon}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute("pageBreak"),n.editing.view.focus()}),c}}class PageBreak extends Plugin{static get requires(){return[PageBreakEditing,PageBreakUI,Widget]}static get pluginName(){return"PageBreak"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function transformBookmarks(o,a){const n=[];for(const s of a.createRangeIn(o)){const l=s.item;l.is("element","a")&&!l.hasAttribute("href")&&(l.hasAttribute("id")||l.hasAttribute("name"))&&n.push(l)}for(const s of n){const l=s.parent.getChildIndex(s)+1,c=s.getChildren();a.insertChild(l,c,s.parent)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function convertCssLengthToPx(o){const a=parseFloat(o);return o.endsWith("pt")?toPx(a*96/72):o.endsWith("pc")?toPx(a*12*96/72):o.endsWith("in")?toPx(a*96):o.endsWith("cm")?toPx(a*96/2.54):o.endsWith("mm")?toPx(a/10*96/2.54):o}function isPx(o){return o!==void 0&&o.endsWith("px")}function toPx(o){return o.toFixed(2).replace(/\.?0+$/,"")+"px"}function transformListItemLikeElementsIntoLists(o,a,n){if(!o.childCount)return;const s=new UpcastWriter(o.document),l=findAllItemLikeElements(o,s);if(!l.length)return;const c={},u=[];for(const d of l)if(d.indent!==void 0){isListContinuation(d)||(u.length=0);const h=`${d.id}:${d.indent}`,f=Math.min(d.indent-1,u.length);if(f<u.length&&u[f].id!==d.id&&(u.length=f),f<u.length-1)u.length=f+1;else{const g=detectListStyle(d,a);if(f>u.length-1||u[f].listElement.name!=g.type){f==0&&g.type=="ol"&&d.id!==void 0&&c[h]&&(g.startIndex=c[h]);const v=createNewEmptyList(g,s,n);if(isPx(d.marginLeft)&&(f==0||isPx(u[f-1].marginLeft))){let b=d.marginLeft;f>0&&(b=toPx(parseFloat(b)-parseFloat(u[f-1].marginLeft))),s.setStyle("padding-left",b,v)}if(u.length==0){const b=d.element.parent,w=b.getChildIndex(d.element)+1;s.insertChild(w,v,b)}else{const b=u[f-1].listItemElements;s.appendChild(v,b[b.length-1])}u[f]={...d,listElement:v,listItemElements:[]},f==0&&d.id!==void 0&&(c[h]=g.startIndex||1)}}const p=d.element.name=="li"?d.element:s.createElement("li");s.appendChild(p,u[f].listElement),u[f].listItemElements.push(p),f==0&&d.id!==void 0&&c[h]++,d.element!=p&&s.appendChild(d.element,p),removeBulletElement(d.element,s),s.removeStyle("text-indent",d.element),s.removeStyle("margin-left",d.element)}else{const h=u.find(f=>f.marginLeft==d.marginLeft);if(h){const f=h.listItemElements;s.appendChild(d.element,f[f.length-1]),s.removeStyle("margin-left",d.element)}else u.length=0}}function unwrapParagraphInListItem(o,a){for(const n of a.createRangeIn(o)){const s=n.item;if(s.is("element","li")){const l=s.getChild(0);l&&l.is("element","p")&&a.unwrapElement(l)}}}function findAllItemLikeElements(o,a){const n=a.createRangeIn(o),s=[],l=new Set;for(const c of n.getItems()){if(!c.is("element")||!c.name.match(/^(p|h\d+|li|div)$/))continue;let u=getMarginLeftNormalized(c);if(u!==void 0&&parseFloat(u)==0&&!Array.from(c.getClassNames()).find(d=>d.startsWith("MsoList"))&&(u=void 0),c.hasStyle("mso-list")||u!==void 0&&l.has(u)){const d=getListItemData(c);s.push({element:c,id:d.id,order:d.order,indent:d.indent,marginLeft:u}),u!==void 0&&l.add(u)}else l.clear()}return s}function isListContinuation(o){const a=o.element.previousSibling;return isList(a||o.element.parent)}function isList(o){return o.is("element","ol")||o.is("element","ul")}function detectListStyle(o,a){const n=new RegExp(`@list l${o.id}:level${o.indent}\\s*({[^}]*)`,"gi"),s=/mso-level-number-format:([^;]{0,100});/gi,l=/mso-level-start-at:\s{0,100}([0-9]{0,10})\s{0,100};/gi,c=new RegExp(`@list\\s+l${o.id}:level\\d\\s*{[^{]*mso-level-text:"%\\d\\\\.`,"gi"),u=new RegExp(`@list l${o.id}:level\\d\\s*{[^{]*mso-level-number-format:`,"gi"),d=c.exec(a),h=u.exec(a),f=d&&!h,p=n.exec(a);let g="decimal",v="ol",b=null;if(p&&p[1]){const w=s.exec(p[1]);if(w&&w[1]&&(g=w[1].trim(),v=g!=="bullet"&&g!=="image"?"ol":"ul"),g==="bullet"){const x=findBulletedListStyle(o.element);x&&(g=x)}else{const x=l.exec(p[1]);x&&x[1]&&(b=parseInt(x[1]))}f&&(v="ol")}return{type:v,startIndex:b,style:mapListStyleDefinition(g),isLegalStyleList:f}}function findBulletedListStyle(o){if(o.name=="li"&&o.parent.name=="ul"&&o.parent.hasAttribute("type"))return o.parent.getAttribute("type");const a=findListMarkerNode(o);if(!a)return null;const n=a._data;return n==="o"?"circle":n==="·"?"disc":n==="§"?"square":null}function findListMarkerNode(o){if(o.getChild(0).is("$text"))return null;for(const a of o.getChildren()){if(!a.is("element","span"))continue;const n=a.getChild(0);if(n)return n.is("$text")?n:n.getChild(0)}/* istanbul ignore next -- @preserve */return null}function mapListStyleDefinition(o){if(o.startsWith("arabic-leading-zero"))return"decimal-leading-zero";switch(o){case"alpha-upper":return"upper-alpha";case"alpha-lower":return"lower-alpha";case"roman-upper":return"upper-roman";case"roman-lower":return"lower-roman";case"circle":case"disc":case"square":return o;default:return null}}function createNewEmptyList(o,a,n){const s=a.createElement(o.type);return o.style&&a.setStyle("list-style-type",o.style,s),o.startIndex&&o.startIndex>1&&a.setAttribute("start",o.startIndex,s),o.isLegalStyleList&&n&&a.addClass("legal-list",s),s}function getListItemData(o){const a=o.getStyle("mso-list");if(a===void 0)return{};const n=a.match(/(^|\s{1,100})l(\d+)/i),s=a.match(/\s{0,100}lfo(\d+)/i),l=a.match(/\s{0,100}level(\d+)/i);return n&&s&&l?{id:n[2],order:s[1],indent:parseInt(l[1])}:{indent:1}}function removeBulletElement(o,a){const n=new Matcher({name:"span",styles:{"mso-list":"Ignore"}}),s=a.createRangeIn(o);for(const l of s)l.type==="elementStart"&&n.match(l.item)&&a.remove(l.item)}function getMarginLeftNormalized(o){const a=o.getStyle("margin-left");return a===void 0||a.endsWith("px")?a:convertCssLengthToPx(a)}function replaceImagesSourceWithBase64(o,a){if(!o.childCount)return;const n=new UpcastWriter(o.document),s=findAllShapesIds(o,n);removeAllImgElementsRepresentingShapes(s,o,n),insertMissingImgs(s,o,n),removeAllShapeElements(o,n);const l=findAllImageElementsWithLocalSource(o,n);l.length&&replaceImagesFileSourceWithInlineRepresentation(l,extractImageDataFromRtf(a),n)}function _convertHexToBase64(o){return btoa(o.match(/\w{2}/g).map(a=>String.fromCharCode(parseInt(a,16))).join(""))}function findAllShapesIds(o,a){const n=a.createRangeIn(o),s=new Matcher({name:/v:(.+)/}),l=[];for(const c of n){if(c.type!="elementStart")continue;const u=c.item,d=u.previousSibling,h=d&&d.is("element")?d.name:null,f=["Chart"],p=s.match(u),g=u.getAttribute("o:gfxdata"),v=h==="v:shapetype",b=g&&f.some(w=>u.getAttribute("id").includes(w));p&&g&&!v&&!b&&l.push(c.item.getAttribute("id"))}return l}function removeAllImgElementsRepresentingShapes(o,a,n){const s=n.createRangeIn(a),l=new Matcher({name:"img"}),c=[];for(const u of s)if(u.item.is("element")&&l.match(u.item)){const d=u.item,h=d.getAttribute("v:shapes")?d.getAttribute("v:shapes").split(" "):[];h.length&&h.every(f=>o.indexOf(f)>-1)?c.push(d):d.getAttribute("src")||c.push(d)}for(const u of c)n.remove(u)}function removeAllShapeElements(o,a){const n=a.createRangeIn(o),s=new Matcher({name:/v:(.+)/}),l=[];for(const c of n)c.type=="elementStart"&&s.match(c.item)&&l.push(c.item);for(const c of l)a.remove(c)}function insertMissingImgs(o,a,n){const s=n.createRangeIn(a),l=[];for(const d of s)if(d.type=="elementStart"&&d.item.is("element","v:shape")){const h=d.item.getAttribute("id");if(o.includes(h))continue;c(d.item.parent.getChildren(),h)||l.push(d.item)}for(const d of l){const h={src:u(d)};d.hasAttribute("alt")&&(h.alt=d.getAttribute("alt"));const f=n.createElement("img",h);n.insertChild(d.index+1,f,d.parent)}function c(d,h){for(const f of d){/* istanbul ignore else -- @preserve */if(f.is("element")&&(f.name=="img"&&f.getAttribute("v:shapes")==h||c(f.getChildren(),h)))return!0}return!1}function u(d){for(const h of d.getChildren()){/* istanbul ignore else -- @preserve */if(h.is("element")&&h.getAttribute("src"))return h.getAttribute("src")}}}function findAllImageElementsWithLocalSource(o,a){const n=a.createRangeIn(o),s=new Matcher({name:"img"}),l=[];for(const c of n)c.item.is("element")&&s.match(c.item)&&c.item.getAttribute("src").startsWith("file://")&&l.push(c.item);return l}function extractImageDataFromRtf(o){if(!o)return[];const a=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,n=new RegExp("(?:("+a.source+"))([\\da-fA-F\\s]+)\\}","g"),s=o.match(n),l=[];if(s)for(const c of s){let u=!1;c.includes("\\pngblip")?u="image/png":c.includes("\\jpegblip")&&(u="image/jpeg"),u&&l.push({hex:c.replace(a,"").replace(/[^\da-fA-F]/g,""),type:u})}return l}function replaceImagesFileSourceWithInlineRepresentation(o,a,n){if(o.length===a.length)for(let s=0;s<o.length;s++){const l=`data:${a[s].type};base64,${_convertHexToBase64(a[s].hex)}`;n.setAttribute("src",l,o[s])}}function removeMSAttributes(o){const a=[],n=new UpcastWriter(o.document);for(const{item:s}of n.createRangeIn(o))if(s.is("element")){for(const l of s.getClassNames())/\bmso/gi.exec(l)&&n.removeClass(l,s);for(const l of s.getStyleNames())/\bmso/gi.exec(l)&&n.removeStyle(l,s);(s.is("element","w:sdt")||s.is("element","w:sdtpr")&&s.isEmpty||s.is("element","o:p")&&s.isEmpty)&&a.push(s)}for(const s of a){const l=s.parent,c=l.getChildIndex(s);n.insertChild(c,s.getChildren(),l),n.remove(s)}}const msWordMatch1=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i,msWordMatch2=/xmlns:o="urn:schemas-microsoft-com/i;class MSWordNormalizer{constructor(a,n=!1){M(this,"document");M(this,"hasMultiLevelListPlugin");this.document=a,this.hasMultiLevelListPlugin=n}isActive(a){return msWordMatch1.test(a)||msWordMatch2.test(a)}execute(a){const n=new UpcastWriter(this.document),{body:s,stylesString:l}=a._parsedData;transformBookmarks(s,n),transformListItemLikeElementsIntoLists(s,l,this.hasMultiLevelListPlugin),replaceImagesSourceWithBase64(s,a.dataTransfer.getData("text/rtf")),removeMSAttributes(s),a.content=s}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeBoldWrapper(o,a){for(const n of o.getChildren())if(n.is("element","b")&&n.getStyle("font-weight")==="normal"){const s=o.getChildIndex(n);a.remove(n),a.insertChild(s,n.getChildren(),o)}}function transformBlockBrsToParagraphs(o,a){const n=new Document$1(a.document.stylesProcessor),s=new DomConverter(n,{renderingMode:"data"}),l=s.blockElements,c=s.inlineObjectElements,u=[];for(const d of a.createRangeIn(o)){const h=d.item;if(h.is("element","br")){const f=findSibling(h,"forward",a,{blockElements:l,inlineObjectElements:c}),p=findSibling(h,"backward",a,{blockElements:l,inlineObjectElements:c}),g=isBlockViewElement(f,l);(isBlockViewElement(p,l)||g)&&u.push(h)}}for(const d of u)d.hasClass("Apple-interchange-newline")?a.remove(d):a.replace(d,a.createElement("p"))}function findSibling(o,a,n,{blockElements:s,inlineObjectElements:l}){let c=n.createPositionAt(o,a=="forward"?"after":"before");return c=c.getLastMatchingPosition(({item:u})=>u.is("element")&&!s.includes(u.name)&&!l.includes(u.name),{direction:a}),a=="forward"?c.nodeAfter:c.nodeBefore}function isBlockViewElement(o,a){return!!o&&o.is("element")&&a.includes(o.name)}const googleDocsMatch=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;class GoogleDocsNormalizer{constructor(a){M(this,"document");this.document=a}isActive(a){return googleDocsMatch.test(a)}execute(a){const n=new UpcastWriter(this.document),{body:s}=a._parsedData;removeBoldWrapper(s,n),unwrapParagraphInListItem(s,n),transformBlockBrsToParagraphs(s,n),a.content=s}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeXmlns(o,a){for(const n of o.getChildren())n.is("element","table")&&n.hasAttribute("xmlns")&&a.removeAttribute("xmlns",n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeGoogleSheetsTag(o,a){for(const n of o.getChildren())if(n.is("element","google-sheets-html-origin")){const s=o.getChildIndex(n);a.remove(n),a.insertChild(s,n.getChildren(),o)}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeInvalidTableWidth(o,a){for(const n of o.getChildren())n.is("element","table")&&n.getStyle("width")==="0px"&&a.removeStyle("width",n)}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function removeStyleBlock(o,a){for(const n of Array.from(o.getChildren()))n.is("element","style")&&a.remove(n)}const googleSheetsMatch=/<google-sheets-html-origin/i;class GoogleSheetsNormalizer{constructor(a){M(this,"document");this.document=a}isActive(a){return googleSheetsMatch.test(a)}execute(a){const n=new UpcastWriter(this.document),{body:s}=a._parsedData;removeGoogleSheetsTag(s,n),removeXmlns(s,n),removeInvalidTableWidth(s,n),removeStyleBlock(s,n),a.content=s}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function normalizeSpacing(o){return normalizeSafariSpaceSpans(normalizeSafariSpaceSpans(o)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[^\S\r\n]*?)[\r\n]+([^\S\r\n]*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/(<span\s+style=['"]letter-spacing:[^'"]+?['"]>)[\r\n]+(<\/span>)/g,"$1 $2").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>([^\S\r\n]*[\r\n]\s*)</g,"><")}function normalizeSpacerunSpans(o){o.querySelectorAll("span[style*=spacerun]").forEach(a=>{const n=a,s=n.innerText.length||0;n.innerText=Array(s+1).join("  ").substr(0,s)})}function normalizeSafariSpaceSpans(o){return o.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(a,n)=>n.length===1?" ":Array(n.length+1).join("  ").substr(0,n.length))}function parseHtml(o,a){const n=new DOMParser;o=o.replace(/<!--\[if gte vml 1]>/g,""),o=o.replace(/<o:SmartTagType(?:\s+[^\s>=]+(?:="[^"]*")?)*\s*\/?>/gi,"");const s=normalizeSpacing(cleanContentAfterBody(o)),l=n.parseFromString(s,"text/html");normalizeSpacerunSpans(l);const c=l.body.innerHTML,u=documentToView(l,a),d=extractStyles(l);return{body:u,bodyString:c,styles:d.styles,stylesString:d.stylesString}}function documentToView(o,a){const n=new Document$1(a),s=new DomConverter(n,{renderingMode:"data"}),l=o.createDocumentFragment(),c=o.body.childNodes;for(;c.length>0;)l.appendChild(c[0]);return s.domToView(l,{skipComments:!0})}function extractStyles(o){const a=[],n=[],s=Array.from(o.getElementsByTagName("style"));for(const l of s)l.sheet&&l.sheet.cssRules&&l.sheet.cssRules.length&&(a.push(l.sheet),n.push(l.innerHTML));return{styles:a,stylesString:n.join(" ")}}function cleanContentAfterBody(o){const a="</body>",n="</html>",s=o.indexOf(a);if(s<0)return o;const l=o.indexOf(n,s+a.length);return o.substring(0,s+a.length)+(l>=0?o.substring(l):"")}class PasteFromOffice extends Plugin{static get pluginName(){return"PasteFromOffice"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardPipeline]}init(){const a=this.editor,n=a.plugins.get("ClipboardPipeline"),s=a.editing.view.document,l=[],c=this.editor.plugins.has("MultiLevelList");l.push(new MSWordNormalizer(s,c)),l.push(new GoogleDocsNormalizer(s)),l.push(new GoogleSheetsNormalizer(s)),n.on("inputTransformation",(u,d)=>{if(d._isTransformedWithPasteFromOffice||a.model.document.selection.getFirstPosition().parent.is("element","codeBlock"))return;const f=d.dataTransfer.getData("text/html"),p=l.find(g=>g.isActive(f));p&&(d._parsedData||(d._parsedData=parseHtml(f,s.stylesProcessor)),p.execute(d),d._isTransformedWithPasteFromOffice=!0)},{priority:"high"})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */var removeFormatIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.69 14.915c.053.052.173.083.36.093a.366.366 0 0 1 .345.485l-.003.01a.738.738 0 0 1-.697.497h-2.67a.374.374 0 0 1-.353-.496l.013-.038a.681.681 0 0 1 .644-.458c.197-.012.325-.043.386-.093a.28.28 0 0 0 .072-.11L9.592 4.5H6.269c-.359-.017-.609.013-.75.09-.142.078-.289.265-.442.563-.192.29-.516.464-.864.464H4.17a.43.43 0 0 1-.407-.569L4.46 3h13.08l-.62 2.043a.81.81 0 0 1-.775.574h-.114a.486.486 0 0 1-.486-.486c.001-.284-.054-.464-.167-.54-.112-.076-.367-.106-.766-.091h-3.28l-2.68 10.257c-.006.074.007.127.038.158zM3 17h8a.5.5 0 1 1 0 1H3a.5.5 0 1 1 0-1zm11.299 1.17a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.06-1.06l1.415 1.414 1.414-1.415a.75.75 0 1 1 1.06 1.06l-1.413 1.415 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414-1.414 1.414z"/></svg>';const REMOVE_FORMAT="removeFormat";class RemoveFormatUI extends Plugin{static get pluginName(){return"RemoveFormatUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add(REMOVE_FORMAT,()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0}),n}),a.ui.componentFactory.add(`menuBar:${REMOVE_FORMAT}`,()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get(REMOVE_FORMAT),c=new a(n.locale),u=s.t;return c.set({label:u("Remove Format"),icon:removeFormatIcon}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{n.execute(REMOVE_FORMAT),n.editing.view.focus()}),c}}class RemoveFormatCommand extends Command{refresh(){const a=this.editor.model;this.isEnabled=!!first(this._getFormattingItems(a.document.selection,a.schema))}execute(){const a=this.editor.model,n=a.schema;a.change(s=>{for(const l of this._getFormattingItems(a.document.selection,n))if(l.is("selection"))for(const c of this._getFormattingAttributes(l,n))s.removeSelectionAttribute(c);else{const c=s.createRangeOn(l);for(const u of this._getFormattingAttributes(l,n))s.removeAttribute(u,c)}})}*_getFormattingItems(a,n){const s=l=>!!first(this._getFormattingAttributes(l,n));for(const l of a.getRanges())for(const c of l.getItems())!n.isBlock(c)&&s(c)&&(yield c);for(const l of a.getSelectedBlocks())s(l)&&(yield l);s(a)&&(yield a)}*_getFormattingAttributes(a,n){for(const[s]of a.getAttributes()){const l=n.getAttributeProperties(s);l&&l.isFormatting&&(yield s)}}}class RemoveFormatEditing extends Plugin{static get pluginName(){return"RemoveFormatEditing"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.commands.add("removeFormat",new RemoveFormatCommand(a))}}class RemoveFormat extends Plugin{static get requires(){return[RemoveFormatEditing,RemoveFormatUI]}static get pluginName(){return"RemoveFormat"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class ShowBlocksCommand extends Command{constructor(a){super(a),this.affectsData=!1,this.value=!1}execute(){const a="ck-show-blocks",n=this.editor.editing.view;n.change(s=>{for(const l of n.document.roots)l.hasClass(a)?(s.removeClass(a,l),this.value=!1):(s.addClass(a,l),this.value=!0)})}}class ShowBlocksEditing extends Plugin{static get pluginName(){return"ShowBlocksEditing"}static get isOfficialPlugin(){return!0}init(){const{editor:a}=this;a.commands.add("showBlocks",new ShowBlocksCommand(a))}}var showBlocksIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m6.395 9.196 2.545-.007V6.498a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v6.877a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598v-2.691l-2.545.007v2.691a.598.598 0 0 1-.598.598h-.299a.598.598 0 0 1-.598-.598V6.505a.598.598 0 0 1 .598-.598h.299a.598.598 0 0 1 .598.598v2.691Z"/><path d="M15.094 13.417V6.462a.562.562 0 0 0-.562-.562h-.782a1 1 0 0 0-.39.08l-1.017.43a.562.562 0 0 0-.343.517v.197c0 .4.406.67.775.519l.819-.337v6.111c0 .31.251.562.561.562h.377c.31 0 .562-.251.562-.562Z"/><path d="M0 15.417v1.5h1.5v-1.5H0Z"/><path d="M18.5 15.417v1.5H20v-1.5h-1.5Z"/><path d="M18.5 12.333v1.5H20v-1.5h-1.5Z"/><path d="M18.5 9.25v1.5H20v-1.5h-1.5Z"/><path d="M18.5 6.167v1.5H20v-1.5h-1.5Z"/><path d="M0 18.5v.5a1 1 0 0 0 1 1h.5v-1.5H0Z"/><path d="M3.083 18.5V20h1.5v-1.5h-1.5Z"/><path d="M6.167 18.5V20h1.5v-1.5h-1.5Z"/><path d="M9.25 18.5V20h1.5v-1.5h-1.5Z"/><path d="M12.333 18.5V20h1.5v-1.5h-1.5Z"/><path d="M15.417 18.5V20h1.5v-1.5h-1.5Z"/><path d="M18.5 18.5V20h.5a1 1 0 0 0 1-1v-.5h-1.5Z"/><path clip-rule="evenodd" d="M0 1a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v3.583h-1.5V1.5h-17v12.333H0V1Z"/></svg>';class ShowBlocksUI extends Plugin{static get pluginName(){return"ShowBlocksUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor;a.ui.componentFactory.add("showBlocks",()=>{const n=this._createButton(ButtonView);return n.set({tooltip:!0,icon:showBlocksIcon}),n}),a.ui.componentFactory.add("menuBar:showBlocks",()=>this._createButton(MenuBarMenuListItemButtonView))}_createButton(a){const n=this.editor,s=n.locale,l=n.commands.get("showBlocks"),c=new a(s),u=s.t;return c.set({label:u("Show blocks"),isToggleable:!0,role:"menuitemcheckbox"}),c.bind("isEnabled").to(l),c.bind("isOn").to(l,"value",l,"isEnabled",(d,h)=>d&&h),this.listenTo(c,"execute",()=>{n.execute("showBlocks"),n.editing.view.focus()}),c}}class ShowBlocks extends Plugin{static get pluginName(){return"ShowBlocks"}static get isOfficialPlugin(){return!0}static get requires(){return[ShowBlocksEditing,ShowBlocksUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function formatHtml(o){const a=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],n=a.map(u=>u.name).join("|"),s=o.replace(new RegExp(`</?(${n})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`);let l=0,c=!1;return s.filter(u=>u.length).map(u=>(c=isPreformattedBlockLine(u,c),isNonVoidOpeningTag(u,a)?indentLine(u,l++):isClosingTag(u,a)?indentLine(u,--l):c==="middle"||c==="last"?u:indentLine(u,l))).join(`
`)}function isNonVoidOpeningTag(o,a){return a.some(n=>!(n.isVoid||!new RegExp(`<${n.name}( .*?)?>`).test(o)))}function isClosingTag(o,a){return a.some(n=>new RegExp(`</${n.name}>`).test(o))}function indentLine(o,a,n="    "){return`${n.repeat(Math.max(0,a))}${o}`}function isPreformattedBlockLine(o,a){return new RegExp("<pre( .*?)?>").test(o)?"first":new RegExp("</pre>").test(o)?"last":a==="first"||a==="middle"?"middle":!1}const COMMAND_FORCE_DISABLE_ID="SourceEditingMode";class SourceEditing extends Plugin{constructor(n){super(n);M(this,"_elementReplacer");M(this,"_replacedRoots");M(this,"_dataFromRoots");this.set("isSourceEditingMode",!1),this._elementReplacer=new ElementReplacer,this._replacedRoots=new Map,this._dataFromRoots=new Map,n.config.define("sourceEditing.allowCollaborationFeatures",!1)}static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[PendingActions]}init(){this._checkCompatibility();const n=this.editor,s=n.locale.t;n.ui.componentFactory.add("sourceEditing",()=>{const l=this._createButton(ButtonView);return l.set({label:s("Source"),icon:icons.source,tooltip:!0,class:"ck-source-editing-button"}),l}),n.ui.componentFactory.add("menuBar:sourceEditing",()=>{const l=this._createButton(MenuBarMenuListItemButtonView);return l.set({label:s("Show source"),role:"menuitemcheckbox"}),l}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(l,c,u)=>{u?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(l,c,u)=>this._handleReadOnlyMode(!u)),this.listenTo(n,"change:isReadOnly",(l,c,u)=>this._handleReadOnlyMode(u))),n.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){const n=this.editor,s={};for(const[l,c]of this._replacedRoots){const u=this._dataFromRoots.get(l),d=c.dataset.value;u!==d&&(s[l]=d,this._dataFromRoots.set(l,d))}Object.keys(s).length&&n.data.set(s,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){const n=this.editor,s=n.config.get("sourceEditing.allowCollaborationFeatures");if(!s&&n.plugins.has("RealTimeCollaborativeEditing"))throw new CKEditorError("source-editing-incompatible-with-real-time-collaboration",null);!s&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(c=>n.plugins.has(c))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),n.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){const n=this.editor,s=n.editing.view,l=n.model;l.change(c=>{c.setSelection(null),c.removeSelectionAttribute(l.document.selection.getAttributeKeys())});for(const[c,u]of s.domRoots){const d=formatSource(n.data.get({rootName:c})),h=createElement$1(u.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),f=createElement$1(u.ownerDocument,"div",{class:"ck-source-editing-area","data-value":d},[h]);h.value=d,h.setSelectionRange(0,0),h.addEventListener("input",()=>{f.dataset.value=h.value,n.ui.update()}),s.change(p=>{const g=s.document.getRoot(c);p.addClass("ck-hidden",g)}),n.ui.setEditableElement("sourceEditing:"+c,h),this._replacedRoots.set(c,f),this._elementReplacer.replace(u,f),this._dataFromRoots.set(c,d)}this._focusSourceEditing()}_hideSourceEditing(){const s=this.editor.editing.view;this.updateEditorData(),s.change(l=>{for(const[c]of this._replacedRoots)l.removeClass("ck-hidden",s.document.getRoot(c))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),s.focus()}_focusSourceEditing(){const n=this.editor,[s]=this._replacedRoots.values(),l=s.querySelector("textarea");n.editing.view.document.isFocused=!1,l.focus()}_disableCommands(){const n=this.editor;for(const s of n.commands.commands())s.forceDisabled(COMMAND_FORCE_DISABLE_ID);n.plugins.has("CommentsArchiveUI")&&n.plugins.get("CommentsArchiveUI").forceDisabled(COMMAND_FORCE_DISABLE_ID)}_enableCommands(){const n=this.editor;for(const s of n.commands.commands())s.clearForceDisabled(COMMAND_FORCE_DISABLE_ID);n.plugins.has("CommentsArchiveUI")&&n.plugins.get("CommentsArchiveUI").clearForceDisabled(COMMAND_FORCE_DISABLE_ID)}_handleReadOnlyMode(n){if(this.isSourceEditingMode)for(const[,s]of this._replacedRoots)s.querySelector("textarea").readOnly=n}_isAllowedToHandleSourceEditingMode(){const s=this.editor.ui.view.editable;return s&&!s.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){const n=this.editor.plugins.get("Dialog");n.isOpen&&n.hide()}}_createButton(n){const s=this.editor,l=new n(s.locale);return l.set({withText:!0,isToggleable:!0}),l.bind("isOn").to(this,"isSourceEditingMode"),l.bind("isEnabled").to(this,"isEnabled",s,"isReadOnly",s.plugins.get(PendingActions),"hasAny",(c,u,d)=>!(!c||u||d)),this.listenTo(l,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),l}}function formatSource(o){return isHtml(o)?formatHtml(o):o}function isHtml(o){return o.startsWith("<")}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class CharacterGridView extends View$1{constructor(n){super(n);M(this,"tiles");M(this,"focusTracker");M(this,"keystrokes");this.tiles=this.createCollection(),this.setTemplate({tag:"div",children:[{tag:"div",attributes:{class:["ck","ck-character-grid__tiles"]},children:this.tiles}],attributes:{class:["ck","ck-character-grid"]}}),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.tiles,numberOfColumns:()=>global$1.window.getComputedStyle(this.element.firstChild).getPropertyValue("grid-template-columns").split(" ").length,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection})}createTile(n,s){const l=new ButtonView(this.locale);return l.set({label:n,withText:!0,class:"ck-character-grid__tile"}),l.extendTemplate({attributes:{title:s},on:{mouseover:l.bindTemplate.to("mouseover"),focus:l.bindTemplate.to("focus")}}),l.on("mouseover",()=>{this.fire("tileHover",{name:s,character:n})}),l.on("focus",()=>{this.fire("tileFocus",{name:s,character:n})}),l.on("execute",()=>{this.fire("execute",{name:s,character:n})}),l}render(){super.render();for(const n of this.tiles)this.focusTracker.add(n.element);this.tiles.on("change",(n,{added:s,removed:l})=>{if(s.length>0)for(const c of s)this.focusTracker.add(c.element);if(l.length>0)for(const c of l)this.focusTracker.remove(c.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.keystrokes.destroy()}focus(){this.tiles.first.focus()}}class CharacterInfoView extends View$1{constructor(a){super(a);const n=this.bindTemplate;this.set("character",null),this.set("name",null),this.bind("code").to(this,"character",characterToUnicodeString),this.setTemplate({tag:"div",children:[{tag:"span",attributes:{class:["ck-character-info__name"]},children:[{text:n.to("name",s=>s||"​")}]},{tag:"span",attributes:{class:["ck-character-info__code"]},children:[{text:n.to("code")}]}],attributes:{class:["ck","ck-character-info"]}})}}function characterToUnicodeString(o){return o===null?"":"U+"+("0000"+o.codePointAt(0).toString(16)).slice(-4)}class SpecialCharactersView extends View$1{constructor(n,s,l,c){super(n);M(this,"items");M(this,"focusTracker");M(this,"keystrokes");M(this,"_focusCycler");M(this,"categoriesView");M(this,"gridView");M(this,"infoView");this.categoriesView=s,this.gridView=l,this.infoView=c,this.items=this.createCollection(),this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this._focusCycler=new FocusCycler({focusables:this.items,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",children:[this.categoriesView,this.gridView,this.infoView],attributes:{tabindex:"-1"}}),this.items.add(this.categoriesView),this.items.add(this.gridView)}render(){super.render(),this.focusTracker.add(this.categoriesView.element),this.focusTracker.add(this.gridView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}}var specialCharactersIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2.5a7.47 7.47 0 0 1 4.231 1.31 7.268 7.268 0 0 1 2.703 3.454 7.128 7.128 0 0 1 .199 4.353c-.39 1.436-1.475 2.72-2.633 3.677h2.013c0-.226.092-.443.254-.603a.876.876 0 0 1 1.229 0c.163.16.254.377.254.603v.853c0 .209-.078.41-.22.567a.873.873 0 0 1-.547.28l-.101.006h-4.695a.517.517 0 0 1-.516-.518v-1.265c0-.21.128-.398.317-.489a5.601 5.601 0 0 0 2.492-2.371 5.459 5.459 0 0 0 .552-3.693 5.53 5.53 0 0 0-1.955-3.2A5.71 5.71 0 0 0 10 4.206 5.708 5.708 0 0 0 6.419 5.46 5.527 5.527 0 0 0 4.46 8.663a5.457 5.457 0 0 0 .554 3.695 5.6 5.6 0 0 0 2.497 2.37.55.55 0 0 1 .317.49v1.264c0 .286-.23.518-.516.518H2.618a.877.877 0 0 1-.614-.25.845.845 0 0 1-.254-.603v-.853c0-.226.091-.443.254-.603a.876.876 0 0 1 1.228 0c.163.16.255.377.255.603h1.925c-1.158-.958-2.155-2.241-2.545-3.678a7.128 7.128 0 0 1 .199-4.352 7.268 7.268 0 0 1 2.703-3.455A7.475 7.475 0 0 1 10 2.5z"/></svg>';class SpecialCharactersCategoriesView extends View$1{constructor(n,s){super(n);M(this,"_groupNames");M(this,"_dropdownView");this.set("currentGroupName",Array.from(s.entries())[0][0]),this._groupNames=s,this._dropdownView=new LabeledFieldView(n,createLabeledDropdown),this.setTemplate({tag:"div",attributes:{class:["ck","ck-character-categories"]},children:[this._dropdownView]})}render(){super.render(),this._setupDropdown()}focus(){this._dropdownView.focus()}_setupDropdown(){const n=new Collection;for(const[c,u]of this._groupNames){const d={type:"button",model:new Model$1({name:c,label:u,role:"menuitemradio",withText:!0})};d.model.bind("isOn").to(this,"currentGroupName",h=>h===c),n.add(d)}const s=this.locale.t,l=s("Category");this._dropdownView.set({label:l,isEmpty:!1}),this._dropdownView.fieldView.panelPosition=this.locale.uiLanguageDirection==="rtl"?"se":"sw",this._dropdownView.fieldView.buttonView.set({withText:!0,tooltip:l,ariaLabel:l,ariaLabelledBy:void 0,isOn:!1}),this._dropdownView.fieldView.buttonView.bind("label").to(this,"currentGroupName",c=>this._groupNames.get(c)),this._dropdownView.fieldView.on("execute",({source:c})=>{this.currentGroupName=c.name}),addListToDropdown(this._dropdownView.fieldView,n,{ariaLabel:l,role:"menu"})}}const ALL_SPECIAL_CHARACTERS_GROUP="All";class SpecialCharacters extends Plugin{constructor(n){super(n);M(this,"_characters");M(this,"_groups");M(this,"_allSpecialCharactersGroupLabel");const s=n.t;this._characters=new Map,this._groups=new Map,this._allSpecialCharactersGroupLabel=s("All")}static get requires(){return[Typing,Dialog]}static get pluginName(){return"SpecialCharacters"}static get isOfficialPlugin(){return!0}init(){const n=this.editor;n.ui.componentFactory.add("specialCharacters",()=>{const s=this._createDialogButton(ButtonView);return s.set({tooltip:!0}),s}),n.ui.componentFactory.add("menuBar:specialCharacters",()=>this._createDialogButton(MenuBarMenuListItemButtonView))}addItems(n,s,l={label:n}){if(n===ALL_SPECIAL_CHARACTERS_GROUP)throw new CKEditorError("special-character-invalid-group-name",null);const c=this._getGroup(n,l.label);for(const u of s)c.items.add(u.title),this._characters.set(u.title,u.character)}getGroups(){const n=Array.from(this._groups.keys()),s=this.editor.config.get("specialCharacters.order")||[],l=s.find(c=>!n.includes(c));if(l)throw new CKEditorError("special-character-invalid-order-group-name",null,{invalidGroup:l});return new Set([...s,...n])}getCharactersForGroup(n){if(n===ALL_SPECIAL_CHARACTERS_GROUP)return new Set(this._characters.keys());const s=this._groups.get(n);if(s)return s.items}getCharacter(n){return this._characters.get(n)}_getGroup(n,s){return this._groups.has(n)||this._groups.set(n,{items:new Set,label:s}),this._groups.get(n)}_updateGrid(n,s){s.tiles.clear();const l=this.getCharactersForGroup(n);for(const c of l){const u=this.getCharacter(c);s.tiles.add(s.createTile(u,c))}}_createDropdownPanelContent(n){const s=Array.from(this.getGroups()).map(h=>[h,this._groups.get(h).label]),l=new Map([[ALL_SPECIAL_CHARACTERS_GROUP,this._allSpecialCharactersGroupLabel],...s]),c=new SpecialCharactersCategoriesView(n,l),u=new CharacterGridView(n),d=new CharacterInfoView(n);return u.on("tileHover",(h,f)=>{d.set(f)}),u.on("tileFocus",(h,f)=>{d.set(f)}),c.on("change:currentGroupName",(h,f,p)=>{this._updateGrid(p,u)}),this._updateGrid(c.currentGroupName,u),{categoriesView:c,gridView:u,infoView:d}}_createDialogButton(n){const s=this.editor,l=s.locale,c=new n(s.locale),u=s.commands.get("insertText"),d=l.t,h=this.editor.plugins.get("Dialog");return c.set({label:d("Special characters"),icon:specialCharactersIcon,isToggleable:!0}),c.bind("isOn").to(h,"id",f=>f==="specialCharacters"),c.bind("isEnabled").to(u,"isEnabled"),c.on("execute",()=>{if(h.id==="specialCharacters"){h.hide();return}this._showDialog()}),c}_showDialog(){const n=this.editor,s=n.plugins.get("Dialog"),l=n.locale,c=l.t,{categoriesView:u,gridView:d,infoView:h}=this._createDropdownPanelContent(l),f=new SpecialCharactersView(l,u,d,h);d.on("execute",(p,g)=>{n.execute("insertText",{text:g.character})}),s.show({id:"specialCharacters",title:c("Special characters"),className:"ck-special-characters",content:f,position:DialogViewPosition.EDITOR_TOP_SIDE})}}class SpecialCharactersArrows extends Plugin{static get pluginName(){return"SpecialCharactersArrows"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t;a.plugins.get("SpecialCharacters").addItems("Arrows",[{title:n("leftwards simple arrow"),character:"←"},{title:n("rightwards simple arrow"),character:"→"},{title:n("upwards simple arrow"),character:"↑"},{title:n("downwards simple arrow"),character:"↓"},{title:n("leftwards double arrow"),character:"⇐"},{title:n("rightwards double arrow"),character:"⇒"},{title:n("upwards double arrow"),character:"⇑"},{title:n("downwards double arrow"),character:"⇓"},{title:n("leftwards dashed arrow"),character:"⇠"},{title:n("rightwards dashed arrow"),character:"⇢"},{title:n("upwards dashed arrow"),character:"⇡"},{title:n("downwards dashed arrow"),character:"⇣"},{title:n("leftwards arrow to bar"),character:"⇤"},{title:n("rightwards arrow to bar"),character:"⇥"},{title:n("upwards arrow to bar"),character:"⤒"},{title:n("downwards arrow to bar"),character:"⤓"},{title:n("up down arrow with base"),character:"↨"},{title:n("back with leftwards arrow above"),character:"🔙"},{title:n("end with leftwards arrow above"),character:"🔚"},{title:n("on with exclamation mark with left right arrow above"),character:"🔛"},{title:n("soon with rightwards arrow above"),character:"🔜"},{title:n("top with upwards arrow above"),character:"🔝"}],{label:n("Arrows")})}}class SpecialCharactersText extends Plugin{static get pluginName(){return"SpecialCharactersText"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t;a.plugins.get("SpecialCharacters").addItems("Text",[{character:"‹",title:n("Single left-pointing angle quotation mark")},{character:"›",title:n("Single right-pointing angle quotation mark")},{character:"«",title:n("Left-pointing double angle quotation mark")},{character:"»",title:n("Right-pointing double angle quotation mark")},{character:"‘",title:n("Left single quotation mark")},{character:"’",title:n("Right single quotation mark")},{character:"“",title:n("Left double quotation mark")},{character:"”",title:n("Right double quotation mark")},{character:"‚",title:n("Single low-9 quotation mark")},{character:"„",title:n("Double low-9 quotation mark")},{character:"¡",title:n("Inverted exclamation mark")},{character:"¿",title:n("Inverted question mark")},{character:"‥",title:n("Two dot leader")},{character:"…",title:n("Horizontal ellipsis")},{character:"‡",title:n("Double dagger")},{character:"‰",title:n("Per mille sign")},{character:"‱",title:n("Per ten thousand sign")},{character:"‼",title:n("Double exclamation mark")},{character:"⁈",title:n("Question exclamation mark")},{character:"⁉",title:n("Exclamation question mark")},{character:"⁇",title:n("Double question mark")},{character:"©",title:n("Copyright sign")},{character:"®",title:n("Registered sign")},{character:"™",title:n("Trade mark sign")},{character:"§",title:n("Section sign")},{character:"¶",title:n("Paragraph sign")},{character:"⁋",title:n("Reversed paragraph sign")}],{label:n("Text")})}}class SpecialCharactersMathematical extends Plugin{static get pluginName(){return"SpecialCharactersMathematical"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t;a.plugins.get("SpecialCharacters").addItems("Mathematical",[{character:"<",title:n("Less-than sign")},{character:">",title:n("Greater-than sign")},{character:"≤",title:n("Less-than or equal to")},{character:"≥",title:n("Greater-than or equal to")},{character:"–",title:n("En dash")},{character:"—",title:n("Em dash")},{character:"¯",title:n("Macron")},{character:"‾",title:n("Overline")},{character:"°",title:n("Degree sign")},{character:"−",title:n("Minus sign")},{character:"±",title:n("Plus-minus sign")},{character:"÷",title:n("Division sign")},{character:"⁄",title:n("Fraction slash")},{character:"×",title:n("Multiplication sign")},{character:"ƒ",title:n("Latin small letter f with hook")},{character:"∫",title:n("Integral")},{character:"∑",title:n("N-ary summation")},{character:"∞",title:n("Infinity")},{character:"√",title:n("Square root")},{character:"∼",title:n("Tilde operator")},{character:"≅",title:n("Approximately equal to")},{character:"≈",title:n("Almost equal to")},{character:"≠",title:n("Not equal to")},{character:"≡",title:n("Identical to")},{character:"∈",title:n("Element of")},{character:"∉",title:n("Not an element of")},{character:"∋",title:n("Contains as member")},{character:"∏",title:n("N-ary product")},{character:"∧",title:n("Logical and")},{character:"∨",title:n("Logical or")},{character:"¬",title:n("Not sign")},{character:"∩",title:n("Intersection")},{character:"∪",title:n("Union")},{character:"∂",title:n("Partial differential")},{character:"∀",title:n("For all")},{character:"∃",title:n("There exists")},{character:"∅",title:n("Empty set")},{character:"∇",title:n("Nabla")},{character:"∗",title:n("Asterisk operator")},{character:"∝",title:n("Proportional to")},{character:"∠",title:n("Angle")},{character:"¼",title:n("Vulgar fraction one quarter")},{character:"½",title:n("Vulgar fraction one half")},{character:"¾",title:n("Vulgar fraction three quarters")}],{label:n("Mathematical")})}}class SpecialCharactersLatin extends Plugin{static get pluginName(){return"SpecialCharactersLatin"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t;a.plugins.get("SpecialCharacters").addItems("Latin",[{character:"Ā",title:n("Latin capital letter a with macron")},{character:"ā",title:n("Latin small letter a with macron")},{character:"Ă",title:n("Latin capital letter a with breve")},{character:"ă",title:n("Latin small letter a with breve")},{character:"Ą",title:n("Latin capital letter a with ogonek")},{character:"ą",title:n("Latin small letter a with ogonek")},{character:"Ć",title:n("Latin capital letter c with acute")},{character:"ć",title:n("Latin small letter c with acute")},{character:"Ĉ",title:n("Latin capital letter c with circumflex")},{character:"ĉ",title:n("Latin small letter c with circumflex")},{character:"Ċ",title:n("Latin capital letter c with dot above")},{character:"ċ",title:n("Latin small letter c with dot above")},{character:"Č",title:n("Latin capital letter c with caron")},{character:"č",title:n("Latin small letter c with caron")},{character:"Ď",title:n("Latin capital letter d with caron")},{character:"ď",title:n("Latin small letter d with caron")},{character:"Đ",title:n("Latin capital letter d with stroke")},{character:"đ",title:n("Latin small letter d with stroke")},{character:"Ē",title:n("Latin capital letter e with macron")},{character:"ē",title:n("Latin small letter e with macron")},{character:"Ĕ",title:n("Latin capital letter e with breve")},{character:"ĕ",title:n("Latin small letter e with breve")},{character:"Ė",title:n("Latin capital letter e with dot above")},{character:"ė",title:n("Latin small letter e with dot above")},{character:"Ę",title:n("Latin capital letter e with ogonek")},{character:"ę",title:n("Latin small letter e with ogonek")},{character:"Ě",title:n("Latin capital letter e with caron")},{character:"ě",title:n("Latin small letter e with caron")},{character:"Ĝ",title:n("Latin capital letter g with circumflex")},{character:"ĝ",title:n("Latin small letter g with circumflex")},{character:"Ğ",title:n("Latin capital letter g with breve")},{character:"ğ",title:n("Latin small letter g with breve")},{character:"Ġ",title:n("Latin capital letter g with dot above")},{character:"ġ",title:n("Latin small letter g with dot above")},{character:"Ģ",title:n("Latin capital letter g with cedilla")},{character:"ģ",title:n("Latin small letter g with cedilla")},{character:"Ĥ",title:n("Latin capital letter h with circumflex")},{character:"ĥ",title:n("Latin small letter h with circumflex")},{character:"Ħ",title:n("Latin capital letter h with stroke")},{character:"ħ",title:n("Latin small letter h with stroke")},{character:"Ĩ",title:n("Latin capital letter i with tilde")},{character:"ĩ",title:n("Latin small letter i with tilde")},{character:"Ī",title:n("Latin capital letter i with macron")},{character:"ī",title:n("Latin small letter i with macron")},{character:"Ĭ",title:n("Latin capital letter i with breve")},{character:"ĭ",title:n("Latin small letter i with breve")},{character:"Į",title:n("Latin capital letter i with ogonek")},{character:"į",title:n("Latin small letter i with ogonek")},{character:"İ",title:n("Latin capital letter i with dot above")},{character:"ı",title:n("Latin small letter dotless i")},{character:"Ĳ",title:n("Latin capital ligature ij")},{character:"ĳ",title:n("Latin small ligature ij")},{character:"Ĵ",title:n("Latin capital letter j with circumflex")},{character:"ĵ",title:n("Latin small letter j with circumflex")},{character:"Ķ",title:n("Latin capital letter k with cedilla")},{character:"ķ",title:n("Latin small letter k with cedilla")},{character:"ĸ",title:n("Latin small letter kra")},{character:"Ĺ",title:n("Latin capital letter l with acute")},{character:"ĺ",title:n("Latin small letter l with acute")},{character:"Ļ",title:n("Latin capital letter l with cedilla")},{character:"ļ",title:n("Latin small letter l with cedilla")},{character:"Ľ",title:n("Latin capital letter l with caron")},{character:"ľ",title:n("Latin small letter l with caron")},{character:"Ŀ",title:n("Latin capital letter l with middle dot")},{character:"ŀ",title:n("Latin small letter l with middle dot")},{character:"Ł",title:n("Latin capital letter l with stroke")},{character:"ł",title:n("Latin small letter l with stroke")},{character:"Ń",title:n("Latin capital letter n with acute")},{character:"ń",title:n("Latin small letter n with acute")},{character:"Ņ",title:n("Latin capital letter n with cedilla")},{character:"ņ",title:n("Latin small letter n with cedilla")},{character:"Ň",title:n("Latin capital letter n with caron")},{character:"ň",title:n("Latin small letter n with caron")},{character:"ŉ",title:n("Latin small letter n preceded by apostrophe")},{character:"Ŋ",title:n("Latin capital letter eng")},{character:"ŋ",title:n("Latin small letter eng")},{character:"Ō",title:n("Latin capital letter o with macron")},{character:"ō",title:n("Latin small letter o with macron")},{character:"Ŏ",title:n("Latin capital letter o with breve")},{character:"ŏ",title:n("Latin small letter o with breve")},{character:"Ő",title:n("Latin capital letter o with double acute")},{character:"ő",title:n("Latin small letter o with double acute")},{character:"Œ",title:n("Latin capital ligature oe")},{character:"œ",title:n("Latin small ligature oe")},{character:"Ŕ",title:n("Latin capital letter r with acute")},{character:"ŕ",title:n("Latin small letter r with acute")},{character:"Ŗ",title:n("Latin capital letter r with cedilla")},{character:"ŗ",title:n("Latin small letter r with cedilla")},{character:"Ř",title:n("Latin capital letter r with caron")},{character:"ř",title:n("Latin small letter r with caron")},{character:"Ś",title:n("Latin capital letter s with acute")},{character:"ś",title:n("Latin small letter s with acute")},{character:"Ŝ",title:n("Latin capital letter s with circumflex")},{character:"ŝ",title:n("Latin small letter s with circumflex")},{character:"Ş",title:n("Latin capital letter s with cedilla")},{character:"ş",title:n("Latin small letter s with cedilla")},{character:"Š",title:n("Latin capital letter s with caron")},{character:"š",title:n("Latin small letter s with caron")},{character:"Ţ",title:n("Latin capital letter t with cedilla")},{character:"ţ",title:n("Latin small letter t with cedilla")},{character:"Ť",title:n("Latin capital letter t with caron")},{character:"ť",title:n("Latin small letter t with caron")},{character:"Ŧ",title:n("Latin capital letter t with stroke")},{character:"ŧ",title:n("Latin small letter t with stroke")},{character:"Ũ",title:n("Latin capital letter u with tilde")},{character:"ũ",title:n("Latin small letter u with tilde")},{character:"Ū",title:n("Latin capital letter u with macron")},{character:"ū",title:n("Latin small letter u with macron")},{character:"Ŭ",title:n("Latin capital letter u with breve")},{character:"ŭ",title:n("Latin small letter u with breve")},{character:"Ů",title:n("Latin capital letter u with ring above")},{character:"ů",title:n("Latin small letter u with ring above")},{character:"Ű",title:n("Latin capital letter u with double acute")},{character:"ű",title:n("Latin small letter u with double acute")},{character:"Ų",title:n("Latin capital letter u with ogonek")},{character:"ų",title:n("Latin small letter u with ogonek")},{character:"Ŵ",title:n("Latin capital letter w with circumflex")},{character:"ŵ",title:n("Latin small letter w with circumflex")},{character:"Ŷ",title:n("Latin capital letter y with circumflex")},{character:"ŷ",title:n("Latin small letter y with circumflex")},{character:"Ÿ",title:n("Latin capital letter y with diaeresis")},{character:"Ź",title:n("Latin capital letter z with acute")},{character:"ź",title:n("Latin small letter z with acute")},{character:"Ż",title:n("Latin capital letter z with dot above")},{character:"ż",title:n("Latin small letter z with dot above")},{character:"Ž",title:n("Latin capital letter z with caron")},{character:"ž",title:n("Latin small letter z with caron")},{character:"ſ",title:n("Latin small letter long s")}],{label:n("Latin")})}}class SpecialCharactersCurrency extends Plugin{static get pluginName(){return"SpecialCharactersCurrency"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.t;a.plugins.get("SpecialCharacters").addItems("Currency",[{character:"$",title:n("Dollar sign")},{character:"€",title:n("Euro sign")},{character:"¥",title:n("Yen sign")},{character:"£",title:n("Pound sign")},{character:"¢",title:n("Cent sign")},{character:"₠",title:n("Euro-currency sign")},{character:"₡",title:n("Colon sign")},{character:"₢",title:n("Cruzeiro sign")},{character:"₣",title:n("French franc sign")},{character:"₤",title:n("Lira sign")},{character:"¤",title:n("Currency sign")},{character:"₿",title:n("Bitcoin sign")},{character:"₥",title:n("Mill sign")},{character:"₦",title:n("Naira sign")},{character:"₧",title:n("Peseta sign")},{character:"₨",title:n("Rupee sign")},{character:"₩",title:n("Won sign")},{character:"₪",title:n("New sheqel sign")},{character:"₫",title:n("Dong sign")},{character:"₭",title:n("Kip sign")},{character:"₮",title:n("Tugrik sign")},{character:"₯",title:n("Drachma sign")},{character:"₰",title:n("German penny sign")},{character:"₱",title:n("Peso sign")},{character:"₲",title:n("Guarani sign")},{character:"₳",title:n("Austral sign")},{character:"₴",title:n("Hryvnia sign")},{character:"₵",title:n("Cedi sign")},{character:"₶",title:n("Livre tournois sign")},{character:"₷",title:n("Spesmilo sign")},{character:"₸",title:n("Tenge sign")},{character:"₹",title:n("Indian rupee sign")},{character:"₺",title:n("Turkish lira sign")},{character:"₻",title:n("Nordic mark sign")},{character:"₼",title:n("Manat sign")},{character:"₽",title:n("Ruble sign")}],{label:n("Currency")})}}class SpecialCharactersEssentials extends Plugin{static get pluginName(){return"SpecialCharactersEssentials"}static get isOfficialPlugin(){return!0}static get requires(){return[SpecialCharactersCurrency,SpecialCharactersText,SpecialCharactersMathematical,SpecialCharactersArrows,SpecialCharactersLatin]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class StyleGridButtonView extends ButtonView{constructor(n,s){super(n);M(this,"styleDefinition");M(this,"previewView");this.styleDefinition=s,this.previewView=this._createPreview(),this.set({label:s.name,class:"ck-style-grid__button",withText:!0}),this.extendTemplate({attributes:{role:"option"}}),this.children.add(this.previewView,0)}_createPreview(){const n=new View$1(this.locale);return n.setTemplate({tag:"div",attributes:{class:["ck","ck-reset_all-excluded","ck-style-grid__button__preview","ck-content"],"aria-hidden":"true"},children:[this.styleDefinition.previewTemplate]}),n}}class StyleGridView extends View$1{constructor(n,s){super(n);M(this,"focusTracker");M(this,"keystrokes");M(this,"children");this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.set("activeStyles",[]),this.set("enabledStyles",[]),this.children=this.createCollection(),this.children.delegate("execute").to(this);for(const l of s){const c=new StyleGridButtonView(n,l);this.children.add(c)}this.on("change:activeStyles",()=>{for(const l of this.children)l.isOn=this.activeStyles.includes(l.styleDefinition.name)}),this.on("change:enabledStyles",()=>{for(const l of this.children)l.isEnabled=this.enabledStyles.includes(l.styleDefinition.name)}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-grid"],role:"listbox"},children:this.children})}render(){super.render();for(const n of this.children)this.focusTracker.add(n.element);addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.children,numberOfColumns:3,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection}),this.keystrokes.listenTo(this.element)}focus(){this.children.first.focus()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}}class StyleGroupView extends View$1{constructor(n,s,l){super(n);M(this,"gridView");M(this,"labelView");this.labelView=new LabelView(n),this.labelView.text=s,this.gridView=new StyleGridView(n,l),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel__style-group"],role:"group","aria-labelledby":this.labelView.id},children:[this.labelView,this.gridView]})}}class StylePanelView extends View$1{constructor(n,s){super(n);M(this,"focusTracker");M(this,"keystrokes");M(this,"children");M(this,"blockStylesGroupView");M(this,"inlineStylesGroupView");M(this,"_focusables");M(this,"_focusCycler");const l=n.t;this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.blockStylesGroupView=new StyleGroupView(n,l("Block styles"),s.block),this.inlineStylesGroupView=new StyleGroupView(n,l("Text styles"),s.inline),this.set("activeStyles",[]),this.set("enabledStyles",[]),this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:["shift + tab"],focusNext:["tab"]}}),s.block.length&&this.children.add(this.blockStylesGroupView),s.inline.length&&this.children.add(this.inlineStylesGroupView),this.blockStylesGroupView.gridView.delegate("execute").to(this),this.inlineStylesGroupView.gridView.delegate("execute").to(this),this.blockStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.inlineStylesGroupView.gridView.bind("activeStyles","enabledStyles").to(this,"activeStyles","enabledStyles"),this.setTemplate({tag:"div",attributes:{class:["ck","ck-style-panel"]},children:this.children})}render(){super.render(),this._focusables.add(this.blockStylesGroupView.gridView),this._focusables.add(this.inlineStylesGroupView.gridView),this.focusTracker.add(this.blockStylesGroupView.gridView.element),this.focusTracker.add(this.inlineStylesGroupView.gridView.element),this.keystrokes.listenTo(this.element)}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}}const NON_PREVIEWABLE_ELEMENT_NAMES=["caption","colgroup","dd","dt","figcaption","legend","li","optgroup","option","rp","rt","summary","tbody","td","tfoot","th","thead","tr"];class StyleUtils extends Plugin{constructor(n){super(n);M(this,"_htmlSupport");this.decorate("isStyleEnabledForBlock"),this.decorate("isStyleActiveForBlock"),this.decorate("getAffectedBlocks"),this.decorate("isStyleEnabledForInlineSelection"),this.decorate("isStyleActiveForInlineSelection"),this.decorate("getAffectedInlineSelectable"),this.decorate("getStylePreview"),this.decorate("configureGHSDataFilter")}static get pluginName(){return"StyleUtils"}static get isOfficialPlugin(){return!0}init(){this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport")}normalizeConfig(n,s=[]){const l={block:[],inline:[]};for(const c of s){const u=[],d=[];for(const f of n.getDefinitionsForView(c.element)){const p="appliesToBlock"in f?f.appliesToBlock:!1;if(f.isBlock||p){if(typeof p=="string")u.push(p);else if(f.isBlock){const g=f;u.push(f.model),g.paragraphLikeModel&&u.push(g.paragraphLikeModel)}}else d.push(f.model)}const h=this.getStylePreview(c,[{text:"AaBbCcDdEeFfGgHhIiJj"}]);u.length?l.block.push({...c,previewTemplate:h,modelElements:u,isBlock:!0}):l.inline.push({...c,previewTemplate:h,ghsAttributes:d})}return l}isStyleEnabledForBlock(n,s){const l=this.editor.model,c=this._htmlSupport.getGhsAttributeNameForElement(n.element);return l.schema.checkAttribute(s,c)?n.modelElements.includes(s.name):!1}isStyleActiveForBlock(n,s){const l=this._htmlSupport.getGhsAttributeNameForElement(n.element),c=s.getAttribute(l);return this.hasAllClasses(c,n.classes)}getAffectedBlocks(n,s){return n.modelElements.includes(s.name)?[s]:null}isStyleEnabledForInlineSelection(n,s){const l=this.editor.model;for(const c of n.ghsAttributes)if(l.schema.checkAttributeInSelection(s,c))return!0;return!1}isStyleActiveForInlineSelection(n,s){for(const l of n.ghsAttributes){const c=this._getValueFromFirstAllowedNode(s,l);if(this.hasAllClasses(c,n.classes))return!0}return!1}getAffectedInlineSelectable(n,s){return s}getStylePreview(n,s){const{element:l,classes:c}=n;return{tag:isPreviewable(l)?l:"div",attributes:{class:c},children:s}}hasAllClasses(n,s){return isObject$6(n)&&hasClassesProperty(n)&&s.every(l=>n.classes.includes(l))}configureGHSDataFilter({block:n,inline:s}){const l=this.editor.plugins.get("DataFilter");l.loadAllowedConfig(n.map(normalizedStyleDefinitionToMatcherPattern)),l.loadAllowedConfig(s.map(normalizedStyleDefinitionToMatcherPattern))}_getValueFromFirstAllowedNode(n,s){const c=this.editor.model.schema;if(n.isCollapsed)return n.getAttribute(s);for(const u of n.getRanges())for(const d of u.getItems())if(c.checkAttribute(d,s))return d.getAttribute(s);return null}}function hasClassesProperty(o){return!!o.classes&&Array.isArray(o.classes)}function isPreviewable(o){return!NON_PREVIEWABLE_ELEMENT_NAMES.includes(o)}function normalizedStyleDefinitionToMatcherPattern({element:o,classes:a}){return{name:o,classes:a}}class StyleUI extends Plugin{static get pluginName(){return"StyleUI"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils]}init(){const a=this.editor,n=a.plugins.get("DataSchema"),s=a.plugins.get("StyleUtils"),l=a.config.get("style.definitions"),c=s.normalizeConfig(n,l);a.ui.componentFactory.add("style",u=>{const d=u.t,h=createDropdown(u),f=a.commands.get("style");return h.once("change:isOpen",()=>{const p=new StylePanelView(u,c);h.panelView.children.add(p),p.delegate("execute").to(h),p.bind("activeStyles").to(f,"value"),p.bind("enabledStyles").to(f,"enabledStyles")}),h.bind("isEnabled").to(f),h.buttonView.withText=!0,h.buttonView.bind("label").to(f,"value",p=>p.length>1?d("Multiple styles"):p.length===1?p[0]:d("Styles")),h.bind("class").to(f,"value",p=>{const g=["ck-style-dropdown"];return p.length>1&&g.push("ck-style-dropdown_multiple-active"),g.join(" ")}),h.on("execute",p=>{a.execute("style",{styleName:p.source.styleDefinition.name}),a.editing.view.focus()}),h})}}class StyleCommand extends Command{constructor(n,s){super(n);M(this,"_styleDefinitions");M(this,"_styleUtils");this.set("value",[]),this.set("enabledStyles",[]),this._styleDefinitions=s,this._styleUtils=this.editor.plugins.get(StyleUtils)}refresh(){const n=this.editor.model,s=n.document.selection,l=new Set,c=new Set;for(const d of this._styleDefinitions.inline)this._styleUtils.isStyleEnabledForInlineSelection(d,s)&&c.add(d.name),this._styleUtils.isStyleActiveForInlineSelection(d,s)&&l.add(d.name);const u=first(s.getSelectedBlocks())||s.getFirstPosition().parent;if(u){const d=u.getAncestors({includeSelf:!0,parentFirst:!0});for(const h of d){if(h.is("rootElement"))break;for(const f of this._styleDefinitions.block)this._styleUtils.isStyleEnabledForBlock(f,h)&&(c.add(f.name),this._styleUtils.isStyleActiveForBlock(f,h)&&l.add(f.name));if(n.schema.isObject(h))break}}this.enabledStyles=Array.from(c).sort(),this.isEnabled=this.enabledStyles.length>0,this.value=this.isEnabled?Array.from(l).sort():[]}execute({styleName:n,forceValue:s}){if(!this.enabledStyles.includes(n)){logWarning("style-command-executed-with-incorrect-style-name");return}const l=this.editor.model,c=l.document.selection,u=this.editor.plugins.get("GeneralHtmlSupport"),d=[...this._styleDefinitions.inline,...this._styleDefinitions.block],h=d.filter(({name:g})=>this.value.includes(g)),f=d.find(({name:g})=>g==n),p=s===void 0?!this.value.includes(f.name):s;l.change(()=>{let g;isBlockStyleDefinition(f)?g=this._findAffectedBlocks(getBlocksFromSelection(c),f):g=[this._styleUtils.getAffectedInlineSelectable(f,c)];for(const v of g)p?u.addModelHtmlClass(f.element,f.classes,v):u.removeModelHtmlClass(f.element,getDefinitionExclusiveClasses(h,f),v)})}_findAffectedBlocks(n,s){const l=new Set;for(const c of n){const u=c.getAncestors({includeSelf:!0,parentFirst:!0});for(const d of u){if(d.is("rootElement"))break;const h=this._styleUtils.getAffectedBlocks(s,d);if(h){for(const f of h)l.add(f);break}}}return l}}function getDefinitionExclusiveClasses(o,a){return o.reduce((n,s)=>s.name===a.name?n:n.filter(l=>!s.classes.includes(l)),a.classes)}function isBlockStyleDefinition(o){return"isBlock"in o}function getBlocksFromSelection(o){const a=Array.from(o.getSelectedBlocks());return a.length?a:[o.getFirstPosition().parent]}class ListStyleSupport extends Plugin{constructor(){super(...arguments);M(this,"_listUtils");M(this,"_styleUtils");M(this,"_htmlSupport")}static get pluginName(){return"ListStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils,"GeneralHtmlSupport"]}init(){const n=this.editor;n.plugins.has("ListEditing")&&(this._styleUtils=n.plugins.get(StyleUtils),this._listUtils=this.editor.plugins.get("ListUtils"),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(s,[l,c])=>{this._isStyleEnabledForBlock(l,c)&&(s.return=!0,s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForBlock",(s,[l,c])=>{this._isStyleActiveForBlock(l,c)&&(s.return=!0,s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(s,[l,c])=>{const u=this._getAffectedBlocks(l,c);u&&(s.return=u,s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getStylePreview",(s,[l,c])=>{const u=this._getStylePreview(l,c);u&&(s.return=u,s.stop())},{priority:"high"}))}_isStyleEnabledForBlock(n,s){const l=this.editor.model;if(!["ol","ul","li"].includes(n.element)||!this._listUtils.isListItemBlock(s))return!1;const c=this._htmlSupport.getGhsAttributeNameForElement(n.element);if(n.element=="ol"||n.element=="ul"){if(!l.schema.checkAttribute(s,c))return!1;const d=this._listUtils.isNumberedListType(s.getAttribute("listType"))?"ol":"ul";return n.element==d}else return l.schema.checkAttribute(s,c)}_isStyleActiveForBlock(n,s){const l=this._htmlSupport.getGhsAttributeNameForElement(n.element),c=s.getAttribute(l);return this._styleUtils.hasAllClasses(c,n.classes)}_getAffectedBlocks(n,s){return this._isStyleEnabledForBlock(n,s)?n.element=="li"?this._listUtils.expandListBlocksToCompleteItems(s,{withNested:!1}):this._listUtils.expandListBlocksToCompleteList(s):null}_getStylePreview(n,s){const{element:l,classes:c}=n;return l=="ol"||l=="ul"?{tag:l,attributes:{class:c},children:[{tag:"li",children:s}]}:l=="li"?{tag:"ol",children:[{tag:l,attributes:{class:c},children:s}]}:null}}class TableStyleSupport extends Plugin{constructor(){super(...arguments);M(this,"_tableUtils");M(this,"_styleUtils")}static get pluginName(){return"TableStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils]}init(){const n=this.editor;n.plugins.has("TableEditing")&&(this._styleUtils=n.plugins.get(StyleUtils),this._tableUtils=this.editor.plugins.get("TableUtils"),this.listenTo(this._styleUtils,"isStyleEnabledForBlock",(s,[l,c])=>{this._isApplicable(l,c)&&(s.return=this._isStyleEnabledForBlock(l,c),s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedBlocks",(s,[l,c])=>{this._isApplicable(l,c)&&(s.return=this._getAffectedBlocks(l,c),s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"configureGHSDataFilter",(s,[{block:l}])=>{this.editor.plugins.get("DataFilter").loadAllowedConfig(l.filter(u=>u.element=="figcaption").map(u=>({name:"caption",classes:u.classes})))}))}_isApplicable(n,s){return["td","th"].includes(n.element)?s.name=="tableCell":["thead","tbody"].includes(n.element)?s.name=="table":!1}_isStyleEnabledForBlock(n,s){if(["td","th"].includes(n.element)){const l=this._tableUtils.getCellLocation(s),u=s.parent.parent,d=u.getAttribute("headingRows")||0,h=u.getAttribute("headingColumns")||0,f=l.row<d||l.column<h;return n.element=="th"?f:!f}if(["thead","tbody"].includes(n.element)){const l=s.getAttribute("headingRows")||0;return n.element=="thead"?l>0:l<this._tableUtils.getRows(s)}/* istanbul ignore next -- @preserve */return!1}_getAffectedBlocks(n,s){return this._isStyleEnabledForBlock(n,s)?[s]:null}}class LinkStyleSupport extends Plugin{constructor(){super(...arguments);M(this,"_styleUtils");M(this,"_htmlSupport")}static get pluginName(){return"LinkStyleSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleUtils,"GeneralHtmlSupport"]}init(){const n=this.editor;n.plugins.has("LinkEditing")&&(this._styleUtils=n.plugins.get(StyleUtils),this._htmlSupport=this.editor.plugins.get("GeneralHtmlSupport"),this.listenTo(this._styleUtils,"isStyleEnabledForInlineSelection",(s,[l,c])=>{l.element=="a"&&(s.return=this._isStyleEnabled(l,c),s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"isStyleActiveForInlineSelection",(s,[l,c])=>{l.element=="a"&&(s.return=this._isStyleActive(l,c),s.stop())},{priority:"high"}),this.listenTo(this._styleUtils,"getAffectedInlineSelectable",(s,[l,c])=>{if(l.element!="a")return;const u=this._getAffectedSelectable(l,c);u&&(s.return=u,s.stop())},{priority:"high"}))}_isStyleEnabled(n,s){const l=this.editor.model;if(s.isCollapsed)return s.hasAttribute("linkHref");for(const c of s.getRanges())for(const u of c.getItems())if((u.is("$textProxy")||l.schema.isInline(u))&&u.hasAttribute("linkHref"))return!0;return!1}_isStyleActive(n,s){const l=this.editor.model,c=this._htmlSupport.getGhsAttributeNameForElement(n.element);if(s.isCollapsed){if(s.hasAttribute("linkHref")){const u=s.getAttribute(c);if(this._styleUtils.hasAllClasses(u,n.classes))return!0}return!1}for(const u of s.getRanges())for(const d of u.getItems())if((d.is("$textProxy")||l.schema.isInline(d))&&d.hasAttribute("linkHref")){const h=d.getAttribute(c);return this._styleUtils.hasAllClasses(h,n.classes)}return!1}_getAffectedSelectable(n,s){const l=this.editor.model;if(s.isCollapsed){const u=s.getAttribute("linkHref");return findAttributeRange(s.getFirstPosition(),"linkHref",u,l)}const c=[];for(const u of s.getRanges()){const d=l.createRange(expandAttributePosition(u.start,"linkHref",!0,l),expandAttributePosition(u.end,"linkHref",!1,l));for(const h of d.getItems())(h.is("$textProxy")||l.schema.isInline(h))&&h.hasAttribute("linkHref")&&c.push(this.editor.model.createRangeOn(h))}return normalizeRanges(c)}}function expandAttributePosition(o,a,n,s){const l=o.textNode||(n?o.nodeAfter:o.nodeBefore);if(!l||!l.hasAttribute(a))return o;const c=l.getAttribute(a);return findAttributeRangeBound(o,a,c,n,s)}function normalizeRanges(o){for(let a=1;a<o.length;a++){const n=o[a-1].getJoined(o[a]);n&&o.splice(--a,2,n)}return o}class StyleEditing extends Plugin{static get pluginName(){return"StyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return["GeneralHtmlSupport",StyleUtils,ListStyleSupport,TableStyleSupport,LinkStyleSupport]}init(){const a=this.editor,n=a.plugins.get("DataSchema"),s=a.plugins.get("StyleUtils"),l=a.config.get("style.definitions"),c=s.normalizeConfig(n,l);a.commands.add("style",new StyleCommand(a,c)),s.configureGHSDataFilter(c)}}class Style extends Plugin{static get pluginName(){return"Style"}static get isOfficialPlugin(){return!0}static get requires(){return[StyleEditing,StyleUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function upcastStyleToAttribute(o,a){const{modelAttribute:n,styleName:s,viewElement:l,defaultValue:c,reduceBoxSides:u=!1,shouldUpcast:d=()=>!0}=a;o.for("upcast").attributeToAttribute({view:{name:l,styles:{[s]:/[\s\S]+/}},model:{key:n,value:h=>{if(!d(h))return;const f=h.getNormalizedStyle(s),p=u?reduceBoxSidesValue(f):f;if(c!==p)return p}}})}function upcastBorderStyles(o,a,n,s){o.for("upcast").add(l=>l.on("element:"+a,(c,u,d)=>{if(!u.modelRange)return;const h=["border-top-width","border-top-color","border-top-style","border-bottom-width","border-bottom-color","border-bottom-style","border-right-width","border-right-color","border-right-style","border-left-width","border-left-color","border-left-style"].filter(b=>u.viewItem.hasStyle(b));if(!h.length)return;const f={styles:h};if(!d.consumable.test(u.viewItem,f))return;const p=[...u.modelRange.getItems({shallow:!0})].pop();d.consumable.consume(u.viewItem,f);const g={style:u.viewItem.getNormalizedStyle("border-style"),color:u.viewItem.getNormalizedStyle("border-color"),width:u.viewItem.getNormalizedStyle("border-width")},v={style:reduceBoxSidesValue(g.style),color:reduceBoxSidesValue(g.color),width:reduceBoxSidesValue(g.width)};v.style!==s.style&&d.writer.setAttribute(n.style,v.style,p),v.color!==s.color&&d.writer.setAttribute(n.color,v.color,p),v.width!==s.width&&d.writer.setAttribute(n.width,v.width,p)}))}function downcastAttributeToStyle(o,a){const{modelElement:n,modelAttribute:s,styleName:l}=a;o.for("downcast").attributeToAttribute({model:{name:n,key:s},view:c=>({key:"style",value:{[l]:c}})})}function downcastTableAttribute(o,a){const{modelAttribute:n,styleName:s}=a;o.for("downcast").add(l=>l.on(`attribute:${n}:table`,(c,u,d)=>{const{item:h,attributeNewValue:f}=u,{mapper:p,writer:g}=d;if(!d.consumable.consume(u.item,c.name))return;const v=[...p.toViewElement(h).getChildren()].find(b=>b.is("element","table"));f?g.setStyle(s,f,v):g.removeStyle(s,v)}))}function reduceBoxSidesValue(o){if(!o)return;const a=["top","right","bottom","left"];if(!a.every(c=>o[c]))return o;const s=o.top;return a.every(c=>o[c]===s)?s:o}function updateNumericAttribute(o,a,n,s,l=1){a!=null&&l!==void 0&&l!==null&&a>l?s.setAttribute(o,a,n):s.removeAttribute(o,n)}function createEmptyTableCell(o,a,n={}){const s=o.createElement("tableCell",n);return o.insertElement("paragraph",s),o.insert(s,a),s}function isHeadingColumnCell(o,a){const n=a.parent.parent,s=parseInt(n.getAttribute("headingColumns")||"0"),{column:l}=o.getCellLocation(a);return!!s&&l<s}function enableProperty$1(o,a,n){const{modelAttribute:s}=n;o.extend("tableCell",{allowAttributes:[s]}),upcastStyleToAttribute(a,{viewElement:/^(td|th)$/,...n}),downcastAttributeToStyle(a,{modelElement:"tableCell",...n})}function getSelectionAffectedTable(o){const a=o.getSelectedElement();return a&&a.is("element","table")?a:o.getFirstPosition().findAncestor("table")}function upcastTableFigure(){return o=>{o.on("element:figure",(a,n,s)=>{if(!s.consumable.test(n.viewItem,{name:!0,classes:"table"}))return;const l=getViewTableFromFigure(n.viewItem);if(!l||!s.consumable.test(l,{name:!0}))return;s.consumable.consume(n.viewItem,{name:!0,classes:"table"});const c=s.convertItem(l,n.modelCursor),u=first(c.modelRange.getItems());if(!u){s.consumable.revert(n.viewItem,{name:!0,classes:"table"});return}s.convertChildren(n.viewItem,s.writer.createPositionAt(u,"end")),s.updateConversionResult(u,n)})}}function upcastTable(){return o=>{o.on("element:table",(a,n,s)=>{const l=n.viewItem;if(!s.consumable.test(l,{name:!0}))return;const{rows:c,headingRows:u,headingColumns:d}=scanTable(l),h={};d&&(h.headingColumns=d),u&&(h.headingRows=u);const f=s.writer.createElement("table",h);if(s.safeInsert(f,n.modelCursor)){if(s.consumable.consume(l,{name:!0}),c.forEach(p=>s.convertItem(p,s.writer.createPositionAt(f,"end"))),s.convertChildren(l,s.writer.createPositionAt(f,"end")),f.isEmpty){const p=s.writer.createElement("tableRow");s.writer.insert(p,s.writer.createPositionAt(f,"end")),createEmptyTableCell(s.writer,s.writer.createPositionAt(p,"end"))}s.updateConversionResult(f,n)}})}}function skipEmptyTableRow(){return o=>{o.on("element:tr",(a,n)=>{n.viewItem.isEmpty&&n.modelCursor.index==0&&a.stop()},{priority:"high"})}}function ensureParagraphInTableCell(o){return a=>{a.on(`element:${o}`,(n,s,{writer:l})=>{if(!s.modelRange)return;const c=s.modelRange.start.nodeAfter,u=l.createPositionAt(c,0);if(s.viewItem.isEmpty){l.insertElement("paragraph",u);return}const d=Array.from(c.getChildren());if(d.every(h=>h.is("element","$marker"))){const h=l.createElement("paragraph");l.insert(h,l.createPositionAt(c,0));for(const f of d)l.move(l.createRangeOn(f),l.createPositionAt(h,"end"))}},{priority:"low"})}}function getViewTableFromFigure(o){for(const a of o.getChildren())if(a.is("element","table"))return a}function scanTable(o){let a=0,n;const s=[],l=[];let c;for(const u of Array.from(o.getChildren())){if(u.name!=="tbody"&&u.name!=="thead"&&u.name!=="tfoot")continue;u.name==="thead"&&!c&&(c=u);const d=Array.from(u.getChildren()).filter(f=>f.is("element","tr"));let h=null;for(const f of d){const p=Array.from(f.getChildren()).filter(g=>g.is("element","td")||g.is("element","th"));if(c&&u===c||u.name==="tbody"&&p.length>0&&(h===null||p.length===h)&&p.every(g=>g.is("element","th")))a++,s.push(f);else{l.push(f);const g=scanRowForHeadingColumns(f);(!n||g<n)&&(n=g)}h=Math.max(h||0,p.length)}}return{headingRows:a,headingColumns:n||0,rows:[...s,...l]}}function scanRowForHeadingColumns(o){let a=0,n=0;const s=Array.from(o.getChildren()).filter(l=>l.name==="th"||l.name==="td");for(;n<s.length&&s[n].name==="th";){const l=s[n],c=parseInt(l.getAttribute("colspan")||"1");a=a+c,n++}return a}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */class TableWalker{constructor(a,n={}){M(this,"_table");M(this,"_startRow");M(this,"_endRow");M(this,"_startColumn");M(this,"_endColumn");M(this,"_includeAllSlots");M(this,"_skipRows");M(this,"_row");M(this,"_rowIndex");M(this,"_column");M(this,"_cellIndex");M(this,"_spannedCells");M(this,"_nextCellAtColumn");M(this,"_jumpedToStartRow",!1);this._table=a,this._startRow=n.row!==void 0?n.row:n.startRow||0,this._endRow=n.row!==void 0?n.row:n.endRow,this._startColumn=n.column!==void 0?n.column:n.startColumn||0,this._endColumn=n.column!==void 0?n.column:n.endColumn,this._includeAllSlots=!!n.includeAllSlots,this._skipRows=new Set,this._row=0,this._rowIndex=0,this._column=0,this._cellIndex=0,this._spannedCells=new Map,this._nextCellAtColumn=-1}[Symbol.iterator](){return this}next(){this._canJumpToStartRow()&&this._jumpToNonSpannedRowClosestToStartRow();const a=this._table.getChild(this._rowIndex);if(!a||this._isOverEndRow())return{done:!0,value:void 0};if(!a.is("element","tableRow"))return this._rowIndex++,this.next();if(this._isOverEndColumn())return this._advanceToNextRow();let n=null;const s=this._getSpanned();if(s)this._includeAllSlots&&!this._shouldSkipSlot()&&(n=this._formatOutValue(s.cell,s.row,s.column));else{const l=a.getChild(this._cellIndex);if(!l)return this._advanceToNextRow();const c=parseInt(l.getAttribute("colspan")||"1"),u=parseInt(l.getAttribute("rowspan")||"1");(c>1||u>1)&&this._recordSpans(l,u,c),this._shouldSkipSlot()||(n=this._formatOutValue(l)),this._nextCellAtColumn=this._column+c}return this._column++,this._column==this._nextCellAtColumn&&this._cellIndex++,n||this.next()}skipRow(a){this._skipRows.add(a)}_advanceToNextRow(){return this._row++,this._rowIndex++,this._column=0,this._cellIndex=0,this._nextCellAtColumn=-1,this.next()}_isOverEndRow(){return this._endRow!==void 0&&this._row>this._endRow}_isOverEndColumn(){return this._endColumn!==void 0&&this._column>this._endColumn}_formatOutValue(a,n=this._row,s=this._column){return{done:!1,value:new TableSlot(this,a,n,s)}}_shouldSkipSlot(){const a=this._skipRows.has(this._row),n=this._row<this._startRow,s=this._column<this._startColumn,l=this._endColumn!==void 0&&this._column>this._endColumn;return a||n||s||l}_getSpanned(){const a=this._spannedCells.get(this._row);return a&&a.get(this._column)||null}_recordSpans(a,n,s){const l={cell:a,row:this._row,column:this._column};for(let c=this._row;c<this._row+n;c++)for(let u=this._column;u<this._column+s;u++)(c!=this._row||u!=this._column)&&this._markSpannedCell(c,u,l)}_markSpannedCell(a,n,s){this._spannedCells.has(a)||this._spannedCells.set(a,new Map),this._spannedCells.get(a).set(n,s)}_canJumpToStartRow(){return!!this._startRow&&this._startRow>0&&!this._jumpedToStartRow}_jumpToNonSpannedRowClosestToStartRow(){const a=this._getRowLength(0);for(let n=this._startRow;!this._jumpedToStartRow;n--)a===this._getRowLength(n)&&(this._row=n,this._rowIndex=n,this._jumpedToStartRow=!0)}_getRowLength(a){return[...this._table.getChild(a).getChildren()].reduce((s,l)=>s+parseInt(l.getAttribute("colspan")||"1"),0)}}class TableSlot{constructor(a,n,s,l){M(this,"cell");M(this,"row");M(this,"column");M(this,"cellAnchorRow");M(this,"cellAnchorColumn");M(this,"_cellIndex");M(this,"_rowIndex");M(this,"_table");this.cell=n,this.row=a._row,this.column=a._column,this.cellAnchorRow=s,this.cellAnchorColumn=l,this._cellIndex=a._cellIndex,this._rowIndex=a._rowIndex,this._table=a._table}get isAnchor(){return this.row===this.cellAnchorRow&&this.column===this.cellAnchorColumn}get cellWidth(){return parseInt(this.cell.getAttribute("colspan")||"1")}get cellHeight(){return parseInt(this.cell.getAttribute("rowspan")||"1")}get rowIndex(){return this._rowIndex}getPositionBefore(){return this._table.root.document.model.createPositionAt(this._table.getChild(this.row),this._cellIndex)}}function downcastTable(o,a){return(n,{writer:s})=>{const l=n.getAttribute("headingRows")||0,c=s.createContainerElement("table",null,[]),u=s.createContainerElement("figure",{class:"table"},c);l>0&&s.insert(s.createPositionAt(c,"end"),s.createContainerElement("thead",null,s.createSlot(d=>d.is("element","tableRow")&&d.index<l))),l<o.getRows(n)&&s.insert(s.createPositionAt(c,"end"),s.createContainerElement("tbody",null,s.createSlot(d=>d.is("element","tableRow")&&d.index>=l)));for(const{positionOffset:d,filter:h}of a.additionalSlots)s.insert(s.createPositionAt(c,d),s.createSlot(h));return s.insert(s.createPositionAt(c,"after"),s.createSlot(d=>d.is("element","tableRow")?!1:!a.additionalSlots.some(({filter:h})=>h(d)))),a.asWidget?toTableWidget(u,s):u}}function downcastRow(){return(o,{writer:a})=>o.isEmpty?a.createEmptyElement("tr"):a.createContainerElement("tr")}function downcastCell(o={}){return(a,{writer:n})=>{const s=a.parent,l=s.parent,c=l.getChildIndex(s),u=new TableWalker(l,{row:c}),d=l.getAttribute("headingRows")||0,h=l.getAttribute("headingColumns")||0;let f=null;for(const p of u)if(p.cell==a){const v=p.row<d||p.column<h?"th":"td";f=o.asWidget?toWidgetEditable(n.createEditableElement(v),n):n.createContainerElement(v);break}return f}}function convertParagraphInTableCell(o={}){return(a,{writer:n})=>{if(!a.parent.is("element","tableCell")||!isSingleParagraphWithoutAttributes(a))return null;if(o.asWidget)return n.createContainerElement("span",{class:"ck-table-bogus-paragraph"});{const s=n.createContainerElement("p");return n.setCustomProperty("dataPipeline:transparentRendering",!0,s),s}}}function isSingleParagraphWithoutAttributes(o){return o.parent.childCount==1&&!hasAnyAttribute(o)}function toTableWidget(o,a){return a.setCustomProperty("table",!0,o),toWidget(o,a,{hasSelectionHandle:!0})}function hasAnyAttribute(o){for(const a of o.getAttributeKeys())if(!(a.startsWith("selection:")||a=="htmlEmptyBlock"))return!0;return!1}class InsertTableCommand extends Command{refresh(){const a=this.editor.model,n=a.document.selection,s=a.schema;this.isEnabled=isAllowedInParent(n,s)}execute(a={}){const n=this.editor,s=n.model,l=n.plugins.get("TableUtils"),c=n.config.get("table.defaultHeadings.rows"),u=n.config.get("table.defaultHeadings.columns");a.headingRows===void 0&&c&&(a.headingRows=c),a.headingColumns===void 0&&u&&(a.headingColumns=u),s.change(d=>{const h=l.createTable(d,a);s.insertObject(h,null,null,{findOptimalPosition:"auto"}),d.setSelection(d.createPositionAt(h.getNodeByPath([0,0,0]),0))})}}function isAllowedInParent(o,a){const n=o.getFirstPosition().parent,s=n===n.root?n:n.parent;return a.checkChild(s,"table")}class InsertRowCommand extends Command{constructor(n,s={}){super(n);M(this,"order");this.order=s.order||"below"}refresh(){const n=this.editor.model.document.selection,l=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n).length;this.isEnabled=l}execute(){const n=this.editor,s=n.model.document.selection,l=n.plugins.get("TableUtils"),c=this.order==="above",u=l.getSelectionAffectedTableCells(s),d=l.getRowIndexes(u),h=c?d.first:d.last,f=u[0].findAncestor("table");l.insertRows(f,{at:c?h:h+1,copyStructureFromAbove:!c})}}class InsertColumnCommand extends Command{constructor(n,s={}){super(n);M(this,"order");this.order=s.order||"right"}refresh(){const n=this.editor.model.document.selection,l=!!this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n).length;this.isEnabled=l}execute(){const n=this.editor,s=n.model.document.selection,l=n.plugins.get("TableUtils"),c=this.order==="left",u=l.getSelectionAffectedTableCells(s),d=l.getColumnIndexes(u),h=c?d.first:d.last,f=u[0].findAncestor("table");l.insertColumns(f,{columns:1,at:c?h:h+1})}}class SplitCellCommand extends Command{constructor(n,s={}){super(n);M(this,"direction");this.direction=s.direction||"horizontally"}refresh(){const s=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=s.length===1}execute(){const n=this.editor.plugins.get("TableUtils"),s=n.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];this.direction==="horizontally"?n.splitCellHorizontally(s,2):n.splitCellVertically(s,2)}}function cropTableToDimensions(o,a,n){const{startRow:s,startColumn:l,endRow:c,endColumn:u}=a,d=n.createElement("table"),h=c-s+1;for(let p=0;p<h;p++)n.insertElement("tableRow",d,"end");const f=[...new TableWalker(o,{startRow:s,endRow:c,startColumn:l,endColumn:u,includeAllSlots:!0})];for(const{row:p,column:g,cell:v,isAnchor:b,cellAnchorRow:w,cellAnchorColumn:x}of f){const S=p-s,E=d.getChild(S);if(!b)(w<s||x<l)&&createEmptyTableCell(n,n.createPositionAt(E,"end"));else{const T=n.cloneElement(v);n.append(T,E),trimTableCellIfNeeded(T,p,g,c,u,n)}}return addHeadingsToCroppedTable(d,o,s,l,n),d}function getVerticallyOverlappingCells(o,a,n=0){const s=[],l=new TableWalker(o,{startRow:n,endRow:a-1});for(const c of l){const{row:u,cellHeight:d}=c,h=u+d-1;u<a&&a<=h&&s.push(c)}return s}function splitHorizontally(o,a,n){const s=o.parent,l=s.parent,c=s.index,u=parseInt(o.getAttribute("rowspan")),d=a-c,h={},f=u-d;f>1&&(h.rowspan=f);const p=parseInt(o.getAttribute("colspan")||"1");p>1&&(h.colspan=p);const g=c,v=g+d,b=[...new TableWalker(l,{startRow:g,endRow:v,includeAllSlots:!0})];let w=null,x;for(const S of b){const{row:E,column:T,cell:C}=S;C===o&&x===void 0&&(x=T),x!==void 0&&x===T&&E===v&&(w=createEmptyTableCell(n,S.getPositionBefore(),h))}return updateNumericAttribute("rowspan",d,o,n),w}function getHorizontallyOverlappingCells(o,a){const n=[],s=new TableWalker(o);for(const l of s){const{column:c,cellWidth:u}=l,d=c+u-1;c<a&&a<=d&&n.push(l)}return n}function splitVertically(o,a,n,s){const l=parseInt(o.getAttribute("colspan")),c=n-a,u={},d=l-c;d>1&&(u.colspan=d);const h=parseInt(o.getAttribute("rowspan")||"1");h>1&&(u.rowspan=h);const f=createEmptyTableCell(s,s.createPositionAfter(o),u);return updateNumericAttribute("colspan",c,o,s),f}function trimTableCellIfNeeded(o,a,n,s,l,c){const u=parseInt(o.getAttribute("colspan")||"1"),d=parseInt(o.getAttribute("rowspan")||"1");if(n+u-1>l){const p=l-n+1;updateNumericAttribute("colspan",p,o,c,1)}if(a+d-1>s){const p=s-a+1;updateNumericAttribute("rowspan",p,o,c,1)}}function addHeadingsToCroppedTable(o,a,n,s,l){const c=parseInt(a.getAttribute("headingRows")||"0");if(c>0){const d=c-n;updateNumericAttribute("headingRows",d,o,l,0)}const u=parseInt(a.getAttribute("headingColumns")||"0");if(u>0){const d=u-s;updateNumericAttribute("headingColumns",d,o,l,0)}}function removeEmptyColumns(o,a){const n=a.getColumns(o),s=new Array(n).fill(0);for(const{column:c}of new TableWalker(o))s[c]++;const l=s.reduce((c,u,d)=>u?c:[...c,d],[]);if(l.length>0){const c=l[l.length-1];return a.removeColumns(o,{at:c}),!0}return!1}function removeEmptyRows(o,a){const n=[],s=a.getRows(o);for(let l=0;l<s;l++)o.getChild(l).isEmpty&&n.push(l);if(n.length>0){const l=n[n.length-1];return a.removeRows(o,{at:l}),!0}return!1}function removeEmptyRowsColumns(o,a){removeEmptyColumns(o,a)||removeEmptyRows(o,a)}function adjustLastRowIndex(o,a){const n=Array.from(new TableWalker(o,{startColumn:a.firstColumn,endColumn:a.lastColumn,row:a.lastRow}));if(n.every(({cellHeight:c})=>c===1))return a.lastRow;const l=n[0].cellHeight-1;return a.lastRow+l}function adjustLastColumnIndex(o,a){const n=Array.from(new TableWalker(o,{startRow:a.firstRow,endRow:a.lastRow,column:a.lastColumn}));if(n.every(({cellWidth:c})=>c===1))return a.lastColumn;const l=n[0].cellWidth-1;return a.lastColumn+l}class MergeCellCommand extends Command{constructor(n,s){super(n);M(this,"direction");M(this,"isHorizontal");this.direction=s.direction,this.isHorizontal=this.direction=="right"||this.direction=="left"}refresh(){const n=this._getMergeableCell();this.value=n,this.isEnabled=!!n}execute(){const n=this.editor.model,s=n.document,c=this.editor.plugins.get("TableUtils").getTableCellsContainingSelection(s.selection)[0],u=this.value,d=this.direction;n.change(h=>{const f=d=="right"||d=="down",p=f?c:u,g=f?u:c,v=g.parent;mergeTableCells$1(g,p,h);const b=this.isHorizontal?"colspan":"rowspan",w=parseInt(c.getAttribute(b)||"1"),x=parseInt(u.getAttribute(b)||"1");h.setAttribute(b,w+x,p),h.setSelection(h.createRangeIn(p));const S=this.editor.plugins.get("TableUtils"),E=v.findAncestor("table");removeEmptyRowsColumns(E,S)})}_getMergeableCell(){const s=this.editor.model.document,l=this.editor.plugins.get("TableUtils"),c=l.getTableCellsContainingSelection(s.selection)[0];if(!c)return;const u=this.isHorizontal?getHorizontalCell(c,this.direction,l):getVerticalCell(c,this.direction,l);if(!u)return;const d=this.isHorizontal?"rowspan":"colspan",h=parseInt(c.getAttribute(d)||"1");if(parseInt(u.getAttribute(d)||"1")===h)return u}}function getHorizontalCell(o,a,n){const l=o.parent.parent,c=a=="right"?o.nextSibling:o.previousSibling,u=(l.getAttribute("headingColumns")||0)>0;if(!c)return;const d=a=="right"?o:c,h=a=="right"?c:o,{column:f}=n.getCellLocation(d),{column:p}=n.getCellLocation(h),g=parseInt(d.getAttribute("colspan")||"1"),v=isHeadingColumnCell(n,d),b=isHeadingColumnCell(n,h);return u&&v!=b?void 0:f+g===p?c:void 0}function getVerticalCell(o,a,n){const s=o.parent,l=s.parent,c=l.getChildIndex(s);if(a=="down"&&c===n.getRows(l)-1||a=="up"&&c===0)return null;const u=parseInt(o.getAttribute("rowspan")||"1"),d=l.getAttribute("headingRows")||0,h=a=="down"&&c+u===d,f=a=="up"&&c===d;if(d&&(h||f))return null;const p=parseInt(o.getAttribute("rowspan")||"1"),g=a=="down"?c+p:c,v=[...new TableWalker(l,{endRow:g})],w=v.find(S=>S.cell===o).column,x=v.find(({row:S,cellHeight:E,column:T})=>T!==w?!1:a=="down"?S===g:g===S+E);return x&&x.cell?x.cell:null}function mergeTableCells$1(o,a,n){isEmpty$2(o)||(isEmpty$2(a)&&n.remove(n.createRangeIn(a)),n.move(n.createRangeIn(o),n.createPositionAt(a,"end"))),n.remove(o)}function isEmpty$2(o){const a=o.getChild(0);return o.childCount==1&&a.is("element","paragraph")&&a.isEmpty}class RemoveRowCommand extends Command{refresh(){const a=this.editor.plugins.get("TableUtils"),n=a.getSelectionAffectedTableCells(this.editor.model.document.selection),s=n[0];if(s){const l=s.findAncestor("table"),u=a.getRows(l)-1,d=a.getRowIndexes(n),h=d.first===0&&d.last===u;this.isEnabled=!h}else this.isEnabled=!1}execute(){const a=this.editor.model,n=this.editor.plugins.get("TableUtils"),s=n.getSelectionAffectedTableCells(a.document.selection),l=n.getRowIndexes(s),c=s[0],u=c.findAncestor("table"),d=n.getCellLocation(c).column;a.change(h=>{const f=l.last-l.first+1;n.removeRows(u,{at:l.first,rows:f});const p=getCellToFocus$1(u,l.first,d,n.getRows(u));h.setSelection(h.createPositionAt(p,0))})}}function getCellToFocus$1(o,a,n,s){const l=o.getChild(Math.min(a,s-1));let c=l.getChild(0),u=0;for(const d of l.getChildren()){if(u>n)return c;c=d,u+=parseInt(d.getAttribute("colspan")||"1")}return c}class RemoveColumnCommand extends Command{refresh(){const a=this.editor.plugins.get("TableUtils"),n=a.getSelectionAffectedTableCells(this.editor.model.document.selection),s=n[0];if(s){const l=s.findAncestor("table"),c=a.getColumns(l),{first:u,last:d}=a.getColumnIndexes(n);this.isEnabled=d-u<c-1}else this.isEnabled=!1}execute(){const a=this.editor.plugins.get("TableUtils"),[n,s]=getBoundaryCells(this.editor.model.document.selection,a),l=n.parent.parent,c=[...new TableWalker(l)],u={first:c.find(h=>h.cell===n).column,last:c.find(h=>h.cell===s).column},d=getCellToFocus(c,n,s,u);this.editor.model.change(h=>{const f=u.last-u.first+1;a.removeColumns(l,{at:u.first,columns:f}),h.setSelection(h.createPositionAt(d,0))})}}function getCellToFocus(o,a,n,s){return parseInt(n.getAttribute("colspan")||"1")>1?n:a.previousSibling||n.nextSibling?n.nextSibling||a.previousSibling:s.first?o.reverse().find(({column:c})=>c<s.first).cell:o.reverse().find(({column:c})=>c>s.last).cell}function getBoundaryCells(o,a){const n=a.getSelectionAffectedTableCells(o),s=n[0],l=n.pop(),c=[s,l];return s.isBefore(l)?c:c.reverse()}class SetHeaderRowCommand extends Command{refresh(){const a=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=a.getSelectionAffectedTableCells(n.document.selection),l=s.length>0;this.isEnabled=l,this.value=l&&s.every(c=>this._isInHeading(c,c.parent.parent))}execute(a={}){if(a.forceValue===this.value)return;const n=this.editor.plugins.get("TableUtils"),s=this.editor.model,l=n.getSelectionAffectedTableCells(s.document.selection),c=l[0].findAncestor("table"),{first:u,last:d}=n.getRowIndexes(l),h=this.value?u:d+1,f=c.getAttribute("headingRows")||0;s.change(p=>{if(h){const g=h>f?f:0,v=getVerticallyOverlappingCells(c,h,g);for(const{cell:b}of v)splitHorizontally(b,h,p)}updateNumericAttribute("headingRows",h,c,p,0)})}_isInHeading(a,n){const s=parseInt(n.getAttribute("headingRows")||"0");return!!s&&a.parent.index<s}}class SetHeaderColumnCommand extends Command{refresh(){const a=this.editor.model,n=this.editor.plugins.get("TableUtils"),s=n.getSelectionAffectedTableCells(a.document.selection),l=s.length>0;this.isEnabled=l,this.value=l&&s.every(c=>isHeadingColumnCell(n,c))}execute(a={}){if(a.forceValue===this.value)return;const n=this.editor.plugins.get("TableUtils"),s=this.editor.model,l=n.getSelectionAffectedTableCells(s.document.selection),c=l[0].findAncestor("table"),{first:u,last:d}=n.getColumnIndexes(l),h=this.value?u:d+1;s.change(f=>{if(h){const p=getHorizontallyOverlappingCells(c,h);for(const{cell:g,column:v}of p)splitVertically(g,v,h,f)}updateNumericAttribute("headingColumns",h,c,f,0)})}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */const COLUMN_MIN_WIDTH_AS_PERCENTAGE=5,COLUMN_MIN_WIDTH_IN_PIXELS=40,COLUMN_WIDTH_PRECISION=2;function getChangedResizedTables(o){const a=new Set;for(const n of o.document.differ.getChanges()){let s=null;switch(n.type){case"insert":s=["table","tableRow","tableCell"].includes(n.name)?n.position:null;break;case"remove":s=["tableRow","tableCell"].includes(n.name)?n.position:null;break;case"attribute":n.range.start.nodeAfter&&(s=["table","tableRow","tableCell"].includes(n.range.start.nodeAfter.name)?n.range.start:null);break}if(!s)continue;const l=s.nodeAfter&&s.nodeAfter.is("element","table")?s.nodeAfter:s.findAncestor("table");for(const c of o.createRangeOn(l).getItems())c.is("element","table")&&getColumnGroupElement(c)&&a.add(c)}return a}function getColumnMinWidthAsPercentage(o,a){return COLUMN_MIN_WIDTH_IN_PIXELS*100/getTableWidthInPixels(o,a)}function getTableWidthInPixels(o,a){const n=getChildrenViewElement(o,"tbody",a)||getChildrenViewElement(o,"thead",a),s=a.editing.view.domConverter.mapViewToDom(n);return getElementWidthInPixels(s)}function getChildrenViewElement(o,a,n){return[...[...n.editing.mapper.toViewElement(o).getChildren()].find(c=>c.is("element","table")).getChildren()].find(c=>c.is("element",a))}function getElementWidthInPixels(o){const a=global$1.window.getComputedStyle(o);return a.boxSizing==="border-box"?parseFloat(a.width)-parseFloat(a.paddingLeft)-parseFloat(a.paddingRight)-parseFloat(a.borderLeftWidth)-parseFloat(a.borderRightWidth):parseFloat(a.width)}function getColumnEdgesIndexes(o,a){const n=a.getCellLocation(o).column,s=o.getAttribute("colspan")||1;return{leftEdge:n,rightEdge:n+s-1}}function toPrecision(o){const a=Math.pow(10,COLUMN_WIDTH_PRECISION),n=typeof o=="number"?o:parseFloat(o);return Math.round(n*a)/a}function clamp$1(o,a,n){return o<=a?toPrecision(a):o>=n?toPrecision(n):toPrecision(o)}function createFilledArray(o,a){return Array(o).fill(a)}function sumArray(o){return o.map(a=>typeof a=="number"?a:parseFloat(a)).filter(a=>!Number.isNaN(a)).reduce((a,n)=>a+n,0)}function normalizeColumnWidths(o){const a=o.map(l=>l==="auto"?l:parseFloat(l.replace("%","")));let n=calculateMissingColumnWidths(a);const s=sumArray(n);return s!==100&&(n=n.map(l=>toPrecision(l*100/s)).map((l,c,u)=>{if(!(c===u.length-1))return l;const h=sumArray(u);return toPrecision(l+100-h)})),n.map(l=>l+"%")}function calculateMissingColumnWidths(o){const a=o.filter(l=>l==="auto").length;if(a===0)return o.map(l=>toPrecision(l));const n=sumArray(o),s=Math.max((100-n)/a,COLUMN_MIN_WIDTH_AS_PERCENTAGE);return o.map(l=>l==="auto"?s:l).map(l=>toPrecision(l))}function getDomCellOuterWidth(o){const a=global$1.window.getComputedStyle(o);return a.boxSizing==="border-box"?parseInt(a.width):parseFloat(a.width)+parseFloat(a.paddingLeft)+parseFloat(a.paddingRight)+parseFloat(a.borderWidth)}function updateColumnElements(o,a,n,s){for(let l=0;l<Math.max(n.length,o.length);l++){const c=o[l],u=n[l];u?c?s.setAttribute("columnWidth",u,c):s.appendElement("tableColumn",{columnWidth:u},a):s.remove(c)}}function getColumnGroupElement(o){if(o.is("element","tableColumnGroup"))return o;const a=o.getChildren();return Array.from(a).find(n=>n.is("element","tableColumnGroup"))}function getTableColumnElements(o){const a=getColumnGroupElement(o);return a?Array.from(a.getChildren()):[]}function getTableColumnsWidths(o){return getTableColumnElements(o).map(a=>a.getAttribute("columnWidth"))}function translateColSpanAttribute(o,a){return getTableColumnElements(o).reduce((s,l)=>{const c=l.getAttribute("columnWidth"),u=l.getAttribute("colSpan");if(!u)return s.push(c),s;for(let d=0;d<u;d++)s.push(c);return a.removeAttribute("colSpan",l),s},[])}class TableUtils extends Plugin{static get pluginName(){return"TableUtils"}static get isOfficialPlugin(){return!0}init(){this.decorate("insertColumns"),this.decorate("insertRows")}getCellLocation(a){const n=a.parent,s=n.parent,l=s.getChildIndex(n),c=new TableWalker(s,{row:l});for(const{cell:u,row:d,column:h}of c)if(u===a)return{row:d,column:h};/* istanbul ignore next -- @preserve */}createTable(a,n){const s=a.createElement("table"),l=n.rows||2,c=n.columns||2;return createEmptyRows(a,s,0,l,c),n.headingRows&&updateNumericAttribute("headingRows",Math.min(n.headingRows,l),s,a,0),n.headingColumns&&updateNumericAttribute("headingColumns",Math.min(n.headingColumns,c),s,a,0),s}insertRows(a,n={}){const s=this.editor.model,l=n.at||0,c=n.rows||1,u=n.copyStructureFromAbove!==void 0,d=n.copyStructureFromAbove?l-1:l,h=this.getRows(a),f=this.getColumns(a);if(l>h)throw new CKEditorError("tableutils-insertrows-insert-out-of-range",this,{options:n});s.change(p=>{const g=a.getAttribute("headingRows")||0;if(g>l&&updateNumericAttribute("headingRows",g+c,a,p,0),!u&&(l===0||l===h)){createEmptyRows(p,a,l,c,f);return}const v=u?Math.max(l,d):l,b=new TableWalker(a,{endRow:v}),w=new Array(f).fill(1);for(const{row:x,column:S,cellHeight:E,cellWidth:T,cell:C}of b){const A=x+E-1,R=x<l&&l<=A,j=x<=d&&d<=A;R?(p.setAttribute("rowspan",E+c,C),w[S]=-T):u&&j&&(w[S]=T)}for(let x=0;x<c;x++){const S=p.createElement("tableRow");p.insert(S,a,l);for(let E=0;E<w.length;E++){const T=w[E],C=p.createPositionAt(S,"end");T>0&&createEmptyTableCell(p,C,T>1?{colspan:T}:void 0),E+=Math.abs(T)-1}}})}insertColumns(a,n={}){const s=this.editor.model,l=n.at||0,c=n.columns||1;s.change(u=>{const d=a.getAttribute("headingColumns");l<d&&u.setAttribute("headingColumns",d+c,a);const h=this.getColumns(a);if(l===0||h===l){for(const p of a.getChildren())p.is("element","tableRow")&&createCells(c,u,u.createPositionAt(p,l?"end":0));return}const f=new TableWalker(a,{column:l,includeAllSlots:!0});for(const p of f){const{row:g,cell:v,cellAnchorColumn:b,cellAnchorRow:w,cellWidth:x,cellHeight:S}=p;if(b<l){u.setAttribute("colspan",x+c,v);const E=w+S-1;for(let T=g;T<=E;T++)f.skipRow(T)}else createCells(c,u,p.getPositionBefore())}})}removeRows(a,n){const s=this.editor.model,l=n.rows||1,c=this.getRows(a),u=n.at,d=u+l-1;if(d>c-1)throw new CKEditorError("tableutils-removerows-row-index-out-of-range",this,{table:a,options:n});s.change(h=>{const f={first:u,last:d},{cellsToMove:p,cellsToTrim:g}=getCellsToMoveAndTrimOnRemoveRow(a,f);if(p.size){const v=d+1;moveCellsToRow(a,v,p,h)}for(let v=d;v>=u;v--)h.remove(a.getChild(v));for(const{rowspan:v,cell:b}of g)updateNumericAttribute("rowspan",v,b,h);updateHeadingRows(a,f,h),removeEmptyColumns(a,this)||removeEmptyRows(a,this)})}removeColumns(a,n){const s=this.editor.model,l=n.at,c=n.columns||1,u=n.at+c-1;s.change(d=>{adjustHeadingColumns(a,{first:l,last:u},d);const h=getTableColumnElements(a);for(let f=u;f>=l;f--){for(const{cell:p,column:g,cellWidth:v}of[...new TableWalker(a)])g<=f&&v>1&&g+v>f?updateNumericAttribute("colspan",v-1,p,d):g===f&&d.remove(p);if(h[f]){const p=f===0?h[1]:h[f-1],g=parseFloat(h[f].getAttribute("columnWidth")),v=parseFloat(p.getAttribute("columnWidth"));d.remove(h[f]),d.setAttribute("columnWidth",g+v+"%",p)}}removeEmptyRows(a,this)||removeEmptyColumns(a,this)})}splitCellVertically(a,n=2){const s=this.editor.model,c=a.parent.parent,u=parseInt(a.getAttribute("rowspan")||"1"),d=parseInt(a.getAttribute("colspan")||"1");s.change(h=>{if(d>1){const{newCellsSpan:f,updatedSpan:p}=breakSpanEvenly(d,n);updateNumericAttribute("colspan",p,a,h);const g={};f>1&&(g.colspan=f),u>1&&(g.rowspan=u);const v=d>n?n-1:d-1;createCells(v,h,h.createPositionAfter(a),g)}if(d<n){const f=n-d,p=[...new TableWalker(c)],{column:g}=p.find(({cell:x})=>x===a),v=p.filter(({cell:x,cellWidth:S,column:E})=>{const T=x!==a&&E===g,C=E<g&&E+S>g;return T||C});for(const{cell:x,cellWidth:S}of v)h.setAttribute("colspan",S+f,x);const b={};u>1&&(b.rowspan=u),createCells(f,h,h.createPositionAfter(a),b);const w=c.getAttribute("headingColumns")||0;w>g&&updateNumericAttribute("headingColumns",w+f,c,h)}})}splitCellHorizontally(a,n=2){const s=this.editor.model,l=a.parent,c=l.parent,u=c.getChildIndex(l),d=parseInt(a.getAttribute("rowspan")||"1"),h=parseInt(a.getAttribute("colspan")||"1");s.change(f=>{if(d>1){const p=[...new TableWalker(c,{startRow:u,endRow:u+d-1,includeAllSlots:!0})],{newCellsSpan:g,updatedSpan:v}=breakSpanEvenly(d,n);updateNumericAttribute("rowspan",v,a,f);const{column:b}=p.find(({cell:S})=>S===a),w={};g>1&&(w.rowspan=g),h>1&&(w.colspan=h);let x=0;for(const S of p){const{column:E,row:T}=S,C=T>=u+v,A=E===b;x>=g&&A&&(x=0),C&&A&&(x||createCells(1,f,S.getPositionBefore(),w),x++)}}if(d<n){const p=n-d,g=[...new TableWalker(c,{startRow:0,endRow:u})];for(const{cell:w,cellHeight:x,row:S}of g)if(w!==a&&S+x>u){const E=x+p;f.setAttribute("rowspan",E,w)}const v={};h>1&&(v.colspan=h),createEmptyRows(f,c,u+1,p,1,v);const b=c.getAttribute("headingRows")||0;b>u&&updateNumericAttribute("headingRows",b+p,c,f)}})}getColumns(a){return[...a.getChild(0).getChildren()].filter(s=>s.is("element","tableCell")).reduce((s,l)=>{const c=parseInt(l.getAttribute("colspan")||"1");return s+c},0)}getRows(a){return Array.from(a.getChildren()).reduce((n,s)=>s.is("element","tableRow")?n+1:n,0)}createTableWalker(a,n={}){return new TableWalker(a,n)}getSelectedTableCells(a){const n=[];for(const s of this.sortRanges(a.getRanges())){const l=s.getContainedElement();l&&l.is("element","tableCell")&&n.push(l)}return n}getTableCellsContainingSelection(a){const n=[];for(const s of a.getRanges()){const l=s.start.findAncestor("tableCell");l&&n.push(l)}return n}getSelectionAffectedTableCells(a){const n=this.getSelectedTableCells(a);return n.length?n:this.getTableCellsContainingSelection(a)}getRowIndexes(a){const n=a.map(s=>s.parent.index);return this._getFirstLastIndexesObject(n)}getColumnIndexes(a){const n=a[0].findAncestor("table"),l=[...new TableWalker(n)].filter(c=>a.includes(c.cell)).map(c=>c.column);return this._getFirstLastIndexesObject(l)}isSelectionRectangular(a){if(a.length<2||!this._areCellInTheSameTableSection(a))return!1;const n=new Set,s=new Set;let l=0;for(const u of a){const{row:d,column:h}=this.getCellLocation(u),f=parseInt(u.getAttribute("rowspan"))||1,p=parseInt(u.getAttribute("colspan"))||1;n.add(d),s.add(h),f>1&&n.add(d+f-1),p>1&&s.add(h+p-1),l+=f*p}return getBiggestRectangleArea(n,s)==l}sortRanges(a){return Array.from(a).sort(compareRangeOrder)}_getFirstLastIndexesObject(a){const n=a.sort((c,u)=>c-u),s=n[0],l=n[n.length-1];return{first:s,last:l}}_areCellInTheSameTableSection(a){const n=a[0].findAncestor("table"),s=this.getRowIndexes(a),l=parseInt(n.getAttribute("headingRows"))||0;if(!this._areIndexesInSameSection(s,l))return!1;const c=this.getColumnIndexes(a),u=parseInt(n.getAttribute("headingColumns"))||0;return this._areIndexesInSameSection(c,u)}_areIndexesInSameSection({first:a,last:n},s){const l=a<s,c=n<s;return l===c}}function createEmptyRows(o,a,n,s,l,c={}){for(let u=0;u<s;u++){const d=o.createElement("tableRow");o.insert(d,a,n),createCells(l,o,o.createPositionAt(d,"end"),c)}}function createCells(o,a,n,s={}){for(let l=0;l<o;l++)createEmptyTableCell(a,n,s)}function breakSpanEvenly(o,a){if(o<a)return{newCellsSpan:1,updatedSpan:1};const n=Math.floor(o/a),s=o-n*a+n;return{newCellsSpan:n,updatedSpan:s}}function adjustHeadingColumns(o,a,n){const s=o.getAttribute("headingColumns")||0;if(s&&a.first<s){const l=Math.min(s-1,a.last)-a.first+1;n.setAttribute("headingColumns",s-l,o)}}function updateHeadingRows(o,{first:a,last:n},s){const l=o.getAttribute("headingRows")||0;if(a<l){const c=n<l?l-(n-a+1):a;updateNumericAttribute("headingRows",c,o,s,0)}}function getCellsToMoveAndTrimOnRemoveRow(o,{first:a,last:n}){const s=new Map,l=[];for(const{row:c,column:u,cellHeight:d,cell:h}of new TableWalker(o,{endRow:n})){const f=c+d-1;if(c>=a&&c<=n&&f>n){const v=n-c+1,b=d-v;s.set(u,{cell:h,rowspan:b})}if(c<a&&f>=a){let v;f>=n?v=n-a+1:v=f-a+1,l.push({cell:h,rowspan:d-v})}}return{cellsToMove:s,cellsToTrim:l}}function moveCellsToRow(o,a,n,s){const c=[...new TableWalker(o,{includeAllSlots:!0,row:a})],u=o.getChild(a);let d;for(const{column:h,cell:f,isAnchor:p}of c)if(n.has(h)){const{cell:g,rowspan:v}=n.get(h),b=d?s.createPositionAfter(d):s.createPositionAt(u,0);s.move(s.createRangeOn(g),b),updateNumericAttribute("rowspan",v,g,s),d=g}else p&&(d=f)}function compareRangeOrder(o,a){const n=o.start,s=a.start;return n.isBefore(s)?-1:1}function getBiggestRectangleArea(o,a){const n=Array.from(o.values()),s=Array.from(a.values()),l=Math.max(...n),c=Math.min(...n),u=Math.max(...s),d=Math.min(...s);return(l-c+1)*(u-d+1)}class MergeCellsCommand extends Command{refresh(){const a=this.editor.plugins.get(TableUtils),n=a.getSelectedTableCells(this.editor.model.document.selection);this.isEnabled=a.isSelectionRectangular(n)}execute(){const a=this.editor.model,n=this.editor.plugins.get(TableUtils);a.change(s=>{const l=n.getSelectedTableCells(a.document.selection),c=l.shift(),{mergeWidth:u,mergeHeight:d}=getMergeDimensions(c,l,n);updateNumericAttribute("colspan",u,c,s),updateNumericAttribute("rowspan",d,c,s);for(const f of l)mergeTableCells(f,c,s);const h=c.findAncestor("table");removeEmptyRowsColumns(h,n),s.setSelection(c,"in")})}}function mergeTableCells(o,a,n){isEmpty$1(o)||(isEmpty$1(a)&&n.remove(n.createRangeIn(a)),n.move(n.createRangeIn(o),n.createPositionAt(a,"end"))),n.remove(o)}function isEmpty$1(o){const a=o.getChild(0);return o.childCount==1&&a.is("element","paragraph")&&a.isEmpty}function getMergeDimensions(o,a,n){let s=0,l=0;for(const f of a){const{row:p,column:g}=n.getCellLocation(f);s=getMaxOffset(f,g,s,"colspan"),l=getMaxOffset(f,p,l,"rowspan")}const{row:c,column:u}=n.getCellLocation(o),d=s-u,h=l-c;return{mergeWidth:d,mergeHeight:h}}function getMaxOffset(o,a,n,s){const l=parseInt(o.getAttribute(s)||"1");return Math.max(n,a+l)}class SelectRowCommand extends Command{constructor(a){super(a),this.affectsData=!1}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length>0}execute(){const a=this.editor.model,n=this.editor.plugins.get("TableUtils"),s=n.getSelectionAffectedTableCells(a.document.selection),l=n.getRowIndexes(s),c=s[0].findAncestor("table"),u=[];for(let d=l.first;d<=l.last;d++)for(const h of c.getChild(d).getChildren())u.push(a.createRangeOn(h));a.change(d=>{d.setSelection(u)})}}class SelectColumnCommand extends Command{constructor(a){super(a),this.affectsData=!1}refresh(){const n=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(this.editor.model.document.selection);this.isEnabled=n.length>0}execute(){const a=this.editor.plugins.get("TableUtils"),n=this.editor.model,s=a.getSelectionAffectedTableCells(n.document.selection),l=s[0],c=s.pop(),u=l.findAncestor("table"),d=a.getCellLocation(l),h=a.getCellLocation(c),f=Math.min(d.column,h.column),p=Math.max(d.column,h.column),g=[];for(const v of new TableWalker(u,{startColumn:f,endColumn:p}))g.push(n.createRangeOn(v.cell));n.change(v=>{v.setSelection(g)})}}function injectTableLayoutPostFixer(o){o.document.registerPostFixer(a=>tableLayoutPostFixer(a,o))}function tableLayoutPostFixer(o,a){const n=a.document.differ.getChanges();let s=!1;const l=new Set;for(const c of n){let u=null;c.type=="insert"&&c.name=="table"&&(u=c.position.nodeAfter),(c.type=="insert"||c.type=="remove")&&(c.name=="tableRow"||c.name=="tableCell")&&(u=c.position.findAncestor("table")),isTableAttributeEntry(c)&&(u=c.range.start.findAncestor("table")),u&&!l.has(u)&&(s=fixTableCellsRowspan(u,o)||s,s=fixTableRowsSizes(u,o)||s,l.add(u))}return s}function fixTableCellsRowspan(o,a){let n=!1;const s=findCellsToTrim(o);if(s.length){n=!0;for(const l of s)updateNumericAttribute("rowspan",l.rowspan,l.cell,a,1)}return n}function fixTableRowsSizes(o,a){let n=!1;const s=getChildrenLengths(o),l=[];for(const[h,f]of s.entries())!f&&o.getChild(h).is("element","tableRow")&&l.push(h);if(l.length){n=!0;for(const h of l.reverse())a.remove(o.getChild(h)),s.splice(h,1)}const c=s.filter((h,f)=>o.getChild(f).is("element","tableRow")),u=c[0];if(!c.every(h=>h===u)){const h=c.reduce((f,p)=>p>f?p:f,0);for(const[f,p]of c.entries()){const g=h-p;if(g){for(let v=0;v<g;v++)createEmptyTableCell(a,a.createPositionAt(o.getChild(f),"end"));n=!0}}}return n}function findCellsToTrim(o){const a=parseInt(o.getAttribute("headingRows")||"0"),n=Array.from(o.getChildren()).reduce((l,c)=>c.is("element","tableRow")?l+1:l,0),s=[];for(const{row:l,cell:c,cellHeight:u}of new TableWalker(o)){if(u<2)continue;const h=l<a?a:n;if(l+u>h){const f=h-l;s.push({cell:c,rowspan:f})}}return s}function getChildrenLengths(o){const a=new Array(o.childCount).fill(0);for(const{rowIndex:n}of new TableWalker(o,{includeAllSlots:!0}))a[n]++;return a}function isTableAttributeEntry(o){if(o.type!=="attribute")return!1;const a=o.attributeKey;return a==="headingRows"||a==="colspan"||a==="rowspan"}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function injectTableCellParagraphPostFixer(o){o.document.registerPostFixer(a=>tableCellContentsPostFixer(a,o))}function tableCellContentsPostFixer(o,a){const n=a.document.differ.getChanges();let s=!1;for(const l of n)l.type=="insert"&&l.name=="table"&&(s=fixTable(l.position.nodeAfter,o)||s),l.type=="insert"&&l.name=="tableRow"&&(s=fixTableRow(l.position.nodeAfter,o)||s),l.type=="insert"&&l.name=="tableCell"&&(s=fixTableCellContent(l.position.nodeAfter,o)||s),(l.type=="remove"||l.type=="insert")&&checkTableCellChange(l)&&(s=fixTableCellContent(l.position.parent,o)||s);return s}function fixTable(o,a){let n=!1;for(const s of o.getChildren())s.is("element","tableRow")&&(n=fixTableRow(s,a)||n);return n}function fixTableRow(o,a){let n=!1;for(const s of o.getChildren())n=fixTableCellContent(s,a)||n;return n}function fixTableCellContent(o,a){if(o.childCount==0)return a.insertElement("paragraph",o),!0;const n=Array.from(o.getChildren()).filter(s=>s.is("$text"));for(const s of n)a.wrap(a.createRangeOn(s),"paragraph");return!!n.length}function checkTableCellChange(o){return o.position.parent.is("element","tableCell")?o.type=="insert"&&o.name=="$text"||o.type=="remove":!1}function tableHeadingsRefreshHandler(o,a){const n=o.document.differ;for(const s of n.getChanges()){let l,c=!1;if(s.type=="attribute"){const f=s.range.start.nodeAfter;if(!f||!f.is("element","table")||s.attributeKey!="headingRows"&&s.attributeKey!="headingColumns")continue;l=f,c=s.attributeKey=="headingRows"}else(s.name=="tableRow"||s.name=="tableCell")&&(l=s.position.findAncestor("table"),c=s.name=="tableRow");if(!l)continue;const u=l.getAttribute("headingRows")||0,d=l.getAttribute("headingColumns")||0,h=new TableWalker(l);for(const f of h){const g=f.row<u||f.column<d?"th":"td",v=a.mapper.toViewElement(f.cell);v&&v.is("element")&&v.name!=g&&a.reconvertItem(c?f.cell.parent:f.cell)}}}function tableCellRefreshHandler(o,a){const n=o.document.differ,s=new Set;for(const l of n.getChanges()){const c=l.type=="attribute"?l.range.start.parent:l.position.parent;c.is("element","tableCell")&&s.add(c)}for(const l of s.values()){const c=Array.from(l.getChildren()).filter(u=>shouldRefresh(u,a.mapper));for(const u of c)a.reconvertItem(u)}}function shouldRefresh(o,a){if(!o.is("element","paragraph"))return!1;const n=a.toViewElement(o);return n?isSingleParagraphWithoutAttributes(o)!==n.is("element","span"):!1}class TableEditing extends Plugin{constructor(n){super(n);M(this,"_additionalSlots");this._additionalSlots=[]}static get pluginName(){return"TableEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils]}init(){const n=this.editor,s=n.model,l=s.schema,c=n.conversion,u=n.plugins.get(TableUtils);l.register("table",{inheritAllFrom:"$blockObject",allowAttributes:["headingRows","headingColumns"]}),l.register("tableRow",{allowIn:"table",isLimit:!0}),l.register("tableCell",{allowContentOf:"$container",allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isLimit:!0,isSelectable:!0}),c.for("upcast").add(upcastTableFigure()),c.for("upcast").add(upcastTable()),c.for("editingDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(u,{asWidget:!0,additionalSlots:this._additionalSlots})}),c.for("dataDowncast").elementToStructure({model:{name:"table",attributes:["headingRows"]},view:downcastTable(u,{additionalSlots:this._additionalSlots})}),c.for("upcast").elementToElement({model:"tableRow",view:"tr"}),c.for("upcast").add(skipEmptyTableRow()),c.for("downcast").elementToElement({model:"tableRow",view:downcastRow()}),c.for("upcast").elementToElement({model:"tableCell",view:"td"}),c.for("upcast").elementToElement({model:"tableCell",view:"th"}),c.for("upcast").add(ensureParagraphInTableCell("td")),c.for("upcast").add(ensureParagraphInTableCell("th")),c.for("editingDowncast").elementToElement({model:"tableCell",view:downcastCell({asWidget:!0})}),c.for("dataDowncast").elementToElement({model:"tableCell",view:downcastCell()}),c.for("editingDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell({asWidget:!0}),converterPriority:"high"}),c.for("dataDowncast").elementToElement({model:"paragraph",view:convertParagraphInTableCell(),converterPriority:"high"}),c.for("downcast").attributeToAttribute({model:"colspan",view:"colspan"}),c.for("upcast").attributeToAttribute({model:{key:"colspan",value:upcastCellSpan("colspan")},view:"colspan"}),c.for("downcast").attributeToAttribute({model:"rowspan",view:"rowspan"}),c.for("upcast").attributeToAttribute({model:{key:"rowspan",value:upcastCellSpan("rowspan")},view:"rowspan"}),n.config.define("table.defaultHeadings.rows",0),n.config.define("table.defaultHeadings.columns",0),n.commands.add("insertTable",new InsertTableCommand(n)),n.commands.add("insertTableRowAbove",new InsertRowCommand(n,{order:"above"})),n.commands.add("insertTableRowBelow",new InsertRowCommand(n,{order:"below"})),n.commands.add("insertTableColumnLeft",new InsertColumnCommand(n,{order:"left"})),n.commands.add("insertTableColumnRight",new InsertColumnCommand(n,{order:"right"})),n.commands.add("removeTableRow",new RemoveRowCommand(n)),n.commands.add("removeTableColumn",new RemoveColumnCommand(n)),n.commands.add("splitTableCellVertically",new SplitCellCommand(n,{direction:"vertically"})),n.commands.add("splitTableCellHorizontally",new SplitCellCommand(n,{direction:"horizontally"})),n.commands.add("mergeTableCells",new MergeCellsCommand(n)),n.commands.add("mergeTableCellRight",new MergeCellCommand(n,{direction:"right"})),n.commands.add("mergeTableCellLeft",new MergeCellCommand(n,{direction:"left"})),n.commands.add("mergeTableCellDown",new MergeCellCommand(n,{direction:"down"})),n.commands.add("mergeTableCellUp",new MergeCellCommand(n,{direction:"up"})),n.commands.add("setTableColumnHeader",new SetHeaderColumnCommand(n)),n.commands.add("setTableRowHeader",new SetHeaderRowCommand(n)),n.commands.add("selectTableRow",new SelectRowCommand(n)),n.commands.add("selectTableColumn",new SelectColumnCommand(n)),injectTableLayoutPostFixer(s),injectTableCellParagraphPostFixer(s),this.listenTo(s.document,"change:data",()=>{tableHeadingsRefreshHandler(s,n.editing),tableCellRefreshHandler(s,n.editing)})}registerAdditionalSlot(n){this._additionalSlots.push(n)}}function upcastCellSpan(o){return a=>{const n=parseInt(a.getAttribute(o));return Number.isNaN(n)||n<=0?null:n}}class InsertTableView extends View$1{constructor(n){super(n);M(this,"items");M(this,"keystrokes");M(this,"focusTracker");const s=this.bindTemplate;this.items=this._createGridCollection(),this.keystrokes=new KeystrokeHandler,this.focusTracker=new FocusTracker,this.set("rows",0),this.set("columns",0),this.bind("label").to(this,"columns",this,"rows",(l,c)=>`${c} × ${l}`),this.setTemplate({tag:"div",attributes:{class:["ck"]},children:[{tag:"div",attributes:{class:["ck-insert-table-dropdown__grid"]},on:{"mouseover@.ck-insert-table-dropdown-grid-box":s.to("boxover")},children:this.items},{tag:"div",attributes:{class:["ck","ck-insert-table-dropdown__label"],"aria-hidden":!0},children:[{text:s.to("label")}]}],on:{mousedown:s.to(l=>{l.preventDefault()}),click:s.to(()=>{this.fire("execute")})}}),this.on("boxover",(l,c)=>{const{row:u,column:d}=c.target.dataset;this.items.get((parseInt(u,10)-1)*10+(parseInt(d,10)-1)).focus()}),this.focusTracker.on("change:focusedElement",(l,c,u)=>{if(!u)return;const{row:d,column:h}=u.dataset;this.set({rows:parseInt(d),columns:parseInt(h)})}),this.on("change:columns",()=>this._highlightGridBoxes()),this.on("change:rows",()=>this._highlightGridBoxes())}render(){super.render(),addKeyboardHandlingForGrid({keystrokeHandler:this.keystrokes,focusTracker:this.focusTracker,gridItems:this.items,numberOfColumns:10,uiLanguageDirection:this.locale&&this.locale.uiLanguageDirection});for(const n of this.items)this.focusTracker.add(n.element);this.keystrokes.listenTo(this.element)}reset(){this.set({rows:1,columns:1})}focus(){this.items.get(0).focus()}focusLast(){this.items.get(0).focus()}_highlightGridBoxes(){const n=this.rows,s=this.columns;this.items.map((l,c)=>{const u=Math.floor(c/10),d=c%10,h=u<n&&d<s;l.set("isOn",h)})}_createGridButton(n,s,l,c){const u=new ButtonView(n);return u.set({label:c,class:"ck-insert-table-dropdown-grid-box"}),u.extendTemplate({attributes:{"data-row":s,"data-column":l}}),u}_createGridCollection(){const n=[];for(let s=0;s<100;s++){const l=Math.floor(s/10),c=s%10,u=`${l+1} × ${c+1}`;n.push(this._createGridButton(this.locale,l+1,c+1,u))}return this.createCollection(n)}}var tableColumnIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>',tableRowIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>',tableMergeCellIcon='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';class TableUI extends Plugin{static get pluginName(){return"TableUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=this.editor.t,l=a.locale.contentLanguageDirection==="ltr";a.ui.componentFactory.add("insertTable",c=>{const u=a.commands.get("insertTable"),d=createDropdown(c);d.bind("isEnabled").to(u),d.buttonView.set({icon:icons.table,label:n("Insert table"),tooltip:!0});let h;return d.on("change:isOpen",()=>{h||(h=new InsertTableView(c),d.panelView.children.add(h),h.delegate("execute").to(d),d.on("execute",()=>{a.execute("insertTable",{rows:h.rows,columns:h.columns}),a.editing.view.focus()}))}),d}),a.ui.componentFactory.add("menuBar:insertTable",c=>{const u=a.commands.get("insertTable"),d=new MenuBarMenuView(c),h=new InsertTableView(c);return h.delegate("execute").to(d),d.on("change:isOpen",(f,p,g)=>{g||h.reset()}),h.on("execute",()=>{a.execute("insertTable",{rows:h.rows,columns:h.columns}),a.editing.view.focus()}),d.buttonView.set({label:n("Table"),icon:icons.table}),d.panelView.children.add(h),d.bind("isEnabled").to(u),d}),a.ui.componentFactory.add("tableColumn",c=>{const u=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:n("Header column"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:l?"insertTableColumnLeft":"insertTableColumnRight",label:n("Insert column left")}},{type:"button",model:{commandName:l?"insertTableColumnRight":"insertTableColumnLeft",label:n("Insert column right")}},{type:"button",model:{commandName:"removeTableColumn",label:n("Delete column")}},{type:"button",model:{commandName:"selectTableColumn",label:n("Select column")}}];return this._prepareDropdown(n("Column"),tableColumnIcon,u,c)}),a.ui.componentFactory.add("tableRow",c=>{const u=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:n("Header row"),bindIsOn:!0}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowAbove",label:n("Insert row above")}},{type:"button",model:{commandName:"insertTableRowBelow",label:n("Insert row below")}},{type:"button",model:{commandName:"removeTableRow",label:n("Delete row")}},{type:"button",model:{commandName:"selectTableRow",label:n("Select row")}}];return this._prepareDropdown(n("Row"),tableRowIcon,u,c)}),a.ui.componentFactory.add("mergeTableCells",c=>{const u=[{type:"button",model:{commandName:"mergeTableCellUp",label:n("Merge cell up")}},{type:"button",model:{commandName:l?"mergeTableCellRight":"mergeTableCellLeft",label:n("Merge cell right")}},{type:"button",model:{commandName:"mergeTableCellDown",label:n("Merge cell down")}},{type:"button",model:{commandName:l?"mergeTableCellLeft":"mergeTableCellRight",label:n("Merge cell left")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:n("Split cell vertically")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:n("Split cell horizontally")}}];return this._prepareMergeSplitButtonDropdown(n("Merge cells"),tableMergeCellIcon,u,c)})}_prepareDropdown(a,n,s,l){const c=this.editor,u=createDropdown(l),d=this._fillDropdownWithListOptions(u,s);return u.buttonView.set({label:a,icon:n,tooltip:!0}),u.bind("isEnabled").toMany(d,"isEnabled",(...h)=>h.some(f=>f)),this.listenTo(u,"execute",h=>{c.execute(h.source.commandName),h.source instanceof SwitchButtonView||c.editing.view.focus()}),u}_prepareMergeSplitButtonDropdown(a,n,s,l){const c=this.editor,u=createDropdown(l,SplitButtonView),d="mergeTableCells",h=c.commands.get(d),f=this._fillDropdownWithListOptions(u,s);return u.buttonView.set({label:a,icon:n,tooltip:!0,isEnabled:!0}),u.bind("isEnabled").toMany([h,...f],"isEnabled",(...p)=>p.some(g=>g)),this.listenTo(u.buttonView,"execute",()=>{c.execute(d),c.editing.view.focus()}),this.listenTo(u,"execute",p=>{c.execute(p.source.commandName),c.editing.view.focus()}),u}_fillDropdownWithListOptions(a,n){const s=this.editor,l=[],c=new Collection;for(const u of n)addListOption(u,s,l,c);return addListToDropdown(a,c),l}}function addListOption(o,a,n,s){if(o.type==="button"||o.type==="switchbutton"){const l=o.model=new Model$1(o.model),{commandName:c,bindIsOn:u}=o.model,d=a.commands.get(c);n.push(d),l.set({commandName:c}),l.bind("isEnabled").to(d),u&&l.bind("isOn").to(d,"value"),l.set({withText:!0})}s.add(o)}class TableSelection extends Plugin{static get pluginName(){return"TableSelection"}static get isOfficialPlugin(){return!0}static get requires(){return[TableUtils,TableUtils]}init(){const a=this.editor,n=a.model,s=a.editing.view;this.listenTo(n,"deleteContent",(l,c)=>this._handleDeleteContent(l,c),{priority:"high"}),this.listenTo(s.document,"insertText",(l,c)=>this._handleInsertTextEvent(l,c),{priority:"high"}),this._defineSelectionConverter(),this._enablePluginDisabling()}getSelectedTableCells(){const a=this.editor.plugins.get(TableUtils),n=this.editor.model.document.selection,s=a.getSelectedTableCells(n);return s.length==0?null:s}getSelectionAsFragment(){const a=this.editor.plugins.get(TableUtils),n=this.getSelectedTableCells();return n?this.editor.model.change(s=>{const l=s.createDocumentFragment(),{first:c,last:u}=a.getColumnIndexes(n),{first:d,last:h}=a.getRowIndexes(n),f=n[0].findAncestor("table");let p=h,g=u;if(a.isSelectionRectangular(n)){const w={firstColumn:c,lastColumn:u,firstRow:d,lastRow:h};p=adjustLastRowIndex(f,w),g=adjustLastColumnIndex(f,w)}const b=cropTableToDimensions(f,{startRow:d,startColumn:c,endRow:p,endColumn:g},s);return s.insert(b,l,0),l}):null}setCellSelection(a,n){const s=this._getCellsToSelect(a,n);this.editor.model.change(l=>{l.setSelection(s.cells.map(c=>l.createRangeOn(c)),{backward:s.backward})})}getFocusCell(){const s=[...this.editor.model.document.selection.getRanges()].pop().getContainedElement();return s&&s.is("element","tableCell")?s:null}getAnchorCell(){const a=this.editor.model.document.selection,s=first(a.getRanges()).getContainedElement();return s&&s.is("element","tableCell")?s:null}_defineSelectionConverter(){const a=this.editor,n=new Set;a.conversion.for("editingDowncast").add(l=>l.on("selection",(c,u,d)=>{const h=d.writer;s(h);const f=this.getSelectedTableCells();if(!f)return;for(const g of f){const v=d.mapper.toViewElement(g);h.addClass("ck-editor__editable_selected",v),n.add(v)}const p=d.mapper.toViewElement(f[f.length-1]);h.setSelection(p,0)},{priority:"lowest"}));function s(l){for(const c of n)l.removeClass("ck-editor__editable_selected",c);n.clear()}}_enablePluginDisabling(){const a=this.editor;this.on("change:isEnabled",()=>{if(!this.isEnabled){const n=this.getSelectedTableCells();if(!n)return;a.model.change(s=>{const l=s.createPositionAt(n[0],0),c=a.model.schema.getNearestSelectionRange(l);s.setSelection(c)})}})}_handleDeleteContent(a,n){const s=this.editor.plugins.get(TableUtils),l=n[0],c=n[1],u=this.editor.model,d=!c||c.direction=="backward",h=s.getSelectedTableCells(l);h.length&&(a.stop(),u.change(f=>{const p=h[d?h.length-1:0];u.change(v=>{for(const b of h)u.deleteContent(v.createSelection(b,"in"))});const g=u.schema.getNearestSelectionRange(f.createPositionAt(p,0));l.is("documentSelection")?f.setSelection(g):l.setTo(g)}))}_handleInsertTextEvent(a,n){const s=this.editor,l=this.getSelectedTableCells();if(!l)return;const c=s.editing.view,u=s.editing.mapper,d=l.map(h=>c.createRangeOn(u.toViewElement(h)));n.selection=c.createSelection(d)}_getCellsToSelect(a,n){const s=this.editor.plugins.get("TableUtils"),l=s.getCellLocation(a),c=s.getCellLocation(n),u=Math.min(l.row,c.row),d=Math.max(l.row,c.row),h=Math.min(l.column,c.column),f=Math.max(l.column,c.column),p=new Array(d-u+1).fill(null).map(()=>[]),g={startRow:u,endRow:d,startColumn:h,endColumn:f};for(const{row:w,cell:x}of new TableWalker(a.findAncestor("table"),g))p[w-u].push(x);const v=c.row<l.row,b=c.column<l.column;return v&&p.reverse(),b&&p.forEach(w=>w.reverse()),{cells:p.flat(),backward:v||b}}}class TableClipboard extends Plugin{static get pluginName(){return"TableClipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[ClipboardMarkersUtils,ClipboardPipeline,TableSelection,TableUtils]}init(){const a=this.editor,n=a.editing.view.document;this.listenTo(n,"copy",(s,l)=>this._onCopyCut(s,l)),this.listenTo(n,"cut",(s,l)=>this._onCopyCut(s,l)),this.listenTo(a.model,"insertContent",(s,[l,c])=>this._onInsertContent(s,l,c),{priority:"high"}),this.decorate("_replaceTableSlotCell")}_onCopyCut(a,n){const s=this.editor.editing.view,l=this.editor.plugins.get(TableSelection),c=this.editor.plugins.get(ClipboardMarkersUtils);l.getSelectedTableCells()&&(a.name=="cut"&&!this.editor.model.canEditAt(this.editor.model.document.selection)||(n.preventDefault(),a.stop(),this.editor.model.enqueueChange({isUndoable:a.name==="cut"},()=>{const u=c._copySelectedFragmentWithMarkers(a.name,this.editor.model.document.selection,()=>l.getSelectionAsFragment());s.document.fire("clipboardOutput",{dataTransfer:n.dataTransfer,content:this.editor.data.toView(u),method:a.name})})))}_onInsertContent(a,n,s){if(s&&!s.is("documentSelection"))return;const l=this.editor.model,c=this.editor.plugins.get(TableUtils),u=this.editor.plugins.get(ClipboardMarkersUtils),d=this.getTableIfOnlyTableInContent(n,l);if(!d)return;const h=c.getSelectionAffectedTableCells(l.document.selection);if(!h.length){removeEmptyRowsColumns(d,c);return}a.stop(),n.is("documentFragment")?u._pasteMarkersIntoTransformedElement(n.markers,f=>this._replaceSelectedCells(d,h,f)):this.editor.model.change(f=>{this._replaceSelectedCells(d,h,f)})}_replaceSelectedCells(a,n,s){const l=this.editor.plugins.get(TableUtils),c={width:l.getColumns(a),height:l.getRows(a)},u=prepareTableForPasting(n,c,s,l),d=u.lastRow-u.firstRow+1,h=u.lastColumn-u.firstColumn+1,f={startRow:0,startColumn:0,endRow:Math.min(d,c.height)-1,endColumn:Math.min(h,c.width)-1};a=cropTableToDimensions(a,f,s);const p=n[0].findAncestor("table"),g=this._replaceSelectedCellsWithPasted(a,c,p,u,s);if(this.editor.plugins.get("TableSelection").isEnabled){const v=l.sortRanges(g.map(b=>s.createRangeOn(b)));s.setSelection(v)}else s.setSelection(g[0],0);return p}_replaceSelectedCellsWithPasted(a,n,s,l,c){const{width:u,height:d}=n,h=createLocationMap(a,u,d),f=[...new TableWalker(s,{startRow:l.firstRow,endRow:l.lastRow,startColumn:l.firstColumn,endColumn:l.lastColumn,includeAllSlots:!0})],p=[];let g;for(const S of f){const{row:E,column:T}=S;T===l.firstColumn&&(g=S.getPositionBefore());const C=E-l.firstRow,A=T-l.firstColumn,R=h[C%d][A%u],j=R?c.cloneElement(R):null,D=this._replaceTableSlotCell(S,j,g,c);D&&(trimTableCellIfNeeded(D,E,T,l.lastRow,l.lastColumn,c),p.push(D),g=c.createPositionAfter(D))}const v=parseInt(s.getAttribute("headingRows")||"0"),b=parseInt(s.getAttribute("headingColumns")||"0"),w=l.firstRow<v&&v<=l.lastRow,x=l.firstColumn<b&&b<=l.lastColumn;if(w){const S={first:l.firstColumn,last:l.lastColumn},E=doHorizontalSplit(s,v,S,c,l.firstRow);p.push(...E)}if(x){const S={first:l.firstRow,last:l.lastRow},E=doVerticalSplit(s,b,S,c);p.push(...E)}return p}_replaceTableSlotCell(a,n,s,l){const{cell:c,isAnchor:u}=a;return u&&l.remove(c),n?(l.insert(n,s),n):null}getTableIfOnlyTableInContent(a,n){if(!a.is("documentFragment")&&!a.is("element"))return null;if(a.is("element","table"))return a;if(a.childCount==1&&a.getChild(0).is("element","table"))return a.getChild(0);const s=n.createRangeIn(a);for(const l of s.getItems())if(l.is("element","table")){const c=n.createRange(s.start,n.createPositionBefore(l));if(n.hasContent(c,{ignoreWhitespaces:!0}))return null;const u=n.createRange(n.createPositionAfter(l),s.end);return n.hasContent(u,{ignoreWhitespaces:!0})?null:l}return null}}function prepareTableForPasting(o,a,n,s){const l=o[0].findAncestor("table"),c=s.getColumnIndexes(o),u=s.getRowIndexes(o),d={firstColumn:c.first,lastColumn:c.last,firstRow:u.first,lastRow:u.last},h=o.length===1;return h&&(d.lastRow+=a.height-1,d.lastColumn+=a.width-1,expandTableSize(l,d.lastRow+1,d.lastColumn+1,s)),h||!s.isSelectionRectangular(o)?splitCellsToRectangularSelection(l,d,n):(d.lastRow=adjustLastRowIndex(l,d),d.lastColumn=adjustLastColumnIndex(l,d)),d}function expandTableSize(o,a,n,s){const l=s.getColumns(o),c=s.getRows(o);n>l&&s.insertColumns(o,{at:l,columns:n-l}),a>c&&s.insertRows(o,{at:c,rows:a-c})}function createLocationMap(o,a,n){const s=new Array(n).fill(null).map(()=>new Array(a).fill(null));for(const{column:l,row:c,cell:u}of new TableWalker(o))s[c][l]=u;return s}function splitCellsToRectangularSelection(o,a,n){const{firstRow:s,lastRow:l,firstColumn:c,lastColumn:u}=a,d={first:s,last:l},h={first:c,last:u};doVerticalSplit(o,c,d,n),doVerticalSplit(o,u+1,d,n),doHorizontalSplit(o,s,h,n),doHorizontalSplit(o,l+1,h,n,s)}function doHorizontalSplit(o,a,n,s,l=0){return a<1?void 0:getVerticallyOverlappingCells(o,a,l).filter(({column:d,cellWidth:h})=>isAffectedBySelection(d,h,n)).map(({cell:d})=>splitHorizontally(d,a,s))}function doVerticalSplit(o,a,n,s){return a<1?void 0:getHorizontallyOverlappingCells(o,a).filter(({row:u,cellHeight:d})=>isAffectedBySelection(u,d,n)).map(({cell:u,column:d})=>splitVertically(u,d,a,s))}function isAffectedBySelection(o,a,n){const s=o+a-1,{first:l,last:c}=n,u=o>=l&&o<=c,d=o<l&&s>=l;return u||d}class TableKeyboard extends Plugin{static get pluginName(){return"TableKeyboard"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){const a=this.editor,s=a.editing.view.document,l=a.t;this.listenTo(s,"arrowKey",(...c)=>this._onArrowKey(...c),{context:"table"}),this.listenTo(s,"tab",(...c)=>this._handleTabOnSelectedTable(...c),{context:"figure"}),this.listenTo(s,"tab",(...c)=>this._handleTab(...c),{context:["th","td"]}),a.accessibility.addKeystrokeInfoGroup({id:"table",label:l("Keystrokes that can be used in a table cell"),keystrokes:[{label:l("Move the selection to the next cell"),keystroke:"Tab"},{label:l("Move the selection to the previous cell"),keystroke:"Shift+Tab"},{label:l("Insert a new table row (when in the last cell of a table)"),keystroke:"Tab"},{label:l("Navigate through the table"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]}]})}_handleTabOnSelectedTable(a,n){const s=this.editor,c=s.model.document.selection.getSelectedElement();!c||!c.is("element","table")||(n.preventDefault(),n.stopPropagation(),a.stop(),s.model.change(u=>{u.setSelection(u.createRangeIn(c.getChild(0).getChild(0)))}))}_handleTab(a,n){const s=this.editor,l=this.editor.plugins.get(TableUtils),c=this.editor.plugins.get("TableSelection"),u=s.model.document.selection,d=!n.shiftKey;let h=l.getTableCellsContainingSelection(u)[0];if(h||(h=c.getFocusCell()),!h)return;n.preventDefault(),n.stopPropagation(),a.stop();const f=h.parent,p=f.parent,g=p.getChildIndex(f),v=f.getChildIndex(h),b=v===0;if(!d&&b&&g===0){s.model.change(E=>{E.setSelection(E.createRangeOn(p))});return}const w=v===f.childCount-1,x=g===l.getRows(p)-1;if(d&&x&&w&&(s.execute("insertTableRowBelow"),g===l.getRows(p)-1)){s.model.change(E=>{E.setSelection(E.createRangeOn(p))});return}let S;if(d&&w)S=p.getChild(g+1).getChild(0);else if(!d&&b){const E=p.getChild(g-1);S=E.getChild(E.childCount-1)}else S=f.getChild(v+(d?1:-1));s.model.change(E=>{E.setSelection(E.createRangeIn(S))})}_onArrowKey(a,n){const s=this.editor,l=n.keyCode,c=getLocalizedArrowKeyCodeDirection(l,s.locale.contentLanguageDirection);this._handleArrowKeys(c,n.shiftKey)&&(n.preventDefault(),n.stopPropagation(),a.stop())}_handleArrowKeys(a,n){const s=this.editor.plugins.get(TableUtils),l=this.editor.plugins.get("TableSelection"),c=this.editor.model,u=c.document.selection,d=["right","down"].includes(a),h=s.getSelectedTableCells(u);if(h.length){let p;return n?p=l.getFocusCell():p=d?h[h.length-1]:h[0],this._navigateFromCellInDirection(p,a,n),!0}const f=u.focus.findAncestor("tableCell");/* istanbul ignore if: paranoid check -- @preserve */if(!f)return!1;if(!u.isCollapsed)if(n){if(u.isBackward==d&&!u.containsEntireContent(f))return!1}else{const p=u.getSelectedElement();if(!p||!c.schema.isObject(p))return!1}return this._isSelectionAtCellEdge(u,f,d)?(this._navigateFromCellInDirection(f,a,n),!0):!1}_isSelectionAtCellEdge(a,n,s){const l=this.editor.model,c=this.editor.model.schema,u=s?a.getLastPosition():a.getFirstPosition();if(!c.getLimitElement(u).is("element","tableCell"))return l.createPositionAt(n,s?"end":0).isTouching(u);const d=l.createSelection(u);return l.modifySelection(d,{direction:s?"forward":"backward"}),u.isEqual(d.focus)}_navigateFromCellInDirection(a,n,s=!1){const l=this.editor.model,c=a.findAncestor("table"),u=[...new TableWalker(c,{includeAllSlots:!0})],{row:d,column:h}=u[u.length-1],f=u.find(({cell:T})=>T==a);let{row:p,column:g}=f;switch(n){case"left":g--;break;case"up":p--;break;case"right":g+=f.cellWidth;break;case"down":p+=f.cellHeight;break}const v=p<0||p>d,b=g<0&&p<=0,w=g>h&&p>=d;if(v||b||w){l.change(T=>{T.setSelection(T.createRangeOn(c))});return}g<0?(g=s?0:h,p--):g>h&&(g=s?h:0,p++);const x=u.find(T=>T.row==p&&T.column==g).cell,S=["right","down"].includes(n),E=this.editor.plugins.get("TableSelection");if(s&&E.isEnabled){const T=E.getAnchorCell()||a;E.setCellSelection(T,x)}else{const T=l.createPositionAt(x,S?0:"end");l.change(C=>{C.setSelection(T)})}}}class MouseEventsObserver extends DomEventObserver{constructor(){super(...arguments);M(this,"domEventType",["mousemove","mouseleave"])}onDomEvent(n){this.fire(n.type,n)}}class TableMouse extends Plugin{static get pluginName(){return"TableMouse"}static get isOfficialPlugin(){return!0}static get requires(){return[TableSelection,TableUtils]}init(){this.editor.editing.view.addObserver(MouseEventsObserver),this._enableShiftClickSelection(),this._enableMouseDragSelection()}_enableShiftClickSelection(){const a=this.editor,n=a.plugins.get(TableUtils);let s=!1;const l=a.plugins.get(TableSelection);this.listenTo(a.editing.view.document,"mousedown",(c,u)=>{const d=a.model.document.selection;if(!this.isEnabled||!l.isEnabled||!u.domEvent.shiftKey)return;const h=l.getAnchorCell()||n.getTableCellsContainingSelection(d)[0];if(!h)return;const f=this._getModelTableCellFromDomEvent(u);f&&haveSameTableParent(h,f)&&(s=!0,l.setCellSelection(h,f),u.preventDefault())}),this.listenTo(a.editing.view.document,"mouseup",()=>{s=!1}),this.listenTo(a.editing.view.document,"selectionChange",c=>{s&&c.stop()},{priority:"highest"})}_enableMouseDragSelection(){const a=this.editor;let n,s,l=!1,c=!1;const u=a.plugins.get(TableSelection);this.listenTo(a.editing.view.document,"mousedown",(d,h)=>{!this.isEnabled||!u.isEnabled||h.domEvent.shiftKey||h.domEvent.ctrlKey||h.domEvent.altKey||(n=this._getModelTableCellFromDomEvent(h))}),this.listenTo(a.editing.view.document,"mousemove",(d,h)=>{if(!h.domEvent.buttons||!n)return;const f=this._getModelTableCellFromDomEvent(h);f&&haveSameTableParent(n,f)&&(s=f,!l&&s!=n&&(l=!0)),l&&(c=!0,u.setCellSelection(n,s),h.preventDefault())}),this.listenTo(a.editing.view.document,"mouseup",()=>{l=!1,c=!1,n=null,s=null}),this.listenTo(a.editing.view.document,"selectionChange",d=>{c&&d.stop()},{priority:"highest"})}_getModelTableCellFromDomEvent(a){const n=a.target,s=this.editor.editing.view.createPositionAt(n,0);return this.editor.editing.mapper.toModelPosition(s).parent.findAncestor("tableCell",{includeSelf:!0})}}function haveSameTableParent(o,a){return o.parent.parent==a.parent.parent}class Table extends Plugin{static get requires(){return[TableEditing,TableUI,TableSelection,TableMouse,TableKeyboard,TableClipboard,Widget]}static get pluginName(){return"Table"}static get isOfficialPlugin(){return!0}}function getSelectionAffectedTableWidget(o){const a=getSelectedTableWidget(o);return a||getTableWidgetAncestor(o)}function getSelectedTableWidget(o){const a=o.getSelectedElement();return a&&isTableWidget(a)?a:null}function getTableWidgetAncestor(o){const a=o.getFirstPosition();if(!a)return null;let n=a.parent;for(;n;){if(n.is("element")&&isTableWidget(n))return n;n=n.parent}return null}function isTableWidget(o){return!!o.getCustomProperty("table")&&isWidget(o)}class TableToolbar extends Plugin{static get requires(){return[WidgetToolbarRepository]}static get pluginName(){return"TableToolbar"}static get isOfficialPlugin(){return!0}afterInit(){const a=this.editor,n=a.t,s=a.plugins.get(WidgetToolbarRepository),l=a.config.get("table.contentToolbar"),c=a.config.get("table.tableToolbar");l&&s.register("tableContent",{ariaLabel:n("Table toolbar"),items:l,getRelatedElement:getTableWidgetAncestor}),c&&s.register("table",{ariaLabel:n("Table toolbar"),items:c,getRelatedElement:getSelectedTableWidget})}}class ColorInputView extends View$1{constructor(n,s){super(n);M(this,"options");M(this,"focusTracker");M(this,"focusCycler");M(this,"_focusables");M(this,"dropdownView");M(this,"inputView");M(this,"keystrokes");M(this,"_stillTyping");this.set("value",""),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isEmpty",!0),this.options=s,this.focusTracker=new FocusTracker,this._focusables=new ViewCollection,this.dropdownView=this._createDropdownView(),this.inputView=this._createInputTextView(),this.keystrokes=new KeystrokeHandler,this._stillTyping=!1,this.focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-input-color"]},children:[this.dropdownView,this.inputView]}),this.on("change:value",(l,c,u)=>this._setInputValue(u))}render(){super.render(),[this.inputView,this.dropdownView.buttonView].forEach(n=>{this.focusTracker.add(n.element),this._focusables.add(n)}),this.keystrokes.listenTo(this.element)}focus(n){n===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createDropdownView(){const n=this.locale,s=n.t,l=this.bindTemplate,c=this._createColorSelector(n),u=createDropdown(n),d=new View$1;return d.setTemplate({tag:"span",attributes:{class:["ck","ck-input-color__button__preview"],style:{backgroundColor:l.to("value")}},children:[{tag:"span",attributes:{class:["ck","ck-input-color__button__preview__no-color-indicator",l.if("value","ck-hidden",h=>h!="")]}}]}),u.buttonView.extendTemplate({attributes:{class:"ck-input-color__button"}}),u.buttonView.children.add(d),u.buttonView.label=s("Color picker"),u.buttonView.tooltip=!0,u.panelPosition=n.uiLanguageDirection==="rtl"?"se":"sw",u.panelView.children.add(c),u.bind("isEnabled").to(this,"isReadOnly",h=>!h),u.on("change:isOpen",(h,f,p)=>{p&&(c.updateSelectedColors(),c.showColorGridsFragment())}),u}_createInputTextView(){const n=this.locale,s=new InputTextView(n);return s.extendTemplate({on:{blur:s.bindTemplate.to("blur")}}),s.value=this.value,s.bind("isReadOnly","hasError").to(this),this.bind("isFocused","isEmpty").to(s),s.on("input",()=>{const l=s.element.value,c=this.options.colorDefinitions.find(u=>l===u.label);this._stillTyping=!0,this.value=c&&c.color||l}),s.on("blur",()=>{this._stillTyping=!1,this._setInputValue(s.element.value)}),s.delegate("input").to(this),s}_createColorSelector(n){const s=n.t,l=this.options.defaultColorValue||"",c=s(l?"Restore default":"Remove color"),u=new ColorSelectorView(n,{colors:this.options.colorDefinitions,columns:this.options.columns,removeButtonLabel:c,colorPickerLabel:s("Color picker"),colorPickerViewConfig:this.options.colorPickerConfig===!1?!1:{...this.options.colorPickerConfig,hideInput:!0}});u.appendUI(),u.on("execute",(h,f)=>{if(f.source==="colorPickerSaveButton"){this.dropdownView.isOpen=!1;return}this.value=f.value||l,this.fire("input"),f.source!=="colorPicker"&&(this.dropdownView.isOpen=!1)});let d=this.value;return u.on("colorPicker:cancel",()=>{this.value=d,this.fire("input"),this.dropdownView.isOpen=!1}),u.colorGridsFragmentView.colorPickerButtonView.on("execute",()=>{d=this.value}),u.bind("selectedColor").to(this,"value"),u}_setInputValue(n){if(!this._stillTyping){const s=normalizeColor$1(n),l=this.options.colorDefinitions.find(c=>s===normalizeColor$1(c.color));l?this.inputView.value=l.label:this.inputView.value=n||""}}}function normalizeColor$1(o){return o.replace(/([(,])\s+/g,"$1").replace(/^\s+|\s+(?=[),\s]|$)/g,"").replace(/,|\s/g," ")}const isEmpty=o=>o==="";function getBorderStyleLabels(o){return{none:o("None"),solid:o("Solid"),dotted:o("Dotted"),dashed:o("Dashed"),double:o("Double"),groove:o("Groove"),ridge:o("Ridge"),inset:o("Inset"),outset:o("Outset")}}function getLocalizedColorErrorText(o){return o('The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".')}function getLocalizedLengthErrorText(o){return o('The value is invalid. Try "10px" or "2em" or simply "2".')}function colorFieldValidator(o){return o=o.trim().toLowerCase(),isEmpty(o)||isColor(o)}function lengthFieldValidator(o){return o=o.trim(),isEmpty(o)||isNumberString(o)||isLength(o)||isPercentage(o)}function lineWidthFieldValidator(o){return o=o.trim(),isEmpty(o)||isNumberString(o)||isLength(o)}function getBorderStyleDefinitions(o,a){const n=new Collection,s=getBorderStyleLabels(o.t);for(const l in s){const c={type:"button",model:new Model$1({_borderStyleValue:l,label:s[l],role:"menuitemradio",withText:!0})};l==="none"?c.model.bind("isOn").to(o,"borderStyle",u=>a==="none"?!u:u===l):c.model.bind("isOn").to(o,"borderStyle",u=>u===l),n.add(c)}return n}function fillToolbar(o){const{view:a,icons:n,toolbar:s,labels:l,propertyName:c,nameToValue:u,defaultValue:d}=o;for(const h in l){const f=new ButtonView(a.locale);f.set({role:"radio",isToggleable:!0,label:l[h],icon:n[h],tooltip:l[h]});const p=u?u(h):h;f.bind("isOn").to(a,c,g=>{let v=g;return g===""&&d&&(v=d),p===v}),f.on("execute",()=>{a[c]=p}),s.items.add(f)}}const defaultColors=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:!0},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function getLabeledColorInputCreator(o){return(a,n,s)=>{const l=new ColorInputView(a.locale,{colorDefinitions:colorConfigToColorGridDefinitions(o.colorConfig),columns:o.columns,defaultColorValue:o.defaultColorValue,colorPickerConfig:o.colorPickerConfig});return l.inputView.set({id:n,ariaDescribedById:s}),l.bind("isReadOnly").to(a,"isEnabled",c=>!c),l.bind("hasError").to(a,"errorText",c=>!!c),l.on("input",()=>{a.errorText=null}),a.bind("isEmpty","isFocused").to(l),l}}function isNumberString(o){const a=parseFloat(o);return!Number.isNaN(a)&&o===String(a)}function colorConfigToColorGridDefinitions(o){return o.map(a=>({color:a.model,label:a.label,options:{hasBorder:a.hasBorder}}))}class FormRowView extends View$1{constructor(n,s={}){super(n);M(this,"children");const l=this.bindTemplate;this.set("class",s.class||null),this.children=this.createCollection(),s.children&&s.children.forEach(c=>this.children.add(c)),this.set("_role",null),this.set("_ariaLabelledBy",null),s.labelView&&this.set({_role:"group",_ariaLabelledBy:s.labelView.id}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__row",l.to("class")],role:l.to("_role"),"aria-labelledby":l.to("_ariaLabelledBy")},children:this.children})}}class TableCellPropertiesView extends View$1{constructor(n,s){super(n);M(this,"options");M(this,"focusTracker");M(this,"keystrokes");M(this,"children");M(this,"borderStyleDropdown");M(this,"borderWidthInput");M(this,"borderColorInput");M(this,"backgroundInput");M(this,"paddingInput");M(this,"widthInput");M(this,"heightInput");M(this,"horizontalAlignmentToolbar");M(this,"verticalAlignmentToolbar");M(this,"saveButtonView");M(this,"cancelButtonView");M(this,"_focusables");M(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""}),this.options=s;const{borderStyleDropdown:l,borderWidthInput:c,borderColorInput:u,borderRowLabel:d}=this._createBorderFields(),{backgroundRowLabel:h,backgroundInput:f}=this._createBackgroundFields(),{widthInput:p,operatorLabel:g,heightInput:v,dimensionsLabel:b}=this._createDimensionFields(),{horizontalAlignmentToolbar:w,verticalAlignmentToolbar:x,alignmentLabel:S}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=l,this.borderWidthInput=c,this.borderColorInput=u,this.backgroundInput=f,this.paddingInput=this._createPaddingField(),this.widthInput=p,this.heightInput=v,this.horizontalAlignmentToolbar=w,this.verticalAlignmentToolbar=x;const{saveButtonView:E,cancelButtonView:T}=this._createActionButtons();this.saveButtonView=E,this.cancelButtonView=T,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(n,{label:this.t("Cell properties")})),this.children.add(new FormRowView(n,{labelView:d,children:[d,l,u,c],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(n,{labelView:h,children:[h,f],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(n,{children:[new FormRowView(n,{labelView:b,children:[b,p,g,v],class:"ck-table-form__dimensions-row"}),new FormRowView(n,{children:[this.paddingInput],class:"ck-table-cell-properties-form__padding-row"})]})),this.children.add(new FormRowView(n,{labelView:S,children:[S,w,x],class:"ck-table-cell-properties-form__alignment-row"})),this.children.add(new FormRowView(n,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(n=>{this._focusCycler.chain(n.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const n=this.options.defaultTableCellProperties,s={style:n.borderStyle,width:n.borderWidth,color:n.borderColor},l=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:s.color,colorPickerConfig:this.options.colorPickerConfig}),c=this.locale,u=this.t,d=u("Style"),h=new LabelView(c);h.text=u("Border");const f=getBorderStyleLabels(u),p=new LabeledFieldView(c,createLabeledDropdown);p.set({label:d,class:"ck-table-form__border-style"}),p.fieldView.buttonView.set({ariaLabel:d,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:d}),p.fieldView.buttonView.bind("label").to(this,"borderStyle",b=>f[b||"none"]),p.fieldView.on("execute",b=>{this.borderStyle=b.source._borderStyleValue}),p.bind("isEmpty").to(this,"borderStyle",b=>!b),addListToDropdown(p.fieldView,getBorderStyleDefinitions(this,s.style),{role:"menu",ariaLabel:d});const g=new LabeledFieldView(c,createLabeledInputText);g.set({label:u("Width"),class:"ck-table-form__border-width"}),g.fieldView.bind("value").to(this,"borderWidth"),g.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),g.fieldView.on("input",()=>{this.borderWidth=g.fieldView.element.value});const v=new LabeledFieldView(c,l);return v.set({label:u("Color"),class:"ck-table-form__border-color"}),v.fieldView.bind("value").to(this,"borderColor"),v.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet$1),v.fieldView.on("input",()=>{this.borderColor=v.fieldView.value}),this.on("change:borderStyle",(b,w,x,S)=>{isBorderStyleSet$1(x)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet$1(S)||(this.borderColor=s.color,this.borderWidth=s.width)}),{borderRowLabel:h,borderStyleDropdown:p,borderColorInput:v,borderWidthInput:g}}_createBackgroundFields(){const n=this.locale,s=this.t,l=new LabelView(n);l.text=s("Background");const c=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableCellProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),u=new LabeledFieldView(n,c);return u.set({label:s("Color"),class:"ck-table-cell-properties-form__background"}),u.fieldView.bind("value").to(this,"backgroundColor"),u.fieldView.on("input",()=>{this.backgroundColor=u.fieldView.value}),{backgroundRowLabel:l,backgroundInput:u}}_createDimensionFields(){const n=this.locale,s=this.t,l=new LabelView(n);l.text=s("Dimensions");const c=new LabeledFieldView(n,createLabeledInputText);c.set({label:s("Width"),class:"ck-table-form__dimensions-row__width"}),c.fieldView.bind("value").to(this,"width"),c.fieldView.on("input",()=>{this.width=c.fieldView.element.value});const u=new View$1(n);u.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const d=new LabeledFieldView(n,createLabeledInputText);return d.set({label:s("Height"),class:"ck-table-form__dimensions-row__height"}),d.fieldView.bind("value").to(this,"height"),d.fieldView.on("input",()=>{this.height=d.fieldView.element.value}),{dimensionsLabel:l,widthInput:c,operatorLabel:u,heightInput:d}}_createPaddingField(){const n=this.locale,s=this.t,l=new LabeledFieldView(n,createLabeledInputText);return l.set({label:s("Padding"),class:"ck-table-cell-properties-form__padding"}),l.fieldView.bind("value").to(this,"padding"),l.fieldView.on("input",()=>{this.padding=l.fieldView.element.value}),l}_createAlignmentFields(){const n=this.locale,s=this.t,l=new LabelView(n),c={left:icons.alignLeft,center:icons.alignCenter,right:icons.alignRight,justify:icons.alignJustify,top:icons.alignTop,middle:icons.alignMiddle,bottom:icons.alignBottom};l.text=s("Table cell text alignment");const u=new ToolbarView(n),d=n.contentLanguageDirection==="rtl";u.set({isCompact:!0,role:"radiogroup",ariaLabel:s("Horizontal text alignment toolbar")}),fillToolbar({view:this,icons:c,toolbar:u,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:f=>{if(d){if(f==="left")return"right";if(f==="right")return"left"}return f},defaultValue:this.options.defaultTableCellProperties.horizontalAlignment});const h=new ToolbarView(n);return h.set({isCompact:!0,role:"radiogroup",ariaLabel:s("Vertical text alignment toolbar")}),fillToolbar({view:this,icons:c,toolbar:h,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",defaultValue:this.options.defaultTableCellProperties.verticalAlignment}),{horizontalAlignmentToolbar:u,verticalAlignmentToolbar:h,alignmentLabel:l}}_createActionButtons(){const n=this.locale,s=this.t,l=new ButtonView(n),c=new ButtonView(n),u=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];return l.set({label:s("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),l.bind("isEnabled").toMany(u,"errorText",(...d)=>d.every(h=>!h)),c.set({label:s("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),c.delegate("execute").to(this,"cancel"),{saveButtonView:l,cancelButtonView:c}}get _horizontalAlignmentLabels(){const n=this.locale,s=this.t,l=s("Align cell text to the left"),c=s("Align cell text to the center"),u=s("Align cell text to the right"),d=s("Justify cell text");return n.uiLanguageDirection==="rtl"?{right:u,center:c,left:l,justify:d}:{left:l,center:c,right:u,justify:d}}get _verticalAlignmentLabels(){const n=this.t;return{top:n("Align cell text to the top"),middle:n("Align cell text to the middle"),bottom:n("Align cell text to the bottom")}}}function isBorderStyleSet$1(o){return o!=="none"}const BALLOON_POSITIONS=[BalloonPanelView.defaultPositions.northArrowSouth,BalloonPanelView.defaultPositions.northArrowSouthWest,BalloonPanelView.defaultPositions.northArrowSouthEast,BalloonPanelView.defaultPositions.southArrowNorth,BalloonPanelView.defaultPositions.southArrowNorthWest,BalloonPanelView.defaultPositions.southArrowNorthEast,BalloonPanelView.defaultPositions.viewportStickyNorth];function repositionContextualBalloon(o,a){const n=o.plugins.get("ContextualBalloon"),s=o.editing.view.document.selection;let l;a==="cell"?getTableWidgetAncestor(s)&&(l=getBalloonCellPositionData(o)):getSelectionAffectedTableWidget(s)&&(l=getBalloonTablePositionData(o)),l&&n.updatePosition(l)}function getBalloonTablePositionData(o){const a=o.model.document.selection,n=getSelectionAffectedTable(a),s=o.editing.mapper.toViewElement(n);return{target:o.editing.view.domConverter.mapViewToDom(s),positions:BALLOON_POSITIONS}}function getBalloonCellPositionData(o){const a=o.editing.mapper,n=o.editing.view.domConverter,s=o.model.document.selection;if(s.rangeCount>1)return{target:()=>createBoundingRect(s.getRanges(),o),positions:BALLOON_POSITIONS};const l=getTableCellAtPosition(s.getFirstPosition()),c=a.toViewElement(l);return{target:n.mapViewToDom(c),positions:BALLOON_POSITIONS}}function getTableCellAtPosition(o){return o.nodeAfter&&o.nodeAfter.is("element","tableCell")?o.nodeAfter:o.findAncestor("tableCell")}function createBoundingRect(o,a){const n=a.editing.mapper,s=a.editing.view.domConverter,l=Array.from(o).map(c=>{const u=getTableCellAtPosition(c.start),d=n.toViewElement(u);return new Rect$3(s.mapViewToDom(d))});return Rect$3.getBoundingRect(l)}var tableCellProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.105 18-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';function getSingleValue(o){if(!o||!isObject$6(o))return o;const{top:a,right:n,bottom:s,left:l}=o;if(a==n&&n==s&&s==l)return a}function addDefaultUnitToNumericValue(o,a){const n=parseFloat(o);return Number.isNaN(n)||String(n)!==String(o)?o:`${n}${a}`}function getNormalizedDefaultProperties(o,a={}){const n={borderStyle:"none",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",...o};return a.includeAlignmentProperty&&!n.alignment&&(n.alignment="center"),a.includePaddingProperty&&!n.padding&&(n.padding=""),a.includeVerticalAlignmentProperty&&!n.verticalAlignment&&(n.verticalAlignment="middle"),a.includeHorizontalAlignmentProperty&&!n.horizontalAlignment&&(n.horizontalAlignment=a.isRightToLeftContent?"right":"left"),n}function getNormalizedDefaultTableProperties(o,a){return getNormalizedDefaultProperties({borderStyle:"double",borderColor:"hsl(0, 0%, 70%)",borderWidth:"1px",...o},a)}function getNormalizedDefaultCellProperties(o,a){return getNormalizedDefaultProperties({borderStyle:"solid",borderColor:"hsl(0, 0%, 75%)",borderWidth:"1px",...o},a)}const ERROR_TEXT_TIMEOUT$1=500,propertyToCommandMap$1={borderStyle:"tableCellBorderStyle",borderColor:"tableCellBorderColor",borderWidth:"tableCellBorderWidth",height:"tableCellHeight",width:"tableCellWidth",padding:"tableCellPadding",backgroundColor:"tableCellBackgroundColor",horizontalAlignment:"tableCellHorizontalAlignment",verticalAlignment:"tableCellVerticalAlignment"};class TableCellPropertiesUI extends Plugin{constructor(n){super(n);M(this,"_defaultTableCellProperties");M(this,"_balloon");M(this,"view");M(this,"_undoStepBatch");M(this,"_isReady");n.config.define("table.tableCellProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TableCellPropertiesUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.t;this._defaultTableCellProperties=getNormalizedDefaultCellProperties(n.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:n.locale.contentLanguageDirection==="rtl"}),this._balloon=n.plugins.get(ContextualBalloon),this.view=null,this._isReady=!1,n.ui.componentFactory.add("tableCellProperties",l=>{const c=new ButtonView(l);c.set({label:s("Cell properties"),icon:tableCellProperties,tooltip:!0}),this.listenTo(c,"execute",()=>this._showView());const u=Object.values(propertyToCommandMap$1).map(d=>n.commands.get(d));return c.bind("isEnabled").toMany(u,"isEnabled",(...d)=>d.some(h=>h)),c})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const n=this.editor,s=n.config.get("table.tableCellProperties"),l=normalizeColorOptions(s.borderColors),c=getLocalizedColorOptions(n.locale,l),u=normalizeColorOptions(s.backgroundColors),d=getLocalizedColorOptions(n.locale,u),h=s.colorPicker!==!1,f=new TableCellPropertiesView(n.locale,{borderColors:c,backgroundColors:d,defaultTableCellProperties:this._defaultTableCellProperties,colorPickerConfig:h?s.colorPicker||{}:!1}),p=n.t;f.render(),this.listenTo(f,"submit",()=>{this._hideView()}),this.listenTo(f,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),f.keystrokes.set("Esc",(b,w)=>{this._hideView(),w()}),clickOutsideHandler({emitter:f,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const g=getLocalizedColorErrorText(p),v=getLocalizedLengthErrorText(p);return f.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle")),f.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:f.borderColorInput,commandName:"tableCellBorderColor",errorText:g,validator:colorFieldValidator})),f.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:f.borderWidthInput,commandName:"tableCellBorderWidth",errorText:v,validator:lineWidthFieldValidator})),f.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:f.paddingInput,commandName:"tableCellPadding",errorText:v,validator:lengthFieldValidator})),f.on("change:width",this._getValidatedPropertyChangeCallback({viewField:f.widthInput,commandName:"tableCellWidth",errorText:v,validator:lengthFieldValidator})),f.on("change:height",this._getValidatedPropertyChangeCallback({viewField:f.heightInput,commandName:"tableCellHeight",errorText:v,validator:lengthFieldValidator})),f.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:f.backgroundInput,commandName:"tableCellBackgroundColor",errorText:g,validator:colorFieldValidator})),f.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment")),f.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment")),f}_fillViewFormFromCommandValues(){const n=this.editor.commands,s=n.get("tableCellBorderStyle");Object.entries(propertyToCommandMap$1).map(([l,c])=>{const u=this._defaultTableCellProperties[l]||"";return[l,n.get(c).value||u]}).forEach(([l,c])=>{(l==="borderColor"||l==="borderWidth")&&s.value==="none"||this.view.set(l,c)}),this._isReady=!0}_showView(){const n=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(n.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonCellPositionData(n)}),this._undoStepBatch=n.model.createBatch(),this.view.focus()}_hideView(){const n=this.editor;this.stopListening(n.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const n=this.editor,s=n.editing.view.document;getTableWidgetAncestor(s.selection)?this._isViewVisible&&repositionContextualBalloon(n,"cell"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(n){return(s,l,c)=>{this._isReady&&this.editor.execute(n,{value:c,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(n){const{commandName:s,viewField:l,validator:c,errorText:u}=n,d=debounce$1(()=>{l.errorText=u},ERROR_TEXT_TIMEOUT$1);return(h,f,p)=>{d.cancel(),this._isReady&&(c(p)?(this.editor.execute(s,{value:p,batch:this._undoStepBatch}),l.errorText=null):d())}}}class TableCellPropertyCommand extends Command{constructor(n,s,l){super(n);M(this,"attributeName");M(this,"_defaultValue");this.attributeName=s,this._defaultValue=l}refresh(){const n=this.editor,l=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(n.model.document.selection);this.isEnabled=!!l.length,this.value=this._getSingleValue(l)}execute(n={}){const{value:s,batch:l}=n,c=this.editor.model,d=this.editor.plugins.get("TableUtils").getSelectionAffectedTableCells(c.document.selection),h=this._getValueToSet(s);c.enqueueChange(l,f=>{h?d.forEach(p=>f.setAttribute(this.attributeName,h,p)):d.forEach(p=>f.removeAttribute(this.attributeName,p))})}_getAttribute(n){if(!n)return;const s=n.getAttribute(this.attributeName);if(s!==this._defaultValue)return s}_getValueToSet(n){if(n!==this._defaultValue)return n}_getSingleValue(n){const s=this._getAttribute(n[0]);return n.every(c=>this._getAttribute(c)===s)?s:void 0}}class TableCellWidthCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellWidth",n)}_getValueToSet(a){if(a=addDefaultUnitToNumericValue(a,"px"),a!==this._defaultValue)return a}}class TableCellWidthEditing extends Plugin{static get pluginName(){return"TableCellWidthEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const a=this.editor,n=getNormalizedDefaultCellProperties(a.config.get("table.tableCellProperties.defaultProperties"));enableProperty$1(a.model.schema,a.conversion,{modelAttribute:"tableCellWidth",styleName:"width",defaultValue:n.width}),a.commands.add("tableCellWidth",new TableCellWidthCommand(a,n.width))}}class TableCellPaddingCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellPadding",n)}_getAttribute(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}_getValueToSet(a){const n=addDefaultUnitToNumericValue(a,"px");if(n!==this._defaultValue)return n}}class TableCellHeightCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellHeight",n)}_getValueToSet(a){const n=addDefaultUnitToNumericValue(a,"px");if(n!==this._defaultValue)return n}}class TableCellBackgroundColorCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellBackgroundColor",n)}}class TableCellVerticalAlignmentCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellVerticalAlignment",n)}}class TableCellHorizontalAlignmentCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellHorizontalAlignment",n)}}class TableCellBorderStyleCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellBorderStyle",n)}_getAttribute(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableCellBorderColorCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellBorderColor",n)}_getAttribute(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableCellBorderWidthCommand extends TableCellPropertyCommand{constructor(a,n){super(a,"tableCellBorderWidth",n)}_getAttribute(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}_getValueToSet(a){const n=addDefaultUnitToNumericValue(a,"px");if(n!==this._defaultValue)return n}}const VALIGN_VALUES_REG_EXP=/^(top|middle|bottom)$/,ALIGN_VALUES_REG_EXP$1=/^(left|center|right|justify)$/;class TableCellPropertiesEditing extends Plugin{static get pluginName(){return"TableCellPropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing,TableCellWidthEditing]}init(){const a=this.editor,n=a.model.schema,s=a.conversion;a.config.define("table.tableCellProperties.defaultProperties",{});const l=getNormalizedDefaultCellProperties(a.config.get("table.tableCellProperties.defaultProperties"),{includeVerticalAlignmentProperty:!0,includeHorizontalAlignmentProperty:!0,includePaddingProperty:!0,isRightToLeftContent:a.locale.contentLanguageDirection==="rtl"});a.data.addStyleProcessorRules(addBorderRules),enableBorderProperties$1(n,s,{color:l.borderColor,style:l.borderStyle,width:l.borderWidth}),a.commands.add("tableCellBorderStyle",new TableCellBorderStyleCommand(a,l.borderStyle)),a.commands.add("tableCellBorderColor",new TableCellBorderColorCommand(a,l.borderColor)),a.commands.add("tableCellBorderWidth",new TableCellBorderWidthCommand(a,l.borderWidth)),enableProperty$1(n,s,{modelAttribute:"tableCellHeight",styleName:"height",defaultValue:l.height}),a.commands.add("tableCellHeight",new TableCellHeightCommand(a,l.height)),a.data.addStyleProcessorRules(addPaddingRules),enableProperty$1(n,s,{modelAttribute:"tableCellPadding",styleName:"padding",reduceBoxSides:!0,defaultValue:l.padding}),a.commands.add("tableCellPadding",new TableCellPaddingCommand(a,l.padding)),a.data.addStyleProcessorRules(addBackgroundRules),enableProperty$1(n,s,{modelAttribute:"tableCellBackgroundColor",styleName:"background-color",defaultValue:l.backgroundColor}),a.commands.add("tableCellBackgroundColor",new TableCellBackgroundColorCommand(a,l.backgroundColor)),enableHorizontalAlignmentProperty(n,s,l.horizontalAlignment),a.commands.add("tableCellHorizontalAlignment",new TableCellHorizontalAlignmentCommand(a,l.horizontalAlignment)),enableVerticalAlignmentProperty(n,s,l.verticalAlignment),a.commands.add("tableCellVerticalAlignment",new TableCellVerticalAlignmentCommand(a,l.verticalAlignment))}}function enableBorderProperties$1(o,a,n){const s={width:"tableCellBorderWidth",color:"tableCellBorderColor",style:"tableCellBorderStyle"};o.extend("tableCell",{allowAttributes:Object.values(s)}),upcastBorderStyles(a,"td",s,n),upcastBorderStyles(a,"th",s,n),downcastAttributeToStyle(a,{modelElement:"tableCell",modelAttribute:s.style,styleName:"border-style"}),downcastAttributeToStyle(a,{modelElement:"tableCell",modelAttribute:s.color,styleName:"border-color"}),downcastAttributeToStyle(a,{modelElement:"tableCell",modelAttribute:s.width,styleName:"border-width"})}function enableHorizontalAlignmentProperty(o,a,n){o.extend("tableCell",{allowAttributes:["tableCellHorizontalAlignment"]}),a.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellHorizontalAlignment"},view:s=>({key:"style",value:{"text-align":s}})}),a.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"text-align":ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:s=>{const l=s.getStyle("text-align");return l===n?null:l}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{align:ALIGN_VALUES_REG_EXP$1}},model:{key:"tableCellHorizontalAlignment",value:s=>{const l=s.getAttribute("align");return l===n?null:l}}})}function enableVerticalAlignmentProperty(o,a,n){o.extend("tableCell",{allowAttributes:["tableCellVerticalAlignment"]}),a.for("downcast").attributeToAttribute({model:{name:"tableCell",key:"tableCellVerticalAlignment"},view:s=>({key:"style",value:{"vertical-align":s}})}),a.for("upcast").attributeToAttribute({view:{name:/^(td|th)$/,styles:{"vertical-align":VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:s=>{const l=s.getStyle("vertical-align");return l===n?null:l}}}).attributeToAttribute({view:{name:/^(td|th)$/,attributes:{valign:VALIGN_VALUES_REG_EXP}},model:{key:"tableCellVerticalAlignment",value:s=>{const l=s.getAttribute("valign");return l===n?null:l}}})}class TableCellProperties extends Plugin{static get pluginName(){return"TableCellProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TableCellPropertiesEditing,TableCellPropertiesUI]}}class TablePropertyCommand extends Command{constructor(n,s,l){super(n);M(this,"attributeName");M(this,"_defaultValue");this.attributeName=s,this._defaultValue=l}refresh(){const s=this.editor.model.document.selection,l=getSelectionAffectedTable(s);this.isEnabled=!!l,this.value=this._getValue(l)}execute(n={}){const s=this.editor.model,l=s.document.selection,{value:c,batch:u}=n,d=getSelectionAffectedTable(l),h=this._getValueToSet(c);s.enqueueChange(u,f=>{h?f.setAttribute(this.attributeName,h,d):f.removeAttribute(this.attributeName,d)})}_getValue(n){if(!n)return;const s=n.getAttribute(this.attributeName);if(s!==this._defaultValue)return s}_getValueToSet(n){if(n!==this._defaultValue)return n}}class TableBackgroundColorCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableBackgroundColor",n)}}class TableBorderColorCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableBorderColor",n)}_getValue(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableBorderStyleCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableBorderStyle",n)}_getValue(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}}class TableBorderWidthCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableBorderWidth",n)}_getValue(a){if(!a)return;const n=getSingleValue(a.getAttribute(this.attributeName));if(n!==this._defaultValue)return n}_getValueToSet(a){const n=addDefaultUnitToNumericValue(a,"px");if(n!==this._defaultValue)return n}}class TableWidthCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableWidth",n)}_getValueToSet(a){if(a=addDefaultUnitToNumericValue(a,"px"),a!==this._defaultValue)return a}}class TableHeightCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableHeight",n)}_getValueToSet(a){if(a=addDefaultUnitToNumericValue(a,"px"),a!==this._defaultValue)return a}}class TableAlignmentCommand extends TablePropertyCommand{constructor(a,n){super(a,"tableAlignment",n)}}const ALIGN_VALUES_REG_EXP=/^(left|center|right)$/,FLOAT_VALUES_REG_EXP=/^(left|none|right)$/;class TablePropertiesEditing extends Plugin{static get pluginName(){return"TablePropertiesEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[TableEditing]}init(){const a=this.editor,n=a.model.schema,s=a.conversion;a.config.define("table.tableProperties.defaultProperties",{});const l=getNormalizedDefaultTableProperties(a.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0});a.data.addStyleProcessorRules(addBorderRules),enableBorderProperties(n,s,{color:l.borderColor,style:l.borderStyle,width:l.borderWidth}),a.commands.add("tableBorderColor",new TableBorderColorCommand(a,l.borderColor)),a.commands.add("tableBorderStyle",new TableBorderStyleCommand(a,l.borderStyle)),a.commands.add("tableBorderWidth",new TableBorderWidthCommand(a,l.borderWidth)),enableAlignmentProperty(n,s,l.alignment),a.commands.add("tableAlignment",new TableAlignmentCommand(a,l.alignment)),enableTableToFigureProperty(n,s,{modelAttribute:"tableWidth",styleName:"width",defaultValue:l.width}),a.commands.add("tableWidth",new TableWidthCommand(a,l.width)),enableTableToFigureProperty(n,s,{modelAttribute:"tableHeight",styleName:"height",defaultValue:l.height}),a.commands.add("tableHeight",new TableHeightCommand(a,l.height)),a.data.addStyleProcessorRules(addBackgroundRules),enableProperty(n,s,{modelAttribute:"tableBackgroundColor",styleName:"background-color",defaultValue:l.backgroundColor}),a.commands.add("tableBackgroundColor",new TableBackgroundColorCommand(a,l.backgroundColor))}}function enableBorderProperties(o,a,n){const s={width:"tableBorderWidth",color:"tableBorderColor",style:"tableBorderStyle"};o.extend("table",{allowAttributes:Object.values(s)}),upcastBorderStyles(a,"table",s,n),downcastTableAttribute(a,{modelAttribute:s.color,styleName:"border-color"}),downcastTableAttribute(a,{modelAttribute:s.style,styleName:"border-style"}),downcastTableAttribute(a,{modelAttribute:s.width,styleName:"border-width"})}function enableAlignmentProperty(o,a,n){o.extend("table",{allowAttributes:["tableAlignment"]}),a.for("downcast").attributeToAttribute({model:{name:"table",key:"tableAlignment"},view:s=>({key:"style",value:{float:s==="center"?"none":s}}),converterPriority:"high"}),a.for("upcast").attributeToAttribute({view:{name:/^(table|figure)$/,styles:{float:FLOAT_VALUES_REG_EXP}},model:{key:"tableAlignment",value:s=>{let l=s.getStyle("float");return l==="none"&&(l="center"),l===n?null:l}}}).attributeToAttribute({view:{attributes:{align:ALIGN_VALUES_REG_EXP}},model:{name:"table",key:"tableAlignment",value:s=>{const l=s.getAttribute("align");return l===n?null:l}}})}function enableProperty(o,a,n){const{modelAttribute:s}=n;o.extend("table",{allowAttributes:[s]}),upcastStyleToAttribute(a,{viewElement:"table",...n}),downcastTableAttribute(a,n)}function enableTableToFigureProperty(o,a,n){const{modelAttribute:s}=n;o.extend("table",{allowAttributes:[s]}),upcastStyleToAttribute(a,{viewElement:/^(table|figure)$/,shouldUpcast:l=>!(l.name=="table"&&l.parent.name=="figure"),...n}),downcastAttributeToStyle(a,{modelElement:"table",...n})}class TablePropertiesView extends View$1{constructor(n,s){super(n);M(this,"options");M(this,"focusTracker");M(this,"keystrokes");M(this,"children");M(this,"borderStyleDropdown");M(this,"borderWidthInput");M(this,"borderColorInput");M(this,"backgroundInput");M(this,"widthInput");M(this,"heightInput");M(this,"alignmentToolbar");M(this,"saveButtonView");M(this,"cancelButtonView");M(this,"_focusables");M(this,"_focusCycler");this.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""}),this.options=s;const{borderStyleDropdown:l,borderWidthInput:c,borderColorInput:u,borderRowLabel:d}=this._createBorderFields(),{backgroundRowLabel:h,backgroundInput:f}=this._createBackgroundFields(),{widthInput:p,operatorLabel:g,heightInput:v,dimensionsLabel:b}=this._createDimensionFields(),{alignmentToolbar:w,alignmentLabel:x}=this._createAlignmentFields();this.focusTracker=new FocusTracker,this.keystrokes=new KeystrokeHandler,this.children=this.createCollection(),this.borderStyleDropdown=l,this.borderWidthInput=c,this.borderColorInput=u,this.backgroundInput=f,this.widthInput=p,this.heightInput=v,this.alignmentToolbar=w;const{saveButtonView:S,cancelButtonView:E}=this._createActionButtons();this.saveButtonView=S,this.cancelButtonView=E,this._focusables=new ViewCollection,this._focusCycler=new FocusCycler({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.children.add(new FormHeaderView(n,{label:this.t("Table properties")})),this.children.add(new FormRowView(n,{labelView:d,children:[d,l,u,c],class:"ck-table-form__border-row"})),this.children.add(new FormRowView(n,{labelView:h,children:[h,f],class:"ck-table-form__background-row"})),this.children.add(new FormRowView(n,{children:[new FormRowView(n,{labelView:b,children:[b,p,g,v],class:"ck-table-form__dimensions-row"}),new FormRowView(n,{labelView:x,children:[x,w],class:"ck-table-properties-form__alignment-row"})]})),this.children.add(new FormRowView(n,{children:[this.saveButtonView,this.cancelButtonView],class:"ck-table-form__action-row"})),this.setTemplate({tag:"form",attributes:{class:["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:this.children})}render(){super.render(),submitHandler({view:this}),[this.borderColorInput,this.backgroundInput].forEach(n=>{this._focusCycler.chain(n.fieldView.focusCycler)}),[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(n=>{this._focusables.add(n),this.focusTracker.add(n.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createBorderFields(){const n=this.options.defaultTableProperties,s={style:n.borderStyle,width:n.borderWidth,color:n.borderColor},l=getLabeledColorInputCreator({colorConfig:this.options.borderColors,columns:5,defaultColorValue:s.color,colorPickerConfig:this.options.colorPickerConfig}),c=this.locale,u=this.t,d=u("Style"),h=new LabelView(c);h.text=u("Border");const f=getBorderStyleLabels(u),p=new LabeledFieldView(c,createLabeledDropdown);p.set({label:d,class:"ck-table-form__border-style"}),p.fieldView.buttonView.set({ariaLabel:d,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:d}),p.fieldView.buttonView.bind("label").to(this,"borderStyle",b=>f[b||"none"]),p.fieldView.on("execute",b=>{this.borderStyle=b.source._borderStyleValue}),p.bind("isEmpty").to(this,"borderStyle",b=>!b),addListToDropdown(p.fieldView,getBorderStyleDefinitions(this,s.style),{role:"menu",ariaLabel:d});const g=new LabeledFieldView(c,createLabeledInputText);g.set({label:u("Width"),class:"ck-table-form__border-width"}),g.fieldView.bind("value").to(this,"borderWidth"),g.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),g.fieldView.on("input",()=>{this.borderWidth=g.fieldView.element.value});const v=new LabeledFieldView(c,l);return v.set({label:u("Color"),class:"ck-table-form__border-color"}),v.fieldView.bind("value").to(this,"borderColor"),v.bind("isEnabled").to(this,"borderStyle",isBorderStyleSet),v.fieldView.on("input",()=>{this.borderColor=v.fieldView.value}),this.on("change:borderStyle",(b,w,x,S)=>{isBorderStyleSet(x)||(this.borderColor="",this.borderWidth=""),isBorderStyleSet(S)||(this.borderColor=s.color,this.borderWidth=s.width)}),{borderRowLabel:h,borderStyleDropdown:p,borderColorInput:v,borderWidthInput:g}}_createBackgroundFields(){const n=this.locale,s=this.t,l=new LabelView(n);l.text=s("Background");const c=getLabeledColorInputCreator({colorConfig:this.options.backgroundColors,columns:5,defaultColorValue:this.options.defaultTableProperties.backgroundColor,colorPickerConfig:this.options.colorPickerConfig}),u=new LabeledFieldView(n,c);return u.set({label:s("Color"),class:"ck-table-properties-form__background"}),u.fieldView.bind("value").to(this,"backgroundColor"),u.fieldView.on("input",()=>{this.backgroundColor=u.fieldView.value}),{backgroundRowLabel:l,backgroundInput:u}}_createDimensionFields(){const n=this.locale,s=this.t,l=new LabelView(n);l.text=s("Dimensions");const c=new LabeledFieldView(n,createLabeledInputText);c.set({label:s("Width"),class:"ck-table-form__dimensions-row__width"}),c.fieldView.bind("value").to(this,"width"),c.fieldView.on("input",()=>{this.width=c.fieldView.element.value});const u=new View$1(n);u.setTemplate({tag:"span",attributes:{class:["ck-table-form__dimension-operator"]},children:[{text:"×"}]});const d=new LabeledFieldView(n,createLabeledInputText);return d.set({label:s("Height"),class:"ck-table-form__dimensions-row__height"}),d.fieldView.bind("value").to(this,"height"),d.fieldView.on("input",()=>{this.height=d.fieldView.element.value}),{dimensionsLabel:l,widthInput:c,operatorLabel:u,heightInput:d}}_createAlignmentFields(){const n=this.locale,s=this.t,l=new LabelView(n);l.text=s("Alignment");const c=new ToolbarView(n);return c.set({role:"radiogroup",isCompact:!0,ariaLabel:s("Table alignment toolbar")}),fillToolbar({view:this,icons:{left:icons.objectLeft,center:icons.objectCenter,right:icons.objectRight},toolbar:c,labels:this._alignmentLabels,propertyName:"alignment",defaultValue:this.options.defaultTableProperties.alignment}),{alignmentLabel:l,alignmentToolbar:c}}_createActionButtons(){const n=this.locale,s=this.t,l=new ButtonView(n),c=new ButtonView(n),u=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];return l.set({label:s("Save"),icon:icons.check,class:"ck-button-save",type:"submit",withText:!0}),l.bind("isEnabled").toMany(u,"errorText",(...d)=>d.every(h=>!h)),c.set({label:s("Cancel"),icon:icons.cancel,class:"ck-button-cancel",withText:!0}),c.delegate("execute").to(this,"cancel"),{saveButtonView:l,cancelButtonView:c}}get _alignmentLabels(){const n=this.locale,s=this.t,l=s("Align table to the left"),c=s("Center table"),u=s("Align table to the right");return n.uiLanguageDirection==="rtl"?{right:u,center:c,left:l}:{left:l,center:c,right:u}}}function isBorderStyleSet(o){return o!=="none"}var tableProperties='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="m15.5 11.5 1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';const ERROR_TEXT_TIMEOUT=500,propertyToCommandMap={borderStyle:"tableBorderStyle",borderColor:"tableBorderColor",borderWidth:"tableBorderWidth",backgroundColor:"tableBackgroundColor",width:"tableWidth",height:"tableHeight",alignment:"tableAlignment"};class TablePropertiesUI extends Plugin{constructor(n){super(n);M(this,"_defaultTableProperties");M(this,"_balloon");M(this,"view",null);M(this,"_undoStepBatch");M(this,"_isReady");n.config.define("table.tableProperties",{borderColors:defaultColors,backgroundColors:defaultColors})}static get requires(){return[ContextualBalloon]}static get pluginName(){return"TablePropertiesUI"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.t;this._defaultTableProperties=getNormalizedDefaultTableProperties(n.config.get("table.tableProperties.defaultProperties"),{includeAlignmentProperty:!0}),this._balloon=n.plugins.get(ContextualBalloon),n.ui.componentFactory.add("tableProperties",l=>{const c=new ButtonView(l);c.set({label:s("Table properties"),icon:tableProperties,tooltip:!0}),this.listenTo(c,"execute",()=>this._showView());const u=Object.values(propertyToCommandMap).map(d=>n.commands.get(d));return c.bind("isEnabled").toMany(u,"isEnabled",(...d)=>d.some(h=>h)),c})}destroy(){super.destroy(),this.view&&this.view.destroy()}_createPropertiesView(){const n=this.editor,s=n.config.get("table.tableProperties"),l=normalizeColorOptions(s.borderColors),c=getLocalizedColorOptions(n.locale,l),u=normalizeColorOptions(s.backgroundColors),d=getLocalizedColorOptions(n.locale,u),h=s.colorPicker!==!1,f=new TablePropertiesView(n.locale,{borderColors:c,backgroundColors:d,defaultTableProperties:this._defaultTableProperties,colorPickerConfig:h?s.colorPicker||{}:!1}),p=n.t;f.render(),this.listenTo(f,"submit",()=>{this._hideView()}),this.listenTo(f,"cancel",()=>{this._undoStepBatch.operations.length&&n.execute("undo",this._undoStepBatch),this._hideView()}),f.keystrokes.set("Esc",(b,w)=>{this._hideView(),w()}),clickOutsideHandler({emitter:f,activator:()=>this._isViewInBalloon,contextElements:[this._balloon.view.element],callback:()=>this._hideView()});const g=getLocalizedColorErrorText(p),v=getLocalizedLengthErrorText(p);return f.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle")),f.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:f.borderColorInput,commandName:"tableBorderColor",errorText:g,validator:colorFieldValidator})),f.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:f.borderWidthInput,commandName:"tableBorderWidth",errorText:v,validator:lineWidthFieldValidator})),f.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:f.backgroundInput,commandName:"tableBackgroundColor",errorText:g,validator:colorFieldValidator})),f.on("change:width",this._getValidatedPropertyChangeCallback({viewField:f.widthInput,commandName:"tableWidth",errorText:v,validator:lengthFieldValidator})),f.on("change:height",this._getValidatedPropertyChangeCallback({viewField:f.heightInput,commandName:"tableHeight",errorText:v,validator:lengthFieldValidator})),f.on("change:alignment",this._getPropertyChangeCallback("tableAlignment")),f}_fillViewFormFromCommandValues(){const n=this.editor.commands,s=n.get("tableBorderStyle");Object.entries(propertyToCommandMap).map(([l,c])=>{const u=l,d=this._defaultTableProperties[u]||"";return[u,n.get(c).value||d]}).forEach(([l,c])=>{(l==="borderColor"||l==="borderWidth")&&s.value==="none"||this.view.set(l,c)}),this._isReady=!0}_showView(){const n=this.editor;this.view||(this.view=this._createPropertiesView()),this.listenTo(n.ui,"update",()=>{this._updateView()}),this._fillViewFormFromCommandValues(),this._balloon.add({view:this.view,position:getBalloonTablePositionData(n)}),this._undoStepBatch=n.model.createBatch(),this.view.focus()}_hideView(){const n=this.editor;this.stopListening(n.ui,"update"),this._isReady=!1,this.view.saveButtonView.focus(),this._balloon.remove(this.view),this.editor.editing.view.focus()}_updateView(){const n=this.editor,s=n.editing.view.document;getSelectionAffectedTableWidget(s.selection)?this._isViewVisible&&repositionContextualBalloon(n,"table"):this._hideView()}get _isViewVisible(){return!!this.view&&this._balloon.visibleView===this.view}get _isViewInBalloon(){return!!this.view&&this._balloon.hasView(this.view)}_getPropertyChangeCallback(n){return(s,l,c)=>{this._isReady&&this.editor.execute(n,{value:c,batch:this._undoStepBatch})}}_getValidatedPropertyChangeCallback(n){const{commandName:s,viewField:l,validator:c,errorText:u}=n,d=debounce$1(()=>{l.errorText=u},ERROR_TEXT_TIMEOUT);return(h,f,p)=>{d.cancel(),this._isReady&&(c(p)?(this.editor.execute(s,{value:p,batch:this._undoStepBatch}),l.errorText=null):d())}}}class TableProperties extends Plugin{static get pluginName(){return"TableProperties"}static get isOfficialPlugin(){return!0}static get requires(){return[TablePropertiesEditing,TablePropertiesUI]}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function injectTableCaptionPostFixer(o){o.document.registerPostFixer(a=>tableCaptionPostFixer(a,o))}function tableCaptionPostFixer(o,a){const n=a.document.differ.getChanges();let s=!1;for(const l of n){if(l.type!="insert")continue;const c=l.position.parent;if(c.is("element","table")||l.name=="table"){const u=l.name=="table"?l.position.nodeAfter:c,d=Array.from(u.getChildren()).filter(f=>f.is("element","caption")),h=d.shift();if(!h)continue;for(const f of d)o.move(o.createRangeIn(f),h,"end"),o.remove(f);h.nextSibling&&(o.move(o.createRangeOn(h),u,"end"),s=!0),s=!!d.length||s}}return s}function isTable(o){return!!o&&o.is("element","table")}function getCaptionFromTableModelElement(o){for(const a of o.getChildren())if(a.is("element","caption"))return a;return null}function getCaptionFromModelSelection(o){const a=getSelectionAffectedTable(o);return a?getCaptionFromTableModelElement(a):null}function matchTableCaptionViewElement(o){const a=o.parent;return o.name=="figcaption"&&a&&a.is("element","figure")&&a.hasClass("table")?{name:!0}:o.name=="caption"&&a&&a.is("element","table")?{name:!0}:null}class ToggleTableCaptionCommand extends Command{refresh(){const a=this.editor,n=getSelectionAffectedTable(a.model.document.selection);this.isEnabled=!!n,this.isEnabled?this.value=!!getCaptionFromTableModelElement(n):this.value=!1}execute({focusCaptionOnShow:a=!1}={}){this.editor.model.change(n=>{this.value?this._hideTableCaption(n):this._showTableCaption(n,a)})}_showTableCaption(a,n){const s=this.editor.model,l=getSelectionAffectedTable(s.document.selection),d=this.editor.plugins.get("TableCaptionEditing")._getSavedCaption(l)||a.createElement("caption");s.insertContent(d,l,"end"),n&&a.setSelection(d,"in")}_hideTableCaption(a){const n=this.editor.model,s=getSelectionAffectedTable(n.document.selection),l=this.editor.plugins.get("TableCaptionEditing"),c=getCaptionFromTableModelElement(s);l._saveCaption(s,c),n.deleteContent(a.createSelection(c,"on"))}}class TableCaptionEditing extends Plugin{constructor(n){super(n);M(this,"_savedCaptionsMap");this._savedCaptionsMap=new WeakMap}static get pluginName(){return"TableCaptionEditing"}static get isOfficialPlugin(){return!0}init(){const n=this.editor,s=n.model.schema,l=n.editing.view,c=n.t;s.isRegistered("caption")?s.extend("caption",{allowIn:"table"}):s.register("caption",{allowIn:"table",allowContentOf:"$block",isLimit:!0}),n.commands.add("toggleTableCaption",new ToggleTableCaptionCommand(this.editor)),n.conversion.for("upcast").elementToElement({view:matchTableCaptionViewElement,model:"caption"}),n.conversion.for("dataDowncast").elementToElement({model:"caption",view:(u,{writer:d})=>isTable(u.parent)?d.createContainerElement("figcaption"):null}),n.conversion.for("editingDowncast").elementToElement({model:"caption",view:(u,{writer:d})=>{if(!isTable(u.parent))return null;const h=d.createEditableElement("figcaption");return d.setCustomProperty("tableCaption",!0,h),h.placeholder=c("Enter table caption"),enablePlaceholder({view:l,element:h,keepOnFocus:!0}),toWidgetEditable(h,d)}}),injectTableCaptionPostFixer(n.model)}_getSavedCaption(n){const s=this._savedCaptionsMap.get(n);return s?Element$2.fromJSON(s):null}_saveCaption(n,s){this._savedCaptionsMap.set(n,s.toJSON())}}class TableCaptionUI extends Plugin{static get pluginName(){return"TableCaptionUI"}static get isOfficialPlugin(){return!0}init(){const a=this.editor,n=a.editing.view,s=a.t;a.ui.componentFactory.add("toggleTableCaption",l=>{const c=a.commands.get("toggleTableCaption"),u=new ButtonView(l);return u.set({icon:icons.caption,tooltip:!0,isToggleable:!0}),u.bind("isOn","isEnabled").to(c,"value","isEnabled"),u.bind("label").to(c,"value",d=>s(d?"Toggle caption off":"Toggle caption on")),this.listenTo(u,"execute",()=>{if(a.execute("toggleTableCaption",{focusCaptionOnShow:!0}),c.value){const d=getCaptionFromModelSelection(a.model.document.selection),h=a.editing.mapper.toViewElement(d);if(!h)return;n.scrollToTheSelection(),n.change(f=>{f.addClass("table__caption_highlighted",h)})}a.editing.view.focus()}),u})}}class TableCaption extends Plugin{static get pluginName(){return"TableCaption"}static get isOfficialPlugin(){return!0}static get requires(){return[TableCaptionEditing,TableCaptionUI]}}class TableWidthsCommand extends Command{refresh(){this.isEnabled=!0}execute(a={}){const{model:n,plugins:s}=this.editor;let{table:l=n.document.selection.getSelectedElement(),columnWidths:c,tableWidth:u}=a;c&&(c=Array.isArray(c)?c:c.split(",")),n.change(d=>{u?d.setAttribute("tableWidth",u,l):d.removeAttribute("tableWidth",l);const h=s.get("TableColumnResizeEditing").getColumnGroupElement(l);if(!c&&!h)return;if(!c)return d.remove(h);const f=normalizeColumnWidths(c);if(h)Array.from(h.getChildren()).forEach((p,g)=>d.setAttribute("columnWidth",f[g],p));else{const p=d.createElement("tableColumnGroup");f.forEach(g=>d.appendElement("tableColumn",{columnWidth:g},p)),d.append(p,l)}})}}function upcastColgroupElement(o){return a=>a.on("element:colgroup",(n,s,l)=>{const c=s.modelCursor.findAncestor("table"),u=getColumnGroupElement(c);if(!u)return;const d=getTableColumnElements(u),h=o.getColumns(c);let f=translateColSpanAttribute(u,l.writer);f=Array.from({length:h},(p,g)=>f[g]||"auto"),(f.length!=d.length||f.includes("auto"))&&updateColumnElements(d,u,normalizeColumnWidths(f),l.writer)},{priority:"low"})}function downcastTableResizedClass(){return o=>o.on("insert:table",(a,n,s)=>{const l=s.writer,c=n.item,u=s.mapper.toViewElement(c),d=u.is("element","table")?u:Array.from(u.getChildren()).find(f=>f.is("element","table"));getColumnGroupElement(c)?l.addClass("ck-table-resized",d):l.removeClass("ck-table-resized",d)},{priority:"low"})}class TableColumnResizeEditing extends Plugin{constructor(n){super(n);M(this,"_isResizingActive");M(this,"_resizingData");M(this,"_domEmitter");M(this,"_tableUtilsPlugin");this._isResizingActive=!1,this.set("_isResizingAllowed",!0),this._resizingData=null,this._domEmitter=new(DomEmitterMixin()),this._tableUtilsPlugin=n.plugins.get("TableUtils"),this.on("change:_isResizingAllowed",(s,l,c)=>{const u=c?"removeClass":"addClass";n.editing.view.change(d=>{for(const h of n.editing.view.document.roots)d[u]("ck-column-resize_disabled",n.editing.view.document.getRoot(h.rootName))})})}static get requires(){return[TableEditing,TableUtils]}static get pluginName(){return"TableColumnResizeEditing"}static get isOfficialPlugin(){return!0}init(){this._extendSchema(),this._registerPostFixer(),this._registerConverters(),this._registerResizingListeners(),this._registerResizerInserter();const n=this.editor,s=n.plugins.get("TableColumnResize");n.plugins.get("TableEditing").registerAdditionalSlot({filter:u=>u.is("element","tableColumnGroup"),positionOffset:0});const c=new TableWidthsCommand(n);n.commands.add("resizeTableWidth",c),n.commands.add("resizeColumnWidths",c),this.bind("_isResizingAllowed").to(n,"isReadOnly",s,"isEnabled",c,"isEnabled",(u,d,h)=>!u&&d&&h)}destroy(){this._domEmitter.stopListening(),super.destroy()}getColumnGroupElement(n){return getColumnGroupElement(n)}getTableColumnElements(n){return getTableColumnElements(n)}getTableColumnsWidths(n){return getTableColumnsWidths(n)}_extendSchema(){this.editor.model.schema.extend("table",{allowAttributes:["tableWidth"]}),this.editor.model.schema.register("tableColumnGroup",{allowIn:"table",isLimit:!0}),this.editor.model.schema.register("tableColumn",{allowIn:"tableColumnGroup",allowAttributes:["columnWidth","colSpan"],isLimit:!0})}_registerPostFixer(){const s=this.editor.model;s.document.registerPostFixer(u=>{let d=!1;for(const h of getChangedResizedTables(s)){const f=this.getColumnGroupElement(h),p=this.getTableColumnElements(f),g=this.getTableColumnsWidths(f);let v=normalizeColumnWidths(g);v=l(v,h,this),!isEqual$1(g,v)&&(updateColumnElements(p,f,v,u),d=!0)}return d});function l(u,d,h){const f=h._tableUtilsPlugin.getColumns(d);if(f-u.length===0)return u;const g=u.map(b=>Number(b.replace("%",""))),v=c(h.editor.model.document.differ,d);for(const b of v){const w=f-g.length;if(w===0)continue;const x=w>0,S=h._tableUtilsPlugin.getCellLocation(b).column;if(x){const E=getColumnMinWidthAsPercentage(d,h.editor),T=createFilledArray(w,E);g.splice(S,0,...T)}else{const E=g.splice(S,Math.abs(w));g[S]+=sumArray(E)}}return g.map(b=>b+"%")}function c(u,d){const h=new Set;for(const f of u.getChanges())if(f.type=="insert"&&f.position.nodeAfter&&f.position.nodeAfter.name=="tableCell"&&f.position.nodeAfter.getAncestors().includes(d))h.add(f.position.nodeAfter);else if(f.type=="remove"){const p=f.position.nodeBefore||f.position.nodeAfter;p.name=="tableCell"&&p.getAncestors().includes(d)&&h.add(p)}return h}}_registerConverters(){const s=this.editor.conversion;s.for("upcast").attributeToAttribute({view:{name:"figure",key:"style",value:{width:/[\s\S]+/}},model:{name:"table",key:"tableWidth",value:l=>l.getStyle("width")}}),s.for("downcast").attributeToAttribute({model:{name:"table",key:"tableWidth"},view:l=>({name:"figure",key:"style",value:{width:l}})}),s.elementToElement({model:"tableColumnGroup",view:"colgroup"}),s.elementToElement({model:"tableColumn",view:"col"}),s.for("downcast").add(downcastTableResizedClass()),s.for("upcast").add(upcastColgroupElement(this._tableUtilsPlugin)),s.for("upcast").attributeToAttribute({view:{name:"col",styles:{width:/.*/}},model:{key:"columnWidth",value:l=>{const c=l.getStyle("width");return!c||!c.endsWith("%")&&!c.endsWith("pt")?"auto":c}}}),s.for("upcast").attributeToAttribute({view:{name:"col",key:"span"},model:"colSpan"}),s.for("downcast").attributeToAttribute({model:{name:"tableColumn",key:"columnWidth"},view:l=>({key:"style",value:{width:l}})})}_registerResizingListeners(){const n=this.editor.editing.view;n.addObserver(MouseEventsObserver),n.document.on("mousedown",this._onMouseDownHandler.bind(this),{priority:"high"}),this._domEmitter.listenTo(global$1.window.document,"mousemove",throttle$2(this._onMouseMoveHandler.bind(this),50)),this._domEmitter.listenTo(global$1.window.document,"mouseup",this._onMouseUpHandler.bind(this))}_onMouseDownHandler(n,s){const l=s.target;if(!l.hasClass("ck-table-column-resizer")||!this._isResizingAllowed)return;const c=this.editor,u=c.editing.mapper.toModelElement(l.findAncestor("figure"));if(!c.model.canEditAt(u))return;s.preventDefault(),n.stop();const d=p(u,this._tableUtilsPlugin,c),h=l.findAncestor("table"),f=c.editing.view;Array.from(h.getChildren()).find(b=>b.is("element","colgroup"))||f.change(b=>{g(b,d,h)}),this._isResizingActive=!0,this._resizingData=this._getResizingData(s,d),f.change(b=>v(b,h,this._resizingData));function p(b,w,x){const S=Array(w.getColumns(b)),E=new TableWalker(b);for(const T of E){const C=x.editing.mapper.toViewElement(T.cell),A=x.editing.view.domConverter.mapViewToDom(C),R=getDomCellOuterWidth(A);(!S[T.column]||R<S[T.column])&&(S[T.column]=toPrecision(R))}return S}function g(b,w,x){const S=b.createContainerElement("colgroup");for(let E=0;E<w.length;E++){const T=b.createEmptyElement("col"),C=`${toPrecision(w[E]/sumArray(w)*100)}%`;b.setStyle("width",C,T),b.insert(b.createPositionAt(S,"end"),T)}b.insert(b.createPositionAt(x,0),S)}function v(b,w,x){const S=x.widths.viewFigureWidth/x.widths.viewFigureParentWidth;b.addClass("ck-table-resized",w),b.addClass("ck-table-column-resizer__active",x.elements.viewResizer),b.setStyle("width",`${toPrecision(S*100)}%`,w.findAncestor("figure"))}}_onMouseMoveHandler(n,s){if(!this._isResizingActive)return;if(!this._isResizingAllowed){this._onMouseUpHandler();return}const{columnPosition:l,flags:{isRightEdge:c,isTableCentered:u,isLtrContent:d},elements:{viewFigure:h,viewLeftColumn:f,viewRightColumn:p},widths:{viewFigureParentWidth:g,tableWidth:v,leftColumnWidth:b,rightColumnWidth:w}}=this._resizingData,x=-b+COLUMN_MIN_WIDTH_IN_PIXELS,S=c?g-v:w-COLUMN_MIN_WIDTH_IN_PIXELS,E=(d?1:-1)*(c&&u?2:1),T=clamp$1((s.clientX-l)*E,Math.min(x,0),Math.max(S,0));T!==0&&this.editor.editing.view.change(C=>{const A=toPrecision((b+T)*100/v);if(C.setStyle("width",`${A}%`,f),c){const R=toPrecision((v+T)*100/g);C.setStyle("width",`${R}%`,h)}else{const R=toPrecision((w-T)*100/v);C.setStyle("width",`${R}%`,p)}})}_onMouseUpHandler(){if(!this._isResizingActive)return;const{viewResizer:n,modelTable:s,viewFigure:l,viewColgroup:c}=this._resizingData.elements,u=this.editor,d=u.editing.view,h=this.getColumnGroupElement(s),f=Array.from(c.getChildren()).filter(S=>S.is("view:element")),p=h?this.getTableColumnsWidths(h):null,g=f.map(S=>S.getStyle("width")),v=!isEqual$1(p,g),b=s.getAttribute("tableWidth"),w=l.getStyle("width"),x=b!==w;(v||x)&&(this._isResizingAllowed?u.execute("resizeTableWidth",{table:s,tableWidth:`${toPrecision(w)}%`,columnWidths:g}):d.change(S=>{if(p)for(const E of f)S.setStyle("width",p.shift(),E);else S.remove(c);x&&(b?S.setStyle("width",b,l):S.removeStyle("width",l)),!p&&!b&&S.removeClass("ck-table-resized",[...l.getChildren()].find(E=>E.name==="table"))})),d.change(S=>{S.removeClass("ck-table-column-resizer__active",n)}),this._isResizingActive=!1,this._resizingData=null}_getResizingData(n,s){const l=this.editor,c=n.domEvent.clientX,u=n.target,d=u.findAncestor("td")||u.findAncestor("th"),h=l.editing.mapper.toModelElement(d),f=h.findAncestor("table"),p=getColumnEdgesIndexes(h,this._tableUtilsPlugin).rightEdge,g=this._tableUtilsPlugin.getColumns(f)-1,v=p===g,b=!f.hasAttribute("tableAlignment"),w=l.locale.contentLanguageDirection!=="rtl",x=d.findAncestor("table"),S=x.findAncestor("figure"),E=[...x.getChildren()].find(H=>H.is("element","colgroup")),T=E.getChild(p),C=v?void 0:E.getChild(p+1),A=getElementWidthInPixels(l.editing.view.domConverter.mapViewToDom(S.parent)),R=getElementWidthInPixels(l.editing.view.domConverter.mapViewToDom(S)),j=getTableWidthInPixels(f,l),D=s[p],O=v?void 0:s[p+1];return{columnPosition:c,flags:{isRightEdge:v,isTableCentered:b,isLtrContent:w},elements:{viewResizer:u,modelTable:f,viewFigure:S,viewColgroup:E,viewLeftColumn:T,viewRightColumn:C},widths:{viewFigureParentWidth:A,viewFigureWidth:R,tableWidth:j,leftColumnWidth:D,rightColumnWidth:O}}}_registerResizerInserter(){this.editor.conversion.for("editingDowncast").add(n=>{n.on("insert:tableCell",(s,l,c)=>{const u=l.item,d=c.mapper.toViewElement(u),h=c.writer;h.insert(h.createPositionAt(d,"end"),h.createUIElement("div",{class:"ck-table-column-resizer"}))},{priority:"lowest"})})}}class TableColumnResize extends Plugin{static get requires(){return[TableColumnResizeEditing,TableCellWidthEditing]}static get pluginName(){return"TableColumnResize"}static get isOfficialPlugin(){return!0}}/**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 *//**
 * @license Copyright (c) 2003-2025, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-licensing-options
 */function modelElementToPlainText(o){if(o.is("$text")||o.is("$textProxy"))return o.data;const a=o;let n="",s=null;for(const l of a.getChildren()){const c=modelElementToPlainText(l);s&&s.is("element")&&(n+=`
`),n+=c,s=l}return n}class WordCount extends Plugin{constructor(n){super(n);M(this,"_config");M(this,"_outputView");M(this,"_wordsMatchRegExp");this.set("characters",0),this.set("words",0),Object.defineProperties(this,{characters:{get(){return this.characters=this._getCharacters(this._getText())}},words:{get(){return this.words=this._getWords(this._getText())}}}),this.set("_wordsLabel",void 0),this.set("_charactersLabel",void 0),this._config=n.config.get("wordCount")||{},this._outputView=void 0,this._wordsMatchRegExp=env$1.features.isRegExpUnicodePropertySupported?new RegExp("([\\p{L}\\p{N}]+\\S?)+","gu"):/([a-zA-Z0-9À-ž]+\S?)+/gu}static get pluginName(){return"WordCount"}static get isOfficialPlugin(){return!0}init(){this.editor.model.document.on("change:data",throttle$2(this._refreshStats.bind(this),250)),typeof this._config.onUpdate=="function"&&this.on("update",(s,l)=>{this._config.onUpdate(l)}),isElement$2(this._config.container)&&this._config.container.appendChild(this.wordCountContainer)}destroy(){this._outputView&&(this._outputView.element.remove(),this._outputView.destroy()),super.destroy()}get wordCountContainer(){const n=this.editor,s=n.t,l=n.config.get("wordCount.displayWords"),c=n.config.get("wordCount.displayCharacters"),u=Template.bind(this,this),d=[];return this._outputView||(this._outputView=new View$1,(l||l===void 0)&&(this.bind("_wordsLabel").to(this,"words",h=>s("Words: %0",h)),d.push({tag:"div",children:[{text:[u.to("_wordsLabel")]}],attributes:{class:"ck-word-count__words"}})),(c||c===void 0)&&(this.bind("_charactersLabel").to(this,"characters",h=>s("Characters: %0",h)),d.push({tag:"div",children:[{text:[u.to("_charactersLabel")]}],attributes:{class:"ck-word-count__characters"}})),this._outputView.setTemplate({tag:"div",attributes:{class:["ck","ck-word-count"]},children:d}),this._outputView.render()),this._outputView.element}_getText(){let n="";for(const s of this.editor.model.document.getRoots())n!==""&&(n+=`
`),n+=modelElementToPlainText(s);return n}_getCharacters(n){return n.replace(/\n/g,"").length}_getWords(n){return(n.match(this._wordsMatchRegExp)||[]).length}_refreshStats(){const n=this._getText(),s=this.words=this._getWords(n),l=this.characters=this._getCharacters(n);this.fire("update",{words:s,characters:l})}}const LICENSE_KEY="GPL";function CustomCkEditor5({style:o={},...a}){var h;const n=React2.useRef(null),s=React2.useRef(null),[l,c]=React2.useState(!1),{i18n:u}=useTranslation();React2.useEffect(()=>(c(!0),()=>c(!1)),[]);const{editorConfig:d}=React2.useMemo(()=>l?{editorConfig:{toolbar:{items:["heading","|","fontSize","fontFamily","fontColor","fontBackgroundColor","|","bold","italic","underline","strikethrough","|","specialCharacters","insertImage","horizontalLine","pageBreak","link","mediaEmbed","insertTable","highlight","htmlEmbed","|","alignment","|","bulletedList","numberedList","todoList","outdent","indent"],shouldNotGroupWhenFull:!1},plugins:[Alignment,Autoformat,AutoImage,AutoLink,Autosave,BalloonToolbar,BlockQuote,Bold,Bookmark,Code,CodeBlock,Essentials,FindAndReplace,FontBackgroundColor,FontColor,FontFamily,FontSize,FullPage,GeneralHtmlSupport,Heading,Highlight,HorizontalLine,HtmlComment,HtmlEmbed,ImageBlock,ImageCaption,ImageInline,ImageInsert,ImageInsertViaUrl,ImageResize,ImageStyle,ImageTextAlternative,ImageToolbar,ImageUpload,Indent,IndentBlock,Italic,Link$1,LinkImage,List,ListProperties,Markdown,MediaEmbed,Mention,PageBreak,Paragraph,PasteFromMarkdownExperimental,PasteFromOffice,PictureEditing,RemoveFormat,ShowBlocks,SourceEditing,SpecialCharacters,SpecialCharactersArrows,SpecialCharactersCurrency,SpecialCharactersEssentials,SpecialCharactersLatin,SpecialCharactersMathematical,SpecialCharactersText,Strikethrough,Style,Subscript,Superscript,Table,TableCaption,TableCellProperties,TableColumnResize,TableProperties,TableToolbar,TextPartLanguage,TextTransformation,TodoList,Underline,WordCount],balloonToolbar:["bold","italic","|","link","insertImage","|","bulletedList","numberedList"],extraPlugins:a.extraPlugins,mediaEmbed:{previewsInData:!0,providers:[{name:"youtube",url:/^https:\/\/www\.youtube\.com\/watch\?v=([\w-]+)/,html:f=>`<div style="position: relative; padding-bottom: 56.25%; height: 0;"><iframe src="https://www.youtube.com/embed/${f[1]}" style="position: absolute; width: 100%; height: 100%; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}]},fontFamily:{options:["Default","Arial","Courier New","Inter","Roboto","Times New Roman","Source Serif 4","Noto Sans JP"],supportAllValues:!0},fontSize:{options:[10,12,14,"default",18,20,22,24],supportAllValues:!0},fontColor:{columns:6,colors:[{color:"#18181B",label:"title"},{color:"#61616B",label:"subtitle"},{color:"#313135",label:"body"},{color:"#878792",label:"placeholder"},{color:"#A2A2AA",label:"disabled"},{color:"#FFFFFF",label:"stable"},{color:"#287CF0",label:"primay"},{color:"#FC7A1C",label:"warning"},{color:"#3AAC6D",label:"success"},{color:"#FAAD1E",label:"secondary3"},{color:"#943CDD",label:"secondary5"}]},heading:{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h1",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h2",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h3",title:"Heading 3",class:"ck-heading_heading3"},{model:"heading4",view:"h4",title:"Heading 4",class:"ck-heading_heading4"},{model:"heading5",view:"h5",title:"Heading 5",class:"ck-heading_heading5"},{model:"heading6",view:"h6",title:"Heading 6",class:"ck-heading_heading6"}]},htmlSupport:{allow:[{name:/^.*$/,styles:!0,attributes:!0,classes:!0}]},image:{toolbar:["toggleImageCaption","imageTextAlternative","|","imageStyle:inline","imageStyle:wrapText","imageStyle:breakText","|","resizeImage"]},language:"vi",licenseKey:LICENSE_KEY,link:{addTargetToExternalLinks:!0,defaultProtocol:"https://",decorators:{toggleDownloadable:{mode:"manual",label:"Downloadable",attributes:{download:"file"}}}},menuBar:{isVisible:a.menuBar},table:{contentToolbar:["tableColumn","tableRow","mergeTableCells","tableProperties","tableCellProperties"]},...a.customConfig??{},placeholder:a.placeholder}}:{},[l,u.language,a.customConfig]);return jsxRuntimeExports.jsx("div",{id:a.id,ref:n,className:`col editor-container editor-container_classic-editor editor-container_include-style ${a.className??""} ${(h=a.helperText)!=null&&h.length?"helper-text":""}`,"helper-text":a.helperText,style:{"--helper-text-color":a.helperTextColor??"#e14337",...o},children:jsxRuntimeExports.jsx("div",{className:"editor-container__editor",children:jsxRuntimeExports.jsx("div",{ref:s,children:d&&jsxRuntimeExports.jsx(CKEditor,{onReady:a.onReady,onAfterDestroy:a.onAfterDestroy,onFocus:a.onFocus,onChange:a.onChange,onBlur:a.onBlur,editor:ClassicEditor,onError:a.onError,config:d,disabled:a.disabled,data:a.value})})})})}const styles$5={"slider-container":"_slider-container_13ll3_1","range-bar":"_range-bar_13ll3_13","value-bar":"_value-bar_13ll3_33","thumb-dot":"_thumb-dot_13ll3_61","tooltip-container":"_tooltip-container_13ll3_127","tooltip-message":"_tooltip-message_13ll3_141","mark-point":"_mark-point_13ll3_159","mark-text":"_mark-text_13ll3_181"};function Slider({min:o=0,max:a=100,formatter:n,className:s,rangeBarWidth:l=6,defaultValue:c,disabled:u,marks:d,onChange:h,onChangeComplete:f,range:p,step:g=1,style:v={},tooltip:b}){const[w,x]=React2.useState(p?[o,a]:(o+a)/2),S=React2.useRef(null),[E,T]=React2.useState(null),[C,A]=React2.useState(null),R=React2.useMemo(()=>b?{onFocus:D=>{A(D.target)},onMouseOver:D=>{A(D.target)},onMouseOut:D=>{document.activeElement!==D.target&&A(null)},onBlur:()=>{var D;(D=S.current)!=null&&D.contains(document.activeElement)||A(null)}}:{},[b,S]),j=React2.useDeferredValue(C&&w?{message:C.getAttribute("slider-value")??"",position:"top"}:null);return React2.useEffect(()=>{let D=w;const O=q=>{if(!E||!S.current)return;const{left:Y,width:te}=S.current.getBoundingClientRect();if(D=(q.clientX-Y)/te*(a-o)+o,D=Math.round(D/g)*g,p)if(Array.isArray(w)){let ee=[...w];E==="min"?ee[0]=Math.max(o,Math.min(D,ee[1]-g)):E==="max"&&(ee[1]=Math.min(a,Math.max(D,ee[0]+g))),x(ee),h==null||h(ee)}else x([o,a]),h==null||h([o,a]);else!p&&typeof w=="number"&&(D=Math.max(o,Math.min(a,D)),x(D),h==null||h(D))},H=()=>{T(null),f&&f(D),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",H)};return E&&(document.addEventListener("mousemove",O),document.addEventListener("mouseup",H)),()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",H)}},[o,a,g,w,p,h,f,E]),React2.useEffect(()=>{c!=null&&(typeof c=="number"?(p&&(c>a||c<o?x([o,a]):x([o,c])),x(c)):isNaN(c[0])||isNaN(c[1])||c[0]>a||c[0]<o||c[1]>a||c[1]<o?x([o,a]):x(c))},[c]),jsxRuntimeExports.jsxs("div",{ref:S,className:`${styles$5["slider-container"]} ${s??"subtitle-3"} ${p?styles$5.range:""}`,style:{"--range-width":typeof l=="number"?`${l}px`:l,...v},children:[jsxRuntimeExports.jsx("div",{className:styles$5["range-bar"],children:jsxRuntimeExports.jsx("div",{className:styles$5["value-bar"],style:{marginLeft:p?`${(w[0]-o)/(a-o)*100}%`:"none",width:`calc(${(p?w[1]-w[0]:w-o)/(a-o)*100}%)`}})}),b&&j&&C?ReactDOM.createPortal(jsxRuntimeExports.jsx(TooltipElement,{rect:C.getBoundingClientRect(),tooltip:j}),document.body):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),d&&d.map(D=>D.value<o||D.value>a?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:styles$5["mark-point"],style:{left:`${(D.value-o)/(a-o)*100}%`}}),jsxRuntimeExports.jsx(Text$2,{className:`${styles$5["mark-text"]}`,style:{left:`${(D.value-o)/(a-o)*100}%`},children:D.label??(n?n(D.value):D.value)})]})),p?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("button",{type:"button",disabled:u,className:styles$5["thumb-dot"],...R,"slider-value":n?n(w[0]):w[0],onPointerDown:u?void 0:()=>{T("min")},style:{left:`${(w[0]-o)/(a-o)*100}%`}}),jsxRuntimeExports.jsx("button",{type:"button",disabled:u,className:styles$5["thumb-dot"],...R,"slider-value":n?n(w[1]):w[1],onPointerDown:u?void 0:()=>{T("max")},style:{left:`${(w[1]-o)/(a-o)*100}%`}})]}):jsxRuntimeExports.jsx("button",{type:"button",disabled:u,className:styles$5["thumb-dot"],...R,"slider-value":n?n(w):w,onPointerDown:u?void 0:()=>{T("single")},style:{left:`${(w-o)/(a-o)*100}%`}})]})}const TooltipElement=({rect:o,tooltip:a})=>{switch(React2.useMemo(()=>{if(!o)return null;let s=a.position??"bottom";return document.body.offsetHeight-o.bottom<100&&s==="bottom"?s="top":o.top<100&&s==="top"&&(s="bottom"),document.body.offsetWidth-o.right<100&&s==="right"?s="left":o.left<100&&s==="left"&&(s="right"),s},[o,a.position])){case"top":return jsxRuntimeExports.jsxs("div",{ref:s=>{if(s){const l=s.getBoundingClientRect();l.x<0?(s.style.left=o.x+o.width/2+"px",s.style.transform="translateX(-1.8rem)",s.style.alignItems="start"):l.right>document.body.offsetWidth&&(s.style.left="unset",s.style.right=document.body.offsetWidth-o.right-o.width/2+"px",s.style.transform="translateX(-1.4rem)",s.style.alignItems="end")}},className:`col ${styles$5["tooltip-container"]}`,style:{alignItems:"center",bottom:document.body.offsetHeight-o.top-4,left:o.left+o.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$5["tooltip-message"]}`,maxLine:2,children:a.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderTop:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})})]},a.message);case"bottom":return jsxRuntimeExports.jsxs("div",{ref:s=>{if(s){const l=s.getBoundingClientRect();l.x<0?(s.style.left=o.x+o.width/2+"px",s.style.transform="translateX(-1.8rem)",s.style.alignItems="start"):l.right>document.body.offsetWidth&&(s.style.left="unset",s.style.right=document.body.offsetWidth-o.right-o.width/2+"px",s.style.transform="translateX(-1.4rem)",s.style.alignItems="end")}},className:`col ${styles$5["tooltip-container"]}`,style:{alignItems:"center",top:o.bottom+4,left:o.left+o.width/2,transform:"translateX(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.2rem",transform:"translateY(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderLeft:"0.6rem solid transparent",borderRight:"0.6rem solid transparent",borderBottom:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$5["tooltip-message"]}`,maxLine:2,children:a.message})]},a.message);case"left":return jsxRuntimeExports.jsxs("div",{ref:s=>{if(s){const l=s.getBoundingClientRect();l.y<0?(s.style.top=o.y+o.height/2+"px",s.style.transform="translateY(-1.8rem)",s.style.alignItems="start"):l.bottom>document.body.offsetHeight&&(s.style.top="unset",s.style.bottom=document.body.offsetHeight-o.bottom-o.height/2+"px",s.style.transform="translateY(-1.4rem)",s.style.alignItems="end")}},className:`row ${styles$5["tooltip-container"]}`,style:{top:o.top+o.height/2,right:document.body.offsetWidth-o.left-4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$5["tooltip-message"]}`,maxLine:2,children:a.message}),jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(-0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderLeft:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})})]},a.message);case"right":return jsxRuntimeExports.jsxs("div",{ref:s=>{if(s){const l=s.getBoundingClientRect();l.y<0?(s.style.top=o.y+o.height/2+"px",s.style.transform="translateY(-1.8rem)",s.style.alignItems="start"):l.bottom>document.body.offsetHeight&&(s.style.top="unset",s.style.bottom=document.body.offsetHeight-o.bottom-o.height/2+"px",s.style.transform="translateY(-1.4rem)",s.style.alignItems="end")}},className:`row ${styles$5["tooltip-container"]}`,style:{top:o.top+o.height/2,left:o.right+4,transform:"translateY(-50%)"},children:[jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"1.2rem 0",transform:"translateX(0.2rem)"},children:jsxRuntimeExports.jsx("div",{style:{borderTop:"0.6rem solid transparent",borderBottom:"0.6rem solid transparent",borderRight:"0.8rem solid var(--neutral-main-reverse-background-color,light-dark(#242428, #EFEFF0))",borderRadius:2}})}),jsxRuntimeExports.jsx(Text$2,{className:`body-3 ${styles$5["tooltip-message"]}`,maxLine:2,children:a.message})]},a.message);default:return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}},styles$4={"simple-color-picker":"_simple-color-picker_zcr1r_1","color-picker-container":"_color-picker-container_zcr1r_3","helper-text":"_helper-text_zcr1r_211"};class Util{constructor(){M(this,"dateDefault",new Date("2022-1-1"))}static dateTime_stringToDecimal(a){return new Date(a).getTime()/1e3}static tryParseInt(a){return a!=null&&a!==void 0&&a!==""?parseInt(`${a}`.replaceAll(",","")):0}static tryParseFloat(a){return a!=null&&a!==void 0&&a!==""?parseFloat(`${a}`.replaceAll(",","")):0}static set_timeRefreshToken(){const a=new Date(Date.now());a.setDate(a.getDate()+30),a.setMinutes(a.getMinutes()-10),localStorage.setItem("time_tokenRefresh",`${a}`)}static get_timeRefreshToken(){if(localStorage.getItem("time_tokenRefresh"))return new Date(parseInt(localStorage.getItem("time_tokenRefresh"))).getTime()}static getStringDateNow(){const a=new Date,n=a.getDate().toString().padStart(2,"0"),s=(a.getMonth()+1).toString().padStart(2,"0"),l=a.getFullYear();return`${n} -${s} -${l} `}static money(a){if(a){if(typeof a=="string")return a.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");if(!isNaN(a))return a=a.toFixed(2),a.toString().replace(".00","").replace(/\B(?=(\d{3})+(?!\d))/g,",")}return"0"}static moneytmp(a,n){return(a/1).toFixed(n).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static stringToDate(a,n="dd/MM/yyyy",s="/"){let l=n.toLowerCase(),c="",u=a,d="",h=!1;n.trim().indexOf(" ")>-1&&(l=n.trim().split(" ")[0],c=n.trim().split(" ")[1],u=a.trim().split(" ")[0],d=a.trim().split(" ")[1],h=!0);let p=l.toLowerCase().split(s),g=u.split(s),v=p.indexOf("mm"),b=p.indexOf("dd"),w=p.indexOf("yyyy"),x=0,S=0,E=0;if(h){let A=c.split(":"),R=A.indexOf("HH");R<0&&(R=A.indexOf("hh"));let j=A.indexOf("mm"),D=A.indexOf("ss"),O=d.split(":");x=O[R]?parseInt(O[R]):0,S=O[j]?parseInt(O[j]):0,E=O[D]?parseInt(O[D]):0}let T=parseInt(g[v]);return T-=1,new Date(parseInt(g[w]),T,parseInt(g[b]),x,S,E)}static datetoStringDefault(){const a=new Date,n=String(a.getDate()).padStart(2,"0"),s=String(a.getMonth()+1).padStart(2,"0"),l=a.getFullYear();return`${n}/${s}/${l}`}static datetoString(a=new Date,n="dd/mm/yyyy"){let s=n.toLowerCase().split(" "),l=s[0],c=s[1],u=l.includes("hh");return u&&(c=s[0],l=s[1]),l&&(l=l.split(n.includes("/")?"/":"-").map(d=>{switch(d.toLowerCase()){case"dd":return a.getDate()<10?`0${a.getDate()}`:`${a.getDate()}`;case"mm":return a.getMonth()+1<10?`0${a.getMonth()+1}`:`${a.getMonth()+1}`;case"yyyy":return`${a.getFullYear()}`}}).join(n.includes("/")?"/":"-")),c?(c=c.split(":").map(d=>{switch(d){case"hh":return a.getHours()<10?`0${a.getHours()}`:`${a.getHours()}`;case"mm":return a.getMinutes()<10?`0${a.getMinutes()}`:`${a.getMinutes()}`;case"ss":return a.getSeconds()<10?`0${a.getSeconds()}`:`${a.getSeconds()}`}}).join(":"),u?c+(l?` ${l}`:""):l+(c?` ${c}`:"")):l}static setStorage(a,n){localStorage.setItem(a,n)}static clearStorage(){localStorage.clear()}static removeStorage(a){localStorage.removeItem(a)}static setSession(a,n){sessionStorage.setItem(a,n)}static clearSession(){sessionStorage.clear()}static removeSession(a){sessionStorage.removeItem(a)}static setCookie(a,n,s=30){const l=new Date;l.setTime(l.getTime()+s*24*60*60*1e3);let c="expires="+l.toUTCString();document.cookie=a+"="+n+";"+c+";path=/"}static getCookie(a){let n=a+"=",s=document.cookie.split(";");for(let l=0;l<s.length;l++){let c=s[l];for(;c.charAt(0)==" ";)c=c.substring(1);if(c.indexOf(n)==0)return c.substring(n.length,c.length)}return""}static deleteCookie(a){document.cookie=a+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"}static clearCookie(a=[]){document.cookie.split(";").forEach(n=>{n.trim().length&&!a.includes(n.split("=")[0].trim())&&this.deleteCookie(n)})}static randomString(a){let n="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=s.length;for(let c=0;c<a;c++)n+=s.charAt(Math.floor(Math.random()*l));return n}static decodeJwtResponse(a){var n=a.split(".")[1],s=n.replace(/-/g,"+").replace(/_/g,"/"),l=decodeURIComponent(window.atob(s).split("").map(function(c){return"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(l)}static hexToRGB(a){let n=!1,s=a.slice(a.startsWith("#")?1:0);return s.length===3?s=[...s].map(l=>l+l).join(""):s.length===8&&(n=!0),s=parseInt(s,16),"rgb"+(n?"a":"")+"("+(s>>>(n?24:16))+", "+((s&(n?16711680:65280))>>>(n?16:8))+", "+((s&(n?65280:255))>>>(n?8:0))+(n?`, ${s&255} `:"")+")"}static rgbToHex(a){const n=a.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),?\s*(\d*\.?\d+)?\)/);if(!n)throw new Error("Invalid RGB or RGBA format");const s=parseInt(n[1]),l=parseInt(n[2]),c=parseInt(n[3]),u=n[4]!==void 0?parseFloat(n[4]):1,d=Math.max(0,Math.min(255,s)).toString(16).padStart(2,"0"),h=Math.max(0,Math.min(255,l)).toString(16).padStart(2,"0"),f=Math.max(0,Math.min(255,c)).toString(16).padStart(2,"0"),p=Math.max(0,Math.min(1,u))*255,g=Math.round(p).toString(16).padStart(2,"0");return`#${d}${h}${f}${g}`}static colorNameToHex(a){return{aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4","indianred ":"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpu:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[a.toLowerCase()]}static prettyJsonToString(a){return JSON.stringify(a,null,6).replace(/\n( *)/g,function(n,s){return"<br>"+"&nbsp;".repeat(s.length)})}static syntaxHighlight(a){return JSON.stringify(a,null,6).replace(/\n( *)/g,function(s,l){var c="number";return/^"/.test(s)?/:$/.test(s)?c="key":c="string":/true|false/.test(s)?c="boolean":/null/.test(s)&&(c="null"),"<br>"+"&nbsp;".repeat(l.length)+'<span className="'+c+'">'+s+"</span>"})}static generateRandomColor(){return`#${Math.floor(Math.random()*16777215).toString(16)}`}static generateLightColorRgb(){return"rgb("+(Math.floor(27*Math.random())+230)+","+(Math.floor(27*Math.random())+230)+","+(Math.floor(27*Math.random())+230)+")"}static generateDarkColorRgb(a){if(!a||typeof a=="number")return`hsl(${(Math.abs(Number(a??Math.random()))||0)%360}, 80%, 25%)`;{let n=0;for(let u=0;u<a.length;u++)n=a.charCodeAt(u)+((n<<5)-n),n=n&n;return`hsl(${Math.abs(n)%360}, 80%, 25%)`}}static toSlug(a){return a.toString().toLowerCase().replace(/đ/g,"d").replace(/[í|ì|ỉ|ĩ|ị]/g,"i").replace(/[ý|ỳ|ỷ|ỹ|ỵ]/g,"y").replace(/[á|à|ả|ã|ạ|â|ă|ấ|ầ|ẩ|ẫ|ậ|ắ|ằ|ẳ|ẵ|ặ]/g,"a").replace(/[é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ]/g,"e").replace(/[ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự]/g,"u").replace(/[ó|ò|ỏ|õ|ọ|ô|ơ|ố|ồ|ổ|ỗ|ộ|ớ|ờ|ở|ỡ|ợ]/g,"o").replace(/\s+/g," ").replace(/({|}|\(|\)|<|>)/g,"").replaceAll(" ","-")}static getRandomGradient(a){const n=v=>{let b=0;for(let w=0;w<v.length;w++)b=Math.imul(31,b)+v.charCodeAt(w)|0;return b%4294967295/4294967295},s=(v,b,w)=>{v=v%360,b=b/100,w=w/100;let x,S,E;if(b===0)x=S=E=w;else{const T=(R,j,D)=>(D<0&&(D+=1),D>1&&(D-=1),D<.16666666666666666?R+(j-R)*6*D:D<.5?j:D<.6666666666666666?R+(j-R)*(.6666666666666666-D)*6:R),C=w<.5?w*(1+b):w+b-w*b,A=2*w-C;x=T(A,C,v/360+.3333333333333333),S=T(A,C,v/360),E=T(A,C,v/360-.3333333333333333)}return`rgb(${Math.round(x*255)}, ${Math.round(S*255)}, ${Math.round(E*255)})`},l=n(a.toString()),c=n(a.toString()+"offset"),u=l*360,d=c*360,h=70+l*30,f=80+l*10,p=s(u,h,f),g=s(d,h,f);return`linear-gradient(90deg, ${p}, ${g})`}static to_vietnamese(a){const n=" hai ba bốn năm sáu bảy tám chín",s=("1 một"+n).split(" "),l=("lẻ mười"+n).split(" "),c=("không một"+n).split(" ");function u(S){if(S=="000")return"";var E=S+"";switch(E.length){case 0:return"";case 1:return s[E];case 2:return d(E);case 3:var T="";E.slice(1,3)!="00"&&(T=d(E.slice(1,3)));var C=c[E[0]]+" trăm";return C+" "+T}}function d(S){var E=s[S[1]],T=l[S[0]],C="";return S[0]>0&&S[1]==5&&(E="lăm"),S[0]>1&&(C=" mươi",S[1]==1&&(E=" mốt")),T+""+C+" "+E}const h="1 nghìn triệu tỷ".split(" ");var f=parseInt(`${a}`)+"",p=0,g=[],v=f.length,b=[],w="";if(v==0||f=="NaN")return"";for(;v>=0;)g.push(f.substring(v,Math.max(v-3,0))),v-=3;for(p=g.length-1;p>=0;p--)g[p]!=""&&g[p]!="000"&&(b.push(u(g[p])),h[p]&&b.push(h[p]));w=b.join(" ");const x=w.replace(/[0-9]/g,"").replace(/ /g," ").replace(/ $/,"");return x[0].toUpperCase()+x.slice(1)}static numberToAlphabet(a){if(!a||a<=0)return"";let n="";for(;a>0;)a--,n=String.fromCharCode(65+a%26)+n,a=Math.floor(a/26);return n}}M(Util,"dateDefault",new Date("01/01/2021").getTime()),M(Util,"calculateAge",a=>{const n=parse$2(a,"dd/MM/yyyy",new Date);if(isNaN(n.getTime()))return 0;{const s=new Date,l=new Date(s.getFullYear(),n.getMonth(),n.getDate());let c=s.getFullYear()-n.getFullYear();return s<l&&c--,c}}),M(Util,"getStorage",a=>localStorage.getItem(a)),M(Util,"getSession",a=>sessionStorage.getItem(a)),M(Util,"percentToHex",a=>Math.round(a/100*255).toString(16).padStart(2,"0").toUpperCase()),M(Util,"hexToPercent",a=>{const n=parseInt(a,16);return Math.round(n/255*100)}),M(Util,"convertToKebabCase",a=>a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().replace(/[ _]/g,"-")),M(Util,"processHTMLContent",a=>{const s=new DOMParser().parseFromString(a,"text/html"),l=s.getElementsByTagName("img");for(;l.length>0;)l[0].parentNode.removeChild(l[0]);let c="";const u=s.body.getElementsByTagName("*");for(let d of u){if(["SCRIPT","STYLE"].includes(d.tagName))continue;const h=d.innerText.trim();h&&(c+=h+" ")}return c=c.trim(),c?`<p>${c}</p>`:""}),M(Util,"timeSince",a=>{const n=new Date,s=new Date(a),l=differenceInSeconds(n,s),c=[{label:"năm",seconds:31536e3},{label:"tháng",seconds:2592e3},{label:"ngày",seconds:86400},{label:"giờ",seconds:3600},{label:"phút",seconds:60},{label:"giây",seconds:1}];for(const u of c){const d=Math.floor(l/u.seconds);if(d>=1)return`${d} ${u.label}${d>1,""} trước`}return"vừa xong"}),M(Util,"extractHashtags",a=>{const n=/#[^\s#<]+/g;return a.match(n)||[]});function formatNumberConvert(o){return o>=1e9?(o/1e9).toFixed(1).replace(/\.0$/,"")+"B":o>=1e6?(o/1e6).toFixed(1).replace(/\.0$/,"")+"M":o>=1e3?(o/1e3).toFixed(1).replace(/\.0$/,"")+"K":o.toString()}function inputMoneyPattern(o){let a=o.target.value.replaceAll(",","").length%3;if(a>0){let n=o.target.value.replaceAll(",","").substring(a).split("");o.target.value=o.target.value.replaceAll(",","").substring(0,a)+n.map((s,l)=>l%3===0?`, ${s} `:s).join("")}else{let n=o.target.value.replaceAll(",","").split("");o.target.value=n.map((s,l)=>l>0&&l%3===0?`, ${s} `:s).join("")}}const randomGID=()=>crypto.randomUUID().replaceAll("-",""),ColorPicker=({style:o={},type:a="input",...n})=>{var l,c;const s=React2.useRef(null);switch(React2.useEffect(()=>{n.value&&s.current?(s.current.querySelector('input[type="color"]').value=n.value.slice(0,7),a==="input"&&(s.current.querySelector('input[type="text"]').value=n.value.slice(0,7),s.current.querySelector('input[type="number"]').value=Util.hexToPercent(n.value.slice(7)))):s.current&&(s.current.querySelector('input[type="color"]').value="#000000",a==="input"&&(s.current.querySelector('input[type="text"]').value="",s.current.querySelector('input[type="number"]').value=""))},[n.value]),a){case"input":return jsxRuntimeExports.jsxs("div",{id:n.id,ref:s,className:`${n.simpleStyle?styles$4["simple-color-picker"]:styles$4["color-picker-container"]} row ${n.className??(n.simpleStyle?"":"body-3")} ${(l=n.helperText)!=null&&l.length?styles$4["helper-text"]:""}`,"helper-text":n.helperText,style:{"--helper-text-color":n.helperTextColor??"#e14337",...o},children:[jsxRuntimeExports.jsx("label",{style:{backgroundColor:n.value??"#000000"},children:jsxRuntimeExports.jsx("input",{type:"color",disabled:n.disabled,onChange:u=>{var f,p;const d=s.current.querySelector('input[type="number"]'),h=`${u.target.value}${Util.percentToHex(parseInt((f=d.value)!=null&&f.length?d.value:"100")).toLowerCase()}`;(p=n.onChange)==null||p.call(n,h)}})}),jsxRuntimeExports.jsx("input",{maxLength:7,type:"text",placeholder:n.placeholder,readOnly:n.readOnly,disabled:n.disabled,onBlur:u=>{var p,g;const d=u.target.value.replace(/#/g,"").substring(0,6),h=s.current.querySelector('input[type="number"]'),f=`#${d}${Util.percentToHex(parseInt((p=h.value)!=null&&p.length?h.value:"100")).toLowerCase()}`;(g=n.onChange)==null||g.call(n,f)},onKeyDown:u=>{switch(u.key.toLowerCase()){case"enter":u.currentTarget.blur();break}}}),jsxRuntimeExports.jsxs("label",{className:"row",children:[jsxRuntimeExports.jsx("input",{type:"number",placeholder:"opacity",onKeyDown:u=>u.key.toLowerCase()==="enter"&&u.target.blur(),onFocus:u=>u.target.select(),disabled:n.disabled,onBlur:u=>{var p,g;let d=parseInt(u.target.value);isNaN(d)||d>100?d=100:d<0&&(d=0);const f=`${(p=s.current)==null?void 0:p.querySelector('input[type="color"]').value}${Util.percentToHex(d).toLowerCase()}`;(g=n.onChange)==null||g.call(n,f)}}),jsxRuntimeExports.jsx("span",{children:"%"})]})]});default:return jsxRuntimeExports.jsx("label",{id:n.id,ref:s,className:`${n.simpleStyle?styles$4["simple-color-picker"]:styles$4["color-picker-container"]} row ${n.className??(n.simpleStyle?"":"body-3")} ${(c=n.helperText)!=null&&c.length?styles$4["helper-text"]:""}`,"helper-text":n.helperText,style:{"--helper-text-color":n.helperTextColor??"#e14337",...o,aspectRatio:"1 / 1",backgroundColor:n.value??"#000000"},children:jsxRuntimeExports.jsx("input",{type:"color",disabled:n.disabled,onChange:u=>{var d;(d=n.onChange)==null||d.call(n,u.target.value+"ff")}})})}},option="_option_2pbq9_83",selected="_selected_2pbq9_101",styles$3={"icon-library-container":"_icon-library-container_2pbq9_1","search-container":"_search-container_2pbq9_25","search-input":"_search-input_2pbq9_45","filter-options":"_filter-options_2pbq9_57",option,selected,"icon-item":"_icon-item_2pbq9_113","preview-container":"_preview-container_2pbq9_147"};function bind$2(o,a){return function(){return o.apply(a,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator:iterator$1,toStringTag}=Symbol,kindOf=(o=>a=>{const n=toString.call(a);return o[n]||(o[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=o=>(o=o.toLowerCase(),a=>kindOf(a)===o),typeOfTest=o=>a=>typeof a===o,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(o){return o!==null&&!isUndefined(o)&&o.constructor!==null&&!isUndefined(o.constructor)&&isFunction$2(o.constructor.isBuffer)&&o.constructor.isBuffer(o)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(o){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(o):a=o&&o.buffer&&isArrayBuffer(o.buffer),a}const isString$3=typeOfTest("string"),isFunction$2=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$4=o=>o!==null&&typeof o=="object",isBoolean=o=>o===!0||o===!1,isPlainObject=o=>{if(kindOf(o)!=="object")return!1;const a=getPrototypeOf(o);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(toStringTag in o)&&!(iterator$1 in o)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=o=>isObject$4(o)&&isFunction$2(o.pipe),isFormData=o=>{let a;return o&&(typeof FormData=="function"&&o instanceof FormData||isFunction$2(o.append)&&((a=kindOf(o))==="formdata"||a==="object"&&isFunction$2(o.toString)&&o.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim$2=o=>o.trim?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(o,a,{allOwnKeys:n=!1}={}){if(o===null||typeof o>"u")return;let s,l;if(typeof o!="object"&&(o=[o]),isArray$2(o))for(s=0,l=o.length;s<l;s++)a.call(null,o[s],s,o);else{const c=n?Object.getOwnPropertyNames(o):Object.keys(o),u=c.length;let d;for(s=0;s<u;s++)d=c[s],a.call(null,o[d],d,o)}}function findKey(o,a){a=a.toLowerCase();const n=Object.keys(o);let s=n.length,l;for(;s-- >0;)if(l=n[s],a===l.toLowerCase())return l;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=o=>!isUndefined(o)&&o!==_global;function merge$1(){const{caseless:o}=isContextDefined(this)&&this||{},a={},n=(s,l)=>{const c=o&&findKey(a,l)||l;isPlainObject(a[c])&&isPlainObject(s)?a[c]=merge$1(a[c],s):isPlainObject(s)?a[c]=merge$1({},s):isArray$2(s)?a[c]=s.slice():a[c]=s};for(let s=0,l=arguments.length;s<l;s++)arguments[s]&&forEach(arguments[s],n);return a}const extend$1=(o,a,n,{allOwnKeys:s}={})=>(forEach(a,(l,c)=>{n&&isFunction$2(l)?o[c]=bind$2(l,n):o[c]=l},{allOwnKeys:s}),o),stripBOM=o=>(o.charCodeAt(0)===65279&&(o=o.slice(1)),o),inherits$1=(o,a,n,s)=>{o.prototype=Object.create(a.prototype,s),o.prototype.constructor=o,Object.defineProperty(o,"super",{value:a.prototype}),n&&Object.assign(o.prototype,n)},toFlatObject=(o,a,n,s)=>{let l,c,u;const d={};if(a=a||{},o==null)return a;do{for(l=Object.getOwnPropertyNames(o),c=l.length;c-- >0;)u=l[c],(!s||s(u,o,a))&&!d[u]&&(a[u]=o[u],d[u]=!0);o=n!==!1&&getPrototypeOf(o)}while(o&&(!n||n(o,a))&&o!==Object.prototype);return a},endsWith=(o,a,n)=>{o=String(o),(n===void 0||n>o.length)&&(n=o.length),n-=a.length;const s=o.indexOf(a,n);return s!==-1&&s===n},toArray=o=>{if(!o)return null;if(isArray$2(o))return o;let a=o.length;if(!isNumber$1(a))return null;const n=new Array(a);for(;a-- >0;)n[a]=o[a];return n},isTypedArray$1=(o=>a=>o&&a instanceof o)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(o,a)=>{const s=(o&&o[iterator$1]).call(o);let l;for(;(l=s.next())&&!l.done;){const c=l.value;a.call(o,c[0],c[1])}},matchAll=(o,a)=>{let n;const s=[];for(;(n=o.exec(a))!==null;)s.push(n);return s},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase$1=o=>o.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,l){return s.toUpperCase()+l}),hasOwnProperty=(({hasOwnProperty:o})=>(a,n)=>o.call(a,n))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(o,a)=>{const n=Object.getOwnPropertyDescriptors(o),s={};forEach(n,(l,c)=>{let u;(u=a(l,c,o))!==!1&&(s[c]=u||l)}),Object.defineProperties(o,s)},freezeMethods=o=>{reduceDescriptors(o,(a,n)=>{if(isFunction$2(o)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=o[n];if(isFunction$2(s)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(o,a)=>{const n={},s=l=>{l.forEach(c=>{n[c]=!0})};return isArray$2(o)?s(o):s(String(o).split(a)),n},noop$2=()=>{},toFiniteNumber=(o,a)=>o!=null&&Number.isFinite(o=+o)?o:a;function isSpecCompliantForm(o){return!!(o&&isFunction$2(o.append)&&o[toStringTag]==="FormData"&&o[iterator$1])}const toJSONObject=o=>{const a=new Array(10),n=(s,l)=>{if(isObject$4(s)){if(a.indexOf(s)>=0)return;if(!("toJSON"in s)){a[l]=s;const c=isArray$2(s)?[]:{};return forEach(s,(u,d)=>{const h=n(u,l+1);!isUndefined(h)&&(c[d]=h)}),a[l]=void 0,c}}return s};return n(o,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=o=>o&&(isObject$4(o)||isFunction$2(o))&&isFunction$2(o.then)&&isFunction$2(o.catch),_setImmediate=((o,a)=>o?setImmediate:a?((n,s)=>(_global.addEventListener("message",({source:l,data:c})=>{l===_global&&c===n&&s.length&&s.shift()()},!1),l=>{s.push(l),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$2(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=o=>o!=null&&isFunction$2(o[iterator$1]),utils$2={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$3,isNumber:isNumber$1,isBoolean,isObject:isObject$4,isPlainObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$2,isStream,isURLSearchParams,isTypedArray:isTypedArray$1,isFileList,forEach,merge:merge$1,extend:extend$1,trim:trim$2,stripBOM,inherits:inherits$1,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase:toCamelCase$1,noop:noop$2,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};function AxiosError$1(o,a,n,s,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=o,this.name="AxiosError",a&&(this.code=a),n&&(this.config=n),s&&(this.request=s),l&&(this.response=l,this.status=l.status?l.status:null)}utils$2.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$2.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(o=>{descriptors[o]={value:o}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(o,a,n,s,l,c)=>{const u=Object.create(prototype$1);return utils$2.toFlatObject(o,u,function(h){return h!==Error.prototype},d=>d!=="isAxiosError"),AxiosError$1.call(u,o.message,a,n,s,l),u.cause=o,u.name=o.name,c&&Object.assign(u,c),u};const httpAdapter=null;function isVisitable(o){return utils$2.isPlainObject(o)||utils$2.isArray(o)}function removeBrackets(o){return utils$2.endsWith(o,"[]")?o.slice(0,-2):o}function renderKey(o,a,n){return o?o.concat(a).map(function(l,c){return l=removeBrackets(l),!n&&c?"["+l+"]":l}).join(n?".":""):a}function isFlatArray(o){return utils$2.isArray(o)&&!o.some(isVisitable)}const predicates=utils$2.toFlatObject(utils$2,{},null,function(a){return/^is[A-Z]/.test(a)});function toFormData$1(o,a,n){if(!utils$2.isObject(o))throw new TypeError("target must be an object");a=a||new FormData,n=utils$2.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(x,S){return!utils$2.isUndefined(S[x])});const s=n.metaTokens,l=n.visitor||p,c=n.dots,u=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&utils$2.isSpecCompliantForm(a);if(!utils$2.isFunction(l))throw new TypeError("visitor must be a function");function f(w){if(w===null)return"";if(utils$2.isDate(w))return w.toISOString();if(!h&&utils$2.isBlob(w))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$2.isArrayBuffer(w)||utils$2.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function p(w,x,S){let E=w;if(w&&!S&&typeof w=="object"){if(utils$2.endsWith(x,"{}"))x=s?x:x.slice(0,-2),w=JSON.stringify(w);else if(utils$2.isArray(w)&&isFlatArray(w)||(utils$2.isFileList(w)||utils$2.endsWith(x,"[]"))&&(E=utils$2.toArray(w)))return x=removeBrackets(x),E.forEach(function(C,A){!(utils$2.isUndefined(C)||C===null)&&a.append(u===!0?renderKey([x],A,c):u===null?x:x+"[]",f(C))}),!1}return isVisitable(w)?!0:(a.append(renderKey(S,x,c),f(w)),!1)}const g=[],v=Object.assign(predicates,{defaultVisitor:p,convertValue:f,isVisitable});function b(w,x){if(!utils$2.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+x.join("."));g.push(w),utils$2.forEach(w,function(E,T){(!(utils$2.isUndefined(E)||E===null)&&l.call(a,E,utils$2.isString(T)?T.trim():T,x,v))===!0&&b(E,x?x.concat(T):[T])}),g.pop()}}if(!utils$2.isObject(o))throw new TypeError("data must be an object");return b(o),a}function encode$1(o){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(o).replace(/[!'()~]|%20|%00/g,function(s){return a[s]})}function AxiosURLSearchParams(o,a){this._pairs=[],o&&toFormData$1(o,this,a)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(a,n){this._pairs.push([a,n])};prototype.toString=function(a){const n=a?function(s){return a.call(this,s,encode$1)}:encode$1;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function encode(o){return encodeURIComponent(o).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(o,a,n){if(!a)return o;const s=n&&n.encode||encode;utils$2.isFunction(n)&&(n={serialize:n});const l=n&&n.serialize;let c;if(l?c=l(a,n):c=utils$2.isURLSearchParams(a)?a.toString():new AxiosURLSearchParams(a,n).toString(s),c){const u=o.indexOf("#");u!==-1&&(o=o.slice(0,u)),o+=(o.indexOf("?")===-1?"?":"&")+c}return o}class InterceptorManager{constructor(){this.handlers=[]}use(a,n,s){return this.handlers.push({fulfilled:a,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){utils$2.forEach(this.handlers,function(s){s!==null&&a(s)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils$1,...platform$2};function toURLEncodedForm(o,a){return toFormData$1(o,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(n,s,l,c){return platform$1.isNode&&utils$2.isBuffer(n)?(this.append(s,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},a))}function parsePropPath(o){return utils$2.matchAll(/\w+|\[(\w*)]/g,o).map(a=>a[0]==="[]"?"":a[1]||a[0])}function arrayToObject(o){const a={},n=Object.keys(o);let s;const l=n.length;let c;for(s=0;s<l;s++)c=n[s],a[c]=o[c];return a}function formDataToJSON(o){function a(n,s,l,c){let u=n[c++];if(u==="__proto__")return!0;const d=Number.isFinite(+u),h=c>=n.length;return u=!u&&utils$2.isArray(l)?l.length:u,h?(utils$2.hasOwnProp(l,u)?l[u]=[l[u],s]:l[u]=s,!d):((!l[u]||!utils$2.isObject(l[u]))&&(l[u]=[]),a(n,s,l[u],c)&&utils$2.isArray(l[u])&&(l[u]=arrayToObject(l[u])),!d)}if(utils$2.isFormData(o)&&utils$2.isFunction(o.entries)){const n={};return utils$2.forEachEntry(o,(s,l)=>{a(parsePropPath(s),l,n,0)}),n}return null}function stringifySafely(o,a,n){if(utils$2.isString(o))try{return(a||JSON.parse)(o),utils$2.trim(o)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(o)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(a,n){const s=n.getContentType()||"",l=s.indexOf("application/json")>-1,c=utils$2.isObject(a);if(c&&utils$2.isHTMLForm(a)&&(a=new FormData(a)),utils$2.isFormData(a))return l?JSON.stringify(formDataToJSON(a)):a;if(utils$2.isArrayBuffer(a)||utils$2.isBuffer(a)||utils$2.isStream(a)||utils$2.isFile(a)||utils$2.isBlob(a)||utils$2.isReadableStream(a))return a;if(utils$2.isArrayBufferView(a))return a.buffer;if(utils$2.isURLSearchParams(a))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let d;if(c){if(s.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(a,this.formSerializer).toString();if((d=utils$2.isFileList(a))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return toFormData$1(d?{"files[]":a}:a,h&&new h,this.formSerializer)}}return c||l?(n.setContentType("application/json",!1),stringifySafely(a)):a}],transformResponse:[function(a){const n=this.transitional||defaults$1.transitional,s=n&&n.forcedJSONParsing,l=this.responseType==="json";if(utils$2.isResponse(a)||utils$2.isReadableStream(a))return a;if(a&&utils$2.isString(a)&&(s&&!this.responseType||l)){const u=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(a)}catch(d){if(u)throw d.name==="SyntaxError"?AxiosError$1.from(d,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):d}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$2.forEach(["delete","get","head","post","put","patch"],o=>{defaults$1.headers[o]={}});const ignoreDuplicateOf=utils$2.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=o=>{const a={};let n,s,l;return o&&o.split(`
`).forEach(function(u){l=u.indexOf(":"),n=u.substring(0,l).trim().toLowerCase(),s=u.substring(l+1).trim(),!(!n||a[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?a[n]?a[n].push(s):a[n]=[s]:a[n]=a[n]?a[n]+", "+s:s)}),a},$internals=Symbol("internals");function normalizeHeader(o){return o&&String(o).trim().toLowerCase()}function normalizeValue(o){return o===!1||o==null?o:utils$2.isArray(o)?o.map(normalizeValue):String(o)}function parseTokens(o){const a=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(o);)a[s[1]]=s[2];return a}const isValidHeaderName=o=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(o.trim());function matchHeaderValue(o,a,n,s,l){if(utils$2.isFunction(s))return s.call(this,a,n);if(l&&(a=n),!!utils$2.isString(a)){if(utils$2.isString(s))return a.indexOf(s)!==-1;if(utils$2.isRegExp(s))return s.test(a)}}function formatHeader(o){return o.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,n,s)=>n.toUpperCase()+s)}function buildAccessors(o,a){const n=utils$2.toCamelCase(" "+a);["get","set","has"].forEach(s=>{Object.defineProperty(o,s+n,{value:function(l,c,u){return this[s].call(this,a,l,c,u)},configurable:!0})})}let AxiosHeaders$1=class{constructor(a){a&&this.set(a)}set(a,n,s){const l=this;function c(d,h,f){const p=normalizeHeader(h);if(!p)throw new Error("header name must be a non-empty string");const g=utils$2.findKey(l,p);(!g||l[g]===void 0||f===!0||f===void 0&&l[g]!==!1)&&(l[g||h]=normalizeValue(d))}const u=(d,h)=>utils$2.forEach(d,(f,p)=>c(f,p,h));if(utils$2.isPlainObject(a)||a instanceof this.constructor)u(a,n);else if(utils$2.isString(a)&&(a=a.trim())&&!isValidHeaderName(a))u(parseHeaders(a),n);else if(utils$2.isObject(a)&&utils$2.isIterable(a)){let d={},h,f;for(const p of a){if(!utils$2.isArray(p))throw TypeError("Object iterator must return a key-value pair");d[f=p[0]]=(h=d[f])?utils$2.isArray(h)?[...h,p[1]]:[h,p[1]]:p[1]}u(d,n)}else a!=null&&c(n,a,s);return this}get(a,n){if(a=normalizeHeader(a),a){const s=utils$2.findKey(this,a);if(s){const l=this[s];if(!n)return l;if(n===!0)return parseTokens(l);if(utils$2.isFunction(n))return n.call(this,l,s);if(utils$2.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,n){if(a=normalizeHeader(a),a){const s=utils$2.findKey(this,a);return!!(s&&this[s]!==void 0&&(!n||matchHeaderValue(this,this[s],s,n)))}return!1}delete(a,n){const s=this;let l=!1;function c(u){if(u=normalizeHeader(u),u){const d=utils$2.findKey(s,u);d&&(!n||matchHeaderValue(s,s[d],d,n))&&(delete s[d],l=!0)}}return utils$2.isArray(a)?a.forEach(c):c(a),l}clear(a){const n=Object.keys(this);let s=n.length,l=!1;for(;s--;){const c=n[s];(!a||matchHeaderValue(this,this[c],c,a,!0))&&(delete this[c],l=!0)}return l}normalize(a){const n=this,s={};return utils$2.forEach(this,(l,c)=>{const u=utils$2.findKey(s,c);if(u){n[u]=normalizeValue(l),delete n[c];return}const d=a?formatHeader(c):String(c).trim();d!==c&&delete n[c],n[d]=normalizeValue(l),s[d]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const n=Object.create(null);return utils$2.forEach(this,(s,l)=>{s!=null&&s!==!1&&(n[l]=a&&utils$2.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,n])=>a+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...n){const s=new this(a);return n.forEach(l=>s.set(l)),s}static accessor(a){const s=(this[$internals]=this[$internals]={accessors:{}}).accessors,l=this.prototype;function c(u){const d=normalizeHeader(u);s[d]||(buildAccessors(l,u),s[d]=!0)}return utils$2.isArray(a)?a.forEach(c):c(a),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$2.reduceDescriptors(AxiosHeaders$1.prototype,({value:o},a)=>{let n=a[0].toUpperCase()+a.slice(1);return{get:()=>o,set(s){this[n]=s}}});utils$2.freezeMethods(AxiosHeaders$1);function transformData(o,a){const n=this||defaults$1,s=a||n,l=AxiosHeaders$1.from(s.headers);let c=s.data;return utils$2.forEach(o,function(d){c=d.call(n,c,l.normalize(),a?a.status:void 0)}),l.normalize(),c}function isCancel$1(o){return!!(o&&o.__CANCEL__)}function CanceledError$1(o,a,n){AxiosError$1.call(this,o??"canceled",AxiosError$1.ERR_CANCELED,a,n),this.name="CanceledError"}utils$2.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(o,a,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?o(n):a(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(o){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(o);return a&&a[1]||""}function speedometer(o,a){o=o||10;const n=new Array(o),s=new Array(o);let l=0,c=0,u;return a=a!==void 0?a:1e3,function(h){const f=Date.now(),p=s[c];u||(u=f),n[l]=h,s[l]=f;let g=c,v=0;for(;g!==l;)v+=n[g++],g=g%o;if(l=(l+1)%o,l===c&&(c=(c+1)%o),f-u<a)return;const b=p&&f-p;return b?Math.round(v*1e3/b):void 0}}function throttle$1(o,a){let n=0,s=1e3/a,l,c;const u=(f,p=Date.now())=>{n=p,l=null,c&&(clearTimeout(c),c=null),o.apply(null,f)};return[(...f)=>{const p=Date.now(),g=p-n;g>=s?u(f,p):(l=f,c||(c=setTimeout(()=>{c=null,u(l)},s-g)))},()=>l&&u(l)]}const progressEventReducer=(o,a,n=3)=>{let s=0;const l=speedometer(50,250);return throttle$1(c=>{const u=c.loaded,d=c.lengthComputable?c.total:void 0,h=u-s,f=l(h),p=u<=d;s=u;const g={loaded:u,total:d,progress:d?u/d:void 0,bytes:h,rate:f||void 0,estimated:f&&d&&p?(d-u)/f:void 0,event:c,lengthComputable:d!=null,[a?"download":"upload"]:!0};o(g)},n)},progressEventDecorator=(o,a)=>{const n=o!=null;return[s=>a[0]({lengthComputable:n,total:o,loaded:s}),a[1]]},asyncDecorator=o=>(...a)=>utils$2.asap(()=>o(...a)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?((o,a)=>n=>(n=new URL(n,platform$1.origin),o.protocol===n.protocol&&o.host===n.host&&(a||o.port===n.port)))(new URL(platform$1.origin),platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent)):()=>!0,cookies=platform$1.hasStandardBrowserEnv?{write(o,a,n,s,l,c){const u=[o+"="+encodeURIComponent(a)];utils$2.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),utils$2.isString(s)&&u.push("path="+s),utils$2.isString(l)&&u.push("domain="+l),c===!0&&u.push("secure"),document.cookie=u.join("; ")},read(o){const a=document.cookie.match(new RegExp("(^|;\\s*)("+o+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(o){this.write(o,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(o){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(o)}function combineURLs(o,a){return a?o.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):o}function buildFullPath(o,a,n){let s=!isAbsoluteURL(a);return o&&(s||n==!1)?combineURLs(o,a):a}const headersToObject=o=>o instanceof AxiosHeaders$1?{...o}:o;function mergeConfig$1(o,a){a=a||{};const n={};function s(f,p,g,v){return utils$2.isPlainObject(f)&&utils$2.isPlainObject(p)?utils$2.merge.call({caseless:v},f,p):utils$2.isPlainObject(p)?utils$2.merge({},p):utils$2.isArray(p)?p.slice():p}function l(f,p,g,v){if(utils$2.isUndefined(p)){if(!utils$2.isUndefined(f))return s(void 0,f,g,v)}else return s(f,p,g,v)}function c(f,p){if(!utils$2.isUndefined(p))return s(void 0,p)}function u(f,p){if(utils$2.isUndefined(p)){if(!utils$2.isUndefined(f))return s(void 0,f)}else return s(void 0,p)}function d(f,p,g){if(g in a)return s(f,p);if(g in o)return s(void 0,f)}const h={url:c,method:c,data:c,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(f,p,g)=>l(headersToObject(f),headersToObject(p),g,!0)};return utils$2.forEach(Object.keys(Object.assign({},o,a)),function(p){const g=h[p]||l,v=g(o[p],a[p],p);utils$2.isUndefined(v)&&g!==d||(n[p]=v)}),n}const resolveConfig=o=>{const a=mergeConfig$1({},o);let{data:n,withXSRFToken:s,xsrfHeaderName:l,xsrfCookieName:c,headers:u,auth:d}=a;a.headers=u=AxiosHeaders$1.from(u),a.url=buildURL(buildFullPath(a.baseURL,a.url,a.allowAbsoluteUrls),o.params,o.paramsSerializer),d&&u.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):"")));let h;if(utils$2.isFormData(n)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)u.setContentType(void 0);else if((h=u.getContentType())!==!1){const[f,...p]=h?h.split(";").map(g=>g.trim()).filter(Boolean):[];u.setContentType([f||"multipart/form-data",...p].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(s&&utils$2.isFunction(s)&&(s=s(a)),s||s!==!1&&isURLSameOrigin(a.url))){const f=l&&c&&cookies.read(c);f&&u.set(l,f)}return a},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(o){return new Promise(function(n,s){const l=resolveConfig(o);let c=l.data;const u=AxiosHeaders$1.from(l.headers).normalize();let{responseType:d,onUploadProgress:h,onDownloadProgress:f}=l,p,g,v,b,w;function x(){b&&b(),w&&w(),l.cancelToken&&l.cancelToken.unsubscribe(p),l.signal&&l.signal.removeEventListener("abort",p)}let S=new XMLHttpRequest;S.open(l.method.toUpperCase(),l.url,!0),S.timeout=l.timeout;function E(){if(!S)return;const C=AxiosHeaders$1.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),R={data:!d||d==="text"||d==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:C,config:o,request:S};settle(function(D){n(D),x()},function(D){s(D),x()},R),S=null}"onloadend"in S?S.onloadend=E:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(E)},S.onabort=function(){S&&(s(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,o,S)),S=null)},S.onerror=function(){s(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,o,S)),S=null},S.ontimeout=function(){let A=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const R=l.transitional||transitionalDefaults;l.timeoutErrorMessage&&(A=l.timeoutErrorMessage),s(new AxiosError$1(A,R.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,o,S)),S=null},c===void 0&&u.setContentType(null),"setRequestHeader"in S&&utils$2.forEach(u.toJSON(),function(A,R){S.setRequestHeader(R,A)}),utils$2.isUndefined(l.withCredentials)||(S.withCredentials=!!l.withCredentials),d&&d!=="json"&&(S.responseType=l.responseType),f&&([v,w]=progressEventReducer(f,!0),S.addEventListener("progress",v)),h&&S.upload&&([g,b]=progressEventReducer(h),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",b)),(l.cancelToken||l.signal)&&(p=C=>{S&&(s(!C||C.type?new CanceledError$1(null,o,S):C),S.abort(),S=null)},l.cancelToken&&l.cancelToken.subscribe(p),l.signal&&(l.signal.aborted?p():l.signal.addEventListener("abort",p)));const T=parseProtocol(l.url);if(T&&platform$1.protocols.indexOf(T)===-1){s(new AxiosError$1("Unsupported protocol "+T+":",AxiosError$1.ERR_BAD_REQUEST,o));return}S.send(c||null)})},composeSignals=(o,a)=>{const{length:n}=o=o?o.filter(Boolean):[];if(a||n){let s=new AbortController,l;const c=function(f){if(!l){l=!0,d();const p=f instanceof Error?f:this.reason;s.abort(p instanceof AxiosError$1?p:new CanceledError$1(p instanceof Error?p.message:p))}};let u=a&&setTimeout(()=>{u=null,c(new AxiosError$1(`timeout ${a} of ms exceeded`,AxiosError$1.ETIMEDOUT))},a);const d=()=>{o&&(u&&clearTimeout(u),u=null,o.forEach(f=>{f.unsubscribe?f.unsubscribe(c):f.removeEventListener("abort",c)}),o=null)};o.forEach(f=>f.addEventListener("abort",c));const{signal:h}=s;return h.unsubscribe=()=>utils$2.asap(d),h}},streamChunk=function*(o,a){let n=o.byteLength;if(n<a){yield o;return}let s=0,l;for(;s<n;)l=s+a,yield o.slice(s,l),s=l},readBytes=async function*(o,a){for await(const n of readStream(o))yield*streamChunk(n,a)},readStream=async function*(o){if(o[Symbol.asyncIterator]){yield*o;return}const a=o.getReader();try{for(;;){const{done:n,value:s}=await a.read();if(n)break;yield s}}finally{await a.cancel()}},trackStream=(o,a,n,s)=>{const l=readBytes(o,a);let c=0,u,d=h=>{u||(u=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:f,value:p}=await l.next();if(f){d(),h.close();return}let g=p.byteLength;if(n){let v=c+=g;n(v)}h.enqueue(new Uint8Array(p))}catch(f){throw d(f),f}},cancel(h){return d(h),l.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(o=>a=>o.encode(a))(new TextEncoder):async o=>new Uint8Array(await new Response(o).arrayBuffer())),test=(o,...a)=>{try{return!!o(...a)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let o=!1;const a=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return o=!0,"half"}}).headers.has("Content-Type");return o&&!a}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$2.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(o=>o.body)};isFetchSupported&&(o=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!resolvers[a]&&(resolvers[a]=utils$2.isFunction(o[a])?n=>n[a]():(n,s)=>{throw new AxiosError$1(`Response type '${a}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,s)})})})(new Response);const getBodyLength=async o=>{if(o==null)return 0;if(utils$2.isBlob(o))return o.size;if(utils$2.isSpecCompliantForm(o))return(await new Request(platform$1.origin,{method:"POST",body:o}).arrayBuffer()).byteLength;if(utils$2.isArrayBufferView(o)||utils$2.isArrayBuffer(o))return o.byteLength;if(utils$2.isURLSearchParams(o)&&(o=o+""),utils$2.isString(o))return(await encodeText(o)).byteLength},resolveBodyLength=async(o,a)=>{const n=utils$2.toFiniteNumber(o.getContentLength());return n??getBodyLength(a)},fetchAdapter=isFetchSupported&&(async o=>{let{url:a,method:n,data:s,signal:l,cancelToken:c,timeout:u,onDownloadProgress:d,onUploadProgress:h,responseType:f,headers:p,withCredentials:g="same-origin",fetchOptions:v}=resolveConfig(o);f=f?(f+"").toLowerCase():"text";let b=composeSignals([l,c&&c.toAbortSignal()],u),w;const x=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let S;try{if(h&&supportsRequestStream&&n!=="get"&&n!=="head"&&(S=await resolveBodyLength(p,s))!==0){let R=new Request(a,{method:"POST",body:s,duplex:"half"}),j;if(utils$2.isFormData(s)&&(j=R.headers.get("content-type"))&&p.setContentType(j),R.body){const[D,O]=progressEventDecorator(S,progressEventReducer(asyncDecorator(h)));s=trackStream(R.body,DEFAULT_CHUNK_SIZE,D,O)}}utils$2.isString(g)||(g=g?"include":"omit");const E="credentials"in Request.prototype;w=new Request(a,{...v,signal:b,method:n.toUpperCase(),headers:p.normalize().toJSON(),body:s,duplex:"half",credentials:E?g:void 0});let T=await fetch(w);const C=supportsResponseStream&&(f==="stream"||f==="response");if(supportsResponseStream&&(d||C&&x)){const R={};["status","statusText","headers"].forEach(H=>{R[H]=T[H]});const j=utils$2.toFiniteNumber(T.headers.get("content-length")),[D,O]=d&&progressEventDecorator(j,progressEventReducer(asyncDecorator(d),!0))||[];T=new Response(trackStream(T.body,DEFAULT_CHUNK_SIZE,D,()=>{O&&O(),x&&x()}),R)}f=f||"text";let A=await resolvers[utils$2.findKey(resolvers,f)||"text"](T,o);return!C&&x&&x(),await new Promise((R,j)=>{settle(R,j,{data:A,headers:AxiosHeaders$1.from(T.headers),status:T.status,statusText:T.statusText,config:o,request:w})})}catch(E){throw x&&x(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,o,w),{cause:E.cause||E}):AxiosError$1.from(E,E&&E.code,o,w)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$2.forEach(knownAdapters,(o,a)=>{if(o){try{Object.defineProperty(o,"name",{value:a})}catch{}Object.defineProperty(o,"adapterName",{value:a})}});const renderReason=o=>`- ${o}`,isResolvedHandle=o=>utils$2.isFunction(o)||o===null||o===!1,adapters={getAdapter:o=>{o=utils$2.isArray(o)?o:[o];const{length:a}=o;let n,s;const l={};for(let c=0;c<a;c++){n=o[c];let u;if(s=n,!isResolvedHandle(n)&&(s=knownAdapters[(u=String(n)).toLowerCase()],s===void 0))throw new AxiosError$1(`Unknown adapter '${u}'`);if(s)break;l[u||"#"+c]=s}if(!s){const c=Object.entries(l).map(([d,h])=>`adapter ${d} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=a?c.length>1?`since :
`+c.map(renderReason).join(`
`):" "+renderReason(c[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return s},adapters:knownAdapters};function throwIfCancellationRequested(o){if(o.cancelToken&&o.cancelToken.throwIfRequested(),o.signal&&o.signal.aborted)throw new CanceledError$1(null,o)}function dispatchRequest(o){return throwIfCancellationRequested(o),o.headers=AxiosHeaders$1.from(o.headers),o.data=transformData.call(o,o.transformRequest),["post","put","patch"].indexOf(o.method)!==-1&&o.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(o.adapter||defaults$1.adapter)(o).then(function(s){return throwIfCancellationRequested(o),s.data=transformData.call(o,o.transformResponse,s),s.headers=AxiosHeaders$1.from(s.headers),s},function(s){return isCancel$1(s)||(throwIfCancellationRequested(o),s&&s.response&&(s.response.data=transformData.call(o,o.transformResponse,s.response),s.response.headers=AxiosHeaders$1.from(s.response.headers))),Promise.reject(s)})}const VERSION$1="1.9.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((o,a)=>{validators$1[o]=function(s){return typeof s===o||"a"+(a<1?"n ":" ")+o}});const deprecatedWarnings={};validators$1.transitional=function(a,n,s){function l(c,u){return"[Axios v"+VERSION$1+"] Transitional option '"+c+"'"+u+(s?". "+s:"")}return(c,u,d)=>{if(a===!1)throw new AxiosError$1(l(u," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[u]&&(deprecatedWarnings[u]=!0,console.warn(l(u," has been deprecated since v"+n+" and will be removed in the near future"))),a?a(c,u,d):!0}};validators$1.spelling=function(a){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${a}`),!0)};function assertOptions(o,a,n){if(typeof o!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const s=Object.keys(o);let l=s.length;for(;l-- >0;){const c=s[l],u=a[c];if(u){const d=o[c],h=d===void 0||u(d,c,o);if(h!==!0)throw new AxiosError$1("option "+c+" must be "+h,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+c,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(a){this.defaults=a||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(a,n){try{return await this._request(a,n)}catch(s){if(s instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{s.stack?c&&!String(s.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+c):s.stack=c}catch{}}throw s}}_request(a,n){typeof a=="string"?(n=n||{},n.url=a):n=a||{},n=mergeConfig$1(this.defaults,n);const{transitional:s,paramsSerializer:l,headers:c}=n;s!==void 0&&validator.assertOptions(s,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),l!=null&&(utils$2.isFunction(l)?n.paramsSerializer={serialize:l}:validator.assertOptions(l,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=c&&utils$2.merge(c.common,c[n.method]);c&&utils$2.forEach(["delete","get","head","post","put","patch","common"],w=>{delete c[w]}),n.headers=AxiosHeaders$1.concat(u,c);const d=[];let h=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(n)===!1||(h=h&&x.synchronous,d.unshift(x.fulfilled,x.rejected))});const f=[];this.interceptors.response.forEach(function(x){f.push(x.fulfilled,x.rejected)});let p,g=0,v;if(!h){const w=[dispatchRequest.bind(this),void 0];for(w.unshift.apply(w,d),w.push.apply(w,f),v=w.length,p=Promise.resolve(n);g<v;)p=p.then(w[g++],w[g++]);return p}v=d.length;let b=n;for(g=0;g<v;){const w=d[g++],x=d[g++];try{b=w(b)}catch(S){x.call(this,S);break}}try{p=dispatchRequest.call(this,b)}catch(w){return Promise.reject(w)}for(g=0,v=f.length;g<v;)p=p.then(f[g++],f[g++]);return p}getUri(a){a=mergeConfig$1(this.defaults,a);const n=buildFullPath(a.baseURL,a.url,a.allowAbsoluteUrls);return buildURL(n,a.params,a.paramsSerializer)}};utils$2.forEach(["delete","get","head","options"],function(a){Axios$1.prototype[a]=function(n,s){return this.request(mergeConfig$1(s||{},{method:a,url:n,data:(s||{}).data}))}});utils$2.forEach(["post","put","patch"],function(a){function n(s){return function(c,u,d){return this.request(mergeConfig$1(d||{},{method:a,headers:s?{"Content-Type":"multipart/form-data"}:{},url:c,data:u}))}}Axios$1.prototype[a]=n(),Axios$1.prototype[a+"Form"]=n(!0)});let CancelToken$1=class br{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const s=this;this.promise.then(l=>{if(!s._listeners)return;let c=s._listeners.length;for(;c-- >0;)s._listeners[c](l);s._listeners=null}),this.promise.then=l=>{let c;const u=new Promise(d=>{s.subscribe(d),c=d}).then(l);return u.cancel=function(){s.unsubscribe(c)},u},a(function(c,u,d){s.reason||(s.reason=new CanceledError$1(c,u,d),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const n=this._listeners.indexOf(a);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const a=new AbortController,n=s=>{a.abort(s)};return this.subscribe(n),a.signal.unsubscribe=()=>this.unsubscribe(n),a.signal}static source(){let a;return{token:new br(function(l){a=l}),cancel:a}}};function spread$1(o){return function(n){return o.apply(null,n)}}function isAxiosError$1(o){return utils$2.isObject(o)&&o.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([o,a])=>{HttpStatusCode$1[a]=o});function createInstance(o){const a=new Axios$1(o),n=bind$2(Axios$1.prototype.request,a);return utils$2.extend(n,Axios$1.prototype,a,{allOwnKeys:!0}),utils$2.extend(n,a,null,{allOwnKeys:!0}),n.create=function(l){return createInstance(mergeConfig$1(o,l))},n}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(a){return Promise.all(a)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=o=>formDataToJSON(utils$2.isHTMLForm(o)?new FormData(o):o);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;class ConfigData{}M(ConfigData,"pid",""),M(ConfigData,"url",""),M(ConfigData,"fileUrl",""),M(ConfigData,"imgUrlId",""),M(ConfigData,"extraPlugins"),M(ConfigData,"onInvalidToken",()=>Util.clearCookie());const getHeaders=async()=>{let o=Util.getCookie("timeRefresh");typeof o=="string"&&(o=parseInt(o));const a=Date.now()/1e3;if(o&&o>0&&o<=a){const n=await fetch(ConfigData.url+"data/refreshToken",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refreshToken:Util.getCookie("refreshToken")})});if(n.status===200||n.status===201){const s=await n.json();if(s.code===200)return Util.setCookie("accessToken",s.accessToken),Util.setCookie("timeRefresh",Date.now()/1e3+9*60),{refreshToken:Util.getCookie("refreshToken"),Authorization:`Bearer ${Util.getCookie("accessToken")}`,"Content-Type":"application/json"}}ConfigData.onInvalidToken(),window.location.replace("/login")}else if(Util.getCookie("accessToken"))return{Authorization:`Bearer ${Util.getCookie("accessToken")}`,"Content-Type":"application/json"};return{"Content-Type":"application/json"}},imgFileTypes=[".png",".svg",".jpg","jpeg",".webp",".gif"],Ft=class Ft{};M(Ft,"post",async(a,n)=>{try{let s=await getHeaders()??{};n!=null&&n.headers&&(s={...s,...n.headers});const l=await axios.post(a,n==null?void 0:n.body,{headers:s});if(l.status===200||l.status===201)return l.data;if(l.status===204)return{message:"ok",data:n==null?void 0:n.body};if(l.status===401)ToastMessage.errors("Unauthorized access"),window.location.replace("/login");else return console.log("error: ??: ",l.statusText),{status:l.status,message:l.statusText}}catch(s){throw ToastMessage.errors(s==null?void 0:s.toString()),s}}),M(Ft,"postFile",async(a,n)=>{try{n!=null&&n.headers&&(n.headers["Content-Type"]="multipart/form-data");const s=await axios.post(a,n==null?void 0:n.body,{headers:(n==null?void 0:n.headers)??{"Content-Type":"multipart/form-data"}});if(s.status===200||s.status===201)return s.data;if(s.status===204)return{message:"ok",data:n==null?void 0:n.body};if(s.status===401)ToastMessage.errors("Unauthorized access"),window.location.replace("/login");else return console.log("error: ??: ",s.statusText),{status:s.status,message:s.statusText}}catch(s){throw console.error("Failed to POST data:",s),s}}),M(Ft,"get",async(a,n)=>{try{let s=await getHeaders()??{};n!=null&&n.headers&&(s={...s,...n.headers});const l=await axios.get(a,{headers:s});if(l.status===200||l.status===201)return l.data;if(l.status===204)return{message:"ok"};if(l.status===401)ToastMessage.errors("Unauthorized access"),window.location.replace("/login");else return console.log("error: ??: ",l.statusText),{status:l.status,message:l.statusText}}catch(s){throw console.error("Failed to GET data:",s),s}}),M(Ft,"uploadFiles",async a=>{a=[...a];const n={pid:ConfigData.pid},s=new FormData;a.forEach(c=>{s.append("files",c)});const l=await Ft.postFile(ConfigData.url+"file/uploadfiles",{headers:n,body:s});return l.code===200?l.data:(ToastMessage.errors(l.message),null)}),M(Ft,"getFilesInfor",async a=>{const n={};return await Ft.post(ConfigData.url+"file/getFilesInfor",{headers:n,body:{ids:a}})}),M(Ft,"updateFilesInfor",async a=>{const n={};return await Ft.post(ConfigData.url+"file/editFileInfor",{headers:n,body:{data:a}})});let BaseDA=Ft;class CkEditorUploadAdapter{constructor(a){M(this,"loader");M(this,"xhr");this.loader=a}upload(){return this.loader.file.then(a=>new Promise((n,s)=>{this._initRequest(),this._initListeners(n,s,a),this._sendRequest(a)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){const a=this.xhr=new XMLHttpRequest;a.open("POST",ConfigData.url+"file/uploadfiles",!0),a.responseType="json"}_initListeners(a,n,s){const l=this.xhr,c=this.loader,u=`Couldn't upload file: ${s.name}.`;l==null||l.addEventListener("error",()=>n(u)),l==null||l.addEventListener("abort",()=>n()),l==null||l.addEventListener("load",()=>{const d=l.response;if(!d||d.error)return n(d&&d.error?d.error.message:u);a({default:ConfigData.imgUrlId+d.data[0].Id})}),l!=null&&l.upload&&l.upload.addEventListener("progress",d=>{d.lengthComputable&&(c.uploadTotal=d.total,c.uploaded=d.loaded)})}_sendRequest(a){var s;const n=new FormData;n.append("files",a),(s=this.xhr)==null||s.send(n)}}function IconLibrary({onSelect:o,style:a={},onClose:n,className:s}){const l=React2.useRef(null),[c,u]=React2.useState(),[d,h]=React2.useState(""),f=React2.useDeferredValue(d,""),[p,g]=React2.useState(!1),[v,b]=React2.useState([]),[w,x]=React2.useState({data:[],totalCount:void 0}),[S,E]=React2.useState(null),[T,C]=React2.useState(null),A=React2.useRef(null),{t:R}=useTranslation();React2.useEffect(()=>{if(n){if(l.current){const D=O=>{(O.target===l.current||!l.current.contains(O.target))&&n()};return window.document.body.addEventListener("mousedown",D),()=>{window.document.body.removeEventListener("mousedown",D)}}return()=>n()}},[n]);const j=async D=>{let O=c?`type=${c}`:"";f.length&&(O+=`${O.length?"&":""}search=${f}`),D&&(O+=`${O.length?"&":""}page=${D}`);const H=await BaseDA.get(`https://redis.ktxgroup.com.vn/api/file/icon-library?${O}`);if(H.code===200)if(x({data:D&&D>1?[...w.data,...H.data]:H.data,totalCount:H.totalCount}),D&&D>1){const q=H.category.filter(Y=>!v.includes(Y));q.length&&b([...v,...q])}else b(H.category??[])};return React2.useEffect(()=>{j()},[c,f]),jsxRuntimeExports.jsxs("div",{ref:l,className:`col ${styles$3["icon-library-container"]} ${s??""}`,style:a,onScroll:D=>{let O=D.target;Math.round(O.offsetHeight+O.scrollTop)>=O.scrollHeight-1&&w.totalCount&&w.data.length<w.totalCount&&j(Math.floor(w.data.length/20)+1)},children:[jsxRuntimeExports.jsxs("div",{className:`row ${styles$3["search-container"]}`,children:[jsxRuntimeExports.jsx(TextField,{ref:A,placeholder:R("search"),className:`body-3 size32 ${styles$3["search-input"]}`,prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/zoom",size:"1.4rem"}),onChange:D=>{D.target.value.trim().length%2===0&&h(D.target.value.trim())},onComplete:D=>D.target.blur(),onBlur:D=>{D.target.value.trim().length>=2&&h(D.target.value.trim())}}),jsxRuntimeExports.jsx(Button,{prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/setup-tools",color:c?"var(--primary-main-color)":void 0,size:14}),className:"button-text-3 size24",label:`${c??R("filter")}`,style:{width:"10rem",padding:"0.4rem",backgroundColor:c?"var(--primary-background)":void 0,color:c?"var(--primary-main-color)":void 0},suffix:c?jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",size:12,className:"icon-button light",onClick:D=>{D.preventDefault(),D.stopPropagation(),u(void 0)}}):void 0,onClick:()=>{g(!p)}}),p&&jsxRuntimeExports.jsx(FilterDropdown$1,{selected:c,onClose:()=>{setTimeout(()=>{g(!1)},150)},onSelect:D=>{u(D),g(!1)}})]}),v.map(D=>jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",padding:"0.8rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-1",children:D.slice(0,1).toUpperCase()+D.slice(1)}),jsxRuntimeExports.jsx("div",{className:"row",style:{flexWrap:"wrap",gap:"0.8rem",padding:"0.8 1.6rem",alignItems:"stretch"},children:w.data.filter(O=>O.category===D).map((O,H)=>jsxRuntimeExports.jsxs("div",{className:`col col6 ${styles$3["icon-item"]} ${(S==null?void 0:S.id)===O.id?styles$3.selected:""}`,onDoubleClick:()=>{o(O)},onClick:()=>{E(O)},onMouseOver:()=>{C(O)},children:[jsxRuntimeExports.jsx(Winicon,{src:`${O.type}/${O.category}/${O.name}`,size:"2rem"}),jsxRuntimeExports.jsx("div",{className:"label-5",style:{width:"100%",wordBreak:"break-all"},children:O.name})]},O.name+O.id+H))})]},D)),(T||S)&&jsxRuntimeExports.jsxs("div",{className:`row ${styles$3["preview-container"]}`,children:[jsxRuntimeExports.jsx(Winicon,{src:`${(S??T).type}/${(S??T).category}/${(S??T).name}`,size:"3.2rem"}),jsxRuntimeExports.jsx("div",{className:"label-3",style:{width:"100%",wordBreak:"break-all"},children:`${(S??T).type}/${(S??T).category}/${(S??T).name}`})]})]})}const FilterDropdown$1=o=>{const a=React2.useRef(null);return React2.useEffect(()=>()=>o.onClose(),[]),React2.useEffect(()=>{if(a.current){const n=s=>{(s.target===a.current||!a.current.contains(s.target))&&o.onClose()};return window.document.body.addEventListener("mousedown",n),()=>{window.document.body.removeEventListener("mousedown",n)}}},[]),jsxRuntimeExports.jsxs("div",{ref:a,className:`col ${styles$3["filter-options"]}`,children:[jsxRuntimeExports.jsx("button",{type:"button",className:`${styles$3.option} ${o.selected==="color"?styles$3.selected:""} label-3`,onClick:()=>{o.onSelect("color")},children:"color"}),jsxRuntimeExports.jsx("button",{type:"button",className:`${styles$3.option} ${o.selected==="fill"?styles$3.selected:""} label-3`,onClick:()=>{o.onSelect("fill")},children:"fill"}),jsxRuntimeExports.jsx("button",{type:"button",className:`${styles$3.option} ${o.selected==="outline"?styles$3.selected:""} label-3`,onClick:()=>{o.onSelect("outline")},children:"outline"})]})},IconPicker=React2.forwardRef((o,a)=>{const n=React2.useRef(null),[s,l]=React2.useState(),[c,u]=React2.useState(!1);React2.useEffect(()=>{l(o.src)},[o.src]);const d=h=>{if(c)return null;const f=h.target.closest("div").getBoundingClientRect();let p={};f.bottom+240>=document.body.offsetHeight?p.bottom=`calc(100dvh - ${f.y}px + 2px)`:p.top=f.bottom+2,n.current=p,u(!0)};return React2.useImperativeHandle(a,()=>({value:s,isOpen:c,setIsOpen:u,openIconLibrary:d}),[c,s]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Winicon,{src:s??"outline/user interface/setup-tools",style:o.style,size:o.size,className:o.className,color:o.color,tooltip:o.tooltip,onClick:d}),c&&jsxRuntimeExports.jsx(IconLibrary,{onSelect:h=>{var f;l(`${h.type}/${h.category}/${h.name}`),(f=o.onChange)==null||f.call(o,`${h.type}/${h.category}/${h.name}`),u(!1)},style:{position:"fixed",zIndex:2,...n.current},onClose:()=>{u(!1)}})]})});function TextFieldForm({style:o={},textFieldStyle:a={},...n}){var l,c,u,d;const{t:s}=useTranslation();return jsxRuntimeExports.jsxs("div",{id:n.id,className:n.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o},children:[n.labelElement??(n.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:n.label}),n.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(TextField,{className:n.textFieldClassName??"body-3",autoFocus:n.autoFocus,style:{width:"100%",flex:(l=n.className)!=null&&l.includes("row")?1:void 0,...n.type==="money"?{...a,height:"4rem",padding:"0 0 0 1.6rem"}:a},placeholder:n.placeholder?n.placeholder:n.label?`${s("input")} ${n.label.toLowerCase()}`:"",suffix:!n.suffix&&n.type==="money"?jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.6rem",height:"100%",background:"var(--neutral-main-background-color,light-dark(#EFEFF0, #313135))",borderLeft:"1px solid var(--neutral-bolder-border-color,light-dark(#D7D7DB, #494950))",borderRadius:"0 0.8rem 0.8rem 0"},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",style:{color:"var(--neutral-text-subtitle-color,light-dark(#61616B, #A2A2AA))"},children:"VND"})}):n.suffix,prefix:n.prefix,disabled:n.disabled,readOnly:n.readOnly,type:n.type==="money"?"text":n.type,name:n.name,register:n.methods.register(n.name,{required:n.required,onBlur:n.type==="money"?h=>{let f=h.target.value.trim().replaceAll(",","");h.target.type="text",isNaN(parseFloat(f))?h.target.value="":h.target.value=Util.money(parseFloat(f))}:n.onBlur,onChange:n.onChange}),onFocus:n.type==="money"?h=>{h.target.value=h.target.value.replaceAll(",",""),h.target.type="number"}:n.onFocus,maxLength:n.maxLength,onComplete:h=>{h.target.blur()},helperText:convertErrors$1(n.methods.formState.errors,n.name)&&((u=(c=convertErrors$1(n.methods.formState.errors,n.name))==null?void 0:c.message)!=null&&u.length?(d=convertErrors$1(n.methods.formState.errors,n.name))==null?void 0:d.message:`${s("input")} ${(n.placeholder?n.placeholder:n.label?`${n.label}`:s("value")).toLowerCase()}`)})]})}const InputPasswordForm=o=>{const[a,n]=React2.useState(!1);return jsxRuntimeExports.jsx(TextFieldForm,{...o,type:a?"text":"password",suffix:jsxRuntimeExports.jsx(Winicon,{src:`outline/user interface/${a?"view":"hide"}`,size:"1.4rem",onClick:()=>{n(!a)}})})};function TextAreaForm({style:o={},textAreaStyle:a={},...n}){var l,c,u;const{t:s}=useTranslation();return jsxRuntimeExports.jsxs("div",{id:n.id,className:n.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",height:"10rem",...o},children:[n.labelElement??(n.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:n.label}),n.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(TextArea,{ref:d=>{if(d){const h=d.getTextarea();h.style.height="0px",h.style.height=`${h.scrollHeight}px`}},...n,className:n.textAreaClassName??"body-3",register:n.methods.register(n.name,{required:n.required,onBlur:n.onBlur,onChange:d=>{var h;d.target.style.height="0px",d.target.style.height=`${d.target.scrollHeight}px`,(h=n.onChange)==null||h.call(n,d)}}),style:{height:"fit-content",maxHeight:"24rem",width:"100%",...a},placeholder:n.placeholder?n.placeholder:n.label?`${s("input")} ${n.label.toLowerCase()}`:"",helperText:convertErrors$1(n.methods.formState.errors,n.name)&&((c=(l=convertErrors$1(n.methods.formState.errors,n.name))==null?void 0:l.message)!=null&&c.length?(u=convertErrors$1(n.methods.formState.errors,n.name))==null?void 0:u.message:`${s("input")} ${(n.placeholder?n.placeholder:n.label?`${n.label}`:s("value")).toLowerCase()}`)})]})}function DateTimePickerForm(o){var s;const a=React2.useMemo(()=>o.name?convertErrors$1(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,rules:{required:o.required},render:({field:l})=>{var c,u;return jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(DateTimePicker,{style:{width:"100%",flex:(c=o.className)!=null&&c.includes("row")?1:void 0},className:"body-3",placeholder:o.placeholder?o.placeholder:o.label?`${n("choose")} ${o.label.toLowerCase()}`:"",value:l.value,disabled:o.disabled,pickerType:o.type,pickOnly:o.pickOnly,onChange:d=>{l.onChange(d),o.onChange&&o.onChange(d)},helperText:a&&((u=a==null?void 0:a.message)!=null&&u.length?a==null?void 0:a.message:`${(o.placeholder?o.placeholder:o.label?`${n("choose")} ${o.label}`:n("value")).toLowerCase()}`)})]})}})}function CKEditorForm(o){var s;const a=React2.useMemo(()=>o.name?convertErrors$1(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,rules:{required:o.required},render:({field:l})=>{var c,u;return jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(CustomCkEditor5,{style:(c=o.className)!=null&&c.includes("row")?{flex:1,overflow:"hidden visible",...o.ckEditorStyle??{}}:o.ckEditorStyle,value:l.value,disabled:o.disabled,customConfig:o.customConfig,extraPlugins:o.ckEditorUploadPlugin??[function(d){d.plugins.get("FileRepository").createUploadAdapter=h=>new CkEditorUploadAdapter(h)}],onBlur:(d,h)=>{l.onChange(h.getData())},placeholder:o.placeholder?o.placeholder:o.label?`${n("input")} ${o.label.toLowerCase()}`:"",helperText:a&&((u=a==null?void 0:a.message)!=null&&u.length?a==null?void 0:a.message:`${n("input")} ${(o.placeholder?o.placeholder:o.label?`${o.label}`:n("value")).toLowerCase()}`)})]})}})}function Select1Form(o){var s;const a=React2.useMemo(()=>o.name?convertErrors$1(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,rules:{required:o.required},render:({field:l})=>{var c,u;return jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(Select1,{className:"body-3",style:{width:"100%",padding:"0 1.6rem",height:"4rem",flex:(c=o.className)!=null&&c.includes("row")?1:void 0,...o.select1Style??{}},placeholder:o.placeholder?o.placeholder:o.label?`${n("choose")} ${o.label.toLowerCase()}`:"",value:l.value,options:o.options,getOptions:o.getOptions,disabled:o.disabled,onChange:d=>{l.onChange(d==null?void 0:d.id),o.onChange&&o.onChange(d)},prefix:o.prefix,suffix:o.required||[void 0,null,""].includes(l.value)||o.disabled?void 0:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/c-remove",size:14,onClick:()=>l.onChange(void 0)}),helperText:a&&((u=a==null?void 0:a.message)!=null&&u.length?a==null?void 0:a.message:`${(o.placeholder?o.placeholder:o.label?`${n("choose")} ${o.label}`:"value").toLowerCase()}`)})]})}})}function SelectMultipleForm(o){var s;const a=React2.useMemo(()=>o.name?convertErrors$1(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,rules:{required:o.required},render:({field:l})=>{var c,u;return jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(SelectMultiple,{className:"body-3",prefix:o.prefix,style:{width:"100%",borderRadius:"0.8rem",flex:(c=o.className)!=null&&c.includes("row")?1:void 0},placeholder:o.placeholder?o.placeholder:o.label?`${n("choose")} ${o.label.toLowerCase()}`:"",value:typeof l.value=="string"?void 0:l.value,options:o.options,getOptions:o.getOptions,disabled:o.disabled,onChange:d=>{l.onChange(d),o.onChange&&o.onChange(d)},helperText:a&&((u=a==null?void 0:a.message)!=null&&u.length?a==null?void 0:a.message:`${(o.placeholder?o.placeholder:o.label?`${n("choose")} ${o.label}`:n("value")).toLowerCase()}`)})]})}})}function SwitchForm(o){return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,render:({field:a})=>jsxRuntimeExports.jsxs("div",{className:o.className??"row",style:{gap:"0.8rem",...o.style??{}},children:[jsxRuntimeExports.jsx(Switch,{name:o.name,value:a.value,disabled:o.disabled,size:o.size,onChange:n=>{a.onChange(n),o.onChange&&o.onChange(n)}}),o.labelElement??jsxRuntimeExports.jsx(Text$2,{className:"label-3",maxLine:1,children:o.label})]})})}function RateForm(o){return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,render:({field:a})=>jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",...o.style??{}},children:[o.labelElement??jsxRuntimeExports.jsx(Text$2,{className:"label-3",maxLine:1,children:o.label}),jsxRuntimeExports.jsx(Rating,{value:a.value,size:o.size,onChange:n=>{a.onChange(n),o.onChange&&o.onChange(n)}})]})})}function CheckboxForm(o){return jsxRuntimeExports.jsxs("label",{className:"row",style:{gap:"0.8rem",...o.style??{}},children:[jsxRuntimeExports.jsx(Checkbox,{value:o.methods.watch(o.name),disabled:o.disabled,size:o.size,onChange:a=>{o.methods.setValue(o.name,a),o.onChange&&o.onChange(a)},style:{borderRadius:o.radius??"0.4rem"}}),o.labelElement??jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:o.label})]})}function RadioButtonForm(o){return jsxRuntimeExports.jsxs("label",{className:`row ${o.className??""}`,style:{gap:"0.8rem",...o.style??{}},children:[jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,render:({field:a})=>jsxRuntimeExports.jsx(RadioButton,{value:o.value,disabled:o.disabled,size:o.size??"1.6rem",name:o.name,checked:a.value===o.value,onChange:n=>{a.onChange(n.target.value),o.onChange&&o.onChange(n)}})}),o.label?jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:o.label}):null]})}function GroupRadioButtonForm(o){var a;return jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flex:1,flexWrap:"wrap"},children:(a=o.options)==null?void 0:a.map(n=>jsxRuntimeExports.jsx(RadioButtonForm,{label:n.name,name:o.name,value:`${n.id}`,size:"1.8rem",onChange:o.onChange,methods:o.methods},n.id))})]})}function ImportFileForm(o){var s;const a=React2.useMemo(()=>o.name?convertErrors$1(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,rules:{required:o.required},render:({field:l})=>{var c,u;return jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(ImportFile,{maxSize:o.maxSize,multiple:o.multiple,label:o.title,subTitle:o.subTitle,allowType:o.allowType,value:l.value,disabled:o.disabled,style:{width:"100%",borderStyle:"dashed",maxWidth:"100%",flex:(c=o.className)!=null&&c.includes("row")?1:void 0},className:`${o.className??""} ${o.direction??"row"}`,onChange:d=>{l.onChange(d),o.onChange&&o.onChange(d)},helperText:a&&((u=a==null?void 0:a.message)!=null&&u.length?a==null?void 0:a.message:`${(o.label?`${n("upload")} ${o.label}`:n("file")).toLowerCase()}`)})]})}})}function RangeForm(o){var n,s,l,c,u,d;const{t:a}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:`input-range-container ${o.className??"col"}`,style:{gap:"0.8rem",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"0.8rem",width:"100%",flex:(n=o.className)!=null&&n.includes("row")?1:void 0},children:o.type==="number"||o.type==="money"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TextField,{style:{width:"100%",flex:1,...o.type==="money"?{height:"4rem",padding:"0 0 0 1.6rem"}:{}},placeholder:o.placeholderStart??a("from"),disabled:o.disabled,type:o.type==="number"?"number":"text",name:o.name,suffix:o.type==="money"?jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.6rem",height:"100%",background:"var(--neutral-main-background-color,light-dark(#EFEFF0, #313135))",borderLeft:"1px solid var(--neutral-bolder-border-color,light-dark(#D7D7DB, #494950))",borderRadius:"0 0.8rem 0.8rem 0"},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",style:{color:"var(--neutral-text-subtitle-color,light-dark(#61616B, #A2A2AA))"},children:"VND"})}):void 0,onFocus:o.type==="money"?h=>{h.target.value=h.target.value.replaceAll(",",""),h.target.type="number"}:void 0,register:o.methods.register(o.name,{onBlur:h=>{var p;const f=parseFloat(h.target.value);h.target.type="text",isNaN(f)?h.target.value="":((p=o.methods.getValues(o.endName))!=null&&p.length&&parseFloat(o.methods.getValues(o.endName).replace(/,/g,""))<f&&o.methods.setError(o.name,{message:"From value must be less than To value"}),o.type==="money"&&(h.target.value=Util.money(f)))}}),helperText:(convertErrors$1(o.methods.formState.errors,o.name)||convertErrors$1(o.methods.formState.errors,o.endName))&&((l=(s=convertErrors$1(o.methods.formState.errors,o.name))==null?void 0:s.message)!=null&&l.length?(c=convertErrors$1(o.methods.formState.errors,o.name))==null?void 0:c.message:`Please input ${((u=o.label)==null?void 0:u.toLowerCase())??"value"}`)}),jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/arrow-right",size:"1.6rem"}),jsxRuntimeExports.jsx(TextField,{style:{width:"100%",flex:1,...o.type==="money"?{height:"4rem",padding:"0 0 0 1.6rem"}:{}},placeholder:o.placeholderEnd??a("to"),disabled:o.disabled,type:o.type==="number"?"number":"text",name:o.endName,suffix:o.type==="money"?jsxRuntimeExports.jsx("div",{className:"row",style:{padding:"0 1.6rem",height:"100%",background:"var(--neutral-main-background-color,light-dark(#EFEFF0, #313135))",borderLeft:"1px solid var(--neutral-bolder-border-color,light-dark(#D7D7DB, #494950))",borderRadius:"0 0.8rem 0.8rem 0"},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",style:{color:"var(--neutral-text-subtitle-color,light-dark(#61616B, #A2A2AA))"},children:"VND"})}):void 0,onFocus:o.type==="money"?h=>{h.target.value=h.target.value.replace(/,/g,""),h.target.type="number"}:void 0,register:o.methods.register(o.endName,{onBlur:h=>{var p;const f=parseFloat(h.target.value);h.target.type="text",isNaN(f)?h.target.value="":((p=o.methods.getValues(o.name))!=null&&p.length&&parseFloat(o.methods.getValues(o.name).replace(/,/g,""))>f&&o.methods.setError(o.name,{message:"From value must be less than To value"}),o.type==="money"&&(h.target.value=Util.money(f)))}})})]}):jsxRuntimeExports.jsx(DateTimePicker,{style:{width:"100%",flex:(d=o.className)!=null&&d.includes("row")?1:void 0},className:"body-3",placeholder:o.placeholder?o.placeholder:o.label?`${a("choose")} ${o.label.toLowerCase()}`:"",value:o.methods.watch(o.name),endValue:o.methods.watch(o.endName),disabled:o.disabled,pickerType:o.type,onChange:h=>{o.methods.setValue(o.name,h==null?void 0:h.start),o.methods.setValue(o.endName,h==null?void 0:h.end)}})})]})}function GroupCheckboxForm(o){return jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,render:({field:a})=>jsxRuntimeExports.jsxs("div",{className:o.className??"col",style:{gap:"0.8rem",width:"100%",alignItems:"start",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flex:1,flexWrap:"wrap"},children:o.options.map(n=>{var s;return jsxRuntimeExports.jsxs("label",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Checkbox,{disabled:o.disabled,size:"1.6rem",value:(o.dataType==="string"?((s=a.value)==null?void 0:s.split(","))??[]:a.value).includes(n.id),onChange:l=>{var u;let c=o.dataType==="string"?((u=a.value)==null?void 0:u.split(","))??[]:a.value;l?c.push(n.id):c=c.filter(d=>d!==n.id),c=o.dataType==="string"?c.join(","):c,a.onChange(c),o.onChange&&o.onChange(c)}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:n.name})]},n.id)})})]})})}const ColorPickerForm=o=>{var l;const a=React2.useMemo(()=>o.name?convertErrors$1(o.methods.formState.errors,o.name):void 0,[o.name,(l=o.methods.formState.errors)==null?void 0:l[o.name]]),n=React2.useRef(null),{t:s}=useTranslation();return React2.useEffect(()=>{const c=o.methods.watch(o.name);c&&n.current?(n.current.querySelector('input[type="color"]').value=c.slice(0,7),n.current.querySelector('input[type="text"]').value=c.slice(0,7),n.current.querySelector('input[type="number"]').value=Util.hexToPercent(c.slice(7))):n.current&&(n.current.querySelector('input[type="color"]').value="#000000",n.current.querySelector('input[type="text"]').value="",n.current.querySelector('input[type="number"]').value="")},[o.methods.watch(o.name)]),jsxRuntimeExports.jsx(Controller,{name:o.name,control:o.methods.control,render:({field:c})=>{var u;return jsxRuntimeExports.jsxs("div",{ref:n,className:o.className??"col",style:{gap:"0.8rem",overflow:"visible",width:"100%",...o.style??{}},children:[o.labelElement??(o.label?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.4rem",minWidth:"16rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:o.label}),o.required?jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{color:"#E14337"},children:"*"}):null]}):null),jsxRuntimeExports.jsx(TextField,{className:"body-3",placeholder:o.placeholder?o.placeholder:o.label?`${s("input")} ${o.label.toLowerCase()}`:"",onComplete:d=>d.target.blur(),onFocus:d=>d.target.select(),disabled:o.disabled,onBlur:d=>{var g;const h=d.target.value.replace(/#/g,"").substring(0,6),f=n.current.querySelector('input[type="number"]'),p=`#${h}${Util.percentToHex(parseInt((g=f.value)!=null&&g.length?f.value:"100")).toLowerCase()}`;c.onChange(p),o.onChange&&o.onChange(p)},style:{flex:1,width:"100%",...o.textFieldStyle??{}},maxLength:7,prefix:jsxRuntimeExports.jsx("label",{style:{backgroundColor:o.methods.watch(o.name),borderRadius:"0.6rem",width:"2.2rem",height:"2.2rem",border:"1px solid var(--neutral-lighter-border-color,light-dark(#F4F4F5, #242428))"},children:jsxRuntimeExports.jsx("input",{type:"color",disabled:o.disabled,style:{visibility:"hidden"},onChange:d=>{var p;const h=n.current.querySelector('input[type="number"]'),f=`${d.target.value}${Util.percentToHex(parseInt((p=h.value)!=null&&p.length?h.value:"100")).toLowerCase()}`;c.onChange(f),o.onChange&&o.onChange(f)}})}),suffix:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"number",placeholder:"opacity",style:{borderLeft:"1px solid var(--neutral-bolder-border-color,light-dark(#D7D7DB, #494950))",width:"10%",flex:"none",paddingLeft:"0.8rem",minWidth:"3.6rem"},onKeyDown:d=>d.key.toLowerCase()==="enter"&&d.target.blur(),onFocus:d=>d.target.select(),disabled:o.disabled,onBlur:d=>{var g;let h=parseInt(d.target.value);isNaN(h)||h>100?h=100:h<0&&(h=0);const p=`${(g=n.current)==null?void 0:g.querySelector('input[type="color"]').value}${Util.percentToHex(h).toLowerCase()}`;c.onChange(p),o.onChange&&o.onChange(p)}}),jsxRuntimeExports.jsx(Text$2,{className:"regular1",children:"%"})]}),helperText:a&&((u=a==null?void 0:a.message)!=null&&u.length?a==null?void 0:a.message:`${s("input")} ${(o.placeholder?o.placeholder:o.label?`${o.label}`:s("value")).toLowerCase()}`)})]})}})},convertErrors$1=(o,a)=>{if(o&&Object.keys(o).length){const s=a.split(/[.\[\]]/).filter(l=>(l==null?void 0:l.length)>0);var n=o;for(let l of s)n&&(n=n[l]);return n}};function EmptyPage(o){return jsxRuntimeExports.jsxs("div",{className:`col ${o.className??""}`,style:{alignItems:"center",...o.style??{}},children:[jsxRuntimeExports.jsx("img",{alt:"",src:o.imgUrl??"https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/error-file.png",style:{aspectRatio:"1/1",width:"100%",maxWidth:"35rem",...o.imgStyle??{}}}),jsxRuntimeExports.jsx(Text$2,{className:"highlight-6",style:{textAlign:"center",marginTop:"1.6rem"},children:o.title}),jsxRuntimeExports.jsx(Text$2,{className:"subtitle-2",style:{textAlign:"center",marginTop:4},children:o.subtitle}),o.button]})}class DataController{constructor(a){M(this,"module");this.module=a}async getAll(){return await BaseDA.get(ConfigData.url+"data/getAll",{headers:{pid:ConfigData.pid,module:this.module}})}async getProperties(){return await BaseDA.get(ConfigData.url+`setting/getProperties?name=${this.module}`,{headers:{pid:ConfigData.pid,module:"column"}})}async aggregateList(a){return await BaseDA.post(ConfigData.url+"data/aggregateList",{headers:{pid:ConfigData.pid,module:this.module},body:a})}async filterByEmptyKey(a){return await BaseDA.post(ConfigData.url+"data/filterByEmptyKey",{headers:{pid:ConfigData.pid,module:this.module},body:a})}async patternList(a){return await BaseDA.post(ConfigData.url+"data/patternList",{headers:{pid:ConfigData.pid,module:this.module},body:a})}async group(a){return await BaseDA.post(ConfigData.url+"data/group",{headers:{pid:ConfigData.pid,module:this.module},body:a})}async getListSimple(a){var l;const n={...a,searchRaw:(l=a==null?void 0:a.query)!=null&&l.length?a==null?void 0:a.query:"*"};return delete n.query,await BaseDA.post(ConfigData.url+"data/getListSimple",{headers:{pid:ConfigData.pid,module:this.module},body:n})}async getById(a){return await BaseDA.post(ConfigData.url+`data/getById?id=${a}`,{headers:{pid:ConfigData.pid,module:this.module}})}async getByListId(a){return await BaseDA.post(ConfigData.url+"data/getByIds",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:a}})}async add(a){return await BaseDA.post(ConfigData.url+"data/action?action=add",{headers:{pid:ConfigData.pid,module:this.module},body:{data:a}})}async edit(a){return await BaseDA.post(ConfigData.url+"data/action?action=edit",{headers:{pid:ConfigData.pid,module:this.module},body:{data:a}})}async duplicate(a){return await BaseDA.post(ConfigData.url+"data/action?action=duplicate",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:a}})}async delete(a){return await BaseDA.post(ConfigData.url+"data/action?action=delete",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:a}})}async checkotp(a){return await BaseDA.post(ConfigData.url+"data/checkotp",{body:{idToken:a}})}}class SettingDataController{constructor(a){M(this,"setting");this.setting=a}async action(a,n){return await BaseDA.post(ConfigData.url+`data/${this.setting}/action?action=${a}`,{headers:{pid:ConfigData.pid},body:{data:n.data,ids:n.ids}})}async getListSimple(a){var s;return await BaseDA.post(ConfigData.url+`data/${this.setting}/getListSimple`,{headers:{pid:ConfigData.pid},body:{searchRaw:(s=a==null?void 0:a.query)!=null&&s.length?a==null?void 0:a.query:"*",page:a==null?void 0:a.page,size:a==null?void 0:a.size,returns:a==null?void 0:a.returns,sortby:a==null?void 0:a.sortby}})}async getByIds(a){return await BaseDA.post(ConfigData.url+`data/${this.setting}/getByIds`,{headers:{pid:ConfigData.pid},body:{ids:a}})}static async searchSetting(a){var s;return await BaseDA.post(ConfigData.url+"data/getListSimple",{body:{searchRaw:(s=a==null?void 0:a.query)!=null&&s.length?a==null?void 0:a.query:"*",page:(a==null?void 0:a.page)??1,size:(a==null?void 0:a.size)??10,returns:a==null?void 0:a.returns,sortby:a==null?void 0:a.sortby}})}}class AccountController{constructor(a){M(this,"module");this.module=a??"Customer"}async login(a,n){const s=await BaseDA.post(ConfigData.url+"data/login",{headers:{module:this.module,pid:ConfigData.pid},body:a});return s.code===200&&!n&&(Object.keys(s.data).forEach(l=>{Util.setCookie(l,s.data[l])}),Util.setCookie("timeRefresh",Date.now()/1e3+9*60)),s}async getInfor(){return await BaseDA.get(ConfigData.url+"data/getInfo",{headers:{module:this.module,pid:ConfigData.pid}})}async hashPassword(a){return await BaseDA.get(ConfigData.url+`data/bcrypt?password=${a}`)}}class TableController{constructor(a){M(this,"module");this.module=a}async getAll(){return await BaseDA.get(ConfigData.url+"setting/getAll",{headers:{pid:ConfigData.pid,module:this.module}})}async getByListId(a){return await BaseDA.post(ConfigData.url+"setting/getByIds",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:a}})}async getListSimple(a){return await BaseDA.post(ConfigData.url+"setting/getListSimple",{headers:{pid:ConfigData.pid,module:this.module},body:{searchRaw:(a==null?void 0:a.query)??"*",page:(a==null?void 0:a.page)??1,size:(a==null?void 0:a.size)??10,returns:a==null?void 0:a.returns,sortby:a==null?void 0:a.sortby}})}async group(a){return await BaseDA.post(ConfigData.url+"setting/group",{headers:{pid:ConfigData.pid,module:this.module},body:a})}async add(a){return await BaseDA.post(ConfigData.url+"setting/action?action=add",{headers:{pid:ConfigData.pid,module:this.module},body:{data:a}})}async edit(a){return await BaseDA.post(ConfigData.url+"setting/action?action=edit",{headers:{pid:ConfigData.pid,module:this.module},body:{data:a}})}async delete(a){return await BaseDA.post(ConfigData.url+"setting/action?action=delete",{headers:{pid:ConfigData.pid,module:this.module},body:{ids:a}})}}class WiniController{constructor(a){M(this,"module");M(this,"login",async a=>await BaseDA.post(ConfigData.url+"wini/login",{headers:{module:"Customer"},body:a}));M(this,"loginGoogle",async(a,n,s)=>await BaseDA.post(ConfigData.url+"wini/login",{headers:{module:"Customer"},body:{type:"google",token:a,ggClientId:n,ggClientSecret:s}}));M(this,"getInfor",async()=>await BaseDA.get(ConfigData.url+"wini/getCustomerInfor",{headers:{module:"Customer"}}));this.module=a}async getAll(){return await BaseDA.get(ConfigData.url+"wini/getAll",{headers:{module:this.module}})}async getListSimple(a){return await BaseDA.post(ConfigData.url+"wini/getListSimple",{headers:{module:this.module},body:{searchRaw:(a==null?void 0:a.query)??"*",page:(a==null?void 0:a.page)??1,size:(a==null?void 0:a.size)??10,returns:a==null?void 0:a.returns,sortby:a==null?void 0:a.sortby}})}async group(a){return await BaseDA.post(ConfigData.url+"wini/group",{headers:{module:this.module},body:a})}async add(a){return await BaseDA.post(ConfigData.url+"wini/action?action=add",{headers:{module:this.module},body:{data:a}})}async edit(a){return await BaseDA.post(ConfigData.url+"wini/action?action=edit",{headers:{module:this.module},body:{data:a}})}async delete(a){return await BaseDA.post(ConfigData.url+"wini/action?action=delete",{headers:{module:this.module},body:{ids:a}})}async getByIds(a){return await BaseDA.post(ConfigData.url+"wini/getByIds",{headers:{module:this.module},body:{ids:a}})}}var ComponentType=(o=>(o.text="Text",o.img="Image",o.icon="Icon",o.checkbox="Checkbox",o.switch="Switch",o.textField="Textfield",o.button="Button",o.calendar="Calendar",o.datePicker="DatePicker",o.radio="Radio",o.select1="Select1",o.selectMultiple="SelectMultiple",o.textArea="Textarea",o.table="Table",o.dateTimePicker="DateTimePicker",o.navLink="Navlink",o.rate="Rate",o.progressBar="ProgressBar",o.progressCircle="ProgressCircle",o.upload="Upload",o.numberPicker="NumberPicker",o.importMultipleFile="ImportMultiple",o.ckEditor="CkEditor",o.range="Range",o.container="Container",o.chart="Chart",o.form="Form",o.card="Card",o.view="View",o.report="Report",o.popup="Popup",o.colorPicker="ColorPicker",o.none="none",o))(ComponentType||{}),FEDataType=(o=>(o.GID="GID",o.STRING="STRING",o.NUMBER="NUMBER",o.BOOLEAN="BOOLEAN",o.DATE="DATE",o.DATETIME="DATETIME",o.MONEY="MONEY",o.PASSWORD="PASSWORD",o.LIST="LIST",o.HTML="HTML",o.FILE="FILE",o))(FEDataType||{}),ValidateType=(o=>(o[o.required=1]="required",o[o.email=2]="email",o[o.minLength=3]="minLength",o[o.maxLength=4]="maxLength",o[o.number=5]="number",o[o.phone=6]="phone",o[o.equality=13]="equality",o[o.greaterThan=14]="greaterThan",o[o.greaterThanOrEqualTo=15]="greaterThanOrEqualTo",o[o.lessThanOrEqualTo=16]="lessThanOrEqualTo",o[o.lessThan=17]="lessThan",o[o.odd=18]="odd",o[o.even=19]="even",o[o.async=20]="async",o))(ValidateType||{}),TriggerType=(o=>(o.click="click",o.dbclick="dbclick",o.hover="hover",o.keydown="keydown",o.mouseenter="mouseenter",o.mouseleave="mouseleave",o.mousedown="mousedown",o.mouseup="mouseup",o.scrollend="scrollend",o))(TriggerType||{}),ActionType=(o=>(o.navigate="navigate",o.reload="reload",o.back="back",o.scrollTo="scrollTo",o.showPopup="showPopup",o.toastMessage="toastMessage",o.closePopup="closePopup",o.mousedown="mousedown",o.mouseup="mouseup",o.submit="submit",o.setValue="setValue",o.loadMore="loadMore",o))(ActionType||{}),DesignTokenType=(o=>(o.group="group",o.color="color",o.font="font",o.border="border",o.boxShadow="box-shadow",o.custom="custom",o))(DesignTokenType||{}),ColDataType=(o=>(o.text="text",o.label="label",o.datetime="datetime",o.money="money",o.website="website",o.formula="formula",o.people="people",o.files="files",o.progress="progress",o.rate="rate",o))(ColDataType||{});const ColDataTypeIcon={text:jsxRuntimeExports.jsx(Winicon,{src:"outline/text/text",size:"1.2rem"}),people:jsxRuntimeExports.jsx(Winicon,{src:"outline/location/explore-user",size:"1.2rem"}),label:jsxRuntimeExports.jsx(Winicon,{src:"outline/shopping/tag",size:"1.2rem"}),datetime:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/calendar-date-2",size:"1.2rem"}),money:jsxRuntimeExports.jsx(Winicon,{src:"outline/business/round-dollar",size:"1.2rem"}),website:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/web-link",size:"1.2rem"}),formula:jsxRuntimeExports.jsx(Winicon,{src:"outline/business/math",size:"1.2rem"}),files:jsxRuntimeExports.jsx(Winicon,{src:"outline/files/document",size:"1.2rem"}),progress:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/progress-indicator",size:"1.2rem"}),rate:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/star",size:"1.2rem"}),"":jsxRuntimeExports.jsx(Winicon,{src:"outline/text/text",size:"1.2rem"})},regexGetVariableByThis$1=/\${this\.(\w+)}/,regexGetVariables=/\${([^}]*)}/,replaceVariables=/\${([^}]*)}/g,regexWatchDoubleQuote=/watch\("([^"]*)"\)/,regexWatchSingleQuote=/watch\('([^']*)'\)/;var validate$1={exports:{}};/*!
 * validate.js 0.13.1
 *
 * (c) 2013-2019 Nicklas Ansman, 2013 Wrapp
 * Validate.js may be freely distributed under the MIT license.
 * For all details and documentation:
 * http://validatejs.org/
 */var validate=validate$1.exports,hasRequiredValidate;function requireValidate(){return hasRequiredValidate||(hasRequiredValidate=1,function(o,a){(function(n,s,l){var c=function(d,h,f){f=u.extend({},u.options,f);var p=u.runValidations(d,h,f);if(p.some(function(g){return u.isPromise(g.error)}))throw new Error("Use validate.async if you want support for promises");return c.processValidationResults(p,f)},u=c;u.extend=function(d){return[].slice.call(arguments,1).forEach(function(h){for(var f in h)d[f]=h[f]}),d},u.extend(c,{version:{major:0,minor:13,patch:1,metadata:null,toString:function(){var d=u.format("%{major}.%{minor}.%{patch}",u.version);return u.isEmpty(u.version.metadata)||(d+="+"+u.version.metadata),d}},Promise:typeof Promise<"u"?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(d,h,f){var p=[],g,v,b,w,x,S,E;(u.isDomElement(d)||u.isJqueryElement(d))&&(d=u.collectFormValues(d));for(g in h){b=u.getDeepObjectValue(d,g),w=u.result(h[g],b,d,g,f,h);for(v in w){if(x=u.validators[v],!x)throw E=u.format("Unknown validator %{name}",{name:v}),new Error(E);S=w[v],S=u.result(S,b,d,g,f,h),S&&p.push({attribute:g,value:b,validator:v,globalOptions:f,attributes:d,options:S,error:x.call(x,b,S,g,d,f)})}}return p},processValidationResults:function(d,h){d=u.pruneEmptyErrors(d,h),d=u.expandMultipleErrors(d,h),d=u.convertErrorMessages(d,h);var f=h.format||"grouped";if(typeof u.formatters[f]=="function")d=u.formatters[f](d);else throw new Error(u.format("Unknown format %{format}",h));return u.isEmpty(d)?void 0:d},async:function(d,h,f){f=u.extend({},u.async.options,f);var p=f.wrapErrors||function(v){return v};f.cleanAttributes!==!1&&(d=u.cleanAttributes(d,h));var g=u.runValidations(d,h,f);return new u.Promise(function(v,b){u.waitForResults(g).then(function(){var w=u.processValidationResults(g,f);w?b(new p(w,f,d,h)):v(d)},function(w){b(w)})})},single:function(d,h,f){return f=u.extend({},u.single.options,f,{format:"flat",fullMessages:!1}),u({single:d},{single:h},f)},waitForResults:function(d){return d.reduce(function(h,f){return u.isPromise(f.error)?h.then(function(){return f.error.then(function(p){f.error=p||null})}):h},new u.Promise(function(h){h()}))},result:function(d){var h=[].slice.call(arguments,1);return typeof d=="function"&&(d=d.apply(null,h)),d},isNumber:function(d){return typeof d=="number"&&!isNaN(d)},isFunction:function(d){return typeof d=="function"},isInteger:function(d){return u.isNumber(d)&&d%1===0},isBoolean:function(d){return typeof d=="boolean"},isObject:function(d){return d===Object(d)},isDate:function(d){return d instanceof Date},isDefined:function(d){return d!=null},isPromise:function(d){return!!d&&u.isFunction(d.then)},isJqueryElement:function(d){return d&&u.isString(d.jquery)},isDomElement:function(d){return!d||!d.querySelectorAll||!d.querySelector?!1:u.isObject(document)&&d===document?!0:typeof HTMLElement=="object"?d instanceof HTMLElement:d&&typeof d=="object"&&d!==null&&d.nodeType===1&&typeof d.nodeName=="string"},isEmpty:function(d){var h;if(!u.isDefined(d))return!0;if(u.isFunction(d))return!1;if(u.isString(d))return u.EMPTY_STRING_REGEXP.test(d);if(u.isArray(d))return d.length===0;if(u.isDate(d))return!1;if(u.isObject(d)){for(h in d)return!1;return!0}return!1},format:u.extend(function(d,h){return u.isString(d)?d.replace(u.format.FORMAT_REGEXP,function(f,p,g){return p==="%"?"%{"+g+"}":String(h[g])}):d},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(d){return u.isNumber(d)?d*100%1===0?""+d:parseFloat(Math.round(d*100)/100).toFixed(2):u.isArray(d)?d.map(function(h){return u.prettify(h)}).join(", "):u.isObject(d)?u.isDefined(d.toString)?d.toString():JSON.stringify(d):(d=""+d,d.replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(h,f,p){return""+f+" "+p.toLowerCase()}).toLowerCase())},stringifyValue:function(d,h){var f=h&&h.prettify||u.prettify;return f(d)},isString:function(d){return typeof d=="string"},isArray:function(d){return{}.toString.call(d)==="[object Array]"},isHash:function(d){return u.isObject(d)&&!u.isArray(d)&&!u.isFunction(d)},contains:function(d,h){return u.isDefined(d)?u.isArray(d)?d.indexOf(h)!==-1:h in d:!1},unique:function(d){return u.isArray(d)?d.filter(function(h,f,p){return p.indexOf(h)==f}):d},forEachKeyInKeypath:function(d,h,f){if(u.isString(h)){var p="",g,v=!1;for(g=0;g<h.length;++g)switch(h[g]){case".":v?(v=!1,p+="."):(d=f(d,p,!1),p="");break;case"\\":v?(v=!1,p+="\\"):v=!0;break;default:v=!1,p+=h[g];break}return f(d,p,!0)}},getDeepObjectValue:function(d,h){if(u.isObject(d))return u.forEachKeyInKeypath(d,h,function(f,p){if(u.isObject(f))return f[p]})},collectFormValues:function(d,h){var f={},p,g,v,b,w,x;if(u.isJqueryElement(d)&&(d=d[0]),!d)return f;for(h=h||{},b=d.querySelectorAll("input[name], textarea[name]"),p=0;p<b.length;++p)if(v=b.item(p),!u.isDefined(v.getAttribute("data-ignored"))){var S=v.name.replace(/\./g,"\\\\.");x=u.sanitizeFormValue(v.value,h),v.type==="number"?x=x?+x:null:v.type==="checkbox"?v.attributes.value?v.checked||(x=f[S]||null):x=v.checked:v.type==="radio"&&(v.checked||(x=f[S]||null)),f[S]=x}for(b=d.querySelectorAll("select[name]"),p=0;p<b.length;++p)if(v=b.item(p),!u.isDefined(v.getAttribute("data-ignored"))){if(v.multiple){x=[];for(g in v.options)w=v.options[g],w&&w.selected&&x.push(u.sanitizeFormValue(w.value,h))}else{var E=typeof v.options[v.selectedIndex]<"u"?v.options[v.selectedIndex].value:"";x=u.sanitizeFormValue(E,h)}f[v.name]=x}return f},sanitizeFormValue:function(d,h){return h.trim&&u.isString(d)&&(d=d.trim()),h.nullify!==!1&&d===""?null:d},capitalize:function(d){return u.isString(d)?d[0].toUpperCase()+d.slice(1):d},pruneEmptyErrors:function(d){return d.filter(function(h){return!u.isEmpty(h.error)})},expandMultipleErrors:function(d){var h=[];return d.forEach(function(f){u.isArray(f.error)?f.error.forEach(function(p){h.push(u.extend({},f,{error:p}))}):h.push(f)}),h},convertErrorMessages:function(d,h){h=h||{};var f=[],p=h.prettify||u.prettify;return d.forEach(function(g){var v=u.result(g.error,g.value,g.attribute,g.options,g.attributes,g.globalOptions);if(!u.isString(v)){f.push(g);return}v[0]==="^"?v=v.slice(1):h.fullMessages!==!1&&(v=u.capitalize(p(g.attribute))+" "+v),v=v.replace(/\\\^/g,"^"),v=u.format(v,{value:u.stringifyValue(g.value,h)}),f.push(u.extend({},g,{error:v}))}),f},groupErrorsByAttribute:function(d){var h={};return d.forEach(function(f){var p=h[f.attribute];p?p.push(f):h[f.attribute]=[f]}),h},flattenErrorsToArray:function(d){return d.map(function(h){return h.error}).filter(function(h,f,p){return p.indexOf(h)===f})},cleanAttributes:function(d,h){function f(v,b,w){return u.isObject(v[b])?v[b]:v[b]=w?!0:{}}function p(v){var b={},w;for(w in v)v[w]&&u.forEachKeyInKeypath(b,w,f);return b}function g(v,b){if(!u.isObject(v))return v;var w=u.extend({},v),x,S;for(S in v)x=b[S],u.isObject(x)?w[S]=g(w[S],x):x||delete w[S];return w}return!u.isObject(h)||!u.isObject(d)?{}:(h=p(h),g(d,h))},exposeModule:function(d,h,f,p,g){f?(p&&p.exports&&(f=p.exports=d),f.validate=d):(h.validate=d,d.isFunction(g)&&g.amd&&g([],function(){return d}))},warn:function(d){typeof console<"u"&&console.warn&&console.warn("[validate.js] "+d)},error:function(d){typeof console<"u"&&console.error&&console.error("[validate.js] "+d)}}),c.validators={presence:function(d,h){if(h=u.extend({},this.options,h),h.allowEmpty!==!1?!u.isDefined(d):u.isEmpty(d))return h.message||this.message||"can't be blank"},length:function(d,h,f){if(u.isDefined(d)){h=u.extend({},this.options,h);var p=h.is,g=h.maximum,v=h.minimum,b=h.tokenizer||function(E){return E},w,x=[];d=b(d);var S=d.length;if(!u.isNumber(S))return h.message||this.notValid||"has an incorrect length";if(u.isNumber(p)&&S!==p&&(w=h.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",x.push(u.format(w,{count:p}))),u.isNumber(v)&&S<v&&(w=h.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",x.push(u.format(w,{count:v}))),u.isNumber(g)&&S>g&&(w=h.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",x.push(u.format(w,{count:g}))),x.length>0)return h.message||x}},numericality:function(d,h,f,p,g){if(u.isDefined(d)){h=u.extend({},this.options,h);var v=[],b,w,x={greaterThan:function(A,R){return A>R},greaterThanOrEqualTo:function(A,R){return A>=R},equalTo:function(A,R){return A===R},lessThan:function(A,R){return A<R},lessThanOrEqualTo:function(A,R){return A<=R},divisibleBy:function(A,R){return A%R===0}},S=h.prettify||g&&g.prettify||u.prettify;if(u.isString(d)&&h.strict){var E="^-?(0|[1-9]\\d*)";if(h.onlyInteger||(E+="(\\.\\d+)?"),E+="$",!new RegExp(E).test(d))return h.message||h.notValid||this.notValid||this.message||"must be a valid number"}if(h.noStrings!==!0&&u.isString(d)&&!u.isEmpty(d)&&(d=+d),!u.isNumber(d))return h.message||h.notValid||this.notValid||this.message||"is not a number";if(h.onlyInteger&&!u.isInteger(d))return h.message||h.notInteger||this.notInteger||this.message||"must be an integer";for(b in x)if(w=h[b],u.isNumber(w)&&!x[b](d,w)){var T="not"+u.capitalize(b),C=h[T]||this[T]||this.message||"must be %{type} %{count}";v.push(u.format(C,{count:w,type:S(b)}))}if(h.odd&&d%2!==1&&v.push(h.notOdd||this.notOdd||this.message||"must be odd"),h.even&&d%2!==0&&v.push(h.notEven||this.notEven||this.message||"must be even"),v.length)return h.message||v}},datetime:u.extend(function(d,h){if(!u.isFunction(this.parse)||!u.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(u.isDefined(d)){h=u.extend({},this.options,h);var f,p=[],g=h.earliest?this.parse(h.earliest,h):NaN,v=h.latest?this.parse(h.latest,h):NaN;if(d=this.parse(d,h),isNaN(d)||h.dateOnly&&d%864e5!==0)return f=h.notValid||h.message||this.notValid||"must be a valid date",u.format(f,{value:arguments[0]});if(!isNaN(g)&&d<g&&(f=h.tooEarly||h.message||this.tooEarly||"must be no earlier than %{date}",f=u.format(f,{value:this.format(d,h),date:this.format(g,h)}),p.push(f)),!isNaN(v)&&d>v&&(f=h.tooLate||h.message||this.tooLate||"must be no later than %{date}",f=u.format(f,{date:this.format(v,h),value:this.format(d,h)}),p.push(f)),p.length)return u.unique(p)}},{parse:null,format:null}),date:function(d,h){return h=u.extend({},h,{dateOnly:!0}),u.validators.datetime.call(u.validators.datetime,d,h)},format:function(d,h){(u.isString(h)||h instanceof RegExp)&&(h={pattern:h}),h=u.extend({},this.options,h);var f=h.message||this.message||"is invalid",p=h.pattern,g;if(u.isDefined(d)&&(!u.isString(d)||(u.isString(p)&&(p=new RegExp(h.pattern,h.flags)),g=p.exec(d),!g||g[0].length!=d.length)))return f},inclusion:function(d,h){if(u.isDefined(d)&&(u.isArray(h)&&(h={within:h}),h=u.extend({},this.options,h),!u.contains(h.within,d))){var f=h.message||this.message||"^%{value} is not included in the list";return u.format(f,{value:d})}},exclusion:function(d,h){if(u.isDefined(d)&&(u.isArray(h)&&(h={within:h}),h=u.extend({},this.options,h),!!u.contains(h.within,d))){var f=h.message||this.message||"^%{value} is restricted";return u.isString(h.within[d])&&(d=h.within[d]),u.format(f,{value:d})}},email:u.extend(function(d,h){h=u.extend({},this.options,h);var f=h.message||this.message||"is not a valid email";if(u.isDefined(d)&&(!u.isString(d)||!this.PATTERN.exec(d)))return f},{PATTERN:/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/i}),equality:function(d,h,f,p,g){if(u.isDefined(d)){u.isString(h)&&(h={attribute:h}),h=u.extend({},this.options,h);var v=h.message||this.message||"is not equal to %{attribute}";if(u.isEmpty(h.attribute)||!u.isString(h.attribute))throw new Error("The attribute must be a non empty string");var b=u.getDeepObjectValue(p,h.attribute),w=h.comparator||function(S,E){return S===E},x=h.prettify||g&&g.prettify||u.prettify;if(!w(d,b,h,f,p))return u.format(v,{attribute:x(h.attribute)})}},url:function(d,h){if(u.isDefined(d)){h=u.extend({},this.options,h);var f=h.message||this.message||"is not a valid url",p=h.schemes||this.schemes||["http","https"],g=h.allowLocal||this.allowLocal||!1,v=h.allowDataUrl||this.allowDataUrl||!1;if(!u.isString(d))return f;var b="^(?:(?:"+p.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",w="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";if(g?w+="?":b+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",b+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+w+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",v){var x="\\w+\\/[-+.\\w]+(?:;[\\w=]+)*",S="[A-Za-z0-9-_.!~\\*'();\\/?:@&=+$,%]*",E="data:(?:"+x+")?(?:;base64)?,"+S;b="(?:"+b+")|(?:^"+E+"$)"}var T=new RegExp(b,"i");if(!T.exec(d))return f}},type:u.extend(function(d,h,f,p,g){if(u.isString(h)&&(h={type:h}),!!u.isDefined(d)){var v=u.extend({},this.options,h),b=v.type;if(!u.isDefined(b))throw new Error("No type was specified");var w;if(u.isFunction(b)?w=b:w=this.types[b],!u.isFunction(w))throw new Error("validate.validators.type.types."+b+" must be a function.");if(!w(d,v,f,p,g)){var x=h.message||this.messages[b]||this.message||v.message||(u.isFunction(b)?"must be of the correct type":"must be of type %{type}");return u.isFunction(x)&&(x=x(d,h,f,p,g)),u.format(x,{attribute:u.prettify(f),type:b})}}},{types:{object:function(d){return u.isObject(d)&&!u.isArray(d)},array:u.isArray,integer:u.isInteger,number:u.isNumber,string:u.isString,date:u.isDate,boolean:u.isBoolean},messages:{}})},c.formatters={detailed:function(d){return d},flat:u.flattenErrorsToArray,grouped:function(d){var h;d=u.groupErrorsByAttribute(d);for(h in d)d[h]=u.flattenErrorsToArray(d[h]);return d},constraint:function(d){var h;d=u.groupErrorsByAttribute(d);for(h in d)d[h]=d[h].map(function(f){return f.validator}).sort();return d}},c.exposeModule(c,this,n,s,l)}).call(validate,a,o,null)}(validate$1,validate$1.exports)),validate$1.exports}var validateExports=requireValidate();function RenderComponentByType({fieldItem:o,methods:a,className:n,style:s={},labelStyle:l={},label:c}){var u,d,h,f,p,g;switch(o.Form.ComponentType){case ComponentType.textField:return o.DataType===FEDataType.PASSWORD?jsxRuntimeExports.jsx(InputPasswordForm,{methods:a,name:o.Name,label:c??o.Form.Label,required:o.Form.Required,readOnly:o.Form.ReadOnly,disabled:o.Form.Disabled,placeholder:o.Form.Placeholder,maxLength:o.Form.Max,className:n,style:s}):jsxRuntimeExports.jsx(TextFieldForm,{methods:a,required:o.Form.Required,readOnly:o.Form.ReadOnly,disabled:o.Form.Disabled,label:c??o.Form.Label,placeholder:o.Form.Placeholder,name:o.Name,maxLength:o.Form.Max,className:n,style:s,type:o.DataType===FEDataType.NUMBER?"number":o.DataType===FEDataType.MONEY?"money":"text"});case ComponentType.textArea:return jsxRuntimeExports.jsx(TextAreaForm,{methods:a,className:n,style:{alignItems:"start",...s},required:o.Form.Required,readOnly:o.Form.ReadOnly,disabled:o.Form.Disabled,label:c??o.Form.Label,placeholder:o.Form.Placeholder,name:o.Name,maxLength:o.Form.Max});case ComponentType.switch:return jsxRuntimeExports.jsxs("div",{className:n??"row",style:{width:"100%",justifyContent:"space-between",...s},children:[o.Form.Title?jsxRuntimeExports.jsx(Text$2,{className:"label-3",style:l,children:o.Form.Title}):void 0,jsxRuntimeExports.jsx(SwitchForm,{methods:a,disabled:o.Form.Disabled,label:c??o.Form.Label,name:o.Name,size:"2.4rem"})]});case ComponentType.rate:return jsxRuntimeExports.jsxs("div",{className:n??"row",style:{width:"100%",justifyContent:"space-between",...s},children:[o.Form.Title?jsxRuntimeExports.jsx(Text$2,{className:"label-3",style:l,children:o.Form.Title}):void 0,jsxRuntimeExports.jsx(RateForm,{methods:a,label:c??o.Form.Label,name:o.Name,size:"2.4rem"})]});case ComponentType.radio:return jsxRuntimeExports.jsx(GroupRadioButtonForm,{methods:a,name:o.Name,className:n,style:s,options:o.Form.Options,label:c??o.Form.Label,required:o.Form.Required});case ComponentType.select1:return jsxRuntimeExports.jsx(Select1Form,{methods:a,required:o.Form.Required,disabled:o.Form.Disabled,label:c??o.Form.Label,placeholder:o.Form.Placeholder,name:o.Name,options:o.Form.Options??[],className:n,style:s});case ComponentType.selectMultiple:return jsxRuntimeExports.jsx(SelectMultipleForm,{methods:a,required:o.Form.Required,disabled:o.Form.Disabled,label:c??o.Form.Label,placeholder:o.Form.Placeholder,name:o.Name,options:o.Form.Options??[],className:n,style:s});case ComponentType.checkbox:return(d=(u=o.Form)==null?void 0:u.Options)!=null&&d.length?jsxRuntimeExports.jsx(GroupCheckboxForm,{methods:a,disabled:o.Form.Disabled,label:c??o.Form.Label,name:o.Name,className:n,style:s,dataType:"string",options:o.Form.Options}):jsxRuntimeExports.jsx(CheckboxForm,{methods:a,disabled:o.Form.Disabled,label:c??o.Form.Label,name:o.Name,style:s});case ComponentType.upload:return jsxRuntimeExports.jsx(ImportFileForm,{methods:a,required:o.Form.Required,label:c??o.Form.Label,name:o.Name,allowType:(h=o.Form.AcceptFiles)==null?void 0:h.split(","),subTitle:o.Form.AcceptFiles,maxSize:o.Form.Max,multiple:o.Form.Multiple,className:n,style:s,disabled:o.Form.Disabled});case ComponentType.datePicker:case ComponentType.dateTimePicker:return jsxRuntimeExports.jsx(DateTimePickerForm,{methods:a,required:o.Form.Required,disabled:o.Form.Disabled,label:c??o.Form.Label,placeholder:o.Form.Placeholder,name:o.Name,type:o.Form.ComponentType===ComponentType.datePicker?"date":"datetime",className:n,style:s});case ComponentType.ckEditor:return jsxRuntimeExports.jsx(CKEditorForm,{methods:a,name:o.Name,className:n,style:{alignItems:"start",...s},required:o.Form.Required,disabled:o.Form.Disabled,label:c??o.Form.Label,placeholder:o.Form.Placeholder});case ComponentType.range:const v=o.Name.split(","),b=(f=o.Form.Placeholder)==null?void 0:f.split(",");return jsxRuntimeExports.jsx(RangeForm,{methods:a,className:n,type:o.DataType===FEDataType.DATE?"daterange":o.DataType===FEDataType.DATETIME?"datetimerange":"number",name:v[0].trim(),endName:v[1].trim(),placeholder:o.Form.Placeholder,placeholderStart:(p=b==null?void 0:b[0])==null?void 0:p.trim(),placeholderEnd:(g=b==null?void 0:b[1])==null?void 0:g.trim(),label:c??o.Form.Label,disabled:o.Form.Disabled,style:s});case ComponentType.colorPicker:return jsxRuntimeExports.jsx(ColorPickerForm,{methods:a,className:n,style:{alignItems:"start",...s},required:o.Form.Required,disabled:o.Form.Disabled,label:c??o.Form.Label,name:o.Name});default:return jsxRuntimeExports.jsx("div",{})}}async function validateForm({list:o=[],formdata:a}){const n=validateExports.validate;n.validators.customDate=customValidateDateTime,n.validators.myAsyncValidator=myAsyncValidator,n.options={fullMessages:!1};const s=validateByType({list:o});let l=validateExports.validate(a,s.validator);if(!l&&Object.keys(s.asyncValidator).length)try{l=await n.async(a,s.asyncValidator)}catch(c){l=c}return l}function validateByType({list:o=[]}){let a={},n={};return o.forEach(s=>{var c;let l={};(c=s.Validate)==null||c.forEach(u=>{switch(u.type){case ValidateType.email:l.email={message:u.message??"Invalid email"};break;case ValidateType.minLength:l.length={...l.length??{},minimum:u.value,tooShort:u.message??`At least ${u.value} characters`};break;case ValidateType.maxLength:l.length={...l.length??{},maximum:u.value,tooLong:u.message??`At most ${u.value} characters`};break;case ValidateType.number:l.format={pattern:"[0-9]+",flags:"i",message:u.message??"Only number"};break;case ValidateType.phone:l.format={pattern:"([+]{0,1})(84|0[3|5|7|8|9])+([0-9]{8})",flags:"g",message:u.message??"Invalid phone number"};break;case ValidateType.greaterThan:l.numericality={...l.numericality??{},greaterThan:u.value,notGreaterThan:u.message??`Value must be greater than ${u.value}`};break;case ValidateType.greaterThanOrEqualTo:l.numericality={...l.numericality??{},greaterThanOrEqualTo:u.value,notGreaterThan:u.message??`Value must be greater than or equal to ${u.value}`};break;case ValidateType.lessThan:l.numericality={...l.numericality??{},lessThan:u.value,notLessThan:u.message??`Value must be less than ${u.value}`};break;case ValidateType.lessThanOrEqualTo:l.numericality={...l.numericality??{},lessThanOrEqualTo:u.value,notLessThanOrEqualTo:u.message??`Value must be less than or equal to ${u.value}`};break}}),a[s.Name]=l}),{validator:a,asyncValidator:n}}function customValidateDateTime(o,a){try{const l=typeof o=="string"?Util.stringToDate(o,a.dateOnly?"dd/mm/yyyy":"dd/mm/yyyy hh:mm"):new Date(o);if(a.earliest)try{var n=typeof a.earliest=="string"?Util.stringToDate(o,a.dateOnly?"dd/mm/yyyy":"dd/mm/yyyy hh:mm"):new Date(a.earliest)}catch(c){console.log(c)}if(a.latest)try{var s=typeof a.latest=="string"?Util.stringToDate(o,a.dateOnly?"dd/mm/yyyy":"dd/mm/yyyy hh:mm"):new Date(a.latest)}catch(c){console.log(c)}if(isNaN(l))return a.message;if(n){if(a.dateOnly&&differenceInCalendarDays(l,n)<0)return a.tooEarly;if(!a.dateOnly&&differenceInMinutes(l,n)<0)return a.tooEarly}else if(s){if(a.dateOnly&&differenceInCalendarDays(l,s)<0)return a.tooLate;if(!a.dateOnly&&differenceInMinutes(l,s)<0)return a.tooLate}}catch{return a.message}}async function myAsyncValidator(o,a){if(console.log("????????: ",o," -----------: ",a),a.url){const n=await BaseDA.post(a.url,{body:{value:o}});if(n&&n.code!==200)return n.message}}const regexGetVariableByThis=/\${this\.(\w+)}/g,FormById=React2.forwardRef((o,a)=>{const n=useForm({shouldFocusError:!1}),s=useForm({shouldFocusError:!1}),[l,c]=React2.useState(),u=React2.useMemo(()=>(l==null?void 0:l.Props)??[],[l]),d=[ComponentType.textField,ComponentType.textArea,ComponentType.select1,ComponentType.selectMultiple,ComponentType.checkbox,ComponentType.switch,ComponentType.radio,ComponentType.colorPicker,ComponentType.ckEditor,ComponentType.datePicker,ComponentType.upload,ComponentType.numberPicker],h=React2.useMemo(()=>u.filter(D=>{var O;return((O=D.NameField)==null?void 0:O.length)&&d.includes(D.Type)}),[u]),f=new TableController("column"),p=new TableController("rel"),[g,v]=React2.useState([]),[b,w]=React2.useState([]),x=React2.useMemo(()=>b.filter(D=>{var O;return D.Query&&((O=D.Query.match(regexGetVariableByThis$1))==null?void 0:O.length)}),[b.length]),S=React2.useMemo(()=>b.filter(D=>{var O,H;return!((O=D.Query)!=null&&O.length)||!((H=D.Query.match(regexGetVariableByThis$1))!=null&&H.length)}),[b.length]),E=React2.useMemo(()=>x.map(D=>{var H;const O=(H=D.Query)==null?void 0:H.match(regexGetVariableByThis$1)[0];return n.watch(O.replace(regexGetVariableByThis$1,(q,Y)=>Y))}),[x.length]),T=useLocation(),C=new URLSearchParams(T.search),A=new AccountController,R=async D=>{var H,q;let O={...D};switch(delete O.id,l.Category){case 1:for(const ee in O)if(ee!=="Id")if(O[ee]!==void 0&&O[ee]!==null){let re=b.find(ne=>ne.Column===ee)??g.find(ne=>ne.Name===ee.replace("_min","").replace("_max",""));if(typeof O[ee]!="string"||O[ee].length||re)if(re)switch(re==null?void 0:re.DataType){case FEDataType.NUMBER:let ne=typeof O[ee]=="string"?O[ee].length?parseFloat(O[ee].replace(/,/g,"")):void 0:O[ee];isNaN(ne)&&(ne=void 0),ne?(C.set(ee,ne.toString()),O[ee]=ne):(C.delete(ee),delete O[ee]);break;case FEDataType.DATE:case FEDataType.DATETIME:C.set(ee,O[ee].getTime().toString()),O[ee]=O[ee].getTime();break;case FEDataType.MONEY:const ce=typeof O[ee]=="string"&&O[ee].replace(/,/g,"").length?parseInt(O[ee].replace(/,/g,"")):void 0;ce?(C.set(ee,ce.toString()),O[ee]=ce):(C.delete(ee),delete O[ee]);break;case FEDataType.BOOLEAN:[!0,1,"true"].includes(O[re.Name])?C.set(ee,"true"):C.delete(ee),O[ee]=!![!0,1,"true"].includes(O[re.Name]);break;default:re.Column&&Array.isArray(O[re.Column])?(C.set(ee,O[ee].join(",")),O[ee]=O[ee].join(",")):C.set(ee,O[ee]);break}else C.set(ee,O[ee]);else C.delete(ee),delete O[ee]}else C.has(ee)&&(C.delete(ee),delete O[ee]);delete O.Id,o.onSubmit&&o.onSubmit(O);break;default:O.DateCreated??(O.DateCreated=Date.now());let Y={};Object.keys(O).forEach(ee=>{typeof O[ee]=="string"&&(Y[ee]=O[ee].trim())});const te=await validateForm({list:h.filter(ee=>{var re;return(re=ee.Setting.validate)==null?void 0:re.length}).map(ee=>({Name:ee.NameField,Validate:ee.Setting.validate})),formdata:Y});if(te&&Object.keys(te).length>0){Object.keys(te).forEach(ee=>{var re;n.setError(ee,{message:(re=te[ee])==null?void 0:re[0]})});return}for(let ee of g)if(ee.Name==="DateCreated")O[H=ee.Name]??(O[H]=Date.now());else if(O[ee.Name]!=null&&!ee.Query)switch(ee.DataType){case FEDataType.GID:break;case FEDataType.STRING:Array.isArray(O[ee.Name])?O[ee.Name]=O[ee.Name].join(","):typeof O[ee.Name]!="string"&&(O[ee.Name]=`${O[ee.Name]}`);break;case FEDataType.BOOLEAN:O[ee.Name]=!![!0,1,"true"].includes(O[ee.Name]);break;case FEDataType.NUMBER:O[ee.Name]=typeof O[ee.Name]=="string"?parseFloat(O[ee.Name]):O[ee.Name];break;case FEDataType.DATE:case FEDataType.DATETIME:O[ee.Name]=O[ee.Name].getTime();break;case FEDataType.MONEY:O[ee.Name].replace(/,/g,"").length?O[ee.Name]=parseInt(O[ee.Name].replace(/,/g,"")):delete O[ee.Name];break;case FEDataType.PASSWORD:const re=await A.hashPassword(O[ee.Name]);O[ee.Name]=re.data;break;case FEDataType.FILE:if(O[ee.Name]&&Array.isArray(O[ee.Name])){const ne=O[ee.Name].filter(ce=>ce instanceof File);if(ne.length){const ce=await BaseDA.uploadFiles(ne);ce!=null&&ce.length&&(O[ee.Name]=O[ee.Name].map(ve=>{var be;return ve instanceof File?(be=ce.find(me=>me.Name===ve.name))==null?void 0:be.Id:ve.Id}).filter((ve,be,me)=>(ve==null?void 0:ve.length)&&me.indexOf(ve)===be).join(","))}else O[ee.Name]=O[ee.Name].map(ce=>ce.Id).join(",")}break}for(let ee of b)O[ee.Column]&&Array.isArray(O[ee.Column])&&(O[ee.Column]=O[ee.Column].join(","));Object.keys(O).forEach(ee=>{[...g,...b].find(re=>re.Name===ee||re.Column===ee)||delete O[ee]}),(q=o.onSubmit)==null||q.call(o,O);break}};React2.useImperativeHandle(a,()=>({onSubmit:n.handleSubmit(R,o.onError),methods:n}),[n.watch(),g.length,b.length]),React2.useEffect(()=>{if(g.length)if(n.reset(),l.Category===1){const D=(O,H)=>{if(H==null)return;let q=b.find(Y=>Y.Column===O);if(q??(q=g.find(Y=>Y.Name===O.replace("_min","").replace("_max",""))),q)switch(q.DataType){case FEDataType.NUMBER:n.setValue(O,typeof H=="string"?parseFloat(H):H);break;case FEDataType.DATE:case FEDataType.DATETIME:n.setValue(O,new Date(typeof H=="string"?parseInt(H):H));break;case FEDataType.MONEY:n.setValue(O,Util.money(H));break;case FEDataType.BOOLEAN:q.Form.ComponentType===ComponentType.radio?n.setValue(O,`${H}`):n.setValue(O,H==="true");break;default:n.setValue(O,q.Form.ComponentType===ComponentType.selectMultiple?H.split(","):H);break}else n.setValue(O,H)};if(o.data)for(const O in o.data)D(O,o.data[O]);for(const[O,H]of C)D(O,H)}else if(o.data){const D=o.data,O=[];Object.keys(D).forEach(H=>{var Y,te;const q=h.find(ee=>ee.NameField===H);if(q){const ee=g.find(ne=>ne.Name===H),re=b.find(ne=>ne.Column===H);if(ee)switch(ee.DataType){case FEDataType.GID:n.setValue(H,D[H]);break;case FEDataType.STRING:(Y=ee.Form.Options)!=null&&Y.length?n.setValue(H,(D[H]??"").split(",")):n.setValue(H,D[H]);break;case FEDataType.HTML:n.setValue(H,D[H]);break;case FEDataType.BOOLEAN:n.setValue(H,D[H]);break;case FEDataType.NUMBER:n.setValue(H,typeof D[H]=="string"?parseFloat(D[H]):D[H]);break;case FEDataType.DATE:case FEDataType.DATETIME:n.setValue(H,new Date(typeof D[H]=="string"?parseInt(D[H]):D[H]));break;case FEDataType.MONEY:n.setValue(H,Util.money(D[H]));break;case FEDataType.PASSWORD:n.setValue(H,D[H]);break;case FEDataType.FILE:D[H]&&O.push({id:D[H],name:H});break}else if(re){const ne=(te=D[H])!=null&&te.length?D[H].split(","):[];n.setValue(H,q.Type===ComponentType.checkbox||q.Type===ComponentType.selectMultiple?ne:ne[0])}else n.setValue(H,D[H])}else n.setValue(H,D[H])}),O.length&&BaseDA.getFilesInfor(O.map(H=>H.id.split(",")).flat(1/0)).then(H=>{H.code===200&&O.forEach(q=>{const Y=H.data.filter(te=>te!=null&&q.id.includes(te.Id));Y.length&&n.setValue(q.name,Y.map(te=>({...te,name:te.Name,size:te.Size,type:te.Type,url:ConfigData.imgUrlId+te.Id})))})})}else h.filter(D=>D.Setting.default!==void 0&&D.Setting.default!==null).forEach(D=>{var H;const O=g.find(q=>D.NameField===q.Name);if(O)switch(O.DataType){case FEDataType.GID:n.setValue(O.Name,D.Setting.default);break;case FEDataType.STRING:(H=O.Form.Options)!=null&&H.length?n.setValue(O.Name,D.Setting.default.split(",")):n.setValue(O.Name,D.Setting.default);break;case FEDataType.HTML:n.setValue(O.Name,D.Setting.default);break;case FEDataType.BOOLEAN:n.setValue(O.Name,D.Setting.default);break;case FEDataType.NUMBER:n.setValue(O.Name,typeof D.Setting.default=="string"?parseFloat(D.Setting.default):D.Setting.default);break;case FEDataType.DATE:case FEDataType.DATETIME:n.setValue(O.Name,new Date(typeof D.Setting.default=="string"?parseInt(D.Setting.default):D.Setting.default));break;case FEDataType.MONEY:n.setValue(O.Name,Util.money(D.Setting.default));break;case FEDataType.PASSWORD:n.setValue(O.Name,D.Setting.default);break}})},[o.data,g.length,C.toString()]),React2.useEffect(()=>{j({relatives:x,isWatch:!0})},[...E]),React2.useEffect(()=>{o.id&&new SettingDataController("form").getByIds([o.id]).then(async O=>{if(O.code===200&&O.data[0]){let H=O.data[0];H.Props&&typeof H.Props=="string"&&(H.Props=JSON.parse(H.Props)),Array.isArray(H.Props)||(H.Props=[]),c(H)}})},[o.id]),React2.useEffect(()=>{l&&(p.getListSimple({page:1,size:100,query:`@TableFK:{${l.TbName}}`}).then(D=>{D.code===200&&w(D.data.map(O=>{let H={...O,Form:O.Form?typeof O.Form=="string"?JSON.parse(O.Form):{...O.Form}:{Required:!0}};return H.Form.Sort=l.Props[O.Column],H}))}),f.getListSimple({page:1,size:100,query:`@TableName:{${l.TbName}}`}).then(D=>{D.code===200&&v(D.data.map(O=>{let H={...O,Form:O.Form?typeof O.Form=="string"?JSON.parse(O.Form):{...O.Form}:{Required:!0}};return H.Form.Sort=l.Props[O.Name],H}))}))},[l]),React2.useEffect(()=>{S.length&&j({relatives:S})},[S.length]);const j=({relatives:D=[],isWatch:O=!1})=>{D.forEach(H=>{var Y,te;let q;if(o.customOptions&&(q=o.customOptions[`${H.Column}`]),q)s.setValue(`${H.Column}_Options`,q);else{const ee=new DataController(H.TablePK);H.TablePK===l.TbName?ee.filterByEmptyKey({page:1,size:500,searchRaw:(Y=H.Query)!=null&&Y.length?O?H.Query.replace(regexGetVariableByThis$1,re=>n.getValues((regexGetVariableByThis$1.exec(re)??[])[1])):H.Query:"*",key:"ParentId"}).then(async re=>{re.code===200&&s.setValue(`${H.Column}_Options`,re.data??[])}):ee.getListSimple({page:1,size:1e3,query:O?(te=H.Query)==null?void 0:te.replace(regexGetVariableByThis$1,re=>n.getValues((regexGetVariableByThis$1.exec(re)??[])[1])):H.Query,returns:["Id","Name","ParentId"]}).then(re=>{re.code===200&&s.setValue(`${H.Column}_Options`,re.data??[])})}})};return l?u.filter(D=>!D.ParentId).map(D=>jsxRuntimeExports.jsx(RenderLayerElement,{item:D,list:u,style:o.style,className:o.className,type:"form",methods:n,indexItem:o.data,propsData:o.propsData,childrenData:o.childrenData,itemData:o.itemData,cols:g,rels:b,options:s.watch()},D.Id)):null}),styles$2={"chart-block":"_chart-block_1xm96_1"};var extendStatics$2=function(o,a){return extendStatics$2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])},extendStatics$2(o,a)};function __extends$2(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");extendStatics$2(o,a);function n(){this.constructor=o}o.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}var __assign=function(){return __assign=Object.assign||function(a){for(var n,s=1,l=arguments.length;s<l;s++){n=arguments[s];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(a[c]=n[c])}return a},__assign.apply(this,arguments)};function __awaiter(o,a,n,s){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function d(p){try{f(s.next(p))}catch(g){u(g)}}function h(p){try{f(s.throw(p))}catch(g){u(g)}}function f(p){p.done?c(p.value):l(p.value).then(d,h)}f((s=s.apply(o,a||[])).next())})}function __generator(o,a){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},s,l,c,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(f){return function(p){return h([f,p])}}function h(f){if(s)throw new TypeError("Generator is already executing.");for(;u&&(u=0,f[0]&&(n=0)),n;)try{if(s=1,l&&(c=f[0]&2?l.return:f[0]?l.throw||((c=l.return)&&c.call(l),0):l.next)&&!(c=c.call(l,f[1])).done)return c;switch(l=0,c&&(f=[f[0]&2,c.value]),f[0]){case 0:case 1:c=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,l=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!c||f[1]>c[0]&&f[1]<c[3])){n.label=f[1];break}if(f[0]===6&&n.label<c[1]){n.label=c[1],c=f;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(f);break}c[2]&&n.ops.pop(),n.trys.pop();continue}f=a.call(o,n)}catch(p){f=[6,p],l=0}finally{s=c=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(o,a){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])},extendStatics$1(o,a)};function __extends$1(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");extendStatics$1(o,a);function n(){this.constructor=o}o.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}var Browser=function(){function o(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return o}(),Env=function(){function o(){this.browser=new Browser,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return o}(),env=new Env;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(env.wxa=!0,env.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?env.worker=!0:!env.hasGlobalWindow||"Deno"in window?(env.node=!0,env.svgSupported=!0):detect(navigator.userAgent,env);function detect(o,a){var n=a.browser,s=o.match(/Firefox\/([\d.]+)/),l=o.match(/MSIE\s([\d.]+)/)||o.match(/Trident\/.+?rv:(([\d.]+))/),c=o.match(/Edge?\/([\d.]+)/),u=/micromessenger/i.test(o);s&&(n.firefox=!0,n.version=s[1]),l&&(n.ie=!0,n.version=l[1]),c&&(n.edge=!0,n.version=c[1],n.newEdge=+c[1].split(".")[0]>18),u&&(n.weChat=!0),a.svgSupported=typeof SVGRect<"u",a.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,a.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),a.domSupported=typeof document<"u";var d=document.documentElement.style;a.transform3dSupported=(n.ie&&"transition"in d||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in d)&&!("OTransition"in d),a.transformSupported=a.transform3dSupported||n.ie&&+n.version>=9}var DEFAULT_FONT_SIZE=12,DEFAULT_FONT_FAMILY="sans-serif",DEFAULT_FONT=DEFAULT_FONT_SIZE+"px "+DEFAULT_FONT_FAMILY,OFFSET=20,SCALE=100,defaultWidthMapStr="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function getTextWidthMap(o){var a={};if(typeof JSON>"u")return a;for(var n=0;n<o.length;n++){var s=String.fromCharCode(n+32),l=(o.charCodeAt(n)-OFFSET)/SCALE;a[s]=l}return a}var DEFAULT_TEXT_WIDTH_MAP=getTextWidthMap(defaultWidthMapStr),platformApi={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var o,a;return function(n,s){if(!o){var l=platformApi.createCanvas();o=l&&l.getContext("2d")}if(o)return a!==s&&(a=o.font=s||DEFAULT_FONT),o.measureText(n);n=n||"",s=s||DEFAULT_FONT;var c=/((?:\d+)?\.?\d*)px/.exec(s),u=c&&+c[1]||DEFAULT_FONT_SIZE,d=0;if(s.indexOf("mono")>=0)d=u*n.length;else for(var h=0;h<n.length;h++){var f=DEFAULT_TEXT_WIDTH_MAP[n[h]];d+=f==null?u:f*u}return{width:d}}}(),loadImage:function(o,a,n){var s=new Image;return s.onload=a,s.onerror=n,s.src=o,s}};function setPlatformAPI(o){for(var a in platformApi)o[a]&&(platformApi[a]=o[a])}var BUILTIN_OBJECT=reduce(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(o,a){return o["[object "+a+"]"]=!0,o},{}),TYPED_ARRAY=reduce(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(o,a){return o["[object "+a+"Array]"]=!0,o},{}),objToString=Object.prototype.toString,arrayProto=Array.prototype,nativeForEach=arrayProto.forEach,nativeFilter=arrayProto.filter,nativeSlice=arrayProto.slice,nativeMap=arrayProto.map,ctorFunction=(function(){}).constructor,protoFunction=ctorFunction?ctorFunction.prototype:null,protoKey="__proto__",idStart=2311;function guid(){return idStart++}function logError(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];typeof console<"u"&&console.error.apply(console,o)}function clone$4(o){if(o==null||typeof o!="object")return o;var a=o,n=objToString.call(o);if(n==="[object Array]"){if(!isPrimitive(o)){a=[];for(var s=0,l=o.length;s<l;s++)a[s]=clone$4(o[s])}}else if(TYPED_ARRAY[n]){if(!isPrimitive(o)){var c=o.constructor;if(c.from)a=c.from(o);else{a=new c(o.length);for(var s=0,l=o.length;s<l;s++)a[s]=o[s]}}}else if(!BUILTIN_OBJECT[n]&&!isPrimitive(o)&&!isDom(o)){a={};for(var u in o)o.hasOwnProperty(u)&&u!==protoKey&&(a[u]=clone$4(o[u]))}return a}function merge(o,a,n){if(!isObject$3(a)||!isObject$3(o))return n?clone$4(a):o;for(var s in a)if(a.hasOwnProperty(s)&&s!==protoKey){var l=o[s],c=a[s];isObject$3(c)&&isObject$3(l)&&!isArray$1(c)&&!isArray$1(l)&&!isDom(c)&&!isDom(l)&&!isBuiltInObject(c)&&!isBuiltInObject(l)&&!isPrimitive(c)&&!isPrimitive(l)?merge(l,c,n):(n||!(s in o))&&(o[s]=clone$4(a[s]))}return o}function mergeAll(o,a){for(var n=o[0],s=1,l=o.length;s<l;s++)n=merge(n,o[s],a);return n}function extend(o,a){if(Object.assign)Object.assign(o,a);else for(var n in a)a.hasOwnProperty(n)&&n!==protoKey&&(o[n]=a[n]);return o}function defaults(o,a,n){for(var s=keys$1(a),l=0,c=s.length;l<c;l++){var u=s[l];(n?a[u]!=null:o[u]==null)&&(o[u]=a[u])}return o}var createCanvas=platformApi.createCanvas;function indexOf(o,a){if(o){if(o.indexOf)return o.indexOf(a);for(var n=0,s=o.length;n<s;n++)if(o[n]===a)return n}return-1}function inherits(o,a){var n=o.prototype;function s(){}s.prototype=a.prototype,o.prototype=new s;for(var l in n)n.hasOwnProperty(l)&&(o.prototype[l]=n[l]);o.prototype.constructor=o,o.superClass=a}function mixin(o,a,n){if(o="prototype"in o?o.prototype:o,a="prototype"in a?a.prototype:a,Object.getOwnPropertyNames)for(var s=Object.getOwnPropertyNames(a),l=0;l<s.length;l++){var c=s[l];c!=="constructor"&&(n?a[c]!=null:o[c]==null)&&(o[c]=a[c])}else defaults(o,a,n)}function isArrayLike(o){return!o||typeof o=="string"?!1:typeof o.length=="number"}function each$f(o,a,n){if(o&&a)if(o.forEach&&o.forEach===nativeForEach)o.forEach(a,n);else if(o.length===+o.length)for(var s=0,l=o.length;s<l;s++)a.call(n,o[s],s,o);else for(var c in o)o.hasOwnProperty(c)&&a.call(n,o[c],c,o)}function map$1(o,a,n){if(!o)return[];if(!a)return slice(o);if(o.map&&o.map===nativeMap)return o.map(a,n);for(var s=[],l=0,c=o.length;l<c;l++)s.push(a.call(n,o[l],l,o));return s}function reduce(o,a,n,s){if(o&&a){for(var l=0,c=o.length;l<c;l++)n=a.call(s,n,o[l],l,o);return n}}function filter(o,a,n){if(!o)return[];if(!a)return slice(o);if(o.filter&&o.filter===nativeFilter)return o.filter(a,n);for(var s=[],l=0,c=o.length;l<c;l++)a.call(n,o[l],l,o)&&s.push(o[l]);return s}function find(o,a,n){if(o&&a){for(var s=0,l=o.length;s<l;s++)if(a.call(n,o[s],s,o))return o[s]}}function keys$1(o){if(!o)return[];if(Object.keys)return Object.keys(o);var a=[];for(var n in o)o.hasOwnProperty(n)&&a.push(n);return a}function bindPolyfill(o,a){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return function(){return o.apply(a,n.concat(nativeSlice.call(arguments)))}}var bind$1=protoFunction&&isFunction$1(protoFunction.bind)?protoFunction.call.bind(protoFunction.bind):bindPolyfill;function curry$1(o){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];return function(){return o.apply(this,a.concat(nativeSlice.call(arguments)))}}function isArray$1(o){return Array.isArray?Array.isArray(o):objToString.call(o)==="[object Array]"}function isFunction$1(o){return typeof o=="function"}function isString$2(o){return typeof o=="string"}function isStringSafe(o){return objToString.call(o)==="[object String]"}function isNumber(o){return typeof o=="number"}function isObject$3(o){var a=typeof o;return a==="function"||!!o&&a==="object"}function isBuiltInObject(o){return!!BUILTIN_OBJECT[objToString.call(o)]}function isTypedArray(o){return!!TYPED_ARRAY[objToString.call(o)]}function isDom(o){return typeof o=="object"&&typeof o.nodeType=="number"&&typeof o.ownerDocument=="object"}function isGradientObject(o){return o.colorStops!=null}function isImagePatternObject(o){return o.image!=null}function isRegExp(o){return objToString.call(o)==="[object RegExp]"}function eqNaN(o){return o!==o}function retrieve(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];for(var n=0,s=o.length;n<s;n++)if(o[n]!=null)return o[n]}function retrieve2(o,a){return o??a}function retrieve3(o,a,n){return o??a??n}function slice(o){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];return nativeSlice.apply(o,a)}function normalizeCssArray$1(o){if(typeof o=="number")return[o,o,o,o];var a=o.length;return a===2?[o[0],o[1],o[0],o[1]]:a===3?[o[0],o[1],o[2],o[1]]:o}function assert(o,a){if(!o)throw new Error(a)}function trim$1(o){return o==null?null:typeof o.trim=="function"?o.trim():o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var primitiveKey="__ec_primitive__";function setAsPrimitive(o){o[primitiveKey]=!0}function isPrimitive(o){return o[primitiveKey]}var MapPolyfill=function(){function o(){this.data={}}return o.prototype.delete=function(a){var n=this.has(a);return n&&delete this.data[a],n},o.prototype.has=function(a){return this.data.hasOwnProperty(a)},o.prototype.get=function(a){return this.data[a]},o.prototype.set=function(a,n){return this.data[a]=n,this},o.prototype.keys=function(){return keys$1(this.data)},o.prototype.forEach=function(a){var n=this.data;for(var s in n)n.hasOwnProperty(s)&&a(n[s],s)},o}(),isNativeMapSupported=typeof Map=="function";function maybeNativeMap(){return isNativeMapSupported?new Map:new MapPolyfill}var HashMap=function(){function o(a){var n=isArray$1(a);this.data=maybeNativeMap();var s=this;a instanceof o?a.each(l):a&&each$f(a,l);function l(c,u){n?s.set(c,u):s.set(u,c)}}return o.prototype.hasKey=function(a){return this.data.has(a)},o.prototype.get=function(a){return this.data.get(a)},o.prototype.set=function(a,n){return this.data.set(a,n),n},o.prototype.each=function(a,n){this.data.forEach(function(s,l){a.call(n,s,l)})},o.prototype.keys=function(){var a=this.data.keys();return isNativeMapSupported?Array.from(a):a},o.prototype.removeKey=function(a){this.data.delete(a)},o}();function createHashMap(o){return new HashMap(o)}function concatArray(o,a){for(var n=new o.constructor(o.length+a.length),s=0;s<o.length;s++)n[s]=o[s];for(var l=o.length,s=0;s<a.length;s++)n[s+l]=a[s];return n}function createObject(o,a){var n;if(Object.create)n=Object.create(o);else{var s=function(){};s.prototype=o,n=new s}return a&&extend(n,a),n}function disableUserSelect(o){var a=o.style;a.webkitUserSelect="none",a.userSelect="none",a.webkitTapHighlightColor="rgba(0,0,0,0)",a["-webkit-touch-callout"]="none"}function hasOwn(o,a){return o.hasOwnProperty(a)}function noop$1(){}var RADIAN_TO_DEGREE=180/Math.PI;const util$1=Object.freeze(Object.defineProperty({__proto__:null,HashMap,RADIAN_TO_DEGREE,assert,bind:bind$1,clone:clone$4,concatArray,createCanvas,createHashMap,createObject,curry:curry$1,defaults,disableUserSelect,each:each$f,eqNaN,extend,filter,find,guid,hasOwn,indexOf,inherits,isArray:isArray$1,isArrayLike,isBuiltInObject,isDom,isFunction:isFunction$1,isGradientObject,isImagePatternObject,isNumber,isObject:isObject$3,isPrimitive,isRegExp,isString:isString$2,isStringSafe,isTypedArray,keys:keys$1,logError,map:map$1,merge,mergeAll,mixin,noop:noop$1,normalizeCssArray:normalizeCssArray$1,reduce,retrieve,retrieve2,retrieve3,setAsPrimitive,slice,trim:trim$1},Symbol.toStringTag,{value:"Module"}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics=function(o,a){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(n[l]=s[l])},extendStatics(o,a)};function __extends(o,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");extendStatics(o,a);function n(){this.constructor=o}o.prototype=a===null?Object.create(a):(n.prototype=a.prototype,new n)}function create$2(o,a){return o==null&&(o=0),a==null&&(a=0),[o,a]}function copy$2(o,a){return o[0]=a[0],o[1]=a[1],o}function clone$3(o){return[o[0],o[1]]}function set$1(o,a,n){return o[0]=a,o[1]=n,o}function add(o,a,n){return o[0]=a[0]+n[0],o[1]=a[1]+n[1],o}function scaleAndAdd$1(o,a,n,s){return o[0]=a[0]+n[0]*s,o[1]=a[1]+n[1]*s,o}function sub(o,a,n){return o[0]=a[0]-n[0],o[1]=a[1]-n[1],o}function len(o){return Math.sqrt(lenSquare(o))}var length=len;function lenSquare(o){return o[0]*o[0]+o[1]*o[1]}var lengthSquare=lenSquare;function mul$1(o,a,n){return o[0]=a[0]*n[0],o[1]=a[1]*n[1],o}function div(o,a,n){return o[0]=a[0]/n[0],o[1]=a[1]/n[1],o}function dot(o,a){return o[0]*a[0]+o[1]*a[1]}function scale$2(o,a,n){return o[0]=a[0]*n,o[1]=a[1]*n,o}function normalize$3(o,a){var n=len(a);return n===0?(o[0]=0,o[1]=0):(o[0]=a[0]/n,o[1]=a[1]/n),o}function distance(o,a){return Math.sqrt((o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1]))}var dist$2=distance;function distanceSquare(o,a){return(o[0]-a[0])*(o[0]-a[0])+(o[1]-a[1])*(o[1]-a[1])}var distSquare=distanceSquare;function negate(o,a){return o[0]=-a[0],o[1]=-a[1],o}function lerp$1(o,a,n,s){return o[0]=a[0]+s*(n[0]-a[0]),o[1]=a[1]+s*(n[1]-a[1]),o}function applyTransform$1(o,a,n){var s=a[0],l=a[1];return o[0]=n[0]*s+n[2]*l+n[4],o[1]=n[1]*s+n[3]*l+n[5],o}function min$1(o,a,n){return o[0]=Math.min(a[0],n[0]),o[1]=Math.min(a[1],n[1]),o}function max$1(o,a,n){return o[0]=Math.max(a[0],n[0]),o[1]=Math.max(a[1],n[1]),o}const vector=Object.freeze(Object.defineProperty({__proto__:null,add,applyTransform:applyTransform$1,clone:clone$3,copy:copy$2,create:create$2,dist:dist$2,distSquare,distance,distanceSquare,div,dot,len,lenSquare,length,lengthSquare,lerp:lerp$1,max:max$1,min:min$1,mul:mul$1,negate,normalize:normalize$3,scale:scale$2,scaleAndAdd:scaleAndAdd$1,set:set$1,sub},Symbol.toStringTag,{value:"Module"}));var Param=function(){function o(a,n){this.target=a,this.topTarget=n&&n.topTarget}return o}(),Draggable=function(){function o(a){this.handler=a,a.on("mousedown",this._dragStart,this),a.on("mousemove",this._drag,this),a.on("mouseup",this._dragEnd,this)}return o.prototype._dragStart=function(a){for(var n=a.target;n&&!n.draggable;)n=n.parent||n.__hostTarget;n&&(this._draggingTarget=n,n.dragging=!0,this._x=a.offsetX,this._y=a.offsetY,this.handler.dispatchToElement(new Param(n,a),"dragstart",a.event))},o.prototype._drag=function(a){var n=this._draggingTarget;if(n){var s=a.offsetX,l=a.offsetY,c=s-this._x,u=l-this._y;this._x=s,this._y=l,n.drift(c,u,a),this.handler.dispatchToElement(new Param(n,a),"drag",a.event);var d=this.handler.findHover(s,l,n).target,h=this._dropTarget;this._dropTarget=d,n!==d&&(h&&d!==h&&this.handler.dispatchToElement(new Param(h,a),"dragleave",a.event),d&&d!==h&&this.handler.dispatchToElement(new Param(d,a),"dragenter",a.event))}},o.prototype._dragEnd=function(a){var n=this._draggingTarget;n&&(n.dragging=!1),this.handler.dispatchToElement(new Param(n,a),"dragend",a.event),this._dropTarget&&this.handler.dispatchToElement(new Param(this._dropTarget,a),"drop",a.event),this._draggingTarget=null,this._dropTarget=null},o}(),Eventful=function(){function o(a){a&&(this._$eventProcessor=a)}return o.prototype.on=function(a,n,s,l){this._$handlers||(this._$handlers={});var c=this._$handlers;if(typeof n=="function"&&(l=s,s=n,n=null),!s||!a)return this;var u=this._$eventProcessor;n!=null&&u&&u.normalizeQuery&&(n=u.normalizeQuery(n)),c[a]||(c[a]=[]);for(var d=0;d<c[a].length;d++)if(c[a][d].h===s)return this;var h={h:s,query:n,ctx:l||this,callAtLast:s.zrEventfulCallAtLast},f=c[a].length-1,p=c[a][f];return p&&p.callAtLast?c[a].splice(f,0,h):c[a].push(h),this},o.prototype.isSilent=function(a){var n=this._$handlers;return!n||!n[a]||!n[a].length},o.prototype.off=function(a,n){var s=this._$handlers;if(!s)return this;if(!a)return this._$handlers={},this;if(n){if(s[a]){for(var l=[],c=0,u=s[a].length;c<u;c++)s[a][c].h!==n&&l.push(s[a][c]);s[a]=l}s[a]&&s[a].length===0&&delete s[a]}else delete s[a];return this},o.prototype.trigger=function(a){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[a],c=this._$eventProcessor;if(l)for(var u=n.length,d=l.length,h=0;h<d;h++){var f=l[h];if(!(c&&c.filter&&f.query!=null&&!c.filter(a,f.query)))switch(u){case 0:f.h.call(f.ctx);break;case 1:f.h.call(f.ctx,n[0]);break;case 2:f.h.call(f.ctx,n[0],n[1]);break;default:f.h.apply(f.ctx,n);break}}return c&&c.afterTrigger&&c.afterTrigger(a),this},o.prototype.triggerWithContext=function(a){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];if(!this._$handlers)return this;var l=this._$handlers[a],c=this._$eventProcessor;if(l)for(var u=n.length,d=n[u-1],h=l.length,f=0;f<h;f++){var p=l[f];if(!(c&&c.filter&&p.query!=null&&!c.filter(a,p.query)))switch(u){case 0:p.h.call(d);break;case 1:p.h.call(d,n[0]);break;case 2:p.h.call(d,n[0],n[1]);break;default:p.h.apply(d,n.slice(1,u-1));break}}return c&&c.afterTrigger&&c.afterTrigger(a),this},o}(),LN2=Math.log(2);function determinant(o,a,n,s,l,c){var u=s+"-"+l,d=o.length;if(c.hasOwnProperty(u))return c[u];if(a===1){var h=Math.round(Math.log((1<<d)-1&~l)/LN2);return o[n][h]}for(var f=s|1<<n,p=n+1;s&1<<p;)p++;for(var g=0,v=0,b=0;v<d;v++){var w=1<<v;w&l||(g+=(b%2?-1:1)*o[n][v]*determinant(o,a-1,p,f,l|w,c),b++)}return c[u]=g,g}function buildTransformer(o,a){var n=[[o[0],o[1],1,0,0,0,-a[0]*o[0],-a[0]*o[1]],[0,0,0,o[0],o[1],1,-a[1]*o[0],-a[1]*o[1]],[o[2],o[3],1,0,0,0,-a[2]*o[2],-a[2]*o[3]],[0,0,0,o[2],o[3],1,-a[3]*o[2],-a[3]*o[3]],[o[4],o[5],1,0,0,0,-a[4]*o[4],-a[4]*o[5]],[0,0,0,o[4],o[5],1,-a[5]*o[4],-a[5]*o[5]],[o[6],o[7],1,0,0,0,-a[6]*o[6],-a[6]*o[7]],[0,0,0,o[6],o[7],1,-a[7]*o[6],-a[7]*o[7]]],s={},l=determinant(n,8,0,0,0,s);if(l!==0){for(var c=[],u=0;u<8;u++)for(var d=0;d<8;d++)c[d]==null&&(c[d]=0),c[d]+=((u+d)%2?-1:1)*determinant(n,7,u===0?1:0,1<<u,1<<d,s)/l*a[u];return function(h,f,p){var g=f*c[6]+p*c[7]+1;h[0]=(f*c[0]+p*c[1]+c[2])/g,h[1]=(f*c[3]+p*c[4]+c[5])/g}}}var EVENT_SAVED_PROP="___zrEVENTSAVED",_calcOut$1=[];function transformLocalCoord(o,a,n,s,l){return transformCoordWithViewport(_calcOut$1,a,s,l,!0)&&transformCoordWithViewport(o,n,_calcOut$1[0],_calcOut$1[1])}function transformCoordWithViewport(o,a,n,s,l){if(a.getBoundingClientRect&&env.domSupported&&!isCanvasEl(a)){var c=a[EVENT_SAVED_PROP]||(a[EVENT_SAVED_PROP]={}),u=prepareCoordMarkers(a,c),d=preparePointerTransformer(u,c,l);if(d)return d(o,n,s),!0}return!1}function prepareCoordMarkers(o,a){var n=a.markers;if(n)return n;n=a.markers=[];for(var s=["left","right"],l=["top","bottom"],c=0;c<4;c++){var u=document.createElement("div"),d=u.style,h=c%2,f=(c>>1)%2;d.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",s[h]+":0",l[f]+":0",s[1-h]+":auto",l[1-f]+":auto",""].join("!important;"),o.appendChild(u),n.push(u)}return n}function preparePointerTransformer(o,a,n){for(var s=n?"invTrans":"trans",l=a[s],c=a.srcCoords,u=[],d=[],h=!0,f=0;f<4;f++){var p=o[f].getBoundingClientRect(),g=2*f,v=p.left,b=p.top;u.push(v,b),h=h&&c&&v===c[g]&&b===c[g+1],d.push(o[f].offsetLeft,o[f].offsetTop)}return h&&l?l:(a.srcCoords=u,a[s]=n?buildTransformer(d,u):buildTransformer(u,d))}function isCanvasEl(o){return o.nodeName.toUpperCase()==="CANVAS"}var replaceReg=/([&<>"'])/g,replaceMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function encodeHTML(o){return o==null?"":(o+"").replace(replaceReg,function(a,n){return replaceMap[n]})}var MOUSE_EVENT_REG=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_calcOut=[],firefoxNotSupportOffsetXY=env.browser.firefox&&+env.browser.version.split(".")[0]<39;function clientToLocal(o,a,n,s){return n=n||{},s?calculateZrXY(o,a,n):firefoxNotSupportOffsetXY&&a.layerX!=null&&a.layerX!==a.offsetX?(n.zrX=a.layerX,n.zrY=a.layerY):a.offsetX!=null?(n.zrX=a.offsetX,n.zrY=a.offsetY):calculateZrXY(o,a,n),n}function calculateZrXY(o,a,n){if(env.domSupported&&o.getBoundingClientRect){var s=a.clientX,l=a.clientY;if(isCanvasEl(o)){var c=o.getBoundingClientRect();n.zrX=s-c.left,n.zrY=l-c.top;return}else if(transformCoordWithViewport(_calcOut,o,s,l)){n.zrX=_calcOut[0],n.zrY=_calcOut[1];return}}n.zrX=n.zrY=0}function getNativeEvent(o){return o||window.event}function normalizeEvent(o,a,n){if(a=getNativeEvent(a),a.zrX!=null)return a;var s=a.type,l=s&&s.indexOf("touch")>=0;if(l){var u=s!=="touchend"?a.targetTouches[0]:a.changedTouches[0];u&&clientToLocal(o,u,a,n)}else{clientToLocal(o,a,a,n);var c=getWheelDeltaMayPolyfill(a);a.zrDelta=c?c/120:-(a.detail||0)/3}var d=a.button;return a.which==null&&d!==void 0&&MOUSE_EVENT_REG.test(a.type)&&(a.which=d&1?1:d&2?3:d&4?2:0),a}function getWheelDeltaMayPolyfill(o){var a=o.wheelDelta;if(a)return a;var n=o.deltaX,s=o.deltaY;if(n==null||s==null)return a;var l=Math.abs(s!==0?s:n),c=s>0?-1:s<0?1:n>0?-1:1;return 3*l*c}function addEventListener(o,a,n,s){o.addEventListener(a,n,s)}function removeEventListener(o,a,n,s){o.removeEventListener(a,n,s)}var stop=function(o){o.preventDefault(),o.stopPropagation(),o.cancelBubble=!0};function isMiddleOrRightButtonOnMouseUpDown(o){return o.which===2||o.which===3}var GestureMgr=function(){function o(){this._track=[]}return o.prototype.recognize=function(a,n,s){return this._doTrack(a,n,s),this._recognize(a)},o.prototype.clear=function(){return this._track.length=0,this},o.prototype._doTrack=function(a,n,s){var l=a.touches;if(l){for(var c={points:[],touches:[],target:n,event:a},u=0,d=l.length;u<d;u++){var h=l[u],f=clientToLocal(s,h,{});c.points.push([f.zrX,f.zrY]),c.touches.push(h)}this._track.push(c)}},o.prototype._recognize=function(a){for(var n in recognizers)if(recognizers.hasOwnProperty(n)){var s=recognizers[n](this._track,a);if(s)return s}},o}();function dist$1(o){var a=o[1][0]-o[0][0],n=o[1][1]-o[0][1];return Math.sqrt(a*a+n*n)}function center$1(o){return[(o[0][0]+o[1][0])/2,(o[0][1]+o[1][1])/2]}var recognizers={pinch:function(o,a){var n=o.length;if(n){var s=(o[n-1]||{}).points,l=(o[n-2]||{}).points||s;if(l&&l.length>1&&s&&s.length>1){var c=dist$1(s)/dist$1(l);!isFinite(c)&&(c=1),a.pinchScale=c;var u=center$1(s);return a.pinchX=u[0],a.pinchY=u[1],{type:"pinch",target:o[0].target,event:a}}}}};function create$1(){return[1,0,0,1,0,0]}function identity(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=1,o[4]=0,o[5]=0,o}function copy$1(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4],o[5]=a[5],o}function mul(o,a,n){var s=a[0]*n[0]+a[2]*n[1],l=a[1]*n[0]+a[3]*n[1],c=a[0]*n[2]+a[2]*n[3],u=a[1]*n[2]+a[3]*n[3],d=a[0]*n[4]+a[2]*n[5]+a[4],h=a[1]*n[4]+a[3]*n[5]+a[5];return o[0]=s,o[1]=l,o[2]=c,o[3]=u,o[4]=d,o[5]=h,o}function translate(o,a,n){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o[4]=a[4]+n[0],o[5]=a[5]+n[1],o}function rotate(o,a,n,s){s===void 0&&(s=[0,0]);var l=a[0],c=a[2],u=a[4],d=a[1],h=a[3],f=a[5],p=Math.sin(n),g=Math.cos(n);return o[0]=l*g+d*p,o[1]=-l*p+d*g,o[2]=c*g+h*p,o[3]=-c*p+g*h,o[4]=g*(u-s[0])+p*(f-s[1])+s[0],o[5]=g*(f-s[1])-p*(u-s[0])+s[1],o}function scale$1(o,a,n){var s=n[0],l=n[1];return o[0]=a[0]*s,o[1]=a[1]*l,o[2]=a[2]*s,o[3]=a[3]*l,o[4]=a[4]*s,o[5]=a[5]*l,o}function invert(o,a){var n=a[0],s=a[2],l=a[4],c=a[1],u=a[3],d=a[5],h=n*u-c*s;return h?(h=1/h,o[0]=u*h,o[1]=-c*h,o[2]=-s*h,o[3]=n*h,o[4]=(s*d-u*l)*h,o[5]=(c*l-n*d)*h,o):null}function clone$2(o){var a=create$1();return copy$1(a,o),a}const matrix=Object.freeze(Object.defineProperty({__proto__:null,clone:clone$2,copy:copy$1,create:create$1,identity,invert,mul,rotate,scale:scale$1,translate},Symbol.toStringTag,{value:"Module"}));var Point=function(){function o(a,n){this.x=a||0,this.y=n||0}return o.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this},o.prototype.clone=function(){return new o(this.x,this.y)},o.prototype.set=function(a,n){return this.x=a,this.y=n,this},o.prototype.equal=function(a){return a.x===this.x&&a.y===this.y},o.prototype.add=function(a){return this.x+=a.x,this.y+=a.y,this},o.prototype.scale=function(a){this.x*=a,this.y*=a},o.prototype.scaleAndAdd=function(a,n){this.x+=a.x*n,this.y+=a.y*n},o.prototype.sub=function(a){return this.x-=a.x,this.y-=a.y,this},o.prototype.dot=function(a){return this.x*a.x+this.y*a.y},o.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},o.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},o.prototype.normalize=function(){var a=this.len();return this.x/=a,this.y/=a,this},o.prototype.distance=function(a){var n=this.x-a.x,s=this.y-a.y;return Math.sqrt(n*n+s*s)},o.prototype.distanceSquare=function(a){var n=this.x-a.x,s=this.y-a.y;return n*n+s*s},o.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},o.prototype.transform=function(a){if(a){var n=this.x,s=this.y;return this.x=a[0]*n+a[2]*s+a[4],this.y=a[1]*n+a[3]*s+a[5],this}},o.prototype.toArray=function(a){return a[0]=this.x,a[1]=this.y,a},o.prototype.fromArray=function(a){this.x=a[0],this.y=a[1]},o.set=function(a,n,s){a.x=n,a.y=s},o.copy=function(a,n){a.x=n.x,a.y=n.y},o.len=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},o.lenSquare=function(a){return a.x*a.x+a.y*a.y},o.dot=function(a,n){return a.x*n.x+a.y*n.y},o.add=function(a,n,s){a.x=n.x+s.x,a.y=n.y+s.y},o.sub=function(a,n,s){a.x=n.x-s.x,a.y=n.y-s.y},o.scale=function(a,n,s){a.x=n.x*s,a.y=n.y*s},o.scaleAndAdd=function(a,n,s,l){a.x=n.x+s.x*l,a.y=n.y+s.y*l},o.lerp=function(a,n,s,l){var c=1-l;a.x=c*n.x+l*s.x,a.y=c*n.y+l*s.y},o}(),mathMin$a=Math.min,mathMax$a=Math.max,lt=new Point,rb=new Point,lb=new Point,rt=new Point,minTv$1=new Point,maxTv$1=new Point,BoundingRect=function(){function o(a,n,s,l){s<0&&(a=a+s,s=-s),l<0&&(n=n+l,l=-l),this.x=a,this.y=n,this.width=s,this.height=l}return o.prototype.union=function(a){var n=mathMin$a(a.x,this.x),s=mathMin$a(a.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=mathMax$a(a.x+a.width,this.x+this.width)-n:this.width=a.width,isFinite(this.y)&&isFinite(this.height)?this.height=mathMax$a(a.y+a.height,this.y+this.height)-s:this.height=a.height,this.x=n,this.y=s},o.prototype.applyTransform=function(a){o.applyTransform(this,this,a)},o.prototype.calculateTransform=function(a){var n=this,s=a.width/n.width,l=a.height/n.height,c=create$1();return translate(c,c,[-n.x,-n.y]),scale$1(c,c,[s,l]),translate(c,c,[a.x,a.y]),c},o.prototype.intersect=function(a,n){if(!a)return!1;a instanceof o||(a=o.create(a));var s=this,l=s.x,c=s.x+s.width,u=s.y,d=s.y+s.height,h=a.x,f=a.x+a.width,p=a.y,g=a.y+a.height,v=!(c<h||f<l||d<p||g<u);if(n){var b=1/0,w=0,x=Math.abs(c-h),S=Math.abs(f-l),E=Math.abs(d-p),T=Math.abs(g-u),C=Math.min(x,S),A=Math.min(E,T);c<h||f<l?C>w&&(w=C,x<S?Point.set(maxTv$1,-x,0):Point.set(maxTv$1,S,0)):C<b&&(b=C,x<S?Point.set(minTv$1,x,0):Point.set(minTv$1,-S,0)),d<p||g<u?A>w&&(w=A,E<T?Point.set(maxTv$1,0,-E):Point.set(maxTv$1,0,T)):C<b&&(b=C,E<T?Point.set(minTv$1,0,E):Point.set(minTv$1,0,-T))}return n&&Point.copy(n,v?minTv$1:maxTv$1),v},o.prototype.contain=function(a,n){var s=this;return a>=s.x&&a<=s.x+s.width&&n>=s.y&&n<=s.y+s.height},o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height)},o.prototype.copy=function(a){o.copy(this,a)},o.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},o.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},o.prototype.isZero=function(){return this.width===0||this.height===0},o.create=function(a){return new o(a.x,a.y,a.width,a.height)},o.copy=function(a,n){a.x=n.x,a.y=n.y,a.width=n.width,a.height=n.height},o.applyTransform=function(a,n,s){if(!s){a!==n&&o.copy(a,n);return}if(s[1]<1e-5&&s[1]>-1e-5&&s[2]<1e-5&&s[2]>-1e-5){var l=s[0],c=s[3],u=s[4],d=s[5];a.x=n.x*l+u,a.y=n.y*c+d,a.width=n.width*l,a.height=n.height*c,a.width<0&&(a.x+=a.width,a.width=-a.width),a.height<0&&(a.y+=a.height,a.height=-a.height);return}lt.x=lb.x=n.x,lt.y=rt.y=n.y,rb.x=rt.x=n.x+n.width,rb.y=lb.y=n.y+n.height,lt.transform(s),rt.transform(s),rb.transform(s),lb.transform(s),a.x=mathMin$a(lt.x,rb.x,lb.x,rt.x),a.y=mathMin$a(lt.y,rb.y,lb.y,rt.y);var h=mathMax$a(lt.x,rb.x,lb.x,rt.x),f=mathMax$a(lt.y,rb.y,lb.y,rt.y);a.width=h-a.x,a.height=f-a.y},o}(),SILENT="silent";function makeEventPacket(o,a,n){return{type:o,event:n,target:a.target,topTarget:a.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:stopEvent}}function stopEvent(){stop(this.event)}var EmptyProxy=function(o){__extends(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.handler=null,n}return a.prototype.dispose=function(){},a.prototype.setCursor=function(){},a}(Eventful),HoveredResult=function(){function o(a,n){this.x=a,this.y=n}return o}(),handlerNames=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],tmpRect$1=new BoundingRect(0,0,0,0),Handler=function(o){__extends(a,o);function a(n,s,l,c,u){var d=o.call(this)||this;return d._hovered=new HoveredResult(0,0),d.storage=n,d.painter=s,d.painterRoot=c,d._pointerSize=u,l=l||new EmptyProxy,d.proxy=null,d.setHandlerProxy(l),d._draggingMgr=new Draggable(d),d}return a.prototype.setHandlerProxy=function(n){this.proxy&&this.proxy.dispose(),n&&(each$f(handlerNames,function(s){n.on&&n.on(s,this[s],this)},this),n.handler=this),this.proxy=n},a.prototype.mousemove=function(n){var s=n.zrX,l=n.zrY,c=isOutsideBoundary(this,s,l),u=this._hovered,d=u.target;d&&!d.__zr&&(u=this.findHover(u.x,u.y),d=u.target);var h=this._hovered=c?new HoveredResult(s,l):this.findHover(s,l),f=h.target,p=this.proxy;p.setCursor&&p.setCursor(f?f.cursor:"default"),d&&f!==d&&this.dispatchToElement(u,"mouseout",n),this.dispatchToElement(h,"mousemove",n),f&&f!==d&&this.dispatchToElement(h,"mouseover",n)},a.prototype.mouseout=function(n){var s=n.zrEventControl;s!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",n),s!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:n})},a.prototype.resize=function(){this._hovered=new HoveredResult(0,0)},a.prototype.dispatch=function(n,s){var l=this[n];l&&l.call(this,s)},a.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},a.prototype.setCursorStyle=function(n){var s=this.proxy;s.setCursor&&s.setCursor(n)},a.prototype.dispatchToElement=function(n,s,l){n=n||{};var c=n.target;if(!(c&&c.silent)){for(var u="on"+s,d=makeEventPacket(s,n,l);c&&(c[u]&&(d.cancelBubble=!!c[u].call(c,d)),c.trigger(s,d),c=c.__hostTarget?c.__hostTarget:c.parent,!d.cancelBubble););d.cancelBubble||(this.trigger(s,d),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(h){typeof h[u]=="function"&&h[u].call(h,d),h.trigger&&h.trigger(s,d)}))}},a.prototype.findHover=function(n,s,l){var c=this.storage.getDisplayList(),u=new HoveredResult(n,s);if(setHoverTarget(c,u,n,s,l),this._pointerSize&&!u.target){for(var d=[],h=this._pointerSize,f=h/2,p=new BoundingRect(n-f,s-f,h,h),g=c.length-1;g>=0;g--){var v=c[g];v!==l&&!v.ignore&&!v.ignoreCoarsePointer&&(!v.parent||!v.parent.ignoreCoarsePointer)&&(tmpRect$1.copy(v.getBoundingRect()),v.transform&&tmpRect$1.applyTransform(v.transform),tmpRect$1.intersect(p)&&d.push(v))}if(d.length)for(var b=4,w=Math.PI/12,x=Math.PI*2,S=0;S<f;S+=b)for(var E=0;E<x;E+=w){var T=n+S*Math.cos(E),C=s+S*Math.sin(E);if(setHoverTarget(d,u,T,C,l),u.target)return u}}return u},a.prototype.processGesture=function(n,s){this._gestureMgr||(this._gestureMgr=new GestureMgr);var l=this._gestureMgr;s==="start"&&l.clear();var c=l.recognize(n,this.findHover(n.zrX,n.zrY,null).target,this.proxy.dom);if(s==="end"&&l.clear(),c){var u=c.type;n.gestureEvent=u;var d=new HoveredResult;d.target=c.target,this.dispatchToElement(d,u,c.event)}},a}(Eventful);each$f(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(o){Handler.prototype[o]=function(a){var n=a.zrX,s=a.zrY,l=isOutsideBoundary(this,n,s),c,u;if((o!=="mouseup"||!l)&&(c=this.findHover(n,s),u=c.target),o==="mousedown")this._downEl=u,this._downPoint=[a.zrX,a.zrY],this._upEl=u;else if(o==="mouseup")this._upEl=u;else if(o==="click"){if(this._downEl!==this._upEl||!this._downPoint||dist$2(this._downPoint,[a.zrX,a.zrY])>4)return;this._downPoint=null}this.dispatchToElement(c,o,a)}});function isHover(o,a,n){if(o[o.rectHover?"rectContain":"contain"](a,n)){for(var s=o,l=void 0,c=!1;s;){if(s.ignoreClip&&(c=!0),!c){var u=s.getClipPath();if(u&&!u.contain(a,n))return!1}s.silent&&(l=!0);var d=s.__hostTarget;s=d||s.parent}return l?SILENT:!0}return!1}function setHoverTarget(o,a,n,s,l){for(var c=o.length-1;c>=0;c--){var u=o[c],d=void 0;if(u!==l&&!u.ignore&&(d=isHover(u,n,s))&&(!a.topTarget&&(a.topTarget=u),d!==SILENT)){a.target=u;break}}}function isOutsideBoundary(o,a,n){var s=o.painter;return a<0||a>s.getWidth()||n<0||n>s.getHeight()}var DEFAULT_MIN_MERGE=32,DEFAULT_MIN_GALLOPING=7;function minRunLength(o){for(var a=0;o>=DEFAULT_MIN_MERGE;)a|=o&1,o>>=1;return o+a}function makeAscendingRun(o,a,n,s){var l=a+1;if(l===n)return 1;if(s(o[l++],o[a])<0){for(;l<n&&s(o[l],o[l-1])<0;)l++;reverseRun(o,a,l)}else for(;l<n&&s(o[l],o[l-1])>=0;)l++;return l-a}function reverseRun(o,a,n){for(n--;a<n;){var s=o[a];o[a++]=o[n],o[n--]=s}}function binaryInsertionSort(o,a,n,s,l){for(s===a&&s++;s<n;s++){for(var c=o[s],u=a,d=s,h;u<d;)h=u+d>>>1,l(c,o[h])<0?d=h:u=h+1;var f=s-u;switch(f){case 3:o[u+3]=o[u+2];case 2:o[u+2]=o[u+1];case 1:o[u+1]=o[u];break;default:for(;f>0;)o[u+f]=o[u+f-1],f--}o[u]=c}}function gallopLeft(o,a,n,s,l,c){var u=0,d=0,h=1;if(c(o,a[n+l])>0){for(d=s-l;h<d&&c(o,a[n+l+h])>0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d),u+=l,h+=l}else{for(d=l+1;h<d&&c(o,a[n+l-h])<=0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d);var f=u;u=l-h,h=l-f}for(u++;u<h;){var p=u+(h-u>>>1);c(o,a[n+p])>0?u=p+1:h=p}return h}function gallopRight(o,a,n,s,l,c){var u=0,d=0,h=1;if(c(o,a[n+l])<0){for(d=l+1;h<d&&c(o,a[n+l-h])<0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d);var f=u;u=l-h,h=l-f}else{for(d=s-l;h<d&&c(o,a[n+l+h])>=0;)u=h,h=(h<<1)+1,h<=0&&(h=d);h>d&&(h=d),u+=l,h+=l}for(u++;u<h;){var p=u+(h-u>>>1);c(o,a[n+p])<0?h=p:u=p+1}return h}function TimSort(o,a){var n=DEFAULT_MIN_GALLOPING,s,l,c=0,u=[];s=[],l=[];function d(b,w){s[c]=b,l[c]=w,c+=1}function h(){for(;c>1;){var b=c-2;if(b>=1&&l[b-1]<=l[b]+l[b+1]||b>=2&&l[b-2]<=l[b]+l[b-1])l[b-1]<l[b+1]&&b--;else if(l[b]>l[b+1])break;p(b)}}function f(){for(;c>1;){var b=c-2;b>0&&l[b-1]<l[b+1]&&b--,p(b)}}function p(b){var w=s[b],x=l[b],S=s[b+1],E=l[b+1];l[b]=x+E,b===c-3&&(s[b+1]=s[b+2],l[b+1]=l[b+2]),c--;var T=gallopRight(o[S],o,w,x,0,a);w+=T,x-=T,x!==0&&(E=gallopLeft(o[w+x-1],o,S,E,E-1,a),E!==0&&(x<=E?g(w,x,S,E):v(w,x,S,E)))}function g(b,w,x,S){var E=0;for(E=0;E<w;E++)u[E]=o[b+E];var T=0,C=x,A=b;if(o[A++]=o[C++],--S===0){for(E=0;E<w;E++)o[A+E]=u[T+E];return}if(w===1){for(E=0;E<S;E++)o[A+E]=o[C+E];o[A+S]=u[T];return}for(var R=n,j,D,O;;){j=0,D=0,O=!1;do if(a(o[C],u[T])<0){if(o[A++]=o[C++],D++,j=0,--S===0){O=!0;break}}else if(o[A++]=u[T++],j++,D=0,--w===1){O=!0;break}while((j|D)<R);if(O)break;do{if(j=gallopRight(o[C],u,T,w,0,a),j!==0){for(E=0;E<j;E++)o[A+E]=u[T+E];if(A+=j,T+=j,w-=j,w<=1){O=!0;break}}if(o[A++]=o[C++],--S===0){O=!0;break}if(D=gallopLeft(u[T],o,C,S,0,a),D!==0){for(E=0;E<D;E++)o[A+E]=o[C+E];if(A+=D,C+=D,S-=D,S===0){O=!0;break}}if(o[A++]=u[T++],--w===1){O=!0;break}R--}while(j>=DEFAULT_MIN_GALLOPING||D>=DEFAULT_MIN_GALLOPING);if(O)break;R<0&&(R=0),R+=2}if(n=R,n<1&&(n=1),w===1){for(E=0;E<S;E++)o[A+E]=o[C+E];o[A+S]=u[T]}else{if(w===0)throw new Error;for(E=0;E<w;E++)o[A+E]=u[T+E]}}function v(b,w,x,S){var E=0;for(E=0;E<S;E++)u[E]=o[x+E];var T=b+w-1,C=S-1,A=x+S-1,R=0,j=0;if(o[A--]=o[T--],--w===0){for(R=A-(S-1),E=0;E<S;E++)o[R+E]=u[E];return}if(S===1){for(A-=w,T-=w,j=A+1,R=T+1,E=w-1;E>=0;E--)o[j+E]=o[R+E];o[A]=u[C];return}for(var D=n;;){var O=0,H=0,q=!1;do if(a(u[C],o[T])<0){if(o[A--]=o[T--],O++,H=0,--w===0){q=!0;break}}else if(o[A--]=u[C--],H++,O=0,--S===1){q=!0;break}while((O|H)<D);if(q)break;do{if(O=w-gallopRight(u[C],o,b,w,w-1,a),O!==0){for(A-=O,T-=O,w-=O,j=A+1,R=T+1,E=O-1;E>=0;E--)o[j+E]=o[R+E];if(w===0){q=!0;break}}if(o[A--]=u[C--],--S===1){q=!0;break}if(H=S-gallopLeft(o[T],u,0,S,S-1,a),H!==0){for(A-=H,C-=H,S-=H,j=A+1,R=C+1,E=0;E<H;E++)o[j+E]=u[R+E];if(S<=1){q=!0;break}}if(o[A--]=o[T--],--w===0){q=!0;break}D--}while(O>=DEFAULT_MIN_GALLOPING||H>=DEFAULT_MIN_GALLOPING);if(q)break;D<0&&(D=0),D+=2}if(n=D,n<1&&(n=1),S===1){for(A-=w,T-=w,j=A+1,R=T+1,E=w-1;E>=0;E--)o[j+E]=o[R+E];o[A]=u[C]}else{if(S===0)throw new Error;for(R=A-(S-1),E=0;E<S;E++)o[R+E]=u[E]}}return{mergeRuns:h,forceMergeRuns:f,pushRun:d}}function sort$2(o,a,n,s){n||(n=0),s||(s=o.length);var l=s-n;if(!(l<2)){var c=0;if(l<DEFAULT_MIN_MERGE){c=makeAscendingRun(o,n,s,a),binaryInsertionSort(o,n,s,n+c,a);return}var u=TimSort(o,a),d=minRunLength(l);do{if(c=makeAscendingRun(o,n,s,a),c<d){var h=l;h>d&&(h=d),binaryInsertionSort(o,n,n+h,n+c,a),c=h}u.pushRun(n,c),u.mergeRuns(),l-=c,n+=c}while(l!==0);u.forceMergeRuns()}}var REDRAW_BIT=1,STYLE_CHANGED_BIT=2,SHAPE_CHANGED_BIT=4,invalidZErrorLogged=!1;function logInvalidZError(){invalidZErrorLogged||(invalidZErrorLogged=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function shapeCompareFunc(o,a){return o.zlevel===a.zlevel?o.z===a.z?o.z2-a.z2:o.z-a.z:o.zlevel-a.zlevel}var Storage=function(){function o(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=shapeCompareFunc}return o.prototype.traverse=function(a,n){for(var s=0;s<this._roots.length;s++)this._roots[s].traverse(a,n)},o.prototype.getDisplayList=function(a,n){n=n||!1;var s=this._displayList;return(a||!s.length)&&this.updateDisplayList(n),s},o.prototype.updateDisplayList=function(a){this._displayListLen=0;for(var n=this._roots,s=this._displayList,l=0,c=n.length;l<c;l++)this._updateAndAddDisplayable(n[l],null,a);s.length=this._displayListLen,sort$2(s,shapeCompareFunc)},o.prototype._updateAndAddDisplayable=function(a,n,s){if(!(a.ignore&&!s)){a.beforeUpdate(),a.update(),a.afterUpdate();var l=a.getClipPath();if(a.ignoreClip)n=null;else if(l){n?n=n.slice():n=[];for(var c=l,u=a;c;)c.parent=u,c.updateTransform(),n.push(c),u=c,c=c.getClipPath()}if(a.childrenRef){for(var d=a.childrenRef(),h=0;h<d.length;h++){var f=d[h];a.__dirty&&(f.__dirty|=REDRAW_BIT),this._updateAndAddDisplayable(f,n,s)}a.__dirty=0}else{var p=a;n&&n.length?p.__clipPaths=n:p.__clipPaths&&p.__clipPaths.length>0&&(p.__clipPaths=[]),isNaN(p.z)&&(logInvalidZError(),p.z=0),isNaN(p.z2)&&(logInvalidZError(),p.z2=0),isNaN(p.zlevel)&&(logInvalidZError(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var g=a.getDecalElement&&a.getDecalElement();g&&this._updateAndAddDisplayable(g,n,s);var v=a.getTextGuideLine();v&&this._updateAndAddDisplayable(v,n,s);var b=a.getTextContent();b&&this._updateAndAddDisplayable(b,n,s)}},o.prototype.addRoot=function(a){a.__zr&&a.__zr.storage===this||this._roots.push(a)},o.prototype.delRoot=function(a){if(a instanceof Array){for(var n=0,s=a.length;n<s;n++)this.delRoot(a[n]);return}var l=indexOf(this._roots,a);l>=0&&this._roots.splice(l,1)},o.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},o.prototype.getRoots=function(){return this._roots},o.prototype.dispose=function(){this._displayList=null,this._roots=null},o}(),requestAnimationFrame$1;requestAnimationFrame$1=env.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(o){return setTimeout(o,16)};var easingFuncs={linear:function(o){return o},quadraticIn:function(o){return o*o},quadraticOut:function(o){return o*(2-o)},quadraticInOut:function(o){return(o*=2)<1?.5*o*o:-.5*(--o*(o-2)-1)},cubicIn:function(o){return o*o*o},cubicOut:function(o){return--o*o*o+1},cubicInOut:function(o){return(o*=2)<1?.5*o*o*o:.5*((o-=2)*o*o+2)},quarticIn:function(o){return o*o*o*o},quarticOut:function(o){return 1- --o*o*o*o},quarticInOut:function(o){return(o*=2)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2)},quinticIn:function(o){return o*o*o*o*o},quinticOut:function(o){return--o*o*o*o*o+1},quinticInOut:function(o){return(o*=2)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2)},sinusoidalIn:function(o){return 1-Math.cos(o*Math.PI/2)},sinusoidalOut:function(o){return Math.sin(o*Math.PI/2)},sinusoidalInOut:function(o){return .5*(1-Math.cos(Math.PI*o))},exponentialIn:function(o){return o===0?0:Math.pow(1024,o-1)},exponentialOut:function(o){return o===1?1:1-Math.pow(2,-10*o)},exponentialInOut:function(o){return o===0?0:o===1?1:(o*=2)<1?.5*Math.pow(1024,o-1):.5*(-Math.pow(2,-10*(o-1))+2)},circularIn:function(o){return 1-Math.sqrt(1-o*o)},circularOut:function(o){return Math.sqrt(1- --o*o)},circularInOut:function(o){return(o*=2)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1)},elasticIn:function(o){var a,n=.1,s=.4;return o===0?0:o===1?1:(!n||n<1?(n=1,a=s/4):a=s*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(o-=1))*Math.sin((o-a)*(2*Math.PI)/s)))},elasticOut:function(o){var a,n=.1,s=.4;return o===0?0:o===1?1:(!n||n<1?(n=1,a=s/4):a=s*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*o)*Math.sin((o-a)*(2*Math.PI)/s)+1)},elasticInOut:function(o){var a,n=.1,s=.4;return o===0?0:o===1?1:(!n||n<1?(n=1,a=s/4):a=s*Math.asin(1/n)/(2*Math.PI),(o*=2)<1?-.5*(n*Math.pow(2,10*(o-=1))*Math.sin((o-a)*(2*Math.PI)/s)):n*Math.pow(2,-10*(o-=1))*Math.sin((o-a)*(2*Math.PI)/s)*.5+1)},backIn:function(o){var a=1.70158;return o*o*((a+1)*o-a)},backOut:function(o){var a=1.70158;return--o*o*((a+1)*o+a)+1},backInOut:function(o){var a=2.5949095;return(o*=2)<1?.5*(o*o*((a+1)*o-a)):.5*((o-=2)*o*((a+1)*o+a)+2)},bounceIn:function(o){return 1-easingFuncs.bounceOut(1-o)},bounceOut:function(o){return o<1/2.75?7.5625*o*o:o<2/2.75?7.5625*(o-=1.5/2.75)*o+.75:o<2.5/2.75?7.5625*(o-=2.25/2.75)*o+.9375:7.5625*(o-=2.625/2.75)*o+.984375},bounceInOut:function(o){return o<.5?easingFuncs.bounceIn(o*2)*.5:easingFuncs.bounceOut(o*2-1)*.5+.5}},mathPow$2=Math.pow,mathSqrt$3=Math.sqrt,EPSILON$4=1e-8,EPSILON_NUMERIC=1e-4,THREE_SQRT=mathSqrt$3(3),ONE_THIRD=1/3,_v0=create$2(),_v1=create$2(),_v2=create$2();function isAroundZero$1(o){return o>-EPSILON$4&&o<EPSILON$4}function isNotAroundZero$1(o){return o>EPSILON$4||o<-EPSILON$4}function cubicAt(o,a,n,s,l){var c=1-l;return c*c*(c*o+3*l*a)+l*l*(l*s+3*c*n)}function cubicDerivativeAt(o,a,n,s,l){var c=1-l;return 3*(((a-o)*c+2*(n-a)*l)*c+(s-n)*l*l)}function cubicRootAt(o,a,n,s,l,c){var u=s+3*(a-n)-o,d=3*(n-a*2+o),h=3*(a-o),f=o-l,p=d*d-3*u*h,g=d*h-9*u*f,v=h*h-3*d*f,b=0;if(isAroundZero$1(p)&&isAroundZero$1(g))if(isAroundZero$1(d))c[0]=0;else{var w=-h/d;w>=0&&w<=1&&(c[b++]=w)}else{var x=g*g-4*p*v;if(isAroundZero$1(x)){var S=g/p,w=-d/u+S,E=-S/2;w>=0&&w<=1&&(c[b++]=w),E>=0&&E<=1&&(c[b++]=E)}else if(x>0){var T=mathSqrt$3(x),C=p*d+1.5*u*(-g+T),A=p*d+1.5*u*(-g-T);C<0?C=-mathPow$2(-C,ONE_THIRD):C=mathPow$2(C,ONE_THIRD),A<0?A=-mathPow$2(-A,ONE_THIRD):A=mathPow$2(A,ONE_THIRD);var w=(-d-(C+A))/(3*u);w>=0&&w<=1&&(c[b++]=w)}else{var R=(2*p*d-3*u*g)/(2*mathSqrt$3(p*p*p)),j=Math.acos(R)/3,D=mathSqrt$3(p),O=Math.cos(j),w=(-d-2*D*O)/(3*u),E=(-d+D*(O+THREE_SQRT*Math.sin(j)))/(3*u),H=(-d+D*(O-THREE_SQRT*Math.sin(j)))/(3*u);w>=0&&w<=1&&(c[b++]=w),E>=0&&E<=1&&(c[b++]=E),H>=0&&H<=1&&(c[b++]=H)}}return b}function cubicExtrema(o,a,n,s,l){var c=6*n-12*a+6*o,u=9*a+3*s-3*o-9*n,d=3*a-3*o,h=0;if(isAroundZero$1(u)){if(isNotAroundZero$1(c)){var f=-d/c;f>=0&&f<=1&&(l[h++]=f)}}else{var p=c*c-4*u*d;if(isAroundZero$1(p))l[0]=-c/(2*u);else if(p>0){var g=mathSqrt$3(p),f=(-c+g)/(2*u),v=(-c-g)/(2*u);f>=0&&f<=1&&(l[h++]=f),v>=0&&v<=1&&(l[h++]=v)}}return h}function cubicSubdivide(o,a,n,s,l,c){var u=(a-o)*l+o,d=(n-a)*l+a,h=(s-n)*l+n,f=(d-u)*l+u,p=(h-d)*l+d,g=(p-f)*l+f;c[0]=o,c[1]=u,c[2]=f,c[3]=g,c[4]=g,c[5]=p,c[6]=h,c[7]=s}function cubicProjectPoint(o,a,n,s,l,c,u,d,h,f,p){var g,v=.005,b=1/0,w,x,S,E;_v0[0]=h,_v0[1]=f;for(var T=0;T<1;T+=.05)_v1[0]=cubicAt(o,n,l,u,T),_v1[1]=cubicAt(a,s,c,d,T),S=distSquare(_v0,_v1),S<b&&(g=T,b=S);b=1/0;for(var C=0;C<32&&!(v<EPSILON_NUMERIC);C++)w=g-v,x=g+v,_v1[0]=cubicAt(o,n,l,u,w),_v1[1]=cubicAt(a,s,c,d,w),S=distSquare(_v1,_v0),w>=0&&S<b?(g=w,b=S):(_v2[0]=cubicAt(o,n,l,u,x),_v2[1]=cubicAt(a,s,c,d,x),E=distSquare(_v2,_v0),x<=1&&E<b?(g=x,b=E):v*=.5);return p&&(p[0]=cubicAt(o,n,l,u,g),p[1]=cubicAt(a,s,c,d,g)),mathSqrt$3(b)}function cubicLength(o,a,n,s,l,c,u,d,h){for(var f=o,p=a,g=0,v=1/h,b=1;b<=h;b++){var w=b*v,x=cubicAt(o,n,l,u,w),S=cubicAt(a,s,c,d,w),E=x-f,T=S-p;g+=Math.sqrt(E*E+T*T),f=x,p=S}return g}function quadraticAt$1(o,a,n,s){var l=1-s;return l*(l*o+2*s*a)+s*s*n}function quadraticDerivativeAt(o,a,n,s){return 2*((1-s)*(a-o)+s*(n-a))}function quadraticRootAt(o,a,n,s,l){var c=o-2*a+n,u=2*(a-o),d=o-s,h=0;if(isAroundZero$1(c)){if(isNotAroundZero$1(u)){var f=-d/u;f>=0&&f<=1&&(l[h++]=f)}}else{var p=u*u-4*c*d;if(isAroundZero$1(p)){var f=-u/(2*c);f>=0&&f<=1&&(l[h++]=f)}else if(p>0){var g=mathSqrt$3(p),f=(-u+g)/(2*c),v=(-u-g)/(2*c);f>=0&&f<=1&&(l[h++]=f),v>=0&&v<=1&&(l[h++]=v)}}return h}function quadraticExtremum(o,a,n){var s=o+n-2*a;return s===0?.5:(o-a)/s}function quadraticSubdivide(o,a,n,s,l){var c=(a-o)*s+o,u=(n-a)*s+a,d=(u-c)*s+c;l[0]=o,l[1]=c,l[2]=d,l[3]=d,l[4]=u,l[5]=n}function quadraticProjectPoint(o,a,n,s,l,c,u,d,h){var f,p=.005,g=1/0;_v0[0]=u,_v0[1]=d;for(var v=0;v<1;v+=.05){_v1[0]=quadraticAt$1(o,n,l,v),_v1[1]=quadraticAt$1(a,s,c,v);var b=distSquare(_v0,_v1);b<g&&(f=v,g=b)}g=1/0;for(var w=0;w<32&&!(p<EPSILON_NUMERIC);w++){var x=f-p,S=f+p;_v1[0]=quadraticAt$1(o,n,l,x),_v1[1]=quadraticAt$1(a,s,c,x);var b=distSquare(_v1,_v0);if(x>=0&&b<g)f=x,g=b;else{_v2[0]=quadraticAt$1(o,n,l,S),_v2[1]=quadraticAt$1(a,s,c,S);var E=distSquare(_v2,_v0);S<=1&&E<g?(f=S,g=E):p*=.5}}return h&&(h[0]=quadraticAt$1(o,n,l,f),h[1]=quadraticAt$1(a,s,c,f)),mathSqrt$3(g)}function quadraticLength(o,a,n,s,l,c,u){for(var d=o,h=a,f=0,p=1/u,g=1;g<=u;g++){var v=g*p,b=quadraticAt$1(o,n,l,v),w=quadraticAt$1(a,s,c,v),x=b-d,S=w-h;f+=Math.sqrt(x*x+S*S),d=b,h=w}return f}var regexp=/cubic-bezier\(([0-9,\.e ]+)\)/;function createCubicEasingFunc(o){var a=o&&regexp.exec(o);if(a){var n=a[1].split(","),s=+trim$1(n[0]),l=+trim$1(n[1]),c=+trim$1(n[2]),u=+trim$1(n[3]);if(isNaN(s+l+c+u))return;var d=[];return function(h){return h<=0?0:h>=1?1:cubicRootAt(0,s,c,1,h,d)&&cubicAt(0,l,u,1,d[0])}}}var Clip=function(){function o(a){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=a.life||1e3,this._delay=a.delay||0,this.loop=a.loop||!1,this.onframe=a.onframe||noop$1,this.ondestroy=a.ondestroy||noop$1,this.onrestart=a.onrestart||noop$1,a.easing&&this.setEasing(a.easing)}return o.prototype.step=function(a,n){if(this._inited||(this._startTime=a+this._delay,this._inited=!0),this._paused){this._pausedTime+=n;return}var s=this._life,l=a-this._startTime-this._pausedTime,c=l/s;c<0&&(c=0),c=Math.min(c,1);var u=this.easingFunc,d=u?u(c):c;if(this.onframe(d),c===1)if(this.loop){var h=l%s;this._startTime=a-h,this._pausedTime=0,this.onrestart()}else return!0;return!1},o.prototype.pause=function(){this._paused=!0},o.prototype.resume=function(){this._paused=!1},o.prototype.setEasing=function(a){this.easing=a,this.easingFunc=isFunction$1(a)?a:easingFuncs[a]||createCubicEasingFunc(a)},o}(),Entry=function(){function o(a){this.value=a}return o}(),LinkedList=function(){function o(){this._len=0}return o.prototype.insert=function(a){var n=new Entry(a);return this.insertEntry(n),n},o.prototype.insertEntry=function(a){this.head?(this.tail.next=a,a.prev=this.tail,a.next=null,this.tail=a):this.head=this.tail=a,this._len++},o.prototype.remove=function(a){var n=a.prev,s=a.next;n?n.next=s:this.head=s,s?s.prev=n:this.tail=n,a.next=a.prev=null,this._len--},o.prototype.len=function(){return this._len},o.prototype.clear=function(){this.head=this.tail=null,this._len=0},o}(),LRU=function(){function o(a){this._list=new LinkedList,this._maxSize=10,this._map={},this._maxSize=a}return o.prototype.put=function(a,n){var s=this._list,l=this._map,c=null;if(l[a]==null){var u=s.len(),d=this._lastRemovedEntry;if(u>=this._maxSize&&u>0){var h=s.head;s.remove(h),delete l[h.key],c=h.value,this._lastRemovedEntry=h}d?d.value=n:d=new Entry(n),d.key=a,s.insertEntry(d),l[a]=d}return c},o.prototype.get=function(a){var n=this._map[a],s=this._list;if(n!=null)return n!==s.tail&&(s.remove(n),s.insertEntry(n)),n.value},o.prototype.clear=function(){this._list.clear(),this._map={}},o.prototype.len=function(){return this._list.len()},o}(),kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clampCssByte(o){return o=Math.round(o),o<0?0:o>255?255:o}function clampCssAngle(o){return o=Math.round(o),o<0?0:o>360?360:o}function clampCssFloat(o){return o<0?0:o>1?1:o}function parseCssInt(o){var a=o;return a.length&&a.charAt(a.length-1)==="%"?clampCssByte(parseFloat(a)/100*255):clampCssByte(parseInt(a,10))}function parseCssFloat(o){var a=o;return a.length&&a.charAt(a.length-1)==="%"?clampCssFloat(parseFloat(a)/100):clampCssFloat(parseFloat(a))}function cssHueToRgb(o,a,n){return n<0?n+=1:n>1&&(n-=1),n*6<1?o+(a-o)*n*6:n*2<1?a:n*3<2?o+(a-o)*(2/3-n)*6:o}function lerpNumber(o,a,n){return o+(a-o)*n}function setRgba(o,a,n,s,l){return o[0]=a,o[1]=n,o[2]=s,o[3]=l,o}function copyRgba(o,a){return o[0]=a[0],o[1]=a[1],o[2]=a[2],o[3]=a[3],o}var colorCache=new LRU(20),lastRemovedArr=null;function putToCache(o,a){lastRemovedArr&&copyRgba(lastRemovedArr,a),lastRemovedArr=colorCache.put(o,lastRemovedArr||a.slice())}function parse(o,a){if(o){a=a||[];var n=colorCache.get(o);if(n)return copyRgba(a,n);o=o+"";var s=o.replace(/ /g,"").toLowerCase();if(s in kCSSColorTable)return copyRgba(a,kCSSColorTable[s]),putToCache(o,a),a;var l=s.length;if(s.charAt(0)==="#"){if(l===4||l===5){var c=parseInt(s.slice(1,4),16);if(!(c>=0&&c<=4095)){setRgba(a,0,0,0,1);return}return setRgba(a,(c&3840)>>4|(c&3840)>>8,c&240|(c&240)>>4,c&15|(c&15)<<4,l===5?parseInt(s.slice(4),16)/15:1),putToCache(o,a),a}else if(l===7||l===9){var c=parseInt(s.slice(1,7),16);if(!(c>=0&&c<=16777215)){setRgba(a,0,0,0,1);return}return setRgba(a,(c&16711680)>>16,(c&65280)>>8,c&255,l===9?parseInt(s.slice(7),16)/255:1),putToCache(o,a),a}return}var u=s.indexOf("("),d=s.indexOf(")");if(u!==-1&&d+1===l){var h=s.substr(0,u),f=s.substr(u+1,d-(u+1)).split(","),p=1;switch(h){case"rgba":if(f.length!==4)return f.length===3?setRgba(a,+f[0],+f[1],+f[2],1):setRgba(a,0,0,0,1);p=parseCssFloat(f.pop());case"rgb":if(f.length>=3)return setRgba(a,parseCssInt(f[0]),parseCssInt(f[1]),parseCssInt(f[2]),f.length===3?p:parseCssFloat(f[3])),putToCache(o,a),a;setRgba(a,0,0,0,1);return;case"hsla":if(f.length!==4){setRgba(a,0,0,0,1);return}return f[3]=parseCssFloat(f[3]),hsla2rgba(f,a),putToCache(o,a),a;case"hsl":if(f.length!==3){setRgba(a,0,0,0,1);return}return hsla2rgba(f,a),putToCache(o,a),a;default:return}}setRgba(a,0,0,0,1)}}function hsla2rgba(o,a){var n=(parseFloat(o[0])%360+360)%360/360,s=parseCssFloat(o[1]),l=parseCssFloat(o[2]),c=l<=.5?l*(s+1):l+s-l*s,u=l*2-c;return a=a||[],setRgba(a,clampCssByte(cssHueToRgb(u,c,n+1/3)*255),clampCssByte(cssHueToRgb(u,c,n)*255),clampCssByte(cssHueToRgb(u,c,n-1/3)*255),1),o.length===4&&(a[3]=o[3]),a}function rgba2hsla(o){if(o){var a=o[0]/255,n=o[1]/255,s=o[2]/255,l=Math.min(a,n,s),c=Math.max(a,n,s),u=c-l,d=(c+l)/2,h,f;if(u===0)h=0,f=0;else{d<.5?f=u/(c+l):f=u/(2-c-l);var p=((c-a)/6+u/2)/u,g=((c-n)/6+u/2)/u,v=((c-s)/6+u/2)/u;a===c?h=v-g:n===c?h=1/3+p-v:s===c&&(h=2/3+g-p),h<0&&(h+=1),h>1&&(h-=1)}var b=[h*360,f,d];return o[3]!=null&&b.push(o[3]),b}}function lift(o,a){var n=parse(o);if(n){for(var s=0;s<3;s++)a<0?n[s]=n[s]*(1-a)|0:n[s]=(255-n[s])*a+n[s]|0,n[s]>255?n[s]=255:n[s]<0&&(n[s]=0);return stringify(n,n.length===4?"rgba":"rgb")}}function toHex(o){var a=parse(o);if(a)return((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1)}function fastLerp(o,a,n){if(!(!(a&&a.length)||!(o>=0&&o<=1))){n=n||[];var s=o*(a.length-1),l=Math.floor(s),c=Math.ceil(s),u=a[l],d=a[c],h=s-l;return n[0]=clampCssByte(lerpNumber(u[0],d[0],h)),n[1]=clampCssByte(lerpNumber(u[1],d[1],h)),n[2]=clampCssByte(lerpNumber(u[2],d[2],h)),n[3]=clampCssFloat(lerpNumber(u[3],d[3],h)),n}}var fastMapToColor=fastLerp;function lerp(o,a,n){if(!(!(a&&a.length)||!(o>=0&&o<=1))){var s=o*(a.length-1),l=Math.floor(s),c=Math.ceil(s),u=parse(a[l]),d=parse(a[c]),h=s-l,f=stringify([clampCssByte(lerpNumber(u[0],d[0],h)),clampCssByte(lerpNumber(u[1],d[1],h)),clampCssByte(lerpNumber(u[2],d[2],h)),clampCssFloat(lerpNumber(u[3],d[3],h))],"rgba");return n?{color:f,leftIndex:l,rightIndex:c,value:s}:f}}var mapToColor=lerp;function modifyHSL(o,a,n,s){var l=parse(o);if(o)return l=rgba2hsla(l),a!=null&&(l[0]=clampCssAngle(a)),n!=null&&(l[1]=parseCssFloat(n)),s!=null&&(l[2]=parseCssFloat(s)),stringify(hsla2rgba(l),"rgba")}function modifyAlpha(o,a){var n=parse(o);if(n&&a!=null)return n[3]=clampCssFloat(a),stringify(n,"rgba")}function stringify(o,a){if(!(!o||!o.length)){var n=o[0]+","+o[1]+","+o[2];return(a==="rgba"||a==="hsva"||a==="hsla")&&(n+=","+o[3]),a+"("+n+")"}}function lum(o,a){var n=parse(o);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*a:0}function random(){return stringify([Math.round(Math.random()*255),Math.round(Math.random()*255),Math.round(Math.random()*255)],"rgb")}var liftedColorCache=new LRU(100);function liftColor(o){if(isString$2(o)){var a=liftedColorCache.get(o);return a||(a=lift(o,-.1),liftedColorCache.put(o,a)),a}else if(isGradientObject(o)){var n=extend({},o);return n.colorStops=map$1(o.colorStops,function(s){return{offset:s.offset,color:lift(s.color,-.1)}}),n}return o}const color=Object.freeze(Object.defineProperty({__proto__:null,fastLerp,fastMapToColor,lerp,lift,liftColor,lum,mapToColor,modifyAlpha,modifyHSL,parse,random,stringify,toHex},Symbol.toStringTag,{value:"Module"}));var mathRound$1=Math.round;function normalizeColor(o){var a;if(!o||o==="transparent")o="none";else if(typeof o=="string"&&o.indexOf("rgba")>-1){var n=parse(o);n&&(o="rgb("+n[0]+","+n[1]+","+n[2]+")",a=n[3])}return{color:o,opacity:a??1}}var EPSILON$3=1e-4;function isAroundZero(o){return o<EPSILON$3&&o>-EPSILON$3}function round3(o){return mathRound$1(o*1e3)/1e3}function round4(o){return mathRound$1(o*1e4)/1e4}function getMatrixStr(o){return"matrix("+round3(o[0])+","+round3(o[1])+","+round3(o[2])+","+round3(o[3])+","+round4(o[4])+","+round4(o[5])+")"}var TEXT_ALIGN_TO_ANCHOR={left:"start",right:"end",center:"middle",middle:"middle"};function adjustTextY$1(o,a,n){return n==="top"?o+=a/2:n==="bottom"&&(o-=a/2),o}function hasShadow(o){return o&&(o.shadowBlur||o.shadowOffsetX||o.shadowOffsetY)}function getShadowKey(o){var a=o.style,n=o.getGlobalScale();return[a.shadowColor,(a.shadowBlur||0).toFixed(2),(a.shadowOffsetX||0).toFixed(2),(a.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function isImagePattern(o){return o&&!!o.image}function isSVGPattern(o){return o&&!!o.svgElement}function isPattern(o){return isImagePattern(o)||isSVGPattern(o)}function isLinearGradient(o){return o.type==="linear"}function isRadialGradient(o){return o.type==="radial"}function isGradient(o){return o&&(o.type==="linear"||o.type==="radial")}function getIdURL(o){return"url(#"+o+")"}function getPathPrecision(o){var a=o.getGlobalScale(),n=Math.max(a[0],a[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function getSRTTransformString(o){var a=o.x||0,n=o.y||0,s=(o.rotation||0)*RADIAN_TO_DEGREE,l=retrieve2(o.scaleX,1),c=retrieve2(o.scaleY,1),u=o.skewX||0,d=o.skewY||0,h=[];return(a||n)&&h.push("translate("+a+"px,"+n+"px)"),s&&h.push("rotate("+s+")"),(l!==1||c!==1)&&h.push("scale("+l+","+c+")"),(u||d)&&h.push("skew("+mathRound$1(u*RADIAN_TO_DEGREE)+"deg, "+mathRound$1(d*RADIAN_TO_DEGREE)+"deg)"),h.join(" ")}var encodeBase64=function(){return env.hasGlobalWindow&&isFunction$1(window.btoa)?function(o){return window.btoa(unescape(encodeURIComponent(o)))}:typeof Buffer<"u"?function(o){return Buffer.from(o).toString("base64")}:function(o){return process.env.NODE_ENV!=="production"&&logError("Base64 isn't natively supported in the current environment."),null}}(),arraySlice=Array.prototype.slice;function interpolateNumber$1(o,a,n){return(a-o)*n+o}function interpolate1DArray(o,a,n,s){for(var l=a.length,c=0;c<l;c++)o[c]=interpolateNumber$1(a[c],n[c],s);return o}function interpolate2DArray(o,a,n,s){for(var l=a.length,c=l&&a[0].length,u=0;u<l;u++){o[u]||(o[u]=[]);for(var d=0;d<c;d++)o[u][d]=interpolateNumber$1(a[u][d],n[u][d],s)}return o}function add1DArray(o,a,n,s){for(var l=a.length,c=0;c<l;c++)o[c]=a[c]+n[c]*s;return o}function add2DArray(o,a,n,s){for(var l=a.length,c=l&&a[0].length,u=0;u<l;u++){o[u]||(o[u]=[]);for(var d=0;d<c;d++)o[u][d]=a[u][d]+n[u][d]*s}return o}function fillColorStops(o,a){for(var n=o.length,s=a.length,l=n>s?a:o,c=Math.min(n,s),u=l[c-1]||{color:[0,0,0,0],offset:0},d=c;d<Math.max(n,s);d++)l.push({offset:u.offset,color:u.color.slice()})}function fillArray(o,a,n){var s=o,l=a;if(!(!s.push||!l.push)){var c=s.length,u=l.length;if(c!==u){var d=c>u;if(d)s.length=u;else for(var h=c;h<u;h++)s.push(n===1?l[h]:arraySlice.call(l[h]))}for(var f=s[0]&&s[0].length,h=0;h<s.length;h++)if(n===1)isNaN(s[h])&&(s[h]=l[h]);else for(var p=0;p<f;p++)isNaN(s[h][p])&&(s[h][p]=l[h][p])}}function cloneValue(o){if(isArrayLike(o)){var a=o.length;if(isArrayLike(o[0])){for(var n=[],s=0;s<a;s++)n.push(arraySlice.call(o[s]));return n}return arraySlice.call(o)}return o}function rgba2String(o){return o[0]=Math.floor(o[0])||0,o[1]=Math.floor(o[1])||0,o[2]=Math.floor(o[2])||0,o[3]=o[3]==null?1:o[3],"rgba("+o.join(",")+")"}function guessArrayDim(o){return isArrayLike(o&&o[0])?2:1}var VALUE_TYPE_NUMBER=0,VALUE_TYPE_1D_ARRAY=1,VALUE_TYPE_2D_ARRAY=2,VALUE_TYPE_COLOR=3,VALUE_TYPE_LINEAR_GRADIENT=4,VALUE_TYPE_RADIAL_GRADIENT=5,VALUE_TYPE_UNKOWN=6;function isGradientValueType(o){return o===VALUE_TYPE_LINEAR_GRADIENT||o===VALUE_TYPE_RADIAL_GRADIENT}function isArrayValueType(o){return o===VALUE_TYPE_1D_ARRAY||o===VALUE_TYPE_2D_ARRAY}var tmpRgba=[0,0,0,0],Track=function(){function o(a){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=a}return o.prototype.isFinished=function(){return this._finished},o.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},o.prototype.needsAnimate=function(){return this.keyframes.length>=1},o.prototype.getAdditiveTrack=function(){return this._additiveTrack},o.prototype.addKeyframe=function(a,n,s){this._needsSort=!0;var l=this.keyframes,c=l.length,u=!1,d=VALUE_TYPE_UNKOWN,h=n;if(isArrayLike(n)){var f=guessArrayDim(n);d=f,(f===1&&!isNumber(n[0])||f===2&&!isNumber(n[0][0]))&&(u=!0)}else if(isNumber(n)&&!eqNaN(n))d=VALUE_TYPE_NUMBER;else if(isString$2(n))if(!isNaN(+n))d=VALUE_TYPE_NUMBER;else{var p=parse(n);p&&(h=p,d=VALUE_TYPE_COLOR)}else if(isGradientObject(n)){var g=extend({},h);g.colorStops=map$1(n.colorStops,function(b){return{offset:b.offset,color:parse(b.color)}}),isLinearGradient(n)?d=VALUE_TYPE_LINEAR_GRADIENT:isRadialGradient(n)&&(d=VALUE_TYPE_RADIAL_GRADIENT),h=g}c===0?this.valType=d:(d!==this.valType||d===VALUE_TYPE_UNKOWN)&&(u=!0),this.discrete=this.discrete||u;var v={time:a,value:h,rawValue:n,percent:0};return s&&(v.easing=s,v.easingFunc=isFunction$1(s)?s:easingFuncs[s]||createCubicEasingFunc(s)),l.push(v),v},o.prototype.prepare=function(a,n){var s=this.keyframes;this._needsSort&&s.sort(function(x,S){return x.time-S.time});for(var l=this.valType,c=s.length,u=s[c-1],d=this.discrete,h=isArrayValueType(l),f=isGradientValueType(l),p=0;p<c;p++){var g=s[p],v=g.value,b=u.value;g.percent=g.time/a,d||(h&&p!==c-1?fillArray(v,b,l):f&&fillColorStops(v.colorStops,b.colorStops))}if(!d&&l!==VALUE_TYPE_RADIAL_GRADIENT&&n&&this.needsAnimate()&&n.needsAnimate()&&l===n.valType&&!n._finished){this._additiveTrack=n;for(var w=s[0].value,p=0;p<c;p++)l===VALUE_TYPE_NUMBER?s[p].additiveValue=s[p].value-w:l===VALUE_TYPE_COLOR?s[p].additiveValue=add1DArray([],s[p].value,w,-1):isArrayValueType(l)&&(s[p].additiveValue=l===VALUE_TYPE_1D_ARRAY?add1DArray([],s[p].value,w,-1):add2DArray([],s[p].value,w,-1))}},o.prototype.step=function(a,n){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var s=this._additiveTrack!=null,l=s?"additiveValue":"value",c=this.valType,u=this.keyframes,d=u.length,h=this.propName,f=c===VALUE_TYPE_COLOR,p,g=this._lastFr,v=Math.min,b,w;if(d===1)b=w=u[0];else{if(n<0)p=0;else if(n<this._lastFrP){var x=v(g+1,d-1);for(p=x;p>=0&&!(u[p].percent<=n);p--);p=v(p,d-2)}else{for(p=g;p<d&&!(u[p].percent>n);p++);p=v(p-1,d-2)}w=u[p+1],b=u[p]}if(b&&w){this._lastFr=p,this._lastFrP=n;var S=w.percent-b.percent,E=S===0?1:v((n-b.percent)/S,1);w.easingFunc&&(E=w.easingFunc(E));var T=s?this._additiveValue:f?tmpRgba:a[h];if((isArrayValueType(c)||f)&&!T&&(T=this._additiveValue=[]),this.discrete)a[h]=E<1?b.rawValue:w.rawValue;else if(isArrayValueType(c))c===VALUE_TYPE_1D_ARRAY?interpolate1DArray(T,b[l],w[l],E):interpolate2DArray(T,b[l],w[l],E);else if(isGradientValueType(c)){var C=b[l],A=w[l],R=c===VALUE_TYPE_LINEAR_GRADIENT;a[h]={type:R?"linear":"radial",x:interpolateNumber$1(C.x,A.x,E),y:interpolateNumber$1(C.y,A.y,E),colorStops:map$1(C.colorStops,function(D,O){var H=A.colorStops[O];return{offset:interpolateNumber$1(D.offset,H.offset,E),color:rgba2String(interpolate1DArray([],D.color,H.color,E))}}),global:A.global},R?(a[h].x2=interpolateNumber$1(C.x2,A.x2,E),a[h].y2=interpolateNumber$1(C.y2,A.y2,E)):a[h].r=interpolateNumber$1(C.r,A.r,E)}else if(f)interpolate1DArray(T,b[l],w[l],E),s||(a[h]=rgba2String(T));else{var j=interpolateNumber$1(b[l],w[l],E);s?this._additiveValue=j:a[h]=j}s&&this._addToTarget(a)}}},o.prototype._addToTarget=function(a){var n=this.valType,s=this.propName,l=this._additiveValue;n===VALUE_TYPE_NUMBER?a[s]=a[s]+l:n===VALUE_TYPE_COLOR?(parse(a[s],tmpRgba),add1DArray(tmpRgba,tmpRgba,l,1),a[s]=rgba2String(tmpRgba)):n===VALUE_TYPE_1D_ARRAY?add1DArray(a[s],a[s],l,1):n===VALUE_TYPE_2D_ARRAY&&add2DArray(a[s],a[s],l,1)},o}(),Animator=function(){function o(a,n,s,l){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=a,this._loop=n,n&&l){logError("Can' use additive animation on looped animation.");return}this._additiveAnimators=l,this._allowDiscrete=s}return o.prototype.getMaxTime=function(){return this._maxTime},o.prototype.getDelay=function(){return this._delay},o.prototype.getLoop=function(){return this._loop},o.prototype.getTarget=function(){return this._target},o.prototype.changeTarget=function(a){this._target=a},o.prototype.when=function(a,n,s){return this.whenWithKeys(a,n,keys$1(n),s)},o.prototype.whenWithKeys=function(a,n,s,l){for(var c=this._tracks,u=0;u<s.length;u++){var d=s[u],h=c[d];if(!h){h=c[d]=new Track(d);var f=void 0,p=this._getAdditiveTrack(d);if(p){var g=p.keyframes,v=g[g.length-1];f=v&&v.value,p.valType===VALUE_TYPE_COLOR&&f&&(f=rgba2String(f))}else f=this._target[d];if(f==null)continue;a>0&&h.addKeyframe(0,cloneValue(f),l),this._trackKeys.push(d)}h.addKeyframe(a,cloneValue(n[d]),l)}return this._maxTime=Math.max(this._maxTime,a),this},o.prototype.pause=function(){this._clip.pause(),this._paused=!0},o.prototype.resume=function(){this._clip.resume(),this._paused=!1},o.prototype.isPaused=function(){return!!this._paused},o.prototype.duration=function(a){return this._maxTime=a,this._force=!0,this},o.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var a=this._doneCbs;if(a)for(var n=a.length,s=0;s<n;s++)a[s].call(this)},o.prototype._abortedCallback=function(){this._setTracksFinished();var a=this.animation,n=this._abortedCbs;if(a&&a.removeClip(this._clip),this._clip=null,n)for(var s=0;s<n.length;s++)n[s].call(this)},o.prototype._setTracksFinished=function(){for(var a=this._tracks,n=this._trackKeys,s=0;s<n.length;s++)a[n[s]].setFinished()},o.prototype._getAdditiveTrack=function(a){var n,s=this._additiveAnimators;if(s)for(var l=0;l<s.length;l++){var c=s[l].getTrack(a);c&&(n=c)}return n},o.prototype.start=function(a){if(!(this._started>0)){this._started=1;for(var n=this,s=[],l=this._maxTime||0,c=0;c<this._trackKeys.length;c++){var u=this._trackKeys[c],d=this._tracks[u],h=this._getAdditiveTrack(u),f=d.keyframes,p=f.length;if(d.prepare(l,h),d.needsAnimate())if(!this._allowDiscrete&&d.discrete){var g=f[p-1];g&&(n._target[d.propName]=g.rawValue),d.setFinished()}else s.push(d)}if(s.length||this._force){var v=new Clip({life:l,loop:this._loop,delay:this._delay||0,onframe:function(b){n._started=2;var w=n._additiveAnimators;if(w){for(var x=!1,S=0;S<w.length;S++)if(w[S]._clip){x=!0;break}x||(n._additiveAnimators=null)}for(var S=0;S<s.length;S++)s[S].step(n._target,b);var E=n._onframeCbs;if(E)for(var S=0;S<E.length;S++)E[S](n._target,b)},ondestroy:function(){n._doneCallback()}});this._clip=v,this.animation&&this.animation.addClip(v),a&&v.setEasing(a)}else this._doneCallback();return this}},o.prototype.stop=function(a){if(this._clip){var n=this._clip;a&&n.onframe(1),this._abortedCallback()}},o.prototype.delay=function(a){return this._delay=a,this},o.prototype.during=function(a){return a&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(a)),this},o.prototype.done=function(a){return a&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(a)),this},o.prototype.aborted=function(a){return a&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(a)),this},o.prototype.getClip=function(){return this._clip},o.prototype.getTrack=function(a){return this._tracks[a]},o.prototype.getTracks=function(){var a=this;return map$1(this._trackKeys,function(n){return a._tracks[n]})},o.prototype.stopTracks=function(a,n){if(!a.length||!this._clip)return!0;for(var s=this._tracks,l=this._trackKeys,c=0;c<a.length;c++){var u=s[a[c]];u&&!u.isFinished()&&(n?u.step(this._target,1):this._started===1&&u.step(this._target,0),u.setFinished())}for(var d=!0,c=0;c<l.length;c++)if(!s[l[c]].isFinished()){d=!1;break}return d&&this._abortedCallback(),d},o.prototype.saveTo=function(a,n,s){if(a){n=n||this._trackKeys;for(var l=0;l<n.length;l++){var c=n[l],u=this._tracks[c];if(!(!u||u.isFinished())){var d=u.keyframes,h=d[s?0:d.length-1];h&&(a[c]=cloneValue(h.rawValue))}}}},o.prototype.__changeFinalValue=function(a,n){n=n||keys$1(a);for(var s=0;s<n.length;s++){var l=n[s],c=this._tracks[l];if(c){var u=c.keyframes;if(u.length>1){var d=u.pop();c.addKeyframe(d.time,a[l]),c.prepare(this._maxTime,c.getAdditiveTrack())}}}},o}();function getTime(){return new Date().getTime()}var Animation=function(o){__extends(a,o);function a(n){var s=o.call(this)||this;return s._running=!1,s._time=0,s._pausedTime=0,s._pauseStart=0,s._paused=!1,n=n||{},s.stage=n.stage||{},s}return a.prototype.addClip=function(n){n.animation&&this.removeClip(n),this._head?(this._tail.next=n,n.prev=this._tail,n.next=null,this._tail=n):this._head=this._tail=n,n.animation=this},a.prototype.addAnimator=function(n){n.animation=this;var s=n.getClip();s&&this.addClip(s)},a.prototype.removeClip=function(n){if(n.animation){var s=n.prev,l=n.next;s?s.next=l:this._head=l,l?l.prev=s:this._tail=s,n.next=n.prev=n.animation=null}},a.prototype.removeAnimator=function(n){var s=n.getClip();s&&this.removeClip(s),n.animation=null},a.prototype.update=function(n){for(var s=getTime()-this._pausedTime,l=s-this._time,c=this._head;c;){var u=c.next,d=c.step(s,l);d&&(c.ondestroy(),this.removeClip(c)),c=u}this._time=s,n||(this.trigger("frame",l),this.stage.update&&this.stage.update())},a.prototype._startLoop=function(){var n=this;this._running=!0;function s(){n._running&&(requestAnimationFrame$1(s),!n._paused&&n.update())}requestAnimationFrame$1(s)},a.prototype.start=function(){this._running||(this._time=getTime(),this._pausedTime=0,this._startLoop())},a.prototype.stop=function(){this._running=!1},a.prototype.pause=function(){this._paused||(this._pauseStart=getTime(),this._paused=!0)},a.prototype.resume=function(){this._paused&&(this._pausedTime+=getTime()-this._pauseStart,this._paused=!1)},a.prototype.clear=function(){for(var n=this._head;n;){var s=n.next;n.prev=n.next=n.animation=null,n=s}this._head=this._tail=null},a.prototype.isFinished=function(){return this._head==null},a.prototype.animate=function(n,s){s=s||{},this.start();var l=new Animator(n,s.loop);return this.addAnimator(l),l},a}(Eventful),TOUCH_CLICK_DELAY=300,globalEventSupported=env.domSupported,localNativeListenerNames=function(){var o=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],a=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},s=map$1(o,function(l){var c=l.replace("mouse","pointer");return n.hasOwnProperty(c)?c:l});return{mouse:o,touch:a,pointer:s}}(),globalNativeListenerNames={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},wheelEventSupported=!1;function isPointerFromTouch(o){var a=o.pointerType;return a==="pen"||a==="touch"}function setTouchTimer(o){o.touching=!0,o.touchTimer!=null&&(clearTimeout(o.touchTimer),o.touchTimer=null),o.touchTimer=setTimeout(function(){o.touching=!1,o.touchTimer=null},700)}function markTouch(o){o&&(o.zrByTouch=!0)}function normalizeGlobalEvent(o,a){return normalizeEvent(o.dom,new FakeGlobalEvent(o,a),!0)}function isLocalEl(o,a){for(var n=a,s=!1;n&&n.nodeType!==9&&!(s=n.domBelongToZr||n!==a&&n===o.painterRoot);)n=n.parentNode;return s}var FakeGlobalEvent=function(){function o(a,n){this.stopPropagation=noop$1,this.stopImmediatePropagation=noop$1,this.preventDefault=noop$1,this.type=n.type,this.target=this.currentTarget=a.dom,this.pointerType=n.pointerType,this.clientX=n.clientX,this.clientY=n.clientY}return o}(),localDOMHandlers={mousedown:function(o){o=normalizeEvent(this.dom,o),this.__mayPointerCapture=[o.zrX,o.zrY],this.trigger("mousedown",o)},mousemove:function(o){o=normalizeEvent(this.dom,o);var a=this.__mayPointerCapture;a&&(o.zrX!==a[0]||o.zrY!==a[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",o)},mouseup:function(o){o=normalizeEvent(this.dom,o),this.__togglePointerCapture(!1),this.trigger("mouseup",o)},mouseout:function(o){o=normalizeEvent(this.dom,o);var a=o.toElement||o.relatedTarget;isLocalEl(this,a)||(this.__pointerCapturing&&(o.zrEventControl="no_globalout"),this.trigger("mouseout",o))},wheel:function(o){wheelEventSupported=!0,o=normalizeEvent(this.dom,o),this.trigger("mousewheel",o)},mousewheel:function(o){wheelEventSupported||(o=normalizeEvent(this.dom,o),this.trigger("mousewheel",o))},touchstart:function(o){o=normalizeEvent(this.dom,o),markTouch(o),this.__lastTouchMoment=new Date,this.handler.processGesture(o,"start"),localDOMHandlers.mousemove.call(this,o),localDOMHandlers.mousedown.call(this,o)},touchmove:function(o){o=normalizeEvent(this.dom,o),markTouch(o),this.handler.processGesture(o,"change"),localDOMHandlers.mousemove.call(this,o)},touchend:function(o){o=normalizeEvent(this.dom,o),markTouch(o),this.handler.processGesture(o,"end"),localDOMHandlers.mouseup.call(this,o),+new Date-+this.__lastTouchMoment<TOUCH_CLICK_DELAY&&localDOMHandlers.click.call(this,o)},pointerdown:function(o){localDOMHandlers.mousedown.call(this,o)},pointermove:function(o){isPointerFromTouch(o)||localDOMHandlers.mousemove.call(this,o)},pointerup:function(o){localDOMHandlers.mouseup.call(this,o)},pointerout:function(o){isPointerFromTouch(o)||localDOMHandlers.mouseout.call(this,o)}};each$f(["click","dblclick","contextmenu"],function(o){localDOMHandlers[o]=function(a){a=normalizeEvent(this.dom,a),this.trigger(o,a)}});var globalDOMHandlers={pointermove:function(o){isPointerFromTouch(o)||globalDOMHandlers.mousemove.call(this,o)},pointerup:function(o){globalDOMHandlers.mouseup.call(this,o)},mousemove:function(o){this.trigger("mousemove",o)},mouseup:function(o){var a=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",o),a&&(o.zrEventControl="only_globalout",this.trigger("mouseout",o))}};function mountLocalDOMEventListeners(o,a){var n=a.domHandlers;env.pointerEventsSupported?each$f(localNativeListenerNames.pointer,function(s){mountSingleDOMEventListener(a,s,function(l){n[s].call(o,l)})}):(env.touchEventsSupported&&each$f(localNativeListenerNames.touch,function(s){mountSingleDOMEventListener(a,s,function(l){n[s].call(o,l),setTouchTimer(a)})}),each$f(localNativeListenerNames.mouse,function(s){mountSingleDOMEventListener(a,s,function(l){l=getNativeEvent(l),a.touching||n[s].call(o,l)})}))}function mountGlobalDOMEventListeners(o,a){env.pointerEventsSupported?each$f(globalNativeListenerNames.pointer,n):env.touchEventsSupported||each$f(globalNativeListenerNames.mouse,n);function n(s){function l(c){c=getNativeEvent(c),isLocalEl(o,c.target)||(c=normalizeGlobalEvent(o,c),a.domHandlers[s].call(o,c))}mountSingleDOMEventListener(a,s,l,{capture:!0})}}function mountSingleDOMEventListener(o,a,n,s){o.mounted[a]=n,o.listenerOpts[a]=s,addEventListener(o.domTarget,a,n,s)}function unmountDOMEventListeners(o){var a=o.mounted;for(var n in a)a.hasOwnProperty(n)&&removeEventListener(o.domTarget,n,a[n],o.listenerOpts[n]);o.mounted={}}var DOMHandlerScope=function(){function o(a,n){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=a,this.domHandlers=n}return o}(),HandlerDomProxy=function(o){__extends(a,o);function a(n,s){var l=o.call(this)||this;return l.__pointerCapturing=!1,l.dom=n,l.painterRoot=s,l._localHandlerScope=new DOMHandlerScope(n,localDOMHandlers),globalEventSupported&&(l._globalHandlerScope=new DOMHandlerScope(document,globalDOMHandlers)),mountLocalDOMEventListeners(l,l._localHandlerScope),l}return a.prototype.dispose=function(){unmountDOMEventListeners(this._localHandlerScope),globalEventSupported&&unmountDOMEventListeners(this._globalHandlerScope)},a.prototype.setCursor=function(n){this.dom.style&&(this.dom.style.cursor=n||"default")},a.prototype.__togglePointerCapture=function(n){if(this.__mayPointerCapture=null,globalEventSupported&&+this.__pointerCapturing^+n){this.__pointerCapturing=n;var s=this._globalHandlerScope;n?mountGlobalDOMEventListeners(this,s):unmountDOMEventListeners(s)}},a}(Eventful),dpr=1;env.hasGlobalWindow&&(dpr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var devicePixelRatio=dpr,DARK_MODE_THRESHOLD=.4,DARK_LABEL_COLOR="#333",LIGHT_LABEL_COLOR="#ccc",LIGHTER_LABEL_COLOR="#eee",mIdentity=identity,EPSILON$2=5e-5;function isNotAroundZero(o){return o>EPSILON$2||o<-EPSILON$2}var scaleTmp=[],tmpTransform=[],originTransform=create$1(),abs=Math.abs,Transformable=function(){function o(){}return o.prototype.getLocalTransform=function(a){return o.getLocalTransform(this,a)},o.prototype.setPosition=function(a){this.x=a[0],this.y=a[1]},o.prototype.setScale=function(a){this.scaleX=a[0],this.scaleY=a[1]},o.prototype.setSkew=function(a){this.skewX=a[0],this.skewY=a[1]},o.prototype.setOrigin=function(a){this.originX=a[0],this.originY=a[1]},o.prototype.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.x)||isNotAroundZero(this.y)||isNotAroundZero(this.scaleX-1)||isNotAroundZero(this.scaleY-1)||isNotAroundZero(this.skewX)||isNotAroundZero(this.skewY)},o.prototype.updateTransform=function(){var a=this.parent&&this.parent.transform,n=this.needLocalTransform(),s=this.transform;if(!(n||a)){s&&(mIdentity(s),this.invTransform=null);return}s=s||create$1(),n?this.getLocalTransform(s):mIdentity(s),a&&(n?mul(s,a,s):copy$1(s,a)),this.transform=s,this._resolveGlobalScaleRatio(s)},o.prototype._resolveGlobalScaleRatio=function(a){var n=this.globalScaleRatio;if(n!=null&&n!==1){this.getGlobalScale(scaleTmp);var s=scaleTmp[0]<0?-1:1,l=scaleTmp[1]<0?-1:1,c=((scaleTmp[0]-s)*n+s)/scaleTmp[0]||0,u=((scaleTmp[1]-l)*n+l)/scaleTmp[1]||0;a[0]*=c,a[1]*=c,a[2]*=u,a[3]*=u}this.invTransform=this.invTransform||create$1(),invert(this.invTransform,a)},o.prototype.getComputedTransform=function(){for(var a=this,n=[];a;)n.push(a),a=a.parent;for(;a=n.pop();)a.updateTransform();return this.transform},o.prototype.setLocalTransform=function(a){if(a){var n=a[0]*a[0]+a[1]*a[1],s=a[2]*a[2]+a[3]*a[3],l=Math.atan2(a[1],a[0]),c=Math.PI/2+l-Math.atan2(a[3],a[2]);s=Math.sqrt(s)*Math.cos(c),n=Math.sqrt(n),this.skewX=c,this.skewY=0,this.rotation=-l,this.x=+a[4],this.y=+a[5],this.scaleX=n,this.scaleY=s,this.originX=0,this.originY=0}},o.prototype.decomposeTransform=function(){if(this.transform){var a=this.parent,n=this.transform;a&&a.transform&&(a.invTransform=a.invTransform||create$1(),mul(tmpTransform,a.invTransform,n),n=tmpTransform);var s=this.originX,l=this.originY;(s||l)&&(originTransform[4]=s,originTransform[5]=l,mul(tmpTransform,n,originTransform),tmpTransform[4]-=s,tmpTransform[5]-=l,n=tmpTransform),this.setLocalTransform(n)}},o.prototype.getGlobalScale=function(a){var n=this.transform;return a=a||[],n?(a[0]=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a[1]=Math.sqrt(n[2]*n[2]+n[3]*n[3]),n[0]<0&&(a[0]=-a[0]),n[3]<0&&(a[1]=-a[1]),a):(a[0]=1,a[1]=1,a)},o.prototype.transformCoordToLocal=function(a,n){var s=[a,n],l=this.invTransform;return l&&applyTransform$1(s,s,l),s},o.prototype.transformCoordToGlobal=function(a,n){var s=[a,n],l=this.transform;return l&&applyTransform$1(s,s,l),s},o.prototype.getLineScale=function(){var a=this.transform;return a&&abs(a[0]-1)>1e-10&&abs(a[3]-1)>1e-10?Math.sqrt(abs(a[0]*a[3]-a[2]*a[1])):1},o.prototype.copyTransform=function(a){copyTransform(this,a)},o.getLocalTransform=function(a,n){n=n||[];var s=a.originX||0,l=a.originY||0,c=a.scaleX,u=a.scaleY,d=a.anchorX,h=a.anchorY,f=a.rotation||0,p=a.x,g=a.y,v=a.skewX?Math.tan(a.skewX):0,b=a.skewY?Math.tan(-a.skewY):0;if(s||l||d||h){var w=s+d,x=l+h;n[4]=-w*c-v*x*u,n[5]=-x*u-b*w*c}else n[4]=n[5]=0;return n[0]=c,n[3]=u,n[1]=b*c,n[2]=v*u,f&&rotate(n,n,f),n[4]+=s+p,n[5]+=l+g,n},o.initDefaultProps=function(){var a=o.prototype;a.scaleX=a.scaleY=a.globalScaleRatio=1,a.x=a.y=a.originX=a.originY=a.skewX=a.skewY=a.rotation=a.anchorX=a.anchorY=0}(),o}(),TRANSFORMABLE_PROPS=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function copyTransform(o,a){for(var n=0;n<TRANSFORMABLE_PROPS.length;n++){var s=TRANSFORMABLE_PROPS[n];o[s]=a[s]}}var textWidthCache={};function getWidth(o,a){a=a||DEFAULT_FONT;var n=textWidthCache[a];n||(n=textWidthCache[a]=new LRU(500));var s=n.get(o);return s==null&&(s=platformApi.measureText(o,a).width,n.put(o,s)),s}function innerGetBoundingRect(o,a,n,s){var l=getWidth(o,a),c=getLineHeight(a),u=adjustTextX(0,l,n),d=adjustTextY(0,c,s),h=new BoundingRect(u,d,l,c);return h}function getBoundingRect(o,a,n,s){var l=((o||"")+"").split(`
`),c=l.length;if(c===1)return innerGetBoundingRect(l[0],a,n,s);for(var u=new BoundingRect(0,0,0,0),d=0;d<l.length;d++){var h=innerGetBoundingRect(l[d],a,n,s);d===0?u.copy(h):u.union(h)}return u}function adjustTextX(o,a,n){return n==="right"?o-=a:n==="center"&&(o-=a/2),o}function adjustTextY(o,a,n){return n==="middle"?o-=a/2:n==="bottom"&&(o-=a),o}function getLineHeight(o){return getWidth("国",o)}function parsePercent$1(o,a){return typeof o=="string"?o.lastIndexOf("%")>=0?parseFloat(o)/100*a:parseFloat(o):o}function calculateTextPosition(o,a,n){var s=a.position||"inside",l=a.distance!=null?a.distance:5,c=n.height,u=n.width,d=c/2,h=n.x,f=n.y,p="left",g="top";if(s instanceof Array)h+=parsePercent$1(s[0],n.width),f+=parsePercent$1(s[1],n.height),p=null,g=null;else switch(s){case"left":h-=l,f+=d,p="right",g="middle";break;case"right":h+=l+u,f+=d,g="middle";break;case"top":h+=u/2,f-=l,p="center",g="bottom";break;case"bottom":h+=u/2,f+=c+l,p="center";break;case"inside":h+=u/2,f+=d,p="center",g="middle";break;case"insideLeft":h+=l,f+=d,g="middle";break;case"insideRight":h+=u-l,f+=d,p="right",g="middle";break;case"insideTop":h+=u/2,f+=l,p="center";break;case"insideBottom":h+=u/2,f+=c-l,p="center",g="bottom";break;case"insideTopLeft":h+=l,f+=l;break;case"insideTopRight":h+=u-l,f+=l,p="right";break;case"insideBottomLeft":h+=l,f+=c-l,g="bottom";break;case"insideBottomRight":h+=u-l,f+=c-l,p="right",g="bottom";break}return o=o||{},o.x=h,o.y=f,o.align=p,o.verticalAlign=g,o}var PRESERVED_NORMAL_STATE="__zr_normal__",PRIMARY_STATES_KEYS$1=TRANSFORMABLE_PROPS.concat(["ignore"]),DEFAULT_ANIMATABLE_MAP=reduce(TRANSFORMABLE_PROPS,function(o,a){return o[a]=!0,o},{ignore:!1}),tmpTextPosCalcRes={},tmpBoundingRect=new BoundingRect(0,0,0,0),Element=function(){function o(a){this.id=guid(),this.animators=[],this.currentStates=[],this.states={},this._init(a)}return o.prototype._init=function(a){this.attr(a)},o.prototype.drift=function(a,n,s){switch(this.draggable){case"horizontal":n=0;break;case"vertical":a=0;break}var l=this.transform;l||(l=this.transform=[1,0,0,1,0,0]),l[4]+=a,l[5]+=n,this.decomposeTransform(),this.markRedraw()},o.prototype.beforeUpdate=function(){},o.prototype.afterUpdate=function(){},o.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},o.prototype.updateInnerText=function(a){var n=this._textContent;if(n&&(!n.ignore||a)){this.textConfig||(this.textConfig={});var s=this.textConfig,l=s.local,c=n.innerTransformable,u=void 0,d=void 0,h=!1;c.parent=l?this:null;var f=!1;if(c.copyTransform(n),s.position!=null){var p=tmpBoundingRect;s.layoutRect?p.copy(s.layoutRect):p.copy(this.getBoundingRect()),l||p.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(tmpTextPosCalcRes,s,p):calculateTextPosition(tmpTextPosCalcRes,s,p),c.x=tmpTextPosCalcRes.x,c.y=tmpTextPosCalcRes.y,u=tmpTextPosCalcRes.align,d=tmpTextPosCalcRes.verticalAlign;var g=s.origin;if(g&&s.rotation!=null){var v=void 0,b=void 0;g==="center"?(v=p.width*.5,b=p.height*.5):(v=parsePercent$1(g[0],p.width),b=parsePercent$1(g[1],p.height)),f=!0,c.originX=-c.x+v+(l?0:p.x),c.originY=-c.y+b+(l?0:p.y)}}s.rotation!=null&&(c.rotation=s.rotation);var w=s.offset;w&&(c.x+=w[0],c.y+=w[1],f||(c.originX=-w[0],c.originY=-w[1]));var x=s.inside==null?typeof s.position=="string"&&s.position.indexOf("inside")>=0:s.inside,S=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),E=void 0,T=void 0,C=void 0;x&&this.canBeInsideText()?(E=s.insideFill,T=s.insideStroke,(E==null||E==="auto")&&(E=this.getInsideTextFill()),(T==null||T==="auto")&&(T=this.getInsideTextStroke(E),C=!0)):(E=s.outsideFill,T=s.outsideStroke,(E==null||E==="auto")&&(E=this.getOutsideFill()),(T==null||T==="auto")&&(T=this.getOutsideStroke(E),C=!0)),E=E||"#000",(E!==S.fill||T!==S.stroke||C!==S.autoStroke||u!==S.align||d!==S.verticalAlign)&&(h=!0,S.fill=E,S.stroke=T,S.autoStroke=C,S.align=u,S.verticalAlign=d,n.setDefaultTextStyle(S)),n.__dirty|=REDRAW_BIT,h&&n.dirtyStyle(!0)}},o.prototype.canBeInsideText=function(){return!0},o.prototype.getInsideTextFill=function(){return"#fff"},o.prototype.getInsideTextStroke=function(a){return"#000"},o.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?LIGHT_LABEL_COLOR:DARK_LABEL_COLOR},o.prototype.getOutsideStroke=function(a){var n=this.__zr&&this.__zr.getBackgroundColor(),s=typeof n=="string"&&parse(n);s||(s=[255,255,255,1]);for(var l=s[3],c=this.__zr.isDarkMode(),u=0;u<3;u++)s[u]=s[u]*l+(c?0:255)*(1-l);return s[3]=1,stringify(s,"rgba")},o.prototype.traverse=function(a,n){},o.prototype.attrKV=function(a,n){a==="textConfig"?this.setTextConfig(n):a==="textContent"?this.setTextContent(n):a==="clipPath"?this.setClipPath(n):a==="extra"?(this.extra=this.extra||{},extend(this.extra,n)):this[a]=n},o.prototype.hide=function(){this.ignore=!0,this.markRedraw()},o.prototype.show=function(){this.ignore=!1,this.markRedraw()},o.prototype.attr=function(a,n){if(typeof a=="string")this.attrKV(a,n);else if(isObject$3(a))for(var s=a,l=keys$1(s),c=0;c<l.length;c++){var u=l[c];this.attrKV(u,a[u])}return this.markRedraw(),this},o.prototype.saveCurrentToNormalState=function(a){this._innerSaveToNormal(a);for(var n=this._normalState,s=0;s<this.animators.length;s++){var l=this.animators[s],c=l.__fromStateTransition;if(!(l.getLoop()||c&&c!==PRESERVED_NORMAL_STATE)){var u=l.targetName,d=u?n[u]:n;l.saveTo(d)}}},o.prototype._innerSaveToNormal=function(a){var n=this._normalState;n||(n=this._normalState={}),a.textConfig&&!n.textConfig&&(n.textConfig=this.textConfig),this._savePrimaryToNormal(a,n,PRIMARY_STATES_KEYS$1)},o.prototype._savePrimaryToNormal=function(a,n,s){for(var l=0;l<s.length;l++){var c=s[l];a[c]!=null&&!(c in n)&&(n[c]=this[c])}},o.prototype.hasState=function(){return this.currentStates.length>0},o.prototype.getState=function(a){return this.states[a]},o.prototype.ensureState=function(a){var n=this.states;return n[a]||(n[a]={}),n[a]},o.prototype.clearStates=function(a){this.useState(PRESERVED_NORMAL_STATE,!1,a)},o.prototype.useState=function(a,n,s,l){var c=a===PRESERVED_NORMAL_STATE,u=this.hasState();if(!(!u&&c)){var d=this.currentStates,h=this.stateTransition;if(!(indexOf(d,a)>=0&&(n||d.length===1))){var f;if(this.stateProxy&&!c&&(f=this.stateProxy(a)),f||(f=this.states&&this.states[a]),!f&&!c){logError("State "+a+" not exists.");return}c||this.saveCurrentToNormalState(f);var p=!!(f&&f.hoverLayer||l);p&&this._toggleHoverLayerFlag(!0),this._applyStateObj(a,f,this._normalState,n,!s&&!this.__inHover&&h&&h.duration>0,h);var g=this._textContent,v=this._textGuide;return g&&g.useState(a,n,s,p),v&&v.useState(a,n,s,p),c?(this.currentStates=[],this._normalState={}):n?this.currentStates.push(a):this.currentStates=[a],this._updateAnimationTargets(),this.markRedraw(),!p&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT),f}}},o.prototype.useStates=function(a,n,s){if(!a.length)this.clearStates();else{var l=[],c=this.currentStates,u=a.length,d=u===c.length;if(d){for(var h=0;h<u;h++)if(a[h]!==c[h]){d=!1;break}}if(d)return;for(var h=0;h<u;h++){var f=a[h],p=void 0;this.stateProxy&&(p=this.stateProxy(f,a)),p||(p=this.states[f]),p&&l.push(p)}var g=l[u-1],v=!!(g&&g.hoverLayer||s);v&&this._toggleHoverLayerFlag(!0);var b=this._mergeStates(l),w=this.stateTransition;this.saveCurrentToNormalState(b),this._applyStateObj(a.join(","),b,this._normalState,!1,!n&&!this.__inHover&&w&&w.duration>0,w);var x=this._textContent,S=this._textGuide;x&&x.useStates(a,n,v),S&&S.useStates(a,n,v),this._updateAnimationTargets(),this.currentStates=a.slice(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~REDRAW_BIT)}},o.prototype.isSilent=function(){for(var a=this.silent,n=this.parent;!a&&n;){if(n.silent){a=!0;break}n=n.parent}return a},o.prototype._updateAnimationTargets=function(){for(var a=0;a<this.animators.length;a++){var n=this.animators[a];n.targetName&&n.changeTarget(this[n.targetName])}},o.prototype.removeState=function(a){var n=indexOf(this.currentStates,a);if(n>=0){var s=this.currentStates.slice();s.splice(n,1),this.useStates(s)}},o.prototype.replaceState=function(a,n,s){var l=this.currentStates.slice(),c=indexOf(l,a),u=indexOf(l,n)>=0;c>=0?u?l.splice(c,1):l[c]=n:s&&!u&&l.push(n),this.useStates(l)},o.prototype.toggleState=function(a,n){n?this.useState(a,!0):this.removeState(a)},o.prototype._mergeStates=function(a){for(var n={},s,l=0;l<a.length;l++){var c=a[l];extend(n,c),c.textConfig&&(s=s||{},extend(s,c.textConfig))}return s&&(n.textConfig=s),n},o.prototype._applyStateObj=function(a,n,s,l,c,u){var d=!(n&&l);n&&n.textConfig?(this.textConfig=extend({},l?this.textConfig:s.textConfig),extend(this.textConfig,n.textConfig)):d&&s.textConfig&&(this.textConfig=s.textConfig);for(var h={},f=!1,p=0;p<PRIMARY_STATES_KEYS$1.length;p++){var g=PRIMARY_STATES_KEYS$1[p],v=c&&DEFAULT_ANIMATABLE_MAP[g];n&&n[g]!=null?v?(f=!0,h[g]=n[g]):this[g]=n[g]:d&&s[g]!=null&&(v?(f=!0,h[g]=s[g]):this[g]=s[g])}if(!c)for(var p=0;p<this.animators.length;p++){var b=this.animators[p],w=b.targetName;b.getLoop()||b.__changeFinalValue(w?(n||s)[w]:n||s)}f&&this._transitionState(a,h,u)},o.prototype._attachComponent=function(a){if(a.__zr&&!a.__hostTarget){if(process.env.NODE_ENV!=="production")throw new Error("Text element has been added to zrender.");return}if(a===this){if(process.env.NODE_ENV!=="production")throw new Error("Recursive component attachment.");return}var n=this.__zr;n&&a.addSelfToZr(n),a.__zr=n,a.__hostTarget=this},o.prototype._detachComponent=function(a){a.__zr&&a.removeSelfFromZr(a.__zr),a.__zr=null,a.__hostTarget=null},o.prototype.getClipPath=function(){return this._clipPath},o.prototype.setClipPath=function(a){this._clipPath&&this._clipPath!==a&&this.removeClipPath(),this._attachComponent(a),this._clipPath=a,this.markRedraw()},o.prototype.removeClipPath=function(){var a=this._clipPath;a&&(this._detachComponent(a),this._clipPath=null,this.markRedraw())},o.prototype.getTextContent=function(){return this._textContent},o.prototype.setTextContent=function(a){var n=this._textContent;if(n!==a){if(n&&n!==a&&this.removeTextContent(),process.env.NODE_ENV!=="production"&&a.__zr&&!a.__hostTarget)throw new Error("Text element has been added to zrender.");a.innerTransformable=new Transformable,this._attachComponent(a),this._textContent=a,this.markRedraw()}},o.prototype.setTextConfig=function(a){this.textConfig||(this.textConfig={}),extend(this.textConfig,a),this.markRedraw()},o.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},o.prototype.removeTextContent=function(){var a=this._textContent;a&&(a.innerTransformable=null,this._detachComponent(a),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},o.prototype.getTextGuideLine=function(){return this._textGuide},o.prototype.setTextGuideLine=function(a){this._textGuide&&this._textGuide!==a&&this.removeTextGuideLine(),this._attachComponent(a),this._textGuide=a,this.markRedraw()},o.prototype.removeTextGuideLine=function(){var a=this._textGuide;a&&(this._detachComponent(a),this._textGuide=null,this.markRedraw())},o.prototype.markRedraw=function(){this.__dirty|=REDRAW_BIT;var a=this.__zr;a&&(this.__inHover?a.refreshHover():a.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},o.prototype.dirty=function(){this.markRedraw()},o.prototype._toggleHoverLayerFlag=function(a){this.__inHover=a;var n=this._textContent,s=this._textGuide;n&&(n.__inHover=a),s&&(s.__inHover=a)},o.prototype.addSelfToZr=function(a){if(this.__zr!==a){this.__zr=a;var n=this.animators;if(n)for(var s=0;s<n.length;s++)a.animation.addAnimator(n[s]);this._clipPath&&this._clipPath.addSelfToZr(a),this._textContent&&this._textContent.addSelfToZr(a),this._textGuide&&this._textGuide.addSelfToZr(a)}},o.prototype.removeSelfFromZr=function(a){if(this.__zr){this.__zr=null;var n=this.animators;if(n)for(var s=0;s<n.length;s++)a.animation.removeAnimator(n[s]);this._clipPath&&this._clipPath.removeSelfFromZr(a),this._textContent&&this._textContent.removeSelfFromZr(a),this._textGuide&&this._textGuide.removeSelfFromZr(a)}},o.prototype.animate=function(a,n,s){var l=a?this[a]:this;if(process.env.NODE_ENV!=="production"&&!l){logError('Property "'+a+'" is not existed in element '+this.id);return}var c=new Animator(l,n,s);return a&&(c.targetName=a),this.addAnimator(c,a),c},o.prototype.addAnimator=function(a,n){var s=this.__zr,l=this;a.during(function(){l.updateDuringAnimation(n)}).done(function(){var c=l.animators,u=indexOf(c,a);u>=0&&c.splice(u,1)}),this.animators.push(a),s&&s.animation.addAnimator(a),s&&s.wakeUp()},o.prototype.updateDuringAnimation=function(a){this.markRedraw()},o.prototype.stopAnimation=function(a,n){for(var s=this.animators,l=s.length,c=[],u=0;u<l;u++){var d=s[u];!a||a===d.scope?d.stop(n):c.push(d)}return this.animators=c,this},o.prototype.animateTo=function(a,n,s){animateTo(this,a,n,s)},o.prototype.animateFrom=function(a,n,s){animateTo(this,a,n,s,!0)},o.prototype._transitionState=function(a,n,s,l){for(var c=animateTo(this,n,s,l),u=0;u<c.length;u++)c[u].__fromStateTransition=a},o.prototype.getBoundingRect=function(){return null},o.prototype.getPaintRect=function(){return null},o.initDefaultProps=function(){var a=o.prototype;a.type="element",a.name="",a.ignore=a.silent=a.isGroup=a.draggable=a.dragging=a.ignoreClip=a.__inHover=!1,a.__dirty=REDRAW_BIT;var n={};function s(c,u,d){n[c+u+d]||(console.warn("DEPRECATED: '"+c+"' has been deprecated. use '"+u+"', '"+d+"' instead"),n[c+u+d]=!0)}function l(c,u,d,h){Object.defineProperty(a,c,{get:function(){if(process.env.NODE_ENV!=="production"&&s(c,d,h),!this[u]){var p=this[u]=[];f(this,p)}return this[u]},set:function(p){process.env.NODE_ENV!=="production"&&s(c,d,h),this[d]=p[0],this[h]=p[1],this[u]=p,f(this,p)}});function f(p,g){Object.defineProperty(g,0,{get:function(){return p[d]},set:function(v){p[d]=v}}),Object.defineProperty(g,1,{get:function(){return p[h]},set:function(v){p[h]=v}})}}Object.defineProperty&&(l("position","_legacyPos","x","y"),l("scale","_legacyScale","scaleX","scaleY"),l("origin","_legacyOrigin","originX","originY"))}(),o}();mixin(Element,Eventful);mixin(Element,Transformable);function animateTo(o,a,n,s,l){n=n||{};var c=[];animateToShallow(o,"",o,a,n,s,c,l);var u=c.length,d=!1,h=n.done,f=n.aborted,p=function(){d=!0,u--,u<=0&&(d?h&&h():f&&f())},g=function(){u--,u<=0&&(d?h&&h():f&&f())};u||h&&h(),c.length>0&&n.during&&c[0].during(function(w,x){n.during(x)});for(var v=0;v<c.length;v++){var b=c[v];p&&b.done(p),g&&b.aborted(g),n.force&&b.duration(n.duration),b.start(n.easing)}return c}function copyArrShallow(o,a,n){for(var s=0;s<n;s++)o[s]=a[s]}function is2DArray(o){return isArrayLike(o[0])}function copyValue(o,a,n){if(isArrayLike(a[n]))if(isArrayLike(o[n])||(o[n]=[]),isTypedArray(a[n])){var s=a[n].length;o[n].length!==s&&(o[n]=new a[n].constructor(s),copyArrShallow(o[n],a[n],s))}else{var l=a[n],c=o[n],u=l.length;if(is2DArray(l))for(var d=l[0].length,h=0;h<u;h++)c[h]?copyArrShallow(c[h],l[h],d):c[h]=Array.prototype.slice.call(l[h]);else copyArrShallow(c,l,u);c.length=l.length}else o[n]=a[n]}function isValueSame(o,a){return o===a||isArrayLike(o)&&isArrayLike(a)&&is1DArraySame(o,a)}function is1DArraySame(o,a){var n=o.length;if(n!==a.length)return!1;for(var s=0;s<n;s++)if(o[s]!==a[s])return!1;return!0}function animateToShallow(o,a,n,s,l,c,u,d){for(var h=keys$1(s),f=l.duration,p=l.delay,g=l.additive,v=l.setToFinal,b=!isObject$3(c),w=o.animators,x=[],S=0;S<h.length;S++){var E=h[S],T=s[E];if(T!=null&&n[E]!=null&&(b||c[E]))if(isObject$3(T)&&!isArrayLike(T)&&!isGradientObject(T)){if(a){d||(n[E]=T,o.updateDuringAnimation(a));continue}animateToShallow(o,E,n[E],T,l,c&&c[E],u,d)}else x.push(E);else d||(n[E]=T,o.updateDuringAnimation(a),x.push(E))}var C=x.length;if(!g&&C)for(var A=0;A<w.length;A++){var R=w[A];if(R.targetName===a){var j=R.stopTracks(x);if(j){var D=indexOf(w,R);w.splice(D,1)}}}if(l.force||(x=filter(x,function(Y){return!isValueSame(s[Y],n[Y])}),C=x.length),C>0||l.force&&!u.length){var O=void 0,H=void 0,q=void 0;if(d){H={},v&&(O={});for(var A=0;A<C;A++){var E=x[A];H[E]=n[E],v?O[E]=s[E]:n[E]=s[E]}}else if(v){q={};for(var A=0;A<C;A++){var E=x[A];q[E]=cloneValue(n[E]),copyValue(n,s,E)}}var R=new Animator(n,!1,!1,g?filter(w,function(te){return te.targetName===a}):null);R.targetName=a,l.scope&&(R.scope=l.scope),v&&O&&R.whenWithKeys(0,O,x),q&&R.whenWithKeys(0,q,x),R.whenWithKeys(f??500,d?H:s,x).delay(p||0),o.addAnimator(R,a),u.push(R)}}var Group$3=function(o){__extends(a,o);function a(n){var s=o.call(this)||this;return s.isGroup=!0,s._children=[],s.attr(n),s}return a.prototype.childrenRef=function(){return this._children},a.prototype.children=function(){return this._children.slice()},a.prototype.childAt=function(n){return this._children[n]},a.prototype.childOfName=function(n){for(var s=this._children,l=0;l<s.length;l++)if(s[l].name===n)return s[l]},a.prototype.childCount=function(){return this._children.length},a.prototype.add=function(n){if(n&&(n!==this&&n.parent!==this&&(this._children.push(n),this._doAdd(n)),process.env.NODE_ENV!=="production"&&n.__hostTarget))throw"This elemenet has been used as an attachment";return this},a.prototype.addBefore=function(n,s){if(n&&n!==this&&n.parent!==this&&s&&s.parent===this){var l=this._children,c=l.indexOf(s);c>=0&&(l.splice(c,0,n),this._doAdd(n))}return this},a.prototype.replace=function(n,s){var l=indexOf(this._children,n);return l>=0&&this.replaceAt(s,l),this},a.prototype.replaceAt=function(n,s){var l=this._children,c=l[s];if(n&&n!==this&&n.parent!==this&&n!==c){l[s]=n,c.parent=null;var u=this.__zr;u&&c.removeSelfFromZr(u),this._doAdd(n)}return this},a.prototype._doAdd=function(n){n.parent&&n.parent.remove(n),n.parent=this;var s=this.__zr;s&&s!==n.__zr&&n.addSelfToZr(s),s&&s.refresh()},a.prototype.remove=function(n){var s=this.__zr,l=this._children,c=indexOf(l,n);return c<0?this:(l.splice(c,1),n.parent=null,s&&n.removeSelfFromZr(s),s&&s.refresh(),this)},a.prototype.removeAll=function(){for(var n=this._children,s=this.__zr,l=0;l<n.length;l++){var c=n[l];s&&c.removeSelfFromZr(s),c.parent=null}return n.length=0,this},a.prototype.eachChild=function(n,s){for(var l=this._children,c=0;c<l.length;c++){var u=l[c];n.call(s,u,c)}return this},a.prototype.traverse=function(n,s){for(var l=0;l<this._children.length;l++){var c=this._children[l],u=n.call(s,c);c.isGroup&&!u&&c.traverse(n,s)}return this},a.prototype.addSelfToZr=function(n){o.prototype.addSelfToZr.call(this,n);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.addSelfToZr(n)}},a.prototype.removeSelfFromZr=function(n){o.prototype.removeSelfFromZr.call(this,n);for(var s=0;s<this._children.length;s++){var l=this._children[s];l.removeSelfFromZr(n)}},a.prototype.getBoundingRect=function(n){for(var s=new BoundingRect(0,0,0,0),l=n||this._children,c=[],u=null,d=0;d<l.length;d++){var h=l[d];if(!(h.ignore||h.invisible)){var f=h.getBoundingRect(),p=h.getLocalTransform(c);p?(BoundingRect.applyTransform(s,f,p),u=u||s.clone(),u.union(s)):(u=u||f.clone(),u.union(f))}}return u||s},a}(Element);Group$3.prototype.type="group";/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var painterCtors={},instances$1={};function delInstance(o){delete instances$1[o]}function isDarkMode(o){if(!o)return!1;if(typeof o=="string")return lum(o,1)<DARK_MODE_THRESHOLD;if(o.colorStops){for(var a=o.colorStops,n=0,s=a.length,l=0;l<s;l++)n+=lum(a[l].color,1);return n/=s,n<DARK_MODE_THRESHOLD}return!1}var ZRender=function(){function o(a,n,s){var l=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,s=s||{},this.dom=n,this.id=a;var c=new Storage,u=s.renderer||"canvas";if(painterCtors[u]||(u=keys$1(painterCtors)[0]),process.env.NODE_ENV!=="production"&&!painterCtors[u])throw new Error("Renderer '"+u+"' is not imported. Please import it first.");s.useDirtyRect=s.useDirtyRect==null?!1:s.useDirtyRect;var d=new painterCtors[u](n,c,s,a),h=s.ssr||d.ssrOnly;this.storage=c,this.painter=d;var f=!env.node&&!env.worker&&!h?new HandlerDomProxy(d.getViewportRoot(),d.root):null,p=s.useCoarsePointer,g=p==null||p==="auto"?env.touchEventsSupported:!!p,v=44,b;g&&(b=retrieve2(s.pointerSize,v)),this.handler=new Handler(c,d,f,d.root,b),this.animation=new Animation({stage:{update:h?null:function(){return l._flush(!0)}}}),h||this.animation.start()}return o.prototype.add=function(a){this._disposed||!a||(this.storage.addRoot(a),a.addSelfToZr(this),this.refresh())},o.prototype.remove=function(a){this._disposed||!a||(this.storage.delRoot(a),a.removeSelfFromZr(this),this.refresh())},o.prototype.configLayer=function(a,n){this._disposed||(this.painter.configLayer&&this.painter.configLayer(a,n),this.refresh())},o.prototype.setBackgroundColor=function(a){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(a),this.refresh(),this._backgroundColor=a,this._darkMode=isDarkMode(a))},o.prototype.getBackgroundColor=function(){return this._backgroundColor},o.prototype.setDarkMode=function(a){this._darkMode=a},o.prototype.isDarkMode=function(){return this._darkMode},o.prototype.refreshImmediately=function(a){this._disposed||(a||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},o.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},o.prototype.flush=function(){this._disposed||this._flush(!1)},o.prototype._flush=function(a){var n,s=getTime();this._needsRefresh&&(n=!0,this.refreshImmediately(a)),this._needsRefreshHover&&(n=!0,this.refreshHoverImmediately());var l=getTime();n?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:l-s})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},o.prototype.setSleepAfterStill=function(a){this._sleepAfterStill=a},o.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},o.prototype.refreshHover=function(){this._needsRefreshHover=!0},o.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover())},o.prototype.resize=function(a){this._disposed||(a=a||{},this.painter.resize(a.width,a.height),this.handler.resize())},o.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},o.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},o.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},o.prototype.setCursorStyle=function(a){this._disposed||this.handler.setCursorStyle(a)},o.prototype.findHover=function(a,n){if(!this._disposed)return this.handler.findHover(a,n)},o.prototype.on=function(a,n,s){return this._disposed||this.handler.on(a,n,s),this},o.prototype.off=function(a,n){this._disposed||this.handler.off(a,n)},o.prototype.trigger=function(a,n){this._disposed||this.handler.trigger(a,n)},o.prototype.clear=function(){if(!this._disposed){for(var a=this.storage.getRoots(),n=0;n<a.length;n++)a[n]instanceof Group$3&&a[n].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},o.prototype.dispose=function(){this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,delInstance(this.id))},o}();function init$2(o,a){var n=new ZRender(guid(),o,a);return instances$1[n.id]=n,n}function dispose$1(o){o.dispose()}function disposeAll(){for(var o in instances$1)instances$1.hasOwnProperty(o)&&instances$1[o].dispose();instances$1={}}function getInstance(o){return instances$1[o]}function registerPainter(o,a){painterCtors[o]=a}var ssrDataGetter;function getElementSSRData(o){if(typeof ssrDataGetter=="function")return ssrDataGetter(o)}function registerSSRDataGetter(o){ssrDataGetter=o}var version$1="5.6.1";const zrender=Object.freeze(Object.defineProperty({__proto__:null,dispose:dispose$1,disposeAll,getElementSSRData,getInstance,init:init$2,registerPainter,registerSSRDataGetter,version:version$1},Symbol.toStringTag,{value:"Module"}));var RADIAN_EPSILON=1e-4,ROUND_SUPPORTED_PRECISION_MAX=20;function _trim(o){return o.replace(/^\s+|\s+$/g,"")}function linearMap$2(o,a,n,s){var l=a[0],c=a[1],u=n[0],d=n[1],h=c-l,f=d-u;if(h===0)return f===0?u:(u+d)/2;if(s)if(h>0){if(o<=l)return u;if(o>=c)return d}else{if(o>=l)return u;if(o<=c)return d}else{if(o===l)return u;if(o===c)return d}return(o-l)/h*f+u}function parsePercent(o,a){switch(o){case"center":case"middle":o="50%";break;case"left":case"top":o="0%";break;case"right":case"bottom":o="100%";break}return isString$2(o)?_trim(o).match(/%$/)?parseFloat(o)/100*a:parseFloat(o):o==null?NaN:+o}function round$3(o,a,n){return a==null&&(a=10),a=Math.min(Math.max(0,a),ROUND_SUPPORTED_PRECISION_MAX),o=(+o).toFixed(a),n?o:+o}function asc$2(o){return o.sort(function(a,n){return a-n}),o}function getPrecision(o){if(o=+o,isNaN(o))return 0;if(o>1e-14){for(var a=1,n=0;n<15;n++,a*=10)if(Math.round(o*a)/a===o)return n}return getPrecisionSafe(o)}function getPrecisionSafe(o){var a=o.toString().toLowerCase(),n=a.indexOf("e"),s=n>0?+a.slice(n+1):0,l=n>0?n:a.length,c=a.indexOf("."),u=c<0?0:l-1-c;return Math.max(0,u-s)}function getPixelPrecision(o,a){var n=Math.log,s=Math.LN10,l=Math.floor(n(o[1]-o[0])/s),c=Math.round(n(Math.abs(a[1]-a[0]))/s),u=Math.min(Math.max(-l+c,0),20);return isFinite(u)?u:20}function getPercentWithPrecision(o,a,n){if(!o[a])return 0;var s=getPercentSeats(o,n);return s[a]||0}function getPercentSeats(o,a){var n=reduce(o,function(b,w){return b+(isNaN(w)?0:w)},0);if(n===0)return[];for(var s=Math.pow(10,a),l=map$1(o,function(b){return(isNaN(b)?0:b)/n*s*100}),c=s*100,u=map$1(l,function(b){return Math.floor(b)}),d=reduce(u,function(b,w){return b+w},0),h=map$1(l,function(b,w){return b-u[w]});d<c;){for(var f=Number.NEGATIVE_INFINITY,p=null,g=0,v=h.length;g<v;++g)h[g]>f&&(f=h[g],p=g);++u[p],h[p]=0,++d}return map$1(u,function(b){return b/s})}function addSafe(o,a){var n=Math.max(getPrecision(o),getPrecision(a)),s=o+a;return n>ROUND_SUPPORTED_PRECISION_MAX?s:round$3(s,n)}var MAX_SAFE_INTEGER=9007199254740991;function remRadian(o){var a=Math.PI*2;return(o%a+a)%a}function isRadianAroundZero(o){return o>-RADIAN_EPSILON&&o<RADIAN_EPSILON}var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function parseDate$1(o){if(o instanceof Date)return o;if(isString$2(o)){var a=TIME_REG.exec(o);if(!a)return new Date(NaN);if(a[8]){var n=+a[4]||0;return a[8].toUpperCase()!=="Z"&&(n-=+a[8].slice(0,3)),new Date(Date.UTC(+a[1],+(a[2]||1)-1,+a[3]||1,n,+(a[5]||0),+a[6]||0,a[7]?+a[7].substring(0,3):0))}else return new Date(+a[1],+(a[2]||1)-1,+a[3]||1,+a[4]||0,+(a[5]||0),+a[6]||0,a[7]?+a[7].substring(0,3):0)}else if(o==null)return new Date(NaN);return new Date(Math.round(o))}function quantity(o){return Math.pow(10,quantityExponent(o))}function quantityExponent(o){if(o===0)return 0;var a=Math.floor(Math.log(o)/Math.LN10);return o/Math.pow(10,a)>=10&&a++,a}function nice(o,a){var n=quantityExponent(o),s=Math.pow(10,n),l=o/s,c;return a?l<1.5?c=1:l<2.5?c=2:l<4?c=3:l<7?c=5:c=10:l<1?c=1:l<2?c=2:l<3?c=3:l<5?c=5:c=10,o=c*s,n>=-20?+o.toFixed(n<0?-n:0):o}function quantile(o,a){var n=(o.length-1)*a+1,s=Math.floor(n),l=+o[s-1],c=n-s;return c?l+c*(o[s]-l):l}function reformIntervals(o){o.sort(function(h,f){return d(h,f,0)?-1:1});for(var a=-1/0,n=1,s=0;s<o.length;){for(var l=o[s].interval,c=o[s].close,u=0;u<2;u++)l[u]<=a&&(l[u]=a,c[u]=u?1:1-n),a=l[u],n=c[u];l[0]===l[1]&&c[0]*c[1]!==1?o.splice(s,1):s++}return o;function d(h,f,p){return h.interval[p]<f.interval[p]||h.interval[p]===f.interval[p]&&(h.close[p]-f.close[p]===(p?-1:1)||!p&&d(h,f,1))}}function numericToNumber(o){var a=parseFloat(o);return a==o&&(a!==0||!isString$2(o)||o.indexOf("x")<=0)?a:NaN}function isNumeric(o){return!isNaN(numericToNumber(o))}function getRandomIdBase(){return Math.round(Math.random()*9)}function getGreatestCommonDividor(o,a){return a===0?o:getGreatestCommonDividor(a,o%a)}function getLeastCommonMultiple(o,a){return o==null?a:a==null?o:o*a/getGreatestCommonDividor(o,a)}var ECHARTS_PREFIX="[ECharts] ",storedLogs={},hasConsole=typeof console<"u"&&console.warn&&console.log;function outputLog(o,a,n){if(hasConsole){if(n){if(storedLogs[a])return;storedLogs[a]=!0}console[o](ECHARTS_PREFIX+a)}}function log(o,a){outputLog("log",o,a)}function warn(o,a){outputLog("warn",o,a)}function error(o,a){outputLog("error",o,a)}function deprecateLog(o){process.env.NODE_ENV!=="production"&&outputLog("warn","DEPRECATED: "+o,!0)}function deprecateReplaceLog(o,a,n){process.env.NODE_ENV!=="production"&&deprecateLog((n?"["+n+"]":"")+(o+" is deprecated, use "+a+" instead."))}function makePrintable(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var n="";if(process.env.NODE_ENV!=="production"){var s=function(l){return l===void 0?"undefined":l===1/0?"Infinity":l===-1/0?"-Infinity":eqNaN(l)?"NaN":l instanceof Date?"Date("+l.toISOString()+")":isFunction$1(l)?"function () { ... }":isRegExp(l)?l+"":null};n=map$1(o,function(l){if(isString$2(l))return l;var c=s(l);if(c!=null)return c;if(typeof JSON<"u"&&JSON.stringify)try{return JSON.stringify(l,function(u,d){var h=s(d);return h??d})}catch{return"?"}else return"?"}).join(" ")}return n}function throwError(o){throw new Error(o)}function interpolateNumber(o,a,n){return(a-o)*n+o}var DUMMY_COMPONENT_NAME_PREFIX="series\0",INTERNAL_COMPONENT_ID_PREFIX="\0_ec_\0";function normalizeToArray(o){return o instanceof Array?o:o==null?[]:[o]}function defaultEmphasis(o,a,n){if(o){o[a]=o[a]||{},o.emphasis=o.emphasis||{},o.emphasis[a]=o.emphasis[a]||{};for(var s=0,l=n.length;s<l;s++){var c=n[s];!o.emphasis[a].hasOwnProperty(c)&&o[a].hasOwnProperty(c)&&(o.emphasis[a][c]=o[a][c])}}}var TEXT_STYLE_OPTIONS=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function getDataItemValue(o){return isObject$3(o)&&!isArray$1(o)&&!(o instanceof Date)?o.value:o}function isDataItemOption(o){return isObject$3(o)&&!(o instanceof Array)}function mappingToExists(o,a,n){var s=n==="normalMerge",l=n==="replaceMerge",c=n==="replaceAll";o=o||[],a=(a||[]).slice();var u=createHashMap();each$f(a,function(h,f){if(!isObject$3(h)){a[f]=null;return}process.env.NODE_ENV!=="production"&&(h.id!=null&&!isValidIdOrName(h.id)&&warnInvalidateIdOrName(h.id),h.name!=null&&!isValidIdOrName(h.name)&&warnInvalidateIdOrName(h.name))});var d=prepareResult(o,u,n);return(s||l)&&mappingById(d,o,u,a),s&&mappingByName(d,a),s||l?mappingByIndex(d,a,l):c&&mappingInReplaceAllMode(d,a),makeIdAndName(d),d}function prepareResult(o,a,n){var s=[];if(n==="replaceAll")return s;for(var l=0;l<o.length;l++){var c=o[l];c&&c.id!=null&&a.set(c.id,l),s.push({existing:n==="replaceMerge"||isComponentIdInternal(c)?null:c,newOption:null,keyInfo:null,brandNew:null})}return s}function mappingById(o,a,n,s){each$f(s,function(l,c){if(!(!l||l.id==null)){var u=makeComparableKey(l.id),d=n.get(u);if(d!=null){var h=o[d];assert(!h.newOption,'Duplicated option on id "'+u+'".'),h.newOption=l,h.existing=a[d],s[c]=null}}})}function mappingByName(o,a){each$f(a,function(n,s){if(!(!n||n.name==null))for(var l=0;l<o.length;l++){var c=o[l].existing;if(!o[l].newOption&&c&&(c.id==null||n.id==null)&&!isComponentIdInternal(n)&&!isComponentIdInternal(c)&&keyExistAndEqual("name",c,n)){o[l].newOption=n,a[s]=null;return}}})}function mappingByIndex(o,a,n){each$f(a,function(s){if(s){for(var l,c=0;(l=o[c])&&(l.newOption||isComponentIdInternal(l.existing)||l.existing&&s.id!=null&&!keyExistAndEqual("id",s,l.existing));)c++;l?(l.newOption=s,l.brandNew=n):o.push({newOption:s,brandNew:n,existing:null,keyInfo:null}),c++}})}function mappingInReplaceAllMode(o,a){each$f(a,function(n){o.push({newOption:n,brandNew:!0,existing:null,keyInfo:null})})}function makeIdAndName(o){var a=createHashMap();each$f(o,function(n){var s=n.existing;s&&a.set(s.id,n)}),each$f(o,function(n){var s=n.newOption;assert(!s||s.id==null||!a.get(s.id)||a.get(s.id)===n,"id duplicates: "+(s&&s.id)),s&&s.id!=null&&a.set(s.id,n),!n.keyInfo&&(n.keyInfo={})}),each$f(o,function(n,s){var l=n.existing,c=n.newOption,u=n.keyInfo;if(isObject$3(c)){if(u.name=c.name!=null?makeComparableKey(c.name):l?l.name:DUMMY_COMPONENT_NAME_PREFIX+s,l)u.id=makeComparableKey(l.id);else if(c.id!=null)u.id=makeComparableKey(c.id);else{var d=0;do u.id="\0"+u.name+"\0"+d++;while(a.get(u.id))}a.set(u.id,n)}})}function keyExistAndEqual(o,a,n){var s=convertOptionIdName(a[o],null),l=convertOptionIdName(n[o],null);return s!=null&&l!=null&&s===l}function makeComparableKey(o){if(process.env.NODE_ENV!=="production"&&o==null)throw new Error;return convertOptionIdName(o,"")}function convertOptionIdName(o,a){return o==null?a:isString$2(o)?o:isNumber(o)||isStringSafe(o)?o+"":a}function warnInvalidateIdOrName(o){process.env.NODE_ENV!=="production"&&warn("`"+o+"` is invalid id or name. Must be a string or number.")}function isValidIdOrName(o){return isStringSafe(o)||isNumeric(o)}function isNameSpecified(o){var a=o.name;return!!(a&&a.indexOf(DUMMY_COMPONENT_NAME_PREFIX))}function isComponentIdInternal(o){return o&&o.id!=null&&makeComparableKey(o.id).indexOf(INTERNAL_COMPONENT_ID_PREFIX)===0}function makeInternalComponentId(o){return INTERNAL_COMPONENT_ID_PREFIX+o}function setComponentTypeToKeyInfo(o,a,n){each$f(o,function(s){var l=s.newOption;isObject$3(l)&&(s.keyInfo.mainType=a,s.keyInfo.subType=determineSubType(a,l,s.existing,n))})}function determineSubType(o,a,n,s){var l=a.type?a.type:n?n.subType:s.determineSubType(o,a);return l}function compressBatches(o,a){var n={},s={};return l(o||[],n),l(a||[],s,n),[c(n),c(s)];function l(u,d,h){for(var f=0,p=u.length;f<p;f++){var g=convertOptionIdName(u[f].seriesId,null);if(g==null)return;for(var v=normalizeToArray(u[f].dataIndex),b=h&&h[g],w=0,x=v.length;w<x;w++){var S=v[w];b&&b[S]?b[S]=null:(d[g]||(d[g]={}))[S]=1}}}function c(u,d){var h=[];for(var f in u)if(u.hasOwnProperty(f)&&u[f]!=null)if(d)h.push(+f);else{var p=c(u[f],!0);p.length&&h.push({seriesId:f,dataIndex:p})}return h}}function queryDataIndex(o,a){if(a.dataIndexInside!=null)return a.dataIndexInside;if(a.dataIndex!=null)return isArray$1(a.dataIndex)?map$1(a.dataIndex,function(n){return o.indexOfRawIndex(n)}):o.indexOfRawIndex(a.dataIndex);if(a.name!=null)return isArray$1(a.name)?map$1(a.name,function(n){return o.indexOfName(n)}):o.indexOfName(a.name)}function makeInner(){var o="__ec_inner_"+innerUniqueIndex++;return function(a){return a[o]||(a[o]={})}}var innerUniqueIndex=getRandomIdBase();function parseFinder$1(o,a,n){var s=preParseFinder(a,n),l=s.mainTypeSpecified,c=s.queryOptionMap,u=s.others,d=u,h=n?n.defaultMainType:null;return!l&&h&&c.set(h,{}),c.each(function(f,p){var g=queryReferringComponents(o,p,f,{useDefault:h===p,enableAll:n&&n.enableAll!=null?n.enableAll:!0,enableNone:n&&n.enableNone!=null?n.enableNone:!0});d[p+"Models"]=g.models,d[p+"Model"]=g.models[0]}),d}function preParseFinder(o,a){var n;if(isString$2(o)){var s={};s[o+"Index"]=0,n=s}else n=o;var l=createHashMap(),c={},u=!1;return each$f(n,function(d,h){if(h==="dataIndex"||h==="dataIndexInside"){c[h]=d;return}var f=h.match(/^(\w+)(Index|Id|Name)$/)||[],p=f[1],g=(f[2]||"").toLowerCase();if(!(!p||!g||a&&a.includeMainTypes&&indexOf(a.includeMainTypes,p)<0)){u=u||!!p;var v=l.get(p)||l.set(p,{});v[g]=d}}),{mainTypeSpecified:u,queryOptionMap:l,others:c}}var SINGLE_REFERRING={useDefault:!0,enableAll:!1,enableNone:!1},MULTIPLE_REFERRING={useDefault:!1,enableAll:!0,enableNone:!0};function queryReferringComponents(o,a,n,s){s=s||SINGLE_REFERRING;var l=n.index,c=n.id,u=n.name,d={models:null,specified:l!=null||c!=null||u!=null};if(!d.specified){var h=void 0;return d.models=s.useDefault&&(h=o.getComponent(a))?[h]:[],d}return l==="none"||l===!1?(assert(s.enableNone,'`"none"` or `false` is not a valid value on index option.'),d.models=[],d):(l==="all"&&(assert(s.enableAll,'`"all"` is not a valid value on index option.'),l=c=u=null),d.models=o.queryComponents({mainType:a,index:l,id:c,name:u}),d)}function setAttribute(o,a,n){o.setAttribute?o.setAttribute(a,n):o[a]=n}function getAttribute(o,a){return o.getAttribute?o.getAttribute(a):o[a]}function getTooltipRenderMode(o){return o==="auto"?env.domSupported?"html":"richText":o||"html"}function groupData(o,a){var n=createHashMap(),s=[];return each$f(o,function(l){var c=a(l);(n.get(c)||(s.push(c),n.set(c,[]))).push(l)}),{keys:s,buckets:n}}function interpolateRawValues(o,a,n,s,l){var c=a==null||a==="auto";if(s==null)return s;if(isNumber(s)){var u=interpolateNumber(n||0,s,l);return round$3(u,c?Math.max(getPrecision(n||0),getPrecision(s)):a)}else{if(isString$2(s))return l<1?n:s;for(var d=[],h=n,f=s,p=Math.max(h?h.length:0,f.length),g=0;g<p;++g){var v=o.getDimensionInfo(g);if(v&&v.type==="ordinal")d[g]=(l<1&&h?h:f)[g];else{var b=h&&h[g]?h[g]:0,w=f[g],u=interpolateNumber(b,w,l);d[g]=round$3(u,c?Math.max(getPrecision(b),getPrecision(w)):a)}}return d}}var TYPE_DELIMITER=".",IS_CONTAINER="___EC__COMPONENT__CONTAINER___",IS_EXTENDED_CLASS="___EC__EXTENDED_CLASS___";function parseClassType(o){var a={main:"",sub:""};if(o){var n=o.split(TYPE_DELIMITER);a.main=n[0]||"",a.sub=n[1]||""}return a}function checkClassType(o){assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(o),'componentType "'+o+'" illegal')}function isExtendedClass(o){return!!(o&&o[IS_EXTENDED_CLASS])}function enableClassExtend(o,a){o.$constructor=o,o.extend=function(n){process.env.NODE_ENV!=="production"&&each$f(a,function(c){n[c]||console.warn("Method `"+c+"` should be implemented"+(n.type?" in "+n.type:"")+".")});var s=this,l;return isESClass(s)?l=function(c){__extends$1(u,c);function u(){return c.apply(this,arguments)||this}return u}(s):(l=function(){(n.$constructor||s).apply(this,arguments)},inherits(l,this)),extend(l.prototype,n),l[IS_EXTENDED_CLASS]=!0,l.extend=this.extend,l.superCall=superCall,l.superApply=superApply,l.superClass=s,l}}function isESClass(o){return isFunction$1(o)&&/^class\s/.test(Function.prototype.toString.call(o))}function mountExtend(o,a){o.extend=a.extend}var classBase=Math.round(Math.random()*10);function enableClassCheck(o){var a=["__\0is_clz",classBase++].join("_");o.prototype[a]=!0,process.env.NODE_ENV!=="production"&&assert(!o.isInstance,'The method "is" can not be defined.'),o.isInstance=function(n){return!!(n&&n[a])}}function superCall(o,a){for(var n=[],s=2;s<arguments.length;s++)n[s-2]=arguments[s];return this.superClass.prototype[a].apply(o,n)}function superApply(o,a,n){return this.superClass.prototype[a].apply(o,n)}function enableClassManagement(o){var a={};o.registerClass=function(s){var l=s.type||s.prototype.type;if(l){checkClassType(l),s.prototype.type=l;var c=parseClassType(l);if(!c.sub)process.env.NODE_ENV!=="production"&&a[c.main]&&console.warn(c.main+" exists."),a[c.main]=s;else if(c.sub!==IS_CONTAINER){var u=n(c);u[c.sub]=s}}return s},o.getClass=function(s,l,c){var u=a[s];if(u&&u[IS_CONTAINER]&&(u=l?u[l]:null),c&&!u)throw new Error(l?"Component "+s+"."+(l||"")+" is used but not imported.":s+".type should be specified.");return u},o.getClassesByMainType=function(s){var l=parseClassType(s),c=[],u=a[l.main];return u&&u[IS_CONTAINER]?each$f(u,function(d,h){h!==IS_CONTAINER&&c.push(d)}):c.push(u),c},o.hasClass=function(s){var l=parseClassType(s);return!!a[l.main]},o.getAllClassMainTypes=function(){var s=[];return each$f(a,function(l,c){s.push(c)}),s},o.hasSubTypes=function(s){var l=parseClassType(s),c=a[l.main];return c&&c[IS_CONTAINER]};function n(s){var l=a[s.main];return(!l||!l[IS_CONTAINER])&&(l=a[s.main]={},l[IS_CONTAINER]=!0),l}}function makeStyleMapper(o,a){for(var n=0;n<o.length;n++)o[n][1]||(o[n][1]=o[n][0]);return a=a||!1,function(s,l,c){for(var u={},d=0;d<o.length;d++){var h=o[d][1];if(!(l&&indexOf(l,h)>=0||c&&indexOf(c,h)<0)){var f=s.getShallow(h,a);f!=null&&(u[o[d][0]]=f)}}return u}}var AREA_STYLE_KEY_MAP=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],getAreaStyle=makeStyleMapper(AREA_STYLE_KEY_MAP),AreaStyleMixin=function(){function o(){}return o.prototype.getAreaStyle=function(a,n){return getAreaStyle(this,a,n)},o}(),globalImageCache=new LRU(50);function findExistImage(o){if(typeof o=="string"){var a=globalImageCache.get(o);return a&&a.image}else return o}function createOrUpdateImage(o,a,n,s,l){if(o)if(typeof o=="string"){if(a&&a.__zrImageSrc===o||!n)return a;var c=globalImageCache.get(o),u={hostEl:n,cb:s,cbPayload:l};return c?(a=c.image,!isImageReady(a)&&c.pending.push(u)):(a=platformApi.loadImage(o,imageOnLoad,imageOnLoad),a.__zrImageSrc=o,globalImageCache.put(o,a.__cachedImgObj={image:a,pending:[u]})),a}else return o;else return a}function imageOnLoad(){var o=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var a=0;a<o.pending.length;a++){var n=o.pending[a],s=n.cb;s&&s(this,n.cbPayload),n.hostEl.dirty()}o.pending.length=0}function isImageReady(o){return o&&o.width&&o.height}var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function truncateText(o,a,n,s,l){var c={};return truncateText2(c,o,a,n,s,l),c.text}function truncateText2(o,a,n,s,l,c){if(!n){o.text="",o.isTruncated=!1;return}var u=(a+"").split(`
`);c=prepareTruncateOptions(n,s,l,c);for(var d=!1,h={},f=0,p=u.length;f<p;f++)truncateSingleLine(h,u[f],c),u[f]=h.textLine,d=d||h.isTruncated;o.text=u.join(`
`),o.isTruncated=d}function prepareTruncateOptions(o,a,n,s){s=s||{};var l=extend({},s);l.font=a,n=retrieve2(n,"..."),l.maxIterations=retrieve2(s.maxIterations,2);var c=l.minChar=retrieve2(s.minChar,0);l.cnCharWidth=getWidth("国",a);var u=l.ascCharWidth=getWidth("a",a);l.placeholder=retrieve2(s.placeholder,"");for(var d=o=Math.max(0,o-1),h=0;h<c&&d>=u;h++)d-=u;var f=getWidth(n,a);return f>d&&(n="",f=0),d=o-f,l.ellipsis=n,l.ellipsisWidth=f,l.contentWidth=d,l.containerWidth=o,l}function truncateSingleLine(o,a,n){var s=n.containerWidth,l=n.font,c=n.contentWidth;if(!s){o.textLine="",o.isTruncated=!1;return}var u=getWidth(a,l);if(u<=s){o.textLine=a,o.isTruncated=!1;return}for(var d=0;;d++){if(u<=c||d>=n.maxIterations){a+=n.ellipsis;break}var h=d===0?estimateLength(a,c,n.ascCharWidth,n.cnCharWidth):u>0?Math.floor(a.length*c/u):0;a=a.substr(0,h),u=getWidth(a,l)}a===""&&(a=n.placeholder),o.textLine=a,o.isTruncated=!0}function estimateLength(o,a,n,s){for(var l=0,c=0,u=o.length;c<u&&l<a;c++){var d=o.charCodeAt(c);l+=0<=d&&d<=127?n:s}return c}function parsePlainText(o,a){o!=null&&(o+="");var n=a.overflow,s=a.padding,l=a.font,c=n==="truncate",u=getLineHeight(l),d=retrieve2(a.lineHeight,u),h=!!a.backgroundColor,f=a.lineOverflow==="truncate",p=!1,g=a.width,v;g!=null&&(n==="break"||n==="breakAll")?v=o?wrapText(o,a.font,g,n==="breakAll",0).lines:[]:v=o?o.split(`
`):[];var b=v.length*d,w=retrieve2(a.height,b);if(b>w&&f){var x=Math.floor(w/d);p=p||v.length>x,v=v.slice(0,x)}if(o&&c&&g!=null)for(var S=prepareTruncateOptions(g,l,a.ellipsis,{minChar:a.truncateMinChar,placeholder:a.placeholder}),E={},T=0;T<v.length;T++)truncateSingleLine(E,v[T],S),v[T]=E.textLine,p=p||E.isTruncated;for(var C=w,A=0,T=0;T<v.length;T++)A=Math.max(getWidth(v[T],l),A);g==null&&(g=A);var R=A;return s&&(C+=s[0]+s[2],R+=s[1]+s[3],g+=s[1]+s[3]),h&&(R=g),{lines:v,height:w,outerWidth:R,outerHeight:C,lineHeight:d,calculatedLineHeight:u,contentWidth:A,contentHeight:b,width:g,isTruncated:p}}var RichTextToken=function(){function o(){}return o}(),RichTextLine=function(){function o(a){this.tokens=[],a&&(this.tokens=a)}return o}(),RichTextContentBlock=function(){function o(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[],this.isTruncated=!1}return o}();function parseRichText(o,a){var n=new RichTextContentBlock;if(o!=null&&(o+=""),!o)return n;for(var s=a.width,l=a.height,c=a.overflow,u=(c==="break"||c==="breakAll")&&s!=null?{width:s,accumWidth:0,breakAll:c==="breakAll"}:null,d=STYLE_REG.lastIndex=0,h;(h=STYLE_REG.exec(o))!=null;){var f=h.index;f>d&&pushTokens(n,o.substring(d,f),a,u),pushTokens(n,h[2],a,u,h[1]),d=STYLE_REG.lastIndex}d<o.length&&pushTokens(n,o.substring(d,o.length),a,u);var p=[],g=0,v=0,b=a.padding,w=c==="truncate",x=a.lineOverflow==="truncate",S={};function E(ae,pe,ie){ae.width=pe,ae.lineHeight=ie,g+=ie,v=Math.max(v,pe)}e:for(var T=0;T<n.lines.length;T++){for(var C=n.lines[T],A=0,R=0,j=0;j<C.tokens.length;j++){var D=C.tokens[j],O=D.styleName&&a.rich[D.styleName]||{},H=D.textPadding=O.padding,q=H?H[1]+H[3]:0,Y=D.font=O.font||a.font;D.contentHeight=getLineHeight(Y);var te=retrieve2(O.height,D.contentHeight);if(D.innerHeight=te,H&&(te+=H[0]+H[2]),D.height=te,D.lineHeight=retrieve3(O.lineHeight,a.lineHeight,te),D.align=O&&O.align||a.align,D.verticalAlign=O&&O.verticalAlign||"middle",x&&l!=null&&g+D.lineHeight>l){var ee=n.lines.length;j>0?(C.tokens=C.tokens.slice(0,j),E(C,R,A),n.lines=n.lines.slice(0,T+1)):n.lines=n.lines.slice(0,T),n.isTruncated=n.isTruncated||n.lines.length<ee;break e}var re=O.width,ne=re==null||re==="auto";if(typeof re=="string"&&re.charAt(re.length-1)==="%")D.percentWidth=re,p.push(D),D.contentWidth=getWidth(D.text,Y);else{if(ne){var ce=O.backgroundColor,ve=ce&&ce.image;ve&&(ve=findExistImage(ve),isImageReady(ve)&&(D.width=Math.max(D.width,ve.width*te/ve.height)))}var be=w&&s!=null?s-R:null;be!=null&&be<D.width?!ne||be<q?(D.text="",D.width=D.contentWidth=0):(truncateText2(S,D.text,be-q,Y,a.ellipsis,{minChar:a.truncateMinChar}),D.text=S.text,n.isTruncated=n.isTruncated||S.isTruncated,D.width=D.contentWidth=getWidth(D.text,Y)):D.contentWidth=getWidth(D.text,Y)}D.width+=q,R+=D.width,O&&(A=Math.max(A,D.lineHeight))}E(C,R,A)}n.outerWidth=n.width=retrieve2(s,v),n.outerHeight=n.height=retrieve2(l,g),n.contentHeight=g,n.contentWidth=v,b&&(n.outerWidth+=b[1]+b[3],n.outerHeight+=b[0]+b[2]);for(var T=0;T<p.length;T++){var D=p[T],me=D.percentWidth;D.width=parseInt(me,10)/100*n.width}return n}function pushTokens(o,a,n,s,l){var c=a==="",u=l&&n.rich[l]||{},d=o.lines,h=u.font||n.font,f=!1,p,g;if(s){var v=u.padding,b=v?v[1]+v[3]:0;if(u.width!=null&&u.width!=="auto"){var w=parsePercent$1(u.width,s.width)+b;d.length>0&&w+s.accumWidth>s.width&&(p=a.split(`
`),f=!0),s.accumWidth=w}else{var x=wrapText(a,h,s.width,s.breakAll,s.accumWidth);s.accumWidth=x.accumWidth+b,g=x.linesWidths,p=x.lines}}else p=a.split(`
`);for(var S=0;S<p.length;S++){var E=p[S],T=new RichTextToken;if(T.styleName=l,T.text=E,T.isLineHolder=!E&&!c,typeof u.width=="number"?T.width=u.width:T.width=g?g[S]:getWidth(E,h),!S&&!f){var C=(d[d.length-1]||(d[0]=new RichTextLine)).tokens,A=C.length;A===1&&C[0].isLineHolder?C[0]=T:(E||!A||c)&&C.push(T)}else d.push(new RichTextLine([T]))}}function isAlphabeticLetter(o){var a=o.charCodeAt(0);return a>=32&&a<=591||a>=880&&a<=4351||a>=4608&&a<=5119||a>=7680&&a<=8303}var breakCharMap=reduce(",&?/;] ".split(""),function(o,a){return o[a]=!0,o},{});function isWordBreakChar(o){return isAlphabeticLetter(o)?!!breakCharMap[o]:!0}function wrapText(o,a,n,s,l){for(var c=[],u=[],d="",h="",f=0,p=0,g=0;g<o.length;g++){var v=o.charAt(g);if(v===`
`){h&&(d+=h,p+=f),c.push(d),u.push(p),d="",h="",f=0,p=0;continue}var b=getWidth(v,a),w=s?!1:!isWordBreakChar(v);if(c.length?p+b>n:l+p+b>n){p?(d||h)&&(w?(d||(d=h,h="",f=0,p=f),c.push(d),u.push(p-f),h+=v,f+=b,d="",p=f):(h&&(d+=h,h="",f=0),c.push(d),u.push(p),d=v,p=b)):w?(c.push(h),u.push(f),h=v,f=b):(c.push(v),u.push(b));continue}p+=b,w?(h+=v,f+=b):(h&&(d+=h,h="",f=0),d+=v)}return!c.length&&!d&&(d=o,h="",f=0),h&&(d+=h),d&&(c.push(d),u.push(p)),c.length===1&&(p+=l),{accumWidth:p,lines:c,linesWidths:u}}var STYLE_MAGIC_KEY="__zr_style_"+Math.round(Math.random()*10),DEFAULT_COMMON_STYLE={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},DEFAULT_COMMON_ANIMATION_PROPS={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};DEFAULT_COMMON_STYLE[STYLE_MAGIC_KEY]=!0;var PRIMARY_STATES_KEYS=["z","z2","invisible"],PRIMARY_STATES_KEYS_IN_HOVER_LAYER=["invisible"],Displayable=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype._init=function(n){for(var s=keys$1(n),l=0;l<s.length;l++){var c=s[l];c==="style"?this.useStyle(n[c]):o.prototype.attrKV.call(this,c,n[c])}this.style||this.useStyle({})},a.prototype.beforeBrush=function(){},a.prototype.afterBrush=function(){},a.prototype.innerBeforeBrush=function(){},a.prototype.innerAfterBrush=function(){},a.prototype.shouldBePainted=function(n,s,l,c){var u=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&isDisplayableCulled(this,n,s)||u&&!u[0]&&!u[3])return!1;if(l&&this.__clipPaths){for(var d=0;d<this.__clipPaths.length;++d)if(this.__clipPaths[d].isZeroArea())return!1}if(c&&this.parent)for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}return!0},a.prototype.contain=function(n,s){return this.rectContain(n,s)},a.prototype.traverse=function(n,s){n.call(s,this)},a.prototype.rectContain=function(n,s){var l=this.transformCoordToLocal(n,s),c=this.getBoundingRect();return c.contain(l[0],l[1])},a.prototype.getPaintRect=function(){var n=this._paintRect;if(!this._paintRect||this.__dirty){var s=this.transform,l=this.getBoundingRect(),c=this.style,u=c.shadowBlur||0,d=c.shadowOffsetX||0,h=c.shadowOffsetY||0;n=this._paintRect||(this._paintRect=new BoundingRect(0,0,0,0)),s?BoundingRect.applyTransform(n,l,s):n.copy(l),(u||d||h)&&(n.width+=u*2+Math.abs(d),n.height+=u*2+Math.abs(h),n.x=Math.min(n.x,n.x+d-u),n.y=Math.min(n.y,n.y+h-u));var f=this.dirtyRectTolerance;n.isZero()||(n.x=Math.floor(n.x-f),n.y=Math.floor(n.y-f),n.width=Math.ceil(n.width+1+f*2),n.height=Math.ceil(n.height+1+f*2))}return n},a.prototype.setPrevPaintRect=function(n){n?(this._prevPaintRect=this._prevPaintRect||new BoundingRect(0,0,0,0),this._prevPaintRect.copy(n)):this._prevPaintRect=null},a.prototype.getPrevPaintRect=function(){return this._prevPaintRect},a.prototype.animateStyle=function(n){return this.animate("style",n)},a.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():this.markRedraw()},a.prototype.attrKV=function(n,s){n!=="style"?o.prototype.attrKV.call(this,n,s):this.style?this.setStyle(s):this.useStyle(s)},a.prototype.setStyle=function(n,s){return typeof n=="string"?this.style[n]=s:extend(this.style,n),this.dirtyStyle(),this},a.prototype.dirtyStyle=function(n){n||this.markRedraw(),this.__dirty|=STYLE_CHANGED_BIT,this._rect&&(this._rect=null)},a.prototype.dirty=function(){this.dirtyStyle()},a.prototype.styleChanged=function(){return!!(this.__dirty&STYLE_CHANGED_BIT)},a.prototype.styleUpdated=function(){this.__dirty&=~STYLE_CHANGED_BIT},a.prototype.createStyle=function(n){return createObject(DEFAULT_COMMON_STYLE,n)},a.prototype.useStyle=function(n){n[STYLE_MAGIC_KEY]||(n=this.createStyle(n)),this.__inHover?this.__hoverStyle=n:this.style=n,this.dirtyStyle()},a.prototype.isStyleObject=function(n){return n[STYLE_MAGIC_KEY]},a.prototype._innerSaveToNormal=function(n){o.prototype._innerSaveToNormal.call(this,n);var s=this._normalState;n.style&&!s.style&&(s.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(n,s,PRIMARY_STATES_KEYS)},a.prototype._applyStateObj=function(n,s,l,c,u,d){o.prototype._applyStateObj.call(this,n,s,l,c,u,d);var h=!(s&&c),f;if(s&&s.style?u?c?f=s.style:(f=this._mergeStyle(this.createStyle(),l.style),this._mergeStyle(f,s.style)):(f=this._mergeStyle(this.createStyle(),c?this.style:l.style),this._mergeStyle(f,s.style)):h&&(f=l.style),f)if(u){var p=this.style;if(this.style=this.createStyle(h?{}:p),h)for(var g=keys$1(p),v=0;v<g.length;v++){var b=g[v];b in f&&(f[b]=f[b],this.style[b]=p[b])}for(var w=keys$1(f),v=0;v<w.length;v++){var b=w[v];this.style[b]=this.style[b]}this._transitionState(n,{style:f},d,this.getAnimationStyleProps())}else this.useStyle(f);for(var x=this.__inHover?PRIMARY_STATES_KEYS_IN_HOVER_LAYER:PRIMARY_STATES_KEYS,v=0;v<x.length;v++){var b=x[v];s&&s[b]!=null?this[b]=s[b]:h&&l[b]!=null&&(this[b]=l[b])}},a.prototype._mergeStates=function(n){for(var s=o.prototype._mergeStates.call(this,n),l,c=0;c<n.length;c++){var u=n[c];u.style&&(l=l||{},this._mergeStyle(l,u.style))}return l&&(s.style=l),s},a.prototype._mergeStyle=function(n,s){return extend(n,s),n},a.prototype.getAnimationStyleProps=function(){return DEFAULT_COMMON_ANIMATION_PROPS},a.initDefaultProps=function(){var n=a.prototype;n.type="displayable",n.invisible=!1,n.z=0,n.z2=0,n.zlevel=0,n.culling=!1,n.cursor="pointer",n.rectHover=!1,n.incremental=!1,n._rect=null,n.dirtyRectTolerance=0,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT}(),a}(Element),tmpRect=new BoundingRect(0,0,0,0),viewRect=new BoundingRect(0,0,0,0);function isDisplayableCulled(o,a,n){return tmpRect.copy(o.getBoundingRect()),o.transform&&tmpRect.applyTransform(o.transform),viewRect.width=a,viewRect.height=n,!tmpRect.intersect(viewRect)}var mathMin$9=Math.min,mathMax$9=Math.max,mathSin$4=Math.sin,mathCos$4=Math.cos,PI2$8=Math.PI*2,start=create$2(),end=create$2(),extremity=create$2();function fromPoints(o,a,n){if(o.length!==0){for(var s=o[0],l=s[0],c=s[0],u=s[1],d=s[1],h=1;h<o.length;h++)s=o[h],l=mathMin$9(l,s[0]),c=mathMax$9(c,s[0]),u=mathMin$9(u,s[1]),d=mathMax$9(d,s[1]);a[0]=l,a[1]=u,n[0]=c,n[1]=d}}function fromLine(o,a,n,s,l,c){l[0]=mathMin$9(o,n),l[1]=mathMin$9(a,s),c[0]=mathMax$9(o,n),c[1]=mathMax$9(a,s)}var xDim=[],yDim=[];function fromCubic(o,a,n,s,l,c,u,d,h,f){var p=cubicExtrema,g=cubicAt,v=p(o,n,l,u,xDim);h[0]=1/0,h[1]=1/0,f[0]=-1/0,f[1]=-1/0;for(var b=0;b<v;b++){var w=g(o,n,l,u,xDim[b]);h[0]=mathMin$9(w,h[0]),f[0]=mathMax$9(w,f[0])}v=p(a,s,c,d,yDim);for(var b=0;b<v;b++){var x=g(a,s,c,d,yDim[b]);h[1]=mathMin$9(x,h[1]),f[1]=mathMax$9(x,f[1])}h[0]=mathMin$9(o,h[0]),f[0]=mathMax$9(o,f[0]),h[0]=mathMin$9(u,h[0]),f[0]=mathMax$9(u,f[0]),h[1]=mathMin$9(a,h[1]),f[1]=mathMax$9(a,f[1]),h[1]=mathMin$9(d,h[1]),f[1]=mathMax$9(d,f[1])}function fromQuadratic(o,a,n,s,l,c,u,d){var h=quadraticExtremum,f=quadraticAt$1,p=mathMax$9(mathMin$9(h(o,n,l),1),0),g=mathMax$9(mathMin$9(h(a,s,c),1),0),v=f(o,n,l,p),b=f(a,s,c,g);u[0]=mathMin$9(o,l,v),u[1]=mathMin$9(a,c,b),d[0]=mathMax$9(o,l,v),d[1]=mathMax$9(a,c,b)}function fromArc(o,a,n,s,l,c,u,d,h){var f=min$1,p=max$1,g=Math.abs(l-c);if(g%PI2$8<1e-4&&g>1e-4){d[0]=o-n,d[1]=a-s,h[0]=o+n,h[1]=a+s;return}if(start[0]=mathCos$4(l)*n+o,start[1]=mathSin$4(l)*s+a,end[0]=mathCos$4(c)*n+o,end[1]=mathSin$4(c)*s+a,f(d,start,end),p(h,start,end),l=l%PI2$8,l<0&&(l=l+PI2$8),c=c%PI2$8,c<0&&(c=c+PI2$8),l>c&&!u?c+=PI2$8:l<c&&u&&(l+=PI2$8),u){var v=c;c=l,l=v}for(var b=0;b<c;b+=Math.PI/2)b>l&&(extremity[0]=mathCos$4(b)*n+o,extremity[1]=mathSin$4(b)*s+a,f(d,extremity,d),p(h,extremity,h))}var CMD$4={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tmpOutX=[],tmpOutY=[],min=[],max=[],min2=[],max2=[],mathMin$8=Math.min,mathMax$8=Math.max,mathCos$3=Math.cos,mathSin$3=Math.sin,mathAbs$2=Math.abs,PI$8=Math.PI,PI2$7=PI$8*2,hasTypedArray=typeof Float32Array<"u",tmpAngles=[];function modPI2(o){var a=Math.round(o/PI$8*1e8)/1e8;return a%2*PI$8}function normalizeArcAngles(o,a){var n=modPI2(o[0]);n<0&&(n+=PI2$7);var s=n-o[0],l=o[1];l+=s,!a&&l-n>=PI2$7?l=n+PI2$7:a&&n-l>=PI2$7?l=n-PI2$7:!a&&n>l?l=n+(PI2$7-modPI2(n-l)):a&&n<l&&(l=n-(PI2$7-modPI2(l-n))),o[0]=n,o[1]=l}var PathProxy=function(){function o(a){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,a&&(this._saveData=!1),this._saveData&&(this.data=[])}return o.prototype.increaseVersion=function(){this._version++},o.prototype.getVersion=function(){return this._version},o.prototype.setScale=function(a,n,s){s=s||0,s>0&&(this._ux=mathAbs$2(s/devicePixelRatio/a)||0,this._uy=mathAbs$2(s/devicePixelRatio/n)||0)},o.prototype.setDPR=function(a){this.dpr=a},o.prototype.setContext=function(a){this._ctx=a},o.prototype.getContext=function(){return this._ctx},o.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},o.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},o.prototype.moveTo=function(a,n){return this._drawPendingPt(),this.addData(CMD$4.M,a,n),this._ctx&&this._ctx.moveTo(a,n),this._x0=a,this._y0=n,this._xi=a,this._yi=n,this},o.prototype.lineTo=function(a,n){var s=mathAbs$2(a-this._xi),l=mathAbs$2(n-this._yi),c=s>this._ux||l>this._uy;if(this.addData(CMD$4.L,a,n),this._ctx&&c&&this._ctx.lineTo(a,n),c)this._xi=a,this._yi=n,this._pendingPtDist=0;else{var u=s*s+l*l;u>this._pendingPtDist&&(this._pendingPtX=a,this._pendingPtY=n,this._pendingPtDist=u)}return this},o.prototype.bezierCurveTo=function(a,n,s,l,c,u){return this._drawPendingPt(),this.addData(CMD$4.C,a,n,s,l,c,u),this._ctx&&this._ctx.bezierCurveTo(a,n,s,l,c,u),this._xi=c,this._yi=u,this},o.prototype.quadraticCurveTo=function(a,n,s,l){return this._drawPendingPt(),this.addData(CMD$4.Q,a,n,s,l),this._ctx&&this._ctx.quadraticCurveTo(a,n,s,l),this._xi=s,this._yi=l,this},o.prototype.arc=function(a,n,s,l,c,u){this._drawPendingPt(),tmpAngles[0]=l,tmpAngles[1]=c,normalizeArcAngles(tmpAngles,u),l=tmpAngles[0],c=tmpAngles[1];var d=c-l;return this.addData(CMD$4.A,a,n,s,s,l,d,0,u?0:1),this._ctx&&this._ctx.arc(a,n,s,l,c,u),this._xi=mathCos$3(c)*s+a,this._yi=mathSin$3(c)*s+n,this},o.prototype.arcTo=function(a,n,s,l,c){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(a,n,s,l,c),this},o.prototype.rect=function(a,n,s,l){return this._drawPendingPt(),this._ctx&&this._ctx.rect(a,n,s,l),this.addData(CMD$4.R,a,n,s,l),this},o.prototype.closePath=function(){this._drawPendingPt(),this.addData(CMD$4.Z);var a=this._ctx,n=this._x0,s=this._y0;return a&&a.closePath(),this._xi=n,this._yi=s,this},o.prototype.fill=function(a){a&&a.fill(),this.toStatic()},o.prototype.stroke=function(a){a&&a.stroke(),this.toStatic()},o.prototype.len=function(){return this._len},o.prototype.setData=function(a){var n=a.length;!(this.data&&this.data.length===n)&&hasTypedArray&&(this.data=new Float32Array(n));for(var s=0;s<n;s++)this.data[s]=a[s];this._len=n},o.prototype.appendPath=function(a){a instanceof Array||(a=[a]);for(var n=a.length,s=0,l=this._len,c=0;c<n;c++)s+=a[c].len();hasTypedArray&&this.data instanceof Float32Array&&(this.data=new Float32Array(l+s));for(var c=0;c<n;c++)for(var u=a[c].data,d=0;d<u.length;d++)this.data[l++]=u[d];this._len=l},o.prototype.addData=function(a,n,s,l,c,u,d,h,f){if(this._saveData){var p=this.data;this._len+arguments.length>p.length&&(this._expandData(),p=this.data);for(var g=0;g<arguments.length;g++)p[this._len++]=arguments[g]}},o.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},o.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var a=[],n=0;n<this._len;n++)a[n]=this.data[n];this.data=a}},o.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var a=this.data;a instanceof Array&&(a.length=this._len,hasTypedArray&&this._len>11&&(this.data=new Float32Array(a)))}},o.prototype.getBoundingRect=function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE,max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var a=this.data,n=0,s=0,l=0,c=0,u;for(u=0;u<this._len;){var d=a[u++],h=u===1;switch(h&&(n=a[u],s=a[u+1],l=n,c=s),d){case CMD$4.M:n=l=a[u++],s=c=a[u++],min2[0]=l,min2[1]=c,max2[0]=l,max2[1]=c;break;case CMD$4.L:fromLine(n,s,a[u],a[u+1],min2,max2),n=a[u++],s=a[u++];break;case CMD$4.C:fromCubic(n,s,a[u++],a[u++],a[u++],a[u++],a[u],a[u+1],min2,max2),n=a[u++],s=a[u++];break;case CMD$4.Q:fromQuadratic(n,s,a[u++],a[u++],a[u],a[u+1],min2,max2),n=a[u++],s=a[u++];break;case CMD$4.A:var f=a[u++],p=a[u++],g=a[u++],v=a[u++],b=a[u++],w=a[u++]+b;u+=1;var x=!a[u++];h&&(l=mathCos$3(b)*g+f,c=mathSin$3(b)*v+p),fromArc(f,p,g,v,b,w,x,min2,max2),n=mathCos$3(w)*g+f,s=mathSin$3(w)*v+p;break;case CMD$4.R:l=n=a[u++],c=s=a[u++];var S=a[u++],E=a[u++];fromLine(l,c,l+S,c+E,min2,max2);break;case CMD$4.Z:n=l,s=c;break}min$1(min,min,min2),max$1(max,max,max2)}return u===0&&(min[0]=min[1]=max[0]=max[1]=0),new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},o.prototype._calculateLength=function(){var a=this.data,n=this._len,s=this._ux,l=this._uy,c=0,u=0,d=0,h=0;this._pathSegLen||(this._pathSegLen=[]);for(var f=this._pathSegLen,p=0,g=0,v=0;v<n;){var b=a[v++],w=v===1;w&&(c=a[v],u=a[v+1],d=c,h=u);var x=-1;switch(b){case CMD$4.M:c=d=a[v++],u=h=a[v++];break;case CMD$4.L:{var S=a[v++],E=a[v++],T=S-c,C=E-u;(mathAbs$2(T)>s||mathAbs$2(C)>l||v===n-1)&&(x=Math.sqrt(T*T+C*C),c=S,u=E);break}case CMD$4.C:{var A=a[v++],R=a[v++],S=a[v++],E=a[v++],j=a[v++],D=a[v++];x=cubicLength(c,u,A,R,S,E,j,D,10),c=j,u=D;break}case CMD$4.Q:{var A=a[v++],R=a[v++],S=a[v++],E=a[v++];x=quadraticLength(c,u,A,R,S,E,10),c=S,u=E;break}case CMD$4.A:var O=a[v++],H=a[v++],q=a[v++],Y=a[v++],te=a[v++],ee=a[v++],re=ee+te;v+=1,w&&(d=mathCos$3(te)*q+O,h=mathSin$3(te)*Y+H),x=mathMax$8(q,Y)*mathMin$8(PI2$7,Math.abs(ee)),c=mathCos$3(re)*q+O,u=mathSin$3(re)*Y+H;break;case CMD$4.R:{d=c=a[v++],h=u=a[v++];var ne=a[v++],ce=a[v++];x=ne*2+ce*2;break}case CMD$4.Z:{var T=d-c,C=h-u;x=Math.sqrt(T*T+C*C),c=d,u=h;break}}x>=0&&(f[g++]=x,p+=x)}return this._pathLen=p,p},o.prototype.rebuildPath=function(a,n){var s=this.data,l=this._ux,c=this._uy,u=this._len,d,h,f,p,g,v,b=n<1,w,x,S=0,E=0,T,C=0,A,R;if(!(b&&(this._pathSegLen||this._calculateLength(),w=this._pathSegLen,x=this._pathLen,T=n*x,!T)))e:for(var j=0;j<u;){var D=s[j++],O=j===1;switch(O&&(f=s[j],p=s[j+1],d=f,h=p),D!==CMD$4.L&&C>0&&(a.lineTo(A,R),C=0),D){case CMD$4.M:d=f=s[j++],h=p=s[j++],a.moveTo(f,p);break;case CMD$4.L:{g=s[j++],v=s[j++];var H=mathAbs$2(g-f),q=mathAbs$2(v-p);if(H>l||q>c){if(b){var Y=w[E++];if(S+Y>T){var te=(T-S)/Y;a.lineTo(f*(1-te)+g*te,p*(1-te)+v*te);break e}S+=Y}a.lineTo(g,v),f=g,p=v,C=0}else{var ee=H*H+q*q;ee>C&&(A=g,R=v,C=ee)}break}case CMD$4.C:{var re=s[j++],ne=s[j++],ce=s[j++],ve=s[j++],be=s[j++],me=s[j++];if(b){var Y=w[E++];if(S+Y>T){var te=(T-S)/Y;cubicSubdivide(f,re,ce,be,te,tmpOutX),cubicSubdivide(p,ne,ve,me,te,tmpOutY),a.bezierCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2],tmpOutX[3],tmpOutY[3]);break e}S+=Y}a.bezierCurveTo(re,ne,ce,ve,be,me),f=be,p=me;break}case CMD$4.Q:{var re=s[j++],ne=s[j++],ce=s[j++],ve=s[j++];if(b){var Y=w[E++];if(S+Y>T){var te=(T-S)/Y;quadraticSubdivide(f,re,ce,te,tmpOutX),quadraticSubdivide(p,ne,ve,te,tmpOutY),a.quadraticCurveTo(tmpOutX[1],tmpOutY[1],tmpOutX[2],tmpOutY[2]);break e}S+=Y}a.quadraticCurveTo(re,ne,ce,ve),f=ce,p=ve;break}case CMD$4.A:var ae=s[j++],pe=s[j++],ie=s[j++],se=s[j++],de=s[j++],le=s[j++],ge=s[j++],Re=!s[j++],we=ie>se?ie:se,Se=mathAbs$2(ie-se)>.001,xe=de+le,ke=!1;if(b){var Y=w[E++];S+Y>T&&(xe=de+le*(T-S)/Y,ke=!0),S+=Y}if(Se&&a.ellipse?a.ellipse(ae,pe,ie,se,ge,de,xe,Re):a.arc(ae,pe,we,de,xe,Re),ke)break e;O&&(d=mathCos$3(de)*ie+ae,h=mathSin$3(de)*se+pe),f=mathCos$3(xe)*ie+ae,p=mathSin$3(xe)*se+pe;break;case CMD$4.R:d=f=s[j],h=p=s[j+1],g=s[j++],v=s[j++];var Ie=s[j++],He=s[j++];if(b){var Y=w[E++];if(S+Y>T){var Le=T-S;a.moveTo(g,v),a.lineTo(g+mathMin$8(Le,Ie),v),Le-=Ie,Le>0&&a.lineTo(g+Ie,v+mathMin$8(Le,He)),Le-=He,Le>0&&a.lineTo(g+mathMax$8(Ie-Le,0),v+He),Le-=Ie,Le>0&&a.lineTo(g,v+mathMax$8(He-Le,0));break e}S+=Y}a.rect(g,v,Ie,He);break;case CMD$4.Z:if(b){var Y=w[E++];if(S+Y>T){var te=(T-S)/Y;a.lineTo(f*(1-te)+d*te,p*(1-te)+h*te);break e}S+=Y}a.closePath(),f=d,p=h}}},o.prototype.clone=function(){var a=new o,n=this.data;return a.data=n.slice?n.slice():Array.prototype.slice.call(n),a._len=this._len,a},o.CMD=CMD$4,o.initDefaultProps=function(){var a=o.prototype;a._saveData=!0,a._ux=0,a._uy=0,a._pendingPtDist=0,a._version=0}(),o}();function containStroke$4(o,a,n,s,l,c,u){if(l===0)return!1;var d=l,h=0,f=o;if(u>a+d&&u>s+d||u<a-d&&u<s-d||c>o+d&&c>n+d||c<o-d&&c<n-d)return!1;if(o!==n)h=(a-s)/(o-n),f=(o*s-n*a)/(o-n);else return Math.abs(c-o)<=d/2;var p=h*c-u+f,g=p*p/(h*h+1);return g<=d/2*d/2}function containStroke$3(o,a,n,s,l,c,u,d,h,f,p){if(h===0)return!1;var g=h;if(p>a+g&&p>s+g&&p>c+g&&p>d+g||p<a-g&&p<s-g&&p<c-g&&p<d-g||f>o+g&&f>n+g&&f>l+g&&f>u+g||f<o-g&&f<n-g&&f<l-g&&f<u-g)return!1;var v=cubicProjectPoint(o,a,n,s,l,c,u,d,f,p,null);return v<=g/2}function containStroke$2(o,a,n,s,l,c,u,d,h){if(u===0)return!1;var f=u;if(h>a+f&&h>s+f&&h>c+f||h<a-f&&h<s-f&&h<c-f||d>o+f&&d>n+f&&d>l+f||d<o-f&&d<n-f&&d<l-f)return!1;var p=quadraticProjectPoint(o,a,n,s,l,c,d,h,null);return p<=f/2}var PI2$6=Math.PI*2;function normalizeRadian(o){return o%=PI2$6,o<0&&(o+=PI2$6),o}var PI2$5=Math.PI*2;function containStroke$1(o,a,n,s,l,c,u,d,h){if(u===0)return!1;var f=u;d-=o,h-=a;var p=Math.sqrt(d*d+h*h);if(p-f>n||p+f<n)return!1;if(Math.abs(s-l)%PI2$5<1e-4)return!0;if(c){var g=s;s=normalizeRadian(l),l=normalizeRadian(g)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$5);var v=Math.atan2(h,d);return v<0&&(v+=PI2$5),v>=s&&v<=l||v+PI2$5>=s&&v+PI2$5<=l}function windingLine(o,a,n,s,l,c){if(c>a&&c>s||c<a&&c<s||s===a)return 0;var u=(c-a)/(s-a),d=s<a?1:-1;(u===1||u===0)&&(d=s<a?.5:-.5);var h=u*(n-o)+o;return h===l?1/0:h>l?d:0}var CMD$3=PathProxy.CMD,PI2$4=Math.PI*2,EPSILON$1=1e-4;function isAroundEqual$1(o,a){return Math.abs(o-a)<EPSILON$1}var roots=[-1,-1,-1],extrema=[-1,-1];function swapExtrema(){var o=extrema[0];extrema[0]=extrema[1],extrema[1]=o}function windingCubic(o,a,n,s,l,c,u,d,h,f){if(f>a&&f>s&&f>c&&f>d||f<a&&f<s&&f<c&&f<d)return 0;var p=cubicRootAt(a,s,c,d,f,roots);if(p===0)return 0;for(var g=0,v=-1,b=void 0,w=void 0,x=0;x<p;x++){var S=roots[x],E=S===0||S===1?.5:1,T=cubicAt(o,n,l,u,S);T<h||(v<0&&(v=cubicExtrema(a,s,c,d,extrema),extrema[1]<extrema[0]&&v>1&&swapExtrema(),b=cubicAt(a,s,c,d,extrema[0]),v>1&&(w=cubicAt(a,s,c,d,extrema[1]))),v===2?S<extrema[0]?g+=b<a?E:-E:S<extrema[1]?g+=w<b?E:-E:g+=d<w?E:-E:S<extrema[0]?g+=b<a?E:-E:g+=d<b?E:-E)}return g}function windingQuadratic(o,a,n,s,l,c,u,d){if(d>a&&d>s&&d>c||d<a&&d<s&&d<c)return 0;var h=quadraticRootAt(a,s,c,d,roots);if(h===0)return 0;var f=quadraticExtremum(a,s,c);if(f>=0&&f<=1){for(var p=0,g=quadraticAt$1(a,s,c,f),v=0;v<h;v++){var b=roots[v]===0||roots[v]===1?.5:1,w=quadraticAt$1(o,n,l,roots[v]);w<u||(roots[v]<f?p+=g<a?b:-b:p+=c<g?b:-b)}return p}else{var b=roots[0]===0||roots[0]===1?.5:1,w=quadraticAt$1(o,n,l,roots[0]);return w<u?0:c<a?b:-b}}function windingArc(o,a,n,s,l,c,u,d){if(d-=a,d>n||d<-n)return 0;var h=Math.sqrt(n*n-d*d);roots[0]=-h,roots[1]=h;var f=Math.abs(s-l);if(f<1e-4)return 0;if(f>=PI2$4-1e-4){s=0,l=PI2$4;var p=c?1:-1;return u>=roots[0]+o&&u<=roots[1]+o?p:0}if(s>l){var g=s;s=l,l=g}s<0&&(s+=PI2$4,l+=PI2$4);for(var v=0,b=0;b<2;b++){var w=roots[b];if(w+o>u){var x=Math.atan2(d,w),p=c?1:-1;x<0&&(x=PI2$4+x),(x>=s&&x<=l||x+PI2$4>=s&&x+PI2$4<=l)&&(x>Math.PI/2&&x<Math.PI*1.5&&(p=-p),v+=p)}}return v}function containPath(o,a,n,s,l){for(var c=o.data,u=o.len(),d=0,h=0,f=0,p=0,g=0,v,b,w=0;w<u;){var x=c[w++],S=w===1;switch(x===CMD$3.M&&w>1&&(n||(d+=windingLine(h,f,p,g,s,l))),S&&(h=c[w],f=c[w+1],p=h,g=f),x){case CMD$3.M:p=c[w++],g=c[w++],h=p,f=g;break;case CMD$3.L:if(n){if(containStroke$4(h,f,c[w],c[w+1],a,s,l))return!0}else d+=windingLine(h,f,c[w],c[w+1],s,l)||0;h=c[w++],f=c[w++];break;case CMD$3.C:if(n){if(containStroke$3(h,f,c[w++],c[w++],c[w++],c[w++],c[w],c[w+1],a,s,l))return!0}else d+=windingCubic(h,f,c[w++],c[w++],c[w++],c[w++],c[w],c[w+1],s,l)||0;h=c[w++],f=c[w++];break;case CMD$3.Q:if(n){if(containStroke$2(h,f,c[w++],c[w++],c[w],c[w+1],a,s,l))return!0}else d+=windingQuadratic(h,f,c[w++],c[w++],c[w],c[w+1],s,l)||0;h=c[w++],f=c[w++];break;case CMD$3.A:var E=c[w++],T=c[w++],C=c[w++],A=c[w++],R=c[w++],j=c[w++];w+=1;var D=!!(1-c[w++]);v=Math.cos(R)*C+E,b=Math.sin(R)*A+T,S?(p=v,g=b):d+=windingLine(h,f,v,b,s,l);var O=(s-E)*A/C+E;if(n){if(containStroke$1(E,T,A,R,R+j,D,a,O,l))return!0}else d+=windingArc(E,T,A,R,R+j,D,O,l);h=Math.cos(R+j)*C+E,f=Math.sin(R+j)*A+T;break;case CMD$3.R:p=h=c[w++],g=f=c[w++];var H=c[w++],q=c[w++];if(v=p+H,b=g+q,n){if(containStroke$4(p,g,v,g,a,s,l)||containStroke$4(v,g,v,b,a,s,l)||containStroke$4(v,b,p,b,a,s,l)||containStroke$4(p,b,p,g,a,s,l))return!0}else d+=windingLine(v,g,v,b,s,l),d+=windingLine(p,b,p,g,s,l);break;case CMD$3.Z:if(n){if(containStroke$4(h,f,p,g,a,s,l))return!0}else d+=windingLine(h,f,p,g,s,l);h=p,f=g;break}}return!n&&!isAroundEqual$1(f,g)&&(d+=windingLine(h,f,p,g,s,l)||0),d!==0}function contain$2(o,a,n){return containPath(o,0,!1,a,n)}function containStroke(o,a,n,s){return containPath(o,a,!0,n,s)}var DEFAULT_PATH_STYLE=defaults({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},DEFAULT_COMMON_STYLE),DEFAULT_PATH_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},pathCopyParams=TRANSFORMABLE_PROPS.concat(["invisible","culling","z","z2","zlevel","parent"]),Path=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.update=function(){var n=this;o.prototype.update.call(this);var s=this.style;if(s.decal){var l=this._decalEl=this._decalEl||new a;l.buildPath===a.prototype.buildPath&&(l.buildPath=function(h){n.buildPath(h,n.shape)}),l.silent=!0;var c=l.style;for(var u in s)c[u]!==s[u]&&(c[u]=s[u]);c.fill=s.fill?s.decal:null,c.decal=null,c.shadowColor=null,s.strokeFirst&&(c.stroke=null);for(var d=0;d<pathCopyParams.length;++d)l[pathCopyParams[d]]=this[pathCopyParams[d]];l.__dirty|=REDRAW_BIT}else this._decalEl&&(this._decalEl=null)},a.prototype.getDecalElement=function(){return this._decalEl},a.prototype._init=function(n){var s=keys$1(n);this.shape=this.getDefaultShape();var l=this.getDefaultStyle();l&&this.useStyle(l);for(var c=0;c<s.length;c++){var u=s[c],d=n[u];u==="style"?this.style?extend(this.style,d):this.useStyle(d):u==="shape"?extend(this.shape,d):o.prototype.attrKV.call(this,u,d)}this.style||this.useStyle({})},a.prototype.getDefaultStyle=function(){return null},a.prototype.getDefaultShape=function(){return{}},a.prototype.canBeInsideText=function(){return this.hasFill()},a.prototype.getInsideTextFill=function(){var n=this.style.fill;if(n!=="none"){if(isString$2(n)){var s=lum(n,0);return s>.5?DARK_LABEL_COLOR:s>.2?LIGHTER_LABEL_COLOR:LIGHT_LABEL_COLOR}else if(n)return LIGHT_LABEL_COLOR}return DARK_LABEL_COLOR},a.prototype.getInsideTextStroke=function(n){var s=this.style.fill;if(isString$2(s)){var l=this.__zr,c=!!(l&&l.isDarkMode()),u=lum(n,0)<DARK_MODE_THRESHOLD;if(c===u)return s}},a.prototype.buildPath=function(n,s,l){},a.prototype.pathUpdated=function(){this.__dirty&=~SHAPE_CHANGED_BIT},a.prototype.getUpdatedPathProxy=function(n){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,n),this.path},a.prototype.createPathProxy=function(){this.path=new PathProxy(!1)},a.prototype.hasStroke=function(){var n=this.style,s=n.stroke;return!(s==null||s==="none"||!(n.lineWidth>0))},a.prototype.hasFill=function(){var n=this.style,s=n.fill;return s!=null&&s!=="none"},a.prototype.getBoundingRect=function(){var n=this._rect,s=this.style,l=!n;if(l){var c=!1;this.path||(c=!0,this.createPathProxy());var u=this.path;(c||this.__dirty&SHAPE_CHANGED_BIT)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),n=u.getBoundingRect()}if(this._rect=n,this.hasStroke()&&this.path&&this.path.len()>0){var d=this._rectStroke||(this._rectStroke=n.clone());if(this.__dirty||l){d.copy(n);var h=s.strokeNoScale?this.getLineScale():1,f=s.lineWidth;if(!this.hasFill()){var p=this.strokeContainThreshold;f=Math.max(f,p??4)}h>1e-10&&(d.width+=f/h,d.height+=f/h,d.x-=f/h/2,d.y-=f/h/2)}return d}return n},a.prototype.contain=function(n,s){var l=this.transformCoordToLocal(n,s),c=this.getBoundingRect(),u=this.style;if(n=l[0],s=l[1],c.contain(n,s)){var d=this.path;if(this.hasStroke()){var h=u.lineWidth,f=u.strokeNoScale?this.getLineScale():1;if(f>1e-10&&(this.hasFill()||(h=Math.max(h,this.strokeContainThreshold)),containStroke(d,h/f,n,s)))return!0}if(this.hasFill())return contain$2(d,n,s)}return!1},a.prototype.dirtyShape=function(){this.__dirty|=SHAPE_CHANGED_BIT,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},a.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},a.prototype.animateShape=function(n){return this.animate("shape",n)},a.prototype.updateDuringAnimation=function(n){n==="style"?this.dirtyStyle():n==="shape"?this.dirtyShape():this.markRedraw()},a.prototype.attrKV=function(n,s){n==="shape"?this.setShape(s):o.prototype.attrKV.call(this,n,s)},a.prototype.setShape=function(n,s){var l=this.shape;return l||(l=this.shape={}),typeof n=="string"?l[n]=s:extend(l,n),this.dirtyShape(),this},a.prototype.shapeChanged=function(){return!!(this.__dirty&SHAPE_CHANGED_BIT)},a.prototype.createStyle=function(n){return createObject(DEFAULT_PATH_STYLE,n)},a.prototype._innerSaveToNormal=function(n){o.prototype._innerSaveToNormal.call(this,n);var s=this._normalState;n.shape&&!s.shape&&(s.shape=extend({},this.shape))},a.prototype._applyStateObj=function(n,s,l,c,u,d){o.prototype._applyStateObj.call(this,n,s,l,c,u,d);var h=!(s&&c),f;if(s&&s.shape?u?c?f=s.shape:(f=extend({},l.shape),extend(f,s.shape)):(f=extend({},c?this.shape:l.shape),extend(f,s.shape)):h&&(f=l.shape),f)if(u){this.shape=extend({},this.shape);for(var p={},g=keys$1(f),v=0;v<g.length;v++){var b=g[v];typeof f[b]=="object"?this.shape[b]=f[b]:p[b]=f[b]}this._transitionState(n,{shape:p},d)}else this.shape=f,this.dirtyShape()},a.prototype._mergeStates=function(n){for(var s=o.prototype._mergeStates.call(this,n),l,c=0;c<n.length;c++){var u=n[c];u.shape&&(l=l||{},this._mergeStyle(l,u.shape))}return l&&(s.shape=l),s},a.prototype.getAnimationStyleProps=function(){return DEFAULT_PATH_ANIMATION_PROPS},a.prototype.isZeroArea=function(){return!1},a.extend=function(n){var s=function(c){__extends(u,c);function u(d){var h=c.call(this,d)||this;return n.init&&n.init.call(h,d),h}return u.prototype.getDefaultStyle=function(){return clone$4(n.style)},u.prototype.getDefaultShape=function(){return clone$4(n.shape)},u}(a);for(var l in n)typeof n[l]=="function"&&(s.prototype[l]=n[l]);return s},a.initDefaultProps=function(){var n=a.prototype;n.type="path",n.strokeContainThreshold=5,n.segmentIgnoreThreshold=0,n.subPixelOptimize=!1,n.autoBatch=!1,n.__dirty=REDRAW_BIT|STYLE_CHANGED_BIT|SHAPE_CHANGED_BIT}(),a}(Displayable),DEFAULT_TSPAN_STYLE=defaults({strokeFirst:!0,font:DEFAULT_FONT,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},DEFAULT_PATH_STYLE),TSpan=function(o){__extends(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.hasStroke=function(){var n=this.style,s=n.stroke;return s!=null&&s!=="none"&&n.lineWidth>0},a.prototype.hasFill=function(){var n=this.style,s=n.fill;return s!=null&&s!=="none"},a.prototype.createStyle=function(n){return createObject(DEFAULT_TSPAN_STYLE,n)},a.prototype.setBoundingRect=function(n){this._rect=n},a.prototype.getBoundingRect=function(){var n=this.style;if(!this._rect){var s=n.text;s!=null?s+="":s="";var l=getBoundingRect(s,n.font,n.textAlign,n.textBaseline);if(l.x+=n.x||0,l.y+=n.y||0,this.hasStroke()){var c=n.lineWidth;l.x-=c/2,l.y-=c/2,l.width+=c,l.height+=c}this._rect=l}return this._rect},a.initDefaultProps=function(){var n=a.prototype;n.dirtyRectTolerance=10}(),a}(Displayable);TSpan.prototype.type="tspan";var DEFAULT_IMAGE_STYLE=defaults({x:0,y:0},DEFAULT_COMMON_STYLE),DEFAULT_IMAGE_ANIMATION_PROPS={style:defaults({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)};function isImageLike$1(o){return!!(o&&typeof o!="string"&&o.width&&o.height)}var ZRImage=function(o){__extends(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.createStyle=function(n){return createObject(DEFAULT_IMAGE_STYLE,n)},a.prototype._getSize=function(n){var s=this.style,l=s[n];if(l!=null)return l;var c=isImageLike$1(s.image)?s.image:this.__image;if(!c)return 0;var u=n==="width"?"height":"width",d=s[u];return d==null?c[n]:c[n]/c[u]*d},a.prototype.getWidth=function(){return this._getSize("width")},a.prototype.getHeight=function(){return this._getSize("height")},a.prototype.getAnimationStyleProps=function(){return DEFAULT_IMAGE_ANIMATION_PROPS},a.prototype.getBoundingRect=function(){var n=this.style;return this._rect||(this._rect=new BoundingRect(n.x||0,n.y||0,this.getWidth(),this.getHeight())),this._rect},a}(Displayable);ZRImage.prototype.type="image";function buildPath$2(o,a){var n=a.x,s=a.y,l=a.width,c=a.height,u=a.r,d,h,f,p;l<0&&(n=n+l,l=-l),c<0&&(s=s+c,c=-c),typeof u=="number"?d=h=f=p=u:u instanceof Array?u.length===1?d=h=f=p=u[0]:u.length===2?(d=f=u[0],h=p=u[1]):u.length===3?(d=u[0],h=p=u[1],f=u[2]):(d=u[0],h=u[1],f=u[2],p=u[3]):d=h=f=p=0;var g;d+h>l&&(g=d+h,d*=l/g,h*=l/g),f+p>l&&(g=f+p,f*=l/g,p*=l/g),h+f>c&&(g=h+f,h*=c/g,f*=c/g),d+p>c&&(g=d+p,d*=c/g,p*=c/g),o.moveTo(n+d,s),o.lineTo(n+l-h,s),h!==0&&o.arc(n+l-h,s+h,h,-Math.PI/2,0),o.lineTo(n+l,s+c-f),f!==0&&o.arc(n+l-f,s+c-f,f,0,Math.PI/2),o.lineTo(n+p,s+c),p!==0&&o.arc(n+p,s+c-p,p,Math.PI/2,Math.PI),o.lineTo(n,s+d),d!==0&&o.arc(n+d,s+d,d,Math.PI,Math.PI*1.5)}var round$2=Math.round;function subPixelOptimizeLine$1(o,a,n){if(a){var s=a.x1,l=a.x2,c=a.y1,u=a.y2;o.x1=s,o.x2=l,o.y1=c,o.y2=u;var d=n&&n.lineWidth;return d&&(round$2(s*2)===round$2(l*2)&&(o.x1=o.x2=subPixelOptimize$1(s,d,!0)),round$2(c*2)===round$2(u*2)&&(o.y1=o.y2=subPixelOptimize$1(c,d,!0))),o}}function subPixelOptimizeRect$1(o,a,n){if(a){var s=a.x,l=a.y,c=a.width,u=a.height;o.x=s,o.y=l,o.width=c,o.height=u;var d=n&&n.lineWidth;return d&&(o.x=subPixelOptimize$1(s,d,!0),o.y=subPixelOptimize$1(l,d,!0),o.width=Math.max(subPixelOptimize$1(s+c,d,!1)-o.x,c===0?0:1),o.height=Math.max(subPixelOptimize$1(l+u,d,!1)-o.y,u===0?0:1)),o}}function subPixelOptimize$1(o,a,n){if(!a)return o;var s=round$2(o*2);return(s+round$2(a))%2===0?s/2:(s+(n?1:-1))/2}var RectShape=function(){function o(){this.x=0,this.y=0,this.width=0,this.height=0}return o}(),subPixelOptimizeOutputShape$1={},Rect$2=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new RectShape},a.prototype.buildPath=function(n,s){var l,c,u,d;if(this.subPixelOptimize){var h=subPixelOptimizeRect$1(subPixelOptimizeOutputShape$1,s,this.style);l=h.x,c=h.y,u=h.width,d=h.height,h.r=s.r,s=h}else l=s.x,c=s.y,u=s.width,d=s.height;s.r?buildPath$2(n,s):n.rect(l,c,u,d)},a.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},a}(Path);Rect$2.prototype.type="rect";var DEFAULT_RICH_TEXT_COLOR={fill:"#000"},DEFAULT_STROKE_LINE_WIDTH=2,DEFAULT_TEXT_ANIMATION_PROPS={style:defaults({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},DEFAULT_COMMON_ANIMATION_PROPS.style)},ZRText=function(o){__extends(a,o);function a(n){var s=o.call(this)||this;return s.type="text",s._children=[],s._defaultStyle=DEFAULT_RICH_TEXT_COLOR,s.attr(n),s}return a.prototype.childrenRef=function(){return this._children},a.prototype.update=function(){o.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var n=0;n<this._children.length;n++){var s=this._children[n];s.zlevel=this.zlevel,s.z=this.z,s.z2=this.z2,s.culling=this.culling,s.cursor=this.cursor,s.invisible=this.invisible}},a.prototype.updateTransform=function(){var n=this.innerTransformable;n?(n.updateTransform(),n.transform&&(this.transform=n.transform)):o.prototype.updateTransform.call(this)},a.prototype.getLocalTransform=function(n){var s=this.innerTransformable;return s?s.getLocalTransform(n):o.prototype.getLocalTransform.call(this,n)},a.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),o.prototype.getComputedTransform.call(this)},a.prototype._updateSubTexts=function(){this._childCursor=0,normalizeTextStyle(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},a.prototype.addSelfToZr=function(n){o.prototype.addSelfToZr.call(this,n);for(var s=0;s<this._children.length;s++)this._children[s].__zr=n},a.prototype.removeSelfFromZr=function(n){o.prototype.removeSelfFromZr.call(this,n);for(var s=0;s<this._children.length;s++)this._children[s].__zr=null},a.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var n=new BoundingRect(0,0,0,0),s=this._children,l=[],c=null,u=0;u<s.length;u++){var d=s[u],h=d.getBoundingRect(),f=d.getLocalTransform(l);f?(n.copy(h),n.applyTransform(f),c=c||n.clone(),c.union(n)):(c=c||h.clone(),c.union(h))}this._rect=c||n}return this._rect},a.prototype.setDefaultTextStyle=function(n){this._defaultStyle=n||DEFAULT_RICH_TEXT_COLOR},a.prototype.setTextContent=function(n){if(process.env.NODE_ENV!=="production")throw new Error("Can't attach text on another text")},a.prototype._mergeStyle=function(n,s){if(!s)return n;var l=s.rich,c=n.rich||l&&{};return extend(n,s),l&&c?(this._mergeRich(c,l),n.rich=c):c&&(n.rich=c),n},a.prototype._mergeRich=function(n,s){for(var l=keys$1(s),c=0;c<l.length;c++){var u=l[c];n[u]=n[u]||{},extend(n[u],s[u])}},a.prototype.getAnimationStyleProps=function(){return DEFAULT_TEXT_ANIMATION_PROPS},a.prototype._getOrCreateChild=function(n){var s=this._children[this._childCursor];return(!s||!(s instanceof n))&&(s=new n),this._children[this._childCursor++]=s,s.__zr=this.__zr,s.parent=this,s},a.prototype._updatePlainTexts=function(){var n=this.style,s=n.font||DEFAULT_FONT,l=n.padding,c=getStyleText(n),u=parsePlainText(c,n),d=needDrawBackground(n),h=!!n.backgroundColor,f=u.outerHeight,p=u.outerWidth,g=u.contentWidth,v=u.lines,b=u.lineHeight,w=this._defaultStyle;this.isTruncated=!!u.isTruncated;var x=n.x||0,S=n.y||0,E=n.align||w.align||"left",T=n.verticalAlign||w.verticalAlign||"top",C=x,A=adjustTextY(S,u.contentHeight,T);if(d||l){var R=adjustTextX(x,p,E),j=adjustTextY(S,f,T);d&&this._renderBackground(n,n,R,j,p,f)}A+=b/2,l&&(C=getTextXForPadding(x,E,l),T==="top"?A+=l[0]:T==="bottom"&&(A-=l[2]));for(var D=0,O=!1,H=getFill("fill"in n?n.fill:(O=!0,w.fill)),q=getStroke("stroke"in n?n.stroke:!h&&(!w.autoStroke||O)?(D=DEFAULT_STROKE_LINE_WIDTH,w.stroke):null),Y=n.textShadowBlur>0,te=n.width!=null&&(n.overflow==="truncate"||n.overflow==="break"||n.overflow==="breakAll"),ee=u.calculatedLineHeight,re=0;re<v.length;re++){var ne=this._getOrCreateChild(TSpan),ce=ne.createStyle();ne.useStyle(ce),ce.text=v[re],ce.x=C,ce.y=A,ce.textAlign=E,ce.textBaseline="middle",ce.opacity=n.opacity,ce.strokeFirst=!0,Y&&(ce.shadowBlur=n.textShadowBlur||0,ce.shadowColor=n.textShadowColor||"transparent",ce.shadowOffsetX=n.textShadowOffsetX||0,ce.shadowOffsetY=n.textShadowOffsetY||0),ce.stroke=q,ce.fill=H,q&&(ce.lineWidth=n.lineWidth||D,ce.lineDash=n.lineDash,ce.lineDashOffset=n.lineDashOffset||0),ce.font=s,setSeparateFont(ce,n),A+=b,te&&ne.setBoundingRect(new BoundingRect(adjustTextX(ce.x,g,ce.textAlign),adjustTextY(ce.y,ee,ce.textBaseline),g,ee))}},a.prototype._updateRichTexts=function(){var n=this.style,s=getStyleText(n),l=parseRichText(s,n),c=l.width,u=l.outerWidth,d=l.outerHeight,h=n.padding,f=n.x||0,p=n.y||0,g=this._defaultStyle,v=n.align||g.align,b=n.verticalAlign||g.verticalAlign;this.isTruncated=!!l.isTruncated;var w=adjustTextX(f,u,v),x=adjustTextY(p,d,b),S=w,E=x;h&&(S+=h[3],E+=h[0]);var T=S+c;needDrawBackground(n)&&this._renderBackground(n,n,w,x,u,d);for(var C=!!n.backgroundColor,A=0;A<l.lines.length;A++){for(var R=l.lines[A],j=R.tokens,D=j.length,O=R.lineHeight,H=R.width,q=0,Y=S,te=T,ee=D-1,re=void 0;q<D&&(re=j[q],!re.align||re.align==="left");)this._placeToken(re,n,O,E,Y,"left",C),H-=re.width,Y+=re.width,q++;for(;ee>=0&&(re=j[ee],re.align==="right");)this._placeToken(re,n,O,E,te,"right",C),H-=re.width,te-=re.width,ee--;for(Y+=(c-(Y-S)-(T-te)-H)/2;q<=ee;)re=j[q],this._placeToken(re,n,O,E,Y+re.width/2,"center",C),Y+=re.width,q++;E+=O}},a.prototype._placeToken=function(n,s,l,c,u,d,h){var f=s.rich[n.styleName]||{};f.text=n.text;var p=n.verticalAlign,g=c+l/2;p==="top"?g=c+n.height/2:p==="bottom"&&(g=c+l-n.height/2);var v=!n.isLineHolder&&needDrawBackground(f);v&&this._renderBackground(f,s,d==="right"?u-n.width:d==="center"?u-n.width/2:u,g-n.height/2,n.width,n.height);var b=!!f.backgroundColor,w=n.textPadding;w&&(u=getTextXForPadding(u,d,w),g-=n.height/2-w[0]-n.innerHeight/2);var x=this._getOrCreateChild(TSpan),S=x.createStyle();x.useStyle(S);var E=this._defaultStyle,T=!1,C=0,A=getFill("fill"in f?f.fill:"fill"in s?s.fill:(T=!0,E.fill)),R=getStroke("stroke"in f?f.stroke:"stroke"in s?s.stroke:!b&&!h&&(!E.autoStroke||T)?(C=DEFAULT_STROKE_LINE_WIDTH,E.stroke):null),j=f.textShadowBlur>0||s.textShadowBlur>0;S.text=n.text,S.x=u,S.y=g,j&&(S.shadowBlur=f.textShadowBlur||s.textShadowBlur||0,S.shadowColor=f.textShadowColor||s.textShadowColor||"transparent",S.shadowOffsetX=f.textShadowOffsetX||s.textShadowOffsetX||0,S.shadowOffsetY=f.textShadowOffsetY||s.textShadowOffsetY||0),S.textAlign=d,S.textBaseline="middle",S.font=n.font||DEFAULT_FONT,S.opacity=retrieve3(f.opacity,s.opacity,1),setSeparateFont(S,f),R&&(S.lineWidth=retrieve3(f.lineWidth,s.lineWidth,C),S.lineDash=retrieve2(f.lineDash,s.lineDash),S.lineDashOffset=s.lineDashOffset||0,S.stroke=R),A&&(S.fill=A);var D=n.contentWidth,O=n.contentHeight;x.setBoundingRect(new BoundingRect(adjustTextX(S.x,D,S.textAlign),adjustTextY(S.y,O,S.textBaseline),D,O))},a.prototype._renderBackground=function(n,s,l,c,u,d){var h=n.backgroundColor,f=n.borderWidth,p=n.borderColor,g=h&&h.image,v=h&&!g,b=n.borderRadius,w=this,x,S;if(v||n.lineHeight||f&&p){x=this._getOrCreateChild(Rect$2),x.useStyle(x.createStyle()),x.style.fill=null;var E=x.shape;E.x=l,E.y=c,E.width=u,E.height=d,E.r=b,x.dirtyShape()}if(v){var T=x.style;T.fill=h||null,T.fillOpacity=retrieve2(n.fillOpacity,1)}else if(g){S=this._getOrCreateChild(ZRImage),S.onload=function(){w.dirtyStyle()};var C=S.style;C.image=h.image,C.x=l,C.y=c,C.width=u,C.height=d}if(f&&p){var T=x.style;T.lineWidth=f,T.stroke=p,T.strokeOpacity=retrieve2(n.strokeOpacity,1),T.lineDash=n.borderDash,T.lineDashOffset=n.borderDashOffset||0,x.strokeContainThreshold=0,x.hasFill()&&x.hasStroke()&&(T.strokeFirst=!0,T.lineWidth*=2)}var A=(x||S).style;A.shadowBlur=n.shadowBlur||0,A.shadowColor=n.shadowColor||"transparent",A.shadowOffsetX=n.shadowOffsetX||0,A.shadowOffsetY=n.shadowOffsetY||0,A.opacity=retrieve3(n.opacity,s.opacity,1)},a.makeFont=function(n){var s="";return hasSeparateFont(n)&&(s=[n.fontStyle,n.fontWeight,parseFontSize(n.fontSize),n.fontFamily||"sans-serif"].join(" ")),s&&trim$1(s)||n.textFont||n.font},a}(Displayable),VALID_TEXT_ALIGN={left:!0,right:1,center:1},VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1},FONT_PARTS=["fontStyle","fontWeight","fontSize","fontFamily"];function parseFontSize(o){return typeof o=="string"&&(o.indexOf("px")!==-1||o.indexOf("rem")!==-1||o.indexOf("em")!==-1)?o:isNaN(+o)?DEFAULT_FONT_SIZE+"px":o+"px"}function setSeparateFont(o,a){for(var n=0;n<FONT_PARTS.length;n++){var s=FONT_PARTS[n],l=a[s];l!=null&&(o[s]=l)}}function hasSeparateFont(o){return o.fontSize!=null||o.fontFamily||o.fontWeight}function normalizeTextStyle(o){return normalizeStyle(o),each$f(o.rich,normalizeStyle),o}function normalizeStyle(o){if(o){o.font=ZRText.makeFont(o);var a=o.align;a==="middle"&&(a="center"),o.align=a==null||VALID_TEXT_ALIGN[a]?a:"left";var n=o.verticalAlign;n==="center"&&(n="middle"),o.verticalAlign=n==null||VALID_TEXT_VERTICAL_ALIGN[n]?n:"top";var s=o.padding;s&&(o.padding=normalizeCssArray$1(o.padding))}}function getStroke(o,a){return o==null||a<=0||o==="transparent"||o==="none"?null:o.image||o.colorStops?"#000":o}function getFill(o){return o==null||o==="none"?null:o.image||o.colorStops?"#000":o}function getTextXForPadding(o,a,n){return a==="right"?o-n[1]:a==="center"?o+n[3]/2-n[1]/2:o+n[3]}function getStyleText(o){var a=o.text;return a!=null&&(a+=""),a}function needDrawBackground(o){return!!(o.backgroundColor||o.lineHeight||o.borderWidth&&o.borderColor)}var getECData=makeInner(),setCommonECData=function(o,a,n,s){if(s){var l=getECData(s);l.dataIndex=n,l.dataType=a,l.seriesIndex=o,l.ssrType="chart",s.type==="group"&&s.traverse(function(c){var u=getECData(c);u.seriesIndex=o,u.dataIndex=n,u.dataType=a,u.ssrType="chart"})}},_highlightNextDigit=1,_highlightKeyMap={},getSavedStates=makeInner(),getComponentStates=makeInner(),HOVER_STATE_NORMAL=0,HOVER_STATE_BLUR=1,HOVER_STATE_EMPHASIS=2,SPECIAL_STATES=["emphasis","blur","select"],DISPLAY_STATES=["normal","emphasis","blur","select"],Z2_EMPHASIS_LIFT=10,Z2_SELECT_LIFT=9,HIGHLIGHT_ACTION_TYPE="highlight",DOWNPLAY_ACTION_TYPE="downplay",SELECT_ACTION_TYPE="select",UNSELECT_ACTION_TYPE="unselect",TOGGLE_SELECT_ACTION_TYPE="toggleSelect";function hasFillOrStroke(o){return o!=null&&o!=="none"}function doChangeHoverState(o,a,n){o.onHoverStateChange&&(o.hoverState||0)!==n&&o.onHoverStateChange(a),o.hoverState=n}function singleEnterEmphasis(o){doChangeHoverState(o,"emphasis",HOVER_STATE_EMPHASIS)}function singleLeaveEmphasis(o){o.hoverState===HOVER_STATE_EMPHASIS&&doChangeHoverState(o,"normal",HOVER_STATE_NORMAL)}function singleEnterBlur(o){doChangeHoverState(o,"blur",HOVER_STATE_BLUR)}function singleLeaveBlur(o){o.hoverState===HOVER_STATE_BLUR&&doChangeHoverState(o,"normal",HOVER_STATE_NORMAL)}function singleEnterSelect(o){o.selected=!0}function singleLeaveSelect(o){o.selected=!1}function updateElementState(o,a,n){a(o,n)}function traverseUpdateState(o,a,n){updateElementState(o,a,n),o.isGroup&&o.traverse(function(s){updateElementState(s,a,n)})}function setStatesFlag(o,a){switch(a){case"emphasis":o.hoverState=HOVER_STATE_EMPHASIS;break;case"normal":o.hoverState=HOVER_STATE_NORMAL;break;case"blur":o.hoverState=HOVER_STATE_BLUR;break;case"select":o.selected=!0}}function getFromStateStyle(o,a,n,s){for(var l=o.style,c={},u=0;u<a.length;u++){var d=a[u],h=l[d];c[d]=h??(s&&s[d])}for(var u=0;u<o.animators.length;u++){var f=o.animators[u];f.__fromStateTransition&&f.__fromStateTransition.indexOf(n)<0&&f.targetName==="style"&&f.saveTo(c,a)}return c}function createEmphasisDefaultState(o,a,n,s){var l=n&&indexOf(n,"select")>=0,c=!1;if(o instanceof Path){var u=getSavedStates(o),d=l&&u.selectFill||u.normalFill,h=l&&u.selectStroke||u.normalStroke;if(hasFillOrStroke(d)||hasFillOrStroke(h)){s=s||{};var f=s.style||{};f.fill==="inherit"?(c=!0,s=extend({},s),f=extend({},f),f.fill=d):!hasFillOrStroke(f.fill)&&hasFillOrStroke(d)?(c=!0,s=extend({},s),f=extend({},f),f.fill=liftColor(d)):!hasFillOrStroke(f.stroke)&&hasFillOrStroke(h)&&(c||(s=extend({},s),f=extend({},f)),f.stroke=liftColor(h)),s.style=f}}if(s&&s.z2==null){c||(s=extend({},s));var p=o.z2EmphasisLift;s.z2=o.z2+(p??Z2_EMPHASIS_LIFT)}return s}function createSelectDefaultState(o,a,n){if(n&&n.z2==null){n=extend({},n);var s=o.z2SelectLift;n.z2=o.z2+(s??Z2_SELECT_LIFT)}return n}function createBlurDefaultState(o,a,n){var s=indexOf(o.currentStates,a)>=0,l=o.style.opacity,c=s?null:getFromStateStyle(o,["opacity"],a,{opacity:1});n=n||{};var u=n.style||{};return u.opacity==null&&(n=extend({},n),u=extend({opacity:s?l:c.opacity*.1},u),n.style=u),n}function elementStateProxy(o,a){var n=this.states[o];if(this.style){if(o==="emphasis")return createEmphasisDefaultState(this,o,a,n);if(o==="blur")return createBlurDefaultState(this,o,n);if(o==="select")return createSelectDefaultState(this,o,n)}return n}function setDefaultStateProxy(o){o.stateProxy=elementStateProxy;var a=o.getTextContent(),n=o.getTextGuideLine();a&&(a.stateProxy=elementStateProxy),n&&(n.stateProxy=elementStateProxy)}function enterEmphasisWhenMouseOver(o,a){!shouldSilent(o,a)&&!o.__highByOuter&&traverseUpdateState(o,singleEnterEmphasis)}function leaveEmphasisWhenMouseOut(o,a){!shouldSilent(o,a)&&!o.__highByOuter&&traverseUpdateState(o,singleLeaveEmphasis)}function enterEmphasis(o,a){o.__highByOuter|=1<<(a||0),traverseUpdateState(o,singleEnterEmphasis)}function leaveEmphasis(o,a){!(o.__highByOuter&=~(1<<(a||0)))&&traverseUpdateState(o,singleLeaveEmphasis)}function enterBlur(o){traverseUpdateState(o,singleEnterBlur)}function leaveBlur(o){traverseUpdateState(o,singleLeaveBlur)}function enterSelect(o){traverseUpdateState(o,singleEnterSelect)}function leaveSelect(o){traverseUpdateState(o,singleLeaveSelect)}function shouldSilent(o,a){return o.__highDownSilentOnTouch&&a.zrByTouch}function allLeaveBlur(o){var a=o.getModel(),n=[],s=[];a.eachComponent(function(l,c){var u=getComponentStates(c),d=l==="series",h=d?o.getViewOfSeriesModel(c):o.getViewOfComponentModel(c);!d&&s.push(h),u.isBlured&&(h.group.traverse(function(f){singleLeaveBlur(f)}),d&&n.push(c)),u.isBlured=!1}),each$f(s,function(l){l&&l.toggleBlurSeries&&l.toggleBlurSeries(n,!1,a)})}function blurSeries(o,a,n,s){var l=s.getModel();n=n||"coordinateSystem";function c(f,p){for(var g=0;g<p.length;g++){var v=f.getItemGraphicEl(p[g]);v&&leaveBlur(v)}}if(o!=null&&!(!a||a==="none")){var u=l.getSeriesByIndex(o),d=u.coordinateSystem;d&&d.master&&(d=d.master);var h=[];l.eachSeries(function(f){var p=u===f,g=f.coordinateSystem;g&&g.master&&(g=g.master);var v=g&&d?g===d:p;if(!(n==="series"&&!p||n==="coordinateSystem"&&!v||a==="series"&&p)){var b=s.getViewOfSeriesModel(f);if(b.group.traverse(function(S){S.__highByOuter&&p&&a==="self"||singleEnterBlur(S)}),isArrayLike(a))c(f.getData(),a);else if(isObject$3(a))for(var w=keys$1(a),x=0;x<w.length;x++)c(f.getData(w[x]),a[w[x]]);h.push(f),getComponentStates(f).isBlured=!0}}),l.eachComponent(function(f,p){if(f!=="series"){var g=s.getViewOfComponentModel(p);g&&g.toggleBlurSeries&&g.toggleBlurSeries(h,!0,l)}})}}function blurComponent(o,a,n){if(!(o==null||a==null)){var s=n.getModel().getComponent(o,a);if(s){getComponentStates(s).isBlured=!0;var l=n.getViewOfComponentModel(s);!l||!l.focusBlurEnabled||l.group.traverse(function(c){singleEnterBlur(c)})}}}function blurSeriesFromHighlightPayload(o,a,n){var s=o.seriesIndex,l=o.getData(a.dataType);if(!l){process.env.NODE_ENV!=="production"&&error("Unknown dataType "+a.dataType);return}var c=queryDataIndex(l,a);c=(isArray$1(c)?c[0]:c)||0;var u=l.getItemGraphicEl(c);if(!u)for(var d=l.count(),h=0;!u&&h<d;)u=l.getItemGraphicEl(h++);if(u){var f=getECData(u);blurSeries(s,f.focus,f.blurScope,n)}else{var p=o.get(["emphasis","focus"]),g=o.get(["emphasis","blurScope"]);p!=null&&blurSeries(s,p,g,n)}}function findComponentHighDownDispatchers(o,a,n,s){var l={focusSelf:!1,dispatchers:null};if(o==null||o==="series"||a==null||n==null)return l;var c=s.getModel().getComponent(o,a);if(!c)return l;var u=s.getViewOfComponentModel(c);if(!u||!u.findHighDownDispatchers)return l;for(var d=u.findHighDownDispatchers(n),h,f=0;f<d.length;f++)if(process.env.NODE_ENV!=="production"&&!isHighDownDispatcher(d[f])&&error("param should be highDownDispatcher"),getECData(d[f]).focus==="self"){h=!0;break}return{focusSelf:h,dispatchers:d}}function handleGlobalMouseOverForHighDown(o,a,n){process.env.NODE_ENV!=="production"&&!isHighDownDispatcher(o)&&error("param should be highDownDispatcher");var s=getECData(o),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,n),c=l.dispatchers,u=l.focusSelf;c?(u&&blurComponent(s.componentMainType,s.componentIndex,n),each$f(c,function(d){return enterEmphasisWhenMouseOver(d,a)})):(blurSeries(s.seriesIndex,s.focus,s.blurScope,n),s.focus==="self"&&blurComponent(s.componentMainType,s.componentIndex,n),enterEmphasisWhenMouseOver(o,a))}function handleGlobalMouseOutForHighDown(o,a,n){process.env.NODE_ENV!=="production"&&!isHighDownDispatcher(o)&&error("param should be highDownDispatcher"),allLeaveBlur(n);var s=getECData(o),l=findComponentHighDownDispatchers(s.componentMainType,s.componentIndex,s.componentHighDownName,n).dispatchers;l?each$f(l,function(c){return leaveEmphasisWhenMouseOut(c,a)}):leaveEmphasisWhenMouseOut(o,a)}function toggleSelectionFromPayload(o,a,n){if(isSelectChangePayload(a)){var s=a.dataType,l=o.getData(s),c=queryDataIndex(l,a);isArray$1(c)||(c=[c]),o[a.type===TOGGLE_SELECT_ACTION_TYPE?"toggleSelect":a.type===SELECT_ACTION_TYPE?"select":"unselect"](c,s)}}function updateSeriesElementSelection(o){var a=o.getAllData();each$f(a,function(n){var s=n.data,l=n.type;s.eachItemGraphicEl(function(c,u){o.isSelected(u,l)?enterSelect(c):leaveSelect(c)})})}function getAllSelectedIndices(o){var a=[];return o.eachSeries(function(n){var s=n.getAllData();each$f(s,function(l){l.data;var c=l.type,u=n.getSelectedDataIndices();if(u.length>0){var d={dataIndex:u,seriesIndex:n.seriesIndex};c!=null&&(d.dataType=c),a.push(d)}})}),a}function enableHoverEmphasis(o,a,n){setAsHighDownDispatcher(o,!0),traverseUpdateState(o,setDefaultStateProxy),enableHoverFocus(o,a,n)}function disableHoverEmphasis(o){setAsHighDownDispatcher(o,!1)}function toggleHoverEmphasis(o,a,n,s){s?disableHoverEmphasis(o):enableHoverEmphasis(o,a,n)}function enableHoverFocus(o,a,n){var s=getECData(o);a!=null?(s.focus=a,s.blurScope=n):s.focus&&(s.focus=null)}var OTHER_STATES=["emphasis","blur","select"],defaultStyleGetterMap={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function setStatesStylesFromModel(o,a,n,s){n=n||"itemStyle";for(var l=0;l<OTHER_STATES.length;l++){var c=OTHER_STATES[l],u=a.getModel([c,n]),d=o.ensureState(c);d.style=s?s(u):u[defaultStyleGetterMap[n]]()}}function setAsHighDownDispatcher(o,a){var n=a===!1,s=o;o.highDownSilentOnTouch&&(s.__highDownSilentOnTouch=o.highDownSilentOnTouch),(!n||s.__highDownDispatcher)&&(s.__highByOuter=s.__highByOuter||0,s.__highDownDispatcher=!n)}function isHighDownDispatcher(o){return!!(o&&o.__highDownDispatcher)}function enableComponentHighDownFeatures(o,a,n){var s=getECData(o);s.componentMainType=a.mainType,s.componentIndex=a.componentIndex,s.componentHighDownName=n}function getHighlightDigit(o){var a=_highlightKeyMap[o];return a==null&&_highlightNextDigit<=32&&(a=_highlightKeyMap[o]=_highlightNextDigit++),a}function isSelectChangePayload(o){var a=o.type;return a===SELECT_ACTION_TYPE||a===UNSELECT_ACTION_TYPE||a===TOGGLE_SELECT_ACTION_TYPE}function isHighDownPayload(o){var a=o.type;return a===HIGHLIGHT_ACTION_TYPE||a===DOWNPLAY_ACTION_TYPE}function savePathStates(o){var a=getSavedStates(o);a.normalFill=o.style.fill,a.normalStroke=o.style.stroke;var n=o.states.select||{};a.selectFill=n.style&&n.style.fill||null,a.selectStroke=n.style&&n.style.stroke||null}var CMD$2=PathProxy.CMD,points$2=[[],[],[]],mathSqrt$2=Math.sqrt,mathAtan2=Math.atan2;function transformPath(o,a){if(a){var n=o.data,s=o.len(),l,c,u,d,h,f,p=CMD$2.M,g=CMD$2.C,v=CMD$2.L,b=CMD$2.R,w=CMD$2.A,x=CMD$2.Q;for(u=0,d=0;u<s;){switch(l=n[u++],d=u,c=0,l){case p:c=1;break;case v:c=1;break;case g:c=3;break;case x:c=2;break;case w:var S=a[4],E=a[5],T=mathSqrt$2(a[0]*a[0]+a[1]*a[1]),C=mathSqrt$2(a[2]*a[2]+a[3]*a[3]),A=mathAtan2(-a[1]/C,a[0]/T);n[u]*=T,n[u++]+=S,n[u]*=C,n[u++]+=E,n[u++]*=T,n[u++]*=C,n[u++]+=A,n[u++]+=A,u+=2,d=u;break;case b:f[0]=n[u++],f[1]=n[u++],applyTransform$1(f,f,a),n[d++]=f[0],n[d++]=f[1],f[0]+=n[u++],f[1]+=n[u++],applyTransform$1(f,f,a),n[d++]=f[0],n[d++]=f[1]}for(h=0;h<c;h++){var R=points$2[h];R[0]=n[u++],R[1]=n[u++],applyTransform$1(R,R,a),n[d++]=R[0],n[d++]=R[1]}}o.increaseVersion()}}var mathSqrt$1=Math.sqrt,mathSin$2=Math.sin,mathCos$2=Math.cos,PI$7=Math.PI;function vMag(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function vRatio(o,a){return(o[0]*a[0]+o[1]*a[1])/(vMag(o)*vMag(a))}function vAngle(o,a){return(o[0]*a[1]<o[1]*a[0]?-1:1)*Math.acos(vRatio(o,a))}function processArc(o,a,n,s,l,c,u,d,h,f,p){var g=h*(PI$7/180),v=mathCos$2(g)*(o-n)/2+mathSin$2(g)*(a-s)/2,b=-1*mathSin$2(g)*(o-n)/2+mathCos$2(g)*(a-s)/2,w=v*v/(u*u)+b*b/(d*d);w>1&&(u*=mathSqrt$1(w),d*=mathSqrt$1(w));var x=(l===c?-1:1)*mathSqrt$1((u*u*(d*d)-u*u*(b*b)-d*d*(v*v))/(u*u*(b*b)+d*d*(v*v)))||0,S=x*u*b/d,E=x*-d*v/u,T=(o+n)/2+mathCos$2(g)*S-mathSin$2(g)*E,C=(a+s)/2+mathSin$2(g)*S+mathCos$2(g)*E,A=vAngle([1,0],[(v-S)/u,(b-E)/d]),R=[(v-S)/u,(b-E)/d],j=[(-1*v-S)/u,(-1*b-E)/d],D=vAngle(R,j);if(vRatio(R,j)<=-1&&(D=PI$7),vRatio(R,j)>=1&&(D=0),D<0){var O=Math.round(D/PI$7*1e6)/1e6;D=PI$7*2+O%2*PI$7}p.addData(f,T,C,u,d,A,D,g,c)}var commandReg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,numberReg$1=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function createPathProxyFromString(o){var a=new PathProxy;if(!o)return a;var n=0,s=0,l=n,c=s,u,d=PathProxy.CMD,h=o.match(commandReg);if(!h)return a;for(var f=0;f<h.length;f++){for(var p=h[f],g=p.charAt(0),v=void 0,b=p.match(numberReg$1)||[],w=b.length,x=0;x<w;x++)b[x]=parseFloat(b[x]);for(var S=0;S<w;){var E=void 0,T=void 0,C=void 0,A=void 0,R=void 0,j=void 0,D=void 0,O=n,H=s,q=void 0,Y=void 0;switch(g){case"l":n+=b[S++],s+=b[S++],v=d.L,a.addData(v,n,s);break;case"L":n=b[S++],s=b[S++],v=d.L,a.addData(v,n,s);break;case"m":n+=b[S++],s+=b[S++],v=d.M,a.addData(v,n,s),l=n,c=s,g="l";break;case"M":n=b[S++],s=b[S++],v=d.M,a.addData(v,n,s),l=n,c=s,g="L";break;case"h":n+=b[S++],v=d.L,a.addData(v,n,s);break;case"H":n=b[S++],v=d.L,a.addData(v,n,s);break;case"v":s+=b[S++],v=d.L,a.addData(v,n,s);break;case"V":s=b[S++],v=d.L,a.addData(v,n,s);break;case"C":v=d.C,a.addData(v,b[S++],b[S++],b[S++],b[S++],b[S++],b[S++]),n=b[S-2],s=b[S-1];break;case"c":v=d.C,a.addData(v,b[S++]+n,b[S++]+s,b[S++]+n,b[S++]+s,b[S++]+n,b[S++]+s),n+=b[S-2],s+=b[S-1];break;case"S":E=n,T=s,q=a.len(),Y=a.data,u===d.C&&(E+=n-Y[q-4],T+=s-Y[q-3]),v=d.C,O=b[S++],H=b[S++],n=b[S++],s=b[S++],a.addData(v,E,T,O,H,n,s);break;case"s":E=n,T=s,q=a.len(),Y=a.data,u===d.C&&(E+=n-Y[q-4],T+=s-Y[q-3]),v=d.C,O=n+b[S++],H=s+b[S++],n+=b[S++],s+=b[S++],a.addData(v,E,T,O,H,n,s);break;case"Q":O=b[S++],H=b[S++],n=b[S++],s=b[S++],v=d.Q,a.addData(v,O,H,n,s);break;case"q":O=b[S++]+n,H=b[S++]+s,n+=b[S++],s+=b[S++],v=d.Q,a.addData(v,O,H,n,s);break;case"T":E=n,T=s,q=a.len(),Y=a.data,u===d.Q&&(E+=n-Y[q-4],T+=s-Y[q-3]),n=b[S++],s=b[S++],v=d.Q,a.addData(v,E,T,n,s);break;case"t":E=n,T=s,q=a.len(),Y=a.data,u===d.Q&&(E+=n-Y[q-4],T+=s-Y[q-3]),n+=b[S++],s+=b[S++],v=d.Q,a.addData(v,E,T,n,s);break;case"A":C=b[S++],A=b[S++],R=b[S++],j=b[S++],D=b[S++],O=n,H=s,n=b[S++],s=b[S++],v=d.A,processArc(O,H,n,s,j,D,C,A,R,v,a);break;case"a":C=b[S++],A=b[S++],R=b[S++],j=b[S++],D=b[S++],O=n,H=s,n+=b[S++],s+=b[S++],v=d.A,processArc(O,H,n,s,j,D,C,A,R,v,a);break}}(g==="z"||g==="Z")&&(v=d.Z,a.addData(v),n=l,s=c),u=v}return a.toStatic(),a}var SVGPath=function(o){__extends(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.applyTransform=function(n){},a}(Path);function isPathProxy(o){return o.setData!=null}function createPathOptions(o,a){var n=createPathProxyFromString(o),s=extend({},a);return s.buildPath=function(l){if(isPathProxy(l)){l.setData(n.data);var c=l.getContext();c&&l.rebuildPath(c,1)}else{var c=l;n.rebuildPath(c,1)}},s.applyTransform=function(l){transformPath(n,l),this.dirtyShape()},s}function createFromString(o,a){return new SVGPath(createPathOptions(o,a))}function extendFromString(o,a){var n=createPathOptions(o,a),s=function(l){__extends(c,l);function c(u){var d=l.call(this,u)||this;return d.applyTransform=n.applyTransform,d.buildPath=n.buildPath,d}return c}(SVGPath);return s}function mergePath$1(o,a){for(var n=[],s=o.length,l=0;l<s;l++){var c=o[l];n.push(c.getUpdatedPathProxy(!0))}var u=new Path(a);return u.createPathProxy(),u.buildPath=function(d){if(isPathProxy(d)){d.appendPath(n);var h=d.getContext();h&&d.rebuildPath(h,1)}},u}function clonePath(o,a){a=a||{};var n=new Path;return o.shape&&n.setShape(o.shape),n.setStyle(o.style),a.bakeTransform?transformPath(n.path,o.getComputedTransform()):a.toLocal?n.setLocalTransform(o.getComputedTransform()):n.copyTransform(o),n.buildPath=o.buildPath,n.applyTransform=n.applyTransform,n.z=o.z,n.z2=o.z2,n.zlevel=o.zlevel,n}var CircleShape=function(){function o(){this.cx=0,this.cy=0,this.r=0}return o}(),Circle=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new CircleShape},a.prototype.buildPath=function(n,s){n.moveTo(s.cx+s.r,s.cy),n.arc(s.cx,s.cy,s.r,0,Math.PI*2)},a}(Path);Circle.prototype.type="circle";var EllipseShape=function(){function o(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return o}(),Ellipse=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new EllipseShape},a.prototype.buildPath=function(n,s){var l=.5522848,c=s.cx,u=s.cy,d=s.rx,h=s.ry,f=d*l,p=h*l;n.moveTo(c-d,u),n.bezierCurveTo(c-d,u-p,c-f,u-h,c,u-h),n.bezierCurveTo(c+f,u-h,c+d,u-p,c+d,u),n.bezierCurveTo(c+d,u+p,c+f,u+h,c,u+h),n.bezierCurveTo(c-f,u+h,c-d,u+p,c-d,u),n.closePath()},a}(Path);Ellipse.prototype.type="ellipse";var PI$6=Math.PI,PI2$3=PI$6*2,mathSin$1=Math.sin,mathCos$1=Math.cos,mathACos=Math.acos,mathATan2=Math.atan2,mathAbs$1=Math.abs,mathSqrt=Math.sqrt,mathMax$7=Math.max,mathMin$7=Math.min,e=1e-4;function intersect(o,a,n,s,l,c,u,d){var h=n-o,f=s-a,p=u-l,g=d-c,v=g*h-p*f;if(!(v*v<e))return v=(p*(a-c)-g*(o-l))/v,[o+v*h,a+v*f]}function computeCornerTangents(o,a,n,s,l,c,u){var d=o-n,h=a-s,f=(u?c:-c)/mathSqrt(d*d+h*h),p=f*h,g=-f*d,v=o+p,b=a+g,w=n+p,x=s+g,S=(v+w)/2,E=(b+x)/2,T=w-v,C=x-b,A=T*T+C*C,R=l-c,j=v*x-w*b,D=(C<0?-1:1)*mathSqrt(mathMax$7(0,R*R*A-j*j)),O=(j*C-T*D)/A,H=(-j*T-C*D)/A,q=(j*C+T*D)/A,Y=(-j*T+C*D)/A,te=O-S,ee=H-E,re=q-S,ne=Y-E;return te*te+ee*ee>re*re+ne*ne&&(O=q,H=Y),{cx:O,cy:H,x0:-p,y0:-g,x1:O*(l/R-1),y1:H*(l/R-1)}}function normalizeCornerRadius(o){var a;if(isArray$1(o)){var n=o.length;if(!n)return o;n===1?a=[o[0],o[0],0,0]:n===2?a=[o[0],o[0],o[1],o[1]]:n===3?a=o.concat(o[2]):a=o}else a=[o,o,o,o];return a}function buildPath$1(o,a){var n,s=mathMax$7(a.r,0),l=mathMax$7(a.r0||0,0),c=s>0,u=l>0;if(!(!c&&!u)){if(c||(s=l,l=0),l>s){var d=s;s=l,l=d}var h=a.startAngle,f=a.endAngle;if(!(isNaN(h)||isNaN(f))){var p=a.cx,g=a.cy,v=!!a.clockwise,b=mathAbs$1(f-h),w=b>PI2$3&&b%PI2$3;if(w>e&&(b=w),!(s>e))o.moveTo(p,g);else if(b>PI2$3-e)o.moveTo(p+s*mathCos$1(h),g+s*mathSin$1(h)),o.arc(p,g,s,h,f,!v),l>e&&(o.moveTo(p+l*mathCos$1(f),g+l*mathSin$1(f)),o.arc(p,g,l,f,h,v));else{var x=void 0,S=void 0,E=void 0,T=void 0,C=void 0,A=void 0,R=void 0,j=void 0,D=void 0,O=void 0,H=void 0,q=void 0,Y=void 0,te=void 0,ee=void 0,re=void 0,ne=s*mathCos$1(h),ce=s*mathSin$1(h),ve=l*mathCos$1(f),be=l*mathSin$1(f),me=b>e;if(me){var ae=a.cornerRadius;ae&&(n=normalizeCornerRadius(ae),x=n[0],S=n[1],E=n[2],T=n[3]);var pe=mathAbs$1(s-l)/2;if(C=mathMin$7(pe,E),A=mathMin$7(pe,T),R=mathMin$7(pe,x),j=mathMin$7(pe,S),H=D=mathMax$7(C,A),q=O=mathMax$7(R,j),(D>e||O>e)&&(Y=s*mathCos$1(f),te=s*mathSin$1(f),ee=l*mathCos$1(h),re=l*mathSin$1(h),b<PI$6)){var ie=intersect(ne,ce,ee,re,Y,te,ve,be);if(ie){var se=ne-ie[0],de=ce-ie[1],le=Y-ie[0],ge=te-ie[1],Re=1/mathSin$1(mathACos((se*le+de*ge)/(mathSqrt(se*se+de*de)*mathSqrt(le*le+ge*ge)))/2),we=mathSqrt(ie[0]*ie[0]+ie[1]*ie[1]);H=mathMin$7(D,(s-we)/(Re+1)),q=mathMin$7(O,(l-we)/(Re-1))}}}if(!me)o.moveTo(p+ne,g+ce);else if(H>e){var Se=mathMin$7(E,H),xe=mathMin$7(T,H),ke=computeCornerTangents(ee,re,ne,ce,s,Se,v),Ie=computeCornerTangents(Y,te,ve,be,s,xe,v);o.moveTo(p+ke.cx+ke.x0,g+ke.cy+ke.y0),H<D&&Se===xe?o.arc(p+ke.cx,g+ke.cy,H,mathATan2(ke.y0,ke.x0),mathATan2(Ie.y0,Ie.x0),!v):(Se>0&&o.arc(p+ke.cx,g+ke.cy,Se,mathATan2(ke.y0,ke.x0),mathATan2(ke.y1,ke.x1),!v),o.arc(p,g,s,mathATan2(ke.cy+ke.y1,ke.cx+ke.x1),mathATan2(Ie.cy+Ie.y1,Ie.cx+Ie.x1),!v),xe>0&&o.arc(p+Ie.cx,g+Ie.cy,xe,mathATan2(Ie.y1,Ie.x1),mathATan2(Ie.y0,Ie.x0),!v))}else o.moveTo(p+ne,g+ce),o.arc(p,g,s,h,f,!v);if(!(l>e)||!me)o.lineTo(p+ve,g+be);else if(q>e){var Se=mathMin$7(x,q),xe=mathMin$7(S,q),ke=computeCornerTangents(ve,be,Y,te,l,-xe,v),Ie=computeCornerTangents(ne,ce,ee,re,l,-Se,v);o.lineTo(p+ke.cx+ke.x0,g+ke.cy+ke.y0),q<O&&Se===xe?o.arc(p+ke.cx,g+ke.cy,q,mathATan2(ke.y0,ke.x0),mathATan2(Ie.y0,Ie.x0),!v):(xe>0&&o.arc(p+ke.cx,g+ke.cy,xe,mathATan2(ke.y0,ke.x0),mathATan2(ke.y1,ke.x1),!v),o.arc(p,g,l,mathATan2(ke.cy+ke.y1,ke.cx+ke.x1),mathATan2(Ie.cy+Ie.y1,Ie.cx+Ie.x1),v),Se>0&&o.arc(p+Ie.cx,g+Ie.cy,Se,mathATan2(Ie.y1,Ie.x1),mathATan2(Ie.y0,Ie.x0),!v))}else o.lineTo(p+ve,g+be),o.arc(p,g,l,f,h,v)}o.closePath()}}}var SectorShape=function(){function o(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return o}(),Sector=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new SectorShape},a.prototype.buildPath=function(n,s){buildPath$1(n,s)},a.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},a}(Path);Sector.prototype.type="sector";var RingShape=function(){function o(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return o}(),Ring=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new RingShape},a.prototype.buildPath=function(n,s){var l=s.cx,c=s.cy,u=Math.PI*2;n.moveTo(l+s.r,c),n.arc(l,c,s.r,0,u,!1),n.moveTo(l+s.r0,c),n.arc(l,c,s.r0,0,u,!0)},a}(Path);Ring.prototype.type="ring";function smoothBezier(o,a,n,s){var l=[],c=[],u=[],d=[],h,f,p,g;if(s){p=[1/0,1/0],g=[-1/0,-1/0];for(var v=0,b=o.length;v<b;v++)min$1(p,p,o[v]),max$1(g,g,o[v]);min$1(p,p,s[0]),max$1(g,g,s[1])}for(var v=0,b=o.length;v<b;v++){var w=o[v];if(n)h=o[v?v-1:b-1],f=o[(v+1)%b];else if(v===0||v===b-1){l.push(clone$3(o[v]));continue}else h=o[v-1],f=o[v+1];sub(c,f,h),scale$2(c,c,a);var x=distance(w,h),S=distance(w,f),E=x+S;E!==0&&(x/=E,S/=E),scale$2(u,c,-x),scale$2(d,c,S);var T=add([],w,u),C=add([],w,d);s&&(max$1(T,T,p),min$1(T,T,g),max$1(C,C,p),min$1(C,C,g)),l.push(T),l.push(C)}return n&&l.push(l.shift()),l}function buildPath(o,a,n){var s=a.smooth,l=a.points;if(l&&l.length>=2){if(s){var c=smoothBezier(l,s,n,a.smoothConstraint);o.moveTo(l[0][0],l[0][1]);for(var u=l.length,d=0;d<(n?u:u-1);d++){var h=c[d*2],f=c[d*2+1],p=l[(d+1)%u];o.bezierCurveTo(h[0],h[1],f[0],f[1],p[0],p[1])}}else{o.moveTo(l[0][0],l[0][1]);for(var d=1,g=l.length;d<g;d++)o.lineTo(l[d][0],l[d][1])}n&&o.closePath()}}var PolygonShape=function(){function o(){this.points=null,this.smooth=0,this.smoothConstraint=null}return o}(),Polygon=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new PolygonShape},a.prototype.buildPath=function(n,s){buildPath(n,s,!0)},a}(Path);Polygon.prototype.type="polygon";var PolylineShape=function(){function o(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return o}(),Polyline$1=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new PolylineShape},a.prototype.buildPath=function(n,s){buildPath(n,s,!1)},a}(Path);Polyline$1.prototype.type="polyline";var subPixelOptimizeOutputShape={},LineShape=function(){function o(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return o}(),Line$1=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new LineShape},a.prototype.buildPath=function(n,s){var l,c,u,d;if(this.subPixelOptimize){var h=subPixelOptimizeLine$1(subPixelOptimizeOutputShape,s,this.style);l=h.x1,c=h.y1,u=h.x2,d=h.y2}else l=s.x1,c=s.y1,u=s.x2,d=s.y2;var f=s.percent;f!==0&&(n.moveTo(l,c),f<1&&(u=l*(1-f)+u*f,d=c*(1-f)+d*f),n.lineTo(u,d))},a.prototype.pointAt=function(n){var s=this.shape;return[s.x1*(1-n)+s.x2*n,s.y1*(1-n)+s.y2*n]},a}(Path);Line$1.prototype.type="line";var out=[],BezierCurveShape=function(){function o(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return o}();function someVectorAt(o,a,n){var s=o.cpx2,l=o.cpy2;return s!=null||l!=null?[(n?cubicDerivativeAt:cubicAt)(o.x1,o.cpx1,o.cpx2,o.x2,a),(n?cubicDerivativeAt:cubicAt)(o.y1,o.cpy1,o.cpy2,o.y2,a)]:[(n?quadraticDerivativeAt:quadraticAt$1)(o.x1,o.cpx1,o.x2,a),(n?quadraticDerivativeAt:quadraticAt$1)(o.y1,o.cpy1,o.y2,a)]}var BezierCurve=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new BezierCurveShape},a.prototype.buildPath=function(n,s){var l=s.x1,c=s.y1,u=s.x2,d=s.y2,h=s.cpx1,f=s.cpy1,p=s.cpx2,g=s.cpy2,v=s.percent;v!==0&&(n.moveTo(l,c),p==null||g==null?(v<1&&(quadraticSubdivide(l,h,u,v,out),h=out[1],u=out[2],quadraticSubdivide(c,f,d,v,out),f=out[1],d=out[2]),n.quadraticCurveTo(h,f,u,d)):(v<1&&(cubicSubdivide(l,h,p,u,v,out),h=out[1],p=out[2],u=out[3],cubicSubdivide(c,f,g,d,v,out),f=out[1],g=out[2],d=out[3]),n.bezierCurveTo(h,f,p,g,u,d)))},a.prototype.pointAt=function(n){return someVectorAt(this.shape,n,!1)},a.prototype.tangentAt=function(n){var s=someVectorAt(this.shape,n,!0);return normalize$3(s,s)},a}(Path);BezierCurve.prototype.type="bezier-curve";var ArcShape=function(){function o(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return o}(),Arc=function(o){__extends(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new ArcShape},a.prototype.buildPath=function(n,s){var l=s.cx,c=s.cy,u=Math.max(s.r,0),d=s.startAngle,h=s.endAngle,f=s.clockwise,p=Math.cos(d),g=Math.sin(d);n.moveTo(p*u+l,g*u+c),n.arc(l,c,u,d,h,!f)},a}(Path);Arc.prototype.type="arc";var CompoundPath=function(o){__extends(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="compound",n}return a.prototype._updatePathDirty=function(){for(var n=this.shape.paths,s=this.shapeChanged(),l=0;l<n.length;l++)s=s||n[l].shapeChanged();s&&this.dirtyShape()},a.prototype.beforeBrush=function(){this._updatePathDirty();for(var n=this.shape.paths||[],s=this.getGlobalScale(),l=0;l<n.length;l++)n[l].path||n[l].createPathProxy(),n[l].path.setScale(s[0],s[1],n[l].segmentIgnoreThreshold)},a.prototype.buildPath=function(n,s){for(var l=s.paths||[],c=0;c<l.length;c++)l[c].buildPath(n,l[c].shape,!0)},a.prototype.afterBrush=function(){for(var n=this.shape.paths||[],s=0;s<n.length;s++)n[s].pathUpdated()},a.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Path.prototype.getBoundingRect.call(this)},a}(Path),Gradient=function(){function o(a){this.colorStops=a||[]}return o.prototype.addColorStop=function(a,n){this.colorStops.push({offset:a,color:n})},o}(),LinearGradient=function(o){__extends(a,o);function a(n,s,l,c,u,d){var h=o.call(this,u)||this;return h.x=n??0,h.y=s??0,h.x2=l??1,h.y2=c??0,h.type="linear",h.global=d||!1,h}return a}(Gradient),RadialGradient=function(o){__extends(a,o);function a(n,s,l,c,u){var d=o.call(this,c)||this;return d.x=n??.5,d.y=s??.5,d.r=l??.5,d.type="radial",d.global=u||!1,d}return a}(Gradient),extent=[0,0],extent2=[0,0],minTv=new Point,maxTv=new Point,OrientedBoundingRect=function(){function o(a,n){this._corners=[],this._axes=[],this._origin=[0,0];for(var s=0;s<4;s++)this._corners[s]=new Point;for(var s=0;s<2;s++)this._axes[s]=new Point;a&&this.fromBoundingRect(a,n)}return o.prototype.fromBoundingRect=function(a,n){var s=this._corners,l=this._axes,c=a.x,u=a.y,d=c+a.width,h=u+a.height;if(s[0].set(c,u),s[1].set(d,u),s[2].set(d,h),s[3].set(c,h),n)for(var f=0;f<4;f++)s[f].transform(n);Point.sub(l[0],s[1],s[0]),Point.sub(l[1],s[3],s[0]),l[0].normalize(),l[1].normalize();for(var f=0;f<2;f++)this._origin[f]=l[f].dot(s[0])},o.prototype.intersect=function(a,n){var s=!0,l=!n;return minTv.set(1/0,1/0),maxTv.set(0,0),!this._intersectCheckOneSide(this,a,minTv,maxTv,l,1)&&(s=!1,l)||!this._intersectCheckOneSide(a,this,minTv,maxTv,l,-1)&&(s=!1,l)||l||Point.copy(n,s?minTv:maxTv),s},o.prototype._intersectCheckOneSide=function(a,n,s,l,c,u){for(var d=!0,h=0;h<2;h++){var f=this._axes[h];if(this._getProjMinMaxOnAxis(h,a._corners,extent),this._getProjMinMaxOnAxis(h,n._corners,extent2),extent[1]<extent2[0]||extent[0]>extent2[1]){if(d=!1,c)return d;var p=Math.abs(extent2[0]-extent[1]),g=Math.abs(extent[0]-extent2[1]);Math.min(p,g)>l.len()&&(p<g?Point.scale(l,f,-p*u):Point.scale(l,f,g*u))}else if(s){var p=Math.abs(extent2[0]-extent[1]),g=Math.abs(extent[0]-extent2[1]);Math.min(p,g)<s.len()&&(p<g?Point.scale(s,f,p*u):Point.scale(s,f,-g*u))}}return d},o.prototype._getProjMinMaxOnAxis=function(a,n,s){for(var l=this._axes[a],c=this._origin,u=n[0].dot(l)+c[a],d=u,h=u,f=1;f<n.length;f++){var p=n[f].dot(l)+c[a];d=Math.min(p,d),h=Math.max(p,h)}s[0]=d,s[1]=h},o}(),m=[],IncrementalDisplayable=function(o){__extends(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.notClear=!0,n.incremental=!0,n._displayables=[],n._temporaryDisplayables=[],n._cursor=0,n}return a.prototype.traverse=function(n,s){n.call(s,this)},a.prototype.useStyle=function(){this.style={}},a.prototype.getCursor=function(){return this._cursor},a.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},a.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},a.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},a.prototype.addDisplayable=function(n,s){s?this._temporaryDisplayables.push(n):this._displayables.push(n),this.markRedraw()},a.prototype.addDisplayables=function(n,s){s=s||!1;for(var l=0;l<n.length;l++)this.addDisplayable(n[l],s)},a.prototype.getDisplayables=function(){return this._displayables},a.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},a.prototype.eachPendingDisplayable=function(n){for(var s=this._cursor;s<this._displayables.length;s++)n&&n(this._displayables[s]);for(var s=0;s<this._temporaryDisplayables.length;s++)n&&n(this._temporaryDisplayables[s])},a.prototype.update=function(){this.updateTransform();for(var n=this._cursor;n<this._displayables.length;n++){var s=this._displayables[n];s.parent=this,s.update(),s.parent=null}for(var n=0;n<this._temporaryDisplayables.length;n++){var s=this._temporaryDisplayables[n];s.parent=this,s.update(),s.parent=null}},a.prototype.getBoundingRect=function(){if(!this._rect){for(var n=new BoundingRect(1/0,1/0,-1/0,-1/0),s=0;s<this._displayables.length;s++){var l=this._displayables[s],c=l.getBoundingRect().clone();l.needLocalTransform()&&c.applyTransform(l.getLocalTransform(m)),n.union(c)}this._rect=n}return this._rect},a.prototype.contain=function(n,s){var l=this.transformCoordToLocal(n,s),c=this.getBoundingRect();if(c.contain(l[0],l[1]))for(var u=0;u<this._displayables.length;u++){var d=this._displayables[u];if(d.contain(n,s))return!0}return!1},a}(Displayable),transitionStore=makeInner();function getAnimationConfig(o,a,n,s,l){var c;if(a&&a.ecModel){var u=a.ecModel.getUpdatePayload();c=u&&u.animation}var d=a&&a.isAnimationEnabled(),h=o==="update";if(d){var f=void 0,p=void 0,g=void 0;s?(f=retrieve2(s.duration,200),p=retrieve2(s.easing,"cubicOut"),g=0):(f=a.getShallow(h?"animationDurationUpdate":"animationDuration"),p=a.getShallow(h?"animationEasingUpdate":"animationEasing"),g=a.getShallow(h?"animationDelayUpdate":"animationDelay")),c&&(c.duration!=null&&(f=c.duration),c.easing!=null&&(p=c.easing),c.delay!=null&&(g=c.delay)),isFunction$1(g)&&(g=g(n,l)),isFunction$1(f)&&(f=f(n));var v={duration:f||0,delay:g,easing:p};return v}else return null}function animateOrSetProps(o,a,n,s,l,c,u){var d=!1,h;isFunction$1(l)?(u=c,c=l,l=null):isObject$3(l)&&(c=l.cb,u=l.during,d=l.isFrom,h=l.removeOpt,l=l.dataIndex);var f=o==="leave";f||a.stopAnimation("leave");var p=getAnimationConfig(o,s,l,f?h||{}:null,s&&s.getAnimationDelayParams?s.getAnimationDelayParams(a,l):null);if(p&&p.duration>0){var g=p.duration,v=p.delay,b=p.easing,w={duration:g,delay:v||0,easing:b,done:c,force:!!c||!!u,setToFinal:!f,scope:o,during:u};d?a.animateFrom(n,w):a.animateTo(n,w)}else a.stopAnimation(),!d&&a.attr(n),u&&u(1),c&&c()}function updateProps$1(o,a,n,s,l,c){animateOrSetProps("update",o,a,n,s,l,c)}function initProps(o,a,n,s,l,c){animateOrSetProps("enter",o,a,n,s,l,c)}function isElementRemoved(o){if(!o.__zr)return!0;for(var a=0;a<o.animators.length;a++){var n=o.animators[a];if(n.scope==="leave")return!0}return!1}function removeElement(o,a,n,s,l,c){isElementRemoved(o)||animateOrSetProps("leave",o,a,n,s,l,c)}function fadeOutDisplayable(o,a,n,s){o.removeTextContent(),o.removeTextGuideLine(),removeElement(o,{style:{opacity:0}},a,n,s)}function removeElementWithFadeOut(o,a,n){function s(){o.parent&&o.parent.remove(o)}o.isGroup?o.traverse(function(l){l.isGroup||fadeOutDisplayable(l,a,n,s)}):fadeOutDisplayable(o,a,n,s)}function saveOldStyle(o){transitionStore(o).oldStyle=o.style}function getOldStyle(o){return transitionStore(o).oldStyle}var mathMax$6=Math.max,mathMin$6=Math.min,_customShapeMap={};function extendShape(o){return Path.extend(o)}var extendPathFromString=extendFromString;function extendPath(o,a){return extendPathFromString(o,a)}function registerShape(o,a){_customShapeMap[o]=a}function getShapeClass(o){if(_customShapeMap.hasOwnProperty(o))return _customShapeMap[o]}function makePath(o,a,n,s){var l=createFromString(o,a);return n&&(s==="center"&&(n=centerGraphic(n,l.getBoundingRect())),resizePath(l,n)),l}function makeImage(o,a,n){var s=new ZRImage({style:{image:o,x:a.x,y:a.y,width:a.width,height:a.height},onload:function(l){if(n==="center"){var c={width:l.width,height:l.height};s.setStyle(centerGraphic(a,c))}}});return s}function centerGraphic(o,a){var n=a.width/a.height,s=o.height*n,l;s<=o.width?l=o.height:(s=o.width,l=s/n);var c=o.x+o.width/2,u=o.y+o.height/2;return{x:c-s/2,y:u-l/2,width:s,height:l}}var mergePath=mergePath$1;function resizePath(o,a){if(o.applyTransform){var n=o.getBoundingRect(),s=n.calculateTransform(a);o.applyTransform(s)}}function subPixelOptimizeLine(o,a){return subPixelOptimizeLine$1(o,o,{lineWidth:a}),o}function subPixelOptimizeRect(o){return subPixelOptimizeRect$1(o.shape,o.shape,o.style),o}var subPixelOptimize=subPixelOptimize$1;function getTransform$1(o,a){for(var n=identity([]);o&&o!==a;)mul(n,o.getLocalTransform(),n),o=o.parent;return n}function applyTransform(o,a,n){return a&&!isArrayLike(a)&&(a=Transformable.getLocalTransform(a)),n&&(a=invert([],a)),applyTransform$1([],o,a)}function transformDirection(o,a,n){var s=a[4]===0||a[5]===0||a[0]===0?1:Math.abs(2*a[4]/a[0]),l=a[4]===0||a[5]===0||a[2]===0?1:Math.abs(2*a[4]/a[2]),c=[o==="left"?-s:o==="right"?s:0,o==="top"?-l:o==="bottom"?l:0];return c=applyTransform(c,a,n),Math.abs(c[0])>Math.abs(c[1])?c[0]>0?"right":"left":c[1]>0?"bottom":"top"}function isNotGroup(o){return!o.isGroup}function isPath$1(o){return o.shape!=null}function groupTransition(o,a,n){if(!o||!a)return;function s(u){var d={};return u.traverse(function(h){isNotGroup(h)&&h.anid&&(d[h.anid]=h)}),d}function l(u){var d={x:u.x,y:u.y,rotation:u.rotation};return isPath$1(u)&&(d.shape=extend({},u.shape)),d}var c=s(o);a.traverse(function(u){if(isNotGroup(u)&&u.anid){var d=c[u.anid];if(d){var h=l(u);u.attr(l(d)),updateProps$1(u,h,n,getECData(u).dataIndex)}}})}function clipPointsByRect(o,a){return map$1(o,function(n){var s=n[0];s=mathMax$6(s,a.x),s=mathMin$6(s,a.x+a.width);var l=n[1];return l=mathMax$6(l,a.y),l=mathMin$6(l,a.y+a.height),[s,l]})}function clipRectByRect(o,a){var n=mathMax$6(o.x,a.x),s=mathMin$6(o.x+o.width,a.x+a.width),l=mathMax$6(o.y,a.y),c=mathMin$6(o.y+o.height,a.y+a.height);if(s>=n&&c>=l)return{x:n,y:l,width:s-n,height:c-l}}function createIcon(o,a,n){var s=extend({rectHover:!0},a),l=s.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},o)return o.indexOf("image://")===0?(l.image=o.slice(8),defaults(l,n),new ZRImage(s)):makePath(o.replace("path://",""),s,n,"center")}function linePolygonIntersect(o,a,n,s,l){for(var c=0,u=l[l.length-1];c<l.length;c++){var d=l[c];if(lineLineIntersect$1(o,a,n,s,d[0],d[1],u[0],u[1]))return!0;u=d}}function lineLineIntersect$1(o,a,n,s,l,c,u,d){var h=n-o,f=s-a,p=u-l,g=d-c,v=crossProduct2d$1(p,g,h,f);if(nearZero(v))return!1;var b=o-l,w=a-c,x=crossProduct2d$1(b,w,h,f)/v;if(x<0||x>1)return!1;var S=crossProduct2d$1(b,w,p,g)/v;return!(S<0||S>1)}function crossProduct2d$1(o,a,n,s){return o*s-n*a}function nearZero(o){return o<=1e-6&&o>=-1e-6}function setTooltipConfig(o){var a=o.itemTooltipOption,n=o.componentModel,s=o.itemName,l=isString$2(a)?{formatter:a}:a,c=n.mainType,u=n.componentIndex,d={componentType:c,name:s,$vars:["name"]};d[c+"Index"]=u;var h=o.formatterParamsExtra;h&&each$f(keys$1(h),function(p){hasOwn(d,p)||(d[p]=h[p],d.$vars.push(p))});var f=getECData(o.el);f.componentMainType=c,f.componentIndex=u,f.tooltipConfig={name:s,option:defaults({content:s,encodeHTMLContent:!0,formatterParams:d},l)}}function traverseElement(o,a){var n;o.isGroup&&(n=a(o)),n||o.traverse(a)}function traverseElements(o,a){if(o)if(isArray$1(o))for(var n=0;n<o.length;n++)traverseElement(o[n],a);else traverseElement(o,a)}registerShape("circle",Circle);registerShape("ellipse",Ellipse);registerShape("sector",Sector);registerShape("ring",Ring);registerShape("polygon",Polygon);registerShape("polyline",Polyline$1);registerShape("rect",Rect$2);registerShape("line",Line$1);registerShape("bezierCurve",BezierCurve);registerShape("arc",Arc);const graphic$1=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,OrientedBoundingRect,Path,Point,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,applyTransform,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,groupTransition,initProps,isElementRemoved,lineLineIntersect:lineLineIntersect$1,linePolygonIntersect,makeImage,makePath,mergePath,registerShape,removeElement,removeElementWithFadeOut,resizePath,setTooltipConfig,subPixelOptimize,subPixelOptimizeLine,subPixelOptimizeRect,transformDirection,traverseElements,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"}));var EMPTY_OBJ={};function setLabelText(o,a){for(var n=0;n<SPECIAL_STATES.length;n++){var s=SPECIAL_STATES[n],l=a[s],c=o.ensureState(s);c.style=c.style||{},c.style.text=l}var u=o.currentStates.slice();o.clearStates(!0),o.setStyle({text:a.normal}),o.useStates(u,!0)}function getLabelText(o,a,n){var s=o.labelFetcher,l=o.labelDataIndex,c=o.labelDimIndex,u=a.normal,d;s&&(d=s.getFormattedLabel(l,"normal",null,c,u&&u.get("formatter"),n!=null?{interpolatedValue:n}:null)),d==null&&(d=isFunction$1(o.defaultText)?o.defaultText(l,o,n):o.defaultText);for(var h={normal:d},f=0;f<SPECIAL_STATES.length;f++){var p=SPECIAL_STATES[f],g=a[p];h[p]=retrieve2(s?s.getFormattedLabel(l,p,null,c,g&&g.get("formatter")):null,d)}return h}function setLabelStyle(o,a,n,s){n=n||EMPTY_OBJ;for(var l=o instanceof ZRText,c=!1,u=0;u<DISPLAY_STATES.length;u++){var d=a[DISPLAY_STATES[u]];if(d&&d.getShallow("show")){c=!0;break}}var h=l?o:o.getTextContent();if(c){l||(h||(h=new ZRText,o.setTextContent(h)),o.stateProxy&&(h.stateProxy=o.stateProxy));var f=getLabelText(n,a),p=a.normal,g=!!p.getShallow("show"),v=createTextStyle$1(p,s&&s.normal,n,!1,!l);v.text=f.normal,l||o.setTextConfig(createTextConfig(p,n,!1));for(var u=0;u<SPECIAL_STATES.length;u++){var b=SPECIAL_STATES[u],d=a[b];if(d){var w=h.ensureState(b),x=!!retrieve2(d.getShallow("show"),g);if(x!==g&&(w.ignore=!x),w.style=createTextStyle$1(d,s&&s[b],n,!0,!l),w.style.text=f[b],!l){var S=o.ensureState(b);S.textConfig=createTextConfig(d,n,!0)}}}h.silent=!!p.getShallow("silent"),h.style.x!=null&&(v.x=h.style.x),h.style.y!=null&&(v.y=h.style.y),h.ignore=!g,h.useStyle(v),h.dirty(),n.enableTextSetter&&(labelInner(h).setLabelText=function(E){var T=getLabelText(n,a,E);setLabelText(h,T)})}else h&&(h.ignore=!0);o.dirty()}function getLabelStatesModels(o,a){a=a||"label";for(var n={normal:o.getModel(a)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];n[l]=o.getModel([l,a])}return n}function createTextStyle$1(o,a,n,s,l){var c={};return setTextStyleCommon(c,o,n,s,l),a&&extend(c,a),c}function createTextConfig(o,a,n){a=a||{};var s={},l,c=o.getShallow("rotate"),u=retrieve2(o.getShallow("distance"),n?null:5),d=o.getShallow("offset");return l=o.getShallow("position")||(n?null:"inside"),l==="outside"&&(l=a.defaultOutsidePosition||"top"),l!=null&&(s.position=l),d!=null&&(s.offset=d),c!=null&&(c*=Math.PI/180,s.rotation=c),u!=null&&(s.distance=u),s.outsideFill=o.get("color")==="inherit"?a.inheritColor||null:"auto",s}function setTextStyleCommon(o,a,n,s,l){n=n||EMPTY_OBJ;var c=a.ecModel,u=c&&c.option.textStyle,d=getRichItemNames(a),h;if(d){h={};for(var f in d)if(d.hasOwnProperty(f)){var p=a.getModel(["rich",f]);setTokenTextStyle(h[f]={},p,u,n,s,l,!1,!0)}}h&&(o.rich=h);var g=a.get("overflow");g&&(o.overflow=g);var v=a.get("minMargin");v!=null&&(o.margin=v),setTokenTextStyle(o,a,u,n,s,l,!0,!1)}function getRichItemNames(o){for(var a;o&&o!==o.ecModel;){var n=(o.option||EMPTY_OBJ).rich;if(n){a=a||{};for(var s=keys$1(n),l=0;l<s.length;l++){var c=s[l];a[c]=1}}o=o.parentModel}return a}var TEXT_PROPS_WITH_GLOBAL=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],TEXT_PROPS_SELF=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],TEXT_PROPS_BOX=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function setTokenTextStyle(o,a,n,s,l,c,u,d){n=!l&&n||EMPTY_OBJ;var h=s&&s.inheritColor,f=a.getShallow("color"),p=a.getShallow("textBorderColor"),g=retrieve2(a.getShallow("opacity"),n.opacity);(f==="inherit"||f==="auto")&&(process.env.NODE_ENV!=="production"&&f==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),h?f=h:f=null),(p==="inherit"||p==="auto")&&(process.env.NODE_ENV!=="production"&&p==="auto"&&deprecateReplaceLog("color: 'auto'","color: 'inherit'"),h?p=h:p=null),c||(f=f||n.color,p=p||n.textBorderColor),f!=null&&(o.fill=f),p!=null&&(o.stroke=p);var v=retrieve2(a.getShallow("textBorderWidth"),n.textBorderWidth);v!=null&&(o.lineWidth=v);var b=retrieve2(a.getShallow("textBorderType"),n.textBorderType);b!=null&&(o.lineDash=b);var w=retrieve2(a.getShallow("textBorderDashOffset"),n.textBorderDashOffset);w!=null&&(o.lineDashOffset=w),!l&&g==null&&!d&&(g=s&&s.defaultOpacity),g!=null&&(o.opacity=g),!l&&!c&&o.fill==null&&s.inheritColor&&(o.fill=s.inheritColor);for(var x=0;x<TEXT_PROPS_WITH_GLOBAL.length;x++){var S=TEXT_PROPS_WITH_GLOBAL[x],E=retrieve2(a.getShallow(S),n[S]);E!=null&&(o[S]=E)}for(var x=0;x<TEXT_PROPS_SELF.length;x++){var S=TEXT_PROPS_SELF[x],E=a.getShallow(S);E!=null&&(o[S]=E)}if(o.verticalAlign==null){var T=a.getShallow("baseline");T!=null&&(o.verticalAlign=T)}if(!u||!s.disableBox){for(var x=0;x<TEXT_PROPS_BOX.length;x++){var S=TEXT_PROPS_BOX[x],E=a.getShallow(S);E!=null&&(o[S]=E)}var C=a.getShallow("borderType");C!=null&&(o.borderDash=C),(o.backgroundColor==="auto"||o.backgroundColor==="inherit")&&h&&(process.env.NODE_ENV!=="production"&&o.backgroundColor==="auto"&&deprecateReplaceLog("backgroundColor: 'auto'","backgroundColor: 'inherit'"),o.backgroundColor=h),(o.borderColor==="auto"||o.borderColor==="inherit")&&h&&(process.env.NODE_ENV!=="production"&&o.borderColor==="auto"&&deprecateReplaceLog("borderColor: 'auto'","borderColor: 'inherit'"),o.borderColor=h)}}function getFont(o,a){var n=a&&a.getModel("textStyle");return trim$1([o.fontStyle||n&&n.getShallow("fontStyle")||"",o.fontWeight||n&&n.getShallow("fontWeight")||"",(o.fontSize||n&&n.getShallow("fontSize")||12)+"px",o.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var labelInner=makeInner();function setLabelValueAnimation(o,a,n,s){if(o){var l=labelInner(o);l.prevValue=l.value,l.value=n;var c=a.normal;l.valueAnimation=c.get("valueAnimation"),l.valueAnimation&&(l.precision=c.get("precision"),l.defaultInterpolatedText=s,l.statesModels=a)}}function animateLabelValue(o,a,n,s,l){var c=labelInner(o);if(!c.valueAnimation||c.prevValue===c.value)return;var u=c.defaultInterpolatedText,d=retrieve2(c.interpolatedValue,c.prevValue),h=c.value;function f(p){var g=interpolateRawValues(n,c.precision,d,h,p);c.interpolatedValue=p===1?null:g;var v=getLabelText({labelDataIndex:a,labelFetcher:l,defaultText:u?u(g):g+""},c.statesModels,g);setLabelText(o,v)}o.percent=0,(c.prevValue==null?initProps:updateProps$1)(o,{percent:1},s,a,null,f)}var PATH_COLOR=["textStyle","color"],textStyleParams=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],tmpText=new ZRText,TextStyleMixin=function(){function o(){}return o.prototype.getTextColor=function(a){var n=this.ecModel;return this.getShallow("color")||(!a&&n?n.get(PATH_COLOR):null)},o.prototype.getFont=function(){return getFont({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},o.prototype.getTextRect=function(a){for(var n={text:a,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},s=0;s<textStyleParams.length;s++)n[textStyleParams[s]]=this.getShallow(textStyleParams[s]);return tmpText.useStyle(n),tmpText.update(),tmpText.getBoundingRect()},o}(),LINE_STYLE_KEY_MAP=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],getLineStyle=makeStyleMapper(LINE_STYLE_KEY_MAP),LineStyleMixin=function(){function o(){}return o.prototype.getLineStyle=function(a){return getLineStyle(this,a)},o}(),ITEM_STYLE_KEY_MAP=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],getItemStyle=makeStyleMapper(ITEM_STYLE_KEY_MAP),ItemStyleMixin=function(){function o(){}return o.prototype.getItemStyle=function(a,n){return getItemStyle(this,a,n)},o}(),Model=function(){function o(a,n,s){this.parentModel=n,this.ecModel=s,this.option=a}return o.prototype.init=function(a,n,s){},o.prototype.mergeOption=function(a,n){merge(this.option,a,!0)},o.prototype.get=function(a,n){return a==null?this.option:this._doGet(this.parsePath(a),!n&&this.parentModel)},o.prototype.getShallow=function(a,n){var s=this.option,l=s==null?s:s[a];if(l==null&&!n){var c=this.parentModel;c&&(l=c.getShallow(a))}return l},o.prototype.getModel=function(a,n){var s=a!=null,l=s?this.parsePath(a):null,c=s?this._doGet(l):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(l)),new o(c,n,this.ecModel)},o.prototype.isEmpty=function(){return this.option==null},o.prototype.restoreData=function(){},o.prototype.clone=function(){var a=this.constructor;return new a(clone$4(this.option))},o.prototype.parsePath=function(a){return typeof a=="string"?a.split("."):a},o.prototype.resolveParentPath=function(a){return a},o.prototype.isAnimationEnabled=function(){if(!env.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},o.prototype._doGet=function(a,n){var s=this.option;if(!a)return s;for(var l=0;l<a.length&&!(a[l]&&(s=s&&typeof s=="object"?s[a[l]]:null,s==null));l++);return s==null&&n&&(s=n._doGet(this.resolveParentPath(a),n.parentModel)),s},o}();enableClassExtend(Model);enableClassCheck(Model);mixin(Model,LineStyleMixin);mixin(Model,ItemStyleMixin);mixin(Model,AreaStyleMixin);mixin(Model,TextStyleMixin);var base=Math.round(Math.random()*10);function getUID(o){return[o||"",base++].join("_")}function enableSubTypeDefaulter(o){var a={};o.registerSubTypeDefaulter=function(n,s){var l=parseClassType(n);a[l.main]=s},o.determineSubType=function(n,s){var l=s.type;if(!l){var c=parseClassType(n).main;o.hasSubTypes(n)&&a[c]&&(l=a[c](s))}return l}}function enableTopologicalTravel(o,a){o.topologicalTravel=function(c,u,d,h){if(!c.length)return;var f=n(u),p=f.graph,g=f.noEntryList,v={};for(each$f(c,function(T){v[T]=!0});g.length;){var b=g.pop(),w=p[b],x=!!v[b];x&&(d.call(h,b,w.originalDeps.slice()),delete v[b]),each$f(w.successor,x?E:S)}each$f(v,function(){var T="";throw process.env.NODE_ENV!=="production"&&(T=makePrintable("Circular dependency may exists: ",v,c,u)),new Error(T)});function S(T){p[T].entryCount--,p[T].entryCount===0&&g.push(T)}function E(T){v[T]=!0,S(T)}};function n(c){var u={},d=[];return each$f(c,function(h){var f=s(u,h),p=f.originalDeps=a(h),g=l(p,c);f.entryCount=g.length,f.entryCount===0&&d.push(h),each$f(g,function(v){indexOf(f.predecessor,v)<0&&f.predecessor.push(v);var b=s(u,v);indexOf(b.successor,v)<0&&b.successor.push(h)})}),{graph:u,noEntryList:d}}function s(c,u){return c[u]||(c[u]={predecessor:[],successor:[]}),c[u]}function l(c,u){var d=[];return each$f(c,function(h){indexOf(u,h)>=0&&d.push(h)}),d}}function inheritDefaultOption(o,a){return merge(merge({},o,!0),a,!0)}const langEN={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},langZH={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图",custom:"自定义图表",chart:"图表"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}};var LOCALE_ZH="ZH",LOCALE_EN="EN",DEFAULT_LOCALE=LOCALE_EN,localeStorage={},localeModels={},SYSTEM_LANG=env.domSupported?function(){var o=(document.documentElement.lang||navigator.language||navigator.browserLanguage||DEFAULT_LOCALE).toUpperCase();return o.indexOf(LOCALE_ZH)>-1?LOCALE_ZH:DEFAULT_LOCALE}():DEFAULT_LOCALE;function registerLocale(o,a){o=o.toUpperCase(),localeModels[o]=new Model(a),localeStorage[o]=a}function createLocaleObject(o){if(isString$2(o)){var a=localeStorage[o.toUpperCase()]||{};return o===LOCALE_ZH||o===LOCALE_EN?clone$4(a):merge(clone$4(a),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}else return merge(clone$4(o),clone$4(localeStorage[DEFAULT_LOCALE]),!1)}function getLocaleModel(o){return localeModels[o]}function getDefaultLocaleModel(){return localeModels[DEFAULT_LOCALE]}registerLocale(LOCALE_EN,langEN);registerLocale(LOCALE_ZH,langZH);var ONE_SECOND=1e3,ONE_MINUTE=ONE_SECOND*60,ONE_HOUR=ONE_MINUTE*60,ONE_DAY=ONE_HOUR*24,ONE_YEAR=ONE_DAY*365,defaultLeveledFormatter={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},fullDayFormatter="{yyyy}-{MM}-{dd}",fullLeveledFormatter={year:"{yyyy}",month:"{yyyy}-{MM}",day:fullDayFormatter,hour:fullDayFormatter+" "+defaultLeveledFormatter.hour,minute:fullDayFormatter+" "+defaultLeveledFormatter.minute,second:fullDayFormatter+" "+defaultLeveledFormatter.second,millisecond:defaultLeveledFormatter.none},primaryTimeUnits=["year","month","day","hour","minute","second","millisecond"],timeUnits=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function pad(o,a){return o+="","0000".substr(0,a-o.length)+o}function getPrimaryTimeUnit(o){switch(o){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return o}}function isPrimaryTimeUnit(o){return o===getPrimaryTimeUnit(o)}function getDefaultFormatPrecisionOfInterval(o){switch(o){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function format$1(o,a,n,s){var l=parseDate$1(o),c=l[fullYearGetterName(n)](),u=l[monthGetterName(n)]()+1,d=Math.floor((u-1)/3)+1,h=l[dateGetterName(n)](),f=l["get"+(n?"UTC":"")+"Day"](),p=l[hoursGetterName(n)](),g=(p-1)%12+1,v=l[minutesGetterName(n)](),b=l[secondsGetterName(n)](),w=l[millisecondsGetterName(n)](),x=p>=12?"pm":"am",S=x.toUpperCase(),E=s instanceof Model?s:getLocaleModel(s||SYSTEM_LANG)||getDefaultLocaleModel(),T=E.getModel("time"),C=T.get("month"),A=T.get("monthAbbr"),R=T.get("dayOfWeek"),j=T.get("dayOfWeekAbbr");return(a||"").replace(/{a}/g,x+"").replace(/{A}/g,S+"").replace(/{yyyy}/g,c+"").replace(/{yy}/g,pad(c%100+"",2)).replace(/{Q}/g,d+"").replace(/{MMMM}/g,C[u-1]).replace(/{MMM}/g,A[u-1]).replace(/{MM}/g,pad(u,2)).replace(/{M}/g,u+"").replace(/{dd}/g,pad(h,2)).replace(/{d}/g,h+"").replace(/{eeee}/g,R[f]).replace(/{ee}/g,j[f]).replace(/{e}/g,f+"").replace(/{HH}/g,pad(p,2)).replace(/{H}/g,p+"").replace(/{hh}/g,pad(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,pad(v,2)).replace(/{m}/g,v+"").replace(/{ss}/g,pad(b,2)).replace(/{s}/g,b+"").replace(/{SSS}/g,pad(w,3)).replace(/{S}/g,w+"")}function leveledFormat(o,a,n,s,l){var c=null;if(isString$2(n))c=n;else if(isFunction$1(n))c=n(o.value,a,{level:o.level});else{var u=extend({},defaultLeveledFormatter);if(o.level>0)for(var d=0;d<primaryTimeUnits.length;++d)u[primaryTimeUnits[d]]="{primary|"+u[primaryTimeUnits[d]]+"}";var h=n?n.inherit===!1?n:defaults(n,u):u,f=getUnitFromValue(o.value,l);if(h[f])c=h[f];else if(h.inherit){for(var p=timeUnits.indexOf(f),d=p-1;d>=0;--d)if(h[f]){c=h[f];break}c=c||u.none}if(isArray$1(c)){var g=o.level==null?0:o.level>=0?o.level:c.length+o.level;g=Math.min(g,c.length-1),c=c[g]}}return format$1(new Date(o.value),c,l,s)}function getUnitFromValue(o,a){var n=parseDate$1(o),s=n[monthGetterName(a)]()+1,l=n[dateGetterName(a)](),c=n[hoursGetterName(a)](),u=n[minutesGetterName(a)](),d=n[secondsGetterName(a)](),h=n[millisecondsGetterName(a)](),f=h===0,p=f&&d===0,g=p&&u===0,v=g&&c===0,b=v&&l===1,w=b&&s===1;return w?"year":b?"month":v?"day":g?"hour":p?"minute":f?"second":"millisecond"}function getUnitValue(o,a,n){var s=isNumber(o)?parseDate$1(o):o;switch(a=a||getUnitFromValue(o,n),a){case"year":return s[fullYearGetterName(n)]();case"half-year":return s[monthGetterName(n)]()>=6?1:0;case"quarter":return Math.floor((s[monthGetterName(n)]()+1)/4);case"month":return s[monthGetterName(n)]();case"day":return s[dateGetterName(n)]();case"half-day":return s[hoursGetterName(n)]()/24;case"hour":return s[hoursGetterName(n)]();case"minute":return s[minutesGetterName(n)]();case"second":return s[secondsGetterName(n)]();case"millisecond":return s[millisecondsGetterName(n)]()}}function fullYearGetterName(o){return o?"getUTCFullYear":"getFullYear"}function monthGetterName(o){return o?"getUTCMonth":"getMonth"}function dateGetterName(o){return o?"getUTCDate":"getDate"}function hoursGetterName(o){return o?"getUTCHours":"getHours"}function minutesGetterName(o){return o?"getUTCMinutes":"getMinutes"}function secondsGetterName(o){return o?"getUTCSeconds":"getSeconds"}function millisecondsGetterName(o){return o?"getUTCMilliseconds":"getMilliseconds"}function fullYearSetterName(o){return o?"setUTCFullYear":"setFullYear"}function monthSetterName(o){return o?"setUTCMonth":"setMonth"}function dateSetterName(o){return o?"setUTCDate":"setDate"}function hoursSetterName(o){return o?"setUTCHours":"setHours"}function minutesSetterName(o){return o?"setUTCMinutes":"setMinutes"}function secondsSetterName(o){return o?"setUTCSeconds":"setSeconds"}function millisecondsSetterName(o){return o?"setUTCMilliseconds":"setMilliseconds"}function getTextRect(o,a,n,s,l,c,u,d){var h=new ZRText({style:{text:o,font:a,align:n,verticalAlign:s,padding:l,rich:c,overflow:u?"truncate":null,lineHeight:d}});return h.getBoundingRect()}function addCommas(o){if(!isNumeric(o))return isString$2(o)?o:"-";var a=(o+"").split(".");return a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(a.length>1?"."+a[1]:"")}function toCamelCase(o,a){return o=(o||"").toLowerCase().replace(/-(.)/g,function(n,s){return s.toUpperCase()}),a&&o&&(o=o.charAt(0).toUpperCase()+o.slice(1)),o}var normalizeCssArray=normalizeCssArray$1;function makeValueReadable(o,a,n){var s="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function l(p){return p&&trim$1(p)?p:"-"}function c(p){return!!(p!=null&&!isNaN(p)&&isFinite(p))}var u=a==="time",d=o instanceof Date;if(u||d){var h=u?parseDate$1(o):o;if(isNaN(+h)){if(d)return"-"}else return format$1(h,s,n)}if(a==="ordinal")return isStringSafe(o)?l(o):isNumber(o)&&c(o)?o+"":"-";var f=numericToNumber(o);return c(f)?addCommas(f):isStringSafe(o)?l(o):typeof o=="boolean"?o+"":"-"}var TPL_VAR_ALIAS=["a","b","c","d","e","f","g"],wrapVar=function(o,a){return"{"+o+(a??"")+"}"};function formatTpl(o,a,n){isArray$1(a)||(a=[a]);var s=a.length;if(!s)return"";for(var l=a[0].$vars||[],c=0;c<l.length;c++){var u=TPL_VAR_ALIAS[c];o=o.replace(wrapVar(u),wrapVar(u,0))}for(var d=0;d<s;d++)for(var h=0;h<l.length;h++){var f=a[d][l[h]];o=o.replace(wrapVar(TPL_VAR_ALIAS[h],d),n?encodeHTML(f):f)}return o}function formatTplSimple(o,a,n){return each$f(a,function(s,l){o=o.replace("{"+l+"}",s)}),o}function getTooltipMarker(o,a){var n=isString$2(o)?{color:o,extraCssText:a}:o||{},s=n.color,l=n.type;a=n.extraCssText;var c=n.renderMode||"html";if(!s)return"";if(c==="html")return l==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+encodeHTML(s)+";"+(a||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+encodeHTML(s)+";"+(a||"")+'"></span>';var u=n.markerId||"markerX";return{renderMode:c,content:"{"+u+"|}  ",style:l==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:s}:{width:10,height:10,borderRadius:5,backgroundColor:s}}}function formatTime(o,a,n){process.env.NODE_ENV!=="production"&&deprecateReplaceLog("echarts.format.formatTime","echarts.time.format"),(o==="week"||o==="month"||o==="quarter"||o==="half-year"||o==="year")&&(o=`MM-dd
yyyy`);var s=parseDate$1(a),l=n?"getUTC":"get",c=s[l+"FullYear"](),u=s[l+"Month"]()+1,d=s[l+"Date"](),h=s[l+"Hours"](),f=s[l+"Minutes"](),p=s[l+"Seconds"](),g=s[l+"Milliseconds"]();return o=o.replace("MM",pad(u,2)).replace("M",u).replace("yyyy",c).replace("yy",pad(c%100+"",2)).replace("dd",pad(d,2)).replace("d",d).replace("hh",pad(h,2)).replace("h",h).replace("mm",pad(f,2)).replace("m",f).replace("ss",pad(p,2)).replace("s",p).replace("SSS",pad(g,3)),o}function capitalFirst(o){return o&&o.charAt(0).toUpperCase()+o.substr(1)}function convertToColorString(o,a){return a=a||"transparent",isString$2(o)?o:isObject$3(o)&&o.colorStops&&(o.colorStops[0]||{}).color||a}function windowOpen(o,a){if(a==="_blank"||a==="blank"){var n=window.open();n.opener=null,n.location.href=o}else window.open(o,a)}var each$e=each$f,LOCATION_PARAMS=["left","right","top","bottom","width","height"],HV_NAMES=[["width","left","right"],["height","top","bottom"]];function boxLayout(o,a,n,s,l){var c=0,u=0;s==null&&(s=1/0),l==null&&(l=1/0);var d=0;a.eachChild(function(h,f){var p=h.getBoundingRect(),g=a.childAt(f+1),v=g&&g.getBoundingRect(),b,w;if(o==="horizontal"){var x=p.width+(v?-v.x+p.x:0);b=c+x,b>s||h.newline?(c=0,b=x,u+=d+n,d=p.height):d=Math.max(d,p.height)}else{var S=p.height+(v?-v.y+p.y:0);w=u+S,w>l||h.newline?(c+=d+n,u=0,w=S,d=p.width):d=Math.max(d,p.width)}h.newline||(h.x=c,h.y=u,h.markRedraw(),o==="horizontal"?c=b+n:u=w+n)})}var box=boxLayout;curry$1(boxLayout,"vertical");curry$1(boxLayout,"horizontal");function getAvailableSize(o,a,n){var s=a.width,l=a.height,c=parsePercent(o.left,s),u=parsePercent(o.top,l),d=parsePercent(o.right,s),h=parsePercent(o.bottom,l);return(isNaN(c)||isNaN(parseFloat(o.left)))&&(c=0),(isNaN(d)||isNaN(parseFloat(o.right)))&&(d=s),(isNaN(u)||isNaN(parseFloat(o.top)))&&(u=0),(isNaN(h)||isNaN(parseFloat(o.bottom)))&&(h=l),n=normalizeCssArray(n||0),{width:Math.max(d-c-n[1]-n[3],0),height:Math.max(h-u-n[0]-n[2],0)}}function getLayoutRect(o,a,n){n=normalizeCssArray(n||0);var s=a.width,l=a.height,c=parsePercent(o.left,s),u=parsePercent(o.top,l),d=parsePercent(o.right,s),h=parsePercent(o.bottom,l),f=parsePercent(o.width,s),p=parsePercent(o.height,l),g=n[2]+n[0],v=n[1]+n[3],b=o.aspect;switch(isNaN(f)&&(f=s-d-v-c),isNaN(p)&&(p=l-h-g-u),b!=null&&(isNaN(f)&&isNaN(p)&&(b>s/l?f=s*.8:p=l*.8),isNaN(f)&&(f=b*p),isNaN(p)&&(p=f/b)),isNaN(c)&&(c=s-d-f-v),isNaN(u)&&(u=l-h-p-g),o.left||o.right){case"center":c=s/2-f/2-n[3];break;case"right":c=s-f-v;break}switch(o.top||o.bottom){case"middle":case"center":u=l/2-p/2-n[0];break;case"bottom":u=l-p-g;break}c=c||0,u=u||0,isNaN(f)&&(f=s-v-c-(d||0)),isNaN(p)&&(p=l-g-u-(h||0));var w=new BoundingRect(c+n[3],u+n[0],f,p);return w.margin=n,w}function positionElement(o,a,n,s,l,c){var u=!l||!l.hv||l.hv[0],d=!l||!l.hv||l.hv[1],h=l&&l.boundingMode||"all";if(c=c||o,c.x=o.x,c.y=o.y,!u&&!d)return!1;var f;if(h==="raw")f=o.type==="group"?new BoundingRect(0,0,+a.width||0,+a.height||0):o.getBoundingRect();else if(f=o.getBoundingRect(),o.needLocalTransform()){var p=o.getLocalTransform();f=f.clone(),f.applyTransform(p)}var g=getLayoutRect(defaults({width:f.width,height:f.height},a),n,s),v=u?g.x-f.x:0,b=d?g.y-f.y:0;return h==="raw"?(c.x=v,c.y=b):(c.x+=v,c.y+=b),c===o&&o.markRedraw(),!0}function sizeCalculable(o,a){return o[HV_NAMES[a][0]]!=null||o[HV_NAMES[a][1]]!=null&&o[HV_NAMES[a][2]]!=null}function fetchLayoutMode(o){var a=o.layoutMode||o.constructor.layoutMode;return isObject$3(a)?a:a?{type:a}:null}function mergeLayoutParam(o,a,n){var s=n&&n.ignoreSize;!isArray$1(s)&&(s=[s,s]);var l=u(HV_NAMES[0],0),c=u(HV_NAMES[1],1);f(HV_NAMES[0],o,l),f(HV_NAMES[1],o,c);function u(p,g){var v={},b=0,w={},x=0,S=2;if(each$e(p,function(C){w[C]=o[C]}),each$e(p,function(C){d(a,C)&&(v[C]=w[C]=a[C]),h(v,C)&&b++,h(w,C)&&x++}),s[g])return h(a,p[1])?w[p[2]]=null:h(a,p[2])&&(w[p[1]]=null),w;if(x===S||!b)return w;if(b>=S)return v;for(var E=0;E<p.length;E++){var T=p[E];if(!d(v,T)&&d(o,T)){v[T]=o[T];break}}return v}function d(p,g){return p.hasOwnProperty(g)}function h(p,g){return p[g]!=null&&p[g]!=="auto"}function f(p,g,v){each$e(p,function(b){g[b]=v[b]})}}function getLayoutParams(o){return copyLayoutParams({},o)}function copyLayoutParams(o,a){return a&&o&&each$e(LOCATION_PARAMS,function(n){a.hasOwnProperty(n)&&(o[n]=a[n])}),o}var inner$l=makeInner(),ComponentModel=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this,n,s,l)||this;return c.uid=getUID("ec_cpt_model"),c}return a.prototype.init=function(n,s,l){this.mergeDefaultAndTheme(n,l)},a.prototype.mergeDefaultAndTheme=function(n,s){var l=fetchLayoutMode(this),c=l?getLayoutParams(n):{},u=s.getTheme();merge(n,u.get(this.mainType)),merge(n,this.getDefaultOption()),l&&mergeLayoutParam(n,c,l)},a.prototype.mergeOption=function(n,s){merge(this.option,n,!0);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,n,l)},a.prototype.optionUpdated=function(n,s){},a.prototype.getDefaultOption=function(){var n=this.constructor;if(!isExtendedClass(n))return n.defaultOption;var s=inner$l(this);if(!s.defaultOption){for(var l=[],c=n;c;){var u=c.prototype.defaultOption;u&&l.push(u),c=c.superClass}for(var d={},h=l.length-1;h>=0;h--)d=merge(d,l[h],!0);s.defaultOption=d}return s.defaultOption},a.prototype.getReferringComponents=function(n,s){var l=n+"Index",c=n+"Id";return queryReferringComponents(this.ecModel,n,{index:this.get(l,!0),id:this.get(c,!0)},s)},a.prototype.getBoxLayoutParams=function(){var n=this;return{left:n.get("left"),top:n.get("top"),right:n.get("right"),bottom:n.get("bottom"),width:n.get("width"),height:n.get("height")}},a.prototype.getZLevelKey=function(){return""},a.prototype.setZLevel=function(n){this.option.zlevel=n},a.protoInitialize=function(){var n=a.prototype;n.type="component",n.id="",n.name="",n.mainType="",n.subType="",n.componentIndex=0}(),a}(Model);mountExtend(ComponentModel,Model);enableClassManagement(ComponentModel);enableSubTypeDefaulter(ComponentModel);enableTopologicalTravel(ComponentModel,getDependencies);function getDependencies(o){var a=[];return each$f(ComponentModel.getClassesByMainType(o),function(n){a=a.concat(n.dependencies||n.prototype.dependencies||[])}),a=map$1(a,function(n){return parseClassType(n).main}),o!=="dataset"&&indexOf(a,"dataset")<=0&&a.unshift("dataset"),a}var platform="";typeof navigator<"u"&&(platform=navigator.platform||"");var decalColor="rgba(0, 0, 0, 0.2)";const globalDefault={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:decalColor,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:decalColor,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:decalColor,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:decalColor,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:decalColor,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:decalColor,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:platform.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var VISUAL_DIMENSIONS=createHashMap(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),SOURCE_FORMAT_ORIGINAL="original",SOURCE_FORMAT_ARRAY_ROWS="arrayRows",SOURCE_FORMAT_OBJECT_ROWS="objectRows",SOURCE_FORMAT_KEYED_COLUMNS="keyedColumns",SOURCE_FORMAT_TYPED_ARRAY="typedArray",SOURCE_FORMAT_UNKNOWN="unknown",SERIES_LAYOUT_BY_COLUMN="column",SERIES_LAYOUT_BY_ROW="row",BE_ORDINAL={Must:1,Might:2,Not:3},innerGlobalModel=makeInner();function resetSourceDefaulter(o){innerGlobalModel(o).datasetMap=createHashMap()}function makeSeriesEncodeForAxisCoordSys(o,a,n){var s={},l=querySeriesUpstreamDatasetModel(a);if(!l||!o)return s;var c=[],u=[],d=a.ecModel,h=innerGlobalModel(d).datasetMap,f=l.uid+"_"+n.seriesLayoutBy,p,g;o=o.slice(),each$f(o,function(x,S){var E=isObject$3(x)?x:o[S]={name:x};E.type==="ordinal"&&p==null&&(p=S,g=w(E)),s[E.name]=[]});var v=h.get(f)||h.set(f,{categoryWayDim:g,valueWayDim:0});each$f(o,function(x,S){var E=x.name,T=w(x);if(p==null){var C=v.valueWayDim;b(s[E],C,T),b(u,C,T),v.valueWayDim+=T}else if(p===S)b(s[E],0,T),b(c,0,T);else{var C=v.categoryWayDim;b(s[E],C,T),b(u,C,T),v.categoryWayDim+=T}});function b(x,S,E){for(var T=0;T<E;T++)x.push(S+T)}function w(x){var S=x.dimsDef;return S?S.length:1}return c.length&&(s.itemName=c),u.length&&(s.seriesName=u),s}function makeSeriesEncodeForNameBased(o,a,n){var s={},l=querySeriesUpstreamDatasetModel(o);if(!l)return s;var c=a.sourceFormat,u=a.dimensionsDefine,d;(c===SOURCE_FORMAT_OBJECT_ROWS||c===SOURCE_FORMAT_KEYED_COLUMNS)&&each$f(u,function(p,g){(isObject$3(p)?p.name:p)==="name"&&(d=g)});var h=function(){for(var p={},g={},v=[],b=0,w=Math.min(5,n);b<w;b++){var x=doGuessOrdinal(a.data,c,a.seriesLayoutBy,u,a.startIndex,b);v.push(x);var S=x===BE_ORDINAL.Not;if(S&&p.v==null&&b!==d&&(p.v=b),(p.n==null||p.n===p.v||!S&&v[p.n]===BE_ORDINAL.Not)&&(p.n=b),E(p)&&v[p.n]!==BE_ORDINAL.Not)return p;S||(x===BE_ORDINAL.Might&&g.v==null&&b!==d&&(g.v=b),(g.n==null||g.n===g.v)&&(g.n=b))}function E(T){return T.v!=null&&T.n!=null}return E(p)?p:E(g)?g:null}();if(h){s.value=[h.v];var f=d??h.n;s.itemName=[f],s.seriesName=[f]}return s}function querySeriesUpstreamDatasetModel(o){var a=o.get("data",!0);if(!a)return queryReferringComponents(o.ecModel,"dataset",{index:o.get("datasetIndex",!0),id:o.get("datasetId",!0)},SINGLE_REFERRING).models[0]}function queryDatasetUpstreamDatasetModels(o){return!o.get("transform",!0)&&!o.get("fromTransformResult",!0)?[]:queryReferringComponents(o.ecModel,"dataset",{index:o.get("fromDatasetIndex",!0),id:o.get("fromDatasetId",!0)},SINGLE_REFERRING).models}function guessOrdinal(o,a){return doGuessOrdinal(o.data,o.sourceFormat,o.seriesLayoutBy,o.dimensionsDefine,o.startIndex,a)}function doGuessOrdinal(o,a,n,s,l,c){var u,d=5;if(isTypedArray(o))return BE_ORDINAL.Not;var h,f;if(s){var p=s[c];isObject$3(p)?(h=p.name,f=p.type):isString$2(p)&&(h=p)}if(f!=null)return f==="ordinal"?BE_ORDINAL.Must:BE_ORDINAL.Not;if(a===SOURCE_FORMAT_ARRAY_ROWS){var g=o;if(n===SERIES_LAYOUT_BY_ROW){for(var v=g[c],b=0;b<(v||[]).length&&b<d;b++)if((u=A(v[l+b]))!=null)return u}else for(var b=0;b<g.length&&b<d;b++){var w=g[l+b];if(w&&(u=A(w[c]))!=null)return u}}else if(a===SOURCE_FORMAT_OBJECT_ROWS){var x=o;if(!h)return BE_ORDINAL.Not;for(var b=0;b<x.length&&b<d;b++){var S=x[b];if(S&&(u=A(S[h]))!=null)return u}}else if(a===SOURCE_FORMAT_KEYED_COLUMNS){var E=o;if(!h)return BE_ORDINAL.Not;var v=E[h];if(!v||isTypedArray(v))return BE_ORDINAL.Not;for(var b=0;b<v.length&&b<d;b++)if((u=A(v[b]))!=null)return u}else if(a===SOURCE_FORMAT_ORIGINAL)for(var T=o,b=0;b<T.length&&b<d;b++){var S=T[b],C=getDataItemValue(S);if(!isArray$1(C))return BE_ORDINAL.Not;if((u=A(C[c]))!=null)return u}function A(R){var j=isString$2(R);if(R!=null&&Number.isFinite(Number(R))&&R!=="")return j?BE_ORDINAL.Might:BE_ORDINAL.Not;if(j&&R!=="-")return BE_ORDINAL.Must}return BE_ORDINAL.Not}var internalOptionCreatorMap=createHashMap();function registerInternalOptionCreator(o,a){assert(internalOptionCreatorMap.get(o)==null&&a),internalOptionCreatorMap.set(o,a)}function concatInternalOptions(o,a,n){var s=internalOptionCreatorMap.get(a);if(!s)return n;var l=s(o);if(!l)return n;if(process.env.NODE_ENV!=="production")for(var c=0;c<l.length;c++)assert(isComponentIdInternal(l[c]));return n.concat(l)}var innerColor=makeInner(),innerDecal=makeInner(),PaletteMixin=function(){function o(){}return o.prototype.getColorFromPalette=function(a,n,s){var l=normalizeToArray(this.get("color",!0)),c=this.get("colorLayer",!0);return getFromPalette(this,innerColor,l,c,a,n,s)},o.prototype.clearColorPalette=function(){clearPalette(this,innerColor)},o}();function getDecalFromPalette(o,a,n,s){var l=normalizeToArray(o.get(["aria","decal","decals"]));return getFromPalette(o,innerDecal,l,null,a,n,s)}function getNearestPalette(o,a){for(var n=o.length,s=0;s<n;s++)if(o[s].length>a)return o[s];return o[n-1]}function getFromPalette(o,a,n,s,l,c,u){c=c||o;var d=a(c),h=d.paletteIdx||0,f=d.paletteNameMap=d.paletteNameMap||{};if(f.hasOwnProperty(l))return f[l];var p=u==null||!s?n:getNearestPalette(s,u);if(p=p||n,!(!p||!p.length)){var g=p[h];return l&&(f[l]=g),d.paletteIdx=(h+1)%p.length,g}}function clearPalette(o,a){a(o).paletteIdx=0,a(o).paletteNameMap={}}var reCreateSeriesIndices,assertSeriesInitialized,initBase,OPTION_INNER_KEY="\0_ec_inner",OPTION_INNER_VALUE=1,BUITIN_COMPONENTS_MAP={grid:"GridComponent",polar:"PolarComponent",geo:"GeoComponent",singleAxis:"SingleAxisComponent",parallel:"ParallelComponent",calendar:"CalendarComponent",graphic:"GraphicComponent",toolbox:"ToolboxComponent",tooltip:"TooltipComponent",axisPointer:"AxisPointerComponent",brush:"BrushComponent",title:"TitleComponent",timeline:"TimelineComponent",markPoint:"MarkPointComponent",markLine:"MarkLineComponent",markArea:"MarkAreaComponent",legend:"LegendComponent",dataZoom:"DataZoomComponent",visualMap:"VisualMapComponent",xAxis:"GridComponent",yAxis:"GridComponent",angleAxis:"PolarComponent",radiusAxis:"PolarComponent"},BUILTIN_CHARTS_MAP={line:"LineChart",bar:"BarChart",pie:"PieChart",scatter:"ScatterChart",radar:"RadarChart",map:"MapChart",tree:"TreeChart",treemap:"TreemapChart",graph:"GraphChart",gauge:"GaugeChart",funnel:"FunnelChart",parallel:"ParallelChart",sankey:"SankeyChart",boxplot:"BoxplotChart",candlestick:"CandlestickChart",effectScatter:"EffectScatterChart",lines:"LinesChart",heatmap:"HeatmapChart",pictorialBar:"PictorialBarChart",themeRiver:"ThemeRiverChart",sunburst:"SunburstChart",custom:"CustomChart"},componetsMissingLogPrinted={};function checkMissingComponents(o){each$f(o,function(a,n){if(!ComponentModel.hasClass(n)){var s=BUITIN_COMPONENTS_MAP[n];s&&!componetsMissingLogPrinted[s]&&(error("Component "+n+` is used but not imported.
import { `+s+` } from 'echarts/components';
echarts.use([`+s+"]);"),componetsMissingLogPrinted[s]=!0)}})}var GlobalModel=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.init=function(n,s,l,c,u,d){c=c||{},this.option=null,this._theme=new Model(c),this._locale=new Model(u),this._optionManager=d},a.prototype.setOption=function(n,s,l){process.env.NODE_ENV!=="production"&&(assert(n!=null,"option is null/undefined"),assert(n[OPTION_INNER_KEY]!==OPTION_INNER_VALUE,"please use chart.getOption()"));var c=normalizeSetOptionInput(s);this._optionManager.setOption(n,l,c),this._resetOption(null,c)},a.prototype.resetOption=function(n,s){return this._resetOption(n,normalizeSetOptionInput(s))},a.prototype._resetOption=function(n,s){var l=!1,c=this._optionManager;if(!n||n==="recreate"){var u=c.mountOption(n==="recreate");process.env.NODE_ENV!=="production"&&checkMissingComponents(u),!this.option||n==="recreate"?initBase(this,u):(this.restoreData(),this._mergeOption(u,s)),l=!0}if((n==="timeline"||n==="media")&&this.restoreData(),!n||n==="recreate"||n==="timeline"){var d=c.getTimelineOption(this);d&&(l=!0,this._mergeOption(d,s))}if(!n||n==="recreate"||n==="media"){var h=c.getMediaOption(this);h.length&&each$f(h,function(f){l=!0,this._mergeOption(f,s)},this)}return l},a.prototype.mergeOption=function(n){this._mergeOption(n,null)},a.prototype._mergeOption=function(n,s){var l=this.option,c=this._componentsMap,u=this._componentsCount,d=[],h=createHashMap(),f=s&&s.replaceMergeMainTypeMap;resetSourceDefaulter(this),each$f(n,function(g,v){g!=null&&(ComponentModel.hasClass(v)?v&&(d.push(v),h.set(v,!0)):l[v]=l[v]==null?clone$4(g):merge(l[v],g,!0))}),f&&f.each(function(g,v){ComponentModel.hasClass(v)&&!h.get(v)&&(d.push(v),h.set(v,!0))}),ComponentModel.topologicalTravel(d,ComponentModel.getAllClassMainTypes(),p,this);function p(g){var v=concatInternalOptions(this,g,normalizeToArray(n[g])),b=c.get(g),w=b?f&&f.get(g)?"replaceMerge":"normalMerge":"replaceAll",x=mappingToExists(b,v,w);setComponentTypeToKeyInfo(x,g,ComponentModel),l[g]=null,c.set(g,null),u.set(g,0);var S=[],E=[],T=0,C,A;each$f(x,function(R,j){var D=R.existing,O=R.newOption;if(!O)D&&(D.mergeOption({},this),D.optionUpdated({},!1));else{var H=g==="series",q=ComponentModel.getClass(g,R.keyInfo.subType,!H);if(!q){if(process.env.NODE_ENV!=="production"){var Y=R.keyInfo.subType,te=BUILTIN_CHARTS_MAP[Y];componetsMissingLogPrinted[Y]||(componetsMissingLogPrinted[Y]=!0,error(te?"Series "+Y+` is used but not imported.
import { `+te+` } from 'echarts/charts';
echarts.use([`+te+"]);":"Unknown series "+Y))}return}if(g==="tooltip"){if(C){process.env.NODE_ENV!=="production"&&(A||(warn("Currently only one tooltip component is allowed."),A=!0));return}C=!0}if(D&&D.constructor===q)D.name=R.keyInfo.name,D.mergeOption(O,this),D.optionUpdated(O,!1);else{var ee=extend({componentIndex:j},R.keyInfo);D=new q(O,this,this,ee),extend(D,ee),R.brandNew&&(D.__requireNewView=!0),D.init(O,this,this),D.optionUpdated(null,!0)}}D?(S.push(D.option),E.push(D),T++):(S.push(void 0),E.push(void 0))},this),l[g]=S,c.set(g,E),u.set(g,T),g==="series"&&reCreateSeriesIndices(this)}this._seriesIndices||reCreateSeriesIndices(this)},a.prototype.getOption=function(){var n=clone$4(this.option);return each$f(n,function(s,l){if(ComponentModel.hasClass(l)){for(var c=normalizeToArray(s),u=c.length,d=!1,h=u-1;h>=0;h--)c[h]&&!isComponentIdInternal(c[h])?d=!0:(c[h]=null,!d&&u--);c.length=u,n[l]=c}}),delete n[OPTION_INNER_KEY],n},a.prototype.getTheme=function(){return this._theme},a.prototype.getLocaleModel=function(){return this._locale},a.prototype.setUpdatePayload=function(n){this._payload=n},a.prototype.getUpdatePayload=function(){return this._payload},a.prototype.getComponent=function(n,s){var l=this._componentsMap.get(n);if(l){var c=l[s||0];if(c)return c;if(s==null){for(var u=0;u<l.length;u++)if(l[u])return l[u]}}},a.prototype.queryComponents=function(n){var s=n.mainType;if(!s)return[];var l=n.index,c=n.id,u=n.name,d=this._componentsMap.get(s);if(!d||!d.length)return[];var h;return l!=null?(h=[],each$f(normalizeToArray(l),function(f){d[f]&&h.push(d[f])})):c!=null?h=queryByIdOrName("id",c,d):u!=null?h=queryByIdOrName("name",u,d):h=filter(d,function(f){return!!f}),filterBySubType(h,n)},a.prototype.findComponents=function(n){var s=n.query,l=n.mainType,c=d(s),u=c?this.queryComponents(c):filter(this._componentsMap.get(l),function(f){return!!f});return h(filterBySubType(u,n));function d(f){var p=l+"Index",g=l+"Id",v=l+"Name";return f&&(f[p]!=null||f[g]!=null||f[v]!=null)?{mainType:l,index:f[p],id:f[g],name:f[v]}:null}function h(f){return n.filter?filter(f,n.filter):f}},a.prototype.eachComponent=function(n,s,l){var c=this._componentsMap;if(isFunction$1(n)){var u=s,d=n;c.each(function(g,v){for(var b=0;g&&b<g.length;b++){var w=g[b];w&&d.call(u,v,w,w.componentIndex)}})}else for(var h=isString$2(n)?c.get(n):isObject$3(n)?this.findComponents(n):null,f=0;h&&f<h.length;f++){var p=h[f];p&&s.call(l,p,p.componentIndex)}},a.prototype.getSeriesByName=function(n){var s=convertOptionIdName(n,null);return filter(this._componentsMap.get("series"),function(l){return!!l&&s!=null&&l.name===s})},a.prototype.getSeriesByIndex=function(n){return this._componentsMap.get("series")[n]},a.prototype.getSeriesByType=function(n){return filter(this._componentsMap.get("series"),function(s){return!!s&&s.subType===n})},a.prototype.getSeries=function(){return filter(this._componentsMap.get("series"),function(n){return!!n})},a.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},a.prototype.eachSeries=function(n,s){assertSeriesInitialized(this),each$f(this._seriesIndices,function(l){var c=this._componentsMap.get("series")[l];n.call(s,c,l)},this)},a.prototype.eachRawSeries=function(n,s){each$f(this._componentsMap.get("series"),function(l){l&&n.call(s,l,l.componentIndex)})},a.prototype.eachSeriesByType=function(n,s,l){assertSeriesInitialized(this),each$f(this._seriesIndices,function(c){var u=this._componentsMap.get("series")[c];u.subType===n&&s.call(l,u,c)},this)},a.prototype.eachRawSeriesByType=function(n,s,l){return each$f(this.getSeriesByType(n),s,l)},a.prototype.isSeriesFiltered=function(n){return assertSeriesInitialized(this),this._seriesIndicesMap.get(n.componentIndex)==null},a.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},a.prototype.filterSeries=function(n,s){assertSeriesInitialized(this);var l=[];each$f(this._seriesIndices,function(c){var u=this._componentsMap.get("series")[c];n.call(s,u,c)&&l.push(c)},this),this._seriesIndices=l,this._seriesIndicesMap=createHashMap(l)},a.prototype.restoreData=function(n){reCreateSeriesIndices(this);var s=this._componentsMap,l=[];s.each(function(c,u){ComponentModel.hasClass(u)&&l.push(u)}),ComponentModel.topologicalTravel(l,ComponentModel.getAllClassMainTypes(),function(c){each$f(s.get(c),function(u){u&&(c!=="series"||!isNotTargetSeries(u,n))&&u.restoreData()})})},a.internalField=function(){reCreateSeriesIndices=function(n){var s=n._seriesIndices=[];each$f(n._componentsMap.get("series"),function(l){l&&s.push(l.componentIndex)}),n._seriesIndicesMap=createHashMap(s)},assertSeriesInitialized=function(n){if(process.env.NODE_ENV!=="production"&&!n._seriesIndices)throw new Error("Option should contains series.")},initBase=function(n,s){n.option={},n.option[OPTION_INNER_KEY]=OPTION_INNER_VALUE,n._componentsMap=createHashMap({series:[]}),n._componentsCount=createHashMap();var l=s.aria;isObject$3(l)&&l.enabled==null&&(l.enabled=!0),mergeTheme(s,n._theme.option),merge(s,globalDefault,!1),n._mergeOption(s,null)}}(),a}(Model);function isNotTargetSeries(o,a){if(a){var n=a.seriesIndex,s=a.seriesId,l=a.seriesName;return n!=null&&o.componentIndex!==n||s!=null&&o.id!==s||l!=null&&o.name!==l}}function mergeTheme(o,a){var n=o.color&&!o.colorLayer;each$f(a,function(s,l){l==="colorLayer"&&n||ComponentModel.hasClass(l)||(typeof s=="object"?o[l]=o[l]?merge(o[l],s,!1):clone$4(s):o[l]==null&&(o[l]=s))})}function queryByIdOrName(o,a,n){if(isArray$1(a)){var s=createHashMap();return each$f(a,function(c){if(c!=null){var u=convertOptionIdName(c,null);u!=null&&s.set(c,!0)}}),filter(n,function(c){return c&&s.get(c[o])})}else{var l=convertOptionIdName(a,null);return filter(n,function(c){return c&&l!=null&&c[o]===l})}}function filterBySubType(o,a){return a.hasOwnProperty("subType")?filter(o,function(n){return n&&n.subType===a.subType}):o}function normalizeSetOptionInput(o){var a=createHashMap();return o&&each$f(normalizeToArray(o.replaceMerge),function(n){process.env.NODE_ENV!=="production"&&assert(ComponentModel.hasClass(n),'"'+n+'" is not valid component main type in "replaceMerge"'),a.set(n,!0)}),{replaceMergeMainTypeMap:a}}mixin(GlobalModel,PaletteMixin);var availableMethods=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ExtensionAPI=function(){function o(a){each$f(availableMethods,function(n){this[n]=bind$1(a[n],a)},this)}return o}(),coordinateSystemCreators={},CoordinateSystemManager=function(){function o(){this._coordinateSystems=[]}return o.prototype.create=function(a,n){var s=[];each$f(coordinateSystemCreators,function(l,c){var u=l.create(a,n);s=s.concat(u||[])}),this._coordinateSystems=s},o.prototype.update=function(a,n){each$f(this._coordinateSystems,function(s){s.update&&s.update(a,n)})},o.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},o.register=function(a,n){coordinateSystemCreators[a]=n},o.get=function(a){return coordinateSystemCreators[a]},o}(),QUERY_REG=/^(min|max)?(.+)$/,OptionManager=function(){function o(a){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=a}return o.prototype.setOption=function(a,n,s){a&&(each$f(normalizeToArray(a.series),function(u){u&&u.data&&isTypedArray(u.data)&&setAsPrimitive(u.data)}),each$f(normalizeToArray(a.dataset),function(u){u&&u.source&&isTypedArray(u.source)&&setAsPrimitive(u.source)})),a=clone$4(a);var l=this._optionBackup,c=parseRawOption(a,n,!l);this._newBaseOption=c.baseOption,l?(c.timelineOptions.length&&(l.timelineOptions=c.timelineOptions),c.mediaList.length&&(l.mediaList=c.mediaList),c.mediaDefault&&(l.mediaDefault=c.mediaDefault)):this._optionBackup=c},o.prototype.mountOption=function(a){var n=this._optionBackup;return this._timelineOptions=n.timelineOptions,this._mediaList=n.mediaList,this._mediaDefault=n.mediaDefault,this._currentMediaIndices=[],clone$4(a?n.baseOption:this._newBaseOption)},o.prototype.getTimelineOption=function(a){var n,s=this._timelineOptions;if(s.length){var l=a.getComponent("timeline");l&&(n=clone$4(s[l.getCurrentIndex()]))}return n},o.prototype.getMediaOption=function(a){var n=this._api.getWidth(),s=this._api.getHeight(),l=this._mediaList,c=this._mediaDefault,u=[],d=[];if(!l.length&&!c)return d;for(var h=0,f=l.length;h<f;h++)applyMediaQuery(l[h].query,n,s)&&u.push(h);return!u.length&&c&&(u=[-1]),u.length&&!indicesEquals(u,this._currentMediaIndices)&&(d=map$1(u,function(p){return clone$4(p===-1?c.option:l[p].option)})),this._currentMediaIndices=u,d},o}();function parseRawOption(o,a,n){var s=[],l,c,u=o.baseOption,d=o.timeline,h=o.options,f=o.media,p=!!o.media,g=!!(h||d||u&&u.timeline);u?(c=u,c.timeline||(c.timeline=d)):((g||p)&&(o.options=o.media=null),c=o),p&&(isArray$1(f)?each$f(f,function(b){process.env.NODE_ENV!=="production"&&b&&!b.option&&isObject$3(b.query)&&isObject$3(b.query.option)&&error("Illegal media option. Must be like { media: [ { query: {}, option: {} } ] }"),b&&b.option&&(b.query?s.push(b):l||(l=b))}):process.env.NODE_ENV!=="production"&&error("Illegal media option. Must be an array. Like { media: [ {...}, {...} ] }")),v(c),each$f(h,function(b){return v(b)}),each$f(s,function(b){return v(b.option)});function v(b){each$f(a,function(w){w(b,n)})}return{baseOption:c,timelineOptions:h||[],mediaDefault:l,mediaList:s}}function applyMediaQuery(o,a,n){var s={width:a,height:n,aspectratio:a/n},l=!0;return each$f(o,function(c,u){var d=u.match(QUERY_REG);if(!(!d||!d[1]||!d[2])){var h=d[1],f=d[2].toLowerCase();compare(s[f],c,h)||(l=!1)}}),l}function compare(o,a,n){return n==="min"?o>=a:n==="max"?o<=a:o===a}function indicesEquals(o,a){return o.join(",")===a.join(",")}var each$d=each$f,isObject$2=isObject$3,POSSIBLE_STYLES=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function compatEC2ItemStyle(o){var a=o&&o.itemStyle;if(a)for(var n=0,s=POSSIBLE_STYLES.length;n<s;n++){var l=POSSIBLE_STYLES[n],c=a.normal,u=a.emphasis;c&&c[l]&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("itemStyle.normal."+l,l),o[l]=o[l]||{},o[l].normal?merge(o[l].normal,c[l]):o[l].normal=c[l],c[l]=null),u&&u[l]&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("itemStyle.emphasis."+l,"emphasis."+l),o[l]=o[l]||{},o[l].emphasis?merge(o[l].emphasis,u[l]):o[l].emphasis=u[l],u[l]=null)}}function convertNormalEmphasis(o,a,n){if(o&&o[a]&&(o[a].normal||o[a].emphasis)){var s=o[a].normal,l=o[a].emphasis;s&&(process.env.NODE_ENV!=="production"&&deprecateLog("'normal' hierarchy in "+a+" has been removed since 4.0. All style properties are configured in "+a+" directly now."),n?(o[a].normal=o[a].emphasis=null,defaults(o[a],s)):o[a]=s),l&&(process.env.NODE_ENV!=="production"&&deprecateLog(a+".emphasis has been changed to emphasis."+a+" since 4.0"),o.emphasis=o.emphasis||{},o.emphasis[a]=l,l.focus&&(o.emphasis.focus=l.focus),l.blurScope&&(o.emphasis.blurScope=l.blurScope))}}function removeEC3NormalStatus(o){convertNormalEmphasis(o,"itemStyle"),convertNormalEmphasis(o,"lineStyle"),convertNormalEmphasis(o,"areaStyle"),convertNormalEmphasis(o,"label"),convertNormalEmphasis(o,"labelLine"),convertNormalEmphasis(o,"upperLabel"),convertNormalEmphasis(o,"edgeLabel")}function compatTextStyle(o,a){var n=isObject$2(o)&&o[a],s=isObject$2(n)&&n.textStyle;if(s){process.env.NODE_ENV!=="production"&&deprecateLog("textStyle hierarchy in "+a+" has been removed since 4.0. All textStyle properties are configured in "+a+" directly now.");for(var l=0,c=TEXT_STYLE_OPTIONS.length;l<c;l++){var u=TEXT_STYLE_OPTIONS[l];s.hasOwnProperty(u)&&(n[u]=s[u])}}}function compatEC3CommonStyles(o){o&&(removeEC3NormalStatus(o),compatTextStyle(o,"label"),o.emphasis&&compatTextStyle(o.emphasis,"label"))}function processSeries(o){if(isObject$2(o)){compatEC2ItemStyle(o),removeEC3NormalStatus(o),compatTextStyle(o,"label"),compatTextStyle(o,"upperLabel"),compatTextStyle(o,"edgeLabel"),o.emphasis&&(compatTextStyle(o.emphasis,"label"),compatTextStyle(o.emphasis,"upperLabel"),compatTextStyle(o.emphasis,"edgeLabel"));var a=o.markPoint;a&&(compatEC2ItemStyle(a),compatEC3CommonStyles(a));var n=o.markLine;n&&(compatEC2ItemStyle(n),compatEC3CommonStyles(n));var s=o.markArea;s&&compatEC3CommonStyles(s);var l=o.data;if(o.type==="graph"){l=l||o.nodes;var c=o.links||o.edges;if(c&&!isTypedArray(c))for(var u=0;u<c.length;u++)compatEC3CommonStyles(c[u]);each$f(o.categories,function(f){removeEC3NormalStatus(f)})}if(l&&!isTypedArray(l))for(var u=0;u<l.length;u++)compatEC3CommonStyles(l[u]);if(a=o.markPoint,a&&a.data)for(var d=a.data,u=0;u<d.length;u++)compatEC3CommonStyles(d[u]);if(n=o.markLine,n&&n.data)for(var h=n.data,u=0;u<h.length;u++)isArray$1(h[u])?(compatEC3CommonStyles(h[u][0]),compatEC3CommonStyles(h[u][1])):compatEC3CommonStyles(h[u]);o.type==="gauge"?(compatTextStyle(o,"axisLabel"),compatTextStyle(o,"title"),compatTextStyle(o,"detail")):o.type==="treemap"?(convertNormalEmphasis(o.breadcrumb,"itemStyle"),each$f(o.levels,function(f){removeEC3NormalStatus(f)})):o.type==="tree"&&removeEC3NormalStatus(o.leaves)}}function toArr(o){return isArray$1(o)?o:o?[o]:[]}function toObj(o){return(isArray$1(o)?o[0]:o)||{}}function globalCompatStyle(o,a){each$d(toArr(o.series),function(s){isObject$2(s)&&processSeries(s)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];a&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),each$d(n,function(s){each$d(toArr(o[s]),function(l){l&&(compatTextStyle(l,"axisLabel"),compatTextStyle(l.axisPointer,"label"))})}),each$d(toArr(o.parallel),function(s){var l=s&&s.parallelAxisDefault;compatTextStyle(l,"axisLabel"),compatTextStyle(l&&l.axisPointer,"label")}),each$d(toArr(o.calendar),function(s){convertNormalEmphasis(s,"itemStyle"),compatTextStyle(s,"dayLabel"),compatTextStyle(s,"monthLabel"),compatTextStyle(s,"yearLabel")}),each$d(toArr(o.radar),function(s){compatTextStyle(s,"name"),s.name&&s.axisName==null&&(s.axisName=s.name,delete s.name,process.env.NODE_ENV!=="production"&&deprecateLog("name property in radar component has been changed to axisName")),s.nameGap!=null&&s.axisNameGap==null&&(s.axisNameGap=s.nameGap,delete s.nameGap,process.env.NODE_ENV!=="production"&&deprecateLog("nameGap property in radar component has been changed to axisNameGap")),process.env.NODE_ENV!=="production"&&each$d(s.indicator,function(l){l.text&&deprecateReplaceLog("text","name","radar.indicator")})}),each$d(toArr(o.geo),function(s){isObject$2(s)&&(compatEC3CommonStyles(s),each$d(toArr(s.regions),function(l){compatEC3CommonStyles(l)}))}),each$d(toArr(o.timeline),function(s){compatEC3CommonStyles(s),convertNormalEmphasis(s,"label"),convertNormalEmphasis(s,"itemStyle"),convertNormalEmphasis(s,"controlStyle",!0);var l=s.data;isArray$1(l)&&each$f(l,function(c){isObject$3(c)&&(convertNormalEmphasis(c,"label"),convertNormalEmphasis(c,"itemStyle"))})}),each$d(toArr(o.toolbox),function(s){convertNormalEmphasis(s,"iconStyle"),each$d(s.feature,function(l){convertNormalEmphasis(l,"iconStyle")})}),compatTextStyle(toObj(o.axisPointer),"label"),compatTextStyle(toObj(o.tooltip).axisPointer,"label")}function get$1(o,a){for(var n=a.split(","),s=o,l=0;l<n.length&&(s=s&&s[n[l]],s!=null);l++);return s}function set(o,a,n,s){for(var l=a.split(","),c=o,u,d=0;d<l.length-1;d++)u=l[d],c[u]==null&&(c[u]={}),c=c[u];c[l[d]]==null&&(c[l[d]]=n)}function compatLayoutProperties(o){o&&each$f(LAYOUT_PROPERTIES,function(a){a[0]in o&&!(a[1]in o)&&(o[a[1]]=o[a[0]])})}var LAYOUT_PROPERTIES=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],COMPATITABLE_COMPONENTS=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],BAR_ITEM_STYLE_MAP=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function compatBarItemStyle(o){var a=o&&o.itemStyle;if(a)for(var n=0;n<BAR_ITEM_STYLE_MAP.length;n++){var s=BAR_ITEM_STYLE_MAP[n][1],l=BAR_ITEM_STYLE_MAP[n][0];a[s]!=null&&(a[l]=a[s],process.env.NODE_ENV!=="production"&&deprecateReplaceLog(s,l))}}function compatPieLabel(o){o&&o.alignTo==="edge"&&o.margin!=null&&o.edgeDistance==null&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("label.margin","label.edgeDistance","pie"),o.edgeDistance=o.margin)}function compatSunburstState(o){o&&o.downplay&&!o.blur&&(o.blur=o.downplay,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("downplay","blur","sunburst"))}function compatGraphFocus(o){o&&o.focusNodeAdjacency!=null&&(o.emphasis=o.emphasis||{},o.emphasis.focus==null&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("focusNodeAdjacency","emphasis: { focus: 'adjacency'}","graph/sankey"),o.emphasis.focus="adjacency"))}function traverseTree(o,a){if(o)for(var n=0;n<o.length;n++)a(o[n]),o[n]&&traverseTree(o[n].children,a)}function globalBackwardCompat(o,a){globalCompatStyle(o,a),o.series=normalizeToArray(o.series),each$f(o.series,function(n){if(isObject$3(n)){var s=n.type;if(s==="line")n.clipOverflow!=null&&(n.clip=n.clipOverflow,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("clipOverflow","clip","line"));else if(s==="pie"||s==="gauge"){n.clockWise!=null&&(n.clockwise=n.clockWise,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("clockWise","clockwise")),compatPieLabel(n.label);var l=n.data;if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)compatPieLabel(l[c]);n.hoverOffset!=null&&(n.emphasis=n.emphasis||{},(n.emphasis.scaleSize=null)&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("hoverOffset","emphasis.scaleSize"),n.emphasis.scaleSize=n.hoverOffset))}else if(s==="gauge"){var u=get$1(n,"pointer.color");u!=null&&set(n,"itemStyle.color",u)}else if(s==="bar"){compatBarItemStyle(n),compatBarItemStyle(n.backgroundStyle),compatBarItemStyle(n.emphasis);var l=n.data;if(l&&!isTypedArray(l))for(var c=0;c<l.length;c++)typeof l[c]=="object"&&(compatBarItemStyle(l[c]),compatBarItemStyle(l[c]&&l[c].emphasis))}else if(s==="sunburst"){var d=n.highlightPolicy;d&&(n.emphasis=n.emphasis||{},n.emphasis.focus||(n.emphasis.focus=d,process.env.NODE_ENV!=="production"&&deprecateReplaceLog("highlightPolicy","emphasis.focus","sunburst"))),compatSunburstState(n),traverseTree(n.data,compatSunburstState)}else s==="graph"||s==="sankey"?compatGraphFocus(n):s==="map"&&(n.mapType&&!n.map&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("mapType","map","map"),n.map=n.mapType),n.mapLocation&&(process.env.NODE_ENV!=="production"&&deprecateLog("`mapLocation` is not used anymore."),defaults(n,n.mapLocation)));n.hoverAnimation!=null&&(n.emphasis=n.emphasis||{},n.emphasis&&n.emphasis.scale==null&&(process.env.NODE_ENV!=="production"&&deprecateReplaceLog("hoverAnimation","emphasis.scale"),n.emphasis.scale=n.hoverAnimation)),compatLayoutProperties(n)}}),o.dataRange&&(o.visualMap=o.dataRange),each$f(COMPATITABLE_COMPONENTS,function(n){var s=o[n];s&&(isArray$1(s)||(s=[s]),each$f(s,function(l){compatLayoutProperties(l)}))})}function dataStack$1(o){var a=createHashMap();o.eachSeries(function(n){var s=n.get("stack");if(s){var l=a.get(s)||a.set(s,[]),c=n.getData(),u={stackResultDimension:c.getCalculationInfo("stackResultDimension"),stackedOverDimension:c.getCalculationInfo("stackedOverDimension"),stackedDimension:c.getCalculationInfo("stackedDimension"),stackedByDimension:c.getCalculationInfo("stackedByDimension"),isStackedByIndex:c.getCalculationInfo("isStackedByIndex"),data:c,seriesModel:n};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;l.length&&c.setCalculationInfo("stackedOnSeries",l[l.length-1].seriesModel),l.push(u)}}),a.each(calculateStack)}function calculateStack(o){each$f(o,function(a,n){var s=[],l=[NaN,NaN],c=[a.stackResultDimension,a.stackedOverDimension],u=a.data,d=a.isStackedByIndex,h=a.seriesModel.get("stackStrategy")||"samesign";u.modify(c,function(f,p,g){var v=u.get(a.stackedDimension,g);if(isNaN(v))return l;var b,w;d?w=u.getRawIndex(g):b=u.get(a.stackedByDimension,g);for(var x=NaN,S=n-1;S>=0;S--){var E=o[S];if(d||(w=E.data.rawIndexOf(E.stackedByDimension,b)),w>=0){var T=E.data.getByRawIndex(E.stackResultDimension,w);if(h==="all"||h==="positive"&&T>0||h==="negative"&&T<0||h==="samesign"&&v>=0&&T>0||h==="samesign"&&v<=0&&T<0){v=addSafe(v,T),x=T;break}}}return s[0]=v,s[1]=x,s})})}var SourceImpl=function(){function o(a){this.data=a.data||(a.sourceFormat===SOURCE_FORMAT_KEYED_COLUMNS?{}:[]),this.sourceFormat=a.sourceFormat||SOURCE_FORMAT_UNKNOWN,this.seriesLayoutBy=a.seriesLayoutBy||SERIES_LAYOUT_BY_COLUMN,this.startIndex=a.startIndex||0,this.dimensionsDetectedCount=a.dimensionsDetectedCount,this.metaRawOption=a.metaRawOption;var n=this.dimensionsDefine=a.dimensionsDefine;if(n)for(var s=0;s<n.length;s++){var l=n[s];l.type==null&&guessOrdinal(this,s)===BE_ORDINAL.Must&&(l.type="ordinal")}}return o}();function isSourceInstance(o){return o instanceof SourceImpl}function createSource(o,a,n){n=n||detectSourceFormat(o);var s=a.seriesLayoutBy,l=determineSourceDimensions(o,n,s,a.sourceHeader,a.dimensions),c=new SourceImpl({data:o,sourceFormat:n,seriesLayoutBy:s,dimensionsDefine:l.dimensionsDefine,startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount,metaRawOption:clone$4(a)});return c}function createSourceFromSeriesDataOption(o){return new SourceImpl({data:o,sourceFormat:isTypedArray(o)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL})}function cloneSourceShallow(o){return new SourceImpl({data:o.data,sourceFormat:o.sourceFormat,seriesLayoutBy:o.seriesLayoutBy,dimensionsDefine:clone$4(o.dimensionsDefine),startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount})}function detectSourceFormat(o){var a=SOURCE_FORMAT_UNKNOWN;if(isTypedArray(o))a=SOURCE_FORMAT_TYPED_ARRAY;else if(isArray$1(o)){o.length===0&&(a=SOURCE_FORMAT_ARRAY_ROWS);for(var n=0,s=o.length;n<s;n++){var l=o[n];if(l!=null){if(isArray$1(l)||isTypedArray(l)){a=SOURCE_FORMAT_ARRAY_ROWS;break}else if(isObject$3(l)){a=SOURCE_FORMAT_OBJECT_ROWS;break}}}}else if(isObject$3(o)){for(var c in o)if(hasOwn(o,c)&&isArrayLike(o[c])){a=SOURCE_FORMAT_KEYED_COLUMNS;break}}return a}function determineSourceDimensions(o,a,n,s,l){var c,u;if(!o)return{dimensionsDefine:normalizeDimensionsOption(l),startIndex:u,dimensionsDetectedCount:c};if(a===SOURCE_FORMAT_ARRAY_ROWS){var d=o;s==="auto"||s==null?arrayRowsTravelFirst(function(f){f!=null&&f!=="-"&&(isString$2(f)?u==null&&(u=1):u=0)},n,d,10):u=isNumber(s)?s:s?1:0,!l&&u===1&&(l=[],arrayRowsTravelFirst(function(f,p){l[p]=f!=null?f+"":""},n,d,1/0)),c=l?l.length:n===SERIES_LAYOUT_BY_ROW?d.length:d[0]?d[0].length:null}else if(a===SOURCE_FORMAT_OBJECT_ROWS)l||(l=objectRowsCollectDimensions(o));else if(a===SOURCE_FORMAT_KEYED_COLUMNS)l||(l=[],each$f(o,function(f,p){l.push(p)}));else if(a===SOURCE_FORMAT_ORIGINAL){var h=getDataItemValue(o[0]);c=isArray$1(h)&&h.length||1}else a===SOURCE_FORMAT_TYPED_ARRAY&&process.env.NODE_ENV!=="production"&&assert(!!l,"dimensions must be given if data is TypedArray.");return{startIndex:u,dimensionsDefine:normalizeDimensionsOption(l),dimensionsDetectedCount:c}}function objectRowsCollectDimensions(o){for(var a=0,n;a<o.length&&!(n=o[a++]););if(n)return keys$1(n)}function normalizeDimensionsOption(o){if(o){var a=createHashMap();return map$1(o,function(n,s){n=isObject$3(n)?n:{name:n};var l={name:n.name,displayName:n.displayName,type:n.type};if(l.name==null)return l;l.name+="",l.displayName==null&&(l.displayName=l.name);var c=a.get(l.name);return c?l.name+="-"+c.count++:a.set(l.name,{count:1}),l})}}function arrayRowsTravelFirst(o,a,n,s){if(a===SERIES_LAYOUT_BY_ROW)for(var l=0;l<n.length&&l<s;l++)o(n[l]?n[l][0]:null,l);else for(var c=n[0]||[],l=0;l<c.length&&l<s;l++)o(c[l],l)}function shouldRetrieveDataByName(o){var a=o.sourceFormat;return a===SOURCE_FORMAT_OBJECT_ROWS||a===SOURCE_FORMAT_KEYED_COLUMNS}var _a,_b,_c,providerMethods,mountMethods,DefaultDataProvider=function(){function o(a,n){var s=isSourceInstance(a)?a:createSourceFromSeriesDataOption(a);this._source=s;var l=this._data=s.data;if(s.sourceFormat===SOURCE_FORMAT_TYPED_ARRAY){if(process.env.NODE_ENV!=="production"&&n==null)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=n,this._data=l}mountMethods(this,l,s)}return o.prototype.getSource=function(){return this._source},o.prototype.count=function(){return 0},o.prototype.getItem=function(a,n){},o.prototype.appendData=function(a){},o.prototype.clean=function(){},o.protoInitialize=function(){var a=o.prototype;a.pure=!1,a.persistent=!0}(),o.internalField=function(){var a;mountMethods=function(u,d,h){var f=h.sourceFormat,p=h.seriesLayoutBy,g=h.startIndex,v=h.dimensionsDefine,b=providerMethods[getMethodMapKey(f,p)];if(process.env.NODE_ENV!=="production"&&assert(b,"Invalide sourceFormat: "+f),extend(u,b),f===SOURCE_FORMAT_TYPED_ARRAY)u.getItem=n,u.count=l,u.fillStorage=s;else{var w=getRawSourceItemGetter(f,p);u.getItem=bind$1(w,null,d,g,v);var x=getRawSourceDataCounter(f,p);u.count=bind$1(x,null,d,g,v)}};var n=function(u,d){u=u-this._offset,d=d||[];for(var h=this._data,f=this._dimSize,p=f*u,g=0;g<f;g++)d[g]=h[p+g];return d},s=function(u,d,h,f){for(var p=this._data,g=this._dimSize,v=0;v<g;v++){for(var b=f[v],w=b[0]==null?1/0:b[0],x=b[1]==null?-1/0:b[1],S=d-u,E=h[v],T=0;T<S;T++){var C=p[T*g+v];E[u+T]=C,C<w&&(w=C),C>x&&(x=C)}b[0]=w,b[1]=x}},l=function(){return this._data?this._data.length/this._dimSize:0};providerMethods=(a={},a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]={pure:!0,appendData:c},a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},a[SOURCE_FORMAT_OBJECT_ROWS]={pure:!0,appendData:c},a[SOURCE_FORMAT_KEYED_COLUMNS]={pure:!0,appendData:function(u){var d=this._data;each$f(u,function(h,f){for(var p=d[f]||(d[f]=[]),g=0;g<(h||[]).length;g++)p.push(h[g])})}},a[SOURCE_FORMAT_ORIGINAL]={appendData:c},a[SOURCE_FORMAT_TYPED_ARRAY]={persistent:!1,pure:!0,appendData:function(u){process.env.NODE_ENV!=="production"&&assert(isTypedArray(u),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=u},clean:function(){this._offset+=this.count(),this._data=null}},a);function c(u){for(var d=0;d<u.length;d++)this._data.push(u[d])}}(),o}(),getItemSimply=function(o,a,n,s){return o[s]},rawSourceItemGetterMap=(_a={},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(o,a,n,s){return o[s+a]},_a[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(o,a,n,s,l){s+=a;for(var c=l||[],u=o,d=0;d<u.length;d++){var h=u[d];c[d]=h?h[s]:null}return c},_a[SOURCE_FORMAT_OBJECT_ROWS]=getItemSimply,_a[SOURCE_FORMAT_KEYED_COLUMNS]=function(o,a,n,s,l){for(var c=l||[],u=0;u<n.length;u++){var d=n[u].name;if(process.env.NODE_ENV!=="production"&&d==null)throw new Error;var h=o[d];c[u]=h?h[s]:null}return c},_a[SOURCE_FORMAT_ORIGINAL]=getItemSimply,_a);function getRawSourceItemGetter(o,a){var n=rawSourceItemGetterMap[getMethodMapKey(o,a)];return process.env.NODE_ENV!=="production"&&assert(n,'Do not support get item on "'+o+'", "'+a+'".'),n}var countSimply=function(o,a,n){return o.length},rawSourceDataCounterMap=(_b={},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_COLUMN]=function(o,a,n){return Math.max(0,o.length-a)},_b[SOURCE_FORMAT_ARRAY_ROWS+"_"+SERIES_LAYOUT_BY_ROW]=function(o,a,n){var s=o[0];return s?Math.max(0,s.length-a):0},_b[SOURCE_FORMAT_OBJECT_ROWS]=countSimply,_b[SOURCE_FORMAT_KEYED_COLUMNS]=function(o,a,n){var s=n[0].name;if(process.env.NODE_ENV!=="production"&&s==null)throw new Error;var l=o[s];return l?l.length:0},_b[SOURCE_FORMAT_ORIGINAL]=countSimply,_b);function getRawSourceDataCounter(o,a){var n=rawSourceDataCounterMap[getMethodMapKey(o,a)];return process.env.NODE_ENV!=="production"&&assert(n,'Do not support count on "'+o+'", "'+a+'".'),n}var getRawValueSimply=function(o,a,n){return o[a]},rawSourceValueGetterMap=(_c={},_c[SOURCE_FORMAT_ARRAY_ROWS]=getRawValueSimply,_c[SOURCE_FORMAT_OBJECT_ROWS]=function(o,a,n){return o[n]},_c[SOURCE_FORMAT_KEYED_COLUMNS]=getRawValueSimply,_c[SOURCE_FORMAT_ORIGINAL]=function(o,a,n){var s=getDataItemValue(o);return s instanceof Array?s[a]:s},_c[SOURCE_FORMAT_TYPED_ARRAY]=getRawValueSimply,_c);function getRawSourceValueGetter(o){var a=rawSourceValueGetterMap[o];return process.env.NODE_ENV!=="production"&&assert(a,'Do not support get value on "'+o+'".'),a}function getMethodMapKey(o,a){return o===SOURCE_FORMAT_ARRAY_ROWS?o+"_"+a:o}function retrieveRawValue(o,a,n){if(o){var s=o.getRawDataItem(a);if(s!=null){var l=o.getStore(),c=l.getSource().sourceFormat;if(n!=null){var u=o.getDimensionIndex(n),d=l.getDimensionProperty(u);return getRawSourceValueGetter(c)(s,u,d)}else{var h=s;return c===SOURCE_FORMAT_ORIGINAL&&(h=getDataItemValue(s)),h}}}}var DIMENSION_LABEL_REG=/\{@(.+?)\}/g,DataFormatMixin=function(){function o(){}return o.prototype.getDataParams=function(a,n){var s=this.getData(n),l=this.getRawValue(a,n),c=s.getRawIndex(a),u=s.getName(a),d=s.getRawDataItem(a),h=s.getItemVisual(a,"style"),f=h&&h[s.getItemVisual(a,"drawType")||"fill"],p=h&&h.stroke,g=this.mainType,v=g==="series",b=s.userOutput&&s.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:v?this.subType:null,seriesIndex:this.seriesIndex,seriesId:v?this.id:null,seriesName:v?this.name:null,name:u,dataIndex:c,data:d,dataType:n,value:l,color:f,borderColor:p,dimensionNames:b?b.fullDimensions:null,encode:b?b.encode:null,$vars:["seriesName","name","value"]}},o.prototype.getFormattedLabel=function(a,n,s,l,c,u){n=n||"normal";var d=this.getData(s),h=this.getDataParams(a,s);if(u&&(h.value=u.interpolatedValue),l!=null&&isArray$1(h.value)&&(h.value=h.value[l]),!c){var f=d.getItemModel(a);c=f.get(n==="normal"?["label","formatter"]:[n,"label","formatter"])}if(isFunction$1(c))return h.status=n,h.dimensionIndex=l,c(h);if(isString$2(c)){var p=formatTpl(c,h);return p.replace(DIMENSION_LABEL_REG,function(g,v){var b=v.length,w=v;w.charAt(0)==="["&&w.charAt(b-1)==="]"&&(w=+w.slice(1,b-1),process.env.NODE_ENV!=="production"&&isNaN(w)&&error("Invalide label formatter: @"+v+", only support @[0], @[1], @[2], ..."));var x=retrieveRawValue(d,a,w);if(u&&isArray$1(u.interpolatedValue)){var S=d.getDimensionIndex(w);S>=0&&(x=u.interpolatedValue[S])}return x!=null?x+"":""})}},o.prototype.getRawValue=function(a,n){return retrieveRawValue(this.getData(n),a)},o.prototype.formatTooltip=function(a,n,s){},o}();function normalizeTooltipFormatResult(o){var a,n;return isObject$3(o)?o.type?n=o:process.env.NODE_ENV!=="production"&&console.warn("The return type of `formatTooltip` is not supported: "+makePrintable(o)):a=o,{text:a,frag:n}}function createTask(o){return new Task(o)}var Task=function(){function o(a){a=a||{},this._reset=a.reset,this._plan=a.plan,this._count=a.count,this._onDirty=a.onDirty,this._dirty=!0}return o.prototype.perform=function(a){var n=this._upstream,s=a&&a.skip;if(this._dirty&&n){var l=this.context;l.data=l.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var c;this._plan&&!s&&(c=this._plan(this.context));var u=p(this._modBy),d=this._modDataCount||0,h=p(a&&a.modBy),f=a&&a.modDataCount||0;(u!==h||d!==f)&&(c="reset");function p(T){return!(T>=1)&&(T=1),T}var g;(this._dirty||c==="reset")&&(this._dirty=!1,g=this._doReset(s)),this._modBy=h,this._modDataCount=f;var v=a&&a.step;if(n?(process.env.NODE_ENV!=="production"&&assert(n._outputDueEnd!=null),this._dueEnd=n._outputDueEnd):(process.env.NODE_ENV!=="production"&&assert(!this._progress||this._count),this._dueEnd=this._count?this._count(this.context):1/0),this._progress){var b=this._dueIndex,w=Math.min(v!=null?this._dueIndex+v:1/0,this._dueEnd);if(!s&&(g||b<w)){var x=this._progress;if(isArray$1(x))for(var S=0;S<x.length;S++)this._doProgress(x[S],b,w,h,f);else this._doProgress(x,b,w,h,f)}this._dueIndex=w;var E=this._settedOutputEnd!=null?this._settedOutputEnd:w;process.env.NODE_ENV!=="production"&&assert(E>=this._outputDueEnd),this._outputDueEnd=E}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},o.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},o.prototype._doProgress=function(a,n,s,l,c){iterator.reset(n,s,l,c),this._callingProgress=a,this._callingProgress({start:n,end:s,count:s-n,next:iterator.next},this.context)},o.prototype._doReset=function(a){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var n,s;!a&&this._reset&&(n=this._reset(this.context),n&&n.progress&&(s=n.forceFirstProgress,n=n.progress),isArray$1(n)&&!n.length&&(n=null)),this._progress=n,this._modBy=this._modDataCount=null;var l=this._downstream;return l&&l.dirty(),s},o.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},o.prototype.pipe=function(a){process.env.NODE_ENV!=="production"&&assert(a&&!a._disposed&&a!==this),(this._downstream!==a||this._dirty)&&(this._downstream=a,a._upstream=this,a.dirty())},o.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},o.prototype.getUpstream=function(){return this._upstream},o.prototype.getDownstream=function(){return this._downstream},o.prototype.setOutputEnd=function(a){this._outputDueEnd=this._settedOutputEnd=a},o}(),iterator=function(){var o,a,n,s,l,c={reset:function(h,f,p,g){a=h,o=f,n=p,s=g,l=Math.ceil(s/n),c.next=n>1&&s>0?d:u}};return c;function u(){return a<o?a++:null}function d(){var h=a%l*n+Math.ceil(a/l),f=a>=o?null:h<s?h:a;return a++,f}}();function parseDataValue(o,a){var n=a&&a.type;return n==="ordinal"?o:(n==="time"&&!isNumber(o)&&o!=null&&o!=="-"&&(o=+parseDate$1(o)),o==null||o===""?NaN:Number(o))}var valueParserMap=createHashMap({number:function(o){return parseFloat(o)},time:function(o){return+parseDate$1(o)},trim:function(o){return isString$2(o)?trim$1(o):o}});function getRawValueParser(o){return valueParserMap.get(o)}var ORDER_COMPARISON_OP_MAP={lt:function(o,a){return o<a},lte:function(o,a){return o<=a},gt:function(o,a){return o>a},gte:function(o,a){return o>=a}},FilterOrderComparator=function(){function o(a,n){if(!isNumber(n)){var s="";process.env.NODE_ENV!=="production"&&(s='rvalue of "<", ">", "<=", ">=" can only be number in filter.'),throwError(s)}this._opFn=ORDER_COMPARISON_OP_MAP[a],this._rvalFloat=numericToNumber(n)}return o.prototype.evaluate=function(a){return isNumber(a)?this._opFn(a,this._rvalFloat):this._opFn(numericToNumber(a),this._rvalFloat)},o}(),SortOrderComparator=function(){function o(a,n){var s=a==="desc";this._resultLT=s?1:-1,n==null&&(n=s?"min":"max"),this._incomparable=n==="min"?-1/0:1/0}return o.prototype.evaluate=function(a,n){var s=isNumber(a)?a:numericToNumber(a),l=isNumber(n)?n:numericToNumber(n),c=isNaN(s),u=isNaN(l);if(c&&(s=this._incomparable),u&&(l=this._incomparable),c&&u){var d=isString$2(a),h=isString$2(n);d&&(s=h?a:0),h&&(l=d?n:0)}return s<l?this._resultLT:s>l?-this._resultLT:0},o}(),FilterEqualityComparator=function(){function o(a,n){this._rval=n,this._isEQ=a,this._rvalTypeof=typeof n,this._rvalFloat=numericToNumber(n)}return o.prototype.evaluate=function(a){var n=a===this._rval;if(!n){var s=typeof a;s!==this._rvalTypeof&&(s==="number"||this._rvalTypeof==="number")&&(n=numericToNumber(a)===this._rvalFloat)}return this._isEQ?n:!n},o}();function createFilterComparator(o,a){return o==="eq"||o==="ne"?new FilterEqualityComparator(o==="eq",a):hasOwn(ORDER_COMPARISON_OP_MAP,o)?new FilterOrderComparator(o,a):null}var ExternalSource=function(){function o(){}return o.prototype.getRawData=function(){throw new Error("not supported")},o.prototype.getRawDataItem=function(a){throw new Error("not supported")},o.prototype.cloneRawData=function(){},o.prototype.getDimensionInfo=function(a){},o.prototype.cloneAllDimensionInfo=function(){},o.prototype.count=function(){},o.prototype.retrieveValue=function(a,n){},o.prototype.retrieveValueFromItem=function(a,n){},o.prototype.convertValue=function(a,n){return parseDataValue(a,n)},o}();function createExternalSource(o,a){var n=new ExternalSource,s=o.data,l=n.sourceFormat=o.sourceFormat,c=o.startIndex,u="";o.seriesLayoutBy!==SERIES_LAYOUT_BY_COLUMN&&(process.env.NODE_ENV!=="production"&&(u='`seriesLayoutBy` of upstream dataset can only be "column" in data transform.'),throwError(u));var d=[],h={},f=o.dimensionsDefine;if(f)each$f(f,function(x,S){var E=x.name,T={index:S,name:E,displayName:x.displayName};if(d.push(T),E!=null){var C="";hasOwn(h,E)&&(process.env.NODE_ENV!=="production"&&(C='dimension name "'+E+'" duplicated.'),throwError(C)),h[E]=T}});else for(var p=0;p<o.dimensionsDetectedCount;p++)d.push({index:p});var g=getRawSourceItemGetter(l,SERIES_LAYOUT_BY_COLUMN);a.__isBuiltIn&&(n.getRawDataItem=function(x){return g(s,c,d,x)},n.getRawData=bind$1(getRawData,null,o)),n.cloneRawData=bind$1(cloneRawData,null,o);var v=getRawSourceDataCounter(l,SERIES_LAYOUT_BY_COLUMN);n.count=bind$1(v,null,s,c,d);var b=getRawSourceValueGetter(l);n.retrieveValue=function(x,S){var E=g(s,c,d,x);return w(E,S)};var w=n.retrieveValueFromItem=function(x,S){if(x!=null){var E=d[S];if(E)return b(x,S,E.name)}};return n.getDimensionInfo=bind$1(getDimensionInfo,null,d,h),n.cloneAllDimensionInfo=bind$1(cloneAllDimensionInfo,null,d),n}function getRawData(o){var a=o.sourceFormat;if(!isSupportedSourceFormat(a)){var n="";process.env.NODE_ENV!=="production"&&(n="`getRawData` is not supported in source format "+a),throwError(n)}return o.data}function cloneRawData(o){var a=o.sourceFormat,n=o.data;if(!isSupportedSourceFormat(a)){var s="";process.env.NODE_ENV!=="production"&&(s="`cloneRawData` is not supported in source format "+a),throwError(s)}if(a===SOURCE_FORMAT_ARRAY_ROWS){for(var l=[],c=0,u=n.length;c<u;c++)l.push(n[c].slice());return l}else if(a===SOURCE_FORMAT_OBJECT_ROWS){for(var l=[],c=0,u=n.length;c<u;c++)l.push(extend({},n[c]));return l}}function getDimensionInfo(o,a,n){if(n!=null){if(isNumber(n)||!isNaN(n)&&!hasOwn(a,n))return o[n];if(hasOwn(a,n))return a[n]}}function cloneAllDimensionInfo(o){return clone$4(o)}var externalTransformMap=createHashMap();function registerExternalTransform(o){o=clone$4(o);var a=o.type,n="";a||(process.env.NODE_ENV!=="production"&&(n="Must have a `type` when `registerTransform`."),throwError(n));var s=a.split(":");s.length!==2&&(process.env.NODE_ENV!=="production"&&(n='Name must include namespace like "ns:regression".'),throwError(n));var l=!1;s[0]==="echarts"&&(a=s[1],l=!0),o.__isBuiltIn=l,externalTransformMap.set(a,o)}function applyDataTransform(o,a,n){var s=normalizeToArray(o),l=s.length,c="";l||(process.env.NODE_ENV!=="production"&&(c="If `transform` declared, it should at least contain one transform."),throwError(c));for(var u=0,d=l;u<d;u++){var h=s[u];a=applySingleDataTransform(h,a,n,l===1?null:u),u!==d-1&&(a.length=Math.max(a.length,1))}return a}function applySingleDataTransform(o,a,n,s){var l="";a.length||(process.env.NODE_ENV!=="production"&&(l="Must have at least one upstream dataset."),throwError(l)),isObject$3(o)||(process.env.NODE_ENV!=="production"&&(l="transform declaration must be an object rather than "+typeof o+"."),throwError(l));var c=o.type,u=externalTransformMap.get(c);u||(process.env.NODE_ENV!=="production"&&(l='Can not find transform on type "'+c+'".'),throwError(l));var d=map$1(a,function(p){return createExternalSource(p,u)}),h=normalizeToArray(u.transform({upstream:d[0],upstreamList:d,config:clone$4(o.config)}));if(process.env.NODE_ENV!=="production"&&o.print){var f=map$1(h,function(p){var g=s!=null?" === pipe index: "+s:"";return["=== dataset index: "+n.datasetIndex+g+" ===","- transform result data:",makePrintable(p.data),"- transform result dimensions:",makePrintable(p.dimensions)].join(`
`)}).join(`
`);log(f)}return map$1(h,function(p,g){var v="";isObject$3(p)||(process.env.NODE_ENV!=="production"&&(v="A transform should not return some empty results."),throwError(v)),p.data||(process.env.NODE_ENV!=="production"&&(v="Transform result data should be not be null or undefined"),throwError(v));var b=detectSourceFormat(p.data);isSupportedSourceFormat(b)||(process.env.NODE_ENV!=="production"&&(v="Transform result data should be array rows or object rows."),throwError(v));var w,x=a[0];if(x&&g===0&&!p.dimensions){var S=x.startIndex;S&&(p.data=x.data.slice(0,S).concat(p.data)),w={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:S,dimensions:x.metaRawOption.dimensions}}else w={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN,sourceHeader:0,dimensions:p.dimensions};return createSource(p.data,w,null)})}function isSupportedSourceFormat(o){return o===SOURCE_FORMAT_ARRAY_ROWS||o===SOURCE_FORMAT_OBJECT_ROWS}var UNDEFINED="undefined",CtorUint32Array=typeof Uint32Array===UNDEFINED?Array:Uint32Array,CtorUint16Array=typeof Uint16Array===UNDEFINED?Array:Uint16Array,CtorInt32Array$1=typeof Int32Array===UNDEFINED?Array:Int32Array,CtorFloat64Array=typeof Float64Array===UNDEFINED?Array:Float64Array,dataCtors={float:CtorFloat64Array,int:CtorInt32Array$1,ordinal:Array,number:Array,time:CtorFloat64Array},defaultDimValueGetters;function getIndicesCtor(o){return o>65535?CtorUint32Array:CtorUint16Array}function getInitialExtent(){return[1/0,-1/0]}function cloneChunk(o){var a=o.constructor;return a===Array?o.slice():new a(o)}function prepareStore(o,a,n,s,l){var c=dataCtors[n||"float"];if(l){var u=o[a],d=u&&u.length;if(d!==s){for(var h=new c(s),f=0;f<d;f++)h[f]=u[f];o[a]=h}}else o[a]=new c(s)}var DataStore=function(){function o(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=createHashMap()}return o.prototype.initData=function(a,n,s){process.env.NODE_ENV!=="production"&&assert(isFunction$1(a.getItem)&&isFunction$1(a.count),"Invalid data provider."),this._provider=a,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var l=a.getSource(),c=this.defaultDimValueGetter=defaultDimValueGetters[l.sourceFormat];this._dimValueGetter=s||c,this._rawExtent=[];var u=shouldRetrieveDataByName(l);this._dimensions=map$1(n,function(d){return process.env.NODE_ENV!=="production"&&u&&assert(d.property!=null),{type:d.type,property:d.property}}),this._initDataFromProvider(0,a.count())},o.prototype.getProvider=function(){return this._provider},o.prototype.getSource=function(){return this._provider.getSource()},o.prototype.ensureCalculationDimension=function(a,n){var s=this._calcDimNameToIdx,l=this._dimensions,c=s.get(a);if(c!=null){if(l[c].type===n)return c}else c=l.length;return l[c]={type:n},s.set(a,c),this._chunks[c]=new dataCtors[n||"float"](this._rawCount),this._rawExtent[c]=getInitialExtent(),c},o.prototype.collectOrdinalMeta=function(a,n){var s=this._chunks[a],l=this._dimensions[a],c=this._rawExtent,u=l.ordinalOffset||0,d=s.length;u===0&&(c[a]=getInitialExtent());for(var h=c[a],f=u;f<d;f++){var p=s[f]=n.parseAndCollect(s[f]);isNaN(p)||(h[0]=Math.min(p,h[0]),h[1]=Math.max(p,h[1]))}l.ordinalMeta=n,l.ordinalOffset=d,l.type="ordinal"},o.prototype.getOrdinalMeta=function(a){var n=this._dimensions[a],s=n.ordinalMeta;return s},o.prototype.getDimensionProperty=function(a){var n=this._dimensions[a];return n&&n.property},o.prototype.appendData=function(a){process.env.NODE_ENV!=="production"&&assert(!this._indices,"appendData can only be called on raw data.");var n=this._provider,s=this.count();n.appendData(a);var l=n.count();return n.persistent||(l+=s),s<l&&this._initDataFromProvider(s,l,!0),[s,l]},o.prototype.appendValues=function(a,n){for(var s=this._chunks,l=this._dimensions,c=l.length,u=this._rawExtent,d=this.count(),h=d+Math.max(a.length,n||0),f=0;f<c;f++){var p=l[f];prepareStore(s,f,p.type,h,!0)}for(var g=[],v=d;v<h;v++)for(var b=v-d,w=0;w<c;w++){var p=l[w],x=defaultDimValueGetters.arrayRows.call(this,a[b]||g,p.property,b,w);s[w][v]=x;var S=u[w];x<S[0]&&(S[0]=x),x>S[1]&&(S[1]=x)}return this._rawCount=this._count=h,{start:d,end:h}},o.prototype._initDataFromProvider=function(a,n,s){for(var l=this._provider,c=this._chunks,u=this._dimensions,d=u.length,h=this._rawExtent,f=map$1(u,function(T){return T.property}),p=0;p<d;p++){var g=u[p];h[p]||(h[p]=getInitialExtent()),prepareStore(c,p,g.type,n,s)}if(l.fillStorage)l.fillStorage(a,n,c,h);else for(var v=[],b=a;b<n;b++){v=l.getItem(b,v);for(var w=0;w<d;w++){var x=c[w],S=this._dimValueGetter(v,f[w],b,w);x[b]=S;var E=h[w];S<E[0]&&(E[0]=S),S>E[1]&&(E[1]=S)}}!l.persistent&&l.clean&&l.clean(),this._rawCount=this._count=n,this._extent=[]},o.prototype.count=function(){return this._count},o.prototype.get=function(a,n){if(!(n>=0&&n<this._count))return NaN;var s=this._chunks[a];return s?s[this.getRawIndex(n)]:NaN},o.prototype.getValues=function(a,n){var s=[],l=[];if(n==null){n=a,a=[];for(var c=0;c<this._dimensions.length;c++)l.push(c)}else l=a;for(var c=0,u=l.length;c<u;c++)s.push(this.get(l[c],n));return s},o.prototype.getByRawIndex=function(a,n){if(!(n>=0&&n<this._rawCount))return NaN;var s=this._chunks[a];return s?s[n]:NaN},o.prototype.getSum=function(a){var n=this._chunks[a],s=0;if(n)for(var l=0,c=this.count();l<c;l++){var u=this.get(a,l);isNaN(u)||(s+=u)}return s},o.prototype.getMedian=function(a){var n=[];this.each([a],function(c){isNaN(c)||n.push(c)});var s=n.sort(function(c,u){return c-u}),l=this.count();return l===0?0:l%2===1?s[(l-1)/2]:(s[l/2]+s[l/2-1])/2},o.prototype.indexOfRawIndex=function(a){if(a>=this._rawCount||a<0)return-1;if(!this._indices)return a;var n=this._indices,s=n[a];if(s!=null&&s<this._count&&s===a)return a;for(var l=0,c=this._count-1;l<=c;){var u=(l+c)/2|0;if(n[u]<a)l=u+1;else if(n[u]>a)c=u-1;else return u}return-1},o.prototype.indicesOfNearest=function(a,n,s){var l=this._chunks,c=l[a],u=[];if(!c)return u;s==null&&(s=1/0);for(var d=1/0,h=-1,f=0,p=0,g=this.count();p<g;p++){var v=this.getRawIndex(p),b=n-c[v],w=Math.abs(b);w<=s&&((w<d||w===d&&b>=0&&h<0)&&(d=w,h=b,f=0),b===h&&(u[f++]=p))}return u.length=f,u},o.prototype.getIndices=function(){var a,n=this._indices;if(n){var s=n.constructor,l=this._count;if(s===Array){a=new s(l);for(var c=0;c<l;c++)a[c]=n[c]}else a=new s(n.buffer,0,l)}else{var s=getIndicesCtor(this._rawCount);a=new s(this.count());for(var c=0;c<a.length;c++)a[c]=c}return a},o.prototype.filter=function(a,n){if(!this._count)return this;for(var s=this.clone(),l=s.count(),c=getIndicesCtor(s._rawCount),u=new c(l),d=[],h=a.length,f=0,p=a[0],g=s._chunks,v=0;v<l;v++){var b=void 0,w=s.getRawIndex(v);if(h===0)b=n(v);else if(h===1){var x=g[p][w];b=n(x,v)}else{for(var S=0;S<h;S++)d[S]=g[a[S]][w];d[S]=v,b=n.apply(null,d)}b&&(u[f++]=w)}return f<l&&(s._indices=u),s._count=f,s._extent=[],s._updateGetRawIdx(),s},o.prototype.selectRange=function(a){var n=this.clone(),s=n._count;if(!s)return this;var l=keys$1(a),c=l.length;if(!c)return this;var u=n.count(),d=getIndicesCtor(n._rawCount),h=new d(u),f=0,p=l[0],g=a[p][0],v=a[p][1],b=n._chunks,w=!1;if(!n._indices){var x=0;if(c===1){for(var S=b[l[0]],E=0;E<s;E++){var T=S[E];(T>=g&&T<=v||isNaN(T))&&(h[f++]=x),x++}w=!0}else if(c===2){for(var S=b[l[0]],C=b[l[1]],A=a[l[1]][0],R=a[l[1]][1],E=0;E<s;E++){var T=S[E],j=C[E];(T>=g&&T<=v||isNaN(T))&&(j>=A&&j<=R||isNaN(j))&&(h[f++]=x),x++}w=!0}}if(!w)if(c===1)for(var E=0;E<u;E++){var D=n.getRawIndex(E),T=b[l[0]][D];(T>=g&&T<=v||isNaN(T))&&(h[f++]=D)}else for(var E=0;E<u;E++){for(var O=!0,D=n.getRawIndex(E),H=0;H<c;H++){var q=l[H],T=b[q][D];(T<a[q][0]||T>a[q][1])&&(O=!1)}O&&(h[f++]=n.getRawIndex(E))}return f<u&&(n._indices=h),n._count=f,n._extent=[],n._updateGetRawIdx(),n},o.prototype.map=function(a,n){var s=this.clone(a);return this._updateDims(s,a,n),s},o.prototype.modify=function(a,n){this._updateDims(this,a,n)},o.prototype._updateDims=function(a,n,s){for(var l=a._chunks,c=[],u=n.length,d=a.count(),h=[],f=a._rawExtent,p=0;p<n.length;p++)f[n[p]]=getInitialExtent();for(var g=0;g<d;g++){for(var v=a.getRawIndex(g),b=0;b<u;b++)h[b]=l[n[b]][v];h[u]=g;var w=s&&s.apply(null,h);if(w!=null){typeof w!="object"&&(c[0]=w,w=c);for(var p=0;p<w.length;p++){var x=n[p],S=w[p],E=f[x],T=l[x];T&&(T[v]=S),S<E[0]&&(E[0]=S),S>E[1]&&(E[1]=S)}}}},o.prototype.lttbDownSample=function(a,n){var s=this.clone([a],!0),l=s._chunks,c=l[a],u=this.count(),d=0,h=Math.floor(1/n),f=this.getRawIndex(0),p,g,v,b=new(getIndicesCtor(this._rawCount))(Math.min((Math.ceil(u/h)+2)*2,u));b[d++]=f;for(var w=1;w<u-1;w+=h){for(var x=Math.min(w+h,u-1),S=Math.min(w+h*2,u),E=(S+x)/2,T=0,C=x;C<S;C++){var A=this.getRawIndex(C),R=c[A];isNaN(R)||(T+=R)}T/=S-x;var j=w,D=Math.min(w+h,u),O=w-1,H=c[f];p=-1,v=j;for(var q=-1,Y=0,C=j;C<D;C++){var A=this.getRawIndex(C),R=c[A];if(isNaN(R)){Y++,q<0&&(q=A);continue}g=Math.abs((O-E)*(R-H)-(O-C)*(T-H)),g>p&&(p=g,v=A)}Y>0&&Y<D-j&&(b[d++]=Math.min(q,v),v=Math.max(q,v)),b[d++]=v,f=v}return b[d++]=this.getRawIndex(u-1),s._count=d,s._indices=b,s.getRawIndex=this._getRawIdx,s},o.prototype.minmaxDownSample=function(a,n){for(var s=this.clone([a],!0),l=s._chunks,c=Math.floor(1/n),u=l[a],d=this.count(),h=new(getIndicesCtor(this._rawCount))(Math.ceil(d/c)*2),f=0,p=0;p<d;p+=c){var g=p,v=u[this.getRawIndex(g)],b=p,w=u[this.getRawIndex(b)],x=c;p+c>d&&(x=d-p);for(var S=0;S<x;S++){var E=this.getRawIndex(p+S),T=u[E];T<v&&(v=T,g=p+S),T>w&&(w=T,b=p+S)}var C=this.getRawIndex(g),A=this.getRawIndex(b);g<b?(h[f++]=C,h[f++]=A):(h[f++]=A,h[f++]=C)}return s._count=f,s._indices=h,s._updateGetRawIdx(),s},o.prototype.downSample=function(a,n,s,l){for(var c=this.clone([a],!0),u=c._chunks,d=[],h=Math.floor(1/n),f=u[a],p=this.count(),g=c._rawExtent[a]=getInitialExtent(),v=new(getIndicesCtor(this._rawCount))(Math.ceil(p/h)),b=0,w=0;w<p;w+=h){h>p-w&&(h=p-w,d.length=h);for(var x=0;x<h;x++){var S=this.getRawIndex(w+x);d[x]=f[S]}var E=s(d),T=this.getRawIndex(Math.min(w+l(d,E)||0,p-1));f[T]=E,E<g[0]&&(g[0]=E),E>g[1]&&(g[1]=E),v[b++]=T}return c._count=b,c._indices=v,c._updateGetRawIdx(),c},o.prototype.each=function(a,n){if(this._count)for(var s=a.length,l=this._chunks,c=0,u=this.count();c<u;c++){var d=this.getRawIndex(c);switch(s){case 0:n(c);break;case 1:n(l[a[0]][d],c);break;case 2:n(l[a[0]][d],l[a[1]][d],c);break;default:for(var h=0,f=[];h<s;h++)f[h]=l[a[h]][d];f[h]=c,n.apply(null,f)}}},o.prototype.getDataExtent=function(a){var n=this._chunks[a],s=getInitialExtent();if(!n)return s;var l=this.count(),c=!this._indices,u;if(c)return this._rawExtent[a].slice();if(u=this._extent[a],u)return u.slice();u=s;for(var d=u[0],h=u[1],f=0;f<l;f++){var p=this.getRawIndex(f),g=n[p];g<d&&(d=g),g>h&&(h=g)}return u=[d,h],this._extent[a]=u,u},o.prototype.getRawDataItem=function(a){var n=this.getRawIndex(a);if(this._provider.persistent)return this._provider.getItem(n);for(var s=[],l=this._chunks,c=0;c<l.length;c++)s.push(l[c][n]);return s},o.prototype.clone=function(a,n){var s=new o,l=this._chunks,c=a&&reduce(a,function(d,h){return d[h]=!0,d},{});if(c)for(var u=0;u<l.length;u++)s._chunks[u]=c[u]?cloneChunk(l[u]):l[u];else s._chunks=l;return this._copyCommonProps(s),n||(s._indices=this._cloneIndices()),s._updateGetRawIdx(),s},o.prototype._copyCommonProps=function(a){a._count=this._count,a._rawCount=this._rawCount,a._provider=this._provider,a._dimensions=this._dimensions,a._extent=clone$4(this._extent),a._rawExtent=clone$4(this._rawExtent)},o.prototype._cloneIndices=function(){if(this._indices){var a=this._indices.constructor,n=void 0;if(a===Array){var s=this._indices.length;n=new a(s);for(var l=0;l<s;l++)n[l]=this._indices[l]}else n=new a(this._indices);return n}return null},o.prototype._getRawIdxIdentity=function(a){return a},o.prototype._getRawIdx=function(a){return a<this._count&&a>=0?this._indices[a]:-1},o.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},o.internalField=function(){function a(n,s,l,c){return parseDataValue(n[c],this._dimensions[c])}defaultDimValueGetters={arrayRows:a,objectRows:function(n,s,l,c){return parseDataValue(n[s],this._dimensions[c])},keyedColumns:a,original:function(n,s,l,c){var u=n&&(n.value==null?n:n.value);return parseDataValue(u instanceof Array?u[c]:u,this._dimensions[c])},typedArray:function(n,s,l,c){return n[c]}}}(),o}(),SourceManager=function(){function o(a){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=a}return o.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},o.prototype._setLocalSource=function(a,n){this._sourceList=a,this._upstreamSignList=n,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},o.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},o.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},o.prototype._createSource=function(){this._setLocalSource([],[]);var a=this._sourceHost,n=this._getUpstreamSourceManagers(),s=!!n.length,l,c;if(isSeries(a)){var u=a,d=void 0,h=void 0,f=void 0;if(s){var p=n[0];p.prepareSource(),f=p.getSource(),d=f.data,h=f.sourceFormat,c=[p._getVersionSign()]}else d=u.get("data",!0),h=isTypedArray(d)?SOURCE_FORMAT_TYPED_ARRAY:SOURCE_FORMAT_ORIGINAL,c=[];var g=this._getSourceMetaRawOption()||{},v=f&&f.metaRawOption||{},b=retrieve2(g.seriesLayoutBy,v.seriesLayoutBy)||null,w=retrieve2(g.sourceHeader,v.sourceHeader),x=retrieve2(g.dimensions,v.dimensions),S=b!==v.seriesLayoutBy||!!w!=!!v.sourceHeader||x;l=S?[createSource(d,{seriesLayoutBy:b,sourceHeader:w,dimensions:x},h)]:[]}else{var E=a;if(s){var T=this._applyTransform(n);l=T.sourceList,c=T.upstreamSignList}else{var C=E.get("source",!0);l=[createSource(C,this._getSourceMetaRawOption(),null)],c=[]}}process.env.NODE_ENV!=="production"&&assert(l&&c),this._setLocalSource(l,c)},o.prototype._applyTransform=function(a){var n=this._sourceHost,s=n.get("transform",!0),l=n.get("fromTransformResult",!0);if(process.env.NODE_ENV!=="production"&&assert(l!=null||s!=null),l!=null){var c="";a.length!==1&&(process.env.NODE_ENV!=="production"&&(c="When using `fromTransformResult`, there should be only one upstream dataset"),doThrow(c))}var u,d=[],h=[];return each$f(a,function(f){f.prepareSource();var p=f.getSource(l||0),g="";l!=null&&!p&&(process.env.NODE_ENV!=="production"&&(g="Can not retrieve result by `fromTransformResult`: "+l),doThrow(g)),d.push(p),h.push(f._getVersionSign())}),s?u=applyDataTransform(s,d,{datasetIndex:n.componentIndex}):l!=null&&(u=[cloneSourceShallow(d[0])]),{sourceList:u,upstreamSignList:h}},o.prototype._isDirty=function(){if(this._dirty)return!0;for(var a=this._getUpstreamSourceManagers(),n=0;n<a.length;n++){var s=a[n];if(s._isDirty()||this._upstreamSignList[n]!==s._getVersionSign())return!0}},o.prototype.getSource=function(a){a=a||0;var n=this._sourceList[a];if(!n){var s=this._getUpstreamSourceManagers();return s[0]&&s[0].getSource(a)}return n},o.prototype.getSharedDataStore=function(a){process.env.NODE_ENV!=="production"&&assert(isSeries(this._sourceHost),"Can only call getDataStore on series source manager.");var n=a.makeStoreSchema();return this._innerGetDataStore(n.dimensions,a.source,n.hash)},o.prototype._innerGetDataStore=function(a,n,s){var l=0,c=this._storeList,u=c[l];u||(u=c[l]={});var d=u[s];if(!d){var h=this._getUpstreamSourceManagers()[0];isSeries(this._sourceHost)&&h?d=h._innerGetDataStore(a,n,s):(d=new DataStore,d.initData(new DefaultDataProvider(n,a.length),a)),u[s]=d}return d},o.prototype._getUpstreamSourceManagers=function(){var a=this._sourceHost;if(isSeries(a)){var n=querySeriesUpstreamDatasetModel(a);return n?[n.getSourceManager()]:[]}else return map$1(queryDatasetUpstreamDatasetModels(a),function(s){return s.getSourceManager()})},o.prototype._getSourceMetaRawOption=function(){var a=this._sourceHost,n,s,l;if(isSeries(a))n=a.get("seriesLayoutBy",!0),s=a.get("sourceHeader",!0),l=a.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var c=a;n=c.get("seriesLayoutBy",!0),s=c.get("sourceHeader",!0),l=c.get("dimensions",!0)}return{seriesLayoutBy:n,sourceHeader:s,dimensions:l}},o}();function disableTransformOptionMerge(o){var a=o.option.transform;a&&setAsPrimitive(o.option.transform)}function isSeries(o){return o.mainType==="series"}function doThrow(o){throw new Error(o)}var TOOLTIP_LINE_HEIGHT_CSS="line-height:1";function getTooltipLineHeight(o){var a=o.lineHeight;return a==null?TOOLTIP_LINE_HEIGHT_CSS:"line-height:"+encodeHTML(a+"")+"px"}function getTooltipTextStyle(o,a){var n=o.color||"#6e7079",s=o.fontSize||12,l=o.fontWeight||"400",c=o.color||"#464646",u=o.fontSize||14,d=o.fontWeight||"900";return a==="html"?{nameStyle:"font-size:"+encodeHTML(s+"")+"px;color:"+encodeHTML(n)+";font-weight:"+encodeHTML(l+""),valueStyle:"font-size:"+encodeHTML(u+"")+"px;color:"+encodeHTML(c)+";font-weight:"+encodeHTML(d+"")}:{nameStyle:{fontSize:s,fill:n,fontWeight:l},valueStyle:{fontSize:u,fill:c,fontWeight:d}}}var HTML_GAPS=[0,10,20,30],RICH_TEXT_GAPS=["",`
`,`

`,`


`];function createTooltipMarkup(o,a){return a.type=o,a}function isSectionFragment(o){return o.type==="section"}function getBuilder(o){return isSectionFragment(o)?buildSection:buildNameValue}function getBlockGapLevel(o){if(isSectionFragment(o)){var a=0,n=o.blocks.length,s=n>1||n>0&&!o.noHeader;return each$f(o.blocks,function(l){var c=getBlockGapLevel(l);c>=a&&(a=c+ +(s&&(!c||isSectionFragment(l)&&!l.noHeader)))}),a}return 0}function buildSection(o,a,n,s){var l=a.noHeader,c=getGap(getBlockGapLevel(a)),u=[],d=a.blocks||[];assert(!d||isArray$1(d)),d=d||[];var h=o.orderMode;if(a.sortBlocks&&h){d=d.slice();var f={valueAsc:"asc",valueDesc:"desc"};if(hasOwn(f,h)){var p=new SortOrderComparator(f[h],null);d.sort(function(x,S){return p.evaluate(x.sortParam,S.sortParam)})}else h==="seriesDesc"&&d.reverse()}each$f(d,function(x,S){var E=a.valueFormatter,T=getBuilder(x)(E?extend(extend({},o),{valueFormatter:E}):o,x,S>0?c.html:0,s);T!=null&&u.push(T)});var g=o.renderMode==="richText"?u.join(c.richText):wrapBlockHTML(s,u.join(""),l?n:c.html);if(l)return g;var v=makeValueReadable(a.header,"ordinal",o.useUTC),b=getTooltipTextStyle(s,o.renderMode).nameStyle,w=getTooltipLineHeight(s);return o.renderMode==="richText"?wrapInlineNameRichText(o,v,b)+c.richText+g:wrapBlockHTML(s,'<div style="'+b+";"+w+';">'+encodeHTML(v)+"</div>"+g,n)}function buildNameValue(o,a,n,s){var l=o.renderMode,c=a.noName,u=a.noValue,d=!a.markerType,h=a.name,f=o.useUTC,p=a.valueFormatter||o.valueFormatter||function(A){return A=isArray$1(A)?A:[A],map$1(A,function(R,j){return makeValueReadable(R,isArray$1(b)?b[j]:b,f)})};if(!(c&&u)){var g=d?"":o.markupStyleCreator.makeTooltipMarker(a.markerType,a.markerColor||"#333",l),v=c?"":makeValueReadable(h,"ordinal",f),b=a.valueType,w=u?[]:p(a.value,a.dataIndex),x=!d||!c,S=!d&&c,E=getTooltipTextStyle(s,l),T=E.nameStyle,C=E.valueStyle;return l==="richText"?(d?"":g)+(c?"":wrapInlineNameRichText(o,v,T))+(u?"":wrapInlineValueRichText(o,w,x,S,C)):wrapBlockHTML(s,(d?"":g)+(c?"":wrapInlineNameHTML(v,!d,T))+(u?"":wrapInlineValueHTML(w,x,S,C)),n)}}function buildTooltipMarkup(o,a,n,s,l,c){if(o){var u=getBuilder(o),d={useUTC:l,renderMode:n,orderMode:s,markupStyleCreator:a,valueFormatter:o.valueFormatter};return u(d,o,0,c)}}function getGap(o){return{html:HTML_GAPS[o],richText:RICH_TEXT_GAPS[o]}}function wrapBlockHTML(o,a,n){var s='<div style="clear:both"></div>',l="margin: "+n+"px 0 0",c=getTooltipLineHeight(o);return'<div style="'+l+";"+c+';">'+a+s+"</div>"}function wrapInlineNameHTML(o,a,n){var s=a?"margin-left:2px":"";return'<span style="'+n+";"+s+'">'+encodeHTML(o)+"</span>"}function wrapInlineValueHTML(o,a,n,s){var l=n?"10px":"20px",c=a?"float:right;margin-left:"+l:"";return o=isArray$1(o)?o:[o],'<span style="'+c+";"+s+'">'+map$1(o,function(u){return encodeHTML(u)}).join("&nbsp;&nbsp;")+"</span>"}function wrapInlineNameRichText(o,a,n){return o.markupStyleCreator.wrapRichTextStyle(a,n)}function wrapInlineValueRichText(o,a,n,s,l){var c=[l],u=s?10:20;return n&&c.push({padding:[0,0,0,u],align:"right"}),o.markupStyleCreator.wrapRichTextStyle(isArray$1(a)?a.join("  "):a,c)}function retrieveVisualColorForTooltipMarker(o,a){var n=o.getData().getItemVisual(a,"style"),s=n[o.visualDrawType];return convertToColorString(s)}function getPaddingFromTooltipModel(o,a){var n=o.get("padding");return n??(a==="richText"?[8,10]:10)}var TooltipMarkupStyleCreator=function(){function o(){this.richTextStyles={},this._nextStyleNameId=getRandomIdBase()}return o.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},o.prototype.makeTooltipMarker=function(a,n,s){var l=s==="richText"?this._generateStyleName():null,c=getTooltipMarker({color:n,type:a,renderMode:s,markerId:l});return isString$2(c)?c:(process.env.NODE_ENV!=="production"&&assert(l),this.richTextStyles[l]=c.style,c.content)},o.prototype.wrapRichTextStyle=function(a,n){var s={};isArray$1(n)?each$f(n,function(c){return extend(s,c)}):extend(s,n);var l=this._generateStyleName();return this.richTextStyles[l]=s,"{"+l+"|"+a+"}"},o}();function defaultSeriesFormatTooltip(o){var a=o.series,n=o.dataIndex,s=o.multipleSeries,l=a.getData(),c=l.mapDimensionsAll("defaultedTooltip"),u=c.length,d=a.getRawValue(n),h=isArray$1(d),f=retrieveVisualColorForTooltipMarker(a,n),p,g,v,b;if(u>1||h&&!u){var w=formatTooltipArrayValue(d,a,n,c,f);p=w.inlineValues,g=w.inlineValueTypes,v=w.blocks,b=w.inlineValues[0]}else if(u){var x=l.getDimensionInfo(c[0]);b=p=retrieveRawValue(l,n,c[0]),g=x.type}else b=p=h?d[0]:d;var S=isNameSpecified(a),E=S&&a.name||"",T=l.getName(n),C=s?E:T;return createTooltipMarkup("section",{header:E,noHeader:s||!S,sortParam:b,blocks:[createTooltipMarkup("nameValue",{markerType:"item",markerColor:f,name:C,noName:!trim$1(C),value:p,valueType:g,dataIndex:n})].concat(v||[])})}function formatTooltipArrayValue(o,a,n,s,l){var c=a.getData(),u=reduce(o,function(g,v,b){var w=c.getDimensionInfo(b);return g=g||w&&w.tooltip!==!1&&w.displayName!=null},!1),d=[],h=[],f=[];s.length?each$f(s,function(g){p(retrieveRawValue(c,n,g),g)}):each$f(o,p);function p(g,v){var b=c.getDimensionInfo(v);!b||b.otherDims.tooltip===!1||(u?f.push(createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:l,name:b.displayName,value:g,valueType:b.type})):(d.push(g),h.push(b.type)))}return{inlineValues:d,inlineValueTypes:h,blocks:f}}var inner$k=makeInner();function getSelectionKey(o,a){return o.getName(a)||o.getId(a)}var SERIES_UNIVERSAL_TRANSITION_PROP="__universalTransitionEnabled",SeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n._selectedDataIndicesMap={},n}return a.prototype.init=function(n,s,l){this.seriesIndex=this.componentIndex,this.dataTask=createTask({count:dataTaskCount,reset:dataTaskReset}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(n,l);var c=inner$k(this).sourceManager=new SourceManager(this);c.prepareSource();var u=this.getInitialData(n,l);wrapData(u,this),this.dataTask.context.data=u,process.env.NODE_ENV!=="production"&&assert(u,"getInitialData returned invalid data."),inner$k(this).dataBeforeProcessed=u,autoSeriesName(this),this._initSelectedMapFromData(u)},a.prototype.mergeDefaultAndTheme=function(n,s){var l=fetchLayoutMode(this),c=l?getLayoutParams(n):{},u=this.subType;ComponentModel.hasClass(u)&&(u+="Series"),merge(n,s.getTheme().get(this.subType)),merge(n,this.getDefaultOption()),defaultEmphasis(n,"label",["show"]),this.fillDataTextStyle(n.data),l&&mergeLayoutParam(n,c,l)},a.prototype.mergeOption=function(n,s){n=merge(this.option,n,!0),this.fillDataTextStyle(n.data);var l=fetchLayoutMode(this);l&&mergeLayoutParam(this.option,n,l);var c=inner$k(this).sourceManager;c.dirty(),c.prepareSource();var u=this.getInitialData(n,s);wrapData(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,inner$k(this).dataBeforeProcessed=u,autoSeriesName(this),this._initSelectedMapFromData(u)},a.prototype.fillDataTextStyle=function(n){if(n&&!isTypedArray(n))for(var s=["show"],l=0;l<n.length;l++)n[l]&&n[l].label&&defaultEmphasis(n[l],"label",s)},a.prototype.getInitialData=function(n,s){},a.prototype.appendData=function(n){var s=this.getRawData();s.appendData(n.data)},a.prototype.getData=function(n){var s=getCurrentTask(this);if(s){var l=s.context.data;return n==null||!l.getLinkedData?l:l.getLinkedData(n)}else return inner$k(this).data},a.prototype.getAllData=function(){var n=this.getData();return n&&n.getLinkedDataAll?n.getLinkedDataAll():[{data:n}]},a.prototype.setData=function(n){var s=getCurrentTask(this);if(s){var l=s.context;l.outputData=n,s!==this.dataTask&&(l.data=n)}inner$k(this).data=n},a.prototype.getEncode=function(){var n=this.get("encode",!0);if(n)return createHashMap(n)},a.prototype.getSourceManager=function(){return inner$k(this).sourceManager},a.prototype.getSource=function(){return this.getSourceManager().getSource()},a.prototype.getRawData=function(){return inner$k(this).dataBeforeProcessed},a.prototype.getColorBy=function(){var n=this.get("colorBy");return n||"series"},a.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},a.prototype.getBaseAxis=function(){var n=this.coordinateSystem;return n&&n.getBaseAxis&&n.getBaseAxis()},a.prototype.formatTooltip=function(n,s,l){return defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:s})},a.prototype.isAnimationEnabled=function(){var n=this.ecModel;if(env.node&&!(n&&n.ssr))return!1;var s=this.getShallow("animation");return s&&this.getData().count()>this.getShallow("animationThreshold")&&(s=!1),!!s},a.prototype.restoreData=function(){this.dataTask.dirty()},a.prototype.getColorFromPalette=function(n,s,l){var c=this.ecModel,u=PaletteMixin.prototype.getColorFromPalette.call(this,n,s,l);return u||(u=c.getColorFromPalette(n,s,l)),u},a.prototype.coordDimToDataDim=function(n){return this.getRawData().mapDimensionsAll(n)},a.prototype.getProgressive=function(){return this.get("progressive")},a.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},a.prototype.select=function(n,s){this._innerSelect(this.getData(s),n)},a.prototype.unselect=function(n,s){var l=this.option.selectedMap;if(l){var c=this.option.selectedMode,u=this.getData(s);if(c==="series"||l==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var d=0;d<n.length;d++){var h=n[d],f=getSelectionKey(u,h);l[f]=!1,this._selectedDataIndicesMap[f]=-1}}},a.prototype.toggleSelect=function(n,s){for(var l=[],c=0;c<n.length;c++)l[0]=n[c],this.isSelected(n[c],s)?this.unselect(l,s):this.select(l,s)},a.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var n=this._selectedDataIndicesMap,s=keys$1(n),l=[],c=0;c<s.length;c++){var u=n[s[c]];u>=0&&l.push(u)}return l},a.prototype.isSelected=function(n,s){var l=this.option.selectedMap;if(!l)return!1;var c=this.getData(s);return(l==="all"||l[getSelectionKey(c,n)])&&!c.getItemModel(n).get(["select","disabled"])},a.prototype.isUniversalTransitionEnabled=function(){if(this[SERIES_UNIVERSAL_TRANSITION_PROP])return!0;var n=this.option.universalTransition;return n?n===!0?!0:n&&n.enabled:!1},a.prototype._innerSelect=function(n,s){var l,c,u=this.option,d=u.selectedMode,h=s.length;if(!(!d||!h)){if(d==="series")u.selectedMap="all";else if(d==="multiple"){isObject$3(u.selectedMap)||(u.selectedMap={});for(var f=u.selectedMap,p=0;p<h;p++){var g=s[p],v=getSelectionKey(n,g);f[v]=!0,this._selectedDataIndicesMap[v]=n.getRawIndex(g)}}else if(d==="single"||d===!0){var b=s[h-1],v=getSelectionKey(n,b);u.selectedMap=(l={},l[v]=!0,l),this._selectedDataIndicesMap=(c={},c[v]=n.getRawIndex(b),c)}}},a.prototype._initSelectedMapFromData=function(n){if(!this.option.selectedMap){var s=[];n.hasItemOption&&n.each(function(l){var c=n.getRawDataItem(l);c&&c.selected&&s.push(l)}),s.length>0&&this._innerSelect(n,s)}},a.registerClass=function(n){return ComponentModel.registerClass(n)},a.protoInitialize=function(){var n=a.prototype;n.type="series.__base__",n.seriesIndex=0,n.ignoreStyleOnData=!1,n.hasSymbolVisual=!1,n.defaultSymbol="circle",n.visualStyleAccessPath="itemStyle",n.visualDrawType="fill"}(),a}(ComponentModel);mixin(SeriesModel,DataFormatMixin);mixin(SeriesModel,PaletteMixin);mountExtend(SeriesModel,ComponentModel);function autoSeriesName(o){var a=o.name;isNameSpecified(o)||(o.name=getSeriesAutoName(o)||a)}function getSeriesAutoName(o){var a=o.getRawData(),n=a.mapDimensionsAll("seriesName"),s=[];return each$f(n,function(l){var c=a.getDimensionInfo(l);c.displayName&&s.push(c.displayName)}),s.join(" ")}function dataTaskCount(o){return o.model.getRawData().count()}function dataTaskReset(o){var a=o.model;return a.setData(a.getRawData().cloneShallow()),dataTaskProgress}function dataTaskProgress(o,a){a.outputData&&o.end>a.outputData.count()&&a.model.getRawData().cloneShallow(a.outputData)}function wrapData(o,a){each$f(concatArray(o.CHANGABLE_METHODS,o.DOWNSAMPLE_METHODS),function(n){o.wrapMethod(n,curry$1(onDataChange,a))})}function onDataChange(o,a){var n=getCurrentTask(o);return n&&n.setOutputEnd((a||this).count()),a}function getCurrentTask(o){var a=(o.ecModel||{}).scheduler,n=a&&a.getPipeline(o.uid);if(n){var s=n.currentTask;if(s){var l=s.agentStubMap;l&&(s=l.get(o.uid))}return s}}var ComponentView=function(){function o(){this.group=new Group$3,this.uid=getUID("viewComponent")}return o.prototype.init=function(a,n){},o.prototype.render=function(a,n,s,l){},o.prototype.dispose=function(a,n){},o.prototype.updateView=function(a,n,s,l){},o.prototype.updateLayout=function(a,n,s,l){},o.prototype.updateVisual=function(a,n,s,l){},o.prototype.toggleBlurSeries=function(a,n,s){},o.prototype.eachRendered=function(a){var n=this.group;n&&n.traverse(a)},o}();enableClassExtend(ComponentView);enableClassManagement(ComponentView);function createRenderPlanner(){var o=makeInner();return function(a){var n=o(a),s=a.pipelineContext,l=!!n.large,c=!!n.progressiveRender,u=n.large=!!(s&&s.large),d=n.progressiveRender=!!(s&&s.progressiveRender);return(l!==u||c!==d)&&"reset"}}var inner$j=makeInner(),renderPlanner=createRenderPlanner(),ChartView=function(){function o(){this.group=new Group$3,this.uid=getUID("viewChart"),this.renderTask=createTask({plan:renderTaskPlan,reset:renderTaskReset}),this.renderTask.context={view:this}}return o.prototype.init=function(a,n){},o.prototype.render=function(a,n,s,l){if(process.env.NODE_ENV!=="production")throw new Error("render method must been implemented")},o.prototype.highlight=function(a,n,s,l){var c=a.getData(l&&l.dataType);if(!c){process.env.NODE_ENV!=="production"&&error("Unknown dataType "+l.dataType);return}toggleHighlight(c,l,"emphasis")},o.prototype.downplay=function(a,n,s,l){var c=a.getData(l&&l.dataType);if(!c){process.env.NODE_ENV!=="production"&&error("Unknown dataType "+l.dataType);return}toggleHighlight(c,l,"normal")},o.prototype.remove=function(a,n){this.group.removeAll()},o.prototype.dispose=function(a,n){},o.prototype.updateView=function(a,n,s,l){this.render(a,n,s,l)},o.prototype.updateLayout=function(a,n,s,l){this.render(a,n,s,l)},o.prototype.updateVisual=function(a,n,s,l){this.render(a,n,s,l)},o.prototype.eachRendered=function(a){traverseElements(this.group,a)},o.markUpdateMethod=function(a,n){inner$j(a).updateMethod=n},o.protoInitialize=function(){var a=o.prototype;a.type="chart"}(),o}();function elSetState(o,a,n){o&&isHighDownDispatcher(o)&&(a==="emphasis"?enterEmphasis:leaveEmphasis)(o,n)}function toggleHighlight(o,a,n){var s=queryDataIndex(o,a),l=a&&a.highlightKey!=null?getHighlightDigit(a.highlightKey):null;s!=null?each$f(normalizeToArray(s),function(c){elSetState(o.getItemGraphicEl(c),n,l)}):o.eachItemGraphicEl(function(c){elSetState(c,n,l)})}enableClassExtend(ChartView,["dispose"]);enableClassManagement(ChartView);function renderTaskPlan(o){return renderPlanner(o.model)}function renderTaskReset(o){var a=o.model,n=o.ecModel,s=o.api,l=o.payload,c=a.pipelineContext.progressiveRender,u=o.view,d=l&&inner$j(l).updateMethod,h=c?"incrementalPrepareRender":d&&u[d]?d:"render";return h!=="render"&&u[h](a,n,s,l),progressMethodMap[h]}var progressMethodMap={incrementalPrepareRender:{progress:function(o,a){a.view.incrementalRender(o,a.model,a.ecModel,a.api,a.payload)}},render:{forceFirstProgress:!0,progress:function(o,a){a.view.render(a.model,a.ecModel,a.api,a.payload)}}},ORIGIN_METHOD="\0__throttleOriginMethod",RATE="\0__throttleRate",THROTTLE_TYPE="\0__throttleType";function throttle(o,a,n){var s,l=0,c=0,u=null,d,h,f,p;a=a||0;function g(){c=new Date().getTime(),u=null,o.apply(h,f||[])}var v=function(){for(var b=[],w=0;w<arguments.length;w++)b[w]=arguments[w];s=new Date().getTime(),h=this,f=b;var x=p||a,S=p||n;p=null,d=s-(S?l:c)-x,clearTimeout(u),S?u=setTimeout(g,x):d>=0?g():u=setTimeout(g,-d),l=s};return v.clear=function(){u&&(clearTimeout(u),u=null)},v.debounceNextCall=function(b){p=b},v}function createOrUpdate(o,a,n,s){var l=o[a];if(l){var c=l[ORIGIN_METHOD]||l,u=l[THROTTLE_TYPE],d=l[RATE];if(d!==n||u!==s){if(n==null||!s)return o[a]=c;l=o[a]=throttle(c,n,s==="debounce"),l[ORIGIN_METHOD]=c,l[THROTTLE_TYPE]=s,l[RATE]=n}return l}}function clear$1(o,a){var n=o[a];n&&n[ORIGIN_METHOD]&&(n.clear&&n.clear(),o[a]=n[ORIGIN_METHOD])}var inner$i=makeInner(),defaultStyleMappers={itemStyle:makeStyleMapper(ITEM_STYLE_KEY_MAP,!0),lineStyle:makeStyleMapper(LINE_STYLE_KEY_MAP,!0)},defaultColorKey={lineStyle:"stroke",itemStyle:"fill"};function getStyleMapper(o,a){var n=o.visualStyleMapper||defaultStyleMappers[a];return n||(console.warn("Unknown style type '"+a+"'."),defaultStyleMappers.itemStyle)}function getDefaultColorKey(o,a){var n=o.visualDrawType||defaultColorKey[a];return n||(console.warn("Unknown style type '"+a+"'."),"fill")}var seriesStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(o,a){var n=o.getData(),s=o.visualStyleAccessPath||"itemStyle",l=o.getModel(s),c=getStyleMapper(o,s),u=c(l),d=l.getShallow("decal");d&&(n.setVisual("decal",d),d.dirty=!0);var h=getDefaultColorKey(o,s),f=u[h],p=isFunction$1(f)?f:null,g=u.fill==="auto"||u.stroke==="auto";if(!u[h]||p||g){var v=o.getColorFromPalette(o.name,null,a.getSeriesCount());u[h]||(u[h]=v,n.setVisual("colorFromPalette",!0)),u.fill=u.fill==="auto"||isFunction$1(u.fill)?v:u.fill,u.stroke=u.stroke==="auto"||isFunction$1(u.stroke)?v:u.stroke}if(n.setVisual("style",u),n.setVisual("drawType",h),!a.isSeriesFiltered(o)&&p)return n.setVisual("colorFromPalette",!1),{dataEach:function(b,w){var x=o.getDataParams(w),S=extend({},u);S[h]=p(x),b.setItemVisual(w,"style",S)}}}},sharedModel=new Model,dataStyleTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(o,a){if(!(o.ignoreStyleOnData||a.isSeriesFiltered(o))){var n=o.getData(),s=o.visualStyleAccessPath||"itemStyle",l=getStyleMapper(o,s),c=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(u,d){var h=u.getRawDataItem(d);if(h&&h[s]){sharedModel.option=h[s];var f=l(sharedModel),p=u.ensureUniqueItemVisual(d,"style");extend(p,f),sharedModel.option.decal&&(u.setItemVisual(d,"decal",sharedModel.option.decal),sharedModel.option.decal.dirty=!0),c in f&&u.setItemVisual(d,"colorFromPalette",!1)}}:null}}}},dataColorPaletteTask={performRawSeries:!0,overallReset:function(o){var a=createHashMap();o.eachSeries(function(n){var s=n.getColorBy();if(!n.isColorBySeries()){var l=n.type+"-"+s,c=a.get(l);c||(c={},a.set(l,c)),inner$i(n).scope=c}}),o.eachSeries(function(n){if(!(n.isColorBySeries()||o.isSeriesFiltered(n))){var s=n.getRawData(),l={},c=n.getData(),u=inner$i(n).scope,d=n.visualStyleAccessPath||"itemStyle",h=getDefaultColorKey(n,d);c.each(function(f){var p=c.getRawIndex(f);l[p]=f}),s.each(function(f){var p=l[f],g=c.getItemVisual(p,"colorFromPalette");if(g){var v=c.ensureUniqueItemVisual(p,"style"),b=s.getName(f)||f+"",w=s.count();v[h]=n.getColorFromPalette(b,u,w)}})}})}},PI$5=Math.PI;function defaultLoading(o,a){a=a||{},defaults(a,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Group$3,s=new Rect$2({style:{fill:a.maskColor},zlevel:a.zlevel,z:1e4});n.add(s);var l=new ZRText({style:{text:a.text,fill:a.textColor,fontSize:a.fontSize,fontWeight:a.fontWeight,fontStyle:a.fontStyle,fontFamily:a.fontFamily},zlevel:a.zlevel,z:10001}),c=new Rect$2({style:{fill:"none"},textContent:l,textConfig:{position:"right",distance:10},zlevel:a.zlevel,z:10001});n.add(c);var u;return a.showSpinner&&(u=new Arc({shape:{startAngle:-PI$5/2,endAngle:-PI$5/2+.1,r:a.spinnerRadius},style:{stroke:a.color,lineCap:"round",lineWidth:a.lineWidth},zlevel:a.zlevel,z:10001}),u.animateShape(!0).when(1e3,{endAngle:PI$5*3/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:PI$5*3/2}).delay(300).start("circularInOut"),n.add(u)),n.resize=function(){var d=l.getBoundingRect().width,h=a.showSpinner?a.spinnerRadius:0,f=(o.getWidth()-h*2-(a.showSpinner&&d?10:0)-d)/2-(a.showSpinner&&d?0:5+d/2)+(a.showSpinner?0:d/2)+(d?0:h),p=o.getHeight()/2;a.showSpinner&&u.setShape({cx:f,cy:p}),c.setShape({x:f-h,y:p-h,width:h*2,height:h*2}),s.setShape({x:0,y:0,width:o.getWidth(),height:o.getHeight()})},n.resize(),n}var Scheduler=function(){function o(a,n,s,l){this._stageTaskMap=createHashMap(),this.ecInstance=a,this.api=n,s=this._dataProcessorHandlers=s.slice(),l=this._visualHandlers=l.slice(),this._allHandlers=s.concat(l)}return o.prototype.restoreData=function(a,n){a.restoreData(n),this._stageTaskMap.each(function(s){var l=s.overallTask;l&&l.dirty()})},o.prototype.getPerformArgs=function(a,n){if(a.__pipeline){var s=this._pipelineMap.get(a.__pipeline.id),l=s.context,c=!n&&s.progressiveEnabled&&(!l||l.progressiveRender)&&a.__idxInPipeline>s.blockIndex,u=c?s.step:null,d=l&&l.modDataCount,h=d!=null?Math.ceil(d/u):null;return{step:u,modBy:h,modDataCount:d}}},o.prototype.getPipeline=function(a){return this._pipelineMap.get(a)},o.prototype.updateStreamModes=function(a,n){var s=this._pipelineMap.get(a.uid),l=a.getData(),c=l.count(),u=s.progressiveEnabled&&n.incrementalPrepareRender&&c>=s.threshold,d=a.get("large")&&c>=a.get("largeThreshold"),h=a.get("progressiveChunkMode")==="mod"?c:null;a.pipelineContext=s.context={progressiveRender:u,modDataCount:h,large:d}},o.prototype.restorePipelines=function(a){var n=this,s=n._pipelineMap=createHashMap();a.eachSeries(function(l){var c=l.getProgressive(),u=l.uid;s.set(u,{id:u,head:null,tail:null,threshold:l.getProgressiveThreshold(),progressiveEnabled:c&&!(l.preventIncremental&&l.preventIncremental()),blockIndex:-1,step:Math.round(c||700),count:0}),n._pipe(l,l.dataTask)})},o.prototype.prepareStageTasks=function(){var a=this._stageTaskMap,n=this.api.getModel(),s=this.api;each$f(this._allHandlers,function(l){var c=a.get(l.uid)||a.set(l.uid,{}),u="";process.env.NODE_ENV!=="production"&&(u='"reset" and "overallReset" must not be both specified.'),assert(!(l.reset&&l.overallReset),u),l.reset&&this._createSeriesStageTask(l,c,n,s),l.overallReset&&this._createOverallStageTask(l,c,n,s)},this)},o.prototype.prepareView=function(a,n,s,l){var c=a.renderTask,u=c.context;u.model=n,u.ecModel=s,u.api=l,c.__block=!a.incrementalPrepareRender,this._pipe(n,c)},o.prototype.performDataProcessorTasks=function(a,n){this._performStageTasks(this._dataProcessorHandlers,a,n,{block:!0})},o.prototype.performVisualTasks=function(a,n,s){this._performStageTasks(this._visualHandlers,a,n,s)},o.prototype._performStageTasks=function(a,n,s,l){l=l||{};var c=!1,u=this;each$f(a,function(h,f){if(!(l.visualType&&l.visualType!==h.visualType)){var p=u._stageTaskMap.get(h.uid),g=p.seriesTaskMap,v=p.overallTask;if(v){var b,w=v.agentStubMap;w.each(function(S){d(l,S)&&(S.dirty(),b=!0)}),b&&v.dirty(),u.updatePayload(v,s);var x=u.getPerformArgs(v,l.block);w.each(function(S){S.perform(x)}),v.perform(x)&&(c=!0)}else g&&g.each(function(S,E){d(l,S)&&S.dirty();var T=u.getPerformArgs(S,l.block);T.skip=!h.performRawSeries&&n.isSeriesFiltered(S.context.model),u.updatePayload(S,s),S.perform(T)&&(c=!0)})}});function d(h,f){return h.setDirty&&(!h.dirtyMap||h.dirtyMap.get(f.__pipeline.id))}this.unfinished=c||this.unfinished},o.prototype.performSeriesTasks=function(a){var n;a.eachSeries(function(s){n=s.dataTask.perform()||n}),this.unfinished=n||this.unfinished},o.prototype.plan=function(){this._pipelineMap.each(function(a){var n=a.tail;do{if(n.__block){a.blockIndex=n.__idxInPipeline;break}n=n.getUpstream()}while(n)})},o.prototype.updatePayload=function(a,n){n!=="remain"&&(a.context.payload=n)},o.prototype._createSeriesStageTask=function(a,n,s,l){var c=this,u=n.seriesTaskMap,d=n.seriesTaskMap=createHashMap(),h=a.seriesType,f=a.getTargetSeries;a.createOnAllSeries?s.eachRawSeries(p):h?s.eachRawSeriesByType(h,p):f&&f(s,l).each(p);function p(g){var v=g.uid,b=d.set(v,u&&u.get(v)||createTask({plan:seriesTaskPlan,reset:seriesTaskReset,count:seriesTaskCount}));b.context={model:g,ecModel:s,api:l,useClearVisual:a.isVisual&&!a.isLayout,plan:a.plan,reset:a.reset,scheduler:c},c._pipe(g,b)}},o.prototype._createOverallStageTask=function(a,n,s,l){var c=this,u=n.overallTask=n.overallTask||createTask({reset:overallTaskReset});u.context={ecModel:s,api:l,overallReset:a.overallReset,scheduler:c};var d=u.agentStubMap,h=u.agentStubMap=createHashMap(),f=a.seriesType,p=a.getTargetSeries,g=!0,v=!1,b="";process.env.NODE_ENV!=="production"&&(b='"createOnAllSeries" is not supported for "overallReset", because it will block all streams.'),assert(!a.createOnAllSeries,b),f?s.eachRawSeriesByType(f,w):p?p(s,l).each(w):(g=!1,each$f(s.getSeries(),w));function w(x){var S=x.uid,E=h.set(S,d&&d.get(S)||(v=!0,createTask({reset:stubReset,onDirty:stubOnDirty})));E.context={model:x,overallProgress:g},E.agent=u,E.__block=g,c._pipe(x,E)}v&&u.dirty()},o.prototype._pipe=function(a,n){var s=a.uid,l=this._pipelineMap.get(s);!l.head&&(l.head=n),l.tail&&l.tail.pipe(n),l.tail=n,n.__idxInPipeline=l.count++,n.__pipeline=l},o.wrapStageHandler=function(a,n){return isFunction$1(a)&&(a={overallReset:a,seriesType:detectSeriseType(a)}),a.uid=getUID("stageHandler"),n&&(a.visualType=n),a},o}();function overallTaskReset(o){o.overallReset(o.ecModel,o.api,o.payload)}function stubReset(o){return o.overallProgress&&stubProgress}function stubProgress(){this.agent.dirty(),this.getDownstream().dirty()}function stubOnDirty(){this.agent&&this.agent.dirty()}function seriesTaskPlan(o){return o.plan?o.plan(o.model,o.ecModel,o.api,o.payload):null}function seriesTaskReset(o){o.useClearVisual&&o.data.clearAllVisual();var a=o.resetDefines=normalizeToArray(o.reset(o.model,o.ecModel,o.api,o.payload));return a.length>1?map$1(a,function(n,s){return makeSeriesTaskProgress(s)}):singleSeriesTaskProgress}var singleSeriesTaskProgress=makeSeriesTaskProgress(0);function makeSeriesTaskProgress(o){return function(a,n){var s=n.data,l=n.resetDefines[o];if(l&&l.dataEach)for(var c=a.start;c<a.end;c++)l.dataEach(s,c);else l&&l.progress&&l.progress(a,s)}}function seriesTaskCount(o){return o.data.count()}function detectSeriseType(o){seriesType=null;try{o(ecModelMock,apiMock)}catch{}return seriesType}var ecModelMock={},apiMock={},seriesType;mockMethods(ecModelMock,GlobalModel);mockMethods(apiMock,ExtensionAPI);ecModelMock.eachSeriesByType=ecModelMock.eachRawSeriesByType=function(o){seriesType=o};ecModelMock.eachComponent=function(o){o.mainType==="series"&&o.subType&&(seriesType=o.subType)};function mockMethods(o,a){for(var n in a.prototype)o[n]=noop$1}var colorAll=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lightTheme={color:colorAll,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],colorAll]};var contrastColor="#B9B8CE",backgroundColor="#100C2A",axisCommon=function(){return{axisLine:{lineStyle:{color:contrastColor}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},colorPalette=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],theme={darkMode:!0,color:colorPalette,backgroundColor,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:contrastColor},pageTextStyle:{color:contrastColor}},textStyle:{color:contrastColor},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:contrastColor}},dataZoom:{borderColor:"#71708A",textStyle:{color:contrastColor},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:contrastColor}},timeline:{lineStyle:{color:contrastColor},label:{color:contrastColor},controlStyle:{color:contrastColor,borderColor:contrastColor}},calendar:{itemStyle:{color:backgroundColor},dayLabel:{color:contrastColor},monthLabel:{color:contrastColor},yearLabel:{color:contrastColor}},timeAxis:axisCommon(),logAxis:axisCommon(),valueAxis:axisCommon(),categoryAxis:axisCommon(),line:{symbol:"circle"},graph:{color:colorPalette},gauge:{title:{color:contrastColor},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:contrastColor},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};theme.categoryAxis.splitLine.show=!1;var ECEventProcessor=function(){function o(){}return o.prototype.normalizeQuery=function(a){var n={},s={},l={};if(isString$2(a)){var c=parseClassType(a);n.mainType=c.main||null,n.subType=c.sub||null}else{var u=["Index","Name","Id"],d={name:1,dataIndex:1,dataType:1};each$f(a,function(h,f){for(var p=!1,g=0;g<u.length;g++){var v=u[g],b=f.lastIndexOf(v);if(b>0&&b===f.length-v.length){var w=f.slice(0,b);w!=="data"&&(n.mainType=w,n[v.toLowerCase()]=h,p=!0)}}d.hasOwnProperty(f)&&(s[f]=h,p=!0),p||(l[f]=h)})}return{cptQuery:n,dataQuery:s,otherQuery:l}},o.prototype.filter=function(a,n){var s=this.eventInfo;if(!s)return!0;var l=s.targetEl,c=s.packedEvent,u=s.model,d=s.view;if(!u||!d)return!0;var h=n.cptQuery,f=n.dataQuery;return p(h,u,"mainType")&&p(h,u,"subType")&&p(h,u,"index","componentIndex")&&p(h,u,"name")&&p(h,u,"id")&&p(f,c,"name")&&p(f,c,"dataIndex")&&p(f,c,"dataType")&&(!d.filterForExposedEvent||d.filterForExposedEvent(a,n.otherQuery,l,c));function p(g,v,b,w){return g[b]==null||v[w||b]===g[b]}},o.prototype.afterTrigger=function(){this.eventInfo=null},o}(),SYMBOL_PROPS_WITH_CB=["symbol","symbolSize","symbolRotate","symbolOffset"],SYMBOL_PROPS=SYMBOL_PROPS_WITH_CB.concat(["symbolKeepAspect"]),seriesSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(o,a){var n=o.getData();if(o.legendIcon&&n.setVisual("legendIcon",o.legendIcon),!o.hasSymbolVisual)return;for(var s={},l={},c=!1,u=0;u<SYMBOL_PROPS_WITH_CB.length;u++){var d=SYMBOL_PROPS_WITH_CB[u],h=o.get(d);isFunction$1(h)?(c=!0,l[d]=h):s[d]=h}if(s.symbol=s.symbol||o.defaultSymbol,n.setVisual(extend({legendIcon:o.legendIcon||s.symbol,symbolKeepAspect:o.get("symbolKeepAspect")},s)),a.isSeriesFiltered(o))return;var f=keys$1(l);function p(g,v){for(var b=o.getRawValue(v),w=o.getDataParams(v),x=0;x<f.length;x++){var S=f[x];g.setItemVisual(v,S,l[S](b,w))}}return{dataEach:c?p:null}}},dataSymbolTask={createOnAllSeries:!0,performRawSeries:!0,reset:function(o,a){if(!o.hasSymbolVisual||a.isSeriesFiltered(o))return;var n=o.getData();function s(l,c){for(var u=l.getItemModel(c),d=0;d<SYMBOL_PROPS.length;d++){var h=SYMBOL_PROPS[d],f=u.getShallow(h,!0);f!=null&&l.setItemVisual(c,h,f)}}return{dataEach:n.hasItemOption?s:null}}};function getItemVisualFromData(o,a,n){switch(n){case"color":var s=o.getItemVisual(a,"style");return s[o.getVisual("drawType")];case"opacity":return o.getItemVisual(a,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return o.getItemVisual(a,n);default:process.env.NODE_ENV!=="production"&&console.warn("Unknown visual type "+n)}}function getVisualFromData(o,a){switch(a){case"color":var n=o.getVisual("style");return n[o.getVisual("drawType")];case"opacity":return o.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return o.getVisual(a);default:process.env.NODE_ENV!=="production"&&console.warn("Unknown visual type "+a)}}function setItemVisualFromData(o,a,n,s){switch(n){case"color":var l=o.ensureUniqueItemVisual(a,"style");l[o.getVisual("drawType")]=s,o.setItemVisual(a,"colorFromPalette",!1);break;case"opacity":o.ensureUniqueItemVisual(a,"style").opacity=s;break;case"symbol":case"symbolSize":case"liftZ":o.setItemVisual(a,n,s);break;default:process.env.NODE_ENV!=="production"&&console.warn("Unknown visual type "+n)}}function createLegacyDataSelectAction(o,a){function n(s,l){var c=[];return s.eachComponent({mainType:"series",subType:o,query:l},function(u){c.push(u.seriesIndex)}),c}each$f([[o+"ToggleSelect","toggleSelect"],[o+"Select","select"],[o+"UnSelect","unselect"]],function(s){a(s[0],function(l,c,u){l=extend({},l),process.env.NODE_ENV!=="production"&&deprecateReplaceLog(l.type,s[1]),u.dispatchAction(extend(l,{type:s[1],seriesIndex:n(c,l)}))})})}function handleSeriesLegacySelectEvents(o,a,n,s,l){var c=o+a;n.isSilent(c)||(process.env.NODE_ENV!=="production"&&deprecateLog("event "+c+" is deprecated."),s.eachComponent({mainType:"series",subType:"pie"},function(u){for(var d=u.seriesIndex,h=u.option.selectedMap,f=l.selected,p=0;p<f.length;p++)if(f[p].seriesIndex===d){var g=u.getData(),v=queryDataIndex(g,l.fromActionPayload);n.trigger(c,{type:c,seriesId:u.id,name:isArray$1(v)?g.getName(v[0]):g.getName(v),selected:isString$2(h)?h:extend({},h)})}}))}function handleLegacySelectEvents(o,a,n){o.on("selectchanged",function(s){var l=n.getModel();s.isFromClick?(handleSeriesLegacySelectEvents("map","selectchanged",a,l,s),handleSeriesLegacySelectEvents("pie","selectchanged",a,l,s)):s.fromAction==="select"?(handleSeriesLegacySelectEvents("map","selected",a,l,s),handleSeriesLegacySelectEvents("pie","selected",a,l,s)):s.fromAction==="unselect"&&(handleSeriesLegacySelectEvents("map","unselected",a,l,s),handleSeriesLegacySelectEvents("pie","unselected",a,l,s))})}function findEventDispatcher(o,a,n){for(var s;o&&!(a(o)&&(s=o,n));)o=o.__hostTarget||o.parent;return s}var wmUniqueIndex=Math.round(Math.random()*9),supportDefineProperty=typeof Object.defineProperty=="function",WeakMap$1=function(){function o(){this._id="__ec_inner_"+wmUniqueIndex++}return o.prototype.get=function(a){return this._guard(a)[this._id]},o.prototype.set=function(a,n){var s=this._guard(a);return supportDefineProperty?Object.defineProperty(s,this._id,{value:n,enumerable:!1,configurable:!0}):s[this._id]=n,this},o.prototype.delete=function(a){return this.has(a)?(delete this._guard(a)[this._id],!0):!1},o.prototype.has=function(a){return!!this._guard(a)[this._id]},o.prototype._guard=function(a){if(a!==Object(a))throw TypeError("Value of WeakMap is not a non-null object.");return a},o}(),Triangle=Path.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(o,a){var n=a.cx,s=a.cy,l=a.width/2,c=a.height/2;o.moveTo(n,s-c),o.lineTo(n+l,s+c),o.lineTo(n-l,s+c),o.closePath()}}),Diamond=Path.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(o,a){var n=a.cx,s=a.cy,l=a.width/2,c=a.height/2;o.moveTo(n,s-c),o.lineTo(n+l,s),o.lineTo(n,s+c),o.lineTo(n-l,s),o.closePath()}}),Pin=Path.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(o,a){var n=a.x,s=a.y,l=a.width/5*3,c=Math.max(l,a.height),u=l/2,d=u*u/(c-u),h=s-c+u+d,f=Math.asin(d/u),p=Math.cos(f)*u,g=Math.sin(f),v=Math.cos(f),b=u*.6,w=u*.7;o.moveTo(n-p,h+d),o.arc(n,h,u,Math.PI-f,Math.PI*2+f),o.bezierCurveTo(n+p-g*b,h+d+v*b,n,s-w,n,s),o.bezierCurveTo(n,s-w,n-p+g*b,h+d+v*b,n-p,h+d),o.closePath()}}),Arrow=Path.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(o,a){var n=a.height,s=a.width,l=a.x,c=a.y,u=s/3*2;o.moveTo(l,c),o.lineTo(l+u,c+n),o.lineTo(l,c+n/4*3),o.lineTo(l-u,c+n),o.lineTo(l,c),o.closePath()}}),symbolCtors={line:Line$1,rect:Rect$2,roundRect:Rect$2,square:Rect$2,circle:Circle,diamond:Diamond,pin:Pin,arrow:Arrow,triangle:Triangle},symbolShapeMakers={line:function(o,a,n,s,l){l.x1=o,l.y1=a+s/2,l.x2=o+n,l.y2=a+s/2},rect:function(o,a,n,s,l){l.x=o,l.y=a,l.width=n,l.height=s},roundRect:function(o,a,n,s,l){l.x=o,l.y=a,l.width=n,l.height=s,l.r=Math.min(n,s)/4},square:function(o,a,n,s,l){var c=Math.min(n,s);l.x=o,l.y=a,l.width=c,l.height=c},circle:function(o,a,n,s,l){l.cx=o+n/2,l.cy=a+s/2,l.r=Math.min(n,s)/2},diamond:function(o,a,n,s,l){l.cx=o+n/2,l.cy=a+s/2,l.width=n,l.height=s},pin:function(o,a,n,s,l){l.x=o+n/2,l.y=a+s/2,l.width=n,l.height=s},arrow:function(o,a,n,s,l){l.x=o+n/2,l.y=a+s/2,l.width=n,l.height=s},triangle:function(o,a,n,s,l){l.cx=o+n/2,l.cy=a+s/2,l.width=n,l.height=s}},symbolBuildProxies={};each$f(symbolCtors,function(o,a){symbolBuildProxies[a]=new o});var SymbolClz=Path.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(o,a,n){var s=calculateTextPosition(o,a,n),l=this.shape;return l&&l.symbolType==="pin"&&a.position==="inside"&&(s.y=n.y+n.height*.4),s},buildPath:function(o,a,n){var s=a.symbolType;if(s!=="none"){var l=symbolBuildProxies[s];l||(s="rect",l=symbolBuildProxies[s]),symbolShapeMakers[s](a.x,a.y,a.width,a.height,l.shape),l.buildPath(o,l.shape,n)}}});function symbolPathSetColor(o,a){if(this.type!=="image"){var n=this.style;this.__isEmptyBrush?(n.stroke=o,n.fill=a||"#fff",n.lineWidth=2):this.shape.symbolType==="line"?n.stroke=o:n.fill=o,this.markRedraw()}}function createSymbol$1(o,a,n,s,l,c,u){var d=o.indexOf("empty")===0;d&&(o=o.substr(5,1).toLowerCase()+o.substr(6));var h;return o.indexOf("image://")===0?h=makeImage(o.slice(8),new BoundingRect(a,n,s,l),u?"center":"cover"):o.indexOf("path://")===0?h=makePath(o.slice(7),{},new BoundingRect(a,n,s,l),u?"center":"cover"):h=new SymbolClz({shape:{symbolType:o,x:a,y:n,width:s,height:l}}),h.__isEmptyBrush=d,h.setColor=symbolPathSetColor,c&&h.setColor(c),h}function normalizeSymbolSize(o){return isArray$1(o)||(o=[+o,+o]),[o[0]||0,o[1]||0]}function normalizeSymbolOffset(o,a){if(o!=null)return isArray$1(o)||(o=[o,o]),[parsePercent(o[0],a[0])||0,parsePercent(retrieve2(o[1],o[0]),a[1])||0]}function isSafeNum(o){return isFinite(o)}function createLinearGradient(o,a,n){var s=a.x==null?0:a.x,l=a.x2==null?1:a.x2,c=a.y==null?0:a.y,u=a.y2==null?0:a.y2;a.global||(s=s*n.width+n.x,l=l*n.width+n.x,c=c*n.height+n.y,u=u*n.height+n.y),s=isSafeNum(s)?s:0,l=isSafeNum(l)?l:1,c=isSafeNum(c)?c:0,u=isSafeNum(u)?u:0;var d=o.createLinearGradient(s,c,l,u);return d}function createRadialGradient(o,a,n){var s=n.width,l=n.height,c=Math.min(s,l),u=a.x==null?.5:a.x,d=a.y==null?.5:a.y,h=a.r==null?.5:a.r;a.global||(u=u*s+n.x,d=d*l+n.y,h=h*c),u=isSafeNum(u)?u:.5,d=isSafeNum(d)?d:.5,h=h>=0&&isSafeNum(h)?h:.5;var f=o.createRadialGradient(u,d,0,u,d,h);return f}function getCanvasGradient(o,a,n){for(var s=a.type==="radial"?createRadialGradient(o,a,n):createLinearGradient(o,a,n),l=a.colorStops,c=0;c<l.length;c++)s.addColorStop(l[c].offset,l[c].color);return s}function isClipPathChanged(o,a){if(o===a||!o&&!a)return!1;if(!o||!a||o.length!==a.length)return!0;for(var n=0;n<o.length;n++)if(o[n]!==a[n])return!0;return!1}function parseInt10(o){return parseInt(o,10)}function getSize$1(o,a,n){var s=["width","height"][a],l=["clientWidth","clientHeight"][a],c=["paddingLeft","paddingTop"][a],u=["paddingRight","paddingBottom"][a];if(n[s]!=null&&n[s]!=="auto")return parseFloat(n[s]);var d=document.defaultView.getComputedStyle(o);return(o[l]||parseInt10(d[s])||parseInt10(o.style[s]))-(parseInt10(d[c])||0)-(parseInt10(d[u])||0)|0}function normalizeLineDash(o,a){return!o||o==="solid"||!(a>0)?null:o==="dashed"?[4*a,2*a]:o==="dotted"?[a]:isNumber(o)?[o]:isArray$1(o)?o:null}function getLineDash(o){var a=o.style,n=a.lineDash&&a.lineWidth>0&&normalizeLineDash(a.lineDash,a.lineWidth),s=a.lineDashOffset;if(n){var l=a.strokeNoScale&&o.getLineScale?o.getLineScale():1;l&&l!==1&&(n=map$1(n,function(c){return c/l}),s/=l)}return[n,s]}var pathProxyForDraw=new PathProxy(!0);function styleHasStroke(o){var a=o.stroke;return!(a==null||a==="none"||!(o.lineWidth>0))}function isValidStrokeFillStyle(o){return typeof o=="string"&&o!=="none"}function styleHasFill(o){var a=o.fill;return a!=null&&a!=="none"}function doFillPath(o,a){if(a.fillOpacity!=null&&a.fillOpacity!==1){var n=o.globalAlpha;o.globalAlpha=a.fillOpacity*a.opacity,o.fill(),o.globalAlpha=n}else o.fill()}function doStrokePath(o,a){if(a.strokeOpacity!=null&&a.strokeOpacity!==1){var n=o.globalAlpha;o.globalAlpha=a.strokeOpacity*a.opacity,o.stroke(),o.globalAlpha=n}else o.stroke()}function createCanvasPattern(o,a,n){var s=createOrUpdateImage(a.image,a.__image,n);if(isImageReady(s)){var l=o.createPattern(s,a.repeat||"repeat");if(typeof DOMMatrix=="function"&&l&&l.setTransform){var c=new DOMMatrix;c.translateSelf(a.x||0,a.y||0),c.rotateSelf(0,0,(a.rotation||0)*RADIAN_TO_DEGREE),c.scaleSelf(a.scaleX||1,a.scaleY||1),l.setTransform(c)}return l}}function brushPath(o,a,n,s){var l,c=styleHasStroke(n),u=styleHasFill(n),d=n.strokePercent,h=d<1,f=!a.path;(!a.silent||h)&&f&&a.createPathProxy();var p=a.path||pathProxyForDraw,g=a.__dirty;if(!s){var v=n.fill,b=n.stroke,w=u&&!!v.colorStops,x=c&&!!b.colorStops,S=u&&!!v.image,E=c&&!!b.image,T=void 0,C=void 0,A=void 0,R=void 0,j=void 0;(w||x)&&(j=a.getBoundingRect()),w&&(T=g?getCanvasGradient(o,v,j):a.__canvasFillGradient,a.__canvasFillGradient=T),x&&(C=g?getCanvasGradient(o,b,j):a.__canvasStrokeGradient,a.__canvasStrokeGradient=C),S&&(A=g||!a.__canvasFillPattern?createCanvasPattern(o,v,a):a.__canvasFillPattern,a.__canvasFillPattern=A),E&&(R=g||!a.__canvasStrokePattern?createCanvasPattern(o,b,a):a.__canvasStrokePattern,a.__canvasStrokePattern=A),w?o.fillStyle=T:S&&(A?o.fillStyle=A:u=!1),x?o.strokeStyle=C:E&&(R?o.strokeStyle=R:c=!1)}var D=a.getGlobalScale();p.setScale(D[0],D[1],a.segmentIgnoreThreshold);var O,H;o.setLineDash&&n.lineDash&&(l=getLineDash(a),O=l[0],H=l[1]);var q=!0;(f||g&SHAPE_CHANGED_BIT)&&(p.setDPR(o.dpr),h?p.setContext(null):(p.setContext(o),q=!1),p.reset(),a.buildPath(p,a.shape,s),p.toStatic(),a.pathUpdated()),q&&p.rebuildPath(o,h?d:1),O&&(o.setLineDash(O),o.lineDashOffset=H),s||(n.strokeFirst?(c&&doStrokePath(o,n),u&&doFillPath(o,n)):(u&&doFillPath(o,n),c&&doStrokePath(o,n))),O&&o.setLineDash([])}function brushImage(o,a,n){var s=a.__image=createOrUpdateImage(n.image,a.__image,a,a.onload);if(!(!s||!isImageReady(s))){var l=n.x||0,c=n.y||0,u=a.getWidth(),d=a.getHeight(),h=s.width/s.height;if(u==null&&d!=null?u=d*h:d==null&&u!=null?d=u/h:u==null&&d==null&&(u=s.width,d=s.height),n.sWidth&&n.sHeight){var f=n.sx||0,p=n.sy||0;o.drawImage(s,f,p,n.sWidth,n.sHeight,l,c,u,d)}else if(n.sx&&n.sy){var f=n.sx,p=n.sy,g=u-f,v=d-p;o.drawImage(s,f,p,g,v,l,c,u,d)}else o.drawImage(s,l,c,u,d)}}function brushText(o,a,n){var s,l=n.text;if(l!=null&&(l+=""),l){o.font=n.font||DEFAULT_FONT,o.textAlign=n.textAlign,o.textBaseline=n.textBaseline;var c=void 0,u=void 0;o.setLineDash&&n.lineDash&&(s=getLineDash(a),c=s[0],u=s[1]),c&&(o.setLineDash(c),o.lineDashOffset=u),n.strokeFirst?(styleHasStroke(n)&&o.strokeText(l,n.x,n.y),styleHasFill(n)&&o.fillText(l,n.x,n.y)):(styleHasFill(n)&&o.fillText(l,n.x,n.y),styleHasStroke(n)&&o.strokeText(l,n.x,n.y)),c&&o.setLineDash([])}}var SHADOW_NUMBER_PROPS=["shadowBlur","shadowOffsetX","shadowOffsetY"],STROKE_PROPS=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function bindCommonProps(o,a,n,s,l){var c=!1;if(!s&&(n=n||{},a===n))return!1;if(s||a.opacity!==n.opacity){flushPathDrawn(o,l),c=!0;var u=Math.max(Math.min(a.opacity,1),0);o.globalAlpha=isNaN(u)?DEFAULT_COMMON_STYLE.opacity:u}(s||a.blend!==n.blend)&&(c||(flushPathDrawn(o,l),c=!0),o.globalCompositeOperation=a.blend||DEFAULT_COMMON_STYLE.blend);for(var d=0;d<SHADOW_NUMBER_PROPS.length;d++){var h=SHADOW_NUMBER_PROPS[d];(s||a[h]!==n[h])&&(c||(flushPathDrawn(o,l),c=!0),o[h]=o.dpr*(a[h]||0))}return(s||a.shadowColor!==n.shadowColor)&&(c||(flushPathDrawn(o,l),c=!0),o.shadowColor=a.shadowColor||DEFAULT_COMMON_STYLE.shadowColor),c}function bindPathAndTextCommonStyle(o,a,n,s,l){var c=getStyle(a,l.inHover),u=s?null:n&&getStyle(n,l.inHover)||{};if(c===u)return!1;var d=bindCommonProps(o,c,u,s,l);if((s||c.fill!==u.fill)&&(d||(flushPathDrawn(o,l),d=!0),isValidStrokeFillStyle(c.fill)&&(o.fillStyle=c.fill)),(s||c.stroke!==u.stroke)&&(d||(flushPathDrawn(o,l),d=!0),isValidStrokeFillStyle(c.stroke)&&(o.strokeStyle=c.stroke)),(s||c.opacity!==u.opacity)&&(d||(flushPathDrawn(o,l),d=!0),o.globalAlpha=c.opacity==null?1:c.opacity),a.hasStroke()){var h=c.lineWidth,f=h/(c.strokeNoScale&&a.getLineScale?a.getLineScale():1);o.lineWidth!==f&&(d||(flushPathDrawn(o,l),d=!0),o.lineWidth=f)}for(var p=0;p<STROKE_PROPS.length;p++){var g=STROKE_PROPS[p],v=g[0];(s||c[v]!==u[v])&&(d||(flushPathDrawn(o,l),d=!0),o[v]=c[v]||g[1])}return d}function bindImageStyle(o,a,n,s,l){return bindCommonProps(o,getStyle(a,l.inHover),n&&getStyle(n,l.inHover),s,l)}function setContextTransform(o,a){var n=a.transform,s=o.dpr||1;n?o.setTransform(s*n[0],s*n[1],s*n[2],s*n[3],s*n[4],s*n[5]):o.setTransform(s,0,0,s,0,0)}function updateClipStatus(o,a,n){for(var s=!1,l=0;l<o.length;l++){var c=o[l];s=s||c.isZeroArea(),setContextTransform(a,c),a.beginPath(),c.buildPath(a,c.shape),a.clip()}n.allClipped=s}function isTransformChanged(o,a){return o&&a?o[0]!==a[0]||o[1]!==a[1]||o[2]!==a[2]||o[3]!==a[3]||o[4]!==a[4]||o[5]!==a[5]:!(!o&&!a)}var DRAW_TYPE_PATH=1,DRAW_TYPE_IMAGE=2,DRAW_TYPE_TEXT=3,DRAW_TYPE_INCREMENTAL=4;function canPathBatch(o){var a=styleHasFill(o),n=styleHasStroke(o);return!(o.lineDash||!(+a^+n)||a&&typeof o.fill!="string"||n&&typeof o.stroke!="string"||o.strokePercent<1||o.strokeOpacity<1||o.fillOpacity<1)}function flushPathDrawn(o,a){a.batchFill&&o.fill(),a.batchStroke&&o.stroke(),a.batchFill="",a.batchStroke=""}function getStyle(o,a){return a&&o.__hoverStyle||o.style}function brushSingle(o,a){brush$1(o,a,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function brush$1(o,a,n,s){var l=a.transform;if(!a.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1)){a.__dirty&=~REDRAW_BIT,a.__isRendered=!1;return}var c=a.__clipPaths,u=n.prevElClipPaths,d=!1,h=!1;if((!u||isClipPathChanged(c,u))&&(u&&u.length&&(flushPathDrawn(o,n),o.restore(),h=d=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),c&&c.length&&(flushPathDrawn(o,n),o.save(),updateClipStatus(c,o,n),d=!0),n.prevElClipPaths=c),n.allClipped){a.__isRendered=!1;return}a.beforeBrush&&a.beforeBrush(),a.innerBeforeBrush();var f=n.prevEl;f||(h=d=!0);var p=a instanceof Path&&a.autoBatch&&canPathBatch(a.style);d||isTransformChanged(l,f.transform)?(flushPathDrawn(o,n),setContextTransform(o,a)):p||flushPathDrawn(o,n);var g=getStyle(a,n.inHover);a instanceof Path?(n.lastDrawType!==DRAW_TYPE_PATH&&(h=!0,n.lastDrawType=DRAW_TYPE_PATH),bindPathAndTextCommonStyle(o,a,f,h,n),(!p||!n.batchFill&&!n.batchStroke)&&o.beginPath(),brushPath(o,a,g,p),p&&(n.batchFill=g.fill||"",n.batchStroke=g.stroke||"")):a instanceof TSpan?(n.lastDrawType!==DRAW_TYPE_TEXT&&(h=!0,n.lastDrawType=DRAW_TYPE_TEXT),bindPathAndTextCommonStyle(o,a,f,h,n),brushText(o,a,g)):a instanceof ZRImage?(n.lastDrawType!==DRAW_TYPE_IMAGE&&(h=!0,n.lastDrawType=DRAW_TYPE_IMAGE),bindImageStyle(o,a,f,h,n),brushImage(o,a,g)):a.getTemporalDisplayables&&(n.lastDrawType!==DRAW_TYPE_INCREMENTAL&&(h=!0,n.lastDrawType=DRAW_TYPE_INCREMENTAL),brushIncremental(o,a,n)),p&&s&&flushPathDrawn(o,n),a.innerAfterBrush(),a.afterBrush&&a.afterBrush(),n.prevEl=a,a.__dirty=0,a.__isRendered=!0}function brushIncremental(o,a,n){var s=a.getDisplayables(),l=a.getTemporalDisplayables();o.save();var c={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover},u,d;for(u=a.getCursor(),d=s.length;u<d;u++){var h=s[u];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),brush$1(o,h,c,u===d-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),c.prevEl=h}for(var f=0,p=l.length;f<p;f++){var h=l[f];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),brush$1(o,h,c,f===p-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),c.prevEl=h}a.clearTemporalDisplayables(),a.notClear=!0,o.restore()}var decalMap=new WeakMap$1,decalCache=new LRU(100),decalKeys=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function createOrUpdatePatternFromDecal(o,a){if(o==="none")return null;var n=a.getDevicePixelRatio(),s=a.getZr(),l=s.painter.type==="svg";o.dirty&&decalMap.delete(o);var c=decalMap.get(o);if(c)return c;var u=defaults(o,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});u.backgroundColor==="none"&&(u.backgroundColor=null);var d={repeat:"repeat"};return h(d),d.rotation=u.rotation,d.scaleX=d.scaleY=l?1:1/n,decalMap.set(o,d),o.dirty=!1,d;function h(f){for(var p=[n],g=!0,v=0;v<decalKeys.length;++v){var b=u[decalKeys[v]];if(b!=null&&!isArray$1(b)&&!isString$2(b)&&!isNumber(b)&&typeof b!="boolean"){g=!1;break}p.push(b)}var w;if(g){w=p.join(",")+(l?"-svg":"");var x=decalCache.get(w);x&&(l?f.svgElement=x:f.image=x)}var S=normalizeDashArrayX(u.dashArrayX),E=normalizeDashArrayY(u.dashArrayY),T=normalizeSymbolArray(u.symbol),C=getLineBlockLengthX(S),A=getLineBlockLengthY(E),R=!l&&platformApi.createCanvas(),j=l&&{tag:"g",attrs:{},key:"dcl",children:[]},D=H(),O;R&&(R.width=D.width*n,R.height=D.height*n,O=R.getContext("2d")),q(),g&&decalCache.put(w,R||j),f.image=R,f.svgElement=j,f.svgWidth=D.width,f.svgHeight=D.height;function H(){for(var Y=1,te=0,ee=C.length;te<ee;++te)Y=getLeastCommonMultiple(Y,C[te]);for(var re=1,te=0,ee=T.length;te<ee;++te)re=getLeastCommonMultiple(re,T[te].length);Y*=re;var ne=A*C.length*T.length;if(process.env.NODE_ENV!=="production"){var ce=function(ve){console.warn("Calculated decal size is greater than "+ve+" due to decal option settings so "+ve+" is used for the decal size. Please consider changing the decal option to make a smaller decal or set "+ve+" to be larger to avoid incontinuity.")};Y>u.maxTileWidth&&ce("maxTileWidth"),ne>u.maxTileHeight&&ce("maxTileHeight")}return{width:Math.max(1,Math.min(Y,u.maxTileWidth)),height:Math.max(1,Math.min(ne,u.maxTileHeight))}}function q(){O&&(O.clearRect(0,0,R.width,R.height),u.backgroundColor&&(O.fillStyle=u.backgroundColor,O.fillRect(0,0,R.width,R.height)));for(var Y=0,te=0;te<E.length;++te)Y+=E[te];if(Y<=0)return;for(var ee=-A,re=0,ne=0,ce=0;ee<D.height;){if(re%2===0){for(var ve=ne/2%T.length,be=0,me=0,ae=0;be<D.width*2;){for(var pe=0,te=0;te<S[ce].length;++te)pe+=S[ce][te];if(pe<=0)break;if(me%2===0){var ie=(1-u.symbolSize)*.5,se=be+S[ce][me]*ie,de=ee+E[re]*ie,le=S[ce][me]*u.symbolSize,ge=E[re]*u.symbolSize,Re=ae/2%T[ve].length;we(se,de,le,ge,T[ve][Re])}be+=S[ce][me],++ae,++me,me===S[ce].length&&(me=0)}++ce,ce===S.length&&(ce=0)}ee+=E[re],++ne,++re,re===E.length&&(re=0)}function we(Se,xe,ke,Ie,He){var Le=l?1:n,De=createSymbol$1(He,Se*Le,xe*Le,ke*Le,Ie*Le,u.color,u.symbolKeepAspect);if(l){var Ee=s.painter.renderOneToVNode(De);Ee&&j.children.push(Ee)}else brushSingle(O,De)}}}}function normalizeSymbolArray(o){if(!o||o.length===0)return[["rect"]];if(isString$2(o))return[[o]];for(var a=!0,n=0;n<o.length;++n)if(!isString$2(o[n])){a=!1;break}if(a)return normalizeSymbolArray([o]);for(var s=[],n=0;n<o.length;++n)isString$2(o[n])?s.push([o[n]]):s.push(o[n]);return s}function normalizeDashArrayX(o){if(!o||o.length===0)return[[0,0]];if(isNumber(o)){var a=Math.ceil(o);return[[a,a]]}for(var n=!0,s=0;s<o.length;++s)if(!isNumber(o[s])){n=!1;break}if(n)return normalizeDashArrayX([o]);for(var l=[],s=0;s<o.length;++s)if(isNumber(o[s])){var a=Math.ceil(o[s]);l.push([a,a])}else{var a=map$1(o[s],function(d){return Math.ceil(d)});a.length%2===1?l.push(a.concat(a)):l.push(a)}return l}function normalizeDashArrayY(o){if(!o||typeof o=="object"&&o.length===0)return[0,0];if(isNumber(o)){var a=Math.ceil(o);return[a,a]}var n=map$1(o,function(s){return Math.ceil(s)});return o.length%2?n.concat(n):n}function getLineBlockLengthX(o){return map$1(o,function(a){return getLineBlockLengthY(a)})}function getLineBlockLengthY(o){for(var a=0,n=0;n<o.length;++n)a+=o[n];return o.length%2===1?a*2:a}function decalVisual(o,a){o.eachRawSeries(function(n){if(!o.isSeriesFiltered(n)){var s=n.getData();s.hasItemVisual()&&s.each(function(u){var d=s.getItemVisual(u,"decal");if(d){var h=s.ensureUniqueItemVisual(u,"style");h.decal=createOrUpdatePatternFromDecal(d,a)}});var l=s.getVisual("decal");if(l){var c=s.getVisual("style");c.decal=createOrUpdatePatternFromDecal(l,a)}}})}var lifecycle=new Eventful,implsStore={};function registerImpl(o,a){process.env.NODE_ENV!=="production"&&implsStore[o]&&error("Already has an implementation of "+o+"."),implsStore[o]=a}function getImpl(o){return process.env.NODE_ENV!=="production"&&(implsStore[o]||error("Implementation of "+o+" doesn't exists.")),implsStore[o]}var version="5.6.0",dependencies={zrender:"5.6.1"},TEST_FRAME_REMAIN_TIME=1,PRIORITY_PROCESSOR_SERIES_FILTER=800,PRIORITY_PROCESSOR_DATASTACK=900,PRIORITY_PROCESSOR_FILTER=1e3,PRIORITY_PROCESSOR_DEFAULT=2e3,PRIORITY_PROCESSOR_STATISTIC=5e3,PRIORITY_VISUAL_LAYOUT=1e3,PRIORITY_VISUAL_PROGRESSIVE_LAYOUT=1100,PRIORITY_VISUAL_GLOBAL=2e3,PRIORITY_VISUAL_CHART=3e3,PRIORITY_VISUAL_COMPONENT=4e3,PRIORITY_VISUAL_CHART_DATA_CUSTOM=4500,PRIORITY_VISUAL_POST_CHART_LAYOUT=4600,PRIORITY_VISUAL_BRUSH=5e3,PRIORITY_VISUAL_ARIA=6e3,PRIORITY_VISUAL_DECAL=7e3,PRIORITY={PROCESSOR:{FILTER:PRIORITY_PROCESSOR_FILTER,SERIES_FILTER:PRIORITY_PROCESSOR_SERIES_FILTER,STATISTIC:PRIORITY_PROCESSOR_STATISTIC},VISUAL:{LAYOUT:PRIORITY_VISUAL_LAYOUT,PROGRESSIVE_LAYOUT:PRIORITY_VISUAL_PROGRESSIVE_LAYOUT,GLOBAL:PRIORITY_VISUAL_GLOBAL,CHART:PRIORITY_VISUAL_CHART,POST_CHART_LAYOUT:PRIORITY_VISUAL_POST_CHART_LAYOUT,COMPONENT:PRIORITY_VISUAL_COMPONENT,BRUSH:PRIORITY_VISUAL_BRUSH,CHART_ITEM:PRIORITY_VISUAL_CHART_DATA_CUSTOM,ARIA:PRIORITY_VISUAL_ARIA,DECAL:PRIORITY_VISUAL_DECAL}},IN_MAIN_PROCESS_KEY="__flagInMainProcess",PENDING_UPDATE="__pendingUpdate",STATUS_NEEDS_UPDATE_KEY="__needsUpdateStatus",ACTION_REG=/^[a-zA-Z0-9_]+$/,CONNECT_STATUS_KEY="__connectUpdateStatus",CONNECT_STATUS_PENDING=0,CONNECT_STATUS_UPDATING=1,CONNECT_STATUS_UPDATED=2;function createRegisterEventWithLowercaseECharts(o){return function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];if(this.isDisposed()){disposedWarning(this.id);return}return toLowercaseNameAndCallEventful(this,o,a)}}function createRegisterEventWithLowercaseMessageCenter(o){return function(){for(var a=[],n=0;n<arguments.length;n++)a[n]=arguments[n];return toLowercaseNameAndCallEventful(this,o,a)}}function toLowercaseNameAndCallEventful(o,a,n){return n[0]=n[0]&&n[0].toLowerCase(),Eventful.prototype[a].apply(o,n)}var MessageCenter=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a}(Eventful),messageCenterProto=MessageCenter.prototype;messageCenterProto.on=createRegisterEventWithLowercaseMessageCenter("on");messageCenterProto.off=createRegisterEventWithLowercaseMessageCenter("off");var prepare,prepareView,updateDirectly,updateMethods,doConvertPixel,updateStreamModes,doDispatchAction,flushPendingActions,triggerUpdatedEvent,bindRenderedEvent,bindMouseEvent,render,renderComponents,renderSeries,createExtensionAPI,enableConnect,markStatusToUpdate,applyChangedStates,ECharts=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this,new ECEventProcessor)||this;c._chartsViews=[],c._chartsMap={},c._componentsViews=[],c._componentsMap={},c._pendingActions=[],l=l||{},isString$2(s)&&(s=themeStorage[s]),c._dom=n;var u="canvas",d="auto",h=!1;if(process.env.NODE_ENV!=="production"){var f=env.hasGlobalWindow?window:global;f&&(u=retrieve2(f.__ECHARTS__DEFAULT__RENDERER__,u),d=retrieve2(f.__ECHARTS__DEFAULT__COARSE_POINTER,d),h=retrieve2(f.__ECHARTS__DEFAULT__USE_DIRTY_RECT__,h))}l.ssr&&registerSSRDataGetter(function(b){var w=getECData(b),x=w.dataIndex;if(x!=null){var S=createHashMap();return S.set("series_index",w.seriesIndex),S.set("data_index",x),w.ssrType&&S.set("ssr_type",w.ssrType),S}});var p=c._zr=init$2(n,{renderer:l.renderer||u,devicePixelRatio:l.devicePixelRatio,width:l.width,height:l.height,ssr:l.ssr,useDirtyRect:retrieve2(l.useDirtyRect,h),useCoarsePointer:retrieve2(l.useCoarsePointer,d),pointerSize:l.pointerSize});c._ssr=l.ssr,c._throttledZrFlush=throttle(bind$1(p.flush,p),17),s=clone$4(s),s&&globalBackwardCompat(s,!0),c._theme=s,c._locale=createLocaleObject(l.locale||SYSTEM_LANG),c._coordSysMgr=new CoordinateSystemManager;var g=c._api=createExtensionAPI(c);function v(b,w){return b.__prio-w.__prio}return sort$2(visualFuncs,v),sort$2(dataProcessorFuncs,v),c._scheduler=new Scheduler(c,g,dataProcessorFuncs,visualFuncs),c._messageCenter=new MessageCenter,c._initEvents(),c.resize=bind$1(c.resize,c),p.animation.on("frame",c._onframe,c),bindRenderedEvent(p,c),bindMouseEvent(p,c),setAsPrimitive(c),c}return a.prototype._onframe=function(){if(!this._disposed){applyChangedStates(this);var n=this._scheduler;if(this[PENDING_UPDATE]){var s=this[PENDING_UPDATE].silent;this[IN_MAIN_PROCESS_KEY]=!0;try{prepare(this),updateMethods.update.call(this,null,this[PENDING_UPDATE].updateParams)}catch(h){throw this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,h}this._zr.flush(),this[IN_MAIN_PROCESS_KEY]=!1,this[PENDING_UPDATE]=null,flushPendingActions.call(this,s),triggerUpdatedEvent.call(this,s)}else if(n.unfinished){var l=TEST_FRAME_REMAIN_TIME,c=this._model,u=this._api;n.unfinished=!1;do{var d=+new Date;n.performSeriesTasks(c),n.performDataProcessorTasks(c),updateStreamModes(this,c),n.performVisualTasks(c),renderSeries(this,this._model,u,"remain",{}),l-=+new Date-d}while(l>0&&n.unfinished);n.unfinished||this._zr.flush()}}},a.prototype.getDom=function(){return this._dom},a.prototype.getId=function(){return this.id},a.prototype.getZr=function(){return this._zr},a.prototype.isSSR=function(){return this._ssr},a.prototype.setOption=function(n,s,l){if(this[IN_MAIN_PROCESS_KEY]){process.env.NODE_ENV!=="production"&&error("`setOption` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}var c,u,d;if(isObject$3(s)&&(l=s.lazyUpdate,c=s.silent,u=s.replaceMerge,d=s.transition,s=s.notMerge),this[IN_MAIN_PROCESS_KEY]=!0,!this._model||s){var h=new OptionManager(this._api),f=this._theme,p=this._model=new GlobalModel;p.scheduler=this._scheduler,p.ssr=this._ssr,p.init(null,null,null,f,this._locale,h)}this._model.setOption(n,{replaceMerge:u},optionPreprocessorFuncs);var g={seriesTransition:d,optionChanged:!0};if(l)this[PENDING_UPDATE]={silent:c,updateParams:g},this[IN_MAIN_PROCESS_KEY]=!1,this.getZr().wakeUp();else{try{prepare(this),updateMethods.update.call(this,null,g)}catch(v){throw this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,v}this._ssr||this._zr.flush(),this[PENDING_UPDATE]=null,this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}},a.prototype.setTheme=function(){deprecateLog("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},a.prototype.getModel=function(){return this._model},a.prototype.getOption=function(){return this._model&&this._model.getOption()},a.prototype.getWidth=function(){return this._zr.getWidth()},a.prototype.getHeight=function(){return this._zr.getHeight()},a.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||env.hasGlobalWindow&&window.devicePixelRatio||1},a.prototype.getRenderedCanvas=function(n){return process.env.NODE_ENV!=="production"&&deprecateReplaceLog("getRenderedCanvas","renderToCanvas"),this.renderToCanvas(n)},a.prototype.renderToCanvas=function(n){n=n||{};var s=this._zr.painter;if(process.env.NODE_ENV!=="production"&&s.type!=="canvas")throw new Error("renderToCanvas can only be used in the canvas renderer.");return s.getRenderedCanvas({backgroundColor:n.backgroundColor||this._model.get("backgroundColor"),pixelRatio:n.pixelRatio||this.getDevicePixelRatio()})},a.prototype.renderToSVGString=function(n){n=n||{};var s=this._zr.painter;if(process.env.NODE_ENV!=="production"&&s.type!=="svg")throw new Error("renderToSVGString can only be used in the svg renderer.");return s.renderToString({useViewBox:n.useViewBox})},a.prototype.getSvgDataURL=function(){if(env.svgSupported){var n=this._zr,s=n.storage.getDisplayList();return each$f(s,function(l){l.stopAnimation(null,!0)}),n.painter.toDataURL()}},a.prototype.getDataURL=function(n){if(this._disposed){disposedWarning(this.id);return}n=n||{};var s=n.excludeComponents,l=this._model,c=[],u=this;each$f(s,function(h){l.eachComponent({mainType:h},function(f){var p=u._componentsMap[f.__viewId];p.group.ignore||(c.push(p),p.group.ignore=!0)})});var d=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(n).toDataURL("image/"+(n&&n.type||"png"));return each$f(c,function(h){h.group.ignore=!1}),d},a.prototype.getConnectedDataURL=function(n){if(this._disposed){disposedWarning(this.id);return}var s=n.type==="svg",l=this.group,c=Math.min,u=Math.max,d=1/0;if(connectedGroups[l]){var h=d,f=d,p=-d,g=-d,v=[],b=n&&n.pixelRatio||this.getDevicePixelRatio();each$f(instances,function(C,A){if(C.group===l){var R=s?C.getZr().painter.getSvgDom().innerHTML:C.renderToCanvas(clone$4(n)),j=C.getDom().getBoundingClientRect();h=c(j.left,h),f=c(j.top,f),p=u(j.right,p),g=u(j.bottom,g),v.push({dom:R,left:j.left,top:j.top})}}),h*=b,f*=b,p*=b,g*=b;var w=p-h,x=g-f,S=platformApi.createCanvas(),E=init$2(S,{renderer:s?"svg":"canvas"});if(E.resize({width:w,height:x}),s){var T="";return each$f(v,function(C){var A=C.left-h,R=C.top-f;T+='<g transform="translate('+A+","+R+')">'+C.dom+"</g>"}),E.painter.getSvgRoot().innerHTML=T,n.connectedBackgroundColor&&E.painter.setBackgroundColor(n.connectedBackgroundColor),E.refreshImmediately(),E.painter.toDataURL()}else return n.connectedBackgroundColor&&E.add(new Rect$2({shape:{x:0,y:0,width:w,height:x},style:{fill:n.connectedBackgroundColor}})),each$f(v,function(C){var A=new ZRImage({style:{x:C.left*b-h,y:C.top*b-f,image:C.dom}});E.add(A)}),E.refreshImmediately(),S.toDataURL("image/"+(n&&n.type||"png"))}else return this.getDataURL(n)},a.prototype.convertToPixel=function(n,s){return doConvertPixel(this,"convertToPixel",n,s)},a.prototype.convertFromPixel=function(n,s){return doConvertPixel(this,"convertFromPixel",n,s)},a.prototype.containPixel=function(n,s){if(this._disposed){disposedWarning(this.id);return}var l=this._model,c,u=parseFinder$1(l,n);return each$f(u,function(d,h){h.indexOf("Models")>=0&&each$f(d,function(f){var p=f.coordinateSystem;if(p&&p.containPoint)c=c||!!p.containPoint(s);else if(h==="seriesModels"){var g=this._chartsMap[f.__viewId];g&&g.containPoint?c=c||g.containPoint(s,f):process.env.NODE_ENV!=="production"&&warn(h+": "+(g?"The found component do not support containPoint.":"No view mapping to the found component."))}else process.env.NODE_ENV!=="production"&&warn(h+": containPoint is not supported")},this)},this),!!c},a.prototype.getVisual=function(n,s){var l=this._model,c=parseFinder$1(l,n,{defaultMainType:"series"}),u=c.seriesModel;process.env.NODE_ENV!=="production"&&(u||warn("There is no specified series model"));var d=u.getData(),h=c.hasOwnProperty("dataIndexInside")?c.dataIndexInside:c.hasOwnProperty("dataIndex")?d.indexOfRawIndex(c.dataIndex):null;return h!=null?getItemVisualFromData(d,h,s):getVisualFromData(d,s)},a.prototype.getViewOfComponentModel=function(n){return this._componentsMap[n.__viewId]},a.prototype.getViewOfSeriesModel=function(n){return this._chartsMap[n.__viewId]},a.prototype._initEvents=function(){var n=this;each$f(MOUSE_EVENT_NAMES,function(s){var l=function(c){var u=n.getModel(),d=c.target,h,f=s==="globalout";if(f?h={}:d&&findEventDispatcher(d,function(w){var x=getECData(w);if(x&&x.dataIndex!=null){var S=x.dataModel||u.getSeriesByIndex(x.seriesIndex);return h=S&&S.getDataParams(x.dataIndex,x.dataType,d)||{},!0}else if(x.eventData)return h=extend({},x.eventData),!0},!0),h){var p=h.componentType,g=h.componentIndex;(p==="markLine"||p==="markPoint"||p==="markArea")&&(p="series",g=h.seriesIndex);var v=p&&g!=null&&u.getComponent(p,g),b=v&&n[v.mainType==="series"?"_chartsMap":"_componentsMap"][v.__viewId];process.env.NODE_ENV!=="production"&&!f&&!(v&&b)&&warn("model or view can not be found by params"),h.event=c,h.type=s,n._$eventProcessor.eventInfo={targetEl:d,packedEvent:h,model:v,view:b},n.trigger(s,h)}};l.zrEventfulCallAtLast=!0,n._zr.on(s,l,n)}),each$f(eventActionMap,function(s,l){n._messageCenter.on(l,function(c){this.trigger(l,c)},n)}),each$f(["selectchanged"],function(s){n._messageCenter.on(s,function(l){this.trigger(s,l)},n)}),handleLegacySelectEvents(this._messageCenter,this,this._api)},a.prototype.isDisposed=function(){return this._disposed},a.prototype.clear=function(){if(this._disposed){disposedWarning(this.id);return}this.setOption({series:[]},!0)},a.prototype.dispose=function(){if(this._disposed){disposedWarning(this.id);return}this._disposed=!0;var n=this.getDom();n&&setAttribute(this.getDom(),DOM_ATTRIBUTE_KEY,"");var s=this,l=s._api,c=s._model;each$f(s._componentsViews,function(u){u.dispose(c,l)}),each$f(s._chartsViews,function(u){u.dispose(c,l)}),s._zr.dispose(),s._dom=s._model=s._chartsMap=s._componentsMap=s._chartsViews=s._componentsViews=s._scheduler=s._api=s._zr=s._throttledZrFlush=s._theme=s._coordSysMgr=s._messageCenter=null,delete instances[s.id]},a.prototype.resize=function(n){if(this[IN_MAIN_PROCESS_KEY]){process.env.NODE_ENV!=="production"&&error("`resize` should not be called during main process.");return}if(this._disposed){disposedWarning(this.id);return}this._zr.resize(n);var s=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!s){var l=s.resetOption("media"),c=n&&n.silent;this[PENDING_UPDATE]&&(c==null&&(c=this[PENDING_UPDATE].silent),l=!0,this[PENDING_UPDATE]=null),this[IN_MAIN_PROCESS_KEY]=!0;try{l&&prepare(this),updateMethods.update.call(this,{type:"resize",animation:extend({duration:0},n&&n.animation)})}catch(u){throw this[IN_MAIN_PROCESS_KEY]=!1,u}this[IN_MAIN_PROCESS_KEY]=!1,flushPendingActions.call(this,c),triggerUpdatedEvent.call(this,c)}},a.prototype.showLoading=function(n,s){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(n)&&(s=n,n=""),n=n||"default",this.hideLoading(),!loadingEffects[n]){process.env.NODE_ENV!=="production"&&warn("Loading effects "+n+" not exists.");return}var l=loadingEffects[n](this._api,s),c=this._zr;this._loadingFX=l,c.add(l)},a.prototype.hideLoading=function(){if(this._disposed){disposedWarning(this.id);return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},a.prototype.makeActionFromEvent=function(n){var s=extend({},n);return s.type=eventActionMap[n.type],s},a.prototype.dispatchAction=function(n,s){if(this._disposed){disposedWarning(this.id);return}if(isObject$3(s)||(s={silent:!!s}),!!actions[n.type]&&this._model){if(this[IN_MAIN_PROCESS_KEY]){this._pendingActions.push(n);return}var l=s.silent;doDispatchAction.call(this,n,l);var c=s.flush;c?this._zr.flush():c!==!1&&env.browser.weChat&&this._throttledZrFlush(),flushPendingActions.call(this,l),triggerUpdatedEvent.call(this,l)}},a.prototype.updateLabelLayout=function(){lifecycle.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},a.prototype.appendData=function(n){if(this._disposed){disposedWarning(this.id);return}var s=n.seriesIndex,l=this.getModel(),c=l.getSeriesByIndex(s);process.env.NODE_ENV!=="production"&&assert(n.data&&c),c.appendData(n),this._scheduler.unfinished=!0,this.getZr().wakeUp()},a.internalField=function(){prepare=function(g){var v=g._scheduler;v.restorePipelines(g._model),v.prepareStageTasks(),prepareView(g,!0),prepareView(g,!1),v.plan()},prepareView=function(g,v){for(var b=g._model,w=g._scheduler,x=v?g._componentsViews:g._chartsViews,S=v?g._componentsMap:g._chartsMap,E=g._zr,T=g._api,C=0;C<x.length;C++)x[C].__alive=!1;v?b.eachComponent(function(j,D){j!=="series"&&A(D)}):b.eachSeries(A);function A(j){var D=j.__requireNewView;j.__requireNewView=!1;var O="_ec_"+j.id+"_"+j.type,H=!D&&S[O];if(!H){var q=parseClassType(j.type),Y=v?ComponentView.getClass(q.main,q.sub):ChartView.getClass(q.sub);process.env.NODE_ENV!=="production"&&assert(Y,q.sub+" does not exist."),H=new Y,H.init(b,T),S[O]=H,x.push(H),E.add(H.group)}j.__viewId=H.__id=O,H.__alive=!0,H.__model=j,H.group.__ecComponentInfo={mainType:j.mainType,index:j.componentIndex},!v&&w.prepareView(H,j,b,T)}for(var C=0;C<x.length;){var R=x[C];R.__alive?C++:(!v&&R.renderTask.dispose(),E.remove(R.group),R.dispose(b,T),x.splice(C,1),S[R.__id]===R&&delete S[R.__id],R.__id=R.group.__ecComponentInfo=null)}},updateDirectly=function(g,v,b,w,x){var S=g._model;if(S.setUpdatePayload(b),!w){each$f([].concat(g._componentsViews).concat(g._chartsViews),R);return}var E={};E[w+"Id"]=b[w+"Id"],E[w+"Index"]=b[w+"Index"],E[w+"Name"]=b[w+"Name"];var T={mainType:w,query:E};x&&(T.subType=x);var C=b.excludeSeriesId,A;C!=null&&(A=createHashMap(),each$f(normalizeToArray(C),function(j){var D=convertOptionIdName(j,null);D!=null&&A.set(D,!0)})),S&&S.eachComponent(T,function(j){var D=A&&A.get(j.id)!=null;if(!D)if(isHighDownPayload(b))if(j instanceof SeriesModel)b.type===HIGHLIGHT_ACTION_TYPE&&!b.notBlur&&!j.get(["emphasis","disabled"])&&blurSeriesFromHighlightPayload(j,b,g._api);else{var O=findComponentHighDownDispatchers(j.mainType,j.componentIndex,b.name,g._api),H=O.focusSelf,q=O.dispatchers;b.type===HIGHLIGHT_ACTION_TYPE&&H&&!b.notBlur&&blurComponent(j.mainType,j.componentIndex,g._api),q&&each$f(q,function(Y){b.type===HIGHLIGHT_ACTION_TYPE?enterEmphasis(Y):leaveEmphasis(Y)})}else isSelectChangePayload(b)&&j instanceof SeriesModel&&(toggleSelectionFromPayload(j,b,g._api),updateSeriesElementSelection(j),markStatusToUpdate(g))},g),S&&S.eachComponent(T,function(j){var D=A&&A.get(j.id)!=null;D||R(g[w==="series"?"_chartsMap":"_componentsMap"][j.__viewId])},g);function R(j){j&&j.__alive&&j[v]&&j[v](j.__model,S,g._api,b)}},updateMethods={prepareAndUpdate:function(g){prepare(this),updateMethods.update.call(this,g,{optionChanged:g.newOption!=null})},update:function(g,v){var b=this._model,w=this._api,x=this._zr,S=this._coordSysMgr,E=this._scheduler;if(b){b.setUpdatePayload(g),E.restoreData(b,g),E.performSeriesTasks(b),S.create(b,w),E.performDataProcessorTasks(b,g),updateStreamModes(this,b),S.update(b,w),n(b),E.performVisualTasks(b,g),render(this,b,w,g,v);var T=b.get("backgroundColor")||"transparent",C=b.get("darkMode");x.setBackgroundColor(T),C!=null&&C!=="auto"&&x.setDarkMode(C),lifecycle.trigger("afterupdate",b,w)}},updateTransform:function(g){var v=this,b=this._model,w=this._api;if(b){b.setUpdatePayload(g);var x=[];b.eachComponent(function(E,T){if(E!=="series"){var C=v.getViewOfComponentModel(T);if(C&&C.__alive)if(C.updateTransform){var A=C.updateTransform(T,b,w,g);A&&A.update&&x.push(C)}else x.push(C)}});var S=createHashMap();b.eachSeries(function(E){var T=v._chartsMap[E.__viewId];if(T.updateTransform){var C=T.updateTransform(E,b,w,g);C&&C.update&&S.set(E.uid,1)}else S.set(E.uid,1)}),n(b),this._scheduler.performVisualTasks(b,g,{setDirty:!0,dirtyMap:S}),renderSeries(this,b,w,g,{},S),lifecycle.trigger("afterupdate",b,w)}},updateView:function(g){var v=this._model;v&&(v.setUpdatePayload(g),ChartView.markUpdateMethod(g,"updateView"),n(v),this._scheduler.performVisualTasks(v,g,{setDirty:!0}),render(this,v,this._api,g,{}),lifecycle.trigger("afterupdate",v,this._api))},updateVisual:function(g){var v=this,b=this._model;b&&(b.setUpdatePayload(g),b.eachSeries(function(w){w.getData().clearAllVisual()}),ChartView.markUpdateMethod(g,"updateVisual"),n(b),this._scheduler.performVisualTasks(b,g,{visualType:"visual",setDirty:!0}),b.eachComponent(function(w,x){if(w!=="series"){var S=v.getViewOfComponentModel(x);S&&S.__alive&&S.updateVisual(x,b,v._api,g)}}),b.eachSeries(function(w){var x=v._chartsMap[w.__viewId];x.updateVisual(w,b,v._api,g)}),lifecycle.trigger("afterupdate",b,this._api))},updateLayout:function(g){updateMethods.update.call(this,g)}},doConvertPixel=function(g,v,b,w){if(g._disposed){disposedWarning(g.id);return}for(var x=g._model,S=g._coordSysMgr.getCoordinateSystems(),E,T=parseFinder$1(x,b),C=0;C<S.length;C++){var A=S[C];if(A[v]&&(E=A[v](x,T,w))!=null)return E}process.env.NODE_ENV!=="production"&&warn("No coordinate system that supports "+v+" found by the given finder.")},updateStreamModes=function(g,v){var b=g._chartsMap,w=g._scheduler;v.eachSeries(function(x){w.updateStreamModes(x,b[x.__viewId])})},doDispatchAction=function(g,v){var b=this,w=this.getModel(),x=g.type,S=g.escapeConnect,E=actions[x],T=E.actionInfo,C=(T.update||"update").split(":"),A=C.pop(),R=C[0]!=null&&parseClassType(C[0]);this[IN_MAIN_PROCESS_KEY]=!0;var j=[g],D=!1;g.batch&&(D=!0,j=map$1(g.batch,function(re){return re=defaults(extend({},re),g),re.batch=null,re}));var O=[],H,q=isSelectChangePayload(g),Y=isHighDownPayload(g);if(Y&&allLeaveBlur(this._api),each$f(j,function(re){if(H=E.action(re,b._model,b._api),H=H||extend({},re),H.type=T.event||H.type,O.push(H),Y){var ne=preParseFinder(g),ce=ne.queryOptionMap,ve=ne.mainTypeSpecified,be=ve?ce.keys()[0]:"series";updateDirectly(b,A,re,be),markStatusToUpdate(b)}else q?(updateDirectly(b,A,re,"series"),markStatusToUpdate(b)):R&&updateDirectly(b,A,re,R.main,R.sub)}),A!=="none"&&!Y&&!q&&!R)try{this[PENDING_UPDATE]?(prepare(this),updateMethods.update.call(this,g),this[PENDING_UPDATE]=null):updateMethods[A].call(this,g)}catch(re){throw this[IN_MAIN_PROCESS_KEY]=!1,re}if(D?H={type:T.event||x,escapeConnect:S,batch:O}:H=O[0],this[IN_MAIN_PROCESS_KEY]=!1,!v){var te=this._messageCenter;if(te.trigger(H.type,H),q){var ee={type:"selectchanged",escapeConnect:S,selected:getAllSelectedIndices(w),isFromClick:g.isFromClick||!1,fromAction:g.type,fromActionPayload:g};te.trigger(ee.type,ee)}}},flushPendingActions=function(g){for(var v=this._pendingActions;v.length;){var b=v.shift();doDispatchAction.call(this,b,g)}},triggerUpdatedEvent=function(g){!g&&this.trigger("updated")},bindRenderedEvent=function(g,v){g.on("rendered",function(b){v.trigger("rendered",b),g.animation.isFinished()&&!v[PENDING_UPDATE]&&!v._scheduler.unfinished&&!v._pendingActions.length&&v.trigger("finished")})},bindMouseEvent=function(g,v){g.on("mouseover",function(b){var w=b.target,x=findEventDispatcher(w,isHighDownDispatcher);x&&(handleGlobalMouseOverForHighDown(x,b,v._api),markStatusToUpdate(v))}).on("mouseout",function(b){var w=b.target,x=findEventDispatcher(w,isHighDownDispatcher);x&&(handleGlobalMouseOutForHighDown(x,b,v._api),markStatusToUpdate(v))}).on("click",function(b){var w=b.target,x=findEventDispatcher(w,function(T){return getECData(T).dataIndex!=null},!0);if(x){var S=x.selected?"unselect":"select",E=getECData(x);v._api.dispatchAction({type:S,dataType:E.dataType,dataIndexInside:E.dataIndex,seriesIndex:E.seriesIndex,isFromClick:!0})}})};function n(g){g.clearColorPalette(),g.eachSeries(function(v){v.clearColorPalette()})}function s(g){var v=[],b=[],w=!1;if(g.eachComponent(function(T,C){var A=C.get("zlevel")||0,R=C.get("z")||0,j=C.getZLevelKey();w=w||!!j,(T==="series"?b:v).push({zlevel:A,z:R,idx:C.componentIndex,type:T,key:j})}),w){var x=v.concat(b),S,E;sort$2(x,function(T,C){return T.zlevel===C.zlevel?T.z-C.z:T.zlevel-C.zlevel}),each$f(x,function(T){var C=g.getComponent(T.type,T.idx),A=T.zlevel,R=T.key;S!=null&&(A=Math.max(S,A)),R?(A===S&&R!==E&&A++,E=R):E&&(A===S&&A++,E=""),S=A,C.setZLevel(A)})}}render=function(g,v,b,w,x){s(v),renderComponents(g,v,b,w,x),each$f(g._chartsViews,function(S){S.__alive=!1}),renderSeries(g,v,b,w,x),each$f(g._chartsViews,function(S){S.__alive||S.remove(v,b)})},renderComponents=function(g,v,b,w,x,S){each$f(S||g._componentsViews,function(E){var T=E.__model;f(T,E),E.render(T,v,b,w),d(T,E),p(T,E)})},renderSeries=function(g,v,b,w,x,S){var E=g._scheduler;x=extend(x||{},{updatedSeries:v.getSeries()}),lifecycle.trigger("series:beforeupdate",v,b,x);var T=!1;v.eachSeries(function(C){var A=g._chartsMap[C.__viewId];A.__alive=!0;var R=A.renderTask;E.updatePayload(R,w),f(C,A),S&&S.get(C.uid)&&R.dirty(),R.perform(E.getPerformArgs(R))&&(T=!0),A.group.silent=!!C.get("silent"),u(C,A),updateSeriesElementSelection(C)}),E.unfinished=T||E.unfinished,lifecycle.trigger("series:layoutlabels",v,b,x),lifecycle.trigger("series:transition",v,b,x),v.eachSeries(function(C){var A=g._chartsMap[C.__viewId];d(C,A),p(C,A)}),c(g,v),lifecycle.trigger("series:afterupdate",v,b,x)},markStatusToUpdate=function(g){g[STATUS_NEEDS_UPDATE_KEY]=!0,g.getZr().wakeUp()},applyChangedStates=function(g){g[STATUS_NEEDS_UPDATE_KEY]&&(g.getZr().storage.traverse(function(v){isElementRemoved(v)||l(v)}),g[STATUS_NEEDS_UPDATE_KEY]=!1)};function l(g){for(var v=[],b=g.currentStates,w=0;w<b.length;w++){var x=b[w];x==="emphasis"||x==="blur"||x==="select"||v.push(x)}g.selected&&g.states.select&&v.push("select"),g.hoverState===HOVER_STATE_EMPHASIS&&g.states.emphasis?v.push("emphasis"):g.hoverState===HOVER_STATE_BLUR&&g.states.blur&&v.push("blur"),g.useStates(v)}function c(g,v){var b=g._zr,w=b.storage,x=0;w.traverse(function(S){S.isGroup||x++}),x>v.get("hoverLayerThreshold")&&!env.node&&!env.worker&&v.eachSeries(function(S){if(!S.preventUsingHoverLayer){var E=g._chartsMap[S.__viewId];E.__alive&&E.eachRendered(function(T){T.states.emphasis&&(T.states.emphasis.hoverLayer=!0)})}})}function u(g,v){var b=g.get("blendMode")||null;v.eachRendered(function(w){w.isGroup||(w.style.blend=b)})}function d(g,v){if(!g.preventAutoZ){var b=g.get("z")||0,w=g.get("zlevel")||0;v.eachRendered(function(x){return h(x,b,w,-1/0),!0})}}function h(g,v,b,w){var x=g.getTextContent(),S=g.getTextGuideLine(),E=g.isGroup;if(E)for(var T=g.childrenRef(),C=0;C<T.length;C++)w=Math.max(h(T[C],v,b,w),w);else g.z=v,g.zlevel=b,w=Math.max(g.z2,w);if(x&&(x.z=v,x.zlevel=b,isFinite(w)&&(x.z2=w+2)),S){var A=g.textGuideLineConfig;S.z=v,S.zlevel=b,isFinite(w)&&(S.z2=w+(A&&A.showAbove?1:-1))}return w}function f(g,v){v.eachRendered(function(b){if(!isElementRemoved(b)){var w=b.getTextContent(),x=b.getTextGuideLine();b.stateTransition&&(b.stateTransition=null),w&&w.stateTransition&&(w.stateTransition=null),x&&x.stateTransition&&(x.stateTransition=null),b.hasState()?(b.prevStates=b.currentStates,b.clearStates()):b.prevStates&&(b.prevStates=null)}})}function p(g,v){var b=g.getModel("stateAnimation"),w=g.isAnimationEnabled(),x=b.get("duration"),S=x>0?{duration:x,delay:b.get("delay"),easing:b.get("easing")}:null;v.eachRendered(function(E){if(E.states&&E.states.emphasis){if(isElementRemoved(E))return;if(E instanceof Path&&savePathStates(E),E.__dirty){var T=E.prevStates;T&&E.useStates(T)}if(w){E.stateTransition=S;var C=E.getTextContent(),A=E.getTextGuideLine();C&&(C.stateTransition=S),A&&(A.stateTransition=S)}E.__dirty&&l(E)}})}createExtensionAPI=function(g){return new(function(v){__extends$1(b,v);function b(){return v!==null&&v.apply(this,arguments)||this}return b.prototype.getCoordinateSystems=function(){return g._coordSysMgr.getCoordinateSystems()},b.prototype.getComponentByElement=function(w){for(;w;){var x=w.__ecComponentInfo;if(x!=null)return g._model.getComponent(x.mainType,x.index);w=w.parent}},b.prototype.enterEmphasis=function(w,x){enterEmphasis(w,x),markStatusToUpdate(g)},b.prototype.leaveEmphasis=function(w,x){leaveEmphasis(w,x),markStatusToUpdate(g)},b.prototype.enterBlur=function(w){enterBlur(w),markStatusToUpdate(g)},b.prototype.leaveBlur=function(w){leaveBlur(w),markStatusToUpdate(g)},b.prototype.enterSelect=function(w){enterSelect(w),markStatusToUpdate(g)},b.prototype.leaveSelect=function(w){leaveSelect(w),markStatusToUpdate(g)},b.prototype.getModel=function(){return g.getModel()},b.prototype.getViewOfComponentModel=function(w){return g.getViewOfComponentModel(w)},b.prototype.getViewOfSeriesModel=function(w){return g.getViewOfSeriesModel(w)},b}(ExtensionAPI))(g)},enableConnect=function(g){function v(b,w){for(var x=0;x<b.length;x++){var S=b[x];S[CONNECT_STATUS_KEY]=w}}each$f(eventActionMap,function(b,w){g._messageCenter.on(w,function(x){if(connectedGroups[g.group]&&g[CONNECT_STATUS_KEY]!==CONNECT_STATUS_PENDING){if(x&&x.escapeConnect)return;var S=g.makeActionFromEvent(x),E=[];each$f(instances,function(T){T!==g&&T.group===g.group&&E.push(T)}),v(E,CONNECT_STATUS_PENDING),each$f(E,function(T){T[CONNECT_STATUS_KEY]!==CONNECT_STATUS_UPDATING&&T.dispatchAction(S)}),v(E,CONNECT_STATUS_UPDATED)}})})}}(),a}(Eventful),echartsProto=ECharts.prototype;echartsProto.on=createRegisterEventWithLowercaseECharts("on");echartsProto.off=createRegisterEventWithLowercaseECharts("off");echartsProto.one=function(o,a,n){var s=this;deprecateLog("ECharts#one is deprecated.");function l(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];a&&a.apply&&a.apply(this,c),s.off(o,l)}this.on.call(this,o,l,n)};var MOUSE_EVENT_NAMES=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function disposedWarning(o){process.env.NODE_ENV!=="production"&&warn("Instance "+o+" has been disposed")}var actions={},eventActionMap={},dataProcessorFuncs=[],optionPreprocessorFuncs=[],visualFuncs=[],themeStorage={},loadingEffects={},instances={},connectedGroups={},idBase=+new Date-0,groupIdBase=+new Date-0,DOM_ATTRIBUTE_KEY="_echarts_instance_";function init$1(o,a,n){var s=!(n&&n.ssr);if(s){if(process.env.NODE_ENV!=="production"&&!o)throw new Error("Initialize failed: invalid dom.");var l=getInstanceByDom(o);if(l)return process.env.NODE_ENV!=="production"&&warn("There is a chart instance already initialized on the dom."),l;process.env.NODE_ENV!=="production"&&isDom(o)&&o.nodeName.toUpperCase()!=="CANVAS"&&(!o.clientWidth&&(!n||n.width==null)||!o.clientHeight&&(!n||n.height==null))&&warn("Can't get DOM width or height. Please check dom.clientWidth and dom.clientHeight. They should not be 0.For example, you may need to call this in the callback of window.onload.")}var c=new ECharts(o,a,n);return c.id="ec_"+idBase++,instances[c.id]=c,s&&setAttribute(o,DOM_ATTRIBUTE_KEY,c.id),enableConnect(c),lifecycle.trigger("afterinit",c),c}function connect(o){if(isArray$1(o)){var a=o;o=null,each$f(a,function(n){n.group!=null&&(o=n.group)}),o=o||"g_"+groupIdBase++,each$f(a,function(n){n.group=o})}return connectedGroups[o]=!0,o}function disconnect(o){connectedGroups[o]=!1}var disConnect=disconnect;function dispose(o){isString$2(o)?o=instances[o]:o instanceof ECharts||(o=getInstanceByDom(o)),o instanceof ECharts&&!o.isDisposed()&&o.dispose()}function getInstanceByDom(o){return instances[getAttribute(o,DOM_ATTRIBUTE_KEY)]}function getInstanceById(o){return instances[o]}function registerTheme(o,a){themeStorage[o]=a}function registerPreprocessor(o){indexOf(optionPreprocessorFuncs,o)<0&&optionPreprocessorFuncs.push(o)}function registerProcessor(o,a){normalizeRegister(dataProcessorFuncs,o,a,PRIORITY_PROCESSOR_DEFAULT)}function registerPostInit(o){registerUpdateLifecycle("afterinit",o)}function registerPostUpdate(o){registerUpdateLifecycle("afterupdate",o)}function registerUpdateLifecycle(o,a){lifecycle.on(o,a)}function registerAction(o,a,n){isFunction$1(a)&&(n=a,a="");var s=isObject$3(o)?o.type:[o,o={event:a}][0];o.event=(o.event||s).toLowerCase(),a=o.event,!eventActionMap[a]&&(assert(ACTION_REG.test(s)&&ACTION_REG.test(a)),actions[s]||(actions[s]={action:n,actionInfo:o}),eventActionMap[a]=s)}function registerCoordinateSystem(o,a){CoordinateSystemManager.register(o,a)}function getCoordinateSystemDimensions(o){var a=CoordinateSystemManager.get(o);if(a)return a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice()}function registerLayout(o,a){normalizeRegister(visualFuncs,o,a,PRIORITY_VISUAL_LAYOUT,"layout")}function registerVisual(o,a){normalizeRegister(visualFuncs,o,a,PRIORITY_VISUAL_CHART,"visual")}var registeredTasks=[];function normalizeRegister(o,a,n,s,l){if((isFunction$1(a)||isObject$3(a))&&(n=a,a=s),process.env.NODE_ENV!=="production"){if(isNaN(a)||a==null)throw new Error("Illegal priority");each$f(o,function(u){assert(u.__raw!==n)})}if(!(indexOf(registeredTasks,n)>=0)){registeredTasks.push(n);var c=Scheduler.wrapStageHandler(n,l);c.__prio=a,c.__raw=n,o.push(c)}}function registerLoading(o,a){loadingEffects[o]=a}function setCanvasCreator(o){process.env.NODE_ENV!=="production"&&deprecateLog("setCanvasCreator is deprecated. Use setPlatformAPI({ createCanvas }) instead."),setPlatformAPI({createCanvas:o})}function registerMap$1(o,a,n){var s=getImpl("registerMap");s&&s(o,a,n)}function getMap(o){var a=getImpl("getMap");return a&&a(o)}var registerTransform=registerExternalTransform;registerVisual(PRIORITY_VISUAL_GLOBAL,seriesStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataStyleTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataColorPaletteTask);registerVisual(PRIORITY_VISUAL_GLOBAL,seriesSymbolTask);registerVisual(PRIORITY_VISUAL_CHART_DATA_CUSTOM,dataSymbolTask);registerVisual(PRIORITY_VISUAL_DECAL,decalVisual);registerPreprocessor(globalBackwardCompat);registerProcessor(PRIORITY_PROCESSOR_DATASTACK,dataStack$1);registerLoading("default",defaultLoading);registerAction({type:HIGHLIGHT_ACTION_TYPE,event:HIGHLIGHT_ACTION_TYPE,update:HIGHLIGHT_ACTION_TYPE},noop$1);registerAction({type:DOWNPLAY_ACTION_TYPE,event:DOWNPLAY_ACTION_TYPE,update:DOWNPLAY_ACTION_TYPE},noop$1);registerAction({type:SELECT_ACTION_TYPE,event:SELECT_ACTION_TYPE,update:SELECT_ACTION_TYPE},noop$1);registerAction({type:UNSELECT_ACTION_TYPE,event:UNSELECT_ACTION_TYPE,update:UNSELECT_ACTION_TYPE},noop$1);registerAction({type:TOGGLE_SELECT_ACTION_TYPE,event:TOGGLE_SELECT_ACTION_TYPE,update:TOGGLE_SELECT_ACTION_TYPE},noop$1);registerTheme("light",lightTheme);registerTheme("dark",theme);var dataTool={},extensions=[],extensionRegisters={registerPreprocessor,registerProcessor,registerPostInit,registerPostUpdate,registerUpdateLifecycle,registerAction,registerCoordinateSystem,registerLayout,registerVisual,registerTransform,registerLoading,registerMap:registerMap$1,registerImpl,PRIORITY,ComponentModel,ComponentView,SeriesModel,ChartView,registerComponentModel:function(o){ComponentModel.registerClass(o)},registerComponentView:function(o){ComponentView.registerClass(o)},registerSeriesModel:function(o){SeriesModel.registerClass(o)},registerChartView:function(o){ChartView.registerClass(o)},registerSubTypeDefaulter:function(o,a){ComponentModel.registerSubTypeDefaulter(o,a)},registerPainter:function(o,a){registerPainter(o,a)}};function use(o){if(isArray$1(o)){each$f(o,function(a){use(a)});return}indexOf(extensions,o)>=0||(extensions.push(o),isFunction$1(o)&&(o={install:o}),o.install(extensionRegisters))}function dataIndexMapValueLength(o){return o==null?0:o.length||1}function defaultKeyGetter(o){return o}var DataDiffer=function(){function o(a,n,s,l,c,u){this._old=a,this._new=n,this._oldKeyGetter=s||defaultKeyGetter,this._newKeyGetter=l||defaultKeyGetter,this.context=c,this._diffModeMultiple=u==="multiple"}return o.prototype.add=function(a){return this._add=a,this},o.prototype.update=function(a){return this._update=a,this},o.prototype.updateManyToOne=function(a){return this._updateManyToOne=a,this},o.prototype.updateOneToMany=function(a){return this._updateOneToMany=a,this},o.prototype.updateManyToMany=function(a){return this._updateManyToMany=a,this},o.prototype.remove=function(a){return this._remove=a,this},o.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},o.prototype._executeOneToOne=function(){var a=this._old,n=this._new,s={},l=new Array(a.length),c=new Array(n.length);this._initIndexMap(a,null,l,"_oldKeyGetter"),this._initIndexMap(n,s,c,"_newKeyGetter");for(var u=0;u<a.length;u++){var d=l[u],h=s[d],f=dataIndexMapValueLength(h);if(f>1){var p=h.shift();h.length===1&&(s[d]=h[0]),this._update&&this._update(p,u)}else f===1?(s[d]=null,this._update&&this._update(h,u)):this._remove&&this._remove(u)}this._performRestAdd(c,s)},o.prototype._executeMultiple=function(){var a=this._old,n=this._new,s={},l={},c=[],u=[];this._initIndexMap(a,s,c,"_oldKeyGetter"),this._initIndexMap(n,l,u,"_newKeyGetter");for(var d=0;d<c.length;d++){var h=c[d],f=s[h],p=l[h],g=dataIndexMapValueLength(f),v=dataIndexMapValueLength(p);if(g>1&&v===1)this._updateManyToOne&&this._updateManyToOne(p,f),l[h]=null;else if(g===1&&v>1)this._updateOneToMany&&this._updateOneToMany(p,f),l[h]=null;else if(g===1&&v===1)this._update&&this._update(p,f),l[h]=null;else if(g>1&&v>1)this._updateManyToMany&&this._updateManyToMany(p,f),l[h]=null;else if(g>1)for(var b=0;b<g;b++)this._remove&&this._remove(f[b]);else this._remove&&this._remove(f)}this._performRestAdd(u,l)},o.prototype._performRestAdd=function(a,n){for(var s=0;s<a.length;s++){var l=a[s],c=n[l],u=dataIndexMapValueLength(c);if(u>1)for(var d=0;d<u;d++)this._add&&this._add(c[d]);else u===1&&this._add&&this._add(c);n[l]=null}},o.prototype._initIndexMap=function(a,n,s,l){for(var c=this._diffModeMultiple,u=0;u<a.length;u++){var d="_ec_"+this[l](a[u],u);if(c||(s[u]=d),!!n){var h=n[d],f=dataIndexMapValueLength(h);f===0?(n[d]=u,c&&s.push(d)):f===1?n[d]=[h,u]:h.push(u)}}},o}(),DimensionUserOuput=function(){function o(a,n){this._encode=a,this._schema=n}return o.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},o.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},o}();function summarizeDimensions(o,a){var n={},s=n.encode={},l=createHashMap(),c=[],u=[],d={};each$f(o.dimensions,function(v){var b=o.getDimensionInfo(v),w=b.coordDim;if(w){process.env.NODE_ENV!=="production"&&assert(VISUAL_DIMENSIONS.get(w)==null);var x=b.coordDimIndex;getOrCreateEncodeArr(s,w)[x]=v,b.isExtraCoord||(l.set(w,1),mayLabelDimType(b.type)&&(c[0]=v),getOrCreateEncodeArr(d,w)[x]=o.getDimensionIndex(b.name)),b.defaultTooltip&&u.push(v)}VISUAL_DIMENSIONS.each(function(S,E){var T=getOrCreateEncodeArr(s,E),C=b.otherDims[E];C!=null&&C!==!1&&(T[C]=b.name)})});var h=[],f={};l.each(function(v,b){var w=s[b];f[b]=w[0],h=h.concat(w)}),n.dataDimsOnCoord=h,n.dataDimIndicesOnCoord=map$1(h,function(v){return o.getDimensionInfo(v).storeDimIndex}),n.encodeFirstDimNotExtra=f;var p=s.label;p&&p.length&&(c=p.slice());var g=s.tooltip;return g&&g.length?u=g.slice():u.length||(u=c.slice()),s.defaultedLabel=c,s.defaultedTooltip=u,n.userOutput=new DimensionUserOuput(d,a),n}function getOrCreateEncodeArr(o,a){return o.hasOwnProperty(a)||(o[a]=[]),o[a]}function getDimensionTypeByAxis(o){return o==="category"?"ordinal":o==="time"?"time":"float"}function mayLabelDimType(o){return!(o==="ordinal"||o==="time")}var SeriesDimensionDefine=function(){function o(a){this.otherDims={},a!=null&&extend(this,a)}return o}(),inner$h=makeInner(),dimTypeShort={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},SeriesDataSchema=function(){function o(a){this.dimensions=a.dimensions,this._dimOmitted=a.dimensionOmitted,this.source=a.source,this._fullDimCount=a.fullDimensionCount,this._updateDimOmitted(a.dimensionOmitted)}return o.prototype.isDimensionOmitted=function(){return this._dimOmitted},o.prototype._updateDimOmitted=function(a){this._dimOmitted=a,a&&(this._dimNameMap||(this._dimNameMap=ensureSourceDimNameMap(this.source)))},o.prototype.getSourceDimensionIndex=function(a){return retrieve2(this._dimNameMap.get(a),-1)},o.prototype.getSourceDimension=function(a){var n=this.source.dimensionsDefine;if(n)return n[a]},o.prototype.makeStoreSchema=function(){for(var a=this._fullDimCount,n=shouldRetrieveDataByName(this.source),s=!shouldOmitUnusedDimensions(a),l="",c=[],u=0,d=0;u<a;u++){var h=void 0,f=void 0,p=void 0,g=this.dimensions[d];if(g&&g.storeDimIndex===u)h=n?g.name:null,f=g.type,p=g.ordinalMeta,d++;else{var v=this.getSourceDimension(u);v&&(h=n?v.name:null,f=v.type)}c.push({property:h,type:f,ordinalMeta:p}),n&&h!=null&&(!g||!g.isCalculationCoord)&&(l+=s?h.replace(/\`/g,"`1").replace(/\$/g,"`2"):h),l+="$",l+=dimTypeShort[f]||"f",p&&(l+=p.uid),l+="$"}var b=this.source,w=[b.seriesLayoutBy,b.startIndex,l].join("$$");return{dimensions:c,hash:w}},o.prototype.makeOutputDimensionNames=function(){for(var a=[],n=0,s=0;n<this._fullDimCount;n++){var l=void 0,c=this.dimensions[s];if(c&&c.storeDimIndex===n)c.isCalculationCoord||(l=c.name),s++;else{var u=this.getSourceDimension(n);u&&(l=u.name)}a.push(l)}return a},o.prototype.appendCalculationDimension=function(a){this.dimensions.push(a),a.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},o}();function isSeriesDataSchema(o){return o instanceof SeriesDataSchema}function createDimNameMap(o){for(var a=createHashMap(),n=0;n<(o||[]).length;n++){var s=o[n],l=isObject$3(s)?s.name:s;l!=null&&a.get(l)==null&&a.set(l,n)}return a}function ensureSourceDimNameMap(o){var a=inner$h(o);return a.dimNameMap||(a.dimNameMap=createDimNameMap(o.dimensionsDefine))}function shouldOmitUnusedDimensions(o){return o>30}var isObject$1=isObject$3,map=map$1,CtorInt32Array=typeof Int32Array>"u"?Array:Int32Array,ID_PREFIX="e\0\0",INDEX_NOT_FOUND=-1,TRANSFERABLE_PROPERTIES=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],CLONE_PROPERTIES=["_approximateExtent"],prepareInvertedIndex,getId,getIdNameFromStore,normalizeDimensions,transferProperties,cloneListForMapAndSample,makeIdFromName,SeriesData=function(){function o(a,n){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","minmaxDownSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","minmaxDownSample","lttbDownSample"];var s,l=!1;isSeriesDataSchema(a)?(s=a.dimensions,this._dimOmitted=a.isDimensionOmitted(),this._schema=a):(l=!0,s=a),s=s||["x","y"];for(var c={},u=[],d={},h=!1,f={},p=0;p<s.length;p++){var g=s[p],v=isString$2(g)?new SeriesDimensionDefine({name:g}):g instanceof SeriesDimensionDefine?g:new SeriesDimensionDefine(g),b=v.name;v.type=v.type||"float",v.coordDim||(v.coordDim=b,v.coordDimIndex=0);var w=v.otherDims=v.otherDims||{};u.push(b),c[b]=v,f[b]!=null&&(h=!0),v.createInvertedIndices&&(d[b]=[]),w.itemName===0&&(this._nameDimIdx=p),w.itemId===0&&(this._idDimIdx=p),process.env.NODE_ENV!=="production"&&assert(l||v.storeDimIndex>=0),l&&(v.storeDimIndex=p)}if(this.dimensions=u,this._dimInfos=c,this._initGetDimensionInfo(h),this.hostModel=n,this._invertedIndicesMap=d,this._dimOmitted){var x=this._dimIdxToName=createHashMap();each$f(u,function(S){x.set(c[S].storeDimIndex,S)})}}return o.prototype.getDimension=function(a){var n=this._recognizeDimIndex(a);if(n==null)return a;if(n=a,!this._dimOmitted)return this.dimensions[n];var s=this._dimIdxToName.get(n);if(s!=null)return s;var l=this._schema.getSourceDimension(n);if(l)return l.name},o.prototype.getDimensionIndex=function(a){var n=this._recognizeDimIndex(a);if(n!=null)return n;if(a==null)return-1;var s=this._getDimInfo(a);return s?s.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(a):-1},o.prototype._recognizeDimIndex=function(a){if(isNumber(a)||a!=null&&!isNaN(a)&&!this._getDimInfo(a)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(a)<0))return+a},o.prototype._getStoreDimIndex=function(a){var n=this.getDimensionIndex(a);if(process.env.NODE_ENV!=="production"&&n==null)throw new Error("Unknown dimension "+a);return n},o.prototype.getDimensionInfo=function(a){return this._getDimInfo(this.getDimension(a))},o.prototype._initGetDimensionInfo=function(a){var n=this._dimInfos;this._getDimInfo=a?function(s){return n.hasOwnProperty(s)?n[s]:void 0}:function(s){return n[s]}},o.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},o.prototype.mapDimension=function(a,n){var s=this._dimSummary;if(n==null)return s.encodeFirstDimNotExtra[a];var l=s.encode[a];return l?l[n]:null},o.prototype.mapDimensionsAll=function(a){var n=this._dimSummary,s=n.encode[a];return(s||[]).slice()},o.prototype.getStore=function(){return this._store},o.prototype.initData=function(a,n,s){var l=this,c;if(a instanceof DataStore&&(c=a),!c){var u=this.dimensions,d=isSourceInstance(a)||isArrayLike(a)?new DefaultDataProvider(a,u.length):a;c=new DataStore;var h=map(u,function(f){return{type:l._dimInfos[f].type,property:f}});c.initData(d,h,s)}this._store=c,this._nameList=(n||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,c.count()),this._dimSummary=summarizeDimensions(this,this._schema),this.userOutput=this._dimSummary.userOutput},o.prototype.appendData=function(a){var n=this._store.appendData(a);this._doInit(n[0],n[1])},o.prototype.appendValues=function(a,n){var s=this._store.appendValues(a,n&&n.length),l=s.start,c=s.end,u=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),n)for(var d=l;d<c;d++){var h=d-l;this._nameList[d]=n[h],u&&makeIdFromName(this,d)}},o.prototype._updateOrdinalMeta=function(){for(var a=this._store,n=this.dimensions,s=0;s<n.length;s++){var l=this._dimInfos[n[s]];l.ordinalMeta&&a.collectOrdinalMeta(l.storeDimIndex,l.ordinalMeta)}},o.prototype._shouldMakeIdFromName=function(){var a=this._store.getProvider();return this._idDimIdx==null&&a.getSource().sourceFormat!==SOURCE_FORMAT_TYPED_ARRAY&&!a.fillStorage},o.prototype._doInit=function(a,n){if(!(a>=n)){var s=this._store,l=s.getProvider();this._updateOrdinalMeta();var c=this._nameList,u=this._idList,d=l.getSource().sourceFormat,h=d===SOURCE_FORMAT_ORIGINAL;if(h&&!l.pure)for(var f=[],p=a;p<n;p++){var g=l.getItem(p,f);if(!this.hasItemOption&&isDataItemOption(g)&&(this.hasItemOption=!0),g){var v=g.name;c[p]==null&&v!=null&&(c[p]=convertOptionIdName(v,null));var b=g.id;u[p]==null&&b!=null&&(u[p]=convertOptionIdName(b,null))}}if(this._shouldMakeIdFromName())for(var p=a;p<n;p++)makeIdFromName(this,p);prepareInvertedIndex(this)}},o.prototype.getApproximateExtent=function(a){return this._approximateExtent[a]||this._store.getDataExtent(this._getStoreDimIndex(a))},o.prototype.setApproximateExtent=function(a,n){n=this.getDimension(n),this._approximateExtent[n]=a.slice()},o.prototype.getCalculationInfo=function(a){return this._calculationInfo[a]},o.prototype.setCalculationInfo=function(a,n){isObject$1(a)?extend(this._calculationInfo,a):this._calculationInfo[a]=n},o.prototype.getName=function(a){var n=this.getRawIndex(a),s=this._nameList[n];return s==null&&this._nameDimIdx!=null&&(s=getIdNameFromStore(this,this._nameDimIdx,n)),s==null&&(s=""),s},o.prototype._getCategory=function(a,n){var s=this._store.get(a,n),l=this._store.getOrdinalMeta(a);return l?l.categories[s]:s},o.prototype.getId=function(a){return getId(this,this.getRawIndex(a))},o.prototype.count=function(){return this._store.count()},o.prototype.get=function(a,n){var s=this._store,l=this._dimInfos[a];if(l)return s.get(l.storeDimIndex,n)},o.prototype.getByRawIndex=function(a,n){var s=this._store,l=this._dimInfos[a];if(l)return s.getByRawIndex(l.storeDimIndex,n)},o.prototype.getIndices=function(){return this._store.getIndices()},o.prototype.getDataExtent=function(a){return this._store.getDataExtent(this._getStoreDimIndex(a))},o.prototype.getSum=function(a){return this._store.getSum(this._getStoreDimIndex(a))},o.prototype.getMedian=function(a){return this._store.getMedian(this._getStoreDimIndex(a))},o.prototype.getValues=function(a,n){var s=this,l=this._store;return isArray$1(a)?l.getValues(map(a,function(c){return s._getStoreDimIndex(c)}),n):l.getValues(a)},o.prototype.hasValue=function(a){for(var n=this._dimSummary.dataDimIndicesOnCoord,s=0,l=n.length;s<l;s++)if(isNaN(this._store.get(n[s],a)))return!1;return!0},o.prototype.indexOfName=function(a){for(var n=0,s=this._store.count();n<s;n++)if(this.getName(n)===a)return n;return-1},o.prototype.getRawIndex=function(a){return this._store.getRawIndex(a)},o.prototype.indexOfRawIndex=function(a){return this._store.indexOfRawIndex(a)},o.prototype.rawIndexOf=function(a,n){var s=a&&this._invertedIndicesMap[a];if(process.env.NODE_ENV!=="production"&&!s)throw new Error("Do not supported yet");var l=s&&s[n];return l==null||isNaN(l)?INDEX_NOT_FOUND:l},o.prototype.indicesOfNearest=function(a,n,s){return this._store.indicesOfNearest(this._getStoreDimIndex(a),n,s)},o.prototype.each=function(a,n,s){isFunction$1(a)&&(s=n,n=a,a=[]);var l=s||this,c=map(normalizeDimensions(a),this._getStoreDimIndex,this);this._store.each(c,l?bind$1(n,l):n)},o.prototype.filterSelf=function(a,n,s){isFunction$1(a)&&(s=n,n=a,a=[]);var l=s||this,c=map(normalizeDimensions(a),this._getStoreDimIndex,this);return this._store=this._store.filter(c,l?bind$1(n,l):n),this},o.prototype.selectRange=function(a){var n=this,s={},l=keys$1(a);return each$f(l,function(c){var u=n._getStoreDimIndex(c);s[u]=a[c]}),this._store=this._store.selectRange(s),this},o.prototype.mapArray=function(a,n,s){isFunction$1(a)&&(s=n,n=a,a=[]),s=s||this;var l=[];return this.each(a,function(){l.push(n&&n.apply(this,arguments))},s),l},o.prototype.map=function(a,n,s,l){var c=s||l||this,u=map(normalizeDimensions(a),this._getStoreDimIndex,this),d=cloneListForMapAndSample(this);return d._store=this._store.map(u,c?bind$1(n,c):n),d},o.prototype.modify=function(a,n,s,l){var c=this,u=s||l||this;process.env.NODE_ENV!=="production"&&each$f(normalizeDimensions(a),function(h){var f=c.getDimensionInfo(h);f.isCalculationCoord||console.error("Danger: only stack dimension can be modified")});var d=map(normalizeDimensions(a),this._getStoreDimIndex,this);this._store.modify(d,u?bind$1(n,u):n)},o.prototype.downSample=function(a,n,s,l){var c=cloneListForMapAndSample(this);return c._store=this._store.downSample(this._getStoreDimIndex(a),n,s,l),c},o.prototype.minmaxDownSample=function(a,n){var s=cloneListForMapAndSample(this);return s._store=this._store.minmaxDownSample(this._getStoreDimIndex(a),n),s},o.prototype.lttbDownSample=function(a,n){var s=cloneListForMapAndSample(this);return s._store=this._store.lttbDownSample(this._getStoreDimIndex(a),n),s},o.prototype.getRawDataItem=function(a){return this._store.getRawDataItem(a)},o.prototype.getItemModel=function(a){var n=this.hostModel,s=this.getRawDataItem(a);return new Model(s,n,n&&n.ecModel)},o.prototype.diff=function(a){var n=this;return new DataDiffer(a?a.getStore().getIndices():[],this.getStore().getIndices(),function(s){return getId(a,s)},function(s){return getId(n,s)})},o.prototype.getVisual=function(a){var n=this._visual;return n&&n[a]},o.prototype.setVisual=function(a,n){this._visual=this._visual||{},isObject$1(a)?extend(this._visual,a):this._visual[a]=n},o.prototype.getItemVisual=function(a,n){var s=this._itemVisuals[a],l=s&&s[n];return l??this.getVisual(n)},o.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},o.prototype.ensureUniqueItemVisual=function(a,n){var s=this._itemVisuals,l=s[a];l||(l=s[a]={});var c=l[n];return c==null&&(c=this.getVisual(n),isArray$1(c)?c=c.slice():isObject$1(c)&&(c=extend({},c)),l[n]=c),c},o.prototype.setItemVisual=function(a,n,s){var l=this._itemVisuals[a]||{};this._itemVisuals[a]=l,isObject$1(n)?extend(l,n):l[n]=s},o.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},o.prototype.setLayout=function(a,n){isObject$1(a)?extend(this._layout,a):this._layout[a]=n},o.prototype.getLayout=function(a){return this._layout[a]},o.prototype.getItemLayout=function(a){return this._itemLayouts[a]},o.prototype.setItemLayout=function(a,n,s){this._itemLayouts[a]=s?extend(this._itemLayouts[a]||{},n):n},o.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},o.prototype.setItemGraphicEl=function(a,n){var s=this.hostModel&&this.hostModel.seriesIndex;setCommonECData(s,this.dataType,a,n),this._graphicEls[a]=n},o.prototype.getItemGraphicEl=function(a){return this._graphicEls[a]},o.prototype.eachItemGraphicEl=function(a,n){each$f(this._graphicEls,function(s,l){s&&a&&a.call(n,s,l)})},o.prototype.cloneShallow=function(a){return a||(a=new o(this._schema?this._schema:map(this.dimensions,this._getDimInfo,this),this.hostModel)),transferProperties(a,this),a._store=this._store,a},o.prototype.wrapMethod=function(a,n){var s=this[a];isFunction$1(s)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(a),this[a]=function(){var l=s.apply(this,arguments);return n.apply(this,[l].concat(slice(arguments)))})},o.internalField=function(){prepareInvertedIndex=function(a){var n=a._invertedIndicesMap;each$f(n,function(s,l){var c=a._dimInfos[l],u=c.ordinalMeta,d=a._store;if(u){s=n[l]=new CtorInt32Array(u.categories.length);for(var h=0;h<s.length;h++)s[h]=INDEX_NOT_FOUND;for(var h=0;h<d.count();h++)s[d.get(c.storeDimIndex,h)]=h}})},getIdNameFromStore=function(a,n,s){return convertOptionIdName(a._getCategory(n,s),null)},getId=function(a,n){var s=a._idList[n];return s==null&&a._idDimIdx!=null&&(s=getIdNameFromStore(a,a._idDimIdx,n)),s==null&&(s=ID_PREFIX+n),s},normalizeDimensions=function(a){return isArray$1(a)||(a=a!=null?[a]:[]),a},cloneListForMapAndSample=function(a){var n=new o(a._schema?a._schema:map(a.dimensions,a._getDimInfo,a),a.hostModel);return transferProperties(n,a),n},transferProperties=function(a,n){each$f(TRANSFERABLE_PROPERTIES.concat(n.__wrappedMethods||[]),function(s){n.hasOwnProperty(s)&&(a[s]=n[s])}),a.__wrappedMethods=n.__wrappedMethods,each$f(CLONE_PROPERTIES,function(s){a[s]=clone$4(n[s])}),a._calculationInfo=extend({},n._calculationInfo)},makeIdFromName=function(a,n){var s=a._nameList,l=a._idList,c=a._nameDimIdx,u=a._idDimIdx,d=s[n],h=l[n];if(d==null&&c!=null&&(s[n]=d=getIdNameFromStore(a,c,n)),h==null&&u!=null&&(l[n]=h=getIdNameFromStore(a,u,n)),h==null&&d!=null){var f=a._nameRepeatCount,p=f[d]=(f[d]||0)+1;h=d,p>1&&(h+="__ec__"+p),l[n]=h}}}(),o}();function createDimensions(o,a){return prepareSeriesDataSchema(o,a).dimensions}function prepareSeriesDataSchema(o,a){isSourceInstance(o)||(o=createSourceFromSeriesDataOption(o)),a=a||{};var n=a.coordDimensions||[],s=a.dimensionsDefine||o.dimensionsDefine||[],l=createHashMap(),c=[],u=getDimCount(o,n,s,a.dimensionsCount),d=a.canOmitUnusedDimensions&&shouldOmitUnusedDimensions(u),h=s===o.dimensionsDefine,f=h?ensureSourceDimNameMap(o):createDimNameMap(s),p=a.encodeDefine;!p&&a.encodeDefaulter&&(p=a.encodeDefaulter(o,u));for(var g=createHashMap(p),v=new CtorInt32Array$1(u),b=0;b<v.length;b++)v[b]=-1;function w(H){var q=v[H];if(q<0){var Y=s[H],te=isObject$3(Y)?Y:{name:Y},ee=new SeriesDimensionDefine,re=te.name;re!=null&&f.get(re)!=null&&(ee.name=ee.displayName=re),te.type!=null&&(ee.type=te.type),te.displayName!=null&&(ee.displayName=te.displayName);var ne=c.length;return v[H]=ne,ee.storeDimIndex=H,c.push(ee),ee}return c[q]}if(!d)for(var b=0;b<u;b++)w(b);g.each(function(H,q){var Y=normalizeToArray(H).slice();if(Y.length===1&&!isString$2(Y[0])&&Y[0]<0){g.set(q,!1);return}var te=g.set(q,[]);each$f(Y,function(ee,re){var ne=isString$2(ee)?f.get(ee):ee;ne!=null&&ne<u&&(te[re]=ne,S(w(ne),q,re))})});var x=0;each$f(n,function(H){var q,Y,te,ee;if(isString$2(H))q=H,ee={};else{ee=H,q=ee.name;var re=ee.ordinalMeta;ee.ordinalMeta=null,ee=extend({},ee),ee.ordinalMeta=re,Y=ee.dimsDef,te=ee.otherDims,ee.name=ee.coordDim=ee.coordDimIndex=ee.dimsDef=ee.otherDims=null}var ne=g.get(q);if(ne!==!1){if(ne=normalizeToArray(ne),!ne.length)for(var ce=0;ce<(Y&&Y.length||1);ce++){for(;x<u&&w(x).coordDim!=null;)x++;x<u&&ne.push(x++)}each$f(ne,function(ve,be){var me=w(ve);if(h&&ee.type!=null&&(me.type=ee.type),S(defaults(me,ee),q,be),me.name==null&&Y){var ae=Y[be];!isObject$3(ae)&&(ae={name:ae}),me.name=me.displayName=ae.name,me.defaultTooltip=ae.defaultTooltip}te&&defaults(me.otherDims,te)})}});function S(H,q,Y){VISUAL_DIMENSIONS.get(q)!=null?H.otherDims[q]=Y:(H.coordDim=q,H.coordDimIndex=Y,l.set(q,!0))}var E=a.generateCoord,T=a.generateCoordCount,C=T!=null;T=E?T||1:0;var A=E||"value";function R(H){H.name==null&&(H.name=H.coordDim)}if(d)each$f(c,function(H){R(H)}),c.sort(function(H,q){return H.storeDimIndex-q.storeDimIndex});else for(var j=0;j<u;j++){var D=w(j),O=D.coordDim;O==null&&(D.coordDim=genCoordDimName(A,l,C),D.coordDimIndex=0,(!E||T<=0)&&(D.isExtraCoord=!0),T--),R(D),D.type==null&&(guessOrdinal(o,j)===BE_ORDINAL.Must||D.isExtraCoord&&(D.otherDims.itemName!=null||D.otherDims.seriesName!=null))&&(D.type="ordinal")}return removeDuplication(c),new SeriesDataSchema({source:o,dimensions:c,fullDimensionCount:u,dimensionOmitted:d})}function removeDuplication(o){for(var a=createHashMap(),n=0;n<o.length;n++){var s=o[n],l=s.name,c=a.get(l)||0;c>0&&(s.name=l+(c-1)),c++,a.set(l,c)}}function getDimCount(o,a,n,s){var l=Math.max(o.dimensionsDetectedCount||1,a.length,n.length,s||0);return each$f(a,function(c){var u;isObject$3(c)&&(u=c.dimsDef)&&(l=Math.max(l,u.length))}),l}function genCoordDimName(o,a,n){if(n||a.hasKey(o)){for(var s=0;a.hasKey(o+s);)s++;o+=s}return a.set(o,!0),o}var CoordSysInfo=function(){function o(a){this.coordSysDims=[],this.axisMap=createHashMap(),this.categoryAxisMap=createHashMap(),this.coordSysName=a}return o}();function getCoordSysInfoBySeries(o){var a=o.get("coordinateSystem"),n=new CoordSysInfo(a),s=fetchers[a];if(s)return s(o,n,n.axisMap,n.categoryAxisMap),n}var fetchers={cartesian2d:function(o,a,n,s){var l=o.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],c=o.getReferringComponents("yAxis",SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"){if(!l)throw new Error('xAxis "'+retrieve(o.get("xAxisIndex"),o.get("xAxisId"),0)+'" not found');if(!c)throw new Error('yAxis "'+retrieve(o.get("xAxisIndex"),o.get("yAxisId"),0)+'" not found')}a.coordSysDims=["x","y"],n.set("x",l),n.set("y",c),isCategory(l)&&(s.set("x",l),a.firstCategoryDimIndex=0),isCategory(c)&&(s.set("y",c),a.firstCategoryDimIndex==null&&(a.firstCategoryDimIndex=1))},singleAxis:function(o,a,n,s){var l=o.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"&&!l)throw new Error("singleAxis should be specified.");a.coordSysDims=["single"],n.set("single",l),isCategory(l)&&(s.set("single",l),a.firstCategoryDimIndex=0)},polar:function(o,a,n,s){var l=o.getReferringComponents("polar",SINGLE_REFERRING).models[0],c=l.findAxisModel("radiusAxis"),u=l.findAxisModel("angleAxis");if(process.env.NODE_ENV!=="production"){if(!u)throw new Error("angleAxis option not found");if(!c)throw new Error("radiusAxis option not found")}a.coordSysDims=["radius","angle"],n.set("radius",c),n.set("angle",u),isCategory(c)&&(s.set("radius",c),a.firstCategoryDimIndex=0),isCategory(u)&&(s.set("angle",u),a.firstCategoryDimIndex==null&&(a.firstCategoryDimIndex=1))},geo:function(o,a,n,s){a.coordSysDims=["lng","lat"]},parallel:function(o,a,n,s){var l=o.ecModel,c=l.getComponent("parallel",o.get("parallelIndex")),u=a.coordSysDims=c.dimensions.slice();each$f(c.parallelAxisIndex,function(d,h){var f=l.getComponent("parallelAxis",d),p=u[h];n.set(p,f),isCategory(f)&&(s.set(p,f),a.firstCategoryDimIndex==null&&(a.firstCategoryDimIndex=h))})}};function isCategory(o){return o.get("type")==="category"}function enableDataStack(o,a,n){n=n||{};var s=n.byIndex,l=n.stackedCoordDimension,c,u,d;isLegacyDimensionsInput(a)?c=a:(u=a.schema,c=u.dimensions,d=a.store);var h=!!(o&&o.get("stack")),f,p,g,v;if(each$f(c,function(T,C){isString$2(T)&&(c[C]=T={name:T}),h&&!T.isExtraCoord&&(!s&&!f&&T.ordinalMeta&&(f=T),!p&&T.type!=="ordinal"&&T.type!=="time"&&(!l||l===T.coordDim)&&(p=T))}),p&&!s&&!f&&(s=!0),p){g="__\0ecstackresult_"+o.id,v="__\0ecstackedover_"+o.id,f&&(f.createInvertedIndices=!0);var b=p.coordDim,w=p.type,x=0;each$f(c,function(T){T.coordDim===b&&x++});var S={name:g,coordDim:b,coordDimIndex:x,type:w,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:c.length},E={name:v,coordDim:v,coordDimIndex:x+1,type:w,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:c.length+1};u?(d&&(S.storeDimIndex=d.ensureCalculationDimension(v,w),E.storeDimIndex=d.ensureCalculationDimension(g,w)),u.appendCalculationDimension(S),u.appendCalculationDimension(E)):(c.push(S),c.push(E))}return{stackedDimension:p&&p.name,stackedByDimension:f&&f.name,isStackedByIndex:s,stackedOverDimension:v,stackResultDimension:g}}function isLegacyDimensionsInput(o){return!isSeriesDataSchema(o.schema)}function isDimensionStacked(o,a){return!!a&&a===o.getCalculationInfo("stackedDimension")}function getStackedDimension(o,a){return isDimensionStacked(o,a)?o.getCalculationInfo("stackResultDimension"):a}function getCoordSysDimDefs(o,a){var n=o.get("coordinateSystem"),s=CoordinateSystemManager.get(n),l;return a&&a.coordSysDims&&(l=map$1(a.coordSysDims,function(c){var u={name:c},d=a.axisMap.get(c);if(d){var h=d.get("type");u.type=getDimensionTypeByAxis(h)}return u})),l||(l=s&&(s.getDimensionsInfo?s.getDimensionsInfo():s.dimensions.slice())||["x","y"]),l}function injectOrdinalMeta(o,a,n){var s,l;return n&&each$f(o,function(c,u){var d=c.coordDim,h=n.categoryAxisMap.get(d);h&&(s==null&&(s=u),c.ordinalMeta=h.getOrdinalMeta(),a&&(c.createInvertedIndices=!0)),c.otherDims.itemName!=null&&(l=!0)}),!l&&s!=null&&(o[s].otherDims.itemName=0),s}function createSeriesData(o,a,n){n=n||{};var s=a.getSourceManager(),l,c=!1;o?(c=!0,l=createSourceFromSeriesDataOption(o)):(l=s.getSource(),c=l.sourceFormat===SOURCE_FORMAT_ORIGINAL);var u=getCoordSysInfoBySeries(a),d=getCoordSysDimDefs(a,u),h=n.useEncodeDefaulter,f=isFunction$1(h)?h:h?curry$1(makeSeriesEncodeForAxisCoordSys,d,a):null,p={coordDimensions:d,generateCoord:n.generateCoord,encodeDefine:a.getEncode(),encodeDefaulter:f,canOmitUnusedDimensions:!c},g=prepareSeriesDataSchema(l,p),v=injectOrdinalMeta(g.dimensions,n.createInvertedIndices,u),b=c?null:s.getSharedDataStore(g),w=enableDataStack(a,{schema:g,store:b}),x=new SeriesData(g,a);x.setCalculationInfo(w);var S=v!=null&&isNeedCompleteOrdinalData(l)?function(E,T,C,A){return A===v?C:this.defaultDimValueGetter(E,T,C,A)}:null;return x.hasItemOption=!1,x.initData(c?l:b,null,S),x}function isNeedCompleteOrdinalData(o){if(o.sourceFormat===SOURCE_FORMAT_ORIGINAL){var a=firstDataNotNull(o.data||[]);return!isArray$1(getDataItemValue(a))}}function firstDataNotNull(o){for(var a=0;a<o.length&&o[a]==null;)a++;return o[a]}var Scale=function(){function o(a){this._setting=a||{},this._extent=[1/0,-1/0]}return o.prototype.getSetting=function(a){return this._setting[a]},o.prototype.unionExtent=function(a){var n=this._extent;a[0]<n[0]&&(n[0]=a[0]),a[1]>n[1]&&(n[1]=a[1])},o.prototype.unionExtentFromData=function(a,n){this.unionExtent(a.getApproximateExtent(n))},o.prototype.getExtent=function(){return this._extent.slice()},o.prototype.setExtent=function(a,n){var s=this._extent;isNaN(a)||(s[0]=a),isNaN(n)||(s[1]=n)},o.prototype.isInExtentRange=function(a){return this._extent[0]<=a&&this._extent[1]>=a},o.prototype.isBlank=function(){return this._isBlank},o.prototype.setBlank=function(a){this._isBlank=a},o}();enableClassManagement(Scale);var uidBase=0,OrdinalMeta=function(){function o(a){this.categories=a.categories||[],this._needCollect=a.needCollect,this._deduplication=a.deduplication,this.uid=++uidBase}return o.createByAxisModel=function(a){var n=a.option,s=n.data,l=s&&map$1(s,getName);return new o({categories:l,needCollect:!l,deduplication:n.dedplication!==!1})},o.prototype.getOrdinal=function(a){return this._getOrCreateMap().get(a)},o.prototype.parseAndCollect=function(a){var n,s=this._needCollect;if(!isString$2(a)&&!s)return a;if(s&&!this._deduplication)return n=this.categories.length,this.categories[n]=a,n;var l=this._getOrCreateMap();return n=l.get(a),n==null&&(s?(n=this.categories.length,this.categories[n]=a,l.set(a,n)):n=NaN),n},o.prototype._getOrCreateMap=function(){return this._map||(this._map=createHashMap(this.categories))},o}();function getName(o){return isObject$3(o)&&o.value!=null?o.value:o+""}function isValueNice(o){var a=Math.pow(10,quantityExponent(Math.abs(o))),n=Math.abs(o/a);return n===0||n===1||n===2||n===3||n===5}function isIntervalOrLogScale(o){return o.type==="interval"||o.type==="log"}function intervalScaleNiceTicks(o,a,n,s){var l={},c=o[1]-o[0],u=l.interval=nice(c/a,!0);n!=null&&u<n&&(u=l.interval=n),s!=null&&u>s&&(u=l.interval=s);var d=l.intervalPrecision=getIntervalPrecision(u),h=l.niceTickExtent=[round$3(Math.ceil(o[0]/u)*u,d),round$3(Math.floor(o[1]/u)*u,d)];return fixExtent(h,o),l}function increaseInterval(o){var a=Math.pow(10,quantityExponent(o)),n=o/a;return n?n===2?n=3:n===3?n=5:n*=2:n=1,round$3(n*a)}function getIntervalPrecision(o){return getPrecision(o)+2}function clamp(o,a,n){o[a]=Math.max(Math.min(o[a],n[1]),n[0])}function fixExtent(o,a){!isFinite(o[0])&&(o[0]=a[0]),!isFinite(o[1])&&(o[1]=a[1]),clamp(o,0,a),clamp(o,1,a),o[0]>o[1]&&(o[0]=o[1])}function contain$1(o,a){return o>=a[0]&&o<=a[1]}function normalize$2(o,a){return a[1]===a[0]?.5:(o-a[0])/(a[1]-a[0])}function scale(o,a){return o*(a[1]-a[0])+a[0]}var OrdinalScale=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;s.type="ordinal";var l=s.getSetting("ordinalMeta");return l||(l=new OrdinalMeta({})),isArray$1(l)&&(l=new OrdinalMeta({categories:map$1(l,function(c){return isObject$3(c)?c.value:c})})),s._ordinalMeta=l,s._extent=s.getSetting("extent")||[0,l.categories.length-1],s}return a.prototype.parse=function(n){return n==null?NaN:isString$2(n)?this._ordinalMeta.getOrdinal(n):Math.round(n)},a.prototype.contain=function(n){return n=this.parse(n),contain$1(n,this._extent)&&this._ordinalMeta.categories[n]!=null},a.prototype.normalize=function(n){return n=this._getTickNumber(this.parse(n)),normalize$2(n,this._extent)},a.prototype.scale=function(n){return n=Math.round(scale(n,this._extent)),this.getRawOrdinalNumber(n)},a.prototype.getTicks=function(){for(var n=[],s=this._extent,l=s[0];l<=s[1];)n.push({value:l}),l++;return n},a.prototype.getMinorTicks=function(n){},a.prototype.setSortInfo=function(n){if(n==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var s=n.ordinalNumbers,l=this._ordinalNumbersByTick=[],c=this._ticksByOrdinalNumber=[],u=0,d=this._ordinalMeta.categories.length,h=Math.min(d,s.length);u<h;++u){var f=s[u];l[u]=f,c[f]=u}for(var p=0;u<d;++u){for(;c[p]!=null;)p++;l.push(p),c[p]=u}},a.prototype._getTickNumber=function(n){var s=this._ticksByOrdinalNumber;return s&&n>=0&&n<s.length?s[n]:n},a.prototype.getRawOrdinalNumber=function(n){var s=this._ordinalNumbersByTick;return s&&n>=0&&n<s.length?s[n]:n},a.prototype.getLabel=function(n){if(!this.isBlank()){var s=this.getRawOrdinalNumber(n.value),l=this._ordinalMeta.categories[s];return l==null?"":l+""}},a.prototype.count=function(){return this._extent[1]-this._extent[0]+1},a.prototype.unionExtentFromData=function(n,s){this.unionExtent(n.getApproximateExtent(s))},a.prototype.isInExtentRange=function(n){return n=this._getTickNumber(n),this._extent[0]<=n&&this._extent[1]>=n},a.prototype.getOrdinalMeta=function(){return this._ordinalMeta},a.prototype.calcNiceTicks=function(){},a.prototype.calcNiceExtent=function(){},a.type="ordinal",a}(Scale);Scale.registerClass(OrdinalScale);var roundNumber=round$3,IntervalScale=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="interval",n._interval=0,n._intervalPrecision=2,n}return a.prototype.parse=function(n){return n},a.prototype.contain=function(n){return contain$1(n,this._extent)},a.prototype.normalize=function(n){return normalize$2(n,this._extent)},a.prototype.scale=function(n){return scale(n,this._extent)},a.prototype.setExtent=function(n,s){var l=this._extent;isNaN(n)||(l[0]=parseFloat(n)),isNaN(s)||(l[1]=parseFloat(s))},a.prototype.unionExtent=function(n){var s=this._extent;n[0]<s[0]&&(s[0]=n[0]),n[1]>s[1]&&(s[1]=n[1]),this.setExtent(s[0],s[1])},a.prototype.getInterval=function(){return this._interval},a.prototype.setInterval=function(n){this._interval=n,this._niceExtent=this._extent.slice(),this._intervalPrecision=getIntervalPrecision(n)},a.prototype.getTicks=function(n){var s=this._interval,l=this._extent,c=this._niceExtent,u=this._intervalPrecision,d=[];if(!s)return d;var h=1e4;l[0]<c[0]&&(n?d.push({value:roundNumber(c[0]-s,u)}):d.push({value:l[0]}));for(var f=c[0];f<=c[1]&&(d.push({value:f}),f=roundNumber(f+s,u),f!==d[d.length-1].value);)if(d.length>h)return[];var p=d.length?d[d.length-1].value:c[1];return l[1]>p&&(n?d.push({value:roundNumber(p+s,u)}):d.push({value:l[1]})),d},a.prototype.getMinorTicks=function(n){for(var s=this.getTicks(!0),l=[],c=this.getExtent(),u=1;u<s.length;u++){for(var d=s[u],h=s[u-1],f=0,p=[],g=d.value-h.value,v=g/n;f<n-1;){var b=roundNumber(h.value+(f+1)*v);b>c[0]&&b<c[1]&&p.push(b),f++}l.push(p)}return l},a.prototype.getLabel=function(n,s){if(n==null)return"";var l=s&&s.precision;l==null?l=getPrecision(n.value)||0:l==="auto"&&(l=this._intervalPrecision);var c=roundNumber(n.value,l,!0);return addCommas(c)},a.prototype.calcNiceTicks=function(n,s,l){n=n||5;var c=this._extent,u=c[1]-c[0];if(isFinite(u)){u<0&&(u=-u,c.reverse());var d=intervalScaleNiceTicks(c,n,s,l);this._intervalPrecision=d.intervalPrecision,this._interval=d.interval,this._niceExtent=d.niceTickExtent}},a.prototype.calcNiceExtent=function(n){var s=this._extent;if(s[0]===s[1])if(s[0]!==0){var l=Math.abs(s[0]);n.fixMax||(s[1]+=l/2),s[0]-=l/2}else s[1]=1;var c=s[1]-s[0];isFinite(c)||(s[0]=0,s[1]=1),this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval);var u=this._interval;n.fixMin||(s[0]=roundNumber(Math.floor(s[0]/u)*u)),n.fixMax||(s[1]=roundNumber(Math.ceil(s[1]/u)*u))},a.prototype.setNiceExtent=function(n,s){this._niceExtent=[n,s]},a.type="interval",a}(Scale);Scale.registerClass(IntervalScale);var supportFloat32Array=typeof Float32Array<"u",Float32ArrayCtor=supportFloat32Array?Float32Array:Array;function createFloat32Array(o){return isArray$1(o)?supportFloat32Array?new Float32Array(o):o:new Float32ArrayCtor(o)}var STACK_PREFIX="__ec_stack_";function getSeriesStackId$1(o){return o.get("stack")||STACK_PREFIX+o.seriesIndex}function getAxisKey$1(o){return o.dim+o.index}function getLayoutOnAxis(o){var a=[],n=o.axis,s="axis0";if(n.type==="category"){for(var l=n.getBandWidth(),c=0;c<o.count;c++)a.push(defaults({bandWidth:l,axisKey:s,stackId:STACK_PREFIX+c},o));for(var u=doCalBarWidthAndOffset(a),d=[],c=0;c<o.count;c++){var h=u[s][STACK_PREFIX+c];h.offsetCenter=h.offset+h.width/2,d.push(h)}return d}}function prepareLayoutBarSeries(o,a){var n=[];return a.eachSeriesByType(o,function(s){isOnCartesian(s)&&n.push(s)}),n}function getValueAxesMinGaps(o){var a={};each$f(o,function(h){var f=h.coordinateSystem,p=f.getBaseAxis();if(!(p.type!=="time"&&p.type!=="value"))for(var g=h.getData(),v=p.dim+"_"+p.index,b=g.getDimensionIndex(g.mapDimension(p.dim)),w=g.getStore(),x=0,S=w.count();x<S;++x){var E=w.get(b,x);a[v]?a[v].push(E):a[v]=[E]}});var n={};for(var s in a)if(a.hasOwnProperty(s)){var l=a[s];if(l){l.sort(function(h,f){return h-f});for(var c=null,u=1;u<l.length;++u){var d=l[u]-l[u-1];d>0&&(c=c===null?d:Math.min(c,d))}n[s]=c}}return n}function makeColumnLayout(o){var a=getValueAxesMinGaps(o),n=[];return each$f(o,function(s){var l=s.coordinateSystem,c=l.getBaseAxis(),u=c.getExtent(),d;if(c.type==="category")d=c.getBandWidth();else if(c.type==="value"||c.type==="time"){var h=c.dim+"_"+c.index,f=a[h],p=Math.abs(u[1]-u[0]),g=c.scale.getExtent(),v=Math.abs(g[1]-g[0]);d=f?p/v*f:p}else{var b=s.getData();d=Math.abs(u[1]-u[0])/b.count()}var w=parsePercent(s.get("barWidth"),d),x=parsePercent(s.get("barMaxWidth"),d),S=parsePercent(s.get("barMinWidth")||(isInLargeMode(s)?.5:1),d),E=s.get("barGap"),T=s.get("barCategoryGap");n.push({bandWidth:d,barWidth:w,barMaxWidth:x,barMinWidth:S,barGap:E,barCategoryGap:T,axisKey:getAxisKey$1(c),stackId:getSeriesStackId$1(s)})}),doCalBarWidthAndOffset(n)}function doCalBarWidthAndOffset(o){var a={};each$f(o,function(s,l){var c=s.axisKey,u=s.bandWidth,d=a[c]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},h=d.stacks;a[c]=d;var f=s.stackId;h[f]||d.autoWidthCount++,h[f]=h[f]||{width:0,maxWidth:0};var p=s.barWidth;p&&!h[f].width&&(h[f].width=p,p=Math.min(d.remainedWidth,p),d.remainedWidth-=p);var g=s.barMaxWidth;g&&(h[f].maxWidth=g);var v=s.barMinWidth;v&&(h[f].minWidth=v);var b=s.barGap;b!=null&&(d.gap=b);var w=s.barCategoryGap;w!=null&&(d.categoryGap=w)});var n={};return each$f(a,function(s,l){n[l]={};var c=s.stacks,u=s.bandWidth,d=s.categoryGap;if(d==null){var h=keys$1(c).length;d=Math.max(35-h*4,15)+"%"}var f=parsePercent(d,u),p=parsePercent(s.gap,1),g=s.remainedWidth,v=s.autoWidthCount,b=(g-f)/(v+(v-1)*p);b=Math.max(b,0),each$f(c,function(E){var T=E.maxWidth,C=E.minWidth;if(E.width){var A=E.width;T&&(A=Math.min(A,T)),C&&(A=Math.max(A,C)),E.width=A,g-=A+p*A,v--}else{var A=b;T&&T<A&&(A=Math.min(T,g)),C&&C>A&&(A=C),A!==b&&(E.width=A,g-=A+p*A,v--)}}),b=(g-f)/(v+(v-1)*p),b=Math.max(b,0);var w=0,x;each$f(c,function(E,T){E.width||(E.width=b),x=E,w+=E.width*(1+p)}),x&&(w-=x.width*p);var S=-w/2;each$f(c,function(E,T){n[l][T]=n[l][T]||{bandWidth:u,offset:S,width:E.width},S+=E.width*(1+p)})}),n}function retrieveColumnLayout(o,a,n){if(o&&a){var s=o[getAxisKey$1(a)];return s}}function layout$3(o,a){var n=prepareLayoutBarSeries(o,a),s=makeColumnLayout(n);each$f(n,function(l){var c=l.getData(),u=l.coordinateSystem,d=u.getBaseAxis(),h=getSeriesStackId$1(l),f=s[getAxisKey$1(d)][h],p=f.offset,g=f.width;c.setLayout({bandWidth:f.bandWidth,offset:p,size:g})})}function createProgressiveLayout(o){return{seriesType:o,plan:createRenderPlanner(),reset:function(a){if(isOnCartesian(a)){var n=a.getData(),s=a.coordinateSystem,l=s.getBaseAxis(),c=s.getOtherAxis(l),u=n.getDimensionIndex(n.mapDimension(c.dim)),d=n.getDimensionIndex(n.mapDimension(l.dim)),h=a.get("showBackground",!0),f=n.mapDimension(c.dim),p=n.getCalculationInfo("stackResultDimension"),g=isDimensionStacked(n,f)&&!!n.getCalculationInfo("stackedOnSeries"),v=c.isHorizontal(),b=getValueAxisStart(l,c),w=isInLargeMode(a),x=a.get("barMinHeight")||0,S=p&&n.getDimensionIndex(p),E=n.getLayout("size"),T=n.getLayout("offset");return{progress:function(C,A){for(var R=C.count,j=w&&createFloat32Array(R*3),D=w&&h&&createFloat32Array(R*3),O=w&&createFloat32Array(R),H=s.master.getRect(),q=v?H.width:H.height,Y,te=A.getStore(),ee=0;(Y=C.next())!=null;){var re=te.get(g?S:u,Y),ne=te.get(d,Y),ce=b,ve=void 0;g&&(ve=+re-te.get(u,Y));var be=void 0,me=void 0,ae=void 0,pe=void 0;if(v){var ie=s.dataToPoint([re,ne]);if(g){var se=s.dataToPoint([ve,ne]);ce=se[0]}be=ce,me=ie[1]+T,ae=ie[0]-ce,pe=E,Math.abs(ae)<x&&(ae=(ae<0?-1:1)*x)}else{var ie=s.dataToPoint([ne,re]);if(g){var se=s.dataToPoint([ne,ve]);ce=se[1]}be=ie[0]+T,me=ce,ae=E,pe=ie[1]-ce,Math.abs(pe)<x&&(pe=(pe<=0?-1:1)*x)}w?(j[ee]=be,j[ee+1]=me,j[ee+2]=v?ae:pe,D&&(D[ee]=v?H.x:be,D[ee+1]=v?me:H.y,D[ee+2]=q),O[Y]=Y):A.setItemLayout(Y,{x:be,y:me,width:ae,height:pe}),ee+=3}w&&A.setLayout({largePoints:j,largeDataIndices:O,largeBackgroundPoints:D,valueAxisHorizontal:v})}}}}}}function isOnCartesian(o){return o.coordinateSystem&&o.coordinateSystem.type==="cartesian2d"}function isInLargeMode(o){return o.pipelineContext&&o.pipelineContext.large}function getValueAxisStart(o,a){var n=a.model.get("startValue");return n||(n=0),a.toGlobalCoord(a.dataToCoord(a.type==="log"?n>0?n:1:n))}var bisect=function(o,a,n,s){for(;n<s;){var l=n+s>>>1;o[l][1]<a?n=l+1:s=l}return n},TimeScale=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="time",s}return a.prototype.getLabel=function(n){var s=this.getSetting("useUTC");return format$1(n.value,fullLeveledFormatter[getDefaultFormatPrecisionOfInterval(getPrimaryTimeUnit(this._minLevelUnit))]||fullLeveledFormatter.second,s,this.getSetting("locale"))},a.prototype.getFormattedLabel=function(n,s,l){var c=this.getSetting("useUTC"),u=this.getSetting("locale");return leveledFormat(n,s,l,u,c)},a.prototype.getTicks=function(){var n=this._interval,s=this._extent,l=[];if(!n)return l;l.push({value:s[0],level:0});var c=this.getSetting("useUTC"),u=getIntervalTicks(this._minLevelUnit,this._approxInterval,c,s);return l=l.concat(u),l.push({value:s[1],level:0}),l},a.prototype.calcNiceExtent=function(n){var s=this._extent;if(s[0]===s[1]&&(s[0]-=ONE_DAY,s[1]+=ONE_DAY),s[1]===-1/0&&s[0]===1/0){var l=new Date;s[1]=+new Date(l.getFullYear(),l.getMonth(),l.getDate()),s[0]=s[1]-ONE_DAY}this.calcNiceTicks(n.splitNumber,n.minInterval,n.maxInterval)},a.prototype.calcNiceTicks=function(n,s,l){n=n||10;var c=this._extent,u=c[1]-c[0];this._approxInterval=u/n,s!=null&&this._approxInterval<s&&(this._approxInterval=s),l!=null&&this._approxInterval>l&&(this._approxInterval=l);var d=scaleIntervals.length,h=Math.min(bisect(scaleIntervals,this._approxInterval,0,d),d-1);this._interval=scaleIntervals[h][1],this._minLevelUnit=scaleIntervals[Math.max(h-1,0)][0]},a.prototype.parse=function(n){return isNumber(n)?n:+parseDate$1(n)},a.prototype.contain=function(n){return contain$1(this.parse(n),this._extent)},a.prototype.normalize=function(n){return normalize$2(this.parse(n),this._extent)},a.prototype.scale=function(n){return scale(n,this._extent)},a.type="time",a}(IntervalScale),scaleIntervals=[["second",ONE_SECOND],["minute",ONE_MINUTE],["hour",ONE_HOUR],["quarter-day",ONE_HOUR*6],["half-day",ONE_HOUR*12],["day",ONE_DAY*1.2],["half-week",ONE_DAY*3.5],["week",ONE_DAY*7],["month",ONE_DAY*31],["quarter",ONE_DAY*95],["half-year",ONE_YEAR/2],["year",ONE_YEAR]];function isUnitValueSame(o,a,n,s){var l=parseDate$1(a),c=parseDate$1(n),u=function(w){return getUnitValue(l,w,s)===getUnitValue(c,w,s)},d=function(){return u("year")},h=function(){return d()&&u("month")},f=function(){return h()&&u("day")},p=function(){return f()&&u("hour")},g=function(){return p()&&u("minute")},v=function(){return g()&&u("second")},b=function(){return v()&&u("millisecond")};switch(o){case"year":return d();case"month":return h();case"day":return f();case"hour":return p();case"minute":return g();case"second":return v();case"millisecond":return b()}}function getDateInterval(o,a){return o/=ONE_DAY,o>16?16:o>7.5?7:o>3.5?4:o>1.5?2:1}function getMonthInterval(o){var a=30*ONE_DAY;return o/=a,o>6?6:o>3?3:o>2?2:1}function getHourInterval(o){return o/=ONE_HOUR,o>12?12:o>6?6:o>3.5?4:o>2?2:1}function getMinutesAndSecondsInterval(o,a){return o/=a?ONE_MINUTE:ONE_SECOND,o>30?30:o>20?20:o>15?15:o>10?10:o>5?5:o>2?2:1}function getMillisecondsInterval(o){return nice(o,!0)}function getFirstTimestampOfUnit(o,a,n){var s=new Date(o);switch(getPrimaryTimeUnit(a)){case"year":case"month":s[monthSetterName(n)](0);case"day":s[dateSetterName(n)](1);case"hour":s[hoursSetterName(n)](0);case"minute":s[minutesSetterName(n)](0);case"second":s[secondsSetterName(n)](0),s[millisecondsSetterName(n)](0)}return s.getTime()}function getIntervalTicks(o,a,n,s){var l=1e4,c=timeUnits,u=0;function d(q,Y,te,ee,re,ne,ce){for(var ve=new Date(Y),be=Y,me=ve[ee]();be<te&&be<=s[1];)ce.push({value:be}),me+=q,ve[re](me),be=ve.getTime();ce.push({value:be,notAdd:!0})}function h(q,Y,te){var ee=[],re=!Y.length;if(!isUnitValueSame(getPrimaryTimeUnit(q),s[0],s[1],n)){re&&(Y=[{value:getFirstTimestampOfUnit(new Date(s[0]),q,n)},{value:s[1]}]);for(var ne=0;ne<Y.length-1;ne++){var ce=Y[ne].value,ve=Y[ne+1].value;if(ce!==ve){var be=void 0,me=void 0,ae=void 0,pe=!1;switch(q){case"year":be=Math.max(1,Math.round(a/ONE_DAY/365)),me=fullYearGetterName(n),ae=fullYearSetterName(n);break;case"half-year":case"quarter":case"month":be=getMonthInterval(a),me=monthGetterName(n),ae=monthSetterName(n);break;case"week":case"half-week":case"day":be=getDateInterval(a),me=dateGetterName(n),ae=dateSetterName(n),pe=!0;break;case"half-day":case"quarter-day":case"hour":be=getHourInterval(a),me=hoursGetterName(n),ae=hoursSetterName(n);break;case"minute":be=getMinutesAndSecondsInterval(a,!0),me=minutesGetterName(n),ae=minutesSetterName(n);break;case"second":be=getMinutesAndSecondsInterval(a,!1),me=secondsGetterName(n),ae=secondsSetterName(n);break;case"millisecond":be=getMillisecondsInterval(a),me=millisecondsGetterName(n),ae=millisecondsSetterName(n);break}d(be,ce,ve,me,ae,pe,ee),q==="year"&&te.length>1&&ne===0&&te.unshift({value:te[0].value-be})}}for(var ne=0;ne<ee.length;ne++)te.push(ee[ne]);return ee}}for(var f=[],p=[],g=0,v=0,b=0;b<c.length&&u++<l;++b){var w=getPrimaryTimeUnit(c[b]);if(isPrimaryTimeUnit(c[b])){h(c[b],f[f.length-1]||[],p);var x=c[b+1]?getPrimaryTimeUnit(c[b+1]):null;if(w!==x){if(p.length){v=g,p.sort(function(q,Y){return q.value-Y.value});for(var S=[],E=0;E<p.length;++E){var T=p[E].value;(E===0||p[E-1].value!==T)&&(S.push(p[E]),T>=s[0]&&T<=s[1]&&g++)}var C=(s[1]-s[0])/a;if(g>C*1.5&&v>C/1.5||(f.push(S),g>C||o===c[b]))break}p=[]}}}process.env.NODE_ENV!=="production"&&u>=l&&warn("Exceed safe limit.");for(var A=filter(map$1(f,function(q){return filter(q,function(Y){return Y.value>=s[0]&&Y.value<=s[1]&&!Y.notAdd})}),function(q){return q.length>0}),R=[],j=A.length-1,b=0;b<A.length;++b)for(var D=A[b],O=0;O<D.length;++O)R.push({value:D[O].value,level:j-b});R.sort(function(q,Y){return q.value-Y.value});for(var H=[],b=0;b<R.length;++b)(b===0||R[b].value!==R[b-1].value)&&H.push(R[b]);return H}Scale.registerClass(TimeScale);var scaleProto=Scale.prototype,intervalScaleProto=IntervalScale.prototype,roundingErrorFix=round$3,mathFloor$1=Math.floor,mathCeil$1=Math.ceil,mathPow$1=Math.pow,mathLog$1=Math.log,LogScale=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="log",n.base=10,n._originalScale=new IntervalScale,n._interval=0,n}return a.prototype.getTicks=function(n){var s=this._originalScale,l=this._extent,c=s.getExtent(),u=intervalScaleProto.getTicks.call(this,n);return map$1(u,function(d){var h=d.value,f=round$3(mathPow$1(this.base,h));return f=h===l[0]&&this._fixMin?fixRoundingError(f,c[0]):f,f=h===l[1]&&this._fixMax?fixRoundingError(f,c[1]):f,{value:f}},this)},a.prototype.setExtent=function(n,s){var l=mathLog$1(this.base);n=mathLog$1(Math.max(0,n))/l,s=mathLog$1(Math.max(0,s))/l,intervalScaleProto.setExtent.call(this,n,s)},a.prototype.getExtent=function(){var n=this.base,s=scaleProto.getExtent.call(this);s[0]=mathPow$1(n,s[0]),s[1]=mathPow$1(n,s[1]);var l=this._originalScale,c=l.getExtent();return this._fixMin&&(s[0]=fixRoundingError(s[0],c[0])),this._fixMax&&(s[1]=fixRoundingError(s[1],c[1])),s},a.prototype.unionExtent=function(n){this._originalScale.unionExtent(n);var s=this.base;n[0]=mathLog$1(n[0])/mathLog$1(s),n[1]=mathLog$1(n[1])/mathLog$1(s),scaleProto.unionExtent.call(this,n)},a.prototype.unionExtentFromData=function(n,s){this.unionExtent(n.getApproximateExtent(s))},a.prototype.calcNiceTicks=function(n){n=n||10;var s=this._extent,l=s[1]-s[0];if(!(l===1/0||l<=0)){var c=quantity(l),u=n/l*c;for(u<=.5&&(c*=10);!isNaN(c)&&Math.abs(c)<1&&Math.abs(c)>0;)c*=10;var d=[round$3(mathCeil$1(s[0]/c)*c),round$3(mathFloor$1(s[1]/c)*c)];this._interval=c,this._niceExtent=d}},a.prototype.calcNiceExtent=function(n){intervalScaleProto.calcNiceExtent.call(this,n),this._fixMin=n.fixMin,this._fixMax=n.fixMax},a.prototype.parse=function(n){return n},a.prototype.contain=function(n){return n=mathLog$1(n)/mathLog$1(this.base),contain$1(n,this._extent)},a.prototype.normalize=function(n){return n=mathLog$1(n)/mathLog$1(this.base),normalize$2(n,this._extent)},a.prototype.scale=function(n){return n=scale(n,this._extent),mathPow$1(this.base,n)},a.type="log",a}(Scale),proto=LogScale.prototype;proto.getMinorTicks=intervalScaleProto.getMinorTicks;proto.getLabel=intervalScaleProto.getLabel;function fixRoundingError(o,a){return roundingErrorFix(o,getPrecision(a))}Scale.registerClass(LogScale);var ScaleRawExtentInfo=function(){function o(a,n,s){this._prepareParams(a,n,s)}return o.prototype._prepareParams=function(a,n,s){s[1]<s[0]&&(s=[NaN,NaN]),this._dataMin=s[0],this._dataMax=s[1];var l=this._isOrdinal=a.type==="ordinal";this._needCrossZero=a.type==="interval"&&n.getNeedCrossZero&&n.getNeedCrossZero();var c=n.get("min",!0);c==null&&(c=n.get("startValue",!0));var u=this._modelMinRaw=c;isFunction$1(u)?this._modelMinNum=parseAxisModelMinMax(a,u({min:s[0],max:s[1]})):u!=="dataMin"&&(this._modelMinNum=parseAxisModelMinMax(a,u));var d=this._modelMaxRaw=n.get("max",!0);if(isFunction$1(d)?this._modelMaxNum=parseAxisModelMinMax(a,d({min:s[0],max:s[1]})):d!=="dataMax"&&(this._modelMaxNum=parseAxisModelMinMax(a,d)),l)this._axisDataLen=n.getCategories().length;else{var h=n.get("boundaryGap"),f=isArray$1(h)?h:[h||0,h||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?(process.env.NODE_ENV!=="production"&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),this._boundaryGapInner=[0,0]):this._boundaryGapInner=[parsePercent$1(f[0],1),parsePercent$1(f[1],1)]}},o.prototype.calculate=function(){var a=this._isOrdinal,n=this._dataMin,s=this._dataMax,l=this._axisDataLen,c=this._boundaryGapInner,u=a?null:s-n||Math.abs(n),d=this._modelMinRaw==="dataMin"?n:this._modelMinNum,h=this._modelMaxRaw==="dataMax"?s:this._modelMaxNum,f=d!=null,p=h!=null;d==null&&(d=a?l?0:NaN:n-c[0]*u),h==null&&(h=a?l?l-1:NaN:s+c[1]*u),(d==null||!isFinite(d))&&(d=NaN),(h==null||!isFinite(h))&&(h=NaN);var g=eqNaN(d)||eqNaN(h)||a&&!l;this._needCrossZero&&(d>0&&h>0&&!f&&(d=0),d<0&&h<0&&!p&&(h=0));var v=this._determinedMin,b=this._determinedMax;return v!=null&&(d=v,f=!0),b!=null&&(h=b,p=!0),{min:d,max:h,minFixed:f,maxFixed:p,isBlank:g}},o.prototype.modifyDataMinMax=function(a,n){process.env.NODE_ENV!=="production"&&assert(!this.frozen),this[DATA_MIN_MAX_ATTR[a]]=n},o.prototype.setDeterminedMinMax=function(a,n){var s=DETERMINED_MIN_MAX_ATTR[a];process.env.NODE_ENV!=="production"&&assert(!this.frozen&&this[s]==null),this[s]=n},o.prototype.freeze=function(){this.frozen=!0},o}(),DETERMINED_MIN_MAX_ATTR={min:"_determinedMin",max:"_determinedMax"},DATA_MIN_MAX_ATTR={min:"_dataMin",max:"_dataMax"};function ensureScaleRawExtentInfo(o,a,n){var s=o.rawExtentInfo;return s||(s=new ScaleRawExtentInfo(o,a,n),o.rawExtentInfo=s,s)}function parseAxisModelMinMax(o,a){return a==null?null:eqNaN(a)?NaN:o.parse(a)}function getScaleExtent(o,a){var n=o.type,s=ensureScaleRawExtentInfo(o,a,o.getExtent()).calculate();o.setBlank(s.isBlank);var l=s.min,c=s.max,u=a.ecModel;if(u&&n==="time"){var d=prepareLayoutBarSeries("bar",u),h=!1;if(each$f(d,function(g){h=h||g.getBaseAxis()===a.axis}),h){var f=makeColumnLayout(d),p=adjustScaleForOverflow(l,c,a,f);l=p.min,c=p.max}}return{extent:[l,c],fixMin:s.minFixed,fixMax:s.maxFixed}}function adjustScaleForOverflow(o,a,n,s){var l=n.axis.getExtent(),c=Math.abs(l[1]-l[0]),u=retrieveColumnLayout(s,n.axis);if(u===void 0)return{min:o,max:a};var d=1/0;each$f(u,function(b){d=Math.min(b.offset,d)});var h=-1/0;each$f(u,function(b){h=Math.max(b.offset+b.width,h)}),d=Math.abs(d),h=Math.abs(h);var f=d+h,p=a-o,g=1-(d+h)/c,v=p/g-p;return a+=v*(h/f),o-=v*(d/f),{min:o,max:a}}function niceScaleExtent(o,a){var n=a,s=getScaleExtent(o,n),l=s.extent,c=n.get("splitNumber");o instanceof LogScale&&(o.base=n.get("logBase"));var u=o.type,d=n.get("interval"),h=u==="interval"||u==="time";o.setExtent(l[0],l[1]),o.calcNiceExtent({splitNumber:c,fixMin:s.fixMin,fixMax:s.fixMax,minInterval:h?n.get("minInterval"):null,maxInterval:h?n.get("maxInterval"):null}),d!=null&&o.setInterval&&o.setInterval(d)}function createScaleByModel$1(o,a){if(a=a||o.get("type"),a)switch(a){case"category":return new OrdinalScale({ordinalMeta:o.getOrdinalMeta?o.getOrdinalMeta():o.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:o.ecModel.getLocaleModel(),useUTC:o.ecModel.get("useUTC")});default:return new(Scale.getClass(a)||IntervalScale)}}function ifAxisCrossZero(o){var a=o.scale.getExtent(),n=a[0],s=a[1];return!(n>0&&s>0||n<0&&s<0)}function makeLabelFormatter(o){var a=o.getLabelModel().get("formatter"),n=o.type==="category"?o.scale.getExtent()[0]:null;return o.scale.type==="time"?function(s){return function(l,c){return o.scale.getFormattedLabel(l,c,s)}}(a):isString$2(a)?function(s){return function(l){var c=o.scale.getLabel(l),u=s.replace("{value}",c??"");return u}}(a):isFunction$1(a)?function(s){return function(l,c){return n!=null&&(c=l.value-n),s(getAxisRawValue(o,l),c,l.level!=null?{level:l.level}:null)}}(a):function(s){return o.scale.getLabel(s)}}function getAxisRawValue(o,a){return o.type==="category"?o.scale.getLabel(a):a.value}function estimateLabelUnionRect(o){var a=o.model,n=o.scale;if(!(!a.get(["axisLabel","show"])||n.isBlank())){var s,l,c=n.getExtent();n instanceof OrdinalScale?l=n.count():(s=n.getTicks(),l=s.length);var u=o.getLabelModel(),d=makeLabelFormatter(o),h,f=1;l>40&&(f=Math.ceil(l/40));for(var p=0;p<l;p+=f){var g=s?s[p]:{value:c[0]+p},v=d(g,p),b=u.getTextRect(v),w=rotateTextRect(b,u.get("rotate")||0);h?h.union(w):h=w}return h}}function rotateTextRect(o,a){var n=a*Math.PI/180,s=o.width,l=o.height,c=s*Math.abs(Math.cos(n))+Math.abs(l*Math.sin(n)),u=s*Math.abs(Math.sin(n))+Math.abs(l*Math.cos(n)),d=new BoundingRect(o.x,o.y,c,u);return d}function getOptionCategoryInterval(o){var a=o.get("interval");return a??"auto"}function shouldShowAllLabels(o){return o.type==="category"&&getOptionCategoryInterval(o.getLabelModel())===0}function getDataDimensionsOnAxis(o,a){var n={};return each$f(o.mapDimensionsAll(a),function(s){n[getStackedDimension(o,s)]=!0}),keys$1(n)}function unionAxisExtentFromData(o,a,n){a&&each$f(getDataDimensionsOnAxis(a,n),function(s){var l=a.getApproximateExtent(s);l[0]<o[0]&&(o[0]=l[0]),l[1]>o[1]&&(o[1]=l[1])})}var AxisModelCommonMixin=function(){function o(){}return o.prototype.getNeedCrossZero=function(){var a=this.option;return!a.scale},o.prototype.getCoordSysModel=function(){},o}();function createList$2(o){return createSeriesData(null,o)}var dataStack={isDimensionStacked,enableDataStack,getStackedDimension};function createScale(o,a){var n=a;a instanceof Model||(n=new Model(a));var s=createScaleByModel$1(n);return s.setExtent(o[0],o[1]),niceScaleExtent(s,n),s}function mixinAxisModelCommonMethods(o){mixin(o,AxisModelCommonMixin)}function createTextStyle(o,a){return a=a||{},createTextStyle$1(o,null,null,a.state!=="normal")}const helper=Object.freeze(Object.defineProperty({__proto__:null,createDimensions,createList:createList$2,createScale,createSymbol:createSymbol$1,createTextStyle,dataStack,enableHoverEmphasis,getECData,getLayoutRect,mixinAxisModelCommonMethods},Symbol.toStringTag,{value:"Module"}));var EPSILON=1e-8;function isAroundEqual(o,a){return Math.abs(o-a)<EPSILON}function contain(o,a,n){var s=0,l=o[0];if(!l)return!1;for(var c=1;c<o.length;c++){var u=o[c];s+=windingLine(l[0],l[1],u[0],u[1],a,n),l=u}var d=o[0];return(!isAroundEqual(l[0],d[0])||!isAroundEqual(l[1],d[1]))&&(s+=windingLine(l[0],l[1],d[0],d[1],a,n)),s!==0}var TMP_TRANSFORM=[];function transformPoints(o,a){for(var n=0;n<o.length;n++)applyTransform$1(o[n],o[n],a)}function updateBBoxFromPoints(o,a,n,s){for(var l=0;l<o.length;l++){var c=o[l];s&&(c=s.project(c)),c&&isFinite(c[0])&&isFinite(c[1])&&(min$1(a,a,c),max$1(n,n,c))}}function centroid$1(o){for(var a=0,n=0,s=0,l=o.length,c=o[l-1][0],u=o[l-1][1],d=0;d<l;d++){var h=o[d][0],f=o[d][1],p=c*f-h*u;a+=p,n+=(c+h)*p,s+=(u+f)*p,c=h,u=f}return a?[n/a/3,s/a/3,a]:[o[0][0]||0,o[0][1]||0]}var Region=function(){function o(a){this.name=a}return o.prototype.setCenter=function(a){this._center=a},o.prototype.getCenter=function(){var a=this._center;return a||(a=this._center=this.calcCenter()),a},o}(),GeoJSONPolygonGeometry=function(){function o(a,n){this.type="polygon",this.exterior=a,this.interiors=n}return o}(),GeoJSONLineStringGeometry=function(){function o(a){this.type="linestring",this.points=a}return o}(),GeoJSONRegion=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this,n)||this;return c.type="geoJSON",c.geometries=s,c._center=l&&[l[0],l[1]],c}return a.prototype.calcCenter=function(){for(var n=this.geometries,s,l=0,c=0;c<n.length;c++){var u=n[c],d=u.exterior,h=d&&d.length;h>l&&(s=u,l=h)}if(s)return centroid$1(s.exterior);var f=this.getBoundingRect();return[f.x+f.width/2,f.y+f.height/2]},a.prototype.getBoundingRect=function(n){var s=this._rect;if(s&&!n)return s;var l=[1/0,1/0],c=[-1/0,-1/0],u=this.geometries;return each$f(u,function(d){d.type==="polygon"?updateBBoxFromPoints(d.exterior,l,c,n):each$f(d.points,function(h){updateBBoxFromPoints(h,l,c,n)})}),isFinite(l[0])&&isFinite(l[1])&&isFinite(c[0])&&isFinite(c[1])||(l[0]=l[1]=c[0]=c[1]=0),s=new BoundingRect(l[0],l[1],c[0]-l[0],c[1]-l[1]),n||(this._rect=s),s},a.prototype.contain=function(n){var s=this.getBoundingRect(),l=this.geometries;if(!s.contain(n[0],n[1]))return!1;e:for(var c=0,u=l.length;c<u;c++){var d=l[c];if(d.type==="polygon"){var h=d.exterior,f=d.interiors;if(contain(h,n[0],n[1])){for(var p=0;p<(f?f.length:0);p++)if(contain(f[p],n[0],n[1]))continue e;return!0}}}return!1},a.prototype.transformTo=function(n,s,l,c){var u=this.getBoundingRect(),d=u.width/u.height;l?c||(c=l/d):l=d*c;for(var h=new BoundingRect(n,s,l,c),f=u.calculateTransform(h),p=this.geometries,g=0;g<p.length;g++){var v=p[g];v.type==="polygon"?(transformPoints(v.exterior,f),each$f(v.interiors,function(b){transformPoints(b,f)})):each$f(v.points,function(b){transformPoints(b,f)})}u=this._rect,u.copy(h),this._center=[u.x+u.width/2,u.y+u.height/2]},a.prototype.cloneShallow=function(n){n==null&&(n=this.name);var s=new a(n,this.geometries,this._center);return s._rect=this._rect,s.transformTo=null,s},a}(Region),GeoSVGRegion=function(o){__extends$1(a,o);function a(n,s){var l=o.call(this,n)||this;return l.type="geoSVG",l._elOnlyForCalculate=s,l}return a.prototype.calcCenter=function(){for(var n=this._elOnlyForCalculate,s=n.getBoundingRect(),l=[s.x+s.width/2,s.y+s.height/2],c=identity(TMP_TRANSFORM),u=n;u&&!u.isGeoSVGGraphicRoot;)mul(c,u.getLocalTransform(),c),u=u.parent;return invert(c,c),applyTransform$1(l,l,c),l},a}(Region);function decode(o){if(!o.UTF8Encoding)return o;var a=o,n=a.UTF8Scale;n==null&&(n=1024);var s=a.features;return each$f(s,function(l){var c=l.geometry,u=c.encodeOffsets,d=c.coordinates;if(u)switch(c.type){case"LineString":c.coordinates=decodeRing(d,u,n);break;case"Polygon":decodeRings(d,u,n);break;case"MultiLineString":decodeRings(d,u,n);break;case"MultiPolygon":each$f(d,function(h,f){return decodeRings(h,u[f],n)})}}),a.UTF8Encoding=!1,a}function decodeRings(o,a,n){for(var s=0;s<o.length;s++)o[s]=decodeRing(o[s],a[s],n)}function decodeRing(o,a,n){for(var s=[],l=a[0],c=a[1],u=0;u<o.length;u+=2){var d=o.charCodeAt(u)-64,h=o.charCodeAt(u+1)-64;d=d>>1^-(d&1),h=h>>1^-(h&1),d+=l,h+=c,l=d,c=h,s.push([d/n,h/n])}return s}function parseGeoJSON(o,a){return o=decode(o),map$1(filter(o.features,function(n){return n.geometry&&n.properties&&n.geometry.coordinates.length>0}),function(n){var s=n.properties,l=n.geometry,c=[];switch(l.type){case"Polygon":var u=l.coordinates;c.push(new GeoJSONPolygonGeometry(u[0],u.slice(1)));break;case"MultiPolygon":each$f(l.coordinates,function(h){h[0]&&c.push(new GeoJSONPolygonGeometry(h[0],h.slice(1)))});break;case"LineString":c.push(new GeoJSONLineStringGeometry([l.coordinates]));break;case"MultiLineString":c.push(new GeoJSONLineStringGeometry(l.coordinates))}var d=new GeoJSONRegion(s[a||"name"],c,s.cp);return d.properties=s,d})}const number=Object.freeze(Object.defineProperty({__proto__:null,MAX_SAFE_INTEGER,asc:asc$2,getPercentWithPrecision,getPixelPrecision,getPrecision,getPrecisionSafe,isNumeric,isRadianAroundZero,linearMap:linearMap$2,nice,numericToNumber,parseDate:parseDate$1,quantile,quantity,quantityExponent,reformIntervals,remRadian,round:round$3},Symbol.toStringTag,{value:"Module"})),time=Object.freeze(Object.defineProperty({__proto__:null,format:format$1,parse:parseDate$1},Symbol.toStringTag,{value:"Module"})),graphic=Object.freeze(Object.defineProperty({__proto__:null,Arc,BezierCurve,BoundingRect,Circle,CompoundPath,Ellipse,Group:Group$3,Image:ZRImage,IncrementalDisplayable,Line:Line$1,LinearGradient,Polygon,Polyline:Polyline$1,RadialGradient,Rect:Rect$2,Ring,Sector,Text:ZRText,clipPointsByRect,clipRectByRect,createIcon,extendPath,extendShape,getShapeClass,getTransform:getTransform$1,initProps,makeImage,makePath,mergePath,registerShape,resizePath,updateProps:updateProps$1},Symbol.toStringTag,{value:"Module"})),format=Object.freeze(Object.defineProperty({__proto__:null,addCommas,capitalFirst,encodeHTML,formatTime,formatTpl,getTextRect,getTooltipMarker,normalizeCssArray,toCamelCase,truncateText},Symbol.toStringTag,{value:"Module"})),util=Object.freeze(Object.defineProperty({__proto__:null,bind:bind$1,clone:clone$4,curry:curry$1,defaults,each:each$f,extend,filter,indexOf,inherits,isArray:isArray$1,isFunction:isFunction$1,isObject:isObject$3,isString:isString$2,map:map$1,merge,reduce},Symbol.toStringTag,{value:"Module"}));var inner$g=makeInner();function tickValuesToNumbers(o,a){var n=map$1(a,function(s){return o.scale.parse(s)});return o.type==="time"&&n.length>0&&(n.sort(),n.unshift(n[0]),n.push(n[n.length-1])),n}function createAxisLabels(o){var a=o.getLabelModel().get("customValues");if(a){var n=makeLabelFormatter(o),s=o.scale.getExtent(),l=tickValuesToNumbers(o,a),c=filter(l,function(u){return u>=s[0]&&u<=s[1]});return{labels:map$1(c,function(u){var d={value:u};return{formattedLabel:n(d),rawLabel:o.scale.getLabel(d),tickValue:u}})}}return o.type==="category"?makeCategoryLabels(o):makeRealNumberLabels(o)}function createAxisTicks(o,a){var n=o.getTickModel().get("customValues");if(n){var s=o.scale.getExtent(),l=tickValuesToNumbers(o,n);return{ticks:filter(l,function(c){return c>=s[0]&&c<=s[1]})}}return o.type==="category"?makeCategoryTicks(o,a):{ticks:map$1(o.scale.getTicks(),function(c){return c.value})}}function makeCategoryLabels(o){var a=o.getLabelModel(),n=makeCategoryLabelsActually(o,a);return!a.get("show")||o.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function makeCategoryLabelsActually(o,a){var n=getListCache(o,"labels"),s=getOptionCategoryInterval(a),l=listCacheGet(n,s);if(l)return l;var c,u;return isFunction$1(s)?c=makeLabelsByCustomizedCategoryInterval(o,s):(u=s==="auto"?makeAutoCategoryInterval(o):s,c=makeLabelsByNumericCategoryInterval(o,u)),listCacheSet(n,s,{labels:c,labelCategoryInterval:u})}function makeCategoryTicks(o,a){var n=getListCache(o,"ticks"),s=getOptionCategoryInterval(a),l=listCacheGet(n,s);if(l)return l;var c,u;if((!a.get("show")||o.scale.isBlank())&&(c=[]),isFunction$1(s))c=makeLabelsByCustomizedCategoryInterval(o,s,!0);else if(s==="auto"){var d=makeCategoryLabelsActually(o,o.getLabelModel());u=d.labelCategoryInterval,c=map$1(d.labels,function(h){return h.tickValue})}else u=s,c=makeLabelsByNumericCategoryInterval(o,u,!0);return listCacheSet(n,s,{ticks:c,tickCategoryInterval:u})}function makeRealNumberLabels(o){var a=o.scale.getTicks(),n=makeLabelFormatter(o);return{labels:map$1(a,function(s,l){return{level:s.level,formattedLabel:n(s,l),rawLabel:o.scale.getLabel(s),tickValue:s.value}})}}function getListCache(o,a){return inner$g(o)[a]||(inner$g(o)[a]=[])}function listCacheGet(o,a){for(var n=0;n<o.length;n++)if(o[n].key===a)return o[n].value}function listCacheSet(o,a,n){return o.push({key:a,value:n}),n}function makeAutoCategoryInterval(o){var a=inner$g(o).autoInterval;return a??(inner$g(o).autoInterval=o.calculateCategoryInterval())}function calculateCategoryInterval(o){var a=fetchAutoCategoryIntervalCalculationParams(o),n=makeLabelFormatter(o),s=(a.axisRotate-a.labelRotate)/180*Math.PI,l=o.scale,c=l.getExtent(),u=l.count();if(c[1]-c[0]<1)return 0;var d=1;u>40&&(d=Math.max(1,Math.floor(u/40)));for(var h=c[0],f=o.dataToCoord(h+1)-o.dataToCoord(h),p=Math.abs(f*Math.cos(s)),g=Math.abs(f*Math.sin(s)),v=0,b=0;h<=c[1];h+=d){var w=0,x=0,S=getBoundingRect(n({value:h}),a.font,"center","top");w=S.width*1.3,x=S.height*1.3,v=Math.max(v,w,7),b=Math.max(b,x,7)}var E=v/p,T=b/g;isNaN(E)&&(E=1/0),isNaN(T)&&(T=1/0);var C=Math.max(0,Math.floor(Math.min(E,T))),A=inner$g(o.model),R=o.getExtent(),j=A.lastAutoInterval,D=A.lastTickCount;return j!=null&&D!=null&&Math.abs(j-C)<=1&&Math.abs(D-u)<=1&&j>C&&A.axisExtent0===R[0]&&A.axisExtent1===R[1]?C=j:(A.lastTickCount=u,A.lastAutoInterval=C,A.axisExtent0=R[0],A.axisExtent1=R[1]),C}function fetchAutoCategoryIntervalCalculationParams(o){var a=o.getLabelModel();return{axisRotate:o.getRotate?o.getRotate():o.isHorizontal&&!o.isHorizontal()?90:0,labelRotate:a.get("rotate")||0,font:a.getFont()}}function makeLabelsByNumericCategoryInterval(o,a,n){var s=makeLabelFormatter(o),l=o.scale,c=l.getExtent(),u=o.getLabelModel(),d=[],h=Math.max((a||0)+1,1),f=c[0],p=l.count();f!==0&&h>1&&p/h>2&&(f=Math.round(Math.ceil(f/h)*h));var g=shouldShowAllLabels(o),v=u.get("showMinLabel")||g,b=u.get("showMaxLabel")||g;v&&f!==c[0]&&x(c[0]);for(var w=f;w<=c[1];w+=h)x(w);b&&w-h!==c[1]&&x(c[1]);function x(S){var E={value:S};d.push(n?S:{formattedLabel:s(E),rawLabel:l.getLabel(E),tickValue:S})}return d}function makeLabelsByCustomizedCategoryInterval(o,a,n){var s=o.scale,l=makeLabelFormatter(o),c=[];return each$f(s.getTicks(),function(u){var d=s.getLabel(u),h=u.value;a(u.value,d)&&c.push(n?h:{formattedLabel:l(u),rawLabel:d,tickValue:h})}),c}var NORMALIZED_EXTENT=[0,1],Axis=function(){function o(a,n,s){this.onBand=!1,this.inverse=!1,this.dim=a,this.scale=n,this._extent=s||[0,0]}return o.prototype.contain=function(a){var n=this._extent,s=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a>=s&&a<=l},o.prototype.containData=function(a){return this.scale.contain(a)},o.prototype.getExtent=function(){return this._extent.slice()},o.prototype.getPixelPrecision=function(a){return getPixelPrecision(a||this.scale.getExtent(),this._extent)},o.prototype.setExtent=function(a,n){var s=this._extent;s[0]=a,s[1]=n},o.prototype.dataToCoord=function(a,n){var s=this._extent,l=this.scale;return a=l.normalize(a),this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count())),linearMap$2(a,NORMALIZED_EXTENT,s,n)},o.prototype.coordToData=function(a,n){var s=this._extent,l=this.scale;this.onBand&&l.type==="ordinal"&&(s=s.slice(),fixExtentWithBands(s,l.count()));var c=linearMap$2(a,s,NORMALIZED_EXTENT,n);return this.scale.scale(c)},o.prototype.pointToData=function(a,n){},o.prototype.getTicksCoords=function(a){a=a||{};var n=a.tickModel||this.getTickModel(),s=createAxisTicks(this,n),l=s.ticks,c=map$1(l,function(d){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(d):d),tickValue:d}},this),u=n.get("alignWithLabel");return fixOnBandTicksCoords(this,c,u,a.clamp),c},o.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var a=this.model.getModel("minorTick"),n=a.get("splitNumber");n>0&&n<100||(n=5);var s=this.scale.getMinorTicks(n),l=map$1(s,function(c){return map$1(c,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return l},o.prototype.getViewLabels=function(){return createAxisLabels(this).labels},o.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},o.prototype.getTickModel=function(){return this.model.getModel("axisTick")},o.prototype.getBandWidth=function(){var a=this._extent,n=this.scale.getExtent(),s=n[1]-n[0]+(this.onBand?1:0);s===0&&(s=1);var l=Math.abs(a[1]-a[0]);return Math.abs(l)/s},o.prototype.calculateCategoryInterval=function(){return calculateCategoryInterval(this)},o}();function fixExtentWithBands(o,a){var n=o[1]-o[0],s=a,l=n/s/2;o[0]+=l,o[1]-=l}function fixOnBandTicksCoords(o,a,n,s){var l=a.length;if(!o.onBand||n||!l)return;var c=o.getExtent(),u,d;if(l===1)a[0].coord=c[0],u=a[1]={coord:c[1],tickValue:a[0].tickValue};else{var h=a[l-1].tickValue-a[0].tickValue,f=(a[l-1].coord-a[0].coord)/h;each$f(a,function(b){b.coord-=f/2});var p=o.scale.getExtent();d=1+p[1]-a[l-1].tickValue,u={coord:a[l-1].coord+f*d,tickValue:p[1]+1},a.push(u)}var g=c[0]>c[1];v(a[0].coord,c[0])&&(s?a[0].coord=c[0]:a.shift()),s&&v(c[0],a[0].coord)&&a.unshift({coord:c[0]}),v(c[1],u.coord)&&(s?u.coord=c[1]:a.pop()),s&&v(u.coord,c[1])&&a.push({coord:c[1]});function v(b,w){return b=round$3(b),w=round$3(w),g?b>w:b<w}}function extendComponentModel(o){var a=ComponentModel.extend(o);return ComponentModel.registerClass(a),a}function extendComponentView(o){var a=ComponentView.extend(o);return ComponentView.registerClass(a),a}function extendSeriesModel(o){var a=SeriesModel.extend(o);return SeriesModel.registerClass(a),a}function extendChartView(o){var a=ChartView.extend(o);return ChartView.registerClass(a),a}var PI2$2=Math.PI*2,CMD$1=PathProxy.CMD,DEFAULT_SEARCH_SPACE=["top","right","bottom","left"];function getCandidateAnchor(o,a,n,s,l){var c=n.width,u=n.height;switch(o){case"top":s.set(n.x+c/2,n.y-a),l.set(0,-1);break;case"bottom":s.set(n.x+c/2,n.y+u+a),l.set(0,1);break;case"left":s.set(n.x-a,n.y+u/2),l.set(-1,0);break;case"right":s.set(n.x+c+a,n.y+u/2),l.set(1,0);break}}function projectPointToArc(o,a,n,s,l,c,u,d,h){u-=o,d-=a;var f=Math.sqrt(u*u+d*d);u/=f,d/=f;var p=u*n+o,g=d*n+a;if(Math.abs(s-l)%PI2$2<1e-4)return h[0]=p,h[1]=g,f-n;if(c){var v=s;s=normalizeRadian(l),l=normalizeRadian(v)}else s=normalizeRadian(s),l=normalizeRadian(l);s>l&&(l+=PI2$2);var b=Math.atan2(d,u);if(b<0&&(b+=PI2$2),b>=s&&b<=l||b+PI2$2>=s&&b+PI2$2<=l)return h[0]=p,h[1]=g,f-n;var w=n*Math.cos(s)+o,x=n*Math.sin(s)+a,S=n*Math.cos(l)+o,E=n*Math.sin(l)+a,T=(w-u)*(w-u)+(x-d)*(x-d),C=(S-u)*(S-u)+(E-d)*(E-d);return T<C?(h[0]=w,h[1]=x,Math.sqrt(T)):(h[0]=S,h[1]=E,Math.sqrt(C))}function projectPointToLine(o,a,n,s,l,c,u,d){var h=l-o,f=c-a,p=n-o,g=s-a,v=Math.sqrt(p*p+g*g);p/=v,g/=v;var b=h*p+f*g,w=b/v;d&&(w=Math.min(Math.max(w,0),1)),w*=v;var x=u[0]=o+w*p,S=u[1]=a+w*g;return Math.sqrt((x-l)*(x-l)+(S-c)*(S-c))}function projectPointToRect(o,a,n,s,l,c,u){n<0&&(o=o+n,n=-n),s<0&&(a=a+s,s=-s);var d=o+n,h=a+s,f=u[0]=Math.min(Math.max(l,o),d),p=u[1]=Math.min(Math.max(c,a),h);return Math.sqrt((f-l)*(f-l)+(p-c)*(p-c))}var tmpPt=[];function nearestPointOnRect(o,a,n){var s=projectPointToRect(a.x,a.y,a.width,a.height,o.x,o.y,tmpPt);return n.set(tmpPt[0],tmpPt[1]),s}function nearestPointOnPath(o,a,n){for(var s=0,l=0,c=0,u=0,d,h,f=1/0,p=a.data,g=o.x,v=o.y,b=0;b<p.length;){var w=p[b++];b===1&&(s=p[b],l=p[b+1],c=s,u=l);var x=f;switch(w){case CMD$1.M:c=p[b++],u=p[b++],s=c,l=u;break;case CMD$1.L:x=projectPointToLine(s,l,p[b],p[b+1],g,v,tmpPt,!0),s=p[b++],l=p[b++];break;case CMD$1.C:x=cubicProjectPoint(s,l,p[b++],p[b++],p[b++],p[b++],p[b],p[b+1],g,v,tmpPt),s=p[b++],l=p[b++];break;case CMD$1.Q:x=quadraticProjectPoint(s,l,p[b++],p[b++],p[b],p[b+1],g,v,tmpPt),s=p[b++],l=p[b++];break;case CMD$1.A:var S=p[b++],E=p[b++],T=p[b++],C=p[b++],A=p[b++],R=p[b++];b+=1;var j=!!(1-p[b++]);d=Math.cos(A)*T+S,h=Math.sin(A)*C+E,b<=1&&(c=d,u=h);var D=(g-S)*C/T+S;x=projectPointToArc(S,E,C,A,A+R,j,D,v,tmpPt),s=Math.cos(A+R)*T+S,l=Math.sin(A+R)*C+E;break;case CMD$1.R:c=s=p[b++],u=l=p[b++];var O=p[b++],H=p[b++];x=projectPointToRect(c,u,O,H,g,v,tmpPt);break;case CMD$1.Z:x=projectPointToLine(s,l,c,u,g,v,tmpPt,!0),s=c,l=u;break}x<f&&(f=x,n.set(tmpPt[0],tmpPt[1]))}return f}var pt0=new Point,pt1=new Point,pt2=new Point,dir=new Point,dir2=new Point;function updateLabelLinePoints(o,a){if(o){var n=o.getTextGuideLine(),s=o.getTextContent();if(s&&n){var l=o.textGuideLineConfig||{},c=[[0,0],[0,0],[0,0]],u=l.candidates||DEFAULT_SEARCH_SPACE,d=s.getBoundingRect().clone();d.applyTransform(s.getComputedTransform());var h=1/0,f=l.anchor,p=o.getComputedTransform(),g=p&&invert([],p),v=a.get("length2")||0;f&&pt2.copy(f);for(var b=0;b<u.length;b++){var w=u[b];getCandidateAnchor(w,0,d,pt0,dir),Point.scaleAndAdd(pt1,pt0,dir,v),pt1.transform(g);var x=o.getBoundingRect(),S=f?f.distance(pt1):o instanceof Path?nearestPointOnPath(pt1,o.path,pt2):nearestPointOnRect(pt1,x,pt2);S<h&&(h=S,pt1.transform(p),pt2.transform(p),pt2.toArray(c[0]),pt1.toArray(c[1]),pt0.toArray(c[2]))}limitTurnAngle(c,a.get("minTurnAngle")),n.setShape({points:c})}}}var tmpArr=[],tmpProjPoint=new Point;function limitTurnAngle(o,a){if(a<=180&&a>0){a=a/180*Math.PI,pt0.fromArray(o[0]),pt1.fromArray(o[1]),pt2.fromArray(o[2]),Point.sub(dir,pt0,pt1),Point.sub(dir2,pt2,pt1);var n=dir.len(),s=dir2.len();if(!(n<.001||s<.001)){dir.scale(1/n),dir2.scale(1/s);var l=dir.dot(dir2),c=Math.cos(a);if(c<l){var u=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr),tmpProjPoint.scaleAndAdd(dir2,u/Math.tan(Math.PI-a));var d=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(d))return;d<0?Point.copy(tmpProjPoint,pt1):d>1&&Point.copy(tmpProjPoint,pt2),tmpProjPoint.toArray(o[1])}}}}function limitSurfaceAngle(o,a,n){if(n<=180&&n>0){n=n/180*Math.PI,pt0.fromArray(o[0]),pt1.fromArray(o[1]),pt2.fromArray(o[2]),Point.sub(dir,pt1,pt0),Point.sub(dir2,pt2,pt1);var s=dir.len(),l=dir2.len();if(!(s<.001||l<.001)){dir.scale(1/s),dir2.scale(1/l);var c=dir.dot(a),u=Math.cos(n);if(c<u){var d=projectPointToLine(pt1.x,pt1.y,pt2.x,pt2.y,pt0.x,pt0.y,tmpArr,!1);tmpProjPoint.fromArray(tmpArr);var h=Math.PI/2,f=Math.acos(dir2.dot(a)),p=h+f-n;if(p>=h)Point.copy(tmpProjPoint,pt2);else{tmpProjPoint.scaleAndAdd(dir2,d/Math.tan(Math.PI/2-p));var g=pt2.x!==pt1.x?(tmpProjPoint.x-pt1.x)/(pt2.x-pt1.x):(tmpProjPoint.y-pt1.y)/(pt2.y-pt1.y);if(isNaN(g))return;g<0?Point.copy(tmpProjPoint,pt1):g>1&&Point.copy(tmpProjPoint,pt2)}tmpProjPoint.toArray(o[1])}}}}function setLabelLineState(o,a,n,s){var l=n==="normal",c=l?o:o.ensureState(n);c.ignore=a;var u=s.get("smooth");u&&u===!0&&(u=.3),c.shape=c.shape||{},u>0&&(c.shape.smooth=u);var d=s.getModel("lineStyle").getLineStyle();l?o.useStyle(d):c.style=d}function buildLabelLinePath(o,a){var n=a.smooth,s=a.points;if(s)if(o.moveTo(s[0][0],s[0][1]),n>0&&s.length>=3){var l=dist$2(s[0],s[1]),c=dist$2(s[1],s[2]);if(!l||!c){o.lineTo(s[1][0],s[1][1]),o.lineTo(s[2][0],s[2][1]);return}var u=Math.min(l,c)*n,d=lerp$1([],s[1],s[0],u/l),h=lerp$1([],s[1],s[2],u/c),f=lerp$1([],d,h,.5);o.bezierCurveTo(d[0],d[1],d[0],d[1],f[0],f[1]),o.bezierCurveTo(h[0],h[1],h[0],h[1],s[2][0],s[2][1])}else for(var p=1;p<s.length;p++)o.lineTo(s[p][0],s[p][1])}function setLabelLineStyle(o,a,n){var s=o.getTextGuideLine(),l=o.getTextContent();if(!l){s&&o.removeTextGuideLine();return}for(var c=a.normal,u=c.get("show"),d=l.ignore,h=0;h<DISPLAY_STATES.length;h++){var f=DISPLAY_STATES[h],p=a[f],g=f==="normal";if(p){var v=p.get("show"),b=g?d:retrieve2(l.states[f]&&l.states[f].ignore,d);if(b||!retrieve2(v,u)){var w=g?s:s&&s.states[f];w&&(w.ignore=!0),s&&setLabelLineState(s,!0,f,p);continue}s||(s=new Polyline$1,o.setTextGuideLine(s),!g&&(d||!u)&&setLabelLineState(s,!0,"normal",a.normal),o.stateProxy&&(s.stateProxy=o.stateProxy)),setLabelLineState(s,!1,f,p)}}if(s){defaults(s.style,n),s.style.fill=null;var x=c.get("showAbove"),S=o.textGuideLineConfig=o.textGuideLineConfig||{};S.showAbove=x||!1,s.buildPath=buildLabelLinePath}}function getLabelLineStatesModels(o,a){a=a||"labelLine";for(var n={normal:o.getModel(a)},s=0;s<SPECIAL_STATES.length;s++){var l=SPECIAL_STATES[s];n[l]=o.getModel([l,a])}return n}function prepareLayoutList(o){for(var a=[],n=0;n<o.length;n++){var s=o[n];if(!s.defaultAttr.ignore){var l=s.label,c=l.getComputedTransform(),u=l.getBoundingRect(),d=!c||c[1]<1e-5&&c[2]<1e-5,h=l.style.margin||0,f=u.clone();f.applyTransform(c),f.x-=h/2,f.y-=h/2,f.width+=h,f.height+=h;var p=d?new OrientedBoundingRect(u,c):null;a.push({label:l,labelLine:s.labelLine,rect:f,localRect:u,obb:p,priority:s.priority,defaultAttr:s.defaultAttr,layoutOption:s.computedLayoutOption,axisAligned:d,transform:c})}}return a}function shiftLayout(o,a,n,s,l,c){var u=o.length;if(u<2)return;o.sort(function(j,D){return j.rect[a]-D.rect[a]});for(var d=0,h,f=!1,p=0;p<u;p++){var g=o[p],v=g.rect;h=v[a]-d,h<0&&(v[a]-=h,g.label[a]-=h,f=!0),d=v[a]+v[n]}var b=o[0],w=o[u-1],x,S;E(),x<0&&A(-x,.8),S<0&&A(S,.8),E(),T(x,S,1),T(S,x,-1),E(),x<0&&R(-x),S<0&&R(S);function E(){x=b.rect[a]-s,S=l-w.rect[a]-w.rect[n]}function T(j,D,O){if(j<0){var H=Math.min(D,-j);if(H>0){C(H*O,0,u);var q=H+j;q<0&&A(-q*O,1)}else A(-j*O,1)}}function C(j,D,O){j!==0&&(f=!0);for(var H=D;H<O;H++){var q=o[H],Y=q.rect;Y[a]+=j,q.label[a]+=j}}function A(j,D){for(var O=[],H=0,q=1;q<u;q++){var Y=o[q-1].rect,te=Math.max(o[q].rect[a]-Y[a]-Y[n],0);O.push(te),H+=te}if(H){var ee=Math.min(Math.abs(j)/H,D);if(j>0)for(var q=0;q<u-1;q++){var re=O[q]*ee;C(re,0,q+1)}else for(var q=u-1;q>0;q--){var re=O[q-1]*ee;C(-re,q,u)}}}function R(j){var D=j<0?-1:1;j=Math.abs(j);for(var O=Math.ceil(j/(u-1)),H=0;H<u-1;H++)if(D>0?C(O,0,H+1):C(-O,u-H-1,u),j-=O,j<=0)return}return f}function shiftLayoutOnX(o,a,n,s){return shiftLayout(o,"x","width",a,n)}function shiftLayoutOnY(o,a,n,s){return shiftLayout(o,"y","height",a,n)}function hideOverlap(o){var a=[];o.sort(function(x,S){return S.priority-x.priority});var n=new BoundingRect(0,0,0,0);function s(x){if(!x.ignore){var S=x.ensureState("emphasis");S.ignore==null&&(S.ignore=!1)}x.ignore=!0}for(var l=0;l<o.length;l++){var c=o[l],u=c.axisAligned,d=c.localRect,h=c.transform,f=c.label,p=c.labelLine;n.copy(c.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var g=c.obb,v=!1,b=0;b<a.length;b++){var w=a[b];if(n.intersect(w.rect)){if(u&&w.axisAligned){v=!0;break}if(w.obb||(w.obb=new OrientedBoundingRect(w.localRect,w.transform)),g||(g=new OrientedBoundingRect(d,h)),g.intersect(w.obb)){v=!0;break}}}v?(s(f),p&&s(p)):(f.attr("ignore",c.defaultAttr.ignore),p&&p.attr("ignore",c.defaultAttr.labelGuideIgnore),a.push(c))}}function cloneArr(o){if(o){for(var a=[],n=0;n<o.length;n++)a.push(o[n].slice());return a}}function prepareLayoutCallbackParams(o,a){var n=o.label,s=a&&a.getTextGuideLine();return{dataIndex:o.dataIndex,dataType:o.dataType,seriesIndex:o.seriesModel.seriesIndex,text:o.label.style.text,rect:o.hostRect,labelRect:o.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:cloneArr(s&&s.shape.points)}}var LABEL_OPTION_TO_STYLE_KEYS=["align","verticalAlign","width","height","fontSize"],dummyTransformable=new Transformable,labelLayoutInnerStore=makeInner(),labelLineAnimationStore=makeInner();function extendWithKeys(o,a,n){for(var s=0;s<n.length;s++){var l=n[s];a[l]!=null&&(o[l]=a[l])}}var LABEL_LAYOUT_PROPS=["x","y","rotation"],LabelManager=function(){function o(){this._labelList=[],this._chartViewList=[]}return o.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},o.prototype._addLabel=function(a,n,s,l,c){var u=l.style,d=l.__hostTarget,h=d.textConfig||{},f=l.getComputedTransform(),p=l.getBoundingRect().plain();BoundingRect.applyTransform(p,p,f),f?dummyTransformable.setLocalTransform(f):(dummyTransformable.x=dummyTransformable.y=dummyTransformable.rotation=dummyTransformable.originX=dummyTransformable.originY=0,dummyTransformable.scaleX=dummyTransformable.scaleY=1),dummyTransformable.rotation=normalizeRadian(dummyTransformable.rotation);var g=l.__hostTarget,v;if(g){v=g.getBoundingRect().plain();var b=g.getComputedTransform();BoundingRect.applyTransform(v,v,b)}var w=v&&g.getTextGuideLine();this._labelList.push({label:l,labelLine:w,seriesModel:s,dataIndex:a,dataType:n,layoutOption:c,computedLayoutOption:null,rect:p,hostRect:v,priority:v?v.width*v.height:0,defaultAttr:{ignore:l.ignore,labelGuideIgnore:w&&w.ignore,x:dummyTransformable.x,y:dummyTransformable.y,scaleX:dummyTransformable.scaleX,scaleY:dummyTransformable.scaleY,rotation:dummyTransformable.rotation,style:{x:u.x,y:u.y,align:u.align,verticalAlign:u.verticalAlign,width:u.width,height:u.height,fontSize:u.fontSize},cursor:l.cursor,attachedPos:h.position,attachedRot:h.rotation}})},o.prototype.addLabelsOfSeries=function(a){var n=this;this._chartViewList.push(a);var s=a.__model,l=s.get("labelLayout");(isFunction$1(l)||keys$1(l).length)&&a.group.traverse(function(c){if(c.ignore)return!0;var u=c.getTextContent(),d=getECData(c);u&&!u.disableLabelLayout&&n._addLabel(d.dataIndex,d.dataType,s,u,l)})},o.prototype.updateLayoutConfig=function(a){var n=a.getWidth(),s=a.getHeight();function l(C,A){return function(){updateLabelLinePoints(C,A)}}for(var c=0;c<this._labelList.length;c++){var u=this._labelList[c],d=u.label,h=d.__hostTarget,f=u.defaultAttr,p=void 0;isFunction$1(u.layoutOption)?p=u.layoutOption(prepareLayoutCallbackParams(u,h)):p=u.layoutOption,p=p||{},u.computedLayoutOption=p;var g=Math.PI/180;h&&h.setTextConfig({local:!1,position:p.x!=null||p.y!=null?null:f.attachedPos,rotation:p.rotate!=null?p.rotate*g:f.attachedRot,offset:[p.dx||0,p.dy||0]});var v=!1;if(p.x!=null?(d.x=parsePercent(p.x,n),d.setStyle("x",0),v=!0):(d.x=f.x,d.setStyle("x",f.style.x)),p.y!=null?(d.y=parsePercent(p.y,s),d.setStyle("y",0),v=!0):(d.y=f.y,d.setStyle("y",f.style.y)),p.labelLinePoints){var b=h.getTextGuideLine();b&&(b.setShape({points:p.labelLinePoints}),v=!1)}var w=labelLayoutInnerStore(d);w.needsUpdateLabelLine=v,d.rotation=p.rotate!=null?p.rotate*g:f.rotation,d.scaleX=f.scaleX,d.scaleY=f.scaleY;for(var x=0;x<LABEL_OPTION_TO_STYLE_KEYS.length;x++){var S=LABEL_OPTION_TO_STYLE_KEYS[x];d.setStyle(S,p[S]!=null?p[S]:f.style[S])}if(p.draggable){if(d.draggable=!0,d.cursor="move",h){var E=u.seriesModel;if(u.dataIndex!=null){var T=u.seriesModel.getData(u.dataType);E=T.getItemModel(u.dataIndex)}d.on("drag",l(h,E.getModel("labelLine")))}}else d.off("drag"),d.cursor=f.cursor}},o.prototype.layout=function(a){var n=a.getWidth(),s=a.getHeight(),l=prepareLayoutList(this._labelList),c=filter(l,function(h){return h.layoutOption.moveOverlap==="shiftX"}),u=filter(l,function(h){return h.layoutOption.moveOverlap==="shiftY"});shiftLayoutOnX(c,0,n),shiftLayoutOnY(u,0,s);var d=filter(l,function(h){return h.layoutOption.hideOverlap});hideOverlap(d)},o.prototype.processLabelsOverall=function(){var a=this;each$f(this._chartViewList,function(n){var s=n.__model,l=n.ignoreLabelLineUpdate,c=s.isAnimationEnabled();n.group.traverse(function(u){if(u.ignore&&!u.forceLabelAnimation)return!0;var d=!l,h=u.getTextContent();!d&&h&&(d=labelLayoutInnerStore(h).needsUpdateLabelLine),d&&a._updateLabelLine(u,s),c&&a._animateLabels(u,s)})})},o.prototype._updateLabelLine=function(a,n){var s=a.getTextContent(),l=getECData(a),c=l.dataIndex;if(s&&c!=null){var u=n.getData(l.dataType),d=u.getItemModel(c),h={},f=u.getItemVisual(c,"style");if(f){var p=u.getVisual("drawType");h.stroke=f[p]}var g=d.getModel("labelLine");setLabelLineStyle(a,getLabelLineStatesModels(d),h),updateLabelLinePoints(a,g)}},o.prototype._animateLabels=function(a,n){var s=a.getTextContent(),l=a.getTextGuideLine();if(s&&(a.forceLabelAnimation||!s.ignore&&!s.invisible&&!a.disableLabelAnimation&&!isElementRemoved(a))){var c=labelLayoutInnerStore(s),u=c.oldLayout,d=getECData(a),h=d.dataIndex,f={x:s.x,y:s.y,rotation:s.rotation},p=n.getData(d.dataType);if(u){s.attr(u);var v=a.prevStates;v&&(indexOf(v,"select")>=0&&s.attr(c.oldLayoutSelect),indexOf(v,"emphasis")>=0&&s.attr(c.oldLayoutEmphasis)),updateProps$1(s,f,n,h)}else if(s.attr(f),!labelInner(s).valueAnimation){var g=retrieve2(s.style.opacity,1);s.style.opacity=0,initProps(s,{style:{opacity:g}},n,h)}if(c.oldLayout=f,s.states.select){var b=c.oldLayoutSelect={};extendWithKeys(b,f,LABEL_LAYOUT_PROPS),extendWithKeys(b,s.states.select,LABEL_LAYOUT_PROPS)}if(s.states.emphasis){var w=c.oldLayoutEmphasis={};extendWithKeys(w,f,LABEL_LAYOUT_PROPS),extendWithKeys(w,s.states.emphasis,LABEL_LAYOUT_PROPS)}animateLabelValue(s,h,p,n,n)}if(l&&!l.ignore&&!l.invisible){var c=labelLineAnimationStore(l),u=c.oldLayout,x={points:l.shape.points};u?(l.attr({shape:u}),updateProps$1(l,{shape:x},n)):(l.setShape(x),l.style.strokePercent=0,initProps(l,{style:{strokePercent:1}},n)),c.oldLayout=x}},o}(),getLabelManager=makeInner();function installLabelLayout(o){o.registerUpdateLifecycle("series:beforeupdate",function(a,n,s){var l=getLabelManager(n).labelManager;l||(l=getLabelManager(n).labelManager=new LabelManager),l.clearLabels()}),o.registerUpdateLifecycle("series:layoutlabels",function(a,n,s){var l=getLabelManager(n).labelManager;s.updatedSeries.forEach(function(c){l.addLabelsOfSeries(n.getViewOfSeriesModel(c))}),l.updateLayoutConfig(n),l.layout(n),l.processLabelsOverall()})}var mathSin=Math.sin,mathCos=Math.cos,PI$4=Math.PI,PI2$1=Math.PI*2,degree=180/PI$4,SVGPathRebuilder=function(){function o(){}return o.prototype.reset=function(a){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,a||4)},o.prototype.moveTo=function(a,n){this._add("M",a,n)},o.prototype.lineTo=function(a,n){this._add("L",a,n)},o.prototype.bezierCurveTo=function(a,n,s,l,c,u){this._add("C",a,n,s,l,c,u)},o.prototype.quadraticCurveTo=function(a,n,s,l){this._add("Q",a,n,s,l)},o.prototype.arc=function(a,n,s,l,c,u){this.ellipse(a,n,s,s,0,l,c,u)},o.prototype.ellipse=function(a,n,s,l,c,u,d,h){var f=d-u,p=!h,g=Math.abs(f),v=isAroundZero(g-PI2$1)||(p?f>=PI2$1:-f>=PI2$1),b=f>0?f%PI2$1:f%PI2$1+PI2$1,w=!1;v?w=!0:isAroundZero(g)?w=!1:w=b>=PI$4==!!p;var x=a+s*mathCos(u),S=n+l*mathSin(u);this._start&&this._add("M",x,S);var E=Math.round(c*degree);if(v){var T=1/this._p,C=(p?1:-1)*(PI2$1-T);this._add("A",s,l,E,1,+p,a+s*mathCos(u+C),n+l*mathSin(u+C)),T>.01&&this._add("A",s,l,E,0,+p,x,S)}else{var A=a+s*mathCos(d),R=n+l*mathSin(d);this._add("A",s,l,E,+w,+p,A,R)}},o.prototype.rect=function(a,n,s,l){this._add("M",a,n),this._add("l",s,0),this._add("l",0,l),this._add("l",-s,0),this._add("Z")},o.prototype.closePath=function(){this._d.length>0&&this._add("Z")},o.prototype._add=function(a,n,s,l,c,u,d,h,f){for(var p=[],g=this._p,v=1;v<arguments.length;v++){var b=arguments[v];if(isNaN(b)){this._invalid=!0;return}p.push(Math.round(b*g)/g)}this._d.push(a+p.join(" ")),this._start=a==="Z"},o.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},o.prototype.getStr=function(){return this._str},o}(),NONE="none",mathRound=Math.round;function pathHasFill(o){var a=o.fill;return a!=null&&a!==NONE}function pathHasStroke(o){var a=o.stroke;return a!=null&&a!==NONE}var strokeProps=["lineCap","miterLimit","lineJoin"],svgStrokeProps=map$1(strokeProps,function(o){return"stroke-"+o.toLowerCase()});function mapStyleToAttrs(o,a,n,s){var l=a.opacity==null?1:a.opacity;if(n instanceof ZRImage){o("opacity",l);return}if(pathHasFill(a)){var c=normalizeColor(a.fill);o("fill",c.color);var u=a.fillOpacity!=null?a.fillOpacity*c.opacity*l:c.opacity*l;u<1&&o("fill-opacity",u)}else o("fill",NONE);if(pathHasStroke(a)){var d=normalizeColor(a.stroke);o("stroke",d.color);var h=a.strokeNoScale?n.getLineScale():1,f=h?(a.lineWidth||0)/h:0,p=a.strokeOpacity!=null?a.strokeOpacity*d.opacity*l:d.opacity*l,g=a.strokeFirst;if(f!==1&&o("stroke-width",f),g&&o("paint-order",g?"stroke":"fill"),p<1&&o("stroke-opacity",p),a.lineDash){var v=getLineDash(n),b=v[0],w=v[1];b&&(w=mathRound(w||0),o("stroke-dasharray",b.join(",")),(w||s)&&o("stroke-dashoffset",w))}for(var x=0;x<strokeProps.length;x++){var S=strokeProps[x];if(a[S]!==DEFAULT_PATH_STYLE[S]){var E=a[S]||DEFAULT_PATH_STYLE[S];E&&o(svgStrokeProps[x],E)}}}}var SVGNS="http://www.w3.org/2000/svg",XLINKNS="http://www.w3.org/1999/xlink",XMLNS$1="http://www.w3.org/2000/xmlns/",XML_NAMESPACE="http://www.w3.org/XML/1998/namespace",META_DATA_PREFIX="ecmeta_";function createElement(o){return document.createElementNS(SVGNS,o)}function createVNode(o,a,n,s,l){return{tag:o,attrs:n||{},children:s,text:l,key:a}}function createElementOpen(o,a){var n=[];if(a)for(var s in a){var l=a[s],c=s;l!==!1&&(l!==!0&&l!=null&&(c+='="'+l+'"'),n.push(c))}return"<"+o+" "+n.join(" ")+">"}function createElementClose(o){return"</"+o+">"}function vNodeToString(o,a){a=a||{};var n=a.newline?`
`:"";function s(l){var c=l.children,u=l.tag,d=l.attrs,h=l.text;return createElementOpen(u,d)+(u!=="style"?encodeHTML(h):h||"")+(c?""+n+map$1(c,function(f){return s(f)}).join(n)+n:"")+createElementClose(u)}return s(o)}function getCssString(o,a,n){n=n||{};var s=n.newline?`
`:"",l=" {"+s,c=s+"}",u=map$1(keys$1(o),function(h){return h+l+map$1(keys$1(o[h]),function(f){return f+":"+o[h][f]+";"}).join(s)+c}).join(s),d=map$1(keys$1(a),function(h){return"@keyframes "+h+l+map$1(keys$1(a[h]),function(f){return f+l+map$1(keys$1(a[h][f]),function(p){var g=a[h][f][p];return p==="d"&&(g='path("'+g+'")'),p+":"+g+";"}).join(s)+c}).join(s)+c}).join(s);return!u&&!d?"":["<![CDATA[",u,d,"]]>"].join(s)}function createBrushScope(o){return{zrId:o,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function createSVGVNode(o,a,n,s){return createVNode("svg","root",{width:o,height:a,xmlns:SVGNS,"xmlns:xlink":XLINKNS,version:"1.1",baseProfile:"full",viewBox:s?"0 0 "+o+" "+a:!1},n)}var cssClassIdx=0;function getClassId(){return cssClassIdx++}var EASING_MAP={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},transformOriginKey="transform-origin";function buildPathString(o,a,n){var s=extend({},o.shape);extend(s,a),o.buildPath(n,s);var l=new SVGPathRebuilder;return l.reset(getPathPrecision(o)),n.rebuildPath(l,1),l.generateStr(),l.getStr()}function setTransformOrigin(o,a){var n=a.originX,s=a.originY;(n||s)&&(o[transformOriginKey]=n+"px "+s+"px")}var ANIMATE_STYLE_MAP={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function addAnimation(o,a){var n=a.zrId+"-ani-"+a.cssAnimIdx++;return a.cssAnims[n]=o,n}function createCompoundPathCSSAnimation(o,a,n){var s=o.shape.paths,l={},c,u;if(each$f(s,function(h){var f=createBrushScope(n.zrId);f.animation=!0,createCSSAnimation(h,{},f,!0);var p=f.cssAnims,g=f.cssNodes,v=keys$1(p),b=v.length;if(b){u=v[b-1];var w=p[u];for(var x in w){var S=w[x];l[x]=l[x]||{d:""},l[x].d+=S.d||""}for(var E in g){var T=g[E].animation;T.indexOf(u)>=0&&(c=T)}}}),!!c){a.d=!1;var d=addAnimation(l,n);return c.replace(u,d)}}function getEasingFunc(o){return isString$2(o)?EASING_MAP[o]?"cubic-bezier("+EASING_MAP[o]+")":createCubicEasingFunc(o)?o:"":""}function createCSSAnimation(o,a,n,s){var l=o.animators,c=l.length,u=[];if(o instanceof CompoundPath){var d=createCompoundPathCSSAnimation(o,a,n);if(d)u.push(d);else if(!c)return}else if(!c)return;for(var h={},f=0;f<c;f++){var p=l[f],g=[p.getMaxTime()/1e3+"s"],v=getEasingFunc(p.getClip().easing),b=p.getDelay();v?g.push(v):g.push("linear"),b&&g.push(b/1e3+"s"),p.getLoop()&&g.push("infinite");var w=g.join(" ");h[w]=h[w]||[w,[]],h[w][1].push(p)}function x(T){var C=T[1],A=C.length,R={},j={},D={},O="animation-timing-function";function H(we,Se,xe){for(var ke=we.getTracks(),Ie=we.getMaxTime(),He=0;He<ke.length;He++){var Le=ke[He];if(Le.needsAnimate()){var De=Le.keyframes,Ee=Le.propName;if(xe&&(Ee=xe(Ee)),Ee)for(var oe=0;oe<De.length;oe++){var he=De[oe],Me=Math.round(he.time/Ie*100)+"%",fe=getEasingFunc(he.easing),Pe=he.rawValue;(isString$2(Pe)||isNumber(Pe))&&(Se[Me]=Se[Me]||{},Se[Me][Ee]=he.rawValue,fe&&(Se[Me][O]=fe))}}}}for(var q=0;q<A;q++){var Y=C[q],te=Y.targetName;te?te==="shape"&&H(Y,j):!s&&H(Y,R)}for(var ee in R){var re={};copyTransform(re,o),extend(re,R[ee]);var ne=getSRTTransformString(re),ce=R[ee][O];D[ee]=ne?{transform:ne}:{},setTransformOrigin(D[ee],re),ce&&(D[ee][O]=ce)}var ve,be=!0;for(var ee in j){D[ee]=D[ee]||{};var me=!ve,ce=j[ee][O];me&&(ve=new PathProxy);var ae=ve.len();ve.reset(),D[ee].d=buildPathString(o,j[ee],ve);var pe=ve.len();if(!me&&ae!==pe){be=!1;break}ce&&(D[ee][O]=ce)}if(!be)for(var ee in D)delete D[ee].d;if(!s)for(var q=0;q<A;q++){var Y=C[q],te=Y.targetName;te==="style"&&H(Y,D,function(ke){return ANIMATE_STYLE_MAP[ke]})}for(var ie=keys$1(D),se=!0,de,q=1;q<ie.length;q++){var le=ie[q-1],ge=ie[q];if(D[le][transformOriginKey]!==D[ge][transformOriginKey]){se=!1;break}de=D[le][transformOriginKey]}if(se&&de){for(var ee in D)D[ee][transformOriginKey]&&delete D[ee][transformOriginKey];a[transformOriginKey]=de}if(filter(ie,function(we){return keys$1(D[we]).length>0}).length){var Re=addAnimation(D,n);return Re+" "+T[0]+" both"}}for(var S in h){var d=x(h[S]);d&&u.push(d)}if(u.length){var E=n.zrId+"-cls-"+getClassId();n.cssNodes["."+E]={animation:u.join(",")},a.class=E}}function createCSSEmphasis(o,a,n){if(!o.ignore)if(o.isSilent()){var s={"pointer-events":"none"};setClassAttribute(s,a,n)}else{var l=o.states.emphasis&&o.states.emphasis.style?o.states.emphasis.style:{},c=l.fill;if(!c){var u=o.style&&o.style.fill,d=o.states.select&&o.states.select.style&&o.states.select.style.fill,h=o.currentStates.indexOf("select")>=0&&d||u;h&&(c=liftColor(h))}var f=l.lineWidth;if(f){var p=!l.strokeNoScale&&o.transform?o.transform[0]:1;f=f/p}var s={cursor:"pointer"};c&&(s.fill=c),l.stroke&&(s.stroke=l.stroke),f&&(s["stroke-width"]=f),setClassAttribute(s,a,n)}}function setClassAttribute(o,a,n,s){var l=JSON.stringify(o),c=n.cssStyleCache[l];c||(c=n.zrId+"-cls-"+getClassId(),n.cssStyleCache[l]=c,n.cssNodes["."+c+":hover"]=o),a.class=a.class?a.class+" "+c:c}var round$1=Math.round;function isImageLike(o){return o&&isString$2(o.src)}function isCanvasLike(o){return o&&isFunction$1(o.toDataURL)}function setStyleAttrs(o,a,n,s){mapStyleToAttrs(function(l,c){var u=l==="fill"||l==="stroke";u&&isGradient(c)?setGradient(a,o,l,s):u&&isPattern(c)?setPattern(n,o,l,s):o[l]=c,u&&s.ssr&&c==="none"&&(o["pointer-events"]="visible")},a,n,!1),setShadow(n,o,s)}function setMetaData(o,a){var n=getElementSSRData(a);n&&(n.each(function(s,l){s!=null&&(o[(META_DATA_PREFIX+l).toLowerCase()]=s+"")}),a.isSilent()&&(o[META_DATA_PREFIX+"silent"]="true"))}function noRotateScale(o){return isAroundZero(o[0]-1)&&isAroundZero(o[1])&&isAroundZero(o[2])&&isAroundZero(o[3]-1)}function noTranslate(o){return isAroundZero(o[4])&&isAroundZero(o[5])}function setTransform(o,a,n){if(a&&!(noTranslate(a)&&noRotateScale(a))){var s=1e4;o.transform=noRotateScale(a)?"translate("+round$1(a[4]*s)/s+" "+round$1(a[5]*s)/s+")":getMatrixStr(a)}}function convertPolyShape(o,a,n){for(var s=o.points,l=[],c=0;c<s.length;c++)l.push(round$1(s[c][0]*n)/n),l.push(round$1(s[c][1]*n)/n);a.points=l.join(" ")}function validatePolyShape(o){return!o.smooth}function createAttrsConvert(o){var a=map$1(o,function(n){return typeof n=="string"?[n,n]:n});return function(n,s,l){for(var c=0;c<a.length;c++){var u=a[c],d=n[u[0]];d!=null&&(s[u[1]]=round$1(d*l)/l)}}}var builtinShapesDef={circle:[createAttrsConvert(["cx","cy","r"])],polyline:[convertPolyShape,validatePolyShape],polygon:[convertPolyShape,validatePolyShape]};function hasShapeAnimation(o){for(var a=o.animators,n=0;n<a.length;n++)if(a[n].targetName==="shape")return!0;return!1}function brushSVGPath(o,a){var n=o.style,s=o.shape,l=builtinShapesDef[o.type],c={},u=a.animation,d="path",h=o.style.strokePercent,f=a.compress&&getPathPrecision(o)||4;if(l&&!a.willUpdate&&!(l[1]&&!l[1](s))&&!(u&&hasShapeAnimation(o))&&!(h<1)){d=o.type;var p=Math.pow(10,f);l[0](s,c,p)}else{var g=!o.path||o.shapeChanged();o.path||o.createPathProxy();var v=o.path;g&&(v.beginPath(),o.buildPath(v,o.shape),o.pathUpdated());var b=v.getVersion(),w=o,x=w.__svgPathBuilder;(w.__svgPathVersion!==b||!x||h!==w.__svgPathStrokePercent)&&(x||(x=w.__svgPathBuilder=new SVGPathRebuilder),x.reset(f),v.rebuildPath(x,h),x.generateStr(),w.__svgPathVersion=b,w.__svgPathStrokePercent=h),c.d=x.getStr()}return setTransform(c,o.transform),setStyleAttrs(c,n,o,a),setMetaData(c,o),a.animation&&createCSSAnimation(o,c,a),a.emphasis&&createCSSEmphasis(o,c,a),createVNode(d,o.id+"",c)}function brushSVGImage(o,a){var n=o.style,s=n.image;if(s&&!isString$2(s)&&(isImageLike(s)?s=s.src:isCanvasLike(s)&&(s=s.toDataURL())),!!s){var l=n.x||0,c=n.y||0,u=n.width,d=n.height,h={href:s,width:u,height:d};return l&&(h.x=l),c&&(h.y=c),setTransform(h,o.transform),setStyleAttrs(h,n,o,a),setMetaData(h,o),a.animation&&createCSSAnimation(o,h,a),createVNode("image",o.id+"",h)}}function brushSVGTSpan(o,a){var n=o.style,s=n.text;if(s!=null&&(s+=""),!(!s||isNaN(n.x)||isNaN(n.y))){var l=n.font||DEFAULT_FONT,c=n.x||0,u=adjustTextY$1(n.y||0,getLineHeight(l),n.textBaseline),d=TEXT_ALIGN_TO_ANCHOR[n.textAlign]||n.textAlign,h={"dominant-baseline":"central","text-anchor":d};if(hasSeparateFont(n)){var f="",p=n.fontStyle,g=parseFontSize(n.fontSize);if(!parseFloat(g))return;var v=n.fontFamily||DEFAULT_FONT_FAMILY,b=n.fontWeight;f+="font-size:"+g+";font-family:"+v+";",p&&p!=="normal"&&(f+="font-style:"+p+";"),b&&b!=="normal"&&(f+="font-weight:"+b+";"),h.style=f}else h.style="font: "+l;return s.match(/\s/)&&(h["xml:space"]="preserve"),c&&(h.x=c),u&&(h.y=u),setTransform(h,o.transform),setStyleAttrs(h,n,o,a),setMetaData(h,o),a.animation&&createCSSAnimation(o,h,a),createVNode("text",o.id+"",h,void 0,s)}}function brush(o,a){if(o instanceof Path)return brushSVGPath(o,a);if(o instanceof ZRImage)return brushSVGImage(o,a);if(o instanceof TSpan)return brushSVGTSpan(o,a)}function setShadow(o,a,n){var s=o.style;if(hasShadow(s)){var l=getShadowKey(o),c=n.shadowCache,u=c[l];if(!u){var d=o.getGlobalScale(),h=d[0],f=d[1];if(!h||!f)return;var p=s.shadowOffsetX||0,g=s.shadowOffsetY||0,v=s.shadowBlur,b=normalizeColor(s.shadowColor),w=b.opacity,x=b.color,S=v/2/h,E=v/2/f,T=S+" "+E;u=n.zrId+"-s"+n.shadowIdx++,n.defs[u]=createVNode("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[createVNode("feDropShadow","",{dx:p/h,dy:g/f,stdDeviation:T,"flood-color":x,"flood-opacity":w})]),c[l]=u}a.filter=getIdURL(u)}}function setGradient(o,a,n,s){var l=o[n],c,u={gradientUnits:l.global?"userSpaceOnUse":"objectBoundingBox"};if(isLinearGradient(l))c="linearGradient",u.x1=l.x,u.y1=l.y,u.x2=l.x2,u.y2=l.y2;else if(isRadialGradient(l))c="radialGradient",u.cx=retrieve2(l.x,.5),u.cy=retrieve2(l.y,.5),u.r=retrieve2(l.r,.5);else{process.env.NODE_ENV!=="production"&&logError("Illegal gradient type.");return}for(var d=l.colorStops,h=[],f=0,p=d.length;f<p;++f){var g=round4(d[f].offset)*100+"%",v=d[f].color,b=normalizeColor(v),w=b.color,x=b.opacity,S={offset:g};S["stop-color"]=w,x<1&&(S["stop-opacity"]=x),h.push(createVNode("stop",f+"",S))}var E=createVNode(c,"",u,h),T=vNodeToString(E),C=s.gradientCache,A=C[T];A||(A=s.zrId+"-g"+s.gradientIdx++,C[T]=A,u.id=A,s.defs[A]=createVNode(c,A,u,h)),a[n]=getIdURL(A)}function setPattern(o,a,n,s){var l=o.style[n],c=o.getBoundingRect(),u={},d=l.repeat,h=d==="no-repeat",f=d==="repeat-x",p=d==="repeat-y",g;if(isImagePattern(l)){var v=l.imageWidth,b=l.imageHeight,w=void 0,x=l.image;if(isString$2(x)?w=x:isImageLike(x)?w=x.src:isCanvasLike(x)&&(w=x.toDataURL()),typeof Image>"u"){var S="Image width/height must been given explictly in svg-ssr renderer.";assert(v,S),assert(b,S)}else if(v==null||b==null){var E=function(q,Y){if(q){var te=q.elm,ee=v||Y.width,re=b||Y.height;q.tag==="pattern"&&(f?(re=1,ee/=c.width):p&&(ee=1,re/=c.height)),q.attrs.width=ee,q.attrs.height=re,te&&(te.setAttribute("width",ee),te.setAttribute("height",re))}},T=createOrUpdateImage(w,null,o,function(q){h||E(j,q),E(g,q)});T&&T.width&&T.height&&(v=v||T.width,b=b||T.height)}g=createVNode("image","img",{href:w,width:v,height:b}),u.width=v,u.height=b}else l.svgElement&&(g=clone$4(l.svgElement),u.width=l.svgWidth,u.height=l.svgHeight);if(g){var C,A;h?C=A=1:f?(A=1,C=u.width/c.width):p?(C=1,A=u.height/c.height):u.patternUnits="userSpaceOnUse",C!=null&&!isNaN(C)&&(u.width=C),A!=null&&!isNaN(A)&&(u.height=A);var R=getSRTTransformString(l);R&&(u.patternTransform=R);var j=createVNode("pattern","",u,[g]),D=vNodeToString(j),O=s.patternCache,H=O[D];H||(H=s.zrId+"-p"+s.patternIdx++,O[D]=H,u.id=H,j=s.defs[H]=createVNode("pattern",H,u,[g])),a[n]=getIdURL(H)}}function setClipPath(o,a,n){var s=n.clipPathCache,l=n.defs,c=s[o.id];if(!c){c=n.zrId+"-c"+n.clipPathIdx++;var u={id:c};s[o.id]=c,l[c]=createVNode("clipPath",c,u,[brushSVGPath(o,n)])}a["clip-path"]=getIdURL(c)}function createTextNode(o){return document.createTextNode(o)}function insertBefore(o,a,n){o.insertBefore(a,n)}function removeChild(o,a){o.removeChild(a)}function appendChild(o,a){o.appendChild(a)}function parentNode(o){return o.parentNode}function nextSibling(o){return o.nextSibling}function setTextContent(o,a){o.textContent=a}var colonChar=58,xChar=120,emptyNode=createVNode("","");function isUndef(o){return o===void 0}function isDef(o){return o!==void 0}function createKeyToOldIdx(o,a,n){for(var s={},l=a;l<=n;++l){var c=o[l].key;c!==void 0&&(process.env.NODE_ENV!=="production"&&s[c]!=null&&console.error("Duplicate key "+c),s[c]=l)}return s}function sameVnode(o,a){var n=o.key===a.key,s=o.tag===a.tag;return s&&n}function createElm(o){var a,n=o.children,s=o.tag;if(isDef(s)){var l=o.elm=createElement(s);if(updateAttrs(emptyNode,o),isArray$1(n))for(a=0;a<n.length;++a){var c=n[a];c!=null&&appendChild(l,createElm(c))}else isDef(o.text)&&!isObject$3(o.text)&&appendChild(l,createTextNode(o.text))}else o.elm=createTextNode(o.text);return o.elm}function addVnodes(o,a,n,s,l){for(;s<=l;++s){var c=n[s];c!=null&&insertBefore(o,createElm(c),a)}}function removeVnodes(o,a,n,s){for(;n<=s;++n){var l=a[n];if(l!=null)if(isDef(l.tag)){var c=parentNode(l.elm);removeChild(c,l.elm)}else removeChild(o,l.elm)}}function updateAttrs(o,a){var n,s=a.elm,l=o&&o.attrs||{},c=a.attrs||{};if(l!==c){for(n in c){var u=c[n],d=l[n];d!==u&&(u===!0?s.setAttribute(n,""):u===!1?s.removeAttribute(n):n==="style"?s.style.cssText=u:n.charCodeAt(0)!==xChar?s.setAttribute(n,u):n==="xmlns:xlink"||n==="xmlns"?s.setAttributeNS(XMLNS$1,n,u):n.charCodeAt(3)===colonChar?s.setAttributeNS(XML_NAMESPACE,n,u):n.charCodeAt(5)===colonChar?s.setAttributeNS(XLINKNS,n,u):s.setAttribute(n,u))}for(n in l)n in c||s.removeAttribute(n)}}function updateChildren(o,a,n){for(var s=0,l=0,c=a.length-1,u=a[0],d=a[c],h=n.length-1,f=n[0],p=n[h],g,v,b,w;s<=c&&l<=h;)u==null?u=a[++s]:d==null?d=a[--c]:f==null?f=n[++l]:p==null?p=n[--h]:sameVnode(u,f)?(patchVnode(u,f),u=a[++s],f=n[++l]):sameVnode(d,p)?(patchVnode(d,p),d=a[--c],p=n[--h]):sameVnode(u,p)?(patchVnode(u,p),insertBefore(o,u.elm,nextSibling(d.elm)),u=a[++s],p=n[--h]):sameVnode(d,f)?(patchVnode(d,f),insertBefore(o,d.elm,u.elm),d=a[--c],f=n[++l]):(isUndef(g)&&(g=createKeyToOldIdx(a,s,c)),v=g[f.key],isUndef(v)?insertBefore(o,createElm(f),u.elm):(b=a[v],b.tag!==f.tag?insertBefore(o,createElm(f),u.elm):(patchVnode(b,f),a[v]=void 0,insertBefore(o,b.elm,u.elm))),f=n[++l]);(s<=c||l<=h)&&(s>c?(w=n[h+1]==null?null:n[h+1].elm,addVnodes(o,w,n,l,h)):removeVnodes(o,a,s,c))}function patchVnode(o,a){var n=a.elm=o.elm,s=o.children,l=a.children;o!==a&&(updateAttrs(o,a),isUndef(a.text)?isDef(s)&&isDef(l)?s!==l&&updateChildren(n,s,l):isDef(l)?(isDef(o.text)&&setTextContent(n,""),addVnodes(n,null,l,0,l.length-1)):isDef(s)?removeVnodes(n,s,0,s.length-1):isDef(o.text)&&setTextContent(n,""):o.text!==a.text&&(isDef(s)&&removeVnodes(n,s,0,s.length-1),setTextContent(n,a.text)))}function patch(o,a){if(sameVnode(o,a))patchVnode(o,a);else{var n=o.elm,s=parentNode(n);createElm(a),s!==null&&(insertBefore(s,a.elm,nextSibling(n)),removeVnodes(s,[o],0,0))}return a}var svgId=0,SVGPainter=function(){function o(a,n,s){if(this.type="svg",this.refreshHover=createMethodNotSupport("refreshHover"),this.configLayer=createMethodNotSupport("configLayer"),this.storage=n,this._opts=s=extend({},s),this.root=a,this._id="zr"+svgId++,this._oldVNode=createSVGVNode(s.width,s.height),a&&!s.ssr){var l=this._viewport=document.createElement("div");l.style.cssText="position:relative;overflow:hidden";var c=this._svgDom=this._oldVNode.elm=createElement("svg");updateAttrs(null,this._oldVNode),l.appendChild(c),a.appendChild(l)}this.resize(s.width,s.height)}return o.prototype.getType=function(){return this.type},o.prototype.getViewportRoot=function(){return this._viewport},o.prototype.getViewportRootOffset=function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},o.prototype.getSvgDom=function(){return this._svgDom},o.prototype.refresh=function(){if(this.root){var a=this.renderToVNode({willUpdate:!0});a.attrs.style="position:absolute;left:0;top:0;user-select:none",patch(this._oldVNode,a),this._oldVNode=a}},o.prototype.renderOneToVNode=function(a){return brush(a,createBrushScope(this._id))},o.prototype.renderToVNode=function(a){a=a||{};var n=this.storage.getDisplayList(!0),s=this._width,l=this._height,c=createBrushScope(this._id);c.animation=a.animation,c.willUpdate=a.willUpdate,c.compress=a.compress,c.emphasis=a.emphasis,c.ssr=this._opts.ssr;var u=[],d=this._bgVNode=createBackgroundVNode(s,l,this._backgroundColor,c);d&&u.push(d);var h=a.compress?null:this._mainVNode=createVNode("g","main",{},[]);this._paintList(n,c,h?h.children:u),h&&u.push(h);var f=map$1(keys$1(c.defs),function(v){return c.defs[v]});if(f.length&&u.push(createVNode("defs","defs",{},f)),a.animation){var p=getCssString(c.cssNodes,c.cssAnims,{newline:!0});if(p){var g=createVNode("style","stl",{},[],p);u.push(g)}}return createSVGVNode(s,l,u,a.useViewBox)},o.prototype.renderToString=function(a){return a=a||{},vNodeToString(this.renderToVNode({animation:retrieve2(a.cssAnimation,!0),emphasis:retrieve2(a.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:retrieve2(a.useViewBox,!0)}),{newline:!0})},o.prototype.setBackgroundColor=function(a){this._backgroundColor=a},o.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},o.prototype._paintList=function(a,n,s){for(var l=a.length,c=[],u=0,d,h,f=0,p=0;p<l;p++){var g=a[p];if(!g.invisible){var v=g.__clipPaths,b=v&&v.length||0,w=h&&h.length||0,x=void 0;for(x=Math.max(b-1,w-1);x>=0&&!(v&&h&&v[x]===h[x]);x--);for(var S=w-1;S>x;S--)u--,d=c[u-1];for(var E=x+1;E<b;E++){var T={};setClipPath(v[E],T,n);var C=createVNode("g","clip-g-"+f++,T,[]);(d?d.children:s).push(C),c[u++]=C,d=C}h=v;var A=brush(g,n);A&&(d?d.children:s).push(A)}}},o.prototype.resize=function(a,n){var s=this._opts,l=this.root,c=this._viewport;if(a!=null&&(s.width=a),n!=null&&(s.height=n),l&&c&&(c.style.display="none",a=getSize$1(l,0,s),n=getSize$1(l,1,s),c.style.display=""),this._width!==a||this._height!==n){if(this._width=a,this._height=n,c){var u=c.style;u.width=a+"px",u.height=n+"px"}if(isPattern(this._backgroundColor))this.refresh();else{var d=this._svgDom;d&&(d.setAttribute("width",a),d.setAttribute("height",n));var h=this._bgVNode&&this._bgVNode.elm;h&&(h.setAttribute("width",a),h.setAttribute("height",n))}}},o.prototype.getWidth=function(){return this._width},o.prototype.getHeight=function(){return this._height},o.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},o.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},o.prototype.toDataURL=function(a){var n=this.renderToString(),s="data:image/svg+xml;";return a?(n=encodeBase64(n),n&&s+"base64,"+n):s+"charset=UTF-8,"+encodeURIComponent(n)},o}();function createMethodNotSupport(o){return function(){process.env.NODE_ENV!=="production"&&logError('In SVG mode painter not support method "'+o+'"')}}function createBackgroundVNode(o,a,n,s){var l;if(n&&n!=="none")if(l=createVNode("rect","bg",{width:o,height:a,x:"0",y:"0"}),isGradient(n))setGradient({fill:n},l.attrs,"fill",s);else if(isPattern(n))setPattern({style:{fill:n},dirty:noop$1,getBoundingRect:function(){return{width:o,height:a}}},l.attrs,"fill",s);else{var c=normalizeColor(n),u=c.color,d=c.opacity;l.attrs.fill=u,d<1&&(l.attrs["fill-opacity"]=d)}return l}function install$S(o){o.registerPainter("svg",SVGPainter)}function createDom(o,a,n){var s=platformApi.createCanvas(),l=a.getWidth(),c=a.getHeight(),u=s.style;return u&&(u.position="absolute",u.left="0",u.top="0",u.width=l+"px",u.height=c+"px",s.setAttribute("data-zr-dom-id",o)),s.width=l*n,s.height=c*n,s}var Layer=function(o){__extends(a,o);function a(n,s,l){var c=o.call(this)||this;c.motionBlur=!1,c.lastFrameAlpha=.7,c.dpr=1,c.virtual=!1,c.config={},c.incremental=!1,c.zlevel=0,c.maxRepaintRectCount=5,c.__dirty=!0,c.__firstTimePaint=!0,c.__used=!1,c.__drawIndex=0,c.__startIndex=0,c.__endIndex=0,c.__prevStartIndex=null,c.__prevEndIndex=null;var u;l=l||devicePixelRatio,typeof n=="string"?u=createDom(n,s,l):isObject$3(n)&&(u=n,n=u.id),c.id=n,c.dom=u;var d=u.style;return d&&(disableUserSelect(u),u.onselectstart=function(){return!1},d.padding="0",d.margin="0",d.borderWidth="0"),c.painter=s,c.dpr=l,c}return a.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},a.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},a.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},a.prototype.setUnpainted=function(){this.__firstTimePaint=!0},a.prototype.createBackBuffer=function(){var n=this.dpr;this.domBack=createDom("back-"+this.id,this.painter,n),this.ctxBack=this.domBack.getContext("2d"),n!==1&&this.ctxBack.scale(n,n)},a.prototype.createRepaintRects=function(n,s,l,c){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var u=[],d=this.maxRepaintRectCount,h=!1,f=new BoundingRect(0,0,0,0);function p(T){if(!(!T.isFinite()||T.isZero()))if(u.length===0){var C=new BoundingRect(0,0,0,0);C.copy(T),u.push(C)}else{for(var A=!1,R=1/0,j=0,D=0;D<u.length;++D){var O=u[D];if(O.intersect(T)){var H=new BoundingRect(0,0,0,0);H.copy(O),H.union(T),u[D]=H,A=!0;break}else if(h){f.copy(T),f.union(O);var q=T.width*T.height,Y=O.width*O.height,te=f.width*f.height,ee=te-q-Y;ee<R&&(R=ee,j=D)}}if(h&&(u[j].union(T),A=!0),!A){var C=new BoundingRect(0,0,0,0);C.copy(T),u.push(C)}h||(h=u.length>=d)}}for(var g=this.__startIndex;g<this.__endIndex;++g){var v=n[g];if(v){var b=v.shouldBePainted(l,c,!0,!0),w=v.__isRendered&&(v.__dirty&REDRAW_BIT||!b)?v.getPrevPaintRect():null;w&&p(w);var x=b&&(v.__dirty&REDRAW_BIT||!v.__isRendered)?v.getPaintRect():null;x&&p(x)}}for(var g=this.__prevStartIndex;g<this.__prevEndIndex;++g){var v=s[g],b=v&&v.shouldBePainted(l,c,!0,!0);if(v&&(!b||!v.__zr)&&v.__isRendered){var w=v.getPrevPaintRect();w&&p(w)}}var S;do{S=!1;for(var g=0;g<u.length;){if(u[g].isZero()){u.splice(g,1);continue}for(var E=g+1;E<u.length;)u[g].intersect(u[E])?(S=!0,u[g].union(u[E]),u.splice(E,1)):E++;g++}}while(S);return this._paintRects=u,u},a.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},a.prototype.resize=function(n,s){var l=this.dpr,c=this.dom,u=c.style,d=this.domBack;u&&(u.width=n+"px",u.height=s+"px"),c.width=n*l,c.height=s*l,d&&(d.width=n*l,d.height=s*l,l!==1&&this.ctxBack.scale(l,l))},a.prototype.clear=function(n,s,l){var c=this.dom,u=this.ctx,d=c.width,h=c.height;s=s||this.clearColor;var f=this.motionBlur&&!n,p=this.lastFrameAlpha,g=this.dpr,v=this;f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(c,0,0,d/g,h/g));var b=this.domBack;function w(x,S,E,T){if(u.clearRect(x,S,E,T),s&&s!=="transparent"){var C=void 0;if(isGradientObject(s)){var A=s.global||s.__width===E&&s.__height===T;C=A&&s.__canvasGradient||getCanvasGradient(u,s,{x:0,y:0,width:E,height:T}),s.__canvasGradient=C,s.__width=E,s.__height=T}else isImagePatternObject(s)&&(s.scaleX=s.scaleX||g,s.scaleY=s.scaleY||g,C=createCanvasPattern(u,s,{dirty:function(){v.setUnpainted(),v.painter.refresh()}}));u.save(),u.fillStyle=C||s,u.fillRect(x,S,E,T),u.restore()}f&&(u.save(),u.globalAlpha=p,u.drawImage(b,x,S,E,T),u.restore())}!l||f?w(0,0,d,h):l.length&&each$f(l,function(x){w(x.x*g,x.y*g,x.width*g,x.height*g)})},a}(Eventful),HOVER_LAYER_ZLEVEL=1e5,CANVAS_ZLEVEL=314159,EL_AFTER_INCREMENTAL_INC=.01,INCREMENTAL_INC=.001;function isLayerValid(o){return o?o.__builtin__?!0:!(typeof o.resize!="function"||typeof o.refresh!="function"):!1}function createRoot(o,a){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+o+"px","height:"+a+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var CanvasPainter=function(){function o(a,n,s,l){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var c=!a.nodeName||a.nodeName.toUpperCase()==="CANVAS";this._opts=s=extend({},s||{}),this.dpr=s.devicePixelRatio||devicePixelRatio,this._singleCanvas=c,this.root=a;var u=a.style;u&&(disableUserSelect(a),a.innerHTML=""),this.storage=n;var d=this._zlevelList;this._prevDisplayList=[];var h=this._layers;if(c){var p=a,g=p.width,v=p.height;s.width!=null&&(g=s.width),s.height!=null&&(v=s.height),this.dpr=s.devicePixelRatio||1,p.width=g*this.dpr,p.height=v*this.dpr,this._width=g,this._height=v;var b=new Layer(p,this,this.dpr);b.__builtin__=!0,b.initContext(),h[CANVAS_ZLEVEL]=b,b.zlevel=CANVAS_ZLEVEL,d.push(CANVAS_ZLEVEL),this._domRoot=a}else{this._width=getSize$1(a,0,s),this._height=getSize$1(a,1,s);var f=this._domRoot=createRoot(this._width,this._height);a.appendChild(f)}}return o.prototype.getType=function(){return"canvas"},o.prototype.isSingleCanvas=function(){return this._singleCanvas},o.prototype.getViewportRoot=function(){return this._domRoot},o.prototype.getViewportRootOffset=function(){var a=this.getViewportRoot();if(a)return{offsetLeft:a.offsetLeft||0,offsetTop:a.offsetTop||0}},o.prototype.refresh=function(a){var n=this.storage.getDisplayList(!0),s=this._prevDisplayList,l=this._zlevelList;this._redrawId=Math.random(),this._paintList(n,s,a,this._redrawId);for(var c=0;c<l.length;c++){var u=l[c],d=this._layers[u];if(!d.__builtin__&&d.refresh){var h=c===0?this._backgroundColor:null;d.refresh(h)}}return this._opts.useDirtyRect&&(this._prevDisplayList=n.slice()),this},o.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},o.prototype._paintHoverList=function(a){var n=a.length,s=this._hoverlayer;if(s&&s.clear(),!!n){for(var l={inHover:!0,viewWidth:this._width,viewHeight:this._height},c,u=0;u<n;u++){var d=a[u];d.__inHover&&(s||(s=this._hoverlayer=this.getLayer(HOVER_LAYER_ZLEVEL)),c||(c=s.ctx,c.save()),brush$1(c,d,l,u===n-1))}c&&c.restore()}},o.prototype.getHoverLayer=function(){return this.getLayer(HOVER_LAYER_ZLEVEL)},o.prototype.paintOne=function(a,n){brushSingle(a,n)},o.prototype._paintList=function(a,n,s,l){if(this._redrawId===l){s=s||!1,this._updateLayerStatus(a);var c=this._doPaintList(a,n,s),u=c.finished,d=c.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),d&&this._paintHoverList(a),u)this.eachLayer(function(f){f.afterBrush&&f.afterBrush()});else{var h=this;requestAnimationFrame$1(function(){h._paintList(a,n,s,l)})}}},o.prototype._compositeManually=function(){var a=this.getLayer(CANVAS_ZLEVEL).ctx,n=this._domRoot.width,s=this._domRoot.height;a.clearRect(0,0,n,s),this.eachBuiltinLayer(function(l){l.virtual&&a.drawImage(l.dom,0,0,n,s)})},o.prototype._doPaintList=function(a,n,s){for(var l=this,c=[],u=this._opts.useDirtyRect,d=0;d<this._zlevelList.length;d++){var h=this._zlevelList[d],f=this._layers[h];f.__builtin__&&f!==this._hoverlayer&&(f.__dirty||s)&&c.push(f)}for(var p=!0,g=!1,v=function(x){var S=c[x],E=S.ctx,T=u&&S.createRepaintRects(a,n,b._width,b._height),C=s?S.__startIndex:S.__drawIndex,A=!s&&S.incremental&&Date.now,R=A&&Date.now(),j=S.zlevel===b._zlevelList[0]?b._backgroundColor:null;if(S.__startIndex===S.__endIndex)S.clear(!1,j,T);else if(C===S.__startIndex){var D=a[C];(!D.incremental||!D.notClear||s)&&S.clear(!1,j,T)}C===-1&&(console.error("For some unknown reason. drawIndex is -1"),C=S.__startIndex);var O,H=function(ee){var re={inHover:!1,allClipped:!1,prevEl:null,viewWidth:l._width,viewHeight:l._height};for(O=C;O<S.__endIndex;O++){var ne=a[O];if(ne.__inHover&&(g=!0),l._doPaintEl(ne,S,u,ee,re,O===S.__endIndex-1),A){var ce=Date.now()-R;if(ce>15)break}}re.prevElClipPaths&&E.restore()};if(T)if(T.length===0)O=S.__endIndex;else for(var q=b.dpr,Y=0;Y<T.length;++Y){var te=T[Y];E.save(),E.beginPath(),E.rect(te.x*q,te.y*q,te.width*q,te.height*q),E.clip(),H(te),E.restore()}else E.save(),H(),E.restore();S.__drawIndex=O,S.__drawIndex<S.__endIndex&&(p=!1)},b=this,w=0;w<c.length;w++)v(w);return env.wxa&&each$f(this._layers,function(x){x&&x.ctx&&x.ctx.draw&&x.ctx.draw()}),{finished:p,needsRefreshHover:g}},o.prototype._doPaintEl=function(a,n,s,l,c,u){var d=n.ctx;if(s){var h=a.getPaintRect();(!l||h&&h.intersect(l))&&(brush$1(d,a,c,u),a.setPrevPaintRect(h))}else brush$1(d,a,c,u)},o.prototype.getLayer=function(a,n){this._singleCanvas&&!this._needsManuallyCompositing&&(a=CANVAS_ZLEVEL);var s=this._layers[a];return s||(s=new Layer("zr_"+a,this,this.dpr),s.zlevel=a,s.__builtin__=!0,this._layerConfig[a]?merge(s,this._layerConfig[a],!0):this._layerConfig[a-EL_AFTER_INCREMENTAL_INC]&&merge(s,this._layerConfig[a-EL_AFTER_INCREMENTAL_INC],!0),n&&(s.virtual=n),this.insertLayer(a,s),s.initContext()),s},o.prototype.insertLayer=function(a,n){var s=this._layers,l=this._zlevelList,c=l.length,u=this._domRoot,d=null,h=-1;if(s[a]){process.env.NODE_ENV!=="production"&&logError("ZLevel "+a+" has been used already");return}if(!isLayerValid(n)){process.env.NODE_ENV!=="production"&&logError("Layer of zlevel "+a+" is not valid");return}if(c>0&&a>l[0]){for(h=0;h<c-1&&!(l[h]<a&&l[h+1]>a);h++);d=s[l[h]]}if(l.splice(h+1,0,a),s[a]=n,!n.virtual)if(d){var f=d.dom;f.nextSibling?u.insertBefore(n.dom,f.nextSibling):u.appendChild(n.dom)}else u.firstChild?u.insertBefore(n.dom,u.firstChild):u.appendChild(n.dom);n.painter||(n.painter=this)},o.prototype.eachLayer=function(a,n){for(var s=this._zlevelList,l=0;l<s.length;l++){var c=s[l];a.call(n,this._layers[c],c)}},o.prototype.eachBuiltinLayer=function(a,n){for(var s=this._zlevelList,l=0;l<s.length;l++){var c=s[l],u=this._layers[c];u.__builtin__&&a.call(n,u,c)}},o.prototype.eachOtherLayer=function(a,n){for(var s=this._zlevelList,l=0;l<s.length;l++){var c=s[l],u=this._layers[c];u.__builtin__||a.call(n,u,c)}},o.prototype.getLayers=function(){return this._layers},o.prototype._updateLayerStatus=function(a){this.eachBuiltinLayer(function(g,v){g.__dirty=g.__used=!1});function n(g){c&&(c.__endIndex!==g&&(c.__dirty=!0),c.__endIndex=g)}if(this._singleCanvas)for(var s=1;s<a.length;s++){var l=a[s];if(l.zlevel!==a[s-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}}var c=null,u=0,d,h;for(h=0;h<a.length;h++){var l=a[h],f=l.zlevel,p=void 0;d!==f&&(d=f,u=0),l.incremental?(p=this.getLayer(f+INCREMENTAL_INC,this._needsManuallyCompositing),p.incremental=!0,u=1):p=this.getLayer(f+(u>0?EL_AFTER_INCREMENTAL_INC:0),this._needsManuallyCompositing),p.__builtin__||logError("ZLevel "+f+" has been used by unkown layer "+p.id),p!==c&&(p.__used=!0,p.__startIndex!==h&&(p.__dirty=!0),p.__startIndex=h,p.incremental?p.__drawIndex=-1:p.__drawIndex=h,n(h),c=p),l.__dirty&REDRAW_BIT&&!l.__inHover&&(p.__dirty=!0,p.incremental&&p.__drawIndex<0&&(p.__drawIndex=h))}n(h),this.eachBuiltinLayer(function(g,v){!g.__used&&g.getElementCount()>0&&(g.__dirty=!0,g.__startIndex=g.__endIndex=g.__drawIndex=0),g.__dirty&&g.__drawIndex<0&&(g.__drawIndex=g.__startIndex)})},o.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},o.prototype._clearLayer=function(a){a.clear()},o.prototype.setBackgroundColor=function(a){this._backgroundColor=a,each$f(this._layers,function(n){n.setUnpainted()})},o.prototype.configLayer=function(a,n){if(n){var s=this._layerConfig;s[a]?merge(s[a],n,!0):s[a]=n;for(var l=0;l<this._zlevelList.length;l++){var c=this._zlevelList[l];if(c===a||c===a+EL_AFTER_INCREMENTAL_INC){var u=this._layers[c];merge(u,s[a],!0)}}}},o.prototype.delLayer=function(a){var n=this._layers,s=this._zlevelList,l=n[a];l&&(l.dom.parentNode.removeChild(l.dom),delete n[a],s.splice(indexOf(s,a),1))},o.prototype.resize=function(a,n){if(this._domRoot.style){var s=this._domRoot;s.style.display="none";var l=this._opts,c=this.root;if(a!=null&&(l.width=a),n!=null&&(l.height=n),a=getSize$1(c,0,l),n=getSize$1(c,1,l),s.style.display="",this._width!==a||n!==this._height){s.style.width=a+"px",s.style.height=n+"px";for(var u in this._layers)this._layers.hasOwnProperty(u)&&this._layers[u].resize(a,n);this.refresh(!0)}this._width=a,this._height=n}else{if(a==null||n==null)return;this._width=a,this._height=n,this.getLayer(CANVAS_ZLEVEL).resize(a,n)}return this},o.prototype.clearLayer=function(a){var n=this._layers[a];n&&n.clear()},o.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},o.prototype.getRenderedCanvas=function(a){if(a=a||{},this._singleCanvas&&!this._compositeManually)return this._layers[CANVAS_ZLEVEL].dom;var n=new Layer("image",this,a.pixelRatio||this.dpr);n.initContext(),n.clear(!1,a.backgroundColor||this._backgroundColor);var s=n.ctx;if(a.pixelRatio<=this.dpr){this.refresh();var l=n.dom.width,c=n.dom.height;this.eachLayer(function(g){g.__builtin__?s.drawImage(g.dom,0,0,l,c):g.renderToCanvas&&(s.save(),g.renderToCanvas(s),s.restore())})}else for(var u={inHover:!1,viewWidth:this._width,viewHeight:this._height},d=this.storage.getDisplayList(!0),h=0,f=d.length;h<f;h++){var p=d[h];brush$1(s,p,u,h===f-1)}return n.dom},o.prototype.getWidth=function(){return this._width},o.prototype.getHeight=function(){return this._height},o}();function install$R(o){o.registerPainter("canvas",CanvasPainter)}var LineSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.hasSymbolVisual=!0,n}return a.prototype.getInitialData=function(n){if(process.env.NODE_ENV!=="production"){var s=n.coordinateSystem;if(s!=="polar"&&s!=="cartesian2d")throw new Error("Line not support coordinateSystem besides cartesian and polar")}return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.getLegendIcon=function(n){var s=new Group$3,l=createSymbol$1("line",0,n.itemHeight/2,n.itemWidth,0,n.lineStyle.stroke,!1);s.add(l),l.setStyle(n.lineStyle);var c=this.getData().getVisual("symbol"),u=this.getData().getVisual("symbolRotate"),d=c==="none"?"circle":c,h=n.itemHeight*.8,f=createSymbol$1(d,(n.itemWidth-h)/2,(n.itemHeight-h)/2,h,h,n.itemStyle.fill);s.add(f),f.setStyle(n.itemStyle);var p=n.iconRotate==="inherit"?u:n.iconRotate||0;return f.rotation=p*Math.PI/180,f.setOrigin([n.itemWidth/2,n.itemHeight/2]),d.indexOf("empty")>-1&&(f.style.stroke=f.style.fill,f.style.fill="#fff",f.style.lineWidth=2),s},a.type="series.line",a.dependencies=["grid","polar"],a.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},a}(SeriesModel);function getDefaultLabel(o,a){var n=o.mapDimensionsAll("defaultedLabel"),s=n.length;if(s===1){var l=retrieveRawValue(o,a,n[0]);return l!=null?l+"":null}else if(s){for(var c=[],u=0;u<n.length;u++)c.push(retrieveRawValue(o,a,n[u]));return c.join(" ")}}function getDefaultInterpolatedLabel(o,a){var n=o.mapDimensionsAll("defaultedLabel");if(!isArray$1(a))return a+"";for(var s=[],l=0;l<n.length;l++){var c=o.getDimensionIndex(n[l]);c>=0&&s.push(a[c])}return s.join(" ")}var Symbol$1=function(o){__extends$1(a,o);function a(n,s,l,c){var u=o.call(this)||this;return u.updateData(n,s,l,c),u}return a.prototype._createSymbol=function(n,s,l,c,u){this.removeAll();var d=createSymbol$1(n,-1,-1,2,2,null,u);d.attr({z2:100,culling:!0,scaleX:c[0]/2,scaleY:c[1]/2}),d.drift=driftSymbol,this._symbolType=n,this.add(d)},a.prototype.stopSymbolAnimation=function(n){this.childAt(0).stopAnimation(null,n)},a.prototype.getSymbolType=function(){return this._symbolType},a.prototype.getSymbolPath=function(){return this.childAt(0)},a.prototype.highlight=function(){enterEmphasis(this.childAt(0))},a.prototype.downplay=function(){leaveEmphasis(this.childAt(0))},a.prototype.setZ=function(n,s){var l=this.childAt(0);l.zlevel=n,l.z=s},a.prototype.setDraggable=function(n,s){var l=this.childAt(0);l.draggable=n,l.cursor=!s&&n?"move":l.cursor},a.prototype.updateData=function(n,s,l,c){this.silent=!1;var u=n.getItemVisual(s,"symbol")||"circle",d=n.hostModel,h=a.getSymbolSize(n,s),f=u!==this._symbolType,p=c&&c.disableAnimation;if(f){var g=n.getItemVisual(s,"symbolKeepAspect");this._createSymbol(u,n,s,h,g)}else{var v=this.childAt(0);v.silent=!1;var b={scaleX:h[0]/2,scaleY:h[1]/2};p?v.attr(b):updateProps$1(v,b,d,s),saveOldStyle(v)}if(this._updateCommon(n,s,h,l,c),f){var v=this.childAt(0);if(!p){var b={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:v.style.opacity}};v.scaleX=v.scaleY=0,v.style.opacity=0,initProps(v,b,d,s)}}p&&this.childAt(0).stopAnimation("leave")},a.prototype._updateCommon=function(n,s,l,c,u){var d=this.childAt(0),h=n.hostModel,f,p,g,v,b,w,x,S,E;if(c&&(f=c.emphasisItemStyle,p=c.blurItemStyle,g=c.selectItemStyle,v=c.focus,b=c.blurScope,x=c.labelStatesModels,S=c.hoverScale,E=c.cursorStyle,w=c.emphasisDisabled),!c||n.hasItemOption){var T=c&&c.itemModel?c.itemModel:n.getItemModel(s),C=T.getModel("emphasis");f=C.getModel("itemStyle").getItemStyle(),g=T.getModel(["select","itemStyle"]).getItemStyle(),p=T.getModel(["blur","itemStyle"]).getItemStyle(),v=C.get("focus"),b=C.get("blurScope"),w=C.get("disabled"),x=getLabelStatesModels(T),S=C.getShallow("scale"),E=T.getShallow("cursor")}var A=n.getItemVisual(s,"symbolRotate");d.attr("rotation",(A||0)*Math.PI/180||0);var R=normalizeSymbolOffset(n.getItemVisual(s,"symbolOffset"),l);R&&(d.x=R[0],d.y=R[1]),E&&d.attr("cursor",E);var j=n.getItemVisual(s,"style"),D=j.fill;if(d instanceof ZRImage){var O=d.style;d.useStyle(extend({image:O.image,x:O.x,y:O.y,width:O.width,height:O.height},j))}else d.__isEmptyBrush?d.useStyle(extend({},j)):d.useStyle(j),d.style.decal=null,d.setColor(D,u&&u.symbolInnerColor),d.style.strokeNoScale=!0;var H=n.getItemVisual(s,"liftZ"),q=this._z2;H!=null?q==null&&(this._z2=d.z2,d.z2+=H):q!=null&&(d.z2=q,this._z2=null);var Y=u&&u.useNameLabel;setLabelStyle(d,x,{labelFetcher:h,labelDataIndex:s,defaultText:te,inheritColor:D,defaultOpacity:j.opacity});function te(ne){return Y?n.getName(ne):getDefaultLabel(n,ne)}this._sizeX=l[0]/2,this._sizeY=l[1]/2;var ee=d.ensureState("emphasis");ee.style=f,d.ensureState("select").style=g,d.ensureState("blur").style=p;var re=S==null||S===!0?Math.max(1.1,3/this._sizeY):isFinite(S)&&S>0?+S:1;ee.scaleX=this._sizeX*re,ee.scaleY=this._sizeY*re,this.setSymbolScale(1),toggleHoverEmphasis(this,v,b,w)},a.prototype.setSymbolScale=function(n){this.scaleX=this.scaleY=n},a.prototype.fadeOut=function(n,s,l){var c=this.childAt(0),u=getECData(this).dataIndex,d=l&&l.animation;if(this.silent=c.silent=!0,l&&l.fadeLabel){var h=c.getTextContent();h&&removeElement(h,{style:{opacity:0}},s,{dataIndex:u,removeOpt:d,cb:function(){c.removeTextContent()}})}else c.removeTextContent();removeElement(c,{style:{opacity:0},scaleX:0,scaleY:0},s,{dataIndex:u,cb:n,removeOpt:d})},a.getSymbolSize=function(n,s){return normalizeSymbolSize(n.getItemVisual(s,"symbolSize"))},a}(Group$3);function driftSymbol(o,a){this.parent.drift(o,a)}function symbolNeedsDraw$1(o,a,n,s){return a&&!isNaN(a[0])&&!isNaN(a[1])&&!(s.isIgnore&&s.isIgnore(n))&&!(s.clipShape&&!s.clipShape.contain(a[0],a[1]))&&o.getItemVisual(n,"symbol")!=="none"}function normalizeUpdateOpt(o){return o!=null&&!isObject$3(o)&&(o={isIgnore:o}),o||{}}function makeSeriesScope$2(o){var a=o.hostModel,n=a.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:a.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:a.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:getLabelStatesModels(a),cursorStyle:a.get("cursor")}}var SymbolDraw=function(){function o(a){this.group=new Group$3,this._SymbolCtor=a||Symbol$1}return o.prototype.updateData=function(a,n){this._progressiveEls=null,n=normalizeUpdateOpt(n);var s=this.group,l=a.hostModel,c=this._data,u=this._SymbolCtor,d=n.disableAnimation,h=makeSeriesScope$2(a),f={disableAnimation:d},p=n.getSymbolPoint||function(g){return a.getItemLayout(g)};c||s.removeAll(),a.diff(c).add(function(g){var v=p(g);if(symbolNeedsDraw$1(a,v,g,n)){var b=new u(a,g,h,f);b.setPosition(v),a.setItemGraphicEl(g,b),s.add(b)}}).update(function(g,v){var b=c.getItemGraphicEl(v),w=p(g);if(!symbolNeedsDraw$1(a,w,g,n)){s.remove(b);return}var x=a.getItemVisual(g,"symbol")||"circle",S=b&&b.getSymbolType&&b.getSymbolType();if(!b||S&&S!==x)s.remove(b),b=new u(a,g,h,f),b.setPosition(w);else{b.updateData(a,g,h,f);var E={x:w[0],y:w[1]};d?b.attr(E):updateProps$1(b,E,l)}s.add(b),a.setItemGraphicEl(g,b)}).remove(function(g){var v=c.getItemGraphicEl(g);v&&v.fadeOut(function(){s.remove(v)},l)}).execute(),this._getSymbolPoint=p,this._data=a},o.prototype.updateLayout=function(){var a=this,n=this._data;n&&n.eachItemGraphicEl(function(s,l){var c=a._getSymbolPoint(l);s.setPosition(c),s.markRedraw()})},o.prototype.incrementalPrepareUpdate=function(a){this._seriesScope=makeSeriesScope$2(a),this._data=null,this.group.removeAll()},o.prototype.incrementalUpdate=function(a,n,s){this._progressiveEls=[],s=normalizeUpdateOpt(s);function l(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var c=a.start;c<a.end;c++){var u=n.getItemLayout(c);if(symbolNeedsDraw$1(n,u,c,s)){var d=new this._SymbolCtor(n,c,this._seriesScope);d.traverse(l),d.setPosition(u),this.group.add(d),n.setItemGraphicEl(c,d),this._progressiveEls.push(d)}}},o.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},o.prototype.remove=function(a){var n=this.group,s=this._data;s&&a?s.eachItemGraphicEl(function(l){l.fadeOut(function(){n.remove(l)},s.hostModel)}):n.removeAll()},o}();function prepareDataCoordInfo(o,a,n){var s=o.getBaseAxis(),l=o.getOtherAxis(s),c=getValueStart(l,n),u=s.dim,d=l.dim,h=a.mapDimension(d),f=a.mapDimension(u),p=d==="x"||d==="radius"?1:0,g=map$1(o.dimensions,function(w){return a.mapDimension(w)}),v=!1,b=a.getCalculationInfo("stackResultDimension");return isDimensionStacked(a,g[0])&&(v=!0,g[0]=b),isDimensionStacked(a,g[1])&&(v=!0,g[1]=b),{dataDimsForPoint:g,valueStart:c,valueAxisDim:d,baseAxisDim:u,stacked:!!v,valueDim:h,baseDim:f,baseDataOffset:p,stackedOverDimension:a.getCalculationInfo("stackedOverDimension")}}function getValueStart(o,a){var n=0,s=o.scale.getExtent();return a==="start"?n=s[0]:a==="end"?n=s[1]:isNumber(a)&&!isNaN(a)?n=a:s[0]>0?n=s[0]:s[1]<0&&(n=s[1]),n}function getStackedOnPoint(o,a,n,s){var l=NaN;o.stacked&&(l=n.get(n.getCalculationInfo("stackedOverDimension"),s)),isNaN(l)&&(l=o.valueStart);var c=o.baseDataOffset,u=[];return u[c]=n.get(o.baseDim,s),u[1-c]=l,a.dataToPoint(u)}function diffData(o,a){var n=[];return a.diff(o).add(function(s){n.push({cmd:"+",idx:s})}).update(function(s,l){n.push({cmd:"=",idx:l,idx1:s})}).remove(function(s){n.push({cmd:"-",idx:s})}).execute(),n}function lineAnimationDiff(o,a,n,s,l,c,u,d){for(var h=diffData(o,a),f=[],p=[],g=[],v=[],b=[],w=[],x=[],S=prepareDataCoordInfo(l,a,u),E=o.getLayout("points")||[],T=a.getLayout("points")||[],C=0;C<h.length;C++){var A=h[C],R=!0,j=void 0,D=void 0;switch(A.cmd){case"=":j=A.idx*2,D=A.idx1*2;var O=E[j],H=E[j+1],q=T[D],Y=T[D+1];(isNaN(O)||isNaN(H))&&(O=q,H=Y),f.push(O,H),p.push(q,Y),g.push(n[j],n[j+1]),v.push(s[D],s[D+1]),x.push(a.getRawIndex(A.idx1));break;case"+":var te=A.idx,ee=S.dataDimsForPoint,re=l.dataToPoint([a.get(ee[0],te),a.get(ee[1],te)]);D=te*2,f.push(re[0],re[1]),p.push(T[D],T[D+1]);var ne=getStackedOnPoint(S,l,a,te);g.push(ne[0],ne[1]),v.push(s[D],s[D+1]),x.push(a.getRawIndex(te));break;case"-":R=!1}R&&(b.push(A),w.push(w.length))}w.sort(function(le,ge){return x[le]-x[ge]});for(var ce=f.length,ve=createFloat32Array(ce),be=createFloat32Array(ce),me=createFloat32Array(ce),ae=createFloat32Array(ce),pe=[],C=0;C<w.length;C++){var ie=w[C],se=C*2,de=ie*2;ve[se]=f[de],ve[se+1]=f[de+1],be[se]=p[de],be[se+1]=p[de+1],me[se]=g[de],me[se+1]=g[de+1],ae[se]=v[de],ae[se+1]=v[de+1],pe[C]=b[ie]}return{current:ve,next:be,stackedOnCurrent:me,stackedOnNext:ae,status:pe}}var mathMin$5=Math.min,mathMax$5=Math.max;function isPointNull$1(o,a){return isNaN(o)||isNaN(a)}function drawSegment(o,a,n,s,l,c,u,d,h){for(var f,p,g,v,b,w,x=n,S=0;S<s;S++){var E=a[x*2],T=a[x*2+1];if(x>=l||x<0)break;if(isPointNull$1(E,T)){if(h){x+=c;continue}break}if(x===n)o[c>0?"moveTo":"lineTo"](E,T),g=E,v=T;else{var C=E-f,A=T-p;if(C*C+A*A<.5){x+=c;continue}if(u>0){for(var R=x+c,j=a[R*2],D=a[R*2+1];j===E&&D===T&&S<s;)S++,R+=c,x+=c,j=a[R*2],D=a[R*2+1],E=a[x*2],T=a[x*2+1],C=E-f,A=T-p;var O=S+1;if(h)for(;isPointNull$1(j,D)&&O<s;)O++,R+=c,j=a[R*2],D=a[R*2+1];var H=.5,q=0,Y=0,te=void 0,ee=void 0;if(O>=s||isPointNull$1(j,D))b=E,w=T;else{q=j-f,Y=D-p;var re=E-f,ne=j-E,ce=T-p,ve=D-T,be=void 0,me=void 0;if(d==="x"){be=Math.abs(re),me=Math.abs(ne);var ae=q>0?1:-1;b=E-ae*be*u,w=T,te=E+ae*me*u,ee=T}else if(d==="y"){be=Math.abs(ce),me=Math.abs(ve);var pe=Y>0?1:-1;b=E,w=T-pe*be*u,te=E,ee=T+pe*me*u}else be=Math.sqrt(re*re+ce*ce),me=Math.sqrt(ne*ne+ve*ve),H=me/(me+be),b=E-q*u*(1-H),w=T-Y*u*(1-H),te=E+q*u*H,ee=T+Y*u*H,te=mathMin$5(te,mathMax$5(j,E)),ee=mathMin$5(ee,mathMax$5(D,T)),te=mathMax$5(te,mathMin$5(j,E)),ee=mathMax$5(ee,mathMin$5(D,T)),q=te-E,Y=ee-T,b=E-q*be/me,w=T-Y*be/me,b=mathMin$5(b,mathMax$5(f,E)),w=mathMin$5(w,mathMax$5(p,T)),b=mathMax$5(b,mathMin$5(f,E)),w=mathMax$5(w,mathMin$5(p,T)),q=E-b,Y=T-w,te=E+q*me/be,ee=T+Y*me/be}o.bezierCurveTo(g,v,b,w,E,T),g=te,v=ee}else o.lineTo(E,T)}f=E,p=T,x+=c}return S}var ECPolylineShape=function(){function o(){this.smooth=0,this.smoothConstraint=!0}return o}(),ECPolyline=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="ec-polyline",s}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new ECPolylineShape},a.prototype.buildPath=function(n,s){var l=s.points,c=0,u=l.length/2;if(s.connectNulls){for(;u>0&&isPointNull$1(l[u*2-2],l[u*2-1]);u--);for(;c<u&&isPointNull$1(l[c*2],l[c*2+1]);c++);}for(;c<u;)c+=drawSegment(n,l,c,u,u,1,s.smooth,s.smoothMonotone,s.connectNulls)+1},a.prototype.getPointOn=function(n,s){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var l=this.path,c=l.data,u=PathProxy.CMD,d,h,f=s==="x",p=[],g=0;g<c.length;){var v=c[g++],b=void 0,w=void 0,x=void 0,S=void 0,E=void 0,T=void 0,C=void 0;switch(v){case u.M:d=c[g++],h=c[g++];break;case u.L:if(b=c[g++],w=c[g++],C=f?(n-d)/(b-d):(n-h)/(w-h),C<=1&&C>=0){var A=f?(w-h)*C+h:(b-d)*C+d;return f?[n,A]:[A,n]}d=b,h=w;break;case u.C:b=c[g++],w=c[g++],x=c[g++],S=c[g++],E=c[g++],T=c[g++];var R=f?cubicRootAt(d,b,x,E,n,p):cubicRootAt(h,w,S,T,n,p);if(R>0)for(var j=0;j<R;j++){var D=p[j];if(D<=1&&D>=0){var A=f?cubicAt(h,w,S,T,D):cubicAt(d,b,x,E,D);return f?[n,A]:[A,n]}}d=E,h=T;break}}},a}(Path),ECPolygonShape=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a}(ECPolylineShape),ECPolygon=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="ec-polygon",s}return a.prototype.getDefaultShape=function(){return new ECPolygonShape},a.prototype.buildPath=function(n,s){var l=s.points,c=s.stackedOnPoints,u=0,d=l.length/2,h=s.smoothMonotone;if(s.connectNulls){for(;d>0&&isPointNull$1(l[d*2-2],l[d*2-1]);d--);for(;u<d&&isPointNull$1(l[u*2],l[u*2+1]);u++);}for(;u<d;){var f=drawSegment(n,l,u,d,d,1,s.smooth,h,s.connectNulls);drawSegment(n,c,u+f-1,f,d,-1,s.stackedOnSmooth,h,s.connectNulls),u+=f+1,n.closePath()}},a}(Path);function createGridClipPath(o,a,n,s,l){var c=o.getArea(),u=c.x,d=c.y,h=c.width,f=c.height,p=n.get(["lineStyle","width"])||0;u-=p/2,d-=p/2,h+=p,f+=p,h=Math.ceil(h),u!==Math.floor(u)&&(u=Math.floor(u),h++);var g=new Rect$2({shape:{x:u,y:d,width:h,height:f}});if(a){var v=o.getBaseAxis(),b=v.isHorizontal(),w=v.inverse;b?(w&&(g.shape.x+=h),g.shape.width=0):(w||(g.shape.y+=f),g.shape.height=0);var x=isFunction$1(l)?function(S){l(S,g)}:null;initProps(g,{shape:{width:h,height:f,x:u,y:d}},n,null,s,x)}return g}function createPolarClipPath(o,a,n){var s=o.getArea(),l=round$3(s.r0,1),c=round$3(s.r,1),u=new Sector({shape:{cx:round$3(o.cx,1),cy:round$3(o.cy,1),r0:l,r:c,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}});if(a){var d=o.getBaseAxis().dim==="angle";d?u.shape.endAngle=s.startAngle:u.shape.r=l,initProps(u,{shape:{endAngle:s.endAngle,r:c}},n)}return u}function createClipPath(o,a,n,s,l){if(o){if(o.type==="polar")return createPolarClipPath(o,a,n);if(o.type==="cartesian2d")return createGridClipPath(o,a,n,s,l)}else return null;return null}function isCoordinateSystemType(o,a){return o.type===a}function isPointsSame(o,a){if(o.length===a.length){for(var n=0;n<o.length;n++)if(o[n]!==a[n])return;return!0}}function bboxFromPoints(o){for(var a=1/0,n=1/0,s=-1/0,l=-1/0,c=0;c<o.length;){var u=o[c++],d=o[c++];isNaN(u)||(a=Math.min(u,a),s=Math.max(u,s)),isNaN(d)||(n=Math.min(d,n),l=Math.max(d,l))}return[[a,n],[s,l]]}function getBoundingDiff(o,a){var n=bboxFromPoints(o),s=n[0],l=n[1],c=bboxFromPoints(a),u=c[0],d=c[1];return Math.max(Math.abs(s[0]-u[0]),Math.abs(s[1]-u[1]),Math.abs(l[0]-d[0]),Math.abs(l[1]-d[1]))}function getSmooth(o){return isNumber(o)?o:o?.5:0}function getStackedOnPoints(o,a,n){if(!n.valueDim)return[];for(var s=a.count(),l=createFloat32Array(s*2),c=0;c<s;c++){var u=getStackedOnPoint(n,o,a,c);l[c*2]=u[0],l[c*2+1]=u[1]}return l}function turnPointsIntoStep(o,a,n,s,l){var c=n.getBaseAxis(),u=c.dim==="x"||c.dim==="radius"?0:1,d=[],h=0,f=[],p=[],g=[],v=[];if(l){for(h=0;h<o.length;h+=2){var b=a||o;!isNaN(b[h])&&!isNaN(b[h+1])&&v.push(o[h],o[h+1])}o=v}for(h=0;h<o.length-2;h+=2)switch(g[0]=o[h+2],g[1]=o[h+3],p[0]=o[h],p[1]=o[h+1],d.push(p[0],p[1]),s){case"end":f[u]=g[u],f[1-u]=p[1-u],d.push(f[0],f[1]);break;case"middle":var w=(p[u]+g[u])/2,x=[];f[u]=x[u]=w,f[1-u]=p[1-u],x[1-u]=g[1-u],d.push(f[0],f[1]),d.push(x[0],x[1]);break;default:f[u]=p[u],f[1-u]=g[1-u],d.push(f[0],f[1])}return d.push(o[h++],o[h++]),d}function clipColorStops(o,a){var n=[],s=o.length,l,c;function u(p,g,v){var b=p.coord,w=(v-b)/(g.coord-b),x=lerp(w,[p.color,g.color]);return{coord:v,color:x}}for(var d=0;d<s;d++){var h=o[d],f=h.coord;if(f<0)l=h;else if(f>a){c?n.push(u(c,h,a)):l&&n.push(u(l,h,0),u(l,h,a));break}else l&&(n.push(u(l,h,0)),l=null),n.push(h),c=h}return n}function getVisualGradient(o,a,n){var s=o.getVisual("visualMeta");if(!(!s||!s.length||!o.count())){if(a.type!=="cartesian2d"){process.env.NODE_ENV!=="production"&&console.warn("Visual map on line style is only supported on cartesian2d.");return}for(var l,c,u=s.length-1;u>=0;u--){var d=o.getDimensionInfo(s[u].dimension);if(l=d&&d.coordDim,l==="x"||l==="y"){c=s[u];break}}if(!c){process.env.NODE_ENV!=="production"&&console.warn("Visual map on line style only support x or y dimension.");return}var h=a.getAxis(l),f=map$1(c.stops,function(C){return{coord:h.toGlobalCoord(h.dataToCoord(C.value)),color:C.color}}),p=f.length,g=c.outerColors.slice();p&&f[0].coord>f[p-1].coord&&(f.reverse(),g.reverse());var v=clipColorStops(f,l==="x"?n.getWidth():n.getHeight()),b=v.length;if(!b&&p)return f[0].coord<0?g[1]?g[1]:f[p-1].color:g[0]?g[0]:f[0].color;var w=10,x=v[0].coord-w,S=v[b-1].coord+w,E=S-x;if(E<.001)return"transparent";each$f(v,function(C){C.offset=(C.coord-x)/E}),v.push({offset:b?v[b-1].offset:.5,color:g[1]||"transparent"}),v.unshift({offset:b?v[0].offset:.5,color:g[0]||"transparent"});var T=new LinearGradient(0,0,0,0,v,!0);return T[l]=x,T[l+"2"]=S,T}}function getIsIgnoreFunc(o,a,n){var s=o.get("showAllSymbol"),l=s==="auto";if(!(s&&!l)){var c=n.getAxesByScale("ordinal")[0];if(c&&!(l&&canShowAllSymbolForCategory(c,a))){var u=a.mapDimension(c.dim),d={};return each$f(c.getViewLabels(),function(h){var f=c.scale.getRawOrdinalNumber(h.tickValue);d[f]=1}),function(h){return!d.hasOwnProperty(a.get(u,h))}}}}function canShowAllSymbolForCategory(o,a){var n=o.getExtent(),s=Math.abs(n[1]-n[0])/o.scale.count();isNaN(s)&&(s=0);for(var l=a.count(),c=Math.max(1,Math.round(l/5)),u=0;u<l;u+=c)if(Symbol$1.getSymbolSize(a,u)[o.isHorizontal()?1:0]*1.5>s)return!1;return!0}function isPointNull(o,a){return isNaN(o)||isNaN(a)}function getLastIndexNotNull(o){for(var a=o.length/2;a>0&&isPointNull(o[a*2-2],o[a*2-1]);a--);return a-1}function getPointAtIndex(o,a){return[o[a*2],o[a*2+1]]}function getIndexRange(o,a,n){for(var s=o.length/2,l=n==="x"?0:1,c,u,d=0,h=-1,f=0;f<s;f++)if(u=o[f*2+l],!(isNaN(u)||isNaN(o[f*2+1-l]))){if(f===0){c=u;continue}if(c<=a&&u>=a||c>=a&&u<=a){h=f;break}d=f,c=u}return{range:[d,h],t:(a-c)/(u-c)}}function anyStateShowEndLabel(o){if(o.get(["endLabel","show"]))return!0;for(var a=0;a<SPECIAL_STATES.length;a++)if(o.get([SPECIAL_STATES[a],"endLabel","show"]))return!0;return!1}function createLineClipPath(o,a,n,s){if(isCoordinateSystemType(a,"cartesian2d")){var l=s.getModel("endLabel"),c=l.get("valueAnimation"),u=s.getData(),d={lastFrameIndex:0},h=anyStateShowEndLabel(s)?function(b,w){o._endLabelOnDuring(b,w,u,d,c,l,a)}:null,f=a.getBaseAxis().isHorizontal(),p=createGridClipPath(a,n,s,function(){var b=o._endLabel;b&&n&&d.originalX!=null&&b.attr({x:d.originalX,y:d.originalY})},h);if(!s.get("clip",!0)){var g=p.shape,v=Math.max(g.width,g.height);f?(g.y-=v,g.height+=v*2):(g.x-=v,g.width+=v*2)}return h&&h(1,p),p}else return process.env.NODE_ENV!=="production"&&s.get(["endLabel","show"])&&console.warn("endLabel is not supported for lines in polar systems."),createPolarClipPath(a,n,s)}function getEndLabelStateSpecified(o,a){var n=a.getBaseAxis(),s=n.isHorizontal(),l=n.inverse,c=s?l?"right":"left":"center",u=s?"middle":l?"top":"bottom";return{normal:{align:o.get("align")||c,verticalAlign:o.get("verticalAlign")||u}}}var LineView=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.init=function(){var n=new Group$3,s=new SymbolDraw;this.group.add(s.group),this._symbolDraw=s,this._lineGroup=n,this._changePolyState=bind$1(this._changePolyState,this)},a.prototype.render=function(n,s,l){var c=n.coordinateSystem,u=this.group,d=n.getData(),h=n.getModel("lineStyle"),f=n.getModel("areaStyle"),p=d.getLayout("points")||[],g=c.type==="polar",v=this._coordSys,b=this._symbolDraw,w=this._polyline,x=this._polygon,S=this._lineGroup,E=!s.ssr&&n.get("animation"),T=!f.isEmpty(),C=f.get("origin"),A=prepareDataCoordInfo(c,d,C),R=T&&getStackedOnPoints(c,d,A),j=n.get("showSymbol"),D=n.get("connectNulls"),O=j&&!g&&getIsIgnoreFunc(n,d,c),H=this._data;H&&H.eachItemGraphicEl(function(le,ge){le.__temp&&(u.remove(le),H.setItemGraphicEl(ge,null))}),j||b.remove(),u.add(S);var q=g?!1:n.get("step"),Y;c&&c.getArea&&n.get("clip",!0)&&(Y=c.getArea(),Y.width!=null?(Y.x-=.1,Y.y-=.1,Y.width+=.2,Y.height+=.2):Y.r0&&(Y.r0-=.5,Y.r+=.5)),this._clipShapeForSymbol=Y;var te=getVisualGradient(d,c,l)||d.getVisual("style")[d.getVisual("drawType")];if(!(w&&v.type===c.type&&q===this._step))j&&b.updateData(d,{isIgnore:O,clipShape:Y,disableAnimation:!0,getSymbolPoint:function(le){return[p[le*2],p[le*2+1]]}}),E&&this._initSymbolLabelAnimation(d,c,Y),q&&(R&&(R=turnPointsIntoStep(R,p,c,q,D)),p=turnPointsIntoStep(p,null,c,q,D)),w=this._newPolyline(p),T?x=this._newPolygon(p,R):x&&(S.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(n,c,convertToColorString(te)),S.setClipPath(createLineClipPath(this,c,!0,n));else{T&&!x?x=this._newPolygon(p,R):x&&!T&&(S.remove(x),x=this._polygon=null),g||this._initOrUpdateEndLabel(n,c,convertToColorString(te));var ee=S.getClipPath();if(ee){var re=createLineClipPath(this,c,!1,n);initProps(ee,{shape:re.shape},n)}else S.setClipPath(createLineClipPath(this,c,!0,n));j&&b.updateData(d,{isIgnore:O,clipShape:Y,disableAnimation:!0,getSymbolPoint:function(le){return[p[le*2],p[le*2+1]]}}),(!isPointsSame(this._stackedOnPoints,R)||!isPointsSame(this._points,p))&&(E?this._doUpdateAnimation(d,R,c,l,q,C,D):(q&&(R&&(R=turnPointsIntoStep(R,p,c,q,D)),p=turnPointsIntoStep(p,null,c,q,D)),w.setShape({points:p}),x&&x.setShape({points:p,stackedOnPoints:R})))}var ne=n.getModel("emphasis"),ce=ne.get("focus"),ve=ne.get("blurScope"),be=ne.get("disabled");if(w.useStyle(defaults(h.getLineStyle(),{fill:"none",stroke:te,lineJoin:"bevel"})),setStatesStylesFromModel(w,n,"lineStyle"),w.style.lineWidth>0&&n.get(["emphasis","lineStyle","width"])==="bolder"){var me=w.getState("emphasis").style;me.lineWidth=+w.style.lineWidth+1}getECData(w).seriesIndex=n.seriesIndex,toggleHoverEmphasis(w,ce,ve,be);var ae=getSmooth(n.get("smooth")),pe=n.get("smoothMonotone");if(w.setShape({smooth:ae,smoothMonotone:pe,connectNulls:D}),x){var ie=d.getCalculationInfo("stackedOnSeries"),se=0;x.useStyle(defaults(f.getAreaStyle(),{fill:te,opacity:.7,lineJoin:"bevel",decal:d.getVisual("style").decal})),ie&&(se=getSmooth(ie.get("smooth"))),x.setShape({smooth:ae,stackedOnSmooth:se,smoothMonotone:pe,connectNulls:D}),setStatesStylesFromModel(x,n,"areaStyle"),getECData(x).seriesIndex=n.seriesIndex,toggleHoverEmphasis(x,ce,ve,be)}var de=this._changePolyState;d.eachItemGraphicEl(function(le){le&&(le.onHoverStateChange=de)}),this._polyline.onHoverStateChange=de,this._data=d,this._coordSys=c,this._stackedOnPoints=R,this._points=p,this._step=q,this._valueOrigin=C,n.get("triggerLineEvent")&&(this.packEventData(n,w),x&&this.packEventData(n,x))},a.prototype.packEventData=function(n,s){getECData(s).eventData={componentType:"series",componentSubType:"line",componentIndex:n.componentIndex,seriesIndex:n.seriesIndex,seriesName:n.name,seriesType:"line"}},a.prototype.highlight=function(n,s,l,c){var u=n.getData(),d=queryDataIndex(u,c);if(this._changePolyState("emphasis"),!(d instanceof Array)&&d!=null&&d>=0){var h=u.getLayout("points"),f=u.getItemGraphicEl(d);if(!f){var p=h[d*2],g=h[d*2+1];if(isNaN(p)||isNaN(g)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(p,g))return;var v=n.get("zlevel")||0,b=n.get("z")||0;f=new Symbol$1(u,d),f.x=p,f.y=g,f.setZ(v,b);var w=f.getSymbolPath().getTextContent();w&&(w.zlevel=v,w.z=b,w.z2=this._polyline.z2+1),f.__temp=!0,u.setItemGraphicEl(d,f),f.stopSymbolAnimation(!0),this.group.add(f)}f.highlight()}else ChartView.prototype.highlight.call(this,n,s,l,c)},a.prototype.downplay=function(n,s,l,c){var u=n.getData(),d=queryDataIndex(u,c);if(this._changePolyState("normal"),d!=null&&d>=0){var h=u.getItemGraphicEl(d);h&&(h.__temp?(u.setItemGraphicEl(d,null),this.group.remove(h)):h.downplay())}else ChartView.prototype.downplay.call(this,n,s,l,c)},a.prototype._changePolyState=function(n){var s=this._polygon;setStatesFlag(this._polyline,n),s&&setStatesFlag(s,n)},a.prototype._newPolyline=function(n){var s=this._polyline;return s&&this._lineGroup.remove(s),s=new ECPolyline({shape:{points:n},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(s),this._polyline=s,s},a.prototype._newPolygon=function(n,s){var l=this._polygon;return l&&this._lineGroup.remove(l),l=new ECPolygon({shape:{points:n,stackedOnPoints:s},segmentIgnoreThreshold:2}),this._lineGroup.add(l),this._polygon=l,l},a.prototype._initSymbolLabelAnimation=function(n,s,l){var c,u,d=s.getBaseAxis(),h=d.inverse;s.type==="cartesian2d"?(c=d.isHorizontal(),u=!1):s.type==="polar"&&(c=d.dim==="angle",u=!0);var f=n.hostModel,p=f.get("animationDuration");isFunction$1(p)&&(p=p(null));var g=f.get("animationDelay")||0,v=isFunction$1(g)?g(null):g;n.eachItemGraphicEl(function(b,w){var x=b;if(x){var S=[b.x,b.y],E=void 0,T=void 0,C=void 0;if(l)if(u){var A=l,R=s.pointToCoord(S);c?(E=A.startAngle,T=A.endAngle,C=-R[1]/180*Math.PI):(E=A.r0,T=A.r,C=R[0])}else{var j=l;c?(E=j.x,T=j.x+j.width,C=b.x):(E=j.y+j.height,T=j.y,C=b.y)}var D=T===E?0:(C-E)/(T-E);h&&(D=1-D);var O=isFunction$1(g)?g(w):p*D+v,H=x.getSymbolPath(),q=H.getTextContent();x.attr({scaleX:0,scaleY:0}),x.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:O}),q&&q.animateFrom({style:{opacity:0}},{duration:300,delay:O}),H.disableLabelAnimation=!0}})},a.prototype._initOrUpdateEndLabel=function(n,s,l){var c=n.getModel("endLabel");if(anyStateShowEndLabel(n)){var u=n.getData(),d=this._polyline,h=u.getLayout("points");if(!h){d.removeTextContent(),this._endLabel=null;return}var f=this._endLabel;f||(f=this._endLabel=new ZRText({z2:200}),f.ignoreClip=!0,d.setTextContent(this._endLabel),d.disableLabelAnimation=!0);var p=getLastIndexNotNull(h);p>=0&&(setLabelStyle(d,getLabelStatesModels(n,"endLabel"),{inheritColor:l,labelFetcher:n,labelDataIndex:p,defaultText:function(g,v,b){return b!=null?getDefaultInterpolatedLabel(u,b):getDefaultLabel(u,g)},enableTextSetter:!0},getEndLabelStateSpecified(c,s)),d.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},a.prototype._endLabelOnDuring=function(n,s,l,c,u,d,h){var f=this._endLabel,p=this._polyline;if(f){n<1&&c.originalX==null&&(c.originalX=f.x,c.originalY=f.y);var g=l.getLayout("points"),v=l.hostModel,b=v.get("connectNulls"),w=d.get("precision"),x=d.get("distance")||0,S=h.getBaseAxis(),E=S.isHorizontal(),T=S.inverse,C=s.shape,A=T?E?C.x:C.y+C.height:E?C.x+C.width:C.y,R=(E?x:0)*(T?-1:1),j=(E?0:-x)*(T?-1:1),D=E?"x":"y",O=getIndexRange(g,A,D),H=O.range,q=H[1]-H[0],Y=void 0;if(q>=1){if(q>1&&!b){var te=getPointAtIndex(g,H[0]);f.attr({x:te[0]+R,y:te[1]+j}),u&&(Y=v.getRawValue(H[0]))}else{var te=p.getPointOn(A,D);te&&f.attr({x:te[0]+R,y:te[1]+j});var ee=v.getRawValue(H[0]),re=v.getRawValue(H[1]);u&&(Y=interpolateRawValues(l,w,ee,re,O.t))}c.lastFrameIndex=H[0]}else{var ne=n===1||c.lastFrameIndex>0?H[0]:0,te=getPointAtIndex(g,ne);u&&(Y=v.getRawValue(ne)),f.attr({x:te[0]+R,y:te[1]+j})}if(u){var ce=labelInner(f);typeof ce.setLabelText=="function"&&ce.setLabelText(Y)}}},a.prototype._doUpdateAnimation=function(n,s,l,c,u,d,h){var f=this._polyline,p=this._polygon,g=n.hostModel,v=lineAnimationDiff(this._data,n,this._stackedOnPoints,s,this._coordSys,l,this._valueOrigin),b=v.current,w=v.stackedOnCurrent,x=v.next,S=v.stackedOnNext;if(u&&(w=turnPointsIntoStep(v.stackedOnCurrent,v.current,l,u,h),b=turnPointsIntoStep(v.current,null,l,u,h),S=turnPointsIntoStep(v.stackedOnNext,v.next,l,u,h),x=turnPointsIntoStep(v.next,null,l,u,h)),getBoundingDiff(b,x)>3e3||p&&getBoundingDiff(w,S)>3e3){f.stopAnimation(),f.setShape({points:x}),p&&(p.stopAnimation(),p.setShape({points:x,stackedOnPoints:S}));return}f.shape.__points=v.current,f.shape.points=b;var E={shape:{points:x}};v.current!==b&&(E.shape.__points=v.next),f.stopAnimation(),updateProps$1(f,E,g),p&&(p.setShape({points:b,stackedOnPoints:w}),p.stopAnimation(),updateProps$1(p,{shape:{stackedOnPoints:S}},g),f.shape.points!==p.shape.points&&(p.shape.points=f.shape.points));for(var T=[],C=v.status,A=0;A<C.length;A++){var R=C[A].cmd;if(R==="="){var j=n.getItemGraphicEl(C[A].idx1);j&&T.push({el:j,ptIdx:A})}}f.animators&&f.animators.length&&f.animators[0].during(function(){p&&p.dirtyShape();for(var D=f.shape.__points,O=0;O<T.length;O++){var H=T[O].el,q=T[O].ptIdx*2;H.x=D[q],H.y=D[q+1],H.markRedraw()}})},a.prototype.remove=function(n){var s=this.group,l=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),l&&l.eachItemGraphicEl(function(c,u){c.__temp&&(s.remove(c),l.setItemGraphicEl(u,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},a.type="line",a}(ChartView);function pointsLayout(o,a){return{seriesType:o,plan:createRenderPlanner(),reset:function(n){var s=n.getData(),l=n.coordinateSystem,c=n.pipelineContext,u=a||c.large;if(l){var d=map$1(l.dimensions,function(b){return s.mapDimension(b)}).slice(0,2),h=d.length,f=s.getCalculationInfo("stackResultDimension");isDimensionStacked(s,d[0])&&(d[0]=f),isDimensionStacked(s,d[1])&&(d[1]=f);var p=s.getStore(),g=s.getDimensionIndex(d[0]),v=s.getDimensionIndex(d[1]);return h&&{progress:function(b,w){for(var x=b.end-b.start,S=u&&createFloat32Array(x*h),E=[],T=[],C=b.start,A=0;C<b.end;C++){var R=void 0;if(h===1){var j=p.get(g,C);R=l.dataToPoint(j,null,T)}else E[0]=p.get(g,C),E[1]=p.get(v,C),R=l.dataToPoint(E,null,T);u?(S[A++]=R[0],S[A++]=R[1]):w.setItemLayout(C,R.slice())}u&&w.setLayout("points",S)}}}}}}var samplers={average:function(o){for(var a=0,n=0,s=0;s<o.length;s++)isNaN(o[s])||(a+=o[s],n++);return n===0?NaN:a/n},sum:function(o){for(var a=0,n=0;n<o.length;n++)a+=o[n]||0;return a},max:function(o){for(var a=-1/0,n=0;n<o.length;n++)o[n]>a&&(a=o[n]);return isFinite(a)?a:NaN},min:function(o){for(var a=1/0,n=0;n<o.length;n++)o[n]<a&&(a=o[n]);return isFinite(a)?a:NaN},nearest:function(o){return o[0]}},indexSampler=function(o){return Math.round(o.length/2)};function dataSample(o){return{seriesType:o,reset:function(a,n,s){var l=a.getData(),c=a.get("sampling"),u=a.coordinateSystem,d=l.count();if(d>10&&u.type==="cartesian2d"&&c){var h=u.getBaseAxis(),f=u.getOtherAxis(h),p=h.getExtent(),g=s.getDevicePixelRatio(),v=Math.abs(p[1]-p[0])*(g||1),b=Math.round(d/v);if(isFinite(b)&&b>1){c==="lttb"?a.setData(l.lttbDownSample(l.mapDimension(f.dim),1/b)):c==="minmax"&&a.setData(l.minmaxDownSample(l.mapDimension(f.dim),1/b));var w=void 0;isString$2(c)?w=samplers[c]:isFunction$1(c)&&(w=c),w&&a.setData(l.downSample(l.mapDimension(f.dim),1/b,w,indexSampler))}}}}}function install$Q(o){o.registerChartView(LineView),o.registerSeriesModel(LineSeriesModel),o.registerLayout(pointsLayout("line",!0)),o.registerVisual({seriesType:"line",reset:function(a){var n=a.getData(),s=a.getModel("lineStyle").getLineStyle();s&&!s.stroke&&(s.stroke=n.getVisual("style").fill),n.setVisual("legendLineStyle",s)}}),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,dataSample("line"))}var BaseBarSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.getInitialData=function(n,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.getMarkerPosition=function(n,s,l){var c=this.coordinateSystem;if(c&&c.clampData){var u=c.clampData(n),d=c.dataToPoint(u);if(l)each$f(c.getAxes(),function(v,b){if(v.type==="category"&&s!=null){var w=v.getTicksCoords(),x=v.getTickModel().get("alignWithLabel"),S=u[b],E=s[b]==="x1"||s[b]==="y1";if(E&&!x&&(S+=1),w.length<2)return;if(w.length===2){d[b]=v.toGlobalCoord(v.getExtent()[E?1:0]);return}for(var T=void 0,C=void 0,A=1,R=0;R<w.length;R++){var j=w[R].coord,D=R===w.length-1?w[R-1].tickValue+A:w[R].tickValue;if(D===S){C=j;break}else if(D<S)T=j;else if(T!=null&&D>S){C=(j+T)/2;break}R===1&&(A=D-w[0].tickValue)}C==null&&(T?T&&(C=w[w.length-1].coord):C=w[0].coord),d[b]=v.toGlobalCoord(C)}});else{var h=this.getData(),f=h.getLayout("offset"),p=h.getLayout("size"),g=c.getBaseAxis().isHorizontal()?0:1;d[g]+=f+p/2}return d}return[NaN,NaN]},a.type="series.__base_bar__",a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},a}(SeriesModel);SeriesModel.registerClass(BaseBarSeriesModel);var BarSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.getInitialData=function(){return createSeriesData(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},a.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},a.prototype.getProgressiveThreshold=function(){var n=this.get("progressiveThreshold"),s=this.get("largeThreshold");return s>n&&(n=s),n},a.prototype.brushSelector=function(n,s,l){return l.rect(s.getItemLayout(n))},a.type="series.bar",a.dependencies=["grid","polar"],a.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),a}(BaseBarSeriesModel),SausageShape=function(){function o(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return o}(),SausagePath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="sausage",s}return a.prototype.getDefaultShape=function(){return new SausageShape},a.prototype.buildPath=function(n,s){var l=s.cx,c=s.cy,u=Math.max(s.r0||0,0),d=Math.max(s.r,0),h=(d-u)*.5,f=u+h,p=s.startAngle,g=s.endAngle,v=s.clockwise,b=Math.PI*2,w=v?g-p<b:p-g<b;w||(p=g-(v?b:-b));var x=Math.cos(p),S=Math.sin(p),E=Math.cos(g),T=Math.sin(g);w?(n.moveTo(x*u+l,S*u+c),n.arc(x*f+l,S*f+c,h,-Math.PI+p,p,!v)):n.moveTo(x*d+l,S*d+c),n.arc(l,c,d,p,g,!v),n.arc(E*f+l,T*f+c,h,g-Math.PI*2,g-Math.PI,!v),u!==0&&n.arc(l,c,u,g,p,v)},a}(Path);function createSectorCalculateTextPosition(o,a){a=a||{};var n=a.isRoundCap;return function(s,l,c){var u=l.position;if(!u||u instanceof Array)return calculateTextPosition(s,l,c);var d=o(u),h=l.distance!=null?l.distance:5,f=this.shape,p=f.cx,g=f.cy,v=f.r,b=f.r0,w=(v+b)/2,x=f.startAngle,S=f.endAngle,E=(x+S)/2,T=n?Math.abs(v-b)/2:0,C=Math.cos,A=Math.sin,R=p+v*C(x),j=g+v*A(x),D="left",O="top";switch(d){case"startArc":R=p+(b-h)*C(E),j=g+(b-h)*A(E),D="center",O="top";break;case"insideStartArc":R=p+(b+h)*C(E),j=g+(b+h)*A(E),D="center",O="bottom";break;case"startAngle":R=p+w*C(x)+adjustAngleDistanceX(x,h+T,!1),j=g+w*A(x)+adjustAngleDistanceY(x,h+T,!1),D="right",O="middle";break;case"insideStartAngle":R=p+w*C(x)+adjustAngleDistanceX(x,-h+T,!1),j=g+w*A(x)+adjustAngleDistanceY(x,-h+T,!1),D="left",O="middle";break;case"middle":R=p+w*C(E),j=g+w*A(E),D="center",O="middle";break;case"endArc":R=p+(v+h)*C(E),j=g+(v+h)*A(E),D="center",O="bottom";break;case"insideEndArc":R=p+(v-h)*C(E),j=g+(v-h)*A(E),D="center",O="top";break;case"endAngle":R=p+w*C(S)+adjustAngleDistanceX(S,h+T,!0),j=g+w*A(S)+adjustAngleDistanceY(S,h+T,!0),D="left",O="middle";break;case"insideEndAngle":R=p+w*C(S)+adjustAngleDistanceX(S,-h+T,!0),j=g+w*A(S)+adjustAngleDistanceY(S,-h+T,!0),D="right",O="middle";break;default:return calculateTextPosition(s,l,c)}return s=s||{},s.x=R,s.y=j,s.align=D,s.verticalAlign=O,s}}function setSectorTextRotation(o,a,n,s){if(isNumber(s)){o.setTextConfig({rotation:s});return}else if(isArray$1(a)){o.setTextConfig({rotation:0});return}var l=o.shape,c=l.clockwise?l.startAngle:l.endAngle,u=l.clockwise?l.endAngle:l.startAngle,d=(c+u)/2,h,f=n(a);switch(f){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":h=d;break;case"startAngle":case"insideStartAngle":h=c;break;case"endAngle":case"insideEndAngle":h=u;break;default:o.setTextConfig({rotation:0});return}var p=Math.PI*1.5-h;f==="middle"&&p>Math.PI/2&&p<Math.PI*1.5&&(p-=Math.PI),o.setTextConfig({rotation:p})}function adjustAngleDistanceX(o,a,n){return a*Math.sin(o)*(n?-1:1)}function adjustAngleDistanceY(o,a,n){return a*Math.cos(o)*(n?1:-1)}function getSectorCornerRadius(o,a,n){var s=o.get("borderRadius");if(s==null)return n?{cornerRadius:0}:null;isArray$1(s)||(s=[s,s,s,s]);var l=Math.abs(a.r||0-a.r0||0);return{cornerRadius:map$1(s,function(c){return parsePercent$1(c,l)})}}var mathMax$4=Math.max,mathMin$4=Math.min;function getClipArea(o,a){var n=o.getArea&&o.getArea();if(isCoordinateSystemType(o,"cartesian2d")){var s=o.getBaseAxis();if(s.type!=="category"||!s.onBand){var l=a.getLayout("bandWidth");s.isHorizontal()?(n.x-=l,n.width+=l*2):(n.y-=l,n.height+=l*2)}}return n}var BarView=function(o){__extends$1(a,o);function a(){var n=o.call(this)||this;return n.type=a.type,n._isFirstFrame=!0,n}return a.prototype.render=function(n,s,l,c){this._model=n,this._removeOnRenderedListener(l),this._updateDrawMode(n);var u=n.get("coordinateSystem");u==="cartesian2d"||u==="polar"?(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(n,s,l):this._renderNormal(n,s,l,c)):process.env.NODE_ENV!=="production"&&warn("Only cartesian2d and polar supported for bar.")},a.prototype.incrementalPrepareRender=function(n){this._clear(),this._updateDrawMode(n),this._updateLargeClip(n)},a.prototype.incrementalRender=function(n,s){this._progressiveEls=[],this._incrementalRenderLarge(n,s)},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype._updateDrawMode=function(n){var s=n.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},a.prototype._renderNormal=function(n,s,l,c){var u=this.group,d=n.getData(),h=this._data,f=n.coordinateSystem,p=f.getBaseAxis(),g;f.type==="cartesian2d"?g=p.isHorizontal():f.type==="polar"&&(g=p.dim==="angle");var v=n.isAnimationEnabled()?n:null,b=shouldRealtimeSort(n,f);b&&this._enableRealtimeSort(b,d,l);var w=n.get("clip",!0)||b,x=getClipArea(f,d);u.removeClipPath();var S=n.get("roundCap",!0),E=n.get("showBackground",!0),T=n.getModel("backgroundStyle"),C=T.get("borderRadius")||0,A=[],R=this._backgroundEls,j=c&&c.isInitSort,D=c&&c.type==="changeAxisOrder";function O(Y){var te=getLayout[f.type](d,Y),ee=createBackgroundEl(f,g,te);return ee.useStyle(T.getItemStyle()),f.type==="cartesian2d"?ee.setShape("r",C):ee.setShape("cornerRadius",C),A[Y]=ee,ee}d.diff(h).add(function(Y){var te=d.getItemModel(Y),ee=getLayout[f.type](d,Y,te);if(E&&O(Y),!(!d.hasValue(Y)||!isValidLayout[f.type](ee))){var re=!1;w&&(re=clip[f.type](x,ee));var ne=elementCreator[f.type](n,d,Y,ee,g,v,p.model,!1,S);b&&(ne.forceLabelAnimation=!0),updateStyle(ne,d,Y,te,ee,n,g,f.type==="polar"),j?ne.attr({shape:ee}):b?updateRealtimeAnimation(b,v,ne,ee,Y,g,!1,!1):initProps(ne,{shape:ee},n,Y),d.setItemGraphicEl(Y,ne),u.add(ne),ne.ignore=re}}).update(function(Y,te){var ee=d.getItemModel(Y),re=getLayout[f.type](d,Y,ee);if(E){var ne=void 0;R.length===0?ne=O(te):(ne=R[te],ne.useStyle(T.getItemStyle()),f.type==="cartesian2d"?ne.setShape("r",C):ne.setShape("cornerRadius",C),A[Y]=ne);var ce=getLayout[f.type](d,Y),ve=createBackgroundShape(g,ce,f);updateProps$1(ne,{shape:ve},v,Y)}var be=h.getItemGraphicEl(te);if(!d.hasValue(Y)||!isValidLayout[f.type](re)){u.remove(be);return}var me=!1;if(w&&(me=clip[f.type](x,re),me&&u.remove(be)),be?saveOldStyle(be):be=elementCreator[f.type](n,d,Y,re,g,v,p.model,!!be,S),b&&(be.forceLabelAnimation=!0),D){var ae=be.getTextContent();if(ae){var pe=labelInner(ae);pe.prevValue!=null&&(pe.prevValue=pe.value)}}else updateStyle(be,d,Y,ee,re,n,g,f.type==="polar");j?be.attr({shape:re}):b?updateRealtimeAnimation(b,v,be,re,Y,g,!0,D):updateProps$1(be,{shape:re},n,Y,null),d.setItemGraphicEl(Y,be),be.ignore=me,u.add(be)}).remove(function(Y){var te=h.getItemGraphicEl(Y);te&&removeElementWithFadeOut(te,n,Y)}).execute();var H=this._backgroundGroup||(this._backgroundGroup=new Group$3);H.removeAll();for(var q=0;q<A.length;++q)H.add(A[q]);u.add(H),this._backgroundEls=A,this._data=d},a.prototype._renderLarge=function(n,s,l){this._clear(),createLarge$1(n,this.group),this._updateLargeClip(n)},a.prototype._incrementalRenderLarge=function(n,s){this._removeBackground(),createLarge$1(s,this.group,this._progressiveEls,!0)},a.prototype._updateLargeClip=function(n){var s=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n),l=this.group;s?l.setClipPath(s):l.removeClipPath()},a.prototype._enableRealtimeSort=function(n,s,l){var c=this;if(s.count()){var u=n.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(s,n,l),this._isFirstFrame=!1;else{var d=function(h){var f=s.getItemGraphicEl(h),p=f&&f.shape;return p&&Math.abs(u.isHorizontal()?p.height:p.width)||0};this._onRendered=function(){c._updateSortWithinSameData(s,d,u,l)},l.getZr().on("rendered",this._onRendered)}}},a.prototype._dataSort=function(n,s,l){var c=[];return n.each(n.mapDimension(s.dim),function(u,d){var h=l(d);h=h??NaN,c.push({dataIndex:d,mappedValue:h,ordinalNumber:u})}),c.sort(function(u,d){return d.mappedValue-u.mappedValue}),{ordinalNumbers:map$1(c,function(u){return u.ordinalNumber})}},a.prototype._isOrderChangedWithinSameData=function(n,s,l){for(var c=l.scale,u=n.mapDimension(l.dim),d=Number.MAX_VALUE,h=0,f=c.getOrdinalMeta().categories.length;h<f;++h){var p=n.rawIndexOf(u,c.getRawOrdinalNumber(h)),g=p<0?Number.MIN_VALUE:s(n.indexOfRawIndex(p));if(g>d)return!0;d=g}return!1},a.prototype._isOrderDifferentInView=function(n,s){for(var l=s.scale,c=l.getExtent(),u=Math.max(0,c[0]),d=Math.min(c[1],l.getOrdinalMeta().categories.length-1);u<=d;++u)if(n.ordinalNumbers[u]!==l.getRawOrdinalNumber(u))return!0},a.prototype._updateSortWithinSameData=function(n,s,l,c){if(this._isOrderChangedWithinSameData(n,s,l)){var u=this._dataSort(n,l,s);this._isOrderDifferentInView(u,l)&&(this._removeOnRenderedListener(c),c.dispatchAction({type:"changeAxisOrder",componentType:l.dim+"Axis",axisId:l.index,sortInfo:u}))}},a.prototype._dispatchInitSort=function(n,s,l){var c=s.baseAxis,u=this._dataSort(n,c,function(d){return n.get(n.mapDimension(s.otherAxis.dim),d)});l.dispatchAction({type:"changeAxisOrder",componentType:c.dim+"Axis",isInitSort:!0,axisId:c.index,sortInfo:u})},a.prototype.remove=function(n,s){this._clear(this._model),this._removeOnRenderedListener(s)},a.prototype.dispose=function(n,s){this._removeOnRenderedListener(s)},a.prototype._removeOnRenderedListener=function(n){this._onRendered&&(n.getZr().off("rendered",this._onRendered),this._onRendered=null)},a.prototype._clear=function(n){var s=this.group,l=this._data;n&&n.isAnimationEnabled()&&l&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],l.eachItemGraphicEl(function(c){removeElementWithFadeOut(c,n,getECData(c).dataIndex)})):s.removeAll(),this._data=null,this._isFirstFrame=!0},a.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},a.type="bar",a}(ChartView),clip={cartesian2d:function(o,a){var n=a.width<0?-1:1,s=a.height<0?-1:1;n<0&&(a.x+=a.width,a.width=-a.width),s<0&&(a.y+=a.height,a.height=-a.height);var l=o.x+o.width,c=o.y+o.height,u=mathMax$4(a.x,o.x),d=mathMin$4(a.x+a.width,l),h=mathMax$4(a.y,o.y),f=mathMin$4(a.y+a.height,c),p=d<u,g=f<h;return a.x=p&&u>l?d:u,a.y=g&&h>c?f:h,a.width=p?0:d-u,a.height=g?0:f-h,n<0&&(a.x+=a.width,a.width=-a.width),s<0&&(a.y+=a.height,a.height=-a.height),p||g},polar:function(o,a){var n=a.r0<=a.r?1:-1;if(n<0){var s=a.r;a.r=a.r0,a.r0=s}var l=mathMin$4(a.r,o.r),c=mathMax$4(a.r0,o.r0);a.r=l,a.r0=c;var u=l-c<0;if(n<0){var s=a.r;a.r=a.r0,a.r0=s}return u}},elementCreator={cartesian2d:function(o,a,n,s,l,c,u,d,h){var f=new Rect$2({shape:extend({},s),z2:1});if(f.__dataIndex=n,f.name="item",c){var p=f.shape,g=l?"height":"width";p[g]=0}return f},polar:function(o,a,n,s,l,c,u,d,h){var f=!l&&h?SausagePath:Sector,p=new f({shape:s,z2:1});p.name="item";var g=createPolarPositionMapping(l);if(p.calculateTextPosition=createSectorCalculateTextPosition(g,{isRoundCap:f===SausagePath}),c){var v=p.shape,b=l?"r":"endAngle",w={};v[b]=l?s.r0:s.startAngle,w[b]=s[b],(d?updateProps$1:initProps)(p,{shape:w},c)}return p}};function shouldRealtimeSort(o,a){var n=o.get("realtimeSort",!0),s=a.getBaseAxis();if(process.env.NODE_ENV!=="production"&&n&&(s.type!=="category"&&warn("`realtimeSort` will not work because this bar series is not based on a category axis."),a.type!=="cartesian2d"&&warn("`realtimeSort` will not work because this bar series is not on cartesian2d.")),n&&s.type==="category"&&a.type==="cartesian2d")return{baseAxis:s,otherAxis:a.getOtherAxis(s)}}function updateRealtimeAnimation(o,a,n,s,l,c,u,d){var h,f;c?(f={x:s.x,width:s.width},h={y:s.y,height:s.height}):(f={y:s.y,height:s.height},h={x:s.x,width:s.width}),d||(u?updateProps$1:initProps)(n,{shape:h},a,l,null);var p=a?o.baseAxis.model:null;(u?updateProps$1:initProps)(n,{shape:f},p,l)}function checkPropertiesNotValid(o,a){for(var n=0;n<a.length;n++)if(!isFinite(o[a[n]]))return!0;return!1}var rectPropties=["x","y","width","height"],polarPropties=["cx","cy","r","startAngle","endAngle"],isValidLayout={cartesian2d:function(o){return!checkPropertiesNotValid(o,rectPropties)},polar:function(o){return!checkPropertiesNotValid(o,polarPropties)}},getLayout={cartesian2d:function(o,a,n){var s=o.getItemLayout(a),l=n?getLineWidth(n,s):0,c=s.width>0?1:-1,u=s.height>0?1:-1;return{x:s.x+c*l/2,y:s.y+u*l/2,width:s.width-c*l,height:s.height-u*l}},polar:function(o,a,n){var s=o.getItemLayout(a);return{cx:s.cx,cy:s.cy,r0:s.r0,r:s.r,startAngle:s.startAngle,endAngle:s.endAngle,clockwise:s.clockwise}}};function isZeroOnPolar(o){return o.startAngle!=null&&o.endAngle!=null&&o.startAngle===o.endAngle}function createPolarPositionMapping(o){return function(a){var n=a?"Arc":"Angle";return function(s){switch(s){case"start":case"insideStart":case"end":case"insideEnd":return s+n;default:return s}}}(o)}function updateStyle(o,a,n,s,l,c,u,d){var h=a.getItemVisual(n,"style");if(d){if(!c.get("roundCap")){var p=o.shape,g=getSectorCornerRadius(s.getModel("itemStyle"),p,!0);extend(p,g),o.setShape(p)}}else{var f=s.get(["itemStyle","borderRadius"])||0;o.setShape("r",f)}o.useStyle(h);var v=s.getShallow("cursor");v&&o.attr("cursor",v);var b=d?u?l.r>=l.r0?"endArc":"startArc":l.endAngle>=l.startAngle?"endAngle":"startAngle":u?l.height>=0?"bottom":"top":l.width>=0?"right":"left",w=getLabelStatesModels(s);setLabelStyle(o,w,{labelFetcher:c,labelDataIndex:n,defaultText:getDefaultLabel(c.getData(),n),inheritColor:h.fill,defaultOpacity:h.opacity,defaultOutsidePosition:b});var x=o.getTextContent();if(d&&x){var S=s.get(["label","position"]);o.textConfig.inside=S==="middle"?!0:null,setSectorTextRotation(o,S==="outside"?b:S,createPolarPositionMapping(u),s.get(["label","rotate"]))}setLabelValueAnimation(x,w,c.getRawValue(n),function(T){return getDefaultInterpolatedLabel(a,T)});var E=s.getModel(["emphasis"]);toggleHoverEmphasis(o,E.get("focus"),E.get("blurScope"),E.get("disabled")),setStatesStylesFromModel(o,s),isZeroOnPolar(l)&&(o.style.fill="none",o.style.stroke="none",each$f(o.states,function(T){T.style&&(T.style.fill=T.style.stroke="none")}))}function getLineWidth(o,a){var n=o.get(["itemStyle","borderColor"]);if(!n||n==="none")return 0;var s=o.get(["itemStyle","borderWidth"])||0,l=isNaN(a.width)?Number.MAX_VALUE:Math.abs(a.width),c=isNaN(a.height)?Number.MAX_VALUE:Math.abs(a.height);return Math.min(s,l,c)}var LagePathShape=function(){function o(){}return o}(),LargePath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="largeBar",s}return a.prototype.getDefaultShape=function(){return new LagePathShape},a.prototype.buildPath=function(n,s){for(var l=s.points,c=this.baseDimIdx,u=1-this.baseDimIdx,d=[],h=[],f=this.barWidth,p=0;p<l.length;p+=3)h[c]=f,h[u]=l[p+2],d[c]=l[p+c],d[u]=l[p+u],n.rect(d[0],d[1],h[0],h[1])},a}(Path);function createLarge$1(o,a,n,s){var l=o.getData(),c=l.getLayout("valueAxisHorizontal")?1:0,u=l.getLayout("largeDataIndices"),d=l.getLayout("size"),h=o.getModel("backgroundStyle"),f=l.getLayout("largeBackgroundPoints");if(f){var p=new LargePath({shape:{points:f},incremental:!!s,silent:!0,z2:0});p.baseDimIdx=c,p.largeDataIndices=u,p.barWidth=d,p.useStyle(h.getItemStyle()),a.add(p),n&&n.push(p)}var g=new LargePath({shape:{points:l.getLayout("largePoints")},incremental:!!s,ignoreCoarsePointer:!0,z2:1});g.baseDimIdx=c,g.largeDataIndices=u,g.barWidth=d,a.add(g),g.useStyle(l.getVisual("style")),g.style.stroke=null,getECData(g).seriesIndex=o.seriesIndex,o.get("silent")||(g.on("mousedown",largePathUpdateDataIndex),g.on("mousemove",largePathUpdateDataIndex)),n&&n.push(g)}var largePathUpdateDataIndex=throttle(function(o){var a=this,n=largePathFindDataIndex(a,o.offsetX,o.offsetY);getECData(a).dataIndex=n>=0?n:null},30,!1);function largePathFindDataIndex(o,a,n){for(var s=o.baseDimIdx,l=1-s,c=o.shape.points,u=o.largeDataIndices,d=[],h=[],f=o.barWidth,p=0,g=c.length/3;p<g;p++){var v=p*3;if(h[s]=f,h[l]=c[v+2],d[s]=c[v+s],d[l]=c[v+l],h[l]<0&&(d[l]+=h[l],h[l]=-h[l]),a>=d[0]&&a<=d[0]+h[0]&&n>=d[1]&&n<=d[1]+h[1])return u[p]}return-1}function createBackgroundShape(o,a,n){if(isCoordinateSystemType(n,"cartesian2d")){var s=a,l=n.getArea();return{x:o?s.x:l.x,y:o?l.y:s.y,width:o?s.width:l.width,height:o?l.height:s.height}}else{var l=n.getArea(),c=a;return{cx:l.cx,cy:l.cy,r0:o?l.r0:c.r0,r:o?l.r:c.r,startAngle:o?c.startAngle:0,endAngle:o?c.endAngle:Math.PI*2}}}function createBackgroundEl(o,a,n){var s=o.type==="polar"?Sector:Rect$2;return new s({shape:createBackgroundShape(a,n,o),silent:!0,z2:0})}function install$P(o){o.registerChartView(BarView),o.registerSeriesModel(BarSeriesModel),o.registerLayout(o.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"bar")),o.registerLayout(o.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("bar")),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,dataSample("bar")),o.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(a,n){var s=a.componentType||"series";n.eachComponent({mainType:s,query:a},function(l){a.sortInfo&&l.axis.setCategorySortInfo(a.sortInfo)})})}var PI2=Math.PI*2,RADIAN$2=Math.PI/180;function getViewRect$5(o,a){return getLayoutRect(o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function getBasicPieLayout(o,a){var n=getViewRect$5(o,a),s=o.get("center"),l=o.get("radius");isArray$1(l)||(l=[0,l]);var c=parsePercent(n.width,a.getWidth()),u=parsePercent(n.height,a.getHeight()),d=Math.min(c,u),h=parsePercent(l[0],d/2),f=parsePercent(l[1],d/2),p,g,v=o.coordinateSystem;if(v){var b=v.dataToPoint(s);p=b[0]||0,g=b[1]||0}else isArray$1(s)||(s=[s,s]),p=parsePercent(s[0],c)+n.x,g=parsePercent(s[1],u)+n.y;return{cx:p,cy:g,r0:h,r:f}}function pieLayout(o,a,n){a.eachSeriesByType(o,function(s){var l=s.getData(),c=l.mapDimension("value"),u=getViewRect$5(s,n),d=getBasicPieLayout(s,n),h=d.cx,f=d.cy,p=d.r,g=d.r0,v=-s.get("startAngle")*RADIAN$2,b=s.get("endAngle"),w=s.get("padAngle")*RADIAN$2;b=b==="auto"?v-PI2:-b*RADIAN$2;var x=s.get("minAngle")*RADIAN$2,S=x+w,E=0;l.each(c,function(ve){!isNaN(ve)&&E++});var T=l.getSum(c),C=Math.PI/(T||E)*2,A=s.get("clockwise"),R=s.get("roseType"),j=s.get("stillShowZeroSum"),D=l.getDataExtent(c);D[0]=0;var O=A?1:-1,H=[v,b],q=O*w/2;normalizeArcAngles(H,!A),v=H[0],b=H[1];var Y=getSeriesLayoutData(s);Y.startAngle=v,Y.endAngle=b,Y.clockwise=A;var te=Math.abs(b-v),ee=te,re=0,ne=v;if(l.setLayout({viewRect:u,r:p}),l.each(c,function(ve,be){var me;if(isNaN(ve)){l.setItemLayout(be,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:h,cy:f,r0:g,r:R?NaN:p});return}R!=="area"?me=T===0&&j?C:ve*C:me=te/E,me<S?(me=S,ee-=S):re+=ve;var ae=ne+O*me,pe=0,ie=0;w>me?(pe=ne+O*me/2,ie=pe):(pe=ne+q,ie=ae-q),l.setItemLayout(be,{angle:me,startAngle:pe,endAngle:ie,clockwise:A,cx:h,cy:f,r0:g,r:R?linearMap$2(ve,D,[g,p]):p}),ne=ae}),ee<PI2&&E)if(ee<=.001){var ce=te/E;l.each(c,function(ve,be){if(!isNaN(ve)){var me=l.getItemLayout(be);me.angle=ce;var ae=0,pe=0;ce<w?(ae=v+O*(be+1/2)*ce,pe=ae):(ae=v+O*be*ce+q,pe=v+O*(be+1)*ce-q),me.startAngle=ae,me.endAngle=pe}})}else C=ee/re,ne=v,l.each(c,function(ve,be){if(!isNaN(ve)){var me=l.getItemLayout(be),ae=me.angle===S?S:ve*C,pe=0,ie=0;ae<w?(pe=ne+O*ae/2,ie=pe):(pe=ne+q,ie=ne+O*ae-q),me.startAngle=pe,me.endAngle=ie,ne+=O*ae}})})}var getSeriesLayoutData=makeInner();function dataFilter$1(o){return{seriesType:o,reset:function(a,n){var s=n.findComponents({mainType:"legend"});if(!(!s||!s.length)){var l=a.getData();l.filterSelf(function(c){for(var u=l.getName(c),d=0;d<s.length;d++)if(!s[d].isSelected(u))return!1;return!0})}}}}var RADIAN$1=Math.PI/180;function adjustSingleSide(o,a,n,s,l,c,u,d,h,f){if(o.length<2)return;function p(x){for(var S=x.rB,E=S*S,T=0;T<x.list.length;T++){var C=x.list[T],A=Math.abs(C.label.y-n),R=s+C.len,j=R*R,D=Math.sqrt(Math.abs((1-A*A/E)*j)),O=a+(D+C.len2)*l,H=O-C.label.x,q=C.targetTextWidth-H*l;constrainTextWidth(C,q,!0),C.label.x=O}}function g(x){for(var S={list:[],maxY:0},E={list:[],maxY:0},T=0;T<x.length;T++)if(x[T].labelAlignTo==="none"){var C=x[T],A=C.label.y>n?E:S,R=Math.abs(C.label.y-n);if(R>=A.maxY){var j=C.label.x-a-C.len2*l,D=s+C.len,O=Math.abs(j)<D?Math.sqrt(R*R/(1-j*j/D/D)):D;A.rB=O,A.maxY=R}A.list.push(C)}p(S),p(E)}for(var v=o.length,b=0;b<v;b++)if(o[b].position==="outer"&&o[b].labelAlignTo==="labelLine"){var w=o[b].label.x-f;o[b].linePoints[1][0]+=w,o[b].label.x=f}shiftLayoutOnY(o,h,h+u)&&g(o)}function avoidOverlap(o,a,n,s,l,c,u,d){for(var h=[],f=[],p=Number.MAX_VALUE,g=-Number.MAX_VALUE,v=0;v<o.length;v++){var b=o[v].label;isPositionCenter(o[v])||(b.x<a?(p=Math.min(p,b.x),h.push(o[v])):(g=Math.max(g,b.x),f.push(o[v])))}for(var v=0;v<o.length;v++){var w=o[v];if(!isPositionCenter(w)&&w.linePoints){if(w.labelStyleWidth!=null)continue;var b=w.label,x=w.linePoints,S=void 0;w.labelAlignTo==="edge"?b.x<a?S=x[2][0]-w.labelDistance-u-w.edgeDistance:S=u+l-w.edgeDistance-x[2][0]-w.labelDistance:w.labelAlignTo==="labelLine"?b.x<a?S=p-u-w.bleedMargin:S=u+l-g-w.bleedMargin:b.x<a?S=b.x-u-w.bleedMargin:S=u+l-b.x-w.bleedMargin,w.targetTextWidth=S,constrainTextWidth(w,S)}}adjustSingleSide(f,a,n,s,1,l,c,u,d,g),adjustSingleSide(h,a,n,s,-1,l,c,u,d,p);for(var v=0;v<o.length;v++){var w=o[v];if(!isPositionCenter(w)&&w.linePoints){var b=w.label,x=w.linePoints,E=w.labelAlignTo==="edge",T=b.style.padding,C=T?T[1]+T[3]:0,A=b.style.backgroundColor?0:C,R=w.rect.width+A,j=x[1][0]-x[2][0];E?b.x<a?x[2][0]=u+w.edgeDistance+R+w.labelDistance:x[2][0]=u+l-w.edgeDistance-R-w.labelDistance:(b.x<a?x[2][0]=b.x+w.labelDistance:x[2][0]=b.x-w.labelDistance,x[1][0]=x[2][0]+j),x[1][1]=x[2][1]=b.y}}}function constrainTextWidth(o,a,n){if(n===void 0&&(n=!1),o.labelStyleWidth==null){var s=o.label,l=s.style,c=o.rect,u=l.backgroundColor,d=l.padding,h=d?d[1]+d[3]:0,f=l.overflow,p=c.width+(u?0:h);if(a<p||n){var g=c.height;if(f&&f.match("break")){s.setStyle("backgroundColor",null),s.setStyle("width",a-h);var v=s.getBoundingRect();s.setStyle("width",Math.ceil(v.width)),s.setStyle("backgroundColor",u)}else{var b=a-h,w=a<p?b:n?b>o.unconstrainedWidth?null:b:null;s.setStyle("width",w)}var x=s.getBoundingRect();c.width=x.width;var S=(s.style.margin||0)+2.1;c.height=x.height+S,c.y-=(c.height-g)/2}}}function isPositionCenter(o){return o.position==="center"}function pieLabelLayout(o){var a=o.getData(),n=[],s,l,c=!1,u=(o.get("minShowLabelAngle")||0)*RADIAN$1,d=a.getLayout("viewRect"),h=a.getLayout("r"),f=d.width,p=d.x,g=d.y,v=d.height;function b(j){j.ignore=!0}function w(j){if(!j.ignore)return!0;for(var D in j.states)if(j.states[D].ignore===!1)return!0;return!1}a.each(function(j){var D=a.getItemGraphicEl(j),O=D.shape,H=D.getTextContent(),q=D.getTextGuideLine(),Y=a.getItemModel(j),te=Y.getModel("label"),ee=te.get("position")||Y.get(["emphasis","label","position"]),re=te.get("distanceToLabelLine"),ne=te.get("alignTo"),ce=parsePercent(te.get("edgeDistance"),f),ve=te.get("bleedMargin"),be=Y.getModel("labelLine"),me=be.get("length");me=parsePercent(me,f);var ae=be.get("length2");if(ae=parsePercent(ae,f),Math.abs(O.endAngle-O.startAngle)<u){each$f(H.states,b),H.ignore=!0,q&&(each$f(q.states,b),q.ignore=!0);return}if(w(H)){var pe=(O.startAngle+O.endAngle)/2,ie=Math.cos(pe),se=Math.sin(pe),de,le,ge,Re;s=O.cx,l=O.cy;var we=ee==="inside"||ee==="inner";if(ee==="center")de=O.cx,le=O.cy,Re="center";else{var Se=(we?(O.r+O.r0)/2*ie:O.r*ie)+s,xe=(we?(O.r+O.r0)/2*se:O.r*se)+l;if(de=Se+ie*3,le=xe+se*3,!we){var ke=Se+ie*(me+h-O.r),Ie=xe+se*(me+h-O.r),He=ke+(ie<0?-1:1)*ae,Le=Ie;ne==="edge"?de=ie<0?p+ce:p+f-ce:de=He+(ie<0?-re:re),le=Le,ge=[[Se,xe],[ke,Ie],[He,Le]]}Re=we?"center":ne==="edge"?ie>0?"right":"left":ie>0?"left":"right"}var De=Math.PI,Ee=0,oe=te.get("rotate");if(isNumber(oe))Ee=oe*(De/180);else if(ee==="center")Ee=0;else if(oe==="radial"||oe===!0){var he=ie<0?-pe+De:-pe;Ee=he}else if(oe==="tangential"&&ee!=="outside"&&ee!=="outer"){var Me=Math.atan2(ie,se);Me<0&&(Me=De*2+Me);var fe=se>0;fe&&(Me=De+Me),Ee=Me-De}if(c=!!Ee,H.x=de,H.y=le,H.rotation=Ee,H.setStyle({verticalAlign:"middle"}),we){H.setStyle({align:Re});var je=H.states.select;je&&(je.x+=H.x,je.y+=H.y)}else{var Pe=H.getBoundingRect().clone();Pe.applyTransform(H.getComputedTransform());var Oe=(H.style.margin||0)+2.1;Pe.y-=Oe/2,Pe.height+=Oe,n.push({label:H,labelLine:q,position:ee,len:me,len2:ae,minTurnAngle:be.get("minTurnAngle"),maxSurfaceAngle:be.get("maxSurfaceAngle"),surfaceNormal:new Point(ie,se),linePoints:ge,textAlign:Re,labelDistance:re,labelAlignTo:ne,edgeDistance:ce,bleedMargin:ve,rect:Pe,unconstrainedWidth:Pe.width,labelStyleWidth:H.style.width})}D.setTextConfig({inside:we})}}),!c&&o.get("avoidLabelOverlap")&&avoidOverlap(n,s,l,h,f,v,p,g);for(var x=0;x<n.length;x++){var S=n[x],E=S.label,T=S.labelLine,C=isNaN(E.x)||isNaN(E.y);if(E){E.setStyle({align:S.textAlign}),C&&(each$f(E.states,b),E.ignore=!0);var A=E.states.select;A&&(A.x+=E.x,A.y+=E.y)}if(T){var R=S.linePoints;C||!R?(each$f(T.states,b),T.ignore=!0):(limitTurnAngle(R,S.minTurnAngle),limitSurfaceAngle(R,S.surfaceNormal,S.maxSurfaceAngle),T.setShape({points:R}),E.__hostTarget.textGuideLineConfig={anchor:new Point(R[0][0],R[0][1])})}}}var PiePiece=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this)||this;c.z2=2;var u=new ZRText;return c.setTextContent(u),c.updateData(n,s,l,!0),c}return a.prototype.updateData=function(n,s,l,c){var u=this,d=n.hostModel,h=n.getItemModel(s),f=h.getModel("emphasis"),p=n.getItemLayout(s),g=extend(getSectorCornerRadius(h.getModel("itemStyle"),p,!0),p);if(isNaN(g.startAngle)){u.setShape(g);return}if(c){u.setShape(g);var v=d.getShallow("animationType");d.ecModel.ssr?(initProps(u,{scaleX:0,scaleY:0},d,{dataIndex:s,isFrom:!0}),u.originX=g.cx,u.originY=g.cy):v==="scale"?(u.shape.r=p.r0,initProps(u,{shape:{r:p.r}},d,s)):l!=null?(u.setShape({startAngle:l,endAngle:l}),initProps(u,{shape:{startAngle:p.startAngle,endAngle:p.endAngle}},d,s)):(u.shape.endAngle=p.startAngle,updateProps$1(u,{shape:{endAngle:p.endAngle}},d,s))}else saveOldStyle(u),updateProps$1(u,{shape:g},d,s);u.useStyle(n.getItemVisual(s,"style")),setStatesStylesFromModel(u,h);var b=(p.startAngle+p.endAngle)/2,w=d.get("selectedOffset"),x=Math.cos(b)*w,S=Math.sin(b)*w,E=h.getShallow("cursor");E&&u.attr("cursor",E),this._updateLabel(d,n,s),u.ensureState("emphasis").shape=extend({r:p.r+(f.get("scale")&&f.get("scaleSize")||0)},getSectorCornerRadius(f.getModel("itemStyle"),p)),extend(u.ensureState("select"),{x,y:S,shape:getSectorCornerRadius(h.getModel(["select","itemStyle"]),p)}),extend(u.ensureState("blur"),{shape:getSectorCornerRadius(h.getModel(["blur","itemStyle"]),p)});var T=u.getTextGuideLine(),C=u.getTextContent();T&&extend(T.ensureState("select"),{x,y:S}),extend(C.ensureState("select"),{x,y:S}),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},a.prototype._updateLabel=function(n,s,l){var c=this,u=s.getItemModel(l),d=u.getModel("labelLine"),h=s.getItemVisual(l,"style"),f=h&&h.fill,p=h&&h.opacity;setLabelStyle(c,getLabelStatesModels(u),{labelFetcher:s.hostModel,labelDataIndex:l,inheritColor:f,defaultOpacity:p,defaultText:n.getFormattedLabel(l,"normal")||s.getName(l)});var g=c.getTextContent();c.setTextConfig({position:null,rotation:null}),g.attr({z2:10});var v=n.get(["label","position"]);if(v!=="outside"&&v!=="outer")c.removeTextGuideLine();else{var b=this.getTextGuideLine();b||(b=new Polyline$1,this.setTextGuideLine(b)),setLabelLineStyle(this,getLabelLineStatesModels(u),{stroke:f,opacity:retrieve3(d.get(["lineStyle","opacity"]),p,1)})}},a}(Sector),PieView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.ignoreLabelLineUpdate=!0,n}return a.prototype.render=function(n,s,l,c){var u=n.getData(),d=this._data,h=this.group,f;if(!d&&u.count()>0){for(var p=u.getItemLayout(0),g=1;isNaN(p&&p.startAngle)&&g<u.count();++g)p=u.getItemLayout(g);p&&(f=p.startAngle)}if(this._emptyCircleSector&&h.remove(this._emptyCircleSector),u.count()===0&&n.get("showEmptyCircle")){var v=getSeriesLayoutData(n),b=new Sector({shape:extend(getBasicPieLayout(n,l),v)});b.useStyle(n.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=b,h.add(b)}u.diff(d).add(function(w){var x=new PiePiece(u,w,f);u.setItemGraphicEl(w,x),h.add(x)}).update(function(w,x){var S=d.getItemGraphicEl(x);S.updateData(u,w,f),S.off("click"),h.add(S),u.setItemGraphicEl(w,S)}).remove(function(w){var x=d.getItemGraphicEl(w);removeElementWithFadeOut(x,n,w)}).execute(),pieLabelLayout(n),n.get("animationTypeUpdate")!=="expansion"&&(this._data=u)},a.prototype.dispose=function(){},a.prototype.containPoint=function(n,s){var l=s.getData(),c=l.getItemLayout(0);if(c){var u=n[0]-c.cx,d=n[1]-c.cy,h=Math.sqrt(u*u+d*d);return h<=c.r&&h>=c.r0}},a.type="pie",a}(ChartView);function createSeriesDataSimply(o,a,n){a=isArray$1(a)&&{coordDimensions:a}||extend({encodeDefine:o.getEncode()},a);var s=o.getSource(),l=prepareSeriesDataSchema(s,a).dimensions,c=new SeriesData(l,o);return c.initData(s,n),c}var LegendVisualProvider=function(){function o(a,n){this._getDataWithEncodedVisual=a,this._getRawData=n}return o.prototype.getAllNames=function(){var a=this._getRawData();return a.mapArray(a.getName)},o.prototype.containName=function(a){var n=this._getRawData();return n.indexOfName(a)>=0},o.prototype.indexOfName=function(a){var n=this._getDataWithEncodedVisual();return n.indexOfName(a)},o.prototype.getItemVisual=function(a,n){var s=this._getDataWithEncodedVisual();return s.getItemVisual(a,n)},o}(),innerData=makeInner(),PieSeriesModel=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.init=function(n){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},a.prototype.mergeOption=function(){o.prototype.mergeOption.apply(this,arguments)},a.prototype.getInitialData=function(){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},a.prototype.getDataParams=function(n){var s=this.getData(),l=innerData(s),c=l.seats;if(!c){var u=[];s.each(s.mapDimension("value"),function(h){u.push(h)}),c=l.seats=getPercentSeats(u,s.hostModel.get("percentPrecision"))}var d=o.prototype.getDataParams.call(this,n);return d.percent=c[n]||0,d.$vars.push("percent"),d},a.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var s=n.labelLine,l=n.emphasis.labelLine;s.show=s.show&&n.label.show,l.show=l.show&&n.emphasis.label.show},a.type="series.pie",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},a}(SeriesModel);function negativeDataFilter(o){return{seriesType:o,reset:function(a,n){var s=a.getData();s.filterSelf(function(l){var c=s.mapDimension("value"),u=s.get(c,l);return!(isNumber(u)&&!isNaN(u)&&u<0)})}}}function install$O(o){o.registerChartView(PieView),o.registerSeriesModel(PieSeriesModel),createLegacyDataSelectAction("pie",o.registerAction),o.registerLayout(curry$1(pieLayout,"pie")),o.registerProcessor(dataFilter$1("pie")),o.registerProcessor(negativeDataFilter("pie"))}var ScatterSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.hasSymbolVisual=!0,n}return a.prototype.getInitialData=function(n,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?5e3:this.get("progressive"))},a.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?1e4:this.get("progressiveThreshold"))},a.prototype.brushSelector=function(n,s,l){return l.point(s.getItemLayout(n))},a.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},a.type="series.scatter",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},a}(SeriesModel),BOOST_SIZE_THRESHOLD=4,LargeSymbolPathShape=function(){function o(){}return o}(),LargeSymbolPath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s._off=0,s.hoverDataIdx=-1,s}return a.prototype.getDefaultShape=function(){return new LargeSymbolPathShape},a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.buildPath=function(n,s){var l=s.points,c=s.size,u=this.symbolProxy,d=u.shape,h=n.getContext?n.getContext():n,f=h&&c[0]<BOOST_SIZE_THRESHOLD,p=this.softClipShape,g;if(f){this._ctx=h;return}for(this._ctx=null,g=this._off;g<l.length;){var v=l[g++],b=l[g++];isNaN(v)||isNaN(b)||p&&!p.contain(v,b)||(d.x=v-c[0]/2,d.y=b-c[1]/2,d.width=c[0],d.height=c[1],u.buildPath(n,d,!0))}this.incremental&&(this._off=g,this.notClear=!0)},a.prototype.afterBrush=function(){var n=this.shape,s=n.points,l=n.size,c=this._ctx,u=this.softClipShape,d;if(c){for(d=this._off;d<s.length;){var h=s[d++],f=s[d++];isNaN(h)||isNaN(f)||u&&!u.contain(h,f)||c.fillRect(h-l[0]/2,f-l[1]/2,l[0],l[1])}this.incremental&&(this._off=d,this.notClear=!0)}},a.prototype.findDataIndex=function(n,s){for(var l=this.shape,c=l.points,u=l.size,d=Math.max(u[0],4),h=Math.max(u[1],4),f=c.length/2-1;f>=0;f--){var p=f*2,g=c[p]-d/2,v=c[p+1]-h/2;if(n>=g&&s>=v&&n<=g+d&&s<=v+h)return f}return-1},a.prototype.contain=function(n,s){var l=this.transformCoordToLocal(n,s),c=this.getBoundingRect();if(n=l[0],s=l[1],c.contain(n,s)){var u=this.hoverDataIdx=this.findDataIndex(n,s);return u>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var s=this.shape,l=s.points,c=s.size,u=c[0],d=c[1],h=1/0,f=1/0,p=-1/0,g=-1/0,v=0;v<l.length;){var b=l[v++],w=l[v++];h=Math.min(b,h),p=Math.max(b,p),f=Math.min(w,f),g=Math.max(w,g)}n=this._rect=new BoundingRect(h-u/2,f-d/2,p-h+u,g-f+d)}return n},a}(Path),LargeSymbolDraw=function(){function o(){this.group=new Group$3}return o.prototype.updateData=function(a,n){this._clear();var s=this._create();s.setShape({points:a.getLayout("points")}),this._setCommon(s,a,n)},o.prototype.updateLayout=function(a){var n=a.getLayout("points");this.group.eachChild(function(s){if(s.startIndex!=null){var l=(s.endIndex-s.startIndex)*2,c=s.startIndex*4*2;n=new Float32Array(n.buffer,c,l)}s.setShape("points",n),s.reset()})},o.prototype.incrementalPrepareUpdate=function(a){this._clear()},o.prototype.incrementalUpdate=function(a,n,s){var l=this._newAdded[0],c=n.getLayout("points"),u=l&&l.shape.points;if(u&&u.length<2e4){var d=u.length,h=new Float32Array(d+c.length);h.set(u),h.set(c,d),l.endIndex=a.end,l.setShape({points:h})}else{this._newAdded=[];var f=this._create();f.startIndex=a.start,f.endIndex=a.end,f.incremental=!0,f.setShape({points:c}),this._setCommon(f,n,s)}},o.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},o.prototype._create=function(){var a=new LargeSymbolPath({cursor:"default"});return a.ignoreCoarsePointer=!0,this.group.add(a),this._newAdded.push(a),a},o.prototype._setCommon=function(a,n,s){var l=n.hostModel;s=s||{};var c=n.getVisual("symbolSize");a.setShape("size",c instanceof Array?c:[c,c]),a.softClipShape=s.clipShape||null,a.symbolProxy=createSymbol$1(n.getVisual("symbol"),0,0,0,0),a.setColor=a.symbolProxy.setColor;var u=a.shape.size[0]<BOOST_SIZE_THRESHOLD;a.useStyle(l.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var d=n.getVisual("style"),h=d&&d.fill;h&&a.setColor(h);var f=getECData(a);f.seriesIndex=l.seriesIndex,a.on("mousemove",function(p){f.dataIndex=null;var g=a.hoverDataIdx;g>=0&&(f.dataIndex=g+(a.startIndex||0))})},o.prototype.remove=function(){this._clear()},o.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},o}(),ScatterView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=n.getData(),u=this._updateSymbolDraw(c,n);u.updateData(c,{clipShape:this._getClipShape(n)}),this._finished=!0},a.prototype.incrementalPrepareRender=function(n,s,l){var c=n.getData(),u=this._updateSymbolDraw(c,n);u.incrementalPrepareUpdate(c),this._finished=!1},a.prototype.incrementalRender=function(n,s,l){this._symbolDraw.incrementalUpdate(n,s.getData(),{clipShape:this._getClipShape(s)}),this._finished=n.end===s.getData().count()},a.prototype.updateTransform=function(n,s,l){var c=n.getData();if(this.group.dirty(),!this._finished||c.count()>1e4)return{update:!0};var u=pointsLayout("").reset(n,s,l);u.progress&&u.progress({start:0,end:c.count(),count:c.count()},c),this._symbolDraw.updateLayout(c)},a.prototype.eachRendered=function(n){this._symbolDraw&&this._symbolDraw.eachRendered(n)},a.prototype._getClipShape=function(n){if(n.get("clip",!0)){var s=n.coordinateSystem;return s&&s.getArea&&s.getArea(.1)}},a.prototype._updateSymbolDraw=function(n,s){var l=this._symbolDraw,c=s.pipelineContext,u=c.large;return(!l||u!==this._isLargeDraw)&&(l&&l.remove(),l=this._symbolDraw=u?new LargeSymbolDraw:new SymbolDraw,this._isLargeDraw=u,this.group.removeAll()),this.group.add(l.group),l},a.prototype.remove=function(n,s){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},a.prototype.dispose=function(){},a.type="scatter",a}(ChartView),GridModel=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.type="grid",a.dependencies=["xAxis","yAxis"],a.layoutMode="box",a.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},a}(ComponentModel),CartesianAxisModel=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",SINGLE_REFERRING).models[0]},a.type="cartesian2dAxis",a}(ComponentModel);mixin(CartesianAxisModel,AxisModelCommonMixin);var defaultOption$1={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,showMinLine:!0,showMaxLine:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},categoryAxis=merge({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},defaultOption$1),valueAxis=merge({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},defaultOption$1),timeAxis=merge({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},valueAxis),logAxis=defaults({logBase:10},valueAxis);const axisDefault={category:categoryAxis,value:valueAxis,time:timeAxis,log:logAxis};var AXIS_TYPES={value:1,category:1,time:1,log:1};function axisModelCreator(o,a,n,s){each$f(AXIS_TYPES,function(l,c){var u=merge(merge({},axisDefault[c],!0),s,!0),d=function(h){__extends$1(f,h);function f(){var p=h!==null&&h.apply(this,arguments)||this;return p.type=a+"Axis."+c,p}return f.prototype.mergeDefaultAndTheme=function(p,g){var v=fetchLayoutMode(this),b=v?getLayoutParams(p):{},w=g.getTheme();merge(p,w.get(c+"Axis")),merge(p,this.getDefaultOption()),p.type=getAxisType(p),v&&mergeLayoutParam(p,b,v)},f.prototype.optionUpdated=function(){var p=this.option;p.type==="category"&&(this.__ordinalMeta=OrdinalMeta.createByAxisModel(this))},f.prototype.getCategories=function(p){var g=this.option;if(g.type==="category")return p?g.data:this.__ordinalMeta.categories},f.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},f.type=a+"Axis."+c,f.defaultOption=u,f}(n);o.registerComponentModel(d)}),o.registerSubTypeDefaulter(a+"Axis",getAxisType)}function getAxisType(o){return o.type||(o.data?"category":"value")}var Cartesian=function(){function o(a){this.type="cartesian",this._dimList=[],this._axes={},this.name=a||""}return o.prototype.getAxis=function(a){return this._axes[a]},o.prototype.getAxes=function(){return map$1(this._dimList,function(a){return this._axes[a]},this)},o.prototype.getAxesByScale=function(a){return a=a.toLowerCase(),filter(this.getAxes(),function(n){return n.scale.type===a})},o.prototype.addAxis=function(a){var n=a.dim;this._axes[n]=a,this._dimList.push(n)},o}(),cartesian2DDimensions=["x","y"];function canCalculateAffineTransform(o){return o.type==="interval"||o.type==="time"}var Cartesian2D=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="cartesian2d",n.dimensions=cartesian2DDimensions,n}return a.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var n=this.getAxis("x").scale,s=this.getAxis("y").scale;if(!(!canCalculateAffineTransform(n)||!canCalculateAffineTransform(s))){var l=n.getExtent(),c=s.getExtent(),u=this.dataToPoint([l[0],c[0]]),d=this.dataToPoint([l[1],c[1]]),h=l[1]-l[0],f=c[1]-c[0];if(!(!h||!f)){var p=(d[0]-u[0])/h,g=(d[1]-u[1])/f,v=u[0]-l[0]*p,b=u[1]-c[0]*g,w=this._transform=[p,0,0,g,v,b];this._invTransform=invert([],w)}}},a.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},a.prototype.containPoint=function(n){var s=this.getAxis("x"),l=this.getAxis("y");return s.contain(s.toLocalCoord(n[0]))&&l.contain(l.toLocalCoord(n[1]))},a.prototype.containData=function(n){return this.getAxis("x").containData(n[0])&&this.getAxis("y").containData(n[1])},a.prototype.containZone=function(n,s){var l=this.dataToPoint(n),c=this.dataToPoint(s),u=this.getArea(),d=new BoundingRect(l[0],l[1],c[0]-l[0],c[1]-l[1]);return u.intersect(d)},a.prototype.dataToPoint=function(n,s,l){l=l||[];var c=n[0],u=n[1];if(this._transform&&c!=null&&isFinite(c)&&u!=null&&isFinite(u))return applyTransform$1(l,n,this._transform);var d=this.getAxis("x"),h=this.getAxis("y");return l[0]=d.toGlobalCoord(d.dataToCoord(c,s)),l[1]=h.toGlobalCoord(h.dataToCoord(u,s)),l},a.prototype.clampData=function(n,s){var l=this.getAxis("x").scale,c=this.getAxis("y").scale,u=l.getExtent(),d=c.getExtent(),h=l.parse(n[0]),f=c.parse(n[1]);return s=s||[],s[0]=Math.min(Math.max(Math.min(u[0],u[1]),h),Math.max(u[0],u[1])),s[1]=Math.min(Math.max(Math.min(d[0],d[1]),f),Math.max(d[0],d[1])),s},a.prototype.pointToData=function(n,s){var l=[];if(this._invTransform)return applyTransform$1(l,n,this._invTransform);var c=this.getAxis("x"),u=this.getAxis("y");return l[0]=c.coordToData(c.toLocalCoord(n[0]),s),l[1]=u.coordToData(u.toLocalCoord(n[1]),s),l},a.prototype.getOtherAxis=function(n){return this.getAxis(n.dim==="x"?"y":"x")},a.prototype.getArea=function(n){n=n||0;var s=this.getAxis("x").getGlobalExtent(),l=this.getAxis("y").getGlobalExtent(),c=Math.min(s[0],s[1])-n,u=Math.min(l[0],l[1])-n,d=Math.max(s[0],s[1])-c+n,h=Math.max(l[0],l[1])-u+n;return new BoundingRect(c,u,d,h)},a}(Cartesian),Axis2D=function(o){__extends$1(a,o);function a(n,s,l,c,u){var d=o.call(this,n,s,l)||this;return d.index=0,d.type=c||"value",d.position=u||"bottom",d}return a.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},a.prototype.getGlobalExtent=function(n){var s=this.getExtent();return s[0]=this.toGlobalCoord(s[0]),s[1]=this.toGlobalCoord(s[1]),n&&s[0]>s[1]&&s.reverse(),s},a.prototype.pointToData=function(n,s){return this.coordToData(this.toLocalCoord(n[this.dim==="x"?0:1]),s)},a.prototype.setCategorySortInfo=function(n){if(this.type!=="category")return!1;this.model.option.categorySortInfo=n,this.scale.setSortInfo(n)},a}(Axis);function layout$2(o,a,n){n=n||{};var s=o.coordinateSystem,l=a.axis,c={},u=l.getAxesOnZeroOf()[0],d=l.position,h=u?"onZero":d,f=l.dim,p=s.getRect(),g=[p.x,p.x+p.width,p.y,p.y+p.height],v={left:0,right:1,top:0,bottom:1,onZero:2},b=a.get("offset")||0,w=f==="x"?[g[2]-b,g[3]+b]:[g[0]-b,g[1]+b];if(u){var x=u.toGlobalCoord(u.dataToCoord(0));w[v.onZero]=Math.max(Math.min(x,w[1]),w[0])}c.position=[f==="y"?w[v[h]]:g[0],f==="x"?w[v[h]]:g[3]],c.rotation=Math.PI/2*(f==="x"?0:1);var S={top:-1,bottom:1,left:-1,right:1};c.labelDirection=c.tickDirection=c.nameDirection=S[d],c.labelOffset=u?w[v[d]]-w[v.onZero]:0,a.get(["axisTick","inside"])&&(c.tickDirection=-c.tickDirection),retrieve(n.labelInside,a.get(["axisLabel","inside"]))&&(c.labelDirection=-c.labelDirection);var E=a.get(["axisLabel","rotate"]);return c.labelRotate=h==="top"?-E:E,c.z2=1,c}function isCartesian2DSeries(o){return o.get("coordinateSystem")==="cartesian2d"}function findAxisModels(o){var a={xAxisModel:null,yAxisModel:null};return each$f(a,function(n,s){var l=s.replace(/Model$/,""),c=o.getReferringComponents(l,SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"&&!c)throw new Error(l+' "'+retrieve3(o.get(l+"Index"),o.get(l+"Id"),0)+'" not found');a[s]=c}),a}var mathLog=Math.log;function alignScaleTicks(o,a,n){var s=IntervalScale.prototype,l=s.getTicks.call(n),c=s.getTicks.call(n,!0),u=l.length-1,d=s.getInterval.call(n),h=getScaleExtent(o,a),f=h.extent,p=h.fixMin,g=h.fixMax;if(o.type==="log"){var v=mathLog(o.base);f=[mathLog(f[0])/v,mathLog(f[1])/v]}o.setExtent(f[0],f[1]),o.calcNiceExtent({splitNumber:u,fixMin:p,fixMax:g});var b=s.getExtent.call(o);p&&(f[0]=b[0]),g&&(f[1]=b[1]);var w=s.getInterval.call(o),x=f[0],S=f[1];if(p&&g)w=(S-x)/u;else if(p)for(S=f[0]+w*u;S<f[1]&&isFinite(S)&&isFinite(f[1]);)w=increaseInterval(w),S=f[0]+w*u;else if(g)for(x=f[1]-w*u;x>f[0]&&isFinite(x)&&isFinite(f[0]);)w=increaseInterval(w),x=f[1]-w*u;else{var E=o.getTicks().length-1;E>u&&(w=increaseInterval(w));var T=w*u;S=Math.ceil(f[1]/w)*w,x=round$3(S-T),x<0&&f[0]>=0?(x=0,S=round$3(T)):S>0&&f[1]<=0&&(S=0,x=-round$3(T))}var C=(l[0].value-c[0].value)/d,A=(l[u].value-c[u].value)/d;if(s.setExtent.call(o,x+w*C,S+w*A),s.setInterval.call(o,w),(C||A)&&s.setNiceExtent.call(o,x+w,S-w),process.env.NODE_ENV!=="production"){var R=s.getTicks.call(o);R[1]&&(!isValueNice(w)||getPrecisionSafe(R[1].value)>getPrecisionSafe(w))&&warn("The ticks may be not readable when set min: "+a.get("min")+", max: "+a.get("max")+" and alignTicks: true")}}var Grid=function(){function o(a,n,s){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=cartesian2DDimensions,this._initCartesian(a,n,s),this.model=a}return o.prototype.getRect=function(){return this._rect},o.prototype.update=function(a,n){var s=this._axesMap;this._updateScale(a,this.model);function l(u){var d,h=keys$1(u),f=h.length;if(f){for(var p=[],g=f-1;g>=0;g--){var v=+h[g],b=u[v],w=b.model,x=b.scale;isIntervalOrLogScale(x)&&w.get("alignTicks")&&w.get("interval")==null?p.push(b):(niceScaleExtent(x,w),isIntervalOrLogScale(x)&&(d=b))}p.length&&(d||(d=p.pop(),niceScaleExtent(d.scale,d.model)),each$f(p,function(S){alignScaleTicks(S.scale,S.model,d.scale)}))}}l(s.x),l(s.y);var c={};each$f(s.x,function(u){fixAxisOnZero(s,"y",u,c)}),each$f(s.y,function(u){fixAxisOnZero(s,"x",u,c)}),this.resize(this.model,n)},o.prototype.resize=function(a,n,s){var l=a.getBoxLayoutParams(),c=!s&&a.get("containLabel"),u=getLayoutRect(l,{width:n.getWidth(),height:n.getHeight()});this._rect=u;var d=this._axesList;h(),c&&(each$f(d,function(f){if(!f.model.get(["axisLabel","inside"])){var p=estimateLabelUnionRect(f);if(p){var g=f.isHorizontal()?"height":"width",v=f.model.get(["axisLabel","margin"]);u[g]-=p[g]+v,f.position==="top"?u.y+=p.height+v:f.position==="left"&&(u.x+=p.width+v)}}}),h()),each$f(this._coordsList,function(f){f.calcAffineTransform()});function h(){each$f(d,function(f){var p=f.isHorizontal(),g=p?[0,u.width]:[0,u.height],v=f.inverse?1:0;f.setExtent(g[v],g[1-v]),updateAxisTransform(f,p?u.x:u.y)})}},o.prototype.getAxis=function(a,n){var s=this._axesMap[a];if(s!=null)return s[n||0]},o.prototype.getAxes=function(){return this._axesList.slice()},o.prototype.getCartesian=function(a,n){if(a!=null&&n!=null){var s="x"+a+"y"+n;return this._coordsMap[s]}isObject$3(a)&&(n=a.yAxisIndex,a=a.xAxisIndex);for(var l=0,c=this._coordsList;l<c.length;l++)if(c[l].getAxis("x").index===a||c[l].getAxis("y").index===n)return c[l]},o.prototype.getCartesians=function(){return this._coordsList.slice()},o.prototype.convertToPixel=function(a,n,s){var l=this._findConvertTarget(n);return l.cartesian?l.cartesian.dataToPoint(s):l.axis?l.axis.toGlobalCoord(l.axis.dataToCoord(s)):null},o.prototype.convertFromPixel=function(a,n,s){var l=this._findConvertTarget(n);return l.cartesian?l.cartesian.pointToData(s):l.axis?l.axis.coordToData(l.axis.toLocalCoord(s)):null},o.prototype._findConvertTarget=function(a){var n=a.seriesModel,s=a.xAxisModel||n&&n.getReferringComponents("xAxis",SINGLE_REFERRING).models[0],l=a.yAxisModel||n&&n.getReferringComponents("yAxis",SINGLE_REFERRING).models[0],c=a.gridModel,u=this._coordsList,d,h;if(n)d=n.coordinateSystem,indexOf(u,d)<0&&(d=null);else if(s&&l)d=this.getCartesian(s.componentIndex,l.componentIndex);else if(s)h=this.getAxis("x",s.componentIndex);else if(l)h=this.getAxis("y",l.componentIndex);else if(c){var f=c.coordinateSystem;f===this&&(d=this._coordsList[0])}return{cartesian:d,axis:h}},o.prototype.containPoint=function(a){var n=this._coordsList[0];if(n)return n.containPoint(a)},o.prototype._initCartesian=function(a,n,s){var l=this,c=this,u={left:!1,right:!1,top:!1,bottom:!1},d={x:{},y:{}},h={x:0,y:0};if(n.eachComponent("xAxis",f("x"),this),n.eachComponent("yAxis",f("y"),this),!h.x||!h.y){this._axesMap={},this._axesList=[];return}this._axesMap=d,each$f(d.x,function(p,g){each$f(d.y,function(v,b){var w="x"+g+"y"+b,x=new Cartesian2D(w);x.master=l,x.model=a,l._coordsMap[w]=x,l._coordsList.push(x),x.addAxis(p),x.addAxis(v)})});function f(p){return function(g,v){if(isAxisUsedInTheGrid(g,a)){var b=g.get("position");p==="x"?b!=="top"&&b!=="bottom"&&(b=u.bottom?"top":"bottom"):b!=="left"&&b!=="right"&&(b=u.left?"right":"left"),u[b]=!0;var w=new Axis2D(p,createScaleByModel$1(g),[0,0],g.get("type"),b),x=w.type==="category";w.onBand=x&&g.get("boundaryGap"),w.inverse=g.get("inverse"),g.axis=w,w.model=g,w.grid=c,w.index=v,c._axesList.push(w),d[p][v]=w,h[p]++}}}},o.prototype._updateScale=function(a,n){each$f(this._axesList,function(l){if(l.scale.setExtent(1/0,-1/0),l.type==="category"){var c=l.model.get("categorySortInfo");l.scale.setSortInfo(c)}}),a.eachSeries(function(l){if(isCartesian2DSeries(l)){var c=findAxisModels(l),u=c.xAxisModel,d=c.yAxisModel;if(!isAxisUsedInTheGrid(u,n)||!isAxisUsedInTheGrid(d,n))return;var h=this.getCartesian(u.componentIndex,d.componentIndex),f=l.getData(),p=h.getAxis("x"),g=h.getAxis("y");s(f,p),s(f,g)}},this);function s(l,c){each$f(getDataDimensionsOnAxis(l,c.dim),function(u){c.scale.unionExtentFromData(l,u)})}},o.prototype.getTooltipAxes=function(a){var n=[],s=[];return each$f(this.getCartesians(),function(l){var c=a!=null&&a!=="auto"?l.getAxis(a):l.getBaseAxis(),u=l.getOtherAxis(c);indexOf(n,c)<0&&n.push(c),indexOf(s,u)<0&&s.push(u)}),{baseAxes:n,otherAxes:s}},o.create=function(a,n){var s=[];return a.eachComponent("grid",function(l,c){var u=new o(l,a,n);u.name="grid_"+c,u.resize(l,n,!0),l.coordinateSystem=u,s.push(u)}),a.eachSeries(function(l){if(isCartesian2DSeries(l)){var c=findAxisModels(l),u=c.xAxisModel,d=c.yAxisModel,h=u.getCoordSysModel();if(process.env.NODE_ENV!=="production"){if(!h)throw new Error('Grid "'+retrieve3(u.get("gridIndex"),u.get("gridId"),0)+'" not found');if(u.getCoordSysModel()!==d.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var f=h.coordinateSystem;l.coordinateSystem=f.getCartesian(u.componentIndex,d.componentIndex)}}),s},o.dimensions=cartesian2DDimensions,o}();function isAxisUsedInTheGrid(o,a){return o.getCoordSysModel()===a}function fixAxisOnZero(o,a,n,s){n.getAxesOnZeroOf=function(){return c?[c]:[]};var l=o[a],c,u=n.model,d=u.get(["axisLine","onZero"]),h=u.get(["axisLine","onZeroAxisIndex"]);if(!d)return;if(h!=null)canOnZeroToAxis(l[h])&&(c=l[h]);else for(var f in l)if(l.hasOwnProperty(f)&&canOnZeroToAxis(l[f])&&!s[p(l[f])]){c=l[f];break}c&&(s[p(c)]=!0);function p(g){return g.dim+"_"+g.index}}function canOnZeroToAxis(o){return o&&o.type!=="category"&&o.type!=="time"&&ifAxisCrossZero(o)}function updateAxisTransform(o,a){var n=o.getExtent(),s=n[0]+n[1];o.toGlobalCoord=o.dim==="x"?function(l){return l+a}:function(l){return s-l+a},o.toLocalCoord=o.dim==="x"?function(l){return l-a}:function(l){return s-l+a}}var PI$3=Math.PI,AxisBuilder=function(){function o(a,n){this.group=new Group$3,this.opt=n,this.axisModel=a,defaults(n,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var s=new Group$3({x:n.position[0],y:n.position[1],rotation:n.rotation});s.updateTransform(),this._transformGroup=s}return o.prototype.hasBuilder=function(a){return!!builders[a]},o.prototype.add=function(a){builders[a](this.opt,this.axisModel,this.group,this._transformGroup)},o.prototype.getGroup=function(){return this.group},o.innerTextLayout=function(a,n,s){var l=remRadian(n-a),c,u;return isRadianAroundZero(l)?(u=s>0?"top":"bottom",c="center"):isRadianAroundZero(l-PI$3)?(u=s>0?"bottom":"top",c="center"):(u="middle",l>0&&l<PI$3?c=s>0?"right":"left":c=s>0?"left":"right"),{rotation:l,textAlign:c,textVerticalAlign:u}},o.makeAxisEventDataBase=function(a){var n={componentType:a.mainType,componentIndex:a.componentIndex};return n[a.mainType+"Index"]=a.componentIndex,n},o.isLabelSilent=function(a){var n=a.get("tooltip");return a.get("silent")||!(a.get("triggerEvent")||n&&n.show)},o}(),builders={axisLine:function(o,a,n,s){var l=a.get(["axisLine","show"]);if(l==="auto"&&o.handleAutoShown&&(l=o.handleAutoShown("axisLine")),!!l){var c=a.axis.getExtent(),u=s.transform,d=[c[0],0],h=[c[1],0],f=d[0]>h[0];u&&(applyTransform$1(d,d,u),applyTransform$1(h,h,u));var p=extend({lineCap:"round"},a.getModel(["axisLine","lineStyle"]).getLineStyle()),g=new Line$1({shape:{x1:d[0],y1:d[1],x2:h[0],y2:h[1]},style:p,strokeContainThreshold:o.strokeContainThreshold||5,silent:!0,z2:1});subPixelOptimizeLine(g.shape,g.style.lineWidth),g.anid="line",n.add(g);var v=a.get(["axisLine","symbol"]);if(v!=null){var b=a.get(["axisLine","symbolSize"]);isString$2(v)&&(v=[v,v]),(isString$2(b)||isNumber(b))&&(b=[b,b]);var w=normalizeSymbolOffset(a.get(["axisLine","symbolOffset"])||0,b),x=b[0],S=b[1];each$f([{rotate:o.rotation+Math.PI/2,offset:w[0],r:0},{rotate:o.rotation-Math.PI/2,offset:w[1],r:Math.sqrt((d[0]-h[0])*(d[0]-h[0])+(d[1]-h[1])*(d[1]-h[1]))}],function(E,T){if(v[T]!=="none"&&v[T]!=null){var C=createSymbol$1(v[T],-x/2,-S/2,x,S,p.stroke,!0),A=E.r+E.offset,R=f?h:d;C.attr({rotation:E.rotate,x:R[0]+A*Math.cos(o.rotation),y:R[1]-A*Math.sin(o.rotation),silent:!0,z2:11}),n.add(C)}})}}},axisTickLabel:function(o,a,n,s){var l=buildAxisMajorTicks(n,s,a,o),c=buildAxisLabel(n,s,a,o);if(fixMinMaxLabelShow(a,c,l),buildAxisMinorTicks(n,s,a,o.tickDirection),a.get(["axisLabel","hideOverlap"])){var u=prepareLayoutList(map$1(c,function(d){return{label:d,priority:d.z2,defaultAttr:{ignore:d.ignore}}}));hideOverlap(u)}},axisName:function(o,a,n,s){var l=retrieve(o.axisName,a.get("name"));if(l){var c=a.get("nameLocation"),u=o.nameDirection,d=a.getModel("nameTextStyle"),h=a.get("nameGap")||0,f=a.axis.getExtent(),p=f[0]>f[1]?-1:1,g=[c==="start"?f[0]-p*h:c==="end"?f[1]+p*h:(f[0]+f[1])/2,isNameLocationCenter(c)?o.labelOffset+u*h:0],v,b=a.get("nameRotate");b!=null&&(b=b*PI$3/180);var w;isNameLocationCenter(c)?v=AxisBuilder.innerTextLayout(o.rotation,b??o.rotation,u):(v=endTextLayout(o.rotation,c,b||0,f),w=o.axisNameAvailableWidth,w!=null&&(w=Math.abs(w/Math.sin(v.rotation)),!isFinite(w)&&(w=null)));var x=d.getFont(),S=a.get("nameTruncate",!0)||{},E=S.ellipsis,T=retrieve(o.nameTruncateMaxWidth,S.maxWidth,w),C=new ZRText({x:g[0],y:g[1],rotation:v.rotation,silent:AxisBuilder.isLabelSilent(a),style:createTextStyle$1(d,{text:l,font:x,overflow:"truncate",width:T,ellipsis:E,fill:d.getTextColor()||a.get(["axisLine","lineStyle","color"]),align:d.get("align")||v.textAlign,verticalAlign:d.get("verticalAlign")||v.textVerticalAlign}),z2:1});if(setTooltipConfig({el:C,componentModel:a,itemName:l}),C.__fullText=l,C.anid="name",a.get("triggerEvent")){var A=AxisBuilder.makeAxisEventDataBase(a);A.targetType="axisName",A.name=l,getECData(C).eventData=A}s.add(C),C.updateTransform(),n.add(C),C.decomposeTransform()}}};function endTextLayout(o,a,n,s){var l=remRadian(n-o),c,u,d=s[0]>s[1],h=a==="start"&&!d||a!=="start"&&d;return isRadianAroundZero(l-PI$3/2)?(u=h?"bottom":"top",c="center"):isRadianAroundZero(l-PI$3*1.5)?(u=h?"top":"bottom",c="center"):(u="middle",l<PI$3*1.5&&l>PI$3/2?c=h?"left":"right":c=h?"right":"left"),{rotation:l,textAlign:c,textVerticalAlign:u}}function fixMinMaxLabelShow(o,a,n){if(!shouldShowAllLabels(o.axis)){var s=o.get(["axisLabel","showMinLabel"]),l=o.get(["axisLabel","showMaxLabel"]);a=a||[],n=n||[];var c=a[0],u=a[1],d=a[a.length-1],h=a[a.length-2],f=n[0],p=n[1],g=n[n.length-1],v=n[n.length-2];s===!1?(ignoreEl(c),ignoreEl(f)):isTwoLabelOverlapped(c,u)&&(s?(ignoreEl(u),ignoreEl(p)):(ignoreEl(c),ignoreEl(f))),l===!1?(ignoreEl(d),ignoreEl(g)):isTwoLabelOverlapped(h,d)&&(l?(ignoreEl(h),ignoreEl(v)):(ignoreEl(d),ignoreEl(g)))}}function ignoreEl(o){o&&(o.ignore=!0)}function isTwoLabelOverlapped(o,a){var n=o&&o.getBoundingRect().clone(),s=a&&a.getBoundingRect().clone();if(!(!n||!s)){var l=identity([]);return rotate(l,l,-o.rotation),n.applyTransform(mul([],l,o.getLocalTransform())),s.applyTransform(mul([],l,a.getLocalTransform())),n.intersect(s)}}function isNameLocationCenter(o){return o==="middle"||o==="center"}function createTicks(o,a,n,s,l){for(var c=[],u=[],d=[],h=0;h<o.length;h++){var f=o[h].coord;u[0]=f,u[1]=0,d[0]=f,d[1]=n,a&&(applyTransform$1(u,u,a),applyTransform$1(d,d,a));var p=new Line$1({shape:{x1:u[0],y1:u[1],x2:d[0],y2:d[1]},style:s,z2:2,autoBatch:!0,silent:!0});subPixelOptimizeLine(p.shape,p.style.lineWidth),p.anid=l+"_"+o[h].tickValue,c.push(p)}return c}function buildAxisMajorTicks(o,a,n,s){var l=n.axis,c=n.getModel("axisTick"),u=c.get("show");if(u==="auto"&&s.handleAutoShown&&(u=s.handleAutoShown("axisTick")),!(!u||l.scale.isBlank())){for(var d=c.getModel("lineStyle"),h=s.tickDirection*c.get("length"),f=l.getTicksCoords(),p=createTicks(f,a.transform,h,defaults(d.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),g=0;g<p.length;g++)o.add(p[g]);return p}}function buildAxisMinorTicks(o,a,n,s){var l=n.axis,c=n.getModel("minorTick");if(!(!c.get("show")||l.scale.isBlank())){var u=l.getMinorTicksCoords();if(u.length)for(var d=c.getModel("lineStyle"),h=s*c.get("length"),f=defaults(d.getLineStyle(),defaults(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),p=0;p<u.length;p++)for(var g=createTicks(u[p],a.transform,h,f,"minorticks_"+p),v=0;v<g.length;v++)o.add(g[v])}}function buildAxisLabel(o,a,n,s){var l=n.axis,c=retrieve(s.axisLabelShow,n.get(["axisLabel","show"]));if(!(!c||l.scale.isBlank())){var u=n.getModel("axisLabel"),d=u.get("margin"),h=l.getViewLabels(),f=(retrieve(s.labelRotate,u.get("rotate"))||0)*PI$3/180,p=AxisBuilder.innerTextLayout(s.rotation,f,s.labelDirection),g=n.getCategories&&n.getCategories(!0),v=[],b=AxisBuilder.isLabelSilent(n),w=n.get("triggerEvent");return each$f(h,function(x,S){var E=l.scale.type==="ordinal"?l.scale.getRawOrdinalNumber(x.tickValue):x.tickValue,T=x.formattedLabel,C=x.rawLabel,A=u;if(g&&g[E]){var R=g[E];isObject$3(R)&&R.textStyle&&(A=new Model(R.textStyle,u,n.ecModel))}var j=A.getTextColor()||n.get(["axisLine","lineStyle","color"]),D=l.dataToCoord(E),O=A.getShallow("align",!0)||p.textAlign,H=retrieve2(A.getShallow("alignMinLabel",!0),O),q=retrieve2(A.getShallow("alignMaxLabel",!0),O),Y=A.getShallow("verticalAlign",!0)||A.getShallow("baseline",!0)||p.textVerticalAlign,te=retrieve2(A.getShallow("verticalAlignMinLabel",!0),Y),ee=retrieve2(A.getShallow("verticalAlignMaxLabel",!0),Y),re=new ZRText({x:D,y:s.labelOffset+s.labelDirection*d,rotation:p.rotation,silent:b,z2:10+(x.level||0),style:createTextStyle$1(A,{text:T,align:S===0?H:S===h.length-1?q:O,verticalAlign:S===0?te:S===h.length-1?ee:Y,fill:isFunction$1(j)?j(l.type==="category"?C:l.type==="value"?E+"":E,S):j})});if(re.anid="label_"+E,setTooltipConfig({el:re,componentModel:n,itemName:T,formatterParamsExtra:{isTruncated:function(){return re.isTruncated},value:C,tickIndex:S}}),w){var ne=AxisBuilder.makeAxisEventDataBase(n);ne.targetType="axisLabel",ne.value=C,ne.tickIndex=S,l.type==="category"&&(ne.dataIndex=E),getECData(re).eventData=ne}a.add(re),re.updateTransform(),v.push(re),o.add(re),re.decomposeTransform()}),v}}function collect(o,a){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return collectAxesInfo(n,o,a),n.seriesInvolved&&collectSeriesInfo(n,o),n}function collectAxesInfo(o,a,n){var s=a.getComponent("tooltip"),l=a.getComponent("axisPointer"),c=l.get("link",!0)||[],u=[];each$f(n.getCoordinateSystems(),function(d){if(!d.axisPointerEnabled)return;var h=makeKey(d.model),f=o.coordSysAxesInfo[h]={};o.coordSysMap[h]=d;var p=d.model,g=p.getModel("tooltip",s);if(each$f(d.getAxes(),curry$1(x,!1,null)),d.getTooltipAxes&&s&&g.get("show")){var v=g.get("trigger")==="axis",b=g.get(["axisPointer","type"])==="cross",w=d.getTooltipAxes(g.get(["axisPointer","axis"]));(v||b)&&each$f(w.baseAxes,curry$1(x,b?"cross":!0,v)),b&&each$f(w.otherAxes,curry$1(x,"cross",!1))}function x(S,E,T){var C=T.model.getModel("axisPointer",l),A=C.get("show");if(!(!A||A==="auto"&&!S&&!isHandleTrigger(C))){E==null&&(E=C.get("triggerTooltip")),C=S?makeAxisPointerModel(T,g,l,a,S,E):C;var R=C.get("snap"),j=C.get("triggerEmphasis"),D=makeKey(T.model),O=E||R||T.type==="category",H=o.axesInfo[D]={key:D,axis:T,coordSys:d,axisPointerModel:C,triggerTooltip:E,triggerEmphasis:j,involveSeries:O,snap:R,useHandle:isHandleTrigger(C),seriesModels:[],linkGroup:null};f[D]=H,o.seriesInvolved=o.seriesInvolved||O;var q=getLinkGroupIndex(c,T);if(q!=null){var Y=u[q]||(u[q]={axesInfo:{}});Y.axesInfo[D]=H,Y.mapper=c[q].mapper,H.linkGroup=Y}}}})}function makeAxisPointerModel(o,a,n,s,l,c){var u=a.getModel("axisPointer"),d=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],h={};each$f(d,function(v){h[v]=clone$4(u.get(v))}),h.snap=o.type!=="category"&&!!c,u.get("type")==="cross"&&(h.type="line");var f=h.label||(h.label={});if(f.show==null&&(f.show=!1),l==="cross"){var p=u.get(["label","show"]);if(f.show=p??!0,!c){var g=h.lineStyle=u.get("crossStyle");g&&defaults(f,g.textStyle)}}return o.model.getModel("axisPointer",new Model(h,n,s))}function collectSeriesInfo(o,a){a.eachSeries(function(n){var s=n.coordinateSystem,l=n.get(["tooltip","trigger"],!0),c=n.get(["tooltip","show"],!0);!s||l==="none"||l===!1||l==="item"||c===!1||n.get(["axisPointer","show"],!0)===!1||each$f(o.coordSysAxesInfo[makeKey(s.model)],function(u){var d=u.axis;s.getAxis(d.dim)===d&&(u.seriesModels.push(n),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=n.getData().count())})})}function getLinkGroupIndex(o,a){for(var n=a.model,s=a.dim,l=0;l<o.length;l++){var c=o[l]||{};if(checkPropInLink(c[s+"AxisId"],n.id)||checkPropInLink(c[s+"AxisIndex"],n.componentIndex)||checkPropInLink(c[s+"AxisName"],n.name))return l}}function checkPropInLink(o,a){return o==="all"||isArray$1(o)&&indexOf(o,a)>=0||o===a}function fixValue(o){var a=getAxisInfo$1(o);if(a){var n=a.axisPointerModel,s=a.axis.scale,l=n.option,c=n.get("status"),u=n.get("value");u!=null&&(u=s.parse(u));var d=isHandleTrigger(n);c==null&&(l.status=d?"show":"hide");var h=s.getExtent().slice();h[0]>h[1]&&h.reverse(),(u==null||u>h[1])&&(u=h[1]),u<h[0]&&(u=h[0]),l.value=u,d&&(l.status=a.axis.scale.isBlank()?"hide":"show")}}function getAxisInfo$1(o){var a=(o.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return a&&a.axesInfo[makeKey(o)]}function getAxisPointerModel(o){var a=getAxisInfo$1(o);return a&&a.axisPointerModel}function isHandleTrigger(o){return!!o.get(["handle","show"])}function makeKey(o){return o.type+"||"+o.id}var axisPointerClazz={},AxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l,c){this.axisPointerClass&&fixValue(n),o.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(n,l,!0)},a.prototype.updateAxisPointer=function(n,s,l,c){this._doUpdateAxisPointerClass(n,l,!1)},a.prototype.remove=function(n,s){var l=this._axisPointer;l&&l.remove(s)},a.prototype.dispose=function(n,s){this._disposeAxisPointer(s),o.prototype.dispose.apply(this,arguments)},a.prototype._doUpdateAxisPointerClass=function(n,s,l){var c=a.getAxisPointerClass(this.axisPointerClass);if(c){var u=getAxisPointerModel(n);u?(this._axisPointer||(this._axisPointer=new c)).render(n,u,s,l):this._disposeAxisPointer(s)}},a.prototype._disposeAxisPointer=function(n){this._axisPointer&&this._axisPointer.dispose(n),this._axisPointer=null},a.registerAxisPointerClass=function(n,s){if(process.env.NODE_ENV!=="production"&&axisPointerClazz[n])throw new Error("axisPointer "+n+" exists");axisPointerClazz[n]=s},a.getAxisPointerClass=function(n){return n&&axisPointerClazz[n]},a.type="axis",a}(ComponentView),inner$f=makeInner();function rectCoordAxisBuildSplitArea(o,a,n,s){var l=n.axis;if(!l.scale.isBlank()){var c=n.getModel("splitArea"),u=c.getModel("areaStyle"),d=u.get("color"),h=s.coordinateSystem.getRect(),f=l.getTicksCoords({tickModel:c,clamp:!0});if(f.length){var p=d.length,g=inner$f(o).splitAreaColors,v=createHashMap(),b=0;if(g)for(var w=0;w<f.length;w++){var x=g.get(f[w].tickValue);if(x!=null){b=(x+(p-1)*w)%p;break}}var S=l.toGlobalCoord(f[0].coord),E=u.getAreaStyle();d=isArray$1(d)?d:[d];for(var w=1;w<f.length;w++){var T=l.toGlobalCoord(f[w].coord),C=void 0,A=void 0,R=void 0,j=void 0;l.isHorizontal()?(C=S,A=h.y,R=T-C,j=h.height,S=C+R):(C=h.x,A=S,R=h.width,j=T-A,S=A+j);var D=f[w-1].tickValue;D!=null&&v.set(D,b),a.add(new Rect$2({anid:D!=null?"area_"+D:null,shape:{x:C,y:A,width:R,height:j},style:defaults({fill:d[b]},E),autoBatch:!0,silent:!0})),b=(b+1)%p}inner$f(o).splitAreaColors=v}}}function rectCoordAxisHandleRemove(o){inner$f(o).splitAreaColors=null}var axisBuilderAttrs$3=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$2=["splitArea","splitLine","minorSplitLine"],CartesianAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.axisPointerClass="CartesianAxisPointer",n}return a.prototype.render=function(n,s,l,c){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!n.get("show")){var d=n.getCoordSysModel(),h=layout$2(d,n),f=new AxisBuilder(n,extend({handleAutoShown:function(g){for(var v=d.coordinateSystem.getCartesians(),b=0;b<v.length;b++)if(isIntervalOrLogScale(v[b].getOtherAxis(n.axis).scale))return!0;return!1}},h));each$f(axisBuilderAttrs$3,f.add,f),this._axisGroup.add(f.getGroup()),each$f(selfBuilderAttrs$2,function(g){n.get([g,"show"])&&axisElementBuilders$2[g](this,this._axisGroup,n,d)},this);var p=c&&c.type==="changeAxisOrder"&&c.isInitSort;p||groupTransition(u,this._axisGroup,n),o.prototype.render.call(this,n,s,l,c)}},a.prototype.remove=function(){rectCoordAxisHandleRemove(this)},a.type="cartesianAxis",a}(AxisView),axisElementBuilders$2={splitLine:function(o,a,n,s){var l=n.axis;if(!l.scale.isBlank()){var c=n.getModel("splitLine"),u=c.getModel("lineStyle"),d=u.get("color"),h=c.get("showMinLine")!==!1,f=c.get("showMaxLine")!==!1;d=isArray$1(d)?d:[d];for(var p=s.coordinateSystem.getRect(),g=l.isHorizontal(),v=0,b=l.getTicksCoords({tickModel:c}),w=[],x=[],S=u.getLineStyle(),E=0;E<b.length;E++){var T=l.toGlobalCoord(b[E].coord);if(!(E===0&&!h||E===b.length-1&&!f)){var C=b[E].tickValue;g?(w[0]=T,w[1]=p.y,x[0]=T,x[1]=p.y+p.height):(w[0]=p.x,w[1]=T,x[0]=p.x+p.width,x[1]=T);var A=v++%d.length,R=new Line$1({anid:C!=null?"line_"+C:null,autoBatch:!0,shape:{x1:w[0],y1:w[1],x2:x[0],y2:x[1]},style:defaults({stroke:d[A]},S),silent:!0});subPixelOptimizeLine(R.shape,S.lineWidth),a.add(R)}}}},minorSplitLine:function(o,a,n,s){var l=n.axis,c=n.getModel("minorSplitLine"),u=c.getModel("lineStyle"),d=s.coordinateSystem.getRect(),h=l.isHorizontal(),f=l.getMinorTicksCoords();if(f.length)for(var p=[],g=[],v=u.getLineStyle(),b=0;b<f.length;b++)for(var w=0;w<f[b].length;w++){var x=l.toGlobalCoord(f[b][w].coord);h?(p[0]=x,p[1]=d.y,g[0]=x,g[1]=d.y+d.height):(p[0]=d.x,p[1]=x,g[0]=d.x+d.width,g[1]=x);var S=new Line$1({anid:"minor_line_"+f[b][w].tickValue,autoBatch:!0,shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},style:v,silent:!0});subPixelOptimizeLine(S.shape,v.lineWidth),a.add(S)}},splitArea:function(o,a,n,s){rectCoordAxisBuildSplitArea(o,a,n,s)}},CartesianXAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="xAxis",a}(CartesianAxisView),CartesianYAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=CartesianXAxisView.type,n}return a.type="yAxis",a}(CartesianAxisView),GridView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="grid",n}return a.prototype.render=function(n,s){this.group.removeAll(),n.get("show")&&this.group.add(new Rect$2({shape:n.coordinateSystem.getRect(),style:defaults({fill:n.get("backgroundColor")},n.getItemStyle()),silent:!0,z2:-1}))},a.type="grid",a}(ComponentView),extraOption={offset:0};function install$N(o){o.registerComponentView(GridView),o.registerComponentModel(GridModel),o.registerCoordinateSystem("cartesian2d",Grid),axisModelCreator(o,"x",CartesianAxisModel,extraOption),axisModelCreator(o,"y",CartesianAxisModel,extraOption),o.registerComponentView(CartesianXAxisView),o.registerComponentView(CartesianYAxisView),o.registerPreprocessor(function(a){a.xAxis&&a.yAxis&&!a.grid&&(a.grid={})})}function install$M(o){use(install$N),o.registerSeriesModel(ScatterSeriesModel),o.registerChartView(ScatterView),o.registerLayout(pointsLayout("scatter"))}function radarLayout(o){o.eachSeriesByType("radar",function(a){var n=a.getData(),s=[],l=a.coordinateSystem;if(l){var c=l.getIndicatorAxes();each$f(c,function(u,d){n.each(n.mapDimension(c[d].dim),function(h,f){s[f]=s[f]||[];var p=l.dataToPoint(h,d);s[f][d]=isValidPoint(p)?p:getValueMissingPoint(l)})}),n.each(function(u){var d=find(s[u],function(h){return isValidPoint(h)})||getValueMissingPoint(l);s[u].push(d.slice()),n.setItemLayout(u,s[u])})}})}function isValidPoint(o){return!isNaN(o[0])&&!isNaN(o[1])}function getValueMissingPoint(o){return[o.cx,o.cy]}function radarBackwardCompat(o){var a=o.polar;if(a){isArray$1(a)||(a=[a]);var n=[];each$f(a,function(s,l){s.indicator?(s.type&&!s.shape&&(s.shape=s.type),o.radar=o.radar||[],isArray$1(o.radar)||(o.radar=[o.radar]),o.radar.push(s)):n.push(s)}),o.polar=n}each$f(o.series,function(s){s&&s.type==="radar"&&s.polarIndex&&(s.radarIndex=s.polarIndex)})}var RadarView$1=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=n.coordinateSystem,u=this.group,d=n.getData(),h=this._data;function f(v,b){var w=v.getItemVisual(b,"symbol")||"circle";if(w!=="none"){var x=normalizeSymbolSize(v.getItemVisual(b,"symbolSize")),S=createSymbol$1(w,-1,-1,2,2),E=v.getItemVisual(b,"symbolRotate")||0;return S.attr({style:{strokeNoScale:!0},z2:100,scaleX:x[0]/2,scaleY:x[1]/2,rotation:E*Math.PI/180||0}),S}}function p(v,b,w,x,S,E){w.removeAll();for(var T=0;T<b.length-1;T++){var C=f(x,S);C&&(C.__dimIdx=T,v[T]?(C.setPosition(v[T]),graphic$1[E?"initProps":"updateProps"](C,{x:b[T][0],y:b[T][1]},n,S)):C.setPosition(b[T]),w.add(C))}}function g(v){return map$1(v,function(b){return[c.cx,c.cy]})}d.diff(h).add(function(v){var b=d.getItemLayout(v);if(b){var w=new Polygon,x=new Polyline$1,S={shape:{points:b}};w.shape.points=g(b),x.shape.points=g(b),initProps(w,S,n,v),initProps(x,S,n,v);var E=new Group$3,T=new Group$3;E.add(x),E.add(w),E.add(T),p(x.shape.points,b,T,d,v,!0),d.setItemGraphicEl(v,E)}}).update(function(v,b){var w=h.getItemGraphicEl(b),x=w.childAt(0),S=w.childAt(1),E=w.childAt(2),T={shape:{points:d.getItemLayout(v)}};T.shape.points&&(p(x.shape.points,T.shape.points,E,d,v,!1),saveOldStyle(S),saveOldStyle(x),updateProps$1(x,T,n),updateProps$1(S,T,n),d.setItemGraphicEl(v,w))}).remove(function(v){u.remove(h.getItemGraphicEl(v))}).execute(),d.eachItemGraphicEl(function(v,b){var w=d.getItemModel(b),x=v.childAt(0),S=v.childAt(1),E=v.childAt(2),T=d.getItemVisual(b,"style"),C=T.fill;u.add(v),x.useStyle(defaults(w.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:C})),setStatesStylesFromModel(x,w,"lineStyle"),setStatesStylesFromModel(S,w,"areaStyle");var A=w.getModel("areaStyle"),R=A.isEmpty()&&A.parentModel.isEmpty();S.ignore=R,each$f(["emphasis","select","blur"],function(O){var H=w.getModel([O,"areaStyle"]),q=H.isEmpty()&&H.parentModel.isEmpty();S.ensureState(O).ignore=q&&R}),S.useStyle(defaults(A.getAreaStyle(),{fill:C,opacity:.7,decal:T.decal}));var j=w.getModel("emphasis"),D=j.getModel("itemStyle").getItemStyle();E.eachChild(function(O){if(O instanceof ZRImage){var H=O.style;O.useStyle(extend({image:H.image,x:H.x,y:H.y,width:H.width,height:H.height},T))}else O.useStyle(T),O.setColor(C),O.style.strokeNoScale=!0;var q=O.ensureState("emphasis");q.style=clone$4(D);var Y=d.getStore().get(d.getDimensionIndex(O.__dimIdx),b);(Y==null||isNaN(Y))&&(Y=""),setLabelStyle(O,getLabelStatesModels(w),{labelFetcher:d.hostModel,labelDataIndex:b,labelDimIndex:O.__dimIdx,defaultText:Y,inheritColor:C,defaultOpacity:T.opacity})}),toggleHoverEmphasis(v,j.get("focus"),j.get("blurScope"),j.get("disabled"))}),this._data=d},a.prototype.remove=function(){this.group.removeAll(),this._data=null},a.type="radar",a}(ChartView),RadarSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.hasSymbolVisual=!0,n}return a.prototype.init=function(n){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},a.prototype.getInitialData=function(n,s){return createSeriesDataSimply(this,{generateCoord:"indicator_",generateCoordCount:1/0})},a.prototype.formatTooltip=function(n,s,l){var c=this.getData(),u=this.coordinateSystem,d=u.getIndicatorAxes(),h=this.getData().getName(n),f=h===""?this.name:h,p=retrieveVisualColorForTooltipMarker(this,n);return createTooltipMarkup("section",{header:f,sortBlocks:!0,blocks:map$1(d,function(g){var v=c.get(c.mapDimension(g.dim),n);return createTooltipMarkup("nameValue",{markerType:"subItem",markerColor:p,name:g.name,value:v,sortParam:v})})})},a.prototype.getTooltipPosition=function(n){if(n!=null){for(var s=this.getData(),l=this.coordinateSystem,c=s.getValues(map$1(l.dimensions,function(f){return s.mapDimension(f)}),n),u=0,d=c.length;u<d;u++)if(!isNaN(c[u])){var h=l.getIndicatorAxes();return l.coordToPoint(h[u].dataToCoord(c[u]),u)}}},a.type="series.radar",a.dependencies=["radar"],a.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},a}(SeriesModel),valueAxisDefault=axisDefault.value;function defaultsShow(o,a){return defaults({show:a},o)}var RadarModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.optionUpdated=function(){var n=this.get("boundaryGap"),s=this.get("splitNumber"),l=this.get("scale"),c=this.get("axisLine"),u=this.get("axisTick"),d=this.get("axisLabel"),h=this.get("axisName"),f=this.get(["axisName","show"]),p=this.get(["axisName","formatter"]),g=this.get("axisNameGap"),v=this.get("triggerEvent"),b=map$1(this.get("indicator")||[],function(w){w.max!=null&&w.max>0&&!w.min?w.min=0:w.min!=null&&w.min<0&&!w.max&&(w.max=0);var x=h;w.color!=null&&(x=defaults({color:w.color},h));var S=merge(clone$4(w),{boundaryGap:n,splitNumber:s,scale:l,axisLine:c,axisTick:u,axisLabel:d,name:w.text,showName:f,nameLocation:"end",nameGap:g,nameTextStyle:x,triggerEvent:v},!1);if(isString$2(p)){var E=S.name;S.name=p.replace("{value}",E??"")}else isFunction$1(p)&&(S.name=p(S.name,S));var T=new Model(S,null,this.ecModel);return mixin(T,AxisModelCommonMixin.prototype),T.mainType="radar",T.componentIndex=this.componentIndex,T},this);this._indicatorModels=b},a.prototype.getIndicatorModels=function(){return this._indicatorModels},a.type="radar",a.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:merge({lineStyle:{color:"#bbb"}},valueAxisDefault.axisLine),axisLabel:defaultsShow(valueAxisDefault.axisLabel,!1),axisTick:defaultsShow(valueAxisDefault.axisTick,!1),splitLine:defaultsShow(valueAxisDefault.splitLine,!0),splitArea:defaultsShow(valueAxisDefault.splitArea,!0),indicator:[]},a}(ComponentModel),axisBuilderAttrs$2=["axisLine","axisTickLabel","axisName"],RadarView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=this.group;c.removeAll(),this._buildAxes(n),this._buildSplitLineAndArea(n)},a.prototype._buildAxes=function(n){var s=n.coordinateSystem,l=s.getIndicatorAxes(),c=map$1(l,function(u){var d=u.model.get("showName")?u.name:"",h=new AxisBuilder(u.model,{axisName:d,position:[s.cx,s.cy],rotation:u.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return h});each$f(c,function(u){each$f(axisBuilderAttrs$2,u.add,u),this.group.add(u.getGroup())},this)},a.prototype._buildSplitLineAndArea=function(n){var s=n.coordinateSystem,l=s.getIndicatorAxes();if(!l.length)return;var c=n.get("shape"),u=n.getModel("splitLine"),d=n.getModel("splitArea"),h=u.getModel("lineStyle"),f=d.getModel("areaStyle"),p=u.get("show"),g=d.get("show"),v=h.get("color"),b=f.get("color"),w=isArray$1(v)?v:[v],x=isArray$1(b)?b:[b],S=[],E=[];function T(ne,ce,ve){var be=ve%ce.length;return ne[be]=ne[be]||[],be}if(c==="circle")for(var C=l[0].getTicksCoords(),A=s.cx,R=s.cy,j=0;j<C.length;j++){if(p){var D=T(S,w,j);S[D].push(new Circle({shape:{cx:A,cy:R,r:C[j].coord}}))}if(g&&j<C.length-1){var D=T(E,x,j);E[D].push(new Ring({shape:{cx:A,cy:R,r0:C[j].coord,r:C[j+1].coord}}))}}else for(var O,H=map$1(l,function(ne,ce){var ve=ne.getTicksCoords();return O=O==null?ve.length-1:Math.min(ve.length-1,O),map$1(ve,function(be){return s.coordToPoint(be.coord,ce)})}),q=[],j=0;j<=O;j++){for(var Y=[],te=0;te<l.length;te++)Y.push(H[te][j]);if(Y[0]?Y.push(Y[0].slice()):process.env.NODE_ENV!=="production"&&console.error("Can't draw value axis "+j),p){var D=T(S,w,j);S[D].push(new Polyline$1({shape:{points:Y}}))}if(g&&q){var D=T(E,x,j-1);E[D].push(new Polygon({shape:{points:Y.concat(q)}}))}q=Y.slice().reverse()}var ee=h.getLineStyle(),re=f.getAreaStyle();each$f(E,function(ne,ce){this.group.add(mergePath(ne,{style:defaults({stroke:"none",fill:x[ce%x.length]},re),silent:!0}))},this),each$f(S,function(ne,ce){this.group.add(mergePath(ne,{style:defaults({fill:"none",stroke:w[ce%w.length]},ee),silent:!0}))},this)},a.type="radar",a}(ComponentView),IndicatorAxis=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this,n,s,l)||this;return c.type="value",c.angle=0,c.name="",c}return a}(Axis),Radar=function(){function o(a,n,s){this.dimensions=[],this._model=a,this._indicatorAxes=map$1(a.getIndicatorModels(),function(l,c){var u="indicator_"+c,d=new IndicatorAxis(u,new IntervalScale);return d.name=l.get("name"),d.model=l,l.axis=d,this.dimensions.push(u),d},this),this.resize(a,s)}return o.prototype.getIndicatorAxes=function(){return this._indicatorAxes},o.prototype.dataToPoint=function(a,n){var s=this._indicatorAxes[n];return this.coordToPoint(s.dataToCoord(a),n)},o.prototype.coordToPoint=function(a,n){var s=this._indicatorAxes[n],l=s.angle,c=this.cx+a*Math.cos(l),u=this.cy-a*Math.sin(l);return[c,u]},o.prototype.pointToData=function(a){var n=a[0]-this.cx,s=a[1]-this.cy,l=Math.sqrt(n*n+s*s);n/=l,s/=l;for(var c=Math.atan2(-s,n),u=1/0,d,h=-1,f=0;f<this._indicatorAxes.length;f++){var p=this._indicatorAxes[f],g=Math.abs(c-p.angle);g<u&&(d=p,h=f,u=g)}return[h,+(d&&d.coordToData(l))]},o.prototype.resize=function(a,n){var s=a.get("center"),l=n.getWidth(),c=n.getHeight(),u=Math.min(l,c)/2;this.cx=parsePercent(s[0],l),this.cy=parsePercent(s[1],c),this.startAngle=a.get("startAngle")*Math.PI/180;var d=a.get("radius");(isString$2(d)||isNumber(d))&&(d=[0,d]),this.r0=parsePercent(d[0],u),this.r=parsePercent(d[1],u),each$f(this._indicatorAxes,function(h,f){h.setExtent(this.r0,this.r);var p=this.startAngle+f*Math.PI*2/this._indicatorAxes.length;p=Math.atan2(Math.sin(p),Math.cos(p)),h.angle=p},this)},o.prototype.update=function(a,n){var s=this._indicatorAxes,l=this._model;each$f(s,function(d){d.scale.setExtent(1/0,-1/0)}),a.eachSeriesByType("radar",function(d,h){if(!(d.get("coordinateSystem")!=="radar"||a.getComponent("radar",d.get("radarIndex"))!==l)){var f=d.getData();each$f(s,function(p){p.scale.unionExtentFromData(f,f.mapDimension(p.dim))})}},this);var c=l.get("splitNumber"),u=new IntervalScale;u.setExtent(0,c),u.setInterval(1),each$f(s,function(d,h){alignScaleTicks(d.scale,d.model,u)})},o.prototype.convertToPixel=function(a,n,s){return console.warn("Not implemented."),null},o.prototype.convertFromPixel=function(a,n,s){return console.warn("Not implemented."),null},o.prototype.containPoint=function(a){return console.warn("Not implemented."),!1},o.create=function(a,n){var s=[];return a.eachComponent("radar",function(l){var c=new o(l,a,n);s.push(c),l.coordinateSystem=c}),a.eachSeriesByType("radar",function(l){l.get("coordinateSystem")==="radar"&&(l.coordinateSystem=s[l.get("radarIndex")||0])}),s},o.dimensions=[],o}();function install$L(o){o.registerCoordinateSystem("radar",Radar),o.registerComponentModel(RadarModel),o.registerComponentView(RadarView),o.registerVisual({seriesType:"radar",reset:function(a){var n=a.getData();n.each(function(s){n.setItemVisual(s,"legendIcon","roundRect")}),n.setVisual("legendIcon","roundRect")}})}function install$K(o){use(install$L),o.registerChartView(RadarView$1),o.registerSeriesModel(RadarSeriesModel),o.registerLayout(radarLayout),o.registerProcessor(dataFilter$1("radar")),o.registerPreprocessor(radarBackwardCompat)}var ATTR="\0_ec_interaction_mutex";function take(o,a,n){var s=getStore(o);s[a]=n}function release(o,a,n){var s=getStore(o),l=s[a];l===n&&(s[a]=null)}function isTaken(o,a){return!!getStore(o)[a]}function getStore(o){return o[ATTR]||(o[ATTR]={})}registerAction({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},noop$1);var RoamController=function(o){__extends$1(a,o);function a(n){var s=o.call(this)||this;s._zr=n;var l=bind$1(s._mousedownHandler,s),c=bind$1(s._mousemoveHandler,s),u=bind$1(s._mouseupHandler,s),d=bind$1(s._mousewheelHandler,s),h=bind$1(s._pinchHandler,s);return s.enable=function(f,p){this.disable(),this._opt=defaults(clone$4(p)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),f==null&&(f=!0),(f===!0||f==="move"||f==="pan")&&(n.on("mousedown",l),n.on("mousemove",c),n.on("mouseup",u)),(f===!0||f==="scale"||f==="zoom")&&(n.on("mousewheel",d),n.on("pinch",h))},s.disable=function(){n.off("mousedown",l),n.off("mousemove",c),n.off("mouseup",u),n.off("mousewheel",d),n.off("pinch",h)},s}return a.prototype.isDragging=function(){return this._dragging},a.prototype.isPinching=function(){return this._pinching},a.prototype.setPointerChecker=function(n){this.pointerChecker=n},a.prototype.dispose=function(){this.disable()},a.prototype._mousedownHandler=function(n){if(!isMiddleOrRightButtonOnMouseUpDown(n)){for(var s=n.target;s;){if(s.draggable)return;s=s.__hostTarget||s.parent}var l=n.offsetX,c=n.offsetY;this.pointerChecker&&this.pointerChecker(n,l,c)&&(this._x=l,this._y=c,this._dragging=!0)}},a.prototype._mousemoveHandler=function(n){if(!(!this._dragging||!isAvailableBehavior("moveOnMouseMove",n,this._opt)||n.gestureEvent==="pinch"||isTaken(this._zr,"globalPan"))){var s=n.offsetX,l=n.offsetY,c=this._x,u=this._y,d=s-c,h=l-u;this._x=s,this._y=l,this._opt.preventDefaultMouseMove&&stop(n.event),trigger$1(this,"pan","moveOnMouseMove",n,{dx:d,dy:h,oldX:c,oldY:u,newX:s,newY:l,isAvailableBehavior:null})}},a.prototype._mouseupHandler=function(n){isMiddleOrRightButtonOnMouseUpDown(n)||(this._dragging=!1)},a.prototype._mousewheelHandler=function(n){var s=isAvailableBehavior("zoomOnMouseWheel",n,this._opt),l=isAvailableBehavior("moveOnMouseWheel",n,this._opt),c=n.wheelDelta,u=Math.abs(c),d=n.offsetX,h=n.offsetY;if(!(c===0||!s&&!l)){if(s){var f=u>3?1.4:u>1?1.2:1.1,p=c>0?f:1/f;checkPointerAndTrigger(this,"zoom","zoomOnMouseWheel",n,{scale:p,originX:d,originY:h,isAvailableBehavior:null})}if(l){var g=Math.abs(c),v=(c>0?1:-1)*(g>3?.4:g>1?.15:.05);checkPointerAndTrigger(this,"scrollMove","moveOnMouseWheel",n,{scrollDelta:v,originX:d,originY:h,isAvailableBehavior:null})}}},a.prototype._pinchHandler=function(n){if(!isTaken(this._zr,"globalPan")){var s=n.pinchScale>1?1.1:1/1.1;checkPointerAndTrigger(this,"zoom",null,n,{scale:s,originX:n.pinchX,originY:n.pinchY,isAvailableBehavior:null})}},a}(Eventful);function checkPointerAndTrigger(o,a,n,s,l){o.pointerChecker&&o.pointerChecker(s,l.originX,l.originY)&&(stop(s.event),trigger$1(o,a,n,s,l))}function trigger$1(o,a,n,s,l){l.isAvailableBehavior=bind$1(isAvailableBehavior,null,n,s),o.trigger(a,l)}function isAvailableBehavior(o,a,n){var s=n[o];return!o||s&&(!isString$2(s)||a.event[s+"Key"])}function updateViewOnPan(o,a,n){var s=o.target;s.x+=a,s.y+=n,s.dirty()}function updateViewOnZoom(o,a,n,s){var l=o.target,c=o.zoomLimit,u=o.zoom=o.zoom||1;if(u*=a,c){var d=c.min||0,h=c.max||1/0;u=Math.max(Math.min(h,u),d)}var f=u/o.zoom;o.zoom=u,l.x-=(n-l.x)*(f-1),l.y-=(s-l.y)*(f-1),l.scaleX*=f,l.scaleY*=f,l.dirty()}var IRRELEVANT_EXCLUDES={axisPointer:1,tooltip:1,brush:1};function onIrrelevantElement(o,a,n){var s=a.getComponentByElement(o.topTarget),l=s&&s.coordinateSystem;return s&&s!==n&&!IRRELEVANT_EXCLUDES.hasOwnProperty(s.mainType)&&l&&l.model!==n}function parseXML(o){if(isString$2(o)){var a=new DOMParser;o=a.parseFromString(o,"text/xml")}var n=o;for(n.nodeType===9&&(n=n.firstChild);n.nodeName.toLowerCase()!=="svg"||n.nodeType!==1;)n=n.nextSibling;return n}var nodeParsers,INHERITABLE_STYLE_ATTRIBUTES_MAP={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS=keys$1(INHERITABLE_STYLE_ATTRIBUTES_MAP),SELF_STYLE_ATTRIBUTES_MAP={"alignment-baseline":"textBaseline","stop-color":"stopColor"},SELF_STYLE_ATTRIBUTES_MAP_KEYS=keys$1(SELF_STYLE_ATTRIBUTES_MAP),SVGParser=function(){function o(){this._defs={},this._root=null}return o.prototype.parse=function(a,n){n=n||{};var s=parseXML(a);if(process.env.NODE_ENV!=="production"&&!s)throw new Error("Illegal svg");this._defsUsePending=[];var l=new Group$3;this._root=l;var c=[],u=s.getAttribute("viewBox")||"",d=parseFloat(s.getAttribute("width")||n.width),h=parseFloat(s.getAttribute("height")||n.height);isNaN(d)&&(d=null),isNaN(h)&&(h=null),parseAttributes(s,l,null,!0,!1);for(var f=s.firstChild;f;)this._parseNode(f,l,c,null,!1,!1),f=f.nextSibling;applyDefs(this._defs,this._defsUsePending),this._defsUsePending=[];var p,g;if(u){var v=splitNumberSequence(u);v.length>=4&&(p={x:parseFloat(v[0]||0),y:parseFloat(v[1]||0),width:parseFloat(v[2]),height:parseFloat(v[3])})}if(p&&d!=null&&h!=null&&(g=makeViewBoxTransform(p,{x:0,y:0,width:d,height:h}),!n.ignoreViewBox)){var b=l;l=new Group$3,l.add(b),b.scaleX=b.scaleY=g.scale,b.x=g.x,b.y=g.y}return!n.ignoreRootClip&&d!=null&&h!=null&&l.setClipPath(new Rect$2({shape:{x:0,y:0,width:d,height:h}})),{root:l,width:d,height:h,viewBoxRect:p,viewBoxTransform:g,named:c}},o.prototype._parseNode=function(a,n,s,l,c,u){var d=a.nodeName.toLowerCase(),h,f=l;if(d==="defs"&&(c=!0),d==="text"&&(u=!0),d==="defs"||d==="switch")h=n;else{if(!c){var p=nodeParsers[d];if(p&&hasOwn(nodeParsers,d)){h=p.call(this,a,n);var g=a.getAttribute("name");if(g){var v={name:g,namedFrom:null,svgNodeTagLower:d,el:h};s.push(v),d==="g"&&(f=v)}else l&&s.push({name:l.name,namedFrom:l,svgNodeTagLower:d,el:h});n.add(h)}}var b=paintServerParsers[d];if(b&&hasOwn(paintServerParsers,d)){var w=b.call(this,a),x=a.getAttribute("id");x&&(this._defs[x]=w)}}if(h&&h.isGroup)for(var S=a.firstChild;S;)S.nodeType===1?this._parseNode(S,h,s,f,c,u):S.nodeType===3&&u&&this._parseText(S,h),S=S.nextSibling},o.prototype._parseText=function(a,n){var s=new TSpan({style:{text:a.textContent},silent:!0,x:this._textX||0,y:this._textY||0});inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),applyTextAlignment(s,n);var l=s.style,c=l.fontSize;c&&c<9&&(l.fontSize=9,s.scaleX*=c/9,s.scaleY*=c/9);var u=(l.fontSize||l.fontFamily)&&[l.fontStyle,l.fontWeight,(l.fontSize||12)+"px",l.fontFamily||"sans-serif"].join(" ");l.font=u;var d=s.getBoundingRect();return this._textX+=d.width,n.add(s),s},o.internalField=function(){nodeParsers={g:function(a,n){var s=new Group$3;return inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),s},rect:function(a,n){var s=new Rect$2;return inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),s.setShape({x:parseFloat(a.getAttribute("x")||"0"),y:parseFloat(a.getAttribute("y")||"0"),width:parseFloat(a.getAttribute("width")||"0"),height:parseFloat(a.getAttribute("height")||"0")}),s.silent=!0,s},circle:function(a,n){var s=new Circle;return inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(a.getAttribute("cx")||"0"),cy:parseFloat(a.getAttribute("cy")||"0"),r:parseFloat(a.getAttribute("r")||"0")}),s.silent=!0,s},line:function(a,n){var s=new Line$1;return inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),s.setShape({x1:parseFloat(a.getAttribute("x1")||"0"),y1:parseFloat(a.getAttribute("y1")||"0"),x2:parseFloat(a.getAttribute("x2")||"0"),y2:parseFloat(a.getAttribute("y2")||"0")}),s.silent=!0,s},ellipse:function(a,n){var s=new Ellipse;return inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),s.setShape({cx:parseFloat(a.getAttribute("cx")||"0"),cy:parseFloat(a.getAttribute("cy")||"0"),rx:parseFloat(a.getAttribute("rx")||"0"),ry:parseFloat(a.getAttribute("ry")||"0")}),s.silent=!0,s},polygon:function(a,n){var s=a.getAttribute("points"),l;s&&(l=parsePoints(s));var c=new Polygon({shape:{points:l||[]},silent:!0});return inheritStyle(n,c),parseAttributes(a,c,this._defsUsePending,!1,!1),c},polyline:function(a,n){var s=a.getAttribute("points"),l;s&&(l=parsePoints(s));var c=new Polyline$1({shape:{points:l||[]},silent:!0});return inheritStyle(n,c),parseAttributes(a,c,this._defsUsePending,!1,!1),c},image:function(a,n){var s=new ZRImage;return inheritStyle(n,s),parseAttributes(a,s,this._defsUsePending,!1,!1),s.setStyle({image:a.getAttribute("xlink:href")||a.getAttribute("href"),x:+a.getAttribute("x"),y:+a.getAttribute("y"),width:+a.getAttribute("width"),height:+a.getAttribute("height")}),s.silent=!0,s},text:function(a,n){var s=a.getAttribute("x")||"0",l=a.getAttribute("y")||"0",c=a.getAttribute("dx")||"0",u=a.getAttribute("dy")||"0";this._textX=parseFloat(s)+parseFloat(c),this._textY=parseFloat(l)+parseFloat(u);var d=new Group$3;return inheritStyle(n,d),parseAttributes(a,d,this._defsUsePending,!1,!0),d},tspan:function(a,n){var s=a.getAttribute("x"),l=a.getAttribute("y");s!=null&&(this._textX=parseFloat(s)),l!=null&&(this._textY=parseFloat(l));var c=a.getAttribute("dx")||"0",u=a.getAttribute("dy")||"0",d=new Group$3;return inheritStyle(n,d),parseAttributes(a,d,this._defsUsePending,!1,!0),this._textX+=parseFloat(c),this._textY+=parseFloat(u),d},path:function(a,n){var s=a.getAttribute("d")||"",l=createFromString(s);return inheritStyle(n,l),parseAttributes(a,l,this._defsUsePending,!1,!1),l.silent=!0,l}}}(),o}(),paintServerParsers={lineargradient:function(o){var a=parseInt(o.getAttribute("x1")||"0",10),n=parseInt(o.getAttribute("y1")||"0",10),s=parseInt(o.getAttribute("x2")||"10",10),l=parseInt(o.getAttribute("y2")||"0",10),c=new LinearGradient(a,n,s,l);return parsePaintServerUnit(o,c),parseGradientColorStops(o,c),c},radialgradient:function(o){var a=parseInt(o.getAttribute("cx")||"0",10),n=parseInt(o.getAttribute("cy")||"0",10),s=parseInt(o.getAttribute("r")||"0",10),l=new RadialGradient(a,n,s);return parsePaintServerUnit(o,l),parseGradientColorStops(o,l),l}};function parsePaintServerUnit(o,a){var n=o.getAttribute("gradientUnits");n==="userSpaceOnUse"&&(a.global=!0)}function parseGradientColorStops(o,a){for(var n=o.firstChild;n;){if(n.nodeType===1&&n.nodeName.toLocaleLowerCase()==="stop"){var s=n.getAttribute("offset"),l=void 0;s&&s.indexOf("%")>0?l=parseInt(s,10)/100:s?l=parseFloat(s):l=0;var c={};parseInlineStyle(n,c,c);var u=c.stopColor||n.getAttribute("stop-color")||"#000000";a.colorStops.push({offset:l,color:u})}n=n.nextSibling}}function inheritStyle(o,a){o&&o.__inheritedStyle&&(a.__inheritedStyle||(a.__inheritedStyle={}),defaults(a.__inheritedStyle,o.__inheritedStyle))}function parsePoints(o){for(var a=splitNumberSequence(o),n=[],s=0;s<a.length;s+=2){var l=parseFloat(a[s]),c=parseFloat(a[s+1]);n.push([l,c])}return n}function parseAttributes(o,a,n,s,l){var c=a,u=c.__inheritedStyle=c.__inheritedStyle||{},d={};o.nodeType===1&&(parseTransformAttribute(o,a),parseInlineStyle(o,u,d),s||parseAttributeStyle(o,u,d)),c.style=c.style||{},u.fill!=null&&(c.style.fill=getFillStrokeStyle(c,"fill",u.fill,n)),u.stroke!=null&&(c.style.stroke=getFillStrokeStyle(c,"stroke",u.stroke,n)),each$f(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(h){u[h]!=null&&(c.style[h]=parseFloat(u[h]))}),each$f(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(h){u[h]!=null&&(c.style[h]=u[h])}),l&&(c.__selfStyle=d),u.lineDash&&(c.style.lineDash=map$1(splitNumberSequence(u.lineDash),function(h){return parseFloat(h)})),(u.visibility==="hidden"||u.visibility==="collapse")&&(c.invisible=!0),u.display==="none"&&(c.ignore=!0)}function applyTextAlignment(o,a){var n=a.__selfStyle;if(n){var s=n.textBaseline,l=s;!s||s==="auto"||s==="baseline"?l="alphabetic":s==="before-edge"||s==="text-before-edge"?l="top":s==="after-edge"||s==="text-after-edge"?l="bottom":(s==="central"||s==="mathematical")&&(l="middle"),o.style.textBaseline=l}var c=a.__inheritedStyle;if(c){var u=c.textAlign,d=u;u&&(u==="middle"&&(d="center"),o.style.textAlign=d)}}var urlRegex=/^url\(\s*#(.*?)\)/;function getFillStrokeStyle(o,a,n,s){var l=n&&n.match(urlRegex);if(l){var c=trim$1(l[1]);s.push([o,a,c]);return}return n==="none"&&(n=null),n}function applyDefs(o,a){for(var n=0;n<a.length;n++){var s=a[n];s[0].style[s[1]]=o[s[2]]}}var numberReg=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function splitNumberSequence(o){return o.match(numberReg)||[]}var transformRegex=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,DEGREE_TO_ANGLE=Math.PI/180;function parseTransformAttribute(o,a){var n=o.getAttribute("transform");if(n){n=n.replace(/,/g," ");var s=[],l=null;n.replace(transformRegex,function(g,v,b){return s.push(v,b),""});for(var c=s.length-1;c>0;c-=2){var u=s[c],d=s[c-1],h=splitNumberSequence(u);switch(l=l||create$1(),d){case"translate":translate(l,l,[parseFloat(h[0]),parseFloat(h[1]||"0")]);break;case"scale":scale$1(l,l,[parseFloat(h[0]),parseFloat(h[1]||h[0])]);break;case"rotate":rotate(l,l,-parseFloat(h[0])*DEGREE_TO_ANGLE,[parseFloat(h[1]||"0"),parseFloat(h[2]||"0")]);break;case"skewX":var f=Math.tan(parseFloat(h[0])*DEGREE_TO_ANGLE);mul(l,[1,0,f,1,0,0],l);break;case"skewY":var p=Math.tan(parseFloat(h[0])*DEGREE_TO_ANGLE);mul(l,[1,p,0,1,0,0],l);break;case"matrix":l[0]=parseFloat(h[0]),l[1]=parseFloat(h[1]),l[2]=parseFloat(h[2]),l[3]=parseFloat(h[3]),l[4]=parseFloat(h[4]),l[5]=parseFloat(h[5]);break}}a.setLocalTransform(l)}}var styleRegex=/([^\s:;]+)\s*:\s*([^:;]+)/g;function parseInlineStyle(o,a,n){var s=o.getAttribute("style");if(s){styleRegex.lastIndex=0;for(var l;(l=styleRegex.exec(s))!=null;){var c=l[1],u=hasOwn(INHERITABLE_STYLE_ATTRIBUTES_MAP,c)?INHERITABLE_STYLE_ATTRIBUTES_MAP[c]:null;u&&(a[u]=l[2]);var d=hasOwn(SELF_STYLE_ATTRIBUTES_MAP,c)?SELF_STYLE_ATTRIBUTES_MAP[c]:null;d&&(n[d]=l[2])}}}function parseAttributeStyle(o,a,n){for(var s=0;s<INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=INHERITABLE_STYLE_ATTRIBUTES_MAP_KEYS[s],c=o.getAttribute(l);c!=null&&(a[INHERITABLE_STYLE_ATTRIBUTES_MAP[l]]=c)}for(var s=0;s<SELF_STYLE_ATTRIBUTES_MAP_KEYS.length;s++){var l=SELF_STYLE_ATTRIBUTES_MAP_KEYS[s],c=o.getAttribute(l);c!=null&&(n[SELF_STYLE_ATTRIBUTES_MAP[l]]=c)}}function makeViewBoxTransform(o,a){var n=a.width/o.width,s=a.height/o.height,l=Math.min(n,s);return{scale:l,x:-(o.x+o.width/2)*l+(a.x+a.width/2),y:-(o.y+o.height/2)*l+(a.y+a.height/2)}}function parseSVG(o,a){var n=new SVGParser;return n.parse(o,a)}var REGION_AVAILABLE_SVG_TAG_MAP=createHashMap(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),GeoSVGResource=function(){function o(a,n){this.type="geoSVG",this._usedGraphicMap=createHashMap(),this._freedGraphics=[],this._mapName=a,this._parsedXML=parseXML(n)}return o.prototype.load=function(){var a=this._firstGraphic;if(!a){a=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(a),this._boundingRect=this._firstGraphic.boundingRect.clone();var n=createRegions(a.named),s=n.regions,l=n.regionsMap;this._regions=s,this._regionsMap=l}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},o.prototype._buildGraphic=function(a){var n,s;try{n=a&&parseSVG(a,{ignoreViewBox:!0,ignoreRootClip:!0})||{},s=n.root,assert(s!=null)}catch(S){throw new Error(`Invalid svg format
`+S.message)}var l=new Group$3;l.add(s),l.isGeoSVGGraphicRoot=!0;var c=n.width,u=n.height,d=n.viewBoxRect,h=this._boundingRect;if(!h){var f=void 0,p=void 0,g=void 0,v=void 0;if(c!=null?(f=0,g=c):d&&(f=d.x,g=d.width),u!=null?(p=0,v=u):d&&(p=d.y,v=d.height),f==null||p==null){var b=s.getBoundingRect();f==null&&(f=b.x,g=b.width),p==null&&(p=b.y,v=b.height)}h=this._boundingRect=new BoundingRect(f,p,g,v)}if(d){var w=makeViewBoxTransform(d,h);s.scaleX=s.scaleY=w.scale,s.x=w.x,s.y=w.y}l.setClipPath(new Rect$2({shape:h.plain()}));var x=[];return each$f(n.named,function(S){REGION_AVAILABLE_SVG_TAG_MAP.get(S.svgNodeTagLower)!=null&&(x.push(S),setSilent(S.el))}),{root:l,boundingRect:h,named:x}},o.prototype.useGraphic=function(a){var n=this._usedGraphicMap,s=n.get(a);return s||(s=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),n.set(a,s),s)},o.prototype.freeGraphic=function(a){var n=this._usedGraphicMap,s=n.get(a);s&&(n.removeKey(a),this._freedGraphics.push(s))},o}();function setSilent(o){o.silent=!1,o.isGroup&&o.traverse(function(a){a.silent=!1})}function createRegions(o){var a=[],n=createHashMap();return each$f(o,function(s){if(s.namedFrom==null){var l=new GeoSVGRegion(s.name,s.el);a.push(l),n.set(s.name,l)}}),{regions:a,regionsMap:n}}var geoCoord=[126,25],nanhaiName="南海诸岛",points$1=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]];for(var i=0;i<points$1.length;i++)for(var k=0;k<points$1[i].length;k++)points$1[i][k][0]/=10.5,points$1[i][k][1]/=-10.5/.75,points$1[i][k][0]+=geoCoord[0],points$1[i][k][1]+=geoCoord[1];function fixNanhai(o,a){if(o==="china"){for(var n=0;n<a.length;n++)if(a[n].name===nanhaiName)return;a.push(new GeoJSONRegion(nanhaiName,map$1(points$1,function(s){return{type:"polygon",exterior:s}}),geoCoord))}}var coordsOffsetMap={南海诸岛:[32,80],广东:[0,-10],香港:[10,5],澳门:[-10,10],天津:[5,5]};function fixTextCoords(o,a){if(o==="china"){var n=coordsOffsetMap[a.name];if(n){var s=a.getCenter();s[0]+=n[0]/10.5,s[1]+=-n[1]/(10.5/.75),a.setCenter(s)}}}var points=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function fixDiaoyuIsland(o,a){o==="china"&&a.name==="台湾"&&a.geometries.push({type:"polygon",exterior:points[0]})}var DEFAULT_NAME_PROPERTY="name",GeoJSONResource=function(){function o(a,n,s){this.type="geoJSON",this._parsedMap=createHashMap(),this._mapName=a,this._specialAreas=s,this._geoJSON=parseInput(n)}return o.prototype.load=function(a,n){n=n||DEFAULT_NAME_PROPERTY;var s=this._parsedMap.get(n);if(!s){var l=this._parseToRegions(n);s=this._parsedMap.set(n,{regions:l,boundingRect:calculateBoundingRect(l)})}var c=createHashMap(),u=[];return each$f(s.regions,function(d){var h=d.name;a&&hasOwn(a,h)&&(d=d.cloneShallow(h=a[h])),u.push(d),c.set(h,d)}),{regions:u,boundingRect:s.boundingRect||new BoundingRect(0,0,0,0),regionsMap:c}},o.prototype._parseToRegions=function(a){var n=this._mapName,s=this._geoJSON,l;try{l=s?parseGeoJSON(s,a):[]}catch(c){throw new Error(`Invalid geoJson format
`+c.message)}return fixNanhai(n,l),each$f(l,function(c){var u=c.name;fixTextCoords(n,c),fixDiaoyuIsland(n,c);var d=this._specialAreas&&this._specialAreas[u];d&&c.transformTo(d.left,d.top,d.width,d.height)},this),l},o.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},o}();function calculateBoundingRect(o){for(var a,n=0;n<o.length;n++){var s=o[n].getBoundingRect();a=a||s.clone(),a.union(s)}return a}function parseInput(o){return isString$2(o)?typeof JSON<"u"&&JSON.parse?JSON.parse(o):new Function("return ("+o+");")():o}var storage=createHashMap();const geoSourceManager={registerMap:function(o,a,n){if(a.svg){var s=new GeoSVGResource(o,a.svg);storage.set(o,s)}else{var l=a.geoJson||a.geoJSON;l&&!a.features?n=a.specialAreas:l=a;var s=new GeoJSONResource(o,l,n);storage.set(o,s)}},getGeoResource:function(o){return storage.get(o)},getMapForUser:function(o){var a=storage.get(o);return a&&a.type==="geoJSON"&&a.getMapForUser()},load:function(o,a,n){var s=storage.get(o);if(!s){process.env.NODE_ENV!=="production"&&console.error("Map "+o+" not exists. The GeoJSON of the map must be provided.");return}return s.load(a,n)}};var OPTION_STYLE_ENABLED_TAGS=["rect","circle","line","ellipse","polygon","polyline","path"],OPTION_STYLE_ENABLED_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS),STATE_TRIGGER_TAG_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),LABEL_HOST_MAP=createHashMap(OPTION_STYLE_ENABLED_TAGS.concat(["g"])),mapLabelRaw=makeInner();function getFixedItemStyle(o){var a=o.getItemStyle(),n=o.get("areaColor");return n!=null&&(a.fill=n),a}function fixLineStyle(o){var a=o.style;a&&(a.stroke=a.stroke||a.fill,a.fill=null)}var MapDraw=function(){function o(a){var n=new Group$3;this.uid=getUID("ec_map_draw"),this._controller=new RoamController(a.getZr()),this._controllerHost={target:n},this.group=n,n.add(this._regionsGroup=new Group$3),n.add(this._svgGroup=new Group$3)}return o.prototype.draw=function(a,n,s,l,c){var u=a.mainType==="geo",d=a.getData&&a.getData();u&&n.eachComponent({mainType:"series",subType:"map"},function(E){!d&&E.getHostGeoModel()===a&&(d=E.getData())});var h=a.coordinateSystem,f=this._regionsGroup,p=this.group,g=h.getTransformInfo(),v=g.raw,b=g.roam,w=!f.childAt(0)||c;w?(p.x=b.x,p.y=b.y,p.scaleX=b.scaleX,p.scaleY=b.scaleY,p.dirty()):updateProps$1(p,b,a);var x=d&&d.getVisual("visualMeta")&&d.getVisual("visualMeta").length>0,S={api:s,geo:h,mapOrGeoModel:a,data:d,isVisualEncodedByVisualMap:x,isGeo:u,transformInfoRaw:v};h.resourceType==="geoJSON"?this._buildGeoJSON(S):h.resourceType==="geoSVG"&&this._buildSVG(S),this._updateController(a,n,s),this._updateMapSelectHandler(a,f,s,l)},o.prototype._buildGeoJSON=function(a){var n=this._regionsGroupByName=createHashMap(),s=createHashMap(),l=this._regionsGroup,c=a.transformInfoRaw,u=a.mapOrGeoModel,d=a.data,h=a.geo.projection,f=h&&h.stream;function p(b,w){return w&&(b=w(b)),b&&[b[0]*c.scaleX+c.x,b[1]*c.scaleY+c.y]}function g(b){for(var w=[],x=!f&&h&&h.project,S=0;S<b.length;++S){var E=p(b[S],x);E&&w.push(E)}return w}function v(b){return{shape:{points:g(b)}}}l.removeAll(),each$f(a.geo.regions,function(b){var w=b.name,x=n.get(w),S=s.get(w)||{},E=S.dataIdx,T=S.regionModel;if(!x){x=n.set(w,new Group$3),l.add(x),E=d?d.indexOfName(w):null,T=a.isGeo?u.getRegionModel(w):d?d.getItemModel(E):null;var C=T.get("silent",!0);C!=null&&(x.silent=C),s.set(w,{dataIdx:E,regionModel:T})}var A=[],R=[];each$f(b.geometries,function(O){if(O.type==="polygon"){var H=[O.exterior].concat(O.interiors||[]);f&&(H=projectPolys(H,f)),each$f(H,function(Y){A.push(new Polygon(v(Y)))})}else{var q=O.points;f&&(q=projectPolys(q,f,!0)),each$f(q,function(Y){R.push(new Polyline$1(v(Y)))})}});var j=p(b.getCenter(),h&&h.project);function D(O,H){if(O.length){var q=new CompoundPath({culling:!0,segmentIgnoreThreshold:1,shape:{paths:O}});x.add(q),applyOptionStyleForRegion(a,q,E,T),resetLabelForRegion(a,q,w,T,u,E,j),H&&(fixLineStyle(q),each$f(q.states,fixLineStyle))}}D(A),D(R,!0)}),n.each(function(b,w){var x=s.get(w),S=x.dataIdx,E=x.regionModel;resetEventTriggerForRegion(a,b,w,E,u,S),resetTooltipForRegion(a,b,w,E,u),resetStateTriggerForRegion(a,b,w,E,u)},this)},o.prototype._buildSVG=function(a){var n=a.geo.map,s=a.transformInfoRaw;this._svgGroup.x=s.x,this._svgGroup.y=s.y,this._svgGroup.scaleX=s.scaleX,this._svgGroup.scaleY=s.scaleY,this._svgResourceChanged(n)&&(this._freeSVG(),this._useSVG(n));var l=this._svgDispatcherMap=createHashMap(),c=!1;each$f(this._svgGraphicRecord.named,function(u){var d=u.name,h=a.mapOrGeoModel,f=a.data,p=u.svgNodeTagLower,g=u.el,v=f?f.indexOfName(d):null,b=h.getRegionModel(d);OPTION_STYLE_ENABLED_TAG_MAP.get(p)!=null&&g instanceof Displayable&&applyOptionStyleForRegion(a,g,v,b),g instanceof Displayable&&(g.culling=!0);var w=b.get("silent",!0);if(w!=null&&(g.silent=w),g.z2EmphasisLift=0,!u.namedFrom&&(LABEL_HOST_MAP.get(p)!=null&&resetLabelForRegion(a,g,d,b,h,v,null),resetEventTriggerForRegion(a,g,d,b,h,v),resetTooltipForRegion(a,g,d,b,h),STATE_TRIGGER_TAG_MAP.get(p)!=null)){var x=resetStateTriggerForRegion(a,g,d,b,h);x==="self"&&(c=!0);var S=l.get(d)||l.set(d,[]);S.push(g)}},this),this._enableBlurEntireSVG(c,a)},o.prototype._enableBlurEntireSVG=function(a,n){if(a&&n.isGeo){var s=n.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),l=s.opacity;this._svgGraphicRecord.root.traverse(function(c){if(!c.isGroup){setDefaultStateProxy(c);var u=c.ensureState("blur").style||{};u.opacity==null&&l!=null&&(u.opacity=l),c.ensureState("emphasis")}})}},o.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},o.prototype.findHighDownDispatchers=function(a,n){if(a==null)return[];var s=n.coordinateSystem;if(s.resourceType==="geoJSON"){var l=this._regionsGroupByName;if(l){var c=l.get(a);return c?[c]:[]}}else if(s.resourceType==="geoSVG")return this._svgDispatcherMap&&this._svgDispatcherMap.get(a)||[]},o.prototype._svgResourceChanged=function(a){return this._svgMapName!==a},o.prototype._useSVG=function(a){var n=geoSourceManager.getGeoResource(a);if(n&&n.type==="geoSVG"){var s=n.useGraphic(this.uid);this._svgGroup.add(s.root),this._svgGraphicRecord=s,this._svgMapName=a}},o.prototype._freeSVG=function(){var a=this._svgMapName;if(a!=null){var n=geoSourceManager.getGeoResource(a);n&&n.type==="geoSVG"&&n.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},o.prototype._updateController=function(a,n,s){var l=a.coordinateSystem,c=this._controller,u=this._controllerHost;u.zoomLimit=a.get("scaleLimit"),u.zoom=l.getZoom(),c.enable(a.get("roam")||!1);var d=a.mainType;function h(){var f={type:"geoRoam",componentType:d};return f[d+"Id"]=a.id,f}c.off("pan").on("pan",function(f){this._mouseDownFlag=!1,updateViewOnPan(u,f.dx,f.dy),s.dispatchAction(extend(h(),{dx:f.dx,dy:f.dy,animation:{duration:0}}))},this),c.off("zoom").on("zoom",function(f){this._mouseDownFlag=!1,updateViewOnZoom(u,f.scale,f.originX,f.originY),s.dispatchAction(extend(h(),{totalZoom:u.zoom,zoom:f.scale,originX:f.originX,originY:f.originY,animation:{duration:0}}))},this),c.setPointerChecker(function(f,p,g){return l.containPoint([p,g])&&!onIrrelevantElement(f,s,a)})},o.prototype.resetForLabelLayout=function(){this.group.traverse(function(a){var n=a.getTextContent();n&&(n.ignore=mapLabelRaw(n).ignore)})},o.prototype._updateMapSelectHandler=function(a,n,s,l){var c=this;n.off("mousedown"),n.off("click"),a.get("selectedMode")&&(n.on("mousedown",function(){c._mouseDownFlag=!0}),n.on("click",function(u){c._mouseDownFlag&&(c._mouseDownFlag=!1)}))},o}();function applyOptionStyleForRegion(o,a,n,s){var l=s.getModel("itemStyle"),c=s.getModel(["emphasis","itemStyle"]),u=s.getModel(["blur","itemStyle"]),d=s.getModel(["select","itemStyle"]),h=getFixedItemStyle(l),f=getFixedItemStyle(c),p=getFixedItemStyle(d),g=getFixedItemStyle(u),v=o.data;if(v){var b=v.getItemVisual(n,"style"),w=v.getItemVisual(n,"decal");o.isVisualEncodedByVisualMap&&b.fill&&(h.fill=b.fill),w&&(h.decal=createOrUpdatePatternFromDecal(w,o.api))}a.setStyle(h),a.style.strokeNoScale=!0,a.ensureState("emphasis").style=f,a.ensureState("select").style=p,a.ensureState("blur").style=g,setDefaultStateProxy(a)}function resetLabelForRegion(o,a,n,s,l,c,u){var d=o.data,h=o.isGeo,f=d&&isNaN(d.get(d.mapDimension("value"),c)),p=d&&d.getItemLayout(c);if(h||f||p&&p.showLabel){var g=h?n:c,v=void 0;(!d||c>=0)&&(v=l);var b=u?{normal:{align:"center",verticalAlign:"middle"}}:null;setLabelStyle(a,getLabelStatesModels(s),{labelFetcher:v,labelDataIndex:g,defaultText:n},b);var w=a.getTextContent();if(w&&(mapLabelRaw(w).ignore=w.ignore,a.textConfig&&u)){var x=a.getBoundingRect().clone();a.textConfig.layoutRect=x,a.textConfig.position=[(u[0]-x.x)/x.width*100+"%",(u[1]-x.y)/x.height*100+"%"]}a.disableLabelAnimation=!0}else a.removeTextContent(),a.removeTextConfig(),a.disableLabelAnimation=null}function resetEventTriggerForRegion(o,a,n,s,l,c){o.data?o.data.setItemGraphicEl(c,a):getECData(a).eventData={componentType:"geo",componentIndex:l.componentIndex,geoIndex:l.componentIndex,name:n,region:s&&s.option||{}}}function resetTooltipForRegion(o,a,n,s,l){o.data||setTooltipConfig({el:a,componentModel:l,itemName:n,itemTooltipOption:s.get("tooltip")})}function resetStateTriggerForRegion(o,a,n,s,l){a.highDownSilentOnTouch=!!l.get("selectedMode");var c=s.getModel("emphasis"),u=c.get("focus");return toggleHoverEmphasis(a,u,c.get("blurScope"),c.get("disabled")),o.isGeo&&enableComponentHighDownFeatures(a,l,n),u}function projectPolys(o,a,n){var s=[],l;function c(){l=[]}function u(){l.length&&(s.push(l),l=[])}var d=a({polygonStart:c,polygonEnd:u,lineStart:c,lineEnd:u,point:function(h,f){isFinite(h)&&isFinite(f)&&l.push([h,f])},sphere:function(){}});return!n&&d.polygonStart(),each$f(o,function(h){d.lineStart();for(var f=0;f<h.length;f++)d.point(h[f][0],h[f][1]);d.lineEnd()}),!n&&d.polygonEnd(),s}var MapView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l,c){if(!(c&&c.type==="mapToggleSelect"&&c.from===this.uid)){var u=this.group;if(u.removeAll(),!n.getHostGeoModel()){if(this._mapDraw&&c&&c.type==="geoRoam"&&this._mapDraw.resetForLabelLayout(),c&&c.type==="geoRoam"&&c.componentType==="series"&&c.seriesId===n.id){var d=this._mapDraw;d&&u.add(d.group)}else if(n.needsDrawMap){var d=this._mapDraw||new MapDraw(l);u.add(d.group),d.draw(n,s,l,this,c),this._mapDraw=d}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;n.get("showLegendSymbol")&&s.getComponent("legend")&&this._renderSymbols(n,s,l)}}},a.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},a.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},a.prototype._renderSymbols=function(n,s,l){var c=n.originalData,u=this.group;c.each(c.mapDimension("value"),function(d,h){if(!isNaN(d)){var f=c.getItemLayout(h);if(!(!f||!f.point)){var p=f.point,g=f.offset,v=new Circle({style:{fill:n.getData().getVisual("style").fill},shape:{cx:p[0]+g*9,cy:p[1],r:3},silent:!0,z2:8+(g?0:Z2_EMPHASIS_LIFT+1)});if(!g){var b=n.mainSeries.getData(),w=c.getName(h),x=b.indexOfName(w),S=c.getItemModel(h),E=S.getModel("label"),T=b.getItemGraphicEl(x);setLabelStyle(v,getLabelStatesModels(S),{labelFetcher:{getFormattedLabel:function(C,A){return n.getFormattedLabel(x,A)}},defaultText:w}),v.disableLabelAnimation=!0,E.get("position")||v.setTextConfig({position:"bottom"}),T.onHoverStateChange=function(C){setStatesFlag(v,C)}}u.add(v)}}})},a.type="map",a}(ChartView),MapSeries=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(s){if(s!=null){var l=this.getData().getName(s),c=this.coordinateSystem,u=c.getRegion(l);return u&&c.dataToPoint(u.getCenter())}},n}return a.prototype.getInitialData=function(n){for(var s=createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)}),l=createHashMap(),c=[],u=0,d=s.count();u<d;u++){var h=s.getName(u);l.set(h,u)}var f=geoSourceManager.load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return each$f(f.regions,function(p){var g=p.name,v=l.get(g),b=p.properties&&p.properties.echartsStyle,w;v==null?(w={name:g},c.push(w)):w=s.getRawDataItem(v),b&&merge(w,b)}),s.appendData(c),s},a.prototype.getHostGeoModel=function(){var n=this.option.geoIndex;return n!=null?this.ecModel.getComponent("geo",n):null},a.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},a.prototype.getRawValue=function(n){var s=this.getData();return s.get(s.mapDimension("value"),n)},a.prototype.getRegionModel=function(n){var s=this.getData();return s.getItemModel(s.indexOfName(n))},a.prototype.formatTooltip=function(n,s,l){for(var c=this.getData(),u=this.getRawValue(n),d=c.getName(n),h=this.seriesGroup,f=[],p=0;p<h.length;p++){var g=h[p].originalData.indexOfName(d),v=c.mapDimension("value");isNaN(h[p].originalData.get(v,g))||f.push(h[p].name)}return createTooltipMarkup("section",{header:f.join(", "),noHeader:!f.length,blocks:[createTooltipMarkup("nameValue",{name:d,value:u})]})},a.prototype.setZoom=function(n){this.option.zoom=n},a.prototype.setCenter=function(n){this.option.center=n},a.prototype.getLegendIcon=function(n){var s=n.icon||"roundRect",l=createSymbol$1(s,0,0,n.itemWidth,n.itemHeight,n.itemStyle.fill);return l.setStyle(n.itemStyle),l.style.stroke="none",s.indexOf("empty")>-1&&(l.style.stroke=l.style.fill,l.style.fill="#fff",l.style.lineWidth=2),l},a.type="series.map",a.dependencies=["geo"],a.layoutMode="box",a.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},a}(SeriesModel);function dataStatistics(o,a){var n={};return each$f(o,function(s){s.each(s.mapDimension("value"),function(l,c){var u="ec-"+s.getName(c);n[u]=n[u]||[],isNaN(l)||n[u].push(l)})}),o[0].map(o[0].mapDimension("value"),function(s,l){for(var c="ec-"+o[0].getName(l),u=0,d=1/0,h=-1/0,f=n[c].length,p=0;p<f;p++)d=Math.min(d,n[c][p]),h=Math.max(h,n[c][p]),u+=n[c][p];var g;return a==="min"?g=d:a==="max"?g=h:a==="average"?g=u/f:g=u,f===0?NaN:g})}function mapDataStatistic(o){var a={};o.eachSeriesByType("map",function(n){var s=n.getHostGeoModel(),l=s?"o"+s.id:"i"+n.getMapType();(a[l]=a[l]||[]).push(n)}),each$f(a,function(n,s){for(var l=dataStatistics(map$1(n,function(u){return u.getData()}),n[0].get("mapValueCalculation")),c=0;c<n.length;c++)n[c].originalData=n[c].getData();for(var c=0;c<n.length;c++)n[c].seriesGroup=n,n[c].needsDrawMap=c===0&&!n[c].getHostGeoModel(),n[c].setData(l.cloneShallow()),n[c].mainSeries=n[0]})}function mapSymbolLayout(o){var a={};o.eachSeriesByType("map",function(n){var s=n.getMapType();if(!(n.getHostGeoModel()||a[s])){var l={};each$f(n.seriesGroup,function(u){var d=u.coordinateSystem,h=u.originalData;u.get("showLegendSymbol")&&o.getComponent("legend")&&h.each(h.mapDimension("value"),function(f,p){var g=h.getName(p),v=d.getRegion(g);if(!(!v||isNaN(f))){var b=l[g]||0,w=d.dataToPoint(v.getCenter());l[g]=b+1,h.setItemLayout(p,{point:w,offset:b})}})});var c=n.getData();c.each(function(u){var d=c.getName(u),h=c.getItemLayout(u)||{};h.showLabel=!l[d],c.setItemLayout(u,h)}),a[s]=!0}})}var v2ApplyTransform=applyTransform$1,View=function(o){__extends$1(a,o);function a(n){var s=o.call(this)||this;return s.type="view",s.dimensions=["x","y"],s._roamTransformable=new Transformable,s._rawTransformable=new Transformable,s.name=n,s}return a.prototype.setBoundingRect=function(n,s,l,c){return this._rect=new BoundingRect(n,s,l,c),this._rect},a.prototype.getBoundingRect=function(){return this._rect},a.prototype.setViewRect=function(n,s,l,c){this._transformTo(n,s,l,c),this._viewRect=new BoundingRect(n,s,l,c)},a.prototype._transformTo=function(n,s,l,c){var u=this.getBoundingRect(),d=this._rawTransformable;d.transform=u.calculateTransform(new BoundingRect(n,s,l,c));var h=d.parent;d.parent=null,d.decomposeTransform(),d.parent=h,this._updateTransform()},a.prototype.setCenter=function(n,s){n&&(this._center=[parsePercent(n[0],s.getWidth()),parsePercent(n[1],s.getHeight())],this._updateCenterAndZoom())},a.prototype.setZoom=function(n){n=n||1;var s=this.zoomLimit;s&&(s.max!=null&&(n=Math.min(s.max,n)),s.min!=null&&(n=Math.max(s.min,n))),this._zoom=n,this._updateCenterAndZoom()},a.prototype.getDefaultCenter=function(){var n=this.getBoundingRect(),s=n.x+n.width/2,l=n.y+n.height/2;return[s,l]},a.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},a.prototype.getZoom=function(){return this._zoom||1},a.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},a.prototype._updateCenterAndZoom=function(){var n=this._rawTransformable.getLocalTransform(),s=this._roamTransformable,l=this.getDefaultCenter(),c=this.getCenter(),u=this.getZoom();c=applyTransform$1([],c,n),l=applyTransform$1([],l,n),s.originX=c[0],s.originY=c[1],s.x=l[0]-c[0],s.y=l[1]-c[1],s.scaleX=s.scaleY=u,this._updateTransform()},a.prototype._updateTransform=function(){var n=this._roamTransformable,s=this._rawTransformable;s.parent=n,n.updateTransform(),s.updateTransform(),copy$1(this.transform||(this.transform=[]),s.transform||create$1()),this._rawTransform=s.getLocalTransform(),this.invTransform=this.invTransform||[],invert(this.invTransform,this.transform),this.decomposeTransform()},a.prototype.getTransformInfo=function(){var n=this._rawTransformable,s=this._roamTransformable,l=new Transformable;return l.transform=s.transform,l.decomposeTransform(),{roam:{x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY},raw:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY}}},a.prototype.getViewRect=function(){return this._viewRect},a.prototype.getViewRectAfterRoam=function(){var n=this.getBoundingRect().clone();return n.applyTransform(this.transform),n},a.prototype.dataToPoint=function(n,s,l){var c=s?this._rawTransform:this.transform;return l=l||[],c?v2ApplyTransform(l,n,c):copy$2(l,n)},a.prototype.pointToData=function(n){var s=this.invTransform;return s?v2ApplyTransform([],n,s):[n[0],n[1]]},a.prototype.convertToPixel=function(n,s,l){var c=getCoordSys$4(s);return c===this?c.dataToPoint(l):null},a.prototype.convertFromPixel=function(n,s,l){var c=getCoordSys$4(s);return c===this?c.pointToData(l):null},a.prototype.containPoint=function(n){return this.getViewRectAfterRoam().contain(n[0],n[1])},a.dimensions=["x","y"],a}(Transformable);function getCoordSys$4(o){var a=o.seriesModel;return a?a.coordinateSystem:null}var GEO_DEFAULT_PARAMS={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},geo2DDimensions=["lng","lat"],Geo=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this,n)||this;c.dimensions=geo2DDimensions,c.type="geo",c._nameCoordMap=createHashMap(),c.map=s;var u=l.projection,d=geoSourceManager.load(s,l.nameMap,l.nameProperty),h=geoSourceManager.getGeoResource(s),f=c.resourceType=h?h.type:null,p=c.regions=d.regions,g=GEO_DEFAULT_PARAMS[h.type];c._regionsMap=d.regionsMap,c.regions=d.regions,process.env.NODE_ENV!=="production"&&u&&(f==="geoSVG"&&(process.env.NODE_ENV!=="production"&&warn("Map "+s+" with SVG source can't use projection. Only GeoJSON source supports projection."),u=null),u.project&&u.unproject||(process.env.NODE_ENV!=="production"&&warn("project and unproject must be both provided in the projeciton."),u=null)),c.projection=u;var v;if(u)for(var b=0;b<p.length;b++){var w=p[b].getBoundingRect(u);v=v||w.clone(),v.union(w)}else v=d.boundingRect;return c.setBoundingRect(v.x,v.y,v.width,v.height),c.aspectScale=u?1:retrieve2(l.aspectScale,g.aspectScale),c._invertLongitute=u?!1:g.invertLongitute,c}return a.prototype._transformTo=function(n,s,l,c){var u=this.getBoundingRect(),d=this._invertLongitute;u=u.clone(),d&&(u.y=-u.y-u.height);var h=this._rawTransformable;h.transform=u.calculateTransform(new BoundingRect(n,s,l,c));var f=h.parent;h.parent=null,h.decomposeTransform(),h.parent=f,d&&(h.scaleY=-h.scaleY),this._updateTransform()},a.prototype.getRegion=function(n){return this._regionsMap.get(n)},a.prototype.getRegionByCoord=function(n){for(var s=this.regions,l=0;l<s.length;l++){var c=s[l];if(c.type==="geoJSON"&&c.contain(n))return s[l]}},a.prototype.addGeoCoord=function(n,s){this._nameCoordMap.set(n,s)},a.prototype.getGeoCoord=function(n){var s=this._regionsMap.get(n);return this._nameCoordMap.get(n)||s&&s.getCenter()},a.prototype.dataToPoint=function(n,s,l){if(isString$2(n)&&(n=this.getGeoCoord(n)),n){var c=this.projection;return c&&(n=c.project(n)),n&&this.projectedToPoint(n,s,l)}},a.prototype.pointToData=function(n){var s=this.projection;return s&&(n=s.unproject(n)),n&&this.pointToProjected(n)},a.prototype.pointToProjected=function(n){return o.prototype.pointToData.call(this,n)},a.prototype.projectedToPoint=function(n,s,l){return o.prototype.dataToPoint.call(this,n,s,l)},a.prototype.convertToPixel=function(n,s,l){var c=getCoordSys$3(s);return c===this?c.dataToPoint(l):null},a.prototype.convertFromPixel=function(n,s,l){var c=getCoordSys$3(s);return c===this?c.pointToData(l):null},a}(View);mixin(Geo,View);function getCoordSys$3(o){var a=o.geoModel,n=o.seriesModel;return a?a.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",SINGLE_REFERRING).models[0]||{}).coordinateSystem:null}function resizeGeo(o,a){var n=o.get("boundingCoords");if(n!=null){var s=n[0],l=n[1];if(!(isFinite(s[0])&&isFinite(s[1])&&isFinite(l[0])&&isFinite(l[1])))process.env.NODE_ENV!=="production"&&console.error("Invalid boundingCoords");else{var c=this.projection;if(c){var u=s[0],d=s[1],h=l[0],f=l[1];s=[1/0,1/0],l=[-1/0,-1/0];var p=function(j,D,O,H){for(var q=O-j,Y=H-D,te=0;te<=100;te++){var ee=te/100,re=c.project([j+q*ee,D+Y*ee]);min$1(s,s,re),max$1(l,l,re)}};p(u,d,h,d),p(h,d,h,f),p(h,f,u,f),p(u,f,h,d)}this.setBoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1])}}var g=this.getBoundingRect(),v=o.get("layoutCenter"),b=o.get("layoutSize"),w=a.getWidth(),x=a.getHeight(),S=g.width/g.height*this.aspectScale,E=!1,T,C;v&&b&&(T=[parsePercent(v[0],w),parsePercent(v[1],x)],C=parsePercent(b,Math.min(w,x)),!isNaN(T[0])&&!isNaN(T[1])&&!isNaN(C)?E=!0:process.env.NODE_ENV!=="production"&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."));var A;if(E)A={},S>1?(A.width=C,A.height=C/S):(A.height=C,A.width=C*S),A.y=T[1]-A.height/2,A.x=T[0]-A.width/2;else{var R=o.getBoxLayoutParams();R.aspect=S,A=getLayoutRect(R,{width:w,height:x})}this.setViewRect(A.x,A.y,A.width,A.height),this.setCenter(o.get("center"),a),this.setZoom(o.get("zoom"))}function setGeoCoords(o,a){each$f(a.get("geoCoord"),function(n,s){o.addGeoCoord(s,n)})}var GeoCreator=function(){function o(){this.dimensions=geo2DDimensions}return o.prototype.create=function(a,n){var s=[];function l(u){return{nameProperty:u.get("nameProperty"),aspectScale:u.get("aspectScale"),projection:u.get("projection")}}a.eachComponent("geo",function(u,d){var h=u.get("map"),f=new Geo(h+d,h,extend({nameMap:u.get("nameMap")},l(u)));f.zoomLimit=u.get("scaleLimit"),s.push(f),u.coordinateSystem=f,f.model=u,f.resize=resizeGeo,f.resize(u,n)}),a.eachSeries(function(u){var d=u.get("coordinateSystem");if(d==="geo"){var h=u.get("geoIndex")||0;u.coordinateSystem=s[h]}});var c={};return a.eachSeriesByType("map",function(u){if(!u.getHostGeoModel()){var d=u.getMapType();c[d]=c[d]||[],c[d].push(u)}}),each$f(c,function(u,d){var h=map$1(u,function(p){return p.get("nameMap")}),f=new Geo(d,d,extend({nameMap:mergeAll(h)},l(u[0])));f.zoomLimit=retrieve.apply(null,map$1(u,function(p){return p.get("scaleLimit")})),s.push(f),f.resize=resizeGeo,f.resize(u[0],n),each$f(u,function(p){p.coordinateSystem=f,setGeoCoords(f,p)})}),s},o.prototype.getFilledRegions=function(a,n,s,l){for(var c=(a||[]).slice(),u=createHashMap(),d=0;d<c.length;d++)u.set(c[d].name,c[d]);var h=geoSourceManager.load(n,s,l);return each$f(h.regions,function(f){var p=f.name,g=u.get(p),v=f.properties&&f.properties.echartsStyle;g||(g={name:p},c.push(g)),v&&merge(g,v)}),c},o}(),geoCreator=new GeoCreator,GeoModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s,l){var c=geoSourceManager.getGeoResource(n.map);if(c&&c.type==="geoJSON"){var u=n.itemStyle=n.itemStyle||{};"color"in u||(u.color="#eee")}this.mergeDefaultAndTheme(n,l),defaultEmphasis(n,"label",["show"])},a.prototype.optionUpdated=function(){var n=this,s=this.option;s.regions=geoCreator.getFilledRegions(s.regions,s.map,s.nameMap,s.nameProperty);var l={};this._optionModelMap=reduce(s.regions||[],function(c,u){var d=u.name;return d&&(c.set(d,new Model(u,n,n.ecModel)),u.selected&&(l[d]=!0)),c},createHashMap()),s.selectedMap||(s.selectedMap=l)},a.prototype.getRegionModel=function(n){return this._optionModelMap.get(n)||new Model(null,this,this.ecModel)},a.prototype.getFormattedLabel=function(n,s){var l=this.getRegionModel(n),c=s==="normal"?l.get(["label","formatter"]):l.get(["emphasis","label","formatter"]),u={name:n};if(isFunction$1(c))return u.status=s,c(u);if(isString$2(c))return c.replace("{a}",n??"")},a.prototype.setZoom=function(n){this.option.zoom=n},a.prototype.setCenter=function(n){this.option.center=n},a.prototype.select=function(n){var s=this.option,l=s.selectedMode;if(l){l!=="multiple"&&(s.selectedMap=null);var c=s.selectedMap||(s.selectedMap={});c[n]=!0}},a.prototype.unSelect=function(n){var s=this.option.selectedMap;s&&(s[n]=!1)},a.prototype.toggleSelected=function(n){this[this.isSelected(n)?"unSelect":"select"](n)},a.prototype.isSelected=function(n){var s=this.option.selectedMap;return!!(s&&s[n])},a.type="geo",a.layoutMode="box",a.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},a}(ComponentModel);function getCenterCoord(o,a){return o.pointToProjected?o.pointToProjected(a):o.pointToData(a)}function updateCenterAndZoom(o,a,n,s){var l=o.getZoom(),c=o.getCenter(),u=a.zoom,d=o.projectedToPoint?o.projectedToPoint(c):o.dataToPoint(c);if(a.dx!=null&&a.dy!=null&&(d[0]-=a.dx,d[1]-=a.dy,o.setCenter(getCenterCoord(o,d),s)),u!=null){if(n){var h=n.min||0,f=n.max||1/0;u=Math.max(Math.min(l*u,f),h)/l}o.scaleX*=u,o.scaleY*=u;var p=(a.originX-o.x)*(u-1),g=(a.originY-o.y)*(u-1);o.x-=p,o.y-=g,o.updateTransform(),o.setCenter(getCenterCoord(o,d),s),o.setZoom(u*l)}return{center:o.getCenter(),zoom:o.getZoom()}}var GeoView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.focusBlurEnabled=!0,n}return a.prototype.init=function(n,s){this._api=s},a.prototype.render=function(n,s,l,c){if(this._model=n,!n.get("show")){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;return}this._mapDraw||(this._mapDraw=new MapDraw(l));var u=this._mapDraw;u.draw(n,s,l,this,c),u.group.on("click",this._handleRegionClick,this),u.group.silent=n.get("silent"),this.group.add(u.group),this.updateSelectStatus(n,s,l)},a.prototype._handleRegionClick=function(n){var s;findEventDispatcher(n.target,function(l){return(s=getECData(l).eventData)!=null},!0),s&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:s.name})},a.prototype.updateSelectStatus=function(n,s,l){var c=this;this._mapDraw.group.traverse(function(u){var d=getECData(u).eventData;if(d)return c._model.isSelected(d.name)?l.enterSelect(u):l.leaveSelect(u),!0})},a.prototype.findHighDownDispatchers=function(n){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(n,this._model)},a.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},a.type="geo",a}(ComponentView);function registerMap(o,a,n){geoSourceManager.registerMap(o,a,n)}function install$J(o){o.registerCoordinateSystem("geo",geoCreator),o.registerComponentModel(GeoModel),o.registerComponentView(GeoView),o.registerImpl("registerMap",registerMap),o.registerImpl("getMap",function(n){return geoSourceManager.getMapForUser(n)});function a(n,s){s.update="geo:updateSelectStatus",o.registerAction(s,function(l,c){var u={},d=[];return c.eachComponent({mainType:"geo",query:l},function(h){h[n](l.name);var f=h.coordinateSystem;each$f(f.regions,function(g){u[g.name]=h.isSelected(g.name)||!1});var p=[];each$f(u,function(g,v){u[v]&&p.push(v)}),d.push({geoIndex:h.componentIndex,name:p})}),{selected:u,allSelected:d,name:l.name}})}a("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),a("select",{type:"geoSelect",event:"geoselected"}),a("unSelect",{type:"geoUnSelect",event:"geounselected"}),o.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,s,l){var c=n.componentType||"series";s.eachComponent({mainType:c,query:n},function(u){var d=u.coordinateSystem;if(d.type==="geo"){var h=updateCenterAndZoom(d,n,u.get("scaleLimit"),l);u.setCenter&&u.setCenter(h.center),u.setZoom&&u.setZoom(h.zoom),c==="series"&&each$f(u.seriesGroup,function(f){f.setCenter(h.center),f.setZoom(h.zoom)})}})})}function install$I(o){use(install$J),o.registerChartView(MapView),o.registerSeriesModel(MapSeries),o.registerLayout(mapSymbolLayout),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,mapDataStatistic),createLegacyDataSelectAction("map",o.registerAction)}function init(o){var a=o;a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n=[a],s,l;s=n.pop();)if(l=s.children,s.isExpand&&l.length)for(var c=l.length,u=c-1;u>=0;u--){var d=l[u];d.hierNode={defaultAncestor:null,ancestor:d,prelim:0,modifier:0,change:0,shift:0,i:u,thread:null},n.push(d)}}function firstWalk(o,a){var n=o.isExpand?o.children:[],s=o.parentNode.children,l=o.hierNode.i?s[o.hierNode.i-1]:null;if(n.length){executeShifts(o);var c=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;l?(o.hierNode.prelim=l.hierNode.prelim+a(o,l),o.hierNode.modifier=o.hierNode.prelim-c):o.hierNode.prelim=c}else l&&(o.hierNode.prelim=l.hierNode.prelim+a(o,l));o.parentNode.hierNode.defaultAncestor=apportion(o,l,o.parentNode.hierNode.defaultAncestor||s[0],a)}function secondWalk(o){var a=o.hierNode.prelim+o.parentNode.hierNode.modifier;o.setLayout({x:a},!0),o.hierNode.modifier+=o.parentNode.hierNode.modifier}function separation(o){return arguments.length?o:defaultSeparation}function radialCoordinate(o,a){return o-=Math.PI/2,{x:a*Math.cos(o),y:a*Math.sin(o)}}function getViewRect$4(o,a){return getLayoutRect(o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function executeShifts(o){for(var a=o.children,n=a.length,s=0,l=0;--n>=0;){var c=a[n];c.hierNode.prelim+=s,c.hierNode.modifier+=s,l+=c.hierNode.change,s+=c.hierNode.shift+l}}function apportion(o,a,n,s){if(a){for(var l=o,c=o,u=c.parentNode.children[0],d=a,h=l.hierNode.modifier,f=c.hierNode.modifier,p=u.hierNode.modifier,g=d.hierNode.modifier;d=nextRight(d),c=nextLeft(c),d&&c;){l=nextRight(l),u=nextLeft(u),l.hierNode.ancestor=o;var v=d.hierNode.prelim+g-c.hierNode.prelim-f+s(d,c);v>0&&(moveSubtree(nextAncestor(d,o,n),o,v),f+=v,h+=v),g+=d.hierNode.modifier,f+=c.hierNode.modifier,h+=l.hierNode.modifier,p+=u.hierNode.modifier}d&&!nextRight(l)&&(l.hierNode.thread=d,l.hierNode.modifier+=g-h),c&&!nextLeft(u)&&(u.hierNode.thread=c,u.hierNode.modifier+=f-p,n=o)}return n}function nextRight(o){var a=o.children;return a.length&&o.isExpand?a[a.length-1]:o.hierNode.thread}function nextLeft(o){var a=o.children;return a.length&&o.isExpand?a[0]:o.hierNode.thread}function nextAncestor(o,a,n){return o.hierNode.ancestor.parentNode===a.parentNode?o.hierNode.ancestor:n}function moveSubtree(o,a,n){var s=n/(a.hierNode.i-o.hierNode.i);a.hierNode.change-=s,a.hierNode.shift+=n,a.hierNode.modifier+=n,a.hierNode.prelim+=n,o.hierNode.change+=s}function defaultSeparation(o,a){return o.parentNode===a.parentNode?1:2}var TreeEdgeShape=function(){function o(){this.parentPoint=[],this.childPoints=[]}return o}(),TreePath=function(o){__extends$1(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new TreeEdgeShape},a.prototype.buildPath=function(n,s){var l=s.childPoints,c=l.length,u=s.parentPoint,d=l[0],h=l[c-1];if(c===1){n.moveTo(u[0],u[1]),n.lineTo(d[0],d[1]);return}var f=s.orient,p=f==="TB"||f==="BT"?0:1,g=1-p,v=parsePercent(s.forkPosition,1),b=[];b[p]=u[p],b[g]=u[g]+(h[g]-u[g])*v,n.moveTo(u[0],u[1]),n.lineTo(b[0],b[1]),n.moveTo(d[0],d[1]),b[p]=d[p],n.lineTo(b[0],b[1]),b[p]=h[p],n.lineTo(b[0],b[1]),n.lineTo(h[0],h[1]);for(var w=1;w<c-1;w++){var x=l[w];n.moveTo(x[0],x[1]),b[p]=x[p],n.lineTo(b[0],b[1])}},a}(Path),TreeView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._mainGroup=new Group$3,n}return a.prototype.init=function(n,s){this._controller=new RoamController(s.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},a.prototype.render=function(n,s,l){var c=n.getData(),u=n.layoutInfo,d=this._mainGroup,h=n.get("layout");h==="radial"?(d.x=u.x+u.width/2,d.y=u.y+u.height/2):(d.x=u.x,d.y=u.y),this._updateViewCoordSys(n,l),this._updateController(n,s,l);var f=this._data;c.diff(f).add(function(p){symbolNeedsDraw(c,p)&&updateNode(c,p,null,d,n)}).update(function(p,g){var v=f.getItemGraphicEl(g);if(!symbolNeedsDraw(c,p)){v&&removeNode(f,g,v,d,n);return}updateNode(c,p,v,d,n)}).remove(function(p){var g=f.getItemGraphicEl(p);g&&removeNode(f,p,g,d,n)}).execute(),this._nodeScaleRatio=n.get("nodeScaleRatio"),this._updateNodeAndLinkScale(n),n.get("expandAndCollapse")===!0&&c.eachItemGraphicEl(function(p,g){p.off("click").on("click",function(){l.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:g})})}),this._data=c},a.prototype._updateViewCoordSys=function(n,s){var l=n.getData(),c=[];l.each(function(g){var v=l.getItemLayout(g);v&&!isNaN(v.x)&&!isNaN(v.y)&&c.push([+v.x,+v.y])});var u=[],d=[];fromPoints(c,u,d);var h=this._min,f=this._max;d[0]-u[0]===0&&(u[0]=h?h[0]:u[0]-1,d[0]=f?f[0]:d[0]+1),d[1]-u[1]===0&&(u[1]=h?h[1]:u[1]-1,d[1]=f?f[1]:d[1]+1);var p=n.coordinateSystem=new View;p.zoomLimit=n.get("scaleLimit"),p.setBoundingRect(u[0],u[1],d[0]-u[0],d[1]-u[1]),p.setCenter(n.get("center"),s),p.setZoom(n.get("zoom")),this.group.attr({x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY}),this._min=u,this._max=d},a.prototype._updateController=function(n,s,l){var c=this,u=this._controller,d=this._controllerHost,h=this.group;u.setPointerChecker(function(f,p,g){var v=h.getBoundingRect();return v.applyTransform(h.transform),v.contain(p,g)&&!onIrrelevantElement(f,l,n)}),u.enable(n.get("roam")),d.zoomLimit=n.get("scaleLimit"),d.zoom=n.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(d,f.dx,f.dy),l.dispatchAction({seriesId:n.id,type:"treeRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(d,f.scale,f.originX,f.originY),l.dispatchAction({seriesId:n.id,type:"treeRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),c._updateNodeAndLinkScale(n),l.updateLabelLayout()})},a.prototype._updateNodeAndLinkScale=function(n){var s=n.getData(),l=this._getNodeGlobalScale(n);s.eachItemGraphicEl(function(c,u){c.setSymbolScale(l)})},a.prototype._getNodeGlobalScale=function(n){var s=n.coordinateSystem;if(s.type!=="view")return 1;var l=this._nodeScaleRatio,c=s.scaleX||1,u=s.getZoom(),d=(u-1)*l+1;return d/c},a.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},a.type="tree",a}(ChartView);function symbolNeedsDraw(o,a){var n=o.getItemLayout(a);return n&&!isNaN(n.x)&&!isNaN(n.y)}function updateNode(o,a,n,s,l){var c=!n,u=o.tree.getNodeByDataIndex(a),d=u.getModel(),h=u.getVisual("style").fill,f=u.isExpand===!1&&u.children.length!==0?h:"#fff",p=o.tree.root,g=u.parentNode===p?u:u.parentNode||u,v=o.getItemGraphicEl(g.dataIndex),b=g.getLayout(),w=v?{x:v.__oldX,y:v.__oldY,rawX:v.__radialOldRawX,rawY:v.__radialOldRawY}:b,x=u.getLayout();c?(n=new Symbol$1(o,a,null,{symbolInnerColor:f,useNameLabel:!0}),n.x=w.x,n.y=w.y):n.updateData(o,a,null,{symbolInnerColor:f,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=x.rawX,n.__radialRawY=x.rawY,s.add(n),o.setItemGraphicEl(a,n),n.__oldX=n.x,n.__oldY=n.y,updateProps$1(n,{x:x.x,y:x.y},l);var S=n.getSymbolPath();if(l.get("layout")==="radial"){var E=p.children[0],T=E.getLayout(),C=E.children.length,A=void 0,R=void 0;if(x.x===T.x&&u.isExpand===!0&&E.children.length){var j={x:(E.children[0].getLayout().x+E.children[C-1].getLayout().x)/2,y:(E.children[0].getLayout().y+E.children[C-1].getLayout().y)/2};A=Math.atan2(j.y-T.y,j.x-T.x),A<0&&(A=Math.PI*2+A),R=j.x<T.x,R&&(A=A-Math.PI)}else A=Math.atan2(x.y-T.y,x.x-T.x),A<0&&(A=Math.PI*2+A),u.children.length===0||u.children.length!==0&&u.isExpand===!1?(R=x.x<T.x,R&&(A=A-Math.PI)):(R=x.x>T.x,R||(A=A-Math.PI));var D=R?"left":"right",O=d.getModel("label"),H=O.get("rotate"),q=H*(Math.PI/180),Y=S.getTextContent();Y&&(S.setTextConfig({position:O.get("position")||D,rotation:H==null?-A:q,origin:"center"}),Y.setStyle("verticalAlign","middle"))}var te=d.get(["emphasis","focus"]),ee=te==="relative"?concatArray(u.getAncestorsIndices(),u.getDescendantIndices()):te==="ancestor"?u.getAncestorsIndices():te==="descendant"?u.getDescendantIndices():null;ee&&(getECData(n).focus=ee),drawEdge(l,u,p,n,w,b,x,s),n.__edge&&(n.onHoverStateChange=function(re){if(re!=="blur"){var ne=u.parentNode&&o.getItemGraphicEl(u.parentNode.dataIndex);ne&&ne.hoverState===HOVER_STATE_BLUR||setStatesFlag(n.__edge,re)}})}function drawEdge(o,a,n,s,l,c,u,d){var h=a.getModel(),f=o.get("edgeShape"),p=o.get("layout"),g=o.getOrient(),v=o.get(["lineStyle","curveness"]),b=o.get("edgeForkPosition"),w=h.getModel("lineStyle").getLineStyle(),x=s.__edge;if(f==="curve")a.parentNode&&a.parentNode!==n&&(x||(x=s.__edge=new BezierCurve({shape:getEdgeShape(p,g,v,l,l)})),updateProps$1(x,{shape:getEdgeShape(p,g,v,c,u)},o));else if(f==="polyline"){if(p==="orthogonal"){if(a!==n&&a.children&&a.children.length!==0&&a.isExpand===!0){for(var S=a.children,E=[],T=0;T<S.length;T++){var C=S[T].getLayout();E.push([C.x,C.y])}x||(x=s.__edge=new TreePath({shape:{parentPoint:[u.x,u.y],childPoints:[[u.x,u.y]],orient:g,forkPosition:b}})),updateProps$1(x,{shape:{parentPoint:[u.x,u.y],childPoints:E}},o)}}else if(process.env.NODE_ENV!=="production")throw new Error("The polyline edgeShape can only be used in orthogonal layout")}x&&!(f==="polyline"&&!a.isExpand)&&(x.useStyle(defaults({strokeNoScale:!0,fill:null},w)),setStatesStylesFromModel(x,h,"lineStyle"),setDefaultStateProxy(x),d.add(x))}function removeNodeEdge(o,a,n,s,l){var c=a.tree.root,u=getSourceNode(c,o),d=u.source,h=u.sourceLayout,f=a.getItemGraphicEl(o.dataIndex);if(f){var p=a.getItemGraphicEl(d.dataIndex),g=p.__edge,v=f.__edge||(d.isExpand===!1||d.children.length===1?g:void 0),b=s.get("edgeShape"),w=s.get("layout"),x=s.get("orient"),S=s.get(["lineStyle","curveness"]);v&&(b==="curve"?removeElement(v,{shape:getEdgeShape(w,x,S,h,h),style:{opacity:0}},s,{cb:function(){n.remove(v)},removeOpt:l}):b==="polyline"&&s.get("layout")==="orthogonal"&&removeElement(v,{shape:{parentPoint:[h.x,h.y],childPoints:[[h.x,h.y]]},style:{opacity:0}},s,{cb:function(){n.remove(v)},removeOpt:l}))}}function getSourceNode(o,a){for(var n=a.parentNode===o?a:a.parentNode||a,s;s=n.getLayout(),s==null;)n=n.parentNode===o?n:n.parentNode||n;return{source:n,sourceLayout:s}}function removeNode(o,a,n,s,l){var c=o.tree.getNodeByDataIndex(a),u=o.tree.root,d=getSourceNode(u,c).sourceLayout,h={duration:l.get("animationDurationUpdate"),easing:l.get("animationEasingUpdate")};removeElement(n,{x:d.x+1,y:d.y+1},l,{cb:function(){s.remove(n),o.setItemGraphicEl(a,null)},removeOpt:h}),n.fadeOut(null,o.hostModel,{fadeLabel:!0,animation:h}),c.children.forEach(function(f){removeNodeEdge(f,o,s,l,h)}),removeNodeEdge(c,o,s,l,h)}function getEdgeShape(o,a,n,s,l){var c,u,d,h,f,p,g,v;if(o==="radial"){f=s.rawX,g=s.rawY,p=l.rawX,v=l.rawY;var b=radialCoordinate(f,g),w=radialCoordinate(f,g+(v-g)*n),x=radialCoordinate(p,v+(g-v)*n),S=radialCoordinate(p,v);return{x1:b.x||0,y1:b.y||0,x2:S.x||0,y2:S.y||0,cpx1:w.x||0,cpy1:w.y||0,cpx2:x.x||0,cpy2:x.y||0}}else f=s.x,g=s.y,p=l.x,v=l.y,(a==="LR"||a==="RL")&&(c=f+(p-f)*n,u=g,d=p+(f-p)*n,h=v),(a==="TB"||a==="BT")&&(c=f,u=g+(v-g)*n,d=p,h=v+(g-v)*n);return{x1:f,y1:g,x2:p,y2:v,cpx1:c,cpy1:u,cpx2:d,cpy2:h}}var inner$e=makeInner();function linkSeriesData(o){var a=o.mainData,n=o.datas;n||(n={main:a},o.datasAttr={main:"data"}),o.datas=o.mainData=null,linkAll(a,n,o),each$f(n,function(s){each$f(a.TRANSFERABLE_METHODS,function(l){s.wrapMethod(l,curry$1(transferInjection,o))})}),a.wrapMethod("cloneShallow",curry$1(cloneShallowInjection,o)),each$f(a.CHANGABLE_METHODS,function(s){a.wrapMethod(s,curry$1(changeInjection,o))}),assert(n[a.dataType]===a)}function transferInjection(o,a){if(isMainData(this)){var n=extend({},inner$e(this).datas);n[this.dataType]=a,linkAll(a,n,o)}else linkSingle(a,this.dataType,inner$e(this).mainData,o);return a}function changeInjection(o,a){return o.struct&&o.struct.update(),a}function cloneShallowInjection(o,a){return each$f(inner$e(a).datas,function(n,s){n!==a&&linkSingle(n.cloneShallow(),s,a,o)}),a}function getLinkedData(o){var a=inner$e(this).mainData;return o==null||a==null?a:inner$e(a).datas[o]}function getLinkedDataAll(){var o=inner$e(this).mainData;return o==null?[{data:o}]:map$1(keys$1(inner$e(o).datas),function(a){return{type:a,data:inner$e(o).datas[a]}})}function isMainData(o){return inner$e(o).mainData===o}function linkAll(o,a,n){inner$e(o).datas={},each$f(a,function(s,l){linkSingle(s,l,o,n)})}function linkSingle(o,a,n,s){inner$e(n).datas[a]=o,inner$e(o).mainData=n,o.dataType=a,s.struct&&(o[s.structAttr]=s.struct,s.struct[s.datasAttr[a]]=o),o.getLinkedData=getLinkedData,o.getLinkedDataAll=getLinkedDataAll}var TreeNode=function(){function o(a,n){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=a||"",this.hostTree=n}return o.prototype.isRemoved=function(){return this.dataIndex<0},o.prototype.eachNode=function(a,n,s){isFunction$1(a)&&(s=n,n=a,a=null),a=a||{},isString$2(a)&&(a={order:a});var l=a.order||"preorder",c=this[a.attr||"children"],u;l==="preorder"&&(u=n.call(s,this));for(var d=0;!u&&d<c.length;d++)c[d].eachNode(a,n,s);l==="postorder"&&n.call(s,this)},o.prototype.updateDepthAndHeight=function(a){var n=0;this.depth=a;for(var s=0;s<this.children.length;s++){var l=this.children[s];l.updateDepthAndHeight(a+1),l.height>n&&(n=l.height)}this.height=n+1},o.prototype.getNodeById=function(a){if(this.getId()===a)return this;for(var n=0,s=this.children,l=s.length;n<l;n++){var c=s[n].getNodeById(a);if(c)return c}},o.prototype.contains=function(a){if(a===this)return!0;for(var n=0,s=this.children,l=s.length;n<l;n++){var c=s[n].contains(a);if(c)return c}},o.prototype.getAncestors=function(a){for(var n=[],s=a?this:this.parentNode;s;)n.push(s),s=s.parentNode;return n.reverse(),n},o.prototype.getAncestorsIndices=function(){for(var a=[],n=this;n;)a.push(n.dataIndex),n=n.parentNode;return a.reverse(),a},o.prototype.getDescendantIndices=function(){var a=[];return this.eachNode(function(n){a.push(n.dataIndex)}),a},o.prototype.getValue=function(a){var n=this.hostTree.data;return n.getStore().get(n.getDimensionIndex(a||"value"),this.dataIndex)},o.prototype.setLayout=function(a,n){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,a,n)},o.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},o.prototype.getModel=function(a){if(!(this.dataIndex<0)){var n=this.hostTree,s=n.data.getItemModel(this.dataIndex);return s.getModel(a)}},o.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},o.prototype.setVisual=function(a,n){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,a,n)},o.prototype.getVisual=function(a){return this.hostTree.data.getItemVisual(this.dataIndex,a)},o.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},o.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},o.prototype.getChildIndex=function(){if(this.parentNode){for(var a=this.parentNode.children,n=0;n<a.length;++n)if(a[n]===this)return n;return-1}return-1},o.prototype.isAncestorOf=function(a){for(var n=a.parentNode;n;){if(n===this)return!0;n=n.parentNode}return!1},o.prototype.isDescendantOf=function(a){return a!==this&&a.isAncestorOf(this)},o}(),Tree=function(){function o(a){this.type="tree",this._nodes=[],this.hostModel=a}return o.prototype.eachNode=function(a,n,s){this.root.eachNode(a,n,s)},o.prototype.getNodeByDataIndex=function(a){var n=this.data.getRawIndex(a);return this._nodes[n]},o.prototype.getNodeById=function(a){return this.root.getNodeById(a)},o.prototype.update=function(){for(var a=this.data,n=this._nodes,s=0,l=n.length;s<l;s++)n[s].dataIndex=-1;for(var s=0,l=a.count();s<l;s++)n[a.getRawIndex(s)].dataIndex=s},o.prototype.clearLayouts=function(){this.data.clearItemLayouts()},o.createTree=function(a,n,s){var l=new o(n),c=[],u=1;d(a);function d(p,g){var v=p.value;u=Math.max(u,isArray$1(v)?v.length:1),c.push(p);var b=new TreeNode(convertOptionIdName(p.name,""),l);g?addChild(b,g):l.root=b,l._nodes.push(b);var w=p.children;if(w)for(var x=0;x<w.length;x++)d(w[x],b)}l.root.updateDepthAndHeight(0);var h=prepareSeriesDataSchema(c,{coordDimensions:["value"],dimensionsCount:u}).dimensions,f=new SeriesData(h,n);return f.initData(c),s&&s(f),linkSeriesData({mainData:f,struct:l,structAttr:"tree"}),l.update(),l},o}();function addChild(o,a){var n=a.children;o.parentNode!==a&&(n.push(o),o.parentNode=a)}function retrieveTargetInfo(o,a,n){if(o&&indexOf(a,o.type)>=0){var s=n.getData().tree.root,l=o.targetNode;if(isString$2(l)&&(l=s.getNodeById(l)),l&&s.contains(l))return{node:l};var c=o.targetNodeId;if(c!=null&&(l=s.getNodeById(c)))return{node:l}}}function getPathToRoot(o){for(var a=[];o;)o=o.parentNode,o&&a.push(o);return a.reverse()}function aboveViewRoot(o,a){var n=getPathToRoot(o);return indexOf(n,a)>=0}function wrapTreePathInfo(o,a){for(var n=[];o;){var s=o.dataIndex;n.push({name:o.name,dataIndex:s,value:a.getRawValue(s)}),o=o.parentNode}return n.reverse(),n}var TreeSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.hasSymbolVisual=!0,n.ignoreStyleOnData=!0,n}return a.prototype.getInitialData=function(n){var s={name:n.name,children:n.data},l=n.leaves||{},c=new Model(l,this,this.ecModel),u=Tree.createTree(s,this,d);function d(g){g.wrapMethod("getItemModel",function(v,b){var w=u.getNodeByDataIndex(b);return w&&w.children.length&&w.isExpand||(v.parentModel=c),v})}var h=0;u.eachNode("preorder",function(g){g.depth>h&&(h=g.depth)});var f=n.expandAndCollapse,p=f&&n.initialTreeDepth>=0?n.initialTreeDepth:h;return u.root.eachNode("preorder",function(g){var v=g.hostTree.data.getRawDataItem(g.dataIndex);g.isExpand=v&&v.collapsed!=null?!v.collapsed:g.depth<=p}),u.data},a.prototype.getOrient=function(){var n=this.get("orient");return n==="horizontal"?n="LR":n==="vertical"&&(n="TB"),n},a.prototype.setZoom=function(n){this.option.zoom=n},a.prototype.setCenter=function(n){this.option.center=n},a.prototype.formatTooltip=function(n,s,l){for(var c=this.getData().tree,u=c.root.children[0],d=c.getNodeByDataIndex(n),h=d.getValue(),f=d.name;d&&d!==u;)f=d.parentNode.name+"."+f,d=d.parentNode;return createTooltipMarkup("nameValue",{name:f,value:h,noValue:isNaN(h)||h==null})},a.prototype.getDataParams=function(n){var s=o.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(n);return s.treeAncestors=wrapTreePathInfo(l,this),s.collapsed=!l.isExpand,s},a.type="series.tree",a.layoutMode="box",a.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},a}(SeriesModel);function eachAfter(o,a,n){for(var s=[o],l=[],c;c=s.pop();)if(l.push(c),c.isExpand){var u=c.children;if(u.length)for(var d=0;d<u.length;d++)s.push(u[d])}for(;c=l.pop();)a(c,n)}function eachBefore(o,a){for(var n=[o],s;s=n.pop();)if(a(s),s.isExpand){var l=s.children;if(l.length)for(var c=l.length-1;c>=0;c--)n.push(l[c])}}function treeLayout(o,a){o.eachSeriesByType("tree",function(n){commonLayout(n,a)})}function commonLayout(o,a){var n=getViewRect$4(o,a);o.layoutInfo=n;var s=o.get("layout"),l=0,c=0,u=null;s==="radial"?(l=2*Math.PI,c=Math.min(n.height,n.width)/2,u=separation(function(C,A){return(C.parentNode===A.parentNode?1:2)/C.depth})):(l=n.width,c=n.height,u=separation());var d=o.getData().tree.root,h=d.children[0];if(h){init(d),eachAfter(h,firstWalk,u),d.hierNode.modifier=-h.hierNode.prelim,eachBefore(h,secondWalk);var f=h,p=h,g=h;eachBefore(h,function(C){var A=C.getLayout().x;A<f.getLayout().x&&(f=C),A>p.getLayout().x&&(p=C),C.depth>g.depth&&(g=C)});var v=f===p?1:u(f,p)/2,b=v-f.getLayout().x,w=0,x=0,S=0,E=0;if(s==="radial")w=l/(p.getLayout().x+v+b),x=c/(g.depth-1||1),eachBefore(h,function(C){S=(C.getLayout().x+b)*w,E=(C.depth-1)*x;var A=radialCoordinate(S,E);C.setLayout({x:A.x,y:A.y,rawX:S,rawY:E},!0)});else{var T=o.getOrient();T==="RL"||T==="LR"?(x=c/(p.getLayout().x+v+b),w=l/(g.depth-1||1),eachBefore(h,function(C){E=(C.getLayout().x+b)*x,S=T==="LR"?(C.depth-1)*w:l-(C.depth-1)*w,C.setLayout({x:S,y:E},!0)})):(T==="TB"||T==="BT")&&(w=l/(p.getLayout().x+v+b),x=c/(g.depth-1||1),eachBefore(h,function(C){S=(C.getLayout().x+b)*w,E=T==="TB"?(C.depth-1)*x:c-(C.depth-1)*x,C.setLayout({x:S,y:E},!0)}))}}}function treeVisual(o){o.eachSeriesByType("tree",function(a){var n=a.getData(),s=n.tree;s.eachNode(function(l){var c=l.getModel(),u=c.getModel("itemStyle").getItemStyle(),d=n.ensureUniqueItemVisual(l.dataIndex,"style");extend(d,u)})})}function installTreeAction(o){o.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(a,n){n.eachComponent({mainType:"series",subType:"tree",query:a},function(s){var l=a.dataIndex,c=s.getData().tree,u=c.getNodeByDataIndex(l);u.isExpand=!u.isExpand})}),o.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(a,n,s){n.eachComponent({mainType:"series",subType:"tree",query:a},function(l){var c=l.coordinateSystem,u=updateCenterAndZoom(c,a,void 0,s);l.setCenter&&l.setCenter(u.center),l.setZoom&&l.setZoom(u.zoom)})})}function install$H(o){o.registerChartView(TreeView),o.registerSeriesModel(TreeSeriesModel),o.registerLayout(treeLayout),o.registerVisual(treeVisual),installTreeAction(o)}var actionTypes=["treemapZoomToNode","treemapRender","treemapMove"];function installTreemapAction(o){for(var a=0;a<actionTypes.length;a++)o.registerAction({type:actionTypes[a],update:"updateView"},noop$1);o.registerAction({type:"treemapRootToNode",update:"updateView"},function(n,s){s.eachComponent({mainType:"series",subType:"treemap",query:n},l);function l(c,u){var d=["treemapZoomToNode","treemapRootToNode"],h=retrieveTargetInfo(n,d,c);if(h){var f=c.getViewRoot();f&&(n.direction=aboveViewRoot(f,h.node)?"rollUp":"drillDown"),c.resetViewRoot(h.node)}}})}function enableAriaDecalForTree(o){var a=o.getData(),n=a.tree,s={};n.eachNode(function(l){for(var c=l;c&&c.depth>1;)c=c.parentNode;var u=getDecalFromPalette(o.ecModel,c.name||c.dataIndex+"",s);l.setVisual("decal",u)})}var TreemapSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.preventUsingHoverLayer=!0,n}return a.prototype.getInitialData=function(n,s){var l={name:n.name,children:n.data};completeTreeValue$1(l);var c=n.levels||[],u=this.designatedVisualItemStyle={},d=new Model({itemStyle:u},this,s);c=n.levels=setDefault(c,s);var h=map$1(c||[],function(g){return new Model(g,d,s)},this),f=Tree.createTree(l,this,p);function p(g){g.wrapMethod("getItemModel",function(v,b){var w=f.getNodeByDataIndex(b),x=w?h[w.depth]:null;return v.parentModel=x||d,v})}return f.data},a.prototype.optionUpdated=function(){this.resetViewRoot()},a.prototype.formatTooltip=function(n,s,l){var c=this.getData(),u=this.getRawValue(n),d=c.getName(n);return createTooltipMarkup("nameValue",{name:d,value:u})},a.prototype.getDataParams=function(n){var s=o.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(n);return s.treeAncestors=wrapTreePathInfo(l,this),s.treePathInfo=s.treeAncestors,s},a.prototype.setLayoutInfo=function(n){this.layoutInfo=this.layoutInfo||{},extend(this.layoutInfo,n)},a.prototype.mapIdToIndex=function(n){var s=this._idIndexMap;s||(s=this._idIndexMap=createHashMap(),this._idIndexMapCount=0);var l=s.get(n);return l==null&&s.set(n,l=this._idIndexMapCount++),l},a.prototype.getViewRoot=function(){return this._viewRoot},a.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var s=this.getRawData().tree.root;(!n||n!==s&&!s.contains(n))&&(this._viewRoot=s)},a.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},a.type="series.treemap",a.layoutMode="box",a.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.32*.32,scaleLimit:null,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},a}(SeriesModel);function completeTreeValue$1(o){var a=0;each$f(o.children,function(s){completeTreeValue$1(s);var l=s.value;isArray$1(l)&&(l=l[0]),a+=l});var n=o.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=a),n<0&&(n=0),isArray$1(o.value)?o.value[0]=n:o.value=n}function setDefault(o,a){var n=normalizeToArray(a.get("color")),s=normalizeToArray(a.get(["aria","decal","decals"]));if(n){o=o||[];var l,c;each$f(o,function(d){var h=new Model(d),f=h.get("color"),p=h.get("decal");(h.get(["itemStyle","color"])||f&&f!=="none")&&(l=!0),(h.get(["itemStyle","decal"])||p&&p!=="none")&&(c=!0)});var u=o[0]||(o[0]={});return l||(u.color=n.slice()),!c&&s&&(u.decal=s.slice()),o}}var TEXT_PADDING=8,ITEM_GAP=8,ARRAY_LENGTH=5,Breadcrumb=function(){function o(a){this.group=new Group$3,a.add(this.group)}return o.prototype.render=function(a,n,s,l){var c=a.getModel("breadcrumb"),u=this.group;if(u.removeAll(),!(!c.get("show")||!s)){var d=c.getModel("itemStyle"),h=c.getModel("emphasis"),f=d.getModel("textStyle"),p=h.getModel(["itemStyle","textStyle"]),g={pos:{left:c.get("left"),right:c.get("right"),top:c.get("top"),bottom:c.get("bottom")},box:{width:n.getWidth(),height:n.getHeight()},emptyItemWidth:c.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(s,g,f),this._renderContent(a,g,d,h,f,p,l),positionElement(u,g.pos,g.box)}},o.prototype._prepare=function(a,n,s){for(var l=a;l;l=l.parentNode){var c=convertOptionIdName(l.getModel().get("name"),""),u=s.getTextRect(c),d=Math.max(u.width+TEXT_PADDING*2,n.emptyItemWidth);n.totalWidth+=d+ITEM_GAP,n.renderList.push({node:l,text:c,width:d})}},o.prototype._renderContent=function(a,n,s,l,c,u,d){for(var h=0,f=n.emptyItemWidth,p=a.get(["breadcrumb","height"]),g=getAvailableSize(n.pos,n.box),v=n.totalWidth,b=n.renderList,w=l.getModel("itemStyle").getItemStyle(),x=b.length-1;x>=0;x--){var S=b[x],E=S.node,T=S.width,C=S.text;v>g.width&&(v-=T-f,T=f,C=null);var A=new Polygon({shape:{points:makeItemPoints(h,0,T,p,x===b.length-1,x===0)},style:defaults(s.getItemStyle(),{lineJoin:"bevel"}),textContent:new ZRText({style:createTextStyle$1(c,{text:C})}),textConfig:{position:"inside"},z2:Z2_EMPHASIS_LIFT*1e4,onclick:curry$1(d,E)});A.disableLabelAnimation=!0,A.getTextContent().ensureState("emphasis").style=createTextStyle$1(u,{text:C}),A.ensureState("emphasis").style=w,toggleHoverEmphasis(A,l.get("focus"),l.get("blurScope"),l.get("disabled")),this.group.add(A),packEventData(A,a,E),h+=T+ITEM_GAP}},o.prototype.remove=function(){this.group.removeAll()},o}();function makeItemPoints(o,a,n,s,l,c){var u=[[l?o:o-ARRAY_LENGTH,a],[o+n,a],[o+n,a+s],[l?o:o-ARRAY_LENGTH,a+s]];return!c&&u.splice(2,0,[o+n+ARRAY_LENGTH,a+s/2]),!l&&u.push([o,a+s/2]),u}function packEventData(o,a,n){getECData(o).eventData={componentType:"series",componentSubType:"treemap",componentIndex:a.componentIndex,seriesIndex:a.seriesIndex,seriesName:a.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&wrapTreePathInfo(n,a)}}var AnimationWrap=function(){function o(){this._storage=[],this._elExistsMap={}}return o.prototype.add=function(a,n,s,l,c){return this._elExistsMap[a.id]?!1:(this._elExistsMap[a.id]=!0,this._storage.push({el:a,target:n,duration:s,delay:l,easing:c}),!0)},o.prototype.finished=function(a){return this._finishedCallback=a,this},o.prototype.start=function(){for(var a=this,n=this._storage.length,s=function(){n--,n<=0&&(a._storage.length=0,a._elExistsMap={},a._finishedCallback&&a._finishedCallback())},l=0,c=this._storage.length;l<c;l++){var u=this._storage[l];u.el.animateTo(u.target,{duration:u.duration,delay:u.delay,easing:u.easing,setToFinal:!0,done:s,aborted:s})}return this},o}();function createWrap(){return new AnimationWrap}var Group$2=Group$3,Rect$1=Rect$2,DRAG_THRESHOLD=3,PATH_LABEL_NOAMAL="label",PATH_UPPERLABEL_NORMAL="upperLabel",Z2_BASE=Z2_EMPHASIS_LIFT*10,Z2_BG=Z2_EMPHASIS_LIFT*2,Z2_CONTENT=Z2_EMPHASIS_LIFT*3,getStateItemStyle=makeStyleMapper([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),getItemStyleNormal=function(o){var a=getStateItemStyle(o);return a.stroke=a.fill=a.lineWidth=null,a},inner$d=makeInner(),TreemapView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._state="ready",n._storage=createStorage(),n}return a.prototype.render=function(n,s,l,c){var u=s.findComponents({mainType:"series",subType:"treemap",query:c});if(!(indexOf(u,n)<0)){this.seriesModel=n,this.api=l,this.ecModel=s;var d=["treemapZoomToNode","treemapRootToNode"],h=retrieveTargetInfo(c,d,n),f=c&&c.type,p=n.layoutInfo,g=!this._oldTree,v=this._storage,b=f==="treemapRootToNode"&&h&&v?{rootNodeGroup:v.nodeGroup[h.node.getRawIndex()],direction:c.direction}:null,w=this._giveContainerGroup(p),x=n.get("animation"),S=this._doRender(w,n,b);x&&!g&&(!f||f==="treemapZoomToNode"||f==="treemapRootToNode")?this._doAnimation(w,S,n,b):S.renderFinally(),this._resetController(l),this._renderBreadcrumb(n,l,h)}},a.prototype._giveContainerGroup=function(n){var s=this._containerGroup;return s||(s=this._containerGroup=new Group$2,this._initEvents(s),this.group.add(s)),s.x=n.x,s.y=n.y,s},a.prototype._doRender=function(n,s,l){var c=s.getData().tree,u=this._oldTree,d=createStorage(),h=createStorage(),f=this._storage,p=[];function g(T,C,A,R){return renderNode(s,h,f,l,d,p,T,C,A,R)}x(c.root?[c.root]:[],u&&u.root?[u.root]:[],n,c===u||!u,0);var v=S(f);if(this._oldTree=c,this._storage=h,this._controllerHost){var b=this.seriesModel.layoutInfo,w=c.root.getLayout();w.width===b.width&&w.height===b.height&&(this._controllerHost.zoom=1)}return{lastsForAnimation:d,willDeleteEls:v,renderFinally:E};function x(T,C,A,R,j){R?(C=T,each$f(T,function(H,q){!H.isRemoved()&&O(q,q)})):new DataDiffer(C,T,D,D).add(O).update(O).remove(curry$1(O,null)).execute();function D(H){return H.getId()}function O(H,q){var Y=H!=null?T[H]:null,te=q!=null?C[q]:null,ee=g(Y,te,A,j);ee&&x(Y&&Y.viewChildren||[],te&&te.viewChildren||[],ee,R,j+1)}}function S(T){var C=createStorage();return T&&each$f(T,function(A,R){var j=C[R];each$f(A,function(D){D&&(j.push(D),inner$d(D).willDelete=!0)})}),C}function E(){each$f(v,function(T){each$f(T,function(C){C.parent&&C.parent.remove(C)})}),each$f(p,function(T){T.invisible=!0,T.dirty()})}},a.prototype._doAnimation=function(n,s,l,c){var u=l.get("animationDurationUpdate"),d=l.get("animationEasing"),h=(isFunction$1(u)?0:u)||0,f=(isFunction$1(d)?null:d)||"cubicOut",p=createWrap();each$f(s.willDeleteEls,function(g,v){each$f(g,function(b,w){if(!b.invisible){var x=b.parent,S,E=inner$d(x);if(c&&c.direction==="drillDown")S=x===c.rootNodeGroup?{shape:{x:0,y:0,width:E.nodeWidth,height:E.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var T=0,C=0;E.willDelete||(T=E.nodeWidth/2,C=E.nodeHeight/2),S=v==="nodeGroup"?{x:T,y:C,style:{opacity:0}}:{shape:{x:T,y:C,width:0,height:0},style:{opacity:0}}}S&&p.add(b,S,h,0,f)}})}),each$f(this._storage,function(g,v){each$f(g,function(b,w){var x=s.lastsForAnimation[v][w],S={};x&&(b instanceof Group$3?x.oldX!=null&&(S.x=b.x,S.y=b.y,b.x=x.oldX,b.y=x.oldY):(x.oldShape&&(S.shape=extend({},b.shape),b.setShape(x.oldShape)),x.fadein?(b.setStyle("opacity",0),S.style={opacity:1}):b.style.opacity!==1&&(S.style={opacity:1})),p.add(b,S,h,0,f))})},this),this._state="animating",p.finished(bind$1(function(){this._state="ready",s.renderFinally()},this)).start()},a.prototype._resetController=function(n){var s=this._controller,l=this._controllerHost;l||(this._controllerHost={target:this.group},l=this._controllerHost),s||(s=this._controller=new RoamController(n.getZr()),s.enable(this.seriesModel.get("roam")),l.zoomLimit=this.seriesModel.get("scaleLimit"),l.zoom=this.seriesModel.get("zoom"),s.on("pan",bind$1(this._onPan,this)),s.on("zoom",bind$1(this._onZoom,this)));var c=new BoundingRect(0,0,n.getWidth(),n.getHeight());s.setPointerChecker(function(u,d,h){return c.contain(d,h)})},a.prototype._clearController=function(){var n=this._controller;this._controllerHost=null,n&&(n.dispose(),n=null)},a.prototype._onPan=function(n){if(this._state!=="animating"&&(Math.abs(n.dx)>DRAG_THRESHOLD||Math.abs(n.dy)>DRAG_THRESHOLD)){var s=this.seriesModel.getData().tree.root;if(!s)return;var l=s.getLayout();if(!l)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x+n.dx,y:l.y+n.dy,width:l.width,height:l.height}})}},a.prototype._onZoom=function(n){var s=n.originX,l=n.originY,c=n.scale;if(this._state!=="animating"){var u=this.seriesModel.getData().tree.root;if(!u)return;var d=u.getLayout();if(!d)return;var h=new BoundingRect(d.x,d.y,d.width,d.height),f=null,p=this._controllerHost;f=p.zoomLimit;var g=p.zoom=p.zoom||1;if(g*=c,f){var v=f.min||0,b=f.max||1/0;g=Math.max(Math.min(b,g),v)}var w=g/p.zoom;p.zoom=g;var x=this.seriesModel.layoutInfo;s-=x.x,l-=x.y;var S=create$1();translate(S,S,[-s,-l]),scale$1(S,S,[w,w]),translate(S,S,[s,l]),h.applyTransform(S),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:h.x,y:h.y,width:h.width,height:h.height}})}},a.prototype._initEvents=function(n){var s=this;n.on("click",function(l){if(s._state==="ready"){var c=s.seriesModel.get("nodeClick",!0);if(c){var u=s.findTarget(l.offsetX,l.offsetY);if(u){var d=u.node;if(d.getLayout().isLeafRoot)s._rootToNode(u);else if(c==="zoomToNode")s._zoomToNode(u);else if(c==="link"){var h=d.hostTree.data.getItemModel(d.dataIndex),f=h.get("link",!0),p=h.get("target",!0)||"blank";f&&windowOpen(f,p)}}}}},this)},a.prototype._renderBreadcrumb=function(n,s,l){var c=this;l||(l=n.get("leafDepth",!0)!=null?{node:n.getViewRoot()}:this.findTarget(s.getWidth()/2,s.getHeight()/2),l||(l={node:n.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Breadcrumb(this.group))).render(n,s,l.node,function(u){c._state!=="animating"&&(aboveViewRoot(n.getViewRoot(),u)?c._rootToNode({node:u}):c._zoomToNode({node:u}))})},a.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=createStorage(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},a.prototype.dispose=function(){this._clearController()},a.prototype._zoomToNode=function(n){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},a.prototype._rootToNode=function(n){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:n.node})},a.prototype.findTarget=function(n,s){var l,c=this.seriesModel.getViewRoot();return c.eachNode({attr:"viewChildren",order:"preorder"},function(u){var d=this._storage.background[u.getRawIndex()];if(d){var h=d.transformCoordToLocal(n,s),f=d.shape;if(f.x<=h[0]&&h[0]<=f.x+f.width&&f.y<=h[1]&&h[1]<=f.y+f.height)l={node:u,offsetX:h[0],offsetY:h[1]};else return!1}},this),l},a.type="treemap",a}(ChartView);function createStorage(){return{nodeGroup:[],background:[],content:[]}}function renderNode(o,a,n,s,l,c,u,d,h,f){if(!u)return;var p=u.getLayout(),g=o.getData(),v=u.getModel();if(g.setItemGraphicEl(u.dataIndex,null),!p||!p.isInView)return;var b=p.width,w=p.height,x=p.borderWidth,S=p.invisible,E=u.getRawIndex(),T=d&&d.getRawIndex(),C=u.viewChildren,A=p.upperHeight,R=C&&C.length,j=v.getModel("itemStyle"),D=v.getModel(["emphasis","itemStyle"]),O=v.getModel(["blur","itemStyle"]),H=v.getModel(["select","itemStyle"]),q=j.get("borderRadius")||0,Y=le("nodeGroup",Group$2);if(!Y)return;if(h.add(Y),Y.x=p.x||0,Y.y=p.y||0,Y.markRedraw(),inner$d(Y).nodeWidth=b,inner$d(Y).nodeHeight=w,p.isAboveViewRoot)return Y;var te=le("background",Rect$1,f,Z2_BG);te&&ae(Y,te,R&&p.upperLabelHeight);var ee=v.getModel("emphasis"),re=ee.get("focus"),ne=ee.get("blurScope"),ce=ee.get("disabled"),ve=re==="ancestor"?u.getAncestorsIndices():re==="descendant"?u.getDescendantIndices():re;if(R)isHighDownDispatcher(Y)&&setAsHighDownDispatcher(Y,!1),te&&(setAsHighDownDispatcher(te,!ce),g.setItemGraphicEl(u.dataIndex,te),enableHoverFocus(te,ve,ne));else{var be=le("content",Rect$1,f,Z2_CONTENT);be&&pe(Y,be),te.disableMorphing=!0,te&&isHighDownDispatcher(te)&&setAsHighDownDispatcher(te,!1),setAsHighDownDispatcher(Y,!ce),g.setItemGraphicEl(u.dataIndex,Y);var me=v.getShallow("cursor");me&&be.attr("cursor",me),enableHoverFocus(Y,ve,ne)}return Y;function ae(we,Se,xe){var ke=getECData(Se);if(ke.dataIndex=u.dataIndex,ke.seriesIndex=o.seriesIndex,Se.setShape({x:0,y:0,width:b,height:w,r:q}),S)ie(Se);else{Se.invisible=!1;var Ie=u.getVisual("style"),He=Ie.stroke,Le=getItemStyleNormal(j);Le.fill=He;var De=getStateItemStyle(D);De.fill=D.get("borderColor");var Ee=getStateItemStyle(O);Ee.fill=O.get("borderColor");var oe=getStateItemStyle(H);if(oe.fill=H.get("borderColor"),xe){var he=b-2*x;se(Se,He,Ie.opacity,{x,y:0,width:he,height:A})}else Se.removeTextContent();Se.setStyle(Le),Se.ensureState("emphasis").style=De,Se.ensureState("blur").style=Ee,Se.ensureState("select").style=oe,setDefaultStateProxy(Se)}we.add(Se)}function pe(we,Se){var xe=getECData(Se);xe.dataIndex=u.dataIndex,xe.seriesIndex=o.seriesIndex;var ke=Math.max(b-2*x,0),Ie=Math.max(w-2*x,0);if(Se.culling=!0,Se.setShape({x,y:x,width:ke,height:Ie,r:q}),S)ie(Se);else{Se.invisible=!1;var He=u.getVisual("style"),Le=He.fill,De=getItemStyleNormal(j);De.fill=Le,De.decal=He.decal;var Ee=getStateItemStyle(D),oe=getStateItemStyle(O),he=getStateItemStyle(H);se(Se,Le,He.opacity,null),Se.setStyle(De),Se.ensureState("emphasis").style=Ee,Se.ensureState("blur").style=oe,Se.ensureState("select").style=he,setDefaultStateProxy(Se)}we.add(Se)}function ie(we){!we.invisible&&c.push(we)}function se(we,Se,xe,ke){var Ie=v.getModel(ke?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),He=convertOptionIdName(v.get("name"),null),Le=Ie.getShallow("show");setLabelStyle(we,getLabelStatesModels(v,ke?PATH_UPPERLABEL_NORMAL:PATH_LABEL_NOAMAL),{defaultText:Le?He:null,inheritColor:Se,defaultOpacity:xe,labelFetcher:o,labelDataIndex:u.dataIndex});var De=we.getTextContent();if(De){var Ee=De.style,oe=normalizeCssArray$1(Ee.padding||0);ke&&(we.setTextConfig({layoutRect:ke}),De.disableLabelLayout=!0),De.beforeUpdate=function(){var Me=Math.max((ke?ke.width:we.shape.width)-oe[1]-oe[3],0),fe=Math.max((ke?ke.height:we.shape.height)-oe[0]-oe[2],0);(Ee.width!==Me||Ee.height!==fe)&&De.setStyle({width:Me,height:fe})},Ee.truncateMinChar=2,Ee.lineOverflow="truncate",de(Ee,ke,p);var he=De.getState("emphasis");de(he?he.style:null,ke,p)}}function de(we,Se,xe){var ke=we?we.text:null;if(!Se&&xe.isLeafRoot&&ke!=null){var Ie=o.get("drillDownIcon",!0);we.text=Ie?Ie+" "+ke:ke}}function le(we,Se,xe,ke){var Ie=T!=null&&n[we][T],He=l[we];return Ie?(n[we][T]=null,ge(He,Ie)):S||(Ie=new Se,Ie instanceof Displayable&&(Ie.z2=calculateZ2(xe,ke)),Re(He,Ie)),a[we][E]=Ie}function ge(we,Se){var xe=we[E]={};Se instanceof Group$2?(xe.oldX=Se.x,xe.oldY=Se.y):xe.oldShape=extend({},Se.shape)}function Re(we,Se){var xe=we[E]={},ke=u.parentNode,Ie=Se instanceof Group$3;if(ke&&(!s||s.direction==="drillDown")){var He=0,Le=0,De=l.background[ke.getRawIndex()];!s&&De&&De.oldShape&&(He=De.oldShape.width,Le=De.oldShape.height),Ie?(xe.oldX=0,xe.oldY=Le):xe.oldShape={x:He,y:Le,width:0,height:0}}xe.fadein=!Ie}}function calculateZ2(o,a){return o*Z2_BASE+a}var each$c=each$f,isObject=isObject$3,CATEGORY_DEFAULT_VISUAL_INDEX=-1,VisualMapping=function(){function o(a){var n=a.mappingMethod,s=a.type,l=this.option=clone$4(a);this.type=s,this.mappingMethod=n,this._normalizeData=normalizers[n];var c=o.visualHandlers[s];this.applyVisual=c.applyVisual,this.getColorMapper=c.getColorMapper,this._normalizedToVisual=c._normalizedToVisual[n],n==="piecewise"?(normalizeVisualRange(l),preprocessForPiecewise(l)):n==="category"?l.categories?preprocessForSpecifiedCategory(l):normalizeVisualRange(l,!0):(assert(n!=="linear"||l.dataExtent),normalizeVisualRange(l))}return o.prototype.mapValueToVisual=function(a){var n=this._normalizeData(a);return this._normalizedToVisual(n,a)},o.prototype.getNormalizer=function(){return bind$1(this._normalizeData,this)},o.listVisualTypes=function(){return keys$1(o.visualHandlers)},o.isValidType=function(a){return o.visualHandlers.hasOwnProperty(a)},o.eachVisual=function(a,n,s){isObject$3(a)?each$f(a,n,s):n.call(s,a)},o.mapVisual=function(a,n,s){var l,c=isArray$1(a)?[]:isObject$3(a)?{}:(l=!0,null);return o.eachVisual(a,function(u,d){var h=n.call(s,u,d);l?c=h:c[d]=h}),c},o.retrieveVisuals=function(a){var n={},s;return a&&each$c(o.visualHandlers,function(l,c){a.hasOwnProperty(c)&&(n[c]=a[c],s=!0)}),s?n:null},o.prepareVisualTypes=function(a){if(isArray$1(a))a=a.slice();else if(isObject(a)){var n=[];each$c(a,function(s,l){n.push(l)}),a=n}else return[];return a.sort(function(s,l){return l==="color"&&s!=="color"&&s.indexOf("color")===0?1:-1}),a},o.dependsOn=function(a,n){return n==="color"?!!(a&&a.indexOf(n)===0):a===n},o.findPieceIndex=function(a,n,s){for(var l,c=1/0,u=0,d=n.length;u<d;u++){var h=n[u].value;if(h!=null){if(h===a||isString$2(h)&&h===a+"")return u;s&&v(h,u)}}for(var u=0,d=n.length;u<d;u++){var f=n[u],p=f.interval,g=f.close;if(p){if(p[0]===-1/0){if(littleThan(g[1],a,p[1]))return u}else if(p[1]===1/0){if(littleThan(g[0],p[0],a))return u}else if(littleThan(g[0],p[0],a)&&littleThan(g[1],a,p[1]))return u;s&&v(p[0],u),s&&v(p[1],u)}}if(s)return a===1/0?n.length-1:a===-1/0?0:l;function v(b,w){var x=Math.abs(b-a);x<c&&(c=x,l=w)}},o.visualHandlers={color:{applyVisual:makeApplyVisual("color"),getColorMapper:function(){var a=this.option;return bind$1(a.mappingMethod==="category"?function(n,s){return!s&&(n=this._normalizeData(n)),doMapCategory.call(this,n)}:function(n,s,l){var c=!!l;return!s&&(n=this._normalizeData(n)),l=fastLerp(n,a.parsedVisual,l),c?l:stringify(l,"rgba")},this)},_normalizedToVisual:{linear:function(a){return stringify(fastLerp(a,this.option.parsedVisual),"rgba")},category:doMapCategory,piecewise:function(a,n){var s=getSpecifiedVisual.call(this,n);return s==null&&(s=stringify(fastLerp(a,this.option.parsedVisual),"rgba")),s},fixed:doMapFixed}},colorHue:makePartialColorVisualHandler(function(a,n){return modifyHSL(a,n)}),colorSaturation:makePartialColorVisualHandler(function(a,n){return modifyHSL(a,null,n)}),colorLightness:makePartialColorVisualHandler(function(a,n){return modifyHSL(a,null,null,n)}),colorAlpha:makePartialColorVisualHandler(function(a,n){return modifyAlpha(a,n)}),decal:{applyVisual:makeApplyVisual("decal"),_normalizedToVisual:{linear:null,category:doMapCategory,piecewise:null,fixed:null}},opacity:{applyVisual:makeApplyVisual("opacity"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])},liftZ:{applyVisual:makeApplyVisual("liftZ"),_normalizedToVisual:{linear:doMapFixed,category:doMapFixed,piecewise:doMapFixed,fixed:doMapFixed}},symbol:{applyVisual:function(a,n,s){var l=this.mapValueToVisual(a);s("symbol",l)},_normalizedToVisual:{linear:doMapToArray,category:doMapCategory,piecewise:function(a,n){var s=getSpecifiedVisual.call(this,n);return s==null&&(s=doMapToArray.call(this,a)),s},fixed:doMapFixed}},symbolSize:{applyVisual:makeApplyVisual("symbolSize"),_normalizedToVisual:createNormalizedToNumericVisual([0,1])}},o}();function preprocessForPiecewise(o){var a=o.pieceList;o.hasSpecialVisual=!1,each$f(a,function(n,s){n.originIndex=s,n.visual!=null&&(o.hasSpecialVisual=!0)})}function preprocessForSpecifiedCategory(o){var a=o.categories,n=o.categoryMap={},s=o.visual;if(each$c(a,function(u,d){n[u]=d}),!isArray$1(s)){var l=[];isObject$3(s)?each$c(s,function(u,d){var h=n[d];l[h??CATEGORY_DEFAULT_VISUAL_INDEX]=u}):l[CATEGORY_DEFAULT_VISUAL_INDEX]=s,s=setVisualToOption(o,l)}for(var c=a.length-1;c>=0;c--)s[c]==null&&(delete n[a[c]],a.pop())}function normalizeVisualRange(o,a){var n=o.visual,s=[];isObject$3(n)?each$c(n,function(c){s.push(c)}):n!=null&&s.push(n);var l={color:1,symbol:1};!a&&s.length===1&&!l.hasOwnProperty(o.type)&&(s[1]=s[0]),setVisualToOption(o,s)}function makePartialColorVisualHandler(o){return{applyVisual:function(a,n,s){var l=this.mapValueToVisual(a);s("color",o(n("color"),l))},_normalizedToVisual:createNormalizedToNumericVisual([0,1])}}function doMapToArray(o){var a=this.option.visual;return a[Math.round(linearMap$2(o,[0,1],[0,a.length-1],!0))]||{}}function makeApplyVisual(o){return function(a,n,s){s(o,this.mapValueToVisual(a))}}function doMapCategory(o){var a=this.option.visual;return a[this.option.loop&&o!==CATEGORY_DEFAULT_VISUAL_INDEX?o%a.length:o]}function doMapFixed(){return this.option.visual[0]}function createNormalizedToNumericVisual(o){return{linear:function(a){return linearMap$2(a,o,this.option.visual,!0)},category:doMapCategory,piecewise:function(a,n){var s=getSpecifiedVisual.call(this,n);return s==null&&(s=linearMap$2(a,o,this.option.visual,!0)),s},fixed:doMapFixed}}function getSpecifiedVisual(o){var a=this.option,n=a.pieceList;if(a.hasSpecialVisual){var s=VisualMapping.findPieceIndex(o,n),l=n[s];if(l&&l.visual)return l.visual[this.type]}}function setVisualToOption(o,a){return o.visual=a,o.type==="color"&&(o.parsedVisual=map$1(a,function(n){var s=parse(n);return!s&&process.env.NODE_ENV!=="production"&&warn("'"+n+"' is an illegal color, fallback to '#000000'",!0),s||[0,0,0,1]})),a}var normalizers={linear:function(o){return linearMap$2(o,this.option.dataExtent,[0,1],!0)},piecewise:function(o){var a=this.option.pieceList,n=VisualMapping.findPieceIndex(o,a,!0);if(n!=null)return linearMap$2(n,[0,a.length-1],[0,1],!0)},category:function(o){var a=this.option.categories?this.option.categoryMap[o]:o;return a??CATEGORY_DEFAULT_VISUAL_INDEX},fixed:noop$1};function littleThan(o,a,n){return o?a<=n:a<n}var ITEM_STYLE_NORMAL="itemStyle",inner$c=makeInner();const treemapVisual={seriesType:"treemap",reset:function(o){var a=o.getData().tree,n=a.root;n.isRemoved()||travelTree(n,{},o.getViewRoot().getAncestors(),o)}};function travelTree(o,a,n,s){var l=o.getModel(),c=o.getLayout(),u=o.hostTree.data;if(!(!c||c.invisible||!c.isInView)){var d=l.getModel(ITEM_STYLE_NORMAL),h=buildVisuals(d,a,s),f=u.ensureUniqueItemVisual(o.dataIndex,"style"),p=d.get("borderColor"),g=d.get("borderColorSaturation"),v;g!=null&&(v=calculateColor(h),p=calculateBorderColor(g,v)),f.stroke=p;var b=o.viewChildren;if(!b||!b.length)v=calculateColor(h),f.fill=v;else{var w=buildVisualMapping(o,l,c,d,h,b);each$f(b,function(x,S){if(x.depth>=n.length||x===n[x.depth]){var E=mapVisual$1(l,h,x,S,w,s);travelTree(x,E,n,s)}})}}}function buildVisuals(o,a,n){var s=extend({},a),l=n.designatedVisualItemStyle;return each$f(["color","colorAlpha","colorSaturation"],function(c){l[c]=a[c];var u=o.get(c);l[c]=null,u!=null&&(s[c]=u)}),s}function calculateColor(o){var a=getValueVisualDefine(o,"color");if(a){var n=getValueVisualDefine(o,"colorAlpha"),s=getValueVisualDefine(o,"colorSaturation");return s&&(a=modifyHSL(a,null,null,s)),n&&(a=modifyAlpha(a,n)),a}}function calculateBorderColor(o,a){return a!=null?modifyHSL(a,null,null,o):null}function getValueVisualDefine(o,a){var n=o[a];if(n!=null&&n!=="none")return n}function buildVisualMapping(o,a,n,s,l,c){if(!(!c||!c.length)){var u=getRangeVisual(a,"color")||l.color!=null&&l.color!=="none"&&(getRangeVisual(a,"colorAlpha")||getRangeVisual(a,"colorSaturation"));if(u){var d=a.get("visualMin"),h=a.get("visualMax"),f=n.dataExtent.slice();d!=null&&d<f[0]&&(f[0]=d),h!=null&&h>f[1]&&(f[1]=h);var p=a.get("colorMappingBy"),g={type:u.name,dataExtent:f,visual:u.range};g.type==="color"&&(p==="index"||p==="id")?(g.mappingMethod="category",g.loop=!0):g.mappingMethod="linear";var v=new VisualMapping(g);return inner$c(v).drColorMappingBy=p,v}}}function getRangeVisual(o,a){var n=o.get(a);return isArray$1(n)&&n.length?{name:a,range:n}:null}function mapVisual$1(o,a,n,s,l,c){var u=extend({},a);if(l){var d=l.type,h=d==="color"&&inner$c(l).drColorMappingBy,f=h==="index"?s:h==="id"?c.mapIdToIndex(n.getId()):n.getValue(o.get("visualDimension"));u[d]=l.mapValueToVisual(f)}return u}var mathMax$3=Math.max,mathMin$3=Math.min,retrieveValue=retrieve,each$b=each$f,PATH_BORDER_WIDTH=["itemStyle","borderWidth"],PATH_GAP_WIDTH=["itemStyle","gapWidth"],PATH_UPPER_LABEL_SHOW=["upperLabel","show"],PATH_UPPER_LABEL_HEIGHT=["upperLabel","height"];const treemapLayout={seriesType:"treemap",reset:function(o,a,n,s){var l=n.getWidth(),c=n.getHeight(),u=o.option,d=getLayoutRect(o.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),h=u.size||[],f=parsePercent(retrieveValue(d.width,h[0]),l),p=parsePercent(retrieveValue(d.height,h[1]),c),g=s&&s.type,v=["treemapZoomToNode","treemapRootToNode"],b=retrieveTargetInfo(s,v,o),w=g==="treemapRender"||g==="treemapMove"?s.rootRect:null,x=o.getViewRoot(),S=getPathToRoot(x);if(g!=="treemapMove"){var E=g==="treemapZoomToNode"?estimateRootSize(o,b,x,f,p):w?[w.width,w.height]:[f,p],T=u.sort;T&&T!=="asc"&&T!=="desc"&&(T="desc");var C={squareRatio:u.squareRatio,sort:T,leafDepth:u.leafDepth};x.hostTree.clearLayouts();var A={x:0,y:0,width:E[0],height:E[1],area:E[0]*E[1]};x.setLayout(A),squarify(x,C,!1,0),A=x.getLayout(),each$b(S,function(j,D){var O=(S[D+1]||x).getValue();j.setLayout(extend({dataExtent:[O,O],borderWidth:0,upperHeight:0},A))})}var R=o.getData().tree.root;R.setLayout(calculateRootPosition(d,w,b),!0),o.setLayoutInfo(d),prunning(R,new BoundingRect(-d.x,-d.y,l,c),S,x,0)}};function squarify(o,a,n,s){var l,c;if(!o.isRemoved()){var u=o.getLayout();l=u.width,c=u.height;var d=o.getModel(),h=d.get(PATH_BORDER_WIDTH),f=d.get(PATH_GAP_WIDTH)/2,p=getUpperLabelHeight(d),g=Math.max(h,p),v=h-f,b=g-f;o.setLayout({borderWidth:h,upperHeight:g,upperLabelHeight:p},!0),l=mathMax$3(l-2*v,0),c=mathMax$3(c-v-b,0);var w=l*c,x=initChildren$1(o,d,w,a,n,s);if(x.length){var S={x:v,y:b,width:l,height:c},E=mathMin$3(l,c),T=1/0,C=[];C.area=0;for(var A=0,R=x.length;A<R;){var j=x[A];C.push(j),C.area+=j.getLayout().area;var D=worst(C,E,a.squareRatio);D<=T?(A++,T=D):(C.area-=C.pop().getLayout().area,position(C,E,S,f,!1),E=mathMin$3(S.width,S.height),C.length=C.area=0,T=1/0)}if(C.length&&position(C,E,S,f,!0),!n){var O=d.get("childrenVisibleMin");O!=null&&w<O&&(n=!0)}for(var A=0,R=x.length;A<R;A++)squarify(x[A],a,n,s+1)}}}function initChildren$1(o,a,n,s,l,c){var u=o.children||[],d=s.sort;d!=="asc"&&d!=="desc"&&(d=null);var h=s.leafDepth!=null&&s.leafDepth<=c;if(l&&!h)return o.viewChildren=[];u=filter(u,function(b){return!b.isRemoved()}),sort$1(u,d);var f=statistic(a,u,d);if(f.sum===0)return o.viewChildren=[];if(f.sum=filterByThreshold(a,n,f.sum,d,u),f.sum===0)return o.viewChildren=[];for(var p=0,g=u.length;p<g;p++){var v=u[p].getValue()/f.sum*n;u[p].setLayout({area:v})}return h&&(u.length&&o.setLayout({isLeafRoot:!0},!0),u.length=0),o.viewChildren=u,o.setLayout({dataExtent:f.dataExtent},!0),u}function filterByThreshold(o,a,n,s,l){if(!s)return n;for(var c=o.get("visibleMin"),u=l.length,d=u,h=u-1;h>=0;h--){var f=l[s==="asc"?u-h-1:h].getValue();f/n*a<c&&(d=h,n-=f)}return s==="asc"?l.splice(0,u-d):l.splice(d,u-d),n}function sort$1(o,a){return a&&o.sort(function(n,s){var l=a==="asc"?n.getValue()-s.getValue():s.getValue()-n.getValue();return l===0?a==="asc"?n.dataIndex-s.dataIndex:s.dataIndex-n.dataIndex:l}),o}function statistic(o,a,n){for(var s=0,l=0,c=a.length;l<c;l++)s+=a[l].getValue();var u=o.get("visualDimension"),d;return!a||!a.length?d=[NaN,NaN]:u==="value"&&n?(d=[a[a.length-1].getValue(),a[0].getValue()],n==="asc"&&d.reverse()):(d=[1/0,-1/0],each$b(a,function(h){var f=h.getValue(u);f<d[0]&&(d[0]=f),f>d[1]&&(d[1]=f)})),{sum:s,dataExtent:d}}function worst(o,a,n){for(var s=0,l=1/0,c=0,u=void 0,d=o.length;c<d;c++)u=o[c].getLayout().area,u&&(u<l&&(l=u),u>s&&(s=u));var h=o.area*o.area,f=a*a*n;return h?mathMax$3(f*s/h,h/(f*l)):1/0}function position(o,a,n,s,l){var c=a===n.width?0:1,u=1-c,d=["x","y"],h=["width","height"],f=n[d[c]],p=a?o.area/a:0;(l||p>n[h[u]])&&(p=n[h[u]]);for(var g=0,v=o.length;g<v;g++){var b=o[g],w={},x=p?b.getLayout().area/p:0,S=w[h[u]]=mathMax$3(p-2*s,0),E=n[d[c]]+n[h[c]]-f,T=g===v-1||E<x?E:x,C=w[h[c]]=mathMax$3(T-2*s,0);w[d[u]]=n[d[u]]+mathMin$3(s,S/2),w[d[c]]=f+mathMin$3(s,C/2),f+=T,b.setLayout(w,!0)}n[d[u]]+=p,n[h[u]]-=p}function estimateRootSize(o,a,n,s,l){var c=(a||{}).node,u=[s,l];if(!c||c===n)return u;for(var d,h=s*l,f=h*o.option.zoomToNodeRatio;d=c.parentNode;){for(var p=0,g=d.children,v=0,b=g.length;v<b;v++)p+=g[v].getValue();var w=c.getValue();if(w===0)return u;f*=p/w;var x=d.getModel(),S=x.get(PATH_BORDER_WIDTH),E=Math.max(S,getUpperLabelHeight(x));f+=4*S*S+(3*S+E)*Math.pow(f,.5),f>MAX_SAFE_INTEGER&&(f=MAX_SAFE_INTEGER),c=d}f<h&&(f=h);var T=Math.pow(f/h,.5);return[s*T,l*T]}function calculateRootPosition(o,a,n){if(a)return{x:a.x,y:a.y};var s={x:0,y:0};if(!n)return s;var l=n.node,c=l.getLayout();if(!c)return s;for(var u=[c.width/2,c.height/2],d=l;d;){var h=d.getLayout();u[0]+=h.x,u[1]+=h.y,d=d.parentNode}return{x:o.width/2-u[0],y:o.height/2-u[1]}}function prunning(o,a,n,s,l){var c=o.getLayout(),u=n[l],d=u&&u===o;if(!(u&&!d||l===n.length&&o!==s)){o.setLayout({isInView:!0,invisible:!d&&!a.intersect(c),isAboveViewRoot:d},!0);var h=new BoundingRect(a.x-c.x,a.y-c.y,a.width,a.height);each$b(o.viewChildren||[],function(f){prunning(f,h,n,s,l+1)})}}function getUpperLabelHeight(o){return o.get(PATH_UPPER_LABEL_SHOW)?o.get(PATH_UPPER_LABEL_HEIGHT):0}function install$G(o){o.registerSeriesModel(TreemapSeriesModel),o.registerChartView(TreemapView),o.registerVisual(treemapVisual),o.registerLayout(treemapLayout),installTreemapAction(o)}function categoryFilter(o){var a=o.findComponents({mainType:"legend"});!a||!a.length||o.eachSeriesByType("graph",function(n){var s=n.getCategoriesData(),l=n.getGraph(),c=l.data,u=s.mapArray(s.getName);c.filterSelf(function(d){var h=c.getItemModel(d),f=h.getShallow("category");if(f!=null){isNumber(f)&&(f=u[f]);for(var p=0;p<a.length;p++)if(!a[p].isSelected(f))return!1}return!0})})}function categoryVisual(o){var a={};o.eachSeriesByType("graph",function(n){var s=n.getCategoriesData(),l=n.getData(),c={};s.each(function(u){var d=s.getName(u);c["ec-"+d]=u;var h=s.getItemModel(u),f=h.getModel("itemStyle").getItemStyle();f.fill||(f.fill=n.getColorFromPalette(d,a)),s.setItemVisual(u,"style",f);for(var p=["symbol","symbolSize","symbolKeepAspect"],g=0;g<p.length;g++){var v=h.getShallow(p[g],!0);v!=null&&s.setItemVisual(u,p[g],v)}}),s.count()&&l.each(function(u){var d=l.getItemModel(u),h=d.getShallow("category");if(h!=null){isString$2(h)&&(h=c["ec-"+h]);var f=s.getItemVisual(h,"style"),p=l.ensureUniqueItemVisual(u,"style");extend(p,f);for(var g=["symbol","symbolSize","symbolKeepAspect"],v=0;v<g.length;v++)l.setItemVisual(u,g[v],s.getItemVisual(h,g[v]))}})})}function normalize$1(o){return o instanceof Array||(o=[o,o]),o}function graphEdgeVisual(o){o.eachSeriesByType("graph",function(a){var n=a.getGraph(),s=a.getEdgeData(),l=normalize$1(a.get("edgeSymbol")),c=normalize$1(a.get("edgeSymbolSize"));s.setVisual("fromSymbol",l&&l[0]),s.setVisual("toSymbol",l&&l[1]),s.setVisual("fromSymbolSize",c&&c[0]),s.setVisual("toSymbolSize",c&&c[1]),s.setVisual("style",a.getModel("lineStyle").getLineStyle()),s.each(function(u){var d=s.getItemModel(u),h=n.getEdgeByIndex(u),f=normalize$1(d.getShallow("symbol",!0)),p=normalize$1(d.getShallow("symbolSize",!0)),g=d.getModel("lineStyle").getLineStyle(),v=s.ensureUniqueItemVisual(u,"style");switch(extend(v,g),v.stroke){case"source":{var b=h.node1.getVisual("style");v.stroke=b&&b.fill;break}case"target":{var b=h.node2.getVisual("style");v.stroke=b&&b.fill;break}}f[0]&&h.setVisual("fromSymbol",f[0]),f[1]&&h.setVisual("toSymbol",f[1]),p[0]&&h.setVisual("fromSymbolSize",p[0]),p[1]&&h.setVisual("toSymbolSize",p[1])})})}var KEY_DELIMITER="-->",getAutoCurvenessParams=function(o){return o.get("autoCurveness")||null},createCurveness=function(o,a){var n=getAutoCurvenessParams(o),s=20,l=[];if(isNumber(n))s=n;else if(isArray$1(n)){o.__curvenessList=n;return}a>s&&(s=a);var c=s%2?s+2:s+3;l=[];for(var u=0;u<c;u++)l.push((u%2?u+1:u)/10*(u%2?-1:1));o.__curvenessList=l},getKeyOfEdges=function(o,a,n){var s=[o.id,o.dataIndex].join("."),l=[a.id,a.dataIndex].join(".");return[n.uid,s,l].join(KEY_DELIMITER)},getOppositeKey=function(o){var a=o.split(KEY_DELIMITER);return[a[0],a[2],a[1]].join(KEY_DELIMITER)},getEdgeFromMap=function(o,a){var n=getKeyOfEdges(o.node1,o.node2,a);return a.__edgeMap[n]},getTotalLengthBetweenNodes=function(o,a){var n=getEdgeMapLengthWithKey(getKeyOfEdges(o.node1,o.node2,a),a),s=getEdgeMapLengthWithKey(getKeyOfEdges(o.node2,o.node1,a),a);return n+s},getEdgeMapLengthWithKey=function(o,a){var n=a.__edgeMap;return n[o]?n[o].length:0};function initCurvenessList(o){getAutoCurvenessParams(o)&&(o.__curvenessList=[],o.__edgeMap={},createCurveness(o))}function createEdgeMapForCurveness(o,a,n,s){if(getAutoCurvenessParams(n)){var l=getKeyOfEdges(o,a,n),c=n.__edgeMap,u=c[getOppositeKey(l)];c[l]&&!u?c[l].isForward=!0:u&&c[l]&&(u.isForward=!0,c[l].isForward=!1),c[l]=c[l]||[],c[l].push(s)}}function getCurvenessForEdge(o,a,n,s){var l=getAutoCurvenessParams(a),c=isArray$1(l);if(!l)return null;var u=getEdgeFromMap(o,a);if(!u)return null;for(var d=-1,h=0;h<u.length;h++)if(u[h]===n){d=h;break}var f=getTotalLengthBetweenNodes(o,a);createCurveness(a,f),o.lineStyle=o.lineStyle||{};var p=getKeyOfEdges(o.node1,o.node2,a),g=a.__curvenessList,v=c||f%2?0:1;if(u.isForward)return g[v+d];var b=getOppositeKey(p),w=getEdgeMapLengthWithKey(b,a),x=g[d+w+v];return s?c?l&&l[0]===0?(w+v)%2?x:-x:((w%2?0:1)+v)%2?x:-x:(w+v)%2?x:-x:g[d+w+v]}function simpleLayout(o){var a=o.coordinateSystem;if(!(a&&a.type!=="view")){var n=o.getGraph();n.eachNode(function(s){var l=s.getModel();s.setLayout([+l.get("x"),+l.get("y")])}),simpleLayoutEdge(n,o)}}function simpleLayoutEdge(o,a){o.eachEdge(function(n,s){var l=retrieve3(n.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(n,a,s,!0),0),c=clone$3(n.node1.getLayout()),u=clone$3(n.node2.getLayout()),d=[c,u];+l&&d.push([(c[0]+u[0])/2-(c[1]-u[1])*l,(c[1]+u[1])/2-(u[0]-c[0])*l]),n.setLayout(d)})}function graphSimpleLayout(o,a){o.eachSeriesByType("graph",function(n){var s=n.get("layout"),l=n.coordinateSystem;if(l&&l.type!=="view"){var c=n.getData(),u=[];each$f(l.dimensions,function(v){u=u.concat(c.mapDimensionsAll(v))});for(var d=0;d<c.count();d++){for(var h=[],f=!1,p=0;p<u.length;p++){var g=c.get(u[p],d);isNaN(g)||(f=!0),h.push(g)}f?c.setItemLayout(d,l.dataToPoint(h)):c.setItemLayout(d,[NaN,NaN])}simpleLayoutEdge(c.graph,n)}else(!s||s==="none")&&simpleLayout(n)})}function getNodeGlobalScale(o){var a=o.coordinateSystem;if(a.type!=="view")return 1;var n=o.option.nodeScaleRatio,s=a.scaleX,l=a.getZoom(),c=(l-1)*n+1;return c/s}function getSymbolSize(o){var a=o.getVisual("symbolSize");return a instanceof Array&&(a=(a[0]+a[1])/2),+a}var PI$2=Math.PI,_symbolRadiansHalf=[];function circularLayout(o,a,n,s){var l=o.coordinateSystem;if(!(l&&l.type!=="view")){var c=l.getBoundingRect(),u=o.getData(),d=u.graph,h=c.width/2+c.x,f=c.height/2+c.y,p=Math.min(c.width,c.height)/2,g=u.count();if(u.setLayout({cx:h,cy:f}),!!g){if(n){var v=l.pointToData(s),b=v[0],w=v[1],x=[b-h,w-f];normalize$3(x,x),scale$2(x,x,p),n.setLayout([h+x[0],f+x[1]],!0);var S=o.get(["circular","rotateLabel"]);rotateNodeLabel(n,S,h,f)}_layoutNodesBasedOn[a](o,d,u,p,h,f,g),d.eachEdge(function(E,T){var C=retrieve3(E.getModel().get(["lineStyle","curveness"]),getCurvenessForEdge(E,o,T),0),A=clone$3(E.node1.getLayout()),R=clone$3(E.node2.getLayout()),j,D=(A[0]+R[0])/2,O=(A[1]+R[1])/2;+C&&(C*=3,j=[h*C+D*(1-C),f*C+O*(1-C)]),E.setLayout([A,R,j])})}}}var _layoutNodesBasedOn={value:function(o,a,n,s,l,c,u){var d=0,h=n.getSum("value"),f=Math.PI*2/(h||u);a.eachNode(function(p){var g=p.getValue("value"),v=f*(h?g:1)/2;d+=v,p.setLayout([s*Math.cos(d)+l,s*Math.sin(d)+c]),d+=v})},symbolSize:function(o,a,n,s,l,c,u){var d=0;_symbolRadiansHalf.length=u;var h=getNodeGlobalScale(o);a.eachNode(function(g){var v=getSymbolSize(g);isNaN(v)&&(v=2),v<0&&(v=0),v*=h;var b=Math.asin(v/2/s);isNaN(b)&&(b=PI$2/2),_symbolRadiansHalf[g.dataIndex]=b,d+=b*2});var f=(2*PI$2-d)/u/2,p=0;a.eachNode(function(g){var v=f+_symbolRadiansHalf[g.dataIndex];p+=v,(!g.getLayout()||!g.getLayout().fixed)&&g.setLayout([s*Math.cos(p)+l,s*Math.sin(p)+c]),p+=v})}};function rotateNodeLabel(o,a,n,s){var l=o.getGraphicEl();if(l){var c=o.getModel(),u=c.get(["label","rotate"])||0,d=l.getSymbolPath();if(a){var h=o.getLayout(),f=Math.atan2(h[1]-s,h[0]-n);f<0&&(f=Math.PI*2+f);var p=h[0]<n;p&&(f=f-Math.PI);var g=p?"left":"right";d.setTextConfig({rotation:-f,position:g,origin:"center"});var v=d.ensureState("emphasis");extend(v.textConfig||(v.textConfig={}),{position:g})}else d.setTextConfig({rotation:u*=Math.PI/180})}}function graphCircularLayout(o){o.eachSeriesByType("graph",function(a){a.get("layout")==="circular"&&circularLayout(a,"symbolSize")})}var scaleAndAdd=scaleAndAdd$1;function forceLayout(o,a,n){for(var s=o,l=a,c=n.rect,u=c.width,d=c.height,h=[c.x+u/2,c.y+d/2],f=n.gravity==null?.1:n.gravity,p=0;p<s.length;p++){var g=s[p];g.p||(g.p=create$2(u*(Math.random()-.5)+h[0],d*(Math.random()-.5)+h[1])),g.pp=clone$3(g.p),g.edges=null}var v=n.friction==null?.6:n.friction,b=v,w,x;return{warmUp:function(){b=v*.8},setFixed:function(S){s[S].fixed=!0},setUnfixed:function(S){s[S].fixed=!1},beforeStep:function(S){w=S},afterStep:function(S){x=S},step:function(S){w&&w(s,l);for(var E=[],T=s.length,C=0;C<l.length;C++){var A=l[C];if(!A.ignoreForceLayout){var R=A.n1,j=A.n2;sub(E,j.p,R.p);var D=len(E)-A.d,O=j.w/(R.w+j.w);isNaN(O)&&(O=0),normalize$3(E,E),!R.fixed&&scaleAndAdd(R.p,R.p,E,O*D*b),!j.fixed&&scaleAndAdd(j.p,j.p,E,-(1-O)*D*b)}}for(var C=0;C<T;C++){var H=s[C];H.fixed||(sub(E,h,H.p),scaleAndAdd(H.p,H.p,E,f*b))}for(var C=0;C<T;C++)for(var R=s[C],q=C+1;q<T;q++){var j=s[q];sub(E,j.p,R.p);var D=len(E);D===0&&(set$1(E,Math.random()-.5,Math.random()-.5),D=1);var Y=(R.rep+j.rep)/D/D;!R.fixed&&scaleAndAdd(R.pp,R.pp,E,Y),!j.fixed&&scaleAndAdd(j.pp,j.pp,E,-Y)}for(var te=[],C=0;C<T;C++){var H=s[C];H.fixed||(sub(te,H.p,H.pp),scaleAndAdd(H.p,H.p,te,b),copy$2(H.pp,H.p))}b=b*.992;var ee=b<.01;x&&x(s,l,ee),S&&S(ee)}}}function graphForceLayout(o){o.eachSeriesByType("graph",function(a){var n=a.coordinateSystem;if(!(n&&n.type!=="view"))if(a.get("layout")==="force"){var s=a.preservedPoints||{},l=a.getGraph(),c=l.data,u=l.edgeData,d=a.getModel("force"),h=d.get("initLayout");a.preservedPoints?c.each(function(C){var A=c.getId(C);c.setItemLayout(C,s[A]||[NaN,NaN])}):!h||h==="none"?simpleLayout(a):h==="circular"&&circularLayout(a,"value");var f=c.getDataExtent("value"),p=u.getDataExtent("value"),g=d.get("repulsion"),v=d.get("edgeLength"),b=isArray$1(g)?g:[g,g],w=isArray$1(v)?v:[v,v];w=[w[1],w[0]];var x=c.mapArray("value",function(C,A){var R=c.getItemLayout(A),j=linearMap$2(C,f,b);return isNaN(j)&&(j=(b[0]+b[1])/2),{w:j,rep:j,fixed:c.getItemModel(A).get("fixed"),p:!R||isNaN(R[0])||isNaN(R[1])?null:R}}),S=u.mapArray("value",function(C,A){var R=l.getEdgeByIndex(A),j=linearMap$2(C,p,w);isNaN(j)&&(j=(w[0]+w[1])/2);var D=R.getModel(),O=retrieve3(R.getModel().get(["lineStyle","curveness"]),-getCurvenessForEdge(R,a,A,!0),0);return{n1:x[R.node1.dataIndex],n2:x[R.node2.dataIndex],d:j,curveness:O,ignoreForceLayout:D.get("ignoreForceLayout")}}),E=n.getBoundingRect(),T=forceLayout(x,S,{rect:E,gravity:d.get("gravity"),friction:d.get("friction")});T.beforeStep(function(C,A){for(var R=0,j=C.length;R<j;R++)C[R].fixed&&copy$2(C[R].p,l.getNodeByIndex(R).getLayout())}),T.afterStep(function(C,A,R){for(var j=0,D=C.length;j<D;j++)C[j].fixed||l.getNodeByIndex(j).setLayout(C[j].p),s[c.getId(j)]=C[j].p;for(var j=0,D=A.length;j<D;j++){var O=A[j],H=l.getEdgeByIndex(j),q=O.n1.p,Y=O.n2.p,te=H.getLayout();te=te?te.slice():[],te[0]=te[0]||[],te[1]=te[1]||[],copy$2(te[0],q),copy$2(te[1],Y),+O.curveness&&(te[2]=[(q[0]+Y[0])/2-(q[1]-Y[1])*O.curveness,(q[1]+Y[1])/2-(Y[0]-q[0])*O.curveness]),H.setLayout(te)}}),a.forceLayout=T,a.preservedPoints=s,T.step()}else a.forceLayout=null})}function getViewRect$3(o,a,n){var s=extend(o.getBoxLayoutParams(),{aspect:n});return getLayoutRect(s,{width:a.getWidth(),height:a.getHeight()})}function createViewCoordSys(o,a){var n=[];return o.eachSeriesByType("graph",function(s){var l=s.get("coordinateSystem");if(!l||l==="view"){var c=s.getData(),u=c.mapArray(function(S){var E=c.getItemModel(S);return[+E.get("x"),+E.get("y")]}),d=[],h=[];fromPoints(u,d,h),h[0]-d[0]===0&&(h[0]+=1,d[0]-=1),h[1]-d[1]===0&&(h[1]+=1,d[1]-=1);var f=(h[0]-d[0])/(h[1]-d[1]),p=getViewRect$3(s,a,f);isNaN(f)&&(d=[p.x,p.y],h=[p.x+p.width,p.y+p.height]);var g=h[0]-d[0],v=h[1]-d[1],b=p.width,w=p.height,x=s.coordinateSystem=new View;x.zoomLimit=s.get("scaleLimit"),x.setBoundingRect(d[0],d[1],g,v),x.setViewRect(p.x,p.y,b,w),x.setCenter(s.get("center"),a),x.setZoom(s.get("zoom")),n.push(x)}}),n}var straightLineProto=Line$1.prototype,bezierCurveProto=BezierCurve.prototype,StraightLineShape=function(){function o(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return o}();(function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a})(StraightLineShape);function isStraightLine(o){return isNaN(+o.cpx1)||isNaN(+o.cpy1)}var ECLinePath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="ec-line",s}return a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new StraightLineShape},a.prototype.buildPath=function(n,s){isStraightLine(s)?straightLineProto.buildPath.call(this,n,s):bezierCurveProto.buildPath.call(this,n,s)},a.prototype.pointAt=function(n){return isStraightLine(this.shape)?straightLineProto.pointAt.call(this,n):bezierCurveProto.pointAt.call(this,n)},a.prototype.tangentAt=function(n){var s=this.shape,l=isStraightLine(s)?[s.x2-s.x1,s.y2-s.y1]:bezierCurveProto.tangentAt.call(this,n);return normalize$3(l,l)},a}(Path),SYMBOL_CATEGORIES=["fromSymbol","toSymbol"];function makeSymbolTypeKey(o){return"_"+o+"Type"}function makeSymbolTypeValue(o,a,n){var s=a.getItemVisual(n,o);if(!s||s==="none")return s;var l=a.getItemVisual(n,o+"Size"),c=a.getItemVisual(n,o+"Rotate"),u=a.getItemVisual(n,o+"Offset"),d=a.getItemVisual(n,o+"KeepAspect"),h=normalizeSymbolSize(l),f=normalizeSymbolOffset(u||0,h);return s+h+f+(c||"")+(d||"")}function createSymbol(o,a,n){var s=a.getItemVisual(n,o);if(!(!s||s==="none")){var l=a.getItemVisual(n,o+"Size"),c=a.getItemVisual(n,o+"Rotate"),u=a.getItemVisual(n,o+"Offset"),d=a.getItemVisual(n,o+"KeepAspect"),h=normalizeSymbolSize(l),f=normalizeSymbolOffset(u||0,h),p=createSymbol$1(s,-h[0]/2+f[0],-h[1]/2+f[1],h[0],h[1],null,d);return p.__specifiedRotation=c==null||isNaN(c)?void 0:+c*Math.PI/180||0,p.name=o,p}}function createLine(o){var a=new ECLinePath({name:"line",subPixelOptimize:!0});return setLinePoints(a.shape,o),a}function setLinePoints(o,a){o.x1=a[0][0],o.y1=a[0][1],o.x2=a[1][0],o.y2=a[1][1],o.percent=1;var n=a[2];n?(o.cpx1=n[0],o.cpy1=n[1]):(o.cpx1=NaN,o.cpy1=NaN)}var Line=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this)||this;return c._createLine(n,s,l),c}return a.prototype._createLine=function(n,s,l){var c=n.hostModel,u=n.getItemLayout(s),d=createLine(u);d.shape.percent=0,initProps(d,{shape:{percent:1}},c,s),this.add(d),each$f(SYMBOL_CATEGORIES,function(h){var f=createSymbol(h,n,s);this.add(f),this[makeSymbolTypeKey(h)]=makeSymbolTypeValue(h,n,s)},this),this._updateCommonStl(n,s,l)},a.prototype.updateData=function(n,s,l){var c=n.hostModel,u=this.childOfName("line"),d=n.getItemLayout(s),h={shape:{}};setLinePoints(h.shape,d),updateProps$1(u,h,c,s),each$f(SYMBOL_CATEGORIES,function(f){var p=makeSymbolTypeValue(f,n,s),g=makeSymbolTypeKey(f);if(this[g]!==p){this.remove(this.childOfName(f));var v=createSymbol(f,n,s);this.add(v)}this[g]=p},this),this._updateCommonStl(n,s,l)},a.prototype.getLinePath=function(){return this.childAt(0)},a.prototype._updateCommonStl=function(n,s,l){var c=n.hostModel,u=this.childOfName("line"),d=l&&l.emphasisLineStyle,h=l&&l.blurLineStyle,f=l&&l.selectLineStyle,p=l&&l.labelStatesModels,g=l&&l.emphasisDisabled,v=l&&l.focus,b=l&&l.blurScope;if(!l||n.hasItemOption){var w=n.getItemModel(s),x=w.getModel("emphasis");d=x.getModel("lineStyle").getLineStyle(),h=w.getModel(["blur","lineStyle"]).getLineStyle(),f=w.getModel(["select","lineStyle"]).getLineStyle(),g=x.get("disabled"),v=x.get("focus"),b=x.get("blurScope"),p=getLabelStatesModels(w)}var S=n.getItemVisual(s,"style"),E=S.stroke;u.useStyle(S),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=d,u.ensureState("blur").style=h,u.ensureState("select").style=f,each$f(SYMBOL_CATEGORIES,function(j){var D=this.childOfName(j);if(D){D.setColor(E),D.style.opacity=S.opacity;for(var O=0;O<SPECIAL_STATES.length;O++){var H=SPECIAL_STATES[O],q=u.getState(H);if(q){var Y=q.style||{},te=D.ensureState(H),ee=te.style||(te.style={});Y.stroke!=null&&(ee[D.__isEmptyBrush?"stroke":"fill"]=Y.stroke),Y.opacity!=null&&(ee.opacity=Y.opacity)}}D.markRedraw()}},this);var T=c.getRawValue(s);setLabelStyle(this,p,{labelDataIndex:s,labelFetcher:{getFormattedLabel:function(j,D){return c.getFormattedLabel(j,D,n.dataType)}},inheritColor:E||"#000",defaultOpacity:S.opacity,defaultText:(T==null?n.getName(s):isFinite(T)?round$3(T):T)+""});var C=this.getTextContent();if(C){var A=p.normal;C.__align=C.style.align,C.__verticalAlign=C.style.verticalAlign,C.__position=A.get("position")||"middle";var R=A.get("distance");isArray$1(R)||(R=[R,R]),C.__labelDistance=R}this.setTextConfig({position:null,local:!0,inside:!1}),toggleHoverEmphasis(this,v,b,g)},a.prototype.highlight=function(){enterEmphasis(this)},a.prototype.downplay=function(){leaveEmphasis(this)},a.prototype.updateLayout=function(n,s){this.setLinePoints(n.getItemLayout(s))},a.prototype.setLinePoints=function(n){var s=this.childOfName("line");setLinePoints(s.shape,n),s.dirty()},a.prototype.beforeUpdate=function(){var n=this,s=n.childOfName("fromSymbol"),l=n.childOfName("toSymbol"),c=n.getTextContent();if(!s&&!l&&(!c||c.ignore))return;for(var u=1,d=this.parent;d;)d.scaleX&&(u/=d.scaleX),d=d.parent;var h=n.childOfName("line");if(!this.__dirty&&!h.__dirty)return;var f=h.shape.percent,p=h.pointAt(0),g=h.pointAt(f),v=sub([],g,p);normalize$3(v,v);function b(q,Y){var te=q.__specifiedRotation;if(te==null){var ee=h.tangentAt(Y);q.attr("rotation",(Y===1?-1:1)*Math.PI/2-Math.atan2(ee[1],ee[0]))}else q.attr("rotation",te)}if(s&&(s.setPosition(p),b(s,0),s.scaleX=s.scaleY=u*f,s.markRedraw()),l&&(l.setPosition(g),b(l,1),l.scaleX=l.scaleY=u*f,l.markRedraw()),c&&!c.ignore){c.x=c.y=0,c.originX=c.originY=0;var w=void 0,x=void 0,S=c.__labelDistance,E=S[0]*u,T=S[1]*u,C=f/2,A=h.tangentAt(C),R=[A[1],-A[0]],j=h.pointAt(C);R[1]>0&&(R[0]=-R[0],R[1]=-R[1]);var D=A[0]<0?-1:1;if(c.__position!=="start"&&c.__position!=="end"){var O=-Math.atan2(A[1],A[0]);g[0]<p[0]&&(O=Math.PI+O),c.rotation=O}var H=void 0;switch(c.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":H=-T,x="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":H=T,x="top";break;default:H=0,x="middle"}switch(c.__position){case"end":c.x=v[0]*E+g[0],c.y=v[1]*T+g[1],w=v[0]>.8?"left":v[0]<-.8?"right":"center",x=v[1]>.8?"top":v[1]<-.8?"bottom":"middle";break;case"start":c.x=-v[0]*E+p[0],c.y=-v[1]*T+p[1],w=v[0]>.8?"right":v[0]<-.8?"left":"center",x=v[1]>.8?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":c.x=E*D+p[0],c.y=p[1]+H,w=A[0]<0?"right":"left",c.originX=-E*D,c.originY=-H;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":c.x=j[0],c.y=j[1]+H,w="center",c.originY=-H;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":c.x=-E*D+g[0],c.y=g[1]+H,w=A[0]>=0?"right":"left",c.originX=E*D,c.originY=-H;break}c.scaleX=c.scaleY=u,c.setStyle({verticalAlign:c.__verticalAlign||x,align:c.__align||w})}},a}(Group$3),LineDraw=function(){function o(a){this.group=new Group$3,this._LineCtor=a||Line}return o.prototype.updateData=function(a){var n=this;this._progressiveEls=null;var s=this,l=s.group,c=s._lineData;s._lineData=a,c||l.removeAll();var u=makeSeriesScope$1(a);a.diff(c).add(function(d){n._doAdd(a,d,u)}).update(function(d,h){n._doUpdate(c,a,h,d,u)}).remove(function(d){l.remove(c.getItemGraphicEl(d))}).execute()},o.prototype.updateLayout=function(){var a=this._lineData;a&&a.eachItemGraphicEl(function(n,s){n.updateLayout(a,s)},this)},o.prototype.incrementalPrepareUpdate=function(a){this._seriesScope=makeSeriesScope$1(a),this._lineData=null,this.group.removeAll()},o.prototype.incrementalUpdate=function(a,n){this._progressiveEls=[];function s(d){!d.isGroup&&!isEffectObject(d)&&(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var l=a.start;l<a.end;l++){var c=n.getItemLayout(l);if(lineNeedsDraw(c)){var u=new this._LineCtor(n,l,this._seriesScope);u.traverse(s),this.group.add(u),n.setItemGraphicEl(l,u),this._progressiveEls.push(u)}}},o.prototype.remove=function(){this.group.removeAll()},o.prototype.eachRendered=function(a){traverseElements(this._progressiveEls||this.group,a)},o.prototype._doAdd=function(a,n,s){var l=a.getItemLayout(n);if(lineNeedsDraw(l)){var c=new this._LineCtor(a,n,s);a.setItemGraphicEl(n,c),this.group.add(c)}},o.prototype._doUpdate=function(a,n,s,l,c){var u=a.getItemGraphicEl(s);if(!lineNeedsDraw(n.getItemLayout(l))){this.group.remove(u);return}u?u.updateData(n,l,c):u=new this._LineCtor(n,l,c),n.setItemGraphicEl(l,u),this.group.add(u)},o}();function isEffectObject(o){return o.animators&&o.animators.length>0}function makeSeriesScope$1(o){var a=o.hostModel,n=a.getModel("emphasis");return{lineStyle:a.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:a.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:a.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:getLabelStatesModels(a)}}function isPointNaN(o){return isNaN(o[0])||isNaN(o[1])}function lineNeedsDraw(o){return o&&!isPointNaN(o[0])&&!isPointNaN(o[1])}var v1=[],v2=[],v3=[],quadraticAt=quadraticAt$1,v2DistSquare=distSquare,mathAbs=Math.abs;function intersectCurveCircle(o,a,n){for(var s=o[0],l=o[1],c=o[2],u=1/0,d,h=n*n,f=.1,p=.1;p<=.9;p+=.1){v1[0]=quadraticAt(s[0],l[0],c[0],p),v1[1]=quadraticAt(s[1],l[1],c[1],p);var g=mathAbs(v2DistSquare(v1,a)-h);g<u&&(u=g,d=p)}for(var v=0;v<32;v++){var b=d+f;v2[0]=quadraticAt(s[0],l[0],c[0],d),v2[1]=quadraticAt(s[1],l[1],c[1],d),v3[0]=quadraticAt(s[0],l[0],c[0],b),v3[1]=quadraticAt(s[1],l[1],c[1],b);var g=v2DistSquare(v2,a)-h;if(mathAbs(g)<.01)break;var w=v2DistSquare(v3,a)-h;f/=2,g<0?w>=0?d=d+f:d=d-f:w>=0?d=d-f:d=d+f}return d}function adjustEdge(o,a){var n=[],s=quadraticSubdivide,l=[[],[],[]],c=[[],[]],u=[];a/=2,o.eachEdge(function(d,h){var f=d.getLayout(),p=d.getVisual("fromSymbol"),g=d.getVisual("toSymbol");f.__original||(f.__original=[clone$3(f[0]),clone$3(f[1])],f[2]&&f.__original.push(clone$3(f[2])));var v=f.__original;if(f[2]!=null){if(copy$2(l[0],v[0]),copy$2(l[1],v[2]),copy$2(l[2],v[1]),p&&p!=="none"){var b=getSymbolSize(d.node1),w=intersectCurveCircle(l,v[0],b*a);s(l[0][0],l[1][0],l[2][0],w,n),l[0][0]=n[3],l[1][0]=n[4],s(l[0][1],l[1][1],l[2][1],w,n),l[0][1]=n[3],l[1][1]=n[4]}if(g&&g!=="none"){var b=getSymbolSize(d.node2),w=intersectCurveCircle(l,v[1],b*a);s(l[0][0],l[1][0],l[2][0],w,n),l[1][0]=n[1],l[2][0]=n[2],s(l[0][1],l[1][1],l[2][1],w,n),l[1][1]=n[1],l[2][1]=n[2]}copy$2(f[0],l[0]),copy$2(f[1],l[2]),copy$2(f[2],l[1])}else{if(copy$2(c[0],v[0]),copy$2(c[1],v[1]),sub(u,c[1],c[0]),normalize$3(u,u),p&&p!=="none"){var b=getSymbolSize(d.node1);scaleAndAdd$1(c[0],c[0],u,b*a)}if(g&&g!=="none"){var b=getSymbolSize(d.node2);scaleAndAdd$1(c[1],c[1],u,-b*a)}copy$2(f[0],c[0]),copy$2(f[1],c[1])}})}function isViewCoordSys(o){return o.type==="view"}var GraphView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s){var l=new SymbolDraw,c=new LineDraw,u=this.group;this._controller=new RoamController(s.getZr()),this._controllerHost={target:u},u.add(l.group),u.add(c.group),this._symbolDraw=l,this._lineDraw=c,this._firstRender=!0},a.prototype.render=function(n,s,l){var c=this,u=n.coordinateSystem;this._model=n;var d=this._symbolDraw,h=this._lineDraw,f=this.group;if(isViewCoordSys(u)){var p={x:u.x,y:u.y,scaleX:u.scaleX,scaleY:u.scaleY};this._firstRender?f.attr(p):updateProps$1(f,p,n)}adjustEdge(n.getGraph(),getNodeGlobalScale(n));var g=n.getData();d.updateData(g);var v=n.getEdgeData();h.updateData(v),this._updateNodeAndLinkScale(),this._updateController(n,s,l),clearTimeout(this._layoutTimeout);var b=n.forceLayout,w=n.get(["force","layoutAnimation"]);b&&this._startForceLayoutIteration(b,w);var x=n.get("layout");g.graph.eachNode(function(C){var A=C.dataIndex,R=C.getGraphicEl(),j=C.getModel();if(R){R.off("drag").off("dragend");var D=j.get("draggable");D&&R.on("drag",function(H){switch(x){case"force":b.warmUp(),!c._layouting&&c._startForceLayoutIteration(b,w),b.setFixed(A),g.setItemLayout(A,[R.x,R.y]);break;case"circular":g.setItemLayout(A,[R.x,R.y]),C.setLayout({fixed:!0},!0),circularLayout(n,"symbolSize",C,[H.offsetX,H.offsetY]),c.updateLayout(n);break;case"none":default:g.setItemLayout(A,[R.x,R.y]),simpleLayoutEdge(n.getGraph(),n),c.updateLayout(n);break}}).on("dragend",function(){b&&b.setUnfixed(A)}),R.setDraggable(D,!!j.get("cursor"));var O=j.get(["emphasis","focus"]);O==="adjacency"&&(getECData(R).focus=C.getAdjacentDataIndices())}}),g.graph.eachEdge(function(C){var A=C.getGraphicEl(),R=C.getModel().get(["emphasis","focus"]);A&&R==="adjacency"&&(getECData(A).focus={edge:[C.dataIndex],node:[C.node1.dataIndex,C.node2.dataIndex]})});var S=n.get("layout")==="circular"&&n.get(["circular","rotateLabel"]),E=g.getLayout("cx"),T=g.getLayout("cy");g.graph.eachNode(function(C){rotateNodeLabel(C,S,E,T)}),this._firstRender=!1},a.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},a.prototype._startForceLayoutIteration=function(n,s){var l=this;(function c(){n.step(function(u){l.updateLayout(l._model),(l._layouting=!u)&&(s?l._layoutTimeout=setTimeout(c,16):c())})})()},a.prototype._updateController=function(n,s,l){var c=this,u=this._controller,d=this._controllerHost,h=this.group;if(u.setPointerChecker(function(f,p,g){var v=h.getBoundingRect();return v.applyTransform(h.transform),v.contain(p,g)&&!onIrrelevantElement(f,l,n)}),!isViewCoordSys(n.coordinateSystem)){u.disable();return}u.enable(n.get("roam")),d.zoomLimit=n.get("scaleLimit"),d.zoom=n.coordinateSystem.getZoom(),u.off("pan").off("zoom").on("pan",function(f){updateViewOnPan(d,f.dx,f.dy),l.dispatchAction({seriesId:n.id,type:"graphRoam",dx:f.dx,dy:f.dy})}).on("zoom",function(f){updateViewOnZoom(d,f.scale,f.originX,f.originY),l.dispatchAction({seriesId:n.id,type:"graphRoam",zoom:f.scale,originX:f.originX,originY:f.originY}),c._updateNodeAndLinkScale(),adjustEdge(n.getGraph(),getNodeGlobalScale(n)),c._lineDraw.updateLayout(),l.updateLabelLayout()})},a.prototype._updateNodeAndLinkScale=function(){var n=this._model,s=n.getData(),l=getNodeGlobalScale(n);s.eachItemGraphicEl(function(c,u){c&&c.setSymbolScale(l)})},a.prototype.updateLayout=function(n){adjustEdge(n.getGraph(),getNodeGlobalScale(n)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},a.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},a.type="graph",a}(ChartView);function generateNodeKey(o){return"_EC_"+o}var Graph=function(){function o(a){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=a||!1}return o.prototype.isDirected=function(){return this._directed},o.prototype.addNode=function(a,n){a=a==null?""+n:""+a;var s=this._nodesMap;if(s[generateNodeKey(a)]){process.env.NODE_ENV!=="production"&&console.error("Graph nodes have duplicate name or id");return}var l=new GraphNode(a,n);return l.hostGraph=this,this.nodes.push(l),s[generateNodeKey(a)]=l,l},o.prototype.getNodeByIndex=function(a){var n=this.data.getRawIndex(a);return this.nodes[n]},o.prototype.getNodeById=function(a){return this._nodesMap[generateNodeKey(a)]},o.prototype.addEdge=function(a,n,s){var l=this._nodesMap,c=this._edgesMap;if(isNumber(a)&&(a=this.nodes[a]),isNumber(n)&&(n=this.nodes[n]),a instanceof GraphNode||(a=l[generateNodeKey(a)]),n instanceof GraphNode||(n=l[generateNodeKey(n)]),!(!a||!n)){var u=a.id+"-"+n.id,d=new GraphEdge(a,n,s);return d.hostGraph=this,this._directed&&(a.outEdges.push(d),n.inEdges.push(d)),a.edges.push(d),a!==n&&n.edges.push(d),this.edges.push(d),c[u]=d,d}},o.prototype.getEdgeByIndex=function(a){var n=this.edgeData.getRawIndex(a);return this.edges[n]},o.prototype.getEdge=function(a,n){a instanceof GraphNode&&(a=a.id),n instanceof GraphNode&&(n=n.id);var s=this._edgesMap;return this._directed?s[a+"-"+n]:s[a+"-"+n]||s[n+"-"+a]},o.prototype.eachNode=function(a,n){for(var s=this.nodes,l=s.length,c=0;c<l;c++)s[c].dataIndex>=0&&a.call(n,s[c],c)},o.prototype.eachEdge=function(a,n){for(var s=this.edges,l=s.length,c=0;c<l;c++)s[c].dataIndex>=0&&s[c].node1.dataIndex>=0&&s[c].node2.dataIndex>=0&&a.call(n,s[c],c)},o.prototype.breadthFirstTraverse=function(a,n,s,l){if(n instanceof GraphNode||(n=this._nodesMap[generateNodeKey(n)]),!!n){for(var c=s==="out"?"outEdges":s==="in"?"inEdges":"edges",u=0;u<this.nodes.length;u++)this.nodes[u].__visited=!1;if(!a.call(l,n,null))for(var d=[n];d.length;)for(var h=d.shift(),f=h[c],u=0;u<f.length;u++){var p=f[u],g=p.node1===h?p.node2:p.node1;if(!g.__visited){if(a.call(l,g,h))return;d.push(g),g.__visited=!0}}}},o.prototype.update=function(){for(var a=this.data,n=this.edgeData,s=this.nodes,l=this.edges,c=0,u=s.length;c<u;c++)s[c].dataIndex=-1;for(var c=0,u=a.count();c<u;c++)s[a.getRawIndex(c)].dataIndex=c;n.filterSelf(function(d){var h=l[n.getRawIndex(d)];return h.node1.dataIndex>=0&&h.node2.dataIndex>=0});for(var c=0,u=l.length;c<u;c++)l[c].dataIndex=-1;for(var c=0,u=n.count();c<u;c++)l[n.getRawIndex(c)].dataIndex=c},o.prototype.clone=function(){for(var a=new o(this._directed),n=this.nodes,s=this.edges,l=0;l<n.length;l++)a.addNode(n[l].id,n[l].dataIndex);for(var l=0;l<s.length;l++){var c=s[l];a.addEdge(c.node1.id,c.node2.id,c.dataIndex)}return a},o}(),GraphNode=function(){function o(a,n){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=a??"",this.dataIndex=n??-1}return o.prototype.degree=function(){return this.edges.length},o.prototype.inDegree=function(){return this.inEdges.length},o.prototype.outDegree=function(){return this.outEdges.length},o.prototype.getModel=function(a){if(!(this.dataIndex<0)){var n=this.hostGraph,s=n.data.getItemModel(this.dataIndex);return s.getModel(a)}},o.prototype.getAdjacentDataIndices=function(){for(var a={edge:[],node:[]},n=0;n<this.edges.length;n++){var s=this.edges[n];s.dataIndex<0||(a.edge.push(s.dataIndex),a.node.push(s.node1.dataIndex,s.node2.dataIndex))}return a},o.prototype.getTrajectoryDataIndices=function(){for(var a=createHashMap(),n=createHashMap(),s=0;s<this.edges.length;s++){var l=this.edges[s];if(!(l.dataIndex<0)){a.set(l.dataIndex,!0);for(var c=[l.node1],u=[l.node2],d=0;d<c.length;){var h=c[d];d++,n.set(h.dataIndex,!0);for(var f=0;f<h.inEdges.length;f++)a.set(h.inEdges[f].dataIndex,!0),c.push(h.inEdges[f].node1)}for(d=0;d<u.length;){var p=u[d];d++,n.set(p.dataIndex,!0);for(var f=0;f<p.outEdges.length;f++)a.set(p.outEdges[f].dataIndex,!0),u.push(p.outEdges[f].node2)}}}return{edge:a.keys(),node:n.keys()}},o}(),GraphEdge=function(){function o(a,n,s){this.dataIndex=-1,this.node1=a,this.node2=n,this.dataIndex=s??-1}return o.prototype.getModel=function(a){if(!(this.dataIndex<0)){var n=this.hostGraph,s=n.edgeData.getItemModel(this.dataIndex);return s.getModel(a)}},o.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},o.prototype.getTrajectoryDataIndices=function(){var a=createHashMap(),n=createHashMap();a.set(this.dataIndex,!0);for(var s=[this.node1],l=[this.node2],c=0;c<s.length;){var u=s[c];c++,n.set(u.dataIndex,!0);for(var d=0;d<u.inEdges.length;d++)a.set(u.inEdges[d].dataIndex,!0),s.push(u.inEdges[d].node1)}for(c=0;c<l.length;){var h=l[c];c++,n.set(h.dataIndex,!0);for(var d=0;d<h.outEdges.length;d++)a.set(h.outEdges[d].dataIndex,!0),l.push(h.outEdges[d].node2)}return{edge:a.keys(),node:n.keys()}},o}();function createGraphDataProxyMixin(o,a){return{getValue:function(n){var s=this[o][a];return s.getStore().get(s.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,s){this.dataIndex>=0&&this[o][a].setItemVisual(this.dataIndex,n,s)},getVisual:function(n){return this[o][a].getItemVisual(this.dataIndex,n)},setLayout:function(n,s){this.dataIndex>=0&&this[o][a].setItemLayout(this.dataIndex,n,s)},getLayout:function(){return this[o][a].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[o][a].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[o][a].getRawIndex(this.dataIndex)}}}mixin(GraphNode,createGraphDataProxyMixin("hostGraph","data"));mixin(GraphEdge,createGraphDataProxyMixin("hostGraph","edgeData"));function createGraphFromNodeEdge(o,a,n,s,l){for(var c=new Graph(s),u=0;u<o.length;u++)c.addNode(retrieve(o[u].id,o[u].name,u),u);for(var d=[],h=[],f=0,u=0;u<a.length;u++){var p=a[u],g=p.source,v=p.target;c.addEdge(g,v,f)&&(h.push(p),d.push(retrieve(convertOptionIdName(p.id,null),g+" > "+v)),f++)}var b=n.get("coordinateSystem"),w;if(b==="cartesian2d"||b==="polar")w=createSeriesData(o,n);else{var x=CoordinateSystemManager.get(b),S=x?x.dimensions||[]:[];indexOf(S,"value")<0&&S.concat(["value"]);var E=prepareSeriesDataSchema(o,{coordDimensions:S,encodeDefine:n.getEncode()}).dimensions;w=new SeriesData(E,n),w.initData(o)}var T=new SeriesData(["value"],n);return T.initData(h,d),l&&l(w,T),linkSeriesData({mainData:w,struct:c,structAttr:"graph",datas:{node:w,edge:T},datasAttr:{node:"data",edge:"edgeData"}}),c.update(),c}var GraphSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.hasSymbolVisual=!0,n}return a.prototype.init=function(n){o.prototype.init.apply(this,arguments);var s=this;function l(){return s._categoriesData}this.legendVisualProvider=new LegendVisualProvider(l,l),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},a.prototype.mergeOption=function(n){o.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(n.edges||n.links),this._updateCategoriesData()},a.prototype.mergeDefaultAndTheme=function(n){o.prototype.mergeDefaultAndTheme.apply(this,arguments),defaultEmphasis(n,"edgeLabel",["show"])},a.prototype.getInitialData=function(n,s){var l=n.edges||n.links||[],c=n.data||n.nodes||[],u=this;if(c&&l){initCurvenessList(this);var d=createGraphFromNodeEdge(c,l,this,!0,h);return each$f(d.edges,function(f){createEdgeMapForCurveness(f.node1,f.node2,this,f.dataIndex)},this),d.data}function h(f,p){f.wrapMethod("getItemModel",function(w){var x=u._categoriesModels,S=w.getShallow("category"),E=x[S];return E&&(E.parentModel=w.parentModel,w.parentModel=E),w});var g=Model.prototype.getModel;function v(w,x){var S=g.call(this,w,x);return S.resolveParentPath=b,S}p.wrapMethod("getItemModel",function(w){return w.resolveParentPath=b,w.getModel=v,w});function b(w){if(w&&(w[0]==="label"||w[1]==="label")){var x=w.slice();return w[0]==="label"?x[0]="edgeLabel":w[1]==="label"&&(x[1]="edgeLabel"),x}return w}}},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.getCategoriesData=function(){return this._categoriesData},a.prototype.formatTooltip=function(n,s,l){if(l==="edge"){var c=this.getData(),u=this.getDataParams(n,l),d=c.graph.getEdgeByIndex(n),h=c.getName(d.node1.dataIndex),f=c.getName(d.node2.dataIndex),p=[];return h!=null&&p.push(h),f!=null&&p.push(f),createTooltipMarkup("nameValue",{name:p.join(" > "),value:u.value,noValue:u.value==null})}var g=defaultSeriesFormatTooltip({series:this,dataIndex:n,multipleSeries:s});return g},a.prototype._updateCategoriesData=function(){var n=map$1(this.option.categories||[],function(l){return l.value!=null?l:extend({value:0},l)}),s=new SeriesData(["value"],this);s.initData(n),this._categoriesData=s,this._categoriesModels=s.mapArray(function(l){return s.getItemModel(l)})},a.prototype.setZoom=function(n){this.option.zoom=n},a.prototype.setCenter=function(n){this.option.center=n},a.prototype.isAnimationEnabled=function(){return o.prototype.isAnimationEnabled.call(this)&&!(this.get("layout")==="force"&&this.get(["force","layoutAnimation"]))},a.type="series.graph",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(SeriesModel),actionInfo$1={type:"graphRoam",event:"graphRoam",update:"none"};function install$F(o){o.registerChartView(GraphView),o.registerSeriesModel(GraphSeriesModel),o.registerProcessor(categoryFilter),o.registerVisual(categoryVisual),o.registerVisual(graphEdgeVisual),o.registerLayout(graphSimpleLayout),o.registerLayout(o.PRIORITY.VISUAL.POST_CHART_LAYOUT,graphCircularLayout),o.registerLayout(graphForceLayout),o.registerCoordinateSystem("graphView",{dimensions:View.dimensions,create:createViewCoordSys}),o.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},noop$1),o.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},noop$1),o.registerAction(actionInfo$1,function(a,n,s){n.eachComponent({mainType:"series",query:a},function(l){var c=l.coordinateSystem,u=updateCenterAndZoom(c,a,void 0,s);l.setCenter&&l.setCenter(u.center),l.setZoom&&l.setZoom(u.zoom)})})}var PointerShape=function(){function o(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return o}(),PointerPath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="pointer",s}return a.prototype.getDefaultShape=function(){return new PointerShape},a.prototype.buildPath=function(n,s){var l=Math.cos,c=Math.sin,u=s.r,d=s.width,h=s.angle,f=s.x-l(h)*d*(d>=u/3?1:2),p=s.y-c(h)*d*(d>=u/3?1:2);h=s.angle-Math.PI/2,n.moveTo(f,p),n.lineTo(s.x+l(h)*d,s.y+c(h)*d),n.lineTo(s.x+l(s.angle)*u,s.y+c(s.angle)*u),n.lineTo(s.x-l(h)*d,s.y-c(h)*d),n.lineTo(f,p)},a}(Path);function parsePosition(o,a){var n=o.get("center"),s=a.getWidth(),l=a.getHeight(),c=Math.min(s,l),u=parsePercent(n[0],a.getWidth()),d=parsePercent(n[1],a.getHeight()),h=parsePercent(o.get("radius"),c/2);return{cx:u,cy:d,r:h}}function formatLabel(o,a){var n=o==null?"":o+"";return a&&(isString$2(a)?n=a.replace("{value}",n):isFunction$1(a)&&(n=a(o))),n}var GaugeView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){this.group.removeAll();var c=n.get(["axisLine","lineStyle","color"]),u=parsePosition(n,l);this._renderMain(n,s,l,c,u),this._data=n.getData()},a.prototype.dispose=function(){},a.prototype._renderMain=function(n,s,l,c,u){var d=this.group,h=n.get("clockwise"),f=-n.get("startAngle")/180*Math.PI,p=-n.get("endAngle")/180*Math.PI,g=n.getModel("axisLine"),v=g.get("roundCap"),b=v?SausagePath:Sector,w=g.get("show"),x=g.getModel("lineStyle"),S=x.get("width"),E=[f,p];normalizeArcAngles(E,!h),f=E[0],p=E[1];for(var T=p-f,C=f,A=[],R=0;w&&R<c.length;R++){var j=Math.min(Math.max(c[R][0],0),1);p=f+T*j;var D=new b({shape:{startAngle:C,endAngle:p,cx:u.cx,cy:u.cy,clockwise:h,r0:u.r-S,r:u.r},silent:!0});D.setStyle({fill:c[R][1]}),D.setStyle(x.getLineStyle(["color","width"])),A.push(D),C=p}A.reverse(),each$f(A,function(H){return d.add(H)});var O=function(H){if(H<=0)return c[0][1];var q;for(q=0;q<c.length;q++)if(c[q][0]>=H&&(q===0?0:c[q-1][0])<H)return c[q][1];return c[q-1][1]};this._renderTicks(n,s,l,O,u,f,p,h,S),this._renderTitleAndDetail(n,s,l,O,u),this._renderAnchor(n,u),this._renderPointer(n,s,l,O,u,f,p,h,S)},a.prototype._renderTicks=function(n,s,l,c,u,d,h,f,p){for(var g=this.group,v=u.cx,b=u.cy,w=u.r,x=+n.get("min"),S=+n.get("max"),E=n.getModel("splitLine"),T=n.getModel("axisTick"),C=n.getModel("axisLabel"),A=n.get("splitNumber"),R=T.get("splitNumber"),j=parsePercent(E.get("length"),w),D=parsePercent(T.get("length"),w),O=d,H=(h-d)/A,q=H/R,Y=E.getModel("lineStyle").getLineStyle(),te=T.getModel("lineStyle").getLineStyle(),ee=E.get("distance"),re,ne,ce=0;ce<=A;ce++){if(re=Math.cos(O),ne=Math.sin(O),E.get("show")){var ve=ee?ee+p:p,be=new Line$1({shape:{x1:re*(w-ve)+v,y1:ne*(w-ve)+b,x2:re*(w-j-ve)+v,y2:ne*(w-j-ve)+b},style:Y,silent:!0});Y.stroke==="auto"&&be.setStyle({stroke:c(ce/A)}),g.add(be)}if(C.get("show")){var ve=C.get("distance")+ee,me=formatLabel(round$3(ce/A*(S-x)+x),C.get("formatter")),ae=c(ce/A),pe=re*(w-j-ve)+v,ie=ne*(w-j-ve)+b,se=C.get("rotate"),de=0;se==="radial"?(de=-O+2*Math.PI,de>Math.PI/2&&(de+=Math.PI)):se==="tangential"?de=-O-Math.PI/2:isNumber(se)&&(de=se*Math.PI/180),de===0?g.add(new ZRText({style:createTextStyle$1(C,{text:me,x:pe,y:ie,verticalAlign:ne<-.8?"top":ne>.8?"bottom":"middle",align:re<-.4?"left":re>.4?"right":"center"},{inheritColor:ae}),silent:!0})):g.add(new ZRText({style:createTextStyle$1(C,{text:me,x:pe,y:ie,verticalAlign:"middle",align:"center"},{inheritColor:ae}),silent:!0,originX:pe,originY:ie,rotation:de}))}if(T.get("show")&&ce!==A){var ve=T.get("distance");ve=ve?ve+p:p;for(var le=0;le<=R;le++){re=Math.cos(O),ne=Math.sin(O);var ge=new Line$1({shape:{x1:re*(w-ve)+v,y1:ne*(w-ve)+b,x2:re*(w-D-ve)+v,y2:ne*(w-D-ve)+b},silent:!0,style:te});te.stroke==="auto"&&ge.setStyle({stroke:c((ce+le/R)/A)}),g.add(ge),O+=q}O-=q}else O+=H}},a.prototype._renderPointer=function(n,s,l,c,u,d,h,f,p){var g=this.group,v=this._data,b=this._progressEls,w=[],x=n.get(["pointer","show"]),S=n.getModel("progress"),E=S.get("show"),T=n.getData(),C=T.mapDimension("value"),A=+n.get("min"),R=+n.get("max"),j=[A,R],D=[d,h];function O(q,Y){var te=T.getItemModel(q),ee=te.getModel("pointer"),re=parsePercent(ee.get("width"),u.r),ne=parsePercent(ee.get("length"),u.r),ce=n.get(["pointer","icon"]),ve=ee.get("offsetCenter"),be=parsePercent(ve[0],u.r),me=parsePercent(ve[1],u.r),ae=ee.get("keepAspect"),pe;return ce?pe=createSymbol$1(ce,be-re/2,me-ne,re,ne,null,ae):pe=new PointerPath({shape:{angle:-Math.PI/2,width:re,r:ne,x:be,y:me}}),pe.rotation=-(Y+Math.PI/2),pe.x=u.cx,pe.y=u.cy,pe}function H(q,Y){var te=S.get("roundCap"),ee=te?SausagePath:Sector,re=S.get("overlap"),ne=re?S.get("width"):p/T.count(),ce=re?u.r-ne:u.r-(q+1)*ne,ve=re?u.r:u.r-q*ne,be=new ee({shape:{startAngle:d,endAngle:Y,cx:u.cx,cy:u.cy,clockwise:f,r0:ce,r:ve}});return re&&(be.z2=linearMap$2(T.get(C,q),[A,R],[100,0],!0)),be}(E||x)&&(T.diff(v).add(function(q){var Y=T.get(C,q);if(x){var te=O(q,d);initProps(te,{rotation:-((isNaN(+Y)?D[0]:linearMap$2(Y,j,D,!0))+Math.PI/2)},n),g.add(te),T.setItemGraphicEl(q,te)}if(E){var ee=H(q,d),re=S.get("clip");initProps(ee,{shape:{endAngle:linearMap$2(Y,j,D,re)}},n),g.add(ee),setCommonECData(n.seriesIndex,T.dataType,q,ee),w[q]=ee}}).update(function(q,Y){var te=T.get(C,q);if(x){var ee=v.getItemGraphicEl(Y),re=ee?ee.rotation:d,ne=O(q,re);ne.rotation=re,updateProps$1(ne,{rotation:-((isNaN(+te)?D[0]:linearMap$2(te,j,D,!0))+Math.PI/2)},n),g.add(ne),T.setItemGraphicEl(q,ne)}if(E){var ce=b[Y],ve=ce?ce.shape.endAngle:d,be=H(q,ve),me=S.get("clip");updateProps$1(be,{shape:{endAngle:linearMap$2(te,j,D,me)}},n),g.add(be),setCommonECData(n.seriesIndex,T.dataType,q,be),w[q]=be}}).execute(),T.each(function(q){var Y=T.getItemModel(q),te=Y.getModel("emphasis"),ee=te.get("focus"),re=te.get("blurScope"),ne=te.get("disabled");if(x){var ce=T.getItemGraphicEl(q),ve=T.getItemVisual(q,"style"),be=ve.fill;if(ce instanceof ZRImage){var me=ce.style;ce.useStyle(extend({image:me.image,x:me.x,y:me.y,width:me.width,height:me.height},ve))}else ce.useStyle(ve),ce.type!=="pointer"&&ce.setColor(be);ce.setStyle(Y.getModel(["pointer","itemStyle"]).getItemStyle()),ce.style.fill==="auto"&&ce.setStyle("fill",c(linearMap$2(T.get(C,q),j,[0,1],!0))),ce.z2EmphasisLift=0,setStatesStylesFromModel(ce,Y),toggleHoverEmphasis(ce,ee,re,ne)}if(E){var ae=w[q];ae.useStyle(T.getItemVisual(q,"style")),ae.setStyle(Y.getModel(["progress","itemStyle"]).getItemStyle()),ae.z2EmphasisLift=0,setStatesStylesFromModel(ae,Y),toggleHoverEmphasis(ae,ee,re,ne)}}),this._progressEls=w)},a.prototype._renderAnchor=function(n,s){var l=n.getModel("anchor"),c=l.get("show");if(c){var u=l.get("size"),d=l.get("icon"),h=l.get("offsetCenter"),f=l.get("keepAspect"),p=createSymbol$1(d,s.cx-u/2+parsePercent(h[0],s.r),s.cy-u/2+parsePercent(h[1],s.r),u,u,null,f);p.z2=l.get("showAbove")?1:0,p.setStyle(l.getModel("itemStyle").getItemStyle()),this.group.add(p)}},a.prototype._renderTitleAndDetail=function(n,s,l,c,u){var d=this,h=n.getData(),f=h.mapDimension("value"),p=+n.get("min"),g=+n.get("max"),v=new Group$3,b=[],w=[],x=n.isAnimationEnabled(),S=n.get(["pointer","showAbove"]);h.diff(this._data).add(function(E){b[E]=new ZRText({silent:!0}),w[E]=new ZRText({silent:!0})}).update(function(E,T){b[E]=d._titleEls[T],w[E]=d._detailEls[T]}).execute(),h.each(function(E){var T=h.getItemModel(E),C=h.get(f,E),A=new Group$3,R=c(linearMap$2(C,[p,g],[0,1],!0)),j=T.getModel("title");if(j.get("show")){var D=j.get("offsetCenter"),O=u.cx+parsePercent(D[0],u.r),H=u.cy+parsePercent(D[1],u.r),q=b[E];q.attr({z2:S?0:2,style:createTextStyle$1(j,{x:O,y:H,text:h.getName(E),align:"center",verticalAlign:"middle"},{inheritColor:R})}),A.add(q)}var Y=T.getModel("detail");if(Y.get("show")){var te=Y.get("offsetCenter"),ee=u.cx+parsePercent(te[0],u.r),re=u.cy+parsePercent(te[1],u.r),ne=parsePercent(Y.get("width"),u.r),ce=parsePercent(Y.get("height"),u.r),ve=n.get(["progress","show"])?h.getItemVisual(E,"style").fill:R,q=w[E],be=Y.get("formatter");q.attr({z2:S?0:2,style:createTextStyle$1(Y,{x:ee,y:re,text:formatLabel(C,be),width:isNaN(ne)?null:ne,height:isNaN(ce)?null:ce,align:"center",verticalAlign:"middle"},{inheritColor:ve})}),setLabelValueAnimation(q,{normal:Y},C,function(ae){return formatLabel(ae,be)}),x&&animateLabelValue(q,E,h,n,{getFormattedLabel:function(ae,pe,ie,se,de,le){return formatLabel(le?le.interpolatedValue:C,be)}}),A.add(q)}v.add(A)}),this.group.add(v),this._titleEls=b,this._detailEls=w},a.type="gauge",a}(ChartView),GaugeSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.visualStyleAccessPath="itemStyle",n}return a.prototype.getInitialData=function(n,s){return createSeriesDataSimply(this,["value"])},a.type="series.gauge",a.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},a}(SeriesModel);function install$E(o){o.registerChartView(GaugeView),o.registerSeriesModel(GaugeSeriesModel)}var opacityAccessPath$1=["itemStyle","opacity"],FunnelPiece=function(o){__extends$1(a,o);function a(n,s){var l=o.call(this)||this,c=l,u=new Polyline$1,d=new ZRText;return c.setTextContent(d),l.setTextGuideLine(u),l.updateData(n,s,!0),l}return a.prototype.updateData=function(n,s,l){var c=this,u=n.hostModel,d=n.getItemModel(s),h=n.getItemLayout(s),f=d.getModel("emphasis"),p=d.get(opacityAccessPath$1);p=p??1,l||saveOldStyle(c),c.useStyle(n.getItemVisual(s,"style")),c.style.lineJoin="round",l?(c.setShape({points:h.points}),c.style.opacity=0,initProps(c,{style:{opacity:p}},u,s)):updateProps$1(c,{style:{opacity:p},shape:{points:h.points}},u,s),setStatesStylesFromModel(c,d),this._updateLabel(n,s),toggleHoverEmphasis(this,f.get("focus"),f.get("blurScope"),f.get("disabled"))},a.prototype._updateLabel=function(n,s){var l=this,c=this.getTextGuideLine(),u=l.getTextContent(),d=n.hostModel,h=n.getItemModel(s),f=n.getItemLayout(s),p=f.label,g=n.getItemVisual(s,"style"),v=g.fill;setLabelStyle(u,getLabelStatesModels(h),{labelFetcher:n.hostModel,labelDataIndex:s,defaultOpacity:g.opacity,defaultText:n.getName(s)},{normal:{align:p.textAlign,verticalAlign:p.verticalAlign}}),l.setTextConfig({local:!0,inside:!!p.inside,insideStroke:v,outsideFill:v});var b=p.linePoints;c.setShape({points:b}),l.textGuideLineConfig={anchor:b?new Point(b[0][0],b[0][1]):null},updateProps$1(u,{style:{x:p.x,y:p.y}},d,s),u.attr({rotation:p.rotation,originX:p.x,originY:p.y,z2:10}),setLabelLineStyle(l,getLabelLineStatesModels(h),{stroke:v})},a}(Polygon),FunnelView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.ignoreLabelLineUpdate=!0,n}return a.prototype.render=function(n,s,l){var c=n.getData(),u=this._data,d=this.group;c.diff(u).add(function(h){var f=new FunnelPiece(c,h);c.setItemGraphicEl(h,f),d.add(f)}).update(function(h,f){var p=u.getItemGraphicEl(f);p.updateData(c,h),d.add(p),c.setItemGraphicEl(h,p)}).remove(function(h){var f=u.getItemGraphicEl(h);removeElementWithFadeOut(f,n,h)}).execute(),this._data=c},a.prototype.remove=function(){this.group.removeAll(),this._data=null},a.prototype.dispose=function(){},a.type="funnel",a}(ChartView),FunnelSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this)),this._defaultLabelLine(n)},a.prototype.getInitialData=function(n,s){return createSeriesDataSimply(this,{coordDimensions:["value"],encodeDefaulter:curry$1(makeSeriesEncodeForNameBased,this)})},a.prototype._defaultLabelLine=function(n){defaultEmphasis(n,"labelLine",["show"]);var s=n.labelLine,l=n.emphasis.labelLine;s.show=s.show&&n.label.show,l.show=l.show&&n.emphasis.label.show},a.prototype.getDataParams=function(n){var s=this.getData(),l=o.prototype.getDataParams.call(this,n),c=s.mapDimension("value"),u=s.getSum(c);return l.percent=u?+(s.get(c,n)/u*100).toFixed(2):0,l.$vars.push("percent"),l},a.type="series.funnel",a.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},a}(SeriesModel);function getViewRect$2(o,a){return getLayoutRect(o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function getSortedIndices(o,a){for(var n=o.mapDimension("value"),s=o.mapArray(n,function(h){return h}),l=[],c=a==="ascending",u=0,d=o.count();u<d;u++)l[u]=u;return isFunction$1(a)?l.sort(a):a!=="none"&&l.sort(function(h,f){return c?s[h]-s[f]:s[f]-s[h]}),l}function labelLayout(o){var a=o.hostModel,n=a.get("orient");o.each(function(s){var l=o.getItemModel(s),c=l.getModel("label"),u=c.get("position"),d=l.getModel("labelLine"),h=o.getItemLayout(s),f=h.points,p=u==="inner"||u==="inside"||u==="center"||u==="insideLeft"||u==="insideRight",g,v,b,w;if(p)u==="insideLeft"?(v=(f[0][0]+f[3][0])/2+5,b=(f[0][1]+f[3][1])/2,g="left"):u==="insideRight"?(v=(f[1][0]+f[2][0])/2-5,b=(f[1][1]+f[2][1])/2,g="right"):(v=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,b=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,g="center"),w=[[v,b],[v,b]];else{var x=void 0,S=void 0,E=void 0,T=void 0,C=d.get("length");process.env.NODE_ENV!=="production"&&(n==="vertical"&&["top","bottom"].indexOf(u)>-1&&(u="left",console.warn("Position error: Funnel chart on vertical orient dose not support top and bottom.")),n==="horizontal"&&["left","right"].indexOf(u)>-1&&(u="bottom",console.warn("Position error: Funnel chart on horizontal orient dose not support left and right."))),u==="left"?(x=(f[3][0]+f[0][0])/2,S=(f[3][1]+f[0][1])/2,E=x-C,v=E-5,g="right"):u==="right"?(x=(f[1][0]+f[2][0])/2,S=(f[1][1]+f[2][1])/2,E=x+C,v=E+5,g="left"):u==="top"?(x=(f[3][0]+f[0][0])/2,S=(f[3][1]+f[0][1])/2,T=S-C,b=T-5,g="center"):u==="bottom"?(x=(f[1][0]+f[2][0])/2,S=(f[1][1]+f[2][1])/2,T=S+C,b=T+5,g="center"):u==="rightTop"?(x=n==="horizontal"?f[3][0]:f[1][0],S=n==="horizontal"?f[3][1]:f[1][1],n==="horizontal"?(T=S-C,b=T-5,g="center"):(E=x+C,v=E+5,g="top")):u==="rightBottom"?(x=f[2][0],S=f[2][1],n==="horizontal"?(T=S+C,b=T+5,g="center"):(E=x+C,v=E+5,g="bottom")):u==="leftTop"?(x=f[0][0],S=n==="horizontal"?f[0][1]:f[1][1],n==="horizontal"?(T=S-C,b=T-5,g="center"):(E=x-C,v=E-5,g="right")):u==="leftBottom"?(x=n==="horizontal"?f[1][0]:f[3][0],S=n==="horizontal"?f[1][1]:f[2][1],n==="horizontal"?(T=S+C,b=T+5,g="center"):(E=x-C,v=E-5,g="right")):(x=(f[1][0]+f[2][0])/2,S=(f[1][1]+f[2][1])/2,n==="horizontal"?(T=S+C,b=T+5,g="center"):(E=x+C,v=E+5,g="left")),n==="horizontal"?(E=x,v=E):(T=S,b=T),w=[[x,S],[E,T]]}h.label={linePoints:w,x:v,y:b,verticalAlign:"middle",textAlign:g,inside:p}})}function funnelLayout(o,a){o.eachSeriesByType("funnel",function(n){var s=n.getData(),l=s.mapDimension("value"),c=n.get("sort"),u=getViewRect$2(n,a),d=n.get("orient"),h=u.width,f=u.height,p=getSortedIndices(s,c),g=u.x,v=u.y,b=d==="horizontal"?[parsePercent(n.get("minSize"),f),parsePercent(n.get("maxSize"),f)]:[parsePercent(n.get("minSize"),h),parsePercent(n.get("maxSize"),h)],w=s.getDataExtent(l),x=n.get("min"),S=n.get("max");x==null&&(x=Math.min(w[0],0)),S==null&&(S=w[1]);var E=n.get("funnelAlign"),T=n.get("gap"),C=d==="horizontal"?h:f,A=(C-T*(s.count()-1))/s.count(),R=function(re,ne){if(d==="horizontal"){var ce=s.get(l,re)||0,ve=linearMap$2(ce,[x,S],b,!0),be=void 0;switch(E){case"top":be=v;break;case"center":be=v+(f-ve)/2;break;case"bottom":be=v+(f-ve);break}return[[ne,be],[ne,be+ve]]}var me=s.get(l,re)||0,ae=linearMap$2(me,[x,S],b,!0),pe;switch(E){case"left":pe=g;break;case"center":pe=g+(h-ae)/2;break;case"right":pe=g+h-ae;break}return[[pe,ne],[pe+ae,ne]]};c==="ascending"&&(A=-A,T=-T,d==="horizontal"?g+=h:v+=f,p=p.reverse());for(var j=0;j<p.length;j++){var D=p[j],O=p[j+1],H=s.getItemModel(D);if(d==="horizontal"){var q=H.get(["itemStyle","width"]);q==null?q=A:(q=parsePercent(q,h),c==="ascending"&&(q=-q));var Y=R(D,g),te=R(O,g+q);g+=q+T,s.setItemLayout(D,{points:Y.concat(te.slice().reverse())})}else{var ee=H.get(["itemStyle","height"]);ee==null?ee=A:(ee=parsePercent(ee,f),c==="ascending"&&(ee=-ee));var Y=R(D,v),te=R(O,v+ee);v+=ee+T,s.setItemLayout(D,{points:Y.concat(te.slice().reverse())})}}labelLayout(s)})}function install$D(o){o.registerChartView(FunnelView),o.registerSeriesModel(FunnelSeriesModel),o.registerLayout(funnelLayout),o.registerProcessor(dataFilter$1("funnel"))}var DEFAULT_SMOOTH=.3,ParallelView$1=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._dataGroup=new Group$3,n._initialized=!1,n}return a.prototype.init=function(){this.group.add(this._dataGroup)},a.prototype.render=function(n,s,l,c){this._progressiveEls=null;var u=this._dataGroup,d=n.getData(),h=this._data,f=n.coordinateSystem,p=f.dimensions,g=makeSeriesScope(n);d.diff(h).add(v).update(b).remove(w).execute();function v(S){var E=addEl(d,u,S,p,f);updateElCommon(E,d,S,g)}function b(S,E){var T=h.getItemGraphicEl(E),C=createLinePoints(d,S,p,f);d.setItemGraphicEl(S,T),updateProps$1(T,{shape:{points:C}},n,S),saveOldStyle(T),updateElCommon(T,d,S,g)}function w(S){var E=h.getItemGraphicEl(S);u.remove(E)}if(!this._initialized){this._initialized=!0;var x=createGridClipShape$2(f,n,function(){setTimeout(function(){u.removeClipPath()})});u.setClipPath(x)}this._data=d},a.prototype.incrementalPrepareRender=function(n,s,l){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},a.prototype.incrementalRender=function(n,s,l){for(var c=s.getData(),u=s.coordinateSystem,d=u.dimensions,h=makeSeriesScope(s),f=this._progressiveEls=[],p=n.start;p<n.end;p++){var g=addEl(c,this._dataGroup,p,d,u);g.incremental=!0,updateElCommon(g,c,p,h),f.push(g)}},a.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},a.type="parallel",a}(ChartView);function createGridClipShape$2(o,a,n){var s=o.model,l=o.getRect(),c=new Rect$2({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),u=s.get("layout")==="horizontal"?"width":"height";return c.setShape(u,0),initProps(c,{shape:{width:l.width,height:l.height}},a,n),c}function createLinePoints(o,a,n,s){for(var l=[],c=0;c<n.length;c++){var u=n[c],d=o.get(o.mapDimension(u),a);isEmptyValue(d,s.getAxis(u).type)||l.push(s.dataToPoint(d,u))}return l}function addEl(o,a,n,s,l){var c=createLinePoints(o,n,s,l),u=new Polyline$1({shape:{points:c},z2:10});return a.add(u),o.setItemGraphicEl(n,u),u}function makeSeriesScope(o){var a=o.get("smooth",!0);return a===!0&&(a=DEFAULT_SMOOTH),a=numericToNumber(a),eqNaN(a)&&(a=0),{smooth:a}}function updateElCommon(o,a,n,s){o.useStyle(a.getItemVisual(n,"style")),o.style.fill=null,o.setShape("smooth",s.smooth);var l=a.getItemModel(n),c=l.getModel("emphasis");setStatesStylesFromModel(o,l,"lineStyle"),toggleHoverEmphasis(o,c.get("focus"),c.get("blurScope"),c.get("disabled"))}function isEmptyValue(o,a){return a==="category"?o==null:o==null||isNaN(o)}var ParallelSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return a.prototype.getInitialData=function(n,s){return createSeriesData(null,this,{useEncodeDefaulter:bind$1(makeDefaultEncode,null,this)})},a.prototype.getRawIndicesByActiveState=function(n){var s=this.coordinateSystem,l=this.getData(),c=[];return s.eachActiveState(l,function(u,d){n===u&&c.push(l.getRawIndex(d))}),c},a.type="series.parallel",a.dependencies=["parallel"],a.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},a}(SeriesModel);function makeDefaultEncode(o){var a=o.ecModel.getComponent("parallel",o.get("parallelIndex"));if(a){var n={};return each$f(a.dimensions,function(s){var l=convertDimNameToNumber(s);n[s]=l}),n}}function convertDimNameToNumber(o){return+o.replace("dim","")}var opacityAccessPath=["lineStyle","opacity"],parallelVisual={seriesType:"parallel",reset:function(o,a){var n=o.coordinateSystem,s={normal:o.get(["lineStyle","opacity"]),active:o.get("activeOpacity"),inactive:o.get("inactiveOpacity")};return{progress:function(l,c){n.eachActiveState(c,function(u,d){var h=s[u];if(u==="normal"&&c.hasItemOption){var f=c.getItemModel(d).get(opacityAccessPath,!0);f!=null&&(h=f)}var p=c.ensureUniqueItemVisual(d,"style");p.opacity=h},l.start,l.end)}}}};function parallelPreprocessor(o){createParallelIfNeeded(o),mergeAxisOptionFromParallel(o)}function createParallelIfNeeded(o){if(!o.parallel){var a=!1;each$f(o.series,function(n){n&&n.type==="parallel"&&(a=!0)}),a&&(o.parallel=[{}])}}function mergeAxisOptionFromParallel(o){var a=normalizeToArray(o.parallelAxis);each$f(a,function(n){if(isObject$3(n)){var s=n.parallelIndex||0,l=normalizeToArray(o.parallel)[s];l&&l.parallelAxisDefault&&merge(n,l.parallelAxisDefault,!1)}})}var CLICK_THRESHOLD=5,ParallelView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){this._model=n,this._api=l,this._handlers||(this._handlers={},each$f(handlers$1,function(c,u){l.getZr().on(u,this._handlers[u]=bind$1(c,this))},this)),createOrUpdate(this,"_throttledDispatchExpand",n.get("axisExpandRate"),"fixRate")},a.prototype.dispose=function(n,s){clear$1(this,"_throttledDispatchExpand"),each$f(this._handlers,function(l,c){s.getZr().off(c,l)}),this._handlers=null},a.prototype._throttledDispatchExpand=function(n){this._dispatchExpand(n)},a.prototype._dispatchExpand=function(n){n&&this._api.dispatchAction(extend({type:"parallelAxisExpand"},n))},a.type="parallel",a}(ComponentView),handlers$1={mousedown:function(o){checkTrigger(this,"click")&&(this._mouseDownPoint=[o.offsetX,o.offsetY])},mouseup:function(o){var a=this._mouseDownPoint;if(checkTrigger(this,"click")&&a){var n=[o.offsetX,o.offsetY],s=Math.pow(a[0]-n[0],2)+Math.pow(a[1]-n[1],2);if(s>CLICK_THRESHOLD)return;var l=this._model.coordinateSystem.getSlidedAxisExpandWindow([o.offsetX,o.offsetY]);l.behavior!=="none"&&this._dispatchExpand({axisExpandWindow:l.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(o){if(!(this._mouseDownPoint||!checkTrigger(this,"mousemove"))){var a=this._model,n=a.coordinateSystem.getSlidedAxisExpandWindow([o.offsetX,o.offsetY]),s=n.behavior;s==="jump"&&this._throttledDispatchExpand.debounceNextCall(a.get("axisExpandDebounce")),this._throttledDispatchExpand(s==="none"?null:{axisExpandWindow:n.axisExpandWindow,animation:s==="jump"?null:{duration:0}})}}};function checkTrigger(o,a){var n=o._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===a}var ParallelModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(){o.prototype.init.apply(this,arguments),this.mergeOption({})},a.prototype.mergeOption=function(n){var s=this.option;n&&merge(s,n,!0),this._initDimensions()},a.prototype.contains=function(n,s){var l=n.get("parallelIndex");return l!=null&&s.getComponent("parallel",l)===this},a.prototype.setAxisExpand=function(n){each$f(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(s){n.hasOwnProperty(s)&&(this.option[s]=n[s])},this)},a.prototype._initDimensions=function(){var n=this.dimensions=[],s=this.parallelAxisIndex=[],l=filter(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(c){return(c.get("parallelIndex")||0)===this.componentIndex},this);each$f(l,function(c){n.push("dim"+c.get("dim")),s.push(c.componentIndex)})},a.type="parallel",a.dependencies=["parallelAxis"],a.layoutMode="box",a.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},a}(ComponentModel),ParallelAxis=function(o){__extends$1(a,o);function a(n,s,l,c,u){var d=o.call(this,n,s,l)||this;return d.type=c||"value",d.axisIndex=u,d}return a.prototype.isHorizontal=function(){return this.coordinateSystem.getModel().get("layout")!=="horizontal"},a}(Axis);function sliderMove(o,a,n,s,l,c){o=o||0;var u=n[1]-n[0];if(l!=null&&(l=restrict$1(l,[0,u])),c!=null&&(c=Math.max(c,l??0)),s==="all"){var d=Math.abs(a[1]-a[0]);d=restrict$1(d,[0,u]),l=c=restrict$1(d,[l,c]),s=0}a[0]=restrict$1(a[0],n),a[1]=restrict$1(a[1],n);var h=getSpanSign(a,s);a[s]+=o;var f=l||0,p=n.slice();h.sign<0?p[0]+=f:p[1]-=f,a[s]=restrict$1(a[s],p);var g;return g=getSpanSign(a,s),l!=null&&(g.sign!==h.sign||g.span<l)&&(a[1-s]=a[s]+h.sign*l),g=getSpanSign(a,s),c!=null&&g.span>c&&(a[1-s]=a[s]+g.sign*c),a}function getSpanSign(o,a){var n=o[a]-o[1-a];return{span:Math.abs(n),sign:n>0?-1:n<0?1:a?-1:1}}function restrict$1(o,a){return Math.min(a[1]!=null?a[1]:1/0,Math.max(a[0]!=null?a[0]:-1/0,o))}var each$a=each$f,mathMin$2=Math.min,mathMax$2=Math.max,mathFloor=Math.floor,mathCeil=Math.ceil,round=round$3,PI$1=Math.PI,Parallel=function(){function o(a,n,s){this.type="parallel",this._axesMap=createHashMap(),this._axesLayout={},this.dimensions=a.dimensions,this._model=a,this._init(a,n,s)}return o.prototype._init=function(a,n,s){var l=a.dimensions,c=a.parallelAxisIndex;each$a(l,function(u,d){var h=c[d],f=n.getComponent("parallelAxis",h),p=this._axesMap.set(u,new ParallelAxis(u,createScaleByModel$1(f),[0,0],f.get("type"),h)),g=p.type==="category";p.onBand=g&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.coordinateSystem=f.coordinateSystem=this},this)},o.prototype.update=function(a,n){this._updateAxesFromSeries(this._model,a)},o.prototype.containPoint=function(a){var n=this._makeLayoutInfo(),s=n.axisBase,l=n.layoutBase,c=n.pixelDimIndex,u=a[1-c],d=a[c];return u>=s&&u<=s+n.axisLength&&d>=l&&d<=l+n.layoutLength},o.prototype.getModel=function(){return this._model},o.prototype._updateAxesFromSeries=function(a,n){n.eachSeries(function(s){if(a.contains(s,n)){var l=s.getData();each$a(this.dimensions,function(c){var u=this._axesMap.get(c);u.scale.unionExtentFromData(l,l.mapDimension(c)),niceScaleExtent(u.scale,u.model)},this)}},this)},o.prototype.resize=function(a,n){this._rect=getLayoutRect(a.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),this._layoutAxes()},o.prototype.getRect=function(){return this._rect},o.prototype._makeLayoutInfo=function(){var a=this._model,n=this._rect,s=["x","y"],l=["width","height"],c=a.get("layout"),u=c==="horizontal"?0:1,d=n[l[u]],h=[0,d],f=this.dimensions.length,p=restrict(a.get("axisExpandWidth"),h),g=restrict(a.get("axisExpandCount")||0,[0,f]),v=a.get("axisExpandable")&&f>3&&f>g&&g>1&&p>0&&d>0,b=a.get("axisExpandWindow"),w;if(b)w=restrict(b[1]-b[0],h),b[1]=b[0]+w;else{w=restrict(p*(g-1),h);var x=a.get("axisExpandCenter")||mathFloor(f/2);b=[p*x-w/2],b[1]=b[0]+w}var S=(d-w)/(f-g);S<3&&(S=0);var E=[mathFloor(round(b[0]/p,1))+1,mathCeil(round(b[1]/p,1))-1],T=S/p*b[0];return{layout:c,pixelDimIndex:u,layoutBase:n[s[u]],layoutLength:d,axisBase:n[s[1-u]],axisLength:n[l[1-u]],axisExpandable:v,axisExpandWidth:p,axisCollapseWidth:S,axisExpandWindow:b,axisCount:f,winInnerIndices:E,axisExpandWindow0Pos:T}},o.prototype._layoutAxes=function(){var a=this._rect,n=this._axesMap,s=this.dimensions,l=this._makeLayoutInfo(),c=l.layout;n.each(function(u){var d=[0,l.axisLength],h=u.inverse?1:0;u.setExtent(d[h],d[1-h])}),each$a(s,function(u,d){var h=(l.axisExpandable?layoutAxisWithExpand:layoutAxisWithoutExpand)(d,l),f={horizontal:{x:h.position,y:l.axisLength},vertical:{x:0,y:h.position}},p={horizontal:PI$1/2,vertical:0},g=[f[c].x+a.x,f[c].y+a.y],v=p[c],b=create$1();rotate(b,b,v),translate(b,b,g),this._axesLayout[u]={position:g,rotation:v,transform:b,axisNameAvailableWidth:h.axisNameAvailableWidth,axisLabelShow:h.axisLabelShow,nameTruncateMaxWidth:h.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},o.prototype.getAxis=function(a){return this._axesMap.get(a)},o.prototype.dataToPoint=function(a,n){return this.axisCoordToPoint(this._axesMap.get(n).dataToCoord(a),n)},o.prototype.eachActiveState=function(a,n,s,l){s==null&&(s=0),l==null&&(l=a.count());var c=this._axesMap,u=this.dimensions,d=[],h=[];each$f(u,function(S){d.push(a.mapDimension(S)),h.push(c.get(S).model)});for(var f=this.hasAxisBrushed(),p=s;p<l;p++){var g=void 0;if(!f)g="normal";else{g="active";for(var v=a.getValues(d,p),b=0,w=u.length;b<w;b++){var x=h[b].getActiveState(v[b]);if(x==="inactive"){g="inactive";break}}}n(g,p)}},o.prototype.hasAxisBrushed=function(){for(var a=this.dimensions,n=this._axesMap,s=!1,l=0,c=a.length;l<c;l++)n.get(a[l]).model.getActiveState()!=="normal"&&(s=!0);return s},o.prototype.axisCoordToPoint=function(a,n){var s=this._axesLayout[n];return applyTransform([a,0],s.transform)},o.prototype.getAxisLayout=function(a){return clone$4(this._axesLayout[a])},o.prototype.getSlidedAxisExpandWindow=function(a){var n=this._makeLayoutInfo(),s=n.pixelDimIndex,l=n.axisExpandWindow.slice(),c=l[1]-l[0],u=[0,n.axisExpandWidth*(n.axisCount-1)];if(!this.containPoint(a))return{behavior:"none",axisExpandWindow:l};var d=a[s]-n.layoutBase-n.axisExpandWindow0Pos,h,f="slide",p=n.axisCollapseWidth,g=this._model.get("axisExpandSlideTriggerArea"),v=g[0]!=null;if(p)v&&p&&d<c*g[0]?(f="jump",h=d-c*g[2]):v&&p&&d>c*(1-g[0])?(f="jump",h=d-c*(1-g[2])):(h=d-c*g[1])>=0&&(h=d-c*(1-g[1]))<=0&&(h=0),h*=n.axisExpandWidth/p,h?sliderMove(h,l,u,"all"):f="none";else{var b=l[1]-l[0],w=u[1]*d/b;l=[mathMax$2(0,w-b/2)],l[1]=mathMin$2(u[1],l[0]+b),l[0]=l[1]-b}return{axisExpandWindow:l,behavior:f}},o}();function restrict(o,a){return mathMin$2(mathMax$2(o,a[0]),a[1])}function layoutAxisWithoutExpand(o,a){var n=a.layoutLength/(a.axisCount-1);return{position:n*o,axisNameAvailableWidth:n,axisLabelShow:!0}}function layoutAxisWithExpand(o,a){var n=a.layoutLength,s=a.axisExpandWidth,l=a.axisCount,c=a.axisCollapseWidth,u=a.winInnerIndices,d,h=c,f=!1,p;return o<u[0]?(d=o*c,p=c):o<=u[1]?(d=a.axisExpandWindow0Pos+o*s-a.axisExpandWindow[0],h=s,f=!0):(d=n-(l-1-o)*c,p=c),{position:d,axisNameAvailableWidth:h,axisLabelShow:f,nameTruncateMaxWidth:p}}function createParallelCoordSys(o,a){var n=[];return o.eachComponent("parallel",function(s,l){var c=new Parallel(s,o,a);c.name="parallel_"+l,c.resize(s,a),s.coordinateSystem=c,c.model=s,n.push(c)}),o.eachSeries(function(s){if(s.get("coordinateSystem")==="parallel"){var l=s.getReferringComponents("parallel",SINGLE_REFERRING).models[0];s.coordinateSystem=l.coordinateSystem}}),n}var parallelCoordSysCreator={create:createParallelCoordSys},ParallelAxisModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.activeIntervals=[],n}return a.prototype.getAreaSelectStyle=function(){return makeStyleMapper([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},a.prototype.setActiveIntervals=function(n){var s=this.activeIntervals=clone$4(n);if(s)for(var l=s.length-1;l>=0;l--)asc$2(s[l])},a.prototype.getActiveState=function(n){var s=this.activeIntervals;if(!s.length)return"normal";if(n==null||isNaN(+n))return"inactive";if(s.length===1){var l=s[0];if(l[0]<=n&&n<=l[1])return"active"}else for(var c=0,u=s.length;c<u;c++)if(s[c][0]<=n&&n<=s[c][1])return"active";return"inactive"},a}(ComponentModel);mixin(ParallelAxisModel,AxisModelCommonMixin);var BRUSH_PANEL_GLOBAL=!0,mathMin$1=Math.min,mathMax$1=Math.max,mathPow=Math.pow,COVER_Z=1e4,UNSELECT_THRESHOLD=6,MIN_RESIZE_LINE_WIDTH=6,MUTEX_RESOURCE_KEY="globalPan",DIRECTION_MAP={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},CURSOR_MAP={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},DEFAULT_BRUSH_OPT={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},baseUID=0,BrushController=function(o){__extends$1(a,o);function a(n){var s=o.call(this)||this;return s._track=[],s._covers=[],s._handlers={},process.env.NODE_ENV!=="production"&&assert(n),s._zr=n,s.group=new Group$3,s._uid="brushController_"+baseUID++,each$f(pointerHandlers,function(l,c){this._handlers[c]=bind$1(l,this)},s),s}return a.prototype.enableBrush=function(n){return process.env.NODE_ENV!=="production"&&assert(this._mounted),this._brushType&&this._doDisableBrush(),n.brushType&&this._doEnableBrush(n),this},a.prototype._doEnableBrush=function(n){var s=this._zr;this._enableGlobalPan||take(s,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(l,c){s.on(c,l)}),this._brushType=n.brushType,this._brushOption=merge(clone$4(DEFAULT_BRUSH_OPT),n,!0)},a.prototype._doDisableBrush=function(){var n=this._zr;release(n,MUTEX_RESOURCE_KEY,this._uid),each$f(this._handlers,function(s,l){n.off(l,s)}),this._brushType=this._brushOption=null},a.prototype.setPanels=function(n){if(n&&n.length){var s=this._panels={};each$f(n,function(l){s[l.panelId]=clone$4(l)})}else this._panels=null;return this},a.prototype.mount=function(n){n=n||{},process.env.NODE_ENV!=="production"&&(this._mounted=!0),this._enableGlobalPan=n.enableGlobalPan;var s=this.group;return this._zr.add(s),s.attr({x:n.x||0,y:n.y||0,rotation:n.rotation||0,scaleX:n.scaleX||1,scaleY:n.scaleY||1}),this._transform=s.getLocalTransform(),this},a.prototype.updateCovers=function(n){process.env.NODE_ENV!=="production"&&assert(this._mounted),n=map$1(n,function(v){return merge(clone$4(DEFAULT_BRUSH_OPT),v,!0)});var s="\0-brush-index-",l=this._covers,c=this._covers=[],u=this,d=this._creatingCover;return new DataDiffer(l,n,f,h).add(p).update(p).remove(g).execute(),this;function h(v,b){return(v.id!=null?v.id:s+b)+"-"+v.brushType}function f(v,b){return h(v.__brushOption,b)}function p(v,b){var w=n[v];if(b!=null&&l[b]===d)c[v]=l[b];else{var x=c[v]=b!=null?(l[b].__brushOption=w,l[b]):endCreating(u,createCover(u,w));updateCoverAfterCreation(u,x)}}function g(v){l[v]!==d&&u.group.remove(l[v])}},a.prototype.unmount=function(){if(!(process.env.NODE_ENV!=="production"&&!this._mounted))return this.enableBrush(!1),clearCovers(this),this._zr.remove(this.group),process.env.NODE_ENV!=="production"&&(this._mounted=!1),this},a.prototype.dispose=function(){this.unmount(),this.off()},a}(Eventful);function createCover(o,a){var n=coverRenderers[a.brushType].createCover(o,a);return n.__brushOption=a,updateZ$1(n,a),o.group.add(n),n}function endCreating(o,a){var n=getCoverRenderer(a);return n.endCreating&&(n.endCreating(o,a),updateZ$1(a,a.__brushOption)),a}function updateCoverShape(o,a){var n=a.__brushOption;getCoverRenderer(a).updateCoverShape(o,a,n.range,n)}function updateZ$1(o,a){var n=a.z;n==null&&(n=COVER_Z),o.traverse(function(s){s.z=n,s.z2=n})}function updateCoverAfterCreation(o,a){getCoverRenderer(a).updateCommon(o,a),updateCoverShape(o,a)}function getCoverRenderer(o){return coverRenderers[o.__brushOption.brushType]}function getPanelByPoint(o,a,n){var s=o._panels;if(!s)return BRUSH_PANEL_GLOBAL;var l,c=o._transform;return each$f(s,function(u){u.isTargetByCursor(a,n,c)&&(l=u)}),l}function getPanelByCover(o,a){var n=o._panels;if(!n)return BRUSH_PANEL_GLOBAL;var s=a.__brushOption.panelId;return s!=null?n[s]:BRUSH_PANEL_GLOBAL}function clearCovers(o){var a=o._covers,n=a.length;return each$f(a,function(s){o.group.remove(s)},o),a.length=0,!!n}function trigger(o,a){var n=map$1(o._covers,function(s){var l=s.__brushOption,c=clone$4(l.range);return{brushType:l.brushType,panelId:l.panelId,range:c}});o.trigger("brush",{areas:n,isEnd:!!a.isEnd,removeOnClick:!!a.removeOnClick})}function shouldShowCover(o){var a=o._track;if(!a.length)return!1;var n=a[a.length-1],s=a[0],l=n[0]-s[0],c=n[1]-s[1],u=mathPow(l*l+c*c,.5);return u>UNSELECT_THRESHOLD}function getTrackEnds(o){var a=o.length-1;return a<0&&(a=0),[o[0],o[a]]}function createBaseRectCover(o,a,n,s){var l=new Group$3;return l.add(new Rect$2({name:"main",style:makeStyle(n),silent:!0,draggable:!0,cursor:"move",drift:curry$1(driftRect,o,a,l,["n","s","w","e"]),ondragend:curry$1(trigger,a,{isEnd:!0})})),each$f(s,function(c){l.add(new Rect$2({name:c.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:curry$1(driftRect,o,a,l,c),ondragend:curry$1(trigger,a,{isEnd:!0})}))}),l}function updateBaseRect(o,a,n,s){var l=s.brushStyle.lineWidth||0,c=mathMax$1(l,MIN_RESIZE_LINE_WIDTH),u=n[0][0],d=n[1][0],h=u-l/2,f=d-l/2,p=n[0][1],g=n[1][1],v=p-c+l/2,b=g-c+l/2,w=p-u,x=g-d,S=w+l,E=x+l;updateRectShape(o,a,"main",u,d,w,x),s.transformable&&(updateRectShape(o,a,"w",h,f,c,E),updateRectShape(o,a,"e",v,f,c,E),updateRectShape(o,a,"n",h,f,S,c),updateRectShape(o,a,"s",h,b,S,c),updateRectShape(o,a,"nw",h,f,c,c),updateRectShape(o,a,"ne",v,f,c,c),updateRectShape(o,a,"sw",h,b,c,c),updateRectShape(o,a,"se",v,b,c,c))}function updateCommon$1(o,a){var n=a.__brushOption,s=n.transformable,l=a.childAt(0);l.useStyle(makeStyle(n)),l.attr({silent:!s,cursor:s?"move":"default"}),each$f([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(c){var u=a.childOfName(c.join("")),d=c.length===1?getGlobalDirection1(o,c[0]):getGlobalDirection2(o,c);u&&u.attr({silent:!s,invisible:!s,cursor:s?CURSOR_MAP[d]+"-resize":null})})}function updateRectShape(o,a,n,s,l,c,u){var d=a.childOfName(n);d&&d.setShape(pointsToRect(clipByPanel(o,a,[[s,l],[s+c,l+u]])))}function makeStyle(o){return defaults({strokeNoScale:!0},o.brushStyle)}function formatRectRange(o,a,n,s){var l=[mathMin$1(o,n),mathMin$1(a,s)],c=[mathMax$1(o,n),mathMax$1(a,s)];return[[l[0],c[0]],[l[1],c[1]]]}function getTransform(o){return getTransform$1(o.group)}function getGlobalDirection1(o,a){var n={w:"left",e:"right",n:"top",s:"bottom"},s={left:"w",right:"e",top:"n",bottom:"s"},l=transformDirection(n[a],getTransform(o));return s[l]}function getGlobalDirection2(o,a){var n=[getGlobalDirection1(o,a[0]),getGlobalDirection1(o,a[1])];return(n[0]==="e"||n[0]==="w")&&n.reverse(),n.join("")}function driftRect(o,a,n,s,l,c){var u=n.__brushOption,d=o.toRectRange(u.range),h=toLocalDelta(a,l,c);each$f(s,function(f){var p=DIRECTION_MAP[f];d[p[0]][p[1]]+=h[p[0]]}),u.range=o.fromRectRange(formatRectRange(d[0][0],d[1][0],d[0][1],d[1][1])),updateCoverAfterCreation(a,n),trigger(a,{isEnd:!1})}function driftPolygon(o,a,n,s){var l=a.__brushOption.range,c=toLocalDelta(o,n,s);each$f(l,function(u){u[0]+=c[0],u[1]+=c[1]}),updateCoverAfterCreation(o,a),trigger(o,{isEnd:!1})}function toLocalDelta(o,a,n){var s=o.group,l=s.transformCoordToLocal(a,n),c=s.transformCoordToLocal(0,0);return[l[0]-c[0],l[1]-c[1]]}function clipByPanel(o,a,n){var s=getPanelByCover(o,a);return s&&s!==BRUSH_PANEL_GLOBAL?s.clipPath(n,o._transform):clone$4(n)}function pointsToRect(o){var a=mathMin$1(o[0][0],o[1][0]),n=mathMin$1(o[0][1],o[1][1]),s=mathMax$1(o[0][0],o[1][0]),l=mathMax$1(o[0][1],o[1][1]);return{x:a,y:n,width:s-a,height:l-n}}function resetCursor(o,a,n){if(!(!o._brushType||isOutsideZrArea(o,a.offsetX,a.offsetY))){var s=o._zr,l=o._covers,c=getPanelByPoint(o,a,n);if(!o._dragging)for(var u=0;u<l.length;u++){var d=l[u].__brushOption;if(c&&(c===BRUSH_PANEL_GLOBAL||d.panelId===c.panelId)&&coverRenderers[d.brushType].contain(l[u],n[0],n[1]))return}c&&s.setCursorStyle("crosshair")}}function preventDefault(o){var a=o.event;a.preventDefault&&a.preventDefault()}function mainShapeContain(o,a,n){return o.childOfName("main").contain(a,n)}function updateCoverByMouse(o,a,n,s){var l=o._creatingCover,c=o._creatingPanel,u=o._brushOption,d;if(o._track.push(n.slice()),shouldShowCover(o)||l){if(c&&!l){u.brushMode==="single"&&clearCovers(o);var h=clone$4(u);h.brushType=determineBrushType(h.brushType,c),h.panelId=c===BRUSH_PANEL_GLOBAL?null:c.panelId,l=o._creatingCover=createCover(o,h),o._covers.push(l)}if(l){var f=coverRenderers[determineBrushType(o._brushType,c)],p=l.__brushOption;p.range=f.getCreatingRange(clipByPanel(o,l,o._track)),s&&(endCreating(o,l),f.updateCommon(o,l)),updateCoverShape(o,l),d={isEnd:s}}}else s&&u.brushMode==="single"&&u.removeOnClick&&getPanelByPoint(o,a,n)&&clearCovers(o)&&(d={isEnd:s,removeOnClick:!0});return d}function determineBrushType(o,a){return o==="auto"?(process.env.NODE_ENV!=="production"&&assert(a&&a.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),a.defaultBrushType):o}var pointerHandlers={mousedown:function(o){if(this._dragging)handleDragEnd(this,o);else if(!o.target||!o.target.draggable){preventDefault(o);var a=this.group.transformCoordToLocal(o.offsetX,o.offsetY);this._creatingCover=null;var n=this._creatingPanel=getPanelByPoint(this,o,a);n&&(this._dragging=!0,this._track=[a.slice()])}},mousemove:function(o){var a=o.offsetX,n=o.offsetY,s=this.group.transformCoordToLocal(a,n);if(resetCursor(this,o,s),this._dragging){preventDefault(o);var l=updateCoverByMouse(this,o,s,!1);l&&trigger(this,l)}},mouseup:function(o){handleDragEnd(this,o)}};function handleDragEnd(o,a){if(o._dragging){preventDefault(a);var n=a.offsetX,s=a.offsetY,l=o.group.transformCoordToLocal(n,s),c=updateCoverByMouse(o,a,l,!0);o._dragging=!1,o._track=[],o._creatingCover=null,c&&trigger(o,c)}}function isOutsideZrArea(o,a,n){var s=o._zr;return a<0||a>s.getWidth()||n<0||n>s.getHeight()}var coverRenderers={lineX:getLineRenderer(0),lineY:getLineRenderer(1),rect:{createCover:function(o,a){function n(s){return s}return createBaseRectCover({toRectRange:n,fromRectRange:n},o,a,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(o){var a=getTrackEnds(o);return formatRectRange(a[1][0],a[1][1],a[0][0],a[0][1])},updateCoverShape:function(o,a,n,s){updateBaseRect(o,a,n,s)},updateCommon:updateCommon$1,contain:mainShapeContain},polygon:{createCover:function(o,a){var n=new Group$3;return n.add(new Polyline$1({name:"main",style:makeStyle(a),silent:!0})),n},getCreatingRange:function(o){return o},endCreating:function(o,a){a.remove(a.childAt(0)),a.add(new Polygon({name:"main",draggable:!0,drift:curry$1(driftPolygon,o,a),ondragend:curry$1(trigger,o,{isEnd:!0})}))},updateCoverShape:function(o,a,n,s){a.childAt(0).setShape({points:clipByPanel(o,a,n)})},updateCommon:updateCommon$1,contain:mainShapeContain}};function getLineRenderer(o){return{createCover:function(a,n){return createBaseRectCover({toRectRange:function(s){var l=[s,[0,100]];return o&&l.reverse(),l},fromRectRange:function(s){return s[o]}},a,n,[[["w"],["e"]],[["n"],["s"]]][o])},getCreatingRange:function(a){var n=getTrackEnds(a),s=mathMin$1(n[0][o],n[1][o]),l=mathMax$1(n[0][o],n[1][o]);return[s,l]},updateCoverShape:function(a,n,s,l){var c,u=getPanelByCover(a,n);if(u!==BRUSH_PANEL_GLOBAL&&u.getLinearBrushOtherExtent)c=u.getLinearBrushOtherExtent(o);else{var d=a._zr;c=[0,[d.getWidth(),d.getHeight()][1-o]]}var h=[s,c];o&&h.reverse(),updateBaseRect(a,n,h,l)},updateCommon:updateCommon$1,contain:mainShapeContain}}function makeRectPanelClipPath(o){return o=normalizeRect(o),function(a){return clipPointsByRect(a,o)}}function makeLinearBrushOtherExtent(o,a){return o=normalizeRect(o),function(n){var s=a??n,l=s?o.width:o.height,c=s?o.x:o.y;return[c,c+(l||0)]}}function makeRectIsTargetByCursor(o,a,n){var s=normalizeRect(o);return function(l,c){return s.contain(c[0],c[1])&&!onIrrelevantElement(l,a,n)}}function normalizeRect(o){return BoundingRect.create(o)}var elementList$1=["axisLine","axisTickLabel","axisName"],ParallelAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s){o.prototype.init.apply(this,arguments),(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this))},a.prototype.render=function(n,s,l,c){if(!fromAxisAreaSelect(n,s,c)){this.axisModel=n,this.api=l,this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new Group$3,this.group.add(this._axisGroup),!!n.get("show")){var d=getCoordSysModel(n,s),h=d.coordinateSystem,f=n.getAreaSelectStyle(),p=f.width,g=n.axis.dim,v=h.getAxisLayout(g),b=extend({strokeContainThreshold:p},v),w=new AxisBuilder(n,b);each$f(elementList$1,w.add,w),this._axisGroup.add(w.getGroup()),this._refreshBrushController(b,f,n,d,p,l),groupTransition(u,this._axisGroup,n)}}},a.prototype._refreshBrushController=function(n,s,l,c,u,d){var h=l.axis.getExtent(),f=h[1]-h[0],p=Math.min(30,Math.abs(f)*.1),g=BoundingRect.create({x:h[0],y:-u/2,width:f,height:u});g.x-=p,g.width+=2*p,this._brushController.mount({enableGlobalPan:!0,rotation:n.rotation,x:n.position[0],y:n.position[1]}).setPanels([{panelId:"pl",clipPath:makeRectPanelClipPath(g),isTargetByCursor:makeRectIsTargetByCursor(g,d,c),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(g,0)}]).enableBrush({brushType:"lineX",brushStyle:s,removeOnClick:!0}).updateCovers(getCoverInfoList(l))},a.prototype._onBrush=function(n){var s=n.areas,l=this.axisModel,c=l.axis,u=map$1(s,function(d){return[c.coordToData(d.range[0],!0),c.coordToData(d.range[1],!0)]});(!l.option.realtime===n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:l.id,intervals:u})},a.prototype.dispose=function(){this._brushController.dispose()},a.type="parallelAxis",a}(ComponentView);function fromAxisAreaSelect(o,a,n){return n&&n.type==="axisAreaSelect"&&a.findComponents({mainType:"parallelAxis",query:n})[0]===o}function getCoverInfoList(o){var a=o.axis;return map$1(o.activeIntervals,function(n){return{brushType:"lineX",panelId:"pl",range:[a.dataToCoord(n[0],!0),a.dataToCoord(n[1],!0)]}})}function getCoordSysModel(o,a){return a.getComponent("parallel",o.get("parallelIndex"))}var actionInfo={type:"axisAreaSelect",event:"axisAreaSelected"};function installParallelActions(o){o.registerAction(actionInfo,function(a,n){n.eachComponent({mainType:"parallelAxis",query:a},function(s){s.axis.model.setActiveIntervals(a.intervals)})}),o.registerAction("parallelAxisExpand",function(a,n){n.eachComponent({mainType:"parallel",query:a},function(s){s.setAxisExpand(a)})})}var defaultAxisOption={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function install$C(o){o.registerComponentView(ParallelView),o.registerComponentModel(ParallelModel),o.registerCoordinateSystem("parallel",parallelCoordSysCreator),o.registerPreprocessor(parallelPreprocessor),o.registerComponentModel(ParallelAxisModel),o.registerComponentView(ParallelAxisView),axisModelCreator(o,"parallel",ParallelAxisModel,defaultAxisOption),installParallelActions(o)}function install$B(o){use(install$C),o.registerChartView(ParallelView$1),o.registerSeriesModel(ParallelSeriesModel),o.registerVisual(o.PRIORITY.VISUAL.BRUSH,parallelVisual)}var SankeyPathShape=function(){function o(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return o}(),SankeyPath=function(o){__extends$1(a,o);function a(n){return o.call(this,n)||this}return a.prototype.getDefaultShape=function(){return new SankeyPathShape},a.prototype.buildPath=function(n,s){var l=s.extent;n.moveTo(s.x1,s.y1),n.bezierCurveTo(s.cpx1,s.cpy1,s.cpx2,s.cpy2,s.x2,s.y2),s.orient==="vertical"?(n.lineTo(s.x2+l,s.y2),n.bezierCurveTo(s.cpx2+l,s.cpy2,s.cpx1+l,s.cpy1,s.x1+l,s.y1)):(n.lineTo(s.x2,s.y2+l),n.bezierCurveTo(s.cpx2,s.cpy2+l,s.cpx1,s.cpy1+l,s.x1,s.y1+l)),n.closePath()},a.prototype.highlight=function(){enterEmphasis(this)},a.prototype.downplay=function(){leaveEmphasis(this)},a}(Path),SankeyView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._focusAdjacencyDisabled=!1,n}return a.prototype.render=function(n,s,l){var c=this,u=n.getGraph(),d=this.group,h=n.layoutInfo,f=h.width,p=h.height,g=n.getData(),v=n.getData("edge"),b=n.get("orient");this._model=n,d.removeAll(),d.x=h.x,d.y=h.y,u.eachEdge(function(w){var x=new SankeyPath,S=getECData(x);S.dataIndex=w.dataIndex,S.seriesIndex=n.seriesIndex,S.dataType="edge";var E=w.getModel(),T=E.getModel("lineStyle"),C=T.get("curveness"),A=w.node1.getLayout(),R=w.node1.getModel(),j=R.get("localX"),D=R.get("localY"),O=w.node2.getLayout(),H=w.node2.getModel(),q=H.get("localX"),Y=H.get("localY"),te=w.getLayout(),ee,re,ne,ce,ve,be,me,ae;x.shape.extent=Math.max(1,te.dy),x.shape.orient=b,b==="vertical"?(ee=(j!=null?j*f:A.x)+te.sy,re=(D!=null?D*p:A.y)+A.dy,ne=(q!=null?q*f:O.x)+te.ty,ce=Y!=null?Y*p:O.y,ve=ee,be=re*(1-C)+ce*C,me=ne,ae=re*C+ce*(1-C)):(ee=(j!=null?j*f:A.x)+A.dx,re=(D!=null?D*p:A.y)+te.sy,ne=q!=null?q*f:O.x,ce=(Y!=null?Y*p:O.y)+te.ty,ve=ee*(1-C)+ne*C,be=re,me=ee*C+ne*(1-C),ae=ce),x.setShape({x1:ee,y1:re,x2:ne,y2:ce,cpx1:ve,cpy1:be,cpx2:me,cpy2:ae}),x.useStyle(T.getItemStyle()),applyCurveStyle(x.style,b,w);var pe=""+E.get("value"),ie=getLabelStatesModels(E,"edgeLabel");setLabelStyle(x,ie,{labelFetcher:{getFormattedLabel:function(le,ge,Re,we,Se,xe){return n.getFormattedLabel(le,ge,"edge",we,retrieve3(Se,ie.normal&&ie.normal.get("formatter"),pe),xe)}},labelDataIndex:w.dataIndex,defaultText:pe}),x.setTextConfig({position:"inside"});var se=E.getModel("emphasis");setStatesStylesFromModel(x,E,"lineStyle",function(le){var ge=le.getItemStyle();return applyCurveStyle(ge,b,w),ge}),d.add(x),v.setItemGraphicEl(w.dataIndex,x);var de=se.get("focus");toggleHoverEmphasis(x,de==="adjacency"?w.getAdjacentDataIndices():de==="trajectory"?w.getTrajectoryDataIndices():de,se.get("blurScope"),se.get("disabled"))}),u.eachNode(function(w){var x=w.getLayout(),S=w.getModel(),E=S.get("localX"),T=S.get("localY"),C=S.getModel("emphasis"),A=S.get(["itemStyle","borderRadius"])||0,R=new Rect$2({shape:{x:E!=null?E*f:x.x,y:T!=null?T*p:x.y,width:x.dx,height:x.dy,r:A},style:S.getModel("itemStyle").getItemStyle(),z2:10});setLabelStyle(R,getLabelStatesModels(S),{labelFetcher:{getFormattedLabel:function(D,O){return n.getFormattedLabel(D,O,"node")}},labelDataIndex:w.dataIndex,defaultText:w.id}),R.disableLabelAnimation=!0,R.setStyle("fill",w.getVisual("color")),R.setStyle("decal",w.getVisual("style").decal),setStatesStylesFromModel(R,S),d.add(R),g.setItemGraphicEl(w.dataIndex,R),getECData(R).dataType="node";var j=C.get("focus");toggleHoverEmphasis(R,j==="adjacency"?w.getAdjacentDataIndices():j==="trajectory"?w.getTrajectoryDataIndices():j,C.get("blurScope"),C.get("disabled"))}),g.eachItemGraphicEl(function(w,x){var S=g.getItemModel(x);S.get("draggable")&&(w.drift=function(E,T){c._focusAdjacencyDisabled=!0,this.shape.x+=E,this.shape.y+=T,this.dirty(),l.dispatchAction({type:"dragNode",seriesId:n.id,dataIndex:g.getRawIndex(x),localX:this.shape.x/f,localY:this.shape.y/p})},w.ondragend=function(){c._focusAdjacencyDisabled=!1},w.draggable=!0,w.cursor="move")}),!this._data&&n.isAnimationEnabled()&&d.setClipPath(createGridClipShape$1(d.getBoundingRect(),n,function(){d.removeClipPath()})),this._data=n.getData()},a.prototype.dispose=function(){},a.type="sankey",a}(ChartView);function applyCurveStyle(o,a,n){switch(o.fill){case"source":o.fill=n.node1.getVisual("color"),o.decal=n.node1.getVisual("style").decal;break;case"target":o.fill=n.node2.getVisual("color"),o.decal=n.node2.getVisual("style").decal;break;case"gradient":var s=n.node1.getVisual("color"),l=n.node2.getVisual("color");isString$2(s)&&isString$2(l)&&(o.fill=new LinearGradient(0,0,+(a==="horizontal"),+(a==="vertical"),[{color:s,offset:0},{color:l,offset:1}]))}}function createGridClipShape$1(o,a,n){var s=new Rect$2({shape:{x:o.x-10,y:o.y-10,width:0,height:o.height+20}});return initProps(s,{shape:{width:o.width+20}},a,n),s}var SankeySeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.getInitialData=function(n,s){var l=n.edges||n.links||[],c=n.data||n.nodes||[],u=n.levels||[];this.levelModels=[];for(var d=this.levelModels,h=0;h<u.length;h++)if(u[h].depth!=null&&u[h].depth>=0)d[u[h].depth]=new Model(u[h],this,s);else if(process.env.NODE_ENV!=="production")throw new Error("levels[i].depth is mandatory and should be natural number");var f=createGraphFromNodeEdge(c,l,this,!0,p);return f.data;function p(g,v){g.wrapMethod("getItemModel",function(b,w){var x=b.parentModel,S=x.getData().getItemLayout(w);if(S){var E=S.depth,T=x.levelModels[E];T&&(b.parentModel=T)}return b}),v.wrapMethod("getItemModel",function(b,w){var x=b.parentModel,S=x.getGraph().getEdgeByIndex(w),E=S.node1.getLayout();if(E){var T=E.depth,C=x.levelModels[T];C&&(b.parentModel=C)}return b})}},a.prototype.setNodePosition=function(n,s){var l=this.option.data||this.option.nodes,c=l[n];c.localX=s[0],c.localY=s[1]},a.prototype.getGraph=function(){return this.getData().graph},a.prototype.getEdgeData=function(){return this.getGraph().edgeData},a.prototype.formatTooltip=function(n,s,l){function c(b){return isNaN(b)||b==null}if(l==="edge"){var u=this.getDataParams(n,l),d=u.data,h=u.value,f=d.source+" -- "+d.target;return createTooltipMarkup("nameValue",{name:f,value:h,noValue:c(h)})}else{var p=this.getGraph().getNodeByIndex(n),g=p.getLayout().value,v=this.getDataParams(n,l).data.name;return createTooltipMarkup("nameValue",{name:v!=null?v+"":null,value:g,noValue:c(g)})}},a.prototype.optionUpdated=function(){},a.prototype.getDataParams=function(n,s){var l=o.prototype.getDataParams.call(this,n,s);if(l.value==null&&s==="node"){var c=this.getGraph().getNodeByIndex(n),u=c.getLayout().value;l.value=u}return l},a.type="series.sankey",a.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},a}(SeriesModel);function sankeyLayout(o,a){o.eachSeriesByType("sankey",function(n){var s=n.get("nodeWidth"),l=n.get("nodeGap"),c=getViewRect$1(n,a);n.layoutInfo=c;var u=c.width,d=c.height,h=n.getGraph(),f=h.nodes,p=h.edges;computeNodeValues(f);var g=filter(f,function(x){return x.getLayout().value===0}),v=g.length!==0?0:n.get("layoutIterations"),b=n.get("orient"),w=n.get("nodeAlign");layoutSankey(f,p,s,l,u,d,v,b,w)})}function getViewRect$1(o,a){return getLayoutRect(o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()})}function layoutSankey(o,a,n,s,l,c,u,d,h){computeNodeBreadths(o,a,n,l,c,d,h),computeNodeDepths(o,a,c,l,s,u,d),computeEdgeDepths(o,d)}function computeNodeValues(o){each$f(o,function(a){var n=sum(a.outEdges,getEdgeValue),s=sum(a.inEdges,getEdgeValue),l=a.getValue()||0,c=Math.max(n,s,l);a.setLayout({value:c},!0)})}function computeNodeBreadths(o,a,n,s,l,c,u){for(var d=[],h=[],f=[],p=[],g=0,v=0;v<a.length;v++)d[v]=1;for(var v=0;v<o.length;v++)h[v]=o[v].inEdges.length,h[v]===0&&f.push(o[v]);for(var b=-1;f.length;){for(var w=0;w<f.length;w++){var x=f[w],S=x.hostGraph.data.getRawDataItem(x.dataIndex),E=S.depth!=null&&S.depth>=0;E&&S.depth>b&&(b=S.depth),x.setLayout({depth:E?S.depth:g},!0),c==="vertical"?x.setLayout({dy:n},!0):x.setLayout({dx:n},!0);for(var T=0;T<x.outEdges.length;T++){var C=x.outEdges[T],A=a.indexOf(C);d[A]=0;var R=C.node2,j=o.indexOf(R);--h[j]===0&&p.indexOf(R)<0&&p.push(R)}}++g,f=p,p=[]}for(var v=0;v<d.length;v++)if(d[v]===1)throw new Error("Sankey is a DAG, the original data has cycle!");var D=b>g-1?b:g-1;u&&u!=="left"&&adjustNodeWithNodeAlign(o,u,c,D);var O=c==="vertical"?(l-n)/D:(s-n)/D;scaleNodeBreadths(o,O,c)}function isNodeDepth(o){var a=o.hostGraph.data.getRawDataItem(o.dataIndex);return a.depth!=null&&a.depth>=0}function adjustNodeWithNodeAlign(o,a,n,s){if(a==="right"){for(var l=[],c=o,u=0;c.length;){for(var d=0;d<c.length;d++){var h=c[d];h.setLayout({skNodeHeight:u},!0);for(var f=0;f<h.inEdges.length;f++){var p=h.inEdges[f];l.indexOf(p.node1)<0&&l.push(p.node1)}}c=l,l=[],++u}each$f(o,function(g){isNodeDepth(g)||g.setLayout({depth:Math.max(0,s-g.getLayout().skNodeHeight)},!0)})}else a==="justify"&&moveSinksRight(o,s)}function moveSinksRight(o,a){each$f(o,function(n){!isNodeDepth(n)&&!n.outEdges.length&&n.setLayout({depth:a},!0)})}function scaleNodeBreadths(o,a,n){each$f(o,function(s){var l=s.getLayout().depth*a;n==="vertical"?s.setLayout({y:l},!0):s.setLayout({x:l},!0)})}function computeNodeDepths(o,a,n,s,l,c,u){var d=prepareNodesByBreadth(o,u);initializeNodeDepth(d,a,n,s,l,u),resolveCollisions(d,l,n,s,u);for(var h=1;c>0;c--)h*=.99,relaxRightToLeft(d,h,u),resolveCollisions(d,l,n,s,u),relaxLeftToRight(d,h,u),resolveCollisions(d,l,n,s,u)}function prepareNodesByBreadth(o,a){var n=[],s=a==="vertical"?"y":"x",l=groupData(o,function(c){return c.getLayout()[s]});return l.keys.sort(function(c,u){return c-u}),each$f(l.keys,function(c){n.push(l.buckets.get(c))}),n}function initializeNodeDepth(o,a,n,s,l,c){var u=1/0;each$f(o,function(d){var h=d.length,f=0;each$f(d,function(g){f+=g.getLayout().value});var p=c==="vertical"?(s-(h-1)*l)/f:(n-(h-1)*l)/f;p<u&&(u=p)}),each$f(o,function(d){each$f(d,function(h,f){var p=h.getLayout().value*u;c==="vertical"?(h.setLayout({x:f},!0),h.setLayout({dx:p},!0)):(h.setLayout({y:f},!0),h.setLayout({dy:p},!0))})}),each$f(a,function(d){var h=+d.getValue()*u;d.setLayout({dy:h},!0)})}function resolveCollisions(o,a,n,s,l){var c=l==="vertical"?"x":"y";each$f(o,function(u){u.sort(function(x,S){return x.getLayout()[c]-S.getLayout()[c]});for(var d,h,f,p=0,g=u.length,v=l==="vertical"?"dx":"dy",b=0;b<g;b++)h=u[b],f=p-h.getLayout()[c],f>0&&(d=h.getLayout()[c]+f,l==="vertical"?h.setLayout({x:d},!0):h.setLayout({y:d},!0)),p=h.getLayout()[c]+h.getLayout()[v]+a;var w=l==="vertical"?s:n;if(f=p-a-w,f>0){d=h.getLayout()[c]-f,l==="vertical"?h.setLayout({x:d},!0):h.setLayout({y:d},!0),p=d;for(var b=g-2;b>=0;--b)h=u[b],f=h.getLayout()[c]+h.getLayout()[v]+a-p,f>0&&(d=h.getLayout()[c]-f,l==="vertical"?h.setLayout({x:d},!0):h.setLayout({y:d},!0)),p=h.getLayout()[c]}})}function relaxRightToLeft(o,a,n){each$f(o.slice().reverse(),function(s){each$f(s,function(l){if(l.outEdges.length){var c=sum(l.outEdges,weightedTarget,n)/sum(l.outEdges,getEdgeValue);if(isNaN(c)){var u=l.outEdges.length;c=u?sum(l.outEdges,centerTarget,n)/u:0}if(n==="vertical"){var d=l.getLayout().x+(c-center(l,n))*a;l.setLayout({x:d},!0)}else{var h=l.getLayout().y+(c-center(l,n))*a;l.setLayout({y:h},!0)}}})})}function weightedTarget(o,a){return center(o.node2,a)*o.getValue()}function centerTarget(o,a){return center(o.node2,a)}function weightedSource(o,a){return center(o.node1,a)*o.getValue()}function centerSource(o,a){return center(o.node1,a)}function center(o,a){return a==="vertical"?o.getLayout().x+o.getLayout().dx/2:o.getLayout().y+o.getLayout().dy/2}function getEdgeValue(o){return o.getValue()}function sum(o,a,n){for(var s=0,l=o.length,c=-1;++c<l;){var u=+a(o[c],n);isNaN(u)||(s+=u)}return s}function relaxLeftToRight(o,a,n){each$f(o,function(s){each$f(s,function(l){if(l.inEdges.length){var c=sum(l.inEdges,weightedSource,n)/sum(l.inEdges,getEdgeValue);if(isNaN(c)){var u=l.inEdges.length;c=u?sum(l.inEdges,centerSource,n)/u:0}if(n==="vertical"){var d=l.getLayout().x+(c-center(l,n))*a;l.setLayout({x:d},!0)}else{var h=l.getLayout().y+(c-center(l,n))*a;l.setLayout({y:h},!0)}}})})}function computeEdgeDepths(o,a){var n=a==="vertical"?"x":"y";each$f(o,function(s){s.outEdges.sort(function(l,c){return l.node2.getLayout()[n]-c.node2.getLayout()[n]}),s.inEdges.sort(function(l,c){return l.node1.getLayout()[n]-c.node1.getLayout()[n]})}),each$f(o,function(s){var l=0,c=0;each$f(s.outEdges,function(u){u.setLayout({sy:l},!0),l+=u.getLayout().dy}),each$f(s.inEdges,function(u){u.setLayout({ty:c},!0),c+=u.getLayout().dy})})}function sankeyVisual(o){o.eachSeriesByType("sankey",function(a){var n=a.getGraph(),s=n.nodes,l=n.edges;if(s.length){var c=1/0,u=-1/0;each$f(s,function(d){var h=d.getLayout().value;h<c&&(c=h),h>u&&(u=h)}),each$f(s,function(d){var h=new VisualMapping({type:"color",mappingMethod:"linear",dataExtent:[c,u],visual:a.get("color")}),f=h.mapValueToVisual(d.getLayout().value),p=d.getModel().get(["itemStyle","color"]);p!=null?(d.setVisual("color",p),d.setVisual("style",{fill:p})):(d.setVisual("color",f),d.setVisual("style",{fill:f}))})}l.length&&each$f(l,function(d){var h=d.getModel().get("lineStyle");d.setVisual("style",h)})})}function install$A(o){o.registerChartView(SankeyView),o.registerSeriesModel(SankeySeriesModel),o.registerLayout(sankeyLayout),o.registerVisual(sankeyVisual),o.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(a,n){n.eachComponent({mainType:"series",subType:"sankey",query:a},function(s){s.setNodePosition(a.dataIndex,[a.localX,a.localY])})})}var WhiskerBoxCommonMixin=function(){function o(){}return o.prototype._hasEncodeRule=function(a){var n=this.getEncode();return n&&n.get(a)!=null},o.prototype.getInitialData=function(a,n){var s,l=n.getComponent("xAxis",this.get("xAxisIndex")),c=n.getComponent("yAxis",this.get("yAxisIndex")),u=l.get("type"),d=c.get("type"),h;u==="category"?(a.layout="horizontal",s=l.getOrdinalMeta(),h=!this._hasEncodeRule("x")):d==="category"?(a.layout="vertical",s=c.getOrdinalMeta(),h=!this._hasEncodeRule("y")):a.layout=a.layout||"horizontal";var f=["x","y"],p=a.layout==="horizontal"?0:1,g=this._baseAxisDim=f[p],v=f[1-p],b=[l,c],w=b[p].get("type"),x=b[1-p].get("type"),S=a.data;if(S&&h){var E=[];each$f(S,function(A,R){var j;isArray$1(A)?(j=A.slice(),A.unshift(R)):isArray$1(A.value)?(j=extend({},A),j.value=j.value.slice(),A.value.unshift(R)):j=A,E.push(j)}),a.data=E}var T=this.defaultValueDimensions,C=[{name:g,type:getDimensionTypeByAxis(w),ordinalMeta:s,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:v,type:getDimensionTypeByAxis(x),dimsDef:T.slice()}];return createSeriesDataSimply(this,{coordDimensions:C,dimensionsCount:T.length+1,encodeDefaulter:curry$1(makeSeriesEncodeForAxisCoordSys,C,this)})},o.prototype.getBaseAxis=function(){var a=this._baseAxisDim;return this.ecModel.getComponent(a+"Axis",this.get(a+"AxisIndex")).axis},o}(),BoxplotSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return a.type="series.boxplot",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},a}(SeriesModel);mixin(BoxplotSeriesModel,WhiskerBoxCommonMixin,!0);var BoxplotView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=n.getData(),u=this.group,d=this._data;this._data||u.removeAll();var h=n.get("layout")==="horizontal"?1:0;c.diff(d).add(function(f){if(c.hasValue(f)){var p=c.getItemLayout(f),g=createNormalBox$1(p,c,f,h,!0);c.setItemGraphicEl(f,g),u.add(g)}}).update(function(f,p){var g=d.getItemGraphicEl(p);if(!c.hasValue(f)){u.remove(g);return}var v=c.getItemLayout(f);g?(saveOldStyle(g),updateNormalBoxData(v,g,c,f)):g=createNormalBox$1(v,c,f,h),u.add(g),c.setItemGraphicEl(f,g)}).remove(function(f){var p=d.getItemGraphicEl(f);p&&u.remove(p)}).execute(),this._data=c},a.prototype.remove=function(n){var s=this.group,l=this._data;this._data=null,l&&l.eachItemGraphicEl(function(c){c&&s.remove(c)})},a.type="boxplot",a}(ChartView),BoxPathShape=function(){function o(){}return o}(),BoxPath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="boxplotBoxPath",s}return a.prototype.getDefaultShape=function(){return new BoxPathShape},a.prototype.buildPath=function(n,s){var l=s.points,c=0;for(n.moveTo(l[c][0],l[c][1]),c++;c<4;c++)n.lineTo(l[c][0],l[c][1]);for(n.closePath();c<l.length;c++)n.moveTo(l[c][0],l[c][1]),c++,n.lineTo(l[c][0],l[c][1])},a}(Path);function createNormalBox$1(o,a,n,s,l){var c=o.ends,u=new BoxPath({shape:{points:l?transInit$1(c,s,o):c}});return updateNormalBoxData(o,u,a,n,l),u}function updateNormalBoxData(o,a,n,s,l){var c=n.hostModel,u=graphic$1[l?"initProps":"updateProps"];u(a,{shape:{points:o.ends}},c,s),a.useStyle(n.getItemVisual(s,"style")),a.style.strokeNoScale=!0,a.z2=100;var d=n.getItemModel(s),h=d.getModel("emphasis");setStatesStylesFromModel(a,d),toggleHoverEmphasis(a,h.get("focus"),h.get("blurScope"),h.get("disabled"))}function transInit$1(o,a,n){return map$1(o,function(s){return s=s.slice(),s[a]=n.initBaseline,s})}var each$9=each$f;function boxplotLayout(o){var a=groupSeriesByAxis(o);each$9(a,function(n){var s=n.seriesModels;s.length&&(calculateBase(n),each$9(s,function(l,c){layoutSingleSeries(l,n.boxOffsetList[c],n.boxWidthList[c])}))})}function groupSeriesByAxis(o){var a=[],n=[];return o.eachSeriesByType("boxplot",function(s){var l=s.getBaseAxis(),c=indexOf(n,l);c<0&&(c=n.length,n[c]=l,a[c]={axis:l,seriesModels:[]}),a[c].seriesModels.push(s)}),a}function calculateBase(o){var a=o.axis,n=o.seriesModels,s=n.length,l=o.boxWidthList=[],c=o.boxOffsetList=[],u=[],d;if(a.type==="category")d=a.getBandWidth();else{var h=0;each$9(n,function(w){h=Math.max(h,w.getData().count())});var f=a.getExtent();d=Math.abs(f[1]-f[0])/h}each$9(n,function(w){var x=w.get("boxWidth");isArray$1(x)||(x=[x,x]),u.push([parsePercent(x[0],d)||0,parsePercent(x[1],d)||0])});var p=d*.8-2,g=p/s*.3,v=(p-g*(s-1))/s,b=v/2-p/2;each$9(n,function(w,x){c.push(b),b+=g+v,l.push(Math.min(Math.max(v,u[x][0]),u[x][1]))})}function layoutSingleSeries(o,a,n){var s=o.coordinateSystem,l=o.getData(),c=n/2,u=o.get("layout")==="horizontal"?0:1,d=1-u,h=["x","y"],f=l.mapDimension(h[u]),p=l.mapDimensionsAll(h[d]);if(f==null||p.length<5)return;for(var g=0;g<l.count();g++){var v=l.get(f,g),b=C(v,p[2],g),w=C(v,p[0],g),x=C(v,p[1],g),S=C(v,p[3],g),E=C(v,p[4],g),T=[];A(T,x,!1),A(T,S,!0),T.push(w,x,E,S),R(T,w),R(T,E),R(T,b),l.setItemLayout(g,{initBaseline:b[d],ends:T})}function C(j,D,O){var H=l.get(D,O),q=[];q[u]=j,q[d]=H;var Y;return isNaN(j)||isNaN(H)?Y=[NaN,NaN]:(Y=s.dataToPoint(q),Y[u]+=a),Y}function A(j,D,O){var H=D.slice(),q=D.slice();H[u]+=c,q[u]-=c,O?j.push(H,q):j.push(q,H)}function R(j,D){var O=D.slice(),H=D.slice();O[u]-=c,H[u]+=c,j.push(O,H)}}function prepareBoxplotData(o,a){a=a||{};for(var n=[],s=[],l=a.boundIQR,c=l==="none"||l===0,u=0;u<o.length;u++){var d=asc$2(o[u].slice()),h=quantile(d,.25),f=quantile(d,.5),p=quantile(d,.75),g=d[0],v=d[d.length-1],b=(l??1.5)*(p-h),w=c?g:Math.max(g,h-b),x=c?v:Math.min(v,p+b),S=a.itemNameFormatter,E=isFunction$1(S)?S({value:u}):isString$2(S)?S.replace("{value}",u+""):u+"";n.push([E,w,h,f,p,x]);for(var T=0;T<d.length;T++){var C=d[T];if(C<w||C>x){var A=[E,C];s.push(A)}}}return{boxData:n,outliers:s}}var boxplotTransform={type:"echarts:boxplot",transform:function(a){var n=a.upstream;if(n.sourceFormat!==SOURCE_FORMAT_ARRAY_ROWS){var s="";process.env.NODE_ENV!=="production"&&(s=makePrintable("source data is not applicable for this boxplot transform. Expect number[][].")),throwError(s)}var l=prepareBoxplotData(n.getRawData(),a.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:l.boxData},{data:l.outliers}]}};function install$z(o){o.registerSeriesModel(BoxplotSeriesModel),o.registerChartView(BoxplotView),o.registerLayout(boxplotLayout),o.registerTransform(boxplotTransform)}var positiveBorderColorQuery=["itemStyle","borderColor"],negativeBorderColorQuery=["itemStyle","borderColor0"],dojiBorderColorQuery=["itemStyle","borderColorDoji"],positiveColorQuery=["itemStyle","color"],negativeColorQuery=["itemStyle","color0"];function getColor(o,a){return a.get(o>0?positiveColorQuery:negativeColorQuery)}function getBorderColor(o,a){return a.get(o===0?dojiBorderColorQuery:o>0?positiveBorderColorQuery:negativeBorderColorQuery)}var candlestickVisual={seriesType:"candlestick",plan:createRenderPlanner(),performRawSeries:!0,reset:function(o,a){if(!a.isSeriesFiltered(o)){var n=o.pipelineContext.large;return!n&&{progress:function(s,l){for(var c;(c=s.next())!=null;){var u=l.getItemModel(c),d=l.getItemLayout(c).sign,h=u.getItemStyle();h.fill=getColor(d,u),h.stroke=getBorderColor(d,u)||h.fill;var f=l.ensureUniqueItemVisual(c,"style");extend(f,h)}}}}}},SKIP_PROPS=["color","borderColor"],CandlestickView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(n),this._isLargeDraw?this._renderLarge(n):this._renderNormal(n)},a.prototype.incrementalPrepareRender=function(n,s,l){this._clear(),this._updateDrawMode(n)},a.prototype.incrementalRender=function(n,s,l,c){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(n,s):this._incrementalRenderNormal(n,s)},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype._updateDrawMode=function(n){var s=n.pipelineContext.large;(this._isLargeDraw==null||s!==this._isLargeDraw)&&(this._isLargeDraw=s,this._clear())},a.prototype._renderNormal=function(n){var s=n.getData(),l=this._data,c=this.group,u=s.getLayout("isSimpleBox"),d=n.get("clip",!0),h=n.coordinateSystem,f=h.getArea&&h.getArea();this._data||c.removeAll(),s.diff(l).add(function(p){if(s.hasValue(p)){var g=s.getItemLayout(p);if(d&&isNormalBoxClipped(f,g))return;var v=createNormalBox(g,p,!0);initProps(v,{shape:{points:g.ends}},n,p),setBoxCommon(v,s,p,u),c.add(v),s.setItemGraphicEl(p,v)}}).update(function(p,g){var v=l.getItemGraphicEl(g);if(!s.hasValue(p)){c.remove(v);return}var b=s.getItemLayout(p);if(d&&isNormalBoxClipped(f,b)){c.remove(v);return}v?(updateProps$1(v,{shape:{points:b.ends}},n,p),saveOldStyle(v)):v=createNormalBox(b),setBoxCommon(v,s,p,u),c.add(v),s.setItemGraphicEl(p,v)}).remove(function(p){var g=l.getItemGraphicEl(p);g&&c.remove(g)}).execute(),this._data=s},a.prototype._renderLarge=function(n){this._clear(),createLarge(n,this.group);var s=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;s?this.group.setClipPath(s):this.group.removeClipPath()},a.prototype._incrementalRenderNormal=function(n,s){for(var l=s.getData(),c=l.getLayout("isSimpleBox"),u;(u=n.next())!=null;){var d=l.getItemLayout(u),h=createNormalBox(d);setBoxCommon(h,l,u,c),h.incremental=!0,this.group.add(h),this._progressiveEls.push(h)}},a.prototype._incrementalRenderLarge=function(n,s){createLarge(s,this.group,this._progressiveEls,!0)},a.prototype.remove=function(n){this._clear()},a.prototype._clear=function(){this.group.removeAll(),this._data=null},a.type="candlestick",a}(ChartView),NormalBoxPathShape=function(){function o(){}return o}(),NormalBoxPath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="normalCandlestickBox",s}return a.prototype.getDefaultShape=function(){return new NormalBoxPathShape},a.prototype.buildPath=function(n,s){var l=s.points;this.__simpleBox?(n.moveTo(l[4][0],l[4][1]),n.lineTo(l[6][0],l[6][1])):(n.moveTo(l[0][0],l[0][1]),n.lineTo(l[1][0],l[1][1]),n.lineTo(l[2][0],l[2][1]),n.lineTo(l[3][0],l[3][1]),n.closePath(),n.moveTo(l[4][0],l[4][1]),n.lineTo(l[5][0],l[5][1]),n.moveTo(l[6][0],l[6][1]),n.lineTo(l[7][0],l[7][1]))},a}(Path);function createNormalBox(o,a,n){var s=o.ends;return new NormalBoxPath({shape:{points:n?transInit(s,o):s},z2:100})}function isNormalBoxClipped(o,a){for(var n=!0,s=0;s<a.ends.length;s++)if(o.contain(a.ends[s][0],a.ends[s][1])){n=!1;break}return n}function setBoxCommon(o,a,n,s){var l=a.getItemModel(n);o.useStyle(a.getItemVisual(n,"style")),o.style.strokeNoScale=!0,o.__simpleBox=s,setStatesStylesFromModel(o,l);var c=a.getItemLayout(n).sign;each$f(o.states,function(d,h){var f=l.getModel(h),p=getColor(c,f),g=getBorderColor(c,f)||p,v=d.style||(d.style={});p&&(v.fill=p),g&&(v.stroke=g)});var u=l.getModel("emphasis");toggleHoverEmphasis(o,u.get("focus"),u.get("blurScope"),u.get("disabled"))}function transInit(o,a){return map$1(o,function(n){return n=n.slice(),n[1]=a.initBaseline,n})}var LargeBoxPathShape=function(){function o(){}return o}(),LargeBoxPath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s.type="largeCandlestickBox",s}return a.prototype.getDefaultShape=function(){return new LargeBoxPathShape},a.prototype.buildPath=function(n,s){for(var l=s.points,c=0;c<l.length;)if(this.__sign===l[c++]){var u=l[c++];n.moveTo(u,l[c++]),n.lineTo(u,l[c++])}else c+=3},a}(Path);function createLarge(o,a,n,s){var l=o.getData(),c=l.getLayout("largePoints"),u=new LargeBoxPath({shape:{points:c},__sign:1,ignoreCoarsePointer:!0});a.add(u);var d=new LargeBoxPath({shape:{points:c},__sign:-1,ignoreCoarsePointer:!0});a.add(d);var h=new LargeBoxPath({shape:{points:c},__sign:0,ignoreCoarsePointer:!0});a.add(h),setLargeStyle(1,u,o),setLargeStyle(-1,d,o),setLargeStyle(0,h,o),s&&(u.incremental=!0,d.incremental=!0),n&&n.push(u,d)}function setLargeStyle(o,a,n,s){var l=getBorderColor(o,n)||getColor(o,n),c=n.getModel("itemStyle").getItemStyle(SKIP_PROPS);a.useStyle(c),a.style.fill=null,a.style.stroke=l}var CandlestickSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return a.prototype.getShadowDim=function(){return"open"},a.prototype.brushSelector=function(n,s,l){var c=s.getItemLayout(n);return c&&l.rect(c.brushRect)},a.type="series.candlestick",a.dependencies=["xAxis","yAxis","grid"],a.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},a}(SeriesModel);mixin(CandlestickSeriesModel,WhiskerBoxCommonMixin,!0);function candlestickPreprocessor(o){!o||!isArray$1(o.series)||each$f(o.series,function(a){isObject$3(a)&&a.type==="k"&&(a.type="candlestick")})}var candlestickLayout={seriesType:"candlestick",plan:createRenderPlanner(),reset:function(o){var a=o.coordinateSystem,n=o.getData(),s=calculateCandleWidth(o,n),l=0,c=1,u=["x","y"],d=n.getDimensionIndex(n.mapDimension(u[l])),h=map$1(n.mapDimensionsAll(u[c]),n.getDimensionIndex,n),f=h[0],p=h[1],g=h[2],v=h[3];if(n.setLayout({candleWidth:s,isSimpleBox:s<=1.3}),d<0||h.length<4)return;return{progress:o.pipelineContext.large?w:b};function b(x,S){for(var E,T=S.getStore();(E=x.next())!=null;){var C=T.get(d,E),A=T.get(f,E),R=T.get(p,E),j=T.get(g,E),D=T.get(v,E),O=Math.min(A,R),H=Math.max(A,R),q=ve(O,C),Y=ve(H,C),te=ve(j,C),ee=ve(D,C),re=[];be(re,Y,0),be(re,q,1),re.push(ae(ee),ae(Y),ae(te),ae(q));var ne=S.getItemModel(E),ce=!!ne.get(["itemStyle","borderColorDoji"]);S.setItemLayout(E,{sign:getSign(T,E,A,R,p,ce),initBaseline:A>R?Y[c]:q[c],ends:re,brushRect:me(j,D,C)})}function ve(pe,ie){var se=[];return se[l]=ie,se[c]=pe,isNaN(ie)||isNaN(pe)?[NaN,NaN]:a.dataToPoint(se)}function be(pe,ie,se){var de=ie.slice(),le=ie.slice();de[l]=subPixelOptimize(de[l]+s/2,1,!1),le[l]=subPixelOptimize(le[l]-s/2,1,!0),se?pe.push(de,le):pe.push(le,de)}function me(pe,ie,se){var de=ve(pe,se),le=ve(ie,se);return de[l]-=s/2,le[l]-=s/2,{x:de[0],y:de[1],width:s,height:le[1]-de[1]}}function ae(pe){return pe[l]=subPixelOptimize(pe[l],1),pe}}function w(x,S){for(var E=createFloat32Array(x.count*4),T=0,C,A=[],R=[],j,D=S.getStore(),O=!!o.get(["itemStyle","borderColorDoji"]);(j=x.next())!=null;){var H=D.get(d,j),q=D.get(f,j),Y=D.get(p,j),te=D.get(g,j),ee=D.get(v,j);if(isNaN(H)||isNaN(te)||isNaN(ee)){E[T++]=NaN,T+=3;continue}E[T++]=getSign(D,j,q,Y,p,O),A[l]=H,A[c]=te,C=a.dataToPoint(A,null,R),E[T++]=C?C[0]:NaN,E[T++]=C?C[1]:NaN,A[c]=ee,C=a.dataToPoint(A,null,R),E[T++]=C?C[1]:NaN}S.setLayout("largePoints",E)}}};function getSign(o,a,n,s,l,c){var u;return n>s?u=-1:n<s?u=1:u=c?0:a>0?o.get(l,a-1)<=s?1:-1:1,u}function calculateCandleWidth(o,a){var n=o.getBaseAxis(),s,l=n.type==="category"?n.getBandWidth():(s=n.getExtent(),Math.abs(s[1]-s[0])/a.count()),c=parsePercent(retrieve2(o.get("barMaxWidth"),l),l),u=parsePercent(retrieve2(o.get("barMinWidth"),1),l),d=o.get("barWidth");return d!=null?parsePercent(d,l):Math.max(Math.min(l/2,c),u)}function install$y(o){o.registerChartView(CandlestickView),o.registerSeriesModel(CandlestickSeriesModel),o.registerPreprocessor(candlestickPreprocessor),o.registerVisual(candlestickVisual),o.registerLayout(candlestickLayout)}function updateRipplePath(o,a){var n=a.rippleEffectColor||a.color;o.eachChild(function(s){s.attr({z:a.z,zlevel:a.zlevel,style:{stroke:a.brushType==="stroke"?n:null,fill:a.brushType==="fill"?n:null}})})}var EffectSymbol=function(o){__extends$1(a,o);function a(n,s){var l=o.call(this)||this,c=new Symbol$1(n,s),u=new Group$3;return l.add(c),l.add(u),l.updateData(n,s),l}return a.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},a.prototype.startEffectAnimation=function(n){for(var s=n.symbolType,l=n.color,c=n.rippleNumber,u=this.childAt(1),d=0;d<c;d++){var h=createSymbol$1(s,-1,-1,2,2,l);h.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var f=-d/c*n.period+n.effectOffset;h.animate("",!0).when(n.period,{scaleX:n.rippleScale/2,scaleY:n.rippleScale/2}).delay(f).start(),h.animateStyle(!0).when(n.period,{opacity:0}).delay(f).start(),u.add(h)}updateRipplePath(u,n)},a.prototype.updateEffectAnimation=function(n){for(var s=this._effectCfg,l=this.childAt(1),c=["symbolType","period","rippleScale","rippleNumber"],u=0;u<c.length;u++){var d=c[u];if(s[d]!==n[d]){this.stopEffectAnimation(),this.startEffectAnimation(n);return}}updateRipplePath(l,n)},a.prototype.highlight=function(){enterEmphasis(this)},a.prototype.downplay=function(){leaveEmphasis(this)},a.prototype.getSymbolType=function(){var n=this.childAt(0);return n&&n.getSymbolType()},a.prototype.updateData=function(n,s){var l=this,c=n.hostModel;this.childAt(0).updateData(n,s);var u=this.childAt(1),d=n.getItemModel(s),h=n.getItemVisual(s,"symbol"),f=normalizeSymbolSize(n.getItemVisual(s,"symbolSize")),p=n.getItemVisual(s,"style"),g=p&&p.fill,v=d.getModel("emphasis");u.setScale(f),u.traverse(function(S){S.setStyle("fill",g)});var b=normalizeSymbolOffset(n.getItemVisual(s,"symbolOffset"),f);b&&(u.x=b[0],u.y=b[1]);var w=n.getItemVisual(s,"symbolRotate");u.rotation=(w||0)*Math.PI/180||0;var x={};x.showEffectOn=c.get("showEffectOn"),x.rippleScale=d.get(["rippleEffect","scale"]),x.brushType=d.get(["rippleEffect","brushType"]),x.period=d.get(["rippleEffect","period"])*1e3,x.effectOffset=s/n.count(),x.z=c.getShallow("z")||0,x.zlevel=c.getShallow("zlevel")||0,x.symbolType=h,x.color=g,x.rippleEffectColor=d.get(["rippleEffect","color"]),x.rippleNumber=d.get(["rippleEffect","number"]),x.showEffectOn==="render"?(this._effectCfg?this.updateEffectAnimation(x):this.startEffectAnimation(x),this._effectCfg=x):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(S){S==="emphasis"?x.showEffectOn!=="render"&&l.startEffectAnimation(x):S==="normal"&&x.showEffectOn!=="render"&&l.stopEffectAnimation()}),this._effectCfg=x,toggleHoverEmphasis(this,v.get("focus"),v.get("blurScope"),v.get("disabled"))},a.prototype.fadeOut=function(n){n&&n()},a}(Group$3),EffectScatterView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(){this._symbolDraw=new SymbolDraw(EffectSymbol)},a.prototype.render=function(n,s,l){var c=n.getData(),u=this._symbolDraw;u.updateData(c,{clipShape:this._getClipShape(n)}),this.group.add(u.group)},a.prototype._getClipShape=function(n){var s=n.coordinateSystem,l=s&&s.getArea&&s.getArea();return n.get("clip",!0)?l:null},a.prototype.updateTransform=function(n,s,l){var c=n.getData();this.group.dirty();var u=pointsLayout("").reset(n,s,l);u.progress&&u.progress({start:0,end:c.count(),count:c.count()},c),this._symbolDraw.updateLayout()},a.prototype._updateGroupTransform=function(n){var s=n.coordinateSystem;s&&s.getRoamTransform&&(this.group.transform=clone$2(s.getRoamTransform()),this.group.decomposeTransform())},a.prototype.remove=function(n,s){this._symbolDraw&&this._symbolDraw.remove(!0)},a.type="effectScatter",a}(ChartView),EffectScatterSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.hasSymbolVisual=!0,n}return a.prototype.getInitialData=function(n,s){return createSeriesData(null,this,{useEncodeDefaulter:!0})},a.prototype.brushSelector=function(n,s,l){return l.point(s.getItemLayout(n))},a.type="series.effectScatter",a.dependencies=["grid","polar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},a}(SeriesModel);function install$x(o){o.registerChartView(EffectScatterView),o.registerSeriesModel(EffectScatterSeriesModel),o.registerLayout(pointsLayout("effectScatter"))}var EffectLine=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this)||this;return c.add(c.createLine(n,s,l)),c._updateEffectSymbol(n,s),c}return a.prototype.createLine=function(n,s,l){return new Line(n,s,l)},a.prototype._updateEffectSymbol=function(n,s){var l=n.getItemModel(s),c=l.getModel("effect"),u=c.get("symbolSize"),d=c.get("symbol");isArray$1(u)||(u=[u,u]);var h=n.getItemVisual(s,"style"),f=c.get("color")||h&&h.stroke,p=this.childAt(1);this._symbolType!==d&&(this.remove(p),p=createSymbol$1(d,-.5,-.5,1,1,f),p.z2=100,p.culling=!0,this.add(p)),p&&(p.setStyle("shadowColor",f),p.setStyle(c.getItemStyle(["color"])),p.scaleX=u[0],p.scaleY=u[1],p.setColor(f),this._symbolType=d,this._symbolScale=u,this._updateEffectAnimation(n,c,s))},a.prototype._updateEffectAnimation=function(n,s,l){var c=this.childAt(1);if(c){var u=n.getItemLayout(l),d=s.get("period")*1e3,h=s.get("loop"),f=s.get("roundTrip"),p=s.get("constantSpeed"),g=retrieve(s.get("delay"),function(b){return b/n.count()*d/3});if(c.ignore=!0,this._updateAnimationPoints(c,u),p>0&&(d=this._getLineLength(c)/p*1e3),d!==this._period||h!==this._loop||f!==this._roundTrip){c.stopAnimation();var v=void 0;isFunction$1(g)?v=g(l):v=g,c.__t>0&&(v=-d*c.__t),this._animateSymbol(c,d,v,h,f)}this._period=d,this._loop=h,this._roundTrip=f}},a.prototype._animateSymbol=function(n,s,l,c,u){if(s>0){n.__t=0;var d=this,h=n.animate("",c).when(u?s*2:s,{__t:u?2:1}).delay(l).during(function(){d._updateSymbolPosition(n)});c||h.done(function(){d.remove(n)}),h.start()}},a.prototype._getLineLength=function(n){return dist$2(n.__p1,n.__cp1)+dist$2(n.__cp1,n.__p2)},a.prototype._updateAnimationPoints=function(n,s){n.__p1=s[0],n.__p2=s[1],n.__cp1=s[2]||[(s[0][0]+s[1][0])/2,(s[0][1]+s[1][1])/2]},a.prototype.updateData=function(n,s,l){this.childAt(0).updateData(n,s,l),this._updateEffectSymbol(n,s)},a.prototype._updateSymbolPosition=function(n){var s=n.__p1,l=n.__p2,c=n.__cp1,u=n.__t<1?n.__t:2-n.__t,d=[n.x,n.y],h=d.slice(),f=quadraticAt$1,p=quadraticDerivativeAt;d[0]=f(s[0],c[0],l[0],u),d[1]=f(s[1],c[1],l[1],u);var g=n.__t<1?p(s[0],c[0],l[0],u):p(l[0],c[0],s[0],1-u),v=n.__t<1?p(s[1],c[1],l[1],u):p(l[1],c[1],s[1],1-u);n.rotation=-Math.atan2(v,g)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(n.__lastT!==void 0&&n.__lastT<n.__t?(n.scaleY=dist$2(h,d)*1.05,u===1&&(d[0]=h[0]+(d[0]-h[0])/2,d[1]=h[1]+(d[1]-h[1])/2)):n.__lastT===1?n.scaleY=2*dist$2(s,d):n.scaleY=this._symbolScale[1]),n.__lastT=n.__t,n.ignore=!1,n.x=d[0],n.y=d[1]},a.prototype.updateLayout=function(n,s){this.childAt(0).updateLayout(n,s);var l=n.getItemModel(s).getModel("effect");this._updateEffectAnimation(n,l,s)},a}(Group$3),Polyline=function(o){__extends$1(a,o);function a(n,s,l){var c=o.call(this)||this;return c._createPolyline(n,s,l),c}return a.prototype._createPolyline=function(n,s,l){var c=n.getItemLayout(s),u=new Polyline$1({shape:{points:c}});this.add(u),this._updateCommonStl(n,s,l)},a.prototype.updateData=function(n,s,l){var c=n.hostModel,u=this.childAt(0),d={shape:{points:n.getItemLayout(s)}};updateProps$1(u,d,c,s),this._updateCommonStl(n,s,l)},a.prototype._updateCommonStl=function(n,s,l){var c=this.childAt(0),u=n.getItemModel(s),d=l&&l.emphasisLineStyle,h=l&&l.focus,f=l&&l.blurScope,p=l&&l.emphasisDisabled;if(!l||n.hasItemOption){var g=u.getModel("emphasis");d=g.getModel("lineStyle").getLineStyle(),p=g.get("disabled"),h=g.get("focus"),f=g.get("blurScope")}c.useStyle(n.getItemVisual(s,"style")),c.style.fill=null,c.style.strokeNoScale=!0;var v=c.ensureState("emphasis");v.style=d,toggleHoverEmphasis(this,h,f,p)},a.prototype.updateLayout=function(n,s){var l=this.childAt(0);l.setShape("points",n.getItemLayout(s))},a}(Group$3),EffectPolyline=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n._lastFrame=0,n._lastFramePercent=0,n}return a.prototype.createLine=function(n,s,l){return new Polyline(n,s,l)},a.prototype._updateAnimationPoints=function(n,s){this._points=s;for(var l=[0],c=0,u=1;u<s.length;u++){var d=s[u-1],h=s[u];c+=dist$2(d,h),l.push(c)}if(c===0){this._length=0;return}for(var u=0;u<l.length;u++)l[u]/=c;this._offsets=l,this._length=c},a.prototype._getLineLength=function(){return this._length},a.prototype._updateSymbolPosition=function(n){var s=n.__t<1?n.__t:2-n.__t,l=this._points,c=this._offsets,u=l.length;if(c){var d=this._lastFrame,h;if(s<this._lastFramePercent){var f=Math.min(d+1,u-1);for(h=f;h>=0&&!(c[h]<=s);h--);h=Math.min(h,u-2)}else{for(h=d;h<u&&!(c[h]>s);h++);h=Math.min(h-1,u-2)}var p=(s-c[h])/(c[h+1]-c[h]),g=l[h],v=l[h+1];n.x=g[0]*(1-p)+p*v[0],n.y=g[1]*(1-p)+p*v[1];var b=n.__t<1?v[0]-g[0]:g[0]-v[0],w=n.__t<1?v[1]-g[1]:g[1]-v[1];n.rotation=-Math.atan2(w,b)-Math.PI/2,this._lastFrame=h,this._lastFramePercent=s,n.ignore=!1}},a}(EffectLine),LargeLinesPathShape=function(){function o(){this.polyline=!1,this.curveness=0,this.segs=[]}return o}(),LargeLinesPath=function(o){__extends$1(a,o);function a(n){var s=o.call(this,n)||this;return s._off=0,s.hoverDataIdx=-1,s}return a.prototype.reset=function(){this.notClear=!1,this._off=0},a.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},a.prototype.getDefaultShape=function(){return new LargeLinesPathShape},a.prototype.buildPath=function(n,s){var l=s.segs,c=s.curveness,u;if(s.polyline)for(u=this._off;u<l.length;){var d=l[u++];if(d>0){n.moveTo(l[u++],l[u++]);for(var h=1;h<d;h++)n.lineTo(l[u++],l[u++])}}else for(u=this._off;u<l.length;){var f=l[u++],p=l[u++],g=l[u++],v=l[u++];if(n.moveTo(f,p),c>0){var b=(f+g)/2-(p-v)*c,w=(p+v)/2-(g-f)*c;n.quadraticCurveTo(b,w,g,v)}else n.lineTo(g,v)}this.incremental&&(this._off=u,this.notClear=!0)},a.prototype.findDataIndex=function(n,s){var l=this.shape,c=l.segs,u=l.curveness,d=this.style.lineWidth;if(l.polyline)for(var h=0,f=0;f<c.length;){var p=c[f++];if(p>0)for(var g=c[f++],v=c[f++],b=1;b<p;b++){var w=c[f++],x=c[f++];if(containStroke$4(g,v,w,x,d,n,s))return h}h++}else for(var h=0,f=0;f<c.length;){var g=c[f++],v=c[f++],w=c[f++],x=c[f++];if(u>0){var S=(g+w)/2-(v-x)*u,E=(v+x)/2-(w-g)*u;if(containStroke$2(g,v,S,E,w,x,d,n,s))return h}else if(containStroke$4(g,v,w,x,d,n,s))return h;h++}return-1},a.prototype.contain=function(n,s){var l=this.transformCoordToLocal(n,s),c=this.getBoundingRect();if(n=l[0],s=l[1],c.contain(n,s)){var u=this.hoverDataIdx=this.findDataIndex(n,s);return u>=0}return this.hoverDataIdx=-1,!1},a.prototype.getBoundingRect=function(){var n=this._rect;if(!n){for(var s=this.shape,l=s.segs,c=1/0,u=1/0,d=-1/0,h=-1/0,f=0;f<l.length;){var p=l[f++],g=l[f++];c=Math.min(p,c),d=Math.max(p,d),u=Math.min(g,u),h=Math.max(g,h)}n=this._rect=new BoundingRect(c,u,d,h)}return n},a}(Path),LargeLineDraw=function(){function o(){this.group=new Group$3}return o.prototype.updateData=function(a){this._clear();var n=this._create();n.setShape({segs:a.getLayout("linesPoints")}),this._setCommon(n,a)},o.prototype.incrementalPrepareUpdate=function(a){this.group.removeAll(),this._clear()},o.prototype.incrementalUpdate=function(a,n){var s=this._newAdded[0],l=n.getLayout("linesPoints"),c=s&&s.shape.segs;if(c&&c.length<2e4){var u=c.length,d=new Float32Array(u+l.length);d.set(c),d.set(l,u),s.setShape({segs:d})}else{this._newAdded=[];var h=this._create();h.incremental=!0,h.setShape({segs:l}),this._setCommon(h,n),h.__startIndex=a.start}},o.prototype.remove=function(){this._clear()},o.prototype.eachRendered=function(a){this._newAdded[0]&&a(this._newAdded[0])},o.prototype._create=function(){var a=new LargeLinesPath({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(a),this.group.add(a),a},o.prototype._setCommon=function(a,n,s){var l=n.hostModel;a.setShape({polyline:l.get("polyline"),curveness:l.get(["lineStyle","curveness"])}),a.useStyle(l.getModel("lineStyle").getLineStyle()),a.style.strokeNoScale=!0;var c=n.getVisual("style");c&&c.stroke&&a.setStyle("stroke",c.stroke),a.setStyle("fill",null);var u=getECData(a);u.seriesIndex=l.seriesIndex,a.on("mousemove",function(d){u.dataIndex=null;var h=a.hoverDataIdx;h>0&&(u.dataIndex=h+a.__startIndex)})},o.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},o}(),linesLayout={seriesType:"lines",plan:createRenderPlanner(),reset:function(o){var a=o.coordinateSystem;if(!a){process.env.NODE_ENV!=="production"&&error("The lines series must have a coordinate system.");return}var n=o.get("polyline"),s=o.pipelineContext.large;return{progress:function(l,c){var u=[];if(s){var d=void 0,h=l.end-l.start;if(n){for(var f=0,p=l.start;p<l.end;p++)f+=o.getLineCoordsCount(p);d=new Float32Array(h+f*2)}else d=new Float32Array(h*4);for(var g=0,v=[],p=l.start;p<l.end;p++){var b=o.getLineCoords(p,u);n&&(d[g++]=b);for(var w=0;w<b;w++)v=a.dataToPoint(u[w],!1,v),d[g++]=v[0],d[g++]=v[1]}c.setLayout("linesPoints",d)}else for(var p=l.start;p<l.end;p++){var x=c.getItemModel(p),b=o.getLineCoords(p,u),S=[];if(n)for(var E=0;E<b;E++)S.push(a.dataToPoint(u[E]));else{S[0]=a.dataToPoint(u[0]),S[1]=a.dataToPoint(u[1]);var T=x.get(["lineStyle","curveness"]);+T&&(S[2]=[(S[0][0]+S[1][0])/2-(S[0][1]-S[1][1])*T,(S[0][1]+S[1][1])/2-(S[1][0]-S[0][0])*T])}c.setItemLayout(p,S)}}}}},LinesView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=n.getData(),u=this._updateLineDraw(c,n),d=n.get("zlevel"),h=n.get(["effect","trailLength"]),f=l.getZr(),p=f.painter.getType()==="svg";p||f.painter.getLayer(d).clear(!0),this._lastZlevel!=null&&!p&&f.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(n)&&h>0&&(p?process.env.NODE_ENV!=="production"&&console.warn("SVG render mode doesn't support lines with trail effect"):f.configLayer(d,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)})),u.updateData(c);var g=n.get("clip",!0)&&createClipPath(n.coordinateSystem,!1,n);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=d,this._finished=!0},a.prototype.incrementalPrepareRender=function(n,s,l){var c=n.getData(),u=this._updateLineDraw(c,n);u.incrementalPrepareUpdate(c),this._clearLayer(l),this._finished=!1},a.prototype.incrementalRender=function(n,s,l){this._lineDraw.incrementalUpdate(n,s.getData()),this._finished=n.end===s.getData().count()},a.prototype.eachRendered=function(n){this._lineDraw&&this._lineDraw.eachRendered(n)},a.prototype.updateTransform=function(n,s,l){var c=n.getData(),u=n.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var d=linesLayout.reset(n,s,l);d.progress&&d.progress({start:0,end:c.count(),count:c.count()},c),this._lineDraw.updateLayout(),this._clearLayer(l)},a.prototype._updateLineDraw=function(n,s){var l=this._lineDraw,c=this._showEffect(s),u=!!s.get("polyline"),d=s.pipelineContext,h=d.large;return process.env.NODE_ENV!=="production"&&c&&h&&console.warn("Large lines not support effect"),(!l||c!==this._hasEffet||u!==this._isPolyline||h!==this._isLargeDraw)&&(l&&l.remove(),l=this._lineDraw=h?new LargeLineDraw:new LineDraw(u?c?EffectPolyline:Polyline:c?EffectLine:Line),this._hasEffet=c,this._isPolyline=u,this._isLargeDraw=h),this.group.add(l.group),l},a.prototype._showEffect=function(n){return!!n.get(["effect","show"])},a.prototype._clearLayer=function(n){var s=n.getZr(),l=s.painter.getType()==="svg";!l&&this._lastZlevel!=null&&s.painter.getLayer(this._lastZlevel).clear(!0)},a.prototype.remove=function(n,s){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(s)},a.prototype.dispose=function(n,s){this.remove(n,s)},a.type="lines",a}(ChartView),Uint32Arr=typeof Uint32Array>"u"?Array:Uint32Array,Float64Arr=typeof Float64Array>"u"?Array:Float64Array;function compatEc2(o){var a=o.data;a&&a[0]&&a[0][0]&&a[0][0].coord&&(process.env.NODE_ENV!=="production"&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),o.data=map$1(a,function(n){var s=[n[0].coord,n[1].coord],l={coords:s};return n[0].name&&(l.fromName=n[0].name),n[1].name&&(l.toName=n[1].name),mergeAll([l,n[0],n[1]])}))}var LinesSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return a.prototype.init=function(n){n.data=n.data||[],compatEc2(n);var s=this._processFlatCoordsArray(n.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(n.data=new Float32Array(s.count)),o.prototype.init.apply(this,arguments)},a.prototype.mergeOption=function(n){if(compatEc2(n),n.data){var s=this._processFlatCoordsArray(n.data);this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset,s.flatCoords&&(n.data=new Float32Array(s.count))}o.prototype.mergeOption.apply(this,arguments)},a.prototype.appendData=function(n){var s=this._processFlatCoordsArray(n.data);s.flatCoords&&(this._flatCoords?(this._flatCoords=concatArray(this._flatCoords,s.flatCoords),this._flatCoordsOffset=concatArray(this._flatCoordsOffset,s.flatCoordsOffset)):(this._flatCoords=s.flatCoords,this._flatCoordsOffset=s.flatCoordsOffset),n.data=new Float32Array(s.count)),this.getRawData().appendData(n.data)},a.prototype._getCoordsFromItemModel=function(n){var s=this.getData().getItemModel(n),l=s.option instanceof Array?s.option:s.getShallow("coords");if(process.env.NODE_ENV!=="production"&&!(l instanceof Array&&l.length>0&&l[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(l)+". Lines must have 2d coords array in data item.");return l},a.prototype.getLineCoordsCount=function(n){return this._flatCoordsOffset?this._flatCoordsOffset[n*2+1]:this._getCoordsFromItemModel(n).length},a.prototype.getLineCoords=function(n,s){if(this._flatCoordsOffset){for(var l=this._flatCoordsOffset[n*2],c=this._flatCoordsOffset[n*2+1],u=0;u<c;u++)s[u]=s[u]||[],s[u][0]=this._flatCoords[l+u*2],s[u][1]=this._flatCoords[l+u*2+1];return c}else{for(var d=this._getCoordsFromItemModel(n),u=0;u<d.length;u++)s[u]=s[u]||[],s[u][0]=d[u][0],s[u][1]=d[u][1];return d.length}},a.prototype._processFlatCoordsArray=function(n){var s=0;if(this._flatCoords&&(s=this._flatCoords.length),isNumber(n[0])){for(var l=n.length,c=new Uint32Arr(l),u=new Float64Arr(l),d=0,h=0,f=0,p=0;p<l;){f++;var g=n[p++];c[h++]=d+s,c[h++]=g;for(var v=0;v<g;v++){var b=n[p++],w=n[p++];if(u[d++]=b,u[d++]=w,p>l&&process.env.NODE_ENV!=="production")throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(c.buffer,0,h),flatCoords:u,count:f}}return{flatCoordsOffset:null,flatCoords:null,count:n.length}},a.prototype.getInitialData=function(n,s){if(process.env.NODE_ENV!=="production"){var l=CoordinateSystemManager.get(n.coordinateSystem);if(!l)throw new Error("Unknown coordinate system "+n.coordinateSystem)}var c=new SeriesData(["value"],this);return c.hasItemOption=!1,c.initData(n.data,[],function(u,d,h,f){if(u instanceof Array)return NaN;c.hasItemOption=!0;var p=u.value;if(p!=null)return p instanceof Array?p[f]:p}),c},a.prototype.formatTooltip=function(n,s,l){var c=this.getData(),u=c.getItemModel(n),d=u.get("name");if(d)return d;var h=u.get("fromName"),f=u.get("toName"),p=[];return h!=null&&p.push(h),f!=null&&p.push(f),createTooltipMarkup("nameValue",{name:p.join(" > ")})},a.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},a.prototype.getProgressive=function(){var n=this.option.progressive;return n??(this.option.large?1e4:this.get("progressive"))},a.prototype.getProgressiveThreshold=function(){var n=this.option.progressiveThreshold;return n??(this.option.large?2e4:this.get("progressiveThreshold"))},a.prototype.getZLevelKey=function(){var n=this.getModel("effect"),s=n.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:n.get("show")&&s>0?s+"":""},a.type="series.lines",a.dependencies=["grid","polar","geo","calendar"],a.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},a}(SeriesModel);function normalize(o){return o instanceof Array||(o=[o,o]),o}var linesVisual={seriesType:"lines",reset:function(o){var a=normalize(o.get("symbol")),n=normalize(o.get("symbolSize")),s=o.getData();s.setVisual("fromSymbol",a&&a[0]),s.setVisual("toSymbol",a&&a[1]),s.setVisual("fromSymbolSize",n&&n[0]),s.setVisual("toSymbolSize",n&&n[1]);function l(c,u){var d=c.getItemModel(u),h=normalize(d.getShallow("symbol",!0)),f=normalize(d.getShallow("symbolSize",!0));h[0]&&c.setItemVisual(u,"fromSymbol",h[0]),h[1]&&c.setItemVisual(u,"toSymbol",h[1]),f[0]&&c.setItemVisual(u,"fromSymbolSize",f[0]),f[1]&&c.setItemVisual(u,"toSymbolSize",f[1])}return{dataEach:s.hasItemOption?l:null}}};function install$w(o){o.registerChartView(LinesView),o.registerSeriesModel(LinesSeriesModel),o.registerLayout(linesLayout),o.registerVisual(linesVisual)}var GRADIENT_LEVELS=256,HeatmapLayer=function(){function o(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var a=platformApi.createCanvas();this.canvas=a}return o.prototype.update=function(a,n,s,l,c,u){var d=this._getBrush(),h=this._getGradient(c,"inRange"),f=this._getGradient(c,"outOfRange"),p=this.pointSize+this.blurSize,g=this.canvas,v=g.getContext("2d"),b=a.length;g.width=n,g.height=s;for(var w=0;w<b;++w){var x=a[w],S=x[0],E=x[1],T=x[2],C=l(T);v.globalAlpha=C,v.drawImage(d,S-p,E-p)}if(!g.width||!g.height)return g;for(var A=v.getImageData(0,0,g.width,g.height),R=A.data,j=0,D=R.length,O=this.minOpacity,H=this.maxOpacity,q=H-O;j<D;){var C=R[j+3]/256,Y=Math.floor(C*(GRADIENT_LEVELS-1))*4;if(C>0){var te=u(C)?h:f;C>0&&(C=C*q+O),R[j++]=te[Y],R[j++]=te[Y+1],R[j++]=te[Y+2],R[j++]=te[Y+3]*C*256}else j+=4}return v.putImageData(A,0,0),g},o.prototype._getBrush=function(){var a=this._brushCanvas||(this._brushCanvas=platformApi.createCanvas()),n=this.pointSize+this.blurSize,s=n*2;a.width=s,a.height=s;var l=a.getContext("2d");return l.clearRect(0,0,s,s),l.shadowOffsetX=s,l.shadowBlur=this.blurSize,l.shadowColor="#000",l.beginPath(),l.arc(-n,n,this.pointSize,0,Math.PI*2,!0),l.closePath(),l.fill(),a},o.prototype._getGradient=function(a,n){for(var s=this._gradientPixels,l=s[n]||(s[n]=new Uint8ClampedArray(256*4)),c=[0,0,0,0],u=0,d=0;d<256;d++)a[n](d/255,!0,c),l[u++]=c[0],l[u++]=c[1],l[u++]=c[2],l[u++]=c[3];return l},o}();function getIsInPiecewiseRange(o,a,n){var s=o[1]-o[0];a=map$1(a,function(u){return{interval:[(u.interval[0]-o[0])/s,(u.interval[1]-o[0])/s]}});var l=a.length,c=0;return function(u){var d;for(d=c;d<l;d++){var h=a[d].interval;if(h[0]<=u&&u<=h[1]){c=d;break}}if(d===l)for(d=c-1;d>=0;d--){var h=a[d].interval;if(h[0]<=u&&u<=h[1]){c=d;break}}return d>=0&&d<l&&n[d]}}function getIsInContinuousRange(o,a){var n=o[1]-o[0];return a=[(a[0]-o[0])/n,(a[1]-o[0])/n],function(s){return s>=a[0]&&s<=a[1]}}function isGeoCoordSys(o){var a=o.dimensions;return a[0]==="lng"&&a[1]==="lat"}var HeatmapView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c;if(s.eachComponent("visualMap",function(d){d.eachTargetSeries(function(h){h===n&&(c=d)})}),process.env.NODE_ENV!=="production"&&!c)throw new Error("Heatmap must use with visualMap");this._progressiveEls=null,this.group.removeAll();var u=n.coordinateSystem;u.type==="cartesian2d"||u.type==="calendar"?this._renderOnCartesianAndCalendar(n,l,0,n.getData().count()):isGeoCoordSys(u)&&this._renderOnGeo(u,n,c,l)},a.prototype.incrementalPrepareRender=function(n,s,l){this.group.removeAll()},a.prototype.incrementalRender=function(n,s,l,c){var u=s.coordinateSystem;u&&(isGeoCoordSys(u)?this.render(s,l,c):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(s,c,n.start,n.end,!0)))},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype._renderOnCartesianAndCalendar=function(n,s,l,c,u){var d=n.coordinateSystem,h=isCoordinateSystemType(d,"cartesian2d"),f,p,g,v;if(h){var b=d.getAxis("x"),w=d.getAxis("y");if(process.env.NODE_ENV!=="production"){if(!(b.type==="category"&&w.type==="category"))throw new Error("Heatmap on cartesian must have two category axes");if(!(b.onBand&&w.onBand))throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}f=b.getBandWidth()+.5,p=w.getBandWidth()+.5,g=b.scale.getExtent(),v=w.scale.getExtent()}for(var x=this.group,S=n.getData(),E=n.getModel(["emphasis","itemStyle"]).getItemStyle(),T=n.getModel(["blur","itemStyle"]).getItemStyle(),C=n.getModel(["select","itemStyle"]).getItemStyle(),A=n.get(["itemStyle","borderRadius"]),R=getLabelStatesModels(n),j=n.getModel("emphasis"),D=j.get("focus"),O=j.get("blurScope"),H=j.get("disabled"),q=h?[S.mapDimension("x"),S.mapDimension("y"),S.mapDimension("value")]:[S.mapDimension("time"),S.mapDimension("value")],Y=l;Y<c;Y++){var te=void 0,ee=S.getItemVisual(Y,"style");if(h){var re=S.get(q[0],Y),ne=S.get(q[1],Y);if(isNaN(S.get(q[2],Y))||isNaN(re)||isNaN(ne)||re<g[0]||re>g[1]||ne<v[0]||ne>v[1])continue;var ce=d.dataToPoint([re,ne]);te=new Rect$2({shape:{x:ce[0]-f/2,y:ce[1]-p/2,width:f,height:p},style:ee})}else{if(isNaN(S.get(q[1],Y)))continue;te=new Rect$2({z2:1,shape:d.dataToRect([S.get(q[0],Y)]).contentShape,style:ee})}if(S.hasItemOption){var ve=S.getItemModel(Y),be=ve.getModel("emphasis");E=be.getModel("itemStyle").getItemStyle(),T=ve.getModel(["blur","itemStyle"]).getItemStyle(),C=ve.getModel(["select","itemStyle"]).getItemStyle(),A=ve.get(["itemStyle","borderRadius"]),D=be.get("focus"),O=be.get("blurScope"),H=be.get("disabled"),R=getLabelStatesModels(ve)}te.shape.r=A;var me=n.getRawValue(Y),ae="-";me&&me[2]!=null&&(ae=me[2]+""),setLabelStyle(te,R,{labelFetcher:n,labelDataIndex:Y,defaultOpacity:ee.opacity,defaultText:ae}),te.ensureState("emphasis").style=E,te.ensureState("blur").style=T,te.ensureState("select").style=C,toggleHoverEmphasis(te,D,O,H),te.incremental=u,u&&(te.states.emphasis.hoverLayer=!0),x.add(te),S.setItemGraphicEl(Y,te),this._progressiveEls&&this._progressiveEls.push(te)}},a.prototype._renderOnGeo=function(n,s,l,c){var u=l.targetVisuals.inRange,d=l.targetVisuals.outOfRange,h=s.getData(),f=this._hmLayer||this._hmLayer||new HeatmapLayer;f.blurSize=s.get("blurSize"),f.pointSize=s.get("pointSize"),f.minOpacity=s.get("minOpacity"),f.maxOpacity=s.get("maxOpacity");var p=n.getViewRect().clone(),g=n.getRoamTransform();p.applyTransform(g);var v=Math.max(p.x,0),b=Math.max(p.y,0),w=Math.min(p.width+p.x,c.getWidth()),x=Math.min(p.height+p.y,c.getHeight()),S=w-v,E=x-b,T=[h.mapDimension("lng"),h.mapDimension("lat"),h.mapDimension("value")],C=h.mapArray(T,function(D,O,H){var q=n.dataToPoint([D,O]);return q[0]-=v,q[1]-=b,q.push(H),q}),A=l.getExtent(),R=l.type==="visualMap.continuous"?getIsInContinuousRange(A,l.option.range):getIsInPiecewiseRange(A,l.getPieceList(),l.option.selected);f.update(C,S,E,u.color.getNormalizer(),{inRange:u.color.getColorMapper(),outOfRange:d.color.getColorMapper()},R);var j=new ZRImage({style:{width:S,height:E,x:v,y:b,image:f.canvas},silent:!0});this.group.add(j)},a.type="heatmap",a}(ChartView),HeatmapSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.getInitialData=function(n,s){return createSeriesData(null,this,{generateCoord:"value"})},a.prototype.preventIncremental=function(){var n=CoordinateSystemManager.get(this.get("coordinateSystem"));if(n&&n.dimensions)return n.dimensions[0]==="lng"&&n.dimensions[1]==="lat"},a.type="series.heatmap",a.dependencies=["grid","geo","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},a}(SeriesModel);function install$v(o){o.registerChartView(HeatmapView),o.registerSeriesModel(HeatmapSeriesModel)}var BAR_BORDER_WIDTH_QUERY=["itemStyle","borderWidth"],LAYOUT_ATTRS=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],pathForLineWidth=new Circle,PictorialBarView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=this.group,u=n.getData(),d=this._data,h=n.coordinateSystem,f=h.getBaseAxis(),p=f.isHorizontal(),g=h.master.getRect(),v={ecSize:{width:l.getWidth(),height:l.getHeight()},seriesModel:n,coordSys:h,coordSysExtent:[[g.x,g.x+g.width],[g.y,g.y+g.height]],isHorizontal:p,valueDim:LAYOUT_ATTRS[+p],categoryDim:LAYOUT_ATTRS[1-+p]};u.diff(d).add(function(w){if(u.hasValue(w)){var x=getItemModel(u,w),S=getSymbolMeta(u,w,x,v),E=createBar(u,v,S);u.setItemGraphicEl(w,E),c.add(E),updateCommon(E,v,S)}}).update(function(w,x){var S=d.getItemGraphicEl(x);if(!u.hasValue(w)){c.remove(S);return}var E=getItemModel(u,w),T=getSymbolMeta(u,w,E,v),C=getShapeStr(u,T);S&&C!==S.__pictorialShapeStr&&(c.remove(S),u.setItemGraphicEl(w,null),S=null),S?updateBar(S,v,T):S=createBar(u,v,T,!0),u.setItemGraphicEl(w,S),S.__pictorialSymbolMeta=T,c.add(S),updateCommon(S,v,T)}).remove(function(w){var x=d.getItemGraphicEl(w);x&&removeBar(d,w,x.__pictorialSymbolMeta.animationModel,x)}).execute();var b=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;return b?c.setClipPath(b):c.removeClipPath(),this._data=u,this.group},a.prototype.remove=function(n,s){var l=this.group,c=this._data;n.get("animation")?c&&c.eachItemGraphicEl(function(u){removeBar(c,getECData(u).dataIndex,n,u)}):l.removeAll()},a.type="pictorialBar",a}(ChartView);function getSymbolMeta(o,a,n,s){var l=o.getItemLayout(a),c=n.get("symbolRepeat"),u=n.get("symbolClip"),d=n.get("symbolPosition")||"start",h=n.get("symbolRotate"),f=(h||0)*Math.PI/180||0,p=n.get("symbolPatternSize")||2,g=n.isAnimationEnabled(),v={dataIndex:a,layout:l,itemModel:n,symbolType:o.getItemVisual(a,"symbol")||"circle",style:o.getItemVisual(a,"style"),symbolClip:u,symbolRepeat:c,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:p,rotation:f,animationModel:g?n:null,hoverScale:g&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};prepareBarLength(n,c,l,s,v),prepareSymbolSize(o,a,l,c,u,v.boundingLength,v.pxSign,p,s,v),prepareLineWidth(n,v.symbolScale,f,s,v);var b=v.symbolSize,w=normalizeSymbolOffset(n.get("symbolOffset"),b);return prepareLayoutInfo(n,b,l,c,u,w,d,v.valueLineWidth,v.boundingLength,v.repeatCutLength,s,v),v}function prepareBarLength(o,a,n,s,l){var c=s.valueDim,u=o.get("symbolBoundingData"),d=s.coordSys.getOtherAxis(s.coordSys.getBaseAxis()),h=d.toGlobalCoord(d.dataToCoord(0)),f=1-+(n[c.wh]<=0),p;if(isArray$1(u)){var g=[convertToCoordOnAxis(d,u[0])-h,convertToCoordOnAxis(d,u[1])-h];g[1]<g[0]&&g.reverse(),p=g[f]}else u!=null?p=convertToCoordOnAxis(d,u)-h:a?p=s.coordSysExtent[c.index][f]-h:p=n[c.wh];l.boundingLength=p,a&&(l.repeatCutLength=n[c.wh]);var v=c.xy==="x",b=d.inverse;l.pxSign=v&&!b||!v&&b?p>=0?1:-1:p>0?1:-1}function convertToCoordOnAxis(o,a){return o.toGlobalCoord(o.dataToCoord(o.scale.parse(a)))}function prepareSymbolSize(o,a,n,s,l,c,u,d,h,f){var p=h.valueDim,g=h.categoryDim,v=Math.abs(n[g.wh]),b=o.getItemVisual(a,"symbolSize"),w;isArray$1(b)?w=b.slice():b==null?w=["100%","100%"]:w=[b,b],w[g.index]=parsePercent(w[g.index],v),w[p.index]=parsePercent(w[p.index],s?v:Math.abs(c)),f.symbolSize=w;var x=f.symbolScale=[w[0]/d,w[1]/d];x[p.index]*=(h.isHorizontal?-1:1)*u}function prepareLineWidth(o,a,n,s,l){var c=o.get(BAR_BORDER_WIDTH_QUERY)||0;c&&(pathForLineWidth.attr({scaleX:a[0],scaleY:a[1],rotation:n}),pathForLineWidth.updateTransform(),c/=pathForLineWidth.getLineScale(),c*=a[s.valueDim.index]),l.valueLineWidth=c||0}function prepareLayoutInfo(o,a,n,s,l,c,u,d,h,f,p,g){var v=p.categoryDim,b=p.valueDim,w=g.pxSign,x=Math.max(a[b.index]+d,0),S=x;if(s){var E=Math.abs(h),T=retrieve(o.get("symbolMargin"),"15%")+"",C=!1;T.lastIndexOf("!")===T.length-1&&(C=!0,T=T.slice(0,T.length-1));var A=parsePercent(T,a[b.index]),R=Math.max(x+A*2,0),j=C?0:A*2,D=isNumeric(s),O=D?s:toIntTimes((E+j)/R),H=E-O*x;A=H/2/(C?O:Math.max(O-1,1)),R=x+A*2,j=C?0:A*2,!D&&s!=="fixed"&&(O=f?toIntTimes((Math.abs(f)+j)/R):0),S=O*R-j,g.repeatTimes=O,g.symbolMargin=A}var q=w*(S/2),Y=g.pathPosition=[];Y[v.index]=n[v.wh]/2,Y[b.index]=u==="start"?q:u==="end"?h-q:h/2,c&&(Y[0]+=c[0],Y[1]+=c[1]);var te=g.bundlePosition=[];te[v.index]=n[v.xy],te[b.index]=n[b.xy];var ee=g.barRectShape=extend({},n);ee[b.wh]=w*Math.max(Math.abs(n[b.wh]),Math.abs(Y[b.index]+q)),ee[v.wh]=n[v.wh];var re=g.clipShape={};re[v.xy]=-n[v.xy],re[v.wh]=p.ecSize[v.wh],re[b.xy]=0,re[b.wh]=n[b.wh]}function createPath$1(o){var a=o.symbolPatternSize,n=createSymbol$1(o.symbolType,-a/2,-a/2,a,a);return n.attr({culling:!0}),n.type!=="image"&&n.setStyle({strokeNoScale:!0}),n}function createOrUpdateRepeatSymbols(o,a,n,s){var l=o.__pictorialBundle,c=n.symbolSize,u=n.valueLineWidth,d=n.pathPosition,h=a.valueDim,f=n.repeatTimes||0,p=0,g=c[a.valueDim.index]+u+n.symbolMargin*2;for(eachPath(o,function(x){x.__pictorialAnimationIndex=p,x.__pictorialRepeatTimes=f,p<f?updateAttr(x,null,w(p),n,s):updateAttr(x,null,{scaleX:0,scaleY:0},n,s,function(){l.remove(x)}),p++});p<f;p++){var v=createPath$1(n);v.__pictorialAnimationIndex=p,v.__pictorialRepeatTimes=f,l.add(v);var b=w(p);updateAttr(v,{x:b.x,y:b.y,scaleX:0,scaleY:0},{scaleX:b.scaleX,scaleY:b.scaleY,rotation:b.rotation},n,s)}function w(x){var S=d.slice(),E=n.pxSign,T=x;return(n.symbolRepeatDirection==="start"?E>0:E<0)&&(T=f-1-x),S[h.index]=g*(T-f/2+.5)+d[h.index],{x:S[0],y:S[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function createOrUpdateSingleSymbol(o,a,n,s){var l=o.__pictorialBundle,c=o.__pictorialMainPath;c?updateAttr(c,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,s):(c=o.__pictorialMainPath=createPath$1(n),l.add(c),updateAttr(c,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,s))}function createOrUpdateBarRect(o,a,n){var s=extend({},a.barRectShape),l=o.__pictorialBarRect;l?updateAttr(l,null,{shape:s},a,n):(l=o.__pictorialBarRect=new Rect$2({z2:2,shape:s,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),l.disableMorphing=!0,o.add(l))}function createOrUpdateClip(o,a,n,s){if(n.symbolClip){var l=o.__pictorialClipPath,c=extend({},n.clipShape),u=a.valueDim,d=n.animationModel,h=n.dataIndex;if(l)updateProps$1(l,{shape:c},d,h);else{c[u.wh]=0,l=new Rect$2({shape:c}),o.__pictorialBundle.setClipPath(l),o.__pictorialClipPath=l;var f={};f[u.wh]=n.clipShape[u.wh],graphic$1[s?"updateProps":"initProps"](l,{shape:f},d,h)}}}function getItemModel(o,a){var n=o.getItemModel(a);return n.getAnimationDelayParams=getAnimationDelayParams,n.isAnimationEnabled=isAnimationEnabled,n}function getAnimationDelayParams(o){return{index:o.__pictorialAnimationIndex,count:o.__pictorialRepeatTimes}}function isAnimationEnabled(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function createBar(o,a,n,s){var l=new Group$3,c=new Group$3;return l.add(c),l.__pictorialBundle=c,c.x=n.bundlePosition[0],c.y=n.bundlePosition[1],n.symbolRepeat?createOrUpdateRepeatSymbols(l,a,n):createOrUpdateSingleSymbol(l,a,n),createOrUpdateBarRect(l,n,s),createOrUpdateClip(l,a,n,s),l.__pictorialShapeStr=getShapeStr(o,n),l.__pictorialSymbolMeta=n,l}function updateBar(o,a,n){var s=n.animationModel,l=n.dataIndex,c=o.__pictorialBundle;updateProps$1(c,{x:n.bundlePosition[0],y:n.bundlePosition[1]},s,l),n.symbolRepeat?createOrUpdateRepeatSymbols(o,a,n,!0):createOrUpdateSingleSymbol(o,a,n,!0),createOrUpdateBarRect(o,n,!0),createOrUpdateClip(o,a,n,!0)}function removeBar(o,a,n,s){var l=s.__pictorialBarRect;l&&l.removeTextContent();var c=[];eachPath(s,function(u){c.push(u)}),s.__pictorialMainPath&&c.push(s.__pictorialMainPath),s.__pictorialClipPath&&(n=null),each$f(c,function(u){removeElement(u,{scaleX:0,scaleY:0},n,a,function(){s.parent&&s.parent.remove(s)})}),o.setItemGraphicEl(a,null)}function getShapeStr(o,a){return[o.getItemVisual(a.dataIndex,"symbol")||"none",!!a.symbolRepeat,!!a.symbolClip].join(":")}function eachPath(o,a,n){each$f(o.__pictorialBundle.children(),function(s){s!==o.__pictorialBarRect&&a.call(n,s)})}function updateAttr(o,a,n,s,l,c){a&&o.attr(a),s.symbolClip&&!l?n&&o.attr(n):n&&graphic$1[l?"updateProps":"initProps"](o,n,s.animationModel,s.dataIndex,c)}function updateCommon(o,a,n){var s=n.dataIndex,l=n.itemModel,c=l.getModel("emphasis"),u=c.getModel("itemStyle").getItemStyle(),d=l.getModel(["blur","itemStyle"]).getItemStyle(),h=l.getModel(["select","itemStyle"]).getItemStyle(),f=l.getShallow("cursor"),p=c.get("focus"),g=c.get("blurScope"),v=c.get("scale");eachPath(o,function(x){if(x instanceof ZRImage){var S=x.style;x.useStyle(extend({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},n.style))}else x.useStyle(n.style);var E=x.ensureState("emphasis");E.style=u,v&&(E.scaleX=x.scaleX*1.1,E.scaleY=x.scaleY*1.1),x.ensureState("blur").style=d,x.ensureState("select").style=h,f&&(x.cursor=f),x.z2=n.z2});var b=a.valueDim.posDesc[+(n.boundingLength>0)],w=o.__pictorialBarRect;w.ignoreClip=!0,setLabelStyle(w,getLabelStatesModels(l),{labelFetcher:a.seriesModel,labelDataIndex:s,defaultText:getDefaultLabel(a.seriesModel.getData(),s),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:b}),toggleHoverEmphasis(o,p,g,c.get("disabled"))}function toIntTimes(o){var a=Math.round(o);return Math.abs(o-a)<1e-4?a:Math.ceil(o)}var PictorialBarSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return a.prototype.getInitialData=function(n){return n.stack=null,o.prototype.getInitialData.apply(this,arguments)},a.type="series.pictorialBar",a.dependencies=["grid"],a.defaultOption=inheritDefaultOption(BaseBarSeriesModel.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),a}(BaseBarSeriesModel);function install$u(o){o.registerChartView(PictorialBarView),o.registerSeriesModel(PictorialBarSeriesModel),o.registerLayout(o.PRIORITY.VISUAL.LAYOUT,curry$1(layout$3,"pictorialBar")),o.registerLayout(o.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,createProgressiveLayout("pictorialBar"))}var ThemeRiverView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._layers=[],n}return a.prototype.render=function(n,s,l){var c=n.getData(),u=this,d=this.group,h=n.getLayerSeries(),f=c.getLayout("layoutInfo"),p=f.rect,g=f.boundaryGap;d.x=0,d.y=p.y+g[0];function v(S){return S.name}var b=new DataDiffer(this._layersSeries||[],h,v,v),w=[];b.add(bind$1(x,this,"add")).update(bind$1(x,this,"update")).remove(bind$1(x,this,"remove")).execute();function x(S,E,T){var C=u._layers;if(S==="remove"){d.remove(C[E]);return}for(var A=[],R=[],j,D=h[E].indices,O=0;O<D.length;O++){var H=c.getItemLayout(D[O]),q=H.x,Y=H.y0,te=H.y;A.push(q,Y),R.push(q,Y+te),j=c.getItemVisual(D[O],"style")}var ee,re=c.getItemLayout(D[0]),ne=n.getModel("label"),ce=ne.get("margin"),ve=n.getModel("emphasis");if(S==="add"){var be=w[E]=new Group$3;ee=new ECPolygon({shape:{points:A,stackedOnPoints:R,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),be.add(ee),d.add(be),n.isAnimationEnabled()&&ee.setClipPath(createGridClipShape(ee.getBoundingRect(),n,function(){ee.removeClipPath()}))}else{var be=C[T];ee=be.childAt(0),d.add(be),w[E]=be,updateProps$1(ee,{shape:{points:A,stackedOnPoints:R}},n),saveOldStyle(ee)}setLabelStyle(ee,getLabelStatesModels(n),{labelDataIndex:D[O-1],defaultText:c.getName(D[O-1]),inheritColor:j.fill},{normal:{verticalAlign:"middle"}}),ee.setTextConfig({position:null,local:!0});var me=ee.getTextContent();me&&(me.x=re.x-ce,me.y=re.y0+re.y/2),ee.useStyle(j),c.setItemGraphicEl(E,ee),setStatesStylesFromModel(ee,n),toggleHoverEmphasis(ee,ve.get("focus"),ve.get("blurScope"),ve.get("disabled"))}this._layersSeries=h,this._layers=w},a.type="themeRiver",a}(ChartView);function createGridClipShape(o,a,n){var s=new Rect$2({shape:{x:o.x-10,y:o.y-10,width:0,height:o.height+20}});return initProps(s,{shape:{x:o.x-50,width:o.width+100,height:o.height+20}},a,n),s}var DATA_NAME_INDEX=2,ThemeRiverSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n){o.prototype.init.apply(this,arguments),this.legendVisualProvider=new LegendVisualProvider(bind$1(this.getData,this),bind$1(this.getRawData,this))},a.prototype.fixData=function(n){var s=n.length,l={},c=groupData(n,function(v){return l.hasOwnProperty(v[0]+"")||(l[v[0]+""]=-1),v[2]}),u=[];c.buckets.each(function(v,b){u.push({name:b,dataList:v})});for(var d=u.length,h=0;h<d;++h){for(var f=u[h].name,p=0;p<u[h].dataList.length;++p){var g=u[h].dataList[p][0]+"";l[g]=h}for(var g in l)l.hasOwnProperty(g)&&l[g]!==h&&(l[g]=h,n[s]=[g,0,f],s++)}return n},a.prototype.getInitialData=function(n,s){for(var l=this.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0],c=l.get("type"),u=filter(n.data,function(w){return w[2]!==void 0}),d=this.fixData(u||[]),h=[],f=this.nameMap=createHashMap(),p=0,g=0;g<d.length;++g)h.push(d[g][DATA_NAME_INDEX]),f.get(d[g][DATA_NAME_INDEX])||(f.set(d[g][DATA_NAME_INDEX],p),p++);var v=prepareSeriesDataSchema(d,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:getDimensionTypeByAxis(c)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,b=new SeriesData(v,this);return b.initData(d),b},a.prototype.getLayerSeries=function(){for(var n=this.getData(),s=n.count(),l=[],c=0;c<s;++c)l[c]=c;var u=n.mapDimension("single"),d=groupData(l,function(f){return n.get("name",f)}),h=[];return d.buckets.each(function(f,p){f.sort(function(g,v){return n.get(u,g)-n.get(u,v)}),h.push({name:p,indices:f})}),h},a.prototype.getAxisTooltipData=function(n,s,l){isArray$1(n)||(n=n?[n]:[]);for(var c=this.getData(),u=this.getLayerSeries(),d=[],h=u.length,f,p=0;p<h;++p){for(var g=Number.MAX_VALUE,v=-1,b=u[p].indices.length,w=0;w<b;++w){var x=c.get(n[0],u[p].indices[w]),S=Math.abs(x-s);S<=g&&(f=x,g=S,v=u[p].indices[w])}d.push(v)}return{dataIndices:d,nestestValue:f}},a.prototype.formatTooltip=function(n,s,l){var c=this.getData(),u=c.getName(n),d=c.get(c.mapDimension("value"),n);return createTooltipMarkup("nameValue",{name:u,value:d})},a.type="series.themeRiver",a.dependencies=["singleAxis"],a.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},a}(SeriesModel);function themeRiverLayout(o,a){o.eachSeriesByType("themeRiver",function(n){var s=n.getData(),l=n.coordinateSystem,c={},u=l.getRect();c.rect=u;var d=n.get("boundaryGap"),h=l.getAxis();if(c.boundaryGap=d,h.orient==="horizontal"){d[0]=parsePercent(d[0],u.height),d[1]=parsePercent(d[1],u.height);var f=u.height-d[0]-d[1];doThemeRiverLayout(s,n,f)}else{d[0]=parsePercent(d[0],u.width),d[1]=parsePercent(d[1],u.width);var p=u.width-d[0]-d[1];doThemeRiverLayout(s,n,p)}s.setLayout("layoutInfo",c)})}function doThemeRiverLayout(o,a,n){if(o.count())for(var s=a.coordinateSystem,l=a.getLayerSeries(),c=o.mapDimension("single"),u=o.mapDimension("value"),d=map$1(l,function(S){return map$1(S.indices,function(E){var T=s.dataToPoint(o.get(c,E));return T[1]=o.get(u,E),T})}),h=computeBaseline(d),f=h.y0,p=n/h.max,g=l.length,v=l[0].indices.length,b,w=0;w<v;++w){b=f[w]*p,o.setItemLayout(l[0].indices[w],{layerIndex:0,x:d[0][w][0],y0:b,y:d[0][w][1]*p});for(var x=1;x<g;++x)b+=d[x-1][w][1]*p,o.setItemLayout(l[x].indices[w],{layerIndex:x,x:d[x][w][0],y0:b,y:d[x][w][1]*p})}}function computeBaseline(o){for(var a=o.length,n=o[0].length,s=[],l=[],c=0,u=0;u<n;++u){for(var d=0,h=0;h<a;++h)d+=o[h][u][1];d>c&&(c=d),s.push(d)}for(var f=0;f<n;++f)l[f]=(c-s[f])/2;c=0;for(var p=0;p<n;++p){var g=s[p]+l[p];g>c&&(c=g)}return{y0:l,max:c}}function install$t(o){o.registerChartView(ThemeRiverView),o.registerSeriesModel(ThemeRiverSeriesModel),o.registerLayout(themeRiverLayout),o.registerProcessor(dataFilter$1("themeRiver"))}var DEFAULT_SECTOR_Z=2,DEFAULT_TEXT_Z=4,SunburstPiece=function(o){__extends$1(a,o);function a(n,s,l,c){var u=o.call(this)||this;u.z2=DEFAULT_SECTOR_Z,u.textConfig={inside:!0},getECData(u).seriesIndex=s.seriesIndex;var d=new ZRText({z2:DEFAULT_TEXT_Z,silent:n.getModel().get(["label","silent"])});return u.setTextContent(d),u.updateData(!0,n,s,l,c),u}return a.prototype.updateData=function(n,s,l,c,u){this.node=s,s.piece=this,l=l||this._seriesModel,c=c||this._ecModel;var d=this;getECData(d).dataIndex=s.dataIndex;var h=s.getModel(),f=h.getModel("emphasis"),p=s.getLayout(),g=extend({},p);g.label=null;var v=s.getVisual("style");v.lineJoin="bevel";var b=s.getVisual("decal");b&&(v.decal=createOrUpdatePatternFromDecal(b,u));var w=getSectorCornerRadius(h.getModel("itemStyle"),g,!0);extend(g,w),each$f(SPECIAL_STATES,function(T){var C=d.ensureState(T),A=h.getModel([T,"itemStyle"]);C.style=A.getItemStyle();var R=getSectorCornerRadius(A,g);R&&(C.shape=R)}),n?(d.setShape(g),d.shape.r=p.r0,initProps(d,{shape:{r:p.r}},l,s.dataIndex)):(updateProps$1(d,{shape:g},l),saveOldStyle(d)),d.useStyle(v),this._updateLabel(l);var x=h.getShallow("cursor");x&&d.attr("cursor",x),this._seriesModel=l||this._seriesModel,this._ecModel=c||this._ecModel;var S=f.get("focus"),E=S==="relative"?concatArray(s.getAncestorsIndices(),s.getDescendantIndices()):S==="ancestor"?s.getAncestorsIndices():S==="descendant"?s.getDescendantIndices():S;toggleHoverEmphasis(this,E,f.get("blurScope"),f.get("disabled"))},a.prototype._updateLabel=function(n){var s=this,l=this.node.getModel(),c=l.getModel("label"),u=this.node.getLayout(),d=u.endAngle-u.startAngle,h=(u.startAngle+u.endAngle)/2,f=Math.cos(h),p=Math.sin(h),g=this,v=g.getTextContent(),b=this.node.dataIndex,w=c.get("minAngle")/180*Math.PI,x=c.get("show")&&!(w!=null&&Math.abs(d)<w);v.ignore=!x,each$f(DISPLAY_STATES,function(E){var T=E==="normal"?l.getModel("label"):l.getModel([E,"label"]),C=E==="normal",A=C?v:v.ensureState(E),R=n.getFormattedLabel(b,E);C&&(R=R||s.node.name),A.style=createTextStyle$1(T,{},null,E!=="normal",!0),R&&(A.style.text=R);var j=T.get("show");j!=null&&!C&&(A.ignore=!j);var D=S(T,"position"),O=C?g:g.states[E],H=O.style.fill;O.textConfig={outsideFill:T.get("color")==="inherit"?H:null,inside:D!=="outside"};var q,Y=S(T,"distance")||0,te=S(T,"align"),ee=S(T,"rotate"),re=Math.PI*.5,ne=Math.PI*1.5,ce=normalizeRadian(ee==="tangential"?Math.PI/2-h:h),ve=ce>re&&!isRadianAroundZero(ce-re)&&ce<ne;D==="outside"?(q=u.r+Y,te=ve?"right":"left"):!te||te==="center"?(d===2*Math.PI&&u.r0===0?q=0:q=(u.r+u.r0)/2,te="center"):te==="left"?(q=u.r0+Y,te=ve?"right":"left"):te==="right"&&(q=u.r-Y,te=ve?"left":"right"),A.style.align=te,A.style.verticalAlign=S(T,"verticalAlign")||"middle",A.x=q*f+u.cx,A.y=q*p+u.cy;var be=0;ee==="radial"?be=normalizeRadian(-h)+(ve?Math.PI:0):ee==="tangential"?be=normalizeRadian(Math.PI/2-h)+(ve?Math.PI:0):isNumber(ee)&&(be=ee*Math.PI/180),A.rotation=normalizeRadian(be)});function S(E,T){var C=E.get(T);return C??c.get(T)}v.dirtyStyle()},a}(Sector),ROOT_TO_NODE_ACTION="sunburstRootToNode",HIGHLIGHT_ACTION="sunburstHighlight",UNHIGHLIGHT_ACTION="sunburstUnhighlight";function installSunburstAction(o){o.registerAction({type:ROOT_TO_NODE_ACTION,update:"updateView"},function(a,n){n.eachComponent({mainType:"series",subType:"sunburst",query:a},s);function s(l,c){var u=retrieveTargetInfo(a,[ROOT_TO_NODE_ACTION],l);if(u){var d=l.getViewRoot();d&&(a.direction=aboveViewRoot(d,u.node)?"rollUp":"drillDown"),l.resetViewRoot(u.node)}}}),o.registerAction({type:HIGHLIGHT_ACTION,update:"none"},function(a,n,s){a=extend({},a),n.eachComponent({mainType:"series",subType:"sunburst",query:a},l);function l(c){var u=retrieveTargetInfo(a,[HIGHLIGHT_ACTION],c);u&&(a.dataIndex=u.node.dataIndex)}process.env.NODE_ENV!=="production"&&deprecateReplaceLog("sunburstHighlight","highlight"),s.dispatchAction(extend(a,{type:"highlight"}))}),o.registerAction({type:UNHIGHLIGHT_ACTION,update:"updateView"},function(a,n,s){a=extend({},a),process.env.NODE_ENV!=="production"&&deprecateReplaceLog("sunburstUnhighlight","downplay"),s.dispatchAction(extend(a,{type:"downplay"}))})}var SunburstView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l,c){var u=this;this.seriesModel=n,this.api=l,this.ecModel=s;var d=n.getData(),h=d.tree.root,f=n.getViewRoot(),p=this.group,g=n.get("renderLabelForZeroData"),v=[];f.eachNode(function(T){v.push(T)});var b=this._oldChildren||[];w(v,b),E(h,f),this._initEvents(),this._oldChildren=v;function w(T,C){if(T.length===0&&C.length===0)return;new DataDiffer(C,T,A,A).add(R).update(R).remove(curry$1(R,null)).execute();function A(j){return j.getId()}function R(j,D){var O=j==null?null:T[j],H=D==null?null:C[D];x(O,H)}}function x(T,C){if(!g&&T&&!T.getValue()&&(T=null),T!==h&&C!==h){if(C&&C.piece)T?(C.piece.updateData(!1,T,n,s,l),d.setItemGraphicEl(T.dataIndex,C.piece)):S(C);else if(T){var A=new SunburstPiece(T,n,s,l);p.add(A),d.setItemGraphicEl(T.dataIndex,A)}}}function S(T){T&&T.piece&&(p.remove(T.piece),T.piece=null)}function E(T,C){C.depth>0?(u.virtualPiece?u.virtualPiece.updateData(!1,T,n,s,l):(u.virtualPiece=new SunburstPiece(T,n,s,l),p.add(u.virtualPiece)),C.piece.off("click"),u.virtualPiece.on("click",function(A){u._rootToNode(C.parentNode)})):u.virtualPiece&&(p.remove(u.virtualPiece),u.virtualPiece=null)}},a.prototype._initEvents=function(){var n=this;this.group.off("click"),this.group.on("click",function(s){var l=!1,c=n.seriesModel.getViewRoot();c.eachNode(function(u){if(!l&&u.piece&&u.piece===s.target){var d=u.getModel().get("nodeClick");if(d==="rootToNode")n._rootToNode(u);else if(d==="link"){var h=u.getModel(),f=h.get("link");if(f){var p=h.get("target",!0)||"_blank";windowOpen(f,p)}}l=!0}})})},a.prototype._rootToNode=function(n){n!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:ROOT_TO_NODE_ACTION,from:this.uid,seriesId:this.seriesModel.id,targetNode:n})},a.prototype.containPoint=function(n,s){var l=s.getData(),c=l.getItemLayout(0);if(c){var u=n[0]-c.cx,d=n[1]-c.cy,h=Math.sqrt(u*u+d*d);return h<=c.r&&h>=c.r0}},a.type="sunburst",a}(ChartView),SunburstSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.ignoreStyleOnData=!0,n}return a.prototype.getInitialData=function(n,s){var l={name:n.name,children:n.data};completeTreeValue(l);var c=this._levelModels=map$1(n.levels||[],function(h){return new Model(h,this,s)},this),u=Tree.createTree(l,this,d);function d(h){h.wrapMethod("getItemModel",function(f,p){var g=u.getNodeByDataIndex(p),v=c[g.depth];return v&&(f.parentModel=v),f})}return u.data},a.prototype.optionUpdated=function(){this.resetViewRoot()},a.prototype.getDataParams=function(n){var s=o.prototype.getDataParams.apply(this,arguments),l=this.getData().tree.getNodeByDataIndex(n);return s.treePathInfo=wrapTreePathInfo(l,this),s},a.prototype.getLevelModel=function(n){return this._levelModels&&this._levelModels[n.depth]},a.prototype.getViewRoot=function(){return this._viewRoot},a.prototype.resetViewRoot=function(n){n?this._viewRoot=n:n=this._viewRoot;var s=this.getRawData().tree.root;(!n||n!==s&&!s.contains(n))&&(this._viewRoot=s)},a.prototype.enableAriaDecal=function(){enableAriaDecalForTree(this)},a.type="series.sunburst",a.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},a}(SeriesModel);function completeTreeValue(o){var a=0;each$f(o.children,function(s){completeTreeValue(s);var l=s.value;isArray$1(l)&&(l=l[0]),a+=l});var n=o.value;isArray$1(n)&&(n=n[0]),(n==null||isNaN(n))&&(n=a),n<0&&(n=0),isArray$1(o.value)?o.value[0]=n:o.value=n}var RADIAN=Math.PI/180;function sunburstLayout(o,a,n){a.eachSeriesByType(o,function(s){var l=s.get("center"),c=s.get("radius");isArray$1(c)||(c=[0,c]),isArray$1(l)||(l=[l,l]);var u=n.getWidth(),d=n.getHeight(),h=Math.min(u,d),f=parsePercent(l[0],u),p=parsePercent(l[1],d),g=parsePercent(c[0],h/2),v=parsePercent(c[1],h/2),b=-s.get("startAngle")*RADIAN,w=s.get("minAngle")*RADIAN,x=s.getData().tree.root,S=s.getViewRoot(),E=S.depth,T=s.get("sort");T!=null&&initChildren(S,T);var C=0;each$f(S.children,function(ce){!isNaN(ce.getValue())&&C++});var A=S.getValue(),R=Math.PI/(A||C)*2,j=S.depth>0,D=S.height-(j?-1:1),O=(v-g)/(D||1),H=s.get("clockwise"),q=s.get("stillShowZeroSum"),Y=H?1:-1,te=function(ce,ve){if(ce){var be=ve;if(ce!==x){var me=ce.getValue(),ae=A===0&&q?R:me*R;ae<w&&(ae=w),be=ve+Y*ae;var pe=ce.depth-E-(j?-1:1),ie=g+O*pe,se=g+O*(pe+1),de=s.getLevelModel(ce);if(de){var le=de.get("r0",!0),ge=de.get("r",!0),Re=de.get("radius",!0);Re!=null&&(le=Re[0],ge=Re[1]),le!=null&&(ie=parsePercent(le,h/2)),ge!=null&&(se=parsePercent(ge,h/2))}ce.setLayout({angle:ae,startAngle:ve,endAngle:be,clockwise:H,cx:f,cy:p,r0:ie,r:se})}if(ce.children&&ce.children.length){var we=0;each$f(ce.children,function(Se){we+=te(Se,ve+we)})}return be-ve}};if(j){var ee=g,re=g+O,ne=Math.PI*2;x.setLayout({angle:ne,startAngle:b,endAngle:b+ne,clockwise:H,cx:f,cy:p,r0:ee,r:re})}te(S,b)})}function initChildren(o,a){var n=o.children||[];o.children=sort(n,a),n.length&&each$f(o.children,function(s){initChildren(s,a)})}function sort(o,a){if(isFunction$1(a)){var n=map$1(o,function(l,c){var u=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return u}},index:c}});return n.sort(function(l,c){return a(l.params,c.params)}),map$1(n,function(l){return o[l.index]})}else{var s=a==="asc";return o.sort(function(l,c){var u=(l.getValue()-c.getValue())*(s?1:-1);return u===0?(l.dataIndex-c.dataIndex)*(s?-1:1):u})}}function sunburstVisual(o){var a={};function n(s,l,c){for(var u=s;u&&u.depth>1;)u=u.parentNode;var d=l.getColorFromPalette(u.name||u.dataIndex+"",a);return s.depth>1&&isString$2(d)&&(d=lift(d,(s.depth-1)/(c-1)*.5)),d}o.eachSeriesByType("sunburst",function(s){var l=s.getData(),c=l.tree;c.eachNode(function(u){var d=u.getModel(),h=d.getModel("itemStyle").getItemStyle();h.fill||(h.fill=n(u,s,c.root.height));var f=l.ensureUniqueItemVisual(u.dataIndex,"style");extend(f,h)})})}function install$s(o){o.registerChartView(SunburstView),o.registerSeriesModel(SunburstSeriesModel),o.registerLayout(curry$1(sunburstLayout,"sunburst")),o.registerProcessor(curry$1(dataFilter$1,"sunburst")),o.registerVisual(sunburstVisual),installSunburstAction(o)}var STYLE_VISUAL_TYPE={color:"fill",borderColor:"stroke"},NON_STYLE_VISUAL_PROPS={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},customInnerStore=makeInner(),CustomSeriesModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},a.prototype.getInitialData=function(n,s){return createSeriesData(null,this)},a.prototype.getDataParams=function(n,s,l){var c=o.prototype.getDataParams.call(this,n,s);return l&&(c.info=customInnerStore(l).info),c},a.type="series.custom",a.dependencies=["grid","polar","geo","singleAxis","calendar"],a.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},a}(SeriesModel);function dataToCoordSize$3(o,a){return a=a||[0,0],map$1(["x","y"],function(n,s){var l=this.getAxis(n),c=a[s],u=o[s]/2;return l.type==="category"?l.getBandWidth():Math.abs(l.dataToCoord(c-u)-l.dataToCoord(c+u))},this)}function cartesianPrepareCustom(o){var a=o.master.getRect();return{coordSys:{type:"cartesian2d",x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(n){return o.dataToPoint(n)},size:bind$1(dataToCoordSize$3,o)}}}function dataToCoordSize$2(o,a){return a=a||[0,0],map$1([0,1],function(n){var s=a[n],l=o[n]/2,c=[],u=[];return c[n]=s-l,u[n]=s+l,c[1-n]=u[1-n]=a[1-n],Math.abs(this.dataToPoint(c)[n]-this.dataToPoint(u)[n])},this)}function geoPrepareCustom(o){var a=o.getBoundingRect();return{coordSys:{type:"geo",x:a.x,y:a.y,width:a.width,height:a.height,zoom:o.getZoom()},api:{coord:function(n){return o.dataToPoint(n)},size:bind$1(dataToCoordSize$2,o)}}}function dataToCoordSize$1(o,a){var n=this.getAxis(),s=a instanceof Array?a[0]:a,l=(o instanceof Array?o[0]:o)/2;return n.type==="category"?n.getBandWidth():Math.abs(n.dataToCoord(s-l)-n.dataToCoord(s+l))}function singlePrepareCustom(o){var a=o.getRect();return{coordSys:{type:"singleAxis",x:a.x,y:a.y,width:a.width,height:a.height},api:{coord:function(n){return o.dataToPoint(n)},size:bind$1(dataToCoordSize$1,o)}}}function dataToCoordSize(o,a){return a=a||[0,0],map$1(["Radius","Angle"],function(n,s){var l="get"+n+"Axis",c=this[l](),u=a[s],d=o[s]/2,h=c.type==="category"?c.getBandWidth():Math.abs(c.dataToCoord(u-d)-c.dataToCoord(u+d));return n==="Angle"&&(h=h*Math.PI/180),h},this)}function polarPrepareCustom(o){var a=o.getRadiusAxis(),n=o.getAngleAxis(),s=a.getExtent();return s[0]>s[1]&&s.reverse(),{coordSys:{type:"polar",cx:o.cx,cy:o.cy,r:s[1],r0:s[0]},api:{coord:function(l){var c=a.dataToRadius(l[0]),u=n.dataToAngle(l[1]),d=o.coordToPoint([c,u]);return d.push(c,u*Math.PI/180),d},size:bind$1(dataToCoordSize,o)}}}function calendarPrepareCustom(o){var a=o.getRect(),n=o.getRangeInfo();return{coordSys:{type:"calendar",x:a.x,y:a.y,width:a.width,height:a.height,cellWidth:o.getCellWidth(),cellHeight:o.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(s,l){return o.dataToPoint(s,l)}}}}var deprecatedLogs={};function isEC4CompatibleStyle(o,a,n,s){return o&&(o.legacy||o.legacy!==!1&&!n&&!s&&a!=="tspan"&&(a==="text"||hasOwn(o,"text")))}function convertFromEC4CompatibleStyle(o,a,n){var s=o,l,c,u;if(a==="text")u=s;else{u={},hasOwn(s,"text")&&(u.text=s.text),hasOwn(s,"rich")&&(u.rich=s.rich),hasOwn(s,"textFill")&&(u.fill=s.textFill),hasOwn(s,"textStroke")&&(u.stroke=s.textStroke),hasOwn(s,"fontFamily")&&(u.fontFamily=s.fontFamily),hasOwn(s,"fontSize")&&(u.fontSize=s.fontSize),hasOwn(s,"fontStyle")&&(u.fontStyle=s.fontStyle),hasOwn(s,"fontWeight")&&(u.fontWeight=s.fontWeight),c={type:"text",style:u,silent:!0},l={};var d=hasOwn(s,"textPosition");n?l.position=d?s.textPosition:"inside":d&&(l.position=s.textPosition),hasOwn(s,"textPosition")&&(l.position=s.textPosition),hasOwn(s,"textOffset")&&(l.offset=s.textOffset),hasOwn(s,"textRotation")&&(l.rotation=s.textRotation),hasOwn(s,"textDistance")&&(l.distance=s.textDistance)}return convertEC4CompatibleRichItem(u,o),each$f(u.rich,function(h){convertEC4CompatibleRichItem(h,h)}),{textConfig:l,textContent:c}}function convertEC4CompatibleRichItem(o,a){a&&(a.font=a.textFont||a.font,hasOwn(a,"textStrokeWidth")&&(o.lineWidth=a.textStrokeWidth),hasOwn(a,"textAlign")&&(o.align=a.textAlign),hasOwn(a,"textVerticalAlign")&&(o.verticalAlign=a.textVerticalAlign),hasOwn(a,"textLineHeight")&&(o.lineHeight=a.textLineHeight),hasOwn(a,"textWidth")&&(o.width=a.textWidth),hasOwn(a,"textHeight")&&(o.height=a.textHeight),hasOwn(a,"textBackgroundColor")&&(o.backgroundColor=a.textBackgroundColor),hasOwn(a,"textPadding")&&(o.padding=a.textPadding),hasOwn(a,"textBorderColor")&&(o.borderColor=a.textBorderColor),hasOwn(a,"textBorderWidth")&&(o.borderWidth=a.textBorderWidth),hasOwn(a,"textBorderRadius")&&(o.borderRadius=a.textBorderRadius),hasOwn(a,"textBoxShadowColor")&&(o.shadowColor=a.textBoxShadowColor),hasOwn(a,"textBoxShadowBlur")&&(o.shadowBlur=a.textBoxShadowBlur),hasOwn(a,"textBoxShadowOffsetX")&&(o.shadowOffsetX=a.textBoxShadowOffsetX),hasOwn(a,"textBoxShadowOffsetY")&&(o.shadowOffsetY=a.textBoxShadowOffsetY))}function convertToEC4StyleForCustomSerise(o,a,n){var s=o;s.textPosition=s.textPosition||n.position||"inside",n.offset!=null&&(s.textOffset=n.offset),n.rotation!=null&&(s.textRotation=n.rotation),n.distance!=null&&(s.textDistance=n.distance);var l=s.textPosition.indexOf("inside")>=0,c=o.fill||"#000";convertToEC4RichItem(s,a);var u=s.textFill==null;return l?u&&(s.textFill=n.insideFill||"#fff",!s.textStroke&&n.insideStroke&&(s.textStroke=n.insideStroke),!s.textStroke&&(s.textStroke=c),s.textStrokeWidth==null&&(s.textStrokeWidth=2)):(u&&(s.textFill=o.fill||n.outsideFill||"#000"),!s.textStroke&&n.outsideStroke&&(s.textStroke=n.outsideStroke)),s.text=a.text,s.rich=a.rich,each$f(a.rich,function(d){convertToEC4RichItem(d,d)}),s}function convertToEC4RichItem(o,a){a&&(hasOwn(a,"fill")&&(o.textFill=a.fill),hasOwn(a,"stroke")&&(o.textStroke=a.fill),hasOwn(a,"lineWidth")&&(o.textStrokeWidth=a.lineWidth),hasOwn(a,"font")&&(o.font=a.font),hasOwn(a,"fontStyle")&&(o.fontStyle=a.fontStyle),hasOwn(a,"fontWeight")&&(o.fontWeight=a.fontWeight),hasOwn(a,"fontSize")&&(o.fontSize=a.fontSize),hasOwn(a,"fontFamily")&&(o.fontFamily=a.fontFamily),hasOwn(a,"align")&&(o.textAlign=a.align),hasOwn(a,"verticalAlign")&&(o.textVerticalAlign=a.verticalAlign),hasOwn(a,"lineHeight")&&(o.textLineHeight=a.lineHeight),hasOwn(a,"width")&&(o.textWidth=a.width),hasOwn(a,"height")&&(o.textHeight=a.height),hasOwn(a,"backgroundColor")&&(o.textBackgroundColor=a.backgroundColor),hasOwn(a,"padding")&&(o.textPadding=a.padding),hasOwn(a,"borderColor")&&(o.textBorderColor=a.borderColor),hasOwn(a,"borderWidth")&&(o.textBorderWidth=a.borderWidth),hasOwn(a,"borderRadius")&&(o.textBorderRadius=a.borderRadius),hasOwn(a,"shadowColor")&&(o.textBoxShadowColor=a.shadowColor),hasOwn(a,"shadowBlur")&&(o.textBoxShadowBlur=a.shadowBlur),hasOwn(a,"shadowOffsetX")&&(o.textBoxShadowOffsetX=a.shadowOffsetX),hasOwn(a,"shadowOffsetY")&&(o.textBoxShadowOffsetY=a.shadowOffsetY),hasOwn(a,"textShadowColor")&&(o.textShadowColor=a.textShadowColor),hasOwn(a,"textShadowBlur")&&(o.textShadowBlur=a.textShadowBlur),hasOwn(a,"textShadowOffsetX")&&(o.textShadowOffsetX=a.textShadowOffsetX),hasOwn(a,"textShadowOffsetY")&&(o.textShadowOffsetY=a.textShadowOffsetY))}function warnDeprecated(o,a){if(process.env.NODE_ENV!=="production"){var n=o+"^_^"+a;deprecatedLogs[n]||(console.warn('[ECharts] DEPRECATED: "'+o+'" has been deprecated. '+a),deprecatedLogs[n]=!0)}}var LEGACY_TRANSFORM_PROPS_MAP={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LEGACY_TRANSFORM_PROPS=keys$1(LEGACY_TRANSFORM_PROPS_MAP),TRANSFORM_PROPS_MAP=reduce(TRANSFORMABLE_PROPS,function(o,a){return o[a]=1,o},{}),transformPropNamesStr=TRANSFORMABLE_PROPS.join(", "),ELEMENT_ANIMATABLE_PROPS=["","style","shape","extra"],transitionInnerStore=makeInner();function getElementAnimationConfig(o,a,n,s,l){var c=o+"Animation",u=getAnimationConfig(o,s,l)||{},d=transitionInnerStore(a).userDuring;return u.duration>0&&(u.during=d?bind$1(duringCall,{el:a,userDuring:d}):null,u.setToFinal=!0,u.scope=o),extend(u,n[c]),u}function applyUpdateTransition(o,a,n,s){s=s||{};var l=s.dataIndex,c=s.isInit,u=s.clearStyle,d=n.isAnimationEnabled(),h=transitionInnerStore(o),f=a.style;h.userDuring=a.during;var p={},g={};if(prepareTransformAllPropsFinal(o,a,g),prepareShapeOrExtraAllPropsFinal("shape",a,g),prepareShapeOrExtraAllPropsFinal("extra",a,g),!c&&d&&(prepareTransformTransitionFrom(o,a,p),prepareShapeOrExtraTransitionFrom("shape",o,a,p),prepareShapeOrExtraTransitionFrom("extra",o,a,p),prepareStyleTransitionFrom(o,a,f,p)),g.style=f,applyPropsDirectly(o,g,u),applyMiscProps(o,a),d)if(c){var v={};each$f(ELEMENT_ANIMATABLE_PROPS,function(w){var x=w?a[w]:a;x&&x.enterFrom&&(w&&(v[w]=v[w]||{}),extend(w?v[w]:v,x.enterFrom))});var b=getElementAnimationConfig("enter",o,a,n,l);b.duration>0&&o.animateFrom(v,b)}else applyPropsTransition(o,a,l||0,n,p);updateLeaveTo(o,a),f?o.dirty():o.markRedraw()}function updateLeaveTo(o,a){for(var n=transitionInnerStore(o).leaveToProps,s=0;s<ELEMENT_ANIMATABLE_PROPS.length;s++){var l=ELEMENT_ANIMATABLE_PROPS[s],c=l?a[l]:a;c&&c.leaveTo&&(n||(n=transitionInnerStore(o).leaveToProps={}),l&&(n[l]=n[l]||{}),extend(l?n[l]:n,c.leaveTo))}}function applyLeaveTransition(o,a,n,s){if(o){var l=o.parent,c=transitionInnerStore(o).leaveToProps;if(c){var u=getElementAnimationConfig("update",o,a,n,0);u.done=function(){l.remove(o)},o.animateTo(c,u)}else l.remove(o)}}function isTransitionAll(o){return o==="all"}function applyPropsDirectly(o,a,n){var s=a.style;if(!o.isGroup&&s){if(n){o.useStyle({});for(var l=o.animators,c=0;c<l.length;c++){var u=l[c];u.targetName==="style"&&u.changeTarget(o.style)}}o.setStyle(s)}a&&(a.style=null,a&&o.attr(a),a.style=s)}function applyPropsTransition(o,a,n,s,l){if(l){var c=getElementAnimationConfig("update",o,a,s,n);c.duration>0&&o.animateFrom(l,c)}}function applyMiscProps(o,a){hasOwn(a,"silent")&&(o.silent=a.silent),hasOwn(a,"ignore")&&(o.ignore=a.ignore),o instanceof Displayable&&hasOwn(a,"invisible")&&(o.invisible=a.invisible),o instanceof Path&&hasOwn(a,"autoBatch")&&(o.autoBatch=a.autoBatch)}var tmpDuringScope={},transitionDuringAPI={setTransform:function(o,a){return process.env.NODE_ENV!=="production"&&assert(hasOwn(TRANSFORM_PROPS_MAP,o),"Only "+transformPropNamesStr+" available in `setTransform`."),tmpDuringScope.el[o]=a,this},getTransform:function(o){return process.env.NODE_ENV!=="production"&&assert(hasOwn(TRANSFORM_PROPS_MAP,o),"Only "+transformPropNamesStr+" available in `getTransform`."),tmpDuringScope.el[o]},setShape:function(o,a){process.env.NODE_ENV!=="production"&&assertNotReserved(o);var n=tmpDuringScope.el,s=n.shape||(n.shape={});return s[o]=a,n.dirtyShape&&n.dirtyShape(),this},getShape:function(o){process.env.NODE_ENV!=="production"&&assertNotReserved(o);var a=tmpDuringScope.el.shape;if(a)return a[o]},setStyle:function(o,a){process.env.NODE_ENV!=="production"&&assertNotReserved(o);var n=tmpDuringScope.el,s=n.style;return s&&(process.env.NODE_ENV!=="production"&&eqNaN(a)&&warn("style."+o+" must not be assigned with NaN."),s[o]=a,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(o){process.env.NODE_ENV!=="production"&&assertNotReserved(o);var a=tmpDuringScope.el.style;if(a)return a[o]},setExtra:function(o,a){process.env.NODE_ENV!=="production"&&assertNotReserved(o);var n=tmpDuringScope.el.extra||(tmpDuringScope.el.extra={});return n[o]=a,this},getExtra:function(o){process.env.NODE_ENV!=="production"&&assertNotReserved(o);var a=tmpDuringScope.el.extra;if(a)return a[o]}};function assertNotReserved(o){if(process.env.NODE_ENV!=="production"&&(o==="transition"||o==="enterFrom"||o==="leaveTo"))throw new Error('key must not be "'+o+'"')}function duringCall(){var o=this,a=o.el;if(a){var n=transitionInnerStore(a).userDuring,s=o.userDuring;if(n!==s){o.el=o.userDuring=null;return}tmpDuringScope.el=a,s(transitionDuringAPI)}}function prepareShapeOrExtraTransitionFrom(o,a,n,s){var l=n[o];if(l){var c=a[o],u;if(c){var d=n.transition,h=l.transition;if(h)if(!u&&(u=s[o]={}),isTransitionAll(h))extend(u,c);else for(var f=normalizeToArray(h),p=0;p<f.length;p++){var g=f[p],v=c[g];u[g]=v}else if(isTransitionAll(d)||indexOf(d,o)>=0){!u&&(u=s[o]={});for(var b=keys$1(c),p=0;p<b.length;p++){var g=b[p],v=c[g];isNonStyleTransitionEnabled(l[g],v)&&(u[g]=v)}}}}}function prepareShapeOrExtraAllPropsFinal(o,a,n){var s=a[o];if(s)for(var l=n[o]={},c=keys$1(s),u=0;u<c.length;u++){var d=c[u];l[d]=cloneValue(s[d])}}function prepareTransformTransitionFrom(o,a,n){for(var s=a.transition,l=isTransitionAll(s)?TRANSFORMABLE_PROPS:normalizeToArray(s||[]),c=0;c<l.length;c++){var u=l[c];if(!(u==="style"||u==="shape"||u==="extra")){var d=o[u];process.env.NODE_ENV!=="production"&&checkTransformPropRefer(u,"el.transition"),n[u]=d}}}function prepareTransformAllPropsFinal(o,a,n){for(var s=0;s<LEGACY_TRANSFORM_PROPS.length;s++){var l=LEGACY_TRANSFORM_PROPS[s],c=LEGACY_TRANSFORM_PROPS_MAP[l],u=a[l];u&&(n[c[0]]=u[0],n[c[1]]=u[1])}for(var s=0;s<TRANSFORMABLE_PROPS.length;s++){var d=TRANSFORMABLE_PROPS[s];a[d]!=null&&(n[d]=a[d])}}function prepareStyleTransitionFrom(o,a,n,s){if(n){var l=o.style,c;if(l){var u=n.transition,d=a.transition;if(u&&!isTransitionAll(u)){var h=normalizeToArray(u);!c&&(c=s.style={});for(var f=0;f<h.length;f++){var p=h[f],g=l[p];c[p]=g}}else if(o.getAnimationStyleProps&&(isTransitionAll(d)||isTransitionAll(u)||indexOf(d,"style")>=0)){var v=o.getAnimationStyleProps(),b=v?v.style:null;if(b){!c&&(c=s.style={});for(var w=keys$1(n),f=0;f<w.length;f++){var p=w[f];if(b[p]){var g=l[p];c[p]=g}}}}}}}function isNonStyleTransitionEnabled(o,a){return isArrayLike(o)?o!==a:o!=null&&isFinite(o)}var checkTransformPropRefer;process.env.NODE_ENV!=="production"&&(checkTransformPropRefer=function(o,a){hasOwn(TRANSFORM_PROPS_MAP,o)||warn("Prop `"+o+"` is not a permitted in `"+a+"`. Only `"+keys$1(TRANSFORM_PROPS_MAP).join("`, `")+"` are permitted.")});var getStateToRestore=makeInner(),KEYFRAME_EXCLUDE_KEYS=["percent","easing","shape","style","extra"];function stopPreviousKeyframeAnimationAndRestore(o){o.stopAnimation("keyframe"),o.attr(getStateToRestore(o))}function applyKeyframeAnimation(o,a,n){if(!(!n.isAnimationEnabled()||!a)){if(isArray$1(a)){each$f(a,function(d){applyKeyframeAnimation(o,d,n)});return}var s=a.keyframes,l=a.duration;if(n&&l==null){var c=getAnimationConfig("enter",n,0);l=c&&c.duration}if(!(!s||!l)){var u=getStateToRestore(o);each$f(ELEMENT_ANIMATABLE_PROPS,function(d){if(!(d&&!o[d])){var h,f=!1;s.sort(function(p,g){return p.percent-g.percent}),each$f(s,function(p){var g=o.animators,v=d?p[d]:p;if(process.env.NODE_ENV!=="production"&&p.percent>=1&&(f=!0),!!v){var b=keys$1(v);if(d||(b=filter(b,function(S){return indexOf(KEYFRAME_EXCLUDE_KEYS,S)<0})),!!b.length){h||(h=o.animate(d,a.loop,!0),h.scope="keyframe");for(var w=0;w<g.length;w++)g[w]!==h&&g[w].targetName===h.targetName&&g[w].stopTracks(b);d&&(u[d]=u[d]||{});var x=d?u[d]:u;each$f(b,function(S){x[S]=((d?o[d]:o)||{})[S]}),h.whenWithKeys(l*p.percent,v,b,p.easing)}}}),h&&(process.env.NODE_ENV!=="production"&&(f||warn("End frame with percent: 1 is missing in the keyframeAnimation.",!0)),h.delay(a.delay||0).duration(l).start(a.easing))}})}}}var EMPHASIS="emphasis",NORMAL="normal",BLUR="blur",SELECT="select",STATES=[NORMAL,EMPHASIS,BLUR,SELECT],PATH_ITEM_STYLE={normal:["itemStyle"],emphasis:[EMPHASIS,"itemStyle"],blur:[BLUR,"itemStyle"],select:[SELECT,"itemStyle"]},PATH_LABEL={normal:["label"],emphasis:[EMPHASIS,"label"],blur:[BLUR,"label"],select:[SELECT,"label"]},DEFAULT_TRANSITION=["x","y"],GROUP_DIFF_PREFIX="e\0\0",attachedTxInfoTmp={normal:{},emphasis:{},blur:{},select:{}},prepareCustoms={cartesian2d:cartesianPrepareCustom,geo:geoPrepareCustom,single:singlePrepareCustom,polar:polarPrepareCustom,calendar:calendarPrepareCustom};function isPath(o){return o instanceof Path}function isDisplayable(o){return o instanceof Displayable}function copyElement(o,a){a.copyTransform(o),isDisplayable(a)&&isDisplayable(o)&&(a.setStyle(o.style),a.z=o.z,a.z2=o.z2,a.zlevel=o.zlevel,a.invisible=o.invisible,a.ignore=o.ignore,isPath(a)&&isPath(o)&&a.setShape(o.shape))}var CustomChartView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l,c){this._progressiveEls=null;var u=this._data,d=n.getData(),h=this.group,f=makeRenderItem(n,d,s,l);u||h.removeAll(),d.diff(u).add(function(g){createOrUpdateItem(l,null,g,f(g,c),n,h,d)}).remove(function(g){var v=u.getItemGraphicEl(g);v&&applyLeaveTransition(v,customInnerStore(v).option,n)}).update(function(g,v){var b=u.getItemGraphicEl(v);createOrUpdateItem(l,b,g,f(g,c),n,h,d)}).execute();var p=n.get("clip",!0)?createClipPath(n.coordinateSystem,!1,n):null;p?h.setClipPath(p):h.removeClipPath(),this._data=d},a.prototype.incrementalPrepareRender=function(n,s,l){this.group.removeAll(),this._data=null},a.prototype.incrementalRender=function(n,s,l,c,u){var d=s.getData(),h=makeRenderItem(s,d,l,c),f=this._progressiveEls=[];function p(b){b.isGroup||(b.incremental=!0,b.ensureState("emphasis").hoverLayer=!0)}for(var g=n.start;g<n.end;g++){var v=createOrUpdateItem(null,null,g,h(g,u),s,this.group,d);v&&(v.traverse(p),f.push(v))}},a.prototype.eachRendered=function(n){traverseElements(this._progressiveEls||this.group,n)},a.prototype.filterForExposedEvent=function(n,s,l,c){var u=s.element;if(u==null||l.name===u)return!0;for(;(l=l.__hostTarget||l.parent)&&l!==this.group;)if(l.name===u)return!0;return!1},a.type="custom",a}(ChartView);function createEl$1(o){var a=o.type,n;if(a==="path"){var s=o.shape,l=s.width!=null&&s.height!=null?{x:s.x||0,y:s.y||0,width:s.width,height:s.height}:null,c=getPathData(s);n=makePath(c,null,l,s.layout||"center"),customInnerStore(n).customPathData=c}else if(a==="image")n=new ZRImage({}),customInnerStore(n).customImagePath=o.style.image;else if(a==="text")n=new ZRText({});else if(a==="group")n=new Group$3;else{if(a==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var u=getShapeClass(a);if(!u){var d="";process.env.NODE_ENV!=="production"&&(d='graphic type "'+a+'" can not be found.'),throwError(d)}n=new u}return customInnerStore(n).customGraphicType=a,n.name=o.name,n.z2EmphasisLift=1,n.z2SelectLift=1,n}function updateElNormal(o,a,n,s,l,c,u){stopPreviousKeyframeAnimationAndRestore(a);var d=l&&l.normal.cfg;d&&a.setTextConfig(d),s&&s.transition==null&&(s.transition=DEFAULT_TRANSITION);var h=s&&s.style;if(h){if(a.type==="text"){var f=h;hasOwn(f,"textFill")&&(f.fill=f.textFill),hasOwn(f,"textStroke")&&(f.stroke=f.textStroke)}var p=void 0,g=isPath(a)?h.decal:null;o&&g&&(g.dirty=!0,p=createOrUpdatePatternFromDecal(g,o)),h.__decalPattern=p}if(isDisplayable(a)&&h){var p=h.__decalPattern;p&&(h.decal=p)}applyUpdateTransition(a,s,c,{dataIndex:n,isInit:u,clearStyle:!0}),applyKeyframeAnimation(a,s.keyframeAnimation,c)}function updateElOnState(o,a,n,s,l){var c=a.isGroup?null:a,u=l&&l[o].cfg;if(c){var d=c.ensureState(o);if(s===!1){var h=c.getState(o);h&&(h.style=null)}else d.style=s||null;u&&(d.textConfig=u),setDefaultStateProxy(c)}}function updateZ(o,a,n){if(!o.isGroup){var s=o,l=n.currentZ,c=n.currentZLevel;s.z=l,s.zlevel=c;var u=a.z2;u!=null&&(s.z2=u||0);for(var d=0;d<STATES.length;d++)updateZForEachState(s,a,STATES[d])}}function updateZForEachState(o,a,n){var s=n===NORMAL,l=s?a:retrieveStateOption(a,n),c=l?l.z2:null,u;c!=null&&(u=s?o:o.ensureState(n),u.z2=c||0)}function makeRenderItem(o,a,n,s){var l=o.get("renderItem"),c=o.coordinateSystem,u={};c&&(process.env.NODE_ENV!=="production"&&(assert(l,"series.render is required."),assert(c.prepareCustoms||prepareCustoms[c.type],"This coordSys does not support custom series.")),u=c.prepareCustoms?c.prepareCustoms(c):prepareCustoms[c.type](c));for(var d=defaults({getWidth:s.getWidth,getHeight:s.getHeight,getZr:s.getZr,getDevicePixelRatio:s.getDevicePixelRatio,value:A,style:j,ordinalRawValue:R,styleEmphasis:D,visual:q,barLayout:Y,currentSeriesIndices:te,font:ee},u.api||{}),h={context:{},seriesId:o.id,seriesName:o.name,seriesIndex:o.seriesIndex,coordSys:u.coordSys,dataInsideLength:a.count(),encode:wrapEncodeDef(o.getData())},f,p,g={},v={},b={},w={},x=0;x<STATES.length;x++){var S=STATES[x];b[S]=o.getModel(PATH_ITEM_STYLE[S]),w[S]=o.getModel(PATH_LABEL[S])}function E(re){return re===f?p||(p=a.getItemModel(re)):a.getItemModel(re)}function T(re,ne){return a.hasItemOption?re===f?g[ne]||(g[ne]=E(re).getModel(PATH_ITEM_STYLE[ne])):E(re).getModel(PATH_ITEM_STYLE[ne]):b[ne]}function C(re,ne){return a.hasItemOption?re===f?v[ne]||(v[ne]=E(re).getModel(PATH_LABEL[ne])):E(re).getModel(PATH_LABEL[ne]):w[ne]}return function(re,ne){return f=re,p=null,g={},v={},l&&l(defaults({dataIndexInside:re,dataIndex:a.getRawIndex(re),actionType:ne?ne.type:null},h),d)};function A(re,ne){return ne==null&&(ne=f),a.getStore().get(a.getDimensionIndex(re||0),ne)}function R(re,ne){ne==null&&(ne=f),re=re||0;var ce=a.getDimensionInfo(re);if(!ce){var ve=a.getDimensionIndex(re);return ve>=0?a.getStore().get(ve,ne):void 0}var be=a.get(ce.name,ne),me=ce&&ce.ordinalMeta;return me?me.categories[be]:be}function j(re,ne){process.env.NODE_ENV!=="production"&&warnDeprecated("api.style","Please write literal style directly instead."),ne==null&&(ne=f);var ce=a.getItemVisual(ne,"style"),ve=ce&&ce.fill,be=ce&&ce.opacity,me=T(ne,NORMAL).getItemStyle();ve!=null&&(me.fill=ve),be!=null&&(me.opacity=be);var ae={inheritColor:isString$2(ve)?ve:"#000"},pe=C(ne,NORMAL),ie=createTextStyle$1(pe,null,ae,!1,!0);ie.text=pe.getShallow("show")?retrieve2(o.getFormattedLabel(ne,NORMAL),getDefaultLabel(a,ne)):null;var se=createTextConfig(pe,ae,!1);return H(re,me),me=convertToEC4StyleForCustomSerise(me,ie,se),re&&O(me,re),me.legacy=!0,me}function D(re,ne){process.env.NODE_ENV!=="production"&&warnDeprecated("api.styleEmphasis","Please write literal style directly instead."),ne==null&&(ne=f);var ce=T(ne,EMPHASIS).getItemStyle(),ve=C(ne,EMPHASIS),be=createTextStyle$1(ve,null,null,!0,!0);be.text=ve.getShallow("show")?retrieve3(o.getFormattedLabel(ne,EMPHASIS),o.getFormattedLabel(ne,NORMAL),getDefaultLabel(a,ne)):null;var me=createTextConfig(ve,null,!0);return H(re,ce),ce=convertToEC4StyleForCustomSerise(ce,be,me),re&&O(ce,re),ce.legacy=!0,ce}function O(re,ne){for(var ce in ne)hasOwn(ne,ce)&&(re[ce]=ne[ce])}function H(re,ne){re&&(re.textFill&&(ne.textFill=re.textFill),re.textPosition&&(ne.textPosition=re.textPosition))}function q(re,ne){if(ne==null&&(ne=f),hasOwn(STYLE_VISUAL_TYPE,re)){var ce=a.getItemVisual(ne,"style");return ce?ce[STYLE_VISUAL_TYPE[re]]:null}if(hasOwn(NON_STYLE_VISUAL_PROPS,re))return a.getItemVisual(ne,re)}function Y(re){if(c.type==="cartesian2d"){var ne=c.getBaseAxis();return getLayoutOnAxis(defaults({axis:ne},re))}}function te(){return n.getCurrentSeriesIndices()}function ee(re){return getFont(re,n)}}function wrapEncodeDef(o){var a={};return each$f(o.dimensions,function(n){var s=o.getDimensionInfo(n);if(!s.isExtraCoord){var l=s.coordDim,c=a[l]=a[l]||[];c[s.coordDimIndex]=o.getDimensionIndex(n)}}),a}function createOrUpdateItem(o,a,n,s,l,c,u){if(!s){c.remove(a);return}var d=doCreateOrUpdateEl(o,a,n,s,l,c);return d&&u.setItemGraphicEl(n,d),d&&toggleHoverEmphasis(d,s.focus,s.blurScope,s.emphasisDisabled),d}function doCreateOrUpdateEl(o,a,n,s,l,c){process.env.NODE_ENV!=="production"&&assert(s,"should not have an null/undefined element setting");var u=-1,d=a;a&&doesElNeedRecreate(a,s,l)&&(u=indexOf(c.childrenRef(),a),a=null);var h=!a,f=a;f?f.clearStates():(f=createEl$1(s),d&&copyElement(d,f)),s.morph===!1?f.disableMorphing=!0:f.disableMorphing&&(f.disableMorphing=!1),attachedTxInfoTmp.normal.cfg=attachedTxInfoTmp.normal.conOpt=attachedTxInfoTmp.emphasis.cfg=attachedTxInfoTmp.emphasis.conOpt=attachedTxInfoTmp.blur.cfg=attachedTxInfoTmp.blur.conOpt=attachedTxInfoTmp.select.cfg=attachedTxInfoTmp.select.conOpt=null,attachedTxInfoTmp.isLegacy=!1,doCreateOrUpdateAttachedTx(f,n,s,l,h,attachedTxInfoTmp),doCreateOrUpdateClipPath(f,n,s,l,h),updateElNormal(o,f,n,s,attachedTxInfoTmp,l,h),hasOwn(s,"info")&&(customInnerStore(f).info=s.info);for(var p=0;p<STATES.length;p++){var g=STATES[p];if(g!==NORMAL){var v=retrieveStateOption(s,g),b=retrieveStyleOptionOnState(s,v,g);updateElOnState(g,f,v,b,attachedTxInfoTmp)}}return updateZ(f,s,l),s.type==="group"&&mergeChildren(o,f,n,s,l),u>=0?c.replaceAt(f,u):c.add(f),f}function doesElNeedRecreate(o,a,n){var s=customInnerStore(o),l=a.type,c=a.shape,u=a.style;return n.isUniversalTransitionEnabled()||l!=null&&l!==s.customGraphicType||l==="path"&&hasOwnPathData(c)&&getPathData(c)!==s.customPathData||l==="image"&&hasOwn(u,"image")&&u.image!==s.customImagePath}function doCreateOrUpdateClipPath(o,a,n,s,l){var c=n.clipPath;if(c===!1)o&&o.getClipPath()&&o.removeClipPath();else if(c){var u=o.getClipPath();u&&doesElNeedRecreate(u,c,s)&&(u=null),u||(u=createEl$1(c),process.env.NODE_ENV!=="production"&&assert(isPath(u),"Only any type of `path` can be used in `clipPath`, rather than "+u.type+"."),o.setClipPath(u)),updateElNormal(null,u,a,c,null,s,l)}}function doCreateOrUpdateAttachedTx(o,a,n,s,l,c){if(!o.isGroup){processTxInfo(n,null,c),processTxInfo(n,EMPHASIS,c);var u=c.normal.conOpt,d=c.emphasis.conOpt,h=c.blur.conOpt,f=c.select.conOpt;if(u!=null||d!=null||f!=null||h!=null){var p=o.getTextContent();if(u===!1)p&&o.removeTextContent();else{u=c.normal.conOpt=u||{type:"text"},p?p.clearStates():(p=createEl$1(u),o.setTextContent(p)),updateElNormal(null,p,a,u,null,s,l);for(var g=u&&u.style,v=0;v<STATES.length;v++){var b=STATES[v];if(b!==NORMAL){var w=c[b].conOpt;updateElOnState(b,p,w,retrieveStyleOptionOnState(u,w,b),null)}}g?p.dirty():p.markRedraw()}}}}function processTxInfo(o,a,n){var s=a?retrieveStateOption(o,a):o,l=a?retrieveStyleOptionOnState(o,s,EMPHASIS):o.style,c=o.type,u=s?s.textConfig:null,d=o.textContent,h=d?a?retrieveStateOption(d,a):d:null;if(l&&(n.isLegacy||isEC4CompatibleStyle(l,c,!!u,!!h))){n.isLegacy=!0;var f=convertFromEC4CompatibleStyle(l,c,!a);!u&&f.textConfig&&(u=f.textConfig),!h&&f.textContent&&(h=f.textContent)}if(!a&&h){var p=h;!p.type&&(p.type="text"),process.env.NODE_ENV!=="production"&&assert(p.type==="text",'textContent.type must be "text"')}var g=a?n[a]:n.normal;g.cfg=u,g.conOpt=h}function retrieveStateOption(o,a){return a?o?o[a]:null:o}function retrieveStyleOptionOnState(o,a,n){var s=a&&a.style;return s==null&&n===EMPHASIS&&o&&(s=o.styleEmphasis),s}function mergeChildren(o,a,n,s,l){var c=s.children,u=c?c.length:0,d=s.$mergeChildren,h=d==="byName"||s.diffChildrenByName,f=d===!1;if(!(!u&&!h&&!f)){if(h){diffGroupChildren({api:o,oldChildren:a.children()||[],newChildren:c||[],dataIndex:n,seriesModel:l,group:a});return}f&&a.removeAll();for(var p=0;p<u;p++){var g=c[p],v=a.childAt(p);g?(g.ignore==null&&(g.ignore=!1),doCreateOrUpdateEl(o,v,n,g,l,a)):(process.env.NODE_ENV!=="production"&&assert(v,"renderItem should not return a group containing elements as null/undefined/{} if they do not exist before."),v.ignore=!0)}for(var b=a.childCount()-1;b>=p;b--){var w=a.childAt(b);removeChildFromGroup(a,w,l)}}}function removeChildFromGroup(o,a,n){a&&applyLeaveTransition(a,customInnerStore(o).option,n)}function diffGroupChildren(o){new DataDiffer(o.oldChildren,o.newChildren,getKey,getKey,o).add(processAddUpdate).update(processAddUpdate).remove(processRemove).execute()}function getKey(o,a){var n=o&&o.name;return n??GROUP_DIFF_PREFIX+a}function processAddUpdate(o,a){var n=this.context,s=o!=null?n.newChildren[o]:null,l=a!=null?n.oldChildren[a]:null;doCreateOrUpdateEl(n.api,l,n.dataIndex,s,n.seriesModel,n.group)}function processRemove(o){var a=this.context,n=a.oldChildren[o];n&&applyLeaveTransition(n,customInnerStore(n).option,a.seriesModel)}function getPathData(o){return o&&(o.pathData||o.d)}function hasOwnPathData(o){return o&&(hasOwn(o,"pathData")||hasOwn(o,"d"))}function install$r(o){o.registerChartView(CustomChartView),o.registerSeriesModel(CustomSeriesModel)}var inner$b=makeInner(),clone$1=clone$4,bind=bind$1,BaseAxisPointer=function(){function o(){this._dragging=!1,this.animationThreshold=15}return o.prototype.render=function(a,n,s,l){var c=n.get("value"),u=n.get("status");if(this._axisModel=a,this._axisPointerModel=n,this._api=s,!(!l&&this._lastValue===c&&this._lastStatus===u)){this._lastValue=c,this._lastStatus=u;var d=this._group,h=this._handle;if(!u||u==="hide"){d&&d.hide(),h&&h.hide();return}d&&d.show(),h&&h.show();var f={};this.makeElOption(f,c,a,n,s);var p=f.graphicKey;p!==this._lastGraphicKey&&this.clear(s),this._lastGraphicKey=p;var g=this._moveAnimation=this.determineAnimation(a,n);if(!d)d=this._group=new Group$3,this.createPointerEl(d,f,a,n),this.createLabelEl(d,f,a,n),s.getZr().add(d);else{var v=curry$1(updateProps,n,g);this.updatePointerEl(d,f,v),this.updateLabelEl(d,f,v,n)}updateMandatoryProps(d,n,!0),this._renderHandle(c)}},o.prototype.remove=function(a){this.clear(a)},o.prototype.dispose=function(a){this.clear(a)},o.prototype.determineAnimation=function(a,n){var s=n.get("animation"),l=a.axis,c=l.type==="category",u=n.get("snap");if(!u&&!c)return!1;if(s==="auto"||s==null){var d=this.animationThreshold;if(c&&l.getBandWidth()>d)return!0;if(u){var h=getAxisInfo$1(a).seriesDataCount,f=l.getExtent();return Math.abs(f[0]-f[1])/h>d}return!1}return s===!0},o.prototype.makeElOption=function(a,n,s,l,c){},o.prototype.createPointerEl=function(a,n,s,l){var c=n.pointer;if(c){var u=inner$b(a).pointerEl=new graphic$1[c.type](clone$1(n.pointer));a.add(u)}},o.prototype.createLabelEl=function(a,n,s,l){if(n.label){var c=inner$b(a).labelEl=new ZRText(clone$1(n.label));a.add(c),updateLabelShowHide(c,l)}},o.prototype.updatePointerEl=function(a,n,s){var l=inner$b(a).pointerEl;l&&n.pointer&&(l.setStyle(n.pointer.style),s(l,{shape:n.pointer.shape}))},o.prototype.updateLabelEl=function(a,n,s,l){var c=inner$b(a).labelEl;c&&(c.setStyle(n.label.style),s(c,{x:n.label.x,y:n.label.y}),updateLabelShowHide(c,l))},o.prototype._renderHandle=function(a){if(!(this._dragging||!this.updateHandleTransform)){var n=this._axisPointerModel,s=this._api.getZr(),l=this._handle,c=n.getModel("handle"),u=n.get("status");if(!c.get("show")||!u||u==="hide"){l&&s.remove(l),this._handle=null;return}var d;this._handle||(d=!0,l=this._handle=createIcon(c.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(f){stop(f.event)},onmousedown:bind(this._onHandleDragMove,this,0,0),drift:bind(this._onHandleDragMove,this),ondragend:bind(this._onHandleDragEnd,this)}),s.add(l)),updateMandatoryProps(l,n,!1),l.setStyle(c.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var h=c.get("size");isArray$1(h)||(h=[h,h]),l.scaleX=h[0]/2,l.scaleY=h[1]/2,createOrUpdate(this,"_doDispatchAxisPointer",c.get("throttle")||0,"fixRate"),this._moveHandleToValue(a,d)}},o.prototype._moveHandleToValue=function(a,n){updateProps(this._axisPointerModel,!n&&this._moveAnimation,this._handle,getHandleTransProps(this.getHandleTransform(a,this._axisModel,this._axisPointerModel)))},o.prototype._onHandleDragMove=function(a,n){var s=this._handle;if(s){this._dragging=!0;var l=this.updateHandleTransform(getHandleTransProps(s),[a,n],this._axisModel,this._axisPointerModel);this._payloadInfo=l,s.stopAnimation(),s.attr(getHandleTransProps(l)),inner$b(s).lastProp=null,this._doDispatchAxisPointer()}},o.prototype._doDispatchAxisPointer=function(){var a=this._handle;if(a){var n=this._payloadInfo,s=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:n.cursorPoint[0],y:n.cursorPoint[1],tooltipOption:n.tooltipOption,axesInfo:[{axisDim:s.axis.dim,axisIndex:s.componentIndex}]})}},o.prototype._onHandleDragEnd=function(){this._dragging=!1;var a=this._handle;if(a){var n=this._axisPointerModel.get("value");this._moveHandleToValue(n),this._api.dispatchAction({type:"hideTip"})}},o.prototype.clear=function(a){this._lastValue=null,this._lastStatus=null;var n=a.getZr(),s=this._group,l=this._handle;n&&s&&(this._lastGraphicKey=null,s&&n.remove(s),l&&n.remove(l),this._group=null,this._handle=null,this._payloadInfo=null),clear$1(this,"_doDispatchAxisPointer")},o.prototype.doClear=function(){},o.prototype.buildLabel=function(a,n,s){return s=s||0,{x:a[s],y:a[1-s],width:n[s],height:n[1-s]}},o}();function updateProps(o,a,n,s){propsEqual(inner$b(n).lastProp,s)||(inner$b(n).lastProp=s,a?updateProps$1(n,s,o):(n.stopAnimation(),n.attr(s)))}function propsEqual(o,a){if(isObject$3(o)&&isObject$3(a)){var n=!0;return each$f(a,function(s,l){n=n&&propsEqual(o[l],s)}),!!n}else return o===a}function updateLabelShowHide(o,a){o[a.get(["label","show"])?"show":"hide"]()}function getHandleTransProps(o){return{x:o.x||0,y:o.y||0,rotation:o.rotation||0}}function updateMandatoryProps(o,a,n){var s=a.get("z"),l=a.get("zlevel");o&&o.traverse(function(c){c.type!=="group"&&(s!=null&&(c.z=s),l!=null&&(c.zlevel=l),c.silent=n)})}function buildElStyle(o){var a=o.get("type"),n=o.getModel(a+"Style"),s;return a==="line"?(s=n.getLineStyle(),s.fill=null):a==="shadow"&&(s=n.getAreaStyle(),s.stroke=null),s}function buildLabelElOption(o,a,n,s,l){var c=n.get("value"),u=getValueLabel(c,a.axis,a.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),d=n.getModel("label"),h=normalizeCssArray(d.get("padding")||0),f=d.getFont(),p=getBoundingRect(u,f),g=l.position,v=p.width+h[1]+h[3],b=p.height+h[0]+h[2],w=l.align;w==="right"&&(g[0]-=v),w==="center"&&(g[0]-=v/2);var x=l.verticalAlign;x==="bottom"&&(g[1]-=b),x==="middle"&&(g[1]-=b/2),confineInContainer(g,v,b,s);var S=d.get("backgroundColor");(!S||S==="auto")&&(S=a.get(["axisLine","lineStyle","color"])),o.label={x:g[0],y:g[1],style:createTextStyle$1(d,{text:u,font:f,fill:d.getTextColor(),padding:h,backgroundColor:S}),z2:10}}function confineInContainer(o,a,n,s){var l=s.getWidth(),c=s.getHeight();o[0]=Math.min(o[0]+a,l)-a,o[1]=Math.min(o[1]+n,c)-n,o[0]=Math.max(o[0],0),o[1]=Math.max(o[1],0)}function getValueLabel(o,a,n,s,l){o=a.scale.parse(o);var c=a.scale.getLabel({value:o},{precision:l.precision}),u=l.formatter;if(u){var d={value:getAxisRawValue(a,{value:o}),axisDimension:a.dim,axisIndex:a.index,seriesData:[]};each$f(s,function(h){var f=n.getSeriesByIndex(h.seriesIndex),p=h.dataIndexInside,g=f&&f.getDataParams(p);g&&d.seriesData.push(g)}),isString$2(u)?c=u.replace("{value}",c):isFunction$1(u)&&(c=u(d))}return c}function getTransformedPosition(o,a,n){var s=create$1();return rotate(s,s,n.rotation),translate(s,s,n.position),applyTransform([o.dataToCoord(a),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],s)}function buildCartesianSingleLabelElOption(o,a,n,s,l,c){var u=AxisBuilder.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=l.get(["label","margin"]),buildLabelElOption(a,s,l,c,{position:getTransformedPosition(s.axis,o,n),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function makeLineShape(o,a,n){return n=n||0,{x1:o[n],y1:o[1-n],x2:a[n],y2:a[1-n]}}function makeRectShape(o,a,n){return n=n||0,{x:o[n],y:o[1-n],width:a[n],height:a[1-n]}}function makeSectorShape(o,a,n,s,l,c){return{cx:o,cy:a,r0:n,r:s,startAngle:l,endAngle:c,clockwise:!0}}var CartesianAxisPointer=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.makeElOption=function(n,s,l,c,u){var d=l.axis,h=d.grid,f=c.get("type"),p=getCartesian(h,d).getOtherAxis(d).getGlobalExtent(),g=d.toGlobalCoord(d.dataToCoord(s,!0));if(f&&f!=="none"){var v=buildElStyle(c),b=pointerShapeBuilder$2[f](d,g,p);b.style=v,n.graphicKey=b.type,n.pointer=b}var w=layout$2(h.model,l);buildCartesianSingleLabelElOption(s,n,w,l,c,u)},a.prototype.getHandleTransform=function(n,s,l){var c=layout$2(s.axis.grid.model,s,{labelInside:!1});c.labelMargin=l.get(["handle","margin"]);var u=getTransformedPosition(s.axis,n,c);return{x:u[0],y:u[1],rotation:c.rotation+(c.labelDirection<0?Math.PI:0)}},a.prototype.updateHandleTransform=function(n,s,l,c){var u=l.axis,d=u.grid,h=u.getGlobalExtent(!0),f=getCartesian(d,u).getOtherAxis(u).getGlobalExtent(),p=u.dim==="x"?0:1,g=[n.x,n.y];g[p]+=s[p],g[p]=Math.min(h[1],g[p]),g[p]=Math.max(h[0],g[p]);var v=(f[1]+f[0])/2,b=[v,v];b[p]=g[p];var w=[{verticalAlign:"middle"},{align:"center"}];return{x:g[0],y:g[1],rotation:n.rotation,cursorPoint:b,tooltipOption:w[p]}},a}(BaseAxisPointer);function getCartesian(o,a){var n={};return n[a.dim+"AxisIndex"]=a.index,o.getCartesian(n)}var pointerShapeBuilder$2={line:function(o,a,n){var s=makeLineShape([a,n[0]],[a,n[1]],getAxisDimIndex(o));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(o,a,n){var s=Math.max(1,o.getBandWidth()),l=n[1]-n[0];return{type:"Rect",shape:makeRectShape([a-s/2,n[0]],[s,l],getAxisDimIndex(o))}}};function getAxisDimIndex(o){return o.dim==="x"?0:1}var AxisPointerModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="axisPointer",a.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},a}(ComponentModel),inner$a=makeInner(),each$8=each$f;function register(o,a,n){if(!env.node){var s=a.getZr();inner$a(s).records||(inner$a(s).records={}),initGlobalListeners(s,a);var l=inner$a(s).records[o]||(inner$a(s).records[o]={});l.handler=n}}function initGlobalListeners(o,a){if(inner$a(o).initialized)return;inner$a(o).initialized=!0,n("click",curry$1(doEnter,"click")),n("mousemove",curry$1(doEnter,"mousemove")),n("globalout",onLeave);function n(s,l){o.on(s,function(c){var u=makeDispatchAction$1(a);each$8(inner$a(o).records,function(d){d&&l(d,c,u.dispatchAction)}),dispatchTooltipFinally(u.pendings,a)})}}function dispatchTooltipFinally(o,a){var n=o.showTip.length,s=o.hideTip.length,l;n?l=o.showTip[n-1]:s&&(l=o.hideTip[s-1]),l&&(l.dispatchAction=null,a.dispatchAction(l))}function onLeave(o,a,n){o.handler("leave",null,n)}function doEnter(o,a,n,s){a.handler(o,n,s)}function makeDispatchAction$1(o){var a={showTip:[],hideTip:[]},n=function(s){var l=a[s.type];l?l.push(s):(s.dispatchAction=n,o.dispatchAction(s))};return{dispatchAction:n,pendings:a}}function unregister(o,a){if(!env.node){var n=a.getZr(),s=(inner$a(n).records||{})[o];s&&(inner$a(n).records[o]=null)}}var AxisPointerView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=s.getComponent("tooltip"),u=n.get("triggerOn")||c&&c.get("triggerOn")||"mousemove|click";register("axisPointer",l,function(d,h,f){u!=="none"&&(d==="leave"||u.indexOf(d)>=0)&&f({type:"updateAxisPointer",currTrigger:d,x:h&&h.offsetX,y:h&&h.offsetY})})},a.prototype.remove=function(n,s){unregister("axisPointer",s)},a.prototype.dispose=function(n,s){unregister("axisPointer",s)},a.type="axisPointer",a}(ComponentView);function findPointFromSeries(o,a){var n=[],s=o.seriesIndex,l;if(s==null||!(l=a.getSeriesByIndex(s)))return{point:[]};var c=l.getData(),u=queryDataIndex(c,o);if(u==null||u<0||isArray$1(u))return{point:[]};var d=c.getItemGraphicEl(u),h=l.coordinateSystem;if(l.getTooltipPosition)n=l.getTooltipPosition(u)||[];else if(h&&h.dataToPoint)if(o.isStacked){var f=h.getBaseAxis(),p=h.getOtherAxis(f),g=p.dim,v=f.dim,b=g==="x"||g==="radius"?1:0,w=c.mapDimension(v),x=[];x[b]=c.get(w,u),x[1-b]=c.get(c.getCalculationInfo("stackResultDimension"),u),n=h.dataToPoint(x)||[]}else n=h.dataToPoint(c.getValues(map$1(h.dimensions,function(E){return c.mapDimension(E)}),u))||[];else if(d){var S=d.getBoundingRect().clone();S.applyTransform(d.transform),n=[S.x+S.width/2,S.y+S.height/2]}return{point:n,el:d}}var inner$9=makeInner();function axisTrigger(o,a,n){var s=o.currTrigger,l=[o.x,o.y],c=o,u=o.dispatchAction||bind$1(n.dispatchAction,n),d=a.getComponent("axisPointer").coordSysAxesInfo;if(d){illegalPoint(l)&&(l=findPointFromSeries({seriesIndex:c.seriesIndex,dataIndex:c.dataIndex},a).point);var h=illegalPoint(l),f=c.axesInfo,p=d.axesInfo,g=s==="leave"||illegalPoint(l),v={},b={},w={list:[],map:{}},x={showPointer:curry$1(showPointer,b),showTooltip:curry$1(showTooltip,w)};each$f(d.coordSysMap,function(E,T){var C=h||E.containPoint(l);each$f(d.coordSysAxesInfo[T],function(A,R){var j=A.axis,D=findInputAxisInfo(f,A);if(!g&&C&&(!f||D)){var O=D&&D.value;O==null&&!h&&(O=j.pointToData(l)),O!=null&&processOnAxis(A,O,x,!1,v)}})});var S={};return each$f(p,function(E,T){var C=E.linkGroup;C&&!b[T]&&each$f(C.axesInfo,function(A,R){var j=b[R];if(A!==E&&j){var D=j.value;C.mapper&&(D=E.axis.scale.parse(C.mapper(D,makeMapperParam(A),makeMapperParam(E)))),S[E.key]=D}})}),each$f(S,function(E,T){processOnAxis(p[T],E,x,!0,v)}),updateModelActually(b,p,v),dispatchTooltipActually(w,l,o,u),dispatchHighDownActually(p,u,n),v}}function processOnAxis(o,a,n,s,l){var c=o.axis;if(!(c.scale.isBlank()||!c.containData(a))){if(!o.involveSeries){n.showPointer(o,a);return}var u=buildPayloadsBySeries(a,o),d=u.payloadBatch,h=u.snapToValue;d[0]&&l.seriesIndex==null&&extend(l,d[0]),!s&&o.snap&&c.containData(h)&&h!=null&&(a=h),n.showPointer(o,a,d),n.showTooltip(o,u,h)}}function buildPayloadsBySeries(o,a){var n=a.axis,s=n.dim,l=o,c=[],u=Number.MAX_VALUE,d=-1;return each$f(a.seriesModels,function(h,f){var p=h.getData().mapDimensionsAll(s),g,v;if(h.getAxisTooltipData){var b=h.getAxisTooltipData(p,o,n);v=b.dataIndices,g=b.nestestValue}else{if(v=h.getData().indicesOfNearest(p[0],o,n.type==="category"?.5:null),!v.length)return;g=h.getData().get(p[0],v[0])}if(!(g==null||!isFinite(g))){var w=o-g,x=Math.abs(w);x<=u&&((x<u||w>=0&&d<0)&&(u=x,d=w,l=g,c.length=0),each$f(v,function(S){c.push({seriesIndex:h.seriesIndex,dataIndexInside:S,dataIndex:h.getData().getRawIndex(S)})}))}}),{payloadBatch:c,snapToValue:l}}function showPointer(o,a,n,s){o[a.key]={value:n,payloadBatch:s}}function showTooltip(o,a,n,s){var l=n.payloadBatch,c=a.axis,u=c.model,d=a.axisPointerModel;if(!(!a.triggerTooltip||!l.length)){var h=a.coordSys.model,f=makeKey(h),p=o.map[f];p||(p=o.map[f]={coordSysId:h.id,coordSysIndex:h.componentIndex,coordSysType:h.type,coordSysMainType:h.mainType,dataByAxis:[]},o.list.push(p)),p.dataByAxis.push({axisDim:c.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:s,valueLabelOpt:{precision:d.get(["label","precision"]),formatter:d.get(["label","formatter"])},seriesDataIndices:l.slice()})}}function updateModelActually(o,a,n){var s=n.axesInfo=[];each$f(a,function(l,c){var u=l.axisPointerModel.option,d=o[c];d?(!l.useHandle&&(u.status="show"),u.value=d.value,u.seriesDataIndices=(d.payloadBatch||[]).slice()):!l.useHandle&&(u.status="hide"),u.status==="show"&&s.push({axisDim:l.axis.dim,axisIndex:l.axis.model.componentIndex,value:u.value})})}function dispatchTooltipActually(o,a,n,s){if(illegalPoint(a)||!o.list.length){s({type:"hideTip"});return}var l=((o.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};s({type:"showTip",escapeConnect:!0,x:a[0],y:a[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:l.dataIndexInside,dataIndex:l.dataIndex,seriesIndex:l.seriesIndex,dataByCoordSys:o.list})}function dispatchHighDownActually(o,a,n){var s=n.getZr(),l="axisPointerLastHighlights",c=inner$9(s)[l]||{},u=inner$9(s)[l]={};each$f(o,function(f,p){var g=f.axisPointerModel.option;g.status==="show"&&f.triggerEmphasis&&each$f(g.seriesDataIndices,function(v){var b=v.seriesIndex+" | "+v.dataIndex;u[b]=v})});var d=[],h=[];each$f(c,function(f,p){!u[p]&&h.push(f)}),each$f(u,function(f,p){!c[p]&&d.push(f)}),h.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:h}),d.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:d})}function findInputAxisInfo(o,a){for(var n=0;n<(o||[]).length;n++){var s=o[n];if(a.axis.dim===s.axisDim&&a.axis.model.componentIndex===s.axisIndex)return s}}function makeMapperParam(o){var a=o.axis.model,n={},s=n.axisDim=o.axis.dim;return n.axisIndex=n[s+"AxisIndex"]=a.componentIndex,n.axisName=n[s+"AxisName"]=a.name,n.axisId=n[s+"AxisId"]=a.id,n}function illegalPoint(o){return!o||o[0]==null||isNaN(o[0])||o[1]==null||isNaN(o[1])}function install$q(o){AxisView.registerAxisPointerClass("CartesianAxisPointer",CartesianAxisPointer),o.registerComponentModel(AxisPointerModel),o.registerComponentView(AxisPointerView),o.registerPreprocessor(function(a){if(a){(!a.axisPointer||a.axisPointer.length===0)&&(a.axisPointer={});var n=a.axisPointer.link;n&&!isArray$1(n)&&(a.axisPointer.link=[n])}}),o.registerProcessor(o.PRIORITY.PROCESSOR.STATISTIC,function(a,n){a.getComponent("axisPointer").coordSysAxesInfo=collect(a,n)}),o.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},axisTrigger)}function install$p(o){use(install$N),use(install$q)}var PolarAxisPointer=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.makeElOption=function(n,s,l,c,u){var d=l.axis;d.dim==="angle"&&(this.animationThreshold=Math.PI/18);var h=d.polar,f=h.getOtherAxis(d),p=f.getExtent(),g=d.dataToCoord(s),v=c.get("type");if(v&&v!=="none"){var b=buildElStyle(c),w=pointerShapeBuilder$1[v](d,h,g,p);w.style=b,n.graphicKey=w.type,n.pointer=w}var x=c.get(["label","margin"]),S=getLabelPosition(s,l,c,h,x);buildLabelElOption(n,l,c,u,S)},a}(BaseAxisPointer);function getLabelPosition(o,a,n,s,l){var c=a.axis,u=c.dataToCoord(o),d=s.getAngleAxis().getExtent()[0];d=d/180*Math.PI;var h=s.getRadiusAxis().getExtent(),f,p,g;if(c.dim==="radius"){var v=create$1();rotate(v,v,d),translate(v,v,[s.cx,s.cy]),f=applyTransform([u,-l],v);var b=a.getModel("axisLabel").get("rotate")||0,w=AxisBuilder.innerTextLayout(d,b*Math.PI/180,-1);p=w.textAlign,g=w.textVerticalAlign}else{var x=h[1];f=s.coordToPoint([x+l,u]);var S=s.cx,E=s.cy;p=Math.abs(f[0]-S)/x<.3?"center":f[0]>S?"left":"right",g=Math.abs(f[1]-E)/x<.3?"middle":f[1]>E?"top":"bottom"}return{position:f,align:p,verticalAlign:g}}var pointerShapeBuilder$1={line:function(o,a,n,s){return o.dim==="angle"?{type:"Line",shape:makeLineShape(a.coordToPoint([s[0],n]),a.coordToPoint([s[1],n]))}:{type:"Circle",shape:{cx:a.cx,cy:a.cy,r:n}}},shadow:function(o,a,n,s){var l=Math.max(1,o.getBandWidth()),c=Math.PI/180;return o.dim==="angle"?{type:"Sector",shape:makeSectorShape(a.cx,a.cy,s[0],s[1],(-n-l/2)*c,(-n+l/2)*c)}:{type:"Sector",shape:makeSectorShape(a.cx,a.cy,n-l/2,n+l/2,0,Math.PI*2)}}},PolarModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.findAxisModel=function(n){var s,l=this.ecModel;return l.eachComponent(n,function(c){c.getCoordSysModel()===this&&(s=c)},this),s},a.type="polar",a.dependencies=["radiusAxis","angleAxis"],a.defaultOption={z:0,center:["50%","50%"],radius:"80%"},a}(ComponentModel),PolarAxisModel=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",SINGLE_REFERRING).models[0]},a.type="polarAxis",a}(ComponentModel);mixin(PolarAxisModel,AxisModelCommonMixin);var AngleAxisModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="angleAxis",a}(PolarAxisModel),RadiusAxisModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="radiusAxis",a}(PolarAxisModel),RadiusAxis=function(o){__extends$1(a,o);function a(n,s){return o.call(this,"radius",n,s)||this}return a.prototype.pointToData=function(n,s){return this.polar.pointToData(n,s)[this.dim==="radius"?0:1]},a}(Axis);RadiusAxis.prototype.dataToRadius=Axis.prototype.dataToCoord;RadiusAxis.prototype.radiusToData=Axis.prototype.coordToData;var inner$8=makeInner(),AngleAxis=function(o){__extends$1(a,o);function a(n,s){return o.call(this,"angle",n,s||[0,360])||this}return a.prototype.pointToData=function(n,s){return this.polar.pointToData(n,s)[this.dim==="radius"?0:1]},a.prototype.calculateCategoryInterval=function(){var n=this,s=n.getLabelModel(),l=n.scale,c=l.getExtent(),u=l.count();if(c[1]-c[0]<1)return 0;var d=c[0],h=n.dataToCoord(d+1)-n.dataToCoord(d),f=Math.abs(h),p=getBoundingRect(d==null?"":d+"",s.getFont(),"center","top"),g=Math.max(p.height,7),v=g/f;isNaN(v)&&(v=1/0);var b=Math.max(0,Math.floor(v)),w=inner$8(n.model),x=w.lastAutoInterval,S=w.lastTickCount;return x!=null&&S!=null&&Math.abs(x-b)<=1&&Math.abs(S-u)<=1&&x>b?b=x:(w.lastTickCount=u,w.lastAutoInterval=b),b},a}(Axis);AngleAxis.prototype.dataToAngle=Axis.prototype.dataToCoord;AngleAxis.prototype.angleToData=Axis.prototype.coordToData;var polarDimensions=["radius","angle"],Polar=function(){function o(a){this.dimensions=polarDimensions,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new RadiusAxis,this._angleAxis=new AngleAxis,this.axisPointerEnabled=!0,this.name=a||"",this._radiusAxis.polar=this._angleAxis.polar=this}return o.prototype.containPoint=function(a){var n=this.pointToCoord(a);return this._radiusAxis.contain(n[0])&&this._angleAxis.contain(n[1])},o.prototype.containData=function(a){return this._radiusAxis.containData(a[0])&&this._angleAxis.containData(a[1])},o.prototype.getAxis=function(a){var n="_"+a+"Axis";return this[n]},o.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},o.prototype.getAxesByScale=function(a){var n=[],s=this._angleAxis,l=this._radiusAxis;return s.scale.type===a&&n.push(s),l.scale.type===a&&n.push(l),n},o.prototype.getAngleAxis=function(){return this._angleAxis},o.prototype.getRadiusAxis=function(){return this._radiusAxis},o.prototype.getOtherAxis=function(a){var n=this._angleAxis;return a===n?this._radiusAxis:n},o.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},o.prototype.getTooltipAxes=function(a){var n=a!=null&&a!=="auto"?this.getAxis(a):this.getBaseAxis();return{baseAxes:[n],otherAxes:[this.getOtherAxis(n)]}},o.prototype.dataToPoint=function(a,n){return this.coordToPoint([this._radiusAxis.dataToRadius(a[0],n),this._angleAxis.dataToAngle(a[1],n)])},o.prototype.pointToData=function(a,n){var s=this.pointToCoord(a);return[this._radiusAxis.radiusToData(s[0],n),this._angleAxis.angleToData(s[1],n)]},o.prototype.pointToCoord=function(a){var n=a[0]-this.cx,s=a[1]-this.cy,l=this.getAngleAxis(),c=l.getExtent(),u=Math.min(c[0],c[1]),d=Math.max(c[0],c[1]);l.inverse?u=d-360:d=u+360;var h=Math.sqrt(n*n+s*s);n/=h,s/=h;for(var f=Math.atan2(-s,n)/Math.PI*180,p=f<u?1:-1;f<u||f>d;)f+=p*360;return[h,f]},o.prototype.coordToPoint=function(a){var n=a[0],s=a[1]/180*Math.PI,l=Math.cos(s)*n+this.cx,c=-Math.sin(s)*n+this.cy;return[l,c]},o.prototype.getArea=function(){var a=this.getAngleAxis(),n=this.getRadiusAxis(),s=n.getExtent().slice();s[0]>s[1]&&s.reverse();var l=a.getExtent(),c=Math.PI/180,u=1e-4;return{cx:this.cx,cy:this.cy,r0:s[0],r:s[1],startAngle:-l[0]*c,endAngle:-l[1]*c,clockwise:a.inverse,contain:function(d,h){var f=d-this.cx,p=h-this.cy,g=f*f+p*p,v=this.r,b=this.r0;return v!==b&&g-u<=v*v&&g+u>=b*b}}},o.prototype.convertToPixel=function(a,n,s){var l=getCoordSys$2(n);return l===this?this.dataToPoint(s):null},o.prototype.convertFromPixel=function(a,n,s){var l=getCoordSys$2(n);return l===this?this.pointToData(s):null},o}();function getCoordSys$2(o){var a=o.seriesModel,n=o.polarModel;return n&&n.coordinateSystem||a&&a.coordinateSystem}function resizePolar(o,a,n){var s=a.get("center"),l=n.getWidth(),c=n.getHeight();o.cx=parsePercent(s[0],l),o.cy=parsePercent(s[1],c);var u=o.getRadiusAxis(),d=Math.min(l,c)/2,h=a.get("radius");h==null?h=[0,"100%"]:isArray$1(h)||(h=[0,h]);var f=[parsePercent(h[0],d),parsePercent(h[1],d)];u.inverse?u.setExtent(f[1],f[0]):u.setExtent(f[0],f[1])}function updatePolarScale(o,a){var n=this,s=n.getAngleAxis(),l=n.getRadiusAxis();if(s.scale.setExtent(1/0,-1/0),l.scale.setExtent(1/0,-1/0),o.eachSeries(function(d){if(d.coordinateSystem===n){var h=d.getData();each$f(getDataDimensionsOnAxis(h,"radius"),function(f){l.scale.unionExtentFromData(h,f)}),each$f(getDataDimensionsOnAxis(h,"angle"),function(f){s.scale.unionExtentFromData(h,f)})}}),niceScaleExtent(s.scale,s.model),niceScaleExtent(l.scale,l.model),s.type==="category"&&!s.onBand){var c=s.getExtent(),u=360/s.scale.count();s.inverse?c[1]+=u:c[1]-=u,s.setExtent(c[0],c[1])}}function isAngleAxisModel(o){return o.mainType==="angleAxis"}function setAxis(o,a){var n;if(o.type=a.get("type"),o.scale=createScaleByModel$1(a),o.onBand=a.get("boundaryGap")&&o.type==="category",o.inverse=a.get("inverse"),isAngleAxisModel(a)){o.inverse=o.inverse!==a.get("clockwise");var s=a.get("startAngle"),l=(n=a.get("endAngle"))!==null&&n!==void 0?n:s+(o.inverse?-360:360);o.setExtent(s,l)}a.axis=o,o.model=a}var polarCreator={dimensions:polarDimensions,create:function(o,a){var n=[];return o.eachComponent("polar",function(s,l){var c=new Polar(l+"");c.update=updatePolarScale;var u=c.getRadiusAxis(),d=c.getAngleAxis(),h=s.findAxisModel("radiusAxis"),f=s.findAxisModel("angleAxis");setAxis(u,h),setAxis(d,f),resizePolar(c,s,a),n.push(c),s.coordinateSystem=c,c.model=s}),o.eachSeries(function(s){if(s.get("coordinateSystem")==="polar"){var l=s.getReferringComponents("polar",SINGLE_REFERRING).models[0];if(process.env.NODE_ENV!=="production"&&!l)throw new Error('Polar "'+retrieve(s.get("polarIndex"),s.get("polarId"),0)+'" not found');s.coordinateSystem=l.coordinateSystem}}),n}},elementList=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function getAxisLineShape(o,a,n){a[1]>a[0]&&(a=a.slice().reverse());var s=o.coordToPoint([a[0],n]),l=o.coordToPoint([a[1],n]);return{x1:s[0],y1:s[1],x2:l[0],y2:l[1]}}function getRadiusIdx(o){var a=o.getRadiusAxis();return a.inverse?0:1}function fixAngleOverlap(o){var a=o[0],n=o[o.length-1];a&&n&&Math.abs(Math.abs(a.coord-n.coord)-360)<1e-4&&o.pop()}var AngleAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.axisPointerClass="PolarAxisPointer",n}return a.prototype.render=function(n,s){if(this.group.removeAll(),!!n.get("show")){var l=n.axis,c=l.polar,u=c.getRadiusAxis().getExtent(),d=l.getTicksCoords(),h=l.getMinorTicksCoords(),f=map$1(l.getViewLabels(),function(p){p=clone$4(p);var g=l.scale,v=g.type==="ordinal"?g.getRawOrdinalNumber(p.tickValue):p.tickValue;return p.coord=l.dataToCoord(v),p});fixAngleOverlap(f),fixAngleOverlap(d),each$f(elementList,function(p){n.get([p,"show"])&&(!l.scale.isBlank()||p==="axisLine")&&angelAxisElementsBuilders[p](this.group,n,c,d,h,u,f)},this)}},a.type="angleAxis",a}(AxisView),angelAxisElementsBuilders={axisLine:function(o,a,n,s,l,c){var u=a.getModel(["axisLine","lineStyle"]),d=n.getAngleAxis(),h=Math.PI/180,f=d.getExtent(),p=getRadiusIdx(n),g=p?0:1,v,b=Math.abs(f[1]-f[0])===360?"Circle":"Arc";c[g]===0?v=new graphic$1[b]({shape:{cx:n.cx,cy:n.cy,r:c[p],startAngle:-f[0]*h,endAngle:-f[1]*h,clockwise:d.inverse},style:u.getLineStyle(),z2:1,silent:!0}):v=new Ring({shape:{cx:n.cx,cy:n.cy,r:c[p],r0:c[g]},style:u.getLineStyle(),z2:1,silent:!0}),v.style.fill=null,o.add(v)},axisTick:function(o,a,n,s,l,c){var u=a.getModel("axisTick"),d=(u.get("inside")?-1:1)*u.get("length"),h=c[getRadiusIdx(n)],f=map$1(s,function(p){return new Line$1({shape:getAxisLineShape(n,[h,h+d],p.coord)})});o.add(mergePath(f,{style:defaults(u.getModel("lineStyle").getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])})}))},minorTick:function(o,a,n,s,l,c){if(l.length){for(var u=a.getModel("axisTick"),d=a.getModel("minorTick"),h=(u.get("inside")?-1:1)*d.get("length"),f=c[getRadiusIdx(n)],p=[],g=0;g<l.length;g++)for(var v=0;v<l[g].length;v++)p.push(new Line$1({shape:getAxisLineShape(n,[f,f+h],l[g][v].coord)}));o.add(mergePath(p,{style:defaults(d.getModel("lineStyle").getLineStyle(),defaults(u.getLineStyle(),{stroke:a.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(o,a,n,s,l,c,u){var d=a.getCategories(!0),h=a.getModel("axisLabel"),f=h.get("margin"),p=a.get("triggerEvent");each$f(u,function(g,v){var b=h,w=g.tickValue,x=c[getRadiusIdx(n)],S=n.coordToPoint([x+f,g.coord]),E=n.cx,T=n.cy,C=Math.abs(S[0]-E)/x<.3?"center":S[0]>E?"left":"right",A=Math.abs(S[1]-T)/x<.3?"middle":S[1]>T?"top":"bottom";if(d&&d[w]){var R=d[w];isObject$3(R)&&R.textStyle&&(b=new Model(R.textStyle,h,h.ecModel))}var j=new ZRText({silent:AxisBuilder.isLabelSilent(a),style:createTextStyle$1(b,{x:S[0],y:S[1],fill:b.getTextColor()||a.get(["axisLine","lineStyle","color"]),text:g.formattedLabel,align:C,verticalAlign:A})});if(o.add(j),p){var D=AxisBuilder.makeAxisEventDataBase(a);D.targetType="axisLabel",D.value=g.rawLabel,getECData(j).eventData=D}},this)},splitLine:function(o,a,n,s,l,c){var u=a.getModel("splitLine"),d=u.getModel("lineStyle"),h=d.get("color"),f=0;h=h instanceof Array?h:[h];for(var p=[],g=0;g<s.length;g++){var v=f++%h.length;p[v]=p[v]||[],p[v].push(new Line$1({shape:getAxisLineShape(n,c,s[g].coord)}))}for(var g=0;g<p.length;g++)o.add(mergePath(p[g],{style:defaults({stroke:h[g%h.length]},d.getLineStyle()),silent:!0,z:a.get("z")}))},minorSplitLine:function(o,a,n,s,l,c){if(l.length){for(var u=a.getModel("minorSplitLine"),d=u.getModel("lineStyle"),h=[],f=0;f<l.length;f++)for(var p=0;p<l[f].length;p++)h.push(new Line$1({shape:getAxisLineShape(n,c,l[f][p].coord)}));o.add(mergePath(h,{style:d.getLineStyle(),silent:!0,z:a.get("z")}))}},splitArea:function(o,a,n,s,l,c){if(s.length){var u=a.getModel("splitArea"),d=u.getModel("areaStyle"),h=d.get("color"),f=0;h=h instanceof Array?h:[h];for(var p=[],g=Math.PI/180,v=-s[0].coord*g,b=Math.min(c[0],c[1]),w=Math.max(c[0],c[1]),x=a.get("clockwise"),S=1,E=s.length;S<=E;S++){var T=S===E?s[0].coord:s[S].coord,C=f++%h.length;p[C]=p[C]||[],p[C].push(new Sector({shape:{cx:n.cx,cy:n.cy,r0:b,r:w,startAngle:v,endAngle:-T*g,clockwise:x},silent:!0})),v=-T*g}for(var S=0;S<p.length;S++)o.add(mergePath(p[S],{style:defaults({fill:h[S%h.length]},d.getAreaStyle()),silent:!0}))}}},axisBuilderAttrs$1=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs$1=["splitLine","splitArea","minorSplitLine"],RadiusAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.axisPointerClass="PolarAxisPointer",n}return a.prototype.render=function(n,s){if(this.group.removeAll(),!!n.get("show")){var l=this._axisGroup,c=this._axisGroup=new Group$3;this.group.add(c);var u=n.axis,d=u.polar,h=d.getAngleAxis(),f=u.getTicksCoords(),p=u.getMinorTicksCoords(),g=h.getExtent()[0],v=u.getExtent(),b=layoutAxis(d,n,g),w=new AxisBuilder(n,b);each$f(axisBuilderAttrs$1,w.add,w),c.add(w.getGroup()),groupTransition(l,c,n),each$f(selfBuilderAttrs$1,function(x){n.get([x,"show"])&&!u.scale.isBlank()&&axisElementBuilders$1[x](this.group,n,d,g,v,f,p)},this)}},a.type="radiusAxis",a}(AxisView),axisElementBuilders$1={splitLine:function(o,a,n,s,l,c){var u=a.getModel("splitLine"),d=u.getModel("lineStyle"),h=d.get("color"),f=0,p=n.getAngleAxis(),g=Math.PI/180,v=p.getExtent(),b=Math.abs(v[1]-v[0])===360?"Circle":"Arc";h=h instanceof Array?h:[h];for(var w=[],x=0;x<c.length;x++){var S=f++%h.length;w[S]=w[S]||[],w[S].push(new graphic$1[b]({shape:{cx:n.cx,cy:n.cy,r:Math.max(c[x].coord,0),startAngle:-v[0]*g,endAngle:-v[1]*g,clockwise:p.inverse}}))}for(var x=0;x<w.length;x++)o.add(mergePath(w[x],{style:defaults({stroke:h[x%h.length],fill:null},d.getLineStyle()),silent:!0}))},minorSplitLine:function(o,a,n,s,l,c,u){if(u.length){for(var d=a.getModel("minorSplitLine"),h=d.getModel("lineStyle"),f=[],p=0;p<u.length;p++)for(var g=0;g<u[p].length;g++)f.push(new Circle({shape:{cx:n.cx,cy:n.cy,r:u[p][g].coord}}));o.add(mergePath(f,{style:defaults({fill:null},h.getLineStyle()),silent:!0}))}},splitArea:function(o,a,n,s,l,c){if(c.length){var u=a.getModel("splitArea"),d=u.getModel("areaStyle"),h=d.get("color"),f=0;h=h instanceof Array?h:[h];for(var p=[],g=c[0].coord,v=1;v<c.length;v++){var b=f++%h.length;p[b]=p[b]||[],p[b].push(new Sector({shape:{cx:n.cx,cy:n.cy,r0:g,r:c[v].coord,startAngle:0,endAngle:Math.PI*2},silent:!0})),g=c[v].coord}for(var v=0;v<p.length;v++)o.add(mergePath(p[v],{style:defaults({fill:h[v%h.length]},d.getAreaStyle()),silent:!0}))}}};function layoutAxis(o,a,n){return{position:[o.cx,o.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:a.getModel("axisLabel").get("rotate"),z2:1}}function getSeriesStackId(o){return o.get("stack")||"__ec_stack_"+o.seriesIndex}function getAxisKey(o,a){return a.dim+o.model.componentIndex}function barLayoutPolar(o,a,n){var s={},l=calRadialBar(filter(a.getSeriesByType(o),function(c){return!a.isSeriesFiltered(c)&&c.coordinateSystem&&c.coordinateSystem.type==="polar"}));a.eachSeriesByType(o,function(c){if(c.coordinateSystem.type==="polar"){var u=c.getData(),d=c.coordinateSystem,h=d.getBaseAxis(),f=getAxisKey(d,h),p=getSeriesStackId(c),g=l[f][p],v=g.offset,b=g.width,w=d.getOtherAxis(h),x=c.coordinateSystem.cx,S=c.coordinateSystem.cy,E=c.get("barMinHeight")||0,T=c.get("barMinAngle")||0;s[p]=s[p]||[];for(var C=u.mapDimension(w.dim),A=u.mapDimension(h.dim),R=isDimensionStacked(u,C),j=h.dim!=="radius"||!c.get("roundCap",!0),D=w.model,O=D.get("startValue"),H=w.dataToCoord(O||0),q=0,Y=u.count();q<Y;q++){var te=u.get(C,q),ee=u.get(A,q),re=te>=0?"p":"n",ne=H;R&&(s[p][ee]||(s[p][ee]={p:H,n:H}),ne=s[p][ee][re]);var ce=void 0,ve=void 0,be=void 0,me=void 0;if(w.dim==="radius"){var ae=w.dataToCoord(te)-H,pe=h.dataToCoord(ee);Math.abs(ae)<E&&(ae=(ae<0?-1:1)*E),ce=ne,ve=ne+ae,be=pe-v,me=be-b,R&&(s[p][ee][re]=ve)}else{var ie=w.dataToCoord(te,j)-H,se=h.dataToCoord(ee);Math.abs(ie)<T&&(ie=(ie<0?-1:1)*T),ce=se+v,ve=ce+b,be=ne,me=ne+ie,R&&(s[p][ee][re]=me)}u.setItemLayout(q,{cx:x,cy:S,r0:ce,r:ve,startAngle:-be*Math.PI/180,endAngle:-me*Math.PI/180,clockwise:be>=me})}}})}function calRadialBar(o){var a={};each$f(o,function(s,l){var c=s.getData(),u=s.coordinateSystem,d=u.getBaseAxis(),h=getAxisKey(u,d),f=d.getExtent(),p=d.type==="category"?d.getBandWidth():Math.abs(f[1]-f[0])/c.count(),g=a[h]||{bandWidth:p,remainedWidth:p,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},v=g.stacks;a[h]=g;var b=getSeriesStackId(s);v[b]||g.autoWidthCount++,v[b]=v[b]||{width:0,maxWidth:0};var w=parsePercent(s.get("barWidth"),p),x=parsePercent(s.get("barMaxWidth"),p),S=s.get("barGap"),E=s.get("barCategoryGap");w&&!v[b].width&&(w=Math.min(g.remainedWidth,w),v[b].width=w,g.remainedWidth-=w),x&&(v[b].maxWidth=x),S!=null&&(g.gap=S),E!=null&&(g.categoryGap=E)});var n={};return each$f(a,function(s,l){n[l]={};var c=s.stacks,u=s.bandWidth,d=parsePercent(s.categoryGap,u),h=parsePercent(s.gap,1),f=s.remainedWidth,p=s.autoWidthCount,g=(f-d)/(p+(p-1)*h);g=Math.max(g,0),each$f(c,function(x,S){var E=x.maxWidth;E&&E<g&&(E=Math.min(E,f),x.width&&(E=Math.min(E,x.width)),f-=E,x.width=E,p--)}),g=(f-d)/(p+(p-1)*h),g=Math.max(g,0);var v=0,b;each$f(c,function(x,S){x.width||(x.width=g),b=x,v+=x.width*(1+h)}),b&&(v-=b.width*h);var w=-v/2;each$f(c,function(x,S){n[l][S]=n[l][S]||{offset:w,width:x.width},w+=x.width*(1+h)})}),n}var angleAxisExtraOption={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},radiusAxisExtraOption={splitNumber:5},PolarView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="polar",a}(ComponentView);function install$o(o){use(install$q),AxisView.registerAxisPointerClass("PolarAxisPointer",PolarAxisPointer),o.registerCoordinateSystem("polar",polarCreator),o.registerComponentModel(PolarModel),o.registerComponentView(PolarView),axisModelCreator(o,"angle",AngleAxisModel,angleAxisExtraOption),axisModelCreator(o,"radius",RadiusAxisModel,radiusAxisExtraOption),o.registerComponentView(AngleAxisView),o.registerComponentView(RadiusAxisView),o.registerLayout(curry$1(barLayoutPolar,"bar"))}function layout$1(o,a){a=a||{};var n=o.coordinateSystem,s=o.axis,l={},c=s.position,u=s.orient,d=n.getRect(),h=[d.x,d.x+d.width,d.y,d.y+d.height],f={horizontal:{top:h[2],bottom:h[3]},vertical:{left:h[0],right:h[1]}};l.position=[u==="vertical"?f.vertical[c]:h[0],u==="horizontal"?f.horizontal[c]:h[3]];var p={horizontal:0,vertical:1};l.rotation=Math.PI/2*p[u];var g={top:-1,bottom:1,right:1,left:-1};l.labelDirection=l.tickDirection=l.nameDirection=g[c],o.get(["axisTick","inside"])&&(l.tickDirection=-l.tickDirection),retrieve(a.labelInside,o.get(["axisLabel","inside"]))&&(l.labelDirection=-l.labelDirection);var v=a.rotate;return v==null&&(v=o.get(["axisLabel","rotate"])),l.labelRotation=c==="top"?-v:v,l.z2=1,l}var axisBuilderAttrs=["axisLine","axisTickLabel","axisName"],selfBuilderAttrs=["splitArea","splitLine"],SingleAxisView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.axisPointerClass="SingleAxisPointer",n}return a.prototype.render=function(n,s,l,c){var u=this.group;u.removeAll();var d=this._axisGroup;this._axisGroup=new Group$3;var h=layout$1(n),f=new AxisBuilder(n,h);each$f(axisBuilderAttrs,f.add,f),u.add(this._axisGroup),u.add(f.getGroup()),each$f(selfBuilderAttrs,function(p){n.get([p,"show"])&&axisElementBuilders[p](this,this.group,this._axisGroup,n)},this),groupTransition(d,this._axisGroup,n),o.prototype.render.call(this,n,s,l,c)},a.prototype.remove=function(){rectCoordAxisHandleRemove(this)},a.type="singleAxis",a}(AxisView),axisElementBuilders={splitLine:function(o,a,n,s){var l=s.axis;if(!l.scale.isBlank()){var c=s.getModel("splitLine"),u=c.getModel("lineStyle"),d=u.get("color");d=d instanceof Array?d:[d];for(var h=u.get("width"),f=s.coordinateSystem.getRect(),p=l.isHorizontal(),g=[],v=0,b=l.getTicksCoords({tickModel:c}),w=[],x=[],S=0;S<b.length;++S){var E=l.toGlobalCoord(b[S].coord);p?(w[0]=E,w[1]=f.y,x[0]=E,x[1]=f.y+f.height):(w[0]=f.x,w[1]=E,x[0]=f.x+f.width,x[1]=E);var T=new Line$1({shape:{x1:w[0],y1:w[1],x2:x[0],y2:x[1]},silent:!0});subPixelOptimizeLine(T.shape,h);var C=v++%d.length;g[C]=g[C]||[],g[C].push(T)}for(var A=u.getLineStyle(["color"]),S=0;S<g.length;++S)a.add(mergePath(g[S],{style:defaults({stroke:d[S%d.length]},A),silent:!0}))}},splitArea:function(o,a,n,s){rectCoordAxisBuildSplitArea(o,n,s,s)}},SingleAxisModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.getCoordSysModel=function(){return this},a.type="singleAxis",a.layoutMode="box",a.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},a}(ComponentModel);mixin(SingleAxisModel,AxisModelCommonMixin.prototype);var SingleAxis=function(o){__extends$1(a,o);function a(n,s,l,c,u){var d=o.call(this,n,s,l)||this;return d.type=c||"value",d.position=u||"bottom",d}return a.prototype.isHorizontal=function(){var n=this.position;return n==="top"||n==="bottom"},a.prototype.pointToData=function(n,s){return this.coordinateSystem.pointToData(n)[0]},a}(Axis),singleDimensions=["single"],Single=function(){function o(a,n,s){this.type="single",this.dimension="single",this.dimensions=singleDimensions,this.axisPointerEnabled=!0,this.model=a,this._init(a,n,s)}return o.prototype._init=function(a,n,s){var l=this.dimension,c=new SingleAxis(l,createScaleByModel$1(a),[0,0],a.get("type"),a.get("position")),u=c.type==="category";c.onBand=u&&a.get("boundaryGap"),c.inverse=a.get("inverse"),c.orient=a.get("orient"),a.axis=c,c.model=a,c.coordinateSystem=this,this._axis=c},o.prototype.update=function(a,n){a.eachSeries(function(s){if(s.coordinateSystem===this){var l=s.getData();each$f(l.mapDimensionsAll(this.dimension),function(c){this._axis.scale.unionExtentFromData(l,c)},this),niceScaleExtent(this._axis.scale,this._axis.model)}},this)},o.prototype.resize=function(a,n){this._rect=getLayoutRect({left:a.get("left"),top:a.get("top"),right:a.get("right"),bottom:a.get("bottom"),width:a.get("width"),height:a.get("height")},{width:n.getWidth(),height:n.getHeight()}),this._adjustAxis()},o.prototype.getRect=function(){return this._rect},o.prototype._adjustAxis=function(){var a=this._rect,n=this._axis,s=n.isHorizontal(),l=s?[0,a.width]:[0,a.height],c=n.inverse?1:0;n.setExtent(l[c],l[1-c]),this._updateAxisTransform(n,s?a.x:a.y)},o.prototype._updateAxisTransform=function(a,n){var s=a.getExtent(),l=s[0]+s[1],c=a.isHorizontal();a.toGlobalCoord=c?function(u){return u+n}:function(u){return l-u+n},a.toLocalCoord=c?function(u){return u-n}:function(u){return l-u+n}},o.prototype.getAxis=function(){return this._axis},o.prototype.getBaseAxis=function(){return this._axis},o.prototype.getAxes=function(){return[this._axis]},o.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},o.prototype.containPoint=function(a){var n=this.getRect(),s=this.getAxis(),l=s.orient;return l==="horizontal"?s.contain(s.toLocalCoord(a[0]))&&a[1]>=n.y&&a[1]<=n.y+n.height:s.contain(s.toLocalCoord(a[1]))&&a[0]>=n.y&&a[0]<=n.y+n.height},o.prototype.pointToData=function(a){var n=this.getAxis();return[n.coordToData(n.toLocalCoord(a[n.orient==="horizontal"?0:1]))]},o.prototype.dataToPoint=function(a){var n=this.getAxis(),s=this.getRect(),l=[],c=n.orient==="horizontal"?0:1;return a instanceof Array&&(a=a[0]),l[c]=n.toGlobalCoord(n.dataToCoord(+a)),l[1-c]=c===0?s.y+s.height/2:s.x+s.width/2,l},o.prototype.convertToPixel=function(a,n,s){var l=getCoordSys$1(n);return l===this?this.dataToPoint(s):null},o.prototype.convertFromPixel=function(a,n,s){var l=getCoordSys$1(n);return l===this?this.pointToData(s):null},o}();function getCoordSys$1(o){var a=o.seriesModel,n=o.singleAxisModel;return n&&n.coordinateSystem||a&&a.coordinateSystem}function create(o,a){var n=[];return o.eachComponent("singleAxis",function(s,l){var c=new Single(s,o,a);c.name="single_"+l,c.resize(s,a),s.coordinateSystem=c,n.push(c)}),o.eachSeries(function(s){if(s.get("coordinateSystem")==="singleAxis"){var l=s.getReferringComponents("singleAxis",SINGLE_REFERRING).models[0];s.coordinateSystem=l&&l.coordinateSystem}}),n}var singleCreator={create,dimensions:singleDimensions},XY$1=["x","y"],WH$1=["width","height"],SingleAxisPointer=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.makeElOption=function(n,s,l,c,u){var d=l.axis,h=d.coordinateSystem,f=getGlobalExtent(h,1-getPointDimIndex(d)),p=h.dataToPoint(s)[0],g=c.get("type");if(g&&g!=="none"){var v=buildElStyle(c),b=pointerShapeBuilder[g](d,p,f);b.style=v,n.graphicKey=b.type,n.pointer=b}var w=layout$1(l);buildCartesianSingleLabelElOption(s,n,w,l,c,u)},a.prototype.getHandleTransform=function(n,s,l){var c=layout$1(s,{labelInside:!1});c.labelMargin=l.get(["handle","margin"]);var u=getTransformedPosition(s.axis,n,c);return{x:u[0],y:u[1],rotation:c.rotation+(c.labelDirection<0?Math.PI:0)}},a.prototype.updateHandleTransform=function(n,s,l,c){var u=l.axis,d=u.coordinateSystem,h=getPointDimIndex(u),f=getGlobalExtent(d,h),p=[n.x,n.y];p[h]+=s[h],p[h]=Math.min(f[1],p[h]),p[h]=Math.max(f[0],p[h]);var g=getGlobalExtent(d,1-h),v=(g[1]+g[0])/2,b=[v,v];return b[h]=p[h],{x:p[0],y:p[1],rotation:n.rotation,cursorPoint:b,tooltipOption:{verticalAlign:"middle"}}},a}(BaseAxisPointer),pointerShapeBuilder={line:function(o,a,n){var s=makeLineShape([a,n[0]],[a,n[1]],getPointDimIndex(o));return{type:"Line",subPixelOptimize:!0,shape:s}},shadow:function(o,a,n){var s=o.getBandWidth(),l=n[1]-n[0];return{type:"Rect",shape:makeRectShape([a-s/2,n[0]],[s,l],getPointDimIndex(o))}}};function getPointDimIndex(o){return o.isHorizontal()?0:1}function getGlobalExtent(o,a){var n=o.getRect();return[n[XY$1[a]],n[XY$1[a]]+n[WH$1[a]]]}var SingleView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="single",a}(ComponentView);function install$n(o){use(install$q),AxisView.registerAxisPointerClass("SingleAxisPointer",SingleAxisPointer),o.registerComponentView(SingleView),o.registerComponentView(SingleAxisView),o.registerComponentModel(SingleAxisModel),axisModelCreator(o,"single",SingleAxisModel,SingleAxisModel.defaultOption),o.registerCoordinateSystem("single",singleCreator)}var CalendarModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s,l){var c=getLayoutParams(n);o.prototype.init.apply(this,arguments),mergeAndNormalizeLayoutParams$1(n,c)},a.prototype.mergeOption=function(n){o.prototype.mergeOption.apply(this,arguments),mergeAndNormalizeLayoutParams$1(this.option,n)},a.prototype.getCellSize=function(){return this.option.cellSize},a.type="calendar",a.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},a}(ComponentModel);function mergeAndNormalizeLayoutParams$1(o,a){var n=o.cellSize,s;isArray$1(n)?s=n:s=o.cellSize=[n,n],s.length===1&&(s[1]=s[0]);var l=map$1([0,1],function(c){return sizeCalculable(a,c)&&(s[c]="auto"),s[c]!=null&&s[c]!=="auto"});mergeLayoutParam(o,a,{type:"box",ignoreSize:l})}var CalendarView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){var c=this.group;c.removeAll();var u=n.coordinateSystem,d=u.getRangeInfo(),h=u.getOrient(),f=s.getLocaleModel();this._renderDayRect(n,d,c),this._renderLines(n,d,h,c),this._renderYearText(n,d,h,c),this._renderMonthText(n,f,h,c),this._renderWeekText(n,f,d,h,c)},a.prototype._renderDayRect=function(n,s,l){for(var c=n.coordinateSystem,u=n.getModel("itemStyle").getItemStyle(),d=c.getCellWidth(),h=c.getCellHeight(),f=s.start.time;f<=s.end.time;f=c.getNextNDay(f,1).time){var p=c.dataToRect([f],!1).tl,g=new Rect$2({shape:{x:p[0],y:p[1],width:d,height:h},cursor:"default",style:u});l.add(g)}},a.prototype._renderLines=function(n,s,l,c){var u=this,d=n.coordinateSystem,h=n.getModel(["splitLine","lineStyle"]).getLineStyle(),f=n.get(["splitLine","show"]),p=h.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var g=s.start,v=0;g.time<=s.end.time;v++){w(g.formatedDate),v===0&&(g=d.getDateInfo(s.start.y+"-"+s.start.m));var b=g.date;b.setMonth(b.getMonth()+1),g=d.getDateInfo(b)}w(d.getNextNDay(s.end.time,1).formatedDate);function w(x){u._firstDayOfMonth.push(d.getDateInfo(x)),u._firstDayPoints.push(d.dataToRect([x],!1).tl);var S=u._getLinePointsOfOneWeek(n,x,l);u._tlpoints.push(S[0]),u._blpoints.push(S[S.length-1]),f&&u._drawSplitline(S,h,c)}f&&this._drawSplitline(u._getEdgesPoints(u._tlpoints,p,l),h,c),f&&this._drawSplitline(u._getEdgesPoints(u._blpoints,p,l),h,c)},a.prototype._getEdgesPoints=function(n,s,l){var c=[n[0].slice(),n[n.length-1].slice()],u=l==="horizontal"?0:1;return c[0][u]=c[0][u]-s/2,c[1][u]=c[1][u]+s/2,c},a.prototype._drawSplitline=function(n,s,l){var c=new Polyline$1({z2:20,shape:{points:n},style:s});l.add(c)},a.prototype._getLinePointsOfOneWeek=function(n,s,l){for(var c=n.coordinateSystem,u=c.getDateInfo(s),d=[],h=0;h<7;h++){var f=c.getNextNDay(u.time,h),p=c.dataToRect([f.time],!1);d[2*f.day]=p.tl,d[2*f.day+1]=p[l==="horizontal"?"bl":"tr"]}return d},a.prototype._formatterLabel=function(n,s){return isString$2(n)&&n?formatTplSimple(n,s):isFunction$1(n)?n(s):s.nameMap},a.prototype._yearTextPositionControl=function(n,s,l,c,u){var d=s[0],h=s[1],f=["center","bottom"];c==="bottom"?(h+=u,f=["center","top"]):c==="left"?d-=u:c==="right"?(d+=u,f=["center","top"]):h-=u;var p=0;return(c==="left"||c==="right")&&(p=Math.PI/2),{rotation:p,x:d,y:h,style:{align:f[0],verticalAlign:f[1]}}},a.prototype._renderYearText=function(n,s,l,c){var u=n.getModel("yearLabel");if(u.get("show")){var d=u.get("margin"),h=u.get("position");h||(h=l!=="horizontal"?"top":"left");var f=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],p=(f[0][0]+f[1][0])/2,g=(f[0][1]+f[1][1])/2,v=l==="horizontal"?0:1,b={top:[p,f[v][1]],bottom:[p,f[1-v][1]],left:[f[1-v][0],g],right:[f[v][0],g]},w=s.start.y;+s.end.y>+s.start.y&&(w=w+"-"+s.end.y);var x=u.get("formatter"),S={start:s.start.y,end:s.end.y,nameMap:w},E=this._formatterLabel(x,S),T=new ZRText({z2:30,style:createTextStyle$1(u,{text:E}),silent:u.get("silent")});T.attr(this._yearTextPositionControl(T,b[h],l,h,d)),c.add(T)}},a.prototype._monthTextPositionControl=function(n,s,l,c,u){var d="left",h="top",f=n[0],p=n[1];return l==="horizontal"?(p=p+u,s&&(d="center"),c==="start"&&(h="bottom")):(f=f+u,s&&(h="middle"),c==="start"&&(d="right")),{x:f,y:p,align:d,verticalAlign:h}},a.prototype._renderMonthText=function(n,s,l,c){var u=n.getModel("monthLabel");if(u.get("show")){var d=u.get("nameMap"),h=u.get("margin"),f=u.get("position"),p=u.get("align"),g=[this._tlpoints,this._blpoints];(!d||isString$2(d))&&(d&&(s=getLocaleModel(d)||s),d=s.get(["time","monthAbbr"])||[]);var v=f==="start"?0:1,b=l==="horizontal"?0:1;h=f==="start"?-h:h;for(var w=p==="center",x=u.get("silent"),S=0;S<g[v].length-1;S++){var E=g[v][S].slice(),T=this._firstDayOfMonth[S];if(w){var C=this._firstDayPoints[S];E[b]=(C[b]+g[0][S+1][b])/2}var A=u.get("formatter"),R=d[+T.m-1],j={yyyy:T.y,yy:(T.y+"").slice(2),MM:T.m,M:+T.m,nameMap:R},D=this._formatterLabel(A,j),O=new ZRText({z2:30,style:extend(createTextStyle$1(u,{text:D}),this._monthTextPositionControl(E,w,l,f,h)),silent:x});c.add(O)}}},a.prototype._weekTextPositionControl=function(n,s,l,c,u){var d="center",h="middle",f=n[0],p=n[1],g=l==="start";return s==="horizontal"?(f=f+c+(g?1:-1)*u[0]/2,d=g?"right":"left"):(p=p+c+(g?1:-1)*u[1]/2,h=g?"bottom":"top"),{x:f,y:p,align:d,verticalAlign:h}},a.prototype._renderWeekText=function(n,s,l,c,u){var d=n.getModel("dayLabel");if(d.get("show")){var h=n.coordinateSystem,f=d.get("position"),p=d.get("nameMap"),g=d.get("margin"),v=h.getFirstDayOfWeek();if(!p||isString$2(p)){p&&(s=getLocaleModel(p)||s);var b=s.get(["time","dayOfWeekShort"]);p=b||map$1(s.get(["time","dayOfWeekAbbr"]),function(j){return j[0]})}var w=h.getNextNDay(l.end.time,7-l.lweek).time,x=[h.getCellWidth(),h.getCellHeight()];g=parsePercent(g,Math.min(x[1],x[0])),f==="start"&&(w=h.getNextNDay(l.start.time,-(7+l.fweek)).time,g=-g);for(var S=d.get("silent"),E=0;E<7;E++){var T=h.getNextNDay(w,E),C=h.dataToRect([T.time],!1).center,A=E;A=Math.abs((E+v)%7);var R=new ZRText({z2:30,style:extend(createTextStyle$1(d,{text:p[A]}),this._weekTextPositionControl(C,c,f,g,x)),silent:S});u.add(R)}}},a.type="calendar",a}(ComponentView),PROXIMATE_ONE_DAY=864e5,Calendar=function(){function o(a,n,s){this.type="calendar",this.dimensions=o.dimensions,this.getDimensionsInfo=o.getDimensionsInfo,this._model=a}return o.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},o.prototype.getRangeInfo=function(){return this._rangeInfo},o.prototype.getModel=function(){return this._model},o.prototype.getRect=function(){return this._rect},o.prototype.getCellWidth=function(){return this._sw},o.prototype.getCellHeight=function(){return this._sh},o.prototype.getOrient=function(){return this._orient},o.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},o.prototype.getDateInfo=function(a){a=parseDate$1(a);var n=a.getFullYear(),s=a.getMonth()+1,l=s<10?"0"+s:""+s,c=a.getDate(),u=c<10?"0"+c:""+c,d=a.getDay();return d=Math.abs((d+7-this.getFirstDayOfWeek())%7),{y:n+"",m:l,d:u,day:d,time:a.getTime(),formatedDate:n+"-"+l+"-"+u,date:a}},o.prototype.getNextNDay=function(a,n){return n=n||0,n===0?this.getDateInfo(a):(a=new Date(this.getDateInfo(a).time),a.setDate(a.getDate()+n),this.getDateInfo(a))},o.prototype.update=function(a,n){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var s=this._rangeInfo.weeks||1,l=["width","height"],c=this._model.getCellSize().slice(),u=this._model.getBoxLayoutParams(),d=this._orient==="horizontal"?[s,7]:[7,s];each$f([0,1],function(g){p(c,g)&&(u[l[g]]=c[g]*d[g])});var h={width:n.getWidth(),height:n.getHeight()},f=this._rect=getLayoutRect(u,h);each$f([0,1],function(g){p(c,g)||(c[g]=f[l[g]]/d[g])});function p(g,v){return g[v]!=null&&g[v]!=="auto"}this._sw=c[0],this._sh=c[1]},o.prototype.dataToPoint=function(a,n){isArray$1(a)&&(a=a[0]),n==null&&(n=!0);var s=this.getDateInfo(a),l=this._rangeInfo,c=s.formatedDate;if(n&&!(s.time>=l.start.time&&s.time<l.end.time+PROXIMATE_ONE_DAY))return[NaN,NaN];var u=s.day,d=this._getRangeInfo([l.start.time,c]).nthWeek;return this._orient==="vertical"?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+d*this._sh+this._sh/2]:[this._rect.x+d*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},o.prototype.pointToData=function(a){var n=this.pointToDate(a);return n&&n.time},o.prototype.dataToRect=function(a,n){var s=this.dataToPoint(a,n);return{contentShape:{x:s[0]-(this._sw-this._lineWidth)/2,y:s[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:s,tl:[s[0]-this._sw/2,s[1]-this._sh/2],tr:[s[0]+this._sw/2,s[1]-this._sh/2],br:[s[0]+this._sw/2,s[1]+this._sh/2],bl:[s[0]-this._sw/2,s[1]+this._sh/2]}},o.prototype.pointToDate=function(a){var n=Math.floor((a[0]-this._rect.x)/this._sw)+1,s=Math.floor((a[1]-this._rect.y)/this._sh)+1,l=this._rangeInfo.range;return this._orient==="vertical"?this._getDateByWeeksAndDay(s,n-1,l):this._getDateByWeeksAndDay(n,s-1,l)},o.prototype.convertToPixel=function(a,n,s){var l=getCoordSys(n);return l===this?l.dataToPoint(s):null},o.prototype.convertFromPixel=function(a,n,s){var l=getCoordSys(n);return l===this?l.pointToData(s):null},o.prototype.containPoint=function(a){return console.warn("Not implemented."),!1},o.prototype._initRangeOption=function(){var a=this._model.get("range"),n;if(isArray$1(a)&&a.length===1&&(a=a[0]),isArray$1(a))n=a;else{var s=a.toString();if(/^\d{4}$/.test(s)&&(n=[s+"-01-01",s+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(s)){var l=this.getDateInfo(s),c=l.date;c.setMonth(c.getMonth()+1);var u=this.getNextNDay(c,-1);n=[l.formatedDate,u.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(s)&&(n=[s,s])}if(!n)return process.env.NODE_ENV!=="production"&&logError("Invalid date range."),a;var d=this._getRangeInfo(n);return d.start.time>d.end.time&&n.reverse(),n},o.prototype._getRangeInfo=function(a){var n=[this.getDateInfo(a[0]),this.getDateInfo(a[1])],s;n[0].time>n[1].time&&(s=!0,n.reverse());var l=Math.floor(n[1].time/PROXIMATE_ONE_DAY)-Math.floor(n[0].time/PROXIMATE_ONE_DAY)+1,c=new Date(n[0].time),u=c.getDate(),d=n[1].date.getDate();c.setDate(u+l-1);var h=c.getDate();if(h!==d)for(var f=c.getTime()-n[1].time>0?1:-1;(h=c.getDate())!==d&&(c.getTime()-n[1].time)*f>0;)l-=f,c.setDate(h-f);var p=Math.floor((l+n[0].day+6)/7),g=s?-p+1:p-1;return s&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:l,weeks:p,nthWeek:g,fweek:n[0].day,lweek:n[1].day}},o.prototype._getDateByWeeksAndDay=function(a,n,s){var l=this._getRangeInfo(s);if(a>l.weeks||a===0&&n<l.fweek||a===l.weeks&&n>l.lweek)return null;var c=(a-1)*7-l.fweek+n,u=new Date(l.start.time);return u.setDate(+l.start.d+c),this.getDateInfo(u)},o.create=function(a,n){var s=[];return a.eachComponent("calendar",function(l){var c=new o(l);s.push(c),l.coordinateSystem=c}),a.eachSeries(function(l){l.get("coordinateSystem")==="calendar"&&(l.coordinateSystem=s[l.get("calendarIndex")||0])}),s},o.dimensions=["time","value"],o}();function getCoordSys(o){var a=o.calendarModel,n=o.seriesModel,s=a?a.coordinateSystem:n?n.coordinateSystem:null;return s}function install$m(o){o.registerComponentModel(CalendarModel),o.registerComponentView(CalendarView),o.registerCoordinateSystem("calendar",Calendar)}function setKeyInfoToNewElOption(o,a){var n=o.existing;if(a.id=o.keyInfo.id,!a.type&&n&&(a.type=n.type),a.parentId==null){var s=a.parentOption;s?a.parentId=s.id:n&&(a.parentId=n.parentId)}a.parentOption=null}function isSetLoc(o,a){var n;return each$f(a,function(s){o[s]!=null&&o[s]!=="auto"&&(n=!0)}),n}function mergeNewElOptionToExist(o,a,n){var s=extend({},n),l=o[a],c=n.$action||"merge";if(c==="merge")if(l){if(process.env.NODE_ENV!=="production"){var u=n.type;assert(!u||l.type===u,'Please set $action: "replace" to change `type`')}merge(l,s,!0),mergeLayoutParam(l,s,{ignoreSize:!0}),copyLayoutParams(n,l),copyTransitionInfo(n,l),copyTransitionInfo(n,l,"shape"),copyTransitionInfo(n,l,"style"),copyTransitionInfo(n,l,"extra"),n.clipPath=l.clipPath}else o[a]=s;else c==="replace"?o[a]=s:c==="remove"&&l&&(o[a]=null)}var TRANSITION_PROPS_TO_COPY=["transition","enterFrom","leaveTo"],ROOT_TRANSITION_PROPS_TO_COPY=TRANSITION_PROPS_TO_COPY.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function copyTransitionInfo(o,a,n){if(n&&(!o[n]&&a[n]&&(o[n]={}),o=o[n],a=a[n]),!(!o||!a))for(var s=n?TRANSITION_PROPS_TO_COPY:ROOT_TRANSITION_PROPS_TO_COPY,l=0;l<s.length;l++){var c=s[l];o[c]==null&&a[c]!=null&&(o[c]=a[c])}}function setLayoutInfoToExist(o,a){if(o&&(o.hv=a.hv=[isSetLoc(a,["left","right"]),isSetLoc(a,["top","bottom"])],o.type==="group")){var n=o,s=a;n.width==null&&(n.width=s.width=0),n.height==null&&(n.height=s.height=0)}}var GraphicComponentModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.preventAutoZ=!0,n}return a.prototype.mergeOption=function(n,s){var l=this.option.elements;this.option.elements=null,o.prototype.mergeOption.call(this,n,s),this.option.elements=l},a.prototype.optionUpdated=function(n,s){var l=this.option,c=(s?l:n).elements,u=l.elements=s?[]:l.elements,d=[];this._flatten(c,d,null);var h=mappingToExists(u,d,"normalMerge"),f=this._elOptionsToUpdate=[];each$f(h,function(p,g){var v=p.newOption;process.env.NODE_ENV!=="production"&&assert(isObject$3(v)||p.existing,"Empty graphic option definition"),v&&(f.push(v),setKeyInfoToNewElOption(p,v),mergeNewElOptionToExist(u,g,v),setLayoutInfoToExist(u[g],v))},this),l.elements=filter(u,function(p){return p&&delete p.$action,p!=null})},a.prototype._flatten=function(n,s,l){each$f(n,function(c){if(c){l&&(c.parentOption=l),s.push(c);var u=c.children;u&&u.length&&this._flatten(u,s,c),delete c.children}},this)},a.prototype.useElOptionsToUpdate=function(){var n=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,n},a.type="graphic",a.defaultOption={elements:[]},a}(ComponentModel),nonShapeGraphicElements={path:null,compoundPath:null,group:Group$3,image:ZRImage,text:ZRText},inner$7=makeInner(),GraphicComponentView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(){this._elMap=createHashMap()},a.prototype.render=function(n,s,l){n!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=n,this._updateElements(n),this._relocate(n,l)},a.prototype._updateElements=function(n){var s=n.useElOptionsToUpdate();if(s){var l=this._elMap,c=this.group,u=n.get("z"),d=n.get("zlevel");each$f(s,function(h){var f=convertOptionIdName(h.id,null),p=f!=null?l.get(f):null,g=convertOptionIdName(h.parentId,null),v=g!=null?l.get(g):c,b=h.type,w=h.style;b==="text"&&w&&h.hv&&h.hv[1]&&(w.textVerticalAlign=w.textBaseline=w.verticalAlign=w.align=null);var x=h.textContent,S=h.textConfig;if(w&&isEC4CompatibleStyle(w,b,!!S,!!x)){var E=convertFromEC4CompatibleStyle(w,b,!0);!S&&E.textConfig&&(S=h.textConfig=E.textConfig),!x&&E.textContent&&(x=E.textContent)}var T=getCleanedElOption(h);process.env.NODE_ENV!=="production"&&p&&assert(v===p.parent,"Changing parent is not supported.");var C=h.$action||"merge",A=C==="merge",R=C==="replace";if(A){var j=!p,D=p;j?D=createEl(f,v,h.type,l):(D&&(inner$7(D).isNew=!1),stopPreviousKeyframeAnimationAndRestore(D)),D&&(applyUpdateTransition(D,T,n,{isInit:j}),updateCommonAttrs(D,h,u,d))}else if(R){removeEl$1(p,h,l,n);var O=createEl(f,v,h.type,l);O&&(applyUpdateTransition(O,T,n,{isInit:!0}),updateCommonAttrs(O,h,u,d))}else C==="remove"&&(updateLeaveTo(p,h),removeEl$1(p,h,l,n));var H=l.get(f);if(H&&x)if(A){var q=H.getTextContent();q?q.attr(x):H.setTextContent(new ZRText(x))}else R&&H.setTextContent(new ZRText(x));if(H){var Y=h.clipPath;if(Y){var te=Y.type,ee=void 0,j=!1;if(A){var re=H.getClipPath();j=!re||inner$7(re).type!==te,ee=j?newEl(te):re}else R&&(j=!0,ee=newEl(te));H.setClipPath(ee),applyUpdateTransition(ee,Y,n,{isInit:j}),applyKeyframeAnimation(ee,Y.keyframeAnimation,n)}var ne=inner$7(H);H.setTextConfig(S),ne.option=h,setEventData(H,n,h),setTooltipConfig({el:H,componentModel:n,itemName:H.name,itemTooltipOption:h.tooltip}),applyKeyframeAnimation(H,h.keyframeAnimation,n)}})}},a.prototype._relocate=function(n,s){for(var l=n.option.elements,c=this.group,u=this._elMap,d=s.getWidth(),h=s.getHeight(),f=["x","y"],p=0;p<l.length;p++){var g=l[p],v=convertOptionIdName(g.id,null),b=v!=null?u.get(v):null;if(!(!b||!b.isGroup)){var w=b.parent,x=w===c,S=inner$7(b),E=inner$7(w);S.width=parsePercent(S.option.width,x?d:E.width)||0,S.height=parsePercent(S.option.height,x?h:E.height)||0}}for(var p=l.length-1;p>=0;p--){var g=l[p],v=convertOptionIdName(g.id,null),b=v!=null?u.get(v):null;if(b){var w=b.parent,E=inner$7(w),T=w===c?{width:d,height:h}:{width:E.width,height:E.height},C={},A=positionElement(b,g,T,null,{hv:g.hv,boundingMode:g.bounding},C);if(!inner$7(b).isNew&&A){for(var R=g.transition,j={},D=0;D<f.length;D++){var O=f[D],H=C[O];R&&(isTransitionAll(R)||indexOf(R,O)>=0)?j[O]=H:b[O]=H}updateProps$1(b,j,n,0)}else b.attr(C)}}},a.prototype._clear=function(){var n=this,s=this._elMap;s.each(function(l){removeEl$1(l,inner$7(l).option,s,n._lastGraphicModel)}),this._elMap=createHashMap()},a.prototype.dispose=function(){this._clear()},a.type="graphic",a}(ComponentView);function newEl(o){process.env.NODE_ENV!=="production"&&assert(o,"graphic type MUST be set");var a=hasOwn(nonShapeGraphicElements,o)?nonShapeGraphicElements[o]:getShapeClass(o);process.env.NODE_ENV!=="production"&&assert(a,"graphic type "+o+" can not be found");var n=new a({});return inner$7(n).type=o,n}function createEl(o,a,n,s){var l=newEl(n);return a.add(l),s.set(o,l),inner$7(l).id=o,inner$7(l).isNew=!0,l}function removeEl$1(o,a,n,s){var l=o&&o.parent;l&&(o.type==="group"&&o.traverse(function(c){removeEl$1(c,a,n,s)}),applyLeaveTransition(o,a,s),n.removeKey(inner$7(o).id))}function updateCommonAttrs(o,a,n,s){o.isGroup||each$f([["cursor",Displayable.prototype.cursor],["zlevel",s||0],["z",n||0],["z2",0]],function(l){var c=l[0];hasOwn(a,c)?o[c]=retrieve2(a[c],l[1]):o[c]==null&&(o[c]=l[1])}),each$f(keys$1(a),function(l){if(l.indexOf("on")===0){var c=a[l];o[l]=isFunction$1(c)?c:null}}),hasOwn(a,"draggable")&&(o.draggable=a.draggable),a.name!=null&&(o.name=a.name),a.id!=null&&(o.id=a.id)}function getCleanedElOption(o){return o=extend({},o),each$f(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(LOCATION_PARAMS),function(a){delete o[a]}),o}function setEventData(o,a,n){var s=getECData(o).eventData;!o.silent&&!o.ignore&&!s&&(s=getECData(o).eventData={componentType:"graphic",componentIndex:a.componentIndex,name:o.name}),s&&(s.info=n.info)}function install$l(o){o.registerComponentModel(GraphicComponentModel),o.registerComponentView(GraphicComponentView),o.registerPreprocessor(function(a){var n=a.graphic;isArray$1(n)?!n[0]||!n[0].elements?a.graphic=[{elements:n}]:a.graphic=[a.graphic[0]]:n&&!n.elements&&(a.graphic=[{elements:[n]}])})}var DATA_ZOOM_AXIS_DIMENSIONS=["x","y","radius","angle","single"],SERIES_COORDS=["cartesian2d","polar","singleAxis"];function isCoordSupported(o){var a=o.get("coordinateSystem");return indexOf(SERIES_COORDS,a)>=0}function getAxisMainType(o){return process.env.NODE_ENV!=="production"&&assert(o),o+"Axis"}function findEffectedDataZooms(o,a){var n=createHashMap(),s=[],l=createHashMap();o.eachComponent({mainType:"dataZoom",query:a},function(p){l.get(p.uid)||d(p)});var c;do c=!1,o.eachComponent("dataZoom",u);while(c);function u(p){!l.get(p.uid)&&h(p)&&(d(p),c=!0)}function d(p){l.set(p.uid,!0),s.push(p),f(p)}function h(p){var g=!1;return p.eachTargetAxis(function(v,b){var w=n.get(v);w&&w[b]&&(g=!0)}),g}function f(p){p.eachTargetAxis(function(g,v){(n.get(g)||n.set(g,[]))[v]=!0})}return s}function collectReferCoordSysModelInfo(o){var a=o.ecModel,n={infoList:[],infoMap:createHashMap()};return o.eachTargetAxis(function(s,l){var c=a.getComponent(getAxisMainType(s),l);if(c){var u=c.getCoordSysModel();if(u){var d=u.uid,h=n.infoMap.get(d);h||(h={model:u,axisModels:[]},n.infoList.push(h),n.infoMap.set(d,h)),h.axisModels.push(c)}}}),n}var DataZoomAxisInfo=function(){function o(){this.indexList=[],this.indexMap=[]}return o.prototype.add=function(a){this.indexMap[a]||(this.indexList.push(a),this.indexMap[a]=!0)},o}(),DataZoomModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return a.prototype.init=function(n,s,l){var c=retrieveRawOption(n);this.settledOption=c,this.mergeDefaultAndTheme(n,l),this._doInit(c)},a.prototype.mergeOption=function(n){var s=retrieveRawOption(n);merge(this.option,n,!0),merge(this.settledOption,s,!0),this._doInit(s)},a.prototype._doInit=function(n){var s=this.option;this._setDefaultThrottle(n),this._updateRangeUse(n);var l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(c,u){this._rangePropMode[u]==="value"&&(s[c[0]]=l[c[0]]=null)},this),this._resetTarget()},a.prototype._resetTarget=function(){var n=this.get("orient",!0),s=this._targetAxisInfoMap=createHashMap(),l=this._fillSpecifiedTargetAxis(s);l?this._orient=n||this._makeAutoOrientByTargetAxis():(this._orient=n||"horizontal",this._fillAutoTargetAxisByOrient(s,this._orient)),this._noTarget=!0,s.each(function(c){c.indexList.length&&(this._noTarget=!1)},this)},a.prototype._fillSpecifiedTargetAxis=function(n){var s=!1;return each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(l){var c=this.getReferringComponents(getAxisMainType(l),MULTIPLE_REFERRING);if(c.specified){s=!0;var u=new DataZoomAxisInfo;each$f(c.models,function(d){u.add(d.componentIndex)}),n.set(l,u)}},this),s},a.prototype._fillAutoTargetAxisByOrient=function(n,s){var l=this.ecModel,c=!0;if(c){var u=s==="vertical"?"y":"x",d=l.findComponents({mainType:u+"Axis"});h(d,u)}if(c){var d=l.findComponents({mainType:"singleAxis",filter:function(p){return p.get("orient",!0)===s}});h(d,"single")}function h(f,p){var g=f[0];if(g){var v=new DataZoomAxisInfo;if(v.add(g.componentIndex),n.set(p,v),c=!1,p==="x"||p==="y"){var b=g.getReferringComponents("grid",SINGLE_REFERRING).models[0];b&&each$f(f,function(w){g.componentIndex!==w.componentIndex&&b===w.getReferringComponents("grid",SINGLE_REFERRING).models[0]&&v.add(w.componentIndex)})}}}c&&each$f(DATA_ZOOM_AXIS_DIMENSIONS,function(f){if(c){var p=l.findComponents({mainType:getAxisMainType(f),filter:function(v){return v.get("type",!0)==="category"}});if(p[0]){var g=new DataZoomAxisInfo;g.add(p[0].componentIndex),n.set(f,g),c=!1}}},this)},a.prototype._makeAutoOrientByTargetAxis=function(){var n;return this.eachTargetAxis(function(s){!n&&(n=s)},this),n==="y"?"vertical":"horizontal"},a.prototype._setDefaultThrottle=function(n){if(n.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var s=this.ecModel.option;this.option.throttle=s.animation&&s.animationDurationUpdate>0?100:20}},a.prototype._updateRangeUse=function(n){var s=this._rangePropMode,l=this.get("rangeMode");each$f([["start","startValue"],["end","endValue"]],function(c,u){var d=n[c[0]]!=null,h=n[c[1]]!=null;d&&!h?s[u]="percent":!d&&h?s[u]="value":l?s[u]=l[u]:d&&(s[u]="percent")})},a.prototype.noTarget=function(){return this._noTarget},a.prototype.getFirstTargetAxisModel=function(){var n;return this.eachTargetAxis(function(s,l){n==null&&(n=this.ecModel.getComponent(getAxisMainType(s),l))},this),n},a.prototype.eachTargetAxis=function(n,s){this._targetAxisInfoMap.each(function(l,c){each$f(l.indexList,function(u){n.call(s,c,u)})})},a.prototype.getAxisProxy=function(n,s){var l=this.getAxisModel(n,s);if(l)return l.__dzAxisProxy},a.prototype.getAxisModel=function(n,s){process.env.NODE_ENV!=="production"&&assert(n&&s!=null);var l=this._targetAxisInfoMap.get(n);if(l&&l.indexMap[s])return this.ecModel.getComponent(getAxisMainType(n),s)},a.prototype.setRawRange=function(n){var s=this.option,l=this.settledOption;each$f([["start","startValue"],["end","endValue"]],function(c){(n[c[0]]!=null||n[c[1]]!=null)&&(s[c[0]]=l[c[0]]=n[c[0]],s[c[1]]=l[c[1]]=n[c[1]])},this),this._updateRangeUse(n)},a.prototype.setCalculatedRange=function(n){var s=this.option;each$f(["start","startValue","end","endValue"],function(l){s[l]=n[l]})},a.prototype.getPercentRange=function(){var n=this.findRepresentativeAxisProxy();if(n)return n.getDataPercentWindow()},a.prototype.getValueRange=function(n,s){if(n==null&&s==null){var l=this.findRepresentativeAxisProxy();if(l)return l.getDataValueWindow()}else return this.getAxisProxy(n,s).getDataValueWindow()},a.prototype.findRepresentativeAxisProxy=function(n){if(n)return n.__dzAxisProxy;for(var s,l=this._targetAxisInfoMap.keys(),c=0;c<l.length;c++)for(var u=l[c],d=this._targetAxisInfoMap.get(u),h=0;h<d.indexList.length;h++){var f=this.getAxisProxy(u,d.indexList[h]);if(f.hostedBy(this))return f;s||(s=f)}return s},a.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},a.prototype.getOrient=function(){return process.env.NODE_ENV!=="production"&&assert(this._orient),this._orient},a.type="dataZoom",a.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],a.defaultOption={z:4,filterMode:"filter",start:0,end:100},a}(ComponentModel);function retrieveRawOption(o){var a={};return each$f(["start","end","startValue","endValue","throttle"],function(n){o.hasOwnProperty(n)&&(a[n]=o[n])}),a}var SelectDataZoomModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="dataZoom.select",a}(DataZoomModel),DataZoomView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l,c){this.dataZoomModel=n,this.ecModel=s,this.api=l},a.type="dataZoom",a}(ComponentView),SelectDataZoomView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="dataZoom.select",a}(DataZoomView),each$7=each$f,asc$1=asc$2,AxisProxy=function(){function o(a,n,s,l){this._dimName=a,this._axisIndex=n,this.ecModel=l,this._dataZoomModel=s}return o.prototype.hostedBy=function(a){return this._dataZoomModel===a},o.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},o.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},o.prototype.getTargetSeriesModels=function(){var a=[];return this.ecModel.eachSeries(function(n){if(isCoordSupported(n)){var s=getAxisMainType(this._dimName),l=n.getReferringComponents(s,SINGLE_REFERRING).models[0];l&&this._axisIndex===l.componentIndex&&a.push(n)}},this),a},o.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},o.prototype.getMinMaxSpan=function(){return clone$4(this._minMaxSpan)},o.prototype.calculateDataWindow=function(a){var n=this._dataExtent,s=this.getAxisModel(),l=s.axis.scale,c=this._dataZoomModel.getRangePropMode(),u=[0,100],d=[],h=[],f;each$7(["start","end"],function(v,b){var w=a[v],x=a[v+"Value"];c[b]==="percent"?(w==null&&(w=u[b]),x=l.parse(linearMap$2(w,u,n))):(f=!0,x=x==null?n[b]:l.parse(x),w=linearMap$2(x,n,u)),h[b]=x==null||isNaN(x)?n[b]:x,d[b]=w==null||isNaN(w)?u[b]:w}),asc$1(h),asc$1(d);var p=this._minMaxSpan;f?g(h,d,n,u,!1):g(d,h,u,n,!0);function g(v,b,w,x,S){var E=S?"Span":"ValueSpan";sliderMove(0,v,w,"all",p["min"+E],p["max"+E]);for(var T=0;T<2;T++)b[T]=linearMap$2(v[T],w,x,!0),S&&(b[T]=l.parse(b[T]))}return{valueWindow:h,percentWindow:d}},o.prototype.reset=function(a){if(a===this._dataZoomModel){var n=this.getTargetSeriesModels();this._dataExtent=calculateDataExtent(this,this._dimName,n),this._updateMinMaxSpan();var s=this.calculateDataWindow(a.settledOption);this._valueWindow=s.valueWindow,this._percentWindow=s.percentWindow,this._setAxisModel()}},o.prototype.filterData=function(a,n){if(a!==this._dataZoomModel)return;var s=this._dimName,l=this.getTargetSeriesModels(),c=a.get("filterMode"),u=this._valueWindow;if(c==="none")return;each$7(l,function(h){var f=h.getData(),p=f.mapDimensionsAll(s);if(p.length){if(c==="weakFilter"){var g=f.getStore(),v=map$1(p,function(b){return f.getDimensionIndex(b)},f);f.filterSelf(function(b){for(var w,x,S,E=0;E<p.length;E++){var T=g.get(v[E],b),C=!isNaN(T),A=T<u[0],R=T>u[1];if(C&&!A&&!R)return!0;C&&(S=!0),A&&(w=!0),R&&(x=!0)}return S&&w&&x})}else each$7(p,function(b){if(c==="empty")h.setData(f=f.map(b,function(x){return d(x)?x:NaN}));else{var w={};w[b]=u,f.selectRange(w)}});each$7(p,function(b){f.setApproximateExtent(u,b)})}});function d(h){return h>=u[0]&&h<=u[1]}},o.prototype._updateMinMaxSpan=function(){var a=this._minMaxSpan={},n=this._dataZoomModel,s=this._dataExtent;each$7(["min","max"],function(l){var c=n.get(l+"Span"),u=n.get(l+"ValueSpan");u!=null&&(u=this.getAxisModel().axis.scale.parse(u)),u!=null?c=linearMap$2(s[0]+u,s,[0,100],!0):c!=null&&(u=linearMap$2(c,[0,100],s,!0)-s[0]),a[l+"Span"]=c,a[l+"ValueSpan"]=u},this)},o.prototype._setAxisModel=function(){var a=this.getAxisModel(),n=this._percentWindow,s=this._valueWindow;if(n){var l=getPixelPrecision(s,[0,500]);l=Math.min(l,20);var c=a.axis.scale.rawExtentInfo;n[0]!==0&&c.setDeterminedMinMax("min",+s[0].toFixed(l)),n[1]!==100&&c.setDeterminedMinMax("max",+s[1].toFixed(l)),c.freeze()}},o}();function calculateDataExtent(o,a,n){var s=[1/0,-1/0];each$7(n,function(u){unionAxisExtentFromData(s,u.getData(),a)});var l=o.getAxisModel(),c=ensureScaleRawExtentInfo(l.axis.scale,l,s).calculate();return[c.min,c.max]}var dataZoomProcessor={getTargetSeries:function(o){function a(l){o.eachComponent("dataZoom",function(c){c.eachTargetAxis(function(u,d){var h=o.getComponent(getAxisMainType(u),d);l(u,d,h,c)})})}a(function(l,c,u,d){u.__dzAxisProxy=null});var n=[];a(function(l,c,u,d){u.__dzAxisProxy||(u.__dzAxisProxy=new AxisProxy(l,c,d,o),n.push(u.__dzAxisProxy))});var s=createHashMap();return each$f(n,function(l){each$f(l.getTargetSeriesModels(),function(c){s.set(c.uid,c)})}),s},overallReset:function(o,a){o.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(s,l){n.getAxisProxy(s,l).reset(n)}),n.eachTargetAxis(function(s,l){n.getAxisProxy(s,l).filterData(n,a)})}),o.eachComponent("dataZoom",function(n){var s=n.findRepresentativeAxisProxy();if(s){var l=s.getDataPercentWindow(),c=s.getDataValueWindow();n.setCalculatedRange({start:l[0],end:l[1],startValue:c[0],endValue:c[1]})}})}};function installDataZoomAction(o){o.registerAction("dataZoom",function(a,n){var s=findEffectedDataZooms(n,a);each$f(s,function(l){l.setRawRange({start:a.start,end:a.end,startValue:a.startValue,endValue:a.endValue})})})}var installed$1=!1;function installCommon$1(o){installed$1||(installed$1=!0,o.registerProcessor(o.PRIORITY.PROCESSOR.FILTER,dataZoomProcessor),installDataZoomAction(o),o.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function install$k(o){o.registerComponentModel(SelectDataZoomModel),o.registerComponentView(SelectDataZoomView),installCommon$1(o)}var ToolboxFeature=function(){function o(){}return o}(),features={};function registerFeature(o,a){features[o]=a}function getFeature(o){return features[o]}var ToolboxModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.optionUpdated=function(){o.prototype.optionUpdated.apply(this,arguments);var n=this.ecModel;each$f(this.option.feature,function(s,l){var c=getFeature(l);c&&(c.getDefaultOption&&(c.defaultOption=c.getDefaultOption(n)),merge(s,c.defaultOption))})},a.type="toolbox",a.layoutMode={type:"box",ignoreSize:!0},a.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},a}(ComponentModel);function layout(o,a,n){var s=a.getBoxLayoutParams(),l=a.get("padding"),c={width:n.getWidth(),height:n.getHeight()},u=getLayoutRect(s,c,l);box(a.get("orient"),o,a.get("itemGap"),u.width,u.height),positionElement(o,s,c,l)}function makeBackground(o,a){var n=normalizeCssArray(a.get("padding")),s=a.getItemStyle(["color","opacity"]);return s.fill=a.get("backgroundColor"),o=new Rect$2({shape:{x:o.x-n[3],y:o.y-n[0],width:o.width+n[1]+n[3],height:o.height+n[0]+n[2],r:a.get("borderRadius")},style:s,silent:!0,z2:-1}),o}var ToolboxView=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.render=function(n,s,l,c){var u=this.group;if(u.removeAll(),!n.get("show"))return;var d=+n.get("itemSize"),h=n.get("orient")==="vertical",f=n.get("feature")||{},p=this._features||(this._features={}),g=[];each$f(f,function(w,x){g.push(x)}),new DataDiffer(this._featureNames||[],g).add(v).update(v).remove(curry$1(v,null)).execute(),this._featureNames=g;function v(w,x){var S=g[w],E=g[x],T=f[S],C=new Model(T,n,n.ecModel),A;if(c&&c.newTitle!=null&&c.featureName===S&&(T.title=c.newTitle),S&&!E){if(isUserFeatureName(S))A={onclick:C.option.onclick,featureName:S};else{var R=getFeature(S);if(!R)return;A=new R}p[S]=A}else if(A=p[E],!A)return;A.uid=getUID("toolbox-feature"),A.model=C,A.ecModel=s,A.api=l;var j=A instanceof ToolboxFeature;if(!S&&E){j&&A.dispose&&A.dispose(s,l);return}if(!C.get("show")||j&&A.unusable){j&&A.remove&&A.remove(s,l);return}b(C,A,S),C.setIconStatus=function(D,O){var H=this.option,q=this.iconPaths;H.iconStatus=H.iconStatus||{},H.iconStatus[D]=O,q[D]&&(O==="emphasis"?enterEmphasis:leaveEmphasis)(q[D])},A instanceof ToolboxFeature&&A.render&&A.render(C,s,l,c)}function b(w,x,S){var E=w.getModel("iconStyle"),T=w.getModel(["emphasis","iconStyle"]),C=x instanceof ToolboxFeature&&x.getIcons?x.getIcons():w.get("icon"),A=w.get("title")||{},R,j;isString$2(C)?(R={},R[S]=C):R=C,isString$2(A)?(j={},j[S]=A):j=A;var D=w.iconPaths={};each$f(R,function(O,H){var q=createIcon(O,{},{x:-d/2,y:-d/2,width:d,height:d});q.setStyle(E.getItemStyle());var Y=q.ensureState("emphasis");Y.style=T.getItemStyle();var te=new ZRText({style:{text:j[H],align:T.get("textAlign"),borderRadius:T.get("textBorderRadius"),padding:T.get("textPadding"),fill:null,font:getFont({fontStyle:T.get("textFontStyle"),fontFamily:T.get("textFontFamily"),fontSize:T.get("textFontSize"),fontWeight:T.get("textFontWeight")},s)},ignore:!0});q.setTextContent(te),setTooltipConfig({el:q,componentModel:n,itemName:H,formatterParamsExtra:{title:j[H]}}),q.__title=j[H],q.on("mouseover",function(){var ee=T.getItemStyle(),re=h?n.get("right")==null&&n.get("left")!=="right"?"right":"left":n.get("bottom")==null&&n.get("top")!=="bottom"?"bottom":"top";te.setStyle({fill:T.get("textFill")||ee.fill||ee.stroke||"#000",backgroundColor:T.get("textBackgroundColor")}),q.setTextConfig({position:T.get("textPosition")||re}),te.ignore=!n.get("showTitle"),l.enterEmphasis(this)}).on("mouseout",function(){w.get(["iconStatus",H])!=="emphasis"&&l.leaveEmphasis(this),te.hide()}),(w.get(["iconStatus",H])==="emphasis"?enterEmphasis:leaveEmphasis)(q),u.add(q),q.on("click",bind$1(x.onclick,x,s,l,H)),D[H]=q})}layout(u,n,l),u.add(makeBackground(u.getBoundingRect(),n)),h||u.eachChild(function(w){var x=w.__title,S=w.ensureState("emphasis"),E=S.textConfig||(S.textConfig={}),T=w.getTextContent(),C=T&&T.ensureState("emphasis");if(C&&!isFunction$1(C)&&x){var A=C.style||(C.style={}),R=getBoundingRect(x,ZRText.makeFont(A)),j=w.x+u.x,D=w.y+u.y+d,O=!1;D+R.height>l.getHeight()&&(E.position="top",O=!0);var H=O?-5-R.height:d+10;j+R.width/2>l.getWidth()?(E.position=["100%",H],A.align="right"):j-R.width/2<0&&(E.position=[0,H],A.align="left")}})},a.prototype.updateView=function(n,s,l,c){each$f(this._features,function(u){u instanceof ToolboxFeature&&u.updateView&&u.updateView(u.model,s,l,c)})},a.prototype.remove=function(n,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.remove&&l.remove(n,s)}),this.group.removeAll()},a.prototype.dispose=function(n,s){each$f(this._features,function(l){l instanceof ToolboxFeature&&l.dispose&&l.dispose(n,s)})},a.type="toolbox",a}(ComponentView);function isUserFeatureName(o){return o.indexOf("my")===0}var SaveAsImage=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.onclick=function(n,s){var l=this.model,c=l.get("name")||n.get("title.0.text")||"echarts",u=s.getZr().painter.getType()==="svg",d=u?"svg":l.get("type",!0)||"png",h=s.getConnectedDataURL({type:d,backgroundColor:l.get("backgroundColor",!0)||n.get("backgroundColor")||"#fff",connectedBackgroundColor:l.get("connectedBackgroundColor"),excludeComponents:l.get("excludeComponents"),pixelRatio:l.get("pixelRatio")}),f=env.browser;if(typeof MouseEvent=="function"&&(f.newEdge||!f.ie&&!f.edge)){var p=document.createElement("a");p.download=c+"."+d,p.target="_blank",p.href=h;var g=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});p.dispatchEvent(g)}else if(window.navigator.msSaveOrOpenBlob||u){var v=h.split(","),b=v[0].indexOf("base64")>-1,w=u?decodeURIComponent(v[1]):v[1];b&&(w=window.atob(w));var x=c+"."+d;if(window.navigator.msSaveOrOpenBlob){for(var S=w.length,E=new Uint8Array(S);S--;)E[S]=w.charCodeAt(S);var T=new Blob([E]);window.navigator.msSaveOrOpenBlob(T,x)}else{var C=document.createElement("iframe");document.body.appendChild(C);var A=C.contentWindow,R=A.document;R.open("image/svg+xml","replace"),R.write(w),R.close(),A.focus(),R.execCommand("SaveAs",!0,x),document.body.removeChild(C)}}else{var j=l.get("lang"),D='<body style="margin:0;"><img src="'+h+'" style="max-width:100%;" title="'+(j&&j[0]||"")+'" /></body>',O=window.open();O.document.write(D),O.document.title=c}},a.getDefaultOption=function(n){var s={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:n.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:n.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return s},a}(ToolboxFeature),INNER_STACK_KEYWORD="__ec_magicType_stack__",radioTypes=[["line","bar"],["stack"]],MagicType=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.getIcons=function(){var n=this.model,s=n.get("icon"),l={};return each$f(n.get("type"),function(c){s[c]&&(l[c]=s[c])}),l},a.getDefaultOption=function(n){var s={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:n.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return s},a.prototype.onclick=function(n,s,l){var c=this.model,u=c.get(["seriesIndex",l]);if(seriesOptGenreator[l]){var d={series:[]},h=function(g){var v=g.subType,b=g.id,w=seriesOptGenreator[l](v,b,g,c);w&&(defaults(w,g.option),d.series.push(w));var x=g.coordinateSystem;if(x&&x.type==="cartesian2d"&&(l==="line"||l==="bar")){var S=x.getAxesByScale("ordinal")[0];if(S){var E=S.dim,T=E+"Axis",C=g.getReferringComponents(T,SINGLE_REFERRING).models[0],A=C.componentIndex;d[T]=d[T]||[];for(var R=0;R<=A;R++)d[T][A]=d[T][A]||{};d[T][A].boundaryGap=l==="bar"}}};each$f(radioTypes,function(g){indexOf(g,l)>=0&&each$f(g,function(v){c.setIconStatus(v,"normal")})}),c.setIconStatus(l,"emphasis"),n.eachComponent({mainType:"series",query:u==null?null:{seriesIndex:u}},h);var f,p=l;l==="stack"&&(f=merge({stack:c.option.title.tiled,tiled:c.option.title.stack},c.option.title),c.get(["iconStatus",l])!=="emphasis"&&(p="tiled")),s.dispatchAction({type:"changeMagicType",currentType:p,newOption:d,newTitle:f,featureName:"magicType"})}},a}(ToolboxFeature),seriesOptGenreator={line:function(o,a,n,s){if(o==="bar")return merge({id:a,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},s.get(["option","line"])||{},!0)},bar:function(o,a,n,s){if(o==="line")return merge({id:a,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},s.get(["option","bar"])||{},!0)},stack:function(o,a,n,s){var l=n.get("stack")===INNER_STACK_KEYWORD;if(o==="line"||o==="bar")return s.setIconStatus("stack",l?"normal":"emphasis"),merge({id:a,stack:l?"":INNER_STACK_KEYWORD},s.get(["option","stack"])||{},!0)}};registerAction({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(o,a){a.mergeOption(o.newOption)});var BLOCK_SPLITER=new Array(60).join("-"),ITEM_SPLITER="	";function groupSeries(o){var a={},n=[],s=[];return o.eachRawSeries(function(l){var c=l.coordinateSystem;if(c&&(c.type==="cartesian2d"||c.type==="polar")){var u=c.getBaseAxis();if(u.type==="category"){var d=u.dim+"_"+u.index;a[d]||(a[d]={categoryAxis:u,valueAxis:c.getOtherAxis(u),series:[]},s.push({axisDim:u.dim,axisIndex:u.index})),a[d].series.push(l)}else n.push(l)}else n.push(l)}),{seriesGroupByCategoryAxis:a,other:n,meta:s}}function assembleSeriesWithCategoryAxis(o){var a=[];return each$f(o,function(n,s){var l=n.categoryAxis,c=n.valueAxis,u=c.dim,d=[" "].concat(map$1(n.series,function(b){return b.name})),h=[l.model.getCategories()];each$f(n.series,function(b){var w=b.getRawData();h.push(b.getRawData().mapArray(w.mapDimension(u),function(x){return x}))});for(var f=[d.join(ITEM_SPLITER)],p=0;p<h[0].length;p++){for(var g=[],v=0;v<h.length;v++)g.push(h[v][p]);f.push(g.join(ITEM_SPLITER))}a.push(f.join(`
`))}),a.join(`

`+BLOCK_SPLITER+`

`)}function assembleOtherSeries(o){return map$1(o,function(a){var n=a.getRawData(),s=[a.name],l=[];return n.each(n.dimensions,function(){for(var c=arguments.length,u=arguments[c-1],d=n.getName(u),h=0;h<c-1;h++)l[h]=arguments[h];s.push((d?d+ITEM_SPLITER:"")+l.join(ITEM_SPLITER))}),s.join(`
`)}).join(`

`+BLOCK_SPLITER+`

`)}function getContentFromModel(o){var a=groupSeries(o);return{value:filter([assembleSeriesWithCategoryAxis(a.seriesGroupByCategoryAxis),assembleOtherSeries(a.other)],function(n){return!!n.replace(/[\n\t\s]/g,"")}).join(`

`+BLOCK_SPLITER+`

`),meta:a.meta}}function trim(o){return o.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function isTSVFormat(o){var a=o.slice(0,o.indexOf(`
`));if(a.indexOf(ITEM_SPLITER)>=0)return!0}var itemSplitRegex=new RegExp("["+ITEM_SPLITER+"]+","g");function parseTSVContents(o){for(var a=o.split(/\n+/g),n=trim(a.shift()).split(itemSplitRegex),s=[],l=map$1(n,function(h){return{name:h,data:[]}}),c=0;c<a.length;c++){var u=trim(a[c]).split(itemSplitRegex);s.push(u.shift());for(var d=0;d<u.length;d++)l[d]&&(l[d].data[c]=u[d])}return{series:l,categories:s}}function parseListContents(o){for(var a=o.split(/\n+/g),n=trim(a.shift()),s=[],l=0;l<a.length;l++){var c=trim(a[l]);if(c){var u=c.split(itemSplitRegex),d="",h=void 0,f=!1;isNaN(u[0])?(f=!0,d=u[0],u=u.slice(1),s[l]={name:d,value:[]},h=s[l].value):h=s[l]=[];for(var p=0;p<u.length;p++)h.push(+u[p]);h.length===1&&(f?s[l].value=h[0]:s[l]=h[0])}}return{name:n,data:s}}function parseContents(o,a){var n=o.split(new RegExp(`
*`+BLOCK_SPLITER+`
*`,"g")),s={series:[]};return each$f(n,function(l,c){if(isTSVFormat(l)){var u=parseTSVContents(l),d=a[c],h=d.axisDim+"Axis";d&&(s[h]=s[h]||[],s[h][d.axisIndex]={data:u.categories},s.series=s.series.concat(u.series))}else{var u=parseListContents(l);s.series.push(u)}}),s}var DataView$1=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.onclick=function(n,s){setTimeout(function(){s.dispatchAction({type:"hideTip"})});var l=s.getDom(),c=this.model;this._dom&&l.removeChild(this._dom);var u=document.createElement("div");u.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",u.style.backgroundColor=c.get("backgroundColor")||"#fff";var d=document.createElement("h4"),h=c.get("lang")||[];d.innerHTML=h[0]||c.get("title"),d.style.cssText="margin:10px 20px",d.style.color=c.get("textColor");var f=document.createElement("div"),p=document.createElement("textarea");f.style.cssText="overflow:auto";var g=c.get("optionToContent"),v=c.get("contentToOption"),b=getContentFromModel(n);if(isFunction$1(g)){var w=g(s.getOption());isString$2(w)?f.innerHTML=w:isDom(w)&&f.appendChild(w)}else{p.readOnly=c.get("readOnly");var x=p.style;x.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",x.color=c.get("textColor"),x.borderColor=c.get("textareaBorderColor"),x.backgroundColor=c.get("textareaColor"),p.value=b.value,f.appendChild(p)}var S=b.meta,E=document.createElement("div");E.style.cssText="position:absolute;bottom:5px;left:0;right:0";var T="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",C=document.createElement("div"),A=document.createElement("div");T+=";background-color:"+c.get("buttonColor"),T+=";color:"+c.get("buttonTextColor");var R=this;function j(){l.removeChild(u),R._dom=null}addEventListener(C,"click",j),addEventListener(A,"click",function(){if(v==null&&g!=null||v!=null&&g==null){process.env.NODE_ENV!=="production"&&warn("It seems you have just provided one of `contentToOption` and `optionToContent` functions but missed the other one. Data change is ignored."),j();return}var D;try{isFunction$1(v)?D=v(f,s.getOption()):D=parseContents(p.value,S)}catch(O){throw j(),new Error("Data view format error "+O)}D&&s.dispatchAction({type:"changeDataView",newOption:D}),j()}),C.innerHTML=h[1],A.innerHTML=h[2],A.style.cssText=C.style.cssText=T,!c.get("readOnly")&&E.appendChild(A),E.appendChild(C),u.appendChild(d),u.appendChild(f),u.appendChild(E),f.style.height=l.clientHeight-80+"px",l.appendChild(u),this._dom=u},a.prototype.remove=function(n,s){this._dom&&s.getDom().removeChild(this._dom)},a.prototype.dispose=function(n,s){this.remove(n,s)},a.getDefaultOption=function(n){var s={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:n.getLocaleModel().get(["toolbox","dataView","title"]),lang:n.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return s},a}(ToolboxFeature);function tryMergeDataOption(o,a){return map$1(o,function(n,s){var l=a&&a[s];if(isObject$3(l)&&!isArray$1(l)){var c=isObject$3(n)&&!isArray$1(n);c||(n={value:n});var u=l.name!=null&&n.name==null;return n=defaults(n,l),u&&delete n.name,n}else return n})}registerAction({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(o,a){var n=[];each$f(o.newOption.series,function(s){var l=a.getSeriesByName(s.name)[0];if(!l)n.push(extend({type:"scatter"},s));else{var c=l.get("data");n.push({name:s.name,data:tryMergeDataOption(s.data,c)})}}),a.mergeOption(defaults({series:n},o.newOption))});var each$6=each$f,inner$6=makeInner();function push(o,a){var n=getStoreSnapshots(o);each$6(a,function(s,l){for(var c=n.length-1;c>=0;c--){var u=n[c];if(u[l])break}if(c<0){var d=o.queryComponents({mainType:"dataZoom",subType:"select",id:l})[0];if(d){var h=d.getPercentRange();n[0][l]={dataZoomId:l,start:h[0],end:h[1]}}}}),n.push(a)}function pop(o){var a=getStoreSnapshots(o),n=a[a.length-1];a.length>1&&a.pop();var s={};return each$6(n,function(l,c){for(var u=a.length-1;u>=0;u--)if(l=a[u][c],l){s[c]=l;break}}),s}function clear(o){inner$6(o).snapshots=null}function count(o){return getStoreSnapshots(o).length}function getStoreSnapshots(o){var a=inner$6(o);return a.snapshots||(a.snapshots=[{}]),a.snapshots}var RestoreOption=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.onclick=function(n,s){clear(n),s.dispatchAction({type:"restore",from:this.uid})},a.getDefaultOption=function(n){var s={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:n.getLocaleModel().get(["toolbox","restore","title"])};return s},a}(ToolboxFeature);registerAction({type:"restore",event:"restore",update:"prepareAndUpdate"},function(o,a){a.resetOption("recreate")});var INCLUDE_FINDER_MAIN_TYPES=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],BrushTargetManager=function(){function o(a,n,s){var l=this;this._targetInfoList=[];var c=parseFinder(n,a);each$f(targetInfoBuilders,function(u,d){(!s||!s.include||indexOf(s.include,d)>=0)&&u(c,l._targetInfoList)})}return o.prototype.setOutputRanges=function(a,n){return this.matchOutputRanges(a,n,function(s,l,c){if((s.coordRanges||(s.coordRanges=[])).push(l),!s.coordRange){s.coordRange=l;var u=coordConvert[s.brushType](0,c,l);s.__rangeOffset={offset:diffProcessor[s.brushType](u.values,s.range,[1,1]),xyMinMax:u.xyMinMax}}}),a},o.prototype.matchOutputRanges=function(a,n,s){each$f(a,function(l){var c=this.findTargetInfo(l,n);c&&c!==!0&&each$f(c.coordSyses,function(u){var d=coordConvert[l.brushType](1,u,l.range,!0);s(l,d.values,u,n)})},this)},o.prototype.setInputRanges=function(a,n){each$f(a,function(s){var l=this.findTargetInfo(s,n);if(process.env.NODE_ENV!=="production"&&(assert(!l||l===!0||s.coordRange,"coordRange must be specified when coord index specified."),assert(!l||l!==!0||s.range,"range must be specified in global brush.")),s.range=s.range||[],l&&l!==!0){s.panelId=l.panelId;var c=coordConvert[s.brushType](0,l.coordSys,s.coordRange),u=s.__rangeOffset;s.range=u?diffProcessor[s.brushType](c.values,u.offset,getScales(c.xyMinMax,u.xyMinMax)):c.values}},this)},o.prototype.makePanelOpts=function(a,n){return map$1(this._targetInfoList,function(s){var l=s.getPanelRect();return{panelId:s.panelId,defaultBrushType:n?n(s):null,clipPath:makeRectPanelClipPath(l),isTargetByCursor:makeRectIsTargetByCursor(l,a,s.coordSysModel),getLinearBrushOtherExtent:makeLinearBrushOtherExtent(l)}})},o.prototype.controlSeries=function(a,n,s){var l=this.findTargetInfo(a,s);return l===!0||l&&indexOf(l.coordSyses,n.coordinateSystem)>=0},o.prototype.findTargetInfo=function(a,n){for(var s=this._targetInfoList,l=parseFinder(n,a),c=0;c<s.length;c++){var u=s[c],d=a.panelId;if(d){if(u.panelId===d)return u}else for(var h=0;h<targetInfoMatchers.length;h++)if(targetInfoMatchers[h](l,u))return u}return!0},o}();function formatMinMax(o){return o[0]>o[1]&&o.reverse(),o}function parseFinder(o,a){return parseFinder$1(o,a,{includeMainTypes:INCLUDE_FINDER_MAIN_TYPES})}var targetInfoBuilders={grid:function(o,a){var n=o.xAxisModels,s=o.yAxisModels,l=o.gridModels,c=createHashMap(),u={},d={};!n&&!s&&!l||(each$f(n,function(h){var f=h.axis.grid.model;c.set(f.id,f),u[f.id]=!0}),each$f(s,function(h){var f=h.axis.grid.model;c.set(f.id,f),d[f.id]=!0}),each$f(l,function(h){c.set(h.id,h),u[h.id]=!0,d[h.id]=!0}),c.each(function(h){var f=h.coordinateSystem,p=[];each$f(f.getCartesians(),function(g,v){(indexOf(n,g.getAxis("x").model)>=0||indexOf(s,g.getAxis("y").model)>=0)&&p.push(g)}),a.push({panelId:"grid--"+h.id,gridModel:h,coordSysModel:h,coordSys:p[0],coordSyses:p,getPanelRect:panelRectBuilders.grid,xAxisDeclared:u[h.id],yAxisDeclared:d[h.id]})}))},geo:function(o,a){each$f(o.geoModels,function(n){var s=n.coordinateSystem;a.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:s,coordSyses:[s],getPanelRect:panelRectBuilders.geo})})}},targetInfoMatchers=[function(o,a){var n=o.xAxisModel,s=o.yAxisModel,l=o.gridModel;return!l&&n&&(l=n.axis.grid.model),!l&&s&&(l=s.axis.grid.model),l&&l===a.gridModel},function(o,a){var n=o.geoModel;return n&&n===a.geoModel}],panelRectBuilders={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var o=this.coordSys,a=o.getBoundingRect().clone();return a.applyTransform(getTransform$1(o)),a}},coordConvert={lineX:curry$1(axisConvert,0),lineY:curry$1(axisConvert,1),rect:function(o,a,n,s){var l=o?a.pointToData([n[0][0],n[1][0]],s):a.dataToPoint([n[0][0],n[1][0]],s),c=o?a.pointToData([n[0][1],n[1][1]],s):a.dataToPoint([n[0][1],n[1][1]],s),u=[formatMinMax([l[0],c[0]]),formatMinMax([l[1],c[1]])];return{values:u,xyMinMax:u}},polygon:function(o,a,n,s){var l=[[1/0,-1/0],[1/0,-1/0]],c=map$1(n,function(u){var d=o?a.pointToData(u,s):a.dataToPoint(u,s);return l[0][0]=Math.min(l[0][0],d[0]),l[1][0]=Math.min(l[1][0],d[1]),l[0][1]=Math.max(l[0][1],d[0]),l[1][1]=Math.max(l[1][1],d[1]),d});return{values:c,xyMinMax:l}}};function axisConvert(o,a,n,s){process.env.NODE_ENV!=="production"&&assert(n.type==="cartesian2d","lineX/lineY brush is available only in cartesian2d.");var l=n.getAxis(["x","y"][o]),c=formatMinMax(map$1([0,1],function(d){return a?l.coordToData(l.toLocalCoord(s[d]),!0):l.toGlobalCoord(l.dataToCoord(s[d]))})),u=[];return u[o]=c,u[1-o]=[NaN,NaN],{values:c,xyMinMax:u}}var diffProcessor={lineX:curry$1(axisDiffProcessor,0),lineY:curry$1(axisDiffProcessor,1),rect:function(o,a,n){return[[o[0][0]-n[0]*a[0][0],o[0][1]-n[0]*a[0][1]],[o[1][0]-n[1]*a[1][0],o[1][1]-n[1]*a[1][1]]]},polygon:function(o,a,n){return map$1(o,function(s,l){return[s[0]-n[0]*a[l][0],s[1]-n[1]*a[l][1]]})}};function axisDiffProcessor(o,a,n,s){return[a[0]-s[o]*n[0],a[1]-s[o]*n[1]]}function getScales(o,a){var n=getSize(o),s=getSize(a),l=[n[0]/s[0],n[1]/s[1]];return isNaN(l[0])&&(l[0]=1),isNaN(l[1])&&(l[1]=1),l}function getSize(o){return o?[o[0][1]-o[0][0],o[1][1]-o[1][0]]:[NaN,NaN]}var each$5=each$f,DATA_ZOOM_ID_BASE=makeInternalComponentId("toolbox-dataZoom_"),DataZoomFeature=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.render=function(n,s,l,c){this._brushController||(this._brushController=new BrushController(l.getZr()),this._brushController.on("brush",bind$1(this._onBrush,this)).mount()),updateZoomBtnStatus(n,s,this,c,l),updateBackBtnStatus(n,s)},a.prototype.onclick=function(n,s,l){handlers[l].call(this)},a.prototype.remove=function(n,s){this._brushController&&this._brushController.unmount()},a.prototype.dispose=function(n,s){this._brushController&&this._brushController.dispose()},a.prototype._onBrush=function(n){var s=n.areas;if(!n.isEnd||!s.length)return;var l={},c=this.ecModel;this._brushController.updateCovers([]);var u=new BrushTargetManager(makeAxisFinder(this.model),c,{include:["grid"]});u.matchOutputRanges(s,c,function(f,p,g){if(g.type==="cartesian2d"){var v=f.brushType;v==="rect"?(d("x",g,p[0]),d("y",g,p[1])):d({lineX:"x",lineY:"y"}[v],g,p)}}),push(c,l),this._dispatchZoomAction(l);function d(f,p,g){var v=p.getAxis(f),b=v.model,w=h(f,b,c),x=w.findRepresentativeAxisProxy(b).getMinMaxSpan();(x.minValueSpan!=null||x.maxValueSpan!=null)&&(g=sliderMove(0,g.slice(),v.scale.getExtent(),0,x.minValueSpan,x.maxValueSpan)),w&&(l[w.id]={dataZoomId:w.id,startValue:g[0],endValue:g[1]})}function h(f,p,g){var v;return g.eachComponent({mainType:"dataZoom",subType:"select"},function(b){var w=b.getAxisModel(f,p.componentIndex);w&&(v=b)}),v}},a.prototype._dispatchZoomAction=function(n){var s=[];each$5(n,function(l,c){s.push(clone$4(l))}),s.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:s})},a.getDefaultOption=function(n){var s={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:n.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return s},a}(ToolboxFeature),handlers={zoom:function(){var o=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:o})},back:function(){this._dispatchZoomAction(pop(this.ecModel))}};function makeAxisFinder(o){var a={xAxisIndex:o.get("xAxisIndex",!0),yAxisIndex:o.get("yAxisIndex",!0),xAxisId:o.get("xAxisId",!0),yAxisId:o.get("yAxisId",!0)};return a.xAxisIndex==null&&a.xAxisId==null&&(a.xAxisIndex="all"),a.yAxisIndex==null&&a.yAxisId==null&&(a.yAxisIndex="all"),a}function updateBackBtnStatus(o,a){o.setIconStatus("back",count(a)>1?"emphasis":"normal")}function updateZoomBtnStatus(o,a,n,s,l){var c=n._isZoomActive;s&&s.type==="takeGlobalCursor"&&(c=s.key==="dataZoomSelect"?s.dataZoomSelectActive:!1),n._isZoomActive=c,o.setIconStatus("zoom",c?"emphasis":"normal");var u=new BrushTargetManager(makeAxisFinder(o),a,{include:["grid"]}),d=u.makePanelOpts(l,function(h){return h.xAxisDeclared&&!h.yAxisDeclared?"lineX":!h.xAxisDeclared&&h.yAxisDeclared?"lineY":"rect"});n._brushController.setPanels(d).enableBrush(c&&d.length?{brushType:"auto",brushStyle:o.getModel("brushStyle").getItemStyle()}:!1)}registerInternalOptionCreator("dataZoom",function(o){var a=o.getComponent("toolbox",0),n=["feature","dataZoom"];if(!a||a.get(n)==null)return;var s=a.getModel(n),l=[],c=makeAxisFinder(s),u=parseFinder$1(o,c);each$5(u.xAxisModels,function(h){return d(h,"xAxis","xAxisIndex")}),each$5(u.yAxisModels,function(h){return d(h,"yAxis","yAxisIndex")});function d(h,f,p){var g=h.componentIndex,v={type:"select",$fromToolbox:!0,filterMode:s.get("filterMode",!0)||"filter",id:DATA_ZOOM_ID_BASE+f+g};v[p]=g,l.push(v)}return l});function install$j(o){o.registerComponentModel(ToolboxModel),o.registerComponentView(ToolboxView),registerFeature("saveAsImage",SaveAsImage),registerFeature("magicType",MagicType),registerFeature("dataView",DataView$1),registerFeature("dataZoom",DataZoomFeature),registerFeature("restore",RestoreOption),use(install$k)}var TooltipModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="tooltip",a.dependencies=["axisPointer"],a.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},a}(ComponentModel);function shouldTooltipConfine(o){var a=o.get("confine");return a!=null?!!a:o.get("renderMode")==="richText"}function testStyle(o){if(env.domSupported){for(var a=document.documentElement.style,n=0,s=o.length;n<s;n++)if(o[n]in a)return o[n]}}var TRANSFORM_VENDOR=testStyle(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),TRANSITION_VENDOR=testStyle(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function toCSSVendorPrefix(o,a){if(!o)return a;a=toCamelCase(a,!0);var n=o.indexOf(a);return o=n===-1?a:"-"+o.slice(0,n)+"-"+a,o.toLowerCase()}function getComputedStyle$1(o,a){var n=o.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(o);return n?n[a]:null}var CSS_TRANSITION_VENDOR=toCSSVendorPrefix(TRANSITION_VENDOR,"transition"),CSS_TRANSFORM_VENDOR=toCSSVendorPrefix(TRANSFORM_VENDOR,"transform"),gCssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(env.transform3dSupported?"will-change:transform;":"");function mirrorPos(o){return o=o==="left"?"right":o==="right"?"left":o==="top"?"bottom":"top",o}function assembleArrow(o,a,n){if(!isString$2(n)||n==="inside")return"";var s=o.get("backgroundColor"),l=o.get("borderWidth");a=convertToColorString(a);var c=mirrorPos(n),u=Math.max(Math.round(l)*1.5,6),d="",h=CSS_TRANSFORM_VENDOR+":",f;indexOf(["left","right"],c)>-1?(d+="top:50%",h+="translateY(-50%) rotate("+(f=c==="left"?-225:-45)+"deg)"):(d+="left:50%",h+="translateX(-50%) rotate("+(f=c==="top"?225:45)+"deg)");var p=f*Math.PI/180,g=u+l,v=g*Math.abs(Math.cos(p))+g*Math.abs(Math.sin(p)),b=Math.round(((v-Math.SQRT2*l)/2+Math.SQRT2*l-(v-g)/2)*100)/100;d+=";"+c+":-"+b+"px";var w=a+" solid "+l+"px;",x=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",d+";"+h+";","border-bottom:"+w,"border-right:"+w,"background-color:"+s+";"];return'<div style="'+x.join("")+'"></div>'}function assembleTransition(o,a){var n="cubic-bezier(0.23,1,0.32,1)",s=" "+o/2+"s "+n,l="opacity"+s+",visibility"+s;return a||(s=" "+o+"s "+n,l+=env.transformSupported?","+CSS_TRANSFORM_VENDOR+s:",left"+s+",top"+s),CSS_TRANSITION_VENDOR+":"+l}function assembleTransform(o,a,n){var s=o.toFixed(0)+"px",l=a.toFixed(0)+"px";if(!env.transformSupported)return n?"top:"+l+";left:"+s+";":[["top",l],["left",s]];var c=env.transform3dSupported,u="translate"+(c?"3d":"")+"("+s+","+l+(c?",0":"")+")";return n?"top:0;left:0;"+CSS_TRANSFORM_VENDOR+":"+u+";":[["top",0],["left",0],[TRANSFORM_VENDOR,u]]}function assembleFont(o){var a=[],n=o.get("fontSize"),s=o.getTextColor();s&&a.push("color:"+s),a.push("font:"+o.getFont());var l=retrieve2(o.get("lineHeight"),Math.round(n*3/2));n&&a.push("line-height:"+l+"px");var c=o.get("textShadowColor"),u=o.get("textShadowBlur")||0,d=o.get("textShadowOffsetX")||0,h=o.get("textShadowOffsetY")||0;return c&&u&&a.push("text-shadow:"+d+"px "+h+"px "+u+"px "+c),each$f(["decoration","align"],function(f){var p=o.get(f);p&&a.push("text-"+f+":"+p)}),a.join(";")}function assembleCssText(o,a,n){var s=[],l=o.get("transitionDuration"),c=o.get("backgroundColor"),u=o.get("shadowBlur"),d=o.get("shadowColor"),h=o.get("shadowOffsetX"),f=o.get("shadowOffsetY"),p=o.getModel("textStyle"),g=getPaddingFromTooltipModel(o,"html"),v=h+"px "+f+"px "+u+"px "+d;return s.push("box-shadow:"+v),a&&l&&s.push(assembleTransition(l,n)),c&&s.push("background-color:"+c),each$f(["width","color","radius"],function(b){var w="border-"+b,x=toCamelCase(w),S=o.get(x);S!=null&&s.push(w+":"+S+(b==="color"?"":"px"))}),s.push(assembleFont(p)),g!=null&&s.push("padding:"+normalizeCssArray(g).join("px ")+"px"),s.join(";")+";"}function makeStyleCoord$1(o,a,n,s,l){var c=a&&a.painter;if(n){var u=c&&c.getViewportRoot();u&&transformLocalCoord(o,u,n,s,l)}else{o[0]=s,o[1]=l;var d=c&&c.getViewportRootOffset();d&&(o[0]+=d.offsetLeft,o[1]+=d.offsetTop)}o[2]=o[0]/a.getWidth(),o[3]=o[1]/a.getHeight()}var TooltipHTMLContent=function(){function o(a,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,env.wxa)return null;var s=document.createElement("div");s.domBelongToZr=!0,this.el=s;var l=this._zr=a.getZr(),c=n.appendTo,u=c&&(isString$2(c)?document.querySelector(c):isDom(c)?c:isFunction$1(c)&&c(a.getDom()));makeStyleCoord$1(this._styleCoord,l,u,a.getWidth()/2,a.getHeight()/2),(u||a.getDom()).appendChild(s),this._api=a,this._container=u;var d=this;s.onmouseenter=function(){d._enterable&&(clearTimeout(d._hideTimeout),d._show=!0),d._inContent=!0},s.onmousemove=function(h){if(h=h||window.event,!d._enterable){var f=l.handler,p=l.painter.getViewportRoot();normalizeEvent(p,h,!0),f.dispatch("mousemove",h)}},s.onmouseleave=function(){d._inContent=!1,d._enterable&&d._show&&d.hideLater(d._hideDelay)}}return o.prototype.update=function(a){if(!this._container){var n=this._api.getDom(),s=getComputedStyle$1(n,"position"),l=n.style;l.position!=="absolute"&&s!=="absolute"&&(l.position="relative")}var c=a.get("alwaysShowContent");c&&this._moveIfResized(),this._alwaysShowContent=c,this.el.className=a.get("className")||""},o.prototype.show=function(a,n){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var s=this.el,l=s.style,c=this._styleCoord;s.innerHTML?l.cssText=gCssText+assembleCssText(a,!this._firstShow,this._longHide)+assembleTransform(c[0],c[1],!0)+("border-color:"+convertToColorString(n)+";")+(a.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):l.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},o.prototype.setContent=function(a,n,s,l,c){var u=this.el;if(a==null){u.innerHTML="";return}var d="";if(isString$2(c)&&s.get("trigger")==="item"&&!shouldTooltipConfine(s)&&(d=assembleArrow(s,l,c)),isString$2(a))u.innerHTML=a+d;else if(a){u.innerHTML="",isArray$1(a)||(a=[a]);for(var h=0;h<a.length;h++)isDom(a[h])&&a[h].parentNode!==u&&u.appendChild(a[h]);if(d&&u.childNodes.length){var f=document.createElement("div");f.innerHTML=d,u.appendChild(f)}}},o.prototype.setEnterable=function(a){this._enterable=a},o.prototype.getSize=function(){var a=this.el;return a?[a.offsetWidth,a.offsetHeight]:[0,0]},o.prototype.moveTo=function(a,n){if(this.el){var s=this._styleCoord;if(makeStyleCoord$1(s,this._zr,this._container,a,n),s[0]!=null&&s[1]!=null){var l=this.el.style,c=assembleTransform(s[0],s[1]);each$f(c,function(u){l[u[0]]=u[1]})}}},o.prototype._moveIfResized=function(){var a=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(a*this._zr.getWidth(),n*this._zr.getHeight())},o.prototype.hide=function(){var a=this,n=this.el.style;n.visibility="hidden",n.opacity="0",env.transform3dSupported&&(n.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return a._longHide=!0},500)},o.prototype.hideLater=function(a){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(a?(this._hideDelay=a,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),a)):this.hide())},o.prototype.isShow=function(){return this._show},o.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var a=this.el.parentNode;a&&a.removeChild(this.el),this.el=this._container=null},o}(),TooltipRichContent=function(){function o(a){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=a.getZr(),makeStyleCoord(this._styleCoord,this._zr,a.getWidth()/2,a.getHeight()/2)}return o.prototype.update=function(a){var n=a.get("alwaysShowContent");n&&this._moveIfResized(),this._alwaysShowContent=n},o.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},o.prototype.setContent=function(a,n,s,l,c){var u=this;isObject$3(a)&&throwError(process.env.NODE_ENV!=="production"?"Passing DOM nodes as content is not supported in richText tooltip!":""),this.el&&this._zr.remove(this.el);var d=s.getModel("textStyle");this.el=new ZRText({style:{rich:n.richTextStyles,text:a,lineHeight:22,borderWidth:1,borderColor:l,textShadowColor:d.get("textShadowColor"),fill:s.get(["textStyle","color"]),padding:getPaddingFromTooltipModel(s,"richText"),verticalAlign:"top",align:"left"},z:s.get("z")}),each$f(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(f){u.el.style[f]=s.get(f)}),each$f(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(f){u.el.style[f]=d.get(f)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},o.prototype.setEnterable=function(a){this._enterable=a},o.prototype.getSize=function(){var a=this.el,n=this.el.getBoundingRect(),s=calcShadowOuterSize(a.style);return[n.width+s.left+s.right,n.height+s.top+s.bottom]},o.prototype.moveTo=function(a,n){var s=this.el;if(s){var l=this._styleCoord;makeStyleCoord(l,this._zr,a,n),a=l[0],n=l[1];var c=s.style,u=mathMaxWith0(c.borderWidth||0),d=calcShadowOuterSize(c);s.x=a+u+d.left,s.y=n+u+d.top,s.markRedraw()}},o.prototype._moveIfResized=function(){var a=this._styleCoord[2],n=this._styleCoord[3];this.moveTo(a*this._zr.getWidth(),n*this._zr.getHeight())},o.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},o.prototype.hideLater=function(a){this._show&&!(this._inContent&&this._enterable)&&!this._alwaysShowContent&&(a?(this._hideDelay=a,this._show=!1,this._hideTimeout=setTimeout(bind$1(this.hide,this),a)):this.hide())},o.prototype.isShow=function(){return this._show},o.prototype.dispose=function(){this._zr.remove(this.el)},o}();function mathMaxWith0(o){return Math.max(0,o)}function calcShadowOuterSize(o){var a=mathMaxWith0(o.shadowBlur||0),n=mathMaxWith0(o.shadowOffsetX||0),s=mathMaxWith0(o.shadowOffsetY||0);return{left:mathMaxWith0(a-n),right:mathMaxWith0(a+n),top:mathMaxWith0(a-s),bottom:mathMaxWith0(a+s)}}function makeStyleCoord(o,a,n,s){o[0]=n,o[1]=s,o[2]=o[0]/a.getWidth(),o[3]=o[1]/a.getHeight()}var proxyRect=new Rect$2({shape:{x:-1,y:-1,width:2,height:2}}),TooltipView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s){if(!(env.node||!s.getDom())){var l=n.getComponent("tooltip"),c=this._renderMode=getTooltipRenderMode(l.get("renderMode"));this._tooltipContent=c==="richText"?new TooltipRichContent(s):new TooltipHTMLContent(s,{appendTo:l.get("appendToBody",!0)?"body":l.get("appendTo",!0)})}},a.prototype.render=function(n,s,l){if(!(env.node||!l.getDom())){this.group.removeAll(),this._tooltipModel=n,this._ecModel=s,this._api=l;var c=this._tooltipContent;c.update(n),c.setEnterable(n.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&n.get("transitionDuration")?createOrUpdate(this,"_updatePosition",50,"fixRate"):clear$1(this,"_updatePosition")}},a.prototype._initGlobalListener=function(){var n=this._tooltipModel,s=n.get("triggerOn");register("itemTooltip",this._api,bind$1(function(l,c,u){s!=="none"&&(s.indexOf(l)>=0?this._tryShow(c,u):l==="leave"&&this._hide(u))},this))},a.prototype._keepShow=function(){var n=this._tooltipModel,s=this._ecModel,l=this._api,c=n.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&c!=="none"&&c!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!l.isDisposed()&&u.manuallyShowTip(n,s,l,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},a.prototype.manuallyShowTip=function(n,s,l,c){if(!(c.from===this.uid||env.node||!l.getDom())){var u=makeDispatchAction(c,l);this._ticket="";var d=c.dataByCoordSys,h=findComponentReference(c,s,l);if(h){var f=h.el.getBoundingRect().clone();f.applyTransform(h.el.transform),this._tryShow({offsetX:f.x+f.width/2,offsetY:f.y+f.height/2,target:h.el,position:c.position,positionDefault:"bottom"},u)}else if(c.tooltip&&c.x!=null&&c.y!=null){var p=proxyRect;p.x=c.x,p.y=c.y,p.update(),getECData(p).tooltipConfig={name:null,option:c.tooltip},this._tryShow({offsetX:c.x,offsetY:c.y,target:p},u)}else if(d)this._tryShow({offsetX:c.x,offsetY:c.y,position:c.position,dataByCoordSys:d,tooltipOption:c.tooltipOption},u);else if(c.seriesIndex!=null){if(this._manuallyAxisShowTip(n,s,l,c))return;var g=findPointFromSeries(c,s),v=g.point[0],b=g.point[1];v!=null&&b!=null&&this._tryShow({offsetX:v,offsetY:b,target:g.el,position:c.position,positionDefault:"bottom"},u)}else c.x!=null&&c.y!=null&&(l.dispatchAction({type:"updateAxisPointer",x:c.x,y:c.y}),this._tryShow({offsetX:c.x,offsetY:c.y,position:c.position,target:l.getZr().findHover(c.x,c.y).target},u))}},a.prototype.manuallyHideTip=function(n,s,l,c){var u=this._tooltipContent;this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,c.from!==this.uid&&this._hide(makeDispatchAction(c,l))},a.prototype._manuallyAxisShowTip=function(n,s,l,c){var u=c.seriesIndex,d=c.dataIndex,h=s.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||d==null||h==null)){var f=s.getSeriesByIndex(u);if(f){var p=f.getData(),g=buildTooltipModel([p.getItemModel(d),f,(f.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return l.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:d,position:c.position}),!0}}},a.prototype._tryShow=function(n,s){var l=n.target,c=this._tooltipModel;if(c){this._lastX=n.offsetX,this._lastY=n.offsetY;var u=n.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,n);else if(l){var d=getECData(l);if(d.ssrType==="legend")return;this._lastDataByCoordSys=null;var h,f;findEventDispatcher(l,function(p){if(getECData(p).dataIndex!=null)return h=p,!0;if(getECData(p).tooltipConfig!=null)return f=p,!0},!0),h?this._showSeriesItemTooltip(n,h,s):f?this._showComponentItemTooltip(n,f,s):this._hide(s)}else this._lastDataByCoordSys=null,this._hide(s)}},a.prototype._showOrMove=function(n,s){var l=n.get("showDelay");s=bind$1(s,this),clearTimeout(this._showTimout),l>0?this._showTimout=setTimeout(s,l):s()},a.prototype._showAxisTooltip=function(n,s){var l=this._ecModel,c=this._tooltipModel,u=[s.offsetX,s.offsetY],d=buildTooltipModel([s.tooltipOption],c),h=this._renderMode,f=[],p=createTooltipMarkup("section",{blocks:[],noHeader:!0}),g=[],v=new TooltipMarkupStyleCreator;each$f(n,function(T){each$f(T.dataByAxis,function(C){var A=l.getComponent(C.axisDim+"Axis",C.axisIndex),R=C.value;if(!(!A||R==null)){var j=getValueLabel(R,A.axis,l,C.seriesDataIndices,C.valueLabelOpt),D=createTooltipMarkup("section",{header:j,noHeader:!trim$1(j),sortBlocks:!0,blocks:[]});p.blocks.push(D),each$f(C.seriesDataIndices,function(O){var H=l.getSeriesByIndex(O.seriesIndex),q=O.dataIndexInside,Y=H.getDataParams(q);if(!(Y.dataIndex<0)){Y.axisDim=C.axisDim,Y.axisIndex=C.axisIndex,Y.axisType=C.axisType,Y.axisId=C.axisId,Y.axisValue=getAxisRawValue(A.axis,{value:R}),Y.axisValueLabel=j,Y.marker=v.makeTooltipMarker("item",convertToColorString(Y.color),h);var te=normalizeTooltipFormatResult(H.formatTooltip(q,!0,null)),ee=te.frag;if(ee){var re=buildTooltipModel([H],c).get("valueFormatter");D.blocks.push(re?extend({valueFormatter:re},ee):ee)}te.text&&g.push(te.text),f.push(Y)}})}})}),p.blocks.reverse(),g.reverse();var b=s.position,w=d.get("order"),x=buildTooltipMarkup(p,v,h,w,l.get("useUTC"),d.get("textStyle"));x&&g.unshift(x);var S=h==="richText"?`

`:"<br/>",E=g.join(S);this._showOrMove(d,function(){this._updateContentNotChangedOnAxis(n,f)?this._updatePosition(d,b,u[0],u[1],this._tooltipContent,f):this._showTooltipContent(d,E,f,Math.random()+"",u[0],u[1],b,null,v)})},a.prototype._showSeriesItemTooltip=function(n,s,l){var c=this._ecModel,u=getECData(s),d=u.seriesIndex,h=c.getSeriesByIndex(d),f=u.dataModel||h,p=u.dataIndex,g=u.dataType,v=f.getData(g),b=this._renderMode,w=n.positionDefault,x=buildTooltipModel([v.getItemModel(p),f,h&&(h.coordinateSystem||{}).model],this._tooltipModel,w?{position:w}:null),S=x.get("trigger");if(!(S!=null&&S!=="item")){var E=f.getDataParams(p,g),T=new TooltipMarkupStyleCreator;E.marker=T.makeTooltipMarker("item",convertToColorString(E.color),b);var C=normalizeTooltipFormatResult(f.formatTooltip(p,!1,g)),A=x.get("order"),R=x.get("valueFormatter"),j=C.frag,D=j?buildTooltipMarkup(R?extend({valueFormatter:R},j):j,T,b,A,c.get("useUTC"),x.get("textStyle")):C.text,O="item_"+f.name+"_"+p;this._showOrMove(x,function(){this._showTooltipContent(x,D,E,O,n.offsetX,n.offsetY,n.position,n.target,T)}),l({type:"showTip",dataIndexInside:p,dataIndex:v.getRawIndex(p),seriesIndex:d,from:this.uid})}},a.prototype._showComponentItemTooltip=function(n,s,l){var c=this._renderMode==="html",u=getECData(s),d=u.tooltipConfig,h=d.option||{},f=h.encodeHTMLContent;if(isString$2(h)){var p=h;h={content:p,formatter:p},f=!0}f&&c&&h.content&&(h=clone$4(h),h.content=encodeHTML(h.content));var g=[h],v=this._ecModel.getComponent(u.componentMainType,u.componentIndex);v&&g.push(v),g.push({formatter:h.content});var b=n.positionDefault,w=buildTooltipModel(g,this._tooltipModel,b?{position:b}:null),x=w.get("content"),S=Math.random()+"",E=new TooltipMarkupStyleCreator;this._showOrMove(w,function(){var T=clone$4(w.get("formatterParams")||{});this._showTooltipContent(w,x,T,S,n.offsetX,n.offsetY,n.position,s,E)}),l({type:"showTip",from:this.uid})},a.prototype._showTooltipContent=function(n,s,l,c,u,d,h,f,p){if(this._ticket="",!(!n.get("showContent")||!n.get("show"))){var g=this._tooltipContent;g.setEnterable(n.get("enterable"));var v=n.get("formatter");h=h||n.get("position");var b=s,w=this._getNearestPoint([u,d],l,n.get("trigger"),n.get("borderColor")),x=w.color;if(v)if(isString$2(v)){var S=n.ecModel.get("useUTC"),E=isArray$1(l)?l[0]:l,T=E&&E.axisType&&E.axisType.indexOf("time")>=0;b=v,T&&(b=format$1(E.axisValue,b,S)),b=formatTpl(b,l,!0)}else if(isFunction$1(v)){var C=bind$1(function(A,R){A===this._ticket&&(g.setContent(R,p,n,x,h),this._updatePosition(n,h,u,d,g,l,f))},this);this._ticket=c,b=v(l,c,C)}else b=v;g.setContent(b,p,n,x,h),g.show(n,x),this._updatePosition(n,h,u,d,g,l,f)}},a.prototype._getNearestPoint=function(n,s,l,c){if(l==="axis"||isArray$1(s))return{color:c||(this._renderMode==="html"?"#fff":"none")};if(!isArray$1(s))return{color:c||s.color||s.borderColor}},a.prototype._updatePosition=function(n,s,l,c,u,d,h){var f=this._api.getWidth(),p=this._api.getHeight();s=s||n.get("position");var g=u.getSize(),v=n.get("align"),b=n.get("verticalAlign"),w=h&&h.getBoundingRect().clone();if(h&&w.applyTransform(h.transform),isFunction$1(s)&&(s=s([l,c],d,u.el,w,{viewSize:[f,p],contentSize:g.slice()})),isArray$1(s))l=parsePercent(s[0],f),c=parsePercent(s[1],p);else if(isObject$3(s)){var x=s;x.width=g[0],x.height=g[1];var S=getLayoutRect(x,{width:f,height:p});l=S.x,c=S.y,v=null,b=null}else if(isString$2(s)&&h){var E=calcTooltipPosition(s,w,g,n.get("borderWidth"));l=E[0],c=E[1]}else{var E=refixTooltipPosition(l,c,u,f,p,v?null:20,b?null:20);l=E[0],c=E[1]}if(v&&(l-=isCenterAlign(v)?g[0]/2:v==="right"?g[0]:0),b&&(c-=isCenterAlign(b)?g[1]/2:b==="bottom"?g[1]:0),shouldTooltipConfine(n)){var E=confineTooltipPosition(l,c,u,f,p);l=E[0],c=E[1]}u.moveTo(l,c)},a.prototype._updateContentNotChangedOnAxis=function(n,s){var l=this._lastDataByCoordSys,c=this._cbParamsList,u=!!l&&l.length===n.length;return u&&each$f(l,function(d,h){var f=d.dataByAxis||[],p=n[h]||{},g=p.dataByAxis||[];u=u&&f.length===g.length,u&&each$f(f,function(v,b){var w=g[b]||{},x=v.seriesDataIndices||[],S=w.seriesDataIndices||[];u=u&&v.value===w.value&&v.axisType===w.axisType&&v.axisId===w.axisId&&x.length===S.length,u&&each$f(x,function(E,T){var C=S[T];u=u&&E.seriesIndex===C.seriesIndex&&E.dataIndex===C.dataIndex}),c&&each$f(v.seriesDataIndices,function(E){var T=E.seriesIndex,C=s[T],A=c[T];C&&A&&A.data!==C.data&&(u=!1)})})}),this._lastDataByCoordSys=n,this._cbParamsList=s,!!u},a.prototype._hide=function(n){this._lastDataByCoordSys=null,n({type:"hideTip",from:this.uid})},a.prototype.dispose=function(n,s){env.node||!s.getDom()||(clear$1(this,"_updatePosition"),this._tooltipContent.dispose(),unregister("itemTooltip",s))},a.type="tooltip",a}(ComponentView);function buildTooltipModel(o,a,n){var s=a.ecModel,l;n?(l=new Model(n,s,s),l=new Model(a.option,l,s)):l=a;for(var c=o.length-1;c>=0;c--){var u=o[c];u&&(u instanceof Model&&(u=u.get("tooltip",!0)),isString$2(u)&&(u={formatter:u}),u&&(l=new Model(u,l,s)))}return l}function makeDispatchAction(o,a){return o.dispatchAction||bind$1(a.dispatchAction,a)}function refixTooltipPosition(o,a,n,s,l,c,u){var d=n.getSize(),h=d[0],f=d[1];return c!=null&&(o+h+c+2>s?o-=h+c:o+=c),u!=null&&(a+f+u>l?a-=f+u:a+=u),[o,a]}function confineTooltipPosition(o,a,n,s,l){var c=n.getSize(),u=c[0],d=c[1];return o=Math.min(o+u,s)-u,a=Math.min(a+d,l)-d,o=Math.max(o,0),a=Math.max(a,0),[o,a]}function calcTooltipPosition(o,a,n,s){var l=n[0],c=n[1],u=Math.ceil(Math.SQRT2*s)+8,d=0,h=0,f=a.width,p=a.height;switch(o){case"inside":d=a.x+f/2-l/2,h=a.y+p/2-c/2;break;case"top":d=a.x+f/2-l/2,h=a.y-c-u;break;case"bottom":d=a.x+f/2-l/2,h=a.y+p+u;break;case"left":d=a.x-l-u,h=a.y+p/2-c/2;break;case"right":d=a.x+f+u,h=a.y+p/2-c/2}return[d,h]}function isCenterAlign(o){return o==="center"||o==="middle"}function findComponentReference(o,a,n){var s=preParseFinder(o).queryOptionMap,l=s.keys()[0];if(!(!l||l==="series")){var c=queryReferringComponents(a,l,s.get(l),{useDefault:!1,enableAll:!1,enableNone:!1}),u=c.models[0];if(u){var d=n.getViewOfComponentModel(u),h;if(d.group.traverse(function(f){var p=getECData(f).tooltipConfig;if(p&&p.name===o.name)return h=f,!0}),h)return{componentMainType:l,componentIndex:u.componentIndex,el:h}}}}function install$i(o){use(install$q),o.registerComponentModel(TooltipModel),o.registerComponentView(TooltipView),o.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},noop$1),o.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},noop$1)}var DEFAULT_TOOLBOX_BTNS=["rect","polygon","keep","clear"];function brushPreprocessor(o,a){var n=normalizeToArray(o?o.brush:[]);if(n.length){var s=[];each$f(n,function(h){var f=h.hasOwnProperty("toolbox")?h.toolbox:[];f instanceof Array&&(s=s.concat(f))});var l=o&&o.toolbox;isArray$1(l)&&(l=l[0]),l||(l={feature:{}},o.toolbox=[l]);var c=l.feature||(l.feature={}),u=c.brush||(c.brush={}),d=u.type||(u.type=[]);d.push.apply(d,s),removeDuplicate(d),a&&!d.length&&d.push.apply(d,DEFAULT_TOOLBOX_BTNS)}}function removeDuplicate(o){var a={};each$f(o,function(n){a[n]=1}),o.length=0,each$f(a,function(n,s){o.push(s)})}var each$4=each$f;function hasKeys(o){if(o){for(var a in o)if(o.hasOwnProperty(a))return!0}}function createVisualMappings(o,a,n){var s={};return each$4(a,function(c){var u=s[c]=l();each$4(o[c],function(d,h){if(VisualMapping.isValidType(h)){var f={type:h,visual:d};n&&n(f,c),u[h]=new VisualMapping(f),h==="opacity"&&(f=clone$4(f),f.type="colorAlpha",u.__hidden.__alphaForOpacity=new VisualMapping(f))}})}),s;function l(){var c=function(){};c.prototype.__hidden=c.prototype;var u=new c;return u}}function replaceVisualOption(o,a,n){var s;each$f(n,function(l){a.hasOwnProperty(l)&&hasKeys(a[l])&&(s=!0)}),s&&each$f(n,function(l){a.hasOwnProperty(l)&&hasKeys(a[l])?o[l]=clone$4(a[l]):delete o[l]})}function applyVisual(o,a,n,s,l,c){var u={};each$f(o,function(g){var v=VisualMapping.prepareVisualTypes(a[g]);u[g]=v});var d;function h(g){return getItemVisualFromData(n,d,g)}function f(g,v){setItemVisualFromData(n,d,g,v)}n.each(p);function p(g,v){d=g;var b=n.getRawDataItem(d);if(!(b&&b.visualMap===!1))for(var w=s.call(l,g),x=a[w],S=u[w],E=0,T=S.length;E<T;E++){var C=S[E];x[C]&&x[C].applyVisual(g,h,f)}}}function incrementalApplyVisual(o,a,n,s){var l={};return each$f(o,function(c){var u=VisualMapping.prepareVisualTypes(a[c]);l[c]=u}),{progress:function(u,d){var h;s!=null&&(h=d.getDimensionIndex(s));function f(R){return getItemVisualFromData(d,g,R)}function p(R,j){setItemVisualFromData(d,g,R,j)}for(var g,v=d.getStore();(g=u.next())!=null;){var b=d.getRawDataItem(g);if(!(b&&b.visualMap===!1))for(var w=s!=null?v.get(h,g):g,x=n(w),S=a[x],E=l[x],T=0,C=E.length;T<C;T++){var A=E[T];S[A]&&S[A].applyVisual(w,f,p)}}}}}function makeBrushCommonSelectorForSeries(o){var a=o.brushType,n={point:function(s){return selector[a].point(s,n,o)},rect:function(s){return selector[a].rect(s,n,o)}};return n}var selector={lineX:getLineSelectors(0),lineY:getLineSelectors(1),rect:{point:function(o,a,n){return o&&n.boundingRect.contain(o[0],o[1])},rect:function(o,a,n){return o&&n.boundingRect.intersect(o)}},polygon:{point:function(o,a,n){return o&&n.boundingRect.contain(o[0],o[1])&&contain(n.range,o[0],o[1])},rect:function(o,a,n){var s=n.range;if(!o||s.length<=1)return!1;var l=o.x,c=o.y,u=o.width,d=o.height,h=s[0];if(contain(s,l,c)||contain(s,l+u,c)||contain(s,l,c+d)||contain(s,l+u,c+d)||BoundingRect.create(o).contain(h[0],h[1])||linePolygonIntersect(l,c,l+u,c,s)||linePolygonIntersect(l,c,l,c+d,s)||linePolygonIntersect(l+u,c,l+u,c+d,s)||linePolygonIntersect(l,c+d,l+u,c+d,s))return!0}}};function getLineSelectors(o){var a=["x","y"],n=["width","height"];return{point:function(s,l,c){if(s){var u=c.range,d=s[o];return inLineRange(d,u)}},rect:function(s,l,c){if(s){var u=c.range,d=[s[a[o]],s[a[o]]+s[n[o]]];return d[1]<d[0]&&d.reverse(),inLineRange(d[0],u)||inLineRange(d[1],u)||inLineRange(u[0],d)||inLineRange(u[1],d)}}}}function inLineRange(o,a){return a[0]<=o&&o<=a[1]}var STATE_LIST=["inBrush","outOfBrush"],DISPATCH_METHOD="__ecBrushSelect",DISPATCH_FLAG="__ecInBrushSelectEvent";function layoutCovers(o){o.eachComponent({mainType:"brush"},function(a){var n=a.brushTargetManager=new BrushTargetManager(a.option,o);n.setInputRanges(a.areas,o)})}function brushVisual(o,a,n){var s=[],l,c;o.eachComponent({mainType:"brush"},function(u){n&&n.type==="takeGlobalCursor"&&u.setBrushOption(n.key==="brush"?n.brushOption:{brushType:!1})}),layoutCovers(o),o.eachComponent({mainType:"brush"},function(u,d){var h={brushId:u.id,brushIndex:d,brushName:u.name,areas:clone$4(u.areas),selected:[]};s.push(h);var f=u.option,p=f.brushLink,g=[],v=[],b=[],w=!1;d||(l=f.throttleType,c=f.throttleDelay);var x=map$1(u.areas,function(R){var j=boundingRectBuilders[R.brushType],D=defaults({boundingRect:j?j(R):void 0},R);return D.selectors=makeBrushCommonSelectorForSeries(D),D}),S=createVisualMappings(u.option,STATE_LIST,function(R){R.mappingMethod="fixed"});isArray$1(p)&&each$f(p,function(R){g[R]=1});function E(R){return p==="all"||!!g[R]}function T(R){return!!R.length}o.eachSeries(function(R,j){var D=b[j]=[];R.subType==="parallel"?C(R,j):A(R,j,D)});function C(R,j){var D=R.coordinateSystem;w=w||D.hasAxisBrushed(),E(j)&&D.eachActiveState(R.getData(),function(O,H){O==="active"&&(v[H]=1)})}function A(R,j,D){if(!(!R.brushSelector||brushModelNotControll(u,j))&&(each$f(x,function(H){u.brushTargetManager.controlSeries(H,R,o)&&D.push(H),w=w||T(D)}),E(j)&&T(D))){var O=R.getData();O.each(function(H){checkInRange(R,D,O,H)&&(v[H]=1)})}}o.eachSeries(function(R,j){var D={seriesId:R.id,seriesIndex:j,seriesName:R.name,dataIndex:[]};h.selected.push(D);var O=b[j],H=R.getData(),q=E(j)?function(Y){return v[Y]?(D.dataIndex.push(H.getRawIndex(Y)),"inBrush"):"outOfBrush"}:function(Y){return checkInRange(R,O,H,Y)?(D.dataIndex.push(H.getRawIndex(Y)),"inBrush"):"outOfBrush"};(E(j)?w:T(O))&&applyVisual(STATE_LIST,S,H,q)})}),dispatchAction$1(a,l,c,s,n)}function dispatchAction$1(o,a,n,s,l){if(l){var c=o.getZr();if(!c[DISPATCH_FLAG]){c[DISPATCH_METHOD]||(c[DISPATCH_METHOD]=doDispatch);var u=createOrUpdate(c,DISPATCH_METHOD,n,a);u(o,s)}}}function doDispatch(o,a){if(!o.isDisposed()){var n=o.getZr();n[DISPATCH_FLAG]=!0,o.dispatchAction({type:"brushSelect",batch:a}),n[DISPATCH_FLAG]=!1}}function checkInRange(o,a,n,s){for(var l=0,c=a.length;l<c;l++){var u=a[l];if(o.brushSelector(s,n,u.selectors,u))return!0}}function brushModelNotControll(o,a){var n=o.option.seriesIndex;return n!=null&&n!=="all"&&(isArray$1(n)?indexOf(n,a)<0:a!==n)}var boundingRectBuilders={rect:function(o){return getBoundingRectFromMinMax(o.range)},polygon:function(o){for(var a,n=o.range,s=0,l=n.length;s<l;s++){a=a||[[1/0,-1/0],[1/0,-1/0]];var c=n[s];c[0]<a[0][0]&&(a[0][0]=c[0]),c[0]>a[0][1]&&(a[0][1]=c[0]),c[1]<a[1][0]&&(a[1][0]=c[1]),c[1]>a[1][1]&&(a[1][1]=c[1])}return a&&getBoundingRectFromMinMax(a)}};function getBoundingRectFromMinMax(o){return new BoundingRect(o[0][0],o[1][0],o[0][1]-o[0][0],o[1][1]-o[1][0])}var BrushView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s){this.ecModel=n,this.api=s,this.model,(this._brushController=new BrushController(s.getZr())).on("brush",bind$1(this._onBrush,this)).mount()},a.prototype.render=function(n,s,l,c){this.model=n,this._updateController(n,s,l,c)},a.prototype.updateTransform=function(n,s,l,c){layoutCovers(s),this._updateController(n,s,l,c)},a.prototype.updateVisual=function(n,s,l,c){this.updateTransform(n,s,l,c)},a.prototype.updateView=function(n,s,l,c){this._updateController(n,s,l,c)},a.prototype._updateController=function(n,s,l,c){(!c||c.$from!==n.id)&&this._brushController.setPanels(n.brushTargetManager.makePanelOpts(l)).enableBrush(n.brushOption).updateCovers(n.areas.slice())},a.prototype.dispose=function(){this._brushController.dispose()},a.prototype._onBrush=function(n){var s=this.model.id,l=this.model.brushTargetManager.setOutputRanges(n.areas,this.ecModel);(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:s,areas:clone$4(l),$from:s}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:s,areas:clone$4(l),$from:s})},a.type="brush",a}(ComponentView),DEFAULT_OUT_OF_BRUSH_COLOR="#ddd",BrushModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.areas=[],n.brushOption={},n}return a.prototype.optionUpdated=function(n,s){var l=this.option;!s&&replaceVisualOption(l,n,["inBrush","outOfBrush"]);var c=l.inBrush=l.inBrush||{};l.outOfBrush=l.outOfBrush||{color:DEFAULT_OUT_OF_BRUSH_COLOR},c.hasOwnProperty("liftZ")||(c.liftZ=5)},a.prototype.setAreas=function(n){process.env.NODE_ENV!=="production"&&(assert(isArray$1(n)),each$f(n,function(s){assert(s.brushType,"Illegal areas")})),n&&(this.areas=map$1(n,function(s){return generateBrushOption(this.option,s)},this))},a.prototype.setBrushOption=function(n){this.brushOption=generateBrushOption(this.option,n),this.brushType=this.brushOption.brushType},a.type="brush",a.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],a.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},a}(ComponentModel);function generateBrushOption(o,a){return merge({brushType:o.brushType,brushMode:o.brushMode,transformable:o.transformable,brushStyle:new Model(o.brushStyle).getItemStyle(),removeOnClick:o.removeOnClick,z:o.z},a,!0)}var ICON_TYPES=["rect","polygon","lineX","lineY","keep","clear"],BrushFeature=function(o){__extends$1(a,o);function a(){return o!==null&&o.apply(this,arguments)||this}return a.prototype.render=function(n,s,l){var c,u,d;s.eachComponent({mainType:"brush"},function(h){c=h.brushType,u=h.brushOption.brushMode||"single",d=d||!!h.areas.length}),this._brushType=c,this._brushMode=u,each$f(n.get("type",!0),function(h){n.setIconStatus(h,(h==="keep"?u==="multiple":h==="clear"?d:h===c)?"emphasis":"normal")})},a.prototype.updateView=function(n,s,l){this.render(n,s,l)},a.prototype.getIcons=function(){var n=this.model,s=n.get("icon",!0),l={};return each$f(n.get("type",!0),function(c){s[c]&&(l[c]=s[c])}),l},a.prototype.onclick=function(n,s,l){var c=this._brushType,u=this._brushMode;l==="clear"?(s.dispatchAction({type:"axisAreaSelect",intervals:[]}),s.dispatchAction({type:"brush",command:"clear",areas:[]})):s.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:l==="keep"?c:c===l?!1:l,brushMode:l==="keep"?u==="multiple"?"single":"multiple":u}})},a.getDefaultOption=function(n){var s={show:!0,type:ICON_TYPES.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:n.getLocaleModel().get(["toolbox","brush","title"])};return s},a}(ToolboxFeature);function install$h(o){o.registerComponentView(BrushView),o.registerComponentModel(BrushModel),o.registerPreprocessor(brushPreprocessor),o.registerVisual(o.PRIORITY.VISUAL.BRUSH,brushVisual),o.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(a,n){n.eachComponent({mainType:"brush",query:a},function(s){s.setAreas(a.areas)})}),o.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},noop$1),o.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},noop$1),registerFeature("brush",BrushFeature)}var TitleModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.layoutMode={type:"box",ignoreSize:!0},n}return a.type="title",a.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},a}(ComponentModel),TitleView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.render=function(n,s,l){if(this.group.removeAll(),!!n.get("show")){var c=this.group,u=n.getModel("textStyle"),d=n.getModel("subtextStyle"),h=n.get("textAlign"),f=retrieve2(n.get("textBaseline"),n.get("textVerticalAlign")),p=new ZRText({style:createTextStyle$1(u,{text:n.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),g=p.getBoundingRect(),v=n.get("subtext"),b=new ZRText({style:createTextStyle$1(d,{text:v,fill:d.getTextColor(),y:g.height+n.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),w=n.get("link"),x=n.get("sublink"),S=n.get("triggerEvent",!0);p.silent=!w&&!S,b.silent=!x&&!S,w&&p.on("click",function(){windowOpen(w,"_"+n.get("target"))}),x&&b.on("click",function(){windowOpen(x,"_"+n.get("subtarget"))}),getECData(p).eventData=getECData(b).eventData=S?{componentType:"title",componentIndex:n.componentIndex}:null,c.add(p),v&&c.add(b);var E=c.getBoundingRect(),T=n.getBoxLayoutParams();T.width=E.width,T.height=E.height;var C=getLayoutRect(T,{width:l.getWidth(),height:l.getHeight()},n.get("padding"));h||(h=n.get("left")||n.get("right"),h==="middle"&&(h="center"),h==="right"?C.x+=C.width:h==="center"&&(C.x+=C.width/2)),f||(f=n.get("top")||n.get("bottom"),f==="center"&&(f="middle"),f==="bottom"?C.y+=C.height:f==="middle"&&(C.y+=C.height/2),f=f||"top"),c.x=C.x,c.y=C.y,c.markRedraw();var A={align:h,verticalAlign:f};p.setStyle(A),b.setStyle(A),E=c.getBoundingRect();var R=C.margin,j=n.getItemStyle(["color","opacity"]);j.fill=n.get("backgroundColor");var D=new Rect$2({shape:{x:E.x-R[3],y:E.y-R[0],width:E.width+R[1]+R[3],height:E.height+R[0]+R[2],r:n.get("borderRadius")},style:j,subPixelOptimize:!0,silent:!0});c.add(D)}},a.type="title",a}(ComponentView);function install$g(o){o.registerComponentModel(TitleModel),o.registerComponentView(TitleView)}var TimelineModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.layoutMode="box",n}return a.prototype.init=function(n,s,l){this.mergeDefaultAndTheme(n,l),this._initData()},a.prototype.mergeOption=function(n){o.prototype.mergeOption.apply(this,arguments),this._initData()},a.prototype.setCurrentIndex=function(n){n==null&&(n=this.option.currentIndex);var s=this._data.count();this.option.loop?n=(n%s+s)%s:(n>=s&&(n=s-1),n<0&&(n=0)),this.option.currentIndex=n},a.prototype.getCurrentIndex=function(){return this.option.currentIndex},a.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},a.prototype.setPlayState=function(n){this.option.autoPlay=!!n},a.prototype.getPlayState=function(){return!!this.option.autoPlay},a.prototype._initData=function(){var n=this.option,s=n.data||[],l=n.axisType,c=this._names=[],u;l==="category"?(u=[],each$f(s,function(f,p){var g=convertOptionIdName(getDataItemValue(f),""),v;isObject$3(f)?(v=clone$4(f),v.value=p):v=p,u.push(v),c.push(g)})):u=s;var d={category:"ordinal",time:"time",value:"number"}[l]||"number",h=this._data=new SeriesData([{name:"value",type:d}],this);h.initData(u,c)},a.prototype.getData=function(){return this._data},a.prototype.getCategories=function(){if(this.get("axisType")==="category")return this._names.slice()},a.type="timeline",a.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},a}(ComponentModel),SliderTimelineModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="timeline.slider",a.defaultOption=inheritDefaultOption(TimelineModel.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),a}(TimelineModel);mixin(SliderTimelineModel,DataFormatMixin.prototype);var TimelineView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="timeline",a}(ComponentView),TimelineAxis=function(o){__extends$1(a,o);function a(n,s,l,c){var u=o.call(this,n,s,l)||this;return u.type=c||"value",u}return a.prototype.getLabelModel=function(){return this.model.getModel("label")},a.prototype.isHorizontal=function(){return this.model.get("orient")==="horizontal"},a}(Axis),PI=Math.PI,labelDataIndexStore=makeInner(),SliderTimelineView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(n,s){this.api=s},a.prototype.render=function(n,s,l){if(this.model=n,this.api=l,this.ecModel=s,this.group.removeAll(),n.get("show",!0)){var c=this._layout(n,l),u=this._createGroup("_mainGroup"),d=this._createGroup("_labelGroup"),h=this._axis=this._createAxis(c,n);n.formatTooltip=function(f){var p=h.scale.getLabel({value:f});return createTooltipMarkup("nameValue",{noName:!0,value:p})},each$f(["AxisLine","AxisTick","Control","CurrentPointer"],function(f){this["_render"+f](c,u,h,n)},this),this._renderAxisLabel(c,d,h,n),this._position(c,n)}this._doPlayStop(),this._updateTicksStatus()},a.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},a.prototype.dispose=function(){this._clearTimer()},a.prototype._layout=function(n,s){var l=n.get(["label","position"]),c=n.get("orient"),u=getViewRect(n,s),d;l==null||l==="auto"?d=c==="horizontal"?u.y+u.height/2<s.getHeight()/2?"-":"+":u.x+u.width/2<s.getWidth()/2?"+":"-":isString$2(l)?d={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[c][l]:d=l;var h={horizontal:"center",vertical:d>=0||d==="+"?"left":"right"},f={horizontal:d>=0||d==="+"?"top":"bottom",vertical:"middle"},p={horizontal:0,vertical:PI/2},g=c==="vertical"?u.height:u.width,v=n.getModel("controlStyle"),b=v.get("show",!0),w=b?v.get("itemSize"):0,x=b?v.get("itemGap"):0,S=w+x,E=n.get(["label","rotate"])||0;E=E*PI/180;var T,C,A,R=v.get("position",!0),j=b&&v.get("showPlayBtn",!0),D=b&&v.get("showPrevBtn",!0),O=b&&v.get("showNextBtn",!0),H=0,q=g;R==="left"||R==="bottom"?(j&&(T=[0,0],H+=S),D&&(C=[H,0],H+=S),O&&(A=[q-w,0],q-=S)):(j&&(T=[q-w,0],q-=S),D&&(C=[0,0],H+=S),O&&(A=[q-w,0],q-=S));var Y=[H,q];return n.get("inverse")&&Y.reverse(),{viewRect:u,mainLength:g,orient:c,rotation:p[c],labelRotation:E,labelPosOpt:d,labelAlign:n.get(["label","align"])||h[c],labelBaseline:n.get(["label","verticalAlign"])||n.get(["label","baseline"])||f[c],playPosition:T,prevBtnPosition:C,nextBtnPosition:A,axisExtent:Y,controlSize:w,controlGap:x}},a.prototype._position=function(n,s){var l=this._mainGroup,c=this._labelGroup,u=n.viewRect;if(n.orient==="vertical"){var d=create$1(),h=u.x,f=u.y+u.height;translate(d,d,[-h,-f]),rotate(d,d,-PI/2),translate(d,d,[h,f]),u=u.clone(),u.applyTransform(d)}var p=T(u),g=T(l.getBoundingRect()),v=T(c.getBoundingRect()),b=[l.x,l.y],w=[c.x,c.y];w[0]=b[0]=p[0][0];var x=n.labelPosOpt;if(x==null||isString$2(x)){var S=x==="+"?0:1;C(b,g,p,1,S),C(w,v,p,1,1-S)}else{var S=x>=0?0:1;C(b,g,p,1,S),w[1]=b[1]+x}l.setPosition(b),c.setPosition(w),l.rotation=c.rotation=n.rotation,E(l),E(c);function E(A){A.originX=p[0][0]-A.x,A.originY=p[1][0]-A.y}function T(A){return[[A.x,A.x+A.width],[A.y,A.y+A.height]]}function C(A,R,j,D,O){A[D]+=j[D][O]-R[D][O]}},a.prototype._createAxis=function(n,s){var l=s.getData(),c=s.get("axisType"),u=createScaleByModel(s,c);u.getTicks=function(){return l.mapArray(["value"],function(f){return{value:f}})};var d=l.getDataExtent("value");u.setExtent(d[0],d[1]),u.calcNiceTicks();var h=new TimelineAxis("value",u,n.axisExtent,c);return h.model=s,h},a.prototype._createGroup=function(n){var s=this[n]=new Group$3;return this.group.add(s),s},a.prototype._renderAxisLine=function(n,s,l,c){var u=l.getExtent();if(c.get(["lineStyle","show"])){var d=new Line$1({shape:{x1:u[0],y1:0,x2:u[1],y2:0},style:extend({lineCap:"round"},c.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});s.add(d);var h=this._progressLine=new Line$1({shape:{x1:u[0],x2:this._currentPointer?this._currentPointer.x:u[0],y1:0,y2:0},style:defaults({lineCap:"round",lineWidth:d.style.lineWidth},c.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});s.add(h)}},a.prototype._renderAxisTick=function(n,s,l,c){var u=this,d=c.getData(),h=l.scale.getTicks();this._tickSymbols=[],each$f(h,function(f){var p=l.dataToCoord(f.value),g=d.getItemModel(f.value),v=g.getModel("itemStyle"),b=g.getModel(["emphasis","itemStyle"]),w=g.getModel(["progress","itemStyle"]),x={x:p,y:0,onclick:bind$1(u._changeTimeline,u,f.value)},S=giveSymbol(g,v,s,x);S.ensureState("emphasis").style=b.getItemStyle(),S.ensureState("progress").style=w.getItemStyle(),enableHoverEmphasis(S);var E=getECData(S);g.get("tooltip")?(E.dataIndex=f.value,E.dataModel=c):E.dataIndex=E.dataModel=null,u._tickSymbols.push(S)})},a.prototype._renderAxisLabel=function(n,s,l,c){var u=this,d=l.getLabelModel();if(d.get("show")){var h=c.getData(),f=l.getViewLabels();this._tickLabels=[],each$f(f,function(p){var g=p.tickValue,v=h.getItemModel(g),b=v.getModel("label"),w=v.getModel(["emphasis","label"]),x=v.getModel(["progress","label"]),S=l.dataToCoord(p.tickValue),E=new ZRText({x:S,y:0,rotation:n.labelRotation-n.rotation,onclick:bind$1(u._changeTimeline,u,g),silent:!1,style:createTextStyle$1(b,{text:p.formattedLabel,align:n.labelAlign,verticalAlign:n.labelBaseline})});E.ensureState("emphasis").style=createTextStyle$1(w),E.ensureState("progress").style=createTextStyle$1(x),s.add(E),enableHoverEmphasis(E),labelDataIndexStore(E).dataIndex=g,u._tickLabels.push(E)})}},a.prototype._renderControl=function(n,s,l,c){var u=n.controlSize,d=n.rotation,h=c.getModel("controlStyle").getItemStyle(),f=c.getModel(["emphasis","controlStyle"]).getItemStyle(),p=c.getPlayState(),g=c.get("inverse",!0);v(n.nextBtnPosition,"next",bind$1(this._changeTimeline,this,g?"-":"+")),v(n.prevBtnPosition,"prev",bind$1(this._changeTimeline,this,g?"+":"-")),v(n.playPosition,p?"stop":"play",bind$1(this._handlePlayClick,this,!p),!0);function v(b,w,x,S){if(b){var E=parsePercent$1(retrieve2(c.get(["controlStyle",w+"BtnSize"]),u),u),T=[0,-E/2,E,E],C=makeControlIcon(c,w+"Icon",T,{x:b[0],y:b[1],originX:u/2,originY:0,rotation:S?-d:0,rectHover:!0,style:h,onclick:x});C.ensureState("emphasis").style=f,s.add(C),enableHoverEmphasis(C)}}},a.prototype._renderCurrentPointer=function(n,s,l,c){var u=c.getData(),d=c.getCurrentIndex(),h=u.getItemModel(d).getModel("checkpointStyle"),f=this,p={onCreate:function(g){g.draggable=!0,g.drift=bind$1(f._handlePointerDrag,f),g.ondragend=bind$1(f._handlePointerDragend,f),pointerMoveTo(g,f._progressLine,d,l,c,!0)},onUpdate:function(g){pointerMoveTo(g,f._progressLine,d,l,c)}};this._currentPointer=giveSymbol(h,h,this._mainGroup,{},this._currentPointer,p)},a.prototype._handlePlayClick=function(n){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:n,from:this.uid})},a.prototype._handlePointerDrag=function(n,s,l){this._clearTimer(),this._pointerChangeTimeline([l.offsetX,l.offsetY])},a.prototype._handlePointerDragend=function(n){this._pointerChangeTimeline([n.offsetX,n.offsetY],!0)},a.prototype._pointerChangeTimeline=function(n,s){var l=this._toAxisCoord(n)[0],c=this._axis,u=asc$2(c.getExtent().slice());l>u[1]&&(l=u[1]),l<u[0]&&(l=u[0]),this._currentPointer.x=l,this._currentPointer.markRedraw();var d=this._progressLine;d&&(d.shape.x2=l,d.dirty());var h=this._findNearestTick(l),f=this.model;(s||h!==f.getCurrentIndex()&&f.get("realtime"))&&this._changeTimeline(h)},a.prototype._doPlayStop=function(){var n=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var s=n.model;n._changeTimeline(s.getCurrentIndex()+(s.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},a.prototype._toAxisCoord=function(n){var s=this._mainGroup.getLocalTransform();return applyTransform(n,s,!0)},a.prototype._findNearestTick=function(n){var s=this.model.getData(),l=1/0,c,u=this._axis;return s.each(["value"],function(d,h){var f=u.dataToCoord(d),p=Math.abs(f-n);p<l&&(l=p,c=h)}),c},a.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},a.prototype._changeTimeline=function(n){var s=this.model.getCurrentIndex();n==="+"?n=s+1:n==="-"&&(n=s-1),this.api.dispatchAction({type:"timelineChange",currentIndex:n,from:this.uid})},a.prototype._updateTicksStatus=function(){var n=this.model.getCurrentIndex(),s=this._tickSymbols,l=this._tickLabels;if(s)for(var c=0;c<s.length;c++)s&&s[c]&&s[c].toggleState("progress",c<n);if(l)for(var c=0;c<l.length;c++)l&&l[c]&&l[c].toggleState("progress",labelDataIndexStore(l[c]).dataIndex<=n)},a.type="timeline.slider",a}(TimelineView);function createScaleByModel(o,a){if(a=a||o.get("type"),a)switch(a){case"category":return new OrdinalScale({ordinalMeta:o.getCategories(),extent:[1/0,-1/0]});case"time":return new TimeScale({locale:o.ecModel.getLocaleModel(),useUTC:o.ecModel.get("useUTC")});default:return new IntervalScale}}function getViewRect(o,a){return getLayoutRect(o.getBoxLayoutParams(),{width:a.getWidth(),height:a.getHeight()},o.get("padding"))}function makeControlIcon(o,a,n,s){var l=s.style,c=createIcon(o.get(["controlStyle",a]),s||{},new BoundingRect(n[0],n[1],n[2],n[3]));return l&&c.setStyle(l),c}function giveSymbol(o,a,n,s,l,c){var u=a.get("color");if(l)l.setColor(u),n.add(l),c&&c.onUpdate(l);else{var d=o.get("symbol");l=createSymbol$1(d,-1,-1,2,2,u),l.setStyle("strokeNoScale",!0),n.add(l),c&&c.onCreate(l)}var h=a.getItemStyle(["color"]);l.setStyle(h),s=merge({rectHover:!0,z2:100},s,!0);var f=normalizeSymbolSize(o.get("symbolSize"));s.scaleX=f[0]/2,s.scaleY=f[1]/2;var p=normalizeSymbolOffset(o.get("symbolOffset"),f);p&&(s.x=(s.x||0)+p[0],s.y=(s.y||0)+p[1]);var g=o.get("symbolRotate");return s.rotation=(g||0)*Math.PI/180||0,l.attr(s),l.updateTransform(),l}function pointerMoveTo(o,a,n,s,l,c){if(!o.dragging){var u=l.getModel("checkpointStyle"),d=s.dataToCoord(l.getData().get("value",n));if(c||!u.get("animation",!0))o.attr({x:d,y:0}),a&&a.attr({shape:{x2:d}});else{var h={duration:u.get("animationDuration",!0),easing:u.get("animationEasing",!0)};o.stopAnimation(null,!0),o.animateTo({x:d,y:0},h),a&&a.animateTo({shape:{x2:d}},h)}}}function installTimelineAction(o){o.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(a,n,s){var l=n.getComponent("timeline");return l&&a.currentIndex!=null&&(l.setCurrentIndex(a.currentIndex),!l.get("loop",!0)&&l.isIndexMax()&&l.getPlayState()&&(l.setPlayState(!1),s.dispatchAction({type:"timelinePlayChange",playState:!1,from:a.from}))),n.resetOption("timeline",{replaceMerge:l.get("replaceMerge",!0)}),defaults({currentIndex:l.option.currentIndex},a)}),o.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(a,n){var s=n.getComponent("timeline");s&&a.playState!=null&&s.setPlayState(a.playState)})}function timelinePreprocessor(o){var a=o&&o.timeline;isArray$1(a)||(a=a?[a]:[]),each$f(a,function(n){n&&compatibleEC2(n)})}function compatibleEC2(o){var a=o.type,n={number:"value",time:"time"};if(n[a]&&(o.axisType=n[a],delete o.type),transferItem(o),has$1(o,"controlPosition")){var s=o.controlStyle||(o.controlStyle={});has$1(s,"position")||(s.position=o.controlPosition),s.position==="none"&&!has$1(s,"show")&&(s.show=!1,delete s.position),delete o.controlPosition}each$f(o.data||[],function(l){isObject$3(l)&&!isArray$1(l)&&(!has$1(l,"value")&&has$1(l,"name")&&(l.value=l.name),transferItem(l))})}function transferItem(o){var a=o.itemStyle||(o.itemStyle={}),n=a.emphasis||(a.emphasis={}),s=o.label||o.label||{},l=s.normal||(s.normal={}),c={normal:1,emphasis:1};each$f(s,function(u,d){!c[d]&&!has$1(l,d)&&(l[d]=u)}),n.label&&!has$1(s,"emphasis")&&(s.emphasis=n.label,delete n.label)}function has$1(o,a){return o.hasOwnProperty(a)}function install$f(o){o.registerComponentModel(SliderTimelineModel),o.registerComponentView(SliderTimelineView),o.registerSubTypeDefaulter("timeline",function(){return"slider"}),installTimelineAction(o),o.registerPreprocessor(timelinePreprocessor)}function checkMarkerInSeries(o,a){if(!o)return!1;for(var n=isArray$1(o)?o:[o],s=0;s<n.length;s++)if(n[s]&&n[s][a])return!0;return!1}function fillLabel(o){defaultEmphasis(o,"label",["show"])}var inner$5=makeInner(),MarkerModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.createdBySelf=!1,n}return a.prototype.init=function(n,s,l){if(process.env.NODE_ENV!=="production"&&this.type==="marker")throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(n,l),this._mergeOption(n,l,!1,!0)},a.prototype.isAnimationEnabled=function(){if(env.node)return!1;var n=this.__hostSeries;return this.getShallow("animation")&&n&&n.isAnimationEnabled()},a.prototype.mergeOption=function(n,s){this._mergeOption(n,s,!1,!1)},a.prototype._mergeOption=function(n,s,l,c){var u=this.mainType;l||s.eachSeries(function(d){var h=d.get(this.mainType,!0),f=inner$5(d)[u];if(!h||!h.data){inner$5(d)[u]=null;return}f?f._mergeOption(h,s,!0):(c&&fillLabel(h),each$f(h.data,function(p){p instanceof Array?(fillLabel(p[0]),fillLabel(p[1])):fillLabel(p)}),f=this.createMarkerModelFromSeries(h,this,s),extend(f,{mainType:this.mainType,seriesIndex:d.seriesIndex,name:d.name,createdBySelf:!0}),f.__hostSeries=d),inner$5(d)[u]=f},this)},a.prototype.formatTooltip=function(n,s,l){var c=this.getData(),u=this.getRawValue(n),d=c.getName(n);return createTooltipMarkup("section",{header:this.name,blocks:[createTooltipMarkup("nameValue",{name:d,value:u,noName:!d,noValue:u==null})]})},a.prototype.getData=function(){return this._data},a.prototype.setData=function(n){this._data=n},a.prototype.getDataParams=function(n,s){var l=DataFormatMixin.prototype.getDataParams.call(this,n,s),c=this.__hostSeries;return c&&(l.seriesId=c.id,l.seriesName=c.name,l.seriesType=c.subType),l},a.getMarkerModelFromSeries=function(n,s){return inner$5(n)[s]},a.type="marker",a.dependencies=["series","grid","polar","geo"],a}(ComponentModel);mixin(MarkerModel,DataFormatMixin.prototype);var MarkPointModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.createMarkerModelFromSeries=function(n,s,l){return new a(n,s,l)},a.type="markPoint",a.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},a}(MarkerModel);function hasXOrY(o){return!(isNaN(parseFloat(o.x))&&isNaN(parseFloat(o.y)))}function hasXAndY(o){return!isNaN(parseFloat(o.x))&&!isNaN(parseFloat(o.y))}function markerTypeCalculatorWithExtent(o,a,n,s,l,c){var u=[],d=isDimensionStacked(a,s),h=d?a.getCalculationInfo("stackResultDimension"):s,f=numCalculate(a,h,o),p=a.indicesOfNearest(h,f)[0];u[l]=a.get(n,p),u[c]=a.get(h,p);var g=a.get(s,p),v=getPrecision(a.get(s,p));return v=Math.min(v,20),v>=0&&(u[c]=+u[c].toFixed(v)),[u,g]}var markerTypeCalculator={min:curry$1(markerTypeCalculatorWithExtent,"min"),max:curry$1(markerTypeCalculatorWithExtent,"max"),average:curry$1(markerTypeCalculatorWithExtent,"average"),median:curry$1(markerTypeCalculatorWithExtent,"median")};function dataTransform(o,a){if(a){var n=o.getData(),s=o.coordinateSystem,l=s&&s.dimensions;if(!hasXAndY(a)&&!isArray$1(a.coord)&&isArray$1(l)){var c=getAxisInfo(a,n,s,o);if(a=clone$4(a),a.type&&markerTypeCalculator[a.type]&&c.baseAxis&&c.valueAxis){var u=indexOf(l,c.baseAxis.dim),d=indexOf(l,c.valueAxis.dim),h=markerTypeCalculator[a.type](n,c.baseDataDim,c.valueDataDim,u,d);a.coord=h[0],a.value=h[1]}else a.coord=[a.xAxis!=null?a.xAxis:a.radiusAxis,a.yAxis!=null?a.yAxis:a.angleAxis]}if(a.coord==null||!isArray$1(l))a.coord=[];else for(var f=a.coord,p=0;p<2;p++)markerTypeCalculator[f[p]]&&(f[p]=numCalculate(n,n.mapDimension(l[p]),f[p]));return a}}function getAxisInfo(o,a,n,s){var l={};return o.valueIndex!=null||o.valueDim!=null?(l.valueDataDim=o.valueIndex!=null?a.getDimension(o.valueIndex):o.valueDim,l.valueAxis=n.getAxis(dataDimToCoordDim(s,l.valueDataDim)),l.baseAxis=n.getOtherAxis(l.valueAxis),l.baseDataDim=a.mapDimension(l.baseAxis.dim)):(l.baseAxis=s.getBaseAxis(),l.valueAxis=n.getOtherAxis(l.baseAxis),l.baseDataDim=a.mapDimension(l.baseAxis.dim),l.valueDataDim=a.mapDimension(l.valueAxis.dim)),l}function dataDimToCoordDim(o,a){var n=o.getData().getDimensionInfo(a);return n&&n.coordDim}function dataFilter(o,a){return o&&o.containData&&a.coord&&!hasXOrY(a)?o.containData(a.coord):!0}function zoneFilter(o,a,n){return o&&o.containZone&&a.coord&&n.coord&&!hasXOrY(a)&&!hasXOrY(n)?o.containZone(a.coord,n.coord):!0}function createMarkerDimValueGetter(o,a){return o?function(n,s,l,c){var u=c<2?n.coord&&n.coord[c]:n.value;return parseDataValue(u,a[c])}:function(n,s,l,c){return parseDataValue(n.value,a[c])}}function numCalculate(o,a,n){if(n==="average"){var s=0,l=0;return o.each(a,function(c,u){isNaN(c)||(s+=c,l++)}),s/l}else return n==="median"?o.getMedian(a):o.getDataExtent(a)[n==="max"?1:0]}var inner$4=makeInner(),MarkerView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.init=function(){this.markerGroupMap=createHashMap()},a.prototype.render=function(n,s,l){var c=this,u=this.markerGroupMap;u.each(function(d){inner$4(d).keep=!1}),s.eachSeries(function(d){var h=MarkerModel.getMarkerModelFromSeries(d,c.type);h&&c.renderSeries(d,h,s,l)}),u.each(function(d){!inner$4(d).keep&&c.group.remove(d.group)})},a.prototype.markKeep=function(n){inner$4(n).keep=!0},a.prototype.toggleBlurSeries=function(n,s){var l=this;each$f(n,function(c){var u=MarkerModel.getMarkerModelFromSeries(c,l.type);if(u){var d=u.getData();d.eachItemGraphicEl(function(h){h&&(s?enterBlur(h):leaveBlur(h))})}})},a.type="marker",a}(ComponentView);function updateMarkerLayout(o,a,n){var s=a.coordinateSystem;o.each(function(l){var c=o.getItemModel(l),u,d=parsePercent(c.get("x"),n.getWidth()),h=parsePercent(c.get("y"),n.getHeight());if(!isNaN(d)&&!isNaN(h))u=[d,h];else if(a.getMarkerPosition)u=a.getMarkerPosition(o.getValues(o.dimensions,l));else if(s){var f=o.get(s.dimensions[0],l),p=o.get(s.dimensions[1],l);u=s.dataToPoint([f,p])}isNaN(d)||(u[0]=d),isNaN(h)||(u[1]=h),o.setItemLayout(l,u)})}var MarkPointView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.updateTransform=function(n,s,l){s.eachSeries(function(c){var u=MarkerModel.getMarkerModelFromSeries(c,"markPoint");u&&(updateMarkerLayout(u.getData(),c,l),this.markerGroupMap.get(c.id).updateLayout())},this)},a.prototype.renderSeries=function(n,s,l,c){var u=n.coordinateSystem,d=n.id,h=n.getData(),f=this.markerGroupMap,p=f.get(d)||f.set(d,new SymbolDraw),g=createData(u,n,s);s.setData(g),updateMarkerLayout(s.getData(),n,c),g.each(function(v){var b=g.getItemModel(v),w=b.getShallow("symbol"),x=b.getShallow("symbolSize"),S=b.getShallow("symbolRotate"),E=b.getShallow("symbolOffset"),T=b.getShallow("symbolKeepAspect");if(isFunction$1(w)||isFunction$1(x)||isFunction$1(S)||isFunction$1(E)){var C=s.getRawValue(v),A=s.getDataParams(v);isFunction$1(w)&&(w=w(C,A)),isFunction$1(x)&&(x=x(C,A)),isFunction$1(S)&&(S=S(C,A)),isFunction$1(E)&&(E=E(C,A))}var R=b.getModel("itemStyle").getItemStyle(),j=getVisualFromData(h,"color");R.fill||(R.fill=j),g.setItemVisual(v,{symbol:w,symbolSize:x,symbolRotate:S,symbolOffset:E,symbolKeepAspect:T,style:R})}),p.updateData(g),this.group.add(p.group),g.eachItemGraphicEl(function(v){v.traverse(function(b){getECData(b).dataModel=s})}),this.markKeep(p),p.group.silent=s.get("silent")||n.get("silent")},a.type="markPoint",a}(MarkerView);function createData(o,a,n){var s;o?s=map$1(o&&o.dimensions,function(d){var h=a.getData().getDimensionInfo(a.getData().mapDimension(d))||{};return extend(extend({},h),{name:d,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,n),c=map$1(n.get("data"),curry$1(dataTransform,a));o&&(c=filter(c,curry$1(dataFilter,o)));var u=createMarkerDimValueGetter(!!o,s);return l.initData(c,null,u),l}function install$e(o){o.registerComponentModel(MarkPointModel),o.registerComponentView(MarkPointView),o.registerPreprocessor(function(a){checkMarkerInSeries(a.series,"markPoint")&&(a.markPoint=a.markPoint||{})})}var MarkLineModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.createMarkerModelFromSeries=function(n,s,l){return new a(n,s,l)},a.type="markLine",a.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},a}(MarkerModel),inner$3=makeInner(),markLineTransform=function(o,a,n,s){var l=o.getData(),c;if(isArray$1(s))c=s;else{var u=s.type;if(u==="min"||u==="max"||u==="average"||u==="median"||s.xAxis!=null||s.yAxis!=null){var d=void 0,h=void 0;if(s.yAxis!=null||s.xAxis!=null)d=a.getAxis(s.yAxis!=null?"y":"x"),h=retrieve(s.yAxis,s.xAxis);else{var f=getAxisInfo(s,l,a,o);d=f.valueAxis;var p=getStackedDimension(l,f.valueDataDim);h=numCalculate(l,p,u)}var g=d.dim==="x"?0:1,v=1-g,b=clone$4(s),w={coord:[]};b.type=null,b.coord=[],b.coord[v]=-1/0,w.coord[v]=1/0;var x=n.get("precision");x>=0&&isNumber(h)&&(h=+h.toFixed(Math.min(x,20))),b.coord[g]=w.coord[g]=h,c=[b,w,{type:u,valueIndex:s.valueIndex,value:h}]}else process.env.NODE_ENV!=="production"&&logError("Invalid markLine data."),c=[]}var S=[dataTransform(o,c[0]),dataTransform(o,c[1]),extend({},c[2])];return S[2].type=S[2].type||null,merge(S[2],S[0]),merge(S[2],S[1]),S};function isInfinity$1(o){return!isNaN(o)&&!isFinite(o)}function ifMarkLineHasOnlyDim(o,a,n,s){var l=1-o,c=s.dimensions[o];return isInfinity$1(a[l])&&isInfinity$1(n[l])&&a[o]===n[o]&&s.getAxis(c).containData(a[o])}function markLineFilter(o,a){if(o.type==="cartesian2d"){var n=a[0].coord,s=a[1].coord;if(n&&s&&(ifMarkLineHasOnlyDim(1,n,s,o)||ifMarkLineHasOnlyDim(0,n,s,o)))return!0}return dataFilter(o,a[0])&&dataFilter(o,a[1])}function updateSingleMarkerEndLayout(o,a,n,s,l){var c=s.coordinateSystem,u=o.getItemModel(a),d,h=parsePercent(u.get("x"),l.getWidth()),f=parsePercent(u.get("y"),l.getHeight());if(!isNaN(h)&&!isNaN(f))d=[h,f];else{if(s.getMarkerPosition)d=s.getMarkerPosition(o.getValues(o.dimensions,a));else{var p=c.dimensions,g=o.get(p[0],a),v=o.get(p[1],a);d=c.dataToPoint([g,v])}if(isCoordinateSystemType(c,"cartesian2d")){var b=c.getAxis("x"),w=c.getAxis("y"),p=c.dimensions;isInfinity$1(o.get(p[0],a))?d[0]=b.toGlobalCoord(b.getExtent()[n?0:1]):isInfinity$1(o.get(p[1],a))&&(d[1]=w.toGlobalCoord(w.getExtent()[n?0:1]))}isNaN(h)||(d[0]=h),isNaN(f)||(d[1]=f)}o.setItemLayout(a,d)}var MarkLineView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.updateTransform=function(n,s,l){s.eachSeries(function(c){var u=MarkerModel.getMarkerModelFromSeries(c,"markLine");if(u){var d=u.getData(),h=inner$3(u).from,f=inner$3(u).to;h.each(function(p){updateSingleMarkerEndLayout(h,p,!0,c,l),updateSingleMarkerEndLayout(f,p,!1,c,l)}),d.each(function(p){d.setItemLayout(p,[h.getItemLayout(p),f.getItemLayout(p)])}),this.markerGroupMap.get(c.id).updateLayout()}},this)},a.prototype.renderSeries=function(n,s,l,c){var u=n.coordinateSystem,d=n.id,h=n.getData(),f=this.markerGroupMap,p=f.get(d)||f.set(d,new LineDraw);this.group.add(p.group);var g=createList$1(u,n,s),v=g.from,b=g.to,w=g.line;inner$3(s).from=v,inner$3(s).to=b,s.setData(w);var x=s.get("symbol"),S=s.get("symbolSize"),E=s.get("symbolRotate"),T=s.get("symbolOffset");isArray$1(x)||(x=[x,x]),isArray$1(S)||(S=[S,S]),isArray$1(E)||(E=[E,E]),isArray$1(T)||(T=[T,T]),g.from.each(function(A){C(v,A,!0),C(b,A,!1)}),w.each(function(A){var R=w.getItemModel(A).getModel("lineStyle").getLineStyle();w.setItemLayout(A,[v.getItemLayout(A),b.getItemLayout(A)]),R.stroke==null&&(R.stroke=v.getItemVisual(A,"style").fill),w.setItemVisual(A,{fromSymbolKeepAspect:v.getItemVisual(A,"symbolKeepAspect"),fromSymbolOffset:v.getItemVisual(A,"symbolOffset"),fromSymbolRotate:v.getItemVisual(A,"symbolRotate"),fromSymbolSize:v.getItemVisual(A,"symbolSize"),fromSymbol:v.getItemVisual(A,"symbol"),toSymbolKeepAspect:b.getItemVisual(A,"symbolKeepAspect"),toSymbolOffset:b.getItemVisual(A,"symbolOffset"),toSymbolRotate:b.getItemVisual(A,"symbolRotate"),toSymbolSize:b.getItemVisual(A,"symbolSize"),toSymbol:b.getItemVisual(A,"symbol"),style:R})}),p.updateData(w),g.line.eachItemGraphicEl(function(A){getECData(A).dataModel=s,A.traverse(function(R){getECData(R).dataModel=s})});function C(A,R,j){var D=A.getItemModel(R);updateSingleMarkerEndLayout(A,R,j,n,c);var O=D.getModel("itemStyle").getItemStyle();O.fill==null&&(O.fill=getVisualFromData(h,"color")),A.setItemVisual(R,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:retrieve2(D.get("symbolOffset",!0),T[j?0:1]),symbolRotate:retrieve2(D.get("symbolRotate",!0),E[j?0:1]),symbolSize:retrieve2(D.get("symbolSize"),S[j?0:1]),symbol:retrieve2(D.get("symbol",!0),x[j?0:1]),style:O})}this.markKeep(p),p.group.silent=s.get("silent")||n.get("silent")},a.type="markLine",a}(MarkerView);function createList$1(o,a,n){var s;o?s=map$1(o&&o.dimensions,function(f){var p=a.getData().getDimensionInfo(a.getData().mapDimension(f))||{};return extend(extend({},p),{name:f,ordinalMeta:null})}):s=[{name:"value",type:"float"}];var l=new SeriesData(s,n),c=new SeriesData(s,n),u=new SeriesData([],n),d=map$1(n.get("data"),curry$1(markLineTransform,a,o,n));o&&(d=filter(d,curry$1(markLineFilter,o)));var h=createMarkerDimValueGetter(!!o,s);return l.initData(map$1(d,function(f){return f[0]}),null,h),c.initData(map$1(d,function(f){return f[1]}),null,h),u.initData(map$1(d,function(f){return f[2]})),u.hasItemOption=!0,{from:l,to:c,line:u}}function install$d(o){o.registerComponentModel(MarkLineModel),o.registerComponentView(MarkLineView),o.registerPreprocessor(function(a){checkMarkerInSeries(a.series,"markLine")&&(a.markLine=a.markLine||{})})}var MarkAreaModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.createMarkerModelFromSeries=function(n,s,l){return new a(n,s,l)},a.type="markArea",a.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},a}(MarkerModel),inner$2=makeInner(),markAreaTransform=function(o,a,n,s){var l=s[0],c=s[1];if(!(!l||!c)){var u=dataTransform(o,l),d=dataTransform(o,c),h=u.coord,f=d.coord;h[0]=retrieve(h[0],-1/0),h[1]=retrieve(h[1],-1/0),f[0]=retrieve(f[0],1/0),f[1]=retrieve(f[1],1/0);var p=mergeAll([{},u,d]);return p.coord=[u.coord,d.coord],p.x0=u.x,p.y0=u.y,p.x1=d.x,p.y1=d.y,p}};function isInfinity(o){return!isNaN(o)&&!isFinite(o)}function ifMarkAreaHasOnlyDim(o,a,n,s){var l=1-o;return isInfinity(a[l])&&isInfinity(n[l])}function markAreaFilter(o,a){var n=a.coord[0],s=a.coord[1],l={coord:n,x:a.x0,y:a.y0},c={coord:s,x:a.x1,y:a.y1};return isCoordinateSystemType(o,"cartesian2d")?n&&s&&(ifMarkAreaHasOnlyDim(1,n,s)||ifMarkAreaHasOnlyDim(0,n,s))?!0:zoneFilter(o,l,c):dataFilter(o,l)||dataFilter(o,c)}function getSingleMarkerEndPoint(o,a,n,s,l){var c=s.coordinateSystem,u=o.getItemModel(a),d,h=parsePercent(u.get(n[0]),l.getWidth()),f=parsePercent(u.get(n[1]),l.getHeight());if(!isNaN(h)&&!isNaN(f))d=[h,f];else{if(s.getMarkerPosition){var p=o.getValues(["x0","y0"],a),g=o.getValues(["x1","y1"],a),v=c.clampData(p),b=c.clampData(g),w=[];n[0]==="x0"?w[0]=v[0]>b[0]?g[0]:p[0]:w[0]=v[0]>b[0]?p[0]:g[0],n[1]==="y0"?w[1]=v[1]>b[1]?g[1]:p[1]:w[1]=v[1]>b[1]?p[1]:g[1],d=s.getMarkerPosition(w,n,!0)}else{var x=o.get(n[0],a),S=o.get(n[1],a),E=[x,S];c.clampData&&c.clampData(E,E),d=c.dataToPoint(E,!0)}if(isCoordinateSystemType(c,"cartesian2d")){var T=c.getAxis("x"),C=c.getAxis("y"),x=o.get(n[0],a),S=o.get(n[1],a);isInfinity(x)?d[0]=T.toGlobalCoord(T.getExtent()[n[0]==="x0"?0:1]):isInfinity(S)&&(d[1]=C.toGlobalCoord(C.getExtent()[n[1]==="y0"?0:1]))}isNaN(h)||(d[0]=h),isNaN(f)||(d[1]=f)}return d}var dimPermutations=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],MarkAreaView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.updateTransform=function(n,s,l){s.eachSeries(function(c){var u=MarkerModel.getMarkerModelFromSeries(c,"markArea");if(u){var d=u.getData();d.each(function(h){var f=map$1(dimPermutations,function(g){return getSingleMarkerEndPoint(d,h,g,c,l)});d.setItemLayout(h,f);var p=d.getItemGraphicEl(h);p.setShape("points",f)})}},this)},a.prototype.renderSeries=function(n,s,l,c){var u=n.coordinateSystem,d=n.id,h=n.getData(),f=this.markerGroupMap,p=f.get(d)||f.set(d,{group:new Group$3});this.group.add(p.group),this.markKeep(p);var g=createList(u,n,s);s.setData(g),g.each(function(v){var b=map$1(dimPermutations,function(O){return getSingleMarkerEndPoint(g,v,O,n,c)}),w=u.getAxis("x").scale,x=u.getAxis("y").scale,S=w.getExtent(),E=x.getExtent(),T=[w.parse(g.get("x0",v)),w.parse(g.get("x1",v))],C=[x.parse(g.get("y0",v)),x.parse(g.get("y1",v))];asc$2(T),asc$2(C);var A=!(S[0]>T[1]||S[1]<T[0]||E[0]>C[1]||E[1]<C[0]),R=!A;g.setItemLayout(v,{points:b,allClipped:R});var j=g.getItemModel(v).getModel("itemStyle").getItemStyle(),D=getVisualFromData(h,"color");j.fill||(j.fill=D,isString$2(j.fill)&&(j.fill=modifyAlpha(j.fill,.4))),j.stroke||(j.stroke=D),g.setItemVisual(v,"style",j)}),g.diff(inner$2(p).data).add(function(v){var b=g.getItemLayout(v);if(!b.allClipped){var w=new Polygon({shape:{points:b.points}});g.setItemGraphicEl(v,w),p.group.add(w)}}).update(function(v,b){var w=inner$2(p).data.getItemGraphicEl(b),x=g.getItemLayout(v);x.allClipped?w&&p.group.remove(w):(w?updateProps$1(w,{shape:{points:x.points}},s,v):w=new Polygon({shape:{points:x.points}}),g.setItemGraphicEl(v,w),p.group.add(w))}).remove(function(v){var b=inner$2(p).data.getItemGraphicEl(v);p.group.remove(b)}).execute(),g.eachItemGraphicEl(function(v,b){var w=g.getItemModel(b),x=g.getItemVisual(b,"style");v.useStyle(g.getItemVisual(b,"style")),setLabelStyle(v,getLabelStatesModels(w),{labelFetcher:s,labelDataIndex:b,defaultText:g.getName(b)||"",inheritColor:isString$2(x.fill)?modifyAlpha(x.fill,1):"#000"}),setStatesStylesFromModel(v,w),toggleHoverEmphasis(v,null,null,w.get(["emphasis","disabled"])),getECData(v).dataModel=s}),inner$2(p).data=g,p.group.silent=s.get("silent")||n.get("silent")},a.type="markArea",a}(MarkerView);function createList(o,a,n){var s,l,c=["x0","y0","x1","y1"];if(o){var u=map$1(o&&o.dimensions,function(f){var p=a.getData(),g=p.getDimensionInfo(p.mapDimension(f))||{};return extend(extend({},g),{name:f,ordinalMeta:null})});l=map$1(c,function(f,p){return{name:f,type:u[p%2].type}}),s=new SeriesData(l,n)}else l=[{name:"value",type:"float"}],s=new SeriesData(l,n);var d=map$1(n.get("data"),curry$1(markAreaTransform,a,o,n));o&&(d=filter(d,curry$1(markAreaFilter,o)));var h=o?function(f,p,g,v){var b=f.coord[Math.floor(v/2)][v%2];return parseDataValue(b,l[v])}:function(f,p,g,v){return parseDataValue(f.value,l[v])};return s.initData(d,null,h),s.hasItemOption=!0,s}function install$c(o){o.registerComponentModel(MarkAreaModel),o.registerComponentView(MarkAreaView),o.registerPreprocessor(function(a){checkMarkerInSeries(a.series,"markArea")&&(a.markArea=a.markArea||{})})}var getDefaultSelectorOptions=function(o,a){if(a==="all")return{type:"all",title:o.getLocaleModel().get(["legend","selector","all"])};if(a==="inverse")return{type:"inverse",title:o.getLocaleModel().get(["legend","selector","inverse"])}},LegendModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.layoutMode={type:"box",ignoreSize:!0},n}return a.prototype.init=function(n,s,l){this.mergeDefaultAndTheme(n,l),n.selected=n.selected||{},this._updateSelector(n)},a.prototype.mergeOption=function(n,s){o.prototype.mergeOption.call(this,n,s),this._updateSelector(n)},a.prototype._updateSelector=function(n){var s=n.selector,l=this.ecModel;s===!0&&(s=n.selector=["all","inverse"]),isArray$1(s)&&each$f(s,function(c,u){isString$2(c)&&(c={type:c}),s[u]=merge(c,getDefaultSelectorOptions(l,c.type))})},a.prototype.optionUpdated=function(){this._updateData(this.ecModel);var n=this._data;if(n[0]&&this.get("selectedMode")==="single"){for(var s=!1,l=0;l<n.length;l++){var c=n[l].get("name");if(this.isSelected(c)){this.select(c),s=!0;break}}!s&&this.select(n[0].get("name"))}},a.prototype._updateData=function(n){var s=[],l=[];n.eachRawSeries(function(h){var f=h.name;l.push(f);var p;if(h.legendVisualProvider){var g=h.legendVisualProvider,v=g.getAllNames();n.isSeriesFiltered(h)||(l=l.concat(v)),v.length?s=s.concat(v):p=!0}else p=!0;p&&isNameSpecified(h)&&s.push(h.name)}),this._availableNames=l;var c=this.get("data")||s,u=createHashMap(),d=map$1(c,function(h){return(isString$2(h)||isNumber(h))&&(h={name:h}),u.get(h.name)?null:(u.set(h.name,!0),new Model(h,this,this.ecModel))},this);this._data=filter(d,function(h){return!!h})},a.prototype.getData=function(){return this._data},a.prototype.select=function(n){var s=this.option.selected,l=this.get("selectedMode");if(l==="single"){var c=this._data;each$f(c,function(u){s[u.get("name")]=!1})}s[n]=!0},a.prototype.unSelect=function(n){this.get("selectedMode")!=="single"&&(this.option.selected[n]=!1)},a.prototype.toggleSelected=function(n){var s=this.option.selected;s.hasOwnProperty(n)||(s[n]=!0),this[s[n]?"unSelect":"select"](n)},a.prototype.allSelect=function(){var n=this._data,s=this.option.selected;each$f(n,function(l){s[l.get("name",!0)]=!0})},a.prototype.inverseSelect=function(){var n=this._data,s=this.option.selected;each$f(n,function(l){var c=l.get("name",!0);s.hasOwnProperty(c)||(s[c]=!0),s[c]=!s[c]})},a.prototype.isSelected=function(n){var s=this.option.selected;return!(s.hasOwnProperty(n)&&!s[n])&&indexOf(this._availableNames,n)>=0},a.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},a.type="legend.plain",a.dependencies=["series"],a.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},a}(ComponentModel),curry=curry$1,each$3=each$f,Group$1=Group$3,LegendView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.newlineDisabled=!1,n}return a.prototype.init=function(){this.group.add(this._contentGroup=new Group$1),this.group.add(this._selectorGroup=new Group$1),this._isFirstRender=!0},a.prototype.getContentGroup=function(){return this._contentGroup},a.prototype.getSelectorGroup=function(){return this._selectorGroup},a.prototype.render=function(n,s,l){var c=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!n.get("show",!0)){var u=n.get("align"),d=n.get("orient");(!u||u==="auto")&&(u=n.get("left")==="right"&&d==="vertical"?"right":"left");var h=n.get("selector",!0),f=n.get("selectorPosition",!0);h&&(!f||f==="auto")&&(f=d==="horizontal"?"end":"start"),this.renderInner(u,n,s,l,h,d,f);var p=n.getBoxLayoutParams(),g={width:l.getWidth(),height:l.getHeight()},v=n.get("padding"),b=getLayoutRect(p,g,v),w=this.layoutInner(n,u,b,c,h,f),x=getLayoutRect(defaults({width:w.width,height:w.height},p),g,v);this.group.x=x.x-w.x,this.group.y=x.y-w.y,this.group.markRedraw(),this.group.add(this._backgroundEl=makeBackground(w,n))}},a.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},a.prototype.renderInner=function(n,s,l,c,u,d,h){var f=this.getContentGroup(),p=createHashMap(),g=s.get("selectedMode"),v=[];l.eachRawSeries(function(b){!b.get("legendHoverLink")&&v.push(b.id)}),each$3(s.getData(),function(b,w){var x=b.get("name");if(!this.newlineDisabled&&(x===""||x===`
`)){var S=new Group$1;S.newline=!0,f.add(S);return}var E=l.getSeriesByName(x)[0];if(!p.get(x)){if(E){var T=E.getData(),C=T.getVisual("legendLineStyle")||{},A=T.getVisual("legendIcon"),R=T.getVisual("style"),j=this._createItem(E,x,w,b,s,n,C,R,A,g,c);j.on("click",curry(dispatchSelectAction,x,null,c,v)).on("mouseover",curry(dispatchHighlightAction,E.name,null,c,v)).on("mouseout",curry(dispatchDownplayAction,E.name,null,c,v)),l.ssr&&j.eachChild(function(D){var O=getECData(D);O.seriesIndex=E.seriesIndex,O.dataIndex=w,O.ssrType="legend"}),p.set(x,!0)}else l.eachRawSeries(function(D){if(!p.get(x)&&D.legendVisualProvider){var O=D.legendVisualProvider;if(!O.containName(x))return;var H=O.indexOfName(x),q=O.getItemVisual(H,"style"),Y=O.getItemVisual(H,"legendIcon"),te=parse(q.fill);te&&te[3]===0&&(te[3]=.2,q=extend(extend({},q),{fill:stringify(te,"rgba")}));var ee=this._createItem(D,x,w,b,s,n,{},q,Y,g,c);ee.on("click",curry(dispatchSelectAction,null,x,c,v)).on("mouseover",curry(dispatchHighlightAction,null,x,c,v)).on("mouseout",curry(dispatchDownplayAction,null,x,c,v)),l.ssr&&ee.eachChild(function(re){var ne=getECData(re);ne.seriesIndex=D.seriesIndex,ne.dataIndex=w,ne.ssrType="legend"}),p.set(x,!0)}},this);process.env.NODE_ENV!=="production"&&(p.get(x)||console.warn(x+" series not exists. Legend data should be same with series name or data name."))}},this),u&&this._createSelector(u,s,c,d,h)},a.prototype._createSelector=function(n,s,l,c,u){var d=this.getSelectorGroup();each$3(n,function(f){var p=f.type,g=new ZRText({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){l.dispatchAction({type:p==="all"?"legendAllSelect":"legendInverseSelect",legendId:s.id})}});d.add(g);var v=s.getModel("selectorLabel"),b=s.getModel(["emphasis","selectorLabel"]);setLabelStyle(g,{normal:v,emphasis:b},{defaultText:f.title}),enableHoverEmphasis(g)})},a.prototype._createItem=function(n,s,l,c,u,d,h,f,p,g,v){var b=n.visualDrawType,w=u.get("itemWidth"),x=u.get("itemHeight"),S=u.isSelected(s),E=c.get("symbolRotate"),T=c.get("symbolKeepAspect"),C=c.get("icon");p=C||p||"roundRect";var A=getLegendStyle(p,c,h,f,b,S,v),R=new Group$1,j=c.getModel("textStyle");if(isFunction$1(n.getLegendIcon)&&(!C||C==="inherit"))R.add(n.getLegendIcon({itemWidth:w,itemHeight:x,icon:p,iconRotate:E,itemStyle:A.itemStyle,lineStyle:A.lineStyle,symbolKeepAspect:T}));else{var D=C==="inherit"&&n.getData().getVisual("symbol")?E==="inherit"?n.getData().getVisual("symbolRotate"):E:0;R.add(getDefaultLegendIcon({itemWidth:w,itemHeight:x,icon:p,iconRotate:D,itemStyle:A.itemStyle,symbolKeepAspect:T}))}var O=d==="left"?w+5:-5,H=d,q=u.get("formatter"),Y=s;isString$2(q)&&q?Y=q.replace("{name}",s??""):isFunction$1(q)&&(Y=q(s));var te=S?j.getTextColor():c.get("inactiveColor");R.add(new ZRText({style:createTextStyle$1(j,{text:Y,x:O,y:x/2,fill:te,align:H,verticalAlign:"middle"},{inheritColor:te})}));var ee=new Rect$2({shape:R.getBoundingRect(),style:{fill:"transparent"}}),re=c.getModel("tooltip");return re.get("show")&&setTooltipConfig({el:ee,componentModel:u,itemName:s,itemTooltipOption:re.option}),R.add(ee),R.eachChild(function(ne){ne.silent=!0}),ee.silent=!g,this.getContentGroup().add(R),enableHoverEmphasis(R),R.__legendDataIndex=l,R},a.prototype.layoutInner=function(n,s,l,c,u,d){var h=this.getContentGroup(),f=this.getSelectorGroup();box(n.get("orient"),h,n.get("itemGap"),l.width,l.height);var p=h.getBoundingRect(),g=[-p.x,-p.y];if(f.markRedraw(),h.markRedraw(),u){box("horizontal",f,n.get("selectorItemGap",!0));var v=f.getBoundingRect(),b=[-v.x,-v.y],w=n.get("selectorButtonGap",!0),x=n.getOrient().index,S=x===0?"width":"height",E=x===0?"height":"width",T=x===0?"y":"x";d==="end"?b[x]+=p[S]+w:g[x]+=v[S]+w,b[1-x]+=p[E]/2-v[E]/2,f.x=b[0],f.y=b[1],h.x=g[0],h.y=g[1];var C={x:0,y:0};return C[S]=p[S]+w+v[S],C[E]=Math.max(p[E],v[E]),C[T]=Math.min(0,v[T]+b[1-x]),C}else return h.x=g[0],h.y=g[1],this.group.getBoundingRect()},a.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},a.type="legend.plain",a}(ComponentView);function getLegendStyle(o,a,n,s,l,c,u){function d(S,E){S.lineWidth==="auto"&&(S.lineWidth=E.lineWidth>0?2:0),each$3(S,function(T,C){S[C]==="inherit"&&(S[C]=E[C])})}var h=a.getModel("itemStyle"),f=h.getItemStyle(),p=o.lastIndexOf("empty",0)===0?"fill":"stroke",g=h.getShallow("decal");f.decal=!g||g==="inherit"?s.decal:createOrUpdatePatternFromDecal(g,u),f.fill==="inherit"&&(f.fill=s[l]),f.stroke==="inherit"&&(f.stroke=s[p]),f.opacity==="inherit"&&(f.opacity=(l==="fill"?s:n).opacity),d(f,s);var v=a.getModel("lineStyle"),b=v.getLineStyle();if(d(b,n),f.fill==="auto"&&(f.fill=s.fill),f.stroke==="auto"&&(f.stroke=s.fill),b.stroke==="auto"&&(b.stroke=s.fill),!c){var w=a.get("inactiveBorderWidth"),x=f[p];f.lineWidth=w==="auto"?s.lineWidth>0&&x?2:0:f.lineWidth,f.fill=a.get("inactiveColor"),f.stroke=a.get("inactiveBorderColor"),b.stroke=v.get("inactiveColor"),b.lineWidth=v.get("inactiveWidth")}return{itemStyle:f,lineStyle:b}}function getDefaultLegendIcon(o){var a=o.icon||"roundRect",n=createSymbol$1(a,0,0,o.itemWidth,o.itemHeight,o.itemStyle.fill,o.symbolKeepAspect);return n.setStyle(o.itemStyle),n.rotation=(o.iconRotate||0)*Math.PI/180,n.setOrigin([o.itemWidth/2,o.itemHeight/2]),a.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function dispatchSelectAction(o,a,n,s){dispatchDownplayAction(o,a,n,s),n.dispatchAction({type:"legendToggleSelect",name:o??a}),dispatchHighlightAction(o,a,n,s)}function isUseHoverLayer(o){for(var a=o.getZr().storage.getDisplayList(),n,s=0,l=a.length;s<l&&!(n=a[s].states.emphasis);)s++;return n&&n.hoverLayer}function dispatchHighlightAction(o,a,n,s){isUseHoverLayer(n)||n.dispatchAction({type:"highlight",seriesName:o,name:a,excludeSeriesId:s})}function dispatchDownplayAction(o,a,n,s){isUseHoverLayer(n)||n.dispatchAction({type:"downplay",seriesName:o,name:a,excludeSeriesId:s})}function legendFilter(o){var a=o.findComponents({mainType:"legend"});a&&a.length&&o.filterSeries(function(n){for(var s=0;s<a.length;s++)if(!a[s].isSelected(n.name))return!1;return!0})}function legendSelectActionHandler(o,a,n){var s=o==="allSelect"||o==="inverseSelect",l={},c=[];n.eachComponent({mainType:"legend",query:a},function(d){s?d[o]():d[o](a.name),makeSelectedMap(d,l),c.push(d.componentIndex)});var u={};return n.eachComponent("legend",function(d){each$f(l,function(h,f){d[h?"select":"unSelect"](f)}),makeSelectedMap(d,u)}),s?{selected:u,legendIndex:c}:{name:a.name,selected:u}}function makeSelectedMap(o,a){var n=a||{};return each$f(o.getData(),function(s){var l=s.get("name");if(!(l===`
`||l==="")){var c=o.isSelected(l);hasOwn(n,l)?n[l]=n[l]&&c:n[l]=c}}),n}function installLegendAction(o){o.registerAction("legendToggleSelect","legendselectchanged",curry$1(legendSelectActionHandler,"toggleSelected")),o.registerAction("legendAllSelect","legendselectall",curry$1(legendSelectActionHandler,"allSelect")),o.registerAction("legendInverseSelect","legendinverseselect",curry$1(legendSelectActionHandler,"inverseSelect")),o.registerAction("legendSelect","legendselected",curry$1(legendSelectActionHandler,"select")),o.registerAction("legendUnSelect","legendunselected",curry$1(legendSelectActionHandler,"unSelect"))}function install$b(o){o.registerComponentModel(LegendModel),o.registerComponentView(LegendView),o.registerProcessor(o.PRIORITY.PROCESSOR.SERIES_FILTER,legendFilter),o.registerSubTypeDefaulter("legend",function(){return"plain"}),installLegendAction(o)}var ScrollableLegendModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.setScrollDataIndex=function(n){this.option.scrollDataIndex=n},a.prototype.init=function(n,s,l){var c=getLayoutParams(n);o.prototype.init.call(this,n,s,l),mergeAndNormalizeLayoutParams(this,n,c)},a.prototype.mergeOption=function(n,s){o.prototype.mergeOption.call(this,n,s),mergeAndNormalizeLayoutParams(this,this.option,n)},a.type="legend.scroll",a.defaultOption=inheritDefaultOption(LegendModel.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),a}(LegendModel);function mergeAndNormalizeLayoutParams(o,a,n){var s=o.getOrient(),l=[1,1];l[s.index]=0,mergeLayoutParam(a,n,{type:"box",ignoreSize:!!l})}var Group=Group$3,WH=["width","height"],XY=["x","y"],ScrollableLegendView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.newlineDisabled=!0,n._currentIndex=0,n}return a.prototype.init=function(){o.prototype.init.call(this),this.group.add(this._containerGroup=new Group),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Group)},a.prototype.resetInner=function(){o.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},a.prototype.renderInner=function(n,s,l,c,u,d,h){var f=this;o.prototype.renderInner.call(this,n,s,l,c,u,d,h);var p=this._controllerGroup,g=s.get("pageIconSize",!0),v=isArray$1(g)?g:[g,g];w("pagePrev",0);var b=s.getModel("pageTextStyle");p.add(new ZRText({name:"pageText",style:{text:"xx/xx",fill:b.getTextColor(),font:b.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),w("pageNext",1);function w(x,S){var E=x+"DataIndex",T=createIcon(s.get("pageIcons",!0)[s.getOrient().name][S],{onclick:bind$1(f._pageGo,f,E,s,c)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});T.name=x,p.add(T)}},a.prototype.layoutInner=function(n,s,l,c,u,d){var h=this.getSelectorGroup(),f=n.getOrient().index,p=WH[f],g=XY[f],v=WH[1-f],b=XY[1-f];u&&box("horizontal",h,n.get("selectorItemGap",!0));var w=n.get("selectorButtonGap",!0),x=h.getBoundingRect(),S=[-x.x,-x.y],E=clone$4(l);u&&(E[p]=l[p]-x[p]-w);var T=this._layoutContentAndController(n,c,E,f,p,v,b,g);if(u){if(d==="end")S[f]+=T[p]+w;else{var C=x[p]+w;S[f]-=C,T[g]-=C}T[p]+=x[p]+w,S[1-f]+=T[b]+T[v]/2-x[v]/2,T[v]=Math.max(T[v],x[v]),T[b]=Math.min(T[b],x[b]+S[1-f]),h.x=S[0],h.y=S[1],h.markRedraw()}return T},a.prototype._layoutContentAndController=function(n,s,l,c,u,d,h,f){var p=this.getContentGroup(),g=this._containerGroup,v=this._controllerGroup;box(n.get("orient"),p,n.get("itemGap"),c?l.width:null,c?null:l.height),box("horizontal",v,n.get("pageButtonItemGap",!0));var b=p.getBoundingRect(),w=v.getBoundingRect(),x=this._showController=b[u]>l[u],S=[-b.x,-b.y];s||(S[c]=p[f]);var E=[0,0],T=[-w.x,-w.y],C=retrieve2(n.get("pageButtonGap",!0),n.get("itemGap",!0));if(x){var A=n.get("pageButtonPosition",!0);A==="end"?T[c]+=l[u]-w[u]:E[c]+=w[u]+C}T[1-c]+=b[d]/2-w[d]/2,p.setPosition(S),g.setPosition(E),v.setPosition(T);var R={x:0,y:0};if(R[u]=x?l[u]:b[u],R[d]=Math.max(b[d],w[d]),R[h]=Math.min(0,w[h]+T[1-c]),g.__rectSize=l[u],x){var j={x:0,y:0};j[u]=Math.max(l[u]-w[u]-C,0),j[d]=R[d],g.setClipPath(new Rect$2({shape:j})),g.__rectSize=j[u]}else v.eachChild(function(O){O.attr({invisible:!0,silent:!0})});var D=this._getPageInfo(n);return D.pageIndex!=null&&updateProps$1(p,{x:D.contentPosition[0],y:D.contentPosition[1]},x?n:null),this._updatePageInfoView(n,D),R},a.prototype._pageGo=function(n,s,l){var c=this._getPageInfo(s)[n];c!=null&&l.dispatchAction({type:"legendScroll",scrollDataIndex:c,legendId:s.id})},a.prototype._updatePageInfoView=function(n,s){var l=this._controllerGroup;each$f(["pagePrev","pageNext"],function(p){var g=p+"DataIndex",v=s[g]!=null,b=l.childOfName(p);b&&(b.setStyle("fill",v?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),b.cursor=v?"pointer":"default")});var c=l.childOfName("pageText"),u=n.get("pageFormatter"),d=s.pageIndex,h=d!=null?d+1:0,f=s.pageCount;c&&u&&c.setStyle("text",isString$2(u)?u.replace("{current}",h==null?"":h+"").replace("{total}",f==null?"":f+""):u({current:h,total:f}))},a.prototype._getPageInfo=function(n){var s=n.get("scrollDataIndex",!0),l=this.getContentGroup(),c=this._containerGroup.__rectSize,u=n.getOrient().index,d=WH[u],h=XY[u],f=this._findTargetItemIndex(s),p=l.children(),g=p[f],v=p.length,b=v?1:0,w={contentPosition:[l.x,l.y],pageCount:b,pageIndex:b-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!g)return w;var x=A(g);w.contentPosition[u]=-x.s;for(var S=f+1,E=x,T=x,C=null;S<=v;++S)C=A(p[S]),(!C&&T.e>E.s+c||C&&!R(C,E.s))&&(T.i>E.i?E=T:E=C,E&&(w.pageNextDataIndex==null&&(w.pageNextDataIndex=E.i),++w.pageCount)),T=C;for(var S=f-1,E=x,T=x,C=null;S>=-1;--S)C=A(p[S]),(!C||!R(T,C.s))&&E.i<T.i&&(T=E,w.pagePrevDataIndex==null&&(w.pagePrevDataIndex=E.i),++w.pageCount,++w.pageIndex),E=C;return w;function A(j){if(j){var D=j.getBoundingRect(),O=D[h]+j[h];return{s:O,e:O+D[d],i:j.__legendDataIndex}}}function R(j,D){return j.e>=D&&j.s<=D+c}},a.prototype._findTargetItemIndex=function(n){if(!this._showController)return 0;var s,l=this.getContentGroup(),c;return l.eachChild(function(u,d){var h=u.__legendDataIndex;c==null&&h!=null&&(c=d),h===n&&(s=d)}),s??c},a.type="legend.scroll",a}(LegendView);function installScrollableLegendAction(o){o.registerAction("legendScroll","legendscroll",function(a,n){var s=a.scrollDataIndex;s!=null&&n.eachComponent({mainType:"legend",subType:"scroll",query:a},function(l){l.setScrollDataIndex(s)})})}function install$a(o){use(install$b),o.registerComponentModel(ScrollableLegendModel),o.registerComponentView(ScrollableLegendView),installScrollableLegendAction(o)}function install$9(o){use(install$b),use(install$a)}var InsideZoomModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="dataZoom.inside",a.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),a}(DataZoomModel),inner$1=makeInner();function setViewInfoToCoordSysRecord(o,a,n){inner$1(o).coordSysRecordMap.each(function(s){var l=s.dataZoomInfoMap.get(a.uid);l&&(l.getRange=n)})}function disposeCoordSysRecordIfNeeded(o,a){for(var n=inner$1(o).coordSysRecordMap,s=n.keys(),l=0;l<s.length;l++){var c=s[l],u=n.get(c),d=u.dataZoomInfoMap;if(d){var h=a.uid,f=d.get(h);f&&(d.removeKey(h),d.keys().length||disposeCoordSysRecord(n,u))}}}function disposeCoordSysRecord(o,a){if(a){o.removeKey(a.model.uid);var n=a.controller;n&&n.dispose()}}function createCoordSysRecord(o,a){var n={model:a,containsPoint:curry$1(containsPoint,a),dispatchAction:curry$1(dispatchAction,o),dataZoomInfoMap:null,controller:null},s=n.controller=new RoamController(o.getZr());return each$f(["pan","zoom","scrollMove"],function(l){s.on(l,function(c){var u=[];n.dataZoomInfoMap.each(function(d){if(c.isAvailableBehavior(d.model.option)){var h=(d.getRange||{})[l],f=h&&h(d.dzReferCoordSysInfo,n.model.mainType,n.controller,c);!d.model.get("disabled",!0)&&f&&u.push({dataZoomId:d.model.id,start:f[0],end:f[1]})}}),u.length&&n.dispatchAction(u)})}),n}function dispatchAction(o,a){o.isDisposed()||o.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:a})}function containsPoint(o,a,n,s){return o.coordinateSystem.containPoint([n,s])}function mergeControllerParams(o){var a,n="type_",s={type_true:2,type_move:1,type_false:0,type_undefined:-1},l=!0;return o.each(function(c){var u=c.model,d=u.get("disabled",!0)?!1:u.get("zoomLock",!0)?"move":!0;s[n+d]>s[n+a]&&(a=d),l=l&&u.get("preventDefaultMouseMove",!0)}),{controlType:a,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!l}}}function installDataZoomRoamProcessor(o){o.registerProcessor(o.PRIORITY.PROCESSOR.FILTER,function(a,n){var s=inner$1(n),l=s.coordSysRecordMap||(s.coordSysRecordMap=createHashMap());l.each(function(c){c.dataZoomInfoMap=null}),a.eachComponent({mainType:"dataZoom",subType:"inside"},function(c){var u=collectReferCoordSysModelInfo(c);each$f(u.infoList,function(d){var h=d.model.uid,f=l.get(h)||l.set(h,createCoordSysRecord(n,d.model)),p=f.dataZoomInfoMap||(f.dataZoomInfoMap=createHashMap());p.set(c.uid,{dzReferCoordSysInfo:d,model:c,getRange:null})})}),l.each(function(c){var u=c.controller,d,h=c.dataZoomInfoMap;if(h){var f=h.keys()[0];f!=null&&(d=h.get(f))}if(!d){disposeCoordSysRecord(l,c);return}var p=mergeControllerParams(h);u.enable(p.controlType,p.opt),u.setPointerChecker(c.containsPoint),createOrUpdate(c,"dispatchAction",d.model.get("throttle",!0),"fixRate")})})}var InsideZoomView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="dataZoom.inside",n}return a.prototype.render=function(n,s,l){if(o.prototype.render.apply(this,arguments),n.noTarget()){this._clear();return}this.range=n.getPercentRange(),setViewInfoToCoordSysRecord(l,n,{pan:bind$1(getRangeHandlers.pan,this),zoom:bind$1(getRangeHandlers.zoom,this),scrollMove:bind$1(getRangeHandlers.scrollMove,this)})},a.prototype.dispose=function(){this._clear(),o.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){disposeCoordSysRecordIfNeeded(this.api,this.dataZoomModel),this.range=null},a.type="dataZoom.inside",a}(DataZoomView),getRangeHandlers={zoom:function(o,a,n,s){var l=this.range,c=l.slice(),u=o.axisModels[0];if(u){var d=getDirectionInfo[a](null,[s.originX,s.originY],u,n,o),h=(d.signal>0?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(c[1]-c[0])+c[0],f=Math.max(1/s.scale,0);c[0]=(c[0]-h)*f+h,c[1]=(c[1]-h)*f+h;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();if(sliderMove(0,c,[0,100],0,p.minSpan,p.maxSpan),this.range=c,l[0]!==c[0]||l[1]!==c[1])return c}},pan:makeMover(function(o,a,n,s,l,c){var u=getDirectionInfo[s]([c.oldX,c.oldY],[c.newX,c.newY],a,l,n);return u.signal*(o[1]-o[0])*u.pixel/u.pixelLength}),scrollMove:makeMover(function(o,a,n,s,l,c){var u=getDirectionInfo[s]([0,0],[c.scrollDelta,c.scrollDelta],a,l,n);return u.signal*(o[1]-o[0])*c.scrollDelta})};function makeMover(o){return function(a,n,s,l){var c=this.range,u=c.slice(),d=a.axisModels[0];if(d){var h=o(u,d,a,n,s,l);if(sliderMove(h,u,[0,100],"all"),this.range=u,c[0]!==u[0]||c[1]!==u[1])return u}}}var getDirectionInfo={grid:function(o,a,n,s,l){var c=n.axis,u={},d=l.model.coordinateSystem.getRect();return o=o||[0,0],c.dim==="x"?(u.pixel=a[0]-o[0],u.pixelLength=d.width,u.pixelStart=d.x,u.signal=c.inverse?1:-1):(u.pixel=a[1]-o[1],u.pixelLength=d.height,u.pixelStart=d.y,u.signal=c.inverse?-1:1),u},polar:function(o,a,n,s,l){var c=n.axis,u={},d=l.model.coordinateSystem,h=d.getRadiusAxis().getExtent(),f=d.getAngleAxis().getExtent();return o=o?d.pointToCoord(o):[0,0],a=d.pointToCoord(a),n.mainType==="radiusAxis"?(u.pixel=a[0]-o[0],u.pixelLength=h[1]-h[0],u.pixelStart=h[0],u.signal=c.inverse?1:-1):(u.pixel=a[1]-o[1],u.pixelLength=f[1]-f[0],u.pixelStart=f[0],u.signal=c.inverse?-1:1),u},singleAxis:function(o,a,n,s,l){var c=n.axis,u=l.model.coordinateSystem.getRect(),d={};return o=o||[0,0],c.orient==="horizontal"?(d.pixel=a[0]-o[0],d.pixelLength=u.width,d.pixelStart=u.x,d.signal=c.inverse?1:-1):(d.pixel=a[1]-o[1],d.pixelLength=u.height,d.pixelStart=u.y,d.signal=c.inverse?-1:1),d}};function install$8(o){installCommon$1(o),o.registerComponentModel(InsideZoomModel),o.registerComponentView(InsideZoomView),installDataZoomRoamProcessor(o)}var SliderZoomModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.type="dataZoom.slider",a.layoutMode="box",a.defaultOption=inheritDefaultOption(DataZoomModel.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleLabel:{show:!0},handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),a}(DataZoomModel),Rect=Rect$2,DEFAULT_LOCATION_EDGE_GAP=7,DEFAULT_FRAME_BORDER_WIDTH=1,DEFAULT_FILLER_SIZE=30,DEFAULT_MOVE_HANDLE_SIZE=7,HORIZONTAL="horizontal",VERTICAL="vertical",LABEL_GAP=5,SHOW_DATA_SHADOW_SERIES_TYPE=["line","bar","candlestick","scatter"],REALTIME_ANIMATION_CONFIG={easing:"cubicOut",duration:100,delay:0},SliderZoomView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._displayables={},n}return a.prototype.init=function(n,s){this.api=s,this._onBrush=bind$1(this._onBrush,this),this._onBrushEnd=bind$1(this._onBrushEnd,this)},a.prototype.render=function(n,s,l,c){if(o.prototype.render.apply(this,arguments),createOrUpdate(this,"_dispatchZoomAction",n.get("throttle"),"fixRate"),this._orient=n.getOrient(),n.get("show")===!1){this.group.removeAll();return}if(n.noTarget()){this._clear(),this.group.removeAll();return}(!c||c.type!=="dataZoom"||c.from!==this.uid)&&this._buildView(),this._updateView()},a.prototype.dispose=function(){this._clear(),o.prototype.dispose.apply(this,arguments)},a.prototype._clear=function(){clear$1(this,"_dispatchZoomAction");var n=this.api.getZr();n.off("mousemove",this._onBrush),n.off("mouseup",this._onBrushEnd)},a.prototype._buildView=function(){var n=this.group;n.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var s=this._displayables.sliderGroup=new Group$3;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),n.add(s),this._positionGroup()},a.prototype._resetLocation=function(){var n=this.dataZoomModel,s=this.api,l=n.get("brushSelect"),c=l?DEFAULT_MOVE_HANDLE_SIZE:0,u=this._findCoordRect(),d={width:s.getWidth(),height:s.getHeight()},h=this._orient===HORIZONTAL?{right:d.width-u.x-u.width,top:d.height-DEFAULT_FILLER_SIZE-DEFAULT_LOCATION_EDGE_GAP-c,width:u.width,height:DEFAULT_FILLER_SIZE}:{right:DEFAULT_LOCATION_EDGE_GAP,top:u.y,width:DEFAULT_FILLER_SIZE,height:u.height},f=getLayoutParams(n.option);each$f(["right","top","width","height"],function(g){f[g]==="ph"&&(f[g]=h[g])});var p=getLayoutRect(f,d);this._location={x:p.x,y:p.y},this._size=[p.width,p.height],this._orient===VERTICAL&&this._size.reverse()},a.prototype._positionGroup=function(){var n=this.group,s=this._location,l=this._orient,c=this.dataZoomModel.getFirstTargetAxisModel(),u=c&&c.get("inverse"),d=this._displayables.sliderGroup,h=(this._dataShadowInfo||{}).otherAxisInverse;d.attr(l===HORIZONTAL&&!u?{scaleY:h?1:-1,scaleX:1}:l===HORIZONTAL&&u?{scaleY:h?1:-1,scaleX:-1}:l===VERTICAL&&!u?{scaleY:h?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:h?-1:1,scaleX:-1,rotation:Math.PI/2});var f=n.getBoundingRect([d]);n.x=s.x-f.x,n.y=s.y-f.y,n.markRedraw()},a.prototype._getViewExtent=function(){return[0,this._size[0]]},a.prototype._renderBackground=function(){var n=this.dataZoomModel,s=this._size,l=this._displayables.sliderGroup,c=n.get("brushSelect");l.add(new Rect({silent:!0,shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:n.get("backgroundColor")},z2:-40}));var u=new Rect({shape:{x:0,y:0,width:s[0],height:s[1]},style:{fill:"transparent"},z2:0,onclick:bind$1(this._onClickPanel,this)}),d=this.api.getZr();c?(u.on("mousedown",this._onBrushStart,this),u.cursor="crosshair",d.on("mousemove",this._onBrush),d.on("mouseup",this._onBrushEnd)):(d.off("mousemove",this._onBrush),d.off("mouseup",this._onBrushEnd)),l.add(u)},a.prototype._renderDataShadow=function(){var n=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],!n)return;var s=this._size,l=this._shadowSize||[],c=n.series,u=c.getRawData(),d=c.getShadowDim&&c.getShadowDim(),h=d&&u.getDimensionInfo(d)?c.getShadowDim():n.otherDim;if(h==null)return;var f=this._shadowPolygonPts,p=this._shadowPolylinePts;if(u!==this._shadowData||h!==this._shadowDim||s[0]!==l[0]||s[1]!==l[1]){var g=u.getDataExtent(h),v=(g[1]-g[0])*.3;g=[g[0]-v,g[1]+v];var b=[0,s[1]],w=[0,s[0]],x=[[s[0],0],[0,0]],S=[],E=w[1]/(u.count()-1),T=0,C=Math.round(u.count()/s[0]),A;u.each([h],function(H,q){if(C>0&&q%C){T+=E;return}var Y=H==null||isNaN(H)||H==="",te=Y?0:linearMap$2(H,g,b,!0);Y&&!A&&q?(x.push([x[x.length-1][0],0]),S.push([S[S.length-1][0],0])):!Y&&A&&(x.push([T,0]),S.push([T,0])),x.push([T,te]),S.push([T,te]),T+=E,A=Y}),f=this._shadowPolygonPts=x,p=this._shadowPolylinePts=S}this._shadowData=u,this._shadowDim=h,this._shadowSize=[s[0],s[1]];var R=this.dataZoomModel;function j(H){var q=R.getModel(H?"selectedDataBackground":"dataBackground"),Y=new Group$3,te=new Polygon({shape:{points:f},segmentIgnoreThreshold:1,style:q.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),ee=new Polyline$1({shape:{points:p},segmentIgnoreThreshold:1,style:q.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return Y.add(te),Y.add(ee),Y}for(var D=0;D<3;D++){var O=j(D===1);this._displayables.sliderGroup.add(O),this._displayables.dataShadowSegs.push(O)}},a.prototype._prepareDataShadowInfo=function(){var n=this.dataZoomModel,s=n.get("showDataShadow");if(s!==!1){var l,c=this.ecModel;return n.eachTargetAxis(function(u,d){var h=n.getAxisProxy(u,d).getTargetSeriesModels();each$f(h,function(f){if(!l&&!(s!==!0&&indexOf(SHOW_DATA_SHADOW_SERIES_TYPE,f.get("type"))<0)){var p=c.getComponent(getAxisMainType(u),d).axis,g=getOtherDim(u),v,b=f.coordinateSystem;g!=null&&b.getOtherAxis&&(v=b.getOtherAxis(p).inverse),g=f.getData().mapDimension(g),l={thisAxis:p,series:f,thisDim:u,otherDim:g,otherAxisInverse:v}}},this)},this),l}},a.prototype._renderHandle=function(){var n=this.group,s=this._displayables,l=s.handles=[null,null],c=s.handleLabels=[null,null],u=this._displayables.sliderGroup,d=this._size,h=this.dataZoomModel,f=this.api,p=h.get("borderRadius")||0,g=h.get("brushSelect"),v=s.filler=new Rect({silent:g,style:{fill:h.get("fillerColor")},textConfig:{position:"inside"}});u.add(v),u.add(new Rect({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:d[0],height:d[1],r:p},style:{stroke:h.get("dataBackgroundColor")||h.get("borderColor"),lineWidth:DEFAULT_FRAME_BORDER_WIDTH,fill:"rgba(0,0,0,0)"}})),each$f([0,1],function(C){var A=h.get("handleIcon");!symbolBuildProxies[A]&&A.indexOf("path://")<0&&A.indexOf("image://")<0&&(A="path://"+A,process.env.NODE_ENV!=="production"&&deprecateLog("handleIcon now needs 'path://' prefix when using a path string"));var R=createSymbol$1(A,-1,0,2,2,null,!0);R.attr({cursor:getCursor$1(this._orient),draggable:!0,drift:bind$1(this._onDragMove,this,C),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1),z2:5});var j=R.getBoundingRect(),D=h.get("handleSize");this._handleHeight=parsePercent(D,this._size[1]),this._handleWidth=j.width/j.height*this._handleHeight,R.setStyle(h.getModel("handleStyle").getItemStyle()),R.style.strokeNoScale=!0,R.rectHover=!0,R.ensureState("emphasis").style=h.getModel(["emphasis","handleStyle"]).getItemStyle(),enableHoverEmphasis(R);var O=h.get("handleColor");O!=null&&(R.style.fill=O),u.add(l[C]=R);var H=h.getModel("textStyle"),q=h.get("handleLabel")||{},Y=q.show||!1;n.add(c[C]=new ZRText({silent:!0,invisible:!Y,style:createTextStyle$1(H,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:H.getTextColor(),font:H.getFont()}),z2:10}))},this);var b=v;if(g){var w=parsePercent(h.get("moveHandleSize"),d[1]),x=s.moveHandle=new Rect$2({style:h.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:d[1]-.5,height:w}}),S=w*.8,E=s.moveHandleIcon=createSymbol$1(h.get("moveHandleIcon"),-S/2,-S/2,S,S,"#fff",!0);E.silent=!0,E.y=d[1]+w/2-.5,x.ensureState("emphasis").style=h.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var T=Math.min(d[1]/2,Math.max(w,10));b=s.moveZone=new Rect$2({invisible:!0,shape:{y:d[1]-T,height:w+T}}),b.on("mouseover",function(){f.enterEmphasis(x)}).on("mouseout",function(){f.leaveEmphasis(x)}),u.add(x),u.add(E),u.add(b)}b.attr({draggable:!0,cursor:getCursor$1(this._orient),drift:bind$1(this._onDragMove,this,"all"),ondragstart:bind$1(this._showDataInfo,this,!0),ondragend:bind$1(this._onDragEnd,this),onmouseover:bind$1(this._showDataInfo,this,!0),onmouseout:bind$1(this._showDataInfo,this,!1)})},a.prototype._resetInterval=function(){var n=this._range=this.dataZoomModel.getPercentRange(),s=this._getViewExtent();this._handleEnds=[linearMap$2(n[0],[0,100],s,!0),linearMap$2(n[1],[0,100],s,!0)]},a.prototype._updateInterval=function(n,s){var l=this.dataZoomModel,c=this._handleEnds,u=this._getViewExtent(),d=l.findRepresentativeAxisProxy().getMinMaxSpan(),h=[0,100];sliderMove(s,c,u,l.get("zoomLock")?"all":n,d.minSpan!=null?linearMap$2(d.minSpan,h,u,!0):null,d.maxSpan!=null?linearMap$2(d.maxSpan,h,u,!0):null);var f=this._range,p=this._range=asc$2([linearMap$2(c[0],u,h,!0),linearMap$2(c[1],u,h,!0)]);return!f||f[0]!==p[0]||f[1]!==p[1]},a.prototype._updateView=function(n){var s=this._displayables,l=this._handleEnds,c=asc$2(l.slice()),u=this._size;each$f([0,1],function(b){var w=s.handles[b],x=this._handleHeight;w.attr({scaleX:x/2,scaleY:x/2,x:l[b]+(b?-1:1),y:u[1]/2-x/2})},this),s.filler.setShape({x:c[0],y:0,width:c[1]-c[0],height:u[1]});var d={x:c[0],width:c[1]-c[0]};s.moveHandle&&(s.moveHandle.setShape(d),s.moveZone.setShape(d),s.moveZone.getBoundingRect(),s.moveHandleIcon&&s.moveHandleIcon.attr("x",d.x+d.width/2));for(var h=s.dataShadowSegs,f=[0,c[0],c[1],u[0]],p=0;p<h.length;p++){var g=h[p],v=g.getClipPath();v||(v=new Rect$2,g.setClipPath(v)),v.setShape({x:f[p],y:0,width:f[p+1]-f[p],height:u[1]})}this._updateDataInfo(n)},a.prototype._updateDataInfo=function(n){var s=this.dataZoomModel,l=this._displayables,c=l.handleLabels,u=this._orient,d=["",""];if(s.get("showDetail")){var h=s.findRepresentativeAxisProxy();if(h){var f=h.getAxisModel().axis,p=this._range,g=n?h.calculateDataWindow({start:p[0],end:p[1]}).valueWindow:h.getDataValueWindow();d=[this._formatLabel(g[0],f),this._formatLabel(g[1],f)]}}var v=asc$2(this._handleEnds.slice());b.call(this,0),b.call(this,1);function b(w){var x=getTransform$1(l.handles[w].parent,this.group),S=transformDirection(w===0?"right":"left",x),E=this._handleWidth/2+LABEL_GAP,T=applyTransform([v[w]+(w===0?-E:E),this._size[1]/2],x);c[w].setStyle({x:T[0],y:T[1],verticalAlign:u===HORIZONTAL?"middle":S,align:u===HORIZONTAL?S:"center",text:d[w]})}},a.prototype._formatLabel=function(n,s){var l=this.dataZoomModel,c=l.get("labelFormatter"),u=l.get("labelPrecision");(u==null||u==="auto")&&(u=s.getPixelPrecision());var d=n==null||isNaN(n)?"":s.type==="category"||s.type==="time"?s.scale.getLabel({value:Math.round(n)}):n.toFixed(Math.min(u,20));return isFunction$1(c)?c(n,d):isString$2(c)?c.replace("{value}",d):d},a.prototype._showDataInfo=function(n){var s=this.dataZoomModel.get("handleLabel")||{},l=s.show||!1,c=this.dataZoomModel.getModel(["emphasis","handleLabel"]),u=c.get("show")||!1,d=n||this._dragging?u:l,h=this._displayables,f=h.handleLabels;f[0].attr("invisible",!d),f[1].attr("invisible",!d),h.moveHandle&&this.api[d?"enterEmphasis":"leaveEmphasis"](h.moveHandle,1)},a.prototype._onDragMove=function(n,s,l,c){this._dragging=!0,stop(c.event);var u=this._displayables.sliderGroup.getLocalTransform(),d=applyTransform([s,l],u,!0),h=this._updateInterval(n,d[0]),f=this.dataZoomModel.get("realtime");this._updateView(!f),h&&f&&this._dispatchZoomAction(!0)},a.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var n=this.dataZoomModel.get("realtime");!n&&this._dispatchZoomAction(!1)},a.prototype._onClickPanel=function(n){var s=this._size,l=this._displayables.sliderGroup.transformCoordToLocal(n.offsetX,n.offsetY);if(!(l[0]<0||l[0]>s[0]||l[1]<0||l[1]>s[1])){var c=this._handleEnds,u=(c[0]+c[1])/2,d=this._updateInterval("all",l[0]-u);this._updateView(),d&&this._dispatchZoomAction(!1)}},a.prototype._onBrushStart=function(n){var s=n.offsetX,l=n.offsetY;this._brushStart=new Point(s,l),this._brushing=!0,this._brushStartTime=+new Date},a.prototype._onBrushEnd=function(n){if(this._brushing){var s=this._displayables.brushRect;if(this._brushing=!1,!!s){s.attr("ignore",!0);var l=s.shape,c=+new Date;if(!(c-this._brushStartTime<200&&Math.abs(l.width)<5)){var u=this._getViewExtent(),d=[0,100];this._range=asc$2([linearMap$2(l.x,u,d,!0),linearMap$2(l.x+l.width,u,d,!0)]),this._handleEnds=[l.x,l.x+l.width],this._updateView(),this._dispatchZoomAction(!1)}}}},a.prototype._onBrush=function(n){this._brushing&&(stop(n.event),this._updateBrushRect(n.offsetX,n.offsetY))},a.prototype._updateBrushRect=function(n,s){var l=this._displayables,c=this.dataZoomModel,u=l.brushRect;u||(u=l.brushRect=new Rect({silent:!0,style:c.getModel("brushStyle").getItemStyle()}),l.sliderGroup.add(u)),u.attr("ignore",!1);var d=this._brushStart,h=this._displayables.sliderGroup,f=h.transformCoordToLocal(n,s),p=h.transformCoordToLocal(d.x,d.y),g=this._size;f[0]=Math.max(Math.min(g[0],f[0]),0),u.setShape({x:p[0],y:0,width:f[0]-p[0],height:g[1]})},a.prototype._dispatchZoomAction=function(n){var s=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:n?REALTIME_ANIMATION_CONFIG:null,start:s[0],end:s[1]})},a.prototype._findCoordRect=function(){var n,s=collectReferCoordSysModelInfo(this.dataZoomModel).infoList;if(!n&&s.length){var l=s[0].model.coordinateSystem;n=l.getRect&&l.getRect()}if(!n){var c=this.api.getWidth(),u=this.api.getHeight();n={x:c*.2,y:u*.2,width:c*.6,height:u*.6}}return n},a.type="dataZoom.slider",a}(DataZoomView);function getOtherDim(o){var a={x:"y",y:"x",radius:"angle",angle:"radius"};return a[o]}function getCursor$1(o){return o==="vertical"?"ns-resize":"ew-resize"}function install$7(o){o.registerComponentModel(SliderZoomModel),o.registerComponentView(SliderZoomView),installCommon$1(o)}function install$6(o){use(install$8),use(install$7)}var visualDefault={get:function(o,a,n){var s=clone$4((defaultOption[o]||{})[a]);return n&&isArray$1(s)?s[s.length-1]:s}},defaultOption={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},mapVisual=VisualMapping.mapVisual,eachVisual=VisualMapping.eachVisual,isArray=isArray$1,each$2=each$f,asc=asc$2,linearMap$1=linearMap$2,VisualMapModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return a.prototype.init=function(n,s,l){this.mergeDefaultAndTheme(n,l)},a.prototype.optionUpdated=function(n,s){var l=this.option;!s&&replaceVisualOption(l,n,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},a.prototype.resetVisual=function(n){var s=this.stateList;n=bind$1(n,this),this.controllerVisuals=createVisualMappings(this.option.controller,s,n),this.targetVisuals=createVisualMappings(this.option.target,s,n)},a.prototype.getItemSymbol=function(){return null},a.prototype.getTargetSeriesIndices=function(){var n=this.option.seriesIndex,s=[];return n==null||n==="all"?this.ecModel.eachSeries(function(l,c){s.push(c)}):s=normalizeToArray(n),s},a.prototype.eachTargetSeries=function(n,s){each$f(this.getTargetSeriesIndices(),function(l){var c=this.ecModel.getSeriesByIndex(l);c&&n.call(s,c)},this)},a.prototype.isTargetSeries=function(n){var s=!1;return this.eachTargetSeries(function(l){l===n&&(s=!0)}),s},a.prototype.formatValueText=function(n,s,l){var c=this.option,u=c.precision,d=this.dataBound,h=c.formatter,f;l=l||["<",">"],isArray$1(n)&&(n=n.slice(),f=!0);var p=s?n:f?[g(n[0]),g(n[1])]:g(n);if(isString$2(h))return h.replace("{value}",f?p[0]:p).replace("{value2}",f?p[1]:p);if(isFunction$1(h))return f?h(n[0],n[1]):h(n);if(f)return n[0]===d[0]?l[0]+" "+p[1]:n[1]===d[1]?l[1]+" "+p[0]:p[0]+" - "+p[1];return p;function g(v){return v===d[0]?"min":v===d[1]?"max":(+v).toFixed(Math.min(u,20))}},a.prototype.resetExtent=function(){var n=this.option,s=asc([n.min,n.max]);this._dataExtent=s},a.prototype.getDataDimensionIndex=function(n){var s=this.option.dimension;if(s!=null)return n.getDimensionIndex(s);for(var l=n.dimensions,c=l.length-1;c>=0;c--){var u=l[c],d=n.getDimensionInfo(u);if(!d.isCalculationCoord)return d.storeDimIndex}},a.prototype.getExtent=function(){return this._dataExtent.slice()},a.prototype.completeVisualOption=function(){var n=this.ecModel,s=this.option,l={inRange:s.inRange,outOfRange:s.outOfRange},c=s.target||(s.target={}),u=s.controller||(s.controller={});merge(c,l),merge(u,l);var d=this.isCategory();h.call(this,c),h.call(this,u),f.call(this,c,"inRange","outOfRange"),p.call(this,u);function h(g){isArray(s.color)&&!g.inRange&&(g.inRange={color:s.color.slice().reverse()}),g.inRange=g.inRange||{color:n.get("gradientColor")}}function f(g,v,b){var w=g[v],x=g[b];w&&!x&&(x=g[b]={},each$2(w,function(S,E){if(VisualMapping.isValidType(E)){var T=visualDefault.get(E,"inactive",d);T!=null&&(x[E]=T,E==="color"&&!x.hasOwnProperty("opacity")&&!x.hasOwnProperty("colorAlpha")&&(x.opacity=[0,0]))}}))}function p(g){var v=(g.inRange||{}).symbol||(g.outOfRange||{}).symbol,b=(g.inRange||{}).symbolSize||(g.outOfRange||{}).symbolSize,w=this.get("inactiveColor"),x=this.getItemSymbol(),S=x||"roundRect";each$2(this.stateList,function(E){var T=this.itemSize,C=g[E];C||(C=g[E]={color:d?w:[w]}),C.symbol==null&&(C.symbol=v&&clone$4(v)||(d?S:[S])),C.symbolSize==null&&(C.symbolSize=b&&clone$4(b)||(d?T[0]:[T[0],T[0]])),C.symbol=mapVisual(C.symbol,function(j){return j==="none"?S:j});var A=C.symbolSize;if(A!=null){var R=-1/0;eachVisual(A,function(j){j>R&&(R=j)}),C.symbolSize=mapVisual(A,function(j){return linearMap$1(j,[0,R],[0,T[0]],!0)})}},this)}},a.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},a.prototype.isCategory=function(){return!!this.option.categories},a.prototype.setSelected=function(n){},a.prototype.getSelected=function(){return null},a.prototype.getValueState=function(n){return null},a.prototype.getVisualMeta=function(n){return null},a.type="visualMap",a.dependencies=["series"],a.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},a}(ComponentModel),DEFAULT_BAR_BOUND=[20,140],ContinuousModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.optionUpdated=function(n,s){o.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(l){l.mappingMethod="linear",l.dataExtent=this.getExtent()}),this._resetRange()},a.prototype.resetItemSize=function(){o.prototype.resetItemSize.apply(this,arguments);var n=this.itemSize;(n[0]==null||isNaN(n[0]))&&(n[0]=DEFAULT_BAR_BOUND[0]),(n[1]==null||isNaN(n[1]))&&(n[1]=DEFAULT_BAR_BOUND[1])},a.prototype._resetRange=function(){var n=this.getExtent(),s=this.option.range;!s||s.auto?(n.auto=1,this.option.range=n):isArray$1(s)&&(s[0]>s[1]&&s.reverse(),s[0]=Math.max(s[0],n[0]),s[1]=Math.min(s[1],n[1]))},a.prototype.completeVisualOption=function(){o.prototype.completeVisualOption.apply(this,arguments),each$f(this.stateList,function(n){var s=this.option.controller[n].symbolSize;s&&s[0]!==s[1]&&(s[0]=s[1]/3)},this)},a.prototype.setSelected=function(n){this.option.range=n.slice(),this._resetRange()},a.prototype.getSelected=function(){var n=this.getExtent(),s=asc$2((this.get("range")||[]).slice());return s[0]>n[1]&&(s[0]=n[1]),s[1]>n[1]&&(s[1]=n[1]),s[0]<n[0]&&(s[0]=n[0]),s[1]<n[0]&&(s[1]=n[0]),s},a.prototype.getValueState=function(n){var s=this.option.range,l=this.getExtent();return(s[0]<=l[0]||s[0]<=n)&&(s[1]>=l[1]||n<=s[1])?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(n){var s=[];return this.eachTargetSeries(function(l){var c=[],u=l.getData();u.each(this.getDataDimensionIndex(u),function(d,h){n[0]<=d&&d<=n[1]&&c.push(h)},this),s.push({seriesId:l.id,dataIndex:c})},this),s},a.prototype.getVisualMeta=function(n){var s=getColorStopValues(this,"outOfRange",this.getExtent()),l=getColorStopValues(this,"inRange",this.option.range.slice()),c=[];function u(b,w){c.push({value:b,color:n(b,w)})}for(var d=0,h=0,f=l.length,p=s.length;h<p&&(!l.length||s[h]<=l[0]);h++)s[h]<l[d]&&u(s[h],"outOfRange");for(var g=1;d<f;d++,g=0)g&&c.length&&u(l[d],"outOfRange"),u(l[d],"inRange");for(var g=1;h<p;h++)(!l.length||l[l.length-1]<s[h])&&(g&&(c.length&&u(c[c.length-1].value,"outOfRange"),g=0),u(s[h],"outOfRange"));var v=c.length;return{stops:c,outerColors:[v?c[0].color:"transparent",v?c[v-1].color:"transparent"]}},a.type="visualMap.continuous",a.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),a}(VisualMapModel);function getColorStopValues(o,a,n){if(n[0]===n[1])return n.slice();for(var s=200,l=(n[1]-n[0])/s,c=n[0],u=[],d=0;d<=s&&c<n[1];d++)u.push(c),c+=l;return u.push(n[1]),u}var VisualMapView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return a.prototype.init=function(n,s){this.ecModel=n,this.api=s},a.prototype.render=function(n,s,l,c){if(this.visualMapModel=n,n.get("show")===!1){this.group.removeAll();return}this.doRender(n,s,l,c)},a.prototype.renderBackground=function(n){var s=this.visualMapModel,l=normalizeCssArray(s.get("padding")||0),c=n.getBoundingRect();n.add(new Rect$2({z2:-1,silent:!0,shape:{x:c.x-l[3],y:c.y-l[0],width:c.width+l[3]+l[1],height:c.height+l[0]+l[2]},style:{fill:s.get("backgroundColor"),stroke:s.get("borderColor"),lineWidth:s.get("borderWidth")}}))},a.prototype.getControllerVisual=function(n,s,l){l=l||{};var c=l.forceState,u=this.visualMapModel,d={};if(s==="color"){var h=u.get("contentColor");d.color=h}function f(b){return d[b]}function p(b,w){d[b]=w}var g=u.controllerVisuals[c||u.getValueState(n)],v=VisualMapping.prepareVisualTypes(g);return each$f(v,function(b){var w=g[b];l.convertOpacityToAlpha&&b==="opacity"&&(b="colorAlpha",w=g.__alphaForOpacity),VisualMapping.dependsOn(b,s)&&w&&w.applyVisual(n,f,p)}),d[s]},a.prototype.positionGroup=function(n){var s=this.visualMapModel,l=this.api;positionElement(n,s.getBoxLayoutParams(),{width:l.getWidth(),height:l.getHeight()})},a.prototype.doRender=function(n,s,l,c){},a.type="visualMap",a}(ComponentView),paramsSet=[["left","right","width"],["top","bottom","height"]];function getItemAlign(o,a,n){var s=o.option,l=s.align;if(l!=null&&l!=="auto")return l;for(var c={width:a.getWidth(),height:a.getHeight()},u=s.orient==="horizontal"?1:0,d=paramsSet[u],h=[0,null,10],f={},p=0;p<3;p++)f[paramsSet[1-u][p]]=h[p],f[d[p]]=p===2?n[0]:s[d[p]];var g=[["x","width",3],["y","height",0]][u],v=getLayoutRect(f,c,s.padding);return d[(v.margin[g[2]]||0)+v[g[0]]+v[g[1]]*.5<c[g[1]]*.5?0:1]}function makeHighDownBatch(o,a){return each$f(o||[],function(n){n.dataIndex!=null&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(a?a.componentIndex:"")}),o}var linearMap=linearMap$2,each$1=each$f,mathMin=Math.min,mathMax=Math.max,HOVER_LINK_SIZE=12,HOVER_LINK_OUT=6,ContinuousView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return a.prototype.init=function(n,s){o.prototype.init.call(this,n,s),this._hoverLinkFromSeriesMouseOver=bind$1(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=bind$1(this._hideIndicator,this)},a.prototype.doRender=function(n,s,l,c){(!c||c.type!=="selectDataRange"||c.from!==this.uid)&&this._buildView()},a.prototype._buildView=function(){this.group.removeAll();var n=this.visualMapModel,s=this.group;this._orient=n.get("orient"),this._useHandle=n.get("calculable"),this._resetInterval(),this._renderBar(s);var l=n.get("text");this._renderEndsText(s,l,0),this._renderEndsText(s,l,1),this._updateView(!0),this.renderBackground(s),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(s)},a.prototype._renderEndsText=function(n,s,l){if(s){var c=s[1-l];c=c!=null?c+"":"";var u=this.visualMapModel,d=u.get("textGap"),h=u.itemSize,f=this._shapes.mainGroup,p=this._applyTransform([h[0]/2,l===0?-d:h[1]+d],f),g=this._applyTransform(l===0?"bottom":"top",f),v=this._orient,b=this.visualMapModel.textStyleModel;this.group.add(new ZRText({style:createTextStyle$1(b,{x:p[0],y:p[1],verticalAlign:v==="horizontal"?"middle":g,align:v==="horizontal"?g:"center",text:c})}))}},a.prototype._renderBar=function(n){var s=this.visualMapModel,l=this._shapes,c=s.itemSize,u=this._orient,d=this._useHandle,h=getItemAlign(s,this.api,c),f=l.mainGroup=this._createBarGroup(h),p=new Group$3;f.add(p),p.add(l.outOfRange=createPolygon()),p.add(l.inRange=createPolygon(null,d?getCursor(this._orient):null,bind$1(this._dragHandle,this,"all",!1),bind$1(this._dragHandle,this,"all",!0))),p.setClipPath(new Rect$2({shape:{x:0,y:0,width:c[0],height:c[1],r:3}}));var g=s.textStyleModel.getTextRect("国"),v=mathMax(g.width,g.height);d&&(l.handleThumbs=[],l.handleLabels=[],l.handleLabelPoints=[],this._createHandle(s,f,0,c,v,u),this._createHandle(s,f,1,c,v,u)),this._createIndicator(s,f,c,v,u),n.add(f)},a.prototype._createHandle=function(n,s,l,c,u,d){var h=bind$1(this._dragHandle,this,l,!1),f=bind$1(this._dragHandle,this,l,!0),p=parsePercent$1(n.get("handleSize"),c[0]),g=createSymbol$1(n.get("handleIcon"),-p/2,-p/2,p,p,null,!0),v=getCursor(this._orient);g.attr({cursor:v,draggable:!0,drift:h,ondragend:f,onmousemove:function(E){stop(E.event)}}),g.x=c[0]/2,g.useStyle(n.getModel("handleStyle").getItemStyle()),g.setStyle({strokeNoScale:!0,strokeFirst:!0}),g.style.lineWidth*=2,g.ensureState("emphasis").style=n.getModel(["emphasis","handleStyle"]).getItemStyle(),setAsHighDownDispatcher(g,!0),s.add(g);var b=this.visualMapModel.textStyleModel,w=new ZRText({cursor:v,draggable:!0,drift:h,onmousemove:function(E){stop(E.event)},ondragend:f,style:createTextStyle$1(b,{x:0,y:0,text:""})});w.ensureState("blur").style={opacity:.1},w.stateTransition={duration:200},this.group.add(w);var x=[p,0],S=this._shapes;S.handleThumbs[l]=g,S.handleLabelPoints[l]=x,S.handleLabels[l]=w},a.prototype._createIndicator=function(n,s,l,c,u){var d=parsePercent$1(n.get("indicatorSize"),l[0]),h=createSymbol$1(n.get("indicatorIcon"),-d/2,-d/2,d,d,null,!0);h.attr({cursor:"move",invisible:!0,silent:!0,x:l[0]/2});var f=n.getModel("indicatorStyle").getItemStyle();if(h instanceof ZRImage){var p=h.style;h.useStyle(extend({image:p.image,x:p.x,y:p.y,width:p.width,height:p.height},f))}else h.useStyle(f);s.add(h);var g=this.visualMapModel.textStyleModel,v=new ZRText({silent:!0,invisible:!0,style:createTextStyle$1(g,{x:0,y:0,text:""})});this.group.add(v);var b=[(u==="horizontal"?c/2:HOVER_LINK_OUT)+l[0]/2,0],w=this._shapes;w.indicator=h,w.indicatorLabel=v,w.indicatorLabelPoint=b,this._firstShowIndicator=!0},a.prototype._dragHandle=function(n,s,l,c){if(this._useHandle){if(this._dragging=!s,!s){var u=this._applyTransform([l,c],this._shapes.mainGroup,!0);this._updateInterval(n,u[1]),this._hideIndicator(),this._updateView()}s===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),s?!this._hovering&&this._clearHoverLinkToSeries():useHoverLinkOnHandle(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[n],!1)}},a.prototype._resetInterval=function(){var n=this.visualMapModel,s=this._dataInterval=n.getSelected(),l=n.getExtent(),c=[0,n.itemSize[1]];this._handleEnds=[linearMap(s[0],l,c,!0),linearMap(s[1],l,c,!0)]},a.prototype._updateInterval=function(n,s){s=s||0;var l=this.visualMapModel,c=this._handleEnds,u=[0,l.itemSize[1]];sliderMove(s,c,u,n,0);var d=l.getExtent();this._dataInterval=[linearMap(c[0],u,d,!0),linearMap(c[1],u,d,!0)]},a.prototype._updateView=function(n){var s=this.visualMapModel,l=s.getExtent(),c=this._shapes,u=[0,s.itemSize[1]],d=n?u:this._handleEnds,h=this._createBarVisual(this._dataInterval,l,d,"inRange"),f=this._createBarVisual(l,l,u,"outOfRange");c.inRange.setStyle({fill:h.barColor}).setShape("points",h.barPoints),c.outOfRange.setStyle({fill:f.barColor}).setShape("points",f.barPoints),this._updateHandle(d,h)},a.prototype._createBarVisual=function(n,s,l,c){var u={forceState:c,convertOpacityToAlpha:!0},d=this._makeColorGradient(n,u),h=[this.getControllerVisual(n[0],"symbolSize",u),this.getControllerVisual(n[1],"symbolSize",u)],f=this._createBarPoints(l,h);return{barColor:new LinearGradient(0,0,0,1,d),barPoints:f,handlesColor:[d[0].color,d[d.length-1].color]}},a.prototype._makeColorGradient=function(n,s){var l=100,c=[],u=(n[1]-n[0])/l;c.push({color:this.getControllerVisual(n[0],"color",s),offset:0});for(var d=1;d<l;d++){var h=n[0]+u*d;if(h>n[1])break;c.push({color:this.getControllerVisual(h,"color",s),offset:d/l})}return c.push({color:this.getControllerVisual(n[1],"color",s),offset:1}),c},a.prototype._createBarPoints=function(n,s){var l=this.visualMapModel.itemSize;return[[l[0]-s[0],n[0]],[l[0],n[0]],[l[0],n[1]],[l[0]-s[1],n[1]]]},a.prototype._createBarGroup=function(n){var s=this._orient,l=this.visualMapModel.get("inverse");return new Group$3(s==="horizontal"&&!l?{scaleX:n==="bottom"?1:-1,rotation:Math.PI/2}:s==="horizontal"&&l?{scaleX:n==="bottom"?-1:1,rotation:-Math.PI/2}:s==="vertical"&&!l?{scaleX:n==="left"?1:-1,scaleY:-1}:{scaleX:n==="left"?1:-1})},a.prototype._updateHandle=function(n,s){if(this._useHandle){var l=this._shapes,c=this.visualMapModel,u=l.handleThumbs,d=l.handleLabels,h=c.itemSize,f=c.getExtent(),p=this._applyTransform("left",l.mainGroup);each$1([0,1],function(g){var v=u[g];v.setStyle("fill",s.handlesColor[g]),v.y=n[g];var b=linearMap(n[g],[0,h[1]],f,!0),w=this.getControllerVisual(b,"symbolSize");v.scaleX=v.scaleY=w/h[0],v.x=h[0]-w/2;var x=applyTransform(l.handleLabelPoints[g],getTransform$1(v,this.group));if(this._orient==="horizontal"){var S=p==="left"||p==="top"?(h[0]-w)/2:(h[0]-w)/-2;x[1]+=S}d[g].setStyle({x:x[0],y:x[1],text:c.formatValueText(this._dataInterval[g]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",l.mainGroup):"center"})},this)}},a.prototype._showIndicator=function(n,s,l,c){var u=this.visualMapModel,d=u.getExtent(),h=u.itemSize,f=[0,h[1]],p=this._shapes,g=p.indicator;if(g){g.attr("invisible",!1);var v={convertOpacityToAlpha:!0},b=this.getControllerVisual(n,"color",v),w=this.getControllerVisual(n,"symbolSize"),x=linearMap(n,d,f,!0),S=h[0]-w/2,E={x:g.x,y:g.y};g.y=x,g.x=S;var T=applyTransform(p.indicatorLabelPoint,getTransform$1(g,this.group)),C=p.indicatorLabel;C.attr("invisible",!1);var A=this._applyTransform("left",p.mainGroup),R=this._orient,j=R==="horizontal";C.setStyle({text:(l||"")+u.formatValueText(s),verticalAlign:j?A:"middle",align:j?"center":A});var D={x:S,y:x,style:{fill:b}},O={style:{x:T[0],y:T[1]}};if(u.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var H={duration:100,easing:"cubicInOut",additive:!0};g.x=E.x,g.y=E.y,g.animateTo(D,H),C.animateTo(O,H)}else g.attr(D),C.attr(O);this._firstShowIndicator=!1;var q=this._shapes.handleLabels;if(q)for(var Y=0;Y<q.length;Y++)this.api.enterBlur(q[Y])}},a.prototype._enableHoverLinkToSeries=function(){var n=this;this._shapes.mainGroup.on("mousemove",function(s){if(n._hovering=!0,!n._dragging){var l=n.visualMapModel.itemSize,c=n._applyTransform([s.offsetX,s.offsetY],n._shapes.mainGroup,!0,!0);c[1]=mathMin(mathMax(0,c[1]),l[1]),n._doHoverLinkToSeries(c[1],0<=c[0]&&c[0]<=l[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},a.prototype._enableHoverLinkFromSeries=function(){var n=this.api.getZr();this.visualMapModel.option.hoverLink?(n.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),n.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},a.prototype._doHoverLinkToSeries=function(n,s){var l=this.visualMapModel,c=l.itemSize;if(l.option.hoverLink){var u=[0,c[1]],d=l.getExtent();n=mathMin(mathMax(u[0],n),u[1]);var h=getHalfHoverLinkSize(l,d,u),f=[n-h,n+h],p=linearMap(n,u,d,!0),g=[linearMap(f[0],u,d,!0),linearMap(f[1],u,d,!0)];f[0]<u[0]&&(g[0]=-1/0),f[1]>u[1]&&(g[1]=1/0),s&&(g[0]===-1/0?this._showIndicator(p,g[1],"< ",h):g[1]===1/0?this._showIndicator(p,g[0],"> ",h):this._showIndicator(p,p,"≈ ",h));var v=this._hoverLinkDataIndices,b=[];(s||useHoverLinkOnHandle(l))&&(b=this._hoverLinkDataIndices=l.findTargetDataIndices(g));var w=compressBatches(v,b);this._dispatchHighDown("downplay",makeHighDownBatch(w[0],l)),this._dispatchHighDown("highlight",makeHighDownBatch(w[1],l))}},a.prototype._hoverLinkFromSeriesMouseOver=function(n){var s;if(findEventDispatcher(n.target,function(h){var f=getECData(h);if(f.dataIndex!=null)return s=f,!0},!0),!!s){var l=this.ecModel.getSeriesByIndex(s.seriesIndex),c=this.visualMapModel;if(c.isTargetSeries(l)){var u=l.getData(s.dataType),d=u.getStore().get(c.getDataDimensionIndex(u),s.dataIndex);isNaN(d)||this._showIndicator(d,d)}}},a.prototype._hideIndicator=function(){var n=this._shapes;n.indicator&&n.indicator.attr("invisible",!0),n.indicatorLabel&&n.indicatorLabel.attr("invisible",!0);var s=this._shapes.handleLabels;if(s)for(var l=0;l<s.length;l++)this.api.leaveBlur(s[l])},a.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var n=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",makeHighDownBatch(n,this.visualMapModel)),n.length=0},a.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var n=this.api.getZr();n.off("mouseover",this._hoverLinkFromSeriesMouseOver),n.off("mouseout",this._hideIndicator)},a.prototype._applyTransform=function(n,s,l,c){var u=getTransform$1(s,c?null:this.group);return isArray$1(n)?applyTransform(n,u,l):transformDirection(n,u,l)},a.prototype._dispatchHighDown=function(n,s){s&&s.length&&this.api.dispatchAction({type:n,batch:s})},a.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},a.type="visualMap.continuous",a}(VisualMapView);function createPolygon(o,a,n,s){return new Polygon({shape:{points:o},draggable:!!n,cursor:a,drift:n,onmousemove:function(l){stop(l.event)},ondragend:s})}function getHalfHoverLinkSize(o,a,n){var s=HOVER_LINK_SIZE/2,l=o.get("hoverLinkDataSize");return l&&(s=linearMap(l,a,n,!0)/2),s}function useHoverLinkOnHandle(o){var a=o.get("hoverLinkOnHandle");return!!(a??o.get("realtime"))}function getCursor(o){return o==="vertical"?"ns-resize":"ew-resize"}var visualMapActionInfo={type:"selectDataRange",event:"dataRangeSelected",update:"update"},visualMapActionHander=function(o,a){a.eachComponent({mainType:"visualMap",query:o},function(n){n.setSelected(o.selected)})},visualMapEncodingHandlers=[{createOnAllSeries:!0,reset:function(o,a){var n=[];return a.eachComponent("visualMap",function(s){var l=o.pipelineContext;!s.isTargetSeries(o)||l&&l.large||n.push(incrementalApplyVisual(s.stateList,s.targetVisuals,bind$1(s.getValueState,s),s.getDataDimensionIndex(o.getData())))}),n}},{createOnAllSeries:!0,reset:function(o,a){var n=o.getData(),s=[];a.eachComponent("visualMap",function(l){if(l.isTargetSeries(o)){var c=l.getVisualMeta(bind$1(getColorVisual,null,o,l))||{stops:[],outerColors:[]},u=l.getDataDimensionIndex(n);u>=0&&(c.dimension=u,s.push(c))}}),o.getData().setVisual("visualMeta",s)}}];function getColorVisual(o,a,n,s){for(var l=a.targetVisuals[s],c=VisualMapping.prepareVisualTypes(l),u={color:getVisualFromData(o.getData(),"color")},d=0,h=c.length;d<h;d++){var f=c[d],p=l[f==="opacity"?"__alphaForOpacity":f];p&&p.applyVisual(n,g,v)}return u.color;function g(b){return u[b]}function v(b,w){u[b]=w}}var each=each$f;function visualMapPreprocessor(o){var a=o&&o.visualMap;isArray$1(a)||(a=a?[a]:[]),each(a,function(n){if(n){has(n,"splitList")&&!has(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var s=n.pieces;s&&isArray$1(s)&&each(s,function(l){isObject$3(l)&&(has(l,"start")&&!has(l,"min")&&(l.min=l.start),has(l,"end")&&!has(l,"max")&&(l.max=l.end))})}})}function has(o,a){return o&&o.hasOwnProperty&&o.hasOwnProperty(a)}var installed=!1;function installCommon(o){installed||(installed=!0,o.registerSubTypeDefaulter("visualMap",function(a){return!a.categories&&(!(a.pieces?a.pieces.length>0:a.splitNumber>0)||a.calculable)?"continuous":"piecewise"}),o.registerAction(visualMapActionInfo,visualMapActionHander),each$f(visualMapEncodingHandlers,function(a){o.registerVisual(o.PRIORITY.VISUAL.COMPONENT,a)}),o.registerPreprocessor(visualMapPreprocessor))}function install$5(o){o.registerComponentModel(ContinuousModel),o.registerComponentView(ContinuousView),installCommon(o)}var PiecewiseModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n._pieceList=[],n}return a.prototype.optionUpdated=function(n,s){o.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var l=this._mode=this._determineMode();this._pieceList=[],resetMethods[this._mode].call(this,this._pieceList),this._resetSelected(n,s);var c=this.option.categories;this.resetVisual(function(u,d){l==="categories"?(u.mappingMethod="category",u.categories=clone$4(c)):(u.dataExtent=this.getExtent(),u.mappingMethod="piecewise",u.pieceList=map$1(this._pieceList,function(h){return h=clone$4(h),d!=="inRange"&&(h.visual=null),h}))})},a.prototype.completeVisualOption=function(){var n=this.option,s={},l=VisualMapping.listVisualTypes(),c=this.isCategory();each$f(n.pieces,function(d){each$f(l,function(h){d.hasOwnProperty(h)&&(s[h]=1)})}),each$f(s,function(d,h){var f=!1;each$f(this.stateList,function(p){f=f||u(n,p,h)||u(n.target,p,h)},this),!f&&each$f(this.stateList,function(p){(n[p]||(n[p]={}))[h]=visualDefault.get(h,p==="inRange"?"active":"inactive",c)})},this);function u(d,h,f){return d&&d[h]&&d[h].hasOwnProperty(f)}o.prototype.completeVisualOption.apply(this,arguments)},a.prototype._resetSelected=function(n,s){var l=this.option,c=this._pieceList,u=(s?l:n).selected||{};if(l.selected=u,each$f(c,function(h,f){var p=this.getSelectedMapKey(h);u.hasOwnProperty(p)||(u[p]=!0)},this),l.selectedMode==="single"){var d=!1;each$f(c,function(h,f){var p=this.getSelectedMapKey(h);u[p]&&(d?u[p]=!1:d=!0)},this)}},a.prototype.getItemSymbol=function(){return this.get("itemSymbol")},a.prototype.getSelectedMapKey=function(n){return this._mode==="categories"?n.value+"":n.index+""},a.prototype.getPieceList=function(){return this._pieceList},a.prototype._determineMode=function(){var n=this.option;return n.pieces&&n.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},a.prototype.setSelected=function(n){this.option.selected=clone$4(n)},a.prototype.getValueState=function(n){var s=VisualMapping.findPieceIndex(n,this._pieceList);return s!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[s])]?"inRange":"outOfRange"},a.prototype.findTargetDataIndices=function(n){var s=[],l=this._pieceList;return this.eachTargetSeries(function(c){var u=[],d=c.getData();d.each(this.getDataDimensionIndex(d),function(h,f){var p=VisualMapping.findPieceIndex(h,l);p===n&&u.push(f)},this),s.push({seriesId:c.id,dataIndex:u})},this),s},a.prototype.getRepresentValue=function(n){var s;if(this.isCategory())s=n.value;else if(n.value!=null)s=n.value;else{var l=n.interval||[];s=l[0]===-1/0&&l[1]===1/0?0:(l[0]+l[1])/2}return s},a.prototype.getVisualMeta=function(n){if(this.isCategory())return;var s=[],l=["",""],c=this;function u(p,g){var v=c.getRepresentValue({interval:p});g||(g=c.getValueState(v));var b=n(v,g);p[0]===-1/0?l[0]=b:p[1]===1/0?l[1]=b:s.push({value:p[0],color:b},{value:p[1],color:b})}var d=this._pieceList.slice();if(!d.length)d.push({interval:[-1/0,1/0]});else{var h=d[0].interval[0];h!==-1/0&&d.unshift({interval:[-1/0,h]}),h=d[d.length-1].interval[1],h!==1/0&&d.push({interval:[h,1/0]})}var f=-1/0;return each$f(d,function(p){var g=p.interval;g&&(g[0]>f&&u([f,g[0]],"outOfRange"),u(g.slice()),f=g[1])},this),{stops:s,outerColors:l}},a.type="visualMap.piecewise",a.defaultOption=inheritDefaultOption(VisualMapModel.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),a}(VisualMapModel),resetMethods={splitNumber:function(o){var a=this.option,n=Math.min(a.precision,20),s=this.getExtent(),l=a.splitNumber;l=Math.max(parseInt(l,10),1),a.splitNumber=l;for(var c=(s[1]-s[0])/l;+c.toFixed(n)!==c&&n<5;)n++;a.precision=n,c=+c.toFixed(n),a.minOpen&&o.push({interval:[-1/0,s[0]],close:[0,0]});for(var u=0,d=s[0];u<l;d+=c,u++){var h=u===l-1?s[1]:d+c;o.push({interval:[d,h],close:[1,1]})}a.maxOpen&&o.push({interval:[s[1],1/0],close:[0,0]}),reformIntervals(o),each$f(o,function(f,p){f.index=p,f.text=this.formatValueText(f.interval)},this)},categories:function(o){var a=this.option;each$f(a.categories,function(n){o.push({text:this.formatValueText(n,!0),value:n})},this),normalizeReverse(a,o)},pieces:function(o){var a=this.option;each$f(a.pieces,function(n,s){isObject$3(n)||(n={value:n});var l={text:"",index:s};if(n.label!=null&&(l.text=n.label),n.hasOwnProperty("value")){var c=l.value=n.value;l.interval=[c,c],l.close=[1,1]}else{for(var u=l.interval=[],d=l.close=[0,0],h=[1,0,1],f=[-1/0,1/0],p=[],g=0;g<2;g++){for(var v=[["gte","gt","min"],["lte","lt","max"]][g],b=0;b<3&&u[g]==null;b++)u[g]=n[v[b]],d[g]=h[b],p[g]=b===2;u[g]==null&&(u[g]=f[g])}p[0]&&u[1]===1/0&&(d[0]=0),p[1]&&u[0]===-1/0&&(d[1]=0),process.env.NODE_ENV!=="production"&&u[0]>u[1]&&console.warn("Piece "+s+"is illegal: "+u+" lower bound should not greater then uppper bound."),u[0]===u[1]&&d[0]&&d[1]&&(l.value=u[0])}l.visual=VisualMapping.retrieveVisuals(n),o.push(l)},this),normalizeReverse(a,o),reformIntervals(o),each$f(o,function(n){var s=n.close,l=[["<","≤"][s[1]],[">","≥"][s[0]]];n.text=n.text||this.formatValueText(n.value!=null?n.value:n.interval,!1,l)},this)}};function normalizeReverse(o,a){var n=o.inverse;(o.orient==="vertical"?!n:n)&&a.reverse()}var PiecewiseVisualMapView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type=a.type,n}return a.prototype.doRender=function(){var n=this.group;n.removeAll();var s=this.visualMapModel,l=s.get("textGap"),c=s.textStyleModel,u=c.getFont(),d=c.getTextColor(),h=this._getItemAlign(),f=s.itemSize,p=this._getViewData(),g=p.endsText,v=retrieve(s.get("showLabel",!0),!g),b=!s.get("selectedMode");g&&this._renderEndsText(n,g[0],f,v,h),each$f(p.viewPieceList,function(w){var x=w.piece,S=new Group$3;S.onclick=bind$1(this._onItemClick,this,x),this._enableHoverLink(S,w.indexInModelPieceList);var E=s.getRepresentValue(x);if(this._createItemSymbol(S,E,[0,0,f[0],f[1]],b),v){var T=this.visualMapModel.getValueState(E);S.add(new ZRText({style:{x:h==="right"?-l:f[0]+l,y:f[1]/2,text:x.text,verticalAlign:"middle",align:h,font:u,fill:d,opacity:T==="outOfRange"?.5:1},silent:b}))}n.add(S)},this),g&&this._renderEndsText(n,g[1],f,v,h),box(s.get("orient"),n,s.get("itemGap")),this.renderBackground(n),this.positionGroup(n)},a.prototype._enableHoverLink=function(n,s){var l=this;n.on("mouseover",function(){return c("highlight")}).on("mouseout",function(){return c("downplay")});var c=function(u){var d=l.visualMapModel;d.option.hoverLink&&l.api.dispatchAction({type:u,batch:makeHighDownBatch(d.findTargetDataIndices(s),d)})}},a.prototype._getItemAlign=function(){var n=this.visualMapModel,s=n.option;if(s.orient==="vertical")return getItemAlign(n,this.api,n.itemSize);var l=s.align;return(!l||l==="auto")&&(l="left"),l},a.prototype._renderEndsText=function(n,s,l,c,u){if(s){var d=new Group$3,h=this.visualMapModel.textStyleModel;d.add(new ZRText({style:createTextStyle$1(h,{x:c?u==="right"?l[0]:0:l[0]/2,y:l[1]/2,verticalAlign:"middle",align:c?u:"center",text:s})})),n.add(d)}},a.prototype._getViewData=function(){var n=this.visualMapModel,s=map$1(n.getPieceList(),function(d,h){return{piece:d,indexInModelPieceList:h}}),l=n.get("text"),c=n.get("orient"),u=n.get("inverse");return(c==="horizontal"?u:!u)?s.reverse():l&&(l=l.slice().reverse()),{viewPieceList:s,endsText:l}},a.prototype._createItemSymbol=function(n,s,l,c){var u=createSymbol$1(this.getControllerVisual(s,"symbol"),l[0],l[1],l[2],l[3],this.getControllerVisual(s,"color"));u.silent=c,n.add(u)},a.prototype._onItemClick=function(n){var s=this.visualMapModel,l=s.option,c=l.selectedMode;if(c){var u=clone$4(l.selected),d=s.getSelectedMapKey(n);c==="single"||c===!0?(u[d]=!0,each$f(u,function(h,f){u[f]=f===d})):u[d]=!u[d],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:u})}},a.type="visualMap.piecewise",a}(VisualMapView);function install$4(o){o.registerComponentModel(PiecewiseModel),o.registerComponentView(PiecewiseVisualMapView),installCommon(o)}function install$3(o){use(install$5),use(install$4)}var DEFAULT_OPTION={label:{enabled:!0},decal:{show:!1}},inner=makeInner(),decalPaletteScope={};function ariaVisual(o,a){var n=o.getModel("aria");if(!n.get("enabled"))return;var s=clone$4(DEFAULT_OPTION);merge(s.label,o.getLocaleModel().get("aria"),!1),merge(n.option,s,!1),l(),c();function l(){var f=n.getModel("decal"),p=f.get("show");if(p){var g=createHashMap();o.eachSeries(function(v){if(!v.isColorBySeries()){var b=g.get(v.type);b||(b={},g.set(v.type,b)),inner(v).scope=b}}),o.eachRawSeries(function(v){if(o.isSeriesFiltered(v))return;if(isFunction$1(v.enableAriaDecal)){v.enableAriaDecal();return}var b=v.getData();if(v.isColorBySeries()){var T=getDecalFromPalette(v.ecModel,v.name,decalPaletteScope,o.getSeriesCount()),C=b.getVisual("decal");b.setVisual("decal",A(C,T))}else{var w=v.getRawData(),x={},S=inner(v).scope;b.each(function(R){var j=b.getRawIndex(R);x[j]=R});var E=w.count();w.each(function(R){var j=x[R],D=w.getName(R)||R+"",O=getDecalFromPalette(v.ecModel,D,S,E),H=b.getItemVisual(j,"decal");b.setItemVisual(j,"decal",A(H,O))})}function A(R,j){var D=R?extend(extend({},j),R):j;return D.dirty=!0,D}})}}function c(){var f=a.getZr().dom;if(f){var p=o.getLocaleModel().get("aria"),g=n.getModel("label");if(g.option=defaults(g.option,p),!!g.get("enabled")){if(f.setAttribute("role","img"),g.get("description")){f.setAttribute("aria-label",g.get("description"));return}var v=o.getSeriesCount(),b=g.get(["data","maxCount"])||10,w=g.get(["series","maxCount"])||10,x=Math.min(v,w),S;if(!(v<1)){var E=d();if(E){var T=g.get(["general","withTitle"]);S=u(T,{title:E})}else S=g.get(["general","withoutTitle"]);var C=[],A=v>1?g.get(["series","multiple","prefix"]):g.get(["series","single","prefix"]);S+=u(A,{seriesCount:v}),o.eachSeries(function(O,H){if(H<x){var q=void 0,Y=O.get("name"),te=Y?"withName":"withoutName";q=v>1?g.get(["series","multiple",te]):g.get(["series","single",te]),q=u(q,{seriesId:O.seriesIndex,seriesName:O.get("name"),seriesType:h(O.subType)});var ee=O.getData();if(ee.count()>b){var re=g.get(["data","partialData"]);q+=u(re,{displayCnt:b})}else q+=g.get(["data","allData"]);for(var ne=g.get(["data","separator","middle"]),ce=g.get(["data","separator","end"]),ve=g.get(["data","excludeDimensionId"]),be=[],me=0;me<ee.count();me++)if(me<b){var ae=ee.getName(me),pe=ve?filter(ee.getValues(me),function(se,de){return indexOf(ve,de)===-1}):ee.getValues(me),ie=g.get(["data",ae?"withName":"withoutName"]);be.push(u(ie,{name:ae,value:pe.join(ne)}))}q+=be.join(ne)+ce,C.push(q)}});var R=g.getModel(["series","multiple","separator"]),j=R.get("middle"),D=R.get("end");S+=C.join(j)+D,f.setAttribute("aria-label",S)}}}}function u(f,p){if(!isString$2(f))return f;var g=f;return each$f(p,function(v,b){g=g.replace(new RegExp("\\{\\s*"+b+"\\s*\\}","g"),v)}),g}function d(){var f=o.get("title");return f&&f.length&&(f=f[0]),f&&f.text}function h(f){var p=o.getLocaleModel().get(["series","typeNames"]);return p[f]||p.chart}}function ariaPreprocessor(o){if(!(!o||!o.aria)){var a=o.aria;a.show!=null&&(a.enabled=a.show),a.label=a.label||{},each$f(["description","general","series","data"],function(n){a[n]!=null&&(a.label[n]=a[n])})}}function install$2(o){o.registerPreprocessor(ariaPreprocessor),o.registerVisual(o.PRIORITY.VISUAL.ARIA,ariaVisual)}var RELATIONAL_EXPRESSION_OP_ALIAS_MAP={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},RegExpEvaluator=function(){function o(a){var n=this._condVal=isString$2(a)?new RegExp(a):isRegExp(a)?a:null;if(n==null){var s="";process.env.NODE_ENV!=="production"&&(s=makePrintable("Illegal regexp",a,"in")),throwError(s)}}return o.prototype.evaluate=function(a){var n=typeof a;return isString$2(n)?this._condVal.test(a):isNumber(n)?this._condVal.test(a+""):!1},o}(),ConstConditionInternal=function(){function o(){}return o.prototype.evaluate=function(){return this.value},o}(),AndConditionInternal=function(){function o(){}return o.prototype.evaluate=function(){for(var a=this.children,n=0;n<a.length;n++)if(!a[n].evaluate())return!1;return!0},o}(),OrConditionInternal=function(){function o(){}return o.prototype.evaluate=function(){for(var a=this.children,n=0;n<a.length;n++)if(a[n].evaluate())return!0;return!1},o}(),NotConditionInternal=function(){function o(){}return o.prototype.evaluate=function(){return!this.child.evaluate()},o}(),RelationalConditionInternal=function(){function o(){}return o.prototype.evaluate=function(){for(var a=!!this.valueParser,n=this.getValue,s=n(this.valueGetterParam),l=a?this.valueParser(s):null,c=0;c<this.subCondList.length;c++)if(!this.subCondList[c].evaluate(a?l:s))return!1;return!0},o}();function parseOption(o,a){if(o===!0||o===!1){var n=new ConstConditionInternal;return n.value=o,n}var s="";return isObjectNotArray(o)||(process.env.NODE_ENV!=="production"&&(s=makePrintable("Illegal config. Expect a plain object but actually",o)),throwError(s)),o.and?parseAndOrOption("and",o,a):o.or?parseAndOrOption("or",o,a):o.not?parseNotOption(o,a):parseRelationalOption(o,a)}function parseAndOrOption(o,a,n){var s=a[o],l="";process.env.NODE_ENV!=="production"&&(l=makePrintable('"and"/"or" condition should only be `'+o+": [...]` and must not be empty array.","Illegal condition:",a)),isArray$1(s)||throwError(l),s.length||throwError(l);var c=o==="and"?new AndConditionInternal:new OrConditionInternal;return c.children=map$1(s,function(u){return parseOption(u,n)}),c.children.length||throwError(l),c}function parseNotOption(o,a){var n=o.not,s="";process.env.NODE_ENV!=="production"&&(s=makePrintable('"not" condition should only be `not: {}`.',"Illegal condition:",o)),isObjectNotArray(n)||throwError(s);var l=new NotConditionInternal;return l.child=parseOption(n,a),l.child||throwError(s),l}function parseRelationalOption(o,a){for(var n="",s=a.prepareGetValue(o),l=[],c=keys$1(o),u=o.parser,d=u?getRawValueParser(u):null,h=0;h<c.length;h++){var f=c[h];if(!(f==="parser"||a.valueGetterAttrMap.get(f))){var p=hasOwn(RELATIONAL_EXPRESSION_OP_ALIAS_MAP,f)?RELATIONAL_EXPRESSION_OP_ALIAS_MAP[f]:f,g=o[f],v=d?d(g):g,b=createFilterComparator(p,v)||p==="reg"&&new RegExpEvaluator(v);b||(process.env.NODE_ENV!=="production"&&(n=makePrintable('Illegal relational operation: "'+f+'" in condition:',o)),throwError(n)),l.push(b)}}l.length||(process.env.NODE_ENV!=="production"&&(n=makePrintable("Relational condition must have at least one operator.","Illegal condition:",o)),throwError(n));var w=new RelationalConditionInternal;return w.valueGetterParam=s,w.valueParser=d,w.getValue=a.getValue,w.subCondList=l,w}function isObjectNotArray(o){return isObject$3(o)&&!isArrayLike(o)}var ConditionalExpressionParsed=function(){function o(a,n){this._cond=parseOption(a,n)}return o.prototype.evaluate=function(){return this._cond.evaluate()},o}();function parseConditionalExpression(o,a){return new ConditionalExpressionParsed(o,a)}var filterTransform={type:"echarts:filter",transform:function(o){for(var a=o.upstream,n,s=parseConditionalExpression(o.config,{valueGetterAttrMap:createHashMap({dimension:!0}),prepareGetValue:function(d){var h="",f=d.dimension;hasOwn(d,"dimension")||(process.env.NODE_ENV!=="production"&&(h=makePrintable('Relation condition must has prop "dimension" specified.',"Illegal condition:",d)),throwError(h));var p=a.getDimensionInfo(f);return p||(process.env.NODE_ENV!=="production"&&(h=makePrintable("Can not find dimension info via: "+f+`.
`,"Existing dimensions: ",a.cloneAllDimensionInfo(),`.
`,"Illegal condition:",d,`.
`)),throwError(h)),{dimIdx:p.index}},getValue:function(d){return a.retrieveValueFromItem(n,d.dimIdx)}}),l=[],c=0,u=a.count();c<u;c++)n=a.getRawDataItem(c),s.evaluate()&&l.push(n);return{data:l}}},sampleLog="";process.env.NODE_ENV!=="production"&&(sampleLog=["Valid config is like:",'{ dimension: "age", order: "asc" }','or [{ dimension: "age", order: "asc"], { dimension: "date", order: "desc" }]'].join(" "));var sortTransform={type:"echarts:sort",transform:function(o){var a=o.upstream,n=o.config,s="",l=normalizeToArray(n);l.length||(process.env.NODE_ENV!=="production"&&(s="Empty `config` in sort transform."),throwError(s));var c=[];each$f(l,function(p){var g=p.dimension,v=p.order,b=p.parser,w=p.incomparable;if(g==null&&(process.env.NODE_ENV!=="production"&&(s='Sort transform config must has "dimension" specified.'+sampleLog),throwError(s)),v!=="asc"&&v!=="desc"&&(process.env.NODE_ENV!=="production"&&(s='Sort transform config must has "order" specified.'+sampleLog),throwError(s)),w&&w!=="min"&&w!=="max"){var x="";process.env.NODE_ENV!=="production"&&(x='incomparable must be "min" or "max" rather than "'+w+'".'),throwError(x)}if(v!=="asc"&&v!=="desc"){var S="";process.env.NODE_ENV!=="production"&&(S='order must be "asc" or "desc" rather than "'+v+'".'),throwError(S)}var E=a.getDimensionInfo(g);E||(process.env.NODE_ENV!=="production"&&(s=makePrintable("Can not find dimension info via: "+g+`.
`,"Existing dimensions: ",a.cloneAllDimensionInfo(),`.
`,"Illegal config:",p,`.
`)),throwError(s));var T=b?getRawValueParser(b):null;b&&!T&&(process.env.NODE_ENV!=="production"&&(s=makePrintable("Invalid parser name "+b+`.
`,"Illegal config:",p,`.
`)),throwError(s)),c.push({dimIdx:E.index,parser:T,comparator:new SortOrderComparator(v,w)})});var u=a.sourceFormat;u!==SOURCE_FORMAT_ARRAY_ROWS&&u!==SOURCE_FORMAT_OBJECT_ROWS&&(process.env.NODE_ENV!=="production"&&(s='sourceFormat "'+u+'" is not supported yet'),throwError(s));for(var d=[],h=0,f=a.count();h<f;h++)d.push(a.getRawDataItem(h));return d.sort(function(p,g){for(var v=0;v<c.length;v++){var b=c[v],w=a.retrieveValueFromItem(p,b.dimIdx),x=a.retrieveValueFromItem(g,b.dimIdx);b.parser&&(w=b.parser(w),x=b.parser(x));var S=b.comparator.evaluate(w,x);if(S!==0)return S}return 0}),{data:d}}};function install$1(o){o.registerTransform(filterTransform),o.registerTransform(sortTransform)}var DatasetModel=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="dataset",n}return a.prototype.init=function(n,s,l){o.prototype.init.call(this,n,s,l),this._sourceManager=new SourceManager(this),disableTransformOptionMerge(this)},a.prototype.mergeOption=function(n,s){o.prototype.mergeOption.call(this,n,s),disableTransformOptionMerge(this)},a.prototype.optionUpdated=function(){this._sourceManager.dirty()},a.prototype.getSourceManager=function(){return this._sourceManager},a.type="dataset",a.defaultOption={seriesLayoutBy:SERIES_LAYOUT_BY_COLUMN},a}(ComponentModel),DatasetView=function(o){__extends$1(a,o);function a(){var n=o!==null&&o.apply(this,arguments)||this;return n.type="dataset",n}return a.type="dataset",a}(ComponentView);function install(o){o.registerComponentModel(DatasetModel),o.registerComponentView(DatasetView)}var CMD=PathProxy.CMD;function aroundEqual(o,a){return Math.abs(o-a)<1e-5}function pathToBezierCurves(o){var a=o.data,n=o.len(),s=[],l,c=0,u=0,d=0,h=0;function f(ee,re){l&&l.length>2&&s.push(l),l=[ee,re]}function p(ee,re,ne,ce){aroundEqual(ee,ne)&&aroundEqual(re,ce)||l.push(ee,re,ne,ce,ne,ce)}function g(ee,re,ne,ce,ve,be){var me=Math.abs(re-ee),ae=Math.tan(me/4)*4/3,pe=re<ee?-1:1,ie=Math.cos(ee),se=Math.sin(ee),de=Math.cos(re),le=Math.sin(re),ge=ie*ve+ne,Re=se*be+ce,we=de*ve+ne,Se=le*be+ce,xe=ve*ae*pe,ke=be*ae*pe;l.push(ge-xe*se,Re+ke*ie,we+xe*le,Se-ke*de,we,Se)}for(var v,b,w,x,S=0;S<n;){var E=a[S++],T=S===1;switch(T&&(c=a[S],u=a[S+1],d=c,h=u,(E===CMD.L||E===CMD.C||E===CMD.Q)&&(l=[d,h])),E){case CMD.M:c=d=a[S++],u=h=a[S++],f(d,h);break;case CMD.L:v=a[S++],b=a[S++],p(c,u,v,b),c=v,u=b;break;case CMD.C:l.push(a[S++],a[S++],a[S++],a[S++],c=a[S++],u=a[S++]);break;case CMD.Q:v=a[S++],b=a[S++],w=a[S++],x=a[S++],l.push(c+2/3*(v-c),u+2/3*(b-u),w+2/3*(v-w),x+2/3*(b-x),w,x),c=w,u=x;break;case CMD.A:var C=a[S++],A=a[S++],R=a[S++],j=a[S++],D=a[S++],O=a[S++]+D;S+=1;var H=!a[S++];v=Math.cos(D)*R+C,b=Math.sin(D)*j+A,T?(d=v,h=b,f(d,h)):p(c,u,v,b),c=Math.cos(O)*R+C,u=Math.sin(O)*j+A;for(var q=(H?-1:1)*Math.PI/2,Y=D;H?Y>O:Y<O;Y+=q){var te=H?Math.max(Y+q,O):Math.min(Y+q,O);g(Y,te,C,A,R,j)}break;case CMD.R:d=c=a[S++],h=u=a[S++],v=d+a[S++],b=h+a[S++],f(v,h),p(v,h,v,b),p(v,b,d,b),p(d,b,d,h),p(d,h,v,h);break;case CMD.Z:l&&p(c,u,d,h),c=d,u=h;break}}return l&&l.length>2&&s.push(l),s}function adpativeBezier(o,a,n,s,l,c,u,d,h,f){if(aroundEqual(o,n)&&aroundEqual(a,s)&&aroundEqual(l,u)&&aroundEqual(c,d)){h.push(u,d);return}var p=2/f,g=p*p,v=u-o,b=d-a,w=Math.sqrt(v*v+b*b);v/=w,b/=w;var x=n-o,S=s-a,E=l-u,T=c-d,C=x*x+S*S,A=E*E+T*T;if(C<g&&A<g){h.push(u,d);return}var R=v*x+b*S,j=-v*E-b*T,D=C-R*R,O=A-j*j;if(D<g&&R>=0&&O<g&&j>=0){h.push(u,d);return}var H=[],q=[];cubicSubdivide(o,n,l,u,.5,H),cubicSubdivide(a,s,c,d,.5,q),adpativeBezier(H[0],q[0],H[1],q[1],H[2],q[2],H[3],q[3],h,f),adpativeBezier(H[4],q[4],H[5],q[5],H[6],q[6],H[7],q[7],h,f)}function pathToPolygons(o,a){var n=pathToBezierCurves(o),s=[];a=a||1;for(var l=0;l<n.length;l++){var c=n[l],u=[],d=c[0],h=c[1];u.push(d,h);for(var f=2;f<c.length;){var p=c[f++],g=c[f++],v=c[f++],b=c[f++],w=c[f++],x=c[f++];adpativeBezier(d,h,p,g,v,b,w,x,u,a),d=w,h=x}s.push(u)}return s}function getDividingGrids(o,a,n){var s=o[a],l=o[1-a],c=Math.abs(s/l),u=Math.ceil(Math.sqrt(c*n)),d=Math.floor(n/u);d===0&&(d=1,u=n);for(var h=[],f=0;f<u;f++)h.push(d);var p=u*d,g=n-p;if(g>0)for(var f=0;f<g;f++)h[f%u]+=1;return h}function divideSector(o,a,n){for(var s=o.r0,l=o.r,c=o.startAngle,u=o.endAngle,d=Math.abs(u-c),h=d*l,f=l-s,p=h>Math.abs(f),g=getDividingGrids([h,f],p?0:1,a),v=(p?d:f)/g.length,b=0;b<g.length;b++)for(var w=(p?f:d)/g[b],x=0;x<g[b];x++){var S={};p?(S.startAngle=c+v*b,S.endAngle=c+v*(b+1),S.r0=s+w*x,S.r=s+w*(x+1)):(S.startAngle=c+w*x,S.endAngle=c+w*(x+1),S.r0=s+v*b,S.r=s+v*(b+1)),S.clockwise=o.clockwise,S.cx=o.cx,S.cy=o.cy,n.push(S)}}function divideRect(o,a,n){for(var s=o.width,l=o.height,c=s>l,u=getDividingGrids([s,l],c?0:1,a),d=c?"width":"height",h=c?"height":"width",f=c?"x":"y",p=c?"y":"x",g=o[d]/u.length,v=0;v<u.length;v++)for(var b=o[h]/u[v],w=0;w<u[v];w++){var x={};x[f]=v*g,x[p]=w*b,x[d]=g,x[h]=b,x.x+=o.x,x.y+=o.y,n.push(x)}}function crossProduct2d(o,a,n,s){return o*s-n*a}function lineLineIntersect(o,a,n,s,l,c,u,d){var h=n-o,f=s-a,p=u-l,g=d-c,v=crossProduct2d(p,g,h,f);if(Math.abs(v)<1e-6)return null;var b=o-l,w=a-c,x=crossProduct2d(b,w,p,g)/v;return x<0||x>1?null:new Point(x*h+o,x*f+a)}function projPtOnLine(o,a,n){var s=new Point;Point.sub(s,n,a),s.normalize();var l=new Point;Point.sub(l,o,a);var c=l.dot(s);return c}function addToPoly(o,a){var n=o[o.length-1];n&&n[0]===a[0]&&n[1]===a[1]||o.push(a)}function splitPolygonByLine(o,a,n){for(var s=o.length,l=[],c=0;c<s;c++){var u=o[c],d=o[(c+1)%s],h=lineLineIntersect(u[0],u[1],d[0],d[1],a.x,a.y,n.x,n.y);h&&l.push({projPt:projPtOnLine(h,a,n),pt:h,idx:c})}if(l.length<2)return[{points:o},{points:o}];l.sort(function(S,E){return S.projPt-E.projPt});var f=l[0],p=l[l.length-1];if(p.idx<f.idx){var g=f;f=p,p=g}for(var v=[f.pt.x,f.pt.y],b=[p.pt.x,p.pt.y],w=[v],x=[b],c=f.idx+1;c<=p.idx;c++)addToPoly(w,o[c].slice());addToPoly(w,b),addToPoly(w,v);for(var c=p.idx+1;c<=f.idx+s;c++)addToPoly(x,o[c%s].slice());return addToPoly(x,v),addToPoly(x,b),[{points:w},{points:x}]}function binaryDividePolygon(o){var a=o.points,n=[],s=[];fromPoints(a,n,s);var l=new BoundingRect(n[0],n[1],s[0]-n[0],s[1]-n[1]),c=l.width,u=l.height,d=l.x,h=l.y,f=new Point,p=new Point;return c>u?(f.x=p.x=d+c/2,f.y=h,p.y=h+u):(f.y=p.y=h+u/2,f.x=d,p.x=d+c),splitPolygonByLine(a,f,p)}function binaryDivideRecursive(o,a,n,s){if(n===1)s.push(a);else{var l=Math.floor(n/2),c=o(a);binaryDivideRecursive(o,c[0],l,s),binaryDivideRecursive(o,c[1],n-l,s)}return s}function clone(o,a){for(var n=[],s=0;s<a;s++)n.push(clonePath(o));return n}function copyPathProps(o,a){a.setStyle(o.style),a.z=o.z,a.z2=o.z2,a.zlevel=o.zlevel}function polygonConvert(o){for(var a=[],n=0;n<o.length;)a.push([o[n++],o[n++]]);return a}function split(o,a){var n=[],s=o.shape,l;switch(o.type){case"rect":divideRect(s,a,n),l=Rect$2;break;case"sector":divideSector(s,a,n),l=Sector;break;case"circle":divideSector({r0:0,r:s.r,startAngle:0,endAngle:Math.PI*2,cx:s.cx,cy:s.cy},a,n),l=Sector;break;default:var c=o.getComputedTransform(),u=c?Math.sqrt(Math.max(c[0]*c[0]+c[1]*c[1],c[2]*c[2]+c[3]*c[3])):1,d=map$1(pathToPolygons(o.getUpdatedPathProxy(),u),function(E){return polygonConvert(E)}),h=d.length;if(h===0)binaryDivideRecursive(binaryDividePolygon,{points:d[0]},a,n);else if(h===a)for(var f=0;f<h;f++)n.push({points:d[f]});else{var p=0,g=map$1(d,function(E){var T=[],C=[];fromPoints(E,T,C);var A=(C[1]-T[1])*(C[0]-T[0]);return p+=A,{poly:E,area:A}});g.sort(function(E,T){return T.area-E.area});for(var v=a,f=0;f<h;f++){var b=g[f];if(v<=0)break;var w=f===h-1?v:Math.ceil(b.area/p*a);w<0||(binaryDivideRecursive(binaryDividePolygon,{points:b.poly},w,n),v-=w)}}l=Polygon;break}if(!l)return clone(o,a);for(var x=[],f=0;f<n.length;f++){var S=new l;S.setShape(n[f]),copyPathProps(o,S),x.push(S)}return x}function alignSubpath(o,a){var n=o.length,s=a.length;if(n===s)return[o,a];for(var l=[],c=[],u=n<s?o:a,d=Math.min(n,s),h=Math.abs(s-n)/6,f=(d-2)/6,p=Math.ceil(h/f)+1,g=[u[0],u[1]],v=h,b=2;b<d;){var w=u[b-2],x=u[b-1],S=u[b++],E=u[b++],T=u[b++],C=u[b++],A=u[b++],R=u[b++];if(v<=0){g.push(S,E,T,C,A,R);continue}for(var j=Math.min(v,p-1)+1,D=1;D<=j;D++){var O=D/j;cubicSubdivide(w,S,T,A,O,l),cubicSubdivide(x,E,C,R,O,c),w=l[3],x=c[3],g.push(l[1],c[1],l[2],c[2],w,x),S=l[5],E=c[5],T=l[6],C=c[6]}v-=j-1}return u===o?[g,a]:[o,g]}function createSubpath(o,a){for(var n=o.length,s=o[n-2],l=o[n-1],c=[],u=0;u<a.length;)c[u++]=s,c[u++]=l;return c}function alignBezierCurves(o,a){for(var n,s,l,c=[],u=[],d=0;d<Math.max(o.length,a.length);d++){var h=o[d],f=a[d],p=void 0,g=void 0;h?f?(n=alignSubpath(h,f),p=n[0],g=n[1],s=p,l=g):(g=createSubpath(l||h,h),p=h):(p=createSubpath(s||f,f),g=f),c.push(p),u.push(g)}return[c,u]}function centroid(o){for(var a=0,n=0,s=0,l=o.length,c=0,u=l-2;c<l;u=c,c+=2){var d=o[u],h=o[u+1],f=o[c],p=o[c+1],g=d*p-f*h;a+=g,n+=(d+f)*g,s+=(h+p)*g}return a===0?[o[0]||0,o[1]||0]:[n/a/3,s/a/3,a]}function findBestRingOffset(o,a,n,s){for(var l=(o.length-2)/6,c=1/0,u=0,d=o.length,h=d-2,f=0;f<l;f++){for(var p=f*6,g=0,v=0;v<d;v+=2){var b=v===0?p:(p+v-2)%h+2,w=o[b]-n[0],x=o[b+1]-n[1],S=a[v]-s[0],E=a[v+1]-s[1],T=S-w,C=E-x;g+=T*T+C*C}g<c&&(c=g,u=f)}return u}function reverse(o){for(var a=[],n=o.length,s=0;s<n;s+=2)a[s]=o[n-s-2],a[s+1]=o[n-s-1];return a}function findBestMorphingRotation(o,a,n,s){for(var l=[],c,u=0;u<o.length;u++){var d=o[u],h=a[u],f=centroid(d),p=centroid(h);c==null&&(c=f[2]<0!=p[2]<0);var g=[],v=[],b=0,w=1/0,x=[],S=d.length;c&&(d=reverse(d));for(var E=findBestRingOffset(d,h,f,p)*6,T=S-2,C=0;C<T;C+=2){var A=(E+C)%T+2;g[C+2]=d[A]-f[0],g[C+3]=d[A+1]-f[1]}g[0]=d[E]-f[0],g[1]=d[E+1]-f[1];for(var R=s/n,j=-s/2;j<=s/2;j+=R){for(var D=Math.sin(j),O=Math.cos(j),H=0,C=0;C<d.length;C+=2){var q=g[C],Y=g[C+1],te=h[C]-p[0],ee=h[C+1]-p[1],re=te*O-ee*D,ne=te*D+ee*O;x[C]=re,x[C+1]=ne;var ce=re-q,ve=ne-Y;H+=ce*ce+ve*ve}if(H<w){w=H,b=j;for(var be=0;be<x.length;be++)v[be]=x[be]}}l.push({from:g,to:v,fromCp:f,toCp:p,rotation:-b})}return l}function isCombineMorphing(o){return o.__isCombineMorphing}var SAVED_METHOD_PREFIX="__mOriginal_";function saveAndModifyMethod(o,a,n){var s=SAVED_METHOD_PREFIX+a,l=o[s]||o[a];o[s]||(o[s]=o[a]);var c=n.replace,u=n.after,d=n.before;o[a]=function(){var h=arguments,f;return d&&d.apply(this,h),c?f=c.apply(this,h):f=l.apply(this,h),u&&u.apply(this,h),f}}function restoreMethod(o,a){var n=SAVED_METHOD_PREFIX+a;o[n]&&(o[a]=o[n],o[n]=null)}function applyTransformOnBeziers(o,a){for(var n=0;n<o.length;n++)for(var s=o[n],l=0;l<s.length;){var c=s[l],u=s[l+1];s[l++]=a[0]*c+a[2]*u+a[4],s[l++]=a[1]*c+a[3]*u+a[5]}}function prepareMorphPath(o,a){var n=o.getUpdatedPathProxy(),s=a.getUpdatedPathProxy(),l=alignBezierCurves(pathToBezierCurves(n),pathToBezierCurves(s)),c=l[0],u=l[1],d=o.getComputedTransform(),h=a.getComputedTransform();function f(){this.transform=null}d&&applyTransformOnBeziers(c,d),h&&applyTransformOnBeziers(u,h),saveAndModifyMethod(a,"updateTransform",{replace:f}),a.transform=null;var p=findBestMorphingRotation(c,u,10,Math.PI),g=[];saveAndModifyMethod(a,"buildPath",{replace:function(v){for(var b=a.__morphT,w=1-b,x=[],S=0;S<p.length;S++){var E=p[S],T=E.from,C=E.to,A=E.rotation*b,R=E.fromCp,j=E.toCp,D=Math.sin(A),O=Math.cos(A);lerp$1(x,R,j,b);for(var H=0;H<T.length;H+=2){var q=T[H],Y=T[H+1],te=C[H],ee=C[H+1],re=q*w+te*b,ne=Y*w+ee*b;g[H]=re*O-ne*D+x[0],g[H+1]=re*D+ne*O+x[1]}var ce=g[0],ve=g[1];v.moveTo(ce,ve);for(var H=2;H<T.length;){var te=g[H++],ee=g[H++],be=g[H++],me=g[H++],ae=g[H++],pe=g[H++];ce===te&&ve===ee&&be===ae&&me===pe?v.lineTo(ae,pe):v.bezierCurveTo(te,ee,be,me,ae,pe),ce=ae,ve=pe}}}})}function morphPath(o,a,n){if(!o||!a)return a;var s=n.done,l=n.during;prepareMorphPath(o,a),a.__morphT=0;function c(){restoreMethod(a,"buildPath"),restoreMethod(a,"updateTransform"),a.__morphT=-1,a.createPathProxy(),a.dirtyShape()}return a.animateTo({__morphT:1},defaults({during:function(u){a.dirtyShape(),l&&l(u)},done:function(){c(),s&&s()}},n)),a}function hilbert(o,a,n,s,l,c){var u=16;o=l===n?0:Math.round(32767*(o-n)/(l-n)),a=c===s?0:Math.round(32767*(a-s)/(c-s));for(var d=0,h,f=(1<<u)/2;f>0;f/=2){var p=0,g=0;(o&f)>0&&(p=1),(a&f)>0&&(g=1),d+=f*f*(3*p^g),g===0&&(p===1&&(o=f-1-o,a=f-1-a),h=o,o=a,a=h)}return d}function sortPaths(o){var a=1/0,n=1/0,s=-1/0,l=-1/0,c=map$1(o,function(d){var h=d.getBoundingRect(),f=d.getComputedTransform(),p=h.x+h.width/2+(f?f[4]:0),g=h.y+h.height/2+(f?f[5]:0);return a=Math.min(p,a),n=Math.min(g,n),s=Math.max(p,s),l=Math.max(g,l),[p,g]}),u=map$1(c,function(d,h){return{cp:d,z:hilbert(d[0],d[1],a,n,s,l),path:o[h]}});return u.sort(function(d,h){return d.z-h.z}).map(function(d){return d.path})}function defaultDividePath(o){return split(o.path,o.count)}function createEmptyReturn(){return{fromIndividuals:[],toIndividuals:[],count:0}}function combineMorph(o,a,n){var s=[];function l(R){for(var j=0;j<R.length;j++){var D=R[j];isCombineMorphing(D)?l(D.childrenRef()):D instanceof Path&&s.push(D)}}l(o);var c=s.length;if(!c)return createEmptyReturn();var u=n.dividePath||defaultDividePath,d=u({path:a,count:c});if(d.length!==c)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn();s=sortPaths(s),d=sortPaths(d);for(var h=n.done,f=n.during,p=n.individualDelay,g=new Transformable,v=0;v<c;v++){var b=s[v],w=d[v];w.parent=a,w.copyTransform(g),p||prepareMorphPath(b,w)}a.__isCombineMorphing=!0,a.childrenRef=function(){return d};function x(R){for(var j=0;j<d.length;j++)d[j].addSelfToZr(R)}saveAndModifyMethod(a,"addSelfToZr",{after:function(R){x(R)}}),saveAndModifyMethod(a,"removeSelfFromZr",{after:function(R){for(var j=0;j<d.length;j++)d[j].removeSelfFromZr(R)}});function S(){a.__isCombineMorphing=!1,a.__morphT=-1,a.childrenRef=null,restoreMethod(a,"addSelfToZr"),restoreMethod(a,"removeSelfFromZr")}var E=d.length;if(p)for(var T=E,C=function(){T--,T===0&&(S(),h&&h())},v=0;v<E;v++){var A=p?defaults({delay:(n.delay||0)+p(v,E,s[v],d[v]),done:C},n):n;morphPath(s[v],d[v],A)}else a.__morphT=0,a.animateTo({__morphT:1},defaults({during:function(R){for(var j=0;j<E;j++){var D=d[j];D.__morphT=a.__morphT,D.dirtyShape()}f&&f(R)},done:function(){S();for(var R=0;R<o.length;R++)restoreMethod(o[R],"updateTransform");h&&h()}},n));return a.__zr&&x(a.__zr),{fromIndividuals:s,toIndividuals:d,count:E}}function separateMorph(o,a,n){var s=a.length,l=[],c=n.dividePath||defaultDividePath;function u(b){for(var w=0;w<b.length;w++){var x=b[w];isCombineMorphing(x)?u(x.childrenRef()):x instanceof Path&&l.push(x)}}if(isCombineMorphing(o)){u(o.childrenRef());var d=l.length;if(d<s)for(var h=0,f=d;f<s;f++)l.push(clonePath(l[h++%d]));l.length=s}else{l=c({path:o,count:s});for(var p=o.getComputedTransform(),f=0;f<l.length;f++)l[f].setLocalTransform(p);if(l.length!==s)return console.error("Invalid morphing: unmatched splitted path"),createEmptyReturn()}l=sortPaths(l),a=sortPaths(a);for(var g=n.individualDelay,f=0;f<s;f++){var v=g?defaults({delay:(n.delay||0)+g(f,s,l[f],a[f])},n):n;morphPath(l[f],a[f],v)}return{fromIndividuals:l,toIndividuals:a,count:a.length}}function isMultiple(o){return isArray$1(o[0])}function prepareMorphBatches(o,a){for(var n=[],s=o.length,l=0;l<s;l++)n.push({one:o[l],many:[]});for(var l=0;l<a.length;l++){var c=a[l].length,u=void 0;for(u=0;u<c;u++)n[u%s].many.push(a[l][u])}for(var d=0,l=s-1;l>=0;l--)if(!n[l].many.length){var h=n[d].many;if(h.length<=1)if(d)d=0;else return n;var c=h.length,f=Math.ceil(c/2);n[l].many=h.slice(f,c),n[d].many=h.slice(0,f),d++}return n}var pathDividers={clone:function(o){for(var a=[],n=1-Math.pow(1-o.path.style.opacity,1/o.count),s=0;s<o.count;s++){var l=clonePath(o.path);l.setStyle("opacity",n),a.push(l)}return a},split:null};function applyMorphAnimation(o,a,n,s,l,c){if(!o.length||!a.length)return;var u=getAnimationConfig("update",s,l);if(!(u&&u.duration>0))return;var d=s.getModel("universalTransition").get("delay"),h=Object.assign({setToFinal:!0},u),f,p;isMultiple(o)&&(f=o,p=a),isMultiple(a)&&(f=a,p=o);function g(E,T,C,A,R){var j=E.many,D=E.one;if(j.length===1&&!R){var O=T?j[0]:D,H=T?D:j[0];if(isCombineMorphing(O))g({many:[O],one:H},!0,C,A,!0);else{var q=d?defaults({delay:d(C,A)},h):h;morphPath(O,H,q),c(O,H,O,H,q)}}else for(var Y=defaults({dividePath:pathDividers[n],individualDelay:d&&function(ve,be,me,ae){return d(ve+C,A)}},h),te=T?combineMorph(j,D,Y):separateMorph(D,j,Y),ee=te.fromIndividuals,re=te.toIndividuals,ne=ee.length,ce=0;ce<ne;ce++){var q=d?defaults({delay:d(ce,ne)},h):h;c(ee[ce],re[ce],T?j[ce]:E.one,T?E.one:j[ce],q)}}for(var v=f?f===o:o.length>a.length,b=f?prepareMorphBatches(p,f):prepareMorphBatches(v?a:o,[v?o:a]),w=0,x=0;x<b.length;x++)w+=b[x].many.length;for(var S=0,x=0;x<b.length;x++)g(b[x],v,S,w),S+=b[x].many.length}function getPathList(o){if(!o)return[];if(isArray$1(o)){for(var a=[],n=0;n<o.length;n++)a.push(getPathList(o[n]));return a}var s=[];return o.traverse(function(l){l instanceof Path&&!l.disableMorphing&&!l.invisible&&!l.ignore&&s.push(l)}),s}var DATA_COUNT_THRESHOLD=1e4,TRANSITION_NONE=0,TRANSITION_P2C=1,TRANSITION_C2P=2,getUniversalTransitionGlobalStore=makeInner();function getDimension(o,a){for(var n=o.dimensions,s=0;s<n.length;s++){var l=o.getDimensionInfo(n[s]);if(l&&l.otherDims[a]===0)return n[s]}}function getValueByDimension(o,a,n){var s=o.getDimensionInfo(n),l=s&&s.ordinalMeta;if(s){var c=o.get(s.name,a);return l&&l.categories[c]||c+""}}function getGroupId(o,a,n,s){var l=s?"itemChildGroupId":"itemGroupId",c=getDimension(o,l);if(c){var u=getValueByDimension(o,a,c);return u}var d=o.getRawDataItem(a),h=s?"childGroupId":"groupId";if(d&&d[h])return d[h]+"";if(!s)return n||o.getId(a)}function flattenDataDiffItems(o){var a=[];return each$f(o,function(n){var s=n.data,l=n.dataGroupId;if(s.count()>DATA_COUNT_THRESHOLD){process.env.NODE_ENV!=="production"&&warn("Universal transition is disabled on large data > 10k.");return}for(var c=s.getIndices(),u=0;u<c.length;u++)a.push({data:s,groupId:getGroupId(s,u,l,!1),childGroupId:getGroupId(s,u,l,!0),divide:n.divide,dataIndex:u})}),a}function fadeInElement(o,a,n){o.traverse(function(s){s instanceof Path&&initProps(s,{style:{opacity:0}},a,{dataIndex:n,isFrom:!0})})}function removeEl(o){if(o.parent){var a=o.getComputedTransform();o.setLocalTransform(a),o.parent.remove(o)}}function stopAnimation(o){o.stopAnimation(),o.isGroup&&o.traverse(function(a){a.stopAnimation()})}function animateElementStyles(o,a,n){var s=getAnimationConfig("update",n,a);s&&o.traverse(function(l){if(l instanceof Displayable){var c=getOldStyle(l);c&&l.animateFrom({style:c},s)}})}function isAllIdSame(o,a){var n=o.length;if(n!==a.length)return!1;for(var s=0;s<n;s++){var l=o[s],c=a[s];if(l.data.getId(l.dataIndex)!==c.data.getId(c.dataIndex))return!1}return!0}function transitionBetween(o,a,n){var s=flattenDataDiffItems(o),l=flattenDataDiffItems(a);function c(C,A,R,j,D){(R||C)&&A.animateFrom({style:R&&R!==C?extend(extend({},R.style),C.style):C.style},D)}var u=!1,d=TRANSITION_NONE,h=createHashMap(),f=createHashMap();s.forEach(function(C){C.groupId&&h.set(C.groupId,!0),C.childGroupId&&f.set(C.childGroupId,!0)});for(var p=0;p<l.length;p++){var g=l[p].groupId;if(f.get(g)){d=TRANSITION_P2C;break}var v=l[p].childGroupId;if(v&&h.get(v)){d=TRANSITION_C2P;break}}function b(C,A){return function(R){var j=R.data,D=R.dataIndex;return A?j.getId(D):C?d===TRANSITION_P2C?R.childGroupId:R.groupId:d===TRANSITION_C2P?R.childGroupId:R.groupId}}var w=isAllIdSame(s,l),x={};if(!w)for(var p=0;p<l.length;p++){var S=l[p],E=S.data.getItemGraphicEl(S.dataIndex);E&&(x[E.id]=!0)}function T(C,A){var R=s[A],j=l[C],D=j.data.hostModel,O=R.data.getItemGraphicEl(R.dataIndex),H=j.data.getItemGraphicEl(j.dataIndex);if(O===H){H&&animateElementStyles(H,j.dataIndex,D);return}O&&x[O.id]||H&&(stopAnimation(H),O?(stopAnimation(O),removeEl(O),u=!0,applyMorphAnimation(getPathList(O),getPathList(H),j.divide,D,C,c)):fadeInElement(H,D,C))}new DataDiffer(s,l,b(!0,w),b(!1,w),null,"multiple").update(T).updateManyToOne(function(C,A){var R=l[C],j=R.data,D=j.hostModel,O=j.getItemGraphicEl(R.dataIndex),H=filter(map$1(A,function(q){return s[q].data.getItemGraphicEl(s[q].dataIndex)}),function(q){return q&&q!==O&&!x[q.id]});O&&(stopAnimation(O),H.length?(each$f(H,function(q){stopAnimation(q),removeEl(q)}),u=!0,applyMorphAnimation(getPathList(H),getPathList(O),R.divide,D,C,c)):fadeInElement(O,D,R.dataIndex))}).updateOneToMany(function(C,A){var R=s[A],j=R.data.getItemGraphicEl(R.dataIndex);if(!(j&&x[j.id])){var D=filter(map$1(C,function(H){return l[H].data.getItemGraphicEl(l[H].dataIndex)}),function(H){return H&&H!==j}),O=l[C[0]].data.hostModel;D.length&&(each$f(D,function(H){return stopAnimation(H)}),j?(stopAnimation(j),removeEl(j),u=!0,applyMorphAnimation(getPathList(j),getPathList(D),R.divide,O,C[0],c)):each$f(D,function(H){return fadeInElement(H,O,C[0])}))}}).updateManyToMany(function(C,A){new DataDiffer(A,C,function(R){return s[R].data.getId(s[R].dataIndex)},function(R){return l[R].data.getId(l[R].dataIndex)}).update(function(R,j){T(C[R],A[j])}).execute()}).execute(),u&&each$f(a,function(C){var A=C.data,R=A.hostModel,j=R&&n.getViewOfSeriesModel(R),D=getAnimationConfig("update",R,0);j&&R.isAnimationEnabled()&&D&&D.duration>0&&j.group.traverse(function(O){O instanceof Path&&!O.animators.length&&O.animateFrom({style:{opacity:0}},D)})})}function getSeriesTransitionKey(o){var a=o.getModel("universalTransition").get("seriesKey");return a||o.id}function convertArraySeriesKeyToString(o){return isArray$1(o)?o.sort().join(","):o}function getDivideShapeFromData(o){if(o.hostModel)return o.hostModel.getModel("universalTransition").get("divideShape")}function findTransitionSeriesBatches(o,a){var n=createHashMap(),s=createHashMap(),l=createHashMap();each$f(o.oldSeries,function(u,d){var h=o.oldDataGroupIds[d],f=o.oldData[d],p=getSeriesTransitionKey(u),g=convertArraySeriesKeyToString(p);s.set(g,{dataGroupId:h,data:f}),isArray$1(p)&&each$f(p,function(v){l.set(v,{key:g,dataGroupId:h,data:f})})});function c(u){n.get(u)&&warn("Duplicated seriesKey in universalTransition "+u)}return each$f(a.updatedSeries,function(u){if(u.isUniversalTransitionEnabled()&&u.isAnimationEnabled()){var d=u.get("dataGroupId"),h=u.getData(),f=getSeriesTransitionKey(u),p=convertArraySeriesKeyToString(f),g=s.get(p);if(g)process.env.NODE_ENV!=="production"&&c(p),n.set(p,{oldSeries:[{dataGroupId:g.dataGroupId,divide:getDivideShapeFromData(g.data),data:g.data}],newSeries:[{dataGroupId:d,divide:getDivideShapeFromData(h),data:h}]});else if(isArray$1(f)){process.env.NODE_ENV!=="production"&&c(p);var v=[];each$f(f,function(x){var S=s.get(x);S.data&&v.push({dataGroupId:S.dataGroupId,divide:getDivideShapeFromData(S.data),data:S.data})}),v.length&&n.set(p,{oldSeries:v,newSeries:[{dataGroupId:d,data:h,divide:getDivideShapeFromData(h)}]})}else{var b=l.get(f);if(b){var w=n.get(b.key);w||(w={oldSeries:[{dataGroupId:b.dataGroupId,data:b.data,divide:getDivideShapeFromData(b.data)}],newSeries:[]},n.set(b.key,w)),w.newSeries.push({dataGroupId:d,data:h,divide:getDivideShapeFromData(h)})}}}}),n}function querySeries(o,a){for(var n=0;n<o.length;n++){var s=a.seriesIndex!=null&&a.seriesIndex===o[n].seriesIndex||a.seriesId!=null&&a.seriesId===o[n].id;if(s)return n}}function transitionSeriesFromOpt(o,a,n,s){var l=[],c=[];each$f(normalizeToArray(o.from),function(u){var d=querySeries(a.oldSeries,u);d>=0&&l.push({dataGroupId:a.oldDataGroupIds[d],data:a.oldData[d],divide:getDivideShapeFromData(a.oldData[d]),groupIdDim:u.dimension})}),each$f(normalizeToArray(o.to),function(u){var d=querySeries(n.updatedSeries,u);if(d>=0){var h=n.updatedSeries[d].getData();c.push({dataGroupId:a.oldDataGroupIds[d],data:h,divide:getDivideShapeFromData(h),groupIdDim:u.dimension})}}),l.length>0&&c.length>0&&transitionBetween(l,c,s)}function installUniversalTransition(o){o.registerUpdateLifecycle("series:beforeupdate",function(a,n,s){each$f(normalizeToArray(s.seriesTransition),function(l){each$f(normalizeToArray(l.to),function(c){for(var u=s.updatedSeries,d=0;d<u.length;d++)(c.seriesIndex!=null&&c.seriesIndex===u[d].seriesIndex||c.seriesId!=null&&c.seriesId===u[d].id)&&(u[d][SERIES_UNIVERSAL_TRANSITION_PROP]=!0)})})}),o.registerUpdateLifecycle("series:transition",function(a,n,s){var l=getUniversalTransitionGlobalStore(n);if(l.oldSeries&&s.updatedSeries&&s.optionChanged){var c=s.seriesTransition;if(c)each$f(normalizeToArray(c),function(b){transitionSeriesFromOpt(b,l,s,n)});else{var u=findTransitionSeriesBatches(l,s);each$f(u.keys(),function(b){var w=u.get(b);transitionBetween(w.oldSeries,w.newSeries,n)})}each$f(s.updatedSeries,function(b){b[SERIES_UNIVERSAL_TRANSITION_PROP]&&(b[SERIES_UNIVERSAL_TRANSITION_PROP]=!1)})}for(var d=a.getSeries(),h=l.oldSeries=[],f=l.oldDataGroupIds=[],p=l.oldData=[],g=0;g<d.length;g++){var v=d[g].getData();v.count()<DATA_COUNT_THRESHOLD&&(h.push(d[g]),f.push(d[g].get("dataGroupId")),p.push(v))}})}use([install$R]);use([install$S]);use([install$Q,install$P,install$O,install$M,install$K,install$I,install$H,install$G,install$F,install$E,install$D,install$B,install$A,install$z,install$y,install$x,install$w,install$v,install$u,install$t,install$s,install$r]);use(install$p);use(install$o);use(install$J);use(install$n);use(install$C);use(install$m);use(install$l);use(install$j);use(install$i);use(install$q);use(install$h);use(install$g);use(install$f);use(install$e);use(install$d);use(install$c);use(install$9);use(install$6);use(install$8);use(install$7);use(install$3);use(install$5);use(install$4);use(install$2);use(install$1);use(install);use(installUniversalTransition);use(installLabelLayout);const echarts=Object.freeze(Object.defineProperty({__proto__:null,Axis,ChartView,ComponentModel,ComponentView,List:SeriesData,Model,PRIORITY,SeriesModel,color,connect,dataTool,dependencies,disConnect,disconnect,dispose,env,extendChartView,extendComponentModel,extendComponentView,extendSeriesModel,format,getCoordinateSystemDimensions,getInstanceByDom,getInstanceById,getMap,graphic,helper,init:init$1,innerDrawElementOnCanvas:brushSingle,matrix,number,parseGeoJSON,parseGeoJson:parseGeoJSON,registerAction,registerCoordinateSystem,registerLayout,registerLoading,registerLocale,registerMap:registerMap$1,registerPostInit,registerPostUpdate,registerPreprocessor,registerProcessor,registerTheme,registerTransform,registerUpdateLifecycle,registerVisual,setCanvasCreator,setPlatformAPI,throttle,time,use,util,vector,version,zrUtil:util$1,zrender},Symbol.toStringTag,{value:"Module"}));var lib={},sensorPool={},id={},hasRequiredId;function requireId(){return hasRequiredId||(hasRequiredId=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=1,n=function(){return"".concat(a++)};o.default=n}(id)),id}var sensors={},object={},debounce={},hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var a=function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,c=null;return function(){for(var u=this,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];clearTimeout(c),c=setTimeout(function(){s.apply(u,h)},l)}};o.default=a}(debounce)),debounce}var constant={},hasRequiredConstant;function requireConstant(){if(hasRequiredConstant)return constant;hasRequiredConstant=1,Object.defineProperty(constant,"__esModule",{value:!0}),constant.SizeSensorId=constant.SensorTabIndex=constant.SensorClassName=void 0;var o="size-sensor-id";constant.SizeSensorId=o;var a="size-sensor-object";constant.SensorClassName=a;var n="-1";return constant.SensorTabIndex=n,constant}var hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,Object.defineProperty(object,"__esModule",{value:!0}),object.createSensor=void 0;var o=n(requireDebounce()),a=requireConstant();function n(l){return l&&l.__esModule?l:{default:l}}var s=function(c,u){var d=void 0,h=[],f=function(){getComputedStyle(c).position==="static"&&(c.style.position="relative");var x=document.createElement("object");return x.onload=function(){x.contentDocument.defaultView.addEventListener("resize",p),p()},x.style.display="block",x.style.position="absolute",x.style.top="0",x.style.left="0",x.style.height="100%",x.style.width="100%",x.style.overflow="hidden",x.style.pointerEvents="none",x.style.zIndex="-1",x.style.opacity="0",x.setAttribute("class",a.SensorClassName),x.setAttribute("tabindex",a.SensorTabIndex),x.type="text/html",c.appendChild(x),x.data="about:blank",x},p=(0,o.default)(function(){h.forEach(function(w){w(c)})}),g=function(x){d||(d=f()),h.indexOf(x)===-1&&h.push(x)},v=function(){d&&d.parentNode&&(d.contentDocument&&d.contentDocument.defaultView.removeEventListener("resize",p),d.parentNode.removeChild(d),c.removeAttribute(a.SizeSensorId),d=void 0,h=[],u&&u())},b=function(x){var S=h.indexOf(x);S!==-1&&h.splice(S,1),h.length===0&&d&&v()};return{element:c,bind:g,destroy:v,unbind:b}};return object.createSensor=s,object}var resizeObserver={},hasRequiredResizeObserver;function requireResizeObserver(){if(hasRequiredResizeObserver)return resizeObserver;hasRequiredResizeObserver=1,Object.defineProperty(resizeObserver,"__esModule",{value:!0}),resizeObserver.createSensor=void 0;var o=requireConstant(),a=n(requireDebounce());function n(l){return l&&l.__esModule?l:{default:l}}var s=function(c,u){var d=void 0,h=[],f=(0,a.default)(function(){h.forEach(function(w){w(c)})}),p=function(){var x=new ResizeObserver(f);return x.observe(c),f(),x},g=function(x){d||(d=p()),h.indexOf(x)===-1&&h.push(x)},v=function(){d.disconnect(),h=[],d=void 0,c.removeAttribute(o.SizeSensorId),u&&u()},b=function(x){var S=h.indexOf(x);S!==-1&&h.splice(S,1),h.length===0&&d&&v()};return{element:c,bind:g,destroy:v,unbind:b}};return resizeObserver.createSensor=s,resizeObserver}var hasRequiredSensors;function requireSensors(){if(hasRequiredSensors)return sensors;hasRequiredSensors=1,Object.defineProperty(sensors,"__esModule",{value:!0}),sensors.createSensor=void 0;var o=requireObject(),a=requireResizeObserver(),n=typeof ResizeObserver<"u"?a.createSensor:o.createSensor;return sensors.createSensor=n,sensors}var hasRequiredSensorPool;function requireSensorPool(){if(hasRequiredSensorPool)return sensorPool;hasRequiredSensorPool=1,Object.defineProperty(sensorPool,"__esModule",{value:!0}),sensorPool.removeSensor=sensorPool.getSensor=sensorPool.Sensors=void 0;var o=s(requireId()),a=requireSensors(),n=requireConstant();function s(h){return h&&h.__esModule?h:{default:h}}var l={};sensorPool.Sensors=l;function c(h){h&&l[h]&&delete l[h]}var u=function(f){var p=f.getAttribute(n.SizeSensorId);if(p&&l[p])return l[p];var g=(0,o.default)();f.setAttribute(n.SizeSensorId,g);var v=(0,a.createSensor)(f,function(){return c(g)});return l[g]=v,v};sensorPool.getSensor=u;var d=function(f){var p=f.element.getAttribute(n.SizeSensorId);f.destroy(),c(p)};return sensorPool.removeSensor=d,sensorPool}var hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ver=lib.clear=lib.bind=void 0;var o=requireSensorPool(),a=function(c,u){var d=(0,o.getSensor)(c);return d.bind(u),function(){d.unbind(u)}};lib.bind=a;var n=function(c){var u=(0,o.getSensor)(c);(0,o.removeSensor)(u)};lib.clear=n;var s="1.0.2";return lib.ver=s,lib}var libExports=requireLib();function pick(o,a){var n={};return a.forEach(function(s){n[s]=o[s]}),n}function isFunction(o){return typeof o=="function"}function isString$1(o){return typeof o=="string"}var fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function o(a,n){if(a===n)return!0;if(a&&n&&typeof a=="object"&&typeof n=="object"){if(a.constructor!==n.constructor)return!1;var s,l,c;if(Array.isArray(a)){if(s=a.length,s!=n.length)return!1;for(l=s;l--!==0;)if(!o(a[l],n[l]))return!1;return!0}if(a.constructor===RegExp)return a.source===n.source&&a.flags===n.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===n.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===n.toString();if(c=Object.keys(a),s=c.length,s!==Object.keys(n).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[l]))return!1;for(l=s;l--!==0;){var u=c[l];if(!o(a[u],n[u]))return!1}return!0}return a!==a&&n!==n}),fastDeepEqual}var fastDeepEqualExports=requireFastDeepEqual();const isEqual=getDefaultExportFromCjs(fastDeepEqualExports);var EChartsReactCore=function(o){__extends$2(a,o);function a(n){var s=o.call(this,n)||this;return s.echarts=n.echarts,s.ele=null,s.isInitialResize=!0,s}return a.prototype.componentDidMount=function(){this.renderNewEcharts()},a.prototype.componentDidUpdate=function(n){var s=this.props.shouldSetOption;if(!(isFunction(s)&&!s(n,this.props))){if(!isEqual(n.theme,this.props.theme)||!isEqual(n.opts,this.props.opts)){this.dispose(),this.renderNewEcharts();return}var l=this.getEchartsInstance();isEqual(n.onEvents,this.props.onEvents)||(this.offEvents(l,n.onEvents),this.bindEvents(l,this.props.onEvents));var c=["option","notMerge","replaceMerge","lazyUpdate","showLoading","loadingOption"];isEqual(pick(this.props,c),pick(n,c))||this.updateEChartsOption(),(!isEqual(n.style,this.props.style)||!isEqual(n.className,this.props.className))&&this.resize()}},a.prototype.componentWillUnmount=function(){this.dispose()},a.prototype.initEchartsInstance=function(){return __awaiter(this,void 0,void 0,function(){var n=this;return __generator(this,function(s){return[2,new Promise(function(l){n.echarts.init(n.ele,n.props.theme,n.props.opts);var c=n.getEchartsInstance();c.on("finished",function(){var u=n.ele.clientWidth,d=n.ele.clientHeight;n.echarts.dispose(n.ele);var h=__assign({width:u,height:d},n.props.opts);l(n.echarts.init(n.ele,n.props.theme,h))})})]})})},a.prototype.getEchartsInstance=function(){return this.echarts.getInstanceByDom(this.ele)},a.prototype.dispose=function(){if(this.ele){try{libExports.clear(this.ele)}catch(n){console.warn(n)}this.echarts.dispose(this.ele)}},a.prototype.renderNewEcharts=function(){return __awaiter(this,void 0,void 0,function(){var n,s,l,c,u,d,h=this;return __generator(this,function(f){switch(f.label){case 0:return n=this.props,s=n.onEvents,l=n.onChartReady,c=n.autoResize,u=c===void 0?!0:c,[4,this.initEchartsInstance()];case 1:return f.sent(),d=this.updateEChartsOption(),this.bindEvents(d,s||{}),isFunction(l)&&l(d),this.ele&&u&&libExports.bind(this.ele,function(){h.resize()}),[2]}})})},a.prototype.bindEvents=function(n,s){function l(u,d){isString$1(u)&&isFunction(d)&&n.on(u,function(h){d(h,n)})}for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&l(c,s[c])},a.prototype.offEvents=function(n,s){if(s)for(var l in s)isString$1(l)&&n.off(l)},a.prototype.updateEChartsOption=function(){var n=this.props,s=n.option,l=n.notMerge,c=l===void 0?!1:l,u=n.replaceMerge,d=u===void 0?null:u,h=n.lazyUpdate,f=h===void 0?!1:h,p=n.showLoading,g=n.loadingOption,v=g===void 0?null:g,b=this.getEchartsInstance();return b.setOption(s,{notMerge:c,replaceMerge:d,lazyUpdate:f}),p?b.showLoading(v):b.hideLoading(),b},a.prototype.resize=function(){var n=this.getEchartsInstance();if(!this.isInitialResize)try{n.resize({width:"auto",height:"auto"})}catch(s){console.warn(s)}this.isInitialResize=!1},a.prototype.render=function(){var n=this,s=this.props,l=s.style,c=s.className,u=c===void 0?"":c,d=__assign({height:300},l);return React2.createElement("div",{ref:function(h){n.ele=h},style:d,className:"echarts-for-react ".concat(u)})},a}(React2.PureComponent),EChartsReact=function(o){__extends$2(a,o);function a(n){var s=o.call(this,n)||this;return s.echarts=echarts,s}return a}(EChartsReactCore);function RenderChartByType(o){var n,s,l;React2.useRef(null);let a;switch(o.type){case"line":a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#D7D7DB"}},name:o.unit,nameLocation:"end",nameGap:20,nameTextStyle:{color:"#61616B",fontSize:12,lineHeight:16,align:"right"},axisLabel:{formatter:o.formatter,color:"#61616B",fontSize:12,lineHeight:16}},xAxis:{type:"category",boundaryGap:!1,data:o.xAxisName,axisLine:{lineStyle:{color:"#D7D7DB",width:1}},axisLabel:{color:"#61616B",fontSize:12,lineHeight:16}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:o.datasets.map(c=>({stack:"Total",name:c.title??c.name,type:o.type,data:c.value,itemStyle:{color:c.color}}))};break;case"bar":a={tooltip:{trigger:"item",axisPointer:{type:"shadow"}},yAxis:{type:"value",splitLine:{lineStyle:{type:"dashed",color:"#D7D7DB"}},name:o.unit,nameLocation:"end",nameGap:20,nameTextStyle:{color:"#61616B",fontSize:12,lineHeight:16,align:"right"},axisLabel:{formatter:o.formatter,color:"#61616B",fontSize:12,lineHeight:16}},xAxis:{type:"category",boundaryGap:!0,data:o.xAxisName,axisLine:{lineStyle:{color:"#D7D7DB",width:1}},axisLabel:{color:"#61616B",fontSize:12,lineHeight:16,interval:0}},grid:{left:"0%",right:"3%",bottom:"0%",containLabel:!0},series:(n=o.datasets)==null?void 0:n.map(c=>({data:c.value,type:o.type,itemStyle:{color:c.color,borderRadius:[2,2,0,0]},radius:"50%",barMinWidth:8,barMaxWidth:80,barGap:.2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))};break;case"horizontal bar":a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"value",axisLine:{lineStyle:{type:"dotted"}},axisLabel:{formatter:o.formatter}},yAxis:{type:"category",boundaryGap:!1,data:o.yAxisName},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},series:(s=o.datasets)==null?void 0:s.map(c=>({data:c.value,type:"bar",itemStyle:{color:c.color,borderRadius:[2,2,0,0]},radius:"50%",barMinWidth:8,barMaxWidth:80,barGap:.2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))};break;case"scatter":break;case"pie":a={title:{text:o.datasets.map(c=>typeof c.value=="number"?c.value:c.value.reduce((u,d)=>u+d,0)).reduce((c,u)=>c+u,0),left:"center",top:"center",textStyle:{fontSize:"2.4rem",fontWeight:"bold",color:"#18181B",fontFamily:"Inter"}},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:o.type,radius:"50%",padAngle:1,label:{show:!1,position:"center"},emphasis:{label:{show:!1,fontSize:14,fontWeight:"bold"}},data:o.datasets.map(c=>({value:c.value,itemStyle:{color:c.color,borderRadius:4}}))}]};break;case"doughnut":a={title:{text:o.datasets.map(c=>typeof c.value=="number"?c.value:c.value.reduce((u,d)=>u+d,0)).reduce((c,u)=>c+u,0),left:"center",top:"center",textStyle:{fontSize:"2.4rem",fontWeight:"bold",color:"#18181B",fontFamily:"Inter"}},tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:["56%","90%"],center:["50%","50%"],avoidLabelOverlap:!1,padAngle:1,label:{show:!1,position:"center"},emphasis:{label:{show:!1,fontSize:14,fontWeight:"bold"}},data:o.datasets.map(c=>({name:c.title,value:c.value,itemStyle:{color:c.color,borderRadius:4}}))}]};break;case"bubble":break;case"radar":a={radar:{indicator:o.datasets.map(()=>({}))},series:(l=o.datasets)==null?void 0:l.map(c=>({type:o.type,itemStyle:{color:c.color,borderRadius:[2,2,0,0]},radius:"50%",barMinWidth:8,barMaxWidth:80,barGap:.2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}))};break}switch(o.legend){case"top":return jsxRuntimeExports.jsxs("div",{className:"col",style:o.style,children:[jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flexWrap:"wrap"},children:o.datasets.map(c=>o.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):o.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))}),jsxRuntimeExports.jsx(EChartsReact,{onEvents:{click:o.handleChartClick},notMerge:!0,lazyUpdate:!0,option:a,style:{...["bar","line"].some(c=>o.type.includes(c))?{width:"100%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>o.type.includes(c))?"5 / 3":"1 / 1"}})]});case"bottom":return jsxRuntimeExports.jsxs("div",{className:"col",style:o.style,children:[jsxRuntimeExports.jsx(EChartsReact,{notMerge:!0,lazyUpdate:!0,option:a,style:{...["bar","line"].some(c=>o.type.includes(c))?{width:"100%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>o.type.includes(c))?"5 / 3":"1 / 1"}}),jsxRuntimeExports.jsx("div",{className:"row",style:{gap:"1.6rem",flexWrap:"wrap"},children:o.datasets.map(c=>o.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):o.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))})]});case"left":return jsxRuntimeExports.jsxs("div",{className:"row",style:o.style,children:[jsxRuntimeExports.jsx("div",{className:"col",style:{gap:"1.6rem",flex:1},children:o.datasets.map(c=>o.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):o.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))}),jsxRuntimeExports.jsx(EChartsReact,{notMerge:!0,lazyUpdate:!0,option:a,style:{...["bar","line"].some(c=>o.type.includes(c))?{width:"70%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>o.type.includes(c))?"5 / 3":"1 / 1"}})]});case"right":default:return jsxRuntimeExports.jsxs("div",{className:"row",style:o.style,children:[jsxRuntimeExports.jsx(EChartsReact,{onEvents:{click:o.handleChartClick},notMerge:!0,lazyUpdate:!0,option:a,style:{...["bar","line"].some(c=>o.type.includes(c))?{width:"70%"}:{height:"100%"},aspectRatio:["bar","line"].some(c=>o.type.includes(c))?"5 / 3":"1 / 1"}}),jsxRuntimeExports.jsx("div",{className:"col",style:{gap:"1.6rem",flex:1,minWidth:"9.8rem"},children:o.datasets.map(c=>o.type.includes("bar")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:"1.6rem",width:"1.6rem",borderRadius:"0.4rem",backgroundColor:c.color}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:c.name})]},c.id):o.type.includes("line")?jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"fill/business/line-chart",size:"2rem",color:c.color}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id):jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx("div",{style:{height:8,width:8,borderRadius:"50%",backgroundColor:c.color}}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[c.name,": ",c.value]})]},c.id))})]})}}const ChartById=React2.forwardRef(({searchRaw="",style={},chartStyle={},...props},ref)=>{var o,a;const now=new Date,[result,setResult]=React2.useState([]),[chartItem,setChartItem]=React2.useState(),{t}=useTranslation(),listTime=React2.useMemo(()=>{if(!chartItem)return[];switch(chartItem==null?void 0:chartItem.Type){case"line":case"bar":case"horizontal bar":return[{id:"thisWeek",name:t("thisWeek")},{id:"lastWeek",name:t("lastWeek")},{id:"thisMonth",name:t("thisMonth")},{id:"lastMonth",name:t("lastMonth")},{id:"lastThreeMonth",name:t("lastThreeMonth")},{id:"lastSixMonth",name:t("lastSixMonth")},{id:"thisYear",name:t("thisYear")}];default:return[7,30,45,60,90,...props.allowGetAll?[1/0]:[]].map((n,s)=>({id:n,name:s===5?t("all"):t("lastNumberOfDay",{day:n})}))}},[chartItem==null?void 0:chartItem.Type]),[selectedTime,setSelectedTime]=React2.useState(),groupByRegex=/(GROUPBY\s+\d+\s+(?:@\w+\s*)+)/g,datasets=React2.useMemo(()=>{const tmp=chartItem==null?void 0:chartItem.Setting.datasets.map(e=>{try{const data=result;switch(selectedTime){case"thisWeek":case"lastWeek":var listData=[1,2,3,4,5,6,0],filterByTime=(n,s)=>parseInt(n._dayofweek)===s;break;case"thisMonth":case"lastMonth":listData=[0,1,2,3],filterByTime=(n,s)=>s===3?parseInt(n._dayofmonth)>=s:parseInt(n._dayofmonth)===s;break;case"lastThreeMonth":listData=[new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()],filterByTime=(n,s)=>parseInt(n._monthofyear)===s;break;case"lastSixMonth":listData=[new Date(now.getFullYear(),now.getMonth()-5).getMonth(),new Date(now.getFullYear(),now.getMonth()-4).getMonth(),new Date(now.getFullYear(),now.getMonth()-3).getMonth(),new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()],filterByTime=(n,s)=>parseInt(n._monthofyear)===s;break;case"thisYear":break;default:break}var evalValue=eval(e.value)}catch(n){evalValue=0}return{...e,value:evalValue}});return tmp&&props.expandData&&tmp.push(...props.expandData),tmp},[(o=chartItem==null?void 0:chartItem.Setting)==null?void 0:o.datasets,selectedTime,props.expandData,result]),getData=async()=>{let n=props.query;if(!(n!=null&&n.length)){switch(n=chartItem.Query.trim()==="*"?"":chartItem.Query,searchRaw.length&&(n+=` ${searchRaw}`),selectedTime){case"thisWeek":var s=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7)+1).getTime(),l=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7)+7,23,59,59,999).getTime(),c=chartItem.Group.replace(groupByRegex,(h,f)=>{const p=h.split(" ");return`APPLY "dayofweek(@DateCreated / 1000)" AS _dayofweek ${p[0].trim()} ${parseInt(p[1])+1} ${["@_dayofweek",...p.slice(2)].join(" ")}`});break;case"lastWeek":s=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7)-6).getTime(),l=new Date(now.getFullYear(),now.getMonth(),now.getDate()-(now.getDay()?now.getDay():7),23,59,59,999).getTime(),c=chartItem.Group.replace(groupByRegex,(h,f)=>{const p=h.split(" ");return`APPLY "dayofweek(@DateCreated / 1000)" AS _dayofweek ${p[0].trim()} ${parseInt(p[1])+1} ${["@_dayofweek",...p.slice(2)].join(" ")}`});break;case"thisMonth":s=new Date(now.getFullYear(),now.getMonth()).getTime(),l=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59,999).getTime(),c=chartItem.Group.replace(groupByRegex,(h,f)=>{const p=h.split(" ");return`APPLY "floor(dayofmonth(@DateCreated / 1000) / 7)" AS _dayofmonth ${p[0].trim()} ${parseInt(p[1])+1} ${["@_dayofmonth",...p.slice(2)].join(" ")}`});break;case"lastMonth":s=new Date(now.getFullYear(),now.getMonth()-1).getTime(),l=new Date(now.getFullYear(),now.getMonth(),0,23,59,59,999).getTime(),c=chartItem.Group.replace(groupByRegex,(h,f)=>{const p=h.split(" ");return`APPLY "floor(dayofmonth(@DateCreated / 1000) / 7)" AS _dayofmonth ${p[0].trim()} ${parseInt(p[1])+1} ${["@_dayofmonth",...p.slice(2)].join(" ")}`});break;case"lastThreeMonth":s=new Date(now.getFullYear(),now.getMonth()-3).getTime(),l=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59,999).getTime(),c=chartItem.Group.replace(groupByRegex,(h,f)=>{const p=h.split(" ");return`APPLY "monthofyear(@DateCreated / 1000)" AS _monthofyear ${p[0].trim()} ${parseInt(p[1])+1} ${["@_monthofyear",...p.slice(2)].join(" ")}`});break;case"lastSixMonth":s=new Date(now.getFullYear(),now.getMonth()-6).getTime(),l=new Date(now.getFullYear(),now.getMonth()+1,0,23,59,59,999).getTime(),c=chartItem.Group.replace(groupByRegex,(h,f)=>{const p=h.split(" ");return`APPLY "monthofyear(@DateCreated / 1000)" AS _monthofyear ${p[0].trim()} ${parseInt(p[1])+1} ${["@_monthofyear",...p.slice(2)].join(" ")}`});break;default:selectedTime===1/0?s=void 0:s=new Date(now.getFullYear(),now.getMonth(),now.getDay()-selectedTime).getTime(),c=chartItem.Group;break}n+=` ${s?`@DateCreated:[${s} ${l??Date.now()}]`:""}`,n=n.trim()}const d=await new DataController(chartItem.TbName).group({searchRaw:n.length?n:"*",reducers:c??chartItem.Group});d.code===200&&setResult(d.data)},getMonthName=n=>{switch(n){case 0:return t("january");case 1:return t("february");case 2:return t("march");case 3:return t("april");case 4:return t("may");case 5:return t("june");case 6:return t("july");case 7:return t("august");case 8:return t("september");case 9:return t("october");case 10:return t("november");case 11:return t("december");default:return""}},getxAxisName=()=>{switch(selectedTime){case"thisWeek":case"lastWeek":return[t("mo"),t("tu"),t("we"),t("th"),t("fr"),t("sa"),t("su")];case"thisMonth":case"lastMonth":return["1 - 7","8 - 14","15 - 21",`22 - ${t("last").toLowerCase()}`];case"lastThreeMonth":return[new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()].map(n=>getMonthName(n));case"lastSixMonth":return[new Date(now.getFullYear(),now.getMonth()-5).getMonth(),new Date(now.getFullYear(),now.getMonth()-4).getMonth(),new Date(now.getFullYear(),now.getMonth()-3).getMonth(),new Date(now.getFullYear(),now.getMonth()-2).getMonth(),new Date(now.getFullYear(),now.getMonth()-1).getMonth(),now.getMonth()].map(n=>getMonthName(n));case"thisYear":return Array.from({length:12}).map((n,s)=>s+1);default:return[]}};return React2.useEffect(()=>{listTime.length&&setSelectedTime(listTime[0].id)},[listTime]),React2.useEffect(()=>{var n;chartItem&&(selectedTime||(n=props.query)!=null&&n.length)&&getData()},[selectedTime,props.query,chartItem]),React2.useEffect(()=>{props.id&&new SettingDataController("chart").getByIds([props.id]).then(async s=>{if(s.code===200){const l=s.data[0];l.Setting=JSON.parse(l.Setting),setChartItem(l)}})},[props.id]),React2.useImperativeHandle(ref,()=>({getData,chartInfor:chartItem,result,setResult,datasets,selectedTime}),[selectedTime,datasets,result,chartItem]),jsxRuntimeExports.jsxs("div",{className:`col ${styles$2["chart-block"]} ${props.className??""}`,style,children:[!props.chartOnly&&jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"1.6rem"},children:[jsxRuntimeExports.jsxs("div",{className:"col",style:{flex:1,gap:"0.4rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-7",children:chartItem==null?void 0:chartItem.Name}),!!((a=chartItem==null?void 0:chartItem.Description)!=null&&a.length)&&jsxRuntimeExports.jsx(Text$2,{className:"subtitle-3",style:{flex:1},children:chartItem==null?void 0:chartItem.Description})]}),selectedTime&&jsxRuntimeExports.jsx(Select1,{value:selectedTime,options:listTime,style:{height:"3.2rem",width:"12.8rem",padding:"0 0.8rem"},onChange:n=>{setSelectedTime(n.id)}})]}),chartItem&&jsxRuntimeExports.jsx(RenderChartByType,{handleChartClick:props.handleChartClick,formatter:props.formatter,style:chartStyle??{height:"15rem",gap:"2.4rem"},type:chartItem.Type,xAxisName:typeof listTime[0]=="number"?void 0:getxAxisName(),datasets,unit:chartItem.Setting.unit,legend:chartItem.Setting.legend})]})});var dist={},hasRequiredDist;function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0}),dist.parse=u,dist.serialize=f;const o=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,a=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,l=Object.prototype.toString,c=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function u(v,b){const w=new c,x=v.length;if(x<2)return w;const S=(b==null?void 0:b.decode)||p;let E=0;do{const T=v.indexOf("=",E);if(T===-1)break;const C=v.indexOf(";",E),A=C===-1?x:C;if(T>A){E=v.lastIndexOf(";",T-1)+1;continue}const R=d(v,E,T),j=h(v,T,R),D=v.slice(R,j);if(w[D]===void 0){let O=d(v,T+1,A),H=h(v,A,O);const q=S(v.slice(O,H));w[D]=q}E=A+1}while(E<x);return w}function d(v,b,w){do{const x=v.charCodeAt(b);if(x!==32&&x!==9)return b}while(++b<w);return w}function h(v,b,w){for(;b>w;){const x=v.charCodeAt(--b);if(x!==32&&x!==9)return b+1}return w}function f(v,b,w){const x=(w==null?void 0:w.encode)||encodeURIComponent;if(!o.test(v))throw new TypeError(`argument name is invalid: ${v}`);const S=x(b);if(!a.test(S))throw new TypeError(`argument val is invalid: ${b}`);let E=v+"="+S;if(!w)return E;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);E+="; Max-Age="+w.maxAge}if(w.domain){if(!n.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);E+="; Domain="+w.domain}if(w.path){if(!s.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);E+="; Path="+w.path}if(w.expires){if(!g(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);E+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(E+="; HttpOnly"),w.secure&&(E+="; Secure"),w.partitioned&&(E+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":E+="; Priority=Low";break;case"medium":E+="; Priority=Medium";break;case"high":E+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":E+="; SameSite=Strict";break;case"lax":E+="; SameSite=Lax";break;case"none":E+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return E}function p(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function g(v){return l.call(v)==="[object Date]"}return dist}requireDist();/**
 * react-router v7.6.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PopStateEventType="popstate";function createBrowserHistory(o={}){function a(s,l){let{pathname:c,search:u,hash:d}=s.location;return createLocation("",{pathname:c,search:u,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(s,l){return typeof l=="string"?l:createPath(l)}return getUrlBasedHistory(a,n,null,o)}function invariant(o,a){if(o===!1||o===null||typeof o>"u")throw new Error(a)}function warning(o,a){if(!o){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(o,a){return{usr:o.state,key:o.key,idx:a}}function createLocation(o,a,n=null,s){return{pathname:typeof o=="string"?o:o.pathname,search:"",hash:"",...typeof a=="string"?parsePath(a):a,state:n,key:a&&a.key||s||createKey()}}function createPath({pathname:o="/",search:a="",hash:n=""}){return a&&a!=="?"&&(o+=a.charAt(0)==="?"?a:"?"+a),n&&n!=="#"&&(o+=n.charAt(0)==="#"?n:"#"+n),o}function parsePath(o){let a={};if(o){let n=o.indexOf("#");n>=0&&(a.hash=o.substring(n),o=o.substring(0,n));let s=o.indexOf("?");s>=0&&(a.search=o.substring(s),o=o.substring(0,s)),o&&(a.pathname=o)}return a}function getUrlBasedHistory(o,a,n,s={}){let{window:l=document.defaultView,v5Compat:c=!1}=s,u=l.history,d="POP",h=null,f=p();f==null&&(f=0,u.replaceState({...u.state,idx:f},""));function p(){return(u.state||{idx:null}).idx}function g(){d="POP";let S=p(),E=S==null?null:S-f;f=S,h&&h({action:d,location:x.location,delta:E})}function v(S,E){d="PUSH";let T=createLocation(x.location,S,E);f=p()+1;let C=getHistoryState(T,f),A=x.createHref(T);try{u.pushState(C,"",A)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;l.location.assign(A)}c&&h&&h({action:d,location:x.location,delta:1})}function b(S,E){d="REPLACE";let T=createLocation(x.location,S,E);f=p();let C=getHistoryState(T,f),A=x.createHref(T);u.replaceState(C,"",A),c&&h&&h({action:d,location:x.location,delta:0})}function w(S){return createBrowserURLImpl(S)}let x={get action(){return d},get location(){return o(l,u)},listen(S){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(PopStateEventType,g),h=S,()=>{l.removeEventListener(PopStateEventType,g),h=null}},createHref(S){return a(l,S)},createURL:w,encodeLocation(S){let E=w(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:b,go(S){return u.go(S)}};return x}function createBrowserURLImpl(o,a=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant(n,"No window.location.(origin|href) available to create URL");let s=typeof o=="string"?o:createPath(o);return s=s.replace(/ $/,"%20"),!a&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function matchRoutes(o,a,n="/"){return matchRoutesImpl(o,a,n,!1)}function matchRoutesImpl(o,a,n,s){let l=typeof a=="string"?parsePath(a):a,c=stripBasename(l.pathname||"/",n);if(c==null)return null;let u=flattenRoutes(o);rankRouteBranches(u);let d=null;for(let h=0;d==null&&h<u.length;++h){let f=decodePath(c);d=matchRouteBranch(u[h],f,s)}return d}function flattenRoutes(o,a=[],n=[],s=""){let l=(c,u,d)=>{let h={relativePath:d===void 0?c.path||"":d,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};h.relativePath.startsWith("/")&&(invariant(h.relativePath.startsWith(s),`Absolute route path "${h.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(s.length));let f=joinPaths([s,h.relativePath]),p=n.concat(h);c.children&&c.children.length>0&&(invariant(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),flattenRoutes(c.children,a,p,f)),!(c.path==null&&!c.index)&&a.push({path:f,score:computeScore(f,c.index),routesMeta:p})};return o.forEach((c,u)=>{var d;if(c.path===""||!((d=c.path)!=null&&d.includes("?")))l(c,u);else for(let h of explodeOptionalSegments(c.path))l(c,u,h)}),a}function explodeOptionalSegments(o){let a=o.split("/");if(a.length===0)return[];let[n,...s]=a,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(s.length===0)return l?[c,""]:[c];let u=explodeOptionalSegments(s.join("/")),d=[];return d.push(...u.map(h=>h===""?c:[c,h].join("/"))),l&&d.push(...u),d.map(h=>o.startsWith("/")&&h===""?"/":h)}function rankRouteBranches(o){o.sort((a,n)=>a.score!==n.score?n.score-a.score:compareIndexes(a.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=o=>o==="*";function computeScore(o,a){let n=o.split("/"),s=n.length;return n.some(isSplat)&&(s+=splatPenalty),a&&(s+=indexRouteValue),n.filter(l=>!isSplat(l)).reduce((l,c)=>l+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),s)}function compareIndexes(o,a){return o.length===a.length&&o.slice(0,-1).every((s,l)=>s===a[l])?o[o.length-1]-a[a.length-1]:0}function matchRouteBranch(o,a,n=!1){let{routesMeta:s}=o,l={},c="/",u=[];for(let d=0;d<s.length;++d){let h=s[d],f=d===s.length-1,p=c==="/"?a:a.slice(c.length)||"/",g=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:f},p),v=h.route;if(!g&&f&&n&&!s[s.length-1].route.index&&(g=matchPath({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},p)),!g)return null;Object.assign(l,g.params),u.push({params:l,pathname:joinPaths([c,g.pathname]),pathnameBase:normalizePathname(joinPaths([c,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(c=joinPaths([c,g.pathnameBase]))}return u}function matchPath(o,a){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[n,s]=compilePath(o.path,o.caseSensitive,o.end),l=a.match(n);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:s.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let w=d[v]||"";u=c.slice(0,c.length-w.length).replace(/(.)\/+$/,"$1")}const b=d[v];return g&&!b?f[p]=void 0:f[p]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:c,pathnameBase:u,pattern:o}}function compilePath(o,a=!1,n=!0){warning(o==="*"||!o.endsWith("*")||o.endsWith("/*"),`Route path "${o}" will be treated as if it were "${o.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${o.replace(/\*$/,"/*")}".`);let s=[],l="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,d,h)=>(s.push({paramName:d,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(s.push({paramName:"*"}),l+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":o!==""&&o!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),s]}function decodePath(o){try{return o.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return warning(!1,`The URL path "${o}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),o}}function stripBasename(o,a){if(a==="/")return o;if(!o.toLowerCase().startsWith(a.toLowerCase()))return null;let n=a.endsWith("/")?a.length-1:a.length,s=o.charAt(n);return s&&s!=="/"?null:o.slice(n)||"/"}function resolvePath(o,a="/"){let{pathname:n,search:s="",hash:l=""}=typeof o=="string"?parsePath(o):o;return{pathname:n?n.startsWith("/")?n:resolvePathname(n,a):a,search:normalizeSearch(s),hash:normalizeHash(l)}}function resolvePathname(o,a){let n=a.replace(/\/+$/,"").split("/");return o.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(o,a,n,s){return`Cannot include a '${o}' character in a manually specified \`to.${a}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(o){return o.filter((a,n)=>n===0||a.route.path&&a.route.path.length>0)}function getResolveToMatches(o){let a=getPathContributingMatches(o);return a.map((n,s)=>s===a.length-1?n.pathname:n.pathnameBase)}function resolveTo(o,a,n,s=!1){let l;typeof o=="string"?l=parsePath(o):(l={...o},invariant(!l.pathname||!l.pathname.includes("?"),getInvalidPathError("?","pathname","search",l)),invariant(!l.pathname||!l.pathname.includes("#"),getInvalidPathError("#","pathname","hash",l)),invariant(!l.search||!l.search.includes("#"),getInvalidPathError("#","search","hash",l)));let c=o===""||l.pathname==="",u=c?"/":l.pathname,d;if(u==null)d=n;else{let g=a.length-1;if(!s&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),g-=1;l.pathname=v.join("/")}d=g>=0?a[g]:"/"}let h=resolvePath(l,d),f=u&&u!=="/"&&u.endsWith("/"),p=(c||u===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(f||p)&&(h.pathname+="/"),h}var joinPaths=o=>o.join("/").replace(/\/\/+/g,"/"),normalizePathname=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,normalizeHash=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function isRouteErrorResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=React2__namespace.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=React2__namespace.createContext(null);DataRouterStateContext.displayName="DataRouterState";var ViewTransitionContext=React2__namespace.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=React2__namespace.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=React2__namespace.createContext(null);AwaitContext.displayName="Await";var NavigationContext=React2__namespace.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=React2__namespace.createContext(null);LocationContext.displayName="Location";var RouteContext=React2__namespace.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=React2__namespace.createContext(null);RouteErrorContext.displayName="RouteError";function useHref(o,{relative:a}={}){invariant(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=React2__namespace.useContext(NavigationContext),{hash:l,pathname:c,search:u}=useResolvedPath(o,{relative:a}),d=c;return n!=="/"&&(d=c==="/"?n:joinPaths([n,c])),s.createHref({pathname:d,search:u,hash:l})}function useInRouterContext(){return React2__namespace.useContext(LocationContext)!=null}function useLocation(){return invariant(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),React2__namespace.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect(o){React2__namespace.useContext(NavigationContext).static||React2__namespace.useLayoutEffect(o)}function useNavigate(){let{isDataRoute:o}=React2__namespace.useContext(RouteContext);return o?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let o=React2__namespace.useContext(DataRouterContext),{basename:a,navigator:n}=React2__namespace.useContext(NavigationContext),{matches:s}=React2__namespace.useContext(RouteContext),{pathname:l}=useLocation(),c=JSON.stringify(getResolveToMatches(s)),u=React2__namespace.useRef(!1);return useIsomorphicLayoutEffect(()=>{u.current=!0}),React2__namespace.useCallback((h,f={})=>{if(warning(u.current,navigateEffectWarning),!u.current)return;if(typeof h=="number"){n.go(h);return}let p=resolveTo(h,JSON.parse(c),l,f.relative==="path");o==null&&a!=="/"&&(p.pathname=p.pathname==="/"?a:joinPaths([a,p.pathname])),(f.replace?n.replace:n.push)(p,f.state,f)},[a,n,c,l,o])}var OutletContext=React2__namespace.createContext(null);function useOutlet(o){let a=React2__namespace.useContext(RouteContext).outlet;return a&&React2__namespace.createElement(OutletContext.Provider,{value:o},a)}function useParams(){let{matches:o}=React2__namespace.useContext(RouteContext),a=o[o.length-1];return a?a.params:{}}function useResolvedPath(o,{relative:a}={}){let{matches:n}=React2__namespace.useContext(RouteContext),{pathname:s}=useLocation(),l=JSON.stringify(getResolveToMatches(n));return React2__namespace.useMemo(()=>resolveTo(o,JSON.parse(l),s,a==="path"),[o,l,s,a])}function useRoutes(o,a){return useRoutesImpl(o,a)}function useRoutesImpl(o,a,n,s){var E;invariant(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=React2__namespace.useContext(NavigationContext),{matches:c}=React2__namespace.useContext(RouteContext),u=c[c.length-1],d=u?u.params:{},h=u?u.pathname:"/",f=u?u.pathnameBase:"/",p=u&&u.route;{let T=p&&p.path||"";warningOnce(h,!p||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let g=useLocation(),v;if(a){let T=typeof a=="string"?parsePath(a):a;invariant(f==="/"||((E=T.pathname)==null?void 0:E.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${T.pathname}" was given in the \`location\` prop.`),v=T}else v=g;let b=v.pathname||"/",w=b;if(f!=="/"){let T=f.replace(/^\//,"").split("/");w="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let x=matchRoutes(o,{pathname:w});warning(p||x!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),warning(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=_renderMatches(x&&x.map(T=>Object.assign({},T,{params:Object.assign({},d,T.params),pathname:joinPaths([f,l.encodeLocation?l.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?f:joinPaths([f,l.encodeLocation?l.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),c,n,s);return a&&S?React2__namespace.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},S):S}function DefaultErrorComponent(){let o=useRouteError(),a=isRouteErrorResponse(o)?`${o.status} ${o.statusText}`:o instanceof Error?o.message:JSON.stringify(o),n=o instanceof Error?o.stack:null,s="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:s},c={padding:"2px 4px",backgroundColor:s},u=null;return console.error("Error handled by React Router default ErrorBoundary:",o),u=React2__namespace.createElement(React2__namespace.Fragment,null,React2__namespace.createElement("p",null,"💿 Hey developer 👋"),React2__namespace.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",React2__namespace.createElement("code",{style:c},"ErrorBoundary")," or"," ",React2__namespace.createElement("code",{style:c},"errorElement")," prop on your route.")),React2__namespace.createElement(React2__namespace.Fragment,null,React2__namespace.createElement("h2",null,"Unexpected Application Error!"),React2__namespace.createElement("h3",{style:{fontStyle:"italic"}},a),n?React2__namespace.createElement("pre",{style:l},n):null,u)}var defaultErrorElement=React2__namespace.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends React2__namespace.Component{constructor(o){super(o),this.state={location:o.location,revalidation:o.revalidation,error:o.error}}static getDerivedStateFromError(o){return{error:o}}static getDerivedStateFromProps(o,a){return a.location!==o.location||a.revalidation!=="idle"&&o.revalidation==="idle"?{error:o.error,location:o.location,revalidation:o.revalidation}:{error:o.error!==void 0?o.error:a.error,location:a.location,revalidation:o.revalidation||a.revalidation}}componentDidCatch(o,a){console.error("React Router caught the following error during render",o,a)}render(){return this.state.error!==void 0?React2__namespace.createElement(RouteContext.Provider,{value:this.props.routeContext},React2__namespace.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function RenderedRoute({routeContext:o,match:a,children:n}){let s=React2__namespace.useContext(DataRouterContext);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),React2__namespace.createElement(RouteContext.Provider,{value:o},n)}function _renderMatches(o,a=[],n=null,s=null){if(o==null){if(!n)return null;if(n.errors)o=n.matches;else if(a.length===0&&!n.initialized&&n.matches.length>0)o=n.matches;else return null}let l=o,c=n==null?void 0:n.errors;if(c!=null){let h=l.findIndex(f=>f.route.id&&(c==null?void 0:c[f.route.id])!==void 0);invariant(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let u=!1,d=-1;if(n)for(let h=0;h<l.length;h++){let f=l[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:p,errors:g}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,f,p)=>{let g,v=!1,b=null,w=null;n&&(g=c&&f.route.id?c[f.route.id]:void 0,b=f.route.errorElement||defaultErrorElement,u&&(d<0&&p===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,w=null):d===p&&(v=!0,w=f.route.hydrateFallbackElement||null)));let x=a.concat(l.slice(0,p+1)),S=()=>{let E;return g?E=b:v?E=w:f.route.Component?E=React2__namespace.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=h,React2__namespace.createElement(RenderedRoute,{match:f,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?React2__namespace.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):S()},null)}function getDataRouterConsoleError(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(o){let a=React2__namespace.useContext(DataRouterContext);return invariant(a,getDataRouterConsoleError(o)),a}function useDataRouterState(o){let a=React2__namespace.useContext(DataRouterStateContext);return invariant(a,getDataRouterConsoleError(o)),a}function useRouteContext(o){let a=React2__namespace.useContext(RouteContext);return invariant(a,getDataRouterConsoleError(o)),a}function useCurrentRouteId(o){let a=useRouteContext(o),n=a.matches[a.matches.length-1];return invariant(n.route.id,`${o} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){var s;let o=React2__namespace.useContext(RouteErrorContext),a=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return o!==void 0?o:(s=a.errors)==null?void 0:s[n]}function useNavigateStable(){let{router:o}=useDataRouterContext("useNavigate"),a=useCurrentRouteId("useNavigate"),n=React2__namespace.useRef(!1);return useIsomorphicLayoutEffect(()=>{n.current=!0}),React2__namespace.useCallback(async(l,c={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof l=="number"?o.navigate(l):await o.navigate(l,{fromRouteId:a,...c}))},[o,a])}var alreadyWarned={};function warningOnce(o,a,n){!a&&!alreadyWarned[o]&&(alreadyWarned[o]=!0,warning(!1,n))}React2__namespace.memo(DataRoutes);function DataRoutes({routes:o,future:a,state:n}){return useRoutesImpl(o,void 0,n,a)}function Navigate({to:o,replace:a,state:n,relative:s}){invariant(useInRouterContext(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=React2__namespace.useContext(NavigationContext);warning(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=React2__namespace.useContext(RouteContext),{pathname:u}=useLocation(),d=useNavigate(),h=resolveTo(o,getResolveToMatches(c),u,s==="path"),f=JSON.stringify(h);return React2__namespace.useEffect(()=>{d(JSON.parse(f),{replace:a,state:n,relative:s})},[d,f,s,a,n]),null}function Outlet(o){return useOutlet(o.context)}function Route(o){invariant(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:o="/",children:a=null,location:n,navigationType:s="POP",navigator:l,static:c=!1}){invariant(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=o.replace(/^\/*/,"/"),d=React2__namespace.useMemo(()=>({basename:u,navigator:l,static:c,future:{}}),[u,l,c]);typeof n=="string"&&(n=parsePath(n));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:v="default"}=n,b=React2__namespace.useMemo(()=>{let w=stripBasename(h,u);return w==null?null:{location:{pathname:w,search:f,hash:p,state:g,key:v},navigationType:s}},[u,h,f,p,g,v,s]);return warning(b!=null,`<Router basename="${u}"> is not able to match the URL "${h}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:React2__namespace.createElement(NavigationContext.Provider,{value:d},React2__namespace.createElement(LocationContext.Provider,{children:a,value:b}))}function Routes({children:o,location:a}){return useRoutes(createRoutesFromChildren(o),a)}function createRoutesFromChildren(o,a=[]){let n=[];return React2__namespace.Children.forEach(o,(s,l)=>{if(!React2__namespace.isValidElement(s))return;let c=[...a,l];if(s.type===React2__namespace.Fragment){n.push.apply(n,createRoutesFromChildren(s.props.children,c));return}invariant(s.type===Route,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant(!s.props.index||!s.props.children,"An index route cannot have child routes.");let u={id:s.props.id||c.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(u.children=createRoutesFromChildren(s.props.children,c)),n.push(u)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(o){return o!=null&&typeof o.tagName=="string"}function isButtonElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="button"}function isFormElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="form"}function isInputElement(o){return isHtmlElement(o)&&o.tagName.toLowerCase()==="input"}function isModifiedEvent(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function shouldProcessLinkClick(o,a){return o.button===0&&(!a||a==="_self")&&!isModifiedEvent(o)}function createSearchParams(o=""){return new URLSearchParams(typeof o=="string"||Array.isArray(o)||o instanceof URLSearchParams?o:Object.keys(o).reduce((a,n)=>{let s=o[n];return a.concat(Array.isArray(s)?s.map(l=>[n,l]):[[n,s]])},[]))}function getSearchParamsForLocation(o,a){let n=createSearchParams(o);return a&&a.forEach((s,l)=>{n.has(l)||a.getAll(l).forEach(c=>{n.append(l,c)})}),n}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(o){return o!=null&&!supportedFormEncTypes.has(o)?(warning(!1,`"${o}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):o}function getFormSubmissionInfo(o,a){let n,s,l,c,u;if(isFormElement(o)){let d=o.getAttribute("action");s=d?stripBasename(d,a):null,n=o.getAttribute("method")||defaultMethod,l=getFormEncType(o.getAttribute("enctype"))||defaultEncType,c=new FormData(o)}else if(isButtonElement(o)||isInputElement(o)&&(o.type==="submit"||o.type==="image")){let d=o.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=o.getAttribute("formaction")||d.getAttribute("action");if(s=h?stripBasename(h,a):null,n=o.getAttribute("formmethod")||d.getAttribute("method")||defaultMethod,l=getFormEncType(o.getAttribute("formenctype"))||getFormEncType(d.getAttribute("enctype"))||defaultEncType,c=new FormData(d,o),!isFormDataSubmitterSupported()){let{name:f,type:p,value:g}=o;if(p==="image"){let v=f?`${f}.`:"";c.append(`${v}x`,"0"),c.append(`${v}y`,"0")}else f&&c.append(f,g)}}else{if(isHtmlElement(o))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,s=null,l=defaultEncType,u=o}return c&&l==="text/plain"&&(u=c,c=void 0),{action:s,method:n.toLowerCase(),encType:l,formData:c,body:u}}function invariant2(o,a){if(o===!1||o===null||typeof o>"u")throw new Error(a)}async function loadRouteModule(o,a){if(o.id in a)return a[o.id];try{let n=await import(o.module);return a[o.id]=n,n}catch(n){return console.error(`Error loading route module \`${o.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(o){return o==null?!1:o.href==null?o.rel==="preload"&&typeof o.imageSrcSet=="string"&&typeof o.imageSizes=="string":typeof o.rel=="string"&&typeof o.href=="string"}async function getKeyedPrefetchLinks(o,a,n){let s=await Promise.all(o.map(async l=>{let c=a.routes[l.route.id];if(c){let u=await loadRouteModule(c,n);return u.links?u.links():[]}return[]}));return dedupeLinkDescriptors(s.flat(1).filter(isHtmlLinkDescriptor).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function getNewMatchesForLinks(o,a,n,s,l,c){let u=(h,f)=>n[f]?h.route.id!==n[f].route.id:!0,d=(h,f)=>{var p;return n[f].pathname!==h.pathname||((p=n[f].route.path)==null?void 0:p.endsWith("*"))&&n[f].params["*"]!==h.params["*"]};return c==="assets"?a.filter((h,f)=>u(h,f)||d(h,f)):c==="data"?a.filter((h,f)=>{var g;let p=s.routes[h.route.id];if(!p||!p.hasLoader)return!1;if(u(h,f)||d(h,f))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(o,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function getModuleLinkHrefs(o,a,{includeHydrateFallback:n}={}){return dedupeHrefs(o.map(s=>{let l=a.routes[s.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function dedupeHrefs(o){return[...new Set(o)]}function sortKeys(o){let a={},n=Object.keys(o).sort();for(let s of n)a[s]=o[s];return a}function dedupeLinkDescriptors(o,a){let n=new Set;return new Set(a),o.reduce((s,l)=>{let c=JSON.stringify(sortKeys(l));return n.has(c)||(n.add(c),s.push({key:c,link:l})),s},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NO_BODY_STATUS_CODES=new Set([100,101,204,205]);function singleFetchUrl(o,a){let n=typeof o=="string"?new URL(o,typeof window>"u"?"server://singlefetch/":window.location.origin):o;return n.pathname==="/"?n.pathname="_root.data":a&&stripBasename(n.pathname,a)==="/"?n.pathname=`${a.replace(/\/$/,"")}/_root.data`:n.pathname=`${n.pathname.replace(/\/$/,"")}.data`,n}function useDataRouterContext2(){let o=React2__namespace.useContext(DataRouterContext);return invariant2(o,"You must render this element inside a <DataRouterContext.Provider> element"),o}function useDataRouterStateContext(){let o=React2__namespace.useContext(DataRouterStateContext);return invariant2(o,"You must render this element inside a <DataRouterStateContext.Provider> element"),o}var FrameworkContext=React2__namespace.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let o=React2__namespace.useContext(FrameworkContext);return invariant2(o,"You must render this element inside a <HydratedRouter> element"),o}function usePrefetchBehavior(o,a){let n=React2__namespace.useContext(FrameworkContext),[s,l]=React2__namespace.useState(!1),[c,u]=React2__namespace.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=a,v=React2__namespace.useRef(null);React2__namespace.useEffect(()=>{if(o==="render"&&u(!0),o==="viewport"){let x=E=>{E.forEach(T=>{u(T.isIntersecting)})},S=new IntersectionObserver(x,{threshold:.5});return v.current&&S.observe(v.current),()=>{S.disconnect()}}},[o]),React2__namespace.useEffect(()=>{if(s){let x=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(x)}}},[s]);let b=()=>{l(!0)},w=()=>{l(!1),u(!1)};return n?o!=="intent"?[c,v,{}]:[c,v,{onFocus:composeEventHandlers(d,b),onBlur:composeEventHandlers(h,w),onMouseEnter:composeEventHandlers(f,b),onMouseLeave:composeEventHandlers(p,w),onTouchStart:composeEventHandlers(g,b)}]:[!1,v,{}]}function composeEventHandlers(o,a){return n=>{o&&o(n),n.defaultPrevented||a(n)}}function PrefetchPageLinks({page:o,...a}){let{router:n}=useDataRouterContext2(),s=React2__namespace.useMemo(()=>matchRoutes(n.routes,o,n.basename),[n.routes,o,n.basename]);return s?React2__namespace.createElement(PrefetchPageLinksImpl,{page:o,matches:s,...a}):null}function useKeyedPrefetchLinks(o){let{manifest:a,routeModules:n}=useFrameworkContext(),[s,l]=React2__namespace.useState([]);return React2__namespace.useEffect(()=>{let c=!1;return getKeyedPrefetchLinks(o,a,n).then(u=>{c||l(u)}),()=>{c=!0}},[o,a,n]),s}function PrefetchPageLinksImpl({page:o,matches:a,...n}){let s=useLocation(),{manifest:l,routeModules:c}=useFrameworkContext(),{basename:u}=useDataRouterContext2(),{loaderData:d,matches:h}=useDataRouterStateContext(),f=React2__namespace.useMemo(()=>getNewMatchesForLinks(o,a,h,l,s,"data"),[o,a,h,l,s]),p=React2__namespace.useMemo(()=>getNewMatchesForLinks(o,a,h,l,s,"assets"),[o,a,h,l,s]),g=React2__namespace.useMemo(()=>{if(o===s.pathname+s.search+s.hash)return[];let w=new Set,x=!1;if(a.forEach(E=>{var C;let T=l.routes[E.route.id];!T||!T.hasLoader||(!f.some(A=>A.route.id===E.route.id)&&E.route.id in d&&((C=c[E.route.id])!=null&&C.shouldRevalidate)||T.hasClientLoader?x=!0:w.add(E.route.id))}),w.size===0)return[];let S=singleFetchUrl(o,u);return x&&w.size>0&&S.searchParams.set("_routes",a.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[u,d,s,l,f,a,o,c]),v=React2__namespace.useMemo(()=>getModuleLinkHrefs(p,l),[p,l]),b=useKeyedPrefetchLinks(p);return React2__namespace.createElement(React2__namespace.Fragment,null,g.map(w=>React2__namespace.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),v.map(w=>React2__namespace.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),b.map(({key:w,link:x})=>React2__namespace.createElement("link",{key:w,...x})))}function mergeRefs(...o){return a=>{o.forEach(n=>{typeof n=="function"?n(a):n!=null&&(n.current=a)})}}var isBrowser=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser&&(window.__reactRouterVersion="7.6.2")}catch(o){}function BrowserRouter({basename:o,children:a,window:n}){let s=React2__namespace.useRef();s.current==null&&(s.current=createBrowserHistory({window:n,v5Compat:!0}));let l=s.current,[c,u]=React2__namespace.useState({action:l.action,location:l.location}),d=React2__namespace.useCallback(h=>{React2__namespace.startTransition(()=>u(h))},[u]);return React2__namespace.useLayoutEffect(()=>l.listen(d),[l,d]),React2__namespace.createElement(Router,{basename:o,children:a,location:c.location,navigationType:c.action,navigator:l})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=React2__namespace.forwardRef(function o({onClick:a,discover:n="render",prefetch:s="none",relative:l,reloadDocument:c,replace:u,state:d,target:h,to:f,preventScrollReset:p,viewTransition:g,...v},b){let{basename:w}=React2__namespace.useContext(NavigationContext),x=typeof f=="string"&&ABSOLUTE_URL_REGEX2.test(f),S,E=!1;if(typeof f=="string"&&x&&(S=f,isBrowser))try{let H=new URL(window.location.href),q=f.startsWith("//")?new URL(H.protocol+f):new URL(f),Y=stripBasename(q.pathname,w);q.origin===H.origin&&Y!=null?f=Y+q.search+q.hash:E=!0}catch{warning(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=useHref(f,{relative:l}),[C,A,R]=usePrefetchBehavior(s,v),j=useLinkClickHandler(f,{replace:u,state:d,target:h,preventScrollReset:p,relative:l,viewTransition:g});function D(H){a&&a(H),H.defaultPrevented||j(H)}let O=React2__namespace.createElement("a",{...v,...R,href:S||T,onClick:E||c?a:D,ref:mergeRefs(b,A),target:h,"data-discover":!x&&n==="render"?"true":void 0});return C&&!x?React2__namespace.createElement(React2__namespace.Fragment,null,O,React2__namespace.createElement(PrefetchPageLinks,{page:T})):O});Link.displayName="Link";var NavLink=React2__namespace.forwardRef(function o({"aria-current":a="page",caseSensitive:n=!1,className:s="",end:l=!1,style:c,to:u,viewTransition:d,children:h,...f},p){let g=useResolvedPath(u,{relative:f.relative}),v=useLocation(),b=React2__namespace.useContext(DataRouterStateContext),{navigator:w,basename:x}=React2__namespace.useContext(NavigationContext),S=b!=null&&useViewTransitionState(g)&&d===!0,E=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,T=v.pathname,C=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(T=T.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&x&&(C=stripBasename(C,x)||C);const A=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let R=T===E||!l&&T.startsWith(E)&&T.charAt(A)==="/",j=C!=null&&(C===E||!l&&C.startsWith(E)&&C.charAt(E.length)==="/"),D={isActive:R,isPending:j,isTransitioning:S},O=R?a:void 0,H;typeof s=="function"?H=s(D):H=[s,R?"active":null,j?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let q=typeof c=="function"?c(D):c;return React2__namespace.createElement(Link,{...f,"aria-current":O,className:H,ref:p,style:q,to:u,viewTransition:d},typeof h=="function"?h(D):h)});NavLink.displayName="NavLink";var Form=React2__namespace.forwardRef(({discover:o="render",fetcherKey:a,navigate:n,reloadDocument:s,replace:l,state:c,method:u=defaultMethod,action:d,onSubmit:h,relative:f,preventScrollReset:p,viewTransition:g,...v},b)=>{let w=useSubmit(),x=useFormAction(d,{relative:f}),S=u.toLowerCase()==="get"?"get":"post",E=typeof d=="string"&&ABSOLUTE_URL_REGEX2.test(d),T=C=>{if(h&&h(C),C.defaultPrevented)return;C.preventDefault();let A=C.nativeEvent.submitter,R=(A==null?void 0:A.getAttribute("formmethod"))||u;w(A||C.currentTarget,{fetcherKey:a,method:R,navigate:n,replace:l,state:c,relative:f,preventScrollReset:p,viewTransition:g})};return React2__namespace.createElement("form",{ref:b,method:S,action:x,onSubmit:s?h:T,...v,"data-discover":!E&&o==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(o){return`${o} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(o){let a=React2__namespace.useContext(DataRouterContext);return invariant(a,getDataRouterConsoleError2(o)),a}function useLinkClickHandler(o,{target:a,replace:n,state:s,preventScrollReset:l,relative:c,viewTransition:u}={}){let d=useNavigate(),h=useLocation(),f=useResolvedPath(o,{relative:c});return React2__namespace.useCallback(p=>{if(shouldProcessLinkClick(p,a)){p.preventDefault();let g=n!==void 0?n:createPath(h)===createPath(f);d(o,{replace:g,state:s,preventScrollReset:l,relative:c,viewTransition:u})}},[h,d,f,n,s,a,o,l,c,u])}function useSearchParams(o){warning(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=React2__namespace.useRef(createSearchParams(o)),n=React2__namespace.useRef(!1),s=useLocation(),l=React2__namespace.useMemo(()=>getSearchParamsForLocation(s.search,n.current?null:a.current),[s.search]),c=useNavigate(),u=React2__namespace.useCallback((d,h)=>{const f=createSearchParams(typeof d=="function"?d(l):d);n.current=!0,c("?"+f,h)},[c,l]);return[l,u]}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:o}=useDataRouterContext3("useSubmit"),{basename:a}=React2__namespace.useContext(NavigationContext),n=useRouteId();return React2__namespace.useCallback(async(s,l={})=>{let{action:c,method:u,encType:d,formData:h,body:f}=getFormSubmissionInfo(s,a);if(l.navigate===!1){let p=l.fetcherKey||getUniqueFetcherId();await o.fetch(p,n,l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:f,formMethod:l.method||u,formEncType:l.encType||d,flushSync:l.flushSync})}else await o.navigate(l.action||c,{preventScrollReset:l.preventScrollReset,formData:h,body:f,formMethod:l.method||u,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[o,a,n])}function useFormAction(o,{relative:a}={}){let{basename:n}=React2__namespace.useContext(NavigationContext),s=React2__namespace.useContext(RouteContext);invariant(s,"useFormAction must be used inside a RouteContext");let[l]=s.matches.slice(-1),c={...useResolvedPath(o||".",{relative:a})},u=useLocation();if(o==null){c.search=u.search;let d=new URLSearchParams(c.search),h=d.getAll("index");if(h.some(p=>p==="")){d.delete("index"),h.filter(g=>g).forEach(g=>d.append("index",g));let p=d.toString();c.search=p?`?${p}`:""}}return(!o||o===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(c.pathname=c.pathname==="/"?n:joinPaths([n,c.pathname])),createPath(c)}function useViewTransitionState(o,a={}){let n=React2__namespace.useContext(ViewTransitionContext);invariant(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=useDataRouterContext3("useViewTransitionState"),l=useResolvedPath(o,{relative:a.relative});if(!n.isTransitioning)return!1;let c=stripBasename(n.currentLocation.pathname,s)||n.currentLocation.pathname,u=stripBasename(n.nextLocation.pathname,s)||n.nextLocation.pathname;return matchPath(l.pathname,u)!=null||matchPath(l.pathname,c)!=null}[...NO_BODY_STATUS_CODES];const ViewById=o=>{const a=useForm({shouldFocusError:!1}),[n,s]=React2.useState(),l=React2.useMemo(()=>(n==null?void 0:n.Props)??[],[n]);return React2.useEffect(()=>{o.id&&new SettingDataController("view").getByIds([o.id]).then(async u=>{if(u.code===200&&u.data[0]){let d=u.data[0];d.Props&&typeof d.Props=="string"&&(d.Props=JSON.parse(d.Props)),s(d)}})},[o.id]),n?l.filter(c=>!c.ParentId).map(c=>jsxRuntimeExports.jsx(RenderLayerElement,{item:c,list:l,style:o.style,className:o.className,type:"view",methods:a,indexItem:o.data,propsData:o.propsData,childrenData:o.childrenData,itemData:o.itemData},c.Id)):null},supportProperties=["Selector","Layout","Position","Dimension","Font","Appearance","Background"],styles$1={"f-radio-button":"_f-radio-button_1821r_1","f-checkbox":"_f-checkbox_1821r_3","f-switch":"_f-switch_1821r_5"};function FTextField(o){var s,l,c;const a=React2.useMemo(()=>o.name?convertErrors(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(TextField,{...o,register:(l=o.name)!=null&&l.length?o.methods.register(o.name,{required:o.required}):void 0,helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${n("input")} ${o.name} ${n("value")}`.toLowerCase()),simpleStyle:!0})}function FInputPassword(o){var c,u,d;const a=React2.useMemo(()=>o.name?convertErrors(o.methods.formState.errors,o.name):void 0,[o.name,(c=o.methods.formState.errors)==null?void 0:c[o.name]]),{t:n}=useTranslation(),[s,l]=React2.useState(!1);return jsxRuntimeExports.jsx(TextField,{...o,autoComplete:"off",type:s?"text":"password",suffix:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Winicon,{src:`outline/user interface/${s?"view":"hide"}`,size:"inherit",onClick:()=>l(!s)}),o.suffix]}),register:(u=o.name)!=null&&u.length?o.methods.register(o.name,{required:o.required}):void 0,helperText:a&&((d=a==null?void 0:a.message)!=null&&d.length?a==null?void 0:a.message:`${n("input")} ${o.name} ${n("value")}`.toLowerCase()),simpleStyle:!0})}function FTextArea(o){var s,l,c;const a=React2.useMemo(()=>o.name?convertErrors(o.methods.formState.errors,o.name):void 0,[o.name,(s=o.methods.formState.errors)==null?void 0:s[o.name]]),{t:n}=useTranslation();return jsxRuntimeExports.jsx(TextArea,{...o,register:(l=o.name)!=null&&l.length?o.methods.register(o.name,{required:o.required}):void 0,helperText:a&&((c=a==null?void 0:a.message)!=null&&c.length?a==null?void 0:a.message:`${n("input")} ${o.name} ${n("value")}`).toLowerCase(),simpleStyle:!0})}const FRadioButton=({labelPosition:o="right",...a})=>jsxRuntimeExports.jsxs("label",{id:a.id,className:`row ${styles$1["f-radio-button"]} ${a.className??""}`,style:a.style,children:[!!a.label&&o==="left"&&jsxRuntimeExports.jsx("span",{children:a.label}),a.name?jsxRuntimeExports.jsx(Controller,{name:a.name,control:a.methods.control,render:({field:n})=>jsxRuntimeExports.jsx(RadioButton,{name:a.name,onChange:s=>{var l;n.onChange(a.value),(l=a.onChange)==null||l.call(a,s)},size:a.size,disabled:a.disabled,value:a.value,activeColor:a.activeColor,offColor:a.offColor,checked:n.value===a.value})}):jsxRuntimeExports.jsx(RadioButton,{name:a.name,onChange:n=>{var s;(s=a.onChange)==null||s.call(a,n)},size:a.size,disabled:a.disabled,value:a.value,activeColor:a.activeColor,offColor:a.offColor}),!!a.label&&o==="right"&&jsxRuntimeExports.jsx("span",{children:a.label})]}),FCheckbox=({labelPosition:o="right",shape:a="rectangle",...n})=>jsxRuntimeExports.jsxs("label",{id:n.id,className:`row ${styles$1["f-checkbox"]} ${n.className??""}`,style:n.style,children:[!!n.label&&o==="left"&&jsxRuntimeExports.jsx("span",{children:n.label}),n.name?jsxRuntimeExports.jsx(Controller,{name:n.name,control:n.methods.control,render:({field:s})=>jsxRuntimeExports.jsx(Checkbox,{size:n.size,disabled:n.disabled,onChange:(l,c)=>{var u;s.onChange(l),(u=n.onChange)==null||u.call(n,l,c)},value:s.value,checkColor:n.checkColor,style:{borderRadius:a==="circle"?"50%":"0.4rem",backgroundColor:n.activeColor}})}):jsxRuntimeExports.jsx(Checkbox,{size:n.size,disabled:n.disabled,onChange:n.onChange,value:n.value,checkColor:n.checkColor,style:{borderRadius:a==="circle"?"50%":"0.4rem",backgroundColor:n.activeColor}}),!!n.label&&o==="right"&&jsxRuntimeExports.jsx("span",{children:n.label})]}),FSwitch=({labelPosition:o="right",...a})=>jsxRuntimeExports.jsxs("label",{id:a.id,className:`row ${styles$1["f-switch"]} ${a.className??""}`,style:a.style,children:[!!a.label&&o==="left"&&jsxRuntimeExports.jsx("span",{children:a.label}),a.name?jsxRuntimeExports.jsx(Controller,{name:a.name,control:a.methods.control,render:({field:n})=>jsxRuntimeExports.jsx(Switch,{size:a.size,disabled:a.disabled,onChange:s=>{var l;n.onChange(s),(l=a.onChange)==null||l.call(a,s)},value:n.value,dotColor:a.dotColor,onBackground:a.onBackground})}):jsxRuntimeExports.jsx(Switch,{size:a.size,disabled:a.disabled,onChange:a.onChange,value:a.value,dotColor:a.dotColor,onBackground:a.onBackground}),!!a.label&&o==="right"&&jsxRuntimeExports.jsx("span",{children:a.label})]}),FSelect1=({options:o=[],methods:a,...n})=>{const{t:s}=useTranslation();return n.name?jsxRuntimeExports.jsx(Controller,{name:n.name,rules:{required:n.required},control:a.control,render:({field:l})=>{var u;const c=convertErrors(a.formState.errors,n.name);return jsxRuntimeExports.jsx(Select1,{...n,options:o,value:l.value,onChange:d=>{var h;l.onChange(d==null?void 0:d.id),(h=n.onChange)==null||h.call(n,d)},helperText:c&&((u=c==null?void 0:c.message)!=null&&u.length?c==null?void 0:c.message:`${s("choose")} ${n.name} ${s("value")}`.toLowerCase()),simpleStyle:!0})}}):jsxRuntimeExports.jsx(Select1,{...n,options:o,simpleStyle:!0})},FSelectMultiple=({options:o=[],methods:a,...n})=>{const{t:s}=useTranslation();return n.name?jsxRuntimeExports.jsx(Controller,{name:n.name,rules:{required:n.required},control:a.control,render:({field:l})=>{var u;const c=convertErrors(a.formState.errors,n.name);return jsxRuntimeExports.jsx(SelectMultiple,{...n,options:o,value:l.value,onChange:d=>{var h;l.onChange(d),(h=n.onChange)==null||h.call(n,d)},helperText:c&&((u=c==null?void 0:c.message)!=null&&u.length?c==null?void 0:c.message:`${(n.placeholder?n.placeholder:`${s("choose")} ${n.name} ${s("value")}`).toLowerCase()}`),simpleStyle:!0})}}):jsxRuntimeExports.jsx(SelectMultiple,{...n,options:o,simpleStyle:!0})},FGroupRadioButton=o=>o.options.map((a,n)=>jsxRuntimeExports.jsx(FRadioButton,{...o,value:a.id,label:o.label?a.name:""},`${a.id} - ${n}`)),FGroupCheckbox=({labelPosition:o="right",shape:a="rectangle",...n})=>n.name?jsxRuntimeExports.jsx(Controller,{name:n.name,control:n.methods.control,render:({field:s})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:n.options.map((l,c)=>{var u;return jsxRuntimeExports.jsx(FCheckbox,{...n,name:void 0,value:(((u=s.value)==null?void 0:u.split(","))??[]).includes(l.id),label:n.label?l.name:"",onChange:d=>{var f;let h=((f=s.value)==null?void 0:f.split(","))??[];d?h.push(l.id):h=h.filter(p=>p!==l.id),h=h.join(","),s.onChange(h),n.onChange&&n.onChange(h)}},`${l.id} - ${c}`)})})}):n.options.map((s,l)=>{var c;return jsxRuntimeExports.jsx(FCheckbox,{...n,value:(((c=n.value)==null?void 0:c.split(","))??[]).includes(s.id),onChange:u=>{var h;let d=((h=n.value)==null?void 0:h.split(","))??[];u?d.push(s.id):d=d.filter(f=>f!==s.id),n.onChange&&n.onChange(d.join(","))}},`${s.id} - ${l}`)}),FColorPicker=({type:o="input",methods:a,...n})=>{var c;const s=React2.useMemo(()=>n.name?convertErrors(a.formState.errors,n.name):void 0,[n.name,(c=a.formState.errors)==null?void 0:c[n.name]]),{t:l}=useTranslation();return n.name?jsxRuntimeExports.jsx(Controller,{name:n.name,control:a.control,rules:{required:n.required},render:({field:u})=>{var d;return jsxRuntimeExports.jsx(ColorPicker,{...n,value:u.value,onChange:h=>{var f;u.onChange(h),(f=n.onChange)==null||f.call(n,h)},helperText:s&&((d=s==null?void 0:s.message)!=null&&d.length?s==null?void 0:s.message:`${l("input")} ${n.name} ${l("value")}`.toLowerCase()),simpleStyle:!0})}}):jsxRuntimeExports.jsx(ColorPicker,{...n,simpleStyle:!0})},FNumberPicker=({type:o="outline",methods:a,...n})=>{const{t:s}=useTranslation();return n.name?jsxRuntimeExports.jsx(Controller,{name:n.name,control:a.control,rules:{required:n.required},render:({field:l})=>{var u;const c=convertErrors(a.formState.errors,n.name);return jsxRuntimeExports.jsx(NumberPicker,{...n,value:l.value,onChange:d=>{var h;l.onChange(d),(h=n.onChange)==null||h.call(n,d)},type:o,simpleStyle:!0,helperText:c&&((u=c==null?void 0:c.message)!=null&&u.length?c==null?void 0:c.message:`${`${s("input")} ${n.name} ${s("value")}`.toLowerCase()}`)})}}):jsxRuntimeExports.jsx(NumberPicker,{...n,type:o,simpleStyle:!0})},FDateTimePicker=({methods:o,...a})=>{const{t:n}=useTranslation();return a.name?jsxRuntimeExports.jsx(Controller,{name:a.name,control:o.control,render:({field:s})=>{var c;const l=convertErrors(o.formState.errors,a.name);return jsxRuntimeExports.jsx(DateTimePicker,{...a,onChange:u=>{var d;s.onChange(u),(d=a.onChange)==null||d.call(a,u)},helperText:l&&((c=l==null?void 0:l.message)!=null&&c.length?l==null?void 0:l.message:`${(a.placeholder?a.placeholder:`${n("choose")} ${a.name} ${n("value")}`).toLowerCase()}`),simpleStyle:!0})}}):jsxRuntimeExports.jsx(DateTimePicker,{...a,simpleStyle:!0})},FUploadFile=({methods:o,...a})=>{const{t:n}=useTranslation();return a.name?jsxRuntimeExports.jsx(Controller,{name:a.name,control:o.control,rules:{required:a.required},render:({field:s})=>{var c;const l=convertErrors(o.formState.errors,a.name);return jsxRuntimeExports.jsx(ImportFile,{...a,value:s.value,onChange:u=>{var d;s.onChange(u),(d=a.onChange)==null||d.call(a,u)},helperText:l&&((c=l==null?void 0:l.message)!=null&&c.length?l==null?void 0:l.message:`${`${n("upload")} ${a.name} file${a.multiple?"s":""}`.toLowerCase()}`),simpleStyle:!0})}}):jsxRuntimeExports.jsx(ImportFile,{...a,simpleStyle:!0})},convertErrors=(o,a)=>{if(o&&Object.keys(o).length){const s=a.split(/[.\[\]]/).filter(l=>(l==null?void 0:l.length)>0);var n=o;for(let l of s)n&&(n=n[l]);return n}},RenderPageView=({childrenData:o,propsData:a,itemData:n,layers:s=[],children:l,methods:c,bodyId:u})=>s.filter(d=>!d.ParentId||d.ParentId===u).map(d=>jsxRuntimeExports.jsx(RenderLayerElement,{item:d,list:s,methods:c,bodyChildren:l,childrenData:o,itemData:n,propsData:a,type:"page"},d.Id)),pageAllRefs={},RenderLayerElement=o=>{var n;const a=((n=o.item.Setting)==null?void 0:n.id)??o.item.Id;return o.itemData&&o.itemData[a]&&(o.type!=="card"||o.itemData[a](o.indexItem,o.index,o.methods))?o.type==="card"?o.itemData[a](o.indexItem,o.index,o.methods):o.itemData[a]:jsxRuntimeExports.jsx(CaculateLayer,{...o})},CaculateLayer=props=>{var o,a,n,s,l,c,u,d;const findId=((o=props.item.Setting)==null?void 0:o.id)??props.item.Id;(props.item.Type===ComponentType.form||props.item.Type===ComponentType.card)&&(pageAllRefs[findId]=((n=(a=props.propsData)==null?void 0:a[findId])==null?void 0:n.ref)??React2.useRef(null)),React2.useEffect(()=>()=>{delete pageAllRefs[findId]},[]);const location=useLocation(),params=useParams(),query=new URLSearchParams(location.search),navigate=useNavigate(),children=React2.useMemo(()=>props.list.filter(h=>h.ParentId===props.item.Id),[props.list,props.item]),replaceThisVariables=(h,f)=>h.replace(replaceVariables,p=>{var w;const g=regexGetVariables.exec(p);if(!(g!=null&&g[1]))return p;const v=g[1].split(".");let b=p;switch(v[0]){case"this":props.type==="card"&&v[1]==="index"?b=props.index:b=(w=props.indexItem)==null?void 0:w[v[1]];break;case"location":b=location[v[1]];break;case"query":b=query.get(v[1]);break;case"params":b=params[v[1]];break;case"cookie":b=Util.getCookie(v[1]);break;case"storage":b=Util.getStorage(v[1]);break;case"session":b=Util.getSession(v[1]);break;default:regexWatchSingleQuote.test(g[1])?b=props.methods.watch(g[1].match(regexWatchSingleQuote)[1]):regexWatchDoubleQuote.test(g[1])&&(b=props.methods.watch(g[1].match(regexWatchDoubleQuote)[1]));break}return f&&typeof b=="string"&&(b=`"${b}"`),b}),watchForCustomProps=React2.useMemo(()=>{if(!props.item.State)return;const tmp={},triggerState=props.item.State.filter(h=>{var f;return(f=h.Trigger)==null?void 0:f.length});if(triggerState.length){for(const st of triggerState){if(regexGetVariables.test(st.Trigger))var caculate=replaceThisVariables(st.Trigger,!0);else caculate=st.Trigger;try{var checked=eval(caculate)}catch(h){console.log(caculate,h)}if(checked)for(const h of supportProperties)st[h]&&Object.keys(st[h]).forEach(f=>{st[h][f]&&(tmp[f]??(tmp[f]={}),tmp[f]={...tmp[f],...st[h][f]})})}return tmp}},[props.methods.watch(),props.item.State,location.pathname,location.search,params]),customProps=React2.useMemo(()=>{var h;let _props={...props.item.Setting};if(_props.style??(_props.style={}),_props.className??(_props.className=""),(h=_props.action)!=null&&h.length&&Array.isArray(_props.action)&&Object.values(TriggerType).forEach(trigger=>{const triggerActions=_props.action.filter(f=>f.Type===trigger),handleEvent=async(acts=[])=>{var f,p,g;for(const[_,act]of acts.entries()){const actItem=act;switch(actItem.Action){case ActionType.back:navigate(-1);break;case ActionType.navigate:if(actItem.To)if(props.indexItem&&regexGetVariables.test(actItem.To)){const v=replaceThisVariables(actItem.To);v.includes("https")?window.open(v,"_blank"):navigate((v.startsWith("/")?"/":"")+v.split("/").filter(b=>!!b.trim()).join("/"))}else actItem.To.includes("https")?window.open(actItem.To,"_blank"):navigate(actItem.To.startsWith("/")?actItem.To:`/${actItem.To}`);break;case ActionType.submit:(p=(f=pageAllRefs[actItem.To])==null?void 0:f.current)==null||p.onSubmit();return;case ActionType.showPopup:const openPopupBtn=document.querySelector(`.open-${actItem.To}`);openPopupBtn&&openPopupBtn.click();return;case ActionType.closePopup:const closePopupBtn=document.querySelector(`.close-${actItem.To}`);closePopupBtn&&closePopupBtn.click();return;case ActionType.setValue:props.methods.setValue(actItem.NameField,eval(actItem.CaculateValue));return;case ActionType.loadMore:if(pageAllRefs[actItem.loadingId]){const v=(g=pageAllRefs[actItem.loadingId].current)==null?void 0:g.data;v.totalCount&&v.data.length<v.totalCount&&pageAllRefs[actItem.loadingId].current.getData(Math.floor(v.data.length/pageAllRefs[actItem.loadingId].current.controller.size)+1)}return}}};switch(trigger){case TriggerType.click:triggerActions.length&&(_props.onClick=()=>handleEvent(triggerActions),_props.style?_props.style={..._props.style,cursor:"pointer"}:_props.style={cursor:"pointer"});break;case TriggerType.scrollend:triggerActions.length&&(_props.onScroll=f=>{let p=f.target;p.scrollTop&&Math.round(p.offsetHeight+p.scrollTop)>=p.scrollHeight-1&&handleEvent(triggerActions)});break}}),props.style&&(_props.style={..._props.style,...props.style}),watchForCustomProps!=null&&watchForCustomProps.style&&(_props.style={..._props.style,...watchForCustomProps.style}),props.className&&(_props.className=[..._props.className.split(" "),...props.className.split(" ")].filter((f,p,g)=>f.length&&g.indexOf(f)===p).join(" ")),watchForCustomProps!=null&&watchForCustomProps.className&&(_props.className=[..._props.className.split(" "),...watchForCustomProps.className.split(" ")].filter((f,p,g)=>f.length&&g.indexOf(f)===p).join(" ")),delete _props.action,props.propsData&&props.propsData[findId])var extendProps=props.type==="card"?props.propsData[findId](props.indexItem,props.index,props.methods):props.propsData[findId];return extendProps&&(extendProps.style&&(_props.style={..._props.style,...extendProps.style}),delete extendProps.style,_props={..._props,...extendProps}),_props},[props.item,props.propsData,props.methods,watchForCustomProps]),watchForDataValue=React2.useMemo(()=>{var g;const h=props.methods.watch(),f={rels:h._rels,cols:h._cols},p=(g=props.item.NameField)==null?void 0:g.split(".");return p&&p.length>1&&(f[`${p[0]}`]=h[`_${p[0]}`]),f},[JSON.stringify(props.methods.watch()),props.item.NameField]),dataValue=React2.useMemo(()=>{var f,p,g,v,b,w,x,S,E,T,C,A,R;if(props.type==="page"||!((f=props.item.NameField)!=null&&f.length)||!props.indexItem)return;const h=props.item.NameField.split(".");if(h.length>1){const j=(p=watchForDataValue.rels)==null?void 0:p.find(O=>O.TableName===h[0].replace("Id","")&&O.Name===h[1]);if(!j)return;let D=(v=(g=watchForDataValue[`${h[0]}`])==null?void 0:g.find(O=>{var H;return O&&((H=props.indexItem[h[0]])==null?void 0:H.includes(O.Id))}))==null?void 0:v[h[1]];switch(j.DataType){case FEDataType.FILE:D=(b=D==null?void 0:D.split(","))==null?void 0:b[0],D&&(props.item.Type===ComponentType.container||props.item.Type===ComponentType.navLink)&&(D={backgroundImage:`url(${D.startsWith("http")?D:ConfigData.imgUrlId+D})`});break;case FEDataType.HTML:D={__html:D};break;case FEDataType.MONEY:D=D?Util.money(D):void 0;break;case FEDataType.DATE:D=D?Util.datetoString(new Date(typeof D=="string"?parseInt(D):D)):void 0;break;case FEDataType.DATETIME:D=D?Util.datetoString(new Date(typeof D=="string"?parseInt(D):D),"dd/mm/yyyy hh:mm"):void 0;break;default:(x=(w=j.Form)==null?void 0:w.Options)!=null&&x.length&&(j.Form.ComponentType===ComponentType.select1?D=((S=j.Form.Options.find(O=>O.id===D))==null?void 0:S.name)??D:D=j.Form.Options.filter(O=>{switch(j.DataType){case FEDataType.BOOLEAN:return D===O.id||`${D}`==`${O.id}`;default:return D==null?void 0:D.includes(O.id)}}).map(O=>O.name).join(","));break}return D}else{const j=(E=watchForDataValue.cols)==null?void 0:E.find(O=>O.Name===props.item.NameField);if(!j)return;let D=props.indexItem[props.item.NameField];switch(j.DataType){case FEDataType.FILE:D&&(D=(T=D==null?void 0:D.split(","))==null?void 0:T[0],(props.item.Type===ComponentType.container||props.item.Type===ComponentType.navLink)&&(D={backgroundImage:`url(${D.startsWith("http")?D:ConfigData.imgUrlId+D})`}));break;case FEDataType.HTML:D={__html:D};break;case FEDataType.MONEY:D=D?Util.money(D):void 0;break;case FEDataType.DATE:D=D?Util.datetoString(new Date(typeof D=="string"?parseInt(D):D)):void 0;break;case FEDataType.DATETIME:D=D?Util.datetoString(new Date(typeof D=="string"?parseInt(D):D),"dd/mm/yyyy hh:mm"):void 0;break;default:(A=(C=j.Form)==null?void 0:C.Options)!=null&&A.length&&(j.Form.ComponentType===ComponentType.select1?D=((R=j.Form.Options.find(O=>O.id===D))==null?void 0:R.name)??D:D=j.Form.Options.filter(O=>{switch(j.DataType){case FEDataType.BOOLEAN:return D===O.id||`${D}`==`${O.id}`;default:return D==null?void 0:D.includes(O.id)}}).map(O=>O.name).join(","));break}return D}},[props.indexItem,props.item,watchForDataValue]),typeProps=React2.useMemo(()=>{var f,p,g,v;let h={...customProps};switch(props.item.NameField&&((f=h.validate)!=null&&f.some(b=>b.type===ValidateType.required))&&(h.required=!0),props.item.Type){case ComponentType.card:if(h.controller&&h.controller!=="all"){let b={...h.controller};if(b.searchRaw&&regexGetVariables.test(b.searchRaw)){const w=replaceThisVariables(b.searchRaw);b.searchRaw=w}if(b.page&&regexGetVariables.test(`${b.page}`)){const w=replaceThisVariables(`${b.page}`);b.page=parseInt(w)}if(b.size&&regexGetVariables.test(`${b.size}`)){const w=replaceThisVariables(`${b.size}`);b.page=parseInt(w)}if(b.ids&&regexGetVariables.test(b.ids))if(regexGetVariableByThis$1.test(b.ids)){const w=regexGetVariableByThis$1.exec(b.ids)[1];h.cardData=(((p=props.methods)==null?void 0:p.watch(`_${w}`))??[]).filter(x=>{var S,E;return(E=(S=props.indexItem)==null?void 0:S[w])==null?void 0:E.includes(x.Id)})}else{const w=replaceThisVariables(b.ids);b.ids=w}h.controller=b}break;case ComponentType.navLink:if(dataValue&&dataValue.backgroundImage&&(h={...customProps,style:{...customProps.style,...dataValue}}),h.to)if(props.indexItem&&regexGetVariables.test(h.to)){const b=replaceThisVariables(h.to);b.includes("https")&&(h.target="_blank"),h.to=(b.startsWith("/")?"/":"")+b.split("/").filter(w=>!!w.trim()).join("/")}else h.to.includes("https")?h.target="_blank":h.to=h.to.startsWith("/")?h.to:`/${h.to}`;break;case ComponentType.text:regexGetVariables.test(h.value)&&(h.value=replaceThisVariables(h.value));break;case ComponentType.button:case ComponentType.textField:case ComponentType.textArea:case ComponentType.select1:case ComponentType.selectMultiple:if(children.length){const b=children.find(x=>x.Setting.type==="prefix"),w=children.find(x=>x.Setting.type==="suffix");b&&(h.prefix=jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:b,style:void 0,className:void 0})),w&&(h.suffix=jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:w,style:void 0,className:void 0}))}props.item.Type===ComponentType.textField&&((v=(g=props.cols)==null?void 0:g.find(b=>b.Name===props.item.NameField))==null?void 0:v.DataType)===FEDataType.PASSWORD&&(h.IsPassword=!0);break}return h},[customProps,props.item.Type,dataValue,children,JSON.stringify(props.methods.watch()),location]),_options=React2.useMemo(()=>{var h,f,p,g;if(props.item.NameField){const v=(h=props.cols)==null?void 0:h.find(b=>b.Name===props.item.NameField);if(v)return(f=v==null?void 0:v.Form)==null?void 0:f.Options;if((p=props.options)!=null&&p[`${props.item.NameField}_Options`]&&((g=props.rels)==null?void 0:g.find(w=>w.Column===props.item.NameField)))return(props.options[`${props.item.NameField}_Options`]??[]).map(w=>({id:w.Id,name:w.Name}))}},[props.cols,props.rels,props.item.NameField,(s=props.options)==null?void 0:s[`${props.item.NameField}_Options`]]);switch(props.item.Type){case ComponentType.navLink:if(props.childrenData&&props.childrenData[findId])var childComponent=props.type==="card"?props.childrenData[findId](props.indexItem,props.index,props.methods):props.childrenData[findId];return Array.isArray(dataValue)?dataValue.map((f,p)=>{var v;const g={...typeProps};return g.indexItem={...props.indexItem,[props.item.NameField.split(".").length>1?props.item.NameField.split(".")[1]:props.item.NameField]:f},jsxRuntimeExports.jsx(NavLink,{...g,children:childComponent??((v=customProps.className)!=null&&v.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(b=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:b,style:void 0,className:void 0},b.Id)),props.bodyChildren]}):children.map(b=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:b,style:void 0,className:void 0},b.Id)))},`${f}-${p}`)}):jsxRuntimeExports.jsx(NavLink,{...typeProps,children:childComponent??((l=customProps.className)!=null&&l.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id)),props.bodyChildren]}):children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id)))});case ComponentType.container:if(props.childrenData&&props.childrenData[findId])var childComponent=props.type==="card"?props.childrenData[findId](props.indexItem,props.index,props.methods):props.childrenData[findId];if(dataValue&&dataValue.backgroundImage)var containerProps={...typeProps,style:{...typeProps.style,...dataValue}};const h={...containerProps??typeProps};return delete h.emptyElement,delete h.onLoaded,!props.item.ParentId&&props.type==="form"?Array.isArray(dataValue)?dataValue.map((f,p)=>{var g;return h.indexItem={...props.indexItem,[props.item.NameField.split(".").length>1?props.item.NameField.split(".")[1]:props.item.NameField]:f},jsxRuntimeExports.jsx("form",{...h,children:childComponent??((g=typeProps.className)!=null&&g.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(v=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:v,style:void 0,className:void 0},v.Id)),props.bodyChildren]}):children.map(v=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:v,style:void 0,className:void 0},v.Id)))},`${f}-${p}`)}):jsxRuntimeExports.jsx("form",{...h,children:childComponent??((c=typeProps.className)!=null&&c.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id)),props.bodyChildren]}):children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id)))}):Array.isArray(dataValue)?dataValue.map((f,p)=>{var g;return h.indexItem={...props.indexItem,[props.item.NameField.split(".").length>1?props.item.NameField.split(".")[1]:props.item.NameField]:f},jsxRuntimeExports.jsx("div",{...h,children:childComponent??((g=typeProps.className)!=null&&g.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(v=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:v,style:void 0,className:void 0},v.Id)),props.bodyChildren]}):children.map(v=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:v,style:void 0,className:void 0},v.Id)))},`${f}-${p}`)}):jsxRuntimeExports.jsx("div",{...h,children:childComponent??((u=typeProps.className)!=null&&u.includes("layout-body")?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id)),props.bodyChildren]}):children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id)))});case ComponentType.text:return props.item.NameField?typeof dataValue=="object"?jsxRuntimeExports.jsx(CustomText,{...typeProps,html:dataValue.__html}):jsxRuntimeExports.jsx(CustomText,{...typeProps,value:dataValue}):jsxRuntimeExports.jsx(CustomText,{...typeProps});case ComponentType.img:return props.item.NameField&&dataValue?jsxRuntimeExports.jsx("img",{alt:"",referrerPolicy:"no-referrer",onError:f=>{f.currentTarget.src="https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/outline/development/image-2.svg"},...typeProps,src:dataValue.startsWith("http")?dataValue:ConfigData.imgUrlId+dataValue},dataValue):jsxRuntimeExports.jsx("img",{alt:"",referrerPolicy:"no-referrer",onError:f=>{f.currentTarget.src="https://cdn.jsdelivr.net/gh/WiniGit/icon-library@latest/outline/development/image-2.svg"},...typeProps});case ComponentType.rate:return props.item.NameField?jsxRuntimeExports.jsx(Rating,{...typeProps,value:dataValue}):jsxRuntimeExports.jsx(Rating,{...typeProps});case ComponentType.progressBar:return props.item.NameField?jsxRuntimeExports.jsx(ProgressBar,{...typeProps,progressBarOnly:!0,percent:dataValue}):jsxRuntimeExports.jsx(ProgressBar,{...typeProps,progressBarOnly:!0});case ComponentType.progressCircle:return props.item.NameField?jsxRuntimeExports.jsx(ProgressCircle,{...typeProps,percent:dataValue}):jsxRuntimeExports.jsx(ProgressCircle,{...typeProps});case ComponentType.icon:return dataValue?jsxRuntimeExports.jsx(Winicon,{...typeProps,src:dataValue}):props.item.NameField?null:jsxRuntimeExports.jsx(Winicon,{...typeProps});case ComponentType.chart:return jsxRuntimeExports.jsx(ChartById,{...typeProps,id:typeProps.chartId});case ComponentType.form:return props.itemData&&(typeProps.itemData=typeProps.itemData?{...props.itemData,...typeProps.itemData}:props.itemData),props.childrenData&&(typeProps.childrenData=typeProps.childrenData?{...props.childrenData,...typeProps.childrenData}:props.childrenData),props.propsData&&(typeProps.propsData=typeProps.propsData?{...props.propsData,...typeProps.propsData}:props.propsData),jsxRuntimeExports.jsx(FormById,{...typeProps,id:typeProps.formId,ref:pageAllRefs[findId],onSubmit:f=>{console.log("????????? ",f)}});case ComponentType.card:return props.itemData&&(typeProps.itemData=typeProps.itemData?{...props.itemData,...typeProps.itemData}:props.itemData),props.childrenData&&(typeProps.childrenData=typeProps.childrenData?{...props.childrenData,...typeProps.childrenData}:props.childrenData),props.propsData&&(typeProps.propsData=typeProps.propsData?{...props.propsData,...typeProps.propsData}:props.propsData),jsxRuntimeExports.jsx(CardById,{...typeProps,id:typeProps.cardId,ref:pageAllRefs[findId]});case ComponentType.view:return props.itemData&&(typeProps.itemData=typeProps.itemData?{...props.itemData,...typeProps.itemData}:props.itemData),props.childrenData&&(typeProps.childrenData=typeProps.childrenData?{...props.childrenData,...typeProps.childrenData}:props.childrenData),props.propsData&&(typeProps.propsData=typeProps.propsData?{...props.propsData,...typeProps.propsData}:props.propsData),jsxRuntimeExports.jsx(ViewById,{...typeProps,id:typeProps.viewId});case ComponentType.popup:return typeProps.id=props.item.Id,jsxRuntimeExports.jsx(ActionPopup,{...typeProps,children:children.map(f=>jsxRuntimeExports.jsx(RenderLayerElement,{...props,item:f,style:void 0,className:void 0},f.Id))});case ComponentType.button:return jsxRuntimeExports.jsx(SimpleButton,{...typeProps});case ComponentType.textField:return typeProps.IsPassword?jsxRuntimeExports.jsx(FInputPassword,{...typeProps,name:props.item.NameField,methods:props.methods}):jsxRuntimeExports.jsx(FTextField,{...typeProps,name:props.item.NameField,methods:props.methods});case ComponentType.textArea:return jsxRuntimeExports.jsx(FTextArea,{...typeProps,name:props.item.NameField,methods:props.methods});case ComponentType.radio:return _options!=null&&_options.length?jsxRuntimeExports.jsx(FGroupRadioButton,{...typeProps,methods:props.methods,name:props.item.NameField,options:_options}):jsxRuntimeExports.jsx(FRadioButton,{...typeProps,methods:props.methods,name:props.item.NameField});case ComponentType.checkbox:return _options!=null&&_options.length?jsxRuntimeExports.jsx(FGroupCheckbox,{...typeProps,methods:props.methods,name:props.item.NameField,options:_options}):jsxRuntimeExports.jsx(FCheckbox,{...typeProps,methods:props.methods,name:props.item.NameField});case ComponentType.switch:return jsxRuntimeExports.jsx(FSwitch,{...typeProps,methods:props.methods,name:props.item.NameField});case ComponentType.select1:return jsxRuntimeExports.jsx(FSelect1,{...typeProps,methods:props.methods,name:props.item.NameField,options:_options});case ComponentType.selectMultiple:return jsxRuntimeExports.jsx(FSelectMultiple,{...typeProps,methods:props.methods,name:props.item.NameField,options:_options});case ComponentType.colorPicker:return jsxRuntimeExports.jsx(FColorPicker,{...typeProps,methods:props.methods,name:props.item.NameField});case ComponentType.numberPicker:return jsxRuntimeExports.jsx(FNumberPicker,{...typeProps,methods:props.methods,name:props.item.NameField});case ComponentType.datePicker:return jsxRuntimeExports.jsx(FDateTimePicker,{...typeProps,methods:props.methods,name:props.item.NameField});case ComponentType.upload:return jsxRuntimeExports.jsx(FUploadFile,{...typeProps,methods:props.methods,name:props.item.NameField,simpleStyle:!0});case ComponentType.ckEditor:return jsxRuntimeExports.jsx(CustomCkEditor5,{...typeProps,methods:props.methods,extraPlugins:params.ckEditorUploadPlugin??[function(f){f.plugins.get("FileRepository").createUploadAdapter=p=>new CkEditorUploadAdapter(p)}],value:(d=props.methods)==null?void 0:d.watch(props.item.NameField),onBlur:(f,p)=>{var g;(g=props.methods)==null||g.setValue(props.item.NameField,p.getData())}});default:return jsxRuntimeExports.jsx("div",{...typeProps})}},ActionPopup=({id:o,children:a})=>{const n=React2.useRef(null);return React2.useEffect(()=>{n.current&&n.current.setState({...n.current.state,content:a})},[a]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:n}),jsxRuntimeExports.jsx("button",{hidden:!0,type:"button",className:`open-${o}`,onClick:()=>{showPopup({ref:n,content:a??jsxRuntimeExports.jsx("div",{})})}}),jsxRuntimeExports.jsx("button",{hidden:!0,type:"button",className:`close-${o}`,onClick:()=>{closePopup(n)}})]})},CustomText=o=>{const a=React2.useMemo(()=>{let n={...o,style:{...o.style??{}}};return delete n.value,n.style??(n.style={}),o.maxLine&&(n.style["--max-line"]=o.maxLine),o.html&&(n.dangerouslySetInnerHTML={__html:o.html}),o.type&&o.type!=="div"?n.className=`comp-text${o.html?"-innerhtml":""} ${o.className??""}`:n.className=o.className,n},[o.html,o.className,o]);switch(o.type){case"p":return o.html?jsxRuntimeExports.jsx("p",{...a}):jsxRuntimeExports.jsx("p",{...a,children:o.value});case"span":return o.html?jsxRuntimeExports.jsx("span",{...a}):jsxRuntimeExports.jsx("span",{...a,children:o.value});case"h1":return o.html?jsxRuntimeExports.jsx("h1",{...a}):jsxRuntimeExports.jsx("h1",{...a,children:o.value});case"h2":return o.html?jsxRuntimeExports.jsx("h2",{...a}):jsxRuntimeExports.jsx("h2",{...a,children:o.value});case"h3":return o.html?jsxRuntimeExports.jsx("h3",{...a}):jsxRuntimeExports.jsx("h3",{...a,children:o.value});case"h4":return o.html?jsxRuntimeExports.jsx("h4",{...a}):jsxRuntimeExports.jsx("h4",{...a,children:o.value});case"h5":return o.html?jsxRuntimeExports.jsx("h5",{...a}):jsxRuntimeExports.jsx("h5",{...a,children:o.value});case"h6":return o.html?jsxRuntimeExports.jsx("h6",{...a}):jsxRuntimeExports.jsx("h6",{...a,children:o.value});default:return jsxRuntimeExports.jsx(Text$2,{...a,children:o.value})}},PageById=o=>{var p;const a=useForm({shouldFocusError:!1}),[n,s]=React2.useState(),[l,c]=React2.useState([]),[u,d]=React2.useState([]),[h,f]=React2.useState(!0);return React2.useEffect(()=>{h||f(!0),new TableController("page").getByListId([o.id]).then(async v=>{if(v.code===200&&v.data[0]){const b=v.data[0];s(b);const w=new TableController("layer");if(b.LayoutId!==(n==null?void 0:n.LayoutId)){const x=await Promise.all([w.getListSimple({page:1,size:2e3,query:`(@Id:{${b.LayoutId}}) | (@LayoutId:{${b.LayoutId}})`}),w.getListSimple({page:1,size:1e3,query:`@PageId:{${b.Id}}`})]);x[0].code===200&&x[1].code===200&&(c(x[0].data.map(S=>({...S,Setting:JSON.parse(S.Setting),State:S.State?JSON.parse(S.State):void 0}))),d(x[1].data.map(S=>({...S,Setting:JSON.parse(S.Setting),State:S.State?JSON.parse(S.State):void 0}))))}else{const x=await w.getListSimple({page:1,size:1e3,query:`@PageId:{${b.Id}}`});x.code===200&&d(x.data.map(S=>({...S,Setting:JSON.parse(S.Setting),State:S.State?JSON.parse(S.State):void 0})))}f(!1)}else s(void 0)})},[o.id]),n&&l.length?jsxRuntimeExports.jsx(RenderPageView,{layers:l,...o,methods:o.methods??a,children:h?jsxRuntimeExports.jsx(LoadingView,{}):jsxRuntimeExports.jsx(RenderPageView,{layers:u,...o,methods:o.methods??a,bodyId:(p=l.find(g=>{var v,b;return(b=(v=g.Setting)==null?void 0:v.className)==null?void 0:b.includes("layout-body")}))==null?void 0:p.Id},n.Id)},n.LayoutId):null},PageByUrl=o=>{var p;const a=useForm({shouldFocusError:!1}),[n,s]=React2.useState(),[l,c]=React2.useState([]),[u,d]=React2.useState([]),[h,f]=React2.useState(!0);return React2.useEffect(()=>{h||f(!0),new TableController("page").getListSimple({page:1,size:1,query:`@Url:{${o.url.length?o.url.replace(/[\-\/]/g,v=>"\\"+v):"\\/"}}`}).then(async v=>{if(v.code===200&&v.data[0]){const b=v.data[0];s(b);const w=new TableController("layer");if(b.LayoutId!==(n==null?void 0:n.LayoutId)){const x=await Promise.all([w.getListSimple({page:1,size:2e3,query:`(@Id:{${b.LayoutId}}) | (@LayoutId:{${b.LayoutId}})`}),w.getListSimple({page:1,size:1e3,query:`@PageId:{${b.Id}}`})]);x[0].code===200&&x[1].code===200&&(c(x[0].data.map(S=>({...S,Setting:JSON.parse(S.Setting),State:S.State?JSON.parse(S.State):void 0}))),d(x[1].data.map(S=>({...S,Setting:JSON.parse(S.Setting),State:S.State?JSON.parse(S.State):void 0}))))}else{const x=await w.getListSimple({page:1,size:1e3,query:`@PageId:{${b.Id}}`});x.code===200&&d(x.data.map(S=>({...S,Setting:JSON.parse(S.Setting),State:S.State?JSON.parse(S.State):void 0})))}f(!1)}else s(void 0)})},[o.url]),n&&l.length?jsxRuntimeExports.jsx(RenderPageView,{layers:l,...o,methods:o.methods??a,children:h?jsxRuntimeExports.jsx(LoadingView,{}):jsxRuntimeExports.jsx(RenderPageView,{layers:u,...o,methods:o.methods??a,bodyId:(p=l.find(g=>{var v,b;return(b=(v=g.Setting)==null?void 0:v.className)==null?void 0:b.includes("layout-body")}))==null?void 0:p.Id},n.Id)},n.LayoutId):null},LoadingView=()=>jsxRuntimeExports.jsx("div",{className:"col",style:{width:"100%",gap:"2rem",padding:"2.4rem"},children:Array.from({length:5}).map((o,a)=>jsxRuntimeExports.jsx("div",{className:"skeleton-loading",style:{height:"16rem"}},a))}),CardById=React2.forwardRef((o,a)=>{var C;const n=useForm({shouldFocusError:!1}),[s,l]=React2.useState(),c=React2.useMemo(()=>(s==null?void 0:s.Props)??[],[s]),u=new TableController("column"),d=new TableController("rel"),h=React2.useMemo(()=>c.filter(A=>{var R;return(R=A.NameField)==null?void 0:R.length}).map(A=>A.NameField),[c.length]),[f,p]=React2.useState(),[g,v]=React2.useState({data:[],totalCount:void 0}),{t:b}=useTranslation();React2.useEffect(()=>{o.id?new SettingDataController("card").getByIds([o.id]).then(async R=>{if(R.code===200&&R.data[0]){let j=R.data[0];j.Props&&typeof j.Props=="string"&&(j.Props=JSON.parse(j.Props)),l(j)}}):s&&l(void 0)},[o.id]),React2.useEffect(()=>{!o.controller&&!f?p({page:1,size:8,searchRaw:"*"}):f!==o.controller&&(o.controller==="all"||!f||Object.keys(o.controller).some(A=>`${f[A]}`!=`${o.controller[A]}`))&&p(o.controller)},[o.controller]);const w=async()=>{const A=h.filter(j=>j.split(".").length>1),R=await d.getListSimple({page:1,size:100,query:`@TableFK:{${s.TbName}} @Column:{${A.map(j=>j.split(".")[0]).filter((j,D,O)=>O.indexOf(j)===D).join(" | ")}}`,returns:["Id","Column","TablePK"]});if(R.code===200){const j=await u.getListSimple({page:1,size:R.data.length*50,query:`@TableName:{${R.data.map(D=>D.TablePK).join(" | ")}} @Name:{${R.data.map(D=>A.filter(H=>H.split(".")[0]===D.Column).map(H=>H.split(".")[1])).flat(1/0).join(" | ")}}`});j.code===200&&n.setValue("_rels",j.data)}},x=async()=>{const A=await u.getListSimple({page:1,size:200,query:`@TableName:{${s.TbName}} @Name:{${h.filter(R=>R.split(".").length===1).join(" | ")}}`});A.code===200&&n.setValue("_cols",A.data)},S=async A=>{const R=new DataController(s.TbName);let j;if(f==="all"){const O=await R.getAll();O.code===200&&(j={data:O.data,totalCount:O.data.length})}else if(f.searchRaw){const O={...f,searchRaw:f.searchRaw??"*"};A&&(O.page=A);const H=await R.patternList(O);H.code===200&&(j={data:A?[...g.data,...H.data]:H.data,totalCount:H.totalCount}),delete H.code,delete H.message,delete H.data,delete H.totalCount,Object.keys(H).forEach(q=>n.setValue(q,H[q]))}else{let O=f.ids.split(",");f.maxLength&&f.maxLength!=="none"&&(O=O.slice(0,f.maxLength));const H=await R.getByListId(O),q=H.data.filter(Y=>Y!=null);H.code===200&&(j={data:q,totalCount:q.length})}if(!j)return;let D=c.filter(O=>{var H;return O.Type===ComponentType.card&&((H=O.Setting.controller)==null?void 0:H.ids)&&regexGetVariableByThis$1.test(O.Setting.controller.ids)}).map(O=>regexGetVariableByThis$1.exec(O.Setting.controller.ids)[1]);D.push(...h.filter(O=>O.split(".").length>1).map(O=>O.split(".")[0])),D=D.filter((O,H,q)=>q.indexOf(O)===H);for(const O of D){const H=n.getValues(`_${O}`)??[],q=new DataController(O.replace("Id","")),Y=j.data.map(te=>{var ee;return(ee=te[O])==null?void 0:ee.split(",")}).flat(1/0).filter((te,ee,re)=>(te==null?void 0:te.length)&&H.every(ne=>ne.Id!==te)&&re.indexOf(te)===ee);Y.length&&q.getByListId(Y).then(te=>{te.code===200&&n.setValue(`_${O}`,[...H,...te.data.filter(ee=>ee!=null)])})}v(j),o.onLoaded&&o.onLoaded(j)};React2.useEffect(()=>{h.length&&(x(),w())},[h]),React2.useEffect(()=>{var R;const A=((R=n.getValues("_cols"))==null?void 0:R.filter(j=>j.DataType===FEDataType.FILE&&h.includes(j.Name)))??[];if(A.length&&g.data.length&&h.length){const j=n.watch("_files")??[],D=g.data.map(O=>A.map(H=>{var q;return(q=O[H.Name])==null?void 0:q.split(",")})).flat(1/0).filter((O,H,q)=>(O==null?void 0:O.length)&&j.every(Y=>Y.Id!==O)&&q.indexOf(O)===H);D.length&&BaseDA.getFilesInfor(D).then(O=>{O.code===200&&n.setValue("_files",[...j,...O.data.filter(H=>H!=null)])})}},[g.data,n.watch("_cols"),h]),React2.useEffect(()=>{s&&(f&&!o.cardData?S():o.cardData&&v({data:o.cardData,totalCount:o.cardData.length}))},[s,f,(C=o.cardData)==null?void 0:C.length]),React2.useEffect(()=>{var A;return(A=o.onUnMount)==null?void 0:A.call(o)},[]);const E=React2.useMemo(()=>n.watch(),[JSON.stringify(n.watch())]),T=React2.useMemo(()=>{if(E){const A={...E};return delete A._rels,delete A._cols,A}},[E]);return React2.useEffect(()=>{var A;(A=o.onRelativeLoaded)==null||A.call(o,T)},[T]),React2.useImperativeHandle(a,()=>({getData:S,data:g,controller:f,setData:v,methods:n,relativeData:T}),[g,s,f,T,n]),s?g.totalCount===0?o.emptyElement??(o.emptyLink&&jsxRuntimeExports.jsx(EmptyPage,{imgUrl:o.emptyLink,imgStyle:{maxWidth:"16.4rem"},style:o.style,title:o.emptyMessage??b("noDataFound")})):g.data.map((A,R)=>jsxRuntimeExports.jsx(RenderCard,{...o,cardItem:s,layers:c,indexItem:A,index:R,extendData:E},A.Id)):null}),RenderCard=o=>{const a=useForm({shouldFocusError:!1});return React2.useEffect(()=>{Object.keys(o.extendData).forEach(n=>{a.setValue(n,o.extendData[n])})},[o.extendData]),o.cardItem.Props.filter(n=>!n.ParentId).map(n=>jsxRuntimeExports.jsx(RenderLayerElement,{item:n,list:o.layers,style:o.style,className:o.className,type:"card",methods:a,indexItem:o.indexItem,index:o.index,itemData:o.itemData,childrenData:o.childrenData,propsData:o.propsData},n.Id))},appendDesignTokens=o=>{const a=o.map(n=>n.Value?{...n,Value:typeof n.Value=="string"?JSON.parse(n.Value):n.Value}:n);if(a.length){const n=a.filter(h=>{var f,p;return h.Type!==DesignTokenType.group&&(((f=h.Value)==null?void 0:f.lightMode)||((p=h.Value)==null?void 0:p.darkMode))}),s=a.filter(h=>h.Type===DesignTokenType.group);let l=document.head.querySelector(":scope > .designTokens")??document.createElement("style");l.type="text/css";const c=n.filter(h=>h.Type===DesignTokenType.color),u=n.filter(h=>h.Type!==DesignTokenType.color),d=`
        html {
            color-scheme: light;
        }

        html.dark {
            color-scheme: dark;
        }
            
        :root { 
${c.map(h=>{var p;const f=s.find(g=>g.Id===h.ParentId);return(p=h.Value)!=null&&p.lightMode?`--${f?`${Util.toSlug(f.Name)}-`:""}${Util.toSlug(h.Name)}: light-dark(${h.Value.lightMode}, ${h.Value.darkMode});`:""}).join(`
`)}
 }


        ${u.map(h=>{let f;switch(h.Type){case DesignTokenType.font:f=`font: ${h.Value.lightMode}`;break;case DesignTokenType.border:f=`border: ${h.Value.lightMode}`;break;case DesignTokenType.boxShadow:f=`box-shadow: ${h.Value.lightMode}`;break;case DesignTokenType.custom:return h.Value.lightMode}return f?`.${h.Name} { 
${f};
 }`:""}).join(`
`)}
        `;l.innerHTML=d,l.classList.contains("designTokens")||(l.classList.add("designTokens"),document.head.appendChild(l))}},WiniProvider=o=>(ConfigData.pid=o.pid,ConfigData.url=o.url,ConfigData.imgUrlId=o.imgUrlId,ConfigData.fileUrl=o.fileUrl,o.onInvalidToken&&(ConfigData.onInvalidToken=o.onInvalidToken),React2.useEffect(()=>{ConfigData.pid=o.pid,o.pid.length===32?(new TableController("designtoken").getAll().then(s=>{s.code===200&&s.data.length&&appendDesignTokens(s.data)}),new WiniController("Project").getByIds([o.pid]).then(s=>{s.code===200&&s.data[0]&&(document.head.querySelector(':scope > link[rel="icon"]').href=ConfigData.imgUrlId+s.data[0].LogoId,document.head.querySelector(":scope > title").innerHTML=s.data[0].Name,o.onProjectLoaded&&o.onProjectLoaded(s.data[0]))})):console.log("Project not found")},[o.pid]),React2.useEffect(()=>{ConfigData.url=o.url},[o.url]),React2.useEffect(()=>{ConfigData.imgUrlId=o.imgUrlId},[o.imgUrlId]),React2.useEffect(()=>{ConfigData.fileUrl=o.fileUrl},[o.fileUrl]),React2.useEffect(()=>{o.onInvalidToken&&(ConfigData.onInvalidToken=o.onInvalidToken)},[o.onInvalidToken]),jsxRuntimeExports.jsxs(BrowserRouter,{children:[jsxRuntimeExports.jsx(Lt,{}),jsxRuntimeExports.jsx(Dialog$1,{}),jsxRuntimeExports.jsx(Routes,{children:o.children})]})),table="_table_1pao8_43",header="_header_1pao8_99",cell="_cell_1pao8_147",title="_title_1pao8_249",content="_content_1pao8_251",styles={"customer-avatar":"_customer-avatar_1pao8_1","table-feature":"_table-feature_1pao8_43",table,header,"table-row":"_table-row_1pao8_107",cell,"header-cell":"_header-cell_1pao8_147","last-cell":"_last-cell_1pao8_167",title,content,"add-child-icon-btn":"_add-child-icon-btn_1pao8_287","column-action-icon":"_column-action-icon_1pao8_313","column-sort-icon":"_column-sort-icon_1pao8_329","column-action-sort-icon":"_column-action-sort-icon_1pao8_351","add-child-table-row":"_add-child-table-row_1pao8_371","table-img":"_table-img_1pao8_415","dropdown-select-btn":"_dropdown-select-btn_1pao8_503","button-filter":"_button-filter_1pao8_591","selected-item-options":"_selected-item-options_1pao8_625","selected-item-total":"_selected-item-total_1pao8_659","selected-item-actions":"_selected-item-actions_1pao8_683"};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.18.5";var current_ansi=1252,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],set_ansi=function(o){VALID_ANSI.indexOf(o)!=-1&&(current_ansi=o)};function reset_ansi(){set_ansi(1252)}var set_cp=function(o){set_ansi(o)};function reset_cp(){set_cp(1200),reset_ansi()}var _getchar=function o(a){return String.fromCharCode(a)},_getansi=function o(a){return String.fromCharCode(a)},$cptable,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(o){for(var a="",n=0,s=0,l=0,c=0,u=0,d=0,h=0,f=0;f<o.length;)n=o.charCodeAt(f++),c=n>>2,s=o.charCodeAt(f++),u=(n&3)<<4|s>>4,l=o.charCodeAt(f++),d=(s&15)<<2|l>>6,h=l&63,isNaN(s)?d=h=64:isNaN(l)&&(h=64),a+=Base64_map.charAt(c)+Base64_map.charAt(u)+Base64_map.charAt(d)+Base64_map.charAt(h);return a}function Base64_decode(o){var a="",n=0,s=0,l=0,c=0,u=0,d=0,h=0;o=o.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<o.length;)c=Base64_map.indexOf(o.charAt(f++)),u=Base64_map.indexOf(o.charAt(f++)),n=c<<2|u>>4,a+=String.fromCharCode(n),d=Base64_map.indexOf(o.charAt(f++)),s=(u&15)<<4|d>>2,d!==64&&(a+=String.fromCharCode(s)),h=Base64_map.indexOf(o.charAt(f++)),l=(d&3)<<6|h,h!==64&&(a+=String.fromCharCode(l));return a}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var o=!Buffer.from;if(!o)try{Buffer.from("foo","utf8")}catch{o=!0}return o?function(a,n){return n?new Buffer(a,n):new Buffer(a)}:Buffer.from.bind(Buffer)}return function(){}}();function new_raw_buf(o){return has_buf?Buffer.alloc?Buffer.alloc(o):new Buffer(o):typeof Uint8Array<"u"?new Uint8Array(o):new Array(o)}function new_unsafe_buf(o){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(o):new Buffer(o):typeof Uint8Array<"u"?new Uint8Array(o):new Array(o)}var s2a=function o(a){return has_buf?Buffer_from(a,"binary"):a.split("").map(function(n){return n.charCodeAt(0)&255})};function s2ab(o){if(typeof ArrayBuffer>"u")return s2a(o);for(var a=new ArrayBuffer(o.length),n=new Uint8Array(a),s=0;s!=o.length;++s)n[s]=o.charCodeAt(s)&255;return a}function a2s(o){if(Array.isArray(o))return o.map(function(s){return String.fromCharCode(s)}).join("");for(var a=[],n=0;n<o.length;++n)a[n]=String.fromCharCode(o[n]);return a.join("")}function a2u(o){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(o)}var bconcat=has_buf?function(o){return Buffer.concat(o.map(function(a){return Buffer.isBuffer(a)?a:Buffer_from(a)}))}:function(o){if(typeof Uint8Array<"u"){var a=0,n=0;for(a=0;a<o.length;++a)n+=o[a].length;var s=new Uint8Array(n),l=0;for(a=0,n=0;a<o.length;n+=l,++a)if(l=o[a].length,o[a]instanceof Uint8Array)s.set(o[a],n);else{if(typeof o[a]=="string")throw"wtf";s.set(new Uint8Array(o[a]),n)}return s}return[].concat.apply([],o.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function utf8decode(o){for(var a=[],n=0,s=o.length+250,l=new_raw_buf(o.length+255),c=0;c<o.length;++c){var u=o.charCodeAt(c);if(u<128)l[n++]=u;else if(u<2048)l[n++]=192|u>>6&31,l[n++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var d=o.charCodeAt(++c)&1023;l[n++]=240|u>>8&7,l[n++]=128|u>>2&63,l[n++]=128|d>>6&15|(u&3)<<4,l[n++]=128|d&63}else l[n++]=224|u>>12&15,l[n++]=128|u>>6&63,l[n++]=128|u&63;n>s&&(a.push(l.slice(0,n)),n=0,l=new_raw_buf(65535),s=65530)}return a.push(l.slice(0,n)),bconcat(a)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(o){for(var a="",n=o.length-1;n>=0;)a+=o.charAt(n--);return a}function pad0(o,a){var n=""+o;return n.length>=a?n:fill("0",a-n.length)+n}function pad_(o,a){var n=""+o;return n.length>=a?n:fill(" ",a-n.length)+n}function rpad_(o,a){var n=""+o;return n.length>=a?n:n+fill(" ",a-n.length)}function pad0r1(o,a){var n=""+Math.round(o);return n.length>=a?n:fill("0",a-n.length)+n}function pad0r2(o,a){var n=""+o;return n.length>=a?n:fill("0",a-n.length)+n}var p2_32=Math.pow(2,32);function pad0r(o,a){if(o>p2_32||o<-p2_32)return pad0r1(o,a);var n=Math.round(o);return pad0r2(n,a)}function SSF_isgeneral(o,a){return a=a||0,o.length>=7+a&&(o.charCodeAt(a)|32)===103&&(o.charCodeAt(a+1)|32)===101&&(o.charCodeAt(a+2)|32)===110&&(o.charCodeAt(a+3)|32)===101&&(o.charCodeAt(a+4)|32)===114&&(o.charCodeAt(a+5)|32)===97&&(o.charCodeAt(a+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(o){return o||(o={}),o[0]="General",o[1]="0",o[2]="0.00",o[3]="#,##0",o[4]="#,##0.00",o[9]="0%",o[10]="0.00%",o[11]="0.00E+00",o[12]="# ?/?",o[13]="# ??/??",o[14]="m/d/yy",o[15]="d-mmm-yy",o[16]="d-mmm",o[17]="mmm-yy",o[18]="h:mm AM/PM",o[19]="h:mm:ss AM/PM",o[20]="h:mm",o[21]="h:mm:ss",o[22]="m/d/yy h:mm",o[37]="#,##0 ;(#,##0)",o[38]="#,##0 ;[Red](#,##0)",o[39]="#,##0.00;(#,##0.00)",o[40]="#,##0.00;[Red](#,##0.00)",o[45]="mm:ss",o[46]="[h]:mm:ss",o[47]="mmss.0",o[48]="##0.0E+0",o[49]="@",o[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',o}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(o,a,n){for(var s=o<0?-1:1,l=o*s,c=0,u=1,d=0,h=1,f=0,p=0,g=Math.floor(l);f<a&&(g=Math.floor(l),d=g*u+c,p=g*f+h,!(l-g<5e-8));)l=1/(l-g),c=u,u=d,h=f,f=p;if(p>a&&(f>a?(p=h,d=c):(p=f,d=u)),!n)return[0,s*d,p];var v=Math.floor(s*d/p);return[v,s*d-v*p,p]}function SSF_parse_date_code(o,a,n){if(o>2958465||o<0)return null;var s=o|0,l=Math.floor(86400*(o-s)),c=0,u=[],d={D:s,T:l,u:86400*(o-s)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),a&&a.date1904&&(s+=1462),d.u>.9999&&(d.u=0,++l==86400&&(d.T=l=0,++s,++d.D)),s===60)u=n?[1317,10,29]:[1900,2,29],c=3;else if(s===0)u=n?[1317,8,29]:[1900,1,0],c=6;else{s>60&&--s;var h=new Date(1900,0,1);h.setDate(h.getDate()+s-1),u=[h.getFullYear(),h.getMonth()+1,h.getDate()],c=h.getDay(),s<60&&(c=(c+6)%7),n&&(c=SSF_fix_hijri(h,u))}return d.y=u[0],d.m=u[1],d.d=u[2],d.S=l%60,l=Math.floor(l/60),d.M=l%60,l=Math.floor(l/60),d.H=l,d.q=c,d}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(o,a){var n=o.getTime();return a?n-=1461*24*60*60*1e3:o>=SSFbase1904&&(n+=24*60*60*1e3),(n-(SSFdnthresh+(o.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(o){return o.indexOf(".")==-1?o:o.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(o){return o.indexOf("E")==-1?o:o.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(o){var a=o<0?12:11,n=SSF_strip_decimal(o.toFixed(12));return n.length<=a||(n=o.toPrecision(10),n.length<=a)?n:o.toExponential(5)}function SSF_large_exp(o){var a=SSF_strip_decimal(o.toFixed(11));return a.length>(o<0?12:11)||a==="0"||a==="-0"?o.toPrecision(6):a}function SSF_general_num(o){var a=Math.floor(Math.log(Math.abs(o))*Math.LOG10E),n;return a>=-4&&a<=-1?n=o.toPrecision(10+a):Math.abs(a)<=9?n=SSF_small_exp(o):a===10?n=o.toFixed(10).substr(0,12):n=SSF_large_exp(o),SSF_strip_decimal(SSF_normalize_exp(n.toUpperCase()))}function SSF_general(o,a){switch(typeof o){case"string":return o;case"boolean":return o?"TRUE":"FALSE";case"number":return(o|0)===o?o.toString(10):SSF_general_num(o);case"undefined":return"";case"object":if(o==null)return"";if(o instanceof Date)return SSF_format(14,datenum_local(o,a&&a.date1904),a)}throw new Error("unsupported value in General format: "+o)}function SSF_fix_hijri(o,a){a[0]-=581;var n=o.getDay();return o<60&&(n=(n+6)%7),n}function SSF_write_date(o,a,n,s){var l="",c=0,u=0,d=n.y,h,f=0;switch(o){case 98:d=n.y+543;case 121:switch(a.length){case 1:case 2:h=d%100,f=2;break;default:h=d%1e4,f=4;break}break;case 109:switch(a.length){case 1:case 2:h=n.m,f=a.length;break;case 3:return months[n.m-1][1];case 5:return months[n.m-1][0];default:return months[n.m-1][2]}break;case 100:switch(a.length){case 1:case 2:h=n.d,f=a.length;break;case 3:return days[n.q][0];default:return days[n.q][1]}break;case 104:switch(a.length){case 1:case 2:h=1+(n.H+11)%12,f=a.length;break;default:throw"bad hour format: "+a}break;case 72:switch(a.length){case 1:case 2:h=n.H,f=a.length;break;default:throw"bad hour format: "+a}break;case 77:switch(a.length){case 1:case 2:h=n.M,f=a.length;break;default:throw"bad minute format: "+a}break;case 115:if(a!="s"&&a!="ss"&&a!=".0"&&a!=".00"&&a!=".000")throw"bad second format: "+a;return n.u===0&&(a=="s"||a=="ss")?pad0(n.S,a.length):(s>=2?u=s===3?1e3:100:u=s===1?10:1,c=Math.round(u*(n.S+n.u)),c>=60*u&&(c=0),a==="s"?c===0?"0":""+c/u:(l=pad0(c,2+s),a==="ss"?l.substr(0,2):"."+l.substr(2,a.length-1)));case 90:switch(a){case"[h]":case"[hh]":h=n.D*24+n.H;break;case"[m]":case"[mm]":h=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":h=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+a}f=a.length===3?1:2;break;case 101:h=d,f=1;break}var p=f>0?pad0(h,f):"";return p}function commaify(o){var a=3;if(o.length<=a)return o;for(var n=o.length%a,s=o.substr(0,n);n!=o.length;n+=a)s+=(s.length>0?",":"")+o.substr(n,a);return s}var pct1=/%/g;function write_num_pct(o,a,n){var s=a.replace(pct1,""),l=a.length-s.length;return write_num(o,s,n*Math.pow(10,2*l))+fill("%",l)}function write_num_cm(o,a,n){for(var s=a.length-1;a.charCodeAt(s-1)===44;)--s;return write_num(o,a.substr(0,s),n/Math.pow(10,3*(a.length-s)))}function write_num_exp(o,a){var n,s=o.indexOf("E")-o.indexOf(".")-1;if(o.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+write_num_exp(o,-a);var l=o.indexOf(".");l===-1&&(l=o.indexOf("E"));var c=Math.floor(Math.log(a)*Math.LOG10E)%l;if(c<0&&(c+=l),n=(a/Math.pow(10,c)).toPrecision(s+1+(l+c)%l),n.indexOf("e")===-1){var u=Math.floor(Math.log(a)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(u-n.length+c):n+="E+"+(u-c);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,l)+"."+n.substr(2+l),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,h,f,p){return h+f+p.substr(0,(l+c)%l)+"."+p.substr(c)+"E"})}else n=a.toExponential(s);return o.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),o.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(o,a,n){var s=parseInt(o[4],10),l=Math.round(a*s),c=Math.floor(l/s),u=l-c*s,d=s;return n+(c===0?"":""+c)+" "+(u===0?fill(" ",o[1].length+1+o[4].length):pad_(u,o[1].length)+o[2]+"/"+o[3]+pad0(d,o[4].length))}function write_num_f2(o,a,n){return n+(a===0?"":""+a)+fill(" ",o[1].length+2+o[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(o){for(var a="",n,s=0;s!=o.length;++s)switch(n=o.charCodeAt(s)){case 35:break;case 63:a+=" ";break;case 48:a+="0";break;default:a+=String.fromCharCode(n)}return a}function rnd(o,a){var n=Math.pow(10,a);return""+Math.round(o*n)/n}function dec(o,a){var n=o-Math.floor(o),s=Math.pow(10,a);return a<(""+Math.round(n*s)).length?0:Math.round(n*s)}function carry(o,a){return a<(""+Math.round((o-Math.floor(o))*Math.pow(10,a))).length?1:0}function flr(o){return o<2147483647&&o>-2147483648?""+(o>=0?o|0:o-1|0):""+Math.floor(o)}function write_num_flt(o,a,n){if(o.charCodeAt(0)===40&&!a.match(closeparen)){var s=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?write_num_flt("n",s,n):"("+write_num_flt("n",s,-n)+")"}if(a.charCodeAt(a.length-1)===44)return write_num_cm(o,a,n);if(a.indexOf("%")!==-1)return write_num_pct(o,a,n);if(a.indexOf("E")!==-1)return write_num_exp(a,n);if(a.charCodeAt(0)===36)return"$"+write_num_flt(o,a.substr(a.charAt(1)==" "?2:1),n);var l,c,u,d,h=Math.abs(n),f=n<0?"-":"";if(a.match(/^00+$/))return f+pad0r(h,a.length);if(a.match(/^[#?]+$/))return l=pad0r(n,0),l==="0"&&(l=""),l.length>a.length?l:hashq(a.substr(0,a.length-l.length))+l;if(c=a.match(frac1))return write_num_f1(c,h,f);if(a.match(/^#+0+$/))return f+pad0r(h,a.length-a.indexOf("0"));if(c=a.match(dec1))return l=rnd(n,c[1].length).replace(/^([^\.]+)$/,"$1."+hashq(c[1])).replace(/\.$/,"."+hashq(c[1])).replace(/\.(\d*)$/,function(w,x){return"."+x+fill("0",hashq(c[1]).length-x.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),c=a.match(/^(0*)\.(#*)$/))return f+rnd(h,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=a.match(/^#{1,3},##0(\.?)$/))return f+commaify(pad0r(h,0));if(c=a.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+write_num_flt(o,a,-n):commaify(""+(Math.floor(n)+carry(n,c[1].length)))+"."+pad0(dec(n,c[1].length),c[1].length);if(c=a.match(/^#,#*,#0/))return write_num_flt(o,a.replace(/^#,#*,/,""),n);if(c=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=_strrev(write_num_flt(o,a.replace(/[\\-]/g,""),n)),u=0,_strrev(_strrev(a.replace(/\\/g,"")).replace(/[0#]/g,function(w){return u<l.length?l.charAt(u++):w==="0"?"0":""}));if(a.match(phone))return l=write_num_flt(o,"##########",n),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var p="";if(c=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),d=SSF_frac(h,Math.pow(10,u)-1,!1),l=""+f,p=write_num("n",c[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),l+=p+c[2]+"/"+c[3],p=rpad_(d[2],u),p.length<c[4].length&&(p=hashq(c[4].substr(c[4].length-p.length))+p),l+=p,l;if(c=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),d=SSF_frac(h,Math.pow(10,u)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?pad_(d[1],u)+c[2]+"/"+c[3]+rpad_(d[2],u):fill(" ",2*u+1+c[2].length+c[3].length));if(c=a.match(/^[#0?]+$/))return l=pad0r(n,0),a.length<=l.length?l:hashq(a.substr(0,a.length-l.length))+l;if(c=a.match(/^([#0?]+)\.([#0]+)$/)){l=""+n.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=l.indexOf(".");var g=a.indexOf(".")-u,v=a.length-l.length-g;return hashq(a.substr(0,g)+l+a.substr(a.length-v))}if(c=a.match(/^00,000\.([#0]*0)$/))return u=dec(n,c[1].length),n<0?"-"+write_num_flt(o,a,-n):commaify(flr(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?pad0(0,3-w.length):"")+w})+"."+pad0(u,c[1].length);switch(a){case"###,##0.00":return write_num_flt(o,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var b=commaify(pad0r(h,0));return b!=="0"?f+b:"";case"###,###.00":return write_num_flt(o,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return write_num_flt(o,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+a+"|")}function write_num_cm2(o,a,n){for(var s=a.length-1;a.charCodeAt(s-1)===44;)--s;return write_num(o,a.substr(0,s),n/Math.pow(10,3*(a.length-s)))}function write_num_pct2(o,a,n){var s=a.replace(pct1,""),l=a.length-s.length;return write_num(o,s,n*Math.pow(10,2*l))+fill("%",l)}function write_num_exp2(o,a){var n,s=o.indexOf("E")-o.indexOf(".")-1;if(o.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+write_num_exp2(o,-a);var l=o.indexOf(".");l===-1&&(l=o.indexOf("E"));var c=Math.floor(Math.log(a)*Math.LOG10E)%l;if(c<0&&(c+=l),n=(a/Math.pow(10,c)).toPrecision(s+1+(l+c)%l),!n.match(/[Ee]/)){var u=Math.floor(Math.log(a)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(u-n.length+c):n+="E+"+(u-c),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,h,f,p){return h+f+p.substr(0,(l+c)%l)+"."+p.substr(c)+"E"})}else n=a.toExponential(s);return o.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),o.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function write_num_int(o,a,n){if(o.charCodeAt(0)===40&&!a.match(closeparen)){var s=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?write_num_int("n",s,n):"("+write_num_int("n",s,-n)+")"}if(a.charCodeAt(a.length-1)===44)return write_num_cm2(o,a,n);if(a.indexOf("%")!==-1)return write_num_pct2(o,a,n);if(a.indexOf("E")!==-1)return write_num_exp2(a,n);if(a.charCodeAt(0)===36)return"$"+write_num_int(o,a.substr(a.charAt(1)==" "?2:1),n);var l,c,u,d,h=Math.abs(n),f=n<0?"-":"";if(a.match(/^00+$/))return f+pad0(h,a.length);if(a.match(/^[#?]+$/))return l=""+n,n===0&&(l=""),l.length>a.length?l:hashq(a.substr(0,a.length-l.length))+l;if(c=a.match(frac1))return write_num_f2(c,h,f);if(a.match(/^#+0+$/))return f+pad0(h,a.length-a.indexOf("0"));if(c=a.match(dec1))return l=(""+n).replace(/^([^\.]+)$/,"$1."+hashq(c[1])).replace(/\.$/,"."+hashq(c[1])),l=l.replace(/\.(\d*)$/,function(w,x){return"."+x+fill("0",hashq(c[1]).length-x.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),c=a.match(/^(0*)\.(#*)$/))return f+(""+h).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=a.match(/^#{1,3},##0(\.?)$/))return f+commaify(""+h);if(c=a.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+write_num_int(o,a,-n):commaify(""+n)+"."+fill("0",c[1].length);if(c=a.match(/^#,#*,#0/))return write_num_int(o,a.replace(/^#,#*,/,""),n);if(c=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=_strrev(write_num_int(o,a.replace(/[\\-]/g,""),n)),u=0,_strrev(_strrev(a.replace(/\\/g,"")).replace(/[0#]/g,function(w){return u<l.length?l.charAt(u++):w==="0"?"0":""}));if(a.match(phone))return l=write_num_int(o,"##########",n),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var p="";if(c=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),d=SSF_frac(h,Math.pow(10,u)-1,!1),l=""+f,p=write_num("n",c[1],d[1]),p.charAt(p.length-1)==" "&&(p=p.substr(0,p.length-1)+"0"),l+=p+c[2]+"/"+c[3],p=rpad_(d[2],u),p.length<c[4].length&&(p=hashq(c[4].substr(c[4].length-p.length))+p),l+=p,l;if(c=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),d=SSF_frac(h,Math.pow(10,u)-1,!0),f+(d[0]||(d[1]?"":"0"))+" "+(d[1]?pad_(d[1],u)+c[2]+"/"+c[3]+rpad_(d[2],u):fill(" ",2*u+1+c[2].length+c[3].length));if(c=a.match(/^[#0?]+$/))return l=""+n,a.length<=l.length?l:hashq(a.substr(0,a.length-l.length))+l;if(c=a.match(/^([#0]+)\.([#0]+)$/)){l=""+n.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=l.indexOf(".");var g=a.indexOf(".")-u,v=a.length-l.length-g;return hashq(a.substr(0,g)+l+a.substr(a.length-v))}if(c=a.match(/^00,000\.([#0]*0)$/))return n<0?"-"+write_num_int(o,a,-n):commaify(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?pad0(0,3-w.length):"")+w})+"."+pad0(0,c[1].length);switch(a){case"###,###":case"##,###":case"#,###":var b=commaify(""+h);return b!=="0"?f+b:"";default:if(a.match(/\.[0#?]*$/))return write_num_int(o,a.slice(0,a.lastIndexOf(".")),n)+hashq(a.slice(a.lastIndexOf(".")))}throw new Error("unsupported format |"+a+"|")}function write_num(o,a,n){return(n|0)===n?write_num_int(o,a,n):write_num_flt(o,a,n)}function SSF_split_fmt(o){for(var a=[],n=!1,s=0,l=0;s<o.length;++s)switch(o.charCodeAt(s)){case 34:n=!n;break;case 95:case 42:case 92:++s;break;case 59:a[a.length]=o.substr(l,s-l),l=s+1}if(a[a.length]=o.substr(l),n===!0)throw new Error("Format |"+o+"| unterminated string ");return a}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(o){for(var a=0,n="",s="";a<o.length;)switch(n=o.charAt(a)){case"G":SSF_isgeneral(o,a)&&(a+=6),a++;break;case'"':for(;o.charCodeAt(++a)!==34&&a<o.length;);++a;break;case"\\":a+=2;break;case"_":a+=2;break;case"@":++a;break;case"B":case"b":if(o.charAt(a+1)==="1"||o.charAt(a+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(o.substr(a,3).toUpperCase()==="A/P"||o.substr(a,5).toUpperCase()==="AM/PM"||o.substr(a,5).toUpperCase()==="上午/下午")return!0;++a;break;case"[":for(s=n;o.charAt(a++)!=="]"&&a<o.length;)s+=o.charAt(a);if(s.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;a<o.length&&("0#?.,E+-%".indexOf(n=o.charAt(++a))>-1||n=="\\"&&o.charAt(a+1)=="-"&&"0#".indexOf(o.charAt(a+2))>-1););break;case"?":for(;o.charAt(++a)===n;);break;case"*":++a,(o.charAt(a)==" "||o.charAt(a)=="*")&&++a;break;case"(":case")":++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;a<o.length&&"0123456789".indexOf(o.charAt(++a))>-1;);break;case" ":++a;break;default:++a;break}return!1}function eval_fmt(o,a,n,s){for(var l=[],c="",u=0,d="",h="t",f,p,g,v="H";u<o.length;)switch(d=o.charAt(u)){case"G":if(!SSF_isgeneral(o,u))throw new Error("unrecognized character "+d+" in "+o);l[l.length]={t:"G",v:"General"},u+=7;break;case'"':for(c="";(g=o.charCodeAt(++u))!==34&&u<o.length;)c+=String.fromCharCode(g);l[l.length]={t:"t",v:c},++u;break;case"\\":var b=o.charAt(++u),w=b==="("||b===")"?b:"t";l[l.length]={t:w,v:b},++u;break;case"_":l[l.length]={t:"t",v:" "},u+=2;break;case"@":l[l.length]={t:"T",v:a},++u;break;case"B":case"b":if(o.charAt(u+1)==="1"||o.charAt(u+1)==="2"){if(f==null&&(f=SSF_parse_date_code(a,n,o.charAt(u+1)==="2"),f==null))return"";l[l.length]={t:"X",v:o.substr(u,2)},h=d,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(a<0||f==null&&(f=SSF_parse_date_code(a,n),f==null))return"";for(c=d;++u<o.length&&o.charAt(u).toLowerCase()===d;)c+=d;d==="m"&&h.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=v),l[l.length]={t:d,v:c},h=d;break;case"A":case"a":case"上":var x={t:d,v:d};if(f==null&&(f=SSF_parse_date_code(a,n)),o.substr(u,3).toUpperCase()==="A/P"?(f!=null&&(x.v=f.H>=12?"P":"A"),x.t="T",v="h",u+=3):o.substr(u,5).toUpperCase()==="AM/PM"?(f!=null&&(x.v=f.H>=12?"PM":"AM"),x.t="T",u+=5,v="h"):o.substr(u,5).toUpperCase()==="上午/下午"?(f!=null&&(x.v=f.H>=12?"下午":"上午"),x.t="T",u+=5,v="h"):(x.t="t",++u),f==null&&x.t==="T")return"";l[l.length]=x,h=d;break;case"[":for(c=d;o.charAt(u++)!=="]"&&u<o.length;)c+=o.charAt(u);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(SSF_abstime)){if(f==null&&(f=SSF_parse_date_code(a,n),f==null))return"";l[l.length]={t:"Z",v:c.toLowerCase()},h=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(o)||(l[l.length]={t:"t",v:c}));break;case".":if(f!=null){for(c=d;++u<o.length&&(d=o.charAt(u))==="0";)c+=d;l[l.length]={t:"s",v:c};break}case"0":case"#":for(c=d;++u<o.length&&"0#?.,E+-%".indexOf(d=o.charAt(u))>-1;)c+=d;l[l.length]={t:"n",v:c};break;case"?":for(c=d;o.charAt(++u)===d;)c+=d;l[l.length]={t:d,v:c},h=d;break;case"*":++u,(o.charAt(u)==" "||o.charAt(u)=="*")&&++u;break;case"(":case")":l[l.length]={t:s===1?"t":d,v:d},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=d;u<o.length&&"0123456789".indexOf(o.charAt(++u))>-1;)c+=o.charAt(u);l[l.length]={t:"D",v:c};break;case" ":l[l.length]={t:d,v:d},++u;break;case"$":l[l.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+o);l[l.length]={t:"t",v:d},++u;break}var S=0,E=0,T;for(u=l.length-1,h="t";u>=0;--u)switch(l[u].t){case"h":case"H":l[u].t=v,h="h",S<1&&(S=1);break;case"s":(T=l[u].v.match(/\.0+$/))&&(E=Math.max(E,T[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":h=l[u].t;break;case"m":h==="s"&&(l[u].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&l[u].v.match(/[Hh]/)&&(S=1),S<2&&l[u].v.match(/[Mm]/)&&(S=2),S<3&&l[u].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var C="",A;for(u=0;u<l.length;++u)switch(l[u].t){case"t":case"T":case" ":case"D":break;case"X":l[u].v="",l[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[u].v=SSF_write_date(l[u].t.charCodeAt(0),l[u].v,f,E),l[u].t="t";break;case"n":case"?":for(A=u+1;l[A]!=null&&((d=l[A].t)==="?"||d==="D"||(d===" "||d==="t")&&l[A+1]!=null&&(l[A+1].t==="?"||l[A+1].t==="t"&&l[A+1].v==="/")||l[u].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(l[A].v==="/"||l[A].v===" "&&l[A+1]!=null&&l[A+1].t=="?"));)l[u].v+=l[A].v,l[A]={v:"",t:";"},++A;C+=l[u].v,u=A-1;break;case"G":l[u].t="t",l[u].v=SSF_general(a,n);break}var R="",j,D;if(C.length>0){C.charCodeAt(0)==40?(j=a<0&&C.charCodeAt(0)===45?-a:a,D=write_num("n",C,j)):(j=a<0&&s>1?-a:a,D=write_num("n",C,j),j<0&&l[0]&&l[0].t=="t"&&(D=D.substr(1),l[0].v="-"+l[0].v)),A=D.length-1;var O=l.length;for(u=0;u<l.length;++u)if(l[u]!=null&&l[u].t!="t"&&l[u].v.indexOf(".")>-1){O=u;break}var H=l.length;if(O===l.length&&D.indexOf("E")===-1){for(u=l.length-1;u>=0;--u)l[u]==null||"n?".indexOf(l[u].t)===-1||(A>=l[u].v.length-1?(A-=l[u].v.length,l[u].v=D.substr(A+1,l[u].v.length)):A<0?l[u].v="":(l[u].v=D.substr(0,A+1),A=-1),l[u].t="t",H=u);A>=0&&H<l.length&&(l[H].v=D.substr(0,A+1)+l[H].v)}else if(O!==l.length&&D.indexOf("E")===-1){for(A=D.indexOf(".")-1,u=O;u>=0;--u)if(!(l[u]==null||"n?".indexOf(l[u].t)===-1)){for(p=l[u].v.indexOf(".")>-1&&u===O?l[u].v.indexOf(".")-1:l[u].v.length-1,R=l[u].v.substr(p+1);p>=0;--p)A>=0&&(l[u].v.charAt(p)==="0"||l[u].v.charAt(p)==="#")&&(R=D.charAt(A--)+R);l[u].v=R,l[u].t="t",H=u}for(A>=0&&H<l.length&&(l[H].v=D.substr(0,A+1)+l[H].v),A=D.indexOf(".")+1,u=O;u<l.length;++u)if(!(l[u]==null||"n?(".indexOf(l[u].t)===-1&&u!==O)){for(p=l[u].v.indexOf(".")>-1&&u===O?l[u].v.indexOf(".")+1:0,R=l[u].v.substr(0,p);p<l[u].v.length;++p)A<D.length&&(R+=D.charAt(A++));l[u].v=R,l[u].t="t",H=u}}}for(u=0;u<l.length;++u)l[u]!=null&&"n?".indexOf(l[u].t)>-1&&(j=s>1&&a<0&&u>0&&l[u-1].v==="-"?-a:a,l[u].v=write_num(l[u].t,l[u].v,j),l[u].t="t");var q="";for(u=0;u!==l.length;++u)l[u]!=null&&(q+=l[u].v);return q}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(o,a){if(a==null)return!1;var n=parseFloat(a[2]);switch(a[1]){case"=":if(o==n)return!0;break;case">":if(o>n)return!0;break;case"<":if(o<n)return!0;break;case"<>":if(o!=n)return!0;break;case">=":if(o>=n)return!0;break;case"<=":if(o<=n)return!0;break}return!1}function choose_fmt(o,a){var n=SSF_split_fmt(o),s=n.length,l=n[s-1].indexOf("@");if(s<4&&l>-1&&--s,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof a!="number")return[4,n.length===4||l>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=l>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=l>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=l>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var c=a>0?n[0]:a<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[s,c];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var u=n[0].match(cfregex2),d=n[1].match(cfregex2);return chkcond(a,u)?[s,n[0]]:chkcond(a,d)?[s,n[1]]:[s,n[u!=null&&d!=null?2:1]]}return[s,c]}function SSF_format(o,a,n){n==null&&(n={});var s="";switch(typeof o){case"string":o=="m/d/yy"&&n.dateNF?s=n.dateNF:s=o;break;case"number":o==14&&n.dateNF?s=n.dateNF:s=(n.table!=null?n.table:table_fmt)[o],s==null&&(s=n.table&&n.table[SSF_default_map[o]]||table_fmt[SSF_default_map[o]]),s==null&&(s=SSF_default_str[o]||"General");break}if(SSF_isgeneral(s,0))return SSF_general(a,n);a instanceof Date&&(a=datenum_local(a,n.date1904));var l=choose_fmt(s,a);if(SSF_isgeneral(l[1]))return SSF_general(a,n);if(a===!0)a="TRUE";else if(a===!1)a="FALSE";else if(a===""||a==null)return"";return eval_fmt(l[1],a,n,l[0])}function SSF_load(o,a){if(typeof a!="number"){a=+a||-1;for(var n=0;n<392;++n){if(table_fmt[n]==null){a<0&&(a=n);continue}if(table_fmt[n]==o){a=n;break}}a<0&&(a=391)}return table_fmt[a]=o,a}function SSF_load_table(o){for(var a=0;a!=392;++a)o[a]!==void 0&&SSF_load(o[a],a)}function make_ssf(){table_fmt=SSF_init_table()}var dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(o){var a=typeof o=="number"?table_fmt[o]:o;return a=a.replace(dateNFregex,"(\\d+)"),new RegExp("^"+a+"$")}function dateNF_fix(o,a,n){var s=-1,l=-1,c=-1,u=-1,d=-1,h=-1;(a.match(dateNFregex)||[]).forEach(function(g,v){var b=parseInt(n[v+1],10);switch(g.toLowerCase().charAt(0)){case"y":s=b;break;case"d":c=b;break;case"h":u=b;break;case"s":h=b;break;case"m":u>=0?d=b:l=b;break}}),h>=0&&d==-1&&l>=0&&(d=l,l=-1);var f=(""+(s>=0?s:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var p=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2);return u==-1&&d==-1&&h==-1?f:s==-1&&l==-1&&c==-1?p:f+"T"+p}var CRC32=function(){var o={};o.version="1.2.0";function a(){for(var D=0,O=new Array(256),H=0;H!=256;++H)D=H,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,D=D&1?-306674912^D>>>1:D>>>1,O[H]=D;return typeof Int32Array<"u"?new Int32Array(O):O}var n=a();function s(D){var O=0,H=0,q=0,Y=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(q=0;q!=256;++q)Y[q]=D[q];for(q=0;q!=256;++q)for(H=D[q],O=256+q;O<4096;O+=256)H=Y[O]=H>>>8^D[H&255];var te=[];for(q=1;q!=16;++q)te[q-1]=typeof Int32Array<"u"?Y.subarray(q*256,q*256+256):Y.slice(q*256,q*256+256);return te}var l=s(n),c=l[0],u=l[1],d=l[2],h=l[3],f=l[4],p=l[5],g=l[6],v=l[7],b=l[8],w=l[9],x=l[10],S=l[11],E=l[12],T=l[13],C=l[14];function A(D,O){for(var H=O^-1,q=0,Y=D.length;q<Y;)H=H>>>8^n[(H^D.charCodeAt(q++))&255];return~H}function R(D,O){for(var H=O^-1,q=D.length-15,Y=0;Y<q;)H=C[D[Y++]^H&255]^T[D[Y++]^H>>8&255]^E[D[Y++]^H>>16&255]^S[D[Y++]^H>>>24]^x[D[Y++]]^w[D[Y++]]^b[D[Y++]]^v[D[Y++]]^g[D[Y++]]^p[D[Y++]]^f[D[Y++]]^h[D[Y++]]^d[D[Y++]]^u[D[Y++]]^c[D[Y++]]^n[D[Y++]];for(q+=15;Y<q;)H=H>>>8^n[(H^D[Y++])&255];return~H}function j(D,O){for(var H=O^-1,q=0,Y=D.length,te=0,ee=0;q<Y;)te=D.charCodeAt(q++),te<128?H=H>>>8^n[(H^te)&255]:te<2048?(H=H>>>8^n[(H^(192|te>>6&31))&255],H=H>>>8^n[(H^(128|te&63))&255]):te>=55296&&te<57344?(te=(te&1023)+64,ee=D.charCodeAt(q++)&1023,H=H>>>8^n[(H^(240|te>>8&7))&255],H=H>>>8^n[(H^(128|te>>2&63))&255],H=H>>>8^n[(H^(128|ee>>6&15|(te&3)<<4))&255],H=H>>>8^n[(H^(128|ee&63))&255]):(H=H>>>8^n[(H^(224|te>>12&15))&255],H=H>>>8^n[(H^(128|te>>6&63))&255],H=H>>>8^n[(H^(128|te&63))&255]);return~H}return o.table=n,o.bstr=A,o.buf=R,o.str=j,o}(),CFB=function o(){var a={};a.version="1.2.1";function n(ue,Te){for(var ye=ue.split("/"),_e=Te.split("/"),Ce=0,Ae=0,$e=Math.min(ye.length,_e.length);Ce<$e;++Ce){if(Ae=ye[Ce].length-_e[Ce].length)return Ae;if(ye[Ce]!=_e[Ce])return ye[Ce]<_e[Ce]?-1:1}return ye.length-_e.length}function s(ue){if(ue.charAt(ue.length-1)=="/")return ue.slice(0,-1).indexOf("/")===-1?ue:s(ue.slice(0,-1));var Te=ue.lastIndexOf("/");return Te===-1?ue:ue.slice(0,Te+1)}function l(ue){if(ue.charAt(ue.length-1)=="/")return l(ue.slice(0,-1));var Te=ue.lastIndexOf("/");return Te===-1?ue:ue.slice(Te+1)}function c(ue,Te){typeof Te=="string"&&(Te=new Date(Te));var ye=Te.getHours();ye=ye<<6|Te.getMinutes(),ye=ye<<5|Te.getSeconds()>>>1,ue.write_shift(2,ye);var _e=Te.getFullYear()-1980;_e=_e<<4|Te.getMonth()+1,_e=_e<<5|Te.getDate(),ue.write_shift(2,_e)}function u(ue){var Te=ue.read_shift(2)&65535,ye=ue.read_shift(2)&65535,_e=new Date,Ce=ye&31;ye>>>=5;var Ae=ye&15;ye>>>=4,_e.setMilliseconds(0),_e.setFullYear(ye+1980),_e.setMonth(Ae-1),_e.setDate(Ce);var $e=Te&31;Te>>>=5;var Ue=Te&63;return Te>>>=6,_e.setHours(Te),_e.setMinutes(Ue),_e.setSeconds($e<<1),_e}function d(ue){prep_blob(ue,0);for(var Te={},ye=0;ue.l<=ue.length-4;){var _e=ue.read_shift(2),Ce=ue.read_shift(2),Ae=ue.l+Ce,$e={};switch(_e){case 21589:ye=ue.read_shift(1),ye&1&&($e.mtime=ue.read_shift(4)),Ce>5&&(ye&2&&($e.atime=ue.read_shift(4)),ye&4&&($e.ctime=ue.read_shift(4))),$e.mtime&&($e.mt=new Date($e.mtime*1e3));break}ue.l=Ae,Te[_e]=$e}return Te}var h;function f(){return h||(h={})}function p(ue,Te){if(ue[0]==80&&ue[1]==75)return gr(ue,Te);if((ue[0]|32)==109&&(ue[1]|32)==105)return Rr(ue,Te);if(ue.length<512)throw new Error("CFB file size "+ue.length+" < 512");var ye=3,_e=512,Ce=0,Ae=0,$e=0,Ue=0,Ne=0,Fe=[],Be=ue.slice(0,512);prep_blob(Be,0);var Ge=g(Be);switch(ye=Ge[0],ye){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Ge[1]==0)return gr(ue,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+ye)}_e!==512&&(Be=ue.slice(0,_e),prep_blob(Be,28));var Ye=ue.slice(0,_e);v(Be,ye);var Xe=Be.read_shift(4,"i");if(ye===3&&Xe!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Xe);Be.l+=4,$e=Be.read_shift(4,"i"),Be.l+=4,Be.chk("00100000","Mini Stream Cutoff Size: "),Ue=Be.read_shift(4,"i"),Ce=Be.read_shift(4,"i"),Ne=Be.read_shift(4,"i"),Ae=Be.read_shift(4,"i");for(var qe=-1,Ke=0;Ke<109&&(qe=Be.read_shift(4,"i"),!(qe<0));++Ke)Fe[Ke]=qe;var Qe=b(ue,_e);S(Ne,Ae,Qe,_e,Fe);var ot=T(Qe,$e,Fe,_e);ot[$e].name="!Directory",Ce>0&&Ue!==ee&&(ot[Ue].name="!MiniFAT"),ot[Fe[0]].name="!FAT",ot.fat_addrs=Fe,ot.ssz=_e;var ct={},ft=[],Jt=[],er=[];C($e,ot,Qe,ft,Ce,ct,Jt,Ue),w(Jt,er,ft),ft.shift();var tr={FileIndex:Jt,FullPaths:er};return Te&&Te.raw&&(tr.raw={header:Ye,sectors:Qe}),tr}function g(ue){if(ue[ue.l]==80&&ue[ue.l+1]==75)return[0,0];ue.chk(re,"Header Signature: "),ue.l+=16;var Te=ue.read_shift(2,"u");return[ue.read_shift(2,"u"),Te]}function v(ue,Te){var ye=9;switch(ue.l+=2,ye=ue.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+ye);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ye)}ue.chk("0600","Mini Sector Shift: "),ue.chk("000000000000","Reserved: ")}function b(ue,Te){for(var ye=Math.ceil(ue.length/Te)-1,_e=[],Ce=1;Ce<ye;++Ce)_e[Ce-1]=ue.slice(Ce*Te,(Ce+1)*Te);return _e[ye-1]=ue.slice(ye*Te),_e}function w(ue,Te,ye){for(var _e=0,Ce=0,Ae=0,$e=0,Ue=0,Ne=ye.length,Fe=[],Be=[];_e<Ne;++_e)Fe[_e]=Be[_e]=_e,Te[_e]=ye[_e];for(;Ue<Be.length;++Ue)_e=Be[Ue],Ce=ue[_e].L,Ae=ue[_e].R,$e=ue[_e].C,Fe[_e]===_e&&(Ce!==-1&&Fe[Ce]!==Ce&&(Fe[_e]=Fe[Ce]),Ae!==-1&&Fe[Ae]!==Ae&&(Fe[_e]=Fe[Ae])),$e!==-1&&(Fe[$e]=_e),Ce!==-1&&_e!=Fe[_e]&&(Fe[Ce]=Fe[_e],Be.lastIndexOf(Ce)<Ue&&Be.push(Ce)),Ae!==-1&&_e!=Fe[_e]&&(Fe[Ae]=Fe[_e],Be.lastIndexOf(Ae)<Ue&&Be.push(Ae));for(_e=1;_e<Ne;++_e)Fe[_e]===_e&&(Ae!==-1&&Fe[Ae]!==Ae?Fe[_e]=Fe[Ae]:Ce!==-1&&Fe[Ce]!==Ce&&(Fe[_e]=Fe[Ce]));for(_e=1;_e<Ne;++_e)if(ue[_e].type!==0){if(Ue=_e,Ue!=Fe[Ue])do Ue=Fe[Ue],Te[_e]=Te[Ue]+"/"+Te[_e];while(Ue!==0&&Fe[Ue]!==-1&&Ue!=Fe[Ue]);Fe[_e]=-1}for(Te[0]+="/",_e=1;_e<Ne;++_e)ue[_e].type!==2&&(Te[_e]+="/")}function x(ue,Te,ye){for(var _e=ue.start,Ce=ue.size,Ae=[],$e=_e;ye&&Ce>0&&$e>=0;)Ae.push(Te.slice($e*te,$e*te+te)),Ce-=te,$e=__readInt32LE(ye,$e*4);return Ae.length===0?new_buf(0):bconcat(Ae).slice(0,ue.size)}function S(ue,Te,ye,_e,Ce){var Ae=ee;if(ue===ee){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(ue!==-1){var $e=ye[ue],Ue=(_e>>>2)-1;if(!$e)return;for(var Ne=0;Ne<Ue&&(Ae=__readInt32LE($e,Ne*4))!==ee;++Ne)Ce.push(Ae);S(__readInt32LE($e,_e-4),Te-1,ye,_e,Ce)}}function E(ue,Te,ye,_e,Ce){var Ae=[],$e=[];Ce||(Ce=[]);var Ue=_e-1,Ne=0,Fe=0;for(Ne=Te;Ne>=0;){Ce[Ne]=!0,Ae[Ae.length]=Ne,$e.push(ue[Ne]);var Be=ye[Math.floor(Ne*4/_e)];if(Fe=Ne*4&Ue,_e<4+Fe)throw new Error("FAT boundary crossed: "+Ne+" 4 "+_e);if(!ue[Be])break;Ne=__readInt32LE(ue[Be],Fe)}return{nodes:Ae,data:__toBuffer([$e])}}function T(ue,Te,ye,_e){var Ce=ue.length,Ae=[],$e=[],Ue=[],Ne=[],Fe=_e-1,Be=0,Ge=0,Ye=0,Xe=0;for(Be=0;Be<Ce;++Be)if(Ue=[],Ye=Be+Te,Ye>=Ce&&(Ye-=Ce),!$e[Ye]){Ne=[];var qe=[];for(Ge=Ye;Ge>=0;){qe[Ge]=!0,$e[Ge]=!0,Ue[Ue.length]=Ge,Ne.push(ue[Ge]);var Ke=ye[Math.floor(Ge*4/_e)];if(Xe=Ge*4&Fe,_e<4+Xe)throw new Error("FAT boundary crossed: "+Ge+" 4 "+_e);if(!ue[Ke]||(Ge=__readInt32LE(ue[Ke],Xe),qe[Ge]))break}Ae[Ye]={nodes:Ue,data:__toBuffer([Ne])}}return Ae}function C(ue,Te,ye,_e,Ce,Ae,$e,Ue){for(var Ne=0,Fe=_e.length?2:0,Be=Te[ue].data,Ge=0,Ye=0,Xe;Ge<Be.length;Ge+=128){var qe=Be.slice(Ge,Ge+128);prep_blob(qe,64),Ye=qe.read_shift(2),Xe=__utf16le(qe,0,Ye-Fe),_e.push(Xe);var Ke={name:Xe,type:qe.read_shift(1),color:qe.read_shift(1),L:qe.read_shift(4,"i"),R:qe.read_shift(4,"i"),C:qe.read_shift(4,"i"),clsid:qe.read_shift(16),state:qe.read_shift(4,"i"),start:0,size:0},Qe=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);Qe!==0&&(Ke.ct=A(qe,qe.l-8));var ot=qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2)+qe.read_shift(2);ot!==0&&(Ke.mt=A(qe,qe.l-8)),Ke.start=qe.read_shift(4,"i"),Ke.size=qe.read_shift(4,"i"),Ke.size<0&&Ke.start<0&&(Ke.size=Ke.type=0,Ke.start=ee,Ke.name=""),Ke.type===5?(Ne=Ke.start,Ce>0&&Ne!==ee&&(Te[Ne].name="!StreamData")):Ke.size>=4096?(Ke.storage="fat",Te[Ke.start]===void 0&&(Te[Ke.start]=E(ye,Ke.start,Te.fat_addrs,Te.ssz)),Te[Ke.start].name=Ke.name,Ke.content=Te[Ke.start].data.slice(0,Ke.size)):(Ke.storage="minifat",Ke.size<0?Ke.size=0:Ne!==ee&&Ke.start!==ee&&Te[Ne]&&(Ke.content=x(Ke,Te[Ne].data,(Te[Ue]||{}).data))),Ke.content&&prep_blob(Ke.content,0),Ae[Xe]=Ke,$e.push(Ke)}}function A(ue,Te){return new Date((__readUInt32LE(ue,Te+4)/1e7*Math.pow(2,32)+__readUInt32LE(ue,Te)/1e7-11644473600)*1e3)}function R(ue,Te){return f(),p(h.readFileSync(ue),Te)}function j(ue,Te){var ye=Te&&Te.type;switch(ye||has_buf&&Buffer.isBuffer(ue)&&(ye="buffer"),ye||"base64"){case"file":return R(ue,Te);case"base64":return p(s2a(Base64_decode(ue)),Te);case"binary":return p(s2a(ue),Te)}return p(ue,Te)}function D(ue,Te){var ye=Te||{},_e=ye.root||"Root Entry";if(ue.FullPaths||(ue.FullPaths=[]),ue.FileIndex||(ue.FileIndex=[]),ue.FullPaths.length!==ue.FileIndex.length)throw new Error("inconsistent CFB structure");ue.FullPaths.length===0&&(ue.FullPaths[0]=_e+"/",ue.FileIndex[0]={name:_e,type:5}),ye.CLSID&&(ue.FileIndex[0].clsid=ye.CLSID),O(ue)}function O(ue){var Te="Sh33tJ5";if(!CFB.find(ue,"/"+Te)){var ye=new_buf(4);ye[0]=55,ye[1]=ye[3]=50,ye[2]=54,ue.FileIndex.push({name:Te,type:2,content:ye,size:4,L:69,R:69,C:69}),ue.FullPaths.push(ue.FullPaths[0]+Te),H(ue)}}function H(ue,Te){D(ue);for(var ye=!1,_e=!1,Ce=ue.FullPaths.length-1;Ce>=0;--Ce){var Ae=ue.FileIndex[Ce];switch(Ae.type){case 0:_e?ye=!0:(ue.FileIndex.pop(),ue.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Ae.R*Ae.L*Ae.C)&&(ye=!0),Ae.R>-1&&Ae.L>-1&&Ae.R==Ae.L&&(ye=!0);break;default:ye=!0;break}}if(!(!ye&&!Te)){var $e=new Date(1987,1,19),Ue=0,Ne=Object.create?Object.create(null):{},Fe=[];for(Ce=0;Ce<ue.FullPaths.length;++Ce)Ne[ue.FullPaths[Ce]]=!0,ue.FileIndex[Ce].type!==0&&Fe.push([ue.FullPaths[Ce],ue.FileIndex[Ce]]);for(Ce=0;Ce<Fe.length;++Ce){var Be=s(Fe[Ce][0]);_e=Ne[Be],_e||(Fe.push([Be,{name:l(Be).replace("/",""),type:1,clsid:ce,ct:$e,mt:$e,content:null}]),Ne[Be]=!0)}for(Fe.sort(function(Xe,qe){return n(Xe[0],qe[0])}),ue.FullPaths=[],ue.FileIndex=[],Ce=0;Ce<Fe.length;++Ce)ue.FullPaths[Ce]=Fe[Ce][0],ue.FileIndex[Ce]=Fe[Ce][1];for(Ce=0;Ce<Fe.length;++Ce){var Ge=ue.FileIndex[Ce],Ye=ue.FullPaths[Ce];if(Ge.name=l(Ye).replace("/",""),Ge.L=Ge.R=Ge.C=-(Ge.color=1),Ge.size=Ge.content?Ge.content.length:0,Ge.start=0,Ge.clsid=Ge.clsid||ce,Ce===0)Ge.C=Fe.length>1?1:-1,Ge.size=0,Ge.type=5;else if(Ye.slice(-1)=="/"){for(Ue=Ce+1;Ue<Fe.length&&s(ue.FullPaths[Ue])!=Ye;++Ue);for(Ge.C=Ue>=Fe.length?-1:Ue,Ue=Ce+1;Ue<Fe.length&&s(ue.FullPaths[Ue])!=s(Ye);++Ue);Ge.R=Ue>=Fe.length?-1:Ue,Ge.type=1}else s(ue.FullPaths[Ce+1]||"")==s(Ye)&&(Ge.R=Ce+1),Ge.type=2}}}function q(ue,Te){var ye=Te||{};if(ye.fileType=="mad")return kr(ue,ye);switch(H(ue),ye.fileType){case"zip":return xr(ue,ye)}var _e=function(Xe){for(var qe=0,Ke=0,Qe=0;Qe<Xe.FileIndex.length;++Qe){var ot=Xe.FileIndex[Qe];if(ot.content){var ct=ot.content.length;ct>0&&(ct<4096?qe+=ct+63>>6:Ke+=ct+511>>9)}}for(var ft=Xe.FullPaths.length+3>>2,Jt=qe+7>>3,er=qe+127>>7,tr=Jt+Ke+ft+er,Yt=tr+127>>7,fr=Yt<=109?0:Math.ceil((Yt-109)/127);tr+Yt+fr+127>>7>Yt;)fr=++Yt<=109?0:Math.ceil((Yt-109)/127);var jt=[1,fr,Yt,er,ft,Ke,qe,0];return Xe.FileIndex[0].size=qe<<6,jt[7]=(Xe.FileIndex[0].start=jt[0]+jt[1]+jt[2]+jt[3]+jt[4]+jt[5])+(jt[6]+7>>3),jt}(ue),Ce=new_buf(_e[7]<<9),Ae=0,$e=0;{for(Ae=0;Ae<8;++Ae)Ce.write_shift(1,ne[Ae]);for(Ae=0;Ae<8;++Ae)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),Ae=0;Ae<3;++Ae)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,_e[2]),Ce.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,4096),Ce.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:ee),Ce.write_shift(4,_e[3]),Ce.write_shift(-4,_e[1]?_e[0]-1:ee),Ce.write_shift(4,_e[1]),Ae=0;Ae<109;++Ae)Ce.write_shift(-4,Ae<_e[2]?_e[1]+Ae:-1)}if(_e[1])for($e=0;$e<_e[1];++$e){for(;Ae<236+$e*127;++Ae)Ce.write_shift(-4,Ae<_e[2]?_e[1]+Ae:-1);Ce.write_shift(-4,$e===_e[1]-1?ee:$e+1)}var Ue=function(Xe){for($e+=Xe;Ae<$e-1;++Ae)Ce.write_shift(-4,Ae+1);Xe&&(++Ae,Ce.write_shift(-4,ee))};for($e=Ae=0,$e+=_e[1];Ae<$e;++Ae)Ce.write_shift(-4,ve.DIFSECT);for($e+=_e[2];Ae<$e;++Ae)Ce.write_shift(-4,ve.FATSECT);Ue(_e[3]),Ue(_e[4]);for(var Ne=0,Fe=0,Be=ue.FileIndex[0];Ne<ue.FileIndex.length;++Ne)Be=ue.FileIndex[Ne],Be.content&&(Fe=Be.content.length,!(Fe<4096)&&(Be.start=$e,Ue(Fe+511>>9)));for(Ue(_e[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,ve.ENDOFCHAIN);for($e=Ae=0,Ne=0;Ne<ue.FileIndex.length;++Ne)Be=ue.FileIndex[Ne],Be.content&&(Fe=Be.content.length,!(!Fe||Fe>=4096)&&(Be.start=$e,Ue(Fe+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,ve.ENDOFCHAIN);for(Ae=0;Ae<_e[4]<<2;++Ae){var Ge=ue.FullPaths[Ae];if(!Ge||Ge.length===0){for(Ne=0;Ne<17;++Ne)Ce.write_shift(4,0);for(Ne=0;Ne<3;++Ne)Ce.write_shift(4,-1);for(Ne=0;Ne<12;++Ne)Ce.write_shift(4,0);continue}Be=ue.FileIndex[Ae],Ae===0&&(Be.start=Be.size?Be.start-1:ee);var Ye=Ae===0&&ye.root||Be.name;if(Fe=2*(Ye.length+1),Ce.write_shift(64,Ye,"utf16le"),Ce.write_shift(2,Fe),Ce.write_shift(1,Be.type),Ce.write_shift(1,Be.color),Ce.write_shift(-4,Be.L),Ce.write_shift(-4,Be.R),Ce.write_shift(-4,Be.C),Be.clsid)Ce.write_shift(16,Be.clsid,"hex");else for(Ne=0;Ne<4;++Ne)Ce.write_shift(4,0);Ce.write_shift(4,Be.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,Be.start),Ce.write_shift(4,Be.size),Ce.write_shift(4,0)}for(Ae=1;Ae<ue.FileIndex.length;++Ae)if(Be=ue.FileIndex[Ae],Be.size>=4096)if(Ce.l=Be.start+1<<9,has_buf&&Buffer.isBuffer(Be.content))Be.content.copy(Ce,Ce.l,0,Be.size),Ce.l+=Be.size+511&-512;else{for(Ne=0;Ne<Be.size;++Ne)Ce.write_shift(1,Be.content[Ne]);for(;Ne&511;++Ne)Ce.write_shift(1,0)}for(Ae=1;Ae<ue.FileIndex.length;++Ae)if(Be=ue.FileIndex[Ae],Be.size>0&&Be.size<4096)if(has_buf&&Buffer.isBuffer(Be.content))Be.content.copy(Ce,Ce.l,0,Be.size),Ce.l+=Be.size+63&-64;else{for(Ne=0;Ne<Be.size;++Ne)Ce.write_shift(1,Be.content[Ne]);for(;Ne&63;++Ne)Ce.write_shift(1,0)}if(has_buf)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function Y(ue,Te){var ye=ue.FullPaths.map(function(Ne){return Ne.toUpperCase()}),_e=ye.map(function(Ne){var Fe=Ne.split("/");return Fe[Fe.length-(Ne.slice(-1)=="/"?2:1)]}),Ce=!1;Te.charCodeAt(0)===47?(Ce=!0,Te=ye[0].slice(0,-1)+Te):Ce=Te.indexOf("/")!==-1;var Ae=Te.toUpperCase(),$e=Ce===!0?ye.indexOf(Ae):_e.indexOf(Ae);if($e!==-1)return ue.FileIndex[$e];var Ue=!Ae.match(chr1);for(Ae=Ae.replace(chr0,""),Ue&&(Ae=Ae.replace(chr1,"!")),$e=0;$e<ye.length;++$e)if((Ue?ye[$e].replace(chr1,"!"):ye[$e]).replace(chr0,"")==Ae||(Ue?_e[$e].replace(chr1,"!"):_e[$e]).replace(chr0,"")==Ae)return ue.FileIndex[$e];return null}var te=64,ee=-2,re="d0cf11e0a1b11ae1",ne=[208,207,17,224,161,177,26,225],ce="00000000000000000000000000000000",ve={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ee,FREESECT:-1,HEADER_SIGNATURE:re,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ce,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function be(ue,Te,ye){f();var _e=q(ue,ye);h.writeFileSync(Te,_e)}function me(ue){for(var Te=new Array(ue.length),ye=0;ye<ue.length;++ye)Te[ye]=String.fromCharCode(ue[ye]);return Te.join("")}function ae(ue,Te){var ye=q(ue,Te);switch(Te&&Te.type||"buffer"){case"file":return f(),h.writeFileSync(Te.filename,ye),ye;case"binary":return typeof ye=="string"?ye:me(ye);case"base64":return Base64_encode(typeof ye=="string"?ye:me(ye));case"buffer":if(has_buf)return Buffer.isBuffer(ye)?ye:Buffer_from(ye);case"array":return typeof ye=="string"?s2a(ye):ye}return ye}var pe;function ie(ue){try{var Te=ue.InflateRaw,ye=new Te;if(ye._processChunk(new Uint8Array([3,0]),ye._finishFlushFlag),ye.bytesRead)pe=ue;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function se(ue,Te){if(!pe)return Zt(ue,Te);var ye=pe.InflateRaw,_e=new ye,Ce=_e._processChunk(ue.slice(ue.l),_e._finishFlushFlag);return ue.l+=_e.bytesRead,Ce}function de(ue){return pe?pe.deflateRawSync(ue):Tt(ue)}var le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ge=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function we(ue){var Te=(ue<<1|ue<<11)&139536|(ue<<5|ue<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var Se=typeof Uint8Array<"u",xe=Se?new Uint8Array(256):[],ke=0;ke<256;++ke)xe[ke]=we(ke);function Ie(ue,Te){var ye=xe[ue&255];return Te<=8?ye>>>8-Te:(ye=ye<<8|xe[ue>>8&255],Te<=16?ye>>>16-Te:(ye=ye<<8|xe[ue>>16&255],ye>>>24-Te))}function He(ue,Te){var ye=Te&7,_e=Te>>>3;return(ue[_e]|(ye<=6?0:ue[_e+1]<<8))>>>ye&3}function Le(ue,Te){var ye=Te&7,_e=Te>>>3;return(ue[_e]|(ye<=5?0:ue[_e+1]<<8))>>>ye&7}function De(ue,Te){var ye=Te&7,_e=Te>>>3;return(ue[_e]|(ye<=4?0:ue[_e+1]<<8))>>>ye&15}function Ee(ue,Te){var ye=Te&7,_e=Te>>>3;return(ue[_e]|(ye<=3?0:ue[_e+1]<<8))>>>ye&31}function oe(ue,Te){var ye=Te&7,_e=Te>>>3;return(ue[_e]|(ye<=1?0:ue[_e+1]<<8))>>>ye&127}function he(ue,Te,ye){var _e=Te&7,Ce=Te>>>3,Ae=(1<<ye)-1,$e=ue[Ce]>>>_e;return ye<8-_e||($e|=ue[Ce+1]<<8-_e,ye<16-_e)||($e|=ue[Ce+2]<<16-_e,ye<24-_e)||($e|=ue[Ce+3]<<24-_e),$e&Ae}function Me(ue,Te,ye){var _e=Te&7,Ce=Te>>>3;return _e<=5?ue[Ce]|=(ye&7)<<_e:(ue[Ce]|=ye<<_e&255,ue[Ce+1]=(ye&7)>>8-_e),Te+3}function fe(ue,Te,ye){var _e=Te&7,Ce=Te>>>3;return ye=(ye&1)<<_e,ue[Ce]|=ye,Te+1}function Pe(ue,Te,ye){var _e=Te&7,Ce=Te>>>3;return ye<<=_e,ue[Ce]|=ye&255,ye>>>=8,ue[Ce+1]=ye,Te+8}function Oe(ue,Te,ye){var _e=Te&7,Ce=Te>>>3;return ye<<=_e,ue[Ce]|=ye&255,ye>>>=8,ue[Ce+1]=ye&255,ue[Ce+2]=ye>>>8,Te+16}function je(ue,Te){var ye=ue.length,_e=2*ye>Te?2*ye:Te+5,Ce=0;if(ye>=Te)return ue;if(has_buf){var Ae=new_unsafe_buf(_e);if(ue.copy)ue.copy(Ae);else for(;Ce<ue.length;++Ce)Ae[Ce]=ue[Ce];return Ae}else if(Se){var $e=new Uint8Array(_e);if($e.set)$e.set(ue);else for(;Ce<ye;++Ce)$e[Ce]=ue[Ce];return $e}return ue.length=_e,ue}function Ve(ue){for(var Te=new Array(ue),ye=0;ye<ue;++ye)Te[ye]=0;return Te}function ze(ue,Te,ye){var _e=1,Ce=0,Ae=0,$e=0,Ue=0,Ne=ue.length,Fe=Se?new Uint16Array(32):Ve(32);for(Ae=0;Ae<32;++Ae)Fe[Ae]=0;for(Ae=Ne;Ae<ye;++Ae)ue[Ae]=0;Ne=ue.length;var Be=Se?new Uint16Array(Ne):Ve(Ne);for(Ae=0;Ae<Ne;++Ae)Fe[Ce=ue[Ae]]++,_e<Ce&&(_e=Ce),Be[Ae]=0;for(Fe[0]=0,Ae=1;Ae<=_e;++Ae)Fe[Ae+16]=Ue=Ue+Fe[Ae-1]<<1;for(Ae=0;Ae<Ne;++Ae)Ue=ue[Ae],Ue!=0&&(Be[Ae]=Fe[Ue+16]++);var Ge=0;for(Ae=0;Ae<Ne;++Ae)if(Ge=ue[Ae],Ge!=0)for(Ue=Ie(Be[Ae],_e)>>_e-Ge,$e=(1<<_e+4-Ge)-1;$e>=0;--$e)Te[Ue|$e<<Ge]=Ge&15|Ae<<4;return _e}var We=Se?new Uint16Array(512):Ve(512),Ze=Se?new Uint16Array(32):Ve(32);if(!Se){for(var Je=0;Je<512;++Je)We[Je]=0;for(Je=0;Je<32;++Je)Ze[Je]=0}(function(){for(var ue=[],Te=0;Te<32;Te++)ue.push(5);ze(ue,Ze,32);var ye=[];for(Te=0;Te<=143;Te++)ye.push(8);for(;Te<=255;Te++)ye.push(9);for(;Te<=279;Te++)ye.push(7);for(;Te<=287;Te++)ye.push(8);ze(ye,We,288)})();var et=function(){for(var Te=Se?new Uint8Array(32768):[],ye=0,_e=0;ye<Re.length-1;++ye)for(;_e<Re[ye+1];++_e)Te[_e]=ye;for(;_e<32768;++_e)Te[_e]=29;var Ce=Se?new Uint8Array(259):[];for(ye=0,_e=0;ye<ge.length-1;++ye)for(;_e<ge[ye+1];++_e)Ce[_e]=ye;function Ae(Ue,Ne){for(var Fe=0;Fe<Ue.length;){var Be=Math.min(65535,Ue.length-Fe),Ge=Fe+Be==Ue.length;for(Ne.write_shift(1,+Ge),Ne.write_shift(2,Be),Ne.write_shift(2,~Be&65535);Be-- >0;)Ne[Ne.l++]=Ue[Fe++]}return Ne.l}function $e(Ue,Ne){for(var Fe=0,Be=0,Ge=Se?new Uint16Array(32768):[];Be<Ue.length;){var Ye=Math.min(65535,Ue.length-Be);if(Ye<10){for(Fe=Me(Ne,Fe,+(Be+Ye==Ue.length)),Fe&7&&(Fe+=8-(Fe&7)),Ne.l=Fe/8|0,Ne.write_shift(2,Ye),Ne.write_shift(2,~Ye&65535);Ye-- >0;)Ne[Ne.l++]=Ue[Be++];Fe=Ne.l*8;continue}Fe=Me(Ne,Fe,+(Be+Ye==Ue.length)+2);for(var Xe=0;Ye-- >0;){var qe=Ue[Be];Xe=(Xe<<5^qe)&32767;var Ke=-1,Qe=0;if((Ke=Ge[Xe])&&(Ke|=Be&-32768,Ke>Be&&(Ke-=32768),Ke<Be))for(;Ue[Ke+Qe]==Ue[Be+Qe]&&Qe<250;)++Qe;if(Qe>2){qe=Ce[Qe],qe<=22?Fe=Pe(Ne,Fe,xe[qe+1]>>1)-1:(Pe(Ne,Fe,3),Fe+=5,Pe(Ne,Fe,xe[qe-23]>>5),Fe+=3);var ot=qe<8?0:qe-4>>2;ot>0&&(Oe(Ne,Fe,Qe-ge[qe]),Fe+=ot),qe=Te[Be-Ke],Fe=Pe(Ne,Fe,xe[qe]>>3),Fe-=3;var ct=qe<4?0:qe-2>>1;ct>0&&(Oe(Ne,Fe,Be-Ke-Re[qe]),Fe+=ct);for(var ft=0;ft<Qe;++ft)Ge[Xe]=Be&32767,Xe=(Xe<<5^Ue[Be])&32767,++Be;Ye-=Qe-1}else qe<=143?qe=qe+48:Fe=fe(Ne,Fe,1),Fe=Pe(Ne,Fe,xe[qe]),Ge[Xe]=Be&32767,++Be}Fe=Pe(Ne,Fe,0)-1}return Ne.l=(Fe+7)/8|0,Ne.l}return function(Ne,Fe){return Ne.length<8?Ae(Ne,Fe):$e(Ne,Fe)}}();function Tt(ue){var Te=new_buf(50+Math.floor(ue.length*1.1)),ye=et(ue,Te);return Te.slice(0,ye)}var ut=Se?new Uint16Array(32768):Ve(32768),St=Se?new Uint16Array(32768):Ve(32768),kt=Se?new Uint16Array(128):Ve(128),Bt=1,nr=1;function ir(ue,Te){var ye=Ee(ue,Te)+257;Te+=5;var _e=Ee(ue,Te)+1;Te+=5;var Ce=De(ue,Te)+4;Te+=4;for(var Ae=0,$e=Se?new Uint8Array(19):Ve(19),Ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ne=1,Fe=Se?new Uint8Array(8):Ve(8),Be=Se?new Uint8Array(8):Ve(8),Ge=$e.length,Ye=0;Ye<Ce;++Ye)$e[le[Ye]]=Ae=Le(ue,Te),Ne<Ae&&(Ne=Ae),Fe[Ae]++,Te+=3;var Xe=0;for(Fe[0]=0,Ye=1;Ye<=Ne;++Ye)Be[Ye]=Xe=Xe+Fe[Ye-1]<<1;for(Ye=0;Ye<Ge;++Ye)(Xe=$e[Ye])!=0&&(Ue[Ye]=Be[Xe]++);var qe=0;for(Ye=0;Ye<Ge;++Ye)if(qe=$e[Ye],qe!=0){Xe=xe[Ue[Ye]]>>8-qe;for(var Ke=(1<<7-qe)-1;Ke>=0;--Ke)kt[Xe|Ke<<qe]=qe&7|Ye<<3}var Qe=[];for(Ne=1;Qe.length<ye+_e;)switch(Xe=kt[oe(ue,Te)],Te+=Xe&7,Xe>>>=3){case 16:for(Ae=3+He(ue,Te),Te+=2,Xe=Qe[Qe.length-1];Ae-- >0;)Qe.push(Xe);break;case 17:for(Ae=3+Le(ue,Te),Te+=3;Ae-- >0;)Qe.push(0);break;case 18:for(Ae=11+oe(ue,Te),Te+=7;Ae-- >0;)Qe.push(0);break;default:Qe.push(Xe),Ne<Xe&&(Ne=Xe);break}var ot=Qe.slice(0,ye),ct=Qe.slice(ye);for(Ye=ye;Ye<286;++Ye)ot[Ye]=0;for(Ye=_e;Ye<30;++Ye)ct[Ye]=0;return Bt=ze(ot,ut,286),nr=ze(ct,St,30),Te}function dr(ue,Te){if(ue[0]==3&&!(ue[1]&3))return[new_raw_buf(Te),2];for(var ye=0,_e=0,Ce=new_unsafe_buf(Te||1<<18),Ae=0,$e=Ce.length>>>0,Ue=0,Ne=0;(_e&1)==0;){if(_e=Le(ue,ye),ye+=3,_e>>>1)_e>>1==1?(Ue=9,Ne=5):(ye=ir(ue,ye),Ue=Bt,Ne=nr);else{ye&7&&(ye+=8-(ye&7));var Fe=ue[ye>>>3]|ue[(ye>>>3)+1]<<8;if(ye+=32,Fe>0)for(!Te&&$e<Ae+Fe&&(Ce=je(Ce,Ae+Fe),$e=Ce.length);Fe-- >0;)Ce[Ae++]=ue[ye>>>3],ye+=8;continue}for(;;){!Te&&$e<Ae+32767&&(Ce=je(Ce,Ae+32767),$e=Ce.length);var Be=he(ue,ye,Ue),Ge=_e>>>1==1?We[Be]:ut[Be];if(ye+=Ge&15,Ge>>>=4,(Ge>>>8&255)===0)Ce[Ae++]=Ge;else{if(Ge==256)break;Ge-=257;var Ye=Ge<8?0:Ge-4>>2;Ye>5&&(Ye=0);var Xe=Ae+ge[Ge];Ye>0&&(Xe+=he(ue,ye,Ye),ye+=Ye),Be=he(ue,ye,Ne),Ge=_e>>>1==1?Ze[Be]:St[Be],ye+=Ge&15,Ge>>>=4;var qe=Ge<4?0:Ge-2>>1,Ke=Re[Ge];for(qe>0&&(Ke+=he(ue,ye,qe),ye+=qe),!Te&&$e<Xe&&(Ce=je(Ce,Xe+100),$e=Ce.length);Ae<Xe;)Ce[Ae]=Ce[Ae-Ke],++Ae}}}return Te?[Ce,ye+7>>>3]:[Ce.slice(0,Ae),ye+7>>>3]}function Zt(ue,Te){var ye=ue.slice(ue.l||0),_e=dr(ye,Te);return ue.l+=_e[1],_e[0]}function pr(ue,Te){if(ue)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function gr(ue,Te){var ye=ue;prep_blob(ye,0);var _e=[],Ce=[],Ae={FileIndex:_e,FullPaths:Ce};D(Ae,{root:Te.root});for(var $e=ye.length-4;(ye[$e]!=80||ye[$e+1]!=75||ye[$e+2]!=5||ye[$e+3]!=6)&&$e>=0;)--$e;ye.l=$e+4,ye.l+=4;var Ue=ye.read_shift(2);ye.l+=6;var Ne=ye.read_shift(4);for(ye.l=Ne,$e=0;$e<Ue;++$e){ye.l+=20;var Fe=ye.read_shift(4),Be=ye.read_shift(4),Ge=ye.read_shift(2),Ye=ye.read_shift(2),Xe=ye.read_shift(2);ye.l+=8;var qe=ye.read_shift(4),Ke=d(ye.slice(ye.l+Ge,ye.l+Ge+Ye));ye.l+=Ge+Ye+Xe;var Qe=ye.l;ye.l=qe+4,wr(ye,Fe,Be,Ae,Ke),ye.l=Qe}return Ae}function wr(ue,Te,ye,_e,Ce){ue.l+=2;var Ae=ue.read_shift(2),$e=ue.read_shift(2),Ue=u(ue);if(Ae&8257)throw new Error("Unsupported ZIP encryption");for(var Ne=ue.read_shift(4),Fe=ue.read_shift(4),Be=ue.read_shift(4),Ge=ue.read_shift(2),Ye=ue.read_shift(2),Xe="",qe=0;qe<Ge;++qe)Xe+=String.fromCharCode(ue[ue.l++]);if(Ye){var Ke=d(ue.slice(ue.l,ue.l+Ye));(Ke[21589]||{}).mt&&(Ue=Ke[21589].mt),((Ce||{})[21589]||{}).mt&&(Ue=Ce[21589].mt)}ue.l+=Ye;var Qe=ue.slice(ue.l,ue.l+Fe);switch($e){case 8:Qe=se(ue,Be);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+$e)}var ot=!1;Ae&8&&(Ne=ue.read_shift(4),Ne==134695760&&(Ne=ue.read_shift(4),ot=!0),Fe=ue.read_shift(4),Be=ue.read_shift(4)),Fe!=Te&&pr(ot,"Bad compressed size: "+Te+" != "+Fe),Be!=ye&&pr(ot,"Bad uncompressed size: "+ye+" != "+Be),hr(_e,Xe,Qe,{unsafe:!0,mt:Ue})}function xr(ue,Te){var ye=Te||{},_e=[],Ce=[],Ae=new_buf(1),$e=ye.compression?8:0,Ue=0,Ne=0,Fe=0,Be=0,Ge=0,Ye=ue.FullPaths[0],Xe=Ye,qe=ue.FileIndex[0],Ke=[],Qe=0;for(Ne=1;Ne<ue.FullPaths.length;++Ne)if(Xe=ue.FullPaths[Ne].slice(Ye.length),qe=ue.FileIndex[Ne],!(!qe.size||!qe.content||Xe=="Sh33tJ5")){var ot=Be,ct=new_buf(Xe.length);for(Fe=0;Fe<Xe.length;++Fe)ct.write_shift(1,Xe.charCodeAt(Fe)&127);ct=ct.slice(0,ct.l),Ke[Ge]=CRC32.buf(qe.content,0);var ft=qe.content;$e==8&&(ft=de(ft)),Ae=new_buf(30),Ae.write_shift(4,67324752),Ae.write_shift(2,20),Ae.write_shift(2,Ue),Ae.write_shift(2,$e),qe.mt?c(Ae,qe.mt):Ae.write_shift(4,0),Ae.write_shift(-4,Ke[Ge]),Ae.write_shift(4,ft.length),Ae.write_shift(4,qe.content.length),Ae.write_shift(2,ct.length),Ae.write_shift(2,0),Be+=Ae.length,_e.push(Ae),Be+=ct.length,_e.push(ct),Be+=ft.length,_e.push(ft),Ae=new_buf(46),Ae.write_shift(4,33639248),Ae.write_shift(2,0),Ae.write_shift(2,20),Ae.write_shift(2,Ue),Ae.write_shift(2,$e),Ae.write_shift(4,0),Ae.write_shift(-4,Ke[Ge]),Ae.write_shift(4,ft.length),Ae.write_shift(4,qe.content.length),Ae.write_shift(2,ct.length),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(4,0),Ae.write_shift(4,ot),Qe+=Ae.l,Ce.push(Ae),Qe+=ct.length,Ce.push(ct),++Ge}return Ae=new_buf(22),Ae.write_shift(4,101010256),Ae.write_shift(2,0),Ae.write_shift(2,0),Ae.write_shift(2,Ge),Ae.write_shift(2,Ge),Ae.write_shift(4,Qe),Ae.write_shift(4,Be),Ae.write_shift(2,0),bconcat([bconcat(_e),bconcat(Ce),Ae])}var ar={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Sr(ue,Te){if(ue.ctype)return ue.ctype;var ye=ue.name||"",_e=ye.match(/\.([^\.]+)$/);return _e&&ar[_e[1]]||Te&&(_e=(ye=Te).match(/[\.\\]([^\.\\])+$/),_e&&ar[_e[1]])?ar[_e[1]]:"application/octet-stream"}function Er(ue){for(var Te=Base64_encode(ue),ye=[],_e=0;_e<Te.length;_e+=76)ye.push(Te.slice(_e,_e+76));return ye.join(`\r
`)+`\r
`}function Tr(ue){var Te=ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Fe){var Be=Fe.charCodeAt(0).toString(16).toUpperCase();return"="+(Be.length==1?"0"+Be:Be)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ye=[],_e=Te.split(`\r
`),Ce=0;Ce<_e.length;++Ce){var Ae=_e[Ce];if(Ae.length==0){ye.push("");continue}for(var $e=0;$e<Ae.length;){var Ue=76,Ne=Ae.slice($e,$e+Ue);Ne.charAt(Ue-1)=="="?Ue--:Ne.charAt(Ue-2)=="="?Ue-=2:Ne.charAt(Ue-3)=="="&&(Ue-=3),Ne=Ae.slice($e,$e+Ue),$e+=Ue,$e<Ae.length&&(Ne+="="),ye.push(Ne)}}return ye.join(`\r
`)}function Cr(ue){for(var Te=[],ye=0;ye<ue.length;++ye){for(var _e=ue[ye];ye<=ue.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+ue[++ye];Te.push(_e)}for(var Ce=0;Ce<Te.length;++Ce)Te[Ce]=Te[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(Ae){return String.fromCharCode(parseInt(Ae.slice(1),16))});return s2a(Te.join(`\r
`))}function Ar(ue,Te,ye){for(var _e="",Ce="",Ae="",$e,Ue=0;Ue<10;++Ue){var Ne=Te[Ue];if(!Ne||Ne.match(/^\s*$/))break;var Fe=Ne.match(/^(.*?):\s*([^\s].*)$/);if(Fe)switch(Fe[1].toLowerCase()){case"content-location":_e=Fe[2].trim();break;case"content-type":Ae=Fe[2].trim();break;case"content-transfer-encoding":Ce=Fe[2].trim();break}}switch(++Ue,Ce.toLowerCase()){case"base64":$e=s2a(Base64_decode(Te.slice(Ue).join("")));break;case"quoted-printable":$e=Cr(Te.slice(Ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var Be=hr(ue,_e.slice(ye.length),$e,{unsafe:!0});Ae&&(Be.ctype=Ae)}function Rr(ue,Te){if(me(ue.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ye=Te&&Te.root||"",_e=(has_buf&&Buffer.isBuffer(ue)?ue.toString("binary"):me(ue)).split(`\r
`),Ce=0,Ae="";for(Ce=0;Ce<_e.length;++Ce)if(Ae=_e[Ce],!!/^Content-Location:/i.test(Ae)&&(Ae=Ae.slice(Ae.indexOf("file")),ye||(ye=Ae.slice(0,Ae.lastIndexOf("/")+1)),Ae.slice(0,ye.length)!=ye))for(;ye.length>0&&(ye=ye.slice(0,ye.length-1),ye=ye.slice(0,ye.lastIndexOf("/")+1),Ae.slice(0,ye.length)!=ye););var $e=(_e[1]||"").match(/boundary="(.*?)"/);if(!$e)throw new Error("MAD cannot find boundary");var Ue="--"+($e[1]||""),Ne=[],Fe=[],Be={FileIndex:Ne,FullPaths:Fe};D(Be);var Ge,Ye=0;for(Ce=0;Ce<_e.length;++Ce){var Xe=_e[Ce];Xe!==Ue&&Xe!==Ue+"--"||(Ye++&&Ar(Be,_e.slice(Ge,Ce),ye),Ge=Ce)}return Be}function kr(ue,Te){var ye=Te||{},_e=ye.boundary||"SheetJS";_e="------="+_e;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Ae=ue.FullPaths[0],$e=Ae,Ue=ue.FileIndex[0],Ne=1;Ne<ue.FullPaths.length;++Ne)if($e=ue.FullPaths[Ne].slice(Ae.length),Ue=ue.FileIndex[Ne],!(!Ue.size||!Ue.content||$e=="Sh33tJ5")){$e=$e.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Qe){return"_x"+Qe.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Qe){return"_u"+Qe.charCodeAt(0).toString(16)+"_"});for(var Fe=Ue.content,Be=has_buf&&Buffer.isBuffer(Fe)?Fe.toString("binary"):me(Fe),Ge=0,Ye=Math.min(1024,Be.length),Xe=0,qe=0;qe<=Ye;++qe)(Xe=Be.charCodeAt(qe))>=32&&Xe<128&&++Ge;var Ke=Ge>=Ye*4/5;Ce.push(_e),Ce.push("Content-Location: "+(ye.root||"file:///C:/SheetJS/")+$e),Ce.push("Content-Transfer-Encoding: "+(Ke?"quoted-printable":"base64")),Ce.push("Content-Type: "+Sr(Ue,$e)),Ce.push(""),Ce.push(Ke?Tr(Be):Er(Be))}return Ce.push(_e+`--\r
`),Ce.join(`\r
`)}function Pr(ue){var Te={};return D(Te,ue),Te}function hr(ue,Te,ye,_e){var Ce=_e&&_e.unsafe;Ce||D(ue);var Ae=!Ce&&CFB.find(ue,Te);if(!Ae){var $e=ue.FullPaths[0];Te.slice(0,$e.length)==$e?$e=Te:($e.slice(-1)!="/"&&($e+="/"),$e=($e+Te).replace("//","/")),Ae={name:l(Te),type:2},ue.FileIndex.push(Ae),ue.FullPaths.push($e),Ce||CFB.utils.cfb_gc(ue)}return Ae.content=ye,Ae.size=ye?ye.length:0,_e&&(_e.CLSID&&(Ae.clsid=_e.CLSID),_e.mt&&(Ae.mt=_e.mt),_e.ct&&(Ae.ct=_e.ct)),Ae}function Ir(ue,Te){D(ue);var ye=CFB.find(ue,Te);if(ye){for(var _e=0;_e<ue.FileIndex.length;++_e)if(ue.FileIndex[_e]==ye)return ue.FileIndex.splice(_e,1),ue.FullPaths.splice(_e,1),!0}return!1}function Lr(ue,Te,ye){D(ue);var _e=CFB.find(ue,Te);if(_e){for(var Ce=0;Ce<ue.FileIndex.length;++Ce)if(ue.FileIndex[Ce]==_e)return ue.FileIndex[Ce].name=l(ye),ue.FullPaths[Ce]=ye,!0}return!1}function Dr(ue){H(ue,!0)}return a.find=Y,a.read=j,a.parse=p,a.write=ae,a.writeFile=be,a.utils={cfb_new:Pr,cfb_add:hr,cfb_del:Ir,cfb_mov:Lr,cfb_gc:Dr,ReadShift,CheckField,prep_blob,bconcat,use_zlib:ie,_deflateRaw:Tt,_inflateRaw:Zt,consts:ve},a}();function blobify(o){return typeof o=="string"?s2ab(o):Array.isArray(o)?a2u(o):o}function write_dl(o,a,n){if(typeof Deno<"u"){if(n&&typeof a=="string")switch(n){case"utf8":a=new TextEncoder(n).encode(a);break;case"binary":a=s2ab(a);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(o,a)}var s=n=="utf8"?utf8write(a):a;if(typeof IE_SaveFile<"u")return IE_SaveFile(s,o);if(typeof Blob<"u"){var l=new Blob([blobify(s)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(l,o);if(typeof saveAs<"u")return saveAs(l,o);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(l);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:o,saveAs:!0});var u=document.createElement("a");if(u.download!=null)return u.download=o,u.href=c,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(o);return d.open("w"),d.encoding="binary",Array.isArray(a)&&(a=a2s(a)),d.write(a),d.close(),a}catch(h){if(!h.message||!h.message.match(/onstruct/))throw h}throw new Error("cannot save file "+o)}function keys(o){for(var a=Object.keys(o),n=[],s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(o,a[s])&&n.push(a[s]);return n}function evert_key(o,a){for(var n=[],s=keys(o),l=0;l!==s.length;++l)n[o[s[l]][a]]==null&&(n[o[s[l]][a]]=s[l]);return n}function evert(o){for(var a=[],n=keys(o),s=0;s!==n.length;++s)a[o[n[s]]]=n[s];return a}function evert_num(o){for(var a=[],n=keys(o),s=0;s!==n.length;++s)a[o[n[s]]]=parseInt(n[s],10);return a}function evert_arr(o){for(var a=[],n=keys(o),s=0;s!==n.length;++s)a[o[n[s]]]==null&&(a[o[n[s]]]=[]),a[o[n[s]]].push(n[s]);return a}var basedate=new Date(1899,11,30,0,0,0);function datenum(o,a){var n=o.getTime(),s=basedate.getTime()+(o.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(n-s)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(o){var a=new Date;return a.setTime(o*24*60*60*1e3+dnthresh),a.getTimezoneOffset()!==refoffset&&a.setTime(a.getTime()+(a.getTimezoneOffset()-refoffset)*6e4),a}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(o,a){var n=new Date(o);if(good_pd)return a>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):a<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(o instanceof Date)return o;if(good_pd_date.getFullYear()==1917&&!isNaN(n.getFullYear())){var s=n.getFullYear();return o.indexOf(""+s)>-1||n.setFullYear(n.getFullYear()+100),n}var l=o.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return o.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function cc2str(o,a){if(has_buf&&Buffer.isBuffer(o))return o.toString("binary");if(typeof TextDecoder<"u")try{var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(o)&&(o=new Uint8Array(o)),new TextDecoder("latin1").decode(o).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(c){return n[c]||c})}catch{}for(var s=[],l=0;l!=o.length;++l)s.push(String.fromCharCode(o[l]));return s.join("")}function dup(o){if(typeof JSON<"u"&&!Array.isArray(o))return JSON.parse(JSON.stringify(o));if(typeof o!="object"||o==null)return o;if(o instanceof Date)return new Date(o.getTime());var a={};for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(a[n]=dup(o[n]));return a}function fill(o,a){for(var n="";n.length<a;)n+=o;return n}function fuzzynum(o){var a=Number(o);if(!isNaN(a))return isFinite(a)?a:NaN;if(!/\d/.test(o))return a;var n=1,s=o.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(a=Number(s))||(s=s.replace(/[(](.*)[)]/,function(l,c){return n=-n,c}),!isNaN(a=Number(s)))?a/n:a}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(o){var a=new Date(o),n=new Date(NaN),s=a.getYear(),l=a.getMonth(),c=a.getDate();if(isNaN(c))return n;var u=o.toLowerCase();if(u.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(u=u.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),u.length>3&&lower_months.indexOf(u)==-1)return n}else if(u.match(/[a-z]/))return n;return s<0||s>8099?n:(l>0||c>1)&&s!=101?a:o.match(/[^-0-9:,\/\\]/)?n:a}function zip_add_file(o,a,n){if(o.FullPaths){if(typeof n=="string"){var s;return has_buf?s=Buffer_from(n):s=utf8decode(n),CFB.utils.cfb_add(o,a,s)}CFB.utils.cfb_add(o,a,n)}else o.file(a,n)}function zip_new(){return CFB.utils.cfb_new()}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f]/g;function escapexml(o){var a=o+"";return a.replace(decregex,function(n){return rencoding[n]}).replace(charegex,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(o){return escapexml(o).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(o){var a=o+"";return a.replace(decregex,function(n){return rencoding[n]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(o){var a=o+"";return a.replace(decregex,function(n){return rencoding[n]}).replace(htmlcharegex,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}function xlml_unfixstr(o){return o.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(o){switch(o){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function utf8reada(o){for(var a="",n=0,s=0,l=0,c=0,u=0,d=0;n<o.length;){if(s=o.charCodeAt(n++),s<128){a+=String.fromCharCode(s);continue}if(l=o.charCodeAt(n++),s>191&&s<224){u=(s&31)<<6,u|=l&63,a+=String.fromCharCode(u);continue}if(c=o.charCodeAt(n++),s<240){a+=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63);continue}u=o.charCodeAt(n++),d=((s&7)<<18|(l&63)<<12|(c&63)<<6|u&63)-65536,a+=String.fromCharCode(55296+(d>>>10&1023)),a+=String.fromCharCode(56320+(d&1023))}return a}function utf8readb(o){var a=new_raw_buf(2*o.length),n,s,l=1,c=0,u=0,d;for(s=0;s<o.length;s+=l)l=1,(d=o.charCodeAt(s))<128?n=d:d<224?(n=(d&31)*64+(o.charCodeAt(s+1)&63),l=2):d<240?(n=(d&15)*4096+(o.charCodeAt(s+1)&63)*64+(o.charCodeAt(s+2)&63),l=3):(l=4,n=(d&7)*262144+(o.charCodeAt(s+1)&63)*4096+(o.charCodeAt(s+2)&63)*64+(o.charCodeAt(s+3)&63),n-=65536,u=55296+(n>>>10&1023),n=56320+(n&1023)),u!==0&&(a[c++]=u&255,a[c++]=u>>>8,u=0),a[c++]=n%256,a[c++]=n>>>8;return a.slice(0,c).toString("ucs2")}function utf8readc(o){return Buffer_from(o,"binary").toString("utf8")}var utf8corpus="foo bar bazâð£",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(o){return Buffer_from(o,"utf8").toString("binary")}:function(o){for(var a=[],n=0,s=0,l=0;n<o.length;)switch(s=o.charCodeAt(n++),!0){case s<128:a.push(String.fromCharCode(s));break;case s<2048:a.push(String.fromCharCode(192+(s>>6))),a.push(String.fromCharCode(128+(s&63)));break;case(s>=55296&&s<57344):s-=55296,l=o.charCodeAt(n++)-56320+(s<<10),a.push(String.fromCharCode(240+(l>>18&7))),a.push(String.fromCharCode(144+(l>>12&63))),a.push(String.fromCharCode(128+(l>>6&63))),a.push(String.fromCharCode(128+(l&63)));break;default:a.push(String.fromCharCode(224+(s>>12))),a.push(String.fromCharCode(128+(s>>6&63))),a.push(String.fromCharCode(128+(s&63)))}return a.join("")},htmldecode=function(){var o=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(a){return[new RegExp("&"+a[0]+";","ig"),a[1]]});return function(n){for(var s=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<o.length;++l)s=s.replace(o[l][0],o[l][1]);return s}}(),wtregex=/(^\s|\s$|\n)/;function writetag(o,a){return"<"+o+(a.match(wtregex)?' xml:space="preserve"':"")+">"+a+"</"+o+">"}function wxt_helper(o){return keys(o).map(function(a){return" "+a+'="'+o[a]+'"'}).join("")}function writextag(o,a,n){return"<"+o+(n!=null?wxt_helper(n):"")+(a!=null?(a.match(wtregex)?' xml:space="preserve"':"")+">"+a+"</"+o:"/")+">"}function write_w3cdtf(o,a){try{return o.toISOString().replace(/\.\d*/,"")}catch(n){if(a)throw n}return""}function write_vt(o,a){switch(typeof o){case"string":var n=writextag("vt:lpwstr",escapexml(o));return n=n.replace(/&quot;/g,"_x0022_"),n;case"number":return writextag((o|0)==o?"vt:i4":"vt:r8",escapexml(String(o)));case"boolean":return writextag("vt:bool",o?"true":"false")}if(o instanceof Date)return writextag("vt:filetime",write_w3cdtf(o));throw new Error("Unable to serialize "+o)}var XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(o,a){for(var n=1-2*(o[a+7]>>>7),s=((o[a+7]&127)<<4)+(o[a+6]>>>4&15),l=o[a+6]&15,c=5;c>=0;--c)l=l*256+o[a+c];return s==2047?l==0?n*(1/0):NaN:(s==0?s=-1022:(s-=1023,l+=Math.pow(2,52)),n*Math.pow(2,s-52)*l)}function write_double_le(o,a,n){var s=(a<0||1/a==-1/0?1:0)<<7,l=0,c=0,u=s?-a:a;isFinite(u)?u==0?l=c=0:(l=Math.floor(Math.log(u)/Math.LN2),c=u*Math.pow(2,52-l),l<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?l=-1022:(c-=Math.pow(2,52),l+=1023)):(l=2047,c=isNaN(a)?26985:0);for(var d=0;d<=5;++d,c/=256)o[n+d]=c&255;o[n+6]=(l&15)<<4|c&15,o[n+7]=l>>4|s}var ___toBuffer=function(o){for(var a=[],n=10240,s=0;s<o[0].length;++s)if(o[0][s])for(var l=0,c=o[0][s].length;l<c;l+=n)a.push.apply(a,o[0][s].slice(l,l+n));return a},__toBuffer=has_buf?function(o){return o[0].length>0&&Buffer.isBuffer(o[0][0])?Buffer.concat(o[0].map(function(a){return Buffer.isBuffer(a)?a:Buffer_from(a)})):___toBuffer(o)}:___toBuffer,___utf16le=function(o,a,n){for(var s=[],l=a;l<n;l+=2)s.push(String.fromCharCode(__readUInt16LE(o,l)));return s.join("").replace(chr0,"")},__utf16le=has_buf?function(o,a,n){return Buffer.isBuffer(o)?o.toString("utf16le",a,n).replace(chr0,""):___utf16le(o,a,n)}:___utf16le,___hexlify=function(o,a,n){for(var s=[],l=a;l<a+n;++l)s.push(("0"+o[l].toString(16)).slice(-2));return s.join("")},__hexlify=has_buf?function(o,a,n){return Buffer.isBuffer(o)?o.toString("hex",a,a+n):___hexlify(o,a,n)}:___hexlify,___utf8=function(o,a,n){for(var s=[],l=a;l<n;l++)s.push(String.fromCharCode(__readUInt8(o,l)));return s.join("")},__utf8=has_buf?function o(a,n,s){return Buffer.isBuffer(a)?a.toString("utf8",n,s):___utf8(a,n,s)}:___utf8,___lpstr=function(o,a){var n=__readUInt32LE(o,a);return n>0?__utf8(o,a+4,a+4+n-1):""},__lpstr=___lpstr,___cpstr=function(o,a){var n=__readUInt32LE(o,a);return n>0?__utf8(o,a+4,a+4+n-1):""},__cpstr=___cpstr,___lpwstr=function(o,a){var n=2*__readUInt32LE(o,a);return n>0?__utf8(o,a+4,a+4+n-1):""},__lpwstr=___lpwstr,___lpp4=function o(a,n){var s=__readUInt32LE(a,n);return s>0?__utf16le(a,n+4,n+4+s):""},__lpp4=___lpp4,___8lpp4=function(o,a){var n=__readUInt32LE(o,a);return n>0?__utf8(o,a+4,a+4+n):""},__8lpp4=___8lpp4,___double=function(o,a){return read_double_le(o,a)},__double=___double,is_buf=function o(a){return Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array};has_buf&&(__lpstr=function(a,n){if(!Buffer.isBuffer(a))return ___lpstr(a,n);var s=a.readUInt32LE(n);return s>0?a.toString("utf8",n+4,n+4+s-1):""},__cpstr=function(a,n){if(!Buffer.isBuffer(a))return ___cpstr(a,n);var s=a.readUInt32LE(n);return s>0?a.toString("utf8",n+4,n+4+s-1):""},__lpwstr=function(a,n){if(!Buffer.isBuffer(a))return ___lpwstr(a,n);var s=2*a.readUInt32LE(n);return a.toString("utf16le",n+4,n+4+s-1)},__lpp4=function(a,n){if(!Buffer.isBuffer(a))return ___lpp4(a,n);var s=a.readUInt32LE(n);return a.toString("utf16le",n+4,n+4+s)},__8lpp4=function(a,n){if(!Buffer.isBuffer(a))return ___8lpp4(a,n);var s=a.readUInt32LE(n);return a.toString("utf8",n+4,n+4+s)},__double=function(a,n){return Buffer.isBuffer(a)?a.readDoubleLE(n):___double(a,n)},is_buf=function(a){return Buffer.isBuffer(a)||Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array});var __readUInt8=function(o,a){return o[a]},__readUInt16LE=function(o,a){return o[a+1]*256+o[a]},__readInt16LE=function(o,a){var n=o[a+1]*256+o[a];return n<32768?n:(65535-n+1)*-1},__readUInt32LE=function(o,a){return o[a+3]*(1<<24)+(o[a+2]<<16)+(o[a+1]<<8)+o[a]},__readInt32LE=function(o,a){return o[a+3]<<24|o[a+2]<<16|o[a+1]<<8|o[a]},__readInt32BE=function(o,a){return o[a]<<24|o[a+1]<<16|o[a+2]<<8|o[a+3]};function ReadShift(o,a){var n="",s,l,c=[],u,d,h,f;switch(a){case"dbcs":if(f=this.l,has_buf&&Buffer.isBuffer(this))n=this.slice(this.l,this.l+2*o).toString("utf16le");else for(h=0;h<o;++h)n+=String.fromCharCode(__readUInt16LE(this,f)),f+=2;o*=2;break;case"utf8":n=__utf8(this,this.l,this.l+o);break;case"utf16le":o*=2,n=__utf16le(this,this.l,this.l+o);break;case"wstr":return ReadShift.call(this,o,"dbcs");case"lpstr-ansi":n=__lpstr(this,this.l),o=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":n=__cpstr(this,this.l),o=4+__readUInt32LE(this,this.l);break;case"lpwstr":n=__lpwstr(this,this.l),o=4+2*__readUInt32LE(this,this.l);break;case"lpp4":o=4+__readUInt32LE(this,this.l),n=__lpp4(this,this.l),o&2&&(o+=2);break;case"8lpp4":o=4+__readUInt32LE(this,this.l),n=__8lpp4(this,this.l),o&3&&(o+=4-(o&3));break;case"cstr":for(o=0,n="";(u=__readUInt8(this,this.l+o++))!==0;)c.push(_getchar(u));n=c.join("");break;case"_wstr":for(o=0,n="";(u=__readUInt16LE(this,this.l+o))!==0;)c.push(_getchar(u)),o+=2;o+=2,n=c.join("");break;case"dbcs-cont":for(n="",f=this.l,h=0;h<o;++h){if(this.lens&&this.lens.indexOf(f)!==-1)return u=__readUInt8(this,f),this.l=f+1,d=ReadShift.call(this,o-h,u?"dbcs-cont":"sbcs-cont"),c.join("")+d;c.push(_getchar(__readUInt16LE(this,f))),f+=2}n=c.join(""),o*=2;break;case"cpstr":case"sbcs-cont":for(n="",f=this.l,h=0;h!=o;++h){if(this.lens&&this.lens.indexOf(f)!==-1)return u=__readUInt8(this,f),this.l=f+1,d=ReadShift.call(this,o-h,u?"dbcs-cont":"sbcs-cont"),c.join("")+d;c.push(_getchar(__readUInt8(this,f))),f+=1}n=c.join("");break;default:switch(o){case 1:return s=__readUInt8(this,this.l),this.l++,s;case 2:return s=(a==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,s;case 4:case-4:return a==="i"||(this[this.l+3]&128)===0?(s=(o>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,s):(l=__readUInt32LE(this,this.l),this.l+=4,l);case 8:case-8:if(a==="f")return o==8?l=__double(this,this.l):l=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;o=8;case 16:n=__hexlify(this,this.l,o);break}}return this.l+=o,n}var __writeUInt32LE=function(o,a,n){o[n]=a&255,o[n+1]=a>>>8&255,o[n+2]=a>>>16&255,o[n+3]=a>>>24&255},__writeInt32LE=function(o,a,n){o[n]=a&255,o[n+1]=a>>8&255,o[n+2]=a>>16&255,o[n+3]=a>>24&255},__writeUInt16LE=function(o,a,n){o[n]=a&255,o[n+1]=a>>>8&255};function WriteShift(o,a,n){var s=0,l=0;if(n==="dbcs"){for(l=0;l!=a.length;++l)__writeUInt16LE(this,a.charCodeAt(l),this.l+2*l);s=2*a.length}else if(n==="sbcs"){for(a=a.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=a.length;++l)this[this.l+l]=a.charCodeAt(l)&255;s=a.length}else if(n==="hex"){for(;l<o;++l)this[this.l++]=parseInt(a.slice(2*l,2*l+2),16)||0;return this}else if(n==="utf16le"){var c=Math.min(this.l+o,this.length);for(l=0;l<Math.min(a.length,o);++l){var u=a.charCodeAt(l);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(o){case 1:s=1,this[this.l]=a&255;break;case 2:s=2,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255;break;case 3:s=3,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255,a>>>=8,this[this.l+2]=a&255;break;case 4:s=4,__writeUInt32LE(this,a,this.l);break;case 8:if(s=8,n==="f"){write_double_le(this,a,this.l);break}case 16:break;case-4:s=4,__writeInt32LE(this,a,this.l);break}return this.l+=s,this}function CheckField(o,a){var n=__hexlify(this,this.l,o.length>>1);if(n!==o)throw new Error(a+"Expected "+o+" saw "+n);this.l+=o.length>>1}function prep_blob(o,a){o.l=a,o.read_shift=ReadShift,o.chk=CheckField,o.write_shift=WriteShift}function parsenoop(o,a){o.l+=a}function new_buf(o){var a=new_raw_buf(o);return prep_blob(a,0),a}function buf_array(){var o=[],a=has_buf?256:2048,n=function(f){var p=new_buf(f);return prep_blob(p,0),p},s=n(a),l=function(){s&&(s.length>s.l&&(s=s.slice(0,s.l),s.l=s.length),s.length>0&&o.push(s),s=null)},c=function(f){return s&&f<s.length-s.l?s:(l(),s=n(Math.max(f+1,a)))},u=function(){return l(),bconcat(o)},d=function(f){l(),s=f,s.l==null&&(s.l=s.length),c(a)};return{next:c,push:d,end:u,_bufs:o}}function write_record(o,a,n,s){var l=+a,c;if(!isNaN(l)){s||(s=XLSBRecordEnum[l].p||(n||[]).length||0),c=1+(l>=128?1:0)+1,s>=128&&++c,s>=16384&&++c,s>=2097152&&++c;var u=o.next(c);l<=127?u.write_shift(1,l):(u.write_shift(1,(l&127)+128),u.write_shift(1,l>>7));for(var d=0;d!=4;++d)if(s>=128)u.write_shift(1,(s&127)+128),s>>=7;else{u.write_shift(1,s);break}s>0&&is_buf(n)&&o.push(n)}}function shift_cell_xls(o,a,n){var s=dup(o);if(a.s?(s.cRel&&(s.c+=a.s.c),s.rRel&&(s.r+=a.s.r)):(s.cRel&&(s.c+=a.c),s.rRel&&(s.r+=a.r)),!n||n.biff<12){for(;s.c>=256;)s.c-=256;for(;s.r>=65536;)s.r-=65536}return s}function shift_range_xls(o,a,n){var s=dup(o);return s.s=shift_cell_xls(s.s,a.s,n),s.e=shift_cell_xls(s.e,a.s,n),s}function encode_cell_xls(o,a){if(o.cRel&&o.c<0)for(o=dup(o);o.c<0;)o.c+=a>8?16384:256;if(o.rRel&&o.r<0)for(o=dup(o);o.r<0;)o.r+=a>8?1048576:a>5?65536:16384;var n=encode_cell(o);return!o.cRel&&o.cRel!=null&&(n=fix_col(n)),!o.rRel&&o.rRel!=null&&(n=fix_row(n)),n}function encode_range_xls(o,a){return o.s.r==0&&!o.s.rRel&&o.e.r==(a.biff>=12?1048575:a.biff>=8?65536:16384)&&!o.e.rRel?(o.s.cRel?"":"$")+encode_col(o.s.c)+":"+(o.e.cRel?"":"$")+encode_col(o.e.c):o.s.c==0&&!o.s.cRel&&o.e.c==(a.biff>=12?16383:255)&&!o.e.cRel?(o.s.rRel?"":"$")+encode_row(o.s.r)+":"+(o.e.rRel?"":"$")+encode_row(o.e.r):encode_cell_xls(o.s,a.biff)+":"+encode_cell_xls(o.e,a.biff)}function decode_row(o){return parseInt(unfix_row(o),10)-1}function encode_row(o){return""+(o+1)}function fix_row(o){return o.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(o){return o.replace(/\$(\d+)$/,"$1")}function decode_col(o){for(var a=unfix_col(o),n=0,s=0;s!==a.length;++s)n=26*n+a.charCodeAt(s)-64;return n-1}function encode_col(o){if(o<0)throw new Error("invalid column "+o);var a="";for(++o;o;o=Math.floor((o-1)/26))a=String.fromCharCode((o-1)%26+65)+a;return a}function fix_col(o){return o.replace(/^([A-Z])/,"$$$1")}function unfix_col(o){return o.replace(/^\$([A-Z])/,"$1")}function split_cell(o){return o.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(o){for(var a=0,n=0,s=0;s<o.length;++s){var l=o.charCodeAt(s);l>=48&&l<=57?a=10*a+(l-48):l>=65&&l<=90&&(n=26*n+(l-64))}return{c:n-1,r:a-1}}function encode_cell(o){for(var a=o.c+1,n="";a;a=(a-1)/26|0)n=String.fromCharCode((a-1)%26+65)+n;return n+(o.r+1)}function decode_range(o){var a=o.indexOf(":");return a==-1?{s:decode_cell(o),e:decode_cell(o)}:{s:decode_cell(o.slice(0,a)),e:decode_cell(o.slice(a+1))}}function encode_range(o,a){return typeof a>"u"||typeof a=="number"?encode_range(o.s,o.e):(typeof o!="string"&&(o=encode_cell(o)),typeof a!="string"&&(a=encode_cell(a)),o==a?o:o+":"+a)}function safe_decode_range(o){var a={s:{c:0,r:0},e:{c:0,r:0}},n=0,s=0,l=0,c=o.length;for(n=0;s<c&&!((l=o.charCodeAt(s)-64)<1||l>26);++s)n=26*n+l;for(a.s.c=--n,n=0;s<c&&!((l=o.charCodeAt(s)-48)<0||l>9);++s)n=10*n+l;if(a.s.r=--n,s===c||l!=10)return a.e.c=a.s.c,a.e.r=a.s.r,a;for(++s,n=0;s!=c&&!((l=o.charCodeAt(s)-64)<1||l>26);++s)n=26*n+l;for(a.e.c=--n,n=0;s!=c&&!((l=o.charCodeAt(s)-48)<0||l>9);++s)n=10*n+l;return a.e.r=--n,a}function safe_format_cell(o,a){var n=o.t=="d"&&a instanceof Date;if(o.z!=null)try{return o.w=SSF_format(o.z,n?datenum(a):a)}catch{}try{return o.w=SSF_format((o.XF||{}).numFmtId||(n?14:0),n?datenum(a):a)}catch{return""+a}}function format_cell(o,a,n){return o==null||o.t==null||o.t=="z"?"":o.w!==void 0?o.w:(o.t=="d"&&!o.z&&n&&n.dateNF&&(o.z=n.dateNF),o.t=="e"?BErr[o.v]||o.v:a==null?safe_format_cell(o,o.v):safe_format_cell(o,a))}function sheet_to_workbook(o,a){var n=a&&a.sheet?a.sheet:"Sheet1",s={};return s[n]=o,{SheetNames:[n],Sheets:s}}function sheet_add_aoa(o,a,n){var s=n||{},l=o?Array.isArray(o):s.dense,c=o||(l?[]:{}),u=0,d=0;if(c&&s.origin!=null){if(typeof s.origin=="number")u=s.origin;else{var h=typeof s.origin=="string"?decode_cell(s.origin):s.origin;u=h.r,d=h.c}c["!ref"]||(c["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var p=safe_decode_range(c["!ref"]);f.s.c=p.s.c,f.s.r=p.s.r,f.e.c=Math.max(f.e.c,p.e.c),f.e.r=Math.max(f.e.r,p.e.r),u==-1&&(f.e.r=u=p.e.r+1)}for(var g=0;g!=a.length;++g)if(a[g]){if(!Array.isArray(a[g]))throw new Error("aoa_to_sheet expects an array of arrays");for(var v=0;v!=a[g].length;++v)if(!(typeof a[g][v]>"u")){var b={v:a[g][v]},w=u+g,x=d+v;if(f.s.r>w&&(f.s.r=w),f.s.c>x&&(f.s.c=x),f.e.r<w&&(f.e.r=w),f.e.c<x&&(f.e.c=x),a[g][v]&&typeof a[g][v]=="object"&&!Array.isArray(a[g][v])&&!(a[g][v]instanceof Date))b=a[g][v];else if(Array.isArray(b.v)&&(b.f=a[g][v][1],b.v=b.v[0]),b.v===null)if(b.f)b.t="n";else if(s.nullError)b.t="e",b.v=0;else if(s.sheetStubs)b.t="z";else continue;else typeof b.v=="number"?b.t="n":typeof b.v=="boolean"?b.t="b":b.v instanceof Date?(b.z=s.dateNF||table_fmt[14],s.cellDates?(b.t="d",b.w=SSF_format(b.z,datenum(b.v))):(b.t="n",b.v=datenum(b.v),b.w=SSF_format(b.z,b.v))):b.t="s";if(l)c[w]||(c[w]=[]),c[w][x]&&c[w][x].z&&(b.z=c[w][x].z),c[w][x]=b;else{var S=encode_cell({c:x,r:w});c[S]&&c[S].z&&(b.z=c[S].z),c[S]=b}}}return f.s.c<1e7&&(c["!ref"]=encode_range(f)),c}function aoa_to_sheet(o,a){return sheet_add_aoa(null,o,a)}function parse_Int32LE(o){return o.read_shift(4,"i")}function write_UInt32LE(o,a){return a||(a=new_buf(4)),a.write_shift(4,o),a}function parse_XLWideString(o){var a=o.read_shift(4);return a===0?"":o.read_shift(a,"dbcs")}function write_XLWideString(o,a){var n=!1;return a==null&&(n=!0,a=new_buf(4+2*o.length)),a.write_shift(4,o.length),o.length>0&&a.write_shift(0,o,"dbcs"),n?a.slice(0,a.l):a}function parse_StrRun(o){return{ich:o.read_shift(2),ifnt:o.read_shift(2)}}function write_StrRun(o,a){return a||(a=new_buf(4)),a.write_shift(2,0),a.write_shift(2,0),a}function parse_RichStr(o,a){var n=o.l,s=o.read_shift(1),l=parse_XLWideString(o),c=[],u={t:l,h:l};if((s&1)!==0){for(var d=o.read_shift(4),h=0;h!=d;++h)c.push(parse_StrRun(o));u.r=c}else u.r=[{ich:0,ifnt:0}];return o.l=n+a,u}function write_RichStr(o,a){var n=!1;return a==null&&(n=!0,a=new_buf(15+4*o.t.length)),a.write_shift(1,0),write_XLWideString(o.t,a),n?a.slice(0,a.l):a}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(o,a){var n=!1;return a==null&&(n=!0,a=new_buf(23+4*o.t.length)),a.write_shift(1,1),write_XLWideString(o.t,a),a.write_shift(4,1),write_StrRun({},a),n?a.slice(0,a.l):a}function parse_XLSBCell(o){var a=o.read_shift(4),n=o.read_shift(2);return n+=o.read_shift(1)<<16,o.l++,{c:a,iStyleRef:n}}function write_XLSBCell(o,a){return a==null&&(a=new_buf(8)),a.write_shift(-4,o.c),a.write_shift(3,o.iStyleRef||o.s),a.write_shift(1,0),a}function parse_XLSBShortCell(o){var a=o.read_shift(2);return a+=o.read_shift(1)<<16,o.l++,{c:-1,iStyleRef:a}}function write_XLSBShortCell(o,a){return a==null&&(a=new_buf(4)),a.write_shift(3,o.iStyleRef||o.s),a.write_shift(1,0),a}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(o){var a=o.read_shift(4);return a===0||a===4294967295?"":o.read_shift(a,"dbcs")}function write_XLNullableWideString(o,a){var n=!1;return a==null&&(n=!0,a=new_buf(127)),a.write_shift(4,o.length>0?o.length:4294967295),o.length>0&&a.write_shift(0,o,"dbcs"),n?a.slice(0,a.l):a}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(o){var a=o.slice(o.l,o.l+4),n=a[0]&1,s=a[0]&2;o.l+=4;var l=s===0?__double([0,0,0,0,a[0]&252,a[1],a[2],a[3]],0):__readInt32LE(a,0)>>2;return n?l/100:l}function write_RkNumber(o,a){a==null&&(a=new_buf(4));var n=0,s=0,l=o*100;if(o==(o|0)&&o>=-536870912&&o<1<<29?s=1:l==(l|0)&&l>=-536870912&&l<1<<29&&(s=1,n=1),s)a.write_shift(-4,((n?l:o)<<2)+(n+2));else throw new Error("unsupported RkNumber "+o)}function parse_RfX(o){var a={s:{},e:{}};return a.s.r=o.read_shift(4),a.e.r=o.read_shift(4),a.s.c=o.read_shift(4),a.e.c=o.read_shift(4),a}function write_RfX(o,a){return a||(a=new_buf(16)),a.write_shift(4,o.s.r),a.write_shift(4,o.e.r),a.write_shift(4,o.s.c),a.write_shift(4,o.e.c),a}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(o){if(o.length-o.l<8)throw"XLS Xnum Buffer underflow";return o.read_shift(8,"f")}function write_Xnum(o,a){return(a||new_buf(8)).write_shift(8,o,"f")}function parse_BrtColor(o){var a={},n=o.read_shift(1),s=n>>>1,l=o.read_shift(1),c=o.read_shift(2,"i"),u=o.read_shift(1),d=o.read_shift(1),h=o.read_shift(1);switch(o.l++,s){case 0:a.auto=1;break;case 1:a.index=l;var f=XLSIcv[l];f&&(a.rgb=rgb2Hex(f));break;case 2:a.rgb=rgb2Hex([u,d,h]);break;case 3:a.theme=l;break}return c!=0&&(a.tint=c>0?c/32767:c/32768),a}function write_BrtColor(o,a){if(a||(a=new_buf(8)),!o||o.auto)return a.write_shift(4,0),a.write_shift(4,0),a;o.index!=null?(a.write_shift(1,2),a.write_shift(1,o.index)):o.theme!=null?(a.write_shift(1,6),a.write_shift(1,o.theme)):(a.write_shift(1,5),a.write_shift(1,0));var n=o.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),a.write_shift(2,n),!o.rgb||o.theme!=null)a.write_shift(2,0),a.write_shift(1,0),a.write_shift(1,0);else{var s=o.rgb||"FFFFFF";typeof s=="number"&&(s=("000000"+s.toString(16)).slice(-6)),a.write_shift(1,parseInt(s.slice(0,2),16)),a.write_shift(1,parseInt(s.slice(2,4),16)),a.write_shift(1,parseInt(s.slice(4,6),16)),a.write_shift(1,255)}return a}function parse_FontFlags(o){var a=o.read_shift(1);o.l++;var n={fBold:a&1,fItalic:a&2,fUnderline:a&4,fStrikeout:a&8,fOutline:a&16,fShadow:a&32,fCondense:a&64,fExtend:a&128};return n}function write_FontFlags(o,a){a||(a=new_buf(2));var n=(o.italic?2:0)|(o.strike?8:0)|(o.outline?16:0)|(o.shadow?32:0)|(o.condense?64:0)|(o.extend?128:0);return a.write_shift(1,n),a.write_shift(1,0),a}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}};function rgbify(o){return o.map(function(a){return[a>>16&255,a>>8&255,a&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function write_ct(o,a){var n=evert_arr(ct2type),s=[],l;s[s.length]=XML_HEADER,s[s.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),s=s.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(h){return writextag("Default",null,{Extension:h[0],ContentType:h[1]})}));var c=function(h){o[h]&&o[h].length>0&&(l=o[h][0],s[s.length]=writextag("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:CT_LIST[h][a.bookType]||CT_LIST[h].xlsx}))},u=function(h){(o[h]||[]).forEach(function(f){s[s.length]=writextag("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:CT_LIST[h][a.bookType]||CT_LIST[h].xlsx})})},d=function(h){(o[h]||[]).forEach(function(f){s[s.length]=writextag("Override",null,{PartName:(f[0]=="/"?"":"/")+f,ContentType:n[h][0]})})};return c("workbooks"),u("sheets"),u("charts"),d("themes"),["strs","styles"].forEach(c),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),u("metadata"),d("people"),s.length>2&&(s[s.length]="</Types>",s[1]=s[1].replace("/>",">")),s.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(o){var a=o.lastIndexOf("/");return o.slice(0,a+1)+"_rels/"+o.slice(a+1)+".rels"}function write_rels(o){var a=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(o["!id"]).forEach(function(n){a[a.length]=writextag("Relationship",null,o["!id"][n])}),a.length>2&&(a[a.length]="</Relationships>",a[1]=a[1].replace("/>",">")),a.join("")}function add_rels(o,a,n,s,l,c){if(l||(l={}),o["!id"]||(o["!id"]={}),o["!idx"]||(o["!idx"]=1),a<0)for(a=o["!idx"];o["!id"]["rId"+a];++a);if(o["!idx"]=a+1,l.Id="rId"+a,l.Type=s,l.Target=n,[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(l.Type)>-1&&(l.TargetMode="External"),o["!id"][l.Id])throw new Error("Cannot rewrite rId "+a);return o["!id"][l.Id]=l,o[("/"+l.Target).replace("//","/")]=l,a}function write_manifest(o){var a=[XML_HEADER];a.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),a.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<o.length;++n)a.push('  <manifest:file-entry manifest:full-path="'+o[n][0]+'" manifest:media-type="'+o[n][1]+`"/>
`);return a.push("</manifest:manifest>"),a.join("")}function write_rdf_type(o,a,n){return['  <rdf:Description rdf:about="'+o+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+a+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(o,a){return['  <rdf:Description rdf:about="'+o+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+a+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(o){var a=[XML_HEADER];a.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=o.length;++n)a.push(write_rdf_type(o[n][0],o[n][1])),a.push(write_rdf_has("",o[n][0]));return a.push(write_rdf_type("","Document","pkg")),a.push("</rdf:RDF>"),a.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function cp_doit(o,a,n,s,l){l[o]!=null||a==null||a===""||(l[o]=a,a=escapexml(a),s[s.length]=n?writextag(o,a,n):writetag(o,a))}function write_core_props(o,a){var n=a||{},s=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],l={};if(!o&&!n.Props)return s.join("");o&&(o.CreatedDate!=null&&cp_doit("dcterms:created",typeof o.CreatedDate=="string"?o.CreatedDate:write_w3cdtf(o.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},s,l),o.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof o.ModifiedDate=="string"?o.ModifiedDate:write_w3cdtf(o.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},s,l));for(var c=0;c!=CORE_PROPS.length;++c){var u=CORE_PROPS[c],d=n.Props&&n.Props[u[1]]!=null?n.Props[u[1]]:o?o[u[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&cp_doit(u[0],d,null,s,l)}return s.length>2&&(s[s.length]="</cp:coreProperties>",s[1]=s[1].replace("/>",">")),s.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function write_ext_props(o){var a=[],n=writextag;return o||(o={}),o.Application="SheetJS",a[a.length]=XML_HEADER,a[a.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(s){if(o[s[1]]!==void 0){var l;switch(s[2]){case"string":l=escapexml(String(o[s[1]]));break;case"bool":l=o[s[1]]?"true":"false";break}l!==void 0&&(a[a.length]=n(s[0],l))}}),a[a.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(o.Worksheets))),{size:2,baseType:"variant"})),a[a.length]=n("TitlesOfParts",n("vt:vector",o.SheetNames.map(function(s){return"<vt:lpstr>"+escapexml(s)+"</vt:lpstr>"}).join(""),{size:o.Worksheets,baseType:"lpstr"})),a.length>2&&(a[a.length]="</Properties>",a[1]=a[1].replace("/>",">")),a.join("")}function write_cust_props(o){var a=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!o)return a.join("");var n=1;return keys(o).forEach(function(l){++n,a[a.length]=writextag("property",write_vt(o[l]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:escapexml(l)})}),a.length>2&&(a[a.length]="</Properties>",a[1]=a[1].replace("/>",">")),a.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function xlml_write_docprops(o,a){var n=[];return keys(XLMLDocPropsMap).map(function(s){for(var l=0;l<CORE_PROPS.length;++l)if(CORE_PROPS[l][1]==s)return CORE_PROPS[l];for(l=0;l<EXT_PROPS.length;++l)if(EXT_PROPS[l][1]==s)return EXT_PROPS[l];throw s}).forEach(function(s){if(o[s[1]]!=null){var l=a&&a.Props&&a.Props[s[1]]!=null?a.Props[s[1]]:o[s[1]];switch(s[2]){case"date":l=new Date(l).toISOString().replace(/\.\d*Z/,"Z");break}typeof l=="number"?l=String(l):l===!0||l===!1?l=l?"1":"0":l instanceof Date&&(l=new Date(l).toISOString().replace(/\.\d*Z/,"")),n.push(writetag(XLMLDocPropsMap[s[1]]||s[1],l))}}),writextag("DocumentProperties",n.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(o,a){var n=["Worksheets","SheetNames"],s="CustomDocumentProperties",l=[];return o&&keys(o).forEach(function(c){if(Object.prototype.hasOwnProperty.call(o,c)){for(var u=0;u<CORE_PROPS.length;++u)if(c==CORE_PROPS[u][1])return;for(u=0;u<EXT_PROPS.length;++u)if(c==EXT_PROPS[u][1])return;for(u=0;u<n.length;++u)if(c==n[u])return;var d=o[c],h="string";typeof d=="number"?(h="float",d=String(d)):d===!0||d===!1?(h="boolean",d=d?"1":"0"):d=String(d),l.push(writextag(escapexmltag(c),d,{"dt:dt":h}))}}),a&&keys(a).forEach(function(c){if(Object.prototype.hasOwnProperty.call(a,c)&&!(o&&Object.prototype.hasOwnProperty.call(o,c))){var u=a[c],d="string";typeof u=="number"?(d="float",u=String(u)):u===!0||u===!1?(d="boolean",u=u?"1":"0"):u instanceof Date?(d="dateTime.tz",u=u.toISOString()):u=String(u),l.push(writextag(escapexmltag(c),u,{"dt:dt":d}))}}),"<"+s+' xmlns="'+XLMLNS.o+'">'+l.join("")+"</"+s+">"}function write_FILETIME(o){var a=typeof o=="string"?new Date(Date.parse(o)):o,n=a.getTime()/1e3+11644473600,s=n%Math.pow(2,32),l=(n-s)/Math.pow(2,32);s*=1e7,l*=1e7;var c=s/Math.pow(2,32)|0;c>0&&(s=s%Math.pow(2,32),l+=c);var u=new_buf(8);return u.write_shift(4,s),u.write_shift(4,l),u}function write_TypedPropertyValue(o,a){var n=new_buf(4),s=new_buf(4);switch(n.write_shift(4,o==80?31:o),o){case 3:s.write_shift(-4,a);break;case 5:s=new_buf(8),s.write_shift(8,a,"f");break;case 11:s.write_shift(4,a?1:0);break;case 64:s=write_FILETIME(a);break;case 31:case 80:for(s=new_buf(4+2*(a.length+1)+(a.length%2?0:2)),s.write_shift(4,a.length+1),s.write_shift(0,a,"dbcs");s.l!=s.length;)s.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+o+" "+a)}return bconcat([n,s])}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(o){switch(typeof o){case"boolean":return 11;case"number":return(o|0)==o?3:5;case"string":return 31;case"object":if(o instanceof Date)return 64;break}return-1}function write_PropertySet(o,a,n){var s=new_buf(8),l=[],c=[],u=8,d=0,h=new_buf(8),f=new_buf(8);if(h.write_shift(4,2),h.write_shift(4,1200),f.write_shift(4,1),c.push(h),l.push(f),u+=8+h.length,!a){f=new_buf(8),f.write_shift(4,0),l.unshift(f);var p=[new_buf(4)];for(p[0].write_shift(4,o.length),d=0;d<o.length;++d){var g=o[d][0];for(h=new_buf(8+2*(g.length+1)+(g.length%2?0:2)),h.write_shift(4,d+2),h.write_shift(4,g.length+1),h.write_shift(0,g,"dbcs");h.l!=h.length;)h.write_shift(1,0);p.push(h)}h=bconcat(p),c.unshift(h),u+=8+h.length}for(d=0;d<o.length;++d)if(!(a&&!a[o[d][0]])&&!(XLSPSSkip.indexOf(o[d][0])>-1||PseudoPropsPairs.indexOf(o[d][0])>-1)&&o[d][1]!=null){var v=o[d][1],b=0;if(a){b=+a[o[d][0]];var w=n[b];if(w.p=="version"&&typeof v=="string"){var x=v.split(".");v=(+x[0]<<16)+(+x[1]||0)}h=write_TypedPropertyValue(w.t,v)}else{var S=guess_property_type(v);S==-1&&(S=31,v=String(v)),h=write_TypedPropertyValue(S,v)}c.push(h),f=new_buf(8),f.write_shift(4,a?b:2+d),l.push(f),u+=8+h.length}var E=8*(c.length+1);for(d=0;d<c.length;++d)l[d].write_shift(4,E),E+=c[d].length;return s.write_shift(4,u),s.write_shift(4,c.length),bconcat([s].concat(l).concat(c))}function write_PropertySetStream(o,a,n,s,l,c){var u=new_buf(l?68:48),d=[u];u.write_shift(2,65534),u.write_shift(2,0),u.write_shift(4,842412599),u.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),u.write_shift(4,l?2:1),u.write_shift(16,a,"hex"),u.write_shift(4,l?68:48);var h=write_PropertySet(o,n,s);if(d.push(h),l){var f=write_PropertySet(l,null,null);u.write_shift(16,c,"hex"),u.write_shift(4,68+h.length),d.push(f)}return bconcat(d)}function writezeroes(o,a){a||(a=new_buf(o));for(var n=0;n<o;++n)a.write_shift(1,0);return a}function parsebool(o,a){return o.read_shift(a)===1}function writebool(o,a){return a||(a=new_buf(2)),a.write_shift(2,+!!o),a}function parseuint16(o){return o.read_shift(2,"u")}function writeuint16(o,a){return a||(a=new_buf(2)),a.write_shift(2,o),a}function write_Bes(o,a,n){return n||(n=new_buf(2)),n.write_shift(1,a=="e"?+o:+!!o),n.write_shift(1,a=="e"?1:0),n}function parse_ShortXLUnicodeString(o,a,n){var s=o.read_shift(n&&n.biff>=12?2:1),l="sbcs-cont";if(n&&n.biff>=8,!n||n.biff==8){var c=o.read_shift(1);c&&(l="dbcs-cont")}else n.biff==12&&(l="wstr");n.biff>=2&&n.biff<=5&&(l="cpstr");var u=s?o.read_shift(s,l):"";return u}function write_XLUnicodeRichExtendedString(o){var a=o.t||"",n=new_buf(3);n.write_shift(2,a.length),n.write_shift(1,1);var s=new_buf(2*a.length);s.write_shift(2*a.length,a,"utf16le");var l=[n,s];return bconcat(l)}function parse_XLUnicodeStringNoCch(o,a,n){var s;if(n){if(n.biff>=2&&n.biff<=5)return o.read_shift(a,"cpstr");if(n.biff>=12)return o.read_shift(a,"dbcs-cont")}var l=o.read_shift(1);return l===0?s=o.read_shift(a,"sbcs-cont"):s=o.read_shift(a,"dbcs-cont"),s}function parse_XLUnicodeString(o,a,n){var s=o.read_shift(n&&n.biff==2?1:2);return s===0?(o.l++,""):parse_XLUnicodeStringNoCch(o,s,n)}function parse_XLUnicodeString2(o,a,n){if(n.biff>5)return parse_XLUnicodeString(o,a,n);var s=o.read_shift(1);return s===0?(o.l++,""):o.read_shift(s,n.biff<=4||!o.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(o,a,n){return n||(n=new_buf(3+2*o.length)),n.write_shift(2,o.length),n.write_shift(1,1),n.write_shift(31,o,"utf16le"),n}function write_HyperlinkString(o,a){a||(a=new_buf(6+o.length*2)),a.write_shift(4,1+o.length);for(var n=0;n<o.length;++n)a.write_shift(2,o.charCodeAt(n));return a.write_shift(2,0),a}function write_Hyperlink(o){var a=new_buf(512),n=0,s=o.Target;s.slice(0,7)=="file://"&&(s=s.slice(7));var l=s.indexOf("#"),c=l>-1?31:23;switch(s.charAt(0)){case"#":c=28;break;case".":c&=-3;break}a.write_shift(4,2),a.write_shift(4,c);var u=[8,6815827,6619237,4849780,83];for(n=0;n<u.length;++n)a.write_shift(4,u[n]);if(c==28)s=s.slice(1),write_HyperlinkString(s,a);else if(c&2){for(u="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<u.length;++n)a.write_shift(1,parseInt(u[n],16));var d=l>-1?s.slice(0,l):s;for(a.write_shift(4,2*(d.length+1)),n=0;n<d.length;++n)a.write_shift(2,d.charCodeAt(n));a.write_shift(2,0),c&8&&write_HyperlinkString(l>-1?s.slice(l+1):"",a)}else{for(u="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<u.length;++n)a.write_shift(1,parseInt(u[n],16));for(var h=0;s.slice(h*3,h*3+3)=="../"||s.slice(h*3,h*3+3)=="..\\";)++h;for(a.write_shift(2,h),a.write_shift(4,s.length-3*h+1),n=0;n<s.length-3*h;++n)a.write_shift(1,s.charCodeAt(n+3*h)&255);for(a.write_shift(1,0),a.write_shift(2,65535),a.write_shift(2,57005),n=0;n<6;++n)a.write_shift(4,0)}return a.slice(0,a.l)}function write_XLSCell(o,a,n,s){return s||(s=new_buf(6)),s.write_shift(2,o),s.write_shift(2,a),s.write_shift(2,n||0),s}function parse_XTI(o,a,n){var s=n.biff>8?4:2,l=o.read_shift(s),c=o.read_shift(s,"i"),u=o.read_shift(s,"i");return[l,c,u]}function parse_Ref8U(o){var a=o.read_shift(2),n=o.read_shift(2),s=o.read_shift(2),l=o.read_shift(2);return{s:{c:s,r:a},e:{c:l,r:n}}}function write_Ref8U(o,a){return a||(a=new_buf(8)),a.write_shift(2,o.s.r),a.write_shift(2,o.e.r),a.write_shift(2,o.s.c),a.write_shift(2,o.e.c),a}function write_BOF(o,a,n){var s=1536,l=16;switch(n.bookType){case"biff8":break;case"biff5":s=1280,l=8;break;case"biff4":s=4,l=6;break;case"biff3":s=3,l=6;break;case"biff2":s=2,l=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=new_buf(l);return c.write_shift(2,s),c.write_shift(2,a),l>4&&c.write_shift(2,29282),l>6&&c.write_shift(2,1997),l>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function write_WriteAccess(o,a){var n=!a||a.biff==8,s=new_buf(n?112:54);for(s.write_shift(a.biff==8?2:1,7),n&&s.write_shift(1,0),s.write_shift(4,859007059),s.write_shift(4,5458548|(n?0:536870912));s.l<s.length;)s.write_shift(1,n?0:32);return s}function write_BoundSheet8(o,a){var n=!a||a.biff>=8?2:1,s=new_buf(8+n*o.name.length);s.write_shift(4,o.pos),s.write_shift(1,o.hs||0),s.write_shift(1,o.dt),s.write_shift(1,o.name.length),a.biff>=8&&s.write_shift(1,1),s.write_shift(n*o.name.length,o.name,a.biff<8?"sbcs":"utf16le");var l=s.slice(0,s.l);return l.l=s.l,l}function write_SST(o,a){var n=new_buf(8);n.write_shift(4,o.Count),n.write_shift(4,o.Unique);for(var s=[],l=0;l<o.length;++l)s[l]=write_XLUnicodeRichExtendedString(o[l]);var c=bconcat([n].concat(s));return c.parts=[n.length].concat(s.map(function(u){return u.length})),c}function write_Window1(){var o=new_buf(18);return o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,29280),o.write_shift(2,17600),o.write_shift(2,56),o.write_shift(2,0),o.write_shift(2,0),o.write_shift(2,1),o.write_shift(2,500),o}function write_Window2(o){var a=new_buf(18),n=1718;return o&&o.RTL&&(n|=64),a.write_shift(2,n),a.write_shift(4,0),a.write_shift(4,64),a.write_shift(4,0),a.write_shift(4,0),a}function write_Font(o,a){var n=o.name||"Arial",s=a&&a.biff==5,l=s?15+n.length:16+2*n.length,c=new_buf(l);return c.write_shift(2,o.sz*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,n.length),s||c.write_shift(1,1),c.write_shift((s?1:2)*n.length,n,s?"sbcs":"utf16le"),c}function write_LabelSst(o,a,n,s){var l=new_buf(10);return write_XLSCell(o,a,s,l),l.write_shift(4,n),l}function write_Label(o,a,n,s,l){var c=!l||l.biff==8,u=new_buf(8+ +c+(1+c)*n.length);return write_XLSCell(o,a,s,u),u.write_shift(2,n.length),c&&u.write_shift(1,1),u.write_shift((1+c)*n.length,n,c?"utf16le":"sbcs"),u}function write_Format(o,a,n,s){var l=n&&n.biff==5;s||(s=new_buf(l?3+a.length:5+2*a.length)),s.write_shift(2,o),s.write_shift(l?1:2,a.length),l||s.write_shift(1,1),s.write_shift((l?1:2)*a.length,a,l?"sbcs":"utf16le");var c=s.length>s.l?s.slice(0,s.l):s;return c.l==null&&(c.l=c.length),c}function write_Dimensions(o,a){var n=a.biff==8||!a.biff?4:2,s=new_buf(2*n+6);return s.write_shift(n,o.s.r),s.write_shift(n,o.e.r+1),s.write_shift(2,o.s.c),s.write_shift(2,o.e.c+1),s.write_shift(2,0),s}function write_XF(o,a,n,s){var l=n&&n.biff==5;s||(s=new_buf(l?16:20)),s.write_shift(2,0),o.style?(s.write_shift(2,o.numFmtId||0),s.write_shift(2,65524)):(s.write_shift(2,o.numFmtId||0),s.write_shift(2,a<<4));var c=0;return o.numFmtId>0&&l&&(c|=1024),s.write_shift(4,c),s.write_shift(4,0),l||s.write_shift(4,0),s.write_shift(2,0),s}function write_Guts(o){var a=new_buf(8);return a.write_shift(4,0),a.write_shift(2,0),a.write_shift(2,0),a}function write_BoolErr(o,a,n,s,l,c){var u=new_buf(8);return write_XLSCell(o,a,s,u),write_Bes(n,c,u),u}function write_Number(o,a,n,s){var l=new_buf(14);return write_XLSCell(o,a,s,l),write_Xnum(n,l),l}function parse_ExternSheet(o,a,n){if(n.biff<8)return parse_BIFF5ExternSheet(o,a,n);for(var s=[],l=o.l+a,c=o.read_shift(n.biff>8?4:2);c--!==0;)s.push(parse_XTI(o,n.biff>8?12:6,n));if(o.l!=l)throw new Error("Bad ExternSheet: "+o.l+" != "+l);return s}function parse_BIFF5ExternSheet(o,a,n){o[o.l+1]==3&&o[o.l]++;var s=parse_ShortXLUnicodeString(o,a,n);return s.charCodeAt(0)==3?s.slice(1):s}function write_MergeCells(o){var a=new_buf(2+o.length*8);a.write_shift(2,o.length);for(var n=0;n<o.length;++n)write_Ref8U(o[n],a);return a}function write_HLink(o){var a=new_buf(24),n=decode_cell(o[0]);a.write_shift(2,n.r),a.write_shift(2,n.r),a.write_shift(2,n.c),a.write_shift(2,n.c);for(var s="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),l=0;l<16;++l)a.write_shift(1,parseInt(s[l],16));return bconcat([a,write_Hyperlink(o[1])])}function write_HLinkTooltip(o){var a=o[1].Tooltip,n=new_buf(10+2*(a.length+1));n.write_shift(2,2048);var s=decode_cell(o[0]);n.write_shift(2,s.r),n.write_shift(2,s.r),n.write_shift(2,s.c),n.write_shift(2,s.c);for(var l=0;l<a.length;++l)n.write_shift(2,a.charCodeAt(l));return n.write_shift(2,0),n}function write_Country(o){return o||(o=new_buf(4)),o.write_shift(2,1),o.write_shift(2,1),o}function parse_ColInfo(o,a,n){if(!n.cellStyles)return parsenoop(o,a);var s=n&&n.biff>=12?4:2,l=o.read_shift(s),c=o.read_shift(s),u=o.read_shift(s),d=o.read_shift(s),h=o.read_shift(2);s==2&&(o.l+=2);var f={s:l,e:c,w:u,ixfe:d,flags:h};return(n.biff>=5||!n.biff)&&(f.level=h>>8&7),f}function write_ColInfo(o,a){var n=new_buf(12);n.write_shift(2,a),n.write_shift(2,a),n.write_shift(2,o.width*256),n.write_shift(2,0);var s=0;return o.hidden&&(s|=1),n.write_shift(1,s),s=o.level||0,n.write_shift(1,s),n.write_shift(2,0),n}function write_RRTabId(o){for(var a=new_buf(2*o),n=0;n<o;++n)a.write_shift(2,n+1);return a}function write_BIFF2NUM(o,a,n){var s=new_buf(15);return write_BIFF2Cell(s,o,a),s.write_shift(8,n,"f"),s}function write_BIFF2INT(o,a,n){var s=new_buf(9);return write_BIFF2Cell(s,o,a),s.write_shift(2,n),s}var DBF=function(){var o={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},a=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(d,h){var f=[],p=new_raw_buf(1);switch(h.type){case"base64":p=s2a(Base64_decode(d));break;case"binary":p=s2a(d);break;case"buffer":case"array":p=d;break}prep_blob(p,0);var g=p.read_shift(1),v=!!(g&136),b=!1,w=!1;switch(g){case 2:break;case 3:break;case 48:b=!0,v=!0;break;case 49:b=!0,v=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+g.toString(16))}var x=0,S=521;g==2&&(x=p.read_shift(2)),p.l+=3,g!=2&&(x=p.read_shift(4)),x>1048576&&(x=1e6),g!=2&&(S=p.read_shift(2));var E=p.read_shift(2),T=h.codepage||1252;g!=2&&(p.l+=16,p.read_shift(1),p[p.l]!==0&&(T=o[p[p.l]]),p.l+=1,p.l+=2),w&&(p.l+=36);for(var C=[],A={},R=Math.min(p.length,g==2?521:S-10-(b?264:0)),j=w?32:11;p.l<R&&p[p.l]!=13;)switch(A={},A.name=$cptable.utils.decode(T,p.slice(p.l,p.l+j)).replace(/[\u0000\r\n].*$/g,""),p.l+=j,A.type=String.fromCharCode(p.read_shift(1)),g!=2&&!w&&(A.offset=p.read_shift(4)),A.len=p.read_shift(1),g==2&&(A.offset=p.read_shift(2)),A.dec=p.read_shift(1),A.name.length&&C.push(A),g!=2&&(p.l+=w?13:14),A.type){case"B":(!b||A.len!=8)&&h.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"G":case"P":h.WTF&&console.log("Skipping "+A.name+":"+A.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+A.type)}if(p[p.l]!==13&&(p.l=S-1),p.read_shift(1)!==13)throw new Error("DBF Terminator not found "+p.l+" "+p[p.l]);p.l=S;var D=0,O=0;for(f[0]=[],O=0;O!=C.length;++O)f[0][O]=C[O].name;for(;x-- >0;){if(p[p.l]===42){p.l+=E;continue}for(++p.l,f[++D]=[],O=0,O=0;O!=C.length;++O){var H=p.slice(p.l,p.l+C[O].len);p.l+=C[O].len,prep_blob(H,0);var q=$cptable.utils.decode(T,H);switch(C[O].type){case"C":q.trim().length&&(f[D][O]=q.replace(/\s+$/,""));break;case"D":q.length===8?f[D][O]=new Date(+q.slice(0,4),+q.slice(4,6)-1,+q.slice(6,8)):f[D][O]=q;break;case"F":f[D][O]=parseFloat(q.trim());break;case"+":case"I":f[D][O]=w?H.read_shift(-4,"i")^2147483648:H.read_shift(4,"i");break;case"L":switch(q.trim().toUpperCase()){case"Y":case"T":f[D][O]=!0;break;case"N":case"F":f[D][O]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+q+"|")}break;case"M":if(!v)throw new Error("DBF Unexpected MEMO for type "+g.toString(16));f[D][O]="##MEMO##"+(w?parseInt(q.trim(),10):H.read_shift(4));break;case"N":q=q.replace(/\u0000/g,"").trim(),q&&q!="."&&(f[D][O]=+q||0);break;case"@":f[D][O]=new Date(H.read_shift(-8,"f")-621356832e5);break;case"T":f[D][O]=new Date((H.read_shift(4)-2440588)*864e5+H.read_shift(4));break;case"Y":f[D][O]=H.read_shift(4,"i")/1e4+H.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[D][O]=-H.read_shift(-8,"f");break;case"B":if(b&&C[O].len==8){f[D][O]=H.read_shift(8,"f");break}case"G":case"P":H.l+=C[O].len;break;case"0":if(C[O].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+C[O].type)}}}if(g!=2&&p.l<p.length&&p[p.l++]!=26)throw new Error("DBF EOF Marker missing "+(p.l-1)+" of "+p.length+" "+p[p.l-1].toString(16));return h&&h.sheetRows&&(f=f.slice(0,h.sheetRows)),h.DBF=C,f}function s(d,h){var f=h||{};f.dateNF||(f.dateNF="yyyymmdd");var p=aoa_to_sheet(n(d,f),f);return p["!cols"]=f.DBF.map(function(g){return{wch:g.len,DBF:g}}),delete f.DBF,p}function l(d,h){try{return sheet_to_workbook(s(d,h),h)}catch(f){if(h&&h.WTF)throw f}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function u(d,h){var f=h||{};if(+f.codepage>=0&&set_cp(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var p=buf_array(),g=sheet_to_json(d,{header:1,raw:!0,cellDates:!0}),v=g[0],b=g.slice(1),w=d["!cols"]||[],x=0,S=0,E=0,T=1;for(x=0;x<v.length;++x){if(((w[x]||{}).DBF||{}).name){v[x]=w[x].DBF.name,++E;continue}if(v[x]!=null){if(++E,typeof v[x]=="number"&&(v[x]=v[x].toString(10)),typeof v[x]!="string")throw new Error("DBF Invalid column name "+v[x]+" |"+typeof v[x]+"|");if(v.indexOf(v[x])!==x){for(S=0;S<1024;++S)if(v.indexOf(v[x]+"_"+S)==-1){v[x]+="_"+S;break}}}}var C=safe_decode_range(d["!ref"]),A=[],R=[],j=[];for(x=0;x<=C.e.c-C.s.c;++x){var D="",O="",H=0,q=[];for(S=0;S<b.length;++S)b[S][x]!=null&&q.push(b[S][x]);if(q.length==0||v[x]==null){A[x]="?";continue}for(S=0;S<q.length;++S){switch(typeof q[S]){case"number":O="B";break;case"string":O="C";break;case"boolean":O="L";break;case"object":O=q[S]instanceof Date?"D":"C";break;default:O="C"}H=Math.max(H,String(q[S]).length),D=D&&D!=O?"C":O}H>250&&(H=250),O=((w[x]||{}).DBF||{}).type,O=="C"&&w[x].DBF.len>H&&(H=w[x].DBF.len),D=="B"&&O=="N"&&(D="N",j[x]=w[x].DBF.dec,H=w[x].DBF.len),R[x]=D=="C"||O=="N"?H:c[D]||0,T+=R[x],A[x]=D}var Y=p.next(32);for(Y.write_shift(4,318902576),Y.write_shift(4,b.length),Y.write_shift(2,296+32*E),Y.write_shift(2,T),x=0;x<4;++x)Y.write_shift(4,0);for(Y.write_shift(4,0|(+a[current_ansi]||3)<<8),x=0,S=0;x<v.length;++x)if(v[x]!=null){var te=p.next(32),ee=(v[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);te.write_shift(1,ee,"sbcs"),te.write_shift(1,A[x]=="?"?"C":A[x],"sbcs"),te.write_shift(4,S),te.write_shift(1,R[x]||c[A[x]]||0),te.write_shift(1,j[x]||0),te.write_shift(1,2),te.write_shift(4,0),te.write_shift(1,0),te.write_shift(4,0),te.write_shift(4,0),S+=R[x]||c[A[x]]||0}var re=p.next(264);for(re.write_shift(4,13),x=0;x<65;++x)re.write_shift(4,0);for(x=0;x<b.length;++x){var ne=p.next(T);for(ne.write_shift(1,0),S=0;S<v.length;++S)if(v[S]!=null)switch(A[S]){case"L":ne.write_shift(1,b[x][S]==null?63:b[x][S]?84:70);break;case"B":ne.write_shift(8,b[x][S]||0,"f");break;case"N":var ce="0";for(typeof b[x][S]=="number"&&(ce=b[x][S].toFixed(j[S]||0)),E=0;E<R[S]-ce.length;++E)ne.write_shift(1,32);ne.write_shift(1,ce,"sbcs");break;case"D":b[x][S]?(ne.write_shift(4,("0000"+b[x][S].getFullYear()).slice(-4),"sbcs"),ne.write_shift(2,("00"+(b[x][S].getMonth()+1)).slice(-2),"sbcs"),ne.write_shift(2,("00"+b[x][S].getDate()).slice(-2),"sbcs")):ne.write_shift(8,"00000000","sbcs");break;case"C":var ve=String(b[x][S]!=null?b[x][S]:"").slice(0,R[S]);for(ne.write_shift(1,ve,"sbcs"),E=0;E<R[S]-ve.length;++E)ne.write_shift(1,32);break}}return p.next(1).write_shift(1,26),p.end()}return{to_workbook:l,to_sheet:s,from_sheet:u}}(),SYLK=function(){var o={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},a=new RegExp("\x1BN("+keys(o).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(v,b){var w=o[b];return typeof w=="number"?_getansi(w):w},s=function(v,b,w){var x=b.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return x==59?v:_getansi(x)};o["|"]=254;function l(v,b){switch(b.type){case"base64":return c(Base64_decode(v),b);case"binary":return c(v,b);case"buffer":return c(has_buf&&Buffer.isBuffer(v)?v.toString("binary"):a2s(v),b);case"array":return c(cc2str(v),b)}throw new Error("Unrecognized type "+b.type)}function c(v,b){var w=v.split(/[\n\r]+/),x=-1,S=-1,E=0,T=0,C=[],A=[],R=null,j={},D=[],O=[],H=[],q=0,Y;for(+b.codepage>=0&&set_cp(+b.codepage);E!==w.length;++E){q=0;var te=w[E].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,s).replace(a,n),ee=te.replace(/;;/g,"\0").split(";").map(function(le){return le.replace(/\u0000/g,";")}),re=ee[0],ne;if(te.length>0)switch(re){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ee[1].charAt(0)=="P"&&A.push(te.slice(3).replace(/;;/g,";"));break;case"C":var ce=!1,ve=!1,be=!1,me=!1,ae=-1,pe=-1;for(T=1;T<ee.length;++T)switch(ee[T].charAt(0)){case"A":break;case"X":S=parseInt(ee[T].slice(1))-1,ve=!0;break;case"Y":for(x=parseInt(ee[T].slice(1))-1,ve||(S=0),Y=C.length;Y<=x;++Y)C[Y]=[];break;case"K":ne=ee[T].slice(1),ne.charAt(0)==='"'?ne=ne.slice(1,ne.length-1):ne==="TRUE"?ne=!0:ne==="FALSE"?ne=!1:isNaN(fuzzynum(ne))?isNaN(fuzzydate(ne).getDate())||(ne=parseDate(ne)):(ne=fuzzynum(ne),R!==null&&fmt_is_date(R)&&(ne=numdate(ne))),ce=!0;break;case"E":me=!0;var ie=rc_to_a1(ee[T].slice(1),{r:x,c:S});C[x][S]=[C[x][S],ie];break;case"S":be=!0,C[x][S]=[C[x][S],"S5S"];break;case"G":break;case"R":ae=parseInt(ee[T].slice(1))-1;break;case"C":pe=parseInt(ee[T].slice(1))-1;break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+te)}if(ce&&(C[x][S]&&C[x][S].length==2?C[x][S][0]=ne:C[x][S]=ne,R=null),be){if(me)throw new Error("SYLK shared formula cannot have own formula");var se=ae>-1&&C[ae][pe];if(!se||!se[1])throw new Error("SYLK shared formula cannot find base");C[x][S][1]=shift_formula_str(se[1],{r:x-ae,c:S-pe})}break;case"F":var de=0;for(T=1;T<ee.length;++T)switch(ee[T].charAt(0)){case"X":S=parseInt(ee[T].slice(1))-1,++de;break;case"Y":for(x=parseInt(ee[T].slice(1))-1,Y=C.length;Y<=x;++Y)C[Y]=[];break;case"M":q=parseInt(ee[T].slice(1))/20;break;case"F":break;case"G":break;case"P":R=A[parseInt(ee[T].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(H=ee[T].slice(1).split(" "),Y=parseInt(H[0],10);Y<=parseInt(H[1],10);++Y)q=parseInt(H[2],10),O[Y-1]=q===0?{hidden:!0}:{wch:q},process_col(O[Y-1]);break;case"C":S=parseInt(ee[T].slice(1))-1,O[S]||(O[S]={});break;case"R":x=parseInt(ee[T].slice(1))-1,D[x]||(D[x]={}),q>0?(D[x].hpt=q,D[x].hpx=pt2px(q)):q===0&&(D[x].hidden=!0);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+te)}de<1&&(R=null);break;default:if(b&&b.WTF)throw new Error("SYLK bad record "+te)}}return D.length>0&&(j["!rows"]=D),O.length>0&&(j["!cols"]=O),b&&b.sheetRows&&(C=C.slice(0,b.sheetRows)),[C,j]}function u(v,b){var w=l(v,b),x=w[0],S=w[1],E=aoa_to_sheet(x,b);return keys(S).forEach(function(T){E[T]=S[T]}),E}function d(v,b){return sheet_to_workbook(u(v,b),b)}function h(v,b,w,x){var S="C;Y"+(w+1)+";X"+(x+1)+";K";switch(v.t){case"n":S+=v.v||0,v.f&&!v.F&&(S+=";E"+a1_to_rc(v.f,{r:w,c:x}));break;case"b":S+=v.v?"TRUE":"FALSE";break;case"e":S+=v.w||v.v;break;case"d":S+='"'+(v.w||v.v)+'"';break;case"s":S+='"'+v.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function f(v,b){b.forEach(function(w,x){var S="F;W"+(x+1)+" "+(x+1)+" ";w.hidden?S+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=width2px(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=px2char(w.wpx)),typeof w.wch=="number"&&(S+=Math.round(w.wch))),S.charAt(S.length-1)!=" "&&v.push(S)})}function p(v,b){b.forEach(function(w,x){var S="F;";w.hidden?S+="M0;":w.hpt?S+="M"+20*w.hpt+";":w.hpx&&(S+="M"+20*px2pt(w.hpx)+";"),S.length>2&&v.push(S+"R"+(x+1))})}function g(v,b){var w=["ID;PWXL;N;E"],x=[],S=safe_decode_range(v["!ref"]),E,T=Array.isArray(v),C=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),v["!cols"]&&f(w,v["!cols"]),v["!rows"]&&p(w,v["!rows"]),w.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var A=S.s.r;A<=S.e.r;++A)for(var R=S.s.c;R<=S.e.c;++R){var j=encode_cell({r:A,c:R});E=T?(v[A]||[])[R]:v[j],!(!E||E.v==null&&(!E.f||E.F))&&x.push(h(E,v,A,R))}return w.join(C)+C+x.join(C)+C+"E"+C}return{to_workbook:d,to_sheet:u,from_sheet:g}}(),DIF=function(){function o(c,u){switch(u.type){case"base64":return a(Base64_decode(c),u);case"binary":return a(c,u);case"buffer":return a(has_buf&&Buffer.isBuffer(c)?c.toString("binary"):a2s(c),u);case"array":return a(cc2str(c),u)}throw new Error("Unrecognized type "+u.type)}function a(c,u){for(var d=c.split(`
`),h=-1,f=-1,p=0,g=[];p!==d.length;++p){if(d[p].trim()==="BOT"){g[++h]=[],f=0;continue}if(!(h<0)){var v=d[p].trim().split(","),b=v[0],w=v[1];++p;for(var x=d[p]||"";(x.match(/["]/g)||[]).length&1&&p<d.length-1;)x+=`
`+d[++p];switch(x=x.trim(),+b){case-1:if(x==="BOT"){g[++h]=[],f=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?g[h][f]=!0:x==="FALSE"?g[h][f]=!1:isNaN(fuzzynum(w))?isNaN(fuzzydate(w).getDate())?g[h][f]=w:g[h][f]=parseDate(w):g[h][f]=fuzzynum(w),++f;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),g[h][f++]=x!==""?x:null;break}if(x==="EOD")break}}return u&&u.sheetRows&&(g=g.slice(0,u.sheetRows)),g}function n(c,u){return aoa_to_sheet(o(c,u),u)}function s(c,u){return sheet_to_workbook(n(c,u),u)}var l=function(){var c=function(h,f,p,g,v){h.push(f),h.push(p+","+g),h.push('"'+v.replace(/"/g,'""')+'"')},u=function(h,f,p,g){h.push(f+","+p),h.push(f==1?'"'+g.replace(/"/g,'""')+'"':g)};return function(h){var f=[],p=safe_decode_range(h["!ref"]),g,v=Array.isArray(h);c(f,"TABLE",0,1,"sheetjs"),c(f,"VECTORS",0,p.e.r-p.s.r+1,""),c(f,"TUPLES",0,p.e.c-p.s.c+1,""),c(f,"DATA",0,0,"");for(var b=p.s.r;b<=p.e.r;++b){u(f,-1,0,"BOT");for(var w=p.s.c;w<=p.e.c;++w){var x=encode_cell({r:b,c:w});if(g=v?(h[b]||[])[w]:h[x],!g){u(f,1,0,"");continue}switch(g.t){case"n":var S=g.w;!S&&g.v!=null&&(S=g.v),S==null?g.f&&!g.F?u(f,1,0,"="+g.f):u(f,1,0,""):u(f,0,S,"V");break;case"b":u(f,0,g.v?1:0,g.v?"TRUE":"FALSE");break;case"s":u(f,1,0,isNaN(g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=SSF_format(g.z||table_fmt[14],datenum(parseDate(g.v)))),u(f,0,g.w,"V");break;default:u(f,1,0,"")}}}u(f,-1,0,"EOD");var E=`\r
`,T=f.join(E);return T}}();return{to_workbook:s,to_sheet:n,from_sheet:l}}(),ETH=function(){function o(g){return g.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function a(g){return g.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(g,v){for(var b=g.split(`
`),w=-1,x=-1,S=0,E=[];S!==b.length;++S){var T=b[S].trim().split(":");if(T[0]==="cell"){var C=decode_cell(T[1]);if(E.length<=C.r)for(w=E.length;w<=C.r;++w)E[w]||(E[w]=[]);switch(w=C.r,x=C.c,T[2]){case"t":E[w][x]=o(T[3]);break;case"v":E[w][x]=+T[3];break;case"vtf":var A=T[T.length-1];case"vtc":switch(T[3]){case"nl":E[w][x]=!!+T[4];break;default:E[w][x]=+T[4];break}T[2]=="vtf"&&(E[w][x]=[E[w][x],A])}}}return v&&v.sheetRows&&(E=E.slice(0,v.sheetRows)),E}function s(g,v){return aoa_to_sheet(n(g,v),v)}function l(g,v){return sheet_to_workbook(s(g,v),v)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),h="--SocialCalcSpreadsheetControlSave--";function f(g){if(!g||!g["!ref"])return"";for(var v=[],b=[],w,x="",S=decode_range(g["!ref"]),E=Array.isArray(g),T=S.s.r;T<=S.e.r;++T)for(var C=S.s.c;C<=S.e.c;++C)if(x=encode_cell({r:T,c:C}),w=E?(g[T]||[])[C]:g[x],!(!w||w.v==null||w.t==="z")){switch(b=["cell",x,"t"],w.t){case"s":case"str":b.push(a(w.v));break;case"n":w.f?(b[2]="vtf",b[3]="n",b[4]=w.v,b[5]=a(w.f)):(b[2]="v",b[3]=w.v);break;case"b":b[2]="vt"+(w.f?"f":"c"),b[3]="nl",b[4]=w.v?"1":"0",b[5]=a(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var A=datenum(parseDate(w.v));b[2]="vtc",b[3]="nd",b[4]=""+A,b[5]=w.w||SSF_format(w.z||table_fmt[14],A);break;case"e":continue}v.push(b.join(":"))}return v.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),v.push("valueformat:1:text-wiki"),v.join(`
`)}function p(g){return[c,u,d,u,f(g),h].join(`
`)}return{to_workbook:l,to_sheet:s,from_sheet:p}}(),PRN=function(){function o(p,g,v,b,w){w.raw?g[v][b]=p:p===""||(p==="TRUE"?g[v][b]=!0:p==="FALSE"?g[v][b]=!1:isNaN(fuzzynum(p))?isNaN(fuzzydate(p).getDate())?g[v][b]=p:g[v][b]=parseDate(p):g[v][b]=fuzzynum(p))}function a(p,g){var v=g||{},b=[];if(!p||p.length===0)return b;for(var w=p.split(/[\r\n]/),x=w.length-1;x>=0&&w[x].length===0;)--x;for(var S=10,E=0,T=0;T<=x;++T)E=w[T].indexOf(" "),E==-1?E=w[T].length:E++,S=Math.max(S,E);for(T=0;T<=x;++T){b[T]=[];var C=0;for(o(w[T].slice(0,S).trim(),b,T,C,v),C=1;C<=(w[T].length-S)/10+1;++C)o(w[T].slice(S+(C-1)*10,S+C*10).trim(),b,T,C,v)}return v.sheetRows&&(b=b.slice(0,v.sheetRows)),b}var n={44:",",9:"	",59:";",124:"|"},s={44:3,9:2,59:1,124:0};function l(p){for(var g={},v=!1,b=0,w=0;b<p.length;++b)(w=p.charCodeAt(b))==34?v=!v:!v&&w in n&&(g[w]=(g[w]||0)+1);w=[];for(b in g)Object.prototype.hasOwnProperty.call(g,b)&&w.push([g[b],b]);if(!w.length){g=s;for(b in g)Object.prototype.hasOwnProperty.call(g,b)&&w.push([g[b],b])}return w.sort(function(x,S){return x[0]-S[0]||s[x[1]]-s[S[1]]}),n[w.pop()[1]]||44}function c(p,g){var v=g||{},b="",w=v.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};p.slice(0,4)=="sep="?p.charCodeAt(5)==13&&p.charCodeAt(6)==10?(b=p.charAt(4),p=p.slice(7)):p.charCodeAt(5)==13||p.charCodeAt(5)==10?(b=p.charAt(4),p=p.slice(6)):b=l(p.slice(0,1024)):v&&v.FS?b=v.FS:b=l(p.slice(0,1024));var S=0,E=0,T=0,C=0,A=0,R=b.charCodeAt(0),j=!1,D=0,O=p.charCodeAt(0);p=p.replace(/\r\n/mg,`
`);var H=v.dateNF!=null?dateNF_regex(v.dateNF):null;function q(){var Y=p.slice(C,A),te={};if(Y.charAt(0)=='"'&&Y.charAt(Y.length-1)=='"'&&(Y=Y.slice(1,-1).replace(/""/g,'"')),Y.length===0)te.t="z";else if(v.raw)te.t="s",te.v=Y;else if(Y.trim().length===0)te.t="s",te.v=Y;else if(Y.charCodeAt(0)==61)Y.charCodeAt(1)==34&&Y.charCodeAt(Y.length-1)==34?(te.t="s",te.v=Y.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(Y)?(te.t="n",te.f=Y.slice(1)):(te.t="s",te.v=Y);else if(Y=="TRUE")te.t="b",te.v=!0;else if(Y=="FALSE")te.t="b",te.v=!1;else if(!isNaN(T=fuzzynum(Y)))te.t="n",v.cellText!==!1&&(te.w=Y),te.v=T;else if(!isNaN(fuzzydate(Y).getDate())||H&&Y.match(H)){te.z=v.dateNF||table_fmt[14];var ee=0;H&&Y.match(H)&&(Y=dateNF_fix(Y,v.dateNF,Y.match(H)||[]),ee=1),v.cellDates?(te.t="d",te.v=parseDate(Y,ee)):(te.t="n",te.v=datenum(parseDate(Y,ee))),v.cellText!==!1&&(te.w=SSF_format(te.z,te.v instanceof Date?datenum(te.v):te.v)),v.cellNF||delete te.z}else te.t="s",te.v=Y;if(te.t=="z"||(v.dense?(w[S]||(w[S]=[]),w[S][E]=te):w[encode_cell({c:E,r:S})]=te),C=A+1,O=p.charCodeAt(C),x.e.c<E&&(x.e.c=E),x.e.r<S&&(x.e.r=S),D==R)++E;else if(E=0,++S,v.sheetRows&&v.sheetRows<=S)return!0}e:for(;A<p.length;++A)switch(D=p.charCodeAt(A)){case 34:O===34&&(j=!j);break;case R:case 10:case 13:if(!j&&q())break e;break}return A-C>0&&q(),w["!ref"]=encode_range(x),w}function u(p,g){return!(g&&g.PRN)||g.FS||p.slice(0,4)=="sep="||p.indexOf("	")>=0||p.indexOf(",")>=0||p.indexOf(";")>=0?c(p,g):aoa_to_sheet(a(p,g),g)}function d(p,g){var v="",b=g.type=="string"?[0,0,0,0]:firstbyte(p,g);switch(g.type){case"base64":v=Base64_decode(p);break;case"binary":v=p;break;case"buffer":g.codepage==65001?v=p.toString("utf8"):g.codepage&&typeof $cptable<"u"||(v=has_buf&&Buffer.isBuffer(p)?p.toString("binary"):a2s(p));break;case"array":v=cc2str(p);break;case"string":v=p;break;default:throw new Error("Unrecognized type "+g.type)}return b[0]==239&&b[1]==187&&b[2]==191?v=utf8read(v.slice(3)):g.type!="string"&&g.type!="buffer"&&g.codepage==65001?v=utf8read(v):g.type=="binary"&&typeof $cptable<"u",v.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(g.type=="string"?v:utf8read(v),g):u(v,g)}function h(p,g){return sheet_to_workbook(d(p,g),g)}function f(p){for(var g=[],v=safe_decode_range(p["!ref"]),b,w=Array.isArray(p),x=v.s.r;x<=v.e.r;++x){for(var S=[],E=v.s.c;E<=v.e.c;++E){var T=encode_cell({r:x,c:E});if(b=w?(p[x]||[])[E]:p[T],!b||b.v==null){S.push("          ");continue}for(var C=(b.w||(format_cell(b),b.w)||"").slice(0,10);C.length<10;)C+=" ";S.push(C+(E===0?" ":""))}g.push(S.join(""))}return g.join(`
`)}return{to_workbook:h,to_sheet:d,from_sheet:f}}(),WK_=function(){function o(ie,se,de){if(ie){prep_blob(ie,ie.l||0);for(var le=de.Enum||ae;ie.l<ie.length;){var ge=ie.read_shift(2),Re=le[ge]||le[65535],we=ie.read_shift(2),Se=ie.l+we,xe=Re.f&&Re.f(ie,we,de);if(ie.l=Se,se(xe,Re,ge))return}}}function a(ie,se){switch(se.type){case"base64":return n(s2a(Base64_decode(ie)),se);case"binary":return n(s2a(ie),se);case"buffer":case"array":return n(ie,se)}throw"Unsupported type "+se.type}function n(ie,se){if(!ie)return ie;var de=se||{},le=de.dense?[]:{},ge="Sheet1",Re="",we=0,Se={},xe=[],ke=[],Ie={s:{r:0,c:0},e:{r:0,c:0}},He=de.sheetRows||0;if(ie[2]==0&&(ie[3]==8||ie[3]==9)&&ie.length>=16&&ie[14]==5&&ie[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ie[2]==2)de.Enum=ae,o(ie,function(oe,he,Me){switch(Me){case 0:de.vers=oe,oe>=4096&&(de.qpro=!0);break;case 6:Ie=oe;break;case 204:oe&&(Re=oe);break;case 222:Re=oe;break;case 15:case 51:de.qpro||(oe[1].v=oe[1].v.slice(1));case 13:case 14:case 16:Me==14&&(oe[2]&112)==112&&(oe[2]&15)>1&&(oe[2]&15)<15&&(oe[1].z=de.dateNF||table_fmt[14],de.cellDates&&(oe[1].t="d",oe[1].v=numdate(oe[1].v))),de.qpro&&oe[3]>we&&(le["!ref"]=encode_range(Ie),Se[ge]=le,xe.push(ge),le=de.dense?[]:{},Ie={s:{r:0,c:0},e:{r:0,c:0}},we=oe[3],ge=Re||"Sheet"+(we+1),Re="");var fe=de.dense?(le[oe[0].r]||[])[oe[0].c]:le[encode_cell(oe[0])];if(fe){fe.t=oe[1].t,fe.v=oe[1].v,oe[1].z!=null&&(fe.z=oe[1].z),oe[1].f!=null&&(fe.f=oe[1].f);break}de.dense?(le[oe[0].r]||(le[oe[0].r]=[]),le[oe[0].r][oe[0].c]=oe[1]):le[encode_cell(oe[0])]=oe[1];break}},de);else if(ie[2]==26||ie[2]==14)de.Enum=pe,ie[2]==14&&(de.qpro=!0,ie.l=0),o(ie,function(oe,he,Me){switch(Me){case 204:ge=oe;break;case 22:oe[1].v=oe[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(oe[3]>we&&(le["!ref"]=encode_range(Ie),Se[ge]=le,xe.push(ge),le=de.dense?[]:{},Ie={s:{r:0,c:0},e:{r:0,c:0}},we=oe[3],ge="Sheet"+(we+1)),He>0&&oe[0].r>=He)break;de.dense?(le[oe[0].r]||(le[oe[0].r]=[]),le[oe[0].r][oe[0].c]=oe[1]):le[encode_cell(oe[0])]=oe[1],Ie.e.c<oe[0].c&&(Ie.e.c=oe[0].c),Ie.e.r<oe[0].r&&(Ie.e.r=oe[0].r);break;case 27:oe[14e3]&&(ke[oe[14e3][0]]=oe[14e3][1]);break;case 1537:ke[oe[0]]=oe[1],oe[0]==we&&(ge=oe[1]);break}},de);else throw new Error("Unrecognized LOTUS BOF "+ie[2]);if(le["!ref"]=encode_range(Ie),Se[Re||ge]=le,xe.push(Re||ge),!ke.length)return{SheetNames:xe,Sheets:Se};for(var Le={},De=[],Ee=0;Ee<ke.length;++Ee)Se[xe[Ee]]?(De.push(ke[Ee]||xe[Ee]),Le[ke[Ee]]=Se[ke[Ee]]||Se[xe[Ee]]):(De.push(ke[Ee]),Le[ke[Ee]]={"!ref":"A1"});return{SheetNames:De,Sheets:Le}}function s(ie,se){var de=se||{};if(+de.codepage>=0&&set_cp(+de.codepage),de.type=="string")throw new Error("Cannot write WK1 to JS string");var le=buf_array(),ge=safe_decode_range(ie["!ref"]),Re=Array.isArray(ie),we=[];write_biff_rec(le,0,c(1030)),write_biff_rec(le,6,h(ge));for(var Se=Math.min(ge.e.r,8191),xe=ge.s.r;xe<=Se;++xe)for(var ke=encode_row(xe),Ie=ge.s.c;Ie<=ge.e.c;++Ie){xe===ge.s.r&&(we[Ie]=encode_col(Ie));var He=we[Ie]+ke,Le=Re?(ie[xe]||[])[Ie]:ie[He];if(!(!Le||Le.t=="z"))if(Le.t=="n")(Le.v|0)==Le.v&&Le.v>=-32768&&Le.v<=32767?write_biff_rec(le,13,b(xe,Ie,Le.v)):write_biff_rec(le,14,x(xe,Ie,Le.v));else{var De=format_cell(Le);write_biff_rec(le,15,g(xe,Ie,De.slice(0,239)))}}return write_biff_rec(le,1),le.end()}function l(ie,se){var de=se||{};if(+de.codepage>=0&&set_cp(+de.codepage),de.type=="string")throw new Error("Cannot write WK3 to JS string");var le=buf_array();write_biff_rec(le,0,u(ie));for(var ge=0,Re=0;ge<ie.SheetNames.length;++ge)(ie.Sheets[ie.SheetNames[ge]]||{})["!ref"]&&write_biff_rec(le,27,me(ie.SheetNames[ge],Re++));var we=0;for(ge=0;ge<ie.SheetNames.length;++ge){var Se=ie.Sheets[ie.SheetNames[ge]];if(!(!Se||!Se["!ref"])){for(var xe=safe_decode_range(Se["!ref"]),ke=Array.isArray(Se),Ie=[],He=Math.min(xe.e.r,8191),Le=xe.s.r;Le<=He;++Le)for(var De=encode_row(Le),Ee=xe.s.c;Ee<=xe.e.c;++Ee){Le===xe.s.r&&(Ie[Ee]=encode_col(Ee));var oe=Ie[Ee]+De,he=ke?(Se[Le]||[])[Ee]:Se[oe];if(!(!he||he.t=="z"))if(he.t=="n")write_biff_rec(le,23,q(Le,Ee,we,he.v));else{var Me=format_cell(he);write_biff_rec(le,22,D(Le,Ee,we,Me.slice(0,239)))}}++we}}return write_biff_rec(le,1),le.end()}function c(ie){var se=new_buf(2);return se.write_shift(2,ie),se}function u(ie){var se=new_buf(26);se.write_shift(2,4096),se.write_shift(2,4),se.write_shift(4,0);for(var de=0,le=0,ge=0,Re=0;Re<ie.SheetNames.length;++Re){var we=ie.SheetNames[Re],Se=ie.Sheets[we];if(!(!Se||!Se["!ref"])){++ge;var xe=decode_range(Se["!ref"]);de<xe.e.r&&(de=xe.e.r),le<xe.e.c&&(le=xe.e.c)}}return de>8191&&(de=8191),se.write_shift(2,de),se.write_shift(1,ge),se.write_shift(1,le),se.write_shift(2,0),se.write_shift(2,0),se.write_shift(1,1),se.write_shift(1,2),se.write_shift(4,0),se.write_shift(4,0),se}function d(ie,se,de){var le={s:{c:0,r:0},e:{c:0,r:0}};return se==8&&de.qpro?(le.s.c=ie.read_shift(1),ie.l++,le.s.r=ie.read_shift(2),le.e.c=ie.read_shift(1),ie.l++,le.e.r=ie.read_shift(2),le):(le.s.c=ie.read_shift(2),le.s.r=ie.read_shift(2),se==12&&de.qpro&&(ie.l+=2),le.e.c=ie.read_shift(2),le.e.r=ie.read_shift(2),se==12&&de.qpro&&(ie.l+=2),le.s.c==65535&&(le.s.c=le.e.c=le.s.r=le.e.r=0),le)}function h(ie){var se=new_buf(8);return se.write_shift(2,ie.s.c),se.write_shift(2,ie.s.r),se.write_shift(2,ie.e.c),se.write_shift(2,ie.e.r),se}function f(ie,se,de){var le=[{c:0,r:0},{t:"n",v:0},0,0];return de.qpro&&de.vers!=20768?(le[0].c=ie.read_shift(1),le[3]=ie.read_shift(1),le[0].r=ie.read_shift(2),ie.l+=2):(le[2]=ie.read_shift(1),le[0].c=ie.read_shift(2),le[0].r=ie.read_shift(2)),le}function p(ie,se,de){var le=ie.l+se,ge=f(ie,se,de);if(ge[1].t="s",de.vers==20768){ie.l++;var Re=ie.read_shift(1);return ge[1].v=ie.read_shift(Re,"utf8"),ge}return de.qpro&&ie.l++,ge[1].v=ie.read_shift(le-ie.l,"cstr"),ge}function g(ie,se,de){var le=new_buf(7+de.length);le.write_shift(1,255),le.write_shift(2,se),le.write_shift(2,ie),le.write_shift(1,39);for(var ge=0;ge<le.length;++ge){var Re=de.charCodeAt(ge);le.write_shift(1,Re>=128?95:Re)}return le.write_shift(1,0),le}function v(ie,se,de){var le=f(ie,se,de);return le[1].v=ie.read_shift(2,"i"),le}function b(ie,se,de){var le=new_buf(7);return le.write_shift(1,255),le.write_shift(2,se),le.write_shift(2,ie),le.write_shift(2,de,"i"),le}function w(ie,se,de){var le=f(ie,se,de);return le[1].v=ie.read_shift(8,"f"),le}function x(ie,se,de){var le=new_buf(13);return le.write_shift(1,255),le.write_shift(2,se),le.write_shift(2,ie),le.write_shift(8,de,"f"),le}function S(ie,se,de){var le=ie.l+se,ge=f(ie,se,de);if(ge[1].v=ie.read_shift(8,"f"),de.qpro)ie.l=le;else{var Re=ie.read_shift(2);A(ie.slice(ie.l,ie.l+Re),ge),ie.l+=Re}return ge}function E(ie,se,de){var le=se&32768;return se&=-32769,se=(le?ie:0)+(se>=8192?se-16384:se),(le?"":"$")+(de?encode_col(se):encode_row(se))}var T={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},C=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function A(ie,se){prep_blob(ie,0);for(var de=[],le=0,ge="",Re="",we="",Se="";ie.l<ie.length;){var xe=ie[ie.l++];switch(xe){case 0:de.push(ie.read_shift(8,"f"));break;case 1:Re=E(se[0].c,ie.read_shift(2),!0),ge=E(se[0].r,ie.read_shift(2),!1),de.push(Re+ge);break;case 2:{var ke=E(se[0].c,ie.read_shift(2),!0),Ie=E(se[0].r,ie.read_shift(2),!1);Re=E(se[0].c,ie.read_shift(2),!0),ge=E(se[0].r,ie.read_shift(2),!1),de.push(ke+Ie+":"+Re+ge)}break;case 3:if(ie.l<ie.length){console.error("WK1 premature formula end");return}break;case 4:de.push("("+de.pop()+")");break;case 5:de.push(ie.read_shift(2));break;case 6:{for(var He="";xe=ie[ie.l++];)He+=String.fromCharCode(xe);de.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:de.push("-"+de.pop());break;case 23:de.push("+"+de.pop());break;case 22:de.push("NOT("+de.pop()+")");break;case 20:case 21:Se=de.pop(),we=de.pop(),de.push(["AND","OR"][xe-20]+"("+we+","+Se+")");break;default:if(xe<32&&C[xe])Se=de.pop(),we=de.pop(),de.push(we+C[xe]+Se);else if(T[xe]){if(le=T[xe][1],le==69&&(le=ie[ie.l++]),le>de.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+de.join("|")+"|");return}var Le=de.slice(-le);de.length-=le,de.push(T[xe][0]+"("+Le.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}de.length==1?se[1].f=""+de[0]:console.error("WK1 bad formula parse |"+de.join("|")+"|")}function R(ie){var se=[{c:0,r:0},{t:"n",v:0},0];return se[0].r=ie.read_shift(2),se[3]=ie[ie.l++],se[0].c=ie[ie.l++],se}function j(ie,se){var de=R(ie);return de[1].t="s",de[1].v=ie.read_shift(se-4,"cstr"),de}function D(ie,se,de,le){var ge=new_buf(6+le.length);ge.write_shift(2,ie),ge.write_shift(1,de),ge.write_shift(1,se),ge.write_shift(1,39);for(var Re=0;Re<le.length;++Re){var we=le.charCodeAt(Re);ge.write_shift(1,we>=128?95:we)}return ge.write_shift(1,0),ge}function O(ie,se){var de=R(ie);de[1].v=ie.read_shift(2);var le=de[1].v>>1;if(de[1].v&1)switch(le&7){case 0:le=(le>>3)*5e3;break;case 1:le=(le>>3)*500;break;case 2:le=(le>>3)/20;break;case 3:le=(le>>3)/200;break;case 4:le=(le>>3)/2e3;break;case 5:le=(le>>3)/2e4;break;case 6:le=(le>>3)/16;break;case 7:le=(le>>3)/64;break}return de[1].v=le,de}function H(ie,se){var de=R(ie),le=ie.read_shift(4),ge=ie.read_shift(4),Re=ie.read_shift(2);if(Re==65535)return le===0&&ge===3221225472?(de[1].t="e",de[1].v=15):le===0&&ge===3489660928?(de[1].t="e",de[1].v=42):de[1].v=0,de;var we=Re&32768;return Re=(Re&32767)-16446,de[1].v=(1-we*2)*(ge*Math.pow(2,Re+32)+le*Math.pow(2,Re)),de}function q(ie,se,de,le){var ge=new_buf(14);if(ge.write_shift(2,ie),ge.write_shift(1,de),ge.write_shift(1,se),le==0)return ge.write_shift(4,0),ge.write_shift(4,0),ge.write_shift(2,65535),ge;var Re=0,we=0,Se=0,xe=0;return le<0&&(Re=1,le=-le),we=Math.log2(le)|0,le/=Math.pow(2,we-31),xe=le>>>0,(xe&2147483648)==0&&(le/=2,++we,xe=le>>>0),le-=xe,xe|=2147483648,xe>>>=0,le*=Math.pow(2,32),Se=le>>>0,ge.write_shift(4,Se),ge.write_shift(4,xe),we+=16383+(Re?32768:0),ge.write_shift(2,we),ge}function Y(ie,se){var de=H(ie);return ie.l+=se-14,de}function te(ie,se){var de=R(ie),le=ie.read_shift(4);return de[1].v=le>>6,de}function ee(ie,se){var de=R(ie),le=ie.read_shift(8,"f");return de[1].v=le,de}function re(ie,se){var de=ee(ie);return ie.l+=se-10,de}function ne(ie,se){return ie[ie.l+se-1]==0?ie.read_shift(se,"cstr"):""}function ce(ie,se){var de=ie[ie.l++];de>se-1&&(de=se-1);for(var le="";le.length<de;)le+=String.fromCharCode(ie[ie.l++]);return le}function ve(ie,se,de){if(!(!de.qpro||se<21)){var le=ie.read_shift(1);ie.l+=17,ie.l+=1,ie.l+=2;var ge=ie.read_shift(se-21,"cstr");return[le,ge]}}function be(ie,se){for(var de={},le=ie.l+se;ie.l<le;){var ge=ie.read_shift(2);if(ge==14e3){for(de[ge]=[0,""],de[ge][0]=ie.read_shift(2);ie[ie.l];)de[ge][1]+=String.fromCharCode(ie[ie.l]),ie.l++;ie.l++}}return de}function me(ie,se){var de=new_buf(5+ie.length);de.write_shift(2,14e3),de.write_shift(2,se);for(var le=0;le<ie.length;++le){var ge=ie.charCodeAt(le);de[de.l++]=ge>127?95:ge}return de[de.l++]=0,de}var ae={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:v},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:p},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:p},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ne},222:{n:"SHEETNAMELP",f:ce},65535:{n:""}},pe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:j},23:{n:"NUMBER17",f:H},24:{n:"NUMBER18",f:O},25:{n:"FORMULA19",f:Y},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:be},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:te},38:{n:"??"},39:{n:"NUMBER27",f:ee},40:{n:"FORMULA28",f:re},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ne},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ve},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:s,book_to_wk3:l,to_workbook:a}}(),straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(o,a){if(!a.bookSST)return"";var n=[XML_HEADER];n[n.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:o.Count,uniqueCount:o.Unique});for(var s=0;s!=o.length;++s)if(o[s]!=null){var l=o[s],c="<si>";l.r?c+=l.r:(c+="<t",l.t||(l.t=""),l.t.match(straywsregex)&&(c+=' xml:space="preserve"'),c+=">"+escapexml(l.t)+"</t>"),c+="</si>",n[n.length]=c}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtBeginSst(o){return[o.read_shift(4),o.read_shift(4)]}function write_BrtBeginSst(o,a){return a||(a=new_buf(8)),a.write_shift(4,o.Count),a.write_shift(4,o.Unique),a}var write_BrtSSTItem=write_RichStr;function write_sst_bin(o){var a=buf_array();write_record(a,159,write_BrtBeginSst(o));for(var n=0;n<o.length;++n)write_record(a,19,write_BrtSSTItem(o[n]));return write_record(a,160),a.end()}function _JS2ANSI(o){for(var a=[],n=o.split(""),s=0;s<n.length;++s)a[s]=n[s].charCodeAt(0);return a}function crypto_CreatePasswordVerifier_Method1(o){var a=0,n,s=_JS2ANSI(o),l=s.length+1,c,u,d,h,f;for(n=new_raw_buf(l),n[0]=s.length,c=1;c!=l;++c)n[c]=s[c-1];for(c=l-1;c>=0;--c)u=n[c],d=(a&16384)===0?0:1,h=a<<1&32767,f=d|h,a=f^u;return a^52811}var RTF=function(){function o(l,c){switch(c.type){case"base64":return a(Base64_decode(l),c);case"binary":return a(l,c);case"buffer":return a(has_buf&&Buffer.isBuffer(l)?l.toString("binary"):a2s(l),c);case"array":return a(cc2str(l),c)}throw new Error("Unrecognized type "+c.type)}function a(l,c){var u=c||{},d=u.dense?[]:{},h=l.match(/\\trowd.*?\\row\b/g);if(!h.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:h.length-1}};return h.forEach(function(p,g){Array.isArray(d)&&(d[g]=[]);for(var v=/\\\w+\b/g,b=0,w,x=-1;w=v.exec(p);){switch(w[0]){case"\\cell":var S=p.slice(b,v.lastIndex-w[0].length);if(S[0]==" "&&(S=S.slice(1)),++x,S.length){var E={v:S,t:"s"};Array.isArray(d)?d[g][x]=E:d[encode_cell({r:g,c:x})]=E}break}b=v.lastIndex}x>f.e.c&&(f.e.c=x)}),d["!ref"]=encode_range(f),d}function n(l,c){return sheet_to_workbook(o(l,c),c)}function s(l){for(var c=["{\\rtf1\\ansi"],u=safe_decode_range(l["!ref"]),d,h=Array.isArray(l),f=u.s.r;f<=u.e.r;++f){c.push("\\trowd\\trautofit1");for(var p=u.s.c;p<=u.e.c;++p)c.push("\\cellx"+(p+1));for(c.push("\\pard\\intbl"),p=u.s.c;p<=u.e.c;++p){var g=encode_cell({r:f,c:p});d=h?(l[f]||[])[p]:l[g],!(!d||d.v==null&&(!d.f||d.F))&&(c.push(" "+(d.w||(format_cell(d),d.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:n,to_sheet:o,from_sheet:s}}();function rgb2Hex(o){for(var a=0,n=1;a!=3;++a)n=n*256+(o[a]>255?255:o[a]<0?0:o[a]);return n.toString(16).toUpperCase().slice(1)}var DEF_MDW=6,MDW=DEF_MDW;function width2px(o){return Math.floor((o+Math.round(128/MDW)/256)*MDW)}function px2char(o){return Math.floor((o-5)/MDW*100+.5)/100}function char2width(o){return Math.round((o*MDW+5)/MDW*256)/256}function process_col(o){o.width?(o.wpx=width2px(o.width),o.wch=px2char(o.wpx),o.MDW=MDW):o.wpx?(o.wch=px2char(o.wpx),o.width=char2width(o.wch),o.MDW=MDW):typeof o.wch=="number"&&(o.width=char2width(o.wch),o.wpx=width2px(o.width),o.MDW=MDW),o.customWidth&&delete o.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(o){return o*96/PPI}function pt2px(o){return o*PPI/96}function write_numFmts(o){var a=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)o[s]!=null&&(a[a.length]=writextag("numFmt",null,{numFmtId:s,formatCode:escapexml(o[s])}))}),a.length===1?"":(a[a.length]="</numFmts>",a[0]=writextag("numFmts",null,{count:a.length-2}).replace("/>",">"),a.join(""))}function write_cellXfs(o){var a=[];return a[a.length]=writextag("cellXfs",null),o.forEach(function(n){a[a.length]=writextag("xf",null,n)}),a[a.length]="</cellXfs>",a.length===2?"":(a[0]=writextag("cellXfs",null,{count:a.length-2}).replace("/>",">"),a.join(""))}function write_sty_xml(o,a){var n=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],s;return o.SSF&&(s=write_numFmts(o.SSF))!=null&&(n[n.length]=s),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(s=write_cellXfs(a.cellXfs))&&(n[n.length]=s),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtFmt(o,a){var n=o.read_shift(2),s=parse_XLWideString(o);return[n,s]}function write_BrtFmt(o,a,n){n||(n=new_buf(6+4*a.length)),n.write_shift(2,o),write_XLWideString(a,n);var s=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),s}function parse_BrtFont(o,a,n){var s={};s.sz=o.read_shift(2)/20;var l=parse_FontFlags(o);l.fItalic&&(s.italic=1),l.fCondense&&(s.condense=1),l.fExtend&&(s.extend=1),l.fShadow&&(s.shadow=1),l.fOutline&&(s.outline=1),l.fStrikeout&&(s.strike=1);var c=o.read_shift(2);switch(c===700&&(s.bold=1),o.read_shift(2)){case 1:s.vertAlign="superscript";break;case 2:s.vertAlign="subscript";break}var u=o.read_shift(1);u!=0&&(s.underline=u);var d=o.read_shift(1);d>0&&(s.family=d);var h=o.read_shift(1);switch(h>0&&(s.charset=h),o.l++,s.color=parse_BrtColor(o),o.read_shift(1)){case 1:s.scheme="major";break;case 2:s.scheme="minor";break}return s.name=parse_XLWideString(o),s}function write_BrtFont(o,a){a||(a=new_buf(25+4*32)),a.write_shift(2,o.sz*20),write_FontFlags(o,a),a.write_shift(2,o.bold?700:400);var n=0;o.vertAlign=="superscript"?n=1:o.vertAlign=="subscript"&&(n=2),a.write_shift(2,n),a.write_shift(1,o.underline||0),a.write_shift(1,o.family||0),a.write_shift(1,o.charset||0),a.write_shift(1,0),write_BrtColor(o.color,a);var s=0;return s=2,a.write_shift(1,s),write_XLWideString(o.name,a),a.length>a.l?a.slice(0,a.l):a}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(o,a){a||(a=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var n=rev_XLSBFillPTNames[o.patternType];n==null&&(n=40),a.write_shift(4,n);var s=0;if(n!=40)for(write_BrtColor({auto:1},a),write_BrtColor({auto:1},a);s<12;++s)a.write_shift(4,0);else{for(;s<4;++s)a.write_shift(4,0);for(;s<12;++s)a.write_shift(4,0)}return a.length>a.l?a.slice(0,a.l):a}function parse_BrtXF(o,a){var n=o.l+a,s=o.read_shift(2),l=o.read_shift(2);return o.l=n,{ixfe:s,numFmtId:l}}function write_BrtXF(o,a,n){n||(n=new_buf(16)),n.write_shift(2,a||0),n.write_shift(2,o.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var s=0;return n.write_shift(1,s),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function write_Blxf(o,a){return a||(a=new_buf(10)),a.write_shift(1,0),a.write_shift(1,0),a.write_shift(4,0),a.write_shift(4,0),a}var parse_BrtBorder=parsenoop;function write_BrtBorder(o,a){return a||(a=new_buf(51)),a.write_shift(1,0),write_Blxf(null,a),write_Blxf(null,a),write_Blxf(null,a),write_Blxf(null,a),write_Blxf(null,a),a.length>a.l?a.slice(0,a.l):a}function write_BrtStyle(o,a){return a||(a=new_buf(12+4*10)),a.write_shift(4,o.xfId),a.write_shift(2,1),a.write_shift(1,0),a.write_shift(1,0),write_XLNullableWideString(o.name||"",a),a.length>a.l?a.slice(0,a.l):a}function write_BrtBeginTableStyles(o,a,n){var s=new_buf(2052);return s.write_shift(4,o),write_XLNullableWideString(a,s),write_XLNullableWideString(n,s),s.length>s.l?s.slice(0,s.l):s}function write_FMTS_bin(o,a){if(a){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var l=s[0];l<=s[1];++l)a[l]!=null&&++n}),n!=0&&(write_record(o,615,write_UInt32LE(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var l=s[0];l<=s[1];++l)a[l]!=null&&write_record(o,44,write_BrtFmt(l,a[l]))}),write_record(o,616))}}function write_FONTS_bin(o){var a=1;write_record(o,611,write_UInt32LE(a)),write_record(o,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2})),write_record(o,612)}function write_FILLS_bin(o){var a=2;write_record(o,603,write_UInt32LE(a)),write_record(o,45,write_BrtFill({patternType:"none"})),write_record(o,45,write_BrtFill({patternType:"gray125"})),write_record(o,604)}function write_BORDERS_bin(o){var a=1;write_record(o,613,write_UInt32LE(a)),write_record(o,46,write_BrtBorder()),write_record(o,614)}function write_CELLSTYLEXFS_bin(o){var a=1;write_record(o,626,write_UInt32LE(a)),write_record(o,47,write_BrtXF({numFmtId:0},65535)),write_record(o,627)}function write_CELLXFS_bin(o,a){write_record(o,617,write_UInt32LE(a.length)),a.forEach(function(n){write_record(o,47,write_BrtXF(n,0))}),write_record(o,618)}function write_STYLES_bin(o){var a=1;write_record(o,619,write_UInt32LE(a)),write_record(o,48,write_BrtStyle({xfId:0,name:"Normal"})),write_record(o,620)}function write_DXFS_bin(o){var a=0;write_record(o,505,write_UInt32LE(a)),write_record(o,506)}function write_TABLESTYLES_bin(o){var a=0;write_record(o,508,write_BrtBeginTableStyles(a,"TableStyleMedium9","PivotStyleMedium4")),write_record(o,509)}function write_sty_bin(o,a){var n=buf_array();return write_record(n,278),write_FMTS_bin(n,o.SSF),write_FONTS_bin(n),write_FILLS_bin(n),write_BORDERS_bin(n),write_CELLSTYLEXFS_bin(n),write_CELLXFS_bin(n,a.cellXfs),write_STYLES_bin(n),write_DXFS_bin(n),write_TABLESTYLES_bin(n),write_record(n,279),n.end()}function write_theme(o,a){if(a&&a.themeXLSX)return a.themeXLSX;if(o&&typeof o.raw=="string")return o.raw;var n=[XML_HEADER];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function parse_BrtMdtinfo(o,a){return{flags:o.read_shift(4),version:o.read_shift(4),name:parse_XLWideString(o)}}function write_BrtMdtinfo(o){var a=new_buf(12+2*o.name.length);return a.write_shift(4,o.flags),a.write_shift(4,o.version),write_XLWideString(o.name,a),a.slice(0,a.l)}function parse_BrtMdb(o){for(var a=[],n=o.read_shift(4);n-- >0;)a.push([o.read_shift(4),o.read_shift(4)]);return a}function write_BrtMdb(o){var a=new_buf(4+8*o.length);a.write_shift(4,o.length);for(var n=0;n<o.length;++n)a.write_shift(4,o[n][0]),a.write_shift(4,o[n][1]);return a}function write_BrtBeginEsfmd(o,a){var n=new_buf(8+2*a.length);return n.write_shift(4,o),write_XLWideString(a,n),n.slice(0,n.l)}function parse_BrtBeginEsmdb(o){return o.l+=4,o.read_shift(4)!=0}function write_BrtBeginEsmdb(o,a){var n=new_buf(8);return n.write_shift(4,o),n.write_shift(4,1),n}function write_xlmeta_bin(){var o=buf_array();return write_record(o,332),write_record(o,334,write_UInt32LE(1)),write_record(o,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(o,336),write_record(o,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(o,52),write_record(o,35,write_UInt32LE(514)),write_record(o,4096,write_UInt32LE(0)),write_record(o,4097,writeuint16(1)),write_record(o,36),write_record(o,53),write_record(o,340),write_record(o,337,write_BrtBeginEsmdb(1)),write_record(o,51,write_BrtMdb([[1,0]])),write_record(o,338),write_record(o,333),o.end()}function write_xlmeta_xml(){var o=[XML_HEADER];return o.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),o.join("")}function parse_BrtCalcChainItem$(o){var a={};a.i=o.read_shift(4);var n={};n.r=o.read_shift(4),n.c=o.read_shift(4),a.r=encode_cell(n);var s=o.read_shift(1);return s&2&&(a.l="1"),s&8&&(a.a="1"),a}var _shapeid=1024;function write_comments_vml(o,a){for(var n=[21600,21600],s=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),l=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:o}),{"v:ext":"edit"}),writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:n.join(","),path:s})];_shapeid<o*1e3;)_shapeid+=1e3;return a.forEach(function(c){var u=decode_cell(c[0]),d={color2:"#BEFF82",type:"gradient"};d.type=="gradient"&&(d.angle="-180");var h=d.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,f=writextag("v:fill",h,d),p={on:"t",obscured:"t"};++_shapeid,l=l.concat(["<v:shape"+wxt_helper({id:"_x0000_s"+_shapeid,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(c[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",f,writextag("v:shadow",null,p),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[u.c+1,0,u.r+1,0,u.c+3,20,u.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(u.r)),writetag("x:Column",String(u.c)),c[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),l.push("</xml>"),l.join("")}function write_comments_xml(o){var a=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],n=[];return a.push("<authors>"),o.forEach(function(s){s[1].forEach(function(l){var c=escapexml(l.a);n.indexOf(c)==-1&&(n.push(c),a.push("<author>"+c+"</author>")),l.T&&l.ID&&n.indexOf("tc="+l.ID)==-1&&(n.push("tc="+l.ID),a.push("<author>tc="+l.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),a.push("<author>SheetJ5</author>")),a.push("</authors>"),a.push("<commentList>"),o.forEach(function(s){var l=0,c=[];if(s[1][0]&&s[1][0].T&&s[1][0].ID?l=n.indexOf("tc="+s[1][0].ID):s[1].forEach(function(h){h.a&&(l=n.indexOf(escapexml(h.a))),c.push(h.t||"")}),a.push('<comment ref="'+s[0]+'" authorId="'+l+'"><text>'),c.length<=1)a.push(writetag("t",escapexml(c[0]||"")));else{for(var u=`Comment:
    `+c[0]+`
`,d=1;d<c.length;++d)u+=`Reply:
    `+c[d]+`
`;a.push(writetag("t",escapexml(u)))}a.push("</text></comment>")}),a.push("</commentList>"),a.length>2&&(a[a.length]="</comments>",a[1]=a[1].replace("/>",">")),a.join("")}function write_tcmnt_xml(o,a,n){var s=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return o.forEach(function(l){var c="";(l[1]||[]).forEach(function(u,d){if(!u.T){delete u.ID;return}u.a&&a.indexOf(u.a)==-1&&a.push(u.a);var h={ref:l[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};d==0?c=h.id:h.parentId=c,u.ID=h.id,u.a&&(h.personId="{54EE7950-7262-4200-6969-"+("000000000000"+a.indexOf(u.a)).slice(-12)+"}"),s.push(writextag("threadedComment",writetag("text",u.t||""),h))})}),s.push("</ThreadedComments>"),s.join("")}function write_people_xml(o){var a=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return o.forEach(function(n,s){a.push(writextag("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+s).slice(-12)+"}",userId:n,providerId:"None"}))}),a.push("</personList>"),a.join("")}function parse_BrtBeginComment(o){var a={};a.iauthor=o.read_shift(4);var n=parse_UncheckedRfX(o);return a.rfx=n.s,a.ref=encode_cell(n.s),o.l+=16,a}function write_BrtBeginComment(o,a){return a==null&&(a=new_buf(36)),a.write_shift(4,o[1].iauthor),write_UncheckedRfX(o[0],a),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a.write_shift(4,0),a}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(o){return write_XLWideString(o.slice(0,54))}function write_comments_bin(o){var a=buf_array(),n=[];return write_record(a,628),write_record(a,630),o.forEach(function(s){s[1].forEach(function(l){n.indexOf(l.a)>-1||(n.push(l.a.slice(0,54)),write_record(a,632,write_BrtCommentAuthor(l.a)))})}),write_record(a,631),write_record(a,633),o.forEach(function(s){s[1].forEach(function(l){l.iauthor=n.indexOf(l.a);var c={s:decode_cell(s[0]),e:decode_cell(s[0])};write_record(a,635,write_BrtBeginComment([c,l])),l.t&&l.t.length>0&&write_record(a,637,write_BrtCommentText(l)),write_record(a,636),delete l.iauthor})}),write_record(a,634),write_record(a,629),a.end()}function fill_vba_xls(o,a){a.FullPaths.forEach(function(n,s){if(s!=0){var l=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");l.slice(-1)!=="/"&&CFB.utils.cfb_add(o,l,a.FileIndex[s].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"],rc_to_a1=function(){var o=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,a={r:0,c:0};function n(s,l,c,u){var d=!1,h=!1;c.length==0?h=!0:c.charAt(0)=="["&&(h=!0,c=c.slice(1,-1)),u.length==0?d=!0:u.charAt(0)=="["&&(d=!0,u=u.slice(1,-1));var f=c.length>0?parseInt(c,10)|0:0,p=u.length>0?parseInt(u,10)|0:0;return d?p+=a.c:--p,h?f+=a.r:--f,l+(d?"":"$")+encode_col(p)+(h?"":"$")+encode_row(f)}return function(l,c){return a=c,l.replace(o,n)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(a,n){return a.replace(crefregex,function(s,l,c,u,d,h){var f=decode_col(u)-(c?0:n.c),p=decode_row(h)-(d?0:n.r),g=p==0?"":d?p+1:"["+p+"]",v=f==0?"":c?f+1:"["+f+"]";return l+"R"+g+"C"+v})}}();function shift_formula_str(o,a){return o.replace(crefregex,function(n,s,l,c,u,d){return s+(l=="$"?l+c:encode_col(decode_col(c)+a.c))+(u=="$"?u+d:encode_row(decode_row(d)+a.r))})}function fuzzyfmla(o){return o.length!=1}function parseread1(o){o.l+=1}function parse_ColRelU(o,a){var n=o.read_shift(2);return[n&16383,n>>14&1,n>>15&1]}function parse_RgceArea(o,a,n){var s=2;if(n){if(n.biff>=2&&n.biff<=5)return parse_RgceArea_BIFF2(o);n.biff==12&&(s=4)}var l=o.read_shift(s),c=o.read_shift(s),u=parse_ColRelU(o),d=parse_ColRelU(o);return{s:{r:l,c:u[0],cRel:u[1],rRel:u[2]},e:{r:c,c:d[0],cRel:d[1],rRel:d[2]}}}function parse_RgceArea_BIFF2(o){var a=parse_ColRelU(o),n=parse_ColRelU(o),s=o.read_shift(1),l=o.read_shift(1);return{s:{r:a[0],c:s,cRel:a[1],rRel:a[2]},e:{r:n[0],c:l,cRel:n[1],rRel:n[2]}}}function parse_RgceAreaRel(o,a,n){if(n.biff<8)return parse_RgceArea_BIFF2(o);var s=o.read_shift(n.biff==12?4:2),l=o.read_shift(n.biff==12?4:2),c=parse_ColRelU(o),u=parse_ColRelU(o);return{s:{r:s,c:c[0],cRel:c[1],rRel:c[2]},e:{r:l,c:u[0],cRel:u[1],rRel:u[2]}}}function parse_RgceLoc(o,a,n){if(n&&n.biff>=2&&n.biff<=5)return parse_RgceLoc_BIFF2(o);var s=o.read_shift(n&&n.biff==12?4:2),l=parse_ColRelU(o);return{r:s,c:l[0],cRel:l[1],rRel:l[2]}}function parse_RgceLoc_BIFF2(o){var a=parse_ColRelU(o),n=o.read_shift(1);return{r:a[0],c:n,cRel:a[1],rRel:a[2]}}function parse_RgceElfLoc(o){var a=o.read_shift(2),n=o.read_shift(2);return{r:a,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function parse_RgceLocRel(o,a,n){var s=n&&n.biff?n.biff:8;if(s>=2&&s<=5)return parse_RgceLocRel_BIFF2(o);var l=o.read_shift(s>=12?4:2),c=o.read_shift(2),u=(c&16384)>>14,d=(c&32768)>>15;if(c&=16383,d==1)for(;l>524287;)l-=1048576;if(u==1)for(;c>8191;)c=c-16384;return{r:l,c,cRel:u,rRel:d}}function parse_RgceLocRel_BIFF2(o){var a=o.read_shift(2),n=o.read_shift(1),s=(a&32768)>>15,l=(a&16384)>>14;return a&=16383,s==1&&a>=8192&&(a=a-16384),l==1&&n>=128&&(n=n-256),{r:a,c:n,cRel:l,rRel:s}}function parse_PtgArea(o,a,n){var s=(o[o.l++]&96)>>5,l=parse_RgceArea(o,n.biff>=2&&n.biff<=5?6:8,n);return[s,l]}function parse_PtgArea3d(o,a,n){var s=(o[o.l++]&96)>>5,l=o.read_shift(2,"i"),c=8;if(n)switch(n.biff){case 5:o.l+=12,c=6;break;case 12:c=12;break}var u=parse_RgceArea(o,c,n);return[s,l,u]}function parse_PtgAreaErr(o,a,n){var s=(o[o.l++]&96)>>5;return o.l+=n&&n.biff>8?12:n.biff<8?6:8,[s]}function parse_PtgAreaErr3d(o,a,n){var s=(o[o.l++]&96)>>5,l=o.read_shift(2),c=8;if(n)switch(n.biff){case 5:o.l+=12,c=6;break;case 12:c=12;break}return o.l+=c,[s,l]}function parse_PtgAreaN(o,a,n){var s=(o[o.l++]&96)>>5,l=parse_RgceAreaRel(o,a-1,n);return[s,l]}function parse_PtgArray(o,a,n){var s=(o[o.l++]&96)>>5;return o.l+=n.biff==2?6:n.biff==12?14:7,[s]}function parse_PtgAttrBaxcel(o){var a=o[o.l+1]&1,n=1;return o.l+=4,[a,n]}function parse_PtgAttrChoose(o,a,n){o.l+=2;for(var s=o.read_shift(n&&n.biff==2?1:2),l=[],c=0;c<=s;++c)l.push(o.read_shift(n&&n.biff==2?1:2));return l}function parse_PtgAttrGoto(o,a,n){var s=o[o.l+1]&255?1:0;return o.l+=2,[s,o.read_shift(n&&n.biff==2?1:2)]}function parse_PtgAttrIf(o,a,n){var s=o[o.l+1]&255?1:0;return o.l+=2,[s,o.read_shift(n&&n.biff==2?1:2)]}function parse_PtgAttrIfError(o){var a=o[o.l+1]&255?1:0;return o.l+=2,[a,o.read_shift(2)]}function parse_PtgAttrSemi(o,a,n){var s=o[o.l+1]&255?1:0;return o.l+=n&&n.biff==2?3:4,[s]}function parse_PtgAttrSpaceType(o){var a=o.read_shift(1),n=o.read_shift(1);return[a,n]}function parse_PtgAttrSpace(o){return o.read_shift(2),parse_PtgAttrSpaceType(o)}function parse_PtgAttrSpaceSemi(o){return o.read_shift(2),parse_PtgAttrSpaceType(o)}function parse_PtgRef(o,a,n){var s=(o[o.l]&96)>>5;o.l+=1;var l=parse_RgceLoc(o,0,n);return[s,l]}function parse_PtgRefN(o,a,n){var s=(o[o.l]&96)>>5;o.l+=1;var l=parse_RgceLocRel(o,0,n);return[s,l]}function parse_PtgRef3d(o,a,n){var s=(o[o.l]&96)>>5;o.l+=1;var l=o.read_shift(2);n&&n.biff==5&&(o.l+=12);var c=parse_RgceLoc(o,0,n);return[s,l,c]}function parse_PtgFunc(o,a,n){var s=(o[o.l]&96)>>5;o.l+=1;var l=o.read_shift(n&&n.biff<=3?1:2);return[FtabArgc[l],Ftab[l],s]}function parse_PtgFuncVar(o,a,n){var s=o[o.l++],l=o.read_shift(1),c=n&&n.biff<=3?[s==88?-1:0,o.read_shift(1)]:parsetab(o);return[l,(c[0]===0?Ftab:Cetab)[c[1]]]}function parsetab(o){return[o[o.l+1]>>7,o.read_shift(2)&32767]}function parse_PtgAttrSum(o,a,n){o.l+=n&&n.biff==2?3:4}function parse_PtgExp(o,a,n){if(o.l++,n&&n.biff==12)return[o.read_shift(4,"i"),0];var s=o.read_shift(2),l=o.read_shift(n&&n.biff==2?1:2);return[s,l]}function parse_PtgErr(o){return o.l++,BErr[o.read_shift(1)]}function parse_PtgInt(o){return o.l++,o.read_shift(2)}function parse_PtgBool(o){return o.l++,o.read_shift(1)!==0}function parse_PtgNum(o){return o.l++,parse_Xnum(o)}function parse_PtgStr(o,a,n){return o.l++,parse_ShortXLUnicodeString(o,a-1,n)}function parse_SerAr(o,a){var n=[o.read_shift(1)];if(a==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=parsebool(o,1)?"TRUE":"FALSE",a!=12&&(o.l+=7);break;case 37:case 16:n[1]=BErr[o[o.l]],o.l+=a==12?4:8;break;case 0:o.l+=8;break;case 1:n[1]=parse_Xnum(o);break;case 2:n[1]=parse_XLUnicodeString2(o,0,{biff:a>0&&a<8?2:a});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function parse_PtgExtraMem(o,a,n){for(var s=o.read_shift(n.biff==12?4:2),l=[],c=0;c!=s;++c)l.push((n.biff==12?parse_UncheckedRfX:parse_Ref8U)(o));return l}function parse_PtgExtraArray(o,a,n){var s=0,l=0;n.biff==12?(s=o.read_shift(4),l=o.read_shift(4)):(l=1+o.read_shift(1),s=1+o.read_shift(2)),n.biff>=2&&n.biff<8&&(--s,--l==0&&(l=256));for(var c=0,u=[];c!=s&&(u[c]=[]);++c)for(var d=0;d!=l;++d)u[c][d]=parse_SerAr(o,n.biff);return u}function parse_PtgName(o,a,n){var s=o.read_shift(1)>>>5&3,l=!n||n.biff>=8?4:2,c=o.read_shift(l);switch(n.biff){case 2:o.l+=5;break;case 3:case 4:o.l+=8;break;case 5:o.l+=12;break}return[s,0,c]}function parse_PtgNameX(o,a,n){if(n.biff==5)return parse_PtgNameX_BIFF5(o);var s=o.read_shift(1)>>>5&3,l=o.read_shift(2),c=o.read_shift(4);return[s,l,c]}function parse_PtgNameX_BIFF5(o){var a=o.read_shift(1)>>>5&3,n=o.read_shift(2,"i");o.l+=8;var s=o.read_shift(2);return o.l+=12,[a,n,s]}function parse_PtgMemArea(o,a,n){var s=o.read_shift(1)>>>5&3;o.l+=n&&n.biff==2?3:4;var l=o.read_shift(n&&n.biff==2?1:2);return[s,l]}function parse_PtgMemFunc(o,a,n){var s=o.read_shift(1)>>>5&3,l=o.read_shift(n&&n.biff==2?1:2);return[s,l]}function parse_PtgRefErr(o,a,n){var s=o.read_shift(1)>>>5&3;return o.l+=4,n.biff<8&&o.l--,n.biff==12&&(o.l+=2),[s]}function parse_PtgRefErr3d(o,a,n){var s=(o[o.l++]&96)>>5,l=o.read_shift(2),c=4;if(n)switch(n.biff){case 5:c=15;break;case 12:c=6;break}return o.l+=c,[s,l]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(o,a,n){return o.l+=2,[parse_RgceElfLoc(o)]}function parse_PtgElfNoop(o){return o.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(o){return o.l+=2,[parseuint16(o),o.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(o){o.l+=2;var a=o.read_shift(2),n=o.read_shift(2),s=o.read_shift(4),l=o.read_shift(2),c=o.read_shift(2),u=PtgListRT[n>>2&31];return{ixti:a,coltype:n&3,rt:u,idx:s,c:l,C:c}}function parse_PtgSxName(o){return o.l+=2,[o.read_shift(4)]}function parse_PtgSheet(o,a,n){return o.l+=5,o.l+=2,o.l+=n.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(o,a,n){return o.l+=n.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(o){var a=o.read_shift(1)>>>5&3,n=o.read_shift(2);return[a,n]}function parse_PtgMemNoMemN(o){var a=o.read_shift(1)>>>5&3,n=o.read_shift(2);return[a,n]}function parse_PtgAttrNoop(o){return o.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(o,a,n,s){if(s.biff<8)return parsenoop(o,a);for(var l=o.l+a,c=[],u=0;u!==n.length;++u)switch(n[u][0]){case"PtgArray":n[u][1]=parse_PtgExtraArray(o,0,s),c.push(n[u][1]);break;case"PtgMemArea":n[u][2]=parse_PtgExtraMem(o,n[u][1],s),c.push(n[u][2]);break;case"PtgExp":s&&s.biff==12&&(n[u][1][1]=o.read_shift(4),c.push(n[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[u][0]}return a=l-o.l,a!==0&&c.push(parsenoop(o,a)),c}function parse_Rgce(o,a,n){for(var s=o.l+a,l,c,u=[];s!=o.l;)a=s-o.l,c=o[o.l],l=PtgTypes[c]||PtgTypes[PtgDupes[c]],(c===24||c===25)&&(l=(c===24?Ptg18:Ptg19)[o[o.l+1]]),!l||!l.f?parsenoop(o,a):u.push([l.n,l.f(o,a,n)]);return u}function stringify_array(o){for(var a=[],n=0;n<o.length;++n){for(var s=o[n],l=[],c=0;c<s.length;++c){var u=s[c];if(u)switch(u[0]){case 2:l.push('"'+u[1].replace(/"/g,'""')+'"');break;default:l.push(u[1])}else l.push("")}a.push(l.join(","))}return a.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function formula_quote_sheet_name(o,a){if(!o&&!(a&&a.biff<=5&&a.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(o)?"'"+o+"'":o}function get_ixti_raw(o,a,n){if(!o)return"SH33TJSERR0";if(n.biff>8&&(!o.XTI||!o.XTI[a]))return o.SheetNames[a];if(!o.XTI)return"SH33TJSERR6";var s=o.XTI[a];if(n.biff<8)return a>1e4&&(a-=65536),a<0&&(a=-a),a==0?"":o.XTI[a-1];if(!s)return"SH33TJSERR1";var l="";if(n.biff>8)switch(o[s[0]][0]){case 357:return l=s[1]==-1?"#REF":o.SheetNames[s[1]],s[1]==s[2]?l:l+":"+o.SheetNames[s[2]];case 358:return n.SID!=null?o.SheetNames[n.SID]:"SH33TJSSAME"+o[s[0]][0];case 355:default:return"SH33TJSSRC"+o[s[0]][0]}switch(o[s[0]][0][0]){case 1025:return l=s[1]==-1?"#REF":o.SheetNames[s[1]]||"SH33TJSERR3",s[1]==s[2]?l:l+":"+o.SheetNames[s[2]];case 14849:return o[s[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return o[s[0]][0][3]?(l=s[1]==-1?"#REF":o[s[0]][0][3][s[1]]||"SH33TJSERR4",s[1]==s[2]?l:l+":"+o[s[0]][0][3][s[2]]):"SH33TJSERR2"}}function get_ixti(o,a,n){var s=get_ixti_raw(o,a,n);return s=="#REF"?s:formula_quote_sheet_name(s,n)}function stringify_formula(o,a,n,s,l){var c=l&&l.biff||8,u={s:{c:0,r:0}},d=[],h,f,p,g=0,v=0,b,w="";if(!o[0]||!o[0][0])return"";for(var x=-1,S="",E=0,T=o[0].length;E<T;++E){var C=o[0][E];switch(C[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(h=d.pop(),f=d.pop(),x>=0){switch(o[0][x][1][0]){case 0:S=fill(" ",o[0][x][1][1]);break;case 1:S=fill("\r",o[0][x][1][1]);break;default:if(S="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+o[0][x][1][0])}f=f+S,x=-1}d.push(f+PtgBinOp[C[0]]+h);break;case"PtgIsect":h=d.pop(),f=d.pop(),d.push(f+" "+h);break;case"PtgUnion":h=d.pop(),f=d.pop(),d.push(f+","+h);break;case"PtgRange":h=d.pop(),f=d.pop(),d.push(f+":"+h);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":p=shift_cell_xls(C[1][1],u,l),d.push(encode_cell_xls(p,c));break;case"PtgRefN":p=n?shift_cell_xls(C[1][1],n,l):C[1][1],d.push(encode_cell_xls(p,c));break;case"PtgRef3d":g=C[1][1],p=shift_cell_xls(C[1][2],u,l),w=get_ixti(s,g,l),d.push(w+"!"+encode_cell_xls(p,c));break;case"PtgFunc":case"PtgFuncVar":var A=C[1][0],R=C[1][1];A||(A=0),A&=127;var j=A==0?[]:d.slice(-A);d.length-=A,R==="User"&&(R=j.shift()),d.push(R+"("+j.join(",")+")");break;case"PtgBool":d.push(C[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(C[1]);break;case"PtgNum":d.push(String(C[1]));break;case"PtgStr":d.push('"'+C[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(C[1]);break;case"PtgAreaN":b=shift_range_xls(C[1][1],n?{s:n}:u,l),d.push(encode_range_xls(b,l));break;case"PtgArea":b=shift_range_xls(C[1][1],u,l),d.push(encode_range_xls(b,l));break;case"PtgArea3d":g=C[1][1],b=C[1][2],w=get_ixti(s,g,l),d.push(w+"!"+encode_range_xls(b,l));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":v=C[1][2];var D=(s.names||[])[v-1]||(s[0]||[])[v],O=D?D.Name:"SH33TJSNAME"+String(v);O&&O.slice(0,6)=="_xlfn."&&!l.xlfn&&(O=O.slice(6)),d.push(O);break;case"PtgNameX":var H=C[1][1];v=C[1][2];var q;if(l.biff<=5)H<0&&(H=-H),s[H]&&(q=s[H][v]);else{var Y="";if(((s[H]||[])[0]||[])[0]==14849||(((s[H]||[])[0]||[])[0]==1025?s[H][v]&&s[H][v].itab>0&&(Y=s.SheetNames[s[H][v].itab-1]+"!"):Y=s.SheetNames[v-1]+"!"),s[H]&&s[H][v])Y+=s[H][v].Name;else if(s[0]&&s[0][v])Y+=s[0][v].Name;else{var te=(get_ixti_raw(s,H,l)||"").split(";;");te[v-1]?Y=te[v-1]:Y+="SH33TJSERRX"}d.push(Y);break}q||(q={Name:"SH33TJSERRY"}),d.push(q.Name);break;case"PtgParen":var ee="(",re=")";if(x>=0){switch(S="",o[0][x][1][0]){case 2:ee=fill(" ",o[0][x][1][1])+ee;break;case 3:ee=fill("\r",o[0][x][1][1])+ee;break;case 4:re=fill(" ",o[0][x][1][1])+re;break;case 5:re=fill("\r",o[0][x][1][1])+re;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+o[0][x][1][0])}x=-1}d.push(ee+d.pop()+re);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":p={c:C[1][1],r:C[1][0]};var ne={c:n.c,r:n.r};if(s.sharedf[encode_cell(p)]){var ce=s.sharedf[encode_cell(p)];d.push(stringify_formula(ce,u,ne,s,l))}else{var ve=!1;for(h=0;h!=s.arrayf.length;++h)if(f=s.arrayf[h],!(p.c<f[0].s.c||p.c>f[0].e.c)&&!(p.r<f[0].s.r||p.r>f[0].e.r)){d.push(stringify_formula(f[1],u,ne,s,l)),ve=!0;break}ve||d.push(C[1])}break;case"PtgArray":d.push("{"+stringify_array(C[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=E;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+C[1].idx+"[#"+C[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(C));default:throw new Error("Unrecognized Formula Token: "+String(C))}var be=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&x>=0&&be.indexOf(o[0][E][0])==-1){C=o[0][x];var me=!0;switch(C[1][0]){case 4:me=!1;case 0:S=fill(" ",C[1][1]);break;case 5:me=!1;case 1:S=fill("\r",C[1][1]);break;default:if(S="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+C[1][0])}d.push((me?S:"")+d.pop()+(me?"":S)),x=-1}}if(d.length>1&&l.WTF)throw new Error("bad formula stack");return d[0]}function write_FormulaValue(o){if(o==null){var a=new_buf(8);return a.write_shift(1,3),a.write_shift(1,0),a.write_shift(2,0),a.write_shift(2,0),a.write_shift(2,65535),a}else if(typeof o=="number")return write_Xnum(o);return write_Xnum(0)}function write_Formula(o,a,n,s,l){var c=write_XLSCell(a,n,l),u=write_FormulaValue(o.v),d=new_buf(6),h=33;d.write_shift(2,h),d.write_shift(4,0);for(var f=new_buf(o.bf.length),p=0;p<o.bf.length;++p)f[p]=o.bf[p];var g=bconcat([c,u,d,f]);return g}function parse_XLSBParsedFormula(o,a,n){var s=o.read_shift(4),l=parse_Rgce(o,s,n),c=o.read_shift(4),u=c>0?parse_RgbExtra(o,c,l,n):null;return[l,u]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function csf_to_ods_formula(o){var a="of:="+o.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return a.replace(/;/g,"|").replace(/,/g,";")}function csf_to_ods_3D(o){return o.replace(/\./,"!")}var browser_has_Map=typeof Map<"u";function get_sst_id(o,a,n){var s=0,l=o.length;if(n){if(browser_has_Map?n.has(a):Object.prototype.hasOwnProperty.call(n,a)){for(var c=browser_has_Map?n.get(a):n[a];s<c.length;++s)if(o[c[s]].t===a)return o.Count++,c[s]}}else for(;s<l;++s)if(o[s].t===a)return o.Count++,s;return o[l]={t:a},o.Count++,o.Unique++,n&&(browser_has_Map?(n.has(a)||n.set(a,[]),n.get(a).push(l)):(Object.prototype.hasOwnProperty.call(n,a)||(n[a]=[]),n[a].push(l))),l}function col_obj_w(o,a){var n={min:o+1,max:o+1},s=-1;return a.MDW&&(MDW=a.MDW),a.width!=null?n.customWidth=1:a.wpx!=null?s=px2char(a.wpx):a.wch!=null&&(s=a.wch),s>-1?(n.width=char2width(s),n.customWidth=1):a.width!=null&&(n.width=a.width),a.hidden&&(n.hidden=!0),a.level!=null&&(n.outlineLevel=n.level=a.level),n}function default_margins(o,a){if(o){var n=[.7,.7,.75,.75,.3,.3];o.left==null&&(o.left=n[0]),o.right==null&&(o.right=n[1]),o.top==null&&(o.top=n[2]),o.bottom==null&&(o.bottom=n[3]),o.header==null&&(o.header=n[4]),o.footer==null&&(o.footer=n[5])}}function get_cell_style(o,a,n){var s=n.revssf[a.z!=null?a.z:"General"],l=60,c=o.length;if(s==null&&n.ssf){for(;l<392;++l)if(n.ssf[l]==null){SSF_load(a.z,l),n.ssf[l]=a.z,n.revssf[a.z]=s=l;break}}for(l=0;l!=c;++l)if(o[l].numFmtId===s)return l;return o[c]={numFmtId:s,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function check_ws(o,a,n){if(o&&o["!ref"]){var s=safe_decode_range(o["!ref"]);if(s.e.c<s.s.c||s.e.r<s.s.r)throw new Error("Bad range ("+n+"): "+o["!ref"])}}function write_ws_xml_merges(o){if(o.length===0)return"";for(var a='<mergeCells count="'+o.length+'">',n=0;n!=o.length;++n)a+='<mergeCell ref="'+encode_range(o[n])+'"/>';return a+"</mergeCells>"}function write_ws_xml_sheetpr(o,a,n,s,l){var c=!1,u={},d=null;if(s.bookType!=="xlsx"&&a.vbaraw){var h=a.SheetNames[n];try{a.Workbook&&(h=a.Workbook.Sheets[n].CodeName||h)}catch{}c=!0,u.codeName=utf8write(escapexml(h))}if(o&&o["!outline"]){var f={summaryBelow:1,summaryRight:1};o["!outline"].above&&(f.summaryBelow=0),o["!outline"].left&&(f.summaryRight=0),d=(d||"")+writextag("outlinePr",null,f)}!c&&!d||(l[l.length]=writextag("sheetPr",d,u))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(o){var a={sheet:1};return sheetprot_deffalse.forEach(function(n){o[n]!=null&&o[n]&&(a[n]="1")}),sheetprot_deftrue.forEach(function(n){o[n]!=null&&!o[n]&&(a[n]="0")}),o.password&&(a.password=crypto_CreatePasswordVerifier_Method1(o.password).toString(16).toUpperCase()),writextag("sheetProtection",null,a)}function write_ws_xml_margins(o){return default_margins(o),writextag("pageMargins",null,o)}function write_ws_xml_cols(o,a){for(var n=["<cols>"],s,l=0;l!=a.length;++l)(s=a[l])&&(n[n.length]=writextag("col",null,col_obj_w(l,s)));return n[n.length]="</cols>",n.join("")}function write_ws_xml_autofilter(o,a,n,s){var l=typeof o.ref=="string"?o.ref:encode_range(o.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var c=n.Workbook.Names,u=decode_range(l);u.s.r==u.e.r&&(u.e.r=decode_range(a["!ref"]).e.r,l=encode_range(u));for(var d=0;d<c.length;++d){var h=c[d];if(h.Name=="_xlnm._FilterDatabase"&&h.Sheet==s){h.Ref="'"+n.SheetNames[s]+"'!"+l;break}}return d==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+n.SheetNames[s]+"'!"+l}),writextag("autoFilter",null,{ref:l})}function write_ws_xml_sheetviews(o,a,n,s){var l={workbookViewId:"0"};return(((s||{}).Workbook||{}).Views||[])[0]&&(l.rightToLeft=s.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,l),{})}function write_ws_xml_cell(o,a,n,s){if(o.c&&n["!comments"].push([a,o.c]),o.v===void 0&&typeof o.f!="string"||o.t==="z"&&!o.f)return"";var l="",c=o.t,u=o.v;if(o.t!=="z")switch(o.t){case"b":l=o.v?"1":"0";break;case"n":l=""+o.v;break;case"e":l=BErr[o.v];break;case"d":s&&s.cellDates?l=parseDate(o.v,-1).toISOString():(o=dup(o),o.t="n",l=""+(o.v=datenum(parseDate(o.v)))),typeof o.z>"u"&&(o.z=table_fmt[14]);break;default:l=o.v;break}var d=writetag("v",escapexml(l)),h={r:a},f=get_cell_style(s.cellXfs,o,s);switch(f!==0&&(h.s=f),o.t){case"n":break;case"d":h.t="d";break;case"b":h.t="b";break;case"e":h.t="e";break;case"z":break;default:if(o.v==null){delete o.t;break}if(o.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(s&&s.bookSST){d=writetag("v",""+get_sst_id(s.Strings,o.v,s.revStrings)),h.t="s";break}h.t="str";break}if(o.t!=c&&(o.t=c,o.v=u),typeof o.f=="string"&&o.f){var p=o.F&&o.F.slice(0,a.length)==a?{t:"array",ref:o.F}:null;d=writextag("f",escapexml(o.f),p)+(o.v!=null?d:"")}return o.l&&n["!links"].push([a,o.l]),o.D&&(h.cm=1),writextag("c",d,h)}function write_ws_xml_data(o,a,n,s){var l=[],c=[],u=safe_decode_range(o["!ref"]),d="",h,f="",p=[],g=0,v=0,b=o["!rows"],w=Array.isArray(o),x={r:f},S,E=-1;for(v=u.s.c;v<=u.e.c;++v)p[v]=encode_col(v);for(g=u.s.r;g<=u.e.r;++g){for(c=[],f=encode_row(g),v=u.s.c;v<=u.e.c;++v){h=p[v]+f;var T=w?(o[g]||[])[v]:o[h];T!==void 0&&(d=write_ws_xml_cell(T,h,o,a))!=null&&c.push(d)}(c.length>0||b&&b[g])&&(x={r:f},b&&b[g]&&(S=b[g],S.hidden&&(x.hidden=1),E=-1,S.hpx?E=px2pt(S.hpx):S.hpt&&(E=S.hpt),E>-1&&(x.ht=E,x.customHeight=1),S.level&&(x.outlineLevel=S.level)),l[l.length]=writextag("row",c.join(""),x))}if(b)for(;g<b.length;++g)b&&b[g]&&(x={r:g+1},S=b[g],S.hidden&&(x.hidden=1),E=-1,S.hpx?E=px2pt(S.hpx):S.hpt&&(E=S.hpt),E>-1&&(x.ht=E,x.customHeight=1),S.level&&(x.outlineLevel=S.level),l[l.length]=writextag("row","",x));return l.join("")}function write_ws_xml(o,a,n,s){var l=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],c=n.SheetNames[o],u=0,d="",h=n.Sheets[c];h==null&&(h={});var f=h["!ref"]||"A1",p=safe_decode_range(f);if(p.e.c>16383||p.e.r>1048575){if(a.WTF)throw new Error("Range "+f+" exceeds format limit A1:XFD1048576");p.e.c=Math.min(p.e.c,16383),p.e.r=Math.min(p.e.c,1048575),f=encode_range(p)}s||(s={}),h["!comments"]=[];var g=[];write_ws_xml_sheetpr(h,n,o,a,l),l[l.length]=writextag("dimension",null,{ref:f}),l[l.length]=write_ws_xml_sheetviews(h,a,o,n),a.sheetFormat&&(l[l.length]=writextag("sheetFormatPr",null,{defaultRowHeight:a.sheetFormat.defaultRowHeight||"16",baseColWidth:a.sheetFormat.baseColWidth||"10",outlineLevelRow:a.sheetFormat.outlineLevelRow||"7"})),h["!cols"]!=null&&h["!cols"].length>0&&(l[l.length]=write_ws_xml_cols(h,h["!cols"])),l[u=l.length]="<sheetData/>",h["!links"]=[],h["!ref"]!=null&&(d=write_ws_xml_data(h,a),d.length>0&&(l[l.length]=d)),l.length>u+1&&(l[l.length]="</sheetData>",l[u]=l[u].replace("/>",">")),h["!protect"]&&(l[l.length]=write_ws_xml_protection(h["!protect"])),h["!autofilter"]!=null&&(l[l.length]=write_ws_xml_autofilter(h["!autofilter"],h,n,o)),h["!merges"]!=null&&h["!merges"].length>0&&(l[l.length]=write_ws_xml_merges(h["!merges"]));var v=-1,b,w=-1;return h["!links"].length>0&&(l[l.length]="<hyperlinks>",h["!links"].forEach(function(x){x[1].Target&&(b={ref:x[0]},x[1].Target.charAt(0)!="#"&&(w=add_rels(s,-1,escapexml(x[1].Target).replace(/#.*$/,""),RELS.HLINK),b["r:id"]="rId"+w),(v=x[1].Target.indexOf("#"))>-1&&(b.location=escapexml(x[1].Target.slice(v+1))),x[1].Tooltip&&(b.tooltip=escapexml(x[1].Tooltip)),l[l.length]=writextag("hyperlink",null,b))}),l[l.length]="</hyperlinks>"),delete h["!links"],h["!margins"]!=null&&(l[l.length]=write_ws_xml_margins(h["!margins"])),(!a||a.ignoreEC||a.ignoreEC==null)&&(l[l.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:f}))),g.length>0&&(w=add_rels(s,-1,"../drawings/drawing"+(o+1)+".xml",RELS.DRAW),l[l.length]=writextag("drawing",null,{"r:id":"rId"+w}),h["!drawing"]=g),h["!comments"].length>0&&(w=add_rels(s,-1,"../drawings/vmlDrawing"+(o+1)+".vml",RELS.VML),l[l.length]=writextag("legacyDrawing",null,{"r:id":"rId"+w}),h["!legacy"]=w),l.length>1&&(l[l.length]="</worksheet>",l[1]=l[1].replace("/>",">")),l.join("")}function parse_BrtRowHdr(o,a){var n={},s=o.l+a;n.r=o.read_shift(4),o.l+=4;var l=o.read_shift(2);o.l+=1;var c=o.read_shift(1);return o.l=s,c&7&&(n.level=c&7),c&16&&(n.hidden=!0),c&32&&(n.hpt=l/20),n}function write_BrtRowHdr(o,a,n){var s=new_buf(145),l=(n["!rows"]||[])[o]||{};s.write_shift(4,o),s.write_shift(4,0);var c=320;l.hpx?c=px2pt(l.hpx)*20:l.hpt&&(c=l.hpt*20),s.write_shift(2,c),s.write_shift(1,0);var u=0;l.level&&(u|=l.level),l.hidden&&(u|=16),(l.hpx||l.hpt)&&(u|=32),s.write_shift(1,u),s.write_shift(1,0);var d=0,h=s.l;s.l+=4;for(var f={r:o,c:0},p=0;p<16;++p)if(!(a.s.c>p+1<<10||a.e.c<p<<10)){for(var g=-1,v=-1,b=p<<10;b<p+1<<10;++b){f.c=b;var w=Array.isArray(n)?(n[f.r]||[])[f.c]:n[encode_cell(f)];w&&(g<0&&(g=b),v=b)}g<0||(++d,s.write_shift(4,g),s.write_shift(4,v))}var x=s.l;return s.l=h,s.write_shift(4,d),s.l=x,s.length>s.l?s.slice(0,s.l):s}function write_row_header(o,a,n,s){var l=write_BrtRowHdr(s,n,a);(l.length>17||(a["!rows"]||[])[s])&&write_record(o,0,l)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(o,a){var n={},s=o[o.l];return++o.l,n.above=!(s&64),n.left=!(s&128),o.l+=18,n.name=parse_XLSBCodeName(o),n}function write_BrtWsProp(o,a,n){n==null&&(n=new_buf(84+4*o.length));var s=192;a&&(a.above&&(s&=-65),a.left&&(s&=-129)),n.write_shift(1,s);for(var l=1;l<3;++l)n.write_shift(1,0);return write_BrtColor({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),write_XLSBCodeName(o,n),n.slice(0,n.l)}function parse_BrtCellBlank(o){var a=parse_XLSBCell(o);return[a]}function write_BrtCellBlank(o,a,n){return n==null&&(n=new_buf(8)),write_XLSBCell(a,n)}function parse_BrtShortBlank(o){var a=parse_XLSBShortCell(o);return[a]}function write_BrtShortBlank(o,a,n){return n==null&&(n=new_buf(4)),write_XLSBShortCell(a,n)}function parse_BrtCellBool(o){var a=parse_XLSBCell(o),n=o.read_shift(1);return[a,n,"b"]}function write_BrtCellBool(o,a,n){return n==null&&(n=new_buf(9)),write_XLSBCell(a,n),n.write_shift(1,o.v?1:0),n}function parse_BrtShortBool(o){var a=parse_XLSBShortCell(o),n=o.read_shift(1);return[a,n,"b"]}function write_BrtShortBool(o,a,n){return n==null&&(n=new_buf(5)),write_XLSBShortCell(a,n),n.write_shift(1,o.v?1:0),n}function parse_BrtCellError(o){var a=parse_XLSBCell(o),n=o.read_shift(1);return[a,n,"e"]}function write_BrtCellError(o,a,n){return n==null&&(n=new_buf(9)),write_XLSBCell(a,n),n.write_shift(1,o.v),n}function parse_BrtShortError(o){var a=parse_XLSBShortCell(o),n=o.read_shift(1);return[a,n,"e"]}function write_BrtShortError(o,a,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(a,n),n.write_shift(1,o.v),n.write_shift(2,0),n.write_shift(1,0),n}function parse_BrtCellIsst(o){var a=parse_XLSBCell(o),n=o.read_shift(4);return[a,n,"s"]}function write_BrtCellIsst(o,a,n){return n==null&&(n=new_buf(12)),write_XLSBCell(a,n),n.write_shift(4,a.v),n}function parse_BrtShortIsst(o){var a=parse_XLSBShortCell(o),n=o.read_shift(4);return[a,n,"s"]}function write_BrtShortIsst(o,a,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(a,n),n.write_shift(4,a.v),n}function parse_BrtCellReal(o){var a=parse_XLSBCell(o),n=parse_Xnum(o);return[a,n,"n"]}function write_BrtCellReal(o,a,n){return n==null&&(n=new_buf(16)),write_XLSBCell(a,n),write_Xnum(o.v,n),n}function parse_BrtShortReal(o){var a=parse_XLSBShortCell(o),n=parse_Xnum(o);return[a,n,"n"]}function write_BrtShortReal(o,a,n){return n==null&&(n=new_buf(12)),write_XLSBShortCell(a,n),write_Xnum(o.v,n),n}function parse_BrtCellRk(o){var a=parse_XLSBCell(o),n=parse_RkNumber(o);return[a,n,"n"]}function write_BrtCellRk(o,a,n){return n==null&&(n=new_buf(12)),write_XLSBCell(a,n),write_RkNumber(o.v,n),n}function parse_BrtShortRk(o){var a=parse_XLSBShortCell(o),n=parse_RkNumber(o);return[a,n,"n"]}function write_BrtShortRk(o,a,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(a,n),write_RkNumber(o.v,n),n}function parse_BrtCellRString(o){var a=parse_XLSBCell(o),n=parse_RichStr(o);return[a,n,"is"]}function parse_BrtCellSt(o){var a=parse_XLSBCell(o),n=parse_XLWideString(o);return[a,n,"str"]}function write_BrtCellSt(o,a,n){return n==null&&(n=new_buf(12+4*o.v.length)),write_XLSBCell(a,n),write_XLWideString(o.v,n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtShortSt(o){var a=parse_XLSBShortCell(o),n=parse_XLWideString(o);return[a,n,"str"]}function write_BrtShortSt(o,a,n){return n==null&&(n=new_buf(8+4*o.v.length)),write_XLSBShortCell(a,n),write_XLWideString(o.v,n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtFmlaBool(o,a,n){var s=o.l+a,l=parse_XLSBCell(o);l.r=n["!row"];var c=o.read_shift(1),u=[l,c,"b"];if(n.cellFormula){o.l+=2;var d=parse_XLSBCellParsedFormula(o,s-o.l,n);u[3]=stringify_formula(d,null,l,n.supbooks,n)}else o.l=s;return u}function parse_BrtFmlaError(o,a,n){var s=o.l+a,l=parse_XLSBCell(o);l.r=n["!row"];var c=o.read_shift(1),u=[l,c,"e"];if(n.cellFormula){o.l+=2;var d=parse_XLSBCellParsedFormula(o,s-o.l,n);u[3]=stringify_formula(d,null,l,n.supbooks,n)}else o.l=s;return u}function parse_BrtFmlaNum(o,a,n){var s=o.l+a,l=parse_XLSBCell(o);l.r=n["!row"];var c=parse_Xnum(o),u=[l,c,"n"];if(n.cellFormula){o.l+=2;var d=parse_XLSBCellParsedFormula(o,s-o.l,n);u[3]=stringify_formula(d,null,l,n.supbooks,n)}else o.l=s;return u}function parse_BrtFmlaString(o,a,n){var s=o.l+a,l=parse_XLSBCell(o);l.r=n["!row"];var c=parse_XLWideString(o),u=[l,c,"str"];if(n.cellFormula){o.l+=2;var d=parse_XLSBCellParsedFormula(o,s-o.l,n);u[3]=stringify_formula(d,null,l,n.supbooks,n)}else o.l=s;return u}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(o,a){return a==null&&(a=new_buf(4)),a.write_shift(4,o),a}function parse_BrtHLink(o,a){var n=o.l+a,s=parse_UncheckedRfX(o),l=parse_XLNullableWideString(o),c=parse_XLWideString(o),u=parse_XLWideString(o),d=parse_XLWideString(o);o.l=n;var h={rfx:s,relId:l,loc:c,display:d};return u&&(h.Tooltip=u),h}function write_BrtHLink(o,a){var n=new_buf(50+4*(o[1].Target.length+(o[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(o[0]),e:decode_cell(o[0])},n),write_RelID("rId"+a,n);var s=o[1].Target.indexOf("#"),l=s==-1?"":o[1].Target.slice(s+1);return write_XLWideString(l||"",n),write_XLWideString(o[1].Tooltip||"",n),write_XLWideString("",n),n.slice(0,n.l)}function parse_BrtPane(){}function parse_BrtArrFmla(o,a,n){var s=o.l+a,l=parse_RfX(o),c=o.read_shift(1),u=[l];if(u[2]=c,n.cellFormula){var d=parse_XLSBArrayParsedFormula(o,s-o.l,n);u[1]=d}else o.l=s;return u}function parse_BrtShrFmla(o,a,n){var s=o.l+a,l=parse_UncheckedRfX(o),c=[l];if(n.cellFormula){var u=parse_XLSBSharedParsedFormula(o,s-o.l,n);c[1]=u,o.l=s}else o.l=s;return c}function write_BrtColInfo(o,a,n){n==null&&(n=new_buf(18));var s=col_obj_w(o,a);n.write_shift(-4,o),n.write_shift(-4,o),n.write_shift(4,(s.width||10)*256),n.write_shift(4,0);var l=0;return a.hidden&&(l|=1),typeof s.width=="number"&&(l|=2),a.level&&(l|=a.level<<8),n.write_shift(2,l),n}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(o){var a={};return BrtMarginKeys.forEach(function(n){a[n]=parse_Xnum(o)}),a}function write_BrtMargins(o,a){return a==null&&(a=new_buf(6*8)),default_margins(o),BrtMarginKeys.forEach(function(n){write_Xnum(o[n],a)}),a}function parse_BrtBeginWsView(o){var a=o.read_shift(2);return o.l+=28,{RTL:a&32}}function write_BrtBeginWsView(o,a,n){n==null&&(n=new_buf(30));var s=924;return(((a||{}).Views||[])[0]||{}).RTL&&(s|=32),n.write_shift(2,s),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function write_BrtCellIgnoreEC(o){var a=new_buf(24);return a.write_shift(4,4),a.write_shift(4,1),write_UncheckedRfX(o,a),a}function write_BrtSheetProtection(o,a){return a==null&&(a=new_buf(16*4+2)),a.write_shift(2,o.password?crypto_CreatePasswordVerifier_Method1(o.password):0),a.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?a.write_shift(4,o[n[0]]!=null&&!o[n[0]]?1:0):a.write_shift(4,o[n[0]]!=null&&o[n[0]]?0:1)}),a}function parse_BrtDVal(){}function parse_BrtDVal14(){}function write_ws_bin_cell(o,a,n,s,l,c,u){if(a.v===void 0)return!1;var d="";switch(a.t){case"b":d=a.v?"1":"0";break;case"d":a=dup(a),a.z=a.z||table_fmt[14],a.v=datenum(parseDate(a.v)),a.t="n";break;case"n":case"e":d=""+a.v;break;default:d=a.v;break}var h={r:n,c:s};switch(h.s=get_cell_style(l.cellXfs,a,l),a.l&&c["!links"].push([encode_cell(h),a.l]),a.c&&c["!comments"].push([encode_cell(h),a.c]),a.t){case"s":case"str":return l.bookSST?(d=get_sst_id(l.Strings,a.v,l.revStrings),h.t="s",h.v=d,u?write_record(o,18,write_BrtShortIsst(a,h)):write_record(o,7,write_BrtCellIsst(a,h))):(h.t="str",u?write_record(o,17,write_BrtShortSt(a,h)):write_record(o,6,write_BrtCellSt(a,h))),!0;case"n":return a.v==(a.v|0)&&a.v>-1e3&&a.v<1e3?u?write_record(o,13,write_BrtShortRk(a,h)):write_record(o,2,write_BrtCellRk(a,h)):u?write_record(o,16,write_BrtShortReal(a,h)):write_record(o,5,write_BrtCellReal(a,h)),!0;case"b":return h.t="b",u?write_record(o,15,write_BrtShortBool(a,h)):write_record(o,4,write_BrtCellBool(a,h)),!0;case"e":return h.t="e",u?write_record(o,14,write_BrtShortError(a,h)):write_record(o,3,write_BrtCellError(a,h)),!0}return u?write_record(o,12,write_BrtShortBlank(a,h)):write_record(o,1,write_BrtCellBlank(a,h)),!0}function write_CELLTABLE(o,a,n,s){var l=safe_decode_range(a["!ref"]||"A1"),c,u="",d=[];write_record(o,145);var h=Array.isArray(a),f=l.e.r;a["!rows"]&&(f=Math.max(l.e.r,a["!rows"].length-1));for(var p=l.s.r;p<=f;++p){u=encode_row(p),write_row_header(o,a,l,p);var g=!1;if(p<=l.e.r)for(var v=l.s.c;v<=l.e.c;++v){p===l.s.r&&(d[v]=encode_col(v)),c=d[v]+u;var b=h?(a[p]||[])[v]:a[c];if(!b){g=!1;continue}g=write_ws_bin_cell(o,b,p,v,s,a,g)}}write_record(o,146)}function write_MERGECELLS(o,a){!a||!a["!merges"]||(write_record(o,177,write_BrtBeginMergeCells(a["!merges"].length)),a["!merges"].forEach(function(n){write_record(o,176,write_BrtMergeCell(n))}),write_record(o,178))}function write_COLINFOS(o,a){!a||!a["!cols"]||(write_record(o,390),a["!cols"].forEach(function(n,s){n&&write_record(o,60,write_BrtColInfo(s,n))}),write_record(o,391))}function write_IGNOREECS(o,a){!a||!a["!ref"]||(write_record(o,648),write_record(o,649,write_BrtCellIgnoreEC(safe_decode_range(a["!ref"]))),write_record(o,650))}function write_HLINKS(o,a,n){a["!links"].forEach(function(s){if(s[1].Target){var l=add_rels(n,-1,s[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(o,494,write_BrtHLink(s,l))}}),delete a["!links"]}function write_LEGACYDRAWING(o,a,n,s){if(a["!comments"].length>0){var l=add_rels(s,-1,"../drawings/vmlDrawing"+(n+1)+".vml",RELS.VML);write_record(o,551,write_RelID("rId"+l)),a["!legacy"]=l}}function write_AUTOFILTER(o,a,n,s){if(a["!autofilter"]){var l=a["!autofilter"],c=typeof l.ref=="string"?l.ref:encode_range(l.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var u=n.Workbook.Names,d=decode_range(c);d.s.r==d.e.r&&(d.e.r=decode_range(a["!ref"]).e.r,c=encode_range(d));for(var h=0;h<u.length;++h){var f=u[h];if(f.Name=="_xlnm._FilterDatabase"&&f.Sheet==s){f.Ref="'"+n.SheetNames[s]+"'!"+c;break}}h==u.length&&u.push({Name:"_xlnm._FilterDatabase",Sheet:s,Ref:"'"+n.SheetNames[s]+"'!"+c}),write_record(o,161,write_UncheckedRfX(safe_decode_range(c))),write_record(o,162)}}function write_WSVIEWS2(o,a,n){write_record(o,133),write_record(o,137,write_BrtBeginWsView(a,n)),write_record(o,138),write_record(o,134)}function write_SHEETPROTECT(o,a){a["!protect"]&&write_record(o,535,write_BrtSheetProtection(a["!protect"]))}function write_ws_bin(o,a,n,s){var l=buf_array(),c=n.SheetNames[o],u=n.Sheets[c]||{},d=c;try{n&&n.Workbook&&(d=n.Workbook.Sheets[o].CodeName||d)}catch{}var h=safe_decode_range(u["!ref"]||"A1");if(h.e.c>16383||h.e.r>1048575){if(a.WTF)throw new Error("Range "+(u["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");h.e.c=Math.min(h.e.c,16383),h.e.r=Math.min(h.e.c,1048575)}return u["!links"]=[],u["!comments"]=[],write_record(l,129),(n.vbaraw||u["!outline"])&&write_record(l,147,write_BrtWsProp(d,u["!outline"])),write_record(l,148,write_BrtWsDim(h)),write_WSVIEWS2(l,u,n.Workbook),write_COLINFOS(l,u),write_CELLTABLE(l,u,o,a),write_SHEETPROTECT(l,u),write_AUTOFILTER(l,u,n,o),write_MERGECELLS(l,u),write_HLINKS(l,u,s),u["!margins"]&&write_record(l,476,write_BrtMargins(u["!margins"])),(!a||a.ignoreEC||a.ignoreEC==null)&&write_IGNOREECS(l,u),write_LEGACYDRAWING(l,u,o,s),write_record(l,130),l.end()}function parse_BrtCsProp(o,a){o.l+=10;var n=parse_XLWideString(o);return{name:n}}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function safe1904(o){return!o.Workbook||!o.Workbook.WBProps?"false":parsexmlbool(o.Workbook.WBProps.date1904)?"true":"false"}var badchars="][*?/\\".split("");function check_ws_name(o,a){if(o.length>31)throw new Error("Sheet names cannot exceed 31 chars");var n=!0;return badchars.forEach(function(s){if(o.indexOf(s)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),n}function check_wb_names(o,a,n){o.forEach(function(s,l){check_ws_name(s);for(var c=0;c<l;++c)if(s==o[c])throw new Error("Duplicate Sheet Name: "+s);if(n){var u=a&&a[l]&&a[l].CodeName||s;if(u.charCodeAt(0)==95&&u.length>22)throw new Error("Bad Code Name: Worksheet"+u)}})}function check_wb(o){if(!o||!o.SheetNames||!o.Sheets)throw new Error("Invalid Workbook");if(!o.SheetNames.length)throw new Error("Workbook is empty");var a=o.Workbook&&o.Workbook.Sheets||[];check_wb_names(o.SheetNames,a,!!o.vbaraw);for(var n=0;n<o.SheetNames.length;++n)check_ws(o.Sheets[o.SheetNames[n]],o.SheetNames[n],n)}function write_wb_xml(o){var a=[XML_HEADER];a[a.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var n=o.Workbook&&(o.Workbook.Names||[]).length>0,s={codeName:"ThisWorkbook"};o.Workbook&&o.Workbook.WBProps&&(WBPropsDef.forEach(function(d){o.Workbook.WBProps[d[0]]!=null&&o.Workbook.WBProps[d[0]]!=d[1]&&(s[d[0]]=o.Workbook.WBProps[d[0]])}),o.Workbook.WBProps.CodeName&&(s.codeName=o.Workbook.WBProps.CodeName,delete s.CodeName)),a[a.length]=writextag("workbookPr",null,s);var l=o.Workbook&&o.Workbook.Sheets||[],c=0;if(l&&l[0]&&l[0].Hidden){for(a[a.length]="<bookViews>",c=0;c!=o.SheetNames.length&&!(!l[c]||!l[c].Hidden);++c);c==o.SheetNames.length&&(c=0),a[a.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',a[a.length]="</bookViews>"}for(a[a.length]="<sheets>",c=0;c!=o.SheetNames.length;++c){var u={name:escapexml(o.SheetNames[c].slice(0,31))};if(u.sheetId=""+(c+1),u["r:id"]="rId"+(c+1),l[c])switch(l[c].Hidden){case 1:u.state="hidden";break;case 2:u.state="veryHidden";break}a[a.length]=writextag("sheet",null,u)}return a[a.length]="</sheets>",n&&(a[a.length]="<definedNames>",o.Workbook&&o.Workbook.Names&&o.Workbook.Names.forEach(function(d){var h={name:d.Name};d.Comment&&(h.comment=d.Comment),d.Sheet!=null&&(h.localSheetId=""+d.Sheet),d.Hidden&&(h.hidden="1"),d.Ref&&(a[a.length]=writextag("definedName",escapexml(d.Ref),h))}),a[a.length]="</definedNames>"),a.length>2&&(a[a.length]="</workbook>",a[1]=a[1].replace("/>",">")),a.join("")}function parse_BrtBundleSh(o,a){var n={};return n.Hidden=o.read_shift(4),n.iTabID=o.read_shift(4),n.strRelID=parse_RelID(o),n.name=parse_XLWideString(o),n}function write_BrtBundleSh(o,a){return a||(a=new_buf(127)),a.write_shift(4,o.Hidden),a.write_shift(4,o.iTabID),write_RelID(o.strRelID,a),write_XLWideString(o.name.slice(0,31),a),a.length>a.l?a.slice(0,a.l):a}function parse_BrtWbProp(o,a){var n={},s=o.read_shift(4);n.defaultThemeVersion=o.read_shift(4);var l=a>8?parse_XLWideString(o):"";return l.length>0&&(n.CodeName=l),n.autoCompressPictures=!!(s&65536),n.backupFile=!!(s&64),n.checkCompatibility=!!(s&4096),n.date1904=!!(s&1),n.filterPrivacy=!!(s&8),n.hidePivotFieldList=!!(s&1024),n.promptedSolutions=!!(s&16),n.publishItems=!!(s&2048),n.refreshAllConnections=!!(s&262144),n.saveExternalLinkValues=!!(s&128),n.showBorderUnselectedTables=!!(s&4),n.showInkAnnotation=!!(s&32),n.showObjects=["all","placeholders","none"][s>>13&3],n.showPivotChartFilter=!!(s&32768),n.updateLinks=["userSet","never","always"][s>>8&3],n}function write_BrtWbProp(o,a){a||(a=new_buf(72));var n=0;return o&&o.filterPrivacy&&(n|=8),a.write_shift(4,n),a.write_shift(4,0),write_XLSBCodeName(o&&o.CodeName||"ThisWorkbook",a),a.slice(0,a.l)}function parse_BrtName(o,a,n){var s=o.l+a;o.l+=4,o.l+=1;var l=o.read_shift(4),c=parse_XLNameWideString(o),u=parse_XLSBNameParsedFormula(o,0,n),d=parse_XLNullableWideString(o);o.l=s;var h={Name:c,Ptg:u};return l<268435455&&(h.Sheet=l),d&&(h.Comment=d),h}function write_BUNDLESHS(o,a){write_record(o,143);for(var n=0;n!=a.SheetNames.length;++n){var s=a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[n]&&a.Workbook.Sheets[n].Hidden||0,l={Hidden:s,iTabID:n+1,strRelID:"rId"+(n+1),name:a.SheetNames[n]};write_record(o,156,write_BrtBundleSh(l))}write_record(o,144)}function write_BrtFileVersion(o,a){a||(a=new_buf(127));for(var n=0;n!=4;++n)a.write_shift(4,0);return write_XLWideString("SheetJS",a),write_XLWideString(XLSX.version,a),write_XLWideString(XLSX.version,a),write_XLWideString("7262",a),a.length>a.l?a.slice(0,a.l):a}function write_BrtBookView(o,a){a||(a=new_buf(29)),a.write_shift(-4,0),a.write_shift(-4,460),a.write_shift(4,28800),a.write_shift(4,17600),a.write_shift(4,500),a.write_shift(4,o),a.write_shift(4,o);var n=120;return a.write_shift(1,n),a.length>a.l?a.slice(0,a.l):a}function write_BOOKVIEWS(o,a){if(!(!a.Workbook||!a.Workbook.Sheets)){for(var n=a.Workbook.Sheets,s=0,l=-1,c=-1;s<n.length;++s)!n[s]||!n[s].Hidden&&l==-1?l=s:n[s].Hidden==1&&c==-1&&(c=s);c>l||(write_record(o,135),write_record(o,158,write_BrtBookView(l)),write_record(o,136))}}function write_wb_bin(o,a){var n=buf_array();return write_record(n,131),write_record(n,128,write_BrtFileVersion()),write_record(n,153,write_BrtWbProp(o.Workbook&&o.Workbook.WBProps||null)),write_BOOKVIEWS(n,o),write_BUNDLESHS(n,o),write_record(n,132),n.end()}function write_wb(o,a,n){return(a.slice(-4)===".bin"?write_wb_bin:write_wb_xml)(o)}function write_ws(o,a,n,s,l){return(a.slice(-4)===".bin"?write_ws_bin:write_ws_xml)(o,n,s,l)}function write_sty(o,a,n){return(a.slice(-4)===".bin"?write_sty_bin:write_sty_xml)(o,n)}function write_sst(o,a,n){return(a.slice(-4)===".bin"?write_sst_bin:write_sst_xml)(o,n)}function write_cmnt(o,a,n){return(a.slice(-4)===".bin"?write_comments_bin:write_comments_xml)(o)}function write_xlmeta(o){return(o.slice(-4)===".bin"?write_xlmeta_bin:write_xlmeta_xml)()}function write_props_xlml(o,a){var n=[];return o.Props&&n.push(xlml_write_docprops(o.Props,a)),o.Custprops&&n.push(xlml_write_custprops(o.Props,o.Custprops)),n.join("")}function write_wb_xlml(){return""}function write_sty_xlml(o,a){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return a.cellXfs.forEach(function(s,l){var c=[];c.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[s.numFmtId])}));var u={"ss:ID":"s"+(21+l)};n.push(writextag("Style",c.join(""),u))}),writextag("Styles",n.join(""))}function write_name_xlml(o){return writextag("NamedRange",null,{"ss:Name":o.Name,"ss:RefersTo":"="+a1_to_rc(o.Ref,{r:0,c:0})})}function write_names_xlml(o){if(!((o||{}).Workbook||{}).Names)return"";for(var a=o.Workbook.Names,n=[],s=0;s<a.length;++s){var l=a[s];l.Sheet==null&&(l.Name.match(/^_xlfn\./)||n.push(write_name_xlml(l)))}return writextag("Names",n.join(""))}function write_ws_xlml_names(o,a,n,s){if(!o||!((s||{}).Workbook||{}).Names)return"";for(var l=s.Workbook.Names,c=[],u=0;u<l.length;++u){var d=l[u];d.Sheet==n&&(d.Name.match(/^_xlfn\./)||c.push(write_name_xlml(d)))}return c.join("")}function write_ws_xlml_wsopts(o,a,n,s){if(!o)return"";var l=[];if(o["!margins"]&&(l.push("<PageSetup>"),o["!margins"].header&&l.push(writextag("Header",null,{"x:Margin":o["!margins"].header})),o["!margins"].footer&&l.push(writextag("Footer",null,{"x:Margin":o["!margins"].footer})),l.push(writextag("PageMargins",null,{"x:Bottom":o["!margins"].bottom||"0.75","x:Left":o["!margins"].left||"0.7","x:Right":o["!margins"].right||"0.7","x:Top":o["!margins"].top||"0.75"})),l.push("</PageSetup>")),s&&s.Workbook&&s.Workbook.Sheets&&s.Workbook.Sheets[n])if(s.Workbook.Sheets[n].Hidden)l.push(writextag("Visible",s.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<n&&!(s.Workbook.Sheets[c]&&!s.Workbook.Sheets[c].Hidden);++c);c==n&&l.push("<Selected/>")}return((((s||{}).Workbook||{}).Views||[])[0]||{}).RTL&&l.push("<DisplayRightToLeft/>"),o["!protect"]&&(l.push(writetag("ProtectContents","True")),o["!protect"].objects&&l.push(writetag("ProtectObjects","True")),o["!protect"].scenarios&&l.push(writetag("ProtectScenarios","True")),o["!protect"].selectLockedCells!=null&&!o["!protect"].selectLockedCells?l.push(writetag("EnableSelection","NoSelection")):o["!protect"].selectUnlockedCells!=null&&!o["!protect"].selectUnlockedCells&&l.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(u){o["!protect"][u[0]]&&l.push("<"+u[1]+"/>")})),l.length==0?"":writextag("WorksheetOptions",l.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(o){return o.map(function(a){var n=xlml_unfixstr(a.t||""),s=writextag("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",s,{"ss:Author":a.a})}).join("")}function write_ws_xlml_cell(o,a,n,s,l,c,u){if(!o||o.v==null&&o.f==null)return"";var d={};if(o.f&&(d["ss:Formula"]="="+escapexml(a1_to_rc(o.f,u))),o.F&&o.F.slice(0,a.length)==a){var h=decode_cell(o.F.slice(a.length+1));d["ss:ArrayRange"]="RC:R"+(h.r==u.r?"":"["+(h.r-u.r)+"]")+"C"+(h.c==u.c?"":"["+(h.c-u.c)+"]")}if(o.l&&o.l.Target&&(d["ss:HRef"]=escapexml(o.l.Target),o.l.Tooltip&&(d["x:HRefScreenTip"]=escapexml(o.l.Tooltip))),n["!merges"])for(var f=n["!merges"],p=0;p!=f.length;++p)f[p].s.c!=u.c||f[p].s.r!=u.r||(f[p].e.c>f[p].s.c&&(d["ss:MergeAcross"]=f[p].e.c-f[p].s.c),f[p].e.r>f[p].s.r&&(d["ss:MergeDown"]=f[p].e.r-f[p].s.r));var g="",v="";switch(o.t){case"z":if(!s.sheetStubs)return"";break;case"n":g="Number",v=String(o.v);break;case"b":g="Boolean",v=o.v?"1":"0";break;case"e":g="Error",v=BErr[o.v];break;case"d":g="DateTime",v=new Date(o.v).toISOString(),o.z==null&&(o.z=o.z||table_fmt[14]);break;case"s":g="String",v=escapexlml(o.v||"");break}var b=get_cell_style(s.cellXfs,o,s);d["ss:StyleID"]="s"+(21+b),d["ss:Index"]=u.c+1;var w=o.v!=null?v:"",x=o.t=="z"?"":'<Data ss:Type="'+g+'">'+w+"</Data>";return(o.c||[]).length>0&&(x+=write_ws_xlml_comment(o.c)),writextag("Cell",x,d)}function write_ws_xlml_row(o,a){var n='<Row ss:Index="'+(o+1)+'"';return a&&(a.hpt&&!a.hpx&&(a.hpx=pt2px(a.hpt)),a.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+a.hpx+'"'),a.hidden&&(n+=' ss:Hidden="1"')),n+">"}function write_ws_xlml_table(o,a,n,s){if(!o["!ref"])return"";var l=safe_decode_range(o["!ref"]),c=o["!merges"]||[],u=0,d=[];o["!cols"]&&o["!cols"].forEach(function(S,E){process_col(S);var T=!!S.width,C=col_obj_w(E,S),A={"ss:Index":E+1};T&&(A["ss:Width"]=width2px(C.width)),S.hidden&&(A["ss:Hidden"]="1"),d.push(writextag("Column",null,A))});for(var h=Array.isArray(o),f=l.s.r;f<=l.e.r;++f){for(var p=[write_ws_xlml_row(f,(o["!rows"]||[])[f])],g=l.s.c;g<=l.e.c;++g){var v=!1;for(u=0;u!=c.length;++u)if(!(c[u].s.c>g)&&!(c[u].s.r>f)&&!(c[u].e.c<g)&&!(c[u].e.r<f)){(c[u].s.c!=g||c[u].s.r!=f)&&(v=!0);break}if(!v){var b={r:f,c:g},w=encode_cell(b),x=h?(o[f]||[])[g]:o[w];p.push(write_ws_xlml_cell(x,w,o,a,n,s,b))}}p.push("</Row>"),p.length>2&&d.push(p.join(""))}return d.join("")}function write_ws_xlml(o,a,n){var s=[],l=n.SheetNames[o],c=n.Sheets[l],u=c?write_ws_xlml_names(c,a,o,n):"";return u.length>0&&s.push("<Names>"+u+"</Names>"),u=c?write_ws_xlml_table(c,a,o,n):"",u.length>0&&s.push("<Table>"+u+"</Table>"),s.push(write_ws_xlml_wsopts(c,a,o,n)),s.join("")}function write_xlml(o,a){a||(a={}),o.SSF||(o.SSF=dup(table_fmt)),o.SSF&&(make_ssf(),SSF_load_table(o.SSF),a.revssf=evert_num(o.SSF),a.revssf[o.SSF[65535]]=0,a.ssf=o.SSF,a.cellXfs=[],get_cell_style(a.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(write_props_xlml(o,a)),n.push(write_wb_xlml()),n.push(""),n.push("");for(var s=0;s<o.SheetNames.length;++s)n.push(writextag("Worksheet",write_ws_xlml(s,a,o),{"ss:Name":escapexml(o.SheetNames[s])}));return n[2]=write_sty_xlml(o,a),n[3]=write_names_xlml(o),XML_HEADER+writextag("Workbook",n.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function write_xls_props(o,a){var n=[],s=[],l=[],c=0,u,d=evert_key(DocSummaryPIDDSI,"n"),h=evert_key(SummaryPIDSI,"n");if(o.Props)for(u=keys(o.Props),c=0;c<u.length;++c)(Object.prototype.hasOwnProperty.call(d,u[c])?n:Object.prototype.hasOwnProperty.call(h,u[c])?s:l).push([u[c],o.Props[u[c]]]);if(o.Custprops)for(u=keys(o.Custprops),c=0;c<u.length;++c)Object.prototype.hasOwnProperty.call(o.Props||{},u[c])||(Object.prototype.hasOwnProperty.call(d,u[c])?n:Object.prototype.hasOwnProperty.call(h,u[c])?s:l).push([u[c],o.Custprops[u[c]]]);var f=[];for(c=0;c<l.length;++c)XLSPSSkip.indexOf(l[c][0])>-1||PseudoPropsPairs.indexOf(l[c][0])>-1||l[c][1]!=null&&f.push(l[c]);s.length&&CFB.utils.cfb_add(a,"/SummaryInformation",write_PropertySetStream(s,PSCLSID.SI,h,SummaryPIDSI)),(n.length||f.length)&&CFB.utils.cfb_add(a,"/DocumentSummaryInformation",write_PropertySetStream(n,PSCLSID.DSI,d,DocSummaryPIDDSI,f.length?f:null,PSCLSID.UDI))}function write_xlscfb(o,a){var n=a||{},s=CFB.utils.cfb_new({root:"R"}),l="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":l="/Workbook",n.biff=8;break;case"biff5":l="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return CFB.utils.cfb_add(s,l,write_biff_buf(o,n)),n.biff==8&&(o.Props||o.Custprops)&&write_xls_props(o,s),n.biff==8&&o.vbaraw&&fill_vba_xls(s,CFB.read(o.vbaraw,{type:typeof o.vbaraw=="string"?"binary":"buffer"})),s}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function write_biff_rec(o,a,n,s){var l=a;if(!isNaN(l)){var c=s||(n||[]).length||0,u=o.next(4);u.write_shift(2,l),u.write_shift(2,c),c>0&&is_buf(n)&&o.push(n)}}function write_biff_continue(o,a,n,s){var l=(n||[]).length||0;if(l<=8224)return write_biff_rec(o,a,n,l);var c=a;if(!isNaN(c)){for(var u=n.parts||[],d=0,h=0,f=0;f+(u[d]||8224)<=8224;)f+=u[d]||8224,d++;var p=o.next(4);for(p.write_shift(2,c),p.write_shift(2,f),o.push(n.slice(h,h+f)),h+=f;h<l;){for(p=o.next(4),p.write_shift(2,60),f=0;f+(u[d]||8224)<=8224;)f+=u[d]||8224,d++;p.write_shift(2,f),o.push(n.slice(h,h+f)),h+=f}}}function write_BIFF2Cell(o,a,n){return o||(o=new_buf(7)),o.write_shift(2,a),o.write_shift(2,n),o.write_shift(2,0),o.write_shift(1,0),o}function write_BIFF2BERR(o,a,n,s){var l=new_buf(9);return write_BIFF2Cell(l,o,a),write_Bes(n,s||"b",l),l}function write_BIFF2LABEL(o,a,n){var s=new_buf(8+2*n.length);return write_BIFF2Cell(s,o,a),s.write_shift(1,n.length),s.write_shift(n.length,n,"sbcs"),s.l<s.length?s.slice(0,s.l):s}function write_ws_biff2_cell(o,a,n,s){if(a.v!=null)switch(a.t){case"d":case"n":var l=a.t=="d"?datenum(parseDate(a.v)):a.v;l==(l|0)&&l>=0&&l<65536?write_biff_rec(o,2,write_BIFF2INT(n,s,l)):write_biff_rec(o,3,write_BIFF2NUM(n,s,l));return;case"b":case"e":write_biff_rec(o,5,write_BIFF2BERR(n,s,a.v,a.t));return;case"s":case"str":write_biff_rec(o,4,write_BIFF2LABEL(n,s,(a.v||"").slice(0,255)));return}write_biff_rec(o,1,write_BIFF2Cell(null,n,s))}function write_ws_biff2(o,a,n,s){var l=Array.isArray(a),c=safe_decode_range(a["!ref"]||"A1"),u,d="",h=[];if(c.e.c>255||c.e.r>16383){if(s.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383),u=encode_range(c)}for(var f=c.s.r;f<=c.e.r;++f){d=encode_row(f);for(var p=c.s.c;p<=c.e.c;++p){f===c.s.r&&(h[p]=encode_col(p)),u=h[p]+d;var g=l?(a[f]||[])[p]:a[u];g&&write_ws_biff2_cell(o,g,f,p)}}}function write_biff2_buf(o,a){for(var n=a||{},s=buf_array(),l=0,c=0;c<o.SheetNames.length;++c)o.SheetNames[c]==n.sheet&&(l=c);if(l==0&&n.sheet&&o.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return write_biff_rec(s,n.biff==4?1033:n.biff==3?521:9,write_BOF(o,16,n)),write_ws_biff2(s,o.Sheets[o.SheetNames[l]],l,n),write_biff_rec(s,10),s.end()}function write_FONTS_biff8(o,a,n){write_biff_rec(o,49,write_Font({sz:12,name:"Arial"},n))}function write_FMTS_biff8(o,a,n){a&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(s){for(var l=s[0];l<=s[1];++l)a[l]!=null&&write_biff_rec(o,1054,write_Format(l,a[l],n))})}function write_FEAT(o,a){var n=new_buf(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),write_biff_rec(o,2151,n),n=new_buf(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),write_Ref8U(safe_decode_range(a["!ref"]||"A1"),n),n.write_shift(4,4),write_biff_rec(o,2152,n)}function write_CELLXFS_biff8(o,a){for(var n=0;n<16;++n)write_biff_rec(o,224,write_XF({numFmtId:0,style:!0},0,a));a.cellXfs.forEach(function(s){write_biff_rec(o,224,write_XF(s,0,a))})}function write_ws_biff8_hlinks(o,a){for(var n=0;n<a["!links"].length;++n){var s=a["!links"][n];write_biff_rec(o,440,write_HLink(s)),s[1].Tooltip&&write_biff_rec(o,2048,write_HLinkTooltip(s))}delete a["!links"]}function write_ws_cols_biff8(o,a){if(a){var n=0;a.forEach(function(s,l){++n<=256&&s&&write_biff_rec(o,125,write_ColInfo(col_obj_w(l,s),l))})}}function write_ws_biff8_cell(o,a,n,s,l){var c=16+get_cell_style(l.cellXfs,a,l);if(a.v==null&&!a.bf){write_biff_rec(o,513,write_XLSCell(n,s,c));return}if(a.bf)write_biff_rec(o,6,write_Formula(a,n,s,l,c));else switch(a.t){case"d":case"n":var u=a.t=="d"?datenum(parseDate(a.v)):a.v;write_biff_rec(o,515,write_Number(n,s,u,c));break;case"b":case"e":write_biff_rec(o,517,write_BoolErr(n,s,a.v,c,l,a.t));break;case"s":case"str":if(l.bookSST){var d=get_sst_id(l.Strings,a.v,l.revStrings);write_biff_rec(o,253,write_LabelSst(n,s,d,c))}else write_biff_rec(o,516,write_Label(n,s,(a.v||"").slice(0,255),c,l));break;default:write_biff_rec(o,513,write_XLSCell(n,s,c))}}function write_ws_biff8(o,a,n){var s=buf_array(),l=n.SheetNames[o],c=n.Sheets[l]||{},u=(n||{}).Workbook||{},d=(u.Sheets||[])[o]||{},h=Array.isArray(c),f=a.biff==8,p,g="",v=[],b=safe_decode_range(c["!ref"]||"A1"),w=f?65536:16384;if(b.e.c>255||b.e.r>=w){if(a.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");b.e.c=Math.min(b.e.c,255),b.e.r=Math.min(b.e.c,w-1)}write_biff_rec(s,2057,write_BOF(n,16,a)),write_biff_rec(s,13,writeuint16(1)),write_biff_rec(s,12,writeuint16(100)),write_biff_rec(s,15,writebool(!0)),write_biff_rec(s,17,writebool(!1)),write_biff_rec(s,16,write_Xnum(.001)),write_biff_rec(s,95,writebool(!0)),write_biff_rec(s,42,writebool(!1)),write_biff_rec(s,43,writebool(!1)),write_biff_rec(s,130,writeuint16(1)),write_biff_rec(s,128,write_Guts()),write_biff_rec(s,131,writebool(!1)),write_biff_rec(s,132,writebool(!1)),f&&write_ws_cols_biff8(s,c["!cols"]),write_biff_rec(s,512,write_Dimensions(b,a)),f&&(c["!links"]=[]);for(var x=b.s.r;x<=b.e.r;++x){g=encode_row(x);for(var S=b.s.c;S<=b.e.c;++S){x===b.s.r&&(v[S]=encode_col(S)),p=v[S]+g;var E=h?(c[x]||[])[S]:c[p];E&&(write_ws_biff8_cell(s,E,x,S,a),f&&E.l&&c["!links"].push([p,E.l]))}}var T=d.CodeName||d.name||l;return f&&write_biff_rec(s,574,write_Window2((u.Views||[])[0])),f&&(c["!merges"]||[]).length&&write_biff_rec(s,229,write_MergeCells(c["!merges"])),f&&write_ws_biff8_hlinks(s,c),write_biff_rec(s,442,write_XLUnicodeString(T)),f&&write_FEAT(s,c),write_biff_rec(s,10),s.end()}function write_biff8_global(o,a,n){var s=buf_array(),l=(o||{}).Workbook||{},c=l.Sheets||[],u=l.WBProps||{},d=n.biff==8,h=n.biff==5;if(write_biff_rec(s,2057,write_BOF(o,5,n)),n.bookType=="xla"&&write_biff_rec(s,135),write_biff_rec(s,225,d?writeuint16(1200):null),write_biff_rec(s,193,writezeroes(2)),h&&write_biff_rec(s,191),h&&write_biff_rec(s,192),write_biff_rec(s,226),write_biff_rec(s,92,write_WriteAccess("SheetJS",n)),write_biff_rec(s,66,writeuint16(d?1200:1252)),d&&write_biff_rec(s,353,writeuint16(0)),d&&write_biff_rec(s,448),write_biff_rec(s,317,write_RRTabId(o.SheetNames.length)),d&&o.vbaraw&&write_biff_rec(s,211),d&&o.vbaraw){var f=u.CodeName||"ThisWorkbook";write_biff_rec(s,442,write_XLUnicodeString(f))}write_biff_rec(s,156,writeuint16(17)),write_biff_rec(s,25,writebool(!1)),write_biff_rec(s,18,writebool(!1)),write_biff_rec(s,19,writeuint16(0)),d&&write_biff_rec(s,431,writebool(!1)),d&&write_biff_rec(s,444,writeuint16(0)),write_biff_rec(s,61,write_Window1()),write_biff_rec(s,64,writebool(!1)),write_biff_rec(s,141,writeuint16(0)),write_biff_rec(s,34,writebool(safe1904(o)=="true")),write_biff_rec(s,14,writebool(!0)),d&&write_biff_rec(s,439,writebool(!1)),write_biff_rec(s,218,writeuint16(0)),write_FONTS_biff8(s,o,n),write_FMTS_biff8(s,o.SSF,n),write_CELLXFS_biff8(s,n),d&&write_biff_rec(s,352,writebool(!1));var p=s.end(),g=buf_array();d&&write_biff_rec(g,140,write_Country()),d&&n.Strings&&write_biff_continue(g,252,write_SST(n.Strings)),write_biff_rec(g,10);var v=g.end(),b=buf_array(),w=0,x=0;for(x=0;x<o.SheetNames.length;++x)w+=(d?12:11)+(d?2:1)*o.SheetNames[x].length;var S=p.length+w+v.length;for(x=0;x<o.SheetNames.length;++x){var E=c[x]||{};write_biff_rec(b,133,write_BoundSheet8({pos:S,hs:E.Hidden||0,dt:0,name:o.SheetNames[x]},n)),S+=a[x].length}var T=b.end();if(w!=T.length)throw new Error("BS8 "+w+" != "+T.length);var C=[];return p.length&&C.push(p),T.length&&C.push(T),v.length&&C.push(v),bconcat(C)}function write_biff8_buf(o,a){var n=a||{},s=[];o&&!o.SSF&&(o.SSF=dup(table_fmt)),o&&o.SSF&&(make_ssf(),SSF_load_table(o.SSF),n.revssf=evert_num(o.SSF),n.revssf[o.SSF[65535]]=0,n.ssf=o.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,fix_write_opts(n),n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),o.Props||(o.Props={});for(var l=0;l<o.SheetNames.length;++l)s[s.length]=write_ws_biff8(l,n,o);return s.unshift(write_biff8_global(o,s,n)),bconcat(s)}function write_biff_buf(o,a){for(var n=0;n<=o.SheetNames.length;++n){var s=o.Sheets[o.SheetNames[n]];if(!(!s||!s["!ref"])){var l=decode_range(s["!ref"]);l.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+o.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var c=a||{};switch(c.biff||2){case 8:case 5:return write_biff8_buf(o,a);case 4:case 3:case 2:return write_biff2_buf(o,a)}throw new Error("invalid type "+c.bookType+" for BIFF")}function make_html_row(o,a,n,s){for(var l=o["!merges"]||[],c=[],u=a.s.c;u<=a.e.c;++u){for(var d=0,h=0,f=0;f<l.length;++f)if(!(l[f].s.r>n||l[f].s.c>u)&&!(l[f].e.r<n||l[f].e.c<u)){if(l[f].s.r<n||l[f].s.c<u){d=-1;break}d=l[f].e.r-l[f].s.r+1,h=l[f].e.c-l[f].s.c+1;break}if(!(d<0)){var p=encode_cell({r:n,c:u}),g=s.dense?(o[n]||[])[u]:o[p],v=g&&g.v!=null&&(g.h||escapehtml(g.w||(format_cell(g),g.w)||""))||"",b={};d>1&&(b.rowspan=d),h>1&&(b.colspan=h),s.editable?v='<span contenteditable="true">'+v+"</span>":g&&(b["data-t"]=g&&g.t||"z",g.v!=null&&(b["data-v"]=g.v),g.z!=null&&(b["data-z"]=g.z),g.l&&(g.l.Target||"#").charAt(0)!="#"&&(v='<a href="'+g.l.Target+'">'+v+"</a>")),b.id=(s.id||"sjs")+"-"+p,c.push(writextag("td",v,b))}}var w="<tr>";return w+c.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function make_html_preamble(o,a,n){var s=[];return s.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function sheet_to_html(o,a){var n=a||{},s=n.header!=null?n.header:HTML_BEGIN,l=n.footer!=null?n.footer:HTML_END,c=[s],u=decode_range(o["!ref"]);n.dense=Array.isArray(o),c.push(make_html_preamble(o,u,n));for(var d=u.s.r;d<=u.e.r;++d)c.push(make_html_row(o,u,d,n));return c.push("</table>"+l),c.join("")}function sheet_add_dom(o,a,n){var s=n||{},l=0,c=0;if(s.origin!=null)if(typeof s.origin=="number")l=s.origin;else{var u=typeof s.origin=="string"?decode_cell(s.origin):s.origin;l=u.r,c=u.c}var d=a.getElementsByTagName("tr"),h=Math.min(s.sheetRows||1e7,d.length),f={s:{r:0,c:0},e:{r:l,c}};if(o["!ref"]){var p=decode_range(o["!ref"]);f.s.r=Math.min(f.s.r,p.s.r),f.s.c=Math.min(f.s.c,p.s.c),f.e.r=Math.max(f.e.r,p.e.r),f.e.c=Math.max(f.e.c,p.e.c),l==-1&&(f.e.r=l=p.e.r+1)}var g=[],v=0,b=o["!rows"]||(o["!rows"]=[]),w=0,x=0,S=0,E=0,T=0,C=0;for(o["!cols"]||(o["!cols"]=[]);w<d.length&&x<h;++w){var A=d[w];if(is_dom_element_hidden(A)){if(s.display)continue;b[x]={hidden:!0}}var R=A.children;for(S=E=0;S<R.length;++S){var j=R[S];if(!(s.display&&is_dom_element_hidden(j))){var D=j.hasAttribute("data-v")?j.getAttribute("data-v"):j.hasAttribute("v")?j.getAttribute("v"):htmldecode(j.innerHTML),O=j.getAttribute("data-z")||j.getAttribute("z");for(v=0;v<g.length;++v){var H=g[v];H.s.c==E+c&&H.s.r<x+l&&x+l<=H.e.r&&(E=H.e.c+1-c,v=-1)}C=+j.getAttribute("colspan")||1,((T=+j.getAttribute("rowspan")||1)>1||C>1)&&g.push({s:{r:x+l,c:E+c},e:{r:x+l+(T||1)-1,c:E+c+(C||1)-1}});var q={t:"s",v:D},Y=j.getAttribute("data-t")||j.getAttribute("t")||"";D!=null&&(D.length==0?q.t=Y||"z":s.raw||D.trim().length==0||Y=="s"||(D==="TRUE"?q={t:"b",v:!0}:D==="FALSE"?q={t:"b",v:!1}:isNaN(fuzzynum(D))?isNaN(fuzzydate(D).getDate())||(q={t:"d",v:parseDate(D)},s.cellDates||(q={t:"n",v:datenum(q.v)}),q.z=s.dateNF||table_fmt[14]):q={t:"n",v:fuzzynum(D)})),q.z===void 0&&O!=null&&(q.z=O);var te="",ee=j.getElementsByTagName("A");if(ee&&ee.length)for(var re=0;re<ee.length&&!(ee[re].hasAttribute("href")&&(te=ee[re].getAttribute("href"),te.charAt(0)!="#"));++re);te&&te.charAt(0)!="#"&&(q.l={Target:te}),s.dense?(o[x+l]||(o[x+l]=[]),o[x+l][E+c]=q):o[encode_cell({c:E+c,r:x+l})]=q,f.e.c<E+c&&(f.e.c=E+c),E+=C}}++x}return g.length&&(o["!merges"]=(o["!merges"]||[]).concat(g)),f.e.r=Math.max(f.e.r,x-1+l),o["!ref"]=encode_range(f),x>=h&&(o["!fullref"]=encode_range((f.e.r=d.length-w+x-1+l,f))),o}function parse_dom_table(o,a){var n=a||{},s=n.dense?[]:{};return sheet_add_dom(s,o,a)}function table_to_book(o,a){return sheet_to_workbook(parse_dom_table(o,a),a)}function is_dom_element_hidden(o){var a="",n=get_get_computed_style_function(o);return n&&(a=n(o).getPropertyValue("display")),a||(a=o.style&&o.style.display),a==="none"}function get_get_computed_style_function(o){return o.ownerDocument.defaultView&&typeof o.ownerDocument.defaultView.getComputedStyle=="function"?o.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var write_styles_ods=function(){var o=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),a="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+o+"</office:document-styles>";return function(){return XML_HEADER+a}}(),write_content_ods=function(){var o=function(c){return escapexml(c).replace(/  +/g,function(u){return'<text:s text:c="'+u.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},a=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,s=function(c,u,d){var h=[];h.push('      <table:table table:name="'+escapexml(u.SheetNames[d])+`" table:style-name="ta1">
`);var f=0,p=0,g=decode_range(c["!ref"]||"A1"),v=c["!merges"]||[],b=0,w=Array.isArray(c);if(c["!cols"])for(p=0;p<=g.e.c;++p)h.push("        <table:table-column"+(c["!cols"][p]?' table:style-name="co'+c["!cols"][p].ods+'"':"")+`></table:table-column>
`);var x="",S=c["!rows"]||[];for(f=0;f<g.s.r;++f)x=S[f]?' table:style-name="ro'+S[f].ods+'"':"",h.push("        <table:table-row"+x+`></table:table-row>
`);for(;f<=g.e.r;++f){for(x=S[f]?' table:style-name="ro'+S[f].ods+'"':"",h.push("        <table:table-row"+x+`>
`),p=0;p<g.s.c;++p)h.push(a);for(;p<=g.e.c;++p){var E=!1,T={},C="";for(b=0;b!=v.length;++b)if(!(v[b].s.c>p)&&!(v[b].s.r>f)&&!(v[b].e.c<p)&&!(v[b].e.r<f)){(v[b].s.c!=p||v[b].s.r!=f)&&(E=!0),T["table:number-columns-spanned"]=v[b].e.c-v[b].s.c+1,T["table:number-rows-spanned"]=v[b].e.r-v[b].s.r+1;break}if(E){h.push(n);continue}var A=encode_cell({r:f,c:p}),R=w?(c[f]||[])[p]:c[A];if(R&&R.f&&(T["table:formula"]=escapexml(csf_to_ods_formula(R.f)),R.F&&R.F.slice(0,A.length)==A)){var j=decode_range(R.F);T["table:number-matrix-columns-spanned"]=j.e.c-j.s.c+1,T["table:number-matrix-rows-spanned"]=j.e.r-j.s.r+1}if(!R){h.push(a);continue}switch(R.t){case"b":C=R.v?"TRUE":"FALSE",T["office:value-type"]="boolean",T["office:boolean-value"]=R.v?"true":"false";break;case"n":C=R.w||String(R.v||0),T["office:value-type"]="float",T["office:value"]=R.v||0;break;case"s":case"str":C=R.v==null?"":R.v,T["office:value-type"]="string";break;case"d":C=R.w||parseDate(R.v).toISOString(),T["office:value-type"]="date",T["office:date-value"]=parseDate(R.v).toISOString(),T["table:style-name"]="ce1";break;default:h.push(a);continue}var D=o(C);if(R.l&&R.l.Target){var O=R.l.Target;O=O.charAt(0)=="#"?"#"+csf_to_ods_3D(O.slice(1)):O,O.charAt(0)!="#"&&!O.match(/^\w+:/)&&(O="../"+O),D=writextag("text:a",D,{"xlink:href":O.replace(/&/g,"&amp;")})}h.push("          "+writextag("table:table-cell",writextag("text:p",D,{}),T)+`
`)}h.push(`        </table:table-row>
`)}return h.push(`      </table:table>
`),h.join("")},l=function(c,u){c.push(` <office:automatic-styles>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var d=0;u.SheetNames.map(function(f){return u.Sheets[f]}).forEach(function(f){if(f&&f["!cols"]){for(var p=0;p<f["!cols"].length;++p)if(f["!cols"][p]){var g=f["!cols"][p];if(g.width==null&&g.wpx==null&&g.wch==null)continue;process_col(g),g.ods=d;var v=f["!cols"][p].wpx+"px";c.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+v+`"/>
`),c.push(`  </style:style>
`),++d}}});var h=0;u.SheetNames.map(function(f){return u.Sheets[f]}).forEach(function(f){if(f&&f["!rows"]){for(var p=0;p<f["!rows"].length;++p)if(f["!rows"][p]){f["!rows"][p].ods=h;var g=f["!rows"][p].hpx+"px";c.push('  <style:style style:name="ro'+h+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+g+`"/>
`),c.push(`  </style:style>
`),++h}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),c.push(` </office:automatic-styles>
`)};return function(u,d){var h=[XML_HEADER],f=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),p=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(h.push("<office:document"+f+p+`>
`),h.push(write_meta_ods().replace(/office:document-meta/g,"office:meta"))):h.push("<office:document-content"+f+`>
`),l(h,u),h.push(`  <office:body>
`),h.push(`    <office:spreadsheet>
`);for(var g=0;g!=u.SheetNames.length;++g)h.push(s(u.Sheets[u.SheetNames[g]],u,g));return h.push(`    </office:spreadsheet>
`),h.push(`  </office:body>
`),d.bookType=="fods"?h.push("</office:document>"):h.push("</office:document-content>"),h.join("")}}();function write_ods(o,a){if(a.bookType=="fods")return write_content_ods(o,a);var n=zip_new(),s="",l=[],c=[];return s="mimetype",zip_add_file(n,s,"application/vnd.oasis.opendocument.spreadsheet"),s="content.xml",zip_add_file(n,s,write_content_ods(o,a)),l.push([s,"text/xml"]),c.push([s,"ContentFile"]),s="styles.xml",zip_add_file(n,s,write_styles_ods(o,a)),l.push([s,"text/xml"]),c.push([s,"StylesFile"]),s="meta.xml",zip_add_file(n,s,XML_HEADER+write_meta_ods()),l.push([s,"text/xml"]),c.push([s,"MetadataFile"]),s="manifest.rdf",zip_add_file(n,s,write_rdf(c)),l.push([s,"application/rdf+xml"]),s="META-INF/manifest.xml",zip_add_file(n,s,write_manifest(l)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function u8_to_dataview(o){return new DataView(o.buffer,o.byteOffset,o.byteLength)}function stru8(o){return typeof TextEncoder<"u"?new TextEncoder().encode(o):s2a(utf8write(o))}function u8contains(o,a){e:for(var n=0;n<=o.length-a.length;++n){for(var s=0;s<a.length;++s)if(o[n+s]!=a[s])continue e;return!0}return!1}function u8concat(o){var a=o.reduce(function(l,c){return l+c.length},0),n=new Uint8Array(a),s=0;return o.forEach(function(l){n.set(l,s),s+=l.length}),n}function writeDecimal128LE(o,a,n){var s=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-20,l=n/Math.pow(10,s-6176);o[a+15]|=s>>7,o[a+14]|=(s&127)<<1;for(var c=0;l>=1;++c,l/=256)o[a+c]=l&255;o[a+15]|=n>=0?0:128}function parse_varint49(o,a){var n=a?a[0]:0,s=o[n]&127;e:if(o[n++]>=128&&(s|=(o[n]&127)<<7,o[n++]<128||(s|=(o[n]&127)<<14,o[n++]<128)||(s|=(o[n]&127)<<21,o[n++]<128)||(s+=(o[n]&127)*Math.pow(2,28),++n,o[n++]<128)||(s+=(o[n]&127)*Math.pow(2,35),++n,o[n++]<128)||(s+=(o[n]&127)*Math.pow(2,42),++n,o[n++]<128)))break e;return a&&(a[0]=n),s}function write_varint49(o){var a=new Uint8Array(7);a[0]=o&127;var n=1;e:if(o>127){if(a[n-1]|=128,a[n]=o>>7&127,++n,o<=16383||(a[n-1]|=128,a[n]=o>>14&127,++n,o<=2097151)||(a[n-1]|=128,a[n]=o>>21&127,++n,o<=268435455)||(a[n-1]|=128,a[n]=o/256>>>21&127,++n,o<=34359738367)||(a[n-1]|=128,a[n]=o/65536>>>21&127,++n,o<=4398046511103))break e;a[n-1]|=128,a[n]=o/16777216>>>21&127,++n}return a.slice(0,n)}function varint_to_i32(o){var a=0,n=o[a]&127;e:if(o[a++]>=128){if(n|=(o[a]&127)<<7,o[a++]<128||(n|=(o[a]&127)<<14,o[a++]<128)||(n|=(o[a]&127)<<21,o[a++]<128))break e;n|=(o[a]&127)<<28}return n}function parse_shallow(o){for(var a=[],n=[0];n[0]<o.length;){var s=n[0],l=parse_varint49(o,n),c=l&7;l=Math.floor(l/8);var u=0,d;if(l==0)break;switch(c){case 0:{for(var h=n[0];o[n[0]++]>=128;);d=o.slice(h,n[0])}break;case 5:u=4,d=o.slice(n[0],n[0]+u),n[0]+=u;break;case 1:u=8,d=o.slice(n[0],n[0]+u),n[0]+=u;break;case 2:u=parse_varint49(o,n),d=o.slice(n[0],n[0]+u),n[0]+=u;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(l," at offset ").concat(s))}var f={data:d,type:c};a[l]==null?a[l]=[f]:a[l].push(f)}return a}function write_shallow(o){var a=[];return o.forEach(function(n,s){n.forEach(function(l){l.data&&(a.push(write_varint49(s*8+l.type)),l.type==2&&a.push(write_varint49(l.data.length)),a.push(l.data))})}),u8concat(a)}function parse_iwa_file(o){for(var a,n=[],s=[0];s[0]<o.length;){var l=parse_varint49(o,s),c=parse_shallow(o.slice(s[0],s[0]+l));s[0]+=l;var u={id:varint_to_i32(c[1][0].data),messages:[]};c[2].forEach(function(d){var h=parse_shallow(d.data),f=varint_to_i32(h[3][0].data);u.messages.push({meta:h,data:o.slice(s[0],s[0]+f)}),s[0]+=f}),(a=c[3])!=null&&a[0]&&(u.merge=varint_to_i32(c[3][0].data)>>>0>0),n.push(u)}return n}function write_iwa_file(o){var a=[];return o.forEach(function(n){var s=[];s[1]=[{data:write_varint49(n.id),type:0}],s[2]=[],n.merge!=null&&(s[3]=[{data:write_varint49(+!!n.merge),type:0}]);var l=[];n.messages.forEach(function(u){l.push(u.data),u.meta[3]=[{type:0,data:write_varint49(u.data.length)}],s[2].push({data:write_shallow(u.meta),type:2})});var c=write_shallow(s);a.push(write_varint49(c.length)),a.push(c),l.forEach(function(u){return a.push(u)})}),u8concat(a)}function parse_snappy_chunk(o,a){if(o!=0)throw new Error("Unexpected Snappy chunk type ".concat(o));for(var n=[0],s=parse_varint49(a,n),l=[];n[0]<a.length;){var c=a[n[0]]&3;if(c==0){var u=a[n[0]++]>>2;if(u<60)++u;else{var d=u-59;u=a[n[0]],d>1&&(u|=a[n[0]+1]<<8),d>2&&(u|=a[n[0]+2]<<16),d>3&&(u|=a[n[0]+3]<<24),u>>>=0,u++,n[0]+=d}l.push(a.slice(n[0],n[0]+u)),n[0]+=u;continue}else{var h=0,f=0;if(c==1?(f=(a[n[0]]>>2&7)+4,h=(a[n[0]++]&224)<<3,h|=a[n[0]++]):(f=(a[n[0]++]>>2)+1,c==2?(h=a[n[0]]|a[n[0]+1]<<8,n[0]+=2):(h=(a[n[0]]|a[n[0]+1]<<8|a[n[0]+2]<<16|a[n[0]+3]<<24)>>>0,n[0]+=4)),l=[u8concat(l)],h==0)throw new Error("Invalid offset 0");if(h>l[0].length)throw new Error("Invalid offset beyond length");if(f>=h)for(l.push(l[0].slice(-h)),f-=h;f>=l[l.length-1].length;)l.push(l[l.length-1]),f-=l[l.length-1].length;l.push(l[0].slice(-h,-h+f))}}var p=u8concat(l);if(p.length!=s)throw new Error("Unexpected length: ".concat(p.length," != ").concat(s));return p}function decompress_iwa_file(o){for(var a=[],n=0;n<o.length;){var s=o[n++],l=o[n]|o[n+1]<<8|o[n+2]<<16;n+=3,a.push(parse_snappy_chunk(s,o.slice(n,n+l))),n+=l}if(n!==o.length)throw new Error("data is not a valid framed stream!");return u8concat(a)}function compress_iwa_file(o){for(var a=[],n=0;n<o.length;){var s=Math.min(o.length-n,268435455),l=new Uint8Array(4);a.push(l);var c=write_varint49(s),u=c.length;a.push(c),s<=60?(u++,a.push(new Uint8Array([s-1<<2]))):s<=256?(u+=2,a.push(new Uint8Array([240,s-1&255]))):s<=65536?(u+=3,a.push(new Uint8Array([244,s-1&255,s-1>>8&255]))):s<=16777216?(u+=4,a.push(new Uint8Array([248,s-1&255,s-1>>8&255,s-1>>16&255]))):s<=4294967296&&(u+=5,a.push(new Uint8Array([252,s-1&255,s-1>>8&255,s-1>>16&255,s-1>>>24&255]))),a.push(o.slice(n,n+s)),u+=s,l[0]=0,l[1]=u&255,l[2]=u>>8&255,l[3]=u>>16&255,n+=s}return u8concat(a)}function write_new_storage(o,a){var n=new Uint8Array(32),s=u8_to_dataview(n),l=12,c=0;switch(n[0]=5,o.t){case"n":n[1]=2,writeDecimal128LE(n,l,o.v),c|=1,l+=16;break;case"b":n[1]=6,s.setFloat64(l,o.v?1:0,!0),c|=2,l+=8;break;case"s":if(a.indexOf(o.v)==-1)throw new Error("Value ".concat(o.v," missing from SST!"));n[1]=3,s.setUint32(l,a.indexOf(o.v),!0),c|=8,l+=4;break;default:throw"unsupported cell type "+o.t}return s.setUint32(8,c,!0),n.slice(0,l)}function write_old_storage(o,a){var n=new Uint8Array(32),s=u8_to_dataview(n),l=12,c=0;switch(n[0]=3,o.t){case"n":n[2]=2,s.setFloat64(l,o.v,!0),c|=32,l+=8;break;case"b":n[2]=6,s.setFloat64(l,o.v?1:0,!0),c|=32,l+=8;break;case"s":if(a.indexOf(o.v)==-1)throw new Error("Value ".concat(o.v," missing from SST!"));n[2]=3,s.setUint32(l,a.indexOf(o.v),!0),c|=16,l+=4;break;default:throw"unsupported cell type "+o.t}return s.setUint32(4,c,!0),n.slice(0,l)}function parse_TSP_Reference(o){var a=parse_shallow(o);return parse_varint49(a[1][0].data)}function write_tile_row(o,a,n){var s,l,c,u;if(!((s=o[6])!=null&&s[0])||!((l=o[7])!=null&&l[0]))throw"Mutation only works on post-BNC storages!";var d=((u=(c=o[8])==null?void 0:c[0])==null?void 0:u.data)&&varint_to_i32(o[8][0].data)>0||!1;if(d)throw"Math only works with normal offsets";for(var h=0,f=u8_to_dataview(o[7][0].data),p=0,g=[],v=u8_to_dataview(o[4][0].data),b=0,w=[],x=0;x<a.length;++x){if(a[x]==null){f.setUint16(x*2,65535,!0),v.setUint16(x*2,65535);continue}f.setUint16(x*2,p,!0),v.setUint16(x*2,b,!0);var S,E;switch(typeof a[x]){case"string":S=write_new_storage({t:"s",v:a[x]},n),E=write_old_storage({t:"s",v:a[x]},n);break;case"number":S=write_new_storage({t:"n",v:a[x]},n),E=write_old_storage({t:"n",v:a[x]},n);break;case"boolean":S=write_new_storage({t:"b",v:a[x]},n),E=write_old_storage({t:"b",v:a[x]},n);break;default:throw new Error("Unsupported value "+a[x])}g.push(S),p+=S.length,w.push(E),b+=E.length,++h}for(o[2][0].data=write_varint49(h);x<o[7][0].data.length/2;++x)f.setUint16(x*2,65535,!0),v.setUint16(x*2,65535,!0);return o[6][0].data=u8concat(g),o[3][0].data=u8concat(w),h}function write_numbers_iwa(o,a){if(!a||!a.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=o.Sheets[o.SheetNames[0]];o.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var s=decode_range(n["!ref"]);s.s.r=s.s.c=0;var l=!1;s.e.c>9&&(l=!0,s.e.c=9),s.e.r>49&&(l=!0,s.e.r=49),l&&console.error("The Numbers writer is currently limited to ".concat(encode_range(s)));var c=sheet_to_json(n,{range:s,header:1}),u=["~Sh33tJ5~"];c.forEach(function(se){return se.forEach(function(de){typeof de=="string"&&u.push(de)})});var d={},h=[],f=CFB.read(a.numbers,{type:"base64"});f.FileIndex.map(function(se,de){return[se,f.FullPaths[de]]}).forEach(function(se){var de=se[0],le=se[1];if(de.type==2&&de.name.match(/\.iwa/)){var ge=de.content,Re=decompress_iwa_file(ge),we=parse_iwa_file(Re);we.forEach(function(Se){h.push(Se.id),d[Se.id]={deps:[],location:le,type:varint_to_i32(Se.messages[0].meta[1][0].data)}})}}),h.sort(function(se,de){return se-de});var p=h.filter(function(se){return se>1}).map(function(se){return[se,write_varint49(se)]});f.FileIndex.map(function(se,de){return[se,f.FullPaths[de]]}).forEach(function(se){var de=se[0];if(se[1],!!de.name.match(/\.iwa/)){var le=parse_iwa_file(decompress_iwa_file(de.content));le.forEach(function(ge){ge.messages.forEach(function(Re){p.forEach(function(we){ge.messages.some(function(Se){return varint_to_i32(Se.meta[1][0].data)!=11006&&u8contains(Se.data,we[1])})&&d[we[0]].deps.push(ge.id)})})})}});for(var g=CFB.find(f,d[1].location),v=parse_iwa_file(decompress_iwa_file(g.content)),b,w=0;w<v.length;++w){var x=v[w];x.id==1&&(b=x)}var S=parse_TSP_Reference(parse_shallow(b.messages[0].data)[1][0].data);for(g=CFB.find(f,d[S].location),v=parse_iwa_file(decompress_iwa_file(g.content)),w=0;w<v.length;++w)x=v[w],x.id==S&&(b=x);for(S=parse_TSP_Reference(parse_shallow(b.messages[0].data)[2][0].data),g=CFB.find(f,d[S].location),v=parse_iwa_file(decompress_iwa_file(g.content)),w=0;w<v.length;++w)x=v[w],x.id==S&&(b=x);for(S=parse_TSP_Reference(parse_shallow(b.messages[0].data)[2][0].data),g=CFB.find(f,d[S].location),v=parse_iwa_file(decompress_iwa_file(g.content)),w=0;w<v.length;++w)x=v[w],x.id==S&&(b=x);var E=parse_shallow(b.messages[0].data);{E[6][0].data=write_varint49(s.e.r+1),E[7][0].data=write_varint49(s.e.c+1);var T=parse_TSP_Reference(E[46][0].data),C=CFB.find(f,d[T].location),A=parse_iwa_file(decompress_iwa_file(C.content));{for(var R=0;R<A.length&&A[R].id!=T;++R);if(A[R].id!=T)throw"Bad ColumnRowUIDMapArchive";var j=parse_shallow(A[R].messages[0].data);j[1]=[],j[2]=[],j[3]=[];for(var D=0;D<=s.e.c;++D){var O=[];O[1]=O[2]=[{type:0,data:write_varint49(D+420690)}],j[1].push({type:2,data:write_shallow(O)}),j[2].push({type:0,data:write_varint49(D)}),j[3].push({type:0,data:write_varint49(D)})}j[4]=[],j[5]=[],j[6]=[];for(var H=0;H<=s.e.r;++H)O=[],O[1]=O[2]=[{type:0,data:write_varint49(H+726270)}],j[4].push({type:2,data:write_shallow(O)}),j[5].push({type:0,data:write_varint49(H)}),j[6].push({type:0,data:write_varint49(H)});A[R].messages[0].data=write_shallow(j)}C.content=compress_iwa_file(write_iwa_file(A)),C.size=C.content.length,delete E[46];var q=parse_shallow(E[4][0].data);{q[7][0].data=write_varint49(s.e.r+1);var Y=parse_shallow(q[1][0].data),te=parse_TSP_Reference(Y[2][0].data);C=CFB.find(f,d[te].location),A=parse_iwa_file(decompress_iwa_file(C.content));{if(A[0].id!=te)throw"Bad HeaderStorageBucket";var ee=parse_shallow(A[0].messages[0].data);for(H=0;H<c.length;++H){var re=parse_shallow(ee[2][0].data);re[1][0].data=write_varint49(H),re[4][0].data=write_varint49(c[H].length),ee[2][H]={type:ee[2][0].type,data:write_shallow(re)}}A[0].messages[0].data=write_shallow(ee)}C.content=compress_iwa_file(write_iwa_file(A)),C.size=C.content.length;var ne=parse_TSP_Reference(q[2][0].data);C=CFB.find(f,d[ne].location),A=parse_iwa_file(decompress_iwa_file(C.content));{if(A[0].id!=ne)throw"Bad HeaderStorageBucket";for(ee=parse_shallow(A[0].messages[0].data),D=0;D<=s.e.c;++D)re=parse_shallow(ee[2][0].data),re[1][0].data=write_varint49(D),re[4][0].data=write_varint49(s.e.r+1),ee[2][D]={type:ee[2][0].type,data:write_shallow(re)};A[0].messages[0].data=write_shallow(ee)}C.content=compress_iwa_file(write_iwa_file(A)),C.size=C.content.length;var ce=parse_TSP_Reference(q[4][0].data);(function(){for(var se=CFB.find(f,d[ce].location),de=parse_iwa_file(decompress_iwa_file(se.content)),le,ge=0;ge<de.length;++ge){var Re=de[ge];Re.id==ce&&(le=Re)}var we=parse_shallow(le.messages[0].data);{we[3]=[];var Se=[];u.forEach(function(Ie,He){Se[1]=[{type:0,data:write_varint49(He)}],Se[2]=[{type:0,data:write_varint49(1)}],Se[3]=[{type:2,data:stru8(Ie)}],we[3].push({type:2,data:write_shallow(Se)})})}le.messages[0].data=write_shallow(we);var xe=write_iwa_file(de),ke=compress_iwa_file(xe);se.content=ke,se.size=se.content.length})();var ve=parse_shallow(q[3][0].data);{var be=ve[1][0];delete ve[2];var me=parse_shallow(be.data);{var ae=parse_TSP_Reference(me[2][0].data);(function(){for(var se=CFB.find(f,d[ae].location),de=parse_iwa_file(decompress_iwa_file(se.content)),le,ge=0;ge<de.length;++ge){var Re=de[ge];Re.id==ae&&(le=Re)}var we=parse_shallow(le.messages[0].data);{delete we[6],delete ve[7];var Se=new Uint8Array(we[5][0].data);we[5]=[];for(var xe=0,ke=0;ke<=s.e.r;++ke){var Ie=parse_shallow(Se);xe+=write_tile_row(Ie,c[ke],u),Ie[1][0].data=write_varint49(ke),we[5].push({data:write_shallow(Ie),type:2})}we[1]=[{type:0,data:write_varint49(s.e.c+1)}],we[2]=[{type:0,data:write_varint49(s.e.r+1)}],we[3]=[{type:0,data:write_varint49(xe)}],we[4]=[{type:0,data:write_varint49(s.e.r+1)}]}le.messages[0].data=write_shallow(we);var He=write_iwa_file(de),Le=compress_iwa_file(He);se.content=Le,se.size=se.content.length})()}be.data=write_shallow(me)}q[3][0].data=write_shallow(ve)}E[4][0].data=write_shallow(q)}b.messages[0].data=write_shallow(E);var pe=write_iwa_file(v),ie=compress_iwa_file(pe);return g.content=ie,g.size=g.content.length,f}function fix_opts_func(o){return function(n){for(var s=0;s!=o.length;++s){var l=o[s];n[l[0]]===void 0&&(n[l[0]]=l[1]),l[2]==="n"&&(n[l[0]]=Number(n[l[0]]))}}}function fix_write_opts(o){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(o)}function write_zip(o,a){return a.bookType=="ods"?write_ods(o,a):a.bookType=="numbers"?write_numbers_iwa(o,a):a.bookType=="xlsb"?write_zip_xlsxb(o,a):write_zip_xlsx(o,a)}function write_zip_xlsxb(o,a){_shapeid=1024,o&&!o.SSF&&(o.SSF=dup(table_fmt)),o&&o.SSF&&(make_ssf(),SSF_load_table(o.SSF),a.revssf=evert_num(o.SSF),a.revssf[o.SSF[65535]]=0,a.ssf=o.SSF),a.rels={},a.wbrels={},a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,browser_has_Map?a.revStrings=new Map:(a.revStrings={},a.revStrings.foo=[],delete a.revStrings.foo);var n=a.bookType=="xlsb"?"bin":"xml",s=VBAFMTS.indexOf(a.bookType)>-1,l=new_ct();fix_write_opts(a=a||{});var c=zip_new(),u="",d=0;if(a.cellXfs=[],get_cell_style(a.cellXfs,{},{revssf:{General:0}}),o.Props||(o.Props={}),u="docProps/core.xml",zip_add_file(c,u,write_core_props(o.Props,a)),l.coreprops.push(u),add_rels(a.rels,2,u,RELS.CORE_PROPS),u="docProps/app.xml",!(o.Props&&o.Props.SheetNames))if(!o.Workbook||!o.Workbook.Sheets)o.Props.SheetNames=o.SheetNames;else{for(var h=[],f=0;f<o.SheetNames.length;++f)(o.Workbook.Sheets[f]||{}).Hidden!=2&&h.push(o.SheetNames[f]);o.Props.SheetNames=h}for(o.Props.Worksheets=o.Props.SheetNames.length,zip_add_file(c,u,write_ext_props(o.Props)),l.extprops.push(u),add_rels(a.rels,3,u,RELS.EXT_PROPS),o.Custprops!==o.Props&&keys(o.Custprops||{}).length>0&&(u="docProps/custom.xml",zip_add_file(c,u,write_cust_props(o.Custprops)),l.custprops.push(u),add_rels(a.rels,4,u,RELS.CUST_PROPS)),d=1;d<=o.SheetNames.length;++d){var p={"!id":{}},g=o.Sheets[o.SheetNames[d-1]],v=(g||{})["!type"]||"sheet";switch(v){case"chart":default:u="xl/worksheets/sheet"+d+"."+n,zip_add_file(c,u,write_ws(d-1,u,a,o,p)),l.sheets.push(u),add_rels(a.wbrels,-1,"worksheets/sheet"+d+"."+n,RELS.WS[0])}if(g){var b=g["!comments"],w=!1,x="";b&&b.length>0&&(x="xl/comments"+d+"."+n,zip_add_file(c,x,write_cmnt(b,x)),l.comments.push(x),add_rels(p,-1,"../comments"+d+"."+n,RELS.CMNT),w=!0),g["!legacy"]&&w&&zip_add_file(c,"xl/drawings/vmlDrawing"+d+".vml",write_comments_vml(d,g["!comments"])),delete g["!comments"],delete g["!legacy"]}p["!id"].rId1&&zip_add_file(c,get_rels_path(u),write_rels(p))}return a.Strings!=null&&a.Strings.length>0&&(u="xl/sharedStrings."+n,zip_add_file(c,u,write_sst(a.Strings,u,a)),l.strs.push(u),add_rels(a.wbrels,-1,"sharedStrings."+n,RELS.SST)),u="xl/workbook."+n,zip_add_file(c,u,write_wb(o,u)),l.workbooks.push(u),add_rels(a.rels,1,u,RELS.WB),u="xl/theme/theme1.xml",zip_add_file(c,u,write_theme(o.Themes,a)),l.themes.push(u),add_rels(a.wbrels,-1,"theme/theme1.xml",RELS.THEME),u="xl/styles."+n,zip_add_file(c,u,write_sty(o,u,a)),l.styles.push(u),add_rels(a.wbrels,-1,"styles."+n,RELS.STY),o.vbaraw&&s&&(u="xl/vbaProject.bin",zip_add_file(c,u,o.vbaraw),l.vba.push(u),add_rels(a.wbrels,-1,"vbaProject.bin",RELS.VBA)),u="xl/metadata."+n,zip_add_file(c,u,write_xlmeta(u)),l.metadata.push(u),add_rels(a.wbrels,-1,"metadata."+n,RELS.XLMETA),zip_add_file(c,"[Content_Types].xml",write_ct(l,a)),zip_add_file(c,"_rels/.rels",write_rels(a.rels)),zip_add_file(c,"xl/_rels/workbook."+n+".rels",write_rels(a.wbrels)),delete a.revssf,delete a.ssf,c}function write_zip_xlsx(o,a){_shapeid=1024,o&&!o.SSF&&(o.SSF=dup(table_fmt)),o&&o.SSF&&(make_ssf(),SSF_load_table(o.SSF),a.revssf=evert_num(o.SSF),a.revssf[o.SSF[65535]]=0,a.ssf=o.SSF),a.rels={},a.wbrels={},a.Strings=[],a.Strings.Count=0,a.Strings.Unique=0,browser_has_Map?a.revStrings=new Map:(a.revStrings={},a.revStrings.foo=[],delete a.revStrings.foo);var n="xml",s=VBAFMTS.indexOf(a.bookType)>-1,l=new_ct();fix_write_opts(a=a||{});var c=zip_new(),u="",d=0;if(a.cellXfs=[],get_cell_style(a.cellXfs,{},{revssf:{General:0}}),o.Props||(o.Props={}),u="docProps/core.xml",zip_add_file(c,u,write_core_props(o.Props,a)),l.coreprops.push(u),add_rels(a.rels,2,u,RELS.CORE_PROPS),u="docProps/app.xml",!(o.Props&&o.Props.SheetNames))if(!o.Workbook||!o.Workbook.Sheets)o.Props.SheetNames=o.SheetNames;else{for(var h=[],f=0;f<o.SheetNames.length;++f)(o.Workbook.Sheets[f]||{}).Hidden!=2&&h.push(o.SheetNames[f]);o.Props.SheetNames=h}o.Props.Worksheets=o.Props.SheetNames.length,zip_add_file(c,u,write_ext_props(o.Props)),l.extprops.push(u),add_rels(a.rels,3,u,RELS.EXT_PROPS),o.Custprops!==o.Props&&keys(o.Custprops||{}).length>0&&(u="docProps/custom.xml",zip_add_file(c,u,write_cust_props(o.Custprops)),l.custprops.push(u),add_rels(a.rels,4,u,RELS.CUST_PROPS));var p=["SheetJ5"];for(a.tcid=0,d=1;d<=o.SheetNames.length;++d){var g={"!id":{}},v=o.Sheets[o.SheetNames[d-1]],b=(v||{})["!type"]||"sheet";switch(b){case"chart":default:u="xl/worksheets/sheet"+d+"."+n,zip_add_file(c,u,write_ws_xml(d-1,a,o,g)),l.sheets.push(u),add_rels(a.wbrels,-1,"worksheets/sheet"+d+"."+n,RELS.WS[0])}if(v){var w=v["!comments"],x=!1,S="";if(w&&w.length>0){var E=!1;w.forEach(function(T){T[1].forEach(function(C){C.T==!0&&(E=!0)})}),E&&(S="xl/threadedComments/threadedComment"+d+"."+n,zip_add_file(c,S,write_tcmnt_xml(w,p,a)),l.threadedcomments.push(S),add_rels(g,-1,"../threadedComments/threadedComment"+d+"."+n,RELS.TCMNT)),S="xl/comments"+d+"."+n,zip_add_file(c,S,write_comments_xml(w)),l.comments.push(S),add_rels(g,-1,"../comments"+d+"."+n,RELS.CMNT),x=!0}v["!legacy"]&&x&&zip_add_file(c,"xl/drawings/vmlDrawing"+d+".vml",write_comments_vml(d,v["!comments"])),delete v["!comments"],delete v["!legacy"]}g["!id"].rId1&&zip_add_file(c,get_rels_path(u),write_rels(g))}return a.Strings!=null&&a.Strings.length>0&&(u="xl/sharedStrings."+n,zip_add_file(c,u,write_sst_xml(a.Strings,a)),l.strs.push(u),add_rels(a.wbrels,-1,"sharedStrings."+n,RELS.SST)),u="xl/workbook."+n,zip_add_file(c,u,write_wb_xml(o)),l.workbooks.push(u),add_rels(a.rels,1,u,RELS.WB),u="xl/theme/theme1.xml",zip_add_file(c,u,write_theme(o.Themes,a)),l.themes.push(u),add_rels(a.wbrels,-1,"theme/theme1.xml",RELS.THEME),u="xl/styles."+n,zip_add_file(c,u,write_sty_xml(o,a)),l.styles.push(u),add_rels(a.wbrels,-1,"styles."+n,RELS.STY),o.vbaraw&&s&&(u="xl/vbaProject.bin",zip_add_file(c,u,o.vbaraw),l.vba.push(u),add_rels(a.wbrels,-1,"vbaProject.bin",RELS.VBA)),u="xl/metadata."+n,zip_add_file(c,u,write_xlmeta_xml()),l.metadata.push(u),add_rels(a.wbrels,-1,"metadata."+n,RELS.XLMETA),p.length>1&&(u="xl/persons/person.xml",zip_add_file(c,u,write_people_xml(p)),l.people.push(u),add_rels(a.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(c,"[Content_Types].xml",write_ct(l,a)),zip_add_file(c,"_rels/.rels",write_rels(a.rels)),zip_add_file(c,"xl/_rels/workbook."+n+".rels",write_rels(a.wbrels)),delete a.revssf,delete a.ssf,c}function firstbyte(o,a){var n="";switch((a||{}).type||"base64"){case"buffer":return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]];case"base64":n=Base64_decode(o.slice(0,12));break;case"binary":n=o;break;case"array":return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]];default:throw new Error("Unrecognized type "+(a&&a.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function write_cfb_ctr(o,a){switch(a.type){case"base64":case"binary":break;case"buffer":case"array":a.type="";break;case"file":return write_dl(a.file,CFB.write(o,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+a.bookType+"' files");default:throw new Error("Unrecognized type "+a.type)}return CFB.write(o,a)}function write_zip_type(o,a){var n=dup(a||{}),s=write_zip(o,n);return write_zip_denouement(s,n)}function write_zip_denouement(o,a){var n={},s=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(a.compression&&(n.compression="DEFLATE"),a.password)n.type=s;else switch(a.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+a.bookType+"' files");case"buffer":case"file":n.type=s;break;default:throw new Error("Unrecognized type "+a.type)}var l=o.FullPaths?CFB.write(o,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!a.compression}):o.generate(n);if(typeof Deno<"u"&&typeof l=="string"){if(a.type=="binary"||a.type=="base64")return l;l=new Uint8Array(s2ab(l))}return a.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(l,a.password),a):a.type==="file"?write_dl(a.file,l):a.type=="string"?utf8read(l):l}function write_cfb_type(o,a){var n=a||{},s=write_xlscfb(o,n);return write_cfb_ctr(s,n)}function write_string_type(o,a,n){n||(n="");var s=n+o;switch(a.type){case"base64":return Base64_encode(utf8write(s));case"binary":return utf8write(s);case"string":return o;case"file":return write_dl(a.file,s,"utf8");case"buffer":return has_buf?Buffer_from(s,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(s):write_string_type(s,{type:"binary"}).split("").map(function(l){return l.charCodeAt(0)})}throw new Error("Unrecognized type "+a.type)}function write_stxt_type(o,a){switch(a.type){case"base64":return Base64_encode(o);case"binary":return o;case"string":return o;case"file":return write_dl(a.file,o,"binary");case"buffer":return has_buf?Buffer_from(o,"binary"):o.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+a.type)}function write_binary_type(o,a){switch(a.type){case"string":case"base64":case"binary":for(var n="",s=0;s<o.length;++s)n+=String.fromCharCode(o[s]);return a.type=="base64"?Base64_encode(n):a.type=="string"?utf8read(n):n;case"file":return write_dl(a.file,o);case"buffer":return o;default:throw new Error("Unrecognized type "+a.type)}}function writeSync(o,a){reset_cp(),check_wb(o);var n=dup(a||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var s=writeSync(o,n);return n.type="array",s2ab(s)}var l=0;if(n.sheet&&(typeof n.sheet=="number"?l=n.sheet:l=o.SheetNames.indexOf(n.sheet),!o.SheetNames[l]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(o,n),n);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(o.Sheets[o.SheetNames[l]],n),n);case"htm":case"html":return write_string_type(sheet_to_html(o.Sheets[o.SheetNames[l]],n),n);case"txt":return write_stxt_type(sheet_to_txt(o.Sheets[o.SheetNames[l]],n),n);case"csv":return write_string_type(sheet_to_csv(o.Sheets[o.SheetNames[l]],n),n,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(o.Sheets[o.SheetNames[l]],n),n);case"dbf":return write_binary_type(DBF.from_sheet(o.Sheets[o.SheetNames[l]],n),n);case"prn":return write_string_type(PRN.from_sheet(o.Sheets[o.SheetNames[l]],n),n);case"rtf":return write_string_type(RTF.from_sheet(o.Sheets[o.SheetNames[l]],n),n);case"eth":return write_string_type(ETH.from_sheet(o.Sheets[o.SheetNames[l]],n),n);case"fods":return write_string_type(write_ods(o,n),n);case"wk1":return write_binary_type(WK_.sheet_to_wk1(o.Sheets[o.SheetNames[l]],n),n);case"wk3":return write_binary_type(WK_.book_to_wk3(o,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),write_binary_type(write_biff_buf(o,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),write_cfb_type(o,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(o,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function resolve_book_type(o){if(!o.bookType){var a={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=o.file.slice(o.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(o.bookType=n.slice(1)),o.bookType=a[o.bookType]||o.bookType}}function writeFileSync(o,a,n){var s=n||{};return s.type="file",s.file=a,resolve_book_type(s),writeSync(o,s)}function make_json_row(o,a,n,s,l,c,u,d){var h=encode_row(n),f=d.defval,p=d.raw||!Object.prototype.hasOwnProperty.call(d,"raw"),g=!0,v=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(v,"__rowNum__",{value:n,enumerable:!1})}catch{v.__rowNum__=n}else v.__rowNum__=n;if(!u||o[n])for(var b=a.s.c;b<=a.e.c;++b){var w=u?o[n][b]:o[s[b]+h];if(w===void 0||w.t===void 0){if(f===void 0)continue;c[b]!=null&&(v[c[b]]=f);continue}var x=w.v;switch(w.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(c[b]!=null){if(x==null)if(w.t=="e"&&x===null)v[c[b]]=null;else if(f!==void 0)v[c[b]]=f;else if(p&&x===null)v[c[b]]=null;else continue;else v[c[b]]=p&&(w.t!=="n"||w.t==="n"&&d.rawNumbers!==!1)?x:format_cell(w,x,d);x!=null&&(g=!1)}}return{row:v,isempty:g}}function sheet_to_json(o,a){if(o==null||o["!ref"]==null)return[];var n={t:"n",v:0},s=0,l=1,c=[],u=0,d="",h={s:{r:0,c:0},e:{r:0,c:0}},f=a||{},p=f.range!=null?f.range:o["!ref"];switch(f.header===1?s=1:f.header==="A"?s=2:Array.isArray(f.header)?s=3:f.header==null&&(s=0),typeof p){case"string":h=safe_decode_range(p);break;case"number":h=safe_decode_range(o["!ref"]),h.s.r=p;break;default:h=p}s>0&&(l=0);var g=encode_row(h.s.r),v=[],b=[],w=0,x=0,S=Array.isArray(o),E=h.s.r,T=0,C={};S&&!o[E]&&(o[E]=[]);var A=f.skipHidden&&o["!cols"]||[],R=f.skipHidden&&o["!rows"]||[];for(T=h.s.c;T<=h.e.c;++T)if(!(A[T]||{}).hidden)switch(v[T]=encode_col(T),n=S?o[E][T]:o[v[T]+g],s){case 1:c[T]=T-h.s.c;break;case 2:c[T]=v[T];break;case 3:c[T]=f.header[T-h.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),d=u=format_cell(n,null,f),x=C[u]||0,!x)C[u]=1;else{do d=u+"_"+x++;while(C[d]);C[u]=x,C[d]=1}c[T]=d}for(E=h.s.r+l;E<=h.e.r;++E)if(!(R[E]||{}).hidden){var j=make_json_row(o,h,E,v,s,c,S,f);(j.isempty===!1||(s===1?f.blankrows!==!1:f.blankrows))&&(b[w++]=j.row)}return b.length=w,b}var qreg=/"/g;function make_csv_row(o,a,n,s,l,c,u,d){for(var h=!0,f=[],p="",g=encode_row(n),v=a.s.c;v<=a.e.c;++v)if(s[v]){var b=d.dense?(o[n]||[])[v]:o[s[v]+g];if(b==null)p="";else if(b.v!=null){h=!1,p=""+(d.rawNumbers&&b.t=="n"?b.v:format_cell(b,null,d));for(var w=0,x=0;w!==p.length;++w)if((x=p.charCodeAt(w))===l||x===c||x===34||d.forceQuotes){p='"'+p.replace(qreg,'""')+'"';break}p=="ID"&&(p='"ID"')}else b.f!=null&&!b.F?(h=!1,p="="+b.f,p.indexOf(",")>=0&&(p='"'+p.replace(qreg,'""')+'"')):p="";f.push(p)}return d.blankrows===!1&&h?null:f.join(u)}function sheet_to_csv(o,a){var n=[],s=a??{};if(o==null||o["!ref"]==null)return"";var l=safe_decode_range(o["!ref"]),c=s.FS!==void 0?s.FS:",",u=c.charCodeAt(0),d=s.RS!==void 0?s.RS:`
`,h=d.charCodeAt(0),f=new RegExp((c=="|"?"\\|":c)+"+$"),p="",g=[];s.dense=Array.isArray(o);for(var v=s.skipHidden&&o["!cols"]||[],b=s.skipHidden&&o["!rows"]||[],w=l.s.c;w<=l.e.c;++w)(v[w]||{}).hidden||(g[w]=encode_col(w));for(var x=0,S=l.s.r;S<=l.e.r;++S)(b[S]||{}).hidden||(p=make_csv_row(o,l,S,g,u,h,c,s),p!=null&&(s.strip&&(p=p.replace(f,"")),(p||s.blankrows!==!1)&&n.push((x++?d:"")+p)));return delete s.dense,n.join("")}function sheet_to_txt(o,a){a||(a={}),a.FS="	",a.RS=`
`;var n=sheet_to_csv(o,a);return n}function sheet_to_formulae(o){var a="",n,s="";if(o==null||o["!ref"]==null)return[];var l=safe_decode_range(o["!ref"]),c="",u=[],d,h=[],f=Array.isArray(o);for(d=l.s.c;d<=l.e.c;++d)u[d]=encode_col(d);for(var p=l.s.r;p<=l.e.r;++p)for(c=encode_row(p),d=l.s.c;d<=l.e.c;++d)if(a=u[d]+c,n=f?(o[p]||[])[d]:o[a],s="",n!==void 0){if(n.F!=null){if(a=n.F,!n.f)continue;s=n.f,a.indexOf(":")==-1&&(a=a+":"+a)}if(n.f!=null)s=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)s=""+n.v;else if(n.t=="b")s=n.v?"TRUE":"FALSE";else if(n.w!==void 0)s="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?s="'"+n.v:s=""+n.v}}h[h.length]=a+"="+s}return h}function sheet_add_json(o,a,n){var s=n||{},l=+!s.skipHeader,c=o||{},u=0,d=0;if(c&&s.origin!=null)if(typeof s.origin=="number")u=s.origin;else{var h=typeof s.origin=="string"?decode_cell(s.origin):s.origin;u=h.r,d=h.c}var f,p={s:{c:0,r:0},e:{c:d,r:u+a.length-1+l}};if(c["!ref"]){var g=safe_decode_range(c["!ref"]);p.e.c=Math.max(p.e.c,g.e.c),p.e.r=Math.max(p.e.r,g.e.r),u==-1&&(u=g.e.r+1,p.e.r=u+a.length-1+l)}else u==-1&&(u=0,p.e.r=a.length-1+l);var v=s.header||[],b=0;a.forEach(function(x,S){keys(x).forEach(function(E){(b=v.indexOf(E))==-1&&(v[b=v.length]=E);var T=x[E],C="z",A="",R=encode_cell({c:d+b,r:u+S+l});f=ws_get_cell_stub(c,R),T&&typeof T=="object"&&!(T instanceof Date)?c[R]=T:(typeof T=="number"?C="n":typeof T=="boolean"?C="b":typeof T=="string"?C="s":T instanceof Date?(C="d",s.cellDates||(C="n",T=datenum(T)),A=s.dateNF||table_fmt[14]):T===null&&s.nullError&&(C="e",T=0),f?(f.t=C,f.v=T,delete f.w,delete f.R,A&&(f.z=A)):c[R]=f={t:C,v:T},A&&(f.z=A))})}),p.e.c=Math.max(p.e.c,d+v.length-1);var w=encode_row(u);if(l)for(b=0;b<v.length;++b)c[encode_col(b+d)+w]={t:"s",v:v[b]};return c["!ref"]=encode_range(p),c}function json_to_sheet(o,a){return sheet_add_json(null,o,a)}function ws_get_cell_stub(o,a,n){if(typeof a=="string"){if(Array.isArray(o)){var s=decode_cell(a);return o[s.r]||(o[s.r]=[]),o[s.r][s.c]||(o[s.r][s.c]={t:"z"})}return o[a]||(o[a]={t:"z"})}return typeof a!="number"?ws_get_cell_stub(o,encode_cell(a)):ws_get_cell_stub(o,encode_cell({r:a,c:n||0}))}function wb_sheet_idx(o,a){if(typeof a=="number"){if(a>=0&&o.SheetNames.length>a)return a;throw new Error("Cannot find sheet # "+a)}else if(typeof a=="string"){var n=o.SheetNames.indexOf(a);if(n>-1)return n;throw new Error("Cannot find sheet name |"+a+"|")}else throw new Error("Cannot find sheet |"+a+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(o,a,n,s){var l=1;if(!n)for(;l<=65535&&o.SheetNames.indexOf(n="Sheet"+l)!=-1;++l,n=void 0);if(!n||o.SheetNames.length>=65535)throw new Error("Too many worksheets");if(s&&o.SheetNames.indexOf(n)>=0){var c=n.match(/(^.*?)(\d+)$/);l=c&&+c[2]||0;var u=c&&c[1]||n;for(++l;l<=65535&&o.SheetNames.indexOf(n=u+l)!=-1;++l);}if(check_ws_name(n),o.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return o.SheetNames.push(n),o.Sheets[n]=a,n}function book_set_sheet_visibility(o,a,n){o.Workbook||(o.Workbook={}),o.Workbook.Sheets||(o.Workbook.Sheets=[]);var s=wb_sheet_idx(o,a);switch(o.Workbook.Sheets[s]||(o.Workbook.Sheets[s]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}o.Workbook.Sheets[s].Hidden=n}function cell_set_number_format(o,a){return o.z=a,o}function cell_set_hyperlink(o,a,n){return a?(o.l={Target:a},n&&(o.l.Tooltip=n)):delete o.l,o}function cell_set_internal_link(o,a,n){return cell_set_hyperlink(o,"#"+a,n)}function cell_add_comment(o,a,n){o.c||(o.c=[]),o.c.push({t:a,a:n||"SheetJS"})}function sheet_set_array_formula(o,a,n,s){for(var l=typeof a!="string"?a:safe_decode_range(a),c=typeof a=="string"?a:encode_range(a),u=l.s.r;u<=l.e.r;++u)for(var d=l.s.c;d<=l.e.c;++d){var h=ws_get_cell_stub(o,u,d);h.t="n",h.F=c,delete h.v,u==l.s.r&&d==l.s.c&&(h.f=n,s&&(h.D=!0))}return o}var utils={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},papaparse_min$1={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var papaparse_min=papaparse_min$1.exports,hasRequiredPapaparse_min;function requirePapaparse_min(){return hasRequiredPapaparse_min||(hasRequiredPapaparse_min=1,function(o,a){((n,s)=>{o.exports=s()})(papaparse_min,function n(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},l,c=!s.document&&!!s.postMessage,u=s.IS_PAPA_WORKER||!1,d={},h=0,f={};function p(O){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(H){var q=R(H);q.chunkSize=parseInt(q.chunkSize),H.step||H.chunk||(q.chunkSize=null),this._handle=new x(q),(this._handle.streamer=this)._config=q}).call(this,O),this.parseChunk=function(H,q){var Y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Y){let ee=this._config.newline;ee||(te=this._config.quoteChar||'"',ee=this._handle.guessLineEndings(H,te)),H=[...H.split(ee).slice(Y)].join(ee)}this.isFirstChunk&&D(this._config.beforeFirstChunk)&&(te=this._config.beforeFirstChunk(H))!==void 0&&(H=te),this.isFirstChunk=!1,this._halted=!1;var Y=this._partialLine+H,te=(this._partialLine="",this._handle.parse(Y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(H=te.meta.cursor,Y=(this._finished||(this._partialLine=Y.substring(H-this._baseIndex),this._baseIndex=H),te&&te.data&&(this._rowCount+=te.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),u)s.postMessage({results:te,workerId:f.WORKER_ID,finished:Y});else if(D(this._config.chunk)&&!q){if(this._config.chunk(te,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=te=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(te.data),this._completeResults.errors=this._completeResults.errors.concat(te.errors),this._completeResults.meta=te.meta),this._completed||!Y||!D(this._config.complete)||te&&te.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Y||te&&te.meta.paused||this._nextChunk(),te}this._halted=!0},this._sendError=function(H){D(this._config.error)?this._config.error(H):u&&this._config.error&&s.postMessage({workerId:f.WORKER_ID,error:H,finished:!1})}}function g(O){var H;(O=O||{}).chunkSize||(O.chunkSize=f.RemoteChunkSize),p.call(this,O),this._nextChunk=c?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(q){this._input=q,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(H=new XMLHttpRequest,this._config.withCredentials&&(H.withCredentials=this._config.withCredentials),c||(H.onload=j(this._chunkLoaded,this),H.onerror=j(this._chunkError,this)),H.open(this._config.downloadRequestBody?"POST":"GET",this._input,!c),this._config.downloadRequestHeaders){var q,Y=this._config.downloadRequestHeaders;for(q in Y)H.setRequestHeader(q,Y[q])}var te;this._config.chunkSize&&(te=this._start+this._config.chunkSize-1,H.setRequestHeader("Range","bytes="+this._start+"-"+te));try{H.send(this._config.downloadRequestBody)}catch(ee){this._chunkError(ee.message)}c&&H.status===0&&this._chunkError()}},this._chunkLoaded=function(){H.readyState===4&&(H.status<200||400<=H.status?this._chunkError():(this._start+=this._config.chunkSize||H.responseText.length,this._finished=!this._config.chunkSize||this._start>=(q=>(q=q.getResponseHeader("Content-Range"))!==null?parseInt(q.substring(q.lastIndexOf("/")+1)):-1)(H),this.parseChunk(H.responseText)))},this._chunkError=function(q){q=H.statusText||q,this._sendError(new Error(q))}}function v(O){(O=O||{}).chunkSize||(O.chunkSize=f.LocalChunkSize),p.call(this,O);var H,q,Y=typeof FileReader<"u";this.stream=function(te){this._input=te,q=te.slice||te.webkitSlice||te.mozSlice,Y?((H=new FileReader).onload=j(this._chunkLoaded,this),H.onerror=j(this._chunkError,this)):H=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var te=this._input,ee=(this._config.chunkSize&&(ee=Math.min(this._start+this._config.chunkSize,this._input.size),te=q.call(te,this._start,ee)),H.readAsText(te,this._config.encoding));Y||this._chunkLoaded({target:{result:ee}})},this._chunkLoaded=function(te){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(te.target.result)},this._chunkError=function(){this._sendError(H.error)}}function b(O){var H;p.call(this,O=O||{}),this.stream=function(q){return H=q,this._nextChunk()},this._nextChunk=function(){var q,Y;if(!this._finished)return q=this._config.chunkSize,H=q?(Y=H.substring(0,q),H.substring(q)):(Y=H,""),this._finished=!H,this.parseChunk(Y)}}function w(O){p.call(this,O=O||{});var H=[],q=!0,Y=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(te){this._input=te,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Y&&H.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),H.length?this.parseChunk(H.shift()):q=!0},this._streamData=j(function(te){try{H.push(typeof te=="string"?te:te.toString(this._config.encoding)),q&&(q=!1,this._checkIsFinished(),this.parseChunk(H.shift()))}catch(ee){this._streamError(ee)}},this),this._streamError=j(function(te){this._streamCleanUp(),this._sendError(te)},this),this._streamEnd=j(function(){this._streamCleanUp(),Y=!0,this._streamData("")},this),this._streamCleanUp=j(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function x(O){var H,q,Y,te,ee=Math.pow(2,53),re=-ee,ne=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ce=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ve=this,be=0,me=0,ae=!1,pe=!1,ie=[],se={data:[],errors:[],meta:{}};function de(we){return O.skipEmptyLines==="greedy"?we.join("").trim()==="":we.length===1&&we[0].length===0}function le(){if(se&&Y&&(Re("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),Y=!1),O.skipEmptyLines&&(se.data=se.data.filter(function(ke){return!de(ke)})),ge()){let ke=function(Ie,He){D(O.transformHeader)&&(Ie=O.transformHeader(Ie,He)),ie.push(Ie)};if(se)if(Array.isArray(se.data[0])){for(var we=0;ge()&&we<se.data.length;we++)se.data[we].forEach(ke);se.data.splice(0,1)}else se.data.forEach(ke)}function Se(ke,Ie){for(var He=O.header?{}:[],Le=0;Le<ke.length;Le++){var De=Le,Ee=ke[Le],Ee=((oe,he)=>(Me=>(O.dynamicTypingFunction&&O.dynamicTyping[Me]===void 0&&(O.dynamicTyping[Me]=O.dynamicTypingFunction(Me)),(O.dynamicTyping[Me]||O.dynamicTyping)===!0))(oe)?he==="true"||he==="TRUE"||he!=="false"&&he!=="FALSE"&&((Me=>{if(ne.test(Me)&&(Me=parseFloat(Me),re<Me&&Me<ee))return 1})(he)?parseFloat(he):ce.test(he)?new Date(he):he===""?null:he):he)(De=O.header?Le>=ie.length?"__parsed_extra":ie[Le]:De,Ee=O.transform?O.transform(Ee,De):Ee);De==="__parsed_extra"?(He[De]=He[De]||[],He[De].push(Ee)):He[De]=Ee}return O.header&&(Le>ie.length?Re("FieldMismatch","TooManyFields","Too many fields: expected "+ie.length+" fields but parsed "+Le,me+Ie):Le<ie.length&&Re("FieldMismatch","TooFewFields","Too few fields: expected "+ie.length+" fields but parsed "+Le,me+Ie)),He}var xe;se&&(O.header||O.dynamicTyping||O.transform)&&(xe=1,!se.data.length||Array.isArray(se.data[0])?(se.data=se.data.map(Se),xe=se.data.length):se.data=Se(se.data,0),O.header&&se.meta&&(se.meta.fields=ie),me+=xe)}function ge(){return O.header&&ie.length===0}function Re(we,Se,xe,ke){we={type:we,code:Se,message:xe},ke!==void 0&&(we.row=ke),se.errors.push(we)}D(O.step)&&(te=O.step,O.step=function(we){se=we,ge()?le():(le(),se.data.length!==0&&(be+=we.data.length,O.preview&&be>O.preview?q.abort():(se.data=se.data[0],te(se,ve))))}),this.parse=function(we,Se,xe){var ke=O.quoteChar||'"',ke=(O.newline||(O.newline=this.guessLineEndings(we,ke)),Y=!1,O.delimiter?D(O.delimiter)&&(O.delimiter=O.delimiter(we),se.meta.delimiter=O.delimiter):((ke=((Ie,He,Le,De,Ee)=>{var oe,he,Me,fe;Ee=Ee||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var Pe=0;Pe<Ee.length;Pe++){for(var Oe,je=Ee[Pe],Ve=0,ze=0,We=0,Ze=(Me=void 0,new E({comments:De,delimiter:je,newline:He,preview:10}).parse(Ie)),Je=0;Je<Ze.data.length;Je++)Le&&de(Ze.data[Je])?We++:(Oe=Ze.data[Je].length,ze+=Oe,Me===void 0?Me=Oe:0<Oe&&(Ve+=Math.abs(Oe-Me),Me=Oe));0<Ze.data.length&&(ze/=Ze.data.length-We),(he===void 0||Ve<=he)&&(fe===void 0||fe<ze)&&1.99<ze&&(he=Ve,oe=je,fe=ze)}return{successful:!!(O.delimiter=oe),bestDelimiter:oe}})(we,O.newline,O.skipEmptyLines,O.comments,O.delimitersToGuess)).successful?O.delimiter=ke.bestDelimiter:(Y=!0,O.delimiter=f.DefaultDelimiter),se.meta.delimiter=O.delimiter),R(O));return O.preview&&O.header&&ke.preview++,H=we,q=new E(ke),se=q.parse(H,Se,xe),le(),ae?{meta:{paused:!0}}:se||{meta:{paused:!1}}},this.paused=function(){return ae},this.pause=function(){ae=!0,q.abort(),H=D(O.chunk)?"":H.substring(q.getCharIndex())},this.resume=function(){ve.streamer._halted?(ae=!1,ve.streamer.parseChunk(H,!0)):setTimeout(ve.resume,3)},this.aborted=function(){return pe},this.abort=function(){pe=!0,q.abort(),se.meta.aborted=!0,D(O.complete)&&O.complete(se),H=""},this.guessLineEndings=function(Ie,ke){Ie=Ie.substring(0,1048576);var ke=new RegExp(S(ke)+"([^]*?)"+S(ke),"gm"),xe=(Ie=Ie.replace(ke,"")).split("\r"),ke=Ie.split(`
`),Ie=1<ke.length&&ke[0].length<xe[0].length;if(xe.length===1||Ie)return`
`;for(var He=0,Le=0;Le<xe.length;Le++)xe[Le][0]===`
`&&He++;return He>=xe.length/2?`\r
`:"\r"}}function S(O){return O.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(O){var H=(O=O||{}).delimiter,q=O.newline,Y=O.comments,te=O.step,ee=O.preview,re=O.fastMode,ne=null,ce=!1,ve=O.quoteChar==null?'"':O.quoteChar,be=ve;if(O.escapeChar!==void 0&&(be=O.escapeChar),(typeof H!="string"||-1<f.BAD_DELIMITERS.indexOf(H))&&(H=","),Y===H)throw new Error("Comment character same as delimiter");Y===!0?Y="#":(typeof Y!="string"||-1<f.BAD_DELIMITERS.indexOf(Y))&&(Y=!1),q!==`
`&&q!=="\r"&&q!==`\r
`&&(q=`
`);var me=0,ae=!1;this.parse=function(pe,ie,se){if(typeof pe!="string")throw new Error("Input must be a string");var de=pe.length,le=H.length,ge=q.length,Re=Y.length,we=D(te),Se=[],xe=[],ke=[],Ie=me=0;if(!pe)return Ve();if(re||re!==!1&&pe.indexOf(ve)===-1){for(var He=pe.split(q),Le=0;Le<He.length;Le++){if(ke=He[Le],me+=ke.length,Le!==He.length-1)me+=q.length;else if(se)return Ve();if(!Y||ke.substring(0,Re)!==Y){if(we){if(Se=[],fe(ke.split(H)),ze(),ae)return Ve()}else fe(ke.split(H));if(ee&&ee<=Le)return Se=Se.slice(0,ee),Ve(!0)}}return Ve()}for(var De=pe.indexOf(H,me),Ee=pe.indexOf(q,me),oe=new RegExp(S(be)+S(ve),"g"),he=pe.indexOf(ve,me);;)if(pe[me]===ve)for(he=me,me++;;){if((he=pe.indexOf(ve,he+1))===-1)return se||xe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Se.length,index:me}),Oe();if(he===de-1)return Oe(pe.substring(me,he).replace(oe,ve));if(ve===be&&pe[he+1]===be)he++;else if(ve===be||he===0||pe[he-1]!==be){De!==-1&&De<he+1&&(De=pe.indexOf(H,he+1));var Me=Pe((Ee=Ee!==-1&&Ee<he+1?pe.indexOf(q,he+1):Ee)===-1?De:Math.min(De,Ee));if(pe.substr(he+1+Me,le)===H){ke.push(pe.substring(me,he).replace(oe,ve)),pe[me=he+1+Me+le]!==ve&&(he=pe.indexOf(ve,me)),De=pe.indexOf(H,me),Ee=pe.indexOf(q,me);break}if(Me=Pe(Ee),pe.substring(he+1+Me,he+1+Me+ge)===q){if(ke.push(pe.substring(me,he).replace(oe,ve)),je(he+1+Me+ge),De=pe.indexOf(H,me),he=pe.indexOf(ve,me),we&&(ze(),ae))return Ve();if(ee&&Se.length>=ee)return Ve(!0);break}xe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Se.length,index:me}),he++}}else if(Y&&ke.length===0&&pe.substring(me,me+Re)===Y){if(Ee===-1)return Ve();me=Ee+ge,Ee=pe.indexOf(q,me),De=pe.indexOf(H,me)}else if(De!==-1&&(De<Ee||Ee===-1))ke.push(pe.substring(me,De)),me=De+le,De=pe.indexOf(H,me);else{if(Ee===-1)break;if(ke.push(pe.substring(me,Ee)),je(Ee+ge),we&&(ze(),ae))return Ve();if(ee&&Se.length>=ee)return Ve(!0)}return Oe();function fe(We){Se.push(We),Ie=me}function Pe(We){var Ze=0;return Ze=We!==-1&&(We=pe.substring(he+1,We))&&We.trim()===""?We.length:Ze}function Oe(We){return se||(We===void 0&&(We=pe.substring(me)),ke.push(We),me=de,fe(ke),we&&ze()),Ve()}function je(We){me=We,fe(ke),ke=[],Ee=pe.indexOf(q,me)}function Ve(We){if(O.header&&!ie&&Se.length&&!ce){var Ze=Se[0],Je=Object.create(null),et=new Set(Ze);let Tt=!1;for(let ut=0;ut<Ze.length;ut++){let St=Ze[ut];if(Je[St=D(O.transformHeader)?O.transformHeader(St,ut):St]){let kt,Bt=Je[St];for(;kt=St+"_"+Bt,Bt++,et.has(kt););et.add(kt),Ze[ut]=kt,Je[St]++,Tt=!0,(ne=ne===null?{}:ne)[kt]=St}else Je[St]=1,Ze[ut]=St;et.add(St)}Tt&&console.warn("Duplicate headers found and renamed."),ce=!0}return{data:Se,errors:xe,meta:{delimiter:H,linebreak:q,aborted:ae,truncated:!!We,cursor:Ie+(ie||0),renamedHeaders:ne}}}function ze(){te(Ve()),Se=[],xe=[]}},this.abort=function(){ae=!0},this.getCharIndex=function(){return me}}function T(O){var H=O.data,q=d[H.workerId],Y=!1;if(H.error)q.userError(H.error,H.file);else if(H.results&&H.results.data){var te={abort:function(){Y=!0,C(H.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:A,resume:A};if(D(q.userStep)){for(var ee=0;ee<H.results.data.length&&(q.userStep({data:H.results.data[ee],errors:H.results.errors,meta:H.results.meta},te),!Y);ee++);delete H.results}else D(q.userChunk)&&(q.userChunk(H.results,te,H.file),delete H.results)}H.finished&&!Y&&C(H.workerId,H.results)}function C(O,H){var q=d[O];D(q.userComplete)&&q.userComplete(H),q.terminate(),delete d[O]}function A(){throw new Error("Not implemented.")}function R(O){if(typeof O!="object"||O===null)return O;var H,q=Array.isArray(O)?[]:{};for(H in O)q[H]=R(O[H]);return q}function j(O,H){return function(){O.apply(H,arguments)}}function D(O){return typeof O=="function"}return f.parse=function(O,H){var q=(H=H||{}).dynamicTyping||!1;if(D(q)&&(H.dynamicTypingFunction=q,q={}),H.dynamicTyping=q,H.transform=!!D(H.transform)&&H.transform,!H.worker||!f.WORKERS_SUPPORTED)return q=null,f.NODE_STREAM_INPUT,typeof O=="string"?(O=(Y=>Y.charCodeAt(0)!==65279?Y:Y.slice(1))(O),q=new(H.download?g:b)(H)):O.readable===!0&&D(O.read)&&D(O.on)?q=new w(H):(s.File&&O instanceof File||O instanceof Object)&&(q=new v(H)),q.stream(O);(q=(()=>{var Y;return!!f.WORKERS_SUPPORTED&&(Y=(()=>{var te=s.URL||s.webkitURL||null,ee=n.toString();return f.BLOB_URL||(f.BLOB_URL=te.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",ee,")();"],{type:"text/javascript"})))})(),(Y=new s.Worker(Y)).onmessage=T,Y.id=h++,d[Y.id]=Y)})()).userStep=H.step,q.userChunk=H.chunk,q.userComplete=H.complete,q.userError=H.error,H.step=D(H.step),H.chunk=D(H.chunk),H.complete=D(H.complete),H.error=D(H.error),delete H.worker,q.postMessage({input:O,config:H,workerId:q.id})},f.unparse=function(O,H){var q=!1,Y=!0,te=",",ee=`\r
`,re='"',ne=re+re,ce=!1,ve=null,be=!1,me=((()=>{if(typeof H=="object"){if(typeof H.delimiter!="string"||f.BAD_DELIMITERS.filter(function(ie){return H.delimiter.indexOf(ie)!==-1}).length||(te=H.delimiter),typeof H.quotes!="boolean"&&typeof H.quotes!="function"&&!Array.isArray(H.quotes)||(q=H.quotes),typeof H.skipEmptyLines!="boolean"&&typeof H.skipEmptyLines!="string"||(ce=H.skipEmptyLines),typeof H.newline=="string"&&(ee=H.newline),typeof H.quoteChar=="string"&&(re=H.quoteChar),typeof H.header=="boolean"&&(Y=H.header),Array.isArray(H.columns)){if(H.columns.length===0)throw new Error("Option columns is empty");ve=H.columns}H.escapeChar!==void 0&&(ne=H.escapeChar+re),H.escapeFormulae instanceof RegExp?be=H.escapeFormulae:typeof H.escapeFormulae=="boolean"&&H.escapeFormulae&&(be=/^[=+\-@\t\r].*$/)}})(),new RegExp(S(re),"g"));if(typeof O=="string"&&(O=JSON.parse(O)),Array.isArray(O)){if(!O.length||Array.isArray(O[0]))return ae(null,O,ce);if(typeof O[0]=="object")return ae(ve||Object.keys(O[0]),O,ce)}else if(typeof O=="object")return typeof O.data=="string"&&(O.data=JSON.parse(O.data)),Array.isArray(O.data)&&(O.fields||(O.fields=O.meta&&O.meta.fields||ve),O.fields||(O.fields=Array.isArray(O.data[0])?O.fields:typeof O.data[0]=="object"?Object.keys(O.data[0]):[]),Array.isArray(O.data[0])||typeof O.data[0]=="object"||(O.data=[O.data])),ae(O.fields||[],O.data||[],ce);throw new Error("Unable to serialize unrecognized input");function ae(ie,se,de){var le="",ge=(typeof ie=="string"&&(ie=JSON.parse(ie)),typeof se=="string"&&(se=JSON.parse(se)),Array.isArray(ie)&&0<ie.length),Re=!Array.isArray(se[0]);if(ge&&Y){for(var we=0;we<ie.length;we++)0<we&&(le+=te),le+=pe(ie[we],we);0<se.length&&(le+=ee)}for(var Se=0;Se<se.length;Se++){var xe=(ge?ie:se[Se]).length,ke=!1,Ie=ge?Object.keys(se[Se]).length===0:se[Se].length===0;if(de&&!ge&&(ke=de==="greedy"?se[Se].join("").trim()==="":se[Se].length===1&&se[Se][0].length===0),de==="greedy"&&ge){for(var He=[],Le=0;Le<xe;Le++){var De=Re?ie[Le]:Le;He.push(se[Se][De])}ke=He.join("").trim()===""}if(!ke){for(var Ee=0;Ee<xe;Ee++){0<Ee&&!Ie&&(le+=te);var oe=ge&&Re?ie[Ee]:Ee;le+=pe(se[Se][oe],Ee)}Se<se.length-1&&(!de||0<xe&&!Ie)&&(le+=ee)}}return le}function pe(ie,se){var de,le;return ie==null?"":ie.constructor===Date?JSON.stringify(ie).slice(1,25):(le=!1,be&&typeof ie=="string"&&be.test(ie)&&(ie="'"+ie,le=!0),de=ie.toString().replace(me,ne),(le=le||q===!0||typeof q=="function"&&q(ie,se)||Array.isArray(q)&&q[se]||((ge,Re)=>{for(var we=0;we<Re.length;we++)if(-1<ge.indexOf(Re[we]))return!0;return!1})(de,f.BAD_DELIMITERS)||-1<de.indexOf(te)||de.charAt(0)===" "||de.charAt(de.length-1)===" ")?re+de+re:de)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!c&&!!s.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=E,f.ParserHandle=x,f.NetworkStreamer=g,f.FileStreamer=v,f.StringStreamer=b,f.ReadableStreamStreamer=w,s.jQuery&&((l=s.jQuery).fn.parse=function(O){var H=O.config||{},q=[];return this.each(function(ee){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var re=0;re<this.files.length;re++)q.push({file:this.files[re],inputElem:this,instanceConfig:l.extend({},H)})}),Y(),this;function Y(){if(q.length===0)D(O.complete)&&O.complete();else{var ee,re,ne,ce,ve=q[0];if(D(O.before)){var be=O.before(ve.file,ve.inputElem);if(typeof be=="object"){if(be.action==="abort")return ee="AbortError",re=ve.file,ne=ve.inputElem,ce=be.reason,void(D(O.error)&&O.error({name:ee},re,ne,ce));if(be.action==="skip")return void te();typeof be.config=="object"&&(ve.instanceConfig=l.extend(ve.instanceConfig,be.config))}else if(be==="skip")return void te()}var me=ve.instanceConfig.complete;ve.instanceConfig.complete=function(ae){D(me)&&me(ae,ve.file,ve.inputElem),te()},f.parse(ve.file,ve.instanceConfig)}}function te(){q.splice(0,1),Y()}}),u&&(s.onmessage=function(O){O=O.data,f.WORKER_ID===void 0&&O&&(f.WORKER_ID=O.workerId),typeof O.input=="string"?s.postMessage({workerId:f.WORKER_ID,results:f.parse(O.input,O.config),finished:!0}):(s.File&&O.input instanceof File||O.input instanceof Object)&&(O=f.parse(O.input,O.config))&&s.postMessage({workerId:f.WORKER_ID,results:O,finished:!0})}),(g.prototype=Object.create(p.prototype)).constructor=g,(v.prototype=Object.create(p.prototype)).constructor=v,(b.prototype=Object.create(b.prototype)).constructor=b,(w.prototype=Object.create(p.prototype)).constructor=w,f})}(papaparse_min$1)),papaparse_min$1.exports}var papaparse_minExports=requirePapaparse_min();const Papa=getDefaultExportFromCjs(papaparse_minExports);function ExportXlsx(o){const a=async n=>{var c,u;const s=n.target.closest("button");s.disabled=!0;const l=await o.getData();if(l.length>0){const d=utils.json_to_sheet(l),h=utils.book_new();d["!cols"]=(((c=o.config)==null?void 0:c.title)??Object.keys(l[0])).map(f=>({wch:f.length*6})),utils.sheet_add_aoa(d,[((u=o.config)==null?void 0:u.title)??Object.keys(l[0])],{origin:"A1",cellStyles:!0}),styleRow(d,0,{font:{name:"Calibri",sz:12,bold:!0,color:{rgb:"FFFFFF"}},fill:{patternType:"solid",fgColor:{rgb:"4CAF50"}},alignment:{horizontal:"center",vertical:"center"}}),utils.book_append_sheet(h,d,o.sheetName??"Sheet 1"),writeFileSync(h,`${o.fileName??"Exported"}.xlsx`,{compression:!0})}s.disabled=!1};return jsxRuntimeExports.jsx(Button,{label:o.label,onClick:a,style:o.style,className:o.className,disabled:o.disabled,prefix:o.prefix,suffix:o.suffix})}function styleRow(o,a,n){const s=utils.decode_range(o["!ref"]??"A1");for(let l=s.s.c;l<=s.e.c;l++){const c=utils.encode_cell({r:a,c:l});o[c]&&(o[c].s=n)}}const handleGoogleSheetFetch=async o=>{try{const a=o.match(/\/d\/([a-zA-Z0-9-_]+)/);if(!a)throw new Error("Invalid Google Sheet URL");const n=a[1],s=o.match(/gid=(\d+)/),l=s?s[1]:"0",c=`https://docs.google.com/spreadsheets/d/${n}/gviz/tq?tqx=out:csv&gid=${l}`,d=await(await fetch(c)).text();return Papa.parse(d,{header:!0,skipEmptyLines:!0,dynamicTyping:!0}).data.map(f=>(Object.keys(f).forEach(p=>{p.startsWith("_")||!p.trim().length?delete f[p]:p.trim().length!==p.length&&(f[p.trim()]=f[p],delete f[p])}),f))}catch(a){console.error(a.message);return}},AutoCellContent=({colItem:o,data:a,fields:n=[],files:s=[],style:l={}})=>{var d;const{t:c}=useTranslation(),u=React2.useMemo(()=>{if(!a||o.Column||Array.isArray(a)&&!a.length)return;const h=n.find(p=>p.Name===o.Name.split(".").pop());if(!h)return;const f=Array.isArray(a)?a:[a];return o.Type===ColDataType.people?f.filter(p=>p!=null):f.map(p=>{var v,b,w,x,S;let g=p[h.Name];switch(h.DataType){case FEDataType.DATE:g&&(g=Util.datetoString(new Date(g)));break;case FEDataType.DATETIME:switch(o.Type){case ColDataType.text:g&&(g=new Date(g).toLocaleString());break;default:switch((v=o.Format)==null?void 0:v.toLowerCase()){case"date month year":case"day date month year":const E=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],T=["january","february","march","april","may","june","july","august","september","october","november","december"],C=new Date(g),A=c(E[C.getDay()]),R=C.getDate(),j=c(T[C.getMonth()]),D=C.getFullYear();o.Format.toLowerCase().includes("day")?g=`${A}, ${R} ${j} ${D}`:g=`${R} ${j} ${D}`;break;default:g&&(g=Util.datetoString(new Date(g),((b=o.Format)==null?void 0:b.toLowerCase())??"dd/mm/yyyy hh:mm"));break}break}break;case FEDataType.MONEY:g&&(g=Util.money(g));break;case FEDataType.PASSWORD:g&&(g="************");break;case FEDataType.BOOLEAN:typeof g=="string"?g=g==="true":typeof g=="number"?g=g===1:g=!!g;break}return(x=(w=h.Form)==null?void 0:w.Options)!=null&&x.length&&g!==void 0&&(typeof g=="string"?g=g.split(",").map(E=>{var T;return(T=h.Form.Options.find(C=>C.id===E))==null?void 0:T.name}).filter(E=>E).join(", "):g=(S=h.Form.Options.find(E=>E.id===g))==null?void 0:S.name),`${g??""}`}).join(", ")},[o,a]);switch(o.Type){case ColDataType.text:return jsxRuntimeExports.jsx("p",{className:"comp-text body-3",style:{"--max-line":2,margin:0,flex:1,...l},children:u});case ColDataType.people:return u==null?void 0:u.map(f=>jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"0.8rem",flex:1,...l},children:[jsxRuntimeExports.jsx(CustomerAvatar,{data:f,style:{width:"3.2rem",height:"3.2rem"}}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",style:{flex:1},children:f.Name})]},f.Id));case ColDataType.files:const h=s.filter(f=>u.includes(f.Id)).slice(0,2);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[h.map((f,p,g)=>{var b,w;const v={};return g.length-1===p&&u.split(",").length>2&&((b=f.Type)!=null&&b.includes("image"))&&(v["img-length"]=`+${u.split(",").length-2}`),jsxRuntimeExports.jsx(NavLink,{to:ConfigData.fileUrl+f.Url,target:"_blank",className:styles["table-img"],style:l,...v,children:(w=f.Type)!=null&&w.includes("image")?jsxRuntimeExports.jsx("img",{alt:f.Name,src:ConfigData.imgUrlId+f.Id}):jsxRuntimeExports.jsxs(Text$2,{className:"body-3",maxLine:2,style:{color:"var(--primary-main-color)",flex:1},children:[f.Name,","]})},f.Id+"-"+p)}),h[1]&&!((d=h[1].Type)!=null&&d.includes("image"))&&u.split(",").length>2&&jsxRuntimeExports.jsx(Text$2,{className:"body-3",maxLine:1,children:`+${u.split(",").length-2}...`})]});default:return jsxRuntimeExports.jsx("p",{className:"comp-text body-3",style:{"--max-line":2,margin:0,flex:1,...l},children:u})}},CustomerAvatar=({data:o,style:a={},onClick:n,emableTooltip:s=!1})=>{var g;const l=React2.useRef(null),c=React2.useMemo(()=>o?{...o,bgColor:Util.generateDarkColorRgb(o.Id)}:null,[o]),[u,d]=React2.useState(!1),[h,f]=React2.useState(!1),p=React2.useMemo(()=>{if(!c)return{};const v={onClick:n,style:c.AvatarUrl&&!u?{cursor:n?"pointer":"auto",...a}:{backgroundColor:c.bgColor,color:"#fff",cursor:n?"pointer":"auto",...a}};return s&&(v.onMouseOver=()=>{f(!0)},v.onMouseOut=()=>{f(!1)}),v},[a,c,n,u]);return c&&jsxRuntimeExports.jsxs("div",{className:`row ${styles["customer-avatar"]}`,...p,ref:l,children:[c.AvatarUrl&&!u?jsxRuntimeExports.jsx("img",{src:c.AvatarUrl.startsWith("https")?c.AvatarUrl:ConfigData.imgUrlId+c.AvatarUrl,alt:"",style:{width:"100%",height:"100%",objectFit:"contain"},onError:()=>{d(!0)}}):jsxRuntimeExports.jsx(Text$2,{className:"row",style:{fontSize:"1em",fontWeight:600,color:"#fff"},children:(g=c==null?void 0:c.Name)==null?void 0:g.substring(0,1)}),h&&ReactDOM.createPortal(showTooltipElement({element:l.current,tooltip:{message:o.Name,position:"bottom"}}),document.body)]})},cellValue=(o,a,n=[],s=[])=>{const c=(()=>{if(!a||o.Column||Array.isArray(a)&&!a.length)return;const u=n.find(h=>h.Name===o.Name.split(".").pop());return u?(Array.isArray(a)?a:[a]).map(h=>{var p,g,v;let f=h[u.Name];switch(u.DataType){case FEDataType.DATE:f&&(f=Util.datetoString(new Date(f)));break;case FEDataType.DATETIME:switch(o.Type){case ColDataType.text:f&&(f=new Date(f).toLocaleString());break;default:f&&(f=Util.datetoString(new Date(f),"dd/mm/yyyy hh:mm"));break}break;case FEDataType.MONEY:f&&(f=Util.money(f));break;case FEDataType.PASSWORD:f&&(f="************");break;case FEDataType.BOOLEAN:typeof f=="string"?f=f==="true":typeof f=="number"?f=f===1:f=!!f;break}return(g=(p=u.Form)==null?void 0:p.Options)!=null&&g.length&&f!==void 0&&(typeof f=="string"?f=f.split(",").map(b=>{var w;return(w=u.Form.Options.find(x=>x.id===b))==null?void 0:w.name}).filter(b=>b).join(", "):f=(v=u.Form.Options.find(b=>b.id===f))==null?void 0:v.name),`${f??""}`}).join(", "):void 0})();switch(o.Type){case ColDataType.files:return s.filter(u=>c.includes(u.Id)).map(u=>ConfigData.fileUrl+u.Url).join(", ");default:return c}},SearchFilterData=({columns:o=[],fields:a=[],searchRaw:n="*",onChange:s,initFilterList:l=[],onChangeFilterData:c})=>{const u=React2.useRef(null),d=React2.useRef(null),{t:h}=useTranslation(),f=React2.useMemo(()=>o.filter(j=>{if(j.Name.split(".").length>1)return!1;const D=a.find(O=>O.Name===j.Name);return(D==null?void 0:D.DataType)===FEDataType.STRING}),[o.length,a.length]),p=React2.useMemo(()=>o.filter(j=>{if(j.Name.split(".").length>1)return!1;const D=a.find(O=>O.Name===j.Name);return[FEDataType.NUMBER,FEDataType.DATE,FEDataType.DATETIME,FEDataType.MONEY,FEDataType.BOOLEAN].includes(D==null?void 0:D.DataType)}),[o.length,a.length]),g=React2.useMemo(()=>o.filter(j=>j.Name.split(".").length>1),[o.length]),[v,b]=React2.useState({searchValue:"",nameFields:[]}),[w,x]=React2.useState(l.map(j=>({name:j,value:void 0}))),S=/@\w+:\("([^"%][^"]*[^"%]?)"\)/g,E=/@\w+:\("([^"%][^"]*[^"%]?)"\)/,T=/@(\w+):\{([^{}]+)\}|@(\w+):\[([^\[\]]+)\]/g;React2.useEffect(()=>{var j;if(n!=="*"){const D=f.filter(H=>n.includes(`@${H.Name}:`)).map(H=>H.Name),O=(j=n.match(S))==null?void 0:j.find(H=>H.includes(`@${D[0]}:`));b({searchValue:O?E.exec(O)[1]:"",nameFields:D})}else b({searchValue:"",nameFields:[]})},[n,f.length]),React2.useEffect(()=>{if(n!=="*"){let j;const D=[];for(;(j=T.exec(n))!==null;){const O=j[1]||j[3],H=j[2]||j[4],q=D.find(Y=>Y.name===O);q?q.value+=` ${H}`:O.endsWith("Id")?D.push({name:O,value:H.replace(/\*/g,"").split("|").map(Y=>Y.trim()).join(",")}):D.push({name:O,value:H})}x(O=>O.map(H=>{var q;return{name:H.name,value:(q=D.find(Y=>Y.name===H.name))==null?void 0:q.value.split(" ").join(",")}}))}else w&&x(j=>j.map(D=>({name:D.name,value:void 0})))},[n,p.length]),React2.useEffect(()=>{u.current&&u.current.getInput().value!==v.searchValue&&v.nameFields.length&&(u.current.getInput().value=v.searchValue)},[v.searchValue]);const C=(j,D)=>{let O=n;O!=="*"&&v.searchValue.length&&v.nameFields.length&&(v.nameFields.forEach(Y=>{const te=`(@${Y}:("%${v.searchValue}%")) | (@${Y}:("${v.searchValue}"))`;O=O.replace(`${te} | `,"").replace(te,"")}),O=O.replace(/\(/g,"").replace(/\)/g,"").trim());const q=`${j.length&&D.length?`(${D.map(Y=>`(@${Y}:("%${j}%")) | (@${Y}:("${j}"))`).join(" | ")})`:""} ${O==="*"?"":O}`.trim();s==null||s(q.length?q:"*")},A=(j=[])=>{let D=n;const O=[FEDataType.NUMBER,FEDataType.DATE,FEDataType.DATETIME,FEDataType.MONEY],H=w==null?void 0:w.filter(ee=>ee.value!==void 0&&ee.value!==null);D!=="*"&&(H!=null&&H.length)&&H.forEach(ee=>{var ne,ce;const re=a.find(ve=>ve.Name===ee.name);O.includes(re==null?void 0:re.DataType)?(ce=(ne=re.Form)==null?void 0:ne.Options)!=null&&ce.length?D=D.replace(`(${ee.value.split(",").map(ve=>`(@${ee.name}:[${ve}])`).join(" | ")})`,""):D=D.replace(`@${ee.name}:[${ee.value.split(",").join(" ")}]`,""):(re==null?void 0:re.DataType)===FEDataType.BOOLEAN?D=D.replace(`@${ee.name}:{${ee.value}}`,""):D=D.replace(`@${ee.name}:{${ee.value.split(",").map(ve=>`*${ve}*`).join(" | ")}}`,"")});const q=j.filter(ee=>ee.value!==void 0&&ee.value!==null),te=`${q.length?q.map(ee=>{var ne,ce;const re=a.find(ve=>ve.Name===ee.name);return O.includes(re==null?void 0:re.DataType)?(ce=(ne=re.Form)==null?void 0:ne.Options)!=null&&ce.length?`(${ee.value.split(",").map(ve=>`(@${ee.name}:[${ve}])`).join(" | ")})`:`@${ee.name}:[${ee.value.split(",").join(" ")}]`:(re==null?void 0:re.DataType)===FEDataType.BOOLEAN?`@${ee.name}:{${ee.value}}`:`@${ee.name}:{${ee.value.split(",").map(ve=>`*${ve}*`).join(" | ")}}`}).join(" "):""} ${D==="*"?"":D}`.trim();s==null||s(te.length?te:"*")},R=w==null?void 0:w.filter(j=>j.value!==void 0&&j.value!==null);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:d}),jsxRuntimeExports.jsx(TextField,{ref:u,placeholder:h("search"),prefix:jsxRuntimeExports.jsx(Winicon,{src:"fill/development/zoom",size:"1.4rem"}),style:{flex:1,maxWidth:"26.8rem"},className:"body-3 size32",suffix:jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/down-arrow",size:"1.2rem",onClick:j=>{const D=j.target.closest("label");if(D.onOpen)return closePopup(d);const O=D.getBoundingClientRect();D.onOpen=!0,showPopup({ref:d,hideOverlay:!0,content:jsxRuntimeExports.jsx(SearchinDropdown,{columns:f,nameFields:v.nameFields,onChange:H=>{C(v.searchValue,H),b({...v,nameFields:H})},style:{top:O.bottom+2,right:`calc(100dvw - ${O.right}px)`,width:O.width},onClose:()=>{setTimeout(()=>{D.onOpen=!1},150)}})})}}),onComplete:j=>{b({...v,searchValue:j.target.value.trim()}),C(j.target.value.trim(),v.nameFields),j.target.blur()}}),jsxRuntimeExports.jsx(Button,{prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/setup-tools",color:R!=null&&R.length?"var(--primary-main-color)":void 0}),label:`${h("filter")}${R!=null&&R.length?`: ${R.length}`:""}`,style:R!=null&&R.length?{backgroundColor:"var(--primary-background)",color:"var(--primary-main-color)"}:void 0,suffix:R!=null&&R.length?jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",size:"1.4rem",className:"icon-button light",onClick:j=>{if(j.preventDefault(),j.stopPropagation(),j.target.closest("button").onOpen)return closePopup(d);A(w.map(O=>({name:O.name,value:void 0}))),x(w.map(O=>({name:O.name,value:void 0}))),c==null||c(w.map(O=>O.name))}}):void 0,onClick:j=>{const D=j.target.closest("button");if(D.onOpen)return closePopup(d);const O=D.getBoundingClientRect();D.onOpen=!0,showPopup({ref:d,hideOverlay:!0,content:jsxRuntimeExports.jsx(FilterDropdown,{fields:a,enableEdit:!!c,filterData:w,columns:p,relativeCols:g,onChange:H=>{A(H),x(H),c==null||c((H==null?void 0:H.map(q=>q.name))??[])},style:{top:O.bottom+2,right:`calc(100dvw - ${O.right}px)`},onClose:()=>{setTimeout(()=>{D.onOpen=!1},150)}})})}})]})},SearchinDropdown=({style:o={},columns:a=[],onClose:n,onChange:s,nameFields:l=[]})=>{const[c,u]=React2.useState(l);return React2.useEffect(()=>()=>{n&&n()},[]),jsxRuntimeExports.jsx("div",{className:"col dropdown-popup",style:{gap:2,...o},children:a.map(d=>jsxRuntimeExports.jsxs("label",{className:"row default-hover popup-actions",style:{gap:"1.2rem",padding:"0.8rem",borderRadius:"0.8rem",cursor:"pointer"},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",style:{flex:1},maxLine:1,children:d.Title}),jsxRuntimeExports.jsx(Switch,{value:c.includes(d.Name),onChange:h=>{h?(s([...c,d.Name]),u([...c,d.Name])):(s(c.filter(f=>f!==d.Name)),u(c.filter(f=>f!==d.Name)))}})]},d.Id))})},FilterDropdown=({filterData:o,style:a={},onClose:n,columns:s=[],relativeCols:l=[],onChange:c,fields:u=[],enableEdit:d=!1})=>{const[h,f]=React2.useState([]),{t:p}=useTranslation(),g=React2.useRef(null);React2.useEffect(()=>()=>n==null?void 0:n(),[]),React2.useEffect(()=>{if(o!=null&&o.length)f(o);else{const b=[...s,...l].sort(()=>Math.random()-Math.random()).slice(0,3).map(w=>({name:w.Name.split(".").length>1?w.Name.split(".")[0]:w.Name,value:void 0}));f(b),c(b)}},[]);const v=(b,w)=>{const x=b.target.closest("button");if(x.onOpen)return closePopup(g);const S=x.getBoundingClientRect();x.onOpen=!0,showPopup({ref:g,hideOverlay:!0,content:jsxRuntimeExports.jsx(FilterOptionsDropdown,{onClose:()=>{setTimeout(()=>{x.onOpen=!1},150)},style:{top:S.bottom+2,left:S.x,width:S.width},columns:s,fields:u,data:[...s,...l].map(E=>({name:E.Name.split(".").length>1?E.Name.split(".")[0]:E.Name,value:void 0})).filter(E=>h.every(T=>T.name!==E.name)),onSelect:E=>{const T=w?h.map(C=>C.name===w.name?E:C):[...h,E];f(T),c(T),closePopup(g)}})})};return jsxRuntimeExports.jsxs("div",{className:"col dropdown-popup",style:{maxHeight:"40rem",width:"64rem",padding:0,...a},children:[jsxRuntimeExports.jsx(Popup,{ref:g}),jsxRuntimeExports.jsxs("div",{className:"row popup-header",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/setup-tools"}),jsxRuntimeExports.jsx(Text$2,{className:"heading-7",style:{flex:1},children:p("filter")}),jsxRuntimeExports.jsx(Button,{label:p("clearall"),className:"button-text-5 button-grey size24",onClick:()=>{f(b=>b.map(w=>({name:w.name,value:void 0}))),c(h.map(b=>({name:b.name,value:void 0})))}})]}),jsxRuntimeExports.jsxs("div",{className:"col",style:{flex:1,overflow:"hidden auto",padding:"1.6rem 2.4rem",gap:"0.8rem"},children:[h.map((b,w,x)=>jsxRuntimeExports.jsx(FilterTile,{enableEdit:d,onScroll:w+1===x.length,filterItem:b,columns:s,fields:u,showOptions:S=>v(S,b),onChange:S=>{if(S){const E=h.map(T=>T.name===S.name?S:T);f(E),c(E)}},onRemove:()=>{f(S=>S.filter(E=>E.name!==b.name)),c(h.filter(S=>S.name!==b.name))}},b.name+" - "+w)),d&&jsxRuntimeExports.jsx(Button,{label:p("add"),className:"button-text-5 button-infor size24 dashed",prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-add",size:"1.2rem"}),onClick:v})]})]})},FilterTile=({filterItem:o,onScroll:a,onRemove:n,columns:s=[],fields:l=[],onChange:c,showOptions:u,enableEdit:d=!1})=>{const h=l.find(v=>(v.Column??v.Name)===o.name);if(!h)return null;const{t:f}=useTranslation(),p=s.find(v=>v.Name===o.name),g=(p==null?void 0:p.Type)??(["CustomerId","UserId"].includes(o.name)?ColDataType.people:ColDataType.text);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{ref:v=>{v&&a&&v.parentElement.scrollTo({top:v.offsetTop,behavior:"smooth"})},className:"row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsxs("button",{type:"button",className:`row ${styles["dropdown-select-btn"]}`,disabled:!d,onClick:u,children:[ColDataTypeIcon[g],jsxRuntimeExports.jsx(Text$2,{style:{flex:1},className:"body-3",maxLine:1,children:(p==null?void 0:p.Title)??h.Form.Label??o.name}),jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/down-arrow",size:"1.2rem"})]}),jsxRuntimeExports.jsx("div",{className:"row",style:{flex:1,overflow:"visible"},children:h&&jsxRuntimeExports.jsx(InputValueTile,{fieldItem:h,filterItem:o,colData:p,onChange:c})}),d&&jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/trash-can",className:"icon-button light",tooltip:{message:f("remove")},onClick:n})]})})},InputValueTile=({fieldItem:o,filterItem:a,colData:n,onChange:s})=>{var g,v,b;const l=React2.useRef(null),[c,u]=React2.useState([]),[d,h]=React2.useState(a),{t:f}=useTranslation();React2.useEffect(()=>{var w;if(o.TablePK){const x=(((w=d.value)==null?void 0:w.split(","))??[]).slice(0,3);x.length&&new DataController(o.TablePK).getListSimple({page:1,size:x.length,query:`@Id:{${x.join(" | ")}}`}).then(E=>{E.code===200&&u(E.data)})}},[d.value]),React2.useEffect(()=>{h(a)},[a]);const p=w=>{w!=null&&w.length?(s({...d,value:w}),h({...d,value:w})):(s({...d,value:void 0}),h({...d,value:void 0}))};switch(o.DataType){case FEDataType.NUMBER:case FEDataType.MONEY:if(o.Form.Options){let w=o.Form.Options.filter(x=>{var S;return(S=d.value)==null?void 0:S.split(",").map(E=>Number(E)).includes(x.id)});return w.length?w=w.map(x=>x.name).join(", "):w=void 0,jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:l}),jsxRuntimeExports.jsx("button",{type:"button",className:`row ${styles["button-filter"]}`,onClick:x=>{const S=x.target.closest("button");if(S.isOpen)return closePopup(l);S.isOpen=!0;const E=S.getBoundingClientRect();showPopup({ref:l,hideOverlay:!0,content:jsxRuntimeExports.jsx(FilterValueOptionsDropdown,{onClose:()=>{setTimeout(()=>{S.isOpen=!1},150)},style:{top:E.bottom+2,left:E.x,width:E.width},initData:o.Form.Options,selected:d.value,isMulti:!0,onSelect:p})})},children:jsxRuntimeExports.jsx(Text$2,{className:w?"body-3":"placeholder-2",children:w??`${instance.t("select")} ${((n==null?void 0:n.Title)??o.Form.Label??d.name).toLowerCase()}`})})]})}else return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:l}),jsxRuntimeExports.jsx("button",{type:"button",className:`row ${styles["button-filter"]}`,onClick:w=>{const x=w.target.closest("button");if(x.isOpen)return closePopup(l);x.isOpen=!0;const S=x.getBoundingClientRect();showPopup({ref:l,hideOverlay:!0,content:jsxRuntimeExports.jsx(FilterRangeDropdown,{fieldItem:o,filterItem:d,onClose:()=>{setTimeout(()=>{x.isOpen=!1},150)},style:{top:S.bottom+2,left:S.x,width:S.width},onApply:E=>{closePopup(l),p(E)}})})},children:jsxRuntimeExports.jsx(Text$2,{className:d.value?"body-3":"placeholder-2",children:d.value?o.DataType===FEDataType.MONEY?d.value.split(",").map(w=>Util.money(w)).join(" - "):d.value.split(",").join(" - "):`${instance.t("select")} ${((n==null?void 0:n.Title)??o.Form.Label??d.name).toLowerCase()}`})})]});case FEDataType.DATE:case FEDataType.DATETIME:return jsxRuntimeExports.jsx(DateTimePicker,{className:o.value?"body-3":"placeholder-2",pickerType:o.DataType===FEDataType.DATE?"daterange":"datetimerange",placeholder:`${instance.t("select")} ${((n==null?void 0:n.Title)??o.Form.Label??d.name).toLowerCase()}`,style:{width:"100%",padding:"0 1.2rem",height:"3.2rem",border:"var(--neutral-main-border)"},prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/calendar-date-2",style:{marginRight:"0.4rem"},size:"1.2rem"}),value:((g=d.value)==null?void 0:g.split(",").map(w=>new Date(parseInt(w))))??[],onChange:({start:w,end:x})=>{p(`${w.getTime()},${x.getTime()}`)}});case FEDataType.BOOLEAN:return jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"1.2rem 1.6rem",flex:1,flexWrap:"wrap"},children:[jsxRuntimeExports.jsxs("label",{className:"row",style:{gap:"0.8rem",cursor:"pointer"},children:[jsxRuntimeExports.jsx(RadioButton,{value:"undefined",size:"1.6rem",name:a.name,checked:a.value===void 0,onChange:()=>p(void 0)}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:f("all")})]}),((v=o.Form.Options)!=null&&v.length?o.Form.Options:[{id:"true",name:f("true")},{id:"false",name:f("false")}]).map(w=>jsxRuntimeExports.jsxs("label",{className:"row",style:{gap:"0.8rem",cursor:"pointer"},children:[jsxRuntimeExports.jsx(RadioButton,{value:w.id,size:"1.6rem",name:a.name,checked:a.value===w.id,onChange:()=>p(w.id)}),jsxRuntimeExports.jsx(Text$2,{className:"label-4",maxLine:1,children:w.name})]},w.id))]});default:if(o.Column){const w=((b=d.value)==null?void 0:b.split(",").map(x=>c.find(S=>S.Id===x)).filter(x=>!!x))??[];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:l}),jsxRuntimeExports.jsx("button",{type:"button",className:`row ${styles["button-filter"]}`,onClick:x=>{const S=x.target.closest("button");if(S.isOpen)return closePopup(l);S.isOpen=!0;const E=S.getBoundingClientRect();showPopup({ref:l,hideOverlay:!0,content:jsxRuntimeExports.jsx(FilterValueOptionsDropdown,{onClose:()=>{setTimeout(()=>{S.isOpen=!1},150)},style:{top:E.bottom+2,left:E.x,width:E.width},selected:d.value,controlName:o.TablePK,isMulti:!0,onSelect:p})})},children:w.length?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[w.slice(0,2).map(x=>jsxRuntimeExports.jsx(Tag,{title:x.Name,className:"size24 button-text-6 tag-grey",suffix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",size:"1.2rem",onClick:S=>{var E;S.stopPropagation(),p((E=d.value)==null?void 0:E.split(",").filter(T=>T!==x.Id).join(","))}})},x.Id)),!!w.length&&d.value.split(",").length>2&&jsxRuntimeExports.jsx(Tag,{title:`+${d.value.split(",").length-2}`,className:"size24 button-text-6 tag-grey"})]}):jsxRuntimeExports.jsx(Text$2,{className:"placeholder-2",children:`${instance.t("select")} ${((n==null?void 0:n.Title)??o.Form.Label??d.name).toLowerCase()}`})})]})}return null}},FilterRangeDropdown=({onClose:o,style:a={},onApply:n,fieldItem:s,filterItem:l})=>{const c=React2.useRef(null),u=React2.useRef(null),[d,h]=React2.useState({min:0,max:0}),[f,p]=React2.useState(l.value),{t:g}=useTranslation();return React2.useEffect(()=>()=>{o&&o()},[]),React2.useEffect(()=>{const v=new DataController(s.TableName);Promise.all([v.group({searchRaw:"*",reducers:`FILTER "exists(@${s.Name})" GROUPBY 0 REDUCE MIN 1 @${s.Name} AS min`}),v.group({searchRaw:"*",reducers:`FILTER "exists(@${s.Name})" GROUPBY 0 REDUCE MAX 1 @${s.Name} AS max`})]).then(b=>{var w,x;b.every(S=>S.code===200)&&h({min:parseInt(((w=b[0].data[0])==null?void 0:w.min)??0),max:parseInt(((x=b[1].data[0])==null?void 0:x.max)??0)})})},[]),React2.useEffect(()=>{c.current&&u.current&&(c.current.getInput().value=f?s.DataType===FEDataType.MONEY?Util.money(f.split(",")[0]):f.split(",")[0]:"",u.current.getInput().value=f?s.DataType===FEDataType.MONEY?Util.money(f.split(",")[1]):f.split(",")[1]:"")},[f,c.current,u.current]),jsxRuntimeExports.jsx("div",{className:"col dropdown-popup popup-actions",style:{minWidth:"30rem",maxWidth:"36rem",padding:"1.6rem",gap:"1.6rem",alignItems:"center",maxHeight:"fit-content",...a},children:d.min===0&&d.max===0?jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",alignItems:"inherit"},children:[jsxRuntimeExports.jsx(Winicon,{src:"color/files/archive-doc",size:"2.8rem"}),jsxRuntimeExports.jsx(Text$2,{className:"heading-7",children:"No data"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"row",style:{gap:"1.6rem",width:"100%"},children:[jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",flex:1},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:g("min")}),jsxRuntimeExports.jsx(TextField,{ref:c,className:"body-3 size32",placeholder:g("min"),defaultValue:f!=null&&f.length?s.DataType===FEDataType.MONEY?Util.money(f.split(",")[0]):f.split(",")[0]:"",onFocus:v=>{s.DataType===FEDataType.MONEY&&(v.target.value=v.target.value.replace(/,/g,"")),v.target.select()},onBlur:v=>{v.target.value=v.target.value.trim(),isNaN(parseInt(v.target.value))?v.target.value=f==null?void 0:f.split(",")[0]:f!=null&&f.split(",")[1]&&parseInt(v.target.value)>parseInt(f==null?void 0:f.split(",")[1])?v.target.value=f==null?void 0:f.split(",")[1]:parseInt(v.target.value)<d.min&&(v.target.value=d.min),p(`${v.target.value},${f==null?void 0:f.split(",")[1]}`)}})]}),jsxRuntimeExports.jsxs("div",{className:"col",style:{gap:"0.8rem",flex:1},children:[jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:g("max")}),jsxRuntimeExports.jsx(TextField,{ref:u,className:"body-3 size32",placeholder:g("max"),defaultValue:f!=null&&f.length?s.DataType===FEDataType.MONEY?Util.money(f.split(",")[1]):f.split(",")[1]:"",onFocus:v=>{s.DataType===FEDataType.MONEY&&(v.target.value=v.target.value.replace(/,/g,"")),v.target.select()},onBlur:v=>{v.target.value=v.target.value.trim(),isNaN(parseInt(v.target.value))?v.target.value=f==null?void 0:f.split(",")[1]:f!=null&&f.split(",")[0]&&parseInt(v.target.value)<parseInt(f==null?void 0:f.split(",")[0])?v.target.value=f==null?void 0:f.split(",")[0]:parseInt(v.target.value)>d.max&&(v.target.value=d.max),p(`${f==null?void 0:f.split(",")[0]},${v.target.value}`)}})]})]}),jsxRuntimeExports.jsx(Slider,{formatter:s.DataType===FEDataType.MONEY?Util.money:void 0,style:{width:"calc(100% - 2.4rem)",height:"1.6rem"},range:!0,tooltip:!0,step:Number(((d.max-d.min)/100).toFixed(2)),min:d.min,max:d.max,defaultValue:f!=null&&f.length?f.split(",").map(v=>parseInt(v)):[d.min,d.max],onChangeComplete:v=>{p(`${v[0]},${v[1]}`)}}),jsxRuntimeExports.jsx("div",{className:"col",style:{gap:2,width:"100%"},children:Array.from({length:5}).map((v,b)=>{const w=s.DataType===FEDataType.MONEY?Math.round((d.max-d.min)/5e3)*1e3:Math.round((d.max-d.min)/5),x=d.min+w*b,S=b===4?d.max:Math.ceil(x+w);return jsxRuntimeExports.jsxs("label",{className:"row default-hover",style:{gap:"1rem",width:"100%",padding:"0.5rem",cursor:"pointer",borderRadius:"0.8rem"},children:[jsxRuntimeExports.jsx(RadioButton,{name:"range",size:"1.6rem",value:`${x},${S}`,checked:f===`${x},${S}`,onChange:()=>p(`${x},${S}`)}),jsxRuntimeExports.jsxs(Text$2,{className:"label-4",style:{flex:1},children:[s.DataType===FEDataType.MONEY?Util.money(Math.floor(x)):Math.floor(x)," - ",s.DataType===FEDataType.MONEY?Util.money(S):S]})]},b)})}),jsxRuntimeExports.jsxs("div",{className:"row",style:{justifyContent:"end",gap:"0.8rem",width:"100%"},children:[jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24 button-grey",label:g("reset"),onClick:()=>{p(l.value)}}),jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24 button-primary",label:g("apply"),onClick:()=>{n==null||n(f)}})]})]})})},FilterValueOptionsDropdown=({onClose:o,onSelect:a,style:n={},selected:s,initData:l=[],controlName:c,searchRaw:u="*",isMulti:d=!1})=>{const[h,f]=React2.useState({data:[],totalCount:void 0}),[p,g]=React2.useState(s);React2.useEffect(()=>()=>{o&&o()},[]);const v=async b=>{const w=new DataController(c),x=["Id","Name"];(c==="User"||c==="Customer")&&x.push("AvatarUrl");const S=await w.aggregateList({page:b??1,size:20,searchRaw:u,returns:x});S.code===200&&f({data:b?[...h.data,...S.data]:S.data,totalCount:S.totalCount})};return React2.useEffect(()=>{l.length?f({data:l,totalCount:l.length}):c&&v()},[]),jsxRuntimeExports.jsx(InfiniteScroll,{handleScroll:async b=>{b&&h.totalCount&&h.data.length<h.totalCount&&await v(Math.floor(h.data.length/20)+1)},className:"col dropdown-popup popup-actions",style:{maxHeight:"32rem",overflow:"hidden auto",...n},children:d?h.data.map(b=>{const w=`${p}`==`${b.Id??b.id}`||typeof p=="string"&&(p==null?void 0:p.includes(b.Id??b.id));return jsxRuntimeExports.jsxs("label",{className:"row default-hover",style:{gap:"0.8rem",padding:"0.8rem",borderRadius:"0.8rem",cursor:"pointer"},children:[jsxRuntimeExports.jsx(Checkbox,{onChange:x=>{let S=(p==null?void 0:p.split(","))??[];x?S.push(`${b.Id??b.id}`):S=S.filter(E=>E!==`${b.Id??b.id}`),a(S.length?S.join(","):void 0),g(S.length?S.join(","):void 0)},value:w,size:"1.8rem"}),jsxRuntimeExports.jsx(Text$2,{style:{flex:1},className:"label-3",maxLine:1,children:b.Name??b.name})]},b.Id??b.id)}):h.data.map(b=>{const w=`${p}`==`${b.Id??b.id}`||typeof p=="string"&&p.includes(b.Id??b.id);return jsxRuntimeExports.jsxs("button",{type:"button",className:"row",style:{backgroundColor:w?"var(--neutral-selected-background-color)":void 0},onClick:()=>{a(b.Id),g(b.Id)},children:[(c==="User"||c==="Customer")&&jsxRuntimeExports.jsx(CustomerAvatar,{data:b,style:{width:"2.8rem",height:"2.8rem"}}),jsxRuntimeExports.jsx(Text$2,{style:{flex:1},className:"button-text-3",maxLine:1,children:b.Name??b.name})]},b.Id??b.id)})})},FilterOptionsDropdown=({onClose:o,onSelect:a,data:n=[],style:s,fields:l=[],columns:c=[]})=>(React2.useEffect(()=>()=>{o&&o()},[]),jsxRuntimeExports.jsx("div",{className:"col dropdown-popup popup-actions",style:{maxHeight:"24rem",overflow:"hidden auto",...s},children:n.map((u,d)=>{const h=l.find(g=>(g.Column??g.Name)===u.name),f=c.find(g=>g.Name===u.name),p=(f==null?void 0:f.Type)??(["CustomerId","UserId"].includes(u.name)?ColDataType.people:ColDataType.text);return jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{a(u)},children:[ColDataTypeIcon[p],jsxRuntimeExports.jsx(Text$2,{style:{flex:1},className:"button-text-3",maxLine:1,children:(f==null?void 0:f.Title)??h.Form.Label??u.name})]},u.name+" -  "+d)})})),ButtonImportData=({onImport:o})=>{const a=React2.useRef(null),{t:n}=useTranslation(),s=async l=>{if(l&&!(l instanceof File)){if(typeof l=="string"){const c=await handleGoogleSheetFetch(l);if(c!=null&&c.length){const u=Object.keys(c[0]).map(p=>p).filter(p=>p.split(".").length>1),d={};let h=[];for(const p of c){const g={Id:randomGID(),DateCreated:Date.now(),...p};u.forEach(v=>{d[v]??(d[v]=[]),d[v].includes(g[v])||d[v].push(g[v])}),h.push(g)}const f=await Promise.all(Object.keys(d).map(p=>{const g=p.split("."),v=new DataController(g[0]),b=d[p].map(w=>w.split(",")).flat(1/0).length;return v.getListSimple({page:1,size:b,query:`@${g[1]}:(${d[p].map(w=>w.split(",")).flat(1/0).map(w=>`"${w.trim()}"`).join(" | ")})`,returns:["Id",g[1]]})}));return f.every(p=>p.code===200)&&Object.keys(d).map((p,g)=>{const v=f[g].data;h=h.map(b=>{const w=p.split("."),x={...b};return x[`${w[0]}Id`]=b[p].split(",").map(S=>v.find(E=>E[w[1]]===S.trim())).filter(S=>!!S).map(S=>S.Id).join(","),delete x[p],x})}),h}}}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:a}),jsxRuntimeExports.jsx(Button,{prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/data-upload"}),label:n("import"),onClick:l=>{const c=l.target.closest("button").getBoundingClientRect();showPopup({ref:a,hideOverlay:!0,content:jsxRuntimeExports.jsxs("div",{className:"col popup-actions dropdown-popup",style:{width:"16rem",top:c.bottom+2,right:`calc(100dvw - ${c.right}px)`},children:[jsxRuntimeExports.jsx("button",{type:"button",className:"row",onClick:()=>{showPopup({ref:a,clickOverlayClosePopup:!0,content:jsxRuntimeExports.jsxs("div",{className:"col",children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-8",style:{padding:"0.8rem 1.6rem",borderBottom:"1px solid var(--neutral-border-color-main)"},children:"Gắn link google sheets"}),jsxRuntimeExports.jsxs("div",{className:"col",style:{padding:"0.8rem 1.6rem",alignItems:"end",gap:"1.6rem"},children:[jsxRuntimeExports.jsx(TextField,{style:{width:"40rem"},placeholder:"Nhập link google sheets",className:"body-3 size32"}),jsxRuntimeExports.jsx(Button,{className:"button-primary button-text-3",onClick:async u=>{const h=u.target.closest(".col").querySelector("input").value,f=await s(h);o==null||o(f??[]),closePopup(a)},label:n("save")})]})]})})},children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:"Google sheets"})}),jsxRuntimeExports.jsx("button",{type:"button",className:"row",children:jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:"Tệp xlsx"})})]})})}})]})},ActionOptionsDropdown=React2.forwardRef(({onClose:o,actions:a=[],onChangeActions:n,style:s,onEdit:l,onDuplicate:c,onDelete:u,item:d,tbName:h,title:f},p)=>{const g=new DataController(h),[v,b]=React2.useState(),{t:w}=useTranslation();return React2.useEffect(()=>{if(a.length){const x={returns:["Id"]};a.forEach(S=>{x[S.TableFK]={searchRaw:`@${h}Id:{*${d.Id}*}`,reducers:`GROUPBY 1 @${h}Id REDUCE COUNT 0 AS total${S.TableFK}`}}),g.patternList({page:1,size:1,searchRaw:`@Id:{${d.Id}}`,pattern:x}).then(S=>{b(S.data[0])})}return()=>{o&&o()}},[]),jsxRuntimeExports.jsxs("div",{className:"col dropdown-popup popup-actions",style:s,children:[l&&jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{closePopup(p),l()},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/edit",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:w("edit")})]}),c&&jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:c,children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/layout/copy-2",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:w("duplicate")})]}),a.map(x=>jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{console.log(x),showPopup({ref:p,clickOverlayClosePopup:!0,content:jsxRuntimeExports.jsx(FKTable,{onClose:()=>closePopup(p),item:d,fkItem:x,tbName:h,actions:a,onChangeActions:n,enableEdit:!!l})})},children:[x.Prefix?jsxRuntimeExports.jsx(Winicon,{src:x.Prefix,size:"1.4rem"}):jsxRuntimeExports.jsx("div",{style:{width:"1.8rem"}}),jsxRuntimeExports.jsxs(Text$2,{className:"button-text-3",children:[x.Name," (",(v==null?void 0:v[`total${x.TableFK}`])??0,")"]})]},x.Id)),u&&jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{closePopup(p),showDialog({alignment:DialogAlignment.center,title:"Confirm delete",content:`Are you sure to delete this ${(f==null?void 0:f.toLowerCase())??h}?`,submitTitle:w("delete"),onSubmit:u})},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/trash-can",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"label-3",children:w("delete")})]})]})}),FKTable=({fkItem:o,item:a,tbName:n,actions:s,onChangeActions:l,enableEdit:c,onClose:u})=>{const[d,h]=React2.useState({searchRaw:"*",sortby:[]}),f={};return f[`${n}Id`]=a.Id,jsxRuntimeExports.jsxs("div",{className:"col",style:{width:"100dvw",maxWidth:1320,height:"80dvh"},children:[jsxRuntimeExports.jsxs("div",{className:"row popup-header",children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-7",style:{flex:1},maxLine:2,children:o.Name}),jsxRuntimeExports.jsx(Winicon,{src:"fill/user interface/e-remove",className:"icon-button size24",onClick:u})]}),jsxRuntimeExports.jsx("div",{className:"col",style:{flex:1},children:jsxRuntimeExports.jsx(DataTable,{showIndex:!0,staticSearch:`@${n}Id:{*${a.Id}*}`,enableEdit:c,tbName:o.TableFK,title:o.Name,columns:o.Columns,onChangeFilterData:h,filterData:d,onChangeConfigData:l?async p=>{const g={...o,Columns:p};l(s.map(v=>v.Id===o.Id?g:v))}:void 0,filterList:o.Filter??[],onChangeFilterList:l?async p=>{if(JSON.stringify(p)!==JSON.stringify(o.Filter)){const g={...o,Filter:p};l(s.map(v=>v.Id===o.Id?g:v))}}:void 0,...f})})]})},AddEditElementForm=React2.forwardRef(({tbName:o="",title:a,activeColumns:n=[],id:s,onSuccess:l,...c},u)=>{const d=new DataController(o),[h,f]=React2.useState(),[p,g]=React2.useState([]),[v,b]=React2.useState([]),{t:w}=useTranslation(),x=async()=>{const S=n.filter(A=>A.Name.split(".").length===1).map(A=>A.Name).filter((A,R,j)=>A!=="DateCreated"&&j.indexOf(A)===R),E=n.filter(A=>A.Name.split(".").length>1).map(A=>A.Name.split(".").shift()).filter((A,R,j)=>j.indexOf(A)===R),T=new TableController("column"),C=new TableController("rel");T.getListSimple({page:1,size:100,query:`@TableName:{${o}} @Name:{${S.join(" | ")}}`,returns:["Id","Name","DataType","Query","Form"],sortby:{BY:"DateCreated"}}).then(A=>{A.totalCount&&g(A.data.map(R=>{const j={...R,Form:R.Form?JSON.parse(R.Form):{}};return j.Form.Sort=n.findIndex(D=>D.Name===R.Name),j}))}),C.getListSimple({page:1,size:100,query:`@TableFK:{${o}} @Column:{${E.join(" | ")}}`,returns:["Id","Column","Form","TablePK","Query"]}).then(A=>{A.totalCount&&b(A.data.map(R=>{const j={...R,Form:R.Form?JSON.parse(R.Form):{}};return j.Form.Sort=n.findIndex(D=>D.Name.split(".")[0]===R.Column),j}))})};return React2.useEffect(()=>{s&&d.getById(s).then(S=>{S.code===200?f(S.data):ToastMessage.errors(S.message)}),x()},[]),jsxRuntimeExports.jsxs("div",{className:"col",style:{flex:1,width:"100dvw",maxWidth:680,height:"80dvh"},children:[jsxRuntimeExports.jsxs("div",{className:"popup-header row",style:{gap:"0.8rem"},children:[jsxRuntimeExports.jsx(Text$2,{className:"heading-7",style:{flex:1},children:s?`${w("edit")} ${a??o}`:`${w("add")} ${a??o}`}),jsxRuntimeExports.jsx(Winicon,{src:"fill/user interface/e-remove",className:"icon-button size24",onClick:()=>{closePopup(u)}})]}),!!p.length&&(!s||h)&&jsxRuntimeExports.jsx(FormView,{cols:p.filter(S=>{var E;return!((E=S.Query)!=null&&E.length)}),rels:v,item:h??c,tbName:o,onCancel:()=>{showDialog({alignment:DialogAlignment.center,status:ComponentStatus.WARNING,submitTitle:w("submit"),title:`${w("confirm")} ${w("cancel").toLowerCase()} `+w(s?"edit":"add"),onSubmit:()=>{closePopup(u)}})},onSuccess:()=>{closePopup(u),ToastMessage.success(`${w(s?"edit":"add")} ${a??o} ${w("successfully").toLowerCase()}!`),l==null||l()}})]})}),FormView=({cols:o=[],rels:a=[],item:n,tbName:s,onCancel:l,onSuccess:c})=>{const u=new DataController(s),d=useForm({shouldFocusError:!1,defaultValues:{Id:randomGID()}}),h=React2.useMemo(()=>a.filter(x=>{var S;return x.Query&&((S=x.Query.match(regexGetVariableByThis))==null?void 0:S.length)}),[a.length]),f=React2.useMemo(()=>a.filter(x=>{var S;return!x.Query||!((S=x.Query.match(regexGetVariableByThis))!=null&&S.length)}),[a.length]),p=React2.useMemo(()=>h.map(x=>{var E;const S=(E=x.Query)==null?void 0:E.match(regexGetVariableByThis)[0];return d.watch(S.replace(regexGetVariableByThis,(T,C)=>C))}),[h.length]),g=useForm({shouldFocusError:!1}),v=async x=>{var A;let S={...x};S.DateCreated??(S.DateCreated=Date.now());let E={};Object.keys(S).forEach(R=>{typeof S[R]=="string"&&(E[R]=S[R].trim())});const T=await validateForm({list:o.filter(R=>{var j;return(j=R.Form.Validate)==null?void 0:j.length}).map(R=>({Name:R.Name,Validate:R.Form.Validate})),formdata:E});if(T&&Object.keys(T).length>0){Object.keys(T).forEach(R=>{d.setError(R,{message:T[R].join(", ")})});return}for(let R of o)if(R.Name==="DateCreated")S[A=R.Name]??(S[A]=Date.now());else if(S[R.Name]!=null&&!R.Query)switch(R.DataType){case FEDataType.STRING:Array.isArray(S[R.Name])?S[R.Name]=S[R.Name].join(","):typeof S[R.Name]!="string"&&(S[R.Name]=`${S[R.Name]}`);break;case FEDataType.BOOLEAN:S[R.Name]=!![!0,1,"true"].includes(S[R.Name]);break;case FEDataType.NUMBER:S[R.Name]=typeof S[R.Name]=="string"?parseFloat(S[R.Name]):S[R.Name],isNaN(S[R.Name])&&delete S[R.Name];break;case FEDataType.DATE:case FEDataType.DATETIME:S[R.Name]=S[R.Name].getTime();break;case FEDataType.MONEY:S[R.Name]=S[R.Name]?parseInt(S[R.Name].replaceAll(",","")):null;break;case FEDataType.PASSWORD:const D=await new AccountController().hashPassword(S[R.Name]);S[R.Name]=D.data;break;case FEDataType.FILE:if(x[R.Name]&&Array.isArray(x[R.Name])){const O=x[R.Name].filter(H=>H instanceof File);if(O.length){const H=await BaseDA.uploadFiles(O);H!=null&&H.length&&(S[R.Name]=x[R.Name].map(q=>{var Y;return q instanceof File?(Y=H.find(te=>te.Name===q.name))==null?void 0:Y.Id:q.Id}).filter(q=>!!(q!=null&&q.length)).join(","))}else S[R.Name]=x[R.Name].map(H=>H.Id).join(",")}break}for(let R of a)S[R.Column]&&Array.isArray(S[R.Column])&&(S[R.Column]=S[R.Column].join(","));const C=await u.add([S]);if(C.code!==200)return ToastMessage.errors(C.message);c==null||c()},b=()=>{};React2.useEffect(()=>{if(o.length)if(n){const x=[];Object.keys(n).forEach(S=>{var C,A;const E=o.find(R=>R.Name===S),T=a.find(R=>R.Column===S);if(E)switch(E.DataType){case FEDataType.GID:d.setValue(S,n[S]);break;case FEDataType.STRING:(C=E.Form.Options)!=null&&C.length?d.setValue(S,(n[S]??"").split(",")):d.setValue(S,n[S]);break;case FEDataType.HTML:d.setValue(S,n[S]);break;case FEDataType.BOOLEAN:d.setValue(S,n[S]),E.Form.ComponentType===ComponentType.radio&&d.setValue(S,`${n[S]}`);break;case FEDataType.NUMBER:d.setValue(S,typeof n[S]=="string"?parseFloat(n[S]):n[S]);break;case FEDataType.DATE:case FEDataType.DATETIME:d.setValue(S,new Date(typeof n[S]=="string"?parseInt(n[S]):n[S]));break;case FEDataType.MONEY:d.setValue(S,Util.money(n[S]));break;case FEDataType.PASSWORD:d.setValue(S,n[S]);break;case FEDataType.FILE:n[S]&&x.push({id:n[S],name:S,multiple:E.Form.Multiple});break}else if(T){const R=(A=n[S])!=null&&A.length?n[S].split(","):[];d.setValue(S,T.Form.ComponentType===ComponentType.selectMultiple?R:R[0])}else d.setValue(S,n[S])}),x.length&&BaseDA.getFilesInfor(x.map(S=>S.id.split(",")).flat(1/0)).then(S=>{S.code===200&&x.forEach(E=>{const T=S.data.filter(C=>C!=null&&E.id.includes(C.Id));T.length&&d.setValue(E.name,T.map(C=>({...C,name:C.Name,size:C.Size,type:C.Type,url:ConfigData.imgUrlId+C.Id})))})})}else o.filter(x=>{var S,E;return((S=x.Form)==null?void 0:S.DefaultValue)!=null&&((E=x.Form)==null?void 0:E.DefaultValue)!==""}).forEach(x=>{var S;switch(x.DataType){case FEDataType.GID:d.setValue(x.Name,x.Form.DefaultValue);break;case FEDataType.STRING:(S=x.Form.Options)!=null&&S.length?d.setValue(x.Name,x.Form.DefaultValue.split(",")):d.setValue(x.Name,x.Form.DefaultValue);break;case FEDataType.HTML:d.setValue(x.Name,x.Form.DefaultValue);break;case FEDataType.BOOLEAN:d.setValue(x.Name,x.Form.DefaultValue);break;case FEDataType.NUMBER:d.setValue(x.Name,typeof x.Form.DefaultValue=="string"?parseFloat(x.Form.DefaultValue):x.Form.DefaultValue);break;case FEDataType.DATE:case FEDataType.DATETIME:d.setValue(x.Name,new Date(typeof x.Form.DefaultValue=="string"?parseInt(x.Form.DefaultValue):x.Form.DefaultValue));break;case FEDataType.MONEY:d.setValue(x.Name,Util.money(x.Form.DefaultValue));break;case FEDataType.PASSWORD:d.setValue(x.Name,x.Form.DefaultValue);break}})},[n,o.length]),React2.useEffect(()=>{f.length&&w({relatives:f})},[f]);const w=({relatives:x=[],isWatch:S=!1})=>{x.forEach(E=>{var C,A;const T=new DataController(E.TablePK);E.TablePK===s?T.aggregateList({page:1,size:500,searchRaw:`@ParentId:{empty} ${S?(C=E.Query)==null?void 0:C.replace(regexGetVariableByThis,R=>d.getValues((regexGetVariableByThis.exec(R)??[])[1])):E.Query}`,returns:["Id","Name"]}).then(async R=>{R.code===200&&g.setValue(`${E.Column}_Options`,R.data??[])}):T.getListSimple({page:1,size:1e3,query:S?(A=E.Query)==null?void 0:A.replace(regexGetVariableByThis,R=>d.getValues((regexGetVariableByThis.exec(R)??[])[1])):E.Query,returns:["Id","Name","ParentId"]}).then(R=>{R.code===200&&g.setValue(`${E.Column}_Options`,R.data??[])})})};return React2.useEffect(()=>{w({relatives:h,isWatch:!0})},[...p]),jsxRuntimeExports.jsxs("form",{className:"col",style:{flex:1,width:"100%",height:"100%"},children:[jsxRuntimeExports.jsxs("div",{className:"col",style:{flex:1,width:"100%",height:"100%",padding:"1.6rem 2.4rem",gap:"1.6rem",overflow:"hidden auto"},children:[o.map(x=>jsxRuntimeExports.jsx(RenderComponentByType,{fieldItem:x,methods:d,style:{order:x.Form.Sort}},x.Id)),a.map((x,S)=>{let T=(g.watch(`${x.Column}_Options`)??[]).map(C=>({id:C.Id,name:C.Name,parentId:C.ParentId}));switch(x.Form.ComponentType){case ComponentType.selectMultiple:return jsxRuntimeExports.jsx(SelectMultipleForm,{methods:d,required:x.Form.Required,name:x.Column,label:x.Form.Label??x.Column,placeholder:x.Form.Placeholder,style:{order:x.Form.Sort},options:T},x.Id);default:return jsxRuntimeExports.jsx(Select1Form,{methods:d,required:x.Form.Required,name:x.Column,label:x.Form.Label??x.Column,placeholder:x.Form.Placeholder,style:{order:x.Form.Sort},options:T},x.Id)}})]}),jsxRuntimeExports.jsxs("div",{className:"row popup-footer",children:[jsxRuntimeExports.jsx(Button,{label:"Cancel",className:"button-text-3 button-grey",onClick:l}),jsxRuntimeExports.jsx(Button,{label:"Save",className:"button-primary button-text-3",onClick:d.handleSubmit(v,b)})]})]})},TableHeader=({methods:o,onEditColumn:a,onChangeConfigData:n,showIndex:s=!1,hideCheckbox:l=!1,selected:c,onChangeSelected:u})=>{const d=React2.useMemo(()=>o.watch("columns")??[],[o.watch("columns")]),h=React2.useRef([]),f=React2.useRef(null),{t:p}=useTranslation(),g=()=>{h.current.length&&(o.setValue("columns",d.map(v=>{var b;return v.Width?v:{...v,Width:(b=h.current.find(w=>w.Id===v.Id))==null?void 0:b.minWidth}})),h.current=[],n==null||n())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:f}),jsxRuntimeExports.jsxs("div",{className:`row ${styles.header}`,children:[!l&&jsxRuntimeExports.jsx("div",{className:`row ${styles["header-cell"]}`,children:jsxRuntimeExports.jsxs("div",{className:`row ${styles.title}`,children:[jsxRuntimeExports.jsx(Checkbox,{size:"1.6rem",value:c,onChange:u}),s&&jsxRuntimeExports.jsx("div",{style:{flex:1}})]})}),d.sort((v,b)=>v.Sort-b.Sort).map((v,b)=>jsxRuntimeExports.jsx(HeaderCell,{colItem:v,methods:o,onChangeConfigData:n,handleAddEditField:n&&a?()=>a(v):void 0,onMounted:n?w=>{w.Width||h.current.push(w),b+1===d.length&&g()}:void 0},v.Id)),jsxRuntimeExports.jsx(HeaderCell,{colItem:"last",methods:o,style:{flex:1,padding:"0 1.6rem",width:"12rem",justifyContent:d.length>=10?"center":"start"},onChangeConfigData:n,children:jsxRuntimeExports.jsx(Text$2,{className:"heading-9",children:p("action")})})]})]})},HeaderCell=({colItem:o,methods:a,style:n={},children:s,onMounted:l,onChangeConfigData:c,handleAddEditField:u})=>{const d=React2.useRef(null),h=React2.useRef(null),f=React2.useRef(null),[p,g]=React2.useState(null),v=React2.useMemo(()=>typeof o=="string"?null:a.watch("sortby").find(C=>C.prop===o.Name),[a.watch("sortby")]),b=React2.useMemo(()=>a.watch("columns")??[],[a.watch("columns")]),w=()=>{v?a.setValue("sortby",a.getValues("sortby").filter(C=>C.prop!==o.Name)):a.setValue("sortby",[...a.getValues("sortby"),{prop:o.Name,direction:"ASC"}]),closePopup(h)},x=C=>{const A=C.target.closest("div:has(>svg)").getBoundingClientRect(),R=()=>{closePopup(h),c==null||c()};showPopup({ref:h,hideOverlay:!0,content:jsxRuntimeExports.jsxs("div",{className:"col popup-actions dropdown-popup",style:{right:`calc(100vw - ${A.right}px)`,top:A.bottom+10,minWidth:"16.8rem"},children:[u&&jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{closePopup(h),u()},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/gear",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:"Edit field"})]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:w,children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/enlarge",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:v?"Remove sort":"Sort"})]}),c&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{a.setValue("columns",[b[0],{...o,Sort:1},...b.slice(1).filter(j=>j.Id!==o.Id).sort((j,D)=>j.Sort-D.Sort).map((j,D)=>({...j,Sort:D+2}))]),R()},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/move-layer-left",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:"Move to start"})]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{a.setValue("columns",[...b.filter(j=>j.Id!==o.Id).sort((j,D)=>j.Sort-D.Sort).map((j,D)=>({...j,Sort:D})),{...o,Sort:b.length-1}]),R()},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/move-layer-right",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:"Move to end"})]}),jsxRuntimeExports.jsxs("button",{type:"button",className:"row",onClick:()=>{a.setValue("columns",b.filter(j=>j.Id!==o.Id)),R()},children:[jsxRuntimeExports.jsx(Winicon,{src:"outline/layout/eye-slash",size:"1.4rem"}),jsxRuntimeExports.jsx(Text$2,{className:"button-text-3",children:"Hide column"})]})]})]})})};React2.useEffect(()=>{if(l){const C=d.current.querySelector(".heading-9");C&&!o.Width&&(d.current.style.width=`${C.offsetWidth+92}px`,l({...o,minWidth:d.current.offsetWidth}))}},[]);const S=()=>{var C;f.current&&!p&&((C=f.current)==null||C.remove(),f.current=null)},E=C=>{if(C.preventDefault(),p)return;const A=d.current.getBoundingClientRect();if(typeof o=="string")var R=C.pageX<=A.x+8;else o.Sort?R=C.pageX>=A.right-8||C.pageX<=A.x+8:R=C.pageX>=A.right-8;R?(f.current||(f.current=document.createElement("div"),f.current.className="resize-cell-stick",d.current.parentElement.appendChild(f.current)),f.current.style.left=`${(C.pageX<=A.x+8?d.current.offsetLeft:d.current.offsetLeft+d.current.offsetWidth)-4}px`,f.current.setAttribute("position",C.pageX<=A.x+8?"left":"right")):S(),C.buttons===1&&f.current&&g({pageX:C.pageX,width:f.current.getAttribute("position")==="left"?C.currentTarget.previousSibling.offsetWidth:C.currentTarget.offsetWidth})};React2.useEffect(()=>{if(p&&f.current){const C=R=>{if(R.preventDefault(),f.current.getAttribute("position")==="left"){const j=d.current.previousSibling;j.style.width=`${p.width+R.pageX-p.pageX}px`,f.current.style.left=`${d.current.offsetLeft-4}px`,a.setValue("columns",a.getValues("columns").map(D=>D.Id===j.id?{...D,Width:j.offsetWidth}:D))}else d.current.style.width=`${p.width+R.pageX-p.pageX}px`,f.current.style.left=`${d.current.offsetLeft+d.current.offsetWidth-4}px`,a.setValue("columns",a.getValues("columns").map(j=>j.Id===o.Id?{...j,Width:d.current.offsetWidth}:j))},A=()=>{var R;(R=f.current)==null||R.remove(),f.current=null,g(null),c==null||c()};return document.body.addEventListener("mousemove",C),document.body.addEventListener("mouseup",A),()=>{document.body.removeEventListener("mousemove",C),document.body.removeEventListener("mouseup",A)}}else f.current?(f.current.remove(),f.current=null):p&&g(null)},[p]);const T=React2.useMemo(()=>c&&!p?{onMouseMove:E,onMouseOut:S}:{},[c,p,f.current]);switch(o){case"last":return jsxRuntimeExports.jsx("div",{ref:d,className:`row ${styles["header-cell"]} ${styles["last-cell"]}`,style:n,...T,children:s});default:return jsxRuntimeExports.jsxs("div",{ref:d,id:o.Id,style:{width:o.Width,...n},className:`row ${styles["header-cell"]}`,...T,children:[jsxRuntimeExports.jsx(Popup,{ref:h}),jsxRuntimeExports.jsxs("div",{className:`row ${styles.title}`,children:[s??jsxRuntimeExports.jsx(Text$2,{className:"heading-9",maxLine:1,style:{maxWidth:v?"calc(100% - 2.4rem)":"100%"},children:o.Title}),v&&jsxRuntimeExports.jsx(Winicon,{src:`outline/arrows/circle-arrow-${v.direction==="ASC"?"up":"down"}`,className:styles["column-sort-icon"],onClick:()=>{a.setValue("sortby",a.getValues("sortby").map(C=>C.prop===o.Name?{...C,direction:C.direction==="ASC"?"DESC":"ASC"}:C))}}),!c&&!v&&jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/circle-arrow-up",size:"1.4rem",className:styles["column-action-sort-icon"],onClick:w})]}),c&&jsxRuntimeExports.jsx(Winicon,{src:"fill/arrows/down-arrow",className:styles["column-action-icon"],onClick:x,style:{marginRight:"1.6rem"}})]})}},TableRow=({item:o,setItem:a,title:n,index:s,methods:l,fields:c=[],files:u=[],relativeData:d,relativeFields:h=[],showIndex:f=!1,hideCheckbox:p=!1,showAddEditPopup:g,onDelete:v,actions:b=[],onChangeActions:w,selected:x,setSelected:S,onDuplicate:E,...T})=>{const C=React2.useRef(null),A=l.getValues("TbName"),R=new DataController(A),{t:j}=useTranslation(),D=!!g,O={methods:l,fields:c,relativeFields:h,actions:b,onChangeActions:w,setSelected:S,...T},H=React2.useMemo(()=>c.some(le=>le.Column==="ParentId"),[c]),q=React2.useMemo(()=>o._totalChild?parseInt(o._totalChild):void 0,[o]),Y=useForm({shouldFocusError:!1}),te=React2.useMemo(()=>l.watch("columns")??[],[l.watch("columns")]),ee=React2.useMemo(()=>Y.watch(),[JSON.stringify(Y.watch())]),[re,ne]=React2.useState(!1),[ce,ve]=React2.useState([]),[be,me]=React2.useState([]),ae=React2.useMemo(()=>{if(!(x!=null&&x.length))return!1;const le=x.includes(o.Id);if(!q)return le;let ge=!1;return ce.length&&ce.every(we=>{const Se=x.includes(we.Id);return Se&&(ge=!0),Se})&&ce.length===q&&!le&&(S==null||S([...x.filter(we=>ce.every(Se=>Se.Id!==we)),o.Id])),le?!0:ge?void 0:!1},[x==null?void 0:x.length,q,ce.length]),pe=async(le=1)=>{const ge={returns:["Id","ParentId",...te.map(ke=>ke.Name.split(".").shift())]},{searchRaw:Re,sortby:we}=l.getValues();te.filter(ke=>ke.Name.split(".").length>1).forEach(ke=>{var He;const Ie=ke.Name.split(".");ge[He=Ie[0]]??(ge[He]=["Id"]),ge[Ie[0]].includes(Ie[1])||ge[Ie[0]].push(Ie[1]),ke.Type===ColDataType.people&&ge[Ie[0]].push("AvatarUrl")});const xe=await R.patternList({page:le,size:20,searchRaw:`@ParentId:{${o.Id}} ${Re!=="*"?Re:""}`,sortby:we,pattern:ge});xe.code===200&&(ve(le>1?[...ce,...xe.data]:xe.data),delete xe.data,delete xe.totalCount,delete xe.code,delete xe.message,Object.keys(xe).length?Object.keys(xe).forEach(ke=>Y.setValue(ke,le>1?[...ee[ke]??[],...xe[ke]]:xe[ke])):Y.reset())};React2.useEffect(()=>{re&&q&&te.length&&pe()},[re,JSON.stringify(l.watch("sortby")),l.watch("searchRaw"),q,te.length]);const ie=React2.useMemo(()=>{const le={};if(ee)for(const ge of ce)Object.keys(ee).forEach(Re=>{var we,Se;if((we=ge[`${Re}Id`])!=null&&we.length){const xe=ee[Re].filter(ke=>ge[`${Re}Id`].includes(ke.Id));xe&&(le[Se=ge.Id]??(le[Se]={}),le[ge.Id][Re]=xe)}});return le},[ee,ce]);React2.useEffect(()=>{const le=[];te.forEach(ge=>{var we;const Re=ge.Name.split(".");Re.length>1?(we=h==null?void 0:h[Re[0]])!=null&&we.find(Se=>Se.Name===Re[1]&&Se.DataType===FEDataType.FILE)&&le.push(...ee[Re[0].substring(0,Re[0].lastIndexOf("Id"))].map(Se=>{var xe;return(xe=Se[Re[1]])==null?void 0:xe.split(",").slice(0,2)}).flat(1/0).filter((Se,xe,ke)=>!!Se&&ke.indexOf(Se)===xe)):c.find(Se=>Se.Name===ge.Name&&Se.DataType===FEDataType.FILE)&&le.push(...ce.map(Se=>{var xe;return(xe=Se[ge.Name])==null?void 0:xe.split(",").slice(0,2)}).flat(1/0).filter((Se,xe,ke)=>!!Se&&ke.indexOf(Se)===xe))}),le.length?BaseDA.getFilesInfor(le.filter((ge,Re,we)=>we.indexOf(ge)===Re)).then(ge=>{ge.code===200&&me(ge.data.filter(Re=>Re!=null))}):me([])},[ce,ee,h]);const se=le=>{showPopup({ref:C,content:jsxRuntimeExports.jsx(AddEditElementForm,{ref:C,tbName:A,id:le,title:n==null?void 0:n.toLowerCase(),activeColumns:te,onSuccess:()=>{le?pe(Math.max(Math.floor(ce.length/20),1)):pe()},...T,ParentId:o.Id})})},de=le=>{const ge=le.target.closest("div");if(ge.isOpen)return closePopup(C);const Re=ge.getBoundingClientRect();ge.isOpen=!0,showPopup({ref:C,hideOverlay:!0,content:jsxRuntimeExports.jsx(ActionOptionsDropdown,{ref:C,title:n,actions:b,onChangeActions:w,style:{top:Re.bottom+2,right:`calc(100dvw - ${Re.right}px)`,minWidth:"14rem"},onClose:()=>{setTimeout(()=>{ge.isOpen=!1},150)},onEdit:D?()=>g(o.Id):void 0,onDuplicate:E,onDelete:v,item:o,tbName:A})})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Popup,{ref:C}),jsxRuntimeExports.jsxs("div",{className:`row ${styles["table-row"]}`,children:[!p&&jsxRuntimeExports.jsx("div",{className:`row ${styles.cell}`,children:jsxRuntimeExports.jsxs("div",{className:`row ${styles.content}`,children:[jsxRuntimeExports.jsx(Checkbox,{size:"1.6rem",value:ae,onChange:!x&&!S?le=>{const ge=x.filter(Re=>Re!==o.Id&&Re!==o.ParentId);le&&ge.push(o.Id),S(ge)}:void 0}),f&&jsxRuntimeExports.jsx(Text$2,{className:"label-3",style:{flex:1},children:o.ParentId?"":s})]})}),te.sort((le,ge)=>le.Sort-ge.Sort).map((le,ge)=>{const Re=le.Name.split("."),we=Re.length>1?{data:d==null?void 0:d[Re[0].substring(0,Re[0].lastIndexOf("Id"))],fields:h==null?void 0:h[Re[0]]}:{data:o,fields:c};return H&&!ge?jsxRuntimeExports.jsxs(Cell,{colItem:le,style:{gap:"0.8rem"},children:[q?jsxRuntimeExports.jsx(Winicon,{src:`fill/arrows/triangle-${re?"down":"right"}`,size:"1.2rem",onClick:()=>ne(!re)}):jsxRuntimeExports.jsx("div",{style:{width:"1.6rem"}}),jsxRuntimeExports.jsx(AutoCellContent,{colItem:le,files:u,...we}),D&&jsxRuntimeExports.jsx(Winicon,{src:"fill/user interface/c-add",className:styles["add-child-icon-btn"],onClick:()=>{se()}})]},le.Id):jsxRuntimeExports.jsx(Cell,{colItem:le,children:jsxRuntimeExports.jsx(AutoCellContent,{colItem:le,files:u,...we})},le.Id)}),jsxRuntimeExports.jsxs(Cell,{colItem:"last",style:{flex:1,padding:"0 1.6rem",minWidth:"12rem",justifyContent:te.length>=10?"center":"start"},children:[D&&jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/i-edit",className:"icon-button size24 light",size:"1.4rem",onClick:()=>g(o.Id)}),jsxRuntimeExports.jsx(Winicon,{src:"outline/text/menu-dots",style:{rotate:"90deg"},size:"1.4rem",className:"icon-button size24 light",onClick:de})]})]}),re&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ce.map((le,ge)=>React2.createElement(TableRow,{...O,selected:x!=null&&x.includes(o.Id)?[...x,...ce.map(Re=>Re.Id)]:x,key:`${le.Id}-${ge}`,index:ge+1,item:le,files:be,relativeData:ie[le.Id],showIndex:!0,hideCheckbox:p,showAddEditPopup:D?se:void 0,onDelete:D?()=>{R.delete([o.Id]).then(Re=>{Re.code===200&&(pe(Math.max(Math.floor(ce.length/20),1)),a({...o,_totalChild:o._totalChild-1}))})}:void 0,onDuplicate:D?()=>{R.duplicate([le.Id]).then(Re=>{if(Re.code!==200)return ToastMessage.errors(Re.message);a({...o,_totalChild:o._totalChild+1}),pe(Math.max(Math.floor(ce.length/20),1)),ToastMessage.success(`Duplicate this ${n==null?void 0:n.toLowerCase()} successfully!`)})}:void 0})),(D||!!q&&!!ce.length&&q>ce.length)&&jsxRuntimeExports.jsxs("div",{className:`row ${styles["add-child-table-row"]}`,children:[D&&jsxRuntimeExports.jsx(Button,{prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-add",size:"1.2rem"}),label:`${j("add")} ${j("new").toLowerCase()}`,className:"button-text-5",onClick:()=>{se()}}),!!q&&!!ce.length&&q>ce.length&&jsxRuntimeExports.jsx(Text$2,{className:"button-text-5",onClick:()=>{pe(Math.floor(ce.length/20)+1)},children:"See more"})]})]})]})},Cell=({colItem:o,style:a,children:n})=>{switch(o){case"last":return jsxRuntimeExports.jsx("div",{className:`row ${styles.cell} ${styles["last-cell"]}`,style:a,children:n});default:return jsxRuntimeExports.jsx("div",{style:{width:o.Width,...a},className:`row ${styles.cell}`,children:jsxRuntimeExports.jsx("div",{className:`row ${styles.content}`,children:n})})}};function TableById({id:o}){const[a,n]=React2.useState(),s=new SettingDataController("report"),l=React2.useMemo(()=>(a==null?void 0:a.Props)??[],[a]);return React2.useEffect(()=>{o&&s.getByIds([o]).then(c=>{if(c.code===200&&c.data[0]){let u=c.data[0];u.Props&&typeof u.Props=="string"&&(u.Props=JSON.parse(u.Props)),n(u)}})},[o]),a&&jsxRuntimeExports.jsx(DataTable,{tbName:a.TbName,columns:l},a.Id)}const DataTable=({tbName:o,staticSearch:a="",title:n="",columns:s=[],onChangeConfigData:l,filterData:c={searchRaw:"*",sortby:[]},filterList:u=[],onChangeFilterList:d,onChangeFilterData:h,showIndex:f=!1,hideCheckbox:p=!1,enableEdit:g=!1,actions:v=[],onChangeActions:b,onEditColumn:w,...x})=>{const S=useForm({shouldFocusError:!1,defaultValues:{columns:[],searchRaw:"*",sortby:[],TbName:o}}),E=new DataController(o),T=new TableController("rel"),C=new TableController("column"),A=React2.useRef(null),{t:R}=useTranslation(),[j,D]=React2.useState({data:[],totalCount:void 0}),[O,H]=React2.useState({page:1,size:20}),q=useForm({shouldFocusError:!1}),Y=React2.useMemo(()=>q.watch(),[JSON.stringify(q.watch())]),te=useForm({shouldFocusError:!1}),ee=React2.useMemo(()=>te.watch(),[JSON.stringify(te.watch())]),[re,ne]=React2.useState([]),[ce,ve]=React2.useState([]),[be,me]=React2.useState([]),ae=React2.useMemo(()=>ce.some(ge=>ge.Column==="ParentId"),[ce]),pe=async()=>{const ge=await Promise.all([T.getListSimple({page:1,size:1e3,query:`@TableFK:{${o}}`,returns:["Id","Column","TablePK","TableFK","Query","Form"]}),C.getListSimple({page:1,size:1e3,query:`@TableName:{${o}} -@Name:{Id}`,returns:["Id","Name","DataType","Query","Form","TableName"],sortby:{BY:"DateCreated"}})]);ge.every(Re=>Re.code===200)&&ve(ge.map(Re=>Re.data).flat(1/0).map(Re=>({...Re,Form:Re.Form?typeof Re.Form=="string"?JSON.parse(Re.Form):Re.Form:{Required:!0}})))};React2.useEffect(()=>{o&&(S.setValue("TbName",o),pe())},[o]),React2.useEffect(()=>{S.setValue("columns",s)},[s]),React2.useEffect(()=>{S.setValue("searchRaw",c.searchRaw??"*")},[c.searchRaw]),React2.useEffect(()=>{S.setValue("sortby",c.sortby??[])},[JSON.stringify(c.sortby)]),React2.useEffect(()=>{const{searchRaw:ge,sortby:Re}=S.watch();h&&(ge!==c.searchRaw||JSON.stringify(Re)!==JSON.stringify(c.sortby))&&h({searchRaw:ge,sortby:Re})},[S.watch("searchRaw"),JSON.stringify(S.watch("sortby"))]);const ie=async(ge=1,Re=20,we=!1)=>{const Se={returns:["Id",...s.map(De=>De.Name.split(".").shift())]},{searchRaw:xe,sortby:ke}=S.getValues();let Ie=xe;a.length&&(Ie=`${a} ${Ie!=="*"?Ie:""}`),ae&&(Se[o]={searchRaw:"*",reducers:"GROUPBY 1 @ParentId REDUCE COUNT 0 AS _totalChild"}),s.filter(De=>De.Name.split(".").length>1).forEach(De=>{var oe;const Ee=De.Name.split(".");Se[oe=Ee[0]]??(Se[oe]=["Id"]),Se[Ee[0]].includes(Ee[1])||Se[Ee[0]].push(Ee[1]),De.Type===ColDataType.people&&Se[Ee[0]].push("AvatarUrl")});const Le=await E.patternList({page:ge,size:Re,searchRaw:ae?`@ParentId:{empty} ${Ie!=="*"?Ie:""}`:Ie,sortby:ke!=null&&ke.length?ke:[{prop:"DateCreated",direction:"DESC"}],pattern:Se});if(Le.code===200){if(we)return Le;D({data:Le.data,totalCount:Le.totalCount}),delete Le.data,delete Le.totalCount,delete Le.code,delete Le.message,Object.keys(Le).length?Object.keys(Le).forEach(De=>q.setValue(De,Le[De])):q.reset()}};React2.useEffect(()=>{s.length&&ce.length&&ie(O.page,O.size)},[s,S.watch("searchRaw"),S.watch("sortby"),ce]),React2.useEffect(()=>{be.length&&me([])},[S.watch("searchRaw"),S.watch("sortby"),j.totalCount]);const se=React2.useMemo(()=>s.filter(ge=>ge.Name.split(".").length>1),[s.length]);React2.useEffect(()=>{if(se.length){const ge=se.map(we=>{const Se=we.Name.split(".").shift();return Se.substring(0,Se.lastIndexOf("Id"))}).filter((we,Se,xe)=>xe.indexOf(we)===Se),Re=se.map(we=>we.Name.split(".").pop()).filter((we,Se,xe)=>xe.indexOf(we)===Se);C.getListSimple({page:1,size:1e3,query:`@TableName:{${ge.join(" | ")}} @Name:{${Re.join(" | ")}}`,returns:["Id","Name","DataType","Query","Form","TableName"]}).then(we=>{we.code===200&&ge.forEach(Se=>{const xe=we.data.filter(ke=>ke.TableName===Se).map(ke=>({...ke,Form:ke.Form?JSON.parse(ke.Form):ke.Form}));xe.length&&te.setValue(`${Se}Id`,xe)})})}},[se]);const de=React2.useMemo(()=>{const ge={};if(Y)for(const Re of j.data)Object.keys(Y).forEach(we=>{var Se,xe;if((Se=Re[`${we}Id`])!=null&&Se.length){const ke=Y[we].filter(Ie=>Re[`${we}Id`].includes(Ie.Id));ke&&(ge[xe=Re.Id]??(ge[xe]={}),ge[Re.Id][we]=ke)}});return ge},[Y,j.data]);React2.useEffect(()=>{const ge=[];s.forEach(Re=>{var Se;const we=Re.Name.split(".");we.length>1?(Se=ee==null?void 0:ee[we[0]])!=null&&Se.find(xe=>xe.Name===we[1]&&xe.DataType===FEDataType.FILE)&&ge.push(...Y[we[0].substring(0,we[0].lastIndexOf("Id"))].map(xe=>{var ke;return(ke=xe[we[1]])==null?void 0:ke.split(",").slice(0,4)}).flat(1/0).filter((xe,ke,Ie)=>!!xe&&Ie.indexOf(xe)===ke)):ce.find(xe=>xe.Name===Re.Name&&xe.DataType===FEDataType.FILE)&&ge.push(...j.data.map(xe=>{var ke;return(ke=xe[Re.Name])==null?void 0:ke.split(",").slice(0,2)}).flat(1/0).filter((xe,ke,Ie)=>!!xe&&Ie.indexOf(xe)===ke))}),ge.length?BaseDA.getFilesInfor(ge.filter((Re,we,Se)=>Se.indexOf(Re)===we)).then(Re=>{Re.code===200&&ne(Re.data.filter(we=>we!=null))}):ne([])},[j.data,Y,ee]);const le=ge=>{showPopup({ref:A,content:jsxRuntimeExports.jsx(AddEditElementForm,{ref:A,tbName:o,id:ge,title:n.toLowerCase(),activeColumns:s,onSuccess:()=>{ge?ie(O.page,O.size):ie()},...x})})};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:`col ${styles["table-view"]}`,style:{padding:j.totalCount&&j.totalCount>20?"0 2.4rem":"0 2.4rem 1.6rem",flex:1},children:[jsxRuntimeExports.jsx(Popup,{ref:A}),jsxRuntimeExports.jsxs("div",{className:`row ${styles["table-feature"]}`,children:[g&&jsxRuntimeExports.jsx(Button,{label:`${R("add")} ${(n??o).toLowerCase()}`,prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-add",size:"1.2rem"}),className:"button-text-3 button-neutral border",onClick:()=>le()}),jsxRuntimeExports.jsx("div",{style:{flex:1}}),jsxRuntimeExports.jsx(SearchFilterData,{columns:s,fields:ce,initFilterList:u,onChangeFilterData:g?d:void 0,searchRaw:S.watch("searchRaw"),onChange:ge=>{S.setValue("searchRaw",ge),h==null||h({searchRaw:ge,sortby:S.watch("sortby")})}}),jsxRuntimeExports.jsx("div",{className:"row divider",style:{height:"1.2rem",margin:0}}),jsxRuntimeExports.jsx(ExportXlsx,{label:R("export"),disabled:!j.totalCount,getData:async()=>{const ge=await ie(1,2e3,!0);if(ge.code===200&&ge.data.length){const Re=[],we=S.getValues("columns");we.forEach(xe=>{var Ie;const ke=xe.Name.split(".");ke.length>1?(Ie=ee==null?void 0:ee[ke[0]])!=null&&Ie.find(He=>He.Name===ke[1]&&He.DataType===FEDataType.FILE)&&Re.push(...ge[ke[0].substring(0,ke[0].lastIndexOf("Id"))].map(He=>{var Le;return(Le=He[ke[1]])==null?void 0:Le.split(",").slice(0,4)}).flat(1/0).filter((He,Le,De)=>!!He&&De.indexOf(He)===Le)):ce.find(He=>He.Name===xe.Name&&He.DataType===FEDataType.FILE)&&Re.push(...ge.data.map(He=>{var Le;return(Le=He[xe.Name])==null?void 0:Le.split(",").slice(0,2)}).flat(1/0).filter((He,Le,De)=>!!He&&De.indexOf(He)===Le))});let Se=[];return Re.length&&(Se=await BaseDA.getFilesInfor(Re.filter((xe,ke,Ie)=>Ie.indexOf(xe)===ke)),Se=Se.data.filter(xe=>xe!=null)),ge.data.map(xe=>{let ke={};return we.sort((Ie,He)=>Ie.Sort-He.Sort).forEach(Ie=>{const He=Ie.Name.split("."),Le=He.length>1?{data:ge[He[0].substring(0,He[0].lastIndexOf("Id"))],fields:ee==null?void 0:ee[He[0]]}:{data:xe,fields:ce};ke[Ie.Title]=cellValue(Ie,Le.data,Le.fields,Se)}),ke})}else return[]},prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/arrows/data-download"}),config:{title:S.watch("columns").map(ge=>ge.Title)}}),g&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"row divider",style:{height:"1.2rem",margin:0}}),jsxRuntimeExports.jsx(ButtonImportData,{onImport:async ge=>{if(ge.length){const Re=await E.add(ge.map(we=>({...we,...x})));if(Re.code!==200)return ToastMessage.errors(Re.message);ie()}}})]})]}),s.length&&ce.length?jsxRuntimeExports.jsxs("div",{className:`col ${styles.table}`,children:[jsxRuntimeExports.jsx(TableHeader,{onEditColumn:w,selected:be.length?j.data.every(ge=>be.includes(ge.Id))?!0:null:!1,onChangeSelected:ge=>{const Re=be.filter(we=>j.data.every(Se=>we!==Se.Id));me(ge?[...Re,...j.data.map(we=>we.Id)]:Re)},methods:S,onChangeConfigData:g?()=>{l==null||l(S.getValues("columns"))}:void 0,showIndex:f,hideCheckbox:p,fields:ce},o),j.data.map((ge,Re)=>jsxRuntimeExports.jsx(TableRow,{item:ge,setItem:we=>{D(Se=>({data:Se.data.map(xe=>xe.Id===ge.Id?we:xe),totalCount:Se.totalCount}))},index:Re+O.size*(O.page-1)+1,methods:S,fields:ce,files:re,relativeData:de[ge.Id],relativeFields:ee,selected:be,setSelected:me,title:n,showIndex:f,hideCheckbox:p,onChangeActions:g?b:void 0,showAddEditPopup:g?le:void 0,actions:v,onDelete:g?()=>{E.delete([ge.Id]).then(we=>{we.code===200&&ie(O.page,O.size)})}:void 0,onDuplicate:g?()=>{E.duplicate([ge.Id]).then(we=>{if(we.code!==200)return ToastMessage.errors(we.message);ie(O.page,O.size),ToastMessage.success(`Duplicate this ${n.toLowerCase()} successfully!`)})}:void 0,...x},`${o}-${ge.Id}-${Re}`))]}):null]}),!!j.totalCount&&j.totalCount>20&&jsxRuntimeExports.jsx("div",{style:{padding:"1.2rem 2.4rem"},children:jsxRuntimeExports.jsx(Pagination,{currentPage:O.page,itemPerPage:O.size,totalItem:j.totalCount,onChangePage:(ge,Re)=>{(O.page!==ge||O.size!==Re)&&(H({page:ge,size:Re}),ie(ge,Re))}})}),!!be.length&&jsxRuntimeExports.jsxs("div",{className:`row ${styles["selected-item-options"]}`,children:[jsxRuntimeExports.jsxs("div",{className:`row ${styles["selected-item-total"]}`,children:[jsxRuntimeExports.jsxs(Text$2,{className:"button-text-5",children:[be.length," items selected"]}),jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",size:12,onClick:()=>me([])})]}),jsxRuntimeExports.jsxs("div",{className:`row ${styles["selected-item-actions"]}`,children:[jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24",label:R("export"),style:{color:"var(--neutral-text-body-reverse-color)"},prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/data-download",color:"var(--neutral-text-body-reverse-color)",size:12})}),jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24",label:R("duplicate"),style:{color:"var(--neutral-text-body-reverse-color)"},prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/layout/copy-2",color:"var(--neutral-text-body-reverse-color)",size:12}),onClick:()=>{E.duplicate(be).then(ge=>{if(ge.code!==200)return ToastMessage.errors(ge.message);ie(O.page,O.size),ToastMessage.success(`Duplicate these ${n.toLowerCase()} successfully!`),me([])})}}),jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24",label:R("delete"),style:{color:"var(--neutral-text-body-reverse-color)"},prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/trash-can",color:"var(--neutral-text-body-reverse-color)",size:12}),onClick:()=>{showDialog({alignment:DialogAlignment.center,title:"Confirm delete",content:`Are you sure to delete these ${be.length} ${n.toLowerCase()}?`,submitTitle:R("delete"),onSubmit:()=>{E.delete(be).then(ge=>{if(ge.code!==200)return ToastMessage.errors(ge.message);ie(O.page,O.size),me([])})}})}}),jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24",label:R("more"),style:{color:"var(--neutral-text-body-reverse-color)"},prefix:jsxRuntimeExports.jsx(Winicon,{src:"fill/text/menu-dots",color:"var(--neutral-text-body-reverse-color)",size:12})}),jsxRuntimeExports.jsx(Button,{className:"button-text-5 size24",label:R("close"),style:{color:"var(--error-lighter-color)"},prefix:jsxRuntimeExports.jsx(Winicon,{src:"outline/user interface/e-remove",color:"var(--error-lighter-color)",size:12,onClick:()=>me([])})})]})]})]})},isString=o=>typeof o=="string",defer=()=>{let o,a;const n=new Promise((s,l)=>{o=s,a=l});return n.resolve=o,n.reject=a,n},makeString=o=>o==null?"":""+o,copy=(o,a,n)=>{o.forEach(s=>{a[s]&&(n[s]=a[s])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=o=>o&&o.indexOf("###")>-1?o.replace(lastOfPathSeparatorRegExp,"."):o,canNotTraverseDeeper=o=>!o||isString(o),getLastOfPath=(o,a,n)=>{const s=isString(a)?a.split("."):a;let l=0;for(;l<s.length-1;){if(canNotTraverseDeeper(o))return{};const c=cleanKey(s[l]);!o[c]&&n&&(o[c]=new n),Object.prototype.hasOwnProperty.call(o,c)?o=o[c]:o={},++l}return canNotTraverseDeeper(o)?{}:{obj:o,k:cleanKey(s[l])}},setPath=(o,a,n)=>{const{obj:s,k:l}=getLastOfPath(o,a,Object);if(s!==void 0||a.length===1){s[l]=n;return}let c=a[a.length-1],u=a.slice(0,a.length-1),d=getLastOfPath(o,u,Object);for(;d.obj===void 0&&u.length;)c=`${u[u.length-1]}.${c}`,u=u.slice(0,u.length-1),d=getLastOfPath(o,u,Object),d!=null&&d.obj&&typeof d.obj[`${d.k}.${c}`]<"u"&&(d.obj=void 0);d.obj[`${d.k}.${c}`]=n},pushPath=(o,a,n,s)=>{const{obj:l,k:c}=getLastOfPath(o,a,Object);l[c]=l[c]||[],l[c].push(n)},getPath=(o,a)=>{const{obj:n,k:s}=getLastOfPath(o,a);if(n&&Object.prototype.hasOwnProperty.call(n,s))return n[s]},getPathWithDefaults=(o,a,n)=>{const s=getPath(o,n);return s!==void 0?s:getPath(a,n)},deepExtend=(o,a,n)=>{for(const s in a)s!=="__proto__"&&s!=="constructor"&&(s in o?isString(o[s])||o[s]instanceof String||isString(a[s])||a[s]instanceof String?n&&(o[s]=a[s]):deepExtend(o[s],a[s],n):o[s]=a[s]);return o},regexEscape=o=>o.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=o=>isString(o)?o.replace(/[&<>"'\/]/g,a=>_entityMap[a]):o;class RegExpCache{constructor(a){this.capacity=a,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(a){const n=this.regExpMap.get(a);if(n!==void 0)return n;const s=new RegExp(a);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(a,s),this.regExpQueue.push(a),s}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(o,a,n)=>{a=a||"",n=n||"";const s=chars.filter(u=>a.indexOf(u)<0&&n.indexOf(u)<0);if(s.length===0)return!0;const l=looksLikeObjectPathRegExpCache.getRegExp(`(${s.map(u=>u==="?"?"\\?":u).join("|")})`);let c=!l.test(o);if(!c){const u=o.indexOf(n);u>0&&!l.test(o.substring(0,u))&&(c=!0)}return c},deepFind=function(o,a){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!o)return;if(o[a])return Object.prototype.hasOwnProperty.call(o,a)?o[a]:void 0;const s=a.split(n);let l=o;for(let c=0;c<s.length;){if(!l||typeof l!="object")return;let u,d="";for(let h=c;h<s.length;++h)if(h!==c&&(d+=n),d+=s[h],u=l[d],u!==void 0){if(["string","number","boolean"].indexOf(typeof u)>-1&&h<s.length-1)continue;c+=h-c+1;break}l=u}return l},getCleanedCode=o=>o==null?void 0:o.replace("_","-"),consoleLogger={type:"logger",log(o){this.output("log",o)},warn(o){this.output("warn",o)},error(o){this.output("error",o)},output(o,a){var n,s;(s=(n=console==null?void 0:console[o])==null?void 0:n.apply)==null||s.call(n,console,a)}};class Logger{constructor(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(a,n)}init(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=a||consoleLogger,this.options=n,this.debug=n.debug}log(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return this.forward(n,"log","",!0)}warn(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return this.forward(n,"warn","",!0)}error(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return this.forward(n,"error","")}deprecate(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(a,n,s,l){return l&&!this.debug?null:(isString(a[0])&&(a[0]=`${s}${this.prefix} ${a[0]}`),this.logger[n](a))}create(a){return new Logger(this.logger,{prefix:`${this.prefix}:${a}:`,...this.options})}clone(a){return a=a||this.options,a.prefix=a.prefix||this.prefix,new Logger(this.logger,a)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(a,n){return a.split(" ").forEach(s=>{this.observers[s]||(this.observers[s]=new Map);const l=this.observers[s].get(n)||0;this.observers[s].set(n,l+1)}),this}off(a,n){if(this.observers[a]){if(!n){delete this.observers[a];return}this.observers[a].delete(n)}}emit(a){for(var n=arguments.length,s=new Array(n>1?n-1:0),l=1;l<n;l++)s[l-1]=arguments[l];this.observers[a]&&Array.from(this.observers[a].entries()).forEach(u=>{let[d,h]=u;for(let f=0;f<h;f++)d(...s)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(u=>{let[d,h]=u;for(let f=0;f<h;f++)d.apply(d,[a,...s])})}}class ResourceStore extends EventEmitter{constructor(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=a||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(a){this.options.ns.indexOf(a)<0&&this.options.ns.push(a)}removeNamespaces(a){const n=this.options.ns.indexOf(a);n>-1&&this.options.ns.splice(n,1)}getResource(a,n,s){var f,p;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,u=l.ignoreJSONStructure!==void 0?l.ignoreJSONStructure:this.options.ignoreJSONStructure;let d;a.indexOf(".")>-1?d=a.split("."):(d=[a,n],s&&(Array.isArray(s)?d.push(...s):isString(s)&&c?d.push(...s.split(c)):d.push(s)));const h=getPath(this.data,d);return!h&&!n&&!s&&a.indexOf(".")>-1&&(a=d[0],n=d[1],s=d.slice(2).join(".")),h||!u||!isString(s)?h:deepFind((p=(f=this.data)==null?void 0:f[a])==null?void 0:p[n],s,c)}addResource(a,n,s,l){let c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const u=c.keySeparator!==void 0?c.keySeparator:this.options.keySeparator;let d=[a,n];s&&(d=d.concat(u?s.split(u):s)),a.indexOf(".")>-1&&(d=a.split("."),l=n,n=d[1]),this.addNamespaces(n),setPath(this.data,d,l),c.silent||this.emit("added",a,n,s,l)}addResources(a,n,s){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const c in s)(isString(s[c])||Array.isArray(s[c]))&&this.addResource(a,n,c,s[c],{silent:!0});l.silent||this.emit("added",a,n,s)}addResourceBundle(a,n,s,l,c){let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},d=[a,n];a.indexOf(".")>-1&&(d=a.split("."),l=s,s=n,n=d[1]),this.addNamespaces(n);let h=getPath(this.data,d)||{};u.skipCopy||(s=JSON.parse(JSON.stringify(s))),l?deepExtend(h,s,c):h={...h,...s},setPath(this.data,d,h),u.silent||this.emit("added",a,n,s)}removeResourceBundle(a,n){this.hasResourceBundle(a,n)&&delete this.data[a][n],this.removeNamespaces(n),this.emit("removed",a,n)}hasResourceBundle(a,n){return this.getResource(a,n)!==void 0}getResourceBundle(a,n){return n||(n=this.options.defaultNS),this.getResource(a,n)}getDataByLanguage(a){return this.data[a]}hasLanguageSomeTranslations(a){const n=this.getDataByLanguage(a);return!!(n&&Object.keys(n)||[]).find(l=>n[l]&&Object.keys(n[l]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(o){this.processors[o.name]=o},handle(o,a,n,s,l){return o.forEach(c=>{var u;a=((u=this.processors[c])==null?void 0:u.process(a,n,s,l))??a}),a}};const checkedLoadedFor={},shouldHandleAsObject=o=>!isString(o)&&typeof o!="boolean"&&typeof o!="number";class Translator extends EventEmitter{constructor(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],a,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(a){a&&(this.language=a)}exists(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(a==null)return!1;const s=this.resolve(a,n);return(s==null?void 0:s.res)!==void 0}extractFromKey(a,n){let s=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;s===void 0&&(s=":");const l=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let c=n.ns||this.options.defaultNS||[];const u=s&&a.indexOf(s)>-1,d=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!looksLikeObjectPath(a,s,l);if(u&&!d){const h=a.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:a,namespaces:isString(c)?[c]:c};const f=a.split(s);(s!==l||s===l&&this.options.ns.indexOf(f[0])>-1)&&(c=f.shift()),a=f.join(l)}return{key:a,namespaces:isString(c)?[c]:c}}translate(a,n,s){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),a==null)return"";Array.isArray(a)||(a=[String(a)]);const l=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,c=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:u,namespaces:d}=this.extractFromKey(a[a.length-1],n),h=d[d.length-1],f=n.lng||this.language,p=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode"){if(p){const Y=n.nsSeparator||this.options.nsSeparator;return l?{res:`${h}${Y}${u}`,usedKey:u,exactUsedKey:u,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(n)}:`${h}${Y}${u}`}return l?{res:u,usedKey:u,exactUsedKey:u,usedLng:f,usedNS:h,usedParams:this.getUsedParamsDetails(n)}:u}const g=this.resolve(a,n);let v=g==null?void 0:g.res;const b=(g==null?void 0:g.usedKey)||u,w=(g==null?void 0:g.exactUsedKey)||u,x=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,T=n.count!==void 0&&!isString(n.count),C=Translator.hasDefaultValue(n),A=T?this.pluralResolver.getSuffix(f,n.count,n):"",R=n.ordinal&&T?this.pluralResolver.getSuffix(f,n.count,{ordinal:!1}):"",j=T&&!n.ordinal&&n.count===0,D=j&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${A}`]||n[`defaultValue${R}`]||n.defaultValue;let O=v;E&&!v&&C&&(O=D);const H=shouldHandleAsObject(O),q=Object.prototype.toString.apply(O);if(E&&O&&H&&x.indexOf(q)<0&&!(isString(S)&&Array.isArray(O))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Y=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,O,{...n,ns:d}):`key '${u} (${this.language})' returned an object instead of string.`;return l?(g.res=Y,g.usedParams=this.getUsedParamsDetails(n),g):Y}if(c){const Y=Array.isArray(O),te=Y?[]:{},ee=Y?w:b;for(const re in O)if(Object.prototype.hasOwnProperty.call(O,re)){const ne=`${ee}${c}${re}`;C&&!v?te[re]=this.translate(ne,{...n,defaultValue:shouldHandleAsObject(D)?D[re]:void 0,joinArrays:!1,ns:d}):te[re]=this.translate(ne,{...n,joinArrays:!1,ns:d}),te[re]===ne&&(te[re]=O[re])}v=te}}else if(E&&isString(S)&&Array.isArray(v))v=v.join(S),v&&(v=this.extendTranslation(v,a,n,s));else{let Y=!1,te=!1;!this.isValidLookup(v)&&C&&(Y=!0,v=D),this.isValidLookup(v)||(te=!0,v=u);const re=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&te?void 0:v,ne=C&&D!==v&&this.options.updateMissing;if(te||Y||ne){if(this.logger.log(ne?"updateKey":"missingKey",f,h,u,ne?D:v),c){const me=this.resolve(u,{...n,keySeparator:!1});me&&me.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ce=[];const ve=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ve&&ve[0])for(let me=0;me<ve.length;me++)ce.push(ve[me]);else this.options.saveMissingTo==="all"?ce=this.languageUtils.toResolveHierarchy(n.lng||this.language):ce.push(n.lng||this.language);const be=(me,ae,pe)=>{var se;const ie=C&&pe!==v?pe:re;this.options.missingKeyHandler?this.options.missingKeyHandler(me,h,ae,ie,ne,n):(se=this.backendConnector)!=null&&se.saveMissing&&this.backendConnector.saveMissing(me,h,ae,ie,ne,n),this.emit("missingKey",me,h,ae,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?ce.forEach(me=>{const ae=this.pluralResolver.getSuffixes(me,n);j&&n[`defaultValue${this.options.pluralSeparator}zero`]&&ae.indexOf(`${this.options.pluralSeparator}zero`)<0&&ae.push(`${this.options.pluralSeparator}zero`),ae.forEach(pe=>{be([me],u+pe,n[`defaultValue${pe}`]||D)})}):be(ce,u,D))}v=this.extendTranslation(v,a,n,g,s),te&&v===u&&this.options.appendNamespaceToMissingKey&&(v=`${h}:${u}`),(te||Y)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${h}:${u}`:u,Y?v:void 0))}return l?(g.res=v,g.usedParams=this.getUsedParamsDetails(n),g):v}extendTranslation(a,n,s,l,c){var f,p;var u=this;if((f=this.i18nFormat)!=null&&f.parse)a=this.i18nFormat.parse(a,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const g=isString(a)&&(((p=s==null?void 0:s.interpolation)==null?void 0:p.skipOnVariables)!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(g){const w=a.match(this.interpolator.nestingRegexp);v=w&&w.length}let b=s.replace&&!isString(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(b={...this.options.interpolation.defaultVariables,...b}),a=this.interpolator.interpolate(a,b,s.lng||this.language||l.usedLng,s),g){const w=a.match(this.interpolator.nestingRegexp),x=w&&w.length;v<x&&(s.nest=!1)}!s.lng&&l&&l.res&&(s.lng=this.language||l.usedLng),s.nest!==!1&&(a=this.interpolator.nest(a,function(){for(var w=arguments.length,x=new Array(w),S=0;S<w;S++)x[S]=arguments[S];return(c==null?void 0:c[0])===x[0]&&!s.context?(u.logger.warn(`It seems you are nesting recursively key: ${x[0]} in key: ${n[0]}`),null):u.translate(...x,n)},s)),s.interpolation&&this.interpolator.reset()}const d=s.postProcess||this.options.postProcess,h=isString(d)?[d]:d;return a!=null&&(h!=null&&h.length)&&s.applyPostProcessor!==!1&&(a=postProcessor.handle(h,a,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...l,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),a}resolve(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,l,c,u,d;return isString(a)&&(a=[a]),a.forEach(h=>{if(this.isValidLookup(s))return;const f=this.extractFromKey(h,n),p=f.key;l=p;let g=f.namespaces;this.options.fallbackNS&&(g=g.concat(this.options.fallbackNS));const v=n.count!==void 0&&!isString(n.count),b=v&&!n.ordinal&&n.count===0,w=n.context!==void 0&&(isString(n.context)||typeof n.context=="number")&&n.context!=="",x=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);g.forEach(S=>{var E,T;this.isValidLookup(s)||(d=S,!checkedLoadedFor[`${x[0]}-${S}`]&&((E=this.utils)!=null&&E.hasLoadedNamespace)&&!((T=this.utils)!=null&&T.hasLoadedNamespace(d))&&(checkedLoadedFor[`${x[0]}-${S}`]=!0,this.logger.warn(`key "${l}" for languages "${x.join(", ")}" won't get resolved as namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),x.forEach(C=>{var j;if(this.isValidLookup(s))return;u=C;const A=[p];if((j=this.i18nFormat)!=null&&j.addLookupKeys)this.i18nFormat.addLookupKeys(A,p,C,S,n);else{let D;v&&(D=this.pluralResolver.getSuffix(C,n.count,n));const O=`${this.options.pluralSeparator}zero`,H=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(A.push(p+D),n.ordinal&&D.indexOf(H)===0&&A.push(p+D.replace(H,this.options.pluralSeparator)),b&&A.push(p+O)),w){const q=`${p}${this.options.contextSeparator}${n.context}`;A.push(q),v&&(A.push(q+D),n.ordinal&&D.indexOf(H)===0&&A.push(q+D.replace(H,this.options.pluralSeparator)),b&&A.push(q+O))}}let R;for(;R=A.pop();)this.isValidLookup(s)||(c=R,s=this.getResource(C,S,R,n))}))})}),{res:s,usedKey:l,exactUsedKey:c,usedLng:u,usedNS:d}}isValidLookup(a){return a!==void 0&&!(!this.options.returnNull&&a===null)&&!(!this.options.returnEmptyString&&a==="")}getResource(a,n,s){var c;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(c=this.i18nFormat)!=null&&c.getResource?this.i18nFormat.getResource(a,n,s,l):this.resourceStore.getResource(a,n,s,l)}getUsedParamsDetails(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=a.replace&&!isString(a.replace);let l=s?a.replace:a;if(s&&typeof a.count<"u"&&(l.count=a.count),this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),!s){l={...l};for(const c of n)delete l[c]}return l}static hasDefaultValue(a){const n="defaultValue";for(const s in a)if(Object.prototype.hasOwnProperty.call(a,s)&&n===s.substring(0,n.length)&&a[s]!==void 0)return!0;return!1}}class LanguageUtil{constructor(a){this.options=a,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(a){if(a=getCleanedCode(a),!a||a.indexOf("-")<0)return null;const n=a.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(a){if(a=getCleanedCode(a),!a||a.indexOf("-")<0)return a;const n=a.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(a){if(isString(a)&&a.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(a)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?a.toLowerCase():a)}return this.options.cleanCode||this.options.lowerCaseLng?a.toLowerCase():a}isSupportedCode(a){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(a=this.getLanguagePartFromCode(a)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(a)>-1}getBestMatchFromCodes(a){if(!a)return null;let n;return a.forEach(s=>{if(n)return;const l=this.formatLanguageCode(s);(!this.options.supportedLngs||this.isSupportedCode(l))&&(n=l)}),!n&&this.options.supportedLngs&&a.forEach(s=>{if(n)return;const l=this.getLanguagePartFromCode(s);if(this.isSupportedCode(l))return n=l;n=this.options.supportedLngs.find(c=>{if(c===l)return c;if(!(c.indexOf("-")<0&&l.indexOf("-")<0)&&(c.indexOf("-")>0&&l.indexOf("-")<0&&c.substring(0,c.indexOf("-"))===l||c.indexOf(l)===0&&l.length>1))return c})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(a,n){if(!a)return[];if(typeof a=="function"&&(a=a(n)),isString(a)&&(a=[a]),Array.isArray(a))return a;if(!n)return a.default||[];let s=a[n];return s||(s=a[this.getScriptPartFromCode(n)]),s||(s=a[this.formatLanguageCode(n)]),s||(s=a[this.getLanguagePartFromCode(n)]),s||(s=a.default),s||[]}toResolveHierarchy(a,n){const s=this.getFallbackCodes(n||this.options.fallbackLng||[],a),l=[],c=u=>{u&&(this.isSupportedCode(u)?l.push(u):this.logger.warn(`rejecting language code not found in supportedLngs: ${u}`))};return isString(a)&&(a.indexOf("-")>-1||a.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&c(this.formatLanguageCode(a)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&c(this.getScriptPartFromCode(a)),this.options.load!=="currentOnly"&&c(this.getLanguagePartFromCode(a))):isString(a)&&c(this.formatLanguageCode(a)),s.forEach(u=>{l.indexOf(u)<0&&c(this.formatLanguageCode(u))}),l}}const suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},dummyRule={select:o=>o===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class PluralResolver{constructor(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=a,this.options=n,this.logger=baseLogger.create("pluralResolver"),this.pluralRulesCache={}}addRule(a,n){this.rules[a]=n}clearCache(){this.pluralRulesCache={}}getRule(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=getCleanedCode(a==="dev"?"en":a),l=n.ordinal?"ordinal":"cardinal",c=JSON.stringify({cleanedCode:s,type:l});if(c in this.pluralRulesCache)return this.pluralRulesCache[c];let u;try{u=new Intl.PluralRules(s,{type:l})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),dummyRule;if(!a.match(/-|_/))return dummyRule;const h=this.languageUtils.getLanguagePartFromCode(a);u=this.getRule(h,n)}return this.pluralRulesCache[c]=u,u}needsPlural(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(a,n);return s||(s=this.getRule("dev",n)),(s==null?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(a,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(a,s).map(l=>`${n}${l}`)}getSuffixes(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(a,n);return s||(s=this.getRule("dev",n)),s?s.resolvedOptions().pluralCategories.sort((l,c)=>suffixesOrder[l]-suffixesOrder[c]).map(l=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${l}`):[]}getSuffix(a,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=this.getRule(a,s);return l?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${l.select(n)}`:(this.logger.warn(`no plural rule found for: ${a}`),this.getSuffix("dev",n,s))}}const deepFindWithDefaults=function(o,a,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,c=getPathWithDefaults(o,a,n);return!c&&l&&isString(n)&&(c=deepFind(o,n,s),c===void 0&&(c=deepFind(a,n,s))),c},regexSafe=o=>o.replace(/\$/g,"$$$$");class Interpolator{constructor(){var n;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=a,this.format=((n=a==null?void 0:a.interpolation)==null?void 0:n.format)||(s=>s),this.init(a)}init(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};a.interpolation||(a.interpolation={escapeValue:!0});const{escape:n,escapeValue:s,useRawValueToEscape:l,prefix:c,prefixEscaped:u,suffix:d,suffixEscaped:h,formatSeparator:f,unescapeSuffix:p,unescapePrefix:g,nestingPrefix:v,nestingPrefixEscaped:b,nestingSuffix:w,nestingSuffixEscaped:x,nestingOptionsSeparator:S,maxReplaces:E,alwaysFormat:T}=a.interpolation;this.escape=n!==void 0?n:escape,this.escapeValue=s!==void 0?s:!0,this.useRawValueToEscape=l!==void 0?l:!1,this.prefix=c?regexEscape(c):u||"{{",this.suffix=d?regexEscape(d):h||"}}",this.formatSeparator=f||",",this.unescapePrefix=p?"":g||"-",this.unescapeSuffix=this.unescapePrefix?"":p||"",this.nestingPrefix=v?regexEscape(v):b||regexEscape("$t("),this.nestingSuffix=w?regexEscape(w):x||regexEscape(")"),this.nestingOptionsSeparator=S||",",this.maxReplaces=E||1e3,this.alwaysFormat=T!==void 0?T:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const a=(n,s)=>(n==null?void 0:n.source)===s?(n.lastIndex=0,n):new RegExp(s,"g");this.regexp=a(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=a(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=a(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(a,n,s,l){var b;let c,u,d;const h=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},f=w=>{if(w.indexOf(this.formatSeparator)<0){const T=deepFindWithDefaults(n,h,w,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(T,void 0,s,{...l,...n,interpolationkey:w}):T}const x=w.split(this.formatSeparator),S=x.shift().trim(),E=x.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(n,h,S,this.options.keySeparator,this.options.ignoreJSONStructure),E,s,{...l,...n,interpolationkey:S})};this.resetRegExp();const p=(l==null?void 0:l.missingInterpolationHandler)||this.options.missingInterpolationHandler,g=((b=l==null?void 0:l.interpolation)==null?void 0:b.skipOnVariables)!==void 0?l.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:w=>regexSafe(w)},{regex:this.regexp,safeValue:w=>this.escapeValue?regexSafe(this.escape(w)):regexSafe(w)}].forEach(w=>{for(d=0;c=w.regex.exec(a);){const x=c[1].trim();if(u=f(x),u===void 0)if(typeof p=="function"){const E=p(a,c,l);u=isString(E)?E:""}else if(l&&Object.prototype.hasOwnProperty.call(l,x))u="";else if(g){u=c[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${a}`),u="";else!isString(u)&&!this.useRawValueToEscape&&(u=makeString(u));const S=w.safeValue(u);if(a=a.replace(c[0],S),g?(w.regex.lastIndex+=u.length,w.regex.lastIndex-=c[0].length):w.regex.lastIndex=0,d++,d>=this.maxReplaces)break}}),a}nest(a,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l,c,u;const d=(h,f)=>{const p=this.nestingOptionsSeparator;if(h.indexOf(p)<0)return h;const g=h.split(new RegExp(`${p}[ ]*{`));let v=`{${g[1]}`;h=g[0],v=this.interpolate(v,u);const b=v.match(/'/g),w=v.match(/"/g);(((b==null?void 0:b.length)??0)%2===0&&!w||w.length%2!==0)&&(v=v.replace(/'/g,'"'));try{u=JSON.parse(v),f&&(u={...f,...u})}catch(x){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,x),`${h}${p}${v}`}return u.defaultValue&&u.defaultValue.indexOf(this.prefix)>-1&&delete u.defaultValue,h};for(;l=this.nestingRegexp.exec(a);){let h=[];u={...s},u=u.replace&&!isString(u.replace)?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;let f=!1;if(l[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(l[1])){const p=l[1].split(this.formatSeparator).map(g=>g.trim());l[1]=p.shift(),h=p,f=!0}if(c=n(d.call(this,l[1].trim(),u),u),c&&l[0]===a&&!isString(c))return c;isString(c)||(c=makeString(c)),c||(this.logger.warn(`missed to resolve ${l[1]} for nesting ${a}`),c=""),f&&(c=h.reduce((p,g)=>this.format(p,g,s.lng,{...s,interpolationkey:l[1].trim()}),c.trim())),a=a.replace(l[0],c),this.regexp.lastIndex=0}return a}}const parseFormatStr=o=>{let a=o.toLowerCase().trim();const n={};if(o.indexOf("(")>-1){const s=o.split("(");a=s[0].toLowerCase().trim();const l=s[1].substring(0,s[1].length-1);a==="currency"&&l.indexOf(":")<0?n.currency||(n.currency=l.trim()):a==="relativetime"&&l.indexOf(":")<0?n.range||(n.range=l.trim()):l.split(";").forEach(u=>{if(u){const[d,...h]=u.split(":"),f=h.join(":").trim().replace(/^'+|'+$/g,""),p=d.trim();n[p]||(n[p]=f),f==="false"&&(n[p]=!1),f==="true"&&(n[p]=!0),isNaN(f)||(n[p]=parseInt(f,10))}})}return{formatName:a,formatOptions:n}},createCachedFormatter=o=>{const a={};return(n,s,l)=>{let c=l;l&&l.interpolationkey&&l.formatParams&&l.formatParams[l.interpolationkey]&&l[l.interpolationkey]&&(c={...c,[l.interpolationkey]:void 0});const u=s+JSON.stringify(c);let d=a[u];return d||(d=o(getCleanedCode(s),l),a[u]=d),d(n)}};class Formatter{constructor(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=a,this.formats={number:createCachedFormatter((n,s)=>{const l=new Intl.NumberFormat(n,{...s});return c=>l.format(c)}),currency:createCachedFormatter((n,s)=>{const l=new Intl.NumberFormat(n,{...s,style:"currency"});return c=>l.format(c)}),datetime:createCachedFormatter((n,s)=>{const l=new Intl.DateTimeFormat(n,{...s});return c=>l.format(c)}),relativetime:createCachedFormatter((n,s)=>{const l=new Intl.RelativeTimeFormat(n,{...s});return c=>l.format(c,s.range||"day")}),list:createCachedFormatter((n,s)=>{const l=new Intl.ListFormat(n,{...s});return c=>l.format(c)})},this.init(a)}init(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(a,n){this.formats[a.toLowerCase().trim()]=n}addCached(a,n){this.formats[a.toLowerCase().trim()]=createCachedFormatter(n)}format(a,n,s){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const c=n.split(this.formatSeparator);if(c.length>1&&c[0].indexOf("(")>1&&c[0].indexOf(")")<0&&c.find(d=>d.indexOf(")")>-1)){const d=c.findIndex(h=>h.indexOf(")")>-1);c[0]=[c[0],...c.splice(1,d)].join(this.formatSeparator)}return c.reduce((d,h)=>{var g;const{formatName:f,formatOptions:p}=parseFormatStr(h);if(this.formats[f]){let v=d;try{const b=((g=l==null?void 0:l.formatParams)==null?void 0:g[l.interpolationkey])||{},w=b.locale||b.lng||l.locale||l.lng||s;v=this.formats[f](d,w,{...p,...l,...b})}catch(b){this.logger.warn(b)}return v}else this.logger.warn(`there was no format function for ${f}`);return d},a)}}const removePending=(o,a)=>{o.pending[a]!==void 0&&(delete o.pending[a],o.pendingCount--)};class Connector extends EventEmitter{constructor(a,n,s){var c,u;let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=a,this.store=n,this.services=s,this.languageUtils=s.languageUtils,this.options=l,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=l.maxParallelReads||10,this.readingCalls=0,this.maxRetries=l.maxRetries>=0?l.maxRetries:5,this.retryTimeout=l.retryTimeout>=1?l.retryTimeout:350,this.state={},this.queue=[],(u=(c=this.backend)==null?void 0:c.init)==null||u.call(c,s,l.backend,l)}queueLoad(a,n,s,l){const c={},u={},d={},h={};return a.forEach(f=>{let p=!0;n.forEach(g=>{const v=`${f}|${g}`;!s.reload&&this.store.hasResourceBundle(f,g)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?u[v]===void 0&&(u[v]=!0):(this.state[v]=1,p=!1,u[v]===void 0&&(u[v]=!0),c[v]===void 0&&(c[v]=!0),h[g]===void 0&&(h[g]=!0)))}),p||(d[f]=!0)}),(Object.keys(c).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:l}),{toLoad:Object.keys(c),pending:Object.keys(u),toLoadLanguages:Object.keys(d),toLoadNamespaces:Object.keys(h)}}loaded(a,n,s){const l=a.split("|"),c=l[0],u=l[1];n&&this.emit("failedLoading",c,u,n),!n&&s&&this.store.addResourceBundle(c,u,s,void 0,void 0,{skipCopy:!0}),this.state[a]=n?-1:2,n&&s&&(this.state[a]=0);const d={};this.queue.forEach(h=>{pushPath(h.loaded,[c],u),removePending(h,a),n&&h.errors.push(n),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(f=>{d[f]||(d[f]={});const p=h.loaded[f];p.length&&p.forEach(g=>{d[f][g]===void 0&&(d[f][g]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(h=>!h.done)}read(a,n,s){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!a.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:a,ns:n,fcName:s,tried:l,wait:c,callback:u});return}this.readingCalls++;const d=(f,p)=>{if(this.readingCalls--,this.waitingReads.length>0){const g=this.waitingReads.shift();this.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(f&&p&&l<this.maxRetries){setTimeout(()=>{this.read.call(this,a,n,s,l+1,c*2,u)},c);return}u(f,p)},h=this.backend[s].bind(this.backend);if(h.length===2){try{const f=h(a,n);f&&typeof f.then=="function"?f.then(p=>d(null,p)).catch(d):d(null,f)}catch(f){d(f)}return}return h(a,n,d)}prepareLoading(a,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();isString(a)&&(a=this.languageUtils.toResolveHierarchy(a)),isString(n)&&(n=[n]);const c=this.queueLoad(a,n,s,l);if(!c.toLoad.length)return c.pending.length||l(),null;c.toLoad.forEach(u=>{this.loadOne(u)})}load(a,n,s){this.prepareLoading(a,n,{},s)}reload(a,n,s){this.prepareLoading(a,n,{reload:!0},s)}loadOne(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const s=a.split("|"),l=s[0],c=s[1];this.read(l,c,"read",void 0,void 0,(u,d)=>{u&&this.logger.warn(`${n}loading namespace ${c} for language ${l} failed`,u),!u&&d&&this.logger.log(`${n}loaded namespace ${c} for language ${l}`,d),this.loaded(a,u,d)})}saveMissing(a,n,s,l,c){var h,f,p,g,v;let u=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((f=(h=this.services)==null?void 0:h.utils)!=null&&f.hasLoadedNamespace&&!((g=(p=this.services)==null?void 0:p.utils)!=null&&g.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${s}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(s==null||s==="")){if((v=this.backend)!=null&&v.create){const b={...u,isUpdate:c},w=this.backend.create.bind(this.backend);if(w.length<6)try{let x;w.length===5?x=w(a,n,s,l,b):x=w(a,n,s,l),x&&typeof x.then=="function"?x.then(S=>d(null,S)).catch(d):d(null,x)}catch(x){d(x)}else w(a,n,s,l,d,b)}!a||!a[0]||this.store.addResource(a[0],n,s,l)}}}const get=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:o=>{let a={};if(typeof o[1]=="object"&&(a=o[1]),isString(o[1])&&(a.defaultValue=o[1]),isString(o[2])&&(a.tDescription=o[2]),typeof o[2]=="object"||typeof o[3]=="object"){const n=o[3]||o[2];Object.keys(n).forEach(s=>{a[s]=n[s]})}return a},interpolation:{escapeValue:!0,format:o=>o,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=o=>{var a,n;return isString(o.ns)&&(o.ns=[o.ns]),isString(o.fallbackLng)&&(o.fallbackLng=[o.fallbackLng]),isString(o.fallbackNS)&&(o.fallbackNS=[o.fallbackNS]),((n=(a=o.supportedLngs)==null?void 0:a.indexOf)==null?void 0:n.call(a,"cimode"))<0&&(o.supportedLngs=o.supportedLngs.concat(["cimode"])),typeof o.initImmediate=="boolean"&&(o.initAsync=o.initImmediate),o},noop=()=>{},bindMemberFunctions=o=>{Object.getOwnPropertyNames(Object.getPrototypeOf(o)).forEach(n=>{typeof o[n]=="function"&&(o[n]=o[n].bind(o))})};class I18n extends EventEmitter{constructor(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(a),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),n&&!this.isInitialized&&!a.isClone){if(!this.options.initAsync)return this.init(a,n),this;setTimeout(()=>{this.init(a,n)},0)}}init(){var a=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(s=n,n={}),n.defaultNS==null&&n.ns&&(isString(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const l=get();this.options={...l,...this.options,...transformOptions(n)},this.options.interpolation={...l.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const c=p=>p?typeof p=="function"?new p:p:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(c(this.modules.logger),this.options):baseLogger.init(null,this.options);let p;this.modules.formatter?p=this.modules.formatter:p=Formatter;const g=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const v=this.services;v.logger=baseLogger,v.resourceStore=this.store,v.languageUtils=g,v.pluralResolver=new PluralResolver(g,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),p&&(!this.options.interpolation.format||this.options.interpolation.format===l.interpolation.format)&&(v.formatter=c(p),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new Interpolator(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new Connector(c(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(b){for(var w=arguments.length,x=new Array(w>1?w-1:0),S=1;S<w;S++)x[S-1]=arguments[S];a.emit(b,...x)}),this.modules.languageDetector&&(v.languageDetector=c(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=c(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(b){for(var w=arguments.length,x=new Array(w>1?w-1:0),S=1;S<w;S++)x[S-1]=arguments[S];a.emit(b,...x)}),this.modules.external.forEach(b=>{b.init&&b.init(this)})}if(this.format=this.options.interpolation.format,s||(s=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.length>0&&p[0]!=="dev"&&(this.options.lng=p[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(p=>{this[p]=function(){return a.store[p](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(p=>{this[p]=function(){return a.store[p](...arguments),a}});const h=defer(),f=()=>{const p=(g,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),h.resolve(v),s(g,v)};if(this.languages&&!this.isInitialized)return p(null,this.t.bind(this));this.changeLanguage(this.options.lng,p)};return this.options.resources||!this.options.initAsync?f():setTimeout(f,0),h}loadResources(a){var c,u;let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const l=isString(a)?a:this.language;if(typeof a=="function"&&(s=a),!this.options.resources||this.options.partialBundledLanguages){if((l==null?void 0:l.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return s();const d=[],h=f=>{if(!f||f==="cimode")return;this.services.languageUtils.toResolveHierarchy(f).forEach(g=>{g!=="cimode"&&d.indexOf(g)<0&&d.push(g)})};l?h(l):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(p=>h(p)),(u=(c=this.options.preload)==null?void 0:c.forEach)==null||u.call(c,f=>h(f)),this.services.backendConnector.load(d,this.options.ns,f=>{!f&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),s(f)})}else s(null)}reloadResources(a,n,s){const l=defer();return typeof a=="function"&&(s=a,a=void 0),typeof n=="function"&&(s=n,n=void 0),a||(a=this.languages),n||(n=this.options.ns),s||(s=noop),this.services.backendConnector.reload(a,n,c=>{l.resolve(),s(c)}),l}use(a){if(!a)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!a.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return a.type==="backend"&&(this.modules.backend=a),(a.type==="logger"||a.log&&a.warn&&a.error)&&(this.modules.logger=a),a.type==="languageDetector"&&(this.modules.languageDetector=a),a.type==="i18nFormat"&&(this.modules.i18nFormat=a),a.type==="postProcessor"&&postProcessor.addPostProcessor(a),a.type==="formatter"&&(this.modules.formatter=a),a.type==="3rdParty"&&this.modules.external.push(a),this}setResolvedLanguage(a){if(!(!a||!this.languages)&&!(["cimode","dev"].indexOf(a)>-1))for(let n=0;n<this.languages.length;n++){const s=this.languages[n];if(!(["cimode","dev"].indexOf(s)>-1)&&this.store.hasLanguageSomeTranslations(s)){this.resolvedLanguage=s;break}}}changeLanguage(a,n){var s=this;this.isLanguageChangingTo=a;const l=defer();this.emit("languageChanging",a);const c=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},u=(h,f)=>{f?(c(f),this.translator.changeLanguage(f),this.isLanguageChangingTo=void 0,this.emit("languageChanged",f),this.logger.log("languageChanged",f)):this.isLanguageChangingTo=void 0,l.resolve(function(){return s.t(...arguments)}),n&&n(h,function(){return s.t(...arguments)})},d=h=>{var p,g;!a&&!h&&this.services.languageDetector&&(h=[]);const f=isString(h)?h:this.services.languageUtils.getBestMatchFromCodes(h);f&&(this.language||c(f),this.translator.language||this.translator.changeLanguage(f),(g=(p=this.services.languageDetector)==null?void 0:p.cacheUserLanguage)==null||g.call(p,f)),this.loadResources(f,v=>{u(v,f)})};return!a&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!a&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(a),l}getFixedT(a,n,s){var l=this;const c=function(u,d){let h;if(typeof d!="object"){for(var f=arguments.length,p=new Array(f>2?f-2:0),g=2;g<f;g++)p[g-2]=arguments[g];h=l.options.overloadTranslationOptionHandler([u,d].concat(p))}else h={...d};h.lng=h.lng||c.lng,h.lngs=h.lngs||c.lngs,h.ns=h.ns||c.ns,h.keyPrefix!==""&&(h.keyPrefix=h.keyPrefix||s||c.keyPrefix);const v=l.options.keySeparator||".";let b;return h.keyPrefix&&Array.isArray(u)?b=u.map(w=>`${h.keyPrefix}${v}${w}`):b=h.keyPrefix?`${h.keyPrefix}${v}${u}`:u,l.t(b,h)};return isString(a)?c.lng=a:c.lngs=a,c.ns=n,c.keyPrefix=s,c}t(){var l;for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(l=this.translator)==null?void 0:l.translate(...n)}exists(){var l;for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(l=this.translator)==null?void 0:l.exists(...n)}setDefaultNamespace(a){this.options.defaultNS=a}hasLoadedNamespace(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=n.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,c=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;const u=(d,h)=>{const f=this.services.backendConnector.state[`${d}|${h}`];return f===-1||f===0||f===2};if(n.precheck){const d=n.precheck(this,u);if(d!==void 0)return d}return!!(this.hasResourceBundle(s,a)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(s,a)&&(!l||u(c,a)))}loadNamespaces(a,n){const s=defer();return this.options.ns?(isString(a)&&(a=[a]),a.forEach(l=>{this.options.ns.indexOf(l)<0&&this.options.ns.push(l)}),this.loadResources(l=>{s.resolve(),n&&n(l)}),s):(n&&n(),Promise.resolve())}loadLanguages(a,n){const s=defer();isString(a)&&(a=[a]);const l=this.options.preload||[],c=a.filter(u=>l.indexOf(u)<0&&this.services.languageUtils.isSupportedCode(u));return c.length?(this.options.preload=l.concat(c),this.loadResources(u=>{s.resolve(),n&&n(u)}),s):(n&&n(),Promise.resolve())}dir(a){var l,c;if(a||(a=this.resolvedLanguage||(((l=this.languages)==null?void 0:l.length)>0?this.languages[0]:this.language)),!a)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],s=((c=this.services)==null?void 0:c.languageUtils)||new LanguageUtil(get());return n.indexOf(s.getLanguagePartFromCode(a))>-1||a.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new I18n(a,n)}cloneInstance(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const s=a.forkResourceStore;s&&delete a.forkResourceStore;const l={...this.options,...a,isClone:!0},c=new I18n(l);if((a.debug!==void 0||a.prefix!==void 0)&&(c.logger=c.logger.clone(a)),["store","services","language"].forEach(d=>{c[d]=this[d]}),c.services={...this.services},c.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},s){const d=Object.keys(this.store.data).reduce((h,f)=>(h[f]={...this.store.data[f]},Object.keys(h[f]).reduce((p,g)=>(p[g]={...h[f][g]},p),{})),{});c.store=new ResourceStore(d,l),c.services.resourceStore=c.store}return c.translator=new Translator(c.services,l),c.translator.on("*",function(d){for(var h=arguments.length,f=new Array(h>1?h-1:0),p=1;p<h;p++)f[p-1]=arguments[p];c.emit(d,...f)}),c.init(l,n),c.translator.options=l,c.translator.backendConnector.services.utils={hasLoadedNamespace:c.hasLoadedNamespace.bind(c)},c}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const resources={en:{translation:{su:"Su",mo:"Mo",tu:"Tu",we:"We",th:"Th",fr:"Fr",sa:"Sa",yesterday:"Yesterday",thisWeek:"This week",lastWeek:"Last week",lastMonth:"Last month",lastThreeMonth:"Last 3 months",lastSixMonth:"Last 6 months",thisYear:"This year",lastYear:"Last year",lastNumberOfDay:"Last {{day}} days",monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday",january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December",today:"Today",apply:"Apply",cancel:"Cancel",submit:"Submit",limitFileError:"File {{file.name}} exceeds the maximum size of {{sizeTitle}}",limitFileWarning:"File size should not exceed {{sizeTitle}}.",uploadFileAction:"Click or drag and drop to upload file",upload:"Upload",file:"File",remove:"Remove",choose:"Choose",select:"Select",input:"Input",from:"From",to:"To",add:"Add",all:"All",noResultFound:"No result found",ofItems:"of {{totalItem}} items",page:"Page",go:"Go to",or:"Or",username:"Username",password:"Password",dontHaveAccount:"Don't have an account?",forgotPassword:"Forgot your password?",login:"Log in",loginTo:"Log in to",signup:"Sign up",signupFor:"Sign up for","start-date":"Start date","end-date":"End date",reset:"Reset",date:"Date",on:"On",daily:"Daily",weekly:"Weekly",monthly:"Monthly",last:"Last",value:"Value",noDataFound:"There are no data to found.",export:"Export",import:"Import",filter:"Filter",clearall:"Clear all",min:"Min",max:"Max",report:"Report",pending:"Pending",duplicate:"Duplicate",more:"More",true:"True",false:"False",save:"Save",close:"Close",delete:"Delete",edit:"Edit",itemsSelected:"{{count}} items selected",successfully:"Successfully",confirm:"Confirm",seemore:"See more"}},vi:{translation:{su:"CN",mo:"T2",tu:"T3",we:"T4",th:"T5",fr:"T6",sa:"T7",yesterday:"Hôm qua",thisWeek:"Tuần này",lastWeek:"Tuần trước",lastMonth:"Tháng trước",lastThreeMonth:"3 tháng trước",lastSixMonth:"6 tháng trước",thisYear:"Năm nay",lastYear:"Năm trước",lastNumberOfDay:"{{day}} ngày trước",monday:"Thứ 2",tuesday:"Thứ 3",wednesday:"Thứ 4",thursday:"Thứ 5",friday:"Thứ 6",saturday:"Thứ 7",sunday:"Chủ nhật",january:"Tháng 1",february:"Tháng 2",march:"Tháng 3",april:"Tháng 4",may:"Tháng 5",june:"Tháng 6",july:"Tháng 7",august:"Tháng 8",september:"Tháng 9",october:"Tháng 10",november:"Tháng 11",december:"Tháng 12",today:"Hôm nay",apply:"Áp dụng",cancel:"Hủy",submit:"Xác nhận",limitFileError:"Tệp {{name}} vượt quá dung lượng tối đa {{sizeTitle}}",limitFileWarning:"Tệp không được vượt quá {{sizeTitle}}.",uploadFileAction:"Nhấn hoặc kéo vào để tải tệp lên",upload:"Tải lên",file:"Tệp",remove:"Xóa",choose:"Chọn",select:"Chọn",input:"Nhập",from:"Từ",to:"Tới",add:"Thêm",all:"Tất cả",noResultFound:"Không tìm thấy kết quả",ofItems:"trên {{totalItem}} kết quả",page:"Trang",go:"Đi tới",or:"Hoặc",username:"Tên đăng nhập",password:"Mật khẩu",dontHaveAccount:"Chưa có tài khoản?",forgotPassword:"Quên mật khẩu?",login:"Đăng nhập",loginTo:"Đăng nhập vào",signup:"Đăng ký",signupFor:"Đăng ký","start-date":"Ngày bắt đầu","end-date":"Ngày kết thúc",reset:"Mặc định",date:"Ngày",on:"Vào",daily:"Hàng ngày",weekly:"Hàng tuần",monthly:"Hàng tháng",last:"Cuối tháng",value:"Giá trị",noDataFound:"Không có dữ liệu.",export:"Xuất tệp",import:"Tải lên",filter:"Bộ lọc",clearall:"Làm mới",min:"Tối thiểu",max:"Tối đa",report:"Báo cáo",pending:"Chờ xác nhận",duplicate:"Nhân bản",more:"Thao tác khác",true:"Đúng",false:"Sai",save:"Lưu",close:"Đóng",delete:"Xóa",edit:"Chỉnh sửa",itemsSelected:"Đã chọn {{count}} phần từ",successfully:"Thành công",confirm:"Xác nhận",seemore:"Xem thêm"}}};instance.use(initReactI18next).init({resources,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});exports.AccountController=AccountController;exports.BaseDA=BaseDA;exports.Button=Button;exports.CKEditorForm=CKEditorForm;exports.Calendar=Calendar$1;exports.CardById=CardById;exports.Carousel=Carousel;exports.ChartById=ChartById;exports.Checkbox=Checkbox;exports.CheckboxForm=CheckboxForm;exports.CkEditorUploadAdapter=CkEditorUploadAdapter;exports.ColorPicker=ColorPicker;exports.ColorPickerForm=ColorPickerForm;exports.ComponentStatus=ComponentStatus;exports.CustomCkEditor5=CustomCkEditor5;exports.DataController=DataController;exports.DataTable=DataTable;exports.DateTimePicker=DateTimePicker;exports.DateTimePickerForm=DateTimePickerForm;exports.DialogAlignment=DialogAlignment;exports.EmptyPage=EmptyPage;exports.FormById=FormById;exports.GroupCheckboxForm=GroupCheckboxForm;exports.GroupRadioButtonForm=GroupRadioButtonForm;exports.IconPicker=IconPicker;exports.ImportFile=ImportFile;exports.ImportFileForm=ImportFileForm;exports.InfiniteScroll=InfiniteScroll;exports.InputOtp=InputOtp;exports.InputPasswordForm=InputPasswordForm;exports.NavLink=NavLink;exports.Navigate=Navigate;exports.NumberPicker=NumberPicker;exports.Outlet=Outlet;exports.PageById=PageById;exports.PageByUrl=PageByUrl;exports.Pagination=Pagination;exports.Popup=Popup;exports.ProgressBar=ProgressBar;exports.ProgressCircle=ProgressCircle;exports.RadioButton=RadioButton;exports.RadioButtonForm=RadioButtonForm;exports.RangeForm=RangeForm;exports.RateForm=RateForm;exports.Rating=Rating;exports.Route=Route;exports.Routes=Routes;exports.Select1=Select1;exports.Select1Form=Select1Form;exports.SelectMultiple=SelectMultiple;exports.SelectMultipleForm=SelectMultipleForm;exports.SettingDataController=SettingDataController;exports.SimpleButton=SimpleButton;exports.Slider=Slider;exports.Switch=Switch;exports.SwitchForm=SwitchForm;exports.TableById=TableById;exports.TableController=TableController;exports.Tag=Tag;exports.Text=Text$2;exports.TextArea=TextArea;exports.TextAreaForm=TextAreaForm;exports.TextField=TextField;exports.TextFieldForm=TextFieldForm;exports.ToastContainer=Lt;exports.ToastMessage=ToastMessage;exports.Util=Util;exports.ViewById=ViewById;exports.WLoginView=WLoginView;exports.WiniController=WiniController;exports.Winicon=Winicon;exports.closePopup=closePopup;exports.default=WiniProvider;exports.formatNumberConvert=formatNumberConvert;exports.getStatusIcon=getStatusIcon;exports.i18n=instance;exports.imgFileTypes=imgFileTypes;exports.inputMoneyPattern=inputMoneyPattern;exports.randomGID=randomGID;exports.showDialog=showDialog;exports.showPopup=showPopup;exports.showTooltipElement=showTooltipElement;exports.useLocation=useLocation;exports.useNavigate=useNavigate;exports.useParams=useParams;exports.useSearchParams=useSearchParams;
//# sourceMappingURL=index.cjs.js.map
